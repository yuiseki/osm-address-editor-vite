function lP(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(e,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function r(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=r(u);fetch(u.href,f)}})();var pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function a(){if(this instanceof a){var u=[null];u.push.apply(u,arguments);var f=Function.bind.apply(t,u);return new f}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var u=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,u.get?u:{enumerable:!0,get:function(){return e[a]}})}),r}var Lf={},uP={get exports(){return Lf},set exports(e){Lf=e}},Zm={},pt={},cP={get exports(){return pt},set exports(e){pt=e}},Un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd=Symbol.for("react.element"),hP=Symbol.for("react.portal"),fP=Symbol.for("react.fragment"),dP=Symbol.for("react.strict_mode"),pP=Symbol.for("react.profiler"),mP=Symbol.for("react.provider"),gP=Symbol.for("react.context"),yP=Symbol.for("react.forward_ref"),vP=Symbol.for("react.suspense"),_P=Symbol.for("react.memo"),xP=Symbol.for("react.lazy"),aw=Symbol.iterator;function wP(e){return e===null||typeof e!="object"?null:(e=aw&&e[aw]||e["@@iterator"],typeof e=="function"?e:null)}var iE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oE=Object.assign,sE={};function dh(e,t,r){this.props=e,this.context=t,this.refs=sE,this.updater=r||iE}dh.prototype.isReactComponent={};dh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aE(){}aE.prototype=dh.prototype;function i1(e,t,r){this.props=e,this.context=t,this.refs=sE,this.updater=r||iE}var o1=i1.prototype=new aE;o1.constructor=i1;oE(o1,dh.prototype);o1.isPureReactComponent=!0;var lw=Array.isArray,lE=Object.prototype.hasOwnProperty,s1={current:null},uE={key:!0,ref:!0,__self:!0,__source:!0};function cE(e,t,r){var a,u={},f=null,g=null;if(t!=null)for(a in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(f=""+t.key),t)lE.call(t,a)&&!uE.hasOwnProperty(a)&&(u[a]=t[a]);var l=arguments.length-2;if(l===1)u.children=r;else if(1<l){for(var w=Array(l),E=0;E<l;E++)w[E]=arguments[E+2];u.children=w}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)u[a]===void 0&&(u[a]=l[a]);return{$$typeof:rd,type:e,key:f,ref:g,props:u,_owner:s1.current}}function bP(e,t){return{$$typeof:rd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function a1(e){return typeof e=="object"&&e!==null&&e.$$typeof===rd}function EP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var uw=/\/+/g;function fy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?EP(""+e.key):t.toString(36)}function _p(e,t,r,a,u){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case rd:case hP:g=!0}}if(g)return g=e,u=u(g),e=a===""?"."+fy(g,0):a,lw(u)?(r="",e!=null&&(r=e.replace(uw,"$&/")+"/"),_p(u,t,r,"",function(E){return E})):u!=null&&(a1(u)&&(u=bP(u,r+(!u.key||g&&g.key===u.key?"":(""+u.key).replace(uw,"$&/")+"/")+e)),t.push(u)),1;if(g=0,a=a===""?".":a+":",lw(e))for(var l=0;l<e.length;l++){f=e[l];var w=a+fy(f,l);g+=_p(f,t,r,w,u)}else if(w=wP(e),typeof w=="function")for(e=w.call(e),l=0;!(f=e.next()).done;)f=f.value,w=a+fy(f,l++),g+=_p(f,t,r,w,u);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Gd(e,t,r){if(e==null)return e;var a=[],u=0;return _p(e,a,"","",function(f){return t.call(r,f,u++)}),a}function SP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var to={current:null},xp={transition:null},TP={ReactCurrentDispatcher:to,ReactCurrentBatchConfig:xp,ReactCurrentOwner:s1};Un.Children={map:Gd,forEach:function(e,t,r){Gd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Gd(e,function(){t++}),t},toArray:function(e){return Gd(e,function(t){return t})||[]},only:function(e){if(!a1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Un.Component=dh;Un.Fragment=fP;Un.Profiler=pP;Un.PureComponent=i1;Un.StrictMode=dP;Un.Suspense=vP;Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TP;Un.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=oE({},e.props),u=e.key,f=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,g=s1.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(w in t)lE.call(t,w)&&!uE.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&l!==void 0?l[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=r;else if(1<w){l=Array(w);for(var E=0;E<w;E++)l[E]=arguments[E+2];a.children=l}return{$$typeof:rd,type:e.type,key:u,ref:f,props:a,_owner:g}};Un.createContext=function(e){return e={$$typeof:gP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mP,_context:e},e.Consumer=e};Un.createElement=cE;Un.createFactory=function(e){var t=cE.bind(null,e);return t.type=e,t};Un.createRef=function(){return{current:null}};Un.forwardRef=function(e){return{$$typeof:yP,render:e}};Un.isValidElement=a1;Un.lazy=function(e){return{$$typeof:xP,_payload:{_status:-1,_result:e},_init:SP}};Un.memo=function(e,t){return{$$typeof:_P,type:e,compare:t===void 0?null:t}};Un.startTransition=function(e){var t=xp.transition;xp.transition={};try{e()}finally{xp.transition=t}};Un.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Un.useCallback=function(e,t){return to.current.useCallback(e,t)};Un.useContext=function(e){return to.current.useContext(e)};Un.useDebugValue=function(){};Un.useDeferredValue=function(e){return to.current.useDeferredValue(e)};Un.useEffect=function(e,t){return to.current.useEffect(e,t)};Un.useId=function(){return to.current.useId()};Un.useImperativeHandle=function(e,t,r){return to.current.useImperativeHandle(e,t,r)};Un.useInsertionEffect=function(e,t){return to.current.useInsertionEffect(e,t)};Un.useLayoutEffect=function(e,t){return to.current.useLayoutEffect(e,t)};Un.useMemo=function(e,t){return to.current.useMemo(e,t)};Un.useReducer=function(e,t,r){return to.current.useReducer(e,t,r)};Un.useRef=function(e){return to.current.useRef(e)};Un.useState=function(e){return to.current.useState(e)};Un.useSyncExternalStore=function(e,t,r){return to.current.useSyncExternalStore(e,t,r)};Un.useTransition=function(){return to.current.useTransition()};Un.version="18.2.0";(function(e){e.exports=Un})(cP);const hE=rE(pt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CP=pt,AP=Symbol.for("react.element"),IP=Symbol.for("react.fragment"),PP=Object.prototype.hasOwnProperty,kP=CP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MP={key:!0,ref:!0,__self:!0,__source:!0};function fE(e,t,r){var a,u={},f=null,g=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(g=t.ref);for(a in t)PP.call(t,a)&&!MP.hasOwnProperty(a)&&(u[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)u[a]===void 0&&(u[a]=t[a]);return{$$typeof:AP,type:e,key:f,ref:g,props:u,_owner:kP.current}}Zm.Fragment=IP;Zm.jsx=fE;Zm.jsxs=fE;(function(e){e.exports=Zm})(uP);const Ss=Lf.Fragment,Rt=Lf.jsx,Zn=Lf.jsxs;var Of={},zP={get exports(){return Of},set exports(e){Of=e}},Io={},y0={},LP={get exports(){return y0},set exports(e){y0=e}},dE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,he){var _e=te.length;te.push(he);e:for(;0<_e;){var xe=_e-1>>>1,je=te[xe];if(0<u(je,he))te[xe]=he,te[_e]=je,_e=xe;else break e}}function r(te){return te.length===0?null:te[0]}function a(te){if(te.length===0)return null;var he=te[0],_e=te.pop();if(_e!==he){te[0]=_e;e:for(var xe=0,je=te.length,Ie=je>>>1;xe<Ie;){var Pe=2*(xe+1)-1,$e=te[Pe],Ne=Pe+1,qe=te[Ne];if(0>u($e,_e))Ne<je&&0>u(qe,$e)?(te[xe]=qe,te[Ne]=_e,xe=Ne):(te[xe]=$e,te[Pe]=_e,xe=Pe);else if(Ne<je&&0>u(qe,_e))te[xe]=qe,te[Ne]=_e,xe=Ne;else break e}}return he}function u(te,he){var _e=te.sortIndex-he.sortIndex;return _e!==0?_e:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,l=g.now();e.unstable_now=function(){return g.now()-l}}var w=[],E=[],T=1,S=null,C=3,F=!1,Y=!1,H=!1,le=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(te){for(var he=r(E);he!==null;){if(he.callback===null)a(E);else if(he.startTime<=te)a(E),he.sortIndex=he.expirationTime,t(w,he);else break;he=r(E)}}function se(te){if(H=!1,B(te),!Y)if(r(w)!==null)Y=!0,ie(G);else{var he=r(E);he!==null&&ne(se,he.startTime-te)}}function G(te,he){Y=!1,H&&(H=!1,W(k),k=-1),F=!0;var _e=C;try{for(B(he),S=r(w);S!==null&&(!(S.expirationTime>he)||te&&!K());){var xe=S.callback;if(typeof xe=="function"){S.callback=null,C=S.priorityLevel;var je=xe(S.expirationTime<=he);he=e.unstable_now(),typeof je=="function"?S.callback=je:S===r(w)&&a(w),B(he)}else a(w);S=r(w)}if(S!==null)var Ie=!0;else{var Pe=r(E);Pe!==null&&ne(se,Pe.startTime-he),Ie=!1}return Ie}finally{S=null,C=_e,F=!1}}var j=!1,b=null,k=-1,U=5,X=-1;function K(){return!(e.unstable_now()-X<U)}function de(){if(b!==null){var te=e.unstable_now();X=te;var he=!0;try{he=b(!0,te)}finally{he?ve():(j=!1,b=null)}}else j=!1}var ve;if(typeof V=="function")ve=function(){V(de)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ee=we.port2;we.port1.onmessage=de,ve=function(){ee.postMessage(null)}}else ve=function(){le(de,0)};function ie(te){b=te,j||(j=!0,ve())}function ne(te,he){k=le(function(){te(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){Y||F||(Y=!0,ie(G))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return r(w)},e.unstable_next=function(te){switch(C){case 1:case 2:case 3:var he=3;break;default:he=C}var _e=C;C=he;try{return te()}finally{C=_e}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var _e=C;C=te;try{return he()}finally{C=_e}},e.unstable_scheduleCallback=function(te,he,_e){var xe=e.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?xe+_e:xe):_e=xe,te){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=_e+je,te={id:T++,callback:he,priorityLevel:te,startTime:_e,expirationTime:je,sortIndex:-1},_e>xe?(te.sortIndex=_e,t(E,te),r(w)===null&&te===r(E)&&(H?(W(k),k=-1):H=!0,ne(se,_e-xe))):(te.sortIndex=je,t(w,te),Y||F||(Y=!0,ie(G))),te},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(te){var he=C;return function(){var _e=C;C=he;try{return te.apply(this,arguments)}finally{C=_e}}}})(dE);(function(e){e.exports=dE})(LP);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE=pt,Ao=y0;function Ct(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mE=new Set,Rf={};function ju(e,t){th(e,t),th(e+"Capture",t)}function th(e,t){for(Rf[e]=t,e=0;e<t.length;e++)mE.add(t[e])}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v0=Object.prototype.hasOwnProperty,OP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cw={},hw={};function RP(e){return v0.call(hw,e)?!0:v0.call(cw,e)?!1:OP.test(e)?hw[e]=!0:(cw[e]=!0,!1)}function FP(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jP(e,t,r,a){if(t===null||typeof t>"u"||FP(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function no(e,t,r,a,u,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xi[e]=new no(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xi[t]=new no(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xi[e]=new no(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xi[e]=new no(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xi[e]=new no(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xi[e]=new no(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xi[e]=new no(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xi[e]=new no(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xi[e]=new no(e,5,!1,e.toLowerCase(),null,!1,!1)});var l1=/[\-:]([a-z])/g;function u1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(l1,u1);xi[t]=new no(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(l1,u1);xi[t]=new no(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(l1,u1);xi[t]=new no(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xi[e]=new no(e,1,!1,e.toLowerCase(),null,!1,!1)});xi.xlinkHref=new no("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xi[e]=new no(e,1,!1,e.toLowerCase(),null,!0,!0)});function c1(e,t,r,a){var u=xi.hasOwnProperty(t)?xi[t]:null;(u!==null?u.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jP(t,r,u,a)&&(r=null),a||u===null?RP(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,a=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Da=pE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wd=Symbol.for("react.element"),Pc=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),h1=Symbol.for("react.strict_mode"),_0=Symbol.for("react.profiler"),gE=Symbol.for("react.provider"),yE=Symbol.for("react.context"),f1=Symbol.for("react.forward_ref"),x0=Symbol.for("react.suspense"),w0=Symbol.for("react.suspense_list"),d1=Symbol.for("react.memo"),hl=Symbol.for("react.lazy"),vE=Symbol.for("react.offscreen"),fw=Symbol.iterator;function Yh(e){return e===null||typeof e!="object"?null:(e=fw&&e[fw]||e["@@iterator"],typeof e=="function"?e:null)}var Rr=Object.assign,dy;function of(e){if(dy===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);dy=t&&t[1]||""}return`
`+dy+e}var py=!1;function my(e,t){if(!e||py)return"";py=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var a=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){a=E}e.call(t.prototype)}else{try{throw Error()}catch(E){a=E}e()}}catch(E){if(E&&a&&typeof E.stack=="string"){for(var u=E.stack.split(`
`),f=a.stack.split(`
`),g=u.length-1,l=f.length-1;1<=g&&0<=l&&u[g]!==f[l];)l--;for(;1<=g&&0<=l;g--,l--)if(u[g]!==f[l]){if(g!==1||l!==1)do if(g--,l--,0>l||u[g]!==f[l]){var w=`
`+u[g].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=g&&0<=l);break}}}finally{py=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?of(e):""}function BP(e){switch(e.tag){case 5:return of(e.type);case 16:return of("Lazy");case 13:return of("Suspense");case 19:return of("SuspenseList");case 0:case 2:case 15:return e=my(e.type,!1),e;case 11:return e=my(e.type.render,!1),e;case 1:return e=my(e.type,!0),e;default:return""}}function b0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kc:return"Fragment";case Pc:return"Portal";case _0:return"Profiler";case h1:return"StrictMode";case x0:return"Suspense";case w0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yE:return(e.displayName||"Context")+".Consumer";case gE:return(e._context.displayName||"Context")+".Provider";case f1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case d1:return t=e.displayName||null,t!==null?t:b0(e.type)||"Memo";case hl:t=e._payload,e=e._init;try{return b0(e(t))}catch{}}return null}function DP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b0(t);case 8:return t===h1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _E(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NP(e){var t=_E(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zd(e){e._valueTracker||(e._valueTracker=NP(e))}function xE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=_E(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Up(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function E0(e,t){var r=t.checked;return Rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function dw(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Pl(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wE(e,t){t=t.checked,t!=null&&c1(e,"checked",t,!1)}function S0(e,t){wE(e,t);var r=Pl(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?T0(e,t.type,r):t.hasOwnProperty("defaultValue")&&T0(e,t.type,Pl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function T0(e,t,r){(t!=="number"||Up(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var sf=Array.isArray;function Zc(e,t,r,a){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Pl(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function C0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ct(91));return Rr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ct(92));if(sf(r)){if(1<r.length)throw Error(Ct(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Pl(r)}}function bE(e,t){var r=Pl(t.value),a=Pl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function gw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function EE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function A0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?EE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hd,SE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hd=Hd||document.createElement("div"),Hd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ff(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var yf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UP=["Webkit","ms","Moz","O"];Object.keys(yf).forEach(function(e){UP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yf[t]=yf[e]})});function TE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||yf.hasOwnProperty(e)&&yf[e]?(""+t).trim():t+"px"}function CE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,u=TE(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,u):e[r]=u}}var $P=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I0(e,t){if(t){if($P[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ct(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ct(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ct(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ct(62))}}function P0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k0=null;function p1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var M0=null,Hc=null,Xc=null;function yw(e){if(e=sd(e)){if(typeof M0!="function")throw Error(Ct(280));var t=e.stateNode;t&&(t=qm(t),M0(e.stateNode,e.type,t))}}function AE(e){Hc?Xc?Xc.push(e):Xc=[e]:Hc=e}function IE(){if(Hc){var e=Hc,t=Xc;if(Xc=Hc=null,yw(e),t)for(e=0;e<t.length;e++)yw(t[e])}}function PE(e,t){return e(t)}function kE(){}var gy=!1;function ME(e,t,r){if(gy)return e(t,r);gy=!0;try{return PE(e,t,r)}finally{gy=!1,(Hc!==null||Xc!==null)&&(kE(),IE())}}function jf(e,t){var r=e.stateNode;if(r===null)return null;var a=qm(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ct(231,t,typeof r));return r}var z0=!1;if(Ma)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){z0=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{z0=!1}function VP(e,t,r,a,u,f,g,l,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(r,E)}catch(T){this.onError(T)}}var vf=!1,$p=null,Vp=!1,L0=null,GP={onError:function(e){vf=!0,$p=e}};function WP(e,t,r,a,u,f,g,l,w){vf=!1,$p=null,VP.apply(GP,arguments)}function ZP(e,t,r,a,u,f,g,l,w){if(WP.apply(this,arguments),vf){if(vf){var E=$p;vf=!1,$p=null}else throw Error(Ct(198));Vp||(Vp=!0,L0=E)}}function Bu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vw(e){if(Bu(e)!==e)throw Error(Ct(188))}function HP(e){var t=e.alternate;if(!t){if(t=Bu(e),t===null)throw Error(Ct(188));return t!==e?null:e}for(var r=e,a=t;;){var u=r.return;if(u===null)break;var f=u.alternate;if(f===null){if(a=u.return,a!==null){r=a;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===r)return vw(u),e;if(f===a)return vw(u),t;f=f.sibling}throw Error(Ct(188))}if(r.return!==a.return)r=u,a=f;else{for(var g=!1,l=u.child;l;){if(l===r){g=!0,r=u,a=f;break}if(l===a){g=!0,a=u,r=f;break}l=l.sibling}if(!g){for(l=f.child;l;){if(l===r){g=!0,r=f,a=u;break}if(l===a){g=!0,a=f,r=u;break}l=l.sibling}if(!g)throw Error(Ct(189))}}if(r.alternate!==a)throw Error(Ct(190))}if(r.tag!==3)throw Error(Ct(188));return r.stateNode.current===r?e:t}function LE(e){return e=HP(e),e!==null?OE(e):null}function OE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OE(e);if(t!==null)return t;e=e.sibling}return null}var RE=Ao.unstable_scheduleCallback,_w=Ao.unstable_cancelCallback,XP=Ao.unstable_shouldYield,YP=Ao.unstable_requestPaint,Yr=Ao.unstable_now,KP=Ao.unstable_getCurrentPriorityLevel,m1=Ao.unstable_ImmediatePriority,FE=Ao.unstable_UserBlockingPriority,Gp=Ao.unstable_NormalPriority,qP=Ao.unstable_LowPriority,jE=Ao.unstable_IdlePriority,Hm=null,qs=null;function JP(e){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(Hm,e,void 0,(e.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:tk,QP=Math.log,ek=Math.LN2;function tk(e){return e>>>=0,e===0?32:31-(QP(e)/ek|0)|0}var Xd=64,Yd=4194304;function af(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wp(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,u=e.suspendedLanes,f=e.pingedLanes,g=r&268435455;if(g!==0){var l=g&~u;l!==0?a=af(l):(f&=g,f!==0&&(a=af(f)))}else g=r&~u,g!==0?a=af(g):f!==0&&(a=af(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&u)&&(u=a&-a,f=t&-t,u>=f||u===16&&(f&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Ts(t),u=1<<r,a|=e[r],t&=~u;return a}function nk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rk(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Ts(f),l=1<<g,w=u[g];w===-1?(!(l&r)||l&a)&&(u[g]=nk(l,t)):w<=t&&(e.expiredLanes|=l),f&=~l}}function O0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BE(){var e=Xd;return Xd<<=1,!(Xd&4194240)&&(Xd=64),e}function yy(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function id(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ts(t),e[t]=r}function ik(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var u=31-Ts(r),f=1<<u;t[u]=0,a[u]=-1,e[u]=-1,r&=~f}}function g1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Ts(r),u=1<<a;u&t|e[a]&t&&(e[a]|=t),r&=~u}}var tr=0;function DE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var NE,y1,UE,$E,VE,R0=!1,Kd=[],wl=null,bl=null,El=null,Bf=new Map,Df=new Map,ml=[],ok="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xw(e,t){switch(e){case"focusin":case"focusout":wl=null;break;case"dragenter":case"dragleave":bl=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":Bf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Df.delete(t.pointerId)}}function qh(e,t,r,a,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:f,targetContainers:[u]},t!==null&&(t=sd(t),t!==null&&y1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function sk(e,t,r,a,u){switch(t){case"focusin":return wl=qh(wl,e,t,r,a,u),!0;case"dragenter":return bl=qh(bl,e,t,r,a,u),!0;case"mouseover":return El=qh(El,e,t,r,a,u),!0;case"pointerover":var f=u.pointerId;return Bf.set(f,qh(Bf.get(f)||null,e,t,r,a,u)),!0;case"gotpointercapture":return f=u.pointerId,Df.set(f,qh(Df.get(f)||null,e,t,r,a,u)),!0}return!1}function GE(e){var t=bu(e.target);if(t!==null){var r=Bu(t);if(r!==null){if(t=r.tag,t===13){if(t=zE(r),t!==null){e.blockedOn=t,VE(e.priority,function(){UE(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=F0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);k0=a,r.target.dispatchEvent(a),k0=null}else return t=sd(r),t!==null&&y1(t),e.blockedOn=r,!1;t.shift()}return!0}function ww(e,t,r){wp(e)&&r.delete(t)}function ak(){R0=!1,wl!==null&&wp(wl)&&(wl=null),bl!==null&&wp(bl)&&(bl=null),El!==null&&wp(El)&&(El=null),Bf.forEach(ww),Df.forEach(ww)}function Jh(e,t){e.blockedOn===t&&(e.blockedOn=null,R0||(R0=!0,Ao.unstable_scheduleCallback(Ao.unstable_NormalPriority,ak)))}function Nf(e){function t(u){return Jh(u,e)}if(0<Kd.length){Jh(Kd[0],e);for(var r=1;r<Kd.length;r++){var a=Kd[r];a.blockedOn===e&&(a.blockedOn=null)}}for(wl!==null&&Jh(wl,e),bl!==null&&Jh(bl,e),El!==null&&Jh(El,e),Bf.forEach(t),Df.forEach(t),r=0;r<ml.length;r++)a=ml[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<ml.length&&(r=ml[0],r.blockedOn===null);)GE(r),r.blockedOn===null&&ml.shift()}var Yc=Da.ReactCurrentBatchConfig,Zp=!0;function lk(e,t,r,a){var u=tr,f=Yc.transition;Yc.transition=null;try{tr=1,v1(e,t,r,a)}finally{tr=u,Yc.transition=f}}function uk(e,t,r,a){var u=tr,f=Yc.transition;Yc.transition=null;try{tr=4,v1(e,t,r,a)}finally{tr=u,Yc.transition=f}}function v1(e,t,r,a){if(Zp){var u=F0(e,t,r,a);if(u===null)Ay(e,t,a,Hp,r),xw(e,a);else if(sk(u,e,t,r,a))a.stopPropagation();else if(xw(e,a),t&4&&-1<ok.indexOf(e)){for(;u!==null;){var f=sd(u);if(f!==null&&NE(f),f=F0(e,t,r,a),f===null&&Ay(e,t,a,Hp,r),f===u)break;u=f}u!==null&&a.stopPropagation()}else Ay(e,t,a,null,r)}}var Hp=null;function F0(e,t,r,a){if(Hp=null,e=p1(a),e=bu(e),e!==null)if(t=Bu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hp=e,null}function WE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KP()){case m1:return 1;case FE:return 4;case Gp:case qP:return 16;case jE:return 536870912;default:return 16}default:return 16}}var vl=null,_1=null,bp=null;function ZE(){if(bp)return bp;var e,t=_1,r=t.length,a,u="value"in vl?vl.value:vl.textContent,f=u.length;for(e=0;e<r&&t[e]===u[e];e++);var g=r-e;for(a=1;a<=g&&t[r-a]===u[f-a];a++);return bp=u.slice(e,1<a?1-a:void 0)}function Ep(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qd(){return!0}function bw(){return!1}function Po(e){function t(r,a,u,f,g){this._reactName=r,this._targetInst=u,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?qd:bw,this.isPropagationStopped=bw,this}return Rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qd)},persist:function(){},isPersistent:qd}),t}var ph={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},x1=Po(ph),od=Rr({},ph,{view:0,detail:0}),ck=Po(od),vy,_y,Qh,Xm=Rr({},od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:w1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qh&&(Qh&&e.type==="mousemove"?(vy=e.screenX-Qh.screenX,_y=e.screenY-Qh.screenY):_y=vy=0,Qh=e),vy)},movementY:function(e){return"movementY"in e?e.movementY:_y}}),Ew=Po(Xm),hk=Rr({},Xm,{dataTransfer:0}),fk=Po(hk),dk=Rr({},od,{relatedTarget:0}),xy=Po(dk),pk=Rr({},ph,{animationName:0,elapsedTime:0,pseudoElement:0}),mk=Po(pk),gk=Rr({},ph,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yk=Po(gk),vk=Rr({},ph,{data:0}),Sw=Po(vk),_k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wk[e])?!!t[e]:!1}function w1(){return bk}var Ek=Rr({},od,{key:function(e){if(e.key){var t=_k[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ep(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:w1,charCode:function(e){return e.type==="keypress"?Ep(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ep(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sk=Po(Ek),Tk=Rr({},Xm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tw=Po(Tk),Ck=Rr({},od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:w1}),Ak=Po(Ck),Ik=Rr({},ph,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pk=Po(Ik),kk=Rr({},Xm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mk=Po(kk),zk=[9,13,27,32],b1=Ma&&"CompositionEvent"in window,_f=null;Ma&&"documentMode"in document&&(_f=document.documentMode);var Lk=Ma&&"TextEvent"in window&&!_f,HE=Ma&&(!b1||_f&&8<_f&&11>=_f),Cw=String.fromCharCode(32),Aw=!1;function XE(e,t){switch(e){case"keyup":return zk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mc=!1;function Ok(e,t){switch(e){case"compositionend":return YE(t);case"keypress":return t.which!==32?null:(Aw=!0,Cw);case"textInput":return e=t.data,e===Cw&&Aw?null:e;default:return null}}function Rk(e,t){if(Mc)return e==="compositionend"||!b1&&XE(e,t)?(e=ZE(),bp=_1=vl=null,Mc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HE&&t.locale!=="ko"?null:t.data;default:return null}}var Fk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fk[e.type]:t==="textarea"}function KE(e,t,r,a){AE(a),t=Xp(t,"onChange"),0<t.length&&(r=new x1("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var xf=null,Uf=null;function jk(e){aS(e,0)}function Ym(e){var t=Oc(e);if(xE(t))return e}function Bk(e,t){if(e==="change")return t}var qE=!1;if(Ma){var wy;if(Ma){var by="oninput"in document;if(!by){var Pw=document.createElement("div");Pw.setAttribute("oninput","return;"),by=typeof Pw.oninput=="function"}wy=by}else wy=!1;qE=wy&&(!document.documentMode||9<document.documentMode)}function kw(){xf&&(xf.detachEvent("onpropertychange",JE),Uf=xf=null)}function JE(e){if(e.propertyName==="value"&&Ym(Uf)){var t=[];KE(t,Uf,e,p1(e)),ME(jk,t)}}function Dk(e,t,r){e==="focusin"?(kw(),xf=t,Uf=r,xf.attachEvent("onpropertychange",JE)):e==="focusout"&&kw()}function Nk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ym(Uf)}function Uk(e,t){if(e==="click")return Ym(t)}function $k(e,t){if(e==="input"||e==="change")return Ym(t)}function Vk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var As=typeof Object.is=="function"?Object.is:Vk;function $f(e,t){if(As(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var u=r[a];if(!v0.call(t,u)||!As(e[u],t[u]))return!1}return!0}function Mw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zw(e,t){var r=Mw(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mw(r)}}function QE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eS(){for(var e=window,t=Up();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Up(e.document)}return t}function E1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gk(e){var t=eS(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&QE(r.ownerDocument.documentElement,r)){if(a!==null&&E1(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=r.textContent.length,f=Math.min(a.start,u);a=a.end===void 0?f:Math.min(a.end,u),!e.extend&&f>a&&(u=a,a=f,f=u),u=zw(r,f);var g=zw(r,a);u&&g&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wk=Ma&&"documentMode"in document&&11>=document.documentMode,zc=null,j0=null,wf=null,B0=!1;function Lw(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;B0||zc==null||zc!==Up(a)||(a=zc,"selectionStart"in a&&E1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),wf&&$f(wf,a)||(wf=a,a=Xp(j0,"onSelect"),0<a.length&&(t=new x1("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=zc)))}function Jd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Lc={animationend:Jd("Animation","AnimationEnd"),animationiteration:Jd("Animation","AnimationIteration"),animationstart:Jd("Animation","AnimationStart"),transitionend:Jd("Transition","TransitionEnd")},Ey={},tS={};Ma&&(tS=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function Km(e){if(Ey[e])return Ey[e];if(!Lc[e])return e;var t=Lc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in tS)return Ey[e]=t[r];return e}var nS=Km("animationend"),rS=Km("animationiteration"),iS=Km("animationstart"),oS=Km("transitionend"),sS=new Map,Ow="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ol(e,t){sS.set(e,t),ju(t,[e])}for(var Sy=0;Sy<Ow.length;Sy++){var Ty=Ow[Sy],Zk=Ty.toLowerCase(),Hk=Ty[0].toUpperCase()+Ty.slice(1);Ol(Zk,"on"+Hk)}Ol(nS,"onAnimationEnd");Ol(rS,"onAnimationIteration");Ol(iS,"onAnimationStart");Ol("dblclick","onDoubleClick");Ol("focusin","onFocus");Ol("focusout","onBlur");Ol(oS,"onTransitionEnd");th("onMouseEnter",["mouseout","mouseover"]);th("onMouseLeave",["mouseout","mouseover"]);th("onPointerEnter",["pointerout","pointerover"]);th("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xk=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function Rw(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,ZP(a,t,void 0,e),e.currentTarget=null}function aS(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],u=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var g=a.length-1;0<=g;g--){var l=a[g],w=l.instance,E=l.currentTarget;if(l=l.listener,w!==f&&u.isPropagationStopped())break e;Rw(u,l,E),f=w}else for(g=0;g<a.length;g++){if(l=a[g],w=l.instance,E=l.currentTarget,l=l.listener,w!==f&&u.isPropagationStopped())break e;Rw(u,l,E),f=w}}}if(Vp)throw e=L0,Vp=!1,L0=null,e}function Er(e,t){var r=t[V0];r===void 0&&(r=t[V0]=new Set);var a=e+"__bubble";r.has(a)||(lS(t,e,2,!1),r.add(a))}function Cy(e,t,r){var a=0;t&&(a|=4),lS(r,e,a,t)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function Vf(e){if(!e[Qd]){e[Qd]=!0,mE.forEach(function(r){r!=="selectionchange"&&(Xk.has(r)||Cy(r,!1,e),Cy(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qd]||(t[Qd]=!0,Cy("selectionchange",!1,t))}}function lS(e,t,r,a){switch(WE(t)){case 1:var u=lk;break;case 4:u=uk;break;default:u=v1}r=u.bind(null,t,r,e),u=void 0,!z0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function Ay(e,t,r,a,u){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var l=a.stateNode.containerInfo;if(l===u||l.nodeType===8&&l.parentNode===u)break;if(g===4)for(g=a.return;g!==null;){var w=g.tag;if((w===3||w===4)&&(w=g.stateNode.containerInfo,w===u||w.nodeType===8&&w.parentNode===u))return;g=g.return}for(;l!==null;){if(g=bu(l),g===null)return;if(w=g.tag,w===5||w===6){a=f=g;continue e}l=l.parentNode}}a=a.return}ME(function(){var E=f,T=p1(r),S=[];e:{var C=sS.get(e);if(C!==void 0){var F=x1,Y=e;switch(e){case"keypress":if(Ep(r)===0)break e;case"keydown":case"keyup":F=Sk;break;case"focusin":Y="focus",F=xy;break;case"focusout":Y="blur",F=xy;break;case"beforeblur":case"afterblur":F=xy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Ew;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=fk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Ak;break;case nS:case rS:case iS:F=mk;break;case oS:F=Pk;break;case"scroll":F=ck;break;case"wheel":F=Mk;break;case"copy":case"cut":case"paste":F=yk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Tw}var H=(t&4)!==0,le=!H&&e==="scroll",W=H?C!==null?C+"Capture":null:C;H=[];for(var V=E,B;V!==null;){B=V;var se=B.stateNode;if(B.tag===5&&se!==null&&(B=se,W!==null&&(se=jf(V,W),se!=null&&H.push(Gf(V,se,B)))),le)break;V=V.return}0<H.length&&(C=new F(C,Y,null,r,T),S.push({event:C,listeners:H}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",C&&r!==k0&&(Y=r.relatedTarget||r.fromElement)&&(bu(Y)||Y[za]))break e;if((F||C)&&(C=T.window===T?T:(C=T.ownerDocument)?C.defaultView||C.parentWindow:window,F?(Y=r.relatedTarget||r.toElement,F=E,Y=Y?bu(Y):null,Y!==null&&(le=Bu(Y),Y!==le||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(F=null,Y=E),F!==Y)){if(H=Ew,se="onMouseLeave",W="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(H=Tw,se="onPointerLeave",W="onPointerEnter",V="pointer"),le=F==null?C:Oc(F),B=Y==null?C:Oc(Y),C=new H(se,V+"leave",F,r,T),C.target=le,C.relatedTarget=B,se=null,bu(T)===E&&(H=new H(W,V+"enter",Y,r,T),H.target=B,H.relatedTarget=le,se=H),le=se,F&&Y)t:{for(H=F,W=Y,V=0,B=H;B;B=wc(B))V++;for(B=0,se=W;se;se=wc(se))B++;for(;0<V-B;)H=wc(H),V--;for(;0<B-V;)W=wc(W),B--;for(;V--;){if(H===W||W!==null&&H===W.alternate)break t;H=wc(H),W=wc(W)}H=null}else H=null;F!==null&&Fw(S,C,F,H,!1),Y!==null&&le!==null&&Fw(S,le,Y,H,!0)}}e:{if(C=E?Oc(E):window,F=C.nodeName&&C.nodeName.toLowerCase(),F==="select"||F==="input"&&C.type==="file")var G=Bk;else if(Iw(C))if(qE)G=$k;else{G=Nk;var j=Dk}else(F=C.nodeName)&&F.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(G=Uk);if(G&&(G=G(e,E))){KE(S,G,r,T);break e}j&&j(e,C,E),e==="focusout"&&(j=C._wrapperState)&&j.controlled&&C.type==="number"&&T0(C,"number",C.value)}switch(j=E?Oc(E):window,e){case"focusin":(Iw(j)||j.contentEditable==="true")&&(zc=j,j0=E,wf=null);break;case"focusout":wf=j0=zc=null;break;case"mousedown":B0=!0;break;case"contextmenu":case"mouseup":case"dragend":B0=!1,Lw(S,r,T);break;case"selectionchange":if(Wk)break;case"keydown":case"keyup":Lw(S,r,T)}var b;if(b1)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Mc?XE(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(HE&&r.locale!=="ko"&&(Mc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Mc&&(b=ZE()):(vl=T,_1="value"in vl?vl.value:vl.textContent,Mc=!0)),j=Xp(E,k),0<j.length&&(k=new Sw(k,e,null,r,T),S.push({event:k,listeners:j}),b?k.data=b:(b=YE(r),b!==null&&(k.data=b)))),(b=Lk?Ok(e,r):Rk(e,r))&&(E=Xp(E,"onBeforeInput"),0<E.length&&(T=new Sw("onBeforeInput","beforeinput",null,r,T),S.push({event:T,listeners:E}),T.data=b))}aS(S,t)})}function Gf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xp(e,t){for(var r=t+"Capture",a=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=jf(e,r),f!=null&&a.unshift(Gf(e,f,u)),f=jf(e,t),f!=null&&a.push(Gf(e,f,u))),e=e.return}return a}function wc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fw(e,t,r,a,u){for(var f=t._reactName,g=[];r!==null&&r!==a;){var l=r,w=l.alternate,E=l.stateNode;if(w!==null&&w===a)break;l.tag===5&&E!==null&&(l=E,u?(w=jf(r,f),w!=null&&g.unshift(Gf(r,w,l))):u||(w=jf(r,f),w!=null&&g.push(Gf(r,w,l)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var Yk=/\r\n?/g,Kk=/\u0000|\uFFFD/g;function jw(e){return(typeof e=="string"?e:""+e).replace(Yk,`
`).replace(Kk,"")}function ep(e,t,r){if(t=jw(t),jw(e)!==t&&r)throw Error(Ct(425))}function Yp(){}var D0=null,N0=null;function U0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $0=typeof setTimeout=="function"?setTimeout:void 0,qk=typeof clearTimeout=="function"?clearTimeout:void 0,Bw=typeof Promise=="function"?Promise:void 0,Jk=typeof queueMicrotask=="function"?queueMicrotask:typeof Bw<"u"?function(e){return Bw.resolve(null).then(e).catch(Qk)}:$0;function Qk(e){setTimeout(function(){throw e})}function Iy(e,t){var r=t,a=0;do{var u=r.nextSibling;if(e.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(a===0){e.removeChild(u),Nf(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=u}while(r);Nf(t)}function Sl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var mh=Math.random().toString(36).slice(2),Zs="__reactFiber$"+mh,Wf="__reactProps$"+mh,za="__reactContainer$"+mh,V0="__reactEvents$"+mh,e3="__reactListeners$"+mh,t3="__reactHandles$"+mh;function bu(e){var t=e[Zs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[za]||r[Zs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Dw(e);e!==null;){if(r=e[Zs])return r;e=Dw(e)}return t}e=r,r=e.parentNode}return null}function sd(e){return e=e[Zs]||e[za],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ct(33))}function qm(e){return e[Wf]||null}var G0=[],Rc=-1;function Rl(e){return{current:e}}function Sr(e){0>Rc||(e.current=G0[Rc],G0[Rc]=null,Rc--)}function vr(e,t){Rc++,G0[Rc]=e.current,e.current=t}var kl={},Li=Rl(kl),uo=Rl(!1),Iu=kl;function nh(e,t){var r=e.type.contextTypes;if(!r)return kl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in r)u[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function co(e){return e=e.childContextTypes,e!=null}function Kp(){Sr(uo),Sr(Li)}function Nw(e,t,r){if(Li.current!==kl)throw Error(Ct(168));vr(Li,t),vr(uo,r)}function uS(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var u in a)if(!(u in t))throw Error(Ct(108,DP(e)||"Unknown",u));return Rr({},r,a)}function qp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kl,Iu=Li.current,vr(Li,e),vr(uo,uo.current),!0}function Uw(e,t,r){var a=e.stateNode;if(!a)throw Error(Ct(169));r?(e=uS(e,t,Iu),a.__reactInternalMemoizedMergedChildContext=e,Sr(uo),Sr(Li),vr(Li,e)):Sr(uo),vr(uo,r)}var Ca=null,Jm=!1,Py=!1;function cS(e){Ca===null?Ca=[e]:Ca.push(e)}function n3(e){Jm=!0,cS(e)}function Fl(){if(!Py&&Ca!==null){Py=!0;var e=0,t=tr;try{var r=Ca;for(tr=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Ca=null,Jm=!1}catch(u){throw Ca!==null&&(Ca=Ca.slice(e+1)),RE(m1,Fl),u}finally{tr=t,Py=!1}}return null}var Fc=[],jc=0,Jp=null,Qp=0,Wo=[],Zo=0,Pu=null,Ia=1,Pa="";function _u(e,t){Fc[jc++]=Qp,Fc[jc++]=Jp,Jp=e,Qp=t}function hS(e,t,r){Wo[Zo++]=Ia,Wo[Zo++]=Pa,Wo[Zo++]=Pu,Pu=e;var a=Ia;e=Pa;var u=32-Ts(a)-1;a&=~(1<<u),r+=1;var f=32-Ts(t)+u;if(30<f){var g=u-u%5;f=(a&(1<<g)-1).toString(32),a>>=g,u-=g,Ia=1<<32-Ts(t)+u|r<<u|a,Pa=f+e}else Ia=1<<f|r<<u|a,Pa=e}function S1(e){e.return!==null&&(_u(e,1),hS(e,1,0))}function T1(e){for(;e===Jp;)Jp=Fc[--jc],Fc[jc]=null,Qp=Fc[--jc],Fc[jc]=null;for(;e===Pu;)Pu=Wo[--Zo],Wo[Zo]=null,Pa=Wo[--Zo],Wo[Zo]=null,Ia=Wo[--Zo],Wo[Zo]=null}var Co=null,So=null,Ar=!1,_s=null;function fS(e,t){var r=Xo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function $w(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Co=e,So=Sl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Co=e,So=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pu!==null?{id:Ia,overflow:Pa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Xo(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Co=e,So=null,!0):!1;default:return!1}}function W0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Z0(e){if(Ar){var t=So;if(t){var r=t;if(!$w(e,t)){if(W0(e))throw Error(Ct(418));t=Sl(r.nextSibling);var a=Co;t&&$w(e,t)?fS(a,r):(e.flags=e.flags&-4097|2,Ar=!1,Co=e)}}else{if(W0(e))throw Error(Ct(418));e.flags=e.flags&-4097|2,Ar=!1,Co=e}}}function Vw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Co=e}function tp(e){if(e!==Co)return!1;if(!Ar)return Vw(e),Ar=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!U0(e.type,e.memoizedProps)),t&&(t=So)){if(W0(e))throw dS(),Error(Ct(418));for(;t;)fS(e,t),t=Sl(t.nextSibling)}if(Vw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ct(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){So=Sl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}So=null}}else So=Co?Sl(e.stateNode.nextSibling):null;return!0}function dS(){for(var e=So;e;)e=Sl(e.nextSibling)}function rh(){So=Co=null,Ar=!1}function C1(e){_s===null?_s=[e]:_s.push(e)}var r3=Da.ReactCurrentBatchConfig;function ys(e,t){if(e&&e.defaultProps){t=Rr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var em=Rl(null),tm=null,Bc=null,A1=null;function I1(){A1=Bc=tm=null}function P1(e){var t=em.current;Sr(em),e._currentValue=t}function H0(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Kc(e,t){tm=e,A1=Bc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lo=!0),e.firstContext=null)}function qo(e){var t=e._currentValue;if(A1!==e)if(e={context:e,memoizedValue:t,next:null},Bc===null){if(tm===null)throw Error(Ct(308));Bc=e,tm.dependencies={lanes:0,firstContext:e}}else Bc=Bc.next=e;return t}var Eu=null;function k1(e){Eu===null?Eu=[e]:Eu.push(e)}function pS(e,t,r,a){var u=t.interleaved;return u===null?(r.next=r,k1(t)):(r.next=u.next,u.next=r),t.interleaved=r,La(e,a)}function La(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fl=!1;function M1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ka(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tl(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Hn&2){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,La(e,r)}return u=a.interleaved,u===null?(t.next=t,k1(a)):(t.next=u.next,u.next=t),a.interleaved=t,La(e,r)}function Sp(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,g1(e,r)}}function Gw(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var u=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?u=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?u=f=t:f=f.next=t}else u=f=t;r={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function nm(e,t,r,a){var u=e.updateQueue;fl=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,l=u.shared.pending;if(l!==null){u.shared.pending=null;var w=l,E=w.next;w.next=null,g===null?f=E:g.next=E,g=w;var T=e.alternate;T!==null&&(T=T.updateQueue,l=T.lastBaseUpdate,l!==g&&(l===null?T.firstBaseUpdate=E:l.next=E,T.lastBaseUpdate=w))}if(f!==null){var S=u.baseState;g=0,T=E=w=null,l=f;do{var C=l.lane,F=l.eventTime;if((a&C)===C){T!==null&&(T=T.next={eventTime:F,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var Y=e,H=l;switch(C=t,F=r,H.tag){case 1:if(Y=H.payload,typeof Y=="function"){S=Y.call(F,S,C);break e}S=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=H.payload,C=typeof Y=="function"?Y.call(F,S,C):Y,C==null)break e;S=Rr({},S,C);break e;case 2:fl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,C=u.effects,C===null?u.effects=[l]:C.push(l))}else F={eventTime:F,lane:C,tag:l.tag,payload:l.payload,callback:l.callback,next:null},T===null?(E=T=F,w=S):T=T.next=F,g|=C;if(l=l.next,l===null){if(l=u.shared.pending,l===null)break;C=l,l=C.next,C.next=null,u.lastBaseUpdate=C,u.shared.pending=null}}while(1);if(T===null&&(w=S),u.baseState=w,u.firstBaseUpdate=E,u.lastBaseUpdate=T,t=u.shared.interleaved,t!==null){u=t;do g|=u.lane,u=u.next;while(u!==t)}else f===null&&(u.shared.lanes=0);Mu|=g,e.lanes=g,e.memoizedState=S}}function Ww(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],u=a.callback;if(u!==null){if(a.callback=null,a=r,typeof u!="function")throw Error(Ct(191,u));u.call(a)}}}var gS=new pE.Component().refs;function X0(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Rr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Qm={isMounted:function(e){return(e=e._reactInternals)?Bu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=qi(),u=Al(e),f=ka(a,u);f.payload=t,r!=null&&(f.callback=r),t=Tl(e,f,u),t!==null&&(Cs(t,e,u,a),Sp(t,e,u))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=qi(),u=Al(e),f=ka(a,u);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Tl(e,f,u),t!==null&&(Cs(t,e,u,a),Sp(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=qi(),a=Al(e),u=ka(r,a);u.tag=2,t!=null&&(u.callback=t),t=Tl(e,u,a),t!==null&&(Cs(t,e,a,r),Sp(t,e,a))}};function Zw(e,t,r,a,u,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,g):t.prototype&&t.prototype.isPureReactComponent?!$f(r,a)||!$f(u,f):!0}function yS(e,t,r){var a=!1,u=kl,f=t.contextType;return typeof f=="object"&&f!==null?f=qo(f):(u=co(t)?Iu:Li.current,a=t.contextTypes,f=(a=a!=null)?nh(e,u):kl),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qm,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),t}function Hw(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Qm.enqueueReplaceState(t,t.state,null)}function Y0(e,t,r,a){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs=gS,M1(e);var f=t.contextType;typeof f=="object"&&f!==null?u.context=qo(f):(f=co(t)?Iu:Li.current,u.context=nh(e,f)),u.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(X0(e,t,f,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&Qm.enqueueReplaceState(u,u.state,null),nm(e,r,u,a),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function ef(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ct(309));var a=r.stateNode}if(!a)throw Error(Ct(147,e));var u=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var l=u.refs;l===gS&&(l=u.refs={}),g===null?delete l[f]:l[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(Ct(284));if(!r._owner)throw Error(Ct(290,e))}return e}function np(e,t){throw e=Object.prototype.toString.call(t),Error(Ct(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xw(e){var t=e._init;return t(e._payload)}function vS(e){function t(W,V){if(e){var B=W.deletions;B===null?(W.deletions=[V],W.flags|=16):B.push(V)}}function r(W,V){if(!e)return null;for(;V!==null;)t(W,V),V=V.sibling;return null}function a(W,V){for(W=new Map;V!==null;)V.key!==null?W.set(V.key,V):W.set(V.index,V),V=V.sibling;return W}function u(W,V){return W=Il(W,V),W.index=0,W.sibling=null,W}function f(W,V,B){return W.index=B,e?(B=W.alternate,B!==null?(B=B.index,B<V?(W.flags|=2,V):B):(W.flags|=2,V)):(W.flags|=1048576,V)}function g(W){return e&&W.alternate===null&&(W.flags|=2),W}function l(W,V,B,se){return V===null||V.tag!==6?(V=Fy(B,W.mode,se),V.return=W,V):(V=u(V,B),V.return=W,V)}function w(W,V,B,se){var G=B.type;return G===kc?T(W,V,B.props.children,se,B.key):V!==null&&(V.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===hl&&Xw(G)===V.type)?(se=u(V,B.props),se.ref=ef(W,V,B),se.return=W,se):(se=kp(B.type,B.key,B.props,null,W.mode,se),se.ref=ef(W,V,B),se.return=W,se)}function E(W,V,B,se){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=jy(B,W.mode,se),V.return=W,V):(V=u(V,B.children||[]),V.return=W,V)}function T(W,V,B,se,G){return V===null||V.tag!==7?(V=Au(B,W.mode,se,G),V.return=W,V):(V=u(V,B),V.return=W,V)}function S(W,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Fy(""+V,W.mode,B),V.return=W,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Wd:return B=kp(V.type,V.key,V.props,null,W.mode,B),B.ref=ef(W,null,V),B.return=W,B;case Pc:return V=jy(V,W.mode,B),V.return=W,V;case hl:var se=V._init;return S(W,se(V._payload),B)}if(sf(V)||Yh(V))return V=Au(V,W.mode,B,null),V.return=W,V;np(W,V)}return null}function C(W,V,B,se){var G=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return G!==null?null:l(W,V,""+B,se);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Wd:return B.key===G?w(W,V,B,se):null;case Pc:return B.key===G?E(W,V,B,se):null;case hl:return G=B._init,C(W,V,G(B._payload),se)}if(sf(B)||Yh(B))return G!==null?null:T(W,V,B,se,null);np(W,B)}return null}function F(W,V,B,se,G){if(typeof se=="string"&&se!==""||typeof se=="number")return W=W.get(B)||null,l(V,W,""+se,G);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Wd:return W=W.get(se.key===null?B:se.key)||null,w(V,W,se,G);case Pc:return W=W.get(se.key===null?B:se.key)||null,E(V,W,se,G);case hl:var j=se._init;return F(W,V,B,j(se._payload),G)}if(sf(se)||Yh(se))return W=W.get(B)||null,T(V,W,se,G,null);np(V,se)}return null}function Y(W,V,B,se){for(var G=null,j=null,b=V,k=V=0,U=null;b!==null&&k<B.length;k++){b.index>k?(U=b,b=null):U=b.sibling;var X=C(W,b,B[k],se);if(X===null){b===null&&(b=U);break}e&&b&&X.alternate===null&&t(W,b),V=f(X,V,k),j===null?G=X:j.sibling=X,j=X,b=U}if(k===B.length)return r(W,b),Ar&&_u(W,k),G;if(b===null){for(;k<B.length;k++)b=S(W,B[k],se),b!==null&&(V=f(b,V,k),j===null?G=b:j.sibling=b,j=b);return Ar&&_u(W,k),G}for(b=a(W,b);k<B.length;k++)U=F(b,W,k,B[k],se),U!==null&&(e&&U.alternate!==null&&b.delete(U.key===null?k:U.key),V=f(U,V,k),j===null?G=U:j.sibling=U,j=U);return e&&b.forEach(function(K){return t(W,K)}),Ar&&_u(W,k),G}function H(W,V,B,se){var G=Yh(B);if(typeof G!="function")throw Error(Ct(150));if(B=G.call(B),B==null)throw Error(Ct(151));for(var j=G=null,b=V,k=V=0,U=null,X=B.next();b!==null&&!X.done;k++,X=B.next()){b.index>k?(U=b,b=null):U=b.sibling;var K=C(W,b,X.value,se);if(K===null){b===null&&(b=U);break}e&&b&&K.alternate===null&&t(W,b),V=f(K,V,k),j===null?G=K:j.sibling=K,j=K,b=U}if(X.done)return r(W,b),Ar&&_u(W,k),G;if(b===null){for(;!X.done;k++,X=B.next())X=S(W,X.value,se),X!==null&&(V=f(X,V,k),j===null?G=X:j.sibling=X,j=X);return Ar&&_u(W,k),G}for(b=a(W,b);!X.done;k++,X=B.next())X=F(b,W,k,X.value,se),X!==null&&(e&&X.alternate!==null&&b.delete(X.key===null?k:X.key),V=f(X,V,k),j===null?G=X:j.sibling=X,j=X);return e&&b.forEach(function(de){return t(W,de)}),Ar&&_u(W,k),G}function le(W,V,B,se){if(typeof B=="object"&&B!==null&&B.type===kc&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Wd:e:{for(var G=B.key,j=V;j!==null;){if(j.key===G){if(G=B.type,G===kc){if(j.tag===7){r(W,j.sibling),V=u(j,B.props.children),V.return=W,W=V;break e}}else if(j.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===hl&&Xw(G)===j.type){r(W,j.sibling),V=u(j,B.props),V.ref=ef(W,j,B),V.return=W,W=V;break e}r(W,j);break}else t(W,j);j=j.sibling}B.type===kc?(V=Au(B.props.children,W.mode,se,B.key),V.return=W,W=V):(se=kp(B.type,B.key,B.props,null,W.mode,se),se.ref=ef(W,V,B),se.return=W,W=se)}return g(W);case Pc:e:{for(j=B.key;V!==null;){if(V.key===j)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){r(W,V.sibling),V=u(V,B.children||[]),V.return=W,W=V;break e}else{r(W,V);break}else t(W,V);V=V.sibling}V=jy(B,W.mode,se),V.return=W,W=V}return g(W);case hl:return j=B._init,le(W,V,j(B._payload),se)}if(sf(B))return Y(W,V,B,se);if(Yh(B))return H(W,V,B,se);np(W,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(r(W,V.sibling),V=u(V,B),V.return=W,W=V):(r(W,V),V=Fy(B,W.mode,se),V.return=W,W=V),g(W)):r(W,V)}return le}var ih=vS(!0),_S=vS(!1),ad={},Js=Rl(ad),Zf=Rl(ad),Hf=Rl(ad);function Su(e){if(e===ad)throw Error(Ct(174));return e}function z1(e,t){switch(vr(Hf,t),vr(Zf,e),vr(Js,ad),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:A0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=A0(t,e)}Sr(Js),vr(Js,t)}function oh(){Sr(Js),Sr(Zf),Sr(Hf)}function xS(e){Su(Hf.current);var t=Su(Js.current),r=A0(t,e.type);t!==r&&(vr(Zf,e),vr(Js,r))}function L1(e){Zf.current===e&&(Sr(Js),Sr(Zf))}var zr=Rl(0);function rm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ky=[];function O1(){for(var e=0;e<ky.length;e++)ky[e]._workInProgressVersionPrimary=null;ky.length=0}var Tp=Da.ReactCurrentDispatcher,My=Da.ReactCurrentBatchConfig,ku=0,Or=null,ni=null,li=null,im=!1,bf=!1,Xf=0,i3=0;function Ii(){throw Error(Ct(321))}function R1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!As(e[r],t[r]))return!1;return!0}function F1(e,t,r,a,u,f){if(ku=f,Or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Tp.current=e===null||e.memoizedState===null?l3:u3,e=r(a,u),bf){f=0;do{if(bf=!1,Xf=0,25<=f)throw Error(Ct(301));f+=1,li=ni=null,t.updateQueue=null,Tp.current=c3,e=r(a,u)}while(bf)}if(Tp.current=om,t=ni!==null&&ni.next!==null,ku=0,li=ni=Or=null,im=!1,t)throw Error(Ct(300));return e}function j1(){var e=Xf!==0;return Xf=0,e}function Ws(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Or.memoizedState=li=e:li=li.next=e,li}function Jo(){if(ni===null){var e=Or.alternate;e=e!==null?e.memoizedState:null}else e=ni.next;var t=li===null?Or.memoizedState:li.next;if(t!==null)li=t,ni=e;else{if(e===null)throw Error(Ct(310));ni=e,e={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},li===null?Or.memoizedState=li=e:li=li.next=e}return li}function Yf(e,t){return typeof t=="function"?t(e):t}function zy(e){var t=Jo(),r=t.queue;if(r===null)throw Error(Ct(311));r.lastRenderedReducer=e;var a=ni,u=a.baseQueue,f=r.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}a.baseQueue=u=f,r.pending=null}if(u!==null){f=u.next,a=a.baseState;var l=g=null,w=null,E=f;do{var T=E.lane;if((ku&T)===T)w!==null&&(w=w.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),a=E.hasEagerState?E.eagerState:e(a,E.action);else{var S={lane:T,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};w===null?(l=w=S,g=a):w=w.next=S,Or.lanes|=T,Mu|=T}E=E.next}while(E!==null&&E!==f);w===null?g=a:w.next=l,As(a,t.memoizedState)||(lo=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=w,r.lastRenderedState=a}if(e=r.interleaved,e!==null){u=e;do f=u.lane,Or.lanes|=f,Mu|=f,u=u.next;while(u!==e)}else u===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ly(e){var t=Jo(),r=t.queue;if(r===null)throw Error(Ct(311));r.lastRenderedReducer=e;var a=r.dispatch,u=r.pending,f=t.memoizedState;if(u!==null){r.pending=null;var g=u=u.next;do f=e(f,g.action),g=g.next;while(g!==u);As(f,t.memoizedState)||(lo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,a]}function wS(){}function bS(e,t){var r=Or,a=Jo(),u=t(),f=!As(a.memoizedState,u);if(f&&(a.memoizedState=u,lo=!0),a=a.queue,B1(TS.bind(null,r,a,e),[e]),a.getSnapshot!==t||f||li!==null&&li.memoizedState.tag&1){if(r.flags|=2048,Kf(9,SS.bind(null,r,a,u,t),void 0,null),ui===null)throw Error(Ct(349));ku&30||ES(r,t,u)}return u}function ES(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Or.updateQueue,t===null?(t={lastEffect:null,stores:null},Or.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function SS(e,t,r,a){t.value=r,t.getSnapshot=a,CS(t)&&AS(e)}function TS(e,t,r){return r(function(){CS(t)&&AS(e)})}function CS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!As(e,r)}catch{return!0}}function AS(e){var t=La(e,1);t!==null&&Cs(t,e,1,-1)}function Yw(e){var t=Ws();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:e},t.queue=e,e=e.dispatch=a3.bind(null,Or,e),[t.memoizedState,e]}function Kf(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Or.updateQueue,t===null?(t={lastEffect:null,stores:null},Or.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function IS(){return Jo().memoizedState}function Cp(e,t,r,a){var u=Ws();Or.flags|=e,u.memoizedState=Kf(1|t,r,void 0,a===void 0?null:a)}function eg(e,t,r,a){var u=Jo();a=a===void 0?null:a;var f=void 0;if(ni!==null){var g=ni.memoizedState;if(f=g.destroy,a!==null&&R1(a,g.deps)){u.memoizedState=Kf(t,r,f,a);return}}Or.flags|=e,u.memoizedState=Kf(1|t,r,f,a)}function Kw(e,t){return Cp(8390656,8,e,t)}function B1(e,t){return eg(2048,8,e,t)}function PS(e,t){return eg(4,2,e,t)}function kS(e,t){return eg(4,4,e,t)}function MS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zS(e,t,r){return r=r!=null?r.concat([e]):null,eg(4,4,MS.bind(null,t,e),r)}function D1(){}function LS(e,t){var r=Jo();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&R1(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function OS(e,t){var r=Jo();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&R1(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function RS(e,t,r){return ku&21?(As(r,t)||(r=BE(),Or.lanes|=r,Mu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lo=!0),e.memoizedState=r)}function o3(e,t){var r=tr;tr=r!==0&&4>r?r:4,e(!0);var a=My.transition;My.transition={};try{e(!1),t()}finally{tr=r,My.transition=a}}function FS(){return Jo().memoizedState}function s3(e,t,r){var a=Al(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},jS(e))BS(t,r);else if(r=pS(e,t,r,a),r!==null){var u=qi();Cs(r,e,a,u),DS(r,t,a)}}function a3(e,t,r){var a=Al(e),u={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(jS(e))BS(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,l=f(g,r);if(u.hasEagerState=!0,u.eagerState=l,As(l,g)){var w=t.interleaved;w===null?(u.next=u,k1(t)):(u.next=w.next,w.next=u),t.interleaved=u;return}}catch{}finally{}r=pS(e,t,u,a),r!==null&&(u=qi(),Cs(r,e,a,u),DS(r,t,a))}}function jS(e){var t=e.alternate;return e===Or||t!==null&&t===Or}function BS(e,t){bf=im=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function DS(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,g1(e,r)}}var om={readContext:qo,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useInsertionEffect:Ii,useLayoutEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useMutableSource:Ii,useSyncExternalStore:Ii,useId:Ii,unstable_isNewReconciler:!1},l3={readContext:qo,useCallback:function(e,t){return Ws().memoizedState=[e,t===void 0?null:t],e},useContext:qo,useEffect:Kw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Cp(4194308,4,MS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Cp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cp(4,2,e,t)},useMemo:function(e,t){var r=Ws();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Ws();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=s3.bind(null,Or,e),[a.memoizedState,e]},useRef:function(e){var t=Ws();return e={current:e},t.memoizedState=e},useState:Yw,useDebugValue:D1,useDeferredValue:function(e){return Ws().memoizedState=e},useTransition:function(){var e=Yw(!1),t=e[0];return e=o3.bind(null,e[1]),Ws().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Or,u=Ws();if(Ar){if(r===void 0)throw Error(Ct(407));r=r()}else{if(r=t(),ui===null)throw Error(Ct(349));ku&30||ES(a,t,r)}u.memoizedState=r;var f={value:r,getSnapshot:t};return u.queue=f,Kw(TS.bind(null,a,f,e),[e]),a.flags|=2048,Kf(9,SS.bind(null,a,f,r,t),void 0,null),r},useId:function(){var e=Ws(),t=ui.identifierPrefix;if(Ar){var r=Pa,a=Ia;r=(a&~(1<<32-Ts(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Xf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=i3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},u3={readContext:qo,useCallback:LS,useContext:qo,useEffect:B1,useImperativeHandle:zS,useInsertionEffect:PS,useLayoutEffect:kS,useMemo:OS,useReducer:zy,useRef:IS,useState:function(){return zy(Yf)},useDebugValue:D1,useDeferredValue:function(e){var t=Jo();return RS(t,ni.memoizedState,e)},useTransition:function(){var e=zy(Yf)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:wS,useSyncExternalStore:bS,useId:FS,unstable_isNewReconciler:!1},c3={readContext:qo,useCallback:LS,useContext:qo,useEffect:B1,useImperativeHandle:zS,useInsertionEffect:PS,useLayoutEffect:kS,useMemo:OS,useReducer:Ly,useRef:IS,useState:function(){return Ly(Yf)},useDebugValue:D1,useDeferredValue:function(e){var t=Jo();return ni===null?t.memoizedState=e:RS(t,ni.memoizedState,e)},useTransition:function(){var e=Ly(Yf)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:wS,useSyncExternalStore:bS,useId:FS,unstable_isNewReconciler:!1};function sh(e,t){try{var r="",a=t;do r+=BP(a),a=a.return;while(a);var u=r}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:u,digest:null}}function Oy(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function K0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var h3=typeof WeakMap=="function"?WeakMap:Map;function NS(e,t,r){r=ka(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){am||(am=!0,sv=a),K0(e,t)},r}function US(e,t,r){r=ka(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var u=t.value;r.payload=function(){return a(u)},r.callback=function(){K0(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){K0(e,t),typeof a!="function"&&(Cl===null?Cl=new Set([this]):Cl.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function qw(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new h3;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(r)||(u.add(r),e=T3.bind(null,e,t,r),t.then(e,e))}function Jw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Qw(e,t,r,a,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ka(-1,1),t.tag=2,Tl(r,t,1))),r.lanes|=1),e)}var f3=Da.ReactCurrentOwner,lo=!1;function Hi(e,t,r,a){t.child=e===null?_S(t,null,r,a):ih(t,e.child,r,a)}function eb(e,t,r,a,u){r=r.render;var f=t.ref;return Kc(t,u),a=F1(e,t,r,a,f,u),r=j1(),e!==null&&!lo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Oa(e,t,u)):(Ar&&r&&S1(t),t.flags|=1,Hi(e,t,a,u),t.child)}function tb(e,t,r,a,u){if(e===null){var f=r.type;return typeof f=="function"&&!H1(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,$S(e,t,f,a,u)):(e=kp(r.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&u)){var g=f.memoizedProps;if(r=r.compare,r=r!==null?r:$f,r(g,a)&&e.ref===t.ref)return Oa(e,t,u)}return t.flags|=1,e=Il(f,a),e.ref=t.ref,e.return=t,t.child=e}function $S(e,t,r,a,u){if(e!==null){var f=e.memoizedProps;if($f(f,a)&&e.ref===t.ref)if(lo=!1,t.pendingProps=a=f,(e.lanes&u)!==0)e.flags&131072&&(lo=!0);else return t.lanes=e.lanes,Oa(e,t,u)}return q0(e,t,r,a,u)}function VS(e,t,r){var a=t.pendingProps,u=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vr(Nc,wo),wo|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vr(Nc,wo),wo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:r,vr(Nc,wo),wo|=a}else f!==null?(a=f.baseLanes|r,t.memoizedState=null):a=r,vr(Nc,wo),wo|=a;return Hi(e,t,u,r),t.child}function GS(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function q0(e,t,r,a,u){var f=co(r)?Iu:Li.current;return f=nh(t,f),Kc(t,u),r=F1(e,t,r,a,f,u),a=j1(),e!==null&&!lo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Oa(e,t,u)):(Ar&&a&&S1(t),t.flags|=1,Hi(e,t,r,u),t.child)}function nb(e,t,r,a,u){if(co(r)){var f=!0;qp(t)}else f=!1;if(Kc(t,u),t.stateNode===null)Ap(e,t),yS(t,r,a),Y0(t,r,a,u),a=!0;else if(e===null){var g=t.stateNode,l=t.memoizedProps;g.props=l;var w=g.context,E=r.contextType;typeof E=="object"&&E!==null?E=qo(E):(E=co(r)?Iu:Li.current,E=nh(t,E));var T=r.getDerivedStateFromProps,S=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function";S||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==a||w!==E)&&Hw(t,g,a,E),fl=!1;var C=t.memoizedState;g.state=C,nm(t,a,g,u),w=t.memoizedState,l!==a||C!==w||uo.current||fl?(typeof T=="function"&&(X0(t,r,T,a),w=t.memoizedState),(l=fl||Zw(t,r,l,a,C,w,E))?(S||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),g.props=a,g.state=w,g.context=E,a=l):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,mS(e,t),l=t.memoizedProps,E=t.type===t.elementType?l:ys(t.type,l),g.props=E,S=t.pendingProps,C=g.context,w=r.contextType,typeof w=="object"&&w!==null?w=qo(w):(w=co(r)?Iu:Li.current,w=nh(t,w));var F=r.getDerivedStateFromProps;(T=typeof F=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==S||C!==w)&&Hw(t,g,a,w),fl=!1,C=t.memoizedState,g.state=C,nm(t,a,g,u);var Y=t.memoizedState;l!==S||C!==Y||uo.current||fl?(typeof F=="function"&&(X0(t,r,F,a),Y=t.memoizedState),(E=fl||Zw(t,r,E,a,C,Y,w)||!1)?(T||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,Y,w),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,Y,w)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Y),g.props=a,g.state=Y,g.context=w,a=E):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),a=!1)}return J0(e,t,r,a,f,u)}function J0(e,t,r,a,u,f){GS(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return u&&Uw(t,r,!1),Oa(e,t,f);a=t.stateNode,f3.current=t;var l=g&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=ih(t,e.child,null,f),t.child=ih(t,null,l,f)):Hi(e,t,l,f),t.memoizedState=a.state,u&&Uw(t,r,!0),t.child}function WS(e){var t=e.stateNode;t.pendingContext?Nw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nw(e,t.context,!1),z1(e,t.containerInfo)}function rb(e,t,r,a,u){return rh(),C1(u),t.flags|=256,Hi(e,t,r,a),t.child}var Q0={dehydrated:null,treeContext:null,retryLane:0};function ev(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZS(e,t,r){var a=t.pendingProps,u=zr.current,f=!1,g=(t.flags&128)!==0,l;if((l=g)||(l=e!==null&&e.memoizedState===null?!1:(u&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),vr(zr,u&1),e===null)return Z0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=a.children,e=a.fallback,f?(a=t.mode,f=t.child,g={mode:"hidden",children:g},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=g):f=rg(g,a,0,null),e=Au(e,a,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=ev(r),t.memoizedState=Q0,e):N1(t,g));if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null))return d3(e,t,g,a,l,u,r);if(f){f=a.fallback,g=t.mode,u=e.child,l=u.sibling;var w={mode:"hidden",children:a.children};return!(g&1)&&t.child!==u?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=Il(u,w),a.subtreeFlags=u.subtreeFlags&14680064),l!==null?f=Il(l,f):(f=Au(f,g,r,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,g=e.child.memoizedState,g=g===null?ev(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~r,t.memoizedState=Q0,a}return f=e.child,e=f.sibling,a=Il(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function N1(e,t){return t=rg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rp(e,t,r,a){return a!==null&&C1(a),ih(t,e.child,null,r),e=N1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function d3(e,t,r,a,u,f,g){if(r)return t.flags&256?(t.flags&=-257,a=Oy(Error(Ct(422))),rp(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,u=t.mode,a=rg({mode:"visible",children:a.children},u,0,null),f=Au(f,u,g,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&ih(t,e.child,null,g),t.child.memoizedState=ev(g),t.memoizedState=Q0,f);if(!(t.mode&1))return rp(e,t,g,null);if(u.data==="$!"){if(a=u.nextSibling&&u.nextSibling.dataset,a)var l=a.dgst;return a=l,f=Error(Ct(419)),a=Oy(f,a,void 0),rp(e,t,g,a)}if(l=(g&e.childLanes)!==0,lo||l){if(a=ui,a!==null){switch(g&-g){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(a.suspendedLanes|g)?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,La(e,u),Cs(a,e,u,-1))}return Z1(),a=Oy(Error(Ct(421))),rp(e,t,g,a)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=C3.bind(null,e),u._reactRetry=t,null):(e=f.treeContext,So=Sl(u.nextSibling),Co=t,Ar=!0,_s=null,e!==null&&(Wo[Zo++]=Ia,Wo[Zo++]=Pa,Wo[Zo++]=Pu,Ia=e.id,Pa=e.overflow,Pu=t),t=N1(t,a.children),t.flags|=4096,t)}function ib(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),H0(e.return,t,r)}function Ry(e,t,r,a,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=r,f.tailMode=u)}function HS(e,t,r){var a=t.pendingProps,u=a.revealOrder,f=a.tail;if(Hi(e,t,a.children,r),a=zr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ib(e,r,t);else if(e.tag===19)ib(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(vr(zr,a),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&rm(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),Ry(t,!1,u,r,f);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&rm(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}Ry(t,!0,r,null,f);break;case"together":Ry(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ap(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ct(153));if(t.child!==null){for(e=t.child,r=Il(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Il(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function p3(e,t,r){switch(t.tag){case 3:WS(t),rh();break;case 5:xS(t);break;case 1:co(t.type)&&qp(t);break;case 4:z1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,u=t.memoizedProps.value;vr(em,a._currentValue),a._currentValue=u;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(vr(zr,zr.current&1),t.flags|=128,null):r&t.child.childLanes?ZS(e,t,r):(vr(zr,zr.current&1),e=Oa(e,t,r),e!==null?e.sibling:null);vr(zr,zr.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return HS(e,t,r);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),vr(zr,zr.current),a)break;return null;case 22:case 23:return t.lanes=0,VS(e,t,r)}return Oa(e,t,r)}var XS,tv,YS,KS;XS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tv=function(){};YS=function(e,t,r,a){var u=e.memoizedProps;if(u!==a){e=t.stateNode,Su(Js.current);var f=null;switch(r){case"input":u=E0(e,u),a=E0(e,a),f=[];break;case"select":u=Rr({},u,{value:void 0}),a=Rr({},a,{value:void 0}),f=[];break;case"textarea":u=C0(e,u),a=C0(e,a),f=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Yp)}I0(r,a);var g;r=null;for(E in u)if(!a.hasOwnProperty(E)&&u.hasOwnProperty(E)&&u[E]!=null)if(E==="style"){var l=u[E];for(g in l)l.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Rf.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in a){var w=a[E];if(l=u!=null?u[E]:void 0,a.hasOwnProperty(E)&&w!==l&&(w!=null||l!=null))if(E==="style")if(l){for(g in l)!l.hasOwnProperty(g)||w&&w.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in w)w.hasOwnProperty(g)&&l[g]!==w[g]&&(r||(r={}),r[g]=w[g])}else r||(f||(f=[]),f.push(E,r)),r=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,l=l?l.__html:void 0,w!=null&&l!==w&&(f=f||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Rf.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&Er("scroll",e),f||l===w||(f=[])):(f=f||[]).push(E,w))}r&&(f=f||[]).push("style",r);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};KS=function(e,t,r,a){r!==a&&(t.flags|=4)};function tf(e,t){if(!Ar)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Pi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var u=e.child;u!==null;)r|=u.lanes|u.childLanes,a|=u.subtreeFlags&14680064,a|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)r|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function m3(e,t,r){var a=t.pendingProps;switch(T1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(t),null;case 1:return co(t.type)&&Kp(),Pi(t),null;case 3:return a=t.stateNode,oh(),Sr(uo),Sr(Li),O1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(tp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_s!==null&&(uv(_s),_s=null))),tv(e,t),Pi(t),null;case 5:L1(t);var u=Su(Hf.current);if(r=t.type,e!==null&&t.stateNode!=null)YS(e,t,r,a,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Ct(166));return Pi(t),null}if(e=Su(Js.current),tp(t)){a=t.stateNode,r=t.type;var f=t.memoizedProps;switch(a[Zs]=t,a[Wf]=f,e=(t.mode&1)!==0,r){case"dialog":Er("cancel",a),Er("close",a);break;case"iframe":case"object":case"embed":Er("load",a);break;case"video":case"audio":for(u=0;u<lf.length;u++)Er(lf[u],a);break;case"source":Er("error",a);break;case"img":case"image":case"link":Er("error",a),Er("load",a);break;case"details":Er("toggle",a);break;case"input":dw(a,f),Er("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Er("invalid",a);break;case"textarea":mw(a,f),Er("invalid",a)}I0(r,f),u=null;for(var g in f)if(f.hasOwnProperty(g)){var l=f[g];g==="children"?typeof l=="string"?a.textContent!==l&&(f.suppressHydrationWarning!==!0&&ep(a.textContent,l,e),u=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&ep(a.textContent,l,e),u=["children",""+l]):Rf.hasOwnProperty(g)&&l!=null&&g==="onScroll"&&Er("scroll",a)}switch(r){case"input":Zd(a),pw(a,f,!0);break;case"textarea":Zd(a),gw(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Yp)}a=u,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=EE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(r,{is:a.is}):(e=g.createElement(r),r==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,r),e[Zs]=t,e[Wf]=a,XS(e,t,!1,!1),t.stateNode=e;e:{switch(g=P0(r,a),r){case"dialog":Er("cancel",e),Er("close",e),u=a;break;case"iframe":case"object":case"embed":Er("load",e),u=a;break;case"video":case"audio":for(u=0;u<lf.length;u++)Er(lf[u],e);u=a;break;case"source":Er("error",e),u=a;break;case"img":case"image":case"link":Er("error",e),Er("load",e),u=a;break;case"details":Er("toggle",e),u=a;break;case"input":dw(e,a),u=E0(e,a),Er("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=Rr({},a,{value:void 0}),Er("invalid",e);break;case"textarea":mw(e,a),u=C0(e,a),Er("invalid",e);break;default:u=a}I0(r,u),l=u;for(f in l)if(l.hasOwnProperty(f)){var w=l[f];f==="style"?CE(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&SE(e,w)):f==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&Ff(e,w):typeof w=="number"&&Ff(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Rf.hasOwnProperty(f)?w!=null&&f==="onScroll"&&Er("scroll",e):w!=null&&c1(e,f,w,g))}switch(r){case"input":Zd(e),pw(e,a,!1);break;case"textarea":Zd(e),gw(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Pl(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Zc(e,!!a.multiple,f,!1):a.defaultValue!=null&&Zc(e,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Yp)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pi(t),null;case 6:if(e&&t.stateNode!=null)KS(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ct(166));if(r=Su(Hf.current),Su(Js.current),tp(t)){if(a=t.stateNode,r=t.memoizedProps,a[Zs]=t,(f=a.nodeValue!==r)&&(e=Co,e!==null))switch(e.tag){case 3:ep(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ep(a.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Zs]=t,t.stateNode=a}return Pi(t),null;case 13:if(Sr(zr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ar&&So!==null&&t.mode&1&&!(t.flags&128))dS(),rh(),t.flags|=98560,f=!1;else if(f=tp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(Ct(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Ct(317));f[Zs]=t}else rh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pi(t),f=!1}else _s!==null&&(uv(_s),_s=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||zr.current&1?ri===0&&(ri=3):Z1())),t.updateQueue!==null&&(t.flags|=4),Pi(t),null);case 4:return oh(),tv(e,t),e===null&&Vf(t.stateNode.containerInfo),Pi(t),null;case 10:return P1(t.type._context),Pi(t),null;case 17:return co(t.type)&&Kp(),Pi(t),null;case 19:if(Sr(zr),f=t.memoizedState,f===null)return Pi(t),null;if(a=(t.flags&128)!==0,g=f.rendering,g===null)if(a)tf(f,!1);else{if(ri!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=rm(e),g!==null){for(t.flags|=128,tf(f,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)f=r,e=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return vr(zr,zr.current&1|2),t.child}e=e.sibling}f.tail!==null&&Yr()>ah&&(t.flags|=128,a=!0,tf(f,!1),t.lanes=4194304)}else{if(!a)if(e=rm(g),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),tf(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ar)return Pi(t),null}else 2*Yr()-f.renderingStartTime>ah&&r!==1073741824&&(t.flags|=128,a=!0,tf(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(r=f.last,r!==null?r.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Yr(),t.sibling=null,r=zr.current,vr(zr,a?r&1|2:r&1),t):(Pi(t),null);case 22:case 23:return W1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?wo&1073741824&&(Pi(t),t.subtreeFlags&6&&(t.flags|=8192)):Pi(t),null;case 24:return null;case 25:return null}throw Error(Ct(156,t.tag))}function g3(e,t){switch(T1(t),t.tag){case 1:return co(t.type)&&Kp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oh(),Sr(uo),Sr(Li),O1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return L1(t),null;case 13:if(Sr(zr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ct(340));rh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sr(zr),null;case 4:return oh(),null;case 10:return P1(t.type._context),null;case 22:case 23:return W1(),null;case 24:return null;default:return null}}var ip=!1,Mi=!1,y3=typeof WeakSet=="function"?WeakSet:Set,en=null;function Dc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Ur(e,t,a)}else r.current=null}function nv(e,t,r){try{r()}catch(a){Ur(e,t,a)}}var ob=!1;function v3(e,t){if(D0=Zp,e=eS(),E1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var u=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var g=0,l=-1,w=-1,E=0,T=0,S=e,C=null;t:for(;;){for(var F;S!==r||u!==0&&S.nodeType!==3||(l=g+u),S!==f||a!==0&&S.nodeType!==3||(w=g+a),S.nodeType===3&&(g+=S.nodeValue.length),(F=S.firstChild)!==null;)C=S,S=F;for(;;){if(S===e)break t;if(C===r&&++E===u&&(l=g),C===f&&++T===a&&(w=g),(F=S.nextSibling)!==null)break;S=C,C=S.parentNode}S=F}r=l===-1||w===-1?null:{start:l,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(N0={focusedElem:e,selectionRange:r},Zp=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var Y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var H=Y.memoizedProps,le=Y.memoizedState,W=t.stateNode,V=W.getSnapshotBeforeUpdate(t.elementType===t.type?H:ys(t.type,H),le);W.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ct(163))}}catch(se){Ur(t,t.return,se)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return Y=ob,ob=!1,Y}function Ef(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&nv(t,r,f)}u=u.next}while(u!==a)}}function tg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function rv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function qS(e){var t=e.alternate;t!==null&&(e.alternate=null,qS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zs],delete t[Wf],delete t[V0],delete t[e3],delete t[t3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function JS(e){return e.tag===5||e.tag===3||e.tag===4}function sb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iv(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Yp));else if(a!==4&&(e=e.child,e!==null))for(iv(e,t,r),e=e.sibling;e!==null;)iv(e,t,r),e=e.sibling}function ov(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(ov(e,t,r),e=e.sibling;e!==null;)ov(e,t,r),e=e.sibling}var yi=null,vs=!1;function ul(e,t,r){for(r=r.child;r!==null;)QS(e,t,r),r=r.sibling}function QS(e,t,r){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(Hm,r)}catch{}switch(r.tag){case 5:Mi||Dc(r,t);case 6:var a=yi,u=vs;yi=null,ul(e,t,r),yi=a,vs=u,yi!==null&&(vs?(e=yi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):yi.removeChild(r.stateNode));break;case 18:yi!==null&&(vs?(e=yi,r=r.stateNode,e.nodeType===8?Iy(e.parentNode,r):e.nodeType===1&&Iy(e,r),Nf(e)):Iy(yi,r.stateNode));break;case 4:a=yi,u=vs,yi=r.stateNode.containerInfo,vs=!0,ul(e,t,r),yi=a,vs=u;break;case 0:case 11:case 14:case 15:if(!Mi&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){u=a=a.next;do{var f=u,g=f.destroy;f=f.tag,g!==void 0&&(f&2||f&4)&&nv(r,t,g),u=u.next}while(u!==a)}ul(e,t,r);break;case 1:if(!Mi&&(Dc(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(l){Ur(r,t,l)}ul(e,t,r);break;case 21:ul(e,t,r);break;case 22:r.mode&1?(Mi=(a=Mi)||r.memoizedState!==null,ul(e,t,r),Mi=a):ul(e,t,r);break;default:ul(e,t,r)}}function ab(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new y3),t.forEach(function(a){var u=A3.bind(null,e,a);r.has(a)||(r.add(a),a.then(u,u))})}}function gs(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];try{var f=e,g=t,l=g;e:for(;l!==null;){switch(l.tag){case 5:yi=l.stateNode,vs=!1;break e;case 3:yi=l.stateNode.containerInfo,vs=!0;break e;case 4:yi=l.stateNode.containerInfo,vs=!0;break e}l=l.return}if(yi===null)throw Error(Ct(160));QS(f,g,u),yi=null,vs=!1;var w=u.alternate;w!==null&&(w.return=null),u.return=null}catch(E){Ur(u,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eT(t,e),t=t.sibling}function eT(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gs(t,e),Gs(e),a&4){try{Ef(3,e,e.return),tg(3,e)}catch(H){Ur(e,e.return,H)}try{Ef(5,e,e.return)}catch(H){Ur(e,e.return,H)}}break;case 1:gs(t,e),Gs(e),a&512&&r!==null&&Dc(r,r.return);break;case 5:if(gs(t,e),Gs(e),a&512&&r!==null&&Dc(r,r.return),e.flags&32){var u=e.stateNode;try{Ff(u,"")}catch(H){Ur(e,e.return,H)}}if(a&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,g=r!==null?r.memoizedProps:f,l=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&wE(u,f),P0(l,g);var E=P0(l,f);for(g=0;g<w.length;g+=2){var T=w[g],S=w[g+1];T==="style"?CE(u,S):T==="dangerouslySetInnerHTML"?SE(u,S):T==="children"?Ff(u,S):c1(u,T,S,E)}switch(l){case"input":S0(u,f);break;case"textarea":bE(u,f);break;case"select":var C=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var F=f.value;F!=null?Zc(u,!!f.multiple,F,!1):C!==!!f.multiple&&(f.defaultValue!=null?Zc(u,!!f.multiple,f.defaultValue,!0):Zc(u,!!f.multiple,f.multiple?[]:"",!1))}u[Wf]=f}catch(H){Ur(e,e.return,H)}}break;case 6:if(gs(t,e),Gs(e),a&4){if(e.stateNode===null)throw Error(Ct(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(H){Ur(e,e.return,H)}}break;case 3:if(gs(t,e),Gs(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Nf(t.containerInfo)}catch(H){Ur(e,e.return,H)}break;case 4:gs(t,e),Gs(e);break;case 13:gs(t,e),Gs(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(V1=Yr())),a&4&&ab(e);break;case 22:if(T=r!==null&&r.memoizedState!==null,e.mode&1?(Mi=(E=Mi)||T,gs(t,e),Mi=E):gs(t,e),Gs(e),a&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!T&&e.mode&1)for(en=e,T=e.child;T!==null;){for(S=en=T;en!==null;){switch(C=en,F=C.child,C.tag){case 0:case 11:case 14:case 15:Ef(4,C,C.return);break;case 1:Dc(C,C.return);var Y=C.stateNode;if(typeof Y.componentWillUnmount=="function"){a=C,r=C.return;try{t=a,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(H){Ur(a,r,H)}}break;case 5:Dc(C,C.return);break;case 22:if(C.memoizedState!==null){ub(S);continue}}F!==null?(F.return=C,en=F):ub(S)}T=T.sibling}e:for(T=null,S=e;;){if(S.tag===5){if(T===null){T=S;try{u=S.stateNode,E?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=S.stateNode,w=S.memoizedProps.style,g=w!=null&&w.hasOwnProperty("display")?w.display:null,l.style.display=TE("display",g))}catch(H){Ur(e,e.return,H)}}}else if(S.tag===6){if(T===null)try{S.stateNode.nodeValue=E?"":S.memoizedProps}catch(H){Ur(e,e.return,H)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;T===S&&(T=null),S=S.return}T===S&&(T=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:gs(t,e),Gs(e),a&4&&ab(e);break;case 21:break;default:gs(t,e),Gs(e)}}function Gs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(JS(r)){var a=r;break e}r=r.return}throw Error(Ct(160))}switch(a.tag){case 5:var u=a.stateNode;a.flags&32&&(Ff(u,""),a.flags&=-33);var f=sb(e);ov(e,f,u);break;case 3:case 4:var g=a.stateNode.containerInfo,l=sb(e);iv(e,l,g);break;default:throw Error(Ct(161))}}catch(w){Ur(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _3(e,t,r){en=e,tT(e)}function tT(e,t,r){for(var a=(e.mode&1)!==0;en!==null;){var u=en,f=u.child;if(u.tag===22&&a){var g=u.memoizedState!==null||ip;if(!g){var l=u.alternate,w=l!==null&&l.memoizedState!==null||Mi;l=ip;var E=Mi;if(ip=g,(Mi=w)&&!E)for(en=u;en!==null;)g=en,w=g.child,g.tag===22&&g.memoizedState!==null?cb(u):w!==null?(w.return=g,en=w):cb(u);for(;f!==null;)en=f,tT(f),f=f.sibling;en=u,ip=l,Mi=E}lb(e)}else u.subtreeFlags&8772&&f!==null?(f.return=u,en=f):lb(e)}}function lb(e){for(;en!==null;){var t=en;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mi||tg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Mi)if(r===null)a.componentDidMount();else{var u=t.elementType===t.type?r.memoizedProps:ys(t.type,r.memoizedProps);a.componentDidUpdate(u,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Ww(t,f,a);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ww(t,g,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var T=E.memoizedState;if(T!==null){var S=T.dehydrated;S!==null&&Nf(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ct(163))}Mi||t.flags&512&&rv(t)}catch(C){Ur(t,t.return,C)}}if(t===e){en=null;break}if(r=t.sibling,r!==null){r.return=t.return,en=r;break}en=t.return}}function ub(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var r=t.sibling;if(r!==null){r.return=t.return,en=r;break}en=t.return}}function cb(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{tg(4,t)}catch(w){Ur(t,r,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var u=t.return;try{a.componentDidMount()}catch(w){Ur(t,u,w)}}var f=t.return;try{rv(t)}catch(w){Ur(t,f,w)}break;case 5:var g=t.return;try{rv(t)}catch(w){Ur(t,g,w)}}}catch(w){Ur(t,t.return,w)}if(t===e){en=null;break}var l=t.sibling;if(l!==null){l.return=t.return,en=l;break}en=t.return}}var x3=Math.ceil,sm=Da.ReactCurrentDispatcher,U1=Da.ReactCurrentOwner,Ko=Da.ReactCurrentBatchConfig,Hn=0,ui=null,Jr=null,_i=0,wo=0,Nc=Rl(0),ri=0,qf=null,Mu=0,ng=0,$1=0,Sf=null,so=null,V1=0,ah=1/0,Ta=null,am=!1,sv=null,Cl=null,op=!1,_l=null,lm=0,Tf=0,av=null,Ip=-1,Pp=0;function qi(){return Hn&6?Yr():Ip!==-1?Ip:Ip=Yr()}function Al(e){return e.mode&1?Hn&2&&_i!==0?_i&-_i:r3.transition!==null?(Pp===0&&(Pp=BE()),Pp):(e=tr,e!==0||(e=window.event,e=e===void 0?16:WE(e.type)),e):1}function Cs(e,t,r,a){if(50<Tf)throw Tf=0,av=null,Error(Ct(185));id(e,r,a),(!(Hn&2)||e!==ui)&&(e===ui&&(!(Hn&2)&&(ng|=r),ri===4&&gl(e,_i)),ho(e,a),r===1&&Hn===0&&!(t.mode&1)&&(ah=Yr()+500,Jm&&Fl()))}function ho(e,t){var r=e.callbackNode;rk(e,t);var a=Wp(e,e===ui?_i:0);if(a===0)r!==null&&_w(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&_w(r),t===1)e.tag===0?n3(hb.bind(null,e)):cS(hb.bind(null,e)),Jk(function(){!(Hn&6)&&Fl()}),r=null;else{switch(DE(a)){case 1:r=m1;break;case 4:r=FE;break;case 16:r=Gp;break;case 536870912:r=jE;break;default:r=Gp}r=uT(r,nT.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nT(e,t){if(Ip=-1,Pp=0,Hn&6)throw Error(Ct(327));var r=e.callbackNode;if(qc()&&e.callbackNode!==r)return null;var a=Wp(e,e===ui?_i:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=um(e,a);else{t=a;var u=Hn;Hn|=2;var f=iT();(ui!==e||_i!==t)&&(Ta=null,ah=Yr()+500,Cu(e,t));do try{E3();break}catch(l){rT(e,l)}while(1);I1(),sm.current=f,Hn=u,Jr!==null?t=0:(ui=null,_i=0,t=ri)}if(t!==0){if(t===2&&(u=O0(e),u!==0&&(a=u,t=lv(e,u))),t===1)throw r=qf,Cu(e,0),gl(e,a),ho(e,Yr()),r;if(t===6)gl(e,a);else{if(u=e.current.alternate,!(a&30)&&!w3(u)&&(t=um(e,a),t===2&&(f=O0(e),f!==0&&(a=f,t=lv(e,f))),t===1))throw r=qf,Cu(e,0),gl(e,a),ho(e,Yr()),r;switch(e.finishedWork=u,e.finishedLanes=a,t){case 0:case 1:throw Error(Ct(345));case 2:xu(e,so,Ta);break;case 3:if(gl(e,a),(a&130023424)===a&&(t=V1+500-Yr(),10<t)){if(Wp(e,0)!==0)break;if(u=e.suspendedLanes,(u&a)!==a){qi(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=$0(xu.bind(null,e,so,Ta),t);break}xu(e,so,Ta);break;case 4:if(gl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,u=-1;0<a;){var g=31-Ts(a);f=1<<g,g=t[g],g>u&&(u=g),a&=~f}if(a=u,a=Yr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*x3(a/1960))-a,10<a){e.timeoutHandle=$0(xu.bind(null,e,so,Ta),a);break}xu(e,so,Ta);break;case 5:xu(e,so,Ta);break;default:throw Error(Ct(329))}}}return ho(e,Yr()),e.callbackNode===r?nT.bind(null,e):null}function lv(e,t){var r=Sf;return e.current.memoizedState.isDehydrated&&(Cu(e,t).flags|=256),e=um(e,t),e!==2&&(t=so,so=r,t!==null&&uv(t)),e}function uv(e){so===null?so=e:so.push.apply(so,e)}function w3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var u=r[a],f=u.getSnapshot;u=u.value;try{if(!As(f(),u))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gl(e,t){for(t&=~$1,t&=~ng,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ts(t),a=1<<r;e[r]=-1,t&=~a}}function hb(e){if(Hn&6)throw Error(Ct(327));qc();var t=Wp(e,0);if(!(t&1))return ho(e,Yr()),null;var r=um(e,t);if(e.tag!==0&&r===2){var a=O0(e);a!==0&&(t=a,r=lv(e,a))}if(r===1)throw r=qf,Cu(e,0),gl(e,t),ho(e,Yr()),r;if(r===6)throw Error(Ct(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,so,Ta),ho(e,Yr()),null}function G1(e,t){var r=Hn;Hn|=1;try{return e(t)}finally{Hn=r,Hn===0&&(ah=Yr()+500,Jm&&Fl())}}function zu(e){_l!==null&&_l.tag===0&&!(Hn&6)&&qc();var t=Hn;Hn|=1;var r=Ko.transition,a=tr;try{if(Ko.transition=null,tr=1,e)return e()}finally{tr=a,Ko.transition=r,Hn=t,!(Hn&6)&&Fl()}}function W1(){wo=Nc.current,Sr(Nc)}function Cu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,qk(r)),Jr!==null)for(r=Jr.return;r!==null;){var a=r;switch(T1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Kp();break;case 3:oh(),Sr(uo),Sr(Li),O1();break;case 5:L1(a);break;case 4:oh();break;case 13:Sr(zr);break;case 19:Sr(zr);break;case 10:P1(a.type._context);break;case 22:case 23:W1()}r=r.return}if(ui=e,Jr=e=Il(e.current,null),_i=wo=t,ri=0,qf=null,$1=ng=Mu=0,so=Sf=null,Eu!==null){for(t=0;t<Eu.length;t++)if(r=Eu[t],a=r.interleaved,a!==null){r.interleaved=null;var u=a.next,f=r.pending;if(f!==null){var g=f.next;f.next=u,a.next=g}r.pending=a}Eu=null}return e}function rT(e,t){do{var r=Jr;try{if(I1(),Tp.current=om,im){for(var a=Or.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}im=!1}if(ku=0,li=ni=Or=null,bf=!1,Xf=0,U1.current=null,r===null||r.return===null){ri=1,qf=t,Jr=null;break}e:{var f=e,g=r.return,l=r,w=t;if(t=_i,l.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w,T=l,S=T.tag;if(!(T.mode&1)&&(S===0||S===11||S===15)){var C=T.alternate;C?(T.updateQueue=C.updateQueue,T.memoizedState=C.memoizedState,T.lanes=C.lanes):(T.updateQueue=null,T.memoizedState=null)}var F=Jw(g);if(F!==null){F.flags&=-257,Qw(F,g,l,f,t),F.mode&1&&qw(f,E,t),t=F,w=E;var Y=t.updateQueue;if(Y===null){var H=new Set;H.add(w),t.updateQueue=H}else Y.add(w);break e}else{if(!(t&1)){qw(f,E,t),Z1();break e}w=Error(Ct(426))}}else if(Ar&&l.mode&1){var le=Jw(g);if(le!==null){!(le.flags&65536)&&(le.flags|=256),Qw(le,g,l,f,t),C1(sh(w,l));break e}}f=w=sh(w,l),ri!==4&&(ri=2),Sf===null?Sf=[f]:Sf.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var W=NS(f,w,t);Gw(f,W);break e;case 1:l=w;var V=f.type,B=f.stateNode;if(!(f.flags&128)&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Cl===null||!Cl.has(B)))){f.flags|=65536,t&=-t,f.lanes|=t;var se=US(f,l,t);Gw(f,se);break e}}f=f.return}while(f!==null)}sT(r)}catch(G){t=G,Jr===r&&r!==null&&(Jr=r=r.return);continue}break}while(1)}function iT(){var e=sm.current;return sm.current=om,e===null?om:e}function Z1(){(ri===0||ri===3||ri===2)&&(ri=4),ui===null||!(Mu&268435455)&&!(ng&268435455)||gl(ui,_i)}function um(e,t){var r=Hn;Hn|=2;var a=iT();(ui!==e||_i!==t)&&(Ta=null,Cu(e,t));do try{b3();break}catch(u){rT(e,u)}while(1);if(I1(),Hn=r,sm.current=a,Jr!==null)throw Error(Ct(261));return ui=null,_i=0,ri}function b3(){for(;Jr!==null;)oT(Jr)}function E3(){for(;Jr!==null&&!XP();)oT(Jr)}function oT(e){var t=lT(e.alternate,e,wo);e.memoizedProps=e.pendingProps,t===null?sT(e):Jr=t,U1.current=null}function sT(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=g3(r,t),r!==null){r.flags&=32767,Jr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ri=6,Jr=null;return}}else if(r=m3(r,t,wo),r!==null){Jr=r;return}if(t=t.sibling,t!==null){Jr=t;return}Jr=t=e}while(t!==null);ri===0&&(ri=5)}function xu(e,t,r){var a=tr,u=Ko.transition;try{Ko.transition=null,tr=1,S3(e,t,r,a)}finally{Ko.transition=u,tr=a}return null}function S3(e,t,r,a){do qc();while(_l!==null);if(Hn&6)throw Error(Ct(327));r=e.finishedWork;var u=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ct(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(ik(e,f),e===ui&&(Jr=ui=null,_i=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||op||(op=!0,uT(Gp,function(){return qc(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=Ko.transition,Ko.transition=null;var g=tr;tr=1;var l=Hn;Hn|=4,U1.current=null,v3(e,r),eT(r,e),Gk(N0),Zp=!!D0,N0=D0=null,e.current=r,_3(r),YP(),Hn=l,tr=g,Ko.transition=f}else e.current=r;if(op&&(op=!1,_l=e,lm=u),f=e.pendingLanes,f===0&&(Cl=null),JP(r.stateNode),ho(e,Yr()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)u=t[r],a(u.value,{componentStack:u.stack,digest:u.digest});if(am)throw am=!1,e=sv,sv=null,e;return lm&1&&e.tag!==0&&qc(),f=e.pendingLanes,f&1?e===av?Tf++:(Tf=0,av=e):Tf=0,Fl(),null}function qc(){if(_l!==null){var e=DE(lm),t=Ko.transition,r=tr;try{if(Ko.transition=null,tr=16>e?16:e,_l===null)var a=!1;else{if(e=_l,_l=null,lm=0,Hn&6)throw Error(Ct(331));var u=Hn;for(Hn|=4,en=e.current;en!==null;){var f=en,g=f.child;if(en.flags&16){var l=f.deletions;if(l!==null){for(var w=0;w<l.length;w++){var E=l[w];for(en=E;en!==null;){var T=en;switch(T.tag){case 0:case 11:case 15:Ef(8,T,f)}var S=T.child;if(S!==null)S.return=T,en=S;else for(;en!==null;){T=en;var C=T.sibling,F=T.return;if(qS(T),T===E){en=null;break}if(C!==null){C.return=F,en=C;break}en=F}}}var Y=f.alternate;if(Y!==null){var H=Y.child;if(H!==null){Y.child=null;do{var le=H.sibling;H.sibling=null,H=le}while(H!==null)}}en=f}}if(f.subtreeFlags&2064&&g!==null)g.return=f,en=g;else e:for(;en!==null;){if(f=en,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Ef(9,f,f.return)}var W=f.sibling;if(W!==null){W.return=f.return,en=W;break e}en=f.return}}var V=e.current;for(en=V;en!==null;){g=en;var B=g.child;if(g.subtreeFlags&2064&&B!==null)B.return=g,en=B;else e:for(g=V;en!==null;){if(l=en,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tg(9,l)}}catch(G){Ur(l,l.return,G)}if(l===g){en=null;break e}var se=l.sibling;if(se!==null){se.return=l.return,en=se;break e}en=l.return}}if(Hn=u,Fl(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(Hm,e)}catch{}a=!0}return a}finally{tr=r,Ko.transition=t}}return!1}function fb(e,t,r){t=sh(r,t),t=NS(e,t,1),e=Tl(e,t,1),t=qi(),e!==null&&(id(e,1,t),ho(e,t))}function Ur(e,t,r){if(e.tag===3)fb(e,e,r);else for(;t!==null;){if(t.tag===3){fb(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Cl===null||!Cl.has(a))){e=sh(r,e),e=US(t,e,1),t=Tl(t,e,1),e=qi(),t!==null&&(id(t,1,e),ho(t,e));break}}t=t.return}}function T3(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=qi(),e.pingedLanes|=e.suspendedLanes&r,ui===e&&(_i&r)===r&&(ri===4||ri===3&&(_i&130023424)===_i&&500>Yr()-V1?Cu(e,0):$1|=r),ho(e,t)}function aT(e,t){t===0&&(e.mode&1?(t=Yd,Yd<<=1,!(Yd&130023424)&&(Yd=4194304)):t=1);var r=qi();e=La(e,t),e!==null&&(id(e,t,r),ho(e,r))}function C3(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),aT(e,r)}function A3(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(r=u.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Ct(314))}a!==null&&a.delete(t),aT(e,r)}var lT;lT=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||uo.current)lo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return lo=!1,p3(e,t,r);lo=!!(e.flags&131072)}else lo=!1,Ar&&t.flags&1048576&&hS(t,Qp,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ap(e,t),e=t.pendingProps;var u=nh(t,Li.current);Kc(t,r),u=F1(null,t,a,e,u,r);var f=j1();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,co(a)?(f=!0,qp(t)):f=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,M1(t),u.updater=Qm,t.stateNode=u,u._reactInternals=t,Y0(t,a,e,r),t=J0(null,t,a,!0,f,r)):(t.tag=0,Ar&&f&&S1(t),Hi(null,t,u,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Ap(e,t),e=t.pendingProps,u=a._init,a=u(a._payload),t.type=a,u=t.tag=P3(a),e=ys(a,e),u){case 0:t=q0(null,t,a,e,r);break e;case 1:t=nb(null,t,a,e,r);break e;case 11:t=eb(null,t,a,e,r);break e;case 14:t=tb(null,t,a,ys(a.type,e),r);break e}throw Error(Ct(306,a,""))}return t;case 0:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:ys(a,u),q0(e,t,a,u,r);case 1:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:ys(a,u),nb(e,t,a,u,r);case 3:e:{if(WS(t),e===null)throw Error(Ct(387));a=t.pendingProps,f=t.memoizedState,u=f.element,mS(e,t),nm(t,a,null,r);var g=t.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){u=sh(Error(Ct(423)),t),t=rb(e,t,a,r,u);break e}else if(a!==u){u=sh(Error(Ct(424)),t),t=rb(e,t,a,r,u);break e}else for(So=Sl(t.stateNode.containerInfo.firstChild),Co=t,Ar=!0,_s=null,r=_S(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rh(),a===u){t=Oa(e,t,r);break e}Hi(e,t,a,r)}t=t.child}return t;case 5:return xS(t),e===null&&Z0(t),a=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,g=u.children,U0(a,u)?g=null:f!==null&&U0(a,f)&&(t.flags|=32),GS(e,t),Hi(e,t,g,r),t.child;case 6:return e===null&&Z0(t),null;case 13:return ZS(e,t,r);case 4:return z1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ih(t,null,a,r):Hi(e,t,a,r),t.child;case 11:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:ys(a,u),eb(e,t,a,u,r);case 7:return Hi(e,t,t.pendingProps,r),t.child;case 8:return Hi(e,t,t.pendingProps.children,r),t.child;case 12:return Hi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,u=t.pendingProps,f=t.memoizedProps,g=u.value,vr(em,a._currentValue),a._currentValue=g,f!==null)if(As(f.value,g)){if(f.children===u.children&&!uo.current){t=Oa(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){g=f.child;for(var w=l.firstContext;w!==null;){if(w.context===a){if(f.tag===1){w=ka(-1,r&-r),w.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var T=E.pending;T===null?w.next=w:(w.next=T.next,T.next=w),E.pending=w}}f.lanes|=r,w=f.alternate,w!==null&&(w.lanes|=r),H0(f.return,r,t),l.lanes|=r;break}w=w.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(Ct(341));g.lanes|=r,l=g.alternate,l!==null&&(l.lanes|=r),H0(g,r,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}Hi(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,a=t.pendingProps.children,Kc(t,r),u=qo(u),a=a(u),t.flags|=1,Hi(e,t,a,r),t.child;case 14:return a=t.type,u=ys(a,t.pendingProps),u=ys(a.type,u),tb(e,t,a,u,r);case 15:return $S(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:ys(a,u),Ap(e,t),t.tag=1,co(a)?(e=!0,qp(t)):e=!1,Kc(t,r),yS(t,a,u),Y0(t,a,u,r),J0(null,t,a,!0,e,r);case 19:return HS(e,t,r);case 22:return VS(e,t,r)}throw Error(Ct(156,t.tag))};function uT(e,t){return RE(e,t)}function I3(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xo(e,t,r,a){return new I3(e,t,r,a)}function H1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function P3(e){if(typeof e=="function")return H1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===f1)return 11;if(e===d1)return 14}return 2}function Il(e,t){var r=e.alternate;return r===null?(r=Xo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function kp(e,t,r,a,u,f){var g=2;if(a=e,typeof e=="function")H1(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case kc:return Au(r.children,u,f,t);case h1:g=8,u|=8;break;case _0:return e=Xo(12,r,t,u|2),e.elementType=_0,e.lanes=f,e;case x0:return e=Xo(13,r,t,u),e.elementType=x0,e.lanes=f,e;case w0:return e=Xo(19,r,t,u),e.elementType=w0,e.lanes=f,e;case vE:return rg(r,u,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gE:g=10;break e;case yE:g=9;break e;case f1:g=11;break e;case d1:g=14;break e;case hl:g=16,a=null;break e}throw Error(Ct(130,e==null?e:typeof e,""))}return t=Xo(g,r,t,u),t.elementType=e,t.type=a,t.lanes=f,t}function Au(e,t,r,a){return e=Xo(7,e,a,t),e.lanes=r,e}function rg(e,t,r,a){return e=Xo(22,e,a,t),e.elementType=vE,e.lanes=r,e.stateNode={isHidden:!1},e}function Fy(e,t,r){return e=Xo(6,e,null,t),e.lanes=r,e}function jy(e,t,r){return t=Xo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function k3(e,t,r,a,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yy(0),this.expirationTimes=yy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yy(0),this.identifierPrefix=a,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function X1(e,t,r,a,u,f,g,l,w){return e=new k3(e,t,r,l,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Xo(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},M1(f),e}function M3(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function cT(e){if(!e)return kl;e=e._reactInternals;e:{if(Bu(e)!==e||e.tag!==1)throw Error(Ct(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(co(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ct(171))}if(e.tag===1){var r=e.type;if(co(r))return uS(e,r,t)}return t}function hT(e,t,r,a,u,f,g,l,w){return e=X1(r,a,!0,e,u,f,g,l,w),e.context=cT(null),r=e.current,a=qi(),u=Al(r),f=ka(a,u),f.callback=t??null,Tl(r,f,u),e.current.lanes=u,id(e,u,a),ho(e,a),e}function ig(e,t,r,a){var u=t.current,f=qi(),g=Al(u);return r=cT(r),t.context===null?t.context=r:t.pendingContext=r,t=ka(f,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Tl(u,t,g),e!==null&&(Cs(e,u,g,f),Sp(e,u,g)),g}function cm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function db(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Y1(e,t){db(e,t),(e=e.alternate)&&db(e,t)}function z3(){return null}var fT=typeof reportError=="function"?reportError:function(e){console.error(e)};function K1(e){this._internalRoot=e}og.prototype.render=K1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ct(409));ig(e,t,null,null)};og.prototype.unmount=K1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zu(function(){ig(null,e,null,null)}),t[za]=null}};function og(e){this._internalRoot=e}og.prototype.unstable_scheduleHydration=function(e){if(e){var t=$E();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ml.length&&t!==0&&t<ml[r].priority;r++);ml.splice(r,0,e),r===0&&GE(e)}};function q1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pb(){}function L3(e,t,r,a,u){if(u){if(typeof a=="function"){var f=a;a=function(){var E=cm(g);f.call(E)}}var g=hT(t,a,e,0,null,!1,!1,"",pb);return e._reactRootContainer=g,e[za]=g.current,Vf(e.nodeType===8?e.parentNode:e),zu(),g}for(;u=e.lastChild;)e.removeChild(u);if(typeof a=="function"){var l=a;a=function(){var E=cm(w);l.call(E)}}var w=X1(e,0,!1,null,null,!1,!1,"",pb);return e._reactRootContainer=w,e[za]=w.current,Vf(e.nodeType===8?e.parentNode:e),zu(function(){ig(t,w,r,a)}),w}function ag(e,t,r,a,u){var f=r._reactRootContainer;if(f){var g=f;if(typeof u=="function"){var l=u;u=function(){var w=cm(g);l.call(w)}}ig(t,g,e,u)}else g=L3(r,t,e,u,a);return cm(g)}NE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=af(t.pendingLanes);r!==0&&(g1(t,r|1),ho(t,Yr()),!(Hn&6)&&(ah=Yr()+500,Fl()))}break;case 13:zu(function(){var a=La(e,1);if(a!==null){var u=qi();Cs(a,e,1,u)}}),Y1(e,1)}};y1=function(e){if(e.tag===13){var t=La(e,134217728);if(t!==null){var r=qi();Cs(t,e,134217728,r)}Y1(e,134217728)}};UE=function(e){if(e.tag===13){var t=Al(e),r=La(e,t);if(r!==null){var a=qi();Cs(r,e,t,a)}Y1(e,t)}};$E=function(){return tr};VE=function(e,t){var r=tr;try{return tr=e,t()}finally{tr=r}};M0=function(e,t,r){switch(t){case"input":if(S0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var u=qm(a);if(!u)throw Error(Ct(90));xE(a),S0(a,u)}}}break;case"textarea":bE(e,r);break;case"select":t=r.value,t!=null&&Zc(e,!!r.multiple,t,!1)}};PE=G1;kE=zu;var O3={usingClientEntryPoint:!1,Events:[sd,Oc,qm,AE,IE,G1]},nf={findFiberByHostInstance:bu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},R3={bundleType:nf.bundleType,version:nf.version,rendererPackageName:nf.rendererPackageName,rendererConfig:nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Da.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=LE(e),e===null?null:e.stateNode},findFiberByHostInstance:nf.findFiberByHostInstance||z3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sp.isDisabled&&sp.supportsFiber)try{Hm=sp.inject(R3),qs=sp}catch{}}Io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O3;Io.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q1(t))throw Error(Ct(200));return M3(e,t,null,r)};Io.createRoot=function(e,t){if(!q1(e))throw Error(Ct(299));var r=!1,a="",u=fT;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=X1(e,1,!1,null,null,r,!1,a,u),e[za]=t.current,Vf(e.nodeType===8?e.parentNode:e),new K1(t)};Io.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ct(188)):(e=Object.keys(e).join(","),Error(Ct(268,e)));return e=LE(t),e=e===null?null:e.stateNode,e};Io.flushSync=function(e){return zu(e)};Io.hydrate=function(e,t,r){if(!sg(t))throw Error(Ct(200));return ag(null,e,t,!0,r)};Io.hydrateRoot=function(e,t,r){if(!q1(e))throw Error(Ct(405));var a=r!=null&&r.hydratedSources||null,u=!1,f="",g=fT;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=hT(t,null,e,1,r??null,u,!1,f,g),e[za]=t.current,Vf(e),a)for(e=0;e<a.length;e++)r=a[e],u=r._getVersion,u=u(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,u]:t.mutableSourceEagerHydrationData.push(r,u);return new og(t)};Io.render=function(e,t,r){if(!sg(t))throw Error(Ct(200));return ag(null,e,t,!1,r)};Io.unmountComponentAtNode=function(e){if(!sg(e))throw Error(Ct(40));return e._reactRootContainer?(zu(function(){ag(null,null,e,!1,function(){e._reactRootContainer=null,e[za]=null})}),!0):!1};Io.unstable_batchedUpdates=G1;Io.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!sg(r))throw Error(Ct(200));if(e==null||e._reactInternals===void 0)throw Error(Ct(38));return ag(e,t,r,!1,a)};Io.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=Io})(zP);const F3=rE(Of);var hm={},j3={get exports(){return hm},set exports(e){hm=e}};(function(e,t){(function(r,a){e.exports=a()})(pl,function(){var r,a,u;function f(l,w){if(!r)r=w;else if(!a)a=w;else{var E="var sharedChunk = {}; ("+r+")(sharedChunk); ("+a+")(sharedChunk);",T={};r(T),u=w(T),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}f(["exports"],function(l){var w=E;function E(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}function T(o,n,s,h){const p=new w(o,n,s,h);return function(v){return p.solve(v)}}E.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var _=0,I=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?_=s:I=s,s=.5*(I-_)+_;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};const S=T(.25,.1,.25,1);function C(o,n,s){return Math.min(s,Math.max(n,o))}function F(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function Y(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let H=1;function le(o,n){o.forEach(s=>{n[s]&&(n[s]=n[s].bind(n))})}function W(o,n,s){const h={};for(const p in o)h[p]=n.call(s||this,o[p],p,o);return h}function V(o,n,s){const h={};for(const p in o)n.call(s||this,o[p],p,o)&&(h[p]=o[p]);return h}function B(o){return Array.isArray(o)?o.map(B):typeof o=="object"&&o?W(o,B):o}const se={};function G(o){se[o]||(typeof console<"u"&&console.warn(o),se[o]=!0)}function j(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function b(o){let n=0;for(let s,h,p=0,v=o.length,_=v-1;p<v;_=p++)s=o[p],h=o[_],n+=(h.x-s.x)*(s.y+h.y);return n}function k(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function U(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const _=p||v;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n}let X,K,de=null;function ve(o){if(de==null){const n=o.navigator?o.navigator.userAgent:null;de=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return de}function we(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ee={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){const s=window.document.createElement("canvas"),h=s.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return s.width=o.width,s.height=o.height,h.drawImage(o,0,0,o.width,o.height),h.getImageData(-n,-n,o.width+2*n,o.height+2*n)},resolveURL:o=>(X||(X=document.createElement("a")),X.href=o,X.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(K==null&&(K=matchMedia("(prefers-reduced-motion: reduce)")),K.matches)}};var ie=ne;function ne(o,n){this.x=o,this.y=n}ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ne.convert=function(o){return o instanceof ne?o:Array.isArray(o)?new ne(o[0],o[1]):o};const te={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},he="mapbox-tiles";let _e,xe,je=500,Ie=50;function Pe(){typeof caches>"u"||_e||(_e=caches.open(he))}let $e=1/0;const Ne={supported:!1,testSupport:function(o){!yt&&at&&(Pt?ht(o):qe=o)}};let qe,at,yt=!1,Pt=!1;function ht(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,at),o.isContextLost())return;Ne.supported=!0}catch{}o.deleteTexture(n),yt=!0}typeof document<"u"&&(at=document.createElement("img"),at.onload=function(){qe&&ht(qe),qe=null,Pt=!0},at.onerror=function(){yt=!0,qe=null},at.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Et);class Nt extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const jt=k()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function cn(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:jt(),signal:s.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),((_,I,M)=>{if(v)return;const $=Date.now();fetch(h).then(Q=>Q.ok?((re,ue,me)=>{(o.type==="arrayBuffer"?re.arrayBuffer():o.type==="json"?re.json():re.text()).then(ye=>{v||(ue&&me&&function(Oe,Fe,He){if(Pe(),!_e)return;const nt={status:Fe.status,statusText:Fe.statusText,headers:new Headers};Fe.headers.forEach((lt,vt)=>nt.headers.set(vt,lt));const et=U(Fe.headers.get("Cache-Control")||"");et["no-store"]||(et["max-age"]&&nt.headers.set("Expires",new Date(He+1e3*et["max-age"]).toUTCString()),new Date(nt.headers.get("Expires")).getTime()-He<42e4||function(lt,vt){if(xe===void 0)try{new Response(new ReadableStream),xe=!0}catch{xe=!1}xe?vt(lt.body):lt.blob().then(vt)}(Fe,lt=>{const vt=new Response(lt,nt);Pe(),_e&&_e.then(dt=>dt.put(function(Bt){const tn=Bt.indexOf("?");return tn<0?Bt:Bt.slice(0,tn)}(Oe.url),vt)).catch(dt=>G(dt.message))}))}(h,ue,me),p=!0,n(null,ye,re.headers.get("Cache-Control"),re.headers.get("Expires")))}).catch(ye=>{v||n(new Error(ye.message))})})(Q,null,$):Q.blob().then(re=>n(new Nt(Q.status,Q.statusText,o.url,re)))).catch(Q=>{Q.code!==20&&n(new Error(Q.message))})})(),{cancel:()=>{v=!0,p||s.abort()}}}const Cn=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!k()){const h=o.url.substring(0,o.url.indexOf("://"));return(te.REGISTERED_PROTOCOLS[h]||cn)(o,n)}}if(!(/^file:/.test(s=o.url)||/^file:/.test(jt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return cn(o,n);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const _ in h.headers)v.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let _=v.response;if(h.type==="json")try{_=JSON.parse(v.response)}catch(I){return p(I)}p(null,_,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const _=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new Nt(v.status,v.statusText,h.url,_))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},bn=function(o,n){return Cn(Y(o,{type:"arrayBuffer"}),n)};function on(o){const n=window.document.createElement("a");return n.href=o,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const En="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ee,R;Ee=[],R=0;const O=function(o,n){if(Ne.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),R>=te.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Ee.push(v),v}R++;let s=!1;const h=()=>{if(!s)for(s=!0,R--;Ee.length&&R<te.MAX_PARALLEL_IMAGE_REQUESTS;){const v=Ee.shift(),{requestParameters:_,callback:I,cancelled:M}=v;M||(v.cancel=O(_,I).cancel)}},p=bn(o,(v,_,I,M)=>{h(),v?n(v):_&&function($,Q,re,ue){typeof createImageBitmap=="function"?function(me,ye){const Oe=new Blob([new Uint8Array(me)],{type:"image/png"});createImageBitmap(Oe).then(Fe=>{ye(null,Fe)}).catch(Fe=>{ye(new Error(`Could not load image because of ${Fe.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}($,Q):function(me,ye,Oe,Fe){const He=new Image;He.onload=()=>{ye(null,He),URL.revokeObjectURL(He.src),He.onload=null,window.requestAnimationFrame(()=>{He.src=En})},He.onerror=()=>ye(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const nt=new Blob([new Uint8Array(me)],{type:"image/png"});He.cacheControl=Oe,He.expires=Fe,He.src=me.byteLength?URL.createObjectURL(nt):En}($,Q,re,ue)}(_,n,I,M)});return{cancel:()=>{p.cancel(),h()}}};function pe(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function ze(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Ke{constructor(n,s={}){Y(this,s),this.type=n}}class ot extends Ke{constructor(n,s={}){super("error",Y({error:n},s))}}class ae{on(n,s){return this._listeners=this._listeners||{},pe(n,s,this._listeners),this}off(n,s){return ze(n,s,this._listeners),ze(n,s,this._oneTimeListeners),this}once(n,s){return this._oneTimeListeners=this._oneTimeListeners||{},pe(n,s,this._oneTimeListeners),this}fire(n,s){typeof n=="string"&&(n=new Ke(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const I of p)I.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const I of v)ze(h,I,this._oneTimeListeners),I.call(this,n);const _=this._eventedParent;_&&(Y(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof ot&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var A={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class z{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function be(o){const n=o.value;return n?[new z(o.key,n,"constants have been deprecated as of v8")]:[]}function Be(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}function Xe(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Qe(o){if(Array.isArray(o))return o.map(Qe);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Qe(o[s]);return n}return Xe(o)}class Wt extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Sn{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new Sn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const fn={kind:"null"},ft={kind:"number"},Mt={kind:"string"},un={kind:"boolean"},Ir={kind:"color"},Qr={kind:"object"},hn={kind:"value"},rr={kind:"collator"},wi={kind:"formatted"},_r={kind:"resolvedImage"};function Vr(o,n){return{kind:"array",itemType:o,N:n}}function Zt(o){if(o.kind==="array"){const n=Zt(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Gt=[fn,ft,Mt,un,Ir,wi,Qr,Vr(hn),_r];function Ht(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ht(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of Gt)if(!Ht(s,n))return null}}return`Expected ${Zt(o)} but found ${Zt(n)} instead.`}function An(o,n){return n.some(s=>s.kind===o.kind)}function zn(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}var ir,Gr={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function hi(o){return(o=Math.round(o))<0?0:o>255?255:o}function Ps(o){return hi(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function Ce(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function Z(o,n,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?o+(n-o)*s*6:2*s<1?n:3*s<2?o+(n-o)*(2/3-s)*6:o}try{ir={}.parseCSSColor=function(o){var n,s=o.replace(/ /g,"").toLowerCase();if(s in Gr)return Gr[s].slice();if(s[0]==="#")return s.length===4?(n=parseInt(s.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:s.length===7&&(n=parseInt(s.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var h=s.indexOf("("),p=s.indexOf(")");if(h!==-1&&p+1===s.length){var v=s.substr(0,h),_=s.substr(h+1,p-(h+1)).split(","),I=1;switch(v){case"rgba":if(_.length!==4)return null;I=Ce(_.pop());case"rgb":return _.length!==3?null:[Ps(_[0]),Ps(_[1]),Ps(_[2]),I];case"hsla":if(_.length!==4)return null;I=Ce(_.pop());case"hsl":if(_.length!==3)return null;var M=(parseFloat(_[0])%360+360)%360/360,$=Ce(_[1]),Q=Ce(_[2]),re=Q<=.5?Q*($+1):Q+$-Q*$,ue=2*Q-re;return[hi(255*Z(ue,re,M+1/3)),hi(255*Z(ue,re,M)),hi(255*Z(ue,re,M-1/3)),I];default:return null}}return null}}catch{}class J{constructor(n,s,h,p=1){this.r=n,this.g=s,this.b=h,this.a=p}static parse(n){if(!n)return;if(n instanceof J)return n;if(typeof n!="string")return;const s=ir(n);return s?new J(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[n,s,h,p]=this.toArray();return`rgba(${Math.round(n)},${Math.round(s)},${Math.round(h)},${p})`}toArray(){const{r:n,g:s,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*n/p,255*s/p,255*h/p,p]}}J.black=new J(0,0,0,1),J.white=new J(1,1,1,1),J.transparent=new J(0,0,0,0),J.red=new J(1,0,0,1);class ge{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ae{constructor(n,s,h,p,v){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class ke{constructor(n){this.sections=n}static fromString(n){return new ke([new Ae(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ke?n:ke.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const s of this.sections){if(s.image){n.push(["image",s.image.name]);continue}n.push(s.text);const h={};s.fontStack&&(h["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(h["font-scale"]=s.scale),s.textColor&&(h["text-color"]=["rgba"].concat(s.textColor.toArray())),n.push(h)}return n}}class Ge{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ge({name:n,available:!1}):null}serialize(){return["image",this.name]}}function De(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ue(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof J||o instanceof ge||o instanceof ke||o instanceof Ge)return!0;if(Array.isArray(o)){for(const n of o)if(!Ue(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Ue(o[n]))return!1;return!0}return!1}function We(o){if(o===null)return fn;if(typeof o=="string")return Mt;if(typeof o=="boolean")return un;if(typeof o=="number")return ft;if(o instanceof J)return Ir;if(o instanceof ge)return rr;if(o instanceof ke)return wi;if(o instanceof Ge)return _r;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=We(h);if(s){if(s===p)continue;s=hn;break}s=p}return Vr(s||hn,n)}return Qr}function st(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof J||o instanceof ke||o instanceof Ge?o.toString():JSON.stringify(o)}class mt{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ue(n[1]))return s.error("invalid value");const h=n[1];let p=We(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new mt(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof J?["rgba"].concat(this.value.toArray()):this.value instanceof ke?this.value.serialize():this.value}}class it{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Vt={string:Mt,number:ft,boolean:un,object:Qr};class It{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let I,M;if(n.length>2){const $=n[1];if(typeof $!="string"||!($ in Vt)||$==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);I=Vt[$],p++}else I=hn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);M=n[2],p++}h=Vr(I,M)}else h=Vt[v];const _=[];for(;p<n.length;p++){const I=s.parse(n[p],p,hn);if(!I)return null;_.push(I)}return new It(h,_)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Ht(this.type,We(h)))return h;if(s===this.args.length-1)throw new it(`Expected value to be of type ${Zt(this.type)}, but found ${Zt(We(h))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,s=[n.kind];if(n.kind==="array"){const h=n.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){s.push(h.kind);const p=n.N;(typeof p=="number"||this.args.length>1)&&s.push(p)}}return s.concat(this.args.map(h=>h.serialize()))}}class Ut{constructor(n){this.type=wi,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let _=1;_<=n.length-1;++_){const I=n[_];if(v&&typeof I=="object"&&!Array.isArray(I)){v=!1;let M=null;if(I["font-scale"]&&(M=s.parse(I["font-scale"],1,ft),!M))return null;let $=null;if(I["text-font"]&&($=s.parse(I["text-font"],1,Vr(Mt)),!$))return null;let Q=null;if(I["text-color"]&&(Q=s.parse(I["text-color"],1,Ir),!Q))return null;const re=p[p.length-1];re.scale=M,re.font=$,re.textColor=Q}else{const M=s.parse(n[_],1,hn);if(!M)return null;const $=M.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:M,scale:null,font:null,textColor:null})}}return new Ut(p)}evaluate(n){return new ke(this.sections.map(s=>{const h=s.content.evaluate(n);return We(h)===_r?new Ae("",h,null,null,null):new Ae(st(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const s of this.sections){n.push(s.content.serialize());const h={};s.scale&&(h["font-scale"]=s.scale.serialize()),s.font&&(h["text-font"]=s.font.serialize()),s.textColor&&(h["text-color"]=s.textColor.serialize()),n.push(h)}return n}}class rn{constructor(n){this.type=_r,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Mt);return h?new rn(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Ge.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const $t={"to-boolean":un,"to-color":Ir,"to-number":ft,"to-string":Mt};class _n{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=$t[h],v=[];for(let _=1;_<n.length;_++){const I=s.parse(n[_],_,hn);if(!I)return null;v.push(I)}return new _n(p,v)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof J)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:De(s[0],s[1],s[2],s[3]),!h))return new J(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new it(h||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new it(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?ke.fromString(st(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Ge.fromString(st(this.args[0].evaluate(n))):st(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ut([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new rn(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(s=>{n.push(s.serialize())}),n}}const Tn=["Unknown","Point","LineString","Polygon"];class xn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Tn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=J.parse(n)),s}}class wn{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,s){const h=n[0],p=wn.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,I=_.filter(([$])=>!Array.isArray($)||$.length===n.length-1);let M=null;for(const[$,Q]of I){M=new Va(s.registry,s.path,null,s.scope);const re=[];let ue=!1;for(let me=1;me<n.length;me++){const ye=n[me],Oe=Array.isArray($)?$[me-1]:$.type,Fe=M.parse(ye,1+re.length,Oe);if(!Fe){ue=!0;break}re.push(Fe)}if(!ue)if(Array.isArray($)&&$.length!==re.length)M.error(`Expected ${$.length} arguments, but found ${re.length} instead.`);else{for(let me=0;me<re.length;me++){const ye=Array.isArray($)?$[me]:$.type,Oe=re[me];M.concat(me+1).checkSubtype(ye,Oe.type)}if(M.errors.length===0)return new wn(h,v,Q,re)}}if(I.length===1)s.errors.push(...M.errors);else{const $=(I.length?I:_).map(([re])=>{return ue=re,Array.isArray(ue)?`(${ue.map(Zt).join(", ")})`:`(${Zt(ue.type)}...)`;var ue}).join(" | "),Q=[];for(let re=1;re<n.length;re++){const ue=s.parse(n[re],1+Q.length);if(!ue)return null;Q.push(Zt(ue.type))}s.error(`Expected arguments of type ${$}, but found (${Q.join(", ")}) instead.`)}return null}static register(n,s){wn.definitions=s;for(const h in s)n[h]=wn}}class nr{constructor(n,s,h){this.type=rr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,un);if(!p)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,un);if(!v)return null;let _=null;return h.locale&&(_=s.parse(h.locale,1,Mt),!_)?null:new nr(p,v,_)}evaluate(n){return new ge(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const dr=8192;function Jn(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function zo(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function ro(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*dr),Math.round(h*p*dr)]}function jl(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-s[0],_=o[1]-s[1];return h*_-v*p==0&&h*v<=0&&p*_<=0}function na(o,n){let s=!1;for(let _=0,I=n.length;_<I;_++){const M=n[_];for(let $=0,Q=M.length;$<Q-1;$++){if(jl(o,M[$],M[$+1]))return!1;(p=M[$])[1]>(h=o)[1]!=(v=M[$+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(s=!s)}}var h,p,v;return s}function Qn(o,n){for(let s=0;s<n.length;s++)if(na(o,n[s]))return!0;return!1}function io(o,n,s,h){const p=h[0]-s[0],v=h[1]-s[1],_=(o[0]-s[0])*v-p*(o[1]-s[1]),I=(n[0]-s[0])*v-p*(n[1]-s[1]);return _>0&&I<0||_<0&&I>0}function $u(o,n,s){for(const $ of s)for(let Q=0;Q<$.length-1;++Q)if((I=[(_=$[Q+1])[0]-(v=$[Q])[0],_[1]-v[1]])[0]*(M=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-I[1]*M[0]!=0&&io(h,p,v,_)&&io(v,_,h,p))return!0;var h,p,v,_,I,M;return!1}function Vu(o,n){for(let s=0;s<o.length;++s)if(!na(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if($u(o[s],o[s+1],n))return!1;return!0}function Gu(o,n){for(let s=0;s<n.length;s++)if(Vu(o,n[s]))return!0;return!1}function Ua(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let _=0;_<o[p].length;_++){const I=ro(o[p][_],s);Jn(n,I),v.push(I)}h.push(v)}return h}function Wu(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=Ua(o[p],n,s);h.push(v)}return h}function ks(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let v=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;v===0&&(v=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=v}Jn(n,o)}function Bl(o,n,s,h){const p=Math.pow(2,h.z)*dr,v=[h.x*dr,h.y*dr],_=[];for(const I of o)for(const M of I){const $=[M.x+v[0],M.y+v[1]];ks($,n,s,p),_.push($)}return _}function Zu(o,n,s,h){const p=Math.pow(2,h.z)*dr,v=[h.x*dr,h.y*dr],_=[];for(const M of o){const $=[];for(const Q of M){const re=[Q.x+v[0],Q.y+v[1]];Jn(n,re),$.push(re)}_.push($)}if(n[2]-n[0]<=p/2){(I=n)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const M of _)for(const $ of M)ks($,n,s,p)}var I;return _}class Wr{constructor(n,s){this.type=un,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ue(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Wr(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Wr(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Wr(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(h.type==="Polygon"){const I=Ua(h.coordinates,v,_),M=Bl(s.geometry(),p,v,_);if(!zo(p,v))return!1;for(const $ of M)if(!na($,I))return!1}if(h.type==="MultiPolygon"){const I=Wu(h.coordinates,v,_),M=Bl(s.geometry(),p,v,_);if(!zo(p,v))return!1;for(const $ of M)if(!Qn($,I))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(h.type==="Polygon"){const I=Ua(h.coordinates,v,_),M=Zu(s.geometry(),p,v,_);if(!zo(p,v))return!1;for(const $ of M)if(!Vu($,I))return!1}if(h.type==="MultiPolygon"){const I=Wu(h.coordinates,v,_),M=Zu(s.geometry(),p,v,_);if(!zo(p,v))return!1;for(const $ of M)if(!Gu($,I))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function $a(o){if(o instanceof wn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Wr)return!1;let n=!0;return o.eachChild(s=>{n&&!$a(s)&&(n=!1)}),n}function ra(o){if(o instanceof wn&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!ra(s)&&(n=!1)}),n}function ia(o,n){if(o instanceof wn&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!ia(h,n)&&(s=!1)}),s}class oa{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new oa(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Va{constructor(n,s=[],h,p=new Sn,v=[]){this.registry=n,this.path=s,this.key=s.map(_=>`[${_}]`).join(""),this.scope=p,this.errors=v,this.expectedType=h}parse(n,s,h,p,v={}){return s?this.concat(s,h,p)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(p,v,_){return _==="assert"?new It(v,[p]):_==="coerce"?new _n(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let _=v.parse(n,this);if(!_)return null;if(this.expectedType){const I=this.expectedType,M=_.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||M.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string"){if(this.checkSubtype(I,M))return null}else _=h(_,I,s.typeAnnotation||"coerce");else _=h(_,I,s.typeAnnotation||"assert")}if(!(_ instanceof mt)&&_.type.kind!=="resolvedImage"&&Ga(_)){const I=new xn;try{_=new mt(_.type,_.evaluate(I))}catch(M){return this.error(M.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Va(this.registry,p,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Wt(h,n))}checkSubtype(n,s){const h=Ht(n,s);return h&&this.error(h),h}}function Ga(o){if(o instanceof oa)return Ga(o.boundExpression);if(o instanceof wn&&o.name==="error"||o instanceof nr||o instanceof Wr)return!1;const n=o instanceof _n||o instanceof It;let s=!0;return o.eachChild(h=>{s=n?s&&Ga(h):s&&h instanceof mt}),!!s&&$a(o)&&ia(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Lo(o,n){const s=o.length-1;let h,p,v=0,_=s,I=0;for(;v<=_;)if(I=Math.floor((v+_)/2),h=o[I],p=o[I+1],h<=n){if(I===s||n<p)return I;v=I+1}else{if(!(h>n))throw new it("Input is not a number.");_=I-1}return 0}class Ms{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,ft);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<n.length;_+=2){const I=_===1?-1/0:n[_],M=n[_+1],$=_,Q=_+1;if(typeof I!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(p.length&&p[p.length-1][0]>=I)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const re=s.parse(M,Q,v);if(!re)return null;v=v||re.type,p.push([I,re])}return new Ms(v,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(n):h[Lo(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&n.push(this.labels[s]),n.push(this.outputs[s].serialize());return n}}function or(o,n,s){return o*(1-s)+n*s}var Wa=Object.freeze({__proto__:null,number:or,color:function(o,n,s){return new J(or(o.r,n.r,s),or(o.g,n.g,s),or(o.b,n.b,s),or(o.a,n.a,s))},array:function(o,n,s){return o.map((h,p)=>or(h,n[p],s))}});const Oo=.95047,Dl=1.08883,Hu=4/29,Nl=6/29,Ul=3*Nl*Nl,$l=Math.PI/180,_h=180/Math.PI;function Vl(o){return o>.008856451679035631?Math.pow(o,1/3):o/Ul+Hu}function Gl(o){return o>Nl?o*o*o:Ul*(o-Hu)}function sa(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function Wl(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Xu(o){const n=Wl(o.r),s=Wl(o.g),h=Wl(o.b),p=Vl((.4124564*n+.3575761*s+.1804375*h)/Oo),v=Vl((.2126729*n+.7151522*s+.072175*h)/1);return{l:116*v-16,a:500*(p-v),b:200*(v-Vl((.0193339*n+.119192*s+.9503041*h)/Dl)),alpha:o.a}}function Yu(o){let n=(o.l+16)/116,s=isNaN(o.a)?n:n+o.a/500,h=isNaN(o.b)?n:n-o.b/200;return n=1*Gl(n),s=Oo*Gl(s),h=Dl*Gl(h),new J(sa(3.2404542*s-1.5371385*n-.4985314*h),sa(-.969266*s+1.8760108*n+.041556*h),sa(.0556434*s-.2040259*n+1.0572252*h),o.alpha)}function jn(o,n,s){const h=n-o;return o+s*(h>180||h<-180?h-360*Math.round(h/360):h)}const zs={forward:Xu,reverse:Yu,interpolate:function(o,n,s){return{l:or(o.l,n.l,s),a:or(o.a,n.a,s),b:or(o.b,n.b,s),alpha:or(o.alpha,n.alpha,s)}}},aa={forward:function(o){const{l:n,a:s,b:h}=Xu(o),p=Math.atan2(h,s)*_h;return{h:p<0?p+360:p,c:Math.sqrt(s*s+h*h),l:n,alpha:o.a}},reverse:function(o){const n=o.h*$l,s=o.c;return Yu({l:o.l,a:Math.cos(n)*s,b:Math.sin(n)*s,alpha:o.alpha})},interpolate:function(o,n,s){return{h:jn(o.h,n.h,s),c:or(o.c,n.c,s),l:or(o.l,n.l,s),alpha:or(o.alpha,n.alpha,s)}}};var Zl=Object.freeze({__proto__:null,lab:zs,hcl:aa});class fi{constructor(n,s,h,p,v){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[_,I]of v)this.labels.push(_),this.outputs.push(I)}static interpolationFactor(n,s,h,p){let v=0;if(n.name==="exponential")v=Hl(s,n.base,h,p);else if(n.name==="linear")v=Hl(s,1,h,p);else if(n.name==="cubic-bezier"){const _=n.controlPoints;v=new w(_[0],_[1],_[2],_[3]).solve(Hl(s,1,h,p))}return v}static parse(n,s){let[h,p,v,..._]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const $=p[1];if(typeof $!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:$}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const $=p.slice(1);if($.length!==4||$.some(Q=>typeof Q!="number"||Q<0||Q>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:$}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,ft),!v)return null;const I=[];let M=null;h==="interpolate-hcl"||h==="interpolate-lab"?M=Ir:s.expectedType&&s.expectedType.kind!=="value"&&(M=s.expectedType);for(let $=0;$<_.length;$+=2){const Q=_[$],re=_[$+1],ue=$+3,me=$+4;if(typeof Q!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if(I.length&&I[I.length-1][0]>=Q)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ue);const ye=s.parse(re,me,M);if(!ye)return null;M=M||ye.type,I.push([Q,ye])}return M.kind==="number"||M.kind==="color"||M.kind==="array"&&M.itemType.kind==="number"&&typeof M.N=="number"?new fi(M,h,p,v,I):s.error(`Type ${Zt(M)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(n);const _=Lo(s,p),I=fi.interpolationFactor(this.interpolation,p,s[_],s[_+1]),M=h[_].evaluate(n),$=h[_+1].evaluate(n);return this.operator==="interpolate"?Wa[this.type.kind.toLowerCase()](M,$,I):this.operator==="interpolate-hcl"?aa.reverse(aa.interpolate(aa.forward(M),aa.forward($),I)):zs.reverse(zs.interpolate(zs.forward(M),zs.forward($),I))}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,n,this.input.serialize()];for(let h=0;h<this.labels.length;h++)s.push(this.labels[h],this.outputs[h].serialize());return s}}function Hl(o,n,s,h){const p=h-s,v=o-s;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class la{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const I of n.slice(1)){const M=s.parse(I,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!M)return null;h=h||M.type,v.push(M)}const _=p&&v.some(I=>Ht(p,I.type));return new la(_?hn:h,v)}evaluate(n){let s,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof Ge&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(s=>{n.push(s.serialize())}),n}}class Za{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const _=n[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const I=s.parse(n[v+1],v+1);if(!I)return null;h.push([_,I])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new Za(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[s,h]of this.bindings)n.push(s,h.serialize());return n.push(this.result.serialize()),n}}class Xl{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,ft),p=s.parse(n[2],2,Vr(s.expectedType||hn));return h&&p?new Xl(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new it(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new it(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new it(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Yl{constructor(n,s){this.type=un,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,hn);return h&&p?An(h.type,[un,Mt,ft,fn,hn])?new Yl(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zt(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!zn(s,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${Zt(We(s))} instead.`);if(!zn(h,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${Zt(We(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ha{constructor(n,s,h){this.type=ft,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,hn);if(!h||!p)return null;if(!An(h.type,[un,Mt,ft,fn,hn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zt(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,ft);return v?new Ha(h,p,v):null}return new Ha(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!zn(s,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${Zt(We(s))} instead.`);if(!zn(h,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${Zt(We(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Xa{constructor(n,s,h,p,v,_){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=_}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},_=[];for(let $=2;$<n.length-1;$+=2){let Q=n[$];const re=n[$+1];Array.isArray(Q)||(Q=[Q]);const ue=s.concat($);if(Q.length===0)return ue.error("Expected at least one branch label.");for(const ye of Q){if(typeof ye!="number"&&typeof ye!="string")return ue.error("Branch labels must be numbers or strings.");if(typeof ye=="number"&&Math.abs(ye)>Number.MAX_SAFE_INTEGER)return ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ye=="number"&&Math.floor(ye)!==ye)return ue.error("Numeric branch labels must be integer values.");if(h){if(ue.checkSubtype(h,We(ye)))return null}else h=We(ye);if(v[String(ye)]!==void 0)return ue.error("Branch labels must be unique.");v[String(ye)]=_.length}const me=s.parse(re,$,p);if(!me)return null;p=p||me.type,_.push(me)}const I=s.parse(n[1],1,hn);if(!I)return null;const M=s.parse(n[n.length-1],n.length-1,p);return M?I.type.kind!=="value"&&s.concat(1).checkSubtype(h,I.type)?null:new Xa(h,p,I,v,_,M):null}evaluate(n){const s=this.input.evaluate(n);return(We(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),h=[],p={};for(const _ of s){const I=p[this.cases[_]];I===void 0?(p[this.cases[_]]=h.length,h.push([this.cases[_],[_]])):h[I][1].push(_)}const v=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,I]of h)n.push(I.length===1?v(I[0]):I.map(v)),n.push(this.outputs[_].serialize());return n.push(this.otherwise.serialize()),n}}class Kl{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let _=1;_<n.length-1;_+=2){const I=s.parse(n[_],_,un);if(!I)return null;const M=s.parse(n[_+1],_+1,h);if(!M)return null;p.push([I,M]),h=h||M.type}const v=s.parse(n[n.length-1],n.length-1,h);return v?new Kl(h,p,v):null}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(s=>{n.push(s.serialize())}),n}}class Ls{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,ft);if(!h||!p)return null;if(!An(h.type,[Vr(hn),Mt,hn]))return s.error(`Expected first argument to be of type array or string, but found ${Zt(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,ft);return v?new Ls(h.type,h,p,v):null}return new Ls(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!zn(s,["string","array"]))throw new it(`Expected first argument to be of type array or string, but found ${Zt(We(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ku(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function qu(o,n,s,h){return h.compare(n,s)===0}function Os(o,n,s){const h=o!=="=="&&o!=="!=";return class dT{constructor(v,_,I){this.type=un,this.lhs=v,this.rhs=_,this.collator=I,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const I=v[0];let M=_.parse(v[1],1,hn);if(!M)return null;if(!Ku(I,M.type))return _.concat(1).error(`"${I}" comparisons are not supported for type '${Zt(M.type)}'.`);let $=_.parse(v[2],2,hn);if(!$)return null;if(!Ku(I,$.type))return _.concat(2).error(`"${I}" comparisons are not supported for type '${Zt($.type)}'.`);if(M.type.kind!==$.type.kind&&M.type.kind!=="value"&&$.type.kind!=="value")return _.error(`Cannot compare types '${Zt(M.type)}' and '${Zt($.type)}'.`);h&&(M.type.kind==="value"&&$.type.kind!=="value"?M=new It($.type,[M]):M.type.kind!=="value"&&$.type.kind==="value"&&($=new It(M.type,[$])));let Q=null;if(v.length===4){if(M.type.kind!=="string"&&$.type.kind!=="string"&&M.type.kind!=="value"&&$.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(Q=_.parse(v[3],3,rr),!Q)return null}return new dT(M,$,Q)}evaluate(v){const _=this.lhs.evaluate(v),I=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const M=We(_),$=We(I);if(M.kind!==$.kind||M.kind!=="string"&&M.kind!=="number")throw new it(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${M.kind}, ${$.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const M=We(_),$=We(I);if(M.kind!=="string"||$.kind!=="string")return n(v,_,I)}return this.collator?s(v,_,I,this.collator.evaluate(v)):n(v,_,I)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[o];return this.eachChild(_=>{v.push(_.serialize())}),v}}}const xh=Os("==",function(o,n,s){return n===s},qu),wh=Os("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!qu(0,n,s,h)}),bh=Os("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Ju=Os(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),ql=Os("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Eh=Os(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class Jl{constructor(n,s,h,p,v){this.type=Mt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,ft);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,Mt),!v))return null;let _=null;if(p.currency&&(_=s.parse(p.currency,1,Mt),!_))return null;let I=null;if(p["min-fraction-digits"]&&(I=s.parse(p["min-fraction-digits"],1,ft),!I))return null;let M=null;return p["max-fraction-digits"]&&(M=s.parse(p["max-fraction-digits"],1,ft),!M)?null:new Jl(h,v,_,I,M)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Ql{constructor(n){this.type=ft,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Zt(h.type)} instead.`):new Ql(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new it(`Expected value to be of type string or array, but found ${Zt(We(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(s=>{n.push(s.serialize())}),n}}const Rs={"==":xh,"!=":wh,">":Ju,"<":bh,">=":Eh,"<=":ql,array:It,at:Xl,boolean:It,case:Kl,coalesce:la,collator:nr,format:Ut,image:rn,in:Yl,"index-of":Ha,interpolate:fi,"interpolate-hcl":fi,"interpolate-lab":fi,length:Ql,let:Za,literal:mt,match:Xa,number:It,"number-format":Jl,object:It,slice:Ls,step:Ms,string:It,"to-boolean":_n,"to-color":_n,"to-number":_n,"to-string":_n,var:oa,within:Wr};function eu(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,_=De(n,s,h,v);if(_)throw new it(_);return new J(n/255*v,s/255*v,h/255*v,v)}function Qu(o,n){return o in n}function tu(o,n){const s=n[o];return s===void 0?null:s}function Qo(o){return{type:o}}function ec(o){return{result:"success",value:o}}function fo(o){return{result:"error",value:o}}function es(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function ts(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ya(o){return!!o.expression&&o.expression.interpolated}function kn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function pr(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Sh(o){return o}function Bn(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(Ya(n)?"exponential":"interval");if(s&&((o=Be({},o)).stops&&(o.stops=o.stops.map($=>[$[0],J.parse($[1])])),o.default=J.parse(o.default?o.default:n.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!Zl[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let _,I,M;if(v==="exponential")_=Ro;else if(v==="interval")_=mr;else if(v==="categorical"){_=sr,I=Object.create(null);for(const $ of o.stops)I[$[0]]=$[1];M=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);_=tc}if(h){const $={},Q=[];for(let me=0;me<o.stops.length;me++){const ye=o.stops[me],Oe=ye[0].zoom;$[Oe]===void 0&&($[Oe]={zoom:Oe,type:o.type,property:o.property,default:o.default,stops:[]},Q.push(Oe)),$[Oe].stops.push([ye[0].value,ye[1]])}const re=[];for(const me of Q)re.push([$[me].zoom,Bn($[me],n)]);const ue={name:"linear"};return{kind:"composite",interpolationType:ue,interpolationFactor:fi.interpolationFactor.bind(void 0,ue),zoomStops:re.map(me=>me[0]),evaluate:({zoom:me},ye)=>Ro({stops:re,base:o.base},n,me).evaluate(me,ye)}}if(p){const $=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:fi.interpolationFactor.bind(void 0,$),zoomStops:o.stops.map(Q=>Q[0]),evaluate:({zoom:Q})=>_(o,n,Q,I,M)}}return{kind:"source",evaluate($,Q){const re=Q&&Q.properties?Q.properties[o.property]:void 0;return re===void 0?ns(o.default,n.default):_(o,n,re,I,M)}}}function ns(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function sr(o,n,s,h,p){return ns(typeof s===p?h[s]:void 0,o.default,n.default)}function mr(o,n,s){if(kn(s)!=="number")return ns(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=Lo(o.stops.map(v=>v[0]),s);return o.stops[p][1]}function Ro(o,n,s){const h=o.base!==void 0?o.base:1;if(kn(s)!=="number")return ns(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=Lo(o.stops.map(Q=>Q[0]),s),_=function(Q,re,ue,me){const ye=me-ue,Oe=Q-ue;return ye===0?0:re===1?Oe/ye:(Math.pow(re,Oe)-1)/(Math.pow(re,ye)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),I=o.stops[v][1],M=o.stops[v+1][1];let $=Wa[n.type]||Sh;if(o.colorSpace&&o.colorSpace!=="rgb"){const Q=Zl[o.colorSpace];$=(re,ue)=>Q.reverse(Q.interpolate(Q.forward(re),Q.forward(ue),_))}return typeof I.evaluate=="function"?{evaluate(...Q){const re=I.evaluate.apply(void 0,Q),ue=M.evaluate.apply(void 0,Q);if(re!==void 0&&ue!==void 0)return $(re,ue,_)}}:$(I,M,_)}function tc(o,n,s){return n.type==="color"?s=J.parse(s):n.type==="formatted"?s=ke.fromString(s.toString()):n.type==="resolvedImage"?s=Ge.fromString(s.toString()):kn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0),ns(s,o.default,n.default)}wn.register(Rs,{error:[{kind:"error"},[Mt],(o,[n])=>{throw new it(n.evaluate(o))}],typeof:[Mt,[hn],(o,[n])=>Zt(We(n.evaluate(o)))],"to-rgba":[Vr(ft,4),[Ir],(o,[n])=>n.evaluate(o).toArray()],rgb:[Ir,[ft,ft,ft],eu],rgba:[Ir,[ft,ft,ft,ft],eu],has:{type:un,overloads:[[[Mt],(o,[n])=>Qu(n.evaluate(o),o.properties())],[[Mt,Qr],(o,[n,s])=>Qu(n.evaluate(o),s.evaluate(o))]]},get:{type:hn,overloads:[[[Mt],(o,[n])=>tu(n.evaluate(o),o.properties())],[[Mt,Qr],(o,[n,s])=>tu(n.evaluate(o),s.evaluate(o))]]},"feature-state":[hn,[Mt],(o,[n])=>tu(n.evaluate(o),o.featureState||{})],properties:[Qr,[],o=>o.properties()],"geometry-type":[Mt,[],o=>o.geometryType()],id:[hn,[],o=>o.id()],zoom:[ft,[],o=>o.globals.zoom],"heatmap-density":[ft,[],o=>o.globals.heatmapDensity||0],"line-progress":[ft,[],o=>o.globals.lineProgress||0],accumulated:[hn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[ft,Qo(ft),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[ft,Qo(ft),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:ft,overloads:[[[ft,ft],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[ft],(o,[n])=>-n.evaluate(o)]]},"/":[ft,[ft,ft],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[ft,[ft,ft],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[ft,[ft],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))],log2:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[ft,[ft],(o,[n])=>Math.sin(n.evaluate(o))],cos:[ft,[ft],(o,[n])=>Math.cos(n.evaluate(o))],tan:[ft,[ft],(o,[n])=>Math.tan(n.evaluate(o))],asin:[ft,[ft],(o,[n])=>Math.asin(n.evaluate(o))],acos:[ft,[ft],(o,[n])=>Math.acos(n.evaluate(o))],atan:[ft,[ft],(o,[n])=>Math.atan(n.evaluate(o))],min:[ft,Qo(ft),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[ft,Qo(ft),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[ft,[ft],(o,[n])=>Math.abs(n.evaluate(o))],round:[ft,[ft],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[ft,[ft],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[ft,[ft],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[un,[Mt,hn],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[un,[hn],(o,[n])=>o.id()===n.value],"filter-type-==":[un,[Mt],(o,[n])=>o.geometryType()===n.value],"filter-<":[un,[Mt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[un,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[un,[Mt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[un,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[un,[Mt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[un,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[un,[Mt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[un,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[un,[hn],(o,[n])=>n.value in o.properties()],"filter-has-id":[un,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[un,[Vr(Mt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[un,[Vr(hn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[un,[Mt,Vr(hn)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[un,[Mt,Vr(hn)],(o,[n,s])=>function(h,p,v,_){for(;v<=_;){const I=v+_>>1;if(p[I]===h)return!0;p[I]>h?_=I-1:v=I+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:un,overloads:[[[un,un],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Qo(un),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:un,overloads:[[[un,un],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Qo(un),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[un,[un],(o,[n])=>!n.evaluate(o)],"is-supported-script":[un,[Mt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Mt,[Mt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Mt,[Mt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Mt,Qo(hn),(o,n)=>n.map(s=>st(s.evaluate(o))).join("")],"resolved-locale":[Mt,[rr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class nu{constructor(n,s){this.expression=n,this._warningHistory={},this._evaluator=new xn,this._defaultValue=s?function(h){return h.type==="color"&&pr(h.default)?new J(0,0,0,0):h.type==="color"?J.parse(h.default)||null:h.default===void 0?null:h.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,v,_){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,v,_){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new it(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function rs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Rs}function ua(o,n){const s=new Va(Rs,[],n?function(p){const v={color:Ir,string:Mt,number:ft,enum:Mt,boolean:un,formatted:wi,resolvedImage:_r};return p.type==="array"?Vr(v[p.value]||hn,p.length):v[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?ec(new nu(h,n)):fo(s.errors)}class Ka{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!ra(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,_)}evaluate(n,s,h,p,v,_){return this._styleExpression.evaluate(n,s,h,p,v,_)}}class qa{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!ra(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,_)}evaluate(n,s,h,p,v,_){return this._styleExpression.evaluate(n,s,h,p,v,_)}interpolationFactor(n,s,h){return this.interpolationType?fi.interpolationFactor(this.interpolationType,n,s,h):0}}function ru(o,n){const s=ua(o,n);if(s.result==="error")return s;const h=s.value.expression,p=$a(h);if(!p&&!es(n))return fo([new Wt("","data expressions not supported")]);const v=ia(h,["zoom"]);if(!v&&!ts(n))return fo([new Wt("","zoom expressions not supported")]);const _=bi(h);return _||v?_ instanceof Wt?fo([_]):_ instanceof fi&&!Ya(n)?fo([new Wt("",'"interpolate" expressions cannot be used with this property')]):ec(_?new qa(p?"camera":"composite",s.value,_.labels,_ instanceof fi?_.interpolation:void 0):new Ka(p?"constant":"source",s.value)):fo([new Wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fo{constructor(n,s){this._parameters=n,this._specification=s,Be(this,Bn(this._parameters,this._specification))}static deserialize(n){return new Fo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function bi(o){let n=null;if(o instanceof Za)n=bi(o.result);else if(o instanceof la){for(const s of o.args)if(n=bi(s),n)break}else(o instanceof Ms||o instanceof fi)&&o.input instanceof wn&&o.input.name==="zoom"&&(n=o);return n instanceof Wt||o.eachChild(s=>{const h=bi(s);h instanceof Wt?n=h:!n&&h?n=new Wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Oi(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,_=o.styleSpec;let I=[];const M=kn(s);if(M!=="object")return[new z(n,s,`object expected, ${M} found`)];for(const $ in s){const Q=$.split(".")[0],re=h[Q]||h["*"];let ue;if(p[Q])ue=p[Q];else if(h[Q])ue=ar;else if(p["*"])ue=p["*"];else{if(!h["*"]){I.push(new z(n,s[$],`unknown property "${$}"`));continue}ue=ar}I=I.concat(ue({key:(n&&`${n}.`)+$,value:s[$],valueSpec:re,style:v,styleSpec:_,object:s,objectKey:$},s))}for(const $ in h)p[$]||h[$].required&&h[$].default===void 0&&s[$]===void 0&&I.push(new z(n,s,`missing required property "${$}"`));return I}function iu(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,_=o.arrayElementValidator||ar;if(kn(n)!=="array")return[new z(v,n,`array expected, ${kn(n)} found`)];if(s.length&&n.length!==s.length)return[new z(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new z(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let I={type:s.value,values:s.values};p.$version<7&&(I.function=s.function),kn(s.value)==="object"&&(I=s.value);let M=[];for(let $=0;$<n.length;$++)M=M.concat(_({array:n,arrayIndex:$,value:n[$],valueSpec:I,style:h,styleSpec:p,key:`${v}[${$}]`}));return M}function ca(o){const n=o.key,s=o.value,h=o.valueSpec;let p=kn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new z(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new z(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new z(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function nc(o){const n=o.valueSpec,s=Xe(o.value.type);let h,p,v,_={};const I=s!=="categorical"&&o.value.property===void 0,M=!I,$=kn(o.value.stops)==="array"&&kn(o.value.stops[0])==="array"&&kn(o.value.stops[0][0])==="object",Q=Oi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(s==="identity")return[new z(me.key,me.value,'identity function may not have a "stops" property')];let ye=[];const Oe=me.value;return ye=ye.concat(iu({key:me.key,value:Oe,valueSpec:me.valueSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),kn(Oe)==="array"&&Oe.length===0&&ye.push(new z(me.key,Oe,"array must have at least one stop")),ye},default:function(me){return ar({key:me.key,value:me.value,valueSpec:n,style:me.style,styleSpec:me.styleSpec})}}});return s==="identity"&&I&&Q.push(new z(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||Q.push(new z(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Ya(o.valueSpec)&&Q.push(new z(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(M&&!es(o.valueSpec)?Q.push(new z(o.key,o.value,"property functions not supported")):I&&!ts(o.valueSpec)&&Q.push(new z(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!$||o.value.property!==void 0||Q.push(new z(o.key,o.value,'"property" property is required')),Q;function re(me){let ye=[];const Oe=me.value,Fe=me.key;if(kn(Oe)!=="array")return[new z(Fe,Oe,`array expected, ${kn(Oe)} found`)];if(Oe.length!==2)return[new z(Fe,Oe,`array length 2 expected, length ${Oe.length} found`)];if($){if(kn(Oe[0])!=="object")return[new z(Fe,Oe,`object expected, ${kn(Oe[0])} found`)];if(Oe[0].zoom===void 0)return[new z(Fe,Oe,"object stop key must have zoom")];if(Oe[0].value===void 0)return[new z(Fe,Oe,"object stop key must have value")];if(v&&v>Xe(Oe[0].zoom))return[new z(Fe,Oe[0].zoom,"stop zoom values must appear in ascending order")];Xe(Oe[0].zoom)!==v&&(v=Xe(Oe[0].zoom),p=void 0,_={}),ye=ye.concat(Oi({key:`${Fe}[0]`,value:Oe[0],valueSpec:{zoom:{}},style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:ca,value:ue}}))}else ye=ye.concat(ue({key:`${Fe}[0]`,value:Oe[0],valueSpec:{},style:me.style,styleSpec:me.styleSpec},Oe));return rs(Qe(Oe[1]))?ye.concat([new z(`${Fe}[1]`,Oe[1],"expressions are not allowed in function stops.")]):ye.concat(ar({key:`${Fe}[1]`,value:Oe[1],valueSpec:n,style:me.style,styleSpec:me.styleSpec}))}function ue(me,ye){const Oe=kn(me.value),Fe=Xe(me.value),He=me.value!==null?me.value:ye;if(h){if(Oe!==h)return[new z(me.key,He,`${Oe} stop domain type must match previous stop domain type ${h}`)]}else h=Oe;if(Oe!=="number"&&Oe!=="string"&&Oe!=="boolean")return[new z(me.key,He,"stop domain value must be a number, string, or boolean")];if(Oe!=="number"&&s!=="categorical"){let nt=`number expected, ${Oe} found`;return es(n)&&s===void 0&&(nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(me.key,He,nt)]}return s!=="categorical"||Oe!=="number"||isFinite(Fe)&&Math.floor(Fe)===Fe?s!=="categorical"&&Oe==="number"&&p!==void 0&&Fe<p?[new z(me.key,He,"stop domain values must appear in ascending order")]:(p=Fe,s==="categorical"&&Fe in _?[new z(me.key,He,"stop domain values must be unique")]:(_[Fe]=!0,[])):[new z(me.key,He,`integer expected, found ${Fe}`)]}}function Ri(o){const n=(o.expressionContext==="property"?ru:ua)(Qe(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new z(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new z(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ra(s))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ra(s))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ia(s,["zoom","feature-state"]))return[new z(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!$a(s))return[new z(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function po(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Xe(s))===-1&&p.push(new z(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Xe(s))===-1&&p.push(new z(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Zr(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Zr(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const is={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fs(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Zr(o)||(o=os(o));const n=ua(o,is);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:ha(o)}}function Ja(o,n){return o<n?-1:o>n?1:0}function ha(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(ha(o[n]))return!0;return!1}function os(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?ss(o[1],o[2],"=="):n==="!="?as(ss(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?ss(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(os))):n==="all"?["all"].concat(o.slice(1).map(os)):n==="none"?["all"].concat(o.slice(1).map(os).map(as)):n==="in"?Ei(o[1],o.slice(2)):n==="!in"?as(Ei(o[1],o.slice(2))):n==="has"?mo(o[1]):n==="!has"?as(mo(o[1])):n!=="within"||o;var s}function ss(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ei(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Ja)]]:["filter-in-small",o,["literal",n]]}}function mo(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function as(o){return["!",o]}function jo(o){return Zr(Qe(o.value))?Ri(Be({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ls(o)}function ls(o){const n=o.value,s=o.key;if(kn(n)!=="array")return[new z(s,n,`array expected, ${kn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new z(s,n,"filter array must have at least 1 element")];switch(v=v.concat(po({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Xe(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Xe(n[1])==="$type"&&v.push(new z(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new z(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=kn(n[1]),p!=="string"&&v.push(new z(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let _=2;_<n.length;_++)p=kn(n[_]),Xe(n[1])==="$type"?v=v.concat(po({key:`${s}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new z(`${s}[${_}]`,n[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)v=v.concat(ls({key:`${s}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=kn(n[1]),n.length!==2?v.push(new z(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new z(`${s}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=kn(n[1]),n.length!==2?v.push(new z(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new z(`${s}[1]`,n[1],`object expected, ${p} found`))}return v}function ou(o,n){const s=o.key,h=o.style,p=o.styleSpec,v=o.value,_=o.objectKey,I=p[`${n}_${o.layerType}`];if(!I)return[];const M=_.match(/^(.*)-transition$/);if(n==="paint"&&M&&I[M[1]]&&I[M[1]].transition)return ar({key:s,value:v,valueSpec:p.transition,style:h,styleSpec:p});const $=o.valueSpec||I[_];if(!$)return[new z(s,v,`unknown property "${_}"`)];let Q;if(kn(v)==="string"&&es($)&&!$.tokens&&(Q=/^{([^}]+)}$/.exec(v)))return[new z(s,v,`"${_}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Q[1])} }\`.`)];const re=[];return o.layerType==="symbol"&&(_==="text-field"&&h&&!h.glyphs&&re.push(new z(s,v,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&pr(Qe(v))&&Xe(v.type)==="identity"&&re.push(new z(s,v,'"text-font" does not support identity functions'))),re.concat(ar({key:o.key,value:v,valueSpec:$,style:h,styleSpec:p,expressionContext:"property",propertyType:n,propertyKey:_}))}function js(o){return ou(o,"paint")}function su(o){return ou(o,"layout")}function au(o){let n=[];const s=o.value,h=o.key,p=o.style,v=o.styleSpec;s.type||s.ref||n.push(new z(h,s,'either "type" or "ref" is required'));let _=Xe(s.type);const I=Xe(s.ref);if(s.id){const M=Xe(s.id);for(let $=0;$<o.arrayIndex;$++){const Q=p.layers[$];Xe(Q.id)===M&&n.push(new z(h,s.id,`duplicate layer id "${s.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in s){let M;["type","source","source-layer","filter","layout"].forEach($=>{$ in s&&n.push(new z(h,s[$],`"${$}" is prohibited for ref layers`))}),p.layers.forEach($=>{Xe($.id)===I&&(M=$)}),M?M.ref?n.push(new z(h,s.ref,"ref cannot reference another ref layer")):_=Xe(M.type):n.push(new z(h,s.ref,`ref layer "${I}" not found`))}else if(_!=="background")if(s.source){const M=p.sources&&p.sources[s.source],$=M&&Xe(M.type);M?$==="vector"&&_==="raster"?n.push(new z(h,s.source,`layer "${s.id}" requires a raster source`)):$==="raster"&&_!=="raster"?n.push(new z(h,s.source,`layer "${s.id}" requires a vector source`)):$!=="vector"||s["source-layer"]?$==="raster-dem"&&_!=="hillshade"?n.push(new z(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||$==="geojson"&&M.lineMetrics||n.push(new z(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new z(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new z(h,s.source,`source "${s.source}" not found`))}else n.push(new z(h,s,'missing required property "source"'));return n=n.concat(Oi({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ar({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,object:s,objectKey:"type"}),filter:jo,layout:M=>Oi({layer:s,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":$=>su(Be({layerType:_},$))}}),paint:M=>Oi({layer:s,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":$=>js(Be({layerType:_},$))}})}})),n}function di(o){const n=o.value,s=o.key,h=kn(n);return h!=="string"?[new z(s,n,`string expected, ${h} found`)]:[]}const lu={promoteId:function({key:o,value:n}){if(kn(n)==="string")return di({key:o,value:n});{const s=[];for(const h in n)s.push(...di({key:`${o}.${h}`,value:n[h]}));return s}}};function rc(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style;if(!n.type)return[new z(s,n,'"type" is required')];const v=Xe(n.type);let _;switch(v){case"vector":case"raster":case"raster-dem":return _=Oi({key:s,value:n,valueSpec:h[`source_${v.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:lu}),_;case"geojson":if(_=Oi({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:lu}),n.cluster)for(const I in n.clusterProperties){const[M,$]=n.clusterProperties[I],Q=typeof M=="string"?[M,["accumulated"],["get",I]]:M;_.push(...Ri({key:`${s}.${I}.map`,value:$,expressionContext:"cluster-map"})),_.push(...Ri({key:`${s}.${I}.reduce`,value:Q,expressionContext:"cluster-reduce"}))}return _;case"video":return Oi({key:s,value:n,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return Oi({key:s,value:n,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new z(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return po({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:h})}}function Bs(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let v=[];const _=kn(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new z("light",n,`object expected, ${_} found`)]),v;for(const I in n){const M=I.match(/^(.*)-transition$/);v=v.concat(M&&h[M[1]]&&h[M[1]].transition?ar({key:I,value:n[I],valueSpec:s.transition,style:p,styleSpec:s}):h[I]?ar({key:I,value:n[I],valueSpec:h[I],style:p,styleSpec:s}):[new z(I,n[I],`unknown property "${I}"`)])}return v}const us={"*":()=>[],array:iu,boolean:function(o){const n=o.value,s=o.key,h=kn(n);return h!=="boolean"?[new z(s,n,`boolean expected, ${h} found`)]:[]},number:ca,color:function(o){const n=o.key,s=o.value,h=kn(s);return h!=="string"?[new z(n,s,`color expected, ${h} found`)]:ir(s)===null?[new z(n,s,`color expected, "${s}" found`)]:[]},constants:be,enum:po,filter:jo,function:nc,layer:au,object:Oi,source:rc,light:Bs,string:di,formatted:function(o){return di(o).length===0?[]:Ri(o)},resolvedImage:function(o){return di(o).length===0?[]:Ri(o)}};function ar(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return s.expression&&pr(Xe(n))?nc(o):s.expression&&rs(Qe(n))?Ri(o):s.type&&us[s.type]?us[s.type](o):Oi(Be({},o,{valueSpec:s.type?h[s.type]:s}))}function fa(o){const n=o.value,s=o.key,h=di(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new z(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new z(s,n,'"glyphs" url must include a "{range}" token'))),h}function Bo(o,n=A){let s=[];return s=s.concat(ar({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:fa,"*":()=>[]}})),o.constants&&(s=s.concat(be({key:"constants",value:o.constants,style:o,styleSpec:n}))),N(s)}function N(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function fe(o){return function(...n){return N(o.apply(this,n))}}Bo.source=fe(rc),Bo.light=fe(Bs),Bo.layer=fe(au),Bo.filter=fe(jo),Bo.paintProperty=fe(js),Bo.layoutProperty=fe(su);const Le=Bo,tt=Le.light,kt=Le.paintProperty,Tt=Le.layoutProperty;function Xt(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new ot(new Error(h.message))),s=!0;return s}class Yt{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(s=_[1])+2*(h=_[2]);for(let M=0;M<this.d*this.d;M++){const $=_[3+M],Q=_[3+M+1];p.push($===Q?null:_.subarray($,Q))}const I=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],I),this.bboxes=_.subarray(I),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,p,v){this._forEachCell(s,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,v,_){this.cells[v].push(_)}query(n,s,h,p,v){const _=this.min,I=this.max;if(n<=_&&s<=_&&I<=h&&I<=p&&!v)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(n,s,h,p,this._queryCell,M,{},v),M}}_queryCell(n,s,h,p,v,_,I,M){const $=this.cells[v];if($!==null){const Q=this.keys,re=this.bboxes;for(let ue=0;ue<$.length;ue++){const me=$[ue];if(I[me]===void 0){const ye=4*me;(M?M(re[ye+0],re[ye+1],re[ye+2],re[ye+3]):n<=re[ye+2]&&s<=re[ye+3]&&h>=re[ye+0]&&p>=re[ye+1])?(I[me]=!0,_.push(Q[me])):I[me]=!1}}}}_forEachCell(n,s,h,p,v,_,I,M){const $=this._convertToCellCoord(n),Q=this._convertToCellCoord(s),re=this._convertToCellCoord(h),ue=this._convertToCellCoord(p);for(let me=$;me<=re;me++)for(let ye=Q;ye<=ue;ye++){const Oe=this.d*ye+me;if((!M||M(this._convertFromCellCoord(me),this._convertFromCellCoord(ye),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ye+1)))&&v.call(this,n,s,h,p,Oe,_,I,M))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let _=0;_<n.length;_++){const I=n[_];p[3+_]=v,p.set(I,v),v+=I.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Yt(n.buffer)}}const dn={};function xt(o,n,s={}){Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),dn[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}xt("Object",Object),xt("TransferableGridIndex",Yt),xt("Color",J),xt("Error",Error),xt("AJAXError",Nt),xt("ResolvedImage",Ge),xt("StylePropertyFunction",Fo),xt("StyleExpression",nu,{omit:["_evaluator"]}),xt("ZoomDependentExpression",qa),xt("ZoomConstantExpression",Ka),xt("CompoundExpression",wn,{omit:["_evaluate"]});for(const o in Rs)Rs[o]._classRegistryKey||xt(`Expression_${o}`,Rs[o]);function Dn(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Xn(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Dn(o)||we(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Xn(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");const p=s.serialize?s.serialize(o,n):{};if(!s.serialize){for(const v in o){if(!o.hasOwnProperty(v)||dn[h].omit.indexOf(v)>=0)continue;const _=o[v];p[v]=dn[h].shallow.indexOf(v)>=0?_:Xn(_,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function er(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Dn(o)||we(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(er);if(typeof o=="object"){const n=o.$name||"Object";if(!dn[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=dn[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=dn[n].shallow.indexOf(p)>=0?v:er(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Pr{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const wt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Fi(o){for(const n of o)if(Qa(n.charCodeAt(0)))return!0;return!1}function go(o){for(const n of o)if(!Do(n.charCodeAt(0)))return!1;return!0}function Do(o){return!(wt.Arabic(o)||wt["Arabic Supplement"](o)||wt["Arabic Extended-A"](o)||wt["Arabic Presentation Forms-A"](o)||wt["Arabic Presentation Forms-B"](o))}function Qa(o){return!(o!==746&&o!==747&&(o<4352||!(wt["Bopomofo Extended"](o)||wt.Bopomofo(o)||wt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||wt["CJK Compatibility Ideographs"](o)||wt["CJK Compatibility"](o)||wt["CJK Radicals Supplement"](o)||wt["CJK Strokes"](o)||!(!wt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||wt["CJK Unified Ideographs Extension A"](o)||wt["CJK Unified Ideographs"](o)||wt["Enclosed CJK Letters and Months"](o)||wt["Hangul Compatibility Jamo"](o)||wt["Hangul Jamo Extended-A"](o)||wt["Hangul Jamo Extended-B"](o)||wt["Hangul Jamo"](o)||wt["Hangul Syllables"](o)||wt.Hiragana(o)||wt["Ideographic Description Characters"](o)||wt.Kanbun(o)||wt["Kangxi Radicals"](o)||wt["Katakana Phonetic Extensions"](o)||wt.Katakana(o)&&o!==12540||!(!wt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!wt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||wt["Unified Canadian Aboriginal Syllabics"](o)||wt["Unified Canadian Aboriginal Syllabics Extended"](o)||wt["Vertical Forms"](o)||wt["Yijing Hexagram Symbols"](o)||wt["Yi Syllables"](o)||wt["Yi Radicals"](o))))}function cs(o){return!(Qa(o)||function(n){return!!(wt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||wt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||wt["Letterlike Symbols"](n)||wt["Number Forms"](n)||wt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||wt["Control Pictures"](n)&&n!==9251||wt["Optical Character Recognition"](n)||wt["Enclosed Alphanumerics"](n)||wt["Geometric Shapes"](n)||wt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||wt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||wt["CJK Symbols and Punctuation"](n)||wt.Katakana(n)||wt["Private Use Area"](n)||wt["CJK Compatibility Forms"](n)||wt["Small Form Variants"](n)||wt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function da(o){return o>=1424&&o<=2303||wt["Arabic Presentation Forms-A"](o)||wt["Arabic Presentation Forms-B"](o)}function bg(o,n){return!(!n&&da(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||wt.Khmer(o))}function Eg(o){for(const n of o)if(da(n.charCodeAt(0)))return!0;return!1}const Th="deferred",ic="loading",Ch="loaded";let Ah=null,Si="unavailable",Ds=null;const gd=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Si="error"),Ah&&Ah(o)};function Ih(){Ph.fire(new Ke("pluginStateChange",{pluginStatus:Si,pluginURL:Ds}))}const Ph=new ae,el=function(){return Si},yd=function(){if(Si!==Th||!Ds)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Si=ic,Ih(),Ds&&bn({url:Ds},o=>{o?gd(o):(Si=Ch,Ih())})},Ti={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Si===Ch||Ti.applyArabicShaping!=null,isLoading:()=>Si===ic,setState(o){Si=o.pluginStatus,Ds=o.pluginURL},isParsed:()=>Ti.applyArabicShaping!=null&&Ti.processBidirectionalText!=null&&Ti.processStyledBidirectionalText!=null,getPluginURL:()=>Ds};class lr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pr,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!bg(p.charCodeAt(0),h))return!1;return!0}(n,Ti.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class oc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(pr(h))return new Fo(h,p);if(rs(h)){const v=ru(h,p);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=h;return typeof h=="string"&&p.type==="color"&&(v=J.parse(h)),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class kh{constructor(n){this.property=n,this.value=new oc(n,void 0)}transitioned(n,s){return new vd(this.property,this.value,s,Y({},n.transition,this.transition),n.now)}untransitioned(){return new vd(this.property,this.value,null,{},0)}}class Mh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return B(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new kh(this._values[n].property)),this._values[n].value=new oc(this._values[n].property,s===null?void 0:B(s))}getTransition(n){return B(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new kh(this._values[n].property)),this._values[n].transition=B(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new _d(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new _d(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class vd{constructor(n,s,h,p,v){this.property=n,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,s,h),_=this.prior;if(_){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return _.possiblyEvaluate(n,s,h);{const I=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,s,h),v,function(M){if(M<=0)return 0;if(M>=1)return 1;const $=M*M,Q=$*M;return 4*(M<.5?Q:3*(M-$)+Q-.75)}(I))}}return v}}class _d{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new sc(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Sg{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return B(this._values[n].value)}setValue(n,s){this._values[n]=new oc(this._values[n].property,s===null?void 0:B(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new sc(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}}class No{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class sc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){return n.expression.evaluate(s)}interpolate(n,s,h){const p=Wa[this.specification.type];return p?p(n,s,h):n}}class ln{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new No(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new No(this,{kind:"constant",value:void 0},n.parameters);const p=Wa[this.specification.type];return p?new No(this,{kind:"constant",value:p(n.value.value,s.value.value,h)},n.parameters):n}evaluate(n,s,h,p,v,_){return n.kind==="constant"?n.value:n.evaluate(s,h,p,v,_)}}class tl extends ln{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new No(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p),_=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,I=this._calculate(_,_,_,s);return new No(this,{kind:"constant",value:I},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new No(this,{kind:"constant",value:v},s)}return new No(this,n.expression,s)}evaluate(n,s,h,p,v,_){if(n.kind==="source"){const I=n.evaluate(s,h,p,v,_);return this._calculate(I,I,I,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class ac{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new lr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new lr(Math.floor(s.zoom),s)),n.expression.evaluate(new lr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class uu{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class Ci{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new oc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new kh(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}xt("DataDrivenProperty",ln),xt("DataConstantProperty",qt),xt("CrossFadedDataDrivenProperty",tl),xt("CrossFadedProperty",ac),xt("ColorRampProperty",uu);const hs="-transition";class ji extends ae{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Sg(s.layout)),s.paint)){this._transitionablePaint=new Mh(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Tt,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(hs)?this._transitionablePaint.getTransition(n.slice(0,-hs.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(kt,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(hs))return this._transitionablePaint.setTransition(n.slice(0,-hs.length),s||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),I=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const M=this._transitionablePaint._values[n].value;return M.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(n,I,M)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),V(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,v={}){return(!v||v.validate!==!1)&&Xt(this,n.call(Le,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:A,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof No&&es(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const cu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class lc{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class xr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function wr(o,n=1){let s=0,h=0;return{members:o.map(p=>{const v=cu[p.type].BYTES_PER_ELEMENT,_=s=xd(s,Math.max(n,v)),I=p.components||1;return h=Math.max(h,v),s+=v*I,{name:p.name,type:p.type,components:I,offset:_}}),size:xd(s,Math.max(h,n)),alignment:n}}function xd(o,n){return Math.ceil(o/n)*n}class hu extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}hu.prototype.bytesPerElement=4,xt("StructArrayLayout2i4",hu);class uc extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const _=4*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=p,this.int16[_+3]=v,n}}uc.prototype.bytesPerElement=8,xt("StructArrayLayout4i8",uc);class fu extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_){const I=this.length;return this.resize(I+1),this.emplace(I,n,s,h,p,v,_)}emplace(n,s,h,p,v,_,I){const M=6*n;return this.int16[M+0]=s,this.int16[M+1]=h,this.int16[M+2]=p,this.int16[M+3]=v,this.int16[M+4]=_,this.int16[M+5]=I,n}}fu.prototype.bytesPerElement=12,xt("StructArrayLayout2i4i12",fu);class m extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_){const I=this.length;return this.resize(I+1),this.emplace(I,n,s,h,p,v,_)}emplace(n,s,h,p,v,_,I){const M=4*n,$=8*n;return this.int16[M+0]=s,this.int16[M+1]=h,this.uint8[$+4]=p,this.uint8[$+5]=v,this.uint8[$+6]=_,this.uint8[$+7]=I,n}}m.prototype.bytesPerElement=8,xt("StructArrayLayout2i4ub8",m);class i extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}i.prototype.bytesPerElement=8,xt("StructArrayLayout2f8",i);class c extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,I,M,$,Q){const re=this.length;return this.resize(re+1),this.emplace(re,n,s,h,p,v,_,I,M,$,Q)}emplace(n,s,h,p,v,_,I,M,$,Q,re){const ue=10*n;return this.uint16[ue+0]=s,this.uint16[ue+1]=h,this.uint16[ue+2]=p,this.uint16[ue+3]=v,this.uint16[ue+4]=_,this.uint16[ue+5]=I,this.uint16[ue+6]=M,this.uint16[ue+7]=$,this.uint16[ue+8]=Q,this.uint16[ue+9]=re,n}}c.prototype.bytesPerElement=20,xt("StructArrayLayout10ui20",c);class d extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,I,M,$,Q,re,ue){const me=this.length;return this.resize(me+1),this.emplace(me,n,s,h,p,v,_,I,M,$,Q,re,ue)}emplace(n,s,h,p,v,_,I,M,$,Q,re,ue,me){const ye=12*n;return this.int16[ye+0]=s,this.int16[ye+1]=h,this.int16[ye+2]=p,this.int16[ye+3]=v,this.uint16[ye+4]=_,this.uint16[ye+5]=I,this.uint16[ye+6]=M,this.uint16[ye+7]=$,this.int16[ye+8]=Q,this.int16[ye+9]=re,this.int16[ye+10]=ue,this.int16[ye+11]=me,n}}d.prototype.bytesPerElement=24,xt("StructArrayLayout4i4ui4i24",d);class y extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}y.prototype.bytesPerElement=12,xt("StructArrayLayout3f12",y);class x extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}x.prototype.bytesPerElement=4,xt("StructArrayLayout1ul4",x);class P extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,I,M,$){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,s,h,p,v,_,I,M,$)}emplace(n,s,h,p,v,_,I,M,$,Q){const re=10*n,ue=5*n;return this.int16[re+0]=s,this.int16[re+1]=h,this.int16[re+2]=p,this.int16[re+3]=v,this.int16[re+4]=_,this.int16[re+5]=I,this.uint32[ue+3]=M,this.uint16[re+8]=$,this.uint16[re+9]=Q,n}}P.prototype.bytesPerElement=20,xt("StructArrayLayout6i1ul2ui20",P);class L extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_){const I=this.length;return this.resize(I+1),this.emplace(I,n,s,h,p,v,_)}emplace(n,s,h,p,v,_,I){const M=6*n;return this.int16[M+0]=s,this.int16[M+1]=h,this.int16[M+2]=p,this.int16[M+3]=v,this.int16[M+4]=_,this.int16[M+5]=I,n}}L.prototype.bytesPerElement=12,xt("StructArrayLayout2i2i2i12",L);class D extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,p,v)}emplace(n,s,h,p,v,_){const I=4*n,M=8*n;return this.float32[I+0]=s,this.float32[I+1]=h,this.float32[I+2]=p,this.int16[M+6]=v,this.int16[M+7]=_,n}}D.prototype.bytesPerElement=16,xt("StructArrayLayout2f1f2i16",D);class q extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const _=12*n,I=3*n;return this.uint8[_+0]=s,this.uint8[_+1]=h,this.float32[I+1]=p,this.float32[I+2]=v,n}}q.prototype.bytesPerElement=12,xt("StructArrayLayout2ub2f12",q);class oe extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}oe.prototype.bytesPerElement=6,xt("StructArrayLayout3ui6",oe);class ce extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,I,M,$,Q,re,ue,me,ye,Oe,Fe,He){const nt=this.length;return this.resize(nt+1),this.emplace(nt,n,s,h,p,v,_,I,M,$,Q,re,ue,me,ye,Oe,Fe,He)}emplace(n,s,h,p,v,_,I,M,$,Q,re,ue,me,ye,Oe,Fe,He,nt){const et=24*n,lt=12*n,vt=48*n;return this.int16[et+0]=s,this.int16[et+1]=h,this.uint16[et+2]=p,this.uint16[et+3]=v,this.uint32[lt+2]=_,this.uint32[lt+3]=I,this.uint32[lt+4]=M,this.uint16[et+10]=$,this.uint16[et+11]=Q,this.uint16[et+12]=re,this.float32[lt+7]=ue,this.float32[lt+8]=me,this.uint8[vt+36]=ye,this.uint8[vt+37]=Oe,this.uint8[vt+38]=Fe,this.uint32[lt+10]=He,this.int16[et+22]=nt,n}}ce.prototype.bytesPerElement=48,xt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ce);class Se extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,_,I,M,$,Q,re,ue,me,ye,Oe,Fe,He,nt,et,lt,vt,dt,Bt,tn,zt,Lt,At,Dt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,n,s,h,p,v,_,I,M,$,Q,re,ue,me,ye,Oe,Fe,He,nt,et,lt,vt,dt,Bt,tn,zt,Lt,At,Dt)}emplace(n,s,h,p,v,_,I,M,$,Q,re,ue,me,ye,Oe,Fe,He,nt,et,lt,vt,dt,Bt,tn,zt,Lt,At,Dt,Ot){const bt=34*n,an=17*n;return this.int16[bt+0]=s,this.int16[bt+1]=h,this.int16[bt+2]=p,this.int16[bt+3]=v,this.int16[bt+4]=_,this.int16[bt+5]=I,this.int16[bt+6]=M,this.int16[bt+7]=$,this.uint16[bt+8]=Q,this.uint16[bt+9]=re,this.uint16[bt+10]=ue,this.uint16[bt+11]=me,this.uint16[bt+12]=ye,this.uint16[bt+13]=Oe,this.uint16[bt+14]=Fe,this.uint16[bt+15]=He,this.uint16[bt+16]=nt,this.uint16[bt+17]=et,this.uint16[bt+18]=lt,this.uint16[bt+19]=vt,this.uint16[bt+20]=dt,this.uint16[bt+21]=Bt,this.uint16[bt+22]=tn,this.uint32[an+12]=zt,this.float32[an+13]=Lt,this.float32[an+14]=At,this.float32[an+15]=Dt,this.float32[an+16]=Ot,n}}Se.prototype.bytesPerElement=68,xt("StructArrayLayout8i15ui1ul4f68",Se);class Me extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}Me.prototype.bytesPerElement=4,xt("StructArrayLayout1f4",Me);class Te extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,n}}Te.prototype.bytesPerElement=6,xt("StructArrayLayout3i6",Te);class Re extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}Re.prototype.bytesPerElement=8,xt("StructArrayLayout1ul2ui8",Re);class Ve extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}Ve.prototype.bytesPerElement=4,xt("StructArrayLayout2ui4",Ve);class Ze extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}Ze.prototype.bytesPerElement=2,xt("StructArrayLayout1ui2",Ze);class Je extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const _=4*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=p,this.float32[_+3]=v,n}}Je.prototype.bytesPerElement=16,xt("StructArrayLayout4f16",Je);class Ye extends lc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ie(this.anchorPointX,this.anchorPointY)}}Ye.prototype.size=20;class ct extends P{get(n){return new Ye(this,n)}}xt("CollisionBoxArray",ct);class rt extends lc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}rt.prototype.size=48;class ut extends ce{get(n){return new rt(this,n)}}xt("PlacedSymbolArray",ut);class _t extends lc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}_t.prototype.size=68;class St extends Se{get(n){return new _t(this,n)}}xt("SymbolInstanceArray",St);class gt extends Me{getoffsetX(n){return this.float32[1*n+0]}}xt("GlyphOffsetArray",gt);class Kt extends Te{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}xt("SymbolLineVertexArray",Kt);class Ft extends lc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ft.prototype.size=8;class pn extends Re{get(n){return new Ft(this,n)}}xt("FeatureIndexArray",pn);class $n extends hu{}class In extends hu{}class Pn extends fu{}class br extends m{}class vn extends i{}class Ln extends c{}class gr extends d{}class ei extends y{}class Bi extends x{}class Di extends L{}class yo extends q{}class Ni extends oe{}class vo extends Ve{}const Ns=wr([{name:"a_pos",components:2,type:"Int16"}],4),{members:pa}=Ns;class Yn{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let v=this.segments[this.segments.length-1];return n>Yn.MAX_VERTEX_ARRAY_LENGTH&&G(`Max vertices per segment is ${Yn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Yn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new Yn([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Hr(o,n){return 256*(o=C(Math.floor(o),0,255))+C(Math.floor(n),0,255)}Yn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xt("SegmentVector",Yn);const Nn=wr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Fr={exports:{}},Ui={exports:{}};Ui.exports=function(o,n){var s,h,p,v,_,I,M,$;for(h=o.length-(s=3&o.length),p=n,_=3432918353,I=461845907,$=0;$<h;)M=255&o.charCodeAt($)|(255&o.charCodeAt(++$))<<8|(255&o.charCodeAt(++$))<<16|(255&o.charCodeAt(++$))<<24,++$,p=27492+(65535&(v=5*(65535&(p=(p^=M=(65535&(M=(M=(65535&M)*_+(((M>>>16)*_&65535)<<16)&4294967295)<<15|M>>>17))*I+(((M>>>16)*I&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(M=0,s){case 3:M^=(255&o.charCodeAt($+2))<<16;case 2:M^=(255&o.charCodeAt($+1))<<8;case 1:p^=M=(65535&(M=(M=(65535&(M^=255&o.charCodeAt($)))*_+(((M>>>16)*_&65535)<<16)&4294967295)<<15|M>>>17))*I+(((M>>>16)*I&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var ur={exports:{}};ur.exports=function(o,n){for(var s,h=o.length,p=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var ma=Ui.exports,ga=ur.exports;Fr.exports=ma,Fr.exports.murmur3=ma,Fr.exports.murmur2=ga;var nl=Fr.exports;class cc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(wd(n)),this.positions.push(s,h,p)}getPositions(n){const s=wd(n);let h=0,p=this.ids.length-1;for(;h<p;){const _=h+p>>1;this.ids[_]>=s?p=_:h=_+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return zh(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new cc;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function wd(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:nl(String(o))}function zh(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let v=s-1,_=h+1;for(;;){do v++;while(o[v]<p);do _--;while(o[_]>p);if(v>=_)break;Us(o,v,_),Us(n,3*v,3*_),Us(n,3*v+1,3*_+1),Us(n,3*v+2,3*_+2)}_-s<h-_?(zh(o,n,s,_),s=_+1):(zh(o,n,_+1,h),h=_)}}function Us(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}xt("FeaturePositionMap",cc);class ya{constructor(n,s){this.gl=n.gl,this.location=s}}class va extends ya{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class hc extends ya{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class U_ extends ya{constructor(n,s){super(n,s),this.current=J.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const xA=new Float32Array(16);function Tg(o){return[Hr(255*o.r,255*o.g),Hr(255*o.b,255*o.a)]}class Lh{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new U_(n,s):new va(n,s)}}class fc{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new hc(n,s):new va(n,s)}}class _a{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,v){const _=this.paintVertexArray.length,I=this.expression.evaluate(new lr(0),s,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(_,n,I)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const p=Tg(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fs{constructor(n,s,h,p,v,_){this.expression=n,this.uniformNames=s.map(I=>`u_${I}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(I=>({name:`a_${I}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,s,h,p,v){const _=this.expression.evaluate(new lr(this.zoom),s,{},p,[],v),I=this.expression.evaluate(new lr(this.zoom+1),s,{},p,[],v),M=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(M,n,_,I)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),_=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,v,_)}_setPaintValue(n,s,h,p){if(this.type==="color"){const v=Tg(h),_=Tg(p);for(let I=n;I<s;I++)this.paintVertexArray.emplace(I,v[0],v[1],_[0],_[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=C(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new va(n,s)}}class rl{constructor(n,s,h,p,v,_){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:v,mid:_,max:I}=h,M=p[v],$=p[_],Q=p[I];if(M&&$&&Q)for(let re=n;re<s;re++)this.zoomInPaintVertexArray.emplace(re,$.tl[0],$.tl[1],$.br[0],$.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],$.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,$.tl[0],$.tl[1],$.br[0],$.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],$.pixelRatio,Q.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Nn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Nn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $_{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const _=n.paint.get(v);if(!(_ instanceof No&&es(_.property.specification)))continue;const I=wA(v,n.type),M=_.value,$=_.property.specification.type,Q=_.property.useIntegerZoom,re=_.property.specification["property-type"],ue=re==="cross-faded"||re==="cross-faded-data-driven";if(M.kind==="constant")this.binders[v]=ue?new fc(M.value,I):new Lh(M.value,I,$),p.push(`/u_${v}`);else if(M.kind==="source"||ue){const me=V_(v,$,"source");this.binders[v]=ue?new rl(M,$,Q,s,me,n.id):new _a(M,I,$,me),p.push(`/a_${v}`)}else{const me=V_(v,$,"composite");this.binders[v]=new fs(M,I,$,Q,s,me),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof _a||s instanceof fs?s.maxValue:0}populatePaintArrays(n,s,h,p,v){for(const _ in this.binders){const I=this.binders[_];(I instanceof _a||I instanceof fs||I instanceof rl)&&I.populatePaintArray(n,s,h,p,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof fc&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,v){let _=!1;for(const I in n){const M=s.getPositions(I);for(const $ of M){const Q=h.feature($.index);for(const re in this.binders){const ue=this.binders[re];if((ue instanceof _a||ue instanceof fs||ue instanceof rl)&&ue.expression.isStateDependent===!0){const me=p.paint.get(re);ue.expression=me.value,ue.updatePaintArray($.start,$.end,Q,n[I],v),_=!0}}}}return _}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Lh||h instanceof fc)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof _a||h instanceof fs)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof rl)for(let p=0;p<Nn.members.length;p++)n.push(Nn.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Lh||h instanceof fc||h instanceof fs)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Lh||v instanceof fc||v instanceof fs){for(const _ of v.uniformNames)if(s[_]){const I=v.getBinding(n,s[_],_);h.push({name:_,property:p,binding:I})}}}return h}setUniforms(n,s,h,p){for(const{name:v,property:_,binding:I}of s)this.binders[_].setUniform(I,p,h.get(_),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof rl){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof _a||h instanceof fs)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof _a||h instanceof fs||h instanceof rl)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof _a||s instanceof fs||s instanceof rl)&&s.destroy()}}}class du{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new $_(p,s,h);this.needsUpload=!1,this._featureMap=new cc,this._bufferOffset=0}populatePaintArrays(n,s,h,p,v,_){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(n,s,p,v,_);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function wA(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function V_(o,n,s){const h={color:{source:i,composite:Je},number:{source:Me,composite:i}},p=function(v){return{"line-pattern":{source:Ln,composite:Ln},"fill-pattern":{source:Ln,composite:Ln},"fill-extrusion-pattern":{source:Ln,composite:Ln}}[v]}(o);return p&&p[s]||h[n][s]}xt("ConstantBinder",Lh),xt("CrossFadedConstantBinder",fc),xt("SourceExpressionBinder",_a),xt("CrossFadedCompositeBinder",rl),xt("CompositeExpressionBinder",fs),xt("ProgramConfiguration",$_,{omit:["_buffers"]}),xt("ProgramConfigurationSet",du);var Xr=8192;const Cg=Math.pow(2,14)-1,G_=-Cg-1;function pu(o){const n=Xr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let v=0;v<p.length;v++){const _=p[v],I=Math.round(_.x*n),M=Math.round(_.y*n);_.x=C(I,G_,Cg),_.y=C(M,G_,Cg),(I<_.x||I>_.x+1||M<_.y||M>_.y+1)&&G("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function mu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?pu(o):[]}}function bd(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class Ag{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new $n,this.indexArray=new Ni,this.segments=new Yn,this.programConfigurations=new du(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],v=[];let _=null,I=!1;p.type==="circle"&&(_=p.layout.get("circle-sort-key"),I=!_.isConstant());for(const{feature:M,id:$,index:Q,sourceLayerIndex:re}of n){const ue=this.layers[0]._featureFilter.needGeometry,me=mu(M,ue);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),me,h))continue;const ye=I?_.evaluate(me,{},h):void 0,Oe={id:$,properties:M.properties,type:M.type,sourceLayerIndex:re,index:Q,geometry:ue?me.geometry:pu(M),patterns:{},sortKey:ye};v.push(Oe)}I&&v.sort((M,$)=>M.sortKey-$.sortKey);for(const M of v){const{geometry:$,index:Q,sourceLayerIndex:re}=M,ue=n[Q].feature;this.addFeature(M,$,Q,h),s.featureIndex.insert(ue,$,Q,re,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,pa),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const v of s)for(const _ of v){const I=_.x,M=_.y;if(I<0||I>=Xr||M<0||M>=Xr)continue;const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),Q=$.vertexLength;bd(this.layoutVertexArray,I,M,-1,-1),bd(this.layoutVertexArray,I,M,1,-1),bd(this.layoutVertexArray,I,M,1,1),bd(this.layoutVertexArray,I,M,-1,1),this.indexArray.emplaceBack(Q,Q+1,Q+2),this.indexArray.emplaceBack(Q,Q+3,Q+2),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function W_(o,n){for(let s=0;s<o.length;s++)if(dc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(dc(o,n[s]))return!0;return!!Ig(o,n)}function bA(o,n,s){return!!dc(o,n)||!!Pg(n,o,s)}function Z_(o,n){if(o.length===1)return X_(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(dc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(X_(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Ig(o,n[s]))return!0;return!1}function EA(o,n,s){if(o.length>1){if(Ig(o,n))return!0;for(let h=0;h<n.length;h++)if(Pg(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Pg(o[h],n,s))return!0;return!1}function Ig(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let v=0;v<n.length-1;v++)if(SA(h,p,n[v],n[v+1]))return!0}return!1}function SA(o,n,s,h){return j(o,s,h)!==j(n,s,h)&&j(o,n,s)!==j(o,n,h)}function Pg(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(H_(o,n[p-1],n[p])<h)return!0;return!1}function H_(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function X_(o,n){let s,h,p,v=!1;for(let _=0;_<o.length;_++){s=o[_];for(let I=0,M=s.length-1;I<s.length;M=I++)h=s[I],p=s[M],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function dc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],_=o[p];v.y>n.y!=_.y>n.y&&n.x<(_.x-v.x)*(n.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function TA(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=j(o,n,s[0]);return v!==j(o,n,s[1])||v!==j(o,n,s[2])||v!==j(o,n,s[3])}function Oh(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Ed(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Sd(o,n,s,h,p){if(!n[0]&&!n[1])return o;const v=ie.convert(n)._mult(p);s==="viewport"&&v._rotate(-h);const _=[];for(let I=0;I<o.length;I++)_.push(o[I].sub(v));return _}xt("CircleBucket",Ag,{omit:["layers"]});const CA=new Ci({"circle-sort-key":new ln(A.layout_circle["circle-sort-key"])});var AA={paint:new Ci({"circle-radius":new ln(A.paint_circle["circle-radius"]),"circle-color":new ln(A.paint_circle["circle-color"]),"circle-blur":new ln(A.paint_circle["circle-blur"]),"circle-opacity":new ln(A.paint_circle["circle-opacity"]),"circle-translate":new qt(A.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(A.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(A.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(A.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ln(A.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ln(A.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ln(A.paint_circle["circle-stroke-opacity"])}),layout:CA},gu=typeof Float32Array<"u"?Float32Array:Array;function kg(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Y_(o,n,s){var h=n[0],p=n[1],v=n[2],_=n[3],I=n[4],M=n[5],$=n[6],Q=n[7],re=n[8],ue=n[9],me=n[10],ye=n[11],Oe=n[12],Fe=n[13],He=n[14],nt=n[15],et=s[0],lt=s[1],vt=s[2],dt=s[3];return o[0]=et*h+lt*I+vt*re+dt*Oe,o[1]=et*p+lt*M+vt*ue+dt*Fe,o[2]=et*v+lt*$+vt*me+dt*He,o[3]=et*_+lt*Q+vt*ye+dt*nt,o[4]=(et=s[4])*h+(lt=s[5])*I+(vt=s[6])*re+(dt=s[7])*Oe,o[5]=et*p+lt*M+vt*ue+dt*Fe,o[6]=et*v+lt*$+vt*me+dt*He,o[7]=et*_+lt*Q+vt*ye+dt*nt,o[8]=(et=s[8])*h+(lt=s[9])*I+(vt=s[10])*re+(dt=s[11])*Oe,o[9]=et*p+lt*M+vt*ue+dt*Fe,o[10]=et*v+lt*$+vt*me+dt*He,o[11]=et*_+lt*Q+vt*ye+dt*nt,o[12]=(et=s[12])*h+(lt=s[13])*I+(vt=s[14])*re+(dt=s[15])*Oe,o[13]=et*p+lt*M+vt*ue+dt*Fe,o[14]=et*v+lt*$+vt*me+dt*He,o[15]=et*_+lt*Q+vt*ye+dt*nt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var IA=Y_;function Mg(){var o=new gu(4);return gu!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0),o}function Td(o,n,s,h){var p=new gu(4);return p[0]=o,p[1]=n,p[2]=s,p[3]=h,p}function Cd(o,n,s){var h=n[0],p=n[1],v=n[2],_=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*_,o[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*_,o[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*_,o[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*_,o}function K_(o,n){const s=Cd(Mg(),Td(o.x,o.y,0,1),n);return new ie(s[0]/s[3],s[1]/s[3])}Mg();class q_ extends Ag{}xt("HeatmapBucket",q_,{omit:["layers"]});var PA={paint:new Ci({"heatmap-radius":new ln(A.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ln(A.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(A.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uu(A.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(A.paint_heatmap["heatmap-opacity"])})};function zg(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function J_(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=zg({},{width:n,height:s},h);Lg(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function Lg(o,n,s,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,I=n.data;for(let M=0;M<p.height;M++){const $=((s.y+M)*o.width+s.x)*v,Q=((h.y+M)*n.width+h.x)*v;for(let re=0;re<p.width*v;re++)I[Q+re]=_[$+re]}return n}class Rh{constructor(n,s){zg(this,n,1,s)}resize(n){J_(this,n,1)}clone(){return new Rh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){Lg(n,s,h,p,v,1)}}class _o{constructor(n,s){zg(this,n,4,s)}resize(n){J_(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new _o({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){Lg(n,s,h,p,v,4)}}function Q_(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new _o({width:s,height:h}),v=(_,I,M)=>{n[o.evaluationKey]=M;const $=o.expression.evaluate(n);p.data[_+I+0]=Math.floor(255*$.r/$.a),p.data[_+I+1]=Math.floor(255*$.g/$.a),p.data[_+I+2]=Math.floor(255*$.b/$.a),p.data[_+I+3]=Math.floor(255*$.a)};if(o.clips)for(let _=0,I=0;_<h;++_,I+=4*s)for(let M=0,$=0;M<s;M++,$+=4){const Q=M/(s-1),{start:re,end:ue}=o.clips[_];v(I,$,re*(1-Q)+ue*Q)}else for(let _=0,I=0;_<s;_++,I+=4)v(0,I,_/(s-1));return p}xt("AlphaImage",Rh),xt("RGBAImage",_o);var kA={paint:new Ci({"hillshade-illumination-direction":new qt(A.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(A.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(A.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(A.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(A.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(A.paint_hillshade["hillshade-accent-color"])})};const MA=wr([{name:"a_pos",components:2,type:"Int16"}],4),{members:zA}=MA;var Og={exports:{}};function Ad(o,n,s){s=s||2;var h,p,v,_,I,M,$,Q=n&&n.length,re=Q?n[0]*s:o.length,ue=ex(o,0,re,s,!0),me=[];if(!ue||ue.next===ue.prev)return me;if(Q&&(ue=function(Oe,Fe,He,nt){var et,lt,vt,dt=[];for(et=0,lt=Fe.length;et<lt;et++)(vt=ex(Oe,Fe[et]*nt,et<lt-1?Fe[et+1]*nt:Oe.length,nt,!1))===vt.next&&(vt.steiner=!0),dt.push(NA(vt));for(dt.sort(jA),et=0;et<dt.length;et++)He=il(He=BA(dt[et],He),He.next);return He}(o,n,ue,s)),o.length>80*s){h=v=o[0],p=_=o[1];for(var ye=s;ye<re;ye+=s)(I=o[ye])<h&&(h=I),(M=o[ye+1])<p&&(p=M),I>v&&(v=I),M>_&&(_=M);$=($=Math.max(v-h,_-p))!==0?1/$:0}return Fh(ue,me,s,h,p,$),me}function ex(o,n,s,h,p){var v,_;if(p===jg(o,n,s,h)>0)for(v=n;v<s;v+=h)_=rx(v,o[v],o[v+1],_);else for(v=s-h;v>=n;v-=h)_=rx(v,o[v],o[v+1],_);return _&&Id(_,_.next)&&(Bh(_),_=_.next),_}function il(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!Id(h,h.next)&&kr(h.prev,h,h.next)!==0)h=h.next;else{if(Bh(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function Fh(o,n,s,h,p,v,_){if(o){!_&&v&&function(Q,re,ue,me){var ye=Q;do ye.z===null&&(ye.z=Rg(ye.x,ye.y,re,ue,me)),ye.prevZ=ye.prev,ye.nextZ=ye.next,ye=ye.next;while(ye!==Q);ye.prevZ.nextZ=null,ye.prevZ=null,function(Oe){var Fe,He,nt,et,lt,vt,dt,Bt,tn=1;do{for(He=Oe,Oe=null,lt=null,vt=0;He;){for(vt++,nt=He,dt=0,Fe=0;Fe<tn&&(dt++,nt=nt.nextZ);Fe++);for(Bt=tn;dt>0||Bt>0&&nt;)dt!==0&&(Bt===0||!nt||He.z<=nt.z)?(et=He,He=He.nextZ,dt--):(et=nt,nt=nt.nextZ,Bt--),lt?lt.nextZ=et:Oe=et,et.prevZ=lt,lt=et;He=nt}lt.nextZ=null,tn*=2}while(vt>1)}(ye)}(o,h,p,v);for(var I,M,$=o;o.prev!==o.next;)if(I=o.prev,M=o.next,v?OA(o,h,p,v):LA(o))n.push(I.i/s),n.push(o.i/s),n.push(M.i/s),Bh(o),o=M.next,$=M.next;else if((o=M)===$){_?_===1?Fh(o=RA(il(o),n,s),n,s,h,p,v,2):_===2&&FA(o,n,s,h,p,v):Fh(il(o),n,s,h,p,v,1);break}}}function LA(o){var n=o.prev,s=o,h=o.next;if(kr(n,s,h)>=0)return!1;for(var p=o.next.next;p!==o.prev;){if(pc(n.x,n.y,s.x,s.y,h.x,h.y,p.x,p.y)&&kr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function OA(o,n,s,h){var p=o.prev,v=o,_=o.next;if(kr(p,v,_)>=0)return!1;for(var I=p.x>v.x?p.x>_.x?p.x:_.x:v.x>_.x?v.x:_.x,M=p.y>v.y?p.y>_.y?p.y:_.y:v.y>_.y?v.y:_.y,$=Rg(p.x<v.x?p.x<_.x?p.x:_.x:v.x<_.x?v.x:_.x,p.y<v.y?p.y<_.y?p.y:_.y:v.y<_.y?v.y:_.y,n,s,h),Q=Rg(I,M,n,s,h),re=o.prevZ,ue=o.nextZ;re&&re.z>=$&&ue&&ue.z<=Q;){if(re!==o.prev&&re!==o.next&&pc(p.x,p.y,v.x,v.y,_.x,_.y,re.x,re.y)&&kr(re.prev,re,re.next)>=0||(re=re.prevZ,ue!==o.prev&&ue!==o.next&&pc(p.x,p.y,v.x,v.y,_.x,_.y,ue.x,ue.y)&&kr(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;re&&re.z>=$;){if(re!==o.prev&&re!==o.next&&pc(p.x,p.y,v.x,v.y,_.x,_.y,re.x,re.y)&&kr(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;ue&&ue.z<=Q;){if(ue!==o.prev&&ue!==o.next&&pc(p.x,p.y,v.x,v.y,_.x,_.y,ue.x,ue.y)&&kr(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function RA(o,n,s){var h=o;do{var p=h.prev,v=h.next.next;!Id(p,v)&&tx(p,h,h.next,v)&&jh(p,v)&&jh(v,p)&&(n.push(p.i/s),n.push(h.i/s),n.push(v.i/s),Bh(h),Bh(h.next),h=o=v),h=h.next}while(h!==o);return il(h)}function FA(o,n,s,h,p,v){var _=o;do{for(var I=_.next.next;I!==_.prev;){if(_.i!==I.i&&UA(_,I)){var M=nx(_,I);return _=il(_,_.next),M=il(M,M.next),Fh(_,n,s,h,p,v),void Fh(M,n,s,h,p,v)}I=I.next}_=_.next}while(_!==o)}function jA(o,n){return o.x-n.x}function BA(o,n){var s=function(v,_){var I,M=_,$=v.x,Q=v.y,re=-1/0;do{if(Q<=M.y&&Q>=M.next.y&&M.next.y!==M.y){var ue=M.x+(Q-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(ue<=$&&ue>re){if(re=ue,ue===$){if(Q===M.y)return M;if(Q===M.next.y)return M.next}I=M.x<M.next.x?M:M.next}}M=M.next}while(M!==_);if(!I)return null;if($===re)return I;var me,ye=I,Oe=I.x,Fe=I.y,He=1/0;M=I;do $>=M.x&&M.x>=Oe&&$!==M.x&&pc(Q<Fe?$:re,Q,Oe,Fe,Q<Fe?re:$,Q,M.x,M.y)&&(me=Math.abs(Q-M.y)/($-M.x),jh(M,v)&&(me<He||me===He&&(M.x>I.x||M.x===I.x&&DA(I,M)))&&(I=M,He=me)),M=M.next;while(M!==ye);return I}(o,n);if(!s)return n;var h=nx(s,o),p=il(s,s.next);return il(h,h.next),n===s?p:n}function DA(o,n){return kr(o.prev,o,n.prev)<0&&kr(n.next,o,o.next)<0}function Rg(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-s)*p)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-h)*p)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function NA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function pc(o,n,s,h,p,v,_,I){return(p-_)*(n-I)-(o-_)*(v-I)>=0&&(o-_)*(h-I)-(s-_)*(n-I)>=0&&(s-_)*(v-I)-(p-_)*(h-I)>=0}function UA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&tx(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(jh(o,n)&&jh(n,o)&&function(s,h){var p=s,v=!1,_=(s.x+h.x)/2,I=(s.y+h.y)/2;do p.y>I!=p.next.y>I&&p.next.y!==p.y&&_<(p.next.x-p.x)*(I-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(o,n)&&(kr(o.prev,o,n.prev)||kr(o,n.prev,n))||Id(o,n)&&kr(o.prev,o,o.next)>0&&kr(n.prev,n,n.next)>0)}function kr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Id(o,n){return o.x===n.x&&o.y===n.y}function tx(o,n,s,h){var p=kd(kr(o,n,s)),v=kd(kr(o,n,h)),_=kd(kr(s,h,o)),I=kd(kr(s,h,n));return p!==v&&_!==I||!(p!==0||!Pd(o,s,n))||!(v!==0||!Pd(o,h,n))||!(_!==0||!Pd(s,o,h))||!(I!==0||!Pd(s,n,h))}function Pd(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function kd(o){return o>0?1:o<0?-1:0}function jh(o,n){return kr(o.prev,o,o.next)<0?kr(o,n,o.next)>=0&&kr(o,o.prev,n)>=0:kr(o,n,o.prev)<0||kr(o,o.next,n)<0}function nx(o,n){var s=new Fg(o.i,o.x,o.y),h=new Fg(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function rx(o,n,s,h){var p=new Fg(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Bh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Fg(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jg(o,n,s,h){for(var p=0,v=n,_=s-h;v<s;v+=h)p+=(o[_]-o[v])*(o[v+1]+o[_+1]),_=v;return p}Og.exports=Ad,Og.exports.default=Ad,Ad.deviation=function(o,n,s,h){var p=n&&n.length,v=Math.abs(jg(o,0,p?n[0]*s:o.length,s));if(p)for(var _=0,I=n.length;_<I;_++)v-=Math.abs(jg(o,n[_]*s,_<I-1?n[_+1]*s:o.length,s));var M=0;for(_=0;_<h.length;_+=3){var $=h[_]*s,Q=h[_+1]*s,re=h[_+2]*s;M+=Math.abs((o[$]-o[re])*(o[Q+1]-o[$+1])-(o[$]-o[Q])*(o[re+1]-o[$+1]))}return v===0&&M===0?0:Math.abs((M-v)/v)},Ad.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var _=0;_<n;_++)s.vertices.push(o[p][v][_]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var ix=Og.exports;function $A(o,n,s,h,p){ox(o,n,s||0,h||o.length-1,p||VA)}function ox(o,n,s,h,p){for(;h>s;){if(h-s>600){var v=h-s+1,_=n-s+1,I=Math.log(v),M=.5*Math.exp(2*I/3),$=.5*Math.sqrt(I*M*(v-M)/v)*(_-v/2<0?-1:1);ox(o,n,Math.max(s,Math.floor(n-_*M/v+$)),Math.min(h,Math.floor(n+(v-_)*M/v+$)),p)}var Q=o[n],re=s,ue=h;for(Dh(o,s,n),p(o[h],Q)>0&&Dh(o,s,h);re<ue;){for(Dh(o,re,ue),re++,ue--;p(o[re],Q)<0;)re++;for(;p(o[ue],Q)>0;)ue--}p(o[s],Q)===0?Dh(o,s,ue):Dh(o,++ue,h),ue<=n&&(s=ue+1),n<=ue&&(h=ue-1)}}function Dh(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function VA(o,n){return o<n?-1:o>n?1:0}function Bg(o,n){const s=o.length;if(s<=1)return[o];const h=[];let p,v;for(let _=0;_<s;_++){const I=b(o[_]);I!==0&&(o[_].area=Math.abs(I),v===void 0&&(v=I<0),v===I<0?(p&&h.push(p),p=[o[_]]):p.push(o[_]))}if(p&&h.push(p),n>1)for(let _=0;_<h.length;_++)h[_].length<=n||($A(h[_],n,1,h[_].length-1,GA),h[_]=h[_].slice(0,n));return h}function GA(o,n){return n.area-o.area}function Dg(o,n,s){const h=s.patternDependencies;let p=!1;for(const v of n){const _=v.paint.get(`${o}-pattern`);_.isConstant()||(p=!0);const I=_.constantOr(null);I&&(p=!0,h[I.to]=!0,h[I.from]=!0)}return p}function Ng(o,n,s,h,p){const v=p.patternDependencies;for(const _ of n){const I=_.paint.get(`${o}-pattern`).value;if(I.kind!=="constant"){let M=I.evaluate({zoom:h-1},s,{},p.availableImages),$=I.evaluate({zoom:h},s,{},p.availableImages),Q=I.evaluate({zoom:h+1},s,{},p.availableImages);M=M&&M.name?M.name:M,$=$&&$.name?$.name:$,Q=Q&&Q.name?Q.name:Q,v[M]=!0,v[$]=!0,v[Q]=!0,s.patterns[_.id]={min:M,mid:$,max:Q}}}return s}class Ug{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new In,this.indexArray=new Ni,this.indexArray2=new vo,this.programConfigurations=new du(n.layers,n.zoom),this.segments=new Yn,this.segments2=new Yn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Dg("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),_=[];for(const{feature:I,id:M,index:$,sourceLayerIndex:Q}of n){const re=this.layers[0]._featureFilter.needGeometry,ue=mu(I,re);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ue,h))continue;const me=v?p.evaluate(ue,{},h,s.availableImages):void 0,ye={id:M,properties:I.properties,type:I.type,sourceLayerIndex:Q,index:$,geometry:re?ue.geometry:pu(I),patterns:{},sortKey:me};_.push(ye)}v&&_.sort((I,M)=>I.sortKey-M.sortKey);for(const I of _){const{geometry:M,index:$,sourceLayerIndex:Q}=I;if(this.hasPattern){const re=Ng("fill",this.layers,I,this.zoom,s);this.patternFeatures.push(re)}else this.addFeature(I,M,$,h,{});s.featureIndex.insert(n[$].feature,M,$,Q,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,zA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,v){for(const _ of Bg(s,500)){let I=0;for(const me of _)I+=me.length;const M=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),$=M.vertexLength,Q=[],re=[];for(const me of _){if(me.length===0)continue;me!==_[0]&&re.push(Q.length/2);const ye=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Oe=ye.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Oe+me.length-1,Oe),Q.push(me[0].x),Q.push(me[0].y);for(let Fe=1;Fe<me.length;Fe++)this.layoutVertexArray.emplaceBack(me[Fe].x,me[Fe].y),this.indexArray2.emplaceBack(Oe+Fe-1,Oe+Fe),Q.push(me[Fe].x),Q.push(me[Fe].y);ye.vertexLength+=me.length,ye.primitiveLength+=me.length}const ue=ix(Q,re);for(let me=0;me<ue.length;me+=3)this.indexArray.emplaceBack($+ue[me],$+ue[me+1],$+ue[me+2]);M.vertexLength+=I,M.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}xt("FillBucket",Ug,{omit:["layers","patternFeatures"]});const WA=new Ci({"fill-sort-key":new ln(A.layout_fill["fill-sort-key"])});var ZA={paint:new Ci({"fill-antialias":new qt(A.paint_fill["fill-antialias"]),"fill-opacity":new ln(A.paint_fill["fill-opacity"]),"fill-color":new ln(A.paint_fill["fill-color"]),"fill-outline-color":new ln(A.paint_fill["fill-outline-color"]),"fill-translate":new qt(A.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(A.paint_fill["fill-translate-anchor"]),"fill-pattern":new tl(A.paint_fill["fill-pattern"])}),layout:WA};const HA=wr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:XA}=HA;var ol={},YA=ie,sx=mc;function mc(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(KA,this,n)}function KA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var _=p._keys[h.readVarint()],I=p._values[h.readVarint()];p.properties[_]=I}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function qA(o){for(var n,s,h=0,p=0,v=o.length,_=v-1;p<v;_=p++)h+=((s=o[_]).x-(n=o[p]).x)*(n.y+s.y);return h}mc.types=["Unknown","Point","LineString","Polygon"],mc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,v=0,_=0,I=[];o.pos<s;){if(p<=0){var M=o.readVarint();h=7&M,p=M>>3}if(p--,h===1||h===2)v+=o.readSVarint(),_+=o.readSVarint(),h===1&&(n&&I.push(n),n=[]),n.push(new YA(v,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&I.push(n),I},mc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,v=0,_=1/0,I=-1/0,M=1/0,$=-1/0;o.pos<n;){if(h<=0){var Q=o.readVarint();s=7&Q,h=Q>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<_&&(_=p),p>I&&(I=p),(v+=o.readSVarint())<M&&(M=v),v>$&&($=v);else if(s!==7)throw new Error("unknown command "+s)}return[_,M,I,$]},mc.prototype.toGeoJSON=function(o,n,s){var h,p,v=this.extent*Math.pow(2,s),_=this.extent*o,I=this.extent*n,M=this.loadGeometry(),$=mc.types[this.type];function Q(me){for(var ye=0;ye<me.length;ye++){var Oe=me[ye];me[ye]=[360*(Oe.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Oe.y+I)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(h=0;h<M.length;h++)re[h]=M[h][0];Q(M=re);break;case 2:for(h=0;h<M.length;h++)Q(M[h]);break;case 3:for(M=function(me){var ye=me.length;if(ye<=1)return[me];for(var Oe,Fe,He=[],nt=0;nt<ye;nt++){var et=qA(me[nt]);et!==0&&(Fe===void 0&&(Fe=et<0),Fe===et<0?(Oe&&He.push(Oe),Oe=[me[nt]]):Oe.push(me[nt]))}return Oe&&He.push(Oe),He}(M),h=0;h<M.length;h++)for(p=0;p<M[h].length;p++)Q(M[h][p])}M.length===1?M=M[0]:$="Multi"+$;var ue={type:"Feature",geometry:{type:$,coordinates:M},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var JA=sx,ax=lx;function lx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(QA,this,n),this.length=this._features.length}function QA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var _=h.readVarint()>>3;p=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return p}(s))}lx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new JA(this._pbf,n,this.extent,this._keys,this._values)};var eI=ax;function tI(o,n,s){if(o===3){var h=new eI(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}ol.VectorTile=function(o,n){this.layers=o.readFields(tI,{},n)},ol.VectorTileFeature=sx,ol.VectorTileLayer=ax;const nI=ol.VectorTileFeature.types,$g=Math.pow(2,13);function Nh(o,n,s,h,p,v,_,I){o.emplaceBack(n,s,2*Math.floor(h*$g)+_,p*$g*2,v*$g*2,Math.round(I))}class Vg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Pn,this.indexArray=new Ni,this.programConfigurations=new du(n.layers,n.zoom),this.segments=new Yn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Dg("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:_,sourceLayerIndex:I}of n){const M=this.layers[0]._featureFilter.needGeometry,$=mu(p,M);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),$,h))continue;const Q={id:v,sourceLayerIndex:I,index:_,geometry:M?$.geometry:pu(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(Ng("fill-extrusion",this.layers,Q,this.zoom,s)):this.addFeature(Q,Q.geometry,_,h,{}),s.featureIndex.insert(p,Q.geometry,_,I,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,XA),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p,v){for(const _ of Bg(s,500)){let I=0;for(const me of _)I+=me.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of _){if(me.length===0||iI(me))continue;let ye=0;for(let Oe=0;Oe<me.length;Oe++){const Fe=me[Oe];if(Oe>=1){const He=me[Oe-1];if(!rI(Fe,He)){M.vertexLength+4>Yn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const nt=Fe.sub(He)._perp()._unit(),et=He.dist(Fe);ye+et>32768&&(ye=0),Nh(this.layoutVertexArray,Fe.x,Fe.y,nt.x,nt.y,0,0,ye),Nh(this.layoutVertexArray,Fe.x,Fe.y,nt.x,nt.y,0,1,ye),ye+=et,Nh(this.layoutVertexArray,He.x,He.y,nt.x,nt.y,0,0,ye),Nh(this.layoutVertexArray,He.x,He.y,nt.x,nt.y,0,1,ye);const lt=M.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+I>Yn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),nI[n.type]!=="Polygon")continue;const $=[],Q=[],re=M.vertexLength;for(const me of _)if(me.length!==0){me!==_[0]&&Q.push($.length/2);for(let ye=0;ye<me.length;ye++){const Oe=me[ye];Nh(this.layoutVertexArray,Oe.x,Oe.y,0,0,1,1,0),$.push(Oe.x),$.push(Oe.y)}}const ue=ix($,Q);for(let me=0;me<ue.length;me+=3)this.indexArray.emplaceBack(re+ue[me],re+ue[me+2],re+ue[me+1]);M.primitiveLength+=ue.length/3,M.vertexLength+=I}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function rI(o,n){return o.x===n.x&&(o.x<0||o.x>Xr)||o.y===n.y&&(o.y<0||o.y>Xr)}function iI(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Xr)||o.every(n=>n.y<0)||o.every(n=>n.y>Xr)}xt("FillExtrusionBucket",Vg,{omit:["layers","features"]});var oI={paint:new Ci({"fill-extrusion-opacity":new qt(A["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ln(A["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(A["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(A["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tl(A["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ln(A["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ln(A["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(A["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Uh(o,n){return o.x*n.x+o.y*n.y}function ux(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const v=n[s],_=o[0],I=p.sub(h),M=v.sub(h),$=_.sub(h),Q=Uh(I,I),re=Uh(I,M),ue=Uh(M,M),me=Uh($,I),ye=Uh($,M),Oe=Q*ue-re*re,Fe=(ue*me-re*ye)/Oe,He=(Q*ye-re*me)/Oe,nt=h.z*(1-Fe-He)+p.z*Fe+v.z*He;if(isFinite(nt))return nt}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const sI=wr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:aI}=sI,lI=wr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:uI}=lI,cI=ol.VectorTileFeature.types,hI=Math.cos(Math.PI/180*37.5),cx=Math.pow(2,14)/.5;class Gg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new br,this.layoutVertexArray2=new vn,this.indexArray=new Ni,this.programConfigurations=new du(n.layers,n.zoom),this.segments=new Yn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Dg("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),_=[];for(const{feature:I,id:M,index:$,sourceLayerIndex:Q}of n){const re=this.layers[0]._featureFilter.needGeometry,ue=mu(I,re);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ue,h))continue;const me=v?p.evaluate(ue,{},h):void 0,ye={id:M,properties:I.properties,type:I.type,sourceLayerIndex:Q,index:$,geometry:re?ue.geometry:pu(I),patterns:{},sortKey:me};_.push(ye)}v&&_.sort((I,M)=>I.sortKey-M.sortKey);for(const I of _){const{geometry:M,index:$,sourceLayerIndex:Q}=I;if(this.hasPattern){const re=Ng("line",this.layers,I,this.zoom,s);this.patternFeatures.push(re)}else this.addFeature(I,M,$,h,{});s.featureIndex.insert(n[$].feature,M,$,Q,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,uI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,aI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,v){const _=this.layers[0].layout,I=_.get("line-join").evaluate(n,{}),M=_.get("line-cap"),$=_.get("line-miter-limit"),Q=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const re of s)this.addLine(re,n,I,M,$,Q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,s,h,p,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let He=0;He<n.length-1;He++)this.totalDistance+=n[He].dist(n[He+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=cI[s.type]==="Polygon";let M=n.length;for(;M>=2&&n[M-1].equals(n[M-2]);)M--;let $=0;for(;$<M-1&&n[$].equals(n[$+1]);)$++;if(M<(I?3:2))return;h==="bevel"&&(v=1.05);const Q=this.overscaling<=16?122880/(512*this.overscaling):0,re=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let ue,me,ye,Oe,Fe;this.e1=this.e2=-1,I&&(ue=n[M-2],Fe=n[$].sub(ue)._unit()._perp());for(let He=$;He<M;He++){if(ye=He===M-1?I?n[$+1]:void 0:n[He+1],ye&&n[He].equals(ye))continue;Fe&&(Oe=Fe),ue&&(me=ue),ue=n[He],Fe=ye?ye.sub(ue)._unit()._perp():Oe,Oe=Oe||Fe;let nt=Oe.add(Fe);nt.x===0&&nt.y===0||nt._unit();const et=Oe.x*Fe.x+Oe.y*Fe.y,lt=nt.x*Fe.x+nt.y*Fe.y,vt=lt!==0?1/lt:1/0,dt=2*Math.sqrt(2-2*lt),Bt=lt<hI&&me&&ye,tn=Oe.x*Fe.y-Oe.y*Fe.x>0;if(Bt&&He>$){const At=ue.dist(me);if(At>2*Q){const Dt=ue.sub(ue.sub(me)._mult(Q/At)._round());this.updateDistance(me,Dt),this.addCurrentVertex(Dt,Oe,0,0,re),me=Dt}}const zt=me&&ye;let Lt=zt?h:I?"butt":p;if(zt&&Lt==="round"&&(vt<_?Lt="miter":vt<=2&&(Lt="fakeround")),Lt==="miter"&&vt>v&&(Lt="bevel"),Lt==="bevel"&&(vt>2&&(Lt="flipbevel"),vt<v&&(Lt="miter")),me&&this.updateDistance(me,ue),Lt==="miter")nt._mult(vt),this.addCurrentVertex(ue,nt,0,0,re);else if(Lt==="flipbevel"){if(vt>100)nt=Fe.mult(-1);else{const At=vt*Oe.add(Fe).mag()/Oe.sub(Fe).mag();nt._perp()._mult(At*(tn?-1:1))}this.addCurrentVertex(ue,nt,0,0,re),this.addCurrentVertex(ue,nt.mult(-1),0,0,re)}else if(Lt==="bevel"||Lt==="fakeround"){const At=-Math.sqrt(vt*vt-1),Dt=tn?At:0,Ot=tn?0:At;if(me&&this.addCurrentVertex(ue,Oe,Dt,Ot,re),Lt==="fakeround"){const bt=Math.round(180*dt/Math.PI/20);for(let an=1;an<bt;an++){let nn=an/bt;if(nn!==.5){const Gn=nn-.5;nn+=nn*Gn*(nn-1)*((1.0904+et*(et*(3.55645-1.43519*et)-3.2452))*Gn*Gn+(.848013+et*(.215638*et-1.06021)))}const Rn=Fe.sub(Oe)._mult(nn)._add(Oe)._unit()._mult(tn?-1:1);this.addHalfVertex(ue,Rn.x,Rn.y,!1,tn,0,re)}}ye&&this.addCurrentVertex(ue,Fe,-Dt,-Ot,re)}else if(Lt==="butt")this.addCurrentVertex(ue,nt,0,0,re);else if(Lt==="square"){const At=me?1:-1;this.addCurrentVertex(ue,nt,At,At,re)}else Lt==="round"&&(me&&(this.addCurrentVertex(ue,Oe,0,0,re),this.addCurrentVertex(ue,Oe,1,1,re,!0)),ye&&(this.addCurrentVertex(ue,Fe,-1,-1,re,!0),this.addCurrentVertex(ue,Fe,0,0,re)));if(Bt&&He<M-1){const At=ue.dist(ye);if(At>2*Q){const Dt=ue.add(ye.sub(ue)._mult(Q/At)._round());this.updateDistance(ue,Dt),this.addCurrentVertex(Dt,Fe,0,0,re),ue=Dt}}}}addCurrentVertex(n,s,h,p,v,_=!1){const I=s.y*p-s.x,M=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,_,!1,h,v),this.addHalfVertex(n,I,M,_,!0,-p,v),this.distance>cx/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,s,h,p,v,_))}addHalfVertex({x:n,y:s},h,p,v,_,I,M){const $=.5*(this.lineClips?this.scaledDistance*(cx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(I===0?0:I<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Q=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Q),M.primitiveLength++),_?this.e2=Q:this.e1=Q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}xt("LineBucket",Gg,{omit:["layers","patternFeatures"]});const fI=new Ci({"line-cap":new qt(A.layout_line["line-cap"]),"line-join":new ln(A.layout_line["line-join"]),"line-miter-limit":new qt(A.layout_line["line-miter-limit"]),"line-round-limit":new qt(A.layout_line["line-round-limit"]),"line-sort-key":new ln(A.layout_line["line-sort-key"])});var hx={paint:new Ci({"line-opacity":new ln(A.paint_line["line-opacity"]),"line-color":new ln(A.paint_line["line-color"]),"line-translate":new qt(A.paint_line["line-translate"]),"line-translate-anchor":new qt(A.paint_line["line-translate-anchor"]),"line-width":new ln(A.paint_line["line-width"]),"line-gap-width":new ln(A.paint_line["line-gap-width"]),"line-offset":new ln(A.paint_line["line-offset"]),"line-blur":new ln(A.paint_line["line-blur"]),"line-dasharray":new ac(A.paint_line["line-dasharray"]),"line-pattern":new tl(A.paint_line["line-pattern"]),"line-gradient":new uu(A.paint_line["line-gradient"])}),layout:fI};const fx=new class extends ln{possiblyEvaluate(o,n){return n=new lr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,s,h){return n=Y({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,s,h)}}(hx.paint.properties["line-width"].specification);function dx(o,n){return n>0?n+2*o:o}fx.useIntegerZoom=!0;const dI=wr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pI=wr([{name:"a_projected_pos",components:3,type:"Float32"}],4);wr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const mI=wr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);wr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const px=wr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),gI=wr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function yI(o,n,s){return o.sections.forEach(h=>{h.text=function(p,v,_){const I=v.layout.get("text-transform").evaluate(_,{});return I==="uppercase"?p=p.toLocaleUpperCase():I==="lowercase"&&(p=p.toLocaleLowerCase()),Ti.applyArabicShaping&&(p=Ti.applyArabicShaping(p)),p}(h.text,n,s)}),o}wr([{name:"triangle",components:3,type:"Uint16"}]),wr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wr([{type:"Float32",name:"offsetX"}]),wr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const $h={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ti=24,Wg=Kn,mx=function(o,n,s,h,p){var v,_,I=8*p-h-1,M=(1<<I)-1,$=M>>1,Q=-7,re=s?p-1:0,ue=s?-1:1,me=o[n+re];for(re+=ue,v=me&(1<<-Q)-1,me>>=-Q,Q+=I;Q>0;v=256*v+o[n+re],re+=ue,Q-=8);for(_=v&(1<<-Q)-1,v>>=-Q,Q+=h;Q>0;_=256*_+o[n+re],re+=ue,Q-=8);if(v===0)v=1-$;else{if(v===M)return _?NaN:1/0*(me?-1:1);_+=Math.pow(2,h),v-=$}return(me?-1:1)*_*Math.pow(2,v-h)},gx=function(o,n,s,h,p,v){var _,I,M,$=8*v-p-1,Q=(1<<$)-1,re=Q>>1,ue=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=h?0:v-1,ye=h?1:-1,Oe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(I=isNaN(n)?1:0,_=Q):(_=Math.floor(Math.log(n)/Math.LN2),n*(M=Math.pow(2,-_))<1&&(_--,M*=2),(n+=_+re>=1?ue/M:ue*Math.pow(2,1-re))*M>=2&&(_++,M/=2),_+re>=Q?(I=0,_=Q):_+re>=1?(I=(n*M-1)*Math.pow(2,p),_+=re):(I=n*Math.pow(2,re-1)*Math.pow(2,p),_=0));p>=8;o[s+me]=255&I,me+=ye,I/=256,p-=8);for(_=_<<p|I,$+=p;$>0;o[s+me]=255&_,me+=ye,_/=256,$-=8);o[s+me-ye]|=128*Oe};function Kn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0,Kn.Fixed64=1,Kn.Bytes=2,Kn.Fixed32=5;var sl,Zg=4294967296,yx=1/Zg,vx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function xa(o){return o.type===Kn.Bytes?o.readVarint()+o.pos:o.pos+1}function gc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function _x(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function vI(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function _I(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function xI(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function wI(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function bI(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function EI(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function SI(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function TI(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function CI(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function Md(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function yc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function xx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function AI(o,n,s){o===1&&s.readMessage(II,n)}function II(o,n,s){if(o===3){const{id:h,bitmap:p,width:v,height:_,left:I,top:M,advance:$}=s.readMessage(PI,{});n.push({id:h,bitmap:new Rh({width:v+6,height:_+6},p),metrics:{width:v,height:_,left:I,top:M,advance:$}})}}function PI(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}function wx(o){let n=0,s=0;for(const _ of o)n+=_.w*_.h,s=Math.max(s,_.w);o.sort((_,I)=>I.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,v=0;for(const _ of o)for(let I=h.length-1;I>=0;I--){const M=h[I];if(!(_.w>M.w||_.h>M.h)){if(_.x=M.x,_.y=M.y,v=Math.max(v,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===M.w&&_.h===M.h){const $=h.pop();I<h.length&&(h[I]=$)}else _.h===M.h?(M.x+=_.w,M.w-=_.w):_.w===M.w?(M.y+=_.h,M.h-=_.h):(h.push({x:M.x+_.w,y:M.y,w:M.w-_.w,h:_.h}),M.y+=_.h,M.h-=_.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}Kn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Md(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=xx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Md(this.buf,this.pos)+Md(this.buf,this.pos+4)*Zg;return this.pos+=8,o},readSFixed64:function(){var o=Md(this.buf,this.pos)+xx(this.buf,this.pos+4)*Zg;return this.pos+=8,o},readFloat:function(){var o=mx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=mx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,v,_){var I,M,$=_.buf;if(I=(112&(M=$[_.pos++]))>>4,M<128||(I|=(127&(M=$[_.pos++]))<<3,M<128)||(I|=(127&(M=$[_.pos++]))<<10,M<128)||(I|=(127&(M=$[_.pos++]))<<17,M<128)||(I|=(127&(M=$[_.pos++]))<<24,M<128)||(I|=(1&(M=$[_.pos++]))<<31,M<128))return gc(p,I,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&vx?function(s,h,p){return vx.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var v="",_=h;_<p;){var I,M,$,Q=s[_],re=null,ue=Q>239?4:Q>223?3:Q>191?2:1;if(_+ue>p)break;ue===1?Q<128&&(re=Q):ue===2?(192&(I=s[_+1]))==128&&(re=(31&Q)<<6|63&I)<=127&&(re=null):ue===3?(M=s[_+2],(192&(I=s[_+1]))==128&&(192&M)==128&&((re=(15&Q)<<12|(63&I)<<6|63&M)<=2047||re>=55296&&re<=57343)&&(re=null)):ue===4&&(M=s[_+2],$=s[_+3],(192&(I=s[_+1]))==128&&(192&M)==128&&(192&$)==128&&((re=(15&Q)<<18|(63&I)<<12|(63&M)<<6|63&$)<=65535||re>=1114112)&&(re=null)),re===null?(re=65533,ue=1):re>65535&&(re-=65536,v+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),v+=String.fromCharCode(re),_+=ue}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Kn.Bytes)return o.push(this.readVarint(n));var s=xa(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSVarint());var n=xa(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Kn.Bytes)return o.push(this.readBoolean());var n=xa(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFloat());var n=xa(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Kn.Bytes)return o.push(this.readDouble());var n=xa(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed32());var n=xa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed32());var n=xa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed64());var n=xa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed64());var n=xa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Kn.Fixed32)this.pos+=4;else{if(n!==Kn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),yc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),yc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),yc(this.buf,-1&o,this.pos),yc(this.buf,Math.floor(o*yx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),yc(this.buf,-1&o,this.pos),yc(this.buf,Math.floor(o*yx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,_,I){I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,I.buf[I.pos]=127&(v>>>=7)}(h,0,s),function(v,_){var I=(7&v)<<4;_.buf[_.pos++]|=I|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var _,I,M=0;M<p.length;M++){if((_=p.charCodeAt(M))>55295&&_<57344){if(!I){_>56319||M+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):I=_;continue}if(_<56320){h[v++]=239,h[v++]=191,h[v++]=189,I=_;continue}_=I-55296<<10|_-56320|65536,I=null}else I&&(h[v++]=239,h[v++]=191,h[v++]=189,I=null);_<128?h[v++]=_:(_<2048?h[v++]=_>>6|192:(_<65536?h[v++]=_>>12|224:(h[v++]=_>>18|240,h[v++]=_>>12&63|128),h[v++]=_>>6&63|128),h[v++]=63&_|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&_x(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),gx(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),gx(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&_x(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Kn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,vI,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,_I,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,bI,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,xI,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,wI,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,EI,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,SI,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,TI,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,CI,n)},writeBytesField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};class Hg{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:v,content:_}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=_,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class bx{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,p,v);const{w:_,h:I}=wx(v),M=new _o({width:_||1,height:I||1});for(const $ in n){const Q=n[$],re=h[$].paddedRect;_o.copy(Q.data,M,{x:0,y:0},{x:re.x+1,y:re.y+1},Q.data)}for(const $ in s){const Q=s[$],re=p[$].paddedRect,ue=re.x+1,me=re.y+1,ye=Q.data.width,Oe=Q.data.height;_o.copy(Q.data,M,{x:0,y:0},{x:ue,y:me},Q.data),_o.copy(Q.data,M,{x:0,y:Oe-1},{x:ue,y:me-1},{width:ye,height:1}),_o.copy(Q.data,M,{x:0,y:0},{x:ue,y:me+Oe},{width:ye,height:1}),_o.copy(Q.data,M,{x:ye-1,y:0},{x:ue-1,y:me},{width:1,height:Oe}),_o.copy(Q.data,M,{x:0,y:0},{x:ue+ye,y:me},{width:1,height:Oe})}this.image=M,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const v=n[p],_={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(_),s[p]=new Hg(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,v]=n.tl;h.update(s.data,void 0,{x:p,y:v})}}xt("ImagePosition",Hg),xt("ImageAtlas",bx),l.WritingMode=void 0,(sl=l.WritingMode||(l.WritingMode={}))[sl.none=0]="none",sl[sl.horizontal=1]="horizontal",sl[sl.vertical=2]="vertical",sl[sl.horizontalOnly=3]="horizontalOnly";const zd=-17;class Vh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new Vh;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new Vh;return s.imageName=n,s}}class vc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new vc;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=p&&cs(p)&&!$h[n[h+1]]||v&&cs(v)&&!$h[n[h-1]]||!$h[n[h]]?n[h]:$h[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Od[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Od[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new vc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Vh.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void G("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Vh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):G("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ld(o,n,s,h,p,v,_,I,M,$,Q,re,ue,me,ye,Oe){const Fe=vc.fromFeature(o,p);let He;re===l.WritingMode.vertical&&Fe.verticalizePunctuation();const{processBidirectionalText:nt,processStyledBidirectionalText:et}=Ti;if(nt&&Fe.sections.length===1){He=[];const dt=nt(Fe.toString(),Xg(Fe,$,v,n,h,me,ye));for(const Bt of dt){const tn=new vc;tn.text=Bt,tn.sections=Fe.sections;for(let zt=0;zt<Bt.length;zt++)tn.sectionIndex.push(0);He.push(tn)}}else if(et){He=[];const dt=et(Fe.text,Fe.sectionIndex,Xg(Fe,$,v,n,h,me,ye));for(const Bt of dt){const tn=new vc;tn.text=Bt[0],tn.sectionIndex=Bt[1],tn.sections=Fe.sections,He.push(tn)}}else He=function(dt,Bt){const tn=[],zt=dt.text;let Lt=0;for(const At of Bt)tn.push(dt.substring(Lt,At)),Lt=At;return Lt<zt.length&&tn.push(dt.substring(Lt,zt.length)),tn}(Fe,Xg(Fe,$,v,n,h,me,ye));const lt=[],vt={positionedLines:lt,text:Fe.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(dt,Bt,tn,zt,Lt,At,Dt,Ot,bt,an,nn,Rn){let Gn=0,cr=zd,hr=0,ii=0;const jr=Ot==="right"?1:Ot==="left"?0:.5;let Br=0;for(const Dr of Lt){Dr.trim();const si=Dr.getMaxScale(),mi=(si-1)*ti,Ai={positionedGlyphs:[],lineOffset:0};dt.positionedLines[Br]=Ai;const Vi=Ai.positionedGlyphs;let Gi=0;if(!Dr.length()){cr+=At,++Br;continue}for(let qr=0;qr<Dr.length();qr++){const Mn=Dr.getSection(qr),oo=Dr.getSectionIndex(qr),ai=Dr.getCharCode(qr);let gi=0,$o=null,ds=null,ps=null,wa=ti;const Vo=!(bt===l.WritingMode.horizontal||!nn&&!Qa(ai)||nn&&(Od[ai]||(Kr=ai,wt.Arabic(Kr)||wt["Arabic Supplement"](Kr)||wt["Arabic Extended-A"](Kr)||wt["Arabic Presentation Forms-A"](Kr)||wt["Arabic Presentation Forms-B"](Kr))));if(Mn.imageName){const xo=zt[Mn.imageName];if(!xo)continue;ps=Mn.imageName,dt.iconsInText=dt.iconsInText||!0,ds=xo.paddedRect;const Wi=xo.displaySize;Mn.scale=Mn.scale*ti/Rn,$o={width:Wi[0],height:Wi[1],left:1,top:-3,advance:Vo?Wi[1]:Wi[0]},gi=mi+(ti-Wi[1]*Mn.scale),wa=$o.advance;const ba=Vo?Wi[0]*Mn.scale-ti*si:Wi[1]*Mn.scale-ti*si;ba>0&&ba>Gi&&(Gi=ba)}else{const xo=tn[Mn.fontStack],Wi=xo&&xo[ai];if(Wi&&Wi.rect)ds=Wi.rect,$o=Wi.metrics;else{const ba=Bt[Mn.fontStack],Zh=ba&&ba[ai];if(!Zh)continue;$o=Zh.metrics}gi=(si-Mn.scale)*ti}Vo?(dt.verticalizable=!0,Vi.push({glyph:ai,imageName:ps,x:Gn,y:cr+gi,vertical:Vo,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:oo,metrics:$o,rect:ds}),Gn+=wa*Mn.scale+an):(Vi.push({glyph:ai,imageName:ps,x:Gn,y:cr+gi,vertical:Vo,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:oo,metrics:$o,rect:ds}),Gn+=$o.advance*Mn.scale+an)}Vi.length!==0&&(hr=Math.max(Gn-an,hr),zI(Vi,0,Vi.length-1,jr,Gi)),Gn=0;const yr=At*si+Gi;Ai.lineOffset=Math.max(Gi,mi),cr+=yr,ii=Math.max(yr,ii),++Br}var Kr;const oi=cr-zd,{horizontalAlign:pi,verticalAlign:$i}=Yg(Dt);(function(Dr,si,mi,Ai,Vi,Gi,yr,qr,Mn){const oo=(si-mi)*Vi;let ai=0;ai=Gi!==yr?-qr*Ai-zd:(-Ai*Mn+.5)*yr;for(const gi of Dr)for(const $o of gi.positionedGlyphs)$o.x+=oo,$o.y+=ai})(dt.positionedLines,jr,pi,$i,hr,ii,At,oi,Lt.length),dt.top+=-$i*oi,dt.bottom=dt.top+oi,dt.left+=-pi*hr,dt.right=dt.left+hr}(vt,n,s,h,He,_,I,M,re,$,ue,Oe),!function(dt){for(const Bt of dt)if(Bt.positionedGlyphs.length!==0)return!1;return!0}(lt)&&vt}const Od={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},kI={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ex(o,n,s,h,p,v){if(n.imageName){const _=h[n.imageName];return _?_.displaySize[0]*n.scale*ti/v+p:0}{const _=s[n.fontStack],I=_&&_[o];return I?I.metrics.advance*n.scale+p:0}}function Sx(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function MI(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Tx(o,n,s,h,p,v){let _=null,I=Sx(n,s,p,v);for(const M of h){const $=Sx(n-M.x,s,p,v)+M.badness;$<=I&&(_=M,I=$)}return{index:o,x:n,priorBreak:_,badness:I}}function Cx(o){return o?Cx(o.priorBreak).concat(o.index):[]}function Xg(o,n,s,h,p,v,_){if(v!=="point")return[];if(!o)return[];const I=[],M=function(ue,me,ye,Oe,Fe,He){let nt=0;for(let et=0;et<ue.length();et++){const lt=ue.getSection(et);nt+=Ex(ue.getCharCode(et),lt,Oe,Fe,me,He)}return nt/Math.max(1,Math.ceil(nt/ye))}(o,n,s,h,p,_),$=o.text.indexOf("")>=0;let Q=0;for(let ue=0;ue<o.length();ue++){const me=o.getSection(ue),ye=o.getCharCode(ue);if(Od[ye]||(Q+=Ex(ye,me,h,p,n,_)),ue<o.length()-1){const Oe=!((re=ye)<11904||!(wt["Bopomofo Extended"](re)||wt.Bopomofo(re)||wt["CJK Compatibility Forms"](re)||wt["CJK Compatibility Ideographs"](re)||wt["CJK Compatibility"](re)||wt["CJK Radicals Supplement"](re)||wt["CJK Strokes"](re)||wt["CJK Symbols and Punctuation"](re)||wt["CJK Unified Ideographs Extension A"](re)||wt["CJK Unified Ideographs"](re)||wt["Enclosed CJK Letters and Months"](re)||wt["Halfwidth and Fullwidth Forms"](re)||wt.Hiragana(re)||wt["Ideographic Description Characters"](re)||wt["Kangxi Radicals"](re)||wt["Katakana Phonetic Extensions"](re)||wt.Katakana(re)||wt["Vertical Forms"](re)||wt["Yi Radicals"](re)||wt["Yi Syllables"](re)));(kI[ye]||Oe||me.imageName)&&I.push(Tx(ue+1,Q,M,I,MI(ye,o.getCharCode(ue+1),Oe&&$),!1))}}var re;return Cx(Tx(o.length(),Q,M,I,0,!0))}function Yg(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function zI(o,n,s,h,p){if(!h&&!p)return;const v=o[s],_=(o[s].x+v.metrics.advance*v.scale)*h;for(let I=n;I<=s;I++)o[I].x-=_,o[I].y+=p}function LI(o,n,s){const{horizontalAlign:h,verticalAlign:p}=Yg(s),v=n[0]-o.displaySize[0]*h,_=n[1]-o.displaySize[1]*p;return{image:o,top:_,bottom:_+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Ax(o,n,s,h,p,v){const _=o.image;let I;if(_.content){const Fe=_.content,He=_.pixelRatio||1;I=[Fe[0]/He,Fe[1]/He,_.displaySize[0]-Fe[2]/He,_.displaySize[1]-Fe[3]/He]}const M=n.left*v,$=n.right*v;let Q,re,ue,me;s==="width"||s==="both"?(me=p[0]+M-h[3],re=p[0]+$+h[1]):(me=p[0]+(M+$-_.displaySize[0])/2,re=me+_.displaySize[0]);const ye=n.top*v,Oe=n.bottom*v;return s==="height"||s==="both"?(Q=p[1]+ye-h[0],ue=p[1]+Oe+h[2]):(Q=p[1]+(ye+Oe-_.displaySize[1])/2,ue=Q+_.displaySize[1]),{image:_,top:Q,right:re,bottom:ue,left:me,collisionPadding:I}}const $s=128;function Kg(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new lr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let _=v;for(;_<h.length&&h[_]<o+1;)_++;_=Math.min(h.length-1,_);const I=h[v],M=h[_];return s.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:M,interpolationType:p}:{kind:"camera",minZoom:I,maxZoom:M,minSize:s.evaluate(new lr(I)),maxSize:s.evaluate(new lr(M)),interpolationType:p}}}function Ix(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/$s:o.kind==="composite"?or(h/$s,p/$s,s):n}function Px(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:_}=o,I=p?C(fi.interpolationFactor(p,n,v,_),0,1):0;o.kind==="camera"?h=or(o.minSize,o.maxSize,I):s=I}return{uSizeT:s,uSize:h}}var OI=Object.freeze({__proto__:null,getSizeData:Kg,evaluateSizeForFeature:Ix,evaluateSizeForZoom:Px,SIZE_PACK_FACTOR:$s});class al extends ie{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new al(this.x,this.y,this.angle,this.segment)}}function kx(o,n,s,h,p){if(n.segment===void 0)return!0;let v=n,_=n.segment+1,I=0;for(;I>-s/2;){if(_--,_<0)return!1;I-=o[_].dist(v),v=o[_]}I+=o[_].dist(o[_+1]),_++;const M=[];let $=0;for(;I<s/2;){const Q=o[_],re=o[_+1];if(!re)return!1;let ue=o[_-1].angleTo(Q)-Q.angleTo(re);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:I,angleDelta:ue}),$+=ue;I-M[0].distance>h;)$-=M.shift().angleDelta;if($>p)return!1;_++,I+=Q.dist(re)}return!0}function Mx(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function zx(o,n,s){return o?.6*n*s:0}function Lx(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function RI(o,n,s,h,p,v){const _=zx(s,p,v),I=Lx(s,h)*v;let M=0;const $=Mx(o)/2;for(let Q=0;Q<o.length-1;Q++){const re=o[Q],ue=o[Q+1],me=re.dist(ue);if(M+me>$){const ye=($-M)/me,Oe=or(re.x,ue.x,ye),Fe=or(re.y,ue.y,ye),He=new al(Oe,Fe,ue.angleTo(re),Q);return He._round(),!_||kx(o,He,I,_,n)?He:void 0}M+=me}}function FI(o,n,s,h,p,v,_,I,M){const $=zx(h,v,_),Q=Lx(h,p),re=Q*_,ue=o[0].x===0||o[0].x===M||o[0].y===0||o[0].y===M;return n-re<n/4&&(n=re+n/4),Ox(o,ue?n/2*I%n:(Q/2+2*v)*_*I%n,n,$,s,re,ue,!1,M)}function Ox(o,n,s,h,p,v,_,I,M){const $=v/2,Q=Mx(o);let re=0,ue=n-s,me=[];for(let ye=0;ye<o.length-1;ye++){const Oe=o[ye],Fe=o[ye+1],He=Oe.dist(Fe),nt=Fe.angleTo(Oe);for(;ue+s<re+He;){ue+=s;const et=(ue-re)/He,lt=or(Oe.x,Fe.x,et),vt=or(Oe.y,Fe.y,et);if(lt>=0&&lt<M&&vt>=0&&vt<M&&ue-$>=0&&ue+$<=Q){const dt=new al(lt,vt,nt,ye);dt._round(),h&&!kx(o,dt,v,h,p)||me.push(dt)}}re+=He}return I||me.length||_||(me=Ox(o,re/2,s,h,p,v,_,!0,M)),me}function Rx(o,n,s,h,p){const v=[];for(let _=0;_<o.length;_++){const I=o[_];let M;for(let $=0;$<I.length-1;$++){let Q=I[$],re=I[$+1];Q.x<n&&re.x<n||(Q.x<n?Q=new ie(n,Q.y+(n-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round():re.x<n&&(re=new ie(n,Q.y+(n-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round()),Q.y<s&&re.y<s||(Q.y<s?Q=new ie(Q.x+(s-Q.y)/(re.y-Q.y)*(re.x-Q.x),s)._round():re.y<s&&(re=new ie(Q.x+(s-Q.y)/(re.y-Q.y)*(re.x-Q.x),s)._round()),Q.x>=h&&re.x>=h||(Q.x>=h?Q=new ie(h,Q.y+(h-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round():re.x>=h&&(re=new ie(h,Q.y+(h-Q.x)/(re.x-Q.x)*(re.y-Q.y))._round()),Q.y>=p&&re.y>=p||(Q.y>=p?Q=new ie(Q.x+(p-Q.y)/(re.y-Q.y)*(re.x-Q.x),p)._round():re.y>=p&&(re=new ie(Q.x+(p-Q.y)/(re.y-Q.y)*(re.x-Q.x),p)._round()),M&&Q.equals(M[M.length-1])||(M=[Q],v.push(M)),M.push(re)))))}}return v}function Fx(o,n,s,h){const p=[],v=o.image,_=v.pixelRatio,I=v.paddedRect.w-2,M=v.paddedRect.h-2,$=o.right-o.left,Q=o.bottom-o.top,re=v.stretchX||[[0,I]],ue=v.stretchY||[[0,M]],me=(At,Dt)=>At+Dt[1]-Dt[0],ye=re.reduce(me,0),Oe=ue.reduce(me,0),Fe=I-ye,He=M-Oe;let nt=0,et=ye,lt=0,vt=Oe,dt=0,Bt=Fe,tn=0,zt=He;if(v.content&&h){const At=v.content;nt=Rd(re,0,At[0]),lt=Rd(ue,0,At[1]),et=Rd(re,At[0],At[2]),vt=Rd(ue,At[1],At[3]),dt=At[0]-nt,tn=At[1]-lt,Bt=At[2]-At[0]-et,zt=At[3]-At[1]-vt}const Lt=(At,Dt,Ot,bt)=>{const an=Fd(At.stretch-nt,et,$,o.left),nn=jd(At.fixed-dt,Bt,At.stretch,ye),Rn=Fd(Dt.stretch-lt,vt,Q,o.top),Gn=jd(Dt.fixed-tn,zt,Dt.stretch,Oe),cr=Fd(Ot.stretch-nt,et,$,o.left),hr=jd(Ot.fixed-dt,Bt,Ot.stretch,ye),ii=Fd(bt.stretch-lt,vt,Q,o.top),jr=jd(bt.fixed-tn,zt,bt.stretch,Oe),Br=new ie(an,Rn),Kr=new ie(cr,Rn),oi=new ie(cr,ii),pi=new ie(an,ii),$i=new ie(nn/_,Gn/_),Dr=new ie(hr/_,jr/_),si=n*Math.PI/180;if(si){const Vi=Math.sin(si),Gi=Math.cos(si),yr=[Gi,-Vi,Vi,Gi];Br._matMult(yr),Kr._matMult(yr),pi._matMult(yr),oi._matMult(yr)}const mi=At.stretch+At.fixed,Ai=Dt.stretch+Dt.fixed;return{tl:Br,tr:Kr,bl:pi,br:oi,tex:{x:v.paddedRect.x+1+mi,y:v.paddedRect.y+1+Ai,w:Ot.stretch+Ot.fixed-mi,h:bt.stretch+bt.fixed-Ai},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$i,pixelOffsetBR:Dr,minFontScaleX:Bt/_/$,minFontScaleY:zt/_/Q,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const At=jx(re,Fe,ye),Dt=jx(ue,He,Oe);for(let Ot=0;Ot<At.length-1;Ot++){const bt=At[Ot],an=At[Ot+1];for(let nn=0;nn<Dt.length-1;nn++)p.push(Lt(bt,Dt[nn],an,Dt[nn+1]))}}else p.push(Lt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:M+1}));return p}function Rd(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function jx(o,n,s){const h=[{fixed:-1,stretch:0}];for(const[p,v]of o){const _=h[h.length-1];h.push({fixed:p-_.stretch,stretch:_.stretch}),h.push({fixed:p-_.stretch,stretch:_.stretch+(v-p)})}return h.push({fixed:n+1,stretch:s}),h}function Fd(o,n,s,h){return o/n*s+h}function jd(o,n,s,h){return o-n*s/h}xt("Anchor",al);class Bd{constructor(n,s,h,p,v,_,I,M,$,Q){if(this.boxStartIndex=n.length,$){let re=_.top,ue=_.bottom;const me=_.collisionPadding;me&&(re-=me[1],ue+=me[3]);let ye=ue-re;ye>0&&(ye=Math.max(10,ye),this.circleDiameter=ye)}else{let re=_.top*I-M,ue=_.bottom*I+M,me=_.left*I-M,ye=_.right*I+M;const Oe=_.collisionPadding;if(Oe&&(me-=Oe[0]*I,re-=Oe[1]*I,ye+=Oe[2]*I,ue+=Oe[3]*I),Q){const Fe=new ie(me,re),He=new ie(ye,re),nt=new ie(me,ue),et=new ie(ye,ue),lt=Q*Math.PI/180;Fe._rotate(lt),He._rotate(lt),nt._rotate(lt),et._rotate(lt),me=Math.min(Fe.x,He.x,nt.x,et.x),ye=Math.max(Fe.x,He.x,nt.x,et.x),re=Math.min(Fe.y,He.y,nt.y,et.y),ue=Math.max(Fe.y,He.y,nt.y,et.y)}n.emplaceBack(s.x,s.y,me,re,ye,ue,h,p,v)}this.boxEndIndex=n.length}}class jI{constructor(n=[],s=BI){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const v=n-1>>1,_=s[v];if(h(p,_)>=0)break;s[n]=_,n=v}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,v=s[n];for(;n<p;){let _=1+(n<<1),I=s[_];const M=_+1;if(M<this.length&&h(s[M],I)<0&&(_=M,I=s[M]),h(I,v)>=0)break;s[n]=I,n=_}s[n]=v}}function BI(o,n){return o<n?-1:o>n?1:0}function DI(o,n=1,s=!1){let h=1/0,p=1/0,v=-1/0,_=-1/0;const I=o[0];for(let me=0;me<I.length;me++){const ye=I[me];(!me||ye.x<h)&&(h=ye.x),(!me||ye.y<p)&&(p=ye.y),(!me||ye.x>v)&&(v=ye.x),(!me||ye.y>_)&&(_=ye.y)}const M=Math.min(v-h,_-p);let $=M/2;const Q=new jI([],NI);if(M===0)return new ie(h,p);for(let me=h;me<v;me+=M)for(let ye=p;ye<_;ye+=M)Q.push(new _c(me+$,ye+$,$,o));let re=function(me){let ye=0,Oe=0,Fe=0;const He=me[0];for(let nt=0,et=He.length,lt=et-1;nt<et;lt=nt++){const vt=He[nt],dt=He[lt],Bt=vt.x*dt.y-dt.x*vt.y;Oe+=(vt.x+dt.x)*Bt,Fe+=(vt.y+dt.y)*Bt,ye+=3*Bt}return new _c(Oe/ye,Fe/ye,0,me)}(o),ue=Q.length;for(;Q.length;){const me=Q.pop();(me.d>re.d||!re.d)&&(re=me,s&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,ue)),me.max-re.d<=n||($=me.h/2,Q.push(new _c(me.p.x-$,me.p.y-$,$,o)),Q.push(new _c(me.p.x+$,me.p.y-$,$,o)),Q.push(new _c(me.p.x-$,me.p.y+$,$,o)),Q.push(new _c(me.p.x+$,me.p.y+$,$,o)),ue+=4)}return s&&(console.log(`num probes: ${ue}`),console.log(`best distance: ${re.d}`)),re.p}function NI(o,n){return n.max-o.max}function _c(o,n,s,h){this.p=new ie(o,n),this.h=s,this.d=function(p,v){let _=!1,I=1/0;for(let M=0;M<v.length;M++){const $=v[M];for(let Q=0,re=$.length,ue=re-1;Q<re;ue=Q++){const me=$[Q],ye=$[ue];me.y>p.y!=ye.y>p.y&&p.x<(ye.x-me.x)*(p.y-me.y)/(ye.y-me.y)+me.x&&(_=!_),I=Math.min(I,H_(p,me,ye))}}return(_?1:-1)*Math.sqrt(I)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const qg=Number.POSITIVE_INFINITY;function Bx(o,n){return n[1]!==qg?function(s,h,p){let v=0,_=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":_=p-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-p}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,_]}(o,n[0],n[1]):function(s,h){let p=0,v=0;h<0&&(h=0);const _=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":v=_-7;break;case"bottom-right":case"bottom-left":v=7-_;break;case"bottom":v=7-h;break;case"top":v=h-7}switch(s){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function Jg(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function UI(o,n,s,h,p,v,_,I,M,$,Q){let re=v.textMaxSize.evaluate(n,{});re===void 0&&(re=_);const ue=o.layers[0].layout,me=ue.get("icon-offset").evaluate(n,{},Q),ye=Nx(s.horizontal),Oe=_/24,Fe=o.tilePixelRatio*Oe,He=o.tilePixelRatio*re/24,nt=o.tilePixelRatio*I,et=o.tilePixelRatio*ue.get("symbol-spacing"),lt=ue.get("text-padding")*o.tilePixelRatio,vt=ue.get("icon-padding")*o.tilePixelRatio,dt=ue.get("text-max-angle")/180*Math.PI,Bt=ue.get("text-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",tn=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",zt=ue.get("symbol-placement"),Lt=et/2,At=ue.get("icon-text-fit");let Dt;h&&At!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Dt=Ax(h,s.vertical,At,ue.get("icon-text-fit-padding"),me,Oe)),ye&&(h=Ax(h,ye,At,ue.get("icon-text-fit-padding"),me,Oe)));const Ot=(bt,an)=>{an.x<0||an.x>=Xr||an.y<0||an.y>=Xr||function(nn,Rn,Gn,cr,hr,ii,jr,Br,Kr,oi,pi,$i,Dr,si,mi,Ai,Vi,Gi,yr,qr,Mn,oo,ai,gi,$o){const ds=nn.addToLineVertexArray(Rn,Gn);let ps,wa,Vo,xo,Wi=0,ba=0,Zh=0,nw=0,ly=-1,uy=-1;const Ea={};let rw=nl(""),cy=0,hy=0;if(Br._unevaluatedLayout.getValue("text-radial-offset")===void 0?[cy,hy]=Br.layout.get("text-offset").evaluate(Mn,{},gi).map(Zi=>Zi*ti):(cy=Br.layout.get("text-radial-offset").evaluate(Mn,{},gi)*ti,hy=qg),nn.allowVerticalPlacement&&cr.vertical){const Zi=Br.layout.get("text-rotate").evaluate(Mn,{},gi)+90;Vo=new Bd(Kr,Rn,oi,pi,$i,cr.vertical,Dr,si,mi,Zi),jr&&(xo=new Bd(Kr,Rn,oi,pi,$i,jr,Vi,Gi,mi,Zi))}if(hr){const Zi=Br.layout.get("icon-rotate").evaluate(Mn,{}),Vs=Br.layout.get("icon-text-fit")!=="none",Hh=Fx(hr,Zi,ai,Vs),Xh=jr?Fx(jr,Zi,ai,Vs):void 0;wa=new Bd(Kr,Rn,oi,pi,$i,hr,Vi,Gi,!1,Zi),Wi=4*Hh.length;const sw=nn.iconSizeData;let vu=null;sw.kind==="source"?(vu=[$s*Br.layout.get("icon-size").evaluate(Mn,{})],vu[0]>ll&&G(`${nn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):sw.kind==="composite"&&(vu=[$s*oo.compositeIconSizes[0].evaluate(Mn,{},gi),$s*oo.compositeIconSizes[1].evaluate(Mn,{},gi)],(vu[0]>ll||vu[1]>ll)&&G(`${nn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),nn.addSymbols(nn.icon,Hh,vu,qr,yr,Mn,l.WritingMode.none,Rn,ds.lineStartIndex,ds.lineLength,-1,gi),ly=nn.icon.placedSymbolArray.length-1,Xh&&(ba=4*Xh.length,nn.addSymbols(nn.icon,Xh,vu,qr,yr,Mn,l.WritingMode.vertical,Rn,ds.lineStartIndex,ds.lineLength,-1,gi),uy=nn.icon.placedSymbolArray.length-1)}const iw=Object.keys(cr.horizontal);for(const Zi of iw){const Vs=cr.horizontal[Zi];if(!ps){rw=nl(Vs.text);const Xh=Br.layout.get("text-rotate").evaluate(Mn,{},gi);ps=new Bd(Kr,Rn,oi,pi,$i,Vs,Dr,si,mi,Xh)}const Hh=Vs.positionedLines.length===1;if(Zh+=Dx(nn,Rn,Vs,ii,Br,mi,Mn,Ai,ds,cr.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Hh?iw:[Zi],Ea,ly,oo,gi),Hh)break}cr.vertical&&(nw+=Dx(nn,Rn,cr.vertical,ii,Br,mi,Mn,Ai,ds,l.WritingMode.vertical,["vertical"],Ea,uy,oo,gi));const eP=ps?ps.boxStartIndex:nn.collisionBoxArray.length,tP=ps?ps.boxEndIndex:nn.collisionBoxArray.length,nP=Vo?Vo.boxStartIndex:nn.collisionBoxArray.length,rP=Vo?Vo.boxEndIndex:nn.collisionBoxArray.length,iP=wa?wa.boxStartIndex:nn.collisionBoxArray.length,oP=wa?wa.boxEndIndex:nn.collisionBoxArray.length,sP=xo?xo.boxStartIndex:nn.collisionBoxArray.length,aP=xo?xo.boxEndIndex:nn.collisionBoxArray.length;let ms=-1;const Vd=(Zi,Vs)=>Zi&&Zi.circleDiameter?Math.max(Zi.circleDiameter,Vs):Vs;ms=Vd(ps,ms),ms=Vd(Vo,ms),ms=Vd(wa,ms),ms=Vd(xo,ms);const ow=ms>-1?1:0;ow&&(ms*=$o/ti),nn.glyphOffsetArray.length>=xc.MAX_GLYPHS&&G("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mn.sortKey!==void 0&&nn.addToSortKeyRanges(nn.symbolInstances.length,Mn.sortKey),nn.symbolInstances.emplaceBack(Rn.x,Rn.y,Ea.right>=0?Ea.right:-1,Ea.center>=0?Ea.center:-1,Ea.left>=0?Ea.left:-1,Ea.vertical||-1,ly,uy,rw,eP,tP,nP,rP,iP,oP,sP,aP,oi,Zh,nw,Wi,ba,ow,0,Dr,cy,hy,ms)}(o,an,bt,s,h,p,Dt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Fe,lt,Bt,M,nt,vt,tn,me,n,v,$,Q,_)};if(zt==="line")for(const bt of Rx(n.geometry,0,0,Xr,Xr)){const an=FI(bt,et,dt,s.vertical||ye,h,24,He,o.overscaling,Xr);for(const nn of an){const Rn=ye;Rn&&$I(o,Rn.text,Lt,nn)||Ot(bt,nn)}}else if(zt==="line-center"){for(const bt of n.geometry)if(bt.length>1){const an=RI(bt,dt,s.vertical||ye,h,24,He);an&&Ot(bt,an)}}else if(n.type==="Polygon")for(const bt of Bg(n.geometry,0)){const an=DI(bt,16);Ot(bt[0],new al(an.x,an.y,0))}else if(n.type==="LineString")for(const bt of n.geometry)Ot(bt,new al(bt[0].x,bt[0].y,0));else if(n.type==="Point")for(const bt of n.geometry)for(const an of bt)Ot([an],new al(an.x,an.y,0))}const ll=32640;function Dx(o,n,s,h,p,v,_,I,M,$,Q,re,ue,me,ye){const Oe=function(nt,et,lt,vt,dt,Bt,tn,zt){const Lt=vt.layout.get("text-rotate").evaluate(Bt,{})*Math.PI/180,At=[];for(const Dt of et.positionedLines)for(const Ot of Dt.positionedGlyphs){if(!Ot.rect)continue;const bt=Ot.rect||{};let an=4,nn=!0,Rn=1,Gn=0;const cr=(dt||zt)&&Ot.vertical,hr=Ot.metrics.advance*Ot.scale/2;if(zt&&et.verticalizable){const yr=(Ot.scale-1)*ti,qr=(ti-Ot.metrics.width*Ot.scale)/2;Gn=Dt.lineOffset/2-(Ot.imageName?-qr:yr)}if(Ot.imageName){const yr=tn[Ot.imageName];nn=yr.sdf,Rn=yr.pixelRatio,an=1/Rn}const ii=dt?[Ot.x+hr,Ot.y]:[0,0];let jr=dt?[0,0]:[Ot.x+hr+lt[0],Ot.y+lt[1]-Gn],Br=[0,0];cr&&(Br=jr,jr=[0,0]);const Kr=(Ot.metrics.left-an)*Ot.scale-hr+jr[0],oi=(-Ot.metrics.top-an)*Ot.scale+jr[1],pi=Kr+bt.w*Ot.scale/Rn,$i=oi+bt.h*Ot.scale/Rn,Dr=new ie(Kr,oi),si=new ie(pi,oi),mi=new ie(Kr,$i),Ai=new ie(pi,$i);if(cr){const yr=new ie(-hr,hr-zd),qr=-Math.PI/2,Mn=12-hr,oo=new ie(22-Mn,-(Ot.imageName?Mn:0)),ai=new ie(...Br);Dr._rotateAround(qr,yr)._add(oo)._add(ai),si._rotateAround(qr,yr)._add(oo)._add(ai),mi._rotateAround(qr,yr)._add(oo)._add(ai),Ai._rotateAround(qr,yr)._add(oo)._add(ai)}if(Lt){const yr=Math.sin(Lt),qr=Math.cos(Lt),Mn=[qr,-yr,yr,qr];Dr._matMult(Mn),si._matMult(Mn),mi._matMult(Mn),Ai._matMult(Mn)}const Vi=new ie(0,0),Gi=new ie(0,0);At.push({tl:Dr,tr:si,bl:mi,br:Ai,tex:bt,writingMode:et.writingMode,glyphOffset:ii,sectionIndex:Ot.sectionIndex,isSDF:nn,pixelOffsetTL:Vi,pixelOffsetBR:Gi,minFontScaleX:0,minFontScaleY:0})}return At}(0,s,I,p,v,_,h,o.allowVerticalPlacement),Fe=o.textSizeData;let He=null;Fe.kind==="source"?(He=[$s*p.layout.get("text-size").evaluate(_,{})],He[0]>ll&&G(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Fe.kind==="composite"&&(He=[$s*me.compositeTextSizes[0].evaluate(_,{},ye),$s*me.compositeTextSizes[1].evaluate(_,{},ye)],(He[0]>ll||He[1]>ll)&&G(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Oe,He,I,v,_,$,n,M.lineStartIndex,M.lineLength,ue,ye);for(const nt of Q)re[nt]=o.text.placedSymbolArray.length-1;return 4*Oe.length}function Nx(o){for(const n in o)return o[n];return null}function $I(o,n,s,h){const p=o.compareText;if(n in p){const v=p[n];for(let _=v.length-1;_>=0;_--)if(h.dist(v[_])<s)return!0}else p[n]=[];return p[n].push(h),!1}const VI=ol.VectorTileFeature.types,GI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dd(o,n,s,h,p,v,_,I,M,$,Q,re,ue){const me=I?Math.min(ll,Math.round(I[0])):0,ye=I?Math.min(ll,Math.round(I[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),v,_,(me<<1)+(M?1:0),ye,16*$,16*Q,256*re,256*ue)}function Qg(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function WI(o){for(const n of o.sections)if(Eg(n.text))return!0;return!1}class ey{constructor(n){this.layoutVertexArray=new gr,this.indexArray=new Ni,this.programConfigurations=n,this.segments=new Yn,this.dynamicLayoutVertexArray=new ei,this.opacityVertexArray=new Bi,this.placedSymbolArray=new ut}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,dI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,pI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,GI,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}xt("SymbolBuffers",ey);class ty{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Yn,this.collisionVertexArray=new yo}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,mI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}xt("CollisionBuffers",ty);class xc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=kg([]),this.placementViewportMatrix=kg([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Kg(this.zoom,s["text-size"]),this.iconSizeData=Kg(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=ry(h,"text-overlap","text-allow-overlap")!=="never"||ry(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>l.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new ey(new du(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new ey(new du(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new gt,this.lineVertexArray=new Kt,this.symbolInstances=new St}calculateGlyphDependencies(n,s,h,p,v){for(let _=0;_<n.length;_++)if(s[n.charCodeAt(_)]=!0,(h||p)&&v){const I=$h[n.charAt(_)];I&&(s[I.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],v=p.layout,_=v.get("text-font"),I=v.get("text-field"),M=v.get("icon-image"),$=(I.value.kind!=="constant"||I.value.value instanceof ke&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),Q=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,re=v.get("symbol-sort-key");if(this.features=[],!$&&!Q)return;const ue=s.iconDependencies,me=s.glyphDependencies,ye=s.availableImages,Oe=new lr(this.zoom);for(const{feature:Fe,id:He,index:nt,sourceLayerIndex:et}of n){const lt=p._featureFilter.needGeometry,vt=mu(Fe,lt);if(!p._featureFilter.filter(Oe,vt,h))continue;let dt,Bt;if(lt||(vt.geometry=pu(Fe)),$){const zt=p.getValueAndResolveTokens("text-field",vt,h,ye),Lt=ke.factory(zt);WI(Lt)&&(this.hasRTLText=!0),(!this.hasRTLText||el()==="unavailable"||this.hasRTLText&&Ti.isParsed())&&(dt=yI(Lt,p,vt))}if(Q){const zt=p.getValueAndResolveTokens("icon-image",vt,h,ye);Bt=zt instanceof Ge?zt:Ge.fromString(zt)}if(!dt&&!Bt)continue;const tn=this.sortFeaturesByKey?re.evaluate(vt,{},h):void 0;if(this.features.push({id:He,text:dt,icon:Bt,index:nt,sourceLayerIndex:et,geometry:vt.geometry,properties:Fe.properties,type:VI[Fe.type],sortKey:tn}),Bt&&(ue[Bt.name]=!0),dt){const zt=_.evaluate(vt,{},h).join(","),Lt=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const At of dt.sections)if(At.image)ue[At.image.name]=!0;else{const Dt=Fi(dt.toString()),Ot=At.fontStack||zt,bt=me[Ot]=me[Ot]||{};this.calculateGlyphDependencies(At.text,bt,Lt,this.allowVerticalPlacement,Dt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Fe){const He={},nt={},et=[];let lt=0;function vt(zt){et.push(Fe[zt]),lt++}function dt(zt,Lt,At){const Dt=nt[zt];return delete nt[zt],nt[Lt]=Dt,et[Dt].geometry[0].pop(),et[Dt].geometry[0]=et[Dt].geometry[0].concat(At[0]),Dt}function Bt(zt,Lt,At){const Dt=He[Lt];return delete He[Lt],He[zt]=Dt,et[Dt].geometry[0].shift(),et[Dt].geometry[0]=At[0].concat(et[Dt].geometry[0]),Dt}function tn(zt,Lt,At){const Dt=At?Lt[0][Lt[0].length-1]:Lt[0][0];return`${zt}:${Dt.x}:${Dt.y}`}for(let zt=0;zt<Fe.length;zt++){const Lt=Fe[zt],At=Lt.geometry,Dt=Lt.text?Lt.text.toString():null;if(!Dt){vt(zt);continue}const Ot=tn(Dt,At),bt=tn(Dt,At,!0);if(Ot in nt&&bt in He&&nt[Ot]!==He[bt]){const an=Bt(Ot,bt,At),nn=dt(Ot,bt,et[an].geometry);delete He[Ot],delete nt[bt],nt[tn(Dt,et[nn].geometry,!0)]=nn,et[an].geometry=null}else Ot in nt?dt(Ot,bt,At):bt in He?Bt(Ot,bt,At):(vt(zt),He[Ot]=lt-1,nt[bt]=lt-1)}return et.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Fe,He)=>Fe.sortKey-He.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const _={};for(let I=n.segment+1;I<s.length;I++)_[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:p},I<s.length-1&&(p+=s[I+1].dist(s[I]));for(let I=n.segment||0;I>=0;I--)_[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:v},I>0&&(v+=s[I-1].dist(s[I]));for(let I=0;I<s.length;I++){const M=_[I];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,v,_,I,M,$,Q,re,ue){const me=n.indexArray,ye=n.layoutVertexArray,Oe=n.segments.prepareSegment(4*s.length,ye,me,this.canOverlap?_.sortKey:void 0),Fe=this.glyphOffsetArray.length,He=Oe.vertexLength,nt=this.allowVerticalPlacement&&I===l.WritingMode.vertical?Math.PI/2:0,et=_.text&&_.text.sections;for(let lt=0;lt<s.length;lt++){const{tl:vt,tr:dt,bl:Bt,br:tn,tex:zt,pixelOffsetTL:Lt,pixelOffsetBR:At,minFontScaleX:Dt,minFontScaleY:Ot,glyphOffset:bt,isSDF:an,sectionIndex:nn}=s[lt],Rn=Oe.vertexLength,Gn=bt[1];Dd(ye,M.x,M.y,vt.x,Gn+vt.y,zt.x,zt.y,h,an,Lt.x,Lt.y,Dt,Ot),Dd(ye,M.x,M.y,dt.x,Gn+dt.y,zt.x+zt.w,zt.y,h,an,At.x,Lt.y,Dt,Ot),Dd(ye,M.x,M.y,Bt.x,Gn+Bt.y,zt.x,zt.y+zt.h,h,an,Lt.x,At.y,Dt,Ot),Dd(ye,M.x,M.y,tn.x,Gn+tn.y,zt.x+zt.w,zt.y+zt.h,h,an,At.x,At.y,Dt,Ot),Qg(n.dynamicLayoutVertexArray,M,nt),me.emplaceBack(Rn,Rn+1,Rn+2),me.emplaceBack(Rn+1,Rn+2,Rn+3),Oe.vertexLength+=4,Oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),lt!==s.length-1&&nn===s[lt+1].sectionIndex||n.programConfigurations.populatePaintArrays(ye.length,_,_.index,{},ue,et&&et[nn])}n.placedSymbolArray.emplaceBack(M.x,M.y,Fe,this.glyphOffsetArray.length-Fe,He,$,Q,M.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],I,0,!1,0,re)}_addCollisionDebugVertex(n,s,h,p,v,_){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,s,h,p,v,_,I){const M=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),$=M.vertexLength,Q=v.layoutVertexArray,re=v.collisionVertexArray,ue=I.anchorX,me=I.anchorY;this._addCollisionDebugVertex(Q,re,_,ue,me,new ie(n,s)),this._addCollisionDebugVertex(Q,re,_,ue,me,new ie(h,s)),this._addCollisionDebugVertex(Q,re,_,ue,me,new ie(h,p)),this._addCollisionDebugVertex(Q,re,_,ue,me,new ie(n,p)),M.vertexLength+=4;const ye=v.indexArray;ye.emplaceBack($,$+1),ye.emplaceBack($+1,$+2),ye.emplaceBack($+2,$+3),ye.emplaceBack($+3,$),M.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let v=n;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ty(Di,px.members,vo),this.iconCollisionBox=new ty(Di,px.members,vo);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,v,_,I,M,$){const Q={};for(let re=s;re<h;re++){const ue=n.get(re);Q.textBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},Q.textFeatureIndex=ue.featureIndex;break}for(let re=p;re<v;re++){const ue=n.get(re);Q.verticalTextBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},Q.verticalTextFeatureIndex=ue.featureIndex;break}for(let re=_;re<I;re++){const ue=n.get(re);Q.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},Q.iconFeatureIndex=ue.featureIndex;break}for(let re=M;re<$;re++){const ue=n.get(re);Q.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},Q.verticalIconFeatureIndex=ue.featureIndex;break}return Q}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],v=[],_=[];for(let I=0;I<this.symbolInstances.length;++I){_.push(I);const M=this.symbolInstances.get(I);p.push(0|Math.round(s*M.anchorX+h*M.anchorY)),v.push(M.featureIndex)}return _.sort((I,M)=>p[I]-p[M]||v[M]-v[I]),_}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,_)=>{p>=0&&_.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}xt("SymbolBucket",xc,{omit:["layers","collisionBoxArray","features","compareText"]}),xc.MAX_GLYPHS=65535,xc.addDynamicAttributes=Qg;const ZI=new Ci({"symbol-placement":new qt(A.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(A.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(A.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ln(A.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(A.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(A.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(A.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(A.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(A.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(A.layout_symbol["icon-rotation-alignment"]),"icon-size":new ln(A.layout_symbol["icon-size"]),"icon-text-fit":new qt(A.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(A.layout_symbol["icon-text-fit-padding"]),"icon-image":new ln(A.layout_symbol["icon-image"]),"icon-rotate":new ln(A.layout_symbol["icon-rotate"]),"icon-padding":new qt(A.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(A.layout_symbol["icon-keep-upright"]),"icon-offset":new ln(A.layout_symbol["icon-offset"]),"icon-anchor":new ln(A.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(A.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(A.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(A.layout_symbol["text-rotation-alignment"]),"text-field":new ln(A.layout_symbol["text-field"]),"text-font":new ln(A.layout_symbol["text-font"]),"text-size":new ln(A.layout_symbol["text-size"]),"text-max-width":new ln(A.layout_symbol["text-max-width"]),"text-line-height":new qt(A.layout_symbol["text-line-height"]),"text-letter-spacing":new ln(A.layout_symbol["text-letter-spacing"]),"text-justify":new ln(A.layout_symbol["text-justify"]),"text-radial-offset":new ln(A.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(A.layout_symbol["text-variable-anchor"]),"text-anchor":new ln(A.layout_symbol["text-anchor"]),"text-max-angle":new qt(A.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(A.layout_symbol["text-writing-mode"]),"text-rotate":new ln(A.layout_symbol["text-rotate"]),"text-padding":new qt(A.layout_symbol["text-padding"]),"text-keep-upright":new qt(A.layout_symbol["text-keep-upright"]),"text-transform":new ln(A.layout_symbol["text-transform"]),"text-offset":new ln(A.layout_symbol["text-offset"]),"text-allow-overlap":new qt(A.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(A.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(A.layout_symbol["text-ignore-placement"]),"text-optional":new qt(A.layout_symbol["text-optional"])});var ny={paint:new Ci({"icon-opacity":new ln(A.paint_symbol["icon-opacity"]),"icon-color":new ln(A.paint_symbol["icon-color"]),"icon-halo-color":new ln(A.paint_symbol["icon-halo-color"]),"icon-halo-width":new ln(A.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ln(A.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(A.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(A.paint_symbol["icon-translate-anchor"]),"text-opacity":new ln(A.paint_symbol["text-opacity"]),"text-color":new ln(A.paint_symbol["text-color"],{runtimeType:Ir,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ln(A.paint_symbol["text-halo-color"]),"text-halo-width":new ln(A.paint_symbol["text-halo-width"]),"text-halo-blur":new ln(A.paint_symbol["text-halo-blur"]),"text-translate":new qt(A.paint_symbol["text-translate"]),"text-translate-anchor":new qt(A.paint_symbol["text-translate-anchor"])}),layout:ZI};class Ux{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:fn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xt("FormatSectionOverride",Ux,{omit:["defaultValue"]});class Nd extends ji{constructor(n){super(n,ny)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const v=this.layout.get(n).evaluate(s,{},h,p),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||rs(_.value)||!v?v:function(I,M){return M.replace(/{([^{}]+)}/g,($,Q)=>Q in I?String(I[Q]):"")}(s.properties,v)}createBucket(n){return new xc(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of ny.paint.overridableProperties){if(!Nd.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Ux(s),p=new nu(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Ka("source",p):new qa("composite",p,s.value.zoomStops,s.value._interpolationType),this.paint._values[n]=new No(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Nd.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=ny.paint.properties[s];let v=!1;const _=I=>{for(const M of I)if(p.overrides&&p.overrides.hasOverride(M))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ke)_(h.value.value.sections);else if(h.value.kind==="source"){const I=$=>{v||($ instanceof mt&&We($.value)===wi?_($.value.sections):$ instanceof Ut?_($.sections):$.eachChild(I))},M=h.value;M._styleExpression&&I(M._styleExpression.expression)}return v}}function ry(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}var HI={paint:new Ci({"background-color":new qt(A.paint_background["background-color"]),"background-pattern":new ac(A.paint_background["background-pattern"]),"background-opacity":new qt(A.paint_background["background-opacity"])})},XI={paint:new Ci({"raster-opacity":new qt(A.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(A.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(A.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(A.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(A.paint_raster["raster-saturation"]),"raster-contrast":new qt(A.paint_raster["raster-contrast"]),"raster-resampling":new qt(A.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(A.paint_raster["raster-fade-duration"])})};class YI extends ji{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const KI={circle:class extends ji{constructor(o){super(o,AA)}createBucket(o){return new Ag(o)}queryRadius(o){const n=o;return Oh("circle-radius",this,n)+Oh("circle-stroke-width",this,n)+Ed(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,s,h,p,v,_,I){const M=Sd(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,_),$=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s),Q=this.paint.get("circle-pitch-alignment")==="map",re=Q?M:function(me,ye){return me.map(Oe=>K_(Oe,ye))}(M,I),ue=Q?$*_:$;for(const me of h)for(const ye of me){const Oe=Q?ye:K_(ye,I);let Fe=ue;const He=Cd(Mg(),Td(ye.x,ye.y,0,1),I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Fe*=He[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Fe*=v.cameraToCenterDistance/He[3]),bA(re,Oe,Fe))return!0}return!1}},heatmap:class extends ji{constructor(o){super(o,PA),this._updateColorRamp()}createBucket(o){return new q_(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Q_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends ji{constructor(o){super(o,kA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends ji{constructor(o){super(o,ZA)}recalculate(o,n){super.recalculate(o,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Ug(o)}queryRadius(){return Ed(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,s,h,p,v,_){return Z_(Sd(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,_),h)}isTileClipped(){return!0}},"fill-extrusion":class extends ji{constructor(o){super(o,oI)}createBucket(o){return new Vg(o)}queryRadius(){return Ed(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,s,h,p,v,_,I){const M=Sd(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,_),$=this.paint.get("fill-extrusion-height").evaluate(n,s),Q=this.paint.get("fill-extrusion-base").evaluate(n,s),re=function(me,ye,Oe,Fe){const He=[];for(const nt of me){const et=Td(nt.x,nt.y,0,1);Cd(et,et,ye),He.push(new ie(et[0]/et[3],et[1]/et[3]))}return He}(M,I),ue=function(me,ye,Oe,Fe){const He=[],nt=[],et=Fe[8]*ye,lt=Fe[9]*ye,vt=Fe[10]*ye,dt=Fe[11]*ye,Bt=Fe[8]*Oe,tn=Fe[9]*Oe,zt=Fe[10]*Oe,Lt=Fe[11]*Oe;for(const At of me){const Dt=[],Ot=[];for(const bt of At){const an=bt.x,nn=bt.y,Rn=Fe[0]*an+Fe[4]*nn+Fe[12],Gn=Fe[1]*an+Fe[5]*nn+Fe[13],cr=Fe[2]*an+Fe[6]*nn+Fe[14],hr=Fe[3]*an+Fe[7]*nn+Fe[15],ii=cr+vt,jr=hr+dt,Br=Rn+Bt,Kr=Gn+tn,oi=cr+zt,pi=hr+Lt,$i=new ie((Rn+et)/jr,(Gn+lt)/jr);$i.z=ii/jr,Dt.push($i);const Dr=new ie(Br/pi,Kr/pi);Dr.z=oi/pi,Ot.push(Dr)}He.push(Dt),nt.push(Ot)}return[He,nt]}(h,Q,$,I);return function(me,ye,Oe){let Fe=1/0;Z_(Oe,ye)&&(Fe=ux(Oe,ye[0]));for(let He=0;He<ye.length;He++){const nt=ye[He],et=me[He];for(let lt=0;lt<nt.length-1;lt++){const vt=nt[lt],dt=[vt,nt[lt+1],et[lt+1],et[lt],vt];W_(Oe,dt)&&(Fe=Math.min(Fe,ux(Oe,dt)))}}return Fe!==1/0&&Fe}(ue[0],ue[1],re)}},line:class extends ji{constructor(o){super(o,hx),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ms,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=fx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Gg(o)}queryRadius(o){const n=o,s=dx(Oh("line-width",this,n),Oh("line-gap-width",this,n)),h=Oh("line-offset",this,n);return s/2+Math.abs(h)+Ed(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,s,h,p,v,_){const I=Sd(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,_),M=_/2*dx(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),$=this.paint.get("line-offset").evaluate(n,s);return $&&(h=function(Q,re){const ue=[],me=new ie(0,0);for(let ye=0;ye<Q.length;ye++){const Oe=Q[ye],Fe=[];for(let He=0;He<Oe.length;He++){const nt=Oe[He-1],et=Oe[He],lt=Oe[He+1],vt=He===0?me:et.sub(nt)._unit()._perp(),dt=He===Oe.length-1?me:lt.sub(et)._unit()._perp(),Bt=vt._add(dt)._unit();Bt._mult(1/(Bt.x*dt.x+Bt.y*dt.y)),Fe.push(Bt._mult(re)._add(et))}ue.push(Fe)}return ue}(h,$*_)),function(Q,re,ue){for(let me=0;me<re.length;me++){const ye=re[me];if(Q.length>=3){for(let Oe=0;Oe<ye.length;Oe++)if(dc(Q,ye[Oe]))return!0}if(EA(Q,ye,ue))return!0}return!1}(I,h,M)}isTileClipped(){return!0}},symbol:Nd,background:class extends ji{constructor(o){super(o,HI)}},raster:class extends ji{constructor(o){super(o,XI)}}};class qI{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const $x=63710088e-1;class Cr{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Cr(F(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return $x*Math.acos(Math.min(v,1))}toBounds(n=0){const s=360*n/40075017,h=s/Math.cos(Math.PI/180*this.lat);return new yu(new Cr(this.lng-h,this.lat-s),new Cr(this.lng+h,this.lat+s))}static convert(n){if(n instanceof Cr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Cr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Cr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class yu{constructor(n,s){n&&(s?this.setSouthWest(n).setNorthEast(s):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Cr?new Cr(n.lng,n.lat):Cr.convert(n),this}setSouthWest(n){return this._sw=n instanceof Cr?new Cr(n.lng,n.lat):Cr.convert(n),this}extend(n){const s=this._sw,h=this._ne;let p,v;if(n instanceof Cr)p=n,v=n;else{if(!(n instanceof yu))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(yu.convert(n)):this.extend(Cr.convert(n)):this;if(p=n._sw,v=n._ne,!p||!v)return this}return s||h?(s.lng=Math.min(p.lng,s.lng),s.lat=Math.min(p.lat,s.lat),h.lng=Math.max(v.lng,h.lng),h.lat=Math.max(v.lat,h.lat)):(this._sw=new Cr(p.lng,p.lat),this._ne=new Cr(v.lng,v.lat)),this}getCenter(){return new Cr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Cr(this.getWest(),this.getNorth())}getSouthEast(){return new Cr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:s,lat:h}=Cr.convert(n);let p=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(n){return n instanceof yu?n:n&&new yu(n)}}const Vx=2*Math.PI*$x;function Gx(o){return Vx*Math.cos(o*Math.PI/180)}function Wx(o){return(180+o)/360}function Zx(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Hx(o,n){return o/Gx(n)}function iy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Ud{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Cr.convert(n);return new Ud(Wx(h.lng),Zx(h.lat),Hx(s,h.lat))}toLngLat(){return new Cr(360*this.x-180,iy(this.y))}toAltitude(){return this.z*Gx(iy(this.y))}meterInMercatorCoordinateUnits(){return 1/Vx*(n=iy(this.y),1/Math.cos(n*Math.PI/180));var n}}function Xx(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class oy{constructor(n,s,h){this.z=n,this.x=s,this.y=h,this.key=Gh(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(_=this.y,I=this.z,M=Xx(256*(v=this.x),256*(_=Math.pow(2,I)-_-1),I),$=Xx(256*(v+1),256*(_+1),I),M[0]+","+M[1]+","+$[0]+","+$[1]);var v,_,I,M,$;const Q=function(re,ue,me){let ye,Oe="";for(let Fe=re;Fe>0;Fe--)ye=1<<Fe-1,Oe+=(ue&ye?1:0)+(me&ye?2:0);return Oe}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,Q).replace(/{bbox-epsg-3857}/g,p)}getTilePoint(n){const s=Math.pow(2,this.z);return new ie((n.x*s-this.x)*Xr,(n.y*s-this.y)*Xr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Yx{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Gh(n,s.z,s.z,s.x,s.y)}}class Uo{constructor(n,s,h,p,v){this.overscaledZ=n,this.wrap=s,this.canonical=new oy(h,+p,+v),this.key=Gh(s,n,h,p,v)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const s=this.canonical.z-n;return n>this.canonical.z?new Uo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Uo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){const h=this.canonical.z-n;return n>this.canonical.z?Gh(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Gh(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Uo(s,this.wrap,s,h,p),new Uo(s,this.wrap,s,h+1,p),new Uo(s,this.wrap,s,h,p+1),new Uo(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Uo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Yx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Ud(n.x-this.wrap,n.y))}}function Gh(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+h).toString(36)+s.toString(36)+n.toString(36)}xt("CanonicalTileID",oy),xt("OverscaledTileID",Uo,{omit:["posMatrix"]});class Kx{constructor(n,s,h){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void G(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const p=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(let v=0;v<p;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(p,v)]=this.data[this._idx(p-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,p)]=this.data[this._idx(v,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[p],h[p+1],h[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}_unpackMapbox(n,s,h){return(256*n*256+256*s+h)/10-1e4}_unpackTerrarium(n,s,h){return 256*n+s+h/256-32768}getPixels(){return new _o({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,_=h*this.dim,I=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:_=I-1;break;case 1:I=_+1}const M=-s*this.dim,$=-h*this.dim;for(let Q=_;Q<I;Q++)for(let re=p;re<v;re++)this.data[this._idx(re,Q)]=n.data[this._idx(re+M,Q+$)]}}xt("DEMData",Kx);class qx{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}class Jx{constructor(n,s,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n=function(s,h){var p={};for(var v in s)Object.prototype.hasOwnProperty.call(s,v)&&h.indexOf(v)<0&&(p[v]=s[v]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(v=Object.getOwnPropertySymbols(s);_<v.length;_++)h.indexOf(v[_])<0&&Object.prototype.propertyIsEnumerable.call(s,v[_])&&(p[v[_]]=s[v[_]])}return p}(this,["_geometry","_vectorTileFeature"]);return n.geometry=this.geometry,n}}class Qx{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Yt(Xr,16,0),this.grid3D=new Yt(Xr,16,0),this.featureIndexArray=new pn,this.promoteId=s}insert(n,s,h,p,v,_){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const M=_?this.grid3D:this.grid;for(let $=0;$<s.length;$++){const Q=s[$],re=[1/0,1/0,-1/0,-1/0];for(let ue=0;ue<Q.length;ue++){const me=Q[ue];re[0]=Math.min(re[0],me.x),re[1]=Math.min(re[1],me.y),re[2]=Math.max(re[2],me.x),re[3]=Math.max(re[3],me.y)}re[0]<Xr&&re[1]<Xr&&re[2]>=0&&re[3]>=0&&M.insert(I,re[0],re[1],re[2],re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ol.VectorTile(new Wg(this.rawTileData)).layers,this.sourceLayerCoder=new qx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const v=n.params||{},_=Xr/n.tileSize/n.scale,I=Fs(v.filter),M=n.queryGeometry,$=n.queryPadding*_,Q=tw(M),re=this.grid.query(Q.minX-$,Q.minY-$,Q.maxX+$,Q.maxY+$),ue=tw(n.cameraQueryGeometry),me=this.grid3D.query(ue.minX-$,ue.minY-$,ue.maxX+$,ue.maxY+$,(Fe,He,nt,et)=>function(lt,vt,dt,Bt,tn){for(const Lt of lt)if(vt<=Lt.x&&dt<=Lt.y&&Bt>=Lt.x&&tn>=Lt.y)return!0;const zt=[new ie(vt,dt),new ie(vt,tn),new ie(Bt,tn),new ie(Bt,dt)];if(lt.length>2){for(const Lt of zt)if(dc(lt,Lt))return!0}for(let Lt=0;Lt<lt.length-1;Lt++)if(TA(lt[Lt],lt[Lt+1],zt))return!0;return!1}(n.cameraQueryGeometry,Fe-$,He-$,nt+$,et+$));for(const Fe of me)re.push(Fe);re.sort(JI);const ye={};let Oe;for(let Fe=0;Fe<re.length;Fe++){const He=re[Fe];if(He===Oe)continue;Oe=He;const nt=this.featureIndexArray.get(He);let et=null;this.loadMatchingFeature(ye,nt.bucketIndex,nt.sourceLayerIndex,nt.featureIndex,I,v.layers,v.availableImages,s,h,p,(lt,vt,dt)=>(et||(et=pu(lt)),vt.queryIntersectsFeature(M,lt,dt,et,this.z,n.transform,_,n.pixelPosMatrix)))}return ye}loadMatchingFeature(n,s,h,p,v,_,I,M,$,Q,re){const ue=this.bucketLayerIDs[s];if(_&&!function(Fe,He){for(let nt=0;nt<Fe.length;nt++)if(He.indexOf(Fe[nt])>=0)return!0;return!1}(_,ue))return;const me=this.sourceLayerCoder.decode(h),ye=this.vtLayers[me].feature(p);if(v.needGeometry){const Fe=mu(ye,!0);if(!v.filter(new lr(this.tileID.overscaledZ),Fe,this.tileID.canonical))return}else if(!v.filter(new lr(this.tileID.overscaledZ),ye))return;const Oe=this.getId(ye,me);for(let Fe=0;Fe<ue.length;Fe++){const He=ue[Fe];if(_&&_.indexOf(He)<0)continue;const nt=M[He];if(!nt)continue;let et={};Oe&&Q&&(et=Q.getState(nt.sourceLayer||"_geojsonTileLayer",Oe));const lt=Y({},$[He]);lt.paint=ew(lt.paint,nt.paint,ye,et,I),lt.layout=ew(lt.layout,nt.layout,ye,et,I);const vt=!re||re(ye,nt,et);if(!vt)continue;const dt=new Jx(ye,this.z,this.x,this.y,Oe);dt.layer=lt;let Bt=n[He];Bt===void 0&&(Bt=n[He]=[]),Bt.push({featureIndex:p,feature:dt,intersectionZ:vt})}}lookupSymbolFeatures(n,s,h,p,v,_,I,M){const $={};this.loadVTLayers();const Q=Fs(v);for(const re of n)this.loadMatchingFeature($,h,p,re,Q,_,I,M,s);return $}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function ew(o,n,s,h,p){return W(o,(v,_)=>{const I=n instanceof sc?n.get(_):null;return I&&I.evaluate?I.evaluate(s,h,p):I})}function tw(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:s,maxX:h,maxY:p}}function JI(o,n){return n-o}var sy;xt("FeatureIndex",Qx,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(sy=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",sy.load="load",sy.fullLoad="fullLoad";let $d=null,Wh=[];const ay=1e3/30,QI={mark(o){performance.mark(o)},frame(o){const n=o;$d!=null&&Wh.push(n-$d),$d=n},clearMetrics(){$d=null,Wh=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,s=Wh.length,h=1/(Wh.reduce((v,_)=>v+_,0)/s/1e3),p=Wh.filter(v=>v>ay).reduce((v,_)=>v+(_-ay)/ay,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100}}};l.AJAXError=Nt,l.ARRAY_TYPE=gu,l.Actor=class{constructor(o,n,s){this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},le(["receive","process"],this),this.invoker=new qI(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=k()?o:window}send(o,n,s,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const _=ve(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!s,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Xn(n,_)},_),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(o){const n=o.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[s];const h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h()}else k()||n.mustQueue?(this.tasks[s]=n,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(er(n.error)):s(null,er(n.data)))}else{let s=!1;const h=ve(this.globalScope)?void 0:[],p=n.hasCallback?(I,M)=>{s=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:I?Xn(I):null,data:Xn(M,h)},h)}:I=>{s=!0};let v=null;const _=er(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,_,p);else if(this.parent.getWorkerSource){const I=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,I[0],_.source)[I[1]](_,p)}else p(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Rh,l.CanonicalTileID=oy,l.CollisionBoxArray=ct,l.CollisionCircleLayoutArray=class extends D{},l.Color=J,l.DEMData=Kx,l.DataConstantProperty=qt,l.DictionaryCoder=qx,l.EXTENT=Xr,l.ErrorEvent=ot,l.EvaluationParameters=lr,l.Event=Ke,l.Evented=ae,l.FeatureIndex=Qx,l.FillBucket=Ug,l.FillExtrusionBucket=Vg,l.GeoJSONFeature=Jx,l.ImageAtlas=bx,l.ImagePosition=Hg,l.LineBucket=Gg,l.LineStripIndexArray=class extends Ze{},l.LngLat=Cr,l.LngLatBounds=yu,l.MercatorCoordinate=Ud,l.ONE_EM=ti,l.OverscaledTileID=Uo,l.PerformanceUtils=QI,l.PosArray=class extends hu{},l.Properties=Ci,l.QuadTriangleArray=class extends oe{},l.RGBAImage=_o,l.RasterBoundsArray=class extends uc{},l.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.ResourceType=Et,l.SegmentVector=Yn,l.SymbolBucket=xc,l.Transitionable=Mh,l.TriangleIndexArray=Ni,l.Uniform1f=va,l.Uniform1i=class extends ya{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends ya{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.Uniform3f=class extends ya{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.Uniform4f=hc,l.UniformColor=U_,l.UniformMatrix4f=class extends ya{constructor(o,n){super(o,n),this.current=xA}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.UnwrappedTileID=Yx,l.ValidationError=z,l.ZoomHistory=Pr,l.addDynamicAttributes=Qg,l.asyncAll=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((_,I)=>{n(_,(M,$)=>{M&&(v=M),p[I]=$,--h==0&&s(v,p)})})},l.bezier=T,l.bindAll=le,l.cacheEntryPossiblyAdded=function(o){$e++,$e>Ie&&(o.getActor().send("enforceCacheSizeLimit",je),$e=0)},l.clamp=C,l.clearTileCache=function(o){const n=caches.delete(he);o&&n.catch(o).then(()=>o())},l.clipLine=Rx,l.clone=function(o){var n=new gu(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.clone$1=B,l.collisionCircleLayout=gI,l.config=te,l.create=function(){var o=new gu(16);return gu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l.createExpression=ua,l.createFilter=Fs,l.createLayout=wr,l.createStyleLayer=function(o){return o.type==="custom"?new YI(o):new KI[o.type](o)},l.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.ease=S,l.emitValidationErrors=Xt,l.enforceCacheSizeLimit=function(o){Pe(),_e&&_e.then(n=>{n.keys().then(s=>{for(let h=0;h<s.length-o;h++)n.delete(s[h])})})},l.evaluateSizeForFeature=Ix,l.evaluateSizeForZoom=Px,l.evaluateVariableOffset=Bx,l.evented=Ph,l.exported=ee,l.exported$1=Ne,l.extend=Y,l.filterObject=V,l.fromValues=Td,l.getAnchorAlignment=Yg,l.getAnchorJustification=Jg,l.getArrayBuffer=bn,l.getImage=O,l.getJSON=function(o,n){return Cn(Y(o,{type:"json"}),n)},l.getOverlapMode=ry,l.getRTLTextPluginStatus=el,l.getReferrer=jt,l.getVideo=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");on(o[h])||(s.crossOrigin="Anonymous"),p.src=o[h],s.appendChild(p)}return{cancel:()=>{}}},l.identity=kg,l.invert=function(o,n){var s=n[0],h=n[1],p=n[2],v=n[3],_=n[4],I=n[5],M=n[6],$=n[7],Q=n[8],re=n[9],ue=n[10],me=n[11],ye=n[12],Oe=n[13],Fe=n[14],He=n[15],nt=s*I-h*_,et=s*M-p*_,lt=s*$-v*_,vt=h*M-p*I,dt=h*$-v*I,Bt=p*$-v*M,tn=Q*Oe-re*ye,zt=Q*Fe-ue*ye,Lt=Q*He-me*ye,At=re*Fe-ue*Oe,Dt=re*He-me*Oe,Ot=ue*He-me*Fe,bt=nt*Ot-et*Dt+lt*At+vt*Lt-dt*zt+Bt*tn;return bt?(o[0]=(I*Ot-M*Dt+$*At)*(bt=1/bt),o[1]=(p*Dt-h*Ot-v*At)*bt,o[2]=(Oe*Bt-Fe*dt+He*vt)*bt,o[3]=(ue*dt-re*Bt-me*vt)*bt,o[4]=(M*Lt-_*Ot-$*zt)*bt,o[5]=(s*Ot-p*Lt+v*zt)*bt,o[6]=(Fe*lt-ye*Bt-He*et)*bt,o[7]=(Q*Bt-ue*lt+me*et)*bt,o[8]=(_*Dt-I*Lt+$*tn)*bt,o[9]=(h*Lt-s*Dt-v*tn)*bt,o[10]=(ye*dt-Oe*lt+He*nt)*bt,o[11]=(re*lt-Q*dt-me*nt)*bt,o[12]=(I*zt-_*At-M*tn)*bt,o[13]=(s*At-h*zt+p*tn)*bt,o[14]=(Oe*et-ye*vt-Fe*nt)*bt,o[15]=(Q*vt-re*et+ue*nt)*bt,o):null},l.isImageBitmap=we,l.isSafari=ve,l.keysDifference=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},l.lazyLoadRTLTextPlugin=function(){Ti.isLoading()||Ti.isLoaded()||el()!=="deferred"||yd()},l.makeRequest=Cn,l.mapObject=W,l.mercatorXfromLng=Wx,l.mercatorYfromLat=Zx,l.mercatorZfromAltitude=Hx,l.mul=IA,l.multiply=Y_,l.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.number=or,l.ortho=function(o,n,s,h,p,v,_){var I=1/(n-s),M=1/(h-p),$=1/(v-_);return o[0]=-2*I,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*$,o[11]=0,o[12]=(n+s)*I,o[13]=(p+h)*M,o[14]=(_+v)*$,o[15]=1,o},l.parseCacheControl=U,l.parseGlyphPBF=function(o){return new Wg(o).readFields(AI,[])},l.pbf=Wg,l.performSymbolLayout=function(o,n,s,h,p,v,_){o.createArrays(),o.tilePixelRatio=Xr/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const I=o.layers[0].layout,M=o.layers[0]._unevaluatedLayout._values,$={layoutIconSize:M["icon-size"].possiblyEvaluate(new lr(o.zoom+1),_),layoutTextSize:M["text-size"].possiblyEvaluate(new lr(o.zoom+1),_),textMaxSize:M["text-size"].possiblyEvaluate(new lr(18))};if(o.textSizeData.kind==="composite"){const{minZoom:ye,maxZoom:Oe}=o.textSizeData;$.compositeTextSizes=[M["text-size"].possiblyEvaluate(new lr(ye),_),M["text-size"].possiblyEvaluate(new lr(Oe),_)]}if(o.iconSizeData.kind==="composite"){const{minZoom:ye,maxZoom:Oe}=o.iconSizeData;$.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new lr(ye),_),M["icon-size"].possiblyEvaluate(new lr(Oe),_)]}const Q=I.get("text-line-height")*ti,re=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",ue=I.get("text-keep-upright"),me=I.get("text-size");for(const ye of o.features){const Oe=I.get("text-font").evaluate(ye,{},_).join(","),Fe=me.evaluate(ye,{},_),He=$.layoutTextSize.evaluate(ye,{},_),nt=$.layoutIconSize.evaluate(ye,{},_),et={horizontal:{},vertical:void 0},lt=ye.text;let vt,dt=[0,0];if(lt){const zt=lt.toString(),Lt=I.get("text-letter-spacing").evaluate(ye,{},_)*ti,At=go(zt)?Lt:0,Dt=I.get("text-anchor").evaluate(ye,{},_),Ot=I.get("text-variable-anchor");if(!Ot){const Gn=I.get("text-radial-offset").evaluate(ye,{},_);dt=Gn?Bx(Dt,[Gn*ti,qg]):I.get("text-offset").evaluate(ye,{},_).map(cr=>cr*ti)}let bt=re?"center":I.get("text-justify").evaluate(ye,{},_);const an=I.get("symbol-placement"),nn=an==="point"?I.get("text-max-width").evaluate(ye,{},_)*ti:0,Rn=()=>{o.allowVerticalPlacement&&Fi(zt)&&(et.vertical=Ld(lt,n,s,p,Oe,nn,Q,Dt,"left",At,dt,l.WritingMode.vertical,!0,an,He,Fe))};if(!re&&Ot){const Gn=bt==="auto"?Ot.map(hr=>Jg(hr)):[bt];let cr=!1;for(let hr=0;hr<Gn.length;hr++){const ii=Gn[hr];if(!et.horizontal[ii])if(cr)et.horizontal[ii]=et.horizontal[0];else{const jr=Ld(lt,n,s,p,Oe,nn,Q,"center",ii,At,dt,l.WritingMode.horizontal,!1,an,He,Fe);jr&&(et.horizontal[ii]=jr,cr=jr.positionedLines.length===1)}}Rn()}else{bt==="auto"&&(bt=Jg(Dt));const Gn=Ld(lt,n,s,p,Oe,nn,Q,Dt,bt,At,dt,l.WritingMode.horizontal,!1,an,He,Fe);Gn&&(et.horizontal[bt]=Gn),Rn(),Fi(zt)&&re&&ue&&(et.vertical=Ld(lt,n,s,p,Oe,nn,Q,Dt,bt,At,dt,l.WritingMode.vertical,!1,an,He,Fe))}}let Bt=!1;if(ye.icon&&ye.icon.name){const zt=h[ye.icon.name];zt&&(vt=LI(p[ye.icon.name],I.get("icon-offset").evaluate(ye,{},_),I.get("icon-anchor").evaluate(ye,{},_)),Bt=!!zt.sdf,o.sdfIcons===void 0?o.sdfIcons=Bt:o.sdfIcons!==Bt&&G("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zt.pixelRatio!==o.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const tn=Nx(et.horizontal)||et.vertical;o.iconsInText=!!tn&&tn.iconsInText,(tn||vt)&&UI(o,ye,et,vt,h,$,He,nt,dt,Bt,_)}v&&o.generateCollisionDebugBuffers()},l.perspective=function(o,n,s,h,p){var v,_=1/Math.tan(n/2);return o[0]=_/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},l.pick=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},l.plugin=Ti,l.pointGeometry=ie,l.polygonIntersectsPolygon=W_,l.potpack=wx,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=xt,l.registerForPluginStateChange=function(o){return o({pluginStatus:Si,pluginURL:Ds}),Ph.on("pluginStateChange",o),o},l.renderColorRamp=Q_,l.rotateX=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[4],_=n[5],I=n[6],M=n[7],$=n[8],Q=n[9],re=n[10],ue=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+$*h,o[5]=_*p+Q*h,o[6]=I*p+re*h,o[7]=M*p+ue*h,o[8]=$*p-v*h,o[9]=Q*p-_*h,o[10]=re*p-I*h,o[11]=ue*p-M*h,o},l.rotateZ=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[0],_=n[1],I=n[2],M=n[3],$=n[4],Q=n[5],re=n[6],ue=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+$*h,o[1]=_*p+Q*h,o[2]=I*p+re*h,o[3]=M*p+ue*h,o[4]=$*p-v*h,o[5]=Q*p-_*h,o[6]=re*p-I*h,o[7]=ue*p-M*h,o},l.scale=function(o,n,s){var h=s[0],p=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.scale$1=function(o,n,s){return o[0]=n[0]*s,o[1]=n[1]*s,o[2]=n[2]*s,o[3]=n[3]*s,o},l.setCacheLimits=function(o,n){je=o,Ie=n},l.setRTLTextPlugin=function(o,n,s=!1){if(Si===Th||Si===ic||Si===Ch)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ds=ee.resolveURL(o),Si=Th,Ah=n,Ih(),s||yd()},l.spec=A,l.sphericalToCartesian=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},l.symbolSize=OI,l.toEvaluationFeature=mu,l.transformMat4=Cd,l.translate=function(o,n,s){var h,p,v,_,I,M,$,Q,re,ue,me,ye,Oe=s[0],Fe=s[1],He=s[2];return n===o?(o[12]=n[0]*Oe+n[4]*Fe+n[8]*He+n[12],o[13]=n[1]*Oe+n[5]*Fe+n[9]*He+n[13],o[14]=n[2]*Oe+n[6]*Fe+n[10]*He+n[14],o[15]=n[3]*Oe+n[7]*Fe+n[11]*He+n[15]):(p=n[1],v=n[2],_=n[3],I=n[4],M=n[5],$=n[6],Q=n[7],re=n[8],ue=n[9],me=n[10],ye=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=_,o[4]=I,o[5]=M,o[6]=$,o[7]=Q,o[8]=re,o[9]=ue,o[10]=me,o[11]=ye,o[12]=h*Oe+I*Fe+re*He+n[12],o[13]=p*Oe+M*Fe+ue*He+n[13],o[14]=v*Oe+$*Fe+me*He+n[14],o[15]=_*Oe+Q*Fe+ye*He+n[15]),o},l.triggerPluginCompletionEvent=gd,l.unicodeBlockLookup=wt,l.uniqueId=function(){return H++},l.validateCustomStyleLayer=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateLight=tt,l.validateStyle=Le,l.vectorTile=ol,l.warnOnce=G,l.wrap=F}),f(["./shared"],function(l){function w(Ce){const Z=typeof Ce;if(Z==="number"||Z==="boolean"||Z==="string"||Ce==null)return JSON.stringify(Ce);if(Array.isArray(Ce)){let Ae="[";for(const ke of Ce)Ae+=`${w(ke)},`;return`${Ae}]`}const J=Object.keys(Ce).sort();let ge="{";for(let Ae=0;Ae<J.length;Ae++)ge+=`${JSON.stringify(J[Ae])}:${w(Ce[J[Ae]])},`;return`${ge}}`}function E(Ce){let Z="";for(const J of l.refProperties)Z+=`/${w(Ce[J])}`;return Z}class T{constructor(Z){this.keyCache={},Z&&this.replace(Z)}replace(Z){this._layerConfigs={},this._layers={},this.update(Z,[])}update(Z,J){for(const Ae of Z){this._layerConfigs[Ae.id]=Ae;const ke=this._layers[Ae.id]=l.createStyleLayer(Ae);ke._featureFilter=l.createFilter(ke.filter),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of J)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const ge=function(Ae,ke){const Ge={};for(let Ue=0;Ue<Ae.length;Ue++){const We=ke&&ke[Ae[Ue].id]||E(Ae[Ue]);ke&&(ke[Ae[Ue].id]=We);let st=Ge[We];st||(st=Ge[We]=[]),st.push(Ae[Ue])}const De=[];for(const Ue in Ge)De.push(Ge[Ue]);return De}(Object.values(this._layerConfigs),this.keyCache);for(const Ae of ge){const ke=Ae.map(mt=>this._layers[mt.id]),Ge=ke[0];if(Ge.visibility==="none")continue;const De=Ge.source||"";let Ue=this.familiesBySource[De];Ue||(Ue=this.familiesBySource[De]={});const We=Ge.sourceLayer||"_geojsonTileLayer";let st=Ue[We];st||(st=Ue[We]=[]),st.push(ke)}}}class S{constructor(Z){const J={},ge=[];for(const De in Z){const Ue=Z[De],We=J[De]={};for(const st in Ue){const mt=Ue[+st];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const it={x:0,y:0,w:mt.bitmap.width+2,h:mt.bitmap.height+2};ge.push(it),We[st]={rect:it,metrics:mt.metrics}}}const{w:Ae,h:ke}=l.potpack(ge),Ge=new l.AlphaImage({width:Ae||1,height:ke||1});for(const De in Z){const Ue=Z[De];for(const We in Ue){const st=Ue[+We];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const mt=J[De][We].rect;l.AlphaImage.copy(st.bitmap,Ge,{x:0,y:0},{x:mt.x+1,y:mt.y+1},st.bitmap)}}this.image=Ge,this.positions=J}}l.register("GlyphAtlas",S);class C{constructor(Z){this.tileID=new l.OverscaledTileID(Z.tileID.overscaledZ,Z.tileID.wrap,Z.tileID.canonical.z,Z.tileID.canonical.x,Z.tileID.canonical.y),this.uid=Z.uid,this.zoom=Z.zoom,this.pixelRatio=Z.pixelRatio,this.tileSize=Z.tileSize,this.source=Z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Z.showCollisionBoxes,this.collectResourceTiming=!!Z.collectResourceTiming,this.returnDependencies=!!Z.returnDependencies,this.promoteId=Z.promoteId}parse(Z,J,ge,Ae,ke){this.status="parsing",this.data=Z,this.collisionBoxArray=new l.CollisionBoxArray;const Ge=new l.DictionaryCoder(Object.keys(Z.layers).sort()),De=new l.FeatureIndex(this.tileID,this.promoteId);De.bucketLayerIDs=[];const Ue={},We={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge},st=J.familiesBySource[this.source];for(const Tn in st){const xn=Z.layers[Tn];if(!xn)continue;xn.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Tn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wn=Ge.encode(Tn),nr=[];for(let dr=0;dr<xn.length;dr++){const Jn=xn.feature(dr),zo=De.getId(Jn,Tn);nr.push({feature:Jn,id:zo,index:dr,sourceLayerIndex:wn})}for(const dr of st[Tn]){const Jn=dr[0];Jn.minzoom&&this.zoom<Math.floor(Jn.minzoom)||Jn.maxzoom&&this.zoom>=Jn.maxzoom||Jn.visibility!=="none"&&(F(dr,this.zoom,ge),(Ue[Jn.id]=Jn.createBucket({index:De.bucketLayerIDs.length,layers:dr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wn,sourceID:this.source})).populate(nr,We,this.tileID.canonical),De.bucketLayerIDs.push(dr.map(zo=>zo.id)))}}let mt,it,Vt,It;const Ut=l.mapObject(We.glyphDependencies,Tn=>Object.keys(Tn).map(Number));Object.keys(Ut).length?Ae.send("getGlyphs",{uid:this.uid,stacks:Ut},(Tn,xn)=>{mt||(mt=Tn,it=xn,_n.call(this))}):it={};const rn=Object.keys(We.iconDependencies);rn.length?Ae.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"icons"},(Tn,xn)=>{mt||(mt=Tn,Vt=xn,_n.call(this))}):Vt={};const $t=Object.keys(We.patternDependencies);function _n(){if(mt)return ke(mt);if(it&&Vt&&It){const Tn=new S(it),xn=new l.ImageAtlas(Vt,It);for(const wn in Ue){const nr=Ue[wn];nr instanceof l.SymbolBucket?(F(nr.layers,this.zoom,ge),l.performSymbolLayout(nr,it,Tn.positions,Vt,xn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):nr.hasPattern&&(nr instanceof l.LineBucket||nr instanceof l.FillBucket||nr instanceof l.FillExtrusionBucket)&&(F(nr.layers,this.zoom,ge),nr.addFeatures(We,this.tileID.canonical,xn.patternPositions))}this.status="done",ke(null,{buckets:Object.values(Ue).filter(wn=>!wn.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Tn.image,imageAtlas:xn,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?Vt:null,glyphPositions:this.returnDependencies?Tn.positions:null})}}$t.length?Ae.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"},(Tn,xn)=>{mt||(mt=Tn,It=xn,_n.call(this))}):It={},_n.call(this)}}function F(Ce,Z,J){const ge=new l.EvaluationParameters(Z);for(const Ae of Ce)Ae.recalculate(ge,J)}function Y(Ce,Z){const J=l.getArrayBuffer(Ce.request,(ge,Ae,ke,Ge)=>{ge?Z(ge):Ae&&Z(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(Ae)),rawData:Ae,cacheControl:ke,expires:Ge})});return()=>{J.cancel(),Z()}}class H{constructor(Z,J,ge,Ae){this.actor=Z,this.layerIndex=J,this.availableImages=ge,this.loadVectorData=Ae||Y,this.loading={},this.loaded={}}loadTile(Z,J){const ge=Z.uid;this.loading||(this.loading={});const Ae=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new l.RequestPerformance(Z.request),ke=this.loading[ge]=new C(Z);ke.abort=this.loadVectorData(Z,(Ge,De)=>{if(delete this.loading[ge],Ge||!De)return ke.status="done",this.loaded[ge]=ke,J(Ge);const Ue=De.rawData,We={};De.expires&&(We.expires=De.expires),De.cacheControl&&(We.cacheControl=De.cacheControl);const st={};if(Ae){const mt=Ae.finish();mt&&(st.resourceTiming=JSON.parse(JSON.stringify(mt)))}ke.vectorTile=De.vectorTile,ke.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,(mt,it)=>{if(mt||!it)return J(mt);J(null,l.extend({rawTileData:Ue.slice(0)},it,We,st))}),this.loaded=this.loaded||{},this.loaded[ge]=ke})}reloadTile(Z,J){const ge=this.loaded,Ae=Z.uid,ke=this;if(ge&&ge[Ae]){const Ge=ge[Ae];Ge.showCollisionBoxes=Z.showCollisionBoxes;const De=(Ue,We)=>{const st=Ge.reloadCallback;st&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,ke.layerIndex,this.availableImages,ke.actor,st)),J(Ue,We)};Ge.status==="parsing"?Ge.reloadCallback=De:Ge.status==="done"&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,De):De())}}abortTile(Z,J){const ge=this.loading,Ae=Z.uid;ge&&ge[Ae]&&ge[Ae].abort&&(ge[Ae].abort(),delete ge[Ae]),J()}removeTile(Z,J){const ge=this.loaded,Ae=Z.uid;ge&&ge[Ae]&&delete ge[Ae],J()}}class le{constructor(){this.loaded={}}loadTile(Z,J){const{uid:ge,encoding:Ae,rawImageData:ke}=Z,Ge=l.isImageBitmap(ke)?this.getImageData(ke):ke,De=new l.DEMData(ge,Ge,Ae);this.loaded=this.loaded||{},this.loaded[ge]=De,J(null,De)}getImageData(Z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Z.width,Z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Z.width,this.offscreenCanvas.height=Z.height,this.offscreenCanvasContext.drawImage(Z,0,0,Z.width,Z.height);const J=this.offscreenCanvasContext.getImageData(-1,-1,Z.width+2,Z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:J.width,height:J.height},J.data)}removeTile(Z){const J=this.loaded,ge=Z.uid;J&&J[ge]&&delete J[ge]}}var W=function Ce(Z,J){var ge,Ae=Z&&Z.type;if(Ae==="FeatureCollection")for(ge=0;ge<Z.features.length;ge++)Ce(Z.features[ge],J);else if(Ae==="GeometryCollection")for(ge=0;ge<Z.geometries.length;ge++)Ce(Z.geometries[ge],J);else if(Ae==="Feature")Ce(Z.geometry,J);else if(Ae==="Polygon")V(Z.coordinates,J);else if(Ae==="MultiPolygon")for(ge=0;ge<Z.coordinates.length;ge++)V(Z.coordinates[ge],J);return Z};function V(Ce,Z){if(Ce.length!==0){B(Ce[0],Z);for(var J=1;J<Ce.length;J++)B(Ce[J],!Z)}}function B(Ce,Z){for(var J=0,ge=0,Ae=0,ke=Ce.length,Ge=ke-1;Ae<ke;Ge=Ae++){var De=(Ce[Ae][0]-Ce[Ge][0])*(Ce[Ge][1]+Ce[Ae][1]),Ue=J+De;ge+=Math.abs(J)>=Math.abs(De)?J-Ue+De:De-Ue+J,J=Ue}J+ge>=0!=!!Z&&Ce.reverse()}const se=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class G{constructor(Z){this._feature=Z,this.extent=l.EXTENT,this.type=Z.type,this.properties=Z.tags,"id"in Z&&!isNaN(Z.id)&&(this.id=parseInt(Z.id,10))}loadGeometry(){if(this._feature.type===1){const Z=[];for(const J of this._feature.geometry)Z.push([new l.pointGeometry(J[0],J[1])]);return Z}{const Z=[];for(const J of this._feature.geometry){const ge=[];for(const Ae of J)ge.push(new l.pointGeometry(Ae[0],Ae[1]));Z.push(ge)}return Z}}toGeoJSON(Z,J,ge){return se.call(this,Z,J,ge)}}class j{constructor(Z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Z.length,this._features=Z}feature(Z){return new G(this._features[Z])}}var b={exports:{}},k=l.pointGeometry,U=l.vectorTile.VectorTileFeature,X=K;function K(Ce,Z){this.options=Z||{},this.features=Ce,this.length=Ce.length}function de(Ce,Z){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=Z||4096}K.prototype.feature=function(Ce){return new de(this.features[Ce],this.options.extent)},de.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var Z=0;Z<Ce.length;Z++){for(var J=Ce[Z],ge=[],Ae=0;Ae<J.length;Ae++)ge.push(new k(J[Ae][0],J[Ae][1]));this.geometry.push(ge)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,Z=1/0,J=-1/0,ge=1/0,Ae=-1/0,ke=0;ke<Ce.length;ke++)for(var Ge=Ce[ke],De=0;De<Ge.length;De++){var Ue=Ge[De];Z=Math.min(Z,Ue.x),J=Math.max(J,Ue.x),ge=Math.min(ge,Ue.y),Ae=Math.max(Ae,Ue.y)}return[Z,ge,J,Ae]},de.prototype.toGeoJSON=U.prototype.toGeoJSON;var ve=l.pbf,we=X;function ee(Ce){var Z=new ve;return function(J,ge){for(var Ae in J.layers)ge.writeMessage(3,ie,J.layers[Ae])}(Ce,Z),Z.finish()}function ie(Ce,Z){var J;Z.writeVarintField(15,Ce.version||1),Z.writeStringField(1,Ce.name||""),Z.writeVarintField(5,Ce.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<Ce.length;J++)ge.feature=Ce.feature(J),Z.writeMessage(2,ne,ge);var Ae=ge.keys;for(J=0;J<Ae.length;J++)Z.writeStringField(3,Ae[J]);var ke=ge.values;for(J=0;J<ke.length;J++)Z.writeMessage(4,je,ke[J])}function ne(Ce,Z){var J=Ce.feature;J.id!==void 0&&Z.writeVarintField(1,J.id),Z.writeMessage(2,te,Ce),Z.writeVarintField(3,J.type),Z.writeMessage(4,xe,J)}function te(Ce,Z){var J=Ce.feature,ge=Ce.keys,Ae=Ce.values,ke=Ce.keycache,Ge=Ce.valuecache;for(var De in J.properties){var Ue=J.properties[De],We=ke[De];if(Ue!==null){We===void 0&&(ge.push(De),ke[De]=We=ge.length-1),Z.writeVarint(We);var st=typeof Ue;st!=="string"&&st!=="boolean"&&st!=="number"&&(Ue=JSON.stringify(Ue));var mt=st+":"+Ue,it=Ge[mt];it===void 0&&(Ae.push(Ue),Ge[mt]=it=Ae.length-1),Z.writeVarint(it)}}}function he(Ce,Z){return(Z<<3)+(7&Ce)}function _e(Ce){return Ce<<1^Ce>>31}function xe(Ce,Z){for(var J=Ce.loadGeometry(),ge=Ce.type,Ae=0,ke=0,Ge=J.length,De=0;De<Ge;De++){var Ue=J[De],We=1;ge===1&&(We=Ue.length),Z.writeVarint(he(1,We));for(var st=ge===3?Ue.length-1:Ue.length,mt=0;mt<st;mt++){mt===1&&ge!==1&&Z.writeVarint(he(2,st-1));var it=Ue[mt].x-Ae,Vt=Ue[mt].y-ke;Z.writeVarint(_e(it)),Z.writeVarint(_e(Vt)),Ae+=it,ke+=Vt}ge===3&&Z.writeVarint(he(7,1))}}function je(Ce,Z){var J=typeof Ce;J==="string"?Z.writeStringField(1,Ce):J==="boolean"?Z.writeBooleanField(7,Ce):J==="number"&&(Ce%1!=0?Z.writeDoubleField(3,Ce):Ce<0?Z.writeSVarintField(6,Ce):Z.writeVarintField(5,Ce))}b.exports=ee,b.exports.fromVectorTileJs=ee,b.exports.fromGeojsonVt=function(Ce,Z){Z=Z||{};var J={};for(var ge in Ce)J[ge]=new we(Ce[ge].features,Z),J[ge].name=ge,J[ge].version=Z.version,J[ge].extent=Z.extent;return ee({layers:J})},b.exports.GeoJSONWrapper=we;var Ie=b.exports;function Pe(Ce,Z,J,ge,Ae,ke){if(Ae-ge<=J)return;const Ge=ge+Ae>>1;$e(Ce,Z,Ge,ge,Ae,ke%2),Pe(Ce,Z,J,ge,Ge-1,ke+1),Pe(Ce,Z,J,Ge+1,Ae,ke+1)}function $e(Ce,Z,J,ge,Ae,ke){for(;Ae>ge;){if(Ae-ge>600){const We=Ae-ge+1,st=J-ge+1,mt=Math.log(We),it=.5*Math.exp(2*mt/3),Vt=.5*Math.sqrt(mt*it*(We-it)/We)*(st-We/2<0?-1:1);$e(Ce,Z,J,Math.max(ge,Math.floor(J-st*it/We+Vt)),Math.min(Ae,Math.floor(J+(We-st)*it/We+Vt)),ke)}const Ge=Z[2*J+ke];let De=ge,Ue=Ae;for(Ne(Ce,Z,ge,J),Z[2*Ae+ke]>Ge&&Ne(Ce,Z,ge,Ae);De<Ue;){for(Ne(Ce,Z,De,Ue),De++,Ue--;Z[2*De+ke]<Ge;)De++;for(;Z[2*Ue+ke]>Ge;)Ue--}Z[2*ge+ke]===Ge?Ne(Ce,Z,ge,Ue):(Ue++,Ne(Ce,Z,Ue,Ae)),Ue<=J&&(ge=Ue+1),J<=Ue&&(Ae=Ue-1)}}function Ne(Ce,Z,J,ge){qe(Ce,J,ge),qe(Z,2*J,2*ge),qe(Z,2*J+1,2*ge+1)}function qe(Ce,Z,J){const ge=Ce[Z];Ce[Z]=Ce[J],Ce[J]=ge}function at(Ce,Z,J,ge){const Ae=Ce-J,ke=Z-ge;return Ae*Ae+ke*ke}const yt=Ce=>Ce[0],Pt=Ce=>Ce[1];class ht{constructor(Z,J=yt,ge=Pt,Ae=64,ke=Float64Array){this.nodeSize=Ae,this.points=Z;const Ge=Z.length<65536?Uint16Array:Uint32Array,De=this.ids=new Ge(Z.length),Ue=this.coords=new ke(2*Z.length);for(let We=0;We<Z.length;We++)De[We]=We,Ue[2*We]=J(Z[We]),Ue[2*We+1]=ge(Z[We]);Pe(De,Ue,Ae,0,De.length-1,0)}range(Z,J,ge,Ae){return function(ke,Ge,De,Ue,We,st,mt){const it=[0,ke.length-1,0],Vt=[];let It,Ut;for(;it.length;){const rn=it.pop(),$t=it.pop(),_n=it.pop();if($t-_n<=mt){for(let wn=_n;wn<=$t;wn++)It=Ge[2*wn],Ut=Ge[2*wn+1],It>=De&&It<=We&&Ut>=Ue&&Ut<=st&&Vt.push(ke[wn]);continue}const Tn=Math.floor((_n+$t)/2);It=Ge[2*Tn],Ut=Ge[2*Tn+1],It>=De&&It<=We&&Ut>=Ue&&Ut<=st&&Vt.push(ke[Tn]);const xn=(rn+1)%2;(rn===0?De<=It:Ue<=Ut)&&(it.push(_n),it.push(Tn-1),it.push(xn)),(rn===0?We>=It:st>=Ut)&&(it.push(Tn+1),it.push($t),it.push(xn))}return Vt}(this.ids,this.coords,Z,J,ge,Ae,this.nodeSize)}within(Z,J,ge){return function(Ae,ke,Ge,De,Ue,We){const st=[0,Ae.length-1,0],mt=[],it=Ue*Ue;for(;st.length;){const Vt=st.pop(),It=st.pop(),Ut=st.pop();if(It-Ut<=We){for(let xn=Ut;xn<=It;xn++)at(ke[2*xn],ke[2*xn+1],Ge,De)<=it&&mt.push(Ae[xn]);continue}const rn=Math.floor((Ut+It)/2),$t=ke[2*rn],_n=ke[2*rn+1];at($t,_n,Ge,De)<=it&&mt.push(Ae[rn]);const Tn=(Vt+1)%2;(Vt===0?Ge-Ue<=$t:De-Ue<=_n)&&(st.push(Ut),st.push(rn-1),st.push(Tn)),(Vt===0?Ge+Ue>=$t:De+Ue>=_n)&&(st.push(rn+1),st.push(It),st.push(Tn))}return mt}(this.ids,this.coords,Z,J,ge,this.nodeSize)}}const Et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ce=>Ce},Nt=Math.fround||(jt=new Float32Array(1),Ce=>(jt[0]=+Ce,jt[0]));var jt;class cn{constructor(Z){this.options=pe(Object.create(Et),Z),this.trees=new Array(this.options.maxZoom+1)}load(Z){const{log:J,minZoom:ge,maxZoom:Ae,nodeSize:ke}=this.options;J&&console.time("total time");const Ge=`prepare ${Z.length} points`;J&&console.time(Ge),this.points=Z;let De=[];for(let Ue=0;Ue<Z.length;Ue++)Z[Ue].geometry&&De.push(bn(Z[Ue],Ue));this.trees[Ae+1]=new ht(De,ze,Ke,ke,Float32Array),J&&console.timeEnd(Ge);for(let Ue=Ae;Ue>=ge;Ue--){const We=+Date.now();De=this._cluster(De,Ue),this.trees[Ue]=new ht(De,ze,Ke,ke,Float32Array),J&&console.log("z%d: %d clusters in %dms",Ue,De.length,+Date.now()-We)}return J&&console.timeEnd("total time"),this}getClusters(Z,J){let ge=((Z[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,Z[1]));let ke=Z[2]===180?180:((Z[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,Z[3]));if(Z[2]-Z[0]>=360)ge=-180,ke=180;else if(ge>ke){const st=this.getClusters([ge,Ae,180,Ge],J),mt=this.getClusters([-180,Ae,ke,Ge],J);return st.concat(mt)}const De=this.trees[this._limitZoom(J)],Ue=De.range(Ee(ge),R(Ge),Ee(ke),R(Ae)),We=[];for(const st of Ue){const mt=De.points[st];We.push(mt.numPoints?on(mt):this.points[mt.index])}return We}getChildren(Z){const J=this._getOriginId(Z),ge=this._getOriginZoom(Z),Ae="No cluster with the specified id.",ke=this.trees[ge];if(!ke)throw new Error(Ae);const Ge=ke.points[J];if(!Ge)throw new Error(Ae);const De=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Ue=ke.within(Ge.x,Ge.y,De),We=[];for(const st of Ue){const mt=ke.points[st];mt.parentId===Z&&We.push(mt.numPoints?on(mt):this.points[mt.index])}if(We.length===0)throw new Error(Ae);return We}getLeaves(Z,J,ge){const Ae=[];return this._appendLeaves(Ae,Z,J=J||10,ge=ge||0,0),Ae}getTile(Z,J,ge){const Ae=this.trees[this._limitZoom(Z)],ke=Math.pow(2,Z),{extent:Ge,radius:De}=this.options,Ue=De/Ge,We=(ge-Ue)/ke,st=(ge+1+Ue)/ke,mt={features:[]};return this._addTileFeatures(Ae.range((J-Ue)/ke,We,(J+1+Ue)/ke,st),Ae.points,J,ge,ke,mt),J===0&&this._addTileFeatures(Ae.range(1-Ue/ke,We,1,st),Ae.points,ke,ge,ke,mt),J===ke-1&&this._addTileFeatures(Ae.range(0,We,Ue/ke,st),Ae.points,-1,ge,ke,mt),mt.features.length?mt:null}getClusterExpansionZoom(Z){let J=this._getOriginZoom(Z)-1;for(;J<=this.options.maxZoom;){const ge=this.getChildren(Z);if(J++,ge.length!==1)break;Z=ge[0].properties.cluster_id}return J}_appendLeaves(Z,J,ge,Ae,ke){const Ge=this.getChildren(J);for(const De of Ge){const Ue=De.properties;if(Ue&&Ue.cluster?ke+Ue.point_count<=Ae?ke+=Ue.point_count:ke=this._appendLeaves(Z,Ue.cluster_id,ge,Ae,ke):ke<Ae?ke++:Z.push(De),Z.length===ge)break}return ke}_addTileFeatures(Z,J,ge,Ae,ke,Ge){for(const De of Z){const Ue=J[De],We=Ue.numPoints;let st,mt,it;if(We)st=En(Ue),mt=Ue.x,it=Ue.y;else{const Ut=this.points[Ue.index];st=Ut.properties,mt=Ee(Ut.geometry.coordinates[0]),it=R(Ut.geometry.coordinates[1])}const Vt={type:1,geometry:[[Math.round(this.options.extent*(mt*ke-ge)),Math.round(this.options.extent*(it*ke-Ae))]],tags:st};let It;We?It=Ue.id:this.options.generateId?It=Ue.index:this.points[Ue.index].id&&(It=this.points[Ue.index].id),It!==void 0&&(Vt.id=It),Ge.features.push(Vt)}}_limitZoom(Z){return Math.max(this.options.minZoom,Math.min(+Z,this.options.maxZoom+1))}_cluster(Z,J){const ge=[],{radius:Ae,extent:ke,reduce:Ge,minPoints:De}=this.options,Ue=Ae/(ke*Math.pow(2,J));for(let We=0;We<Z.length;We++){const st=Z[We];if(st.zoom<=J)continue;st.zoom=J;const mt=this.trees[J+1],it=mt.within(st.x,st.y,Ue),Vt=st.numPoints||1;let It=Vt;for(const Ut of it){const rn=mt.points[Ut];rn.zoom>J&&(It+=rn.numPoints||1)}if(It>Vt&&It>=De){let Ut=st.x*Vt,rn=st.y*Vt,$t=Ge&&Vt>1?this._map(st,!0):null;const _n=(We<<5)+(J+1)+this.points.length;for(const Tn of it){const xn=mt.points[Tn];if(xn.zoom<=J)continue;xn.zoom=J;const wn=xn.numPoints||1;Ut+=xn.x*wn,rn+=xn.y*wn,xn.parentId=_n,Ge&&($t||($t=this._map(st,!0)),Ge($t,this._map(xn)))}st.parentId=_n,ge.push(Cn(Ut/It,rn/It,_n,It,$t))}else if(ge.push(st),It>1)for(const Ut of it){const rn=mt.points[Ut];rn.zoom<=J||(rn.zoom=J,ge.push(rn))}}return ge}_getOriginId(Z){return Z-this.points.length>>5}_getOriginZoom(Z){return(Z-this.points.length)%32}_map(Z,J){if(Z.numPoints)return J?pe({},Z.properties):Z.properties;const ge=this.points[Z.index].properties,Ae=this.options.map(ge);return J&&Ae===ge?pe({},Ae):Ae}}function Cn(Ce,Z,J,ge,Ae){return{x:Nt(Ce),y:Nt(Z),zoom:1/0,id:J,parentId:-1,numPoints:ge,properties:Ae}}function bn(Ce,Z){const[J,ge]=Ce.geometry.coordinates;return{x:Nt(Ee(J)),y:Nt(R(ge)),zoom:1/0,index:Z,parentId:-1}}function on(Ce){return{type:"Feature",id:Ce.id,properties:En(Ce),geometry:{type:"Point",coordinates:[(Z=Ce.x,360*(Z-.5)),O(Ce.y)]}};var Z}function En(Ce){const Z=Ce.numPoints,J=Z>=1e4?`${Math.round(Z/1e3)}k`:Z>=1e3?Math.round(Z/100)/10+"k":Z;return pe(pe({},Ce.properties),{cluster:!0,cluster_id:Ce.id,point_count:Z,point_count_abbreviated:J})}function Ee(Ce){return Ce/360+.5}function R(Ce){const Z=Math.sin(Ce*Math.PI/180),J=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return J<0?0:J>1?1:J}function O(Ce){const Z=(180-360*Ce)*Math.PI/180;return 360*Math.atan(Math.exp(Z))/Math.PI-90}function pe(Ce,Z){for(const J in Z)Ce[J]=Z[J];return Ce}function ze(Ce){return Ce.x}function Ke(Ce){return Ce.y}function ot(Ce,Z,J,ge){for(var Ae,ke=ge,Ge=J-Z>>1,De=J-Z,Ue=Ce[Z],We=Ce[Z+1],st=Ce[J],mt=Ce[J+1],it=Z+3;it<J;it+=3){var Vt=ae(Ce[it],Ce[it+1],Ue,We,st,mt);if(Vt>ke)Ae=it,ke=Vt;else if(Vt===ke){var It=Math.abs(it-Ge);It<De&&(Ae=it,De=It)}}ke>ge&&(Ae-Z>3&&ot(Ce,Z,Ae,ge),Ce[Ae+2]=ke,J-Ae>3&&ot(Ce,Ae,J,ge))}function ae(Ce,Z,J,ge,Ae,ke){var Ge=Ae-J,De=ke-ge;if(Ge!==0||De!==0){var Ue=((Ce-J)*Ge+(Z-ge)*De)/(Ge*Ge+De*De);Ue>1?(J=Ae,ge=ke):Ue>0&&(J+=Ge*Ue,ge+=De*Ue)}return(Ge=Ce-J)*Ge+(De=Z-ge)*De}function A(Ce,Z,J,ge){var Ae={id:Ce===void 0?null:Ce,type:Z,geometry:J,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var Ge=ke.geometry,De=ke.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")z(ke,Ge);else if(De==="Polygon"||De==="MultiLineString")for(var Ue=0;Ue<Ge.length;Ue++)z(ke,Ge[Ue]);else if(De==="MultiPolygon")for(Ue=0;Ue<Ge.length;Ue++)for(var We=0;We<Ge[Ue].length;We++)z(ke,Ge[Ue][We])}(Ae),Ae}function z(Ce,Z){for(var J=0;J<Z.length;J+=3)Ce.minX=Math.min(Ce.minX,Z[J]),Ce.minY=Math.min(Ce.minY,Z[J+1]),Ce.maxX=Math.max(Ce.maxX,Z[J]),Ce.maxY=Math.max(Ce.maxY,Z[J+1])}function be(Ce,Z,J,ge){if(Z.geometry){var Ae=Z.geometry.coordinates,ke=Z.geometry.type,Ge=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),De=[],Ue=Z.id;if(J.promoteId?Ue=Z.properties[J.promoteId]:J.generateId&&(Ue=ge||0),ke==="Point")Be(Ae,De);else if(ke==="MultiPoint")for(var We=0;We<Ae.length;We++)Be(Ae[We],De);else if(ke==="LineString")Xe(Ae,De,Ge,!1);else if(ke==="MultiLineString"){if(J.lineMetrics){for(We=0;We<Ae.length;We++)Xe(Ae[We],De=[],Ge,!1),Ce.push(A(Ue,"LineString",De,Z.properties));return}Qe(Ae,De,Ge,!1)}else if(ke==="Polygon")Qe(Ae,De,Ge,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(We=0;We<Z.geometry.geometries.length;We++)be(Ce,{id:Ue,geometry:Z.geometry.geometries[We],properties:Z.properties},J,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(We=0;We<Ae.length;We++){var st=[];Qe(Ae[We],st,Ge,!0),De.push(st)}}Ce.push(A(Ue,ke,De,Z.properties))}}function Be(Ce,Z){Z.push(Wt(Ce[0])),Z.push(Sn(Ce[1])),Z.push(0)}function Xe(Ce,Z,J,ge){for(var Ae,ke,Ge=0,De=0;De<Ce.length;De++){var Ue=Wt(Ce[De][0]),We=Sn(Ce[De][1]);Z.push(Ue),Z.push(We),Z.push(0),De>0&&(Ge+=ge?(Ae*We-Ue*ke)/2:Math.sqrt(Math.pow(Ue-Ae,2)+Math.pow(We-ke,2))),Ae=Ue,ke=We}var st=Z.length-3;Z[2]=1,ot(Z,0,st,J),Z[st+2]=1,Z.size=Math.abs(Ge),Z.start=0,Z.end=Z.size}function Qe(Ce,Z,J,ge){for(var Ae=0;Ae<Ce.length;Ae++){var ke=[];Xe(Ce[Ae],ke,J,ge),Z.push(ke)}}function Wt(Ce){return Ce/360+.5}function Sn(Ce){var Z=Math.sin(Ce*Math.PI/180),J=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return J<0?0:J>1?1:J}function fn(Ce,Z,J,ge,Ae,ke,Ge,De){if(ge/=Z,ke>=(J/=Z)&&Ge<ge)return Ce;if(Ge<J||ke>=ge)return null;for(var Ue=[],We=0;We<Ce.length;We++){var st=Ce[We],mt=st.geometry,it=st.type,Vt=Ae===0?st.minX:st.minY,It=Ae===0?st.maxX:st.maxY;if(Vt>=J&&It<ge)Ue.push(st);else if(!(It<J||Vt>=ge)){var Ut=[];if(it==="Point"||it==="MultiPoint")ft(mt,Ut,J,ge,Ae);else if(it==="LineString")Mt(mt,Ut,J,ge,Ae,!1,De.lineMetrics);else if(it==="MultiLineString")Ir(mt,Ut,J,ge,Ae,!1);else if(it==="Polygon")Ir(mt,Ut,J,ge,Ae,!0);else if(it==="MultiPolygon")for(var rn=0;rn<mt.length;rn++){var $t=[];Ir(mt[rn],$t,J,ge,Ae,!0),$t.length&&Ut.push($t)}if(Ut.length){if(De.lineMetrics&&it==="LineString"){for(rn=0;rn<Ut.length;rn++)Ue.push(A(st.id,it,Ut[rn],st.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(Ut.length===1?(it="LineString",Ut=Ut[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=Ut.length===3?"Point":"MultiPoint"),Ue.push(A(st.id,it,Ut,st.tags))}}}return Ue.length?Ue:null}function ft(Ce,Z,J,ge,Ae){for(var ke=0;ke<Ce.length;ke+=3){var Ge=Ce[ke+Ae];Ge>=J&&Ge<=ge&&(Z.push(Ce[ke]),Z.push(Ce[ke+1]),Z.push(Ce[ke+2]))}}function Mt(Ce,Z,J,ge,Ae,ke,Ge){for(var De,Ue,We=un(Ce),st=Ae===0?hn:rr,mt=Ce.start,it=0;it<Ce.length-3;it+=3){var Vt=Ce[it],It=Ce[it+1],Ut=Ce[it+2],rn=Ce[it+3],$t=Ce[it+4],_n=Ae===0?Vt:It,Tn=Ae===0?rn:$t,xn=!1;Ge&&(De=Math.sqrt(Math.pow(Vt-rn,2)+Math.pow(It-$t,2))),_n<J?Tn>J&&(Ue=st(We,Vt,It,rn,$t,J),Ge&&(We.start=mt+De*Ue)):_n>ge?Tn<ge&&(Ue=st(We,Vt,It,rn,$t,ge),Ge&&(We.start=mt+De*Ue)):Qr(We,Vt,It,Ut),Tn<J&&_n>=J&&(Ue=st(We,Vt,It,rn,$t,J),xn=!0),Tn>ge&&_n<=ge&&(Ue=st(We,Vt,It,rn,$t,ge),xn=!0),!ke&&xn&&(Ge&&(We.end=mt+De*Ue),Z.push(We),We=un(Ce)),Ge&&(mt+=De)}var wn=Ce.length-3;Vt=Ce[wn],It=Ce[wn+1],Ut=Ce[wn+2],(_n=Ae===0?Vt:It)>=J&&_n<=ge&&Qr(We,Vt,It,Ut),wn=We.length-3,ke&&wn>=3&&(We[wn]!==We[0]||We[wn+1]!==We[1])&&Qr(We,We[0],We[1],We[2]),We.length&&Z.push(We)}function un(Ce){var Z=[];return Z.size=Ce.size,Z.start=Ce.start,Z.end=Ce.end,Z}function Ir(Ce,Z,J,ge,Ae,ke){for(var Ge=0;Ge<Ce.length;Ge++)Mt(Ce[Ge],Z,J,ge,Ae,ke,!1)}function Qr(Ce,Z,J,ge){Ce.push(Z),Ce.push(J),Ce.push(ge)}function hn(Ce,Z,J,ge,Ae,ke){var Ge=(ke-Z)/(ge-Z);return Ce.push(ke),Ce.push(J+(Ae-J)*Ge),Ce.push(1),Ge}function rr(Ce,Z,J,ge,Ae,ke){var Ge=(ke-J)/(Ae-J);return Ce.push(Z+(ge-Z)*Ge),Ce.push(ke),Ce.push(1),Ge}function wi(Ce,Z){for(var J=[],ge=0;ge<Ce.length;ge++){var Ae,ke=Ce[ge],Ge=ke.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")Ae=_r(ke.geometry,Z);else if(Ge==="MultiLineString"||Ge==="Polygon"){Ae=[];for(var De=0;De<ke.geometry.length;De++)Ae.push(_r(ke.geometry[De],Z))}else if(Ge==="MultiPolygon")for(Ae=[],De=0;De<ke.geometry.length;De++){for(var Ue=[],We=0;We<ke.geometry[De].length;We++)Ue.push(_r(ke.geometry[De][We],Z));Ae.push(Ue)}J.push(A(ke.id,Ge,Ae,ke.tags))}return J}function _r(Ce,Z){var J=[];J.size=Ce.size,Ce.start!==void 0&&(J.start=Ce.start,J.end=Ce.end);for(var ge=0;ge<Ce.length;ge+=3)J.push(Ce[ge]+Z,Ce[ge+1],Ce[ge+2]);return J}function Vr(Ce,Z){if(Ce.transformed)return Ce;var J,ge,Ae,ke=1<<Ce.z,Ge=Ce.x,De=Ce.y;for(J=0;J<Ce.features.length;J++){var Ue=Ce.features[J],We=Ue.geometry,st=Ue.type;if(Ue.geometry=[],st===1)for(ge=0;ge<We.length;ge+=2)Ue.geometry.push(Zt(We[ge],We[ge+1],Z,ke,Ge,De));else for(ge=0;ge<We.length;ge++){var mt=[];for(Ae=0;Ae<We[ge].length;Ae+=2)mt.push(Zt(We[ge][Ae],We[ge][Ae+1],Z,ke,Ge,De));Ue.geometry.push(mt)}}return Ce.transformed=!0,Ce}function Zt(Ce,Z,J,ge,Ae,ke){return[Math.round(J*(Ce*ge-Ae)),Math.round(J*(Z*ge-ke))]}function Gt(Ce,Z,J,ge,Ae){for(var ke=Z===Ae.maxZoom?0:Ae.tolerance/((1<<Z)*Ae.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:ge,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<Ce.length;De++){Ge.numFeatures++,Ht(Ge,Ce[De],ke,Ae);var Ue=Ce[De].minX,We=Ce[De].minY,st=Ce[De].maxX,mt=Ce[De].maxY;Ue<Ge.minX&&(Ge.minX=Ue),We<Ge.minY&&(Ge.minY=We),st>Ge.maxX&&(Ge.maxX=st),mt>Ge.maxY&&(Ge.maxY=mt)}return Ge}function Ht(Ce,Z,J,ge){var Ae=Z.geometry,ke=Z.type,Ge=[];if(ke==="Point"||ke==="MultiPoint")for(var De=0;De<Ae.length;De+=3)Ge.push(Ae[De]),Ge.push(Ae[De+1]),Ce.numPoints++,Ce.numSimplified++;else if(ke==="LineString")An(Ge,Ae,Ce,J,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(De=0;De<Ae.length;De++)An(Ge,Ae[De],Ce,J,ke==="Polygon",De===0);else if(ke==="MultiPolygon")for(var Ue=0;Ue<Ae.length;Ue++){var We=Ae[Ue];for(De=0;De<We.length;De++)An(Ge,We[De],Ce,J,!0,De===0)}if(Ge.length){var st=Z.tags||null;if(ke==="LineString"&&ge.lineMetrics){for(var mt in st={},Z.tags)st[mt]=Z.tags[mt];st.mapbox_clip_start=Ae.start/Ae.size,st.mapbox_clip_end=Ae.end/Ae.size}var it={geometry:Ge,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:st};Z.id!==null&&(it.id=Z.id),Ce.features.push(it)}}function An(Ce,Z,J,ge,Ae,ke){var Ge=ge*ge;if(ge>0&&Z.size<(Ae?Ge:ge))J.numPoints+=Z.length/3;else{for(var De=[],Ue=0;Ue<Z.length;Ue+=3)(ge===0||Z[Ue+2]>Ge)&&(J.numSimplified++,De.push(Z[Ue]),De.push(Z[Ue+1])),J.numPoints++;Ae&&function(We,st){for(var mt=0,it=0,Vt=We.length,It=Vt-2;it<Vt;It=it,it+=2)mt+=(We[it]-We[It])*(We[it+1]+We[It+1]);if(mt>0===st)for(it=0,Vt=We.length;it<Vt/2;it+=2){var Ut=We[it],rn=We[it+1];We[it]=We[Vt-2-it],We[it+1]=We[Vt-1-it],We[Vt-2-it]=Ut,We[Vt-1-it]=rn}}(De,ke),Ce.push(De)}}function zn(Ce,Z){var J=(Z=this.options=function(Ae,ke){for(var Ge in ke)Ae[Ge]=ke[Ge];return Ae}(Object.create(this.options),Z)).debug;if(J&&console.time("preprocess data"),Z.maxZoom<0||Z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Z.promoteId&&Z.generateId)throw new Error("promoteId and generateId cannot be used together.");var ge=function(Ae,ke){var Ge=[];if(Ae.type==="FeatureCollection")for(var De=0;De<Ae.features.length;De++)be(Ge,Ae.features[De],ke,De);else be(Ge,Ae.type==="Feature"?Ae:{geometry:Ae},ke);return Ge}(Ce,Z);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Z.indexMaxZoom,Z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ge=function(Ae,ke){var Ge=ke.buffer/ke.extent,De=Ae,Ue=fn(Ae,1,-1-Ge,Ge,0,-1,2,ke),We=fn(Ae,1,1-Ge,2+Ge,0,-1,2,ke);return(Ue||We)&&(De=fn(Ae,1,-Ge,1+Ge,0,-1,2,ke)||[],Ue&&(De=wi(Ue,1).concat(De)),We&&(De=De.concat(wi(We,-1)))),De}(ge,Z),ge.length&&this.splitTile(ge,0,0,0),J&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ir(Ce,Z,J){return 32*((1<<Ce)*J+Z)+Ce}function Gr(Ce,Z){const J=Ce.tileID.canonical;if(!this._geoJSONIndex)return Z(null,null);const ge=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ge)return Z(null,null);const Ae=new j(ge.features);let ke=Ie(Ae);ke.byteOffset===0&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),Z(null,{vectorTile:Ae,rawData:ke.buffer})}zn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zn.prototype.splitTile=function(Ce,Z,J,ge,Ae,ke,Ge){for(var De=[Ce,Z,J,ge],Ue=this.options,We=Ue.debug;De.length;){ge=De.pop(),J=De.pop(),Z=De.pop(),Ce=De.pop();var st=1<<Z,mt=ir(Z,J,ge),it=this.tiles[mt];if(!it&&(We>1&&console.time("creation"),it=this.tiles[mt]=Gt(Ce,Z,J,ge,Ue),this.tileCoords.push({z:Z,x:J,y:ge}),We)){We>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Z,J,ge,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));var Vt="z"+Z;this.stats[Vt]=(this.stats[Vt]||0)+1,this.total++}if(it.source=Ce,Ae){if(Z===Ue.maxZoom||Z===Ae)continue;var It=1<<Ae-Z;if(J!==Math.floor(ke/It)||ge!==Math.floor(Ge/It))continue}else if(Z===Ue.indexMaxZoom||it.numPoints<=Ue.indexMaxPoints)continue;if(it.source=null,Ce.length!==0){We>1&&console.time("clipping");var Ut,rn,$t,_n,Tn,xn,wn=.5*Ue.buffer/Ue.extent,nr=.5-wn,dr=.5+wn,Jn=1+wn;Ut=rn=$t=_n=null,Tn=fn(Ce,st,J-wn,J+dr,0,it.minX,it.maxX,Ue),xn=fn(Ce,st,J+nr,J+Jn,0,it.minX,it.maxX,Ue),Ce=null,Tn&&(Ut=fn(Tn,st,ge-wn,ge+dr,1,it.minY,it.maxY,Ue),rn=fn(Tn,st,ge+nr,ge+Jn,1,it.minY,it.maxY,Ue),Tn=null),xn&&($t=fn(xn,st,ge-wn,ge+dr,1,it.minY,it.maxY,Ue),_n=fn(xn,st,ge+nr,ge+Jn,1,it.minY,it.maxY,Ue),xn=null),We>1&&console.timeEnd("clipping"),De.push(Ut||[],Z+1,2*J,2*ge),De.push(rn||[],Z+1,2*J,2*ge+1),De.push($t||[],Z+1,2*J+1,2*ge),De.push(_n||[],Z+1,2*J+1,2*ge+1)}}},zn.prototype.getTile=function(Ce,Z,J){var ge=this.options,Ae=ge.extent,ke=ge.debug;if(Ce<0||Ce>24)return null;var Ge=1<<Ce,De=ir(Ce,Z=(Z%Ge+Ge)%Ge,J);if(this.tiles[De])return Vr(this.tiles[De],Ae);ke>1&&console.log("drilling down to z%d-%d-%d",Ce,Z,J);for(var Ue,We=Ce,st=Z,mt=J;!Ue&&We>0;)We--,st=Math.floor(st/2),mt=Math.floor(mt/2),Ue=this.tiles[ir(We,st,mt)];return Ue&&Ue.source?(ke>1&&console.log("found parent tile z%d-%d-%d",We,st,mt),ke>1&&console.time("drilling down"),this.splitTile(Ue.source,We,st,mt,Ce,Z,J),ke>1&&console.timeEnd("drilling down"),this.tiles[De]?Vr(this.tiles[De],Ae):null):null};class hi extends H{constructor(Z,J,ge,Ae){super(Z,J,ge,Gr),Ae&&(this.loadGeoJSON=Ae)}loadData(Z,J){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=J,this._pendingLoadDataParams=Z,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const Z=this._pendingCallback,J=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const ge=!!(J&&J.request&&J.request.collectResourceTiming)&&new l.RequestPerformance(J.request);this.loadGeoJSON(J,(Ae,ke)=>{if(Ae||!ke)return Z(Ae);if(typeof ke!="object")return Z(new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`));{W(ke,!0);try{if(J.filter){const De=l.createExpression(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(De.result==="error")throw new Error(De.value.map(We=>`${We.key}: ${We.message}`).join(", "));ke={type:"FeatureCollection",features:ke.features.filter(We=>De.value.evaluate({zoom:0},We))}}this._geoJSONIndex=J.cluster?new cn(function({superclusterOptions:De,clusterProperties:Ue}){if(!Ue||!De)return De;const We={},st={},mt={accumulated:null,zoom:0},it={properties:null},Vt=Object.keys(Ue);for(const It of Vt){const[Ut,rn]=Ue[It],$t=l.createExpression(rn),_n=l.createExpression(typeof Ut=="string"?[Ut,["accumulated"],["get",It]]:Ut);We[It]=$t.value,st[It]=_n.value}return De.map=It=>{it.properties=It;const Ut={};for(const rn of Vt)Ut[rn]=We[rn].evaluate(mt,it);return Ut},De.reduce=(It,Ut)=>{it.properties=Ut;for(const rn of Vt)mt.accumulated=It[rn],It[rn]=st[rn].evaluate(mt,it)},De}(J)).load(ke.features):function(De,Ue){return new zn(De,Ue)}(ke,J.geojsonVtOptions)}catch(De){return Z(De)}this.loaded={};const Ge={};if(ge){const De=ge.finish();De&&(Ge.resourceTiming={},Ge.resourceTiming[J.source]=JSON.parse(JSON.stringify(De)))}Z(null,Ge)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(Z,J){const ge=this.loaded;return ge&&ge[Z.uid]?super.reloadTile(Z,J):this.loadTile(Z,J)}loadGeoJSON(Z,J){if(Z.request)l.getJSON(Z.request,J);else{if(typeof Z.data!="string")return J(new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`));try{return J(null,JSON.parse(Z.data))}catch{return J(new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`))}}}removeSource(Z,J){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),J()}getClusterExpansionZoom(Z,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId))}catch(ge){J(ge)}}getClusterChildren(Z,J){try{J(null,this._geoJSONIndex.getChildren(Z.clusterId))}catch(ge){J(ge)}}getClusterLeaves(Z,J){try{J(null,this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset))}catch(ge){J(ge)}}}class Ps{constructor(Z){this.self=Z,this.actor=new l.Actor(Z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:H,geojson:hi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,ge)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=ge},this.self.registerRTLTextPlugin=J=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=J.applyArabicShaping,l.plugin.processBidirectionalText=J.processBidirectionalText,l.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}}setReferrer(Z,J){this.referrer=J}setImages(Z,J,ge){this.availableImages[Z]=J;for(const Ae in this.workerSources[Z]){const ke=this.workerSources[Z][Ae];for(const Ge in ke)ke[Ge].availableImages=J}ge()}setLayers(Z,J,ge){this.getLayerIndex(Z).replace(J),ge()}updateLayers(Z,J,ge){this.getLayerIndex(Z).update(J.layers,J.removedIds),ge()}loadTile(Z,J,ge){this.getWorkerSource(Z,J.type,J.source).loadTile(J,ge)}loadDEMTile(Z,J,ge){this.getDEMWorkerSource(Z,J.source).loadTile(J,ge)}reloadTile(Z,J,ge){this.getWorkerSource(Z,J.type,J.source).reloadTile(J,ge)}abortTile(Z,J,ge){this.getWorkerSource(Z,J.type,J.source).abortTile(J,ge)}removeTile(Z,J,ge){this.getWorkerSource(Z,J.type,J.source).removeTile(J,ge)}removeDEMTile(Z,J){this.getDEMWorkerSource(Z,J.source).removeTile(J)}removeSource(Z,J,ge){if(!this.workerSources[Z]||!this.workerSources[Z][J.type]||!this.workerSources[Z][J.type][J.source])return;const Ae=this.workerSources[Z][J.type][J.source];delete this.workerSources[Z][J.type][J.source],Ae.removeSource!==void 0?Ae.removeSource(J,ge):ge()}loadWorkerSource(Z,J,ge){try{this.self.importScripts(J.url),ge()}catch(Ae){ge(Ae.toString())}}syncRTLPluginState(Z,J,ge){try{l.plugin.setState(J);const Ae=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Ae!=null){this.self.importScripts(Ae);const ke=l.plugin.isParsed();ge(ke?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ae}`),ke)}}catch(Ae){ge(Ae.toString())}}getAvailableImages(Z){let J=this.availableImages[Z];return J||(J=[]),J}getLayerIndex(Z){let J=this.layerIndexes[Z];return J||(J=this.layerIndexes[Z]=new T),J}getWorkerSource(Z,J,ge){if(this.workerSources[Z]||(this.workerSources[Z]={}),this.workerSources[Z][J]||(this.workerSources[Z][J]={}),!this.workerSources[Z][J][ge]){const Ae={send:(ke,Ge,De)=>{this.actor.send(ke,Ge,De,Z)}};this.workerSources[Z][J][ge]=new this.workerSourceTypes[J](Ae,this.getLayerIndex(Z),this.getAvailableImages(Z))}return this.workerSources[Z][J][ge]}getDEMWorkerSource(Z,J){return this.demWorkerSources[Z]||(this.demWorkerSources[Z]={}),this.demWorkerSources[Z][J]||(this.demWorkerSources[Z][J]=new le),this.demWorkerSources[Z][J]}enforceCacheSizeLimit(Z,J){l.enforceCacheSizeLimit(J)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ps(self)),Ps}),f(["./shared"],function(l){var w=E;function E(m){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var d,y,x=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(x);try{y=new Worker(P),d=!0}catch{d=!1}return y&&y.terminate(),URL.revokeObjectURL(P),d}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var d=document.createElement("canvas");d.width=d.height=1;var y=d.getContext("2d");if(!y)return!1;var x=y.getImageData(0,0,1,1);return x&&x.width===d.width}()?(T[c=i&&i.failIfMajorPerformanceCaveat]===void 0&&(T[c]=function(d){var y,x=function(P){var L=document.createElement("canvas"),D=Object.create(E.webGLContextAttributes);return D.failIfMajorPerformanceCaveat=P,L.getContext("webgl",D)||L.getContext("experimental-webgl",D)}(d);if(!x)return!1;try{y=x.createShader(x.VERTEX_SHADER)}catch{return!1}return!(!y||x.isContextLost())&&(x.shaderSource(y,"void main() {}"),x.compileShader(y),x.getShaderParameter(y,x.COMPILE_STATUS)===!0)}(c)),T[c]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var c}(m)}var T={};function S(m,i){if(Array.isArray(m)){if(!Array.isArray(i)||m.length!==i.length)return!1;for(let c=0;c<m.length;c++)if(!S(m[c],i[c]))return!1;return!0}if(typeof m=="object"&&m!==null&&i!==null){if(typeof i!="object"||Object.keys(m).length!==Object.keys(i).length)return!1;for(const c in m)if(!S(m[c],i[c]))return!1;return!0}return m===i}E.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class C{static testProp(i){if(!C.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in C.docStyle)return i[c];return i[0]}static create(i,c,d){const y=window.document.createElement(i);return c!==void 0&&(y.className=c),d&&d.appendChild(y),y}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(i,c){i.style[C.transformProp]=c}static addEventListener(i,c,d,y={}){i.addEventListener(c,d,"passive"in y?y:y.capture)}static removeEventListener(i,c,d,y={}){i.removeEventListener(c,d,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static mousePos(i,c){const d=i.getBoundingClientRect();return new l.pointGeometry(c.clientX-d.left-i.clientLeft,c.clientY-d.top-i.clientTop)}static touchPos(i,c){const d=i.getBoundingClientRect(),y=[];for(let x=0;x<c.length;x++)y.push(new l.pointGeometry(c[x].clientX-d.left-i.clientLeft,c[x].clientY-d.top-i.clientTop));return y}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}C.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);class F{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,d){const y=function(x){const P=x.match(Y);if(!P)throw new Error(`Unable to parse URL "${x}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(i);return y.path+=`${c}${d}`,function(x){const P=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${P}`}(y)}setTransformRequest(i){this._transformRequestFn=i}}const Y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function H(m){var i=new l.ARRAY_TYPE(3);return i[0]=m[0],i[1]=m[1],i[2]=m[2],i}function le(m,i,c){var d=new l.ARRAY_TYPE(3);return d[0]=m,d[1]=i,d[2]=c,d}var W,V=function(m,i,c){return m[0]=i[0]-c[0],m[1]=i[1]-c[1],m[2]=i[2]-c[2],m};W=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(W[0]=0,W[1]=0,W[2]=0);var B=function(m){var i=m[0],c=m[1];return i*i+c*c};(function(){var m=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(m[0]=0,m[1]=0)})();class se{constructor(i,c,d,y){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(c,y)}update(i,c,d){const{width:y,height:x}=i,P=!(this.size&&this.size[0]===y&&this.size[1]===x||d),{context:L}=this,{gl:D}=L;if(this.useMipmap=!!(c&&c.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!c||c.premultiply!==!1)),P)this.size=[y,x],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.isImageBitmap(i)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,i):D.texImage2D(D.TEXTURE_2D,0,this.format,y,x,0,this.format,D.UNSIGNED_BYTE,i.data);else{const{x:q,y:oe}=d||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.isImageBitmap(i)?D.texSubImage2D(D.TEXTURE_2D,0,q,oe,D.RGBA,D.UNSIGNED_BYTE,i):D.texSubImage2D(D.TEXTURE_2D,0,q,oe,y,x,D.RGBA,D.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D)}bind(i,c,d){const{context:y}=this,{gl:x}=y;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||i),this.filter=i),c!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function G(m){const{userImage:i}=m;return!!(i&&i.render&&i.render())&&(m.data.replace(new Uint8Array(i.data.buffer)),!0)}class j extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:d}of this.requestors)this._notify(c,d);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,c){this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let d=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),d=!1),d}_validateStretch(i,c){if(!i)return!0;let d=0;for(const y of i){if(y[0]<d||y[1]<y[0]||c<y[1])return!1;d=y[1]}return!0}_validateContent(i,c){return!(i&&(i.length!==4||i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,c){c.version=this.images[i].version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let d=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(d=!1);this.isLoaded()||d?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const d={};for(const y of i){this.images[y]||this.fire(new l.Event("styleimagemissing",{id:y}));const x=this.images[y];x?d[y]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:l.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,d)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],d=this.getImage(i);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{const y={w:d.data.width+2,h:d.data.height+2,x:0,y:0},x=new l.ImagePosition(y,d);this.patterns[i]={bin:y,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new se(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:d}=l.potpack(i),y=this.atlasImage;y.resize({width:c||1,height:d||1});for(const x in this.patterns){const{bin:P}=this.patterns[x],L=P.x+1,D=P.y+1,q=this.images[x].data,oe=q.width,ce=q.height;l.RGBAImage.copy(q,y,{x:0,y:0},{x:L,y:D},{width:oe,height:ce}),l.RGBAImage.copy(q,y,{x:0,y:ce-1},{x:L,y:D-1},{width:oe,height:1}),l.RGBAImage.copy(q,y,{x:0,y:0},{x:L,y:D+ce},{width:oe,height:1}),l.RGBAImage.copy(q,y,{x:oe-1,y:0},{x:L-1,y:D},{width:1,height:ce}),l.RGBAImage.copy(q,y,{x:0,y:0},{x:L+oe,y:D},{width:1,height:ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const d=this.images[c];G(d)&&this.updateImage(c,d)}}}const b=1e20;function k(m,i,c,d,y,x,P,L,D){for(let q=i;q<i+d;q++)U(m,c*x+q,x,y,P,L,D);for(let q=c;q<c+y;q++)U(m,q*x+i,1,d,P,L,D)}function U(m,i,c,d,y,x,P){x[0]=0,P[0]=-b,P[1]=b,y[0]=m[i];for(let L=1,D=0,q=0;L<d;L++){y[L]=m[i+L*c];const oe=L*L;do{const ce=x[D];q=(y[L]-y[ce]+oe-ce*ce)/(L-ce)/2}while(q<=P[D]&&--D>-1);D++,x[D]=L,P[D]=q,P[D+1]=b}for(let L=0,D=0;L<d;L++){for(;P[D+1]<L;)D++;const q=x[D],oe=L-q;m[i+L*c]=y[q]+oe*oe}}class X{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const d=[];for(const y in i)for(const x of i[y])d.push({stack:y,id:x});l.asyncAll(d,({stack:y,id:x},P)=>{let L=this.entries[y];L||(L=this.entries[y]={glyphs:{},requests:{},ranges:{}});let D=L.glyphs[x];if(D!==void 0)return void P(null,{stack:y,id:x,glyph:D});if(D=this._tinySDF(L,y,x),D)return L.glyphs[x]=D,void P(null,{stack:y,id:x,glyph:D});const q=Math.floor(x/256);if(256*q>65535)return void P(new Error("glyphs > 65535 not supported"));if(L.ranges[q])return void P(null,{stack:y,id:x,glyph:D});let oe=L.requests[q];oe||(oe=L.requests[q]=[],X.loadGlyphRange(y,q,this.url,this.requestManager,(ce,Se)=>{if(Se){for(const Me in Se)this._doesCharSupportLocalGlyph(+Me)||(L.glyphs[+Me]=Se[+Me]);L.ranges[q]=!0}for(const Me of oe)Me(ce,Se);delete L.requests[q]})),oe.push((ce,Se)=>{ce?P(ce):Se&&P(null,{stack:y,id:x,glyph:Se[x]||null})})},(y,x)=>{if(y)c(y);else if(x){const P={};for(const{stack:L,id:D,glyph:q}of x)(P[L]||(P[L]={}))[D]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};c(null,P)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](i)||l.unicodeBlockLookup["Hangul Syllables"](i)||l.unicodeBlockLookup.Hiragana(i)||l.unicodeBlockLookup.Katakana(i))}_tinySDF(i,c,d){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(d))return;let x=i.tinySDF;if(!x){let L="400";/bold/i.test(c)?L="900":/medium/i.test(c)?L="500":/light/i.test(c)&&(L="200"),x=i.tinySDF=new X.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:y,fontWeight:L})}const P=x.draw(String.fromCharCode(d));return{id:d,bitmap:new l.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop||-8,advance:P.glyphAdvance||24}}}}X.loadGlyphRange=function(m,i,c,d,y){const x=256*i,P=x+255,L=d.transformRequest(c.replace("{fontstack}",m).replace("{range}",`${x}-${P}`),l.ResourceType.Glyphs);l.getArrayBuffer(L,(D,q)=>{if(D)y(D);else if(q){const oe={};for(const ce of l.parseGlyphPBF(q))oe[ce.id]=ce;y(null,oe)}})},X.TinySDF=class{constructor({fontSize:m=24,buffer:i=3,radius:c=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:x="normal",fontStyle:P="normal"}){this.buffer=i,this.cutoff=d,this.radius=c;const L=this.size=m+4*i,D=this._createCanvas(L),q=this.ctx=D.getContext("2d",{willReadFrequently:!0});q.font=`${P} ${x} ${m}px ${y}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(m){const i=document.createElement("canvas");return i.width=i.height=m,i}draw(m){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:x}=this.ctx.measureText(m),P=Math.floor(c),L=Math.min(this.size-this.buffer,Math.ceil(x-y)),D=Math.min(this.size-this.buffer,Math.ceil(c)+Math.ceil(d)),q=L+2*this.buffer,oe=D+2*this.buffer,ce=q*oe,Se=new Uint8ClampedArray(ce),Me={data:Se,width:q,height:oe,glyphWidth:L,glyphHeight:D,glyphTop:P,glyphLeft:0,glyphAdvance:i};if(L===0||D===0)return Me;const{ctx:Te,buffer:Re,gridInner:Ve,gridOuter:Ze}=this;Te.clearRect(Re,Re,L,D),Te.fillText(m,Re,Re+P+1);const Je=Te.getImageData(Re,Re,L,D);Ze.fill(b,0,ce),Ve.fill(0,0,ce);for(let Ye=0;Ye<D;Ye++)for(let ct=0;ct<L;ct++){const rt=Je.data[4*(Ye*L+ct)+3]/255;if(rt===0)continue;const ut=(Ye+Re)*q+ct+Re;if(rt===1)Ze[ut]=0,Ve[ut]=b;else{const _t=.5-rt;Ze[ut]=_t>0?_t*_t:0,Ve[ut]=_t<0?_t*_t:0}}k(Ze,0,0,q,oe,q,this.f,this.v,this.z),k(Ve,Re,Re,L,D,q,this.f,this.v,this.z);for(let Ye=0;Ye<ce;Ye++){const ct=Math.sqrt(Ze[Ye])-Math.sqrt(Ve[Ye]);Se[Ye]=Math.round(255-255*(ct/this.radius+this.cutoff))}return Me}};const K=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(m,i){return l.sphericalToCartesian(m.expression.evaluate(i))}interpolate(m,i,c){return{x:l.number(m.x,i.x,c),y:l.number(m.y,i.y,c),z:l.number(m.z,i.z,c)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),de="-transition";class ve extends l.Evented{constructor(i){super(),this._transitionable=new l.Transitionable(K),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(l.validateLight,i,c))for(const d in i){const y=i[d];d.endsWith(de)?this._transitionable.setTransition(d.slice(0,-de.length),y):this._transitionable.setValue(d,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,d){return(!d||d.validate!==!1)&&l.emitValidationErrors(this,i.call(l.validateStyle,l.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class we{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const d=i.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(i,c)),this.dashEntry[d]}getDashRanges(i,c,d){const y=[];let x=i.length%2==1?-i[i.length-1]*d:0,P=i[0]*d,L=!0;y.push({left:x,right:P,isDash:L,zeroLength:i[0]===0});let D=i[0];for(let q=1;q<i.length;q++){L=!L;const oe=i[q];x=D*d,D+=oe,P=D*d,y.push({left:x,right:P,isDash:L,zeroLength:oe===0})}return y}addRoundDash(i,c,d){const y=c/2;for(let x=-d;x<=d;x++){const P=this.width*(this.nextRow+d+x);let L=0,D=i[L];for(let q=0;q<this.width;q++){q/D.right>1&&(D=i[++L]);const oe=Math.abs(q-D.left),ce=Math.abs(q-D.right),Se=Math.min(oe,ce);let Me;const Te=x/d*(y+1);if(D.isDash){const Re=y-Math.abs(Te);Me=Math.sqrt(Se*Se+Re*Re)}else Me=y-Math.sqrt(Se*Se+Te*Te);this.data[P+q]=Math.max(0,Math.min(255,Me+128))}}}addRegularDash(i){for(let L=i.length-1;L>=0;--L){const D=i[L],q=i[L+1];D.zeroLength?i.splice(L,1):q&&q.isDash===D.isDash&&(q.left=D.left,i.splice(L,1))}const c=i[0],d=i[i.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const y=this.width*this.nextRow;let x=0,P=i[x];for(let L=0;L<this.width;L++){L/P.right>1&&(P=i[++x]);const D=Math.abs(L-P.left),q=Math.abs(L-P.right),oe=Math.min(D,q);this.data[y+L]=Math.max(0,Math.min(255,(P.isDash?oe:-oe)+128))}}addDash(i,c){const d=c?7:0,y=2*d+1;if(this.nextRow+y>this.height)return l.warnOnce("LineAtlas out of space"),null;let x=0;for(let L=0;L<i.length;L++)x+=i[L];if(x!==0){const L=this.width/x,D=this.getDashRanges(i,this.width,L);c?this.addRoundDash(D,L,d):this.addRegularDash(D)}const P={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:x};return this.nextRow+=y,this.dirty=!0,P}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class ee{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const d=this.workerPool.acquire(this.id);for(let y=0;y<d.length;y++){const x=new ee.Actor(d[y],c,this.id);x.name=`Worker ${y}`,this.actors.push(x)}}broadcast(i,c,d){l.asyncAll(this.actors,(y,x)=>{y.send(i,c,x)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ie(m,i,c){const d=function(y,x){if(y)return c(y);if(x){const P=l.pick(l.extend(x,m),["tiles","minzoom","maxzoom","attribution","maplibreLogo","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(P.vectorLayers=x.vector_layers,P.vectorLayerIds=P.vectorLayers.map(L=>L.id)),c(null,P)}};return m.url?l.getJSON(i.transformRequest(m.url,l.ResourceType.Source),d):l.exported.frame(()=>d(null,m))}ee.Actor=l.Actor;class ne{constructor(i,c,d){this.bounds=l.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),d=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*c),y=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*c),x=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*c),P=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=d&&i.x<x&&i.y>=y&&i.y<P}}class te extends l.Evented{constructor(i,c,d,y){if(super(),this.id=i,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(c,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ie(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new l.ErrorEvent(i)):c&&(l.extend(this,c),c.bounds&&(this.tileBounds=new ne(c.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(d,l.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(P,L){return delete i.request,i.aborted?c(null):P&&P.status!==404?c(P):(L&&L.resourceTiming&&(i.resourceTiming=L.resourceTiming),this.map._refreshExpiredTiles&&L&&i.setExpiryData(L),i.loadVectorData(L,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",y,x.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",y,x.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class he extends l.Evented{constructor(i,c,d,y){super(),this.id=i,this.dispatcher=d,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},c),l.extend(this,l.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ie(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.ErrorEvent(i)):c&&(l.extend(this,c),c.bounds&&(this.tileBounds=new ne(c.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),(y,x)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(y)i.state="errored",c(y);else if(x){this.map._refreshExpiredTiles&&i.setExpiryData(x),delete x.cacheControl,delete x.expires;const P=this.map.painter.context,L=P.gl;i.texture=this.map.painter.getTileTexture(x.width),i.texture?i.texture.update(x,{useMipmap:!0}):(i.texture=new se(P,x,L.RGBA,{useMipmap:!0}),i.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),i.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),c(null)}})}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}let _e;class xe extends he{constructor(i,c,d,y){super(i,c,d,y),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function y(x,P){x&&(i.state="errored",c(x)),P&&(i.dem=P,i.needsHillshadePrepare=!0,i.state="loaded",c(null))}i.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),function(x,P){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(x)i.state="errored",c(x);else if(P){this.map._refreshExpiredTiles&&i.setExpiryData(P),delete P.cacheControl,delete P.expires;const L=l.isImageBitmap(P)&&(_e==null&&(_e=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),_e)?P:l.exported.getImageData(P,1),D={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:L,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",D,y.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const c=i.canonical,d=Math.pow(2,c.z),y=(c.x-1+d)%d,x=c.x===0?i.wrap-1:i.wrap,P=(c.x+1+d)%d,L=c.x+1===d?i.wrap+1:i.wrap,D={};return D[new l.OverscaledTileID(i.overscaledZ,x,c.z,y,c.y).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,L,c.z,P,c.y).key]={backfilled:!1},c.y>0&&(D[new l.OverscaledTileID(i.overscaledZ,x,c.z,y,c.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,L,c.z,P,c.y-1).key]={backfilled:!1}),c.y+1<d&&(D[new l.OverscaledTileID(i.overscaledZ,x,c.z,y,c.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},D[new l.OverscaledTileID(i.overscaledZ,L,c.z,P,c.y+1).key]={backfilled:!1}),D}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class je extends l.Evented{constructor(i,c,d,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(y),this._data=c.data,this._options=l.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const x=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:l.EXTENT,radius:(c.clusterRadius||50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,d,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:d},y),this}_updateWorkerData(i){const c=l.extend({},this.workerOptions),d=this._data;typeof d=="string"?(c.request=this.map._requestManager.transformRequest(l.exported.resolveURL(d),l.ResourceType.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(d),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(y,x)=>{if(this._pendingLoads--,this._removed||x&&x.abandoned)return;let P=null;if(x&&x.resourceTiming&&x.resourceTiming[this.id]&&(P=x.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:c.source},null),y)return void this.fire(new l.ErrorEvent(y));const L={dataType:"source",sourceDataType:i};this._collectResourceTiming&&P&&P.length>0&&l.extend(L,{resourceTiming:P}),this.fire(new l.Event("data",L))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const d=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const y={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(d,y,(x,P)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):x?c(x):(i.loadVectorData(P,this.map.painter,d==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ie=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pe extends l.Evented{constructor(i,c,d,y){super(),this.id=i,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(i,c){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(d,y)=>{this._loaded=!0,d?this.fire(new l.ErrorEvent(d)):y&&(this.image=y,i&&(this.coordinates=i),c&&c(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const c=i.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(y){let x=1/0,P=1/0,L=-1/0,D=-1/0;for(const Se of y)x=Math.min(x,Se.x),P=Math.min(P,Se.y),L=Math.max(L,Se.x),D=Math.max(D,Se.y);const q=Math.max(L-x,D-P),oe=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),ce=Math.pow(2,oe);return new l.CanonicalTileID(oe,Math.floor((x+L)/2*ce),Math.floor((P+D)/2*ce))}(c),this.minzoom=this.maxzoom=this.tileID.z;const d=c.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(d[2].x,d[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new se(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class $e extends Pe{constructor(i,c,d,y){super(i,c,d,y),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,l.ResourceType.Source).url);l.getVideo(this.urls,(c,d)=>{this._loaded=!0,c?this.fire(new l.ErrorEvent(c)):d&&(this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new se(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ne extends Pe{constructor(i,c,d,y){super(i,c,d,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(P=>typeof P!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,d=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Ie.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new se(c,this.canvas,d.RGBA,{premultiply:!0});for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const qe={vector:te,raster:he,"raster-dem":xe,geojson:je,video:$e,image:Pe,canvas:Ne};function at(m,i){const c=l.create();return l.translate(c,c,[1,1,0]),l.scale(c,c,[.5*m.width,.5*m.height,1]),l.multiply(c,c,m.calculatePosMatrix(i.toUnwrapped()))}function yt(m,i,c,d,y,x){const P=function(ce,Se,Me){if(ce)for(const Te of ce){const Re=Se[Te];if(Re&&Re.source===Me&&Re.type==="fill-extrusion")return!0}else for(const Te in Se){const Re=Se[Te];if(Re.source===Me&&Re.type==="fill-extrusion")return!0}return!1}(y&&y.layers,i,m.id),L=x.maxPitchScaleFactor(),D=m.tilesIn(d,L,P);D.sort(Pt);const q=[];for(const ce of D)q.push({wrappedTileID:ce.tileID.wrapped().key,queryResults:ce.tile.queryRenderedFeatures(i,c,m._state,ce.queryGeometry,ce.cameraQueryGeometry,ce.scale,y,x,L,at(m.transform,ce.tileID))});const oe=function(ce){const Se={},Me={};for(const Te of ce){const Re=Te.queryResults,Ve=Te.wrappedTileID,Ze=Me[Ve]=Me[Ve]||{};for(const Je in Re){const Ye=Re[Je],ct=Ze[Je]=Ze[Je]||{},rt=Se[Je]=Se[Je]||[];for(const ut of Ye)ct[ut.featureIndex]||(ct[ut.featureIndex]=!0,rt.push(ut))}}return Se}(q);for(const ce in oe)oe[ce].forEach(Se=>{const Me=Se.feature,Te=m.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=Te});return oe}function Pt(m,i){const c=m.tileID,d=i.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}class ht{constructor(i,c){this.tileID=i,this.uid=l.uniqueId(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<l.exported.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(i,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(y,x){const P={};if(!x)return P;for(const L of y){const D=L.layerIds.map(q=>x.getLayer(q)).filter(Boolean);if(D.length!==0){L.layers=D,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(q=>D.filter(oe=>oe.id===q)[0]));for(const q of D)P[q.id]=L}}return P}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const x=this.buckets[y];if(x instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!d)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const x=this.buckets[y];if(x instanceof l.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const y in this.buckets){const x=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const y=this.buckets[d];y.uploadPending()&&y.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new se(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new se(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,d,y,x,P,L,D,q,oe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:x,scale:P,tileSize:this.tileSize,pixelPosMatrix:oe,transform:D,params:L,queryPadding:this.queryPadding*q},i,c,d):{}}querySourceFeatures(i,c){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const y=d.loadVTLayers(),x=c?c.sourceLayer:"",P=y._geojsonTileLayer||y[x];if(!P)return;const L=l.createFilter(c&&c.filter),{z:D,x:q,y:oe}=this.tileID.canonical,ce={z:D,x:q,y:oe};for(let Se=0;Se<P.length;Se++){const Me=P.feature(Se);if(L.needGeometry){const Ve=l.toEvaluationFeature(Me,!0);if(!L.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Ve,this.tileID.canonical))continue}else if(!L.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Me))continue;const Te=d.getId(Me,x),Re=new l.GeoJSONFeature(Me,D,q,oe,Te);Re.tile=ce,i.push(Re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const d=l.parseCacheControl(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let y=!1;if(this.expirationTime>d)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const x=this.expirationTime-c;x?this.expirationTime=d+Math.max(x,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const x=this.buckets[y],P=x.layers[0].sourceLayer||"_geojsonTileLayer",L=d[P],D=i[P];if(!L||!D||Object.keys(D).length===0)continue;x.update(D,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});const q=c&&c.style&&c.style.getLayer(y);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.exported.now()+i}setDependencies(i,c){const d={};for(const y of c)d[y]=!0;this.dependencies[i]=d}hasDependency(i,c){for(const d of i){const y=this.dependencies[d];if(y){for(const x of c)if(y[x])return!0}}return!1}}class Et{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,d){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const x={value:c,timeout:void 0};if(d!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},d)),this.data[y].push(x),this.order.push(y),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const d=i.wrapped().key,y=c===void 0?0:this.data[d].indexOf(c),x=this.data[d][y];return this.data[d].splice(y,1),x.timeout&&clearTimeout(x.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(x.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const d in this.data)for(const y of this.data[d])i(y.value)||c.push(y);for(const d of c)this.remove(d.value.tileID,d)}}class Nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,d){const y=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},l.extend(this.stateChanges[i][y],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==y&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const x in this.state[i][y])d[x]||(this.deletedStates[i][y][x]=null)}else for(const x in d)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][x]===null&&delete this.deletedStates[i][y][x]}removeFeatureState(i,c,d){if(this.deletedStates[i]===null)return;const y=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&c!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][d]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(d in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][d]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,c){const d=String(c),y=l.extend({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][c];if(x===null)return{};for(const P in x)delete y[P]}return y}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const d={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const x={};for(const P in this.stateChanges[y])this.state[y][P]||(this.state[y][P]={}),l.extend(this.state[y][P],this.stateChanges[y][P]),x[P]=this.state[y][P];d[y]=x}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const x={};if(this.deletedStates[y]===null)for(const P in this.state[y])x[P]={},this.state[y][P]={};else for(const P in this.deletedStates[y]){if(this.deletedStates[y][P]===null)this.state[y][P]={};else for(const L of Object.keys(this.deletedStates[y][P]))delete this.state[y][P][L];x[P]=this.state[y][P]}d[y]=d[y]||{},l.extend(d[y],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const y in i)i[y].setFeatureState(d,c)}}class jt extends l.Evented{constructor(i,c,d){super(),this.id=i,this.dispatcher=d,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("error",()=>{this._sourceErrored=!0}),this._source=function(y,x,P,L){const D=new qe[x.type](y,x,P,L);if(D.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${D.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],D),D}(i,c,d,this),this._tiles={},this._cache=new Et(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nt}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const d=this._tiles[c];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(cn).map(i=>i.key)}getRenderableIds(i){const c=[];for(const d in this._tiles)this._isIdRenderable(d,i)&&c.push(this._tiles[d]);return i?c.sort((d,y)=>{const x=d.tileID,P=y.tileID,L=new l.pointGeometry(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),D=new l.pointGeometry(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-P.overscaledZ||D.y-L.y||D.x-L.x}).map(d=>d.tileID.key):c.map(d=>d.tileID).sort(cn).map(d=>d.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,i,c)))}_tileLoaded(i,c,d,y){if(y)return i.state="errored",void(y.status!==404?this._source.fire(new l.ErrorEvent(y,{tile:i})):this.update(this.transform));i.timeAdded=l.exported.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let y=0;y<c.length;y++){const x=c[y];if(i.neighboringTiles&&i.neighboringTiles[x]){const P=this.getTileByID(x);d(i,P),d(P,i)}}function d(y,x){y.needsHillshadePrepare=!0;let P=x.tileID.canonical.x-y.tileID.canonical.x;const L=x.tileID.canonical.y-y.tileID.canonical.y,D=Math.pow(2,y.tileID.canonical.z),q=x.tileID.key;P===0&&L===0||Math.abs(L)>1||(Math.abs(P)>1&&(Math.abs(P+D)===1?P+=D:Math.abs(P-D)===1&&(P-=D)),x.dem&&y.dem&&(y.dem.backfillBorder(x.dem,P,L),y.neighboringTiles&&y.neighboringTiles[q]&&(y.neighboringTiles[q].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,d,y){for(const x in this._tiles){let P=this._tiles[x];if(y[x]||!P.hasData()||P.tileID.overscaledZ<=c||P.tileID.overscaledZ>d)continue;let L=P.tileID;for(;P&&P.tileID.overscaledZ>c+1;){const q=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[q.key],P&&P.hasData()&&(L=q)}let D=L;for(;D.overscaledZ>c;)if(D=D.scaledTo(D.overscaledZ-1),i[D.key]){y[L.key]=L;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=c?d:null}for(let d=i.overscaledZ-1;d>=c;d--){const y=i.scaledTo(d),x=this._getLoadedTile(y);if(x)return x}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,d=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(c*d*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const d={};for(const y in this._tiles){const x=this._tiles[y];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+c),d[x.tileID.key]=x}this._tiles=d;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(i){if(this.transform=i,!this._sourceLoaded||this._paused)return;let c;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?c=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new l.OverscaledTileID(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(c=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(c=c.filter(D=>this._source.hasTile(D)))):c=[];const d=i.coveringZoomLevel(this._source),y=Math.max(d-jt.maxOverzooming,this._source.minzoom),x=Math.max(d+jt.maxUnderzooming,this._source.minzoom),P=this._updateRetainedTiles(c,d);if(Cn(this._source.type)){const D={},q={},oe=Object.keys(P);for(const ce of oe){const Se=P[ce],Me=this._tiles[ce];if(!Me||Me.fadeEndTime&&Me.fadeEndTime<=l.exported.now())continue;const Te=this.findLoadedParent(Se,y);Te&&(this._addTile(Te.tileID),D[Te.tileID.key]=Te.tileID),q[ce]=Se}this._retainLoadedChildren(q,d,x,P);for(const ce in D)P[ce]||(this._coveredTiles[ce]=!0,P[ce]=D[ce])}for(const D in P)this._tiles[D].clearFadeHold();const L=l.keysDifference(this._tiles,P);for(const D of L){const q=this._tiles[D];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(D)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const d={},y={},x=Math.max(c-jt.maxOverzooming,this._source.minzoom),P=Math.max(c+jt.maxUnderzooming,this._source.minzoom),L={};for(const D of i){const q=this._addTile(D);d[D.key]=D,q.hasData()||c<this._source.maxzoom&&(L[D.key]=D)}this._retainLoadedChildren(L,c,P,d);for(const D of i){let q=this._tiles[D.key];if(q.hasData())continue;if(c+1>this._source.maxzoom){const ce=D.children(this._source.maxzoom)[0],Se=this.getTile(ce);if(Se&&Se.hasData()){d[ce.key]=ce;continue}}else{const ce=D.children(this._source.maxzoom);if(d[ce[0].key]&&d[ce[1].key]&&d[ce[2].key]&&d[ce[3].key])continue}let oe=q.wasRequested();for(let ce=D.overscaledZ-1;ce>=x;--ce){const Se=D.scaledTo(ce);if(y[Se.key]||(y[Se.key]=!0,q=this.getTile(Se),!q&&oe&&(q=this._addTile(Se)),q&&(d[Se.key]=Se,oe=q.wasRequested(),q.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let d,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){d=this._loadedParentTiles[y.key];break}c.push(y.key);const x=y.scaledTo(y.overscaledZ-1);if(d=this._getLoadedTile(x),d)break;y=x}for(const x of c)this._loadedParentTiles[x]=d}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const d=c;return c||(c=new ht(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,d||this._source.fire(new l.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=c.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,d){const y=[],x=this.transform;if(!x)return y;const P=d?x.getCameraQueryGeometry(i):i,L=i.map(Te=>x.pointCoordinate(Te)),D=P.map(Te=>x.pointCoordinate(Te)),q=this.getIds();let oe=1/0,ce=1/0,Se=-1/0,Me=-1/0;for(const Te of D)oe=Math.min(oe,Te.x),ce=Math.min(ce,Te.y),Se=Math.max(Se,Te.x),Me=Math.max(Me,Te.y);for(let Te=0;Te<q.length;Te++){const Re=this._tiles[q[Te]];if(Re.holdingForFade())continue;const Ve=Re.tileID,Ze=Math.pow(2,x.zoom-Re.tileID.overscaledZ),Je=c*Re.queryPadding*l.EXTENT/Re.tileSize/Ze,Ye=[Ve.getTilePoint(new l.MercatorCoordinate(oe,ce)),Ve.getTilePoint(new l.MercatorCoordinate(Se,Me))];if(Ye[0].x-Je<l.EXTENT&&Ye[0].y-Je<l.EXTENT&&Ye[1].x+Je>=0&&Ye[1].y+Je>=0){const ct=L.map(ut=>Ve.getTilePoint(ut)),rt=D.map(ut=>Ve.getTilePoint(ut));y.push({tile:Re,tileID:Ve,queryGeometry:ct,cameraQueryGeometry:rt,scale:Ze})}}return y}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);for(const d of c)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Cn(this._source.type))for(const i in this._tiles){const c=this._tiles[i];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(i,c,d){this._state.updateState(i=i||"_geojsonTileLayer",c,d)}removeFeatureState(i,c,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,d)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,d){const y=this._tiles[i];y&&y.setDependencies(c,d)}reloadTilesForDependencies(i,c){for(const d in this._tiles)this._tiles[d].hasDependency(i,c)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(i,c))}}function cn(m,i){const c=Math.abs(2*m.wrap)-+(m.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return m.overscaledZ-i.overscaledZ||d-c||i.canonical.y-m.canonical.y||i.canonical.x-m.canonical.x}function Cn(m){return m==="raster"||m==="image"||m==="video"}jt.maxOverzooming=10,jt.maxUnderzooming=3;const bn="mapboxgl_preloaded_worker_pool";class on{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<on.workerCount;)this.workers.push(new Worker(fu.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[bn]}numActive(){return Object.keys(this.active).length}}const En=Math.floor(l.exported.hardwareConcurrency/2);let Ee;function R(){return Ee||(Ee=new on),Ee}function O(m,i){const c={};for(const d in m)d!=="ref"&&(c[d]=m[d]);return l.refProperties.forEach(d=>{d in i&&(c[d]=i[d])}),c}function pe(m){m=m.slice();const i=Object.create(null);for(let c=0;c<m.length;c++)i[m[c].id]=m[c];for(let c=0;c<m.length;c++)"ref"in m[c]&&(m[c]=O(m[c],i[m[c].ref]));return m}on.workerCount=Math.max(Math.min(En,6),1);const ze={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ke(m,i,c){c.push({command:ze.addSource,args:[m,i[m]]})}function ot(m,i,c){i.push({command:ze.removeSource,args:[m]}),c[m]=!0}function ae(m,i,c,d){ot(m,c,d),Ke(m,i,c)}function A(m,i,c){let d;for(d in m[c])if(Object.prototype.hasOwnProperty.call(m[c],d)&&d!=="data"&&!S(m[c][d],i[c][d]))return!1;for(d in i[c])if(Object.prototype.hasOwnProperty.call(i[c],d)&&d!=="data"&&!S(m[c][d],i[c][d]))return!1;return!0}function z(m,i,c,d,y,x){let P;for(P in i=i||{},m=m||{})Object.prototype.hasOwnProperty.call(m,P)&&(S(m[P],i[P])||c.push({command:x,args:[d,P,i[P],y]}));for(P in i)Object.prototype.hasOwnProperty.call(i,P)&&!Object.prototype.hasOwnProperty.call(m,P)&&(S(m[P],i[P])||c.push({command:x,args:[d,P,i[P],y]}))}function be(m){return m.id}function Be(m,i){return m[i.id]=i,m}class Xe{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.clamp(i,0,1);let c=1,d=this._distances[c];const y=i*this.paddedLength+this.padding;for(;d<y&&c<this._distances.length;)d=this._distances[++c];const x=c-1,P=this._distances[x],L=d-P,D=L>0?(y-P)/L:0;return this.points[x].mult(1-D).add(this.points[c].mult(D))}}function Qe(m,i){let c=!0;return m==="always"||m!=="never"&&i!=="never"||(c=!1),c}class Wt{constructor(i,c,d){const y=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/d),this.yCellCount=Math.ceil(c/d);for(let P=0;P<this.xCellCount*this.yCellCount;P++)y.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,d,y,x){this._forEachCell(c,d,y,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(x)}insertCircle(i,c,d,y){this._forEachCell(c-y,d-y,c+y,d+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(d),this.circles.push(y)}_insertBoxCell(i,c,d,y,x,P){this.boxCells[x].push(P)}_insertCircleCell(i,c,d,y,x,P){this.circleCells[x].push(P)}_query(i,c,d,y,x,P,L){if(d<0||i>this.width||y<0||c>this.height)return[];const D=[];if(i<=0&&c<=0&&this.width<=d&&this.height<=y){if(x)return[{key:null,x1:i,y1:c,x2:d,y2:y}];for(let q=0;q<this.boxKeys.length;q++)D.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const oe=this.circles[3*q],ce=this.circles[3*q+1],Se=this.circles[3*q+2];D.push({key:this.circleKeys[q],x1:oe-Se,y1:ce-Se,x2:oe+Se,y2:ce+Se})}}else this._forEachCell(i,c,d,y,this._queryCell,D,{hitTest:x,overlapMode:P,seenUids:{box:{},circle:{}}},L);return D}query(i,c,d,y){return this._query(i,c,d,y,!1,null)}hitTest(i,c,d,y,x,P){return this._query(i,c,d,y,!0,x,P).length>0}hitTestCircle(i,c,d,y,x){const P=i-d,L=i+d,D=c-d,q=c+d;if(L<0||P>this.width||q<0||D>this.height)return!1;const oe=[];return this._forEachCell(P,D,L,q,this._queryCellCircle,oe,{hitTest:!0,overlapMode:y,circle:{x:i,y:c,radius:d},seenUids:{box:{},circle:{}}},x),oe.length>0}_queryCell(i,c,d,y,x,P,L,D){const{seenUids:q,hitTest:oe,overlapMode:ce}=L,Se=this.boxCells[x];if(Se!==null){const Te=this.bboxes;for(const Re of Se)if(!q.box[Re]){q.box[Re]=!0;const Ve=4*Re,Ze=this.boxKeys[Re];if(i<=Te[Ve+2]&&c<=Te[Ve+3]&&d>=Te[Ve+0]&&y>=Te[Ve+1]&&(!D||D(Ze))&&(!oe||!Qe(ce,Ze.overlapMode))&&(P.push({key:Ze,x1:Te[Ve],y1:Te[Ve+1],x2:Te[Ve+2],y2:Te[Ve+3]}),oe))return!0}}const Me=this.circleCells[x];if(Me!==null){const Te=this.circles;for(const Re of Me)if(!q.circle[Re]){q.circle[Re]=!0;const Ve=3*Re,Ze=this.circleKeys[Re];if(this._circleAndRectCollide(Te[Ve],Te[Ve+1],Te[Ve+2],i,c,d,y)&&(!D||D(Ze))&&(!oe||!Qe(ce,Ze.overlapMode))){const Je=Te[Ve],Ye=Te[Ve+1],ct=Te[Ve+2];if(P.push({key:Ze,x1:Je-ct,y1:Ye-ct,x2:Je+ct,y2:Ye+ct}),oe)return!0}}}return!1}_queryCellCircle(i,c,d,y,x,P,L,D){const{circle:q,seenUids:oe,overlapMode:ce}=L,Se=this.boxCells[x];if(Se!==null){const Te=this.bboxes;for(const Re of Se)if(!oe.box[Re]){oe.box[Re]=!0;const Ve=4*Re,Ze=this.boxKeys[Re];if(this._circleAndRectCollide(q.x,q.y,q.radius,Te[Ve+0],Te[Ve+1],Te[Ve+2],Te[Ve+3])&&(!D||D(Ze))&&!Qe(ce,Ze.overlapMode))return P.push(!0),!0}}const Me=this.circleCells[x];if(Me!==null){const Te=this.circles;for(const Re of Me)if(!oe.circle[Re]){oe.circle[Re]=!0;const Ve=3*Re,Ze=this.circleKeys[Re];if(this._circlesCollide(Te[Ve],Te[Ve+1],Te[Ve+2],q.x,q.y,q.radius)&&(!D||D(Ze))&&!Qe(ce,Ze.overlapMode))return P.push(!0),!0}}}_forEachCell(i,c,d,y,x,P,L,D){const q=this._convertToXCellCoord(i),oe=this._convertToYCellCoord(c),ce=this._convertToXCellCoord(d),Se=this._convertToYCellCoord(y);for(let Me=q;Me<=ce;Me++)for(let Te=oe;Te<=Se;Te++)if(x.call(this,i,c,d,y,this.xCellCount*Te+Me,P,L,D))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,d,y,x,P){const L=y-i,D=x-c,q=d+P;return q*q>L*L+D*D}_circleAndRectCollide(i,c,d,y,x,P,L){const D=(P-y)/2,q=Math.abs(i-(y+D));if(q>D+d)return!1;const oe=(L-x)/2,ce=Math.abs(c-(x+oe));if(ce>oe+d)return!1;if(q<=D||ce<=oe)return!0;const Se=q-D,Me=ce-oe;return Se*Se+Me*Me<=d*d}}function Sn(m,i,c,d,y){const x=l.create();return i?(l.scale(x,x,[1/y,1/y,1]),c||l.rotateZ(x,x,d.angle)):l.multiply(x,d.labelPlaneMatrix,m),x}function fn(m,i,c,d,y){if(i){const x=l.clone(m);return l.scale(x,x,[y,y,1]),c||l.rotateZ(x,x,-d.angle),x}return d.glCoordMatrix}function ft(m,i){const c=l.fromValues(m.x,m.y,0,1);Gt(c,c,i);const d=c[3];return{point:new l.pointGeometry(c[0]/d,c[1]/d),signedDistanceFromCamera:d}}function Mt(m,i){return .5+m/i*.5}function un(m,i){const c=m[0]/m[3],d=m[1]/m[3];return c>=-i[0]&&c<=i[0]&&d>=-i[1]&&d<=i[1]}function Ir(m,i,c,d,y,x,P,L){const D=d?m.textSizeData:m.iconSizeData,q=l.evaluateSizeForZoom(D,c.transform.zoom),oe=[256/c.width*2+1,256/c.height*2+1],ce=d?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;ce.clear();const Se=m.lineVertexArray,Me=d?m.text.placedSymbolArray:m.icon.placedSymbolArray,Te=c.transform.width/c.transform.height;let Re=!1;for(let Ve=0;Ve<Me.length;Ve++){const Ze=Me.get(Ve);if(Ze.hidden||Ze.writingMode===l.WritingMode.vertical&&!Re){Zt(Ze.numGlyphs,ce);continue}Re=!1;const Je=l.fromValues(Ze.anchorX,Ze.anchorY,0,1);if(l.transformMat4(Je,Je,i),!un(Je,oe)){Zt(Ze.numGlyphs,ce);continue}const Ye=Mt(c.transform.cameraToCenterDistance,Je[3]),ct=l.evaluateSizeForFeature(D,q,Ze),rt=P?ct/Ye:ct*Ye,ut=new l.pointGeometry(Ze.anchorX,Ze.anchorY),_t=ft(ut,y).point,St={},gt=rr(Ze,rt,!1,L,i,y,x,m.glyphOffsetArray,Se,ce,_t,ut,St,Te);Re=gt.useVertical,(gt.notEnoughRoom||Re||gt.needsFlipping&&rr(Ze,rt,!0,L,i,y,x,m.glyphOffsetArray,Se,ce,_t,ut,St,Te).notEnoughRoom)&&Zt(Ze.numGlyphs,ce)}d?m.text.dynamicLayoutVertexBuffer.updateData(ce):m.icon.dynamicLayoutVertexBuffer.updateData(ce)}function Qr(m,i,c,d,y,x,P,L,D,q,oe){const ce=L.glyphStartIndex+L.numGlyphs,Se=L.lineStartIndex,Me=L.lineStartIndex+L.lineLength,Te=i.getoffsetX(L.glyphStartIndex),Re=i.getoffsetX(ce-1),Ve=_r(m*Te,c,d,y,x,P,L.segment,Se,Me,D,q,oe);if(!Ve)return null;const Ze=_r(m*Re,c,d,y,x,P,L.segment,Se,Me,D,q,oe);return Ze?{first:Ve,last:Ze}:null}function hn(m,i,c,d){return m===l.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*d?{useVertical:!0}:(m===l.WritingMode.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function rr(m,i,c,d,y,x,P,L,D,q,oe,ce,Se,Me){const Te=i/24,Re=m.lineOffsetX*Te,Ve=m.lineOffsetY*Te;let Ze;if(m.numGlyphs>1){const Je=m.glyphStartIndex+m.numGlyphs,Ye=m.lineStartIndex,ct=m.lineStartIndex+m.lineLength,rt=Qr(Te,L,Re,Ve,c,oe,ce,m,D,x,Se);if(!rt)return{notEnoughRoom:!0};const ut=ft(rt.first.point,P).point,_t=ft(rt.last.point,P).point;if(d&&!c){const St=hn(m.writingMode,ut,_t,Me);if(St)return St}Ze=[rt.first];for(let St=m.glyphStartIndex+1;St<Je-1;St++)Ze.push(_r(Te*L.getoffsetX(St),Re,Ve,c,oe,ce,m.segment,Ye,ct,D,x,Se));Ze.push(rt.last)}else{if(d&&!c){const Ye=ft(ce,y).point,ct=m.lineStartIndex+m.segment+1,rt=new l.pointGeometry(D.getx(ct),D.gety(ct)),ut=ft(rt,y),_t=ut.signedDistanceFromCamera>0?ut.point:wi(ce,rt,Ye,1,y),St=hn(m.writingMode,Ye,_t,Me);if(St)return St}const Je=_r(Te*L.getoffsetX(m.glyphStartIndex),Re,Ve,c,oe,ce,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,D,x,Se);if(!Je)return{notEnoughRoom:!0};Ze=[Je]}for(const Je of Ze)l.addDynamicAttributes(q,Je.point,Je.angle);return{}}function wi(m,i,c,d,y){const x=ft(m.add(m.sub(i)._unit()),y).point,P=c.sub(x);return c.add(P._mult(d/P.mag()))}function _r(m,i,c,d,y,x,P,L,D,q,oe,ce){const Se=d?m-i:m+i;let Me=Se>0?1:-1,Te=0;d&&(Me*=-1,Te=Math.PI),Me<0&&(Te+=Math.PI);let Re=Me>0?L+P:L+P+1,Ve=y,Ze=y,Je=0,Ye=0;const ct=Math.abs(Se),rt=[];for(;Je+Ye<=ct;){if(Re+=Me,Re<L||Re>=D)return null;if(Ze=Ve,rt.push(Ve),Ve=ce[Re],Ve===void 0){const Kt=new l.pointGeometry(q.getx(Re),q.gety(Re)),Ft=ft(Kt,oe);if(Ft.signedDistanceFromCamera>0)Ve=ce[Re]=Ft.point;else{const pn=Re-Me;Ve=wi(Je===0?x:new l.pointGeometry(q.getx(pn),q.gety(pn)),Kt,Ze,ct-Je+1,oe)}}Je+=Ye,Ye=Ze.dist(Ve)}const ut=(ct-Je)/Ye,_t=Ve.sub(Ze),St=_t.mult(ut)._add(Ze);St._add(_t._unit()._perp()._mult(c*Me));const gt=Te+Math.atan2(Ve.y-Ze.y,Ve.x-Ze.x);return rt.push(St),{point:St,angle:gt,path:rt}}const Vr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Zt(m,i){for(let c=0;c<m;c++){const d=i.length;i.resize(d+4),i.float32.set(Vr,3*d)}}function Gt(m,i,c){const d=i[0],y=i[1];return m[0]=c[0]*d+c[4]*y+c[12],m[1]=c[1]*d+c[5]*y+c[13],m[3]=c[3]*d+c[7]*y+c[15],m}const Ht=100;class An{constructor(i,c=new Wt(i.width+200,i.height+200,25),d=new Wt(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=d,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Ht,this.screenBottomBoundary=i.height+Ht,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200}placeCollisionBox(i,c,d,y,x){const P=this.projectAndGetPerspectiveRatio(y,i.anchorPointX,i.anchorPointY),L=d*P.perspectiveRatio,D=i.x1*L+P.point.x,q=i.y1*L+P.point.y,oe=i.x2*L+P.point.x,ce=i.y2*L+P.point.y;return!this.isInsideGrid(D,q,oe,ce)||c!=="always"&&this.grid.hitTest(D,q,oe,ce,c,x)?{box:[],offscreen:!1}:{box:[D,q,oe,ce],offscreen:this.isOffscreen(D,q,oe,ce)}}placeCollisionCircles(i,c,d,y,x,P,L,D,q,oe,ce,Se,Me){const Te=[],Re=new l.pointGeometry(c.anchorX,c.anchorY),Ve=ft(Re,P),Ze=Mt(this.transform.cameraToCenterDistance,Ve.signedDistanceFromCamera),Je=(oe?x/Ze:x*Ze)/l.ONE_EM,Ye=ft(Re,L).point,ct=Qr(Je,y,c.lineOffsetX*Je,c.lineOffsetY*Je,!1,Ye,Re,c,d,L,{});let rt=!1,ut=!1,_t=!0;if(ct){const St=.5*Se*Ze+Me,gt=new l.pointGeometry(-100,-100),Kt=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ft=new Xe,pn=ct.first,$n=ct.last;let In=[];for(let vn=pn.path.length-1;vn>=1;vn--)In.push(pn.path[vn]);for(let vn=1;vn<$n.path.length;vn++)In.push($n.path[vn]);const Pn=2.5*St;if(D){const vn=In.map(Ln=>ft(Ln,D));In=vn.some(Ln=>Ln.signedDistanceFromCamera<=0)?[]:vn.map(Ln=>Ln.point)}let br=[];if(In.length>0){const vn=In[0].clone(),Ln=In[0].clone();for(let gr=1;gr<In.length;gr++)vn.x=Math.min(vn.x,In[gr].x),vn.y=Math.min(vn.y,In[gr].y),Ln.x=Math.max(Ln.x,In[gr].x),Ln.y=Math.max(Ln.y,In[gr].y);br=vn.x>=gt.x&&Ln.x<=Kt.x&&vn.y>=gt.y&&Ln.y<=Kt.y?[In]:Ln.x<gt.x||vn.x>Kt.x||Ln.y<gt.y||vn.y>Kt.y?[]:l.clipLine([In],gt.x,gt.y,Kt.x,Kt.y)}for(const vn of br){Ft.reset(vn,.25*St);let Ln=0;Ln=Ft.length<=.5*St?1:Math.ceil(Ft.paddedLength/Pn)+1;for(let gr=0;gr<Ln;gr++){const ei=gr/Math.max(Ln-1,1),Bi=Ft.lerp(ei),Di=Bi.x+Ht,yo=Bi.y+Ht;Te.push(Di,yo,St,0);const Ni=Di-St,vo=yo-St,Ns=Di+St,pa=yo+St;if(_t=_t&&this.isOffscreen(Ni,vo,Ns,pa),ut=ut||this.isInsideGrid(Ni,vo,Ns,pa),i!=="always"&&this.grid.hitTestCircle(Di,yo,St,i,ce)&&(rt=!0,!q))return{circles:[],offscreen:!1,collisionDetected:rt}}}}return{circles:!q&&rt||!ut?[]:Te,offscreen:_t,collisionDetected:rt}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let d=1/0,y=1/0,x=-1/0,P=-1/0;for(const oe of i){const ce=new l.pointGeometry(oe.x+Ht,oe.y+Ht);d=Math.min(d,ce.x),y=Math.min(y,ce.y),x=Math.max(x,ce.x),P=Math.max(P,ce.y),c.push(ce)}const L=this.grid.query(d,y,x,P).concat(this.ignoredGrid.query(d,y,x,P)),D={},q={};for(const oe of L){const ce=oe.key;if(D[ce.bucketInstanceId]===void 0&&(D[ce.bucketInstanceId]={}),D[ce.bucketInstanceId][ce.featureIndex])continue;const Se=[new l.pointGeometry(oe.x1,oe.y1),new l.pointGeometry(oe.x2,oe.y1),new l.pointGeometry(oe.x2,oe.y2),new l.pointGeometry(oe.x1,oe.y2)];l.polygonIntersectsPolygon(c,Se)&&(D[ce.bucketInstanceId][ce.featureIndex]=!0,q[ce.bucketInstanceId]===void 0&&(q[ce.bucketInstanceId]=[]),q[ce.bucketInstanceId].push(ce.featureIndex))}return q}insertCollisionBox(i,c,d,y,x,P){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:P,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,d,y,x,P){const L=d?this.ignoredGrid:this.grid,D={bucketInstanceId:y,featureIndex:x,collisionGroupID:P,overlapMode:c};for(let q=0;q<i.length;q+=4)L.insertCircle(D,i[q],i[q+1],i[q+2])}projectAndGetPerspectiveRatio(i,c,d){const y=l.fromValues(c,d,0,1);return Gt(y,y,i),{point:new l.pointGeometry((y[0]/y[3]+1)/2*this.transform.width+Ht,(-y[1]/y[3]+1)/2*this.transform.height+Ht),perspectiveRatio:.5+this.transform.cameraToCenterDistance/y[3]*.5}}isOffscreen(i,c,d,y){return d<Ht||i>=this.screenRightBoundary||y<Ht||c>this.screenBottomBoundary}isInsideGrid(i,c,d,y){return d>=0&&i<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=l.identity([]);return l.translate(i,i,[-100,-100,0]),i}}function zn(m,i,c){return i*(l.EXTENT/(m.tileSize*Math.pow(2,c-m.tileID.overscaledZ)))}class ir{constructor(i,c,d,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):y&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Gr{constructor(i,c,d,y,x){this.text=new ir(i?i.text:null,c,d,x),this.icon=new ir(i?i.icon:null,c,y,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hi{constructor(i,c,d){this.text=i,this.icon=c,this.skipFade=d}}class Ps{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class Ce{constructor(i,c,d,y,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=y,this.tileID=x}}class Z{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[i]}}function J(m,i,c,d,y){const{horizontalAlign:x,verticalAlign:P}=l.getAnchorAlignment(m),L=-(x-.5)*i,D=-(P-.5)*c,q=l.evaluateVariableOffset(m,d);return new l.pointGeometry(L+q[0]*y,D+q[1]*y)}function ge(m,i,c,d,y,x){const{x1:P,x2:L,y1:D,y2:q,anchorPointX:oe,anchorPointY:ce}=m,Se=new l.pointGeometry(i,c);return d&&Se._rotate(y?x:-x),{x1:P+Se.x,y1:D+Se.y,x2:L+Se.x,y2:q+Se.y,anchorPointX:oe,anchorPointY:ce}}class Ae{constructor(i,c,d,y){this.transform=i.clone(),this.collisionIndex=new An(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Z(d),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,d,y){const x=d.getBucket(c),P=d.latestFeatureIndex;if(!x||!P||c.id!==x.layerIds[0])return;const L=d.collisionBoxArray,D=x.layers[0].layout,q=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),oe=d.tileSize/l.EXTENT,ce=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),Se=D.get("text-pitch-alignment")==="map",Me=D.get("text-rotation-alignment")==="map",Te=zn(d,1,this.transform.zoom),Re=Sn(ce,Se,Me,this.transform,Te);let Ve=null;if(Se){const Je=fn(ce,Se,Me,this.transform,Te);Ve=l.multiply([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[x.bucketInstanceId]=new Ce(x.bucketInstanceId,P,x.sourceLayerIndex,x.index,d.tileID);const Ze={bucket:x,layout:D,posMatrix:ce,textLabelPlaneMatrix:Re,labelToScreenMatrix:Ve,scale:q,textPixelRatio:oe,holdingForFade:d.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(y)for(const Je of x.sortKeyRanges){const{sortKey:Ye,symbolInstanceStart:ct,symbolInstanceEnd:rt}=Je;i.push({sortKey:Ye,symbolInstanceStart:ct,symbolInstanceEnd:rt,parameters:Ze})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:Ze})}attemptAnchorPlacement(i,c,d,y,x,P,L,D,q,oe,ce,Se,Me,Te,Re){const Ve=[Se.textOffset0,Se.textOffset1],Ze=J(i,d,y,Ve,x),Je=this.collisionIndex.placeCollisionBox(ge(c,Ze.x,Ze.y,P,L,this.transform.angle),ce,D,q,oe.predicate);if((!Re||this.collisionIndex.placeCollisionBox(ge(Re,Ze.x,Ze.y,P,L,this.transform.angle),ce,D,q,oe.predicate).box.length!==0)&&Je.box.length>0){let Ye;return this.prevPlacement&&this.prevPlacement.variableOffsets[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[Se.crossTileID].anchor),this.variableOffsets[Se.crossTileID]={textOffset:Ve,width:d,height:y,anchor:i,textBoxScale:x,prevAnchor:Ye},this.markUsedJustification(Me,i,Se,Te),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,Te,Se),this.placedOrientations[Se.crossTileID]=Te),{shift:Ze,placedGlyphBoxes:Je}}}placeLayerBucketPart(i,c,d){const{bucket:y,layout:x,posMatrix:P,textLabelPlaneMatrix:L,labelToScreenMatrix:D,textPixelRatio:q,holdingForFade:oe,collisionBoxArray:ce,partiallyEvaluatedTextSize:Se,collisionGroup:Me}=i.parameters,Te=x.get("text-optional"),Re=x.get("icon-optional"),Ve=l.getOverlapMode(x,"text-overlap","text-allow-overlap"),Ze=Ve==="always",Je=l.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),Ye=Je==="always",ct=x.get("text-rotation-alignment")==="map",rt=x.get("text-pitch-alignment")==="map",ut=x.get("icon-text-fit")!=="none",_t=x.get("symbol-z-order")==="viewport-y",St=Ze&&(Ye||!y.hasIconData()||Re),gt=Ye&&(Ze||!y.hasTextData()||Te);!y.collisionArrays&&ce&&y.deserializeCollisionBoxes(ce);const Kt=(Ft,pn)=>{if(c[Ft.crossTileID])return;if(oe)return void(this.placements[Ft.crossTileID]=new hi(!1,!1,!1));let $n=!1,In=!1,Pn=!0,br=null,vn={box:null,offscreen:null},Ln={box:null,offscreen:null},gr=null,ei=null,Bi=null,Di=0,yo=0,Ni=0;pn.textFeatureIndex?Di=pn.textFeatureIndex:Ft.useRuntimeCollisionCircles&&(Di=Ft.featureIndex),pn.verticalTextFeatureIndex&&(yo=pn.verticalTextFeatureIndex);const vo=pn.textBox;if(vo){const Yn=Nn=>{let Fr=l.WritingMode.horizontal;if(y.allowVerticalPlacement&&!Nn&&this.prevPlacement){const Ui=this.prevPlacement.placedOrientations[Ft.crossTileID];Ui&&(this.placedOrientations[Ft.crossTileID]=Ui,Fr=Ui,this.markUsedOrientation(y,Fr,Ft))}return Fr},Hr=(Nn,Fr)=>{if(y.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&pn.verticalTextBox){for(const Ui of y.writingModes)if(Ui===l.WritingMode.vertical?(vn=Fr(),Ln=vn):vn=Nn(),vn&&vn.box&&vn.box.length)break}else vn=Nn()};if(x.get("text-variable-anchor")){let Nn=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ft.crossTileID]){const ur=this.prevPlacement.variableOffsets[Ft.crossTileID];Nn.indexOf(ur.anchor)>0&&(Nn=Nn.filter(ma=>ma!==ur.anchor),Nn.unshift(ur.anchor))}const Fr=(ur,ma,ga)=>{const nl=ur.x2-ur.x1,cc=ur.y2-ur.y1,wd=Ft.textBoxScale,zh=ut&&Je==="never"?ma:null;let Us={box:[],offscreen:!1};const ya=Ve!=="never"?2*Nn.length:Nn.length;for(let va=0;va<ya;++va){const hc=this.attemptAnchorPlacement(Nn[va%Nn.length],ur,nl,cc,wd,ct,rt,q,P,Me,va>=Nn.length?Ve:"never",Ft,y,ga,zh);if(hc&&(Us=hc.placedGlyphBoxes,Us&&Us.box&&Us.box.length)){$n=!0,br=hc.shift;break}}return Us};Hr(()=>Fr(vo,pn.iconBox,l.WritingMode.horizontal),()=>{const ur=pn.verticalTextBox;return y.allowVerticalPlacement&&!(vn&&vn.box&&vn.box.length)&&Ft.numVerticalGlyphVertices>0&&ur?Fr(ur,pn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),vn&&($n=vn.box,Pn=vn.offscreen);const Ui=Yn(vn&&vn.box);if(!$n&&this.prevPlacement){const ur=this.prevPlacement.variableOffsets[Ft.crossTileID];ur&&(this.variableOffsets[Ft.crossTileID]=ur,this.markUsedJustification(y,ur.anchor,Ft,Ui))}}else{const Nn=(Fr,Ui)=>{const ur=this.collisionIndex.placeCollisionBox(Fr,Ve,q,P,Me.predicate);return ur&&ur.box&&ur.box.length&&(this.markUsedOrientation(y,Ui,Ft),this.placedOrientations[Ft.crossTileID]=Ui),ur};Hr(()=>Nn(vo,l.WritingMode.horizontal),()=>{const Fr=pn.verticalTextBox;return y.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&Fr?Nn(Fr,l.WritingMode.vertical):{box:null,offscreen:null}}),Yn(vn&&vn.box&&vn.box.length)}}if(gr=vn,$n=gr&&gr.box&&gr.box.length>0,Pn=gr&&gr.offscreen,Ft.useRuntimeCollisionCircles){const Yn=y.text.placedSymbolArray.get(Ft.centerJustifiedTextSymbolIndex),Hr=l.evaluateSizeForFeature(y.textSizeData,Se,Yn),Nn=x.get("text-padding");ei=this.collisionIndex.placeCollisionCircles(Ve,Yn,y.lineVertexArray,y.glyphOffsetArray,Hr,P,L,D,d,rt,Me.predicate,Ft.collisionCircleDiameter,Nn),$n=Ze||ei.circles.length>0&&!ei.collisionDetected,Pn=Pn&&ei.offscreen}if(pn.iconFeatureIndex&&(Ni=pn.iconFeatureIndex),pn.iconBox){const Yn=Hr=>{const Nn=ut&&br?ge(Hr,br.x,br.y,ct,rt,this.transform.angle):Hr;return this.collisionIndex.placeCollisionBox(Nn,Je,q,P,Me.predicate)};Ln&&Ln.box&&Ln.box.length&&pn.verticalIconBox?(Bi=Yn(pn.verticalIconBox),In=Bi.box.length>0):(Bi=Yn(pn.iconBox),In=Bi.box.length>0),Pn=Pn&&Bi.offscreen}const Ns=Te||Ft.numHorizontalGlyphVertices===0&&Ft.numVerticalGlyphVertices===0,pa=Re||Ft.numIconVertices===0;if(Ns||pa?pa?Ns||(In=In&&$n):$n=In&&$n:In=$n=In&&$n,$n&&gr&&gr.box&&this.collisionIndex.insertCollisionBox(gr.box,Ve,x.get("text-ignore-placement"),y.bucketInstanceId,Ln&&Ln.box&&yo?yo:Di,Me.ID),In&&Bi&&this.collisionIndex.insertCollisionBox(Bi.box,Je,x.get("icon-ignore-placement"),y.bucketInstanceId,Ni,Me.ID),ei&&($n&&this.collisionIndex.insertCollisionCircles(ei.circles,Ve,x.get("text-ignore-placement"),y.bucketInstanceId,Di,Me.ID),d)){const Yn=y.bucketInstanceId;let Hr=this.collisionCircleArrays[Yn];Hr===void 0&&(Hr=this.collisionCircleArrays[Yn]=new Ps);for(let Nn=0;Nn<ei.circles.length;Nn+=4)Hr.circles.push(ei.circles[Nn+0]),Hr.circles.push(ei.circles[Nn+1]),Hr.circles.push(ei.circles[Nn+2]),Hr.circles.push(ei.collisionDetected?1:0)}this.placements[Ft.crossTileID]=new hi($n||St,In||gt,Pn||y.justReloaded),c[Ft.crossTileID]=!0};if(_t){const Ft=y.getSortedSymbolIndexes(this.transform.angle);for(let pn=Ft.length-1;pn>=0;--pn){const $n=Ft[pn];Kt(y.symbolInstances.get($n),y.collisionArrays[$n])}}else for(let Ft=i.symbolInstanceStart;Ft<i.symbolInstanceEnd;Ft++)Kt(y.symbolInstances.get(Ft),y.collisionArrays[Ft]);if(d&&y.bucketInstanceId in this.collisionCircleArrays){const Ft=this.collisionCircleArrays[y.bucketInstanceId];l.invert(Ft.invProjMatrix,P),Ft.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(i,c,d,y){let x;x=y===l.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(c)];const P=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const L of P)L>=0&&(i.text.placedSymbolArray.get(L).crossTileID=x>=0&&L!==x?0:d.crossTileID)}markUsedOrientation(i,c,d){const y=c===l.WritingMode.horizontal||c===l.WritingMode.horizontalOnly?c:0,x=c===l.WritingMode.vertical?c:0,P=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const L of P)i.text.placedSymbolArray.get(L).placedOrientation=y;d.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},P=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const D in this.placements){const q=this.placements[D],oe=x[D];oe?(this.opacities[D]=new Gr(oe,y,q.text,q.icon),d=d||q.text!==oe.text.placed||q.icon!==oe.icon.placed):(this.opacities[D]=new Gr(null,y,q.text,q.icon,q.skipFade),d=d||q.text||q.icon)}for(const D in x){const q=x[D];if(!this.opacities[D]){const oe=new Gr(q,y,!1,!1);oe.isHidden()||(this.opacities[D]=oe,d=d||q.text.placed||q.icon.placed)}}for(const D in P)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=P[D]);for(const D in L)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=L[D]);d?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const d={};for(const y of c){const x=y.getBucket(i);x&&y.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,d,y.collisionBoxArray)}}updateBucketOpacities(i,c,d){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,x=new Gr(null,0,!1,!1,!0),P=y.get("text-allow-overlap"),L=y.get("icon-allow-overlap"),D=y.get("text-variable-anchor"),q=y.get("text-rotation-alignment")==="map",oe=y.get("text-pitch-alignment")==="map",ce=y.get("icon-text-fit")!=="none",Se=new Gr(null,0,P&&(L||!i.hasIconData()||y.get("icon-optional")),L&&(P||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&d&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(d);const Me=(Te,Re,Ve)=>{for(let Ze=0;Ze<Re/4;Ze++)Te.opacityVertexArray.emplaceBack(Ve)};for(let Te=0;Te<i.symbolInstances.length;Te++){const Re=i.symbolInstances.get(Te),{numHorizontalGlyphVertices:Ve,numVerticalGlyphVertices:Ze,crossTileID:Je}=Re;let Ye=this.opacities[Je];c[Je]?Ye=x:Ye||(Ye=Se,this.opacities[Je]=Ye),c[Je]=!0;const ct=Re.numIconVertices>0,rt=this.placedOrientations[Re.crossTileID],ut=rt===l.WritingMode.vertical,_t=rt===l.WritingMode.horizontal||rt===l.WritingMode.horizontalOnly;if(Ve>0||Ze>0){const St=Vt(Ye.text);Me(i.text,Ve,ut?It:St),Me(i.text,Ze,_t?It:St);const gt=Ye.text.isHidden();[Re.rightJustifiedTextSymbolIndex,Re.centerJustifiedTextSymbolIndex,Re.leftJustifiedTextSymbolIndex].forEach(pn=>{pn>=0&&(i.text.placedSymbolArray.get(pn).hidden=gt||ut?1:0)}),Re.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Re.verticalPlacedTextSymbolIndex).hidden=gt||_t?1:0);const Kt=this.variableOffsets[Re.crossTileID];Kt&&this.markUsedJustification(i,Kt.anchor,Re,rt);const Ft=this.placedOrientations[Re.crossTileID];Ft&&(this.markUsedJustification(i,"left",Re,Ft),this.markUsedOrientation(i,Ft,Re))}if(ct){const St=Vt(Ye.icon),gt=!(ce&&Re.verticalPlacedIconSymbolIndex&&ut);Re.placedIconSymbolIndex>=0&&(Me(i.icon,Re.numIconVertices,gt?St:It),i.icon.placedSymbolArray.get(Re.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),Re.verticalPlacedIconSymbolIndex>=0&&(Me(i.icon,Re.numVerticalIconVertices,gt?It:St),i.icon.placedSymbolArray.get(Re.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const St=i.collisionArrays[Te];if(St){let gt=new l.pointGeometry(0,0);if(St.textBox||St.verticalTextBox){let Ft=!0;if(D){const pn=this.variableOffsets[Je];pn?(gt=J(pn.anchor,pn.width,pn.height,pn.textOffset,pn.textBoxScale),q&&gt._rotate(oe?this.transform.angle:-this.transform.angle)):Ft=!1}St.textBox&&ke(i.textCollisionBox.collisionVertexArray,Ye.text.placed,!Ft||ut,gt.x,gt.y),St.verticalTextBox&&ke(i.textCollisionBox.collisionVertexArray,Ye.text.placed,!Ft||_t,gt.x,gt.y)}const Kt=!!(!_t&&St.verticalIconBox);St.iconBox&&ke(i.iconCollisionBox.collisionVertexArray,Ye.icon.placed,Kt,ce?gt.x:0,ce?gt.y:0),St.verticalIconBox&&ke(i.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!Kt,ce?gt.x:0,ce?gt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Te=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Te.invProjMatrix,i.placementViewportMatrix=Te.viewportMatrix,i.collisionCircleArray=Te.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>i}setStale(){this.stale=!0}}function ke(m,i,c,d,y){m.emplaceBack(i?1:0,c?1:0,d||0,y||0),m.emplaceBack(i?1:0,c?1:0,d||0,y||0),m.emplaceBack(i?1:0,c?1:0,d||0,y||0),m.emplaceBack(i?1:0,c?1:0,d||0,y||0)}const Ge=Math.pow(2,25),De=Math.pow(2,24),Ue=Math.pow(2,17),We=Math.pow(2,16),st=Math.pow(2,9),mt=Math.pow(2,8),it=Math.pow(2,1);function Vt(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const i=m.placed?1:0,c=Math.floor(127*m.opacity);return c*Ge+i*De+c*Ue+i*We+c*st+i*mt+c*it+i}const It=0;class Ut{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,d,y,x){const P=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(P,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((L,D)=>L.sortKey-D.sortKey));this._currentPartIndex<P.length;)if(c.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,x())return!0;return!1}}class rn{constructor(i,c,d,y,x,P,L){this.placement=new Ae(i,x,P,L),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,c,d){const y=l.exported.now(),x=()=>{const P=l.exported.now()-y;return!this._forceFullPlacement&&P>2};for(;this._currentPlacementIndex>=0;){const P=c[i[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=L)&&(!P.maxzoom||P.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(P)),this._inProgressLayer.continuePlacement(d[P.source],this.placement,this._showCollisionBoxes,P,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const $t=512/l.EXTENT/2;class _n{constructor(i,c,d){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(let y=0;y<c.length;y++){const x=c.get(y),P=x.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,i)})}}getScaledCoordinates(i,c){const d=$t/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*l.EXTENT+i.anchorX)*d),y:Math.floor((c.canonical.y*l.EXTENT+i.anchorY)*d)}}findMatches(i,c,d){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const P=i.get(x);if(P.crossTileID)continue;const L=this.indexedSymbolInstances[P.key];if(!L)continue;const D=this.getScaledCoordinates(P,c);for(const q of L)if(Math.abs(q.coord.x-D.x)<=y&&Math.abs(q.coord.y-D.y)<=y&&!d[q.crossTileID]){d[q.crossTileID]=!0,P.crossTileID=q.crossTileID;break}}}}class Tn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const d in this.indexes){const y=this.indexes[d],x={};for(const P in y){const L=y[P];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),x[L.tileID.key]=L}this.indexes[d]=x}this.lng=i}addBucket(i,c,d){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const P=this.indexes[x];if(Number(x)>i.overscaledZ)for(const L in P){const D=P[L];D.tileID.isChildOf(i)&&D.findMatches(c.symbolInstances,i,y)}else{const L=P[i.scaledTo(Number(x)).key];L&&L.findMatches(c.symbolInstances,i,y)}}for(let x=0;x<c.symbolInstances.length;x++){const P=c.symbolInstances.get(x);P.crossTileID||(P.crossTileID=d.generate(),y[P.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new _n(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const d in c.indexedSymbolInstances)for(const y of c.indexedSymbolInstances[d])delete this.usedCrossTileIDs[i][y.crossTileID]}removeStaleBuckets(i){let c=!1;for(const d in this.indexes){const y=this.indexes[d];for(const x in y)i[y[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,y[x]),delete y[x],c=!0)}return c}}class wn{constructor(){this.layerIndexes={},this.crossTileIDs=new Tn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,d){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new xn);let x=!1;const P={};y.handleWrapJump(d);for(const L of c){const D=L.getBucket(i);D&&i.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(L.tileID,D,this.crossTileIDs)&&(x=!0),P[D.bucketInstanceId]=!0)}return y.removeStaleBuckets(P)&&(x=!0),x}pruneUnusedLayers(i){const c={};i.forEach(d=>{c[d]=!0});for(const d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}const nr=(m,i)=>l.emitValidationErrors(m,i&&i.filter(c=>c.identifier!=="source.canvas")),dr=l.pick(ze,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Jn=l.pick(ze,["setCenter","setZoom","setBearing","setPitch"]),zo=function(){const m={},i=l.spec.$version;for(const c in l.spec.$root){const d=l.spec.$root[c];if(d.required){let y=null;y=c==="version"?i:d.type==="array"?[]:{},y!=null&&(m[c]=y)}}return m}();class ro extends l.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new ee(R(),this),this.imageManager=new j,this.imageManager.setEventedParent(this),this.glyphManager=new X(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new we(256,512),this.crossTileSymbolIndex=new wn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const d=this;this._rtlTextPluginCallback=ro.registerForPluginStateChange(y=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(x,P)=>{if(l.triggerPluginCompletionEvent(x),P&&P.every(L=>L))for(const L in d.sourceCaches)d.sourceCaches[L].reload()})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const x=this.sourceCaches[y.sourceId];if(!x)return;const P=x.getSource();if(P&&P.vectorLayerIds)for(const L in this._layers){const D=this._layers[L];D.source===P.id&&this._validateLayer(D)}})}loadURL(i,c={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const d=typeof c.validate!="boolean"||c.validate,y=this.map._requestManager.transformRequest(i,l.ResourceType.Style);this._request=l.getJSON(y,(x,P)=>{this._request=null,x?this.fire(new l.ErrorEvent(x)):P&&this._load(P,d)})}loadJSON(i,c={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(i,c.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(zo,!1)}_load(i,c){if(c&&nr(this,l.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const y in i.sources)this.addSource(y,i.sources[y],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const d=pe(this.stylesheet.layers);this._order=d.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of d)y=l.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ve(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(c,d,y,x){let P,L,D;const q=y>1?"@2x":"";let oe=l.getJSON(d.transformRequest(d.normalizeSpriteURL(c,q,".json"),l.ResourceType.SpriteJSON),(Me,Te)=>{oe=null,D||(D=Me,P=Te,Se())}),ce=l.getImage(d.transformRequest(d.normalizeSpriteURL(c,q,".png"),l.ResourceType.SpriteImage),(Me,Te)=>{ce=null,D||(D=Me,L=Te,Se())});function Se(){if(D)x(D);else if(P&&L){const Me=l.exported.getImageData(L),Te={};for(const Re in P){const{width:Ve,height:Ze,x:Je,y:Ye,sdf:ct,pixelRatio:rt,stretchX:ut,stretchY:_t,content:St}=P[Re],gt=new l.RGBAImage({width:Ve,height:Ze});l.RGBAImage.copy(Me,gt,{x:Je,y:Ye},{x:0,y:0},{width:Ve,height:Ze}),Te[Re]={data:gt,pixelRatio:rt,sdf:ct,stretchX:ut,stretchY:_t,content:St}}x(null,Te)}}return{cancel(){oe&&(oe.cancel(),oe=null),ce&&(ce.cancel(),ce=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(c,d)=>{if(this._spriteRequest=null,c)this.fire(new l.ErrorEvent(c));else if(d)for(const y in d)this.imageManager.addImage(y,d[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const d=i.sourceLayer;if(!d)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(d)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${d}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const c=[];for(const d of i){const y=this._layers[d];y.type!=="custom"&&c.push(y.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(y.length||x.length)&&this._updateWorkerLayers(y,x);for(const P in this._updatedSources){const L=this._updatedSources[P];L==="reload"?this._reloadSource(P):L==="clear"&&this._clearSource(P)}this._updateTilesForChangedImages();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const d={};for(const y in this.sourceCaches){const x=this.sourceCaches[y];d[y]=x.used,x.used=!1}for(const y of this._order){const x=this._layers[y];x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const y in d){const x=this.sourceCaches[y];d[y]!==x.used&&x.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),nr(this,l.validateStyle(i)))return!1;(i=l.clone$1(i)).layers=pe(i.layers);const c=function(y,x){if(!y)return[{command:ze.setStyle,args:[x]}];let P=[];try{if(!S(y.version,x.version))return[{command:ze.setStyle,args:[x]}];S(y.center,x.center)||P.push({command:ze.setCenter,args:[x.center]}),S(y.zoom,x.zoom)||P.push({command:ze.setZoom,args:[x.zoom]}),S(y.bearing,x.bearing)||P.push({command:ze.setBearing,args:[x.bearing]}),S(y.pitch,x.pitch)||P.push({command:ze.setPitch,args:[x.pitch]}),S(y.sprite,x.sprite)||P.push({command:ze.setSprite,args:[x.sprite]}),S(y.glyphs,x.glyphs)||P.push({command:ze.setGlyphs,args:[x.glyphs]}),S(y.transition,x.transition)||P.push({command:ze.setTransition,args:[x.transition]}),S(y.light,x.light)||P.push({command:ze.setLight,args:[x.light]});const L={},D=[];(function(oe,ce,Se,Me){let Te;for(Te in ce=ce||{},oe=oe||{})Object.prototype.hasOwnProperty.call(oe,Te)&&(Object.prototype.hasOwnProperty.call(ce,Te)||ot(Te,Se,Me));for(Te in ce)Object.prototype.hasOwnProperty.call(ce,Te)&&(Object.prototype.hasOwnProperty.call(oe,Te)?S(oe[Te],ce[Te])||(oe[Te].type==="geojson"&&ce[Te].type==="geojson"&&A(oe,ce,Te)?Se.push({command:ze.setGeoJSONSourceData,args:[Te,ce[Te].data]}):ae(Te,ce,Se,Me)):Ke(Te,ce,Se))})(y.sources,x.sources,D,L);const q=[];y.layers&&y.layers.forEach(oe=>{L[oe.source]?P.push({command:ze.removeLayer,args:[oe.id]}):q.push(oe)}),P=P.concat(D),function(oe,ce,Se){ce=ce||[];const Me=(oe=oe||[]).map(be),Te=ce.map(be),Re=oe.reduce(Be,{}),Ve=ce.reduce(Be,{}),Ze=Me.slice(),Je=Object.create(null);let Ye,ct,rt,ut,_t,St,gt;for(Ye=0,ct=0;Ye<Me.length;Ye++)rt=Me[Ye],Object.prototype.hasOwnProperty.call(Ve,rt)?ct++:(Se.push({command:ze.removeLayer,args:[rt]}),Ze.splice(Ze.indexOf(rt,ct),1));for(Ye=0,ct=0;Ye<Te.length;Ye++)rt=Te[Te.length-1-Ye],Ze[Ze.length-1-Ye]!==rt&&(Object.prototype.hasOwnProperty.call(Re,rt)?(Se.push({command:ze.removeLayer,args:[rt]}),Ze.splice(Ze.lastIndexOf(rt,Ze.length-ct),1)):ct++,St=Ze[Ze.length-Ye],Se.push({command:ze.addLayer,args:[Ve[rt],St]}),Ze.splice(Ze.length-Ye,0,rt),Je[rt]=!0);for(Ye=0;Ye<Te.length;Ye++)if(rt=Te[Ye],ut=Re[rt],_t=Ve[rt],!Je[rt]&&!S(ut,_t))if(S(ut.source,_t.source)&&S(ut["source-layer"],_t["source-layer"])&&S(ut.type,_t.type)){for(gt in z(ut.layout,_t.layout,Se,rt,null,ze.setLayoutProperty),z(ut.paint,_t.paint,Se,rt,null,ze.setPaintProperty),S(ut.filter,_t.filter)||Se.push({command:ze.setFilter,args:[rt,_t.filter]}),S(ut.minzoom,_t.minzoom)&&S(ut.maxzoom,_t.maxzoom)||Se.push({command:ze.setLayerZoomRange,args:[rt,_t.minzoom,_t.maxzoom]}),ut)Object.prototype.hasOwnProperty.call(ut,gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?z(ut[gt],_t[gt],Se,rt,gt.slice(6),ze.setPaintProperty):S(ut[gt],_t[gt])||Se.push({command:ze.setLayerProperty,args:[rt,gt,_t[gt]]}));for(gt in _t)Object.prototype.hasOwnProperty.call(_t,gt)&&!Object.prototype.hasOwnProperty.call(ut,gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?z(ut[gt],_t[gt],Se,rt,gt.slice(6),ze.setPaintProperty):S(ut[gt],_t[gt])||Se.push({command:ze.setLayerProperty,args:[rt,gt,_t[gt]]}))}else Se.push({command:ze.removeLayer,args:[rt]}),St=Ze[Ze.lastIndexOf(rt)+1],Se.push({command:ze.addLayer,args:[_t,St]})}(q,x.layers,P)}catch(L){console.warn("Unable to compute style diff:",L),P=[{command:ze.setStyle,args:[x]}]}return P}(this.serialize(),i).filter(y=>!(y.command in Jn));if(c.length===0)return!1;const d=c.filter(y=>!(y.command in dr));if(d.length>0)throw new Error(`Unimplemented: ${d.map(y=>y.command).join(", ")}.`);return c.forEach(y=>{y.command!=="setTransition"&&this[y.command].apply(this,y.args)}),this.stylesheet=i,!0}addImage(i,c){if(this.getImage(i))return this.fire(new l.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,d={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(l.validateStyle.source,`sources.${i}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.sourceCaches[i]=new jt(i,c,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:y.serialize(),sourceId:i})),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===i)return this.fire(new l.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${d}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.clearTiles(),c.onRemove&&c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){this._checkLoaded(),this.sourceCaches[i].getSource().setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,d={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new l.ErrorEvent(new Error(`Layer "${y}" already exists on this map.`)));let x;if(i.type==="custom"){if(nr(this,l.validateCustomStyleLayer(i)))return;x=l.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(y,i.source),i=l.clone$1(i),i=l.extend(i,{source:y})),this._validate(l.validateStyle.layer,`layers.${y}`,i,{arrayIndex:-1},d))return;x=l.createStyleLayer(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[x.id]=x.serialize()}const P=c?this._order.indexOf(c):this._order.length;if(c&&P===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(P,0,y),this._layerOrderChanged=!0,this._layers[y]=x,this._removedLayers[y]&&x.source&&x.type!=="custom"){const L=this._removedLayers[y];delete this._removedLayers[y],L.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const d=this._order.indexOf(i);this._order.splice(d,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const d=this._order.indexOf(i);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,d){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===c&&y.maxzoom===d||(c!=null&&(y.minzoom=c),d!=null&&(y.maxzoom=d),this._updateLayer(y)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,d={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!S(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(l.validateStyle.filter,`layers.${y.id}.filter`,c,null,d)||(y.filter=l.clone$1(c),this._updateLayer(y)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,c,d,y={}){this._checkLoaded();const x=this.getLayer(i);x?S(x.getLayoutProperty(c),d)||(x.setLayoutProperty(c,d,y),this._updateLayer(x)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const d=this.getLayer(i);if(d)return d.getLayoutProperty(c);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,d,y={}){this._checkLoaded();const x=this.getLayer(i);x?S(x.getPaintProperty(c),d)||(x.setPaintProperty(c,d,y)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const d=i.source,y=i.sourceLayer,x=this.sourceCaches[d];if(x===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const P=x.getSource().type;P==="geojson"&&y?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||y?(i.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(y,i.id,c)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const d=i.source,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const x=y.getSource().type,P=x==="vector"?i.sourceLayer:void 0;x!=="vector"||P?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(P,i.id,c):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,d=i.sourceLayer,y=this.sourceCaches[c];if(y!==void 0)return y.getSource().type!=="vector"||d?(i.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),y.getFeatureState(d,i.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=P=>this._layers[P].type==="fill-extrusion",d={},y=[];for(let P=this._order.length-1;P>=0;P--){const L=this._order[P];if(c(L)){d[L]=P;for(const D of i){const q=D[L];if(q)for(const oe of q)y.push(oe)}}}y.sort((P,L)=>L.intersectionZ-P.intersectionZ);const x=[];for(let P=this._order.length-1;P>=0;P--){const L=this._order[P];if(c(L))for(let D=y.length-1;D>=0;D--){const q=y[D].feature;if(d[q.layer.id]<P)break;x.push(q),y.pop()}else for(const D of i){const q=D[L];if(q)for(const oe of q)x.push(oe.feature)}}return x}queryRenderedFeatures(i,c,d){c&&c.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of c.layers){const L=this._layers[P];if(!L)return this.fire(new l.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];y[L.source]=!0}}const x=[];c.availableImages=this._availableImages;for(const P in this.sourceCaches)c.layers&&!y[P]||x.push(yt(this.sourceCaches[P],this._layers,this._serializedLayers,i,c,d));return this.placement&&x.push(function(P,L,D,q,oe,ce,Se){const Me={},Te=ce.queryRenderedSymbols(q),Re=[];for(const Ve of Object.keys(Te).map(Number))Re.push(Se[Ve]);Re.sort(Pt);for(const Ve of Re){const Ze=Ve.featureIndex.lookupSymbolFeatures(Te[Ve.bucketInstanceId],L,Ve.bucketIndex,Ve.sourceLayerIndex,oe.filter,oe.layers,oe.availableImages,P);for(const Je in Ze){const Ye=Me[Je]=Me[Je]||[],ct=Ze[Je];ct.sort((rt,ut)=>{const _t=Ve.featureSortOrder;if(_t){const St=_t.indexOf(rt.featureIndex);return _t.indexOf(ut.featureIndex)-St}return ut.featureIndex-rt.featureIndex});for(const rt of ct)Ye.push(rt)}}for(const Ve in Me)Me[Ve].forEach(Ze=>{const Je=Ze.feature,Ye=D[P[Ve].source].getFeatureState(Je.layer["source-layer"],Je.id);Je.source=Je.layer.source,Je.layer["source-layer"]&&(Je.sourceLayer=Je.layer["source-layer"]),Je.state=Ye});return Me}(this._layers,this._serializedLayers,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const d=this.sourceCaches[i];return d?function(y,x){const P=y.getRenderableIds().map(q=>y.getTileByID(q)),L=[],D={};for(let q=0;q<P.length;q++){const oe=P[q],ce=oe.tileID.canonical.key;D[ce]||(D[ce]=!0,oe.querySourceFeatures(L,x))}return L}(d,c):[]}addSourceType(i,c,d){return ro.getSourceType(i)?d(new Error(`A source type called "${i}" already exists.`)):(ro.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const d=this.light.getLight();let y=!1;for(const P in i)if(!S(i[P],d[P])){y=!0;break}if(!y)return;const x={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(x)}_validate(i,c,d,y,x={}){return(!x||x.validate!==!1)&&nr(this,i.call(l.validateStyle,l.extend({key:c,style:this.serialize(),value:d,styleSpec:l.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,d,y,x=!1){let P=!1,L=!1;const D={};for(const q of this._order){const oe=this._layers[q];if(oe.type!=="symbol")continue;if(!D[oe.source]){const Se=this.sourceCaches[oe.source];D[oe.source]=Se.getRenderableIds(!0).map(Me=>Se.getTileByID(Me)).sort((Me,Te)=>Te.tileID.overscaledZ-Me.tileID.overscaledZ||(Me.tileID.isLessThan(Te.tileID)?-1:1))}const ce=this.crossTileSymbolIndex.addLayer(oe,D[oe.source],i.center.lng);P=P||ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),i.zoom))&&(this.pauseablePlacement=new rn(i,this._order,x,c,d,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),L=!0),P&&this.pauseablePlacement.placement.setStale()),L||P)for(const q of this._order){const oe=this._layers[q];oe.type==="symbol"&&this.placement.updateLayerOpacities(oe,D[oe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,d){this.imageManager.getImages(c.icons,d),this._updateTilesForChangedImages();const y=this.sourceCaches[c.source];y&&y.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,d){this.glyphManager.getGlyphs(c.stacks,d)}getResource(i,c,d){return l.makeRequest(c,d)}}ro.getSourceType=function(m){return qe[m]},ro.setSourceType=function(m,i){qe[m]=i},ro.registerForPluginStateChange=l.registerForPluginStateChange;var jl=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),na={prelude:Qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:Qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Qn(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:Qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:Qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:Qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function Qn(m,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=i.match(/attribute ([\w]+) ([\w]+)/g),y=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=x?x.concat(y):y,L={};return{fragmentSource:m=m.replace(c,(D,q,oe,ce,Se)=>(L[Se]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
varying ${oe} ${ce} ${Se};
#else
uniform ${oe} ${ce} u_${Se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Se}
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`)),vertexSource:i=i.replace(c,(D,q,oe,ce,Se)=>{const Me=ce==="float"?"vec2":"vec4",Te=Se.match(/color/)?"color":Me;return L[Se]?q==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
attribute ${oe} ${Me} a_${Se};
varying ${oe} ${ce} ${Se};
#else
uniform ${oe} ${ce} u_${Se};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = a_${Se};
#else
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = unpack_mix_${Te}(a_${Se}, u_${Se}_t);
#else
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`:q==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
attribute ${oe} ${Me} a_${Se};
#else
uniform ${oe} ${ce} u_${Se};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${oe} ${ce} ${Se} = a_${Se};
#else
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${oe} ${ce} ${Se} = unpack_mix_${Te}(a_${Se}, u_${Se}_t);
#else
    ${oe} ${ce} ${Se} = u_${Se};
#endif
`}),staticAttributes:d,staticUniforms:P}}class io{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,d,y,x,P,L,D){this.context=i;let q=this.boundPaintVertexBuffers.length!==y.length;for(let oe=0;!q&&oe<y.length;oe++)this.boundPaintVertexBuffers[oe]!==y[oe]&&(q=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===c&&this.boundLayoutVertexBuffer===d&&!q&&this.boundIndexBuffer===x&&this.boundVertexOffset===P&&this.boundDynamicVertexBuffer===L&&this.boundDynamicVertexBuffer2===D?(i.bindVertexArrayOES.set(this.vao),L&&L.bind(),x&&x.dynamicDraw&&x.bind(),D&&D.bind()):this.freshBind(c,d,y,x,P,L,D)}freshBind(i,c,d,y,x,P,L){let D;const q=i.numAttributes,oe=this.context,ce=oe.gl;if(oe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=oe.extVertexArrayObject.createVertexArrayOES(),oe.bindVertexArrayOES.set(this.vao),D=0,this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=y,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=L;else{D=oe.currentNumAttributes||0;for(let Se=q;Se<D;Se++)ce.disableVertexAttribArray(Se)}c.enableAttributes(ce,i);for(const Se of d)Se.enableAttributes(ce,i);P&&P.enableAttributes(ce,i),L&&L.enableAttributes(ce,i),c.bind(),c.setVertexAttribPointers(ce,i,x);for(const Se of d)Se.bind(),Se.setVertexAttribPointers(ce,i,x);P&&(P.bind(),P.setVertexAttribPointers(ce,i,x)),y&&y.bind(),L&&(L.bind(),L.setVertexAttribPointers(ce,i,x)),oe.currentNumAttributes=q}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function $u(m){const i=[];for(let c=0;c<m.length;c++){if(m[c]===null)continue;const d=m[c].split(" ");i.push(d.pop())}return i}class Vu{constructor(i,c,d,y,x,P){const L=i.gl;this.program=L.createProgram();const D=$u(d.staticAttributes),q=y?y.getBinderAttributes():[],oe=D.concat(q),ce=d.staticUniforms?$u(d.staticUniforms):[],Se=y?y.getBinderUniforms():[],Me=ce.concat(Se),Te=[];for(const rt of Me)Te.indexOf(rt)<0&&Te.push(rt);const Re=y?y.defines():[];P&&Re.push("#define OVERDRAW_INSPECTOR;");const Ve=Re.concat(na.prelude.fragmentSource,d.fragmentSource).join(`
`),Ze=Re.concat(na.prelude.vertexSource,d.vertexSource).join(`
`),Je=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Je,Ve),L.compileShader(Je),L.attachShader(this.program,Je);const Ye=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Ye,Ze),L.compileShader(Ye),L.attachShader(this.program,Ye),this.attributes={};const ct={};this.numAttributes=oe.length;for(let rt=0;rt<this.numAttributes;rt++)oe[rt]&&(L.bindAttribLocation(this.program,rt,oe[rt]),this.attributes[oe[rt]]=rt);L.linkProgram(this.program),L.deleteShader(Ye),L.deleteShader(Je);for(let rt=0;rt<Te.length;rt++){const ut=Te[rt];if(ut&&!ct[ut]){const _t=L.getUniformLocation(this.program,ut);_t&&(ct[ut]=_t)}}this.fixedUniforms=x(i,ct),this.binderUniforms=y?y.getUniforms(i,ct):[]}draw(i,c,d,y,x,P,L,D,q,oe,ce,Se,Me,Te,Re,Ve){const Ze=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(d),i.setStencilMode(y),i.setColorMode(x),i.setCullFace(P);for(const Ye in this.fixedUniforms)this.fixedUniforms[Ye].set(L[Ye]);Te&&Te.setUniforms(i,this.binderUniforms,Se,{zoom:Me});const Je={[Ze.LINES]:2,[Ze.TRIANGLES]:3,[Ze.LINE_STRIP]:1}[c];for(const Ye of ce.get()){const ct=Ye.vaos||(Ye.vaos={});(ct[D]||(ct[D]=new io)).bind(i,this,q,Te?Te.getPaintVertexBuffers():[],oe,Ye.vertexOffset,Re,Ve),Ze.drawElements(c,Ye.primitiveLength*Je,Ze.UNSIGNED_SHORT,Ye.primitiveOffset*Je*2)}}}function Gu(m,i,c){const d=1/zn(c,1,i.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,i.transform.tileZoom)/y,P=x*(c.tileID.canonical.x+c.tileID.wrap*y),L=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[P>>16,L>>16],u_pixel_coord_lower:[65535&P,65535&L]}}const Ua=(m,i,c,d)=>{const y=i.style.light,x=y.properties.get("position"),P=le(x.x,x.y,x.z),L=function(){var q=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(q[1]=0,q[2]=0,q[3]=0,q[5]=0,q[6]=0,q[7]=0),q[0]=1,q[4]=1,q[8]=1,q}();y.properties.get("anchor")==="viewport"&&function(q,oe){var ce=Math.sin(oe),Se=Math.cos(oe);q[0]=Se,q[1]=ce,q[2]=0,q[3]=-ce,q[4]=Se,q[5]=0,q[6]=0,q[7]=0,q[8]=1}(L,-i.transform.angle),function(q,oe,ce){var Se=oe[0],Me=oe[1],Te=oe[2];q[0]=Se*ce[0]+Me*ce[3]+Te*ce[6],q[1]=Se*ce[1]+Me*ce[4]+Te*ce[7],q[2]=Se*ce[2]+Me*ce[5]+Te*ce[8]}(P,P,L);const D=y.properties.get("color");return{u_matrix:m,u_lightpos:P,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[D.r,D.g,D.b],u_vertical_gradient:+c,u_opacity:d}},Wu=(m,i,c,d,y,x,P)=>l.extend(Ua(m,i,c,d),Gu(x,i,P),{u_height_factor:-Math.pow(2,y.overscaledZ)/P.tileSize/8}),ks=m=>({u_matrix:m}),Bl=(m,i,c,d)=>l.extend(ks(m),Gu(c,i,d)),Zu=(m,i)=>({u_matrix:m,u_world:i}),Wr=(m,i,c,d,y)=>l.extend(Bl(m,i,c,d),{u_world:y}),$a=(m,i,c,d)=>{const y=m.transform;let x,P;if(d.paint.get("circle-pitch-alignment")==="map"){const L=zn(c,1,y.zoom);x=!0,P=[L,L]}else x=!1,P=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(i.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:P}},ra=(m,i,c)=>{const d=zn(c,1,i.zoom),y=Math.pow(2,i.zoom-c.tileID.overscaledZ),x=c.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[i.pixelsToGLUnits[0]/(d*y),i.pixelsToGLUnits[1]/(d*y)],u_overscale_factor:x}},ia=(m,i,c=1)=>({u_matrix:m,u_color:i,u_overlay:0,u_overlay_scale:c}),oa=m=>({u_matrix:m}),Va=(m,i,c,d)=>({u_matrix:m,u_extrude_scale:zn(i,1,c),u_intensity:d});function Ga(m,i){const c=Math.pow(2,i.canonical.z),d=i.canonical.y;return[new l.MercatorCoordinate(0,d/c).toLngLat().lat,new l.MercatorCoordinate(0,(d+1)/c).toLngLat().lat]}const Lo=(m,i,c)=>{const d=m.transform;return{u_matrix:Dl(m,i,c),u_ratio:1/zn(i,1,d.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Ms=(m,i,c,d)=>l.extend(Lo(m,i,c),{u_image:0,u_image_height:d}),or=(m,i,c,d)=>{const y=m.transform,x=Oo(i,y);return{u_matrix:Dl(m,i,c),u_texsize:i.imageAtlasTexture.size,u_ratio:1/zn(i,1,y.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[x,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Wa=(m,i,c,d,y)=>{const x=m.lineAtlas,P=Oo(i,m.transform),L=c.layout.get("line-cap")==="round",D=x.getDash(d.from,L),q=x.getDash(d.to,L),oe=D.width*y.fromScale,ce=q.width*y.toScale;return l.extend(Lo(m,i,c),{u_patternscale_a:[P/oe,-D.height/2],u_patternscale_b:[P/ce,-q.height/2],u_sdfgamma:x.width/(256*Math.min(oe,ce)*m.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:q.y,u_mix:y.t})};function Oo(m,i){return 1/zn(m,1,i.tileZoom)}function Dl(m,i,c){return m.translatePosMatrix(i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Hu=(m,i,c,d,y)=>{return{u_matrix:m,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(P=y.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(x=y.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Nl(y.paint.get("raster-hue-rotate"))};var x,P};function Nl(m){m*=Math.PI/180;const i=Math.sin(m),c=Math.cos(m);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Ul=(m,i,c,d,y,x,P,L,D,q)=>{const oe=y.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:oe.cameraToCenterDistance,u_pitch:oe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:oe.width/oe.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:P,u_coord_matrix:L,u_is_text:+D,u_pitch_with_map:+d,u_texsize:q,u_texture:0}},$l=(m,i,c,d,y,x,P,L,D,q,oe)=>{const ce=y.transform;return l.extend(Ul(m,i,c,d,y,x,P,L,D,q),{u_gamma_scale:d?Math.cos(ce._pitch)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+oe})},_h=(m,i,c,d,y,x,P,L,D,q)=>l.extend($l(m,i,c,d,y,x,P,L,!0,D,!0),{u_texsize_icon:q,u_texture_icon:1}),Vl=(m,i,c)=>({u_matrix:m,u_opacity:i,u_color:c}),Gl=(m,i,c,d,y,x)=>l.extend(function(P,L,D,q){const oe=D.imageManager.getPattern(P.from.toString()),ce=D.imageManager.getPattern(P.to.toString()),{width:Se,height:Me}=D.imageManager.getPixelSize(),Te=Math.pow(2,q.tileID.overscaledZ),Re=q.tileSize*Math.pow(2,D.transform.tileZoom)/Te,Ve=Re*(q.tileID.canonical.x+q.tileID.wrap*Te),Ze=Re*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:oe.tl,u_pattern_br_a:oe.br,u_pattern_tl_b:ce.tl,u_pattern_br_b:ce.br,u_texsize:[Se,Me],u_mix:L.t,u_pattern_size_a:oe.displaySize,u_pattern_size_b:ce.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/zn(q,1,D.transform.tileZoom),u_pixel_coord_upper:[Ve>>16,Ze>>16],u_pixel_coord_lower:[65535&Ve,65535&Ze]}}(d,x,c,y),{u_matrix:m,u_opacity:i}),sa={fillExtrusion:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_lightpos:new l.Uniform3f(m,i.u_lightpos),u_lightintensity:new l.Uniform1f(m,i.u_lightintensity),u_lightcolor:new l.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new l.Uniform1f(m,i.u_vertical_gradient),u_opacity:new l.Uniform1f(m,i.u_opacity)}),fillExtrusionPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_lightpos:new l.Uniform3f(m,i.u_lightpos),u_lightintensity:new l.Uniform1f(m,i.u_lightintensity),u_lightcolor:new l.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new l.Uniform1f(m,i.u_vertical_gradient),u_height_factor:new l.Uniform1f(m,i.u_height_factor),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade),u_opacity:new l.Uniform1f(m,i.u_opacity)}),fill:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),fillPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),fillOutline:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world)}),fillOutlinePattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),circle:(m,i)=>({u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(m,i.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(m,i.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),collisionBox:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(m,i.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(m,i.u_extrude_scale),u_overscale_factor:new l.Uniform1f(m,i.u_overscale_factor)}),collisionCircle:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_inv_matrix:new l.UniformMatrix4f(m,i.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(m,i.u_viewport_size)}),debug:(m,i)=>({u_color:new l.UniformColor(m,i.u_color),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_overlay:new l.Uniform1i(m,i.u_overlay),u_overlay_scale:new l.Uniform1f(m,i.u_overlay_scale)}),clippingMask:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),heatmap:(m,i)=>({u_extrude_scale:new l.Uniform1f(m,i.u_extrude_scale),u_intensity:new l.Uniform1f(m,i.u_intensity),u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),heatmapTexture:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world),u_image:new l.Uniform1i(m,i.u_image),u_color_ramp:new l.Uniform1i(m,i.u_color_ramp),u_opacity:new l.Uniform1f(m,i.u_opacity)}),hillshade:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_latrange:new l.Uniform2f(m,i.u_latrange),u_light:new l.Uniform2f(m,i.u_light),u_shadow:new l.UniformColor(m,i.u_shadow),u_highlight:new l.UniformColor(m,i.u_highlight),u_accent:new l.UniformColor(m,i.u_accent)}),hillshadePrepare:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_dimension:new l.Uniform2f(m,i.u_dimension),u_zoom:new l.Uniform1f(m,i.u_zoom),u_unpack:new l.Uniform4f(m,i.u_unpack)}),line:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels)}),lineGradient:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_image:new l.Uniform1i(m,i.u_image),u_image_height:new l.Uniform1f(m,i.u_image_height)}),linePattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_texsize:new l.Uniform2f(m,i.u_texsize),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_image:new l.Uniform1i(m,i.u_image),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),lineSDF:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(m,i.u_patternscale_a),u_patternscale_b:new l.Uniform2f(m,i.u_patternscale_b),u_sdfgamma:new l.Uniform1f(m,i.u_sdfgamma),u_image:new l.Uniform1i(m,i.u_image),u_tex_y_a:new l.Uniform1f(m,i.u_tex_y_a),u_tex_y_b:new l.Uniform1f(m,i.u_tex_y_b),u_mix:new l.Uniform1f(m,i.u_mix)}),raster:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_tl_parent:new l.Uniform2f(m,i.u_tl_parent),u_scale_parent:new l.Uniform1f(m,i.u_scale_parent),u_buffer_scale:new l.Uniform1f(m,i.u_buffer_scale),u_fade_t:new l.Uniform1f(m,i.u_fade_t),u_opacity:new l.Uniform1f(m,i.u_opacity),u_image0:new l.Uniform1i(m,i.u_image0),u_image1:new l.Uniform1i(m,i.u_image1),u_brightness_low:new l.Uniform1f(m,i.u_brightness_low),u_brightness_high:new l.Uniform1f(m,i.u_brightness_high),u_saturation_factor:new l.Uniform1f(m,i.u_saturation_factor),u_contrast_factor:new l.Uniform1f(m,i.u_contrast_factor),u_spin_weights:new l.Uniform3f(m,i.u_spin_weights)}),symbolIcon:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texture:new l.Uniform1i(m,i.u_texture)}),symbolSDF:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texture:new l.Uniform1i(m,i.u_texture),u_gamma_scale:new l.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(m,i.u_is_halo)}),symbolTextAndIcon:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texsize_icon:new l.Uniform2f(m,i.u_texsize_icon),u_texture:new l.Uniform1i(m,i.u_texture),u_texture_icon:new l.Uniform1i(m,i.u_texture_icon),u_gamma_scale:new l.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(m,i.u_is_halo)}),background:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_opacity:new l.Uniform1f(m,i.u_opacity),u_color:new l.UniformColor(m,i.u_color)}),backgroundPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_opacity:new l.Uniform1f(m,i.u_opacity),u_image:new l.Uniform1i(m,i.u_image),u_pattern_tl_a:new l.Uniform2f(m,i.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(m,i.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(m,i.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(m,i.u_pattern_br_b),u_texsize:new l.Uniform2f(m,i.u_texsize),u_mix:new l.Uniform1f(m,i.u_mix),u_pattern_size_a:new l.Uniform2f(m,i.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(m,i.u_pattern_size_b),u_scale_a:new l.Uniform1f(m,i.u_scale_a),u_scale_b:new l.Uniform1f(m,i.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(m,i.u_tile_units_to_pixels)})};class Wl{constructor(i,c,d){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Yu{constructor(i,c,d,y){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let d=0;d<this.attributes.length;d++){const y=c.attributes[this.attributes[d].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,c,d){for(let y=0;y<this.attributes.length;y++){const x=this.attributes[y],P=c.attributes[x.name];P!==void 0&&i.vertexAttribPointer(P,x.components,i[Xu[x.type]],!1,this.itemSize,x.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class jn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class zs extends jn{getDefault(){return l.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class aa extends jn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Zl extends jn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class fi extends jn{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Hl extends jn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class la extends jn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Za extends jn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Xl extends jn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Yl extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ha extends jn{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Xa extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Kl extends jn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ls extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Ku extends jn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class qu extends jn{getDefault(){return l.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Os extends jn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class xh extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class wh extends jn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class bh extends jn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ju extends jn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class ql extends jn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Eh extends jn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Jl extends jn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Ql extends jn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Rs extends jn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class eu extends jn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Qu extends jn{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class tu extends jn{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class Qo extends jn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ec extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class fo extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class es extends jn{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class ts extends es{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ya extends es{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class kn{constructor(i,c,d,y){this.context=i,this.width=c,this.height=d;const x=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new ts(i,x),y&&(this.depthAttachment=new Ya(i,x))}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const d=this.depthAttachment.get();d&&i.deleteRenderbuffer(d)}i.deleteFramebuffer(this.framebuffer)}}class pr{constructor(i,c,d){this.blendFunction=i,this.blendColor=c,this.mask=d}}pr.Replace=[1,0],pr.disabled=new pr(pr.Replace,l.Color.transparent,[!1,!1,!1,!1]),pr.unblended=new pr(pr.Replace,l.Color.transparent,[!0,!0,!0,!0]),pr.alphaBlended=new pr([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Sh{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new zs(this),this.clearDepth=new aa(this),this.clearStencil=new Zl(this),this.colorMask=new fi(this),this.depthMask=new Hl(this),this.stencilMask=new la(this),this.stencilFunc=new Za(this),this.stencilOp=new Xl(this),this.stencilTest=new Yl(this),this.depthRange=new Ha(this),this.depthTest=new Xa(this),this.depthFunc=new Kl(this),this.blend=new Ls(this),this.blendFunc=new Ku(this),this.blendColor=new qu(this),this.blendEquation=new Os(this),this.cullFace=new xh(this),this.cullFaceSide=new wh(this),this.frontFace=new bh(this),this.program=new Ju(this),this.activeTexture=new ql(this),this.viewport=new Eh(this),this.bindFramebuffer=new Jl(this),this.bindRenderbuffer=new Ql(this),this.bindTexture=new Rs(this),this.bindVertexBuffer=new eu(this),this.bindElementBuffer=new Qu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tu(this),this.pixelStoreUnpack=new Qo(this),this.pixelStoreUnpackPremultiplyAlpha=new ec(this),this.pixelStoreUnpackFlipY=new fo(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new Wl(this,i,c)}createVertexBuffer(i,c,d){return new Yu(this,i,c,d)}createRenderbuffer(i,c,d){const y=this.gl,x=y.createRenderbuffer();return this.bindRenderbuffer.set(x),y.renderbufferStorage(y.RENDERBUFFER,i,c,d),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,d){return new kn(this,i,c,d)}clear({color:i,depth:c}){const d=this.gl;let y=0;i&&(y|=d.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(y|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){S(i.blendFunction,pr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Bn{constructor(i,c,d){this.func=i,this.mask=c,this.range=d}}Bn.ReadOnly=!1,Bn.ReadWrite=!0,Bn.disabled=new Bn(519,Bn.ReadOnly,[0,1]);const ns=7680;class sr{constructor(i,c,d,y,x,P){this.test=i,this.ref=c,this.mask=d,this.fail=y,this.depthFail=x,this.pass=P}}sr.disabled=new sr({func:519,mask:0},0,0,ns,ns,ns);class mr{constructor(i,c,d){this.enable=i,this.mode=c,this.frontFace=d}}let Ro;function tc(m,i,c,d,y,x,P){const L=m.context,D=L.gl,q=m.useProgram("collisionBox"),oe=[];let ce=0,Se=0;for(let Ye=0;Ye<d.length;Ye++){const ct=d[Ye],rt=i.getTile(ct),ut=rt.getBucket(c);if(!ut)continue;let _t=ct.posMatrix;y[0]===0&&y[1]===0||(_t=m.translatePosMatrix(ct.posMatrix,rt,y,x));const St=P?ut.textCollisionBox:ut.iconCollisionBox,gt=ut.collisionCircleArray;if(gt.length>0){const Kt=l.create(),Ft=_t;l.mul(Kt,ut.placementInvProjMatrix,m.transform.glCoordMatrix),l.mul(Kt,Kt,ut.placementViewportMatrix),oe.push({circleArray:gt,circleOffset:Se,transform:Ft,invTransform:Kt}),ce+=gt.length/4,Se=ce}St&&q.draw(L,D.LINES,Bn.disabled,sr.disabled,m.colorModeForRenderPass(),mr.disabled,ra(_t,m.transform,rt),c.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,null,m.transform.zoom,null,null,St.collisionVertexBuffer)}if(!P||!oe.length)return;const Me=m.useProgram("collisionCircle"),Te=new l.CollisionCircleLayoutArray;Te.resize(4*ce),Te._trim();let Re=0;for(const Ye of oe)for(let ct=0;ct<Ye.circleArray.length/4;ct++){const rt=4*ct,ut=Ye.circleArray[rt+0],_t=Ye.circleArray[rt+1],St=Ye.circleArray[rt+2],gt=Ye.circleArray[rt+3];Te.emplace(Re++,ut,_t,St,gt,0),Te.emplace(Re++,ut,_t,St,gt,1),Te.emplace(Re++,ut,_t,St,gt,2),Te.emplace(Re++,ut,_t,St,gt,3)}(!Ro||Ro.length<2*ce)&&(Ro=function(Ye){const ct=2*Ye,rt=new l.QuadTriangleArray;rt.resize(ct),rt._trim();for(let ut=0;ut<ct;ut++){const _t=6*ut;rt.uint16[_t+0]=4*ut+0,rt.uint16[_t+1]=4*ut+1,rt.uint16[_t+2]=4*ut+2,rt.uint16[_t+3]=4*ut+2,rt.uint16[_t+4]=4*ut+3,rt.uint16[_t+5]=4*ut+0}return rt}(ce));const Ve=L.createIndexBuffer(Ro,!0),Ze=L.createVertexBuffer(Te,l.collisionCircleLayout.members,!0);for(const Ye of oe){const ct={u_matrix:Ye.transform,u_inv_matrix:Ye.invTransform,u_camera_to_center_distance:(Je=m.transform).cameraToCenterDistance,u_viewport_size:[Je.width,Je.height]};Me.draw(L,D.TRIANGLES,Bn.disabled,sr.disabled,m.colorModeForRenderPass(),mr.disabled,ct,c.id,Ze,Ve,l.SegmentVector.simpleSegment(0,2*Ye.circleOffset,Ye.circleArray.length,Ye.circleArray.length/2),null,m.transform.zoom,null,null,null)}var Je;Ze.destroy(),Ve.destroy()}mr.disabled=new mr(!1,1029,2305),mr.backCCW=new mr(!0,1029,2305);const nu=l.identity(new Float32Array(16));function rs(m,i,c,d,y,x){const{horizontalAlign:P,verticalAlign:L}=l.getAnchorAlignment(m),D=-(P-.5)*i,q=-(L-.5)*c,oe=l.evaluateVariableOffset(m,d);return new l.pointGeometry((D/y+oe[0])*x,(q/y+oe[1])*x)}function ua(m,i,c,d,y,x,P,L,D,q,oe){const ce=m.text.placedSymbolArray,Se=m.text.dynamicLayoutVertexArray,Me=m.icon.dynamicLayoutVertexArray,Te={};Se.clear();for(let Re=0;Re<ce.length;Re++){const Ve=ce.get(Re),Ze=m.allowVerticalPlacement&&!Ve.placedOrientation,Je=Ve.hidden||!Ve.crossTileID||Ze?null:d[Ve.crossTileID];if(Je){const Ye=new l.pointGeometry(Ve.anchorX,Ve.anchorY),ct=ft(Ye,c?L:P),rt=Mt(x.cameraToCenterDistance,ct.signedDistanceFromCamera);let ut=y.evaluateSizeForFeature(m.textSizeData,q,Ve)*rt/l.ONE_EM;c&&(ut*=m.tilePixelRatio/D);const{width:_t,height:St,anchor:gt,textOffset:Kt,textBoxScale:Ft}=Je,pn=rs(gt,_t,St,Kt,Ft,ut),$n=c?ft(Ye.add(pn),P).point:ct.point.add(i?pn.rotate(-x.angle):pn),In=m.allowVerticalPlacement&&Ve.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Pn=0;Pn<Ve.numGlyphs;Pn++)l.addDynamicAttributes(Se,$n,In);oe&&Ve.associatedIconIndex>=0&&(Te[Ve.associatedIconIndex]={shiftedAnchor:$n,angle:In})}else Zt(Ve.numGlyphs,Se)}if(oe){Me.clear();const Re=m.icon.placedSymbolArray;for(let Ve=0;Ve<Re.length;Ve++){const Ze=Re.get(Ve);if(Ze.hidden)Zt(Ze.numGlyphs,Me);else{const Je=Te[Ve];if(Je)for(let Ye=0;Ye<Ze.numGlyphs;Ye++)l.addDynamicAttributes(Me,Je.shiftedAnchor,Je.angle);else Zt(Ze.numGlyphs,Me)}}m.icon.dynamicLayoutVertexBuffer.updateData(Me)}m.text.dynamicLayoutVertexBuffer.updateData(Se)}function Ka(m,i,c){return c.iconsInText&&i?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function qa(m,i,c,d,y,x,P,L,D,q,oe,ce){const Se=m.context,Me=Se.gl,Te=m.transform,Re=L==="map",Ve=D==="map",Ze=Re&&c.layout.get("symbol-placement")!=="point",Je=Re&&!Ve&&!Ze,Ye=!c.layout.get("symbol-sort-key").isConstant();let ct=!1;const rt=m.depthModeForSublayer(0,Bn.ReadOnly),ut=c.layout.get("text-variable-anchor"),_t=[];for(const St of d){const gt=i.getTile(St),Kt=gt.getBucket(c);if(!Kt)continue;const Ft=y?Kt.text:Kt.icon;if(!Ft||!Ft.segments.get().length)continue;const pn=Ft.programConfigurations.get(c.id),$n=y||Kt.sdfIcons,In=y?Kt.textSizeData:Kt.iconSizeData,Pn=Ve||Te.pitch!==0,br=m.useProgram(Ka($n,y,Kt),pn),vn=l.evaluateSizeForZoom(In,Te.zoom);let Ln,gr,ei,Bi,Di=[0,0],yo=null;if(y){if(gr=gt.glyphAtlasTexture,ei=Me.LINEAR,Ln=gt.glyphAtlasTexture.size,Kt.iconsInText){Di=gt.imageAtlasTexture.size,yo=gt.imageAtlasTexture;const ga=In.kind==="composite"||In.kind==="camera";Bi=Pn||m.options.rotating||m.options.zooming||ga?Me.LINEAR:Me.NEAREST}}else{const ga=c.layout.get("icon-size").constantOr(0)!==1||Kt.iconsNeedLinear;gr=gt.imageAtlasTexture,ei=$n||m.options.rotating||m.options.zooming||ga||Pn?Me.LINEAR:Me.NEAREST,Ln=gt.imageAtlasTexture.size}const Ni=zn(gt,1,m.transform.zoom),vo=Sn(St.posMatrix,Ve,Re,m.transform,Ni),Ns=fn(St.posMatrix,Ve,Re,m.transform,Ni),pa=ut&&Kt.hasTextData(),Yn=c.layout.get("icon-text-fit")!=="none"&&pa&&Kt.hasIconData();Ze&&Ir(Kt,St.posMatrix,m,y,vo,Ns,Ve,q);const Hr=m.translatePosMatrix(St.posMatrix,gt,x,P),Nn=Ze||y&&ut||Yn?nu:vo,Fr=m.translatePosMatrix(Ns,gt,x,P,!0),Ui=$n&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ur;ur=$n?Kt.iconsInText?_h(In.kind,vn,Je,Ve,m,Hr,Nn,Fr,Ln,Di):$l(In.kind,vn,Je,Ve,m,Hr,Nn,Fr,y,Ln,!0):Ul(In.kind,vn,Je,Ve,m,Hr,Nn,Fr,y,Ln);const ma={program:br,buffers:Ft,uniformValues:ur,atlasTexture:gr,atlasTextureIcon:yo,atlasInterpolation:ei,atlasInterpolationIcon:Bi,isSDF:$n,hasHalo:Ui};if(Ye&&Kt.canOverlap){ct=!0;const ga=Ft.segments.get();for(const nl of ga)_t.push({segments:new l.SegmentVector([nl]),sortKey:nl.sortKey,state:ma})}else _t.push({segments:Ft.segments,sortKey:0,state:ma})}ct&&_t.sort((St,gt)=>St.sortKey-gt.sortKey);for(const St of _t){const gt=St.state;if(Se.activeTexture.set(Me.TEXTURE0),gt.atlasTexture.bind(gt.atlasInterpolation,Me.CLAMP_TO_EDGE),gt.atlasTextureIcon&&(Se.activeTexture.set(Me.TEXTURE1),gt.atlasTextureIcon&&gt.atlasTextureIcon.bind(gt.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),gt.isSDF){const Kt=gt.uniformValues;gt.hasHalo&&(Kt.u_is_halo=1,ru(gt.buffers,St.segments,c,m,gt.program,rt,oe,ce,Kt)),Kt.u_is_halo=0}ru(gt.buffers,St.segments,c,m,gt.program,rt,oe,ce,gt.uniformValues)}}function ru(m,i,c,d,y,x,P,L,D){const q=d.context;y.draw(q,q.gl.TRIANGLES,x,P,L,mr.disabled,D,c.id,m.layoutVertexBuffer,m.indexBuffer,i,c.paint,d.transform.zoom,m.programConfigurations.get(c.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function Fo(m,i,c,d,y,x,P){const L=m.context.gl,D=c.paint.get("fill-pattern"),q=D&&D.constantOr(1),oe=c.getCrossfadeParameters();let ce,Se,Me,Te,Re;P?(Se=q&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ce=L.LINES):(Se=q?"fillPattern":"fill",ce=L.TRIANGLES);for(const Ve of d){const Ze=i.getTile(Ve);if(q&&!Ze.patternsLoaded())continue;const Je=Ze.getBucket(c);if(!Je)continue;const Ye=Je.programConfigurations.get(c.id),ct=m.useProgram(Se,Ye);q&&(m.context.activeTexture.set(L.TEXTURE0),Ze.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ye.updatePaintBuffers(oe));const rt=D.constantOr(null);if(rt&&Ze.imageAtlas){const _t=Ze.imageAtlas,St=_t.patternPositions[rt.to.toString()],gt=_t.patternPositions[rt.from.toString()];St&&gt&&Ye.setConstantPatternPositions(St,gt)}const ut=m.translatePosMatrix(Ve.posMatrix,Ze,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(P){Te=Je.indexBuffer2,Re=Je.segments2;const _t=[L.drawingBufferWidth,L.drawingBufferHeight];Me=Se==="fillOutlinePattern"&&q?Wr(ut,m,oe,Ze,_t):Zu(ut,_t)}else Te=Je.indexBuffer,Re=Je.segments,Me=q?Bl(ut,m,oe,Ze):ks(ut);ct.draw(m.context,ce,y,m.stencilModeForClipping(Ve),x,mr.disabled,Me,c.id,Je.layoutVertexBuffer,Te,Re,c.paint,m.transform.zoom,Ye)}}function bi(m,i,c,d,y,x,P){const L=m.context,D=L.gl,q=c.paint.get("fill-extrusion-pattern"),oe=q.constantOr(1),ce=c.getCrossfadeParameters(),Se=c.paint.get("fill-extrusion-opacity");for(const Me of d){const Te=i.getTile(Me),Re=Te.getBucket(c);if(!Re)continue;const Ve=Re.programConfigurations.get(c.id),Ze=m.useProgram(oe?"fillExtrusionPattern":"fillExtrusion",Ve);oe&&(m.context.activeTexture.set(D.TEXTURE0),Te.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),Ve.updatePaintBuffers(ce));const Je=q.constantOr(null);if(Je&&Te.imageAtlas){const ut=Te.imageAtlas,_t=ut.patternPositions[Je.to.toString()],St=ut.patternPositions[Je.from.toString()];_t&&St&&Ve.setConstantPatternPositions(_t,St)}const Ye=m.translatePosMatrix(Me.posMatrix,Te,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ct=c.paint.get("fill-extrusion-vertical-gradient"),rt=oe?Wu(Ye,m,ct,Se,Me,ce,Te):Ua(Ye,m,ct,Se);Ze.draw(L,L.gl.TRIANGLES,y,x,P,mr.backCCW,rt,c.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,c.paint,m.transform.zoom,Ve)}}function Oi(m,i,c,d,y,x){const P=m.context,L=P.gl,D=i.fbo;if(!D)return;const q=m.useProgram("hillshade");P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,D.colorAttachment.get());const oe=((ce,Se,Me)=>{const Te=Me.paint.get("hillshade-shadow-color"),Re=Me.paint.get("hillshade-highlight-color"),Ve=Me.paint.get("hillshade-accent-color");let Ze=Me.paint.get("hillshade-illumination-direction")*(Math.PI/180);Me.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ze-=ce.transform.angle);const Je=!ce.options.moving;return{u_matrix:ce.transform.calculatePosMatrix(Se.tileID.toUnwrapped(),Je),u_image:0,u_latrange:Ga(0,Se.tileID),u_light:[Me.paint.get("hillshade-exaggeration"),Ze],u_shadow:Te,u_highlight:Re,u_accent:Ve}})(m,i,c);q.draw(P,L.TRIANGLES,d,y,x,mr.disabled,oe,c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function iu(m,i,c,d,y,x){const P=m.context,L=P.gl,D=i.dem;if(D&&D.data){const q=D.dim,oe=D.stride,ce=D.getPixels();if(P.activeTexture.set(L.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||m.getTileTexture(oe),i.demTexture){const Me=i.demTexture;Me.update(ce,{premultiply:!1}),Me.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else i.demTexture=new se(P,ce,L.RGBA,{premultiply:!1}),i.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);P.activeTexture.set(L.TEXTURE0);let Se=i.fbo;if(!Se){const Me=new se(P,{width:q,height:q,data:null},L.RGBA);Me.bind(L.LINEAR,L.CLAMP_TO_EDGE),Se=i.fbo=P.createFramebuffer(q,q,!0),Se.colorAttachment.set(Me.texture)}P.bindFramebuffer.set(Se.framebuffer),P.viewport.set([0,0,q,q]),m.useProgram("hillshadePrepare").draw(P,L.TRIANGLES,d,y,x,mr.disabled,((Me,Te)=>{const Re=Te.stride,Ve=l.create();return l.ortho(Ve,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Ve,Ve,[0,-l.EXTENT,0]),{u_matrix:Ve,u_image:1,u_dimension:[Re,Re],u_zoom:Me.overscaledZ,u_unpack:Te.getUnpackVector()}})(i.tileID,D),c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function ca(m,i,c,d,y){const x=d.paint.get("raster-fade-duration");if(x>0){const P=l.exported.now(),L=(P-m.timeAdded)/x,D=i?(P-i.timeAdded)/x:-1,q=c.getSource(),oe=y.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),ce=!i||Math.abs(i.tileID.overscaledZ-oe)>Math.abs(m.tileID.overscaledZ-oe),Se=ce&&m.refreshedUponExpiration?1:l.clamp(ce?L:1-D,0,1);return m.refreshedUponExpiration&&L>=1&&(m.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Se}:{opacity:Se,mix:0}}return{opacity:1,mix:0}}const nc=new l.Color(1,0,0,1),Ri=new l.Color(0,1,0,1),po=new l.Color(0,0,1,1),Zr=new l.Color(1,0,1,1),is=new l.Color(0,1,1,1);function Fs(m,i,c,d){ha(m,0,i+c/2,m.transform.width,c,d)}function Ja(m,i,c,d){ha(m,i-c/2,0,c,m.transform.height,d)}function ha(m,i,c,d,y,x){const P=m.context,L=P.gl;L.enable(L.SCISSOR_TEST),L.scissor(i*m.pixelRatio,c*m.pixelRatio,d*m.pixelRatio,y*m.pixelRatio),P.clear({color:x}),L.disable(L.SCISSOR_TEST)}function os(m,i,c){const d=m.context,y=d.gl,x=c.posMatrix,P=m.useProgram("debug"),L=Bn.disabled,D=sr.disabled,q=m.colorModeForRenderPass(),oe="$debug";d.activeTexture.set(y.TEXTURE0),m.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),P.draw(d,y.LINE_STRIP,L,D,q,mr.disabled,ia(x,l.Color.red),oe,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments);const ce=i.getTileByID(c.key).latestRawTileData,Se=Math.floor((ce&&ce.byteLength||0)/1024),Me=i.getTile(c).tileSize,Te=512/Math.min(Me,512)*(c.overscaledZ/m.transform.zoom)*.5;let Re=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Re+=` => ${c.overscaledZ}`),function(Ve,Ze){Ve.initDebugOverlayCanvas();const Je=Ve.debugOverlayCanvas,Ye=Ve.context.gl,ct=Ve.debugOverlayCanvas.getContext("2d");ct.clearRect(0,0,Je.width,Je.height),ct.shadowColor="white",ct.shadowBlur=2,ct.lineWidth=1.5,ct.strokeStyle="white",ct.textBaseline="top",ct.font="bold 36px Open Sans, sans-serif",ct.fillText(Ze,5,5),ct.strokeText(Ze,5,5),Ve.debugOverlayTexture.update(Je),Ve.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(m,`${Re} ${Se}kb`),P.draw(d,y.TRIANGLES,L,D,pr.alphaBlended,mr.disabled,ia(x,l.Color.transparent,Te),oe,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments)}const ss={symbol:function(m,i,c,d,y){if(m.renderPass!=="translucent")return;const x=sr.disabled,P=m.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(L,D,q,oe,ce,Se,Me){const Te=D.transform,Re=ce==="map",Ve=Se==="map";for(const Ze of L){const Je=oe.getTile(Ze),Ye=Je.getBucket(q);if(!Ye||!Ye.text||!Ye.text.segments.get().length)continue;const ct=l.evaluateSizeForZoom(Ye.textSizeData,Te.zoom),rt=zn(Je,1,D.transform.zoom),ut=Sn(Ze.posMatrix,Ve,Re,D.transform,rt),_t=q.layout.get("icon-text-fit")!=="none"&&Ye.hasIconData();if(ct){const St=Math.pow(2,Te.zoom-Je.tileID.overscaledZ);ua(Ye,Re,Ve,Me,l.symbolSize,Te,ut,Ze.posMatrix,St,ct,_t)}}}(d,m,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),y),c.paint.get("icon-opacity").constantOr(1)!==0&&qa(m,i,c,d,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),x,P),c.paint.get("text-opacity").constantOr(1)!==0&&qa(m,i,c,d,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),x,P),i.map.showCollisionBoxes&&(tc(m,i,c,d,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),tc(m,i,c,d,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(m,i,c,d){if(m.renderPass!=="translucent")return;const y=c.paint.get("circle-opacity"),x=c.paint.get("circle-stroke-width"),P=c.paint.get("circle-stroke-opacity"),L=!c.layout.get("circle-sort-key").isConstant();if(y.constantOr(1)===0&&(x.constantOr(1)===0||P.constantOr(1)===0))return;const D=m.context,q=D.gl,oe=m.depthModeForSublayer(0,Bn.ReadOnly),ce=sr.disabled,Se=m.colorModeForRenderPass(),Me=[];for(let Te=0;Te<d.length;Te++){const Re=d[Te],Ve=i.getTile(Re),Ze=Ve.getBucket(c);if(!Ze)continue;const Je=Ze.programConfigurations.get(c.id),Ye={programConfiguration:Je,program:m.useProgram("circle",Je),layoutVertexBuffer:Ze.layoutVertexBuffer,indexBuffer:Ze.indexBuffer,uniformValues:$a(m,Re,Ve,c)};if(L){const ct=Ze.segments.get();for(const rt of ct)Me.push({segments:new l.SegmentVector([rt]),sortKey:rt.sortKey,state:Ye})}else Me.push({segments:Ze.segments,sortKey:0,state:Ye})}L&&Me.sort((Te,Re)=>Te.sortKey-Re.sortKey);for(const Te of Me){const{programConfiguration:Re,program:Ve,layoutVertexBuffer:Ze,indexBuffer:Je,uniformValues:Ye}=Te.state;Ve.draw(D,q.TRIANGLES,oe,ce,Se,mr.disabled,Ye,c.id,Ze,Je,Te.segments,c.paint,m.transform.zoom,Re)}},heatmap:function(m,i,c,d){if(c.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const y=m.context,x=y.gl,P=sr.disabled,L=new pr([x.ONE,x.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(D,q,oe){const ce=D.gl;D.activeTexture.set(ce.TEXTURE1),D.viewport.set([0,0,q.width/4,q.height/4]);let Se=oe.heatmapFbo;if(Se)ce.bindTexture(ce.TEXTURE_2D,Se.colorAttachment.get()),D.bindFramebuffer.set(Se.framebuffer);else{const Me=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Me),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),Se=oe.heatmapFbo=D.createFramebuffer(q.width/4,q.height/4,!1),function(Te,Re,Ve,Ze){const Je=Te.gl;Je.texImage2D(Je.TEXTURE_2D,0,Je.RGBA,Re.width/4,Re.height/4,0,Je.RGBA,Te.extRenderToTextureHalfFloat?Te.extTextureHalfFloat.HALF_FLOAT_OES:Je.UNSIGNED_BYTE,null),Ze.colorAttachment.set(Ve)}(D,q,Me,Se)}})(y,m,c),y.clear({color:l.Color.transparent});for(let D=0;D<d.length;D++){const q=d[D];if(i.hasRenderableParent(q))continue;const oe=i.getTile(q),ce=oe.getBucket(c);if(!ce)continue;const Se=ce.programConfigurations.get(c.id),Me=m.useProgram("heatmap",Se),{zoom:Te}=m.transform;Me.draw(y,x.TRIANGLES,Bn.disabled,P,L,mr.disabled,Va(q.posMatrix,oe,Te,c.paint.get("heatmap-intensity")),c.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,c.paint,m.transform.zoom,Se)}y.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(y,x){const P=y.context,L=P.gl,D=x.heatmapFbo;if(!D)return;P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,D.colorAttachment.get()),P.activeTexture.set(L.TEXTURE1);let q=x.colorRampTexture;q||(q=x.colorRampTexture=new se(P,x.colorRamp,L.RGBA)),q.bind(L.LINEAR,L.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(P,L.TRIANGLES,Bn.disabled,sr.disabled,y.colorModeForRenderPass(),mr.disabled,((oe,ce,Se,Me)=>{const Te=l.create();l.ortho(Te,0,oe.width,oe.height,0,0,1);const Re=oe.context.gl;return{u_matrix:Te,u_world:[Re.drawingBufferWidth,Re.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ce.paint.get("heatmap-opacity")}})(y,x),x.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,x.paint,y.transform.zoom)}(m,c))},line:function(m,i,c,d){if(m.renderPass!=="translucent")return;const y=c.paint.get("line-opacity"),x=c.paint.get("line-width");if(y.constantOr(1)===0||x.constantOr(1)===0)return;const P=m.depthModeForSublayer(0,Bn.ReadOnly),L=m.colorModeForRenderPass(),D=c.paint.get("line-dasharray"),q=c.paint.get("line-pattern"),oe=q.constantOr(1),ce=c.paint.get("line-gradient"),Se=c.getCrossfadeParameters(),Me=oe?"linePattern":D?"lineSDF":ce?"lineGradient":"line",Te=m.context,Re=Te.gl;let Ve=!0;for(const Ze of d){const Je=i.getTile(Ze);if(oe&&!Je.patternsLoaded())continue;const Ye=Je.getBucket(c);if(!Ye)continue;const ct=Ye.programConfigurations.get(c.id),rt=m.context.program.get(),ut=m.useProgram(Me,ct),_t=Ve||ut.program!==rt,St=q.constantOr(null);if(St&&Je.imageAtlas){const Kt=Je.imageAtlas,Ft=Kt.patternPositions[St.to.toString()],pn=Kt.patternPositions[St.from.toString()];Ft&&pn&&ct.setConstantPatternPositions(Ft,pn)}const gt=oe?or(m,Je,c,Se):D?Wa(m,Je,c,D,Se):ce?Ms(m,Je,c,Ye.lineClipsArray.length):Lo(m,Je,c);if(oe)Te.activeTexture.set(Re.TEXTURE0),Je.imageAtlasTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),ct.updatePaintBuffers(Se);else if(D&&(_t||m.lineAtlas.dirty))Te.activeTexture.set(Re.TEXTURE0),m.lineAtlas.bind(Te);else if(ce){const Kt=Ye.gradients[c.id];let Ft=Kt.texture;if(c.gradientVersion!==Kt.version){let pn=256;if(c.stepInterpolant){const $n=i.getSource().maxzoom,In=Ze.canonical.z===$n?Math.ceil(1<<m.transform.maxZoom-Ze.canonical.z):1;pn=l.clamp(l.nextPowerOfTwo(Ye.maxLineLength/l.EXTENT*1024*In),256,Te.maxTextureSize)}Kt.gradient=l.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:pn,image:Kt.gradient||void 0,clips:Ye.lineClipsArray}),Kt.texture?Kt.texture.update(Kt.gradient):Kt.texture=new se(Te,Kt.gradient,Re.RGBA),Kt.version=c.gradientVersion,Ft=Kt.texture}Te.activeTexture.set(Re.TEXTURE0),Ft.bind(c.stepInterpolant?Re.NEAREST:Re.LINEAR,Re.CLAMP_TO_EDGE)}ut.draw(Te,Re.TRIANGLES,P,m.stencilModeForClipping(Ze),L,mr.disabled,gt,c.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,c.paint,m.transform.zoom,ct,Ye.layoutVertexBuffer2),Ve=!1}},fill:function(m,i,c,d){const y=c.paint.get("fill-color"),x=c.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const P=m.colorModeForRenderPass(),L=c.paint.get("fill-pattern"),D=m.opaquePassEnabledForLayer()&&!L.constantOr(1)&&y.constantOr(l.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===D){const q=m.depthModeForSublayer(1,m.renderPass==="opaque"?Bn.ReadWrite:Bn.ReadOnly);Fo(m,i,c,d,q,P,!1)}if(m.renderPass==="translucent"&&c.paint.get("fill-antialias")){const q=m.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,Bn.ReadOnly);Fo(m,i,c,d,q,P,!0)}},"fill-extrusion":function(m,i,c,d){const y=c.paint.get("fill-extrusion-opacity");if(y!==0&&m.renderPass==="translucent"){const x=new Bn(m.context.gl.LEQUAL,Bn.ReadWrite,m.depthRangeFor3D);if(y!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))bi(m,i,c,d,x,sr.disabled,pr.disabled),bi(m,i,c,d,x,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const P=m.colorModeForRenderPass();bi(m,i,c,d,x,sr.disabled,P)}}},hillshade:function(m,i,c,d){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const y=m.context,x=m.depthModeForSublayer(0,Bn.ReadOnly),P=m.colorModeForRenderPass(),[L,D]=m.renderPass==="translucent"?m.stencilConfigForOverlap(d):[{},d];for(const q of D){const oe=i.getTile(q);oe.needsHillshadePrepare&&m.renderPass==="offscreen"?iu(m,oe,c,x,sr.disabled,P):m.renderPass==="translucent"&&Oi(m,oe,c,x,L[q.overscaledZ],P)}y.viewport.set([0,0,m.width,m.height])},raster:function(m,i,c,d){if(m.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!d.length)return;const y=m.context,x=y.gl,P=i.getSource(),L=m.useProgram("raster"),D=m.colorModeForRenderPass(),[q,oe]=P instanceof Pe?[{},d]:m.stencilConfigForOverlap(d),ce=oe[oe.length-1].overscaledZ,Se=!m.options.moving;for(const Me of oe){const Te=m.depthModeForSublayer(Me.overscaledZ-ce,c.paint.get("raster-opacity")===1?Bn.ReadWrite:Bn.ReadOnly,x.LESS),Re=i.getTile(Me),Ve=m.transform.calculatePosMatrix(Me.toUnwrapped(),Se);Re.registerFadeDuration(c.paint.get("raster-fade-duration"));const Ze=i.findLoadedParent(Me,0),Je=ca(Re,Ze,i,c,m.transform);let Ye,ct;const rt=c.paint.get("raster-resampling")==="nearest"?x.NEAREST:x.LINEAR;y.activeTexture.set(x.TEXTURE0),Re.texture.bind(rt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(x.TEXTURE1),Ze?(Ze.texture.bind(rt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),Ye=Math.pow(2,Ze.tileID.overscaledZ-Re.tileID.overscaledZ),ct=[Re.tileID.canonical.x*Ye%1,Re.tileID.canonical.y*Ye%1]):Re.texture.bind(rt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const ut=Hu(Ve,ct||[0,0],Ye||1,Je,c);P instanceof Pe?L.draw(y,x.TRIANGLES,Te,sr.disabled,D,mr.disabled,ut,c.id,P.boundsBuffer,m.quadTriangleIndexBuffer,P.boundsSegments):L.draw(y,x.TRIANGLES,Te,q[Me.overscaledZ],D,mr.disabled,ut,c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,i,c){const d=c.paint.get("background-color"),y=c.paint.get("background-opacity");if(y===0)return;const x=m.context,P=x.gl,L=m.transform,D=L.tileSize,q=c.paint.get("background-pattern");if(m.isPatternMissing(q))return;const oe=!q&&d.a===1&&y===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==oe)return;const ce=sr.disabled,Se=m.depthModeForSublayer(0,oe==="opaque"?Bn.ReadWrite:Bn.ReadOnly),Me=m.colorModeForRenderPass(),Te=m.useProgram(q?"backgroundPattern":"background"),Re=L.coveringTiles({tileSize:D});q&&(x.activeTexture.set(P.TEXTURE0),m.imageManager.bind(m.context));const Ve=c.getCrossfadeParameters();for(const Ze of Re){const Je=m.transform.calculatePosMatrix(Ze.toUnwrapped()),Ye=q?Gl(Je,y,m,q,{tileID:Ze,tileSize:D},Ve):Vl(Je,y,d);Te.draw(x,P.TRIANGLES,Se,ce,Me,mr.disabled,Ye,c.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}},debug:function(m,i,c){for(let d=0;d<c.length;d++)os(m,i,c[d])},custom:function(m,i,c){const d=m.context,y=c.implementation;if(m.renderPass==="offscreen"){const x=y.prerender;x&&(m.setCustomLayerDefaults(),d.setColorMode(m.colorModeForRenderPass()),x.call(y,d.gl,m.transform.customLayerMatrix()),d.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),d.setColorMode(m.colorModeForRenderPass()),d.setStencilMode(sr.disabled);const x=y.renderingMode==="3d"?new Bn(m.context.gl.LEQUAL,Bn.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,Bn.ReadOnly);d.setDepthMode(x),y.render(d.gl,m.transform.customLayerMatrix()),d.setDirty(),m.setBaseState(),d.bindFramebuffer.set(null)}}};class Ei{constructor(i,c){this.context=new Sh(i),this.transform=c,this._tileTextures={},this.setup(),this.numSublayers=jt.maxUnderzooming+jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wn,this.gpuTimers={}}resize(i,c,d){if(this.width=i*d,this.height=c*d,this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,c=new l.PosArray;c.emplaceBack(0,0),c.emplaceBack(l.EXTENT,0),c.emplaceBack(0,l.EXTENT),c.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,jl.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const d=new l.PosArray;d.emplaceBack(0,0),d.emplaceBack(l.EXTENT,0),d.emplaceBack(0,l.EXTENT),d.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=i.createVertexBuffer(d,jl.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const y=new l.RasterBoundsArray;y.emplaceBack(0,0,0,0),y.emplaceBack(l.EXTENT,0,l.EXTENT,0),y.emplaceBack(0,l.EXTENT,0,l.EXTENT),y.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(y,Ie.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const x=new l.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(x,jl.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const P=new l.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(P);const L=new l.TriangleIndexArray;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(L),this.emptyTexture=new se(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const D=this.context.gl;this.stencilClearMode=new sr({func:D.ALWAYS,mask:0},0,255,D.ZERO,D.ZERO,D.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=l.create();l.ortho(d,0,this.width,this.height,0,0,1),l.scale(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,Bn.disabled,this.stencilClearMode,pr.disabled,mr.disabled,oa(d),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const d=this.context,y=d.gl;this.nextStencilID+c.length>256&&this.clearStencil(),d.setColorMode(pr.disabled),d.setDepthMode(Bn.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of c){const L=this._tileClippingMaskIDs[P.key]=this.nextStencilID++;x.draw(d,y.TRIANGLES,Bn.disabled,new sr({func:y.ALWAYS,mask:0},L,255,y.KEEP,y.KEEP,y.REPLACE),pr.disabled,mr.disabled,oa(P.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new sr({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new sr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,d=i.sort((P,L)=>L.overscaledZ-P.overscaledZ),y=d[d.length-1].overscaledZ,x=d[0].overscaledZ-y+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const P={};for(let L=0;L<x;L++)P[L+y]=new sr({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[P,d]}return[{[y]:sr.disabled},d]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new pr([i.CONSTANT_COLOR,i.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pr.unblended:pr.alphaBlended}depthModeForSublayer(i,c,d){if(!this.opaquePassEnabledForLayer())return Bn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Bn(d||this.context.gl.LEQUAL,c,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const d=this.style._order,y=this.style.sourceCaches;for(const D in y){const q=y[D];q.used&&q.prepare(this.context)}const x={},P={},L={};for(const D in y){const q=y[D];x[D]=q.getVisibleCoordinates(),P[D]=x[D].slice().reverse(),L[D]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let D=0;D<d.length;D++)if(this.style._layers[d[D]].is3D()){this.opaquePassCutoff=D;break}this.renderPass="offscreen";for(const D of d){const q=this.style._layers[D];if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const oe=P[q.source];(q.type==="custom"||oe.length)&&this.renderLayer(this,y[q.source],q,oe)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const D=this.style._layers[d[this.currentLayer]],q=y[D.source],oe=x[D.source];this._renderTileClippingMasks(D,oe),this.renderLayer(this,q,D,oe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const D=this.style._layers[d[this.currentLayer]],q=y[D.source],oe=(D.type==="symbol"?L:P)[D.source];this._renderTileClippingMasks(D,x[D.source]),this.renderLayer(this,q,D,oe)}if(this.options.showTileBoundaries){let D,q;Object.values(this.style._layers).forEach(oe=>{oe.source&&!oe.isHidden(this.transform.zoom)&&(oe.source!==(q&&q.id)&&(q=this.style.sourceCaches[oe.source]),(!D||D.getSource().maxzoom<q.getSource().maxzoom)&&(D=q))}),D&&ss.debug(this,D,D.getVisibleCoordinates())}this.options.showPadding&&function(D){const q=D.transform.padding;Fs(D,D.transform.height-(q.top||0),3,nc),Fs(D,q.bottom||0,3,Ri),Ja(D,q.left||0,3,po),Ja(D,D.transform.width-(q.right||0),3,Zr);const oe=D.transform.centerPoint;(function(ce,Se,Me,Te){ha(ce,Se-1,Me-10,2,20,Te),ha(ce,Se-10,Me-1,20,2,Te)})(D,oe.x,D.transform.height-oe.y,is)}(this),this.context.setDefault()}renderLayer(i,c,d,y){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||y.length)&&(this.id=d.id,this.gpuTimingStart(d),ss[d.type](i,c,d,y,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let d=this.gpuTimers[i.id];d||(d=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),d.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,d.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const c={};for(const d in i){const y=i[d],x=this.context.extTimerQuery,P=x.getQueryObjectEXT(y.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(y.query),c[d]=P}return c}translatePosMatrix(i,c,d,y,x){if(!d[0]&&!d[1])return i;const P=x?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(P){const q=Math.sin(P),oe=Math.cos(P);d=[d[0]*oe-d[1]*q,d[0]*q+d[1]*oe]}const L=le(x?d[0]:zn(c,d[0],this.transform.zoom),x?d[1]:zn(c,d[1],this.transform.zoom),0),D=new Float32Array(16);return l.translate(D,i,L),D}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),d=this.imageManager.getPattern(i.to.toString());return!c||!d}useProgram(i,c){this.cache=this.cache||{};const d=`${i}${c?c.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[d]||(this.cache[d]=new Vu(this.context,i,na[i],c,sa[i],this._showOverdrawInspector)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new se(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class mo{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,d){const y=Math.pow(2,d),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>l.transformMat4([],L,i)).map(L=>l.scale$1([],L,1/L[3]/c*y)),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const D=function(Se,Me){var Te=Me[0],Re=Me[1],Ve=Me[2],Ze=Te*Te+Re*Re+Ve*Ve;return Ze>0&&(Ze=1/Math.sqrt(Ze)),Se[0]=Me[0]*Ze,Se[1]=Me[1]*Ze,Se[2]=Me[2]*Ze,Se}([],function(Se,Me,Te){var Re=Me[0],Ve=Me[1],Ze=Me[2],Je=Te[0],Ye=Te[1],ct=Te[2];return Se[0]=Ve*ct-Ze*Ye,Se[1]=Ze*Je-Re*ct,Se[2]=Re*Ye-Ve*Je,Se}([],V([],x[L[0]],x[L[1]]),V([],x[L[2]],x[L[1]]))),q=-((oe=D)[0]*(ce=x[L[1]])[0]+oe[1]*ce[1]+oe[2]*ce[2]);var oe,ce;return D.concat(q)});return new mo(x,P)}}class as{constructor(i,c){this.min=i,this.max=c,this.center=function(d,y,x){return d[0]=.5*y[0],d[1]=.5*y[1],d[2]=.5*y[2],d}([],function(d,y,x){return d[0]=y[0]+x[0],d[1]=y[1]+x[1],d[2]=y[2]+x[2],d}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],d=H(this.min),y=H(this.max);for(let x=0;x<c.length;x++)d[x]=c[x]?this.min[x]:this.center[x],y[x]=c[x]?this.center[x]:this.max[x];return y[2]=this.max[2],new as(d,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let d=!0;for(let y=0;y<i.planes.length;y++){const x=i.planes[y];let P=0;for(let L=0;L<c.length;L++)l.dot(x,c[L])>=0&&P++;if(P===0)return 0;P!==c.length&&(d=!1)}if(d)return 2;for(let y=0;y<3;y++){let x=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let L=0;L<i.points.length;L++){const D=i.points[L][y]-this.min[y];x=Math.min(x,D),P=Math.max(P,D)}if(P<0||x>this.max[y]-this.min[y])return 0}return 1}}class jo{constructor(i=0,c=0,d=0,y=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=d,this.right=y}interpolate(i,c,d){return c.top!=null&&i.top!=null&&(this.top=l.number(i.top,c.top,d)),c.bottom!=null&&i.bottom!=null&&(this.bottom=l.number(i.bottom,c.bottom,d)),c.left!=null&&i.left!=null&&(this.left=l.number(i.left,c.left,d)),c.right!=null&&i.right!=null&&(this.right=l.number(i.right,c.right,d)),this}getCenter(i,c){const d=l.clamp((this.left+i-this.right)/2,0,i),y=l.clamp((this.top+c-this.bottom)/2,0,c);return new l.pointGeometry(d,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new jo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ls{constructor(i,c,d,y,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=x===void 0||!!x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=d??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new jo,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new ls(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-l.wrap(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var d=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,y,x){var P=y[0],L=y[1],D=y[2],q=y[3],oe=Math.sin(x),ce=Math.cos(x);d[0]=P*ce+D*oe,d[1]=L*ce+q*oe,d[2]=P*-oe+D*ce,d[3]=L*-oe+q*ce}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=l.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,d){this._unmodified=!1,this._edgeInsets.interpolate(i,c,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new l.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const d=this.pointCoordinate(new l.pointGeometry(0,0)),y=this.pointCoordinate(new l.pointGeometry(this.width,0)),x=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),P=this.pointCoordinate(new l.pointGeometry(0,this.height)),L=Math.floor(Math.min(d.x,y.x,x.x,P.x)),D=Math.floor(Math.max(d.x,y.x,x.x,P.x)),q=1;for(let oe=L-q;oe<=D+q;oe++)oe!==0&&c.push(new l.UnwrappedTileID(oe,i))}return c}coveringTiles(i){let c=this.coveringZoomLevel(i);const d=c;if(i.minzoom!==void 0&&c<i.minzoom)return[];i.maxzoom!==void 0&&c>i.maxzoom&&(c=i.maxzoom);const y=l.MercatorCoordinate.fromLngLat(this.center),x=Math.pow(2,c),P=[x*y.x,x*y.y,0],L=mo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c);let D=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(D=c);const q=Te=>({aabb:new as([Te*x,0,0],[(Te+1)*x,x,0]),zoom:0,x:0,y:0,wrap:Te,fullyVisible:!1}),oe=[],ce=[],Se=c,Me=i.reparseOverscaled?d:c;if(this._renderWorldCopies)for(let Te=1;Te<=3;Te++)oe.push(q(-Te)),oe.push(q(Te));for(oe.push(q(0));oe.length>0;){const Te=oe.pop(),Re=Te.x,Ve=Te.y;let Ze=Te.fullyVisible;if(!Ze){const ut=Te.aabb.intersects(L);if(ut===0)continue;Ze=ut===2}const Je=Te.aabb.distanceX(P),Ye=Te.aabb.distanceY(P),ct=Math.max(Math.abs(Je),Math.abs(Ye)),rt=3+(1<<Se-Te.zoom)-2;if(Te.zoom===Se||ct>rt&&Te.zoom>=D)ce.push({tileID:new l.OverscaledTileID(Te.zoom===Se?Me:Te.zoom,Te.wrap,Te.zoom,Re,Ve),distanceSq:B([P[0]-.5-Re,P[1]-.5-Ve])});else for(let ut=0;ut<4;ut++){const _t=(Re<<1)+ut%2,St=(Ve<<1)+(ut>>1);oe.push({aabb:Te.aabb.quadrant(ut),zoom:Te.zoom+1,x:_t,y:St,wrap:Te.wrap,fullyVisible:Ze})}}return ce.sort((Te,Re)=>Te.distanceSq-Re.distanceSq).map(Te=>Te.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=l.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(i.lng)*this.worldSize,l.mercatorYfromLat(c)*this.worldSize)}unproject(i){return new l.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,c){const d=this.pointCoordinate(c),y=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(i),P=new l.MercatorCoordinate(x.x-(d.x-y.x),x.y-(d.y-y.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}locationCoordinate(i){return l.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointCoordinate(i){const c=[i.x,i.y,0,1],d=[i.x,i.y,1,1];l.transformMat4(c,c,this.pixelMatrixInverse),l.transformMat4(d,d,this.pixelMatrixInverse);const y=c[3],x=d[3],P=c[1]/y,L=d[1]/x,D=c[2]/y,q=d[2]/x,oe=(0-D)/(q-D);return new l.MercatorCoordinate(l.number(c[0]/y,d[0]/x,oe)/this.worldSize,l.number(P,L,oe)/this.worldSize)}coordinatePoint(i){const c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.transformMat4(c,c,this.pixelMatrix),new l.pointGeometry(c[0]/c[3],c[1]/c[3])}getBounds(){return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,0))).extend(this.pointLocation(new l.pointGeometry(this.width,0))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const d=i.key,y=c?this._alignedPosMatrixCache:this._posMatrixCache;if(y[d])return y[d];const x=i.canonical,P=this.worldSize/this.zoomScale(x.z),L=x.x+Math.pow(2,x.z)*i.wrap,D=l.identity(new Float64Array(16));return l.translate(D,D,[L*P,x.y*P,0]),l.scale(D,D,[P/l.EXTENT,P/l.EXTENT,1]),l.multiply(D,c?this.alignedProjMatrix:this.projMatrix,D),y[d]=new Float32Array(D),y[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,d,y,x=-90,P=90,L=-180,D=180;const q=this.size,oe=this._unmodified;if(this.latRange){const Me=this.latRange;x=l.mercatorYfromLat(Me[1])*this.worldSize,P=l.mercatorYfromLat(Me[0])*this.worldSize,i=P-x<q.y?q.y/(P-x):0}if(this.lngRange){const Me=this.lngRange;L=l.mercatorXfromLng(Me[0])*this.worldSize,D=l.mercatorXfromLng(Me[1])*this.worldSize,c=D-L<q.x?q.x/(D-L):0}const ce=this.point,Se=Math.max(c||0,i||0);if(Se)return this.center=this.unproject(new l.pointGeometry(c?(D+L)/2:ce.x,i?(P+x)/2:ce.y)),this.zoom+=this.scaleZoom(Se),this._unmodified=oe,void(this._constraining=!1);if(this.latRange){const Me=ce.y,Te=q.y/2;Me-Te<x&&(y=x+Te),Me+Te>P&&(y=P-Te)}if(this.lngRange){const Me=ce.x,Te=q.x/2;Me-Te<L&&(d=L+Te),Me+Te>D&&(d=D-Te)}d===void 0&&y===void 0||(this.center=this.unproject(new l.pointGeometry(d!==void 0?d:ce.x,y!==void 0?y:ce.y))),this._unmodified=oe,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const c=Math.PI/2+this._pitch,d=this._fov*(.5+i.y/this.height),y=Math.sin(d)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-c-d,.01,Math.PI-.01)),x=this.point,P=x.x,L=x.y,D=1.01*(Math.cos(Math.PI/2-this._pitch)*y+this.cameraToCenterDistance),q=this.height/50;let oe=new Float64Array(16);l.perspective(oe,this._fov,this.width/this.height,q,D),oe[8]=2*-i.x/this.width,oe[9]=2*i.y/this.height,l.scale(oe,oe,[1,-1,1]),l.translate(oe,oe,[0,0,-this.cameraToCenterDistance]),l.rotateX(oe,oe,this._pitch),l.rotateZ(oe,oe,this.angle),l.translate(oe,oe,[-P,-L,0]),this.mercatorMatrix=l.scale([],oe,le(this.worldSize,this.worldSize,this.worldSize)),l.scale(oe,oe,le(1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize)),this.projMatrix=oe,this.invProjMatrix=l.invert([],this.projMatrix);const ce=this.width%2/2,Se=this.height%2/2,Me=Math.cos(this.angle),Te=Math.sin(this.angle),Re=P-Math.round(P)+Me*ce+Te*Se,Ve=L-Math.round(L)+Me*Se+Te*ce,Ze=new Float64Array(oe);if(l.translate(Ze,Ze,[Re>.5?Re-1:Re,Ve>.5?Ve-1:Ve,0]),this.alignedProjMatrix=Ze,oe=l.create(),l.scale(oe,oe,[this.width/2,-this.height/2,1]),l.translate(oe,oe,[1,-1,0]),this.labelPlaneMatrix=oe,oe=l.create(),l.scale(oe,oe,[1,-1,1]),l.translate(oe,oe,[-1,-1,0]),l.scale(oe,oe,[2/this.width,2/this.height,1]),this.glCoordMatrix=oe,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),oe=l.invert(new Float64Array(16),this.pixelMatrix),!oe)throw new Error("failed to invert matrix");this.pixelMatrixInverse=oe,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.pointGeometry(0,0)),c=l.fromValues(i.x*this.worldSize,i.y*this.worldSize,0,1);return l.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let d=c.x,y=c.y,x=c.x,P=c.y;for(const L of i)d=Math.min(d,L.x),y=Math.min(y,L.y),x=Math.max(x,L.x),P=Math.max(P,L.y);return[new l.pointGeometry(d,y),new l.pointGeometry(x,y),new l.pointGeometry(x,P),new l.pointGeometry(d,P),new l.pointGeometry(d,y)]}}}class ou{constructor(i){this._hashName=i&&encodeURIComponent(i),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(c,d){let y=!1,x=null;const P=()=>{x=null,y&&(c(),x=setTimeout(P,300),y=!1)};return()=>(y=!0,x||P(),x)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,y=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,y),P=Math.round(c.lng*x)/x,L=Math.round(c.lat*x)/x,D=this._map.getBearing(),q=this._map.getPitch();let oe="";if(oe+=i?`/${P}/${L}/${d}`:`${d}/${L}/${P}`,(D||q)&&(oe+="/"+Math.round(10*D)/10),q&&(oe+=`/${Math.round(q)}`),this._hashName){const ce=this._hashName;let Se=!1;const Me=window.location.hash.slice(1).split("&").map(Te=>{const Re=Te.split("=")[0];return Re===ce?(Se=!0,`${Re}=${oe}`):Te}).filter(Te=>Te);return Se||Me.push(`${ce}=${oe}`),`#${Me.join("&")}`}return`#${oe}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(c=d)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:c,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const js={linearity:.3,easing:l.bezier(0,0,.3,1)},su=l.extend({deceleration:2500,maxSpeed:1400},js),au=l.extend({deceleration:20,maxSpeed:1400},js),di=l.extend({deceleration:1e3,maxSpeed:360},js),lu=l.extend({deceleration:1e3,maxSpeed:90},js);class rc{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=l.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const x=us(c.pan.mag(),d,l.extend({},su,i||{}));y.offset=c.pan.mult(x.amount/c.pan.mag()),y.center=this._map.transform.center,Bs(y,x)}if(c.zoom){const x=us(c.zoom,d,au);y.zoom=this._map.transform.zoom+x.amount,Bs(y,x)}if(c.bearing){const x=us(c.bearing,d,di);y.bearing=this._map.transform.bearing+l.clamp(x.amount,-179,179),Bs(y,x)}if(c.pitch){const x=us(c.pitch,d,lu);y.pitch=this._map.transform.pitch+x.amount,Bs(y,x)}if(y.zoom||y.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;y.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),l.extend(y,{noMoveStart:!0})}}function Bs(m,i){(!m.duration||m.duration<i.duration)&&(m.duration=i.duration,m.easing=i.easing)}function us(m,i,c){const{maxSpeed:d,linearity:y,deceleration:x}=c,P=l.clamp(m*y/(i/1e3),-d,d),L=Math.abs(P)/(x*y);return{easing:c.easing,duration:1e3*L,amount:P*(L/2)}}class ar extends l.Event{constructor(i,c,d,y={}){const x=C.mousePos(c.getCanvasContainer(),d),P=c.unproject(x);super(i,l.extend({point:x,lngLat:P,originalEvent:d},y)),this._defaultPrevented=!1,this.target=c}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fa extends l.Event{constructor(i,c,d){const y=i==="touchend"?d.changedTouches:d.touches,x=C.touchPos(c.getCanvasContainer(),y),P=x.map(D=>c.unproject(D)),L=x.reduce((D,q,oe,ce)=>D.add(q.div(ce.length)),new l.pointGeometry(0,0));super(i,{points:x,point:L,lngLats:P,lngLat:c.unproject(L),originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Bo extends l.Event{constructor(i,c,d){super(i,{originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class N{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Bo(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new ar(i.type,this._map,i))}mouseup(i){this._map.fire(new ar(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ar(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ar(i.type,this._map,i))}mouseover(i){this._map.fire(new ar(i.type,this._map,i))}mouseout(i){this._map.fire(new ar(i.type,this._map,i))}touchstart(i){return this._firePreventable(new fa(i.type,this._map,i))}touchmove(i){this._map.fire(new fa(i.type,this._map,i))}touchend(i){this._map.fire(new fa(i.type,this._map,i))}touchcancel(i){this._map.fire(new fa(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fe{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ar(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ar("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new ar(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Le{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(C.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=d,this._box||(this._box=C.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(y.x,d.x),P=Math.max(y.x,d.x),L=Math.min(y.y,d.y),D=Math.max(y.y,d.y);C.setTransform(this._box,`translate(${x}px,${L}px)`),this._box.style.width=P-x+"px",this._box.style.height=D-L+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const d=this._startPos,y=c;if(this.reset(),C.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(d,y,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new l.Event(i,{originalEvent:c}))}}function tt(m,i){const c={};for(let d=0;d<m.length;d++)c[m[d].identifier]=i[d];return c}class kt{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),d.length===this.numTouches&&(this.centroid=function(y){const x=new l.pointGeometry(0,0);for(const P of y)x._add(P);return x.div(y.length)}(c),this.touches=tt(d,c)))}touchmove(i,c,d){if(this.aborted||!this.centroid)return;const y=tt(d,c);for(const x in this.touches){const P=this.touches[x],L=y[x];(!L||L.dist(P)>30)&&(this.aborted=!0)}}touchend(i,c,d){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Tt{constructor(i){this.singleTap=new kt(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,d){this.singleTap.touchstart(i,c,d)}touchmove(i,c,d){this.singleTap.touchmove(i,c,d)}touchend(i,c,d){const y=this.singleTap.touchend(i,c,d);if(y){const x=i.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(y)<30;if(x&&P||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Xt{constructor(){this._zoomIn=new Tt({numTouches:1,numTaps:2}),this._zoomOut=new Tt({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,d){this._zoomIn.touchstart(i,c,d),this._zoomOut.touchstart(i,c,d)}touchmove(i,c,d){this._zoomIn.touchmove(i,c,d),this._zoomOut.touchmove(i,c,d)}touchend(i,c,d){const y=this._zoomIn.touchend(i,c,d),x=this._zoomOut.touchend(i,c,d);return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(y)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Yt={0:1,2:2};class dn{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const d=C.mouseButton(i);this._correctButton(i,d)&&(this._lastPoint=c,this._eventButton=d)}mousemoveWindow(i,c){const d=this._lastPoint;if(d){if(i.preventDefault(),function(y,x){const P=Yt[x];return y.buttons===void 0||(y.buttons&P)!==P}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(d,c)}}mouseupWindow(i){this._lastPoint&&C.mouseButton(i)===this._eventButton&&(this._moved&&C.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xt extends dn{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return c===0&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class Dn extends dn{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const d=.8*(c.x-i.x);if(d)return this._active=!0,{bearingDelta:d}}contextmenu(i){i.preventDefault()}}class Xn extends dn{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const d=-.5*(c.y-i.y);if(d)return this._active=!0,{pitchDelta:d}}contextmenu(i){i.preventDefault()}}class er{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0)}touchstart(i,c,d){return this._calculateTransform(i,c,d)}touchmove(i,c,d){if(this._active&&!(d.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,d)}touchend(i,c,d){this._calculateTransform(i,c,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,d){d.length>0&&(this._active=!0);const y=tt(d,c),x=new l.pointGeometry(0,0),P=new l.pointGeometry(0,0);let L=0;for(const q in y){const oe=y[q],ce=this._touches[q];ce&&(x._add(oe),P._add(oe.sub(ce)),L++,y[q]=oe)}if(this._touches=y,L<this._minTouches||!P.mag())return;const D=P.div(L);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(L),panDelta:D}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,c,d){return{}}touchstart(i,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,d){if(!this._firstTwoTouches)return;i.preventDefault();const[y,x]=this._firstTwoTouches,P=wt(d,c,y),L=wt(d,c,x);if(!P||!L)return;const D=this._aroundCenter?null:P.add(L).div(2);return this._move([P,L],D,i)}touchend(i,c,d){if(!this._firstTwoTouches)return;const[y,x]=this._firstTwoTouches,P=wt(d,c,y),L=wt(d,c,x);P&&L||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function wt(m,i,c){for(let d=0;d<m.length;d++)if(m[d].identifier===c)return i[d]}function Fi(m,i){return Math.log(m/i)/Math.LN2}class go extends Pr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const d=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Fi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fi(this._distance,d),pinchAround:c}}}function Do(m,i){return 180*m.angleWith(i)/Math.PI}class Qa extends Pr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const d=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Do(this._vector,d),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,d=Do(i,this._startVector);return Math.abs(d)<c}}function cs(m){return Math.abs(m.y)>Math.abs(m.x)}class da extends Pr{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,cs(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,d){const y=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(y,x,d.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+x.y)/2*-.5}}gestureBeginsVertically(i,c,d){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,x=c.mag()>=2;if(!y&&!x)return;if(!y||!x)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const P=i.y>0==c.y>0;return cs(i)&&cs(c)&&P}}const bg={panStep:100,bearingStep:15,pitchStep:10};class Eg{constructor(){const i=bg;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,d=0,y=0,x=0,P=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?d=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?d=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),P=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:L=>{const D=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:Th,zoom:c?Math.round(D)+c*(i.shiftKey?2:1):D,bearing:L.getBearing()+d*this._bearingStep,pitch:L.getPitch()+y*this._pitchStep,offset:[-x*this._panStep,-P*this._panStep],center:L.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Th(m){return m*(2-m)}const ic=4.000244140625;class Ch{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const d=l.exported.now(),y=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%ic==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=C.mousePos(this._el,i);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(c)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>ic?this._wheelZoomRate:this._defaultZoomRate;let D=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&D!==0&&(D=1/D);const q=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(q*D))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,d=this._startZoom,y=this._easing;let x,P=!1;if(this._type==="wheel"&&d&&y){const L=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),D=y(L);x=l.number(d,c,D),L<1?this._frameId||(this._frameId=!0):P=!0}else x=c,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:x-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=l.ease;if(this._prevEase){const d=this._prevEase,y=(l.exported.now()-d.start)/d.duration,x=d.easing(y+.01)-d.easing(y),P=.27/Math.sqrt(x*x+1e-4)*.01,L=Math.sqrt(.0729-P*P);c=l.bezier(P,L,.25,1)}return this._prevEase={start:l.exported.now(),duration:i,easing:c},c}reset(){this._active=!1}}class Ah{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Si{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:d.getZoom()+(i.shiftKey?-1:1),around:d.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ds{constructor(){this._tap=new Tt({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,c,d){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=c[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(i,c,d))}touchmove(i,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const y=c[0],x=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,d)}touchend(i,c,d){this._tapTime?this._swipePoint&&d.length===0&&this.reset():this._tap.touchend(i,c,d)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gd{constructor(i,c,d){this._el=i,this._mousePan=c,this._touchPan=d}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ih{constructor(i,c,d){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ph{constructor(i,c,d,y){this._el=i,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const el=m=>m.zoom||m.drag||m.pitch||m.rotate;class yd extends l.Event{}function Ti(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class lr{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rc(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c),l.bindAll(["handleEvent","handleWindowEvent"],this);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,x,P]of this._listeners)C.addEventListener(y,x,y===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[i,c,d]of this._listeners)C.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(i){const c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new N(c,i));const y=c.boxZoom=new Le(c,i);this._add("boxZoom",y);const x=new Xt,P=new Si;c.doubleClickZoom=new Ah(P,x),this._add("tapZoom",x),this._add("clickZoom",P);const L=new Ds;this._add("tapDragZoom",L);const D=c.touchPitch=new da;this._add("touchPitch",D);const q=new Dn(i),oe=new Xn(i);c.dragRotate=new Ih(i,q,oe),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",oe,["mouseRotate"]);const ce=new xt(i),Se=new er(i);c.dragPan=new gd(d,ce,Se),this._add("mousePan",ce),this._add("touchPan",Se,["touchZoom","touchRotate"]);const Me=new Qa,Te=new go;c.touchZoomRotate=new Ph(d,Te,Me,L),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",Te,["touchPan","touchRotate"]);const Re=c.scrollZoom=new Ch(c,this);this._add("scrollZoom",Re,["mousePan"]);const Ve=c.keyboard=new Eg;this._add("keyboard",Ve),this._add("blockableMapEvent",new fe(c));for(const Ze of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[Ze]&&c[Ze].enable(i[Ze])}_add(i,c,d){this._handlers.push({handlerName:i,handler:c,allowed:d}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!el(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,d){for(const y in i)if(y!==d&&(!c||c.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const d of i)this._el.contains(d.target)&&c.push(d);return c}handleEvent(i,c){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const d=i.type==="renderFrame"?void 0:i,y={needsRenderFrame:!1},x={},P={},L=i.touches,D=L?this._getMapTouches(L):void 0,q=D?C.touchPos(this._el,D):C.mousePos(this._el,i);for(const{handlerName:Se,handler:Me,allowed:Te}of this._handlers){if(!Me.isEnabled())continue;let Re;this._blockedByActive(P,Te,Se)?Me.reset():Me[c||i.type]&&(Re=Me[c||i.type](i,q,D),this.mergeHandlerResult(y,x,Re,Se,d),Re&&Re.needsRenderFrame&&this._triggerRenderFrame()),(Re||Me.isActive())&&(P[Se]=Me)}const oe={};for(const Se in this._previousActiveHandlers)P[Se]||(oe[Se]=d);this._previousActiveHandlers=P,(Object.keys(oe).length||Ti(y))&&(this._changes.push([y,x,oe]),this._triggerRenderFrame()),(Object.keys(P).length||Ti(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=y;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))}mergeHandlerResult(i,c,d,y,x){if(!d)return;l.extend(i,d);const P={handlerName:y,originalEvent:d.originalEvent||x};d.zoomDelta!==void 0&&(c.zoom=P),d.panDelta!==void 0&&(c.drag=P),d.pitchDelta!==void 0&&(c.pitch=P),d.bearingDelta!==void 0&&(c.rotate=P)}_applyChanges(){const i={},c={},d={};for(const[y,x,P]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new l.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),l.extend(c,x),l.extend(d,P);this._updateMapTransform(i,c,d),this._changes=[]}_updateMapTransform(i,c,d){const y=this._map,x=y.transform;if(!Ti(i))return this._fireEvents(c,d,!0);let{panDelta:P,zoomDelta:L,bearingDelta:D,pitchDelta:q,around:oe,pinchAround:ce}=i;ce!==void 0&&(oe=ce),y._stop(!0),oe=oe||y.transform.centerPoint;const Se=x.pointLocation(P?oe.sub(P):oe);D&&(x.bearing+=D),q&&(x.pitch+=q),L&&(x.zoom+=L),x.setLocationAtPoint(Se,oe),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,d,!0)}_fireEvents(i,c,d){const y=el(this._eventsInProgress),x=el(i),P={};for(const oe in i){const{originalEvent:ce}=i[oe];this._eventsInProgress[oe]||(P[`${oe}start`]=ce),this._eventsInProgress[oe]=i[oe]}!y&&x&&this._fireEvent("movestart",x.originalEvent);for(const oe in P)this._fireEvent(oe,P[oe]);x&&this._fireEvent("move",x.originalEvent);for(const oe in i){const{originalEvent:ce}=i[oe];this._fireEvent(oe,ce)}const L={};let D;for(const oe in this._eventsInProgress){const{handlerName:ce,originalEvent:Se}=this._eventsInProgress[oe];this._handlersById[ce].isActive()||(delete this._eventsInProgress[oe],D=c[ce]||Se,L[`${oe}end`]=D)}for(const oe in L)this._fireEvent(oe,L[oe]);const q=el(this._eventsInProgress);if(d&&(y||x)&&!q){this._updatingCamera=!0;const oe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ce=Se=>Se!==0&&-this._bearingSnap<Se&&Se<this._bearingSnap;oe?(ce(oe.bearing||this._map.getBearing())&&(oe.bearing=0),this._map.easeTo(oe,{originalEvent:D})):(this._map.fire(new l.Event("moveend",{originalEvent:D})),ce(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new l.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new yd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const oc={extend:(m,...i)=>l.extend(m,...i),run(m){m()},logToElement(m,i=!1,c="log"){const d=window.document.getElementById(c);d&&(i&&(d.innerHTML=""),d.innerHTML+=`<br>${m}`)}};class kh extends l.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,d){return i=l.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,l.extend({offset:i},c),d)}panTo(i,c,d){return this.easeTo(l.extend({center:i},c),d)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,d){return this.easeTo(l.extend({zoom:i},c),d)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,d){return this.easeTo(l.extend({bearing:i},c),d)}resetNorth(i,c){return this.rotateTo(0,l.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=l.LngLatBounds.convert(i);const d=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),d,c)}_cameraForBoxAndBearing(i,c,d,y){const x={top:0,bottom:0,right:0,left:0};if(typeof(y=l.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const rt=y.padding;y.padding={top:rt,bottom:rt,right:rt,left:rt}}y.padding=l.extend(x,y.padding);const P=this.transform,L=P.padding,D=P.project(l.LngLat.convert(i)),q=P.project(l.LngLat.convert(c)),oe=D.rotate(-d*Math.PI/180),ce=q.rotate(-d*Math.PI/180),Se=new l.pointGeometry(Math.max(oe.x,ce.x),Math.max(oe.y,ce.y)),Me=new l.pointGeometry(Math.min(oe.x,ce.x),Math.min(oe.y,ce.y)),Te=Se.sub(Me),Re=(P.width-(L.left+L.right+y.padding.left+y.padding.right))/Te.x,Ve=(P.height-(L.top+L.bottom+y.padding.top+y.padding.bottom))/Te.y;if(Ve<0||Re<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ze=Math.min(P.scaleZoom(P.scale*Math.min(Re,Ve)),y.maxZoom),Je=l.pointGeometry.convert(y.offset),Ye=new l.pointGeometry((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(d*Math.PI/180),ct=Je.add(Ye).mult(P.scale/P.zoomScale(Ze));return{center:P.unproject(D.add(q).div(2).sub(ct)),zoom:Ze,bearing:d}}fitBounds(i,c,d){return this._fitInternal(this.cameraForBounds(i,c),c,d)}fitScreenCoordinates(i,c,d,y,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(i)),this.transform.pointLocation(l.pointGeometry.convert(c)),d,y),y,x)}_fitInternal(i,c,d){return i?(delete(c=l.extend(i,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(i,c){this.stop();const d=this.transform;let y=!1,x=!1,P=!1;return"zoom"in i&&d.zoom!==+i.zoom&&(y=!0,d.zoom=+i.zoom),i.center!==void 0&&(d.center=l.LngLat.convert(i.center)),"bearing"in i&&d.bearing!==+i.bearing&&(x=!0,d.bearing=+i.bearing),"pitch"in i&&d.pitch!==+i.pitch&&(P=!0,d.pitch=+i.pitch),i.padding==null||d.isPaddingEqual(i.padding)||(d.padding=i.padding),this.fire(new l.Event("movestart",c)).fire(new l.Event("move",c)),y&&this.fire(new l.Event("zoomstart",c)).fire(new l.Event("zoom",c)).fire(new l.Event("zoomend",c)),x&&this.fire(new l.Event("rotatestart",c)).fire(new l.Event("rotate",c)).fire(new l.Event("rotateend",c)),P&&this.fire(new l.Event("pitchstart",c)).fire(new l.Event("pitch",c)).fire(new l.Event("pitchend",c)),this.fire(new l.Event("moveend",c))}easeTo(i,c){this._stop(!1,i.easeId),((i=l.extend({offset:[0,0],duration:500,easing:l.ease},i)).animate===!1||!i.essential&&l.exported.prefersReducedMotion)&&(i.duration=0);const d=this.transform,y=this.getZoom(),x=this.getBearing(),P=this.getPitch(),L=this.getPadding(),D="zoom"in i?+i.zoom:y,q="bearing"in i?this._normalizeBearing(i.bearing,x):x,oe="pitch"in i?+i.pitch:P,ce="padding"in i?i.padding:d.padding,Se=l.pointGeometry.convert(i.offset);let Me=d.centerPoint.add(Se);const Te=d.pointLocation(Me),Re=l.LngLat.convert(i.center||Te);this._normalizeCenter(Re);const Ve=d.project(Te),Ze=d.project(Re).sub(Ve),Je=d.zoomScale(D-y);let Ye,ct;i.around&&(Ye=l.LngLat.convert(i.around),ct=d.locationPoint(Ye));const rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||D!==y,this._rotating=this._rotating||x!==q,this._pitching=this._pitching||oe!==P,this._padding=!d.isPaddingEqual(ce),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,rt),this._ease(ut=>{if(this._zooming&&(d.zoom=l.number(y,D,ut)),this._rotating&&(d.bearing=l.number(x,q,ut)),this._pitching&&(d.pitch=l.number(P,oe,ut)),this._padding&&(d.interpolatePadding(L,ce,ut),Me=d.centerPoint.add(Se)),Ye)d.setLocationAtPoint(Ye,ct);else{const _t=d.zoomScale(d.zoom-y),St=D>y?Math.min(2,Je):Math.max(.5,Je),gt=Math.pow(St,1-ut),Kt=d.unproject(Ve.add(Ze.mult(ut*gt)).mult(_t));d.setLocationAtPoint(d.renderWorldCopies?Kt.wrap():Kt,Me)}this._fireMoveEvents(c)},ut=>{this._afterEase(c,ut)},i),this}_prepareEase(i,c,d={}){this._moving=!0,c||d.moving||this.fire(new l.Event("movestart",i)),this._zooming&&!d.zooming&&this.fire(new l.Event("zoomstart",i)),this._rotating&&!d.rotating&&this.fire(new l.Event("rotatestart",i)),this._pitching&&!d.pitching&&this.fire(new l.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new l.Event("move",i)),this._zooming&&this.fire(new l.Event("zoom",i)),this._rotating&&this.fire(new l.Event("rotate",i)),this._pitching&&this.fire(new l.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const d=this._zooming,y=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new l.Event("zoomend",i)),y&&this.fire(new l.Event("rotateend",i)),x&&this.fire(new l.Event("pitchend",i)),this.fire(new l.Event("moveend",i))}flyTo(i,c){if(!i.essential&&l.exported.prefersReducedMotion){const Pn=l.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pn,c)}this.stop(),i=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},i);const d=this.transform,y=this.getZoom(),x=this.getBearing(),P=this.getPitch(),L=this.getPadding(),D="zoom"in i?l.clamp(+i.zoom,d.minZoom,d.maxZoom):y,q="bearing"in i?this._normalizeBearing(i.bearing,x):x,oe="pitch"in i?+i.pitch:P,ce="padding"in i?i.padding:d.padding,Se=d.zoomScale(D-y),Me=l.pointGeometry.convert(i.offset);let Te=d.centerPoint.add(Me);const Re=d.pointLocation(Te),Ve=l.LngLat.convert(i.center||Re);this._normalizeCenter(Ve);const Ze=d.project(Re),Je=d.project(Ve).sub(Ze);let Ye=i.curve;const ct=Math.max(d.width,d.height),rt=ct/Se,ut=Je.mag();if("minZoom"in i){const Pn=l.clamp(Math.min(i.minZoom,y,D),d.minZoom,d.maxZoom),br=ct/d.zoomScale(Pn-y);Ye=Math.sqrt(br/ut*2)}const _t=Ye*Ye;function St(Pn){const br=(rt*rt-ct*ct+(Pn?-1:1)*_t*_t*ut*ut)/(2*(Pn?rt:ct)*_t*ut);return Math.log(Math.sqrt(br*br+1)-br)}function gt(Pn){return(Math.exp(Pn)-Math.exp(-Pn))/2}function Kt(Pn){return(Math.exp(Pn)+Math.exp(-Pn))/2}const Ft=St(0);let pn=function(Pn){return Kt(Ft)/Kt(Ft+Ye*Pn)},$n=function(Pn){return ct*((Kt(Ft)*(gt(br=Ft+Ye*Pn)/Kt(br))-gt(Ft))/_t)/ut;var br},In=(St(1)-Ft)/Ye;if(Math.abs(ut)<1e-6||!isFinite(In)){if(Math.abs(ct-rt)<1e-6)return this.easeTo(i,c);const Pn=rt<ct?-1:1;In=Math.abs(Math.log(rt/ct))/Ye,$n=function(){return 0},pn=function(br){return Math.exp(Pn*Ye*br)}}return i.duration="duration"in i?+i.duration:1e3*In/("screenSpeed"in i?+i.screenSpeed/Ye:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=x!==q,this._pitching=oe!==P,this._padding=!d.isPaddingEqual(ce),this._prepareEase(c,!1),this._ease(Pn=>{const br=Pn*In,vn=1/pn(br);d.zoom=Pn===1?D:y+d.scaleZoom(vn),this._rotating&&(d.bearing=l.number(x,q,Pn)),this._pitching&&(d.pitch=l.number(P,oe,Pn)),this._padding&&(d.interpolatePadding(L,ce,Pn),Te=d.centerPoint.add(Me));const Ln=Pn===1?Ve:d.unproject(Ze.add(Je.mult($n(br))).mult(vn));d.setLocationAtPoint(d.renderWorldCopies?Ln.wrap():Ln,Te),this._fireMoveEvents(c)},()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}if(!i){const d=this.handlers;d&&d.stop(!1)}return this}_ease(i,c,d){d.animate===!1||d.duration===0?(i(1),c()):(this._easeStart=l.exported.now(),this._easeOptions=d,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=l.wrap(i,-180,180);const d=Math.abs(i-c);return Math.abs(i-360-c)<d&&(i-=360),Math.abs(i+360-c)<d&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const d=i.lng-c.center.lng;i.lng+=d>180?-360:d<-180?360:0}}class Mh{constructor(i={}){this.options=i,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const d=this._map._getUIString(`AttributionControl.${c}`);i.title=d,i.setAttribute("aria-label",d)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.sourceCaches;for(const y in c){const x=c[y];if(x.used){const P=x.getSource();P.attribution&&i.indexOf(P.attribution)<0&&i.push(P.attribution)}}i=i.filter(y=>String(y).trim()),i.sort((y,x)=>y.length-x.length),i=i.filter((y,x)=>{for(let P=x+1;P<i.length;P++)if(i[P].indexOf(y)>=0)return!1;return!0});const d=i.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,i.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class vd{constructor(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)}onAdd(i){this._map=i,this._container=C.create("div","maplibregl-ctrl mapboxgl-ctrl");const c=C.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(void 0),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const i=this._map.style.sourceCaches;for(const c in i)if(i[c].getSource().maplibreLogo)return!0;return!1}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("maplibregl-compact","mapboxgl-compact"):c.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class _d{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(const y of d)if(y.id===i)return void(y.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const d of c)if(!d.cancelled&&(d.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Sg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},No={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},sc={showCompass:!0,showZoom:!0,visualizePitch:!1};class qt{constructor(i,c,d=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Dn({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,d&&(this.mousePitch=new Xn({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),C.addEventListener(c,"mousedown",this.mousedown),C.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(c,"touchmove",this.touchmove),C.addEventListener(c,"touchend",this.touchend),C.addEventListener(c,"touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),C.disableDrag()}move(i,c){const d=this.map,y=this.mouseRotate.mousemoveWindow(i,c);if(y&&y.bearingDelta&&d.setBearing(d.getBearing()+y.bearingDelta),this.mousePitch){const x=this.mousePitch.mousemoveWindow(i,c);x&&x.pitchDelta&&d.setPitch(d.getPitch()+x.pitchDelta)}}off(){const i=this.element;C.removeEventListener(i,"mousedown",this.mousedown),C.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(i,"touchmove",this.touchmove),C.removeEventListener(i,"touchend",this.touchend),C.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(l.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),C.mousePos(this.element,i)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,C.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ln(m,i,c){if(m=new l.LngLat(m.lng,m.lat),i){const d=new l.LngLat(m.lng-360,m.lat),y=new l.LngLat(m.lng+360,m.lat),x=c.locationPoint(m).distSqr(i);c.locationPoint(d).distSqr(i)<x?m=d:c.locationPoint(y).distSqr(i)<x&&(m=y)}for(;Math.abs(m.lng-c.center.lng)>180;){const d=c.locationPoint(m);if(d.x>=0&&d.y>=0&&d.x<=c.width&&d.y<=c.height)break;m.lng>c.center.lng?m.lng-=360:m.lng+=360}return m}const tl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ac(m,i,c){const d=m.classList;for(const y in tl)d.remove(`maplibregl-${c}-anchor-${y}`,`mapboxgl-${c}-anchor-${y}`);d.add(`maplibregl-${c}-anchor-${i}`,`mapboxgl-${c}-anchor-${i}`)}class uu extends l.Evented{constructor(i,c){if(super(),(i instanceof HTMLElement||c)&&(i=l.extend({element:i},c)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div"),this._element.setAttribute("aria-label","Map marker");const d=C.createNS("http://www.w3.org/2000/svg","svg"),y=41,x=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${y}px`),d.setAttributeNS(null,"width",`${x}px`),d.setAttributeNS(null,"viewBox",`0 0 ${x} ${y}`);const P=C.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const L=C.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill-rule","nonzero");const D=C.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Je of q){const Ye=C.createNS("http://www.w3.org/2000/svg","ellipse");Ye.setAttributeNS(null,"opacity","0.04"),Ye.setAttributeNS(null,"cx","10.5"),Ye.setAttributeNS(null,"cy","5.80029008"),Ye.setAttributeNS(null,"rx",Je.rx),Ye.setAttributeNS(null,"ry",Je.ry),D.appendChild(Ye)}const oe=C.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill",this._color);const ce=C.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),oe.appendChild(ce);const Se=C.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"fill","#000000");const Me=C.createNS("http://www.w3.org/2000/svg","path");Me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Se.appendChild(Me);const Te=C.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Te.setAttributeNS(null,"fill","#FFFFFF");const Re=C.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ve=C.createNS("http://www.w3.org/2000/svg","circle");Ve.setAttributeNS(null,"fill","#000000"),Ve.setAttributeNS(null,"opacity","0.25"),Ve.setAttributeNS(null,"cx","5.5"),Ve.setAttributeNS(null,"cy","5.5"),Ve.setAttributeNS(null,"r","5.4999962");const Ze=C.createNS("http://www.w3.org/2000/svg","circle");Ze.setAttributeNS(null,"fill","#FFFFFF"),Ze.setAttributeNS(null,"cx","5.5"),Ze.setAttributeNS(null,"cy","5.5"),Ze.setAttributeNS(null,"r","5.4999962"),Re.appendChild(Ve),Re.appendChild(Ze),L.appendChild(D),L.appendChild(oe),L.appendChild(Se),L.appendChild(Te),L.appendChild(Re),d.appendChild(L),d.setAttributeNS(null,"height",y*this._scale+"px"),d.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(d),this._offset=l.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),ac(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const c=i.code,d=i.charCode||i.keyCode;c!=="Space"&&c!=="Enter"&&d!==32&&d!==13||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,d=this._element;this._popup&&(c===d||d.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ln(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(c=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${tl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${d} ${c}`)}getOffset(){return this._offset}setOffset(i){return this._offset=l.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ci={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let hs,ji=0,cu=!1;const lc={maxWidth:100,unit:"metric"};function xr(m,i,c){const d=c&&c.maxWidth||100,y=m._container.clientHeight/2,x=m.unproject([0,y]),P=m.unproject([d,y]),L=x.distanceTo(P);if(c&&c.unit==="imperial"){const D=3.2808*L;D>5280?wr(i,d,D/5280,m._getUIString("ScaleControl.Miles")):wr(i,d,D,m._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?wr(i,d,L/1852,m._getUIString("ScaleControl.NauticalMiles")):L>=1e3?wr(i,d,L/1e3,m._getUIString("ScaleControl.Kilometers")):wr(i,d,L,m._getUIString("ScaleControl.Meters"))}function wr(m,i,c,d){const y=function(x){const P=Math.pow(10,`${Math.floor(x)}`.length-1);let L=x/P;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(D){const q=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*q)/q}(L),P*L}(c);m.style.width=i*(y/c)+"px",m.innerHTML=`${y}&nbsp;${d}`}const xd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function uc(m){if(m){if(typeof m=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(m,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,m),"top-left":new l.pointGeometry(i,i),"top-right":new l.pointGeometry(-i,i),bottom:new l.pointGeometry(0,-m),"bottom-left":new l.pointGeometry(i,-i),"bottom-right":new l.pointGeometry(-i,-i),left:new l.pointGeometry(m,0),right:new l.pointGeometry(-m,0)}}if(m instanceof l.pointGeometry||Array.isArray(m)){const i=l.pointGeometry.convert(m);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.pointGeometry.convert(m.center||[0,0]),top:l.pointGeometry.convert(m.top||[0,0]),"top-left":l.pointGeometry.convert(m["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(m["top-right"]||[0,0]),bottom:l.pointGeometry.convert(m.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(m["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(m["bottom-right"]||[0,0]),left:l.pointGeometry.convert(m.left||[0,0]),right:l.pointGeometry.convert(m.right||[0,0])}}return uc(new l.pointGeometry(0,0))}const fu={supported:w,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends kh{constructor(m){var i;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(m=l.extend({},No,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ls(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),{bearingSnap:m.bearingSnap}),this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new _d,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Sg,m.locale),this._clickTolerance=m.clickTolerance,this._pixelRatio=(i=m.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new F(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new lr(this,m),this._hash=m.hash&&new ou(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,l.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Mh({customAttribution:m.customAttribution})),this.addControl(new vd,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new l.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new l.Event(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new l.Event("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(m,i){if(i===void 0&&(i=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=m.onAdd(this);this._controls.push(m);const d=this._controlPositions[i];return i.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(m);return i>-1&&this._controls.splice(i,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}resize(m){const i=this._containerDimensions(),c=i[0],d=i[1];this._resizeCanvas(c,d,this.getPixelRatio()),this.transform.resize(c,d),this.painter.resize(c,d,this.getPixelRatio());const y=!this._moving;return y&&(this.stop(),this.fire(new l.Event("movestart",m)).fire(new l.Event("move",m))),this.fire(new l.Event("resize",m)),y&&this.fire(new l.Event("moveend",m)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(m){const[i,c]=this._containerDimensions();this._pixelRatio=m,this._resizeCanvas(i,c,m),this.painter.resize(i,c,m)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(l.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(l.LngLat.convert(m))}unproject(m){return this.transform.pointLocation(l.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(m,i,c){if(m==="mouseenter"||m==="mouseover"){let d=!1;return{layer:i,listener:c,delegates:{mousemove:x=>{const P=this.getLayer(i)?this.queryRenderedFeatures(x.point,{layers:[i]}):[];P.length?d||(d=!0,c.call(this,new ar(m,this,x.originalEvent,{features:P}))):d=!1},mouseout:()=>{d=!1}}}}if(m==="mouseleave"||m==="mouseout"){let d=!1;return{layer:i,listener:c,delegates:{mousemove:P=>{(this.getLayer(i)?this.queryRenderedFeatures(P.point,{layers:[i]}):[]).length?d=!0:d&&(d=!1,c.call(this,new ar(m,this,P.originalEvent)))},mouseout:P=>{d&&(d=!1,c.call(this,new ar(m,this,P.originalEvent)))}}}}{const d=y=>{const x=this.getLayer(i)?this.queryRenderedFeatures(y.point,{layers:[i]}):[];x.length&&(y.features=x,c.call(this,y),delete y.features)};return{layer:i,listener:c,delegates:{[m]:d}}}}on(m,i,c){if(c===void 0)return super.on(m,i);const d=this._createDelegatedListener(m,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(d);for(const y in d.delegates)this.on(y,d.delegates[y]);return this}once(m,i,c){if(c===void 0)return super.once(m,i);const d=this._createDelegatedListener(m,i,c);for(const y in d.delegates)this.once(y,d.delegates[y]);return this}off(m,i,c){return c===void 0?super.off(m,i):(this._delegatedListeners&&this._delegatedListeners[m]&&(d=>{const y=this._delegatedListeners[m];for(let x=0;x<y.length;x++){const P=y[x];if(P.layer===i&&P.listener===c){for(const L in P.delegates)this.off(L,P.delegates[L]);return y.splice(x,1),this}}})(),this)}queryRenderedFeatures(m,i){if(!this.style)return[];let c;if(i!==void 0||m===void 0||m instanceof l.pointGeometry||Array.isArray(m)||(i=m,m=void 0),i=i||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof m[0]=="number")c=[l.pointGeometry.convert(m)];else{const d=l.pointGeometry.convert(m[0]),y=l.pointGeometry.convert(m[1]);c=[d,new l.pointGeometry(y.x,d.y),y,new l.pointGeometry(d.x,y.y),d]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(m,i){return this.style.querySourceFeatures(m,i)}setStyle(m,i){return(i=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(m,i))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const i=this._locale[m];if(i==null)throw new Error(`Missing UI string '${m}'`);return i}_updateStyle(m,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new ro(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ro(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,i){if(typeof m=="string"){const c=this._requestManager.transformRequest(m,l.ResourceType.Style);l.getJSON(c,(d,y)=>{d?this.fire(new l.ErrorEvent(d)):y&&this._updateDiff(y,i)})}else typeof m=="object"&&this._updateDiff(m,i)}_updateDiff(m,i){try{this.style.setState(m)&&this._update(!0)}catch(c){l.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(m,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(m,i){return this._lazyInitEmptyStyle(),this.style.addSource(m,i),this._update(!0)}isSourceLoaded(m){const i=this.style&&this.style.sourceCaches[m];if(i!==void 0)return i.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${m}'`)))}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const i in m){const c=m[i]._tiles;for(const d in c){const y=c[d];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(m,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,i,c)}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,i,{pixelRatio:c=1,sdf:d=!1,stretchX:y,stretchY:x,content:P}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||l.isImageBitmap(i)){const{width:L,height:D,data:q}=l.exported.getImageData(i);this.style.addImage(m,{data:new l.RGBAImage({width:L,height:D},q),pixelRatio:c,stretchX:y,stretchY:x,content:P,sdf:d,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:L,height:D,data:q}=i,oe=i;this.style.addImage(m,{data:new l.RGBAImage({width:L,height:D},new Uint8Array(q)),pixelRatio:c,stretchX:y,stretchY:x,content:P,sdf:d,version:0,userImage:oe}),oe.onAdd&&oe.onAdd(this,m)}}}updateImage(m,i){const c=this.style.getImage(m);if(!c)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=i instanceof HTMLImageElement||l.isImageBitmap(i)?l.exported.getImageData(i):i,{width:y,height:x,data:P}=d;if(y===void 0||x===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||x!==c.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(i instanceof HTMLImageElement||l.isImageBitmap(i));c.data.replace(P,L),this.style.updateImage(m,c)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,i){l.getImage(this._requestManager.transformRequest(m,l.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(m,i){return this._lazyInitEmptyStyle(),this.style.addLayer(m,i),this._update(!0)}moveLayer(m,i){return this.style.moveLayer(m,i),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,i,c){return this.style.setLayerZoomRange(m,i,c),this._update(!0)}setFilter(m,i,c={}){return this.style.setFilter(m,i,c),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,i,c,d={}){return this.style.setPaintProperty(m,i,c,d),this._update(!0)}getPaintProperty(m,i){return this.style.getPaintProperty(m,i)}setLayoutProperty(m,i,c,d={}){return this.style.setLayoutProperty(m,i,c,d),this._update(!0)}getLayoutProperty(m,i){return this.style.getLayoutProperty(m,i)}setLight(m,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(m,i){return this.style.setFeatureState(m,i),this._update()}removeFeatureState(m,i){return this.style.removeFeatureState(m,i),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,i=0;return this._container&&(m=this._container.clientWidth||400,i=this._container.clientHeight||300),[m,i]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=C.create("div","maplibregl-canvas-container mapboxgl-canvas-container",m);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions();this._resizeCanvas(c[0],c[1],this.getPixelRatio());const d=this._controlContainer=C.create("div","maplibregl-control-container mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=C.create("div",`maplibregl-ctrl-${x} mapboxgl-ctrl-${x}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,i,c){this._canvas.width=c*m,this._canvas.height=c*i,this._canvas.style.width=`${m}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const m=l.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);i?(this.painter=new Ei(i,this.transform),l.exported$1.testSupport(i)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){let i,c=0;const d=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,i),c=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,L=l.exported.now();this.style.zoomHistory.update(P,L);const D=new l.EvaluationParameters(P,{now:L,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=D.crossFadingFactor();q===1&&q===this._crossFadingFactor||(y=!0,this._crossFadingFactor=q),this.style.update(D)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const P=l.exported.now()-c;d.endQueryEXT(d.TIME_ELAPSED_EXT,i),setTimeout(()=>{const L=d.getQueryObjectEXT(i,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(i),this.fire(new l.Event("gpu-timing-frame",{cpuTime:P,gpuTime:L}))},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(P);this.fire(new l.Event("gpu-timing-layer",{layerTimes:L}))},50)}const x=this._sourcesDirty||this._styleDirty||this._placementDirty;return x||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||x||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(m=>{l.PerformanceUtils.frame(m),this._frame=null,this._render(m)}))}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}_setCacheLimits(m,i){l.setCacheLimits(m,i)}},NavigationControl:class{constructor(m){this.options=l.extend({},sc,m),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),C.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),C.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map.getZoom(),i=m===this._map.getMaxZoom(),c=m===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())}_rotateCompassArrow(){const m=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=m}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qt(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,i){const c=C.create("button",m,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(m,i){const c=this._map._getUIString(`NavigationControl.${i}`);m.title=c,m.setAttribute("aria-label",c)}},GeolocateControl:class extends l.Evented{constructor(m){super(),this.options=l.extend({},Ci,m),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(m){var i;return this._map=m,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,hs!==void 0?i(hs):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(c=>{hs=c.state!=="denied",i(hs)}):(hs=!!window.navigator.geolocation,i(hs)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ji=0,cu=!1}_isOutOfMapMaxBounds(m){const i=this._map.getMaxBounds(),c=m.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",m)),this._finish()}}_updateCamera(m){const i=new l.LngLat(m.coords.longitude,m.coords.latitude),c=m.coords.accuracy,d=this._map.getBearing(),y=l.extend({bearing:d},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),y,{geolocateSource:!0})}_updateMarker(m){if(m){const i=new l.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map._container.clientHeight/2,i=this._map.unproject([0,m]),c=this._map.unproject([1,m]),d=i.distanceTo(c),y=Math.ceil(2*this._accuracy/d);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&cu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new uu(this._dotElement),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new uu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ji--,cu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ji++,ji>1?(m={maximumAge:6e5,timeout:0},cu=!0):(m=this.options.positionOptions,cu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Mh,ScaleControl:class{constructor(m){this.options=l.extend({},lc,m),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){xr(this._map,this._container,this.options)}onAdd(m){return this._map=m,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(m){this.options.unit=m,xr(this._map,this._container,this.options)}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(m){super(),this.options=l.extend(Object.create(xd),m),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=l.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const i=document.createDocumentFragment(),c=document.createElement("body");let d;for(c.innerHTML=m;d=c.firstChild,d;)i.appendChild(d);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){this._container&&this._container.classList.add(m)}removeClassName(m){this._container&&this._container.classList.remove(m)}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(m){this._update(m.point)}_onMouseMove(m){this._update(m.point)}_onDrag(m){this._update(m.point)}_update(m){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=C.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ln(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!m))return;const i=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat);let c=this.options.anchor;const d=uc(this.options.offset);if(!c){const x=this._container.offsetWidth,P=this._container.offsetHeight;let L;L=i.y+d.bottom.y<P?["top"]:i.y>this._map.transform.height-P?["bottom"]:[],i.x<x/2?L.push("left"):i.x>this._map.transform.width-x/2&&L.push("right"),c=L.length===0?"bottom":L.join("-")}const y=i.add(d[c]).round();C.setTransform(this._container,`${tl[c]} translate(${y.x}px,${y.y}px)`),ac(this._container,c,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(hu);m&&m.focus()}_onClose(){this.remove()}},Marker:uu,Style:ro,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:Ne,GeoJSONSource:je,ImageSource:Pe,RasterDEMTileSource:xe,RasterTileSource:he,VectorTileSource:te,VideoSource:$e,prewarm:function(){R().acquire(bn)},clearPrewarmedResources:function(){const m=Ee;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(bn),Ee=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return on.workerCount},set workerCount(m){on.workerCount=m},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){l.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){l.clearTileCache(m)},workerUrl:"",addProtocol(m,i){l.config.REGISTERED_PROTOCOLS[m]=i},removeProtocol(m){delete l.config.REGISTERED_PROTOCOLS[m]}};return oc.extend(fu,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),fu});var g=u;return g})})(j3);const pT=hm,B3=lP({__proto__:null,default:pT},[hm]);const D3="modulepreload",N3=function(e){return"/osm-address-editor-vite/"+e},mb={},U3=function(t,r,a){if(!r||r.length===0)return t();const u=document.getElementsByTagName("link");return Promise.all(r.map(f=>{if(f=N3(f),f in mb)return;mb[f]=!0;const g=f.endsWith(".css"),l=g?'[rel="stylesheet"]':"";if(!!a)for(let T=u.length-1;T>=0;T--){const S=u[T];if(S.href===f&&(!g||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${l}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":D3,g||(E.as="script",E.crossOrigin=""),E.href=f,document.head.appendChild(E),g)return new Promise((T,S)=>{E.addEventListener("load",T),E.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})})).then(()=>t())},$3=pt.createContext(null);function V3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function gb(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function yb(e,t){const r=t.viewState||t;let a=!1;if("longitude"in r&&"latitude"in r){const u=e.center;e.center=new u.constructor(r.longitude,r.latitude),a=a||u!==e.center}if("zoom"in r){const u=e.zoom;e.zoom=r.zoom,a=a||u!==e.zoom}if("bearing"in r){const u=e.bearing;e.bearing=r.bearing,a=a||u!==e.bearing}if("pitch"in r){const u=e.pitch;e.pitch=r.pitch,a=a||u!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(a=!0,e.padding=r.padding),a}const G3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function vb(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const r=e.layers.map(a=>{const u=t[a.ref];let f=null;if("interactive"in a&&(f={...a},delete f.interactive),u){f=f||{...a},delete f.ref;for(const g of G3)g in u&&(f[g]=u[g])}return f||a});return{...e,layers:r}}function W3(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,u=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return r===u&&a===f}function Ho(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ho(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(const u of r)if(!t.hasOwnProperty(u)||!Ho(e[u],t[u]))return!1;return!0}return!1}const _b={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},By={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},xb={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Z3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],H3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class lh{constructor(t,r,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=u=>{const f=this.props[xb[u.type]];f&&f(u)},this._onPointerEvent=u=>{(u.type==="mousemove"||u.type==="mouseout")&&this._updateHover(u);const f=this.props[_b[u.type]];f&&(this.props.interactiveLayerIds&&u.type!=="mouseover"&&u.type!=="mouseout"&&(u.features=this._hoveredFeatures||this._queryRenderedFeatures(u.point)),f(u),delete u.features)},this._onCameraEvent=u=>{if(!this._internalUpdate){const f=this.props[By[u.type]];f&&f(u)}u.type in this._deferredEvents&&(this._deferredEvents[u.type]=!1)},this._MapClass=t,this.props=r,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const a=this._updateSettings(t,r);a&&this._createShadowTransform(this._map);const u=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(a||u||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const a=lh.savedMaps.pop();if(!a)return null;const u=a.map,f=u.getContainer();for(r.className=f.className;f.childNodes.length>0;)r.appendChild(f.childNodes[0]);u._container=r,a.setProps({...t,styleDiffing:!1}),u.resize();const{initialViewState:g}=t;return g&&(g.bounds?u.fitBounds(g.bounds,{...g.fitBoundsOptions,duration:0}):a._updateViewState(g,!1)),u.isStyleLoaded()?u.fire("load"):u.once("styledata",()=>u.fire("load")),u.triggerRepaint(),a}_initialize(t){const{props:r}=this,a={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||X3()||null,container:t,style:vb(r.mapStyle)},u=a.initialViewState||a.viewState||a;if(Object.assign(a,{center:[u.longitude||0,u.latitude||0],zoom:u.zoom||0,pitch:u.pitch||0,bearing:u.bearing||0}),r.gl){const E=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=E,r.gl)}const f=new this._MapClass(a);u.padding&&f.setPadding(u.padding),r.cursor&&(f.getCanvas().style.cursor=r.cursor),this._createShadowTransform(f);const g=f._render;f._render=E=>{this._inRender=!0,g.call(f,E),this._inRender=!1};const l=f._renderTaskQueue.run;f._renderTaskQueue.run=E=>{l.call(f._renderTaskQueue,E),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const w=f.fire;f.fire=this._fireEvent.bind(this,w),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>this._updateStyleComponents(this.props,{})),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const E in _b)f.on(E,this._onPointerEvent);for(const E in By)f.on(E,this._onCameraEvent);for(const E in xb)f.on(E,this._onEvent);this._map=f}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),lh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=V3(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const a=this._map;if(r.width!==a.transform.width||r.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const a=this._map,u=this._renderTransform,{zoom:f,pitch:g,bearing:l}=u,w=a.isMoving();w&&(u.cameraElevationReference="sea");const E=yb(u,{...gb(a.transform),...t});if(w&&(u.cameraElevationReference="ground"),E&&r){const T=this._deferredEvents;T.move=!0,T.zoom||(T.zoom=f!==u.zoom),T.rotate||(T.rotate=l!==u.bearing),T.pitch||(T.pitch=g!==u.pitch)}return w||yb(a.transform,t),E}_updateSettings(t,r){const a=this._map;let u=!1;for(const f of Z3)f in t&&!Ho(t[f],r[f])&&(u=!0,a[`set${f[0].toUpperCase()}${f.slice(1)}`](t[f]));return u}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==r.mapStyle){const a={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(a.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(vb(t.mapStyle),a),!0}return!1}_updateStyleComponents(t,r){const a=this._map;let u=!1;return a.style.loaded()&&("light"in t&&!Ho(t.light,r.light)&&(u=!0,a.setLight(t.light)),"fog"in t&&!Ho(t.fog,r.fog)&&(u=!0,a.setFog(t.fog)),"terrain"in t&&!Ho(t.terrain,r.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(u=!0,a.setTerrain(t.terrain))),u}_updateHandlers(t,r){const a=this._map;let u=!1;for(const f of H3){const g=t[f];Ho(g,r[f])||(u=!0,g?a[f].enable(g):a[f].disable())}return u}_queryRenderedFeatures(t){const r=this._map,{interactiveLayerIds:a=[]}=this.props;try{return r.queryRenderedFeatures(t,{layers:a.filter(r.getLayer.bind(r))})}catch{return[]}}_updateHover(t){var r;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const f=t.type,g=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,l=this._queryRenderedFeatures(t.point),w=l.length>0;!w&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,w&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,r,a){const u=this._map,f=u.transform,g=typeof r=="string"?r:r.type;return g==="move"&&this._updateViewState(this.props,!1),g in By&&(typeof r=="object"&&(r.viewState=gb(f)),this._map.isMoving())?(u.transform=this._renderTransform,t.call(u,r,a),u.transform=f,u):(t.call(u,r,a),u)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=r}}}lh.savedMaps=[];function X3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const Y3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function K3(e,t){if(!e)return null;const r=e.map,a={getMap:()=>r,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:u=>e.transform.locationPoint(t.LngLat.convert(u)),unproject:u=>e.transform.pointLocation(t.Point.convert(u)),queryTerrainElevation:(u,f)=>{const g=r.transform;r.transform=e.transform;const l=r.queryTerrainElevation(u,f);return r.transform=g,l}};for(const u of q3(r))!(u in a)&&!Y3.includes(u)&&(a[u]=r[u].bind(r));return a}function q3(e){const t=new Set;let r=e;for(;r;){for(const a of Object.getOwnPropertyNames(r))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);r=Object.getPrototypeOf(r)}return Array.from(t)}const J3=typeof document<"u"?pt.useLayoutEffect:pt.useEffect,Q3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function eM(e,t){for(const r of Q3)r in t&&(e[r]=t[r]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,r=>{r&&console.error(r)},!1)}const gh=pt.createContext(null),tM={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},J1=pt.forwardRef((e,t)=>{const r=pt.useContext($3),[a,u]=pt.useState(null),f=pt.useRef(),{current:g}=pt.useRef({mapLib:null,map:null});pt.useEffect(()=>{const E=e.mapLib;let T=!0,S;return Promise.resolve(E||U3(()=>Promise.resolve().then(()=>B3),void 0)).then(C=>{if(T){if(C.Map||(C=C.default),!C||!C.Map)throw new Error("Invalid mapLib");if(eM(C,e),C.supported(e))e.reuseMaps&&(S=lh.reuse(e,f.current)),S||(S=new lh(C.Map,e,f.current)),g.map=K3(S,C),g.mapLib=C,u(S),r==null||r.onMapMount(g.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(C=>{e.onError({type:"error",target:null,originalEvent:null,error:C})}),()=>{T=!1,S&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?S.recycle():S.destroy())}},[]),J3(()=>{a&&a.setProps(e)}),pt.useImperativeHandle(t,()=>g.map,[a]);const l=pt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return pt.createElement("div",{id:e.id,ref:f,style:l},a&&pt.createElement(gh.Provider,{value:g},pt.createElement("div",{"mapboxgl-children":"",style:w},e.children)))});J1.displayName="Map";J1.defaultProps=tM;const nM=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Du(e,t){if(!e||!t)return;const r=e.style;for(const a in t){const u=t[a];Number.isFinite(u)&&!nM.test(a)?r[a]=`${u}px`:r[a]=u}}const rM={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function mT(e){const{map:t,mapLib:r}=pt.useContext(gh),a=pt.useRef({props:e});a.current.props=e;const u=pt.useMemo(()=>{let f=!1;pt.Children.forEach(e.children,w=>{w&&(f=!0)});const g={...e,element:f?document.createElement("div"):null},l=new r.Marker(g).setLngLat([e.longitude,e.latitude]);return l.getElement().addEventListener("click",w=>{var E,T;(T=(E=a.current.props).onClick)===null||T===void 0||T.call(E,{type:"click",target:l,originalEvent:w})}),l.on("dragstart",w=>{var E,T;const S=w;S.lngLat=u.getLngLat(),(T=(E=a.current.props).onDragStart)===null||T===void 0||T.call(E,S)}),l.on("drag",w=>{var E,T;const S=w;S.lngLat=u.getLngLat(),(T=(E=a.current.props).onDrag)===null||T===void 0||T.call(E,S)}),l.on("dragend",w=>{var E,T;const S=w;S.lngLat=u.getLngLat(),(T=(E=a.current.props).onDragEnd)===null||T===void 0||T.call(E,S)}),l},[]);return pt.useEffect(()=>(u.addTo(t.getMap()),()=>{u.remove()}),[]),pt.useEffect(()=>{Du(u.getElement(),e.style)},[e.style]),(u.getLngLat().lng!==e.longitude||u.getLngLat().lat!==e.latitude)&&u.setLngLat([e.longitude,e.latitude]),e.offset&&!W3(u.getOffset(),e.offset)&&u.setOffset(e.offset),u.isDraggable()!==e.draggable&&u.setDraggable(e.draggable),u.getRotation()!==e.rotation&&u.setRotation(e.rotation),u.getRotationAlignment()!==e.rotationAlignment&&u.setRotationAlignment(e.rotationAlignment),u.getPitchAlignment()!==e.pitchAlignment&&u.setPitchAlignment(e.pitchAlignment),u.getPopup()!==e.popup&&u.setPopup(e.popup),Of.createPortal(e.children,u.getElement())}mT.defaultProps=rM;const iM=pt.memo(mT);function wb(e){return new Set(e?e.trim().split(/\s+/):[])}function oM(e){const{map:t,mapLib:r}=pt.useContext(gh),a=pt.useMemo(()=>document.createElement("div"),[]),u=pt.useRef({props:e});u.current.props=e;const f=pt.useMemo(()=>{const g={...e},l=new r.Popup(g).setLngLat([e.longitude,e.latitude]);return l.once("open",w=>{var E,T;(T=(E=u.current.props).onOpen)===null||T===void 0||T.call(E,w)}),l},[]);if(pt.useEffect(()=>{const g=l=>{var w,E;(E=(w=u.current.props).onClose)===null||E===void 0||E.call(w,l)};return f.on("close",g),f.setDOMContent(a).addTo(t.getMap()),()=>{f.off("close",g),f.isOpen()&&f.remove()}},[]),pt.useEffect(()=>{Du(f.getElement(),e.style)},[e.style]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Ho(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const g=wb(f.options.className),l=wb(e.className);for(const w of g)l.has(w)||f.removeClassName(w);for(const w of l)g.has(w)||f.addClassName(w);f.options.className=e.className}return Of.createPortal(e.children,a)}pt.memo(oM);function ld(e,t,r,a){const u=pt.useContext(gh),f=pt.useMemo(()=>e(u),[]);return pt.useEffect(()=>{const g=a||r||t,l=typeof t=="function"&&typeof r=="function"?t:null,w=typeof r=="function"?r:typeof t=="function"?t:null,{map:E}=u;return E.hasControl(f)||(E.addControl(f,g==null?void 0:g.position),l&&l(u)),()=>{w&&w(u),E.hasControl(f)&&E.removeControl(f)}},[]),f}function sM(e){const t=ld(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return pt.useEffect(()=>{Du(t._container,e.style)},[e.style]),null}pt.memo(sM);function aM(e){const t=ld(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return pt.useEffect(()=>{Du(t._controlContainer,e.style)},[e.style]),null}pt.memo(aM);const gT=pt.forwardRef((e,t)=>{const r=pt.useRef({props:e}),a=ld(({mapLib:u})=>{const f=new u.GeolocateControl(e),g=f._setupUI;return f._setupUI=l=>{f._container.hasChildNodes()||g(l)},f.on("geolocate",l=>{var w,E;(E=(w=r.current.props).onGeolocate)===null||E===void 0||E.call(w,l)}),f.on("error",l=>{var w,E;(E=(w=r.current.props).onError)===null||E===void 0||E.call(w,l)}),f.on("outofmaxbounds",l=>{var w,E;(E=(w=r.current.props).onOutOfMaxBounds)===null||E===void 0||E.call(w,l)}),f.on("trackuserlocationstart",l=>{var w,E;(E=(w=r.current.props).onTrackUserLocationStart)===null||E===void 0||E.call(w,l)}),f.on("trackuserlocationend",l=>{var w,E;(E=(w=r.current.props).onTrackUserLocationEnd)===null||E===void 0||E.call(w,l)}),f},{position:e.position});return r.current.props=e,pt.useImperativeHandle(t,()=>({trigger:()=>a.trigger()}),[]),pt.useEffect(()=>{Du(a._container,e.style)},[e.style]),null});gT.displayName="GeolocateControl";const lM=pt.memo(gT);function uM(e){const t=ld(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return pt.useEffect(()=>{Du(t._container,e.style)},[e.style]),null}const cM=pt.memo(uM),hM={unit:"metric",maxWidth:100};function yT(e){const t=ld(({mapLib:r})=>new r.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),pt.useEffect(()=>{Du(t._container,e.style)},[e.style]),null}yT.defaultProps=hM;pt.memo(yT);function fm(e,t){if(!e)throw new Error(t)}let fM=0;function dM(e,t,r){if(e.style&&e.style._loaded){const a={...r};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function pM(e,t,r){fm(t.id===r.id,"source id changed"),fm(t.type===r.type,"source type changed");let a="",u=0;for(const g in t)g!=="children"&&g!=="id"&&!Ho(r[g],t[g])&&(a=g,u++);if(!u)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((f==="canvas"||f==="video")&&u===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if(f==="vector"&&"setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function mM(e){const t=pt.useContext(gh).map.getMap(),r=pt.useRef(e),[,a]=pt.useState(0),u=pt.useMemo(()=>e.id||`jsx-source-${fM++}`,[]);pt.useEffect(()=>{if(t){const g=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",g),g(),()=>{var l;if(t.off("styledata",g),t.style&&t.style._loaded&&t.getSource(u)){const w=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(w)for(const E of w)E.source===u&&t.removeLayer(E.id);t.removeSource(u)}}}},[t]);let f=t&&t.style&&t.getSource(u);return f?pM(f,e,r.current):f=dM(t,u,e),r.current=e,f&&pt.Children.map(e.children,g=>g&&pt.cloneElement(g,{source:u}))||null}function gM(e,t,r,a){if(fm(r.id===a.id,"layer id changed"),fm(r.type===a.type,"layer type changed"),r.type==="custom"||a.type==="custom")return;const{layout:u={},paint:f={},filter:g,minzoom:l,maxzoom:w,beforeId:E}=r;if(E!==a.beforeId&&e.moveLayer(t,E),u!==a.layout){const T=a.layout||{};for(const S in u)Ho(u[S],T[S])||e.setLayoutProperty(t,S,u[S]);for(const S in T)u.hasOwnProperty(S)||e.setLayoutProperty(t,S,void 0)}if(f!==a.paint){const T=a.paint||{};for(const S in f)Ho(f[S],T[S])||e.setPaintProperty(t,S,f[S]);for(const S in T)f.hasOwnProperty(S)||e.setPaintProperty(t,S,void 0)}Ho(g,a.filter)||e.setFilter(t,g),(l!==a.minzoom||w!==a.maxzoom)&&e.setLayerZoomRange(t,l,w)}function yM(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const a={...r,id:t};delete a.beforeId,e.addLayer(a,r.beforeId)}}let vM=0;function _M(e){const t=pt.useContext(gh).map.getMap(),r=pt.useRef(e),[,a]=pt.useState(0),u=pt.useMemo(()=>e.id||`jsx-layer-${vM++}`,[]);if(pt.useEffect(()=>{if(t){const g=()=>a(l=>l+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),t.style&&t.style._loaded&&t.getLayer(u)&&t.removeLayer(u)}}},[t]),t&&t.style&&t.getLayer(u))try{gM(t,u,e,r.current)}catch(g){console.warn(g)}else yM(t,u,e);return r.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function bb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,a)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bb(Object(r),!0).forEach(function(a){bM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bb(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dm(e){return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function xM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eb(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function wM(e,t,r){return t&&Eb(e.prototype,t),r&&Eb(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q1(e,t){return SM(e)||CM(e,t)||vT(e,t)||IM()}function lg(e){return EM(e)||TM(e)||vT(e)||AM()}function EM(e){if(Array.isArray(e))return cv(e)}function SM(e){if(Array.isArray(e))return e}function TM(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CM(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a=[],u=!0,f=!1,g,l;try{for(r=r.call(e);!(u=(g=r.next()).done)&&(a.push(g.value),!(t&&a.length===t));u=!0);}catch(w){f=!0,l=w}finally{try{!u&&r.return!=null&&r.return()}finally{if(f)throw l}}return a}}function vT(e,t){if(e){if(typeof e=="string")return cv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cv(e,t)}}function cv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function AM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Sb=function(){},e_={},_T={},xT=null,wT={mark:Sb,measure:Sb};try{typeof window<"u"&&(e_=window),typeof document<"u"&&(_T=document),typeof MutationObserver<"u"&&(xT=MutationObserver),typeof performance<"u"&&(wT=performance)}catch{}var PM=e_.navigator||{},Tb=PM.userAgent,Cb=Tb===void 0?"":Tb,Ml=e_,Tr=_T,Ab=xT,ap=wT;Ml.document;var Na=!!Tr.documentElement&&!!Tr.head&&typeof Tr.addEventListener=="function"&&typeof Tr.createElement=="function",bT=~Cb.indexOf("MSIE")||~Cb.indexOf("Trident/"),Ra="___FONT_AWESOME___",hv=16,ET="fa",ST="svg-inline--fa",Lu="data-fa-i2svg",fv="data-fa-pseudo-element",kM="data-fa-pseudo-element-pending",t_="data-prefix",n_="data-icon",Ib="fontawesome-i2svg",MM="async",zM=["HTML","HEAD","STYLE","SCRIPT"],TT=function(){try{return!0}catch{return!1}}(),r_={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},pm={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},CT={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},LM={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},OM=/fa[srltdbk\-\ ]/,AT="fa-layers-text",RM=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,FM={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},IT=[1,2,3,4,5,6,7,8,9,10],jM=IT.concat([11,12,13,14,15,16,17,18,19,20]),BM=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Tu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},DM=[].concat(lg(Object.keys(pm)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Tu.GROUP,Tu.SWAP_OPACITY,Tu.PRIMARY,Tu.SECONDARY]).concat(IT.map(function(e){return"".concat(e,"x")})).concat(jM.map(function(e){return"w-".concat(e)})),PT=Ml.FontAwesomeConfig||{};function NM(e){var t=Tr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function UM(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Tr&&typeof Tr.querySelector=="function"){var $M=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];$M.forEach(function(e){var t=Q1(e,2),r=t[0],a=t[1],u=UM(NM(r));u!=null&&(PT[a]=u)})}var VM={familyPrefix:ET,styleDefault:"solid",replacementClass:ST,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Cf=Jt(Jt({},VM),PT);Cf.autoReplaceSvg||(Cf.observeMutations=!1);var yn={};Object.keys(Cf).forEach(function(e){Object.defineProperty(yn,e,{enumerable:!0,set:function(r){Cf[e]=r,Mp.forEach(function(a){return a(yn)})},get:function(){return Cf[e]}})});Ml.FontAwesomeConfig=yn;var Mp=[];function GM(e){return Mp.push(e),function(){Mp.splice(Mp.indexOf(e),1)}}var cl=hv,Ks={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function WM(e){if(!(!e||!Na)){var t=Tr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var r=Tr.head.childNodes,a=null,u=r.length-1;u>-1;u--){var f=r[u],g=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(g)>-1&&(a=f)}return Tr.head.insertBefore(t,a),e}}var ZM="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Jf(){for(var e=12,t="";e-- >0;)t+=ZM[Math.random()*62|0];return t}function yh(e){for(var t=[],r=(e||[]).length>>>0;r--;)t[r]=e[r];return t}function i_(e){return e.classList?yh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function kT(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function HM(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,'="').concat(kT(e[r]),'" ')},"").trim()}function ug(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,": ").concat(e[r].trim(),";")},"")}function o_(e){return e.size!==Ks.size||e.x!==Ks.x||e.y!==Ks.y||e.rotate!==Ks.rotate||e.flipX||e.flipY}function XM(e){var t=e.transform,r=e.containerWidth,a=e.iconWidth,u={transform:"translate(".concat(r/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),g="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),w={transform:"".concat(f," ").concat(g," ").concat(l)},E={transform:"translate(".concat(a/2*-1," -256)")};return{outer:u,inner:w,path:E}}function YM(e){var t=e.transform,r=e.width,a=r===void 0?hv:r,u=e.height,f=u===void 0?hv:u,g=e.startCentered,l=g===void 0?!1:g,w="";return l&&bT?w+="translate(".concat(t.x/cl-a/2,"em, ").concat(t.y/cl-f/2,"em) "):l?w+="translate(calc(-50% + ".concat(t.x/cl,"em), calc(-50% + ").concat(t.y/cl,"em)) "):w+="translate(".concat(t.x/cl,"em, ").concat(t.y/cl,"em) "),w+="scale(".concat(t.size/cl*(t.flipX?-1:1),", ").concat(t.size/cl*(t.flipY?-1:1),") "),w+="rotate(".concat(t.rotate,"deg) "),w}var KM=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function MT(){var e=ET,t=ST,r=yn.familyPrefix,a=yn.replacementClass,u=KM;if(r!==e||a!==t){var f=new RegExp("\\.".concat(e,"\\-"),"g"),g=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");u=u.replace(f,".".concat(r,"-")).replace(g,"--".concat(r,"-")).replace(l,".".concat(a))}return u}var Pb=!1;function Dy(){yn.autoAddCss&&!Pb&&(WM(MT()),Pb=!0)}var qM={mixout:function(){return{dom:{css:MT,insertCss:Dy}}},hooks:function(){return{beforeDOMElementCreation:function(){Dy()},beforeI2svg:function(){Dy()}}}},Fa=Ml||{};Fa[Ra]||(Fa[Ra]={});Fa[Ra].styles||(Fa[Ra].styles={});Fa[Ra].hooks||(Fa[Ra].hooks={});Fa[Ra].shims||(Fa[Ra].shims=[]);var bs=Fa[Ra],zT=[],JM=function e(){Tr.removeEventListener("DOMContentLoaded",e),mm=1,zT.map(function(t){return t()})},mm=!1;Na&&(mm=(Tr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Tr.readyState),mm||Tr.addEventListener("DOMContentLoaded",JM));function QM(e){Na&&(mm?setTimeout(e,0):zT.push(e))}function ud(e){var t=e.tag,r=e.attributes,a=r===void 0?{}:r,u=e.children,f=u===void 0?[]:u;return typeof e=="string"?kT(e):"<".concat(t," ").concat(HM(a),">").concat(f.map(ud).join(""),"</").concat(t,">")}function kb(e,t,r){if(e&&e[t]&&e[t][r])return{prefix:t,iconName:r,icon:e[t][r]}}var e4=function(t,r){return function(a,u,f,g){return t.call(r,a,u,f,g)}},Ny=function(t,r,a,u){var f=Object.keys(t),g=f.length,l=u!==void 0?e4(r,u):r,w,E,T;for(a===void 0?(w=1,T=t[f[0]]):(w=0,T=a);w<g;w++)E=f[w],T=l(T,t[E],E,t);return T};function t4(e){for(var t=[],r=0,a=e.length;r<a;){var u=e.charCodeAt(r++);if(u>=55296&&u<=56319&&r<a){var f=e.charCodeAt(r++);(f&64512)==56320?t.push(((u&1023)<<10)+(f&1023)+65536):(t.push(u),r--)}else t.push(u)}return t}function dv(e){var t=t4(e);return t.length===1?t[0].toString(16):null}function n4(e,t){var r=e.length,a=e.charCodeAt(t),u;return a>=55296&&a<=56319&&r>t+1&&(u=e.charCodeAt(t+1),u>=56320&&u<=57343)?(a-55296)*1024+u-56320+65536:a}function Mb(e){return Object.keys(e).reduce(function(t,r){var a=e[r],u=!!a.icon;return u?t[a.iconName]=a.icon:t[r]=a,t},{})}function pv(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.skipHooks,u=a===void 0?!1:a,f=Mb(t);typeof bs.hooks.addPack=="function"&&!u?bs.hooks.addPack(e,Mb(t)):bs.styles[e]=Jt(Jt({},bs.styles[e]||{}),f),e==="fas"&&pv("fa",t)}var Af=bs.styles,r4=bs.shims,i4=Object.values(CT),s_=null,LT={},OT={},RT={},FT={},jT={},o4=Object.keys(r_);function s4(e){return~DM.indexOf(e)}function a4(e,t){var r=t.split("-"),a=r[0],u=r.slice(1).join("-");return a===e&&u!==""&&!s4(u)?u:null}var BT=function(){var t=function(f){return Ny(Af,function(g,l,w){return g[w]=Ny(l,f,{}),g},{})};LT=t(function(u,f,g){if(f[3]&&(u[f[3]]=g),f[2]){var l=f[2].filter(function(w){return typeof w=="number"});l.forEach(function(w){u[w.toString(16)]=g})}return u}),OT=t(function(u,f,g){if(u[g]=g,f[2]){var l=f[2].filter(function(w){return typeof w=="string"});l.forEach(function(w){u[w]=g})}return u}),jT=t(function(u,f,g){var l=f[2];return u[g]=g,l.forEach(function(w){u[w]=g}),u});var r="far"in Af||yn.autoFetchSvg,a=Ny(r4,function(u,f){var g=f[0],l=f[1],w=f[2];return l==="far"&&!r&&(l="fas"),typeof g=="string"&&(u.names[g]={prefix:l,iconName:w}),typeof g=="number"&&(u.unicodes[g.toString(16)]={prefix:l,iconName:w}),u},{names:{},unicodes:{}});RT=a.names,FT=a.unicodes,s_=cg(yn.styleDefault)};GM(function(e){s_=cg(e.styleDefault)});BT();function a_(e,t){return(LT[e]||{})[t]}function l4(e,t){return(OT[e]||{})[t]}function Uc(e,t){return(jT[e]||{})[t]}function DT(e){return RT[e]||{prefix:null,iconName:null}}function u4(e){var t=FT[e],r=a_("fas",e);return t||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function zl(){return s_}var l_=function(){return{prefix:null,iconName:null,rest:[]}};function cg(e){var t=r_[e],r=pm[e]||pm[t],a=e in bs.styles?e:null;return r||a||null}function hg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.skipLookups,a=r===void 0?!1:r,u=null,f=e.reduce(function(g,l){var w=a4(yn.familyPrefix,l);if(Af[l]?(l=i4.includes(l)?LM[l]:l,u=l,g.prefix=l):o4.indexOf(l)>-1?(u=l,g.prefix=cg(l)):w?g.iconName=w:l!==yn.replacementClass&&g.rest.push(l),!a&&g.prefix&&g.iconName){var E=u==="fa"?DT(g.iconName):{},T=Uc(g.prefix,g.iconName);E.prefix&&(u=null),g.iconName=E.iconName||T||g.iconName,g.prefix=E.prefix||g.prefix,g.prefix==="far"&&!Af.far&&Af.fas&&!yn.autoFetchSvg&&(g.prefix="fas")}return g},l_());return(f.prefix==="fa"||u==="fa")&&(f.prefix=zl()||"fas"),f}var c4=function(){function e(){xM(this,e),this.definitions={}}return wM(e,[{key:"add",value:function(){for(var r=this,a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];var g=u.reduce(this._pullDefinitions,{});Object.keys(g).forEach(function(l){r.definitions[l]=Jt(Jt({},r.definitions[l]||{}),g[l]),pv(l,g[l]);var w=CT[l];w&&pv(w,g[l]),BT()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,a){var u=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(u).map(function(f){var g=u[f],l=g.prefix,w=g.iconName,E=g.icon,T=E[2];r[l]||(r[l]={}),T.length>0&&T.forEach(function(S){typeof S=="string"&&(r[l][S]=E)}),r[l][w]=E}),r}}]),e}(),zb=[],$c={},Jc={},h4=Object.keys(Jc);function f4(e,t){var r=t.mixoutsTo;return zb=e,$c={},Object.keys(Jc).forEach(function(a){h4.indexOf(a)===-1&&delete Jc[a]}),zb.forEach(function(a){var u=a.mixout?a.mixout():{};if(Object.keys(u).forEach(function(g){typeof u[g]=="function"&&(r[g]=u[g]),dm(u[g])==="object"&&Object.keys(u[g]).forEach(function(l){r[g]||(r[g]={}),r[g][l]=u[g][l]})}),a.hooks){var f=a.hooks();Object.keys(f).forEach(function(g){$c[g]||($c[g]=[]),$c[g].push(f[g])})}a.provides&&a.provides(Jc)}),r}function mv(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),u=2;u<r;u++)a[u-2]=arguments[u];var f=$c[e]||[];return f.forEach(function(g){t=g.apply(null,[t].concat(a))}),t}function Ou(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var u=$c[e]||[];u.forEach(function(f){f.apply(null,r)})}function ja(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Jc[e]?Jc[e].apply(null,t):void 0}function gv(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,r=e.prefix||zl();if(t)return t=Uc(r,t)||t,kb(NT.definitions,r,t)||kb(bs.styles,r,t)}var NT=new c4,d4=function(){yn.autoReplaceSvg=!1,yn.observeMutations=!1,Ou("noAuto")},p4={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Na?(Ou("beforeI2svg",t),ja("pseudoElements2svg",t),ja("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot;yn.autoReplaceSvg===!1&&(yn.autoReplaceSvg=!0),yn.observeMutations=!0,QM(function(){g4({autoReplaceSvgRoot:r}),Ou("watch",t)})}},m4={icon:function(t){if(t===null)return null;if(dm(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Uc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var r=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=cg(t[0]);return{prefix:a,iconName:Uc(a,r)||r}}if(typeof t=="string"&&(t.indexOf("".concat(yn.familyPrefix,"-"))>-1||t.match(OM))){var u=hg(t.split(" "),{skipLookups:!0});return{prefix:u.prefix||zl(),iconName:Uc(u.prefix,u.iconName)||u.iconName}}if(typeof t=="string"){var f=zl();return{prefix:f,iconName:Uc(f,t)||t}}}},ko={noAuto:d4,config:yn,dom:p4,parse:m4,library:NT,findIconDefinition:gv,toHtml:ud},g4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot,a=r===void 0?Tr:r;(Object.keys(bs.styles).length>0||yn.autoFetchSvg)&&Na&&yn.autoReplaceSvg&&ko.dom.i2svg({node:a})};function fg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return ud(a)})}}),Object.defineProperty(e,"node",{get:function(){if(Na){var a=Tr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function y4(e){var t=e.children,r=e.main,a=e.mask,u=e.attributes,f=e.styles,g=e.transform;if(o_(g)&&r.found&&!a.found){var l=r.width,w=r.height,E={x:l/w/2,y:.5};u.style=ug(Jt(Jt({},f),{},{"transform-origin":"".concat(E.x+g.x/16,"em ").concat(E.y+g.y/16,"em")}))}return[{tag:"svg",attributes:u,children:t}]}function v4(e){var t=e.prefix,r=e.iconName,a=e.children,u=e.attributes,f=e.symbol,g=f===!0?"".concat(t,"-").concat(yn.familyPrefix,"-").concat(r):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Jt(Jt({},u),{},{id:g}),children:a}]}]}function u_(e){var t=e.icons,r=t.main,a=t.mask,u=e.prefix,f=e.iconName,g=e.transform,l=e.symbol,w=e.title,E=e.maskId,T=e.titleId,S=e.extra,C=e.watchable,F=C===void 0?!1:C,Y=a.found?a:r,H=Y.width,le=Y.height,W=u==="fak",V=[yn.replacementClass,f?"".concat(yn.familyPrefix,"-").concat(f):""].filter(function(U){return S.classes.indexOf(U)===-1}).filter(function(U){return U!==""||!!U}).concat(S.classes).join(" "),B={children:[],attributes:Jt(Jt({},S.attributes),{},{"data-prefix":u,"data-icon":f,class:V,role:S.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(H," ").concat(le)})},se=W&&!~S.classes.indexOf("fa-fw")?{width:"".concat(H/le*16*.0625,"em")}:{};F&&(B.attributes[Lu]=""),w&&(B.children.push({tag:"title",attributes:{id:B.attributes["aria-labelledby"]||"title-".concat(T||Jf())},children:[w]}),delete B.attributes.title);var G=Jt(Jt({},B),{},{prefix:u,iconName:f,main:r,mask:a,maskId:E,transform:g,symbol:l,styles:Jt(Jt({},se),S.styles)}),j=a.found&&r.found?ja("generateAbstractMask",G)||{children:[],attributes:{}}:ja("generateAbstractIcon",G)||{children:[],attributes:{}},b=j.children,k=j.attributes;return G.children=b,G.attributes=k,l?v4(G):y4(G)}function Lb(e){var t=e.content,r=e.width,a=e.height,u=e.transform,f=e.title,g=e.extra,l=e.watchable,w=l===void 0?!1:l,E=Jt(Jt(Jt({},g.attributes),f?{title:f}:{}),{},{class:g.classes.join(" ")});w&&(E[Lu]="");var T=Jt({},g.styles);o_(u)&&(T.transform=YM({transform:u,startCentered:!0,width:r,height:a}),T["-webkit-transform"]=T.transform);var S=ug(T);S.length>0&&(E.style=S);var C=[];return C.push({tag:"span",attributes:E,children:[t]}),f&&C.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),C}function _4(e){var t=e.content,r=e.title,a=e.extra,u=Jt(Jt(Jt({},a.attributes),r?{title:r}:{}),{},{class:a.classes.join(" ")}),f=ug(a.styles);f.length>0&&(u.style=f);var g=[];return g.push({tag:"span",attributes:u,children:[t]}),r&&g.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),g}var Uy=bs.styles;function yv(e){var t=e[0],r=e[1],a=e.slice(4),u=Q1(a,1),f=u[0],g=null;return Array.isArray(f)?g={tag:"g",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Tu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Tu.SECONDARY),fill:"currentColor",d:f[0]}},{tag:"path",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Tu.PRIMARY),fill:"currentColor",d:f[1]}}]}:g={tag:"path",attributes:{fill:"currentColor",d:f}},{found:!0,width:t,height:r,icon:g}}var x4={found:!1,width:512,height:512};function w4(e,t){!TT&&!yn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function vv(e,t){var r=t;return t==="fa"&&yn.styleDefault!==null&&(t=zl()),new Promise(function(a,u){if(ja("missingIconAbstract"),r==="fa"){var f=DT(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&Uy[t]&&Uy[t][e]){var g=Uy[t][e];return a(yv(g))}w4(e,t),a(Jt(Jt({},x4),{},{icon:yn.showMissingIcons&&e?ja("missingIconAbstract")||{}:{}}))})}var Ob=function(){},_v=yn.measurePerformance&&ap&&ap.mark&&ap.measure?ap:{mark:Ob,measure:Ob},uf='FA "6.0.0"',b4=function(t){return _v.mark("".concat(uf," ").concat(t," begins")),function(){return UT(t)}},UT=function(t){_v.mark("".concat(uf," ").concat(t," ends")),_v.measure("".concat(uf," ").concat(t),"".concat(uf," ").concat(t," begins"),"".concat(uf," ").concat(t," ends"))},c_={begin:b4,end:UT},zp=function(){};function Rb(e){var t=e.getAttribute?e.getAttribute(Lu):null;return typeof t=="string"}function E4(e){var t=e.getAttribute?e.getAttribute(t_):null,r=e.getAttribute?e.getAttribute(n_):null;return t&&r}function S4(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(yn.replacementClass)}function T4(){if(yn.autoReplaceSvg===!0)return Lp.replace;var e=Lp[yn.autoReplaceSvg];return e||Lp.replace}function C4(e){return Tr.createElementNS("http://www.w3.org/2000/svg",e)}function A4(e){return Tr.createElement(e)}function $T(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.ceFn,a=r===void 0?e.tag==="svg"?C4:A4:r;if(typeof e=="string")return Tr.createTextNode(e);var u=a(e.tag);Object.keys(e.attributes||[]).forEach(function(g){u.setAttribute(g,e.attributes[g])});var f=e.children||[];return f.forEach(function(g){u.appendChild($T(g,{ceFn:a}))}),u}function I4(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Lp={replace:function(t){var r=t[0];if(r.parentNode)if(t[1].forEach(function(u){r.parentNode.insertBefore($T(u),r)}),r.getAttribute(Lu)===null&&yn.keepOriginalSource){var a=Tr.createComment(I4(r));r.parentNode.replaceChild(a,r)}else r.remove()},nest:function(t){var r=t[0],a=t[1];if(~i_(r).indexOf(yn.replacementClass))return Lp.replace(t);var u=new RegExp("".concat(yn.familyPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var f=a[0].attributes.class.split(" ").reduce(function(l,w){return w===yn.replacementClass||w.match(u)?l.toSvg.push(w):l.toNode.push(w),l},{toNode:[],toSvg:[]});a[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",f.toNode.join(" "))}var g=a.map(function(l){return ud(l)}).join(`
`);r.setAttribute(Lu,""),r.innerHTML=g}};function Fb(e){e()}function VT(e,t){var r=typeof t=="function"?t:zp;if(e.length===0)r();else{var a=Fb;yn.mutateApproach===MM&&(a=Ml.requestAnimationFrame||Fb),a(function(){var u=T4(),f=c_.begin("mutate");e.map(u),f(),r()})}}var h_=!1;function GT(){h_=!0}function xv(){h_=!1}var gm=null;function jb(e){if(Ab&&yn.observeMutations){var t=e.treeCallback,r=t===void 0?zp:t,a=e.nodeCallback,u=a===void 0?zp:a,f=e.pseudoElementsCallback,g=f===void 0?zp:f,l=e.observeMutationsRoot,w=l===void 0?Tr:l;gm=new Ab(function(E){if(!h_){var T=zl();yh(E).forEach(function(S){if(S.type==="childList"&&S.addedNodes.length>0&&!Rb(S.addedNodes[0])&&(yn.searchPseudoElements&&g(S.target),r(S.target)),S.type==="attributes"&&S.target.parentNode&&yn.searchPseudoElements&&g(S.target.parentNode),S.type==="attributes"&&Rb(S.target)&&~BM.indexOf(S.attributeName))if(S.attributeName==="class"&&E4(S.target)){var C=hg(i_(S.target)),F=C.prefix,Y=C.iconName;S.target.setAttribute(t_,F||T),Y&&S.target.setAttribute(n_,Y)}else S4(S.target)&&u(S.target)})}}),Na&&gm.observe(w,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function P4(){gm&&gm.disconnect()}function k4(e){var t=e.getAttribute("style"),r=[];return t&&(r=t.split(";").reduce(function(a,u){var f=u.split(":"),g=f[0],l=f.slice(1);return g&&l.length>0&&(a[g]=l.join(":").trim()),a},{})),r}function M4(e){var t=e.getAttribute("data-prefix"),r=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",u=hg(i_(e));return u.prefix||(u.prefix=zl()),t&&r&&(u.prefix=t,u.iconName=r),u.iconName&&u.prefix||u.prefix&&a.length>0&&(u.iconName=l4(u.prefix,e.innerText)||a_(u.prefix,dv(e.innerText))),u}function z4(e){var t=yh(e.attributes).reduce(function(u,f){return u.name!=="class"&&u.name!=="style"&&(u[f.name]=f.value),u},{}),r=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return yn.autoA11y&&(r?t["aria-labelledby"]="".concat(yn.replacementClass,"-title-").concat(a||Jf()):(t["aria-hidden"]="true",t.focusable="false")),t}function L4(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ks,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Bb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=M4(e),a=r.iconName,u=r.prefix,f=r.rest,g=z4(e),l=mv("parseNodeAttributes",{},e),w=t.styleParser?k4(e):[];return Jt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:u,transform:Ks,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:f,styles:w,attributes:g}},l)}var O4=bs.styles;function WT(e){var t=yn.autoReplaceSvg==="nest"?Bb(e,{styleParser:!1}):Bb(e);return~t.extra.classes.indexOf(AT)?ja("generateLayersText",e,t):ja("generateSvgReplacementMutation",e,t)}function Db(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Na)return Promise.resolve();var r=Tr.documentElement.classList,a=function(S){return r.add("".concat(Ib,"-").concat(S))},u=function(S){return r.remove("".concat(Ib,"-").concat(S))},f=yn.autoFetchSvg?Object.keys(r_):Object.keys(O4),g=[".".concat(AT,":not([").concat(Lu,"])")].concat(f.map(function(T){return".".concat(T,":not([").concat(Lu,"])")})).join(", ");if(g.length===0)return Promise.resolve();var l=[];try{l=yh(e.querySelectorAll(g))}catch{}if(l.length>0)a("pending"),u("complete");else return Promise.resolve();var w=c_.begin("onTree"),E=l.reduce(function(T,S){try{var C=WT(S);C&&T.push(C)}catch(F){TT||F.name==="MissingIcon"&&console.error(F)}return T},[]);return new Promise(function(T,S){Promise.all(E).then(function(C){VT(C,function(){a("active"),a("complete"),u("pending"),typeof t=="function"&&t(),w(),T()})}).catch(function(C){w(),S(C)})})}function R4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;WT(e).then(function(r){r&&VT([r],t)})}function F4(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:gv(t||{}),u=r.mask;return u&&(u=(u||{}).icon?u:gv(u||{})),e(a,Jt(Jt({},r),{},{mask:u}))}}var j4=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.transform,u=a===void 0?Ks:a,f=r.symbol,g=f===void 0?!1:f,l=r.mask,w=l===void 0?null:l,E=r.maskId,T=E===void 0?null:E,S=r.title,C=S===void 0?null:S,F=r.titleId,Y=F===void 0?null:F,H=r.classes,le=H===void 0?[]:H,W=r.attributes,V=W===void 0?{}:W,B=r.styles,se=B===void 0?{}:B;if(t){var G=t.prefix,j=t.iconName,b=t.icon;return fg(Jt({type:"icon"},t),function(){return Ou("beforeDOMElementCreation",{iconDefinition:t,params:r}),yn.autoA11y&&(C?V["aria-labelledby"]="".concat(yn.replacementClass,"-title-").concat(Y||Jf()):(V["aria-hidden"]="true",V.focusable="false")),u_({icons:{main:yv(b),mask:w?yv(w.icon):{found:!1,width:null,height:null,icon:{}}},prefix:G,iconName:j,transform:Jt(Jt({},Ks),u),symbol:g,title:C,maskId:T,titleId:Y,extra:{attributes:V,styles:se,classes:le}})})}},B4={mixout:function(){return{icon:F4(j4)}},hooks:function(){return{mutationObserverCallbacks:function(r){return r.treeCallback=Db,r.nodeCallback=R4,r}}},provides:function(t){t.i2svg=function(r){var a=r.node,u=a===void 0?Tr:a,f=r.callback,g=f===void 0?function(){}:f;return Db(u,g)},t.generateSvgReplacementMutation=function(r,a){var u=a.iconName,f=a.title,g=a.titleId,l=a.prefix,w=a.transform,E=a.symbol,T=a.mask,S=a.maskId,C=a.extra;return new Promise(function(F,Y){Promise.all([vv(u,l),T.iconName?vv(T.iconName,T.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(H){var le=Q1(H,2),W=le[0],V=le[1];F([r,u_({icons:{main:W,mask:V},prefix:l,iconName:u,transform:w,symbol:E,maskId:S,title:f,titleId:g,extra:C,watchable:!0})])}).catch(Y)})},t.generateAbstractIcon=function(r){var a=r.children,u=r.attributes,f=r.main,g=r.transform,l=r.styles,w=ug(l);w.length>0&&(u.style=w);var E;return o_(g)&&(E=ja("generateAbstractTransformGrouping",{main:f,transform:g,containerWidth:f.width,iconWidth:f.width})),a.push(E||f.icon),{children:a,attributes:u}}}},D4={mixout:function(){return{layer:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.classes,f=u===void 0?[]:u;return fg({type:"layer"},function(){Ou("beforeDOMElementCreation",{assembler:r,params:a});var g=[];return r(function(l){Array.isArray(l)?l.map(function(w){g=g.concat(w.abstract)}):g=g.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(yn.familyPrefix,"-layers")].concat(lg(f)).join(" ")},children:g}]})}}}},N4={mixout:function(){return{counter:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.title,f=u===void 0?null:u,g=a.classes,l=g===void 0?[]:g,w=a.attributes,E=w===void 0?{}:w,T=a.styles,S=T===void 0?{}:T;return fg({type:"counter",content:r},function(){return Ou("beforeDOMElementCreation",{content:r,params:a}),_4({content:r.toString(),title:f,extra:{attributes:E,styles:S,classes:["".concat(yn.familyPrefix,"-layers-counter")].concat(lg(l))}})})}}}},U4={mixout:function(){return{text:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.transform,f=u===void 0?Ks:u,g=a.title,l=g===void 0?null:g,w=a.classes,E=w===void 0?[]:w,T=a.attributes,S=T===void 0?{}:T,C=a.styles,F=C===void 0?{}:C;return fg({type:"text",content:r},function(){return Ou("beforeDOMElementCreation",{content:r,params:a}),Lb({content:r,transform:Jt(Jt({},Ks),f),title:l,extra:{attributes:S,styles:F,classes:["".concat(yn.familyPrefix,"-layers-text")].concat(lg(E))}})})}}},provides:function(t){t.generateLayersText=function(r,a){var u=a.title,f=a.transform,g=a.extra,l=null,w=null;if(bT){var E=parseInt(getComputedStyle(r).fontSize,10),T=r.getBoundingClientRect();l=T.width/E,w=T.height/E}return yn.autoA11y&&!u&&(g.attributes["aria-hidden"]="true"),Promise.resolve([r,Lb({content:r.innerHTML,width:l,height:w,transform:f,title:u,extra:g,watchable:!0})])}}},$4=new RegExp('"',"ug"),Nb=[1105920,1112319];function V4(e){var t=e.replace($4,""),r=n4(t,0),a=r>=Nb[0]&&r<=Nb[1],u=t.length===2?t[0]===t[1]:!1;return{value:dv(u?t[0]:t),isSecondary:a||u}}function Ub(e,t){var r="".concat(kM).concat(t.replace(":","-"));return new Promise(function(a,u){if(e.getAttribute(r)!==null)return a();var f=yh(e.children),g=f.filter(function(j){return j.getAttribute(fv)===t})[0],l=Ml.getComputedStyle(e,t),w=l.getPropertyValue("font-family").match(RM),E=l.getPropertyValue("font-weight"),T=l.getPropertyValue("content");if(g&&!w)return e.removeChild(g),a();if(w&&T!=="none"&&T!==""){var S=l.getPropertyValue("content"),C=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(w[2])?pm[w[2].toLowerCase()]:FM[E],F=V4(S),Y=F.value,H=F.isSecondary,le=w[0].startsWith("FontAwesome"),W=a_(C,Y),V=W;if(le){var B=u4(Y);B.iconName&&B.prefix&&(W=B.iconName,C=B.prefix)}if(W&&!H&&(!g||g.getAttribute(t_)!==C||g.getAttribute(n_)!==V)){e.setAttribute(r,V),g&&e.removeChild(g);var se=L4(),G=se.extra;G.attributes[fv]=t,vv(W,C).then(function(j){var b=u_(Jt(Jt({},se),{},{icons:{main:j,mask:l_()},prefix:C,iconName:V,extra:G,watchable:!0})),k=Tr.createElement("svg");t==="::before"?e.insertBefore(k,e.firstChild):e.appendChild(k),k.outerHTML=b.map(function(U){return ud(U)}).join(`
`),e.removeAttribute(r),a()}).catch(u)}else a()}else a()})}function G4(e){return Promise.all([Ub(e,"::before"),Ub(e,"::after")])}function W4(e){return e.parentNode!==document.head&&!~zM.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(fv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function $b(e){if(Na)return new Promise(function(t,r){var a=yh(e.querySelectorAll("*")).filter(W4).map(G4),u=c_.begin("searchPseudoElements");GT(),Promise.all(a).then(function(){u(),xv(),t()}).catch(function(){u(),xv(),r()})})}var Z4={hooks:function(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=$b,r}}},provides:function(t){t.pseudoElements2svg=function(r){var a=r.node,u=a===void 0?Tr:a;yn.searchPseudoElements&&$b(u)}}},Vb=!1,H4={mixout:function(){return{dom:{unwatch:function(){GT(),Vb=!0}}}},hooks:function(){return{bootstrap:function(){jb(mv("mutationObserverCallbacks",{}))},noAuto:function(){P4()},watch:function(r){var a=r.observeMutationsRoot;Vb?xv():jb(mv("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},Gb=function(t){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,u){var f=u.toLowerCase().split("-"),g=f[0],l=f.slice(1).join("-");if(g&&l==="h")return a.flipX=!0,a;if(g&&l==="v")return a.flipY=!0,a;if(l=parseFloat(l),isNaN(l))return a;switch(g){case"grow":a.size=a.size+l;break;case"shrink":a.size=a.size-l;break;case"left":a.x=a.x-l;break;case"right":a.x=a.x+l;break;case"up":a.y=a.y-l;break;case"down":a.y=a.y+l;break;case"rotate":a.rotate=a.rotate+l;break}return a},r)},X4={mixout:function(){return{parse:{transform:function(r){return Gb(r)}}}},hooks:function(){return{parseNodeAttributes:function(r,a){var u=a.getAttribute("data-fa-transform");return u&&(r.transform=Gb(u)),r}}},provides:function(t){t.generateAbstractTransformGrouping=function(r){var a=r.main,u=r.transform,f=r.containerWidth,g=r.iconWidth,l={transform:"translate(".concat(f/2," 256)")},w="translate(".concat(u.x*32,", ").concat(u.y*32,") "),E="scale(".concat(u.size/16*(u.flipX?-1:1),", ").concat(u.size/16*(u.flipY?-1:1),") "),T="rotate(".concat(u.rotate," 0 0)"),S={transform:"".concat(w," ").concat(E," ").concat(T)},C={transform:"translate(".concat(g/2*-1," -256)")},F={outer:l,inner:S,path:C};return{tag:"g",attributes:Jt({},F.outer),children:[{tag:"g",attributes:Jt({},F.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Jt(Jt({},a.icon.attributes),F.path)}]}]}}}},$y={x:0,y:0,width:"100%",height:"100%"};function Wb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function Y4(e){return e.tag==="g"?e.children:[e]}var K4={hooks:function(){return{parseNodeAttributes:function(r,a){var u=a.getAttribute("data-fa-mask"),f=u?hg(u.split(" ").map(function(g){return g.trim()})):l_();return f.prefix||(f.prefix=zl()),r.mask=f,r.maskId=a.getAttribute("data-fa-mask-id"),r}}},provides:function(t){t.generateAbstractMask=function(r){var a=r.children,u=r.attributes,f=r.main,g=r.mask,l=r.maskId,w=r.transform,E=f.width,T=f.icon,S=g.width,C=g.icon,F=XM({transform:w,containerWidth:S,iconWidth:E}),Y={tag:"rect",attributes:Jt(Jt({},$y),{},{fill:"white"})},H=T.children?{children:T.children.map(Wb)}:{},le={tag:"g",attributes:Jt({},F.inner),children:[Wb(Jt({tag:T.tag,attributes:Jt(Jt({},T.attributes),F.path)},H))]},W={tag:"g",attributes:Jt({},F.outer),children:[le]},V="mask-".concat(l||Jf()),B="clip-".concat(l||Jf()),se={tag:"mask",attributes:Jt(Jt({},$y),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Y,W]},G={tag:"defs",children:[{tag:"clipPath",attributes:{id:B},children:Y4(C)},se]};return a.push(G,{tag:"rect",attributes:Jt({fill:"currentColor","clip-path":"url(#".concat(B,")"),mask:"url(#".concat(V,")")},$y)}),{children:a,attributes:u}}}},q4={provides:function(t){var r=!1;Ml.matchMedia&&(r=Ml.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],u={fill:"currentColor"},f={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Jt(Jt({},u),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var g=Jt(Jt({},f),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Jt(Jt({},u),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||l.children.push({tag:"animate",attributes:Jt(Jt({},f),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Jt(Jt({},g),{},{values:"1;0;1;1;0;1;"})}),a.push(l),a.push({tag:"path",attributes:Jt(Jt({},u),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:Jt(Jt({},g),{},{values:"1;0;0;0;0;1;"})}]}),r||a.push({tag:"path",attributes:Jt(Jt({},u),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Jt(Jt({},g),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},J4={hooks:function(){return{parseNodeAttributes:function(r,a){var u=a.getAttribute("data-fa-symbol"),f=u===null?!1:u===""?!0:u;return r.symbol=f,r}}}},Q4=[qM,B4,D4,N4,U4,Z4,H4,X4,K4,q4,J4];f4(Q4,{mixoutsTo:ko});ko.noAuto;ko.config;ko.library;ko.dom;var wv=ko.parse;ko.findIconDefinition;ko.toHtml;var e5=ko.icon;ko.layer;ko.text;ko.counter;var Wn={},t5={get exports(){return Wn},set exports(e){Wn=e}},n5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",r5=n5,i5=r5;function ZT(){}function HT(){}HT.resetWarningCache=ZT;var o5=function(){function e(a,u,f,g,l,w){if(w!==i5){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:HT,resetWarningCache:ZT};return r.PropTypes=r,r};t5.exports=o5();function Zb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,a)}return r}function xl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zb(Object(r),!0).forEach(function(a){Vc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zb(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ym(e){return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function Vc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s5(e,t){if(e==null)return{};var r={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function XT(e,t){if(e==null)return{};var r=s5(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bv(e){return a5(e)||l5(e)||u5(e)||c5()}function a5(e){if(Array.isArray(e))return Ev(e)}function l5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u5(e,t){if(e){if(typeof e=="string")return Ev(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ev(e,t)}}function Ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function c5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h5(e){var t,r=e.beat,a=e.fade,u=e.flash,f=e.spin,g=e.spinPulse,l=e.spinReverse,w=e.pulse,E=e.fixedWidth,T=e.inverse,S=e.border,C=e.listItem,F=e.flip,Y=e.size,H=e.rotation,le=e.pull,W=(t={"fa-beat":r,"fa-fade":a,"fa-flash":u,"fa-spin":f,"fa-spin-reverse":l,"fa-spin-pulse":g,"fa-pulse":w,"fa-fw":E,"fa-inverse":T,"fa-border":S,"fa-li":C,"fa-flip-horizontal":F==="horizontal"||F==="both","fa-flip-vertical":F==="vertical"||F==="both"},Vc(t,"fa-".concat(Y),typeof Y<"u"&&Y!==null),Vc(t,"fa-rotate-".concat(H),typeof H<"u"&&H!==null&&H!==0),Vc(t,"fa-pull-".concat(le),typeof le<"u"&&le!==null),Vc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(W).map(function(V){return W[V]?V:null}).filter(function(V){return V})}function f5(e){return e=e-0,e===e}function YT(e){return f5(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,r){return r?r.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var d5=["style"];function p5(e){return e.charAt(0).toUpperCase()+e.slice(1)}function m5(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,r){var a=r.indexOf(":"),u=YT(r.slice(0,a)),f=r.slice(a+1).trim();return u.startsWith("webkit")?t[p5(u)]=f:t[u]=f,t},{})}function KT(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(w){return KT(e,w)}),u=Object.keys(t.attributes||{}).reduce(function(w,E){var T=t.attributes[E];switch(E){case"class":w.attrs.className=T,delete t.attributes.class;break;case"style":w.attrs.style=m5(T);break;default:E.indexOf("aria-")===0||E.indexOf("data-")===0?w.attrs[E.toLowerCase()]=T:w.attrs[YT(E)]=T}return w},{attrs:{}}),f=r.style,g=f===void 0?{}:f,l=XT(r,d5);return u.attrs.style=xl(xl({},u.attrs.style),g),e.apply(void 0,[t.tag,xl(xl({},u.attrs),l)].concat(bv(a)))}var qT=!1;try{qT=!0}catch{}function g5(){if(!qT&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function Hb(e){if(e&&ym(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(wv.icon)return wv.icon(e);if(e===null)return null;if(e&&ym(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function Vy(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Vc({},e,t):{}}var y5=["forwardedRef"];function Qs(e){var t=e.forwardedRef,r=XT(e,y5),a=r.icon,u=r.mask,f=r.symbol,g=r.className,l=r.title,w=r.titleId,E=Hb(a),T=Vy("classes",[].concat(bv(h5(r)),bv(g.split(" ")))),S=Vy("transform",typeof r.transform=="string"?wv.transform(r.transform):r.transform),C=Vy("mask",Hb(u)),F=e5(E,xl(xl(xl(xl({},T),S),C),{},{symbol:f,title:l,titleId:w}));if(!F)return g5("Could not find icon",E),null;var Y=F.abstract,H={ref:t};return Object.keys(r).forEach(function(le){Qs.defaultProps.hasOwnProperty(le)||(H[le]=r[le])}),v5(Y[0],H)}Qs.displayName="FontAwesomeIcon";Qs.propTypes={beat:Wn.bool,border:Wn.bool,className:Wn.string,fade:Wn.bool,flash:Wn.bool,mask:Wn.oneOfType([Wn.object,Wn.array,Wn.string]),fixedWidth:Wn.bool,inverse:Wn.bool,flip:Wn.oneOf(["horizontal","vertical","both"]),icon:Wn.oneOfType([Wn.object,Wn.array,Wn.string]),listItem:Wn.bool,pull:Wn.oneOf(["right","left"]),pulse:Wn.bool,rotation:Wn.oneOf([0,90,180,270]),size:Wn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Wn.bool,spinPulse:Wn.bool,spinReverse:Wn.bool,symbol:Wn.oneOfType([Wn.bool,Wn.string]),title:Wn.string,transform:Wn.oneOfType([Wn.string,Wn.object]),swapOpacity:Wn.bool};Qs.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var v5=KT.bind(null,hE.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var _5={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},x5=_5,Sv={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},w5={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function lp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var To={},b5={get exports(){return To},set exports(e){To=e}};(function(e,t){(function(r){e.exports=r()})(function(){return function(){function r(a,u,f){function g(E,T){if(!u[E]){if(!a[E]){var S=typeof lp=="function"&&lp;if(!T&&S)return S(E,!0);if(l)return l(E,!0);var C=new Error("Cannot find module '"+E+"'");throw C.code="MODULE_NOT_FOUND",C}var F=u[E]={exports:{}};a[E][0].call(F.exports,function(Y){var H=a[E][1][Y];return g(H||Y)},F,F.exports,r,a,u,f)}return u[E].exports}for(var l=typeof lp=="function"&&lp,w=0;w<f.length;w++)g(f[w]);return g}return r}()({1:[function(r,a,u){u.byteLength=C,u.toByteArray=Y,u.fromByteArray=W;for(var f=[],g=[],l=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,T=w.length;E<T;++E)f[E]=w[E],g[w.charCodeAt(E)]=E;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63;function S(V){var B=V.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var se=V.indexOf("=");se===-1&&(se=B);var G=se===B?0:4-se%4;return[se,G]}function C(V){var B=S(V),se=B[0],G=B[1];return(se+G)*3/4-G}function F(V,B,se){return(B+se)*3/4-se}function Y(V){var B,se=S(V),G=se[0],j=se[1],b=new l(F(V,G,j)),k=0,U=j>0?G-4:G,X;for(X=0;X<U;X+=4)B=g[V.charCodeAt(X)]<<18|g[V.charCodeAt(X+1)]<<12|g[V.charCodeAt(X+2)]<<6|g[V.charCodeAt(X+3)],b[k++]=B>>16&255,b[k++]=B>>8&255,b[k++]=B&255;return j===2&&(B=g[V.charCodeAt(X)]<<2|g[V.charCodeAt(X+1)]>>4,b[k++]=B&255),j===1&&(B=g[V.charCodeAt(X)]<<10|g[V.charCodeAt(X+1)]<<4|g[V.charCodeAt(X+2)]>>2,b[k++]=B>>8&255,b[k++]=B&255),b}function H(V){return f[V>>18&63]+f[V>>12&63]+f[V>>6&63]+f[V&63]}function le(V,B,se){for(var G,j=[],b=B;b<se;b+=3)G=(V[b]<<16&16711680)+(V[b+1]<<8&65280)+(V[b+2]&255),j.push(H(G));return j.join("")}function W(V){for(var B,se=V.length,G=se%3,j=[],b=16383,k=0,U=se-G;k<U;k+=b)j.push(le(V,k,k+b>U?U:k+b));return G===1?(B=V[se-1],j.push(f[B>>2]+f[B<<4&63]+"==")):G===2&&(B=(V[se-2]<<8)+V[se-1],j.push(f[B>>10]+f[B>>4&63]+f[B<<2&63]+"=")),j.join("")}},{}],2:[function(r,a,u){(function(f){(function(){var g=r("base64-js"),l=r("ieee754");u.Buffer=S,u.SlowBuffer=G,u.INSPECT_MAX_BYTES=50;var w=2147483647;u.kMaxLength=w,S.TYPED_ARRAY_SUPPORT=E(),!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var Ee=new Uint8Array(1);return Ee.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Ee.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});function T(Ee){if(Ee>w)throw new RangeError('The value "'+Ee+'" is invalid for option "size"');var R=new Uint8Array(Ee);return R.__proto__=S.prototype,R}function S(Ee,R,O){if(typeof Ee=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H(Ee)}return C(Ee,R,O)}typeof Symbol<"u"&&Symbol.species!=null&&S[Symbol.species]===S&&Object.defineProperty(S,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),S.poolSize=8192;function C(Ee,R,O){if(typeof Ee=="string")return le(Ee,R);if(ArrayBuffer.isView(Ee))return W(Ee);if(Ee==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ee);if(on(Ee,ArrayBuffer)||Ee&&on(Ee.buffer,ArrayBuffer))return V(Ee,R,O);if(typeof Ee=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=Ee.valueOf&&Ee.valueOf();if(pe!=null&&pe!==Ee)return S.from(pe,R,O);var ze=B(Ee);if(ze)return ze;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ee[Symbol.toPrimitive]=="function")return S.from(Ee[Symbol.toPrimitive]("string"),R,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ee)}S.from=function(Ee,R,O){return C(Ee,R,O)},S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array;function F(Ee){if(typeof Ee!="number")throw new TypeError('"size" argument must be of type number');if(Ee<0)throw new RangeError('The value "'+Ee+'" is invalid for option "size"')}function Y(Ee,R,O){return F(Ee),Ee<=0?T(Ee):R!==void 0?typeof O=="string"?T(Ee).fill(R,O):T(Ee).fill(R):T(Ee)}S.alloc=function(Ee,R,O){return Y(Ee,R,O)};function H(Ee){return F(Ee),T(Ee<0?0:se(Ee)|0)}S.allocUnsafe=function(Ee){return H(Ee)},S.allocUnsafeSlow=function(Ee){return H(Ee)};function le(Ee,R){if((typeof R!="string"||R==="")&&(R="utf8"),!S.isEncoding(R))throw new TypeError("Unknown encoding: "+R);var O=j(Ee,R)|0,pe=T(O),ze=pe.write(Ee,R);return ze!==O&&(pe=pe.slice(0,ze)),pe}function W(Ee){for(var R=Ee.length<0?0:se(Ee.length)|0,O=T(R),pe=0;pe<R;pe+=1)O[pe]=Ee[pe]&255;return O}function V(Ee,R,O){if(R<0||Ee.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(Ee.byteLength<R+(O||0))throw new RangeError('"length" is outside of buffer bounds');var pe;return R===void 0&&O===void 0?pe=new Uint8Array(Ee):O===void 0?pe=new Uint8Array(Ee,R):pe=new Uint8Array(Ee,R,O),pe.__proto__=S.prototype,pe}function B(Ee){if(S.isBuffer(Ee)){var R=se(Ee.length)|0,O=T(R);return O.length===0||Ee.copy(O,0,0,R),O}if(Ee.length!==void 0)return typeof Ee.length!="number"||En(Ee.length)?T(0):W(Ee);if(Ee.type==="Buffer"&&Array.isArray(Ee.data))return W(Ee.data)}function se(Ee){if(Ee>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return Ee|0}function G(Ee){return+Ee!=Ee&&(Ee=0),S.alloc(+Ee)}S.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==S.prototype},S.compare=function(R,O){if(on(R,Uint8Array)&&(R=S.from(R,R.offset,R.byteLength)),on(O,Uint8Array)&&(O=S.from(O,O.offset,O.byteLength)),!S.isBuffer(R)||!S.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===O)return 0;for(var pe=R.length,ze=O.length,Ke=0,ot=Math.min(pe,ze);Ke<ot;++Ke)if(R[Ke]!==O[Ke]){pe=R[Ke],ze=O[Ke];break}return pe<ze?-1:ze<pe?1:0},S.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(R,O){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return S.alloc(0);var pe;if(O===void 0)for(O=0,pe=0;pe<R.length;++pe)O+=R[pe].length;var ze=S.allocUnsafe(O),Ke=0;for(pe=0;pe<R.length;++pe){var ot=R[pe];if(on(ot,Uint8Array)&&(ot=S.from(ot)),!S.isBuffer(ot))throw new TypeError('"list" argument must be an Array of Buffers');ot.copy(ze,Ke),Ke+=ot.length}return ze};function j(Ee,R){if(S.isBuffer(Ee))return Ee.length;if(ArrayBuffer.isView(Ee)||on(Ee,ArrayBuffer))return Ee.byteLength;if(typeof Ee!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ee);var O=Ee.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&O===0)return 0;for(var ze=!1;;)switch(R){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Nt(Ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return Cn(Ee).length;default:if(ze)return pe?-1:Nt(Ee).length;R=(""+R).toLowerCase(),ze=!0}}S.byteLength=j;function b(Ee,R,O){var pe=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,R>>>=0,O<=R))return"";for(Ee||(Ee="utf8");;)switch(Ee){case"hex":return Ie(this,R,O);case"utf8":case"utf-8":return te(this,R,O);case"ascii":return xe(this,R,O);case"latin1":case"binary":return je(this,R,O);case"base64":return ne(this,R,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,R,O);default:if(pe)throw new TypeError("Unknown encoding: "+Ee);Ee=(Ee+"").toLowerCase(),pe=!0}}S.prototype._isBuffer=!0;function k(Ee,R,O){var pe=Ee[R];Ee[R]=Ee[O],Ee[O]=pe}S.prototype.swap16=function(){var R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<R;O+=2)k(this,O,O+1);return this},S.prototype.swap32=function(){var R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<R;O+=4)k(this,O,O+3),k(this,O+1,O+2);return this},S.prototype.swap64=function(){var R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<R;O+=8)k(this,O,O+7),k(this,O+1,O+6),k(this,O+2,O+5),k(this,O+3,O+4);return this},S.prototype.toString=function(){var R=this.length;return R===0?"":arguments.length===0?te(this,0,R):b.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(R){if(!S.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:S.compare(this,R)===0},S.prototype.inspect=function(){var R="",O=u.INSPECT_MAX_BYTES;return R=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(R+=" ... "),"<Buffer "+R+">"},S.prototype.compare=function(R,O,pe,ze,Ke){if(on(R,Uint8Array)&&(R=S.from(R,R.offset,R.byteLength)),!S.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(O===void 0&&(O=0),pe===void 0&&(pe=R?R.length:0),ze===void 0&&(ze=0),Ke===void 0&&(Ke=this.length),O<0||pe>R.length||ze<0||Ke>this.length)throw new RangeError("out of range index");if(ze>=Ke&&O>=pe)return 0;if(ze>=Ke)return-1;if(O>=pe)return 1;if(O>>>=0,pe>>>=0,ze>>>=0,Ke>>>=0,this===R)return 0;for(var ot=Ke-ze,ae=pe-O,A=Math.min(ot,ae),z=this.slice(ze,Ke),be=R.slice(O,pe),Be=0;Be<A;++Be)if(z[Be]!==be[Be]){ot=z[Be],ae=be[Be];break}return ot<ae?-1:ae<ot?1:0};function U(Ee,R,O,pe,ze){if(Ee.length===0)return-1;if(typeof O=="string"?(pe=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,En(O)&&(O=ze?0:Ee.length-1),O<0&&(O=Ee.length+O),O>=Ee.length){if(ze)return-1;O=Ee.length-1}else if(O<0)if(ze)O=0;else return-1;if(typeof R=="string"&&(R=S.from(R,pe)),S.isBuffer(R))return R.length===0?-1:X(Ee,R,O,pe,ze);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?ze?Uint8Array.prototype.indexOf.call(Ee,R,O):Uint8Array.prototype.lastIndexOf.call(Ee,R,O):X(Ee,[R],O,pe,ze);throw new TypeError("val must be string, number or Buffer")}function X(Ee,R,O,pe,ze){var Ke=1,ot=Ee.length,ae=R.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(Ee.length<2||R.length<2)return-1;Ke=2,ot/=2,ae/=2,O/=2}function A(Qe,Wt){return Ke===1?Qe[Wt]:Qe.readUInt16BE(Wt*Ke)}var z;if(ze){var be=-1;for(z=O;z<ot;z++)if(A(Ee,z)===A(R,be===-1?0:z-be)){if(be===-1&&(be=z),z-be+1===ae)return be*Ke}else be!==-1&&(z-=z-be),be=-1}else for(O+ae>ot&&(O=ot-ae),z=O;z>=0;z--){for(var Be=!0,Xe=0;Xe<ae;Xe++)if(A(Ee,z+Xe)!==A(R,Xe)){Be=!1;break}if(Be)return z}return-1}S.prototype.includes=function(R,O,pe){return this.indexOf(R,O,pe)!==-1},S.prototype.indexOf=function(R,O,pe){return U(this,R,O,pe,!0)},S.prototype.lastIndexOf=function(R,O,pe){return U(this,R,O,pe,!1)};function K(Ee,R,O,pe){O=Number(O)||0;var ze=Ee.length-O;pe?(pe=Number(pe),pe>ze&&(pe=ze)):pe=ze;var Ke=R.length;pe>Ke/2&&(pe=Ke/2);for(var ot=0;ot<pe;++ot){var ae=parseInt(R.substr(ot*2,2),16);if(En(ae))return ot;Ee[O+ot]=ae}return ot}function de(Ee,R,O,pe){return bn(Nt(R,Ee.length-O),Ee,O,pe)}function ve(Ee,R,O,pe){return bn(jt(R),Ee,O,pe)}function we(Ee,R,O,pe){return ve(Ee,R,O,pe)}function ee(Ee,R,O,pe){return bn(Cn(R),Ee,O,pe)}function ie(Ee,R,O,pe){return bn(cn(R,Ee.length-O),Ee,O,pe)}S.prototype.write=function(R,O,pe,ze){if(O===void 0)ze="utf8",pe=this.length,O=0;else if(pe===void 0&&typeof O=="string")ze=O,pe=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(pe)?(pe=pe>>>0,ze===void 0&&(ze="utf8")):(ze=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ke=this.length-O;if((pe===void 0||pe>Ke)&&(pe=Ke),R.length>0&&(pe<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");for(var ot=!1;;)switch(ze){case"hex":return K(this,R,O,pe);case"utf8":case"utf-8":return de(this,R,O,pe);case"ascii":return ve(this,R,O,pe);case"latin1":case"binary":return we(this,R,O,pe);case"base64":return ee(this,R,O,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,R,O,pe);default:if(ot)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),ot=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(Ee,R,O){return R===0&&O===Ee.length?g.fromByteArray(Ee):g.fromByteArray(Ee.slice(R,O))}function te(Ee,R,O){O=Math.min(Ee.length,O);for(var pe=[],ze=R;ze<O;){var Ke=Ee[ze],ot=null,ae=Ke>239?4:Ke>223?3:Ke>191?2:1;if(ze+ae<=O){var A,z,be,Be;switch(ae){case 1:Ke<128&&(ot=Ke);break;case 2:A=Ee[ze+1],(A&192)===128&&(Be=(Ke&31)<<6|A&63,Be>127&&(ot=Be));break;case 3:A=Ee[ze+1],z=Ee[ze+2],(A&192)===128&&(z&192)===128&&(Be=(Ke&15)<<12|(A&63)<<6|z&63,Be>2047&&(Be<55296||Be>57343)&&(ot=Be));break;case 4:A=Ee[ze+1],z=Ee[ze+2],be=Ee[ze+3],(A&192)===128&&(z&192)===128&&(be&192)===128&&(Be=(Ke&15)<<18|(A&63)<<12|(z&63)<<6|be&63,Be>65535&&Be<1114112&&(ot=Be))}}ot===null?(ot=65533,ae=1):ot>65535&&(ot-=65536,pe.push(ot>>>10&1023|55296),ot=56320|ot&1023),pe.push(ot),ze+=ae}return _e(pe)}var he=4096;function _e(Ee){var R=Ee.length;if(R<=he)return String.fromCharCode.apply(String,Ee);for(var O="",pe=0;pe<R;)O+=String.fromCharCode.apply(String,Ee.slice(pe,pe+=he));return O}function xe(Ee,R,O){var pe="";O=Math.min(Ee.length,O);for(var ze=R;ze<O;++ze)pe+=String.fromCharCode(Ee[ze]&127);return pe}function je(Ee,R,O){var pe="";O=Math.min(Ee.length,O);for(var ze=R;ze<O;++ze)pe+=String.fromCharCode(Ee[ze]);return pe}function Ie(Ee,R,O){var pe=Ee.length;(!R||R<0)&&(R=0),(!O||O<0||O>pe)&&(O=pe);for(var ze="",Ke=R;Ke<O;++Ke)ze+=Et(Ee[Ke]);return ze}function Pe(Ee,R,O){for(var pe=Ee.slice(R,O),ze="",Ke=0;Ke<pe.length;Ke+=2)ze+=String.fromCharCode(pe[Ke]+pe[Ke+1]*256);return ze}S.prototype.slice=function(R,O){var pe=this.length;R=~~R,O=O===void 0?pe:~~O,R<0?(R+=pe,R<0&&(R=0)):R>pe&&(R=pe),O<0?(O+=pe,O<0&&(O=0)):O>pe&&(O=pe),O<R&&(O=R);var ze=this.subarray(R,O);return ze.__proto__=S.prototype,ze};function $e(Ee,R,O){if(Ee%1!==0||Ee<0)throw new RangeError("offset is not uint");if(Ee+R>O)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUIntLE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||$e(R,O,this.length);for(var ze=this[R],Ke=1,ot=0;++ot<O&&(Ke*=256);)ze+=this[R+ot]*Ke;return ze},S.prototype.readUIntBE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||$e(R,O,this.length);for(var ze=this[R+--O],Ke=1;O>0&&(Ke*=256);)ze+=this[R+--O]*Ke;return ze},S.prototype.readUInt8=function(R,O){return R=R>>>0,O||$e(R,1,this.length),this[R]},S.prototype.readUInt16LE=function(R,O){return R=R>>>0,O||$e(R,2,this.length),this[R]|this[R+1]<<8},S.prototype.readUInt16BE=function(R,O){return R=R>>>0,O||$e(R,2,this.length),this[R]<<8|this[R+1]},S.prototype.readUInt32LE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},S.prototype.readUInt32BE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},S.prototype.readIntLE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||$e(R,O,this.length);for(var ze=this[R],Ke=1,ot=0;++ot<O&&(Ke*=256);)ze+=this[R+ot]*Ke;return Ke*=128,ze>=Ke&&(ze-=Math.pow(2,8*O)),ze},S.prototype.readIntBE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||$e(R,O,this.length);for(var ze=O,Ke=1,ot=this[R+--ze];ze>0&&(Ke*=256);)ot+=this[R+--ze]*Ke;return Ke*=128,ot>=Ke&&(ot-=Math.pow(2,8*O)),ot},S.prototype.readInt8=function(R,O){return R=R>>>0,O||$e(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},S.prototype.readInt16LE=function(R,O){R=R>>>0,O||$e(R,2,this.length);var pe=this[R]|this[R+1]<<8;return pe&32768?pe|4294901760:pe},S.prototype.readInt16BE=function(R,O){R=R>>>0,O||$e(R,2,this.length);var pe=this[R+1]|this[R]<<8;return pe&32768?pe|4294901760:pe},S.prototype.readInt32LE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},S.prototype.readInt32BE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},S.prototype.readFloatLE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),l.read(this,R,!0,23,4)},S.prototype.readFloatBE=function(R,O){return R=R>>>0,O||$e(R,4,this.length),l.read(this,R,!1,23,4)},S.prototype.readDoubleLE=function(R,O){return R=R>>>0,O||$e(R,8,this.length),l.read(this,R,!0,52,8)},S.prototype.readDoubleBE=function(R,O){return R=R>>>0,O||$e(R,8,this.length),l.read(this,R,!1,52,8)};function Ne(Ee,R,O,pe,ze,Ke){if(!S.isBuffer(Ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>ze||R<Ke)throw new RangeError('"value" argument is out of bounds');if(O+pe>Ee.length)throw new RangeError("Index out of range")}S.prototype.writeUIntLE=function(R,O,pe,ze){if(R=+R,O=O>>>0,pe=pe>>>0,!ze){var Ke=Math.pow(2,8*pe)-1;Ne(this,R,O,pe,Ke,0)}var ot=1,ae=0;for(this[O]=R&255;++ae<pe&&(ot*=256);)this[O+ae]=R/ot&255;return O+pe},S.prototype.writeUIntBE=function(R,O,pe,ze){if(R=+R,O=O>>>0,pe=pe>>>0,!ze){var Ke=Math.pow(2,8*pe)-1;Ne(this,R,O,pe,Ke,0)}var ot=pe-1,ae=1;for(this[O+ot]=R&255;--ot>=0&&(ae*=256);)this[O+ot]=R/ae&255;return O+pe},S.prototype.writeUInt8=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,1,255,0),this[O]=R&255,O+1},S.prototype.writeUInt16LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,2,65535,0),this[O]=R&255,this[O+1]=R>>>8,O+2},S.prototype.writeUInt16BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,2,65535,0),this[O]=R>>>8,this[O+1]=R&255,O+2},S.prototype.writeUInt32LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,4,4294967295,0),this[O+3]=R>>>24,this[O+2]=R>>>16,this[O+1]=R>>>8,this[O]=R&255,O+4},S.prototype.writeUInt32BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,4,4294967295,0),this[O]=R>>>24,this[O+1]=R>>>16,this[O+2]=R>>>8,this[O+3]=R&255,O+4},S.prototype.writeIntLE=function(R,O,pe,ze){if(R=+R,O=O>>>0,!ze){var Ke=Math.pow(2,8*pe-1);Ne(this,R,O,pe,Ke-1,-Ke)}var ot=0,ae=1,A=0;for(this[O]=R&255;++ot<pe&&(ae*=256);)R<0&&A===0&&this[O+ot-1]!==0&&(A=1),this[O+ot]=(R/ae>>0)-A&255;return O+pe},S.prototype.writeIntBE=function(R,O,pe,ze){if(R=+R,O=O>>>0,!ze){var Ke=Math.pow(2,8*pe-1);Ne(this,R,O,pe,Ke-1,-Ke)}var ot=pe-1,ae=1,A=0;for(this[O+ot]=R&255;--ot>=0&&(ae*=256);)R<0&&A===0&&this[O+ot+1]!==0&&(A=1),this[O+ot]=(R/ae>>0)-A&255;return O+pe},S.prototype.writeInt8=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,1,127,-128),R<0&&(R=255+R+1),this[O]=R&255,O+1},S.prototype.writeInt16LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,2,32767,-32768),this[O]=R&255,this[O+1]=R>>>8,O+2},S.prototype.writeInt16BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,2,32767,-32768),this[O]=R>>>8,this[O+1]=R&255,O+2},S.prototype.writeInt32LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,4,2147483647,-2147483648),this[O]=R&255,this[O+1]=R>>>8,this[O+2]=R>>>16,this[O+3]=R>>>24,O+4},S.prototype.writeInt32BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ne(this,R,O,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[O]=R>>>24,this[O+1]=R>>>16,this[O+2]=R>>>8,this[O+3]=R&255,O+4};function qe(Ee,R,O,pe,ze,Ke){if(O+pe>Ee.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function at(Ee,R,O,pe,ze){return R=+R,O=O>>>0,ze||qe(Ee,R,O,4),l.write(Ee,R,O,pe,23,4),O+4}S.prototype.writeFloatLE=function(R,O,pe){return at(this,R,O,!0,pe)},S.prototype.writeFloatBE=function(R,O,pe){return at(this,R,O,!1,pe)};function yt(Ee,R,O,pe,ze){return R=+R,O=O>>>0,ze||qe(Ee,R,O,8),l.write(Ee,R,O,pe,52,8),O+8}S.prototype.writeDoubleLE=function(R,O,pe){return yt(this,R,O,!0,pe)},S.prototype.writeDoubleBE=function(R,O,pe){return yt(this,R,O,!1,pe)},S.prototype.copy=function(R,O,pe,ze){if(!S.isBuffer(R))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!ze&&ze!==0&&(ze=this.length),O>=R.length&&(O=R.length),O||(O=0),ze>0&&ze<pe&&(ze=pe),ze===pe||R.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),R.length-O<ze-pe&&(ze=R.length-O+pe);var Ke=ze-pe;if(this===R&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,pe,ze);else if(this===R&&pe<O&&O<ze)for(var ot=Ke-1;ot>=0;--ot)R[ot+O]=this[ot+pe];else Uint8Array.prototype.set.call(R,this.subarray(pe,ze),O);return Ke},S.prototype.fill=function(R,O,pe,ze){if(typeof R=="string"){if(typeof O=="string"?(ze=O,O=0,pe=this.length):typeof pe=="string"&&(ze=pe,pe=this.length),ze!==void 0&&typeof ze!="string")throw new TypeError("encoding must be a string");if(typeof ze=="string"&&!S.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze);if(R.length===1){var Ke=R.charCodeAt(0);(ze==="utf8"&&Ke<128||ze==="latin1")&&(R=Ke)}}else typeof R=="number"&&(R=R&255);if(O<0||this.length<O||this.length<pe)throw new RangeError("Out of range index");if(pe<=O)return this;O=O>>>0,pe=pe===void 0?this.length:pe>>>0,R||(R=0);var ot;if(typeof R=="number")for(ot=O;ot<pe;++ot)this[ot]=R;else{var ae=S.isBuffer(R)?R:S.from(R,ze),A=ae.length;if(A===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(ot=0;ot<pe-O;++ot)this[ot+O]=ae[ot%A]}return this};var Pt=/[^+/0-9A-Za-z-_]/g;function ht(Ee){if(Ee=Ee.split("=")[0],Ee=Ee.trim().replace(Pt,""),Ee.length<2)return"";for(;Ee.length%4!==0;)Ee=Ee+"=";return Ee}function Et(Ee){return Ee<16?"0"+Ee.toString(16):Ee.toString(16)}function Nt(Ee,R){R=R||1/0;for(var O,pe=Ee.length,ze=null,Ke=[],ot=0;ot<pe;++ot){if(O=Ee.charCodeAt(ot),O>55295&&O<57344){if(!ze){if(O>56319){(R-=3)>-1&&Ke.push(239,191,189);continue}else if(ot+1===pe){(R-=3)>-1&&Ke.push(239,191,189);continue}ze=O;continue}if(O<56320){(R-=3)>-1&&Ke.push(239,191,189),ze=O;continue}O=(ze-55296<<10|O-56320)+65536}else ze&&(R-=3)>-1&&Ke.push(239,191,189);if(ze=null,O<128){if((R-=1)<0)break;Ke.push(O)}else if(O<2048){if((R-=2)<0)break;Ke.push(O>>6|192,O&63|128)}else if(O<65536){if((R-=3)<0)break;Ke.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((R-=4)<0)break;Ke.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return Ke}function jt(Ee){for(var R=[],O=0;O<Ee.length;++O)R.push(Ee.charCodeAt(O)&255);return R}function cn(Ee,R){for(var O,pe,ze,Ke=[],ot=0;ot<Ee.length&&!((R-=2)<0);++ot)O=Ee.charCodeAt(ot),pe=O>>8,ze=O%256,Ke.push(ze),Ke.push(pe);return Ke}function Cn(Ee){return g.toByteArray(ht(Ee))}function bn(Ee,R,O,pe){for(var ze=0;ze<pe&&!(ze+O>=R.length||ze>=Ee.length);++ze)R[ze+O]=Ee[ze];return ze}function on(Ee,R){return Ee instanceof R||Ee!=null&&Ee.constructor!=null&&Ee.constructor.name!=null&&Ee.constructor.name===R.name}function En(Ee){return Ee!==Ee}}).call(this)}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(r,a,u){const f=r("./validator"),g=r("./xmlparser/XMLParser"),l=r("./xmlbuilder/json2xml");a.exports={XMLParser:g,XMLValidator:f,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(r,a,u){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",g=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+f+"]["+g+"]*",w=new RegExp("^"+l+"$"),E=function(S,C){const F=[];let Y=C.exec(S);for(;Y;){const H=[];H.startIndex=C.lastIndex-Y[0].length;const le=Y.length;for(let W=0;W<le;W++)H.push(Y[W]);F.push(H),Y=C.exec(S)}return F},T=function(S){const C=w.exec(S);return!(C===null||typeof C>"u")};u.isExist=function(S){return typeof S<"u"},u.isEmptyObject=function(S){return Object.keys(S).length===0},u.merge=function(S,C,F){if(C){const Y=Object.keys(C),H=Y.length;for(let le=0;le<H;le++)F==="strict"?S[Y[le]]=[C[Y[le]]]:S[Y[le]]=C[Y[le]]}},u.getValue=function(S){return u.isExist(S)?S:""},u.isName=T,u.getAllMatches=E,u.nameRegexp=l},{}],5:[function(r,a,u){const f=r("./util"),g={allowBooleanAttributes:!1,unpairedTags:[]};u.validate=function(j,b){b=Object.assign({},g,b);const k=[];let U=!1,X=!1;j[0]==="\uFEFF"&&(j=j.substr(1));for(let K=0;K<j.length;K++)if(j[K]==="<"&&j[K+1]==="?"){if(K+=2,K=w(j,K),K.err)return K}else if(j[K]==="<"){let de=K;if(K++,j[K]==="!"){K=E(j,K);continue}else{let ve=!1;j[K]==="/"&&(ve=!0,K++);let we="";for(;K<j.length&&j[K]!==">"&&j[K]!==" "&&j[K]!=="	"&&j[K]!==`
`&&j[K]!=="\r";K++)we+=j[K];if(we=we.trim(),we[we.length-1]==="/"&&(we=we.substring(0,we.length-1),K--),!B(we)){let ne;return we.trim().length===0?ne="Invalid space after '<'.":ne="Tag '"+we+"' is an invalid name.",W("InvalidTag",ne,se(j,K))}const ee=C(j,K);if(ee===!1)return W("InvalidAttr","Attributes for '"+we+"' have open quote.",se(j,K));let ie=ee.value;if(K=ee.index,ie[ie.length-1]==="/"){const ne=K-ie.length;ie=ie.substring(0,ie.length-1);const te=Y(ie,b);if(te===!0)U=!0;else return W(te.err.code,te.err.msg,se(j,ne+te.err.line))}else if(ve)if(ee.tagClosed){if(ie.trim().length>0)return W("InvalidTag","Closing tag '"+we+"' can't have attributes or invalid starting.",se(j,de));{const ne=k.pop();if(we!==ne.tagName){let te=se(j,ne.tagStartPos);return W("InvalidTag","Expected closing tag '"+ne.tagName+"' (opened in line "+te.line+", col "+te.col+") instead of closing tag '"+we+"'.",se(j,de))}k.length==0&&(X=!0)}}else return W("InvalidTag","Closing tag '"+we+"' doesn't have proper closing.",se(j,K));else{const ne=Y(ie,b);if(ne!==!0)return W(ne.err.code,ne.err.msg,se(j,K-ie.length+ne.err.line));if(X===!0)return W("InvalidXml","Multiple possible root nodes found.",se(j,K));b.unpairedTags.indexOf(we)!==-1||k.push({tagName:we,tagStartPos:de}),U=!0}for(K++;K<j.length;K++)if(j[K]==="<")if(j[K+1]==="!"){K++,K=E(j,K);continue}else if(j[K+1]==="?"){if(K=w(j,++K),K.err)return K}else break;else if(j[K]==="&"){const ne=le(j,K);if(ne==-1)return W("InvalidChar","char '&' is not expected.",se(j,K));K=ne}else if(X===!0&&!l(j[K]))return W("InvalidXml","Extra text at the end",se(j,K));j[K]==="<"&&K--}}else{if(l(j[K]))continue;return W("InvalidChar","char '"+j[K]+"' is not expected.",se(j,K))}if(U){if(k.length==1)return W("InvalidTag","Unclosed tag '"+k[0].tagName+"'.",se(j,k[0].tagStartPos));if(k.length>0)return W("InvalidXml","Invalid '"+JSON.stringify(k.map(K=>K.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return W("InvalidXml","Start tag expected.",1);return!0};function l(j){return j===" "||j==="	"||j===`
`||j==="\r"}function w(j,b){const k=b;for(;b<j.length;b++)if(j[b]=="?"||j[b]==" "){const U=j.substr(k,b-k);if(b>5&&U==="xml")return W("InvalidXml","XML declaration allowed only at the start of the document.",se(j,b));if(j[b]=="?"&&j[b+1]==">"){b++;break}else continue}return b}function E(j,b){if(j.length>b+5&&j[b+1]==="-"&&j[b+2]==="-"){for(b+=3;b<j.length;b++)if(j[b]==="-"&&j[b+1]==="-"&&j[b+2]===">"){b+=2;break}}else if(j.length>b+8&&j[b+1]==="D"&&j[b+2]==="O"&&j[b+3]==="C"&&j[b+4]==="T"&&j[b+5]==="Y"&&j[b+6]==="P"&&j[b+7]==="E"){let k=1;for(b+=8;b<j.length;b++)if(j[b]==="<")k++;else if(j[b]===">"&&(k--,k===0))break}else if(j.length>b+9&&j[b+1]==="["&&j[b+2]==="C"&&j[b+3]==="D"&&j[b+4]==="A"&&j[b+5]==="T"&&j[b+6]==="A"&&j[b+7]==="["){for(b+=8;b<j.length;b++)if(j[b]==="]"&&j[b+1]==="]"&&j[b+2]===">"){b+=2;break}}return b}const T='"',S="'";function C(j,b){let k="",U="",X=!1;for(;b<j.length;b++){if(j[b]===T||j[b]===S)U===""?U=j[b]:U!==j[b]||(U="");else if(j[b]===">"&&U===""){X=!0;break}k+=j[b]}return U!==""?!1:{value:k,index:b,tagClosed:X}}const F=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Y(j,b){const k=f.getAllMatches(j,F),U={};for(let X=0;X<k.length;X++){if(k[X][1].length===0)return W("InvalidAttr","Attribute '"+k[X][2]+"' has no space in starting.",G(k[X]));if(k[X][3]!==void 0&&k[X][4]===void 0)return W("InvalidAttr","Attribute '"+k[X][2]+"' is without value.",G(k[X]));if(k[X][3]===void 0&&!b.allowBooleanAttributes)return W("InvalidAttr","boolean attribute '"+k[X][2]+"' is not allowed.",G(k[X]));const K=k[X][2];if(!V(K))return W("InvalidAttr","Attribute '"+K+"' is an invalid name.",G(k[X]));if(!U.hasOwnProperty(K))U[K]=1;else return W("InvalidAttr","Attribute '"+K+"' is repeated.",G(k[X]))}return!0}function H(j,b){let k=/\d/;for(j[b]==="x"&&(b++,k=/[\da-fA-F]/);b<j.length;b++){if(j[b]===";")return b;if(!j[b].match(k))break}return-1}function le(j,b){if(b++,j[b]===";")return-1;if(j[b]==="#")return b++,H(j,b);let k=0;for(;b<j.length;b++,k++)if(!(j[b].match(/\w/)&&k<20)){if(j[b]===";")break;return-1}return b}function W(j,b,k){return{err:{code:j,msg:b,line:k.line||k,col:k.col}}}function V(j){return f.isName(j)}function B(j){return f.isName(j)}function se(j,b){const k=j.substring(0,b).split(/\r?\n/);return{line:k.length,col:k[k.length-1].length+1}}function G(j){return j.startIndex+j[1].length}},{"./util":4}],6:[function(r,a,u){const f=r("./orderedJs2Xml"),g={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressBooleanAttributes:!0,tagValueProcessor:function(le,W){return W},attributeValueProcessor:function(le,W){return W},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:{">":{regex:new RegExp(">","g"),val:"&gt;"},"<":{regex:new RegExp("<","g"),val:"&lt;"},sQuot:{regex:new RegExp("'","g"),val:"&apos;"},dQuot:{regex:new RegExp('"',"g"),val:"&quot;"}},processEntities:!0,stopNodes:[]};function l(le){this.options=Object.assign({},g,le),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=H),this.processTextOrObjNode=w,this.options.format?(this.indentate=Y,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=F,this.buildObjNode=T):(this.buildTextNode=S,this.buildObjNode=E),this.buildTextValNode=S,this.buildObjectNode=E,this.replaceEntitiesValue=C}l.prototype.build=function(le){return this.options.preserveOrder?f(le,this.options):(Array.isArray(le)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(le={[this.options.arrayNodeName]:le}),this.j2x(le,0).val)},l.prototype.j2x=function(le,W){let V="",B="";for(let se in le)if(!(typeof le[se]>"u"))if(le[se]===null)B+=this.indentate(W)+"<"+se+"/"+this.tagEndChar;else if(le[se]instanceof Date)B+=this.buildTextNode(le[se],se,"",W);else if(typeof le[se]!="object"){const G=this.isAttribute(se);if(G){let j=this.options.attributeValueProcessor(G,""+le[se]);j=this.replaceEntitiesValue(j),V+=" "+G+'="'+j+'"'}else if(se===this.options.textNodeName){let j=this.options.tagValueProcessor(se,""+le[se]);B+=this.replaceEntitiesValue(j)}else B+=this.buildTextNode(le[se],se,"",W)}else if(Array.isArray(le[se])){const G=le[se].length;for(let j=0;j<G;j++){const b=le[se][j];typeof b>"u"||(b===null?B+=this.indentate(W)+"<"+se+"/"+this.tagEndChar:typeof b=="object"?B+=this.processTextOrObjNode(b,se,W):B+=this.buildTextNode(b,se,"",W))}}else if(this.options.attributesGroupName&&se===this.options.attributesGroupName){const G=Object.keys(le[se]),j=G.length;for(let b=0;b<j;b++){let k=this.options.attributeValueProcessor(G[b],""+le[se][G[b]]);k=this.replaceEntitiesValue(k),V+=" "+G[b]+'="'+k+'"'}}else B+=this.processTextOrObjNode(le[se],se,W);return{attrStr:V,val:B}};function w(le,W,V){const B=this.j2x(le,V+1);return le[this.options.textNodeName]!==void 0&&Object.keys(le).length===1?this.buildTextNode(B.val,W,B.attrStr,V):this.buildObjNode(B.val,W,B.attrStr,V)}function E(le,W,V,B){return V&&le.indexOf("<")===-1?this.indentate(B)+"<"+W+V+">"+le+"</"+W+this.tagEndChar:this.indentate(B)+"<"+W+V+this.tagEndChar+le+this.indentate(B)+"</"+W+this.tagEndChar}function T(le,W,V,B){return le!==""?this.buildObjectNode(le,W,V,B):this.indentate(B)+"<"+W+V+"/"+this.tagEndChar}function S(le,W,V,B){let se=this.options.tagValueProcessor(W,le);return se=this.replaceEntitiesValue(se),this.indentate(B)+"<"+W+V+">"+se+"</"+W+this.tagEndChar}function C(le){if(le&&le.length>0&&this.options.processEntities)for(const W in this.options.entities){const V=this.options.entities[W];le=le.replace(V.regex,V.val)}return le}function F(le,W,V,B){return le===""&&this.options.unpairedTags.indexOf(W)!==-1?this.indentate(B)+"<"+W+V+this.tagEndChar:le!==""?this.buildTextValNode(le,W,V,B):this.indentate(B)+"<"+W+V+"/"+this.tagEndChar}function Y(le){return this.options.indentBy.repeat(le)}function H(le){return le.startsWith(this.options.attributeNamePrefix)?le.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(r,a,u){const{EOL:f}=r("os");function g(C,F){return l(C,F,"",0)}function l(C,F,Y,H){let le="",W="";F.format&&F.indentBy.length>0&&(W=f+""+F.indentBy.repeat(H));for(let V=0;V<C.length;V++){const B=C[V],se=w(B);let G="";if(Y.length===0?G=se:G=`${Y}.${se}`,se===F.textNodeName){let U=B[se];T(G,F)||(U=F.tagValueProcessor(se,U),U=S(U,F)),le+=W+U;continue}else if(se===F.cdataPropName){le+=W+`<![CDATA[${B[se][0][F.textNodeName]}]]>`;continue}else if(se===F.commentPropName){le+=W+`<!--${B[se][0][F.textNodeName]}-->`;continue}else if(se[0]==="?"){const U=E(B[":@"],F);le+=W+`<${se} ${B[se][0][F.textNodeName]} ${U}?>`;continue}const j=E(B[":@"],F);let b=W+`<${se}${j}`,k=l(B[se],F,G,H+1);F.unpairedTags.indexOf(se)!==-1?le+=b+">":(!k||k.length===0)&&F.suppressEmptyNode?le+=b+"/>":le+=b+`>${k}${W}</${se}>`}return le}function w(C){const F=Object.keys(C);for(let Y=0;Y<F.length;Y++){const H=F[Y];if(H!==":@")return H}}function E(C,F){let Y="";if(C&&!F.ignoreAttributes)for(attr in C){let H=F.attributeValueProcessor(attr,C[attr]);H=S(H,F),H===!0&&F.suppressBooleanAttributes?Y+=` ${attr.substr(F.attributeNamePrefix.length)}`:Y+=` ${attr.substr(F.attributeNamePrefix.length)}="${H}"`}return Y}function T(C,F){C=C.substr(0,C.length-F.textNodeName.length-1);let Y=C.substr(C.lastIndexOf(".")+1);for(let H in F.stopNodes)if(F.stopNodes[H]===C||F.stopNodes[H]==="*."+Y)return!0;return!1}function S(C,F){if(C&&C.length>0&&F.processEntities)for(const Y in F.entities){const H=F.entities[Y];C=C.replace(H.regex,H.val)}return C}a.exports=g},{os:15}],8:[function(r,a,u){function f(w,E){const T={};if(w[E+3]==="O"&&w[E+4]==="C"&&w[E+5]==="T"&&w[E+6]==="Y"&&w[E+7]==="P"&&w[E+8]==="E"){E=E+9;let S=1,C=!1,F=!1,Y=!1,H="";for(;E<w.length;E++)if(w[E]==="<"){if(C&&w[E+1]==="!"&&w[E+2]==="E"&&w[E+3]==="N"&&w[E+4]==="T"&&w[E+5]==="I"&&w[E+6]==="T"&&w[E+7]==="Y")E+=7,F=!0;else if(C&&w[E+1]==="!"&&w[E+2]==="E"&&w[E+3]==="L"&&w[E+4]==="E"&&w[E+5]==="M"&&w[E+6]==="E"&&w[E+7]==="N"&&w[E+8]==="T")E+=8;else if(w[E+1]==="!"&&w[E+2]==="-"&&w[E+3]==="-")Y=!0;else throw new Error("Invalid DOCTYPE");S++,H=""}else if(w[E]===">"){if(Y)if(w[E-1]==="-"&&w[E-2]==="-")Y=!1;else throw new Error("Invalid XML comment in DOCTYPE");else F&&(l(H,T),F=!1);if(S--,S===0)break}else w[E]==="["?C=!0:H+=w[E];if(S!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:T,i:E}}const g=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(w,E){const T=g.exec(w);T&&(E[T[1]]={regx:RegExp(`&${T[1]};`,"g"),val:T[3]})}a.exports=f},{}],9:[function(r,a,u){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,w){return w},attributeValueProcessor:function(l,w){return w},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1},g=function(l){return Object.assign({},f,l)};u.buildOptions=g,u.defaultOptions=f},{}],10:[function(r,a,u){const f=r("../util"),g=r("./xmlNode"),l=r("./DocTypeReader"),w=r("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,f.nameRegexp);class E{constructor(U){this.options=U,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=T,this.parseXml=H,this.parseTextData=S,this.resolveNameSpace=C,this.buildAttributesMap=Y,this.isItStopNode=V,this.replaceEntitiesValue=le,this.readStopNodeData=j,this.saveTextToParentTag=W}}function T(k){const U=Object.keys(k);for(let X=0;X<U.length;X++){const K=U[X];this.lastEntities[K]={regex:new RegExp("&"+K+";","g"),val:k[K]}}}function S(k,U,X,K,de,ve,we){if(k!==void 0&&(this.options.trimValues&&!K&&(k=k.trim()),k.length>0)){we||(k=this.replaceEntitiesValue(k));const ee=this.options.tagValueProcessor(U,k,X,de,ve);return ee==null?k:typeof ee!=typeof k||ee!==k?ee:this.options.trimValues?b(k,this.options.parseTagValue,this.options.numberParseOptions):k.trim()===k?b(k,this.options.parseTagValue,this.options.numberParseOptions):k}}function C(k){if(this.options.removeNSPrefix){const U=k.split(":"),X=k.charAt(0)==="/"?"/":"";if(U[0]==="xmlns")return"";U.length===2&&(k=X+U[1])}return k}const F=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Y(k,U){if(!this.options.ignoreAttributes&&typeof k=="string"){const X=f.getAllMatches(k,F),K=X.length,de={};for(let ve=0;ve<K;ve++){const we=this.resolveNameSpace(X[ve][1]);let ee=X[ve][4];const ie=this.options.attributeNamePrefix+we;if(we.length)if(ee!==void 0){this.options.trimValues&&(ee=ee.trim()),ee=this.replaceEntitiesValue(ee);const ne=this.options.attributeValueProcessor(we,ee,U);ne==null?de[ie]=ee:typeof ne!=typeof ee||ne!==ee?de[ie]=ne:de[ie]=b(ee,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(de[ie]=!0)}if(!Object.keys(de).length)return;if(this.options.attributesGroupName){const ve={};return ve[this.options.attributesGroupName]=de,ve}return de}}const H=function(k){k=k.replace(/\r\n?/g,`
`);const U=new g("!xml");let X=U,K="",de="";for(let ve=0;ve<k.length;ve++)if(k[ve]==="<")if(k[ve+1]==="/"){const ee=se(k,">",ve,"Closing Tag is not closed.");let ie=k.substring(ve+2,ee).trim();if(this.options.removeNSPrefix){const ne=ie.indexOf(":");ne!==-1&&(ie=ie.substr(ne+1))}X&&(K=this.saveTextToParentTag(K,X,de)),de=de.substr(0,de.lastIndexOf(".")),X=this.tagsNodeStack.pop(),K="",ve=ee}else if(k[ve+1]==="?"){let ee=G(k,ve,!1,"?>");if(!ee)throw new Error("Pi Tag is not closed.");K=this.saveTextToParentTag(K,X,de);const ie=new g(ee.tagName);ie.add(this.options.textNodeName,""),ee.tagName!==ee.tagExp&&ee.attrExpPresent&&(ie[":@"]=this.buildAttributesMap(ee.tagExp,de)),X.addChild(ie),ve=ee.closeIndex+1}else if(k.substr(ve+1,3)==="!--"){const ee=se(k,"-->",ve,"Comment is not closed.");if(this.options.commentPropName){const ie=k.substring(ve+4,ee-2);K=this.saveTextToParentTag(K,X,de),X.add(this.options.commentPropName,[{[this.options.textNodeName]:ie}])}ve=ee}else if(k.substr(ve+1,2)==="!D"){const ee=l(k,ve);this.docTypeEntities=ee.entities,ve=ee.i}else if(k.substr(ve+1,2)==="!["){const ee=se(k,"]]>",ve,"CDATA is not closed.")-2,ie=k.substring(ve+9,ee);if(K=this.saveTextToParentTag(K,X,de),this.options.cdataPropName)X.add(this.options.cdataPropName,[{[this.options.textNodeName]:ie}]);else{let ne=this.parseTextData(ie,X.tagname,de,!0,!1,!0);ne||(ne=""),X.add(this.options.textNodeName,ne)}ve=ee+2}else{let ee=G(k,ve,this.options.removeNSPrefix),ie=ee.tagName,ne=ee.tagExp,te=ee.attrExpPresent,he=ee.closeIndex;X&&K&&X.tagname!=="!xml"&&(K=this.saveTextToParentTag(K,X,de,!1)),ie!==U.tagname&&(de+=de?"."+ie:ie);const _e=X;if(_e&&this.options.unpairedTags.indexOf(_e.tagname)!==-1&&(X=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,de,ie)){let xe="";if(!(ne.length>0&&ne.lastIndexOf("/")===ne.length-1)){if(this.options.unpairedTags.indexOf(ie)===-1){const Ie=this.readStopNodeData(k,ie,he+1);if(!Ie)throw new Error(`Unexpected end of ${ie}`);ve=Ie.i,xe=Ie.tagContent}}const je=new g(ie);ie!==ne&&te&&(je[":@"]=this.buildAttributesMap(ne,de)),xe&&(xe=this.parseTextData(xe,ie,de,!0,te,!0,!0)),de=de.substr(0,de.lastIndexOf(".")),je.add(this.options.textNodeName,xe),X.addChild(je)}else{if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1){ie[ie.length-1]==="/"?(ie=ie.substr(0,ie.length-1),ne=ie):ne=ne.substr(0,ne.length-1);const xe=new g(ie);ie!==ne&&te&&(xe[":@"]=this.buildAttributesMap(ne,de)),de=de.substr(0,de.lastIndexOf(".")),X.addChild(xe)}else{const xe=new g(ie);this.tagsNodeStack.push(X),ie!==ne&&te&&(xe[":@"]=this.buildAttributesMap(ne,de)),X.addChild(xe),X=xe}K="",ve=he}}else K+=k[ve];return U.child},le=function(k){if(this.options.processEntities){for(let U in this.docTypeEntities){const X=this.docTypeEntities[U];k=k.replace(X.regx,X.val)}for(let U in this.lastEntities){const X=this.lastEntities[U];k=k.replace(X.regex,X.val)}if(this.options.htmlEntities)for(let U in this.htmlEntities){const X=this.htmlEntities[U];k=k.replace(X.regex,X.val)}}return k};function W(k,U,X,K){return k&&(K===void 0&&(K=Object.keys(U.child).length===0),k=this.parseTextData(k,U.tagname,X,!1,U[":@"]?Object.keys(U[":@"]).length!==0:!1,K),k!==void 0&&k!==""&&U.add(this.options.textNodeName,k),k=""),k}function V(k,U,X){const K="*."+X;for(const de in k){const ve=k[de];if(K===ve||U===ve)return!0}return!1}function B(k,U,X=">"){let K,de="";for(let ve=U;ve<k.length;ve++){let we=k[ve];if(K)we===K&&(K="");else if(we==='"'||we==="'")K=we;else if(we===X[0])if(X[1]){if(k[ve+1]===X[1])return{data:de,index:ve}}else return{data:de,index:ve};else we==="	"&&(we=" ");de+=we}}function se(k,U,X,K){const de=k.indexOf(U,X);if(de===-1)throw new Error(K);return de+U.length-1}function G(k,U,X,K=">"){const de=B(k,U+1,K);if(!de)return;let ve=de.data;const we=de.index,ee=ve.search(/\s/);let ie=ve,ne=!0;if(ee!==-1&&(ie=ve.substr(0,ee).replace(/\s\s*$/,""),ve=ve.substr(ee+1)),X){const te=ie.indexOf(":");te!==-1&&(ie=ie.substr(te+1),ne=ie!==de.data.substr(te+1))}return{tagName:ie,tagExp:ve,closeIndex:we,attrExpPresent:ne}}function j(k,U,X){const K=X;for(;X<k.length;X++)if(k[X]==="<"&&k[X+1]==="/"){const de=se(k,">",X,`${U} is not closed`);if(k.substring(X+2,de).trim()===U)return{tagContent:k.substring(K,X),i:de};X=de}}function b(k,U,X){if(U&&typeof k=="string"){const K=k.trim();return K==="true"?!0:K==="false"?!1:w(k,X)}else return f.isExist(k)?k:""}a.exports=E},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:16}],11:[function(r,a,u){const{buildOptions:f}=r("./OptionsBuilder"),g=r("./OrderedObjParser"),{prettify:l}=r("./node2json"),w=r("../validator");class E{constructor(S){this.externalEntities={},this.options=f(S)}parse(S,C){if(typeof S!="string")if(S.toString)S=S.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(C){C===!0&&(C={});const H=w.validate(S,C);if(H!==!0)throw Error(`${H.err.msg}:${H.err.line}:${H.err.col}`)}const F=new g(this.options);F.addExternalEntities(this.externalEntities);const Y=F.parseXml(S);return this.options.preserveOrder||Y===void 0?Y:l(Y,this.options)}addEntity(S,C){if(C.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(S.indexOf("&")!==-1||S.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[S]=C}}a.exports=E},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(r,a,u){function f(T,S){return g(T,S)}function g(T,S,C){let F;const Y={};for(let H=0;H<T.length;H++){const le=T[H],W=l(le);let V="";if(C===void 0?V=W:V=C+"."+W,W===S.textNodeName)F===void 0?F=le[W]:F+=""+le[W];else{if(W===void 0)continue;if(le[W]){let B=g(le[W],S,V);const se=E(B,S);le[":@"]?w(B,le[":@"],V,S):Object.keys(B).length===1&&B[S.textNodeName]!==void 0&&!S.alwaysCreateTextNode?B=B[S.textNodeName]:Object.keys(B).length===0&&(S.alwaysCreateTextNode?B[S.textNodeName]="":B=""),Y[W]!==void 0?(Array.isArray(Y[W])||(Y[W]=[Y[W]]),Y[W].push(B)):S.isArray(W,V,se)?Y[W]=[B]:Y[W]=B}}}return typeof F=="string"?F.length>0&&(Y[S.textNodeName]=F):F!==void 0&&(Y[S.textNodeName]=F),Y}function l(T){const S=Object.keys(T);for(let C=0;C<S.length;C++){const F=S[C];if(F!==":@")return F}}function w(T,S,C,F){if(S){const Y=Object.keys(S),H=Y.length;for(let le=0;le<H;le++){const W=Y[le];F.isArray(W,C+"."+W,!0,!0)?T[W]=[S[W]]:T[W]=S[W]}}}function E(T,S){const C=Object.keys(T).length;return!!(C===0||C===1&&T[S.textNodeName])}u.prettify=f},{}],13:[function(r,a,u){class f{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,w){this.child.push({[l]:w})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,[":@"]:l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=f},{}],14:[function(r,a,u){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */u.read=function(f,g,l,w,E){var T,S,C=E*8-w-1,F=(1<<C)-1,Y=F>>1,H=-7,le=l?E-1:0,W=l?-1:1,V=f[g+le];for(le+=W,T=V&(1<<-H)-1,V>>=-H,H+=C;H>0;T=T*256+f[g+le],le+=W,H-=8);for(S=T&(1<<-H)-1,T>>=-H,H+=w;H>0;S=S*256+f[g+le],le+=W,H-=8);if(T===0)T=1-Y;else{if(T===F)return S?NaN:(V?-1:1)*(1/0);S=S+Math.pow(2,w),T=T-Y}return(V?-1:1)*S*Math.pow(2,T-w)},u.write=function(f,g,l,w,E,T){var S,C,F,Y=T*8-E-1,H=(1<<Y)-1,le=H>>1,W=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=w?0:T-1,B=w?1:-1,se=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(C=isNaN(g)?1:0,S=H):(S=Math.floor(Math.log(g)/Math.LN2),g*(F=Math.pow(2,-S))<1&&(S--,F*=2),S+le>=1?g+=W/F:g+=W*Math.pow(2,1-le),g*F>=2&&(S++,F/=2),S+le>=H?(C=0,S=H):S+le>=1?(C=(g*F-1)*Math.pow(2,E),S=S+le):(C=g*Math.pow(2,le-1)*Math.pow(2,E),S=0));E>=8;f[l+V]=C&255,V+=B,C/=256,E-=8);for(S=S<<E|C,Y+=E;Y>0;f[l+V]=S&255,V+=B,S/=256,Y-=8);f[l+V-B]|=se*128}},{}],15:[function(r,a,u){u.endianness=function(){return"LE"},u.hostname=function(){return typeof location<"u"?location.hostname:""},u.loadavg=function(){return[]},u.uptime=function(){return 0},u.freemem=function(){return Number.MAX_VALUE},u.totalmem=function(){return Number.MAX_VALUE},u.cpus=function(){return[]},u.type=function(){return"Browser"},u.release=function(){return typeof navigator<"u"?navigator.appVersion:""},u.networkInterfaces=u.getNetworkInterfaces=function(){return{}},u.arch=function(){return"javascript"},u.platform=function(){return"browser"},u.tmpdir=u.tmpDir=function(){return"/tmp"},u.EOL=`
`,u.homedir=function(){return"/"}},{}],16:[function(r,a,u){const f=/^[-+]?0x[a-fA-F0-9]+$/,g=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function w(T,S={}){if(S=Object.assign({},l,S),!T||typeof T!="string")return T;let C=T.trim();if(S.skipLike!==void 0&&S.skipLike.test(C))return T;if(S.hex&&f.test(C))return Number.parseInt(C,16);{const F=g.exec(C);if(F){const Y=F[1],H=F[2];let le=E(F[3]);const W=F[4]||F[6];if(!S.leadingZeros&&H.length>0&&Y&&C[2]!==".")return T;if(!S.leadingZeros&&H.length>0&&!Y&&C[1]!==".")return T;{const V=Number(C),B=""+V;return B.search(/[eE]/)!==-1||W?S.eNotation?V:T:C.indexOf(".")!==-1?B==="0"&&le===""||B===le||Y&&B==="-"+le?V:T:H?le===B||Y+le===B?V:T:C===B||C===Y+B?V:T}}else return T}}function E(T){return T&&T.indexOf(".")!==-1&&(T=T.replace(/0+$/,""),T==="."?T="0":T[0]==="."?T="0"+T:T[T.length-1]==="."&&(T=T.substr(0,T.length-1))),T}a.exports=w},{}],17:[function(r,a,u){(function(f){(function(){var g=this&&this.__awaiter||function(C,F,Y,H){function le(W){return W instanceof Y?W:new Y(function(V){V(W)})}return new(Y||(Y=Promise))(function(W,V){function B(j){try{G(H.next(j))}catch(b){V(b)}}function se(j){try{G(H.throw(j))}catch(b){V(b)}}function G(j){j.done?W(j.value):le(j.value).then(B,se)}G((H=H.apply(C,F||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.osmFetch=void 0;const l=r("../auth"),w=r("../config"),E=r("./_xml"),T=C=>typeof btoa>"u"?f.from(C,"binary").toString("base64"):btoa(C);function S(C,F,Y){return g(this,void 0,void 0,function*(){const{apiUrl:H,authHeader:le,basicAuth:W,userAgent:V}=(0,w.getConfig)(),B=W&&`Basic ${T(`${W.username}:${W.password}`)}`,se=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let G=new URLSearchParams(F).toString();G&&(G=`?${G}`);const j=yield fetch(`${H}/api${C}${G}`,Object.assign(Object.assign({},Y),{headers:Object.assign({Authorization:le||B||se||"","User-Agent":V},Y==null?void 0:Y.headers)})),b=j.headers.get("Content-Type");if(b!=null&&b.startsWith("application/xml")){const k=yield j.text();return yield E.xmlParser.parse(k)}if(b!=null&&b.startsWith("application/json"))return j.json();if(j.ok)return yield j.text();throw new Error(`OSM API: ${yield j.text()}`)})}u.osmFetch=S}).call(this)}).call(this,r("buffer").Buffer)},{"../auth":38,"../config":40,"./_xml":18,buffer:2}],18:[function(r,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.xmlParser=void 0;const f=r("fast-xml-parser");u.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:g=>g!=="$"})},{"fast-xml-parser":3}],19:[function(r,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.createOsmChangeXml=u.createChangesetMetaXml=void 0;const f=r("fast-xml-parser"),g=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,attributeValueProcessor:(T,S)=>S.replace(/&/g,"&amp;")});function l(T){return g.build({osm:{changeset:{tag:Object.entries(T).map(([S,C])=>({$k:S,$v:C}))}}})}u.createChangesetMetaXml=l;const w=(T,S,C)=>S.reduce((F,Y)=>{const H={$id:Y.id,$version:C?0:Y.version,$changeset:T,tag:Object.entries(Y.tags||{}).map(([le,W])=>({$k:le,$v:W}))};switch(Y.type){case"node":{const le=Object.assign(Object.assign({},H),{$lat:Y.lat,$lon:Y.lon});return Object.assign(Object.assign({},F),{node:[...F.node,le]})}case"way":{if(!Y.nodes)throw new Error("Way has no nodes");const le=Object.assign(Object.assign({},H),{nd:Y.nodes.map(W=>({$ref:W}))});return Object.assign(Object.assign({},F),{way:[...F.way,le]})}case"relation":{if(!Y.members)throw new Error("Relation has no members");const le=Object.assign(Object.assign({},H),{member:Y.members.map(W=>({$type:W.type,$ref:W.ref,$role:W.role}))});return Object.assign(Object.assign({},F),{relation:[...F.relation,le]})}default:return F}},{node:[],way:[],relation:[]});function E(T,S,C){return g.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},C),{create:[w(T,S.create,!0)],modify:[w(T,S.modify)],delete:[Object.assign({"$if-unused":!0},w(T,S.delete))]})})}u.createOsmChangeXml=E},{"fast-xml-parser":3}],20:[function(r,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.parseOsmChangeXml=u.parseOsmChangeJson=void 0;const f=r("../_xml");function g(T){return{changeset:+T.$.changeset,id:+T.$.id,timestamp:T.$.timestamp,uid:+T.$.uid,user:T.$.user,version:+T.$.version,tags:T.tag?Object.fromEntries(T.tag.map(S=>[S.$.k,S.$.v])):void 0}}const l=T=>{const S=[];if(T.node){const C=T.node.map(F=>Object.assign(Object.assign({type:"node"},g(F)),{lat:+F.$.lat,lon:+F.$.lon}));S.push(...C)}if(T.way){const C=T.way.map(F=>{var Y;return Object.assign(Object.assign({type:"way"},g(F)),{nodes:((Y=F.nd)===null||Y===void 0?void 0:Y.map(H=>+H.$.ref))||[]})});S.push(...C)}if(T.relation){const C=T.relation.map(F=>{var Y;return Object.assign(Object.assign({type:"relation"},g(F)),{members:((Y=F.member)===null||Y===void 0?void 0:Y.map(H=>({ref:+H.$.ref,role:H.$.role,type:H.$.type})))||[]})});S.push(...C)}return S};function w(T){var S,C,F;return{create:((S=T.osmChange[0].create)===null||S===void 0?void 0:S.flatMap(l))||[],modify:((C=T.osmChange[0].modify)===null||C===void 0?void 0:C.flatMap(l))||[],delete:((F=T.osmChange[0].delete)===null||F===void 0?void 0:F.flatMap(l))||[]}}u.parseOsmChangeJson=w;function E(T){const S=f.xmlParser.parse(T);return console.log(S),w(S)}u.parseOsmChangeXml=E},{"../_xml":18}],21:[function(r,a,u){var f=this&&this.__awaiter||function(w,E,T,S){function C(F){return F instanceof T?F:new T(function(Y){Y(F)})}return new(T||(T=Promise))(function(F,Y){function H(V){try{W(S.next(V))}catch(B){Y(B)}}function le(V){try{W(S.throw(V))}catch(B){Y(B)}}function W(V){V.done?F(V.value):C(V.value).then(H,le)}W((S=S.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.createChangesetComment=void 0;const g=r("../_osmFetch");function l(w,E){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/changeset/${w}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(E)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}u.createChangesetComment=l},{"../_osmFetch":17}],22:[function(r,a,u){var f=this&&this.__awaiter||function(E,T,S,C){function F(Y){return Y instanceof S?Y:new S(function(H){H(Y)})}return new(S||(S=Promise))(function(Y,H){function le(B){try{V(C.next(B))}catch(se){H(se)}}function W(B){try{V(C.throw(B))}catch(se){H(se)}}function V(B){B.done?Y(B.value):F(B.value).then(le,W)}V((C=C.apply(E,T||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getChangesetDiff=void 0;const g=r("../_osmFetch"),l=r("./_parseOsmChangeXml");function w(E){return f(this,void 0,void 0,function*(){const T=yield(0,g.osmFetch)(`/0.6/changeset/${E}/download`);return(0,l.parseOsmChangeJson)(T)})}u.getChangesetDiff=w},{"../_osmFetch":17,"./_parseOsmChangeXml":20}],23:[function(r,a,u){var f=this&&this.__awaiter||function(S,C,F,Y){function H(le){return le instanceof F?le:new F(function(W){W(le)})}return new(F||(F=Promise))(function(le,W){function V(G){try{se(Y.next(G))}catch(j){W(j)}}function B(G){try{se(Y.throw(G))}catch(j){W(j)}}function se(G){G.done?le(G.value):H(G.value).then(V,B)}se((Y=Y.apply(S,C||[])).next())})},g=this&&this.__rest||function(S,C){var F={};for(var Y in S)Object.prototype.hasOwnProperty.call(S,Y)&&C.indexOf(Y)<0&&(F[Y]=S[Y]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,Y=Object.getOwnPropertySymbols(S);H<Y.length;H++)C.indexOf(Y[H])<0&&Object.prototype.propertyIsEnumerable.call(S,Y[H])&&(F[Y[H]]=S[Y[H]]);return F};Object.defineProperty(u,"__esModule",{value:!0}),u.getChangeset=u.listChangesets=void 0;const l=r("../_osmFetch"),w=S=>{var C;return{id:+S.$.id,created_at:new Date(S.$.created_at),closed_at:new Date(S.$.closed_at),open:S.$.open==="true",comments_count:+S.$.comments_count,changes_count:+S.$.changes_count,min_lat:+S.$.min_lat,min_lon:+S.$.min_lon,max_lat:+S.$.max_lat,max_lon:+S.$.max_lon,uid:+S.$.uid,user:S.$.user,tags:Object.fromEntries(S.tag.map(F=>[F.$.k,F.$.v])),discussion:(C=S.discussion)===null||C===void 0?void 0:C[0].comment.map(F=>({date:new Date(F.$.date),user:F.$.user,uid:F.$.uid,text:F.text[0]}))}};function E(S){var C;return f(this,void 0,void 0,function*(){const{only:F}=S,Y=g(S,["only"]);return((C=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},F&&{[F]:!0}),Y))).osm[0].changeset)===null||C===void 0?void 0:C.map(w))||[]})}u.listChangesets=E;function T(S,C=!0){return f(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${S}`,{include_discussion:C})).osm[0].changeset.map(w)[0]})}u.getChangeset=T},{"../_osmFetch":17}],24:[function(r,a,u){var f=this&&this.__createBinding||(Object.create?function(E,T,S,C){C===void 0&&(C=S),Object.defineProperty(E,C,{enumerable:!0,get:function(){return T[S]}})}:function(E,T,S,C){C===void 0&&(C=S),E[C]=T[S]}),g=this&&this.__exportStar||function(E,T){for(var S in E)S!=="default"&&!Object.prototype.hasOwnProperty.call(T,S)&&f(T,E,S)};Object.defineProperty(u,"__esModule",{value:!0}),u.createOsmChangeXml=u.parseOsmChangeXml=void 0,g(r("./createChangesetComment"),u),g(r("./getChangesetDiff"),u),g(r("./getChangesets"),u),g(r("./uploadChangeset"),u);var l=r("./_parseOsmChangeXml");Object.defineProperty(u,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var w=r("./_createOsmChangeXml");Object.defineProperty(u,"createOsmChangeXml",{enumerable:!0,get:function(){return w.createOsmChangeXml}})},{"./_createOsmChangeXml":19,"./_parseOsmChangeXml":20,"./createChangesetComment":21,"./getChangesetDiff":22,"./getChangesets":23,"./uploadChangeset":25}],25:[function(r,a,u){var f=this&&this.__awaiter||function(E,T,S,C){function F(Y){return Y instanceof S?Y:new S(function(H){H(Y)})}return new(S||(S=Promise))(function(Y,H){function le(B){try{V(C.next(B))}catch(se){H(se)}}function W(B){try{V(C.throw(B))}catch(se){H(se)}}function V(B){B.done?Y(B.value):F(B.value).then(le,W)}V((C=C.apply(E,T||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.uploadChangeset=void 0;const g=r("../_osmFetch"),l=r("./_createOsmChangeXml");function w(E,T){return f(this,void 0,void 0,function*(){const S=(0,l.createChangesetMetaXml)(E),C=+(yield(0,g.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:S,headers:{"content-type":"application/xml; charset=utf-8"}})),F=(0,l.createOsmChangeXml)(C,T);return yield(0,g.osmFetch)(`/0.6/changeset/${C}/upload`,void 0,{method:"POST",body:F,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,g.osmFetch)(`/0.6/changeset/${C}/close`,void 0,{method:"PUT"}),+C})}u.uploadChangeset=w},{"../_osmFetch":17,"./_createOsmChangeXml":19}],26:[function(r,a,u){var f=this&&this.__awaiter||function(w,E,T,S){function C(F){return F instanceof T?F:new T(function(Y){Y(F)})}return new(T||(T=Promise))(function(F,Y){function H(V){try{W(S.next(V))}catch(B){Y(B)}}function le(V){try{W(S.throw(V))}catch(B){Y(B)}}function W(V){V.done?F(V.value):C(V.value).then(H,le)}W((S=S.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getCapabilities=void 0;const g=r("./_osmFetch");function l(){return f(this,void 0,void 0,function*(){const w=yield(0,g.osmFetch)("/capabilities");return{limits:{maxArea:+w.osm[0].api[0].area[0].$.maximum,maxNoteArea:+w.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+w.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+w.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+w.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+w.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:w.osm[0].policy[0].imagery[0].blacklist.map(T=>T.$.regex)}}})}u.getCapabilities=l},{"./_osmFetch":17}],27:[function(r,a,u){var f=this&&this.__awaiter||function(F,Y,H,le){function W(V){return V instanceof H?V:new H(function(B){B(V)})}return new(H||(H=Promise))(function(V,B){function se(b){try{j(le.next(b))}catch(k){B(k)}}function G(b){try{j(le.throw(b))}catch(k){B(k)}}function j(b){b.done?V(b.value):W(b.value).then(se,G)}j((le=le.apply(F,Y||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getRelationsForElement=u.getWaysForNode=u.getFeatureHistory=u.getFeatureAtVersion=u.getFeatures=u.getFeature=void 0;const g=r("./_osmFetch");function l(F,Y,H){return f(this,void 0,void 0,function*(){const le=H&&F!=="node"?"/full":"";return(yield(0,g.osmFetch)(`/0.6/${F}/${Y}${le}.json`)).elements})}u.getFeature=l;function w(F,Y){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${F}s.json?${F}s=${Y.join(",")}`)).elements})}u.getFeatures=w;function E(F,Y,H){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${F}/${Y}/${H}.json`)).elements[0]})}u.getFeatureAtVersion=E;function T(F,Y){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${F}/${Y}/history.json`)).elements})}u.getFeatureHistory=T;function S(F){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/node/${F}/ways.json`)).elements})}u.getWaysForNode=S;function C(F,Y){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${F}/${Y}/relation.json`)).elements})}u.getRelationsForElement=C},{"./_osmFetch":17}],28:[function(r,a,u){var f=this&&this.__awaiter||function(w,E,T,S){function C(F){return F instanceof T?F:new T(function(Y){Y(F)})}return new(T||(T=Promise))(function(F,Y){function H(V){try{W(S.next(V))}catch(B){Y(B)}}function le(V){try{W(S.throw(V))}catch(B){Y(B)}}function W(V){V.done?F(V.value):C(V.value).then(H,le)}W((S=S.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getMapData=void 0;const g=r("./_osmFetch");function l(w){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/map.json",{bbox:w})).elements})}u.getMapData=l},{"./_osmFetch":17}],29:[function(r,a,u){var f=this&&this.__awaiter||function(w,E,T,S){function C(F){return F instanceof T?F:new T(function(Y){Y(F)})}return new(T||(T=Promise))(function(F,Y){function H(V){try{W(S.next(V))}catch(B){Y(B)}}function le(V){try{W(S.throw(V))}catch(B){Y(B)}}function W(V){V.done?F(V.value):C(V.value).then(H,le)}W((S=S.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getUIdFromDisplayName=void 0;const g=r("./changesets");function l(w){return f(this,void 0,void 0,function*(){const E=yield(0,g.listChangesets)({display_name:w});if(!E.length)throw new Error("Could not get uid because the user has never edited the map");return E[0].uid})}u.getUIdFromDisplayName=l},{"./changesets":24}],30:[function(r,a,u){var f=this&&this.__awaiter||function(E,T,S,C){function F(Y){return Y instanceof S?Y:new S(function(H){H(Y)})}return new(S||(S=Promise))(function(Y,H){function le(B){try{V(C.next(B))}catch(se){H(se)}}function W(B){try{V(C.throw(B))}catch(se){H(se)}}function V(B){B.done?Y(B.value):F(B.value).then(le,W)}V((C=C.apply(E,T||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getUsers=u.getUser=void 0;const g=r("./_osmFetch");function l(E){return f(this,void 0,void 0,function*(){const T=yield(0,g.osmFetch)(`/0.6/user/${E==="me"?"details":E}.json`);return Object.assign(Object.assign({},T.user),{account_created:new Date(T.user.account_created)})})}u.getUser=l;function w(E){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/users",{users:E})).users.map(S=>Object.assign(Object.assign({},S),{account_created:new Date(S.account_created)}))})}u.getUsers=w},{"./_osmFetch":17}],31:[function(r,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E),Object.defineProperty(l,T,{enumerable:!0,get:function(){return w[E]}})}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),g=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),g(r("./changesets"),u),g(r("./notes"),u),g(r("./getCapabilities"),u),g(r("./getFeature"),u),g(r("./getMapData"),u),g(r("./getUIdFromDisplayName"),u),g(r("./getUser"),u)},{"./changesets":24,"./getCapabilities":26,"./getFeature":27,"./getMapData":28,"./getUIdFromDisplayName":29,"./getUser":30,"./notes":33}],32:[function(r,a,u){var f=this&&this.__awaiter||function(C,F,Y,H){function le(W){return W instanceof Y?W:new Y(function(V){V(W)})}return new(Y||(Y=Promise))(function(W,V){function B(j){try{G(H.next(j))}catch(b){V(b)}}function se(j){try{G(H.throw(j))}catch(b){V(b)}}function G(j){j.done?W(j.value):le(j.value).then(B,se)}G((H=H.apply(C,F||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getNote=u.getNotesForArea=u.getNotesForQuery=void 0;const g=r("../_osmFetch"),l=C=>{const[F,Y]=C.geometry.coordinates;return Object.assign(Object.assign({},C.properties),{location:{lat:Y,lng:F}})};function w(C,F){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/notes${F?"/search":""}.json`,C)).features.map(l)})}function E(C){return w(C,!0)}u.getNotesForQuery=E;function T(C){return w({bbox:C},!1)}u.getNotesForArea=T;function S(C){return f(this,void 0,void 0,function*(){const F=yield(0,g.osmFetch)(`/0.6/notes/${C}.json`);return l(F)})}u.getNote=S},{"../_osmFetch":17}],33:[function(r,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E),Object.defineProperty(l,T,{enumerable:!0,get:function(){return w[E]}})}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),g=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),g(r("./getNotes"),u),g(r("./noteActions"),u)},{"./getNotes":32,"./noteActions":34}],34:[function(r,a,u){var f=this&&this.__awaiter||function(T,S,C,F){function Y(H){return H instanceof C?H:new C(function(le){le(H)})}return new(C||(C=Promise))(function(H,le){function W(se){try{B(F.next(se))}catch(G){le(G)}}function V(se){try{B(F.throw(se))}catch(G){le(G)}}function B(se){se.done?H(se.value):Y(se.value).then(W,V)}B((F=F.apply(T,S||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.reopenNote=u.commentOnNote=u.createNote=void 0;const g=r("../_osmFetch");function l(T,S,C){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)("/0.6/notes",{lat:T,lon:S,text:C})})}u.createNote=l;function w(T,S){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${T}/comment`,{text:S})})}u.commentOnNote=w;function E(T,S){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${T}/reopen`,{text:S})})}u.reopenNote=E},{"../_osmFetch":17}],35:[function(r,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.createPopup=void 0;function f(g){let l=!1;return new Promise((w,E)=>{const[T,S]=[600,550],C=Object.entries({width:T,height:S,left:window.screen.width/2-T/2,top:window.screen.height/2-S/2}).map(([H,le])=>`${H}=${le}`).join(","),F=window.open("about:blank","oauth_window",C);if(!F)throw new Error("Popup was blocked");F.location=g,window.authComplete=H=>{w(H),l=!0};const Y=setInterval(()=>{F.closed&&(l||E(new Error("Cancelled")),clearInterval(Y))},500)})}u.createPopup=f},{}],36:[function(r,a,u){var f=this&&this.__awaiter||function(w,E,T,S){function C(F){return F instanceof T?F:new T(function(Y){Y(F)})}return new(T||(T=Promise))(function(F,Y){function H(V){try{W(S.next(V))}catch(B){Y(B)}}function le(V){try{W(S.throw(V))}catch(B){Y(B)}}function W(V){V.done?F(V.value):C(V.value).then(H,le)}W((S=S.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.exchangeCode=void 0;const g=r("./helpers");function l(w,{options:E,pkceVerifier:T,state:S}){return f(this,void 0,void 0,function*(){const C=new URL(w).searchParams,F=C.get("error_description"),Y=C.get("code"),H=C.get("state");if(F)throw new Error(F);if(!Y)throw new Error("No code in OAuth response");if(!T||!S)throw new Error("No login in progress");if(S!==H)throw new Error("State Mismatch");const le={grant_type:"authorization_code",code:Y,redirect_uri:E.redirectUrl,client_id:E.clientId,code_verifier:T},W=`${(0,g.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(le).toString()}`,B=yield(yield fetch(W,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in B)throw new Error(B.error_description);const se={issuedAt:new Date(B.created_at*1e3).toISOString(),accessToken:B.access_token,scopes:B.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(se)),delete window.authComplete,se})}u.exchangeCode=l},{"./helpers":37}],37:[function(r,a,u){var f=this&&this.__awaiter||function(T,S,C,F){function Y(H){return H instanceof C?H:new C(function(le){le(H)})}return new(C||(C=Promise))(function(H,le){function W(se){try{B(F.next(se))}catch(G){le(G)}}function V(se){try{B(F.throw(se))}catch(G){le(G)}}function B(se){se.done?H(se.value):Y(se.value).then(W,V)}B((F=F.apply(T,S||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getOAuthBaseUrl=u.getRandomString=u.sha256=void 0;const g=r("../config");function l(T){return f(this,void 0,void 0,function*(){const S=new TextEncoder().encode(T),C=yield window.crypto.subtle.digest("SHA-256",S);return btoa(String.fromCharCode(...new Uint8Array(C))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}u.sha256=l;function w(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(T=>`0${T.toString(16)}`.slice(-2)).join("")}u.getRandomString=w;function E(){let T=(0,g.getConfig)().apiUrl;return T==="https://api.openstreetmap.org"&&(T="https://www.openstreetmap.org"),T}u.getOAuthBaseUrl=E},{"../config":40}],38:[function(r,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E),Object.defineProperty(l,T,{enumerable:!0,get:function(){return w[E]}})}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),g=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),g(r("./oauth2"),u)},{"./oauth2":39}],39:[function(r,a,u){var f=this&&this.__awaiter||function(F,Y,H,le){function W(V){return V instanceof H?V:new H(function(B){B(V)})}return new(H||(H=Promise))(function(V,B){function se(b){try{j(le.next(b))}catch(k){B(k)}}function G(b){try{j(le.throw(b))}catch(k){B(k)}}function j(b){b.done?V(b.value):W(b.value).then(se,G)}j((le=le.apply(F,Y||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.logout=u.isLoggedIn=u.getAuthToken=u.authReady=u.login=void 0;const g=r("./createPopup"),l=r("./exchangeCode"),w=r("./helpers");function E(F){return f(this,void 0,void 0,function*(){if(!F.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!F.clientId)throw new Error("You must include the 'clientId' option");if(!F.scopes)throw new Error("You must include the 'scopes' option");const Y=(0,w.getRandomString)(),H=(0,w.getRandomString)(),le=yield(0,w.sha256)(H),W={scope:F.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:Y,redirect_uri:F.redirectUrl,client_id:F.clientId,code_challenge_method:"S256",code_challenge:le},V=`${(0,w.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(W).toString()}`,B={state:Y,pkceVerifier:H,options:F};if(F.mode==="popup"){const se=yield(0,g.createPopup)(V);return(0,l.exchangeCode)(se,B)}if(F.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(B)),window.location.replace(V);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}u.login=E,u.authReady=(()=>f(void 0,void 0,void 0,function*(){var F;if(typeof window>"u")return;const Y=window.location.href,H=localStorage.getItem("__osmAuthTemp");if(new URL(Y).searchParams.get("code")){if(!((F=window.opener)===null||F===void 0)&&F.authComplete)window.opener.authComplete(Y),window.close();else if(H)try{const le=JSON.parse(H);yield(0,l.exchangeCode)(Y,le),localStorage.removeItem("__osmAuthTemp")}catch(le){console.error("OSM Auth Error",le)}}}))();const T=()=>{try{const F=localStorage.getItem("__osmAuth");return F?JSON.parse(F).accessToken:void 0}catch{return}};u.getAuthToken=T;const S=()=>!!(0,u.getAuthToken)();u.isLoggedIn=S;function C(){localStorage.removeItem("__osmAuth")}u.logout=C},{"./createPopup":35,"./exchangeCode":36,"./helpers":37}],40:[function(r,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.configure=u.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},g=()=>f;u.getConfig=g;function l(w){Object.assign(f,w)}u.configure=l},{}],41:[function(r,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E),Object.defineProperty(l,T,{enumerable:!0,get:function(){return w[E]}})}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),g=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),r("./polyfill"),g(r("./api"),u),g(r("./auth"),u),g(r("./config"),u),g(r("./types"),u)},{"./api":31,"./auth":38,"./config":40,"./polyfill":42,"./types":46}],42:[function(r,a,u){if(typeof fetch>"u")try{r("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],43:[function(r,a,u){Object.defineProperty(u,"__esModule",{value:!0})},{}],44:[function(r,a,u){arguments[4][43][0].apply(u,arguments)},{dup:43}],45:[function(r,a,u){arguments[4][43][0].apply(u,arguments)},{dup:43}],46:[function(r,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E),Object.defineProperty(l,T,{enumerable:!0,get:function(){return w[E]}})}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),g=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),g(r("./changesets"),u),g(r("./features"),u),g(r("./general"),u),g(r("./notes"),u),g(r("./user"),u)},{"./changesets":43,"./features":44,"./general":45,"./notes":47,"./user":48}],47:[function(r,a,u){arguments[4][43][0].apply(u,arguments)},{dup:43}],48:[function(r,a,u){arguments[4][43][0].apply(u,arguments)},{dup:43}]},{},[41])(41)})})(b5);const JT=()=>{const[e,t]=pt.useState(!1);pt.useEffect(()=>{t(To.isLoggedIn())},[]);const r=pt.useCallback(()=>{(async()=>(await To.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(To.isLoggedIn()),window.location.reload()))()},[]),a=pt.useCallback(()=>{(async()=>(To.logout(),t(!1)))()},[]);return Rt(Ss,{children:e?Rt("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):Rt("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:r,children:"login"})})},E5=()=>{const[e,t]=pt.useState(!1),[r,a]=pt.useState(void 0);return pt.useEffect(()=>{t(To.isLoggedIn())},[]),pt.useEffect(()=>{e&&(async()=>{const u=await To.getUser("me");a(u)})()},[e]),Rt(Ss,{children:r?Rt("img",{style:{width:"44px",height:"44px"},src:r.img.href,alt:r.display_name,title:r.display_name}):Rt("img",{})})},S5=()=>{const[e,t]=pt.useState(!1),[r,a]=pt.useState(void 0);return pt.useEffect(()=>{t(To.isLoggedIn())},[]),pt.useEffect(()=>{e&&(async()=>{const u=await To.getUser("me");a(u)})()},[e]),Zn("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[Zn("div",{children:[Rt("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),r?Zn("span",{style:{marginLeft:"10px"},children:["Hi ",r==null?void 0:r.display_name,", You have"," ",r==null?void 0:r.changesets.count," changesets."]}):Rt("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),Zn("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[Rt("div",{children:Rt(E5,{})}),Rt("div",{children:Rt(JT,{})})]})]})},QT=({feature:e})=>{var r;const t=JSON.parse((r=e.properties)==null?void 0:r.center);return Zn(Ss,{children:[Zn("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",Zn("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},T5=({feature:e})=>Rt(Ss,{children:e.properties&&Object.keys(e.properties).map(t=>{var r;if(t.startsWith("addr"))return Zn("div",{className:t,children:[Rt("span",{className:"underline",children:t})," = ",Rt("span",{children:(r=e.properties)==null?void 0:r[t]})]})})});function cf(e,t,r){return parseInt(e.substr(t,r),16)}function eC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function Gy(e,t,r){return r=r<0?r+6:r>6?r-6:r,eC(255*(r<1?e+(t-e)*r:r<3?t:r<4?e+(t-e)*(4-r):e))}function C5(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const r=e.length;if(r<6){const a=e[1],u=e[2],f=e[3],g=e[4]||"";t="#"+a+a+u+u+f+f+g+g}return(r==7||r>8)&&(t=e),t}}function A5(e,t,r){let a;if(t==0){const u=eC(r*255);a=u+u+u}else{const u=r<=.5?r*(t+1):r+t-r*t,f=r*2-u;a=Gy(f,u,e*6+2)+Gy(f,u,e*6)+Gy(f,u,e*6-2)}return"#"+a}function rf(e,t,r){const a=[.55,.5,.5,.46,.6,.55,.55],u=a[e*6+.5|0];return r=r<.5?r*u*2:u+(r-.5)*(1-u)*2,A5(e,t,r)}const I5=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},Xb={V:"jdenticon_config",n:"config"};var P5={};function k5(e,t){const r=typeof e=="object"&&e||P5[Xb.n]||I5[Xb.V]||{},a=r.lightness||{},u=r.saturation||{},f="color"in u?u.color:u,g=u.grayscale,l=r.backColor,w=r.padding;function E(S,C){let F=a[S];return F&&F.length>1||(F=C),function(Y){return Y=F[0]+Y*(F[1]-F[0]),Y<0?0:Y>1?1:Y}}function T(S){const C=r.hues;let F;return C&&C.length>0&&(F=C[0|.999*S*C.length]),typeof F=="number"?(F/360%1+1)%1:S}return{W:T,o:typeof f=="number"?f:.5,D:typeof g=="number"?g:0,p:E("color",[.4,.8]),F:E("grayscale",[.3,.9]),G:C5(l),X:typeof e=="number"?e:typeof w=="number"?w:t}}let up=class{constructor(t,r){this.x=t,this.y=r}};class tC{constructor(t,r,a,u){this.q=t,this.t=r,this.H=a,this.Y=u}I(t,r,a,u){const f=this.q+this.H,g=this.t+this.H,l=this.Y;return l===1?new up(f-r-(u||0),this.t+t):l===2?new up(f-t-(a||0),g-r-(u||0)):l===3?new up(this.q+r,g-t-(a||0)):new up(this.q+t,this.t+r)}}const M5=new tC(0,0,0,0);class z5{constructor(t){this.J=t,this.u=M5}g(t,r){const a=r?-2:2,u=[];for(let f=r?t.length-2:0;f<t.length&&f>=0;f+=a)u.push(this.u.I(t[f],t[f+1]));this.J.g(u)}h(t,r,a,u){const f=this.u.I(t,r,a,a);this.J.h(f,a,u)}i(t,r,a,u,f){this.g([t,r,t+a,r,t+a,r+u,t,r+u],f)}j(t,r,a,u,f,g){const l=[t+a,r,t+a,r+u,t,r+u,t,r];l.splice((f||0)%4*2,2),this.g(l,g)}K(t,r,a,u,f){this.g([t+a/2,r,t+a,r+u/2,t+a/2,r+u,t,r+u/2],f)}}function L5(e,t,r,a){e=e%14;let u,f,g,l,w,E;e?e==1?(g=0|r*.5,l=0|r*.8,t.j(r-g,0,g,l,2)):e==2?(g=0|r/3,t.i(g,g,r-g,r-g)):e==3?(w=r*.1,E=r<6?1:r<8?2:0|r*.25,w=w>1?0|w:w>.5?1:w,t.i(E,E,r-w-E,r-w-E)):e==4?(f=0|r*.15,g=0|r*.5,t.h(r-g-f,r-g-f,g)):e==5?(w=r*.1,E=w*4,E>3&&(E=0|E),t.i(0,0,r,r),t.g([E,E,r-w,E,E+(r-E-w)/2,r-w],!0)):e==6?t.g([0,0,r,0,r,r*.7,r*.4,r*.4,r*.7,r,0,r]):e==7?t.j(r/2,r/2,r/2,r/2,3):e==8?(t.i(0,0,r,r/2),t.i(0,r/2,r/2,r/2),t.j(r/2,r/2,r/2,r/2,1)):e==9?(w=r*.14,E=r<4?1:r<6?2:0|r*.35,w=r<8?w:0|w,t.i(0,0,r,r),t.i(E,E,r-E-w,r-E-w,!0)):e==10?(w=r*.12,E=w*3,t.i(0,0,r,r),t.h(E,E,r-w-E,!0)):e==11?t.j(r/2,r/2,r/2,r/2,3):e==12?(f=r*.25,t.i(0,0,r,r),t.K(f,f,r-f,r-f,!0)):!a&&(f=r*.4,g=r*1.2,t.h(f,f,g)):(u=r*.42,t.g([0,0,r,0,r,r-u*2,r-u,r,0,r]))}function Yb(e,t,r){e=e%4;let a;e?e==1?t.j(0,r/2,r,r/2,0):e==2?t.K(0,0,r,r):(a=r/6,t.h(a,a,r-2*a)):t.j(0,0,r,r,0)}function O5(e,t){return e=t.W(e),[rf(e,t.D,t.F(0)),rf(e,t.o,t.p(.5)),rf(e,t.D,t.F(1)),rf(e,t.o,t.p(1)),rf(e,t.o,t.p(0))]}function R5(e,t,r){const a=k5(r,.08);a.G&&e.m(a.G);let u=e.k;const f=.5+u*a.X|0;u-=f*2;const g=new z5(e),l=0|u/4,w=0|f+u/2-l*2,E=0|f+u/2-l*2;function T(le,W,V,B,se){const G=cf(t,V,1);let j=B?cf(t,B,1):0;e.L(C[F[le]]);for(let b=0;b<se.length;b++)g.u=new tC(w+se[b][0]*l,E+se[b][1]*l,l,j++%4),W(G,g,l,b);e.M()}const S=cf(t,-7)/268435455,C=O5(S,a),F=[];let Y;function H(le){if(le.indexOf(Y)>=0){for(let W=0;W<le.length;W++)if(F.indexOf(le[W])>=0)return!0}}for(let le=0;le<3;le++)Y=cf(t,8+le,1)%C.length,(H([0,4])||H([2,3]))&&(Y=1),F.push(Y);T(0,Yb,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),T(1,Yb,4,5,[[0,0],[3,0],[3,3],[0,3]]),T(2,L5,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function F5(e){var a=0,u=0,f=encodeURI(e)+"%80",g=[],l,w=[],E=1732584193,T=4023233417,S=~E,C=~T,F=3285377520,Y=[E,T,S,C,F],H=0,le="";function W(V,B){return V<<B|V>>>32-B}for(;a<f.length;u++)g[u>>2]=g[u>>2]|(f[a]=="%"?parseInt(f.substring(a+1,a+=3),16):f.charCodeAt(a++))<<(3-(u&3))*8;for(l=((u+7>>6)+1)*16,g[l-1]=u*8-8;H<l;H+=16){for(a=0;a<80;a++)u=W(E,5)+F+(a<20?(T&S^~T&C)+1518500249:a<40?(T^S^C)+1859775393:a<60?(T&S^T&C^S&C)+2400959708:(T^S^C)+3395469782)+(w[a]=a<16?g[H+a]|0:W(w[a-3]^w[a-8]^w[a-14]^w[a-16],1)),F=C,C=S,S=W(T,30),T=E,E=u;Y[0]=E=Y[0]+E|0,Y[1]=T=Y[1]+T|0,Y[2]=S=Y[2]+S|0,Y[3]=C=Y[3]+C|0,Y[4]=F=Y[4]+F|0}for(a=0;a<40;a++)le+=(Y[a>>3]>>>(7-(a&7))*4&15).toString(16);return le}function j5(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function B5(e){return F5(e==null?"":""+e)}function bc(e){return(e*10+.5|0)/10}class D5{constructor(){this.v=""}g(t){let r="";for(let a=0;a<t.length;a++)r+=(a?"L":"M")+bc(t[a].x)+" "+bc(t[a].y);this.v+=r+"Z"}h(t,r,a){const u=a?0:1,f=bc(r/2),g=bc(r),l="a"+f+","+f+" 0 1,"+u+" ";this.v+="M"+bc(t.x)+" "+bc(t.y+r/2)+l+g+",0"+l+-g+",0"}}class N5{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const r=/^(#......)(..)?/.exec(t),a=r[2]?cf(r[2],0)/255:1;this.N.m(r[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new D5)}M(){}g(t){this.A.g(t)}h(t,r,a){this.A.h(t,r,a)}finish(){const t=this.B;for(let r in t)t.hasOwnProperty(r)&&this.N.O(r,t[r].v)}}const U5={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class $5{constructor(t){this.k=t,this.C='<svg xmlns="'+U5.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,r){r&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+r.toFixed(2)+'"/>')}O(t,r){this.C+='<path fill="'+t+'" d="'+r+'"/>'}toString(){return this.C+"</svg>"}}function V5(e,t,r){const a=new $5(t);return R5(new N5(a),j5(e)||B5(e),r),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const G5=({feature:e,size:t})=>e.properties===null?null:Rt(Ss,{children:e.properties.userIconHref.length>0?Rt("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):Rt("span",{dangerouslySetInnerHTML:{__html:V5(e.properties.user||"noname",t)}})}),W5=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?Zn("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Z5={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const H5=({viewState:e})=>{const[t,r]=pt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return pt.useEffect(()=>{r(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),Rt(Ss,{children:e&&t&&Zn("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[Rt(Qs,{icon:Z5,style:{padding:"0px 3px"}}),Rt("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var nC={};class zi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let a=0;for(let u=0;u<this._n&&u<32;u++){const f=r[u],g=t+f,l=Math.abs(t)<Math.abs(f)?t-(g-f):f-(g-t);l&&(r[a++]=l),t=g}return r[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let r=this._n,a,u,f,g=0;if(r>0){for(g=t[--r];r>0&&(a=g,u=t[--r],g=a+u,f=u-(g-a),!f););r>0&&(f<0&&t[r-1]<0||f>0&&t[r-1]>0)&&(u=f*2,a=g+u,u==a-g&&(g=a))}return g}}function*X5(e){for(const t of e)yield*t}function rC(e){return Array.from(X5(e))}function Gc(e,t,r){e=+e,t=+t,r=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+r;for(var a=-1,u=Math.max(0,Math.ceil((t-e)/r))|0,f=new Array(u);++a<u;)f[a]=e+a*r;return f}var mn=1e-6,Qf=1e-12,Fn=Math.PI,$r=Fn/2,vm=Fn/4,Ji=Fn*2,fr=180/Fn,gn=Fn/180,Vn=Math.abs,vh=Math.atan,Qi=Math.atan2,sn=Math.cos,cp=Math.ceil,iC=Math.exp,Tv=Math.hypot,_m=Math.log,Wy=Math.pow,Qt=Math.sin,Yo=Math.sign||function(e){return e>0?1:e<0?-1:0},ci=Math.sqrt,f_=Math.tan;function oC(e){return e>1?0:e<-1?Fn:Math.acos(e)}function eo(e){return e>1?$r:e<-1?-$r:Math.asin(e)}function Kb(e){return(e=Qt(e/2))*e}function Lr(){}function xm(e,t){e&&Jb.hasOwnProperty(e.type)&&Jb[e.type](e,t)}var qb={Feature:function(e,t){xm(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,a=-1,u=r.length;++a<u;)xm(r[a].geometry,t)}},Jb={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,a=-1,u=r.length;++a<u;)e=r[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,a=-1,u=r.length;++a<u;)Cv(r[a],t,0)},Polygon:function(e,t){Qb(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,a=-1,u=r.length;++a<u;)Qb(r[a],t)},GeometryCollection:function(e,t){for(var r=e.geometries,a=-1,u=r.length;++a<u;)xm(r[a],t)}};function Cv(e,t,r){var a=-1,u=e.length-r,f;for(t.lineStart();++a<u;)f=e[a],t.point(f[0],f[1],f[2]);t.lineEnd()}function Qb(e,t){var r=-1,a=e.length;for(t.polygonStart();++r<a;)Cv(e[r],t,1);t.polygonEnd()}function xs(e,t){e&&qb.hasOwnProperty(e.type)?qb[e.type](e,t):xm(e,t)}var wm=new zi,bm=new zi,sC,aC,Av,Iv,Pv,ea={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){wm=new zi,ea.lineStart=Y5,ea.lineEnd=K5},polygonEnd:function(){var e=+wm;bm.add(e<0?Ji+e:e),this.lineStart=this.lineEnd=this.point=Lr},sphere:function(){bm.add(Ji)}};function Y5(){ea.point=q5}function K5(){lC(sC,aC)}function q5(e,t){ea.point=lC,sC=e,aC=t,e*=gn,t*=gn,Av=e,Iv=sn(t=t/2+vm),Pv=Qt(t)}function lC(e,t){e*=gn,t*=gn,t=t/2+vm;var r=e-Av,a=r>=0?1:-1,u=a*r,f=sn(t),g=Qt(t),l=Pv*g,w=Iv*f+l*sn(u),E=l*a*Qt(u);wm.add(Qi(E,w)),Av=e,Iv=f,Pv=g}function J5(e){return bm=new zi,xs(e,ea),bm*2}function Em(e){return[Qi(e[1],e[0]),eo(e[2])]}function Ru(e){var t=e[0],r=e[1],a=sn(r);return[a*sn(t),a*Qt(t),Qt(r)]}function hp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function uh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Zy(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function fp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Sm(e){var t=ci(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Mr,ao,Nr,Eo,wu,uC,cC,Qc,If,dl,Ba,Aa={point:kv,lineStart:e2,lineEnd:t2,polygonStart:function(){Aa.point=fC,Aa.lineStart=Q5,Aa.lineEnd=ez,If=new zi,ea.polygonStart()},polygonEnd:function(){ea.polygonEnd(),Aa.point=kv,Aa.lineStart=e2,Aa.lineEnd=t2,wm<0?(Mr=-(Nr=180),ao=-(Eo=90)):If>mn?Eo=90:If<-mn&&(ao=-90),Ba[0]=Mr,Ba[1]=Nr},sphere:function(){Mr=-(Nr=180),ao=-(Eo=90)}};function kv(e,t){dl.push(Ba=[Mr=e,Nr=e]),t<ao&&(ao=t),t>Eo&&(Eo=t)}function hC(e,t){var r=Ru([e*gn,t*gn]);if(Qc){var a=uh(Qc,r),u=[a[1],-a[0],0],f=uh(u,a);Sm(f),f=Em(f);var g=e-wu,l=g>0?1:-1,w=f[0]*fr*l,E,T=Vn(g)>180;T^(l*wu<w&&w<l*e)?(E=f[1]*fr,E>Eo&&(Eo=E)):(w=(w+360)%360-180,T^(l*wu<w&&w<l*e)?(E=-f[1]*fr,E<ao&&(ao=E)):(t<ao&&(ao=t),t>Eo&&(Eo=t))),T?e<wu?bo(Mr,e)>bo(Mr,Nr)&&(Nr=e):bo(e,Nr)>bo(Mr,Nr)&&(Mr=e):Nr>=Mr?(e<Mr&&(Mr=e),e>Nr&&(Nr=e)):e>wu?bo(Mr,e)>bo(Mr,Nr)&&(Nr=e):bo(e,Nr)>bo(Mr,Nr)&&(Mr=e)}else dl.push(Ba=[Mr=e,Nr=e]);t<ao&&(ao=t),t>Eo&&(Eo=t),Qc=r,wu=e}function e2(){Aa.point=hC}function t2(){Ba[0]=Mr,Ba[1]=Nr,Aa.point=kv,Qc=null}function fC(e,t){if(Qc){var r=e-wu;If.add(Vn(r)>180?r+(r>0?360:-360):r)}else uC=e,cC=t;ea.point(e,t),hC(e,t)}function Q5(){ea.lineStart()}function ez(){fC(uC,cC),ea.lineEnd(),Vn(If)>mn&&(Mr=-(Nr=180)),Ba[0]=Mr,Ba[1]=Nr,Qc=null}function bo(e,t){return(t-=e)<0?t+360:t}function tz(e,t){return e[0]-t[0]}function n2(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function nz(e){var t,r,a,u,f,g,l;if(Eo=Nr=-(Mr=ao=1/0),dl=[],xs(e,Aa),r=dl.length){for(dl.sort(tz),t=1,a=dl[0],f=[a];t<r;++t)u=dl[t],n2(a,u[0])||n2(a,u[1])?(bo(a[0],u[1])>bo(a[0],a[1])&&(a[1]=u[1]),bo(u[0],a[1])>bo(a[0],a[1])&&(a[0]=u[0])):f.push(a=u);for(g=-1/0,r=f.length-1,t=0,a=f[r];t<=r;a=u,++t)u=f[t],(l=bo(a[1],u[0]))>g&&(g=l,Mr=u[0],Nr=a[1])}return dl=Ba=null,Mr===1/0||ao===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mr,ao],[Nr,Eo]]}var hf,Tm,Cm,Am,Im,Pm,km,Mm,Mv,zv,Lv,dC,pC,Xi,Yi,Ki,Es={sphere:Lr,point:d_,lineStart:r2,lineEnd:i2,polygonStart:function(){Es.lineStart=oz,Es.lineEnd=sz},polygonEnd:function(){Es.lineStart=r2,Es.lineEnd=i2}};function d_(e,t){e*=gn,t*=gn;var r=sn(t);cd(r*sn(e),r*Qt(e),Qt(t))}function cd(e,t,r){++hf,Cm+=(e-Cm)/hf,Am+=(t-Am)/hf,Im+=(r-Im)/hf}function r2(){Es.point=rz}function rz(e,t){e*=gn,t*=gn;var r=sn(t);Xi=r*sn(e),Yi=r*Qt(e),Ki=Qt(t),Es.point=iz,cd(Xi,Yi,Ki)}function iz(e,t){e*=gn,t*=gn;var r=sn(t),a=r*sn(e),u=r*Qt(e),f=Qt(t),g=Qi(ci((g=Yi*f-Ki*u)*g+(g=Ki*a-Xi*f)*g+(g=Xi*u-Yi*a)*g),Xi*a+Yi*u+Ki*f);Tm+=g,Pm+=g*(Xi+(Xi=a)),km+=g*(Yi+(Yi=u)),Mm+=g*(Ki+(Ki=f)),cd(Xi,Yi,Ki)}function i2(){Es.point=d_}function oz(){Es.point=az}function sz(){mC(dC,pC),Es.point=d_}function az(e,t){dC=e,pC=t,e*=gn,t*=gn,Es.point=mC;var r=sn(t);Xi=r*sn(e),Yi=r*Qt(e),Ki=Qt(t),cd(Xi,Yi,Ki)}function mC(e,t){e*=gn,t*=gn;var r=sn(t),a=r*sn(e),u=r*Qt(e),f=Qt(t),g=Yi*f-Ki*u,l=Ki*a-Xi*f,w=Xi*u-Yi*a,E=Tv(g,l,w),T=eo(E),S=E&&-T/E;Mv.add(S*g),zv.add(S*l),Lv.add(S*w),Tm+=T,Pm+=T*(Xi+(Xi=a)),km+=T*(Yi+(Yi=u)),Mm+=T*(Ki+(Ki=f)),cd(Xi,Yi,Ki)}function lz(e){hf=Tm=Cm=Am=Im=Pm=km=Mm=0,Mv=new zi,zv=new zi,Lv=new zi,xs(e,Es);var t=+Mv,r=+zv,a=+Lv,u=Tv(t,r,a);return u<Qf&&(t=Pm,r=km,a=Mm,Tm<mn&&(t=Cm,r=Am,a=Im),u=Tv(t,r,a),u<Qf)?[NaN,NaN]:[Qi(r,t)*fr,eo(a/u)*fr]}function Ec(e){return function(){return e}}function Ov(e,t){function r(a,u){return a=e(a,u),t(a[0],a[1])}return e.invert&&t.invert&&(r.invert=function(a,u){return a=t.invert(a,u),a&&e.invert(a[0],a[1])}),r}function Rv(e,t){return[Vn(e)>Fn?e+Math.round(-e/Ji)*Ji:e,t]}Rv.invert=Rv;function p_(e,t,r){return(e%=Ji)?t||r?Ov(s2(e),a2(t,r)):s2(e):t||r?a2(t,r):Rv}function o2(e){return function(t,r){return t+=e,[t>Fn?t-Ji:t<-Fn?t+Ji:t,r]}}function s2(e){var t=o2(e);return t.invert=o2(-e),t}function a2(e,t){var r=sn(e),a=Qt(e),u=sn(t),f=Qt(t);function g(l,w){var E=sn(w),T=sn(l)*E,S=Qt(l)*E,C=Qt(w),F=C*r+T*a;return[Qi(S*u-F*f,T*r-C*a),eo(F*u+S*f)]}return g.invert=function(l,w){var E=sn(w),T=sn(l)*E,S=Qt(l)*E,C=Qt(w),F=C*u-S*f;return[Qi(S*u+C*f,T*r+F*a),eo(F*r-T*a)]},g}function gC(e){e=p_(e[0]*gn,e[1]*gn,e.length>2?e[2]*gn:0);function t(r){return r=e(r[0]*gn,r[1]*gn),r[0]*=fr,r[1]*=fr,r}return t.invert=function(r){return r=e.invert(r[0]*gn,r[1]*gn),r[0]*=fr,r[1]*=fr,r},t}function yC(e,t,r,a,u,f){if(r){var g=sn(t),l=Qt(t),w=a*r;u==null?(u=t+a*Ji,f=t-w/2):(u=l2(g,u),f=l2(g,f),(a>0?u<f:u>f)&&(u+=a*Ji));for(var E,T=u;a>0?T>f:T<f;T-=w)E=Em([g,-l*sn(T),-l*Qt(T)]),e.point(E[0],E[1])}}function l2(e,t){t=Ru(t),t[0]-=e,Sm(t);var r=oC(-t[1]);return((-t[2]<0?-r:r)+Ji-mn)%Ji}function uz(){var e=Ec([0,0]),t=Ec(90),r=Ec(6),a,u,f={point:g};function g(w,E){a.push(w=u(w,E)),w[0]*=fr,w[1]*=fr}function l(){var w=e.apply(this,arguments),E=t.apply(this,arguments)*gn,T=r.apply(this,arguments)*gn;return a=[],u=p_(-w[0]*gn,-w[1]*gn,0).invert,yC(f,E,T,1),w={type:"Polygon",coordinates:[a]},a=u=null,w}return l.center=function(w){return arguments.length?(e=typeof w=="function"?w:Ec([+w[0],+w[1]]),l):e},l.radius=function(w){return arguments.length?(t=typeof w=="function"?w:Ec(+w),l):t},l.precision=function(w){return arguments.length?(r=typeof w=="function"?w:Ec(+w),l):r},l}function vC(){var e=[],t;return{point:function(r,a,u){t.push([r,a,u])},lineStart:function(){e.push(t=[])},lineEnd:Lr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Op(e,t){return Vn(e[0]-t[0])<mn&&Vn(e[1]-t[1])<mn}function dp(e,t,r,a){this.x=e,this.z=t,this.o=r,this.e=a,this.v=!1,this.n=this.p=null}function _C(e,t,r,a,u){var f=[],g=[],l,w;if(e.forEach(function(Y){if(!((H=Y.length-1)<=0)){var H,le=Y[0],W=Y[H],V;if(Op(le,W)){if(!le[2]&&!W[2]){for(u.lineStart(),l=0;l<H;++l)u.point((le=Y[l])[0],le[1]);u.lineEnd();return}W[0]+=2*mn}f.push(V=new dp(le,Y,null,!0)),g.push(V.o=new dp(le,null,V,!1)),f.push(V=new dp(W,Y,null,!1)),g.push(V.o=new dp(W,null,V,!0))}}),!!f.length){for(g.sort(t),u2(f),u2(g),l=0,w=g.length;l<w;++l)g[l].e=r=!r;for(var E=f[0],T,S;;){for(var C=E,F=!0;C.v;)if((C=C.n)===E)return;T=C.z,u.lineStart();do{if(C.v=C.o.v=!0,C.e){if(F)for(l=0,w=T.length;l<w;++l)u.point((S=T[l])[0],S[1]);else a(C.x,C.n.x,1,u);C=C.n}else{if(F)for(T=C.p.z,l=T.length-1;l>=0;--l)u.point((S=T[l])[0],S[1]);else a(C.x,C.p.x,-1,u);C=C.p}C=C.o,T=C.z,F=!F}while(!C.v);u.lineEnd()}}}function u2(e){if(t=e.length){for(var t,r=0,a=e[0],u;++r<t;)a.n=u=e[r],u.p=a,a=u;a.n=u=e[0],u.p=a}}function Hy(e){return Vn(e[0])<=Fn?e[0]:Yo(e[0])*((Vn(e[0])+Fn)%Ji-Fn)}function xC(e,t){var r=Hy(t),a=t[1],u=Qt(a),f=[Qt(r),-sn(r),0],g=0,l=0,w=new zi;u===1?a=$r+mn:u===-1&&(a=-$r-mn);for(var E=0,T=e.length;E<T;++E)if(C=(S=e[E]).length)for(var S,C,F=S[C-1],Y=Hy(F),H=F[1]/2+vm,le=Qt(H),W=sn(H),V=0;V<C;++V,Y=se,le=j,W=b,F=B){var B=S[V],se=Hy(B),G=B[1]/2+vm,j=Qt(G),b=sn(G),k=se-Y,U=k>=0?1:-1,X=U*k,K=X>Fn,de=le*j;if(w.add(Qi(de*U*Qt(X),W*b+de*sn(X))),g+=K?k+U*Ji:k,K^Y>=r^se>=r){var ve=uh(Ru(F),Ru(B));Sm(ve);var we=uh(f,ve);Sm(we);var ee=(K^k>=0?-1:1)*eo(we[2]);(a>ee||a===ee&&(ve[0]||ve[1]))&&(l+=K^k>=0?1:-1)}}return(g<-mn||g<mn&&w<-Qf)^l&1}function wC(e,t,r,a){return function(u){var f=t(u),g=vC(),l=t(g),w=!1,E,T,S,C={point:F,lineStart:H,lineEnd:le,polygonStart:function(){C.point=W,C.lineStart=V,C.lineEnd=B,T=[],E=[]},polygonEnd:function(){C.point=F,C.lineStart=H,C.lineEnd=le,T=rC(T);var se=xC(E,a);T.length?(w||(u.polygonStart(),w=!0),_C(T,hz,se,r,u)):se&&(w||(u.polygonStart(),w=!0),u.lineStart(),r(null,null,1,u),u.lineEnd()),w&&(u.polygonEnd(),w=!1),T=E=null},sphere:function(){u.polygonStart(),u.lineStart(),r(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function F(se,G){e(se,G)&&u.point(se,G)}function Y(se,G){f.point(se,G)}function H(){C.point=Y,f.lineStart()}function le(){C.point=F,f.lineEnd()}function W(se,G){S.push([se,G]),l.point(se,G)}function V(){l.lineStart(),S=[]}function B(){W(S[0][0],S[0][1]),l.lineEnd();var se=l.clean(),G=g.result(),j,b=G.length,k,U,X;if(S.pop(),E.push(S),S=null,!!b){if(se&1){if(U=G[0],(k=U.length-1)>0){for(w||(u.polygonStart(),w=!0),u.lineStart(),j=0;j<k;++j)u.point((X=U[j])[0],X[1]);u.lineEnd()}return}b>1&&se&2&&G.push(G.pop().concat(G.shift())),T.push(G.filter(cz))}}return C}}function cz(e){return e.length>1}function hz(e,t){return((e=e.x)[0]<0?e[1]-$r-mn:$r-e[1])-((t=t.x)[0]<0?t[1]-$r-mn:$r-t[1])}const Fv=wC(function(){return!0},fz,pz,[-Fn,-$r]);function fz(e){var t=NaN,r=NaN,a=NaN,u;return{lineStart:function(){e.lineStart(),u=1},point:function(f,g){var l=f>0?Fn:-Fn,w=Vn(f-t);Vn(w-Fn)<mn?(e.point(t,r=(r+g)/2>0?$r:-$r),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(l,r),e.point(f,r),u=0):a!==l&&w>=Fn&&(Vn(t-a)<mn&&(t-=a*mn),Vn(f-l)<mn&&(f-=l*mn),r=dz(t,r,f,g),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(l,r),u=0),e.point(t=f,r=g),a=l},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-u}}}function dz(e,t,r,a){var u,f,g=Qt(e-r);return Vn(g)>mn?vh((Qt(t)*(f=sn(a))*Qt(r)-Qt(a)*(u=sn(t))*Qt(e))/(u*f*g)):(t+a)/2}function pz(e,t,r,a){var u;if(e==null)u=r*$r,a.point(-Fn,u),a.point(0,u),a.point(Fn,u),a.point(Fn,0),a.point(Fn,-u),a.point(0,-u),a.point(-Fn,-u),a.point(-Fn,0),a.point(-Fn,u);else if(Vn(e[0]-t[0])>mn){var f=e[0]<t[0]?Fn:-Fn;u=r*f/2,a.point(-f,u),a.point(0,u),a.point(f,u)}else a.point(t[0],t[1])}function bC(e){var t=sn(e),r=6*gn,a=t>0,u=Vn(t)>mn;function f(T,S,C,F){yC(F,e,r,C,T,S)}function g(T,S){return sn(T)*sn(S)>t}function l(T){var S,C,F,Y,H;return{lineStart:function(){Y=F=!1,H=1},point:function(le,W){var V=[le,W],B,se=g(le,W),G=a?se?0:E(le,W):se?E(le+(le<0?Fn:-Fn),W):0;if(!S&&(Y=F=se)&&T.lineStart(),se!==F&&(B=w(S,V),(!B||Op(S,B)||Op(V,B))&&(V[2]=1)),se!==F)H=0,se?(T.lineStart(),B=w(V,S),T.point(B[0],B[1])):(B=w(S,V),T.point(B[0],B[1],2),T.lineEnd()),S=B;else if(u&&S&&a^se){var j;!(G&C)&&(j=w(V,S,!0))&&(H=0,a?(T.lineStart(),T.point(j[0][0],j[0][1]),T.point(j[1][0],j[1][1]),T.lineEnd()):(T.point(j[1][0],j[1][1]),T.lineEnd(),T.lineStart(),T.point(j[0][0],j[0][1],3)))}se&&(!S||!Op(S,V))&&T.point(V[0],V[1]),S=V,F=se,C=G},lineEnd:function(){F&&T.lineEnd(),S=null},clean:function(){return H|(Y&&F)<<1}}}function w(T,S,C){var F=Ru(T),Y=Ru(S),H=[1,0,0],le=uh(F,Y),W=hp(le,le),V=le[0],B=W-V*V;if(!B)return!C&&T;var se=t*W/B,G=-t*V/B,j=uh(H,le),b=fp(H,se),k=fp(le,G);Zy(b,k);var U=j,X=hp(b,U),K=hp(U,U),de=X*X-K*(hp(b,b)-1);if(!(de<0)){var ve=ci(de),we=fp(U,(-X-ve)/K);if(Zy(we,b),we=Em(we),!C)return we;var ee=T[0],ie=S[0],ne=T[1],te=S[1],he;ie<ee&&(he=ee,ee=ie,ie=he);var _e=ie-ee,xe=Vn(_e-Fn)<mn,je=xe||_e<mn;if(!xe&&te<ne&&(he=ne,ne=te,te=he),je?xe?ne+te>0^we[1]<(Vn(we[0]-ee)<mn?ne:te):ne<=we[1]&&we[1]<=te:_e>Fn^(ee<=we[0]&&we[0]<=ie)){var Ie=fp(U,(-X+ve)/K);return Zy(Ie,b),[we,Em(Ie)]}}}function E(T,S){var C=a?e:Fn-e,F=0;return T<-C?F|=1:T>C&&(F|=2),S<-C?F|=4:S>C&&(F|=8),F}return wC(g,l,f,a?[0,-e]:[-Fn,e-Fn])}function mz(e,t,r,a,u,f){var g=e[0],l=e[1],w=t[0],E=t[1],T=0,S=1,C=w-g,F=E-l,Y;if(Y=r-g,!(!C&&Y>0)){if(Y/=C,C<0){if(Y<T)return;Y<S&&(S=Y)}else if(C>0){if(Y>S)return;Y>T&&(T=Y)}if(Y=u-g,!(!C&&Y<0)){if(Y/=C,C<0){if(Y>S)return;Y>T&&(T=Y)}else if(C>0){if(Y<T)return;Y<S&&(S=Y)}if(Y=a-l,!(!F&&Y>0)){if(Y/=F,F<0){if(Y<T)return;Y<S&&(S=Y)}else if(F>0){if(Y>S)return;Y>T&&(T=Y)}if(Y=f-l,!(!F&&Y<0)){if(Y/=F,F<0){if(Y>S)return;Y>T&&(T=Y)}else if(F>0){if(Y<T)return;Y<S&&(S=Y)}return T>0&&(e[0]=g+T*C,e[1]=l+T*F),S<1&&(t[0]=g+S*C,t[1]=l+S*F),!0}}}}}var ff=1e9,pp=-ff;function dg(e,t,r,a){function u(E,T){return e<=E&&E<=r&&t<=T&&T<=a}function f(E,T,S,C){var F=0,Y=0;if(E==null||(F=g(E,S))!==(Y=g(T,S))||w(E,T)<0^S>0)do C.point(F===0||F===3?e:r,F>1?a:t);while((F=(F+S+4)%4)!==Y);else C.point(T[0],T[1])}function g(E,T){return Vn(E[0]-e)<mn?T>0?0:3:Vn(E[0]-r)<mn?T>0?2:1:Vn(E[1]-t)<mn?T>0?1:0:T>0?3:2}function l(E,T){return w(E.x,T.x)}function w(E,T){var S=g(E,1),C=g(T,1);return S!==C?S-C:S===0?T[1]-E[1]:S===1?E[0]-T[0]:S===2?E[1]-T[1]:T[0]-E[0]}return function(E){var T=E,S=vC(),C,F,Y,H,le,W,V,B,se,G,j,b={point:k,lineStart:de,lineEnd:ve,polygonStart:X,polygonEnd:K};function k(ee,ie){u(ee,ie)&&T.point(ee,ie)}function U(){for(var ee=0,ie=0,ne=F.length;ie<ne;++ie)for(var te=F[ie],he=1,_e=te.length,xe=te[0],je,Ie,Pe=xe[0],$e=xe[1];he<_e;++he)je=Pe,Ie=$e,xe=te[he],Pe=xe[0],$e=xe[1],Ie<=a?$e>a&&(Pe-je)*(a-Ie)>($e-Ie)*(e-je)&&++ee:$e<=a&&(Pe-je)*(a-Ie)<($e-Ie)*(e-je)&&--ee;return ee}function X(){T=S,C=[],F=[],j=!0}function K(){var ee=U(),ie=j&&ee,ne=(C=rC(C)).length;(ie||ne)&&(E.polygonStart(),ie&&(E.lineStart(),f(null,null,1,E),E.lineEnd()),ne&&_C(C,l,ee,f,E),E.polygonEnd()),T=E,C=F=Y=null}function de(){b.point=we,F&&F.push(Y=[]),G=!0,se=!1,V=B=NaN}function ve(){C&&(we(H,le),W&&se&&S.rejoin(),C.push(S.result())),b.point=k,se&&T.lineEnd()}function we(ee,ie){var ne=u(ee,ie);if(F&&Y.push([ee,ie]),G)H=ee,le=ie,W=ne,G=!1,ne&&(T.lineStart(),T.point(ee,ie));else if(ne&&se)T.point(ee,ie);else{var te=[V=Math.max(pp,Math.min(ff,V)),B=Math.max(pp,Math.min(ff,B))],he=[ee=Math.max(pp,Math.min(ff,ee)),ie=Math.max(pp,Math.min(ff,ie))];mz(te,he,e,t,r,a)?(se||(T.lineStart(),T.point(te[0],te[1])),T.point(he[0],he[1]),ne||T.lineEnd(),j=!1):ne&&(T.lineStart(),T.point(ee,ie),j=!1)}V=ee,B=ie,se=ne}return b}}function gz(){var e=0,t=0,r=960,a=500,u,f,g;return g={stream:function(l){return u&&f===l?u:u=dg(e,t,r,a)(f=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],r=+l[1][0],a=+l[1][1],u=f=null,g):[[e,t],[r,a]]}}}var jv,Bv,Rp,Fp,ch={sphere:Lr,point:Lr,lineStart:yz,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr};function yz(){ch.point=_z,ch.lineEnd=vz}function vz(){ch.point=ch.lineEnd=Lr}function _z(e,t){e*=gn,t*=gn,Bv=e,Rp=Qt(t),Fp=sn(t),ch.point=xz}function xz(e,t){e*=gn,t*=gn;var r=Qt(t),a=sn(t),u=Vn(e-Bv),f=sn(u),g=Qt(u),l=a*g,w=Fp*r-Rp*a*f,E=Rp*r+Fp*a*f;jv.add(Qi(ci(l*l+w*w),E)),Bv=e,Rp=r,Fp=a}function EC(e){return jv=new zi,xs(e,ch),+jv}var Dv=[null,null],wz={type:"LineString",coordinates:Dv};function zm(e,t){return Dv[0]=e,Dv[1]=t,EC(wz)}var c2={Feature:function(e,t){return Lm(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,a=-1,u=r.length;++a<u;)if(Lm(r[a].geometry,t))return!0;return!1}},h2={Sphere:function(){return!0},Point:function(e,t){return f2(e.coordinates,t)},MultiPoint:function(e,t){for(var r=e.coordinates,a=-1,u=r.length;++a<u;)if(f2(r[a],t))return!0;return!1},LineString:function(e,t){return d2(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,a=-1,u=r.length;++a<u;)if(d2(r[a],t))return!0;return!1},Polygon:function(e,t){return p2(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,a=-1,u=r.length;++a<u;)if(p2(r[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,a=-1,u=r.length;++a<u;)if(Lm(r[a],t))return!0;return!1}};function Lm(e,t){return e&&h2.hasOwnProperty(e.type)?h2[e.type](e,t):!1}function f2(e,t){return zm(e,t)===0}function d2(e,t){for(var r,a,u,f=0,g=e.length;f<g;f++){if(a=zm(e[f],t),a===0||f>0&&(u=zm(e[f],e[f-1]),u>0&&r<=u&&a<=u&&(r+a-u)*(1-Math.pow((r-a)/u,2))<Qf*u))return!0;r=a}return!1}function p2(e,t){return!!xC(e.map(bz),SC(t))}function bz(e){return e=e.map(SC),e.pop(),e}function SC(e){return[e[0]*gn,e[1]*gn]}function Ez(e,t){return(e&&c2.hasOwnProperty(e.type)?c2[e.type]:Lm)(e,t)}function m2(e,t,r){var a=Gc(e,t-mn,r).concat(t);return function(u){return a.map(function(f){return[u,f]})}}function g2(e,t,r){var a=Gc(e,t-mn,r).concat(t);return function(u){return a.map(function(f){return[f,u]})}}function TC(){var e,t,r,a,u,f,g,l,w=10,E=w,T=90,S=360,C,F,Y,H,le=2.5;function W(){return{type:"MultiLineString",coordinates:V()}}function V(){return Gc(cp(a/T)*T,r,T).map(Y).concat(Gc(cp(l/S)*S,g,S).map(H)).concat(Gc(cp(t/w)*w,e,w).filter(function(B){return Vn(B%T)>mn}).map(C)).concat(Gc(cp(f/E)*E,u,E).filter(function(B){return Vn(B%S)>mn}).map(F))}return W.lines=function(){return V().map(function(B){return{type:"LineString",coordinates:B}})},W.outline=function(){return{type:"Polygon",coordinates:[Y(a).concat(H(g).slice(1),Y(r).reverse().slice(1),H(l).reverse().slice(1))]}},W.extent=function(B){return arguments.length?W.extentMajor(B).extentMinor(B):W.extentMinor()},W.extentMajor=function(B){return arguments.length?(a=+B[0][0],r=+B[1][0],l=+B[0][1],g=+B[1][1],a>r&&(B=a,a=r,r=B),l>g&&(B=l,l=g,g=B),W.precision(le)):[[a,l],[r,g]]},W.extentMinor=function(B){return arguments.length?(t=+B[0][0],e=+B[1][0],f=+B[0][1],u=+B[1][1],t>e&&(B=t,t=e,e=B),f>u&&(B=f,f=u,u=B),W.precision(le)):[[t,f],[e,u]]},W.step=function(B){return arguments.length?W.stepMajor(B).stepMinor(B):W.stepMinor()},W.stepMajor=function(B){return arguments.length?(T=+B[0],S=+B[1],W):[T,S]},W.stepMinor=function(B){return arguments.length?(w=+B[0],E=+B[1],W):[w,E]},W.precision=function(B){return arguments.length?(le=+B,C=m2(f,u,90),F=g2(t,e,le),Y=m2(l,g,90),H=g2(a,r,le),W):le},W.extentMajor([[-180,-90+mn],[180,90-mn]]).extentMinor([[-180,-80-mn],[180,80+mn]])}function Sz(){return TC()()}function Tz(e,t){var r=e[0]*gn,a=e[1]*gn,u=t[0]*gn,f=t[1]*gn,g=sn(a),l=Qt(a),w=sn(f),E=Qt(f),T=g*sn(r),S=g*Qt(r),C=w*sn(u),F=w*Qt(u),Y=2*eo(ci(Kb(f-a)+g*w*Kb(u-r))),H=Qt(Y),le=Y?function(W){var V=Qt(W*=Y)/H,B=Qt(Y-W)/H,se=B*T+V*C,G=B*S+V*F,j=B*l+V*E;return[Qi(G,se)*fr,Qi(j,ci(se*se+G*G))*fr]}:function(){return[r*fr,a*fr]};return le.distance=Y,le}const ed=e=>e;var Xy=new zi,Nv=new zi,CC,AC,Uv,$v,yl={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){yl.lineStart=Cz,yl.lineEnd=Iz},polygonEnd:function(){yl.lineStart=yl.lineEnd=yl.point=Lr,Xy.add(Vn(Nv)),Nv=new zi},result:function(){var e=Xy/2;return Xy=new zi,e}};function Cz(){yl.point=Az}function Az(e,t){yl.point=IC,CC=Uv=e,AC=$v=t}function IC(e,t){Nv.add($v*e-Uv*t),Uv=e,$v=t}function Iz(){IC(CC,AC)}const y2=yl;var hh=1/0,Om=hh,td=-hh,Rm=td,Pz={point:kz,lineStart:Lr,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr,result:function(){var e=[[hh,Om],[td,Rm]];return td=Rm=-(Om=hh=1/0),e}};function kz(e,t){e<hh&&(hh=e),e>td&&(td=e),t<Om&&(Om=t),t>Rm&&(Rm=t)}const Fm=Pz;var Vv=0,Gv=0,df=0,jm=0,Bm=0,Wc=0,Wv=0,Zv=0,pf=0,PC,kC,Hs,Xs,ws={point:Fu,lineStart:v2,lineEnd:_2,polygonStart:function(){ws.lineStart=Lz,ws.lineEnd=Oz},polygonEnd:function(){ws.point=Fu,ws.lineStart=v2,ws.lineEnd=_2},result:function(){var e=pf?[Wv/pf,Zv/pf]:Wc?[jm/Wc,Bm/Wc]:df?[Vv/df,Gv/df]:[NaN,NaN];return Vv=Gv=df=jm=Bm=Wc=Wv=Zv=pf=0,e}};function Fu(e,t){Vv+=e,Gv+=t,++df}function v2(){ws.point=Mz}function Mz(e,t){ws.point=zz,Fu(Hs=e,Xs=t)}function zz(e,t){var r=e-Hs,a=t-Xs,u=ci(r*r+a*a);jm+=u*(Hs+e)/2,Bm+=u*(Xs+t)/2,Wc+=u,Fu(Hs=e,Xs=t)}function _2(){ws.point=Fu}function Lz(){ws.point=Rz}function Oz(){MC(PC,kC)}function Rz(e,t){ws.point=MC,Fu(PC=Hs=e,kC=Xs=t)}function MC(e,t){var r=e-Hs,a=t-Xs,u=ci(r*r+a*a);jm+=u*(Hs+e)/2,Bm+=u*(Xs+t)/2,Wc+=u,u=Xs*e-Hs*t,Wv+=u*(Hs+e),Zv+=u*(Xs+t),pf+=u*3,Fu(Hs=e,Xs=t)}const x2=ws;function zC(e){this._context=e}zC.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ji);break}}},result:Lr};var Hv=new zi,Yy,LC,OC,mf,gf,Dm={point:Lr,lineStart:function(){Dm.point=Fz},lineEnd:function(){Yy&&RC(LC,OC),Dm.point=Lr},polygonStart:function(){Yy=!0},polygonEnd:function(){Yy=null},result:function(){var e=+Hv;return Hv=new zi,e}};function Fz(e,t){Dm.point=RC,LC=mf=e,OC=gf=t}function RC(e,t){mf-=e,gf-=t,Hv.add(ci(mf*mf+gf*gf)),mf=e,gf=t}const w2=Dm;function FC(){this._string=[]}FC.prototype={_radius:4.5,_circle:b2(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=b2(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function b2(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function jz(e,t){var r=4.5,a,u;function f(g){return g&&(typeof r=="function"&&u.pointRadius(+r.apply(this,arguments)),xs(g,a(u))),u.result()}return f.area=function(g){return xs(g,a(y2)),y2.result()},f.measure=function(g){return xs(g,a(w2)),w2.result()},f.bounds=function(g){return xs(g,a(Fm)),Fm.result()},f.centroid=function(g){return xs(g,a(x2)),x2.result()},f.projection=function(g){return arguments.length?(a=g==null?(e=null,ed):(e=g).stream,f):e},f.context=function(g){return arguments.length?(u=g==null?(t=null,new FC):new zC(t=g),typeof r!="function"&&u.pointRadius(r),f):t},f.pointRadius=function(g){return arguments.length?(r=typeof g=="function"?g:(u.pointRadius(+g),+g),f):r},f.projection(e).context(t)}function Bz(e){return{stream:hd(e)}}function hd(e){return function(t){var r=new Xv;for(var a in e)r[a]=e[a];return r.stream=t,r}}function Xv(){}Xv.prototype={constructor:Xv,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function m_(e,t,r){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),xs(r,e.stream(Fm)),t(Fm.result()),a!=null&&e.clipExtent(a),e}function pg(e,t,r){return m_(e,function(a){var u=t[1][0]-t[0][0],f=t[1][1]-t[0][1],g=Math.min(u/(a[1][0]-a[0][0]),f/(a[1][1]-a[0][1])),l=+t[0][0]+(u-g*(a[1][0]+a[0][0]))/2,w=+t[0][1]+(f-g*(a[1][1]+a[0][1]))/2;e.scale(150*g).translate([l,w])},r)}function g_(e,t,r){return pg(e,[[0,0],t],r)}function y_(e,t,r){return m_(e,function(a){var u=+t,f=u/(a[1][0]-a[0][0]),g=(u-f*(a[1][0]+a[0][0]))/2,l=-f*a[0][1];e.scale(150*f).translate([g,l])},r)}function v_(e,t,r){return m_(e,function(a){var u=+t,f=u/(a[1][1]-a[0][1]),g=-f*a[0][0],l=(u-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([g,l])},r)}var E2=16,Dz=sn(30*gn);function S2(e,t){return+t?Uz(e,t):Nz(e)}function Nz(e){return hd({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function Uz(e,t){function r(a,u,f,g,l,w,E,T,S,C,F,Y,H,le){var W=E-a,V=T-u,B=W*W+V*V;if(B>4*t&&H--){var se=g+C,G=l+F,j=w+Y,b=ci(se*se+G*G+j*j),k=eo(j/=b),U=Vn(Vn(j)-1)<mn||Vn(f-S)<mn?(f+S)/2:Qi(G,se),X=e(U,k),K=X[0],de=X[1],ve=K-a,we=de-u,ee=V*ve-W*we;(ee*ee/B>t||Vn((W*ve+V*we)/B-.5)>.3||g*C+l*F+w*Y<Dz)&&(r(a,u,f,g,l,w,K,de,U,se/=b,G/=b,j,H,le),le.point(K,de),r(K,de,U,se,G,j,E,T,S,C,F,Y,H,le))}}return function(a){var u,f,g,l,w,E,T,S,C,F,Y,H,le={point:W,lineStart:V,lineEnd:se,polygonStart:function(){a.polygonStart(),le.lineStart=G},polygonEnd:function(){a.polygonEnd(),le.lineStart=V}};function W(k,U){k=e(k,U),a.point(k[0],k[1])}function V(){S=NaN,le.point=B,a.lineStart()}function B(k,U){var X=Ru([k,U]),K=e(k,U);r(S,C,T,F,Y,H,S=K[0],C=K[1],T=k,F=X[0],Y=X[1],H=X[2],E2,a),a.point(S,C)}function se(){le.point=W,a.lineEnd()}function G(){V(),le.point=j,le.lineEnd=b}function j(k,U){B(u=k,U),f=S,g=C,l=F,w=Y,E=H,le.point=B}function b(){r(S,C,T,F,Y,H,f,g,u,l,w,E,E2,a),le.lineEnd=se,se()}return le}}var $z=hd({point:function(e,t){this.stream.point(e*gn,t*gn)}});function Vz(e){return hd({point:function(t,r){var a=e(t,r);return this.stream.point(a[0],a[1])}})}function Gz(e,t,r,a,u){function f(g,l){return g*=a,l*=u,[t+e*g,r-e*l]}return f.invert=function(g,l){return[(g-t)/e*a,(r-l)/e*u]},f}function T2(e,t,r,a,u,f){if(!f)return Gz(e,t,r,a,u);var g=sn(f),l=Qt(f),w=g*e,E=l*e,T=g/e,S=l/e,C=(l*r-g*t)/e,F=(l*t+g*r)/e;function Y(H,le){return H*=a,le*=u,[w*H-E*le+t,r-E*H-w*le]}return Y.invert=function(H,le){return[a*(T*H-S*le+C),u*(F-S*H-T*le)]},Y}function ta(e){return __(function(){return e})()}function __(e){var t,r=150,a=480,u=250,f=0,g=0,l=0,w=0,E=0,T,S=0,C=1,F=1,Y=null,H=Fv,le=null,W,V,B,se=ed,G=.5,j,b,k,U,X;function K(ee){return k(ee[0]*gn,ee[1]*gn)}function de(ee){return ee=k.invert(ee[0],ee[1]),ee&&[ee[0]*fr,ee[1]*fr]}K.stream=function(ee){return U&&X===ee?U:U=$z(Vz(T)(H(j(se(X=ee)))))},K.preclip=function(ee){return arguments.length?(H=ee,Y=void 0,we()):H},K.postclip=function(ee){return arguments.length?(se=ee,le=W=V=B=null,we()):se},K.clipAngle=function(ee){return arguments.length?(H=+ee?bC(Y=ee*gn):(Y=null,Fv),we()):Y*fr},K.clipExtent=function(ee){return arguments.length?(se=ee==null?(le=W=V=B=null,ed):dg(le=+ee[0][0],W=+ee[0][1],V=+ee[1][0],B=+ee[1][1]),we()):le==null?null:[[le,W],[V,B]]},K.scale=function(ee){return arguments.length?(r=+ee,ve()):r},K.translate=function(ee){return arguments.length?(a=+ee[0],u=+ee[1],ve()):[a,u]},K.center=function(ee){return arguments.length?(f=ee[0]%360*gn,g=ee[1]%360*gn,ve()):[f*fr,g*fr]},K.rotate=function(ee){return arguments.length?(l=ee[0]%360*gn,w=ee[1]%360*gn,E=ee.length>2?ee[2]%360*gn:0,ve()):[l*fr,w*fr,E*fr]},K.angle=function(ee){return arguments.length?(S=ee%360*gn,ve()):S*fr},K.reflectX=function(ee){return arguments.length?(C=ee?-1:1,ve()):C<0},K.reflectY=function(ee){return arguments.length?(F=ee?-1:1,ve()):F<0},K.precision=function(ee){return arguments.length?(j=S2(b,G=ee*ee),we()):ci(G)},K.fitExtent=function(ee,ie){return pg(K,ee,ie)},K.fitSize=function(ee,ie){return g_(K,ee,ie)},K.fitWidth=function(ee,ie){return y_(K,ee,ie)},K.fitHeight=function(ee,ie){return v_(K,ee,ie)};function ve(){var ee=T2(r,0,0,C,F,S).apply(null,t(f,g)),ie=T2(r,a-ee[0],u-ee[1],C,F,S);return T=p_(l,w,E),b=Ov(t,ie),k=Ov(T,b),j=S2(b,G),we()}function we(){return U=X=null,K}return function(){return t=e.apply(this,arguments),K.invert=t.invert&&de,ve()}}function x_(e){var t=0,r=Fn/3,a=__(e),u=a(t,r);return u.parallels=function(f){return arguments.length?a(t=f[0]*gn,r=f[1]*gn):[t*fr,r*fr]},u}function Wz(e){var t=sn(e);function r(a,u){return[a*t,Qt(u)/t]}return r.invert=function(a,u){return[a/t,eo(u*t)]},r}function jC(e,t){var r=Qt(e),a=(r+Qt(t))/2;if(Vn(a)<mn)return Wz(e);var u=1+r*(2*a-r),f=ci(u)/a;function g(l,w){var E=ci(u-2*a*Qt(w))/a;return[E*Qt(l*=a),f-E*sn(l)]}return g.invert=function(l,w){var E=f-w,T=Qi(l,Vn(E))*Yo(E);return E*a<0&&(T-=Fn*Yo(l)*Yo(E)),[T/a,eo((u-(l*l+E*E)*a*a)/(2*a))]},g}function Nm(){return x_(jC).scale(155.424).center([0,33.6442])}function BC(){return Nm().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Zz(e){var t=e.length;return{point:function(r,a){for(var u=-1;++u<t;)e[u].point(r,a)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function Hz(){var e,t,r=BC(),a,u=Nm().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,g=Nm().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,w,E={point:function(C,F){w=[C,F]}};function T(C){var F=C[0],Y=C[1];return w=null,a.point(F,Y),w||(f.point(F,Y),w)||(l.point(F,Y),w)}T.invert=function(C){var F=r.scale(),Y=r.translate(),H=(C[0]-Y[0])/F,le=(C[1]-Y[1])/F;return(le>=.12&&le<.234&&H>=-.425&&H<-.214?u:le>=.166&&le<.234&&H>=-.214&&H<-.115?g:r).invert(C)},T.stream=function(C){return e&&t===C?e:e=Zz([r.stream(t=C),u.stream(C),g.stream(C)])},T.precision=function(C){return arguments.length?(r.precision(C),u.precision(C),g.precision(C),S()):r.precision()},T.scale=function(C){return arguments.length?(r.scale(C),u.scale(C*.35),g.scale(C),T.translate(r.translate())):r.scale()},T.translate=function(C){if(!arguments.length)return r.translate();var F=r.scale(),Y=+C[0],H=+C[1];return a=r.translate(C).clipExtent([[Y-.455*F,H-.238*F],[Y+.455*F,H+.238*F]]).stream(E),f=u.translate([Y-.307*F,H+.201*F]).clipExtent([[Y-.425*F+mn,H+.12*F+mn],[Y-.214*F-mn,H+.234*F-mn]]).stream(E),l=g.translate([Y-.205*F,H+.212*F]).clipExtent([[Y-.214*F+mn,H+.166*F+mn],[Y-.115*F-mn,H+.234*F-mn]]).stream(E),S()},T.fitExtent=function(C,F){return pg(T,C,F)},T.fitSize=function(C,F){return g_(T,C,F)},T.fitWidth=function(C,F){return y_(T,C,F)},T.fitHeight=function(C,F){return v_(T,C,F)};function S(){return e=t=null,T}return T.scale(1070)}function DC(e){return function(t,r){var a=sn(t),u=sn(r),f=e(a*u);return f===1/0?[2,0]:[f*u*Qt(t),f*Qt(r)]}}function fd(e){return function(t,r){var a=ci(t*t+r*r),u=e(a),f=Qt(u),g=sn(u);return[Qi(t*f,a*g),eo(a&&r*f/a)]}}var w_=DC(function(e){return ci(2/(1+e))});w_.invert=fd(function(e){return 2*eo(e/2)});function Xz(){return ta(w_).scale(124.75).clipAngle(180-.001)}var b_=DC(function(e){return(e=oC(e))&&e/Qt(e)});b_.invert=fd(function(e){return e});function Yz(){return ta(b_).scale(79.4188).clipAngle(180-.001)}function dd(e,t){return[e,_m(f_(($r+t)/2))]}dd.invert=function(e,t){return[e,2*vh(iC(t))-$r]};function Kz(){return NC(dd).scale(961/Ji)}function NC(e){var t=ta(e),r=t.center,a=t.scale,u=t.translate,f=t.clipExtent,g=null,l,w,E;t.scale=function(S){return arguments.length?(a(S),T()):a()},t.translate=function(S){return arguments.length?(u(S),T()):u()},t.center=function(S){return arguments.length?(r(S),T()):r()},t.clipExtent=function(S){return arguments.length?(S==null?g=l=w=E=null:(g=+S[0][0],l=+S[0][1],w=+S[1][0],E=+S[1][1]),T()):g==null?null:[[g,l],[w,E]]};function T(){var S=Fn*a(),C=t(gC(t.rotate()).invert([0,0]));return f(g==null?[[C[0]-S,C[1]-S],[C[0]+S,C[1]+S]]:e===dd?[[Math.max(C[0]-S,g),l],[Math.min(C[0]+S,w),E]]:[[g,Math.max(C[1]-S,l)],[w,Math.min(C[1]+S,E)]])}return T()}function mp(e){return f_(($r+e)/2)}function UC(e,t){var r=sn(e),a=e===t?Qt(e):_m(r/sn(t))/_m(mp(t)/mp(e)),u=r*Wy(mp(e),a)/a;if(!a)return dd;function f(g,l){u>0?l<-$r+mn&&(l=-$r+mn):l>$r-mn&&(l=$r-mn);var w=u/Wy(mp(l),a);return[w*Qt(a*g),u-w*sn(a*g)]}return f.invert=function(g,l){var w=u-l,E=Yo(a)*ci(g*g+w*w),T=Qi(g,Vn(w))*Yo(w);return w*a<0&&(T-=Fn*Yo(g)*Yo(w)),[T/a,2*vh(Wy(u/E,1/a))-$r]},f}function qz(){return x_(UC).scale(109.5).parallels([30,30])}function nd(e,t){return[e,t]}nd.invert=nd;function Jz(){return ta(nd).scale(152.63)}function $C(e,t){var r=sn(e),a=e===t?Qt(e):(r-sn(t))/(t-e),u=r/a+e;if(Vn(a)<mn)return nd;function f(g,l){var w=u-l,E=a*g;return[w*Qt(E),u-w*sn(E)]}return f.invert=function(g,l){var w=u-l,E=Qi(g,Vn(w))*Yo(w);return w*a<0&&(E-=Fn*Yo(g)*Yo(w)),[E/a,u-Yo(a)*ci(g*g+w*w)]},f}function Qz(){return x_($C).scale(131.154).center([0,13.9389])}var Pf=1.340264,kf=-.081106,Mf=893e-6,zf=.003796,Um=ci(3)/2,eL=12;function E_(e,t){var r=eo(Um*Qt(t)),a=r*r,u=a*a*a;return[e*sn(r)/(Um*(Pf+3*kf*a+u*(7*Mf+9*zf*a))),r*(Pf+kf*a+u*(Mf+zf*a))]}E_.invert=function(e,t){for(var r=t,a=r*r,u=a*a*a,f=0,g,l,w;f<eL&&(l=r*(Pf+kf*a+u*(Mf+zf*a))-t,w=Pf+3*kf*a+u*(7*Mf+9*zf*a),r-=g=l/w,a=r*r,u=a*a*a,!(Vn(g)<Qf));++f);return[Um*e*(Pf+3*kf*a+u*(7*Mf+9*zf*a))/sn(r),eo(Qt(r)/Um)]};function tL(){return ta(E_).scale(177.158)}function S_(e,t){var r=sn(t),a=sn(e)*r;return[r*Qt(e)/a,Qt(t)/a]}S_.invert=fd(vh);function nL(){return ta(S_).scale(144.049).clipAngle(60)}function rL(){var e=1,t=0,r=0,a=1,u=1,f=0,g,l,w=null,E,T,S,C=1,F=1,Y=hd({point:function(se,G){var j=B([se,G]);this.stream.point(j[0],j[1])}}),H=ed,le,W;function V(){return C=e*a,F=e*u,le=W=null,B}function B(se){var G=se[0]*C,j=se[1]*F;if(f){var b=j*g-G*l;G=G*g+j*l,j=b}return[G+t,j+r]}return B.invert=function(se){var G=se[0]-t,j=se[1]-r;if(f){var b=j*g+G*l;G=G*g-j*l,j=b}return[G/C,j/F]},B.stream=function(se){return le&&W===se?le:le=Y(H(W=se))},B.postclip=function(se){return arguments.length?(H=se,w=E=T=S=null,V()):H},B.clipExtent=function(se){return arguments.length?(H=se==null?(w=E=T=S=null,ed):dg(w=+se[0][0],E=+se[0][1],T=+se[1][0],S=+se[1][1]),V()):w==null?null:[[w,E],[T,S]]},B.scale=function(se){return arguments.length?(e=+se,V()):e},B.translate=function(se){return arguments.length?(t=+se[0],r=+se[1],V()):[t,r]},B.angle=function(se){return arguments.length?(f=se%360*gn,l=Qt(f),g=sn(f),V()):f*fr},B.reflectX=function(se){return arguments.length?(a=se?-1:1,V()):a<0},B.reflectY=function(se){return arguments.length?(u=se?-1:1,V()):u<0},B.fitExtent=function(se,G){return pg(B,se,G)},B.fitSize=function(se,G){return g_(B,se,G)},B.fitWidth=function(se,G){return y_(B,se,G)},B.fitHeight=function(se,G){return v_(B,se,G)},B}function T_(e,t){var r=t*t,a=r*r;return[e*(.8707-.131979*r+a*(-.013791+a*(.003971*r-.001529*a))),t*(1.007226+r*(.015085+a*(-.044475+.028874*r-.005916*a)))]}T_.invert=function(e,t){var r=t,a=25,u;do{var f=r*r,g=f*f;r-=u=(r*(1.007226+f*(.015085+g*(-.044475+.028874*f-.005916*g)))-t)/(1.007226+f*(.015085*3+g*(-.044475*7+.028874*9*f-.005916*11*g)))}while(Vn(u)>mn&&--a>0);return[e/(.8707+(f=r*r)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),r]};function iL(){return ta(T_).scale(175.295)}function C_(e,t){return[sn(t)*Qt(e),Qt(t)]}C_.invert=fd(eo);function oL(){return ta(C_).scale(249.5).clipAngle(90+mn)}function A_(e,t){var r=sn(t),a=1+sn(e)*r;return[r*Qt(e)/a,Qt(t)/a]}A_.invert=fd(function(e){return 2*vh(e)});function sL(){return ta(A_).scale(250).clipAngle(142)}function I_(e,t){return[_m(f_(($r+t)/2)),-e]}I_.invert=function(e,t){return[-t,2*vh(iC(e))-$r]};function aL(){var e=NC(I_),t=e.center,r=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?r([a[0],a[1],a.length>2?a[2]+90:90]):(a=r(),[a[0],a[1],a[2]-90])},r([0,0,90]).scale(159.155)}const lL=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:BC,geoAlbersUsa:Hz,geoArea:J5,geoAzimuthalEqualArea:Xz,geoAzimuthalEqualAreaRaw:w_,geoAzimuthalEquidistant:Yz,geoAzimuthalEquidistantRaw:b_,geoBounds:nz,geoCentroid:lz,geoCircle:uz,geoClipAntimeridian:Fv,geoClipCircle:bC,geoClipExtent:gz,geoClipRectangle:dg,geoConicConformal:qz,geoConicConformalRaw:UC,geoConicEqualArea:Nm,geoConicEqualAreaRaw:jC,geoConicEquidistant:Qz,geoConicEquidistantRaw:$C,geoContains:Ez,geoDistance:zm,geoEqualEarth:tL,geoEqualEarthRaw:E_,geoEquirectangular:Jz,geoEquirectangularRaw:nd,geoGnomonic:nL,geoGnomonicRaw:S_,geoGraticule:TC,geoGraticule10:Sz,geoIdentity:rL,geoInterpolate:Tz,geoLength:EC,geoMercator:Kz,geoMercatorRaw:dd,geoNaturalEarth1:iL,geoNaturalEarth1Raw:T_,geoOrthographic:oL,geoOrthographicRaw:C_,geoPath:jz,geoProjection:ta,geoProjectionMutator:__,geoRotation:gC,geoStereographic:sL,geoStereographicRaw:A_,geoStream:xs,geoTransform:Bz,geoTransverseMercator:aL,geoTransverseMercatorRaw:I_},Symbol.toStringTag,{value:"Module"})),uL=r1(lL);var Ll=2*Math.PI*6378137/2,cL=Math.PI/180;function VC(e){return e=e||256,2*Math.PI*6378137/e}function hL(e){var t=e[0],r=e[1],a=e[2];return(1<<a)*((1<<a)+t)+r}function Yv(e,t,r){var a=GC(e,t,r);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function GC(e,t,r){var a=t,u=F_(e[0]),f=R_(e[1]),g=Math.sin(f*cL),l=Math.pow(2,a),w=l*(u/360+.5),E=l*(.5-.25*Math.log((1+g)/(1-g))/Math.PI);return Nu([w,E,a],r)}function fL(e,t=6){var r=e[0],a=e[1],u=e[2],f=e[3],g=(r-u)/2+u,l=(a-f)/2+f;return t!=null&&(g=Number(g.toFixed(t)),l=Number(l.toFixed(t))),[g,l]}function $m(e,t,r={enable:!0,decimal:1}){e=mg(e,t);var a=e[0],u=e[1],f=a*Ll/180,g=Math.log(Math.tan((90+u)*Math.PI/360))/(Math.PI/180);return g=g*Ll/180,r.enable&&(f=Number(f.toFixed(r.decimal)),g=Number(g.toFixed(r.decimal))),[f,g]}function Kv(e,t=6){var r=e[0],a=e[1],u=r/Ll*180,f=a/Ll*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(u=Number(u.toFixed(t)),f=Number(f.toFixed(t))),[u,f]}function P_(e,t,r){var a=e[0],u=e[1],f=L_(t,r),g=(a+Ll)/f,l=(u+Ll)/f;return[g,l,t]}function WC(e,t,r){e=mg(e,r);var a=$m(e),u=P_(a,t);return k_(u)}function dL(e,t,r){if(e=mg(e,r),t===0)return[0,0,0];var a=WC(e,t);return HC(a)}function pL(e,t){if(t===0)return[0,0,0];var r=P_(e,t);return k_(r)}function qv(e,t,r=1){var a=e[0],u=e[1],f=e[2],g=L_(f,t),l=a*g-Ll,w=u*g-Ll;return r!=null&&(l=Number(l.toFixed(r)),w=Number(w.toFixed(r))),[l,w]}function k_(e,t,r){t=t||256;var a=e[0],u=e[1],f=e[2];if(f===0)return[0,0,0];z_(f);var g=Math.ceil(a/t)-1,l=Math.ceil(u/t)-1;return g<0&&(g=0),l<0&&(l=0),[g,l,f]}function M_(e,t,r){Nu(e,r),t=t||256;var a=e[0],u=e[1],f=e[2],g=qv([a*t,u*t,f]),l=qv([(a+1)*t,(u+1)*t,f]);return[g[0],g[1],l[0],l[1]]}function ZC(e,t){Nu(e,t);var r=e[0],a=e[1],u=e[2];if(u===0)return[-180,-85.051129,180,85.051129];var f=M_([r,a,u]),g=f[0],l=f[1],w=f[2],E=f[3],T=Kv([g,l,u]),S=Kv([w,E,u]);return[T[0],T[1],S[0],S[1]]}function mL(e){var t=pd(e);return M_(t)}function gL(e){var t=pd(e);return ZC(t)}function HC(e,t){Nu(e,t);var r=e[0],a=e[1],u=e[2];if(u===0)return[0,0,0];var f=r,g=Math.pow(2,u)-1-a;return[f,g,u]}function pd(e){var t=e[0],r=e[1],a=e[2],u=t,f=Math.pow(2,a)-r-1;return[u,f,a]}function yL(e){var t=pd(e);return XC(t)}function XC(e,t){Nu(e,t);var r=e[0],a=e[1],u=e[2];if(u===0)return"";var f="";return a=Math.pow(2,u)-1-a,O_(u,0,-1).map(function(g){var l=0,w=1<<g-1;r&w&&(l+=1),a&w&&(l+=2),f=f.concat(l)}),f}function vL(e){var t=YC(e);return pd(t)}function YC(e){var t=0,r=0,a=e.length;return O_(a,0,-1).map(function(u){var f=1<<u-1;switch(parseInt(e[a-u],0)){case 0:break;case 1:t+=f;break;case 2:r+=f;break;case 3:t+=f,r+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,r,a]}function _L(e){var t=$m([e[0],e[1]]),r=$m([e[2],e[3]]);return[t[0],t[1],r[0],r[1]]}function Nu(e,t){var r=e[0],a=e[1],u=e[2];if(t===!1)return e;if(u==null)throw new Error("<zoom> is required");if(r==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return u=z_(u),e=KC(e),e}function KC(e){var t=e[0],r=e[1],a=e[2],u=Math.pow(2,a);return t=t%u,t<0&&(t=t+u),[t,r,a]}function z_(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function mg(e,t){if(t===!1)return e;var r=F_(e[0]),a=R_(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[r,a]}function L_(e,t){return VC(t)/Math.pow(2,e)}function O_(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/r),0),u=Array(a),f=0;f<a;f++,e+=r)u[f]=e;return u}function xL(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],r=e[0][1],a=e[0][2],u=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<r&&(r=f[1]),f[2]>a&&(a=f[2]),f[3]>u&&(u=f[3])}),[t,r,a,u]}}function wL(e){try{return Nu(e),!0}catch{return!1}}function R_(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function F_(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function bL(e){var t=Yv([e[0],e[1]],32),r=Yv([e[2],e[3]],32),a=[t[0],t[1],r[0],r[1]],u=EL(a);if(u===0)return[0,0,0];var f=a[0]>>>32-u,g=a[1]>>>32-u;return[f,g,u]}function EL(e){for(var t=28,r=0;r<t;r++){var a=1<<32-(r+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return r}return t}const SL=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:fL,bboxToMeters:_L,bboxToTile:bL,googleToBBox:gL,googleToBBoxMeters:mL,googleToQuadkey:yL,googleToTile:pd,hash:hL,initialResolution:VC,latitude:R_,lngLatToGoogle:dL,lngLatToMeters:$m,lngLatToTile:WC,longitude:F_,maxBBox:xL,metersToLngLat:Kv,metersToPixels:P_,metersToTile:pL,pixelsToMeters:qv,pixelsToTile:k_,pointToTile:Yv,pointToTileFraction:GC,quadkeyToGoogle:YC,quadkeyToTile:vL,range:O_,resolution:L_,tileToBBox:ZC,tileToBBoxMeters:M_,tileToGoogle:HC,tileToQuadkey:XC,validTile:wL,validateLngLat:mg,validateTile:Nu,validateZoom:z_,wrapTile:KC},Symbol.toStringTag,{value:"Module"})),TL=r1(SL);var gg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */gg.read=function(e,t,r,a,u){var f,g,l=u*8-a-1,w=(1<<l)-1,E=w>>1,T=-7,S=r?u-1:0,C=r?-1:1,F=e[t+S];for(S+=C,f=F&(1<<-T)-1,F>>=-T,T+=l;T>0;f=f*256+e[t+S],S+=C,T-=8);for(g=f&(1<<-T)-1,f>>=-T,T+=a;T>0;g=g*256+e[t+S],S+=C,T-=8);if(f===0)f=1-E;else{if(f===w)return g?NaN:(F?-1:1)*(1/0);g=g+Math.pow(2,a),f=f-E}return(F?-1:1)*g*Math.pow(2,f-a)};gg.write=function(e,t,r,a,u,f){var g,l,w,E=f*8-u-1,T=(1<<E)-1,S=T>>1,C=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=a?0:f-1,Y=a?1:-1,H=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,g=T):(g=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-g))<1&&(g--,w*=2),g+S>=1?t+=C/w:t+=C*Math.pow(2,1-S),t*w>=2&&(g++,w/=2),g+S>=T?(l=0,g=T):g+S>=1?(l=(t*w-1)*Math.pow(2,u),g=g+S):(l=t*Math.pow(2,S-1)*Math.pow(2,u),g=0));u>=8;e[r+F]=l&255,F+=Y,l/=256,u-=8);for(g=g<<u|l,E+=u;E>0;e[r+F]=g&255,F+=Y,g/=256,E-=8);e[r+F-Y]|=H*128};var CL=qn,gp=gg;function qn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0;qn.Fixed64=1;qn.Bytes=2;qn.Fixed32=5;var Jv=(1<<16)*(1<<16),C2=1/Jv,AL=12,qC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");qn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var a=this.readVarint(),u=a>>3,f=this.pos;this.type=a&7,e(u,t,this),this.pos===f&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=yp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=I2(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=yp(this.buf,this.pos)+yp(this.buf,this.pos+4)*Jv;return this.pos+=8,e},readSFixed64:function(){var e=yp(this.buf,this.pos)+I2(this.buf,this.pos+4)*Jv;return this.pos+=8,e},readFloat:function(){var e=gp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=gp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,r,a;return a=t[this.pos++],r=a&127,a<128||(a=t[this.pos++],r|=(a&127)<<7,a<128)||(a=t[this.pos++],r|=(a&127)<<14,a<128)||(a=t[this.pos++],r|=(a&127)<<21,a<128)?r:(a=t[this.pos],r|=(a&15)<<28,IL(r,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=AL&&qC?$L(this.buf,t,e):UL(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qn.Bytes)return e.push(this.readVarint(t));var r=Sa(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qn.Bytes)return e.push(this.readSVarint());var t=Sa(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qn.Bytes)return e.push(this.readBoolean());var t=Sa(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qn.Bytes)return e.push(this.readFloat());var t=Sa(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qn.Bytes)return e.push(this.readDouble());var t=Sa(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed32());var t=Sa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed32());var t=Sa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed64());var t=Sa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed64());var t=Sa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===qn.Varint)for(;this.buf[this.pos++]>127;);else if(t===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qn.Fixed32)this.pos+=4;else if(t===qn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Tc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Tc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Tc(this.buf,e&-1,this.pos),Tc(this.buf,Math.floor(e*C2),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Tc(this.buf,e&-1,this.pos),Tc(this.buf,Math.floor(e*C2),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){PL(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=VL(this.buf,e,this.pos);var r=this.pos-t;r>=128&&A2(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),gp.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),gp.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var a=this.pos-r;a>=128&&A2(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,r){this.writeTag(e,qn.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,zL,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,LL,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,FL,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,OL,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,RL,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,jL,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,BL,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,DL,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,NL,t)},writeBytesField:function(e,t){this.writeTag(e,qn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function IL(e,t,r){var a=r.buf,u,f;if(f=a[r.pos++],u=(f&112)>>4,f<128||(f=a[r.pos++],u|=(f&127)<<3,f<128)||(f=a[r.pos++],u|=(f&127)<<10,f<128)||(f=a[r.pos++],u|=(f&127)<<17,f<128)||(f=a[r.pos++],u|=(f&127)<<24,f<128)||(f=a[r.pos++],u|=(f&1)<<31,f<128))return Sc(e,u,t);throw new Error("Expected varint not more than 10 bytes")}function Sa(e){return e.type===qn.Bytes?e.readVarint()+e.pos:e.pos+1}function Sc(e,t,r){return r?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function PL(e,t){var r,a;if(e>=0?(r=e%4294967296|0,a=e/4294967296|0):(r=~(-e%4294967296),a=~(-e/4294967296),r^4294967295?r=r+1|0:(r=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),kL(r,a,t),ML(a,t)}function kL(e,t,r){r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos]=e&127}function ML(e,t){var r=(e&7)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function A2(e,t,r){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));r.realloc(a);for(var u=r.pos-1;u>=e;u--)r.buf[u+a]=r.buf[u]}function zL(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function LL(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function OL(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function RL(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function FL(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function jL(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function BL(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function DL(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function NL(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function yp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Tc(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function I2(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function UL(e,t,r){for(var a="",u=t;u<r;){var f=e[u],g=null,l=f>239?4:f>223?3:f>191?2:1;if(u+l>r)break;var w,E,T;l===1?f<128&&(g=f):l===2?(w=e[u+1],(w&192)===128&&(g=(f&31)<<6|w&63,g<=127&&(g=null))):l===3?(w=e[u+1],E=e[u+2],(w&192)===128&&(E&192)===128&&(g=(f&15)<<12|(w&63)<<6|E&63,(g<=2047||g>=55296&&g<=57343)&&(g=null))):l===4&&(w=e[u+1],E=e[u+2],T=e[u+3],(w&192)===128&&(E&192)===128&&(T&192)===128&&(g=(f&15)<<18|(w&63)<<12|(E&63)<<6|T&63,(g<=65535||g>=1114112)&&(g=null))),g===null?(g=65533,l=1):g>65535&&(g-=65536,a+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023),a+=String.fromCharCode(g),u+=l}return a}function $L(e,t,r){return qC.decode(e.subarray(t,r))}function VL(e,t,r){for(var a=0,u,f;a<t.length;a++){if(u=t.charCodeAt(a),u>55295&&u<57344)if(f)if(u<56320){e[r++]=239,e[r++]=191,e[r++]=189,f=u;continue}else u=f-55296<<10|u-56320|65536,f=null;else{u>56319||a+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):f=u;continue}else f&&(e[r++]=239,e[r++]=191,e[r++]=189,f=null);u<128?e[r++]=u:(u<2048?e[r++]=u>>6|192:(u<65536?e[r++]=u>>12|224:(e[r++]=u>>18|240,e[r++]=u>>12&63|128),e[r++]=u>>6&63|128),e[r++]=u&63|128)}return r}var Qv={},GL={get exports(){return Qv},set exports(e){Qv=e}},Vm={},WL={get exports(){return Vm},set exports(e){Vm=e}},JC=function(t,r){return function(){for(var u=new Array(arguments.length),f=0;f<u.length;f++)u[f]=arguments[f];return t.apply(r,u)}},ZL=JC,Uu=Object.prototype.toString;function j_(e){return Uu.call(e)==="[object Array]"}function e1(e){return typeof e>"u"}function HL(e){return e!==null&&!e1(e)&&e.constructor!==null&&!e1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function XL(e){return Uu.call(e)==="[object ArrayBuffer]"}function YL(e){return typeof FormData<"u"&&e instanceof FormData}function KL(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function qL(e){return typeof e=="string"}function JL(e){return typeof e=="number"}function QC(e){return e!==null&&typeof e=="object"}function jp(e){if(Uu.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function QL(e){return Uu.call(e)==="[object Date]"}function eO(e){return Uu.call(e)==="[object File]"}function tO(e){return Uu.call(e)==="[object Blob]"}function eA(e){return Uu.call(e)==="[object Function]"}function nO(e){return QC(e)&&eA(e.pipe)}function rO(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function iO(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function oO(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function B_(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),j_(e))for(var r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function t1(){var e={};function t(u,f){jp(e[f])&&jp(u)?e[f]=t1(e[f],u):jp(u)?e[f]=t1({},u):j_(u)?e[f]=u.slice():e[f]=u}for(var r=0,a=arguments.length;r<a;r++)B_(arguments[r],t);return e}function sO(e,t,r){return B_(t,function(u,f){r&&typeof u=="function"?e[f]=ZL(u,r):e[f]=u}),e}function aO(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Mo={isArray:j_,isArrayBuffer:XL,isBuffer:HL,isFormData:YL,isArrayBufferView:KL,isString:qL,isNumber:JL,isObject:QC,isPlainObject:jp,isUndefined:e1,isDate:QL,isFile:eO,isBlob:tO,isFunction:eA,isStream:nO,isURLSearchParams:rO,isStandardBrowserEnv:oO,forEach:B_,merge:t1,extend:sO,trim:iO,stripBOM:aO},Cc=Mo;function P2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var tA=function(t,r,a){if(!r)return t;var u;if(a)u=a(r);else if(Cc.isURLSearchParams(r))u=r.toString();else{var f=[];Cc.forEach(r,function(w,E){w===null||typeof w>"u"||(Cc.isArray(w)?E=E+"[]":w=[w],Cc.forEach(w,function(S){Cc.isDate(S)?S=S.toISOString():Cc.isObject(S)&&(S=JSON.stringify(S)),f.push(P2(E)+"="+P2(S))}))}),u=f.join("&")}if(u){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t},lO=Mo;function yg(){this.handlers=[]}yg.prototype.use=function(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};yg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};yg.prototype.forEach=function(t){lO.forEach(this.handlers,function(a){a!==null&&t(a)})};var uO=yg,cO=Mo,hO=function(t,r){cO.forEach(t,function(u,f){f!==r&&f.toUpperCase()===r.toUpperCase()&&(t[r]=u,delete t[f])})},nA=function(t,r,a,u,f){return t.config=r,a&&(t.code=a),t.request=u,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},Ky,k2;function rA(){if(k2)return Ky;k2=1;var e=nA;return Ky=function(r,a,u,f,g){var l=new Error(r);return e(l,a,u,f,g)},Ky}var qy,M2;function fO(){if(M2)return qy;M2=1;var e=rA();return qy=function(r,a,u){var f=u.config.validateStatus;!u.status||!f||f(u.status)?r(u):a(e("Request failed with status code "+u.status,u.config,null,u.request,u))},qy}var Jy,z2;function dO(){if(z2)return Jy;z2=1;var e=Mo;return Jy=e.isStandardBrowserEnv()?function(){return{write:function(a,u,f,g,l,w){var E=[];E.push(a+"="+encodeURIComponent(u)),e.isNumber(f)&&E.push("expires="+new Date(f).toGMTString()),e.isString(g)&&E.push("path="+g),e.isString(l)&&E.push("domain="+l),w===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var u=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Jy}var Qy,L2;function pO(){return L2||(L2=1,Qy=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),Qy}var e0,O2;function mO(){return O2||(O2=1,e0=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),e0}var t0,R2;function gO(){if(R2)return t0;R2=1;var e=pO(),t=mO();return t0=function(a,u){return a&&!e(u)?t(a,u):u},t0}var n0,F2;function yO(){if(F2)return n0;F2=1;var e=Mo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return n0=function(a){var u={},f,g,l;return a&&e.forEach(a.split(`
`),function(E){if(l=E.indexOf(":"),f=e.trim(E.substr(0,l)).toLowerCase(),g=e.trim(E.substr(l+1)),f){if(u[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?u[f]=(u[f]?u[f]:[]).concat([g]):u[f]=u[f]?u[f]+", "+g:g}}),u},n0}var r0,j2;function vO(){if(j2)return r0;j2=1;var e=Mo;return r0=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),u;function f(g){var l=g;return r&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return u=f(window.location.href),function(l){var w=e.isString(l)?f(l):l;return w.protocol===u.protocol&&w.host===u.host}}():function(){return function(){return!0}}(),r0}var i0,B2;function D2(){if(B2)return i0;B2=1;var e=Mo,t=fO(),r=dO(),a=tA,u=gO(),f=yO(),g=vO(),l=rA();return i0=function(E){return new Promise(function(S,C){var F=E.data,Y=E.headers,H=E.responseType;e.isFormData(F)&&delete Y["Content-Type"];var le=new XMLHttpRequest;if(E.auth){var W=E.auth.username||"",V=E.auth.password?unescape(encodeURIComponent(E.auth.password)):"";Y.Authorization="Basic "+btoa(W+":"+V)}var B=u(E.baseURL,E.url);le.open(E.method.toUpperCase(),a(B,E.params,E.paramsSerializer),!0),le.timeout=E.timeout;function se(){if(le){var j="getAllResponseHeaders"in le?f(le.getAllResponseHeaders()):null,b=!H||H==="text"||H==="json"?le.responseText:le.response,k={data:b,status:le.status,statusText:le.statusText,headers:j,config:E,request:le};t(S,C,k),le=null}}if("onloadend"in le?le.onloadend=se:le.onreadystatechange=function(){!le||le.readyState!==4||le.status===0&&!(le.responseURL&&le.responseURL.indexOf("file:")===0)||setTimeout(se)},le.onabort=function(){le&&(C(l("Request aborted",E,"ECONNABORTED",le)),le=null)},le.onerror=function(){C(l("Network Error",E,null,le)),le=null},le.ontimeout=function(){var b="timeout of "+E.timeout+"ms exceeded";E.timeoutErrorMessage&&(b=E.timeoutErrorMessage),C(l(b,E,E.transitional&&E.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",le)),le=null},e.isStandardBrowserEnv()){var G=(E.withCredentials||g(B))&&E.xsrfCookieName?r.read(E.xsrfCookieName):void 0;G&&(Y[E.xsrfHeaderName]=G)}"setRequestHeader"in le&&e.forEach(Y,function(b,k){typeof F>"u"&&k.toLowerCase()==="content-type"?delete Y[k]:le.setRequestHeader(k,b)}),e.isUndefined(E.withCredentials)||(le.withCredentials=!!E.withCredentials),H&&H!=="json"&&(le.responseType=E.responseType),typeof E.onDownloadProgress=="function"&&le.addEventListener("progress",E.onDownloadProgress),typeof E.onUploadProgress=="function"&&le.upload&&le.upload.addEventListener("progress",E.onUploadProgress),E.cancelToken&&E.cancelToken.promise.then(function(b){le&&(le.abort(),C(b),le=null)}),F||(F=null),le.send(F)})},i0}var vi=Mo,N2=hO,_O=nA,xO={"Content-Type":"application/x-www-form-urlencoded"};function U2(e,t){!vi.isUndefined(e)&&vi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function wO(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=D2()),e}function bO(e,t,r){if(vi.isString(e))try{return(t||JSON.parse)(e),vi.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}var vg={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:wO(),transformRequest:[function(t,r){return N2(r,"Accept"),N2(r,"Content-Type"),vi.isFormData(t)||vi.isArrayBuffer(t)||vi.isBuffer(t)||vi.isStream(t)||vi.isFile(t)||vi.isBlob(t)?t:vi.isArrayBufferView(t)?t.buffer:vi.isURLSearchParams(t)?(U2(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):vi.isObject(t)||r&&r["Content-Type"]==="application/json"?(U2(r,"application/json"),bO(t)):t}],transformResponse:[function(t){var r=this.transitional,a=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,f=!a&&this.responseType==="json";if(f||u&&vi.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(f)throw g.name==="SyntaxError"?_O(g,this,"E_JSON_PARSE"):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};vg.headers={common:{Accept:"application/json, text/plain, */*"}};vi.forEach(["delete","get","head"],function(t){vg.headers[t]={}});vi.forEach(["post","put","patch"],function(t){vg.headers[t]=vi.merge(xO)});var D_=vg,EO=Mo,SO=D_,TO=function(t,r,a){var u=this||SO;return EO.forEach(a,function(g){t=g.call(u,t,r)}),t},o0,$2;function iA(){return $2||($2=1,o0=function(t){return!!(t&&t.__CANCEL__)}),o0}var V2=Mo,s0=TO,CO=iA(),AO=D_;function a0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var IO=function(t){a0(t),t.headers=t.headers||{},t.data=s0.call(t,t.data,t.headers,t.transformRequest),t.headers=V2.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),V2.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var r=t.adapter||AO.adapter;return r(t).then(function(u){return a0(t),u.data=s0.call(t,u.data,u.headers,t.transformResponse),u},function(u){return CO(u)||(a0(t),u&&u.response&&(u.response.data=s0.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})},ki=Mo,oA=function(t,r){r=r||{};var a={},u=["url","method","data"],f=["headers","auth","proxy","params"],g=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function w(C,F){return ki.isPlainObject(C)&&ki.isPlainObject(F)?ki.merge(C,F):ki.isPlainObject(F)?ki.merge({},F):ki.isArray(F)?F.slice():F}function E(C){ki.isUndefined(r[C])?ki.isUndefined(t[C])||(a[C]=w(void 0,t[C])):a[C]=w(t[C],r[C])}ki.forEach(u,function(F){ki.isUndefined(r[F])||(a[F]=w(void 0,r[F]))}),ki.forEach(f,E),ki.forEach(g,function(F){ki.isUndefined(r[F])?ki.isUndefined(t[F])||(a[F]=w(void 0,t[F])):a[F]=w(void 0,r[F])}),ki.forEach(l,function(F){F in r?a[F]=w(t[F],r[F]):F in t&&(a[F]=w(void 0,t[F]))});var T=u.concat(f).concat(g).concat(l),S=Object.keys(t).concat(Object.keys(r)).filter(function(F){return T.indexOf(F)===-1});return ki.forEach(S,E),a};const PO="axios",kO="0.21.4",MO="Promise based HTTP client for the browser and node.js",zO="index.js",LO={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},OO={type:"git",url:"https://github.com/axios/axios.git"},RO=["xhr","http","ajax","promise","node"],FO="Matt Zabriskie",jO="MIT",BO={url:"https://github.com/axios/axios/issues"},DO="https://axios-http.com",NO={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},UO={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},$O="dist/axios.min.js",VO="dist/axios.min.js",GO="./index.d.ts",WO={"follow-redirects":"^1.14.0"},ZO=[{path:"./dist/axios.min.js",threshold:"5kB"}],HO={name:PO,version:kO,description:MO,main:zO,scripts:LO,repository:OO,keywords:RO,author:FO,license:jO,bugs:BO,homepage:DO,devDependencies:NO,browser:UO,jsdelivr:$O,unpkg:VO,typings:GO,dependencies:WO,bundlesize:ZO};var sA=HO,N_={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){N_[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var G2={},XO=sA.version.split(".");function aA(e,t){for(var r=t?t.split("."):XO,a=e.split("."),u=0;u<3;u++){if(r[u]>a[u])return!0;if(r[u]<a[u])return!1}return!1}N_.transitional=function(t,r,a){var u=r&&aA(r);function f(g,l){return"[Axios v"+sA.version+"] Transitional option '"+g+"'"+l+(a?". "+a:"")}return function(g,l,w){if(t===!1)throw new Error(f(l," has been removed in "+r));return u&&!G2[l]&&(G2[l]=!0,console.warn(f(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(g,l,w):!0}};function YO(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),u=a.length;u-- >0;){var f=a[u],g=t[f];if(g){var l=e[f],w=l===void 0||g(l,f,e);if(w!==!0)throw new TypeError("option "+f+" must be "+w);continue}if(r!==!0)throw Error("Unknown option "+f)}}var KO={isOlderVersion:aA,assertOptions:YO,validators:N_},lA=Mo,qO=tA,W2=uO,Z2=IO,_g=oA,uA=KO,Ac=uA.validators;function md(e){this.defaults=e,this.interceptors={request:new W2,response:new W2}}md.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=_g(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&uA.assertOptions(r,{silentJSONParsing:Ac.transitional(Ac.boolean,"1.0.0"),forcedJSONParsing:Ac.transitional(Ac.boolean,"1.0.0"),clarifyTimeoutError:Ac.transitional(Ac.boolean,"1.0.0")},!1);var a=[],u=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(t)===!1||(u=u&&C.synchronous,a.unshift(C.fulfilled,C.rejected))});var f=[];this.interceptors.response.forEach(function(C){f.push(C.fulfilled,C.rejected)});var g;if(!u){var l=[Z2,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(f),g=Promise.resolve(t);l.length;)g=g.then(l.shift(),l.shift());return g}for(var w=t;a.length;){var E=a.shift(),T=a.shift();try{w=E(w)}catch(S){T(S);break}}try{g=Z2(w)}catch(S){return Promise.reject(S)}for(;f.length;)g=g.then(f.shift(),f.shift());return g};md.prototype.getUri=function(t){return t=_g(this.defaults,t),qO(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};lA.forEach(["delete","get","head","options"],function(t){md.prototype[t]=function(r,a){return this.request(_g(a||{},{method:t,url:r,data:(a||{}).data}))}});lA.forEach(["post","put","patch"],function(t){md.prototype[t]=function(r,a,u){return this.request(_g(u||{},{method:t,url:r,data:a}))}});var JO=md,l0,H2;function cA(){if(H2)return l0;H2=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,l0=e,l0}var u0,X2;function QO(){if(X2)return u0;X2=1;var e=cA();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(g){a=g});var u=this;r(function(g){u.reason||(u.reason=new e(g),a(u.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,u=new t(function(g){a=g});return{token:u,cancel:a}},u0=t,u0}var c0,Y2;function eR(){return Y2||(Y2=1,c0=function(t){return function(a){return t.apply(null,a)}}),c0}var h0,K2;function tR(){return K2||(K2=1,h0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),h0}var q2=Mo,nR=JC,Bp=JO,rR=oA,iR=D_;function hA(e){var t=new Bp(e),r=nR(Bp.prototype.request,t);return q2.extend(r,Bp.prototype,t),q2.extend(r,t),r}var Is=hA(iR);Is.Axios=Bp;Is.create=function(t){return hA(rR(Is.defaults,t))};Is.Cancel=cA();Is.CancelToken=QO();Is.isCancel=iA();Is.all=function(t){return Promise.all(t)};Is.spread=eR();Is.isAxiosError=tR();WL.exports=Is;Vm.default=Is;(function(e){e.exports=Vm})(GL);const oR={},sR=Object.freeze(Object.defineProperty({__proto__:null,default:oR},Symbol.toStringTag,{value:"Module"})),aR=r1(sR);var xg={},lR=eh;function eh(e,t){this.x=e,this.y=t}eh.prototype={clone:function(){return new eh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),a=t*this.x-r*this.y,u=r*this.x+t*this.y;return this.x=a,this.y=u,this},_rotateAround:function(e,t){var r=Math.cos(e),a=Math.sin(e),u=t.x+r*(this.x-t.x)-a*(this.y-t.y),f=t.y+a*(this.x-t.x)+r*(this.y-t.y);return this.x=u,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};eh.convert=function(e){return e instanceof eh?e:Array.isArray(e)?new eh(e[0],e[1]):e};var uR=lR,fA=fh;function fh(e,t,r,a,u){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=u,e.readFields(cR,this,t)}function cR(e,t,r){e==1?t.id=r.readVarint():e==2?hR(r,t):e==3?t.type=r.readVarint():e==4&&(t._geometry=r.pos)}function hR(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var a=t._keys[e.readVarint()],u=t._values[e.readVarint()];t.properties[a]=u}}fh.types=["Unknown","Point","LineString","Polygon"];fh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,a=0,u=0,f=0,g=[],l;e.pos<t;){if(a<=0){var w=e.readVarint();r=w&7,a=w>>3}if(a--,r===1||r===2)u+=e.readSVarint(),f+=e.readSVarint(),r===1&&(l&&g.push(l),l=[]),l.push(new uR(u,f));else if(r===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+r)}return l&&g.push(l),g};fh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,a=0,u=0,f=0,g=1/0,l=-1/0,w=1/0,E=-1/0;e.pos<t;){if(a<=0){var T=e.readVarint();r=T&7,a=T>>3}if(a--,r===1||r===2)u+=e.readSVarint(),f+=e.readSVarint(),u<g&&(g=u),u>l&&(l=u),f<w&&(w=f),f>E&&(E=f);else if(r!==7)throw new Error("unknown command "+r)}return[g,w,l,E]};fh.prototype.toGeoJSON=function(e,t,r){var a=this.extent*Math.pow(2,r),u=this.extent*e,f=this.extent*t,g=this.loadGeometry(),l=fh.types[this.type],w,E;function T(F){for(var Y=0;Y<F.length;Y++){var H=F[Y],le=180-(H.y+f)*360/a;F[Y]=[(H.x+u)*360/a-180,360/Math.PI*Math.atan(Math.exp(le*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(w=0;w<g.length;w++)S[w]=g[w][0];g=S,T(g);break;case 2:for(w=0;w<g.length;w++)T(g[w]);break;case 3:for(g=fR(g),w=0;w<g.length;w++)for(E=0;E<g[w].length;E++)T(g[w][E]);break}g.length===1?g=g[0]:l="Multi"+l;var C={type:"Feature",geometry:{type:l,coordinates:g},properties:this.properties};return"id"in this&&(C.id=this.id),C};function fR(e){var t=e.length;if(t<=1)return[e];for(var r=[],a,u,f=0;f<t;f++){var g=dR(e[f]);g!==0&&(u===void 0&&(u=g<0),u===g<0?(a&&r.push(a),a=[e[f]]):a.push(e[f]))}return a&&r.push(a),r}function dR(e){for(var t=0,r=0,a=e.length,u=a-1,f,g;r<a;u=r++)f=e[r],g=e[u],t+=(g.x-f.x)*(f.y+g.y);return t}var pR=fA,dA=pA;function pA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(mR,this,t),this.length=this._features.length}function mR(e,t,r){e===15?t.version=r.readVarint():e===1?t.name=r.readString():e===5?t.extent=r.readVarint():e===2?t._features.push(r.pos):e===3?t._keys.push(r.readString()):e===4&&t._values.push(gR(r))}function gR(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}pA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new pR(this._pbf,t,this.extent,this._keys,this._values)};var yR=dA,vR=_R;function _R(e,t){this.layers=e.readFields(xR,{},t)}function xR(e,t,r){if(e===3){var a=new yR(r,r.readVarint()+r.pos);a.length&&(t[a.name]=a)}}xg.VectorTile=vR;xg.VectorTileFeature=fA;xg.VectorTileLayer=dA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=uL,r=TL,a=CL,u=Qv,f=aR,g=xg;function l(V){return V&&typeof V=="object"&&"default"in V?V:{default:V}}var w=l(a),E=l(u),T=l(f),S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof pl<"u"?pl:typeof self<"u"?self:{};function C(V){var B={exports:{}};return V(B,B.exports),B.exports}var F=C(function(V,B){(function(G,j){V.exports=j(E.default)})(S,function(se){return function(G){var j={};function b(k){if(j[k])return j[k].exports;var U=j[k]={i:k,l:!1,exports:{}};return G[k].call(U.exports,U,U.exports,b),U.l=!0,U.exports}return b.m=G,b.c=j,b.d=function(k,U,X){b.o(k,U)||Object.defineProperty(k,U,{enumerable:!0,get:X})},b.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},b.t=function(k,U){if(U&1&&(k=b(k)),U&8||U&4&&typeof k=="object"&&k&&k.__esModule)return k;var X=Object.create(null);if(b.r(X),Object.defineProperty(X,"default",{enumerable:!0,value:k}),U&2&&typeof k!="string")for(var K in k)b.d(X,K,function(de){return k[de]}.bind(null,K));return X},b.n=function(k){var U=k&&k.__esModule?function(){return k.default}:function(){return k};return b.d(U,"a",U),U},b.o=function(k,U){return Object.prototype.hasOwnProperty.call(k,U)},b.p="",b(b.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(G,j,b){b.r(j),b.d(j,"CacheControl",function(){return xe}),b.d(j,"parse",function(){return je}),b.d(j,"format",function(){return Ie}),b("./node_modules/core-js/modules/es6.array.from.js"),b("./node_modules/core-js/modules/es6.function.name.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/core-js/modules/web.dom.iterable.js"),b("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.regexp.split.js"),b("./node_modules/core-js/modules/es6.number.is-finite.js");function k(Pe,$e){return ve(Pe)||de(Pe,$e)||X(Pe,$e)||U()}function U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X(Pe,$e){if(Pe){if(typeof Pe=="string")return K(Pe,$e);var Ne=Object.prototype.toString.call(Pe).slice(8,-1);if(Ne==="Object"&&Pe.constructor&&(Ne=Pe.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Pe);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return K(Pe,$e)}}function K(Pe,$e){($e==null||$e>Pe.length)&&($e=Pe.length);for(var Ne=0,qe=new Array($e);Ne<$e;Ne++)qe[Ne]=Pe[Ne];return qe}function de(Pe,$e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Pe)))){var Ne=[],qe=!0,at=!1,yt=void 0;try{for(var Pt=Pe[Symbol.iterator](),ht;!(qe=(ht=Pt.next()).done)&&(Ne.push(ht.value),!($e&&Ne.length===$e));qe=!0);}catch(Et){at=!0,yt=Et}finally{try{!qe&&Pt.return!=null&&Pt.return()}finally{if(at)throw yt}}return Ne}}function ve(Pe){if(Array.isArray(Pe))return Pe}function we(Pe,$e){if(!(Pe instanceof $e))throw new TypeError("Cannot call a class as a function")}function ee(Pe,$e){for(var Ne=0;Ne<$e.length;Ne++){var qe=$e[Ne];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(Pe,qe.key,qe)}}function ie(Pe,$e,Ne){return $e&&ee(Pe.prototype,$e),Ne&&ee(Pe,Ne),Pe}var ne=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,te={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function he(Pe){return Pe===null}function _e(Pe){if(!Pe)return null;var $e=parseInt(Pe,10);return!Number.isFinite($e)||$e<0?null:$e}var xe=function(){function Pe(){we(this,Pe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ie(Pe,[{key:"parse",value:function(Ne){if(!Ne||Ne.length===0)return this;var qe={},at=Ne.match(ne)||[];return Array.prototype.forEach.call(at,function(yt){var Pt=yt.split("=",2),ht=k(Pt,1),Et=ht[0],Nt=null;Pt.length>1&&(Nt=Pt[1].trim()),qe[Et.toLowerCase()]=Nt}),this.maxAge=_e(qe[te.maxAge]),this.sharedMaxAge=_e(qe[te.sharedMaxAge]),this.maxStale=he(qe[te.maxStale]),this.maxStaleDuration=_e(qe[te.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=_e(qe[te.minFresh]),this.immutable=he(qe[te.immutable]),this.mustRevalidate=he(qe[te.mustRevalidate]),this.noCache=he(qe[te.noCache]),this.noStore=he(qe[te.noStore]),this.noTransform=he(qe[te.noTransform]),this.onlyIfCached=he(qe[te.onlyIfCached]),this.private=he(qe[te.private]),this.proxyRevalidate=he(qe[te.proxyRevalidate]),this.public=he(qe[te.public]),this}},{key:"format",value:function(){var Ne=[];return this.maxAge&&Ne.push("".concat(te.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ne.push("".concat(te.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ne.push("".concat(te.maxStale,"=").concat(this.maxStaleDuration)):Ne.push(te.maxStale)),this.minFresh&&Ne.push("".concat(te.minFresh,"=").concat(this.minFresh)),this.immutable&&Ne.push(te.immutable),this.mustRevalidate&&Ne.push(te.mustRevalidate),this.noCache&&Ne.push(te.noCache),this.noStore&&Ne.push(te.noStore),this.noTransform&&Ne.push(te.noTransform),this.onlyIfCached&&Ne.push(te.onlyIfCached),this.private&&Ne.push(te.private),this.proxyRevalidate&&Ne.push(te.proxyRevalidate),this.public&&Ne.push(te.public),Ne.join(", ")}}]),Pe}();function je(Pe){var $e=new xe;return $e.parse(Pe)}function Ie(Pe){return Pe instanceof xe?Pe.format():xe.prototype.format.call(Pe)}j.default={CacheControl:xe,parse:je,format:Ie}},"./node_modules/charenc/charenc.js":function(G,j){var b={utf8:{stringToBytes:function(k){return b.bin.stringToBytes(unescape(encodeURIComponent(k)))},bytesToString:function(k){return decodeURIComponent(escape(b.bin.bytesToString(k)))}},bin:{stringToBytes:function(k){for(var U=[],X=0;X<k.length;X++)U.push(k.charCodeAt(X)&255);return U},bytesToString:function(k){for(var U=[],X=0;X<k.length;X++)U.push(String.fromCharCode(k[X]));return U.join("")}}};G.exports=b},"./node_modules/core-js/modules/_a-function.js":function(G,j){G.exports=function(b){if(typeof b!="function")throw TypeError(b+" is not a function!");return b}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_wks.js")("unscopables"),U=Array.prototype;U[k]==null&&b("./node_modules/core-js/modules/_hide.js")(U,k,{}),G.exports=function(X){U[k][X]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_string-at.js")(!0);G.exports=function(U,X,K){return X+(K?k(U,X).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_is-object.js");G.exports=function(U){if(!k(U))throw TypeError(U+" is not an object!");return U}},"./node_modules/core-js/modules/_array-includes.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_to-iobject.js"),U=b("./node_modules/core-js/modules/_to-length.js"),X=b("./node_modules/core-js/modules/_to-absolute-index.js");G.exports=function(K){return function(de,ve,we){var ee=k(de),ie=U(ee.length),ne=X(we,ie),te;if(K&&ve!=ve){for(;ie>ne;)if(te=ee[ne++],te!=te)return!0}else for(;ie>ne;ne++)if((K||ne in ee)&&ee[ne]===ve)return K||ne||0;return!K&&-1}}},"./node_modules/core-js/modules/_bind.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_a-function.js"),U=b("./node_modules/core-js/modules/_is-object.js"),X=b("./node_modules/core-js/modules/_invoke.js"),K=[].slice,de={},ve=function(we,ee,ie){if(!(ee in de)){for(var ne=[],te=0;te<ee;te++)ne[te]="a["+te+"]";de[ee]=Function("F,a","return new F("+ne.join(",")+")")}return de[ee](we,ie)};G.exports=Function.bind||function(ee){var ie=k(this),ne=K.call(arguments,1),te=function(){var he=ne.concat(K.call(arguments));return this instanceof te?ve(ie,he.length,he):X(ie,he,ee)};return U(ie.prototype)&&(te.prototype=ie.prototype),te}},"./node_modules/core-js/modules/_classof.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_cof.js"),U=b("./node_modules/core-js/modules/_wks.js")("toStringTag"),X=k(function(){return arguments}())=="Arguments",K=function(de,ve){try{return de[ve]}catch{}};G.exports=function(de){var ve,we,ee;return de===void 0?"Undefined":de===null?"Null":typeof(we=K(ve=Object(de),U))=="string"?we:X?k(ve):(ee=k(ve))=="Object"&&typeof ve.callee=="function"?"Arguments":ee}},"./node_modules/core-js/modules/_cof.js":function(G,j){var b={}.toString;G.exports=function(k){return b.call(k).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(G,j){var b=G.exports={version:"2.6.12"};typeof __e=="number"&&(__e=b)},"./node_modules/core-js/modules/_create-property.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-dp.js"),U=b("./node_modules/core-js/modules/_property-desc.js");G.exports=function(X,K,de){K in X?k.f(X,K,U(0,de)):X[K]=de}},"./node_modules/core-js/modules/_ctx.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_a-function.js");G.exports=function(U,X,K){if(k(U),X===void 0)return U;switch(K){case 1:return function(de){return U.call(X,de)};case 2:return function(de,ve){return U.call(X,de,ve)};case 3:return function(de,ve,we){return U.call(X,de,ve,we)}}return function(){return U.apply(X,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(G,j){G.exports=function(b){if(b==null)throw TypeError("Can't call method on  "+b);return b}},"./node_modules/core-js/modules/_descriptors.js":function(G,j,b){G.exports=!b("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_is-object.js"),U=b("./node_modules/core-js/modules/_global.js").document,X=k(U)&&k(U.createElement);G.exports=function(K){return X?U.createElement(K):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(G,j){G.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-keys.js"),U=b("./node_modules/core-js/modules/_object-gops.js"),X=b("./node_modules/core-js/modules/_object-pie.js");G.exports=function(K){var de=k(K),ve=U.f;if(ve)for(var we=ve(K),ee=X.f,ie=0,ne;we.length>ie;)ee.call(K,ne=we[ie++])&&de.push(ne);return de}},"./node_modules/core-js/modules/_export.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_global.js"),U=b("./node_modules/core-js/modules/_core.js"),X=b("./node_modules/core-js/modules/_hide.js"),K=b("./node_modules/core-js/modules/_redefine.js"),de=b("./node_modules/core-js/modules/_ctx.js"),ve="prototype",we=function(ee,ie,ne){var te=ee&we.F,he=ee&we.G,_e=ee&we.S,xe=ee&we.P,je=ee&we.B,Ie=he?k:_e?k[ie]||(k[ie]={}):(k[ie]||{})[ve],Pe=he?U:U[ie]||(U[ie]={}),$e=Pe[ve]||(Pe[ve]={}),Ne,qe,at,yt;he&&(ne=ie);for(Ne in ne)qe=!te&&Ie&&Ie[Ne]!==void 0,at=(qe?Ie:ne)[Ne],yt=je&&qe?de(at,k):xe&&typeof at=="function"?de(Function.call,at):at,Ie&&K(Ie,Ne,at,ee&we.U),Pe[Ne]!=at&&X(Pe,Ne,yt),xe&&$e[Ne]!=at&&($e[Ne]=at)};k.core=U,we.F=1,we.G=2,we.S=4,we.P=8,we.B=16,we.W=32,we.U=64,we.R=128,G.exports=we},"./node_modules/core-js/modules/_fails-is-regexp.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_wks.js")("match");G.exports=function(U){var X=/./;try{"/./"[U](X)}catch{try{return X[k]=!1,!"/./"[U](X)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(G,j){G.exports=function(b){try{return!!b()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(G,j,b){b("./node_modules/core-js/modules/es6.regexp.exec.js");var k=b("./node_modules/core-js/modules/_redefine.js"),U=b("./node_modules/core-js/modules/_hide.js"),X=b("./node_modules/core-js/modules/_fails.js"),K=b("./node_modules/core-js/modules/_defined.js"),de=b("./node_modules/core-js/modules/_wks.js"),ve=b("./node_modules/core-js/modules/_regexp-exec.js"),we=de("species"),ee=!X(function(){var ne=/./;return ne.exec=function(){var te=[];return te.groups={a:"7"},te},"".replace(ne,"$<a>")!=="7"}),ie=function(){var ne=/(?:)/,te=ne.exec;ne.exec=function(){return te.apply(this,arguments)};var he="ab".split(ne);return he.length===2&&he[0]==="a"&&he[1]==="b"}();G.exports=function(ne,te,he){var _e=de(ne),xe=!X(function(){var qe={};return qe[_e]=function(){return 7},""[ne](qe)!=7}),je=xe?!X(function(){var qe=!1,at=/a/;return at.exec=function(){return qe=!0,null},ne==="split"&&(at.constructor={},at.constructor[we]=function(){return at}),at[_e](""),!qe}):void 0;if(!xe||!je||ne==="replace"&&!ee||ne==="split"&&!ie){var Ie=/./[_e],Pe=he(K,_e,""[ne],function(at,yt,Pt,ht,Et){return yt.exec===ve?xe&&!Et?{done:!0,value:Ie.call(yt,Pt,ht)}:{done:!0,value:at.call(Pt,yt,ht)}:{done:!1}}),$e=Pe[0],Ne=Pe[1];k(String.prototype,ne,$e),U(RegExp.prototype,_e,te==2?function(qe,at){return Ne.call(qe,this,at)}:function(qe){return Ne.call(qe,this)})}}},"./node_modules/core-js/modules/_flags.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_an-object.js");G.exports=function(){var U=k(this),X="";return U.global&&(X+="g"),U.ignoreCase&&(X+="i"),U.multiline&&(X+="m"),U.unicode&&(X+="u"),U.sticky&&(X+="y"),X}},"./node_modules/core-js/modules/_function-to-string.js":function(G,j,b){G.exports=b("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(G,j){var b=G.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=b)},"./node_modules/core-js/modules/_has.js":function(G,j){var b={}.hasOwnProperty;G.exports=function(k,U){return b.call(k,U)}},"./node_modules/core-js/modules/_hide.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-dp.js"),U=b("./node_modules/core-js/modules/_property-desc.js");G.exports=b("./node_modules/core-js/modules/_descriptors.js")?function(X,K,de){return k.f(X,K,U(1,de))}:function(X,K,de){return X[K]=de,X}},"./node_modules/core-js/modules/_html.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_global.js").document;G.exports=k&&k.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(G,j,b){G.exports=!b("./node_modules/core-js/modules/_descriptors.js")&&!b("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(b("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(G,j){G.exports=function(b,k,U){var X=U===void 0;switch(k.length){case 0:return X?b():b.call(U);case 1:return X?b(k[0]):b.call(U,k[0]);case 2:return X?b(k[0],k[1]):b.call(U,k[0],k[1]);case 3:return X?b(k[0],k[1],k[2]):b.call(U,k[0],k[1],k[2]);case 4:return X?b(k[0],k[1],k[2],k[3]):b.call(U,k[0],k[1],k[2],k[3])}return b.apply(U,k)}},"./node_modules/core-js/modules/_iobject.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_cof.js");G.exports=Object("z").propertyIsEnumerable(0)?Object:function(U){return k(U)=="String"?U.split(""):Object(U)}},"./node_modules/core-js/modules/_is-array-iter.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_iterators.js"),U=b("./node_modules/core-js/modules/_wks.js")("iterator"),X=Array.prototype;G.exports=function(K){return K!==void 0&&(k.Array===K||X[U]===K)}},"./node_modules/core-js/modules/_is-array.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_cof.js");G.exports=Array.isArray||function(X){return k(X)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(G,j){G.exports=function(b){return typeof b=="object"?b!==null:typeof b=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_is-object.js"),U=b("./node_modules/core-js/modules/_cof.js"),X=b("./node_modules/core-js/modules/_wks.js")("match");G.exports=function(K){var de;return k(K)&&((de=K[X])!==void 0?!!de:U(K)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_an-object.js");G.exports=function(U,X,K,de){try{return de?X(k(K)[0],K[1]):X(K)}catch(we){var ve=U.return;throw ve!==void 0&&k(ve.call(U)),we}}},"./node_modules/core-js/modules/_iter-create.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-create.js"),U=b("./node_modules/core-js/modules/_property-desc.js"),X=b("./node_modules/core-js/modules/_set-to-string-tag.js"),K={};b("./node_modules/core-js/modules/_hide.js")(K,b("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),G.exports=function(de,ve,we){de.prototype=k(K,{next:U(1,we)}),X(de,ve+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_library.js"),U=b("./node_modules/core-js/modules/_export.js"),X=b("./node_modules/core-js/modules/_redefine.js"),K=b("./node_modules/core-js/modules/_hide.js"),de=b("./node_modules/core-js/modules/_iterators.js"),ve=b("./node_modules/core-js/modules/_iter-create.js"),we=b("./node_modules/core-js/modules/_set-to-string-tag.js"),ee=b("./node_modules/core-js/modules/_object-gpo.js"),ie=b("./node_modules/core-js/modules/_wks.js")("iterator"),ne=!([].keys&&"next"in[].keys()),te="@@iterator",he="keys",_e="values",xe=function(){return this};G.exports=function(je,Ie,Pe,$e,Ne,qe,at){ve(Pe,Ie,$e);var yt=function(R){if(!ne&&R in Nt)return Nt[R];switch(R){case he:return function(){return new Pe(this,R)};case _e:return function(){return new Pe(this,R)}}return function(){return new Pe(this,R)}},Pt=Ie+" Iterator",ht=Ne==_e,Et=!1,Nt=je.prototype,jt=Nt[ie]||Nt[te]||Ne&&Nt[Ne],cn=jt||yt(Ne),Cn=Ne?ht?yt("entries"):cn:void 0,bn=Ie=="Array"&&Nt.entries||jt,on,En,Ee;if(bn&&(Ee=ee(bn.call(new je)),Ee!==Object.prototype&&Ee.next&&(we(Ee,Pt,!0),!k&&typeof Ee[ie]!="function"&&K(Ee,ie,xe))),ht&&jt&&jt.name!==_e&&(Et=!0,cn=function(){return jt.call(this)}),(!k||at)&&(ne||Et||!Nt[ie])&&K(Nt,ie,cn),de[Ie]=cn,de[Pt]=xe,Ne)if(on={values:ht?cn:yt(_e),keys:qe?cn:yt(he),entries:Cn},at)for(En in on)En in Nt||X(Nt,En,on[En]);else U(U.P+U.F*(ne||Et),Ie,on);return on}},"./node_modules/core-js/modules/_iter-detect.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_wks.js")("iterator"),U=!1;try{var X=[7][k]();X.return=function(){U=!0},Array.from(X,function(){throw 2})}catch{}G.exports=function(K,de){if(!de&&!U)return!1;var ve=!1;try{var we=[7],ee=we[k]();ee.next=function(){return{done:ve=!0}},we[k]=function(){return ee},K(we)}catch{}return ve}},"./node_modules/core-js/modules/_iter-step.js":function(G,j){G.exports=function(b,k){return{value:k,done:!!b}}},"./node_modules/core-js/modules/_iterators.js":function(G,j){G.exports={}},"./node_modules/core-js/modules/_library.js":function(G,j){G.exports=!1},"./node_modules/core-js/modules/_meta.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_uid.js")("meta"),U=b("./node_modules/core-js/modules/_is-object.js"),X=b("./node_modules/core-js/modules/_has.js"),K=b("./node_modules/core-js/modules/_object-dp.js").f,de=0,ve=Object.isExtensible||function(){return!0},we=!b("./node_modules/core-js/modules/_fails.js")(function(){return ve(Object.preventExtensions({}))}),ee=function(_e){K(_e,k,{value:{i:"O"+ ++de,w:{}}})},ie=function(_e,xe){if(!U(_e))return typeof _e=="symbol"?_e:(typeof _e=="string"?"S":"P")+_e;if(!X(_e,k)){if(!ve(_e))return"F";if(!xe)return"E";ee(_e)}return _e[k].i},ne=function(_e,xe){if(!X(_e,k)){if(!ve(_e))return!0;if(!xe)return!1;ee(_e)}return _e[k].w},te=function(_e){return we&&he.NEED&&ve(_e)&&!X(_e,k)&&ee(_e),_e},he=G.exports={KEY:k,NEED:!1,fastKey:ie,getWeak:ne,onFreeze:te}},"./node_modules/core-js/modules/_object-create.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_an-object.js"),U=b("./node_modules/core-js/modules/_object-dps.js"),X=b("./node_modules/core-js/modules/_enum-bug-keys.js"),K=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),de=function(){},ve="prototype",we=function(){var ee=b("./node_modules/core-js/modules/_dom-create.js")("iframe"),ie=X.length,ne="<",te=">",he;for(ee.style.display="none",b("./node_modules/core-js/modules/_html.js").appendChild(ee),ee.src="javascript:",he=ee.contentWindow.document,he.open(),he.write(ne+"script"+te+"document.F=Object"+ne+"/script"+te),he.close(),we=he.F;ie--;)delete we[ve][X[ie]];return we()};G.exports=Object.create||function(ie,ne){var te;return ie!==null?(de[ve]=k(ie),te=new de,de[ve]=null,te[K]=ie):te=we(),ne===void 0?te:U(te,ne)}},"./node_modules/core-js/modules/_object-dp.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_an-object.js"),U=b("./node_modules/core-js/modules/_ie8-dom-define.js"),X=b("./node_modules/core-js/modules/_to-primitive.js"),K=Object.defineProperty;j.f=b("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ve,we,ee){if(k(ve),we=X(we,!0),k(ee),U)try{return K(ve,we,ee)}catch{}if("get"in ee||"set"in ee)throw TypeError("Accessors not supported!");return"value"in ee&&(ve[we]=ee.value),ve}},"./node_modules/core-js/modules/_object-dps.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-dp.js"),U=b("./node_modules/core-js/modules/_an-object.js"),X=b("./node_modules/core-js/modules/_object-keys.js");G.exports=b("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(de,ve){U(de);for(var we=X(ve),ee=we.length,ie=0,ne;ee>ie;)k.f(de,ne=we[ie++],ve[ne]);return de}},"./node_modules/core-js/modules/_object-gopd.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-pie.js"),U=b("./node_modules/core-js/modules/_property-desc.js"),X=b("./node_modules/core-js/modules/_to-iobject.js"),K=b("./node_modules/core-js/modules/_to-primitive.js"),de=b("./node_modules/core-js/modules/_has.js"),ve=b("./node_modules/core-js/modules/_ie8-dom-define.js"),we=Object.getOwnPropertyDescriptor;j.f=b("./node_modules/core-js/modules/_descriptors.js")?we:function(ie,ne){if(ie=X(ie),ne=K(ne,!0),ve)try{return we(ie,ne)}catch{}if(de(ie,ne))return U(!k.f.call(ie,ne),ie[ne])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_to-iobject.js"),U=b("./node_modules/core-js/modules/_object-gopn.js").f,X={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],de=function(ve){try{return U(ve)}catch{return K.slice()}};G.exports.f=function(we){return K&&X.call(we)=="[object Window]"?de(we):U(k(we))}},"./node_modules/core-js/modules/_object-gopn.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-keys-internal.js"),U=b("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");j.f=Object.getOwnPropertyNames||function(K){return k(K,U)}},"./node_modules/core-js/modules/_object-gops.js":function(G,j){j.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_has.js"),U=b("./node_modules/core-js/modules/_to-object.js"),X=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),K=Object.prototype;G.exports=Object.getPrototypeOf||function(de){return de=U(de),k(de,X)?de[X]:typeof de.constructor=="function"&&de instanceof de.constructor?de.constructor.prototype:de instanceof Object?K:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_has.js"),U=b("./node_modules/core-js/modules/_to-iobject.js"),X=b("./node_modules/core-js/modules/_array-includes.js")(!1),K=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");G.exports=function(de,ve){var we=U(de),ee=0,ie=[],ne;for(ne in we)ne!=K&&k(we,ne)&&ie.push(ne);for(;ve.length>ee;)k(we,ne=ve[ee++])&&(~X(ie,ne)||ie.push(ne));return ie}},"./node_modules/core-js/modules/_object-keys.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-keys-internal.js"),U=b("./node_modules/core-js/modules/_enum-bug-keys.js");G.exports=Object.keys||function(K){return k(K,U)}},"./node_modules/core-js/modules/_object-pie.js":function(G,j){j.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-gopn.js"),U=b("./node_modules/core-js/modules/_object-gops.js"),X=b("./node_modules/core-js/modules/_an-object.js"),K=b("./node_modules/core-js/modules/_global.js").Reflect;G.exports=K&&K.ownKeys||function(ve){var we=k.f(X(ve)),ee=U.f;return ee?we.concat(ee(ve)):we}},"./node_modules/core-js/modules/_property-desc.js":function(G,j){G.exports=function(b,k){return{enumerable:!(b&1),configurable:!(b&2),writable:!(b&4),value:k}}},"./node_modules/core-js/modules/_redefine.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_global.js"),U=b("./node_modules/core-js/modules/_hide.js"),X=b("./node_modules/core-js/modules/_has.js"),K=b("./node_modules/core-js/modules/_uid.js")("src"),de=b("./node_modules/core-js/modules/_function-to-string.js"),ve="toString",we=(""+de).split(ve);b("./node_modules/core-js/modules/_core.js").inspectSource=function(ee){return de.call(ee)},(G.exports=function(ee,ie,ne,te){var he=typeof ne=="function";he&&(X(ne,"name")||U(ne,"name",ie)),ee[ie]!==ne&&(he&&(X(ne,K)||U(ne,K,ee[ie]?""+ee[ie]:we.join(String(ie)))),ee===k?ee[ie]=ne:te?ee[ie]?ee[ie]=ne:U(ee,ie,ne):(delete ee[ie],U(ee,ie,ne)))})(Function.prototype,ve,function(){return typeof this=="function"&&this[K]||de.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_classof.js"),U=RegExp.prototype.exec;G.exports=function(X,K){var de=X.exec;if(typeof de=="function"){var ve=de.call(X,K);if(typeof ve!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ve}if(k(X)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return U.call(X,K)}},"./node_modules/core-js/modules/_regexp-exec.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_flags.js"),U=RegExp.prototype.exec,X=String.prototype.replace,K=U,de="lastIndex",ve=function(){var ie=/a/,ne=/b*/g;return U.call(ie,"a"),U.call(ne,"a"),ie[de]!==0||ne[de]!==0}(),we=/()??/.exec("")[1]!==void 0,ee=ve||we;ee&&(K=function(ne){var te=this,he,_e,xe,je;return we&&(_e=new RegExp("^"+te.source+"$(?!\\s)",k.call(te))),ve&&(he=te[de]),xe=U.call(te,ne),ve&&xe&&(te[de]=te.global?xe.index+xe[0].length:he),we&&xe&&xe.length>1&&X.call(xe[0],_e,function(){for(je=1;je<arguments.length-2;je++)arguments[je]===void 0&&(xe[je]=void 0)}),xe}),G.exports=K},"./node_modules/core-js/modules/_set-to-string-tag.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-dp.js").f,U=b("./node_modules/core-js/modules/_has.js"),X=b("./node_modules/core-js/modules/_wks.js")("toStringTag");G.exports=function(K,de,ve){K&&!U(K=ve?K:K.prototype,X)&&k(K,X,{configurable:!0,value:de})}},"./node_modules/core-js/modules/_shared-key.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_shared.js")("keys"),U=b("./node_modules/core-js/modules/_uid.js");G.exports=function(X){return k[X]||(k[X]=U(X))}},"./node_modules/core-js/modules/_shared.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_core.js"),U=b("./node_modules/core-js/modules/_global.js"),X="__core-js_shared__",K=U[X]||(U[X]={});(G.exports=function(de,ve){return K[de]||(K[de]=ve!==void 0?ve:{})})("versions",[]).push({version:k.version,mode:b("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_an-object.js"),U=b("./node_modules/core-js/modules/_a-function.js"),X=b("./node_modules/core-js/modules/_wks.js")("species");G.exports=function(K,de){var ve=k(K).constructor,we;return ve===void 0||(we=k(ve)[X])==null?de:U(we)}},"./node_modules/core-js/modules/_string-at.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_to-integer.js"),U=b("./node_modules/core-js/modules/_defined.js");G.exports=function(X){return function(K,de){var ve=String(U(K)),we=k(de),ee=ve.length,ie,ne;return we<0||we>=ee?X?"":void 0:(ie=ve.charCodeAt(we),ie<55296||ie>56319||we+1===ee||(ne=ve.charCodeAt(we+1))<56320||ne>57343?X?ve.charAt(we):ie:X?ve.slice(we,we+2):(ie-55296<<10)+(ne-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_is-regexp.js"),U=b("./node_modules/core-js/modules/_defined.js");G.exports=function(X,K,de){if(k(K))throw TypeError("String#"+de+" doesn't accept regex!");return String(U(X))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_to-integer.js"),U=Math.max,X=Math.min;G.exports=function(K,de){return K=k(K),K<0?U(K+de,0):X(K,de)}},"./node_modules/core-js/modules/_to-integer.js":function(G,j){var b=Math.ceil,k=Math.floor;G.exports=function(U){return isNaN(U=+U)?0:(U>0?k:b)(U)}},"./node_modules/core-js/modules/_to-iobject.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_iobject.js"),U=b("./node_modules/core-js/modules/_defined.js");G.exports=function(X){return k(U(X))}},"./node_modules/core-js/modules/_to-length.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_to-integer.js"),U=Math.min;G.exports=function(X){return X>0?U(k(X),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_defined.js");G.exports=function(U){return Object(k(U))}},"./node_modules/core-js/modules/_to-primitive.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_is-object.js");G.exports=function(U,X){if(!k(U))return U;var K,de;if(X&&typeof(K=U.toString)=="function"&&!k(de=K.call(U))||typeof(K=U.valueOf)=="function"&&!k(de=K.call(U))||!X&&typeof(K=U.toString)=="function"&&!k(de=K.call(U)))return de;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(G,j){var b=0,k=Math.random();G.exports=function(U){return"Symbol(".concat(U===void 0?"":U,")_",(++b+k).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_global.js"),U=b("./node_modules/core-js/modules/_core.js"),X=b("./node_modules/core-js/modules/_library.js"),K=b("./node_modules/core-js/modules/_wks-ext.js"),de=b("./node_modules/core-js/modules/_object-dp.js").f;G.exports=function(ve){var we=U.Symbol||(U.Symbol=X?{}:k.Symbol||{});ve.charAt(0)!="_"&&!(ve in we)&&de(we,ve,{value:K.f(ve)})}},"./node_modules/core-js/modules/_wks-ext.js":function(G,j,b){j.f=b("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_shared.js")("wks"),U=b("./node_modules/core-js/modules/_uid.js"),X=b("./node_modules/core-js/modules/_global.js").Symbol,K=typeof X=="function",de=G.exports=function(ve){return k[ve]||(k[ve]=K&&X[ve]||(K?X:U)("Symbol."+ve))};de.store=k},"./node_modules/core-js/modules/core.get-iterator-method.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_classof.js"),U=b("./node_modules/core-js/modules/_wks.js")("iterator"),X=b("./node_modules/core-js/modules/_iterators.js");G.exports=b("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(K){if(K!=null)return K[U]||K["@@iterator"]||X[k(K)]}},"./node_modules/core-js/modules/es6.array.from.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_ctx.js"),U=b("./node_modules/core-js/modules/_export.js"),X=b("./node_modules/core-js/modules/_to-object.js"),K=b("./node_modules/core-js/modules/_iter-call.js"),de=b("./node_modules/core-js/modules/_is-array-iter.js"),ve=b("./node_modules/core-js/modules/_to-length.js"),we=b("./node_modules/core-js/modules/_create-property.js"),ee=b("./node_modules/core-js/modules/core.get-iterator-method.js");U(U.S+U.F*!b("./node_modules/core-js/modules/_iter-detect.js")(function(ie){Array.from(ie)}),"Array",{from:function(ne){var te=X(ne),he=typeof this=="function"?this:Array,_e=arguments.length,xe=_e>1?arguments[1]:void 0,je=xe!==void 0,Ie=0,Pe=ee(te),$e,Ne,qe,at;if(je&&(xe=k(xe,_e>2?arguments[2]:void 0,2)),Pe!=null&&!(he==Array&&de(Pe)))for(at=Pe.call(te),Ne=new he;!(qe=at.next()).done;Ie++)we(Ne,Ie,je?K(at,xe,[qe.value,Ie],!0):qe.value);else for($e=ve(te.length),Ne=new he($e);$e>Ie;Ie++)we(Ne,Ie,je?xe(te[Ie],Ie):te[Ie]);return Ne.length=Ie,Ne}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_add-to-unscopables.js"),U=b("./node_modules/core-js/modules/_iter-step.js"),X=b("./node_modules/core-js/modules/_iterators.js"),K=b("./node_modules/core-js/modules/_to-iobject.js");G.exports=b("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(de,ve){this._t=K(de),this._i=0,this._k=ve},function(){var de=this._t,ve=this._k,we=this._i++;return!de||we>=de.length?(this._t=void 0,U(1)):ve=="keys"?U(0,we):ve=="values"?U(0,de[we]):U(0,[we,de[we]])},"values"),X.Arguments=X.Array,k("keys"),k("values"),k("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_export.js");k(k.P,"Function",{bind:b("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_object-dp.js").f,U=Function.prototype,X=/^\s*function ([^ (]*)/,K="name";K in U||b("./node_modules/core-js/modules/_descriptors.js")&&k(U,K,{configurable:!0,get:function(){try{return(""+this).match(X)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_export.js"),U=b("./node_modules/core-js/modules/_global.js").isFinite;k(k.S,"Number",{isFinite:function(K){return typeof K=="number"&&U(K)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_classof.js"),U={};U[b("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",U+""!="[object z]"&&b("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+k(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_regexp-exec.js");b("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:k!==/./.exec},{exec:k})},"./node_modules/core-js/modules/es6.regexp.split.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_is-regexp.js"),U=b("./node_modules/core-js/modules/_an-object.js"),X=b("./node_modules/core-js/modules/_species-constructor.js"),K=b("./node_modules/core-js/modules/_advance-string-index.js"),de=b("./node_modules/core-js/modules/_to-length.js"),ve=b("./node_modules/core-js/modules/_regexp-exec-abstract.js"),we=b("./node_modules/core-js/modules/_regexp-exec.js"),ee=b("./node_modules/core-js/modules/_fails.js"),ie=Math.min,ne=[].push,te="split",he="length",_e="lastIndex",xe=4294967295,je=!ee(function(){});b("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ie,Pe,$e,Ne){var qe;return"abbc"[te](/(b)*/)[1]=="c"||"test"[te](/(?:)/,-1)[he]!=4||"ab"[te](/(?:ab)*/)[he]!=2||"."[te](/(.?)(.?)/)[he]!=4||"."[te](/()()/)[he]>1||""[te](/.?/)[he]?qe=function(at,yt){var Pt=String(this);if(at===void 0&&yt===0)return[];if(!k(at))return $e.call(Pt,at,yt);for(var ht=[],Et=(at.ignoreCase?"i":"")+(at.multiline?"m":"")+(at.unicode?"u":"")+(at.sticky?"y":""),Nt=0,jt=yt===void 0?xe:yt>>>0,cn=new RegExp(at.source,Et+"g"),Cn,bn,on;(Cn=we.call(cn,Pt))&&(bn=cn[_e],!(bn>Nt&&(ht.push(Pt.slice(Nt,Cn.index)),Cn[he]>1&&Cn.index<Pt[he]&&ne.apply(ht,Cn.slice(1)),on=Cn[0][he],Nt=bn,ht[he]>=jt)));)cn[_e]===Cn.index&&cn[_e]++;return Nt===Pt[he]?(on||!cn.test(""))&&ht.push(""):ht.push(Pt.slice(Nt)),ht[he]>jt?ht.slice(0,jt):ht}:"0"[te](void 0,0)[he]?qe=function(at,yt){return at===void 0&&yt===0?[]:$e.call(this,at,yt)}:qe=$e,[function(yt,Pt){var ht=Ie(this),Et=yt==null?void 0:yt[Pe];return Et!==void 0?Et.call(yt,ht,Pt):qe.call(String(ht),yt,Pt)},function(at,yt){var Pt=Ne(qe,at,this,yt,qe!==$e);if(Pt.done)return Pt.value;var ht=U(at),Et=String(this),Nt=X(ht,RegExp),jt=ht.unicode,cn=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(je?"y":"g"),Cn=new Nt(je?ht:"^(?:"+ht.source+")",cn),bn=yt===void 0?xe:yt>>>0;if(bn===0)return[];if(Et.length===0)return ve(Cn,Et)===null?[Et]:[];for(var on=0,En=0,Ee=[];En<Et.length;){Cn.lastIndex=je?En:0;var R=ve(Cn,je?Et:Et.slice(En)),O;if(R===null||(O=ie(de(Cn.lastIndex+(je?0:En)),Et.length))===on)En=K(Et,En,jt);else{if(Ee.push(Et.slice(on,En)),Ee.length===bn)return Ee;for(var pe=1;pe<=R.length-1;pe++)if(Ee.push(R[pe]),Ee.length===bn)return Ee;En=on=O}}return Ee.push(Et.slice(on)),Ee}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_export.js"),U=b("./node_modules/core-js/modules/_string-context.js"),X="includes";k(k.P+k.F*b("./node_modules/core-js/modules/_fails-is-regexp.js")(X),"String",{includes:function(de){return!!~U(this,de,X).indexOf(de,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_global.js"),U=b("./node_modules/core-js/modules/_has.js"),X=b("./node_modules/core-js/modules/_descriptors.js"),K=b("./node_modules/core-js/modules/_export.js"),de=b("./node_modules/core-js/modules/_redefine.js"),ve=b("./node_modules/core-js/modules/_meta.js").KEY,we=b("./node_modules/core-js/modules/_fails.js"),ee=b("./node_modules/core-js/modules/_shared.js"),ie=b("./node_modules/core-js/modules/_set-to-string-tag.js"),ne=b("./node_modules/core-js/modules/_uid.js"),te=b("./node_modules/core-js/modules/_wks.js"),he=b("./node_modules/core-js/modules/_wks-ext.js"),_e=b("./node_modules/core-js/modules/_wks-define.js"),xe=b("./node_modules/core-js/modules/_enum-keys.js"),je=b("./node_modules/core-js/modules/_is-array.js"),Ie=b("./node_modules/core-js/modules/_an-object.js"),Pe=b("./node_modules/core-js/modules/_is-object.js"),$e=b("./node_modules/core-js/modules/_to-object.js"),Ne=b("./node_modules/core-js/modules/_to-iobject.js"),qe=b("./node_modules/core-js/modules/_to-primitive.js"),at=b("./node_modules/core-js/modules/_property-desc.js"),yt=b("./node_modules/core-js/modules/_object-create.js"),Pt=b("./node_modules/core-js/modules/_object-gopn-ext.js"),ht=b("./node_modules/core-js/modules/_object-gopd.js"),Et=b("./node_modules/core-js/modules/_object-gops.js"),Nt=b("./node_modules/core-js/modules/_object-dp.js"),jt=b("./node_modules/core-js/modules/_object-keys.js"),cn=ht.f,Cn=Nt.f,bn=Pt.f,on=k.Symbol,En=k.JSON,Ee=En&&En.stringify,R="prototype",O=te("_hidden"),pe=te("toPrimitive"),ze={}.propertyIsEnumerable,Ke=ee("symbol-registry"),ot=ee("symbols"),ae=ee("op-symbols"),A=Object[R],z=typeof on=="function"&&!!Et.f,be=k.QObject,Be=!be||!be[R]||!be[R].findChild,Xe=X&&we(function(){return yt(Cn({},"a",{get:function(){return Cn(this,"a",{value:7}).a}})).a!=7})?function(Zt,Gt,Ht){var An=cn(A,Gt);An&&delete A[Gt],Cn(Zt,Gt,Ht),An&&Zt!==A&&Cn(A,Gt,An)}:Cn,Qe=function(Zt){var Gt=ot[Zt]=yt(on[R]);return Gt._k=Zt,Gt},Wt=z&&typeof on.iterator=="symbol"?function(Zt){return typeof Zt=="symbol"}:function(Zt){return Zt instanceof on},Sn=function(Gt,Ht,An){return Gt===A&&Sn(ae,Ht,An),Ie(Gt),Ht=qe(Ht,!0),Ie(An),U(ot,Ht)?(An.enumerable?(U(Gt,O)&&Gt[O][Ht]&&(Gt[O][Ht]=!1),An=yt(An,{enumerable:at(0,!1)})):(U(Gt,O)||Cn(Gt,O,at(1,{})),Gt[O][Ht]=!0),Xe(Gt,Ht,An)):Cn(Gt,Ht,An)},fn=function(Gt,Ht){Ie(Gt);for(var An=xe(Ht=Ne(Ht)),zn=0,ir=An.length,Gr;ir>zn;)Sn(Gt,Gr=An[zn++],Ht[Gr]);return Gt},ft=function(Gt,Ht){return Ht===void 0?yt(Gt):fn(yt(Gt),Ht)},Mt=function(Gt){var Ht=ze.call(this,Gt=qe(Gt,!0));return this===A&&U(ot,Gt)&&!U(ae,Gt)?!1:Ht||!U(this,Gt)||!U(ot,Gt)||U(this,O)&&this[O][Gt]?Ht:!0},un=function(Gt,Ht){if(Gt=Ne(Gt),Ht=qe(Ht,!0),!(Gt===A&&U(ot,Ht)&&!U(ae,Ht))){var An=cn(Gt,Ht);return An&&U(ot,Ht)&&!(U(Gt,O)&&Gt[O][Ht])&&(An.enumerable=!0),An}},Ir=function(Gt){for(var Ht=bn(Ne(Gt)),An=[],zn=0,ir;Ht.length>zn;)!U(ot,ir=Ht[zn++])&&ir!=O&&ir!=ve&&An.push(ir);return An},Qr=function(Gt){for(var Ht=Gt===A,An=bn(Ht?ae:Ne(Gt)),zn=[],ir=0,Gr;An.length>ir;)U(ot,Gr=An[ir++])&&(!Ht||U(A,Gr))&&zn.push(ot[Gr]);return zn};z||(on=function(){if(this instanceof on)throw TypeError("Symbol is not a constructor!");var Gt=ne(arguments.length>0?arguments[0]:void 0),Ht=function(An){this===A&&Ht.call(ae,An),U(this,O)&&U(this[O],Gt)&&(this[O][Gt]=!1),Xe(this,Gt,at(1,An))};return X&&Be&&Xe(A,Gt,{configurable:!0,set:Ht}),Qe(Gt)},de(on[R],"toString",function(){return this._k}),ht.f=un,Nt.f=Sn,b("./node_modules/core-js/modules/_object-gopn.js").f=Pt.f=Ir,b("./node_modules/core-js/modules/_object-pie.js").f=Mt,Et.f=Qr,X&&!b("./node_modules/core-js/modules/_library.js")&&de(A,"propertyIsEnumerable",Mt,!0),he.f=function(Zt){return Qe(te(Zt))}),K(K.G+K.W+K.F*!z,{Symbol:on});for(var hn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rr=0;hn.length>rr;)te(hn[rr++]);for(var wi=jt(te.store),_r=0;wi.length>_r;)_e(wi[_r++]);K(K.S+K.F*!z,"Symbol",{for:function(Zt){return U(Ke,Zt+="")?Ke[Zt]:Ke[Zt]=on(Zt)},keyFor:function(Gt){if(!Wt(Gt))throw TypeError(Gt+" is not a symbol!");for(var Ht in Ke)if(Ke[Ht]===Gt)return Ht},useSetter:function(){Be=!0},useSimple:function(){Be=!1}}),K(K.S+K.F*!z,"Object",{create:ft,defineProperty:Sn,defineProperties:fn,getOwnPropertyDescriptor:un,getOwnPropertyNames:Ir,getOwnPropertySymbols:Qr});var Vr=we(function(){Et.f(1)});K(K.S+K.F*Vr,"Object",{getOwnPropertySymbols:function(Gt){return Et.f($e(Gt))}}),En&&K(K.S+K.F*(!z||we(function(){var Zt=on();return Ee([Zt])!="[null]"||Ee({a:Zt})!="{}"||Ee(Object(Zt))!="{}"})),"JSON",{stringify:function(Gt){for(var Ht=[Gt],An=1,zn,ir;arguments.length>An;)Ht.push(arguments[An++]);if(ir=zn=Ht[1],!(!Pe(zn)&&Gt===void 0||Wt(Gt)))return je(zn)||(zn=function(Gr,hi){if(typeof ir=="function"&&(hi=ir.call(this,Gr,hi)),!Wt(hi))return hi}),Ht[1]=zn,Ee.apply(En,Ht)}}),on[R][pe]||b("./node_modules/core-js/modules/_hide.js")(on[R],pe,on[R].valueOf),ie(on,"Symbol"),ie(Math,"Math",!0),ie(k.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_export.js"),U=b("./node_modules/core-js/modules/_array-includes.js")(!0);k(k.P,"Array",{includes:function(K){return U(this,K,arguments.length>1?arguments[1]:void 0)}}),b("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(G,j,b){var k=b("./node_modules/core-js/modules/_export.js"),U=b("./node_modules/core-js/modules/_own-keys.js"),X=b("./node_modules/core-js/modules/_to-iobject.js"),K=b("./node_modules/core-js/modules/_object-gopd.js"),de=b("./node_modules/core-js/modules/_create-property.js");k(k.S,"Object",{getOwnPropertyDescriptors:function(we){for(var ee=X(we),ie=K.f,ne=U(ee),te={},he=0,_e,xe;ne.length>he;)xe=ie(ee,_e=ne[he++]),xe!==void 0&&de(te,_e,xe);return te}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(G,j,b){b("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(G,j,b){for(var k=b("./node_modules/core-js/modules/es6.array.iterator.js"),U=b("./node_modules/core-js/modules/_object-keys.js"),X=b("./node_modules/core-js/modules/_redefine.js"),K=b("./node_modules/core-js/modules/_global.js"),de=b("./node_modules/core-js/modules/_hide.js"),ve=b("./node_modules/core-js/modules/_iterators.js"),we=b("./node_modules/core-js/modules/_wks.js"),ee=we("iterator"),ie=we("toStringTag"),ne=ve.Array,te={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},he=U(te),_e=0;_e<he.length;_e++){var xe=he[_e],je=te[xe],Ie=K[xe],Pe=Ie&&Ie.prototype,$e;if(Pe&&(Pe[ee]||de(Pe,ee,ne),Pe[ie]||de(Pe,ie,xe),ve[xe]=ne,je))for($e in k)Pe[$e]||X(Pe,$e,k[$e],!0)}},"./node_modules/crypt/crypt.js":function(G,j){(function(){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k={rotl:function(U,X){return U<<X|U>>>32-X},rotr:function(U,X){return U<<32-X|U>>>X},endian:function(U){if(U.constructor==Number)return k.rotl(U,8)&16711935|k.rotl(U,24)&4278255360;for(var X=0;X<U.length;X++)U[X]=k.endian(U[X]);return U},randomBytes:function(U){for(var X=[];U>0;U--)X.push(Math.floor(Math.random()*256));return X},bytesToWords:function(U){for(var X=[],K=0,de=0;K<U.length;K++,de+=8)X[de>>>5]|=U[K]<<24-de%32;return X},wordsToBytes:function(U){for(var X=[],K=0;K<U.length*32;K+=8)X.push(U[K>>>5]>>>24-K%32&255);return X},bytesToHex:function(U){for(var X=[],K=0;K<U.length;K++)X.push((U[K]>>>4).toString(16)),X.push((U[K]&15).toString(16));return X.join("")},hexToBytes:function(U){for(var X=[],K=0;K<U.length;K+=2)X.push(parseInt(U.substr(K,2),16));return X},bytesToBase64:function(U){for(var X=[],K=0;K<U.length;K+=3)for(var de=U[K]<<16|U[K+1]<<8|U[K+2],ve=0;ve<4;ve++)K*8+ve*6<=U.length*8?X.push(b.charAt(de>>>6*(3-ve)&63)):X.push("=");return X.join("")},base64ToBytes:function(U){U=U.replace(/[^A-Z0-9+\/]/ig,"");for(var X=[],K=0,de=0;K<U.length;de=++K%4)de!=0&&X.push((b.indexOf(U.charAt(K-1))&Math.pow(2,-2*de+8)-1)<<de*2|b.indexOf(U.charAt(K))>>>6-de*2);return X}};G.exports=k})()},"./node_modules/is-buffer/index.js":function(G,j){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */G.exports=function(U){return U!=null&&(b(U)||k(U)||!!U._isBuffer)};function b(U){return!!U.constructor&&typeof U.constructor.isBuffer=="function"&&U.constructor.isBuffer(U)}function k(U){return typeof U.readFloatLE=="function"&&typeof U.slice=="function"&&b(U.slice(0,0))}},"./node_modules/md5/md5.js":function(G,j,b){(function(){var k=b("./node_modules/crypt/crypt.js"),U=b("./node_modules/charenc/charenc.js").utf8,X=b("./node_modules/is-buffer/index.js"),K=b("./node_modules/charenc/charenc.js").bin,de=function(ve,we){ve.constructor==String?we&&we.encoding==="binary"?ve=K.stringToBytes(ve):ve=U.stringToBytes(ve):X(ve)?ve=Array.prototype.slice.call(ve,0):!Array.isArray(ve)&&ve.constructor!==Uint8Array&&(ve=ve.toString());for(var ee=k.bytesToWords(ve),ie=ve.length*8,ne=1732584193,te=-271733879,he=-1732584194,_e=271733878,xe=0;xe<ee.length;xe++)ee[xe]=(ee[xe]<<8|ee[xe]>>>24)&16711935|(ee[xe]<<24|ee[xe]>>>8)&4278255360;ee[ie>>>5]|=128<<ie%32,ee[(ie+64>>>9<<4)+14]=ie;for(var je=de._ff,Ie=de._gg,Pe=de._hh,$e=de._ii,xe=0;xe<ee.length;xe+=16){var Ne=ne,qe=te,at=he,yt=_e;ne=je(ne,te,he,_e,ee[xe+0],7,-680876936),_e=je(_e,ne,te,he,ee[xe+1],12,-389564586),he=je(he,_e,ne,te,ee[xe+2],17,606105819),te=je(te,he,_e,ne,ee[xe+3],22,-1044525330),ne=je(ne,te,he,_e,ee[xe+4],7,-176418897),_e=je(_e,ne,te,he,ee[xe+5],12,1200080426),he=je(he,_e,ne,te,ee[xe+6],17,-1473231341),te=je(te,he,_e,ne,ee[xe+7],22,-45705983),ne=je(ne,te,he,_e,ee[xe+8],7,1770035416),_e=je(_e,ne,te,he,ee[xe+9],12,-1958414417),he=je(he,_e,ne,te,ee[xe+10],17,-42063),te=je(te,he,_e,ne,ee[xe+11],22,-1990404162),ne=je(ne,te,he,_e,ee[xe+12],7,1804603682),_e=je(_e,ne,te,he,ee[xe+13],12,-40341101),he=je(he,_e,ne,te,ee[xe+14],17,-1502002290),te=je(te,he,_e,ne,ee[xe+15],22,1236535329),ne=Ie(ne,te,he,_e,ee[xe+1],5,-165796510),_e=Ie(_e,ne,te,he,ee[xe+6],9,-1069501632),he=Ie(he,_e,ne,te,ee[xe+11],14,643717713),te=Ie(te,he,_e,ne,ee[xe+0],20,-373897302),ne=Ie(ne,te,he,_e,ee[xe+5],5,-701558691),_e=Ie(_e,ne,te,he,ee[xe+10],9,38016083),he=Ie(he,_e,ne,te,ee[xe+15],14,-660478335),te=Ie(te,he,_e,ne,ee[xe+4],20,-405537848),ne=Ie(ne,te,he,_e,ee[xe+9],5,568446438),_e=Ie(_e,ne,te,he,ee[xe+14],9,-1019803690),he=Ie(he,_e,ne,te,ee[xe+3],14,-187363961),te=Ie(te,he,_e,ne,ee[xe+8],20,1163531501),ne=Ie(ne,te,he,_e,ee[xe+13],5,-1444681467),_e=Ie(_e,ne,te,he,ee[xe+2],9,-51403784),he=Ie(he,_e,ne,te,ee[xe+7],14,1735328473),te=Ie(te,he,_e,ne,ee[xe+12],20,-1926607734),ne=Pe(ne,te,he,_e,ee[xe+5],4,-378558),_e=Pe(_e,ne,te,he,ee[xe+8],11,-2022574463),he=Pe(he,_e,ne,te,ee[xe+11],16,1839030562),te=Pe(te,he,_e,ne,ee[xe+14],23,-35309556),ne=Pe(ne,te,he,_e,ee[xe+1],4,-1530992060),_e=Pe(_e,ne,te,he,ee[xe+4],11,1272893353),he=Pe(he,_e,ne,te,ee[xe+7],16,-155497632),te=Pe(te,he,_e,ne,ee[xe+10],23,-1094730640),ne=Pe(ne,te,he,_e,ee[xe+13],4,681279174),_e=Pe(_e,ne,te,he,ee[xe+0],11,-358537222),he=Pe(he,_e,ne,te,ee[xe+3],16,-722521979),te=Pe(te,he,_e,ne,ee[xe+6],23,76029189),ne=Pe(ne,te,he,_e,ee[xe+9],4,-640364487),_e=Pe(_e,ne,te,he,ee[xe+12],11,-421815835),he=Pe(he,_e,ne,te,ee[xe+15],16,530742520),te=Pe(te,he,_e,ne,ee[xe+2],23,-995338651),ne=$e(ne,te,he,_e,ee[xe+0],6,-198630844),_e=$e(_e,ne,te,he,ee[xe+7],10,1126891415),he=$e(he,_e,ne,te,ee[xe+14],15,-1416354905),te=$e(te,he,_e,ne,ee[xe+5],21,-57434055),ne=$e(ne,te,he,_e,ee[xe+12],6,1700485571),_e=$e(_e,ne,te,he,ee[xe+3],10,-1894986606),he=$e(he,_e,ne,te,ee[xe+10],15,-1051523),te=$e(te,he,_e,ne,ee[xe+1],21,-2054922799),ne=$e(ne,te,he,_e,ee[xe+8],6,1873313359),_e=$e(_e,ne,te,he,ee[xe+15],10,-30611744),he=$e(he,_e,ne,te,ee[xe+6],15,-1560198380),te=$e(te,he,_e,ne,ee[xe+13],21,1309151649),ne=$e(ne,te,he,_e,ee[xe+4],6,-145523070),_e=$e(_e,ne,te,he,ee[xe+11],10,-1120210379),he=$e(he,_e,ne,te,ee[xe+2],15,718787259),te=$e(te,he,_e,ne,ee[xe+9],21,-343485551),ne=ne+Ne>>>0,te=te+qe>>>0,he=he+at>>>0,_e=_e+yt>>>0}return k.endian([ne,te,he,_e])};de._ff=function(ve,we,ee,ie,ne,te,he){var _e=ve+(we&ee|~we&ie)+(ne>>>0)+he;return(_e<<te|_e>>>32-te)+we},de._gg=function(ve,we,ee,ie,ne,te,he){var _e=ve+(we&ie|ee&~ie)+(ne>>>0)+he;return(_e<<te|_e>>>32-te)+we},de._hh=function(ve,we,ee,ie,ne,te,he){var _e=ve+(we^ee^ie)+(ne>>>0)+he;return(_e<<te|_e>>>32-te)+we},de._ii=function(ve,we,ee,ie,ne,te,he){var _e=ve+(ee^(we|~ie))+(ne>>>0)+he;return(_e<<te|_e>>>32-te)+we},de._blocksize=16,de._digestsize=16,G.exports=function(ve,we){if(ve==null)throw new Error("Illegal argument "+ve);var ee=k.wordsToBytes(de(ve,we));return we&&we.asBytes?ee:we&&we.asString?K.bytesToString(ee):k.bytesToHex(ee)}})()},"./node_modules/regenerator-runtime/runtime.js":function(G,j,b){var k=function(U){var X=Object.prototype,K=X.hasOwnProperty,de,ve=typeof Symbol=="function"?Symbol:{},we=ve.iterator||"@@iterator",ee=ve.asyncIterator||"@@asyncIterator",ie=ve.toStringTag||"@@toStringTag";function ne(R,O,pe){return Object.defineProperty(R,O,{value:pe,enumerable:!0,configurable:!0,writable:!0}),R[O]}try{ne({},"")}catch{ne=function(O,pe,ze){return O[pe]=ze}}function te(R,O,pe,ze){var Ke=O&&O.prototype instanceof $e?O:$e,ot=Object.create(Ke.prototype),ae=new on(ze||[]);return ot._invoke=jt(R,pe,ae),ot}U.wrap=te;function he(R,O,pe){try{return{type:"normal",arg:R.call(O,pe)}}catch(ze){return{type:"throw",arg:ze}}}var _e="suspendedStart",xe="suspendedYield",je="executing",Ie="completed",Pe={};function $e(){}function Ne(){}function qe(){}var at={};at[we]=function(){return this};var yt=Object.getPrototypeOf,Pt=yt&&yt(yt(En([])));Pt&&Pt!==X&&K.call(Pt,we)&&(at=Pt);var ht=qe.prototype=$e.prototype=Object.create(at);Ne.prototype=ht.constructor=qe,qe.constructor=Ne,Ne.displayName=ne(qe,ie,"GeneratorFunction");function Et(R){["next","throw","return"].forEach(function(O){ne(R,O,function(pe){return this._invoke(O,pe)})})}U.isGeneratorFunction=function(R){var O=typeof R=="function"&&R.constructor;return O?O===Ne||(O.displayName||O.name)==="GeneratorFunction":!1},U.mark=function(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,qe):(R.__proto__=qe,ne(R,ie,"GeneratorFunction")),R.prototype=Object.create(ht),R},U.awrap=function(R){return{__await:R}};function Nt(R,O){function pe(ot,ae,A,z){var be=he(R[ot],R,ae);if(be.type==="throw")z(be.arg);else{var Be=be.arg,Xe=Be.value;return Xe&&typeof Xe=="object"&&K.call(Xe,"__await")?O.resolve(Xe.__await).then(function(Qe){pe("next",Qe,A,z)},function(Qe){pe("throw",Qe,A,z)}):O.resolve(Xe).then(function(Qe){Be.value=Qe,A(Be)},function(Qe){return pe("throw",Qe,A,z)})}}var ze;function Ke(ot,ae){function A(){return new O(function(z,be){pe(ot,ae,z,be)})}return ze=ze?ze.then(A,A):A()}this._invoke=Ke}Et(Nt.prototype),Nt.prototype[ee]=function(){return this},U.AsyncIterator=Nt,U.async=function(R,O,pe,ze,Ke){Ke===void 0&&(Ke=Promise);var ot=new Nt(te(R,O,pe,ze),Ke);return U.isGeneratorFunction(O)?ot:ot.next().then(function(ae){return ae.done?ae.value:ot.next()})};function jt(R,O,pe){var ze=_e;return function(ot,ae){if(ze===je)throw new Error("Generator is already running");if(ze===Ie){if(ot==="throw")throw ae;return Ee()}for(pe.method=ot,pe.arg=ae;;){var A=pe.delegate;if(A){var z=cn(A,pe);if(z){if(z===Pe)continue;return z}}if(pe.method==="next")pe.sent=pe._sent=pe.arg;else if(pe.method==="throw"){if(ze===_e)throw ze=Ie,pe.arg;pe.dispatchException(pe.arg)}else pe.method==="return"&&pe.abrupt("return",pe.arg);ze=je;var be=he(R,O,pe);if(be.type==="normal"){if(ze=pe.done?Ie:xe,be.arg===Pe)continue;return{value:be.arg,done:pe.done}}else be.type==="throw"&&(ze=Ie,pe.method="throw",pe.arg=be.arg)}}}function cn(R,O){var pe=R.iterator[O.method];if(pe===de){if(O.delegate=null,O.method==="throw"){if(R.iterator.return&&(O.method="return",O.arg=de,cn(R,O),O.method==="throw"))return Pe;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return Pe}var ze=he(pe,R.iterator,O.arg);if(ze.type==="throw")return O.method="throw",O.arg=ze.arg,O.delegate=null,Pe;var Ke=ze.arg;if(!Ke)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,Pe;if(Ke.done)O[R.resultName]=Ke.value,O.next=R.nextLoc,O.method!=="return"&&(O.method="next",O.arg=de);else return Ke;return O.delegate=null,Pe}Et(ht),ne(ht,ie,"Generator"),ht[we]=function(){return this},ht.toString=function(){return"[object Generator]"};function Cn(R){var O={tryLoc:R[0]};1 in R&&(O.catchLoc=R[1]),2 in R&&(O.finallyLoc=R[2],O.afterLoc=R[3]),this.tryEntries.push(O)}function bn(R){var O=R.completion||{};O.type="normal",delete O.arg,R.completion=O}function on(R){this.tryEntries=[{tryLoc:"root"}],R.forEach(Cn,this),this.reset(!0)}U.keys=function(R){var O=[];for(var pe in R)O.push(pe);return O.reverse(),function ze(){for(;O.length;){var Ke=O.pop();if(Ke in R)return ze.value=Ke,ze.done=!1,ze}return ze.done=!0,ze}};function En(R){if(R){var O=R[we];if(O)return O.call(R);if(typeof R.next=="function")return R;if(!isNaN(R.length)){var pe=-1,ze=function Ke(){for(;++pe<R.length;)if(K.call(R,pe))return Ke.value=R[pe],Ke.done=!1,Ke;return Ke.value=de,Ke.done=!0,Ke};return ze.next=ze}}return{next:Ee}}U.values=En;function Ee(){return{value:de,done:!0}}return on.prototype={constructor:on,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=de,this.done=!1,this.delegate=null,this.method="next",this.arg=de,this.tryEntries.forEach(bn),!R)for(var O in this)O.charAt(0)==="t"&&K.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=de)},stop:function(){this.done=!0;var R=this.tryEntries[0],O=R.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var O=this;function pe(z,be){return ot.type="throw",ot.arg=R,O.next=z,be&&(O.method="next",O.arg=de),!!be}for(var ze=this.tryEntries.length-1;ze>=0;--ze){var Ke=this.tryEntries[ze],ot=Ke.completion;if(Ke.tryLoc==="root")return pe("end");if(Ke.tryLoc<=this.prev){var ae=K.call(Ke,"catchLoc"),A=K.call(Ke,"finallyLoc");if(ae&&A){if(this.prev<Ke.catchLoc)return pe(Ke.catchLoc,!0);if(this.prev<Ke.finallyLoc)return pe(Ke.finallyLoc)}else if(ae){if(this.prev<Ke.catchLoc)return pe(Ke.catchLoc,!0)}else if(A){if(this.prev<Ke.finallyLoc)return pe(Ke.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(R,O){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ze=this.tryEntries[pe];if(ze.tryLoc<=this.prev&&K.call(ze,"finallyLoc")&&this.prev<ze.finallyLoc){var Ke=ze;break}}Ke&&(R==="break"||R==="continue")&&Ke.tryLoc<=O&&O<=Ke.finallyLoc&&(Ke=null);var ot=Ke?Ke.completion:{};return ot.type=R,ot.arg=O,Ke?(this.method="next",this.next=Ke.finallyLoc,Pe):this.complete(ot)},complete:function(R,O){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&O&&(this.next=O),Pe},finish:function(R){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.finallyLoc===R)return this.complete(pe.completion,pe.afterLoc),bn(pe),Pe}},catch:function(R){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.tryLoc===R){var ze=pe.completion;if(ze.type==="throw"){var Ke=ze.arg;bn(pe)}return Ke}}throw new Error("illegal catch attempt")},delegateYield:function(R,O,pe){return this.delegate={iterator:En(R),resultName:O,nextLoc:pe},this.method==="next"&&(this.arg=de),Pe}},U}(G.exports);try{regeneratorRuntime=k}catch{Function("r","regeneratorRuntime = r")(k)}},"./src/api.js":function(G,j,b){b.r(j),b.d(j,"setup",function(){return je}),b.d(j,"setupCache",function(){return xe}),b("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js");var k=b("axios"),U=b.n(k),X=b("./src/request.js"),K=b("./src/cache.js");b.d(j,"serializeQuery",function(){return K.serializeQuery});var de=b("./src/config.js"),ve=b("./src/utilities.js");function we(Ie,Pe){if(Ie==null)return{};var $e=ee(Ie,Pe),Ne,qe;if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(Ie);for(qe=0;qe<at.length;qe++)Ne=at[qe],!(Pe.indexOf(Ne)>=0)&&Object.prototype.propertyIsEnumerable.call(Ie,Ne)&&($e[Ne]=Ie[Ne])}return $e}function ee(Ie,Pe){if(Ie==null)return{};var $e={},Ne=Object.keys(Ie),qe,at;for(at=0;at<Ne.length;at++)qe=Ne[at],!(Pe.indexOf(qe)>=0)&&($e[qe]=Ie[qe]);return $e}function ie(Ie,Pe){var $e=Object.keys(Ie);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(Ie);Pe&&(Ne=Ne.filter(function(qe){return Object.getOwnPropertyDescriptor(Ie,qe).enumerable})),$e.push.apply($e,Ne)}return $e}function ne(Ie){for(var Pe=1;Pe<arguments.length;Pe++){var $e=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?ie(Object($e),!0).forEach(function(Ne){te(Ie,Ne,$e[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors($e)):ie(Object($e)).forEach(function(Ne){Object.defineProperty(Ie,Ne,Object.getOwnPropertyDescriptor($e,Ne))})}return Ie}function te(Ie,Pe,$e){return Pe in Ie?Object.defineProperty(Ie,Pe,{value:$e,enumerable:!0,configurable:!0,writable:!0}):Ie[Pe]=$e,Ie}function he(Ie,Pe,$e,Ne,qe,at,yt){try{var Pt=Ie[at](yt),ht=Pt.value}catch(Et){$e(Et);return}Pt.done?Pe(ht):Promise.resolve(ht).then(Ne,qe)}function _e(Ie){return function(){var Pe=this,$e=arguments;return new Promise(function(Ne,qe){var at=Ie.apply(Pe,$e);function yt(ht){he(at,Ne,qe,yt,Pt,"next",ht)}function Pt(ht){he(at,Ne,qe,yt,Pt,"throw",ht)}yt(void 0)})}}function xe(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie=Object(de.makeConfig)(Ie);function Pe(Ne){return $e.apply(this,arguments)}function $e(){return $e=_e(regeneratorRuntime.mark(function Ne(qe){var at,yt,Pt,ht,Et;return regeneratorRuntime.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return at=Object(de.mergeRequestConfig)(Ie,qe),jt.next=3,Object(X.default)(at,qe);case 3:if(yt=jt.sent,Pt=yt.next,Object(ve.isFunction)(Pt)){jt.next=7;break}return jt.abrupt("return",Pt);case 7:return jt.prev=7,jt.next=10,at.adapter(qe);case 10:yt=jt.sent,jt.next=16;break;case 13:jt.prev=13,jt.t0=jt.catch(7),ht=jt.t0;case 16:if(!ht){jt.next=31;break}if(Et=Object(ve.isFunction)(at.readOnError)?at.readOnError(ht,qe):at.readOnError,!Et){jt.next=30;break}return jt.prev=19,at.acceptStale=!0,jt.next=23,Object(X.default)(at,qe);case 23:return yt=jt.sent,yt.next.request.stale=!0,jt.abrupt("return",yt.next);case 28:jt.prev=28,jt.t1=jt.catch(19);case 30:throw ht;case 31:return jt.abrupt("return",Pt(yt));case 32:case"end":return jt.stop()}},Ne,null,[[7,13],[19,28]])})),$e.apply(this,arguments)}return{adapter:Pe,config:Ie,store:Ie.store}}function je(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=ne(ne(ne({},de.defaults.axios),Ie),{},{cache:ne(ne({},de.defaults.axios.cache),Ie.cache)}),$e=xe(Pe.cache);Pe.cache;var Ne=we(Pe,["cache"]),qe=U.a.create(ne(ne({},Ne),{},{adapter:$e.adapter}));return qe.cache=$e.store,qe}j.default={setup:je,setupCache:xe,serializeQuery:K.serializeQuery}},"./src/cache.js":function(G,j,b){b.r(j),b.d(j,"read",function(){return ie}),b.d(j,"write",function(){return we}),b.d(j,"key",function(){return te}),b.d(j,"invalidate",function(){return xe}),b.d(j,"serializeQuery",function(){return je}),b("./node_modules/core-js/modules/es7.array.includes.js"),b("./node_modules/core-js/modules/es6.string.includes.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var k=b("./src/utilities.js"),U=b("./node_modules/md5/md5.js"),X=b.n(U),K=b("./src/serialize.js");function de(Ie,Pe,$e,Ne,qe,at,yt){try{var Pt=Ie[at](yt),ht=Pt.value}catch(Et){$e(Et);return}Pt.done?Pe(ht):Promise.resolve(ht).then(Ne,qe)}function ve(Ie){return function(){var Pe=this,$e=arguments;return new Promise(function(Ne,qe){var at=Ie.apply(Pe,$e);function yt(ht){de(at,Ne,qe,yt,Pt,"next",ht)}function Pt(ht){de(at,Ne,qe,yt,Pt,"throw",ht)}yt(void 0)})}}function we(Ie,Pe,$e){return ee.apply(this,arguments)}function ee(){return ee=ve(regeneratorRuntime.mark(function Ie(Pe,$e,Ne){var qe;return regeneratorRuntime.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.prev=0,qe={expires:Pe.expires,data:Object(K.default)(Pe,$e,Ne)},yt.next=4,Pe.store.setItem(Pe.uuid,qe);case 4:yt.next=19;break;case 6:if(yt.prev=6,yt.t0=yt.catch(0),Pe.debug("Could not store response",yt.t0),!Pe.clearOnError){yt.next=18;break}return yt.prev=10,yt.next=13,Pe.store.clear();case 13:yt.next=18;break;case 15:yt.prev=15,yt.t1=yt.catch(10),Pe.debug("Could not clear store",yt.t1);case 18:return yt.abrupt("return",!1);case 19:return yt.abrupt("return",!0);case 20:case"end":return yt.stop()}},Ie,null,[[0,6],[10,15]])})),ee.apply(this,arguments)}function ie(Ie,Pe){return ne.apply(this,arguments)}function ne(){return ne=ve(regeneratorRuntime.mark(function Ie(Pe,$e){var Ne,qe,at,yt,Pt,ht,Et,Nt;return regeneratorRuntime.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return Ne=Pe.uuid,qe=Pe.ignoreCache,cn.next=3,Pe.store.getItem(Ne);case 3:if(at=cn.sent,!(qe||!at||!at.data)){cn.next=10;break}throw Pe.debug("cache-miss",$e.url),yt=new Error,yt.reason="cache-miss",yt.message="Entry not found from cache",yt;case 10:if(Pt=at.expires,ht=at.data,Et=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!Et&&!Pe.acceptStale&&Pt!==0&&Pt<Date.now())){cn.next=18;break}throw Pe.debug("cache-stale",$e.url),Nt=new Error,Nt.reason="cache-stale",Nt.message="Entry is stale",Nt;case 18:return Pe.debug(Pe.acceptStale?"cache-hit-stale":"cache-hit",$e.url),cn.abrupt("return",ht);case 20:case"end":return cn.stop()}},Ie)})),ne.apply(this,arguments)}function te(Ie){if(Object(k.isFunction)(Ie.key))return Ie.key;var Pe;return Object(k.isString)(Ie.key)?Pe=function(Ne){var qe="".concat(Ne.baseURL?Ne.baseURL:"").concat(Ne.url),at="".concat(Ie.key,"/").concat(qe).concat(je(Ne));return Ne.data?at+X()(Ne.data):at}:Pe=function(Ne){var qe="".concat(Ne.baseURL?Ne.baseURL:"").concat(Ne.url),at=qe+je(Ne);return Ne.data?at+X()(Ne.data):at},Pe}function he(Ie,Pe){return _e.apply(this,arguments)}function _e(){return _e=ve(regeneratorRuntime.mark(function Ie(Pe,$e){var Ne;return regeneratorRuntime.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:if(Ne=$e.method.toLowerCase(),!Pe.exclude.methods.includes(Ne)){at.next=4;break}return at.next=4,Pe.store.removeItem(Pe.uuid);case 4:case"end":return at.stop()}},Ie)})),_e.apply(this,arguments)}function xe(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(k.isFunction)(Ie.invalidate)?Ie.invalidate:he}function je(Ie){if(!Ie.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ie.params);var Pe=Ie.params,$e=Ie.params instanceof URLSearchParams;return $e||(Pe=new URLSearchParams,Object.keys(Ie.params).forEach(function(Ne){return Pe.append(Ne,Ie.params[Ne])})),"?".concat(Pe.toString())}j.default={read:ie,write:we,key:te,invalidate:xe,serializeQuery:je}},"./src/config.js":function(G,j,b){b.r(j),b.d(j,"defaults",function(){return ne}),b.d(j,"makeConfig",function(){return he}),b.d(j,"mergeRequestConfig",function(){return _e}),b("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var k=b("axios"),U=b.n(k),X=b("./src/memory.js"),K=b("./src/cache.js");function de(xe,je){var Ie=Object.keys(xe);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(xe);je&&(Pe=Pe.filter(function($e){return Object.getOwnPropertyDescriptor(xe,$e).enumerable})),Ie.push.apply(Ie,Pe)}return Ie}function ve(xe){for(var je=1;je<arguments.length;je++){var Ie=arguments[je]!=null?arguments[je]:{};je%2?de(Object(Ie),!0).forEach(function(Pe){we(xe,Pe,Ie[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xe,Object.getOwnPropertyDescriptors(Ie)):de(Object(Ie)).forEach(function(Pe){Object.defineProperty(xe,Pe,Object.getOwnPropertyDescriptor(Ie,Pe))})}return xe}function we(xe,je,Ie){return je in xe?Object.defineProperty(xe,je,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):xe[je]=Ie,xe}var ee=function(){},ie=function(){for(var je,Ie=arguments.length,Pe=new Array(Ie),$e=0;$e<Ie;$e++)Pe[$e]=arguments[$e];return(je=console).log.apply(je,["[axios-cache-adapter]"].concat(Pe))},ne={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:U.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},te=["limit","store","adapter","uuid","acceptStale"],he=function(){var je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=ve(ve(ve({},ne.cache),je),{},{exclude:ve(ve({},ne.cache.exclude),je.exclude)});return Ie.key=Object(K.key)(Ie),Ie.invalidate=Object(K.invalidate)(Ie),Ie.debug!==!1?Ie.debug=typeof Ie.debug=="function"?Ie.debug:ie:Ie.debug=ee,Ie.store||(Ie.store=new X.default),Ie.debug("Global cache config",Ie),Ie},_e=function(je,Ie){var Pe=Ie.cache||{};Pe&&te.forEach(function(Ne){return Pe[Ne]?delete Pe[Ne]:void 0});var $e=ve(ve(ve({},je),Pe),{},{exclude:ve(ve({},je.exclude),Pe.exclude)});return $e.debug===!0&&($e.debug=ie),Pe.key&&($e.key=Object(K.key)(Pe)),$e.uuid=$e.key(Ie),je.debug("Request config for ".concat(Ie.url),$e),$e};j.default={defaults:ne,makeConfig:he,mergeRequestConfig:_e}},"./src/exclude.js":function(G,j,b){b.r(j),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/core-js/modules/es7.array.includes.js"),b("./node_modules/core-js/modules/es6.string.includes.js");var k=b("./src/utilities.js");function U(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1?arguments[1]:void 0,de=X.exclude,ve=de===void 0?{}:de,we=X.debug,ee=K.method.toLowerCase();if(ee==="head"||ve.methods.includes(ee))return we("Excluding request by HTTP method ".concat(K.url)),!0;if(typeof ve.filter=="function"&&ve.filter(K))return we("Excluding request by filter ".concat(K.url)),!0;var ie=/\?.*$/.test(K.url)||Object(k.isObject)(K.params)&&Object.keys(K.params).length!==0||typeof URLSearchParams<"u"&&K.params instanceof URLSearchParams;if(ve.query&&ie)return we("Excluding request by query ".concat(K.url)),!0;var ne=ve.paths||[],te=ne.some(function(he){return K.url.match(he)});return te?(we("Excluding request by url match ".concat(K.url)),!0):!1}j.default=U},"./src/index.node.js":function(G,j,b){b.r(j);var k=b("./src/api.js");b.d(j,"setup",function(){return k.setup}),b.d(j,"setupCache",function(){return k.setupCache}),b.d(j,"serializeQuery",function(){return k.serializeQuery});var U=b("./src/redis.js");b.d(j,"RedisStore",function(){return U.default});var X=b("./src/redis-default.js");b.d(j,"RedisDefaultStore",function(){return X.default}),j.default={setup:k.setup,setupCache:k.setupCache,serializeQuery:k.serializeQuery,RedisStore:U.default,RedisDefaultStore:X.default}},"./src/limit.js":function(G,j,b){b.r(j),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function k(de,ve,we,ee,ie,ne,te){try{var he=de[ne](te),_e=he.value}catch(xe){we(xe);return}he.done?ve(_e):Promise.resolve(_e).then(ee,ie)}function U(de){return function(){var ve=this,we=arguments;return new Promise(function(ee,ie){var ne=de.apply(ve,we);function te(_e){k(ne,ee,ie,te,he,"next",_e)}function he(_e){k(ne,ee,ie,te,he,"throw",_e)}te(void 0)})}}function X(de){return K.apply(this,arguments)}function K(){return K=U(regeneratorRuntime.mark(function de(ve){var we,ee;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,ve.store.length();case 2:if(we=ne.sent,!(we<ve.limit)){ne.next=5;break}return ne.abrupt("return");case 5:return ve.debug("Current store size: ".concat(we)),ne.next=8,ve.store.iterate(function(te,he){ee||(ee={value:te,key:he}),te.expires<ee.value.expires&&(ee={value:te,key:he})});case 8:if(!ee){ne.next=12;break}return ve.debug("Removing item: ".concat(ee.key)),ne.next=12,ve.store.removeItem(ee.key);case 12:case"end":return ne.stop()}},de)})),K.apply(this,arguments)}j.default=X},"./src/memory.js":function(G,j,b){b.r(j),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js");var k=b("./src/utilities.js");function U(ee,ie,ne,te,he,_e,xe){try{var je=ee[_e](xe),Ie=je.value}catch(Pe){ne(Pe);return}je.done?ie(Ie):Promise.resolve(Ie).then(te,he)}function X(ee){return function(){var ie=this,ne=arguments;return new Promise(function(te,he){var _e=ee.apply(ie,ne);function xe(Ie){U(_e,te,he,xe,je,"next",Ie)}function je(Ie){U(_e,te,he,xe,je,"throw",Ie)}xe(void 0)})}}function K(ee,ie){if(!(ee instanceof ie))throw new TypeError("Cannot call a class as a function")}function de(ee,ie){for(var ne=0;ne<ie.length;ne++){var te=ie[ne];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ee,te.key,te)}}function ve(ee,ie,ne){return ie&&de(ee.prototype,ie),ne&&de(ee,ne),ee}var we=function(){function ee(){K(this,ee),this.store={}}return ve(ee,[{key:"getItem",value:function(){var ie=X(regeneratorRuntime.mark(function te(he){var _e;return regeneratorRuntime.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return _e=this.store[he]||null,je.abrupt("return",JSON.parse(_e));case 2:case"end":return je.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ie=X(regeneratorRuntime.mark(function te(he,_e){return regeneratorRuntime.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return this.store[he]=JSON.stringify(_e),je.abrupt("return",_e);case 2:case"end":return je.stop()}},te,this)}));function ne(te,he){return ie.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ie=X(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:delete this.store[he];case 1:case"end":return xe.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ie=X(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:this.store={};case 1:case"end":return _e.stop()}},te,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ie=X(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.abrupt("return",Object.keys(this.store).length);case 1:case"end":return _e.stop()}},te,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"iterate",value:function(ne){return Promise.all(Object(k.mapObject)(this.store,ne))}}]),ee}();j.default=we},"./src/redis-default.js":function(G,j,b){b.r(j),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.function.bind.js"),b("./node_modules/core-js/modules/es6.function.name.js");var k=b("util");function U(ee,ie,ne,te,he,_e,xe){try{var je=ee[_e](xe),Ie=je.value}catch(Pe){ne(Pe);return}je.done?ie(Ie):Promise.resolve(Ie).then(te,he)}function X(ee){return function(){var ie=this,ne=arguments;return new Promise(function(te,he){var _e=ee.apply(ie,ne);function xe(Ie){U(_e,te,he,xe,je,"next",Ie)}function je(Ie){U(_e,te,he,xe,je,"throw",Ie)}xe(void 0)})}}function K(ee,ie){if(!(ee instanceof ie))throw new TypeError("Cannot call a class as a function")}function de(ee,ie){for(var ne=0;ne<ie.length;ne++){var te=ie[ne];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ee,te.key,te)}}function ve(ee,ie,ne){return ie&&de(ee.prototype,ie),ne&&de(ee,ne),ee}var we=function(){function ee(ie){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K(this,ee);var te=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ie.constructor.name!=="RedisClient")throw te}catch{throw te}this.client=ie,this.prefix=ne.prefix||"axios-cache",this.maxScanCount=ne.maxScanCount||1e3,this.getAsync=Object(k.promisify)(ie.get).bind(ie),this.psetexAsync=Object(k.promisify)(ie.psetex).bind(ie),this.delAsync=Object(k.promisify)(ie.del).bind(ie),this.scanAsync=Object(k.promisify)(ie.scan).bind(ie)}return ve(ee,[{key:"calculateTTL",value:function(ne){var te=Date.now();return ne.expires&&ne.expires>te?ne.expires-te:-1}},{key:"transformKey",value:function(ne){return this.prefix+"_"+ne}},{key:"getItem",value:function(){var ie=X(regeneratorRuntime.mark(function te(he){var _e;return regeneratorRuntime.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,this.getAsync(this.transformKey(he));case 2:if(je.t0=je.sent,je.t0){je.next=5;break}je.t0=null;case 5:return _e=je.t0,je.abrupt("return",JSON.parse(_e));case 7:case"end":return je.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ie=X(regeneratorRuntime.mark(function te(he,_e){var xe,je;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(xe=this.transformKey(he),je=this.calculateTTL(_e),!(je>0)){Pe.next=5;break}return Pe.next=5,this.psetexAsync(xe,je,JSON.stringify(_e));case 5:return Pe.abrupt("return",_e);case 6:case"end":return Pe.stop()}},te,this)}));function ne(te,he){return ie.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ie=X(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,this.delAsync(this.transformKey(he));case 2:case"end":return xe.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"scan",value:function(){var ie=X(regeneratorRuntime.mark(function te(he){var _e,xe;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:_e="0";case 1:return Ie.next=3,this.scanAsync(_e,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return xe=Ie.sent,_e=xe[0],Ie.next=7,he(xe[1]);case 7:if(_e!=="0"){Ie.next=1;break}case 8:case"end":return Ie.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ie=X(regeneratorRuntime.mark(function te(){var he=this;return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,this.scan(function(je){return he.delAsync(je)});case 2:case"end":return xe.stop()}},te,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ie=X(regeneratorRuntime.mark(function te(){var he;return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return he=0,xe.next=3,this.scan(function(je){he+=je.length});case 3:return xe.abrupt("return",he);case 4:case"end":return xe.stop()}},te,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var ie=X(regeneratorRuntime.mark(function te(he){var _e=this,xe,je;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return je=function(){return je=X(regeneratorRuntime.mark(function Ne(qe){var at,yt;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.getAsync(qe);case 2:if(ht.t0=ht.sent,ht.t0){ht.next=5;break}ht.t0=null;case 5:return at=ht.t0,yt=JSON.parse(at),ht.next=9,he(yt,qe);case 9:return ht.abrupt("return",ht.sent);case 10:case"end":return ht.stop()}},Ne,this)})),je.apply(this,arguments)},xe=function(Ne){return je.apply(this,arguments)},Pe.next=4,this.scan(function($e){return Promise.all($e.map(xe.bind(_e)))});case 4:return Pe.abrupt("return",Promise.resolve([]));case 5:case"end":return Pe.stop()}},te,this)}));function ne(te){return ie.apply(this,arguments)}return ne}()}]),ee}();j.default=we},"./src/redis.js":function(G,j,b){b.r(j),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.function.bind.js"),b("./node_modules/core-js/modules/es6.function.name.js");var k=b("util"),U=b("./src/utilities.js");function X(ie,ne,te,he,_e,xe,je){try{var Ie=ie[xe](je),Pe=Ie.value}catch($e){te($e);return}Ie.done?ne(Pe):Promise.resolve(Pe).then(he,_e)}function K(ie){return function(){var ne=this,te=arguments;return new Promise(function(he,_e){var xe=ie.apply(ne,te);function je(Pe){X(xe,he,_e,je,Ie,"next",Pe)}function Ie(Pe){X(xe,he,_e,je,Ie,"throw",Pe)}je(void 0)})}}function de(ie,ne){if(!(ie instanceof ne))throw new TypeError("Cannot call a class as a function")}function ve(ie,ne){for(var te=0;te<ne.length;te++){var he=ne[te];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ie,he.key,he)}}function we(ie,ne,te){return ne&&ve(ie.prototype,ne),te&&ve(ie,te),ie}var ee=function(){function ie(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";de(this,ie);var he=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ne.constructor.name!=="RedisClient")throw he}catch{throw he}this.client=ne,this.HASH_KEY=te,this.hgetAsync=Object(k.promisify)(ne.hget).bind(ne),this.hsetAsync=Object(k.promisify)(ne.hset).bind(ne),this.hdelAsync=Object(k.promisify)(ne.hdel).bind(ne),this.delAsync=Object(k.promisify)(ne.del).bind(ne),this.hlenAsync=Object(k.promisify)(ne.hlen).bind(ne),this.hgetallAsync=Object(k.promisify)(ne.hgetall).bind(ne)}return we(ie,[{key:"getItem",value:function(){var ne=K(regeneratorRuntime.mark(function he(_e){var xe;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetAsync(this.HASH_KEY,_e);case 2:if(Ie.t0=Ie.sent,Ie.t0){Ie.next=5;break}Ie.t0=null;case 5:return xe=Ie.t0,Ie.abrupt("return",JSON.parse(xe));case 7:case"end":return Ie.stop()}},he,this)}));function te(he){return ne.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var ne=K(regeneratorRuntime.mark(function he(_e,xe){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hsetAsync(this.HASH_KEY,_e,JSON.stringify(xe));case 2:return Ie.abrupt("return",xe);case 3:case"end":return Ie.stop()}},he,this)}));function te(he,_e){return ne.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var ne=K(regeneratorRuntime.mark(function he(_e){return regeneratorRuntime.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,this.hdelAsync(this.HASH_KEY,_e);case 2:case"end":return je.stop()}},he,this)}));function te(he){return ne.apply(this,arguments)}return te}()},{key:"clear",value:function(){var ne=K(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return xe.stop()}},he,this)}));function te(){return ne.apply(this,arguments)}return te}()},{key:"length",value:function(){var ne=K(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return xe.stop()}},he,this)}));function te(){return ne.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var ne=K(regeneratorRuntime.mark(function he(_e){var xe;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return xe=Ie.sent,Ie.abrupt("return",Promise.all(Object(U.mapObject)(xe,_e)));case 4:case"end":return Ie.stop()}},he,this)}));function te(he){return ne.apply(this,arguments)}return te}()}]),ie}();j.default=ee},"./src/request.js":function(G,j,b){b.r(j),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var k=b("./src/response.js"),U=b("./src/exclude.js"),X=b("./src/cache.js");function K(ee,ie,ne,te,he,_e,xe){try{var je=ee[_e](xe),Ie=je.value}catch(Pe){ne(Pe);return}je.done?ie(Ie):Promise.resolve(Ie).then(te,he)}function de(ee){return function(){var ie=this,ne=arguments;return new Promise(function(te,he){var _e=ee.apply(ie,ne);function xe(Ie){K(_e,te,he,xe,je,"next",Ie)}function je(Ie){K(_e,te,he,xe,je,"throw",Ie)}xe(void 0)})}}function ve(ee,ie){return we.apply(this,arguments)}function we(){return we=de(regeneratorRuntime.mark(function ee(ie,ne){var te,he,_e;return regeneratorRuntime.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return _e=function(){return ie.excludeFromCache=!0,{config:ie,next:te}},ie.debug("uuid",ie.uuid),te=function(){for(var Pe=arguments.length,$e=new Array(Pe),Ne=0;Ne<Pe;Ne++)$e[Ne]=arguments[Ne];return k.default.apply(void 0,[ie,ne].concat($e))},je.next=5,ie.invalidate(ie,ne);case 5:if(!Object(U.default)(ie,ne)){je.next=7;break}return je.abrupt("return",_e());case 7:return je.prev=7,je.next=10,Object(X.read)(ie,ne);case 10:return he=je.sent,he.config=ne,he.request={fromCache:!0},je.abrupt("return",{config:ie,next:he});case 16:if(je.prev=16,je.t0=je.catch(7),!(ie.clearOnStale&&je.t0.reason==="cache-stale")){je.next=21;break}return je.next=21,ie.store.removeItem(ie.uuid);case 21:return je.abrupt("return",{config:ie,next:te});case 22:case"end":return je.stop()}},ee,null,[[7,16]])})),we.apply(this,arguments)}j.default=ve},"./src/response.js":function(G,j,b){b.r(j),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var k=b("./src/limit.js"),U=b("./src/cache.js"),X=b("./node_modules/cache-control-esm/index.js");function K(ee,ie,ne,te,he,_e,xe){try{var je=ee[_e](xe),Ie=je.value}catch(Pe){ne(Pe);return}je.done?ie(Ie):Promise.resolve(Ie).then(te,he)}function de(ee){return function(){var ie=this,ne=arguments;return new Promise(function(te,he){var _e=ee.apply(ie,ne);function xe(Ie){K(_e,te,he,xe,je,"next",Ie)}function je(Ie){K(_e,te,he,xe,je,"throw",Ie)}xe(void 0)})}}function ve(ee,ie,ne){return we.apply(this,arguments)}function we(){return we=de(regeneratorRuntime.mark(function ee(ie,ne,te){var he,_e,xe,je,Ie;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(he=te.request,_e=he===void 0?{}:he,xe=te.headers,je=xe===void 0?{}:xe,!(["arraybuffer","blob"].indexOf(_e.responseType)>-1)){$e.next=3;break}return $e.abrupt("return",te);case 3:if(Ie={},ie.readHeaders&&(je["cache-control"]?(Ie=Object(X.parse)(je["cache-control"]),(Ie.noCache||Ie.noStore)&&(ie.excludeFromCache=!0)):je.expires?ie.expires=new Date(je.expires).getTime():ie.expires=new Date().getTime()),ie.excludeFromCache){$e.next=15;break}if(Ie.maxAge||Ie.maxAge===0?ie.expires=Date.now()+Ie.maxAge*1e3:ie.readHeaders||(ie.expires=ie.maxAge===0?Date.now():Date.now()+ie.maxAge),!ie.limit){$e.next=11;break}return ie.debug("Detected limit: ".concat(ie.limit)),$e.next=11,Object(k.default)(ie);case 11:return $e.next=13,Object(U.write)(ie,ne,te);case 13:$e.next=16;break;case 15:te.request.excludedFromCache=!0;case 16:return $e.abrupt("return",te);case 17:case"end":return $e.stop()}},ee)})),we.apply(this,arguments)}j.default=ve},"./src/serialize.js":function(G,j,b){b.r(j),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function k(K,de){if(K==null)return{};var ve=U(K,de),we,ee;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(K);for(ee=0;ee<ie.length;ee++)we=ie[ee],!(de.indexOf(we)>=0)&&Object.prototype.propertyIsEnumerable.call(K,we)&&(ve[we]=K[we])}return ve}function U(K,de){if(K==null)return{};var ve={},we=Object.keys(K),ee,ie;for(ie=0;ie<we.length;ie++)ee=we[ie],!(de.indexOf(ee)>=0)&&(ve[ee]=K[ee]);return ve}function X(K,de,ve){if(ve.data)try{ve.data=JSON.parse(ve.data)}catch(ee){K.debug("Could not parse data as JSON",ee)}ve.request,ve.config;var we=k(ve,["request","config"]);return we}j.default=X},"./src/utilities.js":function(G,j,b){b.r(j),b.d(j,"isObject",function(){return U}),b.d(j,"getTag",function(){return X}),b.d(j,"isFunction",function(){return K}),b.d(j,"isString",function(){return de}),b.d(j,"mapObject",function(){return ve}),b("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function k(we){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(ie){return typeof ie}:k=function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},k(we)}function U(we){var ee=k(we);return we!=null&&(ee==="object"||ee==="function")}function X(we){return we===null?we===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(we)}function K(we){if(!U(we))return!1;var ee=X(we);return ee==="[object Function]"||ee==="[object AsyncFunction]"||ee==="[object GeneratorFunction]"||ee==="[object Proxy]"}function de(we){var ee=k(we);return ee==="string"||ee==="object"&&we!=null&&!Array.isArray(we)&&X(we)==="[object String]"}function ve(we,ee){return U(we)?Object.keys(we).map(function(ie){return ee(we[ie],ie)}):[]}},axios:function(G,j){G.exports=se},util:function(G,j){G.exports=T.default}})})});const Y={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},H=F.setupCache({maxAge:60*60*24*1e3}),le=E.default.create({adapter:H.adapter}),W=async(V,B={})=>{const se={...Y,...B},[G,j]=r.lngLatToGoogle(V,se.zoomBase),b=se.tileUrl.replace("{z}",String(se.zoomBase)).replace("{x}",String(G)).replace("{y}",String(j)),k={code:"",prefecture:"",city:""};let U;try{const de=await le.get(b,{responseType:"arraybuffer"});U=Buffer.from(de.data,"binary")}catch(de){throw new Error(de)}const X=new g.VectorTile(new w.default(U));let K=Object.keys(X.layers);return Array.isArray(K)||(K=[K]),K.forEach(de=>{const ve=X.layers[de];if(ve&&se.layer===ve.name)for(let we=0;we<ve.length;we++){const ee=ve.feature(we).toGeoJSON(G,j,se.zoomBase);K.length>1&&(ee.properties.vt_layer=de);const ie={type:"FeatureCollection",features:[ee]};t.geoContains(ie,V)&&(k.code=String(ee.id).length===5?String(ee.id):`0${String(ee.id)}`,k.prefecture=ee.properties.prefecture,k.city=ee.properties.city)}}),k};e.openReverseGeocoder=W})(nC);const wR={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},bR={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},ER={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},SR={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},J2={JPN:ER,CHN:wR,DEU:bR,KOR:SR};function mA(e,t,r){r===void 0&&(r={});var a={type:"Feature"};return(r.id===0||r.id)&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.properties=t||{},a.geometry=e,a}function TR(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Q2(e[0])||!Q2(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return mA(a,t,r)}function CR(e,t,r){r===void 0&&(r={});for(var a=0,u=e;a<u.length;a++){var f=u[a];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<f[f.length-1].length;g++)if(f[f.length-1][g]!==f[0][g])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return mA(l,t,r)}function Q2(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function gA(e,t,r){if(e!==null)for(var a,u,f,g,l,w,E,T=0,S=0,C,F=e.type,Y=F==="FeatureCollection",H=F==="Feature",le=Y?e.features.length:1,W=0;W<le;W++){E=Y?e.features[W].geometry:H?e.geometry:e,C=E?E.type==="GeometryCollection":!1,l=C?E.geometries.length:1;for(var V=0;V<l;V++){var B=0,se=0;if(g=C?E.geometries[V]:E,g!==null){w=g.coordinates;var G=g.type;switch(T=r&&(G==="Polygon"||G==="MultiPolygon")?1:0,G){case null:break;case"Point":if(t(w,S,W,B,se)===!1)return!1;S++,B++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(t(w[a],S,W,B,se)===!1)return!1;S++,G==="MultiPoint"&&B++}G==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(u=0;u<w[a].length-T;u++){if(t(w[a][u],S,W,B,se)===!1)return!1;S++}G==="MultiLineString"&&B++,G==="Polygon"&&se++}G==="Polygon"&&B++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(se=0,u=0;u<w[a].length;u++){for(f=0;f<w[a][u].length-T;f++){if(t(w[a][u][f],S,W,B,se)===!1)return!1;S++}se++}B++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(gA(g.geometries[a],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function AR(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function IR(e){return e.type==="Feature"?e.geometry:e}function PR(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=AR(e),u=IR(t),f=u.type,g=t.bbox,l=u.coordinates;if(g&&kR(a,g)===!1)return!1;f==="Polygon"&&(l=[l]);for(var w=!1,E=0;E<l.length&&!w;E++)if(eE(a,l[E][0],r.ignoreBoundary)){for(var T=!1,S=1;S<l[E].length&&!T;)eE(a,l[E][S],!r.ignoreBoundary)&&(T=!0),S++;T||(w=!0)}return w}function eE(e,t,r){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var u=0,f=t.length-1;u<t.length;f=u++){var g=t[u][0],l=t[u][1],w=t[f][0],E=t[f][1],T=e[1]*(g-w)+l*(w-e[0])+E*(e[0]-g)===0&&(g-e[0])*(w-e[0])<=0&&(l-e[1])*(E-e[1])<=0;if(T)return!r;var S=l>e[1]!=E>e[1]&&e[0]<(w-g)*(e[1]-l)/(E-l)+g;S&&(a=!a)}return a}function kR(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function MR(e,t){t===void 0&&(t={});var r=0,a=0,u=0;return gA(e,function(f){r+=f[0],a+=f[1],u++},!0),TR([r/u,a/u],t.properties)}const zR=()=>{const[e,t]=pt.useState(!1);return{detectCountry:pt.useCallback(async(a,u)=>{t(!0);const g=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of g.features)if(PR([a,u],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},f0=({feature:e,fieldOption:t,suggestList:r,onChange:a})=>{var l;const[u,f]=pt.useState((l=e.properties)==null?void 0:l[t.key]);pt.useEffect(()=>{var w;f((w=e.properties)==null?void 0:w[t.key])},[e]);const g=pt.useCallback(w=>{f(w.currentTarget.value),a&&a(w)},[]);return Zn("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Zn("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:u,onChange:g}),Rt("datalist",{id:t.key+"-list",children:r&&r.map(w=>{if(parseInt(w.tags.admin_level)===t.adminLevel)return Rt("option",{value:w.tags.name},w.id);if(w.type==="node"&&t.adminLevel===9)return Rt("option",{value:w.tags.name},w.id)})})]})},LR=({feature:e,fields:t})=>e.properties?Zn(Ss,{children:[t.postcodeField&&Rt("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(r=>{var a;return Zn(Ss,{children:[Rt("span",{children:(a=e.properties)==null?void 0:a[r.key]})," "]})}),t.detailFields&&t.detailFields.map(r=>{var a;return Zn(Ss,{children:[Rt("span",{children:(a=e.properties)==null?void 0:a[r.key]})," "]})})]}):null,OR=({placeholder:e,defaultValue:t})=>{const[r,a]=pt.useState(t);pt.useEffect(()=>{a(t)},[t]);const u=pt.useCallback(f=>{a(f.currentTarget.value)},[]);return Zn("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[Rt("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:r,required:!0,onChange:u})]})};var Gm={},RR={get exports(){return Gm},set exports(e){Gm=e}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,a="4.15.0",u=200,f="Expected a function",g="__lodash_hash_undefined__",l=1,w=2,E=1/0,T=9007199254740991,S="[object Arguments]",C="[object Array]",F="[object Boolean]",Y="[object Date]",H="[object Error]",le="[object Function]",W="[object GeneratorFunction]",V="[object Map]",B="[object Number]",se="[object Object]",G="[object Promise]",j="[object RegExp]",b="[object Set]",k="[object String]",U="[object Symbol]",X="[object WeakMap]",K="[object ArrayBuffer]",de="[object DataView]",ve="[object Float32Array]",we="[object Float64Array]",ee="[object Int8Array]",ie="[object Int16Array]",ne="[object Int32Array]",te="[object Uint8Array]",he="[object Uint8ClampedArray]",_e="[object Uint16Array]",xe="[object Uint32Array]",je=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Pe=/^\./,$e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,qe=/\\(\\)?/g,at=/\w*$/,yt=/^\[object .+?Constructor\]$/,Pt=/^(?:0|[1-9]\d*)$/,ht={};ht[ve]=ht[we]=ht[ee]=ht[ie]=ht[ne]=ht[te]=ht[he]=ht[_e]=ht[xe]=!0,ht[S]=ht[C]=ht[K]=ht[F]=ht[de]=ht[Y]=ht[H]=ht[le]=ht[V]=ht[B]=ht[se]=ht[j]=ht[b]=ht[k]=ht[X]=!1;var Et={};Et[S]=Et[C]=Et[K]=Et[de]=Et[F]=Et[Y]=Et[ve]=Et[we]=Et[ee]=Et[ie]=Et[ne]=Et[V]=Et[B]=Et[se]=Et[j]=Et[b]=Et[k]=Et[U]=Et[te]=Et[he]=Et[_e]=Et[xe]=!0,Et[H]=Et[le]=Et[X]=!1;var Nt=typeof pl=="object"&&pl&&pl.Object===Object&&pl,jt=typeof self=="object"&&self&&self.Object===Object&&self,cn=Nt||jt||Function("return this")(),Cn=t&&!t.nodeType&&t,bn=Cn&&!0&&e&&!e.nodeType&&e,on=bn&&bn.exports===Cn,En=on&&Nt.process,Ee=function(){try{return En&&En.binding("util")}catch{}}(),R=Ee&&Ee.isTypedArray;function O(N,fe){return N.set(fe[0],fe[1]),N}function pe(N,fe){return N.add(fe),N}function ze(N,fe,Le){switch(Le.length){case 0:return N.call(fe);case 1:return N.call(fe,Le[0]);case 2:return N.call(fe,Le[0],Le[1]);case 3:return N.call(fe,Le[0],Le[1],Le[2])}return N.apply(fe,Le)}function Ke(N,fe){for(var Le=-1,tt=N?N.length:0;++Le<tt&&fe(N[Le],Le,N)!==!1;);return N}function ot(N,fe){for(var Le=-1,tt=fe.length,kt=N.length;++Le<tt;)N[kt+Le]=fe[Le];return N}function ae(N,fe,Le,tt){var kt=-1,Tt=N?N.length:0;for(tt&&Tt&&(Le=N[++kt]);++kt<Tt;)Le=fe(Le,N[kt],kt,N);return Le}function A(N,fe){for(var Le=-1,tt=N?N.length:0;++Le<tt;)if(fe(N[Le],Le,N))return!0;return!1}function z(N){return function(fe){return fe==null?r:fe[N]}}function be(N,fe){for(var Le=-1,tt=Array(N);++Le<N;)tt[Le]=fe(Le);return tt}function Be(N){return function(fe){return N(fe)}}function Xe(N,fe){return N==null?r:N[fe]}function Qe(N){var fe=!1;if(N!=null&&typeof N.toString!="function")try{fe=!!(N+"")}catch{}return fe}function Wt(N){var fe=-1,Le=Array(N.size);return N.forEach(function(tt,kt){Le[++fe]=[kt,tt]}),Le}function Sn(N,fe){return function(Le){return N(fe(Le))}}function fn(N){var fe=-1,Le=Array(N.size);return N.forEach(function(tt){Le[++fe]=tt}),Le}var ft=Array.prototype,Mt=Function.prototype,un=Object.prototype,Ir=cn["__core-js_shared__"],Qr=function(){var N=/[^.]+$/.exec(Ir&&Ir.keys&&Ir.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),hn=Mt.toString,rr=un.hasOwnProperty,wi=hn.call(Object),_r=un.toString,Vr=RegExp("^"+hn.call(rr).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=on?cn.Buffer:r,Gt=cn.Symbol,Ht=cn.Uint8Array,An=Sn(Object.getPrototypeOf,Object),zn=Object.create,ir=un.propertyIsEnumerable,Gr=ft.splice,hi=Object.getOwnPropertySymbols,Ps=Zt?Zt.isBuffer:r,Ce=Sn(Object.keys,Object),Z=Math.max,J=ts(cn,"DataView"),ge=ts(cn,"Map"),Ae=ts(cn,"Promise"),ke=ts(cn,"Set"),Ge=ts(cn,"WeakMap"),De=ts(Object,"create"),Ue=!ir.call({valueOf:1},"valueOf"),We=bi(J),st=bi(ge),mt=bi(Ae),it=bi(ke),Vt=bi(Ge),It=Gt?Gt.prototype:r,Ut=It?It.valueOf:r,rn=It?It.toString:r;function $t(){}function _n(N){var fe=-1,Le=N?N.length:0;for(this.clear();++fe<Le;){var tt=N[fe];this.set(tt[0],tt[1])}}function Tn(){this.__data__=De?De(null):{}}function xn(N){return this.has(N)&&delete this.__data__[N]}function wn(N){var fe=this.__data__;if(De){var Le=fe[N];return Le===g?r:Le}return rr.call(fe,N)?fe[N]:r}function nr(N){var fe=this.__data__;return De?fe[N]!==r:rr.call(fe,N)}function dr(N,fe){var Le=this.__data__;return Le[N]=De&&fe===r?g:fe,this}_n.prototype.clear=Tn,_n.prototype.delete=xn,_n.prototype.get=wn,_n.prototype.has=nr,_n.prototype.set=dr;function Jn(N){var fe=-1,Le=N?N.length:0;for(this.clear();++fe<Le;){var tt=N[fe];this.set(tt[0],tt[1])}}function zo(){this.__data__=[]}function ro(N){var fe=this.__data__,Le=or(fe,N);if(Le<0)return!1;var tt=fe.length-1;return Le==tt?fe.pop():Gr.call(fe,Le,1),!0}function jl(N){var fe=this.__data__,Le=or(fe,N);return Le<0?r:fe[Le][1]}function na(N){return or(this.__data__,N)>-1}function Qn(N,fe){var Le=this.__data__,tt=or(Le,N);return tt<0?Le.push([N,fe]):Le[tt][1]=fe,this}Jn.prototype.clear=zo,Jn.prototype.delete=ro,Jn.prototype.get=jl,Jn.prototype.has=na,Jn.prototype.set=Qn;function io(N){var fe=-1,Le=N?N.length:0;for(this.clear();++fe<Le;){var tt=N[fe];this.set(tt[0],tt[1])}}function $u(){this.__data__={hash:new _n,map:new(ge||Jn),string:new _n}}function Vu(N){return fo(this,N).delete(N)}function Gu(N){return fo(this,N).get(N)}function Ua(N){return fo(this,N).has(N)}function Wu(N,fe){return fo(this,N).set(N,fe),this}io.prototype.clear=$u,io.prototype.delete=Vu,io.prototype.get=Gu,io.prototype.has=Ua,io.prototype.set=Wu;function ks(N){var fe=-1,Le=N?N.length:0;for(this.__data__=new io;++fe<Le;)this.add(N[fe])}function Bl(N){return this.__data__.set(N,g),this}function Zu(N){return this.__data__.has(N)}ks.prototype.add=ks.prototype.push=Bl,ks.prototype.has=Zu;function Wr(N){this.__data__=new Jn(N)}function $a(){this.__data__=new Jn}function ra(N){return this.__data__.delete(N)}function ia(N){return this.__data__.get(N)}function oa(N){return this.__data__.has(N)}function Va(N,fe){var Le=this.__data__;if(Le instanceof Jn){var tt=Le.__data__;if(!ge||tt.length<u-1)return tt.push([N,fe]),this;Le=this.__data__=new io(tt)}return Le.set(N,fe),this}Wr.prototype.clear=$a,Wr.prototype.delete=ra,Wr.prototype.get=ia,Wr.prototype.has=oa,Wr.prototype.set=Va;function Ga(N,fe){var Le=Zr(N)||po(N)?be(N.length,String):[],tt=Le.length,kt=!!tt;for(var Tt in N)(fe||rr.call(N,Tt))&&!(kt&&(Tt=="length"||sr(Tt,tt)))&&Le.push(Tt);return Le}function Lo(N,fe,Le){(Le!==r&&!Ri(N[fe],Le)||typeof fe=="number"&&Le===r&&!(fe in N))&&(N[fe]=Le)}function Ms(N,fe,Le){var tt=N[fe];(!(rr.call(N,fe)&&Ri(tt,Le))||Le===r&&!(fe in N))&&(N[fe]=Le)}function or(N,fe){for(var Le=N.length;Le--;)if(Ri(N[Le][0],fe))return Le;return-1}function Wa(N,fe){return N&&ql(fe,di(fe),N)}function Oo(N,fe,Le,tt,kt,Tt,Xt){var Yt;if(tt&&(Yt=Tt?tt(N,kt,Tt,Xt):tt(N)),Yt!==r)return Yt;if(!Ei(N))return N;var dn=Zr(N);if(dn){if(Yt=Sh(N),!fe)return Ju(N,Yt)}else{var xt=kn(N),Dn=xt==le||xt==W;if(Ja(N))return Kl(N,fe);if(xt==se||xt==S||Dn&&!Tt){if(Qe(N))return Tt?N:{};if(Yt=Bn(Dn?{}:N),!fe)return Eh(N,Wa(Yt,N))}else{if(!Et[xt])return Tt?N:{};Yt=ns(N,xt,Oo,fe)}}Xt||(Xt=new Wr);var Xn=Xt.get(N);if(Xn)return Xn;if(Xt.set(N,Yt),!dn)var er=Le?Qo(N):di(N);return Ke(er||N,function(Pr,wt){er&&(wt=Pr,Pr=N[wt]),Ms(Yt,wt,Oo(Pr,fe,Le,tt,wt,N,Xt))}),Yt}function Dl(N){return Ei(N)?zn(N):{}}var Hu=Ql(Ul),Nl=Rs();function Ul(N,fe){return N&&Nl(N,fe,di)}function $l(N,fe){fe=Ro(fe,N)?[fe]:Xa(fe);for(var Le=0,tt=fe.length;N!=null&&Le<tt;)N=N[Fo(fe[Le++])];return Le&&Le==tt?N:r}function _h(N,fe,Le){var tt=fe(N);return Zr(N)?tt:ot(tt,Le(N))}function Vl(N){return _r.call(N)}function Gl(N,fe){return N!=null&&fe in Object(N)}function sa(N,fe,Le,tt,kt){return N===fe?!0:N==null||fe==null||!Ei(N)&&!mo(fe)?N!==N&&fe!==fe:Wl(N,fe,sa,Le,tt,kt)}function Wl(N,fe,Le,tt,kt,Tt){var Xt=Zr(N),Yt=Zr(fe),dn=C,xt=C;Xt||(dn=kn(N),dn=dn==S?se:dn),Yt||(xt=kn(fe),xt=xt==S?se:xt);var Dn=dn==se&&!Qe(N),Xn=xt==se&&!Qe(fe),er=dn==xt;if(er&&!Dn)return Tt||(Tt=new Wr),Xt||ls(N)?eu(N,fe,Le,tt,kt,Tt):Qu(N,fe,dn,Le,tt,kt,Tt);if(!(kt&w)){var Pr=Dn&&rr.call(N,"__wrapped__"),wt=Xn&&rr.call(fe,"__wrapped__");if(Pr||wt){var Fi=Pr?N.value():N,go=wt?fe.value():fe;return Tt||(Tt=new Wr),Le(Fi,go,tt,kt,Tt)}}return er?(Tt||(Tt=new Wr),tu(N,fe,Le,tt,kt,Tt)):!1}function Xu(N,fe,Le,tt){var kt=Le.length,Tt=kt,Xt=!tt;if(N==null)return!Tt;for(N=Object(N);kt--;){var Yt=Le[kt];if(Xt&&Yt[2]?Yt[1]!==N[Yt[0]]:!(Yt[0]in N))return!1}for(;++kt<Tt;){Yt=Le[kt];var dn=Yt[0],xt=N[dn],Dn=Yt[1];if(Xt&&Yt[2]){if(xt===r&&!(dn in N))return!1}else{var Xn=new Wr;if(tt)var er=tt(xt,Dn,dn,N,fe,Xn);if(!(er===r?sa(Dn,xt,tt,l|w,Xn):er))return!1}}return!0}function Yu(N){if(!Ei(N)||nu(N))return!1;var fe=os(N)||Qe(N)?Vr:yt;return fe.test(bi(N))}function jn(N){return mo(N)&&ss(N.length)&&!!ht[_r.call(N)]}function zs(N){return typeof N=="function"?N:N==null?Bs:typeof N=="object"?Zr(N)?Hl(N[0],N[1]):fi(N):ar(N)}function aa(N){if(!rs(N))return Ce(N);var fe=[];for(var Le in Object(N))rr.call(N,Le)&&Le!="constructor"&&fe.push(Le);return fe}function Zl(N){if(!Ei(N))return qa(N);var fe=rs(N),Le=[];for(var tt in N)tt=="constructor"&&(fe||!rr.call(N,tt))||Le.push(tt);return Le}function fi(N){var fe=es(N);return fe.length==1&&fe[0][2]?Ka(fe[0][0],fe[0][1]):function(Le){return Le===N||Xu(Le,N,fe)}}function Hl(N,fe){return Ro(N)&&ua(fe)?Ka(Fo(N),fe):function(Le){var tt=su(Le,N);return tt===r&&tt===fe?au(Le,N):sa(fe,tt,r,l|w)}}function la(N,fe,Le,tt,kt){if(N!==fe){if(!(Zr(fe)||ls(fe)))var Tt=Zl(fe);Ke(Tt||fe,function(Xt,Yt){if(Tt&&(Yt=Xt,Xt=fe[Yt]),Ei(Xt))kt||(kt=new Wr),Za(N,fe,Yt,Le,la,tt,kt);else{var dn=tt?tt(N[Yt],Xt,Yt+"",N,fe,kt):r;dn===r&&(dn=Xt),Lo(N,Yt,dn)}})}}function Za(N,fe,Le,tt,kt,Tt,Xt){var Yt=N[Le],dn=fe[Le],xt=Xt.get(dn);if(xt){Lo(N,Le,xt);return}var Dn=Tt?Tt(Yt,dn,Le+"",N,fe,Xt):r,Xn=Dn===r;Xn&&(Dn=dn,Zr(dn)||ls(dn)?Zr(Yt)?Dn=Yt:Fs(Yt)?Dn=Ju(Yt):(Xn=!1,Dn=Oo(dn,!0)):as(dn)||po(dn)?po(Yt)?Dn=ou(Yt):!Ei(Yt)||tt&&os(Yt)?(Xn=!1,Dn=Oo(dn,!0)):Dn=Yt:Xn=!1),Xn&&(Xt.set(dn,Dn),kt(Dn,dn,tt,Tt,Xt),Xt.delete(dn)),Lo(N,Le,Dn)}function Xl(N){return function(fe){return $l(fe,N)}}function Yl(N,fe){return fe=Z(fe===r?N.length-1:fe,0),function(){for(var Le=arguments,tt=-1,kt=Z(Le.length-fe,0),Tt=Array(kt);++tt<kt;)Tt[tt]=Le[fe+tt];tt=-1;for(var Xt=Array(fe+1);++tt<fe;)Xt[tt]=Le[tt];return Xt[fe]=Tt,ze(N,this,Xt)}}function Ha(N){if(typeof N=="string")return N;if(jo(N))return rn?rn.call(N):"";var fe=N+"";return fe=="0"&&1/N==-E?"-0":fe}function Xa(N){return Zr(N)?N:ru(N)}function Kl(N,fe){if(fe)return N.slice();var Le=new N.constructor(N.length);return N.copy(Le),Le}function Ls(N){var fe=new N.constructor(N.byteLength);return new Ht(fe).set(new Ht(N)),fe}function Ku(N,fe){var Le=fe?Ls(N.buffer):N.buffer;return new N.constructor(Le,N.byteOffset,N.byteLength)}function qu(N,fe,Le){var tt=fe?Le(Wt(N),!0):Wt(N);return ae(tt,O,new N.constructor)}function Os(N){var fe=new N.constructor(N.source,at.exec(N));return fe.lastIndex=N.lastIndex,fe}function xh(N,fe,Le){var tt=fe?Le(fn(N),!0):fn(N);return ae(tt,pe,new N.constructor)}function wh(N){return Ut?Object(Ut.call(N)):{}}function bh(N,fe){var Le=fe?Ls(N.buffer):N.buffer;return new N.constructor(Le,N.byteOffset,N.length)}function Ju(N,fe){var Le=-1,tt=N.length;for(fe||(fe=Array(tt));++Le<tt;)fe[Le]=N[Le];return fe}function ql(N,fe,Le,tt){Le||(Le={});for(var kt=-1,Tt=fe.length;++kt<Tt;){var Xt=fe[kt],Yt=tt?tt(Le[Xt],N[Xt],Xt,Le,N):r;Ms(Le,Xt,Yt===r?N[Xt]:Yt)}return Le}function Eh(N,fe){return ql(N,Ya(N),fe)}function Jl(N){return Yl(function(fe,Le){var tt=-1,kt=Le.length,Tt=kt>1?Le[kt-1]:r,Xt=kt>2?Le[2]:r;for(Tt=N.length>3&&typeof Tt=="function"?(kt--,Tt):r,Xt&&mr(Le[0],Le[1],Xt)&&(Tt=kt<3?r:Tt,kt=1),fe=Object(fe);++tt<kt;){var Yt=Le[tt];Yt&&N(fe,Yt,tt,Tt)}return fe})}function Ql(N,fe){return function(Le,tt){if(Le==null)return Le;if(!is(Le))return N(Le,tt);for(var kt=Le.length,Tt=fe?kt:-1,Xt=Object(Le);(fe?Tt--:++Tt<kt)&&tt(Xt[Tt],Tt,Xt)!==!1;);return Le}}function Rs(N){return function(fe,Le,tt){for(var kt=-1,Tt=Object(fe),Xt=tt(fe),Yt=Xt.length;Yt--;){var dn=Xt[N?Yt:++kt];if(Le(Tt[dn],dn,Tt)===!1)break}return fe}}function eu(N,fe,Le,tt,kt,Tt){var Xt=kt&w,Yt=N.length,dn=fe.length;if(Yt!=dn&&!(Xt&&dn>Yt))return!1;var xt=Tt.get(N);if(xt&&Tt.get(fe))return xt==fe;var Dn=-1,Xn=!0,er=kt&l?new ks:r;for(Tt.set(N,fe),Tt.set(fe,N);++Dn<Yt;){var Pr=N[Dn],wt=fe[Dn];if(tt)var Fi=Xt?tt(wt,Pr,Dn,fe,N,Tt):tt(Pr,wt,Dn,N,fe,Tt);if(Fi!==r){if(Fi)continue;Xn=!1;break}if(er){if(!A(fe,function(go,Do){if(!er.has(Do)&&(Pr===go||Le(Pr,go,tt,kt,Tt)))return er.add(Do)})){Xn=!1;break}}else if(!(Pr===wt||Le(Pr,wt,tt,kt,Tt))){Xn=!1;break}}return Tt.delete(N),Tt.delete(fe),Xn}function Qu(N,fe,Le,tt,kt,Tt,Xt){switch(Le){case de:if(N.byteLength!=fe.byteLength||N.byteOffset!=fe.byteOffset)return!1;N=N.buffer,fe=fe.buffer;case K:return!(N.byteLength!=fe.byteLength||!tt(new Ht(N),new Ht(fe)));case F:case Y:case B:return Ri(+N,+fe);case H:return N.name==fe.name&&N.message==fe.message;case j:case k:return N==fe+"";case V:var Yt=Wt;case b:var dn=Tt&w;if(Yt||(Yt=fn),N.size!=fe.size&&!dn)return!1;var xt=Xt.get(N);if(xt)return xt==fe;Tt|=l,Xt.set(N,fe);var Dn=eu(Yt(N),Yt(fe),tt,kt,Tt,Xt);return Xt.delete(N),Dn;case U:if(Ut)return Ut.call(N)==Ut.call(fe)}return!1}function tu(N,fe,Le,tt,kt,Tt){var Xt=kt&w,Yt=di(N),dn=Yt.length,xt=di(fe),Dn=xt.length;if(dn!=Dn&&!Xt)return!1;for(var Xn=dn;Xn--;){var er=Yt[Xn];if(!(Xt?er in fe:rr.call(fe,er)))return!1}var Pr=Tt.get(N);if(Pr&&Tt.get(fe))return Pr==fe;var wt=!0;Tt.set(N,fe),Tt.set(fe,N);for(var Fi=Xt;++Xn<dn;){er=Yt[Xn];var go=N[er],Do=fe[er];if(tt)var Qa=Xt?tt(Do,go,er,fe,N,Tt):tt(go,Do,er,N,fe,Tt);if(!(Qa===r?go===Do||Le(go,Do,tt,kt,Tt):Qa)){wt=!1;break}Fi||(Fi=er=="constructor")}if(wt&&!Fi){var cs=N.constructor,da=fe.constructor;cs!=da&&"constructor"in N&&"constructor"in fe&&!(typeof cs=="function"&&cs instanceof cs&&typeof da=="function"&&da instanceof da)&&(wt=!1)}return Tt.delete(N),Tt.delete(fe),wt}function Qo(N){return _h(N,di,Ya)}function ec(){var N=$t.iteratee||us;return N=N===us?zs:N,arguments.length?N(arguments[0],arguments[1]):N}function fo(N,fe){var Le=N.__data__;return tc(fe)?Le[typeof fe=="string"?"string":"hash"]:Le.map}function es(N){for(var fe=di(N),Le=fe.length;Le--;){var tt=fe[Le],kt=N[tt];fe[Le]=[tt,kt,ua(kt)]}return fe}function ts(N,fe){var Le=Xe(N,fe);return Yu(Le)?Le:r}var Ya=hi?Sn(hi,Object):fa,kn=Vl;(J&&kn(new J(new ArrayBuffer(1)))!=de||ge&&kn(new ge)!=V||Ae&&kn(Ae.resolve())!=G||ke&&kn(new ke)!=b||Ge&&kn(new Ge)!=X)&&(kn=function(N){var fe=_r.call(N),Le=fe==se?N.constructor:r,tt=Le?bi(Le):r;if(tt)switch(tt){case We:return de;case st:return V;case mt:return G;case it:return b;case Vt:return X}return fe});function pr(N,fe,Le){fe=Ro(fe,N)?[fe]:Xa(fe);for(var tt,kt=-1,Xt=fe.length;++kt<Xt;){var Tt=Fo(fe[kt]);if(!(tt=N!=null&&Le(N,Tt)))break;N=N[Tt]}if(tt)return tt;var Xt=N?N.length:0;return!!Xt&&ss(Xt)&&sr(Tt,Xt)&&(Zr(N)||po(N))}function Sh(N){var fe=N.length,Le=N.constructor(fe);return fe&&typeof N[0]=="string"&&rr.call(N,"index")&&(Le.index=N.index,Le.input=N.input),Le}function Bn(N){return typeof N.constructor=="function"&&!rs(N)?Dl(An(N)):{}}function ns(N,fe,Le,tt){var kt=N.constructor;switch(fe){case K:return Ls(N);case F:case Y:return new kt(+N);case de:return Ku(N,tt);case ve:case we:case ee:case ie:case ne:case te:case he:case _e:case xe:return bh(N,tt);case V:return qu(N,tt,Le);case B:case k:return new kt(N);case j:return Os(N);case b:return xh(N,tt,Le);case U:return wh(N)}}function sr(N,fe){return fe=fe??T,!!fe&&(typeof N=="number"||Pt.test(N))&&N>-1&&N%1==0&&N<fe}function mr(N,fe,Le){if(!Ei(Le))return!1;var tt=typeof fe;return(tt=="number"?is(Le)&&sr(fe,Le.length):tt=="string"&&fe in Le)?Ri(Le[fe],N):!1}function Ro(N,fe){if(Zr(N))return!1;var Le=typeof N;return Le=="number"||Le=="symbol"||Le=="boolean"||N==null||jo(N)?!0:Ie.test(N)||!je.test(N)||fe!=null&&N in Object(fe)}function tc(N){var fe=typeof N;return fe=="string"||fe=="number"||fe=="symbol"||fe=="boolean"?N!=="__proto__":N===null}function nu(N){return!!Qr&&Qr in N}function rs(N){var fe=N&&N.constructor,Le=typeof fe=="function"&&fe.prototype||un;return N===Le}function ua(N){return N===N&&!Ei(N)}function Ka(N,fe){return function(Le){return Le==null?!1:Le[N]===fe&&(fe!==r||N in Object(Le))}}function qa(N){var fe=[];if(N!=null)for(var Le in Object(N))fe.push(Le);return fe}var ru=ca(function(N){N=js(N);var fe=[];return Pe.test(N)&&fe.push(""),N.replace($e,function(Le,tt,kt,Tt){fe.push(kt?Tt.replace(qe,"$1"):tt||Le)}),fe});function Fo(N){if(typeof N=="string"||jo(N))return N;var fe=N+"";return fe=="0"&&1/N==-E?"-0":fe}function bi(N){if(N!=null){try{return hn.call(N)}catch{}try{return N+""}catch{}}return""}function Oi(N){for(var fe=-1,Le=N?N.length:0,tt=0,kt=[];++fe<Le;){var Tt=N[fe];Tt&&(kt[tt++]=Tt)}return kt}function iu(N,fe){var Le=Zr(N)?Ke:Hu;return Le(N,ec(fe,3))}function ca(N,fe){if(typeof N!="function"||fe&&typeof fe!="function")throw new TypeError(f);var Le=function(){var tt=arguments,kt=fe?fe.apply(this,tt):tt[0],Tt=Le.cache;if(Tt.has(kt))return Tt.get(kt);var Xt=N.apply(this,tt);return Le.cache=Tt.set(kt,Xt),Xt};return Le.cache=new(ca.Cache||io),Le}ca.Cache=io;function nc(N){return Oo(N,!1,!0)}function Ri(N,fe){return N===fe||N!==N&&fe!==fe}function po(N){return Fs(N)&&rr.call(N,"callee")&&(!ir.call(N,"callee")||_r.call(N)==S)}var Zr=Array.isArray;function is(N){return N!=null&&ss(N.length)&&!os(N)}function Fs(N){return mo(N)&&is(N)}var Ja=Ps||Bo;function ha(N){if(is(N)&&(Zr(N)||typeof N=="string"||typeof N.splice=="function"||Ja(N)||po(N)))return!N.length;var fe=kn(N);if(fe==V||fe==b)return!N.size;if(Ue||rs(N))return!Ce(N).length;for(var Le in N)if(rr.call(N,Le))return!1;return!0}function os(N){var fe=Ei(N)?_r.call(N):"";return fe==le||fe==W}function ss(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=T}function Ei(N){var fe=typeof N;return!!N&&(fe=="object"||fe=="function")}function mo(N){return!!N&&typeof N=="object"}function as(N){if(!mo(N)||_r.call(N)!=se||Qe(N))return!1;var fe=An(N);if(fe===null)return!0;var Le=rr.call(fe,"constructor")&&fe.constructor;return typeof Le=="function"&&Le instanceof Le&&hn.call(Le)==wi}function jo(N){return typeof N=="symbol"||mo(N)&&_r.call(N)==U}var ls=R?Be(R):jn;function ou(N){return ql(N,lu(N))}function js(N){return N==null?"":Ha(N)}function su(N,fe,Le){var tt=N==null?r:$l(N,fe);return tt===r?Le:tt}function au(N,fe){return N!=null&&pr(N,fe,Gl)}function di(N){return is(N)?Ga(N):aa(N)}function lu(N){return is(N)?Ga(N,!0):Zl(N)}var rc=Jl(function(N,fe,Le){la(N,fe,Le)});function Bs(N){return N}function us(N){return zs(typeof N=="function"?N:Oo(N,!0))}function ar(N){return Ro(N)?z(Fo(N)):Xl(N)}function fa(){return[]}function Bo(){return!1}$t.compact=Oi,$t.iteratee=us,$t.keys=di,$t.keysIn=lu,$t.memoize=ca,$t.merge=rc,$t.property=ar,$t.toPlainObject=ou,$t.clone=nc,$t.eq=Ri,$t.forEach=iu,$t.get=su,$t.hasIn=au,$t.identity=Bs,$t.isArguments=po,$t.isArray=Zr,$t.isArrayLike=is,$t.isArrayLikeObject=Fs,$t.isBuffer=Ja,$t.isEmpty=ha,$t.isFunction=os,$t.isLength=ss,$t.isObject=Ei,$t.isObjectLike=mo,$t.isPlainObject=as,$t.isSymbol=jo,$t.isTypedArray=ls,$t.stubArray=fa,$t.stubFalse=Bo,$t.toString=js,$t.each=iu,$t.VERSION=a,bn&&((bn.exports=$t)._=$t,Cn._=$t)}).call(pl)})(RR,Gm);var FR=Dp;function Dp(e,t){var r=e&&e.type,a;if(r==="FeatureCollection")for(a=0;a<e.features.length;a++)Dp(e.features[a],t);else if(r==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Dp(e.geometries[a],t);else if(r==="Feature")Dp(e.geometry,t);else if(r==="Polygon")tE(e.coordinates,t);else if(r==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)tE(e.coordinates[a],t);return e}function tE(e,t){if(e.length!==0){nE(e[0],t);for(var r=1;r<e.length;r++)nE(e[r],!t)}}function nE(e,t){for(var r=0,a=0,u=0,f=e.length,g=f-1;u<f;g=u++){var l=(e[u][0]-e[g][0])*(e[g][1]+e[u][1]),w=r+l;a+=Math.abs(r)>=Math.abs(l)?r-w+l:l-w+r,r=w}r+a>=0!=!!t&&e.reverse()}var n1={},jR={get exports(){return n1},set exports(e){n1=e}};const BR=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];(function(e){e.exports=BR})(jR);var On=Gm,vp=FR,Np={};n1.forEach(function(e){if(e.polygon==="all")Np[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",r={};e.values.forEach(function(a){r[a]=!0}),Np[e.key]={},Np[e.key][t]=r}});function DR(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:On.merge(e,t)}var Wm={};Wm=function(e,t,r){t=On.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Np,deduplicator:DR},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=f(e):a=u(e),a;function u(w){var E=new Array,T=new Array,S=new Array;function C(G){var j=On.clone(G);j.lat=G.center.lat,j.lon=G.center.lon,j.__is_center_placeholder=!0,E.push(j)}function F(G){var j=On.clone(G);j.nodes=[];function b(k,U,X){var K={type:"node",id:"_"+j.type+"/"+j.id+"bounds"+X,lat:k,lon:U};j.nodes.push(K.id),E.push(K)}b(j.bounds.minlat,j.bounds.minlon,1),b(j.bounds.maxlat,j.bounds.minlon,2),b(j.bounds.maxlat,j.bounds.maxlon,3),b(j.bounds.minlat,j.bounds.maxlon,4),j.nodes.push(j.nodes[0]),j.__is_bounds_placeholder=!0,T.push(j)}function Y(G){function j(b,k,U){var X={type:"node",id:U,lat:b,lon:k};E.push(X)}On.isArray(G.nodes)||(G.nodes=G.geometry.map(function(b){return b!==null?"_anonymous@"+b.lat+"/"+b.lon:"_anonymous@unknown_location"})),G.geometry.forEach(function(b,k){b&&j(b.lat,b.lon,G.nodes[k])})}function H(G){function j(k,U,X){var K={type:"node",id:X,lat:k,lon:U};E.push(K)}function b(k,U){if(T.some(function(de){return de.type=="way"&&de.id==U}))return;var X={type:"way",id:U,nodes:[]};function K(de,ve){var we={type:"node",id:"_anonymous@"+de+"/"+ve,lat:de,lon:ve};X.nodes.push(we.id),E.push(we)}k.forEach(function(de){de?K(de.lat,de.lon):X.nodes.push(void 0)}),T.push(X)}G.members.forEach(function(k,U){k.type=="node"?k.lat&&j(k.lat,k.lon,k.ref):k.type=="way"&&k.geometry&&(k.ref="_fullGeom"+k.ref,b(k.geometry,k.ref))})}for(var le=0;le<w.elements.length;le++)switch(w.elements[le].type){case"node":var W=w.elements[le];E.push(W);break;case"way":var V=On.clone(w.elements[le]);V.nodes=On.clone(V.nodes),T.push(V),V.center&&C(V),V.geometry?Y(V):V.bounds&&F(V);break;case"relation":var B=On.clone(w.elements[le]);B.members=On.clone(B.members),S.push(B);var se=B.members&&B.members.some(function(G){return G.type=="node"&&G.lat||G.type=="way"&&G.geometry&&G.geometry.length>0});B.center&&C(B),se?H(B):B.bounds&&F(B);break}return g(E,T,S)}function f(w){var E=new Array,T=new Array,S=new Array;function C(B,se,G){B.hasAttribute(G)&&(se[G]=B.getAttribute(G))}function F(B,se){var G=On.clone(B);C(se,G,"lat"),C(se,G,"lon"),G.__is_center_placeholder=!0,E.push(G)}function Y(B,se){var G=On.clone(B);G.nodes=[];function j(b,k,U){var X={type:"node",id:"_"+G.type+"/"+G.id+"bounds"+U,lat:b,lon:k};G.nodes.push(X.id),E.push(X)}j(se.getAttribute("minlat"),se.getAttribute("minlon"),1),j(se.getAttribute("maxlat"),se.getAttribute("minlon"),2),j(se.getAttribute("maxlat"),se.getAttribute("maxlon"),3),j(se.getAttribute("minlat"),se.getAttribute("maxlon"),4),G.nodes.push(G.nodes[0]),G.__is_bounds_placeholder=!0,T.push(G)}function H(B,se){function G(j,b,k){var U={type:"node",id:k,lat:j,lon:b};return E.push(U),U.id}On.isArray(B.nodes)||(B.nodes=[],On.each(se,function(j,b){B.nodes.push("_anonymous@"+j.getAttribute("lat")+"/"+j.getAttribute("lon"))})),On.each(se,function(j,b){j.getAttribute("lat")&&G(j.getAttribute("lat"),j.getAttribute("lon"),B.nodes[b])})}function le(B,se){function G(b,k,U){var X={type:"node",id:U,lat:b,lon:k};E.push(X)}function j(b,k){if(T.some(function(K){return K.type=="way"&&K.id==k}))return;var U={type:"way",id:k,nodes:[]};function X(K,de){var ve={type:"node",id:"_anonymous@"+K+"/"+de,lat:K,lon:de};U.nodes.push(ve.id),E.push(ve)}On.each(b,function(K){K.getAttribute("lat")?X(K.getAttribute("lat"),K.getAttribute("lon")):U.nodes.push(void 0)}),T.push(U)}On.each(se,function(b,k){B.members[k].type=="node"?b.getAttribute("lat")&&G(b.getAttribute("lat"),b.getAttribute("lon"),B.members[k].ref):B.members[k].type=="way"&&b.getElementsByTagName("nd").length>0&&(B.members[k].ref="_fullGeom"+B.members[k].ref,j(b.getElementsByTagName("nd"),B.members[k].ref))})}On.each(w.getElementsByTagName("node"),function(B,se){var G={};On.each(B.getElementsByTagName("tag"),function(b){G[b.getAttribute("k")]=b.getAttribute("v")});var j={type:"node"};C(B,j,"id"),C(B,j,"lat"),C(B,j,"lon"),C(B,j,"version"),C(B,j,"timestamp"),C(B,j,"changeset"),C(B,j,"uid"),C(B,j,"user"),On.isEmpty(G)||(j.tags=G),E.push(j)});var W,V;return On.each(w.getElementsByTagName("way"),function(B,se){var G={},j=[];On.each(B.getElementsByTagName("tag"),function(U){G[U.getAttribute("k")]=U.getAttribute("v")});var b=!1;On.each(B.getElementsByTagName("nd"),function(U,X){var K;(K=U.getAttribute("ref"))&&(j[X]=K),!b&&U.getAttribute("lat")&&(b=!0)});var k={type:"way"};C(B,k,"id"),C(B,k,"version"),C(B,k,"timestamp"),C(B,k,"changeset"),C(B,k,"uid"),C(B,k,"user"),j.length>0&&(k.nodes=j),On.isEmpty(G)||(k.tags=G),(W=B.getElementsByTagName("center")[0])&&F(k,W),b?H(k,B.getElementsByTagName("nd")):(V=B.getElementsByTagName("bounds")[0])&&Y(k,V),T.push(k)}),On.each(w.getElementsByTagName("relation"),function(B,se){var G={},j=[];On.each(B.getElementsByTagName("tag"),function(U){G[U.getAttribute("k")]=U.getAttribute("v")});var b=!1;On.each(B.getElementsByTagName("member"),function(U,X){j[X]={},C(U,j[X],"ref"),C(U,j[X],"role"),C(U,j[X],"type"),(!b&&j[X].type=="node"&&U.getAttribute("lat")||j[X].type=="way"&&U.getElementsByTagName("nd").length>0)&&(b=!0)});var k={type:"relation"};C(B,k,"id"),C(B,k,"version"),C(B,k,"timestamp"),C(B,k,"changeset"),C(B,k,"uid"),C(B,k,"user"),j.length>0&&(k.members=j),On.isEmpty(G)||(k.tags=G),(W=B.getElementsByTagName("center")[0])&&F(k,W),b?le(k,B.getElementsByTagName("member")):(V=B.getElementsByTagName("bounds")[0])&&Y(k,V),S.push(k)}),g(E,T,S)}function g(w,E,T){function S(Pe,$e){if(typeof $e!="object"&&($e={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Pe,$e);for(var Ne in Pe)if(t.uninterestingTags[Ne]!==!0&&!($e[Ne]===!0||$e[Ne]===Pe[Ne]))return!0;return!1}function C(Pe){var $e={timestamp:Pe.timestamp,version:Pe.version,changeset:Pe.changeset,user:Pe.user,uid:Pe.uid};for(var Ne in $e)$e[Ne]===void 0&&delete $e[Ne];return $e}for(var F=new Object,Y=new Object,H=0;H<w.length;H++){var le=w[H];F[le.id]!==void 0&&(le=t.deduplicator(le,F[le.id])),F[le.id]=le,typeof le.tags<"u"&&S(le.tags)&&(Y[le.id]=!0)}for(var H=0;H<T.length;H++)if(On.isArray(T[H].members))for(var W=0;W<T[H].members.length;W++)T[H].members[W].type=="node"&&(Y[T[H].members[W].ref]=!0);for(var V=new Object,B=new Object,H=0;H<E.length;H++){var se=E[H];if(V[se.id]&&(se=t.deduplicator(se,V[se.id])),V[se.id]=se,On.isArray(se.nodes))for(var W=0;W<se.nodes.length;W++)typeof se.nodes[W]!="object"&&(B[se.nodes[W]]=!0,se.nodes[W]=F[se.nodes[W]])}var G=new Array;for(var j in F){var le=F[j];(!B[j]||Y[j])&&G.push(le)}for(var b=new Array,H=0;H<T.length;H++){var k=T[H];b[k.id]&&(k=t.deduplicator(k,b[k.id])),b[k.id]=k}var U={node:{},way:{},relation:{}};for(var j in b){var k=b[j];if(!On.isArray(k.members)){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"ignored because it has no members");continue}for(var W=0;W<k.members.length;W++){var X=k.members[W].type,K=k.members[W].ref;if(typeof K!="number"&&(K=K.replace("_fullGeom","")),!U[X]){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"member",X+"/"+K,"ignored because it has an invalid type");continue}typeof U[X][K]>"u"&&(U[X][K]=[]),U[X][K].push({role:k.members[W].role,rel:k.id,reltags:k.tags})}}var de,ve=[];for(H=0;H<G.length;H++){if(typeof G[H].lon>"u"||typeof G[H].lat>"u"){t.verbose&&console.warn("POI",G[H].type+"/"+G[H].id,"ignored because it lacks coordinates");continue}var we={type:"Feature",id:G[H].type+"/"+G[H].id,properties:{type:G[H].type,id:G[H].id,tags:G[H].tags||{},relations:U.node[G[H].id]||[],meta:C(G[H])},geometry:{type:"Point",coordinates:[+G[H].lon,+G[H].lat]}};G[H].__is_center_placeholder&&(we.properties.geometry="center"),r?r(we):ve.push(we)}for(var ee=[],ie=[],H=0;H<T.length;H++)if(b[T[H].id]===T[H]){if(typeof T[H].tags<"u"&&(T[H].tags.type=="route"||T[H].tags.type=="waterway")){let $e=function(Ne){var qe=!1,at;at=Ne.members.filter(function(Et){return Et.type==="way"}),at=at.map(function(Et){var Nt=V[Et.ref];if(Nt===void 0||Nt.nodes===void 0){t.verbose&&console.warn("Route "+Ne.type+"/"+Ne.id,"tainted by a missing or incomplete  way",Et.type+"/"+Et.ref),qe=!0;return}return{id:Et.ref,role:Et.role,way:Nt,nodes:Nt.nodes.filter(function(jt){return jt!==void 0?!0:(qe=!0,t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"tainted by a way",Et.type+"/"+Et.ref,"with a missing node"),!1)})}}),at=On.compact(at);var yt;yt=d0(at);var Pt=[];if(Pt=On.compact(yt.map(function(Et){return On.compact(Et.map(function(Nt){return[+Nt.lon,+Nt.lat]}))})),Pt.length==0)return t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"contains no coordinates"),!1;var ht={type:"Feature",id:Ne.type+"/"+Ne.id,properties:{type:Ne.type,id:Ne.id,tags:Ne.tags||{},relations:U[Ne.type][Ne.id]||[],meta:C(Ne)},geometry:{type:Pt.length===1?"LineString":"MultiLineString",coordinates:Pt.length===1?Pt[0]:Pt}};return qe&&(t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"is tainted"),ht.properties.tainted=!0),ht};var je=$e;if(!On.isArray(T[H].members)){t.verbose&&console.warn("Route",T[H].type+"/"+T[H].id,"ignored because it has no members");continue}if(T[H].members.forEach(function(Ne){V[Ne.ref]&&!S(V[Ne.ref].tags)&&(V[Ne.ref].is_skippablerelationmember=!0)}),we=$e(T[H]),we===!1){t.verbose&&console.warn("Route relation",T[H].type+"/"+T[H].id,"ignored because it has invalid geometry");continue}r?r(vp(we)):ie.push(we)}if(typeof T[H].tags<"u"&&(T[H].tags.type=="multipolygon"||T[H].tags.type=="boundary")){let Ne=function(qe,at){var yt=!1,Pt=te?"way":"relation",ht=typeof qe.id=="number"?qe.id:+qe.id.replace("_fullGeom",""),Et;Et=at.members.filter(function(O){return O.type==="way"}),Et=Et.map(function(O){var pe=V[O.ref];if(pe===void 0||pe.nodes===void 0){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"tainted by a missing or incomplete way",O.type+"/"+O.ref),yt=!0;return}return{id:O.ref,role:O.role||"outer",way:pe,nodes:pe.nodes.filter(function(ze){return ze!==void 0?!0:(yt=!0,t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"tainted by a way",O.type+"/"+O.ref,"with a missing node"),!1)})}}),Et=On.compact(Et);var Nt,jt;Nt=d0(Et.filter(function(O){return O.role==="outer"})),jt=d0(Et.filter(function(O){return O.role==="inner"}));var cn;function Cn(O){var pe=function(A,z){for(var be=0;be<z.length;be++)if(Ke(z[be],A))return!0;return!1},ze=function(A){return A.map(function(z){return[+z.lat,+z.lon]})},Ke=function(A,z){for(var be=A[0],Be=A[1],Xe=!1,Qe=0,Wt=z.length-1;Qe<z.length;Wt=Qe++){var Sn=z[Qe][0],fn=z[Qe][1],ft=z[Wt][0],Mt=z[Wt][1],un=fn>Be!=Mt>Be&&be<(ft-Sn)*(Be-fn)/(Mt-fn)+Sn;un&&(Xe=!Xe)}return Xe},ot,ae;for(O=ze(O),ot=0;ot<Nt.length;ot++)if(ae=ze(Nt[ot]),pe(ae,O))return ot}cn=Nt.map(function(O){return[O]});for(var bn=0;bn<jt.length;bn++){var on=Cn(jt[bn]);on!==void 0?cn[on].push(jt[bn]):t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains an inner ring with no containing outer")}var En=[];if(En=On.compact(cn.map(function(O){var pe=On.compact(O.map(function(ze){if(ze.length<4){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains a ring with less than four nodes");return}return On.compact(ze.map(function(Ke){return[+Ke.lon,+Ke.lat]}))}));if(pe.length==0){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains an empty ring cluster");return}return pe})),En.length==0)return t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains no coordinates"),!1;var Ee="MultiPolygon";En.length===1&&(Ee="Polygon",En=En[0]);var R={type:"Feature",id:qe.type+"/"+ht,properties:{type:qe.type,id:ht,tags:qe.tags||{},relations:U[qe.type][qe.id]||[],meta:C(qe)},geometry:{type:Ee,coordinates:En}};return yt&&(t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"is tainted"),R.properties.tainted=!0),R};var Ie=Ne;if(!On.isArray(T[H].members)){t.verbose&&console.warn("Multipolygon",T[H].type+"/"+T[H].id,"ignored because it has no members");continue}for(var ne=0,W=0;W<T[H].members.length;W++)T[H].members[W].role=="outer"?ne++:t.verbose&&T[H].members[W].role!="inner"&&console.warn("Multipolygon",T[H].type+"/"+T[H].id,"member",T[H].members[W].type+"/"+T[H].members[W].ref,'ignored because it has an invalid role: "'+T[H].members[W].role+'"');if(T[H].members.forEach(function(qe){V[qe.ref]&&(qe.role==="outer"&&!S(V[qe.ref].tags,T[H].tags)&&(V[qe.ref].is_skippablerelationmember=!0),qe.role==="inner"&&!S(V[qe.ref].tags)&&(V[qe.ref].is_skippablerelationmember=!0))}),ne==0){t.verbose&&console.warn("Multipolygon relation",T[H].type+"/"+T[H].id,"ignored because it has no outer ways");continue}var te=!1;ne==1&&!S(T[H].tags,{type:!0})&&(te=!0);var we=null;if(!te)we=Ne(T[H],T[H]);else{var he=T[H].members.filter(function(qe){return qe.role==="outer"})[0];if(he=V[he.ref],he===void 0){t.verbose&&console.warn("Multipolygon relation",T[H].type+"/"+T[H].id,"ignored because outer way",he.type+"/"+he.ref,"is missing");continue}he.is_skippablerelationmember=!0,we=Ne(he,T[H])}if(we===!1){t.verbose&&console.warn("Multipolygon relation",T[H].type+"/"+T[H].id,"ignored because it has invalid geometry");continue}r?r(vp(we)):ie.push(we)}}for(var H=0;H<E.length;H++)if(V[E[H].id]===E[H]){if(!On.isArray(E[H].nodes)){t.verbose&&console.warn("Way",E[H].type+"/"+E[H].id,"ignored because it has no nodes");continue}if(!E[H].is_skippablerelationmember){typeof E[H].id!="number"&&(E[H].id=+E[H].id.replace("_fullGeom","")),E[H].tainted=!1,E[H].hidden=!1;var _e=new Array;for(W=0;W<E[H].nodes.length;W++)typeof E[H].nodes[W]=="object"?_e.push([+E[H].nodes[W].lon,+E[H].nodes[W].lat]):(t.verbose&&console.warn("Way",E[H].type+"/"+E[H].id,"is tainted by an invalid node"),E[H].tainted=!0);if(_e.length<=1){t.verbose&&console.warn("Way",E[H].type+"/"+E[H].id,"ignored because it contains too few nodes");continue}var xe="LineString";typeof E[H].nodes[0]<"u"&&typeof E[H].nodes[E[H].nodes.length-1]<"u"&&E[H].nodes[0].id===E[H].nodes[E[H].nodes.length-1].id&&(typeof E[H].tags<"u"&&l(E[H].tags)||E[H].__is_bounds_placeholder)&&(xe="Polygon",_e=[_e]);var we={type:"Feature",id:E[H].type+"/"+E[H].id,properties:{type:E[H].type,id:E[H].id,tags:E[H].tags||{},relations:U.way[E[H].id]||[],meta:C(E[H])},geometry:{type:xe,coordinates:_e}};E[H].tainted&&(t.verbose&&console.warn("Way",E[H].type+"/"+E[H].id,"is tainted"),we.properties.tainted=!0),E[H].__is_bounds_placeholder&&(we.properties.geometry="bounds"),r?r(vp(we)):xe=="LineString"?ee.push(we):ie.push(we)}}return r?!0:(de={type:"FeatureCollection",features:[]},de.features=de.features.concat(ie),de.features=de.features.concat(ee),de.features=de.features.concat(ve),t.flatProperties&&de.features.forEach(function(Pe){Pe.properties=On.merge(Pe.properties.meta,Pe.properties.tags,{id:Pe.properties.type+"/"+Pe.properties.id})}),de=vp(de),de)}function l(w){var E=t.polygonFeatures;if(typeof E=="function")return E(w);if(w.area==="no")return!1;for(var T in w){var S=w[T],C=E[T];if(!(typeof C>"u")&&S!=="no"&&(C===!0||C.included_values&&C.included_values[S]===!0||C.excluded_values&&C.excluded_values[S]!==!0))return!0}return!1}};function d0(e){for(var t=function(S){return S[0]},r=function(S){return S[S.length-1]},a=function(S,C){return S!==void 0&&C!==void 0&&S.id===C.id},u=[],f,g,l,w,E,T;e.length;)for(f=e.pop().nodes.slice(),u.push(f);e.length&&!a(t(f),r(f));){for(g=t(f),l=r(f),w=0;w<e.length;w++)if(T=e[w].nodes,a(l,t(T))){E=f.push,T=T.slice(1);break}else if(a(l,r(T))){E=f.push,T=T.slice(0,-1).reverse();break}else if(a(g,r(T))){E=f.unshift,T=T.slice(0,-1);break}else if(a(g,t(T))){E=f.unshift,T=T.slice(1).reverse();break}else T=E=null;if(!T)break;e.splice(w,1),E.apply(f,T)}return u}Wm.toGeojson=Wm;var NR=Wm;const p0={type:"FeatureCollection",features:[]},yA=()=>{const[e,t]=pt.useState(!1),r=pt.useCallback(async(g,l,w)=>{var H,le;if(e||(console.log(w),w<16))return p0;t(!0);let E=300;w>17&&(E=200),w>18&&(E=100),w>19&&(E=50),console.log("overpass: loading...");let T="[out:json]";T+=`[timeout:25];
`,T+='nwr["building"]',T+=`(around:${E},${g},${l});
`,T+="out meta geom;",console.log(T);const S=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(T)}`,{});if(S.status!==200)return t(!1),p0;const C=await S.json();console.log("overpass json elements: ",C.elements);const F=NR(C);console.log("overpass osmtogeojson raw: ",F);for await(const W of F.features){if(!W.properties)continue;W.id=W.properties.id.split("/")[1];const V=(H=C.elements.filter(se=>W.id?typeof W.id=="number"?se.id===W.id:se.id===parseInt(W.id):!1))==null?void 0:H[0];if(V&&(W.properties.tags=V.tags,W.properties.nodes=V.nodes),W.geometry.type==="Polygon"){const se=CR(W.geometry.coordinates);var Y=MR(se);W.properties.center=Y.geometry.coordinates}W.geometry.type==="Point"&&(W.properties.center=W.geometry.coordinates);const B=W.properties.uid;if(B){let se=localStorage.getItem(B+"-icon");if(se===null){const G=await To.getUser(B);(le=G.img)!=null&&le.href?(se=G.img.href,localStorage.setItem(B+"-icon",G.img.href)):localStorage.setItem(B+"-icon","")}W.properties.userIconHref=se||""}}return console.log("overpass osmtogeojson converted: ",F),console.log("overpass: loaded."),t(!1),F},[]),[a,u]=pt.useState(!1),f=pt.useCallback(async g=>{console.log("overpass: loading...",g),u(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(w.status!==200){u(!1);return}const E=await w.json();console.log("overpass json parent elements: ",E.elements);const T=250,S=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${T});
      out;
      `;console.log(S);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(S)}`,{});if(C.status!==200){u(!1);return}const F=await C.json();console.log("overpass json child elements: ",F.elements);const Y=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${T});
      out;
      `;console.log(Y);const H=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(Y)}`,{});if(H.status!==200){u(!1);return}const le=await H.json();return console.log("overpass json neighbour elements: ",le.elements),u(!1),[...E.elements,...F.elements,...le.elements]},[]);return{fetchOverpassBuildings:r,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:a}},UR=()=>Zn("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Rt("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),Zn("datalist",{id:"source-list",children:[Rt("option",{value:"survey"}),Rt("option",{value:"local knowledge"}),Rt("option",{value:"extrapolation"}),Rt("option",{value:"estimation from existing data"})]})]}),m0={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},$R=({feature:e,onCancel:t,onSubmit:r})=>{var de,ve,we,ee;const{detectCountry:a,loadingCountry:u}=zR(),{fetchOverpassAdmin:f,loadingOverpassAdmin:g}=yA(),l=JSON.parse((de=e.properties)==null?void 0:de.center),[w,E]=pt.useState(void 0),[T,S]=pt.useState(),[C,F]=pt.useState(e),[Y,H]=pt.useState(!1),[le,W]=pt.useState(!1),[V,B]=pt.useState(!1),[se,G]=pt.useState(),[j,b]=pt.useState();pt.useEffect(()=>{H(To.isLoggedIn())},[]),pt.useEffect(()=>{(async()=>{var ne,te;const ie=await a(l[0],l[1]);if(E(ie),(ne=ie==null?void 0:ie.properties)!=null&&ne.ISO_A3&&J2[ie.properties.ISO_A3]){const he=J2[ie.properties.ISO_A3];S(he);const _e=he.defaultComment+" "+((te=e.properties)==null?void 0:te.id);b(_e)}})()},[e]),pt.useEffect(()=>{console.log(C.properties)},[C]);const k=pt.useCallback(async()=>{const ie=await nC.openReverseGeocoder([l[0],l[1]]);F(ne=>{const te={properties:{"addr:province":ie.prefecture,"addr:city":ie.city,...ne.properties}};return{...ne,...te}})},[]),U=pt.useCallback(async()=>{if(!C.properties)return;C.properties.nodes;const ie=await f(JSON.parse(C.properties.nodes));console.log("onOverpassReverseGeocode",ie),G(ie)},[C]),X=pt.useCallback(async ie=>{var Ie,Pe,$e;B(!0),ie.preventDefault();const ne=new FormData(ie.currentTarget),te=JSON.parse((Ie=e.properties)==null?void 0:Ie.tags);ne.forEach((Ne,qe)=>{typeof Ne=="string"&&Ne.length>0&&qe!=="comment"&&qe!=="source"&&(te[qe]=Ne)});const he={type:"way",id:e.id,version:(Pe=e.properties)==null?void 0:Pe.version,tags:te,nodes:JSON.parse(($e=e.properties)==null?void 0:$e.nodes)};console.info(JSON.stringify(he,null,2));const _e={create:[],modify:[he],delete:[]},xe=ne.get("comment");xe&&(m0.comment=xe.toString());const je=ne.get("source");je&&(m0.source=je.toString()),await To.uploadChangeset(m0,_e),B(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),r()},[e]),K=pt.useCallback(()=>{W(!0)},[]);return C.properties?Zn("div",{children:[Zn("div",{children:["OSM:"," ",Rt("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+C.properties.id,target:"_blank",children:C.properties.id})," | ",Rt(QT,{feature:C}),T&&Zn("span",{children:[" | ","Address:"," ",Rt(LR,{feature:C,fields:T})]})]}),u?Rt(Qs,{icon:Sv,spin:!0}):Rt(Ss,{children:T?Zn("form",{onSubmit:X,children:[Rt("div",{className:"flex flex-wrap",children:Rt(f0,{feature:C,fieldOption:T.postcodeField,onChange:K})}),Rt("div",{className:"flex flex-wrap",children:T.mainFields.map(ie=>Rt(f0,{feature:C,fieldOption:ie,onChange:K,suggestList:se},ie.key))}),Rt("div",{className:"flex flex-wrap",children:T.detailFields.map(ie=>Rt(f0,{feature:C,fieldOption:ie,onChange:K},ie.key))}),Zn("div",{className:"flex flex-wrap",children:[Rt(UR,{}),Rt(OR,{defaultValue:j})]}),Rt("div",{className:"flex flex-wrap",children:Zn("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[Rt("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((ve=w==null?void 0:w.properties)==null?void 0:ve.ISO_A3)==="JPN"&&Rt("button",{type:"button",onClick:k,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),Zn("button",{type:"button",disabled:g,onClick:U,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",g&&Rt(Qs,{icon:Sv,spin:!0})]}),Rt("button",{disabled:!Y||V||!le,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!Y&&Zn(Ss,{children:[Rt("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),Rt(JT,{})]})]})})]}):Rt("div",{className:"flex flex-wrap",children:Zn("div",{className:"w-full mb-6 md:mb-0",children:[Zn("div",{className:"py-2",children:[Zn("p",{children:["Sorry, Address editor in this country"," ",(we=w==null?void 0:w.properties)==null?void 0:we.NAME," (ISO code:",(ee=w==null?void 0:w.properties)==null?void 0:ee.ISO_A3,") does not support yet."]}),Rt("p",{children:Rt("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),Rt("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function VR(e,t){const[r,a]=pt.useState(e);return pt.useEffect(()=>{const u=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(u)}},[e,t]),r}const GR={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},WR={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function ZR(){const e=pt.useRef(null),[t,r]=pt.useState(),a=VR(t,2500),u=pt.useRef(null),[f,g]=pt.useState({type:"FeatureCollection",features:[]}),[l,w]=pt.useState("auto"),[E,T]=pt.useState(),[S,C]=pt.useState([]),{fetchOverpassBuildings:F,loadingOverpass:Y}=yA();pt.useEffect(()=>{setTimeout(()=>{var b;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(b=u.current)==null||b.trigger())},500)},[]);const H=pt.useCallback(b=>{const k=b.target.getCenter(),U=b.target.getZoom();r({zoom:U,latitude:k.lat,longitude:k.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),le=pt.useCallback(b=>{r(b.viewState)},[]),W=pt.useCallback(b=>{r(b.viewState)},[]);pt.useEffect(()=>{(async()=>{if(!a)return;const b=a,k=await F(b.latitude,b.longitude,b.zoom);g(k)})()},[a]);const V=pt.useCallback(b=>{var de;w("pointer");const{features:k,point:{x:U,y:X}}=b,K=k&&k[0];K?((de=e.current)==null||de.setFeatureState({source:"buildings-source",id:K.id},{hover:!0}),T({feature:K,x:U,y:X})):T(void 0)},[]),B=pt.useCallback(b=>{var k;w("auto"),(k=e.current)==null||k.querySourceFeatures("buildings-source").map(U=>{var X;(X=e.current)==null||X.setFeatureState({source:"buildings-source",id:U.id},{hover:!1})}),T(void 0)},[]),se=pt.useCallback(b=>{var U;G();const k=b.features&&b.features[0];k&&((U=e.current)==null||U.setFeatureState({source:"buildings-source",id:k.id},{select:!0}),C([k]))},[]),G=pt.useCallback(()=>{var b;(b=e.current)==null||b.querySourceFeatures("buildings-source").map(k=>{var U;(U=e.current)==null||U.setFeatureState({source:"buildings-source",id:k.id},{select:!1})}),C([])},[]),j=pt.useMemo(()=>{let b=25;return t&&(b=t.zoom<18?20:t.zoom<19?25:35),f.features.map((k,U)=>!k.properties||!k.properties.center?null:Rt(iM,{style:{cursor:"pointer"},longitude:k.properties.center[0],latitude:k.properties.center[1],anchor:"center",children:Rt(G5,{feature:k,size:b})},`marker-${U}`))},[f,t]);return Zn("div",{children:[Rt(S5,{}),Rt("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:Rt(H5,{viewState:t})}),Zn("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[S.length>0&&Rt("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:Rt("div",{style:{padding:"10px"},children:S.map(b=>Rt($R,{feature:b,onCancel:G,onSubmit:G},b.id))})}),Zn(J1,{ref:e,...t,onMove:le,onMoveEnd:W,onLoad:H,interactiveLayerIds:["buildings-layer-fill"],onClick:se,onMouseEnter:V,onMouseLeave:B,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:pT,style:{width:"100%",height:"100%"},mapStyle:GR,children:[Rt(mM,{id:"buildings-source",type:"geojson",data:f,children:Rt(_M,{...WR})}),Rt(cM,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),Rt(lM,{ref:u,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),Rt("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?Rt(Qs,{size:"2x",icon:x5}):Y?Rt(Qs,{size:"2x",icon:Sv,spin:!0}):Rt(Qs,{size:"2x",icon:w5})}),j,E&&Zn("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:E.x+5,top:E.y+5},children:[Rt(QT,{feature:E.feature}),Rt("br",{}),Rt(W5,{feature:E.feature}),Rt(T5,{feature:E.feature})]})]})]})]})}var vA={},wg={};wg.byteLength=YR;wg.toByteArray=qR;wg.fromByteArray=eF;var Ys=[],Go=[],HR=typeof Uint8Array<"u"?Uint8Array:Array,g0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ic=0,XR=g0.length;Ic<XR;++Ic)Ys[Ic]=g0[Ic],Go[g0.charCodeAt(Ic)]=Ic;Go["-".charCodeAt(0)]=62;Go["_".charCodeAt(0)]=63;function _A(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var a=r===t?0:4-r%4;return[r,a]}function YR(e){var t=_A(e),r=t[0],a=t[1];return(r+a)*3/4-a}function KR(e,t,r){return(t+r)*3/4-r}function qR(e){var t,r=_A(e),a=r[0],u=r[1],f=new HR(KR(e,a,u)),g=0,l=u>0?a-4:a,w;for(w=0;w<l;w+=4)t=Go[e.charCodeAt(w)]<<18|Go[e.charCodeAt(w+1)]<<12|Go[e.charCodeAt(w+2)]<<6|Go[e.charCodeAt(w+3)],f[g++]=t>>16&255,f[g++]=t>>8&255,f[g++]=t&255;return u===2&&(t=Go[e.charCodeAt(w)]<<2|Go[e.charCodeAt(w+1)]>>4,f[g++]=t&255),u===1&&(t=Go[e.charCodeAt(w)]<<10|Go[e.charCodeAt(w+1)]<<4|Go[e.charCodeAt(w+2)]>>2,f[g++]=t>>8&255,f[g++]=t&255),f}function JR(e){return Ys[e>>18&63]+Ys[e>>12&63]+Ys[e>>6&63]+Ys[e&63]}function QR(e,t,r){for(var a,u=[],f=t;f<r;f+=3)a=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),u.push(JR(a));return u.join("")}function eF(e){for(var t,r=e.length,a=r%3,u=[],f=16383,g=0,l=r-a;g<l;g+=f)u.push(QR(e,g,g+f>l?l:g+f));return a===1?(t=e[r-1],u.push(Ys[t>>2]+Ys[t<<4&63]+"==")):a===2&&(t=(e[r-2]<<8)+e[r-1],u.push(Ys[t>>10]+Ys[t>>4&63]+Ys[t<<2&63]+"=")),u.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=wg,r=gg,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=V,e.INSPECT_MAX_BYTES=50;const u=2147483647;e.kMaxLength=u,l.TYPED_ARRAY_SUPPORT=f(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const ae=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(ae,A),ae.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function g(ae){if(ae>u)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const A=new Uint8Array(ae);return Object.setPrototypeOf(A,l.prototype),A}function l(ae,A,z){if(typeof ae=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(ae)}return w(ae,A,z)}l.poolSize=8192;function w(ae,A,z){if(typeof ae=="string")return C(ae,A);if(ArrayBuffer.isView(ae))return Y(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(O(ae,ArrayBuffer)||ae&&O(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(ae,SharedArrayBuffer)||ae&&O(ae.buffer,SharedArrayBuffer)))return H(ae,A,z);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const be=ae.valueOf&&ae.valueOf();if(be!=null&&be!==ae)return l.from(be,A,z);const Be=le(ae);if(Be)return Be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return l.from(ae[Symbol.toPrimitive]("string"),A,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}l.from=function(ae,A,z){return w(ae,A,z)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function E(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function T(ae,A,z){return E(ae),ae<=0?g(ae):A!==void 0?typeof z=="string"?g(ae).fill(A,z):g(ae).fill(A):g(ae)}l.alloc=function(ae,A,z){return T(ae,A,z)};function S(ae){return E(ae),g(ae<0?0:W(ae)|0)}l.allocUnsafe=function(ae){return S(ae)},l.allocUnsafeSlow=function(ae){return S(ae)};function C(ae,A){if((typeof A!="string"||A==="")&&(A="utf8"),!l.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const z=B(ae,A)|0;let be=g(z);const Be=be.write(ae,A);return Be!==z&&(be=be.slice(0,Be)),be}function F(ae){const A=ae.length<0?0:W(ae.length)|0,z=g(A);for(let be=0;be<A;be+=1)z[be]=ae[be]&255;return z}function Y(ae){if(O(ae,Uint8Array)){const A=new Uint8Array(ae);return H(A.buffer,A.byteOffset,A.byteLength)}return F(ae)}function H(ae,A,z){if(A<0||ae.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<A+(z||0))throw new RangeError('"length" is outside of buffer bounds');let be;return A===void 0&&z===void 0?be=new Uint8Array(ae):z===void 0?be=new Uint8Array(ae,A):be=new Uint8Array(ae,A,z),Object.setPrototypeOf(be,l.prototype),be}function le(ae){if(l.isBuffer(ae)){const A=W(ae.length)|0,z=g(A);return z.length===0||ae.copy(z,0,0,A),z}if(ae.length!==void 0)return typeof ae.length!="number"||pe(ae.length)?g(0):F(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return F(ae.data)}function W(ae){if(ae>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return ae|0}function V(ae){return+ae!=ae&&(ae=0),l.alloc(+ae)}l.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==l.prototype},l.compare=function(A,z){if(O(A,Uint8Array)&&(A=l.from(A,A.offset,A.byteLength)),O(z,Uint8Array)&&(z=l.from(z,z.offset,z.byteLength)),!l.isBuffer(A)||!l.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===z)return 0;let be=A.length,Be=z.length;for(let Xe=0,Qe=Math.min(be,Be);Xe<Qe;++Xe)if(A[Xe]!==z[Xe]){be=A[Xe],Be=z[Xe];break}return be<Be?-1:Be<be?1:0},l.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(A,z){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return l.alloc(0);let be;if(z===void 0)for(z=0,be=0;be<A.length;++be)z+=A[be].length;const Be=l.allocUnsafe(z);let Xe=0;for(be=0;be<A.length;++be){let Qe=A[be];if(O(Qe,Uint8Array))Xe+Qe.length>Be.length?(l.isBuffer(Qe)||(Qe=l.from(Qe)),Qe.copy(Be,Xe)):Uint8Array.prototype.set.call(Be,Qe,Xe);else if(l.isBuffer(Qe))Qe.copy(Be,Xe);else throw new TypeError('"list" argument must be an Array of Buffers');Xe+=Qe.length}return Be};function B(ae,A){if(l.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||O(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const z=ae.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&z===0)return 0;let Be=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return bn(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return Ee(ae).length;default:if(Be)return be?-1:bn(ae).length;A=(""+A).toLowerCase(),Be=!0}}l.byteLength=B;function se(ae,A,z){let be=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,A>>>=0,z<=A))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return he(this,A,z);case"utf8":case"utf-8":return we(this,A,z);case"ascii":return ne(this,A,z);case"latin1":case"binary":return te(this,A,z);case"base64":return ve(this,A,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,A,z);default:if(be)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),be=!0}}l.prototype._isBuffer=!0;function G(ae,A,z){const be=ae[A];ae[A]=ae[z],ae[z]=be}l.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<A;z+=2)G(this,z,z+1);return this},l.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<A;z+=4)G(this,z,z+3),G(this,z+1,z+2);return this},l.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<A;z+=8)G(this,z,z+7),G(this,z+1,z+6),G(this,z+2,z+5),G(this,z+3,z+4);return this},l.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?we(this,0,A):se.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(A){if(!l.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:l.compare(this,A)===0},l.prototype.inspect=function(){let A="";const z=e.INSPECT_MAX_BYTES;return A=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(A+=" ... "),"<Buffer "+A+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(A,z,be,Be,Xe){if(O(A,Uint8Array)&&(A=l.from(A,A.offset,A.byteLength)),!l.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(z===void 0&&(z=0),be===void 0&&(be=A?A.length:0),Be===void 0&&(Be=0),Xe===void 0&&(Xe=this.length),z<0||be>A.length||Be<0||Xe>this.length)throw new RangeError("out of range index");if(Be>=Xe&&z>=be)return 0;if(Be>=Xe)return-1;if(z>=be)return 1;if(z>>>=0,be>>>=0,Be>>>=0,Xe>>>=0,this===A)return 0;let Qe=Xe-Be,Wt=be-z;const Sn=Math.min(Qe,Wt),fn=this.slice(Be,Xe),ft=A.slice(z,be);for(let Mt=0;Mt<Sn;++Mt)if(fn[Mt]!==ft[Mt]){Qe=fn[Mt],Wt=ft[Mt];break}return Qe<Wt?-1:Wt<Qe?1:0};function j(ae,A,z,be,Be){if(ae.length===0)return-1;if(typeof z=="string"?(be=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,pe(z)&&(z=Be?0:ae.length-1),z<0&&(z=ae.length+z),z>=ae.length){if(Be)return-1;z=ae.length-1}else if(z<0)if(Be)z=0;else return-1;if(typeof A=="string"&&(A=l.from(A,be)),l.isBuffer(A))return A.length===0?-1:b(ae,A,z,be,Be);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?Be?Uint8Array.prototype.indexOf.call(ae,A,z):Uint8Array.prototype.lastIndexOf.call(ae,A,z):b(ae,[A],z,be,Be);throw new TypeError("val must be string, number or Buffer")}function b(ae,A,z,be,Be){let Xe=1,Qe=ae.length,Wt=A.length;if(be!==void 0&&(be=String(be).toLowerCase(),be==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(ae.length<2||A.length<2)return-1;Xe=2,Qe/=2,Wt/=2,z/=2}function Sn(ft,Mt){return Xe===1?ft[Mt]:ft.readUInt16BE(Mt*Xe)}let fn;if(Be){let ft=-1;for(fn=z;fn<Qe;fn++)if(Sn(ae,fn)===Sn(A,ft===-1?0:fn-ft)){if(ft===-1&&(ft=fn),fn-ft+1===Wt)return ft*Xe}else ft!==-1&&(fn-=fn-ft),ft=-1}else for(z+Wt>Qe&&(z=Qe-Wt),fn=z;fn>=0;fn--){let ft=!0;for(let Mt=0;Mt<Wt;Mt++)if(Sn(ae,fn+Mt)!==Sn(A,Mt)){ft=!1;break}if(ft)return fn}return-1}l.prototype.includes=function(A,z,be){return this.indexOf(A,z,be)!==-1},l.prototype.indexOf=function(A,z,be){return j(this,A,z,be,!0)},l.prototype.lastIndexOf=function(A,z,be){return j(this,A,z,be,!1)};function k(ae,A,z,be){z=Number(z)||0;const Be=ae.length-z;be?(be=Number(be),be>Be&&(be=Be)):be=Be;const Xe=A.length;be>Xe/2&&(be=Xe/2);let Qe;for(Qe=0;Qe<be;++Qe){const Wt=parseInt(A.substr(Qe*2,2),16);if(pe(Wt))return Qe;ae[z+Qe]=Wt}return Qe}function U(ae,A,z,be){return R(bn(A,ae.length-z),ae,z,be)}function X(ae,A,z,be){return R(on(A),ae,z,be)}function K(ae,A,z,be){return R(Ee(A),ae,z,be)}function de(ae,A,z,be){return R(En(A,ae.length-z),ae,z,be)}l.prototype.write=function(A,z,be,Be){if(z===void 0)Be="utf8",be=this.length,z=0;else if(be===void 0&&typeof z=="string")Be=z,be=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(be)?(be=be>>>0,Be===void 0&&(Be="utf8")):(Be=be,be=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Xe=this.length-z;if((be===void 0||be>Xe)&&(be=Xe),A.length>0&&(be<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Be||(Be="utf8");let Qe=!1;for(;;)switch(Be){case"hex":return k(this,A,z,be);case"utf8":case"utf-8":return U(this,A,z,be);case"ascii":case"latin1":case"binary":return X(this,A,z,be);case"base64":return K(this,A,z,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,A,z,be);default:if(Qe)throw new TypeError("Unknown encoding: "+Be);Be=(""+Be).toLowerCase(),Qe=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ve(ae,A,z){return A===0&&z===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(A,z))}function we(ae,A,z){z=Math.min(ae.length,z);const be=[];let Be=A;for(;Be<z;){const Xe=ae[Be];let Qe=null,Wt=Xe>239?4:Xe>223?3:Xe>191?2:1;if(Be+Wt<=z){let Sn,fn,ft,Mt;switch(Wt){case 1:Xe<128&&(Qe=Xe);break;case 2:Sn=ae[Be+1],(Sn&192)===128&&(Mt=(Xe&31)<<6|Sn&63,Mt>127&&(Qe=Mt));break;case 3:Sn=ae[Be+1],fn=ae[Be+2],(Sn&192)===128&&(fn&192)===128&&(Mt=(Xe&15)<<12|(Sn&63)<<6|fn&63,Mt>2047&&(Mt<55296||Mt>57343)&&(Qe=Mt));break;case 4:Sn=ae[Be+1],fn=ae[Be+2],ft=ae[Be+3],(Sn&192)===128&&(fn&192)===128&&(ft&192)===128&&(Mt=(Xe&15)<<18|(Sn&63)<<12|(fn&63)<<6|ft&63,Mt>65535&&Mt<1114112&&(Qe=Mt))}}Qe===null?(Qe=65533,Wt=1):Qe>65535&&(Qe-=65536,be.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),be.push(Qe),Be+=Wt}return ie(be)}const ee=4096;function ie(ae){const A=ae.length;if(A<=ee)return String.fromCharCode.apply(String,ae);let z="",be=0;for(;be<A;)z+=String.fromCharCode.apply(String,ae.slice(be,be+=ee));return z}function ne(ae,A,z){let be="";z=Math.min(ae.length,z);for(let Be=A;Be<z;++Be)be+=String.fromCharCode(ae[Be]&127);return be}function te(ae,A,z){let be="";z=Math.min(ae.length,z);for(let Be=A;Be<z;++Be)be+=String.fromCharCode(ae[Be]);return be}function he(ae,A,z){const be=ae.length;(!A||A<0)&&(A=0),(!z||z<0||z>be)&&(z=be);let Be="";for(let Xe=A;Xe<z;++Xe)Be+=ze[ae[Xe]];return Be}function _e(ae,A,z){const be=ae.slice(A,z);let Be="";for(let Xe=0;Xe<be.length-1;Xe+=2)Be+=String.fromCharCode(be[Xe]+be[Xe+1]*256);return Be}l.prototype.slice=function(A,z){const be=this.length;A=~~A,z=z===void 0?be:~~z,A<0?(A+=be,A<0&&(A=0)):A>be&&(A=be),z<0?(z+=be,z<0&&(z=0)):z>be&&(z=be),z<A&&(z=A);const Be=this.subarray(A,z);return Object.setPrototypeOf(Be,l.prototype),Be};function xe(ae,A,z){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+A>z)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(A,z,be){A=A>>>0,z=z>>>0,be||xe(A,z,this.length);let Be=this[A],Xe=1,Qe=0;for(;++Qe<z&&(Xe*=256);)Be+=this[A+Qe]*Xe;return Be},l.prototype.readUintBE=l.prototype.readUIntBE=function(A,z,be){A=A>>>0,z=z>>>0,be||xe(A,z,this.length);let Be=this[A+--z],Xe=1;for(;z>0&&(Xe*=256);)Be+=this[A+--z]*Xe;return Be},l.prototype.readUint8=l.prototype.readUInt8=function(A,z){return A=A>>>0,z||xe(A,1,this.length),this[A]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(A,z){return A=A>>>0,z||xe(A,2,this.length),this[A]|this[A+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(A,z){return A=A>>>0,z||xe(A,2,this.length),this[A]<<8|this[A+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(A,z){return A=A>>>0,z||xe(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(A,z){return A=A>>>0,z||xe(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},l.prototype.readBigUInt64LE=Ke(function(A){A=A>>>0,Nt(A,"offset");const z=this[A],be=this[A+7];(z===void 0||be===void 0)&&jt(A,this.length-8);const Be=z+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,Xe=this[++A]+this[++A]*2**8+this[++A]*2**16+be*2**24;return BigInt(Be)+(BigInt(Xe)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ke(function(A){A=A>>>0,Nt(A,"offset");const z=this[A],be=this[A+7];(z===void 0||be===void 0)&&jt(A,this.length-8);const Be=z*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],Xe=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+be;return(BigInt(Be)<<BigInt(32))+BigInt(Xe)}),l.prototype.readIntLE=function(A,z,be){A=A>>>0,z=z>>>0,be||xe(A,z,this.length);let Be=this[A],Xe=1,Qe=0;for(;++Qe<z&&(Xe*=256);)Be+=this[A+Qe]*Xe;return Xe*=128,Be>=Xe&&(Be-=Math.pow(2,8*z)),Be},l.prototype.readIntBE=function(A,z,be){A=A>>>0,z=z>>>0,be||xe(A,z,this.length);let Be=z,Xe=1,Qe=this[A+--Be];for(;Be>0&&(Xe*=256);)Qe+=this[A+--Be]*Xe;return Xe*=128,Qe>=Xe&&(Qe-=Math.pow(2,8*z)),Qe},l.prototype.readInt8=function(A,z){return A=A>>>0,z||xe(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},l.prototype.readInt16LE=function(A,z){A=A>>>0,z||xe(A,2,this.length);const be=this[A]|this[A+1]<<8;return be&32768?be|4294901760:be},l.prototype.readInt16BE=function(A,z){A=A>>>0,z||xe(A,2,this.length);const be=this[A+1]|this[A]<<8;return be&32768?be|4294901760:be},l.prototype.readInt32LE=function(A,z){return A=A>>>0,z||xe(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},l.prototype.readInt32BE=function(A,z){return A=A>>>0,z||xe(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},l.prototype.readBigInt64LE=Ke(function(A){A=A>>>0,Nt(A,"offset");const z=this[A],be=this[A+7];(z===void 0||be===void 0)&&jt(A,this.length-8);const Be=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(be<<24);return(BigInt(Be)<<BigInt(32))+BigInt(z+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),l.prototype.readBigInt64BE=Ke(function(A){A=A>>>0,Nt(A,"offset");const z=this[A],be=this[A+7];(z===void 0||be===void 0)&&jt(A,this.length-8);const Be=(z<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(Be)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+be)}),l.prototype.readFloatLE=function(A,z){return A=A>>>0,z||xe(A,4,this.length),r.read(this,A,!0,23,4)},l.prototype.readFloatBE=function(A,z){return A=A>>>0,z||xe(A,4,this.length),r.read(this,A,!1,23,4)},l.prototype.readDoubleLE=function(A,z){return A=A>>>0,z||xe(A,8,this.length),r.read(this,A,!0,52,8)},l.prototype.readDoubleBE=function(A,z){return A=A>>>0,z||xe(A,8,this.length),r.read(this,A,!1,52,8)};function je(ae,A,z,be,Be,Xe){if(!l.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>Be||A<Xe)throw new RangeError('"value" argument is out of bounds');if(z+be>ae.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(A,z,be,Be){if(A=+A,z=z>>>0,be=be>>>0,!Be){const Wt=Math.pow(2,8*be)-1;je(this,A,z,be,Wt,0)}let Xe=1,Qe=0;for(this[z]=A&255;++Qe<be&&(Xe*=256);)this[z+Qe]=A/Xe&255;return z+be},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(A,z,be,Be){if(A=+A,z=z>>>0,be=be>>>0,!Be){const Wt=Math.pow(2,8*be)-1;je(this,A,z,be,Wt,0)}let Xe=be-1,Qe=1;for(this[z+Xe]=A&255;--Xe>=0&&(Qe*=256);)this[z+Xe]=A/Qe&255;return z+be},l.prototype.writeUint8=l.prototype.writeUInt8=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,1,255,0),this[z]=A&255,z+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,2,65535,0),this[z]=A&255,this[z+1]=A>>>8,z+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,2,65535,0),this[z]=A>>>8,this[z+1]=A&255,z+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,4,4294967295,0),this[z+3]=A>>>24,this[z+2]=A>>>16,this[z+1]=A>>>8,this[z]=A&255,z+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,4,4294967295,0),this[z]=A>>>24,this[z+1]=A>>>16,this[z+2]=A>>>8,this[z+3]=A&255,z+4};function Ie(ae,A,z,be,Be){Et(A,be,Be,ae,z,7);let Xe=Number(A&BigInt(4294967295));ae[z++]=Xe,Xe=Xe>>8,ae[z++]=Xe,Xe=Xe>>8,ae[z++]=Xe,Xe=Xe>>8,ae[z++]=Xe;let Qe=Number(A>>BigInt(32)&BigInt(4294967295));return ae[z++]=Qe,Qe=Qe>>8,ae[z++]=Qe,Qe=Qe>>8,ae[z++]=Qe,Qe=Qe>>8,ae[z++]=Qe,z}function Pe(ae,A,z,be,Be){Et(A,be,Be,ae,z,7);let Xe=Number(A&BigInt(4294967295));ae[z+7]=Xe,Xe=Xe>>8,ae[z+6]=Xe,Xe=Xe>>8,ae[z+5]=Xe,Xe=Xe>>8,ae[z+4]=Xe;let Qe=Number(A>>BigInt(32)&BigInt(4294967295));return ae[z+3]=Qe,Qe=Qe>>8,ae[z+2]=Qe,Qe=Qe>>8,ae[z+1]=Qe,Qe=Qe>>8,ae[z]=Qe,z+8}l.prototype.writeBigUInt64LE=Ke(function(A,z=0){return Ie(this,A,z,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ke(function(A,z=0){return Pe(this,A,z,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(A,z,be,Be){if(A=+A,z=z>>>0,!Be){const Sn=Math.pow(2,8*be-1);je(this,A,z,be,Sn-1,-Sn)}let Xe=0,Qe=1,Wt=0;for(this[z]=A&255;++Xe<be&&(Qe*=256);)A<0&&Wt===0&&this[z+Xe-1]!==0&&(Wt=1),this[z+Xe]=(A/Qe>>0)-Wt&255;return z+be},l.prototype.writeIntBE=function(A,z,be,Be){if(A=+A,z=z>>>0,!Be){const Sn=Math.pow(2,8*be-1);je(this,A,z,be,Sn-1,-Sn)}let Xe=be-1,Qe=1,Wt=0;for(this[z+Xe]=A&255;--Xe>=0&&(Qe*=256);)A<0&&Wt===0&&this[z+Xe+1]!==0&&(Wt=1),this[z+Xe]=(A/Qe>>0)-Wt&255;return z+be},l.prototype.writeInt8=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,1,127,-128),A<0&&(A=255+A+1),this[z]=A&255,z+1},l.prototype.writeInt16LE=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,2,32767,-32768),this[z]=A&255,this[z+1]=A>>>8,z+2},l.prototype.writeInt16BE=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,2,32767,-32768),this[z]=A>>>8,this[z+1]=A&255,z+2},l.prototype.writeInt32LE=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,4,2147483647,-2147483648),this[z]=A&255,this[z+1]=A>>>8,this[z+2]=A>>>16,this[z+3]=A>>>24,z+4},l.prototype.writeInt32BE=function(A,z,be){return A=+A,z=z>>>0,be||je(this,A,z,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[z]=A>>>24,this[z+1]=A>>>16,this[z+2]=A>>>8,this[z+3]=A&255,z+4},l.prototype.writeBigInt64LE=Ke(function(A,z=0){return Ie(this,A,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ke(function(A,z=0){return Pe(this,A,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $e(ae,A,z,be,Be,Xe){if(z+be>ae.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function Ne(ae,A,z,be,Be){return A=+A,z=z>>>0,Be||$e(ae,A,z,4),r.write(ae,A,z,be,23,4),z+4}l.prototype.writeFloatLE=function(A,z,be){return Ne(this,A,z,!0,be)},l.prototype.writeFloatBE=function(A,z,be){return Ne(this,A,z,!1,be)};function qe(ae,A,z,be,Be){return A=+A,z=z>>>0,Be||$e(ae,A,z,8),r.write(ae,A,z,be,52,8),z+8}l.prototype.writeDoubleLE=function(A,z,be){return qe(this,A,z,!0,be)},l.prototype.writeDoubleBE=function(A,z,be){return qe(this,A,z,!1,be)},l.prototype.copy=function(A,z,be,Be){if(!l.isBuffer(A))throw new TypeError("argument should be a Buffer");if(be||(be=0),!Be&&Be!==0&&(Be=this.length),z>=A.length&&(z=A.length),z||(z=0),Be>0&&Be<be&&(Be=be),Be===be||A.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(Be<0)throw new RangeError("sourceEnd out of bounds");Be>this.length&&(Be=this.length),A.length-z<Be-be&&(Be=A.length-z+be);const Xe=Be-be;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,be,Be):Uint8Array.prototype.set.call(A,this.subarray(be,Be),z),Xe},l.prototype.fill=function(A,z,be,Be){if(typeof A=="string"){if(typeof z=="string"?(Be=z,z=0,be=this.length):typeof be=="string"&&(Be=be,be=this.length),Be!==void 0&&typeof Be!="string")throw new TypeError("encoding must be a string");if(typeof Be=="string"&&!l.isEncoding(Be))throw new TypeError("Unknown encoding: "+Be);if(A.length===1){const Qe=A.charCodeAt(0);(Be==="utf8"&&Qe<128||Be==="latin1")&&(A=Qe)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(z<0||this.length<z||this.length<be)throw new RangeError("Out of range index");if(be<=z)return this;z=z>>>0,be=be===void 0?this.length:be>>>0,A||(A=0);let Xe;if(typeof A=="number")for(Xe=z;Xe<be;++Xe)this[Xe]=A;else{const Qe=l.isBuffer(A)?A:l.from(A,Be),Wt=Qe.length;if(Wt===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Xe=0;Xe<be-z;++Xe)this[Xe+z]=Qe[Xe%Wt]}return this};const at={};function yt(ae,A,z){at[ae]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Be,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}yt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),yt("ERR_INVALID_ARG_TYPE",function(ae,A){return`The "${ae}" argument must be of type number. Received type ${typeof A}`},TypeError),yt("ERR_OUT_OF_RANGE",function(ae,A,z){let be=`The value of "${ae}" is out of range.`,Be=z;return Number.isInteger(z)&&Math.abs(z)>2**32?Be=Pt(String(z)):typeof z=="bigint"&&(Be=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(Be=Pt(Be)),Be+="n"),be+=` It must be ${A}. Received ${Be}`,be},RangeError);function Pt(ae){let A="",z=ae.length;const be=ae[0]==="-"?1:0;for(;z>=be+4;z-=3)A=`_${ae.slice(z-3,z)}${A}`;return`${ae.slice(0,z)}${A}`}function ht(ae,A,z){Nt(A,"offset"),(ae[A]===void 0||ae[A+z]===void 0)&&jt(A,ae.length-(z+1))}function Et(ae,A,z,be,Be,Xe){if(ae>z||ae<A){const Qe=typeof A=="bigint"?"n":"";let Wt;throw Xe>3?A===0||A===BigInt(0)?Wt=`>= 0${Qe} and < 2${Qe} ** ${(Xe+1)*8}${Qe}`:Wt=`>= -(2${Qe} ** ${(Xe+1)*8-1}${Qe}) and < 2 ** ${(Xe+1)*8-1}${Qe}`:Wt=`>= ${A}${Qe} and <= ${z}${Qe}`,new at.ERR_OUT_OF_RANGE("value",Wt,ae)}ht(be,Be,Xe)}function Nt(ae,A){if(typeof ae!="number")throw new at.ERR_INVALID_ARG_TYPE(A,"number",ae)}function jt(ae,A,z){throw Math.floor(ae)!==ae?(Nt(ae,z),new at.ERR_OUT_OF_RANGE(z||"offset","an integer",ae)):A<0?new at.ERR_BUFFER_OUT_OF_BOUNDS:new at.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${A}`,ae)}const cn=/[^+/0-9A-Za-z-_]/g;function Cn(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(cn,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function bn(ae,A){A=A||1/0;let z;const be=ae.length;let Be=null;const Xe=[];for(let Qe=0;Qe<be;++Qe){if(z=ae.charCodeAt(Qe),z>55295&&z<57344){if(!Be){if(z>56319){(A-=3)>-1&&Xe.push(239,191,189);continue}else if(Qe+1===be){(A-=3)>-1&&Xe.push(239,191,189);continue}Be=z;continue}if(z<56320){(A-=3)>-1&&Xe.push(239,191,189),Be=z;continue}z=(Be-55296<<10|z-56320)+65536}else Be&&(A-=3)>-1&&Xe.push(239,191,189);if(Be=null,z<128){if((A-=1)<0)break;Xe.push(z)}else if(z<2048){if((A-=2)<0)break;Xe.push(z>>6|192,z&63|128)}else if(z<65536){if((A-=3)<0)break;Xe.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((A-=4)<0)break;Xe.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return Xe}function on(ae){const A=[];for(let z=0;z<ae.length;++z)A.push(ae.charCodeAt(z)&255);return A}function En(ae,A){let z,be,Be;const Xe=[];for(let Qe=0;Qe<ae.length&&!((A-=2)<0);++Qe)z=ae.charCodeAt(Qe),be=z>>8,Be=z%256,Xe.push(Be),Xe.push(be);return Xe}function Ee(ae){return t.toByteArray(Cn(ae))}function R(ae,A,z,be){let Be;for(Be=0;Be<be&&!(Be+z>=A.length||Be>=ae.length);++Be)A[Be+z]=ae[Be];return Be}function O(ae,A){return ae instanceof A||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===A.name}function pe(ae){return ae!==ae}const ze=function(){const ae="0123456789abcdef",A=new Array(256);for(let z=0;z<16;++z){const be=z*16;for(let Be=0;Be<16;++Be)A[be+Be]=ae[z]+ae[Be]}return A}();function Ke(ae){return typeof BigInt>"u"?ot:ae}function ot(){throw new Error("BigInt not supported")}})(vA);window.Buffer=vA.Buffer;F3.render(Rt(hE.StrictMode,{children:Rt(ZR,{})}),document.getElementById("root"));

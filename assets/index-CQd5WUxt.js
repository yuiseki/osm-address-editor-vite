function eR(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(e,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=i(u);fetch(u.href,f)}})();var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ww(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var u=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,u.get?u:{enumerable:!0,get:function(){return e[a]}})}),i}var II={exports:{}},v0={},CI={exports:{}},Lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=Symbol.for("react.element"),tR=Symbol.for("react.portal"),rR=Symbol.for("react.fragment"),nR=Symbol.for("react.strict_mode"),iR=Symbol.for("react.profiler"),oR=Symbol.for("react.provider"),aR=Symbol.for("react.context"),sR=Symbol.for("react.forward_ref"),lR=Symbol.for("react.suspense"),uR=Symbol.for("react.memo"),cR=Symbol.for("react.lazy"),cE=Symbol.iterator;function hR(e){return e===null||typeof e!="object"?null:(e=cE&&e[cE]||e["@@iterator"],typeof e=="function"?e:null)}var kI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MI=Object.assign,OI={};function vf(e,t,i){this.props=e,this.context=t,this.refs=OI,this.updater=i||kI}vf.prototype.isReactComponent={};vf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function FI(){}FI.prototype=vf.prototype;function bw(e,t,i){this.props=e,this.context=t,this.refs=OI,this.updater=i||kI}var Sw=bw.prototype=new FI;Sw.constructor=bw;MI(Sw,vf.prototype);Sw.isPureReactComponent=!0;var hE=Array.isArray,RI=Object.prototype.hasOwnProperty,Ew={current:null},jI={key:!0,ref:!0,__self:!0,__source:!0};function zI(e,t,i){var a,u={},f=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(f=""+t.key),t)RI.call(t,a)&&!jI.hasOwnProperty(a)&&(u[a]=t[a]);var l=arguments.length-2;if(l===1)u.children=i;else if(1<l){for(var w=Array(l),E=0;E<l;E++)w[E]=arguments[E+2];u.children=w}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)u[a]===void 0&&(u[a]=l[a]);return{$$typeof:Vp,type:e,key:f,ref:d,props:u,_owner:Ew.current}}function fR(e,t){return{$$typeof:Vp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vp}function dR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var fE=/\/+/g;function Hv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dR(""+e.key):t.toString(36)}function Ag(e,t,i,a,u){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(f){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Vp:case tR:d=!0}}if(d)return d=e,u=u(d),e=a===""?"."+Hv(d,0):a,hE(u)?(i="",e!=null&&(i=e.replace(fE,"$&/")+"/"),Ag(u,t,i,"",function(E){return E})):u!=null&&(Tw(u)&&(u=fR(u,i+(!u.key||d&&d.key===u.key?"":(""+u.key).replace(fE,"$&/")+"/")+e)),t.push(u)),1;if(d=0,a=a===""?".":a+":",hE(e))for(var l=0;l<e.length;l++){f=e[l];var w=a+Hv(f,l);d+=Ag(f,t,i,w,u)}else if(w=hR(e),typeof w=="function")for(e=w.call(e),l=0;!(f=e.next()).done;)f=f.value,w=a+Hv(f,l++),d+=Ag(f,t,i,w,u);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function $m(e,t,i){if(e==null)return e;var a=[],u=0;return Ag(e,a,"","",function(f){return t.call(i,f,u++)}),a}function pR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var uo={current:null},Ig={transition:null},mR={ReactCurrentDispatcher:uo,ReactCurrentBatchConfig:Ig,ReactCurrentOwner:Ew};Lr.Children={map:$m,forEach:function(e,t,i){$m(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return $m(e,function(){t++}),t},toArray:function(e){return $m(e,function(t){return t})||[]},only:function(e){if(!Tw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Lr.Component=vf;Lr.Fragment=rR;Lr.Profiler=iR;Lr.PureComponent=bw;Lr.StrictMode=nR;Lr.Suspense=lR;Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mR;Lr.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=MI({},e.props),u=e.key,f=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,d=Ew.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(w in t)RI.call(t,w)&&!jI.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&l!==void 0?l[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=i;else if(1<w){l=Array(w);for(var E=0;E<w;E++)l[E]=arguments[E+2];a.children=l}return{$$typeof:Vp,type:e.type,key:u,ref:f,props:a,_owner:d}};Lr.createContext=function(e){return e={$$typeof:aR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oR,_context:e},e.Consumer=e};Lr.createElement=zI;Lr.createFactory=function(e){var t=zI.bind(null,e);return t.type=e,t};Lr.createRef=function(){return{current:null}};Lr.forwardRef=function(e){return{$$typeof:sR,render:e}};Lr.isValidElement=Tw;Lr.lazy=function(e){return{$$typeof:cR,_payload:{_status:-1,_result:e},_init:pR}};Lr.memo=function(e,t){return{$$typeof:uR,type:e,compare:t===void 0?null:t}};Lr.startTransition=function(e){var t=Ig.transition;Ig.transition={};try{e()}finally{Ig.transition=t}};Lr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Lr.useCallback=function(e,t){return uo.current.useCallback(e,t)};Lr.useContext=function(e){return uo.current.useContext(e)};Lr.useDebugValue=function(){};Lr.useDeferredValue=function(e){return uo.current.useDeferredValue(e)};Lr.useEffect=function(e,t){return uo.current.useEffect(e,t)};Lr.useId=function(){return uo.current.useId()};Lr.useImperativeHandle=function(e,t,i){return uo.current.useImperativeHandle(e,t,i)};Lr.useInsertionEffect=function(e,t){return uo.current.useInsertionEffect(e,t)};Lr.useLayoutEffect=function(e,t){return uo.current.useLayoutEffect(e,t)};Lr.useMemo=function(e,t){return uo.current.useMemo(e,t)};Lr.useReducer=function(e,t,i){return uo.current.useReducer(e,t,i)};Lr.useRef=function(e){return uo.current.useRef(e)};Lr.useState=function(e){return uo.current.useState(e)};Lr.useSyncExternalStore=function(e,t,i){return uo.current.useSyncExternalStore(e,t,i)};Lr.useTransition=function(){return uo.current.useTransition()};Lr.version="18.2.0";CI.exports=Lr;var yt=CI.exports;const Pw=yf(yt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gR=yt,yR=Symbol.for("react.element"),vR=Symbol.for("react.fragment"),_R=Object.prototype.hasOwnProperty,xR=gR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wR={key:!0,ref:!0,__self:!0,__source:!0};function LI(e,t,i){var a,u={},f=null,d=null;i!==void 0&&(f=""+i),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)_R.call(t,a)&&!wR.hasOwnProperty(a)&&(u[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)u[a]===void 0&&(u[a]=t[a]);return{$$typeof:yR,type:e,key:f,ref:d,props:u,_owner:xR.current}}v0.Fragment=vR;v0.jsx=LI;v0.jsxs=LI;II.exports=v0;var gt=II.exports,BI={exports:{}},Ko={},DI={exports:{}},NI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,de){var be=re.length;re.push(de);e:for(;0<be;){var Pe=be-1>>>1,$e=re[Pe];if(0<u($e,de))re[Pe]=de,re[be]=$e,be=Pe;else break e}}function i(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var de=re[0],be=re.pop();if(be!==de){re[0]=be;e:for(var Pe=0,$e=re.length,Ce=$e>>>1;Pe<Ce;){var Fe=2*(Pe+1)-1,He=re[Fe],We=Fe+1,it=re[We];if(0>u(He,be))We<$e&&0>u(it,He)?(re[Pe]=it,re[We]=be,Pe=We):(re[Pe]=He,re[Fe]=be,Pe=Fe);else if(We<$e&&0>u(it,be))re[Pe]=it,re[We]=be,Pe=We;else break e}}return de}function u(re,de){var be=re.sortIndex-de.sortIndex;return be!==0?be:re.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var d=Date,l=d.now();e.unstable_now=function(){return d.now()-l}}var w=[],E=[],I=1,b=null,T=3,R=!1,L=!1,j=!1,le=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(re){for(var de=i(E);de!==null;){if(de.callback===null)a(E);else if(de.startTime<=re)a(E),de.sortIndex=de.expirationTime,t(w,de);else break;de=i(E)}}function ae(re){if(j=!1,W(re),!L)if(i(w)!==null)L=!0,he(q);else{var de=i(E);de!==null&&Y(ae,de.startTime-re)}}function q(re,de){L=!1,j&&(j=!1,K(z),z=-1),R=!0;var be=T;try{for(W(de),b=i(w);b!==null&&(!(b.expirationTime>de)||re&&!X());){var Pe=b.callback;if(typeof Pe=="function"){b.callback=null,T=b.priorityLevel;var $e=Pe(b.expirationTime<=de);de=e.unstable_now(),typeof $e=="function"?b.callback=$e:b===i(w)&&a(w),W(de)}else a(w);b=i(w)}if(b!==null)var Ce=!0;else{var Fe=i(E);Fe!==null&&Y(ae,Fe.startTime-de),Ce=!1}return Ce}finally{b=null,T=be,R=!1}}var V=!1,P=null,z=-1,B=5,ee=-1;function X(){return!(e.unstable_now()-ee<B)}function ye(){if(P!==null){var re=e.unstable_now();ee=re;var de=!0;try{de=P(!0,re)}finally{de?ge():(V=!1,P=null)}}else V=!1}var ge;if(typeof Z=="function")ge=function(){Z(ye)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ie=fe.port2;fe.port1.onmessage=ye,ge=function(){ie.postMessage(null)}}else ge=function(){le(ye,0)};function he(re){P=re,V||(V=!0,ge())}function Y(re,de){z=le(function(){re(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){L||R||(L=!0,he(q))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return i(w)},e.unstable_next=function(re){switch(T){case 1:case 2:case 3:var de=3;break;default:de=T}var be=T;T=de;try{return re()}finally{T=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,de){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var be=T;T=re;try{return de()}finally{T=be}},e.unstable_scheduleCallback=function(re,de,be){var Pe=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Pe+be:Pe):be=Pe,re){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=be+$e,re={id:I++,callback:de,priorityLevel:re,startTime:be,expirationTime:$e,sortIndex:-1},be>Pe?(re.sortIndex=be,t(E,re),i(w)===null&&re===i(E)&&(j?(K(z),z=-1):j=!0,Y(ae,be-Pe))):(re.sortIndex=$e,t(w,re),L||R||(L=!0,he(q))),re},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(re){var de=T;return function(){var be=T;T=de;try{return re.apply(this,arguments)}finally{T=be}}}})(NI);DI.exports=NI;var bR=DI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I=yt,qo=bR;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UI=new Set,mp={};function Tc(e,t){Qh(e,t),Qh(e+"Capture",t)}function Qh(e,t){for(mp[e]=t,e=0;e<t.length;e++)UI.add(t[e])}var cl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y1=Object.prototype.hasOwnProperty,SR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dE={},pE={};function ER(e){return y1.call(pE,e)?!0:y1.call(dE,e)?!1:SR.test(e)?pE[e]=!0:(dE[e]=!0,!1)}function TR(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function PR(e,t,i,a){if(t===null||typeof t>"u"||TR(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function co(e,t,i,a,u,f,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=d}var Fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fi[e]=new co(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fi[t]=new co(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fi[e]=new co(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fi[e]=new co(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fi[e]=new co(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fi[e]=new co(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fi[e]=new co(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fi[e]=new co(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fi[e]=new co(e,5,!1,e.toLowerCase(),null,!1,!1)});var Aw=/[\-:]([a-z])/g;function Iw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Aw,Iw);Fi[t]=new co(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Aw,Iw);Fi[t]=new co(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Aw,Iw);Fi[t]=new co(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fi[e]=new co(e,1,!1,e.toLowerCase(),null,!1,!1)});Fi.xlinkHref=new co("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fi[e]=new co(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cw(e,t,i,a){var u=Fi.hasOwnProperty(t)?Fi[t]:null;(u!==null?u.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(PR(t,i,u,a)&&(i=null),a||u===null?ER(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(t=u.attributeName,a=u.attributeNamespace,i===null?e.removeAttribute(t):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var vl=$I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Um=Symbol.for("react.element"),Th=Symbol.for("react.portal"),Ph=Symbol.for("react.fragment"),kw=Symbol.for("react.strict_mode"),v1=Symbol.for("react.profiler"),VI=Symbol.for("react.provider"),GI=Symbol.for("react.context"),Mw=Symbol.for("react.forward_ref"),_1=Symbol.for("react.suspense"),x1=Symbol.for("react.suspense_list"),Ow=Symbol.for("react.memo"),tu=Symbol.for("react.lazy"),WI=Symbol.for("react.offscreen"),mE=Symbol.iterator;function Td(e){return e===null||typeof e!="object"?null:(e=mE&&e[mE]||e["@@iterator"],typeof e=="function"?e:null)}var Rn=Object.assign,Zv;function Ld(e){if(Zv===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Zv=t&&t[1]||""}return`
`+Zv+e}var Xv=!1;function qv(e,t){if(!e||Xv)return"";Xv=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var a=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){a=E}e.call(t.prototype)}else{try{throw Error()}catch(E){a=E}e()}}catch(E){if(E&&a&&typeof E.stack=="string"){for(var u=E.stack.split(`
`),f=a.stack.split(`
`),d=u.length-1,l=f.length-1;1<=d&&0<=l&&u[d]!==f[l];)l--;for(;1<=d&&0<=l;d--,l--)if(u[d]!==f[l]){if(d!==1||l!==1)do if(d--,l--,0>l||u[d]!==f[l]){var w=`
`+u[d].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=d&&0<=l);break}}}finally{Xv=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Ld(e):""}function AR(e){switch(e.tag){case 5:return Ld(e.type);case 16:return Ld("Lazy");case 13:return Ld("Suspense");case 19:return Ld("SuspenseList");case 0:case 2:case 15:return e=qv(e.type,!1),e;case 11:return e=qv(e.type.render,!1),e;case 1:return e=qv(e.type,!0),e;default:return""}}function w1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ph:return"Fragment";case Th:return"Portal";case v1:return"Profiler";case kw:return"StrictMode";case _1:return"Suspense";case x1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case GI:return(e.displayName||"Context")+".Consumer";case VI:return(e._context.displayName||"Context")+".Provider";case Mw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ow:return t=e.displayName||null,t!==null?t:w1(e.type)||"Memo";case tu:t=e._payload,e=e._init;try{return w1(e(t))}catch{}}return null}function IR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w1(t);case 8:return t===kw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _u(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function HI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function CR(e){var t=HI(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(d){a=""+d,f.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vm(e){e._valueTracker||(e._valueTracker=CR(e))}function ZI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=HI(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function ny(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function b1(e,t){var i=t.checked;return Rn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function gE(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=_u(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function XI(e,t){t=t.checked,t!=null&&Cw(e,"checked",t,!1)}function S1(e,t){XI(e,t);var i=_u(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?E1(e,t.type,i):t.hasOwnProperty("defaultValue")&&E1(e,t.type,_u(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yE(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function E1(e,t,i){(t!=="number"||ny(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Bd=Array.isArray;function Vh(e,t,i,a){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&a&&(e[i].defaultSelected=!0)}else{for(i=""+_u(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function T1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Rn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vE(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(Bd(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:_u(i)}}function qI(e,t){var i=_u(t.value),a=_u(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function _E(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function KI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?KI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gm,JI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,u){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gm=Gm||document.createElement("div"),Gm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gp(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kR=["Webkit","ms","Moz","O"];Object.keys(Kd).forEach(function(e){kR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kd[t]=Kd[e]})});function YI(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Kd.hasOwnProperty(e)&&Kd[e]?(""+t).trim():t+"px"}function QI(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,u=YI(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,u):e[i]=u}}var MR=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A1(e,t){if(t){if(MR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function I1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C1=null;function Fw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var k1=null,Gh=null,Wh=null;function xE(e){if(e=Hp(e)){if(typeof k1!="function")throw Error(At(280));var t=e.stateNode;t&&(t=S0(t),k1(e.stateNode,e.type,t))}}function eC(e){Gh?Wh?Wh.push(e):Wh=[e]:Gh=e}function tC(){if(Gh){var e=Gh,t=Wh;if(Wh=Gh=null,xE(e),t)for(e=0;e<t.length;e++)xE(t[e])}}function rC(e,t){return e(t)}function nC(){}var Kv=!1;function iC(e,t,i){if(Kv)return e(t,i);Kv=!0;try{return rC(e,t,i)}finally{Kv=!1,(Gh!==null||Wh!==null)&&(nC(),tC())}}function yp(e,t){var i=e.stateNode;if(i===null)return null;var a=S0(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var M1=!1;if(cl)try{var Pd={};Object.defineProperty(Pd,"passive",{get:function(){M1=!0}}),window.addEventListener("test",Pd,Pd),window.removeEventListener("test",Pd,Pd)}catch{M1=!1}function OR(e,t,i,a,u,f,d,l,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(i,E)}catch(I){this.onError(I)}}var Jd=!1,iy=null,oy=!1,O1=null,FR={onError:function(e){Jd=!0,iy=e}};function RR(e,t,i,a,u,f,d,l,w){Jd=!1,iy=null,OR.apply(FR,arguments)}function jR(e,t,i,a,u,f,d,l,w){if(RR.apply(this,arguments),Jd){if(Jd){var E=iy;Jd=!1,iy=null}else throw Error(At(198));oy||(oy=!0,O1=E)}}function Pc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function oC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wE(e){if(Pc(e)!==e)throw Error(At(188))}function zR(e){var t=e.alternate;if(!t){if(t=Pc(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(a=u.return,a!==null){i=a;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return wE(u),e;if(f===a)return wE(u),t;f=f.sibling}throw Error(At(188))}if(i.return!==a.return)i=u,a=f;else{for(var d=!1,l=u.child;l;){if(l===i){d=!0,i=u,a=f;break}if(l===a){d=!0,a=u,i=f;break}l=l.sibling}if(!d){for(l=f.child;l;){if(l===i){d=!0,i=f,a=u;break}if(l===a){d=!0,a=f,i=u;break}l=l.sibling}if(!d)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function aC(e){return e=zR(e),e!==null?sC(e):null}function sC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sC(e);if(t!==null)return t;e=e.sibling}return null}var lC=qo.unstable_scheduleCallback,bE=qo.unstable_cancelCallback,LR=qo.unstable_shouldYield,BR=qo.unstable_requestPaint,Gn=qo.unstable_now,DR=qo.unstable_getCurrentPriorityLevel,Rw=qo.unstable_ImmediatePriority,uC=qo.unstable_UserBlockingPriority,ay=qo.unstable_NormalPriority,NR=qo.unstable_LowPriority,cC=qo.unstable_IdlePriority,_0=null,Ps=null;function $R(e){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(_0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ha=Math.clz32?Math.clz32:GR,UR=Math.log,VR=Math.LN2;function GR(e){return e>>>=0,e===0?32:31-(UR(e)/VR|0)|0}var Wm=64,Hm=4194304;function Dd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sy(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,u=e.suspendedLanes,f=e.pingedLanes,d=i&268435455;if(d!==0){var l=d&~u;l!==0?a=Dd(l):(f&=d,f!==0&&(a=Dd(f)))}else d=i&~u,d!==0?a=Dd(d):f!==0&&(a=Dd(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&u)&&(u=a&-a,f=t&-t,u>=f||u===16&&(f&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Ha(t),u=1<<i,a|=e[i],t&=~u;return a}function WR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HR(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var d=31-Ha(f),l=1<<d,w=u[d];w===-1?(!(l&i)||l&a)&&(u[d]=WR(l,t)):w<=t&&(e.expiredLanes|=l),f&=~l}}function F1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hC(){var e=Wm;return Wm<<=1,!(Wm&4194240)&&(Wm=64),e}function Jv(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Gp(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ha(t),e[t]=i}function ZR(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-Ha(i),f=1<<u;t[u]=0,a[u]=-1,e[u]=-1,i&=~f}}function jw(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Ha(i),u=1<<a;u&t|e[a]&t&&(e[a]|=t),i&=~u}}var rn=0;function fC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dC,zw,pC,mC,gC,R1=!1,Zm=[],cu=null,hu=null,fu=null,vp=new Map,_p=new Map,ou=[],XR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SE(e,t){switch(e){case"focusin":case"focusout":cu=null;break;case"dragenter":case"dragleave":hu=null;break;case"mouseover":case"mouseout":fu=null;break;case"pointerover":case"pointerout":vp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(t.pointerId)}}function Ad(e,t,i,a,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:f,targetContainers:[u]},t!==null&&(t=Hp(t),t!==null&&zw(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function qR(e,t,i,a,u){switch(t){case"focusin":return cu=Ad(cu,e,t,i,a,u),!0;case"dragenter":return hu=Ad(hu,e,t,i,a,u),!0;case"mouseover":return fu=Ad(fu,e,t,i,a,u),!0;case"pointerover":var f=u.pointerId;return vp.set(f,Ad(vp.get(f)||null,e,t,i,a,u)),!0;case"gotpointercapture":return f=u.pointerId,_p.set(f,Ad(_p.get(f)||null,e,t,i,a,u)),!0}return!1}function yC(e){var t=sc(e.target);if(t!==null){var i=Pc(t);if(i!==null){if(t=i.tag,t===13){if(t=oC(i),t!==null){e.blockedOn=t,gC(e.priority,function(){pC(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=j1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);C1=a,i.target.dispatchEvent(a),C1=null}else return t=Hp(i),t!==null&&zw(t),e.blockedOn=i,!1;t.shift()}return!0}function EE(e,t,i){Cg(e)&&i.delete(t)}function KR(){R1=!1,cu!==null&&Cg(cu)&&(cu=null),hu!==null&&Cg(hu)&&(hu=null),fu!==null&&Cg(fu)&&(fu=null),vp.forEach(EE),_p.forEach(EE)}function Id(e,t){e.blockedOn===t&&(e.blockedOn=null,R1||(R1=!0,qo.unstable_scheduleCallback(qo.unstable_NormalPriority,KR)))}function xp(e){function t(u){return Id(u,e)}if(0<Zm.length){Id(Zm[0],e);for(var i=1;i<Zm.length;i++){var a=Zm[i];a.blockedOn===e&&(a.blockedOn=null)}}for(cu!==null&&Id(cu,e),hu!==null&&Id(hu,e),fu!==null&&Id(fu,e),vp.forEach(t),_p.forEach(t),i=0;i<ou.length;i++)a=ou[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<ou.length&&(i=ou[0],i.blockedOn===null);)yC(i),i.blockedOn===null&&ou.shift()}var Hh=vl.ReactCurrentBatchConfig,ly=!0;function JR(e,t,i,a){var u=rn,f=Hh.transition;Hh.transition=null;try{rn=1,Lw(e,t,i,a)}finally{rn=u,Hh.transition=f}}function YR(e,t,i,a){var u=rn,f=Hh.transition;Hh.transition=null;try{rn=4,Lw(e,t,i,a)}finally{rn=u,Hh.transition=f}}function Lw(e,t,i,a){if(ly){var u=j1(e,t,i,a);if(u===null)s_(e,t,a,uy,i),SE(e,a);else if(qR(u,e,t,i,a))a.stopPropagation();else if(SE(e,a),t&4&&-1<XR.indexOf(e)){for(;u!==null;){var f=Hp(u);if(f!==null&&dC(f),f=j1(e,t,i,a),f===null&&s_(e,t,a,uy,i),f===u)break;u=f}u!==null&&a.stopPropagation()}else s_(e,t,a,null,i)}}var uy=null;function j1(e,t,i,a){if(uy=null,e=Fw(a),e=sc(e),e!==null)if(t=Pc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=oC(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return uy=e,null}function vC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DR()){case Rw:return 1;case uC:return 4;case ay:case NR:return 16;case cC:return 536870912;default:return 16}default:return 16}}var su=null,Bw=null,kg=null;function _C(){if(kg)return kg;var e,t=Bw,i=t.length,a,u="value"in su?su.value:su.textContent,f=u.length;for(e=0;e<i&&t[e]===u[e];e++);var d=i-e;for(a=1;a<=d&&t[i-a]===u[f-a];a++);return kg=u.slice(e,1<a?1-a:void 0)}function Mg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xm(){return!0}function TE(){return!1}function Jo(e){function t(i,a,u,f,d){this._reactName=i,this._targetInst=u,this.type=a,this.nativeEvent=f,this.target=d,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xm:TE,this.isPropagationStopped=TE,this}return Rn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xm)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xm)},persist:function(){},isPersistent:Xm}),t}var _f={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dw=Jo(_f),Wp=Rn({},_f,{view:0,detail:0}),QR=Jo(Wp),Yv,Qv,Cd,x0=Rn({},Wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cd&&(Cd&&e.type==="mousemove"?(Yv=e.screenX-Cd.screenX,Qv=e.screenY-Cd.screenY):Qv=Yv=0,Cd=e),Yv)},movementY:function(e){return"movementY"in e?e.movementY:Qv}}),PE=Jo(x0),ej=Rn({},x0,{dataTransfer:0}),tj=Jo(ej),rj=Rn({},Wp,{relatedTarget:0}),e_=Jo(rj),nj=Rn({},_f,{animationName:0,elapsedTime:0,pseudoElement:0}),ij=Jo(nj),oj=Rn({},_f,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aj=Jo(oj),sj=Rn({},_f,{data:0}),AE=Jo(sj),lj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cj[e])?!!t[e]:!1}function Nw(){return hj}var fj=Rn({},Wp,{key:function(e){if(e.key){var t=lj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nw,charCode:function(e){return e.type==="keypress"?Mg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dj=Jo(fj),pj=Rn({},x0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IE=Jo(pj),mj=Rn({},Wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nw}),gj=Jo(mj),yj=Rn({},_f,{propertyName:0,elapsedTime:0,pseudoElement:0}),vj=Jo(yj),_j=Rn({},x0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xj=Jo(_j),wj=[9,13,27,32],$w=cl&&"CompositionEvent"in window,Yd=null;cl&&"documentMode"in document&&(Yd=document.documentMode);var bj=cl&&"TextEvent"in window&&!Yd,xC=cl&&(!$w||Yd&&8<Yd&&11>=Yd),CE=" ",kE=!1;function wC(e,t){switch(e){case"keyup":return wj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ah=!1;function Sj(e,t){switch(e){case"compositionend":return bC(t);case"keypress":return t.which!==32?null:(kE=!0,CE);case"textInput":return e=t.data,e===CE&&kE?null:e;default:return null}}function Ej(e,t){if(Ah)return e==="compositionend"||!$w&&wC(e,t)?(e=_C(),kg=Bw=su=null,Ah=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xC&&t.locale!=="ko"?null:t.data;default:return null}}var Tj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ME(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tj[e.type]:t==="textarea"}function SC(e,t,i,a){eC(a),t=cy(t,"onChange"),0<t.length&&(i=new Dw("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Qd=null,wp=null;function Pj(e){RC(e,0)}function w0(e){var t=kh(e);if(ZI(t))return e}function Aj(e,t){if(e==="change")return t}var EC=!1;if(cl){var t_;if(cl){var r_="oninput"in document;if(!r_){var OE=document.createElement("div");OE.setAttribute("oninput","return;"),r_=typeof OE.oninput=="function"}t_=r_}else t_=!1;EC=t_&&(!document.documentMode||9<document.documentMode)}function FE(){Qd&&(Qd.detachEvent("onpropertychange",TC),wp=Qd=null)}function TC(e){if(e.propertyName==="value"&&w0(wp)){var t=[];SC(t,wp,e,Fw(e)),iC(Pj,t)}}function Ij(e,t,i){e==="focusin"?(FE(),Qd=t,wp=i,Qd.attachEvent("onpropertychange",TC)):e==="focusout"&&FE()}function Cj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return w0(wp)}function kj(e,t){if(e==="click")return w0(t)}function Mj(e,t){if(e==="input"||e==="change")return w0(t)}function Oj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qa=typeof Object.is=="function"?Object.is:Oj;function bp(e,t){if(qa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var u=i[a];if(!y1.call(t,u)||!qa(e[u],t[u]))return!1}return!0}function RE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jE(e,t){var i=RE(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=RE(i)}}function PC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AC(){for(var e=window,t=ny();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ny(e.document)}return t}function Uw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Fj(e){var t=AC(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&PC(i.ownerDocument.documentElement,i)){if(a!==null&&Uw(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,f=Math.min(a.start,u);a=a.end===void 0?f:Math.min(a.end,u),!e.extend&&f>a&&(u=a,a=f,f=u),u=jE(i,f);var d=jE(i,a);u&&d&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rj=cl&&"documentMode"in document&&11>=document.documentMode,Ih=null,z1=null,ep=null,L1=!1;function zE(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;L1||Ih==null||Ih!==ny(a)||(a=Ih,"selectionStart"in a&&Uw(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ep&&bp(ep,a)||(ep=a,a=cy(z1,"onSelect"),0<a.length&&(t=new Dw("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Ih)))}function qm(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ch={animationend:qm("Animation","AnimationEnd"),animationiteration:qm("Animation","AnimationIteration"),animationstart:qm("Animation","AnimationStart"),transitionend:qm("Transition","TransitionEnd")},n_={},IC={};cl&&(IC=document.createElement("div").style,"AnimationEvent"in window||(delete Ch.animationend.animation,delete Ch.animationiteration.animation,delete Ch.animationstart.animation),"TransitionEvent"in window||delete Ch.transitionend.transition);function b0(e){if(n_[e])return n_[e];if(!Ch[e])return e;var t=Ch[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in IC)return n_[e]=t[i];return e}var CC=b0("animationend"),kC=b0("animationiteration"),MC=b0("animationstart"),OC=b0("transitionend"),FC=new Map,LE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tu(e,t){FC.set(e,t),Tc(t,[e])}for(var i_=0;i_<LE.length;i_++){var o_=LE[i_],jj=o_.toLowerCase(),zj=o_[0].toUpperCase()+o_.slice(1);Tu(jj,"on"+zj)}Tu(CC,"onAnimationEnd");Tu(kC,"onAnimationIteration");Tu(MC,"onAnimationStart");Tu("dblclick","onDoubleClick");Tu("focusin","onFocus");Tu("focusout","onBlur");Tu(OC,"onTransitionEnd");Qh("onMouseEnter",["mouseout","mouseover"]);Qh("onMouseLeave",["mouseout","mouseover"]);Qh("onPointerEnter",["pointerout","pointerover"]);Qh("onPointerLeave",["pointerout","pointerover"]);Tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function BE(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,jR(a,t,void 0,e),e.currentTarget=null}function RC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],u=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var d=a.length-1;0<=d;d--){var l=a[d],w=l.instance,E=l.currentTarget;if(l=l.listener,w!==f&&u.isPropagationStopped())break e;BE(u,l,E),f=w}else for(d=0;d<a.length;d++){if(l=a[d],w=l.instance,E=l.currentTarget,l=l.listener,w!==f&&u.isPropagationStopped())break e;BE(u,l,E),f=w}}}if(oy)throw e=O1,oy=!1,O1=null,e}function vn(e,t){var i=t[U1];i===void 0&&(i=t[U1]=new Set);var a=e+"__bubble";i.has(a)||(jC(t,e,2,!1),i.add(a))}function a_(e,t,i){var a=0;t&&(a|=4),jC(i,e,a,t)}var Km="_reactListening"+Math.random().toString(36).slice(2);function Sp(e){if(!e[Km]){e[Km]=!0,UI.forEach(function(i){i!=="selectionchange"&&(Lj.has(i)||a_(i,!1,e),a_(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Km]||(t[Km]=!0,a_("selectionchange",!1,t))}}function jC(e,t,i,a){switch(vC(t)){case 1:var u=JR;break;case 4:u=YR;break;default:u=Lw}i=u.bind(null,t,i,e),u=void 0,!M1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function s_(e,t,i,a,u){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var l=a.stateNode.containerInfo;if(l===u||l.nodeType===8&&l.parentNode===u)break;if(d===4)for(d=a.return;d!==null;){var w=d.tag;if((w===3||w===4)&&(w=d.stateNode.containerInfo,w===u||w.nodeType===8&&w.parentNode===u))return;d=d.return}for(;l!==null;){if(d=sc(l),d===null)return;if(w=d.tag,w===5||w===6){a=f=d;continue e}l=l.parentNode}}a=a.return}iC(function(){var E=f,I=Fw(i),b=[];e:{var T=FC.get(e);if(T!==void 0){var R=Dw,L=e;switch(e){case"keypress":if(Mg(i)===0)break e;case"keydown":case"keyup":R=dj;break;case"focusin":L="focus",R=e_;break;case"focusout":L="blur",R=e_;break;case"beforeblur":case"afterblur":R=e_;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=PE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=tj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=gj;break;case CC:case kC:case MC:R=ij;break;case OC:R=vj;break;case"scroll":R=QR;break;case"wheel":R=xj;break;case"copy":case"cut":case"paste":R=aj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=IE}var j=(t&4)!==0,le=!j&&e==="scroll",K=j?T!==null?T+"Capture":null:T;j=[];for(var Z=E,W;Z!==null;){W=Z;var ae=W.stateNode;if(W.tag===5&&ae!==null&&(W=ae,K!==null&&(ae=yp(Z,K),ae!=null&&j.push(Ep(Z,ae,W)))),le)break;Z=Z.return}0<j.length&&(T=new R(T,L,null,i,I),b.push({event:T,listeners:j}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",T&&i!==C1&&(L=i.relatedTarget||i.fromElement)&&(sc(L)||L[hl]))break e;if((R||T)&&(T=I.window===I?I:(T=I.ownerDocument)?T.defaultView||T.parentWindow:window,R?(L=i.relatedTarget||i.toElement,R=E,L=L?sc(L):null,L!==null&&(le=Pc(L),L!==le||L.tag!==5&&L.tag!==6)&&(L=null)):(R=null,L=E),R!==L)){if(j=PE,ae="onMouseLeave",K="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(j=IE,ae="onPointerLeave",K="onPointerEnter",Z="pointer"),le=R==null?T:kh(R),W=L==null?T:kh(L),T=new j(ae,Z+"leave",R,i,I),T.target=le,T.relatedTarget=W,ae=null,sc(I)===E&&(j=new j(K,Z+"enter",L,i,I),j.target=W,j.relatedTarget=le,ae=j),le=ae,R&&L)t:{for(j=R,K=L,Z=0,W=j;W;W=ph(W))Z++;for(W=0,ae=K;ae;ae=ph(ae))W++;for(;0<Z-W;)j=ph(j),Z--;for(;0<W-Z;)K=ph(K),W--;for(;Z--;){if(j===K||K!==null&&j===K.alternate)break t;j=ph(j),K=ph(K)}j=null}else j=null;R!==null&&DE(b,T,R,j,!1),L!==null&&le!==null&&DE(b,le,L,j,!0)}}e:{if(T=E?kh(E):window,R=T.nodeName&&T.nodeName.toLowerCase(),R==="select"||R==="input"&&T.type==="file")var q=Aj;else if(ME(T))if(EC)q=Mj;else{q=Cj;var V=Ij}else(R=T.nodeName)&&R.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(q=kj);if(q&&(q=q(e,E))){SC(b,q,i,I);break e}V&&V(e,T,E),e==="focusout"&&(V=T._wrapperState)&&V.controlled&&T.type==="number"&&E1(T,"number",T.value)}switch(V=E?kh(E):window,e){case"focusin":(ME(V)||V.contentEditable==="true")&&(Ih=V,z1=E,ep=null);break;case"focusout":ep=z1=Ih=null;break;case"mousedown":L1=!0;break;case"contextmenu":case"mouseup":case"dragend":L1=!1,zE(b,i,I);break;case"selectionchange":if(Rj)break;case"keydown":case"keyup":zE(b,i,I)}var P;if($w)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Ah?wC(e,i)&&(z="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(z="onCompositionStart");z&&(xC&&i.locale!=="ko"&&(Ah||z!=="onCompositionStart"?z==="onCompositionEnd"&&Ah&&(P=_C()):(su=I,Bw="value"in su?su.value:su.textContent,Ah=!0)),V=cy(E,z),0<V.length&&(z=new AE(z,e,null,i,I),b.push({event:z,listeners:V}),P?z.data=P:(P=bC(i),P!==null&&(z.data=P)))),(P=bj?Sj(e,i):Ej(e,i))&&(E=cy(E,"onBeforeInput"),0<E.length&&(I=new AE("onBeforeInput","beforeinput",null,i,I),b.push({event:I,listeners:E}),I.data=P))}RC(b,t)})}function Ep(e,t,i){return{instance:e,listener:t,currentTarget:i}}function cy(e,t){for(var i=t+"Capture",a=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=yp(e,i),f!=null&&a.unshift(Ep(e,f,u)),f=yp(e,t),f!=null&&a.push(Ep(e,f,u))),e=e.return}return a}function ph(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function DE(e,t,i,a,u){for(var f=t._reactName,d=[];i!==null&&i!==a;){var l=i,w=l.alternate,E=l.stateNode;if(w!==null&&w===a)break;l.tag===5&&E!==null&&(l=E,u?(w=yp(i,f),w!=null&&d.unshift(Ep(i,w,l))):u||(w=yp(i,f),w!=null&&d.push(Ep(i,w,l)))),i=i.return}d.length!==0&&e.push({event:t,listeners:d})}var Bj=/\r\n?/g,Dj=/\u0000|\uFFFD/g;function NE(e){return(typeof e=="string"?e:""+e).replace(Bj,`
`).replace(Dj,"")}function Jm(e,t,i){if(t=NE(t),NE(e)!==t&&i)throw Error(At(425))}function hy(){}var B1=null,D1=null;function N1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $1=typeof setTimeout=="function"?setTimeout:void 0,Nj=typeof clearTimeout=="function"?clearTimeout:void 0,$E=typeof Promise=="function"?Promise:void 0,$j=typeof queueMicrotask=="function"?queueMicrotask:typeof $E<"u"?function(e){return $E.resolve(null).then(e).catch(Uj)}:$1;function Uj(e){setTimeout(function(){throw e})}function l_(e,t){var i=t,a=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(a===0){e.removeChild(u),xp(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=u}while(i);xp(t)}function du(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function UE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var xf=Math.random().toString(36).slice(2),ws="__reactFiber$"+xf,Tp="__reactProps$"+xf,hl="__reactContainer$"+xf,U1="__reactEvents$"+xf,Vj="__reactListeners$"+xf,Gj="__reactHandles$"+xf;function sc(e){var t=e[ws];if(t)return t;for(var i=e.parentNode;i;){if(t=i[hl]||i[ws]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=UE(e);e!==null;){if(i=e[ws])return i;e=UE(e)}return t}e=i,i=e.parentNode}return null}function Hp(e){return e=e[ws]||e[hl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function S0(e){return e[Tp]||null}var V1=[],Mh=-1;function Pu(e){return{current:e}}function xn(e){0>Mh||(e.current=V1[Mh],V1[Mh]=null,Mh--)}function pn(e,t){Mh++,V1[Mh]=e.current,e.current=t}var xu={},Ki=Pu(xu),wo=Pu(!1),gc=xu;function ef(e,t){var i=e.type.contextTypes;if(!i)return xu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in i)u[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function bo(e){return e=e.childContextTypes,e!=null}function fy(){xn(wo),xn(Ki)}function VE(e,t,i){if(Ki.current!==xu)throw Error(At(168));pn(Ki,t),pn(wo,i)}function zC(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var u in a)if(!(u in t))throw Error(At(108,IR(e)||"Unknown",u));return Rn({},i,a)}function dy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xu,gc=Ki.current,pn(Ki,e),pn(wo,wo.current),!0}function GE(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=zC(e,t,gc),a.__reactInternalMemoizedMergedChildContext=e,xn(wo),xn(Ki),pn(Ki,e)):xn(wo),pn(wo,i)}var nl=null,E0=!1,u_=!1;function LC(e){nl===null?nl=[e]:nl.push(e)}function Wj(e){E0=!0,LC(e)}function Au(){if(!u_&&nl!==null){u_=!0;var e=0,t=rn;try{var i=nl;for(rn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}nl=null,E0=!1}catch(u){throw nl!==null&&(nl=nl.slice(e+1)),lC(Rw,Au),u}finally{rn=t,u_=!1}}return null}var Oh=[],Fh=0,py=null,my=0,da=[],pa=0,yc=null,al=1,sl="";function ic(e,t){Oh[Fh++]=my,Oh[Fh++]=py,py=e,my=t}function BC(e,t,i){da[pa++]=al,da[pa++]=sl,da[pa++]=yc,yc=e;var a=al;e=sl;var u=32-Ha(a)-1;a&=~(1<<u),i+=1;var f=32-Ha(t)+u;if(30<f){var d=u-u%5;f=(a&(1<<d)-1).toString(32),a>>=d,u-=d,al=1<<32-Ha(t)+u|i<<u|a,sl=f+e}else al=1<<f|i<<u|a,sl=e}function Vw(e){e.return!==null&&(ic(e,1),BC(e,1,0))}function Gw(e){for(;e===py;)py=Oh[--Fh],Oh[Fh]=null,my=Oh[--Fh],Oh[Fh]=null;for(;e===yc;)yc=da[--pa],da[pa]=null,sl=da[--pa],da[pa]=null,al=da[--pa],da[pa]=null}var Xo=null,Zo=null,Pn=!1,Na=null;function DC(e,t){var i=ga(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function WE(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xo=e,Zo=du(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xo=e,Zo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=yc!==null?{id:al,overflow:sl}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ga(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Xo=e,Zo=null,!0):!1;default:return!1}}function G1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function W1(e){if(Pn){var t=Zo;if(t){var i=t;if(!WE(e,t)){if(G1(e))throw Error(At(418));t=du(i.nextSibling);var a=Xo;t&&WE(e,t)?DC(a,i):(e.flags=e.flags&-4097|2,Pn=!1,Xo=e)}}else{if(G1(e))throw Error(At(418));e.flags=e.flags&-4097|2,Pn=!1,Xo=e}}}function HE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xo=e}function Ym(e){if(e!==Xo)return!1;if(!Pn)return HE(e),Pn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!N1(e.type,e.memoizedProps)),t&&(t=Zo)){if(G1(e))throw NC(),Error(At(418));for(;t;)DC(e,t),t=du(t.nextSibling)}if(HE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Zo=du(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Zo=null}}else Zo=Xo?du(e.stateNode.nextSibling):null;return!0}function NC(){for(var e=Zo;e;)e=du(e.nextSibling)}function tf(){Zo=Xo=null,Pn=!1}function Ww(e){Na===null?Na=[e]:Na.push(e)}var Hj=vl.ReactCurrentBatchConfig;function Ba(e,t){if(e&&e.defaultProps){t=Rn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var gy=Pu(null),yy=null,Rh=null,Hw=null;function Zw(){Hw=Rh=yy=null}function Xw(e){var t=gy.current;xn(gy),e._currentValue=t}function H1(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function Zh(e,t){yy=e,Hw=Rh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xo=!0),e.firstContext=null)}function _a(e){var t=e._currentValue;if(Hw!==e)if(e={context:e,memoizedValue:t,next:null},Rh===null){if(yy===null)throw Error(At(308));Rh=e,yy.dependencies={lanes:0,firstContext:e}}else Rh=Rh.next=e;return t}var lc=null;function qw(e){lc===null?lc=[e]:lc.push(e)}function $C(e,t,i,a){var u=t.interleaved;return u===null?(i.next=i,qw(t)):(i.next=u.next,u.next=i),t.interleaved=i,fl(e,a)}function fl(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var ru=!1;function Kw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ul(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pu(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Gr&2){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,fl(e,i)}return u=a.interleaved,u===null?(t.next=t,qw(a)):(t.next=u.next,u.next=t),a.interleaved=t,fl(e,i)}function Og(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,jw(e,i)}}function ZE(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?u=f=d:f=f.next=d,i=i.next}while(i!==null);f===null?u=f=t:f=f.next=t}else u=f=t;i={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function vy(e,t,i,a){var u=e.updateQueue;ru=!1;var f=u.firstBaseUpdate,d=u.lastBaseUpdate,l=u.shared.pending;if(l!==null){u.shared.pending=null;var w=l,E=w.next;w.next=null,d===null?f=E:d.next=E,d=w;var I=e.alternate;I!==null&&(I=I.updateQueue,l=I.lastBaseUpdate,l!==d&&(l===null?I.firstBaseUpdate=E:l.next=E,I.lastBaseUpdate=w))}if(f!==null){var b=u.baseState;d=0,I=E=w=null,l=f;do{var T=l.lane,R=l.eventTime;if((a&T)===T){I!==null&&(I=I.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var L=e,j=l;switch(T=t,R=i,j.tag){case 1:if(L=j.payload,typeof L=="function"){b=L.call(R,b,T);break e}b=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=j.payload,T=typeof L=="function"?L.call(R,b,T):L,T==null)break e;b=Rn({},b,T);break e;case 2:ru=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,T=u.effects,T===null?u.effects=[l]:T.push(l))}else R={eventTime:R,lane:T,tag:l.tag,payload:l.payload,callback:l.callback,next:null},I===null?(E=I=R,w=b):I=I.next=R,d|=T;if(l=l.next,l===null){if(l=u.shared.pending,l===null)break;T=l,l=T.next,T.next=null,u.lastBaseUpdate=T,u.shared.pending=null}}while(!0);if(I===null&&(w=b),u.baseState=w,u.firstBaseUpdate=E,u.lastBaseUpdate=I,t=u.shared.interleaved,t!==null){u=t;do d|=u.lane,u=u.next;while(u!==t)}else f===null&&(u.shared.lanes=0);_c|=d,e.lanes=d,e.memoizedState=b}}function XE(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],u=a.callback;if(u!==null){if(a.callback=null,a=i,typeof u!="function")throw Error(At(191,u));u.call(a)}}}var VC=new $I.Component().refs;function Z1(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Rn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var T0={isMounted:function(e){return(e=e._reactInternals)?Pc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=oo(),u=gu(e),f=ul(a,u);f.payload=t,i!=null&&(f.callback=i),t=pu(e,f,u),t!==null&&(Za(t,e,u,a),Og(t,e,u))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=oo(),u=gu(e),f=ul(a,u);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=pu(e,f,u),t!==null&&(Za(t,e,u,a),Og(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=oo(),a=gu(e),u=ul(i,a);u.tag=2,t!=null&&(u.callback=t),t=pu(e,u,a),t!==null&&(Za(t,e,a,i),Og(t,e,a))}};function qE(e,t,i,a,u,f,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,d):t.prototype&&t.prototype.isPureReactComponent?!bp(i,a)||!bp(u,f):!0}function GC(e,t,i){var a=!1,u=xu,f=t.contextType;return typeof f=="object"&&f!==null?f=_a(f):(u=bo(t)?gc:Ki.current,a=t.contextTypes,f=(a=a!=null)?ef(e,u):xu),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=T0,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),t}function KE(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&T0.enqueueReplaceState(t,t.state,null)}function X1(e,t,i,a){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs=VC,Kw(e);var f=t.contextType;typeof f=="object"&&f!==null?u.context=_a(f):(f=bo(t)?gc:Ki.current,u.context=ef(e,f)),u.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Z1(e,t,f,i),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&T0.enqueueReplaceState(u,u.state,null),vy(e,i,u,a),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function kd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var u=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(d){var l=u.refs;l===VC&&(l=u.refs={}),d===null?delete l[f]:l[f]=d},t._stringRef=f,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function Qm(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function JE(e){var t=e._init;return t(e._payload)}function WC(e){function t(K,Z){if(e){var W=K.deletions;W===null?(K.deletions=[Z],K.flags|=16):W.push(Z)}}function i(K,Z){if(!e)return null;for(;Z!==null;)t(K,Z),Z=Z.sibling;return null}function a(K,Z){for(K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function u(K,Z){return K=yu(K,Z),K.index=0,K.sibling=null,K}function f(K,Z,W){return K.index=W,e?(W=K.alternate,W!==null?(W=W.index,W<Z?(K.flags|=2,Z):W):(K.flags|=2,Z)):(K.flags|=1048576,Z)}function d(K){return e&&K.alternate===null&&(K.flags|=2),K}function l(K,Z,W,ae){return Z===null||Z.tag!==6?(Z=g_(W,K.mode,ae),Z.return=K,Z):(Z=u(Z,W),Z.return=K,Z)}function w(K,Z,W,ae){var q=W.type;return q===Ph?I(K,Z,W.props.children,ae,W.key):Z!==null&&(Z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===tu&&JE(q)===Z.type)?(ae=u(Z,W.props),ae.ref=kd(K,Z,W),ae.return=K,ae):(ae=Bg(W.type,W.key,W.props,null,K.mode,ae),ae.ref=kd(K,Z,W),ae.return=K,ae)}function E(K,Z,W,ae){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==W.containerInfo||Z.stateNode.implementation!==W.implementation?(Z=y_(W,K.mode,ae),Z.return=K,Z):(Z=u(Z,W.children||[]),Z.return=K,Z)}function I(K,Z,W,ae,q){return Z===null||Z.tag!==7?(Z=dc(W,K.mode,ae,q),Z.return=K,Z):(Z=u(Z,W),Z.return=K,Z)}function b(K,Z,W){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=g_(""+Z,K.mode,W),Z.return=K,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Um:return W=Bg(Z.type,Z.key,Z.props,null,K.mode,W),W.ref=kd(K,null,Z),W.return=K,W;case Th:return Z=y_(Z,K.mode,W),Z.return=K,Z;case tu:var ae=Z._init;return b(K,ae(Z._payload),W)}if(Bd(Z)||Td(Z))return Z=dc(Z,K.mode,W,null),Z.return=K,Z;Qm(K,Z)}return null}function T(K,Z,W,ae){var q=Z!==null?Z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return q!==null?null:l(K,Z,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Um:return W.key===q?w(K,Z,W,ae):null;case Th:return W.key===q?E(K,Z,W,ae):null;case tu:return q=W._init,T(K,Z,q(W._payload),ae)}if(Bd(W)||Td(W))return q!==null?null:I(K,Z,W,ae,null);Qm(K,W)}return null}function R(K,Z,W,ae,q){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return K=K.get(W)||null,l(Z,K,""+ae,q);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Um:return K=K.get(ae.key===null?W:ae.key)||null,w(Z,K,ae,q);case Th:return K=K.get(ae.key===null?W:ae.key)||null,E(Z,K,ae,q);case tu:var V=ae._init;return R(K,Z,W,V(ae._payload),q)}if(Bd(ae)||Td(ae))return K=K.get(W)||null,I(Z,K,ae,q,null);Qm(Z,ae)}return null}function L(K,Z,W,ae){for(var q=null,V=null,P=Z,z=Z=0,B=null;P!==null&&z<W.length;z++){P.index>z?(B=P,P=null):B=P.sibling;var ee=T(K,P,W[z],ae);if(ee===null){P===null&&(P=B);break}e&&P&&ee.alternate===null&&t(K,P),Z=f(ee,Z,z),V===null?q=ee:V.sibling=ee,V=ee,P=B}if(z===W.length)return i(K,P),Pn&&ic(K,z),q;if(P===null){for(;z<W.length;z++)P=b(K,W[z],ae),P!==null&&(Z=f(P,Z,z),V===null?q=P:V.sibling=P,V=P);return Pn&&ic(K,z),q}for(P=a(K,P);z<W.length;z++)B=R(P,K,z,W[z],ae),B!==null&&(e&&B.alternate!==null&&P.delete(B.key===null?z:B.key),Z=f(B,Z,z),V===null?q=B:V.sibling=B,V=B);return e&&P.forEach(function(X){return t(K,X)}),Pn&&ic(K,z),q}function j(K,Z,W,ae){var q=Td(W);if(typeof q!="function")throw Error(At(150));if(W=q.call(W),W==null)throw Error(At(151));for(var V=q=null,P=Z,z=Z=0,B=null,ee=W.next();P!==null&&!ee.done;z++,ee=W.next()){P.index>z?(B=P,P=null):B=P.sibling;var X=T(K,P,ee.value,ae);if(X===null){P===null&&(P=B);break}e&&P&&X.alternate===null&&t(K,P),Z=f(X,Z,z),V===null?q=X:V.sibling=X,V=X,P=B}if(ee.done)return i(K,P),Pn&&ic(K,z),q;if(P===null){for(;!ee.done;z++,ee=W.next())ee=b(K,ee.value,ae),ee!==null&&(Z=f(ee,Z,z),V===null?q=ee:V.sibling=ee,V=ee);return Pn&&ic(K,z),q}for(P=a(K,P);!ee.done;z++,ee=W.next())ee=R(P,K,z,ee.value,ae),ee!==null&&(e&&ee.alternate!==null&&P.delete(ee.key===null?z:ee.key),Z=f(ee,Z,z),V===null?q=ee:V.sibling=ee,V=ee);return e&&P.forEach(function(ye){return t(K,ye)}),Pn&&ic(K,z),q}function le(K,Z,W,ae){if(typeof W=="object"&&W!==null&&W.type===Ph&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Um:e:{for(var q=W.key,V=Z;V!==null;){if(V.key===q){if(q=W.type,q===Ph){if(V.tag===7){i(K,V.sibling),Z=u(V,W.props.children),Z.return=K,K=Z;break e}}else if(V.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===tu&&JE(q)===V.type){i(K,V.sibling),Z=u(V,W.props),Z.ref=kd(K,V,W),Z.return=K,K=Z;break e}i(K,V);break}else t(K,V);V=V.sibling}W.type===Ph?(Z=dc(W.props.children,K.mode,ae,W.key),Z.return=K,K=Z):(ae=Bg(W.type,W.key,W.props,null,K.mode,ae),ae.ref=kd(K,Z,W),ae.return=K,K=ae)}return d(K);case Th:e:{for(V=W.key;Z!==null;){if(Z.key===V)if(Z.tag===4&&Z.stateNode.containerInfo===W.containerInfo&&Z.stateNode.implementation===W.implementation){i(K,Z.sibling),Z=u(Z,W.children||[]),Z.return=K,K=Z;break e}else{i(K,Z);break}else t(K,Z);Z=Z.sibling}Z=y_(W,K.mode,ae),Z.return=K,K=Z}return d(K);case tu:return V=W._init,le(K,Z,V(W._payload),ae)}if(Bd(W))return L(K,Z,W,ae);if(Td(W))return j(K,Z,W,ae);Qm(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,Z!==null&&Z.tag===6?(i(K,Z.sibling),Z=u(Z,W),Z.return=K,K=Z):(i(K,Z),Z=g_(W,K.mode,ae),Z.return=K,K=Z),d(K)):i(K,Z)}return le}var rf=WC(!0),HC=WC(!1),Zp={},As=Pu(Zp),Pp=Pu(Zp),Ap=Pu(Zp);function uc(e){if(e===Zp)throw Error(At(174));return e}function Jw(e,t){switch(pn(Ap,t),pn(Pp,e),pn(As,Zp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:P1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=P1(t,e)}xn(As),pn(As,t)}function nf(){xn(As),xn(Pp),xn(Ap)}function ZC(e){uc(Ap.current);var t=uc(As.current),i=P1(t,e.type);t!==i&&(pn(Pp,e),pn(As,i))}function Yw(e){Pp.current===e&&(xn(As),xn(Pp))}var Mn=Pu(0);function _y(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var c_=[];function Qw(){for(var e=0;e<c_.length;e++)c_[e]._workInProgressVersionPrimary=null;c_.length=0}var Fg=vl.ReactCurrentDispatcher,h_=vl.ReactCurrentBatchConfig,vc=0,Fn=null,ri=null,gi=null,xy=!1,tp=!1,Ip=0,Zj=0;function Wi(){throw Error(At(321))}function eb(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!qa(e[i],t[i]))return!1;return!0}function tb(e,t,i,a,u,f){if(vc=f,Fn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fg.current=e===null||e.memoizedState===null?Jj:Yj,e=i(a,u),tp){f=0;do{if(tp=!1,Ip=0,25<=f)throw Error(At(301));f+=1,gi=ri=null,t.updateQueue=null,Fg.current=Qj,e=i(a,u)}while(tp)}if(Fg.current=wy,t=ri!==null&&ri.next!==null,vc=0,gi=ri=Fn=null,xy=!1,t)throw Error(At(300));return e}function rb(){var e=Ip!==0;return Ip=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?Fn.memoizedState=gi=e:gi=gi.next=e,gi}function xa(){if(ri===null){var e=Fn.alternate;e=e!==null?e.memoizedState:null}else e=ri.next;var t=gi===null?Fn.memoizedState:gi.next;if(t!==null)gi=t,ri=e;else{if(e===null)throw Error(At(310));ri=e,e={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},gi===null?Fn.memoizedState=gi=e:gi=gi.next=e}return gi}function Cp(e,t){return typeof t=="function"?t(e):t}function f_(e){var t=xa(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ri,u=a.baseQueue,f=i.pending;if(f!==null){if(u!==null){var d=u.next;u.next=f.next,f.next=d}a.baseQueue=u=f,i.pending=null}if(u!==null){f=u.next,a=a.baseState;var l=d=null,w=null,E=f;do{var I=E.lane;if((vc&I)===I)w!==null&&(w=w.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),a=E.hasEagerState?E.eagerState:e(a,E.action);else{var b={lane:I,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};w===null?(l=w=b,d=a):w=w.next=b,Fn.lanes|=I,_c|=I}E=E.next}while(E!==null&&E!==f);w===null?d=a:w.next=l,qa(a,t.memoizedState)||(xo=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=w,i.lastRenderedState=a}if(e=i.interleaved,e!==null){u=e;do f=u.lane,Fn.lanes|=f,_c|=f,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function d_(e){var t=xa(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,u=i.pending,f=t.memoizedState;if(u!==null){i.pending=null;var d=u=u.next;do f=e(f,d.action),d=d.next;while(d!==u);qa(f,t.memoizedState)||(xo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,a]}function XC(){}function qC(e,t){var i=Fn,a=xa(),u=t(),f=!qa(a.memoizedState,u);if(f&&(a.memoizedState=u,xo=!0),a=a.queue,nb(YC.bind(null,i,a,e),[e]),a.getSnapshot!==t||f||gi!==null&&gi.memoizedState.tag&1){if(i.flags|=2048,kp(9,JC.bind(null,i,a,u,t),void 0,null),yi===null)throw Error(At(349));vc&30||KC(i,t,u)}return u}function KC(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Fn.updateQueue,t===null?(t={lastEffect:null,stores:null},Fn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function JC(e,t,i,a){t.value=i,t.getSnapshot=a,QC(t)&&ek(e)}function YC(e,t,i){return i(function(){QC(t)&&ek(e)})}function QC(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!qa(e,i)}catch{return!0}}function ek(e){var t=fl(e,1);t!==null&&Za(t,e,1,-1)}function YE(e){var t=ys();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cp,lastRenderedState:e},t.queue=e,e=e.dispatch=Kj.bind(null,Fn,e),[t.memoizedState,e]}function kp(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Fn.updateQueue,t===null?(t={lastEffect:null,stores:null},Fn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function tk(){return xa().memoizedState}function Rg(e,t,i,a){var u=ys();Fn.flags|=e,u.memoizedState=kp(1|t,i,void 0,a===void 0?null:a)}function P0(e,t,i,a){var u=xa();a=a===void 0?null:a;var f=void 0;if(ri!==null){var d=ri.memoizedState;if(f=d.destroy,a!==null&&eb(a,d.deps)){u.memoizedState=kp(t,i,f,a);return}}Fn.flags|=e,u.memoizedState=kp(1|t,i,f,a)}function QE(e,t){return Rg(8390656,8,e,t)}function nb(e,t){return P0(2048,8,e,t)}function rk(e,t){return P0(4,2,e,t)}function nk(e,t){return P0(4,4,e,t)}function ik(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ok(e,t,i){return i=i!=null?i.concat([e]):null,P0(4,4,ik.bind(null,t,e),i)}function ib(){}function ak(e,t){var i=xa();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&eb(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function sk(e,t){var i=xa();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&eb(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function lk(e,t,i){return vc&21?(qa(i,t)||(i=hC(),Fn.lanes|=i,_c|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=i)}function Xj(e,t){var i=rn;rn=i!==0&&4>i?i:4,e(!0);var a=h_.transition;h_.transition={};try{e(!1),t()}finally{rn=i,h_.transition=a}}function uk(){return xa().memoizedState}function qj(e,t,i){var a=gu(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},ck(e))hk(t,i);else if(i=$C(e,t,i,a),i!==null){var u=oo();Za(i,e,a,u),fk(i,t,a)}}function Kj(e,t,i){var a=gu(e),u={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(ck(e))hk(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var d=t.lastRenderedState,l=f(d,i);if(u.hasEagerState=!0,u.eagerState=l,qa(l,d)){var w=t.interleaved;w===null?(u.next=u,qw(t)):(u.next=w.next,w.next=u),t.interleaved=u;return}}catch{}finally{}i=$C(e,t,u,a),i!==null&&(u=oo(),Za(i,e,a,u),fk(i,t,a))}}function ck(e){var t=e.alternate;return e===Fn||t!==null&&t===Fn}function hk(e,t){tp=xy=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function fk(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,jw(e,i)}}var wy={readContext:_a,useCallback:Wi,useContext:Wi,useEffect:Wi,useImperativeHandle:Wi,useInsertionEffect:Wi,useLayoutEffect:Wi,useMemo:Wi,useReducer:Wi,useRef:Wi,useState:Wi,useDebugValue:Wi,useDeferredValue:Wi,useTransition:Wi,useMutableSource:Wi,useSyncExternalStore:Wi,useId:Wi,unstable_isNewReconciler:!1},Jj={readContext:_a,useCallback:function(e,t){return ys().memoizedState=[e,t===void 0?null:t],e},useContext:_a,useEffect:QE,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Rg(4194308,4,ik.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Rg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rg(4,2,e,t)},useMemo:function(e,t){var i=ys();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=ys();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=qj.bind(null,Fn,e),[a.memoizedState,e]},useRef:function(e){var t=ys();return e={current:e},t.memoizedState=e},useState:YE,useDebugValue:ib,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=YE(!1),t=e[0];return e=Xj.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Fn,u=ys();if(Pn){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),yi===null)throw Error(At(349));vc&30||KC(a,t,i)}u.memoizedState=i;var f={value:i,getSnapshot:t};return u.queue=f,QE(YC.bind(null,a,f,e),[e]),a.flags|=2048,kp(9,JC.bind(null,a,f,i,t),void 0,null),i},useId:function(){var e=ys(),t=yi.identifierPrefix;if(Pn){var i=sl,a=al;i=(a&~(1<<32-Ha(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Ip++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Zj++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Yj={readContext:_a,useCallback:ak,useContext:_a,useEffect:nb,useImperativeHandle:ok,useInsertionEffect:rk,useLayoutEffect:nk,useMemo:sk,useReducer:f_,useRef:tk,useState:function(){return f_(Cp)},useDebugValue:ib,useDeferredValue:function(e){var t=xa();return lk(t,ri.memoizedState,e)},useTransition:function(){var e=f_(Cp)[0],t=xa().memoizedState;return[e,t]},useMutableSource:XC,useSyncExternalStore:qC,useId:uk,unstable_isNewReconciler:!1},Qj={readContext:_a,useCallback:ak,useContext:_a,useEffect:nb,useImperativeHandle:ok,useInsertionEffect:rk,useLayoutEffect:nk,useMemo:sk,useReducer:d_,useRef:tk,useState:function(){return d_(Cp)},useDebugValue:ib,useDeferredValue:function(e){var t=xa();return ri===null?t.memoizedState=e:lk(t,ri.memoizedState,e)},useTransition:function(){var e=d_(Cp)[0],t=xa().memoizedState;return[e,t]},useMutableSource:XC,useSyncExternalStore:qC,useId:uk,unstable_isNewReconciler:!1};function of(e,t){try{var i="",a=t;do i+=AR(a),a=a.return;while(a);var u=i}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:u,digest:null}}function p_(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function q1(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var ez=typeof WeakMap=="function"?WeakMap:Map;function dk(e,t,i){i=ul(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Sy||(Sy=!0,ox=a),q1(e,t)},i}function pk(e,t,i){i=ul(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var u=t.value;i.payload=function(){return a(u)},i.callback=function(){q1(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){q1(e,t),typeof a!="function"&&(mu===null?mu=new Set([this]):mu.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),i}function eT(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new ez;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(i)||(u.add(i),e=pz.bind(null,e,t,i),t.then(e,e))}function tT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rT(e,t,i,a,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ul(-1,1),t.tag=2,pu(i,t,1))),i.lanes|=1),e)}var tz=vl.ReactCurrentOwner,xo=!1;function to(e,t,i,a){t.child=e===null?HC(t,null,i,a):rf(t,e.child,i,a)}function nT(e,t,i,a,u){i=i.render;var f=t.ref;return Zh(t,u),a=tb(e,t,i,a,f,u),i=rb(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,dl(e,t,u)):(Pn&&i&&Vw(t),t.flags|=1,to(e,t,a,u),t.child)}function iT(e,t,i,a,u){if(e===null){var f=i.type;return typeof f=="function"&&!fb(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,mk(e,t,f,a,u)):(e=Bg(i.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&u)){var d=f.memoizedProps;if(i=i.compare,i=i!==null?i:bp,i(d,a)&&e.ref===t.ref)return dl(e,t,u)}return t.flags|=1,e=yu(f,a),e.ref=t.ref,e.return=t,t.child=e}function mk(e,t,i,a,u){if(e!==null){var f=e.memoizedProps;if(bp(f,a)&&e.ref===t.ref)if(xo=!1,t.pendingProps=a=f,(e.lanes&u)!==0)e.flags&131072&&(xo=!0);else return t.lanes=e.lanes,dl(e,t,u)}return K1(e,t,i,a,u)}function gk(e,t,i){var a=t.pendingProps,u=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(zh,Vo),Vo|=i;else{if(!(i&1073741824))return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pn(zh,Vo),Vo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:i,pn(zh,Vo),Vo|=a}else f!==null?(a=f.baseLanes|i,t.memoizedState=null):a=i,pn(zh,Vo),Vo|=a;return to(e,t,u,i),t.child}function yk(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function K1(e,t,i,a,u){var f=bo(i)?gc:Ki.current;return f=ef(t,f),Zh(t,u),i=tb(e,t,i,a,f,u),a=rb(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,dl(e,t,u)):(Pn&&a&&Vw(t),t.flags|=1,to(e,t,i,u),t.child)}function oT(e,t,i,a,u){if(bo(i)){var f=!0;dy(t)}else f=!1;if(Zh(t,u),t.stateNode===null)jg(e,t),GC(t,i,a),X1(t,i,a,u),a=!0;else if(e===null){var d=t.stateNode,l=t.memoizedProps;d.props=l;var w=d.context,E=i.contextType;typeof E=="object"&&E!==null?E=_a(E):(E=bo(i)?gc:Ki.current,E=ef(t,E));var I=i.getDerivedStateFromProps,b=typeof I=="function"||typeof d.getSnapshotBeforeUpdate=="function";b||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==a||w!==E)&&KE(t,d,a,E),ru=!1;var T=t.memoizedState;d.state=T,vy(t,a,d,u),w=t.memoizedState,l!==a||T!==w||wo.current||ru?(typeof I=="function"&&(Z1(t,i,I,a),w=t.memoizedState),(l=ru||qE(t,i,l,a,T,w,E))?(b||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),d.props=a,d.state=w,d.context=E,a=l):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,UC(e,t),l=t.memoizedProps,E=t.type===t.elementType?l:Ba(t.type,l),d.props=E,b=t.pendingProps,T=d.context,w=i.contextType,typeof w=="object"&&w!==null?w=_a(w):(w=bo(i)?gc:Ki.current,w=ef(t,w));var R=i.getDerivedStateFromProps;(I=typeof R=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==b||T!==w)&&KE(t,d,a,w),ru=!1,T=t.memoizedState,d.state=T,vy(t,a,d,u);var L=t.memoizedState;l!==b||T!==L||wo.current||ru?(typeof R=="function"&&(Z1(t,i,R,a),L=t.memoizedState),(E=ru||qE(t,i,E,a,T,L,w)||!1)?(I||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,L,w),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,L,w)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=L),d.props=a,d.state=L,d.context=w,a=E):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return J1(e,t,i,a,f,u)}function J1(e,t,i,a,u,f){yk(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return u&&GE(t,i,!1),dl(e,t,f);a=t.stateNode,tz.current=t;var l=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=rf(t,e.child,null,f),t.child=rf(t,null,l,f)):to(e,t,l,f),t.memoizedState=a.state,u&&GE(t,i,!0),t.child}function vk(e){var t=e.stateNode;t.pendingContext?VE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&VE(e,t.context,!1),Jw(e,t.containerInfo)}function aT(e,t,i,a,u){return tf(),Ww(u),t.flags|=256,to(e,t,i,a),t.child}var Y1={dehydrated:null,treeContext:null,retryLane:0};function Q1(e){return{baseLanes:e,cachePool:null,transitions:null}}function _k(e,t,i){var a=t.pendingProps,u=Mn.current,f=!1,d=(t.flags&128)!==0,l;if((l=d)||(l=e!==null&&e.memoizedState===null?!1:(u&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),pn(Mn,u&1),e===null)return W1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,f?(a=t.mode,f=t.child,d={mode:"hidden",children:d},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=d):f=C0(d,a,0,null),e=dc(e,a,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Q1(i),t.memoizedState=Y1,e):ob(t,d));if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null))return rz(e,t,d,a,l,u,i);if(f){f=a.fallback,d=t.mode,u=e.child,l=u.sibling;var w={mode:"hidden",children:a.children};return!(d&1)&&t.child!==u?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=yu(u,w),a.subtreeFlags=u.subtreeFlags&14680064),l!==null?f=yu(l,f):(f=dc(f,d,i,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,d=e.child.memoizedState,d=d===null?Q1(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},f.memoizedState=d,f.childLanes=e.childLanes&~i,t.memoizedState=Y1,a}return f=e.child,e=f.sibling,a=yu(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function ob(e,t){return t=C0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function eg(e,t,i,a){return a!==null&&Ww(a),rf(t,e.child,null,i),e=ob(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rz(e,t,i,a,u,f,d){if(i)return t.flags&256?(t.flags&=-257,a=p_(Error(At(422))),eg(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,u=t.mode,a=C0({mode:"visible",children:a.children},u,0,null),f=dc(f,u,d,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&rf(t,e.child,null,d),t.child.memoizedState=Q1(d),t.memoizedState=Y1,f);if(!(t.mode&1))return eg(e,t,d,null);if(u.data==="$!"){if(a=u.nextSibling&&u.nextSibling.dataset,a)var l=a.dgst;return a=l,f=Error(At(419)),a=p_(f,a,void 0),eg(e,t,d,a)}if(l=(d&e.childLanes)!==0,xo||l){if(a=yi,a!==null){switch(d&-d){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(a.suspendedLanes|d)?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,fl(e,u),Za(a,e,u,-1))}return hb(),a=p_(Error(At(421))),eg(e,t,d,a)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=mz.bind(null,e),u._reactRetry=t,null):(e=f.treeContext,Zo=du(u.nextSibling),Xo=t,Pn=!0,Na=null,e!==null&&(da[pa++]=al,da[pa++]=sl,da[pa++]=yc,al=e.id,sl=e.overflow,yc=t),t=ob(t,a.children),t.flags|=4096,t)}function sT(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),H1(e.return,t,i)}function m_(e,t,i,a,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=i,f.tailMode=u)}function xk(e,t,i){var a=t.pendingProps,u=a.revealOrder,f=a.tail;if(to(e,t,a.children,i),a=Mn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sT(e,i,t);else if(e.tag===19)sT(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(pn(Mn,a),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&_y(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),m_(t,!1,u,i,f);break;case"backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&_y(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}m_(t,!0,i,null,f);break;case"together":m_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dl(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),_c|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=yu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=yu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function nz(e,t,i){switch(t.tag){case 3:vk(t),tf();break;case 5:ZC(t);break;case 1:bo(t.type)&&dy(t);break;case 4:Jw(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,u=t.memoizedProps.value;pn(gy,a._currentValue),a._currentValue=u;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(pn(Mn,Mn.current&1),t.flags|=128,null):i&t.child.childLanes?_k(e,t,i):(pn(Mn,Mn.current&1),e=dl(e,t,i),e!==null?e.sibling:null);pn(Mn,Mn.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return xk(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),pn(Mn,Mn.current),a)break;return null;case 22:case 23:return t.lanes=0,gk(e,t,i)}return dl(e,t,i)}var wk,ex,bk,Sk;wk=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};ex=function(){};bk=function(e,t,i,a){var u=e.memoizedProps;if(u!==a){e=t.stateNode,uc(As.current);var f=null;switch(i){case"input":u=b1(e,u),a=b1(e,a),f=[];break;case"select":u=Rn({},u,{value:void 0}),a=Rn({},a,{value:void 0}),f=[];break;case"textarea":u=T1(e,u),a=T1(e,a),f=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=hy)}A1(i,a);var d;i=null;for(E in u)if(!a.hasOwnProperty(E)&&u.hasOwnProperty(E)&&u[E]!=null)if(E==="style"){var l=u[E];for(d in l)l.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(mp.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in a){var w=a[E];if(l=u!=null?u[E]:void 0,a.hasOwnProperty(E)&&w!==l&&(w!=null||l!=null))if(E==="style")if(l){for(d in l)!l.hasOwnProperty(d)||w&&w.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in w)w.hasOwnProperty(d)&&l[d]!==w[d]&&(i||(i={}),i[d]=w[d])}else i||(f||(f=[]),f.push(E,i)),i=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,l=l?l.__html:void 0,w!=null&&l!==w&&(f=f||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(mp.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&vn("scroll",e),f||l===w||(f=[])):(f=f||[]).push(E,w))}i&&(f=f||[]).push("style",i);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};Sk=function(e,t,i,a){i!==a&&(t.flags|=4)};function Md(e,t){if(!Pn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Hi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,a|=u.subtreeFlags&14680064,a|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function iz(e,t,i){var a=t.pendingProps;switch(Gw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hi(t),null;case 1:return bo(t.type)&&fy(),Hi(t),null;case 3:return a=t.stateNode,nf(),xn(wo),xn(Ki),Qw(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ym(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Na!==null&&(lx(Na),Na=null))),ex(e,t),Hi(t),null;case 5:Yw(t);var u=uc(Ap.current);if(i=t.type,e!==null&&t.stateNode!=null)bk(e,t,i,a,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Hi(t),null}if(e=uc(As.current),Ym(t)){a=t.stateNode,i=t.type;var f=t.memoizedProps;switch(a[ws]=t,a[Tp]=f,e=(t.mode&1)!==0,i){case"dialog":vn("cancel",a),vn("close",a);break;case"iframe":case"object":case"embed":vn("load",a);break;case"video":case"audio":for(u=0;u<Nd.length;u++)vn(Nd[u],a);break;case"source":vn("error",a);break;case"img":case"image":case"link":vn("error",a),vn("load",a);break;case"details":vn("toggle",a);break;case"input":gE(a,f),vn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},vn("invalid",a);break;case"textarea":vE(a,f),vn("invalid",a)}A1(i,f),u=null;for(var d in f)if(f.hasOwnProperty(d)){var l=f[d];d==="children"?typeof l=="string"?a.textContent!==l&&(f.suppressHydrationWarning!==!0&&Jm(a.textContent,l,e),u=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&Jm(a.textContent,l,e),u=["children",""+l]):mp.hasOwnProperty(d)&&l!=null&&d==="onScroll"&&vn("scroll",a)}switch(i){case"input":Vm(a),yE(a,f,!0);break;case"textarea":Vm(a),_E(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=hy)}a=u,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=KI(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(i,{is:a.is}):(e=d.createElement(i),i==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,i),e[ws]=t,e[Tp]=a,wk(e,t,!1,!1),t.stateNode=e;e:{switch(d=I1(i,a),i){case"dialog":vn("cancel",e),vn("close",e),u=a;break;case"iframe":case"object":case"embed":vn("load",e),u=a;break;case"video":case"audio":for(u=0;u<Nd.length;u++)vn(Nd[u],e);u=a;break;case"source":vn("error",e),u=a;break;case"img":case"image":case"link":vn("error",e),vn("load",e),u=a;break;case"details":vn("toggle",e),u=a;break;case"input":gE(e,a),u=b1(e,a),vn("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=Rn({},a,{value:void 0}),vn("invalid",e);break;case"textarea":vE(e,a),u=T1(e,a),vn("invalid",e);break;default:u=a}A1(i,u),l=u;for(f in l)if(l.hasOwnProperty(f)){var w=l[f];f==="style"?QI(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&JI(e,w)):f==="children"?typeof w=="string"?(i!=="textarea"||w!=="")&&gp(e,w):typeof w=="number"&&gp(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(mp.hasOwnProperty(f)?w!=null&&f==="onScroll"&&vn("scroll",e):w!=null&&Cw(e,f,w,d))}switch(i){case"input":Vm(e),yE(e,a,!1);break;case"textarea":Vm(e),_E(e);break;case"option":a.value!=null&&e.setAttribute("value",""+_u(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Vh(e,!!a.multiple,f,!1):a.defaultValue!=null&&Vh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=hy)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hi(t),null;case 6:if(e&&t.stateNode!=null)Sk(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=uc(Ap.current),uc(As.current),Ym(t)){if(a=t.stateNode,i=t.memoizedProps,a[ws]=t,(f=a.nodeValue!==i)&&(e=Xo,e!==null))switch(e.tag){case 3:Jm(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jm(a.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[ws]=t,t.stateNode=a}return Hi(t),null;case 13:if(xn(Mn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pn&&Zo!==null&&t.mode&1&&!(t.flags&128))NC(),tf(),t.flags|=98560,f=!1;else if(f=Ym(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(At(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(At(317));f[ws]=t}else tf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hi(t),f=!1}else Na!==null&&(lx(Na),Na=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Mn.current&1?ni===0&&(ni=3):hb())),t.updateQueue!==null&&(t.flags|=4),Hi(t),null);case 4:return nf(),ex(e,t),e===null&&Sp(t.stateNode.containerInfo),Hi(t),null;case 10:return Xw(t.type._context),Hi(t),null;case 17:return bo(t.type)&&fy(),Hi(t),null;case 19:if(xn(Mn),f=t.memoizedState,f===null)return Hi(t),null;if(a=(t.flags&128)!==0,d=f.rendering,d===null)if(a)Md(f,!1);else{if(ni!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=_y(e),d!==null){for(t.flags|=128,Md(f,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)f=i,e=a,f.flags&=14680066,d=f.alternate,d===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=d.childLanes,f.lanes=d.lanes,f.child=d.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=d.memoizedProps,f.memoizedState=d.memoizedState,f.updateQueue=d.updateQueue,f.type=d.type,e=d.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return pn(Mn,Mn.current&1|2),t.child}e=e.sibling}f.tail!==null&&Gn()>af&&(t.flags|=128,a=!0,Md(f,!1),t.lanes=4194304)}else{if(!a)if(e=_y(d),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Md(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!Pn)return Hi(t),null}else 2*Gn()-f.renderingStartTime>af&&i!==1073741824&&(t.flags|=128,a=!0,Md(f,!1),t.lanes=4194304);f.isBackwards?(d.sibling=t.child,t.child=d):(i=f.last,i!==null?i.sibling=d:t.child=d,f.last=d)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Gn(),t.sibling=null,i=Mn.current,pn(Mn,a?i&1|2:i&1),t):(Hi(t),null);case 22:case 23:return cb(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Vo&1073741824&&(Hi(t),t.subtreeFlags&6&&(t.flags|=8192)):Hi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function oz(e,t){switch(Gw(t),t.tag){case 1:return bo(t.type)&&fy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nf(),xn(wo),xn(Ki),Qw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yw(t),null;case 13:if(xn(Mn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));tf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xn(Mn),null;case 4:return nf(),null;case 10:return Xw(t.type._context),null;case 22:case 23:return cb(),null;case 24:return null;default:return null}}var tg=!1,Xi=!1,az=typeof WeakSet=="function"?WeakSet:Set,rr=null;function jh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Dn(e,t,a)}else i.current=null}function tx(e,t,i){try{i()}catch(a){Dn(e,t,a)}}var lT=!1;function sz(e,t){if(B1=ly,e=AC(),Uw(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var u=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var d=0,l=-1,w=-1,E=0,I=0,b=e,T=null;t:for(;;){for(var R;b!==i||u!==0&&b.nodeType!==3||(l=d+u),b!==f||a!==0&&b.nodeType!==3||(w=d+a),b.nodeType===3&&(d+=b.nodeValue.length),(R=b.firstChild)!==null;)T=b,b=R;for(;;){if(b===e)break t;if(T===i&&++E===u&&(l=d),T===f&&++I===a&&(w=d),(R=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=R}i=l===-1||w===-1?null:{start:l,end:w}}else i=null}i=i||{start:0,end:0}}else i=null;for(D1={focusedElem:e,selectionRange:i},ly=!1,rr=t;rr!==null;)if(t=rr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rr=e;else for(;rr!==null;){t=rr;try{var L=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var j=L.memoizedProps,le=L.memoizedState,K=t.stateNode,Z=K.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ba(t.type,j),le);K.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(ae){Dn(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,rr=e;break}rr=t.return}return L=lT,lT=!1,L}function rp(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&tx(t,i,f)}u=u.next}while(u!==a)}}function A0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function rx(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Ek(e){var t=e.alternate;t!==null&&(e.alternate=null,Ek(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ws],delete t[Tp],delete t[U1],delete t[Vj],delete t[Gj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tk(e){return e.tag===5||e.tag===3||e.tag===4}function uT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nx(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=hy));else if(a!==4&&(e=e.child,e!==null))for(nx(e,t,i),e=e.sibling;e!==null;)nx(e,t,i),e=e.sibling}function ix(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(ix(e,t,i),e=e.sibling;e!==null;)ix(e,t,i),e=e.sibling}var ki=null,Da=!1;function Ql(e,t,i){for(i=i.child;i!==null;)Pk(e,t,i),i=i.sibling}function Pk(e,t,i){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(_0,i)}catch{}switch(i.tag){case 5:Xi||jh(i,t);case 6:var a=ki,u=Da;ki=null,Ql(e,t,i),ki=a,Da=u,ki!==null&&(Da?(e=ki,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):ki.removeChild(i.stateNode));break;case 18:ki!==null&&(Da?(e=ki,i=i.stateNode,e.nodeType===8?l_(e.parentNode,i):e.nodeType===1&&l_(e,i),xp(e)):l_(ki,i.stateNode));break;case 4:a=ki,u=Da,ki=i.stateNode.containerInfo,Da=!0,Ql(e,t,i),ki=a,Da=u;break;case 0:case 11:case 14:case 15:if(!Xi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){u=a=a.next;do{var f=u,d=f.destroy;f=f.tag,d!==void 0&&(f&2||f&4)&&tx(i,t,d),u=u.next}while(u!==a)}Ql(e,t,i);break;case 1:if(!Xi&&(jh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(l){Dn(i,t,l)}Ql(e,t,i);break;case 21:Ql(e,t,i);break;case 22:i.mode&1?(Xi=(a=Xi)||i.memoizedState!==null,Ql(e,t,i),Xi=a):Ql(e,t,i);break;default:Ql(e,t,i)}}function cT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new az),t.forEach(function(a){var u=gz.bind(null,e,a);i.has(a)||(i.add(a),a.then(u,u))})}}function za(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];try{var f=e,d=t,l=d;e:for(;l!==null;){switch(l.tag){case 5:ki=l.stateNode,Da=!1;break e;case 3:ki=l.stateNode.containerInfo,Da=!0;break e;case 4:ki=l.stateNode.containerInfo,Da=!0;break e}l=l.return}if(ki===null)throw Error(At(160));Pk(f,d,u),ki=null,Da=!1;var w=u.alternate;w!==null&&(w.return=null),u.return=null}catch(E){Dn(u,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ak(t,e),t=t.sibling}function Ak(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(za(t,e),gs(e),a&4){try{rp(3,e,e.return),A0(3,e)}catch(j){Dn(e,e.return,j)}try{rp(5,e,e.return)}catch(j){Dn(e,e.return,j)}}break;case 1:za(t,e),gs(e),a&512&&i!==null&&jh(i,i.return);break;case 5:if(za(t,e),gs(e),a&512&&i!==null&&jh(i,i.return),e.flags&32){var u=e.stateNode;try{gp(u,"")}catch(j){Dn(e,e.return,j)}}if(a&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,d=i!==null?i.memoizedProps:f,l=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&XI(u,f),I1(l,d);var E=I1(l,f);for(d=0;d<w.length;d+=2){var I=w[d],b=w[d+1];I==="style"?QI(u,b):I==="dangerouslySetInnerHTML"?JI(u,b):I==="children"?gp(u,b):Cw(u,I,b,E)}switch(l){case"input":S1(u,f);break;case"textarea":qI(u,f);break;case"select":var T=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var R=f.value;R!=null?Vh(u,!!f.multiple,R,!1):T!==!!f.multiple&&(f.defaultValue!=null?Vh(u,!!f.multiple,f.defaultValue,!0):Vh(u,!!f.multiple,f.multiple?[]:"",!1))}u[Tp]=f}catch(j){Dn(e,e.return,j)}}break;case 6:if(za(t,e),gs(e),a&4){if(e.stateNode===null)throw Error(At(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(j){Dn(e,e.return,j)}}break;case 3:if(za(t,e),gs(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{xp(t.containerInfo)}catch(j){Dn(e,e.return,j)}break;case 4:za(t,e),gs(e);break;case 13:za(t,e),gs(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(lb=Gn())),a&4&&cT(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(Xi=(E=Xi)||I,za(t,e),Xi=E):za(t,e),gs(e),a&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!I&&e.mode&1)for(rr=e,I=e.child;I!==null;){for(b=rr=I;rr!==null;){switch(T=rr,R=T.child,T.tag){case 0:case 11:case 14:case 15:rp(4,T,T.return);break;case 1:jh(T,T.return);var L=T.stateNode;if(typeof L.componentWillUnmount=="function"){a=T,i=T.return;try{t=a,L.props=t.memoizedProps,L.state=t.memoizedState,L.componentWillUnmount()}catch(j){Dn(a,i,j)}}break;case 5:jh(T,T.return);break;case 22:if(T.memoizedState!==null){fT(b);continue}}R!==null?(R.return=T,rr=R):fT(b)}I=I.sibling}e:for(I=null,b=e;;){if(b.tag===5){if(I===null){I=b;try{u=b.stateNode,E?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=b.stateNode,w=b.memoizedProps.style,d=w!=null&&w.hasOwnProperty("display")?w.display:null,l.style.display=YI("display",d))}catch(j){Dn(e,e.return,j)}}}else if(b.tag===6){if(I===null)try{b.stateNode.nodeValue=E?"":b.memoizedProps}catch(j){Dn(e,e.return,j)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;I===b&&(I=null),b=b.return}I===b&&(I=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:za(t,e),gs(e),a&4&&cT(e);break;case 21:break;default:za(t,e),gs(e)}}function gs(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(Tk(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var u=a.stateNode;a.flags&32&&(gp(u,""),a.flags&=-33);var f=uT(e);ix(e,f,u);break;case 3:case 4:var d=a.stateNode.containerInfo,l=uT(e);nx(e,l,d);break;default:throw Error(At(161))}}catch(w){Dn(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lz(e,t,i){rr=e,Ik(e)}function Ik(e,t,i){for(var a=(e.mode&1)!==0;rr!==null;){var u=rr,f=u.child;if(u.tag===22&&a){var d=u.memoizedState!==null||tg;if(!d){var l=u.alternate,w=l!==null&&l.memoizedState!==null||Xi;l=tg;var E=Xi;if(tg=d,(Xi=w)&&!E)for(rr=u;rr!==null;)d=rr,w=d.child,d.tag===22&&d.memoizedState!==null?dT(u):w!==null?(w.return=d,rr=w):dT(u);for(;f!==null;)rr=f,Ik(f),f=f.sibling;rr=u,tg=l,Xi=E}hT(e)}else u.subtreeFlags&8772&&f!==null?(f.return=u,rr=f):hT(e)}}function hT(e){for(;rr!==null;){var t=rr;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xi||A0(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Xi)if(i===null)a.componentDidMount();else{var u=t.elementType===t.type?i.memoizedProps:Ba(t.type,i.memoizedProps);a.componentDidUpdate(u,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&XE(t,f,a);break;case 3:var d=t.updateQueue;if(d!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}XE(t,d,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&i.focus();break;case"img":w.src&&(i.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var I=E.memoizedState;if(I!==null){var b=I.dehydrated;b!==null&&xp(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Xi||t.flags&512&&rx(t)}catch(T){Dn(t,t.return,T)}}if(t===e){rr=null;break}if(i=t.sibling,i!==null){i.return=t.return,rr=i;break}rr=t.return}}function fT(e){for(;rr!==null;){var t=rr;if(t===e){rr=null;break}var i=t.sibling;if(i!==null){i.return=t.return,rr=i;break}rr=t.return}}function dT(e){for(;rr!==null;){var t=rr;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{A0(4,t)}catch(w){Dn(t,i,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var u=t.return;try{a.componentDidMount()}catch(w){Dn(t,u,w)}}var f=t.return;try{rx(t)}catch(w){Dn(t,f,w)}break;case 5:var d=t.return;try{rx(t)}catch(w){Dn(t,d,w)}}}catch(w){Dn(t,t.return,w)}if(t===e){rr=null;break}var l=t.sibling;if(l!==null){l.return=t.return,rr=l;break}rr=t.return}}var uz=Math.ceil,by=vl.ReactCurrentDispatcher,ab=vl.ReactCurrentOwner,va=vl.ReactCurrentBatchConfig,Gr=0,yi=null,Yn=null,Oi=0,Vo=0,zh=Pu(0),ni=0,Mp=null,_c=0,I0=0,sb=0,np=null,vo=null,lb=0,af=1/0,rl=null,Sy=!1,ox=null,mu=null,rg=!1,lu=null,Ey=0,ip=0,ax=null,zg=-1,Lg=0;function oo(){return Gr&6?Gn():zg!==-1?zg:zg=Gn()}function gu(e){return e.mode&1?Gr&2&&Oi!==0?Oi&-Oi:Hj.transition!==null?(Lg===0&&(Lg=hC()),Lg):(e=rn,e!==0||(e=window.event,e=e===void 0?16:vC(e.type)),e):1}function Za(e,t,i,a){if(50<ip)throw ip=0,ax=null,Error(At(185));Gp(e,i,a),(!(Gr&2)||e!==yi)&&(e===yi&&(!(Gr&2)&&(I0|=i),ni===4&&au(e,Oi)),So(e,a),i===1&&Gr===0&&!(t.mode&1)&&(af=Gn()+500,E0&&Au()))}function So(e,t){var i=e.callbackNode;HR(e,t);var a=sy(e,e===yi?Oi:0);if(a===0)i!==null&&bE(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&bE(i),t===1)e.tag===0?Wj(pT.bind(null,e)):LC(pT.bind(null,e)),$j(function(){!(Gr&6)&&Au()}),i=null;else{switch(fC(a)){case 1:i=Rw;break;case 4:i=uC;break;case 16:i=ay;break;case 536870912:i=cC;break;default:i=ay}i=zk(i,Ck.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Ck(e,t){if(zg=-1,Lg=0,Gr&6)throw Error(At(327));var i=e.callbackNode;if(Xh()&&e.callbackNode!==i)return null;var a=sy(e,e===yi?Oi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Ty(e,a);else{t=a;var u=Gr;Gr|=2;var f=Mk();(yi!==e||Oi!==t)&&(rl=null,af=Gn()+500,fc(e,t));do try{fz();break}catch(l){kk(e,l)}while(!0);Zw(),by.current=f,Gr=u,Yn!==null?t=0:(yi=null,Oi=0,t=ni)}if(t!==0){if(t===2&&(u=F1(e),u!==0&&(a=u,t=sx(e,u))),t===1)throw i=Mp,fc(e,0),au(e,a),So(e,Gn()),i;if(t===6)au(e,a);else{if(u=e.current.alternate,!(a&30)&&!cz(u)&&(t=Ty(e,a),t===2&&(f=F1(e),f!==0&&(a=f,t=sx(e,f))),t===1))throw i=Mp,fc(e,0),au(e,a),So(e,Gn()),i;switch(e.finishedWork=u,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:oc(e,vo,rl);break;case 3:if(au(e,a),(a&130023424)===a&&(t=lb+500-Gn(),10<t)){if(sy(e,0)!==0)break;if(u=e.suspendedLanes,(u&a)!==a){oo(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=$1(oc.bind(null,e,vo,rl),t);break}oc(e,vo,rl);break;case 4:if(au(e,a),(a&4194240)===a)break;for(t=e.eventTimes,u=-1;0<a;){var d=31-Ha(a);f=1<<d,d=t[d],d>u&&(u=d),a&=~f}if(a=u,a=Gn()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*uz(a/1960))-a,10<a){e.timeoutHandle=$1(oc.bind(null,e,vo,rl),a);break}oc(e,vo,rl);break;case 5:oc(e,vo,rl);break;default:throw Error(At(329))}}}return So(e,Gn()),e.callbackNode===i?Ck.bind(null,e):null}function sx(e,t){var i=np;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),e=Ty(e,t),e!==2&&(t=vo,vo=i,t!==null&&lx(t)),e}function lx(e){vo===null?vo=e:vo.push.apply(vo,e)}function cz(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var u=i[a],f=u.getSnapshot;u=u.value;try{if(!qa(f(),u))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function au(e,t){for(t&=~sb,t&=~I0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ha(t),a=1<<i;e[i]=-1,t&=~a}}function pT(e){if(Gr&6)throw Error(At(327));Xh();var t=sy(e,0);if(!(t&1))return So(e,Gn()),null;var i=Ty(e,t);if(e.tag!==0&&i===2){var a=F1(e);a!==0&&(t=a,i=sx(e,a))}if(i===1)throw i=Mp,fc(e,0),au(e,t),So(e,Gn()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,oc(e,vo,rl),So(e,Gn()),null}function ub(e,t){var i=Gr;Gr|=1;try{return e(t)}finally{Gr=i,Gr===0&&(af=Gn()+500,E0&&Au())}}function xc(e){lu!==null&&lu.tag===0&&!(Gr&6)&&Xh();var t=Gr;Gr|=1;var i=va.transition,a=rn;try{if(va.transition=null,rn=1,e)return e()}finally{rn=a,va.transition=i,Gr=t,!(Gr&6)&&Au()}}function cb(){Vo=zh.current,xn(zh)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Nj(i)),Yn!==null)for(i=Yn.return;i!==null;){var a=i;switch(Gw(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&fy();break;case 3:nf(),xn(wo),xn(Ki),Qw();break;case 5:Yw(a);break;case 4:nf();break;case 13:xn(Mn);break;case 19:xn(Mn);break;case 10:Xw(a.type._context);break;case 22:case 23:cb()}i=i.return}if(yi=e,Yn=e=yu(e.current,null),Oi=Vo=t,ni=0,Mp=null,sb=I0=_c=0,vo=np=null,lc!==null){for(t=0;t<lc.length;t++)if(i=lc[t],a=i.interleaved,a!==null){i.interleaved=null;var u=a.next,f=i.pending;if(f!==null){var d=f.next;f.next=u,a.next=d}i.pending=a}lc=null}return e}function kk(e,t){do{var i=Yn;try{if(Zw(),Fg.current=wy,xy){for(var a=Fn.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}xy=!1}if(vc=0,gi=ri=Fn=null,tp=!1,Ip=0,ab.current=null,i===null||i.return===null){ni=1,Mp=t,Yn=null;break}e:{var f=e,d=i.return,l=i,w=t;if(t=Oi,l.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w,I=l,b=I.tag;if(!(I.mode&1)&&(b===0||b===11||b===15)){var T=I.alternate;T?(I.updateQueue=T.updateQueue,I.memoizedState=T.memoizedState,I.lanes=T.lanes):(I.updateQueue=null,I.memoizedState=null)}var R=tT(d);if(R!==null){R.flags&=-257,rT(R,d,l,f,t),R.mode&1&&eT(f,E,t),t=R,w=E;var L=t.updateQueue;if(L===null){var j=new Set;j.add(w),t.updateQueue=j}else L.add(w);break e}else{if(!(t&1)){eT(f,E,t),hb();break e}w=Error(At(426))}}else if(Pn&&l.mode&1){var le=tT(d);if(le!==null){!(le.flags&65536)&&(le.flags|=256),rT(le,d,l,f,t),Ww(of(w,l));break e}}f=w=of(w,l),ni!==4&&(ni=2),np===null?np=[f]:np.push(f),f=d;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var K=dk(f,w,t);ZE(f,K);break e;case 1:l=w;var Z=f.type,W=f.stateNode;if(!(f.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(mu===null||!mu.has(W)))){f.flags|=65536,t&=-t,f.lanes|=t;var ae=pk(f,l,t);ZE(f,ae);break e}}f=f.return}while(f!==null)}Fk(i)}catch(q){t=q,Yn===i&&i!==null&&(Yn=i=i.return);continue}break}while(!0)}function Mk(){var e=by.current;return by.current=wy,e===null?wy:e}function hb(){(ni===0||ni===3||ni===2)&&(ni=4),yi===null||!(_c&268435455)&&!(I0&268435455)||au(yi,Oi)}function Ty(e,t){var i=Gr;Gr|=2;var a=Mk();(yi!==e||Oi!==t)&&(rl=null,fc(e,t));do try{hz();break}catch(u){kk(e,u)}while(!0);if(Zw(),Gr=i,by.current=a,Yn!==null)throw Error(At(261));return yi=null,Oi=0,ni}function hz(){for(;Yn!==null;)Ok(Yn)}function fz(){for(;Yn!==null&&!LR();)Ok(Yn)}function Ok(e){var t=jk(e.alternate,e,Vo);e.memoizedProps=e.pendingProps,t===null?Fk(e):Yn=t,ab.current=null}function Fk(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=oz(i,t),i!==null){i.flags&=32767,Yn=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ni=6,Yn=null;return}}else if(i=iz(i,t,Vo),i!==null){Yn=i;return}if(t=t.sibling,t!==null){Yn=t;return}Yn=t=e}while(t!==null);ni===0&&(ni=5)}function oc(e,t,i){var a=rn,u=va.transition;try{va.transition=null,rn=1,dz(e,t,i,a)}finally{va.transition=u,rn=a}return null}function dz(e,t,i,a){do Xh();while(lu!==null);if(Gr&6)throw Error(At(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(ZR(e,f),e===yi&&(Yn=yi=null,Oi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||rg||(rg=!0,zk(ay,function(){return Xh(),null})),f=(i.flags&15990)!==0,i.subtreeFlags&15990||f){f=va.transition,va.transition=null;var d=rn;rn=1;var l=Gr;Gr|=4,ab.current=null,sz(e,i),Ak(i,e),Fj(D1),ly=!!B1,D1=B1=null,e.current=i,lz(i),BR(),Gr=l,rn=d,va.transition=f}else e.current=i;if(rg&&(rg=!1,lu=e,Ey=u),f=e.pendingLanes,f===0&&(mu=null),$R(i.stateNode),So(e,Gn()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)u=t[i],a(u.value,{componentStack:u.stack,digest:u.digest});if(Sy)throw Sy=!1,e=ox,ox=null,e;return Ey&1&&e.tag!==0&&Xh(),f=e.pendingLanes,f&1?e===ax?ip++:(ip=0,ax=e):ip=0,Au(),null}function Xh(){if(lu!==null){var e=fC(Ey),t=va.transition,i=rn;try{if(va.transition=null,rn=16>e?16:e,lu===null)var a=!1;else{if(e=lu,lu=null,Ey=0,Gr&6)throw Error(At(331));var u=Gr;for(Gr|=4,rr=e.current;rr!==null;){var f=rr,d=f.child;if(rr.flags&16){var l=f.deletions;if(l!==null){for(var w=0;w<l.length;w++){var E=l[w];for(rr=E;rr!==null;){var I=rr;switch(I.tag){case 0:case 11:case 15:rp(8,I,f)}var b=I.child;if(b!==null)b.return=I,rr=b;else for(;rr!==null;){I=rr;var T=I.sibling,R=I.return;if(Ek(I),I===E){rr=null;break}if(T!==null){T.return=R,rr=T;break}rr=R}}}var L=f.alternate;if(L!==null){var j=L.child;if(j!==null){L.child=null;do{var le=j.sibling;j.sibling=null,j=le}while(j!==null)}}rr=f}}if(f.subtreeFlags&2064&&d!==null)d.return=f,rr=d;else e:for(;rr!==null;){if(f=rr,f.flags&2048)switch(f.tag){case 0:case 11:case 15:rp(9,f,f.return)}var K=f.sibling;if(K!==null){K.return=f.return,rr=K;break e}rr=f.return}}var Z=e.current;for(rr=Z;rr!==null;){d=rr;var W=d.child;if(d.subtreeFlags&2064&&W!==null)W.return=d,rr=W;else e:for(d=Z;rr!==null;){if(l=rr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:A0(9,l)}}catch(q){Dn(l,l.return,q)}if(l===d){rr=null;break e}var ae=l.sibling;if(ae!==null){ae.return=l.return,rr=ae;break e}rr=l.return}}if(Gr=u,Au(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(_0,e)}catch{}a=!0}return a}finally{rn=i,va.transition=t}}return!1}function mT(e,t,i){t=of(i,t),t=dk(e,t,1),e=pu(e,t,1),t=oo(),e!==null&&(Gp(e,1,t),So(e,t))}function Dn(e,t,i){if(e.tag===3)mT(e,e,i);else for(;t!==null;){if(t.tag===3){mT(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(mu===null||!mu.has(a))){e=of(i,e),e=pk(t,e,1),t=pu(t,e,1),e=oo(),t!==null&&(Gp(t,1,e),So(t,e));break}}t=t.return}}function pz(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=oo(),e.pingedLanes|=e.suspendedLanes&i,yi===e&&(Oi&i)===i&&(ni===4||ni===3&&(Oi&130023424)===Oi&&500>Gn()-lb?fc(e,0):sb|=i),So(e,t)}function Rk(e,t){t===0&&(e.mode&1?(t=Hm,Hm<<=1,!(Hm&130023424)&&(Hm=4194304)):t=1);var i=oo();e=fl(e,t),e!==null&&(Gp(e,t,i),So(e,i))}function mz(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Rk(e,i)}function gz(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),Rk(e,i)}var jk;jk=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||wo.current)xo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return xo=!1,nz(e,t,i);xo=!!(e.flags&131072)}else xo=!1,Pn&&t.flags&1048576&&BC(t,my,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;jg(e,t),e=t.pendingProps;var u=ef(t,Ki.current);Zh(t,i),u=tb(null,t,a,e,u,i);var f=rb();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bo(a)?(f=!0,dy(t)):f=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Kw(t),u.updater=T0,t.stateNode=u,u._reactInternals=t,X1(t,a,e,i),t=J1(null,t,a,!0,f,i)):(t.tag=0,Pn&&f&&Vw(t),to(null,t,u,i),t=t.child),t;case 16:a=t.elementType;e:{switch(jg(e,t),e=t.pendingProps,u=a._init,a=u(a._payload),t.type=a,u=t.tag=vz(a),e=Ba(a,e),u){case 0:t=K1(null,t,a,e,i);break e;case 1:t=oT(null,t,a,e,i);break e;case 11:t=nT(null,t,a,e,i);break e;case 14:t=iT(null,t,a,Ba(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Ba(a,u),K1(e,t,a,u,i);case 1:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Ba(a,u),oT(e,t,a,u,i);case 3:e:{if(vk(t),e===null)throw Error(At(387));a=t.pendingProps,f=t.memoizedState,u=f.element,UC(e,t),vy(t,a,null,i);var d=t.memoizedState;if(a=d.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){u=of(Error(At(423)),t),t=aT(e,t,a,i,u);break e}else if(a!==u){u=of(Error(At(424)),t),t=aT(e,t,a,i,u);break e}else for(Zo=du(t.stateNode.containerInfo.firstChild),Xo=t,Pn=!0,Na=null,i=HC(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(tf(),a===u){t=dl(e,t,i);break e}to(e,t,a,i)}t=t.child}return t;case 5:return ZC(t),e===null&&W1(t),a=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,d=u.children,N1(a,u)?d=null:f!==null&&N1(a,f)&&(t.flags|=32),yk(e,t),to(e,t,d,i),t.child;case 6:return e===null&&W1(t),null;case 13:return _k(e,t,i);case 4:return Jw(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=rf(t,null,a,i):to(e,t,a,i),t.child;case 11:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Ba(a,u),nT(e,t,a,u,i);case 7:return to(e,t,t.pendingProps,i),t.child;case 8:return to(e,t,t.pendingProps.children,i),t.child;case 12:return to(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,u=t.pendingProps,f=t.memoizedProps,d=u.value,pn(gy,a._currentValue),a._currentValue=d,f!==null)if(qa(f.value,d)){if(f.children===u.children&&!wo.current){t=dl(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){d=f.child;for(var w=l.firstContext;w!==null;){if(w.context===a){if(f.tag===1){w=ul(-1,i&-i),w.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var I=E.pending;I===null?w.next=w:(w.next=I.next,I.next=w),E.pending=w}}f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),H1(f.return,i,t),l.lanes|=i;break}w=w.next}}else if(f.tag===10)d=f.type===t.type?null:f.child;else if(f.tag===18){if(d=f.return,d===null)throw Error(At(341));d.lanes|=i,l=d.alternate,l!==null&&(l.lanes|=i),H1(d,i,t),d=f.sibling}else d=f.child;if(d!==null)d.return=f;else for(d=f;d!==null;){if(d===t){d=null;break}if(f=d.sibling,f!==null){f.return=d.return,d=f;break}d=d.return}f=d}to(e,t,u.children,i),t=t.child}return t;case 9:return u=t.type,a=t.pendingProps.children,Zh(t,i),u=_a(u),a=a(u),t.flags|=1,to(e,t,a,i),t.child;case 14:return a=t.type,u=Ba(a,t.pendingProps),u=Ba(a.type,u),iT(e,t,a,u,i);case 15:return mk(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Ba(a,u),jg(e,t),t.tag=1,bo(a)?(e=!0,dy(t)):e=!1,Zh(t,i),GC(t,a,u),X1(t,a,u,i),J1(null,t,a,!0,e,i);case 19:return xk(e,t,i);case 22:return gk(e,t,i)}throw Error(At(156,t.tag))};function zk(e,t){return lC(e,t)}function yz(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ga(e,t,i,a){return new yz(e,t,i,a)}function fb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vz(e){if(typeof e=="function")return fb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mw)return 11;if(e===Ow)return 14}return 2}function yu(e,t){var i=e.alternate;return i===null?(i=ga(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Bg(e,t,i,a,u,f){var d=2;if(a=e,typeof e=="function")fb(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Ph:return dc(i.children,u,f,t);case kw:d=8,u|=8;break;case v1:return e=ga(12,i,t,u|2),e.elementType=v1,e.lanes=f,e;case _1:return e=ga(13,i,t,u),e.elementType=_1,e.lanes=f,e;case x1:return e=ga(19,i,t,u),e.elementType=x1,e.lanes=f,e;case WI:return C0(i,u,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case VI:d=10;break e;case GI:d=9;break e;case Mw:d=11;break e;case Ow:d=14;break e;case tu:d=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=ga(d,i,t,u),t.elementType=e,t.type=a,t.lanes=f,t}function dc(e,t,i,a){return e=ga(7,e,a,t),e.lanes=i,e}function C0(e,t,i,a){return e=ga(22,e,a,t),e.elementType=WI,e.lanes=i,e.stateNode={isHidden:!1},e}function g_(e,t,i){return e=ga(6,e,null,t),e.lanes=i,e}function y_(e,t,i){return t=ga(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _z(e,t,i,a,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jv(0),this.expirationTimes=Jv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jv(0),this.identifierPrefix=a,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function db(e,t,i,a,u,f,d,l,w){return e=new _z(e,t,i,l,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=ga(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kw(f),e}function xz(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Th,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function Lk(e){if(!e)return xu;e=e._reactInternals;e:{if(Pc(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(bo(i))return zC(e,i,t)}return t}function Bk(e,t,i,a,u,f,d,l,w){return e=db(i,a,!0,e,u,f,d,l,w),e.context=Lk(null),i=e.current,a=oo(),u=gu(i),f=ul(a,u),f.callback=t??null,pu(i,f,u),e.current.lanes=u,Gp(e,u,a),So(e,a),e}function k0(e,t,i,a){var u=t.current,f=oo(),d=gu(u);return i=Lk(i),t.context===null?t.context=i:t.pendingContext=i,t=ul(f,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=pu(u,t,d),e!==null&&(Za(e,u,d,f),Og(e,u,d)),d}function Py(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function pb(e,t){gT(e,t),(e=e.alternate)&&gT(e,t)}function wz(){return null}var Dk=typeof reportError=="function"?reportError:function(e){console.error(e)};function mb(e){this._internalRoot=e}M0.prototype.render=mb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));k0(e,t,null,null)};M0.prototype.unmount=mb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xc(function(){k0(null,e,null,null)}),t[hl]=null}};function M0(e){this._internalRoot=e}M0.prototype.unstable_scheduleHydration=function(e){if(e){var t=mC();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ou.length&&t!==0&&t<ou[i].priority;i++);ou.splice(i,0,e),i===0&&yC(e)}};function gb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function O0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yT(){}function bz(e,t,i,a,u){if(u){if(typeof a=="function"){var f=a;a=function(){var E=Py(d);f.call(E)}}var d=Bk(t,a,e,0,null,!1,!1,"",yT);return e._reactRootContainer=d,e[hl]=d.current,Sp(e.nodeType===8?e.parentNode:e),xc(),d}for(;u=e.lastChild;)e.removeChild(u);if(typeof a=="function"){var l=a;a=function(){var E=Py(w);l.call(E)}}var w=db(e,0,!1,null,null,!1,!1,"",yT);return e._reactRootContainer=w,e[hl]=w.current,Sp(e.nodeType===8?e.parentNode:e),xc(function(){k0(t,w,i,a)}),w}function F0(e,t,i,a,u){var f=i._reactRootContainer;if(f){var d=f;if(typeof u=="function"){var l=u;u=function(){var w=Py(d);l.call(w)}}k0(t,d,e,u)}else d=bz(i,t,e,u,a);return Py(d)}dC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Dd(t.pendingLanes);i!==0&&(jw(t,i|1),So(t,Gn()),!(Gr&6)&&(af=Gn()+500,Au()))}break;case 13:xc(function(){var a=fl(e,1);if(a!==null){var u=oo();Za(a,e,1,u)}}),pb(e,1)}};zw=function(e){if(e.tag===13){var t=fl(e,134217728);if(t!==null){var i=oo();Za(t,e,134217728,i)}pb(e,134217728)}};pC=function(e){if(e.tag===13){var t=gu(e),i=fl(e,t);if(i!==null){var a=oo();Za(i,e,t,a)}pb(e,t)}};mC=function(){return rn};gC=function(e,t){var i=rn;try{return rn=e,t()}finally{rn=i}};k1=function(e,t,i){switch(t){case"input":if(S1(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var u=S0(a);if(!u)throw Error(At(90));ZI(a),S1(a,u)}}}break;case"textarea":qI(e,i);break;case"select":t=i.value,t!=null&&Vh(e,!!i.multiple,t,!1)}};rC=ub;nC=xc;var Sz={usingClientEntryPoint:!1,Events:[Hp,kh,S0,eC,tC,ub]},Od={findFiberByHostInstance:sc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Ez={bundleType:Od.bundleType,version:Od.version,rendererPackageName:Od.rendererPackageName,rendererConfig:Od.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aC(e),e===null?null:e.stateNode},findFiberByHostInstance:Od.findFiberByHostInstance||wz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ng.isDisabled&&ng.supportsFiber)try{_0=ng.inject(Ez),Ps=ng}catch{}}Ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sz;Ko.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gb(t))throw Error(At(200));return xz(e,t,null,i)};Ko.createRoot=function(e,t){if(!gb(e))throw Error(At(299));var i=!1,a="",u=Dk;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=db(e,1,!1,null,null,i,!1,a,u),e[hl]=t.current,Sp(e.nodeType===8?e.parentNode:e),new mb(t)};Ko.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=aC(t),e=e===null?null:e.stateNode,e};Ko.flushSync=function(e){return xc(e)};Ko.hydrate=function(e,t,i){if(!O0(t))throw Error(At(200));return F0(null,e,t,!0,i)};Ko.hydrateRoot=function(e,t,i){if(!gb(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,u=!1,f="",d=Dk;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),t=Bk(t,null,e,1,i??null,u,!1,f,d),e[hl]=t.current,Sp(e),a)for(e=0;e<a.length;e++)i=a[e],u=i._getVersion,u=u(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,u]:t.mutableSourceEagerHydrationData.push(i,u);return new M0(t)};Ko.render=function(e,t,i){if(!O0(t))throw Error(At(200));return F0(null,e,t,!1,i)};Ko.unmountComponentAtNode=function(e){if(!O0(e))throw Error(At(40));return e._reactRootContainer?(xc(function(){F0(null,null,e,!1,function(){e._reactRootContainer=null,e[hl]=null})}),!0):!1};Ko.unstable_batchedUpdates=ub;Ko.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!O0(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return F0(e,t,i,!1,a)};Ko.version="18.2.0-next-9e3b772b8-20220608";function Nk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nk)}catch(e){console.error(e)}}Nk(),BI.exports=Ko;var yb=BI.exports;const Tz=yf(yb);var $k={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.5.0/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})($a,function(){var i={},a={};function u(d,l,w){if(a[d]=w,d==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}u("shared",["exports"],function(d){function l(o,r,s,h){return new(s||(s=Promise))(function(m,y){function x(F){try{C(h.next(F))}catch(G){y(G)}}function S(F){try{C(h.throw(F))}catch(G){y(G)}}function C(F){var G;F.done?m(F.value):(G=F.value,G instanceof s?G:new s(function(J){J(G)})).then(x,S)}C((h=h.apply(o,r||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var E=I;function I(o,r){this.x=o,this.y=r}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,s=o.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),s=Math.sin(o),h=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,r){var s=Math.cos(o),h=Math.sin(o),m=r.y+h*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-h*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(o){return o instanceof I?o:Array.isArray(o)?new I(o[0],o[1]):o};var b=w(E),T=R;function R(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}R.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=m/y}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var L=w(T);let j,le;function K(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function Z(){if(le==null&&(le=!1,K())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const m=4*h;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const s=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){le=!0;break}}}return le||!1}function W(o,r,s,h){const m=new L(o,r,s,h);return y=>m.solve(y)}const ae=W(.25,.1,.25,1);function q(o,r,s){return Math.min(s,Math.max(r,o))}function V(o,r,s){const h=s-r,m=((o-r)%h+h)%h+r;return m===r?s:m}function P(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}let z=1;function B(o,r,s){const h={};for(const m in o)h[m]=r.call(this,o[m],m,o);return h}function ee(o,r,s){const h={};for(const m in o)r.call(this,o[m],m,o)&&(h[m]=o[m]);return h}function X(o){return Array.isArray(o)?o.map(X):typeof o=="object"&&o?B(o,X):o}const ye={};function ge(o){ye[o]||(typeof console<"u"&&console.warn(o),ye[o]=!0)}function fe(o,r,s){return(s.y-o.y)*(r.x-o.x)>(r.y-o.y)*(s.x-o.x)}function ie(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let he=null;function Y(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function de(o,r,s,h,m){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(o,{timestamp:0});try{const x=y==null?void 0:y.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),C=new Uint8ClampedArray(h*m*4);if(yield y.copyTo(C,function(F,G,J,ne,ce){const me=4*Math.max(-G,0),Te=(Math.max(0,J)-J)*ne*4+me,Re=4*ne,Ne=Math.max(0,G),Qe=Math.max(0,J);return{rect:{x:Ne,y:Qe,width:Math.min(F.width,G+ne)-Ne,height:Math.min(F.height,J+ce)-Qe},layout:[{offset:Te,stride:Re}]}}(o,r,s,h,m)),S)for(let F=0;F<C.length;F+=4){const G=C[F];C[F]=C[F+2],C[F+2]=G}return C}finally{y.close()}})}let be,Pe;const $e="AbortError";function Ce(){return new Error($e)}const Fe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function He(o){return Fe.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const We="global-dispatcher";class it extends Error{constructor(r,s,h,m){super(`AJAXError: ${s} (${r}): ${h}`),this.status=r,this.statusText=s,this.url=h,this.body=m}}const ct=()=>ie(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,vt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=He(o.url);if(h)return h(o,r);if(ie(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:We},r)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ct())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return l(this,void 0,void 0,function*(){const y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ct(),signal:m.signal});h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");const x=yield fetch(y);if(!x.ok){const F=yield x.blob();throw new it(x.status,x.statusText,h.url,F)}let S;S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const C=yield S;if(m.signal.aborted)throw Ce();return{data:C,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,r);if(ie(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:We},r)}var s;return function(h,m){return new Promise((y,x)=>{var S;const C=new XMLHttpRequest;C.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(C.responseType="arraybuffer");for(const F in h.headers)C.setRequestHeader(F,h.headers[F]);h.type==="json"&&(C.responseType="text",!((S=h.headers)===null||S===void 0)&&S.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=h.credentials==="include",C.onerror=()=>{x(new Error(C.statusText))},C.onload=()=>{if(!m.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let F=C.response;if(h.type==="json")try{F=JSON.parse(C.response)}catch(G){return void x(G)}y({data:F,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const F=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});x(new it(C.status,C.statusText,h.url,F))}},m.signal.addEventListener("abort",()=>{C.abort(),x(Ce())}),C.send(h.body)})}(o,r)};function kt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function pt(o,r,s){s[o]&&s[o].indexOf(r)!==-1||(s[o]=s[o]||[],s[o].push(r))}function xt(o,r,s){if(s&&s[o]){const h=s[o].indexOf(r);h!==-1&&s[o].splice(h,1)}}class Wt{constructor(r,s={}){P(this,s),this.type=r}}class Ht extends Wt{constructor(r,s={}){super("error",P({error:r},s))}}class lr{on(r,s){return this._listeners=this._listeners||{},pt(r,s,this._listeners),this}off(r,s){return xt(r,s,this._listeners),xt(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},pt(r,s,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,s){typeof r=="string"&&(r=new Wt(r,s||{}));const h=r.type;if(this.listens(h)){r.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,r);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of y)xt(h,S,this._oneTimeListeners),S.call(this,r);const x=this._eventedParent;x&&(P(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof Ht&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const _r=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ur(o,r){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return _r.forEach(h=>{h in r&&(s[h]=r[h])}),s}function Vt(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let s=0;s<o.length;s++)if(!Vt(o[s],r[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const s in o)if(!Vt(o[s],r[s]))return!1;return!0}return o===r}function Se(o,r){o.push(r)}function N(o,r,s){Se(s,{command:"addSource",args:[o,r[o]]})}function D(o,r,s){Se(r,{command:"removeSource",args:[o]}),s[o]=!0}function _e(o,r,s,h){D(o,s,h),N(o,r,s)}function Xe(o,r,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Vt(o[s][h],r[s][h]))return!1;for(h in r[s])if(Object.prototype.hasOwnProperty.call(r[s],h)&&h!=="data"&&!Vt(o[s][h],r[s][h]))return!1;return!0}function tt(o,r,s,h,m,y){o=o||{},r=r||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],r[x])||s.push({command:y,args:[h,x,r[x],m]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],r[x])||s.push({command:y,args:[h,x,r[x],m]}))}function ht(o){return o.id}function ue(o,r){return o[r.id]=r,o}class M{constructor(r,s,h,m){this.message=(r?`${r}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function U(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}class Ee extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class Ve{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(r){return new Ve(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const nt={kind:"null"},Ge={kind:"number"},Et={kind:"string"},It={kind:"boolean"},yr={kind:"color"},Sr={kind:"object"},Rt={kind:"value"},jn={kind:"collator"},oi={kind:"formatted"},ji={kind:"padding"},Wn={kind:"resolvedImage"},Oe={kind:"variableAnchorOffsetCollection"};function se(o,r){return{kind:"array",itemType:o,N:r}}function oe(o){if(o.kind==="array"){const r=oe(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const xe=[nt,Ge,Et,It,yr,oi,Sr,se(Rt),ji,Wn,Oe];function Ie(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ie(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const s of xe)if(!Ie(s,r))return null}}return`Expected ${oe(o)} but found ${oe(r)} instead.`}function Me(o,r){return r.some(s=>s.kind===o.kind)}function Be(o,r){return r.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Ke(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Le=.96422,at=.82521,ft=4/29,ot=6/29,Pt=3*ot*ot,qt=ot*ot*ot,nr=Math.PI/180,pr=180/Math.PI;function Er(o){return(o%=360)<0&&(o+=360),o}function hr([o,r,s,h]){let m,y;const x=Yr((.2225045*(o=Vr(o))+.7168786*(r=Vr(r))+.0606169*(s=Vr(s)))/1);o===r&&r===s?m=y=x:(m=Yr((.4360747*o+.3850649*r+.1430804*s)/Le),y=Yr((.0139322*o+.0971045*r+.7141733*s)/at));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-y),h]}function Vr(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Yr(o){return o>qt?Math.pow(o,1/3):o/Pt+ft}function on([o,r,s,h]){let m=(o+16)/116,y=isNaN(r)?m:m+r/500,x=isNaN(s)?m:m-s/200;return m=1*$r(m),y=Le*$r(y),x=at*$r(x),[wr(3.1338561*y-1.6168667*m-.4906146*x),wr(-.9787684*y+1.9161415*m+.033454*x),wr(.0719453*y-.2289914*m+1.4052427*x),h]}function wr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function $r(o){return o>ot?o*o*o:Pt*(o-ft)}function Qr(o){return parseInt(o.padEnd(2,o),16)/255}function An(o,r){return Hn(r?o/100:o,0,1)}function Hn(o,r,s){return Math.min(Math.max(r,o),s)}function Zn(o){return!o.some(Number.isNaN)}const ea={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Mr{constructor(r,s,h,m=1,y=!0){this.r=r,this.g=s,this.b=h,this.a=m,y||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,s,h,m]))}static parse(r){if(r instanceof Mr)return r;if(typeof r!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=ea[h];if(m){const[x,S,C]=m;return[x/255,S/255,C/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Qr(h.slice(S,S+=x)),Qr(h.slice(S,S+=x)),Qr(h.slice(S,S+=x)),Qr(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,C,F,G,J,ne,ce,me,Te,Re,Ne,Qe]=x,Ze=[G||" ",ce||" ",Re].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const Ye=[F,ne,Te].join(""),lt=Ye==="%%%"?100:Ye===""?255:0;if(lt){const _t=[Hn(+C/lt,0,1),Hn(+J/lt,0,1),Hn(+me/lt,0,1),Ne?An(+Ne,Qe):1];if(Zn(_t))return _t}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,S,C,F,G,J,ne,ce,me]=y,Te=[C||" ",G||" ",ne].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Re=[+S,Hn(+F,0,100),Hn(+J,0,100),ce?An(+ce,me):1];if(Zn(Re))return function([Ne,Qe,Ze,Ye]){function lt(_t){const Ft=(_t+Ne/30)%12,ir=Qe*Math.min(Ze,1-Ze);return Ze-ir*Math.max(-1,Math.min(Ft-3,9-Ft,1))}return Ne=Er(Ne),Qe/=100,Ze/=100,[lt(0),lt(8),lt(4),Ye]}(Re)}}}(r);return s?new Mr(...s,!1):void 0}get rgb(){const{r,g:s,b:h,a:m}=this,y=m||1/0;return this.overwriteGetter("rgb",[r/y,s/y,h/y,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,h,m,y]=hr(r),x=Math.sqrt(h*h+m*m);return[Math.round(1e4*x)?Er(Math.atan2(m,h)*pr):NaN,x,s,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",hr(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,h,m]=this.rgb;return`rgba(${[r,s,h].map(y=>Math.round(255*y)).join(",")},${m})`}}Mr.black=new Mr(0,0,0,1),Mr.white=new Mr(1,1,1,1),Mr.transparent=new Mr(0,0,0,0),Mr.red=new Mr(1,0,0,1);class xl{constructor(r,s,h){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Tr{constructor(r,s,h,m,y){this.text=r,this.image=s,this.scale=h,this.fontStack=m,this.textColor=y}}class In{constructor(r){this.sections=r}static fromString(r){return new In([new Tr(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof In?r:In.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class _i{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof _i)return r;if(typeof r=="number")return new _i([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new _i(r)}}toString(){return JSON.stringify(this.values)}}const Af=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class xi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof xi)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let s=0;s<r.length;s+=2){const h=r[s],m=r[s+1];if(typeof h!="string"||!Af.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new xi(r)}}toString(){return JSON.stringify(this.values)}}class Xn{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Xn({name:r,available:!1}):null}}function wl(o,r,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,s,h]:[o,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wi(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Mr||o instanceof xl||o instanceof In||o instanceof _i||o instanceof xi||o instanceof Xn)return!0;if(Array.isArray(o)){for(const r of o)if(!wi(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!wi(o[r]))return!1;return!0}return!1}function bn(o){if(o===null)return nt;if(typeof o=="string")return Et;if(typeof o=="boolean")return It;if(typeof o=="number")return Ge;if(o instanceof Mr)return yr;if(o instanceof xl)return jn;if(o instanceof In)return oi;if(o instanceof _i)return ji;if(o instanceof xi)return Oe;if(o instanceof Xn)return Wn;if(Array.isArray(o)){const r=o.length;let s;for(const h of o){const m=bn(h);if(s){if(s===m)continue;s=Rt;break}s=m}return se(s||Rt,r)}return Sr}function Eo(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof Mr||o instanceof In||o instanceof _i||o instanceof xi||o instanceof Xn?o.toString():JSON.stringify(o)}class ba{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!wi(r[1]))return s.error("invalid value");const h=r[1];let m=bn(h);const y=s.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new ba(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class mn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const bl={string:Et,number:Ge,boolean:It,object:Sr};class Sn{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let h,m=1;const y=r[0];if(y==="array"){let S,C;if(r.length>2){const F=r[1];if(typeof F!="string"||!(F in bl)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=bl[F],m++}else S=Rt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);C=r[2],m++}h=se(S,C)}else{if(!bl[y])throw new Error(`Types doesn't contain name = ${y}`);h=bl[y]}const x=[];for(;m<r.length;m++){const S=s.parse(r[m],m,Rt);if(!S)return null;x.push(S)}return new Sn(h,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(r);if(!Ie(this.type,bn(h)))return h;if(s===this.args.length-1)throw new mn(`Expected value to be of type ${oe(this.type)}, but found ${oe(bn(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Fs={"to-boolean":It,"to-color":yr,"to-number":Ge,"to-string":Et};class ta{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[0];if(!Fs[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return s.error("Expected one argument.");const m=Fs[h],y=[];for(let x=1;x<r.length;x++){const S=s.parse(r[x],x,Rt);if(!S)return null;y.push(S)}return new ta(m,y)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let s,h;for(const m of this.args){if(s=m.evaluate(r),h=null,s instanceof Mr)return s;if(typeof s=="string"){const y=r.parseColor(s);if(y)return y}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:wl(s[0],s[1],s[2],s[3]),!h))return new Mr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new mn(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(r);const m=_i.parse(s);if(m)return m}throw new mn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(r);const m=xi.parse(s);if(m)return m}throw new mn(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(r),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new mn(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return In.fromString(Eo(this.args[0].evaluate(r)));case"resolvedImage":return Xn.fromString(Eo(this.args[0].evaluate(r)));default:return Eo(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Mu=["Unknown","Point","LineString","Polygon"];class Rs{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Mu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=Mr.parse(r)),s}}class ra{constructor(r,s,h=[],m,y=new Ve,x=[]){this.registry=r,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=y,this.errors=x,this.expectedType=m,this._isConstant=s}parse(r,s,h,m,y={}){return s?this.concat(s,h,m)._parse(r,y):this._parse(r,y)}_parse(r,s){function h(m,y,x){return x==="assert"?new Sn(y,[m]):x==="coerce"?new ta(y,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let x=y.parse(r,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,C=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||C.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(S.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(S,C))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof ba)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Rs;try{x=new ba(x.type,x.evaluate(S))}catch(C){return this.error(C.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,h){const m=typeof r=="number"?this.path.concat(r):this.path,y=h?this.scope.concat(h):this.scope;return new ra(this.registry,this._isConstant,m,s||null,y,this.errors)}error(r,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Ee(h,r))}checkSubtype(r,s){const h=Ie(r,s);return h&&this.error(h),h}}class Ir{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let y=1;y<r.length-1;y+=2){const x=r[y];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",y);const S=s.parse(r[y+1],y+1);if(!S)return null;h.push([x,S])}const m=s.parse(r[r.length-1],r.length-1,s.expectedType,h);return m?new Ir(h,m):null}outputDefined(){return this.result.outputDefined()}}class Sl{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=r[1];return s.scope.has(h)?new Sl(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Ou{constructor(r,s,h){this.type=r,this.index=s,this.input=h}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ge),m=s.parse(r[2],2,se(s.expectedType||Rt));return h&&m?new Ou(m.type.itemType,h,m):null}evaluate(r){const s=this.index.evaluate(r),h=this.input.evaluate(r);if(s<0)throw new mn(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new mn(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new mn(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Qn{constructor(r,s){this.type=It,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Rt);return h&&m?Me(h.type,[It,Et,Ge,nt,Rt])?new Qn(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${oe(h.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!Be(s,["boolean","string","number","null"]))throw new mn(`Expected first argument to be of type boolean, string, number or null, but found ${oe(bn(s))} instead.`);if(!Be(h,["string","array"]))throw new mn(`Expected second argument to be of type array or string, but found ${oe(bn(h))} instead.`);return h.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class El{constructor(r,s,h){this.type=Ge,this.needle=r,this.haystack=s,this.fromIndex=h}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Rt);if(!h||!m)return null;if(!Me(h.type,[It,Et,Ge,nt,Rt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${oe(h.type)} instead`);if(r.length===4){const y=s.parse(r[3],3,Ge);return y?new El(h,m,y):null}return new El(h,m)}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!Be(s,["boolean","string","number","null"]))throw new mn(`Expected first argument to be of type boolean, string, number or null, but found ${oe(bn(s))} instead.`);if(!Be(h,["string","array"]))throw new mn(`Expected second argument to be of type array or string, but found ${oe(bn(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return h.indexOf(s,m)}return h.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Tl{constructor(r,s,h,m,y,x){this.inputType=r,this.type=s,this.input=h,this.cases=m,this.outputs=y,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const y={},x=[];for(let F=2;F<r.length-1;F+=2){let G=r[F];const J=r[F+1];Array.isArray(G)||(G=[G]);const ne=s.concat(F);if(G.length===0)return ne.error("Expected at least one branch label.");for(const me of G){if(typeof me!="number"&&typeof me!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return ne.error("Numeric branch labels must be integer values.");if(h){if(ne.checkSubtype(h,bn(me)))return null}else h=bn(me);if(y[String(me)]!==void 0)return ne.error("Branch labels must be unique.");y[String(me)]=x.length}const ce=s.parse(J,F,m);if(!ce)return null;m=m||ce.type,x.push(ce)}const S=s.parse(r[1],1,Rt);if(!S)return null;const C=s.parse(r[r.length-1],r.length-1,m);return C?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new Tl(h,m,S,y,x,C):null}evaluate(r){const s=this.input.evaluate(r);return(bn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Pl{constructor(r,s,h){this.type=r,this.branches=s,this.otherwise=h}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let x=1;x<r.length-1;x+=2){const S=s.parse(r[x],x,It);if(!S)return null;const C=s.parse(r[x+1],x+1,h);if(!C)return null;m.push([S,C]),h=h||C.type}const y=s.parse(r[r.length-1],r.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new Pl(h,m,y)}evaluate(r){for(const[s,h]of this.branches)if(s.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,h]of this.branches)r(s),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Al{constructor(r,s,h,m){this.type=r,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Ge);if(!h||!m)return null;if(!Me(h.type,[se(Rt),Et,Rt]))return s.error(`Expected first argument to be of type array or string, but found ${oe(h.type)} instead`);if(r.length===4){const y=s.parse(r[3],3,Ge);return y?new Al(h.type,h,m,y):null}return new Al(h.type,h,m)}evaluate(r){const s=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!Be(s,["string","array"]))throw new mn(`Expected first argument to be of type array or string, but found ${oe(bn(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return s.slice(h,m)}return s.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function js(o,r){const s=o.length-1;let h,m,y=0,x=s,S=0;for(;y<=x;)if(S=Math.floor((y+x)/2),h=o[S],m=o[S+1],h<=r){if(S===s||r<m)return S;y=S+1}else{if(!(h>r))throw new mn("Input is not a number.");x=S-1}return 0}class Sa{constructor(r,s,h){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[m,y]of h)this.labels.push(m),this.outputs.push(y)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(r[1],1,Ge);if(!h)return null;const m=[];let y=null;s.expectedType&&s.expectedType.kind!=="value"&&(y=s.expectedType);for(let x=1;x<r.length;x+=2){const S=x===1?-1/0:r[x],C=r[x+1],F=x,G=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(m.length&&m[m.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const J=s.parse(C,G,y);if(!J)return null;y=y||J.type,m.push([S,J])}return new Sa(y,h,m)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const y=s.length;return m>=s[y-1]?h[y-1].evaluate(r):h[js(s,m)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Fu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Oc=zs;function zs(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}zs.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=m/y}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var If=Fu(Oc);function bi(o,r,s){return o+s*(r-o)}function Ls(o,r,s){return o.map((h,m)=>bi(h,r[m],s))}const Si={number:bi,color:function(o,r,s,h="rgb"){switch(h){case"rgb":{const[m,y,x,S]=Ls(o.rgb,r.rgb,s);return new Mr(m,y,x,S,!1)}case"hcl":{const[m,y,x,S]=o.hcl,[C,F,G,J]=r.hcl;let ne,ce;if(isNaN(m)||isNaN(C))isNaN(m)?isNaN(C)?ne=NaN:(ne=C,x!==1&&x!==0||(ce=F)):(ne=m,G!==1&&G!==0||(ce=y));else{let Qe=C-m;C>m&&Qe>180?Qe-=360:C<m&&m-C>180&&(Qe+=360),ne=m+s*Qe}const[me,Te,Re,Ne]=function([Qe,Ze,Ye,lt]){return Qe=isNaN(Qe)?0:Qe*nr,on([Ye,Math.cos(Qe)*Ze,Math.sin(Qe)*Ze,lt])}([ne,ce??bi(y,F,s),bi(x,G,s),bi(S,J,s)]);return new Mr(me,Te,Re,Ne,!1)}case"lab":{const[m,y,x,S]=on(Ls(o.lab,r.lab,s));return new Mr(m,y,x,S,!1)}}},array:Ls,padding:function(o,r,s){return new _i(Ls(o.values,r.values,s))},variableAnchorOffsetCollection:function(o,r,s){const h=o.values,m=r.values;if(h.length!==m.length)throw new mn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const y=[];for(let x=0;x<h.length;x+=2){if(h[x]!==m[x])throw new mn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${m[x]}`);y.push(h[x]);const[S,C]=h[x+1],[F,G]=m[x+1];y.push([bi(S,F,s),bi(C,G,s)])}return new xi(y)}};class Ei{constructor(r,s,h,m,y){this.type=r,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of y)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(r,s,h,m){let y=0;if(r.name==="exponential")y=Bs(s,r.base,h,m);else if(r.name==="linear")y=Bs(s,1,h,m);else if(r.name==="cubic-bezier"){const x=r.controlPoints;y=new If(x[0],x[1],x[2],x[3]).solve(Bs(s,1,h,m))}return y}static parse(r,s){let[h,m,y,...x]=r;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const F=m[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:F}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const F=m.slice(1);if(F.length!==4||F.some(G=>typeof G!="number"||G<0||G>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:F}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(y=s.parse(y,2,Ge),!y)return null;const S=[];let C=null;h==="interpolate-hcl"||h==="interpolate-lab"?C=yr:s.expectedType&&s.expectedType.kind!=="value"&&(C=s.expectedType);for(let F=0;F<x.length;F+=2){const G=x[F],J=x[F+1],ne=F+3,ce=F+4;if(typeof G!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(S.length&&S[S.length-1][0]>=G)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const me=s.parse(J,ce,C);if(!me)return null;C=C||me.type,S.push([G,me])}return Ke(C,Ge)||Ke(C,yr)||Ke(C,ji)||Ke(C,Oe)||Ke(C,se(Ge))?new Ei(C,h,m,y,S):s.error(`Type ${oe(C)} is not interpolatable.`)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const y=s.length;if(m>=s[y-1])return h[y-1].evaluate(r);const x=js(s,m),S=Ei.interpolationFactor(this.interpolation,m,s[x],s[x+1]),C=h[x].evaluate(r),F=h[x+1].evaluate(r);switch(this.operator){case"interpolate":return Si[this.type.kind](C,F,S);case"interpolate-hcl":return Si.color(C,F,S,"hcl");case"interpolate-lab":return Si.color(C,F,S,"lab")}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Bs(o,r,s,h){const m=h-s,y=o-s;return m===0?0:r===1?y/m:(Math.pow(r,y)-1)/(Math.pow(r,m)-1)}class Ds{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const y=[];for(const S of r.slice(1)){const C=s.parse(S,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!C)return null;h=h||C.type,y.push(C)}if(!h)throw new Error("No output type");const x=m&&y.some(S=>Ie(m,S.type));return new Ds(x?Rt:h,y)}evaluate(r){let s,h=null,m=0;for(const y of this.args)if(m++,h=y.evaluate(r),h&&h instanceof Xn&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Fc(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Rc(o,r,s,h){return h.compare(r,s)===0}function Ea(o,r,s){const h=o!=="=="&&o!=="!=";return class Uk{constructor(y,x,S){this.type=It,this.lhs=y,this.rhs=x,this.collator=S,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const S=y[0];let C=x.parse(y[1],1,Rt);if(!C)return null;if(!Fc(S,C.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${oe(C.type)}'.`);let F=x.parse(y[2],2,Rt);if(!F)return null;if(!Fc(S,F.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${oe(F.type)}'.`);if(C.type.kind!==F.type.kind&&C.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${oe(C.type)}' and '${oe(F.type)}'.`);h&&(C.type.kind==="value"&&F.type.kind!=="value"?C=new Sn(F.type,[C]):C.type.kind!=="value"&&F.type.kind==="value"&&(F=new Sn(C.type,[F])));let G=null;if(y.length===4){if(C.type.kind!=="string"&&F.type.kind!=="string"&&C.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(G=x.parse(y[3],3,jn),!G)return null}return new Uk(C,F,G)}evaluate(y){const x=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const C=bn(x),F=bn(S);if(C.kind!==F.kind||C.kind!=="string"&&C.kind!=="number")throw new mn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${C.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const C=bn(x),F=bn(S);if(C.kind!=="string"||F.kind!=="string")return r(y,x,S)}return this.collator?s(y,x,S,this.collator.evaluate(y)):r(y,x,S)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const Il=Ea("==",function(o,r,s){return r===s},Rc),Cf=Ea("!=",function(o,r,s){return r!==s},function(o,r,s,h){return!Rc(0,r,s,h)}),kf=Ea("<",function(o,r,s){return r<s},function(o,r,s,h){return h.compare(r,s)<0}),jc=Ea(">",function(o,r,s){return r>s},function(o,r,s,h){return h.compare(r,s)>0}),zc=Ea("<=",function(o,r,s){return r<=s},function(o,r,s,h){return h.compare(r,s)<=0}),Lc=Ea(">=",function(o,r,s){return r>=s},function(o,r,s,h){return h.compare(r,s)>=0});class Cl{constructor(r,s,h){this.type=jn,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,It);if(!m)return null;const y=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,It);if(!y)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Et),!x)?null:new Cl(m,y,x)}evaluate(r){return new xl(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class kl{constructor(r,s,h,m,y){this.type=Et,this.number=r,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Ge);if(!h)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=s.parse(m.locale,1,Et),!y))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,Et),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=s.parse(m["min-fraction-digits"],1,Ge),!S))return null;let C=null;return m["max-fraction-digits"]&&(C=s.parse(m["max-fraction-digits"],1,Ge),!C)?null:new kl(h,y,x,S,C)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Ml{constructor(r){this.type=oi,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let y=!1;for(let x=1;x<=r.length-1;++x){const S=r[x];if(y&&typeof S=="object"&&!Array.isArray(S)){y=!1;let C=null;if(S["font-scale"]&&(C=s.parse(S["font-scale"],1,Ge),!C))return null;let F=null;if(S["text-font"]&&(F=s.parse(S["text-font"],1,se(Et)),!F))return null;let G=null;if(S["text-color"]&&(G=s.parse(S["text-color"],1,yr),!G))return null;const J=m[m.length-1];J.scale=C,J.font=F,J.textColor=G}else{const C=s.parse(r[x],1,Rt);if(!C)return null;const F=C.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:C,scale:null,font:null,textColor:null})}}return new Ml(m)}evaluate(r){return new In(this.sections.map(s=>{const h=s.content.evaluate(r);return bn(h)===Wn?new Tr("",h,null,null,null):new Tr(Eo(h),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}}class Ru{constructor(r){this.type=Wn,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Et);return h?new Ru(h):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),h=Xn.fromString(s);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(s)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class Ol{constructor(r){this.type=Ge,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=s.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${oe(h.type)} instead.`):new Ol(h):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new mn(`Expected value to be of type string or array, but found ${oe(bn(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const ho=8192;function ju(o,r){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(s*m*ho),Math.round(h*m*ho)]}function Ja(o,r){const s=Math.pow(2,r.z);return[(m=(o[0]/ho+r.x)/s,360*m-180),(h=(o[1]/ho+r.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,m}function Cr(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Ya(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Mf(o,r,s){const h=o[0]-r[0],m=o[1]-r[1],y=o[0]-s[0],x=o[1]-s[1];return h*x-y*m==0&&h*y<=0&&m*x<=0}function Qa(o,r,s,h){return(m=[h[0]-s[0],h[1]-s[1]])[0]*(y=[r[0]-o[0],r[1]-o[1]])[1]-m[1]*y[0]!=0&&!(!Dc(o,r,s,h)||!Dc(s,h,o,r));var m,y}function Of(o,r,s){for(const h of s)for(let m=0;m<h.length-1;++m)if(Qa(o,r,h[m],h[m+1]))return!0;return!1}function es(o,r,s=!1){let h=!1;for(const S of r)for(let C=0;C<S.length-1;C++){if(Mf(o,S[C],S[C+1]))return s;(y=S[C])[1]>(m=o)[1]!=(x=S[C+1])[1]>m[1]&&m[0]<(x[0]-y[0])*(m[1]-y[1])/(x[1]-y[1])+y[0]&&(h=!h)}var m,y,x;return h}function Ff(o,r){for(const s of r)if(es(o,s))return!0;return!1}function Bc(o,r){for(const s of o)if(!es(s,r))return!1;for(let s=0;s<o.length-1;++s)if(Of(o[s],o[s+1],r))return!1;return!0}function Rf(o,r){for(const s of r)if(Bc(o,s))return!0;return!1}function Dc(o,r,s,h){const m=h[0]-s[0],y=h[1]-s[1],x=(o[0]-s[0])*y-m*(o[1]-s[1]),S=(r[0]-s[0])*y-m*(r[1]-s[1]);return x>0&&S<0||x<0&&S>0}function Fl(o,r,s){const h=[];for(let m=0;m<o.length;m++){const y=[];for(let x=0;x<o[m].length;x++){const S=ju(o[m][x],s);Cr(r,S),y.push(S)}h.push(y)}return h}function Rl(o,r,s){const h=[];for(let m=0;m<o.length;m++){const y=Fl(o[m],r,s);h.push(y)}return h}function Nc(o,r,s,h){if(o[0]<s[0]||o[0]>s[2]){const m=.5*h;let y=o[0]-s[0]>m?-h:s[0]-o[0]>m?h:0;y===0&&(y=o[0]-s[2]>m?-h:s[2]-o[0]>m?h:0),o[0]+=y}Cr(r,o)}function $c(o,r,s,h){const m=Math.pow(2,h.z)*ho,y=[h.x*ho,h.y*ho],x=[];for(const S of o)for(const C of S){const F=[C.x+y[0],C.y+y[1]];Nc(F,r,s,m),x.push(F)}return x}function Uc(o,r,s,h){const m=Math.pow(2,h.z)*ho,y=[h.x*ho,h.y*ho],x=[];for(const C of o){const F=[];for(const G of C){const J=[G.x+y[0],G.y+y[1]];Cr(r,J),F.push(J)}x.push(F)}if(r[2]-r[0]<=m/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const C of x)for(const F of C)Nc(F,r,s,m)}var S;return x}class Ta{constructor(r,s){this.type=It,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(wi(r[1])){const h=r[1];if(h.type==="FeatureCollection"){const m=[];for(const y of h.features){const{type:x,coordinates:S}=y.geometry;x==="Polygon"&&m.push(S),x==="MultiPolygon"&&m.push(...S)}if(m.length)return new Ta(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ta(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Ta(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Fl(h.coordinates,y,x),C=$c(s.geometry(),m,y,x);if(!Ya(m,y))return!1;for(const F of C)if(!es(F,S))return!1}if(h.type==="MultiPolygon"){const S=Rl(h.coordinates,y,x),C=$c(s.geometry(),m,y,x);if(!Ya(m,y))return!1;for(const F of C)if(!Ff(F,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Fl(h.coordinates,y,x),C=Uc(s.geometry(),m,y,x);if(!Ya(m,y))return!1;for(const F of C)if(!Bc(F,S))return!1}if(h.type==="MultiPolygon"){const S=Rl(h.coordinates,y,x),C=Uc(s.geometry(),m,y,x);if(!Ya(m,y))return!1;for(const F of C)if(!Rf(F,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let zu=class{constructor(o=[],r=jf){if(this.data=o,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:r,compare:s}=this,h=r[o];for(;o>0;){const m=o-1>>1,y=r[m];if(s(h,y)>=0)break;r[o]=y,o=m}r[o]=h}_down(o){const{data:r,compare:s}=this,h=this.length>>1,m=r[o];for(;o<h;){let y=1+(o<<1),x=r[y];const S=y+1;if(S<this.length&&s(r[S],x)<0&&(y=S,x=r[S]),s(x,m)>=0)break;r[o]=x,o=y}r[o]=m}};function jf(o,r){return o<r?-1:o>r?1:0}function zf(o,r,s,h,m){Vc(o,r,s,h||o.length-1,m||jl)}function Vc(o,r,s,h,m){for(;h>s;){if(h-s>600){var y=h-s+1,x=r-s+1,S=Math.log(y),C=.5*Math.exp(2*S/3),F=.5*Math.sqrt(S*C*(y-C)/y)*(x-y/2<0?-1:1);Vc(o,r,Math.max(s,Math.floor(r-x*C/y+F)),Math.min(h,Math.floor(r+(y-x)*C/y+F)),m)}var G=o[r],J=s,ne=h;for(Ns(o,s,r),m(o[h],G)>0&&Ns(o,s,h);J<ne;){for(Ns(o,J,ne),J++,ne--;m(o[J],G)<0;)J++;for(;m(o[ne],G)>0;)ne--}m(o[s],G)===0?Ns(o,s,ne):Ns(o,++ne,h),ne<=r&&(s=ne+1),r<=ne&&(h=ne-1)}}function Ns(o,r,s){var h=o[r];o[r]=o[s],o[s]=h}function jl(o,r){return o<r?-1:o>r?1:0}function zl(o,r){if(o.length<=1)return[o];const s=[];let h,m;for(const y of o){const x=Gc(y);x!==0&&(y.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(h&&s.push(h),h=[y]):h.push(y))}if(h&&s.push(h),r>1)for(let y=0;y<s.length;y++)s[y].length<=r||(zf(s[y],r,1,s[y].length-1,ts),s[y]=s[y].slice(0,r));return s}function ts(o,r){return r.area-o.area}function Gc(o){let r=0;for(let s,h,m=0,y=o.length,x=y-1;m<y;x=m++)s=o[m],h=o[x],r+=(h.x-s.x)*(s.y+h.y);return r}const Yi=1/298.257223563,Wc=Yi*(2-Yi),Hc=Math.PI/180;class Lu{constructor(r){const s=6378.137*Hc*1e3,h=Math.cos(r*Hc),m=1/(1-Wc*(1-h*h)),y=Math.sqrt(m);this.kx=s*y*h,this.ky=s*y*m*(1-Wc)}distance(r,s){const h=this.wrap(r[0]-s[0])*this.kx,m=(r[1]-s[1])*this.ky;return Math.sqrt(h*h+m*m)}pointOnLine(r,s){let h,m,y,x,S=1/0;for(let C=0;C<r.length-1;C++){let F=r[C][0],G=r[C][1],J=this.wrap(r[C+1][0]-F)*this.kx,ne=(r[C+1][1]-G)*this.ky,ce=0;J===0&&ne===0||(ce=(this.wrap(s[0]-F)*this.kx*J+(s[1]-G)*this.ky*ne)/(J*J+ne*ne),ce>1?(F=r[C+1][0],G=r[C+1][1]):ce>0&&(F+=J/this.kx*ce,G+=ne/this.ky*ce)),J=this.wrap(s[0]-F)*this.kx,ne=(s[1]-G)*this.ky;const me=J*J+ne*ne;me<S&&(S=me,h=F,m=G,y=C,x=ce)}return{point:[h,m],index:y,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Zc(o,r){return r[0]-o[0]}function rs(o){return o[1]-o[0]+1}function To(o,r){return o[1]>=o[0]&&o[1]<r}function na(o,r){if(o[0]>o[1])return[null,null];const s=rs(o);if(r){if(s===2)return[o,null];const m=Math.floor(s/2);return[[o[0],o[0]+m],[o[0]+m,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function Bu(o,r){if(!To(r,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=r[0];h<=r[1];++h)Cr(s,o[h]);return s}function Du(o){const r=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)Cr(r,h);return r}function $s(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Ll(o,r,s){if(!$s(o)||!$s(r))return NaN;let h=0,m=0;return o[2]<r[0]&&(h=r[0]-o[2]),o[0]>r[2]&&(h=o[0]-r[2]),o[1]>r[3]&&(m=o[1]-r[3]),o[3]<r[1]&&(m=r[1]-o[3]),s.distance([0,0],[h,m])}function Wr(o,r,s){const h=s.pointOnLine(r,o);return s.distance(o,h.point)}function Nu(o,r,s,h,m){const y=Math.min(Wr(o,[s,h],m),Wr(r,[s,h],m)),x=Math.min(Wr(s,[o,r],m),Wr(h,[o,r],m));return Math.min(y,x)}function br(o,r,s,h,m){if(!To(r,o.length)||!To(h,s.length))return 1/0;let y=1/0;for(let x=r[0];x<r[1];++x){const S=o[x],C=o[x+1];for(let F=h[0];F<h[1];++F){const G=s[F],J=s[F+1];if(Qa(S,C,G,J))return 0;y=Math.min(y,Nu(S,C,G,J,m))}}return y}function ns(o,r,s,h,m){if(!To(r,o.length)||!To(h,s.length))return NaN;let y=1/0;for(let x=r[0];x<=r[1];++x)for(let S=h[0];S<=h[1];++S)if(y=Math.min(y,m.distance(o[x],s[S])),y===0)return y;return y}function Br(o,r,s){if(es(o,r,!0))return 0;let h=1/0;for(const m of r){const y=m[0],x=m[m.length-1];if(y!==x&&(h=Math.min(h,Wr(o,[x,y],s)),h===0))return h;const S=s.pointOnLine(m,o);if(h=Math.min(h,s.distance(o,S.point)),h===0)return h}return h}function Kr(o,r,s,h){if(!To(r,o.length))return NaN;for(let y=r[0];y<=r[1];++y)if(es(o[y],s,!0))return 0;let m=1/0;for(let y=r[0];y<r[1];++y){const x=o[y],S=o[y+1];for(const C of s)for(let F=0,G=C.length,J=G-1;F<G;J=F++){const ne=C[J],ce=C[F];if(Qa(x,S,ne,ce))return 0;m=Math.min(m,Nu(x,S,ne,ce,h))}}return m}function is(o,r){for(const s of o)for(const h of s)if(es(h,r,!0))return!0;return!1}function Us(o,r,s,h=1/0){const m=Du(o),y=Du(r);if(h!==1/0&&Ll(m,y,s)>=h)return h;if(Ya(m,y)){if(is(o,r))return 0}else if(is(r,o))return 0;let x=1/0;for(const S of o)for(let C=0,F=S.length,G=F-1;C<F;G=C++){const J=S[G],ne=S[C];for(const ce of r)for(let me=0,Te=ce.length,Re=Te-1;me<Te;Re=me++){const Ne=ce[Re],Qe=ce[me];if(Qa(J,ne,Ne,Qe))return 0;x=Math.min(x,Nu(J,ne,Ne,Qe,s))}}return x}function $u(o,r,s,h,m,y){if(!y)return;const x=Ll(Bu(h,y),m,s);x<r&&o.push([x,y,[0,0]])}function Po(o,r,s,h,m,y,x){if(!y||!x)return;const S=Ll(Bu(h,y),Bu(m,x),s);S<r&&o.push([S,y,x])}function Ao(o,r,s,h,m=1/0){let y=Math.min(h.distance(o[0],s[0][0]),m);if(y===0)return y;const x=new zu([[0,[0,o.length-1],[0,0]]],Zc),S=Du(s);for(;x.length>0;){const C=x.pop();if(C[0]>=y)continue;const F=C[1],G=r?50:100;if(rs(F)<=G){if(!To(F,o.length))return NaN;if(r){const J=Kr(o,F,s,h);if(isNaN(J)||J===0)return J;y=Math.min(y,J)}else for(let J=F[0];J<=F[1];++J){const ne=Br(o[J],s,h);if(y=Math.min(y,ne),y===0)return 0}}else{const J=na(F,r);$u(x,y,h,o,S,J[0]),$u(x,y,h,o,S,J[1])}}return y}function zn(o,r,s,h,m,y=1/0){let x=Math.min(y,m.distance(o[0],s[0]));if(x===0)return x;const S=new zu([[0,[0,o.length-1],[0,s.length-1]]],Zc);for(;S.length>0;){const C=S.pop();if(C[0]>=x)continue;const F=C[1],G=C[2],J=r?50:100,ne=h?50:100;if(rs(F)<=J&&rs(G)<=ne){if(!To(F,o.length)&&To(G,s.length))return NaN;let ce;if(r&&h)ce=br(o,F,s,G,m),x=Math.min(x,ce);else if(r&&!h){const me=o.slice(F[0],F[1]+1);for(let Te=G[0];Te<=G[1];++Te)if(ce=Wr(s[Te],me,m),x=Math.min(x,ce),x===0)return x}else if(!r&&h){const me=s.slice(G[0],G[1]+1);for(let Te=F[0];Te<=F[1];++Te)if(ce=Wr(o[Te],me,m),x=Math.min(x,ce),x===0)return x}else ce=ns(o,F,s,G,m),x=Math.min(x,ce)}else{const ce=na(F,r),me=na(G,h);Po(S,x,m,o,s,ce[0],me[0]),Po(S,x,m,o,s,ce[0],me[1]),Po(S,x,m,o,s,ce[1],me[0]),Po(S,x,m,o,s,ce[1],me[1])}}return x}function Io(o){return o.type==="MultiPolygon"?o.coordinates.map(r=>({type:"Polygon",coordinates:r})):o.type==="MultiLineString"?o.coordinates.map(r=>({type:"LineString",coordinates:r})):o.type==="MultiPoint"?o.coordinates.map(r=>({type:"Point",coordinates:r})):[o]}class fo{constructor(r,s){this.type=Ge,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(wi(r[1])){const h=r[1];if(h.type==="FeatureCollection")return new fo(h,h.features.map(m=>Io(m.geometry)).flat());if(h.type==="Feature")return new fo(h,Io(h.geometry));if("type"in h&&"coordinates"in h)return new fo(h,Io(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=s.geometry(),y=m.flat().map(C=>Ja([C.x,C.y],s.canonical));if(m.length===0)return NaN;const x=new Lu(y[0][1]);let S=1/0;for(const C of h){switch(C.type){case"Point":S=Math.min(S,zn(y,!1,[C.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,zn(y,!1,C.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Ao(y,!1,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=s.geometry(),y=m.flat().map(C=>Ja([C.x,C.y],s.canonical));if(m.length===0)return NaN;const x=new Lu(y[0][1]);let S=1/0;for(const C of h){switch(C.type){case"Point":S=Math.min(S,zn(y,!0,[C.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,zn(y,!0,C.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Ao(y,!0,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="Polygon")return function(s,h){const m=s.geometry();if(m.length===0||m[0].length===0)return NaN;const y=zl(m,0).map(C=>C.map(F=>F.map(G=>Ja([G.x,G.y],s.canonical)))),x=new Lu(y[0][0][0][1]);let S=1/0;for(const C of h)for(const F of y){switch(C.type){case"Point":S=Math.min(S,Ao([C.coordinates],!1,F,x,S));break;case"LineString":S=Math.min(S,Ao(C.coordinates,!0,F,x,S));break;case"Polygon":S=Math.min(S,Us(F,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Co={"==":Il,"!=":Cf,">":jc,"<":kf,">=":Lc,"<=":zc,array:Sn,at:Ou,boolean:Sn,case:Pl,coalesce:Ds,collator:Cl,format:Ml,image:Ru,in:Qn,"index-of":El,interpolate:Ei,"interpolate-hcl":Ei,"interpolate-lab":Ei,length:Ol,let:Ir,literal:ba,match:Tl,number:Sn,"number-format":kl,object:Sn,slice:Al,step:Sa,string:Sn,"to-boolean":ta,"to-color":ta,"to-number":ta,"to-string":ta,var:Sl,within:Ta,distance:fo};class Ti{constructor(r,s,h,m){this.name=r,this.type=s,this._evaluate=h,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const h=r[0],m=Ti.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([F])=>!Array.isArray(F)||F.length===r.length-1);let C=null;for(const[F,G]of S){C=new ra(s.registry,Vs,s.path,null,s.scope);const J=[];let ne=!1;for(let ce=1;ce<r.length;ce++){const me=r[ce],Te=Array.isArray(F)?F[ce-1]:F.type,Re=C.parse(me,1+J.length,Te);if(!Re){ne=!0;break}J.push(Re)}if(!ne)if(Array.isArray(F)&&F.length!==J.length)C.error(`Expected ${F.length} arguments, but found ${J.length} instead.`);else{for(let ce=0;ce<J.length;ce++){const me=Array.isArray(F)?F[ce]:F.type,Te=J[ce];C.concat(ce+1).checkSubtype(me,Te.type)}if(C.errors.length===0)return new Ti(h,y,G,J)}}if(S.length===1)s.errors.push(...C.errors);else{const F=(S.length?S:x).map(([J])=>{return ne=J,Array.isArray(ne)?`(${ne.map(oe).join(", ")})`:`(${oe(ne.type)}...)`;var ne}).join(" | "),G=[];for(let J=1;J<r.length;J++){const ne=s.parse(r[J],1+G.length);if(!ne)return null;G.push(oe(ne.type))}s.error(`Expected arguments of type ${F}, but found (${G.join(", ")}) instead.`)}return null}static register(r,s){Ti.definitions=s;for(const h in s)r[h]=Ti}}function os(o,[r,s,h,m]){r=r.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const y=m?m.evaluate(o):1,x=wl(r,s,h,y);if(x)throw new mn(x);return new Mr(r/255,s/255,h/255,y,!1)}function Pa(o,r){return o in r}function Pi(o,r){const s=r[o];return s===void 0?null:s}function zi(o){return{type:o}}function Vs(o){if(o instanceof Sl)return Vs(o.boundExpression);if(o instanceof Ti&&o.name==="error"||o instanceof Cl||o instanceof Ta||o instanceof fo)return!1;const r=o instanceof ta||o instanceof Sn;let s=!0;return o.eachChild(h=>{s=r?s&&Vs(h):s&&h instanceof ba}),!!s&&Aa(o)&&Gs(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Aa(o){if(o instanceof Ti&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Ta||o instanceof fo)return!1;let r=!0;return o.eachChild(s=>{r&&!Aa(s)&&(r=!1)}),r}function ia(o){if(o instanceof Ti&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(s=>{r&&!ia(s)&&(r=!1)}),r}function Gs(o,r){if(o instanceof Ti&&r.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!Gs(h,r)&&(s=!1)}),s}function Uu(o){return{result:"success",value:o}}function Ia(o){return{result:"error",value:o}}function oa(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function po(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ca(o){return!!o.expression&&o.expression.interpolated}function Or(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function as(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Bl(o){return o}function Vu(o,r){const s=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),y=o.type||(Ca(r)?"exponential":"interval");if(s||r.type==="padding"){const G=s?Mr.parse:_i.parse;(o=U({},o)).stops&&(o.stops=o.stops.map(J=>[J[0],G(J[1])])),o.default=G(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,C,F;if(y==="exponential")S=ve;else if(y==="interval")S=H;else if(y==="categorical"){S=Ws,C=Object.create(null);for(const G of o.stops)C[G[0]]=G[1];F=typeof o.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);S=Ue}if(h){const G={},J=[];for(let me=0;me<o.stops.length;me++){const Te=o.stops[me],Re=Te[0].zoom;G[Re]===void 0&&(G[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},J.push(Re)),G[Re].stops.push([Te[0].value,Te[1]])}const ne=[];for(const me of J)ne.push([G[me].zoom,Vu(G[me],r)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:Ei.interpolationFactor.bind(void 0,ce),zoomStops:ne.map(me=>me[0]),evaluate:({zoom:me},Te)=>ve({stops:ne,base:o.base},r,me).evaluate(me,Te)}}if(m){const G=y==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:G,interpolationFactor:Ei.interpolationFactor.bind(void 0,G),zoomStops:o.stops.map(J=>J[0]),evaluate:({zoom:J})=>S(o,r,J,C,F)}}return{kind:"source",evaluate(G,J){const ne=J&&J.properties?J.properties[o.property]:void 0;return ne===void 0?aa(o.default,r.default):S(o,r,ne,C,F)}}}function aa(o,r,s){return o!==void 0?o:r!==void 0?r:s!==void 0?s:void 0}function Ws(o,r,s,h,m){return aa(typeof s===m?h[s]:void 0,o.default,r.default)}function H(o,r,s){if(Or(s)!=="number")return aa(o.default,r.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const m=js(o.stops.map(y=>y[0]),s);return o.stops[m][1]}function ve(o,r,s){const h=o.base!==void 0?o.base:1;if(Or(s)!=="number")return aa(o.default,r.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const y=js(o.stops.map(G=>G[0]),s),x=function(G,J,ne,ce){const me=ce-ne,Te=G-ne;return me===0?0:J===1?Te/me:(Math.pow(J,Te)-1)/(Math.pow(J,me)-1)}(s,h,o.stops[y][0],o.stops[y+1][0]),S=o.stops[y][1],C=o.stops[y+1][1],F=Si[r.type]||Bl;return typeof S.evaluate=="function"?{evaluate(...G){const J=S.evaluate.apply(void 0,G),ne=C.evaluate.apply(void 0,G);if(J!==void 0&&ne!==void 0)return F(J,ne,x,o.colorSpace)}}:F(S,C,x,o.colorSpace)}function Ue(o,r,s){switch(r.type){case"color":s=Mr.parse(s);break;case"formatted":s=In.fromString(s.toString());break;case"resolvedImage":s=Xn.fromString(s.toString());break;case"padding":s=_i.parse(s);break;default:Or(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return aa(s,o.default,r.default)}Ti.register(Co,{error:[{kind:"error"},[Et],(o,[r])=>{throw new mn(r.evaluate(o))}],typeof:[Et,[Rt],(o,[r])=>oe(bn(r.evaluate(o)))],"to-rgba":[se(Ge,4),[yr],(o,[r])=>{const[s,h,m,y]=r.evaluate(o).rgb;return[255*s,255*h,255*m,y]}],rgb:[yr,[Ge,Ge,Ge],os],rgba:[yr,[Ge,Ge,Ge,Ge],os],has:{type:It,overloads:[[[Et],(o,[r])=>Pa(r.evaluate(o),o.properties())],[[Et,Sr],(o,[r,s])=>Pa(r.evaluate(o),s.evaluate(o))]]},get:{type:Rt,overloads:[[[Et],(o,[r])=>Pi(r.evaluate(o),o.properties())],[[Et,Sr],(o,[r,s])=>Pi(r.evaluate(o),s.evaluate(o))]]},"feature-state":[Rt,[Et],(o,[r])=>Pi(r.evaluate(o),o.featureState||{})],properties:[Sr,[],o=>o.properties()],"geometry-type":[Et,[],o=>o.geometryType()],id:[Rt,[],o=>o.id()],zoom:[Ge,[],o=>o.globals.zoom],"heatmap-density":[Ge,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ge,[],o=>o.globals.lineProgress||0],accumulated:[Rt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ge,zi(Ge),(o,r)=>{let s=0;for(const h of r)s+=h.evaluate(o);return s}],"*":[Ge,zi(Ge),(o,r)=>{let s=1;for(const h of r)s*=h.evaluate(o);return s}],"-":{type:Ge,overloads:[[[Ge,Ge],(o,[r,s])=>r.evaluate(o)-s.evaluate(o)],[[Ge],(o,[r])=>-r.evaluate(o)]]},"/":[Ge,[Ge,Ge],(o,[r,s])=>r.evaluate(o)/s.evaluate(o)],"%":[Ge,[Ge,Ge],(o,[r,s])=>r.evaluate(o)%s.evaluate(o)],ln2:[Ge,[],()=>Math.LN2],pi:[Ge,[],()=>Math.PI],e:[Ge,[],()=>Math.E],"^":[Ge,[Ge,Ge],(o,[r,s])=>Math.pow(r.evaluate(o),s.evaluate(o))],sqrt:[Ge,[Ge],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ge,[Ge],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ge,[Ge],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ge,[Ge],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ge,[Ge],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ge,[Ge],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ge,[Ge],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ge,zi(Ge),(o,r)=>Math.min(...r.map(s=>s.evaluate(o)))],max:[Ge,zi(Ge),(o,r)=>Math.max(...r.map(s=>s.evaluate(o)))],abs:[Ge,[Ge],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ge,[Ge],(o,[r])=>{const s=r.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ge,[Ge],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ge,[Ge],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[It,[Et,Rt],(o,[r,s])=>o.properties()[r.value]===s.value],"filter-id-==":[It,[Rt],(o,[r])=>o.id()===r.value],"filter-type-==":[It,[Et],(o,[r])=>o.geometryType()===r.value],"filter-<":[It,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[It,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<h}],"filter->":[It,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[It,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>h}],"filter-<=":[It,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[It,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<=h}],"filter->=":[It,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[It,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>=h}],"filter-has":[It,[Rt],(o,[r])=>r.value in o.properties()],"filter-has-id":[It,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[It,[se(Et)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[It,[se(Rt)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[It,[Et,se(Rt)],(o,[r,s])=>s.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[It,[Et,se(Rt)],(o,[r,s])=>function(h,m,y,x){for(;y<=x;){const S=y+x>>1;if(m[S]===h)return!0;m[S]>h?x=S-1:y=S+1}return!1}(o.properties()[r.value],s.value,0,s.value.length-1)],all:{type:It,overloads:[[[It,It],(o,[r,s])=>r.evaluate(o)&&s.evaluate(o)],[zi(It),(o,r)=>{for(const s of r)if(!s.evaluate(o))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(o,[r,s])=>r.evaluate(o)||s.evaluate(o)],[zi(It),(o,r)=>{for(const s of r)if(s.evaluate(o))return!0;return!1}]]},"!":[It,[It],(o,[r])=>!r.evaluate(o)],"is-supported-script":[It,[Et],(o,[r])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(r.evaluate(o))}],upcase:[Et,[Et],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Et,[Et],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Et,zi(Rt),(o,r)=>r.map(s=>Eo(s.evaluate(o))).join("")],"resolved-locale":[Et,[jn],(o,[r])=>r.evaluate(o).resolvedLocale()]});class ut{constructor(r,s){var h;this.expression=r,this._warningHistory={},this._evaluator=new Rs,this._defaultValue=s?(h=s).type==="color"&&as(h.default)?new Mr(0,0,0,0):h.type==="color"?Mr.parse(h.default)||null:h.type==="padding"?_i.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?xi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,s,h,m,y,x){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new mn(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Mt(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Co}function St(o,r){const s=new ra(Co,Vs,[],r?function(m){const y={color:yr,string:Et,number:Ge,enum:Et,boolean:It,formatted:oi,padding:ji,resolvedImage:Wn,variableAnchorOffsetCollection:Oe};return m.type==="array"?se(y[m.value]||Rt,m.length):y[m.type]}(r):void 0),h=s.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Uu(new ut(h,r)):Ia(s.errors)}class Zt{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!ia(s.expression)}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,y,x)}evaluate(r,s,h,m,y,x){return this._styleExpression.evaluate(r,s,h,m,y,x)}}class Jt{constructor(r,s,h,m){this.kind=r,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!ia(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,y,x)}evaluate(r,s,h,m,y,x){return this._styleExpression.evaluate(r,s,h,m,y,x)}interpolationFactor(r,s,h){return this.interpolationType?Ei.interpolationFactor(this.interpolationType,r,s,h):0}}function vr(o,r){const s=St(o,r);if(s.result==="error")return s;const h=s.value.expression,m=Aa(h);if(!m&&!oa(r))return Ia([new Ee("","data expressions not supported")]);const y=Gs(h,["zoom"]);if(!y&&!po(r))return Ia([new Ee("","zoom expressions not supported")]);const x=Fr(h);return x||y?x instanceof Ee?Ia([x]):x instanceof Ei&&!Ca(r)?Ia([new Ee("",'"interpolate" expressions cannot be used with this property')]):Uu(x?new Jt(m?"camera":"composite",s.value,x.labels,x instanceof Ei?x.interpolation:void 0):new Zt(m?"constant":"source",s.value)):Ia([new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dr{constructor(r,s){this._parameters=r,this._specification=s,U(this,Vu(this._parameters,this._specification))}static deserialize(r){return new Dr(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Fr(o){let r=null;if(o instanceof Ir)r=Fr(o.result);else if(o instanceof Ds){for(const s of o.args)if(r=Fr(s),r)break}else(o instanceof Sa||o instanceof Ei)&&o.input instanceof Ti&&o.input.name==="zoom"&&(r=o);return r instanceof Ee||o.eachChild(s=>{const h=Fr(s);h instanceof Ee?r=h:!r&&h?r=new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Ee("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Hr(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Hr(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const an={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ur(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Hr(o)||(o=Li(o));const r=St(o,an);if(r.result==="error")throw new Error(r.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>r.value.evaluate(s,h,{},m),needGeometry:mo(o)}}function gn(o,r){return o<r?-1:o>r?1:0}function mo(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let r=1;r<o.length;r++)if(mo(o[r]))return!0;return!1}function Li(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?ko(o[1],o[2],"=="):r==="!="?Mo(ko(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?ko(o[1],o[2],r):r==="any"?(s=o.slice(1),["any"].concat(s.map(Li))):r==="all"?["all"].concat(o.slice(1).map(Li)):r==="none"?["all"].concat(o.slice(1).map(Li).map(Mo)):r==="in"?ka(o[1],o.slice(2)):r==="!in"?Mo(ka(o[1],o.slice(2))):r==="has"?ss(o[1]):r!=="!has"||Mo(ss(o[1]));var s}function ko(o,r,s){switch(o){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,o,r]}}function ka(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",o,["literal",r.sort(gn)]]:["filter-in-small",o,["literal",r]]}}function ss(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Mo(o){return["!",o]}function Lf(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const y of o)m+=`${Lf(y)},`;return`${m}]`}const s=Object.keys(o).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${Lf(o[s[m]])},`;return`${h}}`}function Bf(o){let r="";for(const s of _r)r+=`/${Lf(o[s])}`;return r}function om(o){const r=o.value;return r?[new M(o.key,r,"constants have been deprecated as of v8")]:[]}function sn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Hs(o){if(Array.isArray(o))return o.map(Hs);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const s in o)r[s]=Hs(o[s]);return r}return sn(o)}function Bi(o){const r=o.key,s=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},y=o.style,x=o.styleSpec,S=o.validateSpec;let C=[];const F=Or(s);if(F!=="object")return[new M(r,s,`object expected, ${F} found`)];for(const G in s){const J=G.split(".")[0],ne=h[J]||h["*"];let ce;if(m[J])ce=m[J];else if(h[J])ce=S;else if(m["*"])ce=m["*"];else{if(!h["*"]){C.push(new M(r,s[G],`unknown property "${G}"`));continue}ce=S}C=C.concat(ce({key:(r&&`${r}.`)+G,value:s[G],valueSpec:ne,style:y,styleSpec:x,object:s,objectKey:G,validateSpec:S},s))}for(const G in h)m[G]||h[G].required&&h[G].default===void 0&&s[G]===void 0&&C.push(new M(r,s,`missing required property "${G}"`));return C}function Xc(o){const r=o.value,s=o.valueSpec,h=o.style,m=o.styleSpec,y=o.key,x=o.arrayElementValidator||o.validateSpec;if(Or(r)!=="array")return[new M(y,r,`array expected, ${Or(r)} found`)];if(s.length&&r.length!==s.length)return[new M(y,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new M(y,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),Or(s.value)==="object"&&(S=s.value);let C=[];for(let F=0;F<r.length;F++)C=C.concat(x({array:r,arrayIndex:F,value:r[F],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${y}[${F}]`}));return C}function Gu(o){const r=o.key,s=o.value,h=o.valueSpec;let m=Or(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new M(r,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new M(r,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new M(r,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Df(o){const r=o.valueSpec,s=sn(o.value.type);let h,m,y,x={};const S=s!=="categorical"&&o.value.property===void 0,C=!S,F=Or(o.value.stops)==="array"&&Or(o.value.stops[0])==="array"&&Or(o.value.stops[0][0])==="object",G=Bi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ce){if(s==="identity")return[new M(ce.key,ce.value,'identity function may not have a "stops" property')];let me=[];const Te=ce.value;return me=me.concat(Xc({key:ce.key,value:Te,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:J})),Or(Te)==="array"&&Te.length===0&&me.push(new M(ce.key,Te,"array must have at least one stop")),me},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:r,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return s==="identity"&&S&&G.push(new M(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||G.push(new M(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Ca(o.valueSpec)&&G.push(new M(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(C&&!oa(o.valueSpec)?G.push(new M(o.key,o.value,"property functions not supported")):S&&!po(o.valueSpec)&&G.push(new M(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||G.push(new M(o.key,o.value,'"property" property is required')),G;function J(ce){let me=[];const Te=ce.value,Re=ce.key;if(Or(Te)!=="array")return[new M(Re,Te,`array expected, ${Or(Te)} found`)];if(Te.length!==2)return[new M(Re,Te,`array length 2 expected, length ${Te.length} found`)];if(F){if(Or(Te[0])!=="object")return[new M(Re,Te,`object expected, ${Or(Te[0])} found`)];if(Te[0].zoom===void 0)return[new M(Re,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new M(Re,Te,"object stop key must have value")];if(y&&y>sn(Te[0].zoom))return[new M(Re,Te[0].zoom,"stop zoom values must appear in ascending order")];sn(Te[0].zoom)!==y&&(y=sn(Te[0].zoom),m=void 0,x={}),me=me.concat(Bi({key:`${Re}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Gu,value:ne}}))}else me=me.concat(ne({key:`${Re}[0]`,value:Te[0],valueSpec:{},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},Te));return Mt(Hs(Te[1]))?me.concat([new M(`${Re}[1]`,Te[1],"expressions are not allowed in function stops.")]):me.concat(ce.validateSpec({key:`${Re}[1]`,value:Te[1],valueSpec:r,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function ne(ce,me){const Te=Or(ce.value),Re=sn(ce.value),Ne=ce.value!==null?ce.value:me;if(h){if(Te!==h)return[new M(ce.key,Ne,`${Te} stop domain type must match previous stop domain type ${h}`)]}else h=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new M(ce.key,Ne,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&s!=="categorical"){let Qe=`number expected, ${Te} found`;return oa(r)&&s===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new M(ce.key,Ne,Qe)]}return s!=="categorical"||Te!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&Te==="number"&&m!==void 0&&Re<m?[new M(ce.key,Ne,"stop domain values must appear in ascending order")]:(m=Re,s==="categorical"&&Re in x?[new M(ce.key,Ne,"stop domain values must be unique")]:(x[Re]=!0,[])):[new M(ce.key,Ne,`integer expected, found ${Re}`)]}}function Zs(o){const r=(o.expressionContext==="property"?vr:St)(Hs(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new M(`${o.key}${h.key}`,o.value,h.message));const s=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new M(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ia(s))return[new M(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ia(s))return[new M(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Gs(s,["zoom","feature-state"]))return[new M(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Aa(s))return[new M(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wu(o){const r=o.key,s=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(sn(s))===-1&&m.push(new M(r,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(sn(s))===-1&&m.push(new M(r,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function Hu(o){return Hr(Hs(o.value))?Zs(U({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zu(o)}function Zu(o){const r=o.value,s=o.key;if(Or(r)!=="array")return[new M(s,r,`array expected, ${Or(r)} found`)];const h=o.styleSpec;let m,y=[];if(r.length<1)return[new M(s,r,"filter array must have at least 1 element")];switch(y=y.concat(Wu({key:`${s}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),sn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&sn(r[1])==="$type"&&y.push(new M(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&y.push(new M(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=Or(r[1]),m!=="string"&&y.push(new M(`${s}[1]`,r[1],`string expected, ${m} found`)));for(let x=2;x<r.length;x++)m=Or(r[x]),sn(r[1])==="$type"?y=y.concat(Wu({key:`${s}[${x}]`,value:r[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new M(`${s}[${x}]`,r[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)y=y.concat(Zu({key:`${s}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=Or(r[1]),r.length!==2?y.push(new M(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new M(`${s}[1]`,r[1],`string expected, ${m} found`))}return y}function Nf(o,r){const s=o.key,h=o.validateSpec,m=o.style,y=o.styleSpec,x=o.value,S=o.objectKey,C=y[`${r}_${o.layerType}`];if(!C)return[];const F=S.match(/^(.*)-transition$/);if(r==="paint"&&F&&C[F[1]]&&C[F[1]].transition)return h({key:s,value:x,valueSpec:y.transition,style:m,styleSpec:y});const G=o.valueSpec||C[S];if(!G)return[new M(s,x,`unknown property "${S}"`)];let J;if(Or(x)==="string"&&oa(G)&&!G.tokens&&(J=/^{([^}]+)}$/.exec(x)))return[new M(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const ne=[];return o.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&ne.push(new M(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&as(Hs(x))&&sn(x.type)==="identity"&&ne.push(new M(s,x,'"text-font" does not support identity functions'))),ne.concat(h({key:o.key,value:x,valueSpec:G,style:m,styleSpec:y,expressionContext:"property",propertyType:r,propertyKey:S}))}function $f(o){return Nf(o,"paint")}function Uf(o){return Nf(o,"layout")}function Vf(o){let r=[];const s=o.value,h=o.key,m=o.style,y=o.styleSpec;s.type||s.ref||r.push(new M(h,s,'either "type" or "ref" is required'));let x=sn(s.type);const S=sn(s.ref);if(s.id){const C=sn(s.id);for(let F=0;F<o.arrayIndex;F++){const G=m.layers[F];sn(G.id)===C&&r.push(new M(h,s.id,`duplicate layer id "${s.id}", previously used at line ${G.id.__line__}`))}}if("ref"in s){let C;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&r.push(new M(h,s[F],`"${F}" is prohibited for ref layers`))}),m.layers.forEach(F=>{sn(F.id)===S&&(C=F)}),C?C.ref?r.push(new M(h,s.ref,"ref cannot reference another ref layer")):x=sn(C.type):r.push(new M(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const C=m.sources&&m.sources[s.source],F=C&&sn(C.type);C?F==="vector"&&x==="raster"?r.push(new M(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?r.push(new M(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?r.push(new M(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?r.push(new M(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&C.lineMetrics||r.push(new M(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new M(h,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new M(h,s.source,`source "${s.source}" not found`))}else r.push(new M(h,s,'missing required property "source"'));return r=r.concat(Bi({key:h,value:s,valueSpec:y.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:y.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Hu,layout:C=>Bi({layer:s,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":F=>Uf(U({layerType:x},F))}}),paint:C=>Bi({layer:s,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":F=>$f(U({layerType:x},F))}})}})),r}function Ma(o){const r=o.value,s=o.key,h=Or(r);return h!=="string"?[new M(s,r,`string expected, ${h} found`)]:[]}const Gf={promoteId:function({key:o,value:r}){if(Or(r)==="string")return Ma({key:o,value:r});{const s=[];for(const h in r)s.push(...Ma({key:`${o}.${h}`,value:r[h]}));return s}}};function am(o){const r=o.value,s=o.key,h=o.styleSpec,m=o.style,y=o.validateSpec;if(!r.type)return[new M(s,r,'"type" is required')];const x=sn(r.type);let S;switch(x){case"vector":case"raster":return S=Bi({key:s,value:r,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Gf,validateSpec:y}),S;case"raster-dem":return S=function(C){var F;const G=(F=C.sourceName)!==null&&F!==void 0?F:"",J=C.value,ne=C.styleSpec,ce=ne.source_raster_dem,me=C.style;let Te=[];const Re=Or(J);if(J===void 0)return Te;if(Re!=="object")return Te.push(new M("source_raster_dem",J,`object expected, ${Re} found`)),Te;const Ne=sn(J.encoding)==="custom",Qe=["redFactor","greenFactor","blueFactor","baseShift"],Ze=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const Ye in J)!Ne&&Qe.includes(Ye)?Te.push(new M(Ye,J[Ye],`In "${G}": "${Ye}" is only valid when "encoding" is set to "custom". ${Ze} encoding found`)):ce[Ye]?Te=Te.concat(C.validateSpec({key:Ye,value:J[Ye],valueSpec:ce[Ye],validateSpec:C.validateSpec,style:me,styleSpec:ne})):Te.push(new M(Ye,J[Ye],`unknown property "${Ye}"`));return Te}({sourceName:s,value:r,style:o.style,styleSpec:h,validateSpec:y}),S;case"geojson":if(S=Bi({key:s,value:r,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:y,objectElementValidators:Gf}),r.cluster)for(const C in r.clusterProperties){const[F,G]=r.clusterProperties[C],J=typeof F=="string"?[F,["accumulated"],["get",C]]:F;S.push(...Zs({key:`${s}.${C}.map`,value:G,validateSpec:y,expressionContext:"cluster-map"})),S.push(...Zs({key:`${s}.${C}.reduce`,value:J,validateSpec:y,expressionContext:"cluster-reduce"}))}return S;case"video":return Bi({key:s,value:r,valueSpec:h.source_video,style:m,validateSpec:y,styleSpec:h});case"image":return Bi({key:s,value:r,valueSpec:h.source_image,style:m,validateSpec:y,styleSpec:h});case"canvas":return[new M(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Wu({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:y,styleSpec:h})}}function Wf(o){const r=o.value,s=o.styleSpec,h=s.light,m=o.style;let y=[];const x=Or(r);if(r===void 0)return y;if(x!=="object")return y=y.concat([new M("light",r,`object expected, ${x} found`)]),y;for(const S in r){const C=S.match(/^(.*)-transition$/);y=y.concat(C&&h[C[1]]&&h[C[1]].transition?o.validateSpec({key:S,value:r[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new M(S,r[S],`unknown property "${S}"`)])}return y}function sm(o){const r=o.value,s=o.styleSpec,h=s.sky,m=o.style,y=Or(r);if(r===void 0)return[];if(y!=="object")return[new M("sky",r,`object expected, ${y} found`)];let x=[];for(const S in r)x=x.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],style:m,styleSpec:s}):[new M(S,r[S],`unknown property "${S}"`)]);return x}function Hf(o){const r=o.value,s=o.styleSpec,h=s.terrain,m=o.style;let y=[];const x=Or(r);if(r===void 0)return y;if(x!=="object")return y=y.concat([new M("terrain",r,`object expected, ${x} found`)]),y;for(const S in r)y=y.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new M(S,r[S],`unknown property "${S}"`)]);return y}function Zf(o){let r=[];const s=o.value,h=o.key;if(Array.isArray(s)){const m=[],y=[];for(const x in s)s[x].id&&m.includes(s[x].id)&&r.push(new M(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),m.push(s[x].id),s[x].url&&y.includes(s[x].url)&&r.push(new M(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),y.push(s[x].url),r=r.concat(Bi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return Ma({key:h,value:s})}const Xf={"*":()=>[],array:Xc,boolean:function(o){const r=o.value,s=o.key,h=Or(r);return h!=="boolean"?[new M(s,r,`boolean expected, ${h} found`)]:[]},number:Gu,color:function(o){const r=o.key,s=o.value,h=Or(s);return h!=="string"?[new M(r,s,`color expected, ${h} found`)]:Mr.parse(String(s))?[]:[new M(r,s,`color expected, "${s}" found`)]},constants:om,enum:Wu,filter:Hu,function:Df,layer:Vf,object:Bi,source:am,light:Wf,sky:sm,terrain:Hf,projection:function(o){const r=o.value,s=o.styleSpec,h=s.projection,m=o.style,y=Or(r);if(r===void 0)return[];if(y!=="object")return[new M("projection",r,`object expected, ${y} found`)];let x=[];for(const S in r)x=x.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],style:m,styleSpec:s}):[new M(S,r[S],`unknown property "${S}"`)]);return x},string:Ma,formatted:function(o){return Ma(o).length===0?[]:Zs(o)},resolvedImage:function(o){return Ma(o).length===0?[]:Zs(o)},padding:function(o){const r=o.key,s=o.value;if(Or(s)==="array"){if(s.length<1||s.length>4)return[new M(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let y=0;y<s.length;y++)m=m.concat(o.validateSpec({key:`${r}[${y}]`,value:s[y],validateSpec:o.validateSpec,valueSpec:h}));return m}return Gu({key:r,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,s=o.value,h=Or(s),m=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new M(r,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let x=0;x<s.length;x+=2)y=y.concat(Wu({key:`${r}[${x}]`,value:s[x],valueSpec:m.layout_symbol["text-anchor"]})),y=y.concat(Xc({key:`${r}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return y},sprite:Zf};function Xu(o){const r=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Xu,s.expression&&as(sn(r))?Df(o):s.expression&&Mt(Hs(r))?Zs(o):s.type&&Xf[s.type]?Xf[s.type](o):Bi(U({},o,{valueSpec:s.type?h[s.type]:s}))}function lm(o){const r=o.value,s=o.key,h=Ma(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new M(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new M(s,r,'"glyphs" url must include a "{range}" token'))),h}function go(o,r=et){let s=[];return s=s.concat(Xu({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:Xu,objectElementValidators:{glyphs:lm,"*":()=>[]}})),o.constants&&(s=s.concat(om({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:Xu}))),qf(s)}function Oo(o){return function(r){return o({...r,validateSpec:Xu})}}function qf(o){return[].concat(o).sort((r,s)=>r.line-s.line)}function Fo(o){return function(...r){return qf(o.apply(this,r))}}go.source=Fo(Oo(am)),go.sprite=Fo(Oo(Zf)),go.glyphs=Fo(Oo(lm)),go.light=Fo(Oo(Wf)),go.sky=Fo(Oo(sm)),go.terrain=Fo(Oo(Hf)),go.layer=Fo(Oo(Vf)),go.filter=Fo(Oo(Hu)),go.paintProperty=Fo(Oo($f)),go.layoutProperty=Fo(Oo(Uf));const Oa=go,Y0=Oa.light,Kf=Oa.sky,Q0=Oa.paintProperty,ev=Oa.layoutProperty;function Jf(o,r){let s=!1;if(r&&r.length)for(const h of r)o.fire(new Ht(new Error(h.message))),s=!0;return s}class Dl{constructor(r,s,h){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let C=0;C<this.d*this.d;C++){const F=x[3+C],G=x[3+C+1];m.push(F===G?null:x.subarray(F,G))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=h,this.scale=s/r,this.uid=0;const y=h/s*r;this.min=-y,this.max=r+y}insert(r,s,h,m,y){this._forEachCell(s,h,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,h,m,y,x){this.cells[y].push(x)}query(r,s,h,m,y){const x=this.min,S=this.max;if(r<=x&&s<=x&&S<=h&&S<=m&&!y)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(r,s,h,m,this._queryCell,C,{},y),C}}_queryCell(r,s,h,m,y,x,S,C){const F=this.cells[y];if(F!==null){const G=this.keys,J=this.bboxes;for(let ne=0;ne<F.length;ne++){const ce=F[ne];if(S[ce]===void 0){const me=4*ce;(C?C(J[me+0],J[me+1],J[me+2],J[me+3]):r<=J[me+2]&&s<=J[me+3]&&h>=J[me+0]&&m>=J[me+1])?(S[ce]=!0,x.push(G[ce])):S[ce]=!1}}}}_forEachCell(r,s,h,m,y,x,S,C){const F=this._convertToCellCoord(r),G=this._convertToCellCoord(s),J=this._convertToCellCoord(h),ne=this._convertToCellCoord(m);for(let ce=F;ce<=J;ce++)for(let me=G;me<=ne;me++){const Te=this.d*me+ce;if((!C||C(this._convertFromCellCoord(ce),this._convertFromCellCoord(me),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(me+1)))&&y.call(this,r,s,h,m,Te,x,S,C))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=s;for(let x=0;x<r.length;x++){const S=r[x];m[3+x]=y,m.set(S,y),y+=S.length}return m[3+r.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+r.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(r,s){const h=r.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(r){return new Dl(r.buffer)}}const sa={};function $t(o,r,s={}){if(sa[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),sa[o]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}$t("Object",Object),$t("TransferableGridIndex",Dl),$t("Color",Mr),$t("Error",Error),$t("AJAXError",it),$t("ResolvedImage",Xn),$t("StylePropertyFunction",Dr),$t("StyleExpression",ut,{omit:["_evaluator"]}),$t("ZoomDependentExpression",Jt),$t("ZoomConstantExpression",Zt),$t("CompoundExpression",Ti,{omit:["_evaluate"]});for(const o in Co)Co[o]._classRegistryKey||$t(`Expression_${o}`,Co[o]);function um(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Yf(o){return o.$name||o.constructor._classRegistryKey}function cm(o){return!function(r){if(r===null||typeof r!="object")return!1;const s=Yf(r);return!(!s||s==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||um(o)||Y(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function qu(o,r){if(cm(o))return(um(o)||Y(o))&&r&&r.push(o),ArrayBuffer.isView(o)&&r&&r.push(o.buffer),o instanceof ImageData&&r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const y=[];for(const x of o)y.push(qu(x,r));return y}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const s=Yf(o);if(!s)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!sa[s])throw new Error(`${s} is not registered.`);const{klass:h}=sa[s],m=h.serialize?h.serialize(o,r):{};if(h.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in o){if(!o.hasOwnProperty(y)||sa[s].omit.indexOf(y)>=0)continue;const x=o[y];m[y]=sa[s].shallow.indexOf(y)>=0?x:qu(x,r)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(m.$name=s),m}function la(o){if(cm(o))return o;if(Array.isArray(o))return o.map(la);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const r=Yf(o)||"Object";if(!sa[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=sa[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const y=o[m];h[m]=sa[r].shallow.indexOf(m)>=0?y:la(y)}return h}class hm{constructor(){this.first=!0}update(r,s){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Lt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Qf(o){for(const r of o)if(ed(r.charCodeAt(0)))return!0;return!1}function tv(o){for(const r of o)if(!fm(r.charCodeAt(0)))return!1;return!0}function fm(o){return!(Lt.Arabic(o)||Lt["Arabic Supplement"](o)||Lt["Arabic Extended-A"](o)||Lt["Arabic Presentation Forms-A"](o)||Lt["Arabic Presentation Forms-B"](o))}function ed(o){return!(o!==746&&o!==747&&(o<4352||!(Lt["Bopomofo Extended"](o)||Lt.Bopomofo(o)||Lt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Lt["CJK Compatibility Ideographs"](o)||Lt["CJK Compatibility"](o)||Lt["CJK Radicals Supplement"](o)||Lt["CJK Strokes"](o)||!(!Lt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Lt["CJK Unified Ideographs Extension A"](o)||Lt["CJK Unified Ideographs"](o)||Lt["Enclosed CJK Letters and Months"](o)||Lt["Hangul Compatibility Jamo"](o)||Lt["Hangul Jamo Extended-A"](o)||Lt["Hangul Jamo Extended-B"](o)||Lt["Hangul Jamo"](o)||Lt["Hangul Syllables"](o)||Lt.Hiragana(o)||Lt["Ideographic Description Characters"](o)||Lt.Kanbun(o)||Lt["Kangxi Radicals"](o)||Lt["Katakana Phonetic Extensions"](o)||Lt.Katakana(o)&&o!==12540||!(!Lt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Lt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Lt["Unified Canadian Aboriginal Syllabics"](o)||Lt["Unified Canadian Aboriginal Syllabics Extended"](o)||Lt["Vertical Forms"](o)||Lt["Yijing Hexagram Symbols"](o)||Lt["Yi Syllables"](o)||Lt["Yi Radicals"](o))))}function dm(o){return!(ed(o)||function(r){return!!(Lt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Lt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Lt["Letterlike Symbols"](r)||Lt["Number Forms"](r)||Lt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Lt["Control Pictures"](r)&&r!==9251||Lt["Optical Character Recognition"](r)||Lt["Enclosed Alphanumerics"](r)||Lt["Geometric Shapes"](r)||Lt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Lt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Lt["CJK Symbols and Punctuation"](r)||Lt.Katakana(r)||Lt["Private Use Area"](r)||Lt["CJK Compatibility Forms"](r)||Lt["Small Form Variants"](r)||Lt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function ls(o){return o>=1424&&o<=2303||Lt["Arabic Presentation Forms-A"](o)||Lt["Arabic Presentation Forms-B"](o)}function pm(o,r){return!(!r&&ls(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Lt.Khmer(o))}function td(o){for(const r of o)if(ls(r.charCodeAt(0)))return!0;return!1}const us=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class en{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hm,this.transition={})}isSupportedScript(r){return function(s,h){for(const m of s)if(!pm(m.charCodeAt(0),h))return!1;return!0}(r,us.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class qc{constructor(r,s){this.property=r,this.value=s,this.expression=function(h,m){if(as(h))return new Dr(h,m);if(Mt(h)){const y=vr(h,m);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=h;return m.type==="color"&&typeof h=="string"?y=Mr.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(y=xi.parse(h)):y=_i.parse(h),{kind:"constant",evaluate:()=>y}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,h){return this.property.possiblyEvaluate(this,r,s,h)}}class Nl{constructor(r){this.property=r,this.value=new qc(r,void 0)}transitioned(r,s){return new mm(this.property,this.value,s,P({},r.transition,this.transition),r.now)}untransitioned(){return new mm(this.property,this.value,null,{},0)}}class $l{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return X(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Nl(this._values[r].property)),this._values[r].value=new qc(this._values[r].property,s===null?void 0:X(s))}getTransition(r){return X(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Nl(this._values[r].property)),this._values[r].transition=X(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h);const m=this.getTransition(s);m!==void 0&&(r[`${s}-transition`]=m)}return r}transitioned(r,s){const h=new rd(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(r,s._values[m]);return h}untransitioned(){const r=new rd(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class mm{constructor(r,s,h,m,y){this.property=r,this.value=s,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(r,s,h){const m=r.now||0,y=this.value.possiblyEvaluate(r,s,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return x.possiblyEvaluate(r,s,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,h),y,function(C){if(C<=0)return 0;if(C>=1)return 1;const F=C*C,G=F*C;return 4*(C<.5?G:3*(C-F)+G-.75)}(S))}}return y}}class rd{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,h){const m=new Kc(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,s,h);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ku{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return X(this._values[r].value)}setValue(r,s){this._values[r]=new qc(this._values[r].property,s===null?void 0:X(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h)}return r}possiblyEvaluate(r,s,h){const m=new Kc(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,s,h);return m}}class ua{constructor(r,s,h){this.property=r,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,h,m){return this.property.evaluate(this.value,this.parameters,r,s,h,m)}}class Kc{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Yt{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,h){const m=Si[this.specification.type];return m?m(r,s,h):r}}class sr{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,h,m){return new ua(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},h,m)}:r.expression,s)}interpolate(r,s,h){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new ua(this,{kind:"constant",value:void 0},r.parameters);const m=Si[this.specification.type];if(m){const y=m(r.value.value,s.value.value,h);return new ua(this,{kind:"constant",value:y},r.parameters)}return r}evaluate(r,s,h,m,y,x){return r.kind==="constant"?r.value:r.evaluate(s,h,m,y,x)}}class v extends sr{possiblyEvaluate(r,s,h,m){if(r.value===void 0)return new ua(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const y=r.expression.evaluate(s,null,{},h,m),x=r.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,S=this._calculate(x,x,x,s);return new ua(this,{kind:"constant",value:S},s)}if(r.expression.kind==="camera"){const y=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new ua(this,{kind:"constant",value:y},s)}return new ua(this,r.expression,s)}evaluate(r,s,h,m,y,x){if(r.kind==="source"){const S=r.evaluate(s,h,m,y,x);return this._calculate(S,S,S,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},h,m),r.evaluate({zoom:Math.floor(s.zoom)},h,m),r.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):r.value}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class n{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const y=r.expression.evaluate(s,null,{},h,m);return this._calculate(y,y,y,s)}return this._calculate(r.expression.evaluate(new en(Math.floor(s.zoom-1),s)),r.expression.evaluate(new en(Math.floor(s.zoom),s)),r.expression.evaluate(new en(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class c{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){return!!r.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class p{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const h=r[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new qc(h,void 0),y=this.defaultTransitionablePropertyValues[s]=new Nl(h);this.defaultTransitioningPropertyValues[s]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}$t("DataDrivenProperty",sr),$t("DataConstantProperty",Yt),$t("CrossFadedDataDrivenProperty",v),$t("CrossFadedProperty",n),$t("ColorRampProperty",c);const g="-transition";class _ extends lr{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new Ku(s.layout)),s.paint)){this._transitionablePaint=new $l(s.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Kc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,h={}){s!=null&&this._validate(ev,`layers.${this.id}.layout.${r}`,r,s,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return r.endsWith(g)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,h={}){if(s!=null&&this._validate(Q0,`layers.${this.id}.paint.${r}`,r,s,h))return!1;if(r.endsWith(g))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[r],y=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const C=this._transitionablePaint._values[r].value;return C.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(r,S,C)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ee(r,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(r,s,h,m,y={}){return(!y||y.validate!==!1)&&Jf(this,r.call(Oa,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof ua&&oa(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const A={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class k{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class O{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function $(o,r=1){let s=0,h=0;return{members:o.map(m=>{const y=A[m.type].BYTES_PER_ELEMENT,x=s=te(s,Math.max(r,y)),S=m.components||1;return h=Math.max(h,y),s+=y*S,{name:m.name,type:m.type,components:S,offset:x}}),size:te(s,Math.max(h,r)),alignment:r}}function te(o,r){return Math.ceil(o/r)*r}class Q extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.int16[m+0]=s,this.int16[m+1]=h,r}}Q.prototype.bytesPerElement=4,$t("StructArrayLayout2i4",Q);class pe extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.int16[y+0]=s,this.int16[y+1]=h,this.int16[y+2]=m,r}}pe.prototype.bytesPerElement=6,$t("StructArrayLayout3i6",pe);class we extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,h,m)}emplace(r,s,h,m,y){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=y,r}}we.prototype.bytesPerElement=8,$t("StructArrayLayout4i8",we);class Ae extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const C=6*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.int16[C+2]=m,this.int16[C+3]=y,this.int16[C+4]=x,this.int16[C+5]=S,r}}Ae.prototype.bytesPerElement=12,$t("StructArrayLayout2i4i12",Ae);class ze extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const C=4*r,F=8*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.uint8[F+4]=m,this.uint8[F+5]=y,this.uint8[F+6]=x,this.uint8[F+7]=S,r}}ze.prototype.bytesPerElement=8,$t("StructArrayLayout2i4ub8",ze);class ke extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.float32[m+0]=s,this.float32[m+1]=h,r}}ke.prototype.bytesPerElement=8,$t("StructArrayLayout2f8",ke);class De extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F,G){const J=this.length;return this.resize(J+1),this.emplace(J,r,s,h,m,y,x,S,C,F,G)}emplace(r,s,h,m,y,x,S,C,F,G,J){const ne=10*r;return this.uint16[ne+0]=s,this.uint16[ne+1]=h,this.uint16[ne+2]=m,this.uint16[ne+3]=y,this.uint16[ne+4]=x,this.uint16[ne+5]=S,this.uint16[ne+6]=C,this.uint16[ne+7]=F,this.uint16[ne+8]=G,this.uint16[ne+9]=J,r}}De.prototype.bytesPerElement=20,$t("StructArrayLayout10ui20",De);class qe extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F,G,J,ne){const ce=this.length;return this.resize(ce+1),this.emplace(ce,r,s,h,m,y,x,S,C,F,G,J,ne)}emplace(r,s,h,m,y,x,S,C,F,G,J,ne,ce){const me=12*r;return this.int16[me+0]=s,this.int16[me+1]=h,this.int16[me+2]=m,this.int16[me+3]=y,this.uint16[me+4]=x,this.uint16[me+5]=S,this.uint16[me+6]=C,this.uint16[me+7]=F,this.int16[me+8]=G,this.int16[me+9]=J,this.int16[me+10]=ne,this.int16[me+11]=ce,r}}qe.prototype.bytesPerElement=24,$t("StructArrayLayout4i4ui4i24",qe);class je extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.float32[y+0]=s,this.float32[y+1]=h,this.float32[y+2]=m,r}}je.prototype.bytesPerElement=12,$t("StructArrayLayout3f12",je);class Je extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}Je.prototype.bytesPerElement=4,$t("StructArrayLayout1ul4",Je);class rt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F){const G=this.length;return this.resize(G+1),this.emplace(G,r,s,h,m,y,x,S,C,F)}emplace(r,s,h,m,y,x,S,C,F,G){const J=10*r,ne=5*r;return this.int16[J+0]=s,this.int16[J+1]=h,this.int16[J+2]=m,this.int16[J+3]=y,this.int16[J+4]=x,this.int16[J+5]=S,this.uint32[ne+3]=C,this.uint16[J+8]=F,this.uint16[J+9]=G,r}}rt.prototype.bytesPerElement=20,$t("StructArrayLayout6i1ul2ui20",rt);class st extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const C=6*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.int16[C+2]=m,this.int16[C+3]=y,this.int16[C+4]=x,this.int16[C+5]=S,r}}st.prototype.bytesPerElement=12,$t("StructArrayLayout2i2i2i12",st);class mt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,h,m,y)}emplace(r,s,h,m,y,x){const S=4*r,C=8*r;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[C+6]=y,this.int16[C+7]=x,r}}mt.prototype.bytesPerElement=16,$t("StructArrayLayout2f1f2i16",mt);class wt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const C=16*r,F=4*r,G=8*r;return this.uint8[C+0]=s,this.uint8[C+1]=h,this.float32[F+1]=m,this.float32[F+2]=y,this.int16[G+6]=x,this.int16[G+7]=S,r}}wt.prototype.bytesPerElement=16,$t("StructArrayLayout2ub2f2i16",wt);class Bt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.uint16[y+0]=s,this.uint16[y+1]=h,this.uint16[y+2]=m,r}}Bt.prototype.bytesPerElement=6,$t("StructArrayLayout3ui6",Bt);class Dt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F,G,J,ne,ce,me,Te,Re,Ne){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,r,s,h,m,y,x,S,C,F,G,J,ne,ce,me,Te,Re,Ne)}emplace(r,s,h,m,y,x,S,C,F,G,J,ne,ce,me,Te,Re,Ne,Qe){const Ze=24*r,Ye=12*r,lt=48*r;return this.int16[Ze+0]=s,this.int16[Ze+1]=h,this.uint16[Ze+2]=m,this.uint16[Ze+3]=y,this.uint32[Ye+2]=x,this.uint32[Ye+3]=S,this.uint32[Ye+4]=C,this.uint16[Ze+10]=F,this.uint16[Ze+11]=G,this.uint16[Ze+12]=J,this.float32[Ye+7]=ne,this.float32[Ye+8]=ce,this.uint8[lt+36]=me,this.uint8[lt+37]=Te,this.uint8[lt+38]=Re,this.uint32[Ye+10]=Ne,this.int16[Ze+22]=Qe,r}}Dt.prototype.bytesPerElement=48,$t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Dt);class bt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,C,F,G,J,ne,ce,me,Te,Re,Ne,Qe,Ze,Ye,lt,_t,Ft,ir,zt,Ot,Kt,Ut){const Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,r,s,h,m,y,x,S,C,F,G,J,ne,ce,me,Te,Re,Ne,Qe,Ze,Ye,lt,_t,Ft,ir,zt,Ot,Kt,Ut)}emplace(r,s,h,m,y,x,S,C,F,G,J,ne,ce,me,Te,Re,Ne,Qe,Ze,Ye,lt,_t,Ft,ir,zt,Ot,Kt,Ut,Nt){const dt=32*r,Qt=16*r;return this.int16[dt+0]=s,this.int16[dt+1]=h,this.int16[dt+2]=m,this.int16[dt+3]=y,this.int16[dt+4]=x,this.int16[dt+5]=S,this.int16[dt+6]=C,this.int16[dt+7]=F,this.uint16[dt+8]=G,this.uint16[dt+9]=J,this.uint16[dt+10]=ne,this.uint16[dt+11]=ce,this.uint16[dt+12]=me,this.uint16[dt+13]=Te,this.uint16[dt+14]=Re,this.uint16[dt+15]=Ne,this.uint16[dt+16]=Qe,this.uint16[dt+17]=Ze,this.uint16[dt+18]=Ye,this.uint16[dt+19]=lt,this.uint16[dt+20]=_t,this.uint16[dt+21]=Ft,this.uint16[dt+22]=ir,this.uint32[Qt+12]=zt,this.float32[Qt+13]=Ot,this.float32[Qt+14]=Kt,this.uint16[dt+30]=Ut,this.uint16[dt+31]=Nt,r}}bt.prototype.bytesPerElement=64,$t("StructArrayLayout8i15ui1ul2f2ui64",bt);class Tt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}Tt.prototype.bytesPerElement=4,$t("StructArrayLayout1f4",Tt);class Gt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.uint16[6*r+0]=s,this.float32[y+1]=h,this.float32[y+2]=m,r}}Gt.prototype.bytesPerElement=12,$t("StructArrayLayout1ui2f12",Gt);class mr extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=4*r;return this.uint32[2*r+0]=s,this.uint16[y+2]=h,this.uint16[y+3]=m,r}}mr.prototype.bytesPerElement=8,$t("StructArrayLayout1ul2ui8",mr);class Ct extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.uint16[m+0]=s,this.uint16[m+1]=h,r}}Ct.prototype.bytesPerElement=4,$t("StructArrayLayout2ui4",Ct);class jt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}jt.prototype.bytesPerElement=2,$t("StructArrayLayout1ui2",jt);class cr extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,h,m)}emplace(r,s,h,m,y){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=y,r}}cr.prototype.bytesPerElement=16,$t("StructArrayLayout4f16",cr);class ln extends k{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}ln.prototype.size=20;class xr extends rt{get(r){return new ln(this,r)}}$t("CollisionBoxArray",xr);class Pr extends k{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Pr.prototype.size=48;class un extends Dt{get(r){return new Pr(this,r)}}$t("PlacedSymbolArray",un);class ai extends k{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ai.prototype.size=64;class Ro extends bt{get(r){return new ai(this,r)}}$t("SymbolInstanceArray",Ro);class cn extends Tt{getoffsetX(r){return this.float32[1*r+0]}}$t("GlyphOffsetArray",cn);class Di extends pe{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}$t("SymbolLineVertexArray",Di);class Ai extends k{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ai.prototype.size=12;class si extends Gt{get(r){return new Ai(this,r)}}$t("TextAnchorOffsetArray",si);class li extends k{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}li.prototype.size=8;class jo extends mr{get(r){return new li(this,r)}}$t("FeatureIndexArray",jo);class Xs extends Q{}class Jc extends Q{}class Ul extends Q{}class qs extends Ae{}class Yc extends ze{}class nd extends ke{}class ei extends De{}class zo extends qe{}class cs extends je{}class Vl extends Je{}class ui extends st{}class ci extends wt{}class qn extends Bt{}class dn extends Ct{}const Gl=$([{name:"a_pos",components:2,type:"Int16"}],4),{members:id}=Gl;class Un{constructor(r=[]){this.segments=r}prepareSegment(r,s,h,m){let y=this.segments[this.segments.length-1];return r>Un.MAX_VERTEX_ARRAY_LENGTH&&ge(`Max vertices per segment is ${Un.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!y||y.vertexLength+r>Un.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,h,m){return new Un([{vertexOffset:r,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function gm(o,r){return 256*(o=q(Math.floor(o),0,255))+q(Math.floor(r),0,255)}Un.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t("SegmentVector",Un);const Qc=$([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var eh={exports:{}},hs={exports:{}};hs.exports=function(o,r){var s,h,m,y,x,S,C,F;for(h=o.length-(s=3&o.length),m=r,x=3432918353,S=461845907,F=0;F<h;)C=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,m=27492+(65535&(y=5*(65535&(m=(m^=C=(65535&(C=(C=(65535&C)*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(C=0,s){case 3:C^=(255&o.charCodeAt(F+2))<<16;case 2:C^=(255&o.charCodeAt(F+1))<<8;case 1:m^=C=(65535&(C=(C=(65535&(C^=255&o.charCodeAt(F)))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var ym=hs.exports,od={exports:{}};od.exports=function(o,r){for(var s,h=o.length,m=r^h,y=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(y)|(255&o.charCodeAt(++y))<<8|(255&o.charCodeAt(++y))<<16|(255&o.charCodeAt(++y))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:m^=(255&o.charCodeAt(y+2))<<16;case 2:m^=(255&o.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var ad=ym,sd=od.exports;eh.exports=ad,eh.exports.murmur3=ad,eh.exports.murmur2=sd;var th=w(eh.exports);class Wl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,h,m){this.ids.push(P2(r)),this.positions.push(s,h,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=P2(r);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=s?m=x:h=x+1}const y=[];for(;this.ids[h]===s;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(r,s){const h=new Float64Array(r.ids),m=new Uint32Array(r.positions);return rv(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(r){const s=new Wl;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function P2(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:th(String(o))}function rv(o,r,s,h){for(;s<h;){const m=o[s+h>>1];let y=s-1,x=h+1;for(;;){do y++;while(o[y]<m);do x--;while(o[x]>m);if(y>=x)break;vm(o,y,x),vm(r,3*y,3*x),vm(r,3*y+1,3*x+1),vm(r,3*y+2,3*x+2)}x-s<h-x?(rv(o,r,s,x),s=x+1):(rv(o,r,x+1,h),h=x)}}function vm(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}$t("FeaturePositionMap",Wl);class Ju{constructor(r,s){this.gl=r.gl,this.location=s}}class _m extends Ju{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class A2 extends Ju{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class I2 extends Ju{constructor(r,s){super(r,s),this.current=Mr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const s4=new Float32Array(16);function nv(o){return[gm(255*o.r,255*o.g),gm(255*o.b,255*o.a)]}class ld{constructor(r,s,h){this.value=r,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(r,s,h){r.set(h.constantOr(this.value))}getBinding(r,s,h){return this.type==="color"?new I2(r,s):new _m(r,s)}}class rh{constructor(r,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setUniform(r,s,h,m){const y=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&r.set(y)}getBinding(r,s,h){return h.substr(0,9)==="u_pattern"?new A2(r,s):new _m(r,s)}}class Ks{constructor(r,s,h,m){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,s,h,m,y){const x=this.paintVertexArray.length,S=this.expression.evaluate(new en(0),s,{},m,[],y);this.paintVertexArray.resize(r),this._setPaintValue(x,r,S)}updatePaintArray(r,s,h,m){const y=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(r,s,y)}_setPaintValue(r,s,h){if(this.type==="color"){const m=nv(h);for(let y=r;y<s;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=r;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fa{constructor(r,s,h,m,y,x){this.expression=r,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,h,m,y){const x=this.expression.evaluate(new en(this.zoom),s,{},m,[],y),S=this.expression.evaluate(new en(this.zoom+1),s,{},m,[],y),C=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(C,r,x,S)}updatePaintArray(r,s,h,m){const y=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(r,s,y,x)}_setPaintValue(r,s,h,m){if(this.type==="color"){const y=nv(h),x=nv(m);for(let S=r;S<s;S++)this.paintVertexArray.emplace(S,y[0],y[1],x[0],x[1])}else{for(let y=r;y<s;y++)this.paintVertexArray.emplace(y,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=q(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,s,h){return new _m(r,s)}}class Hl{constructor(r,s,h,m,y,x){this.expression=r,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(r,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(r,s,h,m,y){this._setPaintValues(r,s,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(r,s,h,m){if(!m||!h)return;const{min:y,mid:x,max:S}=h,C=m[y],F=m[x],G=m[S];if(C&&F&&G)for(let J=r;J<s;J++)this.zoomInPaintVertexArray.emplace(J,F.tl[0],F.tl[1],F.br[0],F.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],F.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,F.tl[0],F.tl[1],F.br[0],F.br[1],G.tl[0],G.tl[1],G.br[0],G.br[1],F.pixelRatio,G.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Qc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Qc.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class C2{constructor(r,s,h){this.binders={},this._buffers=[];const m=[];for(const y in r.paint._values){if(!h(y))continue;const x=r.paint.get(y);if(!(x instanceof ua&&oa(x.property.specification)))continue;const S=l4(y,r.type),C=x.value,F=x.property.specification.type,G=x.property.useIntegerZoom,J=x.property.specification["property-type"],ne=J==="cross-faded"||J==="cross-faded-data-driven";if(C.kind==="constant")this.binders[y]=ne?new rh(C.value,S):new ld(C.value,S,F),m.push(`/u_${y}`);else if(C.kind==="source"||ne){const ce=k2(y,F,"source");this.binders[y]=ne?new Hl(C,F,G,s,ce,r.id):new Ks(C,S,F,ce),m.push(`/a_${y}`)}else{const ce=k2(y,F,"composite");this.binders[y]=new Fa(C,S,F,G,s,ce),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Ks||s instanceof Fa?s.maxValue:0}populatePaintArrays(r,s,h,m,y){for(const x in this.binders){const S=this.binders[x];(S instanceof Ks||S instanceof Fa||S instanceof Hl)&&S.populatePaintArray(r,s,h,m,y)}}setConstantPatternPositions(r,s){for(const h in this.binders){const m=this.binders[h];m instanceof rh&&m.setConstantPatternPositions(r,s)}}updatePaintArrays(r,s,h,m,y){let x=!1;for(const S in r){const C=s.getPositions(S);for(const F of C){const G=h.feature(F.index);for(const J in this.binders){const ne=this.binders[J];if((ne instanceof Ks||ne instanceof Fa||ne instanceof Hl)&&ne.expression.isStateDependent===!0){const ce=m.paint.get(J);ne.expression=ce.value,ne.updatePaintArray(F.start,F.end,G,r[S],y),x=!0}}}}return x}defines(){const r=[];for(const s in this.binders){const h=this.binders[s];(h instanceof ld||h instanceof rh)&&r.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ks||h instanceof Fa)for(let m=0;m<h.paintVertexAttributes.length;m++)r.push(h.paintVertexAttributes[m].name);else if(h instanceof Hl)for(let m=0;m<Qc.members.length;m++)r.push(Qc.members[m].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof ld||h instanceof rh||h instanceof Fa)for(const m of h.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const h=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof ld||y instanceof rh||y instanceof Fa){for(const x of y.uniformNames)if(s[x]){const S=y.getBinding(r,s[x],x);h.push({name:x,property:m,binding:S})}}}return h}setUniforms(r,s,h,m){for(const{name:y,property:x,binding:S}of s)this.binders[x].setUniform(S,m,h.get(x),y)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(r&&h instanceof Hl){const m=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Ks||h instanceof Fa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const s in this.binders){const h=this.binders[s];(h instanceof Ks||h instanceof Fa||h instanceof Hl)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Ks||s instanceof Fa||s instanceof Hl)&&s.destroy()}}}class Yu{constructor(r,s,h=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new C2(m,s,h);this.needsUpload=!1,this._featureMap=new Wl,this._bufferOffset=0}populatePaintArrays(r,s,h,m,y,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,s,m,y,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,h,m){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(r,this._featureMap,s,y,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function l4(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function k2(o,r,s){const h={color:{source:ke,composite:cr},number:{source:Tt,composite:ke}},m=function(y){return{"line-pattern":{source:ei,composite:ei},"fill-pattern":{source:ei,composite:ei},"fill-extrusion-pattern":{source:ei,composite:ei}}[y]}(o);return m&&m[s]||h[r][s]}$t("ConstantBinder",ld),$t("CrossFadedConstantBinder",rh),$t("SourceExpressionBinder",Ks),$t("CrossFadedCompositeBinder",Hl),$t("CompositeExpressionBinder",Fa),$t("ProgramConfiguration",C2,{omit:["_buffers"]}),$t("ProgramConfigurationSet",Yu);const Ln=8192,iv=Math.pow(2,14)-1,M2=-iv-1;function Qu(o){const r=Ln/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let y=0;y<m.length;y++){const x=m[y],S=Math.round(x.x*r),C=Math.round(x.y*r);x.x=q(S,M2,iv),x.y=q(C,M2,iv),(S<x.x||S>x.x+1||C<x.y||C>x.y+1)&&ge("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ec(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Qu(o):[]}}function xm(o,r,s,h,m){o.emplaceBack(2*r+(h+1)/2,2*s+(m+1)/2)}class ov{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Jc,this.indexArray=new qn,this.segments=new Un,this.programConfigurations=new Yu(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){const m=this.layers[0],y=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:C,id:F,index:G,sourceLayerIndex:J}of r){const ne=this.layers[0]._featureFilter.needGeometry,ce=ec(C,ne);if(!this.layers[0]._featureFilter.filter(new en(this.zoom),ce,h))continue;const me=S?x.evaluate(ce,{},h):void 0,Te={id:F,properties:C.properties,type:C.type,sourceLayerIndex:J,index:G,geometry:ne?ce.geometry:Qu(C),patterns:{},sortKey:me};y.push(Te)}S&&y.sort((C,F)=>C.sortKey-F.sortKey);for(const C of y){const{geometry:F,index:G,sourceLayerIndex:J}=C,ne=r[G].feature;this.addFeature(C,F,G,h),s.featureIndex.insert(ne,F,G,J,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,id),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,h,m){for(const y of s)for(const x of y){const S=x.x,C=x.y;if(S<0||S>=Ln||C<0||C>=Ln)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),G=F.vertexLength;xm(this.layoutVertexArray,S,C,-1,-1),xm(this.layoutVertexArray,S,C,1,-1),xm(this.layoutVertexArray,S,C,1,1),xm(this.layoutVertexArray,S,C,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+3,G+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},m)}}function O2(o,r){for(let s=0;s<o.length;s++)if(nh(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(nh(o,r[s]))return!0;return!!av(o,r)}function u4(o,r,s){return!!nh(o,r)||!!sv(r,o,s)}function F2(o,r){if(o.length===1)return j2(r,o[0]);for(let s=0;s<r.length;s++){const h=r[s];for(let m=0;m<h.length;m++)if(nh(o,h[m]))return!0}for(let s=0;s<o.length;s++)if(j2(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(av(o,r[s]))return!0;return!1}function c4(o,r,s){if(o.length>1){if(av(o,r))return!0;for(let h=0;h<r.length;h++)if(sv(r[h],o,s))return!0}for(let h=0;h<o.length;h++)if(sv(o[h],r,s))return!0;return!1}function av(o,r){if(o.length===0||r.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],m=o[s+1];for(let y=0;y<r.length-1;y++)if(h4(h,m,r[y],r[y+1]))return!0}return!1}function h4(o,r,s,h){return fe(o,s,h)!==fe(r,s,h)&&fe(o,r,s)!==fe(o,r,h)}function sv(o,r,s){const h=s*s;if(r.length===1)return o.distSqr(r[0])<h;for(let m=1;m<r.length;m++)if(R2(o,r[m-1],r[m])<h)return!0;return!1}function R2(o,r,s){const h=r.distSqr(s);if(h===0)return o.distSqr(r);const m=((o.x-r.x)*(s.x-r.x)+(o.y-r.y)*(s.y-r.y))/h;return o.distSqr(m<0?r:m>1?s:s.sub(r)._mult(m)._add(r))}function j2(o,r){let s,h,m,y=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,C=s.length-1;S<s.length;C=S++)h=s[S],m=s[C],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(y=!y)}return y}function nh(o,r){let s=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const y=o[h],x=o[m];y.y>r.y!=x.y>r.y&&r.x<(x.x-y.x)*(r.y-y.y)/(x.y-y.y)+y.x&&(s=!s)}return s}function f4(o,r,s){const h=s[0],m=s[2];if(o.x<h.x&&r.x<h.x||o.x>m.x&&r.x>m.x||o.y<h.y&&r.y<h.y||o.y>m.y&&r.y>m.y)return!1;const y=fe(o,r,s[0]);return y!==fe(o,r,s[1])||y!==fe(o,r,s[2])||y!==fe(o,r,s[3])}function ud(o,r,s){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(r.id).getMaxValue(o)}function wm(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function bm(o,r,s,h,m){if(!r[0]&&!r[1])return o;const y=b.convert(r)._mult(m);s==="viewport"&&y._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(y));return x}let z2,L2;$t("CircleBucket",ov,{omit:["layers"]});var d4={get paint(){return L2=L2||new p({"circle-radius":new sr(et.paint_circle["circle-radius"]),"circle-color":new sr(et.paint_circle["circle-color"]),"circle-blur":new sr(et.paint_circle["circle-blur"]),"circle-opacity":new sr(et.paint_circle["circle-opacity"]),"circle-translate":new Yt(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Yt(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yt(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yt(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sr(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sr(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sr(et.paint_circle["circle-stroke-opacity"])})},get layout(){return z2=z2||new p({"circle-sort-key":new sr(et.layout_circle["circle-sort-key"])})}},Ni=1e-6,ih=typeof Float32Array<"u"?Float32Array:Array;function lv(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function B2(o,r,s){var h=r[0],m=r[1],y=r[2],x=r[3],S=r[4],C=r[5],F=r[6],G=r[7],J=r[8],ne=r[9],ce=r[10],me=r[11],Te=r[12],Re=r[13],Ne=r[14],Qe=r[15],Ze=s[0],Ye=s[1],lt=s[2],_t=s[3];return o[0]=Ze*h+Ye*S+lt*J+_t*Te,o[1]=Ze*m+Ye*C+lt*ne+_t*Re,o[2]=Ze*y+Ye*F+lt*ce+_t*Ne,o[3]=Ze*x+Ye*G+lt*me+_t*Qe,o[4]=(Ze=s[4])*h+(Ye=s[5])*S+(lt=s[6])*J+(_t=s[7])*Te,o[5]=Ze*m+Ye*C+lt*ne+_t*Re,o[6]=Ze*y+Ye*F+lt*ce+_t*Ne,o[7]=Ze*x+Ye*G+lt*me+_t*Qe,o[8]=(Ze=s[8])*h+(Ye=s[9])*S+(lt=s[10])*J+(_t=s[11])*Te,o[9]=Ze*m+Ye*C+lt*ne+_t*Re,o[10]=Ze*y+Ye*F+lt*ce+_t*Ne,o[11]=Ze*x+Ye*G+lt*me+_t*Qe,o[12]=(Ze=s[12])*h+(Ye=s[13])*S+(lt=s[14])*J+(_t=s[15])*Te,o[13]=Ze*m+Ye*C+lt*ne+_t*Re,o[14]=Ze*y+Ye*F+lt*ce+_t*Ne,o[15]=Ze*x+Ye*G+lt*me+_t*Qe,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var cd,p4=B2;function Sm(o,r,s){var h=r[0],m=r[1],y=r[2],x=r[3];return o[0]=s[0]*h+s[4]*m+s[8]*y+s[12]*x,o[1]=s[1]*h+s[5]*m+s[9]*y+s[13]*x,o[2]=s[2]*h+s[6]*m+s[10]*y+s[14]*x,o[3]=s[3]*h+s[7]*m+s[11]*y+s[15]*x,o}cd=new ih(4),ih!=Float32Array&&(cd[0]=0,cd[1]=0,cd[2]=0,cd[3]=0);class m4 extends _{constructor(r){super(r,d4)}createBucket(r){return new ov(r)}queryRadius(r){const s=r;return ud("circle-radius",this,s)+ud("circle-stroke-width",this,s)+wm(this.paint.get("circle-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S,C){const F=bm(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),G=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),J=this.paint.get("circle-pitch-alignment")==="map",ne=J?F:function(me,Te){return me.map(Re=>D2(Re,Te))}(F,C),ce=J?G*S:G;for(const me of m)for(const Te of me){const Re=J?Te:D2(Te,C);let Ne=ce;const Qe=Sm([],[Te.x,Te.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=Qe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=x.cameraToCenterDistance/Qe[3]),u4(ne,Re,Ne))return!0}return!1}}function D2(o,r){const s=Sm([],[o.x,o.y,0,1],r);return new b(s[0]/s[3],s[1]/s[3])}class N2 extends ov{}let $2;$t("HeatmapBucket",N2,{omit:["layers"]});var g4={get paint(){return $2=$2||new p({"heatmap-radius":new sr(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sr(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yt(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new c(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yt(et.paint_heatmap["heatmap-opacity"])})}};function uv(o,{width:r,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*s*h}`)}else m=new Uint8Array(r*s*h);return o.width=r,o.height=s,o.data=m,o}function U2(o,{width:r,height:s},h){if(r===o.width&&s===o.height)return;const m=uv({},{width:r,height:s},h);cv(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,s)},h),o.width=r,o.height=s,o.data=m.data}function cv(o,r,s,h,m,y){if(m.width===0||m.height===0)return r;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||h.x>r.width-m.width||h.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=r.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<m.height;C++){const F=((s.y+C)*o.width+s.x)*y,G=((h.y+C)*r.width+h.x)*y;for(let J=0;J<m.width*y;J++)S[G+J]=x[F+J]}return r}class hd{constructor(r,s){uv(this,r,1,s)}resize(r){U2(this,r,1)}clone(){return new hd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,y){cv(r,s,h,m,y,1)}}class Lo{constructor(r,s){uv(this,r,4,s)}resize(r){U2(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,y){cv(r,s,h,m,y,4)}}function V2(o){const r={},s=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new Lo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const y=(x,S,C)=>{r[o.evaluationKey]=C;const F=o.expression.evaluate(r);m.data[x+S+0]=Math.floor(255*F.r/F.a),m.data[x+S+1]=Math.floor(255*F.g/F.a),m.data[x+S+2]=Math.floor(255*F.b/F.a),m.data[x+S+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let C=0,F=0;C<s;C++,F+=4){const G=C/(s-1),{start:J,end:ne}=o.clips[x];y(S,F,J*(1-G)+ne*G)}else for(let x=0,S=0;x<s;x++,S+=4)y(0,S,x/(s-1));return m}$t("AlphaImage",hd),$t("RGBAImage",Lo);class y4 extends _{createBucket(r){return new N2(r)}constructor(r){super(r,g4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=V2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let G2;var v4={get paint(){return G2=G2||new p({"hillshade-illumination-direction":new Yt(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yt(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yt(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yt(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yt(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yt(et.paint_hillshade["hillshade-accent-color"])})}};class _4 extends _{constructor(r){super(r,v4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const x4=$([{name:"a_pos",components:2,type:"Int16"}],4),{members:w4}=x4;var hv={exports:{}};function Em(o,r,s){s=s||2;var h,m,y,x,S,C,F,G=r&&r.length,J=G?r[0]*s:o.length,ne=W2(o,0,J,s,!0),ce=[];if(!ne||ne.next===ne.prev)return ce;if(G&&(ne=function(Te,Re,Ne,Qe){var Ze,Ye,lt,_t=[];for(Ze=0,Ye=Re.length;Ze<Ye;Ze++)(lt=W2(Te,Re[Ze]*Qe,Ze<Ye-1?Re[Ze+1]*Qe:Te.length,Qe,!1))===lt.next&&(lt.steiner=!0),_t.push(C4(lt));for(_t.sort(P4),Ze=0;Ze<_t.length;Ze++)Ne=A4(_t[Ze],Ne);return Ne}(o,r,ne,s)),o.length>80*s){h=y=o[0],m=x=o[1];for(var me=s;me<J;me+=s)(S=o[me])<h&&(h=S),(C=o[me+1])<m&&(m=C),S>y&&(y=S),C>x&&(x=C);F=(F=Math.max(y-h,x-m))!==0?32767/F:0}return fd(ne,ce,s,h,m,F,0),ce}function W2(o,r,s,h,m){var y,x;if(m===pv(o,r,s,h)>0)for(y=r;y<s;y+=h)x=X2(y,o[y],o[y+1],x);else for(y=s-h;y>=r;y-=h)x=X2(y,o[y],o[y+1],x);return x&&Tm(x,x.next)&&(pd(x),x=x.next),x}function tc(o,r){if(!o)return o;r||(r=o);var s,h=o;do if(s=!1,h.steiner||!Tm(h,h.next)&&Cn(h.prev,h,h.next)!==0)h=h.next;else{if(pd(h),(h=r=h.prev)===h.next)break;s=!0}while(s||h!==r);return r}function fd(o,r,s,h,m,y,x){if(o){!x&&y&&function(G,J,ne,ce){var me=G;do me.z===0&&(me.z=fv(me.x,me.y,J,ne,ce)),me.prevZ=me.prev,me.nextZ=me.next,me=me.next;while(me!==G);me.prevZ.nextZ=null,me.prevZ=null,function(Te){var Re,Ne,Qe,Ze,Ye,lt,_t,Ft,ir=1;do{for(Ne=Te,Te=null,Ye=null,lt=0;Ne;){for(lt++,Qe=Ne,_t=0,Re=0;Re<ir&&(_t++,Qe=Qe.nextZ);Re++);for(Ft=ir;_t>0||Ft>0&&Qe;)_t!==0&&(Ft===0||!Qe||Ne.z<=Qe.z)?(Ze=Ne,Ne=Ne.nextZ,_t--):(Ze=Qe,Qe=Qe.nextZ,Ft--),Ye?Ye.nextZ=Ze:Te=Ze,Ze.prevZ=Ye,Ye=Ze;Ne=Qe}Ye.nextZ=null,ir*=2}while(lt>1)}(me)}(o,h,m,y);for(var S,C,F=o;o.prev!==o.next;)if(S=o.prev,C=o.next,y?S4(o,h,m,y):b4(o))r.push(S.i/s|0),r.push(o.i/s|0),r.push(C.i/s|0),pd(o),o=C.next,F=C.next;else if((o=C)===F){x?x===1?fd(o=E4(tc(o),r,s),r,s,h,m,y,2):x===2&&T4(o,r,s,h,m,y):fd(tc(o),r,s,h,m,y,1);break}}}function b4(o){var r=o.prev,s=o,h=o.next;if(Cn(r,s,h)>=0)return!1;for(var m=r.x,y=s.x,x=h.x,S=r.y,C=s.y,F=h.y,G=m<y?m<x?m:x:y<x?y:x,J=S<C?S<F?S:F:C<F?C:F,ne=m>y?m>x?m:x:y>x?y:x,ce=S>C?S>F?S:F:C>F?C:F,me=h.next;me!==r;){if(me.x>=G&&me.x<=ne&&me.y>=J&&me.y<=ce&&oh(m,S,y,C,x,F,me.x,me.y)&&Cn(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function S4(o,r,s,h){var m=o.prev,y=o,x=o.next;if(Cn(m,y,x)>=0)return!1;for(var S=m.x,C=y.x,F=x.x,G=m.y,J=y.y,ne=x.y,ce=S<C?S<F?S:F:C<F?C:F,me=G<J?G<ne?G:ne:J<ne?J:ne,Te=S>C?S>F?S:F:C>F?C:F,Re=G>J?G>ne?G:ne:J>ne?J:ne,Ne=fv(ce,me,r,s,h),Qe=fv(Te,Re,r,s,h),Ze=o.prevZ,Ye=o.nextZ;Ze&&Ze.z>=Ne&&Ye&&Ye.z<=Qe;){if(Ze.x>=ce&&Ze.x<=Te&&Ze.y>=me&&Ze.y<=Re&&Ze!==m&&Ze!==x&&oh(S,G,C,J,F,ne,Ze.x,Ze.y)&&Cn(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,Ye.x>=ce&&Ye.x<=Te&&Ye.y>=me&&Ye.y<=Re&&Ye!==m&&Ye!==x&&oh(S,G,C,J,F,ne,Ye.x,Ye.y)&&Cn(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;Ze&&Ze.z>=Ne;){if(Ze.x>=ce&&Ze.x<=Te&&Ze.y>=me&&Ze.y<=Re&&Ze!==m&&Ze!==x&&oh(S,G,C,J,F,ne,Ze.x,Ze.y)&&Cn(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;Ye&&Ye.z<=Qe;){if(Ye.x>=ce&&Ye.x<=Te&&Ye.y>=me&&Ye.y<=Re&&Ye!==m&&Ye!==x&&oh(S,G,C,J,F,ne,Ye.x,Ye.y)&&Cn(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function E4(o,r,s){var h=o;do{var m=h.prev,y=h.next.next;!Tm(m,y)&&H2(m,h,h.next,y)&&dd(m,y)&&dd(y,m)&&(r.push(m.i/s|0),r.push(h.i/s|0),r.push(y.i/s|0),pd(h),pd(h.next),h=o=y),h=h.next}while(h!==o);return tc(h)}function T4(o,r,s,h,m,y){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&k4(x,S)){var C=Z2(x,S);return x=tc(x,x.next),C=tc(C,C.next),fd(x,r,s,h,m,y,0),void fd(C,r,s,h,m,y,0)}S=S.next}x=x.next}while(x!==o)}function P4(o,r){return o.x-r.x}function A4(o,r){var s=function(m,y){var x,S=y,C=m.x,F=m.y,G=-1/0;do{if(F<=S.y&&F>=S.next.y&&S.next.y!==S.y){var J=S.x+(F-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(J<=C&&J>G&&(G=J,x=S.x<S.next.x?S:S.next,J===C))return x}S=S.next}while(S!==y);if(!x)return null;var ne,ce=x,me=x.x,Te=x.y,Re=1/0;S=x;do C>=S.x&&S.x>=me&&C!==S.x&&oh(F<Te?C:G,F,me,Te,F<Te?G:C,F,S.x,S.y)&&(ne=Math.abs(F-S.y)/(C-S.x),dd(S,m)&&(ne<Re||ne===Re&&(S.x>x.x||S.x===x.x&&I4(x,S)))&&(x=S,Re=ne)),S=S.next;while(S!==ce);return x}(o,r);if(!s)return r;var h=Z2(s,o);return tc(h,h.next),tc(s,s.next)}function I4(o,r){return Cn(o.prev,o,r.prev)<0&&Cn(r.next,o,o.next)<0}function fv(o,r,s,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function C4(o){var r=o,s=o;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==o);return s}function oh(o,r,s,h,m,y,x,S){return(m-x)*(r-S)>=(o-x)*(y-S)&&(o-x)*(h-S)>=(s-x)*(r-S)&&(s-x)*(y-S)>=(m-x)*(h-S)}function k4(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&H2(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(o,r)&&(dd(o,r)&&dd(r,o)&&function(s,h){var m=s,y=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(o,r)&&(Cn(o.prev,o,r.prev)||Cn(o,r.prev,r))||Tm(o,r)&&Cn(o.prev,o,o.next)>0&&Cn(r.prev,r,r.next)>0)}function Cn(o,r,s){return(r.y-o.y)*(s.x-r.x)-(r.x-o.x)*(s.y-r.y)}function Tm(o,r){return o.x===r.x&&o.y===r.y}function H2(o,r,s,h){var m=Am(Cn(o,r,s)),y=Am(Cn(o,r,h)),x=Am(Cn(s,h,o)),S=Am(Cn(s,h,r));return m!==y&&x!==S||!(m!==0||!Pm(o,s,r))||!(y!==0||!Pm(o,h,r))||!(x!==0||!Pm(s,o,h))||!(S!==0||!Pm(s,r,h))}function Pm(o,r,s){return r.x<=Math.max(o.x,s.x)&&r.x>=Math.min(o.x,s.x)&&r.y<=Math.max(o.y,s.y)&&r.y>=Math.min(o.y,s.y)}function Am(o){return o>0?1:o<0?-1:0}function dd(o,r){return Cn(o.prev,o,o.next)<0?Cn(o,r,o.next)>=0&&Cn(o,o.prev,r)>=0:Cn(o,r,o.prev)<0||Cn(o,o.next,r)<0}function Z2(o,r){var s=new dv(o.i,o.x,o.y),h=new dv(r.i,r.x,r.y),m=o.next,y=r.prev;return o.next=r,r.prev=o,s.next=m,m.prev=s,h.next=s,s.prev=h,y.next=h,h.prev=y,h}function X2(o,r,s,h){var m=new dv(o,r,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function pd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function dv(o,r,s){this.i=o,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pv(o,r,s,h){for(var m=0,y=r,x=s-h;y<s;y+=h)m+=(o[x]-o[y])*(o[y+1]+o[x+1]),x=y;return m}hv.exports=Em,hv.exports.default=Em,Em.deviation=function(o,r,s,h){var m=r&&r.length,y=Math.abs(pv(o,0,m?r[0]*s:o.length,s));if(m)for(var x=0,S=r.length;x<S;x++)y-=Math.abs(pv(o,r[x]*s,x<S-1?r[x+1]*s:o.length,s));var C=0;for(x=0;x<h.length;x+=3){var F=h[x]*s,G=h[x+1]*s,J=h[x+2]*s;C+=Math.abs((o[F]-o[J])*(o[G+1]-o[F+1])-(o[F]-o[G])*(o[J+1]-o[F+1]))}return y===0&&C===0?0:Math.abs((C-y)/y)},Em.flatten=function(o){for(var r=o[0][0].length,s={vertices:[],holes:[],dimensions:r},h=0,m=0;m<o.length;m++){for(var y=0;y<o[m].length;y++)for(var x=0;x<r;x++)s.vertices.push(o[m][y][x]);m>0&&s.holes.push(h+=o[m-1].length)}return s};var q2=w(hv.exports);function mv(o,r,s){const h=s.patternDependencies;let m=!1;for(const y of r){const x=y.paint.get(`${o}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function gv(o,r,s,h,m){const y=m.patternDependencies;for(const x of r){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let C=S.evaluate({zoom:h-1},s,{},m.availableImages),F=S.evaluate({zoom:h},s,{},m.availableImages),G=S.evaluate({zoom:h+1},s,{},m.availableImages);C=C&&C.name?C.name:C,F=F&&F.name?F.name:F,G=G&&G.name?G.name:G,y[C]=!0,y[F]=!0,y[G]=!0,s.patterns[x.id]={min:C,mid:F,max:G}}}return s}class yv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ul,this.indexArray=new qn,this.indexArray2=new dn,this.programConfigurations=new Yu(r.layers,r.zoom),this.segments=new Un,this.segments2=new Un,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=mv("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),x=[];for(const{feature:S,id:C,index:F,sourceLayerIndex:G}of r){const J=this.layers[0]._featureFilter.needGeometry,ne=ec(S,J);if(!this.layers[0]._featureFilter.filter(new en(this.zoom),ne,h))continue;const ce=y?m.evaluate(ne,{},h,s.availableImages):void 0,me={id:C,properties:S.properties,type:S.type,sourceLayerIndex:G,index:F,geometry:J?ne.geometry:Qu(S),patterns:{},sortKey:ce};x.push(me)}y&&x.sort((S,C)=>S.sortKey-C.sortKey);for(const S of x){const{geometry:C,index:F,sourceLayerIndex:G}=S;if(this.hasPattern){const J=gv("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(S,C,F,h,{});s.featureIndex.insert(r[F].feature,C,F,G,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,w4),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,h,m,y){for(const x of zl(s,500)){let S=0;for(const ce of x)S+=ce.length;const C=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),F=C.vertexLength,G=[],J=[];for(const ce of x){if(ce.length===0)continue;ce!==x[0]&&J.push(G.length/2);const me=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),Te=me.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(Te+ce.length-1,Te),G.push(ce[0].x),G.push(ce[0].y);for(let Re=1;Re<ce.length;Re++)this.layoutVertexArray.emplaceBack(ce[Re].x,ce[Re].y),this.indexArray2.emplaceBack(Te+Re-1,Te+Re),G.push(ce[Re].x),G.push(ce[Re].y);me.vertexLength+=ce.length,me.primitiveLength+=ce.length}const ne=q2(G,J);for(let ce=0;ce<ne.length;ce+=3)this.indexArray.emplaceBack(F+ne[ce],F+ne[ce+1],F+ne[ce+2]);C.vertexLength+=S,C.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}let K2,J2;$t("FillBucket",yv,{omit:["layers","patternFeatures"]});var M4={get paint(){return J2=J2||new p({"fill-antialias":new Yt(et.paint_fill["fill-antialias"]),"fill-opacity":new sr(et.paint_fill["fill-opacity"]),"fill-color":new sr(et.paint_fill["fill-color"]),"fill-outline-color":new sr(et.paint_fill["fill-outline-color"]),"fill-translate":new Yt(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Yt(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new v(et.paint_fill["fill-pattern"])})},get layout(){return K2=K2||new p({"fill-sort-key":new sr(et.layout_fill["fill-sort-key"])})}};class O4 extends _{constructor(r){super(r,M4)}recalculate(r,s){super.recalculate(r,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new yv(r)}queryRadius(){return wm(this.paint.get("fill-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S){return F2(bm(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const F4=$([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),R4=$([{name:"a_centroid",components:2,type:"Int16"}],4),{members:j4}=F4;var Zl={},z4=E,Y2=ah;function ah(o,r,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(L4,this,r)}function L4(o,r,s){o==1?r.id=s.readVarint():o==2?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var x=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[x]=S}}(s,r):o==3?r.type=s.readVarint():o==4&&(r._geometry=s.pos)}function B4(o){for(var r,s,h=0,m=0,y=o.length,x=y-1;m<y;x=m++)h+=((s=o[x]).x-(r=o[m]).x)*(r.y+s.y);return h}ah.types=["Unknown","Point","LineString","Polygon"],ah.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,s=o.readVarint()+o.pos,h=1,m=0,y=0,x=0,S=[];o.pos<s;){if(m<=0){var C=o.readVarint();h=7&C,m=C>>3}if(m--,h===1||h===2)y+=o.readSVarint(),x+=o.readSVarint(),h===1&&(r&&S.push(r),r=[]),r.push(new z4(y,x));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&S.push(r),S},ah.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,s=1,h=0,m=0,y=0,x=1/0,S=-1/0,C=1/0,F=-1/0;o.pos<r;){if(h<=0){var G=o.readVarint();s=7&G,h=G>>3}if(h--,s===1||s===2)(m+=o.readSVarint())<x&&(x=m),m>S&&(S=m),(y+=o.readSVarint())<C&&(C=y),y>F&&(F=y);else if(s!==7)throw new Error("unknown command "+s)}return[x,C,S,F]},ah.prototype.toGeoJSON=function(o,r,s){var h,m,y=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*r,C=this.loadGeometry(),F=ah.types[this.type];function G(ce){for(var me=0;me<ce.length;me++){var Te=ce[me];ce[me]=[360*(Te.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+S)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(h=0;h<C.length;h++)J[h]=C[h][0];G(C=J);break;case 2:for(h=0;h<C.length;h++)G(C[h]);break;case 3:for(C=function(ce){var me=ce.length;if(me<=1)return[ce];for(var Te,Re,Ne=[],Qe=0;Qe<me;Qe++){var Ze=B4(ce[Qe]);Ze!==0&&(Re===void 0&&(Re=Ze<0),Re===Ze<0?(Te&&Ne.push(Te),Te=[ce[Qe]]):Te.push(ce[Qe]))}return Te&&Ne.push(Te),Ne}(C),h=0;h<C.length;h++)for(m=0;m<C[h].length;m++)G(C[h][m])}C.length===1?C=C[0]:F="Multi"+F;var ne={type:"Feature",geometry:{type:F,coordinates:C},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var D4=Y2,Q2=eS;function eS(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(N4,this,r),this.length=this._features.length}function N4(o,r,s){o===15?r.version=s.readVarint():o===1?r.name=s.readString():o===5?r.extent=s.readVarint():o===2?r._features.push(s.pos):o===3?r._keys.push(s.readString()):o===4&&r._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(s))}eS.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new D4(this._pbf,r,this.extent,this._keys,this._values)};var $4=Q2;function U4(o,r,s){if(o===3){var h=new $4(s,s.readVarint()+s.pos);h.length&&(r[h.name]=h)}}Zl.VectorTile=function(o,r){this.layers=o.readFields(U4,{},r)},Zl.VectorTileFeature=Y2,Zl.VectorTileLayer=Q2;const V4=Zl.VectorTileFeature.types,vv=Math.pow(2,13);function md(o,r,s,h,m,y,x,S){o.emplaceBack(r,s,2*Math.floor(h*vv)+x,m*vv*2,y*vv*2,Math.round(S))}class _v{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new qs,this.centroidVertexArray=new Xs,this.indexArray=new qn,this.programConfigurations=new Yu(r.layers,r.zoom),this.segments=new Un,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.features=[],this.hasPattern=mv("fill-extrusion",this.layers,s);for(const{feature:m,id:y,index:x,sourceLayerIndex:S}of r){const C=this.layers[0]._featureFilter.needGeometry,F=ec(m,C);if(!this.layers[0]._featureFilter.filter(new en(this.zoom),F,h))continue;const G={id:y,sourceLayerIndex:S,index:x,geometry:C?F.geometry:Qu(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(gv("fill-extrusion",this.layers,G,this.zoom,s)):this.addFeature(G,G.geometry,x,h,{}),s.featureIndex.insert(m,G.geometry,x,S,this.index,!0)}}addFeatures(r,s,h){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,s,h)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,j4),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,R4.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,h,m,y){for(const x of zl(s,500)){const S={x:0,y:0,vertexCount:0};let C=0;for(const me of x)C+=me.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of x){if(me.length===0||W4(me))continue;let Te=0;for(let Re=0;Re<me.length;Re++){const Ne=me[Re];if(Re>=1){const Qe=me[Re-1];if(!G4(Ne,Qe)){F.vertexLength+4>Un.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=Ne.sub(Qe)._perp()._unit(),Ye=Qe.dist(Ne);Te+Ye>32768&&(Te=0),md(this.layoutVertexArray,Ne.x,Ne.y,Ze.x,Ze.y,0,0,Te),md(this.layoutVertexArray,Ne.x,Ne.y,Ze.x,Ze.y,0,1,Te),S.x+=2*Ne.x,S.y+=2*Ne.y,S.vertexCount+=2,Te+=Ye,md(this.layoutVertexArray,Qe.x,Qe.y,Ze.x,Ze.y,0,0,Te),md(this.layoutVertexArray,Qe.x,Qe.y,Ze.x,Ze.y,0,1,Te),S.x+=2*Qe.x,S.y+=2*Qe.y,S.vertexCount+=2;const lt=F.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+C>Un.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),V4[r.type]!=="Polygon")continue;const G=[],J=[],ne=F.vertexLength;for(const me of x)if(me.length!==0){me!==x[0]&&J.push(G.length/2);for(let Te=0;Te<me.length;Te++){const Re=me[Te];md(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),S.x+=Re.x,S.y+=Re.y,S.vertexCount+=1,G.push(Re.x),G.push(Re.y)}}const ce=q2(G,J);for(let me=0;me<ce.length;me+=3)this.indexArray.emplaceBack(ne+ce[me],ne+ce[me+2],ne+ce[me+1]);F.primitiveLength+=ce.length/3,F.vertexLength+=C;for(let me=0;me<S.vertexCount;me++){const Te=Math.floor(S.x/S.vertexCount),Re=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(Te,Re)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}function G4(o,r){return o.x===r.x&&(o.x<0||o.x>Ln)||o.y===r.y&&(o.y<0||o.y>Ln)}function W4(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Ln)||o.every(r=>r.y<0)||o.every(r=>r.y>Ln)}let tS;$t("FillExtrusionBucket",_v,{omit:["layers","features"]});var H4={get paint(){return tS=tS||new p({"fill-extrusion-opacity":new Yt(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sr(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yt(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yt(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new v(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sr(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sr(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yt(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Z4 extends _{constructor(r){super(r,H4)}createBucket(r){return new _v(r)}queryRadius(){return wm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,s,h,m,y,x,S,C){const F=bm(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),G=this.paint.get("fill-extrusion-height").evaluate(s,h),J=this.paint.get("fill-extrusion-base").evaluate(s,h),ne=function(me,Te,Re,Ne){const Qe=[];for(const Ze of me){const Ye=[Ze.x,Ze.y,0,1];Sm(Ye,Ye,Te),Qe.push(new b(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return Qe}(F,C),ce=function(me,Te,Re,Ne){const Qe=[],Ze=[],Ye=Ne[8]*Te,lt=Ne[9]*Te,_t=Ne[10]*Te,Ft=Ne[11]*Te,ir=Ne[8]*Re,zt=Ne[9]*Re,Ot=Ne[10]*Re,Kt=Ne[11]*Re;for(const Ut of me){const Nt=[],dt=[];for(const Qt of Ut){const Xt=Qt.x,fr=Qt.y,Jr=Ne[0]*Xt+Ne[4]*fr+Ne[12],Xr=Ne[1]*Xt+Ne[5]*fr+Ne[13],Kn=Ne[2]*Xt+Ne[6]*fr+Ne[14],ca=Ne[3]*Xt+Ne[7]*fr+Ne[15],fi=Kn+_t,En=ca+Ft,$i=Jr+ir,Ui=Xr+zt,Vi=Kn+Ot,Tn=ca+Kt,Jn=new b((Jr+Ye)/En,(Xr+lt)/En);Jn.z=fi/En,Nt.push(Jn);const Ii=new b($i/Tn,Ui/Tn);Ii.z=Vi/Tn,dt.push(Ii)}Qe.push(Nt),Ze.push(dt)}return[Qe,Ze]}(m,J,G,C);return function(me,Te,Re){let Ne=1/0;F2(Re,Te)&&(Ne=rS(Re,Te[0]));for(let Qe=0;Qe<Te.length;Qe++){const Ze=Te[Qe],Ye=me[Qe];for(let lt=0;lt<Ze.length-1;lt++){const _t=Ze[lt],Ft=[_t,Ze[lt+1],Ye[lt+1],Ye[lt],_t];O2(Re,Ft)&&(Ne=Math.min(Ne,rS(Re,Ft)))}}return Ne!==1/0&&Ne}(ce[0],ce[1],ne)}}function gd(o,r){return o.x*r.x+o.y*r.y}function rS(o,r){if(o.length===1){let s=0;const h=r[s++];let m;for(;!m||h.equals(m);)if(m=r[s++],!m)return 1/0;for(;s<r.length;s++){const y=r[s],x=o[0],S=m.sub(h),C=y.sub(h),F=x.sub(h),G=gd(S,S),J=gd(S,C),ne=gd(C,C),ce=gd(F,S),me=gd(F,C),Te=G*ne-J*J,Re=(ne*ce-J*me)/Te,Ne=(G*me-J*ce)/Te,Qe=h.z*(1-Re-Ne)+m.z*Re+y.z*Ne;if(isFinite(Qe))return Qe}return 1/0}{let s=1/0;for(const h of r)s=Math.min(s,h.z);return s}}const X4=$([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:q4}=X4,K4=$([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:J4}=K4,Y4=Zl.VectorTileFeature.types,Q4=Math.cos(Math.PI/180*37.5),nS=Math.pow(2,14)/.5;class xv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Yc,this.layoutVertexArray2=new nd,this.indexArray=new qn,this.programConfigurations=new Yu(r.layers,r.zoom),this.segments=new Un,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=mv("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),x=[];for(const{feature:S,id:C,index:F,sourceLayerIndex:G}of r){const J=this.layers[0]._featureFilter.needGeometry,ne=ec(S,J);if(!this.layers[0]._featureFilter.filter(new en(this.zoom),ne,h))continue;const ce=y?m.evaluate(ne,{},h):void 0,me={id:C,properties:S.properties,type:S.type,sourceLayerIndex:G,index:F,geometry:J?ne.geometry:Qu(S),patterns:{},sortKey:ce};x.push(me)}y&&x.sort((S,C)=>S.sortKey-C.sortKey);for(const S of x){const{geometry:C,index:F,sourceLayerIndex:G}=S;if(this.hasPattern){const J=gv("line",this.layers,S,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(S,C,F,h,{});s.featureIndex.insert(r[F].feature,C,F,G,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,J4)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,q4),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,h,m,y){const x=this.layers[0].layout,S=x.get("line-join").evaluate(r,{}),C=x.get("line-cap"),F=x.get("line-miter-limit"),G=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const J of s)this.addLine(J,r,S,C,F,G);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}addLine(r,s,h,m,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ne=0;Ne<r.length-1;Ne++)this.totalDistance+=r[Ne].dist(r[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=Y4[s.type]==="Polygon";let C=r.length;for(;C>=2&&r[C-1].equals(r[C-2]);)C--;let F=0;for(;F<C-1&&r[F].equals(r[F+1]);)F++;if(C<(S?3:2))return;h==="bevel"&&(y=1.05);const G=this.overscaling<=16?15*Ln/(512*this.overscaling):0,J=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let ne,ce,me,Te,Re;this.e1=this.e2=-1,S&&(ne=r[C-2],Re=r[F].sub(ne)._unit()._perp());for(let Ne=F;Ne<C;Ne++){if(me=Ne===C-1?S?r[F+1]:void 0:r[Ne+1],me&&r[Ne].equals(me))continue;Re&&(Te=Re),ne&&(ce=ne),ne=r[Ne],Re=me?me.sub(ne)._unit()._perp():Te,Te=Te||Re;let Qe=Te.add(Re);Qe.x===0&&Qe.y===0||Qe._unit();const Ze=Te.x*Re.x+Te.y*Re.y,Ye=Qe.x*Re.x+Qe.y*Re.y,lt=Ye!==0?1/Ye:1/0,_t=2*Math.sqrt(2-2*Ye),Ft=Ye<Q4&&ce&&me,ir=Te.x*Re.y-Te.y*Re.x>0;if(Ft&&Ne>F){const Kt=ne.dist(ce);if(Kt>2*G){const Ut=ne.sub(ne.sub(ce)._mult(G/Kt)._round());this.updateDistance(ce,Ut),this.addCurrentVertex(Ut,Te,0,0,J),ce=Ut}}const zt=ce&&me;let Ot=zt?h:S?"butt":m;if(zt&&Ot==="round"&&(lt<x?Ot="miter":lt<=2&&(Ot="fakeround")),Ot==="miter"&&lt>y&&(Ot="bevel"),Ot==="bevel"&&(lt>2&&(Ot="flipbevel"),lt<y&&(Ot="miter")),ce&&this.updateDistance(ce,ne),Ot==="miter")Qe._mult(lt),this.addCurrentVertex(ne,Qe,0,0,J);else if(Ot==="flipbevel"){if(lt>100)Qe=Re.mult(-1);else{const Kt=lt*Te.add(Re).mag()/Te.sub(Re).mag();Qe._perp()._mult(Kt*(ir?-1:1))}this.addCurrentVertex(ne,Qe,0,0,J),this.addCurrentVertex(ne,Qe.mult(-1),0,0,J)}else if(Ot==="bevel"||Ot==="fakeround"){const Kt=-Math.sqrt(lt*lt-1),Ut=ir?Kt:0,Nt=ir?0:Kt;if(ce&&this.addCurrentVertex(ne,Te,Ut,Nt,J),Ot==="fakeround"){const dt=Math.round(180*_t/Math.PI/20);for(let Qt=1;Qt<dt;Qt++){let Xt=Qt/dt;if(Xt!==.5){const Jr=Xt-.5;Xt+=Xt*Jr*(Xt-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*Jr*Jr+(.848013+Ze*(.215638*Ze-1.06021)))}const fr=Re.sub(Te)._mult(Xt)._add(Te)._unit()._mult(ir?-1:1);this.addHalfVertex(ne,fr.x,fr.y,!1,ir,0,J)}}me&&this.addCurrentVertex(ne,Re,-Ut,-Nt,J)}else if(Ot==="butt")this.addCurrentVertex(ne,Qe,0,0,J);else if(Ot==="square"){const Kt=ce?1:-1;this.addCurrentVertex(ne,Qe,Kt,Kt,J)}else Ot==="round"&&(ce&&(this.addCurrentVertex(ne,Te,0,0,J),this.addCurrentVertex(ne,Te,1,1,J,!0)),me&&(this.addCurrentVertex(ne,Re,-1,-1,J,!0),this.addCurrentVertex(ne,Re,0,0,J)));if(Ft&&Ne<C-1){const Kt=ne.dist(me);if(Kt>2*G){const Ut=ne.add(me.sub(ne)._mult(G/Kt)._round());this.updateDistance(ne,Ut),this.addCurrentVertex(Ut,Re,0,0,J),ne=Ut}}}}addCurrentVertex(r,s,h,m,y,x=!1){const S=s.y*m-s.x,C=-s.y-s.x*m;this.addHalfVertex(r,s.x+s.y*h,s.y-s.x*h,x,!1,h,y),this.addHalfVertex(r,S,C,x,!0,-m,y),this.distance>nS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,h,m,y,x))}addHalfVertex({x:r,y:s},h,m,y,x,S,C){const F=.5*(this.lineClips?this.scaledDistance*(nS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(y?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const G=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,G),C.primitiveLength++),x?this.e2=G:this.e1=G}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}let iS,oS;$t("LineBucket",xv,{omit:["layers","patternFeatures"]});var aS={get paint(){return oS=oS||new p({"line-opacity":new sr(et.paint_line["line-opacity"]),"line-color":new sr(et.paint_line["line-color"]),"line-translate":new Yt(et.paint_line["line-translate"]),"line-translate-anchor":new Yt(et.paint_line["line-translate-anchor"]),"line-width":new sr(et.paint_line["line-width"]),"line-gap-width":new sr(et.paint_line["line-gap-width"]),"line-offset":new sr(et.paint_line["line-offset"]),"line-blur":new sr(et.paint_line["line-blur"]),"line-dasharray":new n(et.paint_line["line-dasharray"]),"line-pattern":new v(et.paint_line["line-pattern"]),"line-gradient":new c(et.paint_line["line-gradient"])})},get layout(){return iS=iS||new p({"line-cap":new Yt(et.layout_line["line-cap"]),"line-join":new sr(et.layout_line["line-join"]),"line-miter-limit":new Yt(et.layout_line["line-miter-limit"]),"line-round-limit":new Yt(et.layout_line["line-round-limit"]),"line-sort-key":new sr(et.layout_line["line-sort-key"])})}};class eF extends sr{possiblyEvaluate(r,s){return s=new en(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,h,m){return s=P({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,h,m)}}let Im;class tF extends _{constructor(r){super(r,aS),this.gradientVersion=0,Im||(Im=new eF(aS.paint.properties["line-width"].specification),Im.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Sa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,s){super.recalculate(r,s),this.paint._values["line-floorwidth"]=Im.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new xv(r)}queryRadius(r){const s=r,h=sS(ud("line-width",this,s),ud("line-gap-width",this,s)),m=ud("line-offset",this,s);return h/2+Math.abs(m)+wm(this.paint.get("line-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S){const C=bm(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),F=S/2*sS(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),G=this.paint.get("line-offset").evaluate(s,h);return G&&(m=function(J,ne){const ce=[];for(let me=0;me<J.length;me++){const Te=J[me],Re=[];for(let Ne=0;Ne<Te.length;Ne++){const Qe=Te[Ne-1],Ze=Te[Ne],Ye=Te[Ne+1],lt=Ne===0?new b(0,0):Ze.sub(Qe)._unit()._perp(),_t=Ne===Te.length-1?new b(0,0):Ye.sub(Ze)._unit()._perp(),Ft=lt._add(_t)._unit(),ir=Ft.x*_t.x+Ft.y*_t.y;ir!==0&&Ft._mult(1/ir),Re.push(Ft._mult(ne)._add(Ze))}ce.push(Re)}return ce}(m,G*S)),function(J,ne,ce){for(let me=0;me<ne.length;me++){const Te=ne[me];if(J.length>=3){for(let Re=0;Re<Te.length;Re++)if(nh(J,Te[Re]))return!0}if(c4(J,Te,ce))return!0}return!1}(C,m,F)}isTileClipped(){return!0}}function sS(o,r){return r>0?r+2*o:o}const rF=$([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nF=$([{name:"a_projected_pos",components:3,type:"Float32"}],4);$([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const iF=$([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);$([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lS=$([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),oF=$([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function aF(o,r,s){return o.sections.forEach(h=>{h.text=function(m,y,x){const S=y.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),us.applyArabicShaping&&(m=us.applyArabicShaping(m)),m}(h.text,r,s)}),o}$([{name:"triangle",components:3,type:"Uint16"}]),$([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),$([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),$([{type:"Float32",name:"offsetX"}]),$([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),$([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const yd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Vn=24,uS=Zr,cS=function(o,r,s,h,m){var y,x,S=8*m-h-1,C=(1<<S)-1,F=C>>1,G=-7,J=s?m-1:0,ne=s?-1:1,ce=o[r+J];for(J+=ne,y=ce&(1<<-G)-1,ce>>=-G,G+=S;G>0;y=256*y+o[r+J],J+=ne,G-=8);for(x=y&(1<<-G)-1,y>>=-G,G+=h;G>0;x=256*x+o[r+J],J+=ne,G-=8);if(y===0)y=1-F;else{if(y===C)return x?NaN:1/0*(ce?-1:1);x+=Math.pow(2,h),y-=F}return(ce?-1:1)*x*Math.pow(2,y-h)},hS=function(o,r,s,h,m,y){var x,S,C,F=8*y-m-1,G=(1<<F)-1,J=G>>1,ne=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=h?0:y-1,me=h?1:-1,Te=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,x=G):(x=Math.floor(Math.log(r)/Math.LN2),r*(C=Math.pow(2,-x))<1&&(x--,C*=2),(r+=x+J>=1?ne/C:ne*Math.pow(2,1-J))*C>=2&&(x++,C/=2),x+J>=G?(S=0,x=G):x+J>=1?(S=(r*C-1)*Math.pow(2,m),x+=J):(S=r*Math.pow(2,J-1)*Math.pow(2,m),x=0));m>=8;o[s+ce]=255&S,ce+=me,S/=256,m-=8);for(x=x<<m|S,F+=m;F>0;o[s+ce]=255&x,ce+=me,x/=256,F-=8);o[s+ce-me]|=128*Te};function Zr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var wv=4294967296,fS=1/wv,dS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Js(o){return o.type===Zr.Bytes?o.readVarint()+o.pos:o.pos+1}function sh(o,r,s){return s?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function pS(o,r,s){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=o;m--)s.buf[m+h]=s.buf[m]}function sF(o,r){for(var s=0;s<o.length;s++)r.writeVarint(o[s])}function lF(o,r){for(var s=0;s<o.length;s++)r.writeSVarint(o[s])}function uF(o,r){for(var s=0;s<o.length;s++)r.writeFloat(o[s])}function cF(o,r){for(var s=0;s<o.length;s++)r.writeDouble(o[s])}function hF(o,r){for(var s=0;s<o.length;s++)r.writeBoolean(o[s])}function fF(o,r){for(var s=0;s<o.length;s++)r.writeFixed32(o[s])}function dF(o,r){for(var s=0;s<o.length;s++)r.writeSFixed32(o[s])}function pF(o,r){for(var s=0;s<o.length;s++)r.writeFixed64(o[s])}function mF(o,r){for(var s=0;s<o.length;s++)r.writeSFixed64(o[s])}function Cm(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function lh(o,r,s){o[s]=r,o[s+1]=r>>>8,o[s+2]=r>>>16,o[s+3]=r>>>24}function mS(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}Zr.prototype={destroy:function(){this.buf=null},readFields:function(o,r,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,o(m,r,this),this.pos===y&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=Cm(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=mS(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Cm(this.buf,this.pos)+Cm(this.buf,this.pos+4)*wv;return this.pos+=8,o},readSFixed64:function(){var o=Cm(this.buf,this.pos)+mS(this.buf,this.pos+4)*wv;return this.pos+=8,o},readFloat:function(){var o=cS(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=cS(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,s,h=this.buf;return r=127&(s=h[this.pos++]),s<128?r:(r|=(127&(s=h[this.pos++]))<<7,s<128?r:(r|=(127&(s=h[this.pos++]))<<14,s<128?r:(r|=(127&(s=h[this.pos++]))<<21,s<128?r:function(m,y,x){var S,C,F=x.buf;if(S=(112&(C=F[x.pos++]))>>4,C<128||(S|=(127&(C=F[x.pos++]))<<3,C<128)||(S|=(127&(C=F[x.pos++]))<<10,C<128)||(S|=(127&(C=F[x.pos++]))<<17,C<128)||(S|=(127&(C=F[x.pos++]))<<24,C<128)||(S|=(1&(C=F[x.pos++]))<<31,C<128))return sh(m,S,y);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&dS?function(s,h,m){return dS.decode(s.subarray(h,m))}(this.buf,r,o):function(s,h,m){for(var y="",x=h;x<m;){var S,C,F,G=s[x],J=null,ne=G>239?4:G>223?3:G>191?2:1;if(x+ne>m)break;ne===1?G<128&&(J=G):ne===2?(192&(S=s[x+1]))==128&&(J=(31&G)<<6|63&S)<=127&&(J=null):ne===3?(C=s[x+2],(192&(S=s[x+1]))==128&&(192&C)==128&&((J=(15&G)<<12|(63&S)<<6|63&C)<=2047||J>=55296&&J<=57343)&&(J=null)):ne===4&&(C=s[x+2],F=s[x+3],(192&(S=s[x+1]))==128&&(192&C)==128&&(192&F)==128&&((J=(15&G)<<18|(63&S)<<12|(63&C)<<6|63&F)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,ne=1):J>65535&&(J-=65536,y+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),y+=String.fromCharCode(J),x+=ne}return y}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==Zr.Bytes)return o.push(this.readVarint(r));var s=Js(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==Zr.Bytes)return o.push(this.readSVarint());var r=Js(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Zr.Bytes)return o.push(this.readBoolean());var r=Js(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Zr.Bytes)return o.push(this.readFloat());var r=Js(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Zr.Bytes)return o.push(this.readDouble());var r=Js(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Zr.Bytes)return o.push(this.readFixed32());var r=Js(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Zr.Bytes)return o.push(this.readSFixed32());var r=Js(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Zr.Bytes)return o.push(this.readFixed64());var r=Js(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Zr.Bytes)return o.push(this.readSFixed64());var r=Js(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(r===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Zr.Fixed32)this.pos+=4;else{if(r!==Zr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),lh(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),lh(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),lh(this.buf,-1&o,this.pos),lh(this.buf,Math.floor(o*fS),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),lh(this.buf,-1&o,this.pos),lh(this.buf,Math.floor(o*fS),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,s){var h,m;if(r>=0?(h=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,x,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)}(h,0,s),function(y,x){var S=(7&y)<<4;x.buf[x.pos++]|=S|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,m,y){for(var x,S,C=0;C<m.length;C++){if((x=m.charCodeAt(C))>55295&&x<57344){if(!S){x>56319||C+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y}(this.buf,o,this.pos);var s=this.pos-r;s>=128&&pS(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),hS(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),hS(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,r){this.pos++;var s=this.pos;o(r,this);var h=this.pos-s;h>=128&&pS(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,s){this.writeTag(o,Zr.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,sF,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,lF,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,hF,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,uF,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,cF,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,fF,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,dF,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,pF,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,mF,r)},writeBytesField:function(o,r){this.writeTag(o,Zr.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,Zr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,Zr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,Zr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,Zr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,Zr.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,Zr.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,Zr.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,Zr.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,Zr.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var bv=w(uS);const Sv=3;function gF(o,r,s){o===1&&s.readMessage(yF,r)}function yF(o,r,s){if(o===3){const{id:h,bitmap:m,width:y,height:x,left:S,top:C,advance:F}=s.readMessage(vF,{});r.push({id:h,bitmap:new hd({width:y+2*Sv,height:x+2*Sv},m),metrics:{width:y,height:x,left:S,top:C,advance:F}})}}function vF(o,r,s){o===1?r.id=s.readVarint():o===2?r.bitmap=s.readBytes():o===3?r.width=s.readVarint():o===4?r.height=s.readVarint():o===5?r.left=s.readSVarint():o===6?r.top=s.readSVarint():o===7&&(r.advance=s.readVarint())}const gS=Sv;function yS(o){let r=0,s=0;for(const x of o)r+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let m=0,y=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const C=h[S];if(!(x.w>C.w||x.h>C.h)){if(x.x=C.x,x.y=C.y,y=Math.max(y,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===C.w&&x.h===C.h){const F=h.pop();S<h.length&&(h[S]=F)}else x.h===C.h?(C.x+=x.w,C.w-=x.w):x.w===C.w?(C.y+=x.h,C.h-=x.h):(h.push({x:C.x+x.w,y:C.y,w:C.w-x.w,h:x.h}),C.y+=x.h,C.h-=x.h);break}}return{w:m,h:y,fill:r/(m*y)||0}}const Qi=1;class Ev{constructor(r,{pixelRatio:s,version:h,stretchX:m,stretchY:y,content:x,textFitWidth:S,textFitHeight:C}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=x,this.version=h,this.textFitWidth=S,this.textFitHeight=C}get tl(){return[this.paddedRect.x+Qi,this.paddedRect.y+Qi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Qi,this.paddedRect.y+this.paddedRect.h-Qi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Qi)/this.pixelRatio,(this.paddedRect.h-2*Qi)/this.pixelRatio]}}class vS{constructor(r,s){const h={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(r,h,y),this.addImages(s,m,y);const{w:x,h:S}=yS(y),C=new Lo({width:x||1,height:S||1});for(const F in r){const G=r[F],J=h[F].paddedRect;Lo.copy(G.data,C,{x:0,y:0},{x:J.x+Qi,y:J.y+Qi},G.data)}for(const F in s){const G=s[F],J=m[F].paddedRect,ne=J.x+Qi,ce=J.y+Qi,me=G.data.width,Te=G.data.height;Lo.copy(G.data,C,{x:0,y:0},{x:ne,y:ce},G.data),Lo.copy(G.data,C,{x:0,y:Te-1},{x:ne,y:ce-1},{width:me,height:1}),Lo.copy(G.data,C,{x:0,y:0},{x:ne,y:ce+Te},{width:me,height:1}),Lo.copy(G.data,C,{x:me-1,y:0},{x:ne-1,y:ce},{width:1,height:Te}),Lo.copy(G.data,C,{x:0,y:0},{x:ne+me,y:ce},{width:1,height:Te})}this.image=C,this.iconPositions=h,this.patternPositions=m}addImages(r,s,h){for(const m in r){const y=r[m],x={x:0,y:0,w:y.data.width+2*Qi,h:y.data.height+2*Qi};h.push(x),s[m]=new Ev(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),s)}patchUpdatedImage(r,s,h){if(!r||!s||r.version===s.version)return;r.version=s.version;const[m,y]=r.tl;h.update(s.data,void 0,{x:m,y})}}var Xl;$t("ImagePosition",Ev),$t("ImageAtlas",vS),d.ai=void 0,(Xl=d.ai||(d.ai={}))[Xl.none=0]="none",Xl[Xl.horizontal=1]="horizontal",Xl[Xl.vertical=2]="vertical",Xl[Xl.horizontalOnly=3]="horizontalOnly";const vd=-17;class _d{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const h=new _d;return h.scale=r||1,h.fontStack=s,h}static forImage(r){const s=new _d;return s.imageName=r,s}}class uh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const h=new uh;for(let m=0;m<r.sections.length;m++){const y=r.sections[m];y.image?h.addImageSection(y):h.addTextSection(y,s)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let s="";for(let h=0;h<r.length;h++){const m=r.charCodeAt(h+1)||null,y=r.charCodeAt(h-1)||null;s+=m&&dm(m)&&!yd[r[h+1]]||y&&dm(y)&&!yd[r[h-1]]||!yd[r[h]]?r[h]:yd[r[h]]}return s}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&Mm[this.text.charCodeAt(h)];h++)r++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&Mm[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const h=new uh;return h.text=this.text.substring(r,s),h.sectionIndex=this.sectionIndex.slice(r,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(_d.forText(r.scale,r.fontStack||s));const h=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(h)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void ge("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(_d.forImage(s)),this.sectionIndex.push(this.sections.length-1)):ge("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function km(o,r,s,h,m,y,x,S,C,F,G,J,ne,ce,me){const Te=uh.fromFeature(o,m);let Re;J===d.ai.vertical&&Te.verticalizePunctuation();const{processBidirectionalText:Ne,processStyledBidirectionalText:Qe}=us;if(Ne&&Te.sections.length===1){Re=[];const lt=Ne(Te.toString(),Tv(Te,F,y,r,h,ce));for(const _t of lt){const Ft=new uh;Ft.text=_t,Ft.sections=Te.sections;for(let ir=0;ir<_t.length;ir++)Ft.sectionIndex.push(0);Re.push(Ft)}}else if(Qe){Re=[];const lt=Qe(Te.text,Te.sectionIndex,Tv(Te,F,y,r,h,ce));for(const _t of lt){const Ft=new uh;Ft.text=_t[0],Ft.sectionIndex=_t[1],Ft.sections=Te.sections,Re.push(Ft)}}else Re=function(lt,_t){const Ft=[],ir=lt.text;let zt=0;for(const Ot of _t)Ft.push(lt.substring(zt,Ot)),zt=Ot;return zt<ir.length&&Ft.push(lt.substring(zt,ir.length)),Ft}(Te,Tv(Te,F,y,r,h,ce));const Ze=[],Ye={positionedLines:Ze,text:Te.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(lt,_t,Ft,ir,zt,Ot,Kt,Ut,Nt,dt,Qt,Xt){let fr=0,Jr=vd,Xr=0,Kn=0;const ca=Ut==="right"?1:Ut==="left"?0:.5;let fi=0;for(const Tn of zt){Tn.trim();const Jn=Tn.getMaxScale(),Ii=(Jn-1)*Vn,di={positionedGlyphs:[],lineOffset:0};lt.positionedLines[fi]=di;const Gi=di.positionedGlyphs;let pi=0;if(!Tn.length()){Jr+=Ot,++fi;continue}for(let eo=0;eo<Tn.length();eo++){const jr=Tn.getSection(eo),tn=Tn.getSectionIndex(eo),hn=Tn.getCharCode(eo);let yo=0,yn=null,dh=null,ds=null,ps=Vn;const ha=!(Nt===d.ai.horizontal||!Qt&&!ed(hn)||Qt&&(Mm[hn]||(En=hn,Lt.Arabic(En)||Lt["Arabic Supplement"](En)||Lt["Arabic Extended-A"](En)||Lt["Arabic Presentation Forms-A"](En)||Lt["Arabic Presentation Forms-B"](En))));if(jr.imageName){const No=ir[jr.imageName];if(!No)continue;ds=jr.imageName,lt.iconsInText=lt.iconsInText||!0,dh=No.paddedRect;const ti=No.displaySize;jr.scale=jr.scale*Vn/Xt,yn={width:ti[0],height:ti[1],left:Qi,top:-gS,advance:ha?ti[1]:ti[0]},yo=Ii+(Vn-ti[1]*jr.scale),ps=yn.advance;const Ys=ha?ti[0]*jr.scale-Vn*Jn:ti[1]*jr.scale-Vn*Jn;Ys>0&&Ys>pi&&(pi=Ys)}else{const No=Ft[jr.fontStack],ti=No&&No[hn];if(ti&&ti.rect)dh=ti.rect,yn=ti.metrics;else{const Ys=_t[jr.fontStack],Ed=Ys&&Ys[hn];if(!Ed)continue;yn=Ed.metrics}yo=(Jn-jr.scale)*Vn}ha?(lt.verticalizable=!0,Gi.push({glyph:hn,imageName:ds,x:fr,y:Jr+yo,vertical:ha,scale:jr.scale,fontStack:jr.fontStack,sectionIndex:tn,metrics:yn,rect:dh}),fr+=ps*jr.scale+dt):(Gi.push({glyph:hn,imageName:ds,x:fr,y:Jr+yo,vertical:ha,scale:jr.scale,fontStack:jr.fontStack,sectionIndex:tn,metrics:yn,rect:dh}),fr+=yn.advance*jr.scale+dt)}Gi.length!==0&&(Xr=Math.max(fr-dt,Xr),bF(Gi,0,Gi.length-1,ca,pi)),fr=0;const Do=Ot*Jn+pi;di.lineOffset=Math.max(pi,Ii),Jr+=Do,Kn=Math.max(Do,Kn),++fi}var En;const $i=Jr-vd,{horizontalAlign:Ui,verticalAlign:Vi}=Pv(Kt);(function(Tn,Jn,Ii,di,Gi,pi,Do,eo,jr){const tn=(Jn-Ii)*Gi;let hn=0;hn=pi!==Do?-eo*di-vd:(-di*jr+.5)*Do;for(const yo of Tn)for(const yn of yo.positionedGlyphs)yn.x+=tn,yn.y+=hn})(lt.positionedLines,ca,Ui,Vi,Xr,Kn,Ot,$i,zt.length),lt.top+=-Vi*$i,lt.bottom=lt.top+$i,lt.left+=-Ui*Xr,lt.right=lt.left+Xr}(Ye,r,s,h,Re,x,S,C,J,F,ne,me),!function(lt){for(const _t of lt)if(_t.positionedGlyphs.length!==0)return!1;return!0}(Ze)&&Ye}const Mm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_F={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},xF={40:!0};function _S(o,r,s,h,m,y){if(r.imageName){const x=h[r.imageName];return x?x.displaySize[0]*r.scale*Vn/y+m:0}{const x=s[r.fontStack],S=x&&x[o];return S?S.metrics.advance*r.scale+m:0}}function xS(o,r,s,h){const m=Math.pow(o-r,2);return h?o<r?m/2:2*m:m+Math.abs(s)*s}function wF(o,r,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function wS(o,r,s,h,m,y){let x=null,S=xS(r,s,m,y);for(const C of h){const F=xS(r-C.x,s,m,y)+C.badness;F<=S&&(x=C,S=F)}return{index:o,x:r,priorBreak:x,badness:S}}function bS(o){return o?bS(o.priorBreak).concat(o.index):[]}function Tv(o,r,s,h,m,y){if(!o)return[];const x=[],S=function(J,ne,ce,me,Te,Re){let Ne=0;for(let Qe=0;Qe<J.length();Qe++){const Ze=J.getSection(Qe);Ne+=_S(J.getCharCode(Qe),Ze,me,Te,ne,Re)}return Ne/Math.max(1,Math.ceil(Ne/ce))}(o,r,s,h,m,y),C=o.text.indexOf("")>=0;let F=0;for(let J=0;J<o.length();J++){const ne=o.getSection(J),ce=o.getCharCode(J);if(Mm[ce]||(F+=_S(ce,ne,h,m,r,y)),J<o.length()-1){const me=!((G=ce)<11904||!(Lt["Bopomofo Extended"](G)||Lt.Bopomofo(G)||Lt["CJK Compatibility Forms"](G)||Lt["CJK Compatibility Ideographs"](G)||Lt["CJK Compatibility"](G)||Lt["CJK Radicals Supplement"](G)||Lt["CJK Strokes"](G)||Lt["CJK Symbols and Punctuation"](G)||Lt["CJK Unified Ideographs Extension A"](G)||Lt["CJK Unified Ideographs"](G)||Lt["Enclosed CJK Letters and Months"](G)||Lt["Halfwidth and Fullwidth Forms"](G)||Lt.Hiragana(G)||Lt["Ideographic Description Characters"](G)||Lt["Kangxi Radicals"](G)||Lt["Katakana Phonetic Extensions"](G)||Lt.Katakana(G)||Lt["Vertical Forms"](G)||Lt["Yi Radicals"](G)||Lt["Yi Syllables"](G)));(_F[ce]||me||ne.imageName||J!==o.length()-2&&xF[o.getCharCode(J+1)])&&x.push(wS(J+1,F,S,x,wF(ce,o.getCharCode(J+1),me&&C),!1))}}var G;return bS(wS(o.length(),F,S,x,0,!0))}function Pv(o){let r=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function bF(o,r,s,h,m){if(!h&&!m)return;const y=o[s],x=(o[s].x+y.metrics.advance*y.scale)*h;for(let S=r;S<=s;S++)o[S].x-=x,o[S].y+=m}function SF(o,r,s){const{horizontalAlign:h,verticalAlign:m}=Pv(s),y=r[0]-o.displaySize[0]*h,x=r[1]-o.displaySize[1]*m;return{image:o,top:x,bottom:x+o.displaySize[1],left:y,right:y+o.displaySize[0]}}function SS(o){var r,s;let h=o.left,m=o.top,y=o.right-h,x=o.bottom-m;const S=(r=o.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",C=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",F=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(C==="proportional"){if(S==="stretchOnly"&&y/x<F||S==="proportional"){const G=Math.ceil(x*F);h*=G/y,y=G}}else if(S==="proportional"&&C==="stretchOnly"&&F!==0&&y/x>F){const G=Math.ceil(y/F);m*=G/x,x=G}return{x1:h,y1:m,x2:h+y,y2:m+x}}function ES(o,r,s,h,m,y){const x=o.image;let S;if(x.content){const Re=x.content,Ne=x.pixelRatio||1;S=[Re[0]/Ne,Re[1]/Ne,x.displaySize[0]-Re[2]/Ne,x.displaySize[1]-Re[3]/Ne]}const C=r.left*y,F=r.right*y;let G,J,ne,ce;s==="width"||s==="both"?(ce=m[0]+C-h[3],J=m[0]+F+h[1]):(ce=m[0]+(C+F-x.displaySize[0])/2,J=ce+x.displaySize[0]);const me=r.top*y,Te=r.bottom*y;return s==="height"||s==="both"?(G=m[1]+me-h[0],ne=m[1]+Te+h[2]):(G=m[1]+(me+Te-x.displaySize[1])/2,ne=G+x.displaySize[1]),{image:x,top:G,right:J,bottom:ne,left:ce,collisionPadding:S}}const xd=255,fs=128,ql=xd*fs;function TS(o,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new en(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let y=0;for(;y<h.length&&h[y]<=o;)y++;y=Math.max(0,y-1);let x=y;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[y],C=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:C,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:C,minSize:s.evaluate(new en(S)),maxSize:s.evaluate(new en(C)),interpolationType:m}}}function Av(o,r,s){let h="never";const m=o.get(r);return m?h=m:o.get(s)&&(h="always"),h}const EF=Zl.VectorTileFeature.types,TF=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Om(o,r,s,h,m,y,x,S,C,F,G,J,ne){const ce=S?Math.min(ql,Math.round(S[0])):0,me=S?Math.min(ql,Math.round(S[1])):0;o.emplaceBack(r,s,Math.round(32*h),Math.round(32*m),y,x,(ce<<1)+(C?1:0),me,16*F,16*G,256*J,256*ne)}function Iv(o,r,s){o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s)}function PF(o){for(const r of o.sections)if(td(r.text))return!0;return!1}class Cv{constructor(r){this.layoutVertexArray=new zo,this.indexArray=new qn,this.programConfigurations=r,this.segments=new Un,this.dynamicLayoutVertexArray=new cs,this.opacityVertexArray=new Vl,this.hasVisibleVertices=!1,this.placedSymbolArray=new un}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,rF.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,nF.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,TF,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$t("SymbolBuffers",Cv);class kv{constructor(r,s,h){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Un,this.collisionVertexArray=new ci}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,iF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$t("CollisionBuffers",kv);class ch{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=lv([]),this.placementViewportMatrix=lv([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=TS(this.zoom,s["text-size"]),this.iconSizeData=TS(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=Av(h,"text-overlap","text-allow-overlap")!=="never"||Av(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new Cv(new Yu(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Cv(new Yu(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new cn,this.lineVertexArray=new Di,this.symbolInstances=new Ro,this.textAnchorOffsets=new si}calculateGlyphDependencies(r,s,h,m,y){for(let x=0;x<r.length;x++)if(s[r.charCodeAt(x)]=!0,(h||m)&&y){const S=yd[r.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(r,s,h){const m=this.layers[0],y=m.layout,x=y.get("text-font"),S=y.get("text-field"),C=y.get("icon-image"),F=(S.value.kind!=="constant"||S.value.value instanceof In&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),G=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,J=y.get("symbol-sort-key");if(this.features=[],!F&&!G)return;const ne=s.iconDependencies,ce=s.glyphDependencies,me=s.availableImages,Te=new en(this.zoom);for(const{feature:Re,id:Ne,index:Qe,sourceLayerIndex:Ze}of r){const Ye=m._featureFilter.needGeometry,lt=ec(Re,Ye);if(!m._featureFilter.filter(Te,lt,h))continue;let _t,Ft;if(Ye||(lt.geometry=Qu(Re)),F){const zt=m.getValueAndResolveTokens("text-field",lt,h,me),Ot=In.factory(zt),Kt=this.hasRTLText=this.hasRTLText||PF(Ot);(!Kt||us.getRTLTextPluginStatus()==="unavailable"||Kt&&us.isParsed())&&(_t=aF(Ot,m,lt))}if(G){const zt=m.getValueAndResolveTokens("icon-image",lt,h,me);Ft=zt instanceof Xn?zt:Xn.fromString(zt)}if(!_t&&!Ft)continue;const ir=this.sortFeaturesByKey?J.evaluate(lt,{},h):void 0;if(this.features.push({id:Ne,text:_t,icon:Ft,index:Qe,sourceLayerIndex:Ze,geometry:lt.geometry,properties:Re.properties,type:EF[Re.type],sortKey:ir}),Ft&&(ne[Ft.name]=!0),_t){const zt=x.evaluate(lt,{},h).join(","),Ot=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ai.vertical)>=0;for(const Kt of _t.sections)if(Kt.image)ne[Kt.image.name]=!0;else{const Ut=Qf(_t.toString()),Nt=Kt.fontStack||zt,dt=ce[Nt]=ce[Nt]||{};this.calculateGlyphDependencies(Kt.text,dt,Ot,this.allowVerticalPlacement,Ut)}}}y.get("symbol-placement")==="line"&&(this.features=function(Re){const Ne={},Qe={},Ze=[];let Ye=0;function lt(zt){Ze.push(Re[zt]),Ye++}function _t(zt,Ot,Kt){const Ut=Qe[zt];return delete Qe[zt],Qe[Ot]=Ut,Ze[Ut].geometry[0].pop(),Ze[Ut].geometry[0]=Ze[Ut].geometry[0].concat(Kt[0]),Ut}function Ft(zt,Ot,Kt){const Ut=Ne[Ot];return delete Ne[Ot],Ne[zt]=Ut,Ze[Ut].geometry[0].shift(),Ze[Ut].geometry[0]=Kt[0].concat(Ze[Ut].geometry[0]),Ut}function ir(zt,Ot,Kt){const Ut=Kt?Ot[0][Ot[0].length-1]:Ot[0][0];return`${zt}:${Ut.x}:${Ut.y}`}for(let zt=0;zt<Re.length;zt++){const Ot=Re[zt],Kt=Ot.geometry,Ut=Ot.text?Ot.text.toString():null;if(!Ut){lt(zt);continue}const Nt=ir(Ut,Kt),dt=ir(Ut,Kt,!0);if(Nt in Qe&&dt in Ne&&Qe[Nt]!==Ne[dt]){const Qt=Ft(Nt,dt,Kt),Xt=_t(Nt,dt,Ze[Qt].geometry);delete Ne[Nt],delete Qe[dt],Qe[ir(Ut,Ze[Xt].geometry,!0)]=Xt,Ze[Qt].geometry=null}else Nt in Qe?_t(Nt,dt,Kt):dt in Ne?Ft(Nt,dt,Kt):(lt(zt),Ne[Nt]=Ye-1,Qe[dt]=Ye-1)}return Ze.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ne)=>Re.sortKey-Ne.sortKey)}update(r,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const h=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(s[r.segment+1]),y=r.dist(s[r.segment]);const x={};for(let S=r.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:m},S<s.length-1&&(m+=s[S+1].dist(s[S]));for(let S=r.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:y},S>0&&(y+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const C=x[S];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,s,h,m,y,x,S,C,F,G,J,ne){const ce=r.indexArray,me=r.layoutVertexArray,Te=r.segments.prepareSegment(4*s.length,me,ce,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ne=Te.vertexLength,Qe=this.allowVerticalPlacement&&S===d.ai.vertical?Math.PI/2:0,Ze=x.text&&x.text.sections;for(let Ye=0;Ye<s.length;Ye++){const{tl:lt,tr:_t,bl:Ft,br:ir,tex:zt,pixelOffsetTL:Ot,pixelOffsetBR:Kt,minFontScaleX:Ut,minFontScaleY:Nt,glyphOffset:dt,isSDF:Qt,sectionIndex:Xt}=s[Ye],fr=Te.vertexLength,Jr=dt[1];Om(me,C.x,C.y,lt.x,Jr+lt.y,zt.x,zt.y,h,Qt,Ot.x,Ot.y,Ut,Nt),Om(me,C.x,C.y,_t.x,Jr+_t.y,zt.x+zt.w,zt.y,h,Qt,Kt.x,Ot.y,Ut,Nt),Om(me,C.x,C.y,Ft.x,Jr+Ft.y,zt.x,zt.y+zt.h,h,Qt,Ot.x,Kt.y,Ut,Nt),Om(me,C.x,C.y,ir.x,Jr+ir.y,zt.x+zt.w,zt.y+zt.h,h,Qt,Kt.x,Kt.y,Ut,Nt),Iv(r.dynamicLayoutVertexArray,C,Qe),ce.emplaceBack(fr,fr+1,fr+2),ce.emplaceBack(fr+1,fr+2,fr+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dt[0]),Ye!==s.length-1&&Xt===s[Ye+1].sectionIndex||r.programConfigurations.populatePaintArrays(me.length,x,x.index,{},ne,Ze&&Ze[Xt])}r.placedSymbolArray.emplaceBack(C.x,C.y,Re,this.glyphOffsetArray.length-Re,Ne,F,G,C.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,J)}_addCollisionDebugVertex(r,s,h,m,y,x){return s.emplaceBack(0,0),r.emplaceBack(h.x,h.y,m,y,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,s,h,m,y,x,S){const C=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),F=C.vertexLength,G=y.layoutVertexArray,J=y.collisionVertexArray,ne=S.anchorX,ce=S.anchorY;this._addCollisionDebugVertex(G,J,x,ne,ce,new b(r,s)),this._addCollisionDebugVertex(G,J,x,ne,ce,new b(h,s)),this._addCollisionDebugVertex(G,J,x,ne,ce,new b(h,m)),this._addCollisionDebugVertex(G,J,x,ne,ce,new b(r,m)),C.vertexLength+=4;const me=y.indexArray;me.emplaceBack(F,F+1),me.emplaceBack(F+1,F+2),me.emplaceBack(F+2,F+3),me.emplaceBack(F+3,F),C.primitiveLength+=4}addDebugCollisionBoxes(r,s,h,m){for(let y=r;y<s;y++){const x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new kv(ui,lS.members,dn),this.iconCollisionBox=new kv(ui,lS.members,dn);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,h,m,y,x,S,C,F){const G={};for(let J=s;J<h;J++){const ne=r.get(J);G.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},G.textFeatureIndex=ne.featureIndex;break}for(let J=m;J<y;J++){const ne=r.get(J);G.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},G.verticalTextFeatureIndex=ne.featureIndex;break}for(let J=x;J<S;J++){const ne=r.get(J);G.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},G.iconFeatureIndex=ne.featureIndex;break}for(let J=C;J<F;J++){const ne=r.get(J);G.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},G.verticalIconFeatureIndex=ne.featureIndex;break}return G}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const h=r.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<m;y+=4)r.indexArray.emplaceBack(y,y+1,y+2),r.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),h=Math.cos(r),m=[],y=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const C=this.symbolInstances.get(S);m.push(0|Math.round(s*C.anchorX+h*C.anchorY)),y.push(C.featureIndex)}return x.sort((S,C)=>m[S]-m[C]||y[C]-y[S]),x}addToSortKeyRanges(r,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,y,x)=>{m>=0&&x.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let PS,AS;$t("SymbolBucket",ch,{omit:["layers","collisionBoxArray","features","compareText"]}),ch.MAX_GLYPHS=65535,ch.addDynamicAttributes=Iv;var Mv={get paint(){return AS=AS||new p({"icon-opacity":new sr(et.paint_symbol["icon-opacity"]),"icon-color":new sr(et.paint_symbol["icon-color"]),"icon-halo-color":new sr(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new sr(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sr(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Yt(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yt(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new sr(et.paint_symbol["text-opacity"]),"text-color":new sr(et.paint_symbol["text-color"],{runtimeType:yr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sr(et.paint_symbol["text-halo-color"]),"text-halo-width":new sr(et.paint_symbol["text-halo-width"]),"text-halo-blur":new sr(et.paint_symbol["text-halo-blur"]),"text-translate":new Yt(et.paint_symbol["text-translate"]),"text-translate-anchor":new Yt(et.paint_symbol["text-translate-anchor"])})},get layout(){return PS=PS||new p({"symbol-placement":new Yt(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Yt(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yt(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sr(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yt(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yt(et.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Yt(et.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Yt(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yt(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yt(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new sr(et.layout_symbol["icon-size"]),"icon-text-fit":new Yt(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yt(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new sr(et.layout_symbol["icon-image"]),"icon-rotate":new sr(et.layout_symbol["icon-rotate"]),"icon-padding":new sr(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Yt(et.layout_symbol["icon-keep-upright"]),"icon-offset":new sr(et.layout_symbol["icon-offset"]),"icon-anchor":new sr(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yt(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yt(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yt(et.layout_symbol["text-rotation-alignment"]),"text-field":new sr(et.layout_symbol["text-field"]),"text-font":new sr(et.layout_symbol["text-font"]),"text-size":new sr(et.layout_symbol["text-size"]),"text-max-width":new sr(et.layout_symbol["text-max-width"]),"text-line-height":new Yt(et.layout_symbol["text-line-height"]),"text-letter-spacing":new sr(et.layout_symbol["text-letter-spacing"]),"text-justify":new sr(et.layout_symbol["text-justify"]),"text-radial-offset":new sr(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yt(et.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sr(et.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sr(et.layout_symbol["text-anchor"]),"text-max-angle":new Yt(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Yt(et.layout_symbol["text-writing-mode"]),"text-rotate":new sr(et.layout_symbol["text-rotate"]),"text-padding":new Yt(et.layout_symbol["text-padding"]),"text-keep-upright":new Yt(et.layout_symbol["text-keep-upright"]),"text-transform":new sr(et.layout_symbol["text-transform"]),"text-offset":new sr(et.layout_symbol["text-offset"]),"text-allow-overlap":new Yt(et.layout_symbol["text-allow-overlap"]),"text-overlap":new Yt(et.layout_symbol["text-overlap"]),"text-ignore-placement":new Yt(et.layout_symbol["text-ignore-placement"]),"text-optional":new Yt(et.layout_symbol["text-optional"])})}};class IS{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:nt,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$t("FormatSectionOverride",IS,{omit:["defaultValue"]});class Fm extends _{constructor(r){super(r,Mv)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const y of h)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,h,m){const y=this.layout.get(r).evaluate(s,{},h,m),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||Mt(x.value)||!y?y:function(S,C){return C.replace(/{([^{}]+)}/g,(F,G)=>S&&G in S?String(S[G]):"")}(s.properties,y)}createBucket(r){return new ch(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Mv.paint.overridableProperties){if(!Fm.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),h=new IS(s),m=new ut(h,s.property.specification);let y=null;y=s.value.kind==="constant"||s.value.kind==="source"?new Zt("source",m):new Jt("composite",m,s.value.zoomStops),this.paint._values[r]=new ua(s.property,y,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Fm.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const h=r.get("text-field"),m=Mv.paint.properties[s];let y=!1;const x=S=>{for(const C of S)if(m.overrides&&m.overrides.hasOverride(C))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof In)x(h.value.value.sections);else if(h.value.kind==="source"){const S=F=>{y||(F instanceof ba&&bn(F.value)===oi?x(F.value.sections):F instanceof Ml?x(F.sections):F.eachChild(S))},C=h.value;C._styleExpression&&S(C._styleExpression.expression)}return y}}let CS;var AF={get paint(){return CS=CS||new p({"background-color":new Yt(et.paint_background["background-color"]),"background-pattern":new n(et.paint_background["background-pattern"]),"background-opacity":new Yt(et.paint_background["background-opacity"])})}};class IF extends _{constructor(r){super(r,AF)}}let kS;var CF={get paint(){return kS=kS||new p({"raster-opacity":new Yt(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yt(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yt(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yt(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Yt(et.paint_raster["raster-saturation"]),"raster-contrast":new Yt(et.paint_raster["raster-contrast"]),"raster-resampling":new Yt(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Yt(et.paint_raster["raster-fade-duration"])})}};class kF extends _{constructor(r){super(r,CF)}}class MF extends _{constructor(r){super(r,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class OF{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ov=63710088e-1;class Kl{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Kl(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,h=this.lat*s,m=r.lat*s,y=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((r.lng-this.lng)*s);return Ov*Math.acos(Math.min(y,1))}static convert(r){if(r instanceof Kl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Kl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Kl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const MS=2*Math.PI*Ov;function OS(o){return MS*Math.cos(o*Math.PI/180)}function FS(o){return(180+o)/360}function RS(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function jS(o,r){return o/OS(r)}function Fv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Rm{constructor(r,s,h=0){this.x=+r,this.y=+s,this.z=+h}static fromLngLat(r,s=0){const h=Kl.convert(r);return new Rm(FS(h.lng),RS(h.lat),jS(s,h.lat))}toLngLat(){return new Kl(360*this.x-180,Fv(this.y))}toAltitude(){return this.z*OS(Fv(this.y))}meterInMercatorCoordinateUnits(){return 1/MS*(r=Fv(this.y),1/Math.cos(r*Math.PI/180));var r}}function zS(o,r,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class Rv{constructor(r,s,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||s<0||s>=Math.pow(2,r))throw new Error(`x=${s}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=h,this.key=wd(0,r,r,s,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,h){const m=(x=this.y,S=this.z,C=zS(256*(y=this.x),256*(x=Math.pow(2,S)-x-1),S),F=zS(256*(y+1),256*(x+1),S),C[0]+","+C[1]+","+F[0]+","+F[1]);var y,x,S,C,F;const G=function(J,ne,ce){let me,Te="";for(let Re=J;Re>0;Re--)me=1<<Re-1,Te+=(ne&me?1:0)+(ce&me?2:0);return Te}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,G).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new b((r.x*s-this.x)*Ln,(r.y*s-this.y)*Ln)}toString(){return`${this.z}/${this.x}/${this.y}`}}class LS{constructor(r,s){this.wrap=r,this.canonical=s,this.key=wd(r,s.z,s.z,s.x,s.y)}}class Bo{constructor(r,s,h,m,y){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=s,this.canonical=new Rv(h,+m,+y),this.key=wd(s,r,h,m,y)}clone(){return new Bo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new Bo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bo(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?wd(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):wd(this.wrap*+s,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new Bo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Bo(s,this.wrap,s,h,m),new Bo(s,this.wrap,s,h+1,m),new Bo(s,this.wrap,s,h,m+1),new Bo(s,this.wrap,s,h+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Bo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Bo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new LS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Rm(r.x-this.wrap,r.y))}}function wd(o,r,s,h,m){(o*=2)<0&&(o=-1*o-1);const y=1<<s;return(y*y*o+y*m+h).toString(36)+s.toString(36)+r.toString(36)}$t("CanonicalTileID",Rv),$t("OverscaledTileID",Bo,{omit:["posMatrix"]});class BS{constructor(r,s,h,m=1,y=1,x=1,S=0){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void ge(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const C=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=y,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<C;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(C,F)]=this.data[this._idx(C-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,C)]=this.data[this._idx(F,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<C;F++)for(let G=0;G<C;G++){const J=this.get(F,G);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(r,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(r,s);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}unpack(r,s,h){return r*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,y=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:m=y-1;break;case 1:y=m+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const C=-s*this.dim,F=-h*this.dim;for(let G=x;G<S;G++)for(let J=m;J<y;J++)this.data[this._idx(J,G)]=r.data[this._idx(J+C,G+F)]}}$t("DEMData",BS);class DS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const h=r[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class NS{constructor(r,s,h,m,y){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=h,r._y=m,this.properties=r.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r}}class $S{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Dl(Ln,16,0),this.grid3D=new Dl(Ln,16,0),this.featureIndexArray=new jo,this.promoteId=s}insert(r,s,h,m,y,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,y);const C=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const G=s[F],J=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<G.length;ne++){const ce=G[ne];J[0]=Math.min(J[0],ce.x),J[1]=Math.min(J[1],ce.y),J[2]=Math.max(J[2],ce.x),J[3]=Math.max(J[3],ce.y)}J[0]<Ln&&J[1]<Ln&&J[2]>=0&&J[3]>=0&&C.insert(S,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Zl.VectorTile(new bv(this.rawTileData)).layers,this.sourceLayerCoder=new DS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,s,h,m){this.loadVTLayers();const y=r.params||{},x=Ln/r.tileSize/r.scale,S=Ur(y.filter),C=r.queryGeometry,F=r.queryPadding*x,G=VS(C),J=this.grid.query(G.minX-F,G.minY-F,G.maxX+F,G.maxY+F),ne=VS(r.cameraQueryGeometry),ce=this.grid3D.query(ne.minX-F,ne.minY-F,ne.maxX+F,ne.maxY+F,(Re,Ne,Qe,Ze)=>function(Ye,lt,_t,Ft,ir){for(const Ot of Ye)if(lt<=Ot.x&&_t<=Ot.y&&Ft>=Ot.x&&ir>=Ot.y)return!0;const zt=[new b(lt,_t),new b(lt,ir),new b(Ft,ir),new b(Ft,_t)];if(Ye.length>2){for(const Ot of zt)if(nh(Ye,Ot))return!0}for(let Ot=0;Ot<Ye.length-1;Ot++)if(f4(Ye[Ot],Ye[Ot+1],zt))return!0;return!1}(r.cameraQueryGeometry,Re-F,Ne-F,Qe+F,Ze+F));for(const Re of ce)J.push(Re);J.sort(FF);const me={};let Te;for(let Re=0;Re<J.length;Re++){const Ne=J[Re];if(Ne===Te)continue;Te=Ne;const Qe=this.featureIndexArray.get(Ne);let Ze=null;this.loadMatchingFeature(me,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,S,y.layers,y.availableImages,s,h,m,(Ye,lt,_t)=>(Ze||(Ze=Qu(Ye)),lt.queryIntersectsFeature(C,Ye,_t,Ze,this.z,r.transform,x,r.pixelPosMatrix)))}return me}loadMatchingFeature(r,s,h,m,y,x,S,C,F,G,J){const ne=this.bucketLayerIDs[s];if(x&&!function(Re,Ne){for(let Qe=0;Qe<Re.length;Qe++)if(Ne.indexOf(Re[Qe])>=0)return!0;return!1}(x,ne))return;const ce=this.sourceLayerCoder.decode(h),me=this.vtLayers[ce].feature(m);if(y.needGeometry){const Re=ec(me,!0);if(!y.filter(new en(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!y.filter(new en(this.tileID.overscaledZ),me))return;const Te=this.getId(me,ce);for(let Re=0;Re<ne.length;Re++){const Ne=ne[Re];if(x&&x.indexOf(Ne)<0)continue;const Qe=C[Ne];if(!Qe)continue;let Ze={};Te&&G&&(Ze=G.getState(Qe.sourceLayer||"_geojsonTileLayer",Te));const Ye=P({},F[Ne]);Ye.paint=US(Ye.paint,Qe.paint,me,Ze,S),Ye.layout=US(Ye.layout,Qe.layout,me,Ze,S);const lt=!J||J(me,Qe,Ze);if(!lt)continue;const _t=new NS(me,this.z,this.x,this.y,Te);_t.layer=Ye;let Ft=r[Ne];Ft===void 0&&(Ft=r[Ne]=[]),Ft.push({featureIndex:m,feature:_t,intersectionZ:lt})}}lookupSymbolFeatures(r,s,h,m,y,x,S,C){const F={};this.loadVTLayers();const G=Ur(y);for(const J of r)this.loadMatchingFeature(F,h,m,J,G,x,S,C,s);return F}hasLayer(r){for(const s of this.bucketLayerIDs)for(const h of s)if(r===h)return!0;return!1}getId(r,s){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function US(o,r,s,h,m){return B(o,(y,x)=>{const S=r instanceof Kc?r.get(x):null;return S&&S.evaluate?S.evaluate(s,h,m):S})}function VS(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const y of o)r=Math.min(r,y.x),s=Math.min(s,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return{minX:r,minY:s,maxX:h,maxY:m}}function FF(o,r){return r-o}function GS(o,r,s,h,m){const y=[];for(let x=0;x<o.length;x++){const S=o[x];let C;for(let F=0;F<S.length-1;F++){let G=S[F],J=S[F+1];G.x<r&&J.x<r||(G.x<r?G=new b(r,G.y+(r-G.x)/(J.x-G.x)*(J.y-G.y))._round():J.x<r&&(J=new b(r,G.y+(r-G.x)/(J.x-G.x)*(J.y-G.y))._round()),G.y<s&&J.y<s||(G.y<s?G=new b(G.x+(s-G.y)/(J.y-G.y)*(J.x-G.x),s)._round():J.y<s&&(J=new b(G.x+(s-G.y)/(J.y-G.y)*(J.x-G.x),s)._round()),G.x>=h&&J.x>=h||(G.x>=h?G=new b(h,G.y+(h-G.x)/(J.x-G.x)*(J.y-G.y))._round():J.x>=h&&(J=new b(h,G.y+(h-G.x)/(J.x-G.x)*(J.y-G.y))._round()),G.y>=m&&J.y>=m||(G.y>=m?G=new b(G.x+(m-G.y)/(J.y-G.y)*(J.x-G.x),m)._round():J.y>=m&&(J=new b(G.x+(m-G.y)/(J.y-G.y)*(J.x-G.x),m)._round()),C&&G.equals(C[C.length-1])||(C=[G],y.push(C)),C.push(J)))))}}return y}$t("FeatureIndex",$S,{omit:["rawTileData","sourceLayerCoder"]});class Jl extends b{constructor(r,s,h,m){super(r,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new Jl(this.x,this.y,this.angle,this.segment)}}function WS(o,r,s,h,m){if(r.segment===void 0||s===0)return!0;let y=r,x=r.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(y),y=o[x]}S+=o[x].dist(o[x+1]),x++;const C=[];let F=0;for(;S<s/2;){const G=o[x],J=o[x+1];if(!J)return!1;let ne=o[x-1].angleTo(G)-G.angleTo(J);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:S,angleDelta:ne}),F+=ne;S-C[0].distance>h;)F-=C.shift().angleDelta;if(F>m)return!1;x++,S+=G.dist(J)}return!0}function HS(o){let r=0;for(let s=0;s<o.length-1;s++)r+=o[s].dist(o[s+1]);return r}function ZS(o,r,s){return o?.6*r*s:0}function XS(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function RF(o,r,s,h,m,y){const x=ZS(s,m,y),S=XS(s,h)*y;let C=0;const F=HS(o)/2;for(let G=0;G<o.length-1;G++){const J=o[G],ne=o[G+1],ce=J.dist(ne);if(C+ce>F){const me=(F-C)/ce,Te=Si.number(J.x,ne.x,me),Re=Si.number(J.y,ne.y,me),Ne=new Jl(Te,Re,ne.angleTo(J),G);return Ne._round(),!x||WS(o,Ne,S,x,r)?Ne:void 0}C+=ce}}function jF(o,r,s,h,m,y,x,S,C){const F=ZS(h,y,x),G=XS(h,m),J=G*x,ne=o[0].x===0||o[0].x===C||o[0].y===0||o[0].y===C;return r-J<r/4&&(r=J+r/4),qS(o,ne?r/2*S%r:(G/2+2*y)*x*S%r,r,F,s,J,ne,!1,C)}function qS(o,r,s,h,m,y,x,S,C){const F=y/2,G=HS(o);let J=0,ne=r-s,ce=[];for(let me=0;me<o.length-1;me++){const Te=o[me],Re=o[me+1],Ne=Te.dist(Re),Qe=Re.angleTo(Te);for(;ne+s<J+Ne;){ne+=s;const Ze=(ne-J)/Ne,Ye=Si.number(Te.x,Re.x,Ze),lt=Si.number(Te.y,Re.y,Ze);if(Ye>=0&&Ye<C&&lt>=0&&lt<C&&ne-F>=0&&ne+F<=G){const _t=new Jl(Ye,lt,Qe,me);_t._round(),h&&!WS(o,_t,y,h,m)||ce.push(_t)}}J+=Ne}return S||ce.length||x||(ce=qS(o,J/2,s,h,m,y,x,!0,C)),ce}$t("Anchor",Jl);const hh=Qi;function KS(o,r,s,h){const m=[],y=o.image,x=y.pixelRatio,S=y.paddedRect.w-2*hh,C=y.paddedRect.h-2*hh;let F={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const G=y.stretchX||[[0,S]],J=y.stretchY||[[0,C]],ne=(dt,Qt)=>dt+Qt[1]-Qt[0],ce=G.reduce(ne,0),me=J.reduce(ne,0),Te=S-ce,Re=C-me;let Ne=0,Qe=ce,Ze=0,Ye=me,lt=0,_t=Te,Ft=0,ir=Re;if(y.content&&h){const dt=y.content,Qt=dt[2]-dt[0],Xt=dt[3]-dt[1];(y.textFitWidth||y.textFitHeight)&&(F=SS(o)),Ne=jm(G,0,dt[0]),Ze=jm(J,0,dt[1]),Qe=jm(G,dt[0],dt[2]),Ye=jm(J,dt[1],dt[3]),lt=dt[0]-Ne,Ft=dt[1]-Ze,_t=Qt-Qe,ir=Xt-Ye}const zt=F.x1,Ot=F.y1,Kt=F.x2-zt,Ut=F.y2-Ot,Nt=(dt,Qt,Xt,fr)=>{const Jr=zm(dt.stretch-Ne,Qe,Kt,zt),Xr=Lm(dt.fixed-lt,_t,dt.stretch,ce),Kn=zm(Qt.stretch-Ze,Ye,Ut,Ot),ca=Lm(Qt.fixed-Ft,ir,Qt.stretch,me),fi=zm(Xt.stretch-Ne,Qe,Kt,zt),En=Lm(Xt.fixed-lt,_t,Xt.stretch,ce),$i=zm(fr.stretch-Ze,Ye,Ut,Ot),Ui=Lm(fr.fixed-Ft,ir,fr.stretch,me),Vi=new b(Jr,Kn),Tn=new b(fi,Kn),Jn=new b(fi,$i),Ii=new b(Jr,$i),di=new b(Xr/x,ca/x),Gi=new b(En/x,Ui/x),pi=r*Math.PI/180;if(pi){const jr=Math.sin(pi),tn=Math.cos(pi),hn=[tn,-jr,jr,tn];Vi._matMult(hn),Tn._matMult(hn),Ii._matMult(hn),Jn._matMult(hn)}const Do=dt.stretch+dt.fixed,eo=Qt.stretch+Qt.fixed;return{tl:Vi,tr:Tn,bl:Ii,br:Jn,tex:{x:y.paddedRect.x+hh+Do,y:y.paddedRect.y+hh+eo,w:Xt.stretch+Xt.fixed-Do,h:fr.stretch+fr.fixed-eo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:di,pixelOffsetBR:Gi,minFontScaleX:_t/x/Kt,minFontScaleY:ir/x/Ut,isSDF:s}};if(h&&(y.stretchX||y.stretchY)){const dt=JS(G,Te,ce),Qt=JS(J,Re,me);for(let Xt=0;Xt<dt.length-1;Xt++){const fr=dt[Xt],Jr=dt[Xt+1];for(let Xr=0;Xr<Qt.length-1;Xr++)m.push(Nt(fr,Qt[Xr],Jr,Qt[Xr+1]))}}else m.push(Nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:C+1}));return m}function jm(o,r,s){let h=0;for(const m of o)h+=Math.max(r,Math.min(s,m[1]))-Math.max(r,Math.min(s,m[0]));return h}function JS(o,r,s){const h=[{fixed:-hh,stretch:0}];for(const[m,y]of o){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(y-m)})}return h.push({fixed:r+hh,stretch:s}),h}function zm(o,r,s,h){return o/r*s+h}function Lm(o,r,s,h){return o-r*s/h}class Bm{constructor(r,s,h,m,y,x,S,C,F,G){var J;if(this.boxStartIndex=r.length,F){let ne=x.top,ce=x.bottom;const me=x.collisionPadding;me&&(ne-=me[1],ce+=me[3]);let Te=ce-ne;Te>0&&(Te=Math.max(10,Te),this.circleDiameter=Te)}else{const ne=!((J=x.image)===null||J===void 0)&&J.content&&(x.image.textFitWidth||x.image.textFitHeight)?SS(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};ne.y1=ne.y1*S-C[0],ne.y2=ne.y2*S+C[2],ne.x1=ne.x1*S-C[3],ne.x2=ne.x2*S+C[1];const ce=x.collisionPadding;if(ce&&(ne.x1-=ce[0]*S,ne.y1-=ce[1]*S,ne.x2+=ce[2]*S,ne.y2+=ce[3]*S),G){const me=new b(ne.x1,ne.y1),Te=new b(ne.x2,ne.y1),Re=new b(ne.x1,ne.y2),Ne=new b(ne.x2,ne.y2),Qe=G*Math.PI/180;me._rotate(Qe),Te._rotate(Qe),Re._rotate(Qe),Ne._rotate(Qe),ne.x1=Math.min(me.x,Te.x,Re.x,Ne.x),ne.x2=Math.max(me.x,Te.x,Re.x,Ne.x),ne.y1=Math.min(me.y,Te.y,Re.y,Ne.y),ne.y2=Math.max(me.y,Te.y,Re.y,Ne.y)}r.emplaceBack(s.x,s.y,ne.x1,ne.y1,ne.x2,ne.y2,h,m,y)}this.boxEndIndex=r.length}}class zF{constructor(r=[],s=LF){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:h}=this,m=s[r];for(;r>0;){const y=r-1>>1,x=s[y];if(h(m,x)>=0)break;s[r]=x,r=y}s[r]=m}_down(r){const{data:s,compare:h}=this,m=this.length>>1,y=s[r];for(;r<m;){let x=1+(r<<1),S=s[x];const C=x+1;if(C<this.length&&h(s[C],S)<0&&(x=C,S=s[C]),h(S,y)>=0)break;s[r]=S,r=x}s[r]=y}}function LF(o,r){return o<r?-1:o>r?1:0}function BF(o,r=1,s=!1){let h=1/0,m=1/0,y=-1/0,x=-1/0;const S=o[0];for(let ce=0;ce<S.length;ce++){const me=S[ce];(!ce||me.x<h)&&(h=me.x),(!ce||me.y<m)&&(m=me.y),(!ce||me.x>y)&&(y=me.x),(!ce||me.y>x)&&(x=me.y)}const C=Math.min(y-h,x-m);let F=C/2;const G=new zF([],DF);if(C===0)return new b(h,m);for(let ce=h;ce<y;ce+=C)for(let me=m;me<x;me+=C)G.push(new fh(ce+F,me+F,F,o));let J=function(ce){let me=0,Te=0,Re=0;const Ne=ce[0];for(let Qe=0,Ze=Ne.length,Ye=Ze-1;Qe<Ze;Ye=Qe++){const lt=Ne[Qe],_t=Ne[Ye],Ft=lt.x*_t.y-_t.x*lt.y;Te+=(lt.x+_t.x)*Ft,Re+=(lt.y+_t.y)*Ft,me+=3*Ft}return new fh(Te/me,Re/me,0,ce)}(o),ne=G.length;for(;G.length;){const ce=G.pop();(ce.d>J.d||!J.d)&&(J=ce,s&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,ne)),ce.max-J.d<=r||(F=ce.h/2,G.push(new fh(ce.p.x-F,ce.p.y-F,F,o)),G.push(new fh(ce.p.x+F,ce.p.y-F,F,o)),G.push(new fh(ce.p.x-F,ce.p.y+F,F,o)),G.push(new fh(ce.p.x+F,ce.p.y+F,F,o)),ne+=4)}return s&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${J.d}`)),J.p}function DF(o,r){return r.max-o.max}function fh(o,r,s,h){this.p=new b(o,r),this.h=s,this.d=function(m,y){let x=!1,S=1/0;for(let C=0;C<y.length;C++){const F=y[C];for(let G=0,J=F.length,ne=J-1;G<J;ne=G++){const ce=F[G],me=F[ne];ce.y>m.y!=me.y>m.y&&m.x<(me.x-ce.x)*(m.y-ce.y)/(me.y-ce.y)+ce.x&&(x=!x),S=Math.min(S,R2(m,ce,me))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var hi;d.ar=void 0,(hi=d.ar||(d.ar={}))[hi.center=1]="center",hi[hi.left=2]="left",hi[hi.right=3]="right",hi[hi.top=4]="top",hi[hi.bottom=5]="bottom",hi[hi["top-left"]=6]="top-left",hi[hi["top-right"]=7]="top-right",hi[hi["bottom-left"]=8]="bottom-left",hi[hi["bottom-right"]=9]="bottom-right";const Yl=7,jv=Number.POSITIVE_INFINITY;function YS(o,r){return r[1]!==jv?function(s,h,m){let y=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-Yl;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+Yl}switch(s){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,x]}(o,r[0],r[1]):function(s,h){let m=0,y=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":y=x-Yl;break;case"bottom-right":case"bottom-left":y=-x+Yl;break;case"bottom":y=-h+Yl;break;case"top":y=h-Yl}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(o,r[0])}function QS(o,r,s){var h;const m=o.layout,y=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},s);if(y){const S=y.values,C=[];for(let F=0;F<S.length;F+=2){const G=C[F]=S[F],J=S[F+1].map(ne=>ne*Vn);G.startsWith("top")?J[1]-=Yl:G.startsWith("bottom")&&(J[1]+=Yl),C[F+1]=J}return new xi(C)}const x=m.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},s)*Vn,jv]:m.get("text-offset").evaluate(r,{},s).map(F=>F*Vn);const C=[];for(const F of x)C.push(F,YS(F,S));return new xi(C)}return null}function zv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function NF(o,r,s,h,m,y,x,S,C,F,G){let J=y.textMaxSize.evaluate(r,{});J===void 0&&(J=x);const ne=o.layers[0].layout,ce=ne.get("icon-offset").evaluate(r,{},G),me=tE(s.horizontal),Te=x/24,Re=o.tilePixelRatio*Te,Ne=o.tilePixelRatio*J/24,Qe=o.tilePixelRatio*S,Ze=o.tilePixelRatio*ne.get("symbol-spacing"),Ye=ne.get("text-padding")*o.tilePixelRatio,lt=function(dt,Qt,Xt,fr=1){const Jr=dt.get("icon-padding").evaluate(Qt,{},Xt),Xr=Jr&&Jr.values;return[Xr[0]*fr,Xr[1]*fr,Xr[2]*fr,Xr[3]*fr]}(ne,r,G,o.tilePixelRatio),_t=ne.get("text-max-angle")/180*Math.PI,Ft=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",ir=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",zt=ne.get("symbol-placement"),Ot=Ze/2,Kt=ne.get("icon-text-fit");let Ut;h&&Kt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Ut=ES(h,s.vertical,Kt,ne.get("icon-text-fit-padding"),ce,Te)),me&&(h=ES(h,me,Kt,ne.get("icon-text-fit-padding"),ce,Te)));const Nt=(dt,Qt)=>{Qt.x<0||Qt.x>=Ln||Qt.y<0||Qt.y>=Ln||function(Xt,fr,Jr,Xr,Kn,ca,fi,En,$i,Ui,Vi,Tn,Jn,Ii,di,Gi,pi,Do,eo,jr,tn,hn,yo,yn,dh){const ds=Xt.addToLineVertexArray(fr,Jr);let ps,ha,No,ti,Ys=0,Ed=0,oE=0,aE=0,Gv=-1,Wv=-1;const Qs={};let sE=th("");if(Xt.allowVerticalPlacement&&Xr.vertical){const Ci=En.layout.get("text-rotate").evaluate(tn,{},yn)+90;No=new Bm($i,fr,Ui,Vi,Tn,Xr.vertical,Jn,Ii,di,Ci),fi&&(ti=new Bm($i,fr,Ui,Vi,Tn,fi,pi,Do,di,Ci))}if(Kn){const Ci=En.layout.get("icon-rotate").evaluate(tn,{}),$o=En.layout.get("icon-text-fit")!=="none",rc=KS(Kn,Ci,yo,$o),ja=fi?KS(fi,Ci,yo,$o):void 0;ha=new Bm($i,fr,Ui,Vi,Tn,Kn,pi,Do,!1,Ci),Ys=4*rc.length;const nc=Xt.iconSizeData;let ms=null;nc.kind==="source"?(ms=[fs*En.layout.get("icon-size").evaluate(tn,{})],ms[0]>ql&&ge(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${xd}. Reduce your "icon-size".`)):nc.kind==="composite"&&(ms=[fs*hn.compositeIconSizes[0].evaluate(tn,{},yn),fs*hn.compositeIconSizes[1].evaluate(tn,{},yn)],(ms[0]>ql||ms[1]>ql)&&ge(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${xd}. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,rc,ms,jr,eo,tn,d.ai.none,fr,ds.lineStartIndex,ds.lineLength,-1,yn),Gv=Xt.icon.placedSymbolArray.length-1,ja&&(Ed=4*ja.length,Xt.addSymbols(Xt.icon,ja,ms,jr,eo,tn,d.ai.vertical,fr,ds.lineStartIndex,ds.lineLength,-1,yn),Wv=Xt.icon.placedSymbolArray.length-1)}const lE=Object.keys(Xr.horizontal);for(const Ci of lE){const $o=Xr.horizontal[Ci];if(!ps){sE=th($o.text);const ja=En.layout.get("text-rotate").evaluate(tn,{},yn);ps=new Bm($i,fr,Ui,Vi,Tn,$o,Jn,Ii,di,ja)}const rc=$o.positionedLines.length===1;if(oE+=eE(Xt,fr,$o,ca,En,di,tn,Gi,ds,Xr.vertical?d.ai.horizontal:d.ai.horizontalOnly,rc?lE:[Ci],Qs,Gv,hn,yn),rc)break}Xr.vertical&&(aE+=eE(Xt,fr,Xr.vertical,ca,En,di,tn,Gi,ds,d.ai.vertical,["vertical"],Qs,Wv,hn,yn));const VF=ps?ps.boxStartIndex:Xt.collisionBoxArray.length,GF=ps?ps.boxEndIndex:Xt.collisionBoxArray.length,WF=No?No.boxStartIndex:Xt.collisionBoxArray.length,HF=No?No.boxEndIndex:Xt.collisionBoxArray.length,ZF=ha?ha.boxStartIndex:Xt.collisionBoxArray.length,XF=ha?ha.boxEndIndex:Xt.collisionBoxArray.length,qF=ti?ti.boxStartIndex:Xt.collisionBoxArray.length,KF=ti?ti.boxEndIndex:Xt.collisionBoxArray.length;let Ra=-1;const Nm=(Ci,$o)=>Ci&&Ci.circleDiameter?Math.max(Ci.circleDiameter,$o):$o;Ra=Nm(ps,Ra),Ra=Nm(No,Ra),Ra=Nm(ha,Ra),Ra=Nm(ti,Ra);const uE=Ra>-1?1:0;uE&&(Ra*=dh/Vn),Xt.glyphOffsetArray.length>=ch.MAX_GLYPHS&&ge("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),tn.sortKey!==void 0&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,tn.sortKey);const JF=QS(En,tn,yn),[YF,QF]=function(Ci,$o){const rc=Ci.length,ja=$o==null?void 0:$o.values;if((ja==null?void 0:ja.length)>0)for(let nc=0;nc<ja.length;nc+=2){const ms=ja[nc+1];Ci.emplaceBack(d.ar[ja[nc]],ms[0],ms[1])}return[rc,Ci.length]}(Xt.textAnchorOffsets,JF);Xt.symbolInstances.emplaceBack(fr.x,fr.y,Qs.right>=0?Qs.right:-1,Qs.center>=0?Qs.center:-1,Qs.left>=0?Qs.left:-1,Qs.vertical||-1,Gv,Wv,sE,VF,GF,WF,HF,ZF,XF,qF,KF,Ui,oE,aE,Ys,Ed,uE,0,Jn,Ra,YF,QF)}(o,Qt,dt,s,h,m,Ut,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Re,[Ye,Ye,Ye,Ye],Ft,C,Qe,lt,ir,ce,r,y,F,G,x)};if(zt==="line")for(const dt of GS(r.geometry,0,0,Ln,Ln)){const Qt=jF(dt,Ze,_t,s.vertical||me,h,24,Ne,o.overscaling,Ln);for(const Xt of Qt)me&&$F(o,me.text,Ot,Xt)||Nt(dt,Xt)}else if(zt==="line-center"){for(const dt of r.geometry)if(dt.length>1){const Qt=RF(dt,_t,s.vertical||me,h,24,Ne);Qt&&Nt(dt,Qt)}}else if(r.type==="Polygon")for(const dt of zl(r.geometry,0)){const Qt=BF(dt,16);Nt(dt[0],new Jl(Qt.x,Qt.y,0))}else if(r.type==="LineString")for(const dt of r.geometry)Nt(dt,new Jl(dt[0].x,dt[0].y,0));else if(r.type==="Point")for(const dt of r.geometry)for(const Qt of dt)Nt([Qt],new Jl(Qt.x,Qt.y,0))}function eE(o,r,s,h,m,y,x,S,C,F,G,J,ne,ce,me){const Te=function(Qe,Ze,Ye,lt,_t,Ft,ir,zt){const Ot=lt.layout.get("text-rotate").evaluate(Ft,{})*Math.PI/180,Kt=[];for(const Ut of Ze.positionedLines)for(const Nt of Ut.positionedGlyphs){if(!Nt.rect)continue;const dt=Nt.rect||{};let Qt=gS+1,Xt=!0,fr=1,Jr=0;const Xr=(_t||zt)&&Nt.vertical,Kn=Nt.metrics.advance*Nt.scale/2;if(zt&&Ze.verticalizable&&(Jr=Ut.lineOffset/2-(Nt.imageName?-(Vn-Nt.metrics.width*Nt.scale)/2:(Nt.scale-1)*Vn)),Nt.imageName){const jr=ir[Nt.imageName];Xt=jr.sdf,fr=jr.pixelRatio,Qt=Qi/fr}const ca=_t?[Nt.x+Kn,Nt.y]:[0,0];let fi=_t?[0,0]:[Nt.x+Kn+Ye[0],Nt.y+Ye[1]-Jr],En=[0,0];Xr&&(En=fi,fi=[0,0]);const $i=Nt.metrics.isDoubleResolution?2:1,Ui=(Nt.metrics.left-Qt)*Nt.scale-Kn+fi[0],Vi=(-Nt.metrics.top-Qt)*Nt.scale+fi[1],Tn=Ui+dt.w/$i*Nt.scale/fr,Jn=Vi+dt.h/$i*Nt.scale/fr,Ii=new b(Ui,Vi),di=new b(Tn,Vi),Gi=new b(Ui,Jn),pi=new b(Tn,Jn);if(Xr){const jr=new b(-Kn,Kn-vd),tn=-Math.PI/2,hn=Vn/2-Kn,yo=new b(5-vd-hn,-(Nt.imageName?hn:0)),yn=new b(...En);Ii._rotateAround(tn,jr)._add(yo)._add(yn),di._rotateAround(tn,jr)._add(yo)._add(yn),Gi._rotateAround(tn,jr)._add(yo)._add(yn),pi._rotateAround(tn,jr)._add(yo)._add(yn)}if(Ot){const jr=Math.sin(Ot),tn=Math.cos(Ot),hn=[tn,-jr,jr,tn];Ii._matMult(hn),di._matMult(hn),Gi._matMult(hn),pi._matMult(hn)}const Do=new b(0,0),eo=new b(0,0);Kt.push({tl:Ii,tr:di,bl:Gi,br:pi,tex:dt,writingMode:Ze.writingMode,glyphOffset:ca,sectionIndex:Nt.sectionIndex,isSDF:Xt,pixelOffsetTL:Do,pixelOffsetBR:eo,minFontScaleX:0,minFontScaleY:0})}return Kt}(0,s,S,m,y,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ne=null;Re.kind==="source"?(Ne=[fs*m.layout.get("text-size").evaluate(x,{})],Ne[0]>ql&&ge(`${o.layerIds[0]}: Value for "text-size" is >= ${xd}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ne=[fs*ce.compositeTextSizes[0].evaluate(x,{},me),fs*ce.compositeTextSizes[1].evaluate(x,{},me)],(Ne[0]>ql||Ne[1]>ql)&&ge(`${o.layerIds[0]}: Value for "text-size" is >= ${xd}. Reduce your "text-size".`)),o.addSymbols(o.text,Te,Ne,S,y,x,F,r,C.lineStartIndex,C.lineLength,ne,me);for(const Qe of G)J[Qe]=o.text.placedSymbolArray.length-1;return 4*Te.length}function tE(o){for(const r in o)return o[r];return null}function $F(o,r,s,h){const m=o.compareText;if(r in m){const y=m[r];for(let x=y.length-1;x>=0;x--)if(h.dist(y[x])<s)return!0}else m[r]=[];return m[r].push(h),!1}const rE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Lv{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const y=rE[15&h];if(!y)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new Lv(S,x,y,r)}constructor(r,s=64,h=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const y=rE.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-S%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+C,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+C),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+C,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=s,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Bv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:S}=this,C=[0,y.length-1,0],F=[];for(;C.length;){const G=C.pop()||0,J=C.pop()||0,ne=C.pop()||0;if(J-ne<=S){for(let Re=ne;Re<=J;Re++){const Ne=x[2*Re],Qe=x[2*Re+1];Ne>=r&&Ne<=h&&Qe>=s&&Qe<=m&&F.push(y[Re])}continue}const ce=ne+J>>1,me=x[2*ce],Te=x[2*ce+1];me>=r&&me<=h&&Te>=s&&Te<=m&&F.push(y[ce]),(G===0?r<=me:s<=Te)&&(C.push(ne),C.push(ce-1),C.push(1-G)),(G===0?h>=me:m>=Te)&&(C.push(ce+1),C.push(J),C.push(1-G))}return F}within(r,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:x}=this,S=[0,m.length-1,0],C=[],F=h*h;for(;S.length;){const G=S.pop()||0,J=S.pop()||0,ne=S.pop()||0;if(J-ne<=x){for(let Re=ne;Re<=J;Re++)iE(y[2*Re],y[2*Re+1],r,s)<=F&&C.push(m[Re]);continue}const ce=ne+J>>1,me=y[2*ce],Te=y[2*ce+1];iE(me,Te,r,s)<=F&&C.push(m[ce]),(G===0?r-h<=me:s-h<=Te)&&(S.push(ne),S.push(ce-1),S.push(1-G)),(G===0?r+h>=me:s+h>=Te)&&(S.push(ce+1),S.push(J),S.push(1-G))}return C}}function Bv(o,r,s,h,m,y){if(m-h<=s)return;const x=h+m>>1;nE(o,r,x,h,m,y),Bv(o,r,s,h,x-1,1-y),Bv(o,r,s,x+1,m,1-y)}function nE(o,r,s,h,m,y){for(;m>h;){if(m-h>600){const F=m-h+1,G=s-h+1,J=Math.log(F),ne=.5*Math.exp(2*J/3),ce=.5*Math.sqrt(J*ne*(F-ne)/F)*(G-F/2<0?-1:1);nE(o,r,s,Math.max(h,Math.floor(s-G*ne/F+ce)),Math.min(m,Math.floor(s+(F-G)*ne/F+ce)),y)}const x=r[2*s+y];let S=h,C=m;for(bd(o,r,h,s),r[2*m+y]>x&&bd(o,r,h,m);S<C;){for(bd(o,r,S,C),S++,C--;r[2*S+y]<x;)S++;for(;r[2*C+y]>x;)C--}r[2*h+y]===x?bd(o,r,h,C):(C++,bd(o,r,C,m)),C<=s&&(h=C+1),s<=C&&(m=C-1)}}function bd(o,r,s,h){Dv(o,s,h),Dv(r,2*s,2*h),Dv(r,2*s+1,2*h+1)}function Dv(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}function iE(o,r,s,h){const m=o-s,y=r-h;return m*m+y*y}var Nv;d.bf=void 0,(Nv=d.bf||(d.bf={})).create="create",Nv.load="load",Nv.fullLoad="fullLoad";let Dm=null,Sd=[];const $v=1e3/60,Uv="loadTime",Vv="fullLoadTime",UF={mark(o){performance.mark(o)},frame(o){const r=o;Dm!=null&&Sd.push(r-Dm),Dm=r},clearMetrics(){Dm=null,Sd=[],performance.clearMeasures(Uv),performance.clearMeasures(Vv);for(const o in d.bf)performance.clearMarks(d.bf[o])},getPerformanceMetrics(){performance.measure(Uv,d.bf.create,d.bf.load),performance.measure(Vv,d.bf.create,d.bf.fullLoad);const o=performance.getEntriesByName(Uv)[0].duration,r=performance.getEntriesByName(Vv)[0].duration,s=Sd.length,h=1/(Sd.reduce((y,x)=>y+x,0)/s/1e3),m=Sd.filter(y=>y>$v).reduce((y,x)=>y+(x-$v)/$v,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};d.$=class extends we{},d.A=ih,d.B=Kf,d.C=function(o){if(he==null){const r=o.navigator?o.navigator.userAgent:null;he=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return he},d.D=Yt,d.E=lr,d.F=class{constructor(o,r){this.target=o,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new OF(()=>this.process()),this.subscription=function(s,h,m,y){return s.addEventListener(h,m,!1),{unsubscribe:()=>{s.removeEventListener(h,m,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=ie(self)?o:window}registerMessageHandler(o,r){this.messageHandlers[o]=r}sendAsync(o,r){return new Promise((s,h)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:s,reject:h},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const S={id:m,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const y=[],x=Object.assign(Object.assign({},o),{id:m,sourceMapId:this.mapId,origin:location.origin,data:qu(o.data,y)});this.target.postMessage(x,{transfer:y})})}receive(o){const r=o.data,s=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(ie(self)||r.mustQueue)return this.tasks[s]=r,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,r)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){return l(this,void 0,void 0,function*(){if(r.type==="<response>"){const m=this.resolveRejects[o];return delete this.resolveRejects[o],m?void(r.error?m.reject(la(r.error)):m.resolve(la(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=la(r.data),h=new AbortController;this.abortControllers[o]=h;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,s,h);this.completeTask(o,null,m)}catch(m){this.completeTask(o,m)}})}completeTask(o,r,s){const h=[];delete this.abortControllers[o];const m={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?qu(r):null,data:qu(s,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.G=We,d.H=function(){var o=new ih(16);return ih!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},d.I=Ev,d.J=function(o,r,s){var h,m,y,x,S,C,F,G,J,ne,ce,me,Te=s[0],Re=s[1],Ne=s[2];return r===o?(o[12]=r[0]*Te+r[4]*Re+r[8]*Ne+r[12],o[13]=r[1]*Te+r[5]*Re+r[9]*Ne+r[13],o[14]=r[2]*Te+r[6]*Re+r[10]*Ne+r[14],o[15]=r[3]*Te+r[7]*Re+r[11]*Ne+r[15]):(m=r[1],y=r[2],x=r[3],S=r[4],C=r[5],F=r[6],G=r[7],J=r[8],ne=r[9],ce=r[10],me=r[11],o[0]=h=r[0],o[1]=m,o[2]=y,o[3]=x,o[4]=S,o[5]=C,o[6]=F,o[7]=G,o[8]=J,o[9]=ne,o[10]=ce,o[11]=me,o[12]=h*Te+S*Re+J*Ne+r[12],o[13]=m*Te+C*Re+ne*Ne+r[13],o[14]=y*Te+F*Re+ce*Ne+r[14],o[15]=x*Te+G*Re+me*Ne+r[15]),o},d.K=function(o,r,s){var h=s[0],m=s[1],y=s[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*m,o[5]=r[5]*m,o[6]=r[6]*m,o[7]=r[7]*m,o[8]=r[8]*y,o[9]=r[9]*y,o[10]=r[10]*y,o[11]=r[11]*y,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},d.L=B2,d.M=function(o,r){const s={};for(let h=0;h<r.length;h++){const m=r[h];m in o&&(s[m]=o[m])}return s},d.N=Kl,d.O=FS,d.P=b,d.Q=RS,d.R=Lo,d.S=Bo,d.T=$l,d.U=K,d.V=Z,d.W=de,d.X=Ln,d.Y=$,d.Z=Rm,d._=l,d.a=Fe,d.a$=function(o,r){var s=o[0],h=o[1],m=o[2],y=o[3],x=o[4],S=o[5],C=o[6],F=o[7],G=o[8],J=o[9],ne=o[10],ce=o[11],me=o[12],Te=o[13],Re=o[14],Ne=o[15],Qe=r[0],Ze=r[1],Ye=r[2],lt=r[3],_t=r[4],Ft=r[5],ir=r[6],zt=r[7],Ot=r[8],Kt=r[9],Ut=r[10],Nt=r[11],dt=r[12],Qt=r[13],Xt=r[14],fr=r[15];return Math.abs(s-Qe)<=Ni*Math.max(1,Math.abs(s),Math.abs(Qe))&&Math.abs(h-Ze)<=Ni*Math.max(1,Math.abs(h),Math.abs(Ze))&&Math.abs(m-Ye)<=Ni*Math.max(1,Math.abs(m),Math.abs(Ye))&&Math.abs(y-lt)<=Ni*Math.max(1,Math.abs(y),Math.abs(lt))&&Math.abs(x-_t)<=Ni*Math.max(1,Math.abs(x),Math.abs(_t))&&Math.abs(S-Ft)<=Ni*Math.max(1,Math.abs(S),Math.abs(Ft))&&Math.abs(C-ir)<=Ni*Math.max(1,Math.abs(C),Math.abs(ir))&&Math.abs(F-zt)<=Ni*Math.max(1,Math.abs(F),Math.abs(zt))&&Math.abs(G-Ot)<=Ni*Math.max(1,Math.abs(G),Math.abs(Ot))&&Math.abs(J-Kt)<=Ni*Math.max(1,Math.abs(J),Math.abs(Kt))&&Math.abs(ne-Ut)<=Ni*Math.max(1,Math.abs(ne),Math.abs(Ut))&&Math.abs(ce-Nt)<=Ni*Math.max(1,Math.abs(ce),Math.abs(Nt))&&Math.abs(me-dt)<=Ni*Math.max(1,Math.abs(me),Math.abs(dt))&&Math.abs(Te-Qt)<=Ni*Math.max(1,Math.abs(Te),Math.abs(Qt))&&Math.abs(Re-Xt)<=Ni*Math.max(1,Math.abs(Re),Math.abs(Xt))&&Math.abs(Ne-fr)<=Ni*Math.max(1,Math.abs(Ne),Math.abs(fr))},d.a0=Un,d.a1=Rv,d.a2=M,d.a3=o=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(s=>{r.onloadstart=()=>{s(r)};for(const h of o){const m=window.document.createElement("source");kt(h)||(r.crossOrigin="Anonymous"),m.src=h,r.appendChild(m)}})},d.a4=function(){return z++},d.a5=xr,d.a6=ch,d.a7=Ur,d.a8=ec,d.a9=en,d.aA=function(o){o=o.slice();const r=Object.create(null);for(let s=0;s<o.length;s++)r[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=ur(o[s],r[o[s].ref]));return o},d.aB=function(o){if(o.type==="custom")return new MF(o);switch(o.type){case"background":return new IF(o);case"circle":return new m4(o);case"fill":return new O4(o);case"fill-extrusion":return new Z4(o);case"heatmap":return new y4(o);case"hillshade":return new _4(o);case"line":return new tF(o);case"raster":return new kF(o);case"symbol":return new Fm(o)}},d.aC=X,d.aD=function(o,r){if(!o)return[{command:"setStyle",args:[r]}];let s=[];try{if(!Vt(o.version,r.version))return[{command:"setStyle",args:[r]}];Vt(o.center,r.center)||s.push({command:"setCenter",args:[r.center]}),Vt(o.zoom,r.zoom)||s.push({command:"setZoom",args:[r.zoom]}),Vt(o.bearing,r.bearing)||s.push({command:"setBearing",args:[r.bearing]}),Vt(o.pitch,r.pitch)||s.push({command:"setPitch",args:[r.pitch]}),Vt(o.sprite,r.sprite)||s.push({command:"setSprite",args:[r.sprite]}),Vt(o.glyphs,r.glyphs)||s.push({command:"setGlyphs",args:[r.glyphs]}),Vt(o.transition,r.transition)||s.push({command:"setTransition",args:[r.transition]}),Vt(o.light,r.light)||s.push({command:"setLight",args:[r.light]}),Vt(o.terrain,r.terrain)||s.push({command:"setTerrain",args:[r.terrain]}),Vt(o.sky,r.sky)||s.push({command:"setSky",args:[r.sky]}),Vt(o.projection,r.projection)||s.push({command:"setProjection",args:[r.projection]});const h={},m=[];(function(x,S,C,F){let G;for(G in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,G)&&(Object.prototype.hasOwnProperty.call(S,G)||D(G,C,F));for(G in S)Object.prototype.hasOwnProperty.call(S,G)&&(Object.prototype.hasOwnProperty.call(x,G)?Vt(x[G],S[G])||(x[G].type==="geojson"&&S[G].type==="geojson"&&Xe(x,S,G)?Se(C,{command:"setGeoJSONSourceData",args:[G,S[G].data]}):_e(G,S,C,F)):N(G,S,C))})(o.sources,r.sources,m,h);const y=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):y.push(x)}),s=s.concat(m),function(x,S,C){S=S||[];const F=(x=x||[]).map(ht),G=S.map(ht),J=x.reduce(ue,{}),ne=S.reduce(ue,{}),ce=F.slice(),me=Object.create(null);let Te,Re,Ne,Qe,Ze;for(let Ye=0,lt=0;Ye<F.length;Ye++)Te=F[Ye],Object.prototype.hasOwnProperty.call(ne,Te)?lt++:(Se(C,{command:"removeLayer",args:[Te]}),ce.splice(ce.indexOf(Te,lt),1));for(let Ye=0,lt=0;Ye<G.length;Ye++)Te=G[G.length-1-Ye],ce[ce.length-1-Ye]!==Te&&(Object.prototype.hasOwnProperty.call(J,Te)?(Se(C,{command:"removeLayer",args:[Te]}),ce.splice(ce.lastIndexOf(Te,ce.length-lt),1)):lt++,Qe=ce[ce.length-Ye],Se(C,{command:"addLayer",args:[ne[Te],Qe]}),ce.splice(ce.length-Ye,0,Te),me[Te]=!0);for(let Ye=0;Ye<G.length;Ye++)if(Te=G[Ye],Re=J[Te],Ne=ne[Te],!me[Te]&&!Vt(Re,Ne))if(Vt(Re.source,Ne.source)&&Vt(Re["source-layer"],Ne["source-layer"])&&Vt(Re.type,Ne.type)){for(Ze in tt(Re.layout,Ne.layout,C,Te,null,"setLayoutProperty"),tt(Re.paint,Ne.paint,C,Te,null,"setPaintProperty"),Vt(Re.filter,Ne.filter)||Se(C,{command:"setFilter",args:[Te,Ne.filter]}),Vt(Re.minzoom,Ne.minzoom)&&Vt(Re.maxzoom,Ne.maxzoom)||Se(C,{command:"setLayerZoomRange",args:[Te,Ne.minzoom,Ne.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?tt(Re[Ze],Ne[Ze],C,Te,Ze.slice(6),"setPaintProperty"):Vt(Re[Ze],Ne[Ze])||Se(C,{command:"setLayerProperty",args:[Te,Ze,Ne[Ze]]}));for(Ze in Ne)Object.prototype.hasOwnProperty.call(Ne,Ze)&&!Object.prototype.hasOwnProperty.call(Re,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?tt(Re[Ze],Ne[Ze],C,Te,Ze.slice(6),"setPaintProperty"):Vt(Re[Ze],Ne[Ze])||Se(C,{command:"setLayerProperty",args:[Te,Ze,Ne[Ze]]}))}else Se(C,{command:"removeLayer",args:[Te]}),Qe=ce[ce.lastIndexOf(Te)+1],Se(C,{command:"addLayer",args:[Ne,Qe]})}(y,r.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[r]}]}return s},d.aE=function(o){const r=[],s=o.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},d.aF=function o(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],s[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const h in r)if(!o(r[h],s[h]))return!1;return!0}return r===s},d.aG=B,d.aH=ee,d.aI=class extends Ju{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},d.aJ=_m,d.aK=class extends Ju{constructor(o,r){super(o,r),this.current=s4}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},d.aL=A2,d.aM=I2,d.aN=Mr,d.aO=class extends Ju{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},d.aP=class extends Ju{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},d.aQ=function(o,r,s,h,m,y,x){var S=1/(r-s),C=1/(h-m),F=1/(y-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*C,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(r+s)*S,o[13]=(m+h)*C,o[14]=(x+y)*F,o[15]=1,o},d.aR=p4,d.aS=class extends mt{},d.aT=oF,d.aU=class extends Bt{},d.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},d.aW=V2,d.aX=Xs,d.aY=qn,d.aZ=class extends jt{},d.a_=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]&&o[4]===r[4]&&o[5]===r[5]&&o[6]===r[6]&&o[7]===r[7]&&o[8]===r[8]&&o[9]===r[9]&&o[10]===r[10]&&o[11]===r[11]&&o[12]===r[12]&&o[13]===r[13]&&o[14]===r[14]&&o[15]===r[15]},d.aa=NS,d.ab=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,y)=>{const x=m||y;return r[h]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},d.ac=function(o,r){const s=[];for(const h in o)h in r||s.push(h);return s},d.ad=q,d.ae=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),y=r[0],x=r[1],S=r[2],C=r[3],F=r[4],G=r[5],J=r[6],ne=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=y*m+F*h,o[1]=x*m+G*h,o[2]=S*m+J*h,o[3]=C*m+ne*h,o[4]=F*m-y*h,o[5]=G*m-x*h,o[6]=J*m-S*h,o[7]=ne*m-C*h,o},d.af=function(o){var r=new ih(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},d.ag=Sm,d.ah=function(o,r){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:x}=o,S=m?q(Ei.interpolationFactor(m,r,y,x),0,1):0;o.kind==="camera"?h=Si.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},d.aj=function(o,{uSize:r,uSizeT:s},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/fs:o.kind==="composite"?Si.number(h/fs,m/fs,s):r},d.ak=Iv,d.al=function(o,r,s,h){const m=r.y-o.y,y=r.x-o.x,x=h.y-s.y,S=h.x-s.x,C=x*y-S*m;if(C===0)return null;const F=(S*(o.y-s.y)-x*(o.x-s.x))/C;return new b(o.x+F*y,o.y+F*m)},d.am=GS,d.an=O2,d.ao=lv,d.ap=function(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const y of o)r=Math.min(r,y.x),s=Math.min(s,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return[r,s,h,m]},d.aq=Vn,d.as=Av,d.at=function(o,r){var s=r[0],h=r[1],m=r[2],y=r[3],x=r[4],S=r[5],C=r[6],F=r[7],G=r[8],J=r[9],ne=r[10],ce=r[11],me=r[12],Te=r[13],Re=r[14],Ne=r[15],Qe=s*S-h*x,Ze=s*C-m*x,Ye=s*F-y*x,lt=h*C-m*S,_t=h*F-y*S,Ft=m*F-y*C,ir=G*Te-J*me,zt=G*Re-ne*me,Ot=G*Ne-ce*me,Kt=J*Re-ne*Te,Ut=J*Ne-ce*Te,Nt=ne*Ne-ce*Re,dt=Qe*Nt-Ze*Ut+Ye*Kt+lt*Ot-_t*zt+Ft*ir;return dt?(o[0]=(S*Nt-C*Ut+F*Kt)*(dt=1/dt),o[1]=(m*Ut-h*Nt-y*Kt)*dt,o[2]=(Te*Ft-Re*_t+Ne*lt)*dt,o[3]=(ne*_t-J*Ft-ce*lt)*dt,o[4]=(C*Ot-x*Nt-F*zt)*dt,o[5]=(s*Nt-m*Ot+y*zt)*dt,o[6]=(Re*Ye-me*Ft-Ne*Ze)*dt,o[7]=(G*Ft-ne*Ye+ce*Ze)*dt,o[8]=(x*Ut-S*Ot+F*ir)*dt,o[9]=(h*Ot-s*Ut-y*ir)*dt,o[10]=(me*_t-Te*Ye+Ne*Qe)*dt,o[11]=(J*Ye-G*_t-ce*Qe)*dt,o[12]=(S*zt-x*Kt-C*ir)*dt,o[13]=(s*Kt-h*zt+m*ir)*dt,o[14]=(Te*Ze-me*lt-Re*Qe)*dt,o[15]=(G*lt-J*Ze+ne*Qe)*dt,o):null},d.au=zv,d.av=Pv,d.aw=Lv,d.ax=function(){const o={},r=et.$version;for(const s in et.$root){const h=et.$root[s];if(h.required){let m=null;m=s==="version"?r:h.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},d.ay=hm,d.az=ct,d.b=Y,d.b0=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},d.b1=function(o,r,s){return o[0]=r[0]*s[0],o[1]=r[1]*s[1],o[2]=r[2]*s[2],o[3]=r[3]*s[3],o},d.b2=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},d.b3=V,d.b4=LS,d.b5=jS,d.b6=function(o,r,s,h,m){var y,x=1/Math.tan(r/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(y=1/(h-m)),o[14]=2*m*h*y):(o[10]=-1,o[14]=-2*h),o},d.b7=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),y=r[4],x=r[5],S=r[6],C=r[7],F=r[8],G=r[9],J=r[10],ne=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=y*m+F*h,o[5]=x*m+G*h,o[6]=S*m+J*h,o[7]=C*m+ne*h,o[8]=F*m-y*h,o[9]=G*m-x*h,o[10]=J*m-S*h,o[11]=ne*m-C*h,o},d.b8=W,d.b9=ae,d.bA=function(o){return o.message===$e},d.bB=St,d.bC=us,d.ba=function(o){return o*Math.PI/180},d.bb=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},d.bc=class extends pe{},d.bd=Ov,d.be=UF,d.bg=it,d.bh=function(o,r){Fe.REGISTERED_PROTOCOLS[o]=r},d.bi=function(o){delete Fe.REGISTERED_PROTOCOLS[o]},d.bj=function(o,r){const s={};for(let m=0;m<o.length;m++){const y=r&&r[o[m].id]||Bf(o[m]);r&&(r[o[m].id]=y);let x=s[y];x||(x=s[y]=[]),x.push(o[m])}const h=[];for(const m in s)h.push(s[m]);return h},d.bk=$t,d.bl=DS,d.bm=$S,d.bn=vS,d.bo=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Ln/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],s=r.layout,h=r._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new en(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new en(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new en(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:G}=o.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new en(F),o.canonical),h["text-size"].possiblyEvaluate(new en(G),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:G}=o.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new en(F),o.canonical),h["icon-size"].possiblyEvaluate(new en(G),o.canonical)]}const y=s.get("text-line-height")*Vn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),C=s.get("text-size");for(const F of o.bucket.features){const G=s.get("text-font").evaluate(F,{},o.canonical).join(","),J=C.evaluate(F,{},o.canonical),ne=m.layoutTextSize.evaluate(F,{},o.canonical),ce=m.layoutIconSize.evaluate(F,{},o.canonical),me={horizontal:{},vertical:void 0},Te=F.text;let Re,Ne=[0,0];if(Te){const Ye=Te.toString(),lt=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*Vn,_t=tv(Ye)?lt:0,Ft=s.get("text-anchor").evaluate(F,{},o.canonical),ir=QS(r,F,o.canonical);if(!ir){const Ut=s.get("text-radial-offset").evaluate(F,{},o.canonical);Ne=Ut?YS(Ft,[Ut*Vn,jv]):s.get("text-offset").evaluate(F,{},o.canonical).map(Nt=>Nt*Vn)}let zt=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const Ot=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*Vn:1/0,Kt=()=>{o.bucket.allowVerticalPlacement&&Qf(Ye)&&(me.vertical=km(Te,o.glyphMap,o.glyphPositions,o.imagePositions,G,Ot,y,Ft,"left",_t,Ne,d.ai.vertical,!0,ne,J))};if(!x&&ir){const Ut=new Set;if(zt==="auto")for(let dt=0;dt<ir.values.length;dt+=2)Ut.add(zv(ir.values[dt]));else Ut.add(zt);let Nt=!1;for(const dt of Ut)if(!me.horizontal[dt])if(Nt)me.horizontal[dt]=me.horizontal[0];else{const Qt=km(Te,o.glyphMap,o.glyphPositions,o.imagePositions,G,Ot,y,"center",dt,_t,Ne,d.ai.horizontal,!1,ne,J);Qt&&(me.horizontal[dt]=Qt,Nt=Qt.positionedLines.length===1)}Kt()}else{zt==="auto"&&(zt=zv(Ft));const Ut=km(Te,o.glyphMap,o.glyphPositions,o.imagePositions,G,Ot,y,Ft,zt,_t,Ne,d.ai.horizontal,!1,ne,J);Ut&&(me.horizontal[zt]=Ut),Kt(),Qf(Ye)&&x&&S&&(me.vertical=km(Te,o.glyphMap,o.glyphPositions,o.imagePositions,G,Ot,y,Ft,zt,_t,Ne,d.ai.vertical,!1,ne,J))}}let Qe=!1;if(F.icon&&F.icon.name){const Ye=o.imageMap[F.icon.name];Ye&&(Re=SF(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),Qe=!!Ye.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Qe:o.bucket.sdfIcons!==Qe&&ge("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ze=tE(me.horizontal)||me.vertical;o.bucket.iconsInText=!!Ze&&Ze.iconsInText,(Ze||Re)&&NF(o.bucket,F,me,Re,o.imageMap,m,ne,ce,Ne,Qe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},d.bp=xv,d.bq=yv,d.br=_v,d.bs=Zl,d.bt=bv,d.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},d.bv=function(o,r,s,h,m){return l(this,void 0,void 0,function*(){if(Z())try{return yield de(o,r,s,h,m)}catch{}return function(y,x,S,C,F){const G=y.width,J=y.height;be&&Pe||(be=new OffscreenCanvas(G,J),Pe=be.getContext("2d",{willReadFrequently:!0})),be.width=G,be.height=J,Pe.drawImage(y,0,0,G,J);const ne=Pe.getImageData(x,S,C,F);return Pe.clearRect(0,0,G,J),ne.data}(o,r,s,h,m)})},d.bw=BS,d.bx=w,d.by=E,d.bz=uS,d.c=Ce,d.d=o=>l(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(r)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=P,d.f=o=>new Promise((r,s)=>{const h=new Image;h.onload=()=>{r(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=re})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(m):re}),d.g=He,d.h=(o,r)=>vt(P(o,{type:"json"}),r),d.i=ie,d.j=Ht,d.k=Wt,d.l=(o,r)=>vt(P(o,{type:"arrayBuffer"}),r),d.m=vt,d.n=function(o){return new bv(o).readFields(gF,[])},d.o=hd,d.p=yS,d.q=p,d.r=Y0,d.s=kt,d.t=Jf,d.u=Lt,d.v=et,d.w=ge,d.x=Oa,d.y=function([o,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(s),y:o*Math.sin(r)*Math.sin(s),z:o*Math.cos(s)}},d.z=Si}),u("worker",["./shared"],function(d){class l{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,oe){for(const Ie of se){this._layerConfigs[Ie.id]=Ie;const Me=this._layers[Ie.id]=d.aB(Ie);Me._featureFilter=d.a7(Me.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of oe)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const xe=d.bj(Object.values(this._layerConfigs),this.keyCache);for(const Ie of xe){const Me=Ie.map(ot=>this._layers[ot.id]),Be=Me[0];if(Be.visibility==="none")continue;const Ke=Be.source||"";let Le=this.familiesBySource[Ke];Le||(Le=this.familiesBySource[Ke]={});const at=Be.sourceLayer||"_geojsonTileLayer";let ft=Le[at];ft||(ft=Le[at]=[]),ft.push(Me)}}}class w{constructor(se){const oe={},xe=[];for(const Ke in se){const Le=se[Ke],at=oe[Ke]={};for(const ft in Le){const ot=Le[+ft];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const Pt={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};xe.push(Pt),at[ft]={rect:Pt,metrics:ot.metrics}}}const{w:Ie,h:Me}=d.p(xe),Be=new d.o({width:Ie||1,height:Me||1});for(const Ke in se){const Le=se[Ke];for(const at in Le){const ft=Le[+at];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const ot=oe[Ke][at].rect;d.o.copy(ft.bitmap,Be,{x:0,y:0},{x:ot.x+1,y:ot.y+1},ft.bitmap)}}this.image=Be,this.positions=oe}}d.bk("GlyphAtlas",w);class E{constructor(se){this.tileID=new d.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,oe,xe,Ie){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new d.a5;const Me=new d.bl(Object.keys(se.layers).sort()),Be=new d.bm(this.tileID,this.promoteId);Be.bucketLayerIDs=[];const Ke={},Le={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe},at=oe.familiesBySource[this.source];for(const wr in at){const $r=se.layers[wr];if(!$r)continue;$r.version===1&&d.w(`Vector tile source "${this.source}" layer "${wr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Qr=Me.encode(wr),An=[];for(let Hn=0;Hn<$r.length;Hn++){const Zn=$r.feature(Hn),ea=Be.getId(Zn,wr);An.push({feature:Zn,id:ea,index:Hn,sourceLayerIndex:Qr})}for(const Hn of at[wr]){const Zn=Hn[0];Zn.source!==this.source&&d.w(`layer.source = ${Zn.source} does not equal this.source = ${this.source}`),Zn.minzoom&&this.zoom<Math.floor(Zn.minzoom)||Zn.maxzoom&&this.zoom>=Zn.maxzoom||Zn.visibility!=="none"&&(I(Hn,this.zoom,xe),(Ke[Zn.id]=Zn.createBucket({index:Be.bucketLayerIDs.length,layers:Hn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Qr,sourceID:this.source})).populate(An,Le,this.tileID.canonical),Be.bucketLayerIDs.push(Hn.map(ea=>ea.id)))}}const ft=d.aG(Le.glyphDependencies,wr=>Object.keys(wr).map(Number));this.inFlightDependencies.forEach(wr=>wr==null?void 0:wr.abort()),this.inFlightDependencies=[];let ot=Promise.resolve({});if(Object.keys(ft).length){const wr=new AbortController;this.inFlightDependencies.push(wr),ot=Ie.sendAsync({type:"GG",data:{stacks:ft,source:this.source,tileID:this.tileID,type:"glyphs"}},wr)}const Pt=Object.keys(Le.iconDependencies);let qt=Promise.resolve({});if(Pt.length){const wr=new AbortController;this.inFlightDependencies.push(wr),qt=Ie.sendAsync({type:"GI",data:{icons:Pt,source:this.source,tileID:this.tileID,type:"icons"}},wr)}const nr=Object.keys(Le.patternDependencies);let pr=Promise.resolve({});if(nr.length){const wr=new AbortController;this.inFlightDependencies.push(wr),pr=Ie.sendAsync({type:"GI",data:{icons:nr,source:this.source,tileID:this.tileID,type:"patterns"}},wr)}const[Er,hr,Vr]=yield Promise.all([ot,qt,pr]),Yr=new w(Er),on=new d.bn(hr,Vr);for(const wr in Ke){const $r=Ke[wr];$r instanceof d.a6?(I($r.layers,this.zoom,xe),d.bo({bucket:$r,glyphMap:Er,glyphPositions:Yr.positions,imageMap:hr,imagePositions:on.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):$r.hasPattern&&($r instanceof d.bp||$r instanceof d.bq||$r instanceof d.br)&&(I($r.layers,this.zoom,xe),$r.addFeatures(Le,this.tileID.canonical,on.patternPositions))}return this.status="done",{buckets:Object.values(Ke).filter(wr=>!wr.isEmpty()),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yr.image,imageAtlas:on,glyphMap:this.returnDependencies?Er:null,iconMap:this.returnDependencies?hr:null,glyphPositions:this.returnDependencies?Yr.positions:null}})}}function I(Oe,se,oe){const xe=new d.a9(se);for(const Ie of Oe)Ie.recalculate(xe,oe)}class b{constructor(se,oe,xe){this.actor=se,this.layerIndex=oe,this.availableImages=xe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,oe){return d._(this,void 0,void 0,function*(){const xe=yield d.l(se.request,oe);try{return{vectorTile:new d.bs.VectorTile(new d.bt(xe.data)),rawData:xe.data,cacheControl:xe.cacheControl,expires:xe.expires}}catch(Ie){const Me=new Uint8Array(xe.data);let Be=`Unable to parse the tile at ${se.request.url}, `;throw Be+=Me[0]===31&&Me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.message}`,new Error(Be)}})}loadTile(se){return d._(this,void 0,void 0,function*(){const oe=se.uid,xe=!!(se&&se.request&&se.request.collectResourceTiming)&&new d.bu(se.request),Ie=new E(se);this.loading[oe]=Ie;const Me=new AbortController;Ie.abort=Me;try{const Be=yield this.loadVectorTile(se,Me);if(delete this.loading[oe],!Be)return null;const Ke=Be.rawData,Le={};Be.expires&&(Le.expires=Be.expires),Be.cacheControl&&(Le.cacheControl=Be.cacheControl);const at={};if(xe){const ot=xe.finish();ot&&(at.resourceTiming=JSON.parse(JSON.stringify(ot)))}Ie.vectorTile=Be.vectorTile;const ft=Ie.parse(Be.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[oe]=Ie,this.fetching[oe]={rawTileData:Ke,cacheControl:Le,resourceTiming:at};try{const ot=yield ft;return d.e({rawTileData:Ke.slice(0)},ot,Le,at)}finally{delete this.fetching[oe]}}catch(Be){throw delete this.loading[oe],Ie.status="done",this.loaded[oe]=Ie,Be}})}reloadTile(se){return d._(this,void 0,void 0,function*(){const oe=se.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const xe=this.loaded[oe];if(xe.showCollisionBoxes=se.showCollisionBoxes,xe.status==="parsing"){const Ie=yield xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor);let Me;if(this.fetching[oe]){const{rawTileData:Be,cacheControl:Ke,resourceTiming:Le}=this.fetching[oe];delete this.fetching[oe],Me=d.e({rawTileData:Be.slice(0)},Ie,Ke,Le)}else Me=Ie;return Me}if(xe.status==="done"&&xe.vectorTile)return xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(se){return d._(this,void 0,void 0,function*(){const oe=this.loading,xe=se.uid;oe&&oe[xe]&&oe[xe].abort&&(oe[xe].abort.abort(),delete oe[xe])})}removeTile(se){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class T{constructor(){this.loaded={}}loadTile(se){return d._(this,void 0,void 0,function*(){const{uid:oe,encoding:xe,rawImageData:Ie,redFactor:Me,greenFactor:Be,blueFactor:Ke,baseShift:Le}=se,at=Ie.width+2,ft=Ie.height+2,ot=d.b(Ie)?new d.R({width:at,height:ft},yield d.bv(Ie,-1,-1,at,ft)):Ie,Pt=new d.bw(oe,ot,xe,Me,Be,Ke,Le);return this.loaded=this.loaded||{},this.loaded[oe]=Pt,Pt})}removeTile(se){const oe=this.loaded,xe=se.uid;oe&&oe[xe]&&delete oe[xe]}}function R(Oe,se){if(Oe.length!==0){L(Oe[0],se);for(var oe=1;oe<Oe.length;oe++)L(Oe[oe],!se)}}function L(Oe,se){for(var oe=0,xe=0,Ie=0,Me=Oe.length,Be=Me-1;Ie<Me;Be=Ie++){var Ke=(Oe[Ie][0]-Oe[Be][0])*(Oe[Be][1]+Oe[Ie][1]),Le=oe+Ke;xe+=Math.abs(oe)>=Math.abs(Ke)?oe-Le+Ke:Ke-Le+oe,oe=Le}oe+xe>=0!=!!se&&Oe.reverse()}var j=d.bx(function Oe(se,oe){var xe,Ie=se&&se.type;if(Ie==="FeatureCollection")for(xe=0;xe<se.features.length;xe++)Oe(se.features[xe],oe);else if(Ie==="GeometryCollection")for(xe=0;xe<se.geometries.length;xe++)Oe(se.geometries[xe],oe);else if(Ie==="Feature")Oe(se.geometry,oe);else if(Ie==="Polygon")R(se.coordinates,oe);else if(Ie==="MultiPolygon")for(xe=0;xe<se.coordinates.length;xe++)R(se.coordinates[xe],oe);return se});const le=d.bs.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},Z=d.by,W=d.bs.VectorTileFeature,ae=q;function q(Oe,se){this.options=se||{},this.features=Oe,this.length=Oe.length}function V(Oe,se){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=se||4096}q.prototype.feature=function(Oe){return new V(this.features[Oe],this.options.extent)},V.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var se=0;se<Oe.length;se++){for(var oe=Oe[se],xe=[],Ie=0;Ie<oe.length;Ie++)xe.push(new Z(oe[Ie][0],oe[Ie][1]));this.geometry.push(xe)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,se=1/0,oe=-1/0,xe=1/0,Ie=-1/0,Me=0;Me<Oe.length;Me++)for(var Be=Oe[Me],Ke=0;Ke<Be.length;Ke++){var Le=Be[Ke];se=Math.min(se,Le.x),oe=Math.max(oe,Le.x),xe=Math.min(xe,Le.y),Ie=Math.max(Ie,Le.y)}return[se,xe,oe,Ie]},V.prototype.toGeoJSON=W.prototype.toGeoJSON;var P=d.bz,z=ae;function B(Oe){var se=new P;return function(oe,xe){for(var Ie in oe.layers)xe.writeMessage(3,ee,oe.layers[Ie])}(Oe,se),se.finish()}function ee(Oe,se){var oe;se.writeVarintField(15,Oe.version||1),se.writeStringField(1,Oe.name||""),se.writeVarintField(5,Oe.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<Oe.length;oe++)xe.feature=Oe.feature(oe),se.writeMessage(2,X,xe);var Ie=xe.keys;for(oe=0;oe<Ie.length;oe++)se.writeStringField(3,Ie[oe]);var Me=xe.values;for(oe=0;oe<Me.length;oe++)se.writeMessage(4,he,Me[oe])}function X(Oe,se){var oe=Oe.feature;oe.id!==void 0&&se.writeVarintField(1,oe.id),se.writeMessage(2,ye,Oe),se.writeVarintField(3,oe.type),se.writeMessage(4,ie,oe)}function ye(Oe,se){var oe=Oe.feature,xe=Oe.keys,Ie=Oe.values,Me=Oe.keycache,Be=Oe.valuecache;for(var Ke in oe.properties){var Le=oe.properties[Ke],at=Me[Ke];if(Le!==null){at===void 0&&(xe.push(Ke),Me[Ke]=at=xe.length-1),se.writeVarint(at);var ft=typeof Le;ft!=="string"&&ft!=="boolean"&&ft!=="number"&&(Le=JSON.stringify(Le));var ot=ft+":"+Le,Pt=Be[ot];Pt===void 0&&(Ie.push(Le),Be[ot]=Pt=Ie.length-1),se.writeVarint(Pt)}}}function ge(Oe,se){return(se<<3)+(7&Oe)}function fe(Oe){return Oe<<1^Oe>>31}function ie(Oe,se){for(var oe=Oe.loadGeometry(),xe=Oe.type,Ie=0,Me=0,Be=oe.length,Ke=0;Ke<Be;Ke++){var Le=oe[Ke],at=1;xe===1&&(at=Le.length),se.writeVarint(ge(1,at));for(var ft=xe===3?Le.length-1:Le.length,ot=0;ot<ft;ot++){ot===1&&xe!==1&&se.writeVarint(ge(2,ft-1));var Pt=Le[ot].x-Ie,qt=Le[ot].y-Me;se.writeVarint(fe(Pt)),se.writeVarint(fe(qt)),Ie+=Pt,Me+=qt}xe===3&&se.writeVarint(ge(7,1))}}function he(Oe,se){var oe=typeof Oe;oe==="string"?se.writeStringField(1,Oe):oe==="boolean"?se.writeBooleanField(7,Oe):oe==="number"&&(Oe%1!=0?se.writeDoubleField(3,Oe):Oe<0?se.writeSVarintField(6,Oe):se.writeVarintField(5,Oe))}K.exports=B,K.exports.fromVectorTileJs=B,K.exports.fromGeojsonVt=function(Oe,se){se=se||{};var oe={};for(var xe in Oe)oe[xe]=new z(Oe[xe].features,se),oe[xe].name=xe,oe[xe].version=se.version,oe[xe].extent=se.extent;return B({layers:oe})},K.exports.GeoJSONWrapper=z;var Y=d.bx(K.exports);const re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},de=Math.fround||(be=new Float32Array(1),Oe=>(be[0]=+Oe,be[0]));var be;const Pe=3,$e=5,Ce=6;class Fe{constructor(se){this.options=Object.assign(Object.create(re),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:oe,minZoom:xe,maxZoom:Ie}=this.options;oe&&console.time("total time");const Me=`prepare ${se.length} points`;oe&&console.time(Me),this.points=se;const Be=[];for(let Le=0;Le<se.length;Le++){const at=se[Le];if(!at.geometry)continue;const[ft,ot]=at.geometry.coordinates,Pt=de(it(ft)),qt=de(ct(ot));Be.push(Pt,qt,1/0,Le,-1,1),this.options.reduce&&Be.push(0)}let Ke=this.trees[Ie+1]=this._createTree(Be);oe&&console.timeEnd(Me);for(let Le=Ie;Le>=xe;Le--){const at=+Date.now();Ke=this.trees[Le]=this._createTree(this._cluster(Ke,Le)),oe&&console.log("z%d: %d clusters in %dms",Le,Ke.numItems,+Date.now()-at)}return oe&&console.timeEnd("total time"),this}getClusters(se,oe){let xe=((se[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,se[1]));let Me=se[2]===180?180:((se[2]+180)%360+360)%360-180;const Be=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)xe=-180,Me=180;else if(xe>Me){const ot=this.getClusters([xe,Ie,180,Be],oe),Pt=this.getClusters([-180,Ie,Me,Be],oe);return ot.concat(Pt)}const Ke=this.trees[this._limitZoom(oe)],Le=Ke.range(it(xe),ct(Be),it(Me),ct(Ie)),at=Ke.data,ft=[];for(const ot of Le){const Pt=this.stride*ot;ft.push(at[Pt+$e]>1?He(at,Pt,this.clusterProps):this.points[at[Pt+Pe]])}return ft}getChildren(se){const oe=this._getOriginId(se),xe=this._getOriginZoom(se),Ie="No cluster with the specified id.",Me=this.trees[xe];if(!Me)throw new Error(Ie);const Be=Me.data;if(oe*this.stride>=Be.length)throw new Error(Ie);const Ke=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Le=Me.within(Be[oe*this.stride],Be[oe*this.stride+1],Ke),at=[];for(const ft of Le){const ot=ft*this.stride;Be[ot+4]===se&&at.push(Be[ot+$e]>1?He(Be,ot,this.clusterProps):this.points[Be[ot+Pe]])}if(at.length===0)throw new Error(Ie);return at}getLeaves(se,oe,xe){const Ie=[];return this._appendLeaves(Ie,se,oe=oe||10,xe=xe||0,0),Ie}getTile(se,oe,xe){const Ie=this.trees[this._limitZoom(se)],Me=Math.pow(2,se),{extent:Be,radius:Ke}=this.options,Le=Ke/Be,at=(xe-Le)/Me,ft=(xe+1+Le)/Me,ot={features:[]};return this._addTileFeatures(Ie.range((oe-Le)/Me,at,(oe+1+Le)/Me,ft),Ie.data,oe,xe,Me,ot),oe===0&&this._addTileFeatures(Ie.range(1-Le/Me,at,1,ft),Ie.data,Me,xe,Me,ot),oe===Me-1&&this._addTileFeatures(Ie.range(0,at,Le/Me,ft),Ie.data,-1,xe,Me,ot),ot.features.length?ot:null}getClusterExpansionZoom(se){let oe=this._getOriginZoom(se)-1;for(;oe<=this.options.maxZoom;){const xe=this.getChildren(se);if(oe++,xe.length!==1)break;se=xe[0].properties.cluster_id}return oe}_appendLeaves(se,oe,xe,Ie,Me){const Be=this.getChildren(oe);for(const Ke of Be){const Le=Ke.properties;if(Le&&Le.cluster?Me+Le.point_count<=Ie?Me+=Le.point_count:Me=this._appendLeaves(se,Le.cluster_id,xe,Ie,Me):Me<Ie?Me++:se.push(Ke),se.length===xe)break}return Me}_createTree(se){const oe=new d.aw(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<se.length;xe+=this.stride)oe.add(se[xe],se[xe+1]);return oe.finish(),oe.data=se,oe}_addTileFeatures(se,oe,xe,Ie,Me,Be){for(const Ke of se){const Le=Ke*this.stride,at=oe[Le+$e]>1;let ft,ot,Pt;if(at)ft=We(oe,Le,this.clusterProps),ot=oe[Le],Pt=oe[Le+1];else{const pr=this.points[oe[Le+Pe]];ft=pr.properties;const[Er,hr]=pr.geometry.coordinates;ot=it(Er),Pt=ct(hr)}const qt={type:1,geometry:[[Math.round(this.options.extent*(ot*Me-xe)),Math.round(this.options.extent*(Pt*Me-Ie))]],tags:ft};let nr;nr=at||this.options.generateId?oe[Le+Pe]:this.points[oe[Le+Pe]].id,nr!==void 0&&(qt.id=nr),Be.features.push(qt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,oe){const{radius:xe,extent:Ie,reduce:Me,minPoints:Be}=this.options,Ke=xe/(Ie*Math.pow(2,oe)),Le=se.data,at=[],ft=this.stride;for(let ot=0;ot<Le.length;ot+=ft){if(Le[ot+2]<=oe)continue;Le[ot+2]=oe;const Pt=Le[ot],qt=Le[ot+1],nr=se.within(Le[ot],Le[ot+1],Ke),pr=Le[ot+$e];let Er=pr;for(const hr of nr){const Vr=hr*ft;Le[Vr+2]>oe&&(Er+=Le[Vr+$e])}if(Er>pr&&Er>=Be){let hr,Vr=Pt*pr,Yr=qt*pr,on=-1;const wr=((ot/ft|0)<<5)+(oe+1)+this.points.length;for(const $r of nr){const Qr=$r*ft;if(Le[Qr+2]<=oe)continue;Le[Qr+2]=oe;const An=Le[Qr+$e];Vr+=Le[Qr]*An,Yr+=Le[Qr+1]*An,Le[Qr+4]=wr,Me&&(hr||(hr=this._map(Le,ot,!0),on=this.clusterProps.length,this.clusterProps.push(hr)),Me(hr,this._map(Le,Qr)))}Le[ot+4]=wr,at.push(Vr/Er,Yr/Er,1/0,wr,-1,Er),Me&&at.push(on)}else{for(let hr=0;hr<ft;hr++)at.push(Le[ot+hr]);if(Er>1)for(const hr of nr){const Vr=hr*ft;if(!(Le[Vr+2]<=oe)){Le[Vr+2]=oe;for(let Yr=0;Yr<ft;Yr++)at.push(Le[Vr+Yr])}}}}return at}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,oe,xe){if(se[oe+$e]>1){const Be=this.clusterProps[se[oe+Ce]];return xe?Object.assign({},Be):Be}const Ie=this.points[se[oe+Pe]].properties,Me=this.options.map(Ie);return xe&&Me===Ie?Object.assign({},Me):Me}}function He(Oe,se,oe){return{type:"Feature",id:Oe[se+Pe],properties:We(Oe,se,oe),geometry:{type:"Point",coordinates:[(xe=Oe[se],360*(xe-.5)),vt(Oe[se+1])]}};var xe}function We(Oe,se,oe){const xe=Oe[se+$e],Ie=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Me=Oe[se+Ce],Be=Me===-1?{}:Object.assign({},oe[Me]);return Object.assign(Be,{cluster:!0,cluster_id:Oe[se+Pe],point_count:xe,point_count_abbreviated:Ie})}function it(Oe){return Oe/360+.5}function ct(Oe){const se=Math.sin(Oe*Math.PI/180),oe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return oe<0?0:oe>1?1:oe}function vt(Oe){const se=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function kt(Oe,se,oe,xe){let Ie=xe;const Me=se+(oe-se>>1);let Be,Ke=oe-se;const Le=Oe[se],at=Oe[se+1],ft=Oe[oe],ot=Oe[oe+1];for(let Pt=se+3;Pt<oe;Pt+=3){const qt=pt(Oe[Pt],Oe[Pt+1],Le,at,ft,ot);if(qt>Ie)Be=Pt,Ie=qt;else if(qt===Ie){const nr=Math.abs(Pt-Me);nr<Ke&&(Be=Pt,Ke=nr)}}Ie>xe&&(Be-se>3&&kt(Oe,se,Be,xe),Oe[Be+2]=Ie,oe-Be>3&&kt(Oe,Be,oe,xe))}function pt(Oe,se,oe,xe,Ie,Me){let Be=Ie-oe,Ke=Me-xe;if(Be!==0||Ke!==0){const Le=((Oe-oe)*Be+(se-xe)*Ke)/(Be*Be+Ke*Ke);Le>1?(oe=Ie,xe=Me):Le>0&&(oe+=Be*Le,xe+=Ke*Le)}return Be=Oe-oe,Ke=se-xe,Be*Be+Ke*Ke}function xt(Oe,se,oe,xe){const Ie={id:Oe??null,type:se,geometry:oe,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Wt(Ie,oe);else if(se==="Polygon")Wt(Ie,oe[0]);else if(se==="MultiLineString")for(const Me of oe)Wt(Ie,Me);else if(se==="MultiPolygon")for(const Me of oe)Wt(Ie,Me[0]);return Ie}function Wt(Oe,se){for(let oe=0;oe<se.length;oe+=3)Oe.minX=Math.min(Oe.minX,se[oe]),Oe.minY=Math.min(Oe.minY,se[oe+1]),Oe.maxX=Math.max(Oe.maxX,se[oe]),Oe.maxY=Math.max(Oe.maxY,se[oe+1])}function Ht(Oe,se,oe,xe){if(!se.geometry)return;const Ie=se.geometry.coordinates;if(Ie&&Ie.length===0)return;const Me=se.geometry.type,Be=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2);let Ke=[],Le=se.id;if(oe.promoteId?Le=se.properties[oe.promoteId]:oe.generateId&&(Le=xe||0),Me==="Point")lr(Ie,Ke);else if(Me==="MultiPoint")for(const at of Ie)lr(at,Ke);else if(Me==="LineString")et(Ie,Ke,Be,!1);else if(Me==="MultiLineString"){if(oe.lineMetrics){for(const at of Ie)Ke=[],et(at,Ke,Be,!1),Oe.push(xt(Le,"LineString",Ke,se.properties));return}_r(Ie,Ke,Be,!1)}else if(Me==="Polygon")_r(Ie,Ke,Be,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(const at of se.geometry.geometries)Ht(Oe,{id:Le,geometry:at,properties:se.properties},oe,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of Ie){const ft=[];_r(at,ft,Be,!0),Ke.push(ft)}}Oe.push(xt(Le,Me,Ke,se.properties))}function lr(Oe,se){se.push(ur(Oe[0]),Vt(Oe[1]),0)}function et(Oe,se,oe,xe){let Ie,Me,Be=0;for(let Le=0;Le<Oe.length;Le++){const at=ur(Oe[Le][0]),ft=Vt(Oe[Le][1]);se.push(at,ft,0),Le>0&&(Be+=xe?(Ie*ft-at*Me)/2:Math.sqrt(Math.pow(at-Ie,2)+Math.pow(ft-Me,2))),Ie=at,Me=ft}const Ke=se.length-3;se[2]=1,kt(se,0,Ke,oe),se[Ke+2]=1,se.size=Math.abs(Be),se.start=0,se.end=se.size}function _r(Oe,se,oe,xe){for(let Ie=0;Ie<Oe.length;Ie++){const Me=[];et(Oe[Ie],Me,oe,xe),se.push(Me)}}function ur(Oe){return Oe/360+.5}function Vt(Oe){const se=Math.sin(Oe*Math.PI/180),oe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return oe<0?0:oe>1?1:oe}function Se(Oe,se,oe,xe,Ie,Me,Be,Ke){if(xe/=se,Me>=(oe/=se)&&Be<xe)return Oe;if(Be<oe||Me>=xe)return null;const Le=[];for(const at of Oe){const ft=at.geometry;let ot=at.type;const Pt=Ie===0?at.minX:at.minY,qt=Ie===0?at.maxX:at.maxY;if(Pt>=oe&&qt<xe){Le.push(at);continue}if(qt<oe||Pt>=xe)continue;let nr=[];if(ot==="Point"||ot==="MultiPoint")N(ft,nr,oe,xe,Ie);else if(ot==="LineString")D(ft,nr,oe,xe,Ie,!1,Ke.lineMetrics);else if(ot==="MultiLineString")Xe(ft,nr,oe,xe,Ie,!1);else if(ot==="Polygon")Xe(ft,nr,oe,xe,Ie,!0);else if(ot==="MultiPolygon")for(const pr of ft){const Er=[];Xe(pr,Er,oe,xe,Ie,!0),Er.length&&nr.push(Er)}if(nr.length){if(Ke.lineMetrics&&ot==="LineString"){for(const pr of nr)Le.push(xt(at.id,ot,pr,at.tags));continue}ot!=="LineString"&&ot!=="MultiLineString"||(nr.length===1?(ot="LineString",nr=nr[0]):ot="MultiLineString"),ot!=="Point"&&ot!=="MultiPoint"||(ot=nr.length===3?"Point":"MultiPoint"),Le.push(xt(at.id,ot,nr,at.tags))}}return Le.length?Le:null}function N(Oe,se,oe,xe,Ie){for(let Me=0;Me<Oe.length;Me+=3){const Be=Oe[Me+Ie];Be>=oe&&Be<=xe&&tt(se,Oe[Me],Oe[Me+1],Oe[Me+2])}}function D(Oe,se,oe,xe,Ie,Me,Be){let Ke=_e(Oe);const Le=Ie===0?ht:ue;let at,ft,ot=Oe.start;for(let Er=0;Er<Oe.length-3;Er+=3){const hr=Oe[Er],Vr=Oe[Er+1],Yr=Oe[Er+2],on=Oe[Er+3],wr=Oe[Er+4],$r=Ie===0?hr:Vr,Qr=Ie===0?on:wr;let An=!1;Be&&(at=Math.sqrt(Math.pow(hr-on,2)+Math.pow(Vr-wr,2))),$r<oe?Qr>oe&&(ft=Le(Ke,hr,Vr,on,wr,oe),Be&&(Ke.start=ot+at*ft)):$r>xe?Qr<xe&&(ft=Le(Ke,hr,Vr,on,wr,xe),Be&&(Ke.start=ot+at*ft)):tt(Ke,hr,Vr,Yr),Qr<oe&&$r>=oe&&(ft=Le(Ke,hr,Vr,on,wr,oe),An=!0),Qr>xe&&$r<=xe&&(ft=Le(Ke,hr,Vr,on,wr,xe),An=!0),!Me&&An&&(Be&&(Ke.end=ot+at*ft),se.push(Ke),Ke=_e(Oe)),Be&&(ot+=at)}let Pt=Oe.length-3;const qt=Oe[Pt],nr=Oe[Pt+1],pr=Ie===0?qt:nr;pr>=oe&&pr<=xe&&tt(Ke,qt,nr,Oe[Pt+2]),Pt=Ke.length-3,Me&&Pt>=3&&(Ke[Pt]!==Ke[0]||Ke[Pt+1]!==Ke[1])&&tt(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&se.push(Ke)}function _e(Oe){const se=[];return se.size=Oe.size,se.start=Oe.start,se.end=Oe.end,se}function Xe(Oe,se,oe,xe,Ie,Me){for(const Be of Oe)D(Be,se,oe,xe,Ie,Me,!1)}function tt(Oe,se,oe,xe){Oe.push(se,oe,xe)}function ht(Oe,se,oe,xe,Ie,Me){const Be=(Me-se)/(xe-se);return tt(Oe,Me,oe+(Ie-oe)*Be,1),Be}function ue(Oe,se,oe,xe,Ie,Me){const Be=(Me-oe)/(Ie-oe);return tt(Oe,se+(xe-se)*Be,Me,1),Be}function M(Oe,se){const oe=[];for(let xe=0;xe<Oe.length;xe++){const Ie=Oe[xe],Me=Ie.type;let Be;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Be=U(Ie.geometry,se);else if(Me==="MultiLineString"||Me==="Polygon"){Be=[];for(const Ke of Ie.geometry)Be.push(U(Ke,se))}else if(Me==="MultiPolygon"){Be=[];for(const Ke of Ie.geometry){const Le=[];for(const at of Ke)Le.push(U(at,se));Be.push(Le)}}oe.push(xt(Ie.id,Me,Be,Ie.tags))}return oe}function U(Oe,se){const oe=[];oe.size=Oe.size,Oe.start!==void 0&&(oe.start=Oe.start,oe.end=Oe.end);for(let xe=0;xe<Oe.length;xe+=3)oe.push(Oe[xe]+se,Oe[xe+1],Oe[xe+2]);return oe}function Ee(Oe,se){if(Oe.transformed)return Oe;const oe=1<<Oe.z,xe=Oe.x,Ie=Oe.y;for(const Me of Oe.features){const Be=Me.geometry,Ke=Me.type;if(Me.geometry=[],Ke===1)for(let Le=0;Le<Be.length;Le+=2)Me.geometry.push(Ve(Be[Le],Be[Le+1],se,oe,xe,Ie));else for(let Le=0;Le<Be.length;Le++){const at=[];for(let ft=0;ft<Be[Le].length;ft+=2)at.push(Ve(Be[Le][ft],Be[Le][ft+1],se,oe,xe,Ie));Me.geometry.push(at)}}return Oe.transformed=!0,Oe}function Ve(Oe,se,oe,xe,Ie,Me){return[Math.round(oe*(Oe*xe-Ie)),Math.round(oe*(se*xe-Me))]}function nt(Oe,se,oe,xe,Ie){const Me=se===Ie.maxZoom?0:Ie.tolerance/((1<<se)*Ie.extent),Be={features:[],numPoints:0,numSimplified:0,numFeatures:Oe.length,source:null,x:oe,y:xe,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ke of Oe)Ge(Be,Ke,Me,Ie);return Be}function Ge(Oe,se,oe,xe){const Ie=se.geometry,Me=se.type,Be=[];if(Oe.minX=Math.min(Oe.minX,se.minX),Oe.minY=Math.min(Oe.minY,se.minY),Oe.maxX=Math.max(Oe.maxX,se.maxX),Oe.maxY=Math.max(Oe.maxY,se.maxY),Me==="Point"||Me==="MultiPoint")for(let Ke=0;Ke<Ie.length;Ke+=3)Be.push(Ie[Ke],Ie[Ke+1]),Oe.numPoints++,Oe.numSimplified++;else if(Me==="LineString")Et(Be,Ie,Oe,oe,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(let Ke=0;Ke<Ie.length;Ke++)Et(Be,Ie[Ke],Oe,oe,Me==="Polygon",Ke===0);else if(Me==="MultiPolygon")for(let Ke=0;Ke<Ie.length;Ke++){const Le=Ie[Ke];for(let at=0;at<Le.length;at++)Et(Be,Le[at],Oe,oe,!0,at===0)}if(Be.length){let Ke=se.tags||null;if(Me==="LineString"&&xe.lineMetrics){Ke={};for(const at in se.tags)Ke[at]=se.tags[at];Ke.mapbox_clip_start=Ie.start/Ie.size,Ke.mapbox_clip_end=Ie.end/Ie.size}const Le={geometry:Be,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:Ke};se.id!==null&&(Le.id=se.id),Oe.features.push(Le)}}function Et(Oe,se,oe,xe,Ie,Me){const Be=xe*xe;if(xe>0&&se.size<(Ie?Be:xe))return void(oe.numPoints+=se.length/3);const Ke=[];for(let Le=0;Le<se.length;Le+=3)(xe===0||se[Le+2]>Be)&&(oe.numSimplified++,Ke.push(se[Le],se[Le+1])),oe.numPoints++;Ie&&function(Le,at){let ft=0;for(let ot=0,Pt=Le.length,qt=Pt-2;ot<Pt;qt=ot,ot+=2)ft+=(Le[ot]-Le[qt])*(Le[ot+1]+Le[qt+1]);if(ft>0===at)for(let ot=0,Pt=Le.length;ot<Pt/2;ot+=2){const qt=Le[ot],nr=Le[ot+1];Le[ot]=Le[Pt-2-ot],Le[ot+1]=Le[Pt-1-ot],Le[Pt-2-ot]=qt,Le[Pt-1-ot]=nr}}(Ke,Me),Oe.push(Ke)}const It={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class yr{constructor(se,oe){const xe=(oe=this.options=function(Me,Be){for(const Ke in Be)Me[Ke]=Be[Ke];return Me}(Object.create(It),oe)).debug;if(xe&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ie=function(Me,Be){const Ke=[];if(Me.type==="FeatureCollection")for(let Le=0;Le<Me.features.length;Le++)Ht(Ke,Me.features[Le],Be,Le);else Ht(Ke,Me.type==="Feature"?Me:{geometry:Me},Be);return Ke}(se,oe);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ie=function(Me,Be){const Ke=Be.buffer/Be.extent;let Le=Me;const at=Se(Me,1,-1-Ke,Ke,0,-1,2,Be),ft=Se(Me,1,1-Ke,2+Ke,0,-1,2,Be);return(at||ft)&&(Le=Se(Me,1,-Ke,1+Ke,0,-1,2,Be)||[],at&&(Le=M(at,1).concat(Le)),ft&&(Le=Le.concat(M(ft,-1)))),Le}(Ie,oe),Ie.length&&this.splitTile(Ie,0,0,0),xe&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,oe,xe,Ie,Me,Be,Ke){const Le=[se,oe,xe,Ie],at=this.options,ft=at.debug;for(;Le.length;){Ie=Le.pop(),xe=Le.pop(),oe=Le.pop(),se=Le.pop();const ot=1<<oe,Pt=Sr(oe,xe,Ie);let qt=this.tiles[Pt];if(!qt&&(ft>1&&console.time("creation"),qt=this.tiles[Pt]=nt(se,oe,xe,Ie,at),this.tileCoords.push({z:oe,x:xe,y:Ie}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,xe,Ie,qt.numFeatures,qt.numPoints,qt.numSimplified),console.timeEnd("creation"));const An=`z${oe}`;this.stats[An]=(this.stats[An]||0)+1,this.total++}if(qt.source=se,Me==null){if(oe===at.indexMaxZoom||qt.numPoints<=at.indexMaxPoints)continue}else{if(oe===at.maxZoom||oe===Me)continue;if(Me!=null){const An=Me-oe;if(xe!==Be>>An||Ie!==Ke>>An)continue}}if(qt.source=null,se.length===0)continue;ft>1&&console.time("clipping");const nr=.5*at.buffer/at.extent,pr=.5-nr,Er=.5+nr,hr=1+nr;let Vr=null,Yr=null,on=null,wr=null,$r=Se(se,ot,xe-nr,xe+Er,0,qt.minX,qt.maxX,at),Qr=Se(se,ot,xe+pr,xe+hr,0,qt.minX,qt.maxX,at);se=null,$r&&(Vr=Se($r,ot,Ie-nr,Ie+Er,1,qt.minY,qt.maxY,at),Yr=Se($r,ot,Ie+pr,Ie+hr,1,qt.minY,qt.maxY,at),$r=null),Qr&&(on=Se(Qr,ot,Ie-nr,Ie+Er,1,qt.minY,qt.maxY,at),wr=Se(Qr,ot,Ie+pr,Ie+hr,1,qt.minY,qt.maxY,at),Qr=null),ft>1&&console.timeEnd("clipping"),Le.push(Vr||[],oe+1,2*xe,2*Ie),Le.push(Yr||[],oe+1,2*xe,2*Ie+1),Le.push(on||[],oe+1,2*xe+1,2*Ie),Le.push(wr||[],oe+1,2*xe+1,2*Ie+1)}}getTile(se,oe,xe){se=+se,oe=+oe,xe=+xe;const Ie=this.options,{extent:Me,debug:Be}=Ie;if(se<0||se>24)return null;const Ke=1<<se,Le=Sr(se,oe=oe+Ke&Ke-1,xe);if(this.tiles[Le])return Ee(this.tiles[Le],Me);Be>1&&console.log("drilling down to z%d-%d-%d",se,oe,xe);let at,ft=se,ot=oe,Pt=xe;for(;!at&&ft>0;)ft--,ot>>=1,Pt>>=1,at=this.tiles[Sr(ft,ot,Pt)];return at&&at.source?(Be>1&&(console.log("found parent tile z%d-%d-%d",ft,ot,Pt),console.time("drilling down")),this.splitTile(at.source,ft,ot,Pt,se,oe,xe),Be>1&&console.timeEnd("drilling down"),this.tiles[Le]?Ee(this.tiles[Le],Me):null):null}}function Sr(Oe,se,oe){return 32*((1<<Oe)*oe+se)+Oe}function Rt(Oe,se){return se?Oe.properties[se]:Oe.id}function jn(Oe,se){if(Oe==null)return!0;if(Oe.type==="Feature")return Rt(Oe,se)!=null;if(Oe.type==="FeatureCollection"){const oe=new Set;for(const xe of Oe.features){const Ie=Rt(xe,se);if(Ie==null||oe.has(Ie))return!1;oe.add(Ie)}return!0}return!1}function oi(Oe,se){const oe=new Map;if(Oe!=null)if(Oe.type==="Feature")oe.set(Rt(Oe,se),Oe);else for(const xe of Oe.features)oe.set(Rt(xe,se),xe);return oe}class ji extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,oe){return d._(this,void 0,void 0,function*(){const xe=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!Ie)return null;const Me=new class{constructor(Ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.X,this.length=Ke.length,this._features=Ke}feature(Ke){return new class{constructor(Le){this._feature=Le,this.extent=d.X,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const at of this._feature.geometry)Le.push([new d.P(at[0],at[1])]);return Le}{const Le=[];for(const at of this._feature.geometry){const ft=[];for(const ot of at)ft.push(new d.P(ot[0],ot[1]));Le.push(ft)}return Le}}toGeoJSON(Le,at,ft){return le.call(this,Le,at,ft)}}(this._features[Ke])}}(Ie.features);let Be=Y(Me);return Be.byteOffset===0&&Be.byteLength===Be.buffer.byteLength||(Be=new Uint8Array(Be)),{vectorTile:Me,rawData:Be.buffer}})}loadData(se){return d._(this,void 0,void 0,function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();const xe=!!(se&&se.request&&se.request.collectResourceTiming)&&new d.bu(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new Fe(function({superclusterOptions:Be,clusterProperties:Ke}){if(!Ke||!Be)return Be;const Le={},at={},ft={accumulated:null,zoom:0},ot={properties:null},Pt=Object.keys(Ke);for(const qt of Pt){const[nr,pr]=Ke[qt],Er=d.bB(pr),hr=d.bB(typeof nr=="string"?[nr,["accumulated"],["get",qt]]:nr);Le[qt]=Er.value,at[qt]=hr.value}return Be.map=qt=>{ot.properties=qt;const nr={};for(const pr of Pt)nr[pr]=Le[pr].evaluate(ft,ot);return nr},Be.reduce=(qt,nr)=>{ot.properties=nr;for(const pr of Pt)ft.accumulated=qt[pr],qt[pr]=at[pr].evaluate(ft,ot)},Be}(se)).load((yield this._pendingData).features):(Ie=yield this._pendingData,new yr(Ie,se.geojsonVtOptions)),this.loaded={};const Me={};if(xe){const Be=xe.finish();Be&&(Me.resourceTiming={},Me.resourceTiming[se.source]=JSON.parse(JSON.stringify(Be)))}return Me}catch(Me){if(delete this._pendingRequest,d.bA(Me))return{abandoned:!0};throw Me}var Ie})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const oe=this.loaded;return oe&&oe[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,oe){return d._(this,void 0,void 0,function*(){let xe=yield this.loadGeoJSON(se,oe);if(delete this._pendingRequest,typeof xe!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(j(xe,!0),se.filter){const Ie=d.bB(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(Be=>`${Be.key}: ${Be.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(Be=>Ie.value.evaluate({zoom:0},Be))}}return xe})}loadGeoJSON(se,oe){return d._(this,void 0,void 0,function*(){const{promoteId:xe}=se;if(se.request){const Ie=yield d.h(se.request,oe);return this._dataUpdateable=jn(Ie.data,xe)?oi(Ie.data,xe):void 0,Ie.data}if(typeof se.data=="string")try{const Ie=JSON.parse(se.data);return this._dataUpdateable=jn(Ie,xe)?oi(Ie,xe):void 0,Ie}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ie,Me,Be){var Ke,Le,at,ft;if(Me.removeAll&&Ie.clear(),Me.remove)for(const ot of Me.remove)Ie.delete(ot);if(Me.add)for(const ot of Me.add){const Pt=Rt(ot,Be);Pt!=null&&Ie.set(Pt,ot)}if(Me.update)for(const ot of Me.update){let Pt=Ie.get(ot.id);if(Pt==null)continue;const qt=!ot.removeAllProperties&&(((Ke=ot.removeProperties)===null||Ke===void 0?void 0:Ke.length)>0||((Le=ot.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((ot.newGeometry||ot.removeAllProperties||qt)&&(Pt=Object.assign({},Pt),Ie.set(ot.id,Pt),qt&&(Pt.properties=Object.assign({},Pt.properties))),ot.newGeometry&&(Pt.geometry=ot.newGeometry),ot.removeAllProperties)Pt.properties={};else if(((at=ot.removeProperties)===null||at===void 0?void 0:at.length)>0)for(const nr of ot.removeProperties)Object.prototype.hasOwnProperty.call(Pt.properties,nr)&&delete Pt.properties[nr];if(((ft=ot.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:nr,value:pr}of ot.addOrUpdateProperties)Pt.properties[nr]=pr}}(this._dataUpdateable,se.dataDiff,xe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class Wn{constructor(se){this.self=se,this.actor=new d.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(oe,xe)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=xe},this.self.addProtocol=d.bh,this.self.removeProtocol=d.bi,this.self.registerRTLTextPlugin=oe=>{if(d.bC.isParsed())throw new Error("RTL text plugin already registered.");d.bC.setMethods(oe)},this.actor.registerMessageHandler("LDT",(oe,xe)=>this._getDEMWorkerSource(oe,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RDT",(oe,xe)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(oe,xe.source).removeTile(xe)})),this.actor.registerMessageHandler("GCEZ",(oe,xe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,xe.type,xe.source).getClusterExpansionZoom(xe)})),this.actor.registerMessageHandler("GCC",(oe,xe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,xe.type,xe.source).getClusterChildren(xe)})),this.actor.registerMessageHandler("GCL",(oe,xe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,xe.type,xe.source).getClusterLeaves(xe)})),this.actor.registerMessageHandler("LD",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).loadData(xe)),this.actor.registerMessageHandler("GD",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).getData()),this.actor.registerMessageHandler("LT",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RT",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).reloadTile(xe)),this.actor.registerMessageHandler("AT",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).abortTile(xe)),this.actor.registerMessageHandler("RMT",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).removeTile(xe)),this.actor.registerMessageHandler("RS",(oe,xe)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[oe]||!this.workerSources[oe][xe.type]||!this.workerSources[oe][xe.type][xe.source])return;const Ie=this.workerSources[oe][xe.type][xe.source];delete this.workerSources[oe][xe.type][xe.source],Ie.removeSource!==void 0&&Ie.removeSource(xe)})),this.actor.registerMessageHandler("RM",oe=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe]})),this.actor.registerMessageHandler("SR",(oe,xe)=>d._(this,void 0,void 0,function*(){this.referrer=xe})),this.actor.registerMessageHandler("SRPS",(oe,xe)=>this._syncRTLPluginState(oe,xe)),this.actor.registerMessageHandler("IS",(oe,xe)=>d._(this,void 0,void 0,function*(){this.self.importScripts(xe)})),this.actor.registerMessageHandler("SI",(oe,xe)=>this._setImages(oe,xe)),this.actor.registerMessageHandler("UL",(oe,xe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(oe).update(xe.layers,xe.removedIds)})),this.actor.registerMessageHandler("SL",(oe,xe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(oe).replace(xe)}))}_setImages(se,oe){return d._(this,void 0,void 0,function*(){this.availableImages[se]=oe;for(const xe in this.workerSources[se]){const Ie=this.workerSources[se][xe];for(const Me in Ie)Ie[Me].availableImages=oe}})}_syncRTLPluginState(se,oe){return d._(this,void 0,void 0,function*(){if(d.bC.isParsed())return d.bC.getState();if(oe.pluginStatus!=="loading")return d.bC.setState(oe),oe;const xe=oe.pluginURL;if(this.self.importScripts(xe),d.bC.isParsed()){const Ie={pluginStatus:"loaded",pluginURL:xe};return d.bC.setState(Ie),Ie}throw d.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${xe}`)})}_getAvailableImages(se){let oe=this.availableImages[se];return oe||(oe=[]),oe}_getLayerIndex(se){let oe=this.layerIndexes[se];return oe||(oe=this.layerIndexes[se]=new l),oe}_getWorkerSource(se,oe,xe){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][oe]||(this.workerSources[se][oe]={}),!this.workerSources[se][oe][xe]){const Ie={sendAsync:(Me,Be)=>(Me.targetMapId=se,this.actor.sendAsync(Me,Be))};switch(oe){case"vector":this.workerSources[se][oe][xe]=new b(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][oe][xe]=new ji(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][oe][xe]=new this.externalWorkerSourceTypes[oe](Ie,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][oe][xe]}_getDEMWorkerSource(se,oe){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][oe]||(this.demWorkerSources[se][oe]=new T),this.demWorkerSources[se][oe]}}return d.i(self)&&(self.worker=new Wn(self)),Wn}),u("index",["exports","./shared"],function(d,l){var w="4.5.0";let E,I;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((n,c)=>{const p=requestAnimationFrame(n);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),c(l.c())})}),getImageData(v,n=0){return this.getImageCanvasContext(v).getImageData(-n,-n,v.width+2*n,v.height+2*n)},getImageCanvasContext(v){const n=window.document.createElement("canvas"),c=n.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return n.width=v.width,n.height=v.height,c.drawImage(v,0,0,v.width,v.height),c},resolveURL:v=>(E||(E=document.createElement("a")),E.href=v,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class T{static testProp(n){if(!T.docStyle)return n[0];for(let c=0;c<n.length;c++)if(n[c]in T.docStyle)return n[c];return n[0]}static create(n,c,p){const g=window.document.createElement(n);return c!==void 0&&(g.className=c),p&&p.appendChild(g),g}static createNS(n,c){return window.document.createElementNS(n,c)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(n,c){n.style[T.transformProp]=c}static addEventListener(n,c,p,g={}){n.addEventListener(c,p,"passive"in g?g:g.capture)}static removeEventListener(n,c,p,g={}){n.removeEventListener(c,p,"passive"in g?g:g.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(n){const c=n.getBoundingClientRect();return{x:c.width/n.offsetWidth||1,y:c.height/n.offsetHeight||1,boundingClientRect:c}}static getPoint(n,c,p){const g=c.boundingClientRect;return new l.P((p.clientX-g.left)/c.x-n.clientLeft,(p.clientY-g.top)/c.y-n.clientTop)}static mousePos(n,c){const p=T.getScale(n);return T.getPoint(n,p,c)}static touchPos(n,c){const p=[],g=T.getScale(n);for(let _=0;_<c.length;_++)p.push(T.getPoint(n,g,c[_]));return p}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!le&&j&&(K?Z(v):L=v)}};let L,j,le=!1,K=!1;function Z(v){const n=v.createTexture();v.bindTexture(v.TEXTURE_2D,n);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,j),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(n),le=!0}var W;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{L&&Z(L),L=null,K=!0},j.onerror=()=>{le=!0,L=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let n,c,p,g;v.resetRequestQueue=()=>{n=[],c=0,p=0,g={}},v.addThrottleControl=O=>{const $=p++;return g[$]=O,$},v.removeThrottleControl=O=>{delete g[O],A()},v.getImage=(O,$,te=!0)=>new Promise((Q,pe)=>{R.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),l.e(O,{type:"image"}),n.push({abortController:$,requestParameters:O,supportImageRefresh:te,state:"queued",onError:we=>{pe(we)},onSuccess:we=>{Q(we)}}),A()});const _=O=>l._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:$,supportImageRefresh:te,onError:Q,onSuccess:pe,abortController:we}=O,Ae=te===!1&&!l.i(self)&&!l.g($.url)&&(!$.headers||Object.keys($.headers).reduce((De,qe)=>De&&qe==="accept",!0));c++;const ze=Ae?k($,we):l.m($,we);try{const De=yield ze;delete O.abortController,O.state="completed",De.data instanceof HTMLImageElement||l.b(De.data)?pe(De):De.data&&pe({data:yield(ke=De.data,typeof createImageBitmap=="function"?l.d(ke):l.f(ke)),cacheControl:De.cacheControl,expires:De.expires})}catch(De){delete O.abortController,Q(De)}finally{c--,A()}var ke}),A=()=>{const O=(()=>{for(const $ of Object.keys(g))if(g[$]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=c;$<O&&n.length>0;$++){const te=n.shift();te.abortController.signal.aborted?$--:_(te)}},k=(O,$)=>new Promise((te,Q)=>{const pe=new Image,we=O.url,Ae=O.credentials;Ae&&Ae==="include"?pe.crossOrigin="use-credentials":(Ae&&Ae==="same-origin"||!l.s(we))&&(pe.crossOrigin="anonymous"),$.signal.addEventListener("abort",()=>{pe.src="",Q(l.c())}),pe.fetchPriority="high",pe.onload=()=>{pe.onerror=pe.onload=null,te({data:pe})},pe.onerror=()=>{pe.onerror=pe.onload=null,$.signal.aborted||Q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},pe.src=we})}(W||(W={})),W.resetRequestQueue();class ae{constructor(n){this._transformRequestFn=n}transformRequest(n,c){return this._transformRequestFn&&this._transformRequestFn(n,c)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function q(v){var n=new l.A(3);return n[0]=v[0],n[1]=v[1],n[2]=v[2],n}var V,P=function(v,n,c){return v[0]=n[0]-c[0],v[1]=n[1]-c[1],v[2]=n[2]-c[2],v};V=new l.A(3),l.A!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0);var z=function(v){var n=v[0],c=v[1];return n*n+c*c};function B(v){const n=[];if(typeof v=="string")n.push({id:"default",url:v});else if(v&&v.length>0){const c=[];for(const{id:p,url:g}of v){const _=`${p}${g}`;c.indexOf(_)===-1&&(c.push(_),n.push({id:p,url:g}))}}return n}function ee(v,n,c){const p=v.split("?");return p[0]+=`${n}${c}`,p.join("?")}(function(){var v=new l.A(2);l.A!=Float32Array&&(v[0]=0,v[1]=0)})();class X{constructor(n,c,p,g){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(c,g)}update(n,c,p){const{width:g,height:_}=n,A=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:k}=this,{gl:O}=k;if(this.useMipmap=!!(c&&c.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!c||c.premultiply!==!1)),A)this.size=[g,_],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||l.b(n)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,n):O.texImage2D(O.TEXTURE_2D,0,this.format,g,_,0,this.format,O.UNSIGNED_BYTE,n.data);else{const{x:$,y:te}=p||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||l.b(n)?O.texSubImage2D(O.TEXTURE_2D,0,$,te,O.RGBA,O.UNSIGNED_BYTE,n):O.texSubImage2D(O.TEXTURE_2D,0,$,te,g,_,O.RGBA,O.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(n,c,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),n!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,n),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||n),this.filter=n),c!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,c),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ye(v){const{userImage:n}=v;return!!(n&&n.render&&n.render())&&(v.data.replace(new Uint8Array(n.data.buffer)),!0)}class ge extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(n){const c=this.images[n];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(n,c){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,c)&&(this.images[n]=c)}_validate(n,c){let p=!0;const g=c.data||c.spriteData;return this._validateStretch(c.stretchX,g&&g.width)||(this.fire(new l.j(new Error(`Image "${n}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,g&&g.height)||(this.fire(new l.j(new Error(`Image "${n}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new l.j(new Error(`Image "${n}" has invalid "content" value`))),p=!1),p}_validateStretch(n,c){if(!n)return!0;let p=0;for(const g of n){if(g[0]<p||g[1]<g[0]||c<g[1])return!1;p=g[1]}return!0}_validateContent(n,c){if(!n)return!0;if(n.length!==4)return!1;const p=c.spriteData,g=p&&p.width||c.data.width,_=p&&p.height||c.data.height;return!(n[0]<0||g<n[0]||n[1]<0||_<n[1]||n[2]<0||g<n[2]||n[3]<0||_<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,c,p=!0){const g=this.getImage(n);if(p&&(g.data.width!==c.data.width||g.data.height!==c.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=g.version+1,this.images[n]=c,this.updatedImages[n]=!0}removeImage(n){const c=this.images[n];delete this.images[n],delete this.patterns[n],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((c,p)=>{let g=!0;if(!this.isLoaded())for(const _ of n)this.images[_]||(g=!1);this.isLoaded()||g?c(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:c})})}_getImagesForIds(n){const c={};for(const p of n){let g=this.getImage(p);g||(this.fire(new l.k("styleimagemissing",{id:p})),g=this.getImage(p)),g?c[p]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:l.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:n,height:c}=this.atlasImage;return{width:n,height:c}}getPattern(n){const c=this.patterns[n],p=this.getImage(n);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new l.I(g,p);this.patterns[n]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const c=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new X(n,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const _ in this.patterns)n.push(this.patterns[_].bin);const{w:c,h:p}=l.p(n),g=this.atlasImage;g.resize({width:c||1,height:p||1});for(const _ in this.patterns){const{bin:A}=this.patterns[_],k=A.x+1,O=A.y+1,$=this.getImage(_).data,te=$.width,Q=$.height;l.R.copy($,g,{x:0,y:0},{x:k,y:O},{width:te,height:Q}),l.R.copy($,g,{x:0,y:Q-1},{x:k,y:O-1},{width:te,height:1}),l.R.copy($,g,{x:0,y:0},{x:k,y:O+Q},{width:te,height:1}),l.R.copy($,g,{x:te-1,y:0},{x:k-1,y:O},{width:1,height:Q}),l.R.copy($,g,{x:0,y:0},{x:k+te,y:O},{width:1,height:Q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const c of n){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||l.w(`Image with ID: "${c}" was not found`),ye(p)&&this.updateImage(c,p)}}}const fe=1e20;function ie(v,n,c,p,g,_,A,k,O){for(let $=n;$<n+p;$++)he(v,c*_+$,_,g,A,k,O);for(let $=c;$<c+g;$++)he(v,$*_+n,1,p,A,k,O)}function he(v,n,c,p,g,_,A){_[0]=0,A[0]=-fe,A[1]=fe,g[0]=v[n];for(let k=1,O=0,$=0;k<p;k++){g[k]=v[n+k*c];const te=k*k;do{const Q=_[O];$=(g[k]-g[Q]+te-Q*Q)/(k-Q)/2}while($<=A[O]&&--O>-1);O++,_[O]=k,A[O]=$,A[O+1]=fe}for(let k=0,O=0;k<p;k++){for(;A[O+1]<k;)O++;const $=_[O],te=k-$;v[n+k*c]=g[$]+te*te}}class Y{constructor(n,c){this.requestManager=n,this.localIdeographFontFamily=c,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return l._(this,void 0,void 0,function*(){const c=[];for(const _ in n)for(const A of n[_])c.push(this._getAndCacheGlyphsPromise(_,A));const p=yield Promise.all(c),g={};for(const{stack:_,id:A,glyph:k}of p)g[_]||(g[_]={}),g[_][A]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return g})}_getAndCacheGlyphsPromise(n,c){return l._(this,void 0,void 0,function*(){let p=this.entries[n];p||(p=this.entries[n]={glyphs:{},requests:{},ranges:{}});let g=p.glyphs[c];if(g!==void 0)return{stack:n,id:c,glyph:g};if(g=this._tinySDF(p,n,c),g)return p.glyphs[c]=g,{stack:n,id:c,glyph:g};const _=Math.floor(c/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[_])return{stack:n,id:c,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[_]){const k=Y.loadGlyphRange(n,_,this.url,this.requestManager);p.requests[_]=k}const A=yield p.requests[_];for(const k in A)this._doesCharSupportLocalGlyph(+k)||(p.glyphs[+k]=A[+k]);return p.ranges[_]=!0,{stack:n,id:c,glyph:A[c]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](n)||l.u["Hangul Syllables"](n)||l.u.Hiragana(n)||l.u.Katakana(n))}_tinySDF(n,c,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=n.tinySDF;if(!_){let k="400";/bold/i.test(c)?k="900":/medium/i.test(c)?k="500":/light/i.test(c)&&(k="200"),_=n.tinySDF=new Y.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:k})}const A=_.draw(String.fromCharCode(p));return{id:p,bitmap:new l.o({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}Y.loadGlyphRange=function(v,n,c,p){return l._(this,void 0,void 0,function*(){const g=256*n,_=g+255,A=p.transformRequest(c.replace("{fontstack}",v).replace("{range}",`${g}-${_}`),"Glyphs"),k=yield l.l(A,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${n}, ${g}-${_}`);const O={};for(const $ of l.n(k.data))O[$.id]=$;return O})},Y.TinySDF=class{constructor({fontSize:v=24,buffer:n=3,radius:c=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:A="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=c;const k=this.size=v+4*n,O=this._createCanvas(k),$=this.ctx=O.getContext("2d",{willReadFrequently:!0});$.font=`${A} ${_} ${v}px ${g}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(v){const n=document.createElement("canvas");return n.width=n.height=v,n}draw(v){const{width:n,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(v),A=Math.ceil(c),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),O=Math.min(this.size-this.buffer,A+Math.ceil(p)),$=k+2*this.buffer,te=O+2*this.buffer,Q=Math.max($*te,0),pe=new Uint8ClampedArray(Q),we={data:pe,width:$,height:te,glyphWidth:k,glyphHeight:O,glyphTop:A,glyphLeft:0,glyphAdvance:n};if(k===0||O===0)return we;const{ctx:Ae,buffer:ze,gridInner:ke,gridOuter:De}=this;Ae.clearRect(ze,ze,k,O),Ae.fillText(v,ze,ze+A);const qe=Ae.getImageData(ze,ze,k,O);De.fill(fe,0,Q),ke.fill(0,0,Q);for(let je=0;je<O;je++)for(let Je=0;Je<k;Je++){const rt=qe.data[4*(je*k+Je)+3]/255;if(rt===0)continue;const st=(je+ze)*$+Je+ze;if(rt===1)De[st]=0,ke[st]=fe;else{const mt=.5-rt;De[st]=mt>0?mt*mt:0,ke[st]=mt<0?mt*mt:0}}ie(De,0,0,$,te,$,this.f,this.v,this.z),ie(ke,ze,ze,k,O,$,this.f,this.v,this.z);for(let je=0;je<Q;je++){const Je=Math.sqrt(De[je])-Math.sqrt(ke[je]);pe[je]=Math.round(255-255*(Je/this.radius+this.cutoff))}return we}};class re{constructor(){this.specification=l.v.light.position}possiblyEvaluate(n,c){return l.y(n.expression.evaluate(c))}interpolate(n,c,p){return{x:l.z.number(n.x,c.x,p),y:l.z.number(n.y,c.y,p),z:l.z.number(n.z,c.z,p)}}}let de;class be extends l.E{constructor(n){super(),de=de||new l.q({anchor:new l.D(l.v.light.anchor),position:new re,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(de),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,c={}){if(!this._validate(l.r,n,c))for(const p in n){const g=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,c,p){return(!p||p.validate!==!1)&&l.t(this,n.call(l.x,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Pe=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class $e extends l.E{constructor(n){super(),this._transitionable=new l.T(Pe),this.setSky(n),this._transitioning=this._transitionable.untransitioned()}setSky(n,c={}){if(!this._validate(l.B,n,c))for(const p in n){const g=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,c,p={}){return(p==null?void 0:p.validate)!==!1&&l.t(this,n.call(l.x,l.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Ce{constructor(n,c){this.width=n,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,c){const p=n.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(n,c)),this.dashEntry[p]}getDashRanges(n,c,p){const g=[];let _=n.length%2==1?-n[n.length-1]*p:0,A=n[0]*p,k=!0;g.push({left:_,right:A,isDash:k,zeroLength:n[0]===0});let O=n[0];for(let $=1;$<n.length;$++){k=!k;const te=n[$];_=O*p,O+=te,A=O*p,g.push({left:_,right:A,isDash:k,zeroLength:te===0})}return g}addRoundDash(n,c,p){const g=c/2;for(let _=-p;_<=p;_++){const A=this.width*(this.nextRow+p+_);let k=0,O=n[k];for(let $=0;$<this.width;$++){$/O.right>1&&(O=n[++k]);const te=Math.abs($-O.left),Q=Math.abs($-O.right),pe=Math.min(te,Q);let we;const Ae=_/p*(g+1);if(O.isDash){const ze=g-Math.abs(Ae);we=Math.sqrt(pe*pe+ze*ze)}else we=g-Math.sqrt(pe*pe+Ae*Ae);this.data[A+$]=Math.max(0,Math.min(255,we+128))}}}addRegularDash(n){for(let k=n.length-1;k>=0;--k){const O=n[k],$=n[k+1];O.zeroLength?n.splice(k,1):$&&$.isDash===O.isDash&&($.left=O.left,n.splice(k,1))}const c=n[0],p=n[n.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const g=this.width*this.nextRow;let _=0,A=n[_];for(let k=0;k<this.width;k++){k/A.right>1&&(A=n[++_]);const O=Math.abs(k-A.left),$=Math.abs(k-A.right),te=Math.min(O,$);this.data[g+k]=Math.max(0,Math.min(255,(A.isDash?te:-te)+128))}}addDash(n,c){const p=c?7:0,g=2*p+1;if(this.nextRow+g>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let k=0;k<n.length;k++)_+=n[k];if(_!==0){const k=this.width/_,O=this.getDashRanges(n,this.width,k);c?this.addRoundDash(O,k,p):this.addRegularDash(O)}const A={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,A}bind(n){const c=n.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const We=Math.floor(b.hardwareConcurrency/2);let it,ct;function vt(){return it||(it=new He),it}He.workerCount=l.C(globalThis)?Math.max(Math.min(We,3),1):1;class kt{constructor(n,c){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let g=0;g<p.length;g++){const _=new l.F(p[g],c);_.name=`Worker ${g}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,c){const p=[];for(const g of this.actors)p.push(g.sendAsync({type:n,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,c){for(const p of this.actors)p.registerMessageHandler(n,c)}}function pt(){return ct||(ct=new kt(vt(),l.G),ct.registerMessageHandler("GR",(v,n,c)=>l.m(n,c))),ct}function xt(v,n){const c=l.H();return l.J(c,c,[1,1,0]),l.K(c,c,[.5*v.width,.5*v.height,1]),l.L(c,c,v.calculatePosMatrix(n.toUnwrapped()))}function Wt(v,n,c,p,g,_){const A=function(Q,pe,we){if(Q)for(const Ae of Q){const ze=pe[Ae];if(ze&&ze.source===we&&ze.type==="fill-extrusion")return!0}else for(const Ae in pe){const ze=pe[Ae];if(ze.source===we&&ze.type==="fill-extrusion")return!0}return!1}(g&&g.layers,n,v.id),k=_.maxPitchScaleFactor(),O=v.tilesIn(p,k,A);O.sort(Ht);const $=[];for(const Q of O)$.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(n,c,v._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,g,_,k,xt(v.transform,Q.tileID))});const te=function(Q){const pe={},we={};for(const Ae of Q){const ze=Ae.queryResults,ke=Ae.wrappedTileID,De=we[ke]=we[ke]||{};for(const qe in ze){const je=ze[qe],Je=De[qe]=De[qe]||{},rt=pe[qe]=pe[qe]||[];for(const st of je)Je[st.featureIndex]||(Je[st.featureIndex]=!0,rt.push(st))}}return pe}($);for(const Q in te)te[Q].forEach(pe=>{const we=pe.feature,Ae=v.getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=Ae});return te}function Ht(v,n){const c=v.tileID,p=n.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function lr(v,n,c){return l._(this,void 0,void 0,function*(){let p=v;if(v.url?p=(yield l.h(n.transformRequest(v.url,"Source"),c)).data:yield b.frameAsync(c),!p)return null;const g=l.M(l.e(p,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(g.vectorLayerIds=p.vector_layers.map(_=>_.id)),g})}class et{constructor(n,c){n&&(c?this.setSouthWest(n).setNorthEast(c):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof l.N?new l.N(n.lng,n.lat):l.N.convert(n),this}setSouthWest(n){return this._sw=n instanceof l.N?new l.N(n.lng,n.lat):l.N.convert(n),this}extend(n){const c=this._sw,p=this._ne;let g,_;if(n instanceof l.N)g=n,_=n;else{if(!(n instanceof et))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(et.convert(n)):this.extend(l.N.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(l.N.convert(n)):this;if(g=n._sw,_=n._ne,!g||!_)return this}return c||p?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new l.N(g.lng,g.lat),this._ne=new l.N(_.lng,_.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:c,lat:p}=l.N.convert(n);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(n){return n instanceof et?n:n&&new et(n)}static fromLngLat(n,c=0){const p=360*c/40075017,g=p/Math.cos(Math.PI/180*n.lat);return new et(new l.N(n.lng-g,n.lat-p),new l.N(n.lng+g,n.lat+p))}}class _r{constructor(n,c,p){this.bounds=et.convert(this.validateBounds(n)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const c=Math.pow(2,n.z),p=Math.floor(l.O(this.bounds.getWest())*c),g=Math.floor(l.Q(this.bounds.getNorth())*c),_=Math.ceil(l.O(this.bounds.getEast())*c),A=Math.ceil(l.Q(this.bounds.getSouth())*c);return n.x>=p&&n.x<_&&n.y>=g&&n.y<A}}class ur extends l.E{constructor(n,c,p,g){if(super(),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(c,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield lr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(l.e(this,n),n.bounds&&(this.tileBounds=new _r(n.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new l.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(n){return l._(this,void 0,void 0,function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((_,A)=>{n.reloadPromise={resolve:_,reject:A}})}else n.actor=this.dispatcher.getActor(),g="LT";n.abortController=new AbortController;try{const _=yield n.actor.sendAsync({type:g,data:p},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,_)}catch(_){if(delete n.abortController,n.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,c){if(c&&c.resourceTiming&&(n.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&n.setExpiryData(c),n.loadVectorData(c,this.map.painter),n.reloadPromise){const p=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(p.resolve).catch(p.reject)}}abortTile(n){return l._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return l._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends l.E{constructor(n,c,p,g){super(),this.id=n,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},c),l.e(this,l.M(c,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield lr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(l.e(this,n),n.bounds&&(this.tileBounds=new _r(n.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new l.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return l.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return l._(this,void 0,void 0,function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const p=yield W.getImage(this.map._requestManager.transformRequest(c,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const g=this.map.painter.context,_=g.gl,A=p.data;n.texture=this.map.painter.getTileTexture(A.width),n.texture?n.texture.update(A,{useMipmap:!0}):(n.texture=new X(g,A,_.RGBA,{useMipmap:!0}),n.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),n.state="loaded"}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}})}abortTile(n){return l._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return l._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Se extends Vt{constructor(n,c,p,g){super(n,c,p,g),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(n){return l._(this,void 0,void 0,function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const g=yield W.getImage(p,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(g&&g.data){const _=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&n.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const A=l.b(_)&&l.U()?_:yield this.readImageNow(_),k={type:this.type,uid:n.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const O=yield n.actor.sendAsync({type:"LDT",data:k});n.dem=O,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(g){if(delete n.abortController,n.aborted)n.state="unloaded";else if(g)throw n.state="errored",g}})}readImageNow(n){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.V()){const c=n.width+2,p=n.height+2;try{return new l.R({width:c,height:p},yield l.W(n,-1,-1,c,p))}catch{}}return b.getImageData(n,1)})}_getNeighboringTiles(n){const c=n.canonical,p=Math.pow(2,c.z),g=(c.x-1+p)%p,_=c.x===0?n.wrap-1:n.wrap,A=(c.x+1+p)%p,k=c.x+1===p?n.wrap+1:n.wrap,O={};return O[new l.S(n.overscaledZ,_,c.z,g,c.y).key]={backfilled:!1},O[new l.S(n.overscaledZ,k,c.z,A,c.y).key]={backfilled:!1},c.y>0&&(O[new l.S(n.overscaledZ,_,c.z,g,c.y-1).key]={backfilled:!1},O[new l.S(n.overscaledZ,n.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},O[new l.S(n.overscaledZ,k,c.z,A,c.y-1).key]={backfilled:!1}),c.y+1<p&&(O[new l.S(n.overscaledZ,_,c.z,g,c.y+1).key]={backfilled:!1},O[new l.S(n.overscaledZ,n.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},O[new l.S(n.overscaledZ,k,c.z,A,c.y+1).key]={backfilled:!1}),O}unloadTile(n){return l._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class N extends l.E{constructor(n,c,p,g){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=c.data,this._options=l.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const _=l.X/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*_,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*_,extent:l.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:l.X,radius:(c.clusterRadius||50)*_,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return l._(this,void 0,void 0,function*(){const n=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:c,offset:p}})}_updateWorkerData(n){return l._(this,void 0,void 0,function*(){const c=l.e({type:this.type},this.workerOptions);n?c.dataDiff=n:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let g=null;p.resourceTiming&&p.resourceTiming[this.id]&&(g=p.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&l.e(_,{resourceTiming:g}),this.fire(new l.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(n){return l._(this,void 0,void 0,function*(){const c=n.actor?"RT":"LT";n.actor=this.actor;const p={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const g=yield this.actor.sendAsync({type:c,data:p},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(g,this.map.painter,c==="RT")})}abortTile(n){return l._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return l._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var D=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _e extends l.E{constructor(n,c,p,g){super(),this.id=n,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=c}load(n){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield W.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,n&&(this.coordinates=n),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new l.j(c))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const c=n.map(l.Z.fromLngLat);this.tileID=function(g){let _=1/0,A=1/0,k=-1/0,O=-1/0;for(const pe of g)_=Math.min(_,pe.x),A=Math.min(A,pe.y),k=Math.max(k,pe.x),O=Math.max(O,pe.y);const $=Math.max(k-_,O-A),te=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),Q=Math.pow(2,te);return new l.a1(te,Math.floor((_+k)/2*Q),Math.floor((A+O)/2*Q))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,l.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,l.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,c=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new X(n,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Xe extends _e{constructor(n,c,p,g){super(n,c,p,g),this.roundZoom=!0,this.type="video",this.options=c}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const c of n.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield l.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new l.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const c=this.video.seekable;n<c.start(0)||n>c.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,c=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new X(n,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tt extends _e{constructor(n,c,p,g){super(n,c,p,g),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(A=>typeof A!="number"))||this.fire(new l.j(new l.a2(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${n}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${n}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new X(c,this.canvas,p.RGBA,{premultiply:!0});let g=!1;for(const _ in this.tiles){const A=this.tiles[_];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,g=!0)}g&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const ht={},ue=v=>{switch(v){case"geojson":return N;case"image":return _e;case"raster":return Vt;case"raster-dem":return Se;case"vector":return ur;case"video":return Xe;case"canvas":return tt}return ht[v]},M="RTLPluginLoaded";class U extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=pt()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return l._(this,arguments,void 0,function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(M))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ee=null;function Ve(){return Ee||(Ee=new U),Ee}class nt{constructor(n,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=l.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const c=n+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(g,_){const A={};if(!_)return A;for(const k of g){const O=k.layerIds.map($=>_.getLayer($)).filter(Boolean);if(O.length!==0){k.layers=O,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map($=>O.filter(te=>te.id===$)[0]));for(const $ of O)A[$.id]=k}}return A}(n.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a6){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a6&&_.hasRTLText){this.hasRTLText=!0,Ve().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(g).queryRadius(_))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(n)}const c=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X(n,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X(n,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,c,p,g,_,A,k,O,$,te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:A,tileSize:this.tileSize,pixelPosMatrix:te,transform:O,params:k,queryPadding:this.queryPadding*$},n,c,p):{}}querySourceFeatures(n,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=c&&c.sourceLayer?c.sourceLayer:"",A=g._geojsonTileLayer||g[_];if(!A)return;const k=l.a7(c&&c.filter),{z:O,x:$,y:te}=this.tileID.canonical,Q={z:O,x:$,y:te};for(let pe=0;pe<A.length;pe++){const we=A.feature(pe);if(k.needGeometry){const ke=l.a8(we,!0);if(!k.filter(new l.a9(this.tileID.overscaledZ),ke,this.tileID.canonical))continue}else if(!k.filter(new l.a9(this.tileID.overscaledZ),we))continue;const Ae=p.getId(we,_),ze=new l.aa(we,O,$,te,Ae);ze.tile=Q,n.push(ze)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const c=this.expirationTime;if(n.cacheControl){const p=l.ab(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const _=this.expirationTime-c;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const _=this.buckets[g],A=_.layers[0].sourceLayer||"_geojsonTileLayer",k=p[A],O=n[A];if(!k||!O||Object.keys(O).length===0)continue;_.update(O,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=c&&c.style&&c.style.getLayer(g);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=b.now()+n}setDependencies(n,c){const p={};for(const g of c)p[g]=!0;this.dependencies[n]=p}hasDependency(n,c){for(const p of n){const g=this.dependencies[p];if(g){for(const _ of c)if(g[_])return!0}}return!1}}class Ge{constructor(n,c){this.max=n,this.onRemove=c,this.reset()}reset(){for(const n in this.data)for(const c of this.data[n])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(n,c,p){const g=n.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:c,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(n,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const c=this.data[n].shift();return c.timeout&&clearTimeout(c.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),c.value}getByKey(n){const c=this.data[n];return c?c[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,c){if(!this.has(n))return this;const p=n.wrapped().key,g=c===void 0?0:this.data[p].indexOf(c),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(n){const c=[];for(const p in this.data)for(const g of this.data[p])n(g.value)||c.push(g);for(const p of c)this.remove(p.value.tileID,p)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,c,p){const g=String(c);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][g]=this.stateChanges[n][g]||{},l.e(this.stateChanges[n][g],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const _ in this.state[n])_!==g&&(this.deletedStates[n][_]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][g]===null){this.deletedStates[n][g]={};for(const _ in this.state[n][g])p[_]||(this.deletedStates[n][g][_]=null)}else for(const _ in p)this.deletedStates[n]&&this.deletedStates[n][g]&&this.deletedStates[n][g][_]===null&&delete this.deletedStates[n][g][_]}removeFeatureState(n,c,p){if(this.deletedStates[n]===null)return;const g=String(c);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&c!==void 0)this.deletedStates[n][g]!==null&&(this.deletedStates[n][g]=this.deletedStates[n][g]||{},this.deletedStates[n][g][p]=null);else if(c!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][g])for(p in this.deletedStates[n][g]={},this.stateChanges[n][g])this.deletedStates[n][g][p]=null;else this.deletedStates[n][g]=null;else this.deletedStates[n]=null}getState(n,c){const p=String(c),g=l.e({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const _=this.deletedStates[n][c];if(_===null)return{};for(const A in _)delete g[A]}return g}initializeTileState(n,c){n.setFeatureState(this.state,c)}coalesceChanges(n,c){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const A in this.stateChanges[g])this.state[g][A]||(this.state[g][A]={}),l.e(this.state[g][A],this.stateChanges[g][A]),_[A]=this.state[g][A];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const A in this.state[g])_[A]={},this.state[g][A]={};else for(const A in this.deletedStates[g]){if(this.deletedStates[g][A]===null)this.state[g][A]={};else for(const k of Object.keys(this.deletedStates[g][A]))delete this.state[g][A][k];_[A]=this.state[g][A]}p[g]=p[g]||{},l.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in n)n[g].setFeatureState(p,c)}}class It extends l.E{constructor(n,c,p){super(),this.id=n,this.dispatcher=p,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,A,k)=>{const O=new(ue(_.type))(g,_,A,k);if(O.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${O.id}`);return O})(n,c,p,this),this._tiles={},this._cache=new Ge(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const c=this._tiles[n];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,c,p){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,c,p)}catch(g){n.state="errored",g.status!==404?this._source.fire(new l.j(g,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new l.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(yr).map(n=>n.key)}getRenderableIds(n){const c=[];for(const p in this._tiles)this._isIdRenderable(p,n)&&c.push(this._tiles[p]);return n?c.sort((p,g)=>{const _=p.tileID,A=g.tileID,k=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),O=new l.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-A.overscaledZ||O.y-k.y||O.x-k.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(yr).map(p=>p.key)}hasRenderableParent(n){const c=this.findLoadedParent(n,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(n,c){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(c||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,c){return l._(this,void 0,void 0,function*(){const p=this._tiles[n];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,n,c))})}_tileLoaded(n,c,p){n.timeAdded=b.now(),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(c,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const _=c[g];if(n.neighboringTiles&&n.neighboringTiles[_]){const A=this.getTileByID(_);p(n,A),p(A,n)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let A=_.tileID.canonical.x-g.tileID.canonical.x;const k=_.tileID.canonical.y-g.tileID.canonical.y,O=Math.pow(2,g.tileID.canonical.z),$=_.tileID.key;A===0&&k===0||Math.abs(k)>1||(Math.abs(A)>1&&(Math.abs(A+O)===1?A+=O:Math.abs(A-O)===1&&(A-=O)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,A,k),g.neighboringTiles&&g.neighboringTiles[$]&&(g.neighboringTiles[$].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,c,p,g){for(const _ in this._tiles){let A=this._tiles[_];if(g[_]||!A.hasData()||A.tileID.overscaledZ<=c||A.tileID.overscaledZ>p)continue;let k=A.tileID;for(;A&&A.tileID.overscaledZ>c+1;){const $=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[$.key],A&&A.hasData()&&(k=$)}let O=k;for(;O.overscaledZ>c;)if(O=O.scaledTo(O.overscaledZ-1),n[O.key]){g[k.key]=k;break}}}findLoadedParent(n,c){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=n.overscaledZ-1;p>=c;p--){const g=n.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const c=this._tiles[n.key];return c&&c.hasData()?c:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const c=Math.ceil(n.width/this._source.tileSize)+1,p=Math.ceil(n.height/this._source.tileSize)+1,g=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(n){const c=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,c){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+c),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(n,c,p,g,_,A){const k={},O={},$=Object.keys(n),te=b.now();for(const Q of $){const pe=n[Q],we=this._tiles[Q];if(!we||we.fadeEndTime!==0&&we.fadeEndTime<=te)continue;const Ae=this.findLoadedParent(pe,c),ze=this.findLoadedSibling(pe),ke=Ae||ze||null;ke&&(this._addTile(ke.tileID),k[ke.tileID.key]=ke.tileID),O[Q]=pe}this._retainLoadedChildren(O,g,p,n);for(const Q in k)n[Q]||(this._coveredTiles[Q]=!0,n[Q]=k[Q]);if(A){const Q={},pe={};for(const we of _)this._tiles[we.key].hasData()?Q[we.key]=we:pe[we.key]=we;for(const we in pe){const Ae=pe[we].children(this._source.maxzoom);this._tiles[Ae[0].key]&&this._tiles[Ae[1].key]&&this._tiles[Ae[2].key]&&this._tiles[Ae[3].key]&&(Q[Ae[0].key]=n[Ae[0].key]=Ae[0],Q[Ae[1].key]=n[Ae[1].key]=Ae[1],Q[Ae[2].key]=n[Ae[2].key]=Ae[2],Q[Ae[3].key]=n[Ae[3].key]=Ae[3],delete pe[we])}for(const we in pe){const Ae=pe[we],ze=this.findLoadedParent(Ae,this._source.minzoom),ke=this.findLoadedSibling(Ae),De=ze||ke||null;if(De){Q[De.tileID.key]=n[De.tileID.key]=De.tileID;for(const qe in Q)Q[qe].isChildOf(De.tileID)&&delete Q[qe]}}for(const we in this._tiles)Q[we]||(this._coveredTiles[we]=!0)}}update(n,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=n,this.terrain=c,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new l.S(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y)):(p=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(te=>this._source.hasTile(te)))):p=[];const g=n.coveringZoomLevel(this._source),_=Math.max(g-It.maxOverzooming,this._source.minzoom),A=Math.max(g+It.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const te={};for(const Q of p)if(Q.canonical.z>this._source.minzoom){const pe=Q.scaledTo(Q.canonical.z-1);te[pe.key]=pe;const we=Q.scaledTo(Math.max(this._source.minzoom,Math.min(Q.canonical.z,5)));te[we.key]=we}p=p.concat(Object.values(te))}const k=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(p,g);Sr(this._source.type)&&this._updateCoveredAndRetainedTiles(O,_,A,g,p,c);for(const te in O)this._tiles[te].clearFadeHold();const $=l.ac(this._tiles,O);for(const te of $){const Q=this._tiles[te];Q.hasSymbolBuckets&&!Q.holdingForFade()?Q.setHoldDuration(this.map._fadeDuration):Q.hasSymbolBuckets&&!Q.symbolFadeFinished()||this._removeTile(te)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,c){var p;const g={},_={},A=Math.max(c-It.maxOverzooming,this._source.minzoom),k=Math.max(c+It.maxUnderzooming,this._source.minzoom),O={};for(const $ of n){const te=this._addTile($);g[$.key]=$,te.hasData()||c<this._source.maxzoom&&(O[$.key]=$)}this._retainLoadedChildren(O,c,k,g);for(const $ of n){let te=this._tiles[$.key];if(te.hasData())continue;if(c+1>this._source.maxzoom){const pe=$.children(this._source.maxzoom)[0],we=this.getTile(pe);if(we&&we.hasData()){g[pe.key]=pe;continue}}else{const pe=$.children(this._source.maxzoom);if(g[pe[0].key]&&g[pe[1].key]&&g[pe[2].key]&&g[pe[3].key])continue}let Q=te.wasRequested();for(let pe=$.overscaledZ-1;pe>=A;--pe){const we=$.scaledTo(pe);if(_[we.key])break;if(_[we.key]=!0,te=this.getTile(we),!te&&Q&&(te=this._addTile(we)),te){const Ae=te.hasData();if((Ae||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||Q)&&(g[we.key]=we),Q=te.wasRequested(),Ae)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const c=[];let p,g=this._tiles[n].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}c.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of c)this._loadedParentTiles[_]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const c=this._tiles[n].tileID,p=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=p}}_addTile(n){let c=this._tiles[n.key];if(c)return c;c=this._cache.getAndRemove(n),c&&(this._setTileReloadTimer(n.key,c),c.tileID=n,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,c)));const p=c;return c||(c=new nt(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(c,n.key,c.state)),c.uses++,this._tiles[n.key]=c,p||this._source.fire(new l.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(n,c){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=c.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}_removeTile(n){const c=this._tiles[n];c&&(c.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(n){const c=n.sourceDataType;n.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,c,p){const g=[],_=this.transform;if(!_)return g;const A=p?_.getCameraQueryGeometry(n):n,k=n.map(Ae=>_.pointCoordinate(Ae,this.terrain)),O=A.map(Ae=>_.pointCoordinate(Ae,this.terrain)),$=this.getIds();let te=1/0,Q=1/0,pe=-1/0,we=-1/0;for(const Ae of O)te=Math.min(te,Ae.x),Q=Math.min(Q,Ae.y),pe=Math.max(pe,Ae.x),we=Math.max(we,Ae.y);for(let Ae=0;Ae<$.length;Ae++){const ze=this._tiles[$[Ae]];if(ze.holdingForFade())continue;const ke=ze.tileID,De=Math.pow(2,_.zoom-ze.tileID.overscaledZ),qe=c*ze.queryPadding*l.X/ze.tileSize/De,je=[ke.getTilePoint(new l.Z(te,Q)),ke.getTilePoint(new l.Z(pe,we))];if(je[0].x-qe<l.X&&je[0].y-qe<l.X&&je[1].x+qe>=0&&je[1].y+qe>=0){const Je=k.map(st=>ke.getTilePoint(st)),rt=O.map(st=>ke.getTilePoint(st));g.push({tile:ze,tileID:ke,queryGeometry:Je,cameraQueryGeometry:rt,scale:De})}}return g}getVisibleCoordinates(n){const c=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Sr(this._source.type)){const n=b.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=n)return!0}return!1}setFeatureState(n,c,p){this._state.updateState(n=n||"_geojsonTileLayer",c,p)}removeFeatureState(n,c,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",c,p)}getFeatureState(n,c){return this._state.getState(n=n||"_geojsonTileLayer",c)}setDependencies(n,c,p){const g=this._tiles[n];g&&g.setDependencies(c,p)}reloadTilesForDependencies(n,c){for(const p in this._tiles)this._tiles[p].hasDependency(n,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(n,c))}}function yr(v,n){const c=Math.abs(2*v.wrap)-+(v.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return v.overscaledZ-n.overscaledZ||p-c||n.canonical.y-v.canonical.y||n.canonical.x-v.canonical.x}function Sr(v){return v==="raster"||v==="image"||v==="video"}It.maxOverzooming=10,It.maxUnderzooming=3;class Rt{constructor(n,c){this.reset(n,c)}reset(n,c){this.points=n||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=l.ad(n,0,1);let c=1,p=this._distances[c];const g=n*this.paddedLength+this.padding;for(;p<g&&c<this._distances.length;)p=this._distances[++c];const _=c-1,A=this._distances[_],k=p-A,O=k>0?(g-A)/k:0;return this.points[_].mult(1-O).add(this.points[c].mult(O))}}function jn(v,n){let c=!0;return v==="always"||v!=="never"&&n!=="never"||(c=!1),c}class oi{constructor(n,c,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(n/p),this.yCellCount=Math.ceil(c/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=c,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,c,p,g,_){this._forEachCell(c,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(n,c,p,g){this._forEachCell(c-g,p-g,c+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(c),this.circles.push(p),this.circles.push(g)}_insertBoxCell(n,c,p,g,_,A){this.boxCells[_].push(A)}_insertCircleCell(n,c,p,g,_,A){this.circleCells[_].push(A)}_query(n,c,p,g,_,A,k){if(p<0||n>this.width||g<0||c>this.height)return[];const O=[];if(n<=0&&c<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:n,y1:c,x2:p,y2:g}];for(let $=0;$<this.boxKeys.length;$++)O.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const te=this.circles[3*$],Q=this.circles[3*$+1],pe=this.circles[3*$+2];O.push({key:this.circleKeys[$],x1:te-pe,y1:Q-pe,x2:te+pe,y2:Q+pe})}}else this._forEachCell(n,c,p,g,this._queryCell,O,{hitTest:_,overlapMode:A,seenUids:{box:{},circle:{}}},k);return O}query(n,c,p,g){return this._query(n,c,p,g,!1,null)}hitTest(n,c,p,g,_,A){return this._query(n,c,p,g,!0,_,A).length>0}hitTestCircle(n,c,p,g,_){const A=n-p,k=n+p,O=c-p,$=c+p;if(k<0||A>this.width||$<0||O>this.height)return!1;const te=[];return this._forEachCell(A,O,k,$,this._queryCellCircle,te,{hitTest:!0,overlapMode:g,circle:{x:n,y:c,radius:p},seenUids:{box:{},circle:{}}},_),te.length>0}_queryCell(n,c,p,g,_,A,k,O){const{seenUids:$,hitTest:te,overlapMode:Q}=k,pe=this.boxCells[_];if(pe!==null){const Ae=this.bboxes;for(const ze of pe)if(!$.box[ze]){$.box[ze]=!0;const ke=4*ze,De=this.boxKeys[ze];if(n<=Ae[ke+2]&&c<=Ae[ke+3]&&p>=Ae[ke+0]&&g>=Ae[ke+1]&&(!O||O(De))&&(!te||!jn(Q,De.overlapMode))&&(A.push({key:De,x1:Ae[ke],y1:Ae[ke+1],x2:Ae[ke+2],y2:Ae[ke+3]}),te))return!0}}const we=this.circleCells[_];if(we!==null){const Ae=this.circles;for(const ze of we)if(!$.circle[ze]){$.circle[ze]=!0;const ke=3*ze,De=this.circleKeys[ze];if(this._circleAndRectCollide(Ae[ke],Ae[ke+1],Ae[ke+2],n,c,p,g)&&(!O||O(De))&&(!te||!jn(Q,De.overlapMode))){const qe=Ae[ke],je=Ae[ke+1],Je=Ae[ke+2];if(A.push({key:De,x1:qe-Je,y1:je-Je,x2:qe+Je,y2:je+Je}),te)return!0}}}return!1}_queryCellCircle(n,c,p,g,_,A,k,O){const{circle:$,seenUids:te,overlapMode:Q}=k,pe=this.boxCells[_];if(pe!==null){const Ae=this.bboxes;for(const ze of pe)if(!te.box[ze]){te.box[ze]=!0;const ke=4*ze,De=this.boxKeys[ze];if(this._circleAndRectCollide($.x,$.y,$.radius,Ae[ke+0],Ae[ke+1],Ae[ke+2],Ae[ke+3])&&(!O||O(De))&&!jn(Q,De.overlapMode))return A.push(!0),!0}}const we=this.circleCells[_];if(we!==null){const Ae=this.circles;for(const ze of we)if(!te.circle[ze]){te.circle[ze]=!0;const ke=3*ze,De=this.circleKeys[ze];if(this._circlesCollide(Ae[ke],Ae[ke+1],Ae[ke+2],$.x,$.y,$.radius)&&(!O||O(De))&&!jn(Q,De.overlapMode))return A.push(!0),!0}}}_forEachCell(n,c,p,g,_,A,k,O){const $=this._convertToXCellCoord(n),te=this._convertToYCellCoord(c),Q=this._convertToXCellCoord(p),pe=this._convertToYCellCoord(g);for(let we=$;we<=Q;we++)for(let Ae=te;Ae<=pe;Ae++)if(_.call(this,n,c,p,g,this.xCellCount*Ae+we,A,k,O))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,c,p,g,_,A){const k=g-n,O=_-c,$=p+A;return $*$>k*k+O*O}_circleAndRectCollide(n,c,p,g,_,A,k){const O=(A-g)/2,$=Math.abs(n-(g+O));if($>O+p)return!1;const te=(k-_)/2,Q=Math.abs(c-(_+te));if(Q>te+p)return!1;if($<=O||Q<=te)return!0;const pe=$-O,we=Q-te;return pe*pe+we*we<=p*p}}function ji(v,n,c,p,g){const _=l.H();return n?(l.K(_,_,[1/g,1/g,1]),c||l.ae(_,_,p.angle)):l.L(_,p.labelPlaneMatrix,v),_}function Wn(v,n,c,p,g){if(n){const _=l.af(v);return l.K(_,_,[g,g,1]),c||l.ae(_,_,-p.angle),_}return p.glCoordMatrix}function Oe(v,n,c){let p;c?(p=[v.x,v.y,c(v.x,v.y),1],l.ag(p,p,n)):(p=[v.x,v.y,0,1],function(_,A,k){const O=A[0],$=A[1];_[0]=k[0]*O+k[4]*$+k[12],_[1]=k[1]*O+k[5]*$+k[13],_[3]=k[3]*O+k[7]*$+k[15]}(p,p,n));const g=p[3];return{point:new l.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function se(v,n){return .5+v/n*.5}function oe(v,n){return v.x>=-n[0]&&v.x<=n[0]&&v.y>=-n[1]&&v.y<=n[1]}function xe(v,n,c,p,g,_,A,k,O,$,te,Q,pe,we,Ae){const ze=p?v.textSizeData:v.iconSizeData,ke=l.ah(ze,c.transform.zoom),De=[256/c.width*2+1,256/c.height*2+1],qe=p?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;qe.clear();const je=v.lineVertexArray,Je=p?v.text.placedSymbolArray:v.icon.placedSymbolArray,rt=c.transform.width/c.transform.height;let st=!1;for(let mt=0;mt<Je.length;mt++){const wt=Je.get(mt);if(wt.hidden||wt.writingMode===l.ai.vertical&&!st){nr(wt.numGlyphs,qe);continue}st=!1;const Bt=Oe(new l.P(wt.anchorX,wt.anchorY),n,Ae);if(!oe(Bt.point,De)){nr(wt.numGlyphs,qe);continue}const Dt=se(c.transform.cameraToCenterDistance,Bt.signedDistanceFromCamera),bt=l.aj(ze,ke,wt),Tt=A?bt/Dt:bt*Dt,Gt={getElevation:Ae,labelPlaneMatrix:g,lineVertexArray:je,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:$,tileAnchorPoint:new l.P(wt.anchorX,wt.anchorY),unwrappedTileID:te,width:Q,height:pe,translation:we},mr=Be(Gt,wt,Tt,!1,k,n,_,v.glyphOffsetArray,qe,rt,O);st=mr.useVertical,(mr.notEnoughRoom||st||mr.needsFlipping&&Be(Gt,wt,Tt,!0,k,n,_,v.glyphOffsetArray,qe,rt,O).notEnoughRoom)&&nr(wt.numGlyphs,qe)}p?v.text.dynamicLayoutVertexBuffer.updateData(qe):v.icon.dynamicLayoutVertexBuffer.updateData(qe)}function Ie(v,n,c,p,g,_,A,k){const O=_.glyphStartIndex+_.numGlyphs,$=_.lineStartIndex,te=_.lineStartIndex+_.lineLength,Q=n.getoffsetX(_.glyphStartIndex),pe=n.getoffsetX(O-1),we=Pt(v*Q,c,p,g,_.segment,$,te,k,A);if(!we)return null;const Ae=Pt(v*pe,c,p,g,_.segment,$,te,k,A);return Ae?k.projectionCache.anyProjectionOccluded?null:{first:we,last:Ae}:null}function Me(v,n,c,p){return v===l.ai.horizontal&&Math.abs(c.y-n.y)>Math.abs(c.x-n.x)*p?{useVertical:!0}:(v===l.ai.vertical?n.y<c.y:n.x>c.x)?{needsFlipping:!0}:null}function Be(v,n,c,p,g,_,A,k,O,$,te){const Q=c/24,pe=n.lineOffsetX*Q,we=n.lineOffsetY*Q;let Ae;if(n.numGlyphs>1){const ze=n.glyphStartIndex+n.numGlyphs,ke=n.lineStartIndex,De=n.lineStartIndex+n.lineLength,qe=Ie(Q,k,pe,we,p,n,te,v);if(!qe)return{notEnoughRoom:!0};const je=Oe(qe.first.point,A,v.getElevation).point,Je=Oe(qe.last.point,A,v.getElevation).point;if(g&&!p){const rt=Me(n.writingMode,je,Je,$);if(rt)return rt}Ae=[qe.first];for(let rt=n.glyphStartIndex+1;rt<ze-1;rt++)Ae.push(Pt(Q*k.getoffsetX(rt),pe,we,p,n.segment,ke,De,v,te));Ae.push(qe.last)}else{if(g&&!p){const ke=Oe(v.tileAnchorPoint,_,v.getElevation).point,De=n.lineStartIndex+n.segment+1,qe=new l.P(v.lineVertexArray.getx(De),v.lineVertexArray.gety(De)),je=Oe(qe,_,v.getElevation),Je=je.signedDistanceFromCamera>0?je.point:function(st,mt,wt,Bt,Dt,bt){return Ke(st,mt,wt,1,Dt,bt)}(v.tileAnchorPoint,qe,ke,0,_,v),rt=Me(n.writingMode,ke,Je,$);if(rt)return rt}const ze=Pt(Q*k.getoffsetX(n.glyphStartIndex),pe,we,p,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,v,te);if(!ze||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ae=[ze]}for(const ze of Ae)l.ak(O,ze.point,ze.angle);return{}}function Ke(v,n,c,p,g,_){const A=v.add(v.sub(n)._unit()),k=g!==void 0?Oe(A,g,_.getElevation).point:at(A.x,A.y,_).point,O=c.sub(k);return c.add(O._mult(p/O.mag()))}function Le(v,n,c){const p=n.projectionCache;if(p.projections[v])return p.projections[v];const g=new l.P(n.lineVertexArray.getx(v),n.lineVertexArray.gety(v)),_=at(g.x,g.y,n);if(_.signedDistanceFromCamera>0)return p.projections[v]=_.point,p.anyProjectionOccluded=p.anyProjectionOccluded||_.isOccluded,_.point;const A=v-c.direction;return function(k,O,$,te,Q){return Ke(k,O,$,te,void 0,Q)}(c.distanceFromAnchor===0?n.tileAnchorPoint:new l.P(n.lineVertexArray.getx(A),n.lineVertexArray.gety(A)),g,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,n)}function at(v,n,c){const p=v+c.translation[0],g=n+c.translation[1];let _;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(_=c.projection.projectTileCoordinates(p,g,c.unwrappedTileID,c.getElevation),_.point.x=(.5*_.point.x+.5)*c.width,_.point.y=(.5*-_.point.y+.5)*c.height):(_=Oe(new l.P(p,g),c.labelPlaneMatrix,c.getElevation),_.isOccluded=!1),_}function ft(v,n,c){return v._unit()._perp()._mult(n*c)}function ot(v,n,c,p,g,_,A,k,O){if(k.projectionCache.offsets[v])return k.projectionCache.offsets[v];const $=c.add(n);if(v+O.direction<p||v+O.direction>=g)return k.projectionCache.offsets[v]=$,$;const te=Le(v+O.direction,k,O),Q=ft(te.sub(c),A,O.direction),pe=c.add(Q),we=te.add(Q);return k.projectionCache.offsets[v]=l.al(_,$,pe,we)||$,k.projectionCache.offsets[v]}function Pt(v,n,c,p,g,_,A,k,O){const $=p?v-n:v+n;let te=$>0?1:-1,Q=0;p&&(te*=-1,Q=Math.PI),te<0&&(Q+=Math.PI);let pe,we=te>0?_+g:_+g+1;k.projectionCache.cachedAnchorPoint?pe=k.projectionCache.cachedAnchorPoint:(pe=at(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=pe);let Ae,ze,ke=pe,De=pe,qe=0,je=0;const Je=Math.abs($),rt=[];let st;for(;qe+je<=Je;){if(we+=te,we<_||we>=A)return null;qe+=je,De=ke,ze=Ae;const Bt={absOffsetX:Je,direction:te,distanceFromAnchor:qe,previousVertex:De};if(ke=Le(we,k,Bt),c===0)rt.push(De),st=ke.sub(De);else{let Dt;const bt=ke.sub(De);Dt=bt.mag()===0?ft(Le(we+te,k,Bt).sub(ke),c,te):ft(bt,c,te),ze||(ze=De.add(Dt)),Ae=ot(we,Dt,ke,_,A,ze,c,k,Bt),rt.push(ze),st=Ae.sub(ze)}je=st.mag()}const mt=st._mult((Je-qe)/je)._add(ze||De),wt=Q+Math.atan2(ke.y-De.y,ke.x-De.x);return rt.push(mt),{point:mt,angle:O?wt:0,path:rt}}const qt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function nr(v,n){for(let c=0;c<v;c++){const p=n.length;n.resize(p+4),n.float32.set(qt,3*p)}}const pr=100;class Er{constructor(n,c,p=new oi(n.width+200,n.height+200,25),g=new oi(n.width+200,n.height+200,25)){this.transform=n,this.mapProjection=c,this.grid=p,this.ignoredGrid=g,this.pitchFactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+pr,this.screenBottomBoundary=n.height+pr,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,c,p,g,_,A,k,O,$,te,Q){const pe=n.anchorPointX+O[0],we=n.anchorPointY+O[1],Ae=this.projectAndGetPerspectiveRatio(g,pe,we,_,te),ze=this._projectCollisionBox(n,p,g,_,A,k,O,Ae,te,Q),[ke,De,qe,je]=ze.box;return this.mapProjection.useSpecialProjectionForSymbols&&(A?ze.allPointsOccluded:this.mapProjection.isOccluded(pe,we,_))||Ae.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ke,De,qe,je)||c!=="always"&&this.grid.hitTest(ke,De,qe,je,c,$)?{box:[ke,De,qe,je],placeable:!1,offscreen:!1}:{box:[ke,De,qe,je],placeable:!0,offscreen:this.isOffscreen(ke,De,qe,je)}}placeCollisionCircles(n,c,p,g,_,A,k,O,$,te,Q,pe,we,Ae,ze,ke){const De=[],qe=new l.P(c.anchorX,c.anchorY),je=this.getPerspectiveRatio(A,qe.x,qe.y,k,ke),Je=(Q?_/je:_*je)/l.aq,rt={getElevation:ke,labelPlaneMatrix:O,lineVertexArray:p,pitchWithMap:Q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:qe,unwrappedTileID:k,width:this.transform.width,height:this.transform.height,translation:ze},st=Ie(Je,g,c.lineOffsetX*Je,c.lineOffsetY*Je,!1,c,!1,rt);let mt=!1,wt=!1,Bt=!0;if(st){const Dt=.5*we*je+Ae,bt=new l.P(-100,-100),Tt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Gt=new Rt,mr=st.first,Ct=st.last;let jt=[];for(let xr=mr.path.length-1;xr>=1;xr--)jt.push(mr.path[xr]);for(let xr=1;xr<Ct.path.length;xr++)jt.push(Ct.path[xr]);const cr=2.5*Dt;if($){const xr=this.projectPathToScreenSpace(jt,rt,$);jt=xr.some(Pr=>Pr.signedDistanceFromCamera<=0)?[]:xr.map(Pr=>Pr.point)}let ln=[];if(jt.length>0){const xr=jt[0].clone(),Pr=jt[0].clone();for(let un=1;un<jt.length;un++)xr.x=Math.min(xr.x,jt[un].x),xr.y=Math.min(xr.y,jt[un].y),Pr.x=Math.max(Pr.x,jt[un].x),Pr.y=Math.max(Pr.y,jt[un].y);ln=xr.x>=bt.x&&Pr.x<=Tt.x&&xr.y>=bt.y&&Pr.y<=Tt.y?[jt]:Pr.x<bt.x||xr.x>Tt.x||Pr.y<bt.y||xr.y>Tt.y?[]:l.am([jt],bt.x,bt.y,Tt.x,Tt.y)}for(const xr of ln){Gt.reset(xr,.25*Dt);let Pr=0;Pr=Gt.length<=.5*Dt?1:Math.ceil(Gt.paddedLength/cr)+1;for(let un=0;un<Pr;un++){const ai=un/Math.max(Pr-1,1),Ro=Gt.lerp(ai),cn=Ro.x+pr,Di=Ro.y+pr;De.push(cn,Di,Dt,0);const Ai=cn-Dt,si=Di-Dt,li=cn+Dt,jo=Di+Dt;if(Bt=Bt&&this.isOffscreen(Ai,si,li,jo),wt=wt||this.isInsideGrid(Ai,si,li,jo),n!=="always"&&this.grid.hitTestCircle(cn,Di,Dt,n,pe)&&(mt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:mt}}}}return{circles:!te&&mt||!wt||je<this.perspectiveRatioCutoff?[]:De,offscreen:Bt,collisionDetected:mt}}projectPathToScreenSpace(n,c,p){return n.map(g=>Oe(g,p,c.getElevation))}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,g=1/0,_=-1/0,A=-1/0;for(const te of n){const Q=new l.P(te.x+pr,te.y+pr);p=Math.min(p,Q.x),g=Math.min(g,Q.y),_=Math.max(_,Q.x),A=Math.max(A,Q.y),c.push(Q)}const k=this.grid.query(p,g,_,A).concat(this.ignoredGrid.query(p,g,_,A)),O={},$={};for(const te of k){const Q=te.key;if(O[Q.bucketInstanceId]===void 0&&(O[Q.bucketInstanceId]={}),O[Q.bucketInstanceId][Q.featureIndex])continue;const pe=[new l.P(te.x1,te.y1),new l.P(te.x2,te.y1),new l.P(te.x2,te.y2),new l.P(te.x1,te.y2)];l.an(c,pe)&&(O[Q.bucketInstanceId][Q.featureIndex]=!0,$[Q.bucketInstanceId]===void 0&&($[Q.bucketInstanceId]=[]),$[Q.bucketInstanceId].push(Q.featureIndex))}return $}insertCollisionBox(n,c,p,g,_,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:c},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,c,p,g,_,A){const k=p?this.ignoredGrid:this.grid,O={bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:c};for(let $=0;$<n.length;$+=4)k.insertCircle(O,n[$],n[$+1],n[$+2])}projectAndGetPerspectiveRatio(n,c,p,g,_){const A=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,g,_):Oe(new l.P(c,p),n,_);return{point:new l.P((A.point.x+1)/2*this.transform.width+pr,(1-A.point.y)/2*this.transform.height+pr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}getPerspectiveRatio(n,c,p,g,_){const A=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,g,_):Oe(new l.P(c,p),n,_);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(n,c,p,g){return p<pr||n>=this.screenRightBoundary||g<pr||c>this.screenBottomBoundary}isInsideGrid(n,c,p,g){return p>=0&&n<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const n=l.ao([]);return l.J(n,n,[-100,-100,0]),n}_projectCollisionBox(n,c,p,g,_,A,k,O,$,te){const Q=c*O.perspectiveRatio;let pe=new l.P(1,0),we=new l.P(0,1);const Ae=new l.P(n.anchorPointX+k[0],n.anchorPointY+k[1]);if(A&&!_){const Dt=this.projectAndGetPerspectiveRatio(p,Ae.x+1,Ae.y,g,$).point.sub(O.point).unit(),bt=Math.atan(Dt.y/Dt.x)+(Dt.x<0?Math.PI:0),Tt=Math.sin(bt),Gt=Math.cos(bt);pe=new l.P(Gt,Tt),we=new l.P(-Tt,Gt)}else if(!A&&_){const Dt=-this.transform.angle,bt=Math.sin(Dt),Tt=Math.cos(Dt);pe=new l.P(Tt,bt),we=new l.P(-bt,Tt)}let ze=O.point,ke=Q;if(_){ze=Ae;const Dt=this.transform.zoom-Math.floor(this.transform.zoom);ke=Math.pow(2,-Dt),ke*=this.mapProjection.getPitchedTextCorrection(this.transform,Ae,g),te||(ke*=l.ad(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}te&&(ze=ze.add(pe.mult(te.x*ke)).add(we.mult(te.y*ke)));const De=n.x1*ke,qe=n.x2*ke,je=(De+qe)/2,Je=n.y1*ke,rt=n.y2*ke,st=(Je+rt)/2,mt=[{offsetX:De,offsetY:Je},{offsetX:je,offsetY:Je},{offsetX:qe,offsetY:Je},{offsetX:qe,offsetY:st},{offsetX:qe,offsetY:rt},{offsetX:je,offsetY:rt},{offsetX:De,offsetY:rt},{offsetX:De,offsetY:st}];let wt=[];for(const{offsetX:Dt,offsetY:bt}of mt)wt.push(new l.P(ze.x+pe.x*Dt+we.x*bt,ze.y+pe.y*Dt+we.y*bt));let Bt=!1;if(_){const Dt=wt.map(bt=>this.projectAndGetPerspectiveRatio(p,bt.x,bt.y,g,$));Bt=Dt.some(bt=>!bt.isOccluded),wt=Dt.map(bt=>bt.point)}else Bt=!0;return{box:l.ap(wt),allPointsOccluded:!Bt}}}function hr(v,n,c){return n*(l.X/(v.tileSize*Math.pow(2,c-v.tileID.overscaledZ)))}class Vr{constructor(n,c,p,g){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?c:-c))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Yr{constructor(n,c,p,g,_){this.text=new Vr(n?n.text:null,c,p,_),this.icon=new Vr(n?n.icon:null,c,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class on{constructor(n,c,p){this.text=n,this.icon=c,this.skipFade=p}}class wr{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class $r{constructor(n,c,p,g,_){this.bucketInstanceId=n,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class Qr{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const c=++this.maxGroupID;this.collisionGroups[n]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[n]}}function An(v,n,c,p,g){const{horizontalAlign:_,verticalAlign:A}=l.av(v);return new l.P(-(_-.5)*n+p[0]*g,-(A-.5)*c+p[1]*g)}class Hn{constructor(n,c,p,g,_,A){this.transform=n.clone(),this.terrain=p,this.collisionIndex=new Er(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Qr(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const c=this.terrain;return c?(p,g)=>c.getElevation(n,p,g):null}getBucketParts(n,c,p,g){const _=p.getBucket(c),A=p.latestFeatureIndex;if(!_||!A||c.id!==_.layerIds[0])return;const k=p.collisionBoxArray,O=_.layers[0].layout,$=_.layers[0].paint,te=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),Q=p.tileSize/l.X,pe=p.tileID.toUnwrapped(),we=this.transform.calculatePosMatrix(pe),Ae=O.get("text-pitch-alignment")==="map",ze=O.get("text-rotation-alignment")==="map",ke=hr(p,1,this.transform.zoom),De=this.collisionIndex.mapProjection.translatePosition(this.transform,p,$.get("text-translate"),$.get("text-translate-anchor")),qe=this.collisionIndex.mapProjection.translatePosition(this.transform,p,$.get("icon-translate"),$.get("icon-translate-anchor")),je=ji(we,Ae,ze,this.transform,ke);let Je=null;if(Ae){const st=Wn(we,Ae,ze,this.transform,ke);Je=l.L([],this.transform.labelPlaneMatrix,st)}this.retainedQueryData[_.bucketInstanceId]=new $r(_.bucketInstanceId,A,_.sourceLayerIndex,_.index,p.tileID);const rt={bucket:_,layout:O,translationText:De,translationIcon:qe,posMatrix:we,unwrappedTileID:pe,textLabelPlaneMatrix:je,labelToScreenMatrix:Je,scale:te,textPixelRatio:Q,holdingForFade:p.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const st of _.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:wt,symbolInstanceEnd:Bt}=st;n.push({sortKey:mt,symbolInstanceStart:wt,symbolInstanceEnd:Bt,parameters:rt})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(n,c,p,g,_,A,k,O,$,te,Q,pe,we,Ae,ze,ke,De,qe,je){const Je=l.ar[n.textAnchor],rt=[n.textOffset0,n.textOffset1],st=An(Je,p,g,rt,_),mt=this.collisionIndex.placeCollisionBox(c,pe,O,$,te,k,A,ke,Q.predicate,je,st);if((!qe||this.collisionIndex.placeCollisionBox(qe,pe,O,$,te,k,A,De,Q.predicate,je,st).placeable)&&mt.placeable){let wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(wt=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:rt,width:p,height:g,anchor:Je,textBoxScale:_,prevAnchor:wt},this.markUsedJustification(Ae,Je,we,ze),Ae.allowVerticalPlacement&&(this.markUsedOrientation(Ae,ze,we),this.placedOrientations[we.crossTileID]=ze),{shift:st,placedGlyphBoxes:mt}}}placeLayerBucketPart(n,c,p){const{bucket:g,layout:_,translationText:A,translationIcon:k,posMatrix:O,unwrappedTileID:$,textLabelPlaneMatrix:te,labelToScreenMatrix:Q,textPixelRatio:pe,holdingForFade:we,collisionBoxArray:Ae,partiallyEvaluatedTextSize:ze,collisionGroup:ke}=n.parameters,De=_.get("text-optional"),qe=_.get("icon-optional"),je=l.as(_,"text-overlap","text-allow-overlap"),Je=je==="always",rt=l.as(_,"icon-overlap","icon-allow-overlap"),st=rt==="always",mt=_.get("text-rotation-alignment")==="map",wt=_.get("text-pitch-alignment")==="map",Bt=_.get("icon-text-fit")!=="none",Dt=_.get("symbol-z-order")==="viewport-y",bt=Je&&(st||!g.hasIconData()||qe),Tt=st&&(Je||!g.hasTextData()||De);!g.collisionArrays&&Ae&&g.deserializeCollisionBoxes(Ae);const Gt=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),mr=(Ct,jt,cr)=>{var ln,xr;if(c[Ct.crossTileID])return;if(we)return void(this.placements[Ct.crossTileID]=new on(!1,!1,!1));let Pr=!1,un=!1,ai=!0,Ro=null,cn={box:null,placeable:!1,offscreen:null},Di={box:null,placeable:!1,offscreen:null},Ai=null,si=null,li=null,jo=0,Xs=0,Jc=0;jt.textFeatureIndex?jo=jt.textFeatureIndex:Ct.useRuntimeCollisionCircles&&(jo=Ct.featureIndex),jt.verticalTextFeatureIndex&&(Xs=jt.verticalTextFeatureIndex);const Ul=jt.textBox;if(Ul){const ei=ui=>{let ci=l.ai.horizontal;if(g.allowVerticalPlacement&&!ui&&this.prevPlacement){const qn=this.prevPlacement.placedOrientations[Ct.crossTileID];qn&&(this.placedOrientations[Ct.crossTileID]=qn,ci=qn,this.markUsedOrientation(g,ci,Ct))}return ci},zo=(ui,ci)=>{if(g.allowVerticalPlacement&&Ct.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const qn of g.writingModes)if(qn===l.ai.vertical?(cn=ci(),Di=cn):cn=ui(),cn&&cn.placeable)break}else cn=ui()},cs=Ct.textAnchorOffsetStartIndex,Vl=Ct.textAnchorOffsetEndIndex;if(Vl===cs){const ui=(ci,qn)=>{const dn=this.collisionIndex.placeCollisionBox(ci,je,pe,O,$,wt,mt,A,ke.predicate,Gt);return dn&&dn.placeable&&(this.markUsedOrientation(g,qn,Ct),this.placedOrientations[Ct.crossTileID]=qn),dn};zo(()=>ui(Ul,l.ai.horizontal),()=>{const ci=jt.verticalTextBox;return g.allowVerticalPlacement&&Ct.numVerticalGlyphVertices>0&&ci?ui(ci,l.ai.vertical):{box:null,offscreen:null}}),ei(cn&&cn.placeable)}else{let ui=l.ar[(xr=(ln=this.prevPlacement)===null||ln===void 0?void 0:ln.variableOffsets[Ct.crossTileID])===null||xr===void 0?void 0:xr.anchor];const ci=(dn,Gl,id)=>{const Un=dn.x2-dn.x1,gm=dn.y2-dn.y1,Qc=Ct.textBoxScale,eh=Bt&&rt==="never"?Gl:null;let hs=null,ym=je==="never"?1:2,od="never";ui&&ym++;for(let ad=0;ad<ym;ad++){for(let sd=cs;sd<Vl;sd++){const th=g.textAnchorOffsets.get(sd);if(ui&&th.textAnchor!==ui)continue;const Wl=this.attemptAnchorPlacement(th,dn,Un,gm,Qc,mt,wt,pe,O,$,ke,od,Ct,g,id,A,k,eh,Gt);if(Wl&&(hs=Wl.placedGlyphBoxes,hs&&hs.placeable))return Pr=!0,Ro=Wl.shift,hs}ui?ui=null:od=je}return p&&!hs&&(hs={box:this.collisionIndex.placeCollisionBox(Ul,"always",pe,O,$,wt,mt,A,ke.predicate,Gt,new l.P(0,0)).box,offscreen:!1,placeable:!1}),hs};zo(()=>ci(Ul,jt.iconBox,l.ai.horizontal),()=>{const dn=jt.verticalTextBox;return g.allowVerticalPlacement&&(!cn||!cn.placeable)&&Ct.numVerticalGlyphVertices>0&&dn?ci(dn,jt.verticalIconBox,l.ai.vertical):{box:null,occluded:!0,offscreen:null}}),cn&&(Pr=cn.placeable,ai=cn.offscreen);const qn=ei(cn&&cn.placeable);if(!Pr&&this.prevPlacement){const dn=this.prevPlacement.variableOffsets[Ct.crossTileID];dn&&(this.variableOffsets[Ct.crossTileID]=dn,this.markUsedJustification(g,dn.anchor,Ct,qn))}}}if(Ai=cn,Pr=Ai&&Ai.placeable,ai=Ai&&Ai.offscreen,Ct.useRuntimeCollisionCircles){const ei=g.text.placedSymbolArray.get(Ct.centerJustifiedTextSymbolIndex),zo=l.aj(g.textSizeData,ze,ei),cs=_.get("text-padding");si=this.collisionIndex.placeCollisionCircles(je,ei,g.lineVertexArray,g.glyphOffsetArray,zo,O,$,te,Q,p,wt,ke.predicate,Ct.collisionCircleDiameter,cs,A,Gt),si.circles.length&&si.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),Pr=Je||si.circles.length>0&&!si.collisionDetected,ai=ai&&si.offscreen}if(jt.iconFeatureIndex&&(Jc=jt.iconFeatureIndex),jt.iconBox){const ei=zo=>this.collisionIndex.placeCollisionBox(zo,rt,pe,O,$,wt,mt,k,ke.predicate,Gt,Bt&&Ro?Ro:void 0);Di&&Di.placeable&&jt.verticalIconBox?(li=ei(jt.verticalIconBox),un=li.placeable):(li=ei(jt.iconBox),un=li.placeable),ai=ai&&li.offscreen}const qs=De||Ct.numHorizontalGlyphVertices===0&&Ct.numVerticalGlyphVertices===0,Yc=qe||Ct.numIconVertices===0;qs||Yc?Yc?qs||(un=un&&Pr):Pr=un&&Pr:un=Pr=un&&Pr;const nd=un&&li.placeable;if(Pr&&Ai.placeable&&this.collisionIndex.insertCollisionBox(Ai.box,je,_.get("text-ignore-placement"),g.bucketInstanceId,Di&&Di.placeable&&Xs?Xs:jo,ke.ID),nd&&this.collisionIndex.insertCollisionBox(li.box,rt,_.get("icon-ignore-placement"),g.bucketInstanceId,Jc,ke.ID),si&&Pr&&this.collisionIndex.insertCollisionCircles(si.circles,je,_.get("text-ignore-placement"),g.bucketInstanceId,jo,ke.ID),p&&this.storeCollisionData(g.bucketInstanceId,cr,jt,Ai,li,si),Ct.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ct.crossTileID]=new on(Pr||bt,un||Tt,ai||g.justReloaded),c[Ct.crossTileID]=!0};if(Dt){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ct=g.getSortedSymbolIndexes(this.transform.angle);for(let jt=Ct.length-1;jt>=0;--jt){const cr=Ct[jt];mr(g.symbolInstances.get(cr),g.collisionArrays[cr],cr)}}else for(let Ct=n.symbolInstanceStart;Ct<n.symbolInstanceEnd;Ct++)mr(g.symbolInstances.get(Ct),g.collisionArrays[Ct],Ct);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const Ct=this.collisionCircleArrays[g.bucketInstanceId];l.at(Ct.invProjMatrix,O),Ct.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(n,c,p,g,_,A){if(p.textBox||p.iconBox){let k,O;this.collisionBoxArrays.has(n)?k=this.collisionBoxArrays.get(n):(k=new Map,this.collisionBoxArrays.set(n,k)),k.has(c)?O=k.get(c):(O={text:null,icon:null},k.set(c,O)),p.textBox&&(O.text=g.box),p.iconBox&&(O.icon=_.box)}if(A){let k=this.collisionCircleArrays[n];k===void 0&&(k=this.collisionCircleArrays[n]=new wr);for(let O=0;O<A.circles.length;O+=4)k.circles.push(A.circles[O+0]),k.circles.push(A.circles[O+1]),k.circles.push(A.circles[O+2]),k.circles.push(A.collisionDetected?1:0)}}markUsedJustification(n,c,p,g){let _;_=g===l.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.au(c)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of A)k>=0&&(n.text.placedSymbolArray.get(k).crossTileID=_>=0&&k!==_?0:p.crossTileID)}markUsedOrientation(n,c,p){const g=c===l.ai.horizontal||c===l.ai.horizontalOnly?c:0,_=c===l.ai.vertical?c:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of A)n.text.placedSymbolArray.get(k).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const g=c?c.symbolFadeChange(n):1,_=c?c.opacities:{},A=c?c.variableOffsets:{},k=c?c.placedOrientations:{};for(const O in this.placements){const $=this.placements[O],te=_[O];te?(this.opacities[O]=new Yr(te,g,$.text,$.icon),p=p||$.text!==te.text.placed||$.icon!==te.icon.placed):(this.opacities[O]=new Yr(null,g,$.text,$.icon,$.skipFade),p=p||$.text||$.icon)}for(const O in _){const $=_[O];if(!this.opacities[O]){const te=new Yr($,g,!1,!1);te.isHidden()||(this.opacities[O]=te,p=p||$.text.placed||$.icon.placed)}}for(const O in A)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=A[O]);for(const O in k)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=k[O]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:n)}updateLayerOpacities(n,c){const p={};for(const g of c){const _=g.getBucket(n);_&&g.latestFeatureIndex&&n.id===_.layerIds[0]&&this.updateBucketOpacities(_,g.tileID,p,g.collisionBoxArray)}}updateBucketOpacities(n,c,p,g){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const _=n.layers[0],A=_.layout,k=new Yr(null,0,!1,!1,!0),O=A.get("text-allow-overlap"),$=A.get("icon-allow-overlap"),te=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q=A.get("text-rotation-alignment")==="map",pe=A.get("text-pitch-alignment")==="map",we=A.get("icon-text-fit")!=="none",Ae=new Yr(null,0,O&&($||!n.hasIconData()||A.get("icon-optional")),$&&(O||!n.hasTextData()||A.get("text-optional")),!0);!n.collisionArrays&&g&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(g);const ze=(De,qe,je)=>{for(let Je=0;Je<qe/4;Je++)De.opacityVertexArray.emplaceBack(je);De.hasVisibleVertices=De.hasVisibleVertices||je!==Xn},ke=this.collisionBoxArrays.get(n.bucketInstanceId);for(let De=0;De<n.symbolInstances.length;De++){const qe=n.symbolInstances.get(De),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:Je,crossTileID:rt}=qe;let st=this.opacities[rt];p[rt]?st=k:st||(st=Ae,this.opacities[rt]=st),p[rt]=!0;const mt=qe.numIconVertices>0,wt=this.placedOrientations[qe.crossTileID],Bt=wt===l.ai.vertical,Dt=wt===l.ai.horizontal||wt===l.ai.horizontalOnly;if(je>0||Je>0){const Tt=xi(st.text);ze(n.text,je,Bt?Xn:Tt),ze(n.text,Je,Dt?Xn:Tt);const Gt=st.text.isHidden();[qe.rightJustifiedTextSymbolIndex,qe.centerJustifiedTextSymbolIndex,qe.leftJustifiedTextSymbolIndex].forEach(jt=>{jt>=0&&(n.text.placedSymbolArray.get(jt).hidden=Gt||Bt?1:0)}),qe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(qe.verticalPlacedTextSymbolIndex).hidden=Gt||Dt?1:0);const mr=this.variableOffsets[qe.crossTileID];mr&&this.markUsedJustification(n,mr.anchor,qe,wt);const Ct=this.placedOrientations[qe.crossTileID];Ct&&(this.markUsedJustification(n,"left",qe,Ct),this.markUsedOrientation(n,Ct,qe))}if(mt){const Tt=xi(st.icon),Gt=!(we&&qe.verticalPlacedIconSymbolIndex&&Bt);qe.placedIconSymbolIndex>=0&&(ze(n.icon,qe.numIconVertices,Gt?Tt:Xn),n.icon.placedSymbolArray.get(qe.placedIconSymbolIndex).hidden=st.icon.isHidden()),qe.verticalPlacedIconSymbolIndex>=0&&(ze(n.icon,qe.numVerticalIconVertices,Gt?Xn:Tt),n.icon.placedSymbolArray.get(qe.verticalPlacedIconSymbolIndex).hidden=st.icon.isHidden())}const bt=ke&&ke.has(De)?ke.get(De):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Tt=n.collisionArrays[De];if(Tt){let Gt=new l.P(0,0);if(Tt.textBox||Tt.verticalTextBox){let mr=!0;if(te){const Ct=this.variableOffsets[rt];Ct?(Gt=An(Ct.anchor,Ct.width,Ct.height,Ct.textOffset,Ct.textBoxScale),Q&&Gt._rotate(pe?this.transform.angle:-this.transform.angle)):mr=!1}if(Tt.textBox||Tt.verticalTextBox){let Ct;Tt.textBox&&(Ct=Bt),Tt.verticalTextBox&&(Ct=Dt),Zn(n.textCollisionBox.collisionVertexArray,st.text.placed,!mr||Ct,bt.text,Gt.x,Gt.y)}}if(Tt.iconBox||Tt.verticalIconBox){const mr=!!(!Dt&&Tt.verticalIconBox);let Ct;Tt.iconBox&&(Ct=mr),Tt.verticalIconBox&&(Ct=!mr),Zn(n.iconCollisionBox.collisionVertexArray,st.icon.placed,Ct,bt.icon,we?Gt.x:0,we?Gt.y:0)}}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const De=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=De.invProjMatrix,n.placementViewportMatrix=De.viewportMatrix,n.collisionCircleArray=De.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>n}setStale(){this.stale=!0}}function Zn(v,n,c,p,g,_){p&&p.length!==0||(p=[0,0,0,0]);const A=p[0]-pr,k=p[1]-pr,O=p[2]-pr,$=p[3]-pr;v.emplaceBack(n?1:0,c?1:0,g||0,_||0,A,k),v.emplaceBack(n?1:0,c?1:0,g||0,_||0,O,k),v.emplaceBack(n?1:0,c?1:0,g||0,_||0,O,$),v.emplaceBack(n?1:0,c?1:0,g||0,_||0,A,$)}const ea=Math.pow(2,25),Mr=Math.pow(2,24),xl=Math.pow(2,17),Tr=Math.pow(2,16),In=Math.pow(2,9),_i=Math.pow(2,8),Af=Math.pow(2,1);function xi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const n=v.placed?1:0,c=Math.floor(127*v.opacity);return c*ea+n*Mr+c*xl+n*Tr+c*In+n*_i+c*Af+n}const Xn=0;function wl(){return{isOccluded:(v,n,c)=>!1,getPitchedTextCorrection:(v,n,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,n,c,p){throw new Error("Not implemented.")},translatePosition:(v,n,c,p)=>function(g,_,A,k,O=!1){if(!A[0]&&!A[1])return[0,0];const $=O?k==="map"?g.angle:0:k==="viewport"?-g.angle:0;if($){const te=Math.sin($),Q=Math.cos($);A=[A[0]*Q-A[1]*te,A[0]*te+A[1]*Q]}return[O?A[0]:hr(_,A[0],g.zoom),O?A[1]:hr(_,A[1],g.zoom)]}(v,n,c,p),getCircleRadiusCorrection:v=>1}}class wi{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,c,p,g,_){const A=this._bucketParts;for(;this._currentTileIndex<n.length;)if(c.getBucketParts(A,g,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((k,O)=>k.sortKey-O.sortKey));this._currentPartIndex<A.length;)if(c.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class bn{constructor(n,c,p,g,_,A,k,O){this.placement=new Hn(n,wl(),c,A,k,O),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(n,c,p){const g=b.now(),_=()=>!this._forceFullPlacement&&b.now()-g>2;for(;this._currentPlacementIndex>=0;){const A=c[n[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=k)&&(!A.maxzoom||A.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new wi(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Eo=512/l.X/2;class ba{constructor(n,c,p){this.tileID=n,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<c.length;_++){const A=c.get(_),k=A.key,O=g.get(k);O?O.push(A):g.set(k,[A])}for(const[_,A]of g){const k={positions:A.map(O=>({x:Math.floor(O.anchorX*Eo),y:Math.floor(O.anchorY*Eo)})),crossTileIDs:A.map(O=>O.crossTileID)};if(k.positions.length>128){const O=new l.aw(k.positions.length,16,Uint16Array);for(const{x:$,y:te}of k.positions)O.add($,te);O.finish(),delete k.positions,k.index=O}this._symbolsByKey[_]=k}}getScaledCoordinates(n,c){const{x:p,y:g,z:_}=this.tileID.canonical,{x:A,y:k,z:O}=c.canonical,$=Eo/Math.pow(2,O-_),te=(k*l.X+n.anchorY)*$,Q=g*l.X*Eo;return{x:Math.floor((A*l.X+n.anchorX)*$-p*l.X*Eo),y:Math.floor(te-Q)}}findMatches(n,c,p){const g=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let _=0;_<n.length;_++){const A=n.get(_);if(A.crossTileID)continue;const k=this._symbolsByKey[A.key];if(!k)continue;const O=this.getScaledCoordinates(A,c);if(k.index){const $=k.index.range(O.x-g,O.y-g,O.x+g,O.y+g).sort();for(const te of $){const Q=k.crossTileIDs[te];if(!p[Q]){p[Q]=!0,A.crossTileID=Q;break}}}else if(k.positions)for(let $=0;$<k.positions.length;$++){const te=k.positions[$],Q=k.crossTileIDs[$];if(Math.abs(te.x-O.x)<=g&&Math.abs(te.y-O.y)<=g&&!p[Q]){p[Q]=!0,A.crossTileID=Q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class mn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const c=Math.round((n-this.lng)/360);if(c!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const A in g){const k=g[A];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),_[k.tileID.key]=k}this.indexes[p]=_}this.lng=n}addBucket(n,c,p){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let _=0;_<c.symbolInstances.length;_++)c.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const g=this.usedCrossTileIDs[n.overscaledZ];for(const _ in this.indexes){const A=this.indexes[_];if(Number(_)>n.overscaledZ)for(const k in A){const O=A[k];O.tileID.isChildOf(n)&&O.findMatches(c.symbolInstances,n,g)}else{const k=A[n.scaledTo(Number(_)).key];k&&k.findMatches(c.symbolInstances,n,g)}}for(let _=0;_<c.symbolInstances.length;_++){const A=c.symbolInstances.get(_);A.crossTileID||(A.crossTileID=p.generate(),g[A.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new ba(n,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(n,c){for(const p of c.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[n][g]}removeStaleBuckets(n){let c=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)n[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],c=!0)}return c}}class Sn{constructor(){this.layerIndexes={},this.crossTileIDs=new mn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,c,p){let g=this.layerIndexes[n.id];g===void 0&&(g=this.layerIndexes[n.id]=new bl);let _=!1;const A={};g.handleWrapJump(p);for(const k of c){const O=k.getBucket(n);O&&n.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,O,this.crossTileIDs)&&(_=!0),A[O.bucketInstanceId]=!0)}return g.removeStaleBuckets(A)&&(_=!0),_}pruneUnusedLayers(n){const c={};n.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const Fs=(v,n)=>l.t(v,n&&n.filter(c=>c.identifier!=="source.canvas")),ta=l.ax();class Mu extends l.E{constructor(n,c={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const g=this.sourceCaches[p].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[p].reload()}},this.map=n,this.dispatcher=new kt(vt(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,g)=>this.getGlyphs(p,g)),this.dispatcher.registerMessageHandler("GI",(p,g)=>this.getImages(p,g)),this.imageManager=new ge,this.imageManager.setEventedParent(this),this.glyphManager=new Y(n._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ce(256,512),this.crossTileSymbolIndex=new Sn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.az()),Ve().on(M,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const g=this.sourceCaches[p.sourceId];if(!g)return;const _=g.getSource();if(_&&_.vectorLayerIds)for(const A in this._layers){const k=this._layers[A];k.source===_.id&&this._validateLayer(k)}})}loadURL(n,c={},p){this.fire(new l.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const g=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController,l.h(g,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,c,p)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new l.j(_))})}loadJSON(n,c={},p){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(n,c,p)}).catch(()=>{})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(ta,{validate:!1})}_load(n,c,p){var g;const _=c.transformStyle?c.transformStyle(p,n):n;if(!c.validate||!Fs(this,l.x(_))){this._loaded=!0,this.stylesheet=_;for(const A in _.sources)this.addSource(A,_.sources[A],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new be(this.stylesheet.light),this.sky=new $e(this.stylesheet.sky),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const n=l.aA(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of n){const p=l.aB(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(n,c=!1,p=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,A,k,O){return l._(this,void 0,void 0,function*(){const $=B(_),te=k>1?"@2x":"",Q={},pe={};for(const{id:we,url:Ae}of $){const ze=A.transformRequest(ee(Ae,te,".json"),"SpriteJSON");Q[we]=l.h(ze,O);const ke=A.transformRequest(ee(Ae,te,".png"),"SpriteImage");pe[we]=W.getImage(ke,O)}return yield Promise.all([...Object.values(Q),...Object.values(pe)]),function(we,Ae){return l._(this,void 0,void 0,function*(){const ze={};for(const ke in we){ze[ke]={};const De=b.getImageCanvasContext((yield Ae[ke]).data),qe=(yield we[ke]).data;for(const je in qe){const{width:Je,height:rt,x:st,y:mt,sdf:wt,pixelRatio:Bt,stretchX:Dt,stretchY:bt,content:Tt,textFitWidth:Gt,textFitHeight:mr}=qe[je];ze[ke][je]={data:null,pixelRatio:Bt,sdf:wt,stretchX:Dt,stretchY:bt,content:Tt,textFitWidth:Gt,textFitHeight:mr,spriteData:{width:Je,height:rt,x:st,y:mt,context:De}}}}return ze})}(Q,pe)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const A in _){this._spritesImagesIds[A]=[];const k=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(O=>!(O in _)):[];for(const O of k)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in _[A]){const $=A==="default"?O:`${A}:${O}`;this._spritesImagesIds[A].push($),$ in this.imageManager.images?this.imageManager.updateImage($,_[A][O],!1):this.imageManager.addImage($,_[A][O]),c&&(this._changedImages[$]=!0)}}}).catch(_=>{this._spriteRequest=null,g=_,this.fire(new l.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(n){const c=this.sourceCaches[n.source];if(!c)return;const p=n.sourceLayer;if(!p)return;const g=c.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const c=this._serializedAllLayers();if(!n||n.length===0)return Object.values(c);const p=[];for(const g of n)c[g]&&p.push(c[g]);return p}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const g=this._layers[p];g.type!=="custom"&&(n[p]=g.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const c=this._changed;if(c){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const A in this._updatedSources){const k=this._updatedSources[A];if(k==="reload")this._reloadSource(A);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(n,this._availableImages),!_.isHidden(n.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];!!p[g]!=!!_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(n),this.sky.recalculate(n),this.z=n.zoom,c&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,c={}){var p;this._checkLoaded();const g=this.serialize();if(n=c.transformStyle?c.transformStyle(g,n):n,((p=c.validate)===null||p===void 0||p)&&Fs(this,l.x(n)))return!1;(n=l.aC(n)).layers=l.aA(n.layers);const _=l.aD(g,n),A=this._getOperationsToPerform(_);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const k of A.operations)k();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const c=[],p=[];for(const g of n)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":c.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":c.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,g.args));break;case"setSky":c.push(()=>this.setSky.apply(this,g.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":c.push(()=>{});break;default:p.push(g.command)}return{operations:c,unimplemented:p}}addImage(n,c){if(this.getImage(n))return this.fire(new l.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,c),this._afterImageUpdated(n)}updateImage(n,c){this.imageManager.updateImage(n,c)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new l.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,c,p={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(l.x.source,`sources.${n}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const g=this.sourceCaches[n]=new It(n,c,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:n})),g.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===n)return this.fire(new l.j(new Error(`Source "${n}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],c.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,c){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const p=this.sourceCaches[n].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,c,p={}){this._checkLoaded();const g=n.id;if(this.getLayer(g))return void this.fire(new l.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(n.type==="custom"){if(Fs(this,l.aE(n)))return;_=l.aB(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(g,n.source),n=l.aC(n),n=l.e(n,{source:g})),this._validate(l.x.layer,`layers.${g}`,n,{arrayIndex:-1},p))return;_=l.aB(n),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const A=c?this._order.indexOf(c):this._order.length;if(c&&A===-1)this.fire(new l.j(new Error(`Cannot add layer "${g}" before non-existing layer "${c}".`)));else{if(this._order.splice(A,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(n,c){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new l.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===c)return;const p=this._order.indexOf(n);this._order.splice(p,1);const g=c?this._order.indexOf(c):this._order.length;c&&g===-1?this.fire(new l.j(new Error(`Cannot move layer "${n}" before non-existing layer "${c}".`))):(this._order.splice(g,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const c=this._layers[n];if(!c)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${n}".`)));c.setEventedParent(null);const p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=c,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],c.onRemove&&c.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,c,p){this._checkLoaded();const g=this.getLayer(n);g?g.minzoom===c&&g.maxzoom===p||(c!=null&&(g.minzoom=c),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,c,p={}){this._checkLoaded();const g=this.getLayer(n);if(g){if(!l.aF(g.filter,c))return c==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.x.filter,`layers.${g.id}.filter`,c,null,p)||(g.filter=l.aC(c),this._updateLayer(g)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return l.aC(this.getLayer(n).filter)}setLayoutProperty(n,c,p,g={}){this._checkLoaded();const _=this.getLayer(n);_?l.aF(_.getLayoutProperty(c),p)||(_.setLayoutProperty(c,p,g),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,c){const p=this.getLayer(n);if(p)return p.getLayoutProperty(c);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,c,p,g={}){this._checkLoaded();const _=this.getLayer(n);_?l.aF(_.getPaintProperty(c),p)||(_.setPaintProperty(c,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,c){return this.getLayer(n).getPaintProperty(c)}setFeatureState(n,c){this._checkLoaded();const p=n.source,g=n.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const A=_.getSource().type;A==="geojson"&&g?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||g?(n.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,n.id,c)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,c){this._checkLoaded();const p=n.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,A=_==="vector"?n.sourceLayer:void 0;_!=="vector"||A?c&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(A,n.id,c):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const c=n.source,p=n.sourceLayer,g=this.sourceCaches[c];if(g!==void 0)return g.getSource().type!=="vector"||p?(n.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,n.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=l.aG(this.sourceCaches,_=>_.serialize()),c=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return l.aH({version:g.version,name:g.name,metadata:g.metadata,light:g.light,sky:g.sky,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:n,layers:c,terrain:p},_=>_!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const c=A=>this._layers[A].type==="fill-extrusion",p={},g=[];for(let A=this._order.length-1;A>=0;A--){const k=this._order[A];if(c(k)){p[k]=A;for(const O of n){const $=O[k];if($)for(const te of $)g.push(te)}}}g.sort((A,k)=>k.intersectionZ-A.intersectionZ);const _=[];for(let A=this._order.length-1;A>=0;A--){const k=this._order[A];if(c(k))for(let O=g.length-1;O>=0;O--){const $=g[O].feature;if(p[$.layer.id]<A)break;_.push($),g.pop()}else for(const O of n){const $=O[k];if($)for(const te of $)_.push(te.feature)}}return _}queryRenderedFeatures(n,c,p){c&&c.filter&&this._validate(l.x.filter,"queryRenderedFeatures.filter",c.filter,null,c);const g={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const k of c.layers){const O=this._layers[k];if(!O)return this.fire(new l.j(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[O.source]=!0}}const _=[];c.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const k in this.sourceCaches)c.layers&&!g[k]||_.push(Wt(this.sourceCaches[k],this._layers,A,n,c,p));return this.placement&&_.push(function(k,O,$,te,Q,pe,we){const Ae={},ze=pe.queryRenderedSymbols(te),ke=[];for(const De of Object.keys(ze).map(Number))ke.push(we[De]);ke.sort(Ht);for(const De of ke){const qe=De.featureIndex.lookupSymbolFeatures(ze[De.bucketInstanceId],O,De.bucketIndex,De.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,k);for(const je in qe){const Je=Ae[je]=Ae[je]||[],rt=qe[je];rt.sort((st,mt)=>{const wt=De.featureSortOrder;if(wt){const Bt=wt.indexOf(st.featureIndex);return wt.indexOf(mt.featureIndex)-Bt}return mt.featureIndex-st.featureIndex});for(const st of rt)Je.push(st)}}for(const De in Ae)Ae[De].forEach(qe=>{const je=qe.feature,Je=$[k[De].source].getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=Je});return Ae}(this._layers,A,this.sourceCaches,n,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(n,c){c&&c.filter&&this._validate(l.x.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[n];return p?function(g,_){const A=g.getRenderableIds().map($=>g.getTileByID($)),k=[],O={};for(let $=0;$<A.length;$++){const te=A[$],Q=te.tileID.canonical.key;O[Q]||(O[Q]=!0,te.querySourceFeatures(k,_))}return k}(p,c):[]}getLight(){return this.light.getLight()}setLight(n,c={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const A in n)if(!l.aF(n[A],p[A])){g=!0;break}if(!g)return;const _={now:b.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,c),this.light.updateTransitions(_)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,c={}){const p=this.sky.getSky();let g=!1;n||p&&(g=!0);for(const A in n)if(!l.aF(n[A],p[A])){g=!0;break}if(!g)return;const _={now:b.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,c),this.sky.updateTransitions(_)}_validate(n,c,p,g,_={}){return(!_||_.validate!==!1)&&Fs(this,n.call(l.x,l.e({key:c,style:this.serialize(),value:p,styleSpec:l.v},g)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ve().off(M,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const c in this.sourceCaches)this.sourceCaches[c].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,c,p,g,_=!1){let A=!1,k=!1;const O={};for(const $ of this._order){const te=this._layers[$];if(te.type!=="symbol")continue;if(!O[te.source]){const pe=this.sourceCaches[te.source];O[te.source]=pe.getRenderableIds(!0).map(we=>pe.getTileByID(we)).sort((we,Ae)=>Ae.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(Ae.tileID)?-1:1))}const Q=this.crossTileSymbolIndex.addLayer(te,O[te.source],n.center.lng);A=A||Q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),n.zoom))&&(this.pauseablePlacement=new bn(n,this.map.terrain,this._order,_,c,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),k=!0),A&&this.pauseablePlacement.placement.setStale()),k||A)for(const $ of this._order){const te=this._layers[$];te.type==="symbol"&&this.placement.updateLayerOpacities(te,O[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,c){return l._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[c.source];return g&&g.setDependencies(c.tileID.key,c.type,c.icons),p})}getGlyphs(n,c){return l._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),g=this.sourceCaches[c.source];return g&&g.setDependencies(c.tileID.key,c.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,c={}){this._checkLoaded(),n&&this._validate(l.x.glyphs,"glyphs",n,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,c,p={},g){this._checkLoaded();const _=[{id:n,url:c}],A=[...B(this.stylesheet.sprite),..._];this._validate(l.x.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(_,!0,g))}removeSprite(n){this._checkLoaded();const c=B(this.stylesheet.sprite);if(c.find(p=>p.id===n)){if(this._spritesImagesIds[n])for(const p of this._spritesImagesIds[n])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===n),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return B(this.stylesheet.sprite)}setSprite(n,c={},p){this._checkLoaded(),n&&this._validate(l.x.sprite,"sprite",n,null,c)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,p):(this._unloadSprite(),p&&p(null)))}}var Rs=l.Y([{name:"a_pos",type:"Int16",components:2}]);const ra={prelude:Ir(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ir(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ir(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ir(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ir("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ir(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ir(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ir("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ir("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ir("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ir(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ir(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ir(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ir(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ir(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ir(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ir(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ir(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ir(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ir(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ir(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ir(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ir(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ir(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ir(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ir(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ir("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ir("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ir("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Ir("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ir(v,n){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=n.match(/attribute ([\w]+) ([\w]+)/g),g=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=_?_.concat(g):g,k={};return{fragmentSource:v=v.replace(c,(O,$,te,Q,pe)=>(k[pe]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
varying ${te} ${Q} ${pe};
#else
uniform ${te} ${Q} u_${pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pe}
    ${te} ${Q} ${pe} = u_${pe};
#endif
`)),vertexSource:n=n.replace(c,(O,$,te,Q,pe)=>{const we=Q==="float"?"vec2":"vec4",Ae=pe.match(/color/)?"color":we;return k[pe]?$==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${te} ${we} a_${pe};
varying ${te} ${Q} ${pe};
#else
uniform ${te} ${Q} u_${pe};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${te} ${Q} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Ae}(a_${pe}, u_${pe}_t);
#else
    ${te} ${Q} ${pe} = u_${pe};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${te} ${we} a_${pe};
#else
uniform ${te} ${Q} u_${pe};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${te} ${Q} ${pe} = a_${pe};
#else
    ${te} ${Q} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${te} ${Q} ${pe} = unpack_mix_${Ae}(a_${pe}, u_${pe}_t);
#else
    ${te} ${Q} ${pe} = u_${pe};
#endif
`}),staticAttributes:p,staticUniforms:A}}class Sl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,c,p,g,_,A,k,O,$){this.context=n;let te=this.boundPaintVertexBuffers.length!==g.length;for(let Q=0;!te&&Q<g.length;Q++)this.boundPaintVertexBuffers[Q]!==g[Q]&&(te=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||te||this.boundIndexBuffer!==_||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==$?this.freshBind(c,p,g,_,A,k,O,$):(n.bindVertexArray.set(this.vao),k&&k.bind(),_&&_.dynamicDraw&&_.bind(),O&&O.bind(),$&&$.bind())}freshBind(n,c,p,g,_,A,k,O){const $=n.numAttributes,te=this.context,Q=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=O,c.enableAttributes(Q,n);for(const pe of p)pe.enableAttributes(Q,n);A&&A.enableAttributes(Q,n),k&&k.enableAttributes(Q,n),O&&O.enableAttributes(Q,n),c.bind(),c.setVertexAttribPointers(Q,n,_);for(const pe of p)pe.bind(),pe.setVertexAttribPointers(Q,n,_);A&&(A.bind(),A.setVertexAttribPointers(Q,n,_)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(Q,n,_)),O&&(O.bind(),O.setVertexAttribPointers(Q,n,_)),te.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Ou=(v,n,c,p,g)=>({u_matrix:v,u_texture:0,u_ele_delta:n,u_fog_matrix:c,u_fog_color:p?p.properties.get("fog-color"):l.aN.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(g):0,u_horizon_color:p?p.properties.get("horizon-color"):l.aN.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function Qn(v){const n=[];for(let c=0;c<v.length;c++){if(v[c]===null)continue;const p=v[c].split(" ");n.push(p.pop())}return n}class El{constructor(n,c,p,g,_,A){const k=n.gl;this.program=k.createProgram();const O=Qn(c.staticAttributes),$=p?p.getBinderAttributes():[],te=O.concat($),Q=ra.prelude.staticUniforms?Qn(ra.prelude.staticUniforms):[],pe=c.staticUniforms?Qn(c.staticUniforms):[],we=p?p.getBinderUniforms():[],Ae=Q.concat(pe).concat(we),ze=[];for(const st of Ae)ze.indexOf(st)<0&&ze.push(st);const ke=p?p.defines():[];_&&ke.push("#define OVERDRAW_INSPECTOR;"),A&&ke.push("#define TERRAIN3D;");const De=ke.concat(ra.prelude.fragmentSource,c.fragmentSource).join(`
`),qe=ke.concat(ra.prelude.vertexSource,c.vertexSource).join(`
`),je=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(je,De),k.compileShader(je),!k.getShaderParameter(je,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(je)}`);k.attachShader(this.program,je);const Je=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(Je,qe),k.compileShader(Je),!k.getShaderParameter(Je,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(Je)}`);k.attachShader(this.program,Je),this.attributes={};const rt={};this.numAttributes=te.length;for(let st=0;st<this.numAttributes;st++)te[st]&&(k.bindAttribLocation(this.program,st,te[st]),this.attributes[te[st]]=st);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(Je),k.deleteShader(je);for(let st=0;st<ze.length;st++){const mt=ze[st];if(mt&&!rt[mt]){const wt=k.getUniformLocation(this.program,mt);wt&&(rt[mt]=wt)}}this.fixedUniforms=g(n,rt),this.terrainUniforms=((st,mt)=>({u_depth:new l.aI(st,mt.u_depth),u_terrain:new l.aI(st,mt.u_terrain),u_terrain_dim:new l.aJ(st,mt.u_terrain_dim),u_terrain_matrix:new l.aK(st,mt.u_terrain_matrix),u_terrain_unpack:new l.aL(st,mt.u_terrain_unpack),u_terrain_exaggeration:new l.aJ(st,mt.u_terrain_exaggeration)}))(n,rt),this.binderUniforms=p?p.getUniforms(n,rt):[]}draw(n,c,p,g,_,A,k,O,$,te,Q,pe,we,Ae,ze,ke,De,qe){const je=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(p),n.setStencilMode(g),n.setColorMode(_),n.setCullFace(A),O){n.activeTexture.set(je.TEXTURE2),je.bindTexture(je.TEXTURE_2D,O.depthTexture),n.activeTexture.set(je.TEXTURE3),je.bindTexture(je.TEXTURE_2D,O.texture);for(const rt in this.terrainUniforms)this.terrainUniforms[rt].set(O[rt])}for(const rt in this.fixedUniforms)this.fixedUniforms[rt].set(k[rt]);ze&&ze.setUniforms(n,this.binderUniforms,we,{zoom:Ae});let Je=0;switch(c){case je.LINES:Je=2;break;case je.TRIANGLES:Je=3;break;case je.LINE_STRIP:Je=1}for(const rt of pe.get()){const st=rt.vaos||(rt.vaos={});(st[$]||(st[$]=new Sl)).bind(n,this,te,ze?ze.getPaintVertexBuffers():[],Q,rt.vertexOffset,ke,De,qe),je.drawElements(c,rt.primitiveLength*Je,je.UNSIGNED_SHORT,rt.primitiveOffset*Je*2)}}}function Tl(v,n,c){const p=1/hr(c,1,n.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,n.transform.tileZoom)/g,A=_*(c.tileID.canonical.x+c.tileID.wrap*g),k=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[A>>16,k>>16],u_pixel_coord_lower:[65535&A,65535&k]}}const Pl=(v,n,c,p)=>{const g=n.style.light,_=g.properties.get("position"),A=[_.x,_.y,_.z],k=function(){var $=new l.A(9);return l.A!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}();g.properties.get("anchor")==="viewport"&&function($,te){var Q=Math.sin(te),pe=Math.cos(te);$[0]=pe,$[1]=Q,$[2]=0,$[3]=-Q,$[4]=pe,$[5]=0,$[6]=0,$[7]=0,$[8]=1}(k,-n.transform.angle),function($,te,Q){var pe=te[0],we=te[1],Ae=te[2];$[0]=pe*Q[0]+we*Q[3]+Ae*Q[6],$[1]=pe*Q[1]+we*Q[4]+Ae*Q[7],$[2]=pe*Q[2]+we*Q[5]+Ae*Q[8]}(A,A,k);const O=g.properties.get("color");return{u_matrix:v,u_lightpos:A,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+c,u_opacity:p}},Al=(v,n,c,p,g,_,A)=>l.e(Pl(v,n,c,p),Tl(_,n,A),{u_height_factor:-Math.pow(2,g.overscaledZ)/A.tileSize/8}),js=v=>({u_matrix:v}),Sa=(v,n,c,p)=>l.e(js(v),Tl(c,n,p)),Fu=(v,n)=>({u_matrix:v,u_world:n}),Oc=(v,n,c,p,g)=>l.e(Sa(v,n,c,p),{u_world:g}),zs=(v,n,c,p)=>{const g=v.transform;let _,A;if(p.paint.get("circle-pitch-alignment")==="map"){const k=hr(c,1,g.zoom);_=!0,A=[k,k]}else _=!1,A=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(n.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:A}},If=(v,n,c)=>({u_matrix:v,u_inv_matrix:n,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),bi=(v,n,c=1)=>({u_matrix:v,u_color:n,u_overlay:0,u_overlay_scale:c}),Ls=v=>({u_matrix:v}),Si=(v,n,c,p)=>({u_matrix:v,u_extrude_scale:hr(n,1,c),u_intensity:p});function Ei(v,n){const c=Math.pow(2,n.canonical.z),p=n.canonical.y;return[new l.Z(0,p/c).toLngLat().lat,new l.Z(0,(p+1)/c).toLngLat().lat]}const Bs=(v,n,c,p)=>{const g=v.transform;return{u_matrix:Il(v,n,c,p),u_ratio:1/hr(n,1,g.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Ds=(v,n,c,p,g)=>l.e(Bs(v,n,c,g),{u_image:0,u_image_height:p}),Fc=(v,n,c,p,g)=>{const _=v.transform,A=Ea(n,_);return{u_matrix:Il(v,n,c,g),u_texsize:n.imageAtlasTexture.size,u_ratio:1/hr(n,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[A,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Rc=(v,n,c,p,g,_)=>{const A=v.lineAtlas,k=Ea(n,v.transform),O=c.layout.get("line-cap")==="round",$=A.getDash(p.from,O),te=A.getDash(p.to,O),Q=$.width*g.fromScale,pe=te.width*g.toScale;return l.e(Bs(v,n,c,_),{u_patternscale_a:[k/Q,-$.height/2],u_patternscale_b:[k/pe,-te.height/2],u_sdfgamma:A.width/(256*Math.min(Q,pe)*v.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:te.y,u_mix:g.t})};function Ea(v,n){return 1/hr(v,1,n.tileZoom)}function Il(v,n,c,p){return v.translatePosMatrix(p?p.posMatrix:n.tileID.posMatrix,n,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Cf=(v,n,c,p,g)=>{return{u_matrix:v,u_tl_parent:n,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(A=g.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:kf(g.paint.get("raster-hue-rotate"))};var _,A};function kf(v){v*=Math.PI/180;const n=Math.sin(v),c=Math.cos(v);return[(2*c+1)/3,(-Math.sqrt(3)*n-c+1)/3,(Math.sqrt(3)*n-c+1)/3]}const jc=(v,n,c,p,g,_,A,k,O,$,te,Q,pe,we)=>{const Ae=A.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_pitch:Ae.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_matrix:k,u_label_plane_matrix:O,u_coord_matrix:$,u_is_text:+Q,u_pitch_with_map:+p,u_is_along_line:g,u_is_variable_anchor:_,u_texsize:pe,u_texture:0,u_translation:te,u_pitched_scale:we}},zc=(v,n,c,p,g,_,A,k,O,$,te,Q,pe,we,Ae)=>{const ze=A.transform;return l.e(jc(v,n,c,p,g,_,A,k,O,$,te,Q,pe,Ae),{u_gamma_scale:p?Math.cos(ze._pitch)*ze.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:+we})},Lc=(v,n,c,p,g,_,A,k,O,$,te,Q,pe,we)=>l.e(zc(v,n,c,p,g,_,A,k,O,$,te,!0,Q,!0,we),{u_texsize_icon:pe,u_texture_icon:1}),Cl=(v,n,c)=>({u_matrix:v,u_opacity:n,u_color:c}),kl=(v,n,c,p,g,_)=>l.e(function(A,k,O,$){const te=O.imageManager.getPattern(A.from.toString()),Q=O.imageManager.getPattern(A.to.toString()),{width:pe,height:we}=O.imageManager.getPixelSize(),Ae=Math.pow(2,$.tileID.overscaledZ),ze=$.tileSize*Math.pow(2,O.transform.tileZoom)/Ae,ke=ze*($.tileID.canonical.x+$.tileID.wrap*Ae),De=ze*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[pe,we],u_mix:k.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/hr($,1,O.transform.tileZoom),u_pixel_coord_upper:[ke>>16,De>>16],u_pixel_coord_lower:[65535&ke,65535&De]}}(p,_,c,g),{u_matrix:v,u_opacity:n}),Ml={fillExtrusion:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_lightpos:new l.aO(v,n.u_lightpos),u_lightintensity:new l.aJ(v,n.u_lightintensity),u_lightcolor:new l.aO(v,n.u_lightcolor),u_vertical_gradient:new l.aJ(v,n.u_vertical_gradient),u_opacity:new l.aJ(v,n.u_opacity)}),fillExtrusionPattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_lightpos:new l.aO(v,n.u_lightpos),u_lightintensity:new l.aJ(v,n.u_lightintensity),u_lightcolor:new l.aO(v,n.u_lightcolor),u_vertical_gradient:new l.aJ(v,n.u_vertical_gradient),u_height_factor:new l.aJ(v,n.u_height_factor),u_image:new l.aI(v,n.u_image),u_texsize:new l.aP(v,n.u_texsize),u_pixel_coord_upper:new l.aP(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.aP(v,n.u_pixel_coord_lower),u_scale:new l.aO(v,n.u_scale),u_fade:new l.aJ(v,n.u_fade),u_opacity:new l.aJ(v,n.u_opacity)}),fill:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix)}),fillPattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_image:new l.aI(v,n.u_image),u_texsize:new l.aP(v,n.u_texsize),u_pixel_coord_upper:new l.aP(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.aP(v,n.u_pixel_coord_lower),u_scale:new l.aO(v,n.u_scale),u_fade:new l.aJ(v,n.u_fade)}),fillOutline:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_world:new l.aP(v,n.u_world)}),fillOutlinePattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_world:new l.aP(v,n.u_world),u_image:new l.aI(v,n.u_image),u_texsize:new l.aP(v,n.u_texsize),u_pixel_coord_upper:new l.aP(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.aP(v,n.u_pixel_coord_lower),u_scale:new l.aO(v,n.u_scale),u_fade:new l.aJ(v,n.u_fade)}),circle:(v,n)=>({u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_scale_with_map:new l.aI(v,n.u_scale_with_map),u_pitch_with_map:new l.aI(v,n.u_pitch_with_map),u_extrude_scale:new l.aP(v,n.u_extrude_scale),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_matrix:new l.aK(v,n.u_matrix)}),collisionBox:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_pixel_extrude_scale:new l.aP(v,n.u_pixel_extrude_scale)}),collisionCircle:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_inv_matrix:new l.aK(v,n.u_inv_matrix),u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_viewport_size:new l.aP(v,n.u_viewport_size)}),debug:(v,n)=>({u_color:new l.aM(v,n.u_color),u_matrix:new l.aK(v,n.u_matrix),u_overlay:new l.aI(v,n.u_overlay),u_overlay_scale:new l.aJ(v,n.u_overlay_scale)}),clippingMask:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix)}),heatmap:(v,n)=>({u_extrude_scale:new l.aJ(v,n.u_extrude_scale),u_intensity:new l.aJ(v,n.u_intensity),u_matrix:new l.aK(v,n.u_matrix)}),heatmapTexture:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_world:new l.aP(v,n.u_world),u_image:new l.aI(v,n.u_image),u_color_ramp:new l.aI(v,n.u_color_ramp),u_opacity:new l.aJ(v,n.u_opacity)}),hillshade:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_image:new l.aI(v,n.u_image),u_latrange:new l.aP(v,n.u_latrange),u_light:new l.aP(v,n.u_light),u_shadow:new l.aM(v,n.u_shadow),u_highlight:new l.aM(v,n.u_highlight),u_accent:new l.aM(v,n.u_accent)}),hillshadePrepare:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_image:new l.aI(v,n.u_image),u_dimension:new l.aP(v,n.u_dimension),u_zoom:new l.aJ(v,n.u_zoom),u_unpack:new l.aL(v,n.u_unpack)}),line:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_ratio:new l.aJ(v,n.u_ratio),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_units_to_pixels:new l.aP(v,n.u_units_to_pixels)}),lineGradient:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_ratio:new l.aJ(v,n.u_ratio),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_units_to_pixels:new l.aP(v,n.u_units_to_pixels),u_image:new l.aI(v,n.u_image),u_image_height:new l.aJ(v,n.u_image_height)}),linePattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_texsize:new l.aP(v,n.u_texsize),u_ratio:new l.aJ(v,n.u_ratio),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_image:new l.aI(v,n.u_image),u_units_to_pixels:new l.aP(v,n.u_units_to_pixels),u_scale:new l.aO(v,n.u_scale),u_fade:new l.aJ(v,n.u_fade)}),lineSDF:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_ratio:new l.aJ(v,n.u_ratio),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_units_to_pixels:new l.aP(v,n.u_units_to_pixels),u_patternscale_a:new l.aP(v,n.u_patternscale_a),u_patternscale_b:new l.aP(v,n.u_patternscale_b),u_sdfgamma:new l.aJ(v,n.u_sdfgamma),u_image:new l.aI(v,n.u_image),u_tex_y_a:new l.aJ(v,n.u_tex_y_a),u_tex_y_b:new l.aJ(v,n.u_tex_y_b),u_mix:new l.aJ(v,n.u_mix)}),raster:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_tl_parent:new l.aP(v,n.u_tl_parent),u_scale_parent:new l.aJ(v,n.u_scale_parent),u_buffer_scale:new l.aJ(v,n.u_buffer_scale),u_fade_t:new l.aJ(v,n.u_fade_t),u_opacity:new l.aJ(v,n.u_opacity),u_image0:new l.aI(v,n.u_image0),u_image1:new l.aI(v,n.u_image1),u_brightness_low:new l.aJ(v,n.u_brightness_low),u_brightness_high:new l.aJ(v,n.u_brightness_high),u_saturation_factor:new l.aJ(v,n.u_saturation_factor),u_contrast_factor:new l.aJ(v,n.u_contrast_factor),u_spin_weights:new l.aO(v,n.u_spin_weights)}),symbolIcon:(v,n)=>({u_is_size_zoom_constant:new l.aI(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aI(v,n.u_is_size_feature_constant),u_size_t:new l.aJ(v,n.u_size_t),u_size:new l.aJ(v,n.u_size),u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_pitch:new l.aJ(v,n.u_pitch),u_rotate_symbol:new l.aI(v,n.u_rotate_symbol),u_aspect_ratio:new l.aJ(v,n.u_aspect_ratio),u_fade_change:new l.aJ(v,n.u_fade_change),u_matrix:new l.aK(v,n.u_matrix),u_label_plane_matrix:new l.aK(v,n.u_label_plane_matrix),u_coord_matrix:new l.aK(v,n.u_coord_matrix),u_is_text:new l.aI(v,n.u_is_text),u_pitch_with_map:new l.aI(v,n.u_pitch_with_map),u_is_along_line:new l.aI(v,n.u_is_along_line),u_is_variable_anchor:new l.aI(v,n.u_is_variable_anchor),u_texsize:new l.aP(v,n.u_texsize),u_texture:new l.aI(v,n.u_texture),u_translation:new l.aP(v,n.u_translation),u_pitched_scale:new l.aJ(v,n.u_pitched_scale)}),symbolSDF:(v,n)=>({u_is_size_zoom_constant:new l.aI(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aI(v,n.u_is_size_feature_constant),u_size_t:new l.aJ(v,n.u_size_t),u_size:new l.aJ(v,n.u_size),u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_pitch:new l.aJ(v,n.u_pitch),u_rotate_symbol:new l.aI(v,n.u_rotate_symbol),u_aspect_ratio:new l.aJ(v,n.u_aspect_ratio),u_fade_change:new l.aJ(v,n.u_fade_change),u_matrix:new l.aK(v,n.u_matrix),u_label_plane_matrix:new l.aK(v,n.u_label_plane_matrix),u_coord_matrix:new l.aK(v,n.u_coord_matrix),u_is_text:new l.aI(v,n.u_is_text),u_pitch_with_map:new l.aI(v,n.u_pitch_with_map),u_is_along_line:new l.aI(v,n.u_is_along_line),u_is_variable_anchor:new l.aI(v,n.u_is_variable_anchor),u_texsize:new l.aP(v,n.u_texsize),u_texture:new l.aI(v,n.u_texture),u_gamma_scale:new l.aJ(v,n.u_gamma_scale),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_is_halo:new l.aI(v,n.u_is_halo),u_translation:new l.aP(v,n.u_translation),u_pitched_scale:new l.aJ(v,n.u_pitched_scale)}),symbolTextAndIcon:(v,n)=>({u_is_size_zoom_constant:new l.aI(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aI(v,n.u_is_size_feature_constant),u_size_t:new l.aJ(v,n.u_size_t),u_size:new l.aJ(v,n.u_size),u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_pitch:new l.aJ(v,n.u_pitch),u_rotate_symbol:new l.aI(v,n.u_rotate_symbol),u_aspect_ratio:new l.aJ(v,n.u_aspect_ratio),u_fade_change:new l.aJ(v,n.u_fade_change),u_matrix:new l.aK(v,n.u_matrix),u_label_plane_matrix:new l.aK(v,n.u_label_plane_matrix),u_coord_matrix:new l.aK(v,n.u_coord_matrix),u_is_text:new l.aI(v,n.u_is_text),u_pitch_with_map:new l.aI(v,n.u_pitch_with_map),u_is_along_line:new l.aI(v,n.u_is_along_line),u_is_variable_anchor:new l.aI(v,n.u_is_variable_anchor),u_texsize:new l.aP(v,n.u_texsize),u_texsize_icon:new l.aP(v,n.u_texsize_icon),u_texture:new l.aI(v,n.u_texture),u_texture_icon:new l.aI(v,n.u_texture_icon),u_gamma_scale:new l.aJ(v,n.u_gamma_scale),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_is_halo:new l.aI(v,n.u_is_halo),u_translation:new l.aP(v,n.u_translation),u_pitched_scale:new l.aJ(v,n.u_pitched_scale)}),background:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_opacity:new l.aJ(v,n.u_opacity),u_color:new l.aM(v,n.u_color)}),backgroundPattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_opacity:new l.aJ(v,n.u_opacity),u_image:new l.aI(v,n.u_image),u_pattern_tl_a:new l.aP(v,n.u_pattern_tl_a),u_pattern_br_a:new l.aP(v,n.u_pattern_br_a),u_pattern_tl_b:new l.aP(v,n.u_pattern_tl_b),u_pattern_br_b:new l.aP(v,n.u_pattern_br_b),u_texsize:new l.aP(v,n.u_texsize),u_mix:new l.aJ(v,n.u_mix),u_pattern_size_a:new l.aP(v,n.u_pattern_size_a),u_pattern_size_b:new l.aP(v,n.u_pattern_size_b),u_scale_a:new l.aJ(v,n.u_scale_a),u_scale_b:new l.aJ(v,n.u_scale_b),u_pixel_coord_upper:new l.aP(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.aP(v,n.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aJ(v,n.u_tile_units_to_pixels)}),terrain:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_texture:new l.aI(v,n.u_texture),u_ele_delta:new l.aJ(v,n.u_ele_delta),u_fog_matrix:new l.aK(v,n.u_fog_matrix),u_fog_color:new l.aM(v,n.u_fog_color),u_fog_ground_blend:new l.aJ(v,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aJ(v,n.u_fog_ground_blend_opacity),u_horizon_color:new l.aM(v,n.u_horizon_color),u_horizon_fog_blend:new l.aJ(v,n.u_horizon_fog_blend)}),terrainDepth:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_ele_delta:new l.aJ(v,n.u_ele_delta)}),terrainCoords:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_texture:new l.aI(v,n.u_texture),u_terrain_coords_id:new l.aJ(v,n.u_terrain_coords_id),u_ele_delta:new l.aJ(v,n.u_ele_delta)}),sky:(v,n)=>({u_sky_color:new l.aM(v,n.u_sky_color),u_horizon_color:new l.aM(v,n.u_horizon_color),u_horizon:new l.aJ(v,n.u_horizon),u_sky_horizon_blend:new l.aJ(v,n.u_sky_horizon_blend)})};class Ru{constructor(n,c,p){this.context=n;const g=n.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ol={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ho{constructor(n,c,p,g){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=g,this.context=n;const _=n.gl;this.buffer=_.createBuffer(),n.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,c){for(let p=0;p<this.attributes.length;p++){const g=c.attributes[this.attributes[p].name];g!==void 0&&n.enableVertexAttribArray(g)}}setVertexAttribPointers(n,c,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],A=c.attributes[_.name];A!==void 0&&n.vertexAttribPointer(A,_.components,n[Ol[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ju=new WeakMap;function Ja(v){var n;if(ju.has(v))return ju.get(v);{const c=(n=v.getParameter(v.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return ju.set(v,c),c}}class Cr{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ya extends Cr{getDefault(){return l.aN.transparent}set(n){const c=this.current;(n.r!==c.r||n.g!==c.g||n.b!==c.b||n.a!==c.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Mf extends Cr{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Qa extends Cr{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Of extends Cr{getDefault(){return[!0,!0,!0,!0]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||n[3]!==c[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class es extends Cr{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Ff extends Cr{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Bc extends Cr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const c=this.current;(n.func!==c.func||n.ref!==c.ref||n.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Rf extends Cr{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Dc extends Cr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=n,this.dirty=!1}}class Fl extends Cr{getDefault(){return[0,1]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Rl extends Cr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=n,this.dirty=!1}}class Nc extends Cr{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class $c extends Cr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.BLEND):c.disable(c.BLEND),this.current=n,this.dirty=!1}}class Uc extends Cr{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ta extends Cr{getDefault(){return l.aN.transparent}set(n){const c=this.current;(n.r!==c.r||n.g!==c.g||n.b!==c.b||n.a!==c.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class zu extends Cr{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class jf extends Cr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=n,this.dirty=!1}}class zf extends Cr{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Vc extends Cr{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Ns extends Cr{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class jl extends Cr{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class zl extends Cr{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||n[3]!==c[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class ts extends Cr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Gc extends Cr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Yi extends Cr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Wc extends Cr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Hc extends Cr{getDefault(){return null}set(n){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Lu extends Cr{getDefault(){return null}set(n){var c;if(n===this.current&&!this.dirty)return;const p=this.gl;Ja(p)?p.bindVertexArray(n):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Zc extends Cr{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class rs extends Cr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class To extends Cr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class na extends Cr{constructor(n,c){super(n),this.context=n,this.parent=c}getDefault(){return null}}class Bu extends na{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Du extends na{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class $s extends na{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ll{constructor(n,c,p,g,_){this.context=n,this.width=c,this.height=p;const A=n.gl,k=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Bu(n,k),g)this.depthAttachment=_?new $s(n,k):new Du(n,k);else if(_)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,c=this.colorAttachment.get();if(c&&n.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&n.deleteRenderbuffer(p)}n.deleteFramebuffer(this.framebuffer)}}class Wr{constructor(n,c,p){this.blendFunction=n,this.blendColor=c,this.mask=p}}Wr.Replace=[1,0],Wr.disabled=new Wr(Wr.Replace,l.aN.transparent,[!1,!1,!1,!1]),Wr.unblended=new Wr(Wr.Replace,l.aN.transparent,[!0,!0,!0,!0]),Wr.alphaBlended=new Wr([1,771],l.aN.transparent,[!0,!0,!0,!0]);class Nu{constructor(n){var c,p;if(this.gl=n,this.clearColor=new Ya(this),this.clearDepth=new Mf(this),this.clearStencil=new Qa(this),this.colorMask=new Of(this),this.depthMask=new es(this),this.stencilMask=new Ff(this),this.stencilFunc=new Bc(this),this.stencilOp=new Rf(this),this.stencilTest=new Dc(this),this.depthRange=new Fl(this),this.depthTest=new Rl(this),this.depthFunc=new Nc(this),this.blend=new $c(this),this.blendFunc=new Uc(this),this.blendColor=new Ta(this),this.blendEquation=new zu(this),this.cullFace=new jf(this),this.cullFaceSide=new zf(this),this.frontFace=new Vc(this),this.program=new Ns(this),this.activeTexture=new jl(this),this.viewport=new zl(this),this.bindFramebuffer=new ts(this),this.bindRenderbuffer=new Gc(this),this.bindTexture=new Yi(this),this.bindVertexBuffer=new Wc(this),this.bindElementBuffer=new Hc(this),this.bindVertexArray=new Lu(this),this.pixelStoreUnpack=new Zc(this),this.pixelStoreUnpackPremultiplyAlpha=new rs(this),this.pixelStoreUnpackFlipY=new To(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Ja(n)){this.HALF_FLOAT=n.HALF_FLOAT;const g=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=n.RGBA16F)!==null&&c!==void 0?c:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=n.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const g=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,c){return new Ru(this,n,c)}createVertexBuffer(n,c,p){return new ho(this,n,c,p)}createRenderbuffer(n,c,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,n,c,p),this.bindRenderbuffer.set(null),_}createFramebuffer(n,c,p,g){return new Ll(this,n,c,p,g)}clear({color:n,depth:c,stencil:p}){const g=this.gl;let _=0;n&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){l.aF(n.blendFunction,Wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Ja(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var c;return Ja(this.gl)?this.gl.deleteVertexArray(n):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class br{constructor(n,c,p){this.func=n,this.mask=c,this.range=p}}br.ReadOnly=!1,br.ReadWrite=!0,br.disabled=new br(519,br.ReadOnly,[0,1]);const ns=7680;class Br{constructor(n,c,p,g,_,A){this.test=n,this.ref=c,this.mask=p,this.fail=g,this.depthFail=_,this.pass=A}}Br.disabled=new Br({func:519,mask:0},0,0,ns,ns,ns);class Kr{constructor(n,c,p){this.enable=n,this.mode=c,this.frontFace=p}}let is;function Us(v,n,c,p,g){const _=v.context,A=_.gl,k=v.useProgram("collisionBox"),O=[];let $=0,te=0;for(let De=0;De<p.length;De++){const qe=p[De],je=n.getTile(qe).getBucket(c);if(!je)continue;const Je=g?je.textCollisionBox:je.iconCollisionBox,rt=je.collisionCircleArray;if(rt.length>0){const st=l.H();l.aR(st,je.placementInvProjMatrix,v.transform.glCoordMatrix),l.aR(st,st,je.placementViewportMatrix),O.push({circleArray:rt,circleOffset:te,transform:qe.posMatrix,invTransform:st,coord:qe}),$+=rt.length/4,te=$}Je&&k.draw(_,A.LINES,br.disabled,Br.disabled,v.colorModeForRenderPass(),Kr.disabled,{u_matrix:qe.posMatrix,u_pixel_extrude_scale:[1/(Q=v.transform).width,1/Q.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(qe),c.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,v.transform.zoom,null,null,Je.collisionVertexBuffer)}var Q;if(!g||!O.length)return;const pe=v.useProgram("collisionCircle"),we=new l.aS;we.resize(4*$),we._trim();let Ae=0;for(const De of O)for(let qe=0;qe<De.circleArray.length/4;qe++){const je=4*qe,Je=De.circleArray[je+0],rt=De.circleArray[je+1],st=De.circleArray[je+2],mt=De.circleArray[je+3];we.emplace(Ae++,Je,rt,st,mt,0),we.emplace(Ae++,Je,rt,st,mt,1),we.emplace(Ae++,Je,rt,st,mt,2),we.emplace(Ae++,Je,rt,st,mt,3)}(!is||is.length<2*$)&&(is=function(De){const qe=2*De,je=new l.aU;je.resize(qe),je._trim();for(let Je=0;Je<qe;Je++){const rt=6*Je;je.uint16[rt+0]=4*Je+0,je.uint16[rt+1]=4*Je+1,je.uint16[rt+2]=4*Je+2,je.uint16[rt+3]=4*Je+2,je.uint16[rt+4]=4*Je+3,je.uint16[rt+5]=4*Je+0}return je}($));const ze=_.createIndexBuffer(is,!0),ke=_.createVertexBuffer(we,l.aT.members,!0);for(const De of O){const qe=If(De.transform,De.invTransform,v.transform);pe.draw(_,A.TRIANGLES,br.disabled,Br.disabled,v.colorModeForRenderPass(),Kr.disabled,qe,v.style.map.terrain&&v.style.map.terrain.getTerrainData(De.coord),c.id,ke,ze,l.a0.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,v.transform.zoom,null,null,null)}ke.destroy(),ze.destroy()}Kr.disabled=new Kr(!1,1029,2305),Kr.backCCW=new Kr(!0,1029,2305);const $u=l.ao(new Float32Array(16));function Po(v,n,c,p,g,_){const{horizontalAlign:A,verticalAlign:k}=l.av(v);return new l.P((-(A-.5)*n/g+p[0])*_,(-(k-.5)*c/g+p[1])*_)}function Ao(v,n,c,p,g,_){const A=n.tileAnchorPoint.add(new l.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let k=p.mult(_);return c||(k=k.rotate(-g)),Oe(A.add(k),n.labelPlaneMatrix,n.getElevation).point}if(c){const k=at(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(v),O=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return v.add(p.rotate(O))}return v.add(p)}function zn(v,n,c,p,g,_,A,k,O,$,te,Q,pe,we){const Ae=v.text.placedSymbolArray,ze=v.text.dynamicLayoutVertexArray,ke=v.icon.dynamicLayoutVertexArray,De={};ze.clear();for(let qe=0;qe<Ae.length;qe++){const je=Ae.get(qe),Je=je.hidden||!je.crossTileID||v.allowVerticalPlacement&&!je.placedOrientation?null:p[je.crossTileID];if(Je){const rt=new l.P(je.anchorX,je.anchorY),st={getElevation:we,width:g.width,height:g.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:c,projection:te,projectionCache:null,tileAnchorPoint:rt,translation:Q,unwrappedTileID:pe},mt=c?Oe(rt,A,we):at(rt.x,rt.y,st),wt=se(g.cameraToCenterDistance,mt.signedDistanceFromCamera);let Bt=l.aj(v.textSizeData,O,je)*wt/l.aq;c&&(Bt*=v.tilePixelRatio/k);const{width:Dt,height:bt,anchor:Tt,textOffset:Gt,textBoxScale:mr}=Je,Ct=Po(Tt,Dt,bt,Gt,mr,Bt),jt=te.getPitchedTextCorrection(g,rt.add(new l.P(Q[0],Q[1])),pe),cr=Ao(mt.point,st,n,Ct,g.angle,jt),ln=v.allowVerticalPlacement&&je.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let xr=0;xr<je.numGlyphs;xr++)l.ak(ze,cr,ln);$&&je.associatedIconIndex>=0&&(De[je.associatedIconIndex]={shiftedAnchor:cr,angle:ln})}else nr(je.numGlyphs,ze)}if($){ke.clear();const qe=v.icon.placedSymbolArray;for(let je=0;je<qe.length;je++){const Je=qe.get(je);if(Je.hidden)nr(Je.numGlyphs,ke);else{const rt=De[je];if(rt)for(let st=0;st<Je.numGlyphs;st++)l.ak(ke,rt.shiftedAnchor,rt.angle);else nr(Je.numGlyphs,ke)}}v.icon.dynamicLayoutVertexBuffer.updateData(ke)}v.text.dynamicLayoutVertexBuffer.updateData(ze)}function Io(v,n,c){return c.iconsInText&&n?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function fo(v,n,c,p,g,_,A,k,O,$,te,Q){const pe=v.context,we=pe.gl,Ae=v.transform,ze=wl(),ke=k==="map",De=O==="map",qe=k!=="viewport"&&c.layout.get("symbol-placement")!=="point",je=ke&&!De&&!qe,Je=!De&&qe,rt=!c.layout.get("symbol-sort-key").isConstant();let st=!1;const mt=v.depthModeForSublayer(0,br.ReadOnly),wt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Bt=[],Dt=ze.getCircleRadiusCorrection(Ae);for(const bt of p){const Tt=n.getTile(bt),Gt=Tt.getBucket(c);if(!Gt)continue;const mr=g?Gt.text:Gt.icon;if(!mr||!mr.segments.get().length||!mr.hasVisibleVertices)continue;const Ct=mr.programConfigurations.get(c.id),jt=g||Gt.sdfIcons,cr=g?Gt.textSizeData:Gt.iconSizeData,ln=De||Ae.pitch!==0,xr=v.useProgram(Io(jt,g,Gt),Ct),Pr=l.ah(cr,Ae.zoom),un=v.style.map.terrain&&v.style.map.terrain.getTerrainData(bt);let ai,Ro,cn,Di,Ai=[0,0],si=null;if(g)Ro=Tt.glyphAtlasTexture,cn=we.LINEAR,ai=Tt.glyphAtlasTexture.size,Gt.iconsInText&&(Ai=Tt.imageAtlasTexture.size,si=Tt.imageAtlasTexture,Di=ln||v.options.rotating||v.options.zooming||cr.kind==="composite"||cr.kind==="camera"?we.LINEAR:we.NEAREST);else{const dn=c.layout.get("icon-size").constantOr(0)!==1||Gt.iconsNeedLinear;Ro=Tt.imageAtlasTexture,cn=jt||v.options.rotating||v.options.zooming||dn||ln?we.LINEAR:we.NEAREST,ai=Tt.imageAtlasTexture.size}const li=hr(Tt,1,v.transform.zoom),jo=Je?bt.posMatrix:$u,Xs=ji(jo,De,ke,v.transform,li),Jc=Wn(jo,De,ke,v.transform,li),Ul=Wn(bt.posMatrix,De,ke,v.transform,li),qs=ze.translatePosition(v.transform,Tt,_,A),Yc=wt&&Gt.hasTextData(),nd=c.layout.get("icon-text-fit")!=="none"&&Yc&&Gt.hasIconData();if(qe){const dn=v.style.map.terrain?(id,Un)=>v.style.map.terrain.getElevation(bt,id,Un):null,Gl=c.layout.get("text-rotation-alignment")==="map";xe(Gt,bt.posMatrix,v,g,Xs,Ul,De,$,Gl,ze,bt.toUnwrapped(),Ae.width,Ae.height,qs,dn)}const ei=bt.posMatrix,zo=g&&wt||nd,cs=qe||zo?$u:Xs,Vl=Jc,ui=jt&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ci;ci=jt?Gt.iconsInText?Lc(cr.kind,Pr,je,De,qe,zo,v,ei,cs,Vl,qs,ai,Ai,Dt):zc(cr.kind,Pr,je,De,qe,zo,v,ei,cs,Vl,qs,g,ai,!0,Dt):jc(cr.kind,Pr,je,De,qe,zo,v,ei,cs,Vl,qs,g,ai,Dt);const qn={program:xr,buffers:mr,uniformValues:ci,atlasTexture:Ro,atlasTextureIcon:si,atlasInterpolation:cn,atlasInterpolationIcon:Di,isSDF:jt,hasHalo:ui};if(rt&&Gt.canOverlap){st=!0;const dn=mr.segments.get();for(const Gl of dn)Bt.push({segments:new l.a0([Gl]),sortKey:Gl.sortKey,state:qn,terrainData:un})}else Bt.push({segments:mr.segments,sortKey:0,state:qn,terrainData:un})}st&&Bt.sort((bt,Tt)=>bt.sortKey-Tt.sortKey);for(const bt of Bt){const Tt=bt.state;if(pe.activeTexture.set(we.TEXTURE0),Tt.atlasTexture.bind(Tt.atlasInterpolation,we.CLAMP_TO_EDGE),Tt.atlasTextureIcon&&(pe.activeTexture.set(we.TEXTURE1),Tt.atlasTextureIcon&&Tt.atlasTextureIcon.bind(Tt.atlasInterpolationIcon,we.CLAMP_TO_EDGE)),Tt.isSDF){const Gt=Tt.uniformValues;Tt.hasHalo&&(Gt.u_is_halo=1,Co(Tt.buffers,bt.segments,c,v,Tt.program,mt,te,Q,Gt,bt.terrainData)),Gt.u_is_halo=0}Co(Tt.buffers,bt.segments,c,v,Tt.program,mt,te,Q,Tt.uniformValues,bt.terrainData)}}function Co(v,n,c,p,g,_,A,k,O,$){const te=p.context;g.draw(te,te.gl.TRIANGLES,_,A,k,Kr.disabled,O,$,c.id,v.layoutVertexBuffer,v.indexBuffer,n,c.paint,p.transform.zoom,v.programConfigurations.get(c.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Ti(v,n,c,p,g){if(!c||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let A=_[c.to.toString()],k=_[c.from.toString()];if(!A&&k&&(A=k),!k&&A&&(k=A),!A||!k){const O=g.getPaintProperty(n);A=_[O],k=_[O]}A&&k&&v.setConstantPatternPositions(A,k)}function os(v,n,c,p,g,_,A){const k=v.context.gl,O="fill-pattern",$=c.paint.get(O),te=$&&$.constantOr(1),Q=c.getCrossfadeParameters();let pe,we,Ae,ze,ke;A?(we=te&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=k.LINES):(we=te?"fillPattern":"fill",pe=k.TRIANGLES);const De=$.constantOr(null);for(const qe of p){const je=n.getTile(qe);if(te&&!je.patternsLoaded())continue;const Je=je.getBucket(c);if(!Je)continue;const rt=Je.programConfigurations.get(c.id),st=v.useProgram(we,rt),mt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(qe);te&&(v.context.activeTexture.set(k.TEXTURE0),je.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),rt.updatePaintBuffers(Q)),Ti(rt,O,De,je,c);const wt=mt?qe:null,Bt=v.translatePosMatrix(wt?wt.posMatrix:qe.posMatrix,je,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(A){ze=Je.indexBuffer2,ke=Je.segments2;const Dt=[k.drawingBufferWidth,k.drawingBufferHeight];Ae=we==="fillOutlinePattern"&&te?Oc(Bt,v,Q,je,Dt):Fu(Bt,Dt)}else ze=Je.indexBuffer,ke=Je.segments,Ae=te?Sa(Bt,v,Q,je):js(Bt);st.draw(v.context,pe,g,v.stencilModeForClipping(qe),_,Kr.disabled,Ae,mt,c.id,Je.layoutVertexBuffer,ze,ke,c.paint,v.transform.zoom,rt)}}function Pa(v,n,c,p,g,_,A){const k=v.context,O=k.gl,$="fill-extrusion-pattern",te=c.paint.get($),Q=te.constantOr(1),pe=c.getCrossfadeParameters(),we=c.paint.get("fill-extrusion-opacity"),Ae=te.constantOr(null);for(const ze of p){const ke=n.getTile(ze),De=ke.getBucket(c);if(!De)continue;const qe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ze),je=De.programConfigurations.get(c.id),Je=v.useProgram(Q?"fillExtrusionPattern":"fillExtrusion",je);Q&&(v.context.activeTexture.set(O.TEXTURE0),ke.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),je.updatePaintBuffers(pe)),Ti(je,$,Ae,ke,c);const rt=v.translatePosMatrix(ze.posMatrix,ke,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),st=c.paint.get("fill-extrusion-vertical-gradient"),mt=Q?Al(rt,v,st,we,ze,pe,ke):Pl(rt,v,st,we);Je.draw(k,k.gl.TRIANGLES,g,_,A,Kr.backCCW,mt,qe,c.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,c.paint,v.transform.zoom,je,v.style.map.terrain&&De.centroidVertexBuffer)}}function Pi(v,n,c,p,g,_,A){const k=v.context,O=k.gl,$=c.fbo;if(!$)return;const te=v.useProgram("hillshade"),Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(n);k.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,$.colorAttachment.get()),te.draw(k,O.TRIANGLES,g,_,A,Kr.disabled,((pe,we,Ae,ze)=>{const ke=Ae.paint.get("hillshade-shadow-color"),De=Ae.paint.get("hillshade-highlight-color"),qe=Ae.paint.get("hillshade-accent-color");let je=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=pe.transform.angle);const Je=!pe.options.moving;return{u_matrix:ze?ze.posMatrix:pe.transform.calculatePosMatrix(we.tileID.toUnwrapped(),Je),u_image:0,u_latrange:Ei(0,we.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),je],u_shadow:ke,u_highlight:De,u_accent:qe}})(v,c,p,Q?n:null),Q,p.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function zi(v,n,c,p,g,_){const A=v.context,k=A.gl,O=n.dem;if(O&&O.data){const $=O.dim,te=O.stride,Q=O.getPixels();if(A.activeTexture.set(k.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||v.getTileTexture(te),n.demTexture){const we=n.demTexture;we.update(Q,{premultiply:!1}),we.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else n.demTexture=new X(A,Q,k.RGBA,{premultiply:!1}),n.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);A.activeTexture.set(k.TEXTURE0);let pe=n.fbo;if(!pe){const we=new X(A,{width:$,height:$,data:null},k.RGBA);we.bind(k.LINEAR,k.CLAMP_TO_EDGE),pe=n.fbo=A.createFramebuffer($,$,!0,!1),pe.colorAttachment.set(we.texture)}A.bindFramebuffer.set(pe.framebuffer),A.viewport.set([0,0,$,$]),v.useProgram("hillshadePrepare").draw(A,k.TRIANGLES,p,g,_,Kr.disabled,((we,Ae)=>{const ze=Ae.stride,ke=l.H();return l.aQ(ke,0,l.X,-l.X,0,0,1),l.J(ke,ke,[0,-l.X,0]),{u_matrix:ke,u_image:1,u_dimension:[ze,ze],u_zoom:we.overscaledZ,u_unpack:Ae.getUnpackVector()}})(n.tileID,O),null,c.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Vs(v,n,c,p,g,_){const A=p.paint.get("raster-fade-duration");if(!_&&A>0){const k=b.now(),O=(k-v.timeAdded)/A,$=n?(k-n.timeAdded)/A:-1,te=c.getSource(),Q=g.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),pe=!n||Math.abs(n.tileID.overscaledZ-Q)>Math.abs(v.tileID.overscaledZ-Q),we=pe&&v.refreshedUponExpiration?1:l.ad(pe?O:1-$,0,1);return v.refreshedUponExpiration&&O>=1&&(v.refreshedUponExpiration=!1),n?{opacity:1,mix:1-we}:{opacity:we,mix:0}}return{opacity:1,mix:0}}const Aa=new l.aN(1,0,0,1),ia=new l.aN(0,1,0,1),Gs=new l.aN(0,0,1,1),Uu=new l.aN(1,0,1,1),Ia=new l.aN(0,1,1,1);function oa(v,n,c,p){Ca(v,0,n+c/2,v.transform.width,c,p)}function po(v,n,c,p){Ca(v,n-c/2,0,c,v.transform.height,p)}function Ca(v,n,c,p,g,_){const A=v.context,k=A.gl;k.enable(k.SCISSOR_TEST),k.scissor(n*v.pixelRatio,c*v.pixelRatio,p*v.pixelRatio,g*v.pixelRatio),A.clear({color:_}),k.disable(k.SCISSOR_TEST)}function Or(v,n,c){const p=v.context,g=p.gl,_=c.posMatrix,A=v.useProgram("debug"),k=br.disabled,O=Br.disabled,$=v.colorModeForRenderPass(),te="$debug",Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(c);p.activeTexture.set(g.TEXTURE0);const pe=n.getTileByID(c.key).latestRawTileData,we=Math.floor((pe&&pe.byteLength||0)/1024),Ae=n.getTile(c).tileSize,ze=512/Math.min(Ae,512)*(c.overscaledZ/v.transform.zoom)*.5;let ke=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ke+=` => ${c.overscaledZ}`),function(De,qe){De.initDebugOverlayCanvas();const je=De.debugOverlayCanvas,Je=De.context.gl,rt=De.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,je.width,je.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(qe,5,5),rt.strokeText(qe,5,5),De.debugOverlayTexture.update(je),De.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}(v,`${ke} ${we}kB`),A.draw(p,g.TRIANGLES,k,O,Wr.alphaBlended,Kr.disabled,bi(_,l.aN.transparent,ze),null,te,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),A.draw(p,g.LINE_STRIP,k,O,$,Kr.disabled,bi(_,l.aN.red),Q,te,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function as(v,n,c){const p=v.context,g=p.gl,_=v.colorModeForRenderPass(),A=new br(g.LEQUAL,br.ReadWrite,v.depthRangeFor3D),k=v.useProgram("terrain"),O=n.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,v.width,v.height]);for(const $ of c){const te=v.renderToTexture.getTexture($),Q=n.getTerrainData($.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,te.texture);const pe=v.transform.calculatePosMatrix($.tileID.toUnwrapped()),we=n.getMeshFrameDelta(v.transform.zoom),Ae=v.transform.calculateFogMatrix($.tileID.toUnwrapped()),ze=Ou(pe,we,Ae,v.style.sky,v.transform.pitch);k.draw(p,g.TRIANGLES,A,Br.disabled,_,Kr.backCCW,ze,Q,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class Bl{constructor(n,c,p){this.vertexBuffer=n,this.indexBuffer=c,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Vu{constructor(n,c){this.context=new Nu(n),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.ao(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=It.maxUnderzooming+It.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Sn}resize(n,c,p){if(this.width=Math.floor(n*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const n=this.context,c=new l.aX;c.emplaceBack(0,0),c.emplaceBack(l.X,0),c.emplaceBack(0,l.X),c.emplaceBack(l.X,l.X),this.tileExtentBuffer=n.createVertexBuffer(c,Rs.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const p=new l.aX;p.emplaceBack(0,0),p.emplaceBack(l.X,0),p.emplaceBack(0,l.X),p.emplaceBack(l.X,l.X),this.debugBuffer=n.createVertexBuffer(p,Rs.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const g=new l.$;g.emplaceBack(0,0,0,0),g.emplaceBack(l.X,0,l.X,0),g.emplaceBack(0,l.X,0,l.X),g.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=n.createVertexBuffer(g,D.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const _=new l.aX;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(_,Rs.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const A=new l.aZ;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(A);const k=new l.aY;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k);const O=this.context.gl;this.stencilClearMode=new Br({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const n=this.context,c=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.H();l.aQ(p,0,this.width,this.height,0,0,1),l.K(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,c.TRIANGLES,br.disabled,this.stencilClearMode,Wr.disabled,Kr.disabled,Ls(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,c){if(this.currentStencilSource===n.source||!n.isTileClipped()||!c||!c.length)return;this.currentStencilSource=n.source;const p=this.context,g=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(Wr.disabled),p.setDepthMode(br.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of c){const k=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);_.draw(p,g.TRIANGLES,br.disabled,new Br({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),Wr.disabled,Kr.disabled,Ls(A.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,c=this.context.gl;return new Br({func:c.NOTEQUAL,mask:255},n,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(n){const c=this.context.gl;return new Br({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(n){const c=this.context.gl,p=n.sort((A,k)=>k.overscaledZ-A.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const A={};for(let k=0;k<_;k++)A[k+g]=new Br({func:c.GEQUAL,mask:255},k+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=_,[A,p]}return[{[g]:Br.disabled},p]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Wr([n.CONSTANT_COLOR,n.ONE],new l.aN(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Wr.unblended:Wr.alphaBlended}depthModeForSublayer(n,c,p){if(!this.opaquePassEnabledForLayer())return br.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new br(p||this.context.gl.LEQUAL,c,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,c){this.style=n,this.options=c,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},A={},k={};for(const O in g){const $=g[O];$.used&&$.prepare(this.context),_[O]=$.getVisibleCoordinates(),A[O]=_[O].slice().reverse(),k[O]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<p.length;O++)if(this.style._layers[p[O]].is3D()){this.opaquePassCutoff=O;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const O of p){const $=this.style._layers[O];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const te=A[$.source];($.type==="custom"||te.length)&&this.renderLayer(this,g[$.source],$,te)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?l.aN.black:l.aN.transparent,depth:1}),this.clearStencil(),this.style.stylesheet.sky&&function(O,$){const te=O.context,Q=te.gl,pe=((De,qe,je)=>({u_sky_color:De.properties.get("sky-color"),u_horizon_color:De.properties.get("horizon-color"),u_horizon:(qe.height/2+qe.getHorizon())*je,u_sky_horizon_blend:De.properties.get("sky-horizon-blend")*qe.height/2*je}))($,O.style.map.transform,O.pixelRatio),we=new br(Q.LEQUAL,br.ReadWrite,[0,1]),Ae=Br.disabled,ze=O.colorModeForRenderPass(),ke=O.useProgram("sky");if(!$.mesh){const De=new l.aX;De.emplaceBack(-1,-1),De.emplaceBack(1,-1),De.emplaceBack(1,1),De.emplaceBack(-1,1);const qe=new l.aY;qe.emplaceBack(0,1,2),qe.emplaceBack(0,2,3),$.mesh=new Bl(te.createVertexBuffer(De,Rs.members),te.createIndexBuffer(qe),l.a0.simpleSegment(0,0,De.length,qe.length))}ke.draw(te,Q.TRIANGLES,we,Ae,ze,Kr.disabled,pe,void 0,"sky",$.mesh.vertexBuffer,$.mesh.indexBuffer,$.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[p[this.currentLayer]],$=g[O.source],te=_[O.source];this._renderTileClippingMasks(O,te),this.renderLayer(this,$,O,te)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const O=this.style._layers[p[this.currentLayer]],$=g[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const te=(O.type==="symbol"?k:A)[O.source];this._renderTileClippingMasks(O,_[O.source]),this.renderLayer(this,$,O,te)}if(this.options.showTileBoundaries){const O=function($,te){let Q=null;const pe=Object.values($._layers).flatMap(ke=>ke.source&&!ke.isHidden(te)?[$.sourceCaches[ke.source]]:[]),we=pe.filter(ke=>ke.getSource().type==="vector"),Ae=pe.filter(ke=>ke.getSource().type!=="vector"),ze=ke=>{(!Q||Q.getSource().maxzoom<ke.getSource().maxzoom)&&(Q=ke)};return we.forEach(ke=>ze(ke)),Q||Ae.forEach(ke=>ze(ke)),Q}(this.style,this.transform.zoom);O&&function($,te,Q){for(let pe=0;pe<Q.length;pe++)Or($,te,Q[pe])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const $=O.transform.padding;oa(O,O.transform.height-($.top||0),3,Aa),oa(O,$.bottom||0,3,ia),po(O,$.left||0,3,Gs),po(O,O.transform.width-($.right||0),3,Uu);const te=O.transform.centerPoint;(function(Q,pe,we,Ae){Ca(Q,pe-1,we-10,2,20,Ae),Ca(Q,pe-10,we-1,20,2,Ae)})(O,te.x,O.transform.height-te.y,Ia)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let g=this.terrainFacilitator.dirty;g||(g=n?!l.a_(c,p):!l.a$(c,p)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(l.b0(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,A){const k=_.context,O=k.gl,$=Wr.unblended,te=new br(O.LEQUAL,br.ReadWrite,[0,1]),Q=A.getTerrainMesh(),pe=A.sourceCache.getRenderableTiles(),we=_.useProgram("terrainDepth");k.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),k.clear({color:l.aN.transparent,depth:1});for(const Ae of pe){const ze=A.getTerrainData(Ae.tileID),ke={u_matrix:_.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_ele_delta:A.getMeshFrameDelta(_.transform.zoom)};we.draw(k,O.TRIANGLES,te,Br.disabled,$,Kr.backCCW,ke,ze,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,A){const k=_.context,O=k.gl,$=Wr.unblended,te=new br(O.LEQUAL,br.ReadWrite,[0,1]),Q=A.getTerrainMesh(),pe=A.getCoordsTexture(),we=A.sourceCache.getRenderableTiles(),Ae=_.useProgram("terrainCoords");k.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),k.clear({color:l.aN.transparent,depth:1}),A.coordsIndex=[];for(const ze of we){const ke=A.getTerrainData(ze.tileID);k.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,pe.texture);const De={u_matrix:_.transform.calculatePosMatrix(ze.tileID.toUnwrapped()),u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(_.transform.zoom)};Ae.draw(k,O.TRIANGLES,te,Br.disabled,$,Kr.backCCW,De,ke,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),A.coordsIndex.push(ze.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(n,c,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,A,k,O,$){if(_.renderPass!=="translucent")return;const te=Br.disabled,Q=_.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pe,we,Ae,ze,ke,De,qe,je,Je){const rt=we.transform,st=wl(),mt=ke==="map",wt=De==="map";for(const Bt of pe){const Dt=ze.getTile(Bt),bt=Dt.getBucket(Ae);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const Tt=l.ah(bt.textSizeData,rt.zoom),Gt=hr(Dt,1,we.transform.zoom),mr=ji(Bt.posMatrix,wt,mt,we.transform,Gt),Ct=Ae.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(Tt){const jt=Math.pow(2,rt.zoom-Dt.tileID.overscaledZ),cr=we.style.map.terrain?(xr,Pr)=>we.style.map.terrain.getElevation(Bt,xr,Pr):null,ln=st.translatePosition(rt,Dt,qe,je);zn(bt,mt,wt,Je,rt,mr,Bt.posMatrix,jt,Tt,Ct,st,ln,Bt.toUnwrapped(),cr)}}}(O,_,k,A,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),$),k.paint.get("icon-opacity").constantOr(1)!==0&&fo(_,A,k,O,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),te,Q),k.paint.get("text-opacity").constantOr(1)!==0&&fo(_,A,k,O,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),te,Q),A.map.showCollisionBoxes&&(Us(_,A,k,O,!0),Us(_,A,k,O,!1))})(n,c,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,A,k,O){if(_.renderPass!=="translucent")return;const $=k.paint.get("circle-opacity"),te=k.paint.get("circle-stroke-width"),Q=k.paint.get("circle-stroke-opacity"),pe=!k.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(te.constantOr(1)===0||Q.constantOr(1)===0))return;const we=_.context,Ae=we.gl,ze=_.depthModeForSublayer(0,br.ReadOnly),ke=Br.disabled,De=_.colorModeForRenderPass(),qe=[];for(let je=0;je<O.length;je++){const Je=O[je],rt=A.getTile(Je),st=rt.getBucket(k);if(!st)continue;const mt=st.programConfigurations.get(k.id),wt=_.useProgram("circle",mt),Bt=st.layoutVertexBuffer,Dt=st.indexBuffer,bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Je),Tt={programConfiguration:mt,program:wt,layoutVertexBuffer:Bt,indexBuffer:Dt,uniformValues:zs(_,Je,rt,k),terrainData:bt};if(pe){const Gt=st.segments.get();for(const mr of Gt)qe.push({segments:new l.a0([mr]),sortKey:mr.sortKey,state:Tt})}else qe.push({segments:st.segments,sortKey:0,state:Tt})}pe&&qe.sort((je,Je)=>je.sortKey-Je.sortKey);for(const je of qe){const{programConfiguration:Je,program:rt,layoutVertexBuffer:st,indexBuffer:mt,uniformValues:wt,terrainData:Bt}=je.state;rt.draw(we,Ae.TRIANGLES,ze,ke,De,Kr.disabled,wt,Bt,k.id,st,mt,je.segments,k.paint,_.transform.zoom,Je)}})(n,c,p,g);break;case"heatmap":(function(_,A,k,O){if(k.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const $=_.context,te=$.gl,Q=Br.disabled,pe=new Wr([te.ONE,te.ONE],l.aN.transparent,[!0,!0,!0,!0]);(function(we,Ae,ze){const ke=we.gl;we.activeTexture.set(ke.TEXTURE1),we.viewport.set([0,0,Ae.width/4,Ae.height/4]);let De=ze.heatmapFbo;if(De)ke.bindTexture(ke.TEXTURE_2D,De.colorAttachment.get()),we.bindFramebuffer.set(De.framebuffer);else{const qe=ke.createTexture();ke.bindTexture(ke.TEXTURE_2D,qe),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_S,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_T,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,ke.LINEAR),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MAG_FILTER,ke.LINEAR),De=ze.heatmapFbo=we.createFramebuffer(Ae.width/4,Ae.height/4,!1,!1),function(je,Je,rt,st){var mt,wt;const Bt=je.gl,Dt=(mt=je.HALF_FLOAT)!==null&&mt!==void 0?mt:Bt.UNSIGNED_BYTE,bt=(wt=je.RGBA16F)!==null&&wt!==void 0?wt:Bt.RGBA;Bt.texImage2D(Bt.TEXTURE_2D,0,bt,Je.width/4,Je.height/4,0,Bt.RGBA,Dt,null),st.colorAttachment.set(rt)}(we,Ae,qe,De)}})($,_,k),$.clear({color:l.aN.transparent});for(let we=0;we<O.length;we++){const Ae=O[we];if(A.hasRenderableParent(Ae))continue;const ze=A.getTile(Ae),ke=ze.getBucket(k);if(!ke)continue;const De=ke.programConfigurations.get(k.id),qe=_.useProgram("heatmap",De),{zoom:je}=_.transform;qe.draw($,te.TRIANGLES,br.disabled,Q,pe,Kr.disabled,Si(Ae.posMatrix,ze,je,k.paint.get("heatmap-intensity")),null,k.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,k.paint,_.transform.zoom,De)}$.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function($,te){const Q=$.context,pe=Q.gl,we=te.heatmapFbo;if(!we)return;Q.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,we.colorAttachment.get()),Q.activeTexture.set(pe.TEXTURE1);let Ae=te.colorRampTexture;Ae||(Ae=te.colorRampTexture=new X(Q,te.colorRamp,pe.RGBA)),Ae.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),$.useProgram("heatmapTexture").draw(Q,pe.TRIANGLES,br.disabled,Br.disabled,$.colorModeForRenderPass(),Kr.disabled,((ze,ke,De,qe)=>{const je=l.H();l.aQ(je,0,ze.width,ze.height,0,0,1);const Je=ze.context.gl;return{u_matrix:je,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ke.paint.get("heatmap-opacity")}})($,te),null,te.id,$.viewportBuffer,$.quadTriangleIndexBuffer,$.viewportSegments,te.paint,$.transform.zoom)}(_,k))})(n,c,p,g);break;case"line":(function(_,A,k,O){if(_.renderPass!=="translucent")return;const $=k.paint.get("line-opacity"),te=k.paint.get("line-width");if($.constantOr(1)===0||te.constantOr(1)===0)return;const Q=_.depthModeForSublayer(0,br.ReadOnly),pe=_.colorModeForRenderPass(),we=k.paint.get("line-dasharray"),Ae=k.paint.get("line-pattern"),ze=Ae.constantOr(1),ke=k.paint.get("line-gradient"),De=k.getCrossfadeParameters(),qe=ze?"linePattern":we?"lineSDF":ke?"lineGradient":"line",je=_.context,Je=je.gl;let rt=!0;for(const st of O){const mt=A.getTile(st);if(ze&&!mt.patternsLoaded())continue;const wt=mt.getBucket(k);if(!wt)continue;const Bt=wt.programConfigurations.get(k.id),Dt=_.context.program.get(),bt=_.useProgram(qe,Bt),Tt=rt||bt.program!==Dt,Gt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(st),mr=Ae.constantOr(null);if(mr&&mt.imageAtlas){const cr=mt.imageAtlas,ln=cr.patternPositions[mr.to.toString()],xr=cr.patternPositions[mr.from.toString()];ln&&xr&&Bt.setConstantPatternPositions(ln,xr)}const Ct=Gt?st:null,jt=ze?Fc(_,mt,k,De,Ct):we?Rc(_,mt,k,we,De,Ct):ke?Ds(_,mt,k,wt.lineClipsArray.length,Ct):Bs(_,mt,k,Ct);if(ze)je.activeTexture.set(Je.TEXTURE0),mt.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Bt.updatePaintBuffers(De);else if(we&&(Tt||_.lineAtlas.dirty))je.activeTexture.set(Je.TEXTURE0),_.lineAtlas.bind(je);else if(ke){const cr=wt.gradients[k.id];let ln=cr.texture;if(k.gradientVersion!==cr.version){let xr=256;if(k.stepInterpolant){const Pr=A.getSource().maxzoom,un=st.canonical.z===Pr?Math.ceil(1<<_.transform.maxZoom-st.canonical.z):1;xr=l.ad(l.aV(wt.maxLineLength/l.X*1024*un),256,je.maxTextureSize)}cr.gradient=l.aW({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:xr,image:cr.gradient||void 0,clips:wt.lineClipsArray}),cr.texture?cr.texture.update(cr.gradient):cr.texture=new X(je,cr.gradient,Je.RGBA),cr.version=k.gradientVersion,ln=cr.texture}je.activeTexture.set(Je.TEXTURE0),ln.bind(k.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}bt.draw(je,Je.TRIANGLES,Q,_.stencilModeForClipping(st),pe,Kr.disabled,jt,Gt,k.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,k.paint,_.transform.zoom,Bt,wt.layoutVertexBuffer2),rt=!1}})(n,c,p,g);break;case"fill":(function(_,A,k,O){const $=k.paint.get("fill-color"),te=k.paint.get("fill-opacity");if(te.constantOr(1)===0)return;const Q=_.colorModeForRenderPass(),pe=k.paint.get("fill-pattern"),we=_.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&$.constantOr(l.aN.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===we){const Ae=_.depthModeForSublayer(1,_.renderPass==="opaque"?br.ReadWrite:br.ReadOnly);os(_,A,k,O,Ae,Q,!1)}if(_.renderPass==="translucent"&&k.paint.get("fill-antialias")){const Ae=_.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,br.ReadOnly);os(_,A,k,O,Ae,Q,!0)}})(n,c,p,g);break;case"fill-extrusion":(function(_,A,k,O){const $=k.paint.get("fill-extrusion-opacity");if($!==0&&_.renderPass==="translucent"){const te=new br(_.context.gl.LEQUAL,br.ReadWrite,_.depthRangeFor3D);if($!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Pa(_,A,k,O,te,Br.disabled,Wr.disabled),Pa(_,A,k,O,te,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const Q=_.colorModeForRenderPass();Pa(_,A,k,O,te,Br.disabled,Q)}}})(n,c,p,g);break;case"hillshade":(function(_,A,k,O){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const $=_.context,te=_.depthModeForSublayer(0,br.ReadOnly),Q=_.colorModeForRenderPass(),[pe,we]=_.renderPass==="translucent"?_.stencilConfigForOverlap(O):[{},O];for(const Ae of we){const ze=A.getTile(Ae);ze.needsHillshadePrepare!==void 0&&ze.needsHillshadePrepare&&_.renderPass==="offscreen"?zi(_,ze,k,te,Br.disabled,Q):_.renderPass==="translucent"&&Pi(_,Ae,ze,k,te,pe[Ae.overscaledZ],Q)}$.viewport.set([0,0,_.width,_.height])})(n,c,p,g);break;case"raster":(function(_,A,k,O){if(_.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!O.length)return;const $=_.context,te=$.gl,Q=A.getSource(),pe=_.useProgram("raster"),we=_.colorModeForRenderPass(),[Ae,ze]=Q instanceof _e?[{},O]:_.stencilConfigForOverlap(O),ke=ze[ze.length-1].overscaledZ,De=!_.options.moving;for(const qe of ze){const je=_.depthModeForSublayer(qe.overscaledZ-ke,k.paint.get("raster-opacity")===1?br.ReadWrite:br.ReadOnly,te.LESS),Je=A.getTile(qe);Je.registerFadeDuration(k.paint.get("raster-fade-duration"));const rt=A.findLoadedParent(qe,0),st=A.findLoadedSibling(qe),mt=Vs(Je,rt||st||null,A,k,_.transform,_.style.map.terrain);let wt,Bt;const Dt=k.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;$.activeTexture.set(te.TEXTURE0),Je.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(te.TEXTURE1),rt?(rt.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,rt.tileID.overscaledZ-Je.tileID.overscaledZ),Bt=[Je.tileID.canonical.x*wt%1,Je.tileID.canonical.y*wt%1]):Je.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);const bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(qe),Tt=bt?qe:null,Gt=Tt?Tt.posMatrix:_.transform.calculatePosMatrix(qe.toUnwrapped(),De),mr=Cf(Gt,Bt||[0,0],wt||1,mt,k);Q instanceof _e?pe.draw($,te.TRIANGLES,je,Br.disabled,we,Kr.disabled,mr,bt,k.id,Q.boundsBuffer,_.quadTriangleIndexBuffer,Q.boundsSegments):pe.draw($,te.TRIANGLES,je,Ae[qe.overscaledZ],we,Kr.disabled,mr,bt,k.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(n,c,p,g);break;case"background":(function(_,A,k,O){const $=k.paint.get("background-color"),te=k.paint.get("background-opacity");if(te===0)return;const Q=_.context,pe=Q.gl,we=_.transform,Ae=we.tileSize,ze=k.paint.get("background-pattern");if(_.isPatternMissing(ze))return;const ke=!ze&&$.a===1&&te===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ke)return;const De=Br.disabled,qe=_.depthModeForSublayer(0,ke==="opaque"?br.ReadWrite:br.ReadOnly),je=_.colorModeForRenderPass(),Je=_.useProgram(ze?"backgroundPattern":"background"),rt=O||we.coveringTiles({tileSize:Ae,terrain:_.style.map.terrain});ze&&(Q.activeTexture.set(pe.TEXTURE0),_.imageManager.bind(_.context));const st=k.getCrossfadeParameters();for(const mt of rt){const wt=O?mt.posMatrix:_.transform.calculatePosMatrix(mt.toUnwrapped()),Bt=ze?kl(wt,te,_,ze,{tileID:mt,tileSize:Ae},st):Cl(wt,te,$),Dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(mt);Je.draw(Q,pe.TRIANGLES,qe,De,je,Kr.disabled,Bt,Dt,k.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(n,0,p,g);break;case"custom":(function(_,A,k){const O=_.context,$=k.implementation;if(_.renderPass==="offscreen"){const te=$.prerender;te&&(_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),te.call($,O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),O.setStencilMode(Br.disabled);const te=$.renderingMode==="3d"?new br(_.context.gl.LEQUAL,br.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,br.ReadOnly);O.setDepthMode(te),$.render(O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState(),O.bindFramebuffer.set(null)}})(n,0,p)}}translatePosMatrix(n,c,p,g,_){if(!p[0]&&!p[1])return n;const A=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(A){const $=Math.sin(A),te=Math.cos(A);p=[p[0]*te-p[1]*$,p[0]*$+p[1]*te]}const k=[_?p[0]:hr(c,p[0],this.transform.zoom),_?p[1]:hr(c,p[1],this.transform.zoom),0],O=new Float32Array(16);return l.J(O,n,k),O}saveTileTexture(n){const c=this._tileTextures[n.size[0]];c?c.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const c=this._tileTextures[n];return c&&c.length>0?c.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const c=this.imageManager.getPattern(n.from.toString()),p=this.imageManager.getPattern(n.to.toString());return!c||!p}useProgram(n,c){this.cache=this.cache||{};const p=n+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new El(this.context,ra[n],c,Ml[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new X(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:c}=this.context.gl;return this.width!==n||this.height!==c}}class aa{constructor(n,c){this.points=n,this.planes=c}static fromInvProjectionMatrix(n,c,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const O=1/(k=l.ag([],k,n))[3]/c*g;return l.b1(k,k,[O,O,1/k[3],O])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const O=function(pe,we){var Ae=we[0],ze=we[1],ke=we[2],De=Ae*Ae+ze*ze+ke*ke;return De>0&&(De=1/Math.sqrt(De)),pe[0]=we[0]*De,pe[1]=we[1]*De,pe[2]=we[2]*De,pe}([],function(pe,we,Ae){var ze=we[0],ke=we[1],De=we[2],qe=Ae[0],je=Ae[1],Je=Ae[2];return pe[0]=ke*Je-De*je,pe[1]=De*qe-ze*Je,pe[2]=ze*je-ke*qe,pe}([],P([],_[k[0]],_[k[1]]),P([],_[k[2]],_[k[1]]))),$=-((te=O)[0]*(Q=_[k[1]])[0]+te[1]*Q[1]+te[2]*Q[2]);var te,Q;return O.concat($)});return new aa(_,A)}}class Ws{constructor(n,c){this.min=n,this.max=c,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(n){const c=[n%2==0,n<2],p=q(this.min),g=q(this.max);for(let _=0;_<c.length;_++)p[_]=c[_]?this.min[_]:this.center[_],g[_]=c[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Ws(p,g)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<n.planes.length;g++){const _=n.planes[g];let A=0;for(let k=0;k<c.length;k++)l.b2(_,c[k])>=0&&A++;if(A===0)return 0;A!==c.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let k=0;k<n.points.length;k++){const O=n.points[k][g]-this.min[g];_=Math.min(_,O),A=Math.max(A,O)}if(A<0||_>this.max[g]-this.min[g])return 0}return 1}}class H{constructor(n=0,c=0,p=0,g=0){if(isNaN(n)||n<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=c,this.left=p,this.right=g}interpolate(n,c,p){return c.top!=null&&n.top!=null&&(this.top=l.z.number(n.top,c.top,p)),c.bottom!=null&&n.bottom!=null&&(this.bottom=l.z.number(n.bottom,c.bottom,p)),c.left!=null&&n.left!=null&&(this.left=l.z.number(n.left,c.left,p)),c.right!=null&&n.right!=null&&(this.right=l.z.number(n.right,c.right,p)),this}getCenter(n,c){const p=l.ad((this.left+n-this.right)/2,0,n),g=l.ad((this.top+c-this.bottom)/2,0,c);return new l.P(p,g)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new H(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ve=85.051129;class Ue{constructor(n,c,p,g,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=n||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new H,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new Ue(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const c=-l.b3(n,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new l.A(4);return l.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var A=g[0],k=g[1],O=g[2],$=g[3],te=Math.sin(_),Q=Math.cos(_);p[0]=A*Q+O*te,p[1]=k*Q+$*te,p[2]=A*-te+O*Q,p[3]=k*-te+$*Q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const c=l.ad(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const c=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,c,p){this._unmodified=!1,this._edgeInsets.interpolate(n,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const c=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(n){const c=[new l.b4(0,n)];if(this._renderWorldCopies){const p=this.pointCoordinate(new l.P(0,0)),g=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),A=this.pointCoordinate(new l.P(0,this.height)),k=Math.floor(Math.min(p.x,g.x,_.x,A.x)),O=Math.floor(Math.max(p.x,g.x,_.x,A.x)),$=1;for(let te=k-$;te<=O+$;te++)te!==0&&c.push(new l.b4(te,n))}return c}coveringTiles(n){var c,p;let g=this.coveringZoomLevel(n);const _=g;if(n.minzoom!==void 0&&g<n.minzoom)return[];n.maxzoom!==void 0&&g>n.maxzoom&&(g=n.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),k=l.Z.fromLngLat(this.center),O=Math.pow(2,g),$=[O*A.x,O*A.y,0],te=[O*k.x,O*k.y,0],Q=aa.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,g);let pe=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(pe=g);const we=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Ae=je=>({aabb:new Ws([je*O,0,0],[(je+1)*O,O,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),ze=[],ke=[],De=g,qe=n.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let je=1;je<=3;je++)ze.push(Ae(-je)),ze.push(Ae(je));for(ze.push(Ae(0));ze.length>0;){const je=ze.pop(),Je=je.x,rt=je.y;let st=je.fullyVisible;if(!st){const bt=je.aabb.intersects(Q);if(bt===0)continue;st=bt===2}const mt=n.terrain?$:te,wt=je.aabb.distanceX(mt),Bt=je.aabb.distanceY(mt),Dt=Math.max(Math.abs(wt),Math.abs(Bt));if(je.zoom===De||Dt>we+(1<<De-je.zoom)-2&&je.zoom>=pe){const bt=De-je.zoom,Tt=$[0]-.5-(Je<<bt),Gt=$[1]-.5-(rt<<bt);ke.push({tileID:new l.S(je.zoom===De?qe:je.zoom,je.wrap,je.zoom,Je,rt),distanceSq:z([te[0]-.5-Je,te[1]-.5-rt]),tileDistanceToCamera:Math.sqrt(Tt*Tt+Gt*Gt)})}else for(let bt=0;bt<4;bt++){const Tt=(Je<<1)+bt%2,Gt=(rt<<1)+(bt>>1),mr=je.zoom+1;let Ct=je.aabb.quadrant(bt);if(n.terrain){const jt=new l.S(mr,je.wrap,mr,Tt,Gt),cr=n.terrain.getMinMaxElevation(jt),ln=(c=cr.minElevation)!==null&&c!==void 0?c:this.elevation,xr=(p=cr.maxElevation)!==null&&p!==void 0?p:this.elevation;Ct=new Ws([Ct.min[0],Ct.min[1],ln],[Ct.max[0],Ct.max[1],xr])}ze.push({aabb:Ct,zoom:mr,x:Tt,y:Gt,wrap:je.wrap,fullyVisible:st})}}return ke.sort((je,Je)=>je.distanceSq-Je.distanceSq).map(je=>je.tileID)}resize(n,c){this.width=n,this.height=c,this.pixelsToGLUnits=[2/n,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const c=l.ad(n.lat,-85.051129,ve);return new l.P(l.O(n.lng)*this.worldSize,l.Q(c)*this.worldSize)}unproject(n){return new l.Z(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const c=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,n),_=n.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-_))return;const A=p+c-_,k=Math.cos(this._pitch)*this.cameraToCenterDistance/A/l.b5(1,g.lat),O=this.scaleZoom(k/this.tileSize);this._elevation=_,this._center=g,this.zoom=O}setLocationAtPoint(n,c){const p=this.pointCoordinate(c),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(n),A=new l.Z(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,c){return c?this.coordinatePoint(this.locationCoordinate(n),c.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,c){return this.coordinateLocation(this.pointCoordinate(n,c))}locationCoordinate(n){return l.Z.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,c){if(c){const pe=c.pointCoordinate(n);if(pe!=null)return pe}const p=[n.x,n.y,0,1],g=[n.x,n.y,1,1];l.ag(p,p,this.pixelMatrixInverse),l.ag(g,g,this.pixelMatrixInverse);const _=p[3],A=g[3],k=p[1]/_,O=g[1]/A,$=p[2]/_,te=g[2]/A,Q=$===te?0:(0-$)/(te-$);return new l.Z(l.z.number(p[0]/_,g[0]/A,Q)/this.worldSize,l.z.number(k,O,Q)/this.worldSize)}coordinatePoint(n,c=0,p=this.pixelMatrix){const g=[n.x*this.worldSize,n.y*this.worldSize,c,1];return l.ag(g,g,p),new l.P(g[0]/g[3],g[1]/g[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new et().extend(this.pointLocation(new l.P(0,n))).extend(this.pointLocation(new l.P(this.width,n))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new et([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,ve])}calculateTileMatrix(n){const c=n.canonical,p=this.worldSize/this.zoomScale(c.z),g=c.x+Math.pow(2,c.z)*n.wrap,_=l.ao(new Float64Array(16));return l.J(_,_,[g*p,c.y*p,0]),l.K(_,_,[p/l.X,p/l.X,1]),_}calculatePosMatrix(n,c=!1){const p=n.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=this.calculateTileMatrix(n);return l.L(_,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,_),g[p]=new Float32Array(_),g[p]}calculateFogMatrix(n){const c=n.key,p=this._fogMatrixCache;if(p[c])return p[c];const g=this.calculateTileMatrix(n);return l.L(g,this.fogMatrix,g),p[c]=new Float32Array(g),p[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(n,c){c=l.ad(+c,this.minZoom,this.maxZoom);const p={center:new l.N(n.lng,n.lat),zoom:c};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const je=179.9999999999;g=[-je,je]}const _=this.tileSize*this.zoomScale(p.zoom);let A=0,k=_,O=0,$=_,te=0,Q=0;const{x:pe,y:we}=this.size;if(this.latRange){const je=this.latRange;A=l.Q(je[1])*_,k=l.Q(je[0])*_,k-A<we&&(te=we/(k-A))}g&&(O=l.b3(l.O(g[0])*_,0,_),$=l.b3(l.O(g[1])*_,0,_),$<O&&($+=_),$-O<pe&&(Q=pe/($-O)));const{x:Ae,y:ze}=this.project.call({worldSize:_},n);let ke,De;const qe=Math.max(Q||0,te||0);if(qe){const je=new l.P(Q?($+O)/2:Ae,te?(k+A)/2:ze);return p.center=this.unproject.call({worldSize:_},je).wrap(),p.zoom+=this.scaleZoom(qe),p}if(this.latRange){const je=we/2;ze-je<A&&(De=A+je),ze+je>k&&(De=k-je)}if(g){const je=(O+$)/2;let Je=Ae;this._renderWorldCopies&&(Je=l.b3(Ae,je-_/2,je+_/2));const rt=pe/2;Je-rt<O&&(ke=O+rt),Je+rt>$&&(ke=$-rt)}if(ke!==void 0||De!==void 0){const je=new l.P(ke??Ae,De??ze);p.center=this.unproject.call({worldSize:_},je).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=p,this._unmodified=n,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let g=l.ao(new Float64Array(16));l.K(g,g,[this.width/2,-this.height/2,1]),l.J(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.ao(new Float64Array(16)),l.K(g,g,[1,-1,1]),l.J(g,g,[-1,-1,0]),l.K(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this.minElevationForCurrentTile),k=_-A*this._pixelPerMeter/Math.cos(this._pitch),O=A<0?k:_,$=Math.PI/2+this._pitch,te=this._fov*(.5+n.y/this.height),Q=Math.sin(te)*O/Math.sin(l.ad(Math.PI-$-te,.01,Math.PI-.01)),pe=this.getHorizon(),we=2*Math.atan(pe/this.cameraToCenterDistance)*(.5+n.y/(2*pe)),Ae=Math.sin(we)*O/Math.sin(l.ad(Math.PI-$-we,.01,Math.PI-.01)),ze=Math.min(Q,Ae),ke=1.01*(Math.cos(Math.PI/2-this._pitch)*ze+O),De=this.height/50;g=new Float64Array(16),l.b6(g,this._fov,this.width/this.height,De,ke),g[8]=2*-n.x/this.width,g[9]=2*n.y/this.height,l.K(g,g,[1,-1,1]),l.J(g,g,[0,0,-this.cameraToCenterDistance]),l.b7(g,g,this._pitch),l.ae(g,g,this.angle),l.J(g,g,[-c,-p,0]),this.mercatorMatrix=l.K([],g,[this.worldSize,this.worldSize,this.worldSize]),l.K(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,g),l.J(g,g,[0,0,-this.elevation]),this.modelViewProjectionMatrix=g,this.invModelViewProjectionMatrix=l.at([],g),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,_,ke),this.fogMatrix[8]=2*-n.x/this.width,this.fogMatrix[9]=2*n.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ae(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-c,-p,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,g);const qe=this.width%2/2,je=this.height%2/2,Je=Math.cos(this.angle),rt=Math.sin(this.angle),st=c-Math.round(c)+Je*qe+rt*je,mt=p-Math.round(p)+Je*je+rt*qe,wt=new Float64Array(g);if(l.J(wt,wt,[st>.5?st-1:st,mt>.5?mt-1:mt,0]),this.alignedModelViewProjectionMatrix=wt,g=l.at(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new l.P(0,0)),c=[n.x*this.worldSize,n.y*this.worldSize,0,1];return l.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,n))}getCameraQueryGeometry(n){const c=this.getCameraPoint();if(n.length===1)return[n[0],c];{let p=c.x,g=c.y,_=c.x,A=c.y;for(const k of n)p=Math.min(p,k.x),g=Math.min(g,k.y),_=Math.max(_,k.x),A=Math.max(A,k.y);return[new l.P(p,g),new l.P(_,g),new l.P(_,A),new l.P(p,A),new l.P(p,g)]}}lngLatToCameraDepth(n,c){const p=this.locationCoordinate(n),g=[p.x*this.worldSize,p.y*this.worldSize,c,1];return l.ag(g,g,this.modelViewProjectionMatrix),g[2]/g[3]}}function ut(v,n){let c,p=!1,g=null,_=null;const A=()=>{g=null,p&&(v.apply(_,c),g=setTimeout(A,n),p=!1)};return(...k)=>(p=!0,_=this,c=k,g||A(),g)}class Mt{constructor(n){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=ut(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),A=Math.round(c.lng*_)/_,k=Math.round(c.lat*_)/_,O=this._map.getBearing(),$=this._map.getPitch();let te="";if(te+=n?`/${A}/${k}/${p}`:`${p}/${k}/${A}`,(O||$)&&(te+="/"+Math.round(10*O)/10),$&&(te+=`/${Math.round($)}`),this._hashName){const Q=this._hashName;let pe=!1;const we=window.location.hash.slice(1).split("&").map(Ae=>{const ze=Ae.split("=")[0];return ze===Q?(pe=!0,`${ze}=${te}`):Ae}).filter(Ae=>Ae);return pe||we.push(`${Q}=${te}`),`#${we.join("&")}`}return`#${te}`}}const St={linearity:.3,easing:l.b8(0,0,.3,1)},Zt=l.e({deceleration:2500,maxSpeed:1400},St),Jt=l.e({deceleration:20,maxSpeed:1400},St),vr=l.e({deceleration:1e3,maxSpeed:360},St),Dr=l.e({deceleration:1e3,maxSpeed:90},St);class Fr{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,c=b.now();for(;n.length>0&&c-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)c.zoom+=_.zoomDelta||0,c.bearing+=_.bearingDelta||0,c.pitch+=_.pitchDelta||0,_.panDelta&&c.pan._add(_.panDelta),_.around&&(c.around=_.around),_.pinchAround&&(c.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(c.pan.mag()){const _=an(c.pan.mag(),p,l.e({},Zt,n||{}));g.offset=c.pan.mult(_.amount/c.pan.mag()),g.center=this._map.transform.center,Hr(g,_)}if(c.zoom){const _=an(c.zoom,p,Jt);g.zoom=this._map.transform.zoom+_.amount,Hr(g,_)}if(c.bearing){const _=an(c.bearing,p,vr);g.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),Hr(g,_)}if(c.pitch){const _=an(c.pitch,p,Dr);g.pitch=this._map.transform.pitch+_.amount,Hr(g,_)}if(g.zoom||g.bearing){const _=c.pinchAround===void 0?c.around:c.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(g,{noMoveStart:!0})}}function Hr(v,n){(!v.duration||v.duration<n.duration)&&(v.duration=n.duration,v.easing=n.easing)}function an(v,n,c){const{maxSpeed:p,linearity:g,deceleration:_}=c,A=l.ad(v*g/(n/1e3),-p,p),k=Math.abs(A)/(_*g);return{easing:c.easing,duration:1e3*k,amount:A*(k/2)}}class Ur extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p,g={}){const _=T.mousePos(c.getCanvas(),p),A=c.unproject(_);super(n,l.e({point:_,lngLat:A,originalEvent:p},g)),this._defaultPrevented=!1,this.target=c}}class gn extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p){const g=n==="touchend"?p.changedTouches:p.touches,_=T.touchPos(c.getCanvasContainer(),g),A=_.map(O=>c.unproject(O)),k=_.reduce((O,$,te,Q)=>O.add($.div(Q.length)),new l.P(0,0));super(n,{points:_,point:k,lngLats:A,lngLat:c.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class mo extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p){super(n,{originalEvent:p}),this._defaultPrevented=!1}}class Li{constructor(n,c){this._map=n,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new mo(n.type,this._map,n))}mousedown(n,c){return this._mousedownPos=c,this._firePreventable(new Ur(n.type,this._map,n))}mouseup(n){this._map.fire(new Ur(n.type,this._map,n))}click(n,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ur(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Ur(n.type,this._map,n))}mouseover(n){this._map.fire(new Ur(n.type,this._map,n))}mouseout(n){this._map.fire(new Ur(n.type,this._map,n))}touchstart(n){return this._firePreventable(new gn(n.type,this._map,n))}touchmove(n){this._map.fire(new gn(n.type,this._map,n))}touchend(n){this._map.fire(new gn(n.type,this._map,n))}touchcancel(n){this._map.fire(new gn(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ko{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Ur(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ur("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Ur(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ka{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(l.P.convert(n),this._map.terrain)}}class ss{constructor(n,c){this._map=n,this._tr=new ka(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,c){this.isEnabled()&&n.shiftKey&&n.button===0&&(T.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(n,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const _=Math.min(g.x,p.x),A=Math.max(g.x,p.x),k=Math.min(g.y,p.y),O=Math.max(g.y,p.y);T.setTransform(this._box,`translate(${_}px,${k}px)`),this._box.style.width=A-_+"px",this._box.style.height=O-k+"px"}mouseupWindow(n,c){if(!this._active||n.button!==0)return;const p=this._startPos,g=c;if(this.reset(),T.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:n})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,c){return this._map.fire(new l.k(n,{originalEvent:c}))}}function Mo(v,n){if(v.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${n.length}`);const c={};for(let p=0;p<v.length;p++)c[v[p].identifier]=n[p];return c}class Lf{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new l.P(0,0);for(const A of g)_._add(A);return _.div(g.length)}(c),this.touches=Mo(p,c)))}touchmove(n,c,p){if(this.aborted||!this.centroid)return;const g=Mo(p,c);for(const _ in this.touches){const A=g[_];(!A||A.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(n,c,p){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Bf{constructor(n){this.singleTap=new Lf(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,c,p){this.singleTap.touchstart(n,c,p)}touchmove(n,c,p){this.singleTap.touchmove(n,c,p)}touchend(n,c,p){const g=this.singleTap.touchend(n,c,p);if(g){const _=n.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(g)<30;if(_&&A||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class om{constructor(n){this._tr=new ka(n),this._zoomIn=new Bf({numTouches:1,numTaps:2}),this._zoomOut=new Bf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,c,p){this._zoomIn.touchstart(n,c,p),this._zoomOut.touchstart(n,c,p)}touchmove(n,c,p){this._zoomIn.touchmove(n,c,p),this._zoomOut.touchmove(n,c,p)}touchend(n,c,p){const g=this._zoomIn.touchend(n,c,p),_=this._zoomOut.touchend(n,c,p),A=this._tr;return g?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(g)},{originalEvent:n})}):_?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(_)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sn{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const c=this._moveFunction(...n);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(n,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const g=c.length?c[0]:c;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&T.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Hs={0:1,2:2};class Bi{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const c=T.mouseButton(n);this._eventButton=c}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(c,p){const g=Hs[p];return c.buttons===void 0||(c.buttons&g)!==g}(n,this._eventButton)}isValidEndEvent(n){return T.mouseButton(n)===this._eventButton}}class Xc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const Gu=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=n=>{n.preventDefault()}},Df=({enable:v,clickTolerance:n,bearingDegreesPerPixelMoved:c=.8})=>{const p=new Bi({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new sn({clickTolerance:n,move:(g,_)=>({bearingDelta:(_.x-g.x)*c}),moveStateManager:p,enable:v,assignEvents:Gu})},Zs=({enable:v,clickTolerance:n,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new Bi({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new sn({clickTolerance:n,move:(g,_)=>({pitchDelta:(_.y-g.y)*c}),moveStateManager:p,enable:v,assignEvents:Gu})};class Wu{constructor(n,c){this._clickTolerance=n.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(n,c,p){return this._calculateTransform(n,c,p)}touchmove(n,c,p){if(this._active&&!(p.length<this.minTouchs()))return n.preventDefault(),this._calculateTransform(n,c,p)}touchend(n,c,p){this._calculateTransform(n,c,p),this._active&&p.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,c,p){p.length>0&&(this._active=!0);const g=Mo(p,c),_=new l.P(0,0),A=new l.P(0,0);let k=0;for(const $ in g){const te=g[$],Q=this._touches[$];Q&&(_._add(te),A._add(te.sub(Q)),k++,g[$]=te)}if(this._touches=g,k<this.minTouchs()||!A.mag())return;const O=A.div(k);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(k),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(n,c,p){if(!this._firstTwoTouches)return;n.preventDefault();const[g,_]=this._firstTwoTouches,A=Zu(p,c,g),k=Zu(p,c,_);if(!A||!k)return;const O=this._aroundCenter?null:A.add(k).div(2);return this._move([A,k],O,n)}touchend(n,c,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,A=Zu(p,c,g),k=Zu(p,c,_);A&&k||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Zu(v,n,c){for(let p=0;p<v.length;p++)if(v[p].identifier===c)return n[p]}function Nf(v,n){return Math.log(v/n)/Math.LN2}class $f extends Hu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,c){const p=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Nf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nf(this._distance,p),pinchAround:c}}}function Uf(v,n){return 180*v.angleWith(n)/Math.PI}class Vf extends Hu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,c,p){const g=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Uf(this._vector,g),pinchAround:c}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const c=25/(Math.PI*this._minDiameter)*360,p=Uf(n,this._startVector);return Math.abs(p)<c}}function Ma(v){return Math.abs(v.y)>Math.abs(v.x)}class Gf extends Hu{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,c,p){super.touchstart(n,c,p),this._currentTouchCount=p.length}_start(n){this._lastPoints=n,Ma(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=n[0].sub(this._lastPoints[0]),_=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(n,c,p){if(this._valid!==void 0)return this._valid;const g=n.mag()>=2,_=c.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=n.y>0==c.y>0;return Ma(n)&&Ma(c)&&A}}const am={panStep:100,bearingStep:15,pitchStep:10};class Wf{constructor(n){this._tr=new ka(n);const c=am;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let c=0,p=0,g=0,_=0,A=0;switch(n.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:n.shiftKey?p=-1:(n.preventDefault(),_=-1);break;case 39:n.shiftKey?p=1:(n.preventDefault(),_=1);break;case 38:n.shiftKey?g=1:(n.preventDefault(),A=-1);break;case 40:n.shiftKey?g=-1:(n.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:k=>{const O=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:sm,zoom:c?Math.round(O.zoom)+c*(n.shiftKey?2:1):O.zoom,bearing:O.bearing+p*this._bearingStep,pitch:O.pitch+g*this._pitchStep,offset:[-_*this._panStep,-A*this._panStep],center:O.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function sm(v){return v*(2-v)}const Hf=4.000244140625;class Zf{constructor(n,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=n,this._tr=new ka(n),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!n[this._map.cooperativeGestures._bypassKey])return;let c=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const p=b.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%Hf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(g*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),n.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=n,this._delta-=c,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=T.mousePos(this._map.getCanvas(),n),p=this._tr;this._around=c.y>p.transform.height/2-p.transform.getHorizon()?l.N.convert(this._aroundCenter?p.center:p.unproject(c)):l.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Hf?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&O!==0&&(O=1/O);const $=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom($*O))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,p=this._startZoom,g=this._easing;let _,A=!1;if(this._type==="wheel"&&p&&g){const k=Math.min((b.now()-this._lastWheelEventTime)/200,1),O=g(k);_=l.z.number(p,c,O),k<1?this._frameId||(this._frameId=!0):A=!0}else _=c,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:_-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let c=l.b9;if(this._prevEase){const p=this._prevEase,g=(b.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),A=.27/Math.sqrt(_*_+1e-4)*.01,k=Math.sqrt(.0729-A*A);c=l.b8(A,k,.25,1)}return this._prevEase={start:b.now(),duration:n,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xf{constructor(n,c){this._clickZoom=n,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xu{constructor(n){this._tr=new ka(n),this.reset()}reset(){this._active=!1}dblclick(n,c){return n.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lm{constructor(){this._tap=new Bf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,c,p){if(!this._swipePoint)if(this._tapTime){const g=c[0],_=n.timeStamp-this._tapTime<500,A=this._tapPoint.dist(g)<30;_&&A?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(n,c,p)}touchmove(n,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=c[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,n.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(n,c,p)}touchend(n,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(n,c,p);g&&(this._tapTime=n.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class go{constructor(n,c,p){this._el=n,this._mousePan=c,this._touchPan=p}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Oo{constructor(n,c,p){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class qf{constructor(n,c,p,g){this._el=n,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Fo{constructor(n,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",n);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=c,this._container.appendChild(g);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=p,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(n){this._onCooperativeGesture(n.touches.length===1)}wheel(n){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!n[this._bypassKey])}_onCooperativeGesture(n){this._enabled&&n&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Oa=v=>v.zoom||v.drag||v.pitch||v.rotate;class Y0 extends l.k{}function Kf(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Q0{constructor(n,c){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=g.type==="renderFrame"?void 0:g,k={needsRenderFrame:!1},O={},$={},te=g.touches,Q=te?this._getMapTouches(te):void 0,pe=Q?T.touchPos(this._map.getCanvas(),Q):T.mousePos(this._map.getCanvas(),g);for(const{handlerName:ze,handler:ke,allowed:De}of this._handlers){if(!ke.isEnabled())continue;let qe;this._blockedByActive($,De,ze)?ke.reset():ke[_||g.type]&&(qe=ke[_||g.type](g,pe,Q),this.mergeHandlerResult(k,O,qe,ze,A),qe&&qe.needsRenderFrame&&this._triggerRenderFrame()),(qe||ke.isActive())&&($[ze]=ke)}const we={};for(const ze in this._previousActiveHandlers)$[ze]||(we[ze]=A);this._previousActiveHandlers=$,(Object.keys(we).length||Kf(k))&&(this._changes.push([k,O,we]),this._triggerRenderFrame()),(Object.keys($).length||Kf(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=k;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fr(n),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,A]of this._listeners)T.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[n,c,p]of this._listeners)T.removeEventListener(n,c,n===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(n){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new Li(c,n));const g=c.boxZoom=new ss(c,n);this._add("boxZoom",g),n.interactive&&n.boxZoom&&g.enable();const _=c.cooperativeGestures=new Fo(c,n.cooperativeGestures);this._add("cooperativeGestures",_),n.cooperativeGestures&&_.enable();const A=new om(c),k=new Xu(c);c.doubleClickZoom=new Xf(k,A),this._add("tapZoom",A),this._add("clickZoom",k),n.interactive&&n.doubleClickZoom&&c.doubleClickZoom.enable();const O=new lm;this._add("tapDragZoom",O);const $=c.touchPitch=new Gf(c);this._add("touchPitch",$),n.interactive&&n.touchPitch&&c.touchPitch.enable(n.touchPitch);const te=Df(n),Q=Zs(n);c.dragRotate=new Oo(n,te,Q),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]),n.interactive&&n.dragRotate&&c.dragRotate.enable();const pe=(({enable:qe,clickTolerance:je})=>{const Je=new Bi({checkCorrectEvent:rt=>T.mouseButton(rt)===0&&!rt.ctrlKey});return new sn({clickTolerance:je,move:(rt,st)=>({around:st,panDelta:st.sub(rt)}),activateOnStart:!0,moveStateManager:Je,enable:qe,assignEvents:Gu})})(n),we=new Wu(n,c);c.dragPan=new go(p,pe,we),this._add("mousePan",pe),this._add("touchPan",we,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&c.dragPan.enable(n.dragPan);const Ae=new Vf,ze=new $f;c.touchZoomRotate=new qf(p,ze,Ae,O),this._add("touchRotate",Ae,["touchPan","touchZoom"]),this._add("touchZoom",ze,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&c.touchZoomRotate.enable(n.touchZoomRotate);const ke=c.scrollZoom=new Zf(c,()=>this._triggerRenderFrame());this._add("scrollZoom",ke,["mousePan"]),n.interactive&&n.scrollZoom&&c.scrollZoom.enable(n.scrollZoom);const De=c.keyboard=new Wf(c);this._add("keyboard",De),n.interactive&&n.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new ko(c))}_add(n,c,p){this._handlers.push({handlerName:n,handler:c,allowed:p}),this._handlersById[n]=c}stop(n){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Oa(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,c,p){for(const g in n)if(g!==p&&(!c||c.indexOf(g)<0))return!0;return!1}_getMapTouches(n){const c=[];for(const p of n)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(n,c,p,g,_){if(!p)return;l.e(n,p);const A={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(c.zoom=A),p.panDelta!==void 0&&(c.drag=A),p.pitchDelta!==void 0&&(c.pitch=A),p.bearingDelta!==void 0&&(c.rotate=A)}_applyChanges(){const n={},c={},p={};for(const[g,_,A]of this._changes)g.panDelta&&(n.panDelta=(n.panDelta||new l.P(0,0))._add(g.panDelta)),g.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(n.around=g.around),g.pinchAround!==void 0&&(n.pinchAround=g.pinchAround),g.noInertia&&(n.noInertia=g.noInertia),l.e(c,_),l.e(p,A);this._updateMapTransform(n,c,p),this._changes=[]}_updateMapTransform(n,c,p){const g=this._map,_=g._getTransformForUpdate(),A=g.terrain;if(!(Kf(n)||A&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:k,zoomDelta:O,bearingDelta:$,pitchDelta:te,around:Q,pinchAround:pe}=n;pe!==void 0&&(Q=pe),g._stop(!0),Q=Q||g.transform.centerPoint;const we=_.pointLocation(k?Q.sub(k):Q);$&&(_.bearing+=$),te&&(_.pitch+=te),O&&(_.zoom+=O),A?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(k)):_.setLocationAtPoint(we,Q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(we,Q)):_.setLocationAtPoint(we,Q),g._applyUpdatedTransform(_),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(c,p,!0)}_fireEvents(n,c,p){const g=Oa(this._eventsInProgress),_=Oa(n),A={};for(const Q in n){const{originalEvent:pe}=n[Q];this._eventsInProgress[Q]||(A[`${Q}start`]=pe),this._eventsInProgress[Q]=n[Q]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const Q in A)this._fireEvent(Q,A[Q]);_&&this._fireEvent("move",_.originalEvent);for(const Q in n){const{originalEvent:pe}=n[Q];this._fireEvent(Q,pe)}const k={};let O;for(const Q in this._eventsInProgress){const{handlerName:pe,originalEvent:we}=this._eventsInProgress[Q];this._handlersById[pe].isActive()||(delete this._eventsInProgress[Q],O=c[pe]||we,k[`${Q}end`]=O)}for(const Q in k)this._fireEvent(Q,k[Q]);const $=Oa(this._eventsInProgress),te=(g||_)&&!$;if(te&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),p&&te){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pe=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;!Q||!Q.essential&&b.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:O})),pe(this._map.getBearing())&&this._map.resetNorth()):(pe(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(n,c){this._map.fire(new l.k(n,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Y0("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ev extends l.E{constructor(n,c){super(),this._renderFrameCallback=()=>{const p=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(n,c){return this.jumpTo({center:n},c)}panBy(n,c,p){return n=l.P.convert(n).mult(-1),this.panTo(this.transform.center,l.e({offset:n},c),p)}panTo(n,c,p){return this.easeTo(l.e({center:n},c),p)}getZoom(){return this.transform.zoom}setZoom(n,c){return this.jumpTo({zoom:n},c),this}zoomTo(n,c,p){return this.easeTo(l.e({zoom:n},c),p)}zoomIn(n,c){return this.zoomTo(this.getZoom()+1,n,c),this}zoomOut(n,c){return this.zoomTo(this.getZoom()-1,n,c),this}getBearing(){return this.transform.bearing}setBearing(n,c){return this.jumpTo({bearing:n},c),this}getPadding(){return this.transform.padding}setPadding(n,c){return this.jumpTo({padding:n},c),this}rotateTo(n,c,p){return this.easeTo(l.e({bearing:n},c),p)}resetNorth(n,c){return this.rotateTo(0,l.e({duration:1e3},n),c),this}resetNorthPitch(n,c){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},n),c),this}snapToNorth(n,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,c):this}getPitch(){return this.transform.pitch}setPitch(n,c){return this.jumpTo({pitch:n},c),this}cameraForBounds(n,c){n=et.convert(n);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),p,c)}_cameraForBoxAndBearing(n,c,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const bt=g.padding;g.padding={top:bt,bottom:bt,right:bt,left:bt}}g.padding=l.e(_,g.padding);const A=this.transform,k=A.padding,O=new et(n,c),$=A.project(O.getNorthWest()),te=A.project(O.getNorthEast()),Q=A.project(O.getSouthEast()),pe=A.project(O.getSouthWest()),we=l.ba(-p),Ae=$.rotate(we),ze=te.rotate(we),ke=Q.rotate(we),De=pe.rotate(we),qe=new l.P(Math.max(Ae.x,ze.x,De.x,ke.x),Math.max(Ae.y,ze.y,De.y,ke.y)),je=new l.P(Math.min(Ae.x,ze.x,De.x,ke.x),Math.min(Ae.y,ze.y,De.y,ke.y)),Je=qe.sub(je),rt=(A.width-(k.left+k.right+g.padding.left+g.padding.right))/Je.x,st=(A.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/Je.y;if(st<0||rt<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(A.scaleZoom(A.scale*Math.min(rt,st)),g.maxZoom),wt=l.P.convert(g.offset),Bt=new l.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(l.ba(p)),Dt=wt.add(Bt).mult(A.scale/A.zoomScale(mt));return{center:A.unproject($.add(Q).div(2).sub(Dt)),zoom:mt,bearing:p}}fitBounds(n,c,p){return this._fitInternal(this.cameraForBounds(n,c),c,p)}fitScreenCoordinates(n,c,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(n)),this.transform.pointLocation(l.P.convert(c)),p,g),g,_)}_fitInternal(n,c,p){return n?(delete(c=l.e(n,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(n,c){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,A=!1;return"zoom"in n&&p.zoom!==+n.zoom&&(g=!0,p.zoom=+n.zoom),n.center!==void 0&&(p.center=l.N.convert(n.center)),"bearing"in n&&p.bearing!==+n.bearing&&(_=!0,p.bearing=+n.bearing),"pitch"in n&&p.pitch!==+n.pitch&&(A=!0,p.pitch=+n.pitch),n.padding==null||p.isPaddingEqual(n.padding)||(p.padding=n.padding),this._applyUpdatedTransform(p),this.fire(new l.k("movestart",c)).fire(new l.k("move",c)),g&&this.fire(new l.k("zoomstart",c)).fire(new l.k("zoom",c)).fire(new l.k("zoomend",c)),_&&this.fire(new l.k("rotatestart",c)).fire(new l.k("rotate",c)).fire(new l.k("rotateend",c)),A&&this.fire(new l.k("pitchstart",c)).fire(new l.k("pitch",c)).fire(new l.k("pitchend",c)),this.fire(new l.k("moveend",c))}calculateCameraOptionsFromTo(n,c,p,g=0){const _=l.Z.fromLngLat(n,c),A=l.Z.fromLngLat(p,g),k=A.x-_.x,O=A.y-_.y,$=A.z-_.z,te=Math.hypot(k,O,$);if(te===0)throw new Error("Can't calculate camera options with same From and To");const Q=Math.hypot(k,O),pe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/te/this.transform.tileSize),we=180*Math.atan2(k,-O)/Math.PI;let Ae=180*Math.acos(Q/te)/Math.PI;return Ae=$<0?90-Ae:90+Ae,{center:A.toLngLat(),zoom:pe,pitch:Ae,bearing:we}}easeTo(n,c){var p;this._stop(!1,n.easeId),((n=l.e({offset:[0,0],duration:500,easing:l.b9},n)).animate===!1||!n.essential&&b.prefersReducedMotion)&&(n.duration=0);const g=this._getTransformForUpdate(),_=this.getZoom(),A=this.getBearing(),k=this.getPitch(),O=this.getPadding(),$="bearing"in n?this._normalizeBearing(n.bearing,A):A,te="pitch"in n?+n.pitch:k,Q="padding"in n?n.padding:g.padding,pe=l.P.convert(n.offset);let we=g.centerPoint.add(pe);const Ae=g.pointLocation(we),{center:ze,zoom:ke}=g.getConstrained(l.N.convert(n.center||Ae),(p=n.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(ze);const De=g.project(Ae),qe=g.project(ze).sub(De),je=g.zoomScale(ke-_);let Je,rt;n.around&&(Je=l.N.convert(n.around),rt=g.locationPoint(Je));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ke!==_,this._rotating=this._rotating||A!==$,this._pitching=this._pitching||te!==k,this._padding=!g.isPaddingEqual(Q),this._easeId=n.easeId,this._prepareEase(c,n.noMoveStart,st),this.terrain&&this._prepareElevation(ze),this._ease(mt=>{if(this._zooming&&(g.zoom=l.z.number(_,ke,mt)),this._rotating&&(g.bearing=l.z.number(A,$,mt)),this._pitching&&(g.pitch=l.z.number(k,te,mt)),this._padding&&(g.interpolatePadding(O,Q,mt),we=g.centerPoint.add(pe)),this.terrain&&!n.freezeElevation&&this._updateElevation(mt),Je)g.setLocationAtPoint(Je,rt);else{const wt=g.zoomScale(g.zoom-_),Bt=ke>_?Math.min(2,je):Math.max(.5,je),Dt=Math.pow(Bt,1-mt),bt=g.unproject(De.add(qe.mult(mt*Dt)).mult(wt));g.setLocationAtPoint(g.renderWorldCopies?bt.wrap():bt,we)}this._applyUpdatedTransform(g),this._fireMoveEvents(c)},mt=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(c,mt)},n),this}_prepareEase(n,c,p={}){this._moving=!0,c||p.moving||this.fire(new l.k("movestart",n)),this._zooming&&!p.zooming&&this.fire(new l.k("zoomstart",n)),this._rotating&&!p.rotating&&this.fire(new l.k("rotatestart",n)),this._pitching&&!p.pitching&&this.fire(new l.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(p-(c-(p*n+this._elevationStart))/(1-n)),this._elevationTarget=c}this.transform.elevation=l.z.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const c=n.clone(),{center:p,zoom:g,pitch:_,bearing:A,elevation:k}=this.transformCameraUpdate(c);p&&(c.center=p),g!==void 0&&(c.zoom=g),_!==void 0&&(c.pitch=_),A!==void 0&&(c.bearing=A),k!==void 0&&(c.elevation=k),this.transform.apply(c)}_fireMoveEvents(n){this.fire(new l.k("move",n)),this._zooming&&this.fire(new l.k("zoom",n)),this._rotating&&this.fire(new l.k("rotate",n)),this._pitching&&this.fire(new l.k("pitch",n))}_afterEase(n,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new l.k("zoomend",n)),g&&this.fire(new l.k("rotateend",n)),_&&this.fire(new l.k("pitchend",n)),this.fire(new l.k("moveend",n))}flyTo(n,c){var p;if(!n.essential&&b.prefersReducedMotion){const jt=l.M(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,c)}this.stop(),n=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},n);const g=this._getTransformForUpdate(),_=this.getZoom(),A=this.getBearing(),k=this.getPitch(),O=this.getPadding(),$="bearing"in n?this._normalizeBearing(n.bearing,A):A,te="pitch"in n?+n.pitch:k,Q="padding"in n?n.padding:g.padding,pe=l.P.convert(n.offset);let we=g.centerPoint.add(pe);const Ae=g.pointLocation(we),{center:ze,zoom:ke}=g.getConstrained(l.N.convert(n.center||Ae),(p=n.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(ze);const De=g.zoomScale(ke-_),qe=g.project(Ae),je=g.project(ze).sub(qe);let Je=n.curve;const rt=Math.max(g.width,g.height),st=rt/De,mt=je.mag();if("minZoom"in n){const jt=l.ad(Math.min(n.minZoom,_,ke),g.minZoom,g.maxZoom),cr=rt/g.zoomScale(jt-_);Je=Math.sqrt(cr/mt*2)}const wt=Je*Je;function Bt(jt){const cr=(st*st-rt*rt+(jt?-1:1)*wt*wt*mt*mt)/(2*(jt?st:rt)*wt*mt);return Math.log(Math.sqrt(cr*cr+1)-cr)}function Dt(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function bt(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const Tt=Bt(!1);let Gt=function(jt){return bt(Tt)/bt(Tt+Je*jt)},mr=function(jt){return rt*((bt(Tt)*(Dt(cr=Tt+Je*jt)/bt(cr))-Dt(Tt))/wt)/mt;var cr},Ct=(Bt(!0)-Tt)/Je;if(Math.abs(mt)<1e-6||!isFinite(Ct)){if(Math.abs(rt-st)<1e-6)return this.easeTo(n,c);const jt=st<rt?-1:1;Ct=Math.abs(Math.log(st/rt))/Je,mr=()=>0,Gt=cr=>Math.exp(jt*Je*cr)}return n.duration="duration"in n?+n.duration:1e3*Ct/("screenSpeed"in n?+n.screenSpeed/Je:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=A!==$,this._pitching=te!==k,this._padding=!g.isPaddingEqual(Q),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ze),this._ease(jt=>{const cr=jt*Ct,ln=1/Gt(cr);g.zoom=jt===1?ke:_+g.scaleZoom(ln),this._rotating&&(g.bearing=l.z.number(A,$,jt)),this._pitching&&(g.pitch=l.z.number(k,te,jt)),this._padding&&(g.interpolatePadding(O,Q,jt),we=g.centerPoint.add(pe)),this.terrain&&!n.freezeElevation&&this._updateElevation(jt);const xr=jt===1?ze:g.unproject(qe.add(je.mult(mr(cr))).mult(ln));g.setLocationAtPoint(g.renderWorldCopies?xr.wrap():xr,we),this._applyUpdatedTransform(g),this._fireMoveEvents(c)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,c)}return n||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(n,c,p){p.animate===!1||p.duration===0?(n(1),c()):(this._easeStart=b.now(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,c){n=l.b3(n,-180,180);const p=Math.abs(n-c);return Math.abs(n-360-c)<p&&(n-=360),Math.abs(n+360-c)<p&&(n+=360),n}_normalizeCenter(n){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const p=n.lng-c.center.lng;n.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const Jf={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Dl{constructor(n=Jf){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,c){const p=this._map._getUIString(`AttributionControl.${c}`);n.title=p,n.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const c=this._map.style.sourceCaches;for(const g in c){const _=c[g];if(_.used||_.usedForTerrain){const A=_.getSource();A.attribution&&n.indexOf(A.attribution)<0&&n.push(A.attribution)}}n=n.filter(g=>String(g).trim()),n.sort((g,_)=>g.length-_.length),n=n.filter((g,_)=>{for(let A=_+1;A<n.length;A++)if(n[A].indexOf(g)>=0)return!1;return!0});const p=n.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,n.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class sa{constructor(n={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const c=T.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class $t{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const c=++this._id;return this._queue.push({callback:n,id:c,cancelled:!1}),c}remove(n){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const g of p)if(g.id===n)return void(g.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var um=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Yf extends l.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,c){this.sourceCache.update(n,c),this._renderableTilesKeys=[];const p={};for(const g of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.aQ(g.posMatrix,0,l.X,0,l.X,0,1),this._tiles[g.key]=new nt(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(n){for(const c in this._tiles){const p=this._tiles[c];(!n||p.tileID.equals(n)||p.tileID.isChildOf(n)||n.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const c={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16),l.aQ(_.posMatrix,0,l.X,0,l.X,0,1),c[p]=_}else if(g.canonical.isChildOf(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const A=g.canonical.z-n.canonical.z,k=g.canonical.x-(g.canonical.x>>A<<A),O=g.canonical.y-(g.canonical.y>>A<<A),$=l.X>>A;l.aQ(_.posMatrix,0,$,0,$,0,1),l.J(_.posMatrix,_.posMatrix,[-k*$,-O*$,0]),c[p]=_}else if(n.canonical.isChildOf(g.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const A=n.canonical.z-g.canonical.z,k=n.canonical.x-(n.canonical.x>>A<<A),O=n.canonical.y-(n.canonical.y>>A<<A),$=l.X>>A;l.aQ(_.posMatrix,0,l.X,0,l.X,0,1),l.J(_.posMatrix,_.posMatrix,[k*$,O*$,0]),l.K(_.posMatrix,_.posMatrix,[1/2**A,1/2**A,0]),c[p]=_}}return c}getSourceTile(n,c){const p=this.sourceCache._source;let g=n.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!_||!_.dem)&&c)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(n.scaledTo(g--).key);return _}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=n)}}class cm{constructor(n,c,p){this.painter=n,this.sourceCache=new Yf(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,c,p,g=l.X){var _;if(!(c>=0&&c<g&&p>=0&&p<g))return 0;const A=this.getTerrainData(n),k=(_=A.tile)===null||_===void 0?void 0:_.dem;if(!k)return 0;const O=function(Ae,ze,ke){var De=ze[0],qe=ze[1];return Ae[0]=ke[0]*De+ke[4]*qe+ke[12],Ae[1]=ke[1]*De+ke[5]*qe+ke[13],Ae}([],[c/g*l.X,p/g*l.X],A.u_terrain_matrix),$=[O[0]*k.dim,O[1]*k.dim],te=Math.floor($[0]),Q=Math.floor($[1]),pe=$[0]-te,we=$[1]-Q;return k.get(te,Q)*(1-pe)*(1-we)+k.get(te+1,Q)*pe*(1-we)+k.get(te,Q+1)*(1-pe)*we+k.get(te+1,Q+1)*pe*we}getElevationForLngLatZoom(n,c){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(n,c);return this.getElevation(p,g%l.X,_%l.X,l.X)}getElevation(n,c,p,g=l.X){return this.getDEMElevation(n,c,p,g)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const g=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new X(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new X(g,new l.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const c=this.sourceCache.getSourceTile(n,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const g=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new X(g,c.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),c.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+n.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=n.canonical.z-c.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=g?_=n.canonical.z-g:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=n.canonical.x-(n.canonical.x>>_<<_),k=n.canonical.y-(n.canonical.y>>_<<_),O=l.bb(new Float64Array(16),[1/(l.X<<_),1/(l.X<<_),0]);l.J(O,O,[A*l.X,k*l.X,0]),this._demMatrixCache[n.key]={matrix:O,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(n){const c=this.painter,p=c.width/devicePixelRatio,g=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new X(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new X(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,A=0;_<this._coordsTextureSize;_++)for(let k=0;k<this._coordsTextureSize;k++,A+=4)c[A+0]=255&k,c[A+1]=255&_,c[A+2]=k>>8<<4|_>>8,c[A+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),g=new X(n,p,n.gl.RGBA,{premultiply:!1});return g.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,g=p.gl,_=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(_,k-A-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const O=c[0]+(c[2]>>4<<8),$=c[1]+((15&c[2])<<8),te=this.coordsIndex[255-c[3]],Q=te&&this.sourceCache.getTileByID(te);if(!Q)return null;const pe=this._coordsTextureSize,we=(1<<Q.tileID.canonical.z)*pe;return new l.Z((Q.tileID.canonical.x*pe+O)/we+Q.tileID.wrap,(Q.tileID.canonical.y*pe+$)/we,this.getElevation(Q.tileID,O,$,pe))}depthAtPoint(n){const c=new Uint8Array(4),p=this.painter.context,g=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,c=new l.bc,p=new l.aY,g=this.meshSize,_=l.X/g,A=g*g;for(let Q=0;Q<=g;Q++)for(let pe=0;pe<=g;pe++)c.emplaceBack(pe*_,Q*_,0);for(let Q=0;Q<A;Q+=g+1)for(let pe=0;pe<g;pe++)p.emplaceBack(pe+Q,g+pe+Q+1,g+pe+Q+2),p.emplaceBack(pe+Q,g+pe+Q+2,pe+Q+1);const k=c.length,O=k+2*(g+1);for(const Q of[0,1])for(let pe=0;pe<=g;pe++)for(const we of[0,1])c.emplaceBack(pe*_,Q*l.X,we);for(let Q=0;Q<2*g;Q+=2)p.emplaceBack(O+Q,O+Q+1,O+Q+3),p.emplaceBack(O+Q,O+Q+3,O+Q+2),p.emplaceBack(k+Q,k+Q+3,k+Q+1),p.emplaceBack(k+Q,k+Q+2,k+Q+3);const $=c.length,te=$+2*(g+1);for(const Q of[0,1])for(let pe=0;pe<=g;pe++)for(const we of[0,1])c.emplaceBack(Q*l.X,pe*_,we);for(let Q=0;Q<2*g;Q+=2)p.emplaceBack($+Q,$+Q+1,$+Q+3),p.emplaceBack($+Q,$+Q+3,$+Q+2),p.emplaceBack(te+Q,te+Q+3,te+Q+1),p.emplaceBack(te+Q,te+Q+2,te+Q+3);return this._mesh=new Bl(n.createVertexBuffer(c,um.members),n.createIndexBuffer(p),l.a0.simpleSegment(0,0,c.length,p.length)),this._mesh}getMeshFrameDelta(n){return 2*Math.PI*l.bd/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,c){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(n,c);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(n){const c=this.getTerrainData(n).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(n,c){const p=l.Z.fromLngLat(n.wrap()),g=(1<<c)*l.X,_=p.x*g,A=p.y*g,k=Math.floor(_/l.X),O=Math.floor(A/l.X);return{tileID:new l.S(c,0,c,k,O),mercatorX:_,mercatorY:A}}}class qu{constructor(n,c,p){this._context=n,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new X(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:n,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>n.id!==c),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const la={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class hm{constructor(n,c){this.painter=n,this.terrain=c,this.pool=new qu(n.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(p=>!n._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in n.sourceCaches){this._coordsDescendingInv[p]={};const g=n.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const A=this.terrain.sourceCache.getTerrainCoords(_);for(const k in A)this._coordsDescendingInv[p][k]||(this._coordsDescendingInv[p][k]=[]),this._coordsDescendingInv[p][k].push(A[k])}}this._coordsDescendingInvStr={};for(const p of n._order){const g=n._layers[p],_=g.source;if(la[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const A in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][A]=this._coordsDescendingInv[_][A].map(k=>k.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const c=n.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(la[c]&&(this._prevType&&la[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(n.id),!g))return!0;if(la[this._prevType]||la[c]&&g){this._prevType=c;const _=this._stacks.length-1,A=this._stacks[_]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(as(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[_]){const $=this.pool.getObjectForId(k.rtt[_].id);if($.stamp===k.rtt[_].stamp){this.pool.useObject($);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),k.rtt[_]={id:O.id,stamp:O.stamp},p.context.bindFramebuffer.set(O.fbo.framebuffer),p.context.clear({color:l.aN.transparent,stencil:0}),p.currentStencilSource=void 0;for(let $=0;$<A.length;$++){const te=p.style._layers[A[$]],Q=te.source?this._coordsDescendingInv[te.source][k.tileID.key]:[k.tileID];p.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),p._renderTileClippingMasks(te,Q),p.renderLayer(p,p.style.sourceCaches[te.source],te,Q),te.source&&(k.rttCoords[te.source]=this._coordsDescendingInvStr[te.source][k.tileID.key])}}return as(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),la[c]}return!1}}const Lt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Qf=w,tv={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Jf,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},fm=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},ed={showCompass:!0,showZoom:!0,visualizePitch:!1};class dm{constructor(n,c,p=!1){this.mousedown=A=>{this.startMouse(l.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),T.mousePos(this.element,A)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,T.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=n.dragRotate._mouseRotate.getClickTolerance(),_=n.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Df({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:k,bearingDegreesPerPixelMoved:O=.8})=>{const $=new Xc;return new sn({clickTolerance:k,move:(te,Q)=>({bearingDelta:(Q.x-te.x)*O}),moveStateManager:$,enable:A,assignEvents:fm})})({clickTolerance:g,enable:!0}),this.map=n,p&&(this.mousePitch=Zs({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:k,pitchDegreesPerPixelMoved:O=-.5})=>{const $=new Xc;return new sn({clickTolerance:k,move:(te,Q)=>({pitchDelta:(Q.y-te.y)*O}),moveStateManager:$,enable:A,assignEvents:fm})})({clickTolerance:_,enable:!0})),T.addEventListener(c,"mousedown",this.mousedown),T.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(c,"touchcancel",this.reset)}startMouse(n,c){this.mouseRotate.dragStart(n,c),this.mousePitch&&this.mousePitch.dragStart(n,c),T.disableDrag()}startTouch(n,c){this.touchRotate.dragStart(n,c),this.touchPitch&&this.touchPitch.dragStart(n,c),T.disableDrag()}moveMouse(n,c){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(n,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(n,c)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(n,c){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(n,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(n,c)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const n=this.element;T.removeEventListener(n,"mousedown",this.mousedown),T.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let ls;function pm(v,n,c){const p=new l.N(v.lng,v.lat);if(v=new l.N(v.lng,v.lat),n){const g=new l.N(v.lng-360,v.lat),_=new l.N(v.lng+360,v.lat),A=c.locationPoint(v).distSqr(n);c.locationPoint(g).distSqr(n)<A?v=g:c.locationPoint(_).distSqr(n)<A&&(v=_)}for(;Math.abs(v.lng-c.center.lng)>180;){const g=c.locationPoint(v);if(g.x>=0&&g.y>=0&&g.x<=c.width&&g.y<=c.height)break;v.lng>c.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&c.locationPoint(v).y>c.height/2-c.getHorizon()?v:p}const td={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function us(v,n,c){const p=v.classList;for(const g in td)p.remove(`maplibregl-${c}-anchor-${g}`);p.add(`maplibregl-${c}-anchor-${n}`)}class en extends l.E{constructor(n){if(super(),this._onKeyPress=c=>{const p=c.code,g=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=c=>{var p;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?pm(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${td[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${_}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=l.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div");const c=T.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${g}px`),c.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=T.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const A=T.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const k=T.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const De of O){const qe=T.createNS("http://www.w3.org/2000/svg","ellipse");qe.setAttributeNS(null,"opacity","0.04"),qe.setAttributeNS(null,"cx","10.5"),qe.setAttributeNS(null,"cy","5.80029008"),qe.setAttributeNS(null,"rx",De.rx),qe.setAttributeNS(null,"ry",De.ry),k.appendChild(qe)}const $=T.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const te=T.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(te);const Q=T.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");const pe=T.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(pe);const we=T.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"transform","translate(6.0, 7.0)"),we.setAttributeNS(null,"fill","#FFFFFF");const Ae=T.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ze=T.createNS("http://www.w3.org/2000/svg","circle");ze.setAttributeNS(null,"fill","#000000"),ze.setAttributeNS(null,"opacity","0.25"),ze.setAttributeNS(null,"cx","5.5"),ze.setAttributeNS(null,"cy","5.5"),ze.setAttributeNS(null,"r","5.4999962");const ke=T.createNS("http://www.w3.org/2000/svg","circle");ke.setAttributeNS(null,"fill","#FFFFFF"),ke.setAttributeNS(null,"cx","5.5"),ke.setAttributeNS(null,"cy","5.5"),ke.setAttributeNS(null,"r","5.4999962"),Ae.appendChild(ze),Ae.appendChild(ke),A.appendChild(k),A.appendChild($),A.appendChild(Q),A.appendChild(we),A.appendChild(Ae),c.appendChild(A),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(c),this._offset=l.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),us(this._element,this._anchor,"marker"),n&&n.className)for(const c of n.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=l.N.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const g=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var c,p;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,_=g.terrain.depthAtPoint(this._pos),A=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,A)-_<.006)return void(this._element.style.opacity=this._opacity);const k=-this._offset.y/g.transform._pixelPerMeter,O=Math.sin(g.getPitch()*Math.PI/180)*k,$=g.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),te=g.transform.lngLatToCameraDepth(this._lngLat,A+O)-$>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=l.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,c){return n===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const qc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Nl=0,$l=!1;const mm={maxWidth:100,unit:"metric"};function rd(v,n,c){const p=c&&c.maxWidth||100,g=v._container.clientHeight/2,_=v.unproject([0,g]),A=v.unproject([p,g]),k=_.distanceTo(A);if(c&&c.unit==="imperial"){const O=3.2808*k;O>5280?Ku(n,p,O/5280,v._getUIString("ScaleControl.Miles")):Ku(n,p,O,v._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ku(n,p,k/1852,v._getUIString("ScaleControl.NauticalMiles")):k>=1e3?Ku(n,p,k/1e3,v._getUIString("ScaleControl.Kilometers")):Ku(n,p,k,v._getUIString("ScaleControl.Meters"))}function Ku(v,n,c,p){const g=function(_){const A=Math.pow(10,`${Math.floor(_)}`.length-1);let k=_/A;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(O){const $=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*$)/$}(k),A*k}(c);v.style.width=n*(g/c)+"px",v.innerHTML=`${g}&nbsp;${p}`}const ua={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Kc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yt(v){if(v){if(typeof v=="number"){const n=Math.round(Math.abs(v)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,v),"top-left":new l.P(n,n),"top-right":new l.P(-n,n),bottom:new l.P(0,-v),"bottom-left":new l.P(n,-n),"bottom-right":new l.P(-n,-n),left:new l.P(v,0),right:new l.P(-v,0)}}if(v instanceof l.P||Array.isArray(v)){const n=l.P.convert(v);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:l.P.convert(v.center||[0,0]),top:l.P.convert(v.top||[0,0]),"top-left":l.P.convert(v["top-left"]||[0,0]),"top-right":l.P.convert(v["top-right"]||[0,0]),bottom:l.P.convert(v.bottom||[0,0]),"bottom-left":l.P.convert(v["bottom-left"]||[0,0]),"bottom-right":l.P.convert(v["bottom-right"]||[0,0]),left:l.P.convert(v.left||[0,0]),right:l.P.convert(v.right||[0,0])}}return Yt(new l.P(0,0))}const sr=w;d.AJAXError=l.bg,d.Evented=l.E,d.LngLat=l.N,d.MercatorCoordinate=l.Z,d.Point=l.P,d.addProtocol=l.bh,d.config=l.a,d.removeProtocol=l.bi,d.AttributionControl=Dl,d.BoxZoomHandler=ss,d.CanvasSource=tt,d.CooperativeGesturesHandler=Fo,d.DoubleClickZoomHandler=Xf,d.DragPanHandler=go,d.DragRotateHandler=Oo,d.EdgeInsets=H,d.FullscreenControl=class extends l.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var n;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=c==null?void 0:c.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=N,d.GeolocateControl=class extends l.E{constructor(v){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const c=new l.N(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,g=this._map.getBearing(),_=l.e({bearing:g},this.options.fitBoundsOptions),A=et.fromLngLat(c,p);this._map.fitBounds(A,_,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const c=new l.N(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&$l)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=n=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",n===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new en({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new en({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))})}},this.options=l.e({},qc,v)}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return l._(this,arguments,void 0,function*(n=!1){if(ls!==void 0&&!n)return ls;if(window.navigator.permissions===void 0)return ls=!!window.navigator.geolocation,ls;try{ls=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ls=!!window.navigator.geolocation}return ls})}().then(n=>this._setupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Nl=0,$l=!1}_isOutOfMapMaxBounds(v){const n=this._map.getMaxBounds(),c=v.coords;return n&&(c.longitude<n.getWest()||c.longitude>n.getEast()||c.latitude<n.getSouth()||c.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),n=v.getSouthEast(),c=v.getNorthEast(),p=n.distanceTo(c),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nl--,$l=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Nl++,Nl>1?(v={maximumAge:6e5,timeout:0},$l=!0):(v=this.options.positionOptions,$l=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=Mt,d.ImageSource=_e,d.KeyboardHandler=Wf,d.LngLatBounds=et,d.LogoControl=sa,d.Map=class extends ev{constructor(v){l.be.mark(l.bf.create);const n=Object.assign(Object.assign({},tv),v);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(n.maxPitch!=null&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ue(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new $t,this._controls=[],this._mapId=l.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=n.preserveDrawingBuffer===!0,this._antialias=n.antialias===!0,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles===!0,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions===!0,this._collectResourceTiming=n.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Lt),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=n.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=W.addThrottleControl(()=>this.isMoving()),this._requestManager=new ae(n.transformRequest),typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const p=ut(g=>{this._trackResize&&!this._removed&&this.resize(g)._update()},50);this._resizeObserver=new ResizeObserver(g=>{c?p(g):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Q0(this,n),this._hash=n.hash&&new Mt(typeof n.hash=="string"&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,l.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Dl(typeof n.attributionControl=="boolean"?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new sa,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new l.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new l.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new l.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(v,n){if(n===void 0&&(n=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[n];return n.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(v);return n>-1&&this._controls.splice(n,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,n,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,n,c,p)}resize(v){var n;const c=this._containerDimensions(),p=c[0],g=c[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const O=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,O),this.painter.resize(p,g,O)}this.transform.resize(p,g),(n=this._requestedCameraState)===null||n===void 0||n.resize(p,g);const A=!this._moving;return A&&(this.stop(),this.fire(new l.k("movestart",v)).fire(new l.k("move",v))),this.fire(new l.k("resize",v)),A&&this.fire(new l.k("moveend",v)),this}_getClampedPixelRatio(v,n){const{0:c,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=v*g,A=n*g;return Math.min(_>c?c/_:1,A>p?p/A:1)*g}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(et.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(l.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(l.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,n,c){if(v==="mouseenter"||v==="mouseover"){let p=!1;return{layer:n,listener:c,delegates:{mousemove:_=>{const A=this.getLayer(n)?this.queryRenderedFeatures(_.point,{layers:[n]}):[];A.length?p||(p=!0,c.call(this,new Ur(v,this,_.originalEvent,{features:A}))):p=!1},mouseout:()=>{p=!1}}}}if(v==="mouseleave"||v==="mouseout"){let p=!1;return{layer:n,listener:c,delegates:{mousemove:A=>{(this.getLayer(n)?this.queryRenderedFeatures(A.point,{layers:[n]}):[]).length?p=!0:p&&(p=!1,c.call(this,new Ur(v,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,c.call(this,new Ur(v,this,A.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(n)?this.queryRenderedFeatures(g.point,{layers:[n]}):[];_.length&&(g.features=_,c.call(this,g),delete g.features)};return{layer:n,listener:c,delegates:{[v]:p}}}}on(v,n,c){if(c===void 0)return super.on(v,n);const p=this._createDelegatedListener(v,n,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(v,n,c){if(c===void 0)return super.once(v,n);const p=this._createDelegatedListener(v,n,c);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(v,n,c){return c===void 0?super.off(v,n):(this._delegatedListeners&&this._delegatedListeners[v]&&(p=>{const g=this._delegatedListeners[v];for(let _=0;_<g.length;_++){const A=g[_];if(A.layer===n&&A.listener===c){for(const k in A.delegates)this.off(k,A.delegates[k]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(v,n){if(!this.style)return[];let c;const p=v instanceof l.P||Array.isArray(v),g=p?v:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(p?{}:v)||{},g instanceof l.P||typeof g[0]=="number")c=[l.P.convert(g)];else{const _=l.P.convert(g[0]),A=l.P.convert(g[1]);c=[_,new l.P(A.x,_.y),A,new l.P(_.x,A.y),_]}return this.style.queryRenderedFeatures(c,n,this.transform)}querySourceFeatures(v,n){return this.style.querySourceFeatures(v,n)}setStyle(v,n){return(n=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(v,n))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const n=this._locale[v];if(n==null)throw new Error(`Missing UI string '${v}'`);return n}_updateStyle(v,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,n));const c=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Mu(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,n,c):this.style.loadJSON(v,n,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Mu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,n){if(typeof v=="string"){const c=this._requestManager.transformRequest(v,"Style");l.h(c,new AbortController).then(p=>{this._updateDiff(p.data,n)}).catch(p=>{p&&this.fire(new l.j(p))})}else typeof v=="object"&&this._updateDiff(v,n)}_updateDiff(v,n){try{this.style.setState(v,n)&&this._update(!0)}catch(c){l.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(v,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(v,n){return this._lazyInitEmptyStyle(),this.style.addSource(v,n),this._update(!0)}isSourceLoaded(v){const n=this.style&&this.style.sourceCaches[v];if(n!==void 0)return n.loaded();this.fire(new l.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const n=this.style.sourceCaches[v.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&n.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===v.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new cm(this.painter,n,v),this.painter.renderToTexture=new hm(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:v})),this}getTerrain(){var v,n;return(n=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const n in v){const c=v[n]._tiles;for(const p in c){const g=c[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,n,c={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:A,content:k,textFitWidth:O,textFitHeight:$}=c;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||l.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:Q,data:pe}=n,we=n;return this.style.addImage(v,{data:new l.R({width:te,height:Q},new Uint8Array(pe)),pixelRatio:p,stretchX:_,stretchY:A,content:k,textFitWidth:O,textFitHeight:$,sdf:g,version:0,userImage:we}),we.onAdd&&we.onAdd(this,v),this}}{const{width:te,height:Q,data:pe}=b.getImageData(n);this.style.addImage(v,{data:new l.R({width:te,height:Q},pe),pixelRatio:p,stretchX:_,stretchY:A,content:k,textFitWidth:O,textFitHeight:$,sdf:g,version:0})}}updateImage(v,n){const c=this.style.getImage(v);if(!c)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=n instanceof HTMLImageElement||l.b(n)?b.getImageData(n):n,{width:g,height:_,data:A}=p;if(g===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==c.data.width||_!==c.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(n instanceof HTMLImageElement||l.b(n));return c.data.replace(A,k),this.style.updateImage(v,c),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return W.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,n){return this._lazyInitEmptyStyle(),this.style.addLayer(v,n),this._update(!0)}moveLayer(v,n){return this.style.moveLayer(v,n),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,n,c){return this.style.setLayerZoomRange(v,n,c),this._update(!0)}setFilter(v,n,c={}){return this.style.setFilter(v,n,c),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,n,c,p={}){return this.style.setPaintProperty(v,n,c,p),this._update(!0)}getPaintProperty(v,n){return this.style.getPaintProperty(v,n)}setLayoutProperty(v,n,c,p={}){return this.style.setLayoutProperty(v,n,c,p),this._update(!0)}getLayoutProperty(v,n){return this.style.getLayoutProperty(v,n)}setGlyphs(v,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,n,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,n,c,p=>{p||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,n,c=>{c||this._update(!0)}),this}setLight(v,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,n){return this.style.setFeatureState(v,n),this._update()}removeFeatureState(v,n){return this.style.removeFeatureState(v,n),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,n=0;return this._container&&(v=this._container.clientWidth||400,n=this._container.clientHeight||300),[v,n]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const n=this._canvasContainer=T.create("div","maplibregl-canvas-container",v);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const g=this._controlContainer=T.create("div","maplibregl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{_[A]=T.create("div",`maplibregl-ctrl-${A} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,n,c){this._canvas.width=Math.floor(c*v),this._canvas.height=Math.floor(c*n),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{n={requestedAttributes:v},p&&(n.statusMessage=p.statusMessage,n.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!c){const p="Failed to initialize WebGL";throw n?(n.message=p,new Error(JSON.stringify(n))):new Error(p)}this.painter=new Vu(c,this.transform),R.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=b.now();this.style.zoomHistory.update(g,_);const A=new l.a9(g,{now:_,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=A.crossFadingFactor();k===1&&k===this._crossFadingFactor||(c=!0,this._crossFadingFactor=k),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.be.mark(l.bf.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,l.be.mark(l.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),W.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.be.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(v=>{l.be.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Qf}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=Ur,d.MapTouchEvent=gn,d.MapWheelEvent=mo,d.Marker=en,d.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const n=this._map.getZoom(),c=n===this._map.getMaxZoom(),p=n===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);n.title=p,n.setAttribute("aria-label",p)},this.options=l.e({},ed,v),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,n){const c=T.create("button",v,this._container);return c.type="button",c.addEventListener("click",n),c}},d.Popup=class extends l.E{constructor(v){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const k of this.options.className.split(" "))this._container.classList.add(k);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?pm(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!n)return;const p=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const _=Yt(this.options.offset);if(!g){const k=this._container.offsetWidth,O=this._container.offsetHeight;let $;$=p.y+_.bottom.y<O?["top"]:p.y>this._map.transform.height-O?["bottom"]:[],p.x<k/2?$.push("left"):p.x>this._map.transform.width-k/2&&$.push("right"),g=$.length===0?"bottom":$.join("-")}let A=p.add(_[g]);this.options.subpixelPositioning||(A=A.round()),T.setTransform(this._container,`${td[g]} translate(${A.x}px,${A.y}px)`),us(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(ua),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=l.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const n=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=v;p=c.firstChild,p;)n.appendChild(p);return this.setDOMContent(n)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Kc);v&&v.focus()}},d.RasterDEMTileSource=Se,d.RasterTileSource=Vt,d.ScaleControl=class{constructor(v){this._onMove=()=>{rd(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,rd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},mm),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Zf,d.Style=Mu,d.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Gf,d.TwoFingersTouchRotateHandler=Vf,d.TwoFingersTouchZoomHandler=$f,d.TwoFingersTouchZoomRotateHandler=qf,d.VectorTileSource=ur,d.VideoSource=Xe,d.addSourceType=(v,n)=>l._(void 0,void 0,void 0,function*(){if(ue(v))throw new Error(`A source type called "${v}" already exists.`);((c,p)=>{ht[c]=p})(v,n)}),d.clearPrewarmedResources=function(){const v=it;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Fe),it=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return Ve().getRTLTextPluginStatus()},d.getVersion=function(){return sr},d.getWorkerCount=function(){return He.workerCount},d.getWorkerUrl=function(){return l.a.WORKER_URL},d.importScriptInWorkers=function(v){return pt().broadcast("IS",v)},d.prewarm=function(){vt().acquire(Fe)},d.setMaxParallelImageRequests=function(v){l.a.MAX_PARALLEL_IMAGE_REQUESTS=v},d.setRTLTextPlugin=function(v,n){return Ve().setRTLTextPlugin(v,n)},d.setWorkerCount=function(v){He.workerCount=v},d.setWorkerUrl=function(v){l.a.WORKER_URL=v}});var f=i;return f})})($k);var Vk=$k.exports;const Gk=yf(Vk),Pz=eR({__proto__:null,default:Gk},[Vk]),Az="modulepreload",Iz=function(e){return"/osm-address-editor-vite/"+e},vT={},Cz=function(t,i,a){let u=Promise.resolve();if(i&&i.length>0){const f=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),l=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));u=Promise.all(i.map(w=>{if(w=Iz(w),w in vT)return;vT[w]=!0;const E=w.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(!!a)for(let R=f.length-1;R>=0;R--){const L=f[R];if(L.href===w&&(!E||L.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${I}`))return;const T=document.createElement("link");if(T.rel=E?"stylesheet":Az,E||(T.as="script",T.crossOrigin=""),T.href=w,l&&T.setAttribute("nonce",l),document.head.appendChild(T),E)return new Promise((R,L)=>{T.addEventListener("load",R),T.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${w}`)))})}))}return u.then(()=>t()).catch(f=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=f,window.dispatchEvent(d),!d.defaultPrevented)throw f})},kz=yt.createContext(null);function Mz(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,u=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return i===u&&a===f}function Ho(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Ho(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const u of i)if(!t.hasOwnProperty(u)||!Ho(e[u],t[u]))return!1;return!0}return!1}function Oz(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function _T(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Ho(i,a)||t.setProjection(i)}function xT(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function wT(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const u=e.center;e.center=new u.constructor(i.longitude,i.latitude),a=a||u!==e.center}if("zoom"in i){const u=e.zoom;e.zoom=i.zoom,a=a||u!==e.zoom}if("bearing"in i){const u=e.bearing;e.bearing=i.bearing,a=a||u!==e.bearing}if("pitch"in i){const u=e.pitch;e.pitch=i.pitch,a=a||u!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const Fz=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function bT(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let u=null;"interactive"in a&&(u=Object.assign({},a),delete u.interactive);const f=t[a.ref];if(f){u=u||Object.assign({},a),delete u.ref;for(const d of Fz)d in f&&(u[d]=f[d])}return u||a});return{...e,layers:i}}var ST={};const ET={version:8,sources:{},layers:[]},TT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},v_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},PT={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Rz=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],jz=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class sf{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=u=>{const f=this.props[PT[u.type]];f?f(u):u.type==="error"&&console.error(u.error)},this._onPointerEvent=u=>{(u.type==="mousemove"||u.type==="mouseout")&&this._updateHover(u);const f=this.props[TT[u.type]];f&&(this.props.interactiveLayerIds&&u.type!=="mouseover"&&u.type!=="mouseout"&&(u.features=this._hoveredFeatures||this._queryRenderedFeatures(u.point)),f(u),delete u.features)},this._onCameraEvent=u=>{if(!this._internalUpdate){const f=this.props[v_[u.type]];f&&f(u)}u.type in this._deferredEvents&&(this._deferredEvents[u.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const u=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||u||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=sf.savedMaps.pop();if(!a)return null;const u=a.map,f=u.getContainer();for(i.className=f.className;f.childNodes.length>0;)i.appendChild(f.childNodes[0]);u._container=i;const d=u._resizeObserver;d&&(d.disconnect(),d.observe(i)),a.setProps({...t,styleDiffing:!1}),u.resize();const{initialViewState:l}=t;return l&&(l.bounds?u.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),u.isStyleLoaded()?u.fire("load"):u.once("styledata",()=>u.fire("load")),u._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=ET}=i,u={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||zz()||null,container:t,style:bT(a)},f=u.initialViewState||u.viewState||u;if(Object.assign(u,{center:[f.longitude||0,f.latitude||0],zoom:f.zoom||0,pitch:f.pitch||0,bearing:f.bearing||0}),i.gl){const I=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=I,i.gl)}const d=new this._MapClass(u);f.padding&&d.setPadding(f.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const l=d._render;d._render=I=>{this._inRender=!0,l.call(d,I),this._inRender=!1};const w=d._renderTaskQueue.run;d._renderTaskQueue.run=I=>{w.call(d._renderTaskQueue,I),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const E=d.fire;d.fire=this._fireEvent.bind(this,E),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>{this._updateStyleComponents(this.props,{}),_T(d.transform,this._renderTransform)}),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const I in TT)d.on(I,this._onPointerEvent);for(const I in v_)d.on(I,this._onCameraEvent);for(const I in PT)d.on(I,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),sf.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=Oz(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,u=this._renderTransform,{zoom:f,pitch:d,bearing:l}=u,w=a.isMoving();w&&(u.cameraElevationReference="sea");const E=wT(u,{...xT(a.transform),...t});if(w&&(u.cameraElevationReference="ground"),E&&i){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=f!==u.zoom),I.rotate||(I.rotate=l!==u.bearing),I.pitch||(I.pitch=d!==u.pitch)}return w||wT(a.transform,t),E}_updateSettings(t,i){const a=this._map;let u=!1;for(const f of Rz)if(f in t&&!Ho(t[f],i[f])){u=!0;const d=a[`set${f[0].toUpperCase()}${f.slice(1)}`];d==null||d.call(a,t[f])}return u}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=ET,styleDiffing:u=!0}=t,f={diff:u};return"localIdeographFontFamily"in t&&(f.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(bT(a),f),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let u=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Ho(t.light,i.light)&&(u=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Ho(t.fog,i.fog)&&(u=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Ho(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(u=!0,a.setTerrain(t.terrain))),u}_updateHandlers(t,i){var a,u;const f=this._map;let d=!1;for(const l of jz){const w=(a=t[l])!==null&&a!==void 0?a:!0,E=(u=i[l])!==null&&u!==void 0?u:!0;Ho(w,E)||(d=!0,w?f[l].enable(w):f[l].disable())}return d}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:u=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:u.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const f=t.type,d=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),w=l.length>0;!w&&d&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,w&&!d&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,i,a){const u=this._map,f=u.transform,d=typeof i=="string"?i:i.type;return d==="move"&&this._updateViewState(this.props,!1),d in v_&&(typeof i=="object"&&(i.viewState=xT(f)),this._map.isMoving())?(u.transform=this._renderTransform,t.call(u,i,a),u.transform=f,u):(t.call(u,i,a),u)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{_T(this._renderTransform,i),t.transform=i}}}sf.savedMaps=[];function zz(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||ST.MapboxAccessToken}catch{}try{e=e||ST.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const Lz=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Bz(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const u=t.transform;t.transform=e.transform;const f=t.project(a);return t.transform=u,f},unproject:a=>{const u=t.transform;t.transform=e.transform;const f=t.unproject(a);return t.transform=u,f},queryTerrainElevation:(a,u)=>{const f=t.transform;t.transform=e.transform;const d=t.queryTerrainElevation(a,u);return t.transform=f,d},queryRenderedFeatures:(a,u)=>{const f=t.transform;t.transform=e.transform;const d=t.queryRenderedFeatures(a,u);return t.transform=f,d}};for(const a of Dz(t))!(a in i)&&!Lz.includes(a)&&(i[a]=t[a].bind(t));return i}function Dz(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const Nz=typeof document<"u"?yt.useLayoutEffect:yt.useEffect,$z=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Uz(e,t){for(const a of $z)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const wf=yt.createContext(null);function Vz(e,t,i){const a=yt.useContext(kz),[u,f]=yt.useState(null),d=yt.useRef(),{current:l}=yt.useRef({mapLib:null,map:null});yt.useEffect(()=>{const I=e.mapLib;let b=!0,T;return Promise.resolve(I||i).then(R=>{if(!b)return;if(!R)throw new Error("Invalid mapLib");const L="Map"in R?R:R.default;if(!L.Map)throw new Error("Invalid mapLib");if(Uz(L,e),!L.supported||L.supported(e))e.reuseMaps&&(T=sf.reuse(e,d.current)),T||(T=new sf(L.Map,e,d.current)),l.map=Bz(T),l.mapLib=L,f(T),a==null||a.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:L}=e;L?L({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{b=!1,T&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),Nz(()=>{u&&u.setProps(e)}),yt.useImperativeHandle(t,()=>l.map,[u]);const w=yt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),E={height:"100%"};return yt.createElement("div",{id:e.id,ref:d,style:w},u&&yt.createElement(wf.Provider,{value:l},yt.createElement("div",{"mapboxgl-children":"",style:E},e.children)))}const Gz=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ac(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const u=t[a];Number.isFinite(u)&&!Gz.test(a)?i[a]=`${u}px`:i[a]=u}}function Wz(e,t){const{map:i,mapLib:a}=yt.useContext(wf),u=yt.useRef({props:e});u.current.props=e;const f=yt.useMemo(()=>{let j=!1;yt.Children.forEach(e.children,Z=>{Z&&(j=!0)});const le={...e,element:j?document.createElement("div"):null},K=new a.Marker(le);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",Z=>{var W,ae;(ae=(W=u.current.props).onClick)===null||ae===void 0||ae.call(W,{type:"click",target:K,originalEvent:Z})}),K.on("dragstart",Z=>{var W,ae;const q=Z;q.lngLat=f.getLngLat(),(ae=(W=u.current.props).onDragStart)===null||ae===void 0||ae.call(W,q)}),K.on("drag",Z=>{var W,ae;const q=Z;q.lngLat=f.getLngLat(),(ae=(W=u.current.props).onDrag)===null||ae===void 0||ae.call(W,q)}),K.on("dragend",Z=>{var W,ae;const q=Z;q.lngLat=f.getLngLat(),(ae=(W=u.current.props).onDragEnd)===null||ae===void 0||ae.call(W,q)}),K},[]);yt.useEffect(()=>(f.addTo(i.getMap()),()=>{f.remove()}),[]);const{longitude:d,latitude:l,offset:w,style:E,draggable:I=!1,popup:b=null,rotation:T=0,rotationAlignment:R="auto",pitchAlignment:L="auto"}=e;return yt.useEffect(()=>{Ac(f.getElement(),E)},[E]),yt.useImperativeHandle(t,()=>f,[]),(f.getLngLat().lng!==d||f.getLngLat().lat!==l)&&f.setLngLat([d,l]),w&&!Mz(f.getOffset(),w)&&f.setOffset(w),f.isDraggable()!==I&&f.setDraggable(I),f.getRotation()!==T&&f.setRotation(T),f.getRotationAlignment()!==R&&f.setRotationAlignment(R),f.getPitchAlignment()!==L&&f.setPitchAlignment(L),f.getPopup()!==b&&f.setPopup(b),yb.createPortal(e.children,f.getElement())}const Hz=yt.memo(yt.forwardRef(Wz));function AT(e){return new Set(e?e.trim().split(/\s+/):[])}function Zz(e,t){const{map:i,mapLib:a}=yt.useContext(wf),u=yt.useMemo(()=>document.createElement("div"),[]),f=yt.useRef({props:e});f.current.props=e;const d=yt.useMemo(()=>{const l={...e},w=new a.Popup(l);return w.setLngLat([e.longitude,e.latitude]),w.once("open",E=>{var I,b;(b=(I=f.current.props).onOpen)===null||b===void 0||b.call(I,E)}),w},[]);if(yt.useEffect(()=>{const l=w=>{var E,I;(I=(E=f.current.props).onClose)===null||I===void 0||I.call(E,w)};return d.on("close",l),d.setDOMContent(u).addTo(i.getMap()),()=>{d.off("close",l),d.isOpen()&&d.remove()}},[]),yt.useEffect(()=>{Ac(d.getElement(),e.style)},[e.style]),yt.useImperativeHandle(t,()=>d,[]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!Ho(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const l=AT(d.options.className),w=AT(e.className);for(const E of l)w.has(E)||d.removeClassName(E);for(const E of w)l.has(E)||d.addClassName(E);d.options.className=e.className}return yb.createPortal(e.children,u)}yt.memo(yt.forwardRef(Zz));function Xp(e,t,i,a){const u=yt.useContext(wf),f=yt.useMemo(()=>e(u),[]);return yt.useEffect(()=>{const d=a||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,w=typeof i=="function"?i:typeof t=="function"?t:null,{map:E}=u;return E.hasControl(f)||(E.addControl(f,d==null?void 0:d.position),l&&l(u)),()=>{w&&w(u),E.hasControl(f)&&E.removeControl(f)}},[]),f}function Xz(e){const t=Xp(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return yt.useEffect(()=>{Ac(t._container,e.style)},[e.style]),null}yt.memo(Xz);function qz(e){const t=Xp(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.useEffect(()=>{Ac(t._controlContainer,e.style)},[e.style]),null}yt.memo(qz);function Kz(e,t){const i=yt.useRef({props:e}),a=Xp(({mapLib:u})=>{const f=new u.GeolocateControl(e),d=f._setupUI;return f._setupUI=l=>{f._container.hasChildNodes()||d(l)},f.on("geolocate",l=>{var w,E;(E=(w=i.current.props).onGeolocate)===null||E===void 0||E.call(w,l)}),f.on("error",l=>{var w,E;(E=(w=i.current.props).onError)===null||E===void 0||E.call(w,l)}),f.on("outofmaxbounds",l=>{var w,E;(E=(w=i.current.props).onOutOfMaxBounds)===null||E===void 0||E.call(w,l)}),f.on("trackuserlocationstart",l=>{var w,E;(E=(w=i.current.props).onTrackUserLocationStart)===null||E===void 0||E.call(w,l)}),f.on("trackuserlocationend",l=>{var w,E;(E=(w=i.current.props).onTrackUserLocationEnd)===null||E===void 0||E.call(w,l)}),f},{position:e.position});return i.current.props=e,yt.useImperativeHandle(t,()=>a,[]),yt.useEffect(()=>{Ac(a._container,e.style)},[e.style]),null}const Jz=yt.memo(yt.forwardRef(Kz));function Yz(e){const t=Xp(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return yt.useEffect(()=>{Ac(t._container,e.style)},[e.style]),null}const Qz=yt.memo(Yz);function eL(e){const t=Xp(({mapLib:f})=>new f.ScaleControl(e),{position:e.position}),i=yt.useRef(e),a=i.current;i.current=e;const{style:u}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),yt.useEffect(()=>{Ac(t._container,u)},[u]),null}yt.memo(eL);function Ay(e,t){if(!e)throw new Error(t)}function tL(e,t,i,a){if(Ay(i.id===a.id,"layer id changed"),Ay(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:u={},paint:f={},filter:d,minzoom:l,maxzoom:w,beforeId:E}=i;if(E!==a.beforeId&&e.moveLayer(t,E),u!==a.layout){const I=a.layout||{};for(const b in u)Ho(u[b],I[b])||e.setLayoutProperty(t,b,u[b]);for(const b in I)u.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(f!==a.paint){const I=a.paint||{};for(const b in f)Ho(f[b],I[b])||e.setPaintProperty(t,b,f[b]);for(const b in I)f.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}Ho(d,a.filter)||e.setFilter(t,d),(l!==a.minzoom||w!==a.maxzoom)&&e.setLayerZoomRange(t,l,w)}function rL(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let nL=0;function iL(e){const t=yt.useContext(wf).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),u=yt.useMemo(()=>e.id||`jsx-layer-${nL++}`,[]);if(yt.useEffect(()=>{if(t){const d=()=>a(l=>l+1);return t.on("styledata",d),d(),()=>{t.off("styledata",d),t.style&&t.style._loaded&&t.getLayer(u)&&t.removeLayer(u)}}},[t]),t&&t.style&&t.getLayer(u))try{tL(t,u,e,i.current)}catch(d){console.warn(d)}else rL(t,u,e);return i.current=e,null}let oL=0;function aL(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function sL(e,t,i){Ay(t.id===i.id,"source id changed"),Ay(t.type===i.type,"source type changed");let a="",u=0;for(const d in t)d!=="children"&&d!=="id"&&!Ho(i[d],t[d])&&(a=d,u++);if(!u)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&u===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function lL(e){const t=yt.useContext(wf).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),u=yt.useMemo(()=>e.id||`jsx-source-${oL++}`,[]);yt.useEffect(()=>{if(t){const d=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",d),d(),()=>{var l;if(t.off("styledata",d),t.style&&t.style._loaded&&t.getSource(u)){const w=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(w)for(const E of w)E.source===u&&t.removeLayer(E.id);t.removeSource(u)}}}},[t]);let f=t&&t.style&&t.getSource(u);return f?sL(f,e,i.current):f=aL(t,u,e),i.current=e,f&&yt.Children.map(e.children,d=>d&&yt.cloneElement(d,{source:u}))||null}const uL=Cz(()=>Promise.resolve().then(()=>Pz),void 0),cL=yt.forwardRef(function(t,i){return Vz(t,i,uL)}),hL=Hz,fL=Qz,dL=Jz,pL=iL,mL=lL;function IT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function er(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(i),!0).forEach(function(a){ii(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):IT(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Iy(e){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iy(e)}function gL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CT(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function yL(e,t,i){return t&&CT(e.prototype,t),i&&CT(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ii(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function vb(e,t){return _L(e)||wL(e,t)||Wk(e,t)||SL()}function qp(e){return vL(e)||xL(e)||Wk(e)||bL()}function vL(e){if(Array.isArray(e))return ux(e)}function _L(e){if(Array.isArray(e))return e}function xL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wL(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],u=!0,f=!1,d,l;try{for(i=i.call(e);!(u=(d=i.next()).done)&&(a.push(d.value),!(t&&a.length===t));u=!0);}catch(w){f=!0,l=w}finally{try{!u&&i.return!=null&&i.return()}finally{if(f)throw l}}return a}}function Wk(e,t){if(e){if(typeof e=="string")return ux(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ux(e,t)}}function ux(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function bL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kT=function(){},_b={},Hk={},Zk=null,Xk={mark:kT,measure:kT};try{typeof window<"u"&&(_b=window),typeof document<"u"&&(Hk=document),typeof MutationObserver<"u"&&(Zk=MutationObserver),typeof performance<"u"&&(Xk=performance)}catch{}var EL=_b.navigator||{},MT=EL.userAgent,OT=MT===void 0?"":MT,wu=_b,wn=Hk,FT=Zk,ig=Xk;wu.document;var _l=!!wn.documentElement&&!!wn.head&&typeof wn.addEventListener=="function"&&typeof wn.createElement=="function",qk=~OT.indexOf("MSIE")||~OT.indexOf("Trident/"),og,ag,sg,lg,ug,pl="___FONT_AWESOME___",cx=16,Kk="fa",Jk="svg-inline--fa",wc="data-fa-i2svg",hx="data-fa-pseudo-element",TL="data-fa-pseudo-element-pending",xb="data-prefix",wb="data-icon",RT="fontawesome-i2svg",PL="async",AL=["HTML","HEAD","STYLE","SCRIPT"],Yk=function(){try{return!0}catch{return!1}}(),_n="classic",Nn="sharp",bb=[_n,Nn];function Kp(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[_n]}})}var Op=Kp((og={},ii(og,_n,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ii(og,Nn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),og)),Fp=Kp((ag={},ii(ag,_n,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ii(ag,Nn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),ag)),Rp=Kp((sg={},ii(sg,_n,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ii(sg,Nn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),sg)),IL=Kp((lg={},ii(lg,_n,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ii(lg,Nn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),lg)),CL=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,Qk="fa-layers-text",kL=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,ML=Kp((ug={},ii(ug,_n,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ii(ug,Nn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),ug)),eM=[1,2,3,4,5,6,7,8,9,10],OL=eM.concat([11,12,13,14,15,16,17,18,19,20]),FL=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],cc={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},jp=new Set;Object.keys(Fp[_n]).map(jp.add.bind(jp));Object.keys(Fp[Nn]).map(jp.add.bind(jp));var RL=[].concat(bb,qp(jp),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",cc.GROUP,cc.SWAP_OPACITY,cc.PRIMARY,cc.SECONDARY]).concat(eM.map(function(e){return"".concat(e,"x")})).concat(OL.map(function(e){return"w-".concat(e)})),op=wu.FontAwesomeConfig||{};function jL(e){var t=wn.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function zL(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(wn&&typeof wn.querySelector=="function"){var LL=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];LL.forEach(function(e){var t=vb(e,2),i=t[0],a=t[1],u=zL(jL(i));u!=null&&(op[a]=u)})}var tM={styleDefault:"solid",familyDefault:"classic",cssPrefix:Kk,replacementClass:Jk,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};op.familyPrefix&&(op.cssPrefix=op.familyPrefix);var lf=er(er({},tM),op);lf.autoReplaceSvg||(lf.observeMutations=!1);var or={};Object.keys(tM).forEach(function(e){Object.defineProperty(or,e,{enumerable:!0,set:function(i){lf[e]=i,ap.forEach(function(a){return a(or)})},get:function(){return lf[e]}})});Object.defineProperty(or,"familyPrefix",{enumerable:!0,set:function(t){lf.cssPrefix=t,ap.forEach(function(i){return i(or)})},get:function(){return lf.cssPrefix}});wu.FontAwesomeConfig=or;var ap=[];function BL(e){return ap.push(e),function(){ap.splice(ap.indexOf(e),1)}}var eu=cx,Ts={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function DL(e){if(!(!e||!_l)){var t=wn.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=wn.head.childNodes,a=null,u=i.length-1;u>-1;u--){var f=i[u],d=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(d)>-1&&(a=f)}return wn.head.insertBefore(t,a),e}}var NL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function zp(){for(var e=12,t="";e-- >0;)t+=NL[Math.random()*62|0];return t}function bf(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function Sb(e){return e.classList?bf(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function rM(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $L(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(rM(e[i]),'" ')},"").trim()}function R0(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function Eb(e){return e.size!==Ts.size||e.x!==Ts.x||e.y!==Ts.y||e.rotate!==Ts.rotate||e.flipX||e.flipY}function UL(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,u={transform:"translate(".concat(i/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),d="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),w={transform:"".concat(f," ").concat(d," ").concat(l)},E={transform:"translate(".concat(a/2*-1," -256)")};return{outer:u,inner:w,path:E}}function VL(e){var t=e.transform,i=e.width,a=i===void 0?cx:i,u=e.height,f=u===void 0?cx:u,d=e.startCentered,l=d===void 0?!1:d,w="";return l&&qk?w+="translate(".concat(t.x/eu-a/2,"em, ").concat(t.y/eu-f/2,"em) "):l?w+="translate(calc(-50% + ".concat(t.x/eu,"em), calc(-50% + ").concat(t.y/eu,"em)) "):w+="translate(".concat(t.x/eu,"em, ").concat(t.y/eu,"em) "),w+="scale(".concat(t.size/eu*(t.flipX?-1:1),", ").concat(t.size/eu*(t.flipY?-1:1),") "),w+="rotate(".concat(t.rotate,"deg) "),w}var GL=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function nM(){var e=Kk,t=Jk,i=or.cssPrefix,a=or.replacementClass,u=GL;if(i!==e||a!==t){var f=new RegExp("\\.".concat(e,"\\-"),"g"),d=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");u=u.replace(f,".".concat(i,"-")).replace(d,"--".concat(i,"-")).replace(l,".".concat(a))}return u}var jT=!1;function __(){or.autoAddCss&&!jT&&(DL(nM()),jT=!0)}var WL={mixout:function(){return{dom:{css:nM,insertCss:__}}},hooks:function(){return{beforeDOMElementCreation:function(){__()},beforeI2svg:function(){__()}}}},ml=wu||{};ml[pl]||(ml[pl]={});ml[pl].styles||(ml[pl].styles={});ml[pl].hooks||(ml[pl].hooks={});ml[pl].shims||(ml[pl].shims=[]);var Va=ml[pl],iM=[],HL=function e(){wn.removeEventListener("DOMContentLoaded",e),Cy=1,iM.map(function(t){return t()})},Cy=!1;_l&&(Cy=(wn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(wn.readyState),Cy||wn.addEventListener("DOMContentLoaded",HL));function ZL(e){_l&&(Cy?setTimeout(e,0):iM.push(e))}function Jp(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,u=e.children,f=u===void 0?[]:u;return typeof e=="string"?rM(e):"<".concat(t," ").concat($L(a),">").concat(f.map(Jp).join(""),"</").concat(t,">")}function zT(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var XL=function(t,i){return function(a,u,f,d){return t.call(i,a,u,f,d)}},x_=function(t,i,a,u){var f=Object.keys(t),d=f.length,l=u!==void 0?XL(i,u):i,w,E,I;for(a===void 0?(w=1,I=t[f[0]]):(w=0,I=a);w<d;w++)E=f[w],I=l(I,t[E],E,t);return I};function qL(e){for(var t=[],i=0,a=e.length;i<a;){var u=e.charCodeAt(i++);if(u>=55296&&u<=56319&&i<a){var f=e.charCodeAt(i++);(f&64512)==56320?t.push(((u&1023)<<10)+(f&1023)+65536):(t.push(u),i--)}else t.push(u)}return t}function fx(e){var t=qL(e);return t.length===1?t[0].toString(16):null}function KL(e,t){var i=e.length,a=e.charCodeAt(t),u;return a>=55296&&a<=56319&&i>t+1&&(u=e.charCodeAt(t+1),u>=56320&&u<=57343)?(a-55296)*1024+u-56320+65536:a}function LT(e){return Object.keys(e).reduce(function(t,i){var a=e[i],u=!!a.icon;return u?t[a.iconName]=a.icon:t[i]=a,t},{})}function dx(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,u=a===void 0?!1:a,f=LT(t);typeof Va.hooks.addPack=="function"&&!u?Va.hooks.addPack(e,LT(t)):Va.styles[e]=er(er({},Va.styles[e]||{}),f),e==="fas"&&dx("fa",t)}var cg,hg,fg,Lh=Va.styles,JL=Va.shims,YL=(cg={},ii(cg,_n,Object.values(Rp[_n])),ii(cg,Nn,Object.values(Rp[Nn])),cg),Tb=null,oM={},aM={},sM={},lM={},uM={},QL=(hg={},ii(hg,_n,Object.keys(Op[_n])),ii(hg,Nn,Object.keys(Op[Nn])),hg);function e5(e){return~RL.indexOf(e)}function t5(e,t){var i=t.split("-"),a=i[0],u=i.slice(1).join("-");return a===e&&u!==""&&!e5(u)?u:null}var cM=function(){var t=function(f){return x_(Lh,function(d,l,w){return d[w]=x_(l,f,{}),d},{})};oM=t(function(u,f,d){if(f[3]&&(u[f[3]]=d),f[2]){var l=f[2].filter(function(w){return typeof w=="number"});l.forEach(function(w){u[w.toString(16)]=d})}return u}),aM=t(function(u,f,d){if(u[d]=d,f[2]){var l=f[2].filter(function(w){return typeof w=="string"});l.forEach(function(w){u[w]=d})}return u}),uM=t(function(u,f,d){var l=f[2];return u[d]=d,l.forEach(function(w){u[w]=d}),u});var i="far"in Lh||or.autoFetchSvg,a=x_(JL,function(u,f){var d=f[0],l=f[1],w=f[2];return l==="far"&&!i&&(l="fas"),typeof d=="string"&&(u.names[d]={prefix:l,iconName:w}),typeof d=="number"&&(u.unicodes[d.toString(16)]={prefix:l,iconName:w}),u},{names:{},unicodes:{}});sM=a.names,lM=a.unicodes,Tb=j0(or.styleDefault,{family:or.familyDefault})};BL(function(e){Tb=j0(e.styleDefault,{family:or.familyDefault})});cM();function Pb(e,t){return(oM[e]||{})[t]}function r5(e,t){return(aM[e]||{})[t]}function hc(e,t){return(uM[e]||{})[t]}function hM(e){return sM[e]||{prefix:null,iconName:null}}function n5(e){var t=lM[e],i=Pb("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function bu(){return Tb}var Ab=function(){return{prefix:null,iconName:null,rest:[]}};function j0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?_n:i,u=Op[a][e],f=Fp[a][e]||Fp[a][u],d=e in Va.styles?e:null;return f||d||null}var BT=(fg={},ii(fg,_n,Object.keys(Rp[_n])),ii(fg,Nn,Object.keys(Rp[Nn])),fg);function z0(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,u=a===void 0?!1:a,f=(t={},ii(t,_n,"".concat(or.cssPrefix,"-").concat(_n)),ii(t,Nn,"".concat(or.cssPrefix,"-").concat(Nn)),t),d=null,l=_n;(e.includes(f[_n])||e.some(function(E){return BT[_n].includes(E)}))&&(l=_n),(e.includes(f[Nn])||e.some(function(E){return BT[Nn].includes(E)}))&&(l=Nn);var w=e.reduce(function(E,I){var b=t5(or.cssPrefix,I);if(Lh[I]?(I=YL[l].includes(I)?IL[l][I]:I,d=I,E.prefix=I):QL[l].indexOf(I)>-1?(d=I,E.prefix=j0(I,{family:l})):b?E.iconName=b:I!==or.replacementClass&&I!==f[_n]&&I!==f[Nn]&&E.rest.push(I),!u&&E.prefix&&E.iconName){var T=d==="fa"?hM(E.iconName):{},R=hc(E.prefix,E.iconName);T.prefix&&(d=null),E.iconName=T.iconName||R||E.iconName,E.prefix=T.prefix||E.prefix,E.prefix==="far"&&!Lh.far&&Lh.fas&&!or.autoFetchSvg&&(E.prefix="fas")}return E},Ab());return(e.includes("fa-brands")||e.includes("fab"))&&(w.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(w.prefix="fad"),!w.prefix&&l===Nn&&(Lh.fass||or.autoFetchSvg)&&(w.prefix="fass",w.iconName=hc(w.prefix,w.iconName)||w.iconName),(w.prefix==="fa"||d==="fa")&&(w.prefix=bu()||"fas"),w}var i5=function(){function e(){gL(this,e),this.definitions={}}return yL(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];var d=u.reduce(this._pullDefinitions,{});Object.keys(d).forEach(function(l){i.definitions[l]=er(er({},i.definitions[l]||{}),d[l]),dx(l,d[l]);var w=Rp[_n][l];w&&dx(w,d[l]),cM()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var u=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(u).map(function(f){var d=u[f],l=d.prefix,w=d.iconName,E=d.icon,I=E[2];i[l]||(i[l]={}),I.length>0&&I.forEach(function(b){typeof b=="string"&&(i[l][b]=E)}),i[l][w]=E}),i}}]),e}(),DT=[],Bh={},qh={},o5=Object.keys(qh);function a5(e,t){var i=t.mixoutsTo;return DT=e,Bh={},Object.keys(qh).forEach(function(a){o5.indexOf(a)===-1&&delete qh[a]}),DT.forEach(function(a){var u=a.mixout?a.mixout():{};if(Object.keys(u).forEach(function(d){typeof u[d]=="function"&&(i[d]=u[d]),Iy(u[d])==="object"&&Object.keys(u[d]).forEach(function(l){i[d]||(i[d]={}),i[d][l]=u[d][l]})}),a.hooks){var f=a.hooks();Object.keys(f).forEach(function(d){Bh[d]||(Bh[d]=[]),Bh[d].push(f[d])})}a.provides&&a.provides(qh)}),i}function px(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),u=2;u<i;u++)a[u-2]=arguments[u];var f=Bh[e]||[];return f.forEach(function(d){t=d.apply(null,[t].concat(a))}),t}function bc(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var u=Bh[e]||[];u.forEach(function(f){f.apply(null,i)})}function gl(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return qh[e]?qh[e].apply(null,t):void 0}function mx(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||bu();if(t)return t=hc(i,t)||t,zT(fM.definitions,i,t)||zT(Va.styles,i,t)}var fM=new i5,s5=function(){or.autoReplaceSvg=!1,or.observeMutations=!1,bc("noAuto")},l5={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _l?(bc("beforeI2svg",t),gl("pseudoElements2svg",t),gl("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;or.autoReplaceSvg===!1&&(or.autoReplaceSvg=!0),or.observeMutations=!0,ZL(function(){c5({autoReplaceSvgRoot:i}),bc("watch",t)})}},u5={icon:function(t){if(t===null)return null;if(Iy(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:hc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=j0(t[0]);return{prefix:a,iconName:hc(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(or.cssPrefix,"-"))>-1||t.match(CL))){var u=z0(t.split(" "),{skipLookups:!0});return{prefix:u.prefix||bu(),iconName:hc(u.prefix,u.iconName)||u.iconName}}if(typeof t=="string"){var f=bu();return{prefix:f,iconName:hc(f,t)||t}}}},Yo={noAuto:s5,config:or,dom:l5,parse:u5,library:fM,findIconDefinition:mx,toHtml:Jp},c5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?wn:i;(Object.keys(Va.styles).length>0||or.autoFetchSvg)&&_l&&or.autoReplaceSvg&&Yo.dom.i2svg({node:a})};function L0(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return Jp(a)})}}),Object.defineProperty(e,"node",{get:function(){if(_l){var a=wn.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function h5(e){var t=e.children,i=e.main,a=e.mask,u=e.attributes,f=e.styles,d=e.transform;if(Eb(d)&&i.found&&!a.found){var l=i.width,w=i.height,E={x:l/w/2,y:.5};u.style=R0(er(er({},f),{},{"transform-origin":"".concat(E.x+d.x/16,"em ").concat(E.y+d.y/16,"em")}))}return[{tag:"svg",attributes:u,children:t}]}function f5(e){var t=e.prefix,i=e.iconName,a=e.children,u=e.attributes,f=e.symbol,d=f===!0?"".concat(t,"-").concat(or.cssPrefix,"-").concat(i):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:er(er({},u),{},{id:d}),children:a}]}]}function Ib(e){var t=e.icons,i=t.main,a=t.mask,u=e.prefix,f=e.iconName,d=e.transform,l=e.symbol,w=e.title,E=e.maskId,I=e.titleId,b=e.extra,T=e.watchable,R=T===void 0?!1:T,L=a.found?a:i,j=L.width,le=L.height,K=u==="fak",Z=[or.replacementClass,f?"".concat(or.cssPrefix,"-").concat(f):""].filter(function(B){return b.classes.indexOf(B)===-1}).filter(function(B){return B!==""||!!B}).concat(b.classes).join(" "),W={children:[],attributes:er(er({},b.attributes),{},{"data-prefix":u,"data-icon":f,class:Z,role:b.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(j," ").concat(le)})},ae=K&&!~b.classes.indexOf("fa-fw")?{width:"".concat(j/le*16*.0625,"em")}:{};R&&(W.attributes[wc]=""),w&&(W.children.push({tag:"title",attributes:{id:W.attributes["aria-labelledby"]||"title-".concat(I||zp())},children:[w]}),delete W.attributes.title);var q=er(er({},W),{},{prefix:u,iconName:f,main:i,mask:a,maskId:E,transform:d,symbol:l,styles:er(er({},ae),b.styles)}),V=a.found&&i.found?gl("generateAbstractMask",q)||{children:[],attributes:{}}:gl("generateAbstractIcon",q)||{children:[],attributes:{}},P=V.children,z=V.attributes;return q.children=P,q.attributes=z,l?f5(q):h5(q)}function NT(e){var t=e.content,i=e.width,a=e.height,u=e.transform,f=e.title,d=e.extra,l=e.watchable,w=l===void 0?!1:l,E=er(er(er({},d.attributes),f?{title:f}:{}),{},{class:d.classes.join(" ")});w&&(E[wc]="");var I=er({},d.styles);Eb(u)&&(I.transform=VL({transform:u,startCentered:!0,width:i,height:a}),I["-webkit-transform"]=I.transform);var b=R0(I);b.length>0&&(E.style=b);var T=[];return T.push({tag:"span",attributes:E,children:[t]}),f&&T.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),T}function d5(e){var t=e.content,i=e.title,a=e.extra,u=er(er(er({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),f=R0(a.styles);f.length>0&&(u.style=f);var d=[];return d.push({tag:"span",attributes:u,children:[t]}),i&&d.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),d}var w_=Va.styles;function gx(e){var t=e[0],i=e[1],a=e.slice(4),u=vb(a,1),f=u[0],d=null;return Array.isArray(f)?d={tag:"g",attributes:{class:"".concat(or.cssPrefix,"-").concat(cc.GROUP)},children:[{tag:"path",attributes:{class:"".concat(or.cssPrefix,"-").concat(cc.SECONDARY),fill:"currentColor",d:f[0]}},{tag:"path",attributes:{class:"".concat(or.cssPrefix,"-").concat(cc.PRIMARY),fill:"currentColor",d:f[1]}}]}:d={tag:"path",attributes:{fill:"currentColor",d:f}},{found:!0,width:t,height:i,icon:d}}var p5={found:!1,width:512,height:512};function m5(e,t){!Yk&&!or.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function yx(e,t){var i=t;return t==="fa"&&or.styleDefault!==null&&(t=bu()),new Promise(function(a,u){if(gl("missingIconAbstract"),i==="fa"){var f=hM(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&w_[t]&&w_[t][e]){var d=w_[t][e];return a(gx(d))}m5(e,t),a(er(er({},p5),{},{icon:or.showMissingIcons&&e?gl("missingIconAbstract")||{}:{}}))})}var $T=function(){},vx=or.measurePerformance&&ig&&ig.mark&&ig.measure?ig:{mark:$T,measure:$T},$d='FA "6.5.2"',g5=function(t){return vx.mark("".concat($d," ").concat(t," begins")),function(){return dM(t)}},dM=function(t){vx.mark("".concat($d," ").concat(t," ends")),vx.measure("".concat($d," ").concat(t),"".concat($d," ").concat(t," begins"),"".concat($d," ").concat(t," ends"))},Cb={begin:g5,end:dM},Dg=function(){};function UT(e){var t=e.getAttribute?e.getAttribute(wc):null;return typeof t=="string"}function y5(e){var t=e.getAttribute?e.getAttribute(xb):null,i=e.getAttribute?e.getAttribute(wb):null;return t&&i}function v5(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(or.replacementClass)}function _5(){if(or.autoReplaceSvg===!0)return Ng.replace;var e=Ng[or.autoReplaceSvg];return e||Ng.replace}function x5(e){return wn.createElementNS("http://www.w3.org/2000/svg",e)}function w5(e){return wn.createElement(e)}function pM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?x5:w5:i;if(typeof e=="string")return wn.createTextNode(e);var u=a(e.tag);Object.keys(e.attributes||[]).forEach(function(d){u.setAttribute(d,e.attributes[d])});var f=e.children||[];return f.forEach(function(d){u.appendChild(pM(d,{ceFn:a}))}),u}function b5(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Ng={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(u){i.parentNode.insertBefore(pM(u),i)}),i.getAttribute(wc)===null&&or.keepOriginalSource){var a=wn.createComment(b5(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~Sb(i).indexOf(or.replacementClass))return Ng.replace(t);var u=new RegExp("".concat(or.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var f=a[0].attributes.class.split(" ").reduce(function(l,w){return w===or.replacementClass||w.match(u)?l.toSvg.push(w):l.toNode.push(w),l},{toNode:[],toSvg:[]});a[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",f.toNode.join(" "))}var d=a.map(function(l){return Jp(l)}).join(`
`);i.setAttribute(wc,""),i.innerHTML=d}};function VT(e){e()}function mM(e,t){var i=typeof t=="function"?t:Dg;if(e.length===0)i();else{var a=VT;or.mutateApproach===PL&&(a=wu.requestAnimationFrame||VT),a(function(){var u=_5(),f=Cb.begin("mutate");e.map(u),f(),i()})}}var kb=!1;function gM(){kb=!0}function _x(){kb=!1}var ky=null;function GT(e){if(FT&&or.observeMutations){var t=e.treeCallback,i=t===void 0?Dg:t,a=e.nodeCallback,u=a===void 0?Dg:a,f=e.pseudoElementsCallback,d=f===void 0?Dg:f,l=e.observeMutationsRoot,w=l===void 0?wn:l;ky=new FT(function(E){if(!kb){var I=bu();bf(E).forEach(function(b){if(b.type==="childList"&&b.addedNodes.length>0&&!UT(b.addedNodes[0])&&(or.searchPseudoElements&&d(b.target),i(b.target)),b.type==="attributes"&&b.target.parentNode&&or.searchPseudoElements&&d(b.target.parentNode),b.type==="attributes"&&UT(b.target)&&~FL.indexOf(b.attributeName))if(b.attributeName==="class"&&y5(b.target)){var T=z0(Sb(b.target)),R=T.prefix,L=T.iconName;b.target.setAttribute(xb,R||I),L&&b.target.setAttribute(wb,L)}else v5(b.target)&&u(b.target)})}}),_l&&ky.observe(w,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function S5(){ky&&ky.disconnect()}function E5(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,u){var f=u.split(":"),d=f[0],l=f.slice(1);return d&&l.length>0&&(a[d]=l.join(":").trim()),a},{})),i}function T5(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",u=z0(Sb(e));return u.prefix||(u.prefix=bu()),t&&i&&(u.prefix=t,u.iconName=i),u.iconName&&u.prefix||(u.prefix&&a.length>0&&(u.iconName=r5(u.prefix,e.innerText)||Pb(u.prefix,fx(e.innerText))),!u.iconName&&or.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(u.iconName=e.firstChild.data)),u}function P5(e){var t=bf(e.attributes).reduce(function(u,f){return u.name!=="class"&&u.name!=="style"&&(u[f.name]=f.value),u},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return or.autoA11y&&(i?t["aria-labelledby"]="".concat(or.replacementClass,"-title-").concat(a||zp()):(t["aria-hidden"]="true",t.focusable="false")),t}function A5(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ts,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function WT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=T5(e),a=i.iconName,u=i.prefix,f=i.rest,d=P5(e),l=px("parseNodeAttributes",{},e),w=t.styleParser?E5(e):[];return er({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:u,transform:Ts,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:f,styles:w,attributes:d}},l)}var I5=Va.styles;function yM(e){var t=or.autoReplaceSvg==="nest"?WT(e,{styleParser:!1}):WT(e);return~t.extra.classes.indexOf(Qk)?gl("generateLayersText",e,t):gl("generateSvgReplacementMutation",e,t)}var Su=new Set;bb.map(function(e){Su.add("fa-".concat(e))});Object.keys(Op[_n]).map(Su.add.bind(Su));Object.keys(Op[Nn]).map(Su.add.bind(Su));Su=qp(Su);function HT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!_l)return Promise.resolve();var i=wn.documentElement.classList,a=function(b){return i.add("".concat(RT,"-").concat(b))},u=function(b){return i.remove("".concat(RT,"-").concat(b))},f=or.autoFetchSvg?Su:bb.map(function(I){return"fa-".concat(I)}).concat(Object.keys(I5));f.includes("fa")||f.push("fa");var d=[".".concat(Qk,":not([").concat(wc,"])")].concat(f.map(function(I){return".".concat(I,":not([").concat(wc,"])")})).join(", ");if(d.length===0)return Promise.resolve();var l=[];try{l=bf(e.querySelectorAll(d))}catch{}if(l.length>0)a("pending"),u("complete");else return Promise.resolve();var w=Cb.begin("onTree"),E=l.reduce(function(I,b){try{var T=yM(b);T&&I.push(T)}catch(R){Yk||R.name==="MissingIcon"&&console.error(R)}return I},[]);return new Promise(function(I,b){Promise.all(E).then(function(T){mM(T,function(){a("active"),a("complete"),u("pending"),typeof t=="function"&&t(),w(),I()})}).catch(function(T){w(),b(T)})})}function C5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;yM(e).then(function(i){i&&mM([i],t)})}function k5(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:mx(t||{}),u=i.mask;return u&&(u=(u||{}).icon?u:mx(u||{})),e(a,er(er({},i),{},{mask:u}))}}var M5=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,u=a===void 0?Ts:a,f=i.symbol,d=f===void 0?!1:f,l=i.mask,w=l===void 0?null:l,E=i.maskId,I=E===void 0?null:E,b=i.title,T=b===void 0?null:b,R=i.titleId,L=R===void 0?null:R,j=i.classes,le=j===void 0?[]:j,K=i.attributes,Z=K===void 0?{}:K,W=i.styles,ae=W===void 0?{}:W;if(t){var q=t.prefix,V=t.iconName,P=t.icon;return L0(er({type:"icon"},t),function(){return bc("beforeDOMElementCreation",{iconDefinition:t,params:i}),or.autoA11y&&(T?Z["aria-labelledby"]="".concat(or.replacementClass,"-title-").concat(L||zp()):(Z["aria-hidden"]="true",Z.focusable="false")),Ib({icons:{main:gx(P),mask:w?gx(w.icon):{found:!1,width:null,height:null,icon:{}}},prefix:q,iconName:V,transform:er(er({},Ts),u),symbol:d,title:T,maskId:I,titleId:L,extra:{attributes:Z,styles:ae,classes:le}})})}},O5={mixout:function(){return{icon:k5(M5)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=HT,i.nodeCallback=C5,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,u=a===void 0?wn:a,f=i.callback,d=f===void 0?function(){}:f;return HT(u,d)},t.generateSvgReplacementMutation=function(i,a){var u=a.iconName,f=a.title,d=a.titleId,l=a.prefix,w=a.transform,E=a.symbol,I=a.mask,b=a.maskId,T=a.extra;return new Promise(function(R,L){Promise.all([yx(u,l),I.iconName?yx(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(j){var le=vb(j,2),K=le[0],Z=le[1];R([i,Ib({icons:{main:K,mask:Z},prefix:l,iconName:u,transform:w,symbol:E,maskId:b,title:f,titleId:d,extra:T,watchable:!0})])}).catch(L)})},t.generateAbstractIcon=function(i){var a=i.children,u=i.attributes,f=i.main,d=i.transform,l=i.styles,w=R0(l);w.length>0&&(u.style=w);var E;return Eb(d)&&(E=gl("generateAbstractTransformGrouping",{main:f,transform:d,containerWidth:f.width,iconWidth:f.width})),a.push(E||f.icon),{children:a,attributes:u}}}},F5={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.classes,f=u===void 0?[]:u;return L0({type:"layer"},function(){bc("beforeDOMElementCreation",{assembler:i,params:a});var d=[];return i(function(l){Array.isArray(l)?l.map(function(w){d=d.concat(w.abstract)}):d=d.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(or.cssPrefix,"-layers")].concat(qp(f)).join(" ")},children:d}]})}}}},R5={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.title,f=u===void 0?null:u,d=a.classes,l=d===void 0?[]:d,w=a.attributes,E=w===void 0?{}:w,I=a.styles,b=I===void 0?{}:I;return L0({type:"counter",content:i},function(){return bc("beforeDOMElementCreation",{content:i,params:a}),d5({content:i.toString(),title:f,extra:{attributes:E,styles:b,classes:["".concat(or.cssPrefix,"-layers-counter")].concat(qp(l))}})})}}}},j5={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.transform,f=u===void 0?Ts:u,d=a.title,l=d===void 0?null:d,w=a.classes,E=w===void 0?[]:w,I=a.attributes,b=I===void 0?{}:I,T=a.styles,R=T===void 0?{}:T;return L0({type:"text",content:i},function(){return bc("beforeDOMElementCreation",{content:i,params:a}),NT({content:i,transform:er(er({},Ts),f),title:l,extra:{attributes:b,styles:R,classes:["".concat(or.cssPrefix,"-layers-text")].concat(qp(E))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var u=a.title,f=a.transform,d=a.extra,l=null,w=null;if(qk){var E=parseInt(getComputedStyle(i).fontSize,10),I=i.getBoundingClientRect();l=I.width/E,w=I.height/E}return or.autoA11y&&!u&&(d.attributes["aria-hidden"]="true"),Promise.resolve([i,NT({content:i.innerHTML,width:l,height:w,transform:f,title:u,extra:d,watchable:!0})])}}},z5=new RegExp('"',"ug"),ZT=[1105920,1112319];function L5(e){var t=e.replace(z5,""),i=KL(t,0),a=i>=ZT[0]&&i<=ZT[1],u=t.length===2?t[0]===t[1]:!1;return{value:fx(u?t[0]:t),isSecondary:a||u}}function XT(e,t){var i="".concat(TL).concat(t.replace(":","-"));return new Promise(function(a,u){if(e.getAttribute(i)!==null)return a();var f=bf(e.children),d=f.filter(function(P){return P.getAttribute(hx)===t})[0],l=wu.getComputedStyle(e,t),w=l.getPropertyValue("font-family").match(kL),E=l.getPropertyValue("font-weight"),I=l.getPropertyValue("content");if(d&&!w)return e.removeChild(d),a();if(w&&I!=="none"&&I!==""){var b=l.getPropertyValue("content"),T=~["Sharp"].indexOf(w[2])?Nn:_n,R=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(w[2])?Fp[T][w[2].toLowerCase()]:ML[T][E],L=L5(b),j=L.value,le=L.isSecondary,K=w[0].startsWith("FontAwesome"),Z=Pb(R,j),W=Z;if(K){var ae=n5(j);ae.iconName&&ae.prefix&&(Z=ae.iconName,R=ae.prefix)}if(Z&&!le&&(!d||d.getAttribute(xb)!==R||d.getAttribute(wb)!==W)){e.setAttribute(i,W),d&&e.removeChild(d);var q=A5(),V=q.extra;V.attributes[hx]=t,yx(Z,R).then(function(P){var z=Ib(er(er({},q),{},{icons:{main:P,mask:Ab()},prefix:R,iconName:W,extra:V,watchable:!0})),B=wn.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(B,e.firstChild):e.appendChild(B),B.outerHTML=z.map(function(ee){return Jp(ee)}).join(`
`),e.removeAttribute(i),a()}).catch(u)}else a()}else a()})}function B5(e){return Promise.all([XT(e,"::before"),XT(e,"::after")])}function D5(e){return e.parentNode!==document.head&&!~AL.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(hx)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function qT(e){if(_l)return new Promise(function(t,i){var a=bf(e.querySelectorAll("*")).filter(D5).map(B5),u=Cb.begin("searchPseudoElements");gM(),Promise.all(a).then(function(){u(),_x(),t()}).catch(function(){u(),_x(),i()})})}var N5={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=qT,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,u=a===void 0?wn:a;or.searchPseudoElements&&qT(u)}}},KT=!1,$5={mixout:function(){return{dom:{unwatch:function(){gM(),KT=!0}}}},hooks:function(){return{bootstrap:function(){GT(px("mutationObserverCallbacks",{}))},noAuto:function(){S5()},watch:function(i){var a=i.observeMutationsRoot;KT?_x():GT(px("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},JT=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,u){var f=u.toLowerCase().split("-"),d=f[0],l=f.slice(1).join("-");if(d&&l==="h")return a.flipX=!0,a;if(d&&l==="v")return a.flipY=!0,a;if(l=parseFloat(l),isNaN(l))return a;switch(d){case"grow":a.size=a.size+l;break;case"shrink":a.size=a.size-l;break;case"left":a.x=a.x-l;break;case"right":a.x=a.x+l;break;case"up":a.y=a.y-l;break;case"down":a.y=a.y+l;break;case"rotate":a.rotate=a.rotate+l;break}return a},i)},U5={mixout:function(){return{parse:{transform:function(i){return JT(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var u=a.getAttribute("data-fa-transform");return u&&(i.transform=JT(u)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,u=i.transform,f=i.containerWidth,d=i.iconWidth,l={transform:"translate(".concat(f/2," 256)")},w="translate(".concat(u.x*32,", ").concat(u.y*32,") "),E="scale(".concat(u.size/16*(u.flipX?-1:1),", ").concat(u.size/16*(u.flipY?-1:1),") "),I="rotate(".concat(u.rotate," 0 0)"),b={transform:"".concat(w," ").concat(E," ").concat(I)},T={transform:"translate(".concat(d/2*-1," -256)")},R={outer:l,inner:b,path:T};return{tag:"g",attributes:er({},R.outer),children:[{tag:"g",attributes:er({},R.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:er(er({},a.icon.attributes),R.path)}]}]}}}},b_={x:0,y:0,width:"100%",height:"100%"};function YT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function V5(e){return e.tag==="g"?e.children:[e]}var G5={hooks:function(){return{parseNodeAttributes:function(i,a){var u=a.getAttribute("data-fa-mask"),f=u?z0(u.split(" ").map(function(d){return d.trim()})):Ab();return f.prefix||(f.prefix=bu()),i.mask=f,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,u=i.attributes,f=i.main,d=i.mask,l=i.maskId,w=i.transform,E=f.width,I=f.icon,b=d.width,T=d.icon,R=UL({transform:w,containerWidth:b,iconWidth:E}),L={tag:"rect",attributes:er(er({},b_),{},{fill:"white"})},j=I.children?{children:I.children.map(YT)}:{},le={tag:"g",attributes:er({},R.inner),children:[YT(er({tag:I.tag,attributes:er(er({},I.attributes),R.path)},j))]},K={tag:"g",attributes:er({},R.outer),children:[le]},Z="mask-".concat(l||zp()),W="clip-".concat(l||zp()),ae={tag:"mask",attributes:er(er({},b_),{},{id:Z,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[L,K]},q={tag:"defs",children:[{tag:"clipPath",attributes:{id:W},children:V5(T)},ae]};return a.push(q,{tag:"rect",attributes:er({fill:"currentColor","clip-path":"url(#".concat(W,")"),mask:"url(#".concat(Z,")")},b_)}),{children:a,attributes:u}}}},W5={provides:function(t){var i=!1;wu.matchMedia&&(i=wu.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],u={fill:"currentColor"},f={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:er(er({},u),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var d=er(er({},f),{},{attributeName:"opacity"}),l={tag:"circle",attributes:er(er({},u),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||l.children.push({tag:"animate",attributes:er(er({},f),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:er(er({},d),{},{values:"1;0;1;1;0;1;"})}),a.push(l),a.push({tag:"path",attributes:er(er({},u),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:er(er({},d),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:er(er({},u),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:er(er({},d),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},H5={hooks:function(){return{parseNodeAttributes:function(i,a){var u=a.getAttribute("data-fa-symbol"),f=u===null?!1:u===""?!0:u;return i.symbol=f,i}}}},Z5=[WL,O5,F5,R5,j5,N5,$5,U5,G5,W5,H5];a5(Z5,{mixoutsTo:Yo});Yo.noAuto;Yo.config;Yo.library;Yo.dom;var xx=Yo.parse;Yo.findIconDefinition;Yo.toHtml;var X5=Yo.icon;Yo.layer;Yo.text;Yo.counter;var vM={exports:{}},q5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",K5=q5,J5=K5;function _M(){}function xM(){}xM.resetWarningCache=_M;var Y5=function(){function e(a,u,f,d,l,w){if(w!==J5){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xM,resetWarningCache:_M};return i.PropTypes=i,i};vM.exports=Y5();var Q5=vM.exports;const Rr=yf(Q5);function QT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function vs(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?QT(Object(i),!0).forEach(function(a){Dh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QT(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function Dh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function e6(e,t){if(e==null)return{};var i={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function t6(e,t){if(e==null)return{};var i=e6(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function wx(e){return r6(e)||n6(e)||i6(e)||o6()}function r6(e){if(Array.isArray(e))return bx(e)}function n6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function i6(e,t){if(e){if(typeof e=="string")return bx(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bx(e,t)}}function bx(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function o6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a6(e){var t,i=e.beat,a=e.fade,u=e.beatFade,f=e.bounce,d=e.shake,l=e.flash,w=e.spin,E=e.spinPulse,I=e.spinReverse,b=e.pulse,T=e.fixedWidth,R=e.inverse,L=e.border,j=e.listItem,le=e.flip,K=e.size,Z=e.rotation,W=e.pull,ae=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":u,"fa-bounce":f,"fa-shake":d,"fa-flash":l,"fa-spin":w,"fa-spin-reverse":I,"fa-spin-pulse":E,"fa-pulse":b,"fa-fw":T,"fa-inverse":R,"fa-border":L,"fa-li":j,"fa-flip":le===!0,"fa-flip-horizontal":le==="horizontal"||le==="both","fa-flip-vertical":le==="vertical"||le==="both"},Dh(t,"fa-".concat(K),typeof K<"u"&&K!==null),Dh(t,"fa-rotate-".concat(Z),typeof Z<"u"&&Z!==null&&Z!==0),Dh(t,"fa-pull-".concat(W),typeof W<"u"&&W!==null),Dh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ae).map(function(q){return ae[q]?q:null}).filter(function(q){return q})}function s6(e){return e=e-0,e===e}function wM(e){return s6(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var l6=["style"];function u6(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c6(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),u=wM(i.slice(0,a)),f=i.slice(a+1).trim();return u.startsWith("webkit")?t[u6(u)]=f:t[u]=f,t},{})}function bM(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(w){return bM(e,w)}),u=Object.keys(t.attributes||{}).reduce(function(w,E){var I=t.attributes[E];switch(E){case"class":w.attrs.className=I,delete t.attributes.class;break;case"style":w.attrs.style=c6(I);break;default:E.indexOf("aria-")===0||E.indexOf("data-")===0?w.attrs[E.toLowerCase()]=I:w.attrs[wM(E)]=I}return w},{attrs:{}}),f=i.style,d=f===void 0?{}:f,l=t6(i,l6);return u.attrs.style=vs(vs({},u.attrs.style),d),e.apply(void 0,[t.tag,vs(vs({},u.attrs),l)].concat(wx(a)))}var SM=!1;try{SM=!0}catch{}function h6(){if(!SM&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function eP(e){if(e&&My(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(xx.icon)return xx.icon(e);if(e===null)return null;if(e&&My(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function S_(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Dh({},e,t):{}}var tP={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},vu=Pw.forwardRef(function(e,t){var i=vs(vs({},tP),e),a=i.icon,u=i.mask,f=i.symbol,d=i.className,l=i.title,w=i.titleId,E=i.maskId,I=eP(a),b=S_("classes",[].concat(wx(a6(i)),wx((d||"").split(" ")))),T=S_("transform",typeof i.transform=="string"?xx.transform(i.transform):i.transform),R=S_("mask",eP(u)),L=X5(I,vs(vs(vs(vs({},b),T),R),{},{symbol:f,title:l,titleId:w,maskId:E}));if(!L)return h6("Could not find icon",I),null;var j=L.abstract,le={ref:t};return Object.keys(i).forEach(function(K){tP.hasOwnProperty(K)||(le[K]=i[K])}),f6(j[0],le)});vu.displayName="FontAwesomeIcon";vu.propTypes={beat:Rr.bool,border:Rr.bool,beatFade:Rr.bool,bounce:Rr.bool,className:Rr.string,fade:Rr.bool,flash:Rr.bool,mask:Rr.oneOfType([Rr.object,Rr.array,Rr.string]),maskId:Rr.string,fixedWidth:Rr.bool,inverse:Rr.bool,flip:Rr.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Rr.oneOfType([Rr.object,Rr.array,Rr.string]),listItem:Rr.bool,pull:Rr.oneOf(["right","left"]),pulse:Rr.bool,rotation:Rr.oneOf([0,90,180,270]),shake:Rr.bool,size:Rr.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Rr.bool,spinPulse:Rr.bool,spinReverse:Rr.bool,symbol:Rr.oneOfType([Rr.bool,Rr.string]),title:Rr.string,titleId:Rr.string,transform:Rr.oneOfType([Rr.string,Rr.object]),swapOpacity:Rr.bool};var f6=bM.bind(null,Pw.createElement),d6={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Sx={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},p6={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},m6=p6;function dg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var EM={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,u,f){function d(E,I){if(!u[E]){if(!a[E]){var b=typeof dg=="function"&&dg;if(!I&&b)return b(E,!0);if(l)return l(E,!0);var T=new Error("Cannot find module '"+E+"'");throw T.code="MODULE_NOT_FOUND",T}var R=u[E]={exports:{}};a[E][0].call(R.exports,function(L){var j=a[E][1][L];return d(j||L)},R,R.exports,i,a,u,f)}return u[E].exports}for(var l=typeof dg=="function"&&dg,w=0;w<f.length;w++)d(f[w]);return d}return i}()({1:[function(i,a,u){u.byteLength=T,u.toByteArray=L,u.fromByteArray=K;for(var f=[],d=[],l=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,I=w.length;E<I;++E)f[E]=w[E],d[w.charCodeAt(E)]=E;d[45]=62,d[95]=63;function b(Z){var W=Z.length;if(W%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=Z.indexOf("=");ae===-1&&(ae=W);var q=ae===W?0:4-ae%4;return[ae,q]}function T(Z){var W=b(Z),ae=W[0],q=W[1];return(ae+q)*3/4-q}function R(Z,W,ae){return(W+ae)*3/4-ae}function L(Z){var W,ae=b(Z),q=ae[0],V=ae[1],P=new l(R(Z,q,V)),z=0,B=V>0?q-4:q,ee;for(ee=0;ee<B;ee+=4)W=d[Z.charCodeAt(ee)]<<18|d[Z.charCodeAt(ee+1)]<<12|d[Z.charCodeAt(ee+2)]<<6|d[Z.charCodeAt(ee+3)],P[z++]=W>>16&255,P[z++]=W>>8&255,P[z++]=W&255;return V===2&&(W=d[Z.charCodeAt(ee)]<<2|d[Z.charCodeAt(ee+1)]>>4,P[z++]=W&255),V===1&&(W=d[Z.charCodeAt(ee)]<<10|d[Z.charCodeAt(ee+1)]<<4|d[Z.charCodeAt(ee+2)]>>2,P[z++]=W>>8&255,P[z++]=W&255),P}function j(Z){return f[Z>>18&63]+f[Z>>12&63]+f[Z>>6&63]+f[Z&63]}function le(Z,W,ae){for(var q,V=[],P=W;P<ae;P+=3)q=(Z[P]<<16&16711680)+(Z[P+1]<<8&65280)+(Z[P+2]&255),V.push(j(q));return V.join("")}function K(Z){for(var W,ae=Z.length,q=ae%3,V=[],P=16383,z=0,B=ae-q;z<B;z+=P)V.push(le(Z,z,z+P>B?B:z+P));return q===1?(W=Z[ae-1],V.push(f[W>>2]+f[W<<4&63]+"==")):q===2&&(W=(Z[ae-2]<<8)+Z[ae-1],V.push(f[W>>10]+f[W>>4&63]+f[W<<2&63]+"=")),V.join("")}},{}],2:[function(i,a,u){(function(f){(function(){var d=i("base64-js"),l=i("ieee754");u.Buffer=b,u.SlowBuffer=q,u.INSPECT_MAX_BYTES=50;var w=2147483647;u.kMaxLength=w,b.TYPED_ARRAY_SUPPORT=E(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function I(Se){if(Se>w)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var N=new Uint8Array(Se);return N.__proto__=b.prototype,N}function b(Se,N,D){if(typeof Se=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(Se)}return T(Se,N,D)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function T(Se,N,D){if(typeof Se=="string")return le(Se,N);if(ArrayBuffer.isView(Se))return K(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(ur(Se,ArrayBuffer)||Se&&ur(Se.buffer,ArrayBuffer))return Z(Se,N,D);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=Se.valueOf&&Se.valueOf();if(_e!=null&&_e!==Se)return b.from(_e,N,D);var Xe=W(Se);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return b.from(Se[Symbol.toPrimitive]("string"),N,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}b.from=function(Se,N,D){return T(Se,N,D)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function R(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function L(Se,N,D){return R(Se),Se<=0?I(Se):N!==void 0?typeof D=="string"?I(Se).fill(N,D):I(Se).fill(N):I(Se)}b.alloc=function(Se,N,D){return L(Se,N,D)};function j(Se){return R(Se),I(Se<0?0:ae(Se)|0)}b.allocUnsafe=function(Se){return j(Se)},b.allocUnsafeSlow=function(Se){return j(Se)};function le(Se,N){if((typeof N!="string"||N==="")&&(N="utf8"),!b.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var D=V(Se,N)|0,_e=I(D),Xe=_e.write(Se,N);return Xe!==D&&(_e=_e.slice(0,Xe)),_e}function K(Se){for(var N=Se.length<0?0:ae(Se.length)|0,D=I(N),_e=0;_e<N;_e+=1)D[_e]=Se[_e]&255;return D}function Z(Se,N,D){if(N<0||Se.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<N+(D||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return N===void 0&&D===void 0?_e=new Uint8Array(Se):D===void 0?_e=new Uint8Array(Se,N):_e=new Uint8Array(Se,N,D),_e.__proto__=b.prototype,_e}function W(Se){if(b.isBuffer(Se)){var N=ae(Se.length)|0,D=I(N);return D.length===0||Se.copy(D,0,0,N),D}if(Se.length!==void 0)return typeof Se.length!="number"||Vt(Se.length)?I(0):K(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return K(Se.data)}function ae(Se){if(Se>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return Se|0}function q(Se){return+Se!=Se&&(Se=0),b.alloc(+Se)}b.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==b.prototype},b.compare=function(N,D){if(ur(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),ur(D,Uint8Array)&&(D=b.from(D,D.offset,D.byteLength)),!b.isBuffer(N)||!b.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===D)return 0;for(var _e=N.length,Xe=D.length,tt=0,ht=Math.min(_e,Xe);tt<ht;++tt)if(N[tt]!==D[tt]){_e=N[tt],Xe=D[tt];break}return _e<Xe?-1:Xe<_e?1:0},b.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(N,D){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return b.alloc(0);var _e;if(D===void 0)for(D=0,_e=0;_e<N.length;++_e)D+=N[_e].length;var Xe=b.allocUnsafe(D),tt=0;for(_e=0;_e<N.length;++_e){var ht=N[_e];if(ur(ht,Uint8Array)&&(ht=b.from(ht)),!b.isBuffer(ht))throw new TypeError('"list" argument must be an Array of Buffers');ht.copy(Xe,tt),tt+=ht.length}return Xe};function V(Se,N){if(b.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||ur(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var D=Se.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&D===0)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Wt(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return et(Se).length;default:if(Xe)return _e?-1:Wt(Se).length;N=(""+N).toLowerCase(),Xe=!0}}b.byteLength=V;function P(Se,N,D){var _e=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,N>>>=0,D<=N))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return Ce(this,N,D);case"utf8":case"utf-8":return re(this,N,D);case"ascii":return Pe(this,N,D);case"latin1":case"binary":return $e(this,N,D);case"base64":return Y(this,N,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,N,D);default:if(_e)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),_e=!0}}b.prototype._isBuffer=!0;function z(Se,N,D){var _e=Se[N];Se[N]=Se[D],Se[D]=_e}b.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<N;D+=2)z(this,D,D+1);return this},b.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<N;D+=4)z(this,D,D+3),z(this,D+1,D+2);return this},b.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<N;D+=8)z(this,D,D+7),z(this,D+1,D+6),z(this,D+2,D+5),z(this,D+3,D+4);return this},b.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?re(this,0,N):P.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(N){if(!b.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:b.compare(this,N)===0},b.prototype.inspect=function(){var N="",D=u.INSPECT_MAX_BYTES;return N=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(N+=" ... "),"<Buffer "+N+">"},b.prototype.compare=function(N,D,_e,Xe,tt){if(ur(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(D===void 0&&(D=0),_e===void 0&&(_e=N?N.length:0),Xe===void 0&&(Xe=0),tt===void 0&&(tt=this.length),D<0||_e>N.length||Xe<0||tt>this.length)throw new RangeError("out of range index");if(Xe>=tt&&D>=_e)return 0;if(Xe>=tt)return-1;if(D>=_e)return 1;if(D>>>=0,_e>>>=0,Xe>>>=0,tt>>>=0,this===N)return 0;for(var ht=tt-Xe,ue=_e-D,M=Math.min(ht,ue),U=this.slice(Xe,tt),Ee=N.slice(D,_e),Ve=0;Ve<M;++Ve)if(U[Ve]!==Ee[Ve]){ht=U[Ve],ue=Ee[Ve];break}return ht<ue?-1:ue<ht?1:0};function B(Se,N,D,_e,Xe){if(Se.length===0)return-1;if(typeof D=="string"?(_e=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,Vt(D)&&(D=Xe?0:Se.length-1),D<0&&(D=Se.length+D),D>=Se.length){if(Xe)return-1;D=Se.length-1}else if(D<0)if(Xe)D=0;else return-1;if(typeof N=="string"&&(N=b.from(N,_e)),b.isBuffer(N))return N.length===0?-1:ee(Se,N,D,_e,Xe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(Se,N,D):Uint8Array.prototype.lastIndexOf.call(Se,N,D):ee(Se,[N],D,_e,Xe);throw new TypeError("val must be string, number or Buffer")}function ee(Se,N,D,_e,Xe){var tt=1,ht=Se.length,ue=N.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(Se.length<2||N.length<2)return-1;tt=2,ht/=2,ue/=2,D/=2}function M(Ge,Et){return tt===1?Ge[Et]:Ge.readUInt16BE(Et*tt)}var U;if(Xe){var Ee=-1;for(U=D;U<ht;U++)if(M(Se,U)===M(N,Ee===-1?0:U-Ee)){if(Ee===-1&&(Ee=U),U-Ee+1===ue)return Ee*tt}else Ee!==-1&&(U-=U-Ee),Ee=-1}else for(D+ue>ht&&(D=ht-ue),U=D;U>=0;U--){for(var Ve=!0,nt=0;nt<ue;nt++)if(M(Se,U+nt)!==M(N,nt)){Ve=!1;break}if(Ve)return U}return-1}b.prototype.includes=function(N,D,_e){return this.indexOf(N,D,_e)!==-1},b.prototype.indexOf=function(N,D,_e){return B(this,N,D,_e,!0)},b.prototype.lastIndexOf=function(N,D,_e){return B(this,N,D,_e,!1)};function X(Se,N,D,_e){D=Number(D)||0;var Xe=Se.length-D;_e?(_e=Number(_e),_e>Xe&&(_e=Xe)):_e=Xe;var tt=N.length;_e>tt/2&&(_e=tt/2);for(var ht=0;ht<_e;++ht){var ue=parseInt(N.substr(ht*2,2),16);if(Vt(ue))return ht;Se[D+ht]=ue}return ht}function ye(Se,N,D,_e){return _r(Wt(N,Se.length-D),Se,D,_e)}function ge(Se,N,D,_e){return _r(Ht(N),Se,D,_e)}function fe(Se,N,D,_e){return ge(Se,N,D,_e)}function ie(Se,N,D,_e){return _r(et(N),Se,D,_e)}function he(Se,N,D,_e){return _r(lr(N,Se.length-D),Se,D,_e)}b.prototype.write=function(N,D,_e,Xe){if(D===void 0)Xe="utf8",_e=this.length,D=0;else if(_e===void 0&&typeof D=="string")Xe=D,_e=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(_e)?(_e=_e>>>0,Xe===void 0&&(Xe="utf8")):(Xe=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-D;if((_e===void 0||_e>tt)&&(_e=tt),N.length>0&&(_e<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ht=!1;;)switch(Xe){case"hex":return X(this,N,D,_e);case"utf8":case"utf-8":return ye(this,N,D,_e);case"ascii":return ge(this,N,D,_e);case"latin1":case"binary":return fe(this,N,D,_e);case"base64":return ie(this,N,D,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,N,D,_e);default:if(ht)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ht=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(Se,N,D){return N===0&&D===Se.length?d.fromByteArray(Se):d.fromByteArray(Se.slice(N,D))}function re(Se,N,D){D=Math.min(Se.length,D);for(var _e=[],Xe=N;Xe<D;){var tt=Se[Xe],ht=null,ue=tt>239?4:tt>223?3:tt>191?2:1;if(Xe+ue<=D){var M,U,Ee,Ve;switch(ue){case 1:tt<128&&(ht=tt);break;case 2:M=Se[Xe+1],(M&192)===128&&(Ve=(tt&31)<<6|M&63,Ve>127&&(ht=Ve));break;case 3:M=Se[Xe+1],U=Se[Xe+2],(M&192)===128&&(U&192)===128&&(Ve=(tt&15)<<12|(M&63)<<6|U&63,Ve>2047&&(Ve<55296||Ve>57343)&&(ht=Ve));break;case 4:M=Se[Xe+1],U=Se[Xe+2],Ee=Se[Xe+3],(M&192)===128&&(U&192)===128&&(Ee&192)===128&&(Ve=(tt&15)<<18|(M&63)<<12|(U&63)<<6|Ee&63,Ve>65535&&Ve<1114112&&(ht=Ve))}}ht===null?(ht=65533,ue=1):ht>65535&&(ht-=65536,_e.push(ht>>>10&1023|55296),ht=56320|ht&1023),_e.push(ht),Xe+=ue}return be(_e)}var de=4096;function be(Se){var N=Se.length;if(N<=de)return String.fromCharCode.apply(String,Se);for(var D="",_e=0;_e<N;)D+=String.fromCharCode.apply(String,Se.slice(_e,_e+=de));return D}function Pe(Se,N,D){var _e="";D=Math.min(Se.length,D);for(var Xe=N;Xe<D;++Xe)_e+=String.fromCharCode(Se[Xe]&127);return _e}function $e(Se,N,D){var _e="";D=Math.min(Se.length,D);for(var Xe=N;Xe<D;++Xe)_e+=String.fromCharCode(Se[Xe]);return _e}function Ce(Se,N,D){var _e=Se.length;(!N||N<0)&&(N=0),(!D||D<0||D>_e)&&(D=_e);for(var Xe="",tt=N;tt<D;++tt)Xe+=xt(Se[tt]);return Xe}function Fe(Se,N,D){for(var _e=Se.slice(N,D),Xe="",tt=0;tt<_e.length;tt+=2)Xe+=String.fromCharCode(_e[tt]+_e[tt+1]*256);return Xe}b.prototype.slice=function(N,D){var _e=this.length;N=~~N,D=D===void 0?_e:~~D,N<0?(N+=_e,N<0&&(N=0)):N>_e&&(N=_e),D<0?(D+=_e,D<0&&(D=0)):D>_e&&(D=_e),D<N&&(D=N);var Xe=this.subarray(N,D);return Xe.__proto__=b.prototype,Xe};function He(Se,N,D){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+N>D)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(N,D,_e){N=N>>>0,D=D>>>0,_e||He(N,D,this.length);for(var Xe=this[N],tt=1,ht=0;++ht<D&&(tt*=256);)Xe+=this[N+ht]*tt;return Xe},b.prototype.readUIntBE=function(N,D,_e){N=N>>>0,D=D>>>0,_e||He(N,D,this.length);for(var Xe=this[N+--D],tt=1;D>0&&(tt*=256);)Xe+=this[N+--D]*tt;return Xe},b.prototype.readUInt8=function(N,D){return N=N>>>0,D||He(N,1,this.length),this[N]},b.prototype.readUInt16LE=function(N,D){return N=N>>>0,D||He(N,2,this.length),this[N]|this[N+1]<<8},b.prototype.readUInt16BE=function(N,D){return N=N>>>0,D||He(N,2,this.length),this[N]<<8|this[N+1]},b.prototype.readUInt32LE=function(N,D){return N=N>>>0,D||He(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},b.prototype.readUInt32BE=function(N,D){return N=N>>>0,D||He(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},b.prototype.readIntLE=function(N,D,_e){N=N>>>0,D=D>>>0,_e||He(N,D,this.length);for(var Xe=this[N],tt=1,ht=0;++ht<D&&(tt*=256);)Xe+=this[N+ht]*tt;return tt*=128,Xe>=tt&&(Xe-=Math.pow(2,8*D)),Xe},b.prototype.readIntBE=function(N,D,_e){N=N>>>0,D=D>>>0,_e||He(N,D,this.length);for(var Xe=D,tt=1,ht=this[N+--Xe];Xe>0&&(tt*=256);)ht+=this[N+--Xe]*tt;return tt*=128,ht>=tt&&(ht-=Math.pow(2,8*D)),ht},b.prototype.readInt8=function(N,D){return N=N>>>0,D||He(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},b.prototype.readInt16LE=function(N,D){N=N>>>0,D||He(N,2,this.length);var _e=this[N]|this[N+1]<<8;return _e&32768?_e|4294901760:_e},b.prototype.readInt16BE=function(N,D){N=N>>>0,D||He(N,2,this.length);var _e=this[N+1]|this[N]<<8;return _e&32768?_e|4294901760:_e},b.prototype.readInt32LE=function(N,D){return N=N>>>0,D||He(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},b.prototype.readInt32BE=function(N,D){return N=N>>>0,D||He(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},b.prototype.readFloatLE=function(N,D){return N=N>>>0,D||He(N,4,this.length),l.read(this,N,!0,23,4)},b.prototype.readFloatBE=function(N,D){return N=N>>>0,D||He(N,4,this.length),l.read(this,N,!1,23,4)},b.prototype.readDoubleLE=function(N,D){return N=N>>>0,D||He(N,8,this.length),l.read(this,N,!0,52,8)},b.prototype.readDoubleBE=function(N,D){return N=N>>>0,D||He(N,8,this.length),l.read(this,N,!1,52,8)};function We(Se,N,D,_e,Xe,tt){if(!b.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<tt)throw new RangeError('"value" argument is out of bounds');if(D+_e>Se.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(N,D,_e,Xe){if(N=+N,D=D>>>0,_e=_e>>>0,!Xe){var tt=Math.pow(2,8*_e)-1;We(this,N,D,_e,tt,0)}var ht=1,ue=0;for(this[D]=N&255;++ue<_e&&(ht*=256);)this[D+ue]=N/ht&255;return D+_e},b.prototype.writeUIntBE=function(N,D,_e,Xe){if(N=+N,D=D>>>0,_e=_e>>>0,!Xe){var tt=Math.pow(2,8*_e)-1;We(this,N,D,_e,tt,0)}var ht=_e-1,ue=1;for(this[D+ht]=N&255;--ht>=0&&(ue*=256);)this[D+ht]=N/ue&255;return D+_e},b.prototype.writeUInt8=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,1,255,0),this[D]=N&255,D+1},b.prototype.writeUInt16LE=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,2,65535,0),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeUInt16BE=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,2,65535,0),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeUInt32LE=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,4,4294967295,0),this[D+3]=N>>>24,this[D+2]=N>>>16,this[D+1]=N>>>8,this[D]=N&255,D+4},b.prototype.writeUInt32BE=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,4,4294967295,0),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4},b.prototype.writeIntLE=function(N,D,_e,Xe){if(N=+N,D=D>>>0,!Xe){var tt=Math.pow(2,8*_e-1);We(this,N,D,_e,tt-1,-tt)}var ht=0,ue=1,M=0;for(this[D]=N&255;++ht<_e&&(ue*=256);)N<0&&M===0&&this[D+ht-1]!==0&&(M=1),this[D+ht]=(N/ue>>0)-M&255;return D+_e},b.prototype.writeIntBE=function(N,D,_e,Xe){if(N=+N,D=D>>>0,!Xe){var tt=Math.pow(2,8*_e-1);We(this,N,D,_e,tt-1,-tt)}var ht=_e-1,ue=1,M=0;for(this[D+ht]=N&255;--ht>=0&&(ue*=256);)N<0&&M===0&&this[D+ht+1]!==0&&(M=1),this[D+ht]=(N/ue>>0)-M&255;return D+_e},b.prototype.writeInt8=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,1,127,-128),N<0&&(N=255+N+1),this[D]=N&255,D+1},b.prototype.writeInt16LE=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,2,32767,-32768),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeInt16BE=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,2,32767,-32768),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeInt32LE=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,4,2147483647,-2147483648),this[D]=N&255,this[D+1]=N>>>8,this[D+2]=N>>>16,this[D+3]=N>>>24,D+4},b.prototype.writeInt32BE=function(N,D,_e){return N=+N,D=D>>>0,_e||We(this,N,D,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4};function it(Se,N,D,_e,Xe,tt){if(D+_e>Se.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ct(Se,N,D,_e,Xe){return N=+N,D=D>>>0,Xe||it(Se,N,D,4),l.write(Se,N,D,_e,23,4),D+4}b.prototype.writeFloatLE=function(N,D,_e){return ct(this,N,D,!0,_e)},b.prototype.writeFloatBE=function(N,D,_e){return ct(this,N,D,!1,_e)};function vt(Se,N,D,_e,Xe){return N=+N,D=D>>>0,Xe||it(Se,N,D,8),l.write(Se,N,D,_e,52,8),D+8}b.prototype.writeDoubleLE=function(N,D,_e){return vt(this,N,D,!0,_e)},b.prototype.writeDoubleBE=function(N,D,_e){return vt(this,N,D,!1,_e)},b.prototype.copy=function(N,D,_e,Xe){if(!b.isBuffer(N))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!Xe&&Xe!==0&&(Xe=this.length),D>=N.length&&(D=N.length),D||(D=0),Xe>0&&Xe<_e&&(Xe=_e),Xe===_e||N.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-D<Xe-_e&&(Xe=N.length-D+_e);var tt=Xe-_e;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,_e,Xe);else if(this===N&&_e<D&&D<Xe)for(var ht=tt-1;ht>=0;--ht)N[ht+D]=this[ht+_e];else Uint8Array.prototype.set.call(N,this.subarray(_e,Xe),D);return tt},b.prototype.fill=function(N,D,_e,Xe){if(typeof N=="string"){if(typeof D=="string"?(Xe=D,D=0,_e=this.length):typeof _e=="string"&&(Xe=_e,_e=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!b.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(N.length===1){var tt=N.charCodeAt(0);(Xe==="utf8"&&tt<128||Xe==="latin1")&&(N=tt)}}else typeof N=="number"&&(N=N&255);if(D<0||this.length<D||this.length<_e)throw new RangeError("Out of range index");if(_e<=D)return this;D=D>>>0,_e=_e===void 0?this.length:_e>>>0,N||(N=0);var ht;if(typeof N=="number")for(ht=D;ht<_e;++ht)this[ht]=N;else{var ue=b.isBuffer(N)?N:b.from(N,Xe),M=ue.length;if(M===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ht=0;ht<_e-D;++ht)this[ht+D]=ue[ht%M]}return this};var kt=/[^+/0-9A-Za-z-_]/g;function pt(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(kt,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function xt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Wt(Se,N){N=N||1/0;for(var D,_e=Se.length,Xe=null,tt=[],ht=0;ht<_e;++ht){if(D=Se.charCodeAt(ht),D>55295&&D<57344){if(!Xe){if(D>56319){(N-=3)>-1&&tt.push(239,191,189);continue}else if(ht+1===_e){(N-=3)>-1&&tt.push(239,191,189);continue}Xe=D;continue}if(D<56320){(N-=3)>-1&&tt.push(239,191,189),Xe=D;continue}D=(Xe-55296<<10|D-56320)+65536}else Xe&&(N-=3)>-1&&tt.push(239,191,189);if(Xe=null,D<128){if((N-=1)<0)break;tt.push(D)}else if(D<2048){if((N-=2)<0)break;tt.push(D>>6|192,D&63|128)}else if(D<65536){if((N-=3)<0)break;tt.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((N-=4)<0)break;tt.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return tt}function Ht(Se){for(var N=[],D=0;D<Se.length;++D)N.push(Se.charCodeAt(D)&255);return N}function lr(Se,N){for(var D,_e,Xe,tt=[],ht=0;ht<Se.length&&!((N-=2)<0);++ht)D=Se.charCodeAt(ht),_e=D>>8,Xe=D%256,tt.push(Xe),tt.push(_e);return tt}function et(Se){return d.toByteArray(pt(Se))}function _r(Se,N,D,_e){for(var Xe=0;Xe<_e&&!(Xe+D>=N.length||Xe>=Se.length);++Xe)N[Xe+D]=Se[Xe];return Xe}function ur(Se,N){return Se instanceof N||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===N.name}function Vt(Se){return Se!==Se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,u){const f=i("./validator"),d=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");a.exports={XMLParser:d,XMLValidator:f,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,u){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+f+"]["+d+"]*",w=new RegExp("^"+l+"$"),E=function(b,T){const R=[];let L=T.exec(b);for(;L;){const j=[];j.startIndex=T.lastIndex-L[0].length;const le=L.length;for(let K=0;K<le;K++)j.push(L[K]);R.push(j),L=T.exec(b)}return R},I=function(b){const T=w.exec(b);return!(T===null||typeof T>"u")};u.isExist=function(b){return typeof b<"u"},u.isEmptyObject=function(b){return Object.keys(b).length===0},u.merge=function(b,T,R){if(T){const L=Object.keys(T),j=L.length;for(let le=0;le<j;le++)R==="strict"?b[L[le]]=[T[L[le]]]:b[L[le]]=T[L[le]]}},u.getValue=function(b){return u.isExist(b)?b:""},u.isName=I,u.getAllMatches=E,u.nameRegexp=l},{}],5:[function(i,a,u){const f=i("./util"),d={allowBooleanAttributes:!1,unpairedTags:[]};u.validate=function(V,P){P=Object.assign({},d,P);const z=[];let B=!1,ee=!1;V[0]==="\uFEFF"&&(V=V.substr(1));for(let X=0;X<V.length;X++)if(V[X]==="<"&&V[X+1]==="?"){if(X+=2,X=w(V,X),X.err)return X}else if(V[X]==="<"){let ye=X;if(X++,V[X]==="!"){X=E(V,X);continue}else{let ge=!1;V[X]==="/"&&(ge=!0,X++);let fe="";for(;X<V.length&&V[X]!==">"&&V[X]!==" "&&V[X]!=="	"&&V[X]!==`
`&&V[X]!=="\r";X++)fe+=V[X];if(fe=fe.trim(),fe[fe.length-1]==="/"&&(fe=fe.substring(0,fe.length-1),X--),!W(fe)){let Y;return fe.trim().length===0?Y="Invalid space after '<'.":Y="Tag '"+fe+"' is an invalid name.",K("InvalidTag",Y,ae(V,X))}const ie=T(V,X);if(ie===!1)return K("InvalidAttr","Attributes for '"+fe+"' have open quote.",ae(V,X));let he=ie.value;if(X=ie.index,he[he.length-1]==="/"){const Y=X-he.length;he=he.substring(0,he.length-1);const re=L(he,P);if(re===!0)B=!0;else return K(re.err.code,re.err.msg,ae(V,Y+re.err.line))}else if(ge)if(ie.tagClosed){if(he.trim().length>0)return K("InvalidTag","Closing tag '"+fe+"' can't have attributes or invalid starting.",ae(V,ye));{const Y=z.pop();if(fe!==Y.tagName){let re=ae(V,Y.tagStartPos);return K("InvalidTag","Expected closing tag '"+Y.tagName+"' (opened in line "+re.line+", col "+re.col+") instead of closing tag '"+fe+"'.",ae(V,ye))}z.length==0&&(ee=!0)}}else return K("InvalidTag","Closing tag '"+fe+"' doesn't have proper closing.",ae(V,X));else{const Y=L(he,P);if(Y!==!0)return K(Y.err.code,Y.err.msg,ae(V,X-he.length+Y.err.line));if(ee===!0)return K("InvalidXml","Multiple possible root nodes found.",ae(V,X));P.unpairedTags.indexOf(fe)!==-1||z.push({tagName:fe,tagStartPos:ye}),B=!0}for(X++;X<V.length;X++)if(V[X]==="<")if(V[X+1]==="!"){X++,X=E(V,X);continue}else if(V[X+1]==="?"){if(X=w(V,++X),X.err)return X}else break;else if(V[X]==="&"){const Y=le(V,X);if(Y==-1)return K("InvalidChar","char '&' is not expected.",ae(V,X));X=Y}else if(ee===!0&&!l(V[X]))return K("InvalidXml","Extra text at the end",ae(V,X));V[X]==="<"&&X--}}else{if(l(V[X]))continue;return K("InvalidChar","char '"+V[X]+"' is not expected.",ae(V,X))}if(B){if(z.length==1)return K("InvalidTag","Unclosed tag '"+z[0].tagName+"'.",ae(V,z[0].tagStartPos));if(z.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(z.map(X=>X.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function l(V){return V===" "||V==="	"||V===`
`||V==="\r"}function w(V,P){const z=P;for(;P<V.length;P++)if(V[P]=="?"||V[P]==" "){const B=V.substr(z,P-z);if(P>5&&B==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",ae(V,P));if(V[P]=="?"&&V[P+1]==">"){P++;break}else continue}return P}function E(V,P){if(V.length>P+5&&V[P+1]==="-"&&V[P+2]==="-"){for(P+=3;P<V.length;P++)if(V[P]==="-"&&V[P+1]==="-"&&V[P+2]===">"){P+=2;break}}else if(V.length>P+8&&V[P+1]==="D"&&V[P+2]==="O"&&V[P+3]==="C"&&V[P+4]==="T"&&V[P+5]==="Y"&&V[P+6]==="P"&&V[P+7]==="E"){let z=1;for(P+=8;P<V.length;P++)if(V[P]==="<")z++;else if(V[P]===">"&&(z--,z===0))break}else if(V.length>P+9&&V[P+1]==="["&&V[P+2]==="C"&&V[P+3]==="D"&&V[P+4]==="A"&&V[P+5]==="T"&&V[P+6]==="A"&&V[P+7]==="["){for(P+=8;P<V.length;P++)if(V[P]==="]"&&V[P+1]==="]"&&V[P+2]===">"){P+=2;break}}return P}const I='"',b="'";function T(V,P){let z="",B="",ee=!1;for(;P<V.length;P++){if(V[P]===I||V[P]===b)B===""?B=V[P]:B!==V[P]||(B="");else if(V[P]===">"&&B===""){ee=!0;break}z+=V[P]}return B!==""?!1:{value:z,index:P,tagClosed:ee}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function L(V,P){const z=f.getAllMatches(V,R),B={};for(let ee=0;ee<z.length;ee++){if(z[ee][1].length===0)return K("InvalidAttr","Attribute '"+z[ee][2]+"' has no space in starting.",q(z[ee]));if(z[ee][3]!==void 0&&z[ee][4]===void 0)return K("InvalidAttr","Attribute '"+z[ee][2]+"' is without value.",q(z[ee]));if(z[ee][3]===void 0&&!P.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+z[ee][2]+"' is not allowed.",q(z[ee]));const X=z[ee][2];if(!Z(X))return K("InvalidAttr","Attribute '"+X+"' is an invalid name.",q(z[ee]));if(!B.hasOwnProperty(X))B[X]=1;else return K("InvalidAttr","Attribute '"+X+"' is repeated.",q(z[ee]))}return!0}function j(V,P){let z=/\d/;for(V[P]==="x"&&(P++,z=/[\da-fA-F]/);P<V.length;P++){if(V[P]===";")return P;if(!V[P].match(z))break}return-1}function le(V,P){if(P++,V[P]===";")return-1;if(V[P]==="#")return P++,j(V,P);let z=0;for(;P<V.length;P++,z++)if(!(V[P].match(/\w/)&&z<20)){if(V[P]===";")break;return-1}return P}function K(V,P,z){return{err:{code:V,msg:P,line:z.line||z,col:z.col}}}function Z(V){return f.isName(V)}function W(V){return f.isName(V)}function ae(V,P){const z=V.substring(0,P).split(/\r?\n/);return{line:z.length,col:z[z.length-1].length+1}}function q(V){return V.startIndex+V[1].length}},{"./util":4}],6:[function(i,a,u){const f=i("./orderedJs2Xml"),d={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,T){return T},attributeValueProcessor:function(b,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function l(b){this.options=Object.assign({},d,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=I),this.processTextOrObjNode=w,this.options.format?(this.indentate=E,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}l.prototype.build=function(b){return this.options.preserveOrder?f(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},l.prototype.j2x=function(b,T){let R="",L="";for(let j in b)if(Object.prototype.hasOwnProperty.call(b,j))if(typeof b[j]>"u")this.isAttribute(j)&&(L+="");else if(b[j]===null)this.isAttribute(j)?L+="":j[0]==="?"?L+=this.indentate(T)+"<"+j+"?"+this.tagEndChar:L+=this.indentate(T)+"<"+j+"/"+this.tagEndChar;else if(b[j]instanceof Date)L+=this.buildTextValNode(b[j],j,"",T);else if(typeof b[j]!="object"){const le=this.isAttribute(j);if(le)R+=this.buildAttrPairStr(le,""+b[j]);else if(j===this.options.textNodeName){let K=this.options.tagValueProcessor(j,""+b[j]);L+=this.replaceEntitiesValue(K)}else L+=this.buildTextValNode(b[j],j,"",T)}else if(Array.isArray(b[j])){const le=b[j].length;let K="";for(let Z=0;Z<le;Z++){const W=b[j][Z];typeof W>"u"||(W===null?j[0]==="?"?L+=this.indentate(T)+"<"+j+"?"+this.tagEndChar:L+=this.indentate(T)+"<"+j+"/"+this.tagEndChar:typeof W=="object"?this.options.oneListGroup?K+=this.j2x(W,T+1).val:K+=this.processTextOrObjNode(W,j,T):K+=this.buildTextValNode(W,j,"",T))}this.options.oneListGroup&&(K=this.buildObjectNode(K,j,"",T)),L+=K}else if(this.options.attributesGroupName&&j===this.options.attributesGroupName){const le=Object.keys(b[j]),K=le.length;for(let Z=0;Z<K;Z++)R+=this.buildAttrPairStr(le[Z],""+b[j][le[Z]])}else L+=this.processTextOrObjNode(b[j],j,T);return{attrStr:R,val:L}},l.prototype.buildAttrPairStr=function(b,T){return T=this.options.attributeValueProcessor(b,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+b:" "+b+'="'+T+'"'};function w(b,T,R){const L=this.j2x(b,R+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],T,L.attrStr,R):this.buildObjectNode(L.val,T,L.attrStr,R)}l.prototype.buildObjectNode=function(b,T,R,L){if(b==="")return T[0]==="?"?this.indentate(L)+"<"+T+R+"?"+this.tagEndChar:this.indentate(L)+"<"+T+R+this.closeTag(T)+this.tagEndChar;{let j="</"+T+this.tagEndChar,le="";return T[0]==="?"&&(le="?",j=""),(R||R==="")&&b.indexOf("<")===-1?this.indentate(L)+"<"+T+R+le+">"+b+j:this.options.commentPropName!==!1&&T===this.options.commentPropName&&le.length===0?this.indentate(L)+`<!--${b}-->`+this.newLine:this.indentate(L)+"<"+T+R+le+this.tagEndChar+b+this.indentate(L)+j}},l.prototype.closeTag=function(b){let T="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${b}`,T},l.prototype.buildTextValNode=function(b,T,R,L){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(L)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(L)+`<!--${b}-->`+this.newLine;if(T[0]==="?")return this.indentate(L)+"<"+T+R+"?"+this.tagEndChar;{let j=this.options.tagValueProcessor(T,b);return j=this.replaceEntitiesValue(j),j===""?this.indentate(L)+"<"+T+R+this.closeTag(T)+this.tagEndChar:this.indentate(L)+"<"+T+R+">"+j+"</"+T+this.tagEndChar}},l.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const R=this.options.entities[T];b=b.replace(R.regex,R.val)}return b};function E(b){return this.options.indentBy.repeat(b)}function I(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(i,a,u){const f=`
`;function d(T,R){let L="";return R.format&&R.indentBy.length>0&&(L=f),l(T,R,"",L)}function l(T,R,L,j){let le="",K=!1;for(let Z=0;Z<T.length;Z++){const W=T[Z],ae=w(W);if(ae===void 0)continue;let q="";if(L.length===0?q=ae:q=`${L}.${ae}`,ae===R.textNodeName){let ee=W[ae];I(q,R)||(ee=R.tagValueProcessor(ae,ee),ee=b(ee,R)),K&&(le+=j),le+=ee,K=!1;continue}else if(ae===R.cdataPropName){K&&(le+=j),le+=`<![CDATA[${W[ae][0][R.textNodeName]}]]>`,K=!1;continue}else if(ae===R.commentPropName){le+=j+`<!--${W[ae][0][R.textNodeName]}-->`,K=!0;continue}else if(ae[0]==="?"){const ee=E(W[":@"],R),X=ae==="?xml"?"":j;let ye=W[ae][0][R.textNodeName];ye=ye.length!==0?" "+ye:"",le+=X+`<${ae}${ye}${ee}?>`,K=!0;continue}let V=j;V!==""&&(V+=R.indentBy);const P=E(W[":@"],R),z=j+`<${ae}${P}`,B=l(W[ae],R,q,V);R.unpairedTags.indexOf(ae)!==-1?R.suppressUnpairedNode?le+=z+">":le+=z+"/>":(!B||B.length===0)&&R.suppressEmptyNode?le+=z+"/>":B&&B.endsWith(">")?le+=z+`>${B}${j}</${ae}>`:(le+=z+">",B&&j!==""&&(B.includes("/>")||B.includes("</"))?le+=j+R.indentBy+B+j:le+=B,le+=`</${ae}>`),K=!0}return le}function w(T){const R=Object.keys(T);for(let L=0;L<R.length;L++){const j=R[L];if(T.hasOwnProperty(j)&&j!==":@")return j}}function E(T,R){let L="";if(T&&!R.ignoreAttributes)for(let j in T){if(!T.hasOwnProperty(j))continue;let le=R.attributeValueProcessor(j,T[j]);le=b(le,R),le===!0&&R.suppressBooleanAttributes?L+=` ${j.substr(R.attributeNamePrefix.length)}`:L+=` ${j.substr(R.attributeNamePrefix.length)}="${le}"`}return L}function I(T,R){T=T.substr(0,T.length-R.textNodeName.length-1);let L=T.substr(T.lastIndexOf(".")+1);for(let j in R.stopNodes)if(R.stopNodes[j]===T||R.stopNodes[j]==="*."+L)return!0;return!1}function b(T,R){if(T&&T.length>0&&R.processEntities)for(let L=0;L<R.entities.length;L++){const j=R.entities[L];T=T.replace(j.regex,j.val)}return T}a.exports=d},{}],8:[function(i,a,u){const f=i("../util");function d(L,j){const le={};if(L[j+3]==="O"&&L[j+4]==="C"&&L[j+5]==="T"&&L[j+6]==="Y"&&L[j+7]==="P"&&L[j+8]==="E"){j=j+9;let K=1,Z=!1,W=!1,ae="";for(;j<L.length;j++)if(L[j]==="<"&&!W){if(Z&&E(L,j))j+=7,[entityName,val,j]=l(L,j+1),val.indexOf("&")===-1&&(le[R(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(Z&&I(L,j))j+=8;else if(Z&&b(L,j))j+=8;else if(Z&&T(L,j))j+=9;else if(w)W=!0;else throw new Error("Invalid DOCTYPE");K++,ae=""}else if(L[j]===">"){if(W?L[j-1]==="-"&&L[j-2]==="-"&&(W=!1,K--):K--,K===0)break}else L[j]==="["?Z=!0:ae+=L[j];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:le,i:j}}function l(L,j){let le="";for(;j<L.length&&L[j]!=="'"&&L[j]!=='"';j++)le+=L[j];if(le=le.trim(),le.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=L[j++];let Z="";for(;j<L.length&&L[j]!==K;j++)Z+=L[j];return[le,Z,j]}function w(L,j){return L[j+1]==="!"&&L[j+2]==="-"&&L[j+3]==="-"}function E(L,j){return L[j+1]==="!"&&L[j+2]==="E"&&L[j+3]==="N"&&L[j+4]==="T"&&L[j+5]==="I"&&L[j+6]==="T"&&L[j+7]==="Y"}function I(L,j){return L[j+1]==="!"&&L[j+2]==="E"&&L[j+3]==="L"&&L[j+4]==="E"&&L[j+5]==="M"&&L[j+6]==="E"&&L[j+7]==="N"&&L[j+8]==="T"}function b(L,j){return L[j+1]==="!"&&L[j+2]==="A"&&L[j+3]==="T"&&L[j+4]==="T"&&L[j+5]==="L"&&L[j+6]==="I"&&L[j+7]==="S"&&L[j+8]==="T"}function T(L,j){return L[j+1]==="!"&&L[j+2]==="N"&&L[j+3]==="O"&&L[j+4]==="T"&&L[j+5]==="A"&&L[j+6]==="T"&&L[j+7]==="I"&&L[j+8]==="O"&&L[j+9]==="N"}function R(L){if(f.isName(L))return L;throw new Error(`Invalid entity name ${L}`)}a.exports=d},{"../util":4}],9:[function(i,a,u){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(l,w){return w},attributeValueProcessor:function(l,w){return w},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(l,w,E){return l}},d=function(l){return Object.assign({},f,l)};u.buildOptions=d,u.defaultOptions=f},{}],10:[function(i,a,u){const f=i("../util"),d=i("./xmlNode"),l=i("./DocTypeReader"),w=i("strnum");class E{constructor(ee){this.options=ee,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=I,this.parseXml=j,this.parseTextData=b,this.resolveNameSpace=T,this.buildAttributesMap=L,this.isItStopNode=W,this.replaceEntitiesValue=K,this.readStopNodeData=P,this.saveTextToParentTag=Z,this.addChild=le}}function I(B){const ee=Object.keys(B);for(let X=0;X<ee.length;X++){const ye=ee[X];this.lastEntities[ye]={regex:new RegExp("&"+ye+";","g"),val:B[ye]}}}function b(B,ee,X,ye,ge,fe,ie){if(B!==void 0&&(this.options.trimValues&&!ye&&(B=B.trim()),B.length>0)){ie||(B=this.replaceEntitiesValue(B));const he=this.options.tagValueProcessor(ee,B,X,ge,fe);return he==null?B:typeof he!=typeof B||he!==B?he:this.options.trimValues?z(B,this.options.parseTagValue,this.options.numberParseOptions):B.trim()===B?z(B,this.options.parseTagValue,this.options.numberParseOptions):B}}function T(B){if(this.options.removeNSPrefix){const ee=B.split(":"),X=B.charAt(0)==="/"?"/":"";if(ee[0]==="xmlns")return"";ee.length===2&&(B=X+ee[1])}return B}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function L(B,ee,X){if(!this.options.ignoreAttributes&&typeof B=="string"){const ye=f.getAllMatches(B,R),ge=ye.length,fe={};for(let ie=0;ie<ge;ie++){const he=this.resolveNameSpace(ye[ie][1]);let Y=ye[ie][4],re=this.options.attributeNamePrefix+he;if(he.length)if(this.options.transformAttributeName&&(re=this.options.transformAttributeName(re)),re==="__proto__"&&(re="#__proto__"),Y!==void 0){this.options.trimValues&&(Y=Y.trim()),Y=this.replaceEntitiesValue(Y);const de=this.options.attributeValueProcessor(he,Y,ee);de==null?fe[re]=Y:typeof de!=typeof Y||de!==Y?fe[re]=de:fe[re]=z(Y,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(fe[re]=!0)}if(!Object.keys(fe).length)return;if(this.options.attributesGroupName){const ie={};return ie[this.options.attributesGroupName]=fe,ie}return fe}}const j=function(B){B=B.replace(/\r\n?/g,`
`);const ee=new d("!xml");let X=ee,ye="",ge="";for(let fe=0;fe<B.length;fe++)if(B[fe]==="<")if(B[fe+1]==="/"){const he=q(B,">",fe,"Closing Tag is not closed.");let Y=B.substring(fe+2,he).trim();if(this.options.removeNSPrefix){const be=Y.indexOf(":");be!==-1&&(Y=Y.substr(be+1))}this.options.transformTagName&&(Y=this.options.transformTagName(Y)),X&&(ye=this.saveTextToParentTag(ye,X,ge));const re=ge.substring(ge.lastIndexOf(".")+1);if(Y&&this.options.unpairedTags.indexOf(Y)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${Y}>`);let de=0;re&&this.options.unpairedTags.indexOf(re)!==-1?(de=ge.lastIndexOf(".",ge.lastIndexOf(".")-1),this.tagsNodeStack.pop()):de=ge.lastIndexOf("."),ge=ge.substring(0,de),X=this.tagsNodeStack.pop(),ye="",fe=he}else if(B[fe+1]==="?"){let he=V(B,fe,!1,"?>");if(!he)throw new Error("Pi Tag is not closed.");if(ye=this.saveTextToParentTag(ye,X,ge),!(this.options.ignoreDeclaration&&he.tagName==="?xml"||this.options.ignorePiTags)){const Y=new d(he.tagName);Y.add(this.options.textNodeName,""),he.tagName!==he.tagExp&&he.attrExpPresent&&(Y[":@"]=this.buildAttributesMap(he.tagExp,ge,he.tagName)),this.addChild(X,Y,ge)}fe=he.closeIndex+1}else if(B.substr(fe+1,3)==="!--"){const he=q(B,"-->",fe+4,"Comment is not closed.");if(this.options.commentPropName){const Y=B.substring(fe+4,he-2);ye=this.saveTextToParentTag(ye,X,ge),X.add(this.options.commentPropName,[{[this.options.textNodeName]:Y}])}fe=he}else if(B.substr(fe+1,2)==="!D"){const he=l(B,fe);this.docTypeEntities=he.entities,fe=he.i}else if(B.substr(fe+1,2)==="!["){const he=q(B,"]]>",fe,"CDATA is not closed.")-2,Y=B.substring(fe+9,he);if(ye=this.saveTextToParentTag(ye,X,ge),this.options.cdataPropName)X.add(this.options.cdataPropName,[{[this.options.textNodeName]:Y}]);else{let re=this.parseTextData(Y,X.tagname,ge,!0,!1,!0);re==null&&(re=""),X.add(this.options.textNodeName,re)}fe=he+2}else{let he=V(B,fe,this.options.removeNSPrefix),Y=he.tagName;const re=he.rawTagName;let de=he.tagExp,be=he.attrExpPresent,Pe=he.closeIndex;this.options.transformTagName&&(Y=this.options.transformTagName(Y)),X&&ye&&X.tagname!=="!xml"&&(ye=this.saveTextToParentTag(ye,X,ge,!1));const $e=X;if($e&&this.options.unpairedTags.indexOf($e.tagname)!==-1&&(X=this.tagsNodeStack.pop(),ge=ge.substring(0,ge.lastIndexOf("."))),Y!==ee.tagname&&(ge+=ge?"."+Y:Y),this.isItStopNode(this.options.stopNodes,ge,Y)){let Ce="";if(de.length>0&&de.lastIndexOf("/")===de.length-1)fe=he.closeIndex;else if(this.options.unpairedTags.indexOf(Y)!==-1)fe=he.closeIndex;else{const He=this.readStopNodeData(B,re,Pe+1);if(!He)throw new Error(`Unexpected end of ${re}`);fe=He.i,Ce=He.tagContent}const Fe=new d(Y);Y!==de&&be&&(Fe[":@"]=this.buildAttributesMap(de,ge,Y)),Ce&&(Ce=this.parseTextData(Ce,Y,ge,!0,be,!0,!0)),ge=ge.substr(0,ge.lastIndexOf(".")),Fe.add(this.options.textNodeName,Ce),this.addChild(X,Fe,ge)}else{if(de.length>0&&de.lastIndexOf("/")===de.length-1){Y[Y.length-1]==="/"?(Y=Y.substr(0,Y.length-1),ge=ge.substr(0,ge.length-1),de=Y):de=de.substr(0,de.length-1),this.options.transformTagName&&(Y=this.options.transformTagName(Y));const Ce=new d(Y);Y!==de&&be&&(Ce[":@"]=this.buildAttributesMap(de,ge,Y)),this.addChild(X,Ce,ge),ge=ge.substr(0,ge.lastIndexOf("."))}else{const Ce=new d(Y);this.tagsNodeStack.push(X),Y!==de&&be&&(Ce[":@"]=this.buildAttributesMap(de,ge,Y)),this.addChild(X,Ce,ge),X=Ce}ye="",fe=Pe}}else ye+=B[fe];return ee.child};function le(B,ee,X){const ye=this.options.updateTag(ee.tagname,X,ee[":@"]);ye===!1||(typeof ye=="string"&&(ee.tagname=ye),B.addChild(ee))}const K=function(B){if(this.options.processEntities){for(let ee in this.docTypeEntities){const X=this.docTypeEntities[ee];B=B.replace(X.regx,X.val)}for(let ee in this.lastEntities){const X=this.lastEntities[ee];B=B.replace(X.regex,X.val)}if(this.options.htmlEntities)for(let ee in this.htmlEntities){const X=this.htmlEntities[ee];B=B.replace(X.regex,X.val)}B=B.replace(this.ampEntity.regex,this.ampEntity.val)}return B};function Z(B,ee,X,ye){return B&&(ye===void 0&&(ye=Object.keys(ee.child).length===0),B=this.parseTextData(B,ee.tagname,X,!1,ee[":@"]?Object.keys(ee[":@"]).length!==0:!1,ye),B!==void 0&&B!==""&&ee.add(this.options.textNodeName,B),B=""),B}function W(B,ee,X){const ye="*."+X;for(const ge in B){const fe=B[ge];if(ye===fe||ee===fe)return!0}return!1}function ae(B,ee,X=">"){let ye,ge="";for(let fe=ee;fe<B.length;fe++){let ie=B[fe];if(ye)ie===ye&&(ye="");else if(ie==='"'||ie==="'")ye=ie;else if(ie===X[0])if(X[1]){if(B[fe+1]===X[1])return{data:ge,index:fe}}else return{data:ge,index:fe};else ie==="	"&&(ie=" ");ge+=ie}}function q(B,ee,X,ye){const ge=B.indexOf(ee,X);if(ge===-1)throw new Error(ye);return ge+ee.length-1}function V(B,ee,X,ye=">"){const ge=ae(B,ee+1,ye);if(!ge)return;let fe=ge.data;const ie=ge.index,he=fe.search(/\s/);let Y=fe,re=!0;he!==-1&&(Y=fe.substring(0,he),fe=fe.substring(he+1).trimStart());const de=Y;if(X){const be=Y.indexOf(":");be!==-1&&(Y=Y.substr(be+1),re=Y!==ge.data.substr(be+1))}return{tagName:Y,tagExp:fe,closeIndex:ie,attrExpPresent:re,rawTagName:de}}function P(B,ee,X){const ye=X;let ge=1;for(;X<B.length;X++)if(B[X]==="<")if(B[X+1]==="/"){const fe=q(B,">",X,`${ee} is not closed`);if(B.substring(X+2,fe).trim()===ee&&(ge--,ge===0))return{tagContent:B.substring(ye,X),i:fe};X=fe}else if(B[X+1]==="?")X=q(B,"?>",X+1,"StopNode is not closed.");else if(B.substr(X+1,3)==="!--")X=q(B,"-->",X+3,"StopNode is not closed.");else if(B.substr(X+1,2)==="![")X=q(B,"]]>",X,"StopNode is not closed.")-2;else{const fe=V(B,X,">");fe&&((fe&&fe.tagName)===ee&&fe.tagExp[fe.tagExp.length-1]!=="/"&&ge++,X=fe.closeIndex)}}function z(B,ee,X){if(ee&&typeof B=="string"){const ye=B.trim();return ye==="true"?!0:ye==="false"?!1:w(B,X)}else return f.isExist(B)?B:""}a.exports=E},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,u){const{buildOptions:f}=i("./OptionsBuilder"),d=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),w=i("../validator");class E{constructor(b){this.externalEntities={},this.options=f(b)}parse(b,T){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const j=w.validate(b,T);if(j!==!0)throw Error(`${j.err.msg}:${j.err.line}:${j.err.col}`)}const R=new d(this.options);R.addExternalEntities(this.externalEntities);const L=R.parseXml(b);return this.options.preserveOrder||L===void 0?L:l(L,this.options)}addEntity(b,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(T==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=T}}a.exports=E},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,u){function f(I,b){return d(I,b)}function d(I,b,T){let R;const L={};for(let j=0;j<I.length;j++){const le=I[j],K=l(le);let Z="";if(T===void 0?Z=K:Z=T+"."+K,K===b.textNodeName)R===void 0?R=le[K]:R+=""+le[K];else{if(K===void 0)continue;if(le[K]){let W=d(le[K],b,Z);const ae=E(W,b);le[":@"]?w(W,le[":@"],Z,b):Object.keys(W).length===1&&W[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?W=W[b.textNodeName]:Object.keys(W).length===0&&(b.alwaysCreateTextNode?W[b.textNodeName]="":W=""),L[K]!==void 0&&L.hasOwnProperty(K)?(Array.isArray(L[K])||(L[K]=[L[K]]),L[K].push(W)):b.isArray(K,Z,ae)?L[K]=[W]:L[K]=W}}}return typeof R=="string"?R.length>0&&(L[b.textNodeName]=R):R!==void 0&&(L[b.textNodeName]=R),L}function l(I){const b=Object.keys(I);for(let T=0;T<b.length;T++){const R=b[T];if(R!==":@")return R}}function w(I,b,T,R){if(b){const L=Object.keys(b),j=L.length;for(let le=0;le<j;le++){const K=L[le];R.isArray(K,T+"."+K,!0,!0)?I[K]=[b[K]]:I[K]=b[K]}}}function E(I,b){const{textNodeName:T}=b,R=Object.keys(I).length;return!!(R===0||R===1&&(I[T]||typeof I[T]=="boolean"||I[T]===0))}u.prettify=f},{}],13:[function(i,a,u){class f{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,w){l==="__proto__"&&(l="#__proto__"),this.child.push({[l]:w})}addChild(l){l.tagname==="__proto__"&&(l.tagname="#__proto__"),l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,":@":l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=f},{}],14:[function(i,a,u){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */u.read=function(f,d,l,w,E){var I,b,T=E*8-w-1,R=(1<<T)-1,L=R>>1,j=-7,le=l?E-1:0,K=l?-1:1,Z=f[d+le];for(le+=K,I=Z&(1<<-j)-1,Z>>=-j,j+=T;j>0;I=I*256+f[d+le],le+=K,j-=8);for(b=I&(1<<-j)-1,I>>=-j,j+=w;j>0;b=b*256+f[d+le],le+=K,j-=8);if(I===0)I=1-L;else{if(I===R)return b?NaN:(Z?-1:1)*(1/0);b=b+Math.pow(2,w),I=I-L}return(Z?-1:1)*b*Math.pow(2,I-w)},u.write=function(f,d,l,w,E,I){var b,T,R,L=I*8-E-1,j=(1<<L)-1,le=j>>1,K=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=w?0:I-1,W=w?1:-1,ae=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(T=isNaN(d)?1:0,b=j):(b=Math.floor(Math.log(d)/Math.LN2),d*(R=Math.pow(2,-b))<1&&(b--,R*=2),b+le>=1?d+=K/R:d+=K*Math.pow(2,1-le),d*R>=2&&(b++,R/=2),b+le>=j?(T=0,b=j):b+le>=1?(T=(d*R-1)*Math.pow(2,E),b=b+le):(T=d*Math.pow(2,le-1)*Math.pow(2,E),b=0));E>=8;f[l+Z]=T&255,Z+=W,T/=256,E-=8);for(b=b<<E|T,L+=E;L>0;f[l+Z]=b&255,Z+=W,b/=256,L-=8);f[l+Z-W]|=ae*128}},{}],15:[function(i,a,u){const f=/^[-+]?0x[a-fA-F0-9]+$/,d=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function w(I,b={}){if(b=Object.assign({},l,b),!I||typeof I!="string")return I;let T=I.trim();if(b.skipLike!==void 0&&b.skipLike.test(T))return I;if(b.hex&&f.test(T))return Number.parseInt(T,16);{const R=d.exec(T);if(R){const L=R[1],j=R[2];let le=E(R[3]);const K=R[4]||R[6];if(!b.leadingZeros&&j.length>0&&L&&T[2]!==".")return I;if(!b.leadingZeros&&j.length>0&&!L&&T[1]!==".")return I;{const Z=Number(T),W=""+Z;return W.search(/[eE]/)!==-1||K?b.eNotation?Z:I:T.indexOf(".")!==-1?W==="0"&&le===""||W===le||L&&W==="-"+le?Z:I:j?le===W||L+le===W?Z:I:T===W||T===L+W?Z:I}}else return I}}function E(I){return I&&I.indexOf(".")!==-1&&(I=I.replace(/0+$/,""),I==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substr(0,I.length-1))),I}a.exports=w},{}],16:[function(i,a,u){(function(f){(function(){var d=this&&this.__awaiter||function(T,R,L,j){function le(K){return K instanceof L?K:new L(function(Z){Z(K)})}return new(L||(L=Promise))(function(K,Z){function W(V){try{q(j.next(V))}catch(P){Z(P)}}function ae(V){try{q(j.throw(V))}catch(P){Z(P)}}function q(V){V.done?K(V.value):le(V.value).then(W,ae)}q((j=j.apply(T,R||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.osmFetch=void 0;const l=i("../auth"),w=i("../config"),E=i("./_xml"),I=T=>typeof btoa>"u"?f.from(T,"binary").toString("base64"):btoa(T);function b(T,R,L){return d(this,void 0,void 0,function*(){const{apiUrl:j,authHeader:le,basicAuth:K,userAgent:Z}=(0,w.getConfig)(),W=K&&`Basic ${I(`${K.username}:${K.password}`)}`,ae=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let q=new URLSearchParams(R).toString();q&&(q=`?${q}`);const V=yield fetch(`${j}/api${T}${q}`,Object.assign(Object.assign({},L),{headers:Object.assign({Authorization:le||W||ae||"","User-Agent":Z},L==null?void 0:L.headers)})),P=V.headers.get("Content-Type");if(P!=null&&P.startsWith("application/xml")){const z=yield V.text();return yield E.xmlParser.parse(z)}if(P!=null&&P.startsWith("application/json"))return V.json();if(V.ok)return yield V.text();throw new Error(`OSM API: ${yield V.text()}`)})}u.osmFetch=b}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.xmlParser=void 0;const f=i("fast-xml-parser");u.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:d=>d!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.createOsmChangeXml=u.createChangesetMetaXml=void 0;const f=i("fast-xml-parser"),d=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(I){return d.build({osm:{changeset:{tag:Object.entries(I).map(([b,T])=>({$k:b,$v:T}))}}})}u.createChangesetMetaXml=l;const w=(I,b,T)=>b.reduce((R,L)=>{const j={$id:L.id,$version:T?0:L.version,$changeset:I,tag:Object.entries(L.tags||{}).map(([le,K])=>({$k:le,$v:K}))};switch(L.type){case"node":{const le=Object.assign(Object.assign({},j),{$lat:L.lat,$lon:L.lon});return Object.assign(Object.assign({},R),{node:[...R.node,le]})}case"way":{if(!L.nodes)throw new Error("Way has no nodes");const le=Object.assign(Object.assign({},j),{nd:L.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},R),{way:[...R.way,le]})}case"relation":{if(!L.members)throw new Error("Relation has no members");const le=Object.assign(Object.assign({},j),{member:L.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,le]})}default:return R}},{node:[],way:[],relation:[]});function E(I,b,T){return d.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[w(I,b.create,!0)],modify:[w(I,b.modify)],delete:[Object.assign({"$if-unused":!0},w(I,b.delete))]})})}u.createOsmChangeXml=E},{"fast-xml-parser":3}],19:[function(i,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.parseOsmChangeXml=u.parseOsmChangeJson=void 0;const f=i("../_xml");function d(I){return{changeset:+I.$.changeset,id:+I.$.id,timestamp:I.$.timestamp,uid:+I.$.uid,user:I.$.user,version:+I.$.version,tags:I.tag?Object.fromEntries(I.tag.map(b=>[b.$.k,b.$.v])):void 0}}const l=I=>{const b=[];if(I.node){const T=I.node.map(R=>Object.assign(Object.assign({type:"node"},d(R)),{lat:+R.$.lat,lon:+R.$.lon}));b.push(...T)}if(I.way){const T=I.way.map(R=>{var L;return Object.assign(Object.assign({type:"way"},d(R)),{nodes:((L=R.nd)===null||L===void 0?void 0:L.map(j=>+j.$.ref))||[]})});b.push(...T)}if(I.relation){const T=I.relation.map(R=>{var L;return Object.assign(Object.assign({type:"relation"},d(R)),{members:((L=R.member)===null||L===void 0?void 0:L.map(j=>({ref:+j.$.ref,role:j.$.role,type:j.$.type})))||[]})});b.push(...T)}return b};function w(I){var b,T,R;return{create:((b=I.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(l))||[],modify:((T=I.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(l))||[],delete:((R=I.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(l))||[]}}u.parseOsmChangeJson=w;function E(I){const b=f.xmlParser.parse(I);return w(b)}u.parseOsmChangeXml=E},{"../_xml":17}],20:[function(i,a,u){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(W){L(W)}}function le(Z){try{K(b.throw(Z))}catch(W){L(W)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.createChangesetComment=void 0;const d=i("../_osmFetch");function l(w,E){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/changeset/${w}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(E)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}u.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,a,u){var f=this&&this.__awaiter||function(E,I,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function le(W){try{Z(T.next(W))}catch(ae){j(ae)}}function K(W){try{Z(T.throw(W))}catch(ae){j(ae)}}function Z(W){W.done?L(W.value):R(W.value).then(le,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getChangesetDiff=void 0;const d=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function w(E){return f(this,void 0,void 0,function*(){const I=yield(0,d.osmFetch)(`/0.6/changeset/${E}/download`);return(0,l.parseOsmChangeJson)(I)})}u.getChangesetDiff=w},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,u){var f=this&&this.__awaiter||function(b,T,R,L){function j(le){return le instanceof R?le:new R(function(K){K(le)})}return new(R||(R=Promise))(function(le,K){function Z(q){try{ae(L.next(q))}catch(V){K(V)}}function W(q){try{ae(L.throw(q))}catch(V){K(V)}}function ae(q){q.done?le(q.value):j(q.value).then(Z,W)}ae((L=L.apply(b,T||[])).next())})},d=this&&this.__rest||function(b,T){var R={};for(var L in b)Object.prototype.hasOwnProperty.call(b,L)&&T.indexOf(L)<0&&(R[L]=b[L]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,L=Object.getOwnPropertySymbols(b);j<L.length;j++)T.indexOf(L[j])<0&&Object.prototype.propertyIsEnumerable.call(b,L[j])&&(R[L[j]]=b[L[j]]);return R};Object.defineProperty(u,"__esModule",{value:!0}),u.getChangeset=u.listChangesets=void 0;const l=i("../_osmFetch"),w=b=>{var T;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(R=>[R.$.k,R.$.v])),discussion:(T=b.discussion)===null||T===void 0?void 0:T[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function E(b){var T;return f(this,void 0,void 0,function*(){const{only:R}=b,L=d(b,["only"]);return((T=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),L))).osm[0].changeset)===null||T===void 0?void 0:T.map(w))||[]})}u.listChangesets=E;function I(b,T=!0){return f(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:T})).osm[0].changeset.map(w)[0]})}u.getChangeset=I},{"../_osmFetch":16}],23:[function(i,a,u){var f=this&&this.__createBinding||(Object.create?function(E,I,b,T){T===void 0&&(T=b);var R=Object.getOwnPropertyDescriptor(I,b);(!R||("get"in R?!I.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return I[b]}}),Object.defineProperty(E,T,R)}:function(E,I,b,T){T===void 0&&(T=b),E[T]=I[b]}),d=this&&this.__exportStar||function(E,I){for(var b in E)b!=="default"&&!Object.prototype.hasOwnProperty.call(I,b)&&f(I,E,b)};Object.defineProperty(u,"__esModule",{value:!0}),u.createOsmChangeXml=u.parseOsmChangeXml=void 0,d(i("./createChangesetComment"),u),d(i("./getChangesetDiff"),u),d(i("./getChangesets"),u),d(i("./uploadChangeset"),u);var l=i("./_parseOsmChangeXml");Object.defineProperty(u,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var w=i("./_createOsmChangeXml");Object.defineProperty(u,"createOsmChangeXml",{enumerable:!0,get:function(){return w.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,u){var f=this&&this.__awaiter||function(E,I,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function le(W){try{Z(T.next(W))}catch(ae){j(ae)}}function K(W){try{Z(T.throw(W))}catch(ae){j(ae)}}function Z(W){W.done?L(W.value):R(W.value).then(le,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.uploadChangeset=void 0;const d=i("../_osmFetch"),l=i("./_createOsmChangeXml");function w(E,I){return f(this,void 0,void 0,function*(){const b=(0,l.createChangesetMetaXml)(E),T=+(yield(0,d.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,l.createOsmChangeXml)(T,I);return yield(0,d.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,d.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}u.uploadChangeset=w},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,u){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(W){L(W)}}function le(Z){try{K(b.throw(Z))}catch(W){L(W)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getCapabilities=void 0;const d=i("./_osmFetch");function l(){var w;return f(this,void 0,void 0,function*(){const E=yield(0,d.osmFetch)("/capabilities");return{limits:{maxArea:+E.osm[0].api[0].area[0].$.maximum,maxNoteArea:+E.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+E.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+E.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+E.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+E.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((w=E.osm[0].policy[0].imagery[0].blacklist)===null||w===void 0?void 0:w.map(b=>b.$.regex))||[]}}})}u.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,a,u){var f=this&&this.__awaiter||function(R,L,j,le){function K(Z){return Z instanceof j?Z:new j(function(W){W(Z)})}return new(j||(j=Promise))(function(Z,W){function ae(P){try{V(le.next(P))}catch(z){W(z)}}function q(P){try{V(le.throw(P))}catch(z){W(z)}}function V(P){P.done?Z(P.value):K(P.value).then(ae,q)}V((le=le.apply(R,L||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getRelationsForElement=u.getWaysForNode=u.getFeatureHistory=u.getFeatureAtVersion=u.getFeatures=u.getFeature=void 0;const d=i("./_osmFetch");function l(R,L,j){return f(this,void 0,void 0,function*(){const le=j&&R!=="node"?"/full":"";return(yield(0,d.osmFetch)(`/0.6/${R}/${L}${le}.json`)).elements})}u.getFeature=l;function w(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}s.json?${R}s=${L.join(",")}`)).elements})}u.getFeatures=w;function E(R,L,j){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/${j}.json`)).elements[0]})}u.getFeatureAtVersion=E;function I(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/history.json`)).elements})}u.getFeatureHistory=I;function b(R){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}u.getWaysForNode=b;function T(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/relations.json`)).elements})}u.getRelationsForElement=T},{"./_osmFetch":16}],27:[function(i,a,u){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(W){L(W)}}function le(Z){try{K(b.throw(Z))}catch(W){L(W)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getMapData=void 0;const d=i("./_osmFetch");function l(w){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/map.json",{bbox:w})).elements})}u.getMapData=l},{"./_osmFetch":16}],28:[function(i,a,u){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(W){L(W)}}function le(Z){try{K(b.throw(Z))}catch(W){L(W)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getUIdFromDisplayName=void 0;const d=i("./changesets");function l(w){return f(this,void 0,void 0,function*(){const E=yield(0,d.listChangesets)({display_name:w});if(!E.length)throw new Error("Could not get uid because the user has never edited the map");return E[0].uid})}u.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,a,u){var f=this&&this.__awaiter||function(E,I,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function le(W){try{Z(T.next(W))}catch(ae){j(ae)}}function K(W){try{Z(T.throw(W))}catch(ae){j(ae)}}function Z(W){W.done?L(W.value):R(W.value).then(le,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getUsers=u.getUser=void 0;const d=i("./_osmFetch");function l(E){return f(this,void 0,void 0,function*(){const I=yield(0,d.osmFetch)(`/0.6/user/${E==="me"?"details":E}.json`);return Object.assign(Object.assign({},I.user),{account_created:new Date(I.user.account_created)})})}u.getUser=l;function w(E){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/users",{users:E})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}u.getUsers=w},{"./_osmFetch":16}],30:[function(i,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,I,b)}:function(l,w,E,I){I===void 0&&(I=E),l[I]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),d(i("./changesets"),u),d(i("./notes"),u),d(i("./getCapabilities"),u),d(i("./getFeature"),u),d(i("./getMapData"),u),d(i("./getUIdFromDisplayName"),u),d(i("./getUser"),u)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,u){var f=this&&this.__awaiter||function(T,R,L,j){function le(K){return K instanceof L?K:new L(function(Z){Z(K)})}return new(L||(L=Promise))(function(K,Z){function W(V){try{q(j.next(V))}catch(P){Z(P)}}function ae(V){try{q(j.throw(V))}catch(P){Z(P)}}function q(V){V.done?K(V.value):le(V.value).then(W,ae)}q((j=j.apply(T,R||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getNote=u.getNotesForArea=u.getNotesForQuery=void 0;const d=i("../_osmFetch"),l=T=>{const[R,L]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:L,lng:R}})};function w(T,R){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/notes${R?"/search":""}.json`,T)).features.map(l)})}function E(T){return w(T,!0)}u.getNotesForQuery=E;function I(T){return w({bbox:T},!1)}u.getNotesForArea=I;function b(T){return f(this,void 0,void 0,function*(){const R=yield(0,d.osmFetch)(`/0.6/notes/${T}.json`);return l(R)})}u.getNote=b},{"../_osmFetch":16}],32:[function(i,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,I,b)}:function(l,w,E,I){I===void 0&&(I=E),l[I]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),d(i("./getNotes"),u),d(i("./noteActions"),u)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,u){var f=this&&this.__awaiter||function(I,b,T,R){function L(j){return j instanceof T?j:new T(function(le){le(j)})}return new(T||(T=Promise))(function(j,le){function K(ae){try{W(R.next(ae))}catch(q){le(q)}}function Z(ae){try{W(R.throw(ae))}catch(q){le(q)}}function W(ae){ae.done?j(ae.value):L(ae.value).then(K,Z)}W((R=R.apply(I,b||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.reopenNote=u.commentOnNote=u.createNote=void 0;const d=i("../_osmFetch");function l(I,b,T){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)("/0.6/notes",{lat:I,lon:b,text:T})})}u.createNote=l;function w(I,b){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${I}/comment`,{text:b})})}u.commentOnNote=w;function E(I,b){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${I}/reopen`,{text:b})})}u.reopenNote=E},{"../_osmFetch":16}],34:[function(i,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.createPopup=void 0;function f(d){let l=!1;return new Promise((w,E)=>{const[I,b]=[600,550],T=Object.entries({width:I,height:b,left:window.screen.width/2-I/2,top:window.screen.height/2-b/2}).map(([j,le])=>`${j}=${le}`).join(","),R=window.open("about:blank","oauth_window",T);if(!R)throw new Error("Popup was blocked");R.location=d,window.authComplete=j=>{w(j),l=!0};const L=setInterval(()=>{R.closed&&(l||E(new Error("Cancelled")),clearInterval(L))},500)})}u.createPopup=f},{}],35:[function(i,a,u){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(L){L(R)})}return new(I||(I=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(W){L(W)}}function le(Z){try{K(b.throw(Z))}catch(W){L(W)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.exchangeCode=void 0;const d=i("./helpers");function l(w,{options:E,pkceVerifier:I,state:b}){return f(this,void 0,void 0,function*(){const T=new URL(w).searchParams,R=T.get("error_description"),L=T.get("code"),j=T.get("state");if(R)throw new Error(R);if(!L)throw new Error("No code in OAuth response");if(!I||!b)throw new Error("No login in progress");if(b!==j)throw new Error("State Mismatch");const le={grant_type:"authorization_code",code:L,redirect_uri:E.redirectUrl,client_id:E.clientId,code_verifier:I},K=`${(0,d.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(le).toString()}`,W=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in W)throw new Error(W.error_description);const ae={issuedAt:new Date(W.created_at*1e3).toISOString(),accessToken:W.access_token,scopes:W.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ae)),delete window.authComplete,ae})}u.exchangeCode=l},{"./helpers":36}],36:[function(i,a,u){var f=this&&this.__awaiter||function(I,b,T,R){function L(j){return j instanceof T?j:new T(function(le){le(j)})}return new(T||(T=Promise))(function(j,le){function K(ae){try{W(R.next(ae))}catch(q){le(q)}}function Z(ae){try{W(R.throw(ae))}catch(q){le(q)}}function W(ae){ae.done?j(ae.value):L(ae.value).then(K,Z)}W((R=R.apply(I,b||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.getOAuthBaseUrl=u.getRandomString=u.sha256=void 0;const d=i("../config");function l(I){return f(this,void 0,void 0,function*(){const b=new TextEncoder().encode(I),T=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(T))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}u.sha256=l;function w(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(I=>`0${I.toString(16)}`.slice(-2)).join("")}u.getRandomString=w;function E(){let I=(0,d.getConfig)().apiUrl;return I==="https://api.openstreetmap.org"&&(I="https://www.openstreetmap.org"),I}u.getOAuthBaseUrl=E},{"../config":39}],37:[function(i,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,I,b)}:function(l,w,E,I){I===void 0&&(I=E),l[I]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),d(i("./oauth2"),u)},{"./oauth2":38}],38:[function(i,a,u){var f=this&&this.__awaiter||function(R,L,j,le){function K(Z){return Z instanceof j?Z:new j(function(W){W(Z)})}return new(j||(j=Promise))(function(Z,W){function ae(P){try{V(le.next(P))}catch(z){W(z)}}function q(P){try{V(le.throw(P))}catch(z){W(z)}}function V(P){P.done?Z(P.value):K(P.value).then(ae,q)}V((le=le.apply(R,L||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.logout=u.isLoggedIn=u.getAuthToken=u.authReady=u.login=void 0;const d=i("./createPopup"),l=i("./exchangeCode"),w=i("./helpers");function E(R){return f(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const L=(0,w.getRandomString)(),j=(0,w.getRandomString)(),le=yield(0,w.sha256)(j),K={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:L,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:le},Z=`${(0,w.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,W={state:L,pkceVerifier:j,options:R};if(R.mode==="popup"){const ae=yield(0,d.createPopup)(Z);return(0,l.exchangeCode)(ae,W)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(W)),window.location.replace(Z);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}u.login=E,u.authReady=f(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const L=window.location.href,j=localStorage.getItem("__osmAuthTemp");if(new URL(L).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(L),window.close();else if(j)try{const le=JSON.parse(j);yield(0,l.exchangeCode)(L,le),localStorage.removeItem("__osmAuthTemp")}catch(le){console.error("OSM Auth Error",le)}}});const I=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};u.getAuthToken=I;const b=()=>!!(0,u.getAuthToken)();u.isLoggedIn=b;function T(){localStorage.removeItem("__osmAuth")}u.logout=T},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,u){Object.defineProperty(u,"__esModule",{value:!0}),u.configure=u.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},d=()=>f;u.getConfig=d;function l(w){Object.assign(f,w)}u.configure=l},{}],40:[function(i,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,I,b)}:function(l,w,E,I){I===void 0&&(I=E),l[I]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),d(i("./api"),u),d(i("./auth"),u),d(i("./config"),u),d(i("./types"),u)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,u){Object.defineProperty(u,"__esModule",{value:!0})},{}],42:[function(i,a,u){arguments[4][41][0].apply(u,arguments)},{dup:41}],43:[function(i,a,u){arguments[4][41][0].apply(u,arguments)},{dup:41}],44:[function(i,a,u){var f=this&&this.__createBinding||(Object.create?function(l,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,I,b)}:function(l,w,E,I){I===void 0&&(I=E),l[I]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(u,"__esModule",{value:!0}),d(i("./changesets"),u),d(i("./features"),u),d(i("./general"),u),d(i("./notes"),u),d(i("./osmPatch"),u),d(i("./user"),u)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,u){arguments[4][41][0].apply(u,arguments)},{dup:41}],46:[function(i,a,u){arguments[4][41][0].apply(u,arguments)},{dup:41}],47:[function(i,a,u){arguments[4][41][0].apply(u,arguments)},{dup:41}]},{},[40])(40)})})(EM);var Ga=EM.exports;const TM=()=>{const[e,t]=yt.useState(!1);yt.useEffect(()=>{t(Ga.isLoggedIn())},[]);const i=yt.useCallback(()=>{(async()=>(await Ga.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Ga.isLoggedIn()),window.location.reload()))()},[]),a=yt.useCallback(()=>{(async()=>(Ga.logout(),t(!1)))()},[]);return gt.jsx(gt.Fragment,{children:e?gt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):gt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},g6=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Ga.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const u=await Ga.getUser("me");a(u)})()},[e]),gt.jsx(gt.Fragment,{children:i?gt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):gt.jsx("img",{})})},y6=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Ga.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const u=await Ga.getUser("me");a(u)})()},[e]),gt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[gt.jsxs("div",{children:[gt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?gt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):gt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),gt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[gt.jsx("div",{children:gt.jsx(g6,{})}),gt.jsx("div",{children:gt.jsx(TM,{})})]})]})},PM=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return gt.jsxs(gt.Fragment,{children:[gt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",gt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},v6=({feature:e})=>gt.jsx(gt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return gt.jsxs("div",{className:t,children:[gt.jsx("span",{className:"underline",children:t})," = ",gt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Ud(e,t,i){return parseInt(e.substr(t,i),16)}function AM(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function E_(e,t,i){return i=i<0?i+6:i>6?i-6:i,AM(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function _6(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],u=e[2],f=e[3],d=e[4]||"";t="#"+a+a+u+u+f+f+d+d}return(i==7||i>8)&&(t=e),t}}function x6(e,t,i){let a;if(t==0){const u=AM(i*255);a=u+u+u}else{const u=i<=.5?i*(t+1):i+t-i*t,f=i*2-u;a=E_(f,u,e*6+2)+E_(f,u,e*6)+E_(f,u,e*6-2)}return"#"+a}function Fd(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],u=a[e*6+.5|0];return i=i<.5?i*u*2:u+(i-.5)*(1-u)*2,x6(e,t,i)}const w6=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},rP={V:"jdenticon_config",n:"config"};var b6={};function S6(e,t){const i=typeof e=="object"&&e||b6[rP.n]||w6[rP.V]||{},a=i.lightness||{},u=i.saturation||{},f="color"in u?u.color:u,d=u.grayscale,l=i.backColor,w=i.padding;function E(b,T){let R=a[b];return R&&R.length>1||(R=T),function(L){return L=R[0]+L*(R[1]-R[0]),L<0?0:L>1?1:L}}function I(b){const T=i.hues;let R;return T&&T.length>0&&(R=T[0|.999*b*T.length]),typeof R=="number"?(R/360%1+1)%1:b}return{W:I,o:typeof f=="number"?f:.5,D:typeof d=="number"?d:0,p:E("color",[.4,.8]),F:E("grayscale",[.3,.9]),G:_6(l),X:typeof e=="number"?e:typeof w=="number"?w:t}}let pg=class{constructor(t,i){this.x=t,this.y=i}};class IM{constructor(t,i,a,u){this.q=t,this.t=i,this.H=a,this.Y=u}I(t,i,a,u){const f=this.q+this.H,d=this.t+this.H,l=this.Y;return l===1?new pg(f-i-(u||0),this.t+t):l===2?new pg(f-t-(a||0),d-i-(u||0)):l===3?new pg(this.q+i,d-t-(a||0)):new pg(this.q+t,this.t+i)}}const E6=new IM(0,0,0,0);class T6{constructor(t){this.J=t,this.u=E6}g(t,i){const a=i?-2:2,u=[];for(let f=i?t.length-2:0;f<t.length&&f>=0;f+=a)u.push(this.u.I(t[f],t[f+1]));this.J.g(u)}h(t,i,a,u){const f=this.u.I(t,i,a,a);this.J.h(f,a,u)}i(t,i,a,u,f){this.g([t,i,t+a,i,t+a,i+u,t,i+u],f)}j(t,i,a,u,f,d){const l=[t+a,i,t+a,i+u,t,i+u,t,i];l.splice((f||0)%4*2,2),this.g(l,d)}K(t,i,a,u,f){this.g([t+a/2,i,t+a,i+u/2,t+a/2,i+u,t,i+u/2],f)}}function P6(e,t,i,a){e=e%14;let u,f,d,l,w,E;e?e==1?(d=0|i*.5,l=0|i*.8,t.j(i-d,0,d,l,2)):e==2?(d=0|i/3,t.i(d,d,i-d,i-d)):e==3?(w=i*.1,E=i<6?1:i<8?2:0|i*.25,w=w>1?0|w:w>.5?1:w,t.i(E,E,i-w-E,i-w-E)):e==4?(f=0|i*.15,d=0|i*.5,t.h(i-d-f,i-d-f,d)):e==5?(w=i*.1,E=w*4,E>3&&(E=0|E),t.i(0,0,i,i),t.g([E,E,i-w,E,E+(i-E-w)/2,i-w],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(w=i*.14,E=i<4?1:i<6?2:0|i*.35,w=i<8?w:0|w,t.i(0,0,i,i),t.i(E,E,i-E-w,i-E-w,!0)):e==10?(w=i*.12,E=w*3,t.i(0,0,i,i),t.h(E,E,i-w-E,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(f=i*.25,t.i(0,0,i,i),t.K(f,f,i-f,i-f,!0)):!a&&(f=i*.4,d=i*1.2,t.h(f,f,d)):(u=i*.42,t.g([0,0,i,0,i,i-u*2,i-u,i,0,i]))}function nP(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function A6(e,t){return e=t.W(e),[Fd(e,t.D,t.F(0)),Fd(e,t.o,t.p(.5)),Fd(e,t.D,t.F(1)),Fd(e,t.o,t.p(1)),Fd(e,t.o,t.p(0))]}function I6(e,t,i){const a=S6(i,.08);a.G&&e.m(a.G);let u=e.k;const f=.5+u*a.X|0;u-=f*2;const d=new T6(e),l=0|u/4,w=0|f+u/2-l*2,E=0|f+u/2-l*2;function I(le,K,Z,W,ae){const q=Ud(t,Z,1);let V=W?Ud(t,W,1):0;e.L(T[R[le]]);for(let P=0;P<ae.length;P++)d.u=new IM(w+ae[P][0]*l,E+ae[P][1]*l,l,V++%4),K(q,d,l,P);e.M()}const b=Ud(t,-7)/268435455,T=A6(b,a),R=[];let L;function j(le){if(le.indexOf(L)>=0){for(let K=0;K<le.length;K++)if(R.indexOf(le[K])>=0)return!0}}for(let le=0;le<3;le++)L=Ud(t,8+le,1)%T.length,(j([0,4])||j([2,3]))&&(L=1),R.push(L);I(0,nP,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),I(1,nP,4,5,[[0,0],[3,0],[3,3],[0,3]]),I(2,P6,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function C6(e){var a=0,u=0,f=encodeURI(e)+"%80",d=[],l,w=[],E=1732584193,I=4023233417,b=~E,T=~I,R=3285377520,L=[E,I,b,T,R],j=0,le="";function K(Z,W){return Z<<W|Z>>>32-W}for(;a<f.length;u++)d[u>>2]=d[u>>2]|(f[a]=="%"?parseInt(f.substring(a+1,a+=3),16):f.charCodeAt(a++))<<(3-(u&3))*8;for(l=((u+7>>6)+1)*16,d[l-1]=u*8-8;j<l;j+=16){for(a=0;a<80;a++)u=K(E,5)+R+(a<20?(I&b^~I&T)+1518500249:a<40?(I^b^T)+1859775393:a<60?(I&b^I&T^b&T)+2400959708:(I^b^T)+3395469782)+(w[a]=a<16?d[j+a]|0:K(w[a-3]^w[a-8]^w[a-14]^w[a-16],1)),R=T,T=b,b=K(I,30),I=E,E=u;L[0]=E=L[0]+E|0,L[1]=I=L[1]+I|0,L[2]=b=L[2]+b|0,L[3]=T=L[3]+T|0,L[4]=R=L[4]+R|0}for(a=0;a<40;a++)le+=(L[a>>3]>>>(7-(a&7))*4&15).toString(16);return le}function k6(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function M6(e){return C6(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function mh(e){return(e*10+.5|0)/10}class O6{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+mh(t[a].x)+" "+mh(t[a].y);this.v+=i+"Z"}h(t,i,a){const u=a?0:1,f=mh(i/2),d=mh(i),l="a"+f+","+f+" 0 1,"+u+" ";this.v+="M"+mh(t.x)+" "+mh(t.y+i/2)+l+d+",0"+l+-d+",0"}}class F6{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Ud(i[2],0)/255:1;this.O.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new O6)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.O.P(i,t[i].v)}}const R6={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class j6{constructor(t){this.k=t,this.C='<svg xmlns="'+R6.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}P(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function z6(e,t,i){const a=new j6(t);return I6(new F6(a),k6(e)||M6(e),i),a.toString()}const L6=({feature:e,size:t})=>e.properties===null?null:gt.jsx(gt.Fragment,{children:e.properties.userIconHref.length>0?gt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):gt.jsx("span",{dangerouslySetInnerHTML:{__html:z6(e.properties.user||"noname",t)}})}),B6=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?gt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var D6={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const N6=({viewState:e})=>{const[t,i]=yt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),gt.jsx(gt.Fragment,{children:e&&t&&gt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[gt.jsx(vu,{icon:D6,style:{padding:"0px 3px"}}),gt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var CM={};class qi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let u=0;u<this._n&&u<32;u++){const f=i[u],d=t+f,l=Math.abs(t)<Math.abs(f)?t-(d-f):f-(d-t);l&&(i[a++]=l),t=d}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,u,f,d=0;if(i>0){for(d=t[--i];i>0&&(a=d,u=t[--i],d=a+u,f=u-(d-a),!f););i>0&&(f<0&&t[i-1]<0||f>0&&t[i-1]>0)&&(u=f*2,a=d+u,u==a-d&&(d=a))}return d}}function*$6(e){for(const t of e)yield*t}function kM(e){return Array.from($6(e))}function Nh(e,t,i){e=+e,t=+t,i=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+i;for(var a=-1,u=Math.max(0,Math.ceil((t-e)/i))|0,f=new Array(u);++a<u;)f[a]=e+a*i;return f}var dr=1e-6,Lp=1e-12,kr=Math.PI,$n=kr/2,Oy=kr/4,ao=kr*2,fn=180/kr,gr=kr/180,Nr=Math.abs,Sf=Math.atan,so=Math.atan2,ar=Math.cos,mg=Math.ceil,MM=Math.exp,Ex=Math.hypot,Fy=Math.log,T_=Math.pow,tr=Math.sin,ya=Math.sign||function(e){return e>0?1:e<0?-1:0},vi=Math.sqrt,Mb=Math.tan;function OM(e){return e>1?0:e<-1?kr:Math.acos(e)}function lo(e){return e>1?$n:e<-1?-$n:Math.asin(e)}function iP(e){return(e=tr(e/2))*e}function On(){}function Ry(e,t){e&&aP.hasOwnProperty(e.type)&&aP[e.type](e,t)}var oP={Feature:function(e,t){Ry(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,u=i.length;++a<u;)Ry(i[a].geometry,t)}},aP={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,u=i.length;++a<u;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Tx(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,u=i.length;++a<u;)Tx(i[a],t,0)},Polygon:function(e,t){sP(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,u=i.length;++a<u;)sP(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,u=i.length;++a<u;)Ry(i[a],t)}};function Tx(e,t,i){var a=-1,u=e.length-i,f;for(t.lineStart();++a<u;)f=e[a],t.point(f[0],f[1],f[2]);t.lineEnd()}function sP(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)Tx(e[i],t,1);t.polygonEnd()}function Ua(e,t){e&&oP.hasOwnProperty(e.type)?oP[e.type](e,t):Ry(e,t)}var jy=new qi,zy=new qi,FM,RM,Px,Ax,Ix,Is={point:On,lineStart:On,lineEnd:On,polygonStart:function(){jy=new qi,Is.lineStart=U6,Is.lineEnd=V6},polygonEnd:function(){var e=+jy;zy.add(e<0?ao+e:e),this.lineStart=this.lineEnd=this.point=On},sphere:function(){zy.add(ao)}};function U6(){Is.point=G6}function V6(){jM(FM,RM)}function G6(e,t){Is.point=jM,FM=e,RM=t,e*=gr,t*=gr,Px=e,Ax=ar(t=t/2+Oy),Ix=tr(t)}function jM(e,t){e*=gr,t*=gr,t=t/2+Oy;var i=e-Px,a=i>=0?1:-1,u=a*i,f=ar(t),d=tr(t),l=Ix*d,w=Ax*f+l*ar(u),E=l*a*tr(u);jy.add(so(E,w)),Px=e,Ax=f,Ix=d}function W6(e){return zy=new qi,Ua(e,Is),zy*2}function Ly(e){return[so(e[1],e[0]),lo(e[2])]}function Sc(e){var t=e[0],i=e[1],a=ar(i);return[a*ar(t),a*tr(t),tr(i)]}function gg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function uf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function P_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yg(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function By(e){var t=vi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var kn,_o,Bn,Wo,ac,zM,LM,Kh,sp,nu,yl,il={point:Cx,lineStart:lP,lineEnd:uP,polygonStart:function(){il.point=DM,il.lineStart=H6,il.lineEnd=Z6,sp=new qi,Is.polygonStart()},polygonEnd:function(){Is.polygonEnd(),il.point=Cx,il.lineStart=lP,il.lineEnd=uP,jy<0?(kn=-(Bn=180),_o=-(Wo=90)):sp>dr?Wo=90:sp<-dr&&(_o=-90),yl[0]=kn,yl[1]=Bn},sphere:function(){kn=-(Bn=180),_o=-(Wo=90)}};function Cx(e,t){nu.push(yl=[kn=e,Bn=e]),t<_o&&(_o=t),t>Wo&&(Wo=t)}function BM(e,t){var i=Sc([e*gr,t*gr]);if(Kh){var a=uf(Kh,i),u=[a[1],-a[0],0],f=uf(u,a);By(f),f=Ly(f);var d=e-ac,l=d>0?1:-1,w=f[0]*fn*l,E,I=Nr(d)>180;I^(l*ac<w&&w<l*e)?(E=f[1]*fn,E>Wo&&(Wo=E)):(w=(w+360)%360-180,I^(l*ac<w&&w<l*e)?(E=-f[1]*fn,E<_o&&(_o=E)):(t<_o&&(_o=t),t>Wo&&(Wo=t))),I?e<ac?Go(kn,e)>Go(kn,Bn)&&(Bn=e):Go(e,Bn)>Go(kn,Bn)&&(kn=e):Bn>=kn?(e<kn&&(kn=e),e>Bn&&(Bn=e)):e>ac?Go(kn,e)>Go(kn,Bn)&&(Bn=e):Go(e,Bn)>Go(kn,Bn)&&(kn=e)}else nu.push(yl=[kn=e,Bn=e]);t<_o&&(_o=t),t>Wo&&(Wo=t),Kh=i,ac=e}function lP(){il.point=BM}function uP(){yl[0]=kn,yl[1]=Bn,il.point=Cx,Kh=null}function DM(e,t){if(Kh){var i=e-ac;sp.add(Nr(i)>180?i+(i>0?360:-360):i)}else zM=e,LM=t;Is.point(e,t),BM(e,t)}function H6(){Is.lineStart()}function Z6(){DM(zM,LM),Is.lineEnd(),Nr(sp)>dr&&(kn=-(Bn=180)),yl[0]=kn,yl[1]=Bn,Kh=null}function Go(e,t){return(t-=e)<0?t+360:t}function X6(e,t){return e[0]-t[0]}function cP(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function q6(e){var t,i,a,u,f,d,l;if(Wo=Bn=-(kn=_o=1/0),nu=[],Ua(e,il),i=nu.length){for(nu.sort(X6),t=1,a=nu[0],f=[a];t<i;++t)u=nu[t],cP(a,u[0])||cP(a,u[1])?(Go(a[0],u[1])>Go(a[0],a[1])&&(a[1]=u[1]),Go(u[0],a[1])>Go(a[0],a[1])&&(a[0]=u[0])):f.push(a=u);for(d=-1/0,i=f.length-1,t=0,a=f[i];t<=i;a=u,++t)u=f[t],(l=Go(a[1],u[0]))>d&&(d=l,kn=u[0],Bn=a[1])}return nu=yl=null,kn===1/0||_o===1/0?[[NaN,NaN],[NaN,NaN]]:[[kn,_o],[Bn,Wo]]}var Vd,Dy,Ny,$y,Uy,Vy,Gy,Wy,kx,Mx,Ox,NM,$M,ro,no,io,Wa={sphere:On,point:Ob,lineStart:hP,lineEnd:fP,polygonStart:function(){Wa.lineStart=Y6,Wa.lineEnd=Q6},polygonEnd:function(){Wa.lineStart=hP,Wa.lineEnd=fP}};function Ob(e,t){e*=gr,t*=gr;var i=ar(t);Yp(i*ar(e),i*tr(e),tr(t))}function Yp(e,t,i){++Vd,Ny+=(e-Ny)/Vd,$y+=(t-$y)/Vd,Uy+=(i-Uy)/Vd}function hP(){Wa.point=K6}function K6(e,t){e*=gr,t*=gr;var i=ar(t);ro=i*ar(e),no=i*tr(e),io=tr(t),Wa.point=J6,Yp(ro,no,io)}function J6(e,t){e*=gr,t*=gr;var i=ar(t),a=i*ar(e),u=i*tr(e),f=tr(t),d=so(vi((d=no*f-io*u)*d+(d=io*a-ro*f)*d+(d=ro*u-no*a)*d),ro*a+no*u+io*f);Dy+=d,Vy+=d*(ro+(ro=a)),Gy+=d*(no+(no=u)),Wy+=d*(io+(io=f)),Yp(ro,no,io)}function fP(){Wa.point=Ob}function Y6(){Wa.point=eB}function Q6(){UM(NM,$M),Wa.point=Ob}function eB(e,t){NM=e,$M=t,e*=gr,t*=gr,Wa.point=UM;var i=ar(t);ro=i*ar(e),no=i*tr(e),io=tr(t),Yp(ro,no,io)}function UM(e,t){e*=gr,t*=gr;var i=ar(t),a=i*ar(e),u=i*tr(e),f=tr(t),d=no*f-io*u,l=io*a-ro*f,w=ro*u-no*a,E=Ex(d,l,w),I=lo(E),b=E&&-I/E;kx.add(b*d),Mx.add(b*l),Ox.add(b*w),Dy+=I,Vy+=I*(ro+(ro=a)),Gy+=I*(no+(no=u)),Wy+=I*(io+(io=f)),Yp(ro,no,io)}function tB(e){Vd=Dy=Ny=$y=Uy=Vy=Gy=Wy=0,kx=new qi,Mx=new qi,Ox=new qi,Ua(e,Wa);var t=+kx,i=+Mx,a=+Ox,u=Ex(t,i,a);return u<Lp&&(t=Vy,i=Gy,a=Wy,Dy<dr&&(t=Ny,i=$y,a=Uy),u=Ex(t,i,a),u<Lp)?[NaN,NaN]:[so(i,t)*fn,lo(a/u)*fn]}function gh(e){return function(){return e}}function Fx(e,t){function i(a,u){return a=e(a,u),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,u){return a=t.invert(a,u),a&&e.invert(a[0],a[1])}),i}function Rx(e,t){return[Nr(e)>kr?e+Math.round(-e/ao)*ao:e,t]}Rx.invert=Rx;function Fb(e,t,i){return(e%=ao)?t||i?Fx(pP(e),mP(t,i)):pP(e):t||i?mP(t,i):Rx}function dP(e){return function(t,i){return t+=e,[t>kr?t-ao:t<-kr?t+ao:t,i]}}function pP(e){var t=dP(e);return t.invert=dP(-e),t}function mP(e,t){var i=ar(e),a=tr(e),u=ar(t),f=tr(t);function d(l,w){var E=ar(w),I=ar(l)*E,b=tr(l)*E,T=tr(w),R=T*i+I*a;return[so(b*u-R*f,I*i-T*a),lo(R*u+b*f)]}return d.invert=function(l,w){var E=ar(w),I=ar(l)*E,b=tr(l)*E,T=tr(w),R=T*u-b*f;return[so(b*u+T*f,I*i+R*a),lo(R*i-I*a)]},d}function VM(e){e=Fb(e[0]*gr,e[1]*gr,e.length>2?e[2]*gr:0);function t(i){return i=e(i[0]*gr,i[1]*gr),i[0]*=fn,i[1]*=fn,i}return t.invert=function(i){return i=e.invert(i[0]*gr,i[1]*gr),i[0]*=fn,i[1]*=fn,i},t}function GM(e,t,i,a,u,f){if(i){var d=ar(t),l=tr(t),w=a*i;u==null?(u=t+a*ao,f=t-w/2):(u=gP(d,u),f=gP(d,f),(a>0?u<f:u>f)&&(u+=a*ao));for(var E,I=u;a>0?I>f:I<f;I-=w)E=Ly([d,-l*ar(I),-l*tr(I)]),e.point(E[0],E[1])}}function gP(e,t){t=Sc(t),t[0]-=e,By(t);var i=OM(-t[1]);return((-t[2]<0?-i:i)+ao-dr)%ao}function rB(){var e=gh([0,0]),t=gh(90),i=gh(6),a,u,f={point:d};function d(w,E){a.push(w=u(w,E)),w[0]*=fn,w[1]*=fn}function l(){var w=e.apply(this,arguments),E=t.apply(this,arguments)*gr,I=i.apply(this,arguments)*gr;return a=[],u=Fb(-w[0]*gr,-w[1]*gr,0).invert,GM(f,E,I,1),w={type:"Polygon",coordinates:[a]},a=u=null,w}return l.center=function(w){return arguments.length?(e=typeof w=="function"?w:gh([+w[0],+w[1]]),l):e},l.radius=function(w){return arguments.length?(t=typeof w=="function"?w:gh(+w),l):t},l.precision=function(w){return arguments.length?(i=typeof w=="function"?w:gh(+w),l):i},l}function WM(){var e=[],t;return{point:function(i,a,u){t.push([i,a,u])},lineStart:function(){e.push(t=[])},lineEnd:On,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function $g(e,t){return Nr(e[0]-t[0])<dr&&Nr(e[1]-t[1])<dr}function vg(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function HM(e,t,i,a,u){var f=[],d=[],l,w;if(e.forEach(function(L){if(!((j=L.length-1)<=0)){var j,le=L[0],K=L[j],Z;if($g(le,K)){if(!le[2]&&!K[2]){for(u.lineStart(),l=0;l<j;++l)u.point((le=L[l])[0],le[1]);u.lineEnd();return}K[0]+=2*dr}f.push(Z=new vg(le,L,null,!0)),d.push(Z.o=new vg(le,null,Z,!1)),f.push(Z=new vg(K,L,null,!1)),d.push(Z.o=new vg(K,null,Z,!0))}}),!!f.length){for(d.sort(t),yP(f),yP(d),l=0,w=d.length;l<w;++l)d[l].e=i=!i;for(var E=f[0],I,b;;){for(var T=E,R=!0;T.v;)if((T=T.n)===E)return;I=T.z,u.lineStart();do{if(T.v=T.o.v=!0,T.e){if(R)for(l=0,w=I.length;l<w;++l)u.point((b=I[l])[0],b[1]);else a(T.x,T.n.x,1,u);T=T.n}else{if(R)for(I=T.p.z,l=I.length-1;l>=0;--l)u.point((b=I[l])[0],b[1]);else a(T.x,T.p.x,-1,u);T=T.p}T=T.o,I=T.z,R=!R}while(!T.v);u.lineEnd()}}}function yP(e){if(t=e.length){for(var t,i=0,a=e[0],u;++i<t;)a.n=u=e[i],u.p=a,a=u;a.n=u=e[0],u.p=a}}function A_(e){return Nr(e[0])<=kr?e[0]:ya(e[0])*((Nr(e[0])+kr)%ao-kr)}function ZM(e,t){var i=A_(t),a=t[1],u=tr(a),f=[tr(i),-ar(i),0],d=0,l=0,w=new qi;u===1?a=$n+dr:u===-1&&(a=-$n-dr);for(var E=0,I=e.length;E<I;++E)if(T=(b=e[E]).length)for(var b,T,R=b[T-1],L=A_(R),j=R[1]/2+Oy,le=tr(j),K=ar(j),Z=0;Z<T;++Z,L=ae,le=V,K=P,R=W){var W=b[Z],ae=A_(W),q=W[1]/2+Oy,V=tr(q),P=ar(q),z=ae-L,B=z>=0?1:-1,ee=B*z,X=ee>kr,ye=le*V;if(w.add(so(ye*B*tr(ee),K*P+ye*ar(ee))),d+=X?z+B*ao:z,X^L>=i^ae>=i){var ge=uf(Sc(R),Sc(W));By(ge);var fe=uf(f,ge);By(fe);var ie=(X^z>=0?-1:1)*lo(fe[2]);(a>ie||a===ie&&(ge[0]||ge[1]))&&(l+=X^z>=0?1:-1)}}return(d<-dr||d<dr&&w<-Lp)^l&1}function XM(e,t,i,a){return function(u){var f=t(u),d=WM(),l=t(d),w=!1,E,I,b,T={point:R,lineStart:j,lineEnd:le,polygonStart:function(){T.point=K,T.lineStart=Z,T.lineEnd=W,I=[],E=[]},polygonEnd:function(){T.point=R,T.lineStart=j,T.lineEnd=le,I=kM(I);var ae=ZM(E,a);I.length?(w||(u.polygonStart(),w=!0),HM(I,iB,ae,i,u)):ae&&(w||(u.polygonStart(),w=!0),u.lineStart(),i(null,null,1,u),u.lineEnd()),w&&(u.polygonEnd(),w=!1),I=E=null},sphere:function(){u.polygonStart(),u.lineStart(),i(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function R(ae,q){e(ae,q)&&u.point(ae,q)}function L(ae,q){f.point(ae,q)}function j(){T.point=L,f.lineStart()}function le(){T.point=R,f.lineEnd()}function K(ae,q){b.push([ae,q]),l.point(ae,q)}function Z(){l.lineStart(),b=[]}function W(){K(b[0][0],b[0][1]),l.lineEnd();var ae=l.clean(),q=d.result(),V,P=q.length,z,B,ee;if(b.pop(),E.push(b),b=null,!!P){if(ae&1){if(B=q[0],(z=B.length-1)>0){for(w||(u.polygonStart(),w=!0),u.lineStart(),V=0;V<z;++V)u.point((ee=B[V])[0],ee[1]);u.lineEnd()}return}P>1&&ae&2&&q.push(q.pop().concat(q.shift())),I.push(q.filter(nB))}}return T}}function nB(e){return e.length>1}function iB(e,t){return((e=e.x)[0]<0?e[1]-$n-dr:$n-e[1])-((t=t.x)[0]<0?t[1]-$n-dr:$n-t[1])}const jx=XM(function(){return!0},oB,sB,[-kr,-$n]);function oB(e){var t=NaN,i=NaN,a=NaN,u;return{lineStart:function(){e.lineStart(),u=1},point:function(f,d){var l=f>0?kr:-kr,w=Nr(f-t);Nr(w-kr)<dr?(e.point(t,i=(i+d)/2>0?$n:-$n),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(f,i),u=0):a!==l&&w>=kr&&(Nr(t-a)<dr&&(t-=a*dr),Nr(f-l)<dr&&(f-=l*dr),i=aB(t,i,f,d),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),u=0),e.point(t=f,i=d),a=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-u}}}function aB(e,t,i,a){var u,f,d=tr(e-i);return Nr(d)>dr?Sf((tr(t)*(f=ar(a))*tr(i)-tr(a)*(u=ar(t))*tr(e))/(u*f*d)):(t+a)/2}function sB(e,t,i,a){var u;if(e==null)u=i*$n,a.point(-kr,u),a.point(0,u),a.point(kr,u),a.point(kr,0),a.point(kr,-u),a.point(0,-u),a.point(-kr,-u),a.point(-kr,0),a.point(-kr,u);else if(Nr(e[0]-t[0])>dr){var f=e[0]<t[0]?kr:-kr;u=i*f/2,a.point(-f,u),a.point(0,u),a.point(f,u)}else a.point(t[0],t[1])}function qM(e){var t=ar(e),i=6*gr,a=t>0,u=Nr(t)>dr;function f(I,b,T,R){GM(R,e,i,T,I,b)}function d(I,b){return ar(I)*ar(b)>t}function l(I){var b,T,R,L,j;return{lineStart:function(){L=R=!1,j=1},point:function(le,K){var Z=[le,K],W,ae=d(le,K),q=a?ae?0:E(le,K):ae?E(le+(le<0?kr:-kr),K):0;if(!b&&(L=R=ae)&&I.lineStart(),ae!==R&&(W=w(b,Z),(!W||$g(b,W)||$g(Z,W))&&(Z[2]=1)),ae!==R)j=0,ae?(I.lineStart(),W=w(Z,b),I.point(W[0],W[1])):(W=w(b,Z),I.point(W[0],W[1],2),I.lineEnd()),b=W;else if(u&&b&&a^ae){var V;!(q&T)&&(V=w(Z,b,!0))&&(j=0,a?(I.lineStart(),I.point(V[0][0],V[0][1]),I.point(V[1][0],V[1][1]),I.lineEnd()):(I.point(V[1][0],V[1][1]),I.lineEnd(),I.lineStart(),I.point(V[0][0],V[0][1],3)))}ae&&(!b||!$g(b,Z))&&I.point(Z[0],Z[1]),b=Z,R=ae,T=q},lineEnd:function(){R&&I.lineEnd(),b=null},clean:function(){return j|(L&&R)<<1}}}function w(I,b,T){var R=Sc(I),L=Sc(b),j=[1,0,0],le=uf(R,L),K=gg(le,le),Z=le[0],W=K-Z*Z;if(!W)return!T&&I;var ae=t*K/W,q=-t*Z/W,V=uf(j,le),P=yg(j,ae),z=yg(le,q);P_(P,z);var B=V,ee=gg(P,B),X=gg(B,B),ye=ee*ee-X*(gg(P,P)-1);if(!(ye<0)){var ge=vi(ye),fe=yg(B,(-ee-ge)/X);if(P_(fe,P),fe=Ly(fe),!T)return fe;var ie=I[0],he=b[0],Y=I[1],re=b[1],de;he<ie&&(de=ie,ie=he,he=de);var be=he-ie,Pe=Nr(be-kr)<dr,$e=Pe||be<dr;if(!Pe&&re<Y&&(de=Y,Y=re,re=de),$e?Pe?Y+re>0^fe[1]<(Nr(fe[0]-ie)<dr?Y:re):Y<=fe[1]&&fe[1]<=re:be>kr^(ie<=fe[0]&&fe[0]<=he)){var Ce=yg(B,(-ee+ge)/X);return P_(Ce,P),[fe,Ly(Ce)]}}}function E(I,b){var T=a?e:kr-e,R=0;return I<-T?R|=1:I>T&&(R|=2),b<-T?R|=4:b>T&&(R|=8),R}return XM(d,l,f,a?[0,-e]:[-kr,e-kr])}function lB(e,t,i,a,u,f){var d=e[0],l=e[1],w=t[0],E=t[1],I=0,b=1,T=w-d,R=E-l,L;if(L=i-d,!(!T&&L>0)){if(L/=T,T<0){if(L<I)return;L<b&&(b=L)}else if(T>0){if(L>b)return;L>I&&(I=L)}if(L=u-d,!(!T&&L<0)){if(L/=T,T<0){if(L>b)return;L>I&&(I=L)}else if(T>0){if(L<I)return;L<b&&(b=L)}if(L=a-l,!(!R&&L>0)){if(L/=R,R<0){if(L<I)return;L<b&&(b=L)}else if(R>0){if(L>b)return;L>I&&(I=L)}if(L=f-l,!(!R&&L<0)){if(L/=R,R<0){if(L>b)return;L>I&&(I=L)}else if(R>0){if(L<I)return;L<b&&(b=L)}return I>0&&(e[0]=d+I*T,e[1]=l+I*R),b<1&&(t[0]=d+b*T,t[1]=l+b*R),!0}}}}}var Gd=1e9,_g=-Gd;function B0(e,t,i,a){function u(E,I){return e<=E&&E<=i&&t<=I&&I<=a}function f(E,I,b,T){var R=0,L=0;if(E==null||(R=d(E,b))!==(L=d(I,b))||w(E,I)<0^b>0)do T.point(R===0||R===3?e:i,R>1?a:t);while((R=(R+b+4)%4)!==L);else T.point(I[0],I[1])}function d(E,I){return Nr(E[0]-e)<dr?I>0?0:3:Nr(E[0]-i)<dr?I>0?2:1:Nr(E[1]-t)<dr?I>0?1:0:I>0?3:2}function l(E,I){return w(E.x,I.x)}function w(E,I){var b=d(E,1),T=d(I,1);return b!==T?b-T:b===0?I[1]-E[1]:b===1?E[0]-I[0]:b===2?E[1]-I[1]:I[0]-E[0]}return function(E){var I=E,b=WM(),T,R,L,j,le,K,Z,W,ae,q,V,P={point:z,lineStart:ye,lineEnd:ge,polygonStart:ee,polygonEnd:X};function z(ie,he){u(ie,he)&&I.point(ie,he)}function B(){for(var ie=0,he=0,Y=R.length;he<Y;++he)for(var re=R[he],de=1,be=re.length,Pe=re[0],$e,Ce,Fe=Pe[0],He=Pe[1];de<be;++de)$e=Fe,Ce=He,Pe=re[de],Fe=Pe[0],He=Pe[1],Ce<=a?He>a&&(Fe-$e)*(a-Ce)>(He-Ce)*(e-$e)&&++ie:He<=a&&(Fe-$e)*(a-Ce)<(He-Ce)*(e-$e)&&--ie;return ie}function ee(){I=b,T=[],R=[],V=!0}function X(){var ie=B(),he=V&&ie,Y=(T=kM(T)).length;(he||Y)&&(E.polygonStart(),he&&(E.lineStart(),f(null,null,1,E),E.lineEnd()),Y&&HM(T,l,ie,f,E),E.polygonEnd()),I=E,T=R=L=null}function ye(){P.point=fe,R&&R.push(L=[]),q=!0,ae=!1,Z=W=NaN}function ge(){T&&(fe(j,le),K&&ae&&b.rejoin(),T.push(b.result())),P.point=z,ae&&I.lineEnd()}function fe(ie,he){var Y=u(ie,he);if(R&&L.push([ie,he]),q)j=ie,le=he,K=Y,q=!1,Y&&(I.lineStart(),I.point(ie,he));else if(Y&&ae)I.point(ie,he);else{var re=[Z=Math.max(_g,Math.min(Gd,Z)),W=Math.max(_g,Math.min(Gd,W))],de=[ie=Math.max(_g,Math.min(Gd,ie)),he=Math.max(_g,Math.min(Gd,he))];lB(re,de,e,t,i,a)?(ae||(I.lineStart(),I.point(re[0],re[1])),I.point(de[0],de[1]),Y||I.lineEnd(),V=!1):Y&&(I.lineStart(),I.point(ie,he),V=!1)}Z=ie,W=he,ae=Y}return P}}function uB(){var e=0,t=0,i=960,a=500,u,f,d;return d={stream:function(l){return u&&f===l?u:u=B0(e,t,i,a)(f=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],a=+l[1][1],u=f=null,d):[[e,t],[i,a]]}}}var zx,Lx,Ug,Vg,cf={sphere:On,point:On,lineStart:cB,lineEnd:On,polygonStart:On,polygonEnd:On};function cB(){cf.point=fB,cf.lineEnd=hB}function hB(){cf.point=cf.lineEnd=On}function fB(e,t){e*=gr,t*=gr,Lx=e,Ug=tr(t),Vg=ar(t),cf.point=dB}function dB(e,t){e*=gr,t*=gr;var i=tr(t),a=ar(t),u=Nr(e-Lx),f=ar(u),d=tr(u),l=a*d,w=Vg*i-Ug*a*f,E=Ug*i+Vg*a*f;zx.add(so(vi(l*l+w*w),E)),Lx=e,Ug=i,Vg=a}function KM(e){return zx=new qi,Ua(e,cf),+zx}var Bx=[null,null],pB={type:"LineString",coordinates:Bx};function Hy(e,t){return Bx[0]=e,Bx[1]=t,KM(pB)}var vP={Feature:function(e,t){return Zy(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,u=i.length;++a<u;)if(Zy(i[a].geometry,t))return!0;return!1}},_P={Sphere:function(){return!0},Point:function(e,t){return xP(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,u=i.length;++a<u;)if(xP(i[a],t))return!0;return!1},LineString:function(e,t){return wP(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,u=i.length;++a<u;)if(wP(i[a],t))return!0;return!1},Polygon:function(e,t){return bP(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,u=i.length;++a<u;)if(bP(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,u=i.length;++a<u;)if(Zy(i[a],t))return!0;return!1}};function Zy(e,t){return e&&_P.hasOwnProperty(e.type)?_P[e.type](e,t):!1}function xP(e,t){return Hy(e,t)===0}function wP(e,t){for(var i,a,u,f=0,d=e.length;f<d;f++){if(a=Hy(e[f],t),a===0||f>0&&(u=Hy(e[f],e[f-1]),u>0&&i<=u&&a<=u&&(i+a-u)*(1-Math.pow((i-a)/u,2))<Lp*u))return!0;i=a}return!1}function bP(e,t){return!!ZM(e.map(mB),JM(t))}function mB(e){return e=e.map(JM),e.pop(),e}function JM(e){return[e[0]*gr,e[1]*gr]}function gB(e,t){return(e&&vP.hasOwnProperty(e.type)?vP[e.type]:Zy)(e,t)}function SP(e,t,i){var a=Nh(e,t-dr,i).concat(t);return function(u){return a.map(function(f){return[u,f]})}}function EP(e,t,i){var a=Nh(e,t-dr,i).concat(t);return function(u){return a.map(function(f){return[f,u]})}}function YM(){var e,t,i,a,u,f,d,l,w=10,E=w,I=90,b=360,T,R,L,j,le=2.5;function K(){return{type:"MultiLineString",coordinates:Z()}}function Z(){return Nh(mg(a/I)*I,i,I).map(L).concat(Nh(mg(l/b)*b,d,b).map(j)).concat(Nh(mg(t/w)*w,e,w).filter(function(W){return Nr(W%I)>dr}).map(T)).concat(Nh(mg(f/E)*E,u,E).filter(function(W){return Nr(W%b)>dr}).map(R))}return K.lines=function(){return Z().map(function(W){return{type:"LineString",coordinates:W}})},K.outline=function(){return{type:"Polygon",coordinates:[L(a).concat(j(d).slice(1),L(i).reverse().slice(1),j(l).reverse().slice(1))]}},K.extent=function(W){return arguments.length?K.extentMajor(W).extentMinor(W):K.extentMinor()},K.extentMajor=function(W){return arguments.length?(a=+W[0][0],i=+W[1][0],l=+W[0][1],d=+W[1][1],a>i&&(W=a,a=i,i=W),l>d&&(W=l,l=d,d=W),K.precision(le)):[[a,l],[i,d]]},K.extentMinor=function(W){return arguments.length?(t=+W[0][0],e=+W[1][0],f=+W[0][1],u=+W[1][1],t>e&&(W=t,t=e,e=W),f>u&&(W=f,f=u,u=W),K.precision(le)):[[t,f],[e,u]]},K.step=function(W){return arguments.length?K.stepMajor(W).stepMinor(W):K.stepMinor()},K.stepMajor=function(W){return arguments.length?(I=+W[0],b=+W[1],K):[I,b]},K.stepMinor=function(W){return arguments.length?(w=+W[0],E=+W[1],K):[w,E]},K.precision=function(W){return arguments.length?(le=+W,T=SP(f,u,90),R=EP(t,e,le),L=SP(l,d,90),j=EP(a,i,le),K):le},K.extentMajor([[-180,-90+dr],[180,90-dr]]).extentMinor([[-180,-80-dr],[180,80+dr]])}function yB(){return YM()()}function vB(e,t){var i=e[0]*gr,a=e[1]*gr,u=t[0]*gr,f=t[1]*gr,d=ar(a),l=tr(a),w=ar(f),E=tr(f),I=d*ar(i),b=d*tr(i),T=w*ar(u),R=w*tr(u),L=2*lo(vi(iP(f-a)+d*w*iP(u-i))),j=tr(L),le=L?function(K){var Z=tr(K*=L)/j,W=tr(L-K)/j,ae=W*I+Z*T,q=W*b+Z*R,V=W*l+Z*E;return[so(q,ae)*fn,so(V,vi(ae*ae+q*q))*fn]}:function(){return[i*fn,a*fn]};return le.distance=L,le}const Bp=e=>e;var I_=new qi,Dx=new qi,QM,e3,Nx,$x,ol={point:On,lineStart:On,lineEnd:On,polygonStart:function(){ol.lineStart=_B,ol.lineEnd=wB},polygonEnd:function(){ol.lineStart=ol.lineEnd=ol.point=On,I_.add(Nr(Dx)),Dx=new qi},result:function(){var e=I_/2;return I_=new qi,e}};function _B(){ol.point=xB}function xB(e,t){ol.point=t3,QM=Nx=e,e3=$x=t}function t3(e,t){Dx.add($x*e-Nx*t),Nx=e,$x=t}function wB(){t3(QM,e3)}var hf=1/0,Xy=hf,Dp=-hf,qy=Dp,Ky={point:bB,lineStart:On,lineEnd:On,polygonStart:On,polygonEnd:On,result:function(){var e=[[hf,Xy],[Dp,qy]];return Dp=qy=-(Xy=hf=1/0),e}};function bB(e,t){e<hf&&(hf=e),e>Dp&&(Dp=e),t<Xy&&(Xy=t),t>qy&&(qy=t)}var Ux=0,Vx=0,Wd=0,Jy=0,Yy=0,$h=0,Gx=0,Wx=0,Hd=0,r3,n3,bs,Ss,ma={point:Ec,lineStart:TP,lineEnd:PP,polygonStart:function(){ma.lineStart=TB,ma.lineEnd=PB},polygonEnd:function(){ma.point=Ec,ma.lineStart=TP,ma.lineEnd=PP},result:function(){var e=Hd?[Gx/Hd,Wx/Hd]:$h?[Jy/$h,Yy/$h]:Wd?[Ux/Wd,Vx/Wd]:[NaN,NaN];return Ux=Vx=Wd=Jy=Yy=$h=Gx=Wx=Hd=0,e}};function Ec(e,t){Ux+=e,Vx+=t,++Wd}function TP(){ma.point=SB}function SB(e,t){ma.point=EB,Ec(bs=e,Ss=t)}function EB(e,t){var i=e-bs,a=t-Ss,u=vi(i*i+a*a);Jy+=u*(bs+e)/2,Yy+=u*(Ss+t)/2,$h+=u,Ec(bs=e,Ss=t)}function PP(){ma.point=Ec}function TB(){ma.point=AB}function PB(){i3(r3,n3)}function AB(e,t){ma.point=i3,Ec(r3=bs=e,n3=Ss=t)}function i3(e,t){var i=e-bs,a=t-Ss,u=vi(i*i+a*a);Jy+=u*(bs+e)/2,Yy+=u*(Ss+t)/2,$h+=u,u=Ss*e-bs*t,Gx+=u*(bs+e),Wx+=u*(Ss+t),Hd+=u*3,Ec(bs=e,Ss=t)}function o3(e){this._context=e}o3.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ao);break}}},result:On};var Hx=new qi,C_,a3,s3,Zd,Xd,Np={point:On,lineStart:function(){Np.point=IB},lineEnd:function(){C_&&l3(a3,s3),Np.point=On},polygonStart:function(){C_=!0},polygonEnd:function(){C_=null},result:function(){var e=+Hx;return Hx=new qi,e}};function IB(e,t){Np.point=l3,a3=Zd=e,s3=Xd=t}function l3(e,t){Zd-=e,Xd-=t,Hx.add(vi(Zd*Zd+Xd*Xd)),Zd=e,Xd=t}function u3(){this._string=[]}u3.prototype={_radius:4.5,_circle:AP(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=AP(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function AP(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function CB(e,t){var i=4.5,a,u;function f(d){return d&&(typeof i=="function"&&u.pointRadius(+i.apply(this,arguments)),Ua(d,a(u))),u.result()}return f.area=function(d){return Ua(d,a(ol)),ol.result()},f.measure=function(d){return Ua(d,a(Np)),Np.result()},f.bounds=function(d){return Ua(d,a(Ky)),Ky.result()},f.centroid=function(d){return Ua(d,a(ma)),ma.result()},f.projection=function(d){return arguments.length?(a=d==null?(e=null,Bp):(e=d).stream,f):e},f.context=function(d){return arguments.length?(u=d==null?(t=null,new u3):new o3(t=d),typeof i!="function"&&u.pointRadius(i),f):t},f.pointRadius=function(d){return arguments.length?(i=typeof d=="function"?d:(u.pointRadius(+d),+d),f):i},f.projection(e).context(t)}function kB(e){return{stream:Qp(e)}}function Qp(e){return function(t){var i=new Zx;for(var a in e)i[a]=e[a];return i.stream=t,i}}function Zx(){}Zx.prototype={constructor:Zx,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Rb(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Ua(i,e.stream(Ky)),t(Ky.result()),a!=null&&e.clipExtent(a),e}function D0(e,t,i){return Rb(e,function(a){var u=t[1][0]-t[0][0],f=t[1][1]-t[0][1],d=Math.min(u/(a[1][0]-a[0][0]),f/(a[1][1]-a[0][1])),l=+t[0][0]+(u-d*(a[1][0]+a[0][0]))/2,w=+t[0][1]+(f-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([l,w])},i)}function jb(e,t,i){return D0(e,[[0,0],t],i)}function zb(e,t,i){return Rb(e,function(a){var u=+t,f=u/(a[1][0]-a[0][0]),d=(u-f*(a[1][0]+a[0][0]))/2,l=-f*a[0][1];e.scale(150*f).translate([d,l])},i)}function Lb(e,t,i){return Rb(e,function(a){var u=+t,f=u/(a[1][1]-a[0][1]),d=-f*a[0][0],l=(u-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([d,l])},i)}var IP=16,MB=ar(30*gr);function CP(e,t){return+t?FB(e,t):OB(e)}function OB(e){return Qp({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function FB(e,t){function i(a,u,f,d,l,w,E,I,b,T,R,L,j,le){var K=E-a,Z=I-u,W=K*K+Z*Z;if(W>4*t&&j--){var ae=d+T,q=l+R,V=w+L,P=vi(ae*ae+q*q+V*V),z=lo(V/=P),B=Nr(Nr(V)-1)<dr||Nr(f-b)<dr?(f+b)/2:so(q,ae),ee=e(B,z),X=ee[0],ye=ee[1],ge=X-a,fe=ye-u,ie=Z*ge-K*fe;(ie*ie/W>t||Nr((K*ge+Z*fe)/W-.5)>.3||d*T+l*R+w*L<MB)&&(i(a,u,f,d,l,w,X,ye,B,ae/=P,q/=P,V,j,le),le.point(X,ye),i(X,ye,B,ae,q,V,E,I,b,T,R,L,j,le))}}return function(a){var u,f,d,l,w,E,I,b,T,R,L,j,le={point:K,lineStart:Z,lineEnd:ae,polygonStart:function(){a.polygonStart(),le.lineStart=q},polygonEnd:function(){a.polygonEnd(),le.lineStart=Z}};function K(z,B){z=e(z,B),a.point(z[0],z[1])}function Z(){b=NaN,le.point=W,a.lineStart()}function W(z,B){var ee=Sc([z,B]),X=e(z,B);i(b,T,I,R,L,j,b=X[0],T=X[1],I=z,R=ee[0],L=ee[1],j=ee[2],IP,a),a.point(b,T)}function ae(){le.point=K,a.lineEnd()}function q(){Z(),le.point=V,le.lineEnd=P}function V(z,B){W(u=z,B),f=b,d=T,l=R,w=L,E=j,le.point=W}function P(){i(b,T,I,R,L,j,f,d,u,l,w,E,IP,a),le.lineEnd=ae,ae()}return le}}var RB=Qp({point:function(e,t){this.stream.point(e*gr,t*gr)}});function jB(e){return Qp({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function zB(e,t,i,a,u){function f(d,l){return d*=a,l*=u,[t+e*d,i-e*l]}return f.invert=function(d,l){return[(d-t)/e*a,(i-l)/e*u]},f}function kP(e,t,i,a,u,f){if(!f)return zB(e,t,i,a,u);var d=ar(f),l=tr(f),w=d*e,E=l*e,I=d/e,b=l/e,T=(l*i-d*t)/e,R=(l*t+d*i)/e;function L(j,le){return j*=a,le*=u,[w*j-E*le+t,i-E*j-w*le]}return L.invert=function(j,le){return[a*(I*j-b*le+T),u*(R-b*j-I*le)]},L}function ks(e){return Bb(function(){return e})()}function Bb(e){var t,i=150,a=480,u=250,f=0,d=0,l=0,w=0,E=0,I,b=0,T=1,R=1,L=null,j=jx,le=null,K,Z,W,ae=Bp,q=.5,V,P,z,B,ee;function X(ie){return z(ie[0]*gr,ie[1]*gr)}function ye(ie){return ie=z.invert(ie[0],ie[1]),ie&&[ie[0]*fn,ie[1]*fn]}X.stream=function(ie){return B&&ee===ie?B:B=RB(jB(I)(j(V(ae(ee=ie)))))},X.preclip=function(ie){return arguments.length?(j=ie,L=void 0,fe()):j},X.postclip=function(ie){return arguments.length?(ae=ie,le=K=Z=W=null,fe()):ae},X.clipAngle=function(ie){return arguments.length?(j=+ie?qM(L=ie*gr):(L=null,jx),fe()):L*fn},X.clipExtent=function(ie){return arguments.length?(ae=ie==null?(le=K=Z=W=null,Bp):B0(le=+ie[0][0],K=+ie[0][1],Z=+ie[1][0],W=+ie[1][1]),fe()):le==null?null:[[le,K],[Z,W]]},X.scale=function(ie){return arguments.length?(i=+ie,ge()):i},X.translate=function(ie){return arguments.length?(a=+ie[0],u=+ie[1],ge()):[a,u]},X.center=function(ie){return arguments.length?(f=ie[0]%360*gr,d=ie[1]%360*gr,ge()):[f*fn,d*fn]},X.rotate=function(ie){return arguments.length?(l=ie[0]%360*gr,w=ie[1]%360*gr,E=ie.length>2?ie[2]%360*gr:0,ge()):[l*fn,w*fn,E*fn]},X.angle=function(ie){return arguments.length?(b=ie%360*gr,ge()):b*fn},X.reflectX=function(ie){return arguments.length?(T=ie?-1:1,ge()):T<0},X.reflectY=function(ie){return arguments.length?(R=ie?-1:1,ge()):R<0},X.precision=function(ie){return arguments.length?(V=CP(P,q=ie*ie),fe()):vi(q)},X.fitExtent=function(ie,he){return D0(X,ie,he)},X.fitSize=function(ie,he){return jb(X,ie,he)},X.fitWidth=function(ie,he){return zb(X,ie,he)},X.fitHeight=function(ie,he){return Lb(X,ie,he)};function ge(){var ie=kP(i,0,0,T,R,b).apply(null,t(f,d)),he=kP(i,a-ie[0],u-ie[1],T,R,b);return I=Fb(l,w,E),P=Fx(t,he),z=Fx(I,P),V=CP(P,q),fe()}function fe(){return B=ee=null,X}return function(){return t=e.apply(this,arguments),X.invert=t.invert&&ye,ge()}}function Db(e){var t=0,i=kr/3,a=Bb(e),u=a(t,i);return u.parallels=function(f){return arguments.length?a(t=f[0]*gr,i=f[1]*gr):[t*fn,i*fn]},u}function LB(e){var t=ar(e);function i(a,u){return[a*t,tr(u)/t]}return i.invert=function(a,u){return[a/t,lo(u*t)]},i}function c3(e,t){var i=tr(e),a=(i+tr(t))/2;if(Nr(a)<dr)return LB(e);var u=1+i*(2*a-i),f=vi(u)/a;function d(l,w){var E=vi(u-2*a*tr(w))/a;return[E*tr(l*=a),f-E*ar(l)]}return d.invert=function(l,w){var E=f-w,I=so(l,Nr(E))*ya(E);return E*a<0&&(I-=kr*ya(l)*ya(E)),[I/a,lo((u-(l*l+E*E)*a*a)/(2*a))]},d}function Qy(){return Db(c3).scale(155.424).center([0,33.6442])}function h3(){return Qy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function BB(e){var t=e.length;return{point:function(i,a){for(var u=-1;++u<t;)e[u].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function DB(){var e,t,i=h3(),a,u=Qy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,d=Qy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,w,E={point:function(T,R){w=[T,R]}};function I(T){var R=T[0],L=T[1];return w=null,a.point(R,L),w||(f.point(R,L),w)||(l.point(R,L),w)}I.invert=function(T){var R=i.scale(),L=i.translate(),j=(T[0]-L[0])/R,le=(T[1]-L[1])/R;return(le>=.12&&le<.234&&j>=-.425&&j<-.214?u:le>=.166&&le<.234&&j>=-.214&&j<-.115?d:i).invert(T)},I.stream=function(T){return e&&t===T?e:e=BB([i.stream(t=T),u.stream(T),d.stream(T)])},I.precision=function(T){return arguments.length?(i.precision(T),u.precision(T),d.precision(T),b()):i.precision()},I.scale=function(T){return arguments.length?(i.scale(T),u.scale(T*.35),d.scale(T),I.translate(i.translate())):i.scale()},I.translate=function(T){if(!arguments.length)return i.translate();var R=i.scale(),L=+T[0],j=+T[1];return a=i.translate(T).clipExtent([[L-.455*R,j-.238*R],[L+.455*R,j+.238*R]]).stream(E),f=u.translate([L-.307*R,j+.201*R]).clipExtent([[L-.425*R+dr,j+.12*R+dr],[L-.214*R-dr,j+.234*R-dr]]).stream(E),l=d.translate([L-.205*R,j+.212*R]).clipExtent([[L-.214*R+dr,j+.166*R+dr],[L-.115*R-dr,j+.234*R-dr]]).stream(E),b()},I.fitExtent=function(T,R){return D0(I,T,R)},I.fitSize=function(T,R){return jb(I,T,R)},I.fitWidth=function(T,R){return zb(I,T,R)},I.fitHeight=function(T,R){return Lb(I,T,R)};function b(){return e=t=null,I}return I.scale(1070)}function f3(e){return function(t,i){var a=ar(t),u=ar(i),f=e(a*u);return f===1/0?[2,0]:[f*u*tr(t),f*tr(i)]}}function em(e){return function(t,i){var a=vi(t*t+i*i),u=e(a),f=tr(u),d=ar(u);return[so(t*f,a*d),lo(a&&i*f/a)]}}var Nb=f3(function(e){return vi(2/(1+e))});Nb.invert=em(function(e){return 2*lo(e/2)});function NB(){return ks(Nb).scale(124.75).clipAngle(180-.001)}var $b=f3(function(e){return(e=OM(e))&&e/tr(e)});$b.invert=em(function(e){return e});function $B(){return ks($b).scale(79.4188).clipAngle(180-.001)}function tm(e,t){return[e,Fy(Mb(($n+t)/2))]}tm.invert=function(e,t){return[e,2*Sf(MM(t))-$n]};function UB(){return d3(tm).scale(961/ao)}function d3(e){var t=ks(e),i=t.center,a=t.scale,u=t.translate,f=t.clipExtent,d=null,l,w,E;t.scale=function(b){return arguments.length?(a(b),I()):a()},t.translate=function(b){return arguments.length?(u(b),I()):u()},t.center=function(b){return arguments.length?(i(b),I()):i()},t.clipExtent=function(b){return arguments.length?(b==null?d=l=w=E=null:(d=+b[0][0],l=+b[0][1],w=+b[1][0],E=+b[1][1]),I()):d==null?null:[[d,l],[w,E]]};function I(){var b=kr*a(),T=t(VM(t.rotate()).invert([0,0]));return f(d==null?[[T[0]-b,T[1]-b],[T[0]+b,T[1]+b]]:e===tm?[[Math.max(T[0]-b,d),l],[Math.min(T[0]+b,w),E]]:[[d,Math.max(T[1]-b,l)],[w,Math.min(T[1]+b,E)]])}return I()}function xg(e){return Mb(($n+e)/2)}function p3(e,t){var i=ar(e),a=e===t?tr(e):Fy(i/ar(t))/Fy(xg(t)/xg(e)),u=i*T_(xg(e),a)/a;if(!a)return tm;function f(d,l){u>0?l<-$n+dr&&(l=-$n+dr):l>$n-dr&&(l=$n-dr);var w=u/T_(xg(l),a);return[w*tr(a*d),u-w*ar(a*d)]}return f.invert=function(d,l){var w=u-l,E=ya(a)*vi(d*d+w*w),I=so(d,Nr(w))*ya(w);return w*a<0&&(I-=kr*ya(d)*ya(w)),[I/a,2*Sf(T_(u/E,1/a))-$n]},f}function VB(){return Db(p3).scale(109.5).parallels([30,30])}function $p(e,t){return[e,t]}$p.invert=$p;function GB(){return ks($p).scale(152.63)}function m3(e,t){var i=ar(e),a=e===t?tr(e):(i-ar(t))/(t-e),u=i/a+e;if(Nr(a)<dr)return $p;function f(d,l){var w=u-l,E=a*d;return[w*tr(E),u-w*ar(E)]}return f.invert=function(d,l){var w=u-l,E=so(d,Nr(w))*ya(w);return w*a<0&&(E-=kr*ya(d)*ya(w)),[E/a,u-ya(a)*vi(d*d+w*w)]},f}function WB(){return Db(m3).scale(131.154).center([0,13.9389])}var lp=1.340264,up=-.081106,cp=893e-6,hp=.003796,e0=vi(3)/2,HB=12;function Ub(e,t){var i=lo(e0*tr(t)),a=i*i,u=a*a*a;return[e*ar(i)/(e0*(lp+3*up*a+u*(7*cp+9*hp*a))),i*(lp+up*a+u*(cp+hp*a))]}Ub.invert=function(e,t){for(var i=t,a=i*i,u=a*a*a,f=0,d,l,w;f<HB&&(l=i*(lp+up*a+u*(cp+hp*a))-t,w=lp+3*up*a+u*(7*cp+9*hp*a),i-=d=l/w,a=i*i,u=a*a*a,!(Nr(d)<Lp));++f);return[e0*e*(lp+3*up*a+u*(7*cp+9*hp*a))/ar(i),lo(tr(i)/e0)]};function ZB(){return ks(Ub).scale(177.158)}function Vb(e,t){var i=ar(t),a=ar(e)*i;return[i*tr(e)/a,tr(t)/a]}Vb.invert=em(Sf);function XB(){return ks(Vb).scale(144.049).clipAngle(60)}function qB(){var e=1,t=0,i=0,a=1,u=1,f=0,d,l,w=null,E,I,b,T=1,R=1,L=Qp({point:function(ae,q){var V=W([ae,q]);this.stream.point(V[0],V[1])}}),j=Bp,le,K;function Z(){return T=e*a,R=e*u,le=K=null,W}function W(ae){var q=ae[0]*T,V=ae[1]*R;if(f){var P=V*d-q*l;q=q*d+V*l,V=P}return[q+t,V+i]}return W.invert=function(ae){var q=ae[0]-t,V=ae[1]-i;if(f){var P=V*d+q*l;q=q*d-V*l,V=P}return[q/T,V/R]},W.stream=function(ae){return le&&K===ae?le:le=L(j(K=ae))},W.postclip=function(ae){return arguments.length?(j=ae,w=E=I=b=null,Z()):j},W.clipExtent=function(ae){return arguments.length?(j=ae==null?(w=E=I=b=null,Bp):B0(w=+ae[0][0],E=+ae[0][1],I=+ae[1][0],b=+ae[1][1]),Z()):w==null?null:[[w,E],[I,b]]},W.scale=function(ae){return arguments.length?(e=+ae,Z()):e},W.translate=function(ae){return arguments.length?(t=+ae[0],i=+ae[1],Z()):[t,i]},W.angle=function(ae){return arguments.length?(f=ae%360*gr,l=tr(f),d=ar(f),Z()):f*fn},W.reflectX=function(ae){return arguments.length?(a=ae?-1:1,Z()):a<0},W.reflectY=function(ae){return arguments.length?(u=ae?-1:1,Z()):u<0},W.fitExtent=function(ae,q){return D0(W,ae,q)},W.fitSize=function(ae,q){return jb(W,ae,q)},W.fitWidth=function(ae,q){return zb(W,ae,q)},W.fitHeight=function(ae,q){return Lb(W,ae,q)},W}function Gb(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}Gb.invert=function(e,t){var i=t,a=25,u;do{var f=i*i,d=f*f;i-=u=(i*(1.007226+f*(.015085+d*(-.044475+.028874*f-.005916*d)))-t)/(1.007226+f*(.015085*3+d*(-.044475*7+.028874*9*f-.005916*11*d)))}while(Nr(u)>dr&&--a>0);return[e/(.8707+(f=i*i)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),i]};function KB(){return ks(Gb).scale(175.295)}function Wb(e,t){return[ar(t)*tr(e),tr(t)]}Wb.invert=em(lo);function JB(){return ks(Wb).scale(249.5).clipAngle(90+dr)}function Hb(e,t){var i=ar(t),a=1+ar(e)*i;return[i*tr(e)/a,tr(t)/a]}Hb.invert=em(function(e){return 2*Sf(e)});function YB(){return ks(Hb).scale(250).clipAngle(142)}function Zb(e,t){return[Fy(Mb(($n+t)/2)),-e]}Zb.invert=function(e,t){return[-t,2*Sf(MM(e))-$n]};function QB(){var e=d3(Zb),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const eD=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:h3,geoAlbersUsa:DB,geoArea:W6,geoAzimuthalEqualArea:NB,geoAzimuthalEqualAreaRaw:Nb,geoAzimuthalEquidistant:$B,geoAzimuthalEquidistantRaw:$b,geoBounds:q6,geoCentroid:tB,geoCircle:rB,geoClipAntimeridian:jx,geoClipCircle:qM,geoClipExtent:uB,geoClipRectangle:B0,geoConicConformal:VB,geoConicConformalRaw:p3,geoConicEqualArea:Qy,geoConicEqualAreaRaw:c3,geoConicEquidistant:WB,geoConicEquidistantRaw:m3,geoContains:gB,geoDistance:Hy,geoEqualEarth:ZB,geoEqualEarthRaw:Ub,geoEquirectangular:GB,geoEquirectangularRaw:$p,geoGnomonic:XB,geoGnomonicRaw:Vb,geoGraticule:YM,geoGraticule10:yB,geoIdentity:qB,geoInterpolate:vB,geoLength:KM,geoMercator:UB,geoMercatorRaw:tm,geoNaturalEarth1:KB,geoNaturalEarth1Raw:Gb,geoOrthographic:JB,geoOrthographicRaw:Wb,geoPath:CB,geoProjection:ks,geoProjectionMutator:Bb,geoRotation:VM,geoStereographic:YB,geoStereographicRaw:Hb,geoStream:Ua,geoTransform:kB,geoTransverseMercator:QB,geoTransverseMercatorRaw:Zb},Symbol.toStringTag,{value:"Module"})),tD=ww(eD);var Eu=2*Math.PI*6378137/2,rD=Math.PI/180;function g3(e){return e=e||256,2*Math.PI*6378137/e}function nD(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function Xx(e,t,i){var a=y3(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function y3(e,t,i){var a=t,u=t2(e[0]),f=e2(e[1]),d=Math.sin(f*rD),l=Math.pow(2,a),w=l*(u/360+.5),E=l*(.5-.25*Math.log((1+d)/(1-d))/Math.PI);return Ic([w,E,a],i)}function iD(e,t=6){var i=e[0],a=e[1],u=e[2],f=e[3],d=(i-u)/2+u,l=(a-f)/2+f;return t!=null&&(d=Number(d.toFixed(t)),l=Number(l.toFixed(t))),[d,l]}function t0(e,t,i={enable:!0,decimal:1}){e=N0(e,t);var a=e[0],u=e[1],f=a*Eu/180,d=Math.log(Math.tan((90+u)*Math.PI/360))/(Math.PI/180);return d=d*Eu/180,i.enable&&(f=Number(f.toFixed(i.decimal)),d=Number(d.toFixed(i.decimal))),[f,d]}function qx(e,t=6){var i=e[0],a=e[1],u=i/Eu*180,f=a/Eu*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(u=Number(u.toFixed(t)),f=Number(f.toFixed(t))),[u,f]}function Xb(e,t,i){var a=e[0],u=e[1],f=Yb(t,i),d=(a+Eu)/f,l=(u+Eu)/f;return[d,l,t]}function v3(e,t,i){e=N0(e,i);var a=t0(e),u=Xb(a,t);return qb(u)}function oD(e,t,i){if(e=N0(e,i),t===0)return[0,0,0];var a=v3(e,t);return x3(a)}function aD(e,t){if(t===0)return[0,0,0];var i=Xb(e,t);return qb(i)}function Kx(e,t,i=1){var a=e[0],u=e[1],f=e[2],d=Yb(f,t),l=a*d-Eu,w=u*d-Eu;return i!=null&&(l=Number(l.toFixed(i)),w=Number(w.toFixed(i))),[l,w]}function qb(e,t,i){t=t||256;var a=e[0],u=e[1],f=e[2];if(f===0)return[0,0,0];Jb(f);var d=Math.ceil(a/t)-1,l=Math.ceil(u/t)-1;return d<0&&(d=0),l<0&&(l=0),[d,l,f]}function Kb(e,t,i){Ic(e,i),t=t||256;var a=e[0],u=e[1],f=e[2],d=Kx([a*t,u*t,f]),l=Kx([(a+1)*t,(u+1)*t,f]);return[d[0],d[1],l[0],l[1]]}function _3(e,t){Ic(e,t);var i=e[0],a=e[1],u=e[2];if(u===0)return[-180,-85.051129,180,85.051129];var f=Kb([i,a,u]),d=f[0],l=f[1],w=f[2],E=f[3],I=qx([d,l,u]),b=qx([w,E,u]);return[I[0],I[1],b[0],b[1]]}function sD(e){var t=rm(e);return Kb(t)}function lD(e){var t=rm(e);return _3(t)}function x3(e,t){Ic(e,t);var i=e[0],a=e[1],u=e[2];if(u===0)return[0,0,0];var f=i,d=Math.pow(2,u)-1-a;return[f,d,u]}function rm(e){var t=e[0],i=e[1],a=e[2],u=t,f=Math.pow(2,a)-i-1;return[u,f,a]}function uD(e){var t=rm(e);return w3(t)}function w3(e,t){Ic(e,t);var i=e[0],a=e[1],u=e[2];if(u===0)return"";var f="";return a=Math.pow(2,u)-1-a,Qb(u,0,-1).map(function(d){var l=0,w=1<<d-1;i&w&&(l+=1),a&w&&(l+=2),f=f.concat(l)}),f}function cD(e){var t=b3(e);return rm(t)}function b3(e){var t=0,i=0,a=e.length;return Qb(a,0,-1).map(function(u){var f=1<<u-1;switch(parseInt(e[a-u],0)){case 0:break;case 1:t+=f;break;case 2:i+=f;break;case 3:t+=f,i+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function hD(e){var t=t0([e[0],e[1]]),i=t0([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function Ic(e,t){var i=e[0],a=e[1],u=e[2];if(t===!1)return e;if(u==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return u=Jb(u),e=S3(e),e}function S3(e){var t=e[0],i=e[1],a=e[2],u=Math.pow(2,a);return t=t%u,t<0&&(t=t+u),[t,i,a]}function Jb(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function N0(e,t){if(t===!1)return e;var i=t2(e[0]),a=e2(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function Yb(e,t){return g3(t)/Math.pow(2,e)}function Qb(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),u=Array(a),f=0;f<a;f++,e+=i)u[f]=e;return u}function fD(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],u=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<i&&(i=f[1]),f[2]>a&&(a=f[2]),f[3]>u&&(u=f[3])}),[t,i,a,u]}}function dD(e){try{return Ic(e),!0}catch{return!1}}function e2(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function t2(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function pD(e){var t=Xx([e[0],e[1]],32),i=Xx([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],u=mD(a);if(u===0)return[0,0,0];var f=a[0]>>>32-u,d=a[1]>>>32-u;return[f,d,u]}function mD(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const gD=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:iD,bboxToMeters:hD,bboxToTile:pD,googleToBBox:lD,googleToBBoxMeters:sD,googleToQuadkey:uD,googleToTile:rm,hash:nD,initialResolution:g3,latitude:e2,lngLatToGoogle:oD,lngLatToMeters:t0,lngLatToTile:v3,longitude:t2,maxBBox:fD,metersToLngLat:qx,metersToPixels:Xb,metersToTile:aD,pixelsToMeters:Kx,pixelsToTile:qb,pointToTile:Xx,pointToTileFraction:y3,quadkeyToGoogle:b3,quadkeyToTile:cD,range:Qb,resolution:Yb,tileToBBox:_3,tileToBBoxMeters:Kb,tileToGoogle:x3,tileToQuadkey:w3,validTile:dD,validateLngLat:N0,validateTile:Ic,validateZoom:Jb,wrapTile:S3},Symbol.toStringTag,{value:"Module"})),yD=ww(gD);var $0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */$0.read=function(e,t,i,a,u){var f,d,l=u*8-a-1,w=(1<<l)-1,E=w>>1,I=-7,b=i?u-1:0,T=i?-1:1,R=e[t+b];for(b+=T,f=R&(1<<-I)-1,R>>=-I,I+=l;I>0;f=f*256+e[t+b],b+=T,I-=8);for(d=f&(1<<-I)-1,f>>=-I,I+=a;I>0;d=d*256+e[t+b],b+=T,I-=8);if(f===0)f=1-E;else{if(f===w)return d?NaN:(R?-1:1)*(1/0);d=d+Math.pow(2,a),f=f-E}return(R?-1:1)*d*Math.pow(2,f-a)};$0.write=function(e,t,i,a,u,f){var d,l,w,E=f*8-u-1,I=(1<<E)-1,b=I>>1,T=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=a?0:f-1,L=a?1:-1,j=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,d=I):(d=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-d))<1&&(d--,w*=2),d+b>=1?t+=T/w:t+=T*Math.pow(2,1-b),t*w>=2&&(d++,w/=2),d+b>=I?(l=0,d=I):d+b>=1?(l=(t*w-1)*Math.pow(2,u),d=d+b):(l=t*Math.pow(2,b-1)*Math.pow(2,u),d=0));u>=8;e[i+R]=l&255,R+=L,l/=256,u-=8);for(d=d<<u|l,E+=u;E>0;e[i+R]=d&255,R+=L,d/=256,E-=8);e[i+R-L]|=j*128};var vD=qr,wg=$0;function qr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qr.Varint=0;qr.Fixed64=1;qr.Bytes=2;qr.Fixed32=5;var Jx=65536*65536,MP=1/Jx,_D=12,E3=typeof TextDecoder>"u"?null:new TextDecoder("utf8");qr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),u=a>>3,f=this.pos;this.type=a&7,e(u,t,this),this.pos===f&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=bg(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=FP(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=bg(this.buf,this.pos)+bg(this.buf,this.pos+4)*Jx;return this.pos+=8,e},readSFixed64:function(){var e=bg(this.buf,this.pos)+FP(this.buf,this.pos+4)*Jx;return this.pos+=8,e},readFloat:function(){var e=wg.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=wg.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,xD(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=_D&&E3?RD(this.buf,t,e):FD(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qr.Bytes)return e.push(this.readVarint(t));var i=el(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qr.Bytes)return e.push(this.readSVarint());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qr.Bytes)return e.push(this.readBoolean());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qr.Bytes)return e.push(this.readFloat());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qr.Bytes)return e.push(this.readDouble());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qr.Bytes)return e.push(this.readFixed32());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qr.Bytes)return e.push(this.readSFixed32());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qr.Bytes)return e.push(this.readFixed64());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qr.Bytes)return e.push(this.readSFixed64());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===qr.Varint)for(;this.buf[this.pos++]>127;);else if(t===qr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qr.Fixed32)this.pos+=4;else if(t===qr.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),vh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),vh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),vh(this.buf,e&-1,this.pos),vh(this.buf,Math.floor(e*MP),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),vh(this.buf,e&-1,this.pos),vh(this.buf,Math.floor(e*MP),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){wD(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=jD(this.buf,e,this.pos);var i=this.pos-t;i>=128&&OP(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),wg.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),wg.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&OP(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,qr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,ED,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,TD,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,ID,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,PD,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,AD,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,CD,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,kD,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,MD,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,OD,t)},writeBytesField:function(e,t){this.writeTag(e,qr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function xD(e,t,i){var a=i.buf,u,f;if(f=a[i.pos++],u=(f&112)>>4,f<128||(f=a[i.pos++],u|=(f&127)<<3,f<128)||(f=a[i.pos++],u|=(f&127)<<10,f<128)||(f=a[i.pos++],u|=(f&127)<<17,f<128)||(f=a[i.pos++],u|=(f&127)<<24,f<128)||(f=a[i.pos++],u|=(f&1)<<31,f<128))return yh(e,u,t);throw new Error("Expected varint not more than 10 bytes")}function el(e){return e.type===qr.Bytes?e.readVarint()+e.pos:e.pos+1}function yh(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function wD(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),bD(i,a,t),SD(a,t)}function bD(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function SD(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function OP(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var u=i.pos-1;u>=e;u--)i.buf[u+a]=i.buf[u]}function ED(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function TD(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function PD(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function AD(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function ID(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function CD(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function kD(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function MD(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function OD(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function bg(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function vh(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function FP(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function FD(e,t,i){for(var a="",u=t;u<i;){var f=e[u],d=null,l=f>239?4:f>223?3:f>191?2:1;if(u+l>i)break;var w,E,I;l===1?f<128&&(d=f):l===2?(w=e[u+1],(w&192)===128&&(d=(f&31)<<6|w&63,d<=127&&(d=null))):l===3?(w=e[u+1],E=e[u+2],(w&192)===128&&(E&192)===128&&(d=(f&15)<<12|(w&63)<<6|E&63,(d<=2047||d>=55296&&d<=57343)&&(d=null))):l===4&&(w=e[u+1],E=e[u+2],I=e[u+3],(w&192)===128&&(E&192)===128&&(I&192)===128&&(d=(f&15)<<18|(w&63)<<12|(E&63)<<6|I&63,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,l=1):d>65535&&(d-=65536,a+=String.fromCharCode(d>>>10&1023|55296),d=56320|d&1023),a+=String.fromCharCode(d),u+=l}return a}function RD(e,t,i){return E3.decode(e.subarray(t,i))}function jD(e,t,i){for(var a=0,u,f;a<t.length;a++){if(u=t.charCodeAt(a),u>55295&&u<57344)if(f)if(u<56320){e[i++]=239,e[i++]=191,e[i++]=189,f=u;continue}else u=f-55296<<10|u-56320|65536,f=null;else{u>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):f=u;continue}else f&&(e[i++]=239,e[i++]=191,e[i++]=189,f=null);u<128?e[i++]=u:(u<2048?e[i++]=u>>6|192:(u<65536?e[i++]=u>>12|224:(e[i++]=u>>18|240,e[i++]=u>>12&63|128),e[i++]=u>>6&63|128),e[i++]=u&63|128)}return i}var r2={exports:{}},T3=function(t,i){return function(){for(var u=new Array(arguments.length),f=0;f<u.length;f++)u[f]=arguments[f];return t.apply(i,u)}},zD=T3,Cc=Object.prototype.toString;function n2(e){return Cc.call(e)==="[object Array]"}function Yx(e){return typeof e>"u"}function LD(e){return e!==null&&!Yx(e)&&e.constructor!==null&&!Yx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function BD(e){return Cc.call(e)==="[object ArrayBuffer]"}function DD(e){return typeof FormData<"u"&&e instanceof FormData}function ND(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function $D(e){return typeof e=="string"}function UD(e){return typeof e=="number"}function P3(e){return e!==null&&typeof e=="object"}function Gg(e){if(Cc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function VD(e){return Cc.call(e)==="[object Date]"}function GD(e){return Cc.call(e)==="[object File]"}function WD(e){return Cc.call(e)==="[object Blob]"}function A3(e){return Cc.call(e)==="[object Function]"}function HD(e){return P3(e)&&A3(e.pipe)}function ZD(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function XD(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function qD(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function i2(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),n2(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function Qx(){var e={};function t(u,f){Gg(e[f])&&Gg(u)?e[f]=Qx(e[f],u):Gg(u)?e[f]=Qx({},u):n2(u)?e[f]=u.slice():e[f]=u}for(var i=0,a=arguments.length;i<a;i++)i2(arguments[i],t);return e}function KD(e,t,i){return i2(t,function(u,f){i&&typeof u=="function"?e[f]=zD(u,i):e[f]=u}),e}function JD(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Qo={isArray:n2,isArrayBuffer:BD,isBuffer:LD,isFormData:DD,isArrayBufferView:ND,isString:$D,isNumber:UD,isObject:P3,isPlainObject:Gg,isUndefined:Yx,isDate:VD,isFile:GD,isBlob:WD,isFunction:A3,isStream:HD,isURLSearchParams:ZD,isStandardBrowserEnv:qD,forEach:i2,merge:Qx,extend:KD,trim:XD,stripBOM:JD},_h=Qo;function RP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var I3=function(t,i,a){if(!i)return t;var u;if(a)u=a(i);else if(_h.isURLSearchParams(i))u=i.toString();else{var f=[];_h.forEach(i,function(w,E){w===null||typeof w>"u"||(_h.isArray(w)?E=E+"[]":w=[w],_h.forEach(w,function(b){_h.isDate(b)?b=b.toISOString():_h.isObject(b)&&(b=JSON.stringify(b)),f.push(RP(E)+"="+RP(b))}))}),u=f.join("&")}if(u){var d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t},YD=Qo;function U0(){this.handlers=[]}U0.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};U0.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};U0.prototype.forEach=function(t){YD.forEach(this.handlers,function(a){a!==null&&t(a)})};var QD=U0,eN=Qo,tN=function(t,i){eN.forEach(t,function(u,f){f!==i&&f.toUpperCase()===i.toUpperCase()&&(t[i]=u,delete t[f])})},C3=function(t,i,a,u,f){return t.config=i,a&&(t.code=a),t.request=u,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},k_,jP;function k3(){if(jP)return k_;jP=1;var e=C3;return k_=function(i,a,u,f,d){var l=new Error(i);return e(l,a,u,f,d)},k_}var M_,zP;function rN(){if(zP)return M_;zP=1;var e=k3();return M_=function(i,a,u){var f=u.config.validateStatus;!u.status||!f||f(u.status)?i(u):a(e("Request failed with status code "+u.status,u.config,null,u.request,u))},M_}var O_,LP;function nN(){if(LP)return O_;LP=1;var e=Qo;return O_=e.isStandardBrowserEnv()?function(){return{write:function(a,u,f,d,l,w){var E=[];E.push(a+"="+encodeURIComponent(u)),e.isNumber(f)&&E.push("expires="+new Date(f).toGMTString()),e.isString(d)&&E.push("path="+d),e.isString(l)&&E.push("domain="+l),w===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var u=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),O_}var F_,BP;function iN(){return BP||(BP=1,F_=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),F_}var R_,DP;function oN(){return DP||(DP=1,R_=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),R_}var j_,NP;function aN(){if(NP)return j_;NP=1;var e=iN(),t=oN();return j_=function(a,u){return a&&!e(u)?t(a,u):u},j_}var z_,$P;function sN(){if($P)return z_;$P=1;var e=Qo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return z_=function(a){var u={},f,d,l;return a&&e.forEach(a.split(`
`),function(E){if(l=E.indexOf(":"),f=e.trim(E.substr(0,l)).toLowerCase(),d=e.trim(E.substr(l+1)),f){if(u[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?u[f]=(u[f]?u[f]:[]).concat([d]):u[f]=u[f]?u[f]+", "+d:d}}),u},z_}var L_,UP;function lN(){if(UP)return L_;UP=1;var e=Qo;return L_=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),u;function f(d){var l=d;return i&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return u=f(window.location.href),function(l){var w=e.isString(l)?f(l):l;return w.protocol===u.protocol&&w.host===u.host}}():function(){return function(){return!0}}(),L_}var B_,VP;function GP(){if(VP)return B_;VP=1;var e=Qo,t=rN(),i=nN(),a=I3,u=aN(),f=sN(),d=lN(),l=k3();return B_=function(E){return new Promise(function(b,T){var R=E.data,L=E.headers,j=E.responseType;e.isFormData(R)&&delete L["Content-Type"];var le=new XMLHttpRequest;if(E.auth){var K=E.auth.username||"",Z=E.auth.password?unescape(encodeURIComponent(E.auth.password)):"";L.Authorization="Basic "+btoa(K+":"+Z)}var W=u(E.baseURL,E.url);le.open(E.method.toUpperCase(),a(W,E.params,E.paramsSerializer),!0),le.timeout=E.timeout;function ae(){if(le){var V="getAllResponseHeaders"in le?f(le.getAllResponseHeaders()):null,P=!j||j==="text"||j==="json"?le.responseText:le.response,z={data:P,status:le.status,statusText:le.statusText,headers:V,config:E,request:le};t(b,T,z),le=null}}if("onloadend"in le?le.onloadend=ae:le.onreadystatechange=function(){!le||le.readyState!==4||le.status===0&&!(le.responseURL&&le.responseURL.indexOf("file:")===0)||setTimeout(ae)},le.onabort=function(){le&&(T(l("Request aborted",E,"ECONNABORTED",le)),le=null)},le.onerror=function(){T(l("Network Error",E,null,le)),le=null},le.ontimeout=function(){var P="timeout of "+E.timeout+"ms exceeded";E.timeoutErrorMessage&&(P=E.timeoutErrorMessage),T(l(P,E,E.transitional&&E.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",le)),le=null},e.isStandardBrowserEnv()){var q=(E.withCredentials||d(W))&&E.xsrfCookieName?i.read(E.xsrfCookieName):void 0;q&&(L[E.xsrfHeaderName]=q)}"setRequestHeader"in le&&e.forEach(L,function(P,z){typeof R>"u"&&z.toLowerCase()==="content-type"?delete L[z]:le.setRequestHeader(z,P)}),e.isUndefined(E.withCredentials)||(le.withCredentials=!!E.withCredentials),j&&j!=="json"&&(le.responseType=E.responseType),typeof E.onDownloadProgress=="function"&&le.addEventListener("progress",E.onDownloadProgress),typeof E.onUploadProgress=="function"&&le.upload&&le.upload.addEventListener("progress",E.onUploadProgress),E.cancelToken&&E.cancelToken.promise.then(function(P){le&&(le.abort(),T(P),le=null)}),R||(R=null),le.send(R)})},B_}var Mi=Qo,WP=tN,uN=C3,cN={"Content-Type":"application/x-www-form-urlencoded"};function HP(e,t){!Mi.isUndefined(e)&&Mi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function hN(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=GP()),e}function fN(e,t,i){if(Mi.isString(e))try{return(t||JSON.parse)(e),Mi.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var V0={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:hN(),transformRequest:[function(t,i){return WP(i,"Accept"),WP(i,"Content-Type"),Mi.isFormData(t)||Mi.isArrayBuffer(t)||Mi.isBuffer(t)||Mi.isStream(t)||Mi.isFile(t)||Mi.isBlob(t)?t:Mi.isArrayBufferView(t)?t.buffer:Mi.isURLSearchParams(t)?(HP(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Mi.isObject(t)||i&&i["Content-Type"]==="application/json"?(HP(i,"application/json"),fN(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,u=i&&i.forcedJSONParsing,f=!a&&this.responseType==="json";if(f||u&&Mi.isString(t)&&t.length)try{return JSON.parse(t)}catch(d){if(f)throw d.name==="SyntaxError"?uN(d,this,"E_JSON_PARSE"):d}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};V0.headers={common:{Accept:"application/json, text/plain, */*"}};Mi.forEach(["delete","get","head"],function(t){V0.headers[t]={}});Mi.forEach(["post","put","patch"],function(t){V0.headers[t]=Mi.merge(cN)});var o2=V0,dN=Qo,pN=o2,mN=function(t,i,a){var u=this||pN;return dN.forEach(a,function(d){t=d.call(u,t,i)}),t},D_,ZP;function M3(){return ZP||(ZP=1,D_=function(t){return!!(t&&t.__CANCEL__)}),D_}var XP=Qo,N_=mN,gN=M3(),yN=o2;function $_(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var vN=function(t){$_(t),t.headers=t.headers||{},t.data=N_.call(t,t.data,t.headers,t.transformRequest),t.headers=XP.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),XP.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var i=t.adapter||yN.adapter;return i(t).then(function(u){return $_(t),u.data=N_.call(t,u.data,u.headers,t.transformResponse),u},function(u){return gN(u)||($_(t),u&&u.response&&(u.response.data=N_.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})},Zi=Qo,O3=function(t,i){i=i||{};var a={},u=["url","method","data"],f=["headers","auth","proxy","params"],d=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function w(T,R){return Zi.isPlainObject(T)&&Zi.isPlainObject(R)?Zi.merge(T,R):Zi.isPlainObject(R)?Zi.merge({},R):Zi.isArray(R)?R.slice():R}function E(T){Zi.isUndefined(i[T])?Zi.isUndefined(t[T])||(a[T]=w(void 0,t[T])):a[T]=w(t[T],i[T])}Zi.forEach(u,function(R){Zi.isUndefined(i[R])||(a[R]=w(void 0,i[R]))}),Zi.forEach(f,E),Zi.forEach(d,function(R){Zi.isUndefined(i[R])?Zi.isUndefined(t[R])||(a[R]=w(void 0,t[R])):a[R]=w(void 0,i[R])}),Zi.forEach(l,function(R){R in i?a[R]=w(t[R],i[R]):R in t&&(a[R]=w(void 0,t[R]))});var I=u.concat(f).concat(d).concat(l),b=Object.keys(t).concat(Object.keys(i)).filter(function(R){return I.indexOf(R)===-1});return Zi.forEach(b,E),a};const _N="axios",xN="0.21.4",wN="Promise based HTTP client for the browser and node.js",bN="index.js",SN={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},EN={type:"git",url:"https://github.com/axios/axios.git"},TN=["xhr","http","ajax","promise","node"],PN="Matt Zabriskie",AN="MIT",IN={url:"https://github.com/axios/axios/issues"},CN="https://axios-http.com",kN={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},MN={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},ON="dist/axios.min.js",FN="dist/axios.min.js",RN="./index.d.ts",jN={"follow-redirects":"^1.14.0"},zN=[{path:"./dist/axios.min.js",threshold:"5kB"}],LN={name:_N,version:xN,description:wN,main:bN,scripts:SN,repository:EN,keywords:TN,author:PN,license:AN,bugs:IN,homepage:CN,devDependencies:kN,browser:MN,jsdelivr:ON,unpkg:FN,typings:RN,dependencies:jN,bundlesize:zN};var F3=LN,a2={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){a2[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var qP={},BN=F3.version.split(".");function R3(e,t){for(var i=t?t.split("."):BN,a=e.split("."),u=0;u<3;u++){if(i[u]>a[u])return!0;if(i[u]<a[u])return!1}return!1}a2.transitional=function(t,i,a){var u=i&&R3(i);function f(d,l){return"[Axios v"+F3.version+"] Transitional option '"+d+"'"+l+(a?". "+a:"")}return function(d,l,w){if(t===!1)throw new Error(f(l," has been removed in "+i));return u&&!qP[l]&&(qP[l]=!0,console.warn(f(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(d,l,w):!0}};function DN(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),u=a.length;u-- >0;){var f=a[u],d=t[f];if(d){var l=e[f],w=l===void 0||d(l,f,e);if(w!==!0)throw new TypeError("option "+f+" must be "+w);continue}if(i!==!0)throw Error("Unknown option "+f)}}var NN={isOlderVersion:R3,assertOptions:DN,validators:a2},j3=Qo,$N=I3,KP=QD,JP=vN,G0=O3,z3=NN,xh=z3.validators;function nm(e){this.defaults=e,this.interceptors={request:new KP,response:new KP}}nm.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=G0(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&z3.assertOptions(i,{silentJSONParsing:xh.transitional(xh.boolean,"1.0.0"),forcedJSONParsing:xh.transitional(xh.boolean,"1.0.0"),clarifyTimeoutError:xh.transitional(xh.boolean,"1.0.0")},!1);var a=[],u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(u=u&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});var d;if(!u){var l=[JP,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(f),d=Promise.resolve(t);l.length;)d=d.then(l.shift(),l.shift());return d}for(var w=t;a.length;){var E=a.shift(),I=a.shift();try{w=E(w)}catch(b){I(b);break}}try{d=JP(w)}catch(b){return Promise.reject(b)}for(;f.length;)d=d.then(f.shift(),f.shift());return d};nm.prototype.getUri=function(t){return t=G0(this.defaults,t),$N(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};j3.forEach(["delete","get","head","options"],function(t){nm.prototype[t]=function(i,a){return this.request(G0(a||{},{method:t,url:i,data:(a||{}).data}))}});j3.forEach(["post","put","patch"],function(t){nm.prototype[t]=function(i,a,u){return this.request(G0(u||{},{method:t,url:i,data:a}))}});var UN=nm,U_,YP;function L3(){if(YP)return U_;YP=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,U_=e,U_}var V_,QP;function VN(){if(QP)return V_;QP=1;var e=L3();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(d){a=d});var u=this;i(function(d){u.reason||(u.reason=new e(d),a(u.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,u=new t(function(d){a=d});return{token:u,cancel:a}},V_=t,V_}var G_,eA;function GN(){return eA||(eA=1,G_=function(t){return function(a){return t.apply(null,a)}}),G_}var W_,tA;function WN(){return tA||(tA=1,W_=function(t){return typeof t=="object"&&t.isAxiosError===!0}),W_}var rA=Qo,HN=T3,Wg=UN,ZN=O3,XN=o2;function B3(e){var t=new Wg(e),i=HN(Wg.prototype.request,t);return rA.extend(i,Wg.prototype,t),rA.extend(i,t),i}var Ka=B3(XN);Ka.Axios=Wg;Ka.create=function(t){return B3(ZN(Ka.defaults,t))};Ka.Cancel=L3();Ka.CancelToken=VN();Ka.isCancel=M3();Ka.all=function(t){return Promise.all(t)};Ka.spread=GN();Ka.isAxiosError=WN();r2.exports=Ka;r2.exports.default=Ka;var qN=r2.exports,KN=qN;const JN={},YN=Object.freeze(Object.defineProperty({__proto__:null,default:JN},Symbol.toStringTag,{value:"Module"})),D3=ww(YN);var W0={},QN=Jh;function Jh(e,t){this.x=e,this.y=t}Jh.prototype={clone:function(){return new Jh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,u=i*this.x+t*this.y;return this.x=a,this.y=u,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),u=t.x+i*(this.x-t.x)-a*(this.y-t.y),f=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=u,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Jh.convert=function(e){return e instanceof Jh?e:Array.isArray(e)?new Jh(e[0],e[1]):e};var e8=QN,N3=ff;function ff(e,t,i,a,u){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=u,e.readFields(t8,this,t)}function t8(e,t,i){e==1?t.id=i.readVarint():e==2?r8(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function r8(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],u=t._values[e.readVarint()];t.properties[a]=u}}ff.types=["Unknown","Point","LineString","Polygon"];ff.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,u=0,f=0,d=[],l;e.pos<t;){if(a<=0){var w=e.readVarint();i=w&7,a=w>>3}if(a--,i===1||i===2)u+=e.readSVarint(),f+=e.readSVarint(),i===1&&(l&&d.push(l),l=[]),l.push(new e8(u,f));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&d.push(l),d};ff.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,u=0,f=0,d=1/0,l=-1/0,w=1/0,E=-1/0;e.pos<t;){if(a<=0){var I=e.readVarint();i=I&7,a=I>>3}if(a--,i===1||i===2)u+=e.readSVarint(),f+=e.readSVarint(),u<d&&(d=u),u>l&&(l=u),f<w&&(w=f),f>E&&(E=f);else if(i!==7)throw new Error("unknown command "+i)}return[d,w,l,E]};ff.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),u=this.extent*e,f=this.extent*t,d=this.loadGeometry(),l=ff.types[this.type],w,E;function I(R){for(var L=0;L<R.length;L++){var j=R[L],le=180-(j.y+f)*360/a;R[L]=[(j.x+u)*360/a-180,360/Math.PI*Math.atan(Math.exp(le*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(w=0;w<d.length;w++)b[w]=d[w][0];d=b,I(d);break;case 2:for(w=0;w<d.length;w++)I(d[w]);break;case 3:for(d=n8(d),w=0;w<d.length;w++)for(E=0;E<d[w].length;E++)I(d[w][E]);break}d.length===1?d=d[0]:l="Multi"+l;var T={type:"Feature",geometry:{type:l,coordinates:d},properties:this.properties};return"id"in this&&(T.id=this.id),T};function n8(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,u,f=0;f<t;f++){var d=i8(e[f]);d!==0&&(u===void 0&&(u=d<0),u===d<0?(a&&i.push(a),a=[e[f]]):a.push(e[f]))}return a&&i.push(a),i}function i8(e){for(var t=0,i=0,a=e.length,u=a-1,f,d;i<a;u=i++)f=e[i],d=e[u],t+=(d.x-f.x)*(f.y+d.y);return t}var o8=N3,$3=U3;function U3(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(a8,this,t),this.length=this._features.length}function a8(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(s8(i))}function s8(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}U3.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new o8(this._pbf,t,this.extent,this._keys,this._values)};var l8=$3,u8=c8;function c8(e,t){this.layers=e.readFields(h8,{},t)}function h8(e,t,i){if(e===3){var a=new l8(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}W0.VectorTile=u8;W0.VectorTileFeature=N3;W0.VectorTileLayer=$3;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=tD,i=yD,a=vD,u=KN,f=D3,d=W0;function l(Z){return Z&&typeof Z=="object"&&"default"in Z?Z:{default:Z}}var w=l(a),E=l(u),I=l(f),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof $a<"u"?$a:typeof self<"u"?self:{};function T(Z){var W={exports:{}};return Z(W,W.exports),W.exports}var R=T(function(Z,W){(function(q,V){Z.exports=V(E.default)})(b,function(ae){return function(q){var V={};function P(z){if(V[z])return V[z].exports;var B=V[z]={i:z,l:!1,exports:{}};return q[z].call(B.exports,B,B.exports,P),B.l=!0,B.exports}return P.m=q,P.c=V,P.d=function(z,B,ee){P.o(z,B)||Object.defineProperty(z,B,{enumerable:!0,get:ee})},P.r=function(z){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})},P.t=function(z,B){if(B&1&&(z=P(z)),B&8||B&4&&typeof z=="object"&&z&&z.__esModule)return z;var ee=Object.create(null);if(P.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:z}),B&2&&typeof z!="string")for(var X in z)P.d(ee,X,(function(ye){return z[ye]}).bind(null,X));return ee},P.n=function(z){var B=z&&z.__esModule?function(){return z.default}:function(){return z};return P.d(B,"a",B),B},P.o=function(z,B){return Object.prototype.hasOwnProperty.call(z,B)},P.p="",P(P.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(q,V,P){P.r(V),P.d(V,"CacheControl",function(){return Pe}),P.d(V,"parse",function(){return $e}),P.d(V,"format",function(){return Ce}),P("./node_modules/core-js/modules/es6.array.from.js"),P("./node_modules/core-js/modules/es6.function.name.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/core-js/modules/web.dom.iterable.js"),P("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.regexp.split.js"),P("./node_modules/core-js/modules/es6.number.is-finite.js");function z(Fe,He){return ge(Fe)||ye(Fe,He)||ee(Fe,He)||B()}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(Fe,He){if(Fe){if(typeof Fe=="string")return X(Fe,He);var We=Object.prototype.toString.call(Fe).slice(8,-1);if(We==="Object"&&Fe.constructor&&(We=Fe.constructor.name),We==="Map"||We==="Set")return Array.from(Fe);if(We==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(We))return X(Fe,He)}}function X(Fe,He){(He==null||He>Fe.length)&&(He=Fe.length);for(var We=0,it=new Array(He);We<He;We++)it[We]=Fe[We];return it}function ye(Fe,He){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Fe)))){var We=[],it=!0,ct=!1,vt=void 0;try{for(var kt=Fe[Symbol.iterator](),pt;!(it=(pt=kt.next()).done)&&(We.push(pt.value),!(He&&We.length===He));it=!0);}catch(xt){ct=!0,vt=xt}finally{try{!it&&kt.return!=null&&kt.return()}finally{if(ct)throw vt}}return We}}function ge(Fe){if(Array.isArray(Fe))return Fe}function fe(Fe,He){if(!(Fe instanceof He))throw new TypeError("Cannot call a class as a function")}function ie(Fe,He){for(var We=0;We<He.length;We++){var it=He[We];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Fe,it.key,it)}}function he(Fe,He,We){return He&&ie(Fe.prototype,He),We&&ie(Fe,We),Fe}var Y=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,re={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function de(Fe){return Fe===null}function be(Fe){if(!Fe)return null;var He=parseInt(Fe,10);return!Number.isFinite(He)||He<0?null:He}var Pe=function(){function Fe(){fe(this,Fe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return he(Fe,[{key:"parse",value:function(We){if(!We||We.length===0)return this;var it={},ct=We.match(Y)||[];return Array.prototype.forEach.call(ct,function(vt){var kt=vt.split("=",2),pt=z(kt,1),xt=pt[0],Wt=null;kt.length>1&&(Wt=kt[1].trim()),it[xt.toLowerCase()]=Wt}),this.maxAge=be(it[re.maxAge]),this.sharedMaxAge=be(it[re.sharedMaxAge]),this.maxStale=de(it[re.maxStale]),this.maxStaleDuration=be(it[re.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=be(it[re.minFresh]),this.immutable=de(it[re.immutable]),this.mustRevalidate=de(it[re.mustRevalidate]),this.noCache=de(it[re.noCache]),this.noStore=de(it[re.noStore]),this.noTransform=de(it[re.noTransform]),this.onlyIfCached=de(it[re.onlyIfCached]),this.private=de(it[re.private]),this.proxyRevalidate=de(it[re.proxyRevalidate]),this.public=de(it[re.public]),this}},{key:"format",value:function(){var We=[];return this.maxAge&&We.push("".concat(re.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&We.push("".concat(re.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?We.push("".concat(re.maxStale,"=").concat(this.maxStaleDuration)):We.push(re.maxStale)),this.minFresh&&We.push("".concat(re.minFresh,"=").concat(this.minFresh)),this.immutable&&We.push(re.immutable),this.mustRevalidate&&We.push(re.mustRevalidate),this.noCache&&We.push(re.noCache),this.noStore&&We.push(re.noStore),this.noTransform&&We.push(re.noTransform),this.onlyIfCached&&We.push(re.onlyIfCached),this.private&&We.push(re.private),this.proxyRevalidate&&We.push(re.proxyRevalidate),this.public&&We.push(re.public),We.join(", ")}}]),Fe}();function $e(Fe){var He=new Pe;return He.parse(Fe)}function Ce(Fe){return Fe instanceof Pe?Fe.format():Pe.prototype.format.call(Fe)}V.default={CacheControl:Pe,parse:$e,format:Ce}},"./node_modules/charenc/charenc.js":function(q,V){var P={utf8:{stringToBytes:function(z){return P.bin.stringToBytes(unescape(encodeURIComponent(z)))},bytesToString:function(z){return decodeURIComponent(escape(P.bin.bytesToString(z)))}},bin:{stringToBytes:function(z){for(var B=[],ee=0;ee<z.length;ee++)B.push(z.charCodeAt(ee)&255);return B},bytesToString:function(z){for(var B=[],ee=0;ee<z.length;ee++)B.push(String.fromCharCode(z[ee]));return B.join("")}}};q.exports=P},"./node_modules/core-js/modules/_a-function.js":function(q,V){q.exports=function(P){if(typeof P!="function")throw TypeError(P+" is not a function!");return P}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_wks.js")("unscopables"),B=Array.prototype;B[z]==null&&P("./node_modules/core-js/modules/_hide.js")(B,z,{}),q.exports=function(ee){B[z][ee]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_string-at.js")(!0);q.exports=function(B,ee,X){return ee+(X?z(B,ee).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_is-object.js");q.exports=function(B){if(!z(B))throw TypeError(B+" is not an object!");return B}},"./node_modules/core-js/modules/_array-includes.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_to-iobject.js"),B=P("./node_modules/core-js/modules/_to-length.js"),ee=P("./node_modules/core-js/modules/_to-absolute-index.js");q.exports=function(X){return function(ye,ge,fe){var ie=z(ye),he=B(ie.length),Y=ee(fe,he),re;if(X&&ge!=ge){for(;he>Y;)if(re=ie[Y++],re!=re)return!0}else for(;he>Y;Y++)if((X||Y in ie)&&ie[Y]===ge)return X||Y||0;return!X&&-1}}},"./node_modules/core-js/modules/_bind.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_a-function.js"),B=P("./node_modules/core-js/modules/_is-object.js"),ee=P("./node_modules/core-js/modules/_invoke.js"),X=[].slice,ye={},ge=function(fe,ie,he){if(!(ie in ye)){for(var Y=[],re=0;re<ie;re++)Y[re]="a["+re+"]";ye[ie]=Function("F,a","return new F("+Y.join(",")+")")}return ye[ie](fe,he)};q.exports=Function.bind||function(ie){var he=z(this),Y=X.call(arguments,1),re=function(){var de=Y.concat(X.call(arguments));return this instanceof re?ge(he,de.length,de):ee(he,de,ie)};return B(he.prototype)&&(re.prototype=he.prototype),re}},"./node_modules/core-js/modules/_classof.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_cof.js"),B=P("./node_modules/core-js/modules/_wks.js")("toStringTag"),ee=z(function(){return arguments}())=="Arguments",X=function(ye,ge){try{return ye[ge]}catch{}};q.exports=function(ye){var ge,fe,ie;return ye===void 0?"Undefined":ye===null?"Null":typeof(fe=X(ge=Object(ye),B))=="string"?fe:ee?z(ge):(ie=z(ge))=="Object"&&typeof ge.callee=="function"?"Arguments":ie}},"./node_modules/core-js/modules/_cof.js":function(q,V){var P={}.toString;q.exports=function(z){return P.call(z).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(q,V){var P=q.exports={version:"2.6.12"};typeof __e=="number"&&(__e=P)},"./node_modules/core-js/modules/_create-property.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_property-desc.js");q.exports=function(ee,X,ye){X in ee?z.f(ee,X,B(0,ye)):ee[X]=ye}},"./node_modules/core-js/modules/_ctx.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_a-function.js");q.exports=function(B,ee,X){if(z(B),ee===void 0)return B;switch(X){case 1:return function(ye){return B.call(ee,ye)};case 2:return function(ye,ge){return B.call(ee,ye,ge)};case 3:return function(ye,ge,fe){return B.call(ee,ye,ge,fe)}}return function(){return B.apply(ee,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(q,V){q.exports=function(P){if(P==null)throw TypeError("Can't call method on  "+P);return P}},"./node_modules/core-js/modules/_descriptors.js":function(q,V,P){q.exports=!P("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_is-object.js"),B=P("./node_modules/core-js/modules/_global.js").document,ee=z(B)&&z(B.createElement);q.exports=function(X){return ee?B.createElement(X):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(q,V){q.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-keys.js"),B=P("./node_modules/core-js/modules/_object-gops.js"),ee=P("./node_modules/core-js/modules/_object-pie.js");q.exports=function(X){var ye=z(X),ge=B.f;if(ge)for(var fe=ge(X),ie=ee.f,he=0,Y;fe.length>he;)ie.call(X,Y=fe[he++])&&ye.push(Y);return ye}},"./node_modules/core-js/modules/_export.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_core.js"),ee=P("./node_modules/core-js/modules/_hide.js"),X=P("./node_modules/core-js/modules/_redefine.js"),ye=P("./node_modules/core-js/modules/_ctx.js"),ge="prototype",fe=function(ie,he,Y){var re=ie&fe.F,de=ie&fe.G,be=ie&fe.S,Pe=ie&fe.P,$e=ie&fe.B,Ce=de?z:be?z[he]||(z[he]={}):(z[he]||{})[ge],Fe=de?B:B[he]||(B[he]={}),He=Fe[ge]||(Fe[ge]={}),We,it,ct,vt;de&&(Y=he);for(We in Y)it=!re&&Ce&&Ce[We]!==void 0,ct=(it?Ce:Y)[We],vt=$e&&it?ye(ct,z):Pe&&typeof ct=="function"?ye(Function.call,ct):ct,Ce&&X(Ce,We,ct,ie&fe.U),Fe[We]!=ct&&ee(Fe,We,vt),Pe&&He[We]!=ct&&(He[We]=ct)};z.core=B,fe.F=1,fe.G=2,fe.S=4,fe.P=8,fe.B=16,fe.W=32,fe.U=64,fe.R=128,q.exports=fe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_wks.js")("match");q.exports=function(B){var ee=/./;try{"/./"[B](ee)}catch{try{return ee[z]=!1,!"/./"[B](ee)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(q,V){q.exports=function(P){try{return!!P()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(q,V,P){P("./node_modules/core-js/modules/es6.regexp.exec.js");var z=P("./node_modules/core-js/modules/_redefine.js"),B=P("./node_modules/core-js/modules/_hide.js"),ee=P("./node_modules/core-js/modules/_fails.js"),X=P("./node_modules/core-js/modules/_defined.js"),ye=P("./node_modules/core-js/modules/_wks.js"),ge=P("./node_modules/core-js/modules/_regexp-exec.js"),fe=ye("species"),ie=!ee(function(){var Y=/./;return Y.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(Y,"$<a>")!=="7"}),he=function(){var Y=/(?:)/,re=Y.exec;Y.exec=function(){return re.apply(this,arguments)};var de="ab".split(Y);return de.length===2&&de[0]==="a"&&de[1]==="b"}();q.exports=function(Y,re,de){var be=ye(Y),Pe=!ee(function(){var it={};return it[be]=function(){return 7},""[Y](it)!=7}),$e=Pe?!ee(function(){var it=!1,ct=/a/;return ct.exec=function(){return it=!0,null},Y==="split"&&(ct.constructor={},ct.constructor[fe]=function(){return ct}),ct[be](""),!it}):void 0;if(!Pe||!$e||Y==="replace"&&!ie||Y==="split"&&!he){var Ce=/./[be],Fe=de(X,be,""[Y],function(ct,vt,kt,pt,xt){return vt.exec===ge?Pe&&!xt?{done:!0,value:Ce.call(vt,kt,pt)}:{done:!0,value:ct.call(kt,vt,pt)}:{done:!1}}),He=Fe[0],We=Fe[1];z(String.prototype,Y,He),B(RegExp.prototype,be,re==2?function(it,ct){return We.call(it,this,ct)}:function(it){return We.call(it,this)})}}},"./node_modules/core-js/modules/_flags.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_an-object.js");q.exports=function(){var B=z(this),ee="";return B.global&&(ee+="g"),B.ignoreCase&&(ee+="i"),B.multiline&&(ee+="m"),B.unicode&&(ee+="u"),B.sticky&&(ee+="y"),ee}},"./node_modules/core-js/modules/_function-to-string.js":function(q,V,P){q.exports=P("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(q,V){var P=q.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=P)},"./node_modules/core-js/modules/_has.js":function(q,V){var P={}.hasOwnProperty;q.exports=function(z,B){return P.call(z,B)}},"./node_modules/core-js/modules/_hide.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_property-desc.js");q.exports=P("./node_modules/core-js/modules/_descriptors.js")?function(ee,X,ye){return z.f(ee,X,B(1,ye))}:function(ee,X,ye){return ee[X]=ye,ee}},"./node_modules/core-js/modules/_html.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_global.js").document;q.exports=z&&z.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(q,V,P){q.exports=!P("./node_modules/core-js/modules/_descriptors.js")&&!P("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(P("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(q,V){q.exports=function(P,z,B){var ee=B===void 0;switch(z.length){case 0:return ee?P():P.call(B);case 1:return ee?P(z[0]):P.call(B,z[0]);case 2:return ee?P(z[0],z[1]):P.call(B,z[0],z[1]);case 3:return ee?P(z[0],z[1],z[2]):P.call(B,z[0],z[1],z[2]);case 4:return ee?P(z[0],z[1],z[2],z[3]):P.call(B,z[0],z[1],z[2],z[3])}return P.apply(B,z)}},"./node_modules/core-js/modules/_iobject.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_cof.js");q.exports=Object("z").propertyIsEnumerable(0)?Object:function(B){return z(B)=="String"?B.split(""):Object(B)}},"./node_modules/core-js/modules/_is-array-iter.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_iterators.js"),B=P("./node_modules/core-js/modules/_wks.js")("iterator"),ee=Array.prototype;q.exports=function(X){return X!==void 0&&(z.Array===X||ee[B]===X)}},"./node_modules/core-js/modules/_is-array.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_cof.js");q.exports=Array.isArray||function(ee){return z(ee)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(q,V){q.exports=function(P){return typeof P=="object"?P!==null:typeof P=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_is-object.js"),B=P("./node_modules/core-js/modules/_cof.js"),ee=P("./node_modules/core-js/modules/_wks.js")("match");q.exports=function(X){var ye;return z(X)&&((ye=X[ee])!==void 0?!!ye:B(X)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_an-object.js");q.exports=function(B,ee,X,ye){try{return ye?ee(z(X)[0],X[1]):ee(X)}catch(fe){var ge=B.return;throw ge!==void 0&&z(ge.call(B)),fe}}},"./node_modules/core-js/modules/_iter-create.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-create.js"),B=P("./node_modules/core-js/modules/_property-desc.js"),ee=P("./node_modules/core-js/modules/_set-to-string-tag.js"),X={};P("./node_modules/core-js/modules/_hide.js")(X,P("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),q.exports=function(ye,ge,fe){ye.prototype=z(X,{next:B(1,fe)}),ee(ye,ge+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_library.js"),B=P("./node_modules/core-js/modules/_export.js"),ee=P("./node_modules/core-js/modules/_redefine.js"),X=P("./node_modules/core-js/modules/_hide.js"),ye=P("./node_modules/core-js/modules/_iterators.js"),ge=P("./node_modules/core-js/modules/_iter-create.js"),fe=P("./node_modules/core-js/modules/_set-to-string-tag.js"),ie=P("./node_modules/core-js/modules/_object-gpo.js"),he=P("./node_modules/core-js/modules/_wks.js")("iterator"),Y=!([].keys&&"next"in[].keys()),re="@@iterator",de="keys",be="values",Pe=function(){return this};q.exports=function($e,Ce,Fe,He,We,it,ct){ge(Fe,Ce,He);var vt=function(N){if(!Y&&N in Wt)return Wt[N];switch(N){case de:return function(){return new Fe(this,N)};case be:return function(){return new Fe(this,N)}}return function(){return new Fe(this,N)}},kt=Ce+" Iterator",pt=We==be,xt=!1,Wt=$e.prototype,Ht=Wt[he]||Wt[re]||We&&Wt[We],lr=Ht||vt(We),et=We?pt?vt("entries"):lr:void 0,_r=Ce=="Array"&&Wt.entries||Ht,ur,Vt,Se;if(_r&&(Se=ie(_r.call(new $e)),Se!==Object.prototype&&Se.next&&(fe(Se,kt,!0),!z&&typeof Se[he]!="function"&&X(Se,he,Pe))),pt&&Ht&&Ht.name!==be&&(xt=!0,lr=function(){return Ht.call(this)}),(!z||ct)&&(Y||xt||!Wt[he])&&X(Wt,he,lr),ye[Ce]=lr,ye[kt]=Pe,We)if(ur={values:pt?lr:vt(be),keys:it?lr:vt(de),entries:et},ct)for(Vt in ur)Vt in Wt||ee(Wt,Vt,ur[Vt]);else B(B.P+B.F*(Y||xt),Ce,ur);return ur}},"./node_modules/core-js/modules/_iter-detect.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_wks.js")("iterator"),B=!1;try{var ee=[7][z]();ee.return=function(){B=!0},Array.from(ee,function(){throw 2})}catch{}q.exports=function(X,ye){if(!ye&&!B)return!1;var ge=!1;try{var fe=[7],ie=fe[z]();ie.next=function(){return{done:ge=!0}},fe[z]=function(){return ie},X(fe)}catch{}return ge}},"./node_modules/core-js/modules/_iter-step.js":function(q,V){q.exports=function(P,z){return{value:z,done:!!P}}},"./node_modules/core-js/modules/_iterators.js":function(q,V){q.exports={}},"./node_modules/core-js/modules/_library.js":function(q,V){q.exports=!1},"./node_modules/core-js/modules/_meta.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_uid.js")("meta"),B=P("./node_modules/core-js/modules/_is-object.js"),ee=P("./node_modules/core-js/modules/_has.js"),X=P("./node_modules/core-js/modules/_object-dp.js").f,ye=0,ge=Object.isExtensible||function(){return!0},fe=!P("./node_modules/core-js/modules/_fails.js")(function(){return ge(Object.preventExtensions({}))}),ie=function(be){X(be,z,{value:{i:"O"+ ++ye,w:{}}})},he=function(be,Pe){if(!B(be))return typeof be=="symbol"?be:(typeof be=="string"?"S":"P")+be;if(!ee(be,z)){if(!ge(be))return"F";if(!Pe)return"E";ie(be)}return be[z].i},Y=function(be,Pe){if(!ee(be,z)){if(!ge(be))return!0;if(!Pe)return!1;ie(be)}return be[z].w},re=function(be){return fe&&de.NEED&&ge(be)&&!ee(be,z)&&ie(be),be},de=q.exports={KEY:z,NEED:!1,fastKey:he,getWeak:Y,onFreeze:re}},"./node_modules/core-js/modules/_object-create.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_object-dps.js"),ee=P("./node_modules/core-js/modules/_enum-bug-keys.js"),X=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ye=function(){},ge="prototype",fe=function(){var ie=P("./node_modules/core-js/modules/_dom-create.js")("iframe"),he=ee.length,Y="<",re=">",de;for(ie.style.display="none",P("./node_modules/core-js/modules/_html.js").appendChild(ie),ie.src="javascript:",de=ie.contentWindow.document,de.open(),de.write(Y+"script"+re+"document.F=Object"+Y+"/script"+re),de.close(),fe=de.F;he--;)delete fe[ge][ee[he]];return fe()};q.exports=Object.create||function(he,Y){var re;return he!==null?(ye[ge]=z(he),re=new ye,ye[ge]=null,re[X]=he):re=fe(),Y===void 0?re:B(re,Y)}},"./node_modules/core-js/modules/_object-dp.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_ie8-dom-define.js"),ee=P("./node_modules/core-js/modules/_to-primitive.js"),X=Object.defineProperty;V.f=P("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ge,fe,ie){if(z(ge),fe=ee(fe,!0),z(ie),B)try{return X(ge,fe,ie)}catch{}if("get"in ie||"set"in ie)throw TypeError("Accessors not supported!");return"value"in ie&&(ge[fe]=ie.value),ge}},"./node_modules/core-js/modules/_object-dps.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_an-object.js"),ee=P("./node_modules/core-js/modules/_object-keys.js");q.exports=P("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ye,ge){B(ye);for(var fe=ee(ge),ie=fe.length,he=0,Y;ie>he;)z.f(ye,Y=fe[he++],ge[Y]);return ye}},"./node_modules/core-js/modules/_object-gopd.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-pie.js"),B=P("./node_modules/core-js/modules/_property-desc.js"),ee=P("./node_modules/core-js/modules/_to-iobject.js"),X=P("./node_modules/core-js/modules/_to-primitive.js"),ye=P("./node_modules/core-js/modules/_has.js"),ge=P("./node_modules/core-js/modules/_ie8-dom-define.js"),fe=Object.getOwnPropertyDescriptor;V.f=P("./node_modules/core-js/modules/_descriptors.js")?fe:function(he,Y){if(he=ee(he),Y=X(Y,!0),ge)try{return fe(he,Y)}catch{}if(ye(he,Y))return B(!z.f.call(he,Y),he[Y])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_to-iobject.js"),B=P("./node_modules/core-js/modules/_object-gopn.js").f,ee={}.toString,X=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ye=function(ge){try{return B(ge)}catch{return X.slice()}};q.exports.f=function(fe){return X&&ee.call(fe)=="[object Window]"?ye(fe):B(z(fe))}},"./node_modules/core-js/modules/_object-gopn.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-keys-internal.js"),B=P("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");V.f=Object.getOwnPropertyNames||function(X){return z(X,B)}},"./node_modules/core-js/modules/_object-gops.js":function(q,V){V.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_has.js"),B=P("./node_modules/core-js/modules/_to-object.js"),ee=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),X=Object.prototype;q.exports=Object.getPrototypeOf||function(ye){return ye=B(ye),z(ye,ee)?ye[ee]:typeof ye.constructor=="function"&&ye instanceof ye.constructor?ye.constructor.prototype:ye instanceof Object?X:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_has.js"),B=P("./node_modules/core-js/modules/_to-iobject.js"),ee=P("./node_modules/core-js/modules/_array-includes.js")(!1),X=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");q.exports=function(ye,ge){var fe=B(ye),ie=0,he=[],Y;for(Y in fe)Y!=X&&z(fe,Y)&&he.push(Y);for(;ge.length>ie;)z(fe,Y=ge[ie++])&&(~ee(he,Y)||he.push(Y));return he}},"./node_modules/core-js/modules/_object-keys.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-keys-internal.js"),B=P("./node_modules/core-js/modules/_enum-bug-keys.js");q.exports=Object.keys||function(X){return z(X,B)}},"./node_modules/core-js/modules/_object-pie.js":function(q,V){V.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-gopn.js"),B=P("./node_modules/core-js/modules/_object-gops.js"),ee=P("./node_modules/core-js/modules/_an-object.js"),X=P("./node_modules/core-js/modules/_global.js").Reflect;q.exports=X&&X.ownKeys||function(ge){var fe=z.f(ee(ge)),ie=B.f;return ie?fe.concat(ie(ge)):fe}},"./node_modules/core-js/modules/_property-desc.js":function(q,V){q.exports=function(P,z){return{enumerable:!(P&1),configurable:!(P&2),writable:!(P&4),value:z}}},"./node_modules/core-js/modules/_redefine.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_hide.js"),ee=P("./node_modules/core-js/modules/_has.js"),X=P("./node_modules/core-js/modules/_uid.js")("src"),ye=P("./node_modules/core-js/modules/_function-to-string.js"),ge="toString",fe=(""+ye).split(ge);P("./node_modules/core-js/modules/_core.js").inspectSource=function(ie){return ye.call(ie)},(q.exports=function(ie,he,Y,re){var de=typeof Y=="function";de&&(ee(Y,"name")||B(Y,"name",he)),ie[he]!==Y&&(de&&(ee(Y,X)||B(Y,X,ie[he]?""+ie[he]:fe.join(String(he)))),ie===z?ie[he]=Y:re?ie[he]?ie[he]=Y:B(ie,he,Y):(delete ie[he],B(ie,he,Y)))})(Function.prototype,ge,function(){return typeof this=="function"&&this[X]||ye.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_classof.js"),B=RegExp.prototype.exec;q.exports=function(ee,X){var ye=ee.exec;if(typeof ye=="function"){var ge=ye.call(ee,X);if(typeof ge!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ge}if(z(ee)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return B.call(ee,X)}},"./node_modules/core-js/modules/_regexp-exec.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_flags.js"),B=RegExp.prototype.exec,ee=String.prototype.replace,X=B,ye="lastIndex",ge=function(){var he=/a/,Y=/b*/g;return B.call(he,"a"),B.call(Y,"a"),he[ye]!==0||Y[ye]!==0}(),fe=/()??/.exec("")[1]!==void 0,ie=ge||fe;ie&&(X=function(Y){var re=this,de,be,Pe,$e;return fe&&(be=new RegExp("^"+re.source+"$(?!\\s)",z.call(re))),ge&&(de=re[ye]),Pe=B.call(re,Y),ge&&Pe&&(re[ye]=re.global?Pe.index+Pe[0].length:de),fe&&Pe&&Pe.length>1&&ee.call(Pe[0],be,function(){for($e=1;$e<arguments.length-2;$e++)arguments[$e]===void 0&&(Pe[$e]=void 0)}),Pe}),q.exports=X},"./node_modules/core-js/modules/_set-to-string-tag.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-dp.js").f,B=P("./node_modules/core-js/modules/_has.js"),ee=P("./node_modules/core-js/modules/_wks.js")("toStringTag");q.exports=function(X,ye,ge){X&&!B(X=ge?X:X.prototype,ee)&&z(X,ee,{configurable:!0,value:ye})}},"./node_modules/core-js/modules/_shared-key.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_shared.js")("keys"),B=P("./node_modules/core-js/modules/_uid.js");q.exports=function(ee){return z[ee]||(z[ee]=B(ee))}},"./node_modules/core-js/modules/_shared.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_core.js"),B=P("./node_modules/core-js/modules/_global.js"),ee="__core-js_shared__",X=B[ee]||(B[ee]={});(q.exports=function(ye,ge){return X[ye]||(X[ye]=ge!==void 0?ge:{})})("versions",[]).push({version:z.version,mode:P("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_a-function.js"),ee=P("./node_modules/core-js/modules/_wks.js")("species");q.exports=function(X,ye){var ge=z(X).constructor,fe;return ge===void 0||(fe=z(ge)[ee])==null?ye:B(fe)}},"./node_modules/core-js/modules/_string-at.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),B=P("./node_modules/core-js/modules/_defined.js");q.exports=function(ee){return function(X,ye){var ge=String(B(X)),fe=z(ye),ie=ge.length,he,Y;return fe<0||fe>=ie?ee?"":void 0:(he=ge.charCodeAt(fe),he<55296||he>56319||fe+1===ie||(Y=ge.charCodeAt(fe+1))<56320||Y>57343?ee?ge.charAt(fe):he:ee?ge.slice(fe,fe+2):(he-55296<<10)+(Y-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_is-regexp.js"),B=P("./node_modules/core-js/modules/_defined.js");q.exports=function(ee,X,ye){if(z(X))throw TypeError("String#"+ye+" doesn't accept regex!");return String(B(ee))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),B=Math.max,ee=Math.min;q.exports=function(X,ye){return X=z(X),X<0?B(X+ye,0):ee(X,ye)}},"./node_modules/core-js/modules/_to-integer.js":function(q,V){var P=Math.ceil,z=Math.floor;q.exports=function(B){return isNaN(B=+B)?0:(B>0?z:P)(B)}},"./node_modules/core-js/modules/_to-iobject.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_iobject.js"),B=P("./node_modules/core-js/modules/_defined.js");q.exports=function(ee){return z(B(ee))}},"./node_modules/core-js/modules/_to-length.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),B=Math.min;q.exports=function(ee){return ee>0?B(z(ee),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_defined.js");q.exports=function(B){return Object(z(B))}},"./node_modules/core-js/modules/_to-primitive.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_is-object.js");q.exports=function(B,ee){if(!z(B))return B;var X,ye;if(ee&&typeof(X=B.toString)=="function"&&!z(ye=X.call(B))||typeof(X=B.valueOf)=="function"&&!z(ye=X.call(B))||!ee&&typeof(X=B.toString)=="function"&&!z(ye=X.call(B)))return ye;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(q,V){var P=0,z=Math.random();q.exports=function(B){return"Symbol(".concat(B===void 0?"":B,")_",(++P+z).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_core.js"),ee=P("./node_modules/core-js/modules/_library.js"),X=P("./node_modules/core-js/modules/_wks-ext.js"),ye=P("./node_modules/core-js/modules/_object-dp.js").f;q.exports=function(ge){var fe=B.Symbol||(B.Symbol=ee?{}:z.Symbol||{});ge.charAt(0)!="_"&&!(ge in fe)&&ye(fe,ge,{value:X.f(ge)})}},"./node_modules/core-js/modules/_wks-ext.js":function(q,V,P){V.f=P("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_shared.js")("wks"),B=P("./node_modules/core-js/modules/_uid.js"),ee=P("./node_modules/core-js/modules/_global.js").Symbol,X=typeof ee=="function",ye=q.exports=function(ge){return z[ge]||(z[ge]=X&&ee[ge]||(X?ee:B)("Symbol."+ge))};ye.store=z},"./node_modules/core-js/modules/core.get-iterator-method.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_classof.js"),B=P("./node_modules/core-js/modules/_wks.js")("iterator"),ee=P("./node_modules/core-js/modules/_iterators.js");q.exports=P("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(X){if(X!=null)return X[B]||X["@@iterator"]||ee[z(X)]}},"./node_modules/core-js/modules/es6.array.from.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_ctx.js"),B=P("./node_modules/core-js/modules/_export.js"),ee=P("./node_modules/core-js/modules/_to-object.js"),X=P("./node_modules/core-js/modules/_iter-call.js"),ye=P("./node_modules/core-js/modules/_is-array-iter.js"),ge=P("./node_modules/core-js/modules/_to-length.js"),fe=P("./node_modules/core-js/modules/_create-property.js"),ie=P("./node_modules/core-js/modules/core.get-iterator-method.js");B(B.S+B.F*!P("./node_modules/core-js/modules/_iter-detect.js")(function(he){Array.from(he)}),"Array",{from:function(Y){var re=ee(Y),de=typeof this=="function"?this:Array,be=arguments.length,Pe=be>1?arguments[1]:void 0,$e=Pe!==void 0,Ce=0,Fe=ie(re),He,We,it,ct;if($e&&(Pe=z(Pe,be>2?arguments[2]:void 0,2)),Fe!=null&&!(de==Array&&ye(Fe)))for(ct=Fe.call(re),We=new de;!(it=ct.next()).done;Ce++)fe(We,Ce,$e?X(ct,Pe,[it.value,Ce],!0):it.value);else for(He=ge(re.length),We=new de(He);He>Ce;Ce++)fe(We,Ce,$e?Pe(re[Ce],Ce):re[Ce]);return We.length=Ce,We}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_add-to-unscopables.js"),B=P("./node_modules/core-js/modules/_iter-step.js"),ee=P("./node_modules/core-js/modules/_iterators.js"),X=P("./node_modules/core-js/modules/_to-iobject.js");q.exports=P("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ye,ge){this._t=X(ye),this._i=0,this._k=ge},function(){var ye=this._t,ge=this._k,fe=this._i++;return!ye||fe>=ye.length?(this._t=void 0,B(1)):ge=="keys"?B(0,fe):ge=="values"?B(0,ye[fe]):B(0,[fe,ye[fe]])},"values"),ee.Arguments=ee.Array,z("keys"),z("values"),z("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_export.js");z(z.P,"Function",{bind:P("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_object-dp.js").f,B=Function.prototype,ee=/^\s*function ([^ (]*)/,X="name";X in B||P("./node_modules/core-js/modules/_descriptors.js")&&z(B,X,{configurable:!0,get:function(){try{return(""+this).match(ee)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_global.js").isFinite;z(z.S,"Number",{isFinite:function(X){return typeof X=="number"&&B(X)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_classof.js"),B={};B[P("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",B+""!="[object z]"&&P("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+z(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_regexp-exec.js");P("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:z!==/./.exec},{exec:z})},"./node_modules/core-js/modules/es6.regexp.split.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_is-regexp.js"),B=P("./node_modules/core-js/modules/_an-object.js"),ee=P("./node_modules/core-js/modules/_species-constructor.js"),X=P("./node_modules/core-js/modules/_advance-string-index.js"),ye=P("./node_modules/core-js/modules/_to-length.js"),ge=P("./node_modules/core-js/modules/_regexp-exec-abstract.js"),fe=P("./node_modules/core-js/modules/_regexp-exec.js"),ie=P("./node_modules/core-js/modules/_fails.js"),he=Math.min,Y=[].push,re="split",de="length",be="lastIndex",Pe=4294967295,$e=!ie(function(){});P("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ce,Fe,He,We){var it;return"abbc"[re](/(b)*/)[1]=="c"||"test"[re](/(?:)/,-1)[de]!=4||"ab"[re](/(?:ab)*/)[de]!=2||"."[re](/(.?)(.?)/)[de]!=4||"."[re](/()()/)[de]>1||""[re](/.?/)[de]?it=function(ct,vt){var kt=String(this);if(ct===void 0&&vt===0)return[];if(!z(ct))return He.call(kt,ct,vt);for(var pt=[],xt=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Wt=0,Ht=vt===void 0?Pe:vt>>>0,lr=new RegExp(ct.source,xt+"g"),et,_r,ur;(et=fe.call(lr,kt))&&(_r=lr[be],!(_r>Wt&&(pt.push(kt.slice(Wt,et.index)),et[de]>1&&et.index<kt[de]&&Y.apply(pt,et.slice(1)),ur=et[0][de],Wt=_r,pt[de]>=Ht)));)lr[be]===et.index&&lr[be]++;return Wt===kt[de]?(ur||!lr.test(""))&&pt.push(""):pt.push(kt.slice(Wt)),pt[de]>Ht?pt.slice(0,Ht):pt}:"0"[re](void 0,0)[de]?it=function(ct,vt){return ct===void 0&&vt===0?[]:He.call(this,ct,vt)}:it=He,[function(vt,kt){var pt=Ce(this),xt=vt==null?void 0:vt[Fe];return xt!==void 0?xt.call(vt,pt,kt):it.call(String(pt),vt,kt)},function(ct,vt){var kt=We(it,ct,this,vt,it!==He);if(kt.done)return kt.value;var pt=B(ct),xt=String(this),Wt=ee(pt,RegExp),Ht=pt.unicode,lr=(pt.ignoreCase?"i":"")+(pt.multiline?"m":"")+(pt.unicode?"u":"")+($e?"y":"g"),et=new Wt($e?pt:"^(?:"+pt.source+")",lr),_r=vt===void 0?Pe:vt>>>0;if(_r===0)return[];if(xt.length===0)return ge(et,xt)===null?[xt]:[];for(var ur=0,Vt=0,Se=[];Vt<xt.length;){et.lastIndex=$e?Vt:0;var N=ge(et,$e?xt:xt.slice(Vt)),D;if(N===null||(D=he(ye(et.lastIndex+($e?0:Vt)),xt.length))===ur)Vt=X(xt,Vt,Ht);else{if(Se.push(xt.slice(ur,Vt)),Se.length===_r)return Se;for(var _e=1;_e<=N.length-1;_e++)if(Se.push(N[_e]),Se.length===_r)return Se;Vt=ur=D}}return Se.push(xt.slice(ur)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_string-context.js"),ee="includes";z(z.P+z.F*P("./node_modules/core-js/modules/_fails-is-regexp.js")(ee),"String",{includes:function(ye){return!!~B(this,ye,ee).indexOf(ye,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_has.js"),ee=P("./node_modules/core-js/modules/_descriptors.js"),X=P("./node_modules/core-js/modules/_export.js"),ye=P("./node_modules/core-js/modules/_redefine.js"),ge=P("./node_modules/core-js/modules/_meta.js").KEY,fe=P("./node_modules/core-js/modules/_fails.js"),ie=P("./node_modules/core-js/modules/_shared.js"),he=P("./node_modules/core-js/modules/_set-to-string-tag.js"),Y=P("./node_modules/core-js/modules/_uid.js"),re=P("./node_modules/core-js/modules/_wks.js"),de=P("./node_modules/core-js/modules/_wks-ext.js"),be=P("./node_modules/core-js/modules/_wks-define.js"),Pe=P("./node_modules/core-js/modules/_enum-keys.js"),$e=P("./node_modules/core-js/modules/_is-array.js"),Ce=P("./node_modules/core-js/modules/_an-object.js"),Fe=P("./node_modules/core-js/modules/_is-object.js"),He=P("./node_modules/core-js/modules/_to-object.js"),We=P("./node_modules/core-js/modules/_to-iobject.js"),it=P("./node_modules/core-js/modules/_to-primitive.js"),ct=P("./node_modules/core-js/modules/_property-desc.js"),vt=P("./node_modules/core-js/modules/_object-create.js"),kt=P("./node_modules/core-js/modules/_object-gopn-ext.js"),pt=P("./node_modules/core-js/modules/_object-gopd.js"),xt=P("./node_modules/core-js/modules/_object-gops.js"),Wt=P("./node_modules/core-js/modules/_object-dp.js"),Ht=P("./node_modules/core-js/modules/_object-keys.js"),lr=pt.f,et=Wt.f,_r=kt.f,ur=z.Symbol,Vt=z.JSON,Se=Vt&&Vt.stringify,N="prototype",D=re("_hidden"),_e=re("toPrimitive"),Xe={}.propertyIsEnumerable,tt=ie("symbol-registry"),ht=ie("symbols"),ue=ie("op-symbols"),M=Object[N],U=typeof ur=="function"&&!!xt.f,Ee=z.QObject,Ve=!Ee||!Ee[N]||!Ee[N].findChild,nt=ee&&fe(function(){return vt(et({},"a",{get:function(){return et(this,"a",{value:7}).a}})).a!=7})?function(Ie,Me,Be){var Ke=lr(M,Me);Ke&&delete M[Me],et(Ie,Me,Be),Ke&&Ie!==M&&et(M,Me,Ke)}:et,Ge=function(Ie){var Me=ht[Ie]=vt(ur[N]);return Me._k=Ie,Me},Et=U&&typeof ur.iterator=="symbol"?function(Ie){return typeof Ie=="symbol"}:function(Ie){return Ie instanceof ur},It=function(Me,Be,Ke){return Me===M&&It(ue,Be,Ke),Ce(Me),Be=it(Be,!0),Ce(Ke),B(ht,Be)?(Ke.enumerable?(B(Me,D)&&Me[D][Be]&&(Me[D][Be]=!1),Ke=vt(Ke,{enumerable:ct(0,!1)})):(B(Me,D)||et(Me,D,ct(1,{})),Me[D][Be]=!0),nt(Me,Be,Ke)):et(Me,Be,Ke)},yr=function(Me,Be){Ce(Me);for(var Ke=Pe(Be=We(Be)),Le=0,at=Ke.length,ft;at>Le;)It(Me,ft=Ke[Le++],Be[ft]);return Me},Sr=function(Me,Be){return Be===void 0?vt(Me):yr(vt(Me),Be)},Rt=function(Me){var Be=Xe.call(this,Me=it(Me,!0));return this===M&&B(ht,Me)&&!B(ue,Me)?!1:Be||!B(this,Me)||!B(ht,Me)||B(this,D)&&this[D][Me]?Be:!0},jn=function(Me,Be){if(Me=We(Me),Be=it(Be,!0),!(Me===M&&B(ht,Be)&&!B(ue,Be))){var Ke=lr(Me,Be);return Ke&&B(ht,Be)&&!(B(Me,D)&&Me[D][Be])&&(Ke.enumerable=!0),Ke}},oi=function(Me){for(var Be=_r(We(Me)),Ke=[],Le=0,at;Be.length>Le;)!B(ht,at=Be[Le++])&&at!=D&&at!=ge&&Ke.push(at);return Ke},ji=function(Me){for(var Be=Me===M,Ke=_r(Be?ue:We(Me)),Le=[],at=0,ft;Ke.length>at;)B(ht,ft=Ke[at++])&&(!Be||B(M,ft))&&Le.push(ht[ft]);return Le};U||(ur=function(){if(this instanceof ur)throw TypeError("Symbol is not a constructor!");var Me=Y(arguments.length>0?arguments[0]:void 0),Be=function(Ke){this===M&&Be.call(ue,Ke),B(this,D)&&B(this[D],Me)&&(this[D][Me]=!1),nt(this,Me,ct(1,Ke))};return ee&&Ve&&nt(M,Me,{configurable:!0,set:Be}),Ge(Me)},ye(ur[N],"toString",function(){return this._k}),pt.f=jn,Wt.f=It,P("./node_modules/core-js/modules/_object-gopn.js").f=kt.f=oi,P("./node_modules/core-js/modules/_object-pie.js").f=Rt,xt.f=ji,ee&&!P("./node_modules/core-js/modules/_library.js")&&ye(M,"propertyIsEnumerable",Rt,!0),de.f=function(Ie){return Ge(re(Ie))}),X(X.G+X.W+X.F*!U,{Symbol:ur});for(var Wn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Oe=0;Wn.length>Oe;)re(Wn[Oe++]);for(var se=Ht(re.store),oe=0;se.length>oe;)be(se[oe++]);X(X.S+X.F*!U,"Symbol",{for:function(Ie){return B(tt,Ie+="")?tt[Ie]:tt[Ie]=ur(Ie)},keyFor:function(Me){if(!Et(Me))throw TypeError(Me+" is not a symbol!");for(var Be in tt)if(tt[Be]===Me)return Be},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),X(X.S+X.F*!U,"Object",{create:Sr,defineProperty:It,defineProperties:yr,getOwnPropertyDescriptor:jn,getOwnPropertyNames:oi,getOwnPropertySymbols:ji});var xe=fe(function(){xt.f(1)});X(X.S+X.F*xe,"Object",{getOwnPropertySymbols:function(Me){return xt.f(He(Me))}}),Vt&&X(X.S+X.F*(!U||fe(function(){var Ie=ur();return Se([Ie])!="[null]"||Se({a:Ie})!="{}"||Se(Object(Ie))!="{}"})),"JSON",{stringify:function(Me){for(var Be=[Me],Ke=1,Le,at;arguments.length>Ke;)Be.push(arguments[Ke++]);if(at=Le=Be[1],!(!Fe(Le)&&Me===void 0||Et(Me)))return $e(Le)||(Le=function(ft,ot){if(typeof at=="function"&&(ot=at.call(this,ft,ot)),!Et(ot))return ot}),Be[1]=Le,Se.apply(Vt,Be)}}),ur[N][_e]||P("./node_modules/core-js/modules/_hide.js")(ur[N],_e,ur[N].valueOf),he(ur,"Symbol"),he(Math,"Math",!0),he(z.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_array-includes.js")(!0);z(z.P,"Array",{includes:function(X){return B(this,X,arguments.length>1?arguments[1]:void 0)}}),P("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(q,V,P){var z=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_own-keys.js"),ee=P("./node_modules/core-js/modules/_to-iobject.js"),X=P("./node_modules/core-js/modules/_object-gopd.js"),ye=P("./node_modules/core-js/modules/_create-property.js");z(z.S,"Object",{getOwnPropertyDescriptors:function(fe){for(var ie=ee(fe),he=X.f,Y=B(ie),re={},de=0,be,Pe;Y.length>de;)Pe=he(ie,be=Y[de++]),Pe!==void 0&&ye(re,be,Pe);return re}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(q,V,P){P("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(q,V,P){for(var z=P("./node_modules/core-js/modules/es6.array.iterator.js"),B=P("./node_modules/core-js/modules/_object-keys.js"),ee=P("./node_modules/core-js/modules/_redefine.js"),X=P("./node_modules/core-js/modules/_global.js"),ye=P("./node_modules/core-js/modules/_hide.js"),ge=P("./node_modules/core-js/modules/_iterators.js"),fe=P("./node_modules/core-js/modules/_wks.js"),ie=fe("iterator"),he=fe("toStringTag"),Y=ge.Array,re={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},de=B(re),be=0;be<de.length;be++){var Pe=de[be],$e=re[Pe],Ce=X[Pe],Fe=Ce&&Ce.prototype,He;if(Fe&&(Fe[ie]||ye(Fe,ie,Y),Fe[he]||ye(Fe,he,Pe),ge[Pe]=Y,$e))for(He in z)Fe[He]||ee(Fe,He,z[He],!0)}},"./node_modules/crypt/crypt.js":function(q,V){(function(){var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z={rotl:function(B,ee){return B<<ee|B>>>32-ee},rotr:function(B,ee){return B<<32-ee|B>>>ee},endian:function(B){if(B.constructor==Number)return z.rotl(B,8)&16711935|z.rotl(B,24)&4278255360;for(var ee=0;ee<B.length;ee++)B[ee]=z.endian(B[ee]);return B},randomBytes:function(B){for(var ee=[];B>0;B--)ee.push(Math.floor(Math.random()*256));return ee},bytesToWords:function(B){for(var ee=[],X=0,ye=0;X<B.length;X++,ye+=8)ee[ye>>>5]|=B[X]<<24-ye%32;return ee},wordsToBytes:function(B){for(var ee=[],X=0;X<B.length*32;X+=8)ee.push(B[X>>>5]>>>24-X%32&255);return ee},bytesToHex:function(B){for(var ee=[],X=0;X<B.length;X++)ee.push((B[X]>>>4).toString(16)),ee.push((B[X]&15).toString(16));return ee.join("")},hexToBytes:function(B){for(var ee=[],X=0;X<B.length;X+=2)ee.push(parseInt(B.substr(X,2),16));return ee},bytesToBase64:function(B){for(var ee=[],X=0;X<B.length;X+=3)for(var ye=B[X]<<16|B[X+1]<<8|B[X+2],ge=0;ge<4;ge++)X*8+ge*6<=B.length*8?ee.push(P.charAt(ye>>>6*(3-ge)&63)):ee.push("=");return ee.join("")},base64ToBytes:function(B){B=B.replace(/[^A-Z0-9+\/]/ig,"");for(var ee=[],X=0,ye=0;X<B.length;ye=++X%4)ye!=0&&ee.push((P.indexOf(B.charAt(X-1))&Math.pow(2,-2*ye+8)-1)<<ye*2|P.indexOf(B.charAt(X))>>>6-ye*2);return ee}};q.exports=z})()},"./node_modules/is-buffer/index.js":function(q,V){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */q.exports=function(B){return B!=null&&(P(B)||z(B)||!!B._isBuffer)};function P(B){return!!B.constructor&&typeof B.constructor.isBuffer=="function"&&B.constructor.isBuffer(B)}function z(B){return typeof B.readFloatLE=="function"&&typeof B.slice=="function"&&P(B.slice(0,0))}},"./node_modules/md5/md5.js":function(q,V,P){(function(){var z=P("./node_modules/crypt/crypt.js"),B=P("./node_modules/charenc/charenc.js").utf8,ee=P("./node_modules/is-buffer/index.js"),X=P("./node_modules/charenc/charenc.js").bin,ye=function(ge,fe){ge.constructor==String?fe&&fe.encoding==="binary"?ge=X.stringToBytes(ge):ge=B.stringToBytes(ge):ee(ge)?ge=Array.prototype.slice.call(ge,0):!Array.isArray(ge)&&ge.constructor!==Uint8Array&&(ge=ge.toString());for(var ie=z.bytesToWords(ge),he=ge.length*8,Y=1732584193,re=-271733879,de=-1732584194,be=271733878,Pe=0;Pe<ie.length;Pe++)ie[Pe]=(ie[Pe]<<8|ie[Pe]>>>24)&16711935|(ie[Pe]<<24|ie[Pe]>>>8)&4278255360;ie[he>>>5]|=128<<he%32,ie[(he+64>>>9<<4)+14]=he;for(var $e=ye._ff,Ce=ye._gg,Fe=ye._hh,He=ye._ii,Pe=0;Pe<ie.length;Pe+=16){var We=Y,it=re,ct=de,vt=be;Y=$e(Y,re,de,be,ie[Pe+0],7,-680876936),be=$e(be,Y,re,de,ie[Pe+1],12,-389564586),de=$e(de,be,Y,re,ie[Pe+2],17,606105819),re=$e(re,de,be,Y,ie[Pe+3],22,-1044525330),Y=$e(Y,re,de,be,ie[Pe+4],7,-176418897),be=$e(be,Y,re,de,ie[Pe+5],12,1200080426),de=$e(de,be,Y,re,ie[Pe+6],17,-1473231341),re=$e(re,de,be,Y,ie[Pe+7],22,-45705983),Y=$e(Y,re,de,be,ie[Pe+8],7,1770035416),be=$e(be,Y,re,de,ie[Pe+9],12,-1958414417),de=$e(de,be,Y,re,ie[Pe+10],17,-42063),re=$e(re,de,be,Y,ie[Pe+11],22,-1990404162),Y=$e(Y,re,de,be,ie[Pe+12],7,1804603682),be=$e(be,Y,re,de,ie[Pe+13],12,-40341101),de=$e(de,be,Y,re,ie[Pe+14],17,-1502002290),re=$e(re,de,be,Y,ie[Pe+15],22,1236535329),Y=Ce(Y,re,de,be,ie[Pe+1],5,-165796510),be=Ce(be,Y,re,de,ie[Pe+6],9,-1069501632),de=Ce(de,be,Y,re,ie[Pe+11],14,643717713),re=Ce(re,de,be,Y,ie[Pe+0],20,-373897302),Y=Ce(Y,re,de,be,ie[Pe+5],5,-701558691),be=Ce(be,Y,re,de,ie[Pe+10],9,38016083),de=Ce(de,be,Y,re,ie[Pe+15],14,-660478335),re=Ce(re,de,be,Y,ie[Pe+4],20,-405537848),Y=Ce(Y,re,de,be,ie[Pe+9],5,568446438),be=Ce(be,Y,re,de,ie[Pe+14],9,-1019803690),de=Ce(de,be,Y,re,ie[Pe+3],14,-187363961),re=Ce(re,de,be,Y,ie[Pe+8],20,1163531501),Y=Ce(Y,re,de,be,ie[Pe+13],5,-1444681467),be=Ce(be,Y,re,de,ie[Pe+2],9,-51403784),de=Ce(de,be,Y,re,ie[Pe+7],14,1735328473),re=Ce(re,de,be,Y,ie[Pe+12],20,-1926607734),Y=Fe(Y,re,de,be,ie[Pe+5],4,-378558),be=Fe(be,Y,re,de,ie[Pe+8],11,-2022574463),de=Fe(de,be,Y,re,ie[Pe+11],16,1839030562),re=Fe(re,de,be,Y,ie[Pe+14],23,-35309556),Y=Fe(Y,re,de,be,ie[Pe+1],4,-1530992060),be=Fe(be,Y,re,de,ie[Pe+4],11,1272893353),de=Fe(de,be,Y,re,ie[Pe+7],16,-155497632),re=Fe(re,de,be,Y,ie[Pe+10],23,-1094730640),Y=Fe(Y,re,de,be,ie[Pe+13],4,681279174),be=Fe(be,Y,re,de,ie[Pe+0],11,-358537222),de=Fe(de,be,Y,re,ie[Pe+3],16,-722521979),re=Fe(re,de,be,Y,ie[Pe+6],23,76029189),Y=Fe(Y,re,de,be,ie[Pe+9],4,-640364487),be=Fe(be,Y,re,de,ie[Pe+12],11,-421815835),de=Fe(de,be,Y,re,ie[Pe+15],16,530742520),re=Fe(re,de,be,Y,ie[Pe+2],23,-995338651),Y=He(Y,re,de,be,ie[Pe+0],6,-198630844),be=He(be,Y,re,de,ie[Pe+7],10,1126891415),de=He(de,be,Y,re,ie[Pe+14],15,-1416354905),re=He(re,de,be,Y,ie[Pe+5],21,-57434055),Y=He(Y,re,de,be,ie[Pe+12],6,1700485571),be=He(be,Y,re,de,ie[Pe+3],10,-1894986606),de=He(de,be,Y,re,ie[Pe+10],15,-1051523),re=He(re,de,be,Y,ie[Pe+1],21,-2054922799),Y=He(Y,re,de,be,ie[Pe+8],6,1873313359),be=He(be,Y,re,de,ie[Pe+15],10,-30611744),de=He(de,be,Y,re,ie[Pe+6],15,-1560198380),re=He(re,de,be,Y,ie[Pe+13],21,1309151649),Y=He(Y,re,de,be,ie[Pe+4],6,-145523070),be=He(be,Y,re,de,ie[Pe+11],10,-1120210379),de=He(de,be,Y,re,ie[Pe+2],15,718787259),re=He(re,de,be,Y,ie[Pe+9],21,-343485551),Y=Y+We>>>0,re=re+it>>>0,de=de+ct>>>0,be=be+vt>>>0}return z.endian([Y,re,de,be])};ye._ff=function(ge,fe,ie,he,Y,re,de){var be=ge+(fe&ie|~fe&he)+(Y>>>0)+de;return(be<<re|be>>>32-re)+fe},ye._gg=function(ge,fe,ie,he,Y,re,de){var be=ge+(fe&he|ie&~he)+(Y>>>0)+de;return(be<<re|be>>>32-re)+fe},ye._hh=function(ge,fe,ie,he,Y,re,de){var be=ge+(fe^ie^he)+(Y>>>0)+de;return(be<<re|be>>>32-re)+fe},ye._ii=function(ge,fe,ie,he,Y,re,de){var be=ge+(ie^(fe|~he))+(Y>>>0)+de;return(be<<re|be>>>32-re)+fe},ye._blocksize=16,ye._digestsize=16,q.exports=function(ge,fe){if(ge==null)throw new Error("Illegal argument "+ge);var ie=z.wordsToBytes(ye(ge,fe));return fe&&fe.asBytes?ie:fe&&fe.asString?X.bytesToString(ie):z.bytesToHex(ie)}})()},"./node_modules/regenerator-runtime/runtime.js":function(q,V,P){var z=function(B){var ee=Object.prototype,X=ee.hasOwnProperty,ye,ge=typeof Symbol=="function"?Symbol:{},fe=ge.iterator||"@@iterator",ie=ge.asyncIterator||"@@asyncIterator",he=ge.toStringTag||"@@toStringTag";function Y(N,D,_e){return Object.defineProperty(N,D,{value:_e,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{Y({},"")}catch{Y=function(D,_e,Xe){return D[_e]=Xe}}function re(N,D,_e,Xe){var tt=D&&D.prototype instanceof He?D:He,ht=Object.create(tt.prototype),ue=new ur(Xe||[]);return ht._invoke=Ht(N,_e,ue),ht}B.wrap=re;function de(N,D,_e){try{return{type:"normal",arg:N.call(D,_e)}}catch(Xe){return{type:"throw",arg:Xe}}}var be="suspendedStart",Pe="suspendedYield",$e="executing",Ce="completed",Fe={};function He(){}function We(){}function it(){}var ct={};ct[fe]=function(){return this};var vt=Object.getPrototypeOf,kt=vt&&vt(vt(Vt([])));kt&&kt!==ee&&X.call(kt,fe)&&(ct=kt);var pt=it.prototype=He.prototype=Object.create(ct);We.prototype=pt.constructor=it,it.constructor=We,We.displayName=Y(it,he,"GeneratorFunction");function xt(N){["next","throw","return"].forEach(function(D){Y(N,D,function(_e){return this._invoke(D,_e)})})}B.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return D?D===We||(D.displayName||D.name)==="GeneratorFunction":!1},B.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,it):(N.__proto__=it,Y(N,he,"GeneratorFunction")),N.prototype=Object.create(pt),N},B.awrap=function(N){return{__await:N}};function Wt(N,D){function _e(ht,ue,M,U){var Ee=de(N[ht],N,ue);if(Ee.type==="throw")U(Ee.arg);else{var Ve=Ee.arg,nt=Ve.value;return nt&&typeof nt=="object"&&X.call(nt,"__await")?D.resolve(nt.__await).then(function(Ge){_e("next",Ge,M,U)},function(Ge){_e("throw",Ge,M,U)}):D.resolve(nt).then(function(Ge){Ve.value=Ge,M(Ve)},function(Ge){return _e("throw",Ge,M,U)})}}var Xe;function tt(ht,ue){function M(){return new D(function(U,Ee){_e(ht,ue,U,Ee)})}return Xe=Xe?Xe.then(M,M):M()}this._invoke=tt}xt(Wt.prototype),Wt.prototype[ie]=function(){return this},B.AsyncIterator=Wt,B.async=function(N,D,_e,Xe,tt){tt===void 0&&(tt=Promise);var ht=new Wt(re(N,D,_e,Xe),tt);return B.isGeneratorFunction(D)?ht:ht.next().then(function(ue){return ue.done?ue.value:ht.next()})};function Ht(N,D,_e){var Xe=be;return function(ht,ue){if(Xe===$e)throw new Error("Generator is already running");if(Xe===Ce){if(ht==="throw")throw ue;return Se()}for(_e.method=ht,_e.arg=ue;;){var M=_e.delegate;if(M){var U=lr(M,_e);if(U){if(U===Fe)continue;return U}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if(Xe===be)throw Xe=Ce,_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);Xe=$e;var Ee=de(N,D,_e);if(Ee.type==="normal"){if(Xe=_e.done?Ce:Pe,Ee.arg===Fe)continue;return{value:Ee.arg,done:_e.done}}else Ee.type==="throw"&&(Xe=Ce,_e.method="throw",_e.arg=Ee.arg)}}}function lr(N,D){var _e=N.iterator[D.method];if(_e===ye){if(D.delegate=null,D.method==="throw"){if(N.iterator.return&&(D.method="return",D.arg=ye,lr(N,D),D.method==="throw"))return Fe;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return Fe}var Xe=de(_e,N.iterator,D.arg);if(Xe.type==="throw")return D.method="throw",D.arg=Xe.arg,D.delegate=null,Fe;var tt=Xe.arg;if(!tt)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,Fe;if(tt.done)D[N.resultName]=tt.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=ye);else return tt;return D.delegate=null,Fe}xt(pt),Y(pt,he,"Generator"),pt[fe]=function(){return this},pt.toString=function(){return"[object Generator]"};function et(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function _r(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function ur(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(et,this),this.reset(!0)}B.keys=function(N){var D=[];for(var _e in N)D.push(_e);return D.reverse(),function Xe(){for(;D.length;){var tt=D.pop();if(tt in N)return Xe.value=tt,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function Vt(N){if(N){var D=N[fe];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var _e=-1,Xe=function tt(){for(;++_e<N.length;)if(X.call(N,_e))return tt.value=N[_e],tt.done=!1,tt;return tt.value=ye,tt.done=!0,tt};return Xe.next=Xe}}return{next:Se}}B.values=Vt;function Se(){return{value:ye,done:!0}}return ur.prototype={constructor:ur,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ye,this.done=!1,this.delegate=null,this.method="next",this.arg=ye,this.tryEntries.forEach(_r),!N)for(var D in this)D.charAt(0)==="t"&&X.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=ye)},stop:function(){this.done=!0;var N=this.tryEntries[0],D=N.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var D=this;function _e(U,Ee){return ht.type="throw",ht.arg=N,D.next=U,Ee&&(D.method="next",D.arg=ye),!!Ee}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var tt=this.tryEntries[Xe],ht=tt.completion;if(tt.tryLoc==="root")return _e("end");if(tt.tryLoc<=this.prev){var ue=X.call(tt,"catchLoc"),M=X.call(tt,"finallyLoc");if(ue&&M){if(this.prev<tt.catchLoc)return _e(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return _e(tt.finallyLoc)}else if(ue){if(this.prev<tt.catchLoc)return _e(tt.catchLoc,!0)}else if(M){if(this.prev<tt.finallyLoc)return _e(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,D){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var Xe=this.tryEntries[_e];if(Xe.tryLoc<=this.prev&&X.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var tt=Xe;break}}tt&&(N==="break"||N==="continue")&&tt.tryLoc<=D&&D<=tt.finallyLoc&&(tt=null);var ht=tt?tt.completion:{};return ht.type=N,ht.arg=D,tt?(this.method="next",this.next=tt.finallyLoc,Fe):this.complete(ht)},complete:function(N,D){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&D&&(this.next=D),Fe},finish:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var _e=this.tryEntries[D];if(_e.finallyLoc===N)return this.complete(_e.completion,_e.afterLoc),_r(_e),Fe}},catch:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var _e=this.tryEntries[D];if(_e.tryLoc===N){var Xe=_e.completion;if(Xe.type==="throw"){var tt=Xe.arg;_r(_e)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(N,D,_e){return this.delegate={iterator:Vt(N),resultName:D,nextLoc:_e},this.method==="next"&&(this.arg=ye),Fe}},B}(q.exports);try{regeneratorRuntime=z}catch{Function("r","regeneratorRuntime = r")(z)}},"./src/api.js":function(q,V,P){P.r(V),P.d(V,"setup",function(){return $e}),P.d(V,"setupCache",function(){return Pe}),P("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js");var z=P("axios"),B=P.n(z),ee=P("./src/request.js"),X=P("./src/cache.js");P.d(V,"serializeQuery",function(){return X.serializeQuery});var ye=P("./src/config.js"),ge=P("./src/utilities.js");function fe(Ce,Fe){if(Ce==null)return{};var He=ie(Ce,Fe),We,it;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Ce);for(it=0;it<ct.length;it++)We=ct[it],!(Fe.indexOf(We)>=0)&&Object.prototype.propertyIsEnumerable.call(Ce,We)&&(He[We]=Ce[We])}return He}function ie(Ce,Fe){if(Ce==null)return{};var He={},We=Object.keys(Ce),it,ct;for(ct=0;ct<We.length;ct++)it=We[ct],!(Fe.indexOf(it)>=0)&&(He[it]=Ce[it]);return He}function he(Ce,Fe){var He=Object.keys(Ce);if(Object.getOwnPropertySymbols){var We=Object.getOwnPropertySymbols(Ce);Fe&&(We=We.filter(function(it){return Object.getOwnPropertyDescriptor(Ce,it).enumerable})),He.push.apply(He,We)}return He}function Y(Ce){for(var Fe=1;Fe<arguments.length;Fe++){var He=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?he(Object(He),!0).forEach(function(We){re(Ce,We,He[We])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ce,Object.getOwnPropertyDescriptors(He)):he(Object(He)).forEach(function(We){Object.defineProperty(Ce,We,Object.getOwnPropertyDescriptor(He,We))})}return Ce}function re(Ce,Fe,He){return Fe in Ce?Object.defineProperty(Ce,Fe,{value:He,enumerable:!0,configurable:!0,writable:!0}):Ce[Fe]=He,Ce}function de(Ce,Fe,He,We,it,ct,vt){try{var kt=Ce[ct](vt),pt=kt.value}catch(xt){He(xt);return}kt.done?Fe(pt):Promise.resolve(pt).then(We,it)}function be(Ce){return function(){var Fe=this,He=arguments;return new Promise(function(We,it){var ct=Ce.apply(Fe,He);function vt(pt){de(ct,We,it,vt,kt,"next",pt)}function kt(pt){de(ct,We,it,vt,kt,"throw",pt)}vt(void 0)})}}function Pe(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ce=Object(ye.makeConfig)(Ce);function Fe(We){return He.apply(this,arguments)}function He(){return He=be(regeneratorRuntime.mark(function We(it){var ct,vt,kt,pt,xt;return regeneratorRuntime.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return ct=Object(ye.mergeRequestConfig)(Ce,it),Ht.next=3,Object(ee.default)(ct,it);case 3:if(vt=Ht.sent,kt=vt.next,Object(ge.isFunction)(kt)){Ht.next=7;break}return Ht.abrupt("return",kt);case 7:return Ht.prev=7,Ht.next=10,ct.adapter(it);case 10:vt=Ht.sent,Ht.next=16;break;case 13:Ht.prev=13,Ht.t0=Ht.catch(7),pt=Ht.t0;case 16:if(!pt){Ht.next=31;break}if(xt=Object(ge.isFunction)(ct.readOnError)?ct.readOnError(pt,it):ct.readOnError,!xt){Ht.next=30;break}return Ht.prev=19,ct.acceptStale=!0,Ht.next=23,Object(ee.default)(ct,it);case 23:return vt=Ht.sent,vt.next.request.stale=!0,Ht.abrupt("return",vt.next);case 28:Ht.prev=28,Ht.t1=Ht.catch(19);case 30:throw pt;case 31:return Ht.abrupt("return",kt(vt));case 32:case"end":return Ht.stop()}},We,null,[[7,13],[19,28]])})),He.apply(this,arguments)}return{adapter:Fe,config:Ce,store:Ce.store}}function $e(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=Y(Y(Y({},ye.defaults.axios),Ce),{},{cache:Y(Y({},ye.defaults.axios.cache),Ce.cache)}),He=Pe(Fe.cache);Fe.cache;var We=fe(Fe,["cache"]),it=B.a.create(Y(Y({},We),{},{adapter:He.adapter}));return it.cache=He.store,it}V.default={setup:$e,setupCache:Pe,serializeQuery:X.serializeQuery}},"./src/cache.js":function(q,V,P){P.r(V),P.d(V,"read",function(){return he}),P.d(V,"write",function(){return fe}),P.d(V,"key",function(){return re}),P.d(V,"invalidate",function(){return Pe}),P.d(V,"serializeQuery",function(){return $e}),P("./node_modules/core-js/modules/es7.array.includes.js"),P("./node_modules/core-js/modules/es6.string.includes.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/utilities.js"),B=P("./node_modules/md5/md5.js"),ee=P.n(B),X=P("./src/serialize.js");function ye(Ce,Fe,He,We,it,ct,vt){try{var kt=Ce[ct](vt),pt=kt.value}catch(xt){He(xt);return}kt.done?Fe(pt):Promise.resolve(pt).then(We,it)}function ge(Ce){return function(){var Fe=this,He=arguments;return new Promise(function(We,it){var ct=Ce.apply(Fe,He);function vt(pt){ye(ct,We,it,vt,kt,"next",pt)}function kt(pt){ye(ct,We,it,vt,kt,"throw",pt)}vt(void 0)})}}function fe(Ce,Fe,He){return ie.apply(this,arguments)}function ie(){return ie=ge(regeneratorRuntime.mark(function Ce(Fe,He,We){var it;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,it={expires:Fe.expires,data:Object(X.default)(Fe,He,We)},vt.next=4,Fe.store.setItem(Fe.uuid,it);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),Fe.debug("Could not store response",vt.t0),!Fe.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,Fe.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),Fe.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Ce,null,[[0,6],[10,15]])})),ie.apply(this,arguments)}function he(Ce,Fe){return Y.apply(this,arguments)}function Y(){return Y=ge(regeneratorRuntime.mark(function Ce(Fe,He){var We,it,ct,vt,kt,pt,xt,Wt;return regeneratorRuntime.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:return We=Fe.uuid,it=Fe.ignoreCache,lr.next=3,Fe.store.getItem(We);case 3:if(ct=lr.sent,!(it||!ct||!ct.data)){lr.next=10;break}throw Fe.debug("cache-miss",He.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(kt=ct.expires,pt=ct.data,xt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!xt&&!Fe.acceptStale&&kt!==0&&kt<Date.now())){lr.next=18;break}throw Fe.debug("cache-stale",He.url),Wt=new Error,Wt.reason="cache-stale",Wt.message="Entry is stale",Wt;case 18:return Fe.debug(Fe.acceptStale?"cache-hit-stale":"cache-hit",He.url),lr.abrupt("return",pt);case 20:case"end":return lr.stop()}},Ce)})),Y.apply(this,arguments)}function re(Ce){if(Object(z.isFunction)(Ce.key))return Ce.key;var Fe;return Object(z.isString)(Ce.key)?Fe=function(We){var it="".concat(We.baseURL?We.baseURL:"").concat(We.url),ct="".concat(Ce.key,"/").concat(it).concat($e(We));return We.data?ct+ee()(We.data):ct}:Fe=function(We){var it="".concat(We.baseURL?We.baseURL:"").concat(We.url),ct=it+$e(We);return We.data?ct+ee()(We.data):ct},Fe}function de(Ce,Fe){return be.apply(this,arguments)}function be(){return be=ge(regeneratorRuntime.mark(function Ce(Fe,He){var We;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(We=He.method.toLowerCase(),!Fe.exclude.methods.includes(We)){ct.next=4;break}return ct.next=4,Fe.store.removeItem(Fe.uuid);case 4:case"end":return ct.stop()}},Ce)})),be.apply(this,arguments)}function Pe(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(z.isFunction)(Ce.invalidate)?Ce.invalidate:de}function $e(Ce){if(!Ce.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ce.params);var Fe=Ce.params,He=Ce.params instanceof URLSearchParams;return He||(Fe=new URLSearchParams,Object.keys(Ce.params).forEach(function(We){return Fe.append(We,Ce.params[We])})),"?".concat(Fe.toString())}V.default={read:he,write:fe,key:re,invalidate:Pe,serializeQuery:$e}},"./src/config.js":function(q,V,P){P.r(V),P.d(V,"defaults",function(){return Y}),P.d(V,"makeConfig",function(){return de}),P.d(V,"mergeRequestConfig",function(){return be}),P("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("axios"),B=P.n(z),ee=P("./src/memory.js"),X=P("./src/cache.js");function ye(Pe,$e){var Ce=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Fe=Object.getOwnPropertySymbols(Pe);$e&&(Fe=Fe.filter(function(He){return Object.getOwnPropertyDescriptor(Pe,He).enumerable})),Ce.push.apply(Ce,Fe)}return Ce}function ge(Pe){for(var $e=1;$e<arguments.length;$e++){var Ce=arguments[$e]!=null?arguments[$e]:{};$e%2?ye(Object(Ce),!0).forEach(function(Fe){fe(Pe,Fe,Ce[Fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(Ce)):ye(Object(Ce)).forEach(function(Fe){Object.defineProperty(Pe,Fe,Object.getOwnPropertyDescriptor(Ce,Fe))})}return Pe}function fe(Pe,$e,Ce){return $e in Pe?Object.defineProperty(Pe,$e,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):Pe[$e]=Ce,Pe}var ie=function(){},he=function(){for(var $e,Ce=arguments.length,Fe=new Array(Ce),He=0;He<Ce;He++)Fe[He]=arguments[He];return($e=console).log.apply($e,["[axios-cache-adapter]"].concat(Fe))},Y={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:B.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},re=["limit","store","adapter","uuid","acceptStale"],de=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ce=ge(ge(ge({},Y.cache),$e),{},{exclude:ge(ge({},Y.cache.exclude),$e.exclude)});return Ce.key=Object(X.key)(Ce),Ce.invalidate=Object(X.invalidate)(Ce),Ce.debug!==!1?Ce.debug=typeof Ce.debug=="function"?Ce.debug:he:Ce.debug=ie,Ce.store||(Ce.store=new ee.default),Ce.debug("Global cache config",Ce),Ce},be=function($e,Ce){var Fe=Ce.cache||{};Fe&&re.forEach(function(We){return Fe[We]?delete Fe[We]:void 0});var He=ge(ge(ge({},$e),Fe),{},{exclude:ge(ge({},$e.exclude),Fe.exclude)});return He.debug===!0&&(He.debug=he),Fe.key&&(He.key=Object(X.key)(Fe)),He.uuid=He.key(Ce),$e.debug("Request config for ".concat(Ce.url),He),He};V.default={defaults:Y,makeConfig:de,mergeRequestConfig:be}},"./src/exclude.js":function(q,V,P){P.r(V),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/core-js/modules/es7.array.includes.js"),P("./node_modules/core-js/modules/es6.string.includes.js");var z=P("./src/utilities.js");function B(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=arguments.length>1?arguments[1]:void 0,ye=ee.exclude,ge=ye===void 0?{}:ye,fe=ee.debug,ie=X.method.toLowerCase();if(ie==="head"||ge.methods.includes(ie))return fe("Excluding request by HTTP method ".concat(X.url)),!0;if(typeof ge.filter=="function"&&ge.filter(X))return fe("Excluding request by filter ".concat(X.url)),!0;var he=/\?.*$/.test(X.url)||Object(z.isObject)(X.params)&&Object.keys(X.params).length!==0||typeof URLSearchParams<"u"&&X.params instanceof URLSearchParams;if(ge.query&&he)return fe("Excluding request by query ".concat(X.url)),!0;var Y=ge.paths||[],re=Y.some(function(de){return X.url.match(de)});return re?(fe("Excluding request by url match ".concat(X.url)),!0):!1}V.default=B},"./src/index.node.js":function(q,V,P){P.r(V);var z=P("./src/api.js");P.d(V,"setup",function(){return z.setup}),P.d(V,"setupCache",function(){return z.setupCache}),P.d(V,"serializeQuery",function(){return z.serializeQuery});var B=P("./src/redis.js");P.d(V,"RedisStore",function(){return B.default});var ee=P("./src/redis-default.js");P.d(V,"RedisDefaultStore",function(){return ee.default}),V.default={setup:z.setup,setupCache:z.setupCache,serializeQuery:z.serializeQuery,RedisStore:B.default,RedisDefaultStore:ee.default}},"./src/limit.js":function(q,V,P){P.r(V),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(ye,ge,fe,ie,he,Y,re){try{var de=ye[Y](re),be=de.value}catch(Pe){fe(Pe);return}de.done?ge(be):Promise.resolve(be).then(ie,he)}function B(ye){return function(){var ge=this,fe=arguments;return new Promise(function(ie,he){var Y=ye.apply(ge,fe);function re(be){z(Y,ie,he,re,de,"next",be)}function de(be){z(Y,ie,he,re,de,"throw",be)}re(void 0)})}}function ee(ye){return X.apply(this,arguments)}function X(){return X=B(regeneratorRuntime.mark(function ye(ge){var fe,ie;return regeneratorRuntime.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,ge.store.length();case 2:if(fe=Y.sent,!(fe<ge.limit)){Y.next=5;break}return Y.abrupt("return");case 5:return ge.debug("Current store size: ".concat(fe)),Y.next=8,ge.store.iterate(function(re,de){ie||(ie={value:re,key:de}),re.expires<ie.value.expires&&(ie={value:re,key:de})});case 8:if(!ie){Y.next=12;break}return ge.debug("Removing item: ".concat(ie.key)),Y.next=12,ge.store.removeItem(ie.key);case 12:case"end":return Y.stop()}},ye)})),X.apply(this,arguments)}V.default=ee},"./src/memory.js":function(q,V,P){P.r(V),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js");var z=P("./src/utilities.js");function B(ie,he,Y,re,de,be,Pe){try{var $e=ie[be](Pe),Ce=$e.value}catch(Fe){Y(Fe);return}$e.done?he(Ce):Promise.resolve(Ce).then(re,de)}function ee(ie){return function(){var he=this,Y=arguments;return new Promise(function(re,de){var be=ie.apply(he,Y);function Pe(Ce){B(be,re,de,Pe,$e,"next",Ce)}function $e(Ce){B(be,re,de,Pe,$e,"throw",Ce)}Pe(void 0)})}}function X(ie,he){if(!(ie instanceof he))throw new TypeError("Cannot call a class as a function")}function ye(ie,he){for(var Y=0;Y<he.length;Y++){var re=he[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,re.key,re)}}function ge(ie,he,Y){return he&&ye(ie.prototype,he),Y&&ye(ie,Y),ie}var fe=function(){function ie(){X(this,ie),this.store={}}return ge(ie,[{key:"getItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){var be;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return be=this.store[de]||null,$e.abrupt("return",JSON.parse(be));case 2:case"end":return $e.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"setItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de,be){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return this.store[de]=JSON.stringify(be),$e.abrupt("return",be);case 2:case"end":return $e.stop()}},re,this)}));function Y(re,de){return he.apply(this,arguments)}return Y}()},{key:"removeItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:delete this.store[de];case 1:case"end":return Pe.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"clear",value:function(){var he=ee(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:this.store={};case 1:case"end":return be.stop()}},re,this)}));function Y(){return he.apply(this,arguments)}return Y}()},{key:"length",value:function(){var he=ee(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Object.keys(this.store).length);case 1:case"end":return be.stop()}},re,this)}));function Y(){return he.apply(this,arguments)}return Y}()},{key:"iterate",value:function(Y){return Promise.all(Object(z.mapObject)(this.store,Y))}}]),ie}();V.default=fe},"./src/redis-default.js":function(q,V,P){P.r(V),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.function.bind.js"),P("./node_modules/core-js/modules/es6.function.name.js");var z=P("util");function B(ie,he,Y,re,de,be,Pe){try{var $e=ie[be](Pe),Ce=$e.value}catch(Fe){Y(Fe);return}$e.done?he(Ce):Promise.resolve(Ce).then(re,de)}function ee(ie){return function(){var he=this,Y=arguments;return new Promise(function(re,de){var be=ie.apply(he,Y);function Pe(Ce){B(be,re,de,Pe,$e,"next",Ce)}function $e(Ce){B(be,re,de,Pe,$e,"throw",Ce)}Pe(void 0)})}}function X(ie,he){if(!(ie instanceof he))throw new TypeError("Cannot call a class as a function")}function ye(ie,he){for(var Y=0;Y<he.length;Y++){var re=he[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,re.key,re)}}function ge(ie,he,Y){return he&&ye(ie.prototype,he),Y&&ye(ie,Y),ie}var fe=function(){function ie(he){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};X(this,ie);var re=new TypeError("First parameter must be a valid RedisClient instance.");try{if(he.constructor.name!=="RedisClient")throw re}catch{throw re}this.client=he,this.prefix=Y.prefix||"axios-cache",this.maxScanCount=Y.maxScanCount||1e3,this.getAsync=Object(z.promisify)(he.get).bind(he),this.psetexAsync=Object(z.promisify)(he.psetex).bind(he),this.delAsync=Object(z.promisify)(he.del).bind(he),this.scanAsync=Object(z.promisify)(he.scan).bind(he)}return ge(ie,[{key:"calculateTTL",value:function(Y){var re=Date.now();return Y.expires&&Y.expires>re?Y.expires-re:-1}},{key:"transformKey",value:function(Y){return this.prefix+"_"+Y}},{key:"getItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){var be;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.getAsync(this.transformKey(de));case 2:if($e.t0=$e.sent,$e.t0){$e.next=5;break}$e.t0=null;case 5:return be=$e.t0,$e.abrupt("return",JSON.parse(be));case 7:case"end":return $e.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"setItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de,be){var Pe,$e;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(Pe=this.transformKey(de),$e=this.calculateTTL(be),!($e>0)){Fe.next=5;break}return Fe.next=5,this.psetexAsync(Pe,$e,JSON.stringify(be));case 5:return Fe.abrupt("return",be);case 6:case"end":return Fe.stop()}},re,this)}));function Y(re,de){return he.apply(this,arguments)}return Y}()},{key:"removeItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.delAsync(this.transformKey(de));case 2:case"end":return Pe.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"scan",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){var be,Pe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:be="0";case 1:return Ce.next=3,this.scanAsync(be,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Pe=Ce.sent,be=Pe[0],Ce.next=7,de(Pe[1]);case 7:if(be!=="0"){Ce.next=1;break}case 8:case"end":return Ce.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"clear",value:function(){var he=ee(regeneratorRuntime.mark(function re(){var de=this;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.scan(function($e){return de.delAsync($e)});case 2:case"end":return Pe.stop()}},re,this)}));function Y(){return he.apply(this,arguments)}return Y}()},{key:"length",value:function(){var he=ee(regeneratorRuntime.mark(function re(){var de;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return de=0,Pe.next=3,this.scan(function($e){de+=$e.length});case 3:return Pe.abrupt("return",de);case 4:case"end":return Pe.stop()}},re,this)}));function Y(){return he.apply(this,arguments)}return Y}()},{key:"iterate",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){var be=this,Pe,$e;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return $e=function(){return $e=ee(regeneratorRuntime.mark(function We(it){var ct,vt;return regeneratorRuntime.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.getAsync(it);case 2:if(pt.t0=pt.sent,pt.t0){pt.next=5;break}pt.t0=null;case 5:return ct=pt.t0,vt=JSON.parse(ct),pt.next=9,de(vt,it);case 9:return pt.abrupt("return",pt.sent);case 10:case"end":return pt.stop()}},We,this)})),$e.apply(this,arguments)},Pe=function(We){return $e.apply(this,arguments)},Fe.next=4,this.scan(function(He){return Promise.all(He.map(Pe.bind(be)))});case 4:return Fe.abrupt("return",Promise.resolve([]));case 5:case"end":return Fe.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()}]),ie}();V.default=fe},"./src/redis.js":function(q,V,P){P.r(V),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.function.bind.js"),P("./node_modules/core-js/modules/es6.function.name.js");var z=P("util"),B=P("./src/utilities.js");function ee(he,Y,re,de,be,Pe,$e){try{var Ce=he[Pe]($e),Fe=Ce.value}catch(He){re(He);return}Ce.done?Y(Fe):Promise.resolve(Fe).then(de,be)}function X(he){return function(){var Y=this,re=arguments;return new Promise(function(de,be){var Pe=he.apply(Y,re);function $e(Fe){ee(Pe,de,be,$e,Ce,"next",Fe)}function Ce(Fe){ee(Pe,de,be,$e,Ce,"throw",Fe)}$e(void 0)})}}function ye(he,Y){if(!(he instanceof Y))throw new TypeError("Cannot call a class as a function")}function ge(he,Y){for(var re=0;re<Y.length;re++){var de=Y[re];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(he,de.key,de)}}function fe(he,Y,re){return Y&&ge(he.prototype,Y),re&&ge(he,re),he}var ie=function(){function he(Y){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ye(this,he);var de=new TypeError("First parameter must be a valid RedisClient instance.");try{if(Y.constructor.name!=="RedisClient")throw de}catch{throw de}this.client=Y,this.HASH_KEY=re,this.hgetAsync=Object(z.promisify)(Y.hget).bind(Y),this.hsetAsync=Object(z.promisify)(Y.hset).bind(Y),this.hdelAsync=Object(z.promisify)(Y.hdel).bind(Y),this.delAsync=Object(z.promisify)(Y.del).bind(Y),this.hlenAsync=Object(z.promisify)(Y.hlen).bind(Y),this.hgetallAsync=Object(z.promisify)(Y.hgetall).bind(Y)}return fe(he,[{key:"getItem",value:function(){var Y=X(regeneratorRuntime.mark(function de(be){var Pe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.hgetAsync(this.HASH_KEY,be);case 2:if(Ce.t0=Ce.sent,Ce.t0){Ce.next=5;break}Ce.t0=null;case 5:return Pe=Ce.t0,Ce.abrupt("return",JSON.parse(Pe));case 7:case"end":return Ce.stop()}},de,this)}));function re(de){return Y.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var Y=X(regeneratorRuntime.mark(function de(be,Pe){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.hsetAsync(this.HASH_KEY,be,JSON.stringify(Pe));case 2:return Ce.abrupt("return",Pe);case 3:case"end":return Ce.stop()}},de,this)}));function re(de,be){return Y.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var Y=X(regeneratorRuntime.mark(function de(be){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.hdelAsync(this.HASH_KEY,be);case 2:case"end":return $e.stop()}},de,this)}));function re(de){return Y.apply(this,arguments)}return re}()},{key:"clear",value:function(){var Y=X(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Pe.stop()}},de,this)}));function re(){return Y.apply(this,arguments)}return re}()},{key:"length",value:function(){var Y=X(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Pe.stop()}},de,this)}));function re(){return Y.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var Y=X(regeneratorRuntime.mark(function de(be){var Pe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Pe=Ce.sent,Ce.abrupt("return",Promise.all(Object(B.mapObject)(Pe,be)));case 4:case"end":return Ce.stop()}},de,this)}));function re(de){return Y.apply(this,arguments)}return re}()}]),he}();V.default=ie},"./src/request.js":function(q,V,P){P.r(V),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/response.js"),B=P("./src/exclude.js"),ee=P("./src/cache.js");function X(ie,he,Y,re,de,be,Pe){try{var $e=ie[be](Pe),Ce=$e.value}catch(Fe){Y(Fe);return}$e.done?he(Ce):Promise.resolve(Ce).then(re,de)}function ye(ie){return function(){var he=this,Y=arguments;return new Promise(function(re,de){var be=ie.apply(he,Y);function Pe(Ce){X(be,re,de,Pe,$e,"next",Ce)}function $e(Ce){X(be,re,de,Pe,$e,"throw",Ce)}Pe(void 0)})}}function ge(ie,he){return fe.apply(this,arguments)}function fe(){return fe=ye(regeneratorRuntime.mark(function ie(he,Y){var re,de,be;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return be=function(){return he.excludeFromCache=!0,{config:he,next:re}},he.debug("uuid",he.uuid),re=function(){for(var Fe=arguments.length,He=new Array(Fe),We=0;We<Fe;We++)He[We]=arguments[We];return z.default.apply(void 0,[he,Y].concat(He))},$e.next=5,he.invalidate(he,Y);case 5:if(!Object(B.default)(he,Y)){$e.next=7;break}return $e.abrupt("return",be());case 7:return $e.prev=7,$e.next=10,Object(ee.read)(he,Y);case 10:return de=$e.sent,de.config=Y,de.request={fromCache:!0},$e.abrupt("return",{config:he,next:de});case 16:if($e.prev=16,$e.t0=$e.catch(7),!(he.clearOnStale&&$e.t0.reason==="cache-stale")){$e.next=21;break}return $e.next=21,he.store.removeItem(he.uuid);case 21:return $e.abrupt("return",{config:he,next:re});case 22:case"end":return $e.stop()}},ie,null,[[7,16]])})),fe.apply(this,arguments)}V.default=ge},"./src/response.js":function(q,V,P){P.r(V),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/limit.js"),B=P("./src/cache.js"),ee=P("./node_modules/cache-control-esm/index.js");function X(ie,he,Y,re,de,be,Pe){try{var $e=ie[be](Pe),Ce=$e.value}catch(Fe){Y(Fe);return}$e.done?he(Ce):Promise.resolve(Ce).then(re,de)}function ye(ie){return function(){var he=this,Y=arguments;return new Promise(function(re,de){var be=ie.apply(he,Y);function Pe(Ce){X(be,re,de,Pe,$e,"next",Ce)}function $e(Ce){X(be,re,de,Pe,$e,"throw",Ce)}Pe(void 0)})}}function ge(ie,he,Y){return fe.apply(this,arguments)}function fe(){return fe=ye(regeneratorRuntime.mark(function ie(he,Y,re){var de,be,Pe,$e,Ce;return regeneratorRuntime.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(de=re.request,be=de===void 0?{}:de,Pe=re.headers,$e=Pe===void 0?{}:Pe,!(["arraybuffer","blob"].indexOf(be.responseType)>-1)){He.next=3;break}return He.abrupt("return",re);case 3:if(Ce={},he.readHeaders&&($e["cache-control"]?(Ce=Object(ee.parse)($e["cache-control"]),(Ce.noCache||Ce.noStore)&&(he.excludeFromCache=!0)):$e.expires?he.expires=new Date($e.expires).getTime():he.expires=new Date().getTime()),he.excludeFromCache){He.next=15;break}if(Ce.maxAge||Ce.maxAge===0?he.expires=Date.now()+Ce.maxAge*1e3:he.readHeaders||(he.expires=he.maxAge===0?Date.now():Date.now()+he.maxAge),!he.limit){He.next=11;break}return he.debug("Detected limit: ".concat(he.limit)),He.next=11,Object(z.default)(he);case 11:return He.next=13,Object(B.write)(he,Y,re);case 13:He.next=16;break;case 15:re.request.excludedFromCache=!0;case 16:return He.abrupt("return",re);case 17:case"end":return He.stop()}},ie)})),fe.apply(this,arguments)}V.default=ge},"./src/serialize.js":function(q,V,P){P.r(V),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(X,ye){if(X==null)return{};var ge=B(X,ye),fe,ie;if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(X);for(ie=0;ie<he.length;ie++)fe=he[ie],!(ye.indexOf(fe)>=0)&&Object.prototype.propertyIsEnumerable.call(X,fe)&&(ge[fe]=X[fe])}return ge}function B(X,ye){if(X==null)return{};var ge={},fe=Object.keys(X),ie,he;for(he=0;he<fe.length;he++)ie=fe[he],!(ye.indexOf(ie)>=0)&&(ge[ie]=X[ie]);return ge}function ee(X,ye,ge){if(ge.data)try{ge.data=JSON.parse(ge.data)}catch(ie){X.debug("Could not parse data as JSON",ie)}ge.request,ge.config;var fe=z(ge,["request","config"]);return fe}V.default=ee},"./src/utilities.js":function(q,V,P){P.r(V),P.d(V,"isObject",function(){return B}),P.d(V,"getTag",function(){return ee}),P.d(V,"isFunction",function(){return X}),P.d(V,"isString",function(){return ye}),P.d(V,"mapObject",function(){return ge}),P("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(fe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(he){return typeof he}:z=function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},z(fe)}function B(fe){var ie=z(fe);return fe!=null&&(ie==="object"||ie==="function")}function ee(fe){return fe===null?fe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(fe)}function X(fe){if(!B(fe))return!1;var ie=ee(fe);return ie==="[object Function]"||ie==="[object AsyncFunction]"||ie==="[object GeneratorFunction]"||ie==="[object Proxy]"}function ye(fe){var ie=z(fe);return ie==="string"||ie==="object"&&fe!=null&&!Array.isArray(fe)&&ee(fe)==="[object String]"}function ge(fe,ie){return B(fe)?Object.keys(fe).map(function(he){return ie(fe[he],he)}):[]}},axios:function(q,V){q.exports=ae},util:function(q,V){q.exports=I.default}})})});const L={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},j=R.setupCache({maxAge:60*60*24*1e3}),le=E.default.create({adapter:j.adapter}),K=async(Z,W={})=>{const ae={...L,...W},[q,V]=i.lngLatToGoogle(Z,ae.zoomBase),P=ae.tileUrl.replace("{z}",String(ae.zoomBase)).replace("{x}",String(q)).replace("{y}",String(V)),z={code:"",prefecture:"",city:""};let B;try{const ye=await le.get(P,{responseType:"arraybuffer"});B=Buffer.from(ye.data,"binary")}catch(ye){throw new Error(ye)}const ee=new d.VectorTile(new w.default(B));let X=Object.keys(ee.layers);return Array.isArray(X)||(X=[X]),X.forEach(ye=>{const ge=ee.layers[ye];if(ge&&ae.layer===ge.name)for(let fe=0;fe<ge.length;fe++){const ie=ge.feature(fe).toGeoJSON(q,V,ae.zoomBase);X.length>1&&(ie.properties.vt_layer=ye);const he={type:"FeatureCollection",features:[ie]};t.geoContains(he,Z)&&(z.code=String(ie.id).length===5?String(ie.id):`0${String(ie.id)}`,z.prefecture=ie.properties.prefecture,z.city=ie.properties.city)}}),z};e.openReverseGeocoder=K})(CM);const f8={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},d8={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},p8={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},m8={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},nA={JPN:p8,CHN:f8,DEU:d8,KOR:m8};var iA=Object.prototype.toString,V3=function(t){var i=iA.call(t),a=i==="[object Arguments]";return a||(a=i!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&iA.call(t.callee)==="[object Function]"),a},H_,oA;function g8(){if(oA)return H_;oA=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=V3,u=Object.prototype.propertyIsEnumerable,f=!u.call({toString:null},"toString"),d=u.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=function(T){var R=T.constructor;return R&&R.prototype===T},E={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},I=function(){if(typeof window>"u")return!1;for(var T in window)try{if(!E["$"+T]&&t.call(window,T)&&window[T]!==null&&typeof window[T]=="object")try{w(window[T])}catch{return!0}}catch{return!0}return!1}(),b=function(T){if(typeof window>"u"||!I)return w(T);try{return w(T)}catch{return!1}};e=function(R){var L=R!==null&&typeof R=="object",j=i.call(R)==="[object Function]",le=a(R),K=L&&i.call(R)==="[object String]",Z=[];if(!L&&!j&&!le)throw new TypeError("Object.keys called on a non-object");var W=d&&j;if(K&&R.length>0&&!t.call(R,0))for(var ae=0;ae<R.length;++ae)Z.push(String(ae));if(le&&R.length>0)for(var q=0;q<R.length;++q)Z.push(String(q));else for(var V in R)!(W&&V==="prototype")&&t.call(R,V)&&Z.push(String(V));if(f)for(var P=b(R),z=0;z<l.length;++z)!(P&&l[z]==="constructor")&&t.call(R,l[z])&&Z.push(l[z]);return Z}}return H_=e,H_}var y8=Array.prototype.slice,v8=V3,aA=Object.keys,Hg=aA?function(t){return aA(t)}:g8(),sA=Object.keys;Hg.shim=function(){if(Object.keys){var t=function(){var i=Object.keys(arguments);return i&&i.length===arguments.length}(1,2);t||(Object.keys=function(a){return v8(a)?sA(y8.call(a)):sA(a)})}else Object.keys=Hg;return Object.keys||Hg};var s2=Hg,_8=Error,x8=EvalError,w8=RangeError,b8=ReferenceError,G3=SyntaxError,Iu=TypeError,S8=URIError,H0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),a=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var u=42;t[i]=u;for(i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var f=Object.getOwnPropertySymbols(t);if(f.length!==1||f[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(t,i);if(d.value!==u||d.enumerable!==!0)return!1}return!0},lA=typeof Symbol<"u"&&Symbol,E8=H0,l2=function(){return typeof lA!="function"||typeof Symbol!="function"||typeof lA("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:E8()},Z_={__proto__:null,foo:{}},T8=Object,P8=function(){return{__proto__:Z_}.foo===Z_.foo&&!(Z_ instanceof T8)},A8="Function.prototype.bind called on incompatible ",I8=Object.prototype.toString,C8=Math.max,k8="[object Function]",uA=function(t,i){for(var a=[],u=0;u<t.length;u+=1)a[u]=t[u];for(var f=0;f<i.length;f+=1)a[f+t.length]=i[f];return a},M8=function(t,i){for(var a=[],u=i||0,f=0;u<t.length;u+=1,f+=1)a[f]=t[u];return a},O8=function(e,t){for(var i="",a=0;a<e.length;a+=1)i+=e[a],a+1<e.length&&(i+=t);return i},F8=function(t){var i=this;if(typeof i!="function"||I8.apply(i)!==k8)throw new TypeError(A8+i);for(var a=M8(arguments,1),u,f=function(){if(this instanceof u){var I=i.apply(this,uA(a,arguments));return Object(I)===I?I:this}return i.apply(t,uA(a,arguments))},d=C8(0,i.length-a.length),l=[],w=0;w<d;w++)l[w]="$"+w;if(u=Function("binder","return function ("+O8(l,",")+"){ return binder.apply(this,arguments); }")(f),i.prototype){var E=function(){};E.prototype=i.prototype,u.prototype=new E,E.prototype=null}return u},R8=F8,u2=Function.prototype.bind||R8,j8=Function.prototype.call,z8=Object.prototype.hasOwnProperty,L8=u2,W3=L8.call(j8,z8),zr,B8=_8,D8=x8,N8=w8,$8=b8,df=G3,Yh=Iu,U8=S8,H3=Function,X_=function(e){try{return H3('"use strict"; return ('+e+").constructor;")()}catch{}},pc=Object.getOwnPropertyDescriptor;if(pc)try{pc({},"")}catch{pc=null}var q_=function(){throw new Yh},V8=pc?function(){try{return arguments.callee,q_}catch{try{return pc(arguments,"callee").get}catch{return q_}}}():q_,wh=l2(),G8=P8(),mi=Object.getPrototypeOf||(G8?function(e){return e.__proto__}:null),Eh={},W8=typeof Uint8Array>"u"||!mi?zr:mi(Uint8Array),mc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?zr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?zr:ArrayBuffer,"%ArrayIteratorPrototype%":wh&&mi?mi([][Symbol.iterator]()):zr,"%AsyncFromSyncIteratorPrototype%":zr,"%AsyncFunction%":Eh,"%AsyncGenerator%":Eh,"%AsyncGeneratorFunction%":Eh,"%AsyncIteratorPrototype%":Eh,"%Atomics%":typeof Atomics>"u"?zr:Atomics,"%BigInt%":typeof BigInt>"u"?zr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?zr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?zr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?zr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":B8,"%eval%":eval,"%EvalError%":D8,"%Float32Array%":typeof Float32Array>"u"?zr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?zr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?zr:FinalizationRegistry,"%Function%":H3,"%GeneratorFunction%":Eh,"%Int8Array%":typeof Int8Array>"u"?zr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?zr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?zr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":wh&&mi?mi(mi([][Symbol.iterator]())):zr,"%JSON%":typeof JSON=="object"?JSON:zr,"%Map%":typeof Map>"u"?zr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!wh||!mi?zr:mi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?zr:Promise,"%Proxy%":typeof Proxy>"u"?zr:Proxy,"%RangeError%":N8,"%ReferenceError%":$8,"%Reflect%":typeof Reflect>"u"?zr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?zr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!wh||!mi?zr:mi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?zr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":wh&&mi?mi(""[Symbol.iterator]()):zr,"%Symbol%":wh?Symbol:zr,"%SyntaxError%":df,"%ThrowTypeError%":V8,"%TypedArray%":W8,"%TypeError%":Yh,"%Uint8Array%":typeof Uint8Array>"u"?zr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?zr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?zr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?zr:Uint32Array,"%URIError%":U8,"%WeakMap%":typeof WeakMap>"u"?zr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?zr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?zr:WeakSet};if(mi)try{null.error}catch(e){var H8=mi(mi(e));mc["%Error.prototype%"]=H8}var Z8=function e(t){var i;if(t==="%AsyncFunction%")i=X_("async function () {}");else if(t==="%GeneratorFunction%")i=X_("function* () {}");else if(t==="%AsyncGeneratorFunction%")i=X_("async function* () {}");else if(t==="%AsyncGenerator%"){var a=e("%AsyncGeneratorFunction%");a&&(i=a.prototype)}else if(t==="%AsyncIteratorPrototype%"){var u=e("%AsyncGenerator%");u&&mi&&(i=mi(u.prototype))}return mc[t]=i,i},cA={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},im=u2,r0=W3,X8=im.call(Function.call,Array.prototype.concat),q8=im.call(Function.apply,Array.prototype.splice),hA=im.call(Function.call,String.prototype.replace),n0=im.call(Function.call,String.prototype.slice),K8=im.call(Function.call,RegExp.prototype.exec),J8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y8=/\\(\\)?/g,Q8=function(t){var i=n0(t,0,1),a=n0(t,-1);if(i==="%"&&a!=="%")throw new df("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&i!=="%")throw new df("invalid intrinsic syntax, expected opening `%`");var u=[];return hA(t,J8,function(f,d,l,w){u[u.length]=l?hA(w,Y8,"$1"):d||f}),u},e$=function(t,i){var a=t,u;if(r0(cA,a)&&(u=cA[a],a="%"+u[0]+"%"),r0(mc,a)){var f=mc[a];if(f===Eh&&(f=Z8(a)),typeof f>"u"&&!i)throw new Yh("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:u,name:a,value:f}}throw new df("intrinsic "+t+" does not exist!")},Ms=function(t,i){if(typeof t!="string"||t.length===0)throw new Yh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new Yh('"allowMissing" argument must be a boolean');if(K8(/^%?[^%]*%?$/,t)===null)throw new df("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=Q8(t),u=a.length>0?a[0]:"",f=e$("%"+u+"%",i),d=f.name,l=f.value,w=!1,E=f.alias;E&&(u=E[0],q8(a,X8([0,1],E)));for(var I=1,b=!0;I<a.length;I+=1){var T=a[I],R=n0(T,0,1),L=n0(T,-1);if((R==='"'||R==="'"||R==="`"||L==='"'||L==="'"||L==="`")&&R!==L)throw new df("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(w=!0),u+="."+T,d="%"+u+"%",r0(mc,d))l=mc[d];else if(l!=null){if(!(T in l)){if(!i)throw new Yh("base intrinsic for "+t+" exists, but the property is not available.");return}if(pc&&I+1>=a.length){var j=pc(l,T);b=!!j,b&&"get"in j&&!("originalValue"in j.get)?l=j.get:l=l[T]}else b=r0(l,T),l=l[T];b&&!w&&(mc[d]=l)}}return l},t$=Ms,Zg=t$("%Object.defineProperty%",!0)||!1;if(Zg)try{Zg({},"a",{value:1})}catch{Zg=!1}var c2=Zg,r$=Ms,Xg=r$("%Object.getOwnPropertyDescriptor%",!0);if(Xg)try{Xg([],"length")}catch{Xg=null}var h2=Xg,fA=c2,n$=G3,bh=Iu,dA=h2,f2=function(t,i,a){if(!t||typeof t!="object"&&typeof t!="function")throw new bh("`obj` must be an object or a function`");if(typeof i!="string"&&typeof i!="symbol")throw new bh("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new bh("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new bh("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new bh("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new bh("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,w=!!dA&&dA(t,i);if(fA)fA(t,i,{configurable:d===null&&w?w.configurable:!d,enumerable:u===null&&w?w.enumerable:!u,value:a,writable:f===null&&w?w.writable:!f});else if(l||!u&&!f&&!d)t[i]=a;else throw new n$("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ew=c2,Z3=function(){return!!ew};Z3.hasArrayLengthDefineBug=function(){if(!ew)return null;try{return ew([],"length",{value:1}).length!==1}catch{return!0}};var d2=Z3,i$=s2,o$=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",a$=Object.prototype.toString,s$=Array.prototype.concat,pA=f2,l$=function(e){return typeof e=="function"&&a$.call(e)==="[object Function]"},X3=d2(),u$=function(e,t,i,a){if(t in e){if(a===!0){if(e[t]===i)return}else if(!l$(a)||!a())return}X3?pA(e,t,i,!0):pA(e,t,i)},q3=function(e,t){var i=arguments.length>2?arguments[2]:{},a=i$(t);o$&&(a=s$.call(a,Object.getOwnPropertySymbols(t)));for(var u=0;u<a.length;u+=1)u$(e,a[u],t[a[u]],i[a[u]])};q3.supportsDescriptors=!!X3;var kc=q3,K3={exports:{}},c$=Ms,mA=f2,h$=d2(),gA=h2,yA=Iu,f$=c$("%Math.floor%"),d$=function(t,i){if(typeof t!="function")throw new yA("`fn` is not a function");if(typeof i!="number"||i<0||i>4294967295||f$(i)!==i)throw new yA("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],u=!0,f=!0;if("length"in t&&gA){var d=gA(t,"length");d&&!d.configurable&&(u=!1),d&&!d.writable&&(f=!1)}return(u||f||!a)&&(h$?mA(t,"length",i,!0,!0):mA(t,"length",i)),t};(function(e){var t=u2,i=Ms,a=d$,u=Iu,f=i("%Function.prototype.apply%"),d=i("%Function.prototype.call%"),l=i("%Reflect.apply%",!0)||t.call(d,f),w=c2,E=i("%Math.max%");e.exports=function(T){if(typeof T!="function")throw new u("a function is required");var R=l(t,d,arguments);return a(R,1+E(0,T.length-(arguments.length-1)),!0)};var I=function(){return l(t,f,arguments)};w?w(e.exports,"apply",{value:I}):e.exports.apply=I})(K3);var Ef=K3.exports,J3=Ms,Y3=Ef,p$=Y3(J3("String.prototype.indexOf")),wa=function(t,i){var a=J3(t,!!i);return typeof a=="function"&&p$(t,".prototype.")>-1?Y3(a):a},m$=s2,Q3=H0(),eO=wa,vA=Object,g$=eO("Array.prototype.push"),_A=eO("Object.prototype.propertyIsEnumerable"),y$=Q3?Object.getOwnPropertySymbols:null,tO=function(t,i){if(t==null)throw new TypeError("target must be an object");var a=vA(t);if(arguments.length===1)return a;for(var u=1;u<arguments.length;++u){var f=vA(arguments[u]),d=m$(f),l=Q3&&(Object.getOwnPropertySymbols||y$);if(l)for(var w=l(f),E=0;E<w.length;++E){var I=w[E];_A(f,I)&&g$(d,I)}for(var b=0;b<d.length;++b){var T=d[b];if(_A(f,T)){var R=f[T];a[T]=R}}}return a},K_=tO,v$=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),i={},a=0;a<t.length;++a)i[t[a]]=t[a];var u=Object.assign({},i),f="";for(var d in u)f+=d;return e!==f},_$=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},rO=function(){return!Object.assign||v$()||_$()?K_:Object.assign},x$=kc,w$=rO,b$=function(){var t=w$();return x$(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},S$=kc,E$=Ef,T$=tO,nO=rO,P$=b$,A$=E$.apply(nO()),iO=function(t,i){return A$(Object,arguments)};S$(iO,{getPolyfill:nO,implementation:T$,shim:P$});var I$=iO,Up=function(){return typeof(function(){}).name=="string"},fp=Object.getOwnPropertyDescriptor;if(fp)try{fp([],"length")}catch{fp=null}Up.functionsHaveConfigurableNames=function(){if(!Up()||!fp)return!1;var t=fp(function(){},"name");return!!t&&!!t.configurable};var C$=Function.prototype.bind;Up.boundFunctionsHaveNames=function(){return Up()&&typeof C$=="function"&&(function(){}).bind().name!==""};var k$=Up,xA=f2,M$=d2(),O$=k$.functionsHaveConfigurableNames(),F$=Iu,R$=function(t,i){if(typeof t!="function")throw new F$("`fn` is not a function");var a=arguments.length>2&&!!arguments[2];return(!a||O$)&&(M$?xA(t,"name",i,!0,!0):xA(t,"name",i)),t},j$=R$,z$=Iu,L$=Object,oO=j$(function(){if(this==null||this!==L$(this))throw new z$("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),B$=oO,D$=kc.supportsDescriptors,N$=Object.getOwnPropertyDescriptor,aO=function(){if(D$&&/a/mig.flags==="gim"){var t=N$(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var i="",a={};if(Object.defineProperty(a,"hasIndices",{get:function(){i+="d"}}),Object.defineProperty(a,"sticky",{get:function(){i+="y"}}),i==="dy")return t.get}}return B$},$$=kc.supportsDescriptors,U$=aO,V$=Object.getOwnPropertyDescriptor,G$=Object.defineProperty,W$=TypeError,wA=Object.getPrototypeOf,H$=/a/,Z$=function(){if(!$$||!wA)throw new W$("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=U$(),i=wA(H$),a=V$(i,"flags");return(!a||a.get!==t)&&G$(i,"flags",{configurable:!0,enumerable:!1,get:t}),t},X$=kc,q$=Ef,K$=oO,sO=aO,J$=Z$,lO=q$(sO());X$(lO,{getPolyfill:sO,implementation:K$,shim:J$});var Y$=lO,qg={exports:{}},Q$=H0,Mc=function(){return Q$()&&!!Symbol.toStringTag},eU=Mc(),tU=wa,tw=tU("Object.prototype.toString"),Z0=function(t){return eU&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:tw(t)==="[object Arguments]"},uO=function(t){return Z0(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&tw(t)!=="[object Array]"&&tw(t.callee)==="[object Function]"},rU=function(){return Z0(arguments)}();Z0.isLegacyArguments=uO;var cO=rU?Z0:uO,p2=typeof Map=="function"&&Map.prototype,J_=Object.getOwnPropertyDescriptor&&p2?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i0=p2&&J_&&typeof J_.get=="function"?J_.get:null,bA=p2&&Map.prototype.forEach,m2=typeof Set=="function"&&Set.prototype,Y_=Object.getOwnPropertyDescriptor&&m2?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o0=m2&&Y_&&typeof Y_.get=="function"?Y_.get:null,SA=m2&&Set.prototype.forEach,nU=typeof WeakMap=="function"&&WeakMap.prototype,dp=nU?WeakMap.prototype.has:null,iU=typeof WeakSet=="function"&&WeakSet.prototype,pp=iU?WeakSet.prototype.has:null,oU=typeof WeakRef=="function"&&WeakRef.prototype,EA=oU?WeakRef.prototype.deref:null,aU=Boolean.prototype.valueOf,sU=Object.prototype.toString,lU=Function.prototype.toString,uU=String.prototype.match,g2=String.prototype.slice,uu=String.prototype.replace,cU=String.prototype.toUpperCase,TA=String.prototype.toLowerCase,hO=RegExp.prototype.test,PA=Array.prototype.concat,_s=Array.prototype.join,hU=Array.prototype.slice,AA=Math.floor,rw=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Q_=Object.getOwnPropertySymbols,nw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,pf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ji=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===pf||!0)?Symbol.toStringTag:null,fO=Object.prototype.propertyIsEnumerable,IA=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function CA(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||hO.call(/e/,t))return t;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var a=e<0?-AA(-e):AA(e);if(a!==e){var u=String(a),f=g2.call(t,u.length+1);return uu.call(u,i,"$&_")+"."+uu.call(uu.call(f,/([0-9]{3})/g,"$&_"),/_$/,"")}}return uu.call(t,i,"$&_")}var iw=D3,kA=iw.custom,MA=pO(kA)?kA:null,fU=function e(t,i,a,u){var f=i||{};if(iu(f,"quoteStyle")&&f.quoteStyle!=="single"&&f.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(iu(f,"maxStringLength")&&(typeof f.maxStringLength=="number"?f.maxStringLength<0&&f.maxStringLength!==1/0:f.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var d=iu(f,"customInspect")?f.customInspect:!0;if(typeof d!="boolean"&&d!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(iu(f,"indent")&&f.indent!==null&&f.indent!=="	"&&!(parseInt(f.indent,10)===f.indent&&f.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(iu(f,"numericSeparator")&&typeof f.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=f.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return gO(t,f);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var w=String(t);return l?CA(t,w):w}if(typeof t=="bigint"){var E=String(t)+"n";return l?CA(t,E):E}var I=typeof f.depth>"u"?5:f.depth;if(typeof a>"u"&&(a=0),a>=I&&I>0&&typeof t=="object")return ow(t)?"[Array]":"[Object]";var b=kU(f,a);if(typeof u>"u")u=[];else if(mO(u,t)>=0)return"[Circular]";function T(ge,fe,ie){if(fe&&(u=hU.call(u),u.push(fe)),ie){var he={depth:f.depth};return iu(f,"quoteStyle")&&(he.quoteStyle=f.quoteStyle),e(ge,he,a+1,u)}return e(ge,f,a+1,u)}if(typeof t=="function"&&!OA(t)){var R=wU(t),L=Sg(t,T);return"[Function"+(R?": "+R:" (anonymous)")+"]"+(L.length>0?" { "+_s.call(L,", ")+" }":"")}if(pO(t)){var j=pf?uu.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):nw.call(t);return typeof t=="object"&&!pf?Rd(j):j}if(AU(t)){for(var le="<"+TA.call(String(t.nodeName)),K=t.attributes||[],Z=0;Z<K.length;Z++)le+=" "+K[Z].name+"="+dO(dU(K[Z].value),"double",f);return le+=">",t.childNodes&&t.childNodes.length&&(le+="..."),le+="</"+TA.call(String(t.nodeName))+">",le}if(ow(t)){if(t.length===0)return"[]";var W=Sg(t,T);return b&&!CU(W)?"["+aw(W,b)+"]":"[ "+_s.call(W,", ")+" ]"}if(mU(t)){var ae=Sg(t,T);return!("cause"in Error.prototype)&&"cause"in t&&!fO.call(t,"cause")?"{ ["+String(t)+"] "+_s.call(PA.call("[cause]: "+T(t.cause),ae),", ")+" }":ae.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+_s.call(ae,", ")+" }"}if(typeof t=="object"&&d){if(MA&&typeof t[MA]=="function"&&iw)return iw(t,{depth:I-a});if(d!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(bU(t)){var q=[];return bA&&bA.call(t,function(ge,fe){q.push(T(fe,t,!0)+" => "+T(ge,t))}),FA("Map",i0.call(t),q,b)}if(TU(t)){var V=[];return SA&&SA.call(t,function(ge){V.push(T(ge,t))}),FA("Set",o0.call(t),V,b)}if(SU(t))return e1("WeakMap");if(PU(t))return e1("WeakSet");if(EU(t))return e1("WeakRef");if(yU(t))return Rd(T(Number(t)));if(_U(t))return Rd(T(rw.call(t)));if(vU(t))return Rd(aU.call(t));if(gU(t))return Rd(T(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===$a)return"{ [object globalThis] }";if(!pU(t)&&!OA(t)){var P=Sg(t,T),z=IA?IA(t)===Object.prototype:t instanceof Object||t.constructor===Object,B=t instanceof Object?"":"null prototype",ee=!z&&Ji&&Object(t)===t&&Ji in t?g2.call(Cu(t),8,-1):B?"Object":"",X=z||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ye=X+(ee||B?"["+_s.call(PA.call([],ee||[],B||[]),": ")+"] ":"");return P.length===0?ye+"{}":b?ye+"{"+aw(P,b)+"}":ye+"{ "+_s.call(P,", ")+" }"}return String(t)};function dO(e,t,i){var a=(i.quoteStyle||t)==="double"?'"':"'";return a+e+a}function dU(e){return uu.call(String(e),/"/g,"&quot;")}function ow(e){return Cu(e)==="[object Array]"&&(!Ji||!(typeof e=="object"&&Ji in e))}function pU(e){return Cu(e)==="[object Date]"&&(!Ji||!(typeof e=="object"&&Ji in e))}function OA(e){return Cu(e)==="[object RegExp]"&&(!Ji||!(typeof e=="object"&&Ji in e))}function mU(e){return Cu(e)==="[object Error]"&&(!Ji||!(typeof e=="object"&&Ji in e))}function gU(e){return Cu(e)==="[object String]"&&(!Ji||!(typeof e=="object"&&Ji in e))}function yU(e){return Cu(e)==="[object Number]"&&(!Ji||!(typeof e=="object"&&Ji in e))}function vU(e){return Cu(e)==="[object Boolean]"&&(!Ji||!(typeof e=="object"&&Ji in e))}function pO(e){if(pf)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!nw)return!1;try{return nw.call(e),!0}catch{}return!1}function _U(e){if(!e||typeof e!="object"||!rw)return!1;try{return rw.call(e),!0}catch{}return!1}var xU=Object.prototype.hasOwnProperty||function(e){return e in this};function iu(e,t){return xU.call(e,t)}function Cu(e){return sU.call(e)}function wU(e){if(e.name)return e.name;var t=uU.call(lU.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function mO(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,a=e.length;i<a;i++)if(e[i]===t)return i;return-1}function bU(e){if(!i0||!e||typeof e!="object")return!1;try{i0.call(e);try{o0.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function SU(e){if(!dp||!e||typeof e!="object")return!1;try{dp.call(e,dp);try{pp.call(e,pp)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function EU(e){if(!EA||!e||typeof e!="object")return!1;try{return EA.call(e),!0}catch{}return!1}function TU(e){if(!o0||!e||typeof e!="object")return!1;try{o0.call(e);try{i0.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function PU(e){if(!pp||!e||typeof e!="object")return!1;try{pp.call(e,pp);try{dp.call(e,dp)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function AU(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function gO(e,t){if(e.length>t.maxStringLength){var i=e.length-t.maxStringLength,a="... "+i+" more character"+(i>1?"s":"");return gO(g2.call(e,0,t.maxStringLength),t)+a}var u=uu.call(uu.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,IU);return dO(u,"single",t)}function IU(e){var t=e.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return i?"\\"+i:"\\x"+(t<16?"0":"")+cU.call(t.toString(16))}function Rd(e){return"Object("+e+")"}function e1(e){return e+" { ? }"}function FA(e,t,i,a){var u=a?aw(i,a):_s.call(i,", ");return e+" ("+t+") {"+u+"}"}function CU(e){for(var t=0;t<e.length;t++)if(mO(e[t],`
`)>=0)return!1;return!0}function kU(e,t){var i;if(e.indent==="	")i="	";else if(typeof e.indent=="number"&&e.indent>0)i=_s.call(Array(e.indent+1)," ");else return null;return{base:i,prev:_s.call(Array(t+1),i)}}function aw(e,t){if(e.length===0)return"";var i=`
`+t.prev+t.base;return i+_s.call(e,","+i)+`
`+t.prev}function Sg(e,t){var i=ow(e),a=[];if(i){a.length=e.length;for(var u=0;u<e.length;u++)a[u]=iu(e,u)?t(e[u],e):""}var f=typeof Q_=="function"?Q_(e):[],d;if(pf){d={};for(var l=0;l<f.length;l++)d["$"+f[l]]=f[l]}for(var w in e)iu(e,w)&&(i&&String(Number(w))===w&&w<e.length||pf&&d["$"+w]instanceof Symbol||(hO.call(/[^\w$]/,w)?a.push(t(w,e)+": "+t(e[w],e)):a.push(w+": "+t(e[w],e))));if(typeof Q_=="function")for(var E=0;E<f.length;E++)fO.call(e,f[E])&&a.push("["+t(f[E])+"]: "+t(e[f[E]],e));return a}var yO=Ms,Tf=wa,MU=fU,OU=Iu,Eg=yO("%WeakMap%",!0),Tg=yO("%Map%",!0),FU=Tf("WeakMap.prototype.get",!0),RU=Tf("WeakMap.prototype.set",!0),jU=Tf("WeakMap.prototype.has",!0),zU=Tf("Map.prototype.get",!0),LU=Tf("Map.prototype.set",!0),BU=Tf("Map.prototype.has",!0),y2=function(e,t){for(var i=e,a;(a=i.next)!==null;i=a)if(a.key===t)return i.next=a.next,a.next=e.next,e.next=a,a},DU=function(e,t){var i=y2(e,t);return i&&i.value},NU=function(e,t,i){var a=y2(e,t);a?a.value=i:e.next={key:t,next:e.next,value:i}},$U=function(e,t){return!!y2(e,t)},vO=function(){var t,i,a,u={assert:function(f){if(!u.has(f))throw new OU("Side channel does not contain "+MU(f))},get:function(f){if(Eg&&f&&(typeof f=="object"||typeof f=="function")){if(t)return FU(t,f)}else if(Tg){if(i)return zU(i,f)}else if(a)return DU(a,f)},has:function(f){if(Eg&&f&&(typeof f=="object"||typeof f=="function")){if(t)return jU(t,f)}else if(Tg){if(i)return BU(i,f)}else if(a)return $U(a,f);return!1},set:function(f,d){Eg&&f&&(typeof f=="object"||typeof f=="function")?(t||(t=new Eg),RU(t,f,d)):Tg?(i||(i=new Tg),LU(i,f,d)):(a||(a={key:{},next:null}),NU(a,f,d))}};return u},UU=W3,jd=vO(),tl=Iu,v2={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new tl("`O` is not an object");if(typeof t!="string")throw new tl("`slot` must be a string");if(jd.assert(e),!v2.has(e,t))throw new tl("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new tl("`O` is not an object");if(typeof t!="string")throw new tl("`slot` must be a string");var i=jd.get(e);return i&&i["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new tl("`O` is not an object");if(typeof t!="string")throw new tl("`slot` must be a string");var i=jd.get(e);return!!i&&UU(i,"$"+t)},set:function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new tl("`O` is not an object");if(typeof t!="string")throw new tl("`slot` must be a string");var a=jd.get(e);a||(a={},jd.set(e,a)),a["$"+t]=i}};Object.freeze&&Object.freeze(v2);var VU=v2,zd=VU,GU=SyntaxError,RA=typeof StopIteration=="object"?StopIteration:null,WU=function(t){if(!RA)throw new GU("this environment lacks StopIteration");zd.set(t,"[[Done]]",!1);var i={next:function(){var u=zd.get(this,"[[Iterator]]"),f=zd.get(u,"[[Done]]");try{return{done:f,value:f?void 0:u.next()}}catch(d){if(zd.set(u,"[[Done]]",!0),d!==RA)throw d;return{done:!0,value:void 0}}}};return zd.set(i,"[[Iterator]]",t),i},t1,jA;function HU(){if(jA)return t1;jA=1;var e={}.toString;return t1=Array.isArray||function(t){return e.call(t)=="[object Array]"},t1}var ZU=String.prototype.valueOf,XU=function(t){try{return ZU.call(t),!0}catch{return!1}},qU=Object.prototype.toString,KU="[object String]",JU=Mc(),_O=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:JU?XU(t):qU.call(t)===KU},_2=typeof Map=="function"&&Map.prototype?Map:null,YU=typeof Set=="function"&&Set.prototype?Set:null,a0;_2||(a0=function(t){return!1});var xO=_2?Map.prototype.has:null,zA=YU?Set.prototype.has:null;!a0&&!xO&&(a0=function(t){return!1});var wO=a0||function(t){if(!t||typeof t!="object")return!1;try{if(xO.call(t),zA)try{zA.call(t)}catch{return!0}return t instanceof _2}catch{}return!1},QU=typeof Map=="function"&&Map.prototype?Map:null,x2=typeof Set=="function"&&Set.prototype?Set:null,s0;x2||(s0=function(t){return!1});var LA=QU?Map.prototype.has:null,bO=x2?Set.prototype.has:null;!s0&&!bO&&(s0=function(t){return!1});var SO=s0||function(t){if(!t||typeof t!="object")return!1;try{if(bO.call(t),LA)try{LA.call(t)}catch{return!0}return t instanceof x2}catch{}return!1},BA=cO,DA=WU;if(l2()||H0()){var r1=Symbol.iterator;qg.exports=function(t){if(t!=null&&typeof t[r1]<"u")return t[r1]();if(BA(t))return Array.prototype[r1].call(t)}}else{var eV=HU(),tV=_O,NA=Ms,rV=NA("%Map%",!0),nV=NA("%Set%",!0),La=wa,$A=La("Array.prototype.push"),UA=La("String.prototype.charCodeAt"),iV=La("String.prototype.slice"),oV=function(t,i){var a=t.length;if(i+1>=a)return i+1;var u=UA(t,i);if(u<55296||u>56319)return i+1;var f=UA(t,i+1);return f<56320||f>57343?i+1:i+2},n1=function(t){var i=0;return{next:function(){var u=i>=t.length,f;return u||(f=t[i],i+=1),{done:u,value:f}}}},VA=function(t,i){if(eV(t)||BA(t))return n1(t);if(tV(t)){var a=0;return{next:function(){var f=oV(t,a),d=iV(t,a,f);return a=f,{done:f>t.length,value:d}}}}if(i&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()};if(!rV&&!nV)qg.exports=function(t){if(t!=null)return VA(t,!0)};else{var aV=wO,sV=SO,GA=La("Map.prototype.forEach",!0),WA=La("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var HA=La("Map.prototype.iterator",!0),ZA=La("Set.prototype.iterator",!0);var XA=La("Map.prototype.@@iterator",!0)||La("Map.prototype._es6-shim iterator_",!0),qA=La("Set.prototype.@@iterator",!0)||La("Set.prototype._es6-shim iterator_",!0),lV=function(t){if(aV(t)){if(HA)return DA(HA(t));if(XA)return XA(t);if(GA){var i=[];return GA(t,function(u,f){$A(i,[f,u])}),n1(i)}}if(sV(t)){if(ZA)return DA(ZA(t));if(qA)return qA(t);if(WA){var a=[];return WA(t,function(u){$A(a,u)}),n1(a)}}};qg.exports=function(t){return lV(t)||VA(t)}}}var uV=qg.exports,KA=function(e){return e!==e},EO=function(t,i){return t===0&&i===0?1/t===1/i:!!(t===i||KA(t)&&KA(i))},cV=EO,TO=function(){return typeof Object.is=="function"?Object.is:cV},hV=TO,fV=kc,dV=function(){var t=hV();return fV(Object,{is:t},{is:function(){return Object.is!==t}}),t},pV=kc,mV=Ef,gV=EO,PO=TO,yV=dV,AO=mV(PO(),Object);pV(AO,{getPolyfill:PO,implementation:gV,shim:yV});var vV=AO,_V={}.toString,xV=Array.isArray||function(e){return _V.call(e)=="[object Array]"},wV=Ef,IO=wa,bV=Ms,sw=bV("%ArrayBuffer%",!0),Kg=IO("ArrayBuffer.prototype.byteLength",!0),SV=IO("Object.prototype.toString"),JA=!!sw&&!Kg&&new sw(0).slice,YA=!!JA&&wV(JA),CO=Kg||YA?function(t){if(!t||typeof t!="object")return!1;try{return Kg?Kg(t):YA(t,0),!0}catch{return!1}}:sw?function(t){return SV(t)==="[object ArrayBuffer]"}:function(t){return!1},EV=Date.prototype.getDay,TV=function(t){try{return EV.call(t),!0}catch{return!1}},PV=Object.prototype.toString,AV="[object Date]",IV=Mc(),CV=function(t){return typeof t!="object"||t===null?!1:IV?TV(t):PV.call(t)===AV},lw=wa,kO=Mc(),MO,OO,uw,cw;if(kO){MO=lw("Object.prototype.hasOwnProperty"),OO=lw("RegExp.prototype.exec"),uw={};var i1=function(){throw uw};cw={toString:i1,valueOf:i1},typeof Symbol.toPrimitive=="symbol"&&(cw[Symbol.toPrimitive]=i1)}var kV=lw("Object.prototype.toString"),MV=Object.getOwnPropertyDescriptor,OV="[object RegExp]",FV=kO?function(t){if(!t||typeof t!="object")return!1;var i=MV(t,"lastIndex"),a=i&&MO(i,"value");if(!a)return!1;try{OO(t,cw)}catch(u){return u===uw}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:kV(t)===OV},RV=wa,QA=RV("SharedArrayBuffer.prototype.byteLength",!0),jV=QA?function(t){if(!t||typeof t!="object")return!1;try{return QA(t),!0}catch{return!1}}:function(t){return!1},zV=Number.prototype.toString,LV=function(t){try{return zV.call(t),!0}catch{return!1}},BV=Object.prototype.toString,DV="[object Number]",NV=Mc(),$V=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:NV?LV(t):BV.call(t)===DV},FO=wa,UV=FO("Boolean.prototype.toString"),VV=FO("Object.prototype.toString"),GV=function(t){try{return UV(t),!0}catch{return!1}},WV="[object Boolean]",HV=Mc(),ZV=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:HV&&Symbol.toStringTag in t?GV(t):VV(t)===WV},hw={exports:{}},XV=Object.prototype.toString,qV=l2();if(qV){var KV=Symbol.prototype.toString,JV=/^Symbol\(.*\)$/,YV=function(t){return typeof t.valueOf()!="symbol"?!1:JV.test(KV.call(t))};hw.exports=function(t){if(typeof t=="symbol")return!0;if(XV.call(t)!=="[object Symbol]")return!1;try{return YV(t)}catch{return!1}}}else hw.exports=function(t){return!1};var QV=hw.exports,fw={exports:{}},eI=typeof BigInt<"u"&&BigInt,e7=function(){return typeof eI=="function"&&typeof BigInt=="function"&&typeof eI(42)=="bigint"&&typeof BigInt(42)=="bigint"},t7=e7();if(t7){var r7=BigInt.prototype.valueOf,n7=function(t){try{return r7.call(t),!0}catch{}return!1};fw.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:n7(t)}}else fw.exports=function(t){return!1};var i7=fw.exports,o7=_O,a7=$V,s7=ZV,l7=QV,u7=i7,c7=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(o7(t))return"String";if(a7(t))return"Number";if(s7(t))return"Boolean";if(l7(t))return"Symbol";if(u7(t))return"BigInt"},l0=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,tI=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,u0;l0||(u0=function(t){return!1});var dw=l0?l0.prototype.has:null,o1=tI?tI.prototype.has:null;!u0&&!dw&&(u0=function(t){return!1});var h7=u0||function(t){if(!t||typeof t!="object")return!1;try{if(dw.call(t,dw),o1)try{o1.call(t,o1)}catch{return!0}return t instanceof l0}catch{}return!1},pw={exports:{}},f7=Ms,RO=wa,d7=f7("%WeakSet%",!0),a1=RO("WeakSet.prototype.has",!0);if(a1){var s1=RO("WeakMap.prototype.has",!0);pw.exports=function(t){if(!t||typeof t!="object")return!1;try{if(a1(t,a1),s1)try{s1(t,s1)}catch{return!0}return t instanceof d7}catch{}return!1}}else pw.exports=function(t){return!1};var p7=pw.exports,m7=wO,g7=SO,y7=h7,v7=p7,_7=function(t){if(t&&typeof t=="object"){if(m7(t))return"Map";if(g7(t))return"Set";if(y7(t))return"WeakMap";if(v7(t))return"WeakSet"}return!1},jO=Function.prototype.toString,Uh=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,mw,Jg;if(typeof Uh=="function"&&typeof Object.defineProperty=="function")try{mw=Object.defineProperty({},"length",{get:function(){throw Jg}}),Jg={},Uh(function(){throw 42},null,mw)}catch(e){e!==Jg&&(Uh=null)}else Uh=null;var x7=/^\s*class\b/,gw=function(t){try{var i=jO.call(t);return x7.test(i)}catch{return!1}},l1=function(t){try{return gw(t)?!1:(jO.call(t),!0)}catch{return!1}},Yg=Object.prototype.toString,w7="[object Object]",b7="[object Function]",S7="[object GeneratorFunction]",E7="[object HTMLAllCollection]",T7="[object HTML document.all class]",P7="[object HTMLCollection]",A7=typeof Symbol=="function"&&!!Symbol.toStringTag,I7=!(0 in[,]),yw=function(){return!1};if(typeof document=="object"){var C7=document.all;Yg.call(C7)===Yg.call(document.all)&&(yw=function(t){if((I7||!t)&&(typeof t>"u"||typeof t=="object"))try{var i=Yg.call(t);return(i===E7||i===T7||i===P7||i===w7)&&t("")==null}catch{}return!1})}var k7=Uh?function(t){if(yw(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Uh(t,null,mw)}catch(i){if(i!==Jg)return!1}return!gw(t)&&l1(t)}:function(t){if(yw(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(A7)return l1(t);if(gw(t))return!1;var i=Yg.call(t);return i!==b7&&i!==S7&&!/^\[object HTML/.test(i)?!1:l1(t)},M7=k7,O7=Object.prototype.toString,zO=Object.prototype.hasOwnProperty,F7=function(t,i,a){for(var u=0,f=t.length;u<f;u++)zO.call(t,u)&&(a==null?i(t[u],u,t):i.call(a,t[u],u,t))},R7=function(t,i,a){for(var u=0,f=t.length;u<f;u++)a==null?i(t.charAt(u),u,t):i.call(a,t.charAt(u),u,t)},j7=function(t,i,a){for(var u in t)zO.call(t,u)&&(a==null?i(t[u],u,t):i.call(a,t[u],u,t))},z7=function(t,i,a){if(!M7(i))throw new TypeError("iterator must be a function");var u;arguments.length>=3&&(u=a),O7.call(t)==="[object Array]"?F7(t,i,u):typeof t=="string"?R7(t,i,u):j7(t,i,u)},L7=z7,B7=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],u1=B7,D7=typeof globalThis>"u"?$a:globalThis,N7=function(){for(var t=[],i=0;i<u1.length;i++)typeof D7[u1[i]]=="function"&&(t[t.length]=u1[i]);return t},c0=L7,$7=N7,rI=Ef,w2=wa,Qg=h2,U7=w2("Object.prototype.toString"),LO=Mc(),nI=typeof globalThis>"u"?$a:globalThis,vw=$7(),b2=w2("String.prototype.slice"),c1=Object.getPrototypeOf,V7=w2("Array.prototype.indexOf",!0)||function(t,i){for(var a=0;a<t.length;a+=1)if(t[a]===i)return a;return-1},h0={__proto__:null};LO&&Qg&&c1?c0(vw,function(e){var t=new nI[e];if(Symbol.toStringTag in t){var i=c1(t),a=Qg(i,Symbol.toStringTag);if(!a){var u=c1(i);a=Qg(u,Symbol.toStringTag)}h0["$"+e]=rI(a.get)}}):c0(vw,function(e){var t=new nI[e],i=t.slice||t.set;i&&(h0["$"+e]=rI(i))});var G7=function(t){var i=!1;return c0(h0,function(a,u){if(!i)try{"$"+a(t)===u&&(i=b2(u,1))}catch{}}),i},W7=function(t){var i=!1;return c0(h0,function(a,u){if(!i)try{a(t),i=b2(u,1)}catch{}}),i},H7=function(t){if(!t||typeof t!="object")return!1;if(!LO){var i=b2(U7(t),8,-1);return V7(vw,i)>-1?i:i!=="Object"?!1:W7(t)}return Qg?G7(t):null},Z7=wa,iI=Z7("ArrayBuffer.prototype.byteLength",!0),X7=CO,q7=function(t){return X7(t)?iI?iI(t):t.byteLength:NaN},BO=I$,Os=wa,oI=Y$,K7=Ms,mf=uV,J7=vO,aI=vV,sI=cO,lI=xV,uI=CO,cI=CV,hI=FV,fI=jV,dI=s2,pI=c7,mI=_7,gI=H7,yI=q7,vI=Os("SharedArrayBuffer.prototype.byteLength",!0),_I=Os("Date.prototype.getTime"),h1=Object.getPrototypeOf,xI=Os("Object.prototype.toString"),f0=K7("%Set%",!0),_w=Os("Map.prototype.has",!0),d0=Os("Map.prototype.get",!0),wI=Os("Map.prototype.size",!0),p0=Os("Set.prototype.add",!0),DO=Os("Set.prototype.delete",!0),m0=Os("Set.prototype.has",!0),ey=Os("Set.prototype.size",!0);function bI(e,t,i,a){for(var u=mf(e),f;(f=u.next())&&!f.done;)if(Xa(t,f.value,i,a))return DO(e,f.value),!0;return!1}function NO(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function Y7(e,t,i,a,u,f){var d=NO(i);if(d!=null)return d;var l=d0(t,d),w=BO({},u,{strict:!1});return typeof l>"u"&&!_w(t,d)||!Xa(a,l,w,f)?!1:!_w(e,d)&&Xa(a,l,w,f)}function Q7(e,t,i){var a=NO(i);return a??(m0(t,a)&&!m0(e,a))}function SI(e,t,i,a,u,f){for(var d=mf(e),l,w;(l=d.next())&&!l.done;)if(w=l.value,Xa(i,w,u,f)&&Xa(a,d0(t,w),u,f))return DO(e,w),!0;return!1}function Xa(e,t,i,a){var u=i||{};if(u.strict?aI(e,t):e===t)return!0;var f=pI(e),d=pI(t);if(f!==d)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return u.strict?aI(e,t):e==t;var l=a.has(e),w=a.has(t),E;if(l&&w){if(a.get(e)===a.get(t))return!0}else E={};return l||a.set(e,E),w||a.set(t,E),r9(e,t,u,a)}function EI(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function e9(e,t,i,a){if(ey(e)!==ey(t))return!1;for(var u=mf(e),f=mf(t),d,l,w;(d=u.next())&&!d.done;)if(d.value&&typeof d.value=="object")w||(w=new f0),p0(w,d.value);else if(!m0(t,d.value)){if(i.strict||!Q7(e,t,d.value))return!1;w||(w=new f0),p0(w,d.value)}if(w){for(;(l=f.next())&&!l.done;)if(l.value&&typeof l.value=="object"){if(!bI(w,l.value,i.strict,a))return!1}else if(!i.strict&&!m0(e,l.value)&&!bI(w,l.value,i.strict,a))return!1;return ey(w)===0}return!0}function t9(e,t,i,a){if(wI(e)!==wI(t))return!1;for(var u=mf(e),f=mf(t),d,l,w,E,I,b;(d=u.next())&&!d.done;)if(E=d.value[0],I=d.value[1],E&&typeof E=="object")w||(w=new f0),p0(w,E);else if(b=d0(t,E),typeof b>"u"&&!_w(t,E)||!Xa(I,b,i,a)){if(i.strict||!Y7(e,t,E,I,i,a))return!1;w||(w=new f0),p0(w,E)}if(w){for(;(l=f.next())&&!l.done;)if(E=l.value[0],b=l.value[1],E&&typeof E=="object"){if(!SI(w,e,E,b,i,a))return!1}else if(!i.strict&&(!e.has(E)||!Xa(d0(e,E),b,i,a))&&!SI(w,e,E,b,BO({},i,{strict:!1}),a))return!1;return ey(w)===0}return!0}function r9(e,t,i,a){var u,f;if(typeof e!=typeof t||e==null||t==null||xI(e)!==xI(t)||sI(e)!==sI(t))return!1;var d=lI(e),l=lI(t);if(d!==l)return!1;var w=e instanceof Error,E=t instanceof Error;if(w!==E||(w||E)&&(e.name!==t.name||e.message!==t.message))return!1;var I=hI(e),b=hI(t);if(I!==b||(I||b)&&(e.source!==t.source||oI(e)!==oI(t)))return!1;var T=cI(e),R=cI(t);if(T!==R||(T||R)&&_I(e)!==_I(t)||i.strict&&h1&&h1(e)!==h1(t))return!1;var L=gI(e),j=gI(t);if(L!==j)return!1;if(L||j){if(e.length!==t.length)return!1;for(u=0;u<e.length;u++)if(e[u]!==t[u])return!1;return!0}var le=EI(e),K=EI(t);if(le!==K)return!1;if(le||K){if(e.length!==t.length)return!1;for(u=0;u<e.length;u++)if(e[u]!==t[u])return!1;return!0}var Z=uI(e),W=uI(t);if(Z!==W)return!1;if(Z||W)return yI(e)!==yI(t)?!1:typeof Uint8Array=="function"&&Xa(new Uint8Array(e),new Uint8Array(t),i,a);var ae=fI(e),q=fI(t);if(ae!==q)return!1;if(ae||q)return vI(e)!==vI(t)?!1:typeof Uint8Array=="function"&&Xa(new Uint8Array(e),new Uint8Array(t),i,a);if(typeof e!=typeof t)return!1;var V=dI(e),P=dI(t);if(V.length!==P.length)return!1;for(V.sort(),P.sort(),u=V.length-1;u>=0;u--)if(V[u]!=P[u])return!1;for(u=V.length-1;u>=0;u--)if(f=V[u],!Xa(e[f],t[f],i,a))return!1;var z=mI(e),B=mI(t);return z!==B?!1:z==="Set"||B==="Set"?e9(e,t,i,a):z==="Map"?t9(e,t,i,a):!0}var n9=function(t,i,a){return Xa(t,i,a,J7())};const i9=yf(n9);var o9=Object.defineProperty,nn=(e,t)=>o9(e,"name",{value:t,configurable:!0}),a9=class{constructor(t){this.direction=!1,this.compareProperties=!0;var i,a,u;this.precision=10**-((i=t==null?void 0:t.precision)!=null?i:17),this.direction=(a=t==null?void 0:t.direction)!=null?a:!1,this.compareProperties=(u=t==null?void 0:t.compareProperties)!=null?u:!0}compare(t,i){if(t.type!==i.type||!qd(t,i))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,i.coordinates);case"LineString":return this.compareLine(t.coordinates,i.coordinates);case"Polygon":return this.comparePolygon(t,i);case"GeometryCollection":return this.compareGeometryCollection(t,i);case"Feature":return this.compareFeature(t,i);case"FeatureCollection":return this.compareFeatureCollection(t,i);default:if(t.type.startsWith("Multi")){const a=xw(t),u=xw(i);return a.every(f=>u.some(d=>this.compare(f,d)))}}return!1}compareCoord(t,i){return t.length===i.length&&t.every((a,u)=>Math.abs(a-i[u])<this.precision)}compareLine(t,i,a=0,u=!1){if(!qd(t,i))return!1;const f=t;let d=i;if(u&&!this.compareCoord(f[0],d[0])){const w=this.fixStartIndex(d,f);if(w)d=w;else return!1}const l=this.compareCoord(f[a],d[a]);return this.direction||l?this.comparePath(f,d):this.compareCoord(f[a],d[d.length-(1+a)])?this.comparePath(f.slice().reverse(),d):!1}fixStartIndex(t,i){let a,u=-1;for(let f=0;f<t.length;f++)if(this.compareCoord(t[f],i[0])){u=f;break}return u>=0&&(a=[].concat(t.slice(u,t.length),t.slice(1,u+1))),a}comparePath(t,i){return t.every((a,u)=>this.compareCoord(a,i[u]))}comparePolygon(t,i){if(this.compareLine(t.coordinates[0],i.coordinates[0],1,!0)){const a=t.coordinates.slice(1,t.coordinates.length),u=i.coordinates.slice(1,i.coordinates.length);return a.every(f=>u.some(d=>this.compareLine(f,d,1,!0)))}return!1}compareGeometryCollection(t,i){return qd(t.geometries,i.geometries)&&this.compareBBox(t,i)&&t.geometries.every((a,u)=>this.compare(a,i.geometries[u]))}compareFeature(t,i){return t.id===i.id&&(this.compareProperties?i9(t.properties,i.properties):!0)&&this.compareBBox(t,i)&&this.compare(t.geometry,i.geometry)}compareFeatureCollection(t,i){return qd(t.features,i.features)&&this.compareBBox(t,i)&&t.features.every((a,u)=>this.compare(a,i.features[u]))}compareBBox(t,i){return!t.bbox&&!i.bbox||(t.bbox&&i.bbox?this.compareCoord(t.bbox,i.bbox):!1)}};nn(a9,"GeojsonEquality");function qd(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}nn(qd,"sameLength");function xw(e){return e.coordinates.map(t=>({type:e.type.replace("Multi",""),coordinates:t}))}nn(xw,"explode");var Uo=63710088e-1,$O={centimeters:Uo*100,centimetres:Uo*100,degrees:360/(2*Math.PI),feet:Uo*3.28084,inches:Uo*39.37,kilometers:Uo/1e3,kilometres:Uo/1e3,meters:Uo,metres:Uo,miles:Uo/1609.344,millimeters:Uo*1e3,millimetres:Uo*1e3,nauticalmiles:Uo/1852,radians:1,yards:Uo*1.0936},TI={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Cs(e,t,i={}){const a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}nn(Cs,"feature");function s9(e,t,i={}){switch(e){case"Point":return xs(t).geometry;case"LineString":return ll(t).geometry;case"Polygon":return X0(t).geometry;case"MultiPoint":return VO(t).geometry;case"MultiLineString":return UO(t).geometry;case"MultiPolygon":return GO(t).geometry;default:throw new Error(e+" is invalid")}}nn(s9,"geometry");function xs(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!gf(e[0])||!gf(e[1]))throw new Error("coordinates must contain numbers");return Cs({type:"Point",coordinates:e},t,i)}nn(xs,"point");function l9(e,t,i={}){return q0(e.map(a=>xs(a,t)),i)}nn(l9,"points");function X0(e,t,i={}){for(const u of e){if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(u[u.length-1].length!==u[0].length)throw new Error("First and last Position are not equivalent.");for(let f=0;f<u[u.length-1].length;f++)if(u[u.length-1][f]!==u[0][f])throw new Error("First and last Position are not equivalent.")}return Cs({type:"Polygon",coordinates:e},t,i)}nn(X0,"polygon");function u9(e,t,i={}){return q0(e.map(a=>X0(a,t)),i)}nn(u9,"polygons");function ll(e,t,i={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Cs({type:"LineString",coordinates:e},t,i)}nn(ll,"lineString");function c9(e,t,i={}){return q0(e.map(a=>ll(a,t)),i)}nn(c9,"lineStrings");function q0(e,t={}){const i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=e,i}nn(q0,"featureCollection");function UO(e,t,i={}){return Cs({type:"MultiLineString",coordinates:e},t,i)}nn(UO,"multiLineString");function VO(e,t,i={}){return Cs({type:"MultiPoint",coordinates:e},t,i)}nn(VO,"multiPoint");function GO(e,t,i={}){return Cs({type:"MultiPolygon",coordinates:e},t,i)}nn(GO,"multiPolygon");function h9(e,t,i={}){return Cs({type:"GeometryCollection",geometries:e},t,i)}nn(h9,"geometryCollection");function f9(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const i=Math.pow(10,t||0);return Math.round(e*i)/i}nn(f9,"round");function WO(e,t="kilometers"){const i=$O[t];if(!i)throw new Error(t+" units is invalid");return e*i}nn(WO,"radiansToLength");function S2(e,t="kilometers"){const i=$O[t];if(!i)throw new Error(t+" units is invalid");return e/i}nn(S2,"lengthToRadians");function d9(e,t){return HO(S2(e,t))}nn(d9,"lengthToDegrees");function p9(e){let t=e%360;return t<0&&(t+=360),t}nn(p9,"bearingToAzimuth");function HO(e){return e%(2*Math.PI)*180/Math.PI}nn(HO,"radiansToDegrees");function m9(e){return e%360*Math.PI/180}nn(m9,"degreesToRadians");function g9(e,t="kilometers",i="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return WO(S2(e,t),i)}nn(g9,"convertLength");function y9(e,t="meters",i="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");const a=TI[t];if(!a)throw new Error("invalid original units");const u=TI[i];if(!u)throw new Error("invalid final units");return e/a*u}nn(y9,"convertArea");function gf(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}nn(gf,"isNumber");function E2(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}nn(E2,"isObject");function v9(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!gf(t))throw new Error("bbox must only contain numbers")})}nn(v9,"validateBBox");function _9(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}nn(_9,"validateId");var x9=Object.defineProperty,ku=(e,t)=>x9(e,"name",{value:t,configurable:!0});function ZO(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}ku(ZO,"getCoord");function w9(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}ku(w9,"getCoords");function XO(e){if(e.length>1&&gf(e[0])&&gf(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return XO(e[0]);throw new Error("coordinates must only contain numbers")}ku(XO,"containsNumber");function b9(e,t,i){if(!t||!i)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.type)}ku(b9,"geojsonType");function S9(e,t,i){if(!e)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.geometry.type)}ku(S9,"featureOf");function E9(e,t,i){if(!e)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+i+", FeatureCollection required");for(const a of e.features){if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!a.geometry||a.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+a.geometry.type)}}ku(E9,"collectionOf");function qO(e){return e.type==="Feature"?e.geometry:e}ku(qO,"getGeom");function T9(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}ku(T9,"getType");var P9=Object.defineProperty,Ri=(e,t)=>P9(e,"name",{value:t,configurable:!0});function Pf(e,t,i){if(e!==null)for(var a,u,f,d,l,w,E,I=0,b=0,T,R=e.type,L=R==="FeatureCollection",j=R==="Feature",le=L?e.features.length:1,K=0;K<le;K++){E=L?e.features[K].geometry:j?e.geometry:e,T=E?E.type==="GeometryCollection":!1,l=T?E.geometries.length:1;for(var Z=0;Z<l;Z++){var W=0,ae=0;if(d=T?E.geometries[Z]:E,d!==null){w=d.coordinates;var q=d.type;switch(I=i&&(q==="Polygon"||q==="MultiPolygon")?1:0,q){case null:break;case"Point":if(t(w,b,K,W,ae)===!1)return!1;b++,W++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(t(w[a],b,K,W,ae)===!1)return!1;b++,q==="MultiPoint"&&W++}q==="LineString"&&W++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(u=0;u<w[a].length-I;u++){if(t(w[a][u],b,K,W,ae)===!1)return!1;b++}q==="MultiLineString"&&W++,q==="Polygon"&&ae++}q==="Polygon"&&W++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(ae=0,u=0;u<w[a].length;u++){for(f=0;f<w[a][u].length-I;f++){if(t(w[a][u][f],b,K,W,ae)===!1)return!1;b++}ae++}W++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(Pf(d.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}Ri(Pf,"coordEach");function A9(e,t,i,a){var u=i;return Pf(e,function(f,d,l,w,E){d===0&&i===void 0?u=f:u=t(u,f,d,l,w,E)},a),u}Ri(A9,"coordReduce");function KO(e,t){var i;switch(e.type){case"FeatureCollection":for(i=0;i<e.features.length&&t(e.features[i].properties,i)!==!1;i++);break;case"Feature":t(e.properties,0);break}}Ri(KO,"propEach");function I9(e,t,i){var a=i;return KO(e,function(u,f){f===0&&i===void 0?a=u:a=t(a,u,f)}),a}Ri(I9,"propReduce");function JO(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var i=0;i<e.features.length&&t(e.features[i],i)!==!1;i++);}Ri(JO,"featureEach");function C9(e,t,i){var a=i;return JO(e,function(u,f){f===0&&i===void 0?a=u:a=t(a,u,f)}),a}Ri(C9,"featureReduce");function k9(e){var t=[];return Pf(e,function(i){t.push(i)}),t}Ri(k9,"coordAll");function T2(e,t){var i,a,u,f,d,l,w,E,I,b,T=0,R=e.type==="FeatureCollection",L=e.type==="Feature",j=R?e.features.length:1;for(i=0;i<j;i++){for(l=R?e.features[i].geometry:L?e.geometry:e,E=R?e.features[i].properties:L?e.properties:{},I=R?e.features[i].bbox:L?e.bbox:void 0,b=R?e.features[i].id:L?e.id:void 0,w=l?l.type==="GeometryCollection":!1,d=w?l.geometries.length:1,u=0;u<d;u++){if(f=w?l.geometries[u]:l,f===null){if(t(null,T,E,I,b)===!1)return!1;continue}switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(f,T,E,I,b)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<f.geometries.length;a++)if(t(f.geometries[a],T,E,I,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}Ri(T2,"geomEach");function M9(e,t,i){var a=i;return T2(e,function(u,f,d,l,w){f===0&&i===void 0?a=u:a=t(a,u,f,d,l,w)}),a}Ri(M9,"geomReduce");function K0(e,t){T2(e,function(i,a,u,f,d){var l=i===null?null:i.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(Cs(i,u,{bbox:f,id:d}),a,0)===!1?!1:void 0}var w;switch(l){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon";break}for(var E=0;E<i.coordinates.length;E++){var I=i.coordinates[E],b={type:w,coordinates:I};if(t(Cs(b,u),a,E)===!1)return!1}})}Ri(K0,"flattenEach");function O9(e,t,i){var a=i;return K0(e,function(u,f,d){f===0&&d===0&&i===void 0?a=u:a=t(a,u,f,d)}),a}Ri(O9,"flattenReduce");function YO(e,t){K0(e,function(i,a,u){var f=0;if(i.geometry){var d=i.geometry.type;if(!(d==="Point"||d==="MultiPoint")){var l,w=0,E=0,I=0;if(Pf(i,function(b,T,R,L,j){if(l===void 0||a>w||L>E||j>I){l=b,w=a,E=L,I=j,f=0;return}var le=ll([l,b],i.properties);if(t(le,a,u,j,f)===!1)return!1;f++,l=b})===!1)return!1}}})}Ri(YO,"segmentEach");function F9(e,t,i){var a=i,u=!1;return YO(e,function(f,d,l,w,E){u===!1&&i===void 0?a=f:a=t(a,f,d,l,w,E),u=!0}),a}Ri(F9,"segmentReduce");function QO(e,t){if(!e)throw new Error("geojson is required");K0(e,function(i,a,u){if(i.geometry!==null){var f=i.geometry.type,d=i.geometry.coordinates;switch(f){case"LineString":if(t(i,a,u,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<d.length;l++)if(t(ll(d[l],i.properties),a,u,l)===!1)return!1;break}}})}Ri(QO,"lineEach");function R9(e,t,i){var a=i;return QO(e,function(u,f,d,l){f===0&&i===void 0?a=u:a=t(a,u,f,d,l)}),a}Ri(R9,"lineReduce");function j9(e,t){if(t=t||{},!E2(t))throw new Error("options is invalid");var i=t.featureIndex||0,a=t.multiFeatureIndex||0,u=t.geometryIndex||0,f=t.segmentIndex||0,d=t.properties,l;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),d=d||e.features[i].properties,l=e.features[i].geometry;break;case"Feature":d=d||e.properties,l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var w=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=w.length+f-1),ll([w[f],w[f+1]],d,t);case"Polygon":return u<0&&(u=w.length+u),f<0&&(f=w[u].length+f-1),ll([w[u][f],w[u][f+1]],d,t);case"MultiLineString":return a<0&&(a=w.length+a),f<0&&(f=w[a].length+f-1),ll([w[a][f],w[a][f+1]],d,t);case"MultiPolygon":return a<0&&(a=w.length+a),u<0&&(u=w[a].length+u),f<0&&(f=w[a][u].length-f-1),ll([w[a][u][f],w[a][u][f+1]],d,t)}throw new Error("geojson is invalid")}Ri(j9,"findSegment");function z9(e,t){if(t=t||{},!E2(t))throw new Error("options is invalid");var i=t.featureIndex||0,a=t.multiFeatureIndex||0,u=t.geometryIndex||0,f=t.coordIndex||0,d=t.properties,l;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),d=d||e.features[i].properties,l=e.features[i].geometry;break;case"Feature":d=d||e.properties,l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var w=l.coordinates;switch(l.type){case"Point":return xs(w,d,t);case"MultiPoint":return a<0&&(a=w.length+a),xs(w[a],d,t);case"LineString":return f<0&&(f=w.length+f),xs(w[f],d,t);case"Polygon":return u<0&&(u=w.length+u),f<0&&(f=w[u].length+f),xs(w[u][f],d,t);case"MultiLineString":return a<0&&(a=w.length+a),f<0&&(f=w[a].length+f),xs(w[a][f],d,t);case"MultiPolygon":return a<0&&(a=w.length+a),u<0&&(u=w[a].length+u),f<0&&(f=w[a][u].length-f),xs(w[a][u][f],d,t)}throw new Error("geojson is invalid")}Ri(z9,"findPoint");function L9(e,t){var i=0,a=0,u=0,f=0,d=0,l=0,w=0,E=0,I=null,b=null,T=e[0],R=e[1],L=t.length;for(i;i<L;i++){a=0;var j=t[i].length-1,le=t[i];if(I=le[0],I[0]!==le[j][0]&&I[1]!==le[j][1])throw new Error("First and last coordinates in a ring must be the same");for(d=I[0]-T,l=I[1]-R,a;a<j;a++){if(b=le[a+1],E=b[1]-R,l<0&&E<0||l>0&&E>0){I=b,l=E,d=I[0]-T;continue}if(w=b[0]-e[0],E>0&&l<=0){if(f=d*E-w*l,f>0)u=u+1;else if(f===0)return 0}else if(l>0&&E<=0){if(f=d*E-w*l,f<0)u=u+1;else if(f===0)return 0}else if(E===0&&l<0){if(f=d*E-w*l,f===0)return 0}else if(l===0&&E<0){if(f=d*E-w*l,f===0)return 0}else if(l===0&&E===0){if(w<=0&&d>=0)return 0;if(d<=0&&w>=0)return 0}I=b,l=E,d=w}}return u%2!==0}var B9=Object.defineProperty,e4=(e,t)=>B9(e,"name",{value:t,configurable:!0});function t4(e,t,i={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const a=ZO(e),u=qO(t),f=u.type,d=t.bbox;let l=u.coordinates;if(d&&r4(a,d)===!1)return!1;f==="Polygon"&&(l=[l]);let w=!1;for(var E=0;E<l.length;++E){const I=L9(a,l[E]);if(I===0)return!i.ignoreBoundary;I&&(w=!0)}return w}e4(t4,"booleanPointInPolygon");function r4(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}e4(r4,"inBBox");var D9=Object.defineProperty,N9=(e,t)=>D9(e,"name",{value:t,configurable:!0});function n4(e,t={}){let i=0,a=0,u=0;return Pf(e,function(f){i+=f[0],a+=f[1],u++},!0),xs([i/u,a/u],t.properties)}N9(n4,"centroid");const $9=()=>{const[e,t]=yt.useState(!1);return{detectCountry:yt.useCallback(async(a,u)=>{t(!0);const d=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of d.features)if(t4([a,u],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},f1=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var l;const[u,f]=yt.useState((l=e.properties)==null?void 0:l[t.key]);yt.useEffect(()=>{var w;f((w=e.properties)==null?void 0:w[t.key])},[e]);const d=yt.useCallback(w=>{f(w.currentTarget.value),a&&a(w)},[]);return gt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[gt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:u,onChange:d}),gt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(w=>{if(parseInt(w.tags.admin_level)===t.adminLevel)return gt.jsx("option",{value:w.tags.name},w.id);if(w.type==="node"&&t.adminLevel===9)return gt.jsx("option",{value:w.tags.name},w.id)})})]})},U9=({feature:e,fields:t})=>e.properties?gt.jsxs(gt.Fragment,{children:[t.postcodeField&&gt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,V9=({placeholder:e,defaultValue:t})=>{const[i,a]=yt.useState(t);yt.useEffect(()=>{a(t)},[t]);const u=yt.useCallback(f=>{a(f.currentTarget.value)},[]);return gt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[gt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:u})]})};var g0={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */g0.exports;(function(e,t){(function(){var i,a="4.15.0",u=200,f="Expected a function",d="__lodash_hash_undefined__",l=1,w=2,E=1/0,I=9007199254740991,b="[object Arguments]",T="[object Array]",R="[object Boolean]",L="[object Date]",j="[object Error]",le="[object Function]",K="[object GeneratorFunction]",Z="[object Map]",W="[object Number]",ae="[object Object]",q="[object Promise]",V="[object RegExp]",P="[object Set]",z="[object String]",B="[object Symbol]",ee="[object WeakMap]",X="[object ArrayBuffer]",ye="[object DataView]",ge="[object Float32Array]",fe="[object Float64Array]",ie="[object Int8Array]",he="[object Int16Array]",Y="[object Int32Array]",re="[object Uint8Array]",de="[object Uint8ClampedArray]",be="[object Uint16Array]",Pe="[object Uint32Array]",$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ce=/^\w*$/,Fe=/^\./,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,We=/[\\^$.*+?()[\]{}|]/g,it=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,kt=/^(?:0|[1-9]\d*)$/,pt={};pt[ge]=pt[fe]=pt[ie]=pt[he]=pt[Y]=pt[re]=pt[de]=pt[be]=pt[Pe]=!0,pt[b]=pt[T]=pt[X]=pt[R]=pt[ye]=pt[L]=pt[j]=pt[le]=pt[Z]=pt[W]=pt[ae]=pt[V]=pt[P]=pt[z]=pt[ee]=!1;var xt={};xt[b]=xt[T]=xt[X]=xt[ye]=xt[R]=xt[L]=xt[ge]=xt[fe]=xt[ie]=xt[he]=xt[Y]=xt[Z]=xt[W]=xt[ae]=xt[V]=xt[P]=xt[z]=xt[B]=xt[re]=xt[de]=xt[be]=xt[Pe]=!0,xt[j]=xt[le]=xt[ee]=!1;var Wt=typeof $a=="object"&&$a&&$a.Object===Object&&$a,Ht=typeof self=="object"&&self&&self.Object===Object&&self,lr=Wt||Ht||Function("return this")(),et=t&&!t.nodeType&&t,_r=et&&!0&&e&&!e.nodeType&&e,ur=_r&&_r.exports===et,Vt=ur&&Wt.process,Se=function(){try{return Vt&&Vt.binding("util")}catch{}}(),N=Se&&Se.isTypedArray;function D(H,ve){return H.set(ve[0],ve[1]),H}function _e(H,ve){return H.add(ve),H}function Xe(H,ve,Ue){switch(Ue.length){case 0:return H.call(ve);case 1:return H.call(ve,Ue[0]);case 2:return H.call(ve,Ue[0],Ue[1]);case 3:return H.call(ve,Ue[0],Ue[1],Ue[2])}return H.apply(ve,Ue)}function tt(H,ve){for(var Ue=-1,ut=H?H.length:0;++Ue<ut&&ve(H[Ue],Ue,H)!==!1;);return H}function ht(H,ve){for(var Ue=-1,ut=ve.length,Mt=H.length;++Ue<ut;)H[Mt+Ue]=ve[Ue];return H}function ue(H,ve,Ue,ut){var Mt=-1,St=H?H.length:0;for(ut&&St&&(Ue=H[++Mt]);++Mt<St;)Ue=ve(Ue,H[Mt],Mt,H);return Ue}function M(H,ve){for(var Ue=-1,ut=H?H.length:0;++Ue<ut;)if(ve(H[Ue],Ue,H))return!0;return!1}function U(H){return function(ve){return ve==null?i:ve[H]}}function Ee(H,ve){for(var Ue=-1,ut=Array(H);++Ue<H;)ut[Ue]=ve(Ue);return ut}function Ve(H){return function(ve){return H(ve)}}function nt(H,ve){return H==null?i:H[ve]}function Ge(H){var ve=!1;if(H!=null&&typeof H.toString!="function")try{ve=!!(H+"")}catch{}return ve}function Et(H){var ve=-1,Ue=Array(H.size);return H.forEach(function(ut,Mt){Ue[++ve]=[Mt,ut]}),Ue}function It(H,ve){return function(Ue){return H(ve(Ue))}}function yr(H){var ve=-1,Ue=Array(H.size);return H.forEach(function(ut){Ue[++ve]=ut}),Ue}var Sr=Array.prototype,Rt=Function.prototype,jn=Object.prototype,oi=lr["__core-js_shared__"],ji=function(){var H=/[^.]+$/.exec(oi&&oi.keys&&oi.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),Wn=Rt.toString,Oe=jn.hasOwnProperty,se=Wn.call(Object),oe=jn.toString,xe=RegExp("^"+Wn.call(Oe).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=ur?lr.Buffer:i,Me=lr.Symbol,Be=lr.Uint8Array,Ke=It(Object.getPrototypeOf,Object),Le=Object.create,at=jn.propertyIsEnumerable,ft=Sr.splice,ot=Object.getOwnPropertySymbols,Pt=Ie?Ie.isBuffer:i,qt=It(Object.keys,Object),nr=Math.max,pr=ts(lr,"DataView"),Er=ts(lr,"Map"),hr=ts(lr,"Promise"),Vr=ts(lr,"Set"),Yr=ts(lr,"WeakMap"),on=ts(Object,"create"),wr=!at.call({valueOf:1},"valueOf"),$r=Br(pr),Qr=Br(Er),An=Br(hr),Hn=Br(Vr),Zn=Br(Yr),ea=Me?Me.prototype:i,Mr=ea?ea.valueOf:i,xl=ea?ea.toString:i;function Tr(){}function In(H){var ve=-1,Ue=H?H.length:0;for(this.clear();++ve<Ue;){var ut=H[ve];this.set(ut[0],ut[1])}}function _i(){this.__data__=on?on(null):{}}function Af(H){return this.has(H)&&delete this.__data__[H]}function xi(H){var ve=this.__data__;if(on){var Ue=ve[H];return Ue===d?i:Ue}return Oe.call(ve,H)?ve[H]:i}function Xn(H){var ve=this.__data__;return on?ve[H]!==i:Oe.call(ve,H)}function wl(H,ve){var Ue=this.__data__;return Ue[H]=on&&ve===i?d:ve,this}In.prototype.clear=_i,In.prototype.delete=Af,In.prototype.get=xi,In.prototype.has=Xn,In.prototype.set=wl;function wi(H){var ve=-1,Ue=H?H.length:0;for(this.clear();++ve<Ue;){var ut=H[ve];this.set(ut[0],ut[1])}}function bn(){this.__data__=[]}function Eo(H){var ve=this.__data__,Ue=zs(ve,H);if(Ue<0)return!1;var ut=ve.length-1;return Ue==ut?ve.pop():ft.call(ve,Ue,1),!0}function ba(H){var ve=this.__data__,Ue=zs(ve,H);return Ue<0?i:ve[Ue][1]}function mn(H){return zs(this.__data__,H)>-1}function bl(H,ve){var Ue=this.__data__,ut=zs(Ue,H);return ut<0?Ue.push([H,ve]):Ue[ut][1]=ve,this}wi.prototype.clear=bn,wi.prototype.delete=Eo,wi.prototype.get=ba,wi.prototype.has=mn,wi.prototype.set=bl;function Sn(H){var ve=-1,Ue=H?H.length:0;for(this.clear();++ve<Ue;){var ut=H[ve];this.set(ut[0],ut[1])}}function Fs(){this.__data__={hash:new In,map:new(Er||wi),string:new In}}function ta(H){return jl(this,H).delete(H)}function Mu(H){return jl(this,H).get(H)}function Rs(H){return jl(this,H).has(H)}function ra(H,ve){return jl(this,H).set(H,ve),this}Sn.prototype.clear=Fs,Sn.prototype.delete=ta,Sn.prototype.get=Mu,Sn.prototype.has=Rs,Sn.prototype.set=ra;function Ir(H){var ve=-1,Ue=H?H.length:0;for(this.__data__=new Sn;++ve<Ue;)this.add(H[ve])}function Sl(H){return this.__data__.set(H,d),this}function Ou(H){return this.__data__.has(H)}Ir.prototype.add=Ir.prototype.push=Sl,Ir.prototype.has=Ou;function Qn(H){this.__data__=new wi(H)}function El(){this.__data__=new wi}function Tl(H){return this.__data__.delete(H)}function Pl(H){return this.__data__.get(H)}function Al(H){return this.__data__.has(H)}function js(H,ve){var Ue=this.__data__;if(Ue instanceof wi){var ut=Ue.__data__;if(!Er||ut.length<u-1)return ut.push([H,ve]),this;Ue=this.__data__=new Sn(ut)}return Ue.set(H,ve),this}Qn.prototype.clear=El,Qn.prototype.delete=Tl,Qn.prototype.get=Pl,Qn.prototype.has=Al,Qn.prototype.set=js;function Sa(H,ve){var Ue=zn(H)||Ao(H)?Ee(H.length,String):[],ut=Ue.length,Mt=!!ut;for(var St in H)(ve||Oe.call(H,St))&&!(Mt&&(St=="length"||rs(St,ut)))&&Ue.push(St);return Ue}function Fu(H,ve,Ue){(Ue!==i&&!Po(H[ve],Ue)||typeof ve=="number"&&Ue===i&&!(ve in H))&&(H[ve]=Ue)}function Oc(H,ve,Ue){var ut=H[ve];(!(Oe.call(H,ve)&&Po(ut,Ue))||Ue===i&&!(ve in H))&&(H[ve]=Ue)}function zs(H,ve){for(var Ue=H.length;Ue--;)if(Po(H[Ue][0],ve))return Ue;return-1}function If(H,ve){return H&&Rl(ve,po(ve),H)}function bi(H,ve,Ue,ut,Mt,St,Zt){var Jt;if(ut&&(Jt=St?ut(H,Mt,St,Zt):ut(H)),Jt!==i)return Jt;if(!Pi(H))return H;var vr=zn(H);if(vr){if(Jt=Hc(H),!ve)return Fl(H,Jt)}else{var Dr=Yi(H),Fr=Dr==le||Dr==K;if(Co(H))return Mf(H,ve);if(Dr==ae||Dr==b||Fr&&!St){if(Ge(H))return St?H:{};if(Jt=Lu(Fr?{}:H),!ve)return Nc(H,If(Jt,H))}else{if(!xt[Dr])return St?H:{};Jt=Zc(H,Dr,bi,ve)}}Zt||(Zt=new Qn);var Hr=Zt.get(H);if(Hr)return Hr;if(Zt.set(H,Jt),!vr)var an=Ue?Vc(H):po(H);return tt(an||H,function(Ur,gn){an&&(gn=Ur,Ur=H[gn]),Oc(Jt,gn,bi(Ur,ve,Ue,ut,gn,H,Zt))}),Jt}function Ls(H){return Pi(H)?Le(H):{}}var Si=Uc(Bs),Ei=Ta();function Bs(H,ve){return H&&Ei(H,ve,po)}function Ds(H,ve){ve=na(ve,H)?[ve]:Ya(ve);for(var Ue=0,ut=ve.length;H!=null&&Ue<ut;)H=H[ns(ve[Ue++])];return Ue&&Ue==ut?H:i}function Fc(H,ve,Ue){var ut=ve(H);return zn(H)?ut:ht(ut,Ue(H))}function Rc(H){return oe.call(H)}function Ea(H,ve){return H!=null&&ve in Object(H)}function Il(H,ve,Ue,ut,Mt){return H===ve?!0:H==null||ve==null||!Pi(H)&&!zi(ve)?H!==H&&ve!==ve:Cf(H,ve,Il,Ue,ut,Mt)}function Cf(H,ve,Ue,ut,Mt,St){var Zt=zn(H),Jt=zn(ve),vr=T,Dr=T;Zt||(vr=Yi(H),vr=vr==b?ae:vr),Jt||(Dr=Yi(ve),Dr=Dr==b?ae:Dr);var Fr=vr==ae&&!Ge(H),Hr=Dr==ae&&!Ge(ve),an=vr==Dr;if(an&&!Fr)return St||(St=new Qn),Zt||ia(H)?zu(H,ve,Ue,ut,Mt,St):jf(H,ve,vr,Ue,ut,Mt,St);if(!(Mt&w)){var Ur=Fr&&Oe.call(H,"__wrapped__"),gn=Hr&&Oe.call(ve,"__wrapped__");if(Ur||gn){var mo=Ur?H.value():H,Li=gn?ve.value():ve;return St||(St=new Qn),Ue(mo,Li,ut,Mt,St)}}return an?(St||(St=new Qn),zf(H,ve,Ue,ut,Mt,St)):!1}function kf(H,ve,Ue,ut){var Mt=Ue.length,St=Mt,Zt=!ut;if(H==null)return!St;for(H=Object(H);Mt--;){var Jt=Ue[Mt];if(Zt&&Jt[2]?Jt[1]!==H[Jt[0]]:!(Jt[0]in H))return!1}for(;++Mt<St;){Jt=Ue[Mt];var vr=Jt[0],Dr=H[vr],Fr=Jt[1];if(Zt&&Jt[2]){if(Dr===i&&!(vr in H))return!1}else{var Hr=new Qn;if(ut)var an=ut(Dr,Fr,vr,H,ve,Hr);if(!(an===i?Il(Fr,Dr,ut,l|w,Hr):an))return!1}}return!0}function jc(H){if(!Pi(H)||Du(H))return!1;var ve=os(H)||Ge(H)?xe:vt;return ve.test(Br(H))}function zc(H){return zi(H)&&Pa(H.length)&&!!pt[oe.call(H)]}function Lc(H){return typeof H=="function"?H:H==null?as:typeof H=="object"?zn(H)?Ru(H[0],H[1]):Ml(H):Vu(H)}function Cl(H){if(!$s(H))return qt(H);var ve=[];for(var Ue in Object(H))Oe.call(H,Ue)&&Ue!="constructor"&&ve.push(Ue);return ve}function kl(H){if(!Pi(H))return Nu(H);var ve=$s(H),Ue=[];for(var ut in H)ut=="constructor"&&(ve||!Oe.call(H,ut))||Ue.push(ut);return Ue}function Ml(H){var ve=zl(H);return ve.length==1&&ve[0][2]?Wr(ve[0][0],ve[0][1]):function(Ue){return Ue===H||kf(Ue,H,ve)}}function Ru(H,ve){return na(H)&&Ll(ve)?Wr(ns(H),ve):function(Ue){var ut=Ia(Ue,H);return ut===i&&ut===ve?oa(Ue,H):Il(ve,ut,i,l|w)}}function Ol(H,ve,Ue,ut,Mt){if(H!==ve){if(!(zn(ve)||ia(ve)))var St=kl(ve);tt(St||ve,function(Zt,Jt){if(St&&(Jt=Zt,Zt=ve[Jt]),Pi(Zt))Mt||(Mt=new Qn),ho(H,ve,Jt,Ue,Ol,ut,Mt);else{var vr=ut?ut(H[Jt],Zt,Jt+"",H,ve,Mt):i;vr===i&&(vr=Zt),Fu(H,Jt,vr)}})}}function ho(H,ve,Ue,ut,Mt,St,Zt){var Jt=H[Ue],vr=ve[Ue],Dr=Zt.get(vr);if(Dr){Fu(H,Ue,Dr);return}var Fr=St?St(Jt,vr,Ue+"",H,ve,Zt):i,Hr=Fr===i;Hr&&(Fr=vr,zn(vr)||ia(vr)?zn(Jt)?Fr=Jt:fo(Jt)?Fr=Fl(Jt):(Hr=!1,Fr=bi(vr,!0)):Vs(vr)||Ao(vr)?Ao(Jt)?Fr=Gs(Jt):!Pi(Jt)||ut&&os(Jt)?(Hr=!1,Fr=bi(vr,!0)):Fr=Jt:Hr=!1),Hr&&(Zt.set(vr,Fr),Mt(Fr,vr,ut,St,Zt),Zt.delete(vr)),Fu(H,Ue,Fr)}function ju(H){return function(ve){return Ds(ve,H)}}function Ja(H,ve){return ve=nr(ve===i?H.length-1:ve,0),function(){for(var Ue=arguments,ut=-1,Mt=nr(Ue.length-ve,0),St=Array(Mt);++ut<Mt;)St[ut]=Ue[ve+ut];ut=-1;for(var Zt=Array(ve+1);++ut<ve;)Zt[ut]=Ue[ut];return Zt[ve]=St,Xe(H,this,Zt)}}function Cr(H){if(typeof H=="string")return H;if(Aa(H))return xl?xl.call(H):"";var ve=H+"";return ve=="0"&&1/H==-E?"-0":ve}function Ya(H){return zn(H)?H:br(H)}function Mf(H,ve){if(ve)return H.slice();var Ue=new H.constructor(H.length);return H.copy(Ue),Ue}function Qa(H){var ve=new H.constructor(H.byteLength);return new Be(ve).set(new Be(H)),ve}function Of(H,ve){var Ue=ve?Qa(H.buffer):H.buffer;return new H.constructor(Ue,H.byteOffset,H.byteLength)}function es(H,ve,Ue){var ut=ve?Ue(Et(H),!0):Et(H);return ue(ut,D,new H.constructor)}function Ff(H){var ve=new H.constructor(H.source,ct.exec(H));return ve.lastIndex=H.lastIndex,ve}function Bc(H,ve,Ue){var ut=ve?Ue(yr(H),!0):yr(H);return ue(ut,_e,new H.constructor)}function Rf(H){return Mr?Object(Mr.call(H)):{}}function Dc(H,ve){var Ue=ve?Qa(H.buffer):H.buffer;return new H.constructor(Ue,H.byteOffset,H.length)}function Fl(H,ve){var Ue=-1,ut=H.length;for(ve||(ve=Array(ut));++Ue<ut;)ve[Ue]=H[Ue];return ve}function Rl(H,ve,Ue,ut){Ue||(Ue={});for(var Mt=-1,St=ve.length;++Mt<St;){var Zt=ve[Mt],Jt=ut?ut(Ue[Zt],H[Zt],Zt,Ue,H):i;Oc(Ue,Zt,Jt===i?H[Zt]:Jt)}return Ue}function Nc(H,ve){return Rl(H,Gc(H),ve)}function $c(H){return Ja(function(ve,Ue){var ut=-1,Mt=Ue.length,St=Mt>1?Ue[Mt-1]:i,Zt=Mt>2?Ue[2]:i;for(St=H.length>3&&typeof St=="function"?(Mt--,St):i,Zt&&To(Ue[0],Ue[1],Zt)&&(St=Mt<3?i:St,Mt=1),ve=Object(ve);++ut<Mt;){var Jt=Ue[ut];Jt&&H(ve,Jt,ut,St)}return ve})}function Uc(H,ve){return function(Ue,ut){if(Ue==null)return Ue;if(!Io(Ue))return H(Ue,ut);for(var Mt=Ue.length,St=ve?Mt:-1,Zt=Object(Ue);(ve?St--:++St<Mt)&&ut(Zt[St],St,Zt)!==!1;);return Ue}}function Ta(H){return function(ve,Ue,ut){for(var Mt=-1,St=Object(ve),Zt=ut(ve),Jt=Zt.length;Jt--;){var vr=Zt[H?Jt:++Mt];if(Ue(St[vr],vr,St)===!1)break}return ve}}function zu(H,ve,Ue,ut,Mt,St){var Zt=Mt&w,Jt=H.length,vr=ve.length;if(Jt!=vr&&!(Zt&&vr>Jt))return!1;var Dr=St.get(H);if(Dr&&St.get(ve))return Dr==ve;var Fr=-1,Hr=!0,an=Mt&l?new Ir:i;for(St.set(H,ve),St.set(ve,H);++Fr<Jt;){var Ur=H[Fr],gn=ve[Fr];if(ut)var mo=Zt?ut(gn,Ur,Fr,ve,H,St):ut(Ur,gn,Fr,H,ve,St);if(mo!==i){if(mo)continue;Hr=!1;break}if(an){if(!M(ve,function(Li,ko){if(!an.has(ko)&&(Ur===Li||Ue(Ur,Li,ut,Mt,St)))return an.add(ko)})){Hr=!1;break}}else if(!(Ur===gn||Ue(Ur,gn,ut,Mt,St))){Hr=!1;break}}return St.delete(H),St.delete(ve),Hr}function jf(H,ve,Ue,ut,Mt,St,Zt){switch(Ue){case ye:if(H.byteLength!=ve.byteLength||H.byteOffset!=ve.byteOffset)return!1;H=H.buffer,ve=ve.buffer;case X:return!(H.byteLength!=ve.byteLength||!ut(new Be(H),new Be(ve)));case R:case L:case W:return Po(+H,+ve);case j:return H.name==ve.name&&H.message==ve.message;case V:case z:return H==ve+"";case Z:var Jt=Et;case P:var vr=St&w;if(Jt||(Jt=yr),H.size!=ve.size&&!vr)return!1;var Dr=Zt.get(H);if(Dr)return Dr==ve;St|=l,Zt.set(H,ve);var Fr=zu(Jt(H),Jt(ve),ut,Mt,St,Zt);return Zt.delete(H),Fr;case B:if(Mr)return Mr.call(H)==Mr.call(ve)}return!1}function zf(H,ve,Ue,ut,Mt,St){var Zt=Mt&w,Jt=po(H),vr=Jt.length,Dr=po(ve),Fr=Dr.length;if(vr!=Fr&&!Zt)return!1;for(var Hr=vr;Hr--;){var an=Jt[Hr];if(!(Zt?an in ve:Oe.call(ve,an)))return!1}var Ur=St.get(H);if(Ur&&St.get(ve))return Ur==ve;var gn=!0;St.set(H,ve),St.set(ve,H);for(var mo=Zt;++Hr<vr;){an=Jt[Hr];var Li=H[an],ko=ve[an];if(ut)var ka=Zt?ut(ko,Li,an,ve,H,St):ut(Li,ko,an,H,ve,St);if(!(ka===i?Li===ko||Ue(Li,ko,ut,Mt,St):ka)){gn=!1;break}mo||(mo=an=="constructor")}if(gn&&!mo){var ss=H.constructor,Mo=ve.constructor;ss!=Mo&&"constructor"in H&&"constructor"in ve&&!(typeof ss=="function"&&ss instanceof ss&&typeof Mo=="function"&&Mo instanceof Mo)&&(gn=!1)}return St.delete(H),St.delete(ve),gn}function Vc(H){return Fc(H,po,Gc)}function Ns(){var H=Tr.iteratee||Bl;return H=H===Bl?Lc:H,arguments.length?H(arguments[0],arguments[1]):H}function jl(H,ve){var Ue=H.__data__;return Bu(ve)?Ue[typeof ve=="string"?"string":"hash"]:Ue.map}function zl(H){for(var ve=po(H),Ue=ve.length;Ue--;){var ut=ve[Ue],Mt=H[ut];ve[Ue]=[ut,Mt,Ll(Mt)]}return ve}function ts(H,ve){var Ue=nt(H,ve);return jc(Ue)?Ue:i}var Gc=ot?It(ot,Object):aa,Yi=Rc;(pr&&Yi(new pr(new ArrayBuffer(1)))!=ye||Er&&Yi(new Er)!=Z||hr&&Yi(hr.resolve())!=q||Vr&&Yi(new Vr)!=P||Yr&&Yi(new Yr)!=ee)&&(Yi=function(H){var ve=oe.call(H),Ue=ve==ae?H.constructor:i,ut=Ue?Br(Ue):i;if(ut)switch(ut){case $r:return ye;case Qr:return Z;case An:return q;case Hn:return P;case Zn:return ee}return ve});function Wc(H,ve,Ue){ve=na(ve,H)?[ve]:Ya(ve);for(var ut,Mt=-1,Zt=ve.length;++Mt<Zt;){var St=ns(ve[Mt]);if(!(ut=H!=null&&Ue(H,St)))break;H=H[St]}if(ut)return ut;var Zt=H?H.length:0;return!!Zt&&Pa(Zt)&&rs(St,Zt)&&(zn(H)||Ao(H))}function Hc(H){var ve=H.length,Ue=H.constructor(ve);return ve&&typeof H[0]=="string"&&Oe.call(H,"index")&&(Ue.index=H.index,Ue.input=H.input),Ue}function Lu(H){return typeof H.constructor=="function"&&!$s(H)?Ls(Ke(H)):{}}function Zc(H,ve,Ue,ut){var Mt=H.constructor;switch(ve){case X:return Qa(H);case R:case L:return new Mt(+H);case ye:return Of(H,ut);case ge:case fe:case ie:case he:case Y:case re:case de:case be:case Pe:return Dc(H,ut);case Z:return es(H,ut,Ue);case W:case z:return new Mt(H);case V:return Ff(H);case P:return Bc(H,ut,Ue);case B:return Rf(H)}}function rs(H,ve){return ve=ve??I,!!ve&&(typeof H=="number"||kt.test(H))&&H>-1&&H%1==0&&H<ve}function To(H,ve,Ue){if(!Pi(Ue))return!1;var ut=typeof ve;return(ut=="number"?Io(Ue)&&rs(ve,Ue.length):ut=="string"&&ve in Ue)?Po(Ue[ve],H):!1}function na(H,ve){if(zn(H))return!1;var Ue=typeof H;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||H==null||Aa(H)?!0:Ce.test(H)||!$e.test(H)||ve!=null&&H in Object(ve)}function Bu(H){var ve=typeof H;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?H!=="__proto__":H===null}function Du(H){return!!ji&&ji in H}function $s(H){var ve=H&&H.constructor,Ue=typeof ve=="function"&&ve.prototype||jn;return H===Ue}function Ll(H){return H===H&&!Pi(H)}function Wr(H,ve){return function(Ue){return Ue==null?!1:Ue[H]===ve&&(ve!==i||H in Object(Ue))}}function Nu(H){var ve=[];if(H!=null)for(var Ue in Object(H))ve.push(Ue);return ve}var br=Us(function(H){H=Uu(H);var ve=[];return Fe.test(H)&&ve.push(""),H.replace(He,function(Ue,ut,Mt,St){ve.push(Mt?St.replace(it,"$1"):ut||Ue)}),ve});function ns(H){if(typeof H=="string"||Aa(H))return H;var ve=H+"";return ve=="0"&&1/H==-E?"-0":ve}function Br(H){if(H!=null){try{return Wn.call(H)}catch{}try{return H+""}catch{}}return""}function Kr(H){for(var ve=-1,Ue=H?H.length:0,ut=0,Mt=[];++ve<Ue;){var St=H[ve];St&&(Mt[ut++]=St)}return Mt}function is(H,ve){var Ue=zn(H)?tt:Si;return Ue(H,Ns(ve,3))}function Us(H,ve){if(typeof H!="function"||ve&&typeof ve!="function")throw new TypeError(f);var Ue=function(){var ut=arguments,Mt=ve?ve.apply(this,ut):ut[0],St=Ue.cache;if(St.has(Mt))return St.get(Mt);var Zt=H.apply(this,ut);return Ue.cache=St.set(Mt,Zt),Zt};return Ue.cache=new(Us.Cache||Sn),Ue}Us.Cache=Sn;function $u(H){return bi(H,!1,!0)}function Po(H,ve){return H===ve||H!==H&&ve!==ve}function Ao(H){return fo(H)&&Oe.call(H,"callee")&&(!at.call(H,"callee")||oe.call(H)==b)}var zn=Array.isArray;function Io(H){return H!=null&&Pa(H.length)&&!os(H)}function fo(H){return zi(H)&&Io(H)}var Co=Pt||Ws;function Ti(H){if(Io(H)&&(zn(H)||typeof H=="string"||typeof H.splice=="function"||Co(H)||Ao(H)))return!H.length;var ve=Yi(H);if(ve==Z||ve==P)return!H.size;if(wr||$s(H))return!qt(H).length;for(var Ue in H)if(Oe.call(H,Ue))return!1;return!0}function os(H){var ve=Pi(H)?oe.call(H):"";return ve==le||ve==K}function Pa(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=I}function Pi(H){var ve=typeof H;return!!H&&(ve=="object"||ve=="function")}function zi(H){return!!H&&typeof H=="object"}function Vs(H){if(!zi(H)||oe.call(H)!=ae||Ge(H))return!1;var ve=Ke(H);if(ve===null)return!0;var Ue=Oe.call(ve,"constructor")&&ve.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&Wn.call(Ue)==se}function Aa(H){return typeof H=="symbol"||zi(H)&&oe.call(H)==B}var ia=N?Ve(N):zc;function Gs(H){return Rl(H,Ca(H))}function Uu(H){return H==null?"":Cr(H)}function Ia(H,ve,Ue){var ut=H==null?i:Ds(H,ve);return ut===i?Ue:ut}function oa(H,ve){return H!=null&&Wc(H,ve,Ea)}function po(H){return Io(H)?Sa(H):Cl(H)}function Ca(H){return Io(H)?Sa(H,!0):kl(H)}var Or=$c(function(H,ve,Ue){Ol(H,ve,Ue)});function as(H){return H}function Bl(H){return Lc(typeof H=="function"?H:bi(H,!0))}function Vu(H){return na(H)?U(ns(H)):ju(H)}function aa(){return[]}function Ws(){return!1}Tr.compact=Kr,Tr.iteratee=Bl,Tr.keys=po,Tr.keysIn=Ca,Tr.memoize=Us,Tr.merge=Or,Tr.property=Vu,Tr.toPlainObject=Gs,Tr.clone=$u,Tr.eq=Po,Tr.forEach=is,Tr.get=Ia,Tr.hasIn=oa,Tr.identity=as,Tr.isArguments=Ao,Tr.isArray=zn,Tr.isArrayLike=Io,Tr.isArrayLikeObject=fo,Tr.isBuffer=Co,Tr.isEmpty=Ti,Tr.isFunction=os,Tr.isLength=Pa,Tr.isObject=Pi,Tr.isObjectLike=zi,Tr.isPlainObject=Vs,Tr.isSymbol=Aa,Tr.isTypedArray=ia,Tr.stubArray=aa,Tr.stubFalse=Ws,Tr.toString=Uu,Tr.each=is,Tr.VERSION=a,_r&&((_r.exports=Tr)._=Tr,et._=Tr)}).call($a)})(g0,g0.exports);var G9=g0.exports,W9=ty;function ty(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)ty(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)ty(e.geometries[a],t);else if(i==="Feature")ty(e.geometry,t);else if(i==="Polygon")PI(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)PI(e.coordinates[a],t);return e}function PI(e,t){if(e.length!==0){AI(e[0],t);for(var i=1;i<e.length;i++)AI(e[i],!t)}}function AI(e,t){for(var i=0,a=0,u=0,f=e.length,d=f-1;u<f;d=u++){var l=(e[u][0]-e[d][0])*(e[d][1]+e[u][1]),w=i+l;a+=Math.abs(i)>=Math.abs(l)?i-w+l:l-w+i,i=w}i+a>=0!=!!t&&e.reverse()}const H9=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var Z9=H9,Ar=G9,Pg=W9,ry={};Z9.forEach(function(e){if(e.polygon==="all")ry[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),ry[e.key]={},ry[e.key][t]=i}});function X9(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Ar.merge(e,t)}var y0={};y0=function(e,t,i){t=Ar.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:ry,deduplicator:X9},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=f(e):a=u(e),a;function u(w){var E=new Array,I=new Array,b=new Array;function T(q){var V=Ar.clone(q);V.lat=q.center.lat,V.lon=q.center.lon,V.__is_center_placeholder=!0,E.push(V)}function R(q){var V=Ar.clone(q);V.nodes=[];function P(z,B,ee){var X={type:"node",id:"_"+V.type+"/"+V.id+"bounds"+ee,lat:z,lon:B};V.nodes.push(X.id),E.push(X)}P(V.bounds.minlat,V.bounds.minlon,1),P(V.bounds.maxlat,V.bounds.minlon,2),P(V.bounds.maxlat,V.bounds.maxlon,3),P(V.bounds.minlat,V.bounds.maxlon,4),V.nodes.push(V.nodes[0]),V.__is_bounds_placeholder=!0,I.push(V)}function L(q){function V(P,z,B){var ee={type:"node",id:B,lat:P,lon:z};E.push(ee)}Ar.isArray(q.nodes)||(q.nodes=q.geometry.map(function(P){return P!==null?"_anonymous@"+P.lat+"/"+P.lon:"_anonymous@unknown_location"})),q.geometry.forEach(function(P,z){P&&V(P.lat,P.lon,q.nodes[z])})}function j(q){function V(z,B,ee){var X={type:"node",id:ee,lat:z,lon:B};E.push(X)}function P(z,B){if(I.some(function(ye){return ye.type=="way"&&ye.id==B}))return;var ee={type:"way",id:B,nodes:[]};function X(ye,ge){var fe={type:"node",id:"_anonymous@"+ye+"/"+ge,lat:ye,lon:ge};ee.nodes.push(fe.id),E.push(fe)}z.forEach(function(ye){ye?X(ye.lat,ye.lon):ee.nodes.push(void 0)}),I.push(ee)}q.members.forEach(function(z,B){z.type=="node"?z.lat&&V(z.lat,z.lon,z.ref):z.type=="way"&&z.geometry&&(z.ref="_fullGeom"+z.ref,P(z.geometry,z.ref))})}for(var le=0;le<w.elements.length;le++)switch(w.elements[le].type){case"node":var K=w.elements[le];E.push(K);break;case"way":var Z=Ar.clone(w.elements[le]);Z.nodes=Ar.clone(Z.nodes),I.push(Z),Z.center&&T(Z),Z.geometry?L(Z):Z.bounds&&R(Z);break;case"relation":var W=Ar.clone(w.elements[le]);W.members=Ar.clone(W.members),b.push(W);var ae=W.members&&W.members.some(function(q){return q.type=="node"&&q.lat||q.type=="way"&&q.geometry&&q.geometry.length>0});W.center&&T(W),ae?j(W):W.bounds&&R(W);break}return d(E,I,b)}function f(w){var E=new Array,I=new Array,b=new Array;function T(W,ae,q){W.hasAttribute(q)&&(ae[q]=W.getAttribute(q))}function R(W,ae){var q=Ar.clone(W);T(ae,q,"lat"),T(ae,q,"lon"),q.__is_center_placeholder=!0,E.push(q)}function L(W,ae){var q=Ar.clone(W);q.nodes=[];function V(P,z,B){var ee={type:"node",id:"_"+q.type+"/"+q.id+"bounds"+B,lat:P,lon:z};q.nodes.push(ee.id),E.push(ee)}V(ae.getAttribute("minlat"),ae.getAttribute("minlon"),1),V(ae.getAttribute("maxlat"),ae.getAttribute("minlon"),2),V(ae.getAttribute("maxlat"),ae.getAttribute("maxlon"),3),V(ae.getAttribute("minlat"),ae.getAttribute("maxlon"),4),q.nodes.push(q.nodes[0]),q.__is_bounds_placeholder=!0,I.push(q)}function j(W,ae){function q(V,P,z){var B={type:"node",id:z,lat:V,lon:P};return E.push(B),B.id}Ar.isArray(W.nodes)||(W.nodes=[],Ar.each(ae,function(V,P){W.nodes.push("_anonymous@"+V.getAttribute("lat")+"/"+V.getAttribute("lon"))})),Ar.each(ae,function(V,P){V.getAttribute("lat")&&q(V.getAttribute("lat"),V.getAttribute("lon"),W.nodes[P])})}function le(W,ae){function q(P,z,B){var ee={type:"node",id:B,lat:P,lon:z};E.push(ee)}function V(P,z){if(I.some(function(X){return X.type=="way"&&X.id==z}))return;var B={type:"way",id:z,nodes:[]};function ee(X,ye){var ge={type:"node",id:"_anonymous@"+X+"/"+ye,lat:X,lon:ye};B.nodes.push(ge.id),E.push(ge)}Ar.each(P,function(X){X.getAttribute("lat")?ee(X.getAttribute("lat"),X.getAttribute("lon")):B.nodes.push(void 0)}),I.push(B)}Ar.each(ae,function(P,z){W.members[z].type=="node"?P.getAttribute("lat")&&q(P.getAttribute("lat"),P.getAttribute("lon"),W.members[z].ref):W.members[z].type=="way"&&P.getElementsByTagName("nd").length>0&&(W.members[z].ref="_fullGeom"+W.members[z].ref,V(P.getElementsByTagName("nd"),W.members[z].ref))})}Ar.each(w.getElementsByTagName("node"),function(W,ae){var q={};Ar.each(W.getElementsByTagName("tag"),function(P){q[P.getAttribute("k")]=P.getAttribute("v")});var V={type:"node"};T(W,V,"id"),T(W,V,"lat"),T(W,V,"lon"),T(W,V,"version"),T(W,V,"timestamp"),T(W,V,"changeset"),T(W,V,"uid"),T(W,V,"user"),Ar.isEmpty(q)||(V.tags=q),E.push(V)});var K,Z;return Ar.each(w.getElementsByTagName("way"),function(W,ae){var q={},V=[];Ar.each(W.getElementsByTagName("tag"),function(B){q[B.getAttribute("k")]=B.getAttribute("v")});var P=!1;Ar.each(W.getElementsByTagName("nd"),function(B,ee){var X;(X=B.getAttribute("ref"))&&(V[ee]=X),!P&&B.getAttribute("lat")&&(P=!0)});var z={type:"way"};T(W,z,"id"),T(W,z,"version"),T(W,z,"timestamp"),T(W,z,"changeset"),T(W,z,"uid"),T(W,z,"user"),V.length>0&&(z.nodes=V),Ar.isEmpty(q)||(z.tags=q),(K=W.getElementsByTagName("center")[0])&&R(z,K),P?j(z,W.getElementsByTagName("nd")):(Z=W.getElementsByTagName("bounds")[0])&&L(z,Z),I.push(z)}),Ar.each(w.getElementsByTagName("relation"),function(W,ae){var q={},V=[];Ar.each(W.getElementsByTagName("tag"),function(B){q[B.getAttribute("k")]=B.getAttribute("v")});var P=!1;Ar.each(W.getElementsByTagName("member"),function(B,ee){V[ee]={},T(B,V[ee],"ref"),T(B,V[ee],"role"),T(B,V[ee],"type"),(!P&&V[ee].type=="node"&&B.getAttribute("lat")||V[ee].type=="way"&&B.getElementsByTagName("nd").length>0)&&(P=!0)});var z={type:"relation"};T(W,z,"id"),T(W,z,"version"),T(W,z,"timestamp"),T(W,z,"changeset"),T(W,z,"uid"),T(W,z,"user"),V.length>0&&(z.members=V),Ar.isEmpty(q)||(z.tags=q),(K=W.getElementsByTagName("center")[0])&&R(z,K),P?le(z,W.getElementsByTagName("member")):(Z=W.getElementsByTagName("bounds")[0])&&L(z,Z),b.push(z)}),d(E,I,b)}function d(w,E,I){function b(Fe,He){if(typeof He!="object"&&(He={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Fe,He);for(var We in Fe)if(t.uninterestingTags[We]!==!0&&!(He[We]===!0||He[We]===Fe[We]))return!0;return!1}function T(Fe){var He={timestamp:Fe.timestamp,version:Fe.version,changeset:Fe.changeset,user:Fe.user,uid:Fe.uid};for(var We in He)He[We]===void 0&&delete He[We];return He}for(var R=new Object,L=new Object,j=0;j<w.length;j++){var le=w[j];R[le.id]!==void 0&&(le=t.deduplicator(le,R[le.id])),R[le.id]=le,typeof le.tags<"u"&&b(le.tags)&&(L[le.id]=!0)}for(var j=0;j<I.length;j++)if(Ar.isArray(I[j].members))for(var K=0;K<I[j].members.length;K++)I[j].members[K].type=="node"&&(L[I[j].members[K].ref]=!0);for(var Z=new Object,W=new Object,j=0;j<E.length;j++){var ae=E[j];if(Z[ae.id]&&(ae=t.deduplicator(ae,Z[ae.id])),Z[ae.id]=ae,Ar.isArray(ae.nodes))for(var K=0;K<ae.nodes.length;K++)typeof ae.nodes[K]!="object"&&(W[ae.nodes[K]]=!0,ae.nodes[K]=R[ae.nodes[K]])}var q=new Array;for(var V in R){var le=R[V];(!W[V]||L[V])&&q.push(le)}for(var P=new Array,j=0;j<I.length;j++){var z=I[j];P[z.id]&&(z=t.deduplicator(z,P[z.id])),P[z.id]=z}var B={node:{},way:{},relation:{}};for(var V in P){var z=P[V];if(!Ar.isArray(z.members)){t.verbose&&console.warn("Relation",z.type+"/"+z.id,"ignored because it has no members");continue}for(var K=0;K<z.members.length;K++){var ee=z.members[K].type,X=z.members[K].ref;if(typeof X!="number"&&(X=X.replace("_fullGeom","")),!B[ee]){t.verbose&&console.warn("Relation",z.type+"/"+z.id,"member",ee+"/"+X,"ignored because it has an invalid type");continue}typeof B[ee][X]>"u"&&(B[ee][X]=[]),B[ee][X].push({role:z.members[K].role,rel:z.id,reltags:z.tags})}}var ye,ge=[];for(j=0;j<q.length;j++){if(typeof q[j].lon>"u"||typeof q[j].lat>"u"){t.verbose&&console.warn("POI",q[j].type+"/"+q[j].id,"ignored because it lacks coordinates");continue}var fe={type:"Feature",id:q[j].type+"/"+q[j].id,properties:{type:q[j].type,id:q[j].id,tags:q[j].tags||{},relations:B.node[q[j].id]||[],meta:T(q[j])},geometry:{type:"Point",coordinates:[+q[j].lon,+q[j].lat]}};q[j].__is_center_placeholder&&(fe.properties.geometry="center"),i?i(fe):ge.push(fe)}for(var ie=[],he=[],j=0;j<I.length;j++)if(P[I[j].id]===I[j]){if(typeof I[j].tags<"u"&&(I[j].tags.type=="route"||I[j].tags.type=="waterway")){let He=function(We){var it=!1,ct;ct=We.members.filter(function(xt){return xt.type==="way"}),ct=ct.map(function(xt){var Wt=Z[xt.ref];if(Wt===void 0||Wt.nodes===void 0){t.verbose&&console.warn("Route "+We.type+"/"+We.id,"tainted by a missing or incomplete  way",xt.type+"/"+xt.ref),it=!0;return}return{id:xt.ref,role:xt.role,way:Wt,nodes:Wt.nodes.filter(function(Ht){return Ht!==void 0?!0:(it=!0,t.verbose&&console.warn("Route",We.type+"/"+We.id,"tainted by a way",xt.type+"/"+xt.ref,"with a missing node"),!1)})}}),ct=Ar.compact(ct);var vt;vt=d1(ct);var kt=[];if(kt=Ar.compact(vt.map(function(xt){return Ar.compact(xt.map(function(Wt){return[+Wt.lon,+Wt.lat]}))})),kt.length==0)return t.verbose&&console.warn("Route",We.type+"/"+We.id,"contains no coordinates"),!1;var pt={type:"Feature",id:We.type+"/"+We.id,properties:{type:We.type,id:We.id,tags:We.tags||{},relations:B[We.type][We.id]||[],meta:T(We)},geometry:{type:kt.length===1?"LineString":"MultiLineString",coordinates:kt.length===1?kt[0]:kt}};return it&&(t.verbose&&console.warn("Route",We.type+"/"+We.id,"is tainted"),pt.properties.tainted=!0),pt};var $e=He;if(!Ar.isArray(I[j].members)){t.verbose&&console.warn("Route",I[j].type+"/"+I[j].id,"ignored because it has no members");continue}if(I[j].members.forEach(function(We){Z[We.ref]&&!b(Z[We.ref].tags)&&(Z[We.ref].is_skippablerelationmember=!0)}),fe=He(I[j]),fe===!1){t.verbose&&console.warn("Route relation",I[j].type+"/"+I[j].id,"ignored because it has invalid geometry");continue}i?i(Pg(fe)):he.push(fe)}if(typeof I[j].tags<"u"&&(I[j].tags.type=="multipolygon"||I[j].tags.type=="boundary")){let We=function(it,ct){var vt=!1,kt=re?"way":"relation",pt=typeof it.id=="number"?it.id:+it.id.replace("_fullGeom",""),xt;xt=ct.members.filter(function(D){return D.type==="way"}),xt=xt.map(function(D){var _e=Z[D.ref];if(_e===void 0||_e.nodes===void 0){t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"tainted by a missing or incomplete way",D.type+"/"+D.ref),vt=!0;return}return{id:D.ref,role:D.role||"outer",way:_e,nodes:_e.nodes.filter(function(Xe){return Xe!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),xt=Ar.compact(xt);var Wt,Ht;Wt=d1(xt.filter(function(D){return D.role==="outer"})),Ht=d1(xt.filter(function(D){return D.role==="inner"}));var lr;function et(D){var _e=function(M,U){for(var Ee=0;Ee<U.length;Ee++)if(tt(U[Ee],M))return!0;return!1},Xe=function(M){return M.map(function(U){return[+U.lat,+U.lon]})},tt=function(M,U){for(var Ee=M[0],Ve=M[1],nt=!1,Ge=0,Et=U.length-1;Ge<U.length;Et=Ge++){var It=U[Ge][0],yr=U[Ge][1],Sr=U[Et][0],Rt=U[Et][1],jn=yr>Ve!=Rt>Ve&&Ee<(Sr-It)*(Ve-yr)/(Rt-yr)+It;jn&&(nt=!nt)}return nt},ht,ue;for(D=Xe(D),ht=0;ht<Wt.length;ht++)if(ue=Xe(Wt[ht]),_e(ue,D))return ht}lr=Wt.map(function(D){return[D]});for(var _r=0;_r<Ht.length;_r++){var ur=et(Ht[_r]);ur!==void 0?lr[ur].push(Ht[_r]):t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"contains an inner ring with no containing outer")}var Vt=[];if(Vt=Ar.compact(lr.map(function(D){var _e=Ar.compact(D.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"contains a ring with less than four nodes");return}return Ar.compact(Xe.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(_e.length==0){t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"contains an empty ring cluster");return}return _e})),Vt.length==0)return t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"contains no coordinates"),!1;var Se="MultiPolygon";Vt.length===1&&(Se="Polygon",Vt=Vt[0]);var N={type:"Feature",id:it.type+"/"+pt,properties:{type:it.type,id:pt,tags:it.tags||{},relations:B[it.type][it.id]||[],meta:T(it)},geometry:{type:Se,coordinates:Vt}};return vt&&(t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"is tainted"),N.properties.tainted=!0),N};var Ce=We;if(!Ar.isArray(I[j].members)){t.verbose&&console.warn("Multipolygon",I[j].type+"/"+I[j].id,"ignored because it has no members");continue}for(var Y=0,K=0;K<I[j].members.length;K++)I[j].members[K].role=="outer"?Y++:t.verbose&&I[j].members[K].role!="inner"&&console.warn("Multipolygon",I[j].type+"/"+I[j].id,"member",I[j].members[K].type+"/"+I[j].members[K].ref,'ignored because it has an invalid role: "'+I[j].members[K].role+'"');if(I[j].members.forEach(function(it){Z[it.ref]&&(it.role==="outer"&&!b(Z[it.ref].tags,I[j].tags)&&(Z[it.ref].is_skippablerelationmember=!0),it.role==="inner"&&!b(Z[it.ref].tags)&&(Z[it.ref].is_skippablerelationmember=!0))}),Y==0){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because it has no outer ways");continue}var re=!1;Y==1&&!b(I[j].tags,{type:!0})&&(re=!0);var fe=null;if(!re)fe=We(I[j],I[j]);else{var de=I[j].members.filter(function(it){return it.role==="outer"})[0];if(de=Z[de.ref],de===void 0){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because outer way",de.type+"/"+de.ref,"is missing");continue}de.is_skippablerelationmember=!0,fe=We(de,I[j])}if(fe===!1){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because it has invalid geometry");continue}i?i(Pg(fe)):he.push(fe)}}for(var j=0;j<E.length;j++)if(Z[E[j].id]===E[j]){if(!Ar.isArray(E[j].nodes)){t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"ignored because it has no nodes");continue}if(!E[j].is_skippablerelationmember){typeof E[j].id!="number"&&(E[j].id=+E[j].id.replace("_fullGeom","")),E[j].tainted=!1,E[j].hidden=!1;var be=new Array;for(K=0;K<E[j].nodes.length;K++)typeof E[j].nodes[K]=="object"?be.push([+E[j].nodes[K].lon,+E[j].nodes[K].lat]):(t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"is tainted by an invalid node"),E[j].tainted=!0);if(be.length<=1){t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"ignored because it contains too few nodes");continue}var Pe="LineString";typeof E[j].nodes[0]<"u"&&typeof E[j].nodes[E[j].nodes.length-1]<"u"&&E[j].nodes[0].id===E[j].nodes[E[j].nodes.length-1].id&&(typeof E[j].tags<"u"&&l(E[j].tags)||E[j].__is_bounds_placeholder)&&(Pe="Polygon",be=[be]);var fe={type:"Feature",id:E[j].type+"/"+E[j].id,properties:{type:E[j].type,id:E[j].id,tags:E[j].tags||{},relations:B.way[E[j].id]||[],meta:T(E[j])},geometry:{type:Pe,coordinates:be}};E[j].tainted&&(t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"is tainted"),fe.properties.tainted=!0),E[j].__is_bounds_placeholder&&(fe.properties.geometry="bounds"),i?i(Pg(fe)):Pe=="LineString"?ie.push(fe):he.push(fe)}}return i?!0:(ye={type:"FeatureCollection",features:[]},ye.features=ye.features.concat(he),ye.features=ye.features.concat(ie),ye.features=ye.features.concat(ge),t.flatProperties&&ye.features.forEach(function(Fe){Fe.properties=Ar.merge(Fe.properties.meta,Fe.properties.tags,{id:Fe.properties.type+"/"+Fe.properties.id})}),ye=Pg(ye),ye)}function l(w){var E=t.polygonFeatures;if(typeof E=="function")return E(w);if(w.area==="no")return!1;for(var I in w){var b=w[I],T=E[I];if(!(typeof T>"u")&&b!=="no"&&(T===!0||T.included_values&&T.included_values[b]===!0||T.excluded_values&&T.excluded_values[b]!==!0))return!0}return!1}};function d1(e){for(var t=function(b){return b[0]},i=function(b){return b[b.length-1]},a=function(b,T){return b!==void 0&&T!==void 0&&b.id===T.id},u=[],f,d,l,w,E,I;e.length;)for(f=e.pop().nodes.slice(),u.push(f);e.length&&!a(t(f),i(f));){for(d=t(f),l=i(f),w=0;w<e.length;w++)if(I=e[w].nodes,a(l,t(I))){E=f.push,I=I.slice(1);break}else if(a(l,i(I))){E=f.push,I=I.slice(0,-1).reverse();break}else if(a(d,i(I))){E=f.unshift,I=I.slice(0,-1);break}else if(a(d,t(I))){E=f.unshift,I=I.slice(1).reverse();break}else I=E=null;if(!I)break;e.splice(w,1),E.apply(f,I)}return u}y0.toGeojson=y0;var q9=y0;const K9=yf(q9),p1={type:"FeatureCollection",features:[]},i4=()=>{const[e,t]=yt.useState(!1),i=yt.useCallback(async(d,l,w)=>{var j,le;if(e||(console.log(w),w<16))return p1;t(!0);let E=300;w>17&&(E=200),w>18&&(E=100),w>19&&(E=50),console.log("overpass: loading...");let I="[out:json]";I+=`[timeout:25];
`,I+='nwr["building"]',I+=`(around:${E},${d},${l});
`,I+="out meta geom;",console.log(I);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(I)}`,{});if(b.status!==200)return t(!1),p1;const T=await b.json();console.log("overpass json elements: ",T.elements);const R=K9(T);console.log("overpass osmtogeojson raw: ",R);for await(const K of R.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const Z=(j=T.elements.filter(ae=>K.id?typeof K.id=="number"?ae.id===K.id:ae.id===parseInt(K.id):!1))==null?void 0:j[0];if(Z&&(K.properties.tags=Z.tags,K.properties.nodes=Z.nodes),K.geometry.type==="Polygon"){const ae=X0(K.geometry.coordinates);var L=n4(ae);K.properties.center=L.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const W=K.properties.uid;if(W){let ae=localStorage.getItem(W+"-icon");if(ae===null){const q=await Ga.getUser(W);(le=q.img)!=null&&le.href?(ae=q.img.href,localStorage.setItem(W+"-icon",q.img.href)):localStorage.setItem(W+"-icon","")}K.properties.userIconHref=ae||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[a,u]=yt.useState(!1),f=yt.useCallback(async d=>{console.log("overpass: loading...",d),u(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(w.status!==200){u(!1);return}const E=await w.json();console.log("overpass json parent elements: ",E.elements);const I=250,b=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${I});
      out;
      `;console.log(b);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(T.status!==200){u(!1);return}const R=await T.json();console.log("overpass json child elements: ",R.elements);const L=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${I});
      out;
      `;console.log(L);const j=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(L)}`,{});if(j.status!==200){u(!1);return}const le=await j.json();return console.log("overpass json neighbour elements: ",le.elements),u(!1),[...E.elements,...R.elements,...le.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:a}},J9=()=>gt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[gt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),gt.jsxs("datalist",{id:"source-list",children:[gt.jsx("option",{value:"survey"}),gt.jsx("option",{value:"local knowledge"}),gt.jsx("option",{value:"extrapolation"}),gt.jsx("option",{value:"estimation from existing data"})]})]}),m1={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},Y9=({feature:e,onCancel:t,onSubmit:i})=>{var ye,ge,fe,ie;const{detectCountry:a,loadingCountry:u}=$9(),{fetchOverpassAdmin:f,loadingOverpassAdmin:d}=i4(),l=JSON.parse((ye=e.properties)==null?void 0:ye.center),[w,E]=yt.useState(void 0),[I,b]=yt.useState(),[T,R]=yt.useState(e),[L,j]=yt.useState(!1),[le,K]=yt.useState(!1),[Z,W]=yt.useState(!1),[ae,q]=yt.useState(),[V,P]=yt.useState();yt.useEffect(()=>{j(Ga.isLoggedIn())},[]),yt.useEffect(()=>{(async()=>{var Y,re;const he=await a(l[0],l[1]);if(E(he),(Y=he==null?void 0:he.properties)!=null&&Y.ISO_A3&&nA[he.properties.ISO_A3]){const de=nA[he.properties.ISO_A3];b(de);const be=de.defaultComment+" "+((re=e.properties)==null?void 0:re.id);P(be)}})()},[e]),yt.useEffect(()=>{console.log(T.properties)},[T]);const z=yt.useCallback(async()=>{const he=await CM.openReverseGeocoder([l[0],l[1]]);R(Y=>{const re={properties:{"addr:province":he.prefecture,"addr:city":he.city,...Y.properties}};return Y.properties=re.properties,Y})},[]),B=yt.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const he=await f(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",he),q(he)},[T]),ee=yt.useCallback(async he=>{var Ce,Fe,He;W(!0),he.preventDefault();const Y=new FormData(he.currentTarget),re=JSON.parse((Ce=e.properties)==null?void 0:Ce.tags);Y.forEach((We,it)=>{typeof We=="string"&&We.length>0&&it!=="comment"&&it!=="source"&&(re[it]=We)});const de={type:"way",id:e.id,version:(Fe=e.properties)==null?void 0:Fe.version,tags:re,nodes:JSON.parse((He=e.properties)==null?void 0:He.nodes)};console.info(JSON.stringify(de,null,2));const be={create:[],modify:[de],delete:[]},Pe=Y.get("comment");Pe&&(m1.comment=Pe.toString());const $e=Y.get("source");$e&&(m1.source=$e.toString()),await Ga.uploadChangeset(m1,be),W(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),X=yt.useCallback(()=>{K(!0)},[]);return T.properties?gt.jsxs("div",{children:[gt.jsxs("div",{children:["OSM:"," ",gt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",gt.jsx(PM,{feature:T}),I&&gt.jsxs("span",{children:[" | ","Address:"," ",gt.jsx(U9,{feature:T,fields:I})]})]}),u?gt.jsx(vu,{icon:Sx,spin:!0}):gt.jsx(gt.Fragment,{children:I?gt.jsxs("form",{onSubmit:ee,children:[gt.jsx("div",{className:"flex flex-wrap",children:gt.jsx(f1,{feature:T,fieldOption:I.postcodeField,onChange:X})}),gt.jsx("div",{className:"flex flex-wrap",children:I.mainFields.map(he=>gt.jsx(f1,{feature:T,fieldOption:he,onChange:X,suggestList:ae},he.key))}),gt.jsx("div",{className:"flex flex-wrap",children:I.detailFields.map(he=>gt.jsx(f1,{feature:T,fieldOption:he,onChange:X},he.key))}),gt.jsxs("div",{className:"flex flex-wrap",children:[gt.jsx(J9,{}),gt.jsx(V9,{defaultValue:V})]}),gt.jsx("div",{className:"flex flex-wrap",children:gt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[gt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((ge=w==null?void 0:w.properties)==null?void 0:ge.ISO_A3)==="JPN"&&gt.jsx("button",{type:"button",onClick:z,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),gt.jsxs("button",{type:"button",disabled:d,onClick:B,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",d&&gt.jsx(vu,{icon:Sx,spin:!0})]}),gt.jsx("button",{disabled:!L||Z||!le,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!L&&gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),gt.jsx(TM,{})]})]})})]}):gt.jsx("div",{className:"flex flex-wrap",children:gt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[gt.jsxs("div",{className:"py-2",children:[gt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(fe=w==null?void 0:w.properties)==null?void 0:fe.NAME," (ISO code:",(ie=w==null?void 0:w.properties)==null?void 0:ie.ISO_A3,") does not support yet."]}),gt.jsx("p",{children:gt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),gt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function Q9(e,t){const[i,a]=yt.useState(e);return yt.useEffect(()=>{const u=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(u)}},[e,t]),i}const eG={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},tG={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function rG(){const e=yt.useRef(null),[t,i]=yt.useState(),a=Q9(t,2500),u=yt.useRef(null),[f,d]=yt.useState({type:"FeatureCollection",features:[]}),[l,w]=yt.useState("auto"),[E,I]=yt.useState(),[b,T]=yt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:L}=i4();yt.useEffect(()=>{setTimeout(()=>{var P;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(P=u.current)==null||P.trigger())},500)},[]);const j=yt.useCallback(P=>{const z=P.target.getCenter(),B=P.target.getZoom();i({zoom:B,latitude:z.lat,longitude:z.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),le=yt.useCallback(P=>{i(P.viewState)},[]),K=yt.useCallback(P=>{i(P.viewState)},[]);yt.useEffect(()=>{(async()=>{if(!a)return;const P=a,z=await R(P.latitude,P.longitude,P.zoom);d(z)})()},[a]);const Z=yt.useCallback(P=>{var ye;w("pointer");const{features:z,point:{x:B,y:ee}}=P,X=z&&z[0];X?((ye=e.current)==null||ye.setFeatureState({source:"buildings-source",id:X.id},{hover:!0}),I({feature:X,x:B,y:ee})):I(void 0)},[]),W=yt.useCallback(P=>{var z;w("auto"),(z=e.current)==null||z.querySourceFeatures("buildings-source").map(B=>{var ee;(ee=e.current)==null||ee.setFeatureState({source:"buildings-source",id:B.id},{hover:!1})}),I(void 0)},[]),ae=yt.useCallback(P=>{var B;q();const z=P.features&&P.features[0];z&&((B=e.current)==null||B.setFeatureState({source:"buildings-source",id:z.id},{select:!0}),T([z]))},[]),q=yt.useCallback(()=>{var P;(P=e.current)==null||P.querySourceFeatures("buildings-source").map(z=>{var B;(B=e.current)==null||B.setFeatureState({source:"buildings-source",id:z.id},{select:!1})}),T([])},[]),V=yt.useMemo(()=>{let P=25;return t&&(P=t.zoom<18?20:t.zoom<19?25:35),f.features.map((z,B)=>!z.properties||!z.properties.center?null:gt.jsx(hL,{style:{cursor:"pointer"},longitude:z.properties.center[0],latitude:z.properties.center[1],anchor:"center",children:gt.jsx(L6,{feature:z,size:P})},`marker-${B}`))},[f,t]);return gt.jsxs("div",{children:[gt.jsx(y6,{}),gt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:gt.jsx(N6,{viewState:t})}),gt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&gt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:gt.jsx("div",{style:{padding:"10px"},children:b.map(P=>gt.jsx(Y9,{feature:P,onCancel:q,onSubmit:q},P.id))})}),gt.jsxs(cL,{ref:e,...t,onMove:le,onMoveEnd:K,onLoad:j,interactiveLayerIds:["buildings-layer-fill"],onClick:ae,onMouseEnter:Z,onMouseLeave:W,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:Gk,style:{width:"100%",height:"100%"},mapStyle:eG,children:[gt.jsx(mL,{id:"buildings-source",type:"geojson",data:f,children:gt.jsx(pL,{...tG})}),gt.jsx(fL,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),gt.jsx(dL,{ref:u,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),gt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?gt.jsx(vu,{size:"2x",icon:m6}):L?gt.jsx(vu,{size:"2x",icon:Sx,spin:!0}):gt.jsx(vu,{size:"2x",icon:d6})}),V,E&&gt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:E.x+5,top:E.y+5},children:[gt.jsx(PM,{feature:E.feature}),gt.jsx("br",{}),gt.jsx(B6,{feature:E.feature}),gt.jsx(v6,{feature:E.feature})]})]})]})]})}var o4={},J0={};J0.byteLength=oG;J0.toByteArray=sG;J0.fromByteArray=cG;var Es=[],fa=[],nG=typeof Uint8Array<"u"?Uint8Array:Array,g1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Sh=0,iG=g1.length;Sh<iG;++Sh)Es[Sh]=g1[Sh],fa[g1.charCodeAt(Sh)]=Sh;fa[45]=62;fa[95]=63;function a4(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function oG(e){var t=a4(e),i=t[0],a=t[1];return(i+a)*3/4-a}function aG(e,t,i){return(t+i)*3/4-i}function sG(e){var t,i=a4(e),a=i[0],u=i[1],f=new nG(aG(e,a,u)),d=0,l=u>0?a-4:a,w;for(w=0;w<l;w+=4)t=fa[e.charCodeAt(w)]<<18|fa[e.charCodeAt(w+1)]<<12|fa[e.charCodeAt(w+2)]<<6|fa[e.charCodeAt(w+3)],f[d++]=t>>16&255,f[d++]=t>>8&255,f[d++]=t&255;return u===2&&(t=fa[e.charCodeAt(w)]<<2|fa[e.charCodeAt(w+1)]>>4,f[d++]=t&255),u===1&&(t=fa[e.charCodeAt(w)]<<10|fa[e.charCodeAt(w+1)]<<4|fa[e.charCodeAt(w+2)]>>2,f[d++]=t>>8&255,f[d++]=t&255),f}function lG(e){return Es[e>>18&63]+Es[e>>12&63]+Es[e>>6&63]+Es[e&63]}function uG(e,t,i){for(var a,u=[],f=t;f<i;f+=3)a=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),u.push(lG(a));return u.join("")}function cG(e){for(var t,i=e.length,a=i%3,u=[],f=16383,d=0,l=i-a;d<l;d+=f)u.push(uG(e,d,d+f>l?l:d+f));return a===1?(t=e[i-1],u.push(Es[t>>2]+Es[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],u.push(Es[t>>10]+Es[t>>4&63]+Es[t<<2&63]+"=")),u.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=J0,i=$0,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=Z,e.INSPECT_MAX_BYTES=50;const u=2147483647;e.kMaxLength=u,l.TYPED_ARRAY_SUPPORT=f(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const ue=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(ue,M),ue.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function d(ue){if(ue>u)throw new RangeError('The value "'+ue+'" is invalid for option "size"');const M=new Uint8Array(ue);return Object.setPrototypeOf(M,l.prototype),M}function l(ue,M,U){if(typeof ue=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ue)}return w(ue,M,U)}l.poolSize=8192;function w(ue,M,U){if(typeof ue=="string")return T(ue,M);if(ArrayBuffer.isView(ue))return L(ue);if(ue==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue);if(D(ue,ArrayBuffer)||ue&&D(ue.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(ue,SharedArrayBuffer)||ue&&D(ue.buffer,SharedArrayBuffer)))return j(ue,M,U);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=ue.valueOf&&ue.valueOf();if(Ee!=null&&Ee!==ue)return l.from(Ee,M,U);const Ve=le(ue);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return l.from(ue[Symbol.toPrimitive]("string"),M,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue)}l.from=function(ue,M,U){return w(ue,M,U)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function E(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function I(ue,M,U){return E(ue),ue<=0?d(ue):M!==void 0?typeof U=="string"?d(ue).fill(M,U):d(ue).fill(M):d(ue)}l.alloc=function(ue,M,U){return I(ue,M,U)};function b(ue){return E(ue),d(ue<0?0:K(ue)|0)}l.allocUnsafe=function(ue){return b(ue)},l.allocUnsafeSlow=function(ue){return b(ue)};function T(ue,M){if((typeof M!="string"||M==="")&&(M="utf8"),!l.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const U=W(ue,M)|0;let Ee=d(U);const Ve=Ee.write(ue,M);return Ve!==U&&(Ee=Ee.slice(0,Ve)),Ee}function R(ue){const M=ue.length<0?0:K(ue.length)|0,U=d(M);for(let Ee=0;Ee<M;Ee+=1)U[Ee]=ue[Ee]&255;return U}function L(ue){if(D(ue,Uint8Array)){const M=new Uint8Array(ue);return j(M.buffer,M.byteOffset,M.byteLength)}return R(ue)}function j(ue,M,U){if(M<0||ue.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<M+(U||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return M===void 0&&U===void 0?Ee=new Uint8Array(ue):U===void 0?Ee=new Uint8Array(ue,M):Ee=new Uint8Array(ue,M,U),Object.setPrototypeOf(Ee,l.prototype),Ee}function le(ue){if(l.isBuffer(ue)){const M=K(ue.length)|0,U=d(M);return U.length===0||ue.copy(U,0,0,M),U}if(ue.length!==void 0)return typeof ue.length!="number"||_e(ue.length)?d(0):R(ue);if(ue.type==="Buffer"&&Array.isArray(ue.data))return R(ue.data)}function K(ue){if(ue>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return ue|0}function Z(ue){return+ue!=ue&&(ue=0),l.alloc(+ue)}l.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==l.prototype},l.compare=function(M,U){if(D(M,Uint8Array)&&(M=l.from(M,M.offset,M.byteLength)),D(U,Uint8Array)&&(U=l.from(U,U.offset,U.byteLength)),!l.isBuffer(M)||!l.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===U)return 0;let Ee=M.length,Ve=U.length;for(let nt=0,Ge=Math.min(Ee,Ve);nt<Ge;++nt)if(M[nt]!==U[nt]){Ee=M[nt],Ve=U[nt];break}return Ee<Ve?-1:Ve<Ee?1:0},l.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(M,U){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return l.alloc(0);let Ee;if(U===void 0)for(U=0,Ee=0;Ee<M.length;++Ee)U+=M[Ee].length;const Ve=l.allocUnsafe(U);let nt=0;for(Ee=0;Ee<M.length;++Ee){let Ge=M[Ee];if(D(Ge,Uint8Array))nt+Ge.length>Ve.length?(l.isBuffer(Ge)||(Ge=l.from(Ge)),Ge.copy(Ve,nt)):Uint8Array.prototype.set.call(Ve,Ge,nt);else if(l.isBuffer(Ge))Ge.copy(Ve,nt);else throw new TypeError('"list" argument must be an Array of Buffers');nt+=Ge.length}return Ve};function W(ue,M){if(l.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||D(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ue);const U=ue.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&U===0)return 0;let Ve=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return _r(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return Se(ue).length;default:if(Ve)return Ee?-1:_r(ue).length;M=(""+M).toLowerCase(),Ve=!0}}l.byteLength=W;function ae(ue,M,U){let Ee=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,M>>>=0,U<=M))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return de(this,M,U);case"utf8":case"utf-8":return fe(this,M,U);case"ascii":return Y(this,M,U);case"latin1":case"binary":return re(this,M,U);case"base64":return ge(this,M,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,M,U);default:if(Ee)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),Ee=!0}}l.prototype._isBuffer=!0;function q(ue,M,U){const Ee=ue[M];ue[M]=ue[U],ue[U]=Ee}l.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<M;U+=2)q(this,U,U+1);return this},l.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<M;U+=4)q(this,U,U+3),q(this,U+1,U+2);return this},l.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<M;U+=8)q(this,U,U+7),q(this,U+1,U+6),q(this,U+2,U+5),q(this,U+3,U+4);return this},l.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?fe(this,0,M):ae.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(M){if(!l.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:l.compare(this,M)===0},l.prototype.inspect=function(){let M="";const U=e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(M+=" ... "),"<Buffer "+M+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(M,U,Ee,Ve,nt){if(D(M,Uint8Array)&&(M=l.from(M,M.offset,M.byteLength)),!l.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(U===void 0&&(U=0),Ee===void 0&&(Ee=M?M.length:0),Ve===void 0&&(Ve=0),nt===void 0&&(nt=this.length),U<0||Ee>M.length||Ve<0||nt>this.length)throw new RangeError("out of range index");if(Ve>=nt&&U>=Ee)return 0;if(Ve>=nt)return-1;if(U>=Ee)return 1;if(U>>>=0,Ee>>>=0,Ve>>>=0,nt>>>=0,this===M)return 0;let Ge=nt-Ve,Et=Ee-U;const It=Math.min(Ge,Et),yr=this.slice(Ve,nt),Sr=M.slice(U,Ee);for(let Rt=0;Rt<It;++Rt)if(yr[Rt]!==Sr[Rt]){Ge=yr[Rt],Et=Sr[Rt];break}return Ge<Et?-1:Et<Ge?1:0};function V(ue,M,U,Ee,Ve){if(ue.length===0)return-1;if(typeof U=="string"?(Ee=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,_e(U)&&(U=Ve?0:ue.length-1),U<0&&(U=ue.length+U),U>=ue.length){if(Ve)return-1;U=ue.length-1}else if(U<0)if(Ve)U=0;else return-1;if(typeof M=="string"&&(M=l.from(M,Ee)),l.isBuffer(M))return M.length===0?-1:P(ue,M,U,Ee,Ve);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(ue,M,U):Uint8Array.prototype.lastIndexOf.call(ue,M,U):P(ue,[M],U,Ee,Ve);throw new TypeError("val must be string, number or Buffer")}function P(ue,M,U,Ee,Ve){let nt=1,Ge=ue.length,Et=M.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(ue.length<2||M.length<2)return-1;nt=2,Ge/=2,Et/=2,U/=2}function It(Sr,Rt){return nt===1?Sr[Rt]:Sr.readUInt16BE(Rt*nt)}let yr;if(Ve){let Sr=-1;for(yr=U;yr<Ge;yr++)if(It(ue,yr)===It(M,Sr===-1?0:yr-Sr)){if(Sr===-1&&(Sr=yr),yr-Sr+1===Et)return Sr*nt}else Sr!==-1&&(yr-=yr-Sr),Sr=-1}else for(U+Et>Ge&&(U=Ge-Et),yr=U;yr>=0;yr--){let Sr=!0;for(let Rt=0;Rt<Et;Rt++)if(It(ue,yr+Rt)!==It(M,Rt)){Sr=!1;break}if(Sr)return yr}return-1}l.prototype.includes=function(M,U,Ee){return this.indexOf(M,U,Ee)!==-1},l.prototype.indexOf=function(M,U,Ee){return V(this,M,U,Ee,!0)},l.prototype.lastIndexOf=function(M,U,Ee){return V(this,M,U,Ee,!1)};function z(ue,M,U,Ee){U=Number(U)||0;const Ve=ue.length-U;Ee?(Ee=Number(Ee),Ee>Ve&&(Ee=Ve)):Ee=Ve;const nt=M.length;Ee>nt/2&&(Ee=nt/2);let Ge;for(Ge=0;Ge<Ee;++Ge){const Et=parseInt(M.substr(Ge*2,2),16);if(_e(Et))return Ge;ue[U+Ge]=Et}return Ge}function B(ue,M,U,Ee){return N(_r(M,ue.length-U),ue,U,Ee)}function ee(ue,M,U,Ee){return N(ur(M),ue,U,Ee)}function X(ue,M,U,Ee){return N(Se(M),ue,U,Ee)}function ye(ue,M,U,Ee){return N(Vt(M,ue.length-U),ue,U,Ee)}l.prototype.write=function(M,U,Ee,Ve){if(U===void 0)Ve="utf8",Ee=this.length,U=0;else if(Ee===void 0&&typeof U=="string")Ve=U,Ee=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(Ee)?(Ee=Ee>>>0,Ve===void 0&&(Ve="utf8")):(Ve=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const nt=this.length-U;if((Ee===void 0||Ee>nt)&&(Ee=nt),M.length>0&&(Ee<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");let Ge=!1;for(;;)switch(Ve){case"hex":return z(this,M,U,Ee);case"utf8":case"utf-8":return B(this,M,U,Ee);case"ascii":case"latin1":case"binary":return ee(this,M,U,Ee);case"base64":return X(this,M,U,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,M,U,Ee);default:if(Ge)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),Ge=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(ue,M,U){return M===0&&U===ue.length?t.fromByteArray(ue):t.fromByteArray(ue.slice(M,U))}function fe(ue,M,U){U=Math.min(ue.length,U);const Ee=[];let Ve=M;for(;Ve<U;){const nt=ue[Ve];let Ge=null,Et=nt>239?4:nt>223?3:nt>191?2:1;if(Ve+Et<=U){let It,yr,Sr,Rt;switch(Et){case 1:nt<128&&(Ge=nt);break;case 2:It=ue[Ve+1],(It&192)===128&&(Rt=(nt&31)<<6|It&63,Rt>127&&(Ge=Rt));break;case 3:It=ue[Ve+1],yr=ue[Ve+2],(It&192)===128&&(yr&192)===128&&(Rt=(nt&15)<<12|(It&63)<<6|yr&63,Rt>2047&&(Rt<55296||Rt>57343)&&(Ge=Rt));break;case 4:It=ue[Ve+1],yr=ue[Ve+2],Sr=ue[Ve+3],(It&192)===128&&(yr&192)===128&&(Sr&192)===128&&(Rt=(nt&15)<<18|(It&63)<<12|(yr&63)<<6|Sr&63,Rt>65535&&Rt<1114112&&(Ge=Rt))}}Ge===null?(Ge=65533,Et=1):Ge>65535&&(Ge-=65536,Ee.push(Ge>>>10&1023|55296),Ge=56320|Ge&1023),Ee.push(Ge),Ve+=Et}return he(Ee)}const ie=4096;function he(ue){const M=ue.length;if(M<=ie)return String.fromCharCode.apply(String,ue);let U="",Ee=0;for(;Ee<M;)U+=String.fromCharCode.apply(String,ue.slice(Ee,Ee+=ie));return U}function Y(ue,M,U){let Ee="";U=Math.min(ue.length,U);for(let Ve=M;Ve<U;++Ve)Ee+=String.fromCharCode(ue[Ve]&127);return Ee}function re(ue,M,U){let Ee="";U=Math.min(ue.length,U);for(let Ve=M;Ve<U;++Ve)Ee+=String.fromCharCode(ue[Ve]);return Ee}function de(ue,M,U){const Ee=ue.length;(!M||M<0)&&(M=0),(!U||U<0||U>Ee)&&(U=Ee);let Ve="";for(let nt=M;nt<U;++nt)Ve+=Xe[ue[nt]];return Ve}function be(ue,M,U){const Ee=ue.slice(M,U);let Ve="";for(let nt=0;nt<Ee.length-1;nt+=2)Ve+=String.fromCharCode(Ee[nt]+Ee[nt+1]*256);return Ve}l.prototype.slice=function(M,U){const Ee=this.length;M=~~M,U=U===void 0?Ee:~~U,M<0?(M+=Ee,M<0&&(M=0)):M>Ee&&(M=Ee),U<0?(U+=Ee,U<0&&(U=0)):U>Ee&&(U=Ee),U<M&&(U=M);const Ve=this.subarray(M,U);return Object.setPrototypeOf(Ve,l.prototype),Ve};function Pe(ue,M,U){if(ue%1!==0||ue<0)throw new RangeError("offset is not uint");if(ue+M>U)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(M,U,Ee){M=M>>>0,U=U>>>0,Ee||Pe(M,U,this.length);let Ve=this[M],nt=1,Ge=0;for(;++Ge<U&&(nt*=256);)Ve+=this[M+Ge]*nt;return Ve},l.prototype.readUintBE=l.prototype.readUIntBE=function(M,U,Ee){M=M>>>0,U=U>>>0,Ee||Pe(M,U,this.length);let Ve=this[M+--U],nt=1;for(;U>0&&(nt*=256);)Ve+=this[M+--U]*nt;return Ve},l.prototype.readUint8=l.prototype.readUInt8=function(M,U){return M=M>>>0,U||Pe(M,1,this.length),this[M]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(M,U){return M=M>>>0,U||Pe(M,2,this.length),this[M]|this[M+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(M,U){return M=M>>>0,U||Pe(M,2,this.length),this[M]<<8|this[M+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(M,U){return M=M>>>0,U||Pe(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(M,U){return M=M>>>0,U||Pe(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},l.prototype.readBigUInt64LE=tt(function(M){M=M>>>0,Wt(M,"offset");const U=this[M],Ee=this[M+7];(U===void 0||Ee===void 0)&&Ht(M,this.length-8);const Ve=U+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,nt=this[++M]+this[++M]*2**8+this[++M]*2**16+Ee*2**24;return BigInt(Ve)+(BigInt(nt)<<BigInt(32))}),l.prototype.readBigUInt64BE=tt(function(M){M=M>>>0,Wt(M,"offset");const U=this[M],Ee=this[M+7];(U===void 0||Ee===void 0)&&Ht(M,this.length-8);const Ve=U*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],nt=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+Ee;return(BigInt(Ve)<<BigInt(32))+BigInt(nt)}),l.prototype.readIntLE=function(M,U,Ee){M=M>>>0,U=U>>>0,Ee||Pe(M,U,this.length);let Ve=this[M],nt=1,Ge=0;for(;++Ge<U&&(nt*=256);)Ve+=this[M+Ge]*nt;return nt*=128,Ve>=nt&&(Ve-=Math.pow(2,8*U)),Ve},l.prototype.readIntBE=function(M,U,Ee){M=M>>>0,U=U>>>0,Ee||Pe(M,U,this.length);let Ve=U,nt=1,Ge=this[M+--Ve];for(;Ve>0&&(nt*=256);)Ge+=this[M+--Ve]*nt;return nt*=128,Ge>=nt&&(Ge-=Math.pow(2,8*U)),Ge},l.prototype.readInt8=function(M,U){return M=M>>>0,U||Pe(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},l.prototype.readInt16LE=function(M,U){M=M>>>0,U||Pe(M,2,this.length);const Ee=this[M]|this[M+1]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt16BE=function(M,U){M=M>>>0,U||Pe(M,2,this.length);const Ee=this[M+1]|this[M]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt32LE=function(M,U){return M=M>>>0,U||Pe(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},l.prototype.readInt32BE=function(M,U){return M=M>>>0,U||Pe(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},l.prototype.readBigInt64LE=tt(function(M){M=M>>>0,Wt(M,"offset");const U=this[M],Ee=this[M+7];(U===void 0||Ee===void 0)&&Ht(M,this.length-8);const Ve=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+(Ee<<24);return(BigInt(Ve)<<BigInt(32))+BigInt(U+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24)}),l.prototype.readBigInt64BE=tt(function(M){M=M>>>0,Wt(M,"offset");const U=this[M],Ee=this[M+7];(U===void 0||Ee===void 0)&&Ht(M,this.length-8);const Ve=(U<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(Ve)<<BigInt(32))+BigInt(this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+Ee)}),l.prototype.readFloatLE=function(M,U){return M=M>>>0,U||Pe(M,4,this.length),i.read(this,M,!0,23,4)},l.prototype.readFloatBE=function(M,U){return M=M>>>0,U||Pe(M,4,this.length),i.read(this,M,!1,23,4)},l.prototype.readDoubleLE=function(M,U){return M=M>>>0,U||Pe(M,8,this.length),i.read(this,M,!0,52,8)},l.prototype.readDoubleBE=function(M,U){return M=M>>>0,U||Pe(M,8,this.length),i.read(this,M,!1,52,8)};function $e(ue,M,U,Ee,Ve,nt){if(!l.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>Ve||M<nt)throw new RangeError('"value" argument is out of bounds');if(U+Ee>ue.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(M,U,Ee,Ve){if(M=+M,U=U>>>0,Ee=Ee>>>0,!Ve){const Et=Math.pow(2,8*Ee)-1;$e(this,M,U,Ee,Et,0)}let nt=1,Ge=0;for(this[U]=M&255;++Ge<Ee&&(nt*=256);)this[U+Ge]=M/nt&255;return U+Ee},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(M,U,Ee,Ve){if(M=+M,U=U>>>0,Ee=Ee>>>0,!Ve){const Et=Math.pow(2,8*Ee)-1;$e(this,M,U,Ee,Et,0)}let nt=Ee-1,Ge=1;for(this[U+nt]=M&255;--nt>=0&&(Ge*=256);)this[U+nt]=M/Ge&255;return U+Ee},l.prototype.writeUint8=l.prototype.writeUInt8=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,1,255,0),this[U]=M&255,U+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,2,65535,0),this[U]=M&255,this[U+1]=M>>>8,U+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,2,65535,0),this[U]=M>>>8,this[U+1]=M&255,U+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,4,4294967295,0),this[U+3]=M>>>24,this[U+2]=M>>>16,this[U+1]=M>>>8,this[U]=M&255,U+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,4,4294967295,0),this[U]=M>>>24,this[U+1]=M>>>16,this[U+2]=M>>>8,this[U+3]=M&255,U+4};function Ce(ue,M,U,Ee,Ve){xt(M,Ee,Ve,ue,U,7);let nt=Number(M&BigInt(4294967295));ue[U++]=nt,nt=nt>>8,ue[U++]=nt,nt=nt>>8,ue[U++]=nt,nt=nt>>8,ue[U++]=nt;let Ge=Number(M>>BigInt(32)&BigInt(4294967295));return ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,U}function Fe(ue,M,U,Ee,Ve){xt(M,Ee,Ve,ue,U,7);let nt=Number(M&BigInt(4294967295));ue[U+7]=nt,nt=nt>>8,ue[U+6]=nt,nt=nt>>8,ue[U+5]=nt,nt=nt>>8,ue[U+4]=nt;let Ge=Number(M>>BigInt(32)&BigInt(4294967295));return ue[U+3]=Ge,Ge=Ge>>8,ue[U+2]=Ge,Ge=Ge>>8,ue[U+1]=Ge,Ge=Ge>>8,ue[U]=Ge,U+8}l.prototype.writeBigUInt64LE=tt(function(M,U=0){return Ce(this,M,U,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=tt(function(M,U=0){return Fe(this,M,U,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(M,U,Ee,Ve){if(M=+M,U=U>>>0,!Ve){const It=Math.pow(2,8*Ee-1);$e(this,M,U,Ee,It-1,-It)}let nt=0,Ge=1,Et=0;for(this[U]=M&255;++nt<Ee&&(Ge*=256);)M<0&&Et===0&&this[U+nt-1]!==0&&(Et=1),this[U+nt]=(M/Ge>>0)-Et&255;return U+Ee},l.prototype.writeIntBE=function(M,U,Ee,Ve){if(M=+M,U=U>>>0,!Ve){const It=Math.pow(2,8*Ee-1);$e(this,M,U,Ee,It-1,-It)}let nt=Ee-1,Ge=1,Et=0;for(this[U+nt]=M&255;--nt>=0&&(Ge*=256);)M<0&&Et===0&&this[U+nt+1]!==0&&(Et=1),this[U+nt]=(M/Ge>>0)-Et&255;return U+Ee},l.prototype.writeInt8=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,1,127,-128),M<0&&(M=255+M+1),this[U]=M&255,U+1},l.prototype.writeInt16LE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,2,32767,-32768),this[U]=M&255,this[U+1]=M>>>8,U+2},l.prototype.writeInt16BE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,2,32767,-32768),this[U]=M>>>8,this[U+1]=M&255,U+2},l.prototype.writeInt32LE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,4,2147483647,-2147483648),this[U]=M&255,this[U+1]=M>>>8,this[U+2]=M>>>16,this[U+3]=M>>>24,U+4},l.prototype.writeInt32BE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||$e(this,M,U,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[U]=M>>>24,this[U+1]=M>>>16,this[U+2]=M>>>8,this[U+3]=M&255,U+4},l.prototype.writeBigInt64LE=tt(function(M,U=0){return Ce(this,M,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=tt(function(M,U=0){return Fe(this,M,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(ue,M,U,Ee,Ve,nt){if(U+Ee>ue.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function We(ue,M,U,Ee,Ve){return M=+M,U=U>>>0,Ve||He(ue,M,U,4),i.write(ue,M,U,Ee,23,4),U+4}l.prototype.writeFloatLE=function(M,U,Ee){return We(this,M,U,!0,Ee)},l.prototype.writeFloatBE=function(M,U,Ee){return We(this,M,U,!1,Ee)};function it(ue,M,U,Ee,Ve){return M=+M,U=U>>>0,Ve||He(ue,M,U,8),i.write(ue,M,U,Ee,52,8),U+8}l.prototype.writeDoubleLE=function(M,U,Ee){return it(this,M,U,!0,Ee)},l.prototype.writeDoubleBE=function(M,U,Ee){return it(this,M,U,!1,Ee)},l.prototype.copy=function(M,U,Ee,Ve){if(!l.isBuffer(M))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Ve&&Ve!==0&&(Ve=this.length),U>=M.length&&(U=M.length),U||(U=0),Ve>0&&Ve<Ee&&(Ve=Ee),Ve===Ee||M.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),M.length-U<Ve-Ee&&(Ve=M.length-U+Ee);const nt=Ve-Ee;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,Ee,Ve):Uint8Array.prototype.set.call(M,this.subarray(Ee,Ve),U),nt},l.prototype.fill=function(M,U,Ee,Ve){if(typeof M=="string"){if(typeof U=="string"?(Ve=U,U=0,Ee=this.length):typeof Ee=="string"&&(Ve=Ee,Ee=this.length),Ve!==void 0&&typeof Ve!="string")throw new TypeError("encoding must be a string");if(typeof Ve=="string"&&!l.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);if(M.length===1){const Ge=M.charCodeAt(0);(Ve==="utf8"&&Ge<128||Ve==="latin1")&&(M=Ge)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(U<0||this.length<U||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=U)return this;U=U>>>0,Ee=Ee===void 0?this.length:Ee>>>0,M||(M=0);let nt;if(typeof M=="number")for(nt=U;nt<Ee;++nt)this[nt]=M;else{const Ge=l.isBuffer(M)?M:l.from(M,Ve),Et=Ge.length;if(Et===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(nt=0;nt<Ee-U;++nt)this[nt+U]=Ge[nt%Et]}return this};const ct={};function vt(ue,M,U){ct[ue]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ue}]`,this.stack,delete this.name}get code(){return ue}set code(Ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ve,writable:!0})}toString(){return`${this.name} [${ue}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(ue){return ue?`${ue} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(ue,M){return`The "${ue}" argument must be of type number. Received type ${typeof M}`},TypeError),vt("ERR_OUT_OF_RANGE",function(ue,M,U){let Ee=`The value of "${ue}" is out of range.`,Ve=U;return Number.isInteger(U)&&Math.abs(U)>2**32?Ve=kt(String(U)):typeof U=="bigint"&&(Ve=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(Ve=kt(Ve)),Ve+="n"),Ee+=` It must be ${M}. Received ${Ve}`,Ee},RangeError);function kt(ue){let M="",U=ue.length;const Ee=ue[0]==="-"?1:0;for(;U>=Ee+4;U-=3)M=`_${ue.slice(U-3,U)}${M}`;return`${ue.slice(0,U)}${M}`}function pt(ue,M,U){Wt(M,"offset"),(ue[M]===void 0||ue[M+U]===void 0)&&Ht(M,ue.length-(U+1))}function xt(ue,M,U,Ee,Ve,nt){if(ue>U||ue<M){const Ge=typeof M=="bigint"?"n":"";let Et;throw nt>3?M===0||M===BigInt(0)?Et=`>= 0${Ge} and < 2${Ge} ** ${(nt+1)*8}${Ge}`:Et=`>= -(2${Ge} ** ${(nt+1)*8-1}${Ge}) and < 2 ** ${(nt+1)*8-1}${Ge}`:Et=`>= ${M}${Ge} and <= ${U}${Ge}`,new ct.ERR_OUT_OF_RANGE("value",Et,ue)}pt(Ee,Ve,nt)}function Wt(ue,M){if(typeof ue!="number")throw new ct.ERR_INVALID_ARG_TYPE(M,"number",ue)}function Ht(ue,M,U){throw Math.floor(ue)!==ue?(Wt(ue,U),new ct.ERR_OUT_OF_RANGE(U||"offset","an integer",ue)):M<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE(U||"offset",`>= ${U?1:0} and <= ${M}`,ue)}const lr=/[^+/0-9A-Za-z-_]/g;function et(ue){if(ue=ue.split("=")[0],ue=ue.trim().replace(lr,""),ue.length<2)return"";for(;ue.length%4!==0;)ue=ue+"=";return ue}function _r(ue,M){M=M||1/0;let U;const Ee=ue.length;let Ve=null;const nt=[];for(let Ge=0;Ge<Ee;++Ge){if(U=ue.charCodeAt(Ge),U>55295&&U<57344){if(!Ve){if(U>56319){(M-=3)>-1&&nt.push(239,191,189);continue}else if(Ge+1===Ee){(M-=3)>-1&&nt.push(239,191,189);continue}Ve=U;continue}if(U<56320){(M-=3)>-1&&nt.push(239,191,189),Ve=U;continue}U=(Ve-55296<<10|U-56320)+65536}else Ve&&(M-=3)>-1&&nt.push(239,191,189);if(Ve=null,U<128){if((M-=1)<0)break;nt.push(U)}else if(U<2048){if((M-=2)<0)break;nt.push(U>>6|192,U&63|128)}else if(U<65536){if((M-=3)<0)break;nt.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((M-=4)<0)break;nt.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return nt}function ur(ue){const M=[];for(let U=0;U<ue.length;++U)M.push(ue.charCodeAt(U)&255);return M}function Vt(ue,M){let U,Ee,Ve;const nt=[];for(let Ge=0;Ge<ue.length&&!((M-=2)<0);++Ge)U=ue.charCodeAt(Ge),Ee=U>>8,Ve=U%256,nt.push(Ve),nt.push(Ee);return nt}function Se(ue){return t.toByteArray(et(ue))}function N(ue,M,U,Ee){let Ve;for(Ve=0;Ve<Ee&&!(Ve+U>=M.length||Ve>=ue.length);++Ve)M[Ve+U]=ue[Ve];return Ve}function D(ue,M){return ue instanceof M||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===M.name}function _e(ue){return ue!==ue}const Xe=function(){const ue="0123456789abcdef",M=new Array(256);for(let U=0;U<16;++U){const Ee=U*16;for(let Ve=0;Ve<16;++Ve)M[Ee+Ve]=ue[U]+ue[Ve]}return M}();function tt(ue){return typeof BigInt>"u"?ht:ue}function ht(){throw new Error("BigInt not supported")}})(o4);window.Buffer=o4.Buffer;Tz.render(gt.jsx(Pw.StrictMode,{children:gt.jsx(rG,{})}),document.getElementById("root"));

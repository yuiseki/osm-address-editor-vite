function DM(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const p=Object.getOwnPropertyDescriptor(a,c);p&&Object.defineProperty(e,c,p.get?p:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function i(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(c){if(c.ep)return;c.ep=!0;const p=i(c);fetch(c.href,p)}})();var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var bE={exports:{}},Vg={},SE={exports:{}},On={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=Symbol.for("react.element"),BM=Symbol.for("react.portal"),NM=Symbol.for("react.fragment"),UM=Symbol.for("react.strict_mode"),$M=Symbol.for("react.profiler"),VM=Symbol.for("react.provider"),GM=Symbol.for("react.context"),ZM=Symbol.for("react.forward_ref"),WM=Symbol.for("react.suspense"),HM=Symbol.for("react.memo"),XM=Symbol.for("react.lazy"),Cb=Symbol.iterator;function KM(e){return e===null||typeof e!="object"?null:(e=Cb&&e[Cb]||e["@@iterator"],typeof e=="function"?e:null)}var EE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TE=Object.assign,CE={};function Lh(e,t,i){this.props=e,this.context=t,this.refs=CE,this.updater=i||EE}Lh.prototype.isReactComponent={};Lh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PE(){}PE.prototype=Lh.prototype;function o1(e,t,i){this.props=e,this.context=t,this.refs=CE,this.updater=i||EE}var s1=o1.prototype=new PE;s1.constructor=o1;TE(s1,Lh.prototype);s1.isPureReactComponent=!0;var Pb=Array.isArray,IE=Object.prototype.hasOwnProperty,a1={current:null},AE={key:!0,ref:!0,__self:!0,__source:!0};function ME(e,t,i){var a,c={},p=null,m=null;if(t!=null)for(a in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(p=""+t.key),t)IE.call(t,a)&&!AE.hasOwnProperty(a)&&(c[a]=t[a]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var S=Array(u),P=0;P<u;P++)S[P]=arguments[P+2];c.children=S}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)c[a]===void 0&&(c[a]=u[a]);return{$$typeof:Jf,type:e,key:p,ref:m,props:c,_owner:a1.current}}function qM(e,t){return{$$typeof:Jf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jf}function JM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Ib=/\/+/g;function d0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?JM(""+e.key):t.toString(36)}function bm(e,t,i,a,c){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(p){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Jf:case BM:m=!0}}if(m)return m=e,c=c(m),e=a===""?"."+d0(m,0):a,Pb(c)?(i="",e!=null&&(i=e.replace(Ib,"$&/")+"/"),bm(c,t,i,"",function(P){return P})):c!=null&&(l1(c)&&(c=qM(c,i+(!c.key||m&&m.key===c.key?"":(""+c.key).replace(Ib,"$&/")+"/")+e)),t.push(c)),1;if(m=0,a=a===""?".":a+":",Pb(e))for(var u=0;u<e.length;u++){p=e[u];var S=a+d0(p,u);m+=bm(p,t,i,S,c)}else if(S=KM(e),typeof S=="function")for(e=S.call(e),u=0;!(p=e.next()).done;)p=p.value,S=a+d0(p,u++),m+=bm(p,t,i,S,c);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function Hp(e,t,i){if(e==null)return e;var a=[],c=0;return bm(e,a,"","",function(p){return t.call(i,p,c++)}),a}function YM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var to={current:null},Sm={transition:null},QM={ReactCurrentDispatcher:to,ReactCurrentBatchConfig:Sm,ReactCurrentOwner:a1};On.Children={map:Hp,forEach:function(e,t,i){Hp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Hp(e,function(){t++}),t},toArray:function(e){return Hp(e,function(t){return t})||[]},only:function(e){if(!l1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};On.Component=Lh;On.Fragment=NM;On.Profiler=$M;On.PureComponent=o1;On.StrictMode=UM;On.Suspense=WM;On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QM;On.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=TE({},e.props),c=e.key,p=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,m=a1.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(S in t)IE.call(t,S)&&!AE.hasOwnProperty(S)&&(a[S]=t[S]===void 0&&u!==void 0?u[S]:t[S])}var S=arguments.length-2;if(S===1)a.children=i;else if(1<S){u=Array(S);for(var P=0;P<S;P++)u[P]=arguments[P+2];a.children=u}return{$$typeof:Jf,type:e.type,key:c,ref:p,props:a,_owner:m}};On.createContext=function(e){return e={$$typeof:GM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:VM,_context:e},e.Consumer=e};On.createElement=ME;On.createFactory=function(e){var t=ME.bind(null,e);return t.type=e,t};On.createRef=function(){return{current:null}};On.forwardRef=function(e){return{$$typeof:ZM,render:e}};On.isValidElement=l1;On.lazy=function(e){return{$$typeof:XM,_payload:{_status:-1,_result:e},_init:YM}};On.memo=function(e,t){return{$$typeof:HM,type:e,compare:t===void 0?null:t}};On.startTransition=function(e){var t=Sm.transition;Sm.transition={};try{e()}finally{Sm.transition=t}};On.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};On.useCallback=function(e,t){return to.current.useCallback(e,t)};On.useContext=function(e){return to.current.useContext(e)};On.useDebugValue=function(){};On.useDeferredValue=function(e){return to.current.useDeferredValue(e)};On.useEffect=function(e,t){return to.current.useEffect(e,t)};On.useId=function(){return to.current.useId()};On.useImperativeHandle=function(e,t,i){return to.current.useImperativeHandle(e,t,i)};On.useInsertionEffect=function(e,t){return to.current.useInsertionEffect(e,t)};On.useLayoutEffect=function(e,t){return to.current.useLayoutEffect(e,t)};On.useMemo=function(e,t){return to.current.useMemo(e,t)};On.useReducer=function(e,t,i){return to.current.useReducer(e,t,i)};On.useRef=function(e){return to.current.useRef(e)};On.useState=function(e){return to.current.useState(e)};On.useSyncExternalStore=function(e,t,i){return to.current.useSyncExternalStore(e,t,i)};On.useTransition=function(){return to.current.useTransition()};On.version="18.2.0";SE.exports=On;var yt=SE.exports;const u1=qf(yt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek=yt,tk=Symbol.for("react.element"),nk=Symbol.for("react.fragment"),rk=Object.prototype.hasOwnProperty,ik=ek.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ok={key:!0,ref:!0,__self:!0,__source:!0};function kE(e,t,i){var a,c={},p=null,m=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(m=t.ref);for(a in t)rk.call(t,a)&&!ok.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:tk,type:e,key:p,ref:m,props:c,_owner:ik.current}}Vg.Fragment=nk;Vg.jsx=kE;Vg.jsxs=kE;bE.exports=Vg;var gt=bE.exports,zE={exports:{}},Vo={},FE={exports:{}},RE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ne,de){var be=ne.length;ne.push(de);e:for(;0<be;){var Ce=be-1>>>1,Ue=ne[Ce];if(0<c(Ue,de))ne[Ce]=de,ne[be]=Ue,be=Ce;else break e}}function i(ne){return ne.length===0?null:ne[0]}function a(ne){if(ne.length===0)return null;var de=ne[0],be=ne.pop();if(be!==de){ne[0]=be;e:for(var Ce=0,Ue=ne.length,Ae=Ue>>>1;Ce<Ae;){var Fe=2*(Ce+1)-1,We=ne[Fe],Ze=Fe+1,it=ne[Ze];if(0>c(We,be))Ze<Ue&&0>c(it,We)?(ne[Ce]=it,ne[Ze]=be,Ce=Ze):(ne[Ce]=We,ne[Fe]=be,Ce=Fe);else if(Ze<Ue&&0>c(it,be))ne[Ce]=it,ne[Ze]=be,Ce=Ze;else break e}}return de}function c(ne,de){var be=ne.sortIndex-de.sortIndex;return be!==0?be:ne.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var m=Date,u=m.now();e.unstable_now=function(){return m.now()-u}}var S=[],P=[],M=1,b=null,C=3,R=!1,B=!1,j=!1,he=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ne){for(var de=i(P);de!==null;){if(de.callback===null)a(P);else if(de.startTime<=ne)a(P),de.sortIndex=de.expirationTime,t(S,de);else break;de=i(P)}}function ae(ne){if(j=!1,G(ne),!B)if(i(S)!==null)B=!0,ce(K);else{var de=i(P);de!==null&&Y(ae,de.startTime-ne)}}function K(ne,de){B=!1,j&&(j=!1,q(O),O=-1),R=!0;var be=C;try{for(G(de),b=i(S);b!==null&&(!(b.expirationTime>de)||ne&&!H());){var Ce=b.callback;if(typeof Ce=="function"){b.callback=null,C=b.priorityLevel;var Ue=Ce(b.expirationTime<=de);de=e.unstable_now(),typeof Ue=="function"?b.callback=Ue:b===i(S)&&a(S),G(de)}else a(S);b=i(S)}if(b!==null)var Ae=!0;else{var Fe=i(P);Fe!==null&&Y(ae,Fe.startTime-de),Ae=!1}return Ae}finally{b=null,C=be,R=!1}}var W=!1,E=null,O=-1,D=5,ee=-1;function H(){return!(e.unstable_now()-ee<D)}function ve(){if(E!==null){var ne=e.unstable_now();ee=ne;var de=!0;try{de=E(!0,ne)}finally{de?_e():(W=!1,E=null)}}else W=!1}var _e;if(typeof X=="function")_e=function(){X(ve)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,oe=pe.port2;pe.port1.onmessage=ve,_e=function(){oe.postMessage(null)}}else _e=function(){he(ve,0)};function ce(ne){E=ne,W||(W=!0,_e())}function Y(ne,de){O=he(function(){ne(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){B||R||(B=!0,ce(K))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return i(S)},e.unstable_next=function(ne){switch(C){case 1:case 2:case 3:var de=3;break;default:de=C}var be=C;C=de;try{return ne()}finally{C=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,de){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var be=C;C=ne;try{return de()}finally{C=be}},e.unstable_scheduleCallback=function(ne,de,be){var Ce=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ce+be:Ce):be=Ce,ne){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=be+Ue,ne={id:M++,callback:de,priorityLevel:ne,startTime:be,expirationTime:Ue,sortIndex:-1},be>Ce?(ne.sortIndex=be,t(P,ne),i(S)===null&&ne===i(P)&&(j?(q(O),O=-1):j=!0,Y(ae,be-Ce))):(ne.sortIndex=Ue,t(S,ne),B||R||(B=!0,ce(K))),ne},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(ne){var de=C;return function(){var be=C;C=de;try{return ne.apply(this,arguments)}finally{C=be}}}})(RE);FE.exports=RE;var sk=FE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=yt,$o=sk;function Pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OE=new Set,Cf={};function rc(e,t){Sh(e,t),Sh(e+"Capture",t)}function Sh(e,t){for(Cf[e]=t,e=0;e<t.length;e++)OE.add(t[e])}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vv=Object.prototype.hasOwnProperty,ak=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ab={},Mb={};function lk(e){return vv.call(Mb,e)?!0:vv.call(Ab,e)?!1:ak.test(e)?Mb[e]=!0:(Ab[e]=!0,!1)}function uk(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ck(e,t,i,a){if(t===null||typeof t>"u"||uk(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function no(e,t,i,a,c,p,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=m}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pi[e]=new no(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pi[t]=new no(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pi[e]=new no(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pi[e]=new no(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pi[e]=new no(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pi[e]=new no(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pi[e]=new no(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pi[e]=new no(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pi[e]=new no(e,5,!1,e.toLowerCase(),null,!1,!1)});var c1=/[\-:]([a-z])/g;function h1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(c1,h1);Pi[t]=new no(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(c1,h1);Pi[t]=new no(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(c1,h1);Pi[t]=new no(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pi[e]=new no(e,1,!1,e.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new no("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pi[e]=new no(e,1,!1,e.toLowerCase(),null,!0,!0)});function d1(e,t,i,a){var c=Pi.hasOwnProperty(t)?Pi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ck(t,i,c,a)&&(i=null),a||c===null?lk(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var el=jE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xp=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Qc=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),LE=Symbol.for("react.provider"),DE=Symbol.for("react.context"),p1=Symbol.for("react.forward_ref"),xv=Symbol.for("react.suspense"),wv=Symbol.for("react.suspense_list"),m1=Symbol.for("react.memo"),Ll=Symbol.for("react.lazy"),BE=Symbol.for("react.offscreen"),kb=Symbol.iterator;function Ud(e){return e===null||typeof e!="object"?null:(e=kb&&e[kb]||e["@@iterator"],typeof e=="function"?e:null)}var kr=Object.assign,f0;function qd(e){if(f0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);f0=t&&t[1]||""}return`
`+f0+e}var p0=!1;function m0(e,t){if(!e||p0)return"";p0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(P){var a=P}Reflect.construct(e,[],t)}else{try{t.call()}catch(P){a=P}e.call(t.prototype)}else{try{throw Error()}catch(P){a=P}e()}}catch(P){if(P&&a&&typeof P.stack=="string"){for(var c=P.stack.split(`
`),p=a.stack.split(`
`),m=c.length-1,u=p.length-1;1<=m&&0<=u&&c[m]!==p[u];)u--;for(;1<=m&&0<=u;m--,u--)if(c[m]!==p[u]){if(m!==1||u!==1)do if(m--,u--,0>u||c[m]!==p[u]){var S=`
`+c[m].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=m&&0<=u);break}}}finally{p0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?qd(e):""}function hk(e){switch(e.tag){case 5:return qd(e.type);case 16:return qd("Lazy");case 13:return qd("Suspense");case 19:return qd("SuspenseList");case 0:case 2:case 15:return e=m0(e.type,!1),e;case 11:return e=m0(e.type.render,!1),e;case 1:return e=m0(e.type,!0),e;default:return""}}function bv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qc:return"Fragment";case Yc:return"Portal";case _v:return"Profiler";case f1:return"StrictMode";case xv:return"Suspense";case wv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case DE:return(e.displayName||"Context")+".Consumer";case LE:return(e._context.displayName||"Context")+".Provider";case p1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case m1:return t=e.displayName||null,t!==null?t:bv(e.type)||"Memo";case Ll:t=e._payload,e=e._init;try{return bv(e(t))}catch{}}return null}function dk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bv(t);case 8:return t===f1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function NE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fk(e){var t=NE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){a=""+m,p.call(this,m)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kp(e){e._valueTracker||(e._valueTracker=fk(e))}function UE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=NE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Vm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sv(e,t){var i=t.checked;return kr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function zb(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=tu(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $E(e,t){t=t.checked,t!=null&&d1(e,"checked",t,!1)}function Ev(e,t){$E(e,t);var i=tu(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tv(e,t.type,i):t.hasOwnProperty("defaultValue")&&Tv(e,t.type,tu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Tv(e,t,i){(t!=="number"||Vm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Jd=Array.isArray;function ph(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+tu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Cv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pt(91));return kr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Pt(92));if(Jd(i)){if(1<i.length)throw Error(Pt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:tu(i)}}function VE(e,t){var i=tu(t.value),a=tu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function jb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qp,ZE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qp=qp||document.createElement("div"),qp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var cf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pk=["Webkit","ms","Moz","O"];Object.keys(cf).forEach(function(e){pk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cf[t]=cf[e]})});function WE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||cf.hasOwnProperty(e)&&cf[e]?(""+t).trim():t+"px"}function HE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=WE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var mk=kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iv(e,t){if(t){if(mk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pt(62))}}function Av(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mv=null;function g1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kv=null,mh=null,gh=null;function Ob(e){if(e=ep(e)){if(typeof kv!="function")throw Error(Pt(280));var t=e.stateNode;t&&(t=Xg(t),kv(e.stateNode,e.type,t))}}function XE(e){mh?gh?gh.push(e):gh=[e]:mh=e}function KE(){if(mh){var e=mh,t=gh;if(gh=mh=null,Ob(e),t)for(e=0;e<t.length;e++)Ob(t[e])}}function qE(e,t){return e(t)}function JE(){}var g0=!1;function YE(e,t,i){if(g0)return e(t,i);g0=!0;try{return qE(e,t,i)}finally{g0=!1,(mh!==null||gh!==null)&&(JE(),KE())}}function If(e,t){var i=e.stateNode;if(i===null)return null;var a=Xg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Pt(231,t,typeof i));return i}var zv=!1;if(Ha)try{var $d={};Object.defineProperty($d,"passive",{get:function(){zv=!0}}),window.addEventListener("test",$d,$d),window.removeEventListener("test",$d,$d)}catch{zv=!1}function gk(e,t,i,a,c,p,m,u,S){var P=Array.prototype.slice.call(arguments,3);try{t.apply(i,P)}catch(M){this.onError(M)}}var hf=!1,Gm=null,Zm=!1,Fv=null,yk={onError:function(e){hf=!0,Gm=e}};function vk(e,t,i,a,c,p,m,u,S){hf=!1,Gm=null,gk.apply(yk,arguments)}function _k(e,t,i,a,c,p,m,u,S){if(vk.apply(this,arguments),hf){if(hf){var P=Gm;hf=!1,Gm=null}else throw Error(Pt(198));Zm||(Zm=!0,Fv=P)}}function ic(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function QE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lb(e){if(ic(e)!==e)throw Error(Pt(188))}function xk(e){var t=e.alternate;if(!t){if(t=ic(e),t===null)throw Error(Pt(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var p=c.alternate;if(p===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===p.child){for(p=c.child;p;){if(p===i)return Lb(c),e;if(p===a)return Lb(c),t;p=p.sibling}throw Error(Pt(188))}if(i.return!==a.return)i=c,a=p;else{for(var m=!1,u=c.child;u;){if(u===i){m=!0,i=c,a=p;break}if(u===a){m=!0,a=c,i=p;break}u=u.sibling}if(!m){for(u=p.child;u;){if(u===i){m=!0,i=p,a=c;break}if(u===a){m=!0,a=p,i=c;break}u=u.sibling}if(!m)throw Error(Pt(189))}}if(i.alternate!==a)throw Error(Pt(190))}if(i.tag!==3)throw Error(Pt(188));return i.stateNode.current===i?e:t}function eT(e){return e=xk(e),e!==null?tT(e):null}function tT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tT(e);if(t!==null)return t;e=e.sibling}return null}var nT=$o.unstable_scheduleCallback,Db=$o.unstable_cancelCallback,wk=$o.unstable_shouldYield,bk=$o.unstable_requestPaint,Nr=$o.unstable_now,Sk=$o.unstable_getCurrentPriorityLevel,y1=$o.unstable_ImmediatePriority,rT=$o.unstable_UserBlockingPriority,Wm=$o.unstable_NormalPriority,Ek=$o.unstable_LowPriority,iT=$o.unstable_IdlePriority,Gg=null,fa=null;function Tk(e){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(Gg,e,void 0,(e.current.flags&128)===128)}catch{}}var js=Math.clz32?Math.clz32:Ik,Ck=Math.log,Pk=Math.LN2;function Ik(e){return e>>>=0,e===0?32:31-(Ck(e)/Pk|0)|0}var Jp=64,Yp=4194304;function Yd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hm(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,p=e.pingedLanes,m=i&268435455;if(m!==0){var u=m&~c;u!==0?a=Yd(u):(p&=m,p!==0&&(a=Yd(p)))}else m=i&~c,m!==0?a=Yd(m):p!==0&&(a=Yd(p));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,p=t&-t,c>=p||c===16&&(p&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-js(t),c=1<<i,a|=e[i],t&=~c;return a}function Ak(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mk(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,p=e.pendingLanes;0<p;){var m=31-js(p),u=1<<m,S=c[m];S===-1?(!(u&i)||u&a)&&(c[m]=Ak(u,t)):S<=t&&(e.expiredLanes|=u),p&=~u}}function Rv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oT(){var e=Jp;return Jp<<=1,!(Jp&4194240)&&(Jp=64),e}function y0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Yf(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-js(t),e[t]=i}function kk(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-js(i),p=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~p}}function v1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-js(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var tr=0;function sT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aT,_1,lT,uT,cT,jv=!1,Qp=[],Wl=null,Hl=null,Xl=null,Af=new Map,Mf=new Map,Ul=[],zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bb(e,t){switch(e){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":Xl=null;break;case"pointerover":case"pointerout":Af.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(t.pointerId)}}function Vd(e,t,i,a,c,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:p,targetContainers:[c]},t!==null&&(t=ep(t),t!==null&&_1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Fk(e,t,i,a,c){switch(t){case"focusin":return Wl=Vd(Wl,e,t,i,a,c),!0;case"dragenter":return Hl=Vd(Hl,e,t,i,a,c),!0;case"mouseover":return Xl=Vd(Xl,e,t,i,a,c),!0;case"pointerover":var p=c.pointerId;return Af.set(p,Vd(Af.get(p)||null,e,t,i,a,c)),!0;case"gotpointercapture":return p=c.pointerId,Mf.set(p,Vd(Mf.get(p)||null,e,t,i,a,c)),!0}return!1}function hT(e){var t=Uu(e.target);if(t!==null){var i=ic(t);if(i!==null){if(t=i.tag,t===13){if(t=QE(i),t!==null){e.blockedOn=t,cT(e.priority,function(){lT(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Em(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Ov(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);Mv=a,i.target.dispatchEvent(a),Mv=null}else return t=ep(i),t!==null&&_1(t),e.blockedOn=i,!1;t.shift()}return!0}function Nb(e,t,i){Em(e)&&i.delete(t)}function Rk(){jv=!1,Wl!==null&&Em(Wl)&&(Wl=null),Hl!==null&&Em(Hl)&&(Hl=null),Xl!==null&&Em(Xl)&&(Xl=null),Af.forEach(Nb),Mf.forEach(Nb)}function Gd(e,t){e.blockedOn===t&&(e.blockedOn=null,jv||(jv=!0,$o.unstable_scheduleCallback($o.unstable_NormalPriority,Rk)))}function kf(e){function t(c){return Gd(c,e)}if(0<Qp.length){Gd(Qp[0],e);for(var i=1;i<Qp.length;i++){var a=Qp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Wl!==null&&Gd(Wl,e),Hl!==null&&Gd(Hl,e),Xl!==null&&Gd(Xl,e),Af.forEach(t),Mf.forEach(t),i=0;i<Ul.length;i++)a=Ul[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ul.length&&(i=Ul[0],i.blockedOn===null);)hT(i),i.blockedOn===null&&Ul.shift()}var yh=el.ReactCurrentBatchConfig,Xm=!0;function jk(e,t,i,a){var c=tr,p=yh.transition;yh.transition=null;try{tr=1,x1(e,t,i,a)}finally{tr=c,yh.transition=p}}function Ok(e,t,i,a){var c=tr,p=yh.transition;yh.transition=null;try{tr=4,x1(e,t,i,a)}finally{tr=c,yh.transition=p}}function x1(e,t,i,a){if(Xm){var c=Ov(e,t,i,a);if(c===null)P0(e,t,a,Km,i),Bb(e,a);else if(Fk(c,e,t,i,a))a.stopPropagation();else if(Bb(e,a),t&4&&-1<zk.indexOf(e)){for(;c!==null;){var p=ep(c);if(p!==null&&aT(p),p=Ov(e,t,i,a),p===null&&P0(e,t,a,Km,i),p===c)break;c=p}c!==null&&a.stopPropagation()}else P0(e,t,a,null,i)}}var Km=null;function Ov(e,t,i,a){if(Km=null,e=g1(a),e=Uu(e),e!==null)if(t=ic(e),t===null)e=null;else if(i=t.tag,i===13){if(e=QE(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Km=e,null}function dT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sk()){case y1:return 1;case rT:return 4;case Wm:case Ek:return 16;case iT:return 536870912;default:return 16}default:return 16}}var Vl=null,w1=null,Tm=null;function fT(){if(Tm)return Tm;var e,t=w1,i=t.length,a,c="value"in Vl?Vl.value:Vl.textContent,p=c.length;for(e=0;e<i&&t[e]===c[e];e++);var m=i-e;for(a=1;a<=m&&t[i-a]===c[p-a];a++);return Tm=c.slice(e,1<a?1-a:void 0)}function Cm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function em(){return!0}function Ub(){return!1}function Go(e){function t(i,a,c,p,m){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=p,this.target=m,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(p):p[u]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?em:Ub,this.isPropagationStopped=Ub,this}return kr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=em)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=em)},persist:function(){},isPersistent:em}),t}var Dh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b1=Go(Dh),Qf=kr({},Dh,{view:0,detail:0}),Lk=Go(Qf),v0,_0,Zd,Zg=kr({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:S1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zd&&(Zd&&e.type==="mousemove"?(v0=e.screenX-Zd.screenX,_0=e.screenY-Zd.screenY):_0=v0=0,Zd=e),v0)},movementY:function(e){return"movementY"in e?e.movementY:_0}}),$b=Go(Zg),Dk=kr({},Zg,{dataTransfer:0}),Bk=Go(Dk),Nk=kr({},Qf,{relatedTarget:0}),x0=Go(Nk),Uk=kr({},Dh,{animationName:0,elapsedTime:0,pseudoElement:0}),$k=Go(Uk),Vk=kr({},Dh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gk=Go(Vk),Zk=kr({},Dh,{data:0}),Vb=Go(Zk),Wk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xk[e])?!!t[e]:!1}function S1(){return Kk}var qk=kr({},Qf,{key:function(e){if(e.key){var t=Wk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:S1,charCode:function(e){return e.type==="keypress"?Cm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jk=Go(qk),Yk=kr({},Zg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gb=Go(Yk),Qk=kr({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:S1}),e3=Go(Qk),t3=kr({},Dh,{propertyName:0,elapsedTime:0,pseudoElement:0}),n3=Go(t3),r3=kr({},Zg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),i3=Go(r3),o3=[9,13,27,32],E1=Ha&&"CompositionEvent"in window,df=null;Ha&&"documentMode"in document&&(df=document.documentMode);var s3=Ha&&"TextEvent"in window&&!df,pT=Ha&&(!E1||df&&8<df&&11>=df),Zb=" ",Wb=!1;function mT(e,t){switch(e){case"keyup":return o3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var eh=!1;function a3(e,t){switch(e){case"compositionend":return gT(t);case"keypress":return t.which!==32?null:(Wb=!0,Zb);case"textInput":return e=t.data,e===Zb&&Wb?null:e;default:return null}}function l3(e,t){if(eh)return e==="compositionend"||!E1&&mT(e,t)?(e=fT(),Tm=w1=Vl=null,eh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pT&&t.locale!=="ko"?null:t.data;default:return null}}var u3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!u3[e.type]:t==="textarea"}function yT(e,t,i,a){XE(a),t=qm(t,"onChange"),0<t.length&&(i=new b1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var ff=null,zf=null;function c3(e){IT(e,0)}function Wg(e){var t=rh(e);if(UE(t))return e}function h3(e,t){if(e==="change")return t}var vT=!1;if(Ha){var w0;if(Ha){var b0="oninput"in document;if(!b0){var Xb=document.createElement("div");Xb.setAttribute("oninput","return;"),b0=typeof Xb.oninput=="function"}w0=b0}else w0=!1;vT=w0&&(!document.documentMode||9<document.documentMode)}function Kb(){ff&&(ff.detachEvent("onpropertychange",_T),zf=ff=null)}function _T(e){if(e.propertyName==="value"&&Wg(zf)){var t=[];yT(t,zf,e,g1(e)),YE(c3,t)}}function d3(e,t,i){e==="focusin"?(Kb(),ff=t,zf=i,ff.attachEvent("onpropertychange",_T)):e==="focusout"&&Kb()}function f3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wg(zf)}function p3(e,t){if(e==="click")return Wg(t)}function m3(e,t){if(e==="input"||e==="change")return Wg(t)}function g3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ls=typeof Object.is=="function"?Object.is:g3;function Ff(e,t){if(Ls(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!vv.call(t,c)||!Ls(e[c],t[c]))return!1}return!0}function qb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jb(e,t){var i=qb(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=qb(i)}}function xT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wT(){for(var e=window,t=Vm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Vm(e.document)}return t}function T1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function y3(e){var t=wT(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&xT(i.ownerDocument.documentElement,i)){if(a!==null&&T1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,p=Math.min(a.start,c);a=a.end===void 0?p:Math.min(a.end,c),!e.extend&&p>a&&(c=a,a=p,p=c),c=Jb(i,p);var m=Jb(i,a);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),p>a?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var v3=Ha&&"documentMode"in document&&11>=document.documentMode,th=null,Lv=null,pf=null,Dv=!1;function Yb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Dv||th==null||th!==Vm(a)||(a=th,"selectionStart"in a&&T1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),pf&&Ff(pf,a)||(pf=a,a=qm(Lv,"onSelect"),0<a.length&&(t=new b1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=th)))}function tm(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var nh={animationend:tm("Animation","AnimationEnd"),animationiteration:tm("Animation","AnimationIteration"),animationstart:tm("Animation","AnimationStart"),transitionend:tm("Transition","TransitionEnd")},S0={},bT={};Ha&&(bT=document.createElement("div").style,"AnimationEvent"in window||(delete nh.animationend.animation,delete nh.animationiteration.animation,delete nh.animationstart.animation),"TransitionEvent"in window||delete nh.transitionend.transition);function Hg(e){if(S0[e])return S0[e];if(!nh[e])return e;var t=nh[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in bT)return S0[e]=t[i];return e}var ST=Hg("animationend"),ET=Hg("animationiteration"),TT=Hg("animationstart"),CT=Hg("transitionend"),PT=new Map,Qb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function au(e,t){PT.set(e,t),rc(t,[e])}for(var E0=0;E0<Qb.length;E0++){var T0=Qb[E0],_3=T0.toLowerCase(),x3=T0[0].toUpperCase()+T0.slice(1);au(_3,"on"+x3)}au(ST,"onAnimationEnd");au(ET,"onAnimationIteration");au(TT,"onAnimationStart");au("dblclick","onDoubleClick");au("focusin","onFocus");au("focusout","onBlur");au(CT,"onTransitionEnd");Sh("onMouseEnter",["mouseout","mouseover"]);Sh("onMouseLeave",["mouseout","mouseover"]);Sh("onPointerEnter",["pointerout","pointerover"]);Sh("onPointerLeave",["pointerout","pointerover"]);rc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rc("onBeforeInput",["compositionend","keypress","textInput","paste"]);rc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qd));function e2(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,_k(a,t,void 0,e),e.currentTarget=null}function IT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var p=void 0;if(t)for(var m=a.length-1;0<=m;m--){var u=a[m],S=u.instance,P=u.currentTarget;if(u=u.listener,S!==p&&c.isPropagationStopped())break e;e2(c,u,P),p=S}else for(m=0;m<a.length;m++){if(u=a[m],S=u.instance,P=u.currentTarget,u=u.listener,S!==p&&c.isPropagationStopped())break e;e2(c,u,P),p=S}}}if(Zm)throw e=Fv,Zm=!1,Fv=null,e}function mr(e,t){var i=t[Vv];i===void 0&&(i=t[Vv]=new Set);var a=e+"__bubble";i.has(a)||(AT(t,e,2,!1),i.add(a))}function C0(e,t,i){var a=0;t&&(a|=4),AT(i,e,a,t)}var nm="_reactListening"+Math.random().toString(36).slice(2);function Rf(e){if(!e[nm]){e[nm]=!0,OE.forEach(function(i){i!=="selectionchange"&&(w3.has(i)||C0(i,!1,e),C0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nm]||(t[nm]=!0,C0("selectionchange",!1,t))}}function AT(e,t,i,a){switch(dT(t)){case 1:var c=jk;break;case 4:c=Ok;break;default:c=x1}i=c.bind(null,t,i,e),c=void 0,!zv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function P0(e,t,i,a,c){var p=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var u=a.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(m===4)for(m=a.return;m!==null;){var S=m.tag;if((S===3||S===4)&&(S=m.stateNode.containerInfo,S===c||S.nodeType===8&&S.parentNode===c))return;m=m.return}for(;u!==null;){if(m=Uu(u),m===null)return;if(S=m.tag,S===5||S===6){a=p=m;continue e}u=u.parentNode}}a=a.return}YE(function(){var P=p,M=g1(i),b=[];e:{var C=PT.get(e);if(C!==void 0){var R=b1,B=e;switch(e){case"keypress":if(Cm(i)===0)break e;case"keydown":case"keyup":R=Jk;break;case"focusin":B="focus",R=x0;break;case"focusout":B="blur",R=x0;break;case"beforeblur":case"afterblur":R=x0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=$b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=Bk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=e3;break;case ST:case ET:case TT:R=$k;break;case CT:R=n3;break;case"scroll":R=Lk;break;case"wheel":R=i3;break;case"copy":case"cut":case"paste":R=Gk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Gb}var j=(t&4)!==0,he=!j&&e==="scroll",q=j?C!==null?C+"Capture":null:C;j=[];for(var X=P,G;X!==null;){G=X;var ae=G.stateNode;if(G.tag===5&&ae!==null&&(G=ae,q!==null&&(ae=If(X,q),ae!=null&&j.push(jf(X,ae,G)))),he)break;X=X.return}0<j.length&&(C=new R(C,B,null,i,M),b.push({event:C,listeners:j}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",C&&i!==Mv&&(B=i.relatedTarget||i.fromElement)&&(Uu(B)||B[Xa]))break e;if((R||C)&&(C=M.window===M?M:(C=M.ownerDocument)?C.defaultView||C.parentWindow:window,R?(B=i.relatedTarget||i.toElement,R=P,B=B?Uu(B):null,B!==null&&(he=ic(B),B!==he||B.tag!==5&&B.tag!==6)&&(B=null)):(R=null,B=P),R!==B)){if(j=$b,ae="onMouseLeave",q="onMouseEnter",X="mouse",(e==="pointerout"||e==="pointerover")&&(j=Gb,ae="onPointerLeave",q="onPointerEnter",X="pointer"),he=R==null?C:rh(R),G=B==null?C:rh(B),C=new j(ae,X+"leave",R,i,M),C.target=he,C.relatedTarget=G,ae=null,Uu(M)===P&&(j=new j(q,X+"enter",B,i,M),j.target=G,j.relatedTarget=he,ae=j),he=ae,R&&B)t:{for(j=R,q=B,X=0,G=j;G;G=Gc(G))X++;for(G=0,ae=q;ae;ae=Gc(ae))G++;for(;0<X-G;)j=Gc(j),X--;for(;0<G-X;)q=Gc(q),G--;for(;X--;){if(j===q||q!==null&&j===q.alternate)break t;j=Gc(j),q=Gc(q)}j=null}else j=null;R!==null&&t2(b,C,R,j,!1),B!==null&&he!==null&&t2(b,he,B,j,!0)}}e:{if(C=P?rh(P):window,R=C.nodeName&&C.nodeName.toLowerCase(),R==="select"||R==="input"&&C.type==="file")var K=h3;else if(Hb(C))if(vT)K=m3;else{K=f3;var W=d3}else(R=C.nodeName)&&R.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(K=p3);if(K&&(K=K(e,P))){yT(b,K,i,M);break e}W&&W(e,C,P),e==="focusout"&&(W=C._wrapperState)&&W.controlled&&C.type==="number"&&Tv(C,"number",C.value)}switch(W=P?rh(P):window,e){case"focusin":(Hb(W)||W.contentEditable==="true")&&(th=W,Lv=P,pf=null);break;case"focusout":pf=Lv=th=null;break;case"mousedown":Dv=!0;break;case"contextmenu":case"mouseup":case"dragend":Dv=!1,Yb(b,i,M);break;case"selectionchange":if(v3)break;case"keydown":case"keyup":Yb(b,i,M)}var E;if(E1)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else eh?mT(e,i)&&(O="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(O="onCompositionStart");O&&(pT&&i.locale!=="ko"&&(eh||O!=="onCompositionStart"?O==="onCompositionEnd"&&eh&&(E=fT()):(Vl=M,w1="value"in Vl?Vl.value:Vl.textContent,eh=!0)),W=qm(P,O),0<W.length&&(O=new Vb(O,e,null,i,M),b.push({event:O,listeners:W}),E?O.data=E:(E=gT(i),E!==null&&(O.data=E)))),(E=s3?a3(e,i):l3(e,i))&&(P=qm(P,"onBeforeInput"),0<P.length&&(M=new Vb("onBeforeInput","beforeinput",null,i,M),b.push({event:M,listeners:P}),M.data=E))}IT(b,t)})}function jf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function qm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,p=c.stateNode;c.tag===5&&p!==null&&(c=p,p=If(e,i),p!=null&&a.unshift(jf(e,p,c)),p=If(e,t),p!=null&&a.push(jf(e,p,c))),e=e.return}return a}function Gc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function t2(e,t,i,a,c){for(var p=t._reactName,m=[];i!==null&&i!==a;){var u=i,S=u.alternate,P=u.stateNode;if(S!==null&&S===a)break;u.tag===5&&P!==null&&(u=P,c?(S=If(i,p),S!=null&&m.unshift(jf(i,S,u))):c||(S=If(i,p),S!=null&&m.push(jf(i,S,u)))),i=i.return}m.length!==0&&e.push({event:t,listeners:m})}var b3=/\r\n?/g,S3=/\u0000|\uFFFD/g;function n2(e){return(typeof e=="string"?e:""+e).replace(b3,`
`).replace(S3,"")}function rm(e,t,i){if(t=n2(t),n2(e)!==t&&i)throw Error(Pt(425))}function Jm(){}var Bv=null,Nv=null;function Uv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $v=typeof setTimeout=="function"?setTimeout:void 0,E3=typeof clearTimeout=="function"?clearTimeout:void 0,r2=typeof Promise=="function"?Promise:void 0,T3=typeof queueMicrotask=="function"?queueMicrotask:typeof r2<"u"?function(e){return r2.resolve(null).then(e).catch(C3)}:$v;function C3(e){setTimeout(function(){throw e})}function I0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),kf(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);kf(t)}function Kl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function i2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Bh=Math.random().toString(36).slice(2),aa="__reactFiber$"+Bh,Of="__reactProps$"+Bh,Xa="__reactContainer$"+Bh,Vv="__reactEvents$"+Bh,P3="__reactListeners$"+Bh,I3="__reactHandles$"+Bh;function Uu(e){var t=e[aa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xa]||i[aa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=i2(e);e!==null;){if(i=e[aa])return i;e=i2(e)}return t}e=i,i=e.parentNode}return null}function ep(e){return e=e[aa]||e[Xa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pt(33))}function Xg(e){return e[Of]||null}var Gv=[],ih=-1;function lu(e){return{current:e}}function gr(e){0>ih||(e.current=Gv[ih],Gv[ih]=null,ih--)}function hr(e,t){ih++,Gv[ih]=e.current,e.current=t}var nu={},Vi=lu(nu),fo=lu(!1),Xu=nu;function Eh(e,t){var i=e.type.contextTypes;if(!i)return nu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},p;for(p in i)c[p]=t[p];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function po(e){return e=e.childContextTypes,e!=null}function Ym(){gr(fo),gr(Vi)}function o2(e,t,i){if(Vi.current!==nu)throw Error(Pt(168));hr(Vi,t),hr(fo,i)}function MT(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Pt(108,dk(e)||"Unknown",c));return kr({},i,a)}function Qm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nu,Xu=Vi.current,hr(Vi,e),hr(fo,fo.current),!0}function s2(e,t,i){var a=e.stateNode;if(!a)throw Error(Pt(169));i?(e=MT(e,t,Xu),a.__reactInternalMemoizedMergedChildContext=e,gr(fo),gr(Vi),hr(Vi,e)):gr(fo),hr(fo,i)}var Ua=null,Kg=!1,A0=!1;function kT(e){Ua===null?Ua=[e]:Ua.push(e)}function A3(e){Kg=!0,kT(e)}function uu(){if(!A0&&Ua!==null){A0=!0;var e=0,t=tr;try{var i=Ua;for(tr=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Ua=null,Kg=!1}catch(c){throw Ua!==null&&(Ua=Ua.slice(e+1)),nT(y1,uu),c}finally{tr=t,A0=!1}}return null}var oh=[],sh=0,eg=null,tg=0,ss=[],as=0,Ku=null,Ga=1,Za="";function Lu(e,t){oh[sh++]=tg,oh[sh++]=eg,eg=e,tg=t}function zT(e,t,i){ss[as++]=Ga,ss[as++]=Za,ss[as++]=Ku,Ku=e;var a=Ga;e=Za;var c=32-js(a)-1;a&=~(1<<c),i+=1;var p=32-js(t)+c;if(30<p){var m=c-c%5;p=(a&(1<<m)-1).toString(32),a>>=m,c-=m,Ga=1<<32-js(t)+c|i<<c|a,Za=p+e}else Ga=1<<p|i<<c|a,Za=e}function C1(e){e.return!==null&&(Lu(e,1),zT(e,1,0))}function P1(e){for(;e===eg;)eg=oh[--sh],oh[sh]=null,tg=oh[--sh],oh[sh]=null;for(;e===Ku;)Ku=ss[--as],ss[as]=null,Za=ss[--as],ss[as]=null,Ga=ss[--as],ss[as]=null}var Bo=null,Do=null,br=!1,ks=null;function FT(e,t){var i=us(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function a2(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bo=e,Do=Kl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bo=e,Do=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Ku!==null?{id:Ga,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=us(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Bo=e,Do=null,!0):!1;default:return!1}}function Zv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wv(e){if(br){var t=Do;if(t){var i=t;if(!a2(e,t)){if(Zv(e))throw Error(Pt(418));t=Kl(i.nextSibling);var a=Bo;t&&a2(e,t)?FT(a,i):(e.flags=e.flags&-4097|2,br=!1,Bo=e)}}else{if(Zv(e))throw Error(Pt(418));e.flags=e.flags&-4097|2,br=!1,Bo=e}}}function l2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bo=e}function im(e){if(e!==Bo)return!1;if(!br)return l2(e),br=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Uv(e.type,e.memoizedProps)),t&&(t=Do)){if(Zv(e))throw RT(),Error(Pt(418));for(;t;)FT(e,t),t=Kl(t.nextSibling)}if(l2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Do=Kl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Do=null}}else Do=Bo?Kl(e.stateNode.nextSibling):null;return!0}function RT(){for(var e=Do;e;)e=Kl(e.nextSibling)}function Th(){Do=Bo=null,br=!1}function I1(e){ks===null?ks=[e]:ks.push(e)}var M3=el.ReactCurrentBatchConfig;function As(e,t){if(e&&e.defaultProps){t=kr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var ng=lu(null),rg=null,ah=null,A1=null;function M1(){A1=ah=rg=null}function k1(e){var t=ng.current;gr(ng),e._currentValue=t}function Hv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function vh(e,t){rg=e,A1=ah=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ho=!0),e.firstContext=null)}function ds(e){var t=e._currentValue;if(A1!==e)if(e={context:e,memoizedValue:t,next:null},ah===null){if(rg===null)throw Error(Pt(308));ah=e,rg.dependencies={lanes:0,firstContext:e}}else ah=ah.next=e;return t}var $u=null;function z1(e){$u===null?$u=[e]:$u.push(e)}function jT(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,z1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ka(e,a)}function Ka(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Dl=!1;function F1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ql(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Vn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Ka(e,i)}return c=a.interleaved,c===null?(t.next=t,z1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Ka(e,i)}function Pm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,v1(e,i)}}function u2(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var m={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?c=p=m:p=p.next=m,i=i.next}while(i!==null);p===null?c=p=t:p=p.next=t}else c=p=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:p,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ig(e,t,i,a){var c=e.updateQueue;Dl=!1;var p=c.firstBaseUpdate,m=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var S=u,P=S.next;S.next=null,m===null?p=P:m.next=P,m=S;var M=e.alternate;M!==null&&(M=M.updateQueue,u=M.lastBaseUpdate,u!==m&&(u===null?M.firstBaseUpdate=P:u.next=P,M.lastBaseUpdate=S))}if(p!==null){var b=c.baseState;m=0,M=P=S=null,u=p;do{var C=u.lane,R=u.eventTime;if((a&C)===C){M!==null&&(M=M.next={eventTime:R,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var B=e,j=u;switch(C=t,R=i,j.tag){case 1:if(B=j.payload,typeof B=="function"){b=B.call(R,b,C);break e}b=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=j.payload,C=typeof B=="function"?B.call(R,b,C):B,C==null)break e;b=kr({},b,C);break e;case 2:Dl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,C=c.effects,C===null?c.effects=[u]:C.push(u))}else R={eventTime:R,lane:C,tag:u.tag,payload:u.payload,callback:u.callback,next:null},M===null?(P=M=R,S=b):M=M.next=R,m|=C;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;C=u,u=C.next,C.next=null,c.lastBaseUpdate=C,c.shared.pending=null}}while(!0);if(M===null&&(S=b),c.baseState=S,c.firstBaseUpdate=P,c.lastBaseUpdate=M,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else p===null&&(c.shared.lanes=0);Ju|=m,e.lanes=m,e.memoizedState=b}}function c2(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(Pt(191,c));c.call(a)}}}var LT=new jE.Component().refs;function Xv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:kr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var qg={isMounted:function(e){return(e=e._reactInternals)?ic(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=Ji(),c=Yl(e),p=Wa(a,c);p.payload=t,i!=null&&(p.callback=i),t=ql(e,p,c),t!==null&&(Os(t,e,c,a),Pm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=Ji(),c=Yl(e),p=Wa(a,c);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=ql(e,p,c),t!==null&&(Os(t,e,c,a),Pm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Ji(),a=Yl(e),c=Wa(i,a);c.tag=2,t!=null&&(c.callback=t),t=ql(e,c,a),t!==null&&(Os(t,e,a,i),Pm(t,e,a))}};function h2(e,t,i,a,c,p,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,p,m):t.prototype&&t.prototype.isPureReactComponent?!Ff(i,a)||!Ff(c,p):!0}function DT(e,t,i){var a=!1,c=nu,p=t.contextType;return typeof p=="object"&&p!==null?p=ds(p):(c=po(t)?Xu:Vi.current,a=t.contextTypes,p=(a=a!=null)?Eh(e,c):nu),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=p),t}function d2(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&qg.enqueueReplaceState(t,t.state,null)}function Kv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=LT,F1(e);var p=t.contextType;typeof p=="object"&&p!==null?c.context=ds(p):(p=po(t)?Xu:Vi.current,c.context=Eh(e,p)),c.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(Xv(e,t,p,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&qg.enqueueReplaceState(c,c.state,null),ig(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Wd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Pt(309));var a=i.stateNode}if(!a)throw Error(Pt(147,e));var c=a,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(m){var u=c.refs;u===LT&&(u=c.refs={}),m===null?delete u[p]:u[p]=m},t._stringRef=p,t)}if(typeof e!="string")throw Error(Pt(284));if(!i._owner)throw Error(Pt(290,e))}return e}function om(e,t){throw e=Object.prototype.toString.call(t),Error(Pt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function f2(e){var t=e._init;return t(e._payload)}function BT(e){function t(q,X){if(e){var G=q.deletions;G===null?(q.deletions=[X],q.flags|=16):G.push(X)}}function i(q,X){if(!e)return null;for(;X!==null;)t(q,X),X=X.sibling;return null}function a(q,X){for(q=new Map;X!==null;)X.key!==null?q.set(X.key,X):q.set(X.index,X),X=X.sibling;return q}function c(q,X){return q=Ql(q,X),q.index=0,q.sibling=null,q}function p(q,X,G){return q.index=G,e?(G=q.alternate,G!==null?(G=G.index,G<X?(q.flags|=2,X):G):(q.flags|=2,X)):(q.flags|=1048576,X)}function m(q){return e&&q.alternate===null&&(q.flags|=2),q}function u(q,X,G,ae){return X===null||X.tag!==6?(X=O0(G,q.mode,ae),X.return=q,X):(X=c(X,G),X.return=q,X)}function S(q,X,G,ae){var K=G.type;return K===Qc?M(q,X,G.props.children,ae,G.key):X!==null&&(X.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ll&&f2(K)===X.type)?(ae=c(X,G.props),ae.ref=Wd(q,X,G),ae.return=q,ae):(ae=Fm(G.type,G.key,G.props,null,q.mode,ae),ae.ref=Wd(q,X,G),ae.return=q,ae)}function P(q,X,G,ae){return X===null||X.tag!==4||X.stateNode.containerInfo!==G.containerInfo||X.stateNode.implementation!==G.implementation?(X=L0(G,q.mode,ae),X.return=q,X):(X=c(X,G.children||[]),X.return=q,X)}function M(q,X,G,ae,K){return X===null||X.tag!==7?(X=Zu(G,q.mode,ae,K),X.return=q,X):(X=c(X,G),X.return=q,X)}function b(q,X,G){if(typeof X=="string"&&X!==""||typeof X=="number")return X=O0(""+X,q.mode,G),X.return=q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Xp:return G=Fm(X.type,X.key,X.props,null,q.mode,G),G.ref=Wd(q,null,X),G.return=q,G;case Yc:return X=L0(X,q.mode,G),X.return=q,X;case Ll:var ae=X._init;return b(q,ae(X._payload),G)}if(Jd(X)||Ud(X))return X=Zu(X,q.mode,G,null),X.return=q,X;om(q,X)}return null}function C(q,X,G,ae){var K=X!==null?X.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return K!==null?null:u(q,X,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Xp:return G.key===K?S(q,X,G,ae):null;case Yc:return G.key===K?P(q,X,G,ae):null;case Ll:return K=G._init,C(q,X,K(G._payload),ae)}if(Jd(G)||Ud(G))return K!==null?null:M(q,X,G,ae,null);om(q,G)}return null}function R(q,X,G,ae,K){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return q=q.get(G)||null,u(X,q,""+ae,K);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Xp:return q=q.get(ae.key===null?G:ae.key)||null,S(X,q,ae,K);case Yc:return q=q.get(ae.key===null?G:ae.key)||null,P(X,q,ae,K);case Ll:var W=ae._init;return R(q,X,G,W(ae._payload),K)}if(Jd(ae)||Ud(ae))return q=q.get(G)||null,M(X,q,ae,K,null);om(X,ae)}return null}function B(q,X,G,ae){for(var K=null,W=null,E=X,O=X=0,D=null;E!==null&&O<G.length;O++){E.index>O?(D=E,E=null):D=E.sibling;var ee=C(q,E,G[O],ae);if(ee===null){E===null&&(E=D);break}e&&E&&ee.alternate===null&&t(q,E),X=p(ee,X,O),W===null?K=ee:W.sibling=ee,W=ee,E=D}if(O===G.length)return i(q,E),br&&Lu(q,O),K;if(E===null){for(;O<G.length;O++)E=b(q,G[O],ae),E!==null&&(X=p(E,X,O),W===null?K=E:W.sibling=E,W=E);return br&&Lu(q,O),K}for(E=a(q,E);O<G.length;O++)D=R(E,q,O,G[O],ae),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?O:D.key),X=p(D,X,O),W===null?K=D:W.sibling=D,W=D);return e&&E.forEach(function(H){return t(q,H)}),br&&Lu(q,O),K}function j(q,X,G,ae){var K=Ud(G);if(typeof K!="function")throw Error(Pt(150));if(G=K.call(G),G==null)throw Error(Pt(151));for(var W=K=null,E=X,O=X=0,D=null,ee=G.next();E!==null&&!ee.done;O++,ee=G.next()){E.index>O?(D=E,E=null):D=E.sibling;var H=C(q,E,ee.value,ae);if(H===null){E===null&&(E=D);break}e&&E&&H.alternate===null&&t(q,E),X=p(H,X,O),W===null?K=H:W.sibling=H,W=H,E=D}if(ee.done)return i(q,E),br&&Lu(q,O),K;if(E===null){for(;!ee.done;O++,ee=G.next())ee=b(q,ee.value,ae),ee!==null&&(X=p(ee,X,O),W===null?K=ee:W.sibling=ee,W=ee);return br&&Lu(q,O),K}for(E=a(q,E);!ee.done;O++,ee=G.next())ee=R(E,q,O,ee.value,ae),ee!==null&&(e&&ee.alternate!==null&&E.delete(ee.key===null?O:ee.key),X=p(ee,X,O),W===null?K=ee:W.sibling=ee,W=ee);return e&&E.forEach(function(ve){return t(q,ve)}),br&&Lu(q,O),K}function he(q,X,G,ae){if(typeof G=="object"&&G!==null&&G.type===Qc&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Xp:e:{for(var K=G.key,W=X;W!==null;){if(W.key===K){if(K=G.type,K===Qc){if(W.tag===7){i(q,W.sibling),X=c(W,G.props.children),X.return=q,q=X;break e}}else if(W.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ll&&f2(K)===W.type){i(q,W.sibling),X=c(W,G.props),X.ref=Wd(q,W,G),X.return=q,q=X;break e}i(q,W);break}else t(q,W);W=W.sibling}G.type===Qc?(X=Zu(G.props.children,q.mode,ae,G.key),X.return=q,q=X):(ae=Fm(G.type,G.key,G.props,null,q.mode,ae),ae.ref=Wd(q,X,G),ae.return=q,q=ae)}return m(q);case Yc:e:{for(W=G.key;X!==null;){if(X.key===W)if(X.tag===4&&X.stateNode.containerInfo===G.containerInfo&&X.stateNode.implementation===G.implementation){i(q,X.sibling),X=c(X,G.children||[]),X.return=q,q=X;break e}else{i(q,X);break}else t(q,X);X=X.sibling}X=L0(G,q.mode,ae),X.return=q,q=X}return m(q);case Ll:return W=G._init,he(q,X,W(G._payload),ae)}if(Jd(G))return B(q,X,G,ae);if(Ud(G))return j(q,X,G,ae);om(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,X!==null&&X.tag===6?(i(q,X.sibling),X=c(X,G),X.return=q,q=X):(i(q,X),X=O0(G,q.mode,ae),X.return=q,q=X),m(q)):i(q,X)}return he}var Ch=BT(!0),NT=BT(!1),tp={},pa=lu(tp),Lf=lu(tp),Df=lu(tp);function Vu(e){if(e===tp)throw Error(Pt(174));return e}function R1(e,t){switch(hr(Df,t),hr(Lf,e),hr(pa,tp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pv(t,e)}gr(pa),hr(pa,t)}function Ph(){gr(pa),gr(Lf),gr(Df)}function UT(e){Vu(Df.current);var t=Vu(pa.current),i=Pv(t,e.type);t!==i&&(hr(Lf,e),hr(pa,i))}function j1(e){Lf.current===e&&(gr(pa),gr(Lf))}var Ir=lu(0);function og(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var M0=[];function O1(){for(var e=0;e<M0.length;e++)M0[e]._workInProgressVersionPrimary=null;M0.length=0}var Im=el.ReactCurrentDispatcher,k0=el.ReactCurrentBatchConfig,qu=0,Mr=null,Yr=null,ci=null,sg=!1,mf=!1,Bf=0,k3=0;function Di(){throw Error(Pt(321))}function L1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ls(e[i],t[i]))return!1;return!0}function D1(e,t,i,a,c,p){if(qu=p,Mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Im.current=e===null||e.memoizedState===null?j3:O3,e=i(a,c),mf){p=0;do{if(mf=!1,Bf=0,25<=p)throw Error(Pt(301));p+=1,ci=Yr=null,t.updateQueue=null,Im.current=L3,e=i(a,c)}while(mf)}if(Im.current=ag,t=Yr!==null&&Yr.next!==null,qu=0,ci=Yr=Mr=null,sg=!1,t)throw Error(Pt(300));return e}function B1(){var e=Bf!==0;return Bf=0,e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Mr.memoizedState=ci=e:ci=ci.next=e,ci}function fs(){if(Yr===null){var e=Mr.alternate;e=e!==null?e.memoizedState:null}else e=Yr.next;var t=ci===null?Mr.memoizedState:ci.next;if(t!==null)ci=t,Yr=e;else{if(e===null)throw Error(Pt(310));Yr=e,e={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},ci===null?Mr.memoizedState=ci=e:ci=ci.next=e}return ci}function Nf(e,t){return typeof t=="function"?t(e):t}function z0(e){var t=fs(),i=t.queue;if(i===null)throw Error(Pt(311));i.lastRenderedReducer=e;var a=Yr,c=a.baseQueue,p=i.pending;if(p!==null){if(c!==null){var m=c.next;c.next=p.next,p.next=m}a.baseQueue=c=p,i.pending=null}if(c!==null){p=c.next,a=a.baseState;var u=m=null,S=null,P=p;do{var M=P.lane;if((qu&M)===M)S!==null&&(S=S.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),a=P.hasEagerState?P.eagerState:e(a,P.action);else{var b={lane:M,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};S===null?(u=S=b,m=a):S=S.next=b,Mr.lanes|=M,Ju|=M}P=P.next}while(P!==null&&P!==p);S===null?m=a:S.next=u,Ls(a,t.memoizedState)||(ho=!0),t.memoizedState=a,t.baseState=m,t.baseQueue=S,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do p=c.lane,Mr.lanes|=p,Ju|=p,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function F0(e){var t=fs(),i=t.queue;if(i===null)throw Error(Pt(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,p=t.memoizedState;if(c!==null){i.pending=null;var m=c=c.next;do p=e(p,m.action),m=m.next;while(m!==c);Ls(p,t.memoizedState)||(ho=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,a]}function $T(){}function VT(e,t){var i=Mr,a=fs(),c=t(),p=!Ls(a.memoizedState,c);if(p&&(a.memoizedState=c,ho=!0),a=a.queue,N1(WT.bind(null,i,a,e),[e]),a.getSnapshot!==t||p||ci!==null&&ci.memoizedState.tag&1){if(i.flags|=2048,Uf(9,ZT.bind(null,i,a,c,t),void 0,null),hi===null)throw Error(Pt(349));qu&30||GT(i,t,c)}return c}function GT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Mr.updateQueue,t===null?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function ZT(e,t,i,a){t.value=i,t.getSnapshot=a,HT(t)&&XT(e)}function WT(e,t,i){return i(function(){HT(t)&&XT(e)})}function HT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ls(e,i)}catch{return!0}}function XT(e){var t=Ka(e,1);t!==null&&Os(t,e,1,-1)}function p2(e){var t=oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nf,lastRenderedState:e},t.queue=e,e=e.dispatch=R3.bind(null,Mr,e),[t.memoizedState,e]}function Uf(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Mr.updateQueue,t===null?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function KT(){return fs().memoizedState}function Am(e,t,i,a){var c=oa();Mr.flags|=e,c.memoizedState=Uf(1|t,i,void 0,a===void 0?null:a)}function Jg(e,t,i,a){var c=fs();a=a===void 0?null:a;var p=void 0;if(Yr!==null){var m=Yr.memoizedState;if(p=m.destroy,a!==null&&L1(a,m.deps)){c.memoizedState=Uf(t,i,p,a);return}}Mr.flags|=e,c.memoizedState=Uf(1|t,i,p,a)}function m2(e,t){return Am(8390656,8,e,t)}function N1(e,t){return Jg(2048,8,e,t)}function qT(e,t){return Jg(4,2,e,t)}function JT(e,t){return Jg(4,4,e,t)}function YT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function QT(e,t,i){return i=i!=null?i.concat([e]):null,Jg(4,4,YT.bind(null,t,e),i)}function U1(){}function eC(e,t){var i=fs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&L1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function tC(e,t){var i=fs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&L1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function nC(e,t,i){return qu&21?(Ls(i,t)||(i=oT(),Mr.lanes|=i,Ju|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ho=!0),e.memoizedState=i)}function z3(e,t){var i=tr;tr=i!==0&&4>i?i:4,e(!0);var a=k0.transition;k0.transition={};try{e(!1),t()}finally{tr=i,k0.transition=a}}function rC(){return fs().memoizedState}function F3(e,t,i){var a=Yl(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},iC(e))oC(t,i);else if(i=jT(e,t,i,a),i!==null){var c=Ji();Os(i,e,a,c),sC(i,t,a)}}function R3(e,t,i){var a=Yl(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(iC(e))oC(t,c);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var m=t.lastRenderedState,u=p(m,i);if(c.hasEagerState=!0,c.eagerState=u,Ls(u,m)){var S=t.interleaved;S===null?(c.next=c,z1(t)):(c.next=S.next,S.next=c),t.interleaved=c;return}}catch{}finally{}i=jT(e,t,c,a),i!==null&&(c=Ji(),Os(i,e,a,c),sC(i,t,a))}}function iC(e){var t=e.alternate;return e===Mr||t!==null&&t===Mr}function oC(e,t){mf=sg=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function sC(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,v1(e,i)}}var ag={readContext:ds,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},j3={readContext:ds,useCallback:function(e,t){return oa().memoizedState=[e,t===void 0?null:t],e},useContext:ds,useEffect:m2,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Am(4194308,4,YT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Am(4194308,4,e,t)},useInsertionEffect:function(e,t){return Am(4,2,e,t)},useMemo:function(e,t){var i=oa();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=oa();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=F3.bind(null,Mr,e),[a.memoizedState,e]},useRef:function(e){var t=oa();return e={current:e},t.memoizedState=e},useState:p2,useDebugValue:U1,useDeferredValue:function(e){return oa().memoizedState=e},useTransition:function(){var e=p2(!1),t=e[0];return e=z3.bind(null,e[1]),oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Mr,c=oa();if(br){if(i===void 0)throw Error(Pt(407));i=i()}else{if(i=t(),hi===null)throw Error(Pt(349));qu&30||GT(a,t,i)}c.memoizedState=i;var p={value:i,getSnapshot:t};return c.queue=p,m2(WT.bind(null,a,p,e),[e]),a.flags|=2048,Uf(9,ZT.bind(null,a,p,i,t),void 0,null),i},useId:function(){var e=oa(),t=hi.identifierPrefix;if(br){var i=Za,a=Ga;i=(a&~(1<<32-js(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Bf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=k3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},O3={readContext:ds,useCallback:eC,useContext:ds,useEffect:N1,useImperativeHandle:QT,useInsertionEffect:qT,useLayoutEffect:JT,useMemo:tC,useReducer:z0,useRef:KT,useState:function(){return z0(Nf)},useDebugValue:U1,useDeferredValue:function(e){var t=fs();return nC(t,Yr.memoizedState,e)},useTransition:function(){var e=z0(Nf)[0],t=fs().memoizedState;return[e,t]},useMutableSource:$T,useSyncExternalStore:VT,useId:rC,unstable_isNewReconciler:!1},L3={readContext:ds,useCallback:eC,useContext:ds,useEffect:N1,useImperativeHandle:QT,useInsertionEffect:qT,useLayoutEffect:JT,useMemo:tC,useReducer:F0,useRef:KT,useState:function(){return F0(Nf)},useDebugValue:U1,useDeferredValue:function(e){var t=fs();return Yr===null?t.memoizedState=e:nC(t,Yr.memoizedState,e)},useTransition:function(){var e=F0(Nf)[0],t=fs().memoizedState;return[e,t]},useMutableSource:$T,useSyncExternalStore:VT,useId:rC,unstable_isNewReconciler:!1};function Ih(e,t){try{var i="",a=t;do i+=hk(a),a=a.return;while(a);var c=i}catch(p){c=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:c,digest:null}}function R0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function qv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var D3=typeof WeakMap=="function"?WeakMap:Map;function aC(e,t,i){i=Wa(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){ug||(ug=!0,s_=a),qv(e,t)},i}function lC(e,t,i){i=Wa(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){qv(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){qv(e,t),typeof a!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),i}function g2(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new D3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=Y3.bind(null,e,t,i),t.then(e,e))}function y2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function v2(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Wa(-1,1),t.tag=2,ql(i,t,1))),i.lanes|=1),e)}var B3=el.ReactCurrentOwner,ho=!1;function Hi(e,t,i,a){t.child=e===null?NT(t,null,i,a):Ch(t,e.child,i,a)}function _2(e,t,i,a,c){i=i.render;var p=t.ref;return vh(t,c),a=D1(e,t,i,a,p,c),i=B1(),e!==null&&!ho?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,qa(e,t,c)):(br&&i&&C1(t),t.flags|=1,Hi(e,t,a,c),t.child)}function x2(e,t,i,a,c){if(e===null){var p=i.type;return typeof p=="function"&&!K1(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,uC(e,t,p,a,c)):(e=Fm(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&c)){var m=p.memoizedProps;if(i=i.compare,i=i!==null?i:Ff,i(m,a)&&e.ref===t.ref)return qa(e,t,c)}return t.flags|=1,e=Ql(p,a),e.ref=t.ref,e.return=t,t.child=e}function uC(e,t,i,a,c){if(e!==null){var p=e.memoizedProps;if(Ff(p,a)&&e.ref===t.ref)if(ho=!1,t.pendingProps=a=p,(e.lanes&c)!==0)e.flags&131072&&(ho=!0);else return t.lanes=e.lanes,qa(e,t,c)}return Jv(e,t,i,a,c)}function cC(e,t,i){var a=t.pendingProps,c=a.children,p=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(uh,Ro),Ro|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,hr(uh,Ro),Ro|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=p!==null?p.baseLanes:i,hr(uh,Ro),Ro|=a}else p!==null?(a=p.baseLanes|i,t.memoizedState=null):a=i,hr(uh,Ro),Ro|=a;return Hi(e,t,c,i),t.child}function hC(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Jv(e,t,i,a,c){var p=po(i)?Xu:Vi.current;return p=Eh(t,p),vh(t,c),i=D1(e,t,i,a,p,c),a=B1(),e!==null&&!ho?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,qa(e,t,c)):(br&&a&&C1(t),t.flags|=1,Hi(e,t,i,c),t.child)}function w2(e,t,i,a,c){if(po(i)){var p=!0;Qm(t)}else p=!1;if(vh(t,c),t.stateNode===null)Mm(e,t),DT(t,i,a),Kv(t,i,a,c),a=!0;else if(e===null){var m=t.stateNode,u=t.memoizedProps;m.props=u;var S=m.context,P=i.contextType;typeof P=="object"&&P!==null?P=ds(P):(P=po(i)?Xu:Vi.current,P=Eh(t,P));var M=i.getDerivedStateFromProps,b=typeof M=="function"||typeof m.getSnapshotBeforeUpdate=="function";b||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(u!==a||S!==P)&&d2(t,m,a,P),Dl=!1;var C=t.memoizedState;m.state=C,ig(t,a,m,c),S=t.memoizedState,u!==a||C!==S||fo.current||Dl?(typeof M=="function"&&(Xv(t,i,M,a),S=t.memoizedState),(u=Dl||h2(t,i,u,a,C,S,P))?(b||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),m.props=a,m.state=S,m.context=P,a=u):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{m=t.stateNode,OT(e,t),u=t.memoizedProps,P=t.type===t.elementType?u:As(t.type,u),m.props=P,b=t.pendingProps,C=m.context,S=i.contextType,typeof S=="object"&&S!==null?S=ds(S):(S=po(i)?Xu:Vi.current,S=Eh(t,S));var R=i.getDerivedStateFromProps;(M=typeof R=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(u!==b||C!==S)&&d2(t,m,a,S),Dl=!1,C=t.memoizedState,m.state=C,ig(t,a,m,c);var B=t.memoizedState;u!==b||C!==B||fo.current||Dl?(typeof R=="function"&&(Xv(t,i,R,a),B=t.memoizedState),(P=Dl||h2(t,i,P,a,C,B,S)||!1)?(M||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(a,B,S),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(a,B,S)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=B),m.props=a,m.state=B,m.context=S,a=P):(typeof m.componentDidUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),a=!1)}return Yv(e,t,i,a,p,c)}function Yv(e,t,i,a,c,p){hC(e,t);var m=(t.flags&128)!==0;if(!a&&!m)return c&&s2(t,i,!1),qa(e,t,p);a=t.stateNode,B3.current=t;var u=m&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&m?(t.child=Ch(t,e.child,null,p),t.child=Ch(t,null,u,p)):Hi(e,t,u,p),t.memoizedState=a.state,c&&s2(t,i,!0),t.child}function dC(e){var t=e.stateNode;t.pendingContext?o2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&o2(e,t.context,!1),R1(e,t.containerInfo)}function b2(e,t,i,a,c){return Th(),I1(c),t.flags|=256,Hi(e,t,i,a),t.child}var Qv={dehydrated:null,treeContext:null,retryLane:0};function e_(e){return{baseLanes:e,cachePool:null,transitions:null}}function fC(e,t,i){var a=t.pendingProps,c=Ir.current,p=!1,m=(t.flags&128)!==0,u;if((u=m)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),hr(Ir,c&1),e===null)return Wv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=a.children,e=a.fallback,p?(a=t.mode,p=t.child,m={mode:"hidden",children:m},!(a&1)&&p!==null?(p.childLanes=0,p.pendingProps=m):p=ey(m,a,0,null),e=Zu(e,a,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=e_(i),t.memoizedState=Qv,e):$1(t,m));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return N3(e,t,m,a,u,c,i);if(p){p=a.fallback,m=t.mode,c=e.child,u=c.sibling;var S={mode:"hidden",children:a.children};return!(m&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=Ql(c,S),a.subtreeFlags=c.subtreeFlags&14680064),u!==null?p=Ql(u,p):(p=Zu(p,m,i,null),p.flags|=2),p.return=t,a.return=t,a.sibling=p,t.child=a,a=p,p=t.child,m=e.child.memoizedState,m=m===null?e_(i):{baseLanes:m.baseLanes|i,cachePool:null,transitions:m.transitions},p.memoizedState=m,p.childLanes=e.childLanes&~i,t.memoizedState=Qv,a}return p=e.child,e=p.sibling,a=Ql(p,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function $1(e,t){return t=ey({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sm(e,t,i,a){return a!==null&&I1(a),Ch(t,e.child,null,i),e=$1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function N3(e,t,i,a,c,p,m){if(i)return t.flags&256?(t.flags&=-257,a=R0(Error(Pt(422))),sm(e,t,m,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=a.fallback,c=t.mode,a=ey({mode:"visible",children:a.children},c,0,null),p=Zu(p,c,m,null),p.flags|=2,a.return=t,p.return=t,a.sibling=p,t.child=a,t.mode&1&&Ch(t,e.child,null,m),t.child.memoizedState=e_(m),t.memoizedState=Qv,p);if(!(t.mode&1))return sm(e,t,m,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var u=a.dgst;return a=u,p=Error(Pt(419)),a=R0(p,a,void 0),sm(e,t,m,a)}if(u=(m&e.childLanes)!==0,ho||u){if(a=hi,a!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|m)?0:c,c!==0&&c!==p.retryLane&&(p.retryLane=c,Ka(e,c),Os(a,e,c,-1))}return X1(),a=R0(Error(Pt(421))),sm(e,t,m,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Q3.bind(null,e),c._reactRetry=t,null):(e=p.treeContext,Do=Kl(c.nextSibling),Bo=t,br=!0,ks=null,e!==null&&(ss[as++]=Ga,ss[as++]=Za,ss[as++]=Ku,Ga=e.id,Za=e.overflow,Ku=t),t=$1(t,a.children),t.flags|=4096,t)}function S2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Hv(e.return,t,i)}function j0(e,t,i,a,c){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=a,p.tail=i,p.tailMode=c)}function pC(e,t,i){var a=t.pendingProps,c=a.revealOrder,p=a.tail;if(Hi(e,t,a.children,i),a=Ir.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&S2(e,i,t);else if(e.tag===19)S2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(hr(Ir,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&og(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),j0(t,!1,c,i,p);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&og(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}j0(t,!0,i,null,p);break;case"together":j0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ju|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pt(153));if(t.child!==null){for(e=t.child,i=Ql(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ql(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function U3(e,t,i){switch(t.tag){case 3:dC(t),Th();break;case 5:UT(t);break;case 1:po(t.type)&&Qm(t);break;case 4:R1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;hr(ng,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(hr(Ir,Ir.current&1),t.flags|=128,null):i&t.child.childLanes?fC(e,t,i):(hr(Ir,Ir.current&1),e=qa(e,t,i),e!==null?e.sibling:null);hr(Ir,Ir.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return pC(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),hr(Ir,Ir.current),a)break;return null;case 22:case 23:return t.lanes=0,cC(e,t,i)}return qa(e,t,i)}var mC,t_,gC,yC;mC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};t_=function(){};gC=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Vu(pa.current);var p=null;switch(i){case"input":c=Sv(e,c),a=Sv(e,a),p=[];break;case"select":c=kr({},c,{value:void 0}),a=kr({},a,{value:void 0}),p=[];break;case"textarea":c=Cv(e,c),a=Cv(e,a),p=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Jm)}Iv(i,a);var m;i=null;for(P in c)if(!a.hasOwnProperty(P)&&c.hasOwnProperty(P)&&c[P]!=null)if(P==="style"){var u=c[P];for(m in u)u.hasOwnProperty(m)&&(i||(i={}),i[m]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(Cf.hasOwnProperty(P)?p||(p=[]):(p=p||[]).push(P,null));for(P in a){var S=a[P];if(u=c!=null?c[P]:void 0,a.hasOwnProperty(P)&&S!==u&&(S!=null||u!=null))if(P==="style")if(u){for(m in u)!u.hasOwnProperty(m)||S&&S.hasOwnProperty(m)||(i||(i={}),i[m]="");for(m in S)S.hasOwnProperty(m)&&u[m]!==S[m]&&(i||(i={}),i[m]=S[m])}else i||(p||(p=[]),p.push(P,i)),i=S;else P==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,u=u?u.__html:void 0,S!=null&&u!==S&&(p=p||[]).push(P,S)):P==="children"?typeof S!="string"&&typeof S!="number"||(p=p||[]).push(P,""+S):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(Cf.hasOwnProperty(P)?(S!=null&&P==="onScroll"&&mr("scroll",e),p||u===S||(p=[])):(p=p||[]).push(P,S))}i&&(p=p||[]).push("style",i);var P=p;(t.updateQueue=P)&&(t.flags|=4)}};yC=function(e,t,i,a){i!==a&&(t.flags|=4)};function Hd(e,t){if(!br)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Bi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function $3(e,t,i){var a=t.pendingProps;switch(P1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(t),null;case 1:return po(t.type)&&Ym(),Bi(t),null;case 3:return a=t.stateNode,Ph(),gr(fo),gr(Vi),O1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(im(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ks!==null&&(u_(ks),ks=null))),t_(e,t),Bi(t),null;case 5:j1(t);var c=Vu(Df.current);if(i=t.type,e!==null&&t.stateNode!=null)gC(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Pt(166));return Bi(t),null}if(e=Vu(pa.current),im(t)){a=t.stateNode,i=t.type;var p=t.memoizedProps;switch(a[aa]=t,a[Of]=p,e=(t.mode&1)!==0,i){case"dialog":mr("cancel",a),mr("close",a);break;case"iframe":case"object":case"embed":mr("load",a);break;case"video":case"audio":for(c=0;c<Qd.length;c++)mr(Qd[c],a);break;case"source":mr("error",a);break;case"img":case"image":case"link":mr("error",a),mr("load",a);break;case"details":mr("toggle",a);break;case"input":zb(a,p),mr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!p.multiple},mr("invalid",a);break;case"textarea":Rb(a,p),mr("invalid",a)}Iv(i,p),c=null;for(var m in p)if(p.hasOwnProperty(m)){var u=p[m];m==="children"?typeof u=="string"?a.textContent!==u&&(p.suppressHydrationWarning!==!0&&rm(a.textContent,u,e),c=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(p.suppressHydrationWarning!==!0&&rm(a.textContent,u,e),c=["children",""+u]):Cf.hasOwnProperty(m)&&u!=null&&m==="onScroll"&&mr("scroll",a)}switch(i){case"input":Kp(a),Fb(a,p,!0);break;case"textarea":Kp(a),jb(a);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(a.onclick=Jm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=m.createElement(i,{is:a.is}):(e=m.createElement(i),i==="select"&&(m=e,a.multiple?m.multiple=!0:a.size&&(m.size=a.size))):e=m.createElementNS(e,i),e[aa]=t,e[Of]=a,mC(e,t,!1,!1),t.stateNode=e;e:{switch(m=Av(i,a),i){case"dialog":mr("cancel",e),mr("close",e),c=a;break;case"iframe":case"object":case"embed":mr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Qd.length;c++)mr(Qd[c],e);c=a;break;case"source":mr("error",e),c=a;break;case"img":case"image":case"link":mr("error",e),mr("load",e),c=a;break;case"details":mr("toggle",e),c=a;break;case"input":zb(e,a),c=Sv(e,a),mr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=kr({},a,{value:void 0}),mr("invalid",e);break;case"textarea":Rb(e,a),c=Cv(e,a),mr("invalid",e);break;default:c=a}Iv(i,c),u=c;for(p in u)if(u.hasOwnProperty(p)){var S=u[p];p==="style"?HE(e,S):p==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&ZE(e,S)):p==="children"?typeof S=="string"?(i!=="textarea"||S!=="")&&Pf(e,S):typeof S=="number"&&Pf(e,""+S):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Cf.hasOwnProperty(p)?S!=null&&p==="onScroll"&&mr("scroll",e):S!=null&&d1(e,p,S,m))}switch(i){case"input":Kp(e),Fb(e,a,!1);break;case"textarea":Kp(e),jb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+tu(a.value));break;case"select":e.multiple=!!a.multiple,p=a.value,p!=null?ph(e,!!a.multiple,p,!1):a.defaultValue!=null&&ph(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Jm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bi(t),null;case 6:if(e&&t.stateNode!=null)yC(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Pt(166));if(i=Vu(Df.current),Vu(pa.current),im(t)){if(a=t.stateNode,i=t.memoizedProps,a[aa]=t,(p=a.nodeValue!==i)&&(e=Bo,e!==null))switch(e.tag){case 3:rm(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rm(a.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[aa]=t,t.stateNode=a}return Bi(t),null;case 13:if(gr(Ir),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(br&&Do!==null&&t.mode&1&&!(t.flags&128))RT(),Th(),t.flags|=98560,p=!1;else if(p=im(t),a!==null&&a.dehydrated!==null){if(e===null){if(!p)throw Error(Pt(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Pt(317));p[aa]=t}else Th(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bi(t),p=!1}else ks!==null&&(u_(ks),ks=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ir.current&1?Qr===0&&(Qr=3):X1())),t.updateQueue!==null&&(t.flags|=4),Bi(t),null);case 4:return Ph(),t_(e,t),e===null&&Rf(t.stateNode.containerInfo),Bi(t),null;case 10:return k1(t.type._context),Bi(t),null;case 17:return po(t.type)&&Ym(),Bi(t),null;case 19:if(gr(Ir),p=t.memoizedState,p===null)return Bi(t),null;if(a=(t.flags&128)!==0,m=p.rendering,m===null)if(a)Hd(p,!1);else{if(Qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=og(e),m!==null){for(t.flags|=128,Hd(p,!1),a=m.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)p=i,e=a,p.flags&=14680066,m=p.alternate,m===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=m.childLanes,p.lanes=m.lanes,p.child=m.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=m.memoizedProps,p.memoizedState=m.memoizedState,p.updateQueue=m.updateQueue,p.type=m.type,e=m.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return hr(Ir,Ir.current&1|2),t.child}e=e.sibling}p.tail!==null&&Nr()>Ah&&(t.flags|=128,a=!0,Hd(p,!1),t.lanes=4194304)}else{if(!a)if(e=og(m),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Hd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!m.alternate&&!br)return Bi(t),null}else 2*Nr()-p.renderingStartTime>Ah&&i!==1073741824&&(t.flags|=128,a=!0,Hd(p,!1),t.lanes=4194304);p.isBackwards?(m.sibling=t.child,t.child=m):(i=p.last,i!==null?i.sibling=m:t.child=m,p.last=m)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Nr(),t.sibling=null,i=Ir.current,hr(Ir,a?i&1|2:i&1),t):(Bi(t),null);case 22:case 23:return H1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ro&1073741824&&(Bi(t),t.subtreeFlags&6&&(t.flags|=8192)):Bi(t),null;case 24:return null;case 25:return null}throw Error(Pt(156,t.tag))}function V3(e,t){switch(P1(t),t.tag){case 1:return po(t.type)&&Ym(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ph(),gr(fo),gr(Vi),O1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return j1(t),null;case 13:if(gr(Ir),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pt(340));Th()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gr(Ir),null;case 4:return Ph(),null;case 10:return k1(t.type._context),null;case 22:case 23:return H1(),null;case 24:return null;default:return null}}var am=!1,Ui=!1,G3=typeof WeakSet=="function"?WeakSet:Set,tn=null;function lh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Or(e,t,a)}else i.current=null}function n_(e,t,i){try{i()}catch(a){Or(e,t,a)}}var E2=!1;function Z3(e,t){if(Bv=Xm,e=wT(),T1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,p=a.focusNode;a=a.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var m=0,u=-1,S=-1,P=0,M=0,b=e,C=null;t:for(;;){for(var R;b!==i||c!==0&&b.nodeType!==3||(u=m+c),b!==p||a!==0&&b.nodeType!==3||(S=m+a),b.nodeType===3&&(m+=b.nodeValue.length),(R=b.firstChild)!==null;)C=b,b=R;for(;;){if(b===e)break t;if(C===i&&++P===c&&(u=m),C===p&&++M===a&&(S=m),(R=b.nextSibling)!==null)break;b=C,C=b.parentNode}b=R}i=u===-1||S===-1?null:{start:u,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(Nv={focusedElem:e,selectionRange:i},Xm=!1,tn=t;tn!==null;)if(t=tn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tn=e;else for(;tn!==null;){t=tn;try{var B=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var j=B.memoizedProps,he=B.memoizedState,q=t.stateNode,X=q.getSnapshotBeforeUpdate(t.elementType===t.type?j:As(t.type,j),he);q.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pt(163))}}catch(ae){Or(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,tn=e;break}tn=t.return}return B=E2,E2=!1,B}function gf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var p=c.destroy;c.destroy=void 0,p!==void 0&&n_(t,i,p)}c=c.next}while(c!==a)}}function Yg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function r_(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function vC(e){var t=e.alternate;t!==null&&(e.alternate=null,vC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[aa],delete t[Of],delete t[Vv],delete t[P3],delete t[I3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _C(e){return e.tag===5||e.tag===3||e.tag===4}function T2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_C(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function i_(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Jm));else if(a!==4&&(e=e.child,e!==null))for(i_(e,t,i),e=e.sibling;e!==null;)i_(e,t,i),e=e.sibling}function o_(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(o_(e,t,i),e=e.sibling;e!==null;)o_(e,t,i),e=e.sibling}var Ei=null,Ms=!1;function jl(e,t,i){for(i=i.child;i!==null;)xC(e,t,i),i=i.sibling}function xC(e,t,i){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(Gg,i)}catch{}switch(i.tag){case 5:Ui||lh(i,t);case 6:var a=Ei,c=Ms;Ei=null,jl(e,t,i),Ei=a,Ms=c,Ei!==null&&(Ms?(e=Ei,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ei.removeChild(i.stateNode));break;case 18:Ei!==null&&(Ms?(e=Ei,i=i.stateNode,e.nodeType===8?I0(e.parentNode,i):e.nodeType===1&&I0(e,i),kf(e)):I0(Ei,i.stateNode));break;case 4:a=Ei,c=Ms,Ei=i.stateNode.containerInfo,Ms=!0,jl(e,t,i),Ei=a,Ms=c;break;case 0:case 11:case 14:case 15:if(!Ui&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var p=c,m=p.destroy;p=p.tag,m!==void 0&&(p&2||p&4)&&n_(i,t,m),c=c.next}while(c!==a)}jl(e,t,i);break;case 1:if(!Ui&&(lh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Or(i,t,u)}jl(e,t,i);break;case 21:jl(e,t,i);break;case 22:i.mode&1?(Ui=(a=Ui)||i.memoizedState!==null,jl(e,t,i),Ui=a):jl(e,t,i);break;default:jl(e,t,i)}}function C2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new G3),t.forEach(function(a){var c=e4.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Is(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var p=e,m=t,u=m;e:for(;u!==null;){switch(u.tag){case 5:Ei=u.stateNode,Ms=!1;break e;case 3:Ei=u.stateNode.containerInfo,Ms=!0;break e;case 4:Ei=u.stateNode.containerInfo,Ms=!0;break e}u=u.return}if(Ei===null)throw Error(Pt(160));xC(p,m,c),Ei=null,Ms=!1;var S=c.alternate;S!==null&&(S.return=null),c.return=null}catch(P){Or(c,t,P)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wC(t,e),t=t.sibling}function wC(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Is(t,e),ia(e),a&4){try{gf(3,e,e.return),Yg(3,e)}catch(j){Or(e,e.return,j)}try{gf(5,e,e.return)}catch(j){Or(e,e.return,j)}}break;case 1:Is(t,e),ia(e),a&512&&i!==null&&lh(i,i.return);break;case 5:if(Is(t,e),ia(e),a&512&&i!==null&&lh(i,i.return),e.flags&32){var c=e.stateNode;try{Pf(c,"")}catch(j){Or(e,e.return,j)}}if(a&4&&(c=e.stateNode,c!=null)){var p=e.memoizedProps,m=i!==null?i.memoizedProps:p,u=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{u==="input"&&p.type==="radio"&&p.name!=null&&$E(c,p),Av(u,m);var P=Av(u,p);for(m=0;m<S.length;m+=2){var M=S[m],b=S[m+1];M==="style"?HE(c,b):M==="dangerouslySetInnerHTML"?ZE(c,b):M==="children"?Pf(c,b):d1(c,M,b,P)}switch(u){case"input":Ev(c,p);break;case"textarea":VE(c,p);break;case"select":var C=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!p.multiple;var R=p.value;R!=null?ph(c,!!p.multiple,R,!1):C!==!!p.multiple&&(p.defaultValue!=null?ph(c,!!p.multiple,p.defaultValue,!0):ph(c,!!p.multiple,p.multiple?[]:"",!1))}c[Of]=p}catch(j){Or(e,e.return,j)}}break;case 6:if(Is(t,e),ia(e),a&4){if(e.stateNode===null)throw Error(Pt(162));c=e.stateNode,p=e.memoizedProps;try{c.nodeValue=p}catch(j){Or(e,e.return,j)}}break;case 3:if(Is(t,e),ia(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{kf(t.containerInfo)}catch(j){Or(e,e.return,j)}break;case 4:Is(t,e),ia(e);break;case 13:Is(t,e),ia(e),c=e.child,c.flags&8192&&(p=c.memoizedState!==null,c.stateNode.isHidden=p,!p||c.alternate!==null&&c.alternate.memoizedState!==null||(Z1=Nr())),a&4&&C2(e);break;case 22:if(M=i!==null&&i.memoizedState!==null,e.mode&1?(Ui=(P=Ui)||M,Is(t,e),Ui=P):Is(t,e),ia(e),a&8192){if(P=e.memoizedState!==null,(e.stateNode.isHidden=P)&&!M&&e.mode&1)for(tn=e,M=e.child;M!==null;){for(b=tn=M;tn!==null;){switch(C=tn,R=C.child,C.tag){case 0:case 11:case 14:case 15:gf(4,C,C.return);break;case 1:lh(C,C.return);var B=C.stateNode;if(typeof B.componentWillUnmount=="function"){a=C,i=C.return;try{t=a,B.props=t.memoizedProps,B.state=t.memoizedState,B.componentWillUnmount()}catch(j){Or(a,i,j)}}break;case 5:lh(C,C.return);break;case 22:if(C.memoizedState!==null){I2(b);continue}}R!==null?(R.return=C,tn=R):I2(b)}M=M.sibling}e:for(M=null,b=e;;){if(b.tag===5){if(M===null){M=b;try{c=b.stateNode,P?(p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(u=b.stateNode,S=b.memoizedProps.style,m=S!=null&&S.hasOwnProperty("display")?S.display:null,u.style.display=WE("display",m))}catch(j){Or(e,e.return,j)}}}else if(b.tag===6){if(M===null)try{b.stateNode.nodeValue=P?"":b.memoizedProps}catch(j){Or(e,e.return,j)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;M===b&&(M=null),b=b.return}M===b&&(M=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Is(t,e),ia(e),a&4&&C2(e);break;case 21:break;default:Is(t,e),ia(e)}}function ia(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(_C(i)){var a=i;break e}i=i.return}throw Error(Pt(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Pf(c,""),a.flags&=-33);var p=T2(e);o_(e,p,c);break;case 3:case 4:var m=a.stateNode.containerInfo,u=T2(e);i_(e,u,m);break;default:throw Error(Pt(161))}}catch(S){Or(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function W3(e,t,i){tn=e,bC(e)}function bC(e,t,i){for(var a=(e.mode&1)!==0;tn!==null;){var c=tn,p=c.child;if(c.tag===22&&a){var m=c.memoizedState!==null||am;if(!m){var u=c.alternate,S=u!==null&&u.memoizedState!==null||Ui;u=am;var P=Ui;if(am=m,(Ui=S)&&!P)for(tn=c;tn!==null;)m=tn,S=m.child,m.tag===22&&m.memoizedState!==null?A2(c):S!==null?(S.return=m,tn=S):A2(c);for(;p!==null;)tn=p,bC(p),p=p.sibling;tn=c,am=u,Ui=P}P2(e)}else c.subtreeFlags&8772&&p!==null?(p.return=c,tn=p):P2(e)}}function P2(e){for(;tn!==null;){var t=tn;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ui||Yg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ui)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:As(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&c2(t,p,a);break;case 3:var m=t.updateQueue;if(m!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}c2(t,m,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&i.focus();break;case"img":S.src&&(i.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var P=t.alternate;if(P!==null){var M=P.memoizedState;if(M!==null){var b=M.dehydrated;b!==null&&kf(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pt(163))}Ui||t.flags&512&&r_(t)}catch(C){Or(t,t.return,C)}}if(t===e){tn=null;break}if(i=t.sibling,i!==null){i.return=t.return,tn=i;break}tn=t.return}}function I2(e){for(;tn!==null;){var t=tn;if(t===e){tn=null;break}var i=t.sibling;if(i!==null){i.return=t.return,tn=i;break}tn=t.return}}function A2(e){for(;tn!==null;){var t=tn;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Yg(4,t)}catch(S){Or(t,i,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(S){Or(t,c,S)}}var p=t.return;try{r_(t)}catch(S){Or(t,p,S)}break;case 5:var m=t.return;try{r_(t)}catch(S){Or(t,m,S)}}}catch(S){Or(t,t.return,S)}if(t===e){tn=null;break}var u=t.sibling;if(u!==null){u.return=t.return,tn=u;break}tn=t.return}}var H3=Math.ceil,lg=el.ReactCurrentDispatcher,V1=el.ReactCurrentOwner,hs=el.ReactCurrentBatchConfig,Vn=0,hi=null,Xr=null,Ci=0,Ro=0,uh=lu(0),Qr=0,$f=null,Ju=0,Qg=0,G1=0,yf=null,uo=null,Z1=0,Ah=1/0,Na=null,ug=!1,s_=null,Jl=null,lm=!1,Gl=null,cg=0,vf=0,a_=null,km=-1,zm=0;function Ji(){return Vn&6?Nr():km!==-1?km:km=Nr()}function Yl(e){return e.mode&1?Vn&2&&Ci!==0?Ci&-Ci:M3.transition!==null?(zm===0&&(zm=oT()),zm):(e=tr,e!==0||(e=window.event,e=e===void 0?16:dT(e.type)),e):1}function Os(e,t,i,a){if(50<vf)throw vf=0,a_=null,Error(Pt(185));Yf(e,i,a),(!(Vn&2)||e!==hi)&&(e===hi&&(!(Vn&2)&&(Qg|=i),Qr===4&&$l(e,Ci)),mo(e,a),i===1&&Vn===0&&!(t.mode&1)&&(Ah=Nr()+500,Kg&&uu()))}function mo(e,t){var i=e.callbackNode;Mk(e,t);var a=Hm(e,e===hi?Ci:0);if(a===0)i!==null&&Db(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Db(i),t===1)e.tag===0?A3(M2.bind(null,e)):kT(M2.bind(null,e)),T3(function(){!(Vn&6)&&uu()}),i=null;else{switch(sT(a)){case 1:i=y1;break;case 4:i=rT;break;case 16:i=Wm;break;case 536870912:i=iT;break;default:i=Wm}i=MC(i,SC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function SC(e,t){if(km=-1,zm=0,Vn&6)throw Error(Pt(327));var i=e.callbackNode;if(_h()&&e.callbackNode!==i)return null;var a=Hm(e,e===hi?Ci:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=hg(e,a);else{t=a;var c=Vn;Vn|=2;var p=TC();(hi!==e||Ci!==t)&&(Na=null,Ah=Nr()+500,Gu(e,t));do try{q3();break}catch(u){EC(e,u)}while(!0);M1(),lg.current=p,Vn=c,Xr!==null?t=0:(hi=null,Ci=0,t=Qr)}if(t!==0){if(t===2&&(c=Rv(e),c!==0&&(a=c,t=l_(e,c))),t===1)throw i=$f,Gu(e,0),$l(e,a),mo(e,Nr()),i;if(t===6)$l(e,a);else{if(c=e.current.alternate,!(a&30)&&!X3(c)&&(t=hg(e,a),t===2&&(p=Rv(e),p!==0&&(a=p,t=l_(e,p))),t===1))throw i=$f,Gu(e,0),$l(e,a),mo(e,Nr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Pt(345));case 2:Du(e,uo,Na);break;case 3:if($l(e,a),(a&130023424)===a&&(t=Z1+500-Nr(),10<t)){if(Hm(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Ji(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=$v(Du.bind(null,e,uo,Na),t);break}Du(e,uo,Na);break;case 4:if($l(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var m=31-js(a);p=1<<m,m=t[m],m>c&&(c=m),a&=~p}if(a=c,a=Nr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*H3(a/1960))-a,10<a){e.timeoutHandle=$v(Du.bind(null,e,uo,Na),a);break}Du(e,uo,Na);break;case 5:Du(e,uo,Na);break;default:throw Error(Pt(329))}}}return mo(e,Nr()),e.callbackNode===i?SC.bind(null,e):null}function l_(e,t){var i=yf;return e.current.memoizedState.isDehydrated&&(Gu(e,t).flags|=256),e=hg(e,t),e!==2&&(t=uo,uo=i,t!==null&&u_(t)),e}function u_(e){uo===null?uo=e:uo.push.apply(uo,e)}function X3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],p=c.getSnapshot;c=c.value;try{if(!Ls(p(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $l(e,t){for(t&=~G1,t&=~Qg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-js(t),a=1<<i;e[i]=-1,t&=~a}}function M2(e){if(Vn&6)throw Error(Pt(327));_h();var t=Hm(e,0);if(!(t&1))return mo(e,Nr()),null;var i=hg(e,t);if(e.tag!==0&&i===2){var a=Rv(e);a!==0&&(t=a,i=l_(e,a))}if(i===1)throw i=$f,Gu(e,0),$l(e,t),mo(e,Nr()),i;if(i===6)throw Error(Pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e,uo,Na),mo(e,Nr()),null}function W1(e,t){var i=Vn;Vn|=1;try{return e(t)}finally{Vn=i,Vn===0&&(Ah=Nr()+500,Kg&&uu())}}function Yu(e){Gl!==null&&Gl.tag===0&&!(Vn&6)&&_h();var t=Vn;Vn|=1;var i=hs.transition,a=tr;try{if(hs.transition=null,tr=1,e)return e()}finally{tr=a,hs.transition=i,Vn=t,!(Vn&6)&&uu()}}function H1(){Ro=uh.current,gr(uh)}function Gu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,E3(i)),Xr!==null)for(i=Xr.return;i!==null;){var a=i;switch(P1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ym();break;case 3:Ph(),gr(fo),gr(Vi),O1();break;case 5:j1(a);break;case 4:Ph();break;case 13:gr(Ir);break;case 19:gr(Ir);break;case 10:k1(a.type._context);break;case 22:case 23:H1()}i=i.return}if(hi=e,Xr=e=Ql(e.current,null),Ci=Ro=t,Qr=0,$f=null,G1=Qg=Ju=0,uo=yf=null,$u!==null){for(t=0;t<$u.length;t++)if(i=$u[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,p=i.pending;if(p!==null){var m=p.next;p.next=c,a.next=m}i.pending=a}$u=null}return e}function EC(e,t){do{var i=Xr;try{if(M1(),Im.current=ag,sg){for(var a=Mr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}sg=!1}if(qu=0,ci=Yr=Mr=null,mf=!1,Bf=0,V1.current=null,i===null||i.return===null){Qr=1,$f=t,Xr=null;break}e:{var p=e,m=i.return,u=i,S=t;if(t=Ci,u.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var P=S,M=u,b=M.tag;if(!(M.mode&1)&&(b===0||b===11||b===15)){var C=M.alternate;C?(M.updateQueue=C.updateQueue,M.memoizedState=C.memoizedState,M.lanes=C.lanes):(M.updateQueue=null,M.memoizedState=null)}var R=y2(m);if(R!==null){R.flags&=-257,v2(R,m,u,p,t),R.mode&1&&g2(p,P,t),t=R,S=P;var B=t.updateQueue;if(B===null){var j=new Set;j.add(S),t.updateQueue=j}else B.add(S);break e}else{if(!(t&1)){g2(p,P,t),X1();break e}S=Error(Pt(426))}}else if(br&&u.mode&1){var he=y2(m);if(he!==null){!(he.flags&65536)&&(he.flags|=256),v2(he,m,u,p,t),I1(Ih(S,u));break e}}p=S=Ih(S,u),Qr!==4&&(Qr=2),yf===null?yf=[p]:yf.push(p),p=m;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var q=aC(p,S,t);u2(p,q);break e;case 1:u=S;var X=p.type,G=p.stateNode;if(!(p.flags&128)&&(typeof X.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Jl===null||!Jl.has(G)))){p.flags|=65536,t&=-t,p.lanes|=t;var ae=lC(p,u,t);u2(p,ae);break e}}p=p.return}while(p!==null)}PC(i)}catch(K){t=K,Xr===i&&i!==null&&(Xr=i=i.return);continue}break}while(!0)}function TC(){var e=lg.current;return lg.current=ag,e===null?ag:e}function X1(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),hi===null||!(Ju&268435455)&&!(Qg&268435455)||$l(hi,Ci)}function hg(e,t){var i=Vn;Vn|=2;var a=TC();(hi!==e||Ci!==t)&&(Na=null,Gu(e,t));do try{K3();break}catch(c){EC(e,c)}while(!0);if(M1(),Vn=i,lg.current=a,Xr!==null)throw Error(Pt(261));return hi=null,Ci=0,Qr}function K3(){for(;Xr!==null;)CC(Xr)}function q3(){for(;Xr!==null&&!wk();)CC(Xr)}function CC(e){var t=AC(e.alternate,e,Ro);e.memoizedProps=e.pendingProps,t===null?PC(e):Xr=t,V1.current=null}function PC(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=V3(i,t),i!==null){i.flags&=32767,Xr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qr=6,Xr=null;return}}else if(i=$3(i,t,Ro),i!==null){Xr=i;return}if(t=t.sibling,t!==null){Xr=t;return}Xr=t=e}while(t!==null);Qr===0&&(Qr=5)}function Du(e,t,i){var a=tr,c=hs.transition;try{hs.transition=null,tr=1,J3(e,t,i,a)}finally{hs.transition=c,tr=a}return null}function J3(e,t,i,a){do _h();while(Gl!==null);if(Vn&6)throw Error(Pt(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Pt(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(kk(e,p),e===hi&&(Xr=hi=null,Ci=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||lm||(lm=!0,MC(Wm,function(){return _h(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=hs.transition,hs.transition=null;var m=tr;tr=1;var u=Vn;Vn|=4,V1.current=null,Z3(e,i),wC(i,e),y3(Nv),Xm=!!Bv,Nv=Bv=null,e.current=i,W3(i),bk(),Vn=u,tr=m,hs.transition=p}else e.current=i;if(lm&&(lm=!1,Gl=e,cg=c),p=e.pendingLanes,p===0&&(Jl=null),Tk(i.stateNode),mo(e,Nr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(ug)throw ug=!1,e=s_,s_=null,e;return cg&1&&e.tag!==0&&_h(),p=e.pendingLanes,p&1?e===a_?vf++:(vf=0,a_=e):vf=0,uu(),null}function _h(){if(Gl!==null){var e=sT(cg),t=hs.transition,i=tr;try{if(hs.transition=null,tr=16>e?16:e,Gl===null)var a=!1;else{if(e=Gl,Gl=null,cg=0,Vn&6)throw Error(Pt(331));var c=Vn;for(Vn|=4,tn=e.current;tn!==null;){var p=tn,m=p.child;if(tn.flags&16){var u=p.deletions;if(u!==null){for(var S=0;S<u.length;S++){var P=u[S];for(tn=P;tn!==null;){var M=tn;switch(M.tag){case 0:case 11:case 15:gf(8,M,p)}var b=M.child;if(b!==null)b.return=M,tn=b;else for(;tn!==null;){M=tn;var C=M.sibling,R=M.return;if(vC(M),M===P){tn=null;break}if(C!==null){C.return=R,tn=C;break}tn=R}}}var B=p.alternate;if(B!==null){var j=B.child;if(j!==null){B.child=null;do{var he=j.sibling;j.sibling=null,j=he}while(j!==null)}}tn=p}}if(p.subtreeFlags&2064&&m!==null)m.return=p,tn=m;else e:for(;tn!==null;){if(p=tn,p.flags&2048)switch(p.tag){case 0:case 11:case 15:gf(9,p,p.return)}var q=p.sibling;if(q!==null){q.return=p.return,tn=q;break e}tn=p.return}}var X=e.current;for(tn=X;tn!==null;){m=tn;var G=m.child;if(m.subtreeFlags&2064&&G!==null)G.return=m,tn=G;else e:for(m=X;tn!==null;){if(u=tn,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Yg(9,u)}}catch(K){Or(u,u.return,K)}if(u===m){tn=null;break e}var ae=u.sibling;if(ae!==null){ae.return=u.return,tn=ae;break e}tn=u.return}}if(Vn=c,uu(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(Gg,e)}catch{}a=!0}return a}finally{tr=i,hs.transition=t}}return!1}function k2(e,t,i){t=Ih(i,t),t=aC(e,t,1),e=ql(e,t,1),t=Ji(),e!==null&&(Yf(e,1,t),mo(e,t))}function Or(e,t,i){if(e.tag===3)k2(e,e,i);else for(;t!==null;){if(t.tag===3){k2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Jl===null||!Jl.has(a))){e=Ih(i,e),e=lC(t,e,1),t=ql(t,e,1),e=Ji(),t!==null&&(Yf(t,1,e),mo(t,e));break}}t=t.return}}function Y3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=Ji(),e.pingedLanes|=e.suspendedLanes&i,hi===e&&(Ci&i)===i&&(Qr===4||Qr===3&&(Ci&130023424)===Ci&&500>Nr()-Z1?Gu(e,0):G1|=i),mo(e,t)}function IC(e,t){t===0&&(e.mode&1?(t=Yp,Yp<<=1,!(Yp&130023424)&&(Yp=4194304)):t=1);var i=Ji();e=Ka(e,t),e!==null&&(Yf(e,t,i),mo(e,i))}function Q3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),IC(e,i)}function e4(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Pt(314))}a!==null&&a.delete(t),IC(e,i)}var AC;AC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||fo.current)ho=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return ho=!1,U3(e,t,i);ho=!!(e.flags&131072)}else ho=!1,br&&t.flags&1048576&&zT(t,tg,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Mm(e,t),e=t.pendingProps;var c=Eh(t,Vi.current);vh(t,i),c=D1(null,t,a,e,c,i);var p=B1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,po(a)?(p=!0,Qm(t)):p=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,F1(t),c.updater=qg,t.stateNode=c,c._reactInternals=t,Kv(t,a,e,i),t=Yv(null,t,a,!0,p,i)):(t.tag=0,br&&p&&C1(t),Hi(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Mm(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=n4(a),e=As(a,e),c){case 0:t=Jv(null,t,a,e,i);break e;case 1:t=w2(null,t,a,e,i);break e;case 11:t=_2(null,t,a,e,i);break e;case 14:t=x2(null,t,a,As(a.type,e),i);break e}throw Error(Pt(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:As(a,c),Jv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:As(a,c),w2(e,t,a,c,i);case 3:e:{if(dC(t),e===null)throw Error(Pt(387));a=t.pendingProps,p=t.memoizedState,c=p.element,OT(e,t),ig(t,a,null,i);var m=t.memoizedState;if(a=m.element,p.isDehydrated)if(p={element:a,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){c=Ih(Error(Pt(423)),t),t=b2(e,t,a,i,c);break e}else if(a!==c){c=Ih(Error(Pt(424)),t),t=b2(e,t,a,i,c);break e}else for(Do=Kl(t.stateNode.containerInfo.firstChild),Bo=t,br=!0,ks=null,i=NT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Th(),a===c){t=qa(e,t,i);break e}Hi(e,t,a,i)}t=t.child}return t;case 5:return UT(t),e===null&&Wv(t),a=t.type,c=t.pendingProps,p=e!==null?e.memoizedProps:null,m=c.children,Uv(a,c)?m=null:p!==null&&Uv(a,p)&&(t.flags|=32),hC(e,t),Hi(e,t,m,i),t.child;case 6:return e===null&&Wv(t),null;case 13:return fC(e,t,i);case 4:return R1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Ch(t,null,a,i):Hi(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:As(a,c),_2(e,t,a,c,i);case 7:return Hi(e,t,t.pendingProps,i),t.child;case 8:return Hi(e,t,t.pendingProps.children,i),t.child;case 12:return Hi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,p=t.memoizedProps,m=c.value,hr(ng,a._currentValue),a._currentValue=m,p!==null)if(Ls(p.value,m)){if(p.children===c.children&&!fo.current){t=qa(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var u=p.dependencies;if(u!==null){m=p.child;for(var S=u.firstContext;S!==null;){if(S.context===a){if(p.tag===1){S=Wa(-1,i&-i),S.tag=2;var P=p.updateQueue;if(P!==null){P=P.shared;var M=P.pending;M===null?S.next=S:(S.next=M.next,M.next=S),P.pending=S}}p.lanes|=i,S=p.alternate,S!==null&&(S.lanes|=i),Hv(p.return,i,t),u.lanes|=i;break}S=S.next}}else if(p.tag===10)m=p.type===t.type?null:p.child;else if(p.tag===18){if(m=p.return,m===null)throw Error(Pt(341));m.lanes|=i,u=m.alternate,u!==null&&(u.lanes|=i),Hv(m,i,t),m=p.sibling}else m=p.child;if(m!==null)m.return=p;else for(m=p;m!==null;){if(m===t){m=null;break}if(p=m.sibling,p!==null){p.return=m.return,m=p;break}m=m.return}p=m}Hi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,vh(t,i),c=ds(c),a=a(c),t.flags|=1,Hi(e,t,a,i),t.child;case 14:return a=t.type,c=As(a,t.pendingProps),c=As(a.type,c),x2(e,t,a,c,i);case 15:return uC(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:As(a,c),Mm(e,t),t.tag=1,po(a)?(e=!0,Qm(t)):e=!1,vh(t,i),DT(t,a,c),Kv(t,a,c,i),Yv(null,t,a,!0,e,i);case 19:return pC(e,t,i);case 22:return cC(e,t,i)}throw Error(Pt(156,t.tag))};function MC(e,t){return nT(e,t)}function t4(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(e,t,i,a){return new t4(e,t,i,a)}function K1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function n4(e){if(typeof e=="function")return K1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===p1)return 11;if(e===m1)return 14}return 2}function Ql(e,t){var i=e.alternate;return i===null?(i=us(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Fm(e,t,i,a,c,p){var m=2;if(a=e,typeof e=="function")K1(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case Qc:return Zu(i.children,c,p,t);case f1:m=8,c|=8;break;case _v:return e=us(12,i,t,c|2),e.elementType=_v,e.lanes=p,e;case xv:return e=us(13,i,t,c),e.elementType=xv,e.lanes=p,e;case wv:return e=us(19,i,t,c),e.elementType=wv,e.lanes=p,e;case BE:return ey(i,c,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case LE:m=10;break e;case DE:m=9;break e;case p1:m=11;break e;case m1:m=14;break e;case Ll:m=16,a=null;break e}throw Error(Pt(130,e==null?e:typeof e,""))}return t=us(m,i,t,c),t.elementType=e,t.type=a,t.lanes=p,t}function Zu(e,t,i,a){return e=us(7,e,a,t),e.lanes=i,e}function ey(e,t,i,a){return e=us(22,e,a,t),e.elementType=BE,e.lanes=i,e.stateNode={isHidden:!1},e}function O0(e,t,i){return e=us(6,e,null,t),e.lanes=i,e}function L0(e,t,i){return t=us(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function r4(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y0(0),this.expirationTimes=y0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function q1(e,t,i,a,c,p,m,u,S){return e=new r4(e,t,i,u,S),t===1?(t=1,p===!0&&(t|=8)):t=0,p=us(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},F1(p),e}function i4(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function kC(e){if(!e)return nu;e=e._reactInternals;e:{if(ic(e)!==e||e.tag!==1)throw Error(Pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pt(171))}if(e.tag===1){var i=e.type;if(po(i))return MT(e,i,t)}return t}function zC(e,t,i,a,c,p,m,u,S){return e=q1(i,a,!0,e,c,p,m,u,S),e.context=kC(null),i=e.current,a=Ji(),c=Yl(i),p=Wa(a,c),p.callback=t??null,ql(i,p,c),e.current.lanes=c,Yf(e,c,a),mo(e,a),e}function ty(e,t,i,a){var c=t.current,p=Ji(),m=Yl(c);return i=kC(i),t.context===null?t.context=i:t.pendingContext=i,t=Wa(p,m),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=ql(c,t,m),e!==null&&(Os(e,c,m,p),Pm(e,c,m)),m}function dg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function z2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function J1(e,t){z2(e,t),(e=e.alternate)&&z2(e,t)}function o4(){return null}var FC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Y1(e){this._internalRoot=e}ny.prototype.render=Y1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pt(409));ty(e,t,null,null)};ny.prototype.unmount=Y1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yu(function(){ty(null,e,null,null)}),t[Xa]=null}};function ny(e){this._internalRoot=e}ny.prototype.unstable_scheduleHydration=function(e){if(e){var t=uT();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ul.length&&t!==0&&t<Ul[i].priority;i++);Ul.splice(i,0,e),i===0&&hT(e)}};function Q1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ry(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function F2(){}function s4(e,t,i,a,c){if(c){if(typeof a=="function"){var p=a;a=function(){var P=dg(m);p.call(P)}}var m=zC(t,a,e,0,null,!1,!1,"",F2);return e._reactRootContainer=m,e[Xa]=m.current,Rf(e.nodeType===8?e.parentNode:e),Yu(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var u=a;a=function(){var P=dg(S);u.call(P)}}var S=q1(e,0,!1,null,null,!1,!1,"",F2);return e._reactRootContainer=S,e[Xa]=S.current,Rf(e.nodeType===8?e.parentNode:e),Yu(function(){ty(t,S,i,a)}),S}function iy(e,t,i,a,c){var p=i._reactRootContainer;if(p){var m=p;if(typeof c=="function"){var u=c;c=function(){var S=dg(m);u.call(S)}}ty(t,m,e,c)}else m=s4(i,t,e,c,a);return dg(m)}aT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Yd(t.pendingLanes);i!==0&&(v1(t,i|1),mo(t,Nr()),!(Vn&6)&&(Ah=Nr()+500,uu()))}break;case 13:Yu(function(){var a=Ka(e,1);if(a!==null){var c=Ji();Os(a,e,1,c)}}),J1(e,1)}};_1=function(e){if(e.tag===13){var t=Ka(e,134217728);if(t!==null){var i=Ji();Os(t,e,134217728,i)}J1(e,134217728)}};lT=function(e){if(e.tag===13){var t=Yl(e),i=Ka(e,t);if(i!==null){var a=Ji();Os(i,e,t,a)}J1(e,t)}};uT=function(){return tr};cT=function(e,t){var i=tr;try{return tr=e,t()}finally{tr=i}};kv=function(e,t,i){switch(t){case"input":if(Ev(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Xg(a);if(!c)throw Error(Pt(90));UE(a),Ev(a,c)}}}break;case"textarea":VE(e,i);break;case"select":t=i.value,t!=null&&ph(e,!!i.multiple,t,!1)}};qE=W1;JE=Yu;var a4={usingClientEntryPoint:!1,Events:[ep,rh,Xg,XE,KE,W1]},Xd={findFiberByHostInstance:Uu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},l4={bundleType:Xd.bundleType,version:Xd.version,rendererPackageName:Xd.rendererPackageName,rendererConfig:Xd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:el.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eT(e),e===null?null:e.stateNode},findFiberByHostInstance:Xd.findFiberByHostInstance||o4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!um.isDisabled&&um.supportsFiber)try{Gg=um.inject(l4),fa=um}catch{}}Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a4;Vo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q1(t))throw Error(Pt(200));return i4(e,t,null,i)};Vo.createRoot=function(e,t){if(!Q1(e))throw Error(Pt(299));var i=!1,a="",c=FC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=q1(e,1,!1,null,null,i,!1,a,c),e[Xa]=t.current,Rf(e.nodeType===8?e.parentNode:e),new Y1(t)};Vo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pt(188)):(e=Object.keys(e).join(","),Error(Pt(268,e)));return e=eT(t),e=e===null?null:e.stateNode,e};Vo.flushSync=function(e){return Yu(e)};Vo.hydrate=function(e,t,i){if(!ry(t))throw Error(Pt(200));return iy(null,e,t,!0,i)};Vo.hydrateRoot=function(e,t,i){if(!Q1(e))throw Error(Pt(405));var a=i!=null&&i.hydratedSources||null,c=!1,p="",m=FC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),t=zC(t,null,e,1,i??null,c,!1,p,m),e[Xa]=t.current,Rf(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new ny(t)};Vo.render=function(e,t,i){if(!ry(t))throw Error(Pt(200));return iy(null,e,t,!1,i)};Vo.unmountComponentAtNode=function(e){if(!ry(e))throw Error(Pt(40));return e._reactRootContainer?(Yu(function(){iy(null,null,e,!1,function(){e._reactRootContainer=null,e[Xa]=null})}),!0):!1};Vo.unstable_batchedUpdates=W1;Vo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!ry(i))throw Error(Pt(200));if(e==null||e._reactInternals===void 0)throw Error(Pt(38));return iy(e,t,i,!1,a)};Vo.version="18.2.0-next-9e3b772b8-20220608";function RC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RC)}catch(e){console.error(e)}}RC(),zE.exports=Vo;var ex=zE.exports;const u4=qf(ex);var jC={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.5.0/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})(Nl,function(){var i={},a={};function c(m,u,S){if(a[m]=S,m==="index"){var P="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",M={};return a.shared(M),a.index(i,M),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),i}}c("shared",["exports"],function(m){function u(o,n,s,h){return new(s||(s=Promise))(function(f,y){function x(F){try{I(h.next(F))}catch(V){y(V)}}function w(F){try{I(h.throw(F))}catch(V){y(V)}}function I(F){var V;F.done?f(F.value):(V=F.value,V instanceof s?V:new s(function(J){J(V)})).then(x,w)}I((h=h.apply(o,n||[])).next())})}function S(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var P=M;function M(o,n){this.x=o,this.y=n}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),f=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(o){return o instanceof M?o:Array.isArray(o)?new M(o[0],o[1]):o};var b=S(P),C=R;function R(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}R.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var f=this.sampleCurveX(s)-o;if(Math.abs(f)<n)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=f/y}var x=0,w=1;for(s=o,h=0;h<20&&(f=this.sampleCurveX(s),!(Math.abs(f-o)<n));h++)o>f?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var B=S(C);let j,he;function q(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function X(){if(he==null&&(he=!1,q())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const f=4*h;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){he=!0;break}}}return he||!1}function G(o,n,s,h){const f=new B(o,n,s,h);return y=>f.solve(y)}const ae=G(.25,.1,.25,1);function K(o,n,s){return Math.min(s,Math.max(n,o))}function W(o,n,s){const h=s-n,f=((o-n)%h+h)%h+n;return f===n?s:f}function E(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let O=1;function D(o,n,s){const h={};for(const f in o)h[f]=n.call(this,o[f],f,o);return h}function ee(o,n,s){const h={};for(const f in o)n.call(this,o[f],f,o)&&(h[f]=o[f]);return h}function H(o){return Array.isArray(o)?o.map(H):typeof o=="object"&&o?D(o,H):o}const ve={};function _e(o){ve[o]||(typeof console<"u"&&console.warn(o),ve[o]=!0)}function pe(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function oe(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let ce=null;function Y(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function de(o,n,s,h,f){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(o,{timestamp:0});try{const x=y==null?void 0:y.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),I=new Uint8ClampedArray(h*f*4);if(yield y.copyTo(I,function(F,V,J,re,ue){const me=4*Math.max(-V,0),Te=(Math.max(0,J)-J)*re*4+me,Re=4*re,Ne=Math.max(0,V),Qe=Math.max(0,J);return{rect:{x:Ne,y:Qe,width:Math.min(F.width,V+re)-Ne,height:Math.min(F.height,J+ue)-Qe},layout:[{offset:Te,stride:Re}]}}(o,n,s,h,f)),w)for(let F=0;F<I.length;F+=4){const V=I[F];I[F]=I[F+2],I[F+2]=V}return I}finally{y.close()}})}let be,Ce;const Ue="AbortError";function Ae(){return new Error(Ue)}const Fe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function We(o){return Fe.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const Ze="global-dispatcher";class it extends Error{constructor(n,s,h,f){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=f}}const ct=()=>oe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,vt=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=We(o.url);if(h)return h(o,n);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Ze},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ct())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,f){return u(this,void 0,void 0,function*(){const y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ct(),signal:f.signal});h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");const x=yield fetch(y);if(!x.ok){const F=yield x.blob();throw new it(x.status,x.statusText,h.url,F)}let w;w=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const I=yield w;if(f.signal.aborted)throw Ae();return{data:I,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,n);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Ze},n)}var s;return function(h,f){return new Promise((y,x)=>{var w;const I=new XMLHttpRequest;I.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(I.responseType="arraybuffer");for(const F in h.headers)I.setRequestHeader(F,h.headers[F]);h.type==="json"&&(I.responseType="text",!((w=h.headers)===null||w===void 0)&&w.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=h.credentials==="include",I.onerror=()=>{x(new Error(I.statusText))},I.onload=()=>{if(!f.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let F=I.response;if(h.type==="json")try{F=JSON.parse(I.response)}catch(V){return void x(V)}y({data:F,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const F=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});x(new it(I.status,I.statusText,h.url,F))}},f.signal.addEventListener("abort",()=>{I.abort(),x(Ae())}),I.send(h.body)})}(o,n)};function Mt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function pt(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function xt(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Zt{constructor(n,s={}){E(this,s),this.type=n}}class Wt extends Zt{constructor(n,s={}){super("error",E({error:n},s))}}class ln{on(n,s){return this._listeners=this._listeners||{},pt(n,s,this._listeners),this}off(n,s){return xt(n,s,this._listeners),xt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},pt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Zt(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const f=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const w of f)w.call(this,n);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const w of y)xt(h,w,this._oneTimeListeners),w.call(this,n);const x=this._eventedParent;x&&(E(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Wt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const _n=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function un(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return _n.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Vt(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!Vt(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!Vt(o[s],n[s]))return!1;return!0}return o===n}function Se(o,n){o.push(n)}function N(o,n,s){Se(s,{command:"addSource",args:[o,n[o]]})}function L(o,n,s){Se(n,{command:"removeSource",args:[o]}),s[o]=!0}function ye(o,n,s,h){L(o,s,h),N(o,n,s)}function Xe(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Vt(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Vt(o[s][h],n[s][h]))return!1;return!0}function tt(o,n,s,h,f,y){o=o||{},n=n||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],n[x])||s.push({command:y,args:[h,x,n[x],f]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],n[x])||s.push({command:y,args:[h,x,n[x],f]}))}function ht(o){return o.id}function le(o,n){return o[n.id]=n,o}class k{constructor(n,s,h,f){this.message=(n?`${n}: `:"")+h,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function $(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class Ee extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Ve{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,f]of s)this.bindings[h]=f}concat(n){return new Ve(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const rt={kind:"null"},Ge={kind:"number"},Et={kind:"string"},It={kind:"boolean"},yn={kind:"color"},Sn={kind:"object"},Rt={kind:"value"},zr={kind:"collator"},ei={kind:"formatted"},Ii={kind:"padding"},Ur={kind:"resolvedImage"},ze={kind:"variableAnchorOffsetCollection"};function se(o,n){return{kind:"array",itemType:o,N:n}}function ie(o){if(o.kind==="array"){const n=ie(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const xe=[rt,Ge,Et,It,yn,ei,Sn,se(Rt),Ii,Ur,ze];function Ie(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ie(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of xe)if(!Ie(s,n))return null}}return`Expected ${ie(o)} but found ${ie(n)} instead.`}function ke(o,n){return n.some(s=>s.kind===o.kind)}function De(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function qe(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const Le=.96422,st=.82521,dt=4/29,ot=6/29,Ct=3*ot*ot,Kt=ot*ot*ot,nn=Math.PI/180,pn=180/Math.PI;function En(o){return(o%=360)<0&&(o+=360),o}function hn([o,n,s,h]){let f,y;const x=Jn((.2225045*(o=$n(o))+.7168786*(n=$n(n))+.0606169*(s=$n(s)))/1);o===n&&n===s?f=y=x:(f=Jn((.4360747*o+.3850649*n+.1430804*s)/Le),y=Jn((.0139322*o+.0971045*n+.7141733*s)/st));const w=116*x-16;return[w<0?0:w,500*(f-x),200*(x-y),h]}function $n(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Jn(o){return o>Kt?Math.pow(o,1/3):o/Ct+dt}function nr([o,n,s,h]){let f=(o+16)/116,y=isNaN(n)?f:f+n/500,x=isNaN(s)?f:f-s/200;return f=1*Nn(f),y=Le*Nn(y),x=st*Nn(x),[wn(3.1338561*y-1.6168667*f-.4906146*x),wn(-.9787684*y+1.9161415*f+.033454*x),wn(.0719453*y-.2289914*f+1.4052427*x),h]}function wn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Nn(o){return o>ot?o*o*o:Ct*(o-dt)}function Yn(o){return parseInt(o.padEnd(2,o),16)/255}function Er(o,n){return $r(n?o/100:o,0,1)}function $r(o,n,s){return Math.min(Math.max(n,o),s)}function Vr(o){return!o.some(Number.isNaN)}const Ho={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class kn{constructor(n,s,h,f=1,y=!0){this.r=n,this.g=s,this.b=h,this.a=f,y||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,s,h,f]))}static parse(n){if(n instanceof kn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Ho[h];if(f){const[x,w,I]=f;return[x/255,w/255,I/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let w=1;return[Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,I,F,V,J,re,ue,me,Te,Re,Ne,Qe]=x,He=[V||" ",ue||" ",Re].join("");if(He==="  "||He==="  /"||He===",,"||He===",,,"){const Ye=[F,re,Te].join(""),lt=Ye==="%%%"?100:Ye===""?255:0;if(lt){const _t=[$r(+I/lt,0,1),$r(+J/lt,0,1),$r(+me/lt,0,1),Ne?Er(+Ne,Qe):1];if(Vr(_t))return _t}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,w,I,F,V,J,re,ue,me]=y,Te=[I||" ",V||" ",re].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Re=[+w,$r(+F,0,100),$r(+J,0,100),ue?Er(+ue,me):1];if(Vr(Re))return function([Ne,Qe,He,Ye]){function lt(_t){const Ft=(_t+Ne/30)%12,rn=Qe*Math.min(He,1-He);return He-rn*Math.max(-1,Math.min(Ft-3,9-Ft,1))}return Ne=En(Ne),Qe/=100,He/=100,[lt(0),lt(8),lt(4),Ye]}(Re)}}}(n);return s?new kn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:f}=this,y=f||1/0;return this.overwriteGetter("rgb",[n/y,s/y,h/y,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,f,y]=hn(n),x=Math.sqrt(h*h+f*f);return[Math.round(1e4*x)?En(Math.atan2(f,h)*pn):NaN,x,s,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",hn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,f]=this.rgb;return`rgba(${[n,s,h].map(y=>Math.round(255*y)).join(",")},${f})`}}kn.black=new kn(0,0,0,1),kn.white=new kn(1,1,1,1),kn.transparent=new kn(0,0,0,0),kn.red=new kn(1,0,0,1);class nl{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Tn{constructor(n,s,h,f,y){this.text=n,this.image=s,this.scale=h,this.fontStack=f,this.textColor=y}}class Tr{constructor(n){this.sections=n}static fromString(n){return new Tr([new Tn(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Tr?n:Tr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class fi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof fi)return n;if(typeof n=="number")return new fi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new fi(n)}}toString(){return JSON.stringify(this.values)}}const Vh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class pi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof pi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],f=n[s+1];if(typeof h!="string"||!Vh.has(h)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new pi(n)}}toString(){return JSON.stringify(this.values)}}class Gr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Gr({name:n,available:!1}):null}}function rl(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function mi(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof kn||o instanceof nl||o instanceof Tr||o instanceof fi||o instanceof pi||o instanceof Gr)return!0;if(Array.isArray(o)){for(const n of o)if(!mi(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!mi(o[n]))return!1;return!0}return!1}function vr(o){if(o===null)return rt;if(typeof o=="string")return Et;if(typeof o=="boolean")return It;if(typeof o=="number")return Ge;if(o instanceof kn)return yn;if(o instanceof nl)return zr;if(o instanceof Tr)return ei;if(o instanceof fi)return Ii;if(o instanceof pi)return ze;if(o instanceof Gr)return Ur;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const f=vr(h);if(s){if(s===f)continue;s=Rt;break}s=f}return se(s||Rt,n)}return Sn}function go(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof kn||o instanceof Tr||o instanceof fi||o instanceof pi||o instanceof Gr?o.toString():JSON.stringify(o)}class ps{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!mi(n[1]))return s.error("invalid value");const h=n[1];let f=vr(h);const y=s.expectedType;return f.kind!=="array"||f.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(f=y),new ps(f,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class dr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const il={string:Et,number:Ge,boolean:It,object:Sn};class _r{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,f=1;const y=n[0];if(y==="array"){let w,I;if(n.length>2){const F=n[1];if(typeof F!="string"||!(F in il)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);w=il[F],f++}else w=Rt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=n[2],f++}h=se(w,I)}else{if(!il[y])throw new Error(`Types doesn't contain name = ${y}`);h=il[y]}const x=[];for(;f<n.length;f++){const w=s.parse(n[f],f,Rt);if(!w)return null;x.push(w)}return new _r(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Ie(this.type,vr(h)))return h;if(s===this.args.length-1)throw new dr(`Expected value to be of type ${ie(this.type)}, but found ${ie(vr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const va={"to-boolean":It,"to-color":yn,"to-number":Ge,"to-string":Et};class Xo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!va[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const f=va[h],y=[];for(let x=1;x<n.length;x++){const w=s.parse(n[x],x,Rt);if(!w)return null;y.push(w)}return new Xo(f,y)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const f of this.args){if(s=f.evaluate(n),h=null,s instanceof kn)return s;if(typeof s=="string"){const y=n.parseColor(s);if(y)return y}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:rl(s[0],s[1],s[2],s[3]),!h))return new kn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new dr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const f=fi.parse(s);if(f)return f}throw new dr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const f=pi.parse(s);if(f)return f}throw new dr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new dr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Tr.fromString(go(this.args[0].evaluate(n)));case"resolvedImage":return Gr.fromString(go(this.args[0].evaluate(n)));default:return go(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const cu=["Unknown","Point","LineString","Polygon"];class _a{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?cu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=kn.parse(n)),s}}class Ko{constructor(n,s,h=[],f,y=new Ve,x=[]){this.registry=n,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=y,this.errors=x,this.expectedType=f,this._isConstant=s}parse(n,s,h,f,y={}){return s?this.concat(s,h,f)._parse(n,y):this._parse(n,y)}_parse(n,s){function h(f,y,x){return x==="assert"?new _r(y,[f]):x==="coerce"?new Xo(y,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[f];if(y){let x=y.parse(n,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,I=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||I.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(w.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(w,I))return null}else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"assert")}if(!(x instanceof ps)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new _a;try{x=new ps(x.type,x.evaluate(w))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const f=typeof n=="number"?this.path.concat(n):this.path,y=h?this.scope.concat(h):this.scope;return new Ko(this.registry,this._isConstant,f,s||null,y,this.errors)}error(n,...s){const h=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new Ee(h,n))}checkSubtype(n,s){const h=Ie(n,s);return h&&this.error(h),h}}class In{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let y=1;y<n.length-1;y+=2){const x=n[y];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",y);const w=s.parse(n[y+1],y+1);if(!w)return null;h.push([x,w])}const f=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return f?new In(h,f):null}outputDefined(){return this.result.outputDefined()}}class ol{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new ol(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class hu{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Ge),f=s.parse(n[2],2,se(s.expectedType||Rt));return h&&f?new hu(f.type.itemType,h,f):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new dr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new dr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new dr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Kr{constructor(n,s){this.type=It,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Rt),f=s.parse(n[2],2,Rt);return h&&f?ke(h.type,[It,Et,Ge,rt,Rt])?new Kr(h,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!De(s,["boolean","string","number","null"]))throw new dr(`Expected first argument to be of type boolean, string, number or null, but found ${ie(vr(s))} instead.`);if(!De(h,["string","array"]))throw new dr(`Expected second argument to be of type array or string, but found ${ie(vr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class sl{constructor(n,s,h){this.type=Ge,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Rt),f=s.parse(n[2],2,Rt);if(!h||!f)return null;if(!ke(h.type,[It,Et,Ge,rt,Rt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(h.type)} instead`);if(n.length===4){const y=s.parse(n[3],3,Ge);return y?new sl(h,f,y):null}return new sl(h,f)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!De(s,["boolean","string","number","null"]))throw new dr(`Expected first argument to be of type boolean, string, number or null, but found ${ie(vr(s))} instead.`);if(!De(h,["string","array"]))throw new dr(`Expected second argument to be of type array or string, but found ${ie(vr(h))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(n);return h.indexOf(s,f)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class al{constructor(n,s,h,f,y,x){this.inputType=n,this.type=s,this.input=h,this.cases=f,this.outputs=y,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const y={},x=[];for(let F=2;F<n.length-1;F+=2){let V=n[F];const J=n[F+1];Array.isArray(V)||(V=[V]);const re=s.concat(F);if(V.length===0)return re.error("Expected at least one branch label.");for(const me of V){if(typeof me!="number"&&typeof me!="string")return re.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return re.error("Numeric branch labels must be integer values.");if(h){if(re.checkSubtype(h,vr(me)))return null}else h=vr(me);if(y[String(me)]!==void 0)return re.error("Branch labels must be unique.");y[String(me)]=x.length}const ue=s.parse(J,F,f);if(!ue)return null;f=f||ue.type,x.push(ue)}const w=s.parse(n[1],1,Rt);if(!w)return null;const I=s.parse(n[n.length-1],n.length-1,f);return I?w.type.kind!=="value"&&s.concat(1).checkSubtype(h,w.type)?null:new al(h,f,w,y,x,I):null}evaluate(n){const s=this.input.evaluate(n);return(vr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ll{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const w=s.parse(n[x],x,It);if(!w)return null;const I=s.parse(n[x+1],x+1,h);if(!I)return null;f.push([w,I]),h=h||I.type}const y=s.parse(n[n.length-1],n.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new ll(h,f,y)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class ul{constructor(n,s,h,f){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Rt),f=s.parse(n[2],2,Ge);if(!h||!f)return null;if(!ke(h.type,[se(Rt),Et,Rt]))return s.error(`Expected first argument to be of type array or string, but found ${ie(h.type)} instead`);if(n.length===4){const y=s.parse(n[3],3,Ge);return y?new ul(h.type,h,f,y):null}return new ul(h.type,h,f)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!De(s,["string","array"]))throw new dr(`Expected first argument to be of type array or string, but found ${ie(vr(s))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(n);return s.slice(h,f)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function xa(o,n){const s=o.length-1;let h,f,y=0,x=s,w=0;for(;y<=x;)if(w=Math.floor((y+x)/2),h=o[w],f=o[w+1],h<=n){if(w===s||n<f)return w;y=w+1}else{if(!(h>n))throw new dr("Input is not a number.");x=w-1}return 0}class ms{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[f,y]of h)this.labels.push(f),this.outputs.push(y)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Ge);if(!h)return null;const f=[];let y=null;s.expectedType&&s.expectedType.kind!=="value"&&(y=s.expectedType);for(let x=1;x<n.length;x+=2){const w=x===1?-1/0:n[x],I=n[x+1],F=x,V=x+1;if(typeof w!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(f.length&&f[f.length-1][0]>=w)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const J=s.parse(I,V,y);if(!J)return null;y=y||J.type,f.push([w,J])}return new ms(y,h,f)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return h[0].evaluate(n);const y=s.length;return f>=s[y-1]?h[y-1].evaluate(n):h[xa(s,f)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function du(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var lc=wa;function wa(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}wa.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var f=this.sampleCurveX(s)-o;if(Math.abs(f)<n)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=f/y}var x=0,w=1;for(s=o,h=0;h<20&&(f=this.sampleCurveX(s),!(Math.abs(f-o)<n));h++)o>f?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Gh=du(lc);function gi(o,n,s){return o+s*(n-o)}function ba(o,n,s){return o.map((h,f)=>gi(h,n[f],s))}const yi={number:gi,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[f,y,x,w]=ba(o.rgb,n.rgb,s);return new kn(f,y,x,w,!1)}case"hcl":{const[f,y,x,w]=o.hcl,[I,F,V,J]=n.hcl;let re,ue;if(isNaN(f)||isNaN(I))isNaN(f)?isNaN(I)?re=NaN:(re=I,x!==1&&x!==0||(ue=F)):(re=f,V!==1&&V!==0||(ue=y));else{let Qe=I-f;I>f&&Qe>180?Qe-=360:I<f&&f-I>180&&(Qe+=360),re=f+s*Qe}const[me,Te,Re,Ne]=function([Qe,He,Ye,lt]){return Qe=isNaN(Qe)?0:Qe*nn,nr([Ye,Math.cos(Qe)*He,Math.sin(Qe)*He,lt])}([re,ue??gi(y,F,s),gi(x,V,s),gi(w,J,s)]);return new kn(me,Te,Re,Ne,!1)}case"lab":{const[f,y,x,w]=nr(ba(o.lab,n.lab,s));return new kn(f,y,x,w,!1)}}},array:ba,padding:function(o,n,s){return new fi(ba(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,f=n.values;if(h.length!==f.length)throw new dr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const y=[];for(let x=0;x<h.length;x+=2){if(h[x]!==f[x])throw new dr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${f[x]}`);y.push(h[x]);const[w,I]=h[x+1],[F,V]=f[x+1];y.push([gi(w,F,s),gi(I,V,s)])}return new pi(y)}};class vi{constructor(n,s,h,f,y){this.type=n,this.operator=s,this.interpolation=h,this.input=f,this.labels=[],this.outputs=[];for(const[x,w]of y)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(n,s,h,f){let y=0;if(n.name==="exponential")y=Sa(s,n.base,h,f);else if(n.name==="linear")y=Sa(s,1,h,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;y=new Gh(x[0],x[1],x[2],x[3]).solve(Sa(s,1,h,f))}return y}static parse(n,s){let[h,f,y,...x]=n;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const F=f[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:F}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const F=f.slice(1);if(F.length!==4||F.some(V=>typeof V!="number"||V<0||V>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:F}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(y=s.parse(y,2,Ge),!y)return null;const w=[];let I=null;h==="interpolate-hcl"||h==="interpolate-lab"?I=yn:s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType);for(let F=0;F<x.length;F+=2){const V=x[F],J=x[F+1],re=F+3,ue=F+4;if(typeof V!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(w.length&&w[w.length-1][0]>=V)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',re);const me=s.parse(J,ue,I);if(!me)return null;I=I||me.type,w.push([V,me])}return qe(I,Ge)||qe(I,yn)||qe(I,Ii)||qe(I,ze)||qe(I,se(Ge))?new vi(I,h,f,y,w):s.error(`Type ${ie(I)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return h[0].evaluate(n);const y=s.length;if(f>=s[y-1])return h[y-1].evaluate(n);const x=xa(s,f),w=vi.interpolationFactor(this.interpolation,f,s[x],s[x+1]),I=h[x].evaluate(n),F=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return yi[this.type.kind](I,F,w);case"interpolate-hcl":return yi.color(I,F,w,"hcl");case"interpolate-lab":return yi.color(I,F,w,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Sa(o,n,s,h){const f=h-s,y=o-s;return f===0?0:n===1?y/f:(Math.pow(n,y)-1)/(Math.pow(n,f)-1)}class Ea{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const f=s.expectedType;f&&f.kind!=="value"&&(h=f);const y=[];for(const w of n.slice(1)){const I=s.parse(w,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,y.push(I)}if(!h)throw new Error("No output type");const x=f&&y.some(w=>Ie(f,w.type));return new Ea(x?Rt:h,y)}evaluate(n){let s,h=null,f=0;for(const y of this.args)if(f++,h=y.evaluate(n),h&&h instanceof Gr&&!h.available&&(s||(s=h.name),h=null,f===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function uc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function cc(o,n,s,h){return h.compare(n,s)===0}function gs(o,n,s){const h=o!=="=="&&o!=="!=";return class OC{constructor(y,x,w){this.type=It,this.lhs=y,this.rhs=x,this.collator=w,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const w=y[0];let I=x.parse(y[1],1,Rt);if(!I)return null;if(!uc(w,I.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${ie(I.type)}'.`);let F=x.parse(y[2],2,Rt);if(!F)return null;if(!uc(w,F.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${ie(F.type)}'.`);if(I.type.kind!==F.type.kind&&I.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${ie(I.type)}' and '${ie(F.type)}'.`);h&&(I.type.kind==="value"&&F.type.kind!=="value"?I=new _r(F.type,[I]):I.type.kind!=="value"&&F.type.kind==="value"&&(F=new _r(I.type,[F])));let V=null;if(y.length===4){if(I.type.kind!=="string"&&F.type.kind!=="string"&&I.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(V=x.parse(y[3],3,zr),!V)return null}return new OC(I,F,V)}evaluate(y){const x=this.lhs.evaluate(y),w=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const I=vr(x),F=vr(w);if(I.kind!==F.kind||I.kind!=="string"&&I.kind!=="number")throw new dr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${I.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=vr(x),F=vr(w);if(I.kind!=="string"||F.kind!=="string")return n(y,x,w)}return this.collator?s(y,x,w,this.collator.evaluate(y)):n(y,x,w)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const cl=gs("==",function(o,n,s){return n===s},cc),Zh=gs("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!cc(0,n,s,h)}),Wh=gs("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),hc=gs(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),dc=gs("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),fc=gs(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class hl{constructor(n,s,h){this.type=zr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const f=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,It);if(!f)return null;const y=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,It);if(!y)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Et),!x)?null:new hl(f,y,x)}evaluate(n){return new nl(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class dl{constructor(n,s,h,f,y){this.type=Et,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=f,this.maxFractionDigits=y}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Ge);if(!h)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let y=null;if(f.locale&&(y=s.parse(f.locale,1,Et),!y))return null;let x=null;if(f.currency&&(x=s.parse(f.currency,1,Et),!x))return null;let w=null;if(f["min-fraction-digits"]&&(w=s.parse(f["min-fraction-digits"],1,Ge),!w))return null;let I=null;return f["max-fraction-digits"]&&(I=s.parse(f["max-fraction-digits"],1,Ge),!I)?null:new dl(h,y,x,w,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class fl{constructor(n){this.type=ei,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const f=[];let y=!1;for(let x=1;x<=n.length-1;++x){const w=n[x];if(y&&typeof w=="object"&&!Array.isArray(w)){y=!1;let I=null;if(w["font-scale"]&&(I=s.parse(w["font-scale"],1,Ge),!I))return null;let F=null;if(w["text-font"]&&(F=s.parse(w["text-font"],1,se(Et)),!F))return null;let V=null;if(w["text-color"]&&(V=s.parse(w["text-color"],1,yn),!V))return null;const J=f[f.length-1];J.scale=I,J.font=F,J.textColor=V}else{const I=s.parse(n[x],1,Rt);if(!I)return null;const F=I.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,f.push({content:I,scale:null,font:null,textColor:null})}}return new fl(f)}evaluate(n){return new Tr(this.sections.map(s=>{const h=s.content.evaluate(n);return vr(h)===Ur?new Tn("",h,null,null,null):new Tn(go(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class fu{constructor(n){this.type=Ur,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Et);return h?new fu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Gr.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class pl{constructor(n){this.type=Ge,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${ie(h.type)} instead.`):new pl(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new dr(`Expected value to be of type string or array, but found ${ie(vr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const ro=8192;function pu(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(s*f*ro),Math.round(h*f*ro)]}function Bs(o,n){const s=Math.pow(2,n.z);return[(f=(o[0]/ro+n.x)/s,360*f-180),(h=(o[1]/ro+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,f}function An(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Ns(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Hh(o,n,s){const h=o[0]-n[0],f=o[1]-n[1],y=o[0]-s[0],x=o[1]-s[1];return h*x-y*f==0&&h*y<=0&&f*x<=0}function Us(o,n,s,h){return(f=[h[0]-s[0],h[1]-s[1]])[0]*(y=[n[0]-o[0],n[1]-o[1]])[1]-f[1]*y[0]!=0&&!(!mc(o,n,s,h)||!mc(s,h,o,n));var f,y}function Xh(o,n,s){for(const h of s)for(let f=0;f<h.length-1;++f)if(Us(o,n,h[f],h[f+1]))return!0;return!1}function $s(o,n,s=!1){let h=!1;for(const w of n)for(let I=0;I<w.length-1;I++){if(Hh(o,w[I],w[I+1]))return s;(y=w[I])[1]>(f=o)[1]!=(x=w[I+1])[1]>f[1]&&f[0]<(x[0]-y[0])*(f[1]-y[1])/(x[1]-y[1])+y[0]&&(h=!h)}var f,y,x;return h}function Kh(o,n){for(const s of n)if($s(o,s))return!0;return!1}function pc(o,n){for(const s of o)if(!$s(s,n))return!1;for(let s=0;s<o.length-1;++s)if(Xh(o[s],o[s+1],n))return!1;return!0}function qh(o,n){for(const s of n)if(pc(o,s))return!0;return!1}function mc(o,n,s,h){const f=h[0]-s[0],y=h[1]-s[1],x=(o[0]-s[0])*y-f*(o[1]-s[1]),w=(n[0]-s[0])*y-f*(n[1]-s[1]);return x>0&&w<0||x<0&&w>0}function ml(o,n,s){const h=[];for(let f=0;f<o.length;f++){const y=[];for(let x=0;x<o[f].length;x++){const w=pu(o[f][x],s);An(n,w),y.push(w)}h.push(y)}return h}function gl(o,n,s){const h=[];for(let f=0;f<o.length;f++){const y=ml(o[f],n,s);h.push(y)}return h}function gc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const f=.5*h;let y=o[0]-s[0]>f?-h:s[0]-o[0]>f?h:0;y===0&&(y=o[0]-s[2]>f?-h:s[2]-o[0]>f?h:0),o[0]+=y}An(n,o)}function yc(o,n,s,h){const f=Math.pow(2,h.z)*ro,y=[h.x*ro,h.y*ro],x=[];for(const w of o)for(const I of w){const F=[I.x+y[0],I.y+y[1]];gc(F,n,s,f),x.push(F)}return x}function vc(o,n,s,h){const f=Math.pow(2,h.z)*ro,y=[h.x*ro,h.y*ro],x=[];for(const I of o){const F=[];for(const V of I){const J=[V.x+y[0],V.y+y[1]];An(n,J),F.push(J)}x.push(F)}if(n[2]-n[0]<=f/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const I of x)for(const F of I)gc(F,n,s,f)}var w;return x}class ys{constructor(n,s){this.type=It,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(mi(n[1])){const h=n[1];if(h.type==="FeatureCollection"){const f=[];for(const y of h.features){const{type:x,coordinates:w}=y.geometry;x==="Polygon"&&f.push(w),x==="MultiPolygon"&&f.push(...w)}if(f.length)return new ys(h,{type:"MultiPolygon",coordinates:f})}else if(h.type==="Feature"){const f=h.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new ys(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ys(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const w=ml(h.coordinates,y,x),I=yc(s.geometry(),f,y,x);if(!Ns(f,y))return!1;for(const F of I)if(!$s(F,w))return!1}if(h.type==="MultiPolygon"){const w=gl(h.coordinates,y,x),I=yc(s.geometry(),f,y,x);if(!Ns(f,y))return!1;for(const F of I)if(!Kh(F,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const w=ml(h.coordinates,y,x),I=vc(s.geometry(),f,y,x);if(!Ns(f,y))return!1;for(const F of I)if(!pc(F,w))return!1}if(h.type==="MultiPolygon"){const w=gl(h.coordinates,y,x),I=vc(s.geometry(),f,y,x);if(!Ns(f,y))return!1;for(const F of I)if(!qh(F,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let mu=class{constructor(o=[],n=Jh){if(this.data=o,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:n,compare:s}=this,h=n[o];for(;o>0;){const f=o-1>>1,y=n[f];if(s(h,y)>=0)break;n[o]=y,o=f}n[o]=h}_down(o){const{data:n,compare:s}=this,h=this.length>>1,f=n[o];for(;o<h;){let y=1+(o<<1),x=n[y];const w=y+1;if(w<this.length&&s(n[w],x)<0&&(y=w,x=n[w]),s(x,f)>=0)break;n[o]=x,o=y}n[o]=f}};function Jh(o,n){return o<n?-1:o>n?1:0}function Yh(o,n,s,h,f){_c(o,n,s,h||o.length-1,f||yl)}function _c(o,n,s,h,f){for(;h>s;){if(h-s>600){var y=h-s+1,x=n-s+1,w=Math.log(y),I=.5*Math.exp(2*w/3),F=.5*Math.sqrt(w*I*(y-I)/y)*(x-y/2<0?-1:1);_c(o,n,Math.max(s,Math.floor(n-x*I/y+F)),Math.min(h,Math.floor(n+(y-x)*I/y+F)),f)}var V=o[n],J=s,re=h;for(Ta(o,s,n),f(o[h],V)>0&&Ta(o,s,h);J<re;){for(Ta(o,J,re),J++,re--;f(o[J],V)<0;)J++;for(;f(o[re],V)>0;)re--}f(o[s],V)===0?Ta(o,s,re):Ta(o,++re,h),re<=n&&(s=re+1),n<=re&&(h=re-1)}}function Ta(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function yl(o,n){return o<n?-1:o>n?1:0}function vl(o,n){if(o.length<=1)return[o];const s=[];let h,f;for(const y of o){const x=xc(y);x!==0&&(y.area=Math.abs(x),f===void 0&&(f=x<0),f===x<0?(h&&s.push(h),h=[y]):h.push(y))}if(h&&s.push(h),n>1)for(let y=0;y<s.length;y++)s[y].length<=n||(Yh(s[y],n,1,s[y].length-1,Vs),s[y]=s[y].slice(0,n));return s}function Vs(o,n){return n.area-o.area}function xc(o){let n=0;for(let s,h,f=0,y=o.length,x=y-1;f<y;x=f++)s=o[f],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}const Gi=1/298.257223563,wc=Gi*(2-Gi),bc=Math.PI/180;class gu{constructor(n){const s=6378.137*bc*1e3,h=Math.cos(n*bc),f=1/(1-wc*(1-h*h)),y=Math.sqrt(f);this.kx=s*y*h,this.ky=s*y*f*(1-wc)}distance(n,s){const h=this.wrap(n[0]-s[0])*this.kx,f=(n[1]-s[1])*this.ky;return Math.sqrt(h*h+f*f)}pointOnLine(n,s){let h,f,y,x,w=1/0;for(let I=0;I<n.length-1;I++){let F=n[I][0],V=n[I][1],J=this.wrap(n[I+1][0]-F)*this.kx,re=(n[I+1][1]-V)*this.ky,ue=0;J===0&&re===0||(ue=(this.wrap(s[0]-F)*this.kx*J+(s[1]-V)*this.ky*re)/(J*J+re*re),ue>1?(F=n[I+1][0],V=n[I+1][1]):ue>0&&(F+=J/this.kx*ue,V+=re/this.ky*ue)),J=this.wrap(s[0]-F)*this.kx,re=(s[1]-V)*this.ky;const me=J*J+re*re;me<w&&(w=me,h=F,f=V,y=I,x=ue)}return{point:[h,f],index:y,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Sc(o,n){return n[0]-o[0]}function Gs(o){return o[1]-o[0]+1}function yo(o,n){return o[1]>=o[0]&&o[1]<n}function qo(o,n){if(o[0]>o[1])return[null,null];const s=Gs(o);if(n){if(s===2)return[o,null];const f=Math.floor(s/2);return[[o[0],o[0]+f],[o[0]+f,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function yu(o,n){if(!yo(n,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)An(s,o[h]);return s}function vu(o){const n=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)An(n,h);return n}function Ca(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function _l(o,n,s){if(!Ca(o)||!Ca(n))return NaN;let h=0,f=0;return o[2]<n[0]&&(h=n[0]-o[2]),o[0]>n[2]&&(h=o[0]-n[2]),o[1]>n[3]&&(f=o[1]-n[3]),o[3]<n[1]&&(f=n[1]-o[3]),s.distance([0,0],[h,f])}function Gn(o,n,s){const h=s.pointOnLine(n,o);return s.distance(o,h.point)}function _u(o,n,s,h,f){const y=Math.min(Gn(o,[s,h],f),Gn(n,[s,h],f)),x=Math.min(Gn(s,[o,n],f),Gn(h,[o,n],f));return Math.min(y,x)}function bn(o,n,s,h,f){if(!yo(n,o.length)||!yo(h,s.length))return 1/0;let y=1/0;for(let x=n[0];x<n[1];++x){const w=o[x],I=o[x+1];for(let F=h[0];F<h[1];++F){const V=s[F],J=s[F+1];if(Us(w,I,V,J))return 0;y=Math.min(y,_u(w,I,V,J,f))}}return y}function Zs(o,n,s,h,f){if(!yo(n,o.length)||!yo(h,s.length))return NaN;let y=1/0;for(let x=n[0];x<=n[1];++x)for(let w=h[0];w<=h[1];++w)if(y=Math.min(y,f.distance(o[x],s[w])),y===0)return y;return y}function Ln(o,n,s){if($s(o,n,!0))return 0;let h=1/0;for(const f of n){const y=f[0],x=f[f.length-1];if(y!==x&&(h=Math.min(h,Gn(o,[x,y],s)),h===0))return h;const w=s.pointOnLine(f,o);if(h=Math.min(h,s.distance(o,w.point)),h===0)return h}return h}function Kn(o,n,s,h){if(!yo(n,o.length))return NaN;for(let y=n[0];y<=n[1];++y)if($s(o[y],s,!0))return 0;let f=1/0;for(let y=n[0];y<n[1];++y){const x=o[y],w=o[y+1];for(const I of s)for(let F=0,V=I.length,J=V-1;F<V;J=F++){const re=I[J],ue=I[F];if(Us(x,w,re,ue))return 0;f=Math.min(f,_u(x,w,re,ue,h))}}return f}function Ws(o,n){for(const s of o)for(const h of s)if($s(h,n,!0))return!0;return!1}function Pa(o,n,s,h=1/0){const f=vu(o),y=vu(n);if(h!==1/0&&_l(f,y,s)>=h)return h;if(Ns(f,y)){if(Ws(o,n))return 0}else if(Ws(n,o))return 0;let x=1/0;for(const w of o)for(let I=0,F=w.length,V=F-1;I<F;V=I++){const J=w[V],re=w[I];for(const ue of n)for(let me=0,Te=ue.length,Re=Te-1;me<Te;Re=me++){const Ne=ue[Re],Qe=ue[me];if(Us(J,re,Ne,Qe))return 0;x=Math.min(x,_u(J,re,Ne,Qe,s))}}return x}function xu(o,n,s,h,f,y){if(!y)return;const x=_l(yu(h,y),f,s);x<n&&o.push([x,y,[0,0]])}function vo(o,n,s,h,f,y,x){if(!y||!x)return;const w=_l(yu(h,y),yu(f,x),s);w<n&&o.push([w,y,x])}function _o(o,n,s,h,f=1/0){let y=Math.min(h.distance(o[0],s[0][0]),f);if(y===0)return y;const x=new mu([[0,[0,o.length-1],[0,0]]],Sc),w=vu(s);for(;x.length>0;){const I=x.pop();if(I[0]>=y)continue;const F=I[1],V=n?50:100;if(Gs(F)<=V){if(!yo(F,o.length))return NaN;if(n){const J=Kn(o,F,s,h);if(isNaN(J)||J===0)return J;y=Math.min(y,J)}else for(let J=F[0];J<=F[1];++J){const re=Ln(o[J],s,h);if(y=Math.min(y,re),y===0)return 0}}else{const J=qo(F,n);xu(x,y,h,o,w,J[0]),xu(x,y,h,o,w,J[1])}}return y}function Fr(o,n,s,h,f,y=1/0){let x=Math.min(y,f.distance(o[0],s[0]));if(x===0)return x;const w=new mu([[0,[0,o.length-1],[0,s.length-1]]],Sc);for(;w.length>0;){const I=w.pop();if(I[0]>=x)continue;const F=I[1],V=I[2],J=n?50:100,re=h?50:100;if(Gs(F)<=J&&Gs(V)<=re){if(!yo(F,o.length)&&yo(V,s.length))return NaN;let ue;if(n&&h)ue=bn(o,F,s,V,f),x=Math.min(x,ue);else if(n&&!h){const me=o.slice(F[0],F[1]+1);for(let Te=V[0];Te<=V[1];++Te)if(ue=Gn(s[Te],me,f),x=Math.min(x,ue),x===0)return x}else if(!n&&h){const me=s.slice(V[0],V[1]+1);for(let Te=F[0];Te<=F[1];++Te)if(ue=Gn(o[Te],me,f),x=Math.min(x,ue),x===0)return x}else ue=Zs(o,F,s,V,f),x=Math.min(x,ue)}else{const ue=qo(F,n),me=qo(V,h);vo(w,x,f,o,s,ue[0],me[0]),vo(w,x,f,o,s,ue[0],me[1]),vo(w,x,f,o,s,ue[1],me[0]),vo(w,x,f,o,s,ue[1],me[1])}}return x}function xo(o){return o.type==="MultiPolygon"?o.coordinates.map(n=>({type:"Polygon",coordinates:n})):o.type==="MultiLineString"?o.coordinates.map(n=>({type:"LineString",coordinates:n})):o.type==="MultiPoint"?o.coordinates.map(n=>({type:"Point",coordinates:n})):[o]}class io{constructor(n,s){this.type=Ge,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(mi(n[1])){const h=n[1];if(h.type==="FeatureCollection")return new io(h,h.features.map(f=>xo(f.geometry)).flat());if(h.type==="Feature")return new io(h,xo(h.geometry));if("type"in h&&"coordinates"in h)return new io(h,xo(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const f=s.geometry(),y=f.flat().map(I=>Bs([I.x,I.y],s.canonical));if(f.length===0)return NaN;const x=new gu(y[0][1]);let w=1/0;for(const I of h){switch(I.type){case"Point":w=Math.min(w,Fr(y,!1,[I.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,Fr(y,!1,I.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,_o(y,!1,I.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const f=s.geometry(),y=f.flat().map(I=>Bs([I.x,I.y],s.canonical));if(f.length===0)return NaN;const x=new gu(y[0][1]);let w=1/0;for(const I of h){switch(I.type){case"Point":w=Math.min(w,Fr(y,!0,[I.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,Fr(y,!0,I.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,_o(y,!0,I.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,h){const f=s.geometry();if(f.length===0||f[0].length===0)return NaN;const y=vl(f,0).map(I=>I.map(F=>F.map(V=>Bs([V.x,V.y],s.canonical)))),x=new gu(y[0][0][0][1]);let w=1/0;for(const I of h)for(const F of y){switch(I.type){case"Point":w=Math.min(w,_o([I.coordinates],!1,F,x,w));break;case"LineString":w=Math.min(w,_o(I.coordinates,!0,F,x,w));break;case"Polygon":w=Math.min(w,Pa(F,I.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const wo={"==":cl,"!=":Zh,">":hc,"<":Wh,">=":fc,"<=":dc,array:_r,at:hu,boolean:_r,case:ll,coalesce:Ea,collator:hl,format:fl,image:fu,in:Kr,"index-of":sl,interpolate:vi,"interpolate-hcl":vi,"interpolate-lab":vi,length:pl,let:In,literal:ps,match:al,number:_r,"number-format":dl,object:_r,slice:ul,step:ms,string:_r,"to-boolean":Xo,"to-color":Xo,"to-number":Xo,"to-string":Xo,var:ol,within:ys,distance:io};class _i{constructor(n,s,h,f){this.name=n,this.type=s,this._evaluate=h,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],f=_i.definitions[h];if(!f)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,w=x.filter(([F])=>!Array.isArray(F)||F.length===n.length-1);let I=null;for(const[F,V]of w){I=new Ko(s.registry,Ia,s.path,null,s.scope);const J=[];let re=!1;for(let ue=1;ue<n.length;ue++){const me=n[ue],Te=Array.isArray(F)?F[ue-1]:F.type,Re=I.parse(me,1+J.length,Te);if(!Re){re=!0;break}J.push(Re)}if(!re)if(Array.isArray(F)&&F.length!==J.length)I.error(`Expected ${F.length} arguments, but found ${J.length} instead.`);else{for(let ue=0;ue<J.length;ue++){const me=Array.isArray(F)?F[ue]:F.type,Te=J[ue];I.concat(ue+1).checkSubtype(me,Te.type)}if(I.errors.length===0)return new _i(h,y,V,J)}}if(w.length===1)s.errors.push(...I.errors);else{const F=(w.length?w:x).map(([J])=>{return re=J,Array.isArray(re)?`(${re.map(ie).join(", ")})`:`(${ie(re.type)}...)`;var re}).join(" | "),V=[];for(let J=1;J<n.length;J++){const re=s.parse(n[J],1+V.length);if(!re)return null;V.push(ie(re.type))}s.error(`Expected arguments of type ${F}, but found (${V.join(", ")}) instead.`)}return null}static register(n,s){_i.definitions=s;for(const h in s)n[h]=_i}}function Hs(o,[n,s,h,f]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const y=f?f.evaluate(o):1,x=rl(n,s,h,y);if(x)throw new dr(x);return new kn(n/255,s/255,h/255,y,!1)}function vs(o,n){return o in n}function xi(o,n){const s=n[o];return s===void 0?null:s}function Ai(o){return{type:o}}function Ia(o){if(o instanceof ol)return Ia(o.boundExpression);if(o instanceof _i&&o.name==="error"||o instanceof hl||o instanceof ys||o instanceof io)return!1;const n=o instanceof Xo||o instanceof _r;let s=!0;return o.eachChild(h=>{s=n?s&&Ia(h):s&&h instanceof ps}),!!s&&_s(o)&&Aa(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _s(o){if(o instanceof _i&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ys||o instanceof io)return!1;let n=!0;return o.eachChild(s=>{n&&!_s(s)&&(n=!1)}),n}function Jo(o){if(o instanceof _i&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!Jo(s)&&(n=!1)}),n}function Aa(o,n){if(o instanceof _i&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!Aa(h,n)&&(s=!1)}),s}function wu(o){return{result:"success",value:o}}function xs(o){return{result:"error",value:o}}function Yo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function oo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function ws(o){return!!o.expression&&o.expression.interpolated}function zn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Xs(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function xl(o){return o}function bu(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",f=h||!(h||o.property!==void 0),y=o.type||(ws(n)?"exponential":"interval");if(s||n.type==="padding"){const V=s?kn.parse:fi.parse;(o=$({},o)).stops&&(o.stops=o.stops.map(J=>[J[0],V(J[1])])),o.default=V(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let w,I,F;if(y==="exponential")w=ge;else if(y==="interval")w=Z;else if(y==="categorical"){w=Ma,I=Object.create(null);for(const V of o.stops)I[V[0]]=V[1];F=typeof o.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);w=$e}if(h){const V={},J=[];for(let me=0;me<o.stops.length;me++){const Te=o.stops[me],Re=Te[0].zoom;V[Re]===void 0&&(V[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},J.push(Re)),V[Re].stops.push([Te[0].value,Te[1]])}const re=[];for(const me of J)re.push([V[me].zoom,bu(V[me],n)]);const ue={name:"linear"};return{kind:"composite",interpolationType:ue,interpolationFactor:vi.interpolationFactor.bind(void 0,ue),zoomStops:re.map(me=>me[0]),evaluate:({zoom:me},Te)=>ge({stops:re,base:o.base},n,me).evaluate(me,Te)}}if(f){const V=y==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:vi.interpolationFactor.bind(void 0,V),zoomStops:o.stops.map(J=>J[0]),evaluate:({zoom:J})=>w(o,n,J,I,F)}}return{kind:"source",evaluate(V,J){const re=J&&J.properties?J.properties[o.property]:void 0;return re===void 0?Qo(o.default,n.default):w(o,n,re,I,F)}}}function Qo(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Ma(o,n,s,h,f){return Qo(typeof s===f?h[s]:void 0,o.default,n.default)}function Z(o,n,s){if(zn(s)!=="number")return Qo(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const f=xa(o.stops.map(y=>y[0]),s);return o.stops[f][1]}function ge(o,n,s){const h=o.base!==void 0?o.base:1;if(zn(s)!=="number")return Qo(o.default,n.default);const f=o.stops.length;if(f===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[f-1][0])return o.stops[f-1][1];const y=xa(o.stops.map(V=>V[0]),s),x=function(V,J,re,ue){const me=ue-re,Te=V-re;return me===0?0:J===1?Te/me:(Math.pow(J,Te)-1)/(Math.pow(J,me)-1)}(s,h,o.stops[y][0],o.stops[y+1][0]),w=o.stops[y][1],I=o.stops[y+1][1],F=yi[n.type]||xl;return typeof w.evaluate=="function"?{evaluate(...V){const J=w.evaluate.apply(void 0,V),re=I.evaluate.apply(void 0,V);if(J!==void 0&&re!==void 0)return F(J,re,x,o.colorSpace)}}:F(w,I,x,o.colorSpace)}function $e(o,n,s){switch(n.type){case"color":s=kn.parse(s);break;case"formatted":s=Tr.fromString(s.toString());break;case"resolvedImage":s=Gr.fromString(s.toString());break;case"padding":s=fi.parse(s);break;default:zn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Qo(s,o.default,n.default)}_i.register(wo,{error:[{kind:"error"},[Et],(o,[n])=>{throw new dr(n.evaluate(o))}],typeof:[Et,[Rt],(o,[n])=>ie(vr(n.evaluate(o)))],"to-rgba":[se(Ge,4),[yn],(o,[n])=>{const[s,h,f,y]=n.evaluate(o).rgb;return[255*s,255*h,255*f,y]}],rgb:[yn,[Ge,Ge,Ge],Hs],rgba:[yn,[Ge,Ge,Ge,Ge],Hs],has:{type:It,overloads:[[[Et],(o,[n])=>vs(n.evaluate(o),o.properties())],[[Et,Sn],(o,[n,s])=>vs(n.evaluate(o),s.evaluate(o))]]},get:{type:Rt,overloads:[[[Et],(o,[n])=>xi(n.evaluate(o),o.properties())],[[Et,Sn],(o,[n,s])=>xi(n.evaluate(o),s.evaluate(o))]]},"feature-state":[Rt,[Et],(o,[n])=>xi(n.evaluate(o),o.featureState||{})],properties:[Sn,[],o=>o.properties()],"geometry-type":[Et,[],o=>o.geometryType()],id:[Rt,[],o=>o.id()],zoom:[Ge,[],o=>o.globals.zoom],"heatmap-density":[Ge,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ge,[],o=>o.globals.lineProgress||0],accumulated:[Rt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ge,Ai(Ge),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[Ge,Ai(Ge),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:Ge,overloads:[[[Ge,Ge],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[Ge],(o,[n])=>-n.evaluate(o)]]},"/":[Ge,[Ge,Ge],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[Ge,[Ge,Ge],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[Ge,[],()=>Math.LN2],pi:[Ge,[],()=>Math.PI],e:[Ge,[],()=>Math.E],"^":[Ge,[Ge,Ge],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[Ge,[Ge],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Ge,[Ge],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Ge,[Ge],(o,[n])=>Math.log(n.evaluate(o))],log2:[Ge,[Ge],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Ge,[Ge],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Ge,[Ge],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Ge,[Ge],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Ge,[Ge],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Ge,[Ge],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Ge,[Ge],(o,[n])=>Math.atan(n.evaluate(o))],min:[Ge,Ai(Ge),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[Ge,Ai(Ge),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[Ge,[Ge],(o,[n])=>Math.abs(n.evaluate(o))],round:[Ge,[Ge],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ge,[Ge],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Ge,[Ge],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[It,[Et,Rt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[It,[Rt],(o,[n])=>o.id()===n.value],"filter-type-==":[It,[Et],(o,[n])=>o.geometryType()===n.value],"filter-<":[It,[Et,Rt],(o,[n,s])=>{const h=o.properties()[n.value],f=s.value;return typeof h==typeof f&&h<f}],"filter-id-<":[It,[Rt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[It,[Et,Rt],(o,[n,s])=>{const h=o.properties()[n.value],f=s.value;return typeof h==typeof f&&h>f}],"filter-id->":[It,[Rt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[It,[Et,Rt],(o,[n,s])=>{const h=o.properties()[n.value],f=s.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[It,[Rt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[It,[Et,Rt],(o,[n,s])=>{const h=o.properties()[n.value],f=s.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[It,[Rt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[It,[Rt],(o,[n])=>n.value in o.properties()],"filter-has-id":[It,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[It,[se(Et)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[It,[se(Rt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[It,[Et,se(Rt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[It,[Et,se(Rt)],(o,[n,s])=>function(h,f,y,x){for(;y<=x;){const w=y+x>>1;if(f[w]===h)return!0;f[w]>h?x=w-1:y=w+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:It,overloads:[[[It,It],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Ai(It),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Ai(It),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[It,[It],(o,[n])=>!n.evaluate(o)],"is-supported-script":[It,[Et],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Et,[Et],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Et,[Et],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Et,Ai(Rt),(o,n)=>n.map(s=>go(s.evaluate(o))).join("")],"resolved-locale":[Et,[zr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class ut{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new _a,this._defaultValue=s?(h=s).type==="color"&&Xs(h.default)?new kn(0,0,0,0):h.type==="color"?kn.parse(h.default)||null:h.type==="padding"?fi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?pi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,f,y,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=f,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,f,y,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=f,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new dr(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function kt(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in wo}function St(o,n){const s=new Ko(wo,Ia,[],n?function(f){const y={color:yn,string:Et,number:Ge,enum:Et,boolean:It,formatted:ei,padding:Ii,resolvedImage:Ur,variableAnchorOffsetCollection:ze};return f.type==="array"?se(y[f.value]||Rt,f.length):y[f.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?wu(new ut(h,n)):xs(s.errors)}class Ht{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Jo(s.expression)}evaluateWithoutErrorHandling(n,s,h,f,y,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,f,y,x)}evaluate(n,s,h,f,y,x){return this._styleExpression.evaluate(n,s,h,f,y,x)}}class Jt{constructor(n,s,h,f){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Jo(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,s,h,f,y,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,f,y,x)}evaluate(n,s,h,f,y,x){return this._styleExpression.evaluate(n,s,h,f,y,x)}interpolationFactor(n,s,h){return this.interpolationType?vi.interpolationFactor(this.interpolationType,n,s,h):0}}function vn(o,n){const s=St(o,n);if(s.result==="error")return s;const h=s.value.expression,f=_s(h);if(!f&&!Yo(n))return xs([new Ee("","data expressions not supported")]);const y=Aa(h,["zoom"]);if(!y&&!oo(n))return xs([new Ee("","zoom expressions not supported")]);const x=Fn(h);return x||y?x instanceof Ee?xs([x]):x instanceof vi&&!ws(n)?xs([new Ee("",'"interpolate" expressions cannot be used with this property')]):wu(x?new Jt(f?"camera":"composite",s.value,x.labels,x instanceof vi?x.interpolation:void 0):new Ht(f?"constant":"source",s.value)):xs([new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dn{constructor(n,s){this._parameters=n,this._specification=s,$(this,bu(this._parameters,this._specification))}static deserialize(n){return new Dn(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Fn(o){let n=null;if(o instanceof In)n=Fn(o.result);else if(o instanceof Ea){for(const s of o.args)if(n=Fn(s),n)break}else(o instanceof ms||o instanceof vi)&&o.input instanceof _i&&o.input.name==="zoom"&&(n=o);return n instanceof Ee||o.eachChild(s=>{const h=Fn(s);h instanceof Ee?n=h:!n&&h?n=new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Ee("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Zn(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Zn(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const rr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Un(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Zn(o)||(o=Mi(o));const n=St(o,rr);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,f)=>n.value.evaluate(s,h,{},f),needGeometry:so(o)}}function fr(o,n){return o<n?-1:o>n?1:0}function so(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let n=1;n<o.length;n++)if(so(o[n]))return!0;return!1}function Mi(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?bo(o[1],o[2],"=="):n==="!="?So(bo(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?bo(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Mi))):n==="all"?["all"].concat(o.slice(1).map(Mi)):n==="none"?["all"].concat(o.slice(1).map(Mi).map(So)):n==="in"?bs(o[1],o.slice(2)):n==="!in"?So(bs(o[1],o.slice(2))):n==="has"?Ks(o[1]):n!=="!has"||So(Ks(o[1]));var s}function bo(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function bs(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(fr)]]:["filter-in-small",o,["literal",n]]}}function Ks(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function So(o){return["!",o]}function Qh(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let f="[";for(const y of o)f+=`${Qh(y)},`;return`${f}]`}const s=Object.keys(o).sort();let h="{";for(let f=0;f<s.length;f++)h+=`${JSON.stringify(s[f])}:${Qh(o[s[f]])},`;return`${h}}`}function ed(o){let n="";for(const s of _n)n+=`/${Qh(o[s])}`;return n}function hp(o){const n=o.value;return n?[new k(o.key,n,"constants have been deprecated as of v8")]:[]}function ir(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ka(o){if(Array.isArray(o))return o.map(ka);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=ka(o[s]);return n}return ir(o)}function ki(o){const n=o.key,s=o.value,h=o.valueSpec||{},f=o.objectElementValidators||{},y=o.style,x=o.styleSpec,w=o.validateSpec;let I=[];const F=zn(s);if(F!=="object")return[new k(n,s,`object expected, ${F} found`)];for(const V in s){const J=V.split(".")[0],re=h[J]||h["*"];let ue;if(f[J])ue=f[J];else if(h[J])ue=w;else if(f["*"])ue=f["*"];else{if(!h["*"]){I.push(new k(n,s[V],`unknown property "${V}"`));continue}ue=w}I=I.concat(ue({key:(n&&`${n}.`)+V,value:s[V],valueSpec:re,style:y,styleSpec:x,object:s,objectKey:V,validateSpec:w},s))}for(const V in h)f[V]||h[V].required&&h[V].default===void 0&&s[V]===void 0&&I.push(new k(n,s,`missing required property "${V}"`));return I}function Ec(o){const n=o.value,s=o.valueSpec,h=o.style,f=o.styleSpec,y=o.key,x=o.arrayElementValidator||o.validateSpec;if(zn(n)!=="array")return[new k(y,n,`array expected, ${zn(n)} found`)];if(s.length&&n.length!==s.length)return[new k(y,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new k(y,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let w={type:s.value,values:s.values};f.$version<7&&(w.function=s.function),zn(s.value)==="object"&&(w=s.value);let I=[];for(let F=0;F<n.length;F++)I=I.concat(x({array:n,arrayIndex:F,value:n[F],valueSpec:w,validateSpec:o.validateSpec,style:h,styleSpec:f,key:`${y}[${F}]`}));return I}function Su(o){const n=o.key,s=o.value,h=o.valueSpec;let f=zn(s);return f==="number"&&s!=s&&(f="NaN"),f!=="number"?[new k(n,s,`number expected, ${f} found`)]:"minimum"in h&&s<h.minimum?[new k(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new k(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function td(o){const n=o.valueSpec,s=ir(o.value.type);let h,f,y,x={};const w=s!=="categorical"&&o.value.property===void 0,I=!w,F=zn(o.value.stops)==="array"&&zn(o.value.stops[0])==="array"&&zn(o.value.stops[0][0])==="object",V=ki({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ue){if(s==="identity")return[new k(ue.key,ue.value,'identity function may not have a "stops" property')];let me=[];const Te=ue.value;return me=me.concat(Ec({key:ue.key,value:Te,valueSpec:ue.valueSpec,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,arrayElementValidator:J})),zn(Te)==="array"&&Te.length===0&&me.push(new k(ue.key,Te,"array must have at least one stop")),me},default:function(ue){return ue.validateSpec({key:ue.key,value:ue.value,valueSpec:n,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec})}}});return s==="identity"&&w&&V.push(new k(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||V.push(new k(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!ws(o.valueSpec)&&V.push(new k(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(I&&!Yo(o.valueSpec)?V.push(new k(o.key,o.value,"property functions not supported")):w&&!oo(o.valueSpec)&&V.push(new k(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||V.push(new k(o.key,o.value,'"property" property is required')),V;function J(ue){let me=[];const Te=ue.value,Re=ue.key;if(zn(Te)!=="array")return[new k(Re,Te,`array expected, ${zn(Te)} found`)];if(Te.length!==2)return[new k(Re,Te,`array length 2 expected, length ${Te.length} found`)];if(F){if(zn(Te[0])!=="object")return[new k(Re,Te,`object expected, ${zn(Te[0])} found`)];if(Te[0].zoom===void 0)return[new k(Re,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new k(Re,Te,"object stop key must have value")];if(y&&y>ir(Te[0].zoom))return[new k(Re,Te[0].zoom,"stop zoom values must appear in ascending order")];ir(Te[0].zoom)!==y&&(y=ir(Te[0].zoom),f=void 0,x={}),me=me.concat(ki({key:`${Re}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{zoom:Su,value:re}}))}else me=me.concat(re({key:`${Re}[0]`,value:Te[0],valueSpec:{},validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec},Te));return kt(ka(Te[1]))?me.concat([new k(`${Re}[1]`,Te[1],"expressions are not allowed in function stops.")]):me.concat(ue.validateSpec({key:`${Re}[1]`,value:Te[1],valueSpec:n,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec}))}function re(ue,me){const Te=zn(ue.value),Re=ir(ue.value),Ne=ue.value!==null?ue.value:me;if(h){if(Te!==h)return[new k(ue.key,Ne,`${Te} stop domain type must match previous stop domain type ${h}`)]}else h=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new k(ue.key,Ne,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&s!=="categorical"){let Qe=`number expected, ${Te} found`;return Yo(n)&&s===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new k(ue.key,Ne,Qe)]}return s!=="categorical"||Te!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&Te==="number"&&f!==void 0&&Re<f?[new k(ue.key,Ne,"stop domain values must appear in ascending order")]:(f=Re,s==="categorical"&&Re in x?[new k(ue.key,Ne,"stop domain values must be unique")]:(x[Re]=!0,[])):[new k(ue.key,Ne,`integer expected, found ${Re}`)]}}function za(o){const n=(o.expressionContext==="property"?vn:St)(ka(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new k(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new k(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Jo(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Jo(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Aa(s,["zoom","feature-state"]))return[new k(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!_s(s))return[new k(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Eu(o){const n=o.key,s=o.value,h=o.valueSpec,f=[];return Array.isArray(h.values)?h.values.indexOf(ir(s))===-1&&f.push(new k(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(ir(s))===-1&&f.push(new k(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function Tu(o){return Zn(ka(o.value))?za($({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Cu(o)}function Cu(o){const n=o.value,s=o.key;if(zn(n)!=="array")return[new k(s,n,`array expected, ${zn(n)} found`)];const h=o.styleSpec;let f,y=[];if(n.length<1)return[new k(s,n,"filter array must have at least 1 element")];switch(y=y.concat(Eu({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),ir(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&ir(n[1])==="$type"&&y.push(new k(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&y.push(new k(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=zn(n[1]),f!=="string"&&y.push(new k(`${s}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=zn(n[x]),ir(n[1])==="$type"?y=y.concat(Eu({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&y.push(new k(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)y=y.concat(Cu({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":f=zn(n[1]),n.length!==2?y.push(new k(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&y.push(new k(`${s}[1]`,n[1],`string expected, ${f} found`))}return y}function nd(o,n){const s=o.key,h=o.validateSpec,f=o.style,y=o.styleSpec,x=o.value,w=o.objectKey,I=y[`${n}_${o.layerType}`];if(!I)return[];const F=w.match(/^(.*)-transition$/);if(n==="paint"&&F&&I[F[1]]&&I[F[1]].transition)return h({key:s,value:x,valueSpec:y.transition,style:f,styleSpec:y});const V=o.valueSpec||I[w];if(!V)return[new k(s,x,`unknown property "${w}"`)];let J;if(zn(x)==="string"&&Yo(V)&&!V.tokens&&(J=/^{([^}]+)}$/.exec(x)))return[new k(s,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const re=[];return o.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&re.push(new k(s,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Xs(ka(x))&&ir(x.type)==="identity"&&re.push(new k(s,x,'"text-font" does not support identity functions'))),re.concat(h({key:o.key,value:x,valueSpec:V,style:f,styleSpec:y,expressionContext:"property",propertyType:n,propertyKey:w}))}function rd(o){return nd(o,"paint")}function id(o){return nd(o,"layout")}function od(o){let n=[];const s=o.value,h=o.key,f=o.style,y=o.styleSpec;s.type||s.ref||n.push(new k(h,s,'either "type" or "ref" is required'));let x=ir(s.type);const w=ir(s.ref);if(s.id){const I=ir(s.id);for(let F=0;F<o.arrayIndex;F++){const V=f.layers[F];ir(V.id)===I&&n.push(new k(h,s.id,`duplicate layer id "${s.id}", previously used at line ${V.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&n.push(new k(h,s[F],`"${F}" is prohibited for ref layers`))}),f.layers.forEach(F=>{ir(F.id)===w&&(I=F)}),I?I.ref?n.push(new k(h,s.ref,"ref cannot reference another ref layer")):x=ir(I.type):n.push(new k(h,s.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(s.source){const I=f.sources&&f.sources[s.source],F=I&&ir(I.type);I?F==="vector"&&x==="raster"?n.push(new k(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?n.push(new k(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?n.push(new k(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?n.push(new k(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&I.lineMetrics||n.push(new k(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new k(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new k(h,s.source,`source "${s.source}" not found`))}else n.push(new k(h,s,'missing required property "source"'));return n=n.concat(ki({key:h,value:s,valueSpec:y.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:y.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Tu,layout:I=>ki({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":F=>id($({layerType:x},F))}}),paint:I=>ki({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":F=>rd($({layerType:x},F))}})}})),n}function Ss(o){const n=o.value,s=o.key,h=zn(n);return h!=="string"?[new k(s,n,`string expected, ${h} found`)]:[]}const sd={promoteId:function({key:o,value:n}){if(zn(n)==="string")return Ss({key:o,value:n});{const s=[];for(const h in n)s.push(...Ss({key:`${o}.${h}`,value:n[h]}));return s}}};function dp(o){const n=o.value,s=o.key,h=o.styleSpec,f=o.style,y=o.validateSpec;if(!n.type)return[new k(s,n,'"type" is required')];const x=ir(n.type);let w;switch(x){case"vector":case"raster":return w=ki({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:sd,validateSpec:y}),w;case"raster-dem":return w=function(I){var F;const V=(F=I.sourceName)!==null&&F!==void 0?F:"",J=I.value,re=I.styleSpec,ue=re.source_raster_dem,me=I.style;let Te=[];const Re=zn(J);if(J===void 0)return Te;if(Re!=="object")return Te.push(new k("source_raster_dem",J,`object expected, ${Re} found`)),Te;const Ne=ir(J.encoding)==="custom",Qe=["redFactor","greenFactor","blueFactor","baseShift"],He=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Ye in J)!Ne&&Qe.includes(Ye)?Te.push(new k(Ye,J[Ye],`In "${V}": "${Ye}" is only valid when "encoding" is set to "custom". ${He} encoding found`)):ue[Ye]?Te=Te.concat(I.validateSpec({key:Ye,value:J[Ye],valueSpec:ue[Ye],validateSpec:I.validateSpec,style:me,styleSpec:re})):Te.push(new k(Ye,J[Ye],`unknown property "${Ye}"`));return Te}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:y}),w;case"geojson":if(w=ki({key:s,value:n,valueSpec:h.source_geojson,style:f,styleSpec:h,validateSpec:y,objectElementValidators:sd}),n.cluster)for(const I in n.clusterProperties){const[F,V]=n.clusterProperties[I],J=typeof F=="string"?[F,["accumulated"],["get",I]]:F;w.push(...za({key:`${s}.${I}.map`,value:V,validateSpec:y,expressionContext:"cluster-map"})),w.push(...za({key:`${s}.${I}.reduce`,value:J,validateSpec:y,expressionContext:"cluster-reduce"}))}return w;case"video":return ki({key:s,value:n,valueSpec:h.source_video,style:f,validateSpec:y,styleSpec:h});case"image":return ki({key:s,value:n,valueSpec:h.source_image,style:f,validateSpec:y,styleSpec:h});case"canvas":return[new k(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Eu({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:y,styleSpec:h})}}function ad(o){const n=o.value,s=o.styleSpec,h=s.light,f=o.style;let y=[];const x=zn(n);if(n===void 0)return y;if(x!=="object")return y=y.concat([new k("light",n,`object expected, ${x} found`)]),y;for(const w in n){const I=w.match(/^(.*)-transition$/);y=y.concat(I&&h[I[1]]&&h[I[1]].transition?o.validateSpec({key:w,value:n[w],valueSpec:s.transition,validateSpec:o.validateSpec,style:f,styleSpec:s}):h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:o.validateSpec,style:f,styleSpec:s}):[new k(w,n[w],`unknown property "${w}"`)])}return y}function fp(o){const n=o.value,s=o.styleSpec,h=s.sky,f=o.style,y=zn(n);if(n===void 0)return[];if(y!=="object")return[new k("sky",n,`object expected, ${y} found`)];let x=[];for(const w in n)x=x.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],style:f,styleSpec:s}):[new k(w,n[w],`unknown property "${w}"`)]);return x}function ld(o){const n=o.value,s=o.styleSpec,h=s.terrain,f=o.style;let y=[];const x=zn(n);if(n===void 0)return y;if(x!=="object")return y=y.concat([new k("terrain",n,`object expected, ${x} found`)]),y;for(const w in n)y=y.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:o.validateSpec,style:f,styleSpec:s}):[new k(w,n[w],`unknown property "${w}"`)]);return y}function ud(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const f=[],y=[];for(const x in s)s[x].id&&f.includes(s[x].id)&&n.push(new k(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),f.push(s[x].id),s[x].url&&y.includes(s[x].url)&&n.push(new k(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),y.push(s[x].url),n=n.concat(ki({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return Ss({key:h,value:s})}const cd={"*":()=>[],array:Ec,boolean:function(o){const n=o.value,s=o.key,h=zn(n);return h!=="boolean"?[new k(s,n,`boolean expected, ${h} found`)]:[]},number:Su,color:function(o){const n=o.key,s=o.value,h=zn(s);return h!=="string"?[new k(n,s,`color expected, ${h} found`)]:kn.parse(String(s))?[]:[new k(n,s,`color expected, "${s}" found`)]},constants:hp,enum:Eu,filter:Tu,function:td,layer:od,object:ki,source:dp,light:ad,sky:fp,terrain:ld,projection:function(o){const n=o.value,s=o.styleSpec,h=s.projection,f=o.style,y=zn(n);if(n===void 0)return[];if(y!=="object")return[new k("projection",n,`object expected, ${y} found`)];let x=[];for(const w in n)x=x.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],style:f,styleSpec:s}):[new k(w,n[w],`unknown property "${w}"`)]);return x},string:Ss,formatted:function(o){return Ss(o).length===0?[]:za(o)},resolvedImage:function(o){return Ss(o).length===0?[]:za(o)},padding:function(o){const n=o.key,s=o.value;if(zn(s)==="array"){if(s.length<1||s.length>4)return[new k(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let f=[];for(let y=0;y<s.length;y++)f=f.concat(o.validateSpec({key:`${n}[${y}]`,value:s[y],validateSpec:o.validateSpec,valueSpec:h}));return f}return Su({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=zn(s),f=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new k(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let x=0;x<s.length;x+=2)y=y.concat(Eu({key:`${n}[${x}]`,value:s[x],valueSpec:f.layout_symbol["text-anchor"]})),y=y.concat(Ec({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:f}));return y},sprite:ud};function Pu(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Pu,s.expression&&Xs(ir(n))?td(o):s.expression&&kt(ka(n))?za(o):s.type&&cd[s.type]?cd[s.type](o):ki($({},o,{valueSpec:s.type?h[s.type]:s}))}function pp(o){const n=o.value,s=o.key,h=Ss(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new k(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new k(s,n,'"glyphs" url must include a "{range}" token'))),h}function ao(o,n=et){let s=[];return s=s.concat(Pu({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Pu,objectElementValidators:{glyphs:pp,"*":()=>[]}})),o.constants&&(s=s.concat(hp({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Pu}))),hd(s)}function Eo(o){return function(n){return o({...n,validateSpec:Pu})}}function hd(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function To(o){return function(...n){return hd(o.apply(this,n))}}ao.source=To(Eo(dp)),ao.sprite=To(Eo(ud)),ao.glyphs=To(Eo(pp)),ao.light=To(Eo(ad)),ao.sky=To(Eo(fp)),ao.terrain=To(Eo(ld)),ao.layer=To(Eo(od)),ao.filter=To(Eo(Tu)),ao.paintProperty=To(Eo(rd)),ao.layoutProperty=To(Eo(id));const Es=ao,vy=Es.light,dd=Es.sky,_y=Es.paintProperty,xy=Es.layoutProperty;function fd(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new Wt(new Error(h.message))),s=!0;return s}class wl{constructor(n,s,h){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let I=0;I<this.d*this.d;I++){const F=x[3+I],V=x[3+I+1];f.push(F===V?null:x.subarray(F,V))}const w=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const y=h/s*n;this.min=-y,this.max=n+y}insert(n,s,h,f,y){this._forEachCell(s,h,f,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,f,y,x){this.cells[y].push(x)}query(n,s,h,f,y){const x=this.min,w=this.max;if(n<=x&&s<=x&&w<=h&&w<=f&&!y)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,s,h,f,this._queryCell,I,{},y),I}}_queryCell(n,s,h,f,y,x,w,I){const F=this.cells[y];if(F!==null){const V=this.keys,J=this.bboxes;for(let re=0;re<F.length;re++){const ue=F[re];if(w[ue]===void 0){const me=4*ue;(I?I(J[me+0],J[me+1],J[me+2],J[me+3]):n<=J[me+2]&&s<=J[me+3]&&h>=J[me+0]&&f>=J[me+1])?(w[ue]=!0,x.push(V[ue])):w[ue]=!1}}}}_forEachCell(n,s,h,f,y,x,w,I){const F=this._convertToCellCoord(n),V=this._convertToCellCoord(s),J=this._convertToCellCoord(h),re=this._convertToCellCoord(f);for(let ue=F;ue<=J;ue++)for(let me=V;me<=re;me++){const Te=this.d*me+ue;if((!I||I(this._convertFromCellCoord(ue),this._convertFromCellCoord(me),this._convertFromCellCoord(ue+1),this._convertFromCellCoord(me+1)))&&y.call(this,n,s,h,f,Te,x,w,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const f=new Int32Array(s+h+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let y=s;for(let x=0;x<n.length;x++){const w=n[x];f[3+x]=y,f.set(w,y),y+=w.length}return f[3+n.length]=y,f.set(this.keys,y),y+=this.keys.length,f[3+n.length+1]=y,f.set(this.bboxes,y),y+=this.bboxes.length,f.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new wl(n.buffer)}}const es={};function Ut(o,n,s={}){if(es[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),es[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Ut("Object",Object),Ut("TransferableGridIndex",wl),Ut("Color",kn),Ut("Error",Error),Ut("AJAXError",it),Ut("ResolvedImage",Gr),Ut("StylePropertyFunction",Dn),Ut("StyleExpression",ut,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",Jt),Ut("ZoomConstantExpression",Ht),Ut("CompoundExpression",_i,{omit:["_evaluate"]});for(const o in wo)wo[o]._classRegistryKey||Ut(`Expression_${o}`,wo[o]);function mp(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function pd(o){return o.$name||o.constructor._classRegistryKey}function gp(o){return!function(n){if(n===null||typeof n!="object")return!1;const s=pd(n);return!(!s||s==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||mp(o)||Y(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function Iu(o,n){if(gp(o))return(mp(o)||Y(o))&&n&&n.push(o),ArrayBuffer.isView(o)&&n&&n.push(o.buffer),o instanceof ImageData&&n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const y=[];for(const x of o)y.push(Iu(x,n));return y}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const s=pd(o);if(!s)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!es[s])throw new Error(`${s} is not registered.`);const{klass:h}=es[s],f=h.serialize?h.serialize(o,n):{};if(h.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in o){if(!o.hasOwnProperty(y)||es[s].omit.indexOf(y)>=0)continue;const x=o[y];f[y]=es[s].shallow.indexOf(y)>=0?x:Iu(x,n)}o instanceof Error&&(f.message=o.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(f.$name=s),f}function ts(o){if(gp(o))return o;if(Array.isArray(o))return o.map(ts);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const n=pd(o)||"Object";if(!es[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=es[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const f of Object.keys(o)){if(f==="$name")continue;const y=o[f];h[f]=es[n].shallow.indexOf(f)>=0?y:ts(y)}return h}class yp{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Lt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function md(o){for(const n of o)if(gd(n.charCodeAt(0)))return!0;return!1}function wy(o){for(const n of o)if(!vp(n.charCodeAt(0)))return!1;return!0}function vp(o){return!(Lt.Arabic(o)||Lt["Arabic Supplement"](o)||Lt["Arabic Extended-A"](o)||Lt["Arabic Presentation Forms-A"](o)||Lt["Arabic Presentation Forms-B"](o))}function gd(o){return!(o!==746&&o!==747&&(o<4352||!(Lt["Bopomofo Extended"](o)||Lt.Bopomofo(o)||Lt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Lt["CJK Compatibility Ideographs"](o)||Lt["CJK Compatibility"](o)||Lt["CJK Radicals Supplement"](o)||Lt["CJK Strokes"](o)||!(!Lt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Lt["CJK Unified Ideographs Extension A"](o)||Lt["CJK Unified Ideographs"](o)||Lt["Enclosed CJK Letters and Months"](o)||Lt["Hangul Compatibility Jamo"](o)||Lt["Hangul Jamo Extended-A"](o)||Lt["Hangul Jamo Extended-B"](o)||Lt["Hangul Jamo"](o)||Lt["Hangul Syllables"](o)||Lt.Hiragana(o)||Lt["Ideographic Description Characters"](o)||Lt.Kanbun(o)||Lt["Kangxi Radicals"](o)||Lt["Katakana Phonetic Extensions"](o)||Lt.Katakana(o)&&o!==12540||!(!Lt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Lt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Lt["Unified Canadian Aboriginal Syllabics"](o)||Lt["Unified Canadian Aboriginal Syllabics Extended"](o)||Lt["Vertical Forms"](o)||Lt["Yijing Hexagram Symbols"](o)||Lt["Yi Syllables"](o)||Lt["Yi Radicals"](o))))}function _p(o){return!(gd(o)||function(n){return!!(Lt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Lt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Lt["Letterlike Symbols"](n)||Lt["Number Forms"](n)||Lt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Lt["Control Pictures"](n)&&n!==9251||Lt["Optical Character Recognition"](n)||Lt["Enclosed Alphanumerics"](n)||Lt["Geometric Shapes"](n)||Lt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Lt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Lt["CJK Symbols and Punctuation"](n)||Lt.Katakana(n)||Lt["Private Use Area"](n)||Lt["CJK Compatibility Forms"](n)||Lt["Small Form Variants"](n)||Lt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function qs(o){return o>=1424&&o<=2303||Lt["Arabic Presentation Forms-A"](o)||Lt["Arabic Presentation Forms-B"](o)}function xp(o,n){return!(!n&&qs(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Lt.Khmer(o))}function yd(o){for(const n of o)if(qs(n.charCodeAt(0)))return!0;return!1}const Js=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Qn{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new yp,this.transition={})}isSupportedScript(n){return function(s,h){for(const f of s)if(!xp(f.charCodeAt(0),h))return!1;return!0}(n,Js.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Tc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,f){if(Xs(h))return new Dn(h,f);if(kt(h)){const y=vn(h,f);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=h;return f.type==="color"&&typeof h=="string"?y=kn.parse(h):f.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(y=pi.parse(h)):y=fi.parse(h),{kind:"constant",evaluate:()=>y}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class bl{constructor(n){this.property=n,this.value=new Tc(n,void 0)}transitioned(n,s){return new wp(this.property,this.value,s,E({},n.transition,this.transition),n.now)}untransitioned(){return new wp(this.property,this.value,null,{},0)}}class Sl{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return H(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new bl(this._values[n].property)),this._values[n].value=new Tc(this._values[n].property,s===null?void 0:H(s))}getTransition(n){return H(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new bl(this._values[n].property)),this._values[n].transition=H(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const f=this.getTransition(s);f!==void 0&&(n[`${s}-transition`]=f)}return n}transitioned(n,s){const h=new vd(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].transitioned(n,s._values[f]);return h}untransitioned(){const n=new vd(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class wp{constructor(n,s,h,f,y){this.property=n,this.value=s,this.begin=y+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const f=n.now||0,y=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(f>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(f<this.begin)return x.possiblyEvaluate(n,s,h);{const w=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),y,function(I){if(I<=0)return 0;if(I>=1)return 1;const F=I*I,V=F*I;return 4*(I<.5?V:3*(I-F)+V-.75)}(w))}}return y}}class vd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const f=new Cc(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(n,s,h);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Au{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return H(this._values[n].value)}setValue(n,s){this._values[n]=new Tc(this._values[n].property,s===null?void 0:H(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const f=new Cc(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(n,s,h);return f}}class ns{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,f){return this.property.evaluate(this.value,this.parameters,n,s,h,f)}}class Cc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Yt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const f=yi[this.specification.type];return f?f(n,s,h):n}}class an{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,f){return new ns(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,f)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new ns(this,{kind:"constant",value:void 0},n.parameters);const f=yi[this.specification.type];if(f){const y=f(n.value.value,s.value.value,h);return new ns(this,{kind:"constant",value:y},n.parameters)}return n}evaluate(n,s,h,f,y,x){return n.kind==="constant"?n.value:n.evaluate(s,h,f,y,x)}}class v extends an{possiblyEvaluate(n,s,h,f){if(n.value===void 0)return new ns(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const y=n.expression.evaluate(s,null,{},h,f),x=n.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,w=this._calculate(x,x,x,s);return new ns(this,{kind:"constant",value:w},s)}if(n.expression.kind==="camera"){const y=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new ns(this,{kind:"constant",value:y},s)}return new ns(this,n.expression,s)}evaluate(n,s,h,f,y,x){if(n.kind==="source"){const w=n.evaluate(s,h,f,y,x);return this._calculate(w,w,w,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,f),n.evaluate({zoom:Math.floor(s.zoom)},h,f),n.evaluate({zoom:Math.floor(s.zoom)+1},h,f),s):n.value}_calculate(n,s,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class r{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const y=n.expression.evaluate(s,null,{},h,f);return this._calculate(y,y,y,s)}return this._calculate(n.expression.evaluate(new Qn(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Qn(Math.floor(s.zoom),s)),n.expression.evaluate(new Qn(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class l{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,f){return!!n.expression.evaluate(s,null,{},h,f)}interpolate(){return!1}}class d{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new Tc(h,void 0),y=this.defaultTransitionablePropertyValues[s]=new bl(h);this.defaultTransitioningPropertyValues[s]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate({})}}}Ut("DataDrivenProperty",an),Ut("DataConstantProperty",Yt),Ut("CrossFadedDataDrivenProperty",v),Ut("CrossFadedProperty",r),Ut("ColorRampProperty",l);const g="-transition";class _ extends ln{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Au(s.layout)),s.paint)){this._transitionablePaint=new Sl(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(xy,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(g)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(_y,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(g))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[n],y=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),w=f.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(n,w,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,f,y={}){return(!y||y.validate!==!1)&&fd(this,n.call(Es,{key:s,layerType:this.type,objectKey:h,value:f,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof ns&&Yo(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const T={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class A{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class z{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function U(o,n=1){let s=0,h=0;return{members:o.map(f=>{const y=T[f.type].BYTES_PER_ELEMENT,x=s=te(s,Math.max(n,y)),w=f.components||1;return h=Math.max(h,y),s+=y*w,{name:f.name,type:f.type,components:w,offset:x}}),size:te(s,Math.max(h,n)),alignment:n}}function te(o,n){return Math.ceil(o/n)*n}class Q extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.int16[f+0]=s,this.int16[f+1]=h,n}}Q.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",Q);class fe extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const y=3*n;return this.int16[y+0]=s,this.int16[y+1]=h,this.int16[y+2]=f,n}}fe.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",fe);class we extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,s,h,f)}emplace(n,s,h,f,y){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=f,this.int16[x+3]=y,n}}we.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",we);class Pe extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,f,y,x)}emplace(n,s,h,f,y,x,w){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=y,this.int16[I+4]=x,this.int16[I+5]=w,n}}Pe.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",Pe);class Oe extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,f,y,x)}emplace(n,s,h,f,y,x,w){const I=4*n,F=8*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.uint8[F+4]=f,this.uint8[F+5]=y,this.uint8[F+6]=x,this.uint8[F+7]=w,n}}Oe.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",Oe);class Me extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.float32[f+0]=s,this.float32[f+1]=h,n}}Me.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",Me);class Be extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x,w,I,F,V){const J=this.length;return this.resize(J+1),this.emplace(J,n,s,h,f,y,x,w,I,F,V)}emplace(n,s,h,f,y,x,w,I,F,V,J){const re=10*n;return this.uint16[re+0]=s,this.uint16[re+1]=h,this.uint16[re+2]=f,this.uint16[re+3]=y,this.uint16[re+4]=x,this.uint16[re+5]=w,this.uint16[re+6]=I,this.uint16[re+7]=F,this.uint16[re+8]=V,this.uint16[re+9]=J,n}}Be.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",Be);class Ke extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x,w,I,F,V,J,re){const ue=this.length;return this.resize(ue+1),this.emplace(ue,n,s,h,f,y,x,w,I,F,V,J,re)}emplace(n,s,h,f,y,x,w,I,F,V,J,re,ue){const me=12*n;return this.int16[me+0]=s,this.int16[me+1]=h,this.int16[me+2]=f,this.int16[me+3]=y,this.uint16[me+4]=x,this.uint16[me+5]=w,this.uint16[me+6]=I,this.uint16[me+7]=F,this.int16[me+8]=V,this.int16[me+9]=J,this.int16[me+10]=re,this.int16[me+11]=ue,n}}Ke.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",Ke);class je extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const y=3*n;return this.float32[y+0]=s,this.float32[y+1]=h,this.float32[y+2]=f,n}}je.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",je);class Je extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Je.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",Je);class nt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x,w,I,F){const V=this.length;return this.resize(V+1),this.emplace(V,n,s,h,f,y,x,w,I,F)}emplace(n,s,h,f,y,x,w,I,F,V){const J=10*n,re=5*n;return this.int16[J+0]=s,this.int16[J+1]=h,this.int16[J+2]=f,this.int16[J+3]=y,this.int16[J+4]=x,this.int16[J+5]=w,this.uint32[re+3]=I,this.uint16[J+8]=F,this.uint16[J+9]=V,n}}nt.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",nt);class at extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,f,y,x)}emplace(n,s,h,f,y,x,w){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=y,this.int16[I+4]=x,this.int16[I+5]=w,n}}at.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",at);class mt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,f,y)}emplace(n,s,h,f,y,x){const w=4*n,I=8*n;return this.float32[w+0]=s,this.float32[w+1]=h,this.float32[w+2]=f,this.int16[I+6]=y,this.int16[I+7]=x,n}}mt.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",mt);class wt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,f,y,x)}emplace(n,s,h,f,y,x,w){const I=16*n,F=4*n,V=8*n;return this.uint8[I+0]=s,this.uint8[I+1]=h,this.float32[F+1]=f,this.float32[F+2]=y,this.int16[V+6]=x,this.int16[V+7]=w,n}}wt.prototype.bytesPerElement=16,Ut("StructArrayLayout2ub2f2i16",wt);class Dt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const y=3*n;return this.uint16[y+0]=s,this.uint16[y+1]=h,this.uint16[y+2]=f,n}}Dt.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",Dt);class Bt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x,w,I,F,V,J,re,ue,me,Te,Re,Ne){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,n,s,h,f,y,x,w,I,F,V,J,re,ue,me,Te,Re,Ne)}emplace(n,s,h,f,y,x,w,I,F,V,J,re,ue,me,Te,Re,Ne,Qe){const He=24*n,Ye=12*n,lt=48*n;return this.int16[He+0]=s,this.int16[He+1]=h,this.uint16[He+2]=f,this.uint16[He+3]=y,this.uint32[Ye+2]=x,this.uint32[Ye+3]=w,this.uint32[Ye+4]=I,this.uint16[He+10]=F,this.uint16[He+11]=V,this.uint16[He+12]=J,this.float32[Ye+7]=re,this.float32[Ye+8]=ue,this.uint8[lt+36]=me,this.uint8[lt+37]=Te,this.uint8[lt+38]=Re,this.uint32[Ye+10]=Ne,this.int16[He+22]=Qe,n}}Bt.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bt);class bt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f,y,x,w,I,F,V,J,re,ue,me,Te,Re,Ne,Qe,He,Ye,lt,_t,Ft,rn,Ot,zt,qt,$t){const Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,n,s,h,f,y,x,w,I,F,V,J,re,ue,me,Te,Re,Ne,Qe,He,Ye,lt,_t,Ft,rn,Ot,zt,qt,$t)}emplace(n,s,h,f,y,x,w,I,F,V,J,re,ue,me,Te,Re,Ne,Qe,He,Ye,lt,_t,Ft,rn,Ot,zt,qt,$t,Nt){const ft=32*n,Qt=16*n;return this.int16[ft+0]=s,this.int16[ft+1]=h,this.int16[ft+2]=f,this.int16[ft+3]=y,this.int16[ft+4]=x,this.int16[ft+5]=w,this.int16[ft+6]=I,this.int16[ft+7]=F,this.uint16[ft+8]=V,this.uint16[ft+9]=J,this.uint16[ft+10]=re,this.uint16[ft+11]=ue,this.uint16[ft+12]=me,this.uint16[ft+13]=Te,this.uint16[ft+14]=Re,this.uint16[ft+15]=Ne,this.uint16[ft+16]=Qe,this.uint16[ft+17]=He,this.uint16[ft+18]=Ye,this.uint16[ft+19]=lt,this.uint16[ft+20]=_t,this.uint16[ft+21]=Ft,this.uint16[ft+22]=rn,this.uint32[Qt+12]=Ot,this.float32[Qt+13]=zt,this.float32[Qt+14]=qt,this.uint16[ft+30]=$t,this.uint16[ft+31]=Nt,n}}bt.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",bt);class Tt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}Tt.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",Tt);class Gt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const y=3*n;return this.uint16[6*n+0]=s,this.float32[y+1]=h,this.float32[y+2]=f,n}}Gt.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",Gt);class mn extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const y=4*n;return this.uint32[2*n+0]=s,this.uint16[y+2]=h,this.uint16[y+3]=f,n}}mn.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",mn);class At extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.uint16[f+0]=s,this.uint16[f+1]=h,n}}At.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",At);class jt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}jt.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",jt);class cn extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,s,h,f)}emplace(n,s,h,f,y){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=f,this.float32[x+3]=y,n}}cn.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",cn);class or extends A{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}or.prototype.size=20;class xn extends nt{get(n){return new or(this,n)}}Ut("CollisionBoxArray",xn);class Cn extends A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Cn.prototype.size=48;class sr extends Bt{get(n){return new Cn(this,n)}}Ut("PlacedSymbolArray",sr);class ti extends A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ti.prototype.size=64;class Co extends bt{get(n){return new ti(this,n)}}Ut("SymbolInstanceArray",Co);class ar extends Tt{getoffsetX(n){return this.float32[1*n+0]}}Ut("GlyphOffsetArray",ar);class zi extends fe{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Ut("SymbolLineVertexArray",zi);class wi extends A{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}wi.prototype.size=12;class ni extends Gt{get(n){return new wi(this,n)}}Ut("TextAnchorOffsetArray",ni);class ri extends A{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ri.prototype.size=8;class Po extends mn{get(n){return new ri(this,n)}}Ut("FeatureIndexArray",Po);class Fa extends Q{}class Pc extends Q{}class El extends Q{}class Ra extends Pe{}class Ic extends Oe{}class _d extends Me{}class qr extends Be{}class Io extends Ke{}class Ys extends je{}class Tl extends Je{}class ii extends at{}class oi extends wt{}class Zr extends Dt{}class cr extends At{}const Cl=U([{name:"a_pos",components:2,type:"Int16"}],4),{members:xd}=Cl;class Dr{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,f){let y=this.segments[this.segments.length-1];return n>Dr.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${Dr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!y||y.vertexLength+n>Dr.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==f)&&(y={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},f!==void 0&&(y.sortKey=f),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,f){return new Dr([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:f,vaos:{},sortKey:0}])}}function bp(o,n){return 256*(o=K(Math.floor(o),0,255))+K(Math.floor(n),0,255)}Dr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",Dr);const Ac=U([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Mc={exports:{}},Qs={exports:{}};Qs.exports=function(o,n){var s,h,f,y,x,w,I,F;for(h=o.length-(s=3&o.length),f=n,x=3432918353,w=461845907,F=0;F<h;)I=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,f=27492+(65535&(y=5*(65535&(f=(f^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(I=0,s){case 3:I^=(255&o.charCodeAt(F+2))<<16;case 2:I^=(255&o.charCodeAt(F+1))<<8;case 1:f^=I=(65535&(I=(I=(65535&(I^=255&o.charCodeAt(F)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*w+(((I>>>16)*w&65535)<<16)&4294967295}return f^=o.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Sp=Qs.exports,wd={exports:{}};wd.exports=function(o,n){for(var s,h=o.length,f=n^h,y=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(y)|(255&o.charCodeAt(++y))<<8|(255&o.charCodeAt(++y))<<16|(255&o.charCodeAt(++y))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:f^=(255&o.charCodeAt(y+2))<<16;case 2:f^=(255&o.charCodeAt(y+1))<<8;case 1:f=1540483477*(65535&(f^=255&o.charCodeAt(y)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var bd=Sp,Sd=wd.exports;Mc.exports=bd,Mc.exports.murmur3=bd,Mc.exports.murmur2=Sd;var kc=S(Mc.exports);class Pl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,f){this.ids.push($x(n)),this.positions.push(s,h,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=$x(n);let h=0,f=this.ids.length-1;for(;h<f;){const x=h+f>>1;this.ids[x]>=s?f=x:h=x+1}const y=[];for(;this.ids[h]===s;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(n,s){const h=new Float64Array(n.ids),f=new Uint32Array(n.positions);return by(h,f,0,h.length-1),s&&s.push(h.buffer,f.buffer),{ids:h,positions:f}}static deserialize(n){const s=new Pl;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function $x(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:kc(String(o))}function by(o,n,s,h){for(;s<h;){const f=o[s+h>>1];let y=s-1,x=h+1;for(;;){do y++;while(o[y]<f);do x--;while(o[x]>f);if(y>=x)break;Ep(o,y,x),Ep(n,3*y,3*x),Ep(n,3*y+1,3*x+1),Ep(n,3*y+2,3*x+2)}x-s<h-x?(by(o,n,s,x),s=x+1):(by(o,n,x+1,h),h=x)}}function Ep(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Ut("FeaturePositionMap",Pl);class Mu{constructor(n,s){this.gl=n.gl,this.location=s}}class Tp extends Mu{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Vx extends Mu{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Gx extends Mu{constructor(n,s){super(n,s),this.current=kn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const ZI=new Float32Array(16);function Sy(o){return[bp(255*o.r,255*o.g),bp(255*o.b,255*o.a)]}class Ed{constructor(n,s,h){this.value=n,this.uniformNames=s.map(f=>`u_${f}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Gx(n,s):new Tp(n,s)}}class zc{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,f){const y=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&n.set(y)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Vx(n,s):new Tp(n,s)}}class ja{constructor(n,s,h,f){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,s,h,f,y){const x=this.paintVertexArray.length,w=this.expression.evaluate(new Qn(0),s,{},f,[],y);this.paintVertexArray.resize(n),this._setPaintValue(x,n,w)}updatePaintArray(n,s,h,f){const y=this.expression.evaluate({zoom:0},h,f);this._setPaintValue(n,s,y)}_setPaintValue(n,s,h){if(this.type==="color"){const f=Sy(h);for(let y=n;y<s;y++)this.paintVertexArray.emplace(y,f[0],f[1])}else{for(let f=n;f<s;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ts{constructor(n,s,h,f,y,x){this.expression=n,this.uniformNames=s.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=f,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=s.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,f,y){const x=this.expression.evaluate(new Qn(this.zoom),s,{},f,[],y),w=this.expression.evaluate(new Qn(this.zoom+1),s,{},f,[],y),I=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(I,n,x,w)}updatePaintArray(n,s,h,f){const y=this.expression.evaluate({zoom:this.zoom},h,f),x=this.expression.evaluate({zoom:this.zoom+1},h,f);this._setPaintValue(n,s,y,x)}_setPaintValue(n,s,h,f){if(this.type==="color"){const y=Sy(h),x=Sy(f);for(let w=n;w<s;w++)this.paintVertexArray.emplace(w,y[0],y[1],x[0],x[1])}else{for(let y=n;y<s;y++)this.paintVertexArray.emplace(y,h,f);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,f=K(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,s,h){return new Tp(n,s)}}class Il{constructor(n,s,h,f,y,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(n,s,h){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,f,y){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(n,s,h,f){if(!f||!h)return;const{min:y,mid:x,max:w}=h,I=f[y],F=f[x],V=f[w];if(I&&F&&V)for(let J=n;J<s;J++)this.zoomInPaintVertexArray.emplace(J,F.tl[0],F.tl[1],F.br[0],F.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],F.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,F.tl[0],F.tl[1],F.br[0],F.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],F.pixelRatio,V.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Ac.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Ac.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zx{constructor(n,s,h){this.binders={},this._buffers=[];const f=[];for(const y in n.paint._values){if(!h(y))continue;const x=n.paint.get(y);if(!(x instanceof ns&&Yo(x.property.specification)))continue;const w=WI(y,n.type),I=x.value,F=x.property.specification.type,V=x.property.useIntegerZoom,J=x.property.specification["property-type"],re=J==="cross-faded"||J==="cross-faded-data-driven";if(I.kind==="constant")this.binders[y]=re?new zc(I.value,w):new Ed(I.value,w,F),f.push(`/u_${y}`);else if(I.kind==="source"||re){const ue=Wx(y,F,"source");this.binders[y]=re?new Il(I,F,V,s,ue,n.id):new ja(I,w,F,ue),f.push(`/a_${y}`)}else{const ue=Wx(y,F,"composite");this.binders[y]=new Ts(I,w,F,V,s,ue),f.push(`/z_${y}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof ja||s instanceof Ts?s.maxValue:0}populatePaintArrays(n,s,h,f,y){for(const x in this.binders){const w=this.binders[x];(w instanceof ja||w instanceof Ts||w instanceof Il)&&w.populatePaintArray(n,s,h,f,y)}}setConstantPatternPositions(n,s){for(const h in this.binders){const f=this.binders[h];f instanceof zc&&f.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,f,y){let x=!1;for(const w in n){const I=s.getPositions(w);for(const F of I){const V=h.feature(F.index);for(const J in this.binders){const re=this.binders[J];if((re instanceof ja||re instanceof Ts||re instanceof Il)&&re.expression.isStateDependent===!0){const ue=f.paint.get(J);re.expression=ue.value,re.updatePaintArray(F.start,F.end,V,n[w],y),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Ed||h instanceof zc)&&n.push(...h.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof ja||h instanceof Ts)for(let f=0;f<h.paintVertexAttributes.length;f++)n.push(h.paintVertexAttributes[f].name);else if(h instanceof Il)for(let f=0;f<Ac.members.length;f++)n.push(Ac.members[f].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ed||h instanceof zc||h instanceof Ts)for(const f of h.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const f in this.binders){const y=this.binders[f];if(y instanceof Ed||y instanceof zc||y instanceof Ts){for(const x of y.uniformNames)if(s[x]){const w=y.getBinding(n,s[x],x);h.push({name:x,property:f,binding:w})}}}return h}setUniforms(n,s,h,f){for(const{name:y,property:x,binding:w}of s)this.binders[x].setUniform(w,f,h.get(x),y)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Il){const f=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(h instanceof ja||h instanceof Ts)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof ja||h instanceof Ts||h instanceof Il)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof ja||s instanceof Ts||s instanceof Il)&&s.destroy()}}}class ku{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new Zx(f,s,h);this.needsUpload=!1,this._featureMap=new Pl,this._bufferOffset=0}populatePaintArrays(n,s,h,f,y,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,s,f,y,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,f){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(n,this._featureMap,s,y,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function WI(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Wx(o,n,s){const h={color:{source:Me,composite:cn},number:{source:Tt,composite:Me}},f=function(y){return{"line-pattern":{source:qr,composite:qr},"fill-pattern":{source:qr,composite:qr},"fill-extrusion-pattern":{source:qr,composite:qr}}[y]}(o);return f&&f[s]||h[n][s]}Ut("ConstantBinder",Ed),Ut("CrossFadedConstantBinder",zc),Ut("SourceExpressionBinder",ja),Ut("CrossFadedCompositeBinder",Il),Ut("CompositeExpressionBinder",Ts),Ut("ProgramConfiguration",Zx,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",ku);const Rr=8192,Ey=Math.pow(2,14)-1,Hx=-Ey-1;function zu(o){const n=Rr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const f=s[h];for(let y=0;y<f.length;y++){const x=f[y],w=Math.round(x.x*n),I=Math.round(x.y*n);x.x=K(w,Hx,Ey),x.y=K(I,Hx,Ey),(w<x.x||w>x.x+1||I<x.y||I>x.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Fu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?zu(o):[]}}function Cp(o,n,s,h,f){o.emplaceBack(2*n+(h+1)/2,2*s+(f+1)/2)}class Ty{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Pc,this.indexArray=new Zr,this.segments=new Dr,this.programConfigurations=new ku(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const f=this.layers[0],y=[];let x=null,w=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:I,id:F,index:V,sourceLayerIndex:J}of n){const re=this.layers[0]._featureFilter.needGeometry,ue=Fu(I,re);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),ue,h))continue;const me=w?x.evaluate(ue,{},h):void 0,Te={id:F,properties:I.properties,type:I.type,sourceLayerIndex:J,index:V,geometry:re?ue.geometry:zu(I),patterns:{},sortKey:me};y.push(Te)}w&&y.sort((I,F)=>I.sortKey-F.sortKey);for(const I of y){const{geometry:F,index:V,sourceLayerIndex:J}=I,re=n[V].feature;this.addFeature(I,F,V,h),s.featureIndex.insert(re,F,V,J,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xd),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,f){for(const y of s)for(const x of y){const w=x.x,I=x.y;if(w<0||w>=Rr||I<0||I>=Rr)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),V=F.vertexLength;Cp(this.layoutVertexArray,w,I,-1,-1),Cp(this.layoutVertexArray,w,I,1,-1),Cp(this.layoutVertexArray,w,I,1,1),Cp(this.layoutVertexArray,w,I,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},f)}}function Xx(o,n){for(let s=0;s<o.length;s++)if(Fc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Fc(o,n[s]))return!0;return!!Cy(o,n)}function HI(o,n,s){return!!Fc(o,n)||!!Py(n,o,s)}function Kx(o,n){if(o.length===1)return Jx(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let f=0;f<h.length;f++)if(Fc(o,h[f]))return!0}for(let s=0;s<o.length;s++)if(Jx(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Cy(o,n[s]))return!0;return!1}function XI(o,n,s){if(o.length>1){if(Cy(o,n))return!0;for(let h=0;h<n.length;h++)if(Py(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Py(o[h],n,s))return!0;return!1}function Cy(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],f=o[s+1];for(let y=0;y<n.length-1;y++)if(KI(h,f,n[y],n[y+1]))return!0}return!1}function KI(o,n,s,h){return pe(o,s,h)!==pe(n,s,h)&&pe(o,n,s)!==pe(o,n,h)}function Py(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let f=1;f<n.length;f++)if(qx(o,n[f-1],n[f])<h)return!0;return!1}function qx(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const f=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(f<0?n:f>1?s:s.sub(n)._mult(f)._add(n))}function Jx(o,n){let s,h,f,y=!1;for(let x=0;x<o.length;x++){s=o[x];for(let w=0,I=s.length-1;w<s.length;I=w++)h=s[w],f=s[I],h.y>n.y!=f.y>n.y&&n.x<(f.x-h.x)*(n.y-h.y)/(f.y-h.y)+h.x&&(y=!y)}return y}function Fc(o,n){let s=!1;for(let h=0,f=o.length-1;h<o.length;f=h++){const y=o[h],x=o[f];y.y>n.y!=x.y>n.y&&n.x<(x.x-y.x)*(n.y-y.y)/(x.y-y.y)+y.x&&(s=!s)}return s}function qI(o,n,s){const h=s[0],f=s[2];if(o.x<h.x&&n.x<h.x||o.x>f.x&&n.x>f.x||o.y<h.y&&n.y<h.y||o.y>f.y&&n.y>f.y)return!1;const y=pe(o,n,s[0]);return y!==pe(o,n,s[1])||y!==pe(o,n,s[2])||y!==pe(o,n,s[3])}function Td(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Pp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ip(o,n,s,h,f){if(!n[0]&&!n[1])return o;const y=b.convert(n)._mult(f);s==="viewport"&&y._rotate(-h);const x=[];for(let w=0;w<o.length;w++)x.push(o[w].sub(y));return x}let Yx,Qx;Ut("CircleBucket",Ty,{omit:["layers"]});var JI={get paint(){return Qx=Qx||new d({"circle-radius":new an(et.paint_circle["circle-radius"]),"circle-color":new an(et.paint_circle["circle-color"]),"circle-blur":new an(et.paint_circle["circle-blur"]),"circle-opacity":new an(et.paint_circle["circle-opacity"]),"circle-translate":new Yt(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Yt(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yt(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yt(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new an(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new an(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new an(et.paint_circle["circle-stroke-opacity"])})},get layout(){return Yx=Yx||new d({"circle-sort-key":new an(et.layout_circle["circle-sort-key"])})}},Fi=1e-6,Rc=typeof Float32Array<"u"?Float32Array:Array;function Iy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function ew(o,n,s){var h=n[0],f=n[1],y=n[2],x=n[3],w=n[4],I=n[5],F=n[6],V=n[7],J=n[8],re=n[9],ue=n[10],me=n[11],Te=n[12],Re=n[13],Ne=n[14],Qe=n[15],He=s[0],Ye=s[1],lt=s[2],_t=s[3];return o[0]=He*h+Ye*w+lt*J+_t*Te,o[1]=He*f+Ye*I+lt*re+_t*Re,o[2]=He*y+Ye*F+lt*ue+_t*Ne,o[3]=He*x+Ye*V+lt*me+_t*Qe,o[4]=(He=s[4])*h+(Ye=s[5])*w+(lt=s[6])*J+(_t=s[7])*Te,o[5]=He*f+Ye*I+lt*re+_t*Re,o[6]=He*y+Ye*F+lt*ue+_t*Ne,o[7]=He*x+Ye*V+lt*me+_t*Qe,o[8]=(He=s[8])*h+(Ye=s[9])*w+(lt=s[10])*J+(_t=s[11])*Te,o[9]=He*f+Ye*I+lt*re+_t*Re,o[10]=He*y+Ye*F+lt*ue+_t*Ne,o[11]=He*x+Ye*V+lt*me+_t*Qe,o[12]=(He=s[12])*h+(Ye=s[13])*w+(lt=s[14])*J+(_t=s[15])*Te,o[13]=He*f+Ye*I+lt*re+_t*Re,o[14]=He*y+Ye*F+lt*ue+_t*Ne,o[15]=He*x+Ye*V+lt*me+_t*Qe,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var Cd,YI=ew;function Ap(o,n,s){var h=n[0],f=n[1],y=n[2],x=n[3];return o[0]=s[0]*h+s[4]*f+s[8]*y+s[12]*x,o[1]=s[1]*h+s[5]*f+s[9]*y+s[13]*x,o[2]=s[2]*h+s[6]*f+s[10]*y+s[14]*x,o[3]=s[3]*h+s[7]*f+s[11]*y+s[15]*x,o}Cd=new Rc(4),Rc!=Float32Array&&(Cd[0]=0,Cd[1]=0,Cd[2]=0,Cd[3]=0);class QI extends _{constructor(n){super(n,JI)}createBucket(n){return new Ty(n)}queryRadius(n){const s=n;return Td("circle-radius",this,s)+Td("circle-stroke-width",this,s)+Pp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,f,y,x,w,I){const F=Ip(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),V=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),J=this.paint.get("circle-pitch-alignment")==="map",re=J?F:function(me,Te){return me.map(Re=>tw(Re,Te))}(F,I),ue=J?V*w:V;for(const me of f)for(const Te of me){const Re=J?Te:tw(Te,I);let Ne=ue;const Qe=Ap([],[Te.x,Te.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=Qe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=x.cameraToCenterDistance/Qe[3]),HI(re,Re,Ne))return!0}return!1}}function tw(o,n){const s=Ap([],[o.x,o.y,0,1],n);return new b(s[0]/s[3],s[1]/s[3])}class nw extends Ty{}let rw;Ut("HeatmapBucket",nw,{omit:["layers"]});var eA={get paint(){return rw=rw||new d({"heatmap-radius":new an(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new an(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yt(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new l(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yt(et.paint_heatmap["heatmap-opacity"])})}};function Ay(o,{width:n,height:s},h,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*s*h}`)}else f=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=f,o}function iw(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const f=Ay({},{width:n,height:s},h);My(o,f,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=f.data}function My(o,n,s,h,f,y){if(f.width===0||f.height===0)return n;if(f.width>o.width||f.height>o.height||s.x>o.width-f.width||s.y>o.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||h.x>n.width-f.width||h.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,w=n.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<f.height;I++){const F=((s.y+I)*o.width+s.x)*y,V=((h.y+I)*n.width+h.x)*y;for(let J=0;J<f.width*y;J++)w[V+J]=x[F+J]}return n}class Pd{constructor(n,s){Ay(this,n,1,s)}resize(n){iw(this,n,1)}clone(){return new Pd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,f,y){My(n,s,h,f,y,1)}}class Ao{constructor(n,s){Ay(this,n,4,s)}resize(n){iw(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ao({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,f,y){My(n,s,h,f,y,4)}}function ow(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,f=o.image||new Ao({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const y=(x,w,I)=>{n[o.evaluationKey]=I;const F=o.expression.evaluate(n);f.data[x+w+0]=Math.floor(255*F.r/F.a),f.data[x+w+1]=Math.floor(255*F.g/F.a),f.data[x+w+2]=Math.floor(255*F.b/F.a),f.data[x+w+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,w=0;x<h;++x,w+=4*s)for(let I=0,F=0;I<s;I++,F+=4){const V=I/(s-1),{start:J,end:re}=o.clips[x];y(w,F,J*(1-V)+re*V)}else for(let x=0,w=0;x<s;x++,w+=4)y(0,w,x/(s-1));return f}Ut("AlphaImage",Pd),Ut("RGBAImage",Ao);class tA extends _{createBucket(n){return new nw(n)}constructor(n){super(n,eA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ow({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let sw;var nA={get paint(){return sw=sw||new d({"hillshade-illumination-direction":new Yt(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yt(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yt(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yt(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yt(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yt(et.paint_hillshade["hillshade-accent-color"])})}};class rA extends _{constructor(n){super(n,nA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const iA=U([{name:"a_pos",components:2,type:"Int16"}],4),{members:oA}=iA;var ky={exports:{}};function Mp(o,n,s){s=s||2;var h,f,y,x,w,I,F,V=n&&n.length,J=V?n[0]*s:o.length,re=aw(o,0,J,s,!0),ue=[];if(!re||re.next===re.prev)return ue;if(V&&(re=function(Te,Re,Ne,Qe){var He,Ye,lt,_t=[];for(He=0,Ye=Re.length;He<Ye;He++)(lt=aw(Te,Re[He]*Qe,He<Ye-1?Re[He+1]*Qe:Te.length,Qe,!1))===lt.next&&(lt.steiner=!0),_t.push(fA(lt));for(_t.sort(cA),He=0;He<_t.length;He++)Ne=hA(_t[He],Ne);return Ne}(o,n,re,s)),o.length>80*s){h=y=o[0],f=x=o[1];for(var me=s;me<J;me+=s)(w=o[me])<h&&(h=w),(I=o[me+1])<f&&(f=I),w>y&&(y=w),I>x&&(x=I);F=(F=Math.max(y-h,x-f))!==0?32767/F:0}return Id(re,ue,s,h,f,F,0),ue}function aw(o,n,s,h,f){var y,x;if(f===Ry(o,n,s,h)>0)for(y=n;y<s;y+=h)x=cw(y,o[y],o[y+1],x);else for(y=s-h;y>=n;y-=h)x=cw(y,o[y],o[y+1],x);return x&&kp(x,x.next)&&(Md(x),x=x.next),x}function Ru(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!kp(h,h.next)&&Cr(h.prev,h,h.next)!==0)h=h.next;else{if(Md(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function Id(o,n,s,h,f,y,x){if(o){!x&&y&&function(V,J,re,ue){var me=V;do me.z===0&&(me.z=zy(me.x,me.y,J,re,ue)),me.prevZ=me.prev,me.nextZ=me.next,me=me.next;while(me!==V);me.prevZ.nextZ=null,me.prevZ=null,function(Te){var Re,Ne,Qe,He,Ye,lt,_t,Ft,rn=1;do{for(Ne=Te,Te=null,Ye=null,lt=0;Ne;){for(lt++,Qe=Ne,_t=0,Re=0;Re<rn&&(_t++,Qe=Qe.nextZ);Re++);for(Ft=rn;_t>0||Ft>0&&Qe;)_t!==0&&(Ft===0||!Qe||Ne.z<=Qe.z)?(He=Ne,Ne=Ne.nextZ,_t--):(He=Qe,Qe=Qe.nextZ,Ft--),Ye?Ye.nextZ=He:Te=He,He.prevZ=Ye,Ye=He;Ne=Qe}Ye.nextZ=null,rn*=2}while(lt>1)}(me)}(o,h,f,y);for(var w,I,F=o;o.prev!==o.next;)if(w=o.prev,I=o.next,y?aA(o,h,f,y):sA(o))n.push(w.i/s|0),n.push(o.i/s|0),n.push(I.i/s|0),Md(o),o=I.next,F=I.next;else if((o=I)===F){x?x===1?Id(o=lA(Ru(o),n,s),n,s,h,f,y,2):x===2&&uA(o,n,s,h,f,y):Id(Ru(o),n,s,h,f,y,1);break}}}function sA(o){var n=o.prev,s=o,h=o.next;if(Cr(n,s,h)>=0)return!1;for(var f=n.x,y=s.x,x=h.x,w=n.y,I=s.y,F=h.y,V=f<y?f<x?f:x:y<x?y:x,J=w<I?w<F?w:F:I<F?I:F,re=f>y?f>x?f:x:y>x?y:x,ue=w>I?w>F?w:F:I>F?I:F,me=h.next;me!==n;){if(me.x>=V&&me.x<=re&&me.y>=J&&me.y<=ue&&jc(f,w,y,I,x,F,me.x,me.y)&&Cr(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function aA(o,n,s,h){var f=o.prev,y=o,x=o.next;if(Cr(f,y,x)>=0)return!1;for(var w=f.x,I=y.x,F=x.x,V=f.y,J=y.y,re=x.y,ue=w<I?w<F?w:F:I<F?I:F,me=V<J?V<re?V:re:J<re?J:re,Te=w>I?w>F?w:F:I>F?I:F,Re=V>J?V>re?V:re:J>re?J:re,Ne=zy(ue,me,n,s,h),Qe=zy(Te,Re,n,s,h),He=o.prevZ,Ye=o.nextZ;He&&He.z>=Ne&&Ye&&Ye.z<=Qe;){if(He.x>=ue&&He.x<=Te&&He.y>=me&&He.y<=Re&&He!==f&&He!==x&&jc(w,V,I,J,F,re,He.x,He.y)&&Cr(He.prev,He,He.next)>=0||(He=He.prevZ,Ye.x>=ue&&Ye.x<=Te&&Ye.y>=me&&Ye.y<=Re&&Ye!==f&&Ye!==x&&jc(w,V,I,J,F,re,Ye.x,Ye.y)&&Cr(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;He&&He.z>=Ne;){if(He.x>=ue&&He.x<=Te&&He.y>=me&&He.y<=Re&&He!==f&&He!==x&&jc(w,V,I,J,F,re,He.x,He.y)&&Cr(He.prev,He,He.next)>=0)return!1;He=He.prevZ}for(;Ye&&Ye.z<=Qe;){if(Ye.x>=ue&&Ye.x<=Te&&Ye.y>=me&&Ye.y<=Re&&Ye!==f&&Ye!==x&&jc(w,V,I,J,F,re,Ye.x,Ye.y)&&Cr(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function lA(o,n,s){var h=o;do{var f=h.prev,y=h.next.next;!kp(f,y)&&lw(f,h,h.next,y)&&Ad(f,y)&&Ad(y,f)&&(n.push(f.i/s|0),n.push(h.i/s|0),n.push(y.i/s|0),Md(h),Md(h.next),h=o=y),h=h.next}while(h!==o);return Ru(h)}function uA(o,n,s,h,f,y){var x=o;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&pA(x,w)){var I=uw(x,w);return x=Ru(x,x.next),I=Ru(I,I.next),Id(x,n,s,h,f,y,0),void Id(I,n,s,h,f,y,0)}w=w.next}x=x.next}while(x!==o)}function cA(o,n){return o.x-n.x}function hA(o,n){var s=function(f,y){var x,w=y,I=f.x,F=f.y,V=-1/0;do{if(F<=w.y&&F>=w.next.y&&w.next.y!==w.y){var J=w.x+(F-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(J<=I&&J>V&&(V=J,x=w.x<w.next.x?w:w.next,J===I))return x}w=w.next}while(w!==y);if(!x)return null;var re,ue=x,me=x.x,Te=x.y,Re=1/0;w=x;do I>=w.x&&w.x>=me&&I!==w.x&&jc(F<Te?I:V,F,me,Te,F<Te?V:I,F,w.x,w.y)&&(re=Math.abs(F-w.y)/(I-w.x),Ad(w,f)&&(re<Re||re===Re&&(w.x>x.x||w.x===x.x&&dA(x,w)))&&(x=w,Re=re)),w=w.next;while(w!==ue);return x}(o,n);if(!s)return n;var h=uw(s,o);return Ru(h,h.next),Ru(s,s.next)}function dA(o,n){return Cr(o.prev,o,n.prev)<0&&Cr(n.next,o,o.next)<0}function zy(o,n,s,h,f){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*f|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function fA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function jc(o,n,s,h,f,y,x,w){return(f-x)*(n-w)>=(o-x)*(y-w)&&(o-x)*(h-w)>=(s-x)*(n-w)&&(s-x)*(y-w)>=(f-x)*(h-w)}function pA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==h.i&&f.next.i!==h.i&&lw(f,f.next,s,h))return!0;f=f.next}while(f!==s);return!1}(o,n)&&(Ad(o,n)&&Ad(n,o)&&function(s,h){var f=s,y=!1,x=(s.x+h.x)/2,w=(s.y+h.y)/2;do f.y>w!=f.next.y>w&&f.next.y!==f.y&&x<(f.next.x-f.x)*(w-f.y)/(f.next.y-f.y)+f.x&&(y=!y),f=f.next;while(f!==s);return y}(o,n)&&(Cr(o.prev,o,n.prev)||Cr(o,n.prev,n))||kp(o,n)&&Cr(o.prev,o,o.next)>0&&Cr(n.prev,n,n.next)>0)}function Cr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function kp(o,n){return o.x===n.x&&o.y===n.y}function lw(o,n,s,h){var f=Fp(Cr(o,n,s)),y=Fp(Cr(o,n,h)),x=Fp(Cr(s,h,o)),w=Fp(Cr(s,h,n));return f!==y&&x!==w||!(f!==0||!zp(o,s,n))||!(y!==0||!zp(o,h,n))||!(x!==0||!zp(s,o,h))||!(w!==0||!zp(s,n,h))}function zp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Fp(o){return o>0?1:o<0?-1:0}function Ad(o,n){return Cr(o.prev,o,o.next)<0?Cr(o,n,o.next)>=0&&Cr(o,o.prev,n)>=0:Cr(o,n,o.prev)<0||Cr(o,o.next,n)<0}function uw(o,n){var s=new Fy(o.i,o.x,o.y),h=new Fy(n.i,n.x,n.y),f=o.next,y=n.prev;return o.next=n,n.prev=o,s.next=f,f.prev=s,h.next=s,s.prev=h,y.next=h,h.prev=y,h}function cw(o,n,s,h){var f=new Fy(o,n,s);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function Md(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Fy(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ry(o,n,s,h){for(var f=0,y=n,x=s-h;y<s;y+=h)f+=(o[x]-o[y])*(o[y+1]+o[x+1]),x=y;return f}ky.exports=Mp,ky.exports.default=Mp,Mp.deviation=function(o,n,s,h){var f=n&&n.length,y=Math.abs(Ry(o,0,f?n[0]*s:o.length,s));if(f)for(var x=0,w=n.length;x<w;x++)y-=Math.abs(Ry(o,n[x]*s,x<w-1?n[x+1]*s:o.length,s));var I=0;for(x=0;x<h.length;x+=3){var F=h[x]*s,V=h[x+1]*s,J=h[x+2]*s;I+=Math.abs((o[F]-o[J])*(o[V+1]-o[F+1])-(o[F]-o[V])*(o[J+1]-o[F+1]))}return y===0&&I===0?0:Math.abs((I-y)/y)},Mp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,f=0;f<o.length;f++){for(var y=0;y<o[f].length;y++)for(var x=0;x<n;x++)s.vertices.push(o[f][y][x]);f>0&&s.holes.push(h+=o[f-1].length)}return s};var hw=S(ky.exports);function jy(o,n,s){const h=s.patternDependencies;let f=!1;for(const y of n){const x=y.paint.get(`${o}-pattern`);x.isConstant()||(f=!0);const w=x.constantOr(null);w&&(f=!0,h[w.to]=!0,h[w.from]=!0)}return f}function Oy(o,n,s,h,f){const y=f.patternDependencies;for(const x of n){const w=x.paint.get(`${o}-pattern`).value;if(w.kind!=="constant"){let I=w.evaluate({zoom:h-1},s,{},f.availableImages),F=w.evaluate({zoom:h},s,{},f.availableImages),V=w.evaluate({zoom:h+1},s,{},f.availableImages);I=I&&I.name?I.name:I,F=F&&F.name?F.name:F,V=V&&V.name?V.name:V,y[I]=!0,y[F]=!0,y[V]=!0,s.patterns[x.id]={min:I,mid:F,max:V}}}return s}class Ly{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new El,this.indexArray=new Zr,this.indexArray2=new cr,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Dr,this.segments2=new Dr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=jy("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),y=!f.isConstant(),x=[];for(const{feature:w,id:I,index:F,sourceLayerIndex:V}of n){const J=this.layers[0]._featureFilter.needGeometry,re=Fu(w,J);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),re,h))continue;const ue=y?f.evaluate(re,{},h,s.availableImages):void 0,me={id:I,properties:w.properties,type:w.type,sourceLayerIndex:V,index:F,geometry:J?re.geometry:zu(w),patterns:{},sortKey:ue};x.push(me)}y&&x.sort((w,I)=>w.sortKey-I.sortKey);for(const w of x){const{geometry:I,index:F,sourceLayerIndex:V}=w;if(this.hasPattern){const J=Oy("fill",this.layers,w,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(w,I,F,h,{});s.featureIndex.insert(n[F].feature,I,F,V,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,oA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,f,y){for(const x of vl(s,500)){let w=0;for(const ue of x)w+=ue.length;const I=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),F=I.vertexLength,V=[],J=[];for(const ue of x){if(ue.length===0)continue;ue!==x[0]&&J.push(V.length/2);const me=this.segments2.prepareSegment(ue.length,this.layoutVertexArray,this.indexArray2),Te=me.vertexLength;this.layoutVertexArray.emplaceBack(ue[0].x,ue[0].y),this.indexArray2.emplaceBack(Te+ue.length-1,Te),V.push(ue[0].x),V.push(ue[0].y);for(let Re=1;Re<ue.length;Re++)this.layoutVertexArray.emplaceBack(ue[Re].x,ue[Re].y),this.indexArray2.emplaceBack(Te+Re-1,Te+Re),V.push(ue[Re].x),V.push(ue[Re].y);me.vertexLength+=ue.length,me.primitiveLength+=ue.length}const re=hw(V,J);for(let ue=0;ue<re.length;ue+=3)this.indexArray.emplaceBack(F+re[ue],F+re[ue+1],F+re[ue+2]);I.vertexLength+=w,I.primitiveLength+=re.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,f)}}let dw,fw;Ut("FillBucket",Ly,{omit:["layers","patternFeatures"]});var mA={get paint(){return fw=fw||new d({"fill-antialias":new Yt(et.paint_fill["fill-antialias"]),"fill-opacity":new an(et.paint_fill["fill-opacity"]),"fill-color":new an(et.paint_fill["fill-color"]),"fill-outline-color":new an(et.paint_fill["fill-outline-color"]),"fill-translate":new Yt(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Yt(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new v(et.paint_fill["fill-pattern"])})},get layout(){return dw=dw||new d({"fill-sort-key":new an(et.layout_fill["fill-sort-key"])})}};class gA extends _{constructor(n){super(n,mA)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Ly(n)}queryRadius(){return Pp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,f,y,x,w){return Kx(Ip(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),f)}isTileClipped(){return!0}}const yA=U([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vA=U([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_A}=yA;var Al={},xA=P,pw=Oc;function Oc(o,n,s,h,f){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=f,o.readFields(wA,this,n)}function wA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,f){for(var y=h.readVarint()+h.pos;h.pos<y;){var x=f._keys[h.readVarint()],w=f._values[h.readVarint()];f.properties[x]=w}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function bA(o){for(var n,s,h=0,f=0,y=o.length,x=y-1;f<y;x=f++)h+=((s=o[x]).x-(n=o[f]).x)*(n.y+s.y);return h}Oc.types=["Unknown","Point","LineString","Polygon"],Oc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,f=0,y=0,x=0,w=[];o.pos<s;){if(f<=0){var I=o.readVarint();h=7&I,f=I>>3}if(f--,h===1||h===2)y+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&w.push(n),n=[]),n.push(new xA(y,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&w.push(n),w},Oc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,f=0,y=0,x=1/0,w=-1/0,I=1/0,F=-1/0;o.pos<n;){if(h<=0){var V=o.readVarint();s=7&V,h=V>>3}if(h--,s===1||s===2)(f+=o.readSVarint())<x&&(x=f),f>w&&(w=f),(y+=o.readSVarint())<I&&(I=y),y>F&&(F=y);else if(s!==7)throw new Error("unknown command "+s)}return[x,I,w,F]},Oc.prototype.toGeoJSON=function(o,n,s){var h,f,y=this.extent*Math.pow(2,s),x=this.extent*o,w=this.extent*n,I=this.loadGeometry(),F=Oc.types[this.type];function V(ue){for(var me=0;me<ue.length;me++){var Te=ue[me];ue[me]=[360*(Te.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+w)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(h=0;h<I.length;h++)J[h]=I[h][0];V(I=J);break;case 2:for(h=0;h<I.length;h++)V(I[h]);break;case 3:for(I=function(ue){var me=ue.length;if(me<=1)return[ue];for(var Te,Re,Ne=[],Qe=0;Qe<me;Qe++){var He=bA(ue[Qe]);He!==0&&(Re===void 0&&(Re=He<0),Re===He<0?(Te&&Ne.push(Te),Te=[ue[Qe]]):Te.push(ue[Qe]))}return Te&&Ne.push(Te),Ne}(I),h=0;h<I.length;h++)for(f=0;f<I[h].length;f++)V(I[h][f])}I.length===1?I=I[0]:F="Multi"+F;var re={type:"Feature",geometry:{type:F,coordinates:I},properties:this.properties};return"id"in this&&(re.id=this.id),re};var SA=pw,mw=gw;function gw(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(EA,this,n),this.length=this._features.length}function EA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var f=null,y=h.readVarint()+h.pos;h.pos<y;){var x=h.readVarint()>>3;f=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return f}(s))}gw.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new SA(this._pbf,n,this.extent,this._keys,this._values)};var TA=mw;function CA(o,n,s){if(o===3){var h=new TA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Al.VectorTile=function(o,n){this.layers=o.readFields(CA,{},n)},Al.VectorTileFeature=pw,Al.VectorTileLayer=mw;const PA=Al.VectorTileFeature.types,Dy=Math.pow(2,13);function kd(o,n,s,h,f,y,x,w){o.emplaceBack(n,s,2*Math.floor(h*Dy)+x,f*Dy*2,y*Dy*2,Math.round(w))}class By{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ra,this.centroidVertexArray=new Fa,this.indexArray=new Zr,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Dr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=jy("fill-extrusion",this.layers,s);for(const{feature:f,id:y,index:x,sourceLayerIndex:w}of n){const I=this.layers[0]._featureFilter.needGeometry,F=Fu(f,I);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),F,h))continue;const V={id:y,sourceLayerIndex:w,index:x,geometry:I?F.geometry:zu(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Oy("fill-extrusion",this.layers,V,this.zoom,s)):this.addFeature(V,V.geometry,x,h,{}),s.featureIndex.insert(f,V.geometry,x,w,this.index,!0)}}addFeatures(n,s,h){for(const f of this.features){const{geometry:y}=f;this.addFeature(f,y,f.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_A),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,vA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,f,y){for(const x of vl(s,500)){const w={x:0,y:0,vertexCount:0};let I=0;for(const me of x)I+=me.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of x){if(me.length===0||AA(me))continue;let Te=0;for(let Re=0;Re<me.length;Re++){const Ne=me[Re];if(Re>=1){const Qe=me[Re-1];if(!IA(Ne,Qe)){F.vertexLength+4>Dr.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const He=Ne.sub(Qe)._perp()._unit(),Ye=Qe.dist(Ne);Te+Ye>32768&&(Te=0),kd(this.layoutVertexArray,Ne.x,Ne.y,He.x,He.y,0,0,Te),kd(this.layoutVertexArray,Ne.x,Ne.y,He.x,He.y,0,1,Te),w.x+=2*Ne.x,w.y+=2*Ne.y,w.vertexCount+=2,Te+=Ye,kd(this.layoutVertexArray,Qe.x,Qe.y,He.x,He.y,0,0,Te),kd(this.layoutVertexArray,Qe.x,Qe.y,He.x,He.y,0,1,Te),w.x+=2*Qe.x,w.y+=2*Qe.y,w.vertexCount+=2;const lt=F.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+I>Dr.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),PA[n.type]!=="Polygon")continue;const V=[],J=[],re=F.vertexLength;for(const me of x)if(me.length!==0){me!==x[0]&&J.push(V.length/2);for(let Te=0;Te<me.length;Te++){const Re=me[Te];kd(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),w.x+=Re.x,w.y+=Re.y,w.vertexCount+=1,V.push(Re.x),V.push(Re.y)}}const ue=hw(V,J);for(let me=0;me<ue.length;me+=3)this.indexArray.emplaceBack(re+ue[me],re+ue[me+2],re+ue[me+1]);F.primitiveLength+=ue.length/3,F.vertexLength+=I;for(let me=0;me<w.vertexCount;me++){const Te=Math.floor(w.x/w.vertexCount),Re=Math.floor(w.y/w.vertexCount);this.centroidVertexArray.emplaceBack(Te,Re)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,f)}}function IA(o,n){return o.x===n.x&&(o.x<0||o.x>Rr)||o.y===n.y&&(o.y<0||o.y>Rr)}function AA(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Rr)||o.every(n=>n.y<0)||o.every(n=>n.y>Rr)}let yw;Ut("FillExtrusionBucket",By,{omit:["layers","features"]});var MA={get paint(){return yw=yw||new d({"fill-extrusion-opacity":new Yt(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new an(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yt(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yt(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new v(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new an(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new an(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yt(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class kA extends _{constructor(n){super(n,MA)}createBucket(n){return new By(n)}queryRadius(){return Pp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,f,y,x,w,I){const F=Ip(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),V=this.paint.get("fill-extrusion-height").evaluate(s,h),J=this.paint.get("fill-extrusion-base").evaluate(s,h),re=function(me,Te,Re,Ne){const Qe=[];for(const He of me){const Ye=[He.x,He.y,0,1];Ap(Ye,Ye,Te),Qe.push(new b(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return Qe}(F,I),ue=function(me,Te,Re,Ne){const Qe=[],He=[],Ye=Ne[8]*Te,lt=Ne[9]*Te,_t=Ne[10]*Te,Ft=Ne[11]*Te,rn=Ne[8]*Re,Ot=Ne[9]*Re,zt=Ne[10]*Re,qt=Ne[11]*Re;for(const $t of me){const Nt=[],ft=[];for(const Qt of $t){const Xt=Qt.x,dn=Qt.y,qn=Ne[0]*Xt+Ne[4]*dn+Ne[12],Hn=Ne[1]*Xt+Ne[5]*dn+Ne[13],Wr=Ne[2]*Xt+Ne[6]*dn+Ne[14],rs=Ne[3]*Xt+Ne[7]*dn+Ne[15],ai=Wr+_t,xr=rs+Ft,Ri=qn+rn,ji=Hn+Ot,Oi=Wr+zt,wr=rs+qt,Hr=new b((qn+Ye)/xr,(Hn+lt)/xr);Hr.z=ai/xr,Nt.push(Hr);const bi=new b(Ri/wr,ji/wr);bi.z=Oi/wr,ft.push(bi)}Qe.push(Nt),He.push(ft)}return[Qe,He]}(f,J,V,I);return function(me,Te,Re){let Ne=1/0;Kx(Re,Te)&&(Ne=vw(Re,Te[0]));for(let Qe=0;Qe<Te.length;Qe++){const He=Te[Qe],Ye=me[Qe];for(let lt=0;lt<He.length-1;lt++){const _t=He[lt],Ft=[_t,He[lt+1],Ye[lt+1],Ye[lt],_t];Xx(Re,Ft)&&(Ne=Math.min(Ne,vw(Re,Ft)))}}return Ne!==1/0&&Ne}(ue[0],ue[1],re)}}function zd(o,n){return o.x*n.x+o.y*n.y}function vw(o,n){if(o.length===1){let s=0;const h=n[s++];let f;for(;!f||h.equals(f);)if(f=n[s++],!f)return 1/0;for(;s<n.length;s++){const y=n[s],x=o[0],w=f.sub(h),I=y.sub(h),F=x.sub(h),V=zd(w,w),J=zd(w,I),re=zd(I,I),ue=zd(F,w),me=zd(F,I),Te=V*re-J*J,Re=(re*ue-J*me)/Te,Ne=(V*me-J*ue)/Te,Qe=h.z*(1-Re-Ne)+f.z*Re+y.z*Ne;if(isFinite(Qe))return Qe}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const zA=U([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:FA}=zA,RA=U([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:jA}=RA,OA=Al.VectorTileFeature.types,LA=Math.cos(Math.PI/180*37.5),_w=Math.pow(2,14)/.5;class Ny{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ic,this.layoutVertexArray2=new _d,this.indexArray=new Zr,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Dr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=jy("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),y=!f.isConstant(),x=[];for(const{feature:w,id:I,index:F,sourceLayerIndex:V}of n){const J=this.layers[0]._featureFilter.needGeometry,re=Fu(w,J);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),re,h))continue;const ue=y?f.evaluate(re,{},h):void 0,me={id:I,properties:w.properties,type:w.type,sourceLayerIndex:V,index:F,geometry:J?re.geometry:zu(w),patterns:{},sortKey:ue};x.push(me)}y&&x.sort((w,I)=>w.sortKey-I.sortKey);for(const w of x){const{geometry:I,index:F,sourceLayerIndex:V}=w;if(this.hasPattern){const J=Oy("line",this.layers,w,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(w,I,F,h,{});s.featureIndex.insert(n[F].feature,I,F,V,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,jA)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,FA),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,f,y){const x=this.layers[0].layout,w=x.get("line-join").evaluate(n,{}),I=x.get("line-cap"),F=x.get("line-miter-limit"),V=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const J of s)this.addLine(J,n,w,I,F,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,f)}addLine(n,s,h,f,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ne=0;Ne<n.length-1;Ne++)this.totalDistance+=n[Ne].dist(n[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=OA[s.type]==="Polygon";let I=n.length;for(;I>=2&&n[I-1].equals(n[I-2]);)I--;let F=0;for(;F<I-1&&n[F].equals(n[F+1]);)F++;if(I<(w?3:2))return;h==="bevel"&&(y=1.05);const V=this.overscaling<=16?15*Rr/(512*this.overscaling):0,J=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let re,ue,me,Te,Re;this.e1=this.e2=-1,w&&(re=n[I-2],Re=n[F].sub(re)._unit()._perp());for(let Ne=F;Ne<I;Ne++){if(me=Ne===I-1?w?n[F+1]:void 0:n[Ne+1],me&&n[Ne].equals(me))continue;Re&&(Te=Re),re&&(ue=re),re=n[Ne],Re=me?me.sub(re)._unit()._perp():Te,Te=Te||Re;let Qe=Te.add(Re);Qe.x===0&&Qe.y===0||Qe._unit();const He=Te.x*Re.x+Te.y*Re.y,Ye=Qe.x*Re.x+Qe.y*Re.y,lt=Ye!==0?1/Ye:1/0,_t=2*Math.sqrt(2-2*Ye),Ft=Ye<LA&&ue&&me,rn=Te.x*Re.y-Te.y*Re.x>0;if(Ft&&Ne>F){const qt=re.dist(ue);if(qt>2*V){const $t=re.sub(re.sub(ue)._mult(V/qt)._round());this.updateDistance(ue,$t),this.addCurrentVertex($t,Te,0,0,J),ue=$t}}const Ot=ue&&me;let zt=Ot?h:w?"butt":f;if(Ot&&zt==="round"&&(lt<x?zt="miter":lt<=2&&(zt="fakeround")),zt==="miter"&&lt>y&&(zt="bevel"),zt==="bevel"&&(lt>2&&(zt="flipbevel"),lt<y&&(zt="miter")),ue&&this.updateDistance(ue,re),zt==="miter")Qe._mult(lt),this.addCurrentVertex(re,Qe,0,0,J);else if(zt==="flipbevel"){if(lt>100)Qe=Re.mult(-1);else{const qt=lt*Te.add(Re).mag()/Te.sub(Re).mag();Qe._perp()._mult(qt*(rn?-1:1))}this.addCurrentVertex(re,Qe,0,0,J),this.addCurrentVertex(re,Qe.mult(-1),0,0,J)}else if(zt==="bevel"||zt==="fakeround"){const qt=-Math.sqrt(lt*lt-1),$t=rn?qt:0,Nt=rn?0:qt;if(ue&&this.addCurrentVertex(re,Te,$t,Nt,J),zt==="fakeround"){const ft=Math.round(180*_t/Math.PI/20);for(let Qt=1;Qt<ft;Qt++){let Xt=Qt/ft;if(Xt!==.5){const qn=Xt-.5;Xt+=Xt*qn*(Xt-1)*((1.0904+He*(He*(3.55645-1.43519*He)-3.2452))*qn*qn+(.848013+He*(.215638*He-1.06021)))}const dn=Re.sub(Te)._mult(Xt)._add(Te)._unit()._mult(rn?-1:1);this.addHalfVertex(re,dn.x,dn.y,!1,rn,0,J)}}me&&this.addCurrentVertex(re,Re,-$t,-Nt,J)}else if(zt==="butt")this.addCurrentVertex(re,Qe,0,0,J);else if(zt==="square"){const qt=ue?1:-1;this.addCurrentVertex(re,Qe,qt,qt,J)}else zt==="round"&&(ue&&(this.addCurrentVertex(re,Te,0,0,J),this.addCurrentVertex(re,Te,1,1,J,!0)),me&&(this.addCurrentVertex(re,Re,-1,-1,J,!0),this.addCurrentVertex(re,Re,0,0,J)));if(Ft&&Ne<I-1){const qt=re.dist(me);if(qt>2*V){const $t=re.add(me.sub(re)._mult(V/qt)._round());this.updateDistance(re,$t),this.addCurrentVertex($t,Re,0,0,J),re=$t}}}}addCurrentVertex(n,s,h,f,y,x=!1){const w=s.y*f-s.x,I=-s.y-s.x*f;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,y),this.addHalfVertex(n,w,I,x,!0,-f,y),this.distance>_w/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,f,y,x))}addHalfVertex({x:n,y:s},h,f,y,x,w,I){const F=.5*(this.lineClips?this.scaledDistance*(_w-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(y?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*f)+128,1+(w===0?0:w<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),I.primitiveLength++),x?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let xw,ww;Ut("LineBucket",Ny,{omit:["layers","patternFeatures"]});var bw={get paint(){return ww=ww||new d({"line-opacity":new an(et.paint_line["line-opacity"]),"line-color":new an(et.paint_line["line-color"]),"line-translate":new Yt(et.paint_line["line-translate"]),"line-translate-anchor":new Yt(et.paint_line["line-translate-anchor"]),"line-width":new an(et.paint_line["line-width"]),"line-gap-width":new an(et.paint_line["line-gap-width"]),"line-offset":new an(et.paint_line["line-offset"]),"line-blur":new an(et.paint_line["line-blur"]),"line-dasharray":new r(et.paint_line["line-dasharray"]),"line-pattern":new v(et.paint_line["line-pattern"]),"line-gradient":new l(et.paint_line["line-gradient"])})},get layout(){return xw=xw||new d({"line-cap":new Yt(et.layout_line["line-cap"]),"line-join":new an(et.layout_line["line-join"]),"line-miter-limit":new Yt(et.layout_line["line-miter-limit"]),"line-round-limit":new Yt(et.layout_line["line-round-limit"]),"line-sort-key":new an(et.layout_line["line-sort-key"])})}};class DA extends an{possiblyEvaluate(n,s){return s=new Qn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,f){return s=E({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,f)}}let Rp;class BA extends _{constructor(n){super(n,bw),this.gradientVersion=0,Rp||(Rp=new DA(bw.paint.properties["line-width"].specification),Rp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof ms,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Rp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Ny(n)}queryRadius(n){const s=n,h=Sw(Td("line-width",this,s),Td("line-gap-width",this,s)),f=Td("line-offset",this,s);return h/2+Math.abs(f)+Pp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,f,y,x,w){const I=Ip(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),F=w/2*Sw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),V=this.paint.get("line-offset").evaluate(s,h);return V&&(f=function(J,re){const ue=[];for(let me=0;me<J.length;me++){const Te=J[me],Re=[];for(let Ne=0;Ne<Te.length;Ne++){const Qe=Te[Ne-1],He=Te[Ne],Ye=Te[Ne+1],lt=Ne===0?new b(0,0):He.sub(Qe)._unit()._perp(),_t=Ne===Te.length-1?new b(0,0):Ye.sub(He)._unit()._perp(),Ft=lt._add(_t)._unit(),rn=Ft.x*_t.x+Ft.y*_t.y;rn!==0&&Ft._mult(1/rn),Re.push(Ft._mult(re)._add(He))}ue.push(Re)}return ue}(f,V*w)),function(J,re,ue){for(let me=0;me<re.length;me++){const Te=re[me];if(J.length>=3){for(let Re=0;Re<Te.length;Re++)if(Fc(J,Te[Re]))return!0}if(XI(J,Te,ue))return!0}return!1}(I,f,F)}isTileClipped(){return!0}}function Sw(o,n){return n>0?n+2*o:o}const NA=U([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),UA=U([{name:"a_projected_pos",components:3,type:"Float32"}],4);U([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $A=U([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);U([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ew=U([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),VA=U([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function GA(o,n,s){return o.sections.forEach(h=>{h.text=function(f,y,x){const w=y.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?f=f.toLocaleUpperCase():w==="lowercase"&&(f=f.toLocaleLowerCase()),Js.applyArabicShaping&&(f=Js.applyArabicShaping(f)),f}(h.text,n,s)}),o}U([{name:"triangle",components:3,type:"Uint16"}]),U([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),U([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),U([{type:"Float32",name:"offsetX"}]),U([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),U([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Fd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Br=24,Tw=Wn,Cw=function(o,n,s,h,f){var y,x,w=8*f-h-1,I=(1<<w)-1,F=I>>1,V=-7,J=s?f-1:0,re=s?-1:1,ue=o[n+J];for(J+=re,y=ue&(1<<-V)-1,ue>>=-V,V+=w;V>0;y=256*y+o[n+J],J+=re,V-=8);for(x=y&(1<<-V)-1,y>>=-V,V+=h;V>0;x=256*x+o[n+J],J+=re,V-=8);if(y===0)y=1-F;else{if(y===I)return x?NaN:1/0*(ue?-1:1);x+=Math.pow(2,h),y-=F}return(ue?-1:1)*x*Math.pow(2,y-h)},Pw=function(o,n,s,h,f,y){var x,w,I,F=8*y-f-1,V=(1<<F)-1,J=V>>1,re=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=h?0:y-1,me=h?1:-1,Te=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,x=V):(x=Math.floor(Math.log(n)/Math.LN2),n*(I=Math.pow(2,-x))<1&&(x--,I*=2),(n+=x+J>=1?re/I:re*Math.pow(2,1-J))*I>=2&&(x++,I/=2),x+J>=V?(w=0,x=V):x+J>=1?(w=(n*I-1)*Math.pow(2,f),x+=J):(w=n*Math.pow(2,J-1)*Math.pow(2,f),x=0));f>=8;o[s+ue]=255&w,ue+=me,w/=256,f-=8);for(x=x<<f|w,F+=f;F>0;o[s+ue]=255&x,ue+=me,x/=256,F-=8);o[s+ue-me]|=128*Te};function Wn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Wn.Varint=0,Wn.Fixed64=1,Wn.Bytes=2,Wn.Fixed32=5;var Uy=4294967296,Iw=1/Uy,Aw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Oa(o){return o.type===Wn.Bytes?o.readVarint()+o.pos:o.pos+1}function Lc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Mw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var f=s.pos-1;f>=o;f--)s.buf[f+h]=s.buf[f]}function ZA(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function WA(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function HA(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function XA(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function KA(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function qA(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function JA(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function YA(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function QA(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function jp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Dc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function kw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Wn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),f=h>>3,y=this.pos;this.type=7&h,o(f,n,this),this.pos===y&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=jp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=kw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=jp(this.buf,this.pos)+jp(this.buf,this.pos+4)*Uy;return this.pos+=8,o},readSFixed64:function(){var o=jp(this.buf,this.pos)+kw(this.buf,this.pos+4)*Uy;return this.pos+=8,o},readFloat:function(){var o=Cw(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Cw(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(f,y,x){var w,I,F=x.buf;if(w=(112&(I=F[x.pos++]))>>4,I<128||(w|=(127&(I=F[x.pos++]))<<3,I<128)||(w|=(127&(I=F[x.pos++]))<<10,I<128)||(w|=(127&(I=F[x.pos++]))<<17,I<128)||(w|=(127&(I=F[x.pos++]))<<24,I<128)||(w|=(1&(I=F[x.pos++]))<<31,I<128))return Lc(f,w,y);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Aw?function(s,h,f){return Aw.decode(s.subarray(h,f))}(this.buf,n,o):function(s,h,f){for(var y="",x=h;x<f;){var w,I,F,V=s[x],J=null,re=V>239?4:V>223?3:V>191?2:1;if(x+re>f)break;re===1?V<128&&(J=V):re===2?(192&(w=s[x+1]))==128&&(J=(31&V)<<6|63&w)<=127&&(J=null):re===3?(I=s[x+2],(192&(w=s[x+1]))==128&&(192&I)==128&&((J=(15&V)<<12|(63&w)<<6|63&I)<=2047||J>=55296&&J<=57343)&&(J=null)):re===4&&(I=s[x+2],F=s[x+3],(192&(w=s[x+1]))==128&&(192&I)==128&&(192&F)==128&&((J=(15&V)<<18|(63&w)<<12|(63&I)<<6|63&F)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,re=1):J>65535&&(J-=65536,y+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),y+=String.fromCharCode(J),x+=re}return y}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Wn.Bytes)return o.push(this.readVarint(n));var s=Oa(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSVarint());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Wn.Bytes)return o.push(this.readBoolean());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFloat());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Wn.Bytes)return o.push(this.readDouble());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFixed32());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSFixed32());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFixed64());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSFixed64());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Wn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Wn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Wn.Fixed32)this.pos+=4;else{if(n!==Wn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Dc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Dc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Dc(this.buf,-1&o,this.pos),Dc(this.buf,Math.floor(o*Iw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Dc(this.buf,-1&o,this.pos),Dc(this.buf,Math.floor(o*Iw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,f;if(n>=0?(h=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,x,w){w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,w.buf[w.pos]=127&(y>>>=7)}(h,0,s),function(y,x){var w=(7&y)<<4;x.buf[x.pos++]|=w|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(f,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,f,y){for(var x,w,I=0;I<f.length;I++){if((x=f.charCodeAt(I))>55295&&x<57344){if(!w){x>56319||I+1===f.length?(h[y++]=239,h[y++]=191,h[y++]=189):w=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(h[y++]=239,h[y++]=191,h[y++]=189,w=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Mw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Pw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Pw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Mw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Wn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,ZA,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,WA,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,KA,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,HA,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,XA,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,qA,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,JA,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,YA,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,QA,n)},writeBytesField:function(o,n){this.writeTag(o,Wn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Wn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Wn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Wn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var $y=S(Tw);const Vy=3;function eM(o,n,s){o===1&&s.readMessage(tM,n)}function tM(o,n,s){if(o===3){const{id:h,bitmap:f,width:y,height:x,left:w,top:I,advance:F}=s.readMessage(nM,{});n.push({id:h,bitmap:new Pd({width:y+2*Vy,height:x+2*Vy},f),metrics:{width:y,height:x,left:w,top:I,advance:F}})}}function nM(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const zw=Vy;function Fw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,w)=>w.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let f=0,y=0;for(const x of o)for(let w=h.length-1;w>=0;w--){const I=h[w];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,y=Math.max(y,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===I.w&&x.h===I.h){const F=h.pop();w<h.length&&(h[w]=F)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(h.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:f,h:y,fill:n/(f*y)||0}}const Zi=1;class Gy{constructor(n,{pixelRatio:s,version:h,stretchX:f,stretchY:y,content:x,textFitWidth:w,textFitHeight:I}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=f,this.stretchY=y,this.content=x,this.version=h,this.textFitWidth=w,this.textFitHeight=I}get tl(){return[this.paddedRect.x+Zi,this.paddedRect.y+Zi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Zi,this.paddedRect.y+this.paddedRect.h-Zi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Zi)/this.pixelRatio,(this.paddedRect.h-2*Zi)/this.pixelRatio]}}class Rw{constructor(n,s){const h={},f={};this.haveRenderCallbacks=[];const y=[];this.addImages(n,h,y),this.addImages(s,f,y);const{w:x,h:w}=Fw(y),I=new Ao({width:x||1,height:w||1});for(const F in n){const V=n[F],J=h[F].paddedRect;Ao.copy(V.data,I,{x:0,y:0},{x:J.x+Zi,y:J.y+Zi},V.data)}for(const F in s){const V=s[F],J=f[F].paddedRect,re=J.x+Zi,ue=J.y+Zi,me=V.data.width,Te=V.data.height;Ao.copy(V.data,I,{x:0,y:0},{x:re,y:ue},V.data),Ao.copy(V.data,I,{x:0,y:Te-1},{x:re,y:ue-1},{width:me,height:1}),Ao.copy(V.data,I,{x:0,y:0},{x:re,y:ue+Te},{width:me,height:1}),Ao.copy(V.data,I,{x:me-1,y:0},{x:re-1,y:ue},{width:1,height:Te}),Ao.copy(V.data,I,{x:0,y:0},{x:re+me,y:ue},{width:1,height:Te})}this.image=I,this.iconPositions=h,this.patternPositions=f}addImages(n,s,h){for(const f in n){const y=n[f],x={x:0,y:0,w:y.data.width+2*Zi,h:y.data.height+2*Zi};h.push(x),s[f]=new Gy(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[f,y]=n.tl;h.update(s.data,void 0,{x:f,y})}}var Ml;Ut("ImagePosition",Gy),Ut("ImageAtlas",Rw),m.ai=void 0,(Ml=m.ai||(m.ai={}))[Ml.none=0]="none",Ml[Ml.horizontal=1]="horizontal",Ml[Ml.vertical=2]="vertical",Ml[Ml.horizontalOnly=3]="horizontalOnly";const Rd=-17;class jd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new jd;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new jd;return s.imageName=n,s}}class Bc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Bc;for(let f=0;f<n.sections.length;f++){const y=n.sections[f];y.image?h.addImageSection(y):h.addTextSection(y,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const f=n.charCodeAt(h+1)||null,y=n.charCodeAt(h-1)||null;s+=f&&_p(f)&&!Fd[n[h+1]]||y&&_p(y)&&!Fd[n[h-1]]||!Fd[n[h]]?n[h]:Fd[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Lp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Lp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Bc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(jd.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(jd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Op(o,n,s,h,f,y,x,w,I,F,V,J,re,ue,me){const Te=Bc.fromFeature(o,f);let Re;J===m.ai.vertical&&Te.verticalizePunctuation();const{processBidirectionalText:Ne,processStyledBidirectionalText:Qe}=Js;if(Ne&&Te.sections.length===1){Re=[];const lt=Ne(Te.toString(),Zy(Te,F,y,n,h,ue));for(const _t of lt){const Ft=new Bc;Ft.text=_t,Ft.sections=Te.sections;for(let rn=0;rn<_t.length;rn++)Ft.sectionIndex.push(0);Re.push(Ft)}}else if(Qe){Re=[];const lt=Qe(Te.text,Te.sectionIndex,Zy(Te,F,y,n,h,ue));for(const _t of lt){const Ft=new Bc;Ft.text=_t[0],Ft.sectionIndex=_t[1],Ft.sections=Te.sections,Re.push(Ft)}}else Re=function(lt,_t){const Ft=[],rn=lt.text;let Ot=0;for(const zt of _t)Ft.push(lt.substring(Ot,zt)),Ot=zt;return Ot<rn.length&&Ft.push(lt.substring(Ot,rn.length)),Ft}(Te,Zy(Te,F,y,n,h,ue));const He=[],Ye={positionedLines:He,text:Te.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(lt,_t,Ft,rn,Ot,zt,qt,$t,Nt,ft,Qt,Xt){let dn=0,qn=Rd,Hn=0,Wr=0;const rs=$t==="right"?1:$t==="left"?0:.5;let ai=0;for(const wr of Ot){wr.trim();const Hr=wr.getMaxScale(),bi=(Hr-1)*Br,li={positionedGlyphs:[],lineOffset:0};lt.positionedLines[ai]=li;const Li=li.positionedGlyphs;let ui=0;if(!wr.length()){qn+=zt,++ai;continue}for(let Wi=0;Wi<wr.length();Wi++){const jn=wr.getSection(Wi),er=wr.getSectionIndex(Wi),lr=wr.getCharCode(Wi);let lo=0,pr=null,Vc=null,ta=null,na=Br;const is=!(Nt===m.ai.horizontal||!Qt&&!gd(lr)||Qt&&(Lp[lr]||(xr=lr,Lt.Arabic(xr)||Lt["Arabic Supplement"](xr)||Lt["Arabic Extended-A"](xr)||Lt["Arabic Presentation Forms-A"](xr)||Lt["Arabic Presentation Forms-B"](xr))));if(jn.imageName){const zo=rn[jn.imageName];if(!zo)continue;ta=jn.imageName,lt.iconsInText=lt.iconsInText||!0,Vc=zo.paddedRect;const Jr=zo.displaySize;jn.scale=jn.scale*Br/Xt,pr={width:Jr[0],height:Jr[1],left:Zi,top:-zw,advance:is?Jr[1]:Jr[0]},lo=bi+(Br-Jr[1]*jn.scale),na=pr.advance;const La=is?Jr[0]*jn.scale-Br*Hr:Jr[1]*jn.scale-Br*Hr;La>0&&La>ui&&(ui=La)}else{const zo=Ft[jn.fontStack],Jr=zo&&zo[lr];if(Jr&&Jr.rect)Vc=Jr.rect,pr=Jr.metrics;else{const La=_t[jn.fontStack],Nd=La&&La[lr];if(!Nd)continue;pr=Nd.metrics}lo=(Hr-jn.scale)*Br}is?(lt.verticalizable=!0,Li.push({glyph:lr,imageName:ta,x:dn,y:qn+lo,vertical:is,scale:jn.scale,fontStack:jn.fontStack,sectionIndex:er,metrics:pr,rect:Vc}),dn+=na*jn.scale+ft):(Li.push({glyph:lr,imageName:ta,x:dn,y:qn+lo,vertical:is,scale:jn.scale,fontStack:jn.fontStack,sectionIndex:er,metrics:pr,rect:Vc}),dn+=pr.advance*jn.scale+ft)}Li.length!==0&&(Hn=Math.max(dn-ft,Hn),sM(Li,0,Li.length-1,rs,ui)),dn=0;const ko=zt*Hr+ui;li.lineOffset=Math.max(ui,bi),qn+=ko,Wr=Math.max(ko,Wr),++ai}var xr;const Ri=qn-Rd,{horizontalAlign:ji,verticalAlign:Oi}=Wy(qt);(function(wr,Hr,bi,li,Li,ui,ko,Wi,jn){const er=(Hr-bi)*Li;let lr=0;lr=ui!==ko?-Wi*li-Rd:(-li*jn+.5)*ko;for(const lo of wr)for(const pr of lo.positionedGlyphs)pr.x+=er,pr.y+=lr})(lt.positionedLines,rs,ji,Oi,Hn,Wr,zt,Ri,Ot.length),lt.top+=-Oi*Ri,lt.bottom=lt.top+Ri,lt.left+=-ji*Hn,lt.right=lt.left+Hn}(Ye,n,s,h,Re,x,w,I,J,F,re,me),!function(lt){for(const _t of lt)if(_t.positionedGlyphs.length!==0)return!1;return!0}(He)&&Ye}const Lp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rM={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},iM={40:!0};function jw(o,n,s,h,f,y){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Br/y+f:0}{const x=s[n.fontStack],w=x&&x[o];return w?w.metrics.advance*n.scale+f:0}}function Ow(o,n,s,h){const f=Math.pow(o-n,2);return h?o<n?f/2:2*f:f+Math.abs(s)*s}function oM(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Lw(o,n,s,h,f,y){let x=null,w=Ow(n,s,f,y);for(const I of h){const F=Ow(n-I.x,s,f,y)+I.badness;F<=w&&(x=I,w=F)}return{index:o,x:n,priorBreak:x,badness:w}}function Dw(o){return o?Dw(o.priorBreak).concat(o.index):[]}function Zy(o,n,s,h,f,y){if(!o)return[];const x=[],w=function(J,re,ue,me,Te,Re){let Ne=0;for(let Qe=0;Qe<J.length();Qe++){const He=J.getSection(Qe);Ne+=jw(J.getCharCode(Qe),He,me,Te,re,Re)}return Ne/Math.max(1,Math.ceil(Ne/ue))}(o,n,s,h,f,y),I=o.text.indexOf("​")>=0;let F=0;for(let J=0;J<o.length();J++){const re=o.getSection(J),ue=o.getCharCode(J);if(Lp[ue]||(F+=jw(ue,re,h,f,n,y)),J<o.length()-1){const me=!((V=ue)<11904||!(Lt["Bopomofo Extended"](V)||Lt.Bopomofo(V)||Lt["CJK Compatibility Forms"](V)||Lt["CJK Compatibility Ideographs"](V)||Lt["CJK Compatibility"](V)||Lt["CJK Radicals Supplement"](V)||Lt["CJK Strokes"](V)||Lt["CJK Symbols and Punctuation"](V)||Lt["CJK Unified Ideographs Extension A"](V)||Lt["CJK Unified Ideographs"](V)||Lt["Enclosed CJK Letters and Months"](V)||Lt["Halfwidth and Fullwidth Forms"](V)||Lt.Hiragana(V)||Lt["Ideographic Description Characters"](V)||Lt["Kangxi Radicals"](V)||Lt["Katakana Phonetic Extensions"](V)||Lt.Katakana(V)||Lt["Vertical Forms"](V)||Lt["Yi Radicals"](V)||Lt["Yi Syllables"](V)));(rM[ue]||me||re.imageName||J!==o.length()-2&&iM[o.getCharCode(J+1)])&&x.push(Lw(J+1,F,w,x,oM(ue,o.getCharCode(J+1),me&&I),!1))}}var V;return Dw(Lw(o.length(),F,w,x,0,!0))}function Wy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function sM(o,n,s,h,f){if(!h&&!f)return;const y=o[s],x=(o[s].x+y.metrics.advance*y.scale)*h;for(let w=n;w<=s;w++)o[w].x-=x,o[w].y+=f}function aM(o,n,s){const{horizontalAlign:h,verticalAlign:f}=Wy(s),y=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*f;return{image:o,top:x,bottom:x+o.displaySize[1],left:y,right:y+o.displaySize[0]}}function Bw(o){var n,s;let h=o.left,f=o.top,y=o.right-h,x=o.bottom-f;const w=(n=o.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",I=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",F=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(I==="proportional"){if(w==="stretchOnly"&&y/x<F||w==="proportional"){const V=Math.ceil(x*F);h*=V/y,y=V}}else if(w==="proportional"&&I==="stretchOnly"&&F!==0&&y/x>F){const V=Math.ceil(y/F);f*=V/x,x=V}return{x1:h,y1:f,x2:h+y,y2:f+x}}function Nw(o,n,s,h,f,y){const x=o.image;let w;if(x.content){const Re=x.content,Ne=x.pixelRatio||1;w=[Re[0]/Ne,Re[1]/Ne,x.displaySize[0]-Re[2]/Ne,x.displaySize[1]-Re[3]/Ne]}const I=n.left*y,F=n.right*y;let V,J,re,ue;s==="width"||s==="both"?(ue=f[0]+I-h[3],J=f[0]+F+h[1]):(ue=f[0]+(I+F-x.displaySize[0])/2,J=ue+x.displaySize[0]);const me=n.top*y,Te=n.bottom*y;return s==="height"||s==="both"?(V=f[1]+me-h[0],re=f[1]+Te+h[2]):(V=f[1]+(me+Te-x.displaySize[1])/2,re=V+x.displaySize[1]),{image:x,top:V,right:J,bottom:re,left:ue,collisionPadding:w}}const Od=255,ea=128,kl=Od*ea;function Uw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Qn(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:f}=s;let y=0;for(;y<h.length&&h[y]<=o;)y++;y=Math.max(0,y-1);let x=y;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const w=h[y],I=h[x];return s.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:I,interpolationType:f}:{kind:"camera",minZoom:w,maxZoom:I,minSize:s.evaluate(new Qn(w)),maxSize:s.evaluate(new Qn(I)),interpolationType:f}}}function Hy(o,n,s){let h="never";const f=o.get(n);return f?h=f:o.get(s)&&(h="always"),h}const lM=Al.VectorTileFeature.types,uM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dp(o,n,s,h,f,y,x,w,I,F,V,J,re){const ue=w?Math.min(kl,Math.round(w[0])):0,me=w?Math.min(kl,Math.round(w[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*f),y,x,(ue<<1)+(I?1:0),me,16*F,16*V,256*J,256*re)}function Xy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function cM(o){for(const n of o.sections)if(yd(n.text))return!0;return!1}class Ky{constructor(n){this.layoutVertexArray=new Io,this.indexArray=new Zr,this.programConfigurations=n,this.segments=new Dr,this.dynamicLayoutVertexArray=new Ys,this.opacityVertexArray=new Tl,this.hasVisibleVertices=!1,this.placedSymbolArray=new sr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,NA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,UA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,uM,!0),this.opacityVertexBuffer.itemSize=1),(h||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",Ky);class qy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Dr,this.collisionVertexArray=new oi}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,$A.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",qy);class Nc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Iy([]),this.placementViewportMatrix=Iy([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Uw(this.zoom,s["text-size"]),this.iconSizeData=Uw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,f=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=Hy(h,"text-overlap","text-allow-overlap")!=="never"||Hy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>m.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Ky(new ku(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Ky(new ku(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ar,this.lineVertexArray=new zi,this.symbolInstances=new Co,this.textAnchorOffsets=new ni}calculateGlyphDependencies(n,s,h,f,y){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||f)&&y){const w=Fd[n.charAt(x)];w&&(s[w.charCodeAt(0)]=!0)}}populate(n,s,h){const f=this.layers[0],y=f.layout,x=y.get("text-font"),w=y.get("text-field"),I=y.get("icon-image"),F=(w.value.kind!=="constant"||w.value.value instanceof Tr&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),V=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,J=y.get("symbol-sort-key");if(this.features=[],!F&&!V)return;const re=s.iconDependencies,ue=s.glyphDependencies,me=s.availableImages,Te=new Qn(this.zoom);for(const{feature:Re,id:Ne,index:Qe,sourceLayerIndex:He}of n){const Ye=f._featureFilter.needGeometry,lt=Fu(Re,Ye);if(!f._featureFilter.filter(Te,lt,h))continue;let _t,Ft;if(Ye||(lt.geometry=zu(Re)),F){const Ot=f.getValueAndResolveTokens("text-field",lt,h,me),zt=Tr.factory(Ot),qt=this.hasRTLText=this.hasRTLText||cM(zt);(!qt||Js.getRTLTextPluginStatus()==="unavailable"||qt&&Js.isParsed())&&(_t=GA(zt,f,lt))}if(V){const Ot=f.getValueAndResolveTokens("icon-image",lt,h,me);Ft=Ot instanceof Gr?Ot:Gr.fromString(Ot)}if(!_t&&!Ft)continue;const rn=this.sortFeaturesByKey?J.evaluate(lt,{},h):void 0;if(this.features.push({id:Ne,text:_t,icon:Ft,index:Qe,sourceLayerIndex:He,geometry:lt.geometry,properties:Re.properties,type:lM[Re.type],sortKey:rn}),Ft&&(re[Ft.name]=!0),_t){const Ot=x.evaluate(lt,{},h).join(","),zt=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.ai.vertical)>=0;for(const qt of _t.sections)if(qt.image)re[qt.image.name]=!0;else{const $t=md(_t.toString()),Nt=qt.fontStack||Ot,ft=ue[Nt]=ue[Nt]||{};this.calculateGlyphDependencies(qt.text,ft,zt,this.allowVerticalPlacement,$t)}}}y.get("symbol-placement")==="line"&&(this.features=function(Re){const Ne={},Qe={},He=[];let Ye=0;function lt(Ot){He.push(Re[Ot]),Ye++}function _t(Ot,zt,qt){const $t=Qe[Ot];return delete Qe[Ot],Qe[zt]=$t,He[$t].geometry[0].pop(),He[$t].geometry[0]=He[$t].geometry[0].concat(qt[0]),$t}function Ft(Ot,zt,qt){const $t=Ne[zt];return delete Ne[zt],Ne[Ot]=$t,He[$t].geometry[0].shift(),He[$t].geometry[0]=qt[0].concat(He[$t].geometry[0]),$t}function rn(Ot,zt,qt){const $t=qt?zt[0][zt[0].length-1]:zt[0][0];return`${Ot}:${$t.x}:${$t.y}`}for(let Ot=0;Ot<Re.length;Ot++){const zt=Re[Ot],qt=zt.geometry,$t=zt.text?zt.text.toString():null;if(!$t){lt(Ot);continue}const Nt=rn($t,qt),ft=rn($t,qt,!0);if(Nt in Qe&&ft in Ne&&Qe[Nt]!==Ne[ft]){const Qt=Ft(Nt,ft,qt),Xt=_t(Nt,ft,He[Qt].geometry);delete Ne[Nt],delete Qe[ft],Qe[rn($t,He[Xt].geometry,!0)]=Xt,He[Qt].geometry=null}else Nt in Qe?_t(Nt,ft,qt):ft in Ne?Ft(Nt,ft,qt):(lt(Ot),Ne[Nt]=Ye-1,Qe[ft]=Ye-1)}return He.filter(Ot=>Ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ne)=>Re.sortKey-Ne.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(s[n.segment+1]),y=n.dist(s[n.segment]);const x={};for(let w=n.segment+1;w<s.length;w++)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:f},w<s.length-1&&(f+=s[w+1].dist(s[w]));for(let w=n.segment||0;w>=0;w--)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:y},w>0&&(y+=s[w-1].dist(s[w]));for(let w=0;w<s.length;w++){const I=x[w];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,f,y,x,w,I,F,V,J,re){const ue=n.indexArray,me=n.layoutVertexArray,Te=n.segments.prepareSegment(4*s.length,me,ue,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ne=Te.vertexLength,Qe=this.allowVerticalPlacement&&w===m.ai.vertical?Math.PI/2:0,He=x.text&&x.text.sections;for(let Ye=0;Ye<s.length;Ye++){const{tl:lt,tr:_t,bl:Ft,br:rn,tex:Ot,pixelOffsetTL:zt,pixelOffsetBR:qt,minFontScaleX:$t,minFontScaleY:Nt,glyphOffset:ft,isSDF:Qt,sectionIndex:Xt}=s[Ye],dn=Te.vertexLength,qn=ft[1];Dp(me,I.x,I.y,lt.x,qn+lt.y,Ot.x,Ot.y,h,Qt,zt.x,zt.y,$t,Nt),Dp(me,I.x,I.y,_t.x,qn+_t.y,Ot.x+Ot.w,Ot.y,h,Qt,qt.x,zt.y,$t,Nt),Dp(me,I.x,I.y,Ft.x,qn+Ft.y,Ot.x,Ot.y+Ot.h,h,Qt,zt.x,qt.y,$t,Nt),Dp(me,I.x,I.y,rn.x,qn+rn.y,Ot.x+Ot.w,Ot.y+Ot.h,h,Qt,qt.x,qt.y,$t,Nt),Xy(n.dynamicLayoutVertexArray,I,Qe),ue.emplaceBack(dn,dn+1,dn+2),ue.emplaceBack(dn+1,dn+2,dn+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ft[0]),Ye!==s.length-1&&Xt===s[Ye+1].sectionIndex||n.programConfigurations.populatePaintArrays(me.length,x,x.index,{},re,He&&He[Xt])}n.placedSymbolArray.emplaceBack(I.x,I.y,Re,this.glyphOffsetArray.length-Re,Ne,F,V,I.segment,h?h[0]:0,h?h[1]:0,f[0],f[1],w,0,!1,0,J)}_addCollisionDebugVertex(n,s,h,f,y,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,f,y,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,f,y,x,w){const I=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),F=I.vertexLength,V=y.layoutVertexArray,J=y.collisionVertexArray,re=w.anchorX,ue=w.anchorY;this._addCollisionDebugVertex(V,J,x,re,ue,new b(n,s)),this._addCollisionDebugVertex(V,J,x,re,ue,new b(h,s)),this._addCollisionDebugVertex(V,J,x,re,ue,new b(h,f)),this._addCollisionDebugVertex(V,J,x,re,ue,new b(n,f)),I.vertexLength+=4;const me=y.indexArray;me.emplaceBack(F,F+1),me.emplaceBack(F+1,F+2),me.emplaceBack(F+2,F+3),me.emplaceBack(F+3,F),I.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,f){for(let y=n;y<s;y++){const x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qy(ii,Ew.members,cr),this.iconCollisionBox=new qy(ii,Ew.members,cr);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,f,y,x,w,I,F){const V={};for(let J=s;J<h;J++){const re=n.get(J);V.textBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},V.textFeatureIndex=re.featureIndex;break}for(let J=f;J<y;J++){const re=n.get(J);V.verticalTextBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},V.verticalTextFeatureIndex=re.featureIndex;break}for(let J=x;J<w;J++){const re=n.get(J);V.iconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},V.iconFeatureIndex=re.featureIndex;break}for(let J=I;J<F;J++){const re=n.get(J);V.verticalIconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},V.verticalIconFeatureIndex=re.featureIndex;break}return V}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),f=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<f;y+=4)n.indexArray.emplaceBack(y,y+1,y+2),n.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),f=[],y=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const I=this.symbolInstances.get(w);f.push(0|Math.round(s*I.anchorX+h*I.anchorY)),y.push(I.featureIndex)}return x.sort((w,I)=>f[w]-f[I]||y[I]-y[w]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((f,y,x)=>{f>=0&&x.indexOf(f)===y&&this.addIndicesForPlacedSymbol(this.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let $w,Vw;Ut("SymbolBucket",Nc,{omit:["layers","collisionBoxArray","features","compareText"]}),Nc.MAX_GLYPHS=65535,Nc.addDynamicAttributes=Xy;var Jy={get paint(){return Vw=Vw||new d({"icon-opacity":new an(et.paint_symbol["icon-opacity"]),"icon-color":new an(et.paint_symbol["icon-color"]),"icon-halo-color":new an(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new an(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new an(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Yt(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yt(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new an(et.paint_symbol["text-opacity"]),"text-color":new an(et.paint_symbol["text-color"],{runtimeType:yn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new an(et.paint_symbol["text-halo-color"]),"text-halo-width":new an(et.paint_symbol["text-halo-width"]),"text-halo-blur":new an(et.paint_symbol["text-halo-blur"]),"text-translate":new Yt(et.paint_symbol["text-translate"]),"text-translate-anchor":new Yt(et.paint_symbol["text-translate-anchor"])})},get layout(){return $w=$w||new d({"symbol-placement":new Yt(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Yt(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yt(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new an(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yt(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yt(et.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Yt(et.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Yt(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yt(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yt(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new an(et.layout_symbol["icon-size"]),"icon-text-fit":new Yt(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yt(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new an(et.layout_symbol["icon-image"]),"icon-rotate":new an(et.layout_symbol["icon-rotate"]),"icon-padding":new an(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Yt(et.layout_symbol["icon-keep-upright"]),"icon-offset":new an(et.layout_symbol["icon-offset"]),"icon-anchor":new an(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yt(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yt(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yt(et.layout_symbol["text-rotation-alignment"]),"text-field":new an(et.layout_symbol["text-field"]),"text-font":new an(et.layout_symbol["text-font"]),"text-size":new an(et.layout_symbol["text-size"]),"text-max-width":new an(et.layout_symbol["text-max-width"]),"text-line-height":new Yt(et.layout_symbol["text-line-height"]),"text-letter-spacing":new an(et.layout_symbol["text-letter-spacing"]),"text-justify":new an(et.layout_symbol["text-justify"]),"text-radial-offset":new an(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yt(et.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new an(et.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new an(et.layout_symbol["text-anchor"]),"text-max-angle":new Yt(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Yt(et.layout_symbol["text-writing-mode"]),"text-rotate":new an(et.layout_symbol["text-rotate"]),"text-padding":new Yt(et.layout_symbol["text-padding"]),"text-keep-upright":new Yt(et.layout_symbol["text-keep-upright"]),"text-transform":new an(et.layout_symbol["text-transform"]),"text-offset":new an(et.layout_symbol["text-offset"]),"text-allow-overlap":new Yt(et.layout_symbol["text-allow-overlap"]),"text-overlap":new Yt(et.layout_symbol["text-overlap"]),"text-ignore-placement":new Yt(et.layout_symbol["text-ignore-placement"]),"text-optional":new Yt(et.layout_symbol["text-optional"])})}};class Gw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:rt,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",Gw,{omit:["defaultValue"]});class Bp extends _{constructor(n){super(n,Jy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const f=[];for(const y of h)f.indexOf(y)<0&&f.push(y);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,f){const y=this.layout.get(n).evaluate(s,{},h,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||kt(x.value)||!y?y:function(w,I){return I.replace(/{([^{}]+)}/g,(F,V)=>w&&V in w?String(w[V]):"")}(s.properties,y)}createBucket(n){return new Nc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Jy.paint.overridableProperties){if(!Bp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Gw(s),f=new ut(h,s.property.specification);let y=null;y=s.value.kind==="constant"||s.value.kind==="source"?new Ht("source",f):new Jt("composite",f,s.value.zoomStops),this.paint._values[n]=new ns(s.property,y,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Bp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),f=Jy.paint.properties[s];let y=!1;const x=w=>{for(const I of w)if(f.overrides&&f.overrides.hasOverride(I))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Tr)x(h.value.value.sections);else if(h.value.kind==="source"){const w=F=>{y||(F instanceof ps&&vr(F.value)===ei?x(F.value.sections):F instanceof fl?x(F.sections):F.eachChild(w))},I=h.value;I._styleExpression&&w(I._styleExpression.expression)}return y}}let Zw;var hM={get paint(){return Zw=Zw||new d({"background-color":new Yt(et.paint_background["background-color"]),"background-pattern":new r(et.paint_background["background-pattern"]),"background-opacity":new Yt(et.paint_background["background-opacity"])})}};class dM extends _{constructor(n){super(n,hM)}}let Ww;var fM={get paint(){return Ww=Ww||new d({"raster-opacity":new Yt(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yt(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yt(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yt(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Yt(et.paint_raster["raster-saturation"]),"raster-contrast":new Yt(et.paint_raster["raster-contrast"]),"raster-resampling":new Yt(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Yt(et.paint_raster["raster-fade-duration"])})}};class pM extends _{constructor(n){super(n,fM)}}class mM extends _{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class gM{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Yy=63710088e-1;class zl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zl(W(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,f=n.lat*s,y=Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos((n.lng-this.lng)*s);return Yy*Math.acos(Math.min(y,1))}static convert(n){if(n instanceof zl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new zl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new zl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Hw=2*Math.PI*Yy;function Xw(o){return Hw*Math.cos(o*Math.PI/180)}function Kw(o){return(180+o)/360}function qw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Jw(o,n){return o/Xw(n)}function Qy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Np{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=zl.convert(n);return new Np(Kw(h.lng),qw(h.lat),Jw(s,h.lat))}toLngLat(){return new zl(360*this.x-180,Qy(this.y))}toAltitude(){return this.z*Xw(Qy(this.y))}meterInMercatorCoordinateUnits(){return 1/Hw*(n=Qy(this.y),1/Math.cos(n*Math.PI/180));var n}}function Yw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class e0{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Ld(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const f=(x=this.y,w=this.z,I=Yw(256*(y=this.x),256*(x=Math.pow(2,w)-x-1),w),F=Yw(256*(y+1),256*(x+1),w),I[0]+","+I[1]+","+F[0]+","+F[1]);var y,x,w,I,F;const V=function(J,re,ue){let me,Te="";for(let Re=J;Re>0;Re--)me=1<<Re-1,Te+=(re&me?1:0)+(ue&me?2:0);return Te}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new b((n.x*s-this.x)*Rr,(n.y*s-this.y)*Rr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Qw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Ld(n,s.z,s.z,s.x,s.y)}}class Mo{constructor(n,s,h,f,y){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new e0(h,+f,+y),this.key=Ld(s,n,h,f,y)}clone(){return new Mo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Mo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Ld(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Ld(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Mo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,f=2*this.canonical.y;return[new Mo(s,this.wrap,s,h,f),new Mo(s,this.wrap,s,h+1,f),new Mo(s,this.wrap,s,h,f+1),new Mo(s,this.wrap,s,h+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Mo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Mo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Qw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Np(n.x-this.wrap,n.y))}}function Ld(o,n,s,h,f){(o*=2)<0&&(o=-1*o-1);const y=1<<s;return(y*y*o+y*f+h).toString(36)+s.toString(36)+n.toString(36)}Ut("CanonicalTileID",e0),Ut("OverscaledTileID",Mo,{omit:["posMatrix"]});class eb{constructor(n,s,h,f=1,y=1,x=1,w=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=y,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<I;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(I,F)]=this.data[this._idx(I-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,I)]=this.data[this._idx(F,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<I;F++)for(let V=0;V<I;V++){const J=this.get(F,V);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(n,s){const h=new Uint8Array(this.data.buffer),f=4*this._idx(n,s);return this.unpack(h[f],h[f+1],h[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,y=s*this.dim+this.dim,x=h*this.dim,w=h*this.dim+this.dim;switch(s){case-1:f=y-1;break;case 1:y=f+1}switch(h){case-1:x=w-1;break;case 1:w=x+1}const I=-s*this.dim,F=-h*this.dim;for(let V=x;V<w;V++)for(let J=f;J<y;J++)this.data[this._idx(J,V)]=n.data[this._idx(J+I,V+F)]}}Ut("DEMData",eb);class tb{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class nb{constructor(n,s,h,f,y){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=f,this.properties=n.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class rb{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new wl(Rr,16,0),this.grid3D=new wl(Rr,16,0),this.featureIndexArray=new Po,this.promoteId=s}insert(n,s,h,f,y,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,f,y);const I=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const V=s[F],J=[1/0,1/0,-1/0,-1/0];for(let re=0;re<V.length;re++){const ue=V[re];J[0]=Math.min(J[0],ue.x),J[1]=Math.min(J[1],ue.y),J[2]=Math.max(J[2],ue.x),J[3]=Math.max(J[3],ue.y)}J[0]<Rr&&J[1]<Rr&&J[2]>=0&&J[3]>=0&&I.insert(w,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Al.VectorTile(new $y(this.rawTileData)).layers,this.sourceLayerCoder=new tb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,f){this.loadVTLayers();const y=n.params||{},x=Rr/n.tileSize/n.scale,w=Un(y.filter),I=n.queryGeometry,F=n.queryPadding*x,V=ob(I),J=this.grid.query(V.minX-F,V.minY-F,V.maxX+F,V.maxY+F),re=ob(n.cameraQueryGeometry),ue=this.grid3D.query(re.minX-F,re.minY-F,re.maxX+F,re.maxY+F,(Re,Ne,Qe,He)=>function(Ye,lt,_t,Ft,rn){for(const zt of Ye)if(lt<=zt.x&&_t<=zt.y&&Ft>=zt.x&&rn>=zt.y)return!0;const Ot=[new b(lt,_t),new b(lt,rn),new b(Ft,rn),new b(Ft,_t)];if(Ye.length>2){for(const zt of Ot)if(Fc(Ye,zt))return!0}for(let zt=0;zt<Ye.length-1;zt++)if(qI(Ye[zt],Ye[zt+1],Ot))return!0;return!1}(n.cameraQueryGeometry,Re-F,Ne-F,Qe+F,He+F));for(const Re of ue)J.push(Re);J.sort(yM);const me={};let Te;for(let Re=0;Re<J.length;Re++){const Ne=J[Re];if(Ne===Te)continue;Te=Ne;const Qe=this.featureIndexArray.get(Ne);let He=null;this.loadMatchingFeature(me,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,w,y.layers,y.availableImages,s,h,f,(Ye,lt,_t)=>(He||(He=zu(Ye)),lt.queryIntersectsFeature(I,Ye,_t,He,this.z,n.transform,x,n.pixelPosMatrix)))}return me}loadMatchingFeature(n,s,h,f,y,x,w,I,F,V,J){const re=this.bucketLayerIDs[s];if(x&&!function(Re,Ne){for(let Qe=0;Qe<Re.length;Qe++)if(Ne.indexOf(Re[Qe])>=0)return!0;return!1}(x,re))return;const ue=this.sourceLayerCoder.decode(h),me=this.vtLayers[ue].feature(f);if(y.needGeometry){const Re=Fu(me,!0);if(!y.filter(new Qn(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!y.filter(new Qn(this.tileID.overscaledZ),me))return;const Te=this.getId(me,ue);for(let Re=0;Re<re.length;Re++){const Ne=re[Re];if(x&&x.indexOf(Ne)<0)continue;const Qe=I[Ne];if(!Qe)continue;let He={};Te&&V&&(He=V.getState(Qe.sourceLayer||"_geojsonTileLayer",Te));const Ye=E({},F[Ne]);Ye.paint=ib(Ye.paint,Qe.paint,me,He,w),Ye.layout=ib(Ye.layout,Qe.layout,me,He,w);const lt=!J||J(me,Qe,He);if(!lt)continue;const _t=new nb(me,this.z,this.x,this.y,Te);_t.layer=Ye;let Ft=n[Ne];Ft===void 0&&(Ft=n[Ne]=[]),Ft.push({featureIndex:f,feature:_t,intersectionZ:lt})}}lookupSymbolFeatures(n,s,h,f,y,x,w,I){const F={};this.loadVTLayers();const V=Un(y);for(const J of n)this.loadMatchingFeature(F,h,f,J,V,x,w,I,s);return F}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function ib(o,n,s,h,f){return D(o,(y,x)=>{const w=n instanceof Cc?n.get(x):null;return w&&w.evaluate?w.evaluate(s,h,f):w})}function ob(o){let n=1/0,s=1/0,h=-1/0,f=-1/0;for(const y of o)n=Math.min(n,y.x),s=Math.min(s,y.y),h=Math.max(h,y.x),f=Math.max(f,y.y);return{minX:n,minY:s,maxX:h,maxY:f}}function yM(o,n){return n-o}function sb(o,n,s,h,f){const y=[];for(let x=0;x<o.length;x++){const w=o[x];let I;for(let F=0;F<w.length-1;F++){let V=w[F],J=w[F+1];V.x<n&&J.x<n||(V.x<n?V=new b(n,V.y+(n-V.x)/(J.x-V.x)*(J.y-V.y))._round():J.x<n&&(J=new b(n,V.y+(n-V.x)/(J.x-V.x)*(J.y-V.y))._round()),V.y<s&&J.y<s||(V.y<s?V=new b(V.x+(s-V.y)/(J.y-V.y)*(J.x-V.x),s)._round():J.y<s&&(J=new b(V.x+(s-V.y)/(J.y-V.y)*(J.x-V.x),s)._round()),V.x>=h&&J.x>=h||(V.x>=h?V=new b(h,V.y+(h-V.x)/(J.x-V.x)*(J.y-V.y))._round():J.x>=h&&(J=new b(h,V.y+(h-V.x)/(J.x-V.x)*(J.y-V.y))._round()),V.y>=f&&J.y>=f||(V.y>=f?V=new b(V.x+(f-V.y)/(J.y-V.y)*(J.x-V.x),f)._round():J.y>=f&&(J=new b(V.x+(f-V.y)/(J.y-V.y)*(J.x-V.x),f)._round()),I&&V.equals(I[I.length-1])||(I=[V],y.push(I)),I.push(J)))))}}return y}Ut("FeatureIndex",rb,{omit:["rawTileData","sourceLayerCoder"]});class Fl extends b{constructor(n,s,h,f){super(n,s),this.angle=h,f!==void 0&&(this.segment=f)}clone(){return new Fl(this.x,this.y,this.angle,this.segment)}}function ab(o,n,s,h,f){if(n.segment===void 0||s===0)return!0;let y=n,x=n.segment+1,w=0;for(;w>-s/2;){if(x--,x<0)return!1;w-=o[x].dist(y),y=o[x]}w+=o[x].dist(o[x+1]),x++;const I=[];let F=0;for(;w<s/2;){const V=o[x],J=o[x+1];if(!J)return!1;let re=o[x-1].angleTo(V)-V.angleTo(J);for(re=Math.abs((re+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:w,angleDelta:re}),F+=re;w-I[0].distance>h;)F-=I.shift().angleDelta;if(F>f)return!1;x++,w+=V.dist(J)}return!0}function lb(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function ub(o,n,s){return o?.6*n*s:0}function cb(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function vM(o,n,s,h,f,y){const x=ub(s,f,y),w=cb(s,h)*y;let I=0;const F=lb(o)/2;for(let V=0;V<o.length-1;V++){const J=o[V],re=o[V+1],ue=J.dist(re);if(I+ue>F){const me=(F-I)/ue,Te=yi.number(J.x,re.x,me),Re=yi.number(J.y,re.y,me),Ne=new Fl(Te,Re,re.angleTo(J),V);return Ne._round(),!x||ab(o,Ne,w,x,n)?Ne:void 0}I+=ue}}function _M(o,n,s,h,f,y,x,w,I){const F=ub(h,y,x),V=cb(h,f),J=V*x,re=o[0].x===0||o[0].x===I||o[0].y===0||o[0].y===I;return n-J<n/4&&(n=J+n/4),hb(o,re?n/2*w%n:(V/2+2*y)*x*w%n,n,F,s,J,re,!1,I)}function hb(o,n,s,h,f,y,x,w,I){const F=y/2,V=lb(o);let J=0,re=n-s,ue=[];for(let me=0;me<o.length-1;me++){const Te=o[me],Re=o[me+1],Ne=Te.dist(Re),Qe=Re.angleTo(Te);for(;re+s<J+Ne;){re+=s;const He=(re-J)/Ne,Ye=yi.number(Te.x,Re.x,He),lt=yi.number(Te.y,Re.y,He);if(Ye>=0&&Ye<I&&lt>=0&&lt<I&&re-F>=0&&re+F<=V){const _t=new Fl(Ye,lt,Qe,me);_t._round(),h&&!ab(o,_t,y,h,f)||ue.push(_t)}}J+=Ne}return w||ue.length||x||(ue=hb(o,J/2,s,h,f,y,x,!0,I)),ue}Ut("Anchor",Fl);const Uc=Zi;function db(o,n,s,h){const f=[],y=o.image,x=y.pixelRatio,w=y.paddedRect.w-2*Uc,I=y.paddedRect.h-2*Uc;let F={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const V=y.stretchX||[[0,w]],J=y.stretchY||[[0,I]],re=(ft,Qt)=>ft+Qt[1]-Qt[0],ue=V.reduce(re,0),me=J.reduce(re,0),Te=w-ue,Re=I-me;let Ne=0,Qe=ue,He=0,Ye=me,lt=0,_t=Te,Ft=0,rn=Re;if(y.content&&h){const ft=y.content,Qt=ft[2]-ft[0],Xt=ft[3]-ft[1];(y.textFitWidth||y.textFitHeight)&&(F=Bw(o)),Ne=Up(V,0,ft[0]),He=Up(J,0,ft[1]),Qe=Up(V,ft[0],ft[2]),Ye=Up(J,ft[1],ft[3]),lt=ft[0]-Ne,Ft=ft[1]-He,_t=Qt-Qe,rn=Xt-Ye}const Ot=F.x1,zt=F.y1,qt=F.x2-Ot,$t=F.y2-zt,Nt=(ft,Qt,Xt,dn)=>{const qn=$p(ft.stretch-Ne,Qe,qt,Ot),Hn=Vp(ft.fixed-lt,_t,ft.stretch,ue),Wr=$p(Qt.stretch-He,Ye,$t,zt),rs=Vp(Qt.fixed-Ft,rn,Qt.stretch,me),ai=$p(Xt.stretch-Ne,Qe,qt,Ot),xr=Vp(Xt.fixed-lt,_t,Xt.stretch,ue),Ri=$p(dn.stretch-He,Ye,$t,zt),ji=Vp(dn.fixed-Ft,rn,dn.stretch,me),Oi=new b(qn,Wr),wr=new b(ai,Wr),Hr=new b(ai,Ri),bi=new b(qn,Ri),li=new b(Hn/x,rs/x),Li=new b(xr/x,ji/x),ui=n*Math.PI/180;if(ui){const jn=Math.sin(ui),er=Math.cos(ui),lr=[er,-jn,jn,er];Oi._matMult(lr),wr._matMult(lr),bi._matMult(lr),Hr._matMult(lr)}const ko=ft.stretch+ft.fixed,Wi=Qt.stretch+Qt.fixed;return{tl:Oi,tr:wr,bl:bi,br:Hr,tex:{x:y.paddedRect.x+Uc+ko,y:y.paddedRect.y+Uc+Wi,w:Xt.stretch+Xt.fixed-ko,h:dn.stretch+dn.fixed-Wi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:li,pixelOffsetBR:Li,minFontScaleX:_t/x/qt,minFontScaleY:rn/x/$t,isSDF:s}};if(h&&(y.stretchX||y.stretchY)){const ft=fb(V,Te,ue),Qt=fb(J,Re,me);for(let Xt=0;Xt<ft.length-1;Xt++){const dn=ft[Xt],qn=ft[Xt+1];for(let Hn=0;Hn<Qt.length-1;Hn++)f.push(Nt(dn,Qt[Hn],qn,Qt[Hn+1]))}}else f.push(Nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:I+1}));return f}function Up(o,n,s){let h=0;for(const f of o)h+=Math.max(n,Math.min(s,f[1]))-Math.max(n,Math.min(s,f[0]));return h}function fb(o,n,s){const h=[{fixed:-Uc,stretch:0}];for(const[f,y]of o){const x=h[h.length-1];h.push({fixed:f-x.stretch,stretch:x.stretch}),h.push({fixed:f-x.stretch,stretch:x.stretch+(y-f)})}return h.push({fixed:n+Uc,stretch:s}),h}function $p(o,n,s,h){return o/n*s+h}function Vp(o,n,s,h){return o-n*s/h}class Gp{constructor(n,s,h,f,y,x,w,I,F,V){var J;if(this.boxStartIndex=n.length,F){let re=x.top,ue=x.bottom;const me=x.collisionPadding;me&&(re-=me[1],ue+=me[3]);let Te=ue-re;Te>0&&(Te=Math.max(10,Te),this.circleDiameter=Te)}else{const re=!((J=x.image)===null||J===void 0)&&J.content&&(x.image.textFitWidth||x.image.textFitHeight)?Bw(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};re.y1=re.y1*w-I[0],re.y2=re.y2*w+I[2],re.x1=re.x1*w-I[3],re.x2=re.x2*w+I[1];const ue=x.collisionPadding;if(ue&&(re.x1-=ue[0]*w,re.y1-=ue[1]*w,re.x2+=ue[2]*w,re.y2+=ue[3]*w),V){const me=new b(re.x1,re.y1),Te=new b(re.x2,re.y1),Re=new b(re.x1,re.y2),Ne=new b(re.x2,re.y2),Qe=V*Math.PI/180;me._rotate(Qe),Te._rotate(Qe),Re._rotate(Qe),Ne._rotate(Qe),re.x1=Math.min(me.x,Te.x,Re.x,Ne.x),re.x2=Math.max(me.x,Te.x,Re.x,Ne.x),re.y1=Math.min(me.y,Te.y,Re.y,Ne.y),re.y2=Math.max(me.y,Te.y,Re.y,Ne.y)}n.emplaceBack(s.x,s.y,re.x1,re.y1,re.x2,re.y2,h,f,y)}this.boxEndIndex=n.length}}class xM{constructor(n=[],s=wM){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,f=s[n];for(;n>0;){const y=n-1>>1,x=s[y];if(h(f,x)>=0)break;s[n]=x,n=y}s[n]=f}_down(n){const{data:s,compare:h}=this,f=this.length>>1,y=s[n];for(;n<f;){let x=1+(n<<1),w=s[x];const I=x+1;if(I<this.length&&h(s[I],w)<0&&(x=I,w=s[I]),h(w,y)>=0)break;s[n]=w,n=x}s[n]=y}}function wM(o,n){return o<n?-1:o>n?1:0}function bM(o,n=1,s=!1){let h=1/0,f=1/0,y=-1/0,x=-1/0;const w=o[0];for(let ue=0;ue<w.length;ue++){const me=w[ue];(!ue||me.x<h)&&(h=me.x),(!ue||me.y<f)&&(f=me.y),(!ue||me.x>y)&&(y=me.x),(!ue||me.y>x)&&(x=me.y)}const I=Math.min(y-h,x-f);let F=I/2;const V=new xM([],SM);if(I===0)return new b(h,f);for(let ue=h;ue<y;ue+=I)for(let me=f;me<x;me+=I)V.push(new $c(ue+F,me+F,F,o));let J=function(ue){let me=0,Te=0,Re=0;const Ne=ue[0];for(let Qe=0,He=Ne.length,Ye=He-1;Qe<He;Ye=Qe++){const lt=Ne[Qe],_t=Ne[Ye],Ft=lt.x*_t.y-_t.x*lt.y;Te+=(lt.x+_t.x)*Ft,Re+=(lt.y+_t.y)*Ft,me+=3*Ft}return new $c(Te/me,Re/me,0,ue)}(o),re=V.length;for(;V.length;){const ue=V.pop();(ue.d>J.d||!J.d)&&(J=ue,s&&console.log("found best %d after %d probes",Math.round(1e4*ue.d)/1e4,re)),ue.max-J.d<=n||(F=ue.h/2,V.push(new $c(ue.p.x-F,ue.p.y-F,F,o)),V.push(new $c(ue.p.x+F,ue.p.y-F,F,o)),V.push(new $c(ue.p.x-F,ue.p.y+F,F,o)),V.push(new $c(ue.p.x+F,ue.p.y+F,F,o)),re+=4)}return s&&(console.log(`num probes: ${re}`),console.log(`best distance: ${J.d}`)),J.p}function SM(o,n){return n.max-o.max}function $c(o,n,s,h){this.p=new b(o,n),this.h=s,this.d=function(f,y){let x=!1,w=1/0;for(let I=0;I<y.length;I++){const F=y[I];for(let V=0,J=F.length,re=J-1;V<J;re=V++){const ue=F[V],me=F[re];ue.y>f.y!=me.y>f.y&&f.x<(me.x-ue.x)*(f.y-ue.y)/(me.y-ue.y)+ue.x&&(x=!x),w=Math.min(w,qx(f,ue,me))}}return(x?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var si;m.ar=void 0,(si=m.ar||(m.ar={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const Rl=7,t0=Number.POSITIVE_INFINITY;function pb(o,n){return n[1]!==t0?function(s,h,f){let y=0,x=0;switch(h=Math.abs(h),f=Math.abs(f),s){case"top-right":case"top-left":case"top":x=f-Rl;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Rl}switch(s){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,x]}(o,n[0],n[1]):function(s,h){let f=0,y=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":y=x-Rl;break;case"bottom-right":case"bottom-left":y=-x+Rl;break;case"bottom":y=-h+Rl;break;case"top":y=h-Rl}switch(s){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=h;break;case"right":f=-h}return[f,y]}(o,n[0])}function mb(o,n,s){var h;const f=o.layout,y=(h=f.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(y){const w=y.values,I=[];for(let F=0;F<w.length;F+=2){const V=I[F]=w[F],J=w[F+1].map(re=>re*Br);V.startsWith("top")?J[1]-=Rl:V.startsWith("bottom")&&(J[1]+=Rl),I[F+1]=J}return new pi(I)}const x=f.get("text-variable-anchor");if(x){let w;w=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},s)*Br,t0]:f.get("text-offset").evaluate(n,{},s).map(F=>F*Br);const I=[];for(const F of x)I.push(F,pb(F,w));return new pi(I)}return null}function n0(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function EM(o,n,s,h,f,y,x,w,I,F,V){let J=y.textMaxSize.evaluate(n,{});J===void 0&&(J=x);const re=o.layers[0].layout,ue=re.get("icon-offset").evaluate(n,{},V),me=yb(s.horizontal),Te=x/24,Re=o.tilePixelRatio*Te,Ne=o.tilePixelRatio*J/24,Qe=o.tilePixelRatio*w,He=o.tilePixelRatio*re.get("symbol-spacing"),Ye=re.get("text-padding")*o.tilePixelRatio,lt=function(ft,Qt,Xt,dn=1){const qn=ft.get("icon-padding").evaluate(Qt,{},Xt),Hn=qn&&qn.values;return[Hn[0]*dn,Hn[1]*dn,Hn[2]*dn,Hn[3]*dn]}(re,n,V,o.tilePixelRatio),_t=re.get("text-max-angle")/180*Math.PI,Ft=re.get("text-rotation-alignment")!=="viewport"&&re.get("symbol-placement")!=="point",rn=re.get("icon-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",Ot=re.get("symbol-placement"),zt=He/2,qt=re.get("icon-text-fit");let $t;h&&qt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&($t=Nw(h,s.vertical,qt,re.get("icon-text-fit-padding"),ue,Te)),me&&(h=Nw(h,me,qt,re.get("icon-text-fit-padding"),ue,Te)));const Nt=(ft,Qt)=>{Qt.x<0||Qt.x>=Rr||Qt.y<0||Qt.y>=Rr||function(Xt,dn,qn,Hn,Wr,rs,ai,xr,Ri,ji,Oi,wr,Hr,bi,li,Li,ui,ko,Wi,jn,er,lr,lo,pr,Vc){const ta=Xt.addToLineVertexArray(dn,qn);let na,is,zo,Jr,La=0,Nd=0,wb=0,bb=0,c0=-1,h0=-1;const Da={};let Sb=kc("");if(Xt.allowVerticalPlacement&&Hn.vertical){const Si=xr.layout.get("text-rotate").evaluate(er,{},pr)+90;zo=new Gp(Ri,dn,ji,Oi,wr,Hn.vertical,Hr,bi,li,Si),ai&&(Jr=new Gp(Ri,dn,ji,Oi,wr,ai,ui,ko,li,Si))}if(Wr){const Si=xr.layout.get("icon-rotate").evaluate(er,{}),Fo=xr.layout.get("icon-text-fit")!=="none",ju=db(Wr,Si,lo,Fo),Ps=ai?db(ai,Si,lo,Fo):void 0;is=new Gp(Ri,dn,ji,Oi,wr,Wr,ui,ko,!1,Si),La=4*ju.length;const Ou=Xt.iconSizeData;let ra=null;Ou.kind==="source"?(ra=[ea*xr.layout.get("icon-size").evaluate(er,{})],ra[0]>kl&&_e(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Od}. Reduce your "icon-size".`)):Ou.kind==="composite"&&(ra=[ea*lr.compositeIconSizes[0].evaluate(er,{},pr),ea*lr.compositeIconSizes[1].evaluate(er,{},pr)],(ra[0]>kl||ra[1]>kl)&&_e(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Od}. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,ju,ra,jn,Wi,er,m.ai.none,dn,ta.lineStartIndex,ta.lineLength,-1,pr),c0=Xt.icon.placedSymbolArray.length-1,Ps&&(Nd=4*Ps.length,Xt.addSymbols(Xt.icon,Ps,ra,jn,Wi,er,m.ai.vertical,dn,ta.lineStartIndex,ta.lineLength,-1,pr),h0=Xt.icon.placedSymbolArray.length-1)}const Eb=Object.keys(Hn.horizontal);for(const Si of Eb){const Fo=Hn.horizontal[Si];if(!na){Sb=kc(Fo.text);const Ps=xr.layout.get("text-rotate").evaluate(er,{},pr);na=new Gp(Ri,dn,ji,Oi,wr,Fo,Hr,bi,li,Ps)}const ju=Fo.positionedLines.length===1;if(wb+=gb(Xt,dn,Fo,rs,xr,li,er,Li,ta,Hn.vertical?m.ai.horizontal:m.ai.horizontalOnly,ju?Eb:[Si],Da,c0,lr,pr),ju)break}Hn.vertical&&(bb+=gb(Xt,dn,Hn.vertical,rs,xr,li,er,Li,ta,m.ai.vertical,["vertical"],Da,h0,lr,pr));const PM=na?na.boxStartIndex:Xt.collisionBoxArray.length,IM=na?na.boxEndIndex:Xt.collisionBoxArray.length,AM=zo?zo.boxStartIndex:Xt.collisionBoxArray.length,MM=zo?zo.boxEndIndex:Xt.collisionBoxArray.length,kM=is?is.boxStartIndex:Xt.collisionBoxArray.length,zM=is?is.boxEndIndex:Xt.collisionBoxArray.length,FM=Jr?Jr.boxStartIndex:Xt.collisionBoxArray.length,RM=Jr?Jr.boxEndIndex:Xt.collisionBoxArray.length;let Cs=-1;const Wp=(Si,Fo)=>Si&&Si.circleDiameter?Math.max(Si.circleDiameter,Fo):Fo;Cs=Wp(na,Cs),Cs=Wp(zo,Cs),Cs=Wp(is,Cs),Cs=Wp(Jr,Cs);const Tb=Cs>-1?1:0;Tb&&(Cs*=Vc/Br),Xt.glyphOffsetArray.length>=Nc.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),er.sortKey!==void 0&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,er.sortKey);const jM=mb(xr,er,pr),[OM,LM]=function(Si,Fo){const ju=Si.length,Ps=Fo==null?void 0:Fo.values;if((Ps==null?void 0:Ps.length)>0)for(let Ou=0;Ou<Ps.length;Ou+=2){const ra=Ps[Ou+1];Si.emplaceBack(m.ar[Ps[Ou]],ra[0],ra[1])}return[ju,Si.length]}(Xt.textAnchorOffsets,jM);Xt.symbolInstances.emplaceBack(dn.x,dn.y,Da.right>=0?Da.right:-1,Da.center>=0?Da.center:-1,Da.left>=0?Da.left:-1,Da.vertical||-1,c0,h0,Sb,PM,IM,AM,MM,kM,zM,FM,RM,ji,wb,bb,La,Nd,Tb,0,Hr,Cs,OM,LM)}(o,Qt,ft,s,h,f,$t,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Re,[Ye,Ye,Ye,Ye],Ft,I,Qe,lt,rn,ue,n,y,F,V,x)};if(Ot==="line")for(const ft of sb(n.geometry,0,0,Rr,Rr)){const Qt=_M(ft,He,_t,s.vertical||me,h,24,Ne,o.overscaling,Rr);for(const Xt of Qt)me&&TM(o,me.text,zt,Xt)||Nt(ft,Xt)}else if(Ot==="line-center"){for(const ft of n.geometry)if(ft.length>1){const Qt=vM(ft,_t,s.vertical||me,h,24,Ne);Qt&&Nt(ft,Qt)}}else if(n.type==="Polygon")for(const ft of vl(n.geometry,0)){const Qt=bM(ft,16);Nt(ft[0],new Fl(Qt.x,Qt.y,0))}else if(n.type==="LineString")for(const ft of n.geometry)Nt(ft,new Fl(ft[0].x,ft[0].y,0));else if(n.type==="Point")for(const ft of n.geometry)for(const Qt of ft)Nt([Qt],new Fl(Qt.x,Qt.y,0))}function gb(o,n,s,h,f,y,x,w,I,F,V,J,re,ue,me){const Te=function(Qe,He,Ye,lt,_t,Ft,rn,Ot){const zt=lt.layout.get("text-rotate").evaluate(Ft,{})*Math.PI/180,qt=[];for(const $t of He.positionedLines)for(const Nt of $t.positionedGlyphs){if(!Nt.rect)continue;const ft=Nt.rect||{};let Qt=zw+1,Xt=!0,dn=1,qn=0;const Hn=(_t||Ot)&&Nt.vertical,Wr=Nt.metrics.advance*Nt.scale/2;if(Ot&&He.verticalizable&&(qn=$t.lineOffset/2-(Nt.imageName?-(Br-Nt.metrics.width*Nt.scale)/2:(Nt.scale-1)*Br)),Nt.imageName){const jn=rn[Nt.imageName];Xt=jn.sdf,dn=jn.pixelRatio,Qt=Zi/dn}const rs=_t?[Nt.x+Wr,Nt.y]:[0,0];let ai=_t?[0,0]:[Nt.x+Wr+Ye[0],Nt.y+Ye[1]-qn],xr=[0,0];Hn&&(xr=ai,ai=[0,0]);const Ri=Nt.metrics.isDoubleResolution?2:1,ji=(Nt.metrics.left-Qt)*Nt.scale-Wr+ai[0],Oi=(-Nt.metrics.top-Qt)*Nt.scale+ai[1],wr=ji+ft.w/Ri*Nt.scale/dn,Hr=Oi+ft.h/Ri*Nt.scale/dn,bi=new b(ji,Oi),li=new b(wr,Oi),Li=new b(ji,Hr),ui=new b(wr,Hr);if(Hn){const jn=new b(-Wr,Wr-Rd),er=-Math.PI/2,lr=Br/2-Wr,lo=new b(5-Rd-lr,-(Nt.imageName?lr:0)),pr=new b(...xr);bi._rotateAround(er,jn)._add(lo)._add(pr),li._rotateAround(er,jn)._add(lo)._add(pr),Li._rotateAround(er,jn)._add(lo)._add(pr),ui._rotateAround(er,jn)._add(lo)._add(pr)}if(zt){const jn=Math.sin(zt),er=Math.cos(zt),lr=[er,-jn,jn,er];bi._matMult(lr),li._matMult(lr),Li._matMult(lr),ui._matMult(lr)}const ko=new b(0,0),Wi=new b(0,0);qt.push({tl:bi,tr:li,bl:Li,br:ui,tex:ft,writingMode:He.writingMode,glyphOffset:rs,sectionIndex:Nt.sectionIndex,isSDF:Xt,pixelOffsetTL:ko,pixelOffsetBR:Wi,minFontScaleX:0,minFontScaleY:0})}return qt}(0,s,w,f,y,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ne=null;Re.kind==="source"?(Ne=[ea*f.layout.get("text-size").evaluate(x,{})],Ne[0]>kl&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Od}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ne=[ea*ue.compositeTextSizes[0].evaluate(x,{},me),ea*ue.compositeTextSizes[1].evaluate(x,{},me)],(Ne[0]>kl||Ne[1]>kl)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Od}. Reduce your "text-size".`)),o.addSymbols(o.text,Te,Ne,w,y,x,F,n,I.lineStartIndex,I.lineLength,re,me);for(const Qe of V)J[Qe]=o.text.placedSymbolArray.length-1;return 4*Te.length}function yb(o){for(const n in o)return o[n];return null}function TM(o,n,s,h){const f=o.compareText;if(n in f){const y=f[n];for(let x=y.length-1;x>=0;x--)if(h.dist(y[x])<s)return!0}else f[n]=[];return f[n].push(h),!1}const vb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class r0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=h>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const y=vb[15&h];if(!y)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new r0(w,x,y,n)}constructor(n,s=64,h=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const y=vb.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-w%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return i0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:w}=this,I=[0,y.length-1,0],F=[];for(;I.length;){const V=I.pop()||0,J=I.pop()||0,re=I.pop()||0;if(J-re<=w){for(let Re=re;Re<=J;Re++){const Ne=x[2*Re],Qe=x[2*Re+1];Ne>=n&&Ne<=h&&Qe>=s&&Qe<=f&&F.push(y[Re])}continue}const ue=re+J>>1,me=x[2*ue],Te=x[2*ue+1];me>=n&&me<=h&&Te>=s&&Te<=f&&F.push(y[ue]),(V===0?n<=me:s<=Te)&&(I.push(re),I.push(ue-1),I.push(1-V)),(V===0?h>=me:f>=Te)&&(I.push(ue+1),I.push(J),I.push(1-V))}return F}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:y,nodeSize:x}=this,w=[0,f.length-1,0],I=[],F=h*h;for(;w.length;){const V=w.pop()||0,J=w.pop()||0,re=w.pop()||0;if(J-re<=x){for(let Re=re;Re<=J;Re++)xb(y[2*Re],y[2*Re+1],n,s)<=F&&I.push(f[Re]);continue}const ue=re+J>>1,me=y[2*ue],Te=y[2*ue+1];xb(me,Te,n,s)<=F&&I.push(f[ue]),(V===0?n-h<=me:s-h<=Te)&&(w.push(re),w.push(ue-1),w.push(1-V)),(V===0?n+h>=me:s+h>=Te)&&(w.push(ue+1),w.push(J),w.push(1-V))}return I}}function i0(o,n,s,h,f,y){if(f-h<=s)return;const x=h+f>>1;_b(o,n,x,h,f,y),i0(o,n,s,h,x-1,1-y),i0(o,n,s,x+1,f,1-y)}function _b(o,n,s,h,f,y){for(;f>h;){if(f-h>600){const F=f-h+1,V=s-h+1,J=Math.log(F),re=.5*Math.exp(2*J/3),ue=.5*Math.sqrt(J*re*(F-re)/F)*(V-F/2<0?-1:1);_b(o,n,s,Math.max(h,Math.floor(s-V*re/F+ue)),Math.min(f,Math.floor(s+(F-V)*re/F+ue)),y)}const x=n[2*s+y];let w=h,I=f;for(Dd(o,n,h,s),n[2*f+y]>x&&Dd(o,n,h,f);w<I;){for(Dd(o,n,w,I),w++,I--;n[2*w+y]<x;)w++;for(;n[2*I+y]>x;)I--}n[2*h+y]===x?Dd(o,n,h,I):(I++,Dd(o,n,I,f)),I<=s&&(h=I+1),s<=I&&(f=I-1)}}function Dd(o,n,s,h){o0(o,s,h),o0(n,2*s,2*h),o0(n,2*s+1,2*h+1)}function o0(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function xb(o,n,s,h){const f=o-s,y=n-h;return f*f+y*y}var s0;m.bf=void 0,(s0=m.bf||(m.bf={})).create="create",s0.load="load",s0.fullLoad="fullLoad";let Zp=null,Bd=[];const a0=1e3/60,l0="loadTime",u0="fullLoadTime",CM={mark(o){performance.mark(o)},frame(o){const n=o;Zp!=null&&Bd.push(n-Zp),Zp=n},clearMetrics(){Zp=null,Bd=[],performance.clearMeasures(l0),performance.clearMeasures(u0);for(const o in m.bf)performance.clearMarks(m.bf[o])},getPerformanceMetrics(){performance.measure(l0,m.bf.create,m.bf.load),performance.measure(u0,m.bf.create,m.bf.fullLoad);const o=performance.getEntriesByName(l0)[0].duration,n=performance.getEntriesByName(u0)[0].duration,s=Bd.length,h=1/(Bd.reduce((y,x)=>y+x,0)/s/1e3),f=Bd.filter(y=>y>a0).reduce((y,x)=>y+(x-a0)/a0,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:f/(s+f)*100,totalFrames:s}}};m.$=class extends we{},m.A=Rc,m.B=dd,m.C=function(o){if(ce==null){const n=o.navigator?o.navigator.userAgent:null;ce=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ce},m.D=Yt,m.E=ln,m.F=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new gM(()=>this.process()),this.subscription=function(s,h,f,y){return s.addEventListener(h,f,!1),{unsubscribe:()=>{s.removeEventListener(h,f,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=oe(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,h)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:s,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const w={id:f,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const y=[],x=Object.assign(Object.assign({},o),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Iu(o.data,y)});this.target.postMessage(x,{transfer:y})})}receive(o){const n=o.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(oe(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const f=this.resolveRejects[o];return delete this.resolveRejects[o],f?void(n.error?f.reject(ts(n.error)):f.resolve(ts(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ts(n.data),h=new AbortController;this.abortControllers[o]=h;try{const f=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(o,null,f)}catch(f){this.completeTask(o,f)}})}completeTask(o,n,s){const h=[];delete this.abortControllers[o];const f={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Iu(n):null,data:Iu(s,h)};this.target.postMessage(f,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.G=Ze,m.H=function(){var o=new Rc(16);return Rc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},m.I=Gy,m.J=function(o,n,s){var h,f,y,x,w,I,F,V,J,re,ue,me,Te=s[0],Re=s[1],Ne=s[2];return n===o?(o[12]=n[0]*Te+n[4]*Re+n[8]*Ne+n[12],o[13]=n[1]*Te+n[5]*Re+n[9]*Ne+n[13],o[14]=n[2]*Te+n[6]*Re+n[10]*Ne+n[14],o[15]=n[3]*Te+n[7]*Re+n[11]*Ne+n[15]):(f=n[1],y=n[2],x=n[3],w=n[4],I=n[5],F=n[6],V=n[7],J=n[8],re=n[9],ue=n[10],me=n[11],o[0]=h=n[0],o[1]=f,o[2]=y,o[3]=x,o[4]=w,o[5]=I,o[6]=F,o[7]=V,o[8]=J,o[9]=re,o[10]=ue,o[11]=me,o[12]=h*Te+w*Re+J*Ne+n[12],o[13]=f*Te+I*Re+re*Ne+n[13],o[14]=y*Te+F*Re+ue*Ne+n[14],o[15]=x*Te+V*Re+me*Ne+n[15]),o},m.K=function(o,n,s){var h=s[0],f=s[1],y=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*f,o[5]=n[5]*f,o[6]=n[6]*f,o[7]=n[7]*f,o[8]=n[8]*y,o[9]=n[9]*y,o[10]=n[10]*y,o[11]=n[11]*y,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},m.L=ew,m.M=function(o,n){const s={};for(let h=0;h<n.length;h++){const f=n[h];f in o&&(s[f]=o[f])}return s},m.N=zl,m.O=Kw,m.P=b,m.Q=qw,m.R=Ao,m.S=Mo,m.T=Sl,m.U=q,m.V=X,m.W=de,m.X=Rr,m.Y=U,m.Z=Np,m._=u,m.a=Fe,m.a$=function(o,n){var s=o[0],h=o[1],f=o[2],y=o[3],x=o[4],w=o[5],I=o[6],F=o[7],V=o[8],J=o[9],re=o[10],ue=o[11],me=o[12],Te=o[13],Re=o[14],Ne=o[15],Qe=n[0],He=n[1],Ye=n[2],lt=n[3],_t=n[4],Ft=n[5],rn=n[6],Ot=n[7],zt=n[8],qt=n[9],$t=n[10],Nt=n[11],ft=n[12],Qt=n[13],Xt=n[14],dn=n[15];return Math.abs(s-Qe)<=Fi*Math.max(1,Math.abs(s),Math.abs(Qe))&&Math.abs(h-He)<=Fi*Math.max(1,Math.abs(h),Math.abs(He))&&Math.abs(f-Ye)<=Fi*Math.max(1,Math.abs(f),Math.abs(Ye))&&Math.abs(y-lt)<=Fi*Math.max(1,Math.abs(y),Math.abs(lt))&&Math.abs(x-_t)<=Fi*Math.max(1,Math.abs(x),Math.abs(_t))&&Math.abs(w-Ft)<=Fi*Math.max(1,Math.abs(w),Math.abs(Ft))&&Math.abs(I-rn)<=Fi*Math.max(1,Math.abs(I),Math.abs(rn))&&Math.abs(F-Ot)<=Fi*Math.max(1,Math.abs(F),Math.abs(Ot))&&Math.abs(V-zt)<=Fi*Math.max(1,Math.abs(V),Math.abs(zt))&&Math.abs(J-qt)<=Fi*Math.max(1,Math.abs(J),Math.abs(qt))&&Math.abs(re-$t)<=Fi*Math.max(1,Math.abs(re),Math.abs($t))&&Math.abs(ue-Nt)<=Fi*Math.max(1,Math.abs(ue),Math.abs(Nt))&&Math.abs(me-ft)<=Fi*Math.max(1,Math.abs(me),Math.abs(ft))&&Math.abs(Te-Qt)<=Fi*Math.max(1,Math.abs(Te),Math.abs(Qt))&&Math.abs(Re-Xt)<=Fi*Math.max(1,Math.abs(Re),Math.abs(Xt))&&Math.abs(Ne-dn)<=Fi*Math.max(1,Math.abs(Ne),Math.abs(dn))},m.a0=Dr,m.a1=e0,m.a2=k,m.a3=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const h of o){const f=window.document.createElement("source");Mt(h)||(n.crossOrigin="Anonymous"),f.src=h,n.appendChild(f)}})},m.a4=function(){return O++},m.a5=xn,m.a6=Nc,m.a7=Un,m.a8=Fu,m.a9=Qn,m.aA=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=un(o[s],n[o[s].ref]));return o},m.aB=function(o){if(o.type==="custom")return new mM(o);switch(o.type){case"background":return new dM(o);case"circle":return new QI(o);case"fill":return new gA(o);case"fill-extrusion":return new kA(o);case"heatmap":return new tA(o);case"hillshade":return new rA(o);case"line":return new BA(o);case"raster":return new pM(o);case"symbol":return new Bp(o)}},m.aC=H,m.aD=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!Vt(o.version,n.version))return[{command:"setStyle",args:[n]}];Vt(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),Vt(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),Vt(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),Vt(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),Vt(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),Vt(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),Vt(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),Vt(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),Vt(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),Vt(o.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),Vt(o.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const h={},f=[];(function(x,w,I,F){let V;for(V in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,V)&&(Object.prototype.hasOwnProperty.call(w,V)||L(V,I,F));for(V in w)Object.prototype.hasOwnProperty.call(w,V)&&(Object.prototype.hasOwnProperty.call(x,V)?Vt(x[V],w[V])||(x[V].type==="geojson"&&w[V].type==="geojson"&&Xe(x,w,V)?Se(I,{command:"setGeoJSONSourceData",args:[V,w[V].data]}):ye(V,w,I,F)):N(V,w,I))})(o.sources,n.sources,f,h);const y=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):y.push(x)}),s=s.concat(f),function(x,w,I){w=w||[];const F=(x=x||[]).map(ht),V=w.map(ht),J=x.reduce(le,{}),re=w.reduce(le,{}),ue=F.slice(),me=Object.create(null);let Te,Re,Ne,Qe,He;for(let Ye=0,lt=0;Ye<F.length;Ye++)Te=F[Ye],Object.prototype.hasOwnProperty.call(re,Te)?lt++:(Se(I,{command:"removeLayer",args:[Te]}),ue.splice(ue.indexOf(Te,lt),1));for(let Ye=0,lt=0;Ye<V.length;Ye++)Te=V[V.length-1-Ye],ue[ue.length-1-Ye]!==Te&&(Object.prototype.hasOwnProperty.call(J,Te)?(Se(I,{command:"removeLayer",args:[Te]}),ue.splice(ue.lastIndexOf(Te,ue.length-lt),1)):lt++,Qe=ue[ue.length-Ye],Se(I,{command:"addLayer",args:[re[Te],Qe]}),ue.splice(ue.length-Ye,0,Te),me[Te]=!0);for(let Ye=0;Ye<V.length;Ye++)if(Te=V[Ye],Re=J[Te],Ne=re[Te],!me[Te]&&!Vt(Re,Ne))if(Vt(Re.source,Ne.source)&&Vt(Re["source-layer"],Ne["source-layer"])&&Vt(Re.type,Ne.type)){for(He in tt(Re.layout,Ne.layout,I,Te,null,"setLayoutProperty"),tt(Re.paint,Ne.paint,I,Te,null,"setPaintProperty"),Vt(Re.filter,Ne.filter)||Se(I,{command:"setFilter",args:[Te,Ne.filter]}),Vt(Re.minzoom,Ne.minzoom)&&Vt(Re.maxzoom,Ne.maxzoom)||Se(I,{command:"setLayerZoomRange",args:[Te,Ne.minzoom,Ne.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?tt(Re[He],Ne[He],I,Te,He.slice(6),"setPaintProperty"):Vt(Re[He],Ne[He])||Se(I,{command:"setLayerProperty",args:[Te,He,Ne[He]]}));for(He in Ne)Object.prototype.hasOwnProperty.call(Ne,He)&&!Object.prototype.hasOwnProperty.call(Re,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?tt(Re[He],Ne[He],I,Te,He.slice(6),"setPaintProperty"):Vt(Re[He],Ne[He])||Se(I,{command:"setLayerProperty",args:[Te,He,Ne[He]]}))}else Se(I,{command:"removeLayer",args:[Te]}),Qe=ue[ue.lastIndexOf(Te)+1],Se(I,{command:"addLayer",args:[Ne,Qe]})}(y,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},m.aE=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},m.aF=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},m.aG=D,m.aH=ee,m.aI=class extends Mu{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},m.aJ=Tp,m.aK=class extends Mu{constructor(o,n){super(o,n),this.current=ZI}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},m.aL=Vx,m.aM=Gx,m.aN=kn,m.aO=class extends Mu{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},m.aP=class extends Mu{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},m.aQ=function(o,n,s,h,f,y,x){var w=1/(n-s),I=1/(h-f),F=1/(y-x);return o[0]=-2*w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*I,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(n+s)*w,o[13]=(f+h)*I,o[14]=(x+y)*F,o[15]=1,o},m.aR=YI,m.aS=class extends mt{},m.aT=VA,m.aU=class extends Dt{},m.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},m.aW=ow,m.aX=Fa,m.aY=Zr,m.aZ=class extends jt{},m.a_=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},m.aa=nb,m.ab=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,f,y)=>{const x=f||y;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},m.ac=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},m.ad=K,m.ae=function(o,n,s){var h=Math.sin(s),f=Math.cos(s),y=n[0],x=n[1],w=n[2],I=n[3],F=n[4],V=n[5],J=n[6],re=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=y*f+F*h,o[1]=x*f+V*h,o[2]=w*f+J*h,o[3]=I*f+re*h,o[4]=F*f-y*h,o[5]=V*f-x*h,o[6]=J*f-w*h,o[7]=re*f-I*h,o},m.af=function(o){var n=new Rc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},m.ag=Ap,m.ah=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:f,minZoom:y,maxZoom:x}=o,w=f?K(vi.interpolationFactor(f,n,y,x),0,1):0;o.kind==="camera"?h=yi.number(o.minSize,o.maxSize,w):s=w}return{uSizeT:s,uSize:h}},m.aj=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:f}){return o.kind==="source"?h/ea:o.kind==="composite"?yi.number(h/ea,f/ea,s):n},m.ak=Xy,m.al=function(o,n,s,h){const f=n.y-o.y,y=n.x-o.x,x=h.y-s.y,w=h.x-s.x,I=x*y-w*f;if(I===0)return null;const F=(w*(o.y-s.y)-x*(o.x-s.x))/I;return new b(o.x+F*y,o.y+F*f)},m.am=sb,m.an=Xx,m.ao=Iy,m.ap=function(o){let n=1/0,s=1/0,h=-1/0,f=-1/0;for(const y of o)n=Math.min(n,y.x),s=Math.min(s,y.y),h=Math.max(h,y.x),f=Math.max(f,y.y);return[n,s,h,f]},m.aq=Br,m.as=Hy,m.at=function(o,n){var s=n[0],h=n[1],f=n[2],y=n[3],x=n[4],w=n[5],I=n[6],F=n[7],V=n[8],J=n[9],re=n[10],ue=n[11],me=n[12],Te=n[13],Re=n[14],Ne=n[15],Qe=s*w-h*x,He=s*I-f*x,Ye=s*F-y*x,lt=h*I-f*w,_t=h*F-y*w,Ft=f*F-y*I,rn=V*Te-J*me,Ot=V*Re-re*me,zt=V*Ne-ue*me,qt=J*Re-re*Te,$t=J*Ne-ue*Te,Nt=re*Ne-ue*Re,ft=Qe*Nt-He*$t+Ye*qt+lt*zt-_t*Ot+Ft*rn;return ft?(o[0]=(w*Nt-I*$t+F*qt)*(ft=1/ft),o[1]=(f*$t-h*Nt-y*qt)*ft,o[2]=(Te*Ft-Re*_t+Ne*lt)*ft,o[3]=(re*_t-J*Ft-ue*lt)*ft,o[4]=(I*zt-x*Nt-F*Ot)*ft,o[5]=(s*Nt-f*zt+y*Ot)*ft,o[6]=(Re*Ye-me*Ft-Ne*He)*ft,o[7]=(V*Ft-re*Ye+ue*He)*ft,o[8]=(x*$t-w*zt+F*rn)*ft,o[9]=(h*zt-s*$t-y*rn)*ft,o[10]=(me*_t-Te*Ye+Ne*Qe)*ft,o[11]=(J*Ye-V*_t-ue*Qe)*ft,o[12]=(w*Ot-x*qt-I*rn)*ft,o[13]=(s*qt-h*Ot+f*rn)*ft,o[14]=(Te*He-me*lt-Re*Qe)*ft,o[15]=(V*lt-J*He+re*Qe)*ft,o):null},m.au=n0,m.av=Wy,m.aw=r0,m.ax=function(){const o={},n=et.$version;for(const s in et.$root){const h=et.$root[s];if(h.required){let f=null;f=s==="version"?n:h.type==="array"?[]:{},f!=null&&(o[s]=f)}}return o},m.ay=yp,m.az=ct,m.b=Y,m.b0=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},m.b1=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},m.b2=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},m.b3=W,m.b4=Qw,m.b5=Jw,m.b6=function(o,n,s,h,f){var y,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,f!=null&&f!==1/0?(o[10]=(f+h)*(y=1/(h-f)),o[14]=2*f*h*y):(o[10]=-1,o[14]=-2*h),o},m.b7=function(o,n,s){var h=Math.sin(s),f=Math.cos(s),y=n[4],x=n[5],w=n[6],I=n[7],F=n[8],V=n[9],J=n[10],re=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=y*f+F*h,o[5]=x*f+V*h,o[6]=w*f+J*h,o[7]=I*f+re*h,o[8]=F*f-y*h,o[9]=V*f-x*h,o[10]=J*f-w*h,o[11]=re*f-I*h,o},m.b8=G,m.b9=ae,m.bA=function(o){return o.message===Ue},m.bB=St,m.bC=Js,m.ba=function(o){return o*Math.PI/180},m.bb=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},m.bc=class extends fe{},m.bd=Yy,m.be=CM,m.bg=it,m.bh=function(o,n){Fe.REGISTERED_PROTOCOLS[o]=n},m.bi=function(o){delete Fe.REGISTERED_PROTOCOLS[o]},m.bj=function(o,n){const s={};for(let f=0;f<o.length;f++){const y=n&&n[o[f].id]||ed(o[f]);n&&(n[o[f].id]=y);let x=s[y];x||(x=s[y]=[]),x.push(o[f])}const h=[];for(const f in s)h.push(s[f]);return h},m.bk=Ut,m.bl=tb,m.bm=rb,m.bn=Rw,m.bo=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Rr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,f={layoutIconSize:h["icon-size"].possiblyEvaluate(new Qn(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Qn(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Qn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:V}=o.bucket.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Qn(F),o.canonical),h["text-size"].possiblyEvaluate(new Qn(V),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:V}=o.bucket.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Qn(F),o.canonical),h["icon-size"].possiblyEvaluate(new Qn(V),o.canonical)]}const y=s.get("text-line-height")*Br,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",w=s.get("text-keep-upright"),I=s.get("text-size");for(const F of o.bucket.features){const V=s.get("text-font").evaluate(F,{},o.canonical).join(","),J=I.evaluate(F,{},o.canonical),re=f.layoutTextSize.evaluate(F,{},o.canonical),ue=f.layoutIconSize.evaluate(F,{},o.canonical),me={horizontal:{},vertical:void 0},Te=F.text;let Re,Ne=[0,0];if(Te){const Ye=Te.toString(),lt=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*Br,_t=wy(Ye)?lt:0,Ft=s.get("text-anchor").evaluate(F,{},o.canonical),rn=mb(n,F,o.canonical);if(!rn){const $t=s.get("text-radial-offset").evaluate(F,{},o.canonical);Ne=$t?pb(Ft,[$t*Br,t0]):s.get("text-offset").evaluate(F,{},o.canonical).map(Nt=>Nt*Br)}let Ot=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const zt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*Br:1/0,qt=()=>{o.bucket.allowVerticalPlacement&&md(Ye)&&(me.vertical=Op(Te,o.glyphMap,o.glyphPositions,o.imagePositions,V,zt,y,Ft,"left",_t,Ne,m.ai.vertical,!0,re,J))};if(!x&&rn){const $t=new Set;if(Ot==="auto")for(let ft=0;ft<rn.values.length;ft+=2)$t.add(n0(rn.values[ft]));else $t.add(Ot);let Nt=!1;for(const ft of $t)if(!me.horizontal[ft])if(Nt)me.horizontal[ft]=me.horizontal[0];else{const Qt=Op(Te,o.glyphMap,o.glyphPositions,o.imagePositions,V,zt,y,"center",ft,_t,Ne,m.ai.horizontal,!1,re,J);Qt&&(me.horizontal[ft]=Qt,Nt=Qt.positionedLines.length===1)}qt()}else{Ot==="auto"&&(Ot=n0(Ft));const $t=Op(Te,o.glyphMap,o.glyphPositions,o.imagePositions,V,zt,y,Ft,Ot,_t,Ne,m.ai.horizontal,!1,re,J);$t&&(me.horizontal[Ot]=$t),qt(),md(Ye)&&x&&w&&(me.vertical=Op(Te,o.glyphMap,o.glyphPositions,o.imagePositions,V,zt,y,Ft,Ot,_t,Ne,m.ai.vertical,!1,re,J))}}let Qe=!1;if(F.icon&&F.icon.name){const Ye=o.imageMap[F.icon.name];Ye&&(Re=aM(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),Qe=!!Ye.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Qe:o.bucket.sdfIcons!==Qe&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const He=yb(me.horizontal)||me.vertical;o.bucket.iconsInText=!!He&&He.iconsInText,(He||Re)&&EM(o.bucket,F,me,Re,o.imageMap,f,re,ue,Ne,Qe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},m.bp=Ny,m.bq=Ly,m.br=By,m.bs=Al,m.bt=$y,m.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},m.bv=function(o,n,s,h,f){return u(this,void 0,void 0,function*(){if(X())try{return yield de(o,n,s,h,f)}catch{}return function(y,x,w,I,F){const V=y.width,J=y.height;be&&Ce||(be=new OffscreenCanvas(V,J),Ce=be.getContext("2d",{willReadFrequently:!0})),be.width=V,be.height=J,Ce.drawImage(y,0,0,V,J);const re=Ce.getImageData(x,w,I,F);return Ce.clearRect(0,0,V,J),re.data}(o,n,s,h,f)})},m.bw=eb,m.bx=S,m.by=P,m.bz=Tw,m.c=Ae,m.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),m.e=E,m.f=o=>new Promise((n,s)=>{const h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=ne})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(f):ne}),m.g=We,m.h=(o,n)=>vt(E(o,{type:"json"}),n),m.i=oe,m.j=Wt,m.k=Zt,m.l=(o,n)=>vt(E(o,{type:"arrayBuffer"}),n),m.m=vt,m.n=function(o){return new $y(o).readFields(eM,[])},m.o=Pd,m.p=Fw,m.q=d,m.r=vy,m.s=Mt,m.t=fd,m.u=Lt,m.v=et,m.w=_e,m.x=Es,m.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},m.z=yi}),c("worker",["./shared"],function(m){class u{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,ie){for(const Ie of se){this._layerConfigs[Ie.id]=Ie;const ke=this._layers[Ie.id]=m.aB(Ie);ke._featureFilter=m.a7(ke.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of ie)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const xe=m.bj(Object.values(this._layerConfigs),this.keyCache);for(const Ie of xe){const ke=Ie.map(ot=>this._layers[ot.id]),De=ke[0];if(De.visibility==="none")continue;const qe=De.source||"";let Le=this.familiesBySource[qe];Le||(Le=this.familiesBySource[qe]={});const st=De.sourceLayer||"_geojsonTileLayer";let dt=Le[st];dt||(dt=Le[st]=[]),dt.push(ke)}}}class S{constructor(se){const ie={},xe=[];for(const qe in se){const Le=se[qe],st=ie[qe]={};for(const dt in Le){const ot=Le[+dt];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const Ct={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};xe.push(Ct),st[dt]={rect:Ct,metrics:ot.metrics}}}const{w:Ie,h:ke}=m.p(xe),De=new m.o({width:Ie||1,height:ke||1});for(const qe in se){const Le=se[qe];for(const st in Le){const dt=Le[+st];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const ot=ie[qe][st].rect;m.o.copy(dt.bitmap,De,{x:0,y:0},{x:ot.x+1,y:ot.y+1},dt.bitmap)}}this.image=De,this.positions=ie}}m.bk("GlyphAtlas",S);class P{constructor(se){this.tileID=new m.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,ie,xe,Ie){return m._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new m.a5;const ke=new m.bl(Object.keys(se.layers).sort()),De=new m.bm(this.tileID,this.promoteId);De.bucketLayerIDs=[];const qe={},Le={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe},st=ie.familiesBySource[this.source];for(const wn in st){const Nn=se.layers[wn];if(!Nn)continue;Nn.version===1&&m.w(`Vector tile source "${this.source}" layer "${wn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Yn=ke.encode(wn),Er=[];for(let $r=0;$r<Nn.length;$r++){const Vr=Nn.feature($r),Ho=De.getId(Vr,wn);Er.push({feature:Vr,id:Ho,index:$r,sourceLayerIndex:Yn})}for(const $r of st[wn]){const Vr=$r[0];Vr.source!==this.source&&m.w(`layer.source = ${Vr.source} does not equal this.source = ${this.source}`),Vr.minzoom&&this.zoom<Math.floor(Vr.minzoom)||Vr.maxzoom&&this.zoom>=Vr.maxzoom||Vr.visibility!=="none"&&(M($r,this.zoom,xe),(qe[Vr.id]=Vr.createBucket({index:De.bucketLayerIDs.length,layers:$r,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yn,sourceID:this.source})).populate(Er,Le,this.tileID.canonical),De.bucketLayerIDs.push($r.map(Ho=>Ho.id)))}}const dt=m.aG(Le.glyphDependencies,wn=>Object.keys(wn).map(Number));this.inFlightDependencies.forEach(wn=>wn==null?void 0:wn.abort()),this.inFlightDependencies=[];let ot=Promise.resolve({});if(Object.keys(dt).length){const wn=new AbortController;this.inFlightDependencies.push(wn),ot=Ie.sendAsync({type:"GG",data:{stacks:dt,source:this.source,tileID:this.tileID,type:"glyphs"}},wn)}const Ct=Object.keys(Le.iconDependencies);let Kt=Promise.resolve({});if(Ct.length){const wn=new AbortController;this.inFlightDependencies.push(wn),Kt=Ie.sendAsync({type:"GI",data:{icons:Ct,source:this.source,tileID:this.tileID,type:"icons"}},wn)}const nn=Object.keys(Le.patternDependencies);let pn=Promise.resolve({});if(nn.length){const wn=new AbortController;this.inFlightDependencies.push(wn),pn=Ie.sendAsync({type:"GI",data:{icons:nn,source:this.source,tileID:this.tileID,type:"patterns"}},wn)}const[En,hn,$n]=yield Promise.all([ot,Kt,pn]),Jn=new S(En),nr=new m.bn(hn,$n);for(const wn in qe){const Nn=qe[wn];Nn instanceof m.a6?(M(Nn.layers,this.zoom,xe),m.bo({bucket:Nn,glyphMap:En,glyphPositions:Jn.positions,imageMap:hn,imagePositions:nr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Nn.hasPattern&&(Nn instanceof m.bp||Nn instanceof m.bq||Nn instanceof m.br)&&(M(Nn.layers,this.zoom,xe),Nn.addFeatures(Le,this.tileID.canonical,nr.patternPositions))}return this.status="done",{buckets:Object.values(qe).filter(wn=>!wn.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jn.image,imageAtlas:nr,glyphMap:this.returnDependencies?En:null,iconMap:this.returnDependencies?hn:null,glyphPositions:this.returnDependencies?Jn.positions:null}})}}function M(ze,se,ie){const xe=new m.a9(se);for(const Ie of ze)Ie.recalculate(xe,ie)}class b{constructor(se,ie,xe){this.actor=se,this.layerIndex=ie,this.availableImages=xe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,ie){return m._(this,void 0,void 0,function*(){const xe=yield m.l(se.request,ie);try{return{vectorTile:new m.bs.VectorTile(new m.bt(xe.data)),rawData:xe.data,cacheControl:xe.cacheControl,expires:xe.expires}}catch(Ie){const ke=new Uint8Array(xe.data);let De=`Unable to parse the tile at ${se.request.url}, `;throw De+=ke[0]===31&&ke[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.message}`,new Error(De)}})}loadTile(se){return m._(this,void 0,void 0,function*(){const ie=se.uid,xe=!!(se&&se.request&&se.request.collectResourceTiming)&&new m.bu(se.request),Ie=new P(se);this.loading[ie]=Ie;const ke=new AbortController;Ie.abort=ke;try{const De=yield this.loadVectorTile(se,ke);if(delete this.loading[ie],!De)return null;const qe=De.rawData,Le={};De.expires&&(Le.expires=De.expires),De.cacheControl&&(Le.cacheControl=De.cacheControl);const st={};if(xe){const ot=xe.finish();ot&&(st.resourceTiming=JSON.parse(JSON.stringify(ot)))}Ie.vectorTile=De.vectorTile;const dt=Ie.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ie]=Ie,this.fetching[ie]={rawTileData:qe,cacheControl:Le,resourceTiming:st};try{const ot=yield dt;return m.e({rawTileData:qe.slice(0)},ot,Le,st)}finally{delete this.fetching[ie]}}catch(De){throw delete this.loading[ie],Ie.status="done",this.loaded[ie]=Ie,De}})}reloadTile(se){return m._(this,void 0,void 0,function*(){const ie=se.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const xe=this.loaded[ie];if(xe.showCollisionBoxes=se.showCollisionBoxes,xe.status==="parsing"){const Ie=yield xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor);let ke;if(this.fetching[ie]){const{rawTileData:De,cacheControl:qe,resourceTiming:Le}=this.fetching[ie];delete this.fetching[ie],ke=m.e({rawTileData:De.slice(0)},Ie,qe,Le)}else ke=Ie;return ke}if(xe.status==="done"&&xe.vectorTile)return xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(se){return m._(this,void 0,void 0,function*(){const ie=this.loading,xe=se.uid;ie&&ie[xe]&&ie[xe].abort&&(ie[xe].abort.abort(),delete ie[xe])})}removeTile(se){return m._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class C{constructor(){this.loaded={}}loadTile(se){return m._(this,void 0,void 0,function*(){const{uid:ie,encoding:xe,rawImageData:Ie,redFactor:ke,greenFactor:De,blueFactor:qe,baseShift:Le}=se,st=Ie.width+2,dt=Ie.height+2,ot=m.b(Ie)?new m.R({width:st,height:dt},yield m.bv(Ie,-1,-1,st,dt)):Ie,Ct=new m.bw(ie,ot,xe,ke,De,qe,Le);return this.loaded=this.loaded||{},this.loaded[ie]=Ct,Ct})}removeTile(se){const ie=this.loaded,xe=se.uid;ie&&ie[xe]&&delete ie[xe]}}function R(ze,se){if(ze.length!==0){B(ze[0],se);for(var ie=1;ie<ze.length;ie++)B(ze[ie],!se)}}function B(ze,se){for(var ie=0,xe=0,Ie=0,ke=ze.length,De=ke-1;Ie<ke;De=Ie++){var qe=(ze[Ie][0]-ze[De][0])*(ze[De][1]+ze[Ie][1]),Le=ie+qe;xe+=Math.abs(ie)>=Math.abs(qe)?ie-Le+qe:qe-Le+ie,ie=Le}ie+xe>=0!=!!se&&ze.reverse()}var j=m.bx(function ze(se,ie){var xe,Ie=se&&se.type;if(Ie==="FeatureCollection")for(xe=0;xe<se.features.length;xe++)ze(se.features[xe],ie);else if(Ie==="GeometryCollection")for(xe=0;xe<se.geometries.length;xe++)ze(se.geometries[xe],ie);else if(Ie==="Feature")ze(se.geometry,ie);else if(Ie==="Polygon")R(se.coordinates,ie);else if(Ie==="MultiPolygon")for(xe=0;xe<se.coordinates.length;xe++)R(se.coordinates[xe],ie);return se});const he=m.bs.VectorTileFeature.prototype.toGeoJSON;var q={exports:{}},X=m.by,G=m.bs.VectorTileFeature,ae=K;function K(ze,se){this.options=se||{},this.features=ze,this.length=ze.length}function W(ze,se){this.id=typeof ze.id=="number"?ze.id:void 0,this.type=ze.type,this.rawGeometry=ze.type===1?[ze.geometry]:ze.geometry,this.properties=ze.tags,this.extent=se||4096}K.prototype.feature=function(ze){return new W(this.features[ze],this.options.extent)},W.prototype.loadGeometry=function(){var ze=this.rawGeometry;this.geometry=[];for(var se=0;se<ze.length;se++){for(var ie=ze[se],xe=[],Ie=0;Ie<ie.length;Ie++)xe.push(new X(ie[Ie][0],ie[Ie][1]));this.geometry.push(xe)}return this.geometry},W.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ze=this.geometry,se=1/0,ie=-1/0,xe=1/0,Ie=-1/0,ke=0;ke<ze.length;ke++)for(var De=ze[ke],qe=0;qe<De.length;qe++){var Le=De[qe];se=Math.min(se,Le.x),ie=Math.max(ie,Le.x),xe=Math.min(xe,Le.y),Ie=Math.max(Ie,Le.y)}return[se,xe,ie,Ie]},W.prototype.toGeoJSON=G.prototype.toGeoJSON;var E=m.bz,O=ae;function D(ze){var se=new E;return function(ie,xe){for(var Ie in ie.layers)xe.writeMessage(3,ee,ie.layers[Ie])}(ze,se),se.finish()}function ee(ze,se){var ie;se.writeVarintField(15,ze.version||1),se.writeStringField(1,ze.name||""),se.writeVarintField(5,ze.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<ze.length;ie++)xe.feature=ze.feature(ie),se.writeMessage(2,H,xe);var Ie=xe.keys;for(ie=0;ie<Ie.length;ie++)se.writeStringField(3,Ie[ie]);var ke=xe.values;for(ie=0;ie<ke.length;ie++)se.writeMessage(4,ce,ke[ie])}function H(ze,se){var ie=ze.feature;ie.id!==void 0&&se.writeVarintField(1,ie.id),se.writeMessage(2,ve,ze),se.writeVarintField(3,ie.type),se.writeMessage(4,oe,ie)}function ve(ze,se){var ie=ze.feature,xe=ze.keys,Ie=ze.values,ke=ze.keycache,De=ze.valuecache;for(var qe in ie.properties){var Le=ie.properties[qe],st=ke[qe];if(Le!==null){st===void 0&&(xe.push(qe),ke[qe]=st=xe.length-1),se.writeVarint(st);var dt=typeof Le;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(Le=JSON.stringify(Le));var ot=dt+":"+Le,Ct=De[ot];Ct===void 0&&(Ie.push(Le),De[ot]=Ct=Ie.length-1),se.writeVarint(Ct)}}}function _e(ze,se){return(se<<3)+(7&ze)}function pe(ze){return ze<<1^ze>>31}function oe(ze,se){for(var ie=ze.loadGeometry(),xe=ze.type,Ie=0,ke=0,De=ie.length,qe=0;qe<De;qe++){var Le=ie[qe],st=1;xe===1&&(st=Le.length),se.writeVarint(_e(1,st));for(var dt=xe===3?Le.length-1:Le.length,ot=0;ot<dt;ot++){ot===1&&xe!==1&&se.writeVarint(_e(2,dt-1));var Ct=Le[ot].x-Ie,Kt=Le[ot].y-ke;se.writeVarint(pe(Ct)),se.writeVarint(pe(Kt)),Ie+=Ct,ke+=Kt}xe===3&&se.writeVarint(_e(7,1))}}function ce(ze,se){var ie=typeof ze;ie==="string"?se.writeStringField(1,ze):ie==="boolean"?se.writeBooleanField(7,ze):ie==="number"&&(ze%1!=0?se.writeDoubleField(3,ze):ze<0?se.writeSVarintField(6,ze):se.writeVarintField(5,ze))}q.exports=D,q.exports.fromVectorTileJs=D,q.exports.fromGeojsonVt=function(ze,se){se=se||{};var ie={};for(var xe in ze)ie[xe]=new O(ze[xe].features,se),ie[xe].name=xe,ie[xe].version=se.version,ie[xe].extent=se.extent;return D({layers:ie})},q.exports.GeoJSONWrapper=O;var Y=m.bx(q.exports);const ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},de=Math.fround||(be=new Float32Array(1),ze=>(be[0]=+ze,be[0]));var be;const Ce=3,Ue=5,Ae=6;class Fe{constructor(se){this.options=Object.assign(Object.create(ne),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:ie,minZoom:xe,maxZoom:Ie}=this.options;ie&&console.time("total time");const ke=`prepare ${se.length} points`;ie&&console.time(ke),this.points=se;const De=[];for(let Le=0;Le<se.length;Le++){const st=se[Le];if(!st.geometry)continue;const[dt,ot]=st.geometry.coordinates,Ct=de(it(dt)),Kt=de(ct(ot));De.push(Ct,Kt,1/0,Le,-1,1),this.options.reduce&&De.push(0)}let qe=this.trees[Ie+1]=this._createTree(De);ie&&console.timeEnd(ke);for(let Le=Ie;Le>=xe;Le--){const st=+Date.now();qe=this.trees[Le]=this._createTree(this._cluster(qe,Le)),ie&&console.log("z%d: %d clusters in %dms",Le,qe.numItems,+Date.now()-st)}return ie&&console.timeEnd("total time"),this}getClusters(se,ie){let xe=((se[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,se[1]));let ke=se[2]===180?180:((se[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)xe=-180,ke=180;else if(xe>ke){const ot=this.getClusters([xe,Ie,180,De],ie),Ct=this.getClusters([-180,Ie,ke,De],ie);return ot.concat(Ct)}const qe=this.trees[this._limitZoom(ie)],Le=qe.range(it(xe),ct(De),it(ke),ct(Ie)),st=qe.data,dt=[];for(const ot of Le){const Ct=this.stride*ot;dt.push(st[Ct+Ue]>1?We(st,Ct,this.clusterProps):this.points[st[Ct+Ce]])}return dt}getChildren(se){const ie=this._getOriginId(se),xe=this._getOriginZoom(se),Ie="No cluster with the specified id.",ke=this.trees[xe];if(!ke)throw new Error(Ie);const De=ke.data;if(ie*this.stride>=De.length)throw new Error(Ie);const qe=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Le=ke.within(De[ie*this.stride],De[ie*this.stride+1],qe),st=[];for(const dt of Le){const ot=dt*this.stride;De[ot+4]===se&&st.push(De[ot+Ue]>1?We(De,ot,this.clusterProps):this.points[De[ot+Ce]])}if(st.length===0)throw new Error(Ie);return st}getLeaves(se,ie,xe){const Ie=[];return this._appendLeaves(Ie,se,ie=ie||10,xe=xe||0,0),Ie}getTile(se,ie,xe){const Ie=this.trees[this._limitZoom(se)],ke=Math.pow(2,se),{extent:De,radius:qe}=this.options,Le=qe/De,st=(xe-Le)/ke,dt=(xe+1+Le)/ke,ot={features:[]};return this._addTileFeatures(Ie.range((ie-Le)/ke,st,(ie+1+Le)/ke,dt),Ie.data,ie,xe,ke,ot),ie===0&&this._addTileFeatures(Ie.range(1-Le/ke,st,1,dt),Ie.data,ke,xe,ke,ot),ie===ke-1&&this._addTileFeatures(Ie.range(0,st,Le/ke,dt),Ie.data,-1,xe,ke,ot),ot.features.length?ot:null}getClusterExpansionZoom(se){let ie=this._getOriginZoom(se)-1;for(;ie<=this.options.maxZoom;){const xe=this.getChildren(se);if(ie++,xe.length!==1)break;se=xe[0].properties.cluster_id}return ie}_appendLeaves(se,ie,xe,Ie,ke){const De=this.getChildren(ie);for(const qe of De){const Le=qe.properties;if(Le&&Le.cluster?ke+Le.point_count<=Ie?ke+=Le.point_count:ke=this._appendLeaves(se,Le.cluster_id,xe,Ie,ke):ke<Ie?ke++:se.push(qe),se.length===xe)break}return ke}_createTree(se){const ie=new m.aw(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<se.length;xe+=this.stride)ie.add(se[xe],se[xe+1]);return ie.finish(),ie.data=se,ie}_addTileFeatures(se,ie,xe,Ie,ke,De){for(const qe of se){const Le=qe*this.stride,st=ie[Le+Ue]>1;let dt,ot,Ct;if(st)dt=Ze(ie,Le,this.clusterProps),ot=ie[Le],Ct=ie[Le+1];else{const pn=this.points[ie[Le+Ce]];dt=pn.properties;const[En,hn]=pn.geometry.coordinates;ot=it(En),Ct=ct(hn)}const Kt={type:1,geometry:[[Math.round(this.options.extent*(ot*ke-xe)),Math.round(this.options.extent*(Ct*ke-Ie))]],tags:dt};let nn;nn=st||this.options.generateId?ie[Le+Ce]:this.points[ie[Le+Ce]].id,nn!==void 0&&(Kt.id=nn),De.features.push(Kt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,ie){const{radius:xe,extent:Ie,reduce:ke,minPoints:De}=this.options,qe=xe/(Ie*Math.pow(2,ie)),Le=se.data,st=[],dt=this.stride;for(let ot=0;ot<Le.length;ot+=dt){if(Le[ot+2]<=ie)continue;Le[ot+2]=ie;const Ct=Le[ot],Kt=Le[ot+1],nn=se.within(Le[ot],Le[ot+1],qe),pn=Le[ot+Ue];let En=pn;for(const hn of nn){const $n=hn*dt;Le[$n+2]>ie&&(En+=Le[$n+Ue])}if(En>pn&&En>=De){let hn,$n=Ct*pn,Jn=Kt*pn,nr=-1;const wn=((ot/dt|0)<<5)+(ie+1)+this.points.length;for(const Nn of nn){const Yn=Nn*dt;if(Le[Yn+2]<=ie)continue;Le[Yn+2]=ie;const Er=Le[Yn+Ue];$n+=Le[Yn]*Er,Jn+=Le[Yn+1]*Er,Le[Yn+4]=wn,ke&&(hn||(hn=this._map(Le,ot,!0),nr=this.clusterProps.length,this.clusterProps.push(hn)),ke(hn,this._map(Le,Yn)))}Le[ot+4]=wn,st.push($n/En,Jn/En,1/0,wn,-1,En),ke&&st.push(nr)}else{for(let hn=0;hn<dt;hn++)st.push(Le[ot+hn]);if(En>1)for(const hn of nn){const $n=hn*dt;if(!(Le[$n+2]<=ie)){Le[$n+2]=ie;for(let Jn=0;Jn<dt;Jn++)st.push(Le[$n+Jn])}}}}return st}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,ie,xe){if(se[ie+Ue]>1){const De=this.clusterProps[se[ie+Ae]];return xe?Object.assign({},De):De}const Ie=this.points[se[ie+Ce]].properties,ke=this.options.map(Ie);return xe&&ke===Ie?Object.assign({},ke):ke}}function We(ze,se,ie){return{type:"Feature",id:ze[se+Ce],properties:Ze(ze,se,ie),geometry:{type:"Point",coordinates:[(xe=ze[se],360*(xe-.5)),vt(ze[se+1])]}};var xe}function Ze(ze,se,ie){const xe=ze[se+Ue],Ie=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,ke=ze[se+Ae],De=ke===-1?{}:Object.assign({},ie[ke]);return Object.assign(De,{cluster:!0,cluster_id:ze[se+Ce],point_count:xe,point_count_abbreviated:Ie})}function it(ze){return ze/360+.5}function ct(ze){const se=Math.sin(ze*Math.PI/180),ie=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ie<0?0:ie>1?1:ie}function vt(ze){const se=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function Mt(ze,se,ie,xe){let Ie=xe;const ke=se+(ie-se>>1);let De,qe=ie-se;const Le=ze[se],st=ze[se+1],dt=ze[ie],ot=ze[ie+1];for(let Ct=se+3;Ct<ie;Ct+=3){const Kt=pt(ze[Ct],ze[Ct+1],Le,st,dt,ot);if(Kt>Ie)De=Ct,Ie=Kt;else if(Kt===Ie){const nn=Math.abs(Ct-ke);nn<qe&&(De=Ct,qe=nn)}}Ie>xe&&(De-se>3&&Mt(ze,se,De,xe),ze[De+2]=Ie,ie-De>3&&Mt(ze,De,ie,xe))}function pt(ze,se,ie,xe,Ie,ke){let De=Ie-ie,qe=ke-xe;if(De!==0||qe!==0){const Le=((ze-ie)*De+(se-xe)*qe)/(De*De+qe*qe);Le>1?(ie=Ie,xe=ke):Le>0&&(ie+=De*Le,xe+=qe*Le)}return De=ze-ie,qe=se-xe,De*De+qe*qe}function xt(ze,se,ie,xe){const Ie={id:ze??null,type:se,geometry:ie,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Zt(Ie,ie);else if(se==="Polygon")Zt(Ie,ie[0]);else if(se==="MultiLineString")for(const ke of ie)Zt(Ie,ke);else if(se==="MultiPolygon")for(const ke of ie)Zt(Ie,ke[0]);return Ie}function Zt(ze,se){for(let ie=0;ie<se.length;ie+=3)ze.minX=Math.min(ze.minX,se[ie]),ze.minY=Math.min(ze.minY,se[ie+1]),ze.maxX=Math.max(ze.maxX,se[ie]),ze.maxY=Math.max(ze.maxY,se[ie+1])}function Wt(ze,se,ie,xe){if(!se.geometry)return;const Ie=se.geometry.coordinates;if(Ie&&Ie.length===0)return;const ke=se.geometry.type,De=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let qe=[],Le=se.id;if(ie.promoteId?Le=se.properties[ie.promoteId]:ie.generateId&&(Le=xe||0),ke==="Point")ln(Ie,qe);else if(ke==="MultiPoint")for(const st of Ie)ln(st,qe);else if(ke==="LineString")et(Ie,qe,De,!1);else if(ke==="MultiLineString"){if(ie.lineMetrics){for(const st of Ie)qe=[],et(st,qe,De,!1),ze.push(xt(Le,"LineString",qe,se.properties));return}_n(Ie,qe,De,!1)}else if(ke==="Polygon")_n(Ie,qe,De,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(const st of se.geometry.geometries)Wt(ze,{id:Le,geometry:st,properties:se.properties},ie,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const st of Ie){const dt=[];_n(st,dt,De,!0),qe.push(dt)}}ze.push(xt(Le,ke,qe,se.properties))}function ln(ze,se){se.push(un(ze[0]),Vt(ze[1]),0)}function et(ze,se,ie,xe){let Ie,ke,De=0;for(let Le=0;Le<ze.length;Le++){const st=un(ze[Le][0]),dt=Vt(ze[Le][1]);se.push(st,dt,0),Le>0&&(De+=xe?(Ie*dt-st*ke)/2:Math.sqrt(Math.pow(st-Ie,2)+Math.pow(dt-ke,2))),Ie=st,ke=dt}const qe=se.length-3;se[2]=1,Mt(se,0,qe,ie),se[qe+2]=1,se.size=Math.abs(De),se.start=0,se.end=se.size}function _n(ze,se,ie,xe){for(let Ie=0;Ie<ze.length;Ie++){const ke=[];et(ze[Ie],ke,ie,xe),se.push(ke)}}function un(ze){return ze/360+.5}function Vt(ze){const se=Math.sin(ze*Math.PI/180),ie=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ie<0?0:ie>1?1:ie}function Se(ze,se,ie,xe,Ie,ke,De,qe){if(xe/=se,ke>=(ie/=se)&&De<xe)return ze;if(De<ie||ke>=xe)return null;const Le=[];for(const st of ze){const dt=st.geometry;let ot=st.type;const Ct=Ie===0?st.minX:st.minY,Kt=Ie===0?st.maxX:st.maxY;if(Ct>=ie&&Kt<xe){Le.push(st);continue}if(Kt<ie||Ct>=xe)continue;let nn=[];if(ot==="Point"||ot==="MultiPoint")N(dt,nn,ie,xe,Ie);else if(ot==="LineString")L(dt,nn,ie,xe,Ie,!1,qe.lineMetrics);else if(ot==="MultiLineString")Xe(dt,nn,ie,xe,Ie,!1);else if(ot==="Polygon")Xe(dt,nn,ie,xe,Ie,!0);else if(ot==="MultiPolygon")for(const pn of dt){const En=[];Xe(pn,En,ie,xe,Ie,!0),En.length&&nn.push(En)}if(nn.length){if(qe.lineMetrics&&ot==="LineString"){for(const pn of nn)Le.push(xt(st.id,ot,pn,st.tags));continue}ot!=="LineString"&&ot!=="MultiLineString"||(nn.length===1?(ot="LineString",nn=nn[0]):ot="MultiLineString"),ot!=="Point"&&ot!=="MultiPoint"||(ot=nn.length===3?"Point":"MultiPoint"),Le.push(xt(st.id,ot,nn,st.tags))}}return Le.length?Le:null}function N(ze,se,ie,xe,Ie){for(let ke=0;ke<ze.length;ke+=3){const De=ze[ke+Ie];De>=ie&&De<=xe&&tt(se,ze[ke],ze[ke+1],ze[ke+2])}}function L(ze,se,ie,xe,Ie,ke,De){let qe=ye(ze);const Le=Ie===0?ht:le;let st,dt,ot=ze.start;for(let En=0;En<ze.length-3;En+=3){const hn=ze[En],$n=ze[En+1],Jn=ze[En+2],nr=ze[En+3],wn=ze[En+4],Nn=Ie===0?hn:$n,Yn=Ie===0?nr:wn;let Er=!1;De&&(st=Math.sqrt(Math.pow(hn-nr,2)+Math.pow($n-wn,2))),Nn<ie?Yn>ie&&(dt=Le(qe,hn,$n,nr,wn,ie),De&&(qe.start=ot+st*dt)):Nn>xe?Yn<xe&&(dt=Le(qe,hn,$n,nr,wn,xe),De&&(qe.start=ot+st*dt)):tt(qe,hn,$n,Jn),Yn<ie&&Nn>=ie&&(dt=Le(qe,hn,$n,nr,wn,ie),Er=!0),Yn>xe&&Nn<=xe&&(dt=Le(qe,hn,$n,nr,wn,xe),Er=!0),!ke&&Er&&(De&&(qe.end=ot+st*dt),se.push(qe),qe=ye(ze)),De&&(ot+=st)}let Ct=ze.length-3;const Kt=ze[Ct],nn=ze[Ct+1],pn=Ie===0?Kt:nn;pn>=ie&&pn<=xe&&tt(qe,Kt,nn,ze[Ct+2]),Ct=qe.length-3,ke&&Ct>=3&&(qe[Ct]!==qe[0]||qe[Ct+1]!==qe[1])&&tt(qe,qe[0],qe[1],qe[2]),qe.length&&se.push(qe)}function ye(ze){const se=[];return se.size=ze.size,se.start=ze.start,se.end=ze.end,se}function Xe(ze,se,ie,xe,Ie,ke){for(const De of ze)L(De,se,ie,xe,Ie,ke,!1)}function tt(ze,se,ie,xe){ze.push(se,ie,xe)}function ht(ze,se,ie,xe,Ie,ke){const De=(ke-se)/(xe-se);return tt(ze,ke,ie+(Ie-ie)*De,1),De}function le(ze,se,ie,xe,Ie,ke){const De=(ke-ie)/(Ie-ie);return tt(ze,se+(xe-se)*De,ke,1),De}function k(ze,se){const ie=[];for(let xe=0;xe<ze.length;xe++){const Ie=ze[xe],ke=Ie.type;let De;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")De=$(Ie.geometry,se);else if(ke==="MultiLineString"||ke==="Polygon"){De=[];for(const qe of Ie.geometry)De.push($(qe,se))}else if(ke==="MultiPolygon"){De=[];for(const qe of Ie.geometry){const Le=[];for(const st of qe)Le.push($(st,se));De.push(Le)}}ie.push(xt(Ie.id,ke,De,Ie.tags))}return ie}function $(ze,se){const ie=[];ie.size=ze.size,ze.start!==void 0&&(ie.start=ze.start,ie.end=ze.end);for(let xe=0;xe<ze.length;xe+=3)ie.push(ze[xe]+se,ze[xe+1],ze[xe+2]);return ie}function Ee(ze,se){if(ze.transformed)return ze;const ie=1<<ze.z,xe=ze.x,Ie=ze.y;for(const ke of ze.features){const De=ke.geometry,qe=ke.type;if(ke.geometry=[],qe===1)for(let Le=0;Le<De.length;Le+=2)ke.geometry.push(Ve(De[Le],De[Le+1],se,ie,xe,Ie));else for(let Le=0;Le<De.length;Le++){const st=[];for(let dt=0;dt<De[Le].length;dt+=2)st.push(Ve(De[Le][dt],De[Le][dt+1],se,ie,xe,Ie));ke.geometry.push(st)}}return ze.transformed=!0,ze}function Ve(ze,se,ie,xe,Ie,ke){return[Math.round(ie*(ze*xe-Ie)),Math.round(ie*(se*xe-ke))]}function rt(ze,se,ie,xe,Ie){const ke=se===Ie.maxZoom?0:Ie.tolerance/((1<<se)*Ie.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:ze.length,source:null,x:ie,y:xe,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const qe of ze)Ge(De,qe,ke,Ie);return De}function Ge(ze,se,ie,xe){const Ie=se.geometry,ke=se.type,De=[];if(ze.minX=Math.min(ze.minX,se.minX),ze.minY=Math.min(ze.minY,se.minY),ze.maxX=Math.max(ze.maxX,se.maxX),ze.maxY=Math.max(ze.maxY,se.maxY),ke==="Point"||ke==="MultiPoint")for(let qe=0;qe<Ie.length;qe+=3)De.push(Ie[qe],Ie[qe+1]),ze.numPoints++,ze.numSimplified++;else if(ke==="LineString")Et(De,Ie,ze,ie,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(let qe=0;qe<Ie.length;qe++)Et(De,Ie[qe],ze,ie,ke==="Polygon",qe===0);else if(ke==="MultiPolygon")for(let qe=0;qe<Ie.length;qe++){const Le=Ie[qe];for(let st=0;st<Le.length;st++)Et(De,Le[st],ze,ie,!0,st===0)}if(De.length){let qe=se.tags||null;if(ke==="LineString"&&xe.lineMetrics){qe={};for(const st in se.tags)qe[st]=se.tags[st];qe.mapbox_clip_start=Ie.start/Ie.size,qe.mapbox_clip_end=Ie.end/Ie.size}const Le={geometry:De,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:qe};se.id!==null&&(Le.id=se.id),ze.features.push(Le)}}function Et(ze,se,ie,xe,Ie,ke){const De=xe*xe;if(xe>0&&se.size<(Ie?De:xe))return void(ie.numPoints+=se.length/3);const qe=[];for(let Le=0;Le<se.length;Le+=3)(xe===0||se[Le+2]>De)&&(ie.numSimplified++,qe.push(se[Le],se[Le+1])),ie.numPoints++;Ie&&function(Le,st){let dt=0;for(let ot=0,Ct=Le.length,Kt=Ct-2;ot<Ct;Kt=ot,ot+=2)dt+=(Le[ot]-Le[Kt])*(Le[ot+1]+Le[Kt+1]);if(dt>0===st)for(let ot=0,Ct=Le.length;ot<Ct/2;ot+=2){const Kt=Le[ot],nn=Le[ot+1];Le[ot]=Le[Ct-2-ot],Le[ot+1]=Le[Ct-1-ot],Le[Ct-2-ot]=Kt,Le[Ct-1-ot]=nn}}(qe,ke),ze.push(qe)}const It={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class yn{constructor(se,ie){const xe=(ie=this.options=function(ke,De){for(const qe in De)ke[qe]=De[qe];return ke}(Object.create(It),ie)).debug;if(xe&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ie=function(ke,De){const qe=[];if(ke.type==="FeatureCollection")for(let Le=0;Le<ke.features.length;Le++)Wt(qe,ke.features[Le],De,Le);else Wt(qe,ke.type==="Feature"?ke:{geometry:ke},De);return qe}(se,ie);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ie=function(ke,De){const qe=De.buffer/De.extent;let Le=ke;const st=Se(ke,1,-1-qe,qe,0,-1,2,De),dt=Se(ke,1,1-qe,2+qe,0,-1,2,De);return(st||dt)&&(Le=Se(ke,1,-qe,1+qe,0,-1,2,De)||[],st&&(Le=k(st,1).concat(Le)),dt&&(Le=Le.concat(k(dt,-1)))),Le}(Ie,ie),Ie.length&&this.splitTile(Ie,0,0,0),xe&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,ie,xe,Ie,ke,De,qe){const Le=[se,ie,xe,Ie],st=this.options,dt=st.debug;for(;Le.length;){Ie=Le.pop(),xe=Le.pop(),ie=Le.pop(),se=Le.pop();const ot=1<<ie,Ct=Sn(ie,xe,Ie);let Kt=this.tiles[Ct];if(!Kt&&(dt>1&&console.time("creation"),Kt=this.tiles[Ct]=rt(se,ie,xe,Ie,st),this.tileCoords.push({z:ie,x:xe,y:Ie}),dt)){dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,xe,Ie,Kt.numFeatures,Kt.numPoints,Kt.numSimplified),console.timeEnd("creation"));const Er=`z${ie}`;this.stats[Er]=(this.stats[Er]||0)+1,this.total++}if(Kt.source=se,ke==null){if(ie===st.indexMaxZoom||Kt.numPoints<=st.indexMaxPoints)continue}else{if(ie===st.maxZoom||ie===ke)continue;if(ke!=null){const Er=ke-ie;if(xe!==De>>Er||Ie!==qe>>Er)continue}}if(Kt.source=null,se.length===0)continue;dt>1&&console.time("clipping");const nn=.5*st.buffer/st.extent,pn=.5-nn,En=.5+nn,hn=1+nn;let $n=null,Jn=null,nr=null,wn=null,Nn=Se(se,ot,xe-nn,xe+En,0,Kt.minX,Kt.maxX,st),Yn=Se(se,ot,xe+pn,xe+hn,0,Kt.minX,Kt.maxX,st);se=null,Nn&&($n=Se(Nn,ot,Ie-nn,Ie+En,1,Kt.minY,Kt.maxY,st),Jn=Se(Nn,ot,Ie+pn,Ie+hn,1,Kt.minY,Kt.maxY,st),Nn=null),Yn&&(nr=Se(Yn,ot,Ie-nn,Ie+En,1,Kt.minY,Kt.maxY,st),wn=Se(Yn,ot,Ie+pn,Ie+hn,1,Kt.minY,Kt.maxY,st),Yn=null),dt>1&&console.timeEnd("clipping"),Le.push($n||[],ie+1,2*xe,2*Ie),Le.push(Jn||[],ie+1,2*xe,2*Ie+1),Le.push(nr||[],ie+1,2*xe+1,2*Ie),Le.push(wn||[],ie+1,2*xe+1,2*Ie+1)}}getTile(se,ie,xe){se=+se,ie=+ie,xe=+xe;const Ie=this.options,{extent:ke,debug:De}=Ie;if(se<0||se>24)return null;const qe=1<<se,Le=Sn(se,ie=ie+qe&qe-1,xe);if(this.tiles[Le])return Ee(this.tiles[Le],ke);De>1&&console.log("drilling down to z%d-%d-%d",se,ie,xe);let st,dt=se,ot=ie,Ct=xe;for(;!st&&dt>0;)dt--,ot>>=1,Ct>>=1,st=this.tiles[Sn(dt,ot,Ct)];return st&&st.source?(De>1&&(console.log("found parent tile z%d-%d-%d",dt,ot,Ct),console.time("drilling down")),this.splitTile(st.source,dt,ot,Ct,se,ie,xe),De>1&&console.timeEnd("drilling down"),this.tiles[Le]?Ee(this.tiles[Le],ke):null):null}}function Sn(ze,se,ie){return 32*((1<<ze)*ie+se)+ze}function Rt(ze,se){return se?ze.properties[se]:ze.id}function zr(ze,se){if(ze==null)return!0;if(ze.type==="Feature")return Rt(ze,se)!=null;if(ze.type==="FeatureCollection"){const ie=new Set;for(const xe of ze.features){const Ie=Rt(xe,se);if(Ie==null||ie.has(Ie))return!1;ie.add(Ie)}return!0}return!1}function ei(ze,se){const ie=new Map;if(ze!=null)if(ze.type==="Feature")ie.set(Rt(ze,se),ze);else for(const xe of ze.features)ie.set(Rt(xe,se),xe);return ie}class Ii extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,ie){return m._(this,void 0,void 0,function*(){const xe=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!Ie)return null;const ke=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=m.X,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(Le){this._feature=Le,this.extent=m.X,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const st of this._feature.geometry)Le.push([new m.P(st[0],st[1])]);return Le}{const Le=[];for(const st of this._feature.geometry){const dt=[];for(const ot of st)dt.push(new m.P(ot[0],ot[1]));Le.push(dt)}return Le}}toGeoJSON(Le,st,dt){return he.call(this,Le,st,dt)}}(this._features[qe])}}(Ie.features);let De=Y(ke);return De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),{vectorTile:ke,rawData:De.buffer}})}loadData(se){return m._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const xe=!!(se&&se.request&&se.request.collectResourceTiming)&&new m.bu(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new Fe(function({superclusterOptions:De,clusterProperties:qe}){if(!qe||!De)return De;const Le={},st={},dt={accumulated:null,zoom:0},ot={properties:null},Ct=Object.keys(qe);for(const Kt of Ct){const[nn,pn]=qe[Kt],En=m.bB(pn),hn=m.bB(typeof nn=="string"?[nn,["accumulated"],["get",Kt]]:nn);Le[Kt]=En.value,st[Kt]=hn.value}return De.map=Kt=>{ot.properties=Kt;const nn={};for(const pn of Ct)nn[pn]=Le[pn].evaluate(dt,ot);return nn},De.reduce=(Kt,nn)=>{ot.properties=nn;for(const pn of Ct)dt.accumulated=Kt[pn],Kt[pn]=st[pn].evaluate(dt,ot)},De}(se)).load((yield this._pendingData).features):(Ie=yield this._pendingData,new yn(Ie,se.geojsonVtOptions)),this.loaded={};const ke={};if(xe){const De=xe.finish();De&&(ke.resourceTiming={},ke.resourceTiming[se.source]=JSON.parse(JSON.stringify(De)))}return ke}catch(ke){if(delete this._pendingRequest,m.bA(ke))return{abandoned:!0};throw ke}var Ie})}getData(){return m._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const ie=this.loaded;return ie&&ie[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,ie){return m._(this,void 0,void 0,function*(){let xe=yield this.loadGeoJSON(se,ie);if(delete this._pendingRequest,typeof xe!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(j(xe,!0),se.filter){const Ie=m.bB(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(De=>`${De.key}: ${De.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(De=>Ie.value.evaluate({zoom:0},De))}}return xe})}loadGeoJSON(se,ie){return m._(this,void 0,void 0,function*(){const{promoteId:xe}=se;if(se.request){const Ie=yield m.h(se.request,ie);return this._dataUpdateable=zr(Ie.data,xe)?ei(Ie.data,xe):void 0,Ie.data}if(typeof se.data=="string")try{const Ie=JSON.parse(se.data);return this._dataUpdateable=zr(Ie,xe)?ei(Ie,xe):void 0,Ie}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ie,ke,De){var qe,Le,st,dt;if(ke.removeAll&&Ie.clear(),ke.remove)for(const ot of ke.remove)Ie.delete(ot);if(ke.add)for(const ot of ke.add){const Ct=Rt(ot,De);Ct!=null&&Ie.set(Ct,ot)}if(ke.update)for(const ot of ke.update){let Ct=Ie.get(ot.id);if(Ct==null)continue;const Kt=!ot.removeAllProperties&&(((qe=ot.removeProperties)===null||qe===void 0?void 0:qe.length)>0||((Le=ot.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((ot.newGeometry||ot.removeAllProperties||Kt)&&(Ct=Object.assign({},Ct),Ie.set(ot.id,Ct),Kt&&(Ct.properties=Object.assign({},Ct.properties))),ot.newGeometry&&(Ct.geometry=ot.newGeometry),ot.removeAllProperties)Ct.properties={};else if(((st=ot.removeProperties)===null||st===void 0?void 0:st.length)>0)for(const nn of ot.removeProperties)Object.prototype.hasOwnProperty.call(Ct.properties,nn)&&delete Ct.properties[nn];if(((dt=ot.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:nn,value:pn}of ot.addOrUpdateProperties)Ct.properties[nn]=pn}}(this._dataUpdateable,se.dataDiff,xe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return m._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class Ur{constructor(se){this.self=se,this.actor=new m.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ie,xe)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=xe},this.self.addProtocol=m.bh,this.self.removeProtocol=m.bi,this.self.registerRTLTextPlugin=ie=>{if(m.bC.isParsed())throw new Error("RTL text plugin already registered.");m.bC.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,xe)=>this._getDEMWorkerSource(ie,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RDT",(ie,xe)=>m._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,xe.source).removeTile(xe)})),this.actor.registerMessageHandler("GCEZ",(ie,xe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,xe.type,xe.source).getClusterExpansionZoom(xe)})),this.actor.registerMessageHandler("GCC",(ie,xe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,xe.type,xe.source).getClusterChildren(xe)})),this.actor.registerMessageHandler("GCL",(ie,xe)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,xe.type,xe.source).getClusterLeaves(xe)})),this.actor.registerMessageHandler("LD",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).loadData(xe)),this.actor.registerMessageHandler("GD",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).getData()),this.actor.registerMessageHandler("LT",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RT",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).reloadTile(xe)),this.actor.registerMessageHandler("AT",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).abortTile(xe)),this.actor.registerMessageHandler("RMT",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).removeTile(xe)),this.actor.registerMessageHandler("RS",(ie,xe)=>m._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][xe.type]||!this.workerSources[ie][xe.type][xe.source])return;const Ie=this.workerSources[ie][xe.type][xe.source];delete this.workerSources[ie][xe.type][xe.source],Ie.removeSource!==void 0&&Ie.removeSource(xe)})),this.actor.registerMessageHandler("RM",ie=>m._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie]})),this.actor.registerMessageHandler("SR",(ie,xe)=>m._(this,void 0,void 0,function*(){this.referrer=xe})),this.actor.registerMessageHandler("SRPS",(ie,xe)=>this._syncRTLPluginState(ie,xe)),this.actor.registerMessageHandler("IS",(ie,xe)=>m._(this,void 0,void 0,function*(){this.self.importScripts(xe)})),this.actor.registerMessageHandler("SI",(ie,xe)=>this._setImages(ie,xe)),this.actor.registerMessageHandler("UL",(ie,xe)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(xe.layers,xe.removedIds)})),this.actor.registerMessageHandler("SL",(ie,xe)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(xe)}))}_setImages(se,ie){return m._(this,void 0,void 0,function*(){this.availableImages[se]=ie;for(const xe in this.workerSources[se]){const Ie=this.workerSources[se][xe];for(const ke in Ie)Ie[ke].availableImages=ie}})}_syncRTLPluginState(se,ie){return m._(this,void 0,void 0,function*(){if(m.bC.isParsed())return m.bC.getState();if(ie.pluginStatus!=="loading")return m.bC.setState(ie),ie;const xe=ie.pluginURL;if(this.self.importScripts(xe),m.bC.isParsed()){const Ie={pluginStatus:"loaded",pluginURL:xe};return m.bC.setState(Ie),Ie}throw m.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${xe}`)})}_getAvailableImages(se){let ie=this.availableImages[se];return ie||(ie=[]),ie}_getLayerIndex(se){let ie=this.layerIndexes[se];return ie||(ie=this.layerIndexes[se]=new u),ie}_getWorkerSource(se,ie,xe){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][ie]||(this.workerSources[se][ie]={}),!this.workerSources[se][ie][xe]){const Ie={sendAsync:(ke,De)=>(ke.targetMapId=se,this.actor.sendAsync(ke,De))};switch(ie){case"vector":this.workerSources[se][ie][xe]=new b(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][ie][xe]=new Ii(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][ie][xe]=new this.externalWorkerSourceTypes[ie](Ie,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][ie][xe]}_getDEMWorkerSource(se,ie){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][ie]||(this.demWorkerSources[se][ie]=new C),this.demWorkerSources[se][ie]}}return m.i(self)&&(self.worker=new Ur(self)),Ur}),c("index",["exports","./shared"],function(m,u){var S="4.5.0";let P,M;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((r,l)=>{const d=requestAnimationFrame(r);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),l(u.c())})}),getImageData(v,r=0){return this.getImageCanvasContext(v).getImageData(-r,-r,v.width+2*r,v.height+2*r)},getImageCanvasContext(v){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=v.width,r.height=v.height,l.drawImage(v,0,0,v.width,v.height),l},resolveURL:v=>(P||(P=document.createElement("a")),P.href=v,P.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class C{static testProp(r){if(!C.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in C.docStyle)return r[l];return r[0]}static create(r,l,d){const g=window.document.createElement(r);return l!==void 0&&(g.className=l),d&&d.appendChild(g),g}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(r,l){r.style[C.transformProp]=l}static addEventListener(r,l,d,g={}){r.addEventListener(l,d,"passive"in g?g:g.capture)}static removeEventListener(r,l,d,g={}){r.removeEventListener(l,d,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static getScale(r){const l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,d){const g=l.boundingClientRect;return new u.P((d.clientX-g.left)/l.x-r.clientLeft,(d.clientY-g.top)/l.y-r.clientTop)}static mousePos(r,l){const d=C.getScale(r);return C.getPoint(r,d,l)}static touchPos(r,l){const d=[],g=C.getScale(r);for(let _=0;_<l.length;_++)d.push(C.getPoint(r,g,l[_]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}C.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!he&&j&&(q?X(v):B=v)}};let B,j,he=!1,q=!1;function X(v){const r=v.createTexture();v.bindTexture(v.TEXTURE_2D,r);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,j),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(r),he=!0}var G;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{B&&X(B),B=null,q=!0},j.onerror=()=>{he=!0,B=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let r,l,d,g;v.resetRequestQueue=()=>{r=[],l=0,d=0,g={}},v.addThrottleControl=z=>{const U=d++;return g[U]=z,U},v.removeThrottleControl=z=>{delete g[z],T()},v.getImage=(z,U,te=!0)=>new Promise((Q,fe)=>{R.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),u.e(z,{type:"image"}),r.push({abortController:U,requestParameters:z,supportImageRefresh:te,state:"queued",onError:we=>{fe(we)},onSuccess:we=>{Q(we)}}),T()});const _=z=>u._(this,void 0,void 0,function*(){z.state="running";const{requestParameters:U,supportImageRefresh:te,onError:Q,onSuccess:fe,abortController:we}=z,Pe=te===!1&&!u.i(self)&&!u.g(U.url)&&(!U.headers||Object.keys(U.headers).reduce((Be,Ke)=>Be&&Ke==="accept",!0));l++;const Oe=Pe?A(U,we):u.m(U,we);try{const Be=yield Oe;delete z.abortController,z.state="completed",Be.data instanceof HTMLImageElement||u.b(Be.data)?fe(Be):Be.data&&fe({data:yield(Me=Be.data,typeof createImageBitmap=="function"?u.d(Me):u.f(Me)),cacheControl:Be.cacheControl,expires:Be.expires})}catch(Be){delete z.abortController,Q(Be)}finally{l--,T()}var Me}),T=()=>{const z=(()=>{for(const U of Object.keys(g))if(g[U]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=l;U<z&&r.length>0;U++){const te=r.shift();te.abortController.signal.aborted?U--:_(te)}},A=(z,U)=>new Promise((te,Q)=>{const fe=new Image,we=z.url,Pe=z.credentials;Pe&&Pe==="include"?fe.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!u.s(we))&&(fe.crossOrigin="anonymous"),U.signal.addEventListener("abort",()=>{fe.src="",Q(u.c())}),fe.fetchPriority="high",fe.onload=()=>{fe.onerror=fe.onload=null,te({data:fe})},fe.onerror=()=>{fe.onerror=fe.onload=null,U.signal.aborted||Q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},fe.src=we})}(G||(G={})),G.resetRequestQueue();class ae{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function K(v){var r=new u.A(3);return r[0]=v[0],r[1]=v[1],r[2]=v[2],r}var W,E=function(v,r,l){return v[0]=r[0]-l[0],v[1]=r[1]-l[1],v[2]=r[2]-l[2],v};W=new u.A(3),u.A!=Float32Array&&(W[0]=0,W[1]=0,W[2]=0);var O=function(v){var r=v[0],l=v[1];return r*r+l*l};function D(v){const r=[];if(typeof v=="string")r.push({id:"default",url:v});else if(v&&v.length>0){const l=[];for(const{id:d,url:g}of v){const _=`${d}${g}`;l.indexOf(_)===-1&&(l.push(_),r.push({id:d,url:g}))}}return r}function ee(v,r,l){const d=v.split("?");return d[0]+=`${r}${l}`,d.join("?")}(function(){var v=new u.A(2);u.A!=Float32Array&&(v[0]=0,v[1]=0)})();class H{constructor(r,l,d,g){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(l,g)}update(r,l,d){const{width:g,height:_}=r,T=!(this.size&&this.size[0]===g&&this.size[1]===_||d),{context:A}=this,{gl:z}=A;if(this.useMipmap=!!(l&&l.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!l||l.premultiply!==!1)),T)this.size=[g,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,r):z.texImage2D(z.TEXTURE_2D,0,this.format,g,_,0,this.format,z.UNSIGNED_BYTE,r.data);else{const{x:U,y:te}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?z.texSubImage2D(z.TEXTURE_2D,0,U,te,z.RGBA,z.UNSIGNED_BYTE,r):z.texSubImage2D(z.TEXTURE_2D,0,U,te,g,_,z.RGBA,z.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(r,l,d){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||r),this.filter=r),l!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,l),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ve(v){const{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class _e extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,promiseResolve:d}of this.requestors)d(this._getImagesForIds(l));this.requestors=[]}}getImage(r){const l=this.images[r];if(l&&!l.data&&l.spriteData){const d=l.spriteData;l.data=new u.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let d=!0;const g=l.data||l.spriteData;return this._validateStretch(l.stretchX,g&&g.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,g&&g.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,l){if(!r)return!0;let d=0;for(const g of r){if(g[0]<d||g[1]<g[0]||l<g[1])return!1;d=g[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;const d=l.spriteData,g=d&&d.width||l.data.width,_=d&&d.height||l.data.height;return!(r[0]<0||g<r[0]||r[1]<0||_<r[1]||r[2]<0||g<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,d=!0){const g=this.getImage(r);if(d&&(g.data.width!==l.data.width||g.data.height!==l.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=g.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,d)=>{let g=!0;if(!this.isLoaded())for(const _ of r)this.images[_]||(g=!1);this.isLoaded()||g?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){const l={};for(const d of r){let g=this.getImage(d);g||(this.fire(new u.k("styleimagemissing",{id:d})),g=this.getImage(d)),g?l[d]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:u.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],d=this.getImage(r);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const g={w:d.data.width+2,h:d.data.height+2,x:0,y:0},_=new u.I(g,d);this.patterns[r]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new H(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:l,h:d}=u.p(r),g=this.atlasImage;g.resize({width:l||1,height:d||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],A=T.x+1,z=T.y+1,U=this.getImage(_).data,te=U.width,Q=U.height;u.R.copy(U,g,{x:0,y:0},{x:A,y:z},{width:te,height:Q}),u.R.copy(U,g,{x:0,y:Q-1},{x:A,y:z-1},{width:te,height:1}),u.R.copy(U,g,{x:0,y:0},{x:A,y:z+Q},{width:te,height:1}),u.R.copy(U,g,{x:te-1,y:0},{x:A-1,y:z},{width:1,height:Q}),u.R.copy(U,g,{x:0,y:0},{x:A+te,y:z},{width:1,height:Q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.getImage(l);d||u.w(`Image with ID: "${l}" was not found`),ve(d)&&this.updateImage(l,d)}}}const pe=1e20;function oe(v,r,l,d,g,_,T,A,z){for(let U=r;U<r+d;U++)ce(v,l*_+U,_,g,T,A,z);for(let U=l;U<l+g;U++)ce(v,U*_+r,1,d,T,A,z)}function ce(v,r,l,d,g,_,T){_[0]=0,T[0]=-pe,T[1]=pe,g[0]=v[r];for(let A=1,z=0,U=0;A<d;A++){g[A]=v[r+A*l];const te=A*A;do{const Q=_[z];U=(g[A]-g[Q]+te-Q*Q)/(A-Q)/2}while(U<=T[z]&&--z>-1);z++,_[z]=A,T[z]=U,T[z+1]=pe}for(let A=0,z=0;A<d;A++){for(;T[z+1]<A;)z++;const U=_[z],te=A-U;v[r+A*l]=g[U]+te*te}}class Y{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const l=[];for(const _ in r)for(const T of r[_])l.push(this._getAndCacheGlyphsPromise(_,T));const d=yield Promise.all(l),g={};for(const{stack:_,id:T,glyph:A}of d)g[_]||(g[_]={}),g[_][T]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return g})}_getAndCacheGlyphsPromise(r,l){return u._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let g=d.glyphs[l];if(g!==void 0)return{stack:r,id:l,glyph:g};if(g=this._tinySDF(d,r,l),g)return d.glyphs[l]=g,{stack:r,id:l,glyph:g};const _=Math.floor(l/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[_])return{stack:r,id:l,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[_]){const A=Y.loadGlyphRange(r,_,this.url,this.requestManager);d.requests[_]=A}const T=yield d.requests[_];for(const A in T)this._doesCharSupportLocalGlyph(+A)||(d.glyphs[+A]=T[+A]);return d.ranges[_]=!0,{stack:r,id:l,glyph:T[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,l,d){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(d))return;let _=r.tinySDF;if(!_){let A="400";/bold/i.test(l)?A="900":/medium/i.test(l)?A="500":/light/i.test(l)&&(A="200"),_=r.tinySDF=new Y.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:A})}const T=_.draw(String.fromCharCode(d));return{id:d,bitmap:new u.o({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}Y.loadGlyphRange=function(v,r,l,d){return u._(this,void 0,void 0,function*(){const g=256*r,_=g+255,T=d.transformRequest(l.replace("{fontstack}",v).replace("{range}",`${g}-${_}`),"Glyphs"),A=yield u.l(T,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${r}, ${g}-${_}`);const z={};for(const U of u.n(A.data))z[U.id]=U;return z})},Y.TinySDF=class{constructor({fontSize:v=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=l;const A=this.size=v+4*r,z=this._createCanvas(A),U=this.ctx=z.getContext("2d",{willReadFrequently:!0});U.font=`${T} ${_} ${v}px ${g}`,U.textBaseline="alphabetic",U.textAlign="left",U.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(v){const r=document.createElement("canvas");return r.width=r.height=v,r}draw(v){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(v),T=Math.ceil(l),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),z=Math.min(this.size-this.buffer,T+Math.ceil(d)),U=A+2*this.buffer,te=z+2*this.buffer,Q=Math.max(U*te,0),fe=new Uint8ClampedArray(Q),we={data:fe,width:U,height:te,glyphWidth:A,glyphHeight:z,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(A===0||z===0)return we;const{ctx:Pe,buffer:Oe,gridInner:Me,gridOuter:Be}=this;Pe.clearRect(Oe,Oe,A,z),Pe.fillText(v,Oe,Oe+T);const Ke=Pe.getImageData(Oe,Oe,A,z);Be.fill(pe,0,Q),Me.fill(0,0,Q);for(let je=0;je<z;je++)for(let Je=0;Je<A;Je++){const nt=Ke.data[4*(je*A+Je)+3]/255;if(nt===0)continue;const at=(je+Oe)*U+Je+Oe;if(nt===1)Be[at]=0,Me[at]=pe;else{const mt=.5-nt;Be[at]=mt>0?mt*mt:0,Me[at]=mt<0?mt*mt:0}}oe(Be,0,0,U,te,U,this.f,this.v,this.z),oe(Me,Oe,Oe,A,z,U,this.f,this.v,this.z);for(let je=0;je<Q;je++){const Je=Math.sqrt(Be[je])-Math.sqrt(Me[je]);fe[je]=Math.round(255-255*(Je/this.radius+this.cutoff))}return we}};class ne{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,l){return u.y(r.expression.evaluate(l))}interpolate(r,l,d){return{x:u.z.number(r.x,l.x,d),y:u.z.number(r.y,l.y,d),z:u.z.number(r.z,l.z,d)}}}let de;class be extends u.E{constructor(r){super(),de=de||new u.q({anchor:new u.D(u.v.light.anchor),position:new ne,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(de),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(u.r,r,l))for(const d in r){const g=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d){return(!d||d.validate!==!1)&&u.t(this,r.call(u.x,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ce=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Ue extends u.E{constructor(r){super(),this._transitionable=new u.T(Ce),this.setSky(r),this._transitioning=this._transitionable.untransitioned()}setSky(r,l={}){if(!this._validate(u.B,r,l))for(const d in r){const g=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d={}){return(d==null?void 0:d.validate)!==!1&&u.t(this,r.call(u.x,u.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Ae{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const d=r.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,l)),this.dashEntry[d]}getDashRanges(r,l,d){const g=[];let _=r.length%2==1?-r[r.length-1]*d:0,T=r[0]*d,A=!0;g.push({left:_,right:T,isDash:A,zeroLength:r[0]===0});let z=r[0];for(let U=1;U<r.length;U++){A=!A;const te=r[U];_=z*d,z+=te,T=z*d,g.push({left:_,right:T,isDash:A,zeroLength:te===0})}return g}addRoundDash(r,l,d){const g=l/2;for(let _=-d;_<=d;_++){const T=this.width*(this.nextRow+d+_);let A=0,z=r[A];for(let U=0;U<this.width;U++){U/z.right>1&&(z=r[++A]);const te=Math.abs(U-z.left),Q=Math.abs(U-z.right),fe=Math.min(te,Q);let we;const Pe=_/d*(g+1);if(z.isDash){const Oe=g-Math.abs(Pe);we=Math.sqrt(fe*fe+Oe*Oe)}else we=g-Math.sqrt(fe*fe+Pe*Pe);this.data[T+U]=Math.max(0,Math.min(255,we+128))}}}addRegularDash(r){for(let A=r.length-1;A>=0;--A){const z=r[A],U=r[A+1];z.zeroLength?r.splice(A,1):U&&U.isDash===z.isDash&&(U.left=z.left,r.splice(A,1))}const l=r[0],d=r[r.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const g=this.width*this.nextRow;let _=0,T=r[_];for(let A=0;A<this.width;A++){A/T.right>1&&(T=r[++_]);const z=Math.abs(A-T.left),U=Math.abs(A-T.right),te=Math.min(z,U);this.data[g+A]=Math.max(0,Math.min(255,(T.isDash?te:-te)+128))}}addDash(r,l){const d=l?7:0,g=2*d+1;if(this.nextRow+g>this.height)return u.w("LineAtlas out of space"),null;let _=0;for(let A=0;A<r.length;A++)_+=r[A];if(_!==0){const A=this.width/_,z=this.getDashRanges(r,this.width,A);l?this.addRoundDash(z,A,d):this.addRegularDash(z)}const T={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:_};return this.nextRow+=g,this.dirty=!0,T}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class We{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<We.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const Ze=Math.floor(b.hardwareConcurrency/2);let it,ct;function vt(){return it||(it=new We),it}We.workerCount=u.C(globalThis)?Math.max(Math.min(Ze,3),1):1;class Mt{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;const d=this.workerPool.acquire(l);for(let g=0;g<d.length;g++){const _=new u.F(d[g],l);_.name=`Worker ${g}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){const d=[];for(const g of this.actors)d.push(g.sendAsync({type:r,data:l}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(const d of this.actors)d.registerMessageHandler(r,l)}}function pt(){return ct||(ct=new Mt(vt(),u.G),ct.registerMessageHandler("GR",(v,r,l)=>u.m(r,l))),ct}function xt(v,r){const l=u.H();return u.J(l,l,[1,1,0]),u.K(l,l,[.5*v.width,.5*v.height,1]),u.L(l,l,v.calculatePosMatrix(r.toUnwrapped()))}function Zt(v,r,l,d,g,_){const T=function(Q,fe,we){if(Q)for(const Pe of Q){const Oe=fe[Pe];if(Oe&&Oe.source===we&&Oe.type==="fill-extrusion")return!0}else for(const Pe in fe){const Oe=fe[Pe];if(Oe.source===we&&Oe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,v.id),A=_.maxPitchScaleFactor(),z=v.tilesIn(d,A,T);z.sort(Wt);const U=[];for(const Q of z)U.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(r,l,v._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,g,_,A,xt(v.transform,Q.tileID))});const te=function(Q){const fe={},we={};for(const Pe of Q){const Oe=Pe.queryResults,Me=Pe.wrappedTileID,Be=we[Me]=we[Me]||{};for(const Ke in Oe){const je=Oe[Ke],Je=Be[Ke]=Be[Ke]||{},nt=fe[Ke]=fe[Ke]||[];for(const at of je)Je[at.featureIndex]||(Je[at.featureIndex]=!0,nt.push(at))}}return fe}(U);for(const Q in te)te[Q].forEach(fe=>{const we=fe.feature,Pe=v.getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=Pe});return te}function Wt(v,r){const l=v.tileID,d=r.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}function ln(v,r,l){return u._(this,void 0,void 0,function*(){let d=v;if(v.url?d=(yield u.h(r.transformRequest(v.url,"Source"),l)).data:yield b.frameAsync(l),!d)return null;const g=u.M(u.e(d,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(g.vectorLayerIds=d.vector_layers.map(_=>_.id)),g})}class et{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}extend(r){const l=this._sw,d=this._ne;let g,_;if(r instanceof u.N)g=r,_=r;else{if(!(r instanceof et))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(et.convert(r)):this.extend(u.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.N.convert(r)):this;if(g=r._sw,_=r._ne,!g||!_)return this}return l||d?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),d.lng=Math.max(_.lng,d.lng),d.lat=Math.max(_.lat,d.lat)):(this._sw=new u.N(g.lng,g.lat),this._ne=new u.N(_.lng,_.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:d}=u.N.convert(r);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&g}static convert(r){return r instanceof et?r:r&&new et(r)}static fromLngLat(r,l=0){const d=360*l/40075017,g=d/Math.cos(Math.PI/180*r.lat);return new et(new u.N(r.lng-g,r.lat-d),new u.N(r.lng+g,r.lat+d))}}class _n{constructor(r,l,d){this.bounds=et.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),d=Math.floor(u.O(this.bounds.getWest())*l),g=Math.floor(u.Q(this.bounds.getNorth())*l),_=Math.ceil(u.O(this.bounds.getEast())*l),T=Math.ceil(u.Q(this.bounds.getSouth())*l);return r.x>=d&&r.x<_&&r.y>=g&&r.y<T}}class un extends u.E{constructor(r,l,d,g){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(l,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield ln(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new _n(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((_,T)=>{r.reloadPromise={resolve:_,reject:T}})}else r.actor=this.dispatcher.getActor(),g="LT";r.abortController=new AbortController;try{const _=yield r.actor.sendAsync({type:g,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,_)}catch(_){if(delete r.abortController,r.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends u.E{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},l),u.e(this,u.M(l,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield ln(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new _n(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield G.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const g=this.map.painter.context,_=g.gl,T=d.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new H(g,T,_.RGBA,{useMipmap:!0}),r.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Se extends Vt{constructor(r,l,d,g){super(r,l,d,g),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const g=yield G.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(g&&g.data){const _=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&r.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const T=u.b(_)&&u.U()?_:yield this.readImageNow(_),A={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const z=yield r.actor.sendAsync({type:"LDT",data:A});r.dem=z,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(g){if(delete r.abortController,r.aborted)r.state="unloaded";else if(g)throw r.state="errored",g}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const l=r.width+2,d=r.height+2;try{return new u.R({width:l,height:d},yield u.W(r,-1,-1,l,d))}catch{}}return b.getImageData(r,1)})}_getNeighboringTiles(r){const l=r.canonical,d=Math.pow(2,l.z),g=(l.x-1+d)%d,_=l.x===0?r.wrap-1:r.wrap,T=(l.x+1+d)%d,A=l.x+1===d?r.wrap+1:r.wrap,z={};return z[new u.S(r.overscaledZ,_,l.z,g,l.y).key]={backfilled:!1},z[new u.S(r.overscaledZ,A,l.z,T,l.y).key]={backfilled:!1},l.y>0&&(z[new u.S(r.overscaledZ,_,l.z,g,l.y-1).key]={backfilled:!1},z[new u.S(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},z[new u.S(r.overscaledZ,A,l.z,T,l.y-1).key]={backfilled:!1}),l.y+1<d&&(z[new u.S(r.overscaledZ,_,l.z,g,l.y+1).key]={backfilled:!1},z[new u.S(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},z[new u.S(r.overscaledZ,A,l.z,T,l.y+1).key]={backfilled:!1}),z}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class N extends u.E{constructor(r,l,d,g){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(g),this._data=l.data,this._options=u.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const _=u.X/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*_,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*_,extent:u.X,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.X,radius:(l.clusterRadius||50)*_,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:d}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const l=u.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let g=null;d.resourceTiming&&d.resourceTiming[this.id]&&(g=d.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&u.e(_,{resourceTiming:g}),this.fire(new u.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const g=yield this.actor.sendAsync({type:l,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(g,this.map.painter,l==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var L=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ye extends u.E{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new u.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const l=r.map(u.Z.fromLngLat);this.tileID=function(g){let _=1/0,T=1/0,A=-1/0,z=-1/0;for(const fe of g)_=Math.min(_,fe.x),T=Math.min(T,fe.y),A=Math.max(A,fe.x),z=Math.max(z,fe.y);const U=Math.max(A-_,z-T),te=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),Q=Math.pow(2,te);return new u.a1(te,Math.floor((_+A)/2*Q),Math.floor((T+z)/2*Q))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,u.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,u.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new H(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Xe extends ye{constructor(r,l,d,g){super(r,l,d,g),this.roundZoom=!0,this.type="video",this.options=l}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield u.a3(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new u.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new H(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tt extends ye{constructor(r,l,d,g){super(r,l,d,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new H(l,this.canvas,d.RGBA,{premultiply:!0});let g=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,g=!0)}g&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const ht={},le=v=>{switch(v){case"geojson":return N;case"image":return ye;case"raster":return Vt;case"raster-dem":return Se;case"vector":return un;case"video":return Xe;case"canvas":return tt}return ht[v]},k="RTLPluginLoaded";class $ extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=pt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(l,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(k))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ee=null;function Ve(){return Ee||(Ee=new $),Ee}class rt{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a4(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,_){const T={};if(!_)return T;for(const A of g){const z=A.layerIds.map(U=>_.getLayer(U)).filter(Boolean);if(z.length!==0){A.layers=z,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(U=>z.filter(te=>te.id===U)[0]));for(const U of z)T[U.id]=A}}return T}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof u.a6){if(this.hasSymbolBuckets=!0,!d)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof u.a6&&_.hasRTLText){this.hasRTLText=!0,Ve().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(g).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const g=this.buckets[d];g.uploadPending()&&g.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new H(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new H(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,g,_,T,A,z,U,te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:te,transform:z,params:A,queryPadding:this.queryPadding*U},r,l,d):{}}querySourceFeatures(r,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const g=d.loadVTLayers(),_=l&&l.sourceLayer?l.sourceLayer:"",T=g._geojsonTileLayer||g[_];if(!T)return;const A=u.a7(l&&l.filter),{z,x:U,y:te}=this.tileID.canonical,Q={z,x:U,y:te};for(let fe=0;fe<T.length;fe++){const we=T.feature(fe);if(A.needGeometry){const Me=u.a8(we,!0);if(!A.filter(new u.a9(this.tileID.overscaledZ),Me,this.tileID.canonical))continue}else if(!A.filter(new u.a9(this.tileID.overscaledZ),we))continue;const Pe=d.getId(we,_),Oe=new u.aa(we,z,U,te,Pe);Oe.tile=Q,r.push(Oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const d=u.ab(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let g=!1;if(this.expirationTime>d)g=!1;else if(l)if(this.expirationTime<l)g=!0;else{const _=this.expirationTime-l;_?this.expirationTime=d+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const _=this.buckets[g],T=_.layers[0].sourceLayer||"_geojsonTileLayer",A=d[T],z=r[T];if(!A||!z||Object.keys(z).length===0)continue;_.update(z,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const U=l&&l.style&&l.style.getLayer(g);U&&(this.queryPadding=Math.max(this.queryPadding,U.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=b.now()+r}setDependencies(r,l){const d={};for(const g of l)d[g]=!0;this.dependencies[r]=d}hasDependency(r,l){for(const d of r){const g=this.dependencies[d];if(g){for(const _ of l)if(g[_])return!0}}return!1}}class Ge{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:l,timeout:void 0};if(d!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},d)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const d=r.wrapped().key,g=l===void 0?0:this.data[d].indexOf(l),_=this.data[d][g];return this.data[d].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(_.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const d in this.data)for(const g of this.data[d])r(g.value)||l.push(g);for(const d of l)this.remove(d.value.tileID,d)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){const g=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},u.e(this.stateChanges[r][g],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==g&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const _ in this.state[r][g])d[_]||(this.deletedStates[r][g][_]=null)}else for(const _ in d)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][_]===null&&delete this.deletedStates[r][g][_]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;const g=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][d]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(d in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][d]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,l){const d=String(l),g=u.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][l];if(_===null)return{};for(const T in _)delete g[T]}return g}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const d={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const T in this.stateChanges[g])this.state[g][T]||(this.state[g][T]={}),u.e(this.state[g][T],this.stateChanges[g][T]),_[T]=this.state[g][T];d[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const T in this.state[g])_[T]={},this.state[g][T]={};else for(const T in this.deletedStates[g]){if(this.deletedStates[g][T]===null)this.state[g][T]={};else for(const A of Object.keys(this.deletedStates[g][T]))delete this.state[g][T][A];_[T]=this.state[g][T]}d[g]=d[g]||{},u.e(d[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const g in r)r[g].setFeatureState(d,l)}}class It extends u.E{constructor(r,l,d){super(),this.id=r,this.dispatcher=d,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,T,A)=>{const z=new(le(_.type))(g,_,T,A);if(z.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${z.id}`);return z})(r,l,d,this),this._tiles={},this._cache=new Ge(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,d){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,d)}catch(g){r.state="errored",g.status!==404?this._source.fire(new u.j(g,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(yn).map(r=>r.key)}getRenderableIds(r){const l=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&l.push(this._tiles[d]);return r?l.sort((d,g)=>{const _=d.tileID,T=g.tileID,A=new u.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),z=new u.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-T.overscaledZ||z.y-A.y||z.x-A.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(yn).map(d=>d.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return u._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),yield this._loadTile(d,r,l))})}_tileLoaded(r,l,d){r.timeAdded=b.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let g=0;g<l.length;g++){const _=l[g];if(r.neighboringTiles&&r.neighboringTiles[_]){const T=this.getTileByID(_);d(r,T),d(T,r)}}function d(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-g.tileID.canonical.x;const A=_.tileID.canonical.y-g.tileID.canonical.y,z=Math.pow(2,g.tileID.canonical.z),U=_.tileID.key;T===0&&A===0||Math.abs(A)>1||(Math.abs(T)>1&&(Math.abs(T+z)===1?T+=z:Math.abs(T-z)===1&&(T-=z)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,T,A),g.neighboringTiles&&g.neighboringTiles[U]&&(g.neighboringTiles[U].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,g){for(const _ in this._tiles){let T=this._tiles[_];if(g[_]||!T.hasData()||T.tileID.overscaledZ<=l||T.tileID.overscaledZ>d)continue;let A=T.tileID;for(;T&&T.tileID.overscaledZ>l+1;){const U=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[U.key],T&&T.hasData()&&(A=U)}let z=A;for(;z.overscaledZ>l;)if(z=z.scaledTo(z.overscaledZ-1),r[z.key]){g[A.key]=A;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){const g=r.scaledTo(d),_=this._getLoadedTile(g);if(_)return _}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const d={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+l),d[_.tileID.key]=_}this._tiles=d;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(r,l,d,g,_,T){const A={},z={},U=Object.keys(r),te=b.now();for(const Q of U){const fe=r[Q],we=this._tiles[Q];if(!we||we.fadeEndTime!==0&&we.fadeEndTime<=te)continue;const Pe=this.findLoadedParent(fe,l),Oe=this.findLoadedSibling(fe),Me=Pe||Oe||null;Me&&(this._addTile(Me.tileID),A[Me.tileID.key]=Me.tileID),z[Q]=fe}this._retainLoadedChildren(z,g,d,r);for(const Q in A)r[Q]||(this._coveredTiles[Q]=!0,r[Q]=A[Q]);if(T){const Q={},fe={};for(const we of _)this._tiles[we.key].hasData()?Q[we.key]=we:fe[we.key]=we;for(const we in fe){const Pe=fe[we].children(this._source.maxzoom);this._tiles[Pe[0].key]&&this._tiles[Pe[1].key]&&this._tiles[Pe[2].key]&&this._tiles[Pe[3].key]&&(Q[Pe[0].key]=r[Pe[0].key]=Pe[0],Q[Pe[1].key]=r[Pe[1].key]=Pe[1],Q[Pe[2].key]=r[Pe[2].key]=Pe[2],Q[Pe[3].key]=r[Pe[3].key]=Pe[3],delete fe[we])}for(const we in fe){const Pe=fe[we],Oe=this.findLoadedParent(Pe,this._source.minzoom),Me=this.findLoadedSibling(Pe),Be=Oe||Me||null;if(Be){Q[Be.tileID.key]=r[Be.tileID.key]=Be.tileID;for(const Ke in Q)Q[Ke].isChildOf(Be.tileID)&&delete Q[Ke]}}for(const we in this._tiles)Q[we]||(this._coveredTiles[we]=!0)}}update(r,l){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new u.S(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(te=>this._source.hasTile(te)))):d=[];const g=r.coveringZoomLevel(this._source),_=Math.max(g-It.maxOverzooming,this._source.minzoom),T=Math.max(g+It.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const te={};for(const Q of d)if(Q.canonical.z>this._source.minzoom){const fe=Q.scaledTo(Q.canonical.z-1);te[fe.key]=fe;const we=Q.scaledTo(Math.max(this._source.minzoom,Math.min(Q.canonical.z,5)));te[we.key]=we}d=d.concat(Object.values(te))}const A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(d,g);Sn(this._source.type)&&this._updateCoveredAndRetainedTiles(z,_,T,g,d,l);for(const te in z)this._tiles[te].clearFadeHold();const U=u.ac(this._tiles,z);for(const te of U){const Q=this._tiles[te];Q.hasSymbolBuckets&&!Q.holdingForFade()?Q.setHoldDuration(this.map._fadeDuration):Q.hasSymbolBuckets&&!Q.symbolFadeFinished()||this._removeTile(te)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){var d;const g={},_={},T=Math.max(l-It.maxOverzooming,this._source.minzoom),A=Math.max(l+It.maxUnderzooming,this._source.minzoom),z={};for(const U of r){const te=this._addTile(U);g[U.key]=U,te.hasData()||l<this._source.maxzoom&&(z[U.key]=U)}this._retainLoadedChildren(z,l,A,g);for(const U of r){let te=this._tiles[U.key];if(te.hasData())continue;if(l+1>this._source.maxzoom){const fe=U.children(this._source.maxzoom)[0],we=this.getTile(fe);if(we&&we.hasData()){g[fe.key]=fe;continue}}else{const fe=U.children(this._source.maxzoom);if(g[fe[0].key]&&g[fe[1].key]&&g[fe[2].key]&&g[fe[3].key])continue}let Q=te.wasRequested();for(let fe=U.overscaledZ-1;fe>=T;--fe){const we=U.scaledTo(fe);if(_[we.key])break;if(_[we.key]=!0,te=this.getTile(we),!te&&Q&&(te=this._addTile(we)),te){const Pe=te.hasData();if((Pe||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||Q)&&(g[we.key]=we),Q=te.wasRequested(),Pe)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let d,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}l.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(_),d)break;g=_}for(const _ of l)this._loadedParentTiles[_]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const l=this._tiles[r].tileID,d=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const d=l;return l||(l=new rt(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,d||this._source.fire(new u.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){const l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,d){const g=[],_=this.transform;if(!_)return g;const T=d?_.getCameraQueryGeometry(r):r,A=r.map(Pe=>_.pointCoordinate(Pe,this.terrain)),z=T.map(Pe=>_.pointCoordinate(Pe,this.terrain)),U=this.getIds();let te=1/0,Q=1/0,fe=-1/0,we=-1/0;for(const Pe of z)te=Math.min(te,Pe.x),Q=Math.min(Q,Pe.y),fe=Math.max(fe,Pe.x),we=Math.max(we,Pe.y);for(let Pe=0;Pe<U.length;Pe++){const Oe=this._tiles[U[Pe]];if(Oe.holdingForFade())continue;const Me=Oe.tileID,Be=Math.pow(2,_.zoom-Oe.tileID.overscaledZ),Ke=l*Oe.queryPadding*u.X/Oe.tileSize/Be,je=[Me.getTilePoint(new u.Z(te,Q)),Me.getTilePoint(new u.Z(fe,we))];if(je[0].x-Ke<u.X&&je[0].y-Ke<u.X&&je[1].x+Ke>=0&&je[1].y+Ke>=0){const Je=A.map(at=>Me.getTilePoint(at)),nt=z.map(at=>Me.getTilePoint(at));g.push({tile:Oe,tileID:Me,queryGeometry:Je,cameraQueryGeometry:nt,scale:Be})}}return g}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(Sn(this._source.type)){const r=b.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){const g=this._tiles[r];g&&g.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(const d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}}function yn(v,r){const l=Math.abs(2*v.wrap)-+(v.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return v.overscaledZ-r.overscaledZ||d-l||r.canonical.y-v.canonical.y||r.canonical.x-v.canonical.x}function Sn(v){return v==="raster"||v==="image"||v==="video"}It.maxOverzooming=10,It.maxUnderzooming=3;class Rt{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ad(r,0,1);let l=1,d=this._distances[l];const g=r*this.paddedLength+this.padding;for(;d<g&&l<this._distances.length;)d=this._distances[++l];const _=l-1,T=this._distances[_],A=d-T,z=A>0?(g-T)/A:0;return this.points[_].mult(1-z).add(this.points[l].mult(z))}}function zr(v,r){let l=!0;return v==="always"||v!=="never"&&r!=="never"||(l=!1),l}class ei{constructor(r,l,d){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(l/d);for(let T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,d,g,_){this._forEachCell(l,d,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(r,l,d,g){this._forEachCell(l-g,d-g,l+g,d+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(d),this.circles.push(g)}_insertBoxCell(r,l,d,g,_,T){this.boxCells[_].push(T)}_insertCircleCell(r,l,d,g,_,T){this.circleCells[_].push(T)}_query(r,l,d,g,_,T,A){if(d<0||r>this.width||g<0||l>this.height)return[];const z=[];if(r<=0&&l<=0&&this.width<=d&&this.height<=g){if(_)return[{key:null,x1:r,y1:l,x2:d,y2:g}];for(let U=0;U<this.boxKeys.length;U++)z.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const te=this.circles[3*U],Q=this.circles[3*U+1],fe=this.circles[3*U+2];z.push({key:this.circleKeys[U],x1:te-fe,y1:Q-fe,x2:te+fe,y2:Q+fe})}}else this._forEachCell(r,l,d,g,this._queryCell,z,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},A);return z}query(r,l,d,g){return this._query(r,l,d,g,!1,null)}hitTest(r,l,d,g,_,T){return this._query(r,l,d,g,!0,_,T).length>0}hitTestCircle(r,l,d,g,_){const T=r-d,A=r+d,z=l-d,U=l+d;if(A<0||T>this.width||U<0||z>this.height)return!1;const te=[];return this._forEachCell(T,z,A,U,this._queryCellCircle,te,{hitTest:!0,overlapMode:g,circle:{x:r,y:l,radius:d},seenUids:{box:{},circle:{}}},_),te.length>0}_queryCell(r,l,d,g,_,T,A,z){const{seenUids:U,hitTest:te,overlapMode:Q}=A,fe=this.boxCells[_];if(fe!==null){const Pe=this.bboxes;for(const Oe of fe)if(!U.box[Oe]){U.box[Oe]=!0;const Me=4*Oe,Be=this.boxKeys[Oe];if(r<=Pe[Me+2]&&l<=Pe[Me+3]&&d>=Pe[Me+0]&&g>=Pe[Me+1]&&(!z||z(Be))&&(!te||!zr(Q,Be.overlapMode))&&(T.push({key:Be,x1:Pe[Me],y1:Pe[Me+1],x2:Pe[Me+2],y2:Pe[Me+3]}),te))return!0}}const we=this.circleCells[_];if(we!==null){const Pe=this.circles;for(const Oe of we)if(!U.circle[Oe]){U.circle[Oe]=!0;const Me=3*Oe,Be=this.circleKeys[Oe];if(this._circleAndRectCollide(Pe[Me],Pe[Me+1],Pe[Me+2],r,l,d,g)&&(!z||z(Be))&&(!te||!zr(Q,Be.overlapMode))){const Ke=Pe[Me],je=Pe[Me+1],Je=Pe[Me+2];if(T.push({key:Be,x1:Ke-Je,y1:je-Je,x2:Ke+Je,y2:je+Je}),te)return!0}}}return!1}_queryCellCircle(r,l,d,g,_,T,A,z){const{circle:U,seenUids:te,overlapMode:Q}=A,fe=this.boxCells[_];if(fe!==null){const Pe=this.bboxes;for(const Oe of fe)if(!te.box[Oe]){te.box[Oe]=!0;const Me=4*Oe,Be=this.boxKeys[Oe];if(this._circleAndRectCollide(U.x,U.y,U.radius,Pe[Me+0],Pe[Me+1],Pe[Me+2],Pe[Me+3])&&(!z||z(Be))&&!zr(Q,Be.overlapMode))return T.push(!0),!0}}const we=this.circleCells[_];if(we!==null){const Pe=this.circles;for(const Oe of we)if(!te.circle[Oe]){te.circle[Oe]=!0;const Me=3*Oe,Be=this.circleKeys[Oe];if(this._circlesCollide(Pe[Me],Pe[Me+1],Pe[Me+2],U.x,U.y,U.radius)&&(!z||z(Be))&&!zr(Q,Be.overlapMode))return T.push(!0),!0}}}_forEachCell(r,l,d,g,_,T,A,z){const U=this._convertToXCellCoord(r),te=this._convertToYCellCoord(l),Q=this._convertToXCellCoord(d),fe=this._convertToYCellCoord(g);for(let we=U;we<=Q;we++)for(let Pe=te;Pe<=fe;Pe++)if(_.call(this,r,l,d,g,this.xCellCount*Pe+we,T,A,z))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,d,g,_,T){const A=g-r,z=_-l,U=d+T;return U*U>A*A+z*z}_circleAndRectCollide(r,l,d,g,_,T,A){const z=(T-g)/2,U=Math.abs(r-(g+z));if(U>z+d)return!1;const te=(A-_)/2,Q=Math.abs(l-(_+te));if(Q>te+d)return!1;if(U<=z||Q<=te)return!0;const fe=U-z,we=Q-te;return fe*fe+we*we<=d*d}}function Ii(v,r,l,d,g){const _=u.H();return r?(u.K(_,_,[1/g,1/g,1]),l||u.ae(_,_,d.angle)):u.L(_,d.labelPlaneMatrix,v),_}function Ur(v,r,l,d,g){if(r){const _=u.af(v);return u.K(_,_,[g,g,1]),l||u.ae(_,_,-d.angle),_}return d.glCoordMatrix}function ze(v,r,l){let d;l?(d=[v.x,v.y,l(v.x,v.y),1],u.ag(d,d,r)):(d=[v.x,v.y,0,1],function(_,T,A){const z=T[0],U=T[1];_[0]=A[0]*z+A[4]*U+A[12],_[1]=A[1]*z+A[5]*U+A[13],_[3]=A[3]*z+A[7]*U+A[15]}(d,d,r));const g=d[3];return{point:new u.P(d[0]/g,d[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function se(v,r){return .5+v/r*.5}function ie(v,r){return v.x>=-r[0]&&v.x<=r[0]&&v.y>=-r[1]&&v.y<=r[1]}function xe(v,r,l,d,g,_,T,A,z,U,te,Q,fe,we,Pe){const Oe=d?v.textSizeData:v.iconSizeData,Me=u.ah(Oe,l.transform.zoom),Be=[256/l.width*2+1,256/l.height*2+1],Ke=d?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Ke.clear();const je=v.lineVertexArray,Je=d?v.text.placedSymbolArray:v.icon.placedSymbolArray,nt=l.transform.width/l.transform.height;let at=!1;for(let mt=0;mt<Je.length;mt++){const wt=Je.get(mt);if(wt.hidden||wt.writingMode===u.ai.vertical&&!at){nn(wt.numGlyphs,Ke);continue}at=!1;const Dt=ze(new u.P(wt.anchorX,wt.anchorY),r,Pe);if(!ie(Dt.point,Be)){nn(wt.numGlyphs,Ke);continue}const Bt=se(l.transform.cameraToCenterDistance,Dt.signedDistanceFromCamera),bt=u.aj(Oe,Me,wt),Tt=T?bt/Bt:bt*Bt,Gt={getElevation:Pe,labelPlaneMatrix:g,lineVertexArray:je,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:U,tileAnchorPoint:new u.P(wt.anchorX,wt.anchorY),unwrappedTileID:te,width:Q,height:fe,translation:we},mn=De(Gt,wt,Tt,!1,A,r,_,v.glyphOffsetArray,Ke,nt,z);at=mn.useVertical,(mn.notEnoughRoom||at||mn.needsFlipping&&De(Gt,wt,Tt,!0,A,r,_,v.glyphOffsetArray,Ke,nt,z).notEnoughRoom)&&nn(wt.numGlyphs,Ke)}d?v.text.dynamicLayoutVertexBuffer.updateData(Ke):v.icon.dynamicLayoutVertexBuffer.updateData(Ke)}function Ie(v,r,l,d,g,_,T,A){const z=_.glyphStartIndex+_.numGlyphs,U=_.lineStartIndex,te=_.lineStartIndex+_.lineLength,Q=r.getoffsetX(_.glyphStartIndex),fe=r.getoffsetX(z-1),we=Ct(v*Q,l,d,g,_.segment,U,te,A,T);if(!we)return null;const Pe=Ct(v*fe,l,d,g,_.segment,U,te,A,T);return Pe?A.projectionCache.anyProjectionOccluded?null:{first:we,last:Pe}:null}function ke(v,r,l,d){return v===u.ai.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*d?{useVertical:!0}:(v===u.ai.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function De(v,r,l,d,g,_,T,A,z,U,te){const Q=l/24,fe=r.lineOffsetX*Q,we=r.lineOffsetY*Q;let Pe;if(r.numGlyphs>1){const Oe=r.glyphStartIndex+r.numGlyphs,Me=r.lineStartIndex,Be=r.lineStartIndex+r.lineLength,Ke=Ie(Q,A,fe,we,d,r,te,v);if(!Ke)return{notEnoughRoom:!0};const je=ze(Ke.first.point,T,v.getElevation).point,Je=ze(Ke.last.point,T,v.getElevation).point;if(g&&!d){const nt=ke(r.writingMode,je,Je,U);if(nt)return nt}Pe=[Ke.first];for(let nt=r.glyphStartIndex+1;nt<Oe-1;nt++)Pe.push(Ct(Q*A.getoffsetX(nt),fe,we,d,r.segment,Me,Be,v,te));Pe.push(Ke.last)}else{if(g&&!d){const Me=ze(v.tileAnchorPoint,_,v.getElevation).point,Be=r.lineStartIndex+r.segment+1,Ke=new u.P(v.lineVertexArray.getx(Be),v.lineVertexArray.gety(Be)),je=ze(Ke,_,v.getElevation),Je=je.signedDistanceFromCamera>0?je.point:function(at,mt,wt,Dt,Bt,bt){return qe(at,mt,wt,1,Bt,bt)}(v.tileAnchorPoint,Ke,Me,0,_,v),nt=ke(r.writingMode,Me,Je,U);if(nt)return nt}const Oe=Ct(Q*A.getoffsetX(r.glyphStartIndex),fe,we,d,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,v,te);if(!Oe||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Pe=[Oe]}for(const Oe of Pe)u.ak(z,Oe.point,Oe.angle);return{}}function qe(v,r,l,d,g,_){const T=v.add(v.sub(r)._unit()),A=g!==void 0?ze(T,g,_.getElevation).point:st(T.x,T.y,_).point,z=l.sub(A);return l.add(z._mult(d/z.mag()))}function Le(v,r,l){const d=r.projectionCache;if(d.projections[v])return d.projections[v];const g=new u.P(r.lineVertexArray.getx(v),r.lineVertexArray.gety(v)),_=st(g.x,g.y,r);if(_.signedDistanceFromCamera>0)return d.projections[v]=_.point,d.anyProjectionOccluded=d.anyProjectionOccluded||_.isOccluded,_.point;const T=v-l.direction;return function(A,z,U,te,Q){return qe(A,z,U,te,void 0,Q)}(l.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),g,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,r)}function st(v,r,l){const d=v+l.translation[0],g=r+l.translation[1];let _;return!l.pitchWithMap&&l.projection.useSpecialProjectionForSymbols?(_=l.projection.projectTileCoordinates(d,g,l.unwrappedTileID,l.getElevation),_.point.x=(.5*_.point.x+.5)*l.width,_.point.y=(.5*-_.point.y+.5)*l.height):(_=ze(new u.P(d,g),l.labelPlaneMatrix,l.getElevation),_.isOccluded=!1),_}function dt(v,r,l){return v._unit()._perp()._mult(r*l)}function ot(v,r,l,d,g,_,T,A,z){if(A.projectionCache.offsets[v])return A.projectionCache.offsets[v];const U=l.add(r);if(v+z.direction<d||v+z.direction>=g)return A.projectionCache.offsets[v]=U,U;const te=Le(v+z.direction,A,z),Q=dt(te.sub(l),T,z.direction),fe=l.add(Q),we=te.add(Q);return A.projectionCache.offsets[v]=u.al(_,U,fe,we)||U,A.projectionCache.offsets[v]}function Ct(v,r,l,d,g,_,T,A,z){const U=d?v-r:v+r;let te=U>0?1:-1,Q=0;d&&(te*=-1,Q=Math.PI),te<0&&(Q+=Math.PI);let fe,we=te>0?_+g:_+g+1;A.projectionCache.cachedAnchorPoint?fe=A.projectionCache.cachedAnchorPoint:(fe=st(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=fe);let Pe,Oe,Me=fe,Be=fe,Ke=0,je=0;const Je=Math.abs(U),nt=[];let at;for(;Ke+je<=Je;){if(we+=te,we<_||we>=T)return null;Ke+=je,Be=Me,Oe=Pe;const Dt={absOffsetX:Je,direction:te,distanceFromAnchor:Ke,previousVertex:Be};if(Me=Le(we,A,Dt),l===0)nt.push(Be),at=Me.sub(Be);else{let Bt;const bt=Me.sub(Be);Bt=bt.mag()===0?dt(Le(we+te,A,Dt).sub(Me),l,te):dt(bt,l,te),Oe||(Oe=Be.add(Bt)),Pe=ot(we,Bt,Me,_,T,Oe,l,A,Dt),nt.push(Oe),at=Pe.sub(Oe)}je=at.mag()}const mt=at._mult((Je-Ke)/je)._add(Oe||Be),wt=Q+Math.atan2(Me.y-Be.y,Me.x-Be.x);return nt.push(mt),{point:mt,angle:z?wt:0,path:nt}}const Kt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function nn(v,r){for(let l=0;l<v;l++){const d=r.length;r.resize(d+4),r.float32.set(Kt,3*d)}}const pn=100;class En{constructor(r,l,d=new ei(r.width+200,r.height+200,25),g=new ei(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=l,this.grid=d,this.ignoredGrid=g,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+pn,this.screenBottomBoundary=r.height+pn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,d,g,_,T,A,z,U,te,Q){const fe=r.anchorPointX+z[0],we=r.anchorPointY+z[1],Pe=this.projectAndGetPerspectiveRatio(g,fe,we,_,te),Oe=this._projectCollisionBox(r,d,g,_,T,A,z,Pe,te,Q),[Me,Be,Ke,je]=Oe.box;return this.mapProjection.useSpecialProjectionForSymbols&&(T?Oe.allPointsOccluded:this.mapProjection.isOccluded(fe,we,_))||Pe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Me,Be,Ke,je)||l!=="always"&&this.grid.hitTest(Me,Be,Ke,je,l,U)?{box:[Me,Be,Ke,je],placeable:!1,offscreen:!1}:{box:[Me,Be,Ke,je],placeable:!0,offscreen:this.isOffscreen(Me,Be,Ke,je)}}placeCollisionCircles(r,l,d,g,_,T,A,z,U,te,Q,fe,we,Pe,Oe,Me){const Be=[],Ke=new u.P(l.anchorX,l.anchorY),je=this.getPerspectiveRatio(T,Ke.x,Ke.y,A,Me),Je=(Q?_/je:_*je)/u.aq,nt={getElevation:Me,labelPlaneMatrix:z,lineVertexArray:d,pitchWithMap:Q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ke,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Oe},at=Ie(Je,g,l.lineOffsetX*Je,l.lineOffsetY*Je,!1,l,!1,nt);let mt=!1,wt=!1,Dt=!0;if(at){const Bt=.5*we*je+Pe,bt=new u.P(-100,-100),Tt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Gt=new Rt,mn=at.first,At=at.last;let jt=[];for(let xn=mn.path.length-1;xn>=1;xn--)jt.push(mn.path[xn]);for(let xn=1;xn<At.path.length;xn++)jt.push(At.path[xn]);const cn=2.5*Bt;if(U){const xn=this.projectPathToScreenSpace(jt,nt,U);jt=xn.some(Cn=>Cn.signedDistanceFromCamera<=0)?[]:xn.map(Cn=>Cn.point)}let or=[];if(jt.length>0){const xn=jt[0].clone(),Cn=jt[0].clone();for(let sr=1;sr<jt.length;sr++)xn.x=Math.min(xn.x,jt[sr].x),xn.y=Math.min(xn.y,jt[sr].y),Cn.x=Math.max(Cn.x,jt[sr].x),Cn.y=Math.max(Cn.y,jt[sr].y);or=xn.x>=bt.x&&Cn.x<=Tt.x&&xn.y>=bt.y&&Cn.y<=Tt.y?[jt]:Cn.x<bt.x||xn.x>Tt.x||Cn.y<bt.y||xn.y>Tt.y?[]:u.am([jt],bt.x,bt.y,Tt.x,Tt.y)}for(const xn of or){Gt.reset(xn,.25*Bt);let Cn=0;Cn=Gt.length<=.5*Bt?1:Math.ceil(Gt.paddedLength/cn)+1;for(let sr=0;sr<Cn;sr++){const ti=sr/Math.max(Cn-1,1),Co=Gt.lerp(ti),ar=Co.x+pn,zi=Co.y+pn;Be.push(ar,zi,Bt,0);const wi=ar-Bt,ni=zi-Bt,ri=ar+Bt,Po=zi+Bt;if(Dt=Dt&&this.isOffscreen(wi,ni,ri,Po),wt=wt||this.isInsideGrid(wi,ni,ri,Po),r!=="always"&&this.grid.hitTestCircle(ar,zi,Bt,r,fe)&&(mt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:mt}}}}return{circles:!te&&mt||!wt||je<this.perspectiveRatioCutoff?[]:Be,offscreen:Dt,collisionDetected:mt}}projectPathToScreenSpace(r,l,d){return r.map(g=>ze(g,d,l.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,g=1/0,_=-1/0,T=-1/0;for(const te of r){const Q=new u.P(te.x+pn,te.y+pn);d=Math.min(d,Q.x),g=Math.min(g,Q.y),_=Math.max(_,Q.x),T=Math.max(T,Q.y),l.push(Q)}const A=this.grid.query(d,g,_,T).concat(this.ignoredGrid.query(d,g,_,T)),z={},U={};for(const te of A){const Q=te.key;if(z[Q.bucketInstanceId]===void 0&&(z[Q.bucketInstanceId]={}),z[Q.bucketInstanceId][Q.featureIndex])continue;const fe=[new u.P(te.x1,te.y1),new u.P(te.x2,te.y1),new u.P(te.x2,te.y2),new u.P(te.x1,te.y2)];u.an(l,fe)&&(z[Q.bucketInstanceId][Q.featureIndex]=!0,U[Q.bucketInstanceId]===void 0&&(U[Q.bucketInstanceId]=[]),U[Q.bucketInstanceId].push(Q.featureIndex))}return U}insertCollisionBox(r,l,d,g,_,T){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:T,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,d,g,_,T){const A=d?this.ignoredGrid:this.grid,z={bucketInstanceId:g,featureIndex:_,collisionGroupID:T,overlapMode:l};for(let U=0;U<r.length;U+=4)A.insertCircle(z,r[U],r[U+1],r[U+2])}projectAndGetPerspectiveRatio(r,l,d,g,_){const T=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,d,g,_):ze(new u.P(l,d),r,_);return{point:new u.P((T.point.x+1)/2*this.transform.width+pn,(1-T.point.y)/2*this.transform.height+pn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}getPerspectiveRatio(r,l,d,g,_){const T=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,d,g,_):ze(new u.P(l,d),r,_);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(r,l,d,g){return d<pn||r>=this.screenRightBoundary||g<pn||l>this.screenBottomBoundary}isInsideGrid(r,l,d,g){return d>=0&&r<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=u.ao([]);return u.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,l,d,g,_,T,A,z,U,te){const Q=l*z.perspectiveRatio;let fe=new u.P(1,0),we=new u.P(0,1);const Pe=new u.P(r.anchorPointX+A[0],r.anchorPointY+A[1]);if(T&&!_){const Bt=this.projectAndGetPerspectiveRatio(d,Pe.x+1,Pe.y,g,U).point.sub(z.point).unit(),bt=Math.atan(Bt.y/Bt.x)+(Bt.x<0?Math.PI:0),Tt=Math.sin(bt),Gt=Math.cos(bt);fe=new u.P(Gt,Tt),we=new u.P(-Tt,Gt)}else if(!T&&_){const Bt=-this.transform.angle,bt=Math.sin(Bt),Tt=Math.cos(Bt);fe=new u.P(Tt,bt),we=new u.P(-bt,Tt)}let Oe=z.point,Me=Q;if(_){Oe=Pe;const Bt=this.transform.zoom-Math.floor(this.transform.zoom);Me=Math.pow(2,-Bt),Me*=this.mapProjection.getPitchedTextCorrection(this.transform,Pe,g),te||(Me*=u.ad(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}te&&(Oe=Oe.add(fe.mult(te.x*Me)).add(we.mult(te.y*Me)));const Be=r.x1*Me,Ke=r.x2*Me,je=(Be+Ke)/2,Je=r.y1*Me,nt=r.y2*Me,at=(Je+nt)/2,mt=[{offsetX:Be,offsetY:Je},{offsetX:je,offsetY:Je},{offsetX:Ke,offsetY:Je},{offsetX:Ke,offsetY:at},{offsetX:Ke,offsetY:nt},{offsetX:je,offsetY:nt},{offsetX:Be,offsetY:nt},{offsetX:Be,offsetY:at}];let wt=[];for(const{offsetX:Bt,offsetY:bt}of mt)wt.push(new u.P(Oe.x+fe.x*Bt+we.x*bt,Oe.y+fe.y*Bt+we.y*bt));let Dt=!1;if(_){const Bt=wt.map(bt=>this.projectAndGetPerspectiveRatio(d,bt.x,bt.y,g,U));Dt=Bt.some(bt=>!bt.isOccluded),wt=Bt.map(bt=>bt.point)}else Dt=!0;return{box:u.ap(wt),allPointsOccluded:!Dt}}}function hn(v,r,l){return r*(u.X/(v.tileSize*Math.pow(2,l-v.tileID.overscaledZ)))}class $n{constructor(r,l,d,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):g&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Jn{constructor(r,l,d,g,_){this.text=new $n(r?r.text:null,l,d,_),this.icon=new $n(r?r.icon:null,l,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class nr{constructor(r,l,d){this.text=r,this.icon=l,this.skipFade=d}}class wn{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class Nn{constructor(r,l,d,g,_){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=g,this.tileID=_}}class Yn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[r]}}function Er(v,r,l,d,g){const{horizontalAlign:_,verticalAlign:T}=u.av(v);return new u.P(-(_-.5)*r+d[0]*g,-(T-.5)*l+d[1]*g)}class $r{constructor(r,l,d,g,_,T){this.transform=r.clone(),this.terrain=d,this.collisionIndex=new En(this.transform,l),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Yn(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const l=this.terrain;return l?(d,g)=>l.getElevation(r,d,g):null}getBucketParts(r,l,d,g){const _=d.getBucket(l),T=d.latestFeatureIndex;if(!_||!T||l.id!==_.layerIds[0])return;const A=d.collisionBoxArray,z=_.layers[0].layout,U=_.layers[0].paint,te=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),Q=d.tileSize/u.X,fe=d.tileID.toUnwrapped(),we=this.transform.calculatePosMatrix(fe),Pe=z.get("text-pitch-alignment")==="map",Oe=z.get("text-rotation-alignment")==="map",Me=hn(d,1,this.transform.zoom),Be=this.collisionIndex.mapProjection.translatePosition(this.transform,d,U.get("text-translate"),U.get("text-translate-anchor")),Ke=this.collisionIndex.mapProjection.translatePosition(this.transform,d,U.get("icon-translate"),U.get("icon-translate-anchor")),je=Ii(we,Pe,Oe,this.transform,Me);let Je=null;if(Pe){const at=Ur(we,Pe,Oe,this.transform,Me);Je=u.L([],this.transform.labelPlaneMatrix,at)}this.retainedQueryData[_.bucketInstanceId]=new Nn(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,d.tileID);const nt={bucket:_,layout:z,translationText:Be,translationIcon:Ke,posMatrix:we,unwrappedTileID:fe,textLabelPlaneMatrix:je,labelToScreenMatrix:Je,scale:te,textPixelRatio:Q,holdingForFade:d.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:u.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const at of _.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:wt,symbolInstanceEnd:Dt}=at;r.push({sortKey:mt,symbolInstanceStart:wt,symbolInstanceEnd:Dt,parameters:nt})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:nt})}attemptAnchorPlacement(r,l,d,g,_,T,A,z,U,te,Q,fe,we,Pe,Oe,Me,Be,Ke,je){const Je=u.ar[r.textAnchor],nt=[r.textOffset0,r.textOffset1],at=Er(Je,d,g,nt,_),mt=this.collisionIndex.placeCollisionBox(l,fe,z,U,te,A,T,Me,Q.predicate,je,at);if((!Ke||this.collisionIndex.placeCollisionBox(Ke,fe,z,U,te,A,T,Be,Q.predicate,je,at).placeable)&&mt.placeable){let wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(wt=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:nt,width:d,height:g,anchor:Je,textBoxScale:_,prevAnchor:wt},this.markUsedJustification(Pe,Je,we,Oe),Pe.allowVerticalPlacement&&(this.markUsedOrientation(Pe,Oe,we),this.placedOrientations[we.crossTileID]=Oe),{shift:at,placedGlyphBoxes:mt}}}placeLayerBucketPart(r,l,d){const{bucket:g,layout:_,translationText:T,translationIcon:A,posMatrix:z,unwrappedTileID:U,textLabelPlaneMatrix:te,labelToScreenMatrix:Q,textPixelRatio:fe,holdingForFade:we,collisionBoxArray:Pe,partiallyEvaluatedTextSize:Oe,collisionGroup:Me}=r.parameters,Be=_.get("text-optional"),Ke=_.get("icon-optional"),je=u.as(_,"text-overlap","text-allow-overlap"),Je=je==="always",nt=u.as(_,"icon-overlap","icon-allow-overlap"),at=nt==="always",mt=_.get("text-rotation-alignment")==="map",wt=_.get("text-pitch-alignment")==="map",Dt=_.get("icon-text-fit")!=="none",Bt=_.get("symbol-z-order")==="viewport-y",bt=Je&&(at||!g.hasIconData()||Ke),Tt=at&&(Je||!g.hasTextData()||Be);!g.collisionArrays&&Pe&&g.deserializeCollisionBoxes(Pe);const Gt=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),mn=(At,jt,cn)=>{var or,xn;if(l[At.crossTileID])return;if(we)return void(this.placements[At.crossTileID]=new nr(!1,!1,!1));let Cn=!1,sr=!1,ti=!0,Co=null,ar={box:null,placeable:!1,offscreen:null},zi={box:null,placeable:!1,offscreen:null},wi=null,ni=null,ri=null,Po=0,Fa=0,Pc=0;jt.textFeatureIndex?Po=jt.textFeatureIndex:At.useRuntimeCollisionCircles&&(Po=At.featureIndex),jt.verticalTextFeatureIndex&&(Fa=jt.verticalTextFeatureIndex);const El=jt.textBox;if(El){const qr=ii=>{let oi=u.ai.horizontal;if(g.allowVerticalPlacement&&!ii&&this.prevPlacement){const Zr=this.prevPlacement.placedOrientations[At.crossTileID];Zr&&(this.placedOrientations[At.crossTileID]=Zr,oi=Zr,this.markUsedOrientation(g,oi,At))}return oi},Io=(ii,oi)=>{if(g.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const Zr of g.writingModes)if(Zr===u.ai.vertical?(ar=oi(),zi=ar):ar=ii(),ar&&ar.placeable)break}else ar=ii()},Ys=At.textAnchorOffsetStartIndex,Tl=At.textAnchorOffsetEndIndex;if(Tl===Ys){const ii=(oi,Zr)=>{const cr=this.collisionIndex.placeCollisionBox(oi,je,fe,z,U,wt,mt,T,Me.predicate,Gt);return cr&&cr.placeable&&(this.markUsedOrientation(g,Zr,At),this.placedOrientations[At.crossTileID]=Zr),cr};Io(()=>ii(El,u.ai.horizontal),()=>{const oi=jt.verticalTextBox;return g.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&oi?ii(oi,u.ai.vertical):{box:null,offscreen:null}}),qr(ar&&ar.placeable)}else{let ii=u.ar[(xn=(or=this.prevPlacement)===null||or===void 0?void 0:or.variableOffsets[At.crossTileID])===null||xn===void 0?void 0:xn.anchor];const oi=(cr,Cl,xd)=>{const Dr=cr.x2-cr.x1,bp=cr.y2-cr.y1,Ac=At.textBoxScale,Mc=Dt&&nt==="never"?Cl:null;let Qs=null,Sp=je==="never"?1:2,wd="never";ii&&Sp++;for(let bd=0;bd<Sp;bd++){for(let Sd=Ys;Sd<Tl;Sd++){const kc=g.textAnchorOffsets.get(Sd);if(ii&&kc.textAnchor!==ii)continue;const Pl=this.attemptAnchorPlacement(kc,cr,Dr,bp,Ac,mt,wt,fe,z,U,Me,wd,At,g,xd,T,A,Mc,Gt);if(Pl&&(Qs=Pl.placedGlyphBoxes,Qs&&Qs.placeable))return Cn=!0,Co=Pl.shift,Qs}ii?ii=null:wd=je}return d&&!Qs&&(Qs={box:this.collisionIndex.placeCollisionBox(El,"always",fe,z,U,wt,mt,T,Me.predicate,Gt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),Qs};Io(()=>oi(El,jt.iconBox,u.ai.horizontal),()=>{const cr=jt.verticalTextBox;return g.allowVerticalPlacement&&(!ar||!ar.placeable)&&At.numVerticalGlyphVertices>0&&cr?oi(cr,jt.verticalIconBox,u.ai.vertical):{box:null,occluded:!0,offscreen:null}}),ar&&(Cn=ar.placeable,ti=ar.offscreen);const Zr=qr(ar&&ar.placeable);if(!Cn&&this.prevPlacement){const cr=this.prevPlacement.variableOffsets[At.crossTileID];cr&&(this.variableOffsets[At.crossTileID]=cr,this.markUsedJustification(g,cr.anchor,At,Zr))}}}if(wi=ar,Cn=wi&&wi.placeable,ti=wi&&wi.offscreen,At.useRuntimeCollisionCircles){const qr=g.text.placedSymbolArray.get(At.centerJustifiedTextSymbolIndex),Io=u.aj(g.textSizeData,Oe,qr),Ys=_.get("text-padding");ni=this.collisionIndex.placeCollisionCircles(je,qr,g.lineVertexArray,g.glyphOffsetArray,Io,z,U,te,Q,d,wt,Me.predicate,At.collisionCircleDiameter,Ys,T,Gt),ni.circles.length&&ni.collisionDetected&&!d&&u.w("Collisions detected, but collision boxes are not shown"),Cn=Je||ni.circles.length>0&&!ni.collisionDetected,ti=ti&&ni.offscreen}if(jt.iconFeatureIndex&&(Pc=jt.iconFeatureIndex),jt.iconBox){const qr=Io=>this.collisionIndex.placeCollisionBox(Io,nt,fe,z,U,wt,mt,A,Me.predicate,Gt,Dt&&Co?Co:void 0);zi&&zi.placeable&&jt.verticalIconBox?(ri=qr(jt.verticalIconBox),sr=ri.placeable):(ri=qr(jt.iconBox),sr=ri.placeable),ti=ti&&ri.offscreen}const Ra=Be||At.numHorizontalGlyphVertices===0&&At.numVerticalGlyphVertices===0,Ic=Ke||At.numIconVertices===0;Ra||Ic?Ic?Ra||(sr=sr&&Cn):Cn=sr&&Cn:sr=Cn=sr&&Cn;const _d=sr&&ri.placeable;if(Cn&&wi.placeable&&this.collisionIndex.insertCollisionBox(wi.box,je,_.get("text-ignore-placement"),g.bucketInstanceId,zi&&zi.placeable&&Fa?Fa:Po,Me.ID),_d&&this.collisionIndex.insertCollisionBox(ri.box,nt,_.get("icon-ignore-placement"),g.bucketInstanceId,Pc,Me.ID),ni&&Cn&&this.collisionIndex.insertCollisionCircles(ni.circles,je,_.get("text-ignore-placement"),g.bucketInstanceId,Po,Me.ID),d&&this.storeCollisionData(g.bucketInstanceId,cn,jt,wi,ri,ni),At.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[At.crossTileID]=new nr(Cn||bt,sr||Tt,ti||g.justReloaded),l[At.crossTileID]=!0};if(Bt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const At=g.getSortedSymbolIndexes(this.transform.angle);for(let jt=At.length-1;jt>=0;--jt){const cn=At[jt];mn(g.symbolInstances.get(cn),g.collisionArrays[cn],cn)}}else for(let At=r.symbolInstanceStart;At<r.symbolInstanceEnd;At++)mn(g.symbolInstances.get(At),g.collisionArrays[At],At);if(d&&g.bucketInstanceId in this.collisionCircleArrays){const At=this.collisionCircleArrays[g.bucketInstanceId];u.at(At.invProjMatrix,z),At.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(r,l,d,g,_,T){if(d.textBox||d.iconBox){let A,z;this.collisionBoxArrays.has(r)?A=this.collisionBoxArrays.get(r):(A=new Map,this.collisionBoxArrays.set(r,A)),A.has(l)?z=A.get(l):(z={text:null,icon:null},A.set(l,z)),d.textBox&&(z.text=g.box),d.iconBox&&(z.icon=_.box)}if(T){let A=this.collisionCircleArrays[r];A===void 0&&(A=this.collisionCircleArrays[r]=new wn);for(let z=0;z<T.circles.length;z+=4)A.circles.push(T.circles[z+0]),A.circles.push(T.circles[z+1]),A.circles.push(T.circles[z+2]),A.circles.push(T.collisionDetected?1:0)}}markUsedJustification(r,l,d,g){let _;_=g===u.ai.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[u.au(l)];const T=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const A of T)A>=0&&(r.text.placedSymbolArray.get(A).crossTileID=_>=0&&A!==_?0:d.crossTileID)}markUsedOrientation(r,l,d){const g=l===u.ai.horizontal||l===u.ai.horizontalOnly?l:0,_=l===u.ai.vertical?l:0,T=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const A of T)r.text.placedSymbolArray.get(A).placedOrientation=g;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(r):1,_=l?l.opacities:{},T=l?l.variableOffsets:{},A=l?l.placedOrientations:{};for(const z in this.placements){const U=this.placements[z],te=_[z];te?(this.opacities[z]=new Jn(te,g,U.text,U.icon),d=d||U.text!==te.text.placed||U.icon!==te.icon.placed):(this.opacities[z]=new Jn(null,g,U.text,U.icon,U.skipFade),d=d||U.text||U.icon)}for(const z in _){const U=_[z];if(!this.opacities[z]){const te=new Jn(U,g,!1,!1);te.isHidden()||(this.opacities[z]=te,d=d||U.text.placed||U.icon.placed)}}for(const z in T)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=T[z]);for(const z in A)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=A[z]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const d={};for(const g of l){const _=g.getBucket(r);_&&g.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,g.tileID,d,g.collisionBoxArray)}}updateBucketOpacities(r,l,d,g){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const _=r.layers[0],T=_.layout,A=new Jn(null,0,!1,!1,!0),z=T.get("text-allow-overlap"),U=T.get("icon-allow-overlap"),te=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q=T.get("text-rotation-alignment")==="map",fe=T.get("text-pitch-alignment")==="map",we=T.get("icon-text-fit")!=="none",Pe=new Jn(null,0,z&&(U||!r.hasIconData()||T.get("icon-optional")),U&&(z||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&g&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(g);const Oe=(Be,Ke,je)=>{for(let Je=0;Je<Ke/4;Je++)Be.opacityVertexArray.emplaceBack(je);Be.hasVisibleVertices=Be.hasVisibleVertices||je!==Gr},Me=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Be=0;Be<r.symbolInstances.length;Be++){const Ke=r.symbolInstances.get(Be),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:Je,crossTileID:nt}=Ke;let at=this.opacities[nt];d[nt]?at=A:at||(at=Pe,this.opacities[nt]=at),d[nt]=!0;const mt=Ke.numIconVertices>0,wt=this.placedOrientations[Ke.crossTileID],Dt=wt===u.ai.vertical,Bt=wt===u.ai.horizontal||wt===u.ai.horizontalOnly;if(je>0||Je>0){const Tt=pi(at.text);Oe(r.text,je,Dt?Gr:Tt),Oe(r.text,Je,Bt?Gr:Tt);const Gt=at.text.isHidden();[Ke.rightJustifiedTextSymbolIndex,Ke.centerJustifiedTextSymbolIndex,Ke.leftJustifiedTextSymbolIndex].forEach(jt=>{jt>=0&&(r.text.placedSymbolArray.get(jt).hidden=Gt||Dt?1:0)}),Ke.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ke.verticalPlacedTextSymbolIndex).hidden=Gt||Bt?1:0);const mn=this.variableOffsets[Ke.crossTileID];mn&&this.markUsedJustification(r,mn.anchor,Ke,wt);const At=this.placedOrientations[Ke.crossTileID];At&&(this.markUsedJustification(r,"left",Ke,At),this.markUsedOrientation(r,At,Ke))}if(mt){const Tt=pi(at.icon),Gt=!(we&&Ke.verticalPlacedIconSymbolIndex&&Dt);Ke.placedIconSymbolIndex>=0&&(Oe(r.icon,Ke.numIconVertices,Gt?Tt:Gr),r.icon.placedSymbolArray.get(Ke.placedIconSymbolIndex).hidden=at.icon.isHidden()),Ke.verticalPlacedIconSymbolIndex>=0&&(Oe(r.icon,Ke.numVerticalIconVertices,Gt?Gr:Tt),r.icon.placedSymbolArray.get(Ke.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const bt=Me&&Me.has(Be)?Me.get(Be):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Tt=r.collisionArrays[Be];if(Tt){let Gt=new u.P(0,0);if(Tt.textBox||Tt.verticalTextBox){let mn=!0;if(te){const At=this.variableOffsets[nt];At?(Gt=Er(At.anchor,At.width,At.height,At.textOffset,At.textBoxScale),Q&&Gt._rotate(fe?this.transform.angle:-this.transform.angle)):mn=!1}if(Tt.textBox||Tt.verticalTextBox){let At;Tt.textBox&&(At=Dt),Tt.verticalTextBox&&(At=Bt),Vr(r.textCollisionBox.collisionVertexArray,at.text.placed,!mn||At,bt.text,Gt.x,Gt.y)}}if(Tt.iconBox||Tt.verticalIconBox){const mn=!!(!Bt&&Tt.verticalIconBox);let At;Tt.iconBox&&(At=mn),Tt.verticalIconBox&&(At=!mn),Vr(r.iconCollisionBox.collisionVertexArray,at.icon.placed,At,bt.icon,we?Gt.x:0,we?Gt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Be=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Be.invProjMatrix,r.placementViewportMatrix=Be.viewportMatrix,r.collisionCircleArray=Be.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function Vr(v,r,l,d,g,_){d&&d.length!==0||(d=[0,0,0,0]);const T=d[0]-pn,A=d[1]-pn,z=d[2]-pn,U=d[3]-pn;v.emplaceBack(r?1:0,l?1:0,g||0,_||0,T,A),v.emplaceBack(r?1:0,l?1:0,g||0,_||0,z,A),v.emplaceBack(r?1:0,l?1:0,g||0,_||0,z,U),v.emplaceBack(r?1:0,l?1:0,g||0,_||0,T,U)}const Ho=Math.pow(2,25),kn=Math.pow(2,24),nl=Math.pow(2,17),Tn=Math.pow(2,16),Tr=Math.pow(2,9),fi=Math.pow(2,8),Vh=Math.pow(2,1);function pi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const r=v.placed?1:0,l=Math.floor(127*v.opacity);return l*Ho+r*kn+l*nl+r*Tn+l*Tr+r*fi+l*Vh+r}const Gr=0;function rl(){return{isOccluded:(v,r,l)=>!1,getPitchedTextCorrection:(v,r,l)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,r,l,d){throw new Error("Not implemented.")},translatePosition:(v,r,l,d)=>function(g,_,T,A,z=!1){if(!T[0]&&!T[1])return[0,0];const U=z?A==="map"?g.angle:0:A==="viewport"?-g.angle:0;if(U){const te=Math.sin(U),Q=Math.cos(U);T=[T[0]*Q-T[1]*te,T[0]*te+T[1]*Q]}return[z?T[0]:hn(_,T[0],g.zoom),z?T[1]:hn(_,T[1],g.zoom)]}(v,r,l,d),getCircleRadiusCorrection:v=>1}}class mi{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,d,g,_){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(T,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((A,z)=>A.sortKey-z.sortKey));this._currentPartIndex<T.length;)if(l.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,_())return!0;return!1}}class vr{constructor(r,l,d,g,_,T,A,z){this.placement=new $r(r,rl(),l,T,A,z),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,l,d){const g=b.now(),_=()=>!this._forceFullPlacement&&b.now()-g>2;for(;this._currentPlacementIndex>=0;){const T=l[r[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=A)&&(!T.maxzoom||T.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new mi(T)),this._inProgressLayer.continuePlacement(d[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const go=512/u.X/2;class ps{constructor(r,l,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const g=new Map;for(let _=0;_<l.length;_++){const T=l.get(_),A=T.key,z=g.get(A);z?z.push(T):g.set(A,[T])}for(const[_,T]of g){const A={positions:T.map(z=>({x:Math.floor(z.anchorX*go),y:Math.floor(z.anchorY*go)})),crossTileIDs:T.map(z=>z.crossTileID)};if(A.positions.length>128){const z=new u.aw(A.positions.length,16,Uint16Array);for(const{x:U,y:te}of A.positions)z.add(U,te);z.finish(),delete A.positions,A.index=z}this._symbolsByKey[_]=A}}getScaledCoordinates(r,l){const{x:d,y:g,z:_}=this.tileID.canonical,{x:T,y:A,z}=l.canonical,U=go/Math.pow(2,z-_),te=(A*u.X+r.anchorY)*U,Q=g*u.X*go;return{x:Math.floor((T*u.X+r.anchorX)*U-d*u.X*go),y:Math.floor(te-Q)}}findMatches(r,l,d){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let _=0;_<r.length;_++){const T=r.get(_);if(T.crossTileID)continue;const A=this._symbolsByKey[T.key];if(!A)continue;const z=this.getScaledCoordinates(T,l);if(A.index){const U=A.index.range(z.x-g,z.y-g,z.x+g,z.y+g).sort();for(const te of U){const Q=A.crossTileIDs[te];if(!d[Q]){d[Q]=!0,T.crossTileID=Q;break}}}else if(A.positions)for(let U=0;U<A.positions.length;U++){const te=A.positions[U],Q=A.crossTileIDs[U];if(Math.abs(te.x-z.x)<=g&&Math.abs(te.y-z.y)<=g&&!d[Q]){d[Q]=!0,T.crossTileID=Q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class dr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class il{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const d in this.indexes){const g=this.indexes[d],_={};for(const T in g){const A=g[T];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+l),_[A.tileID.key]=A}this.indexes[d]=_}this.lng=r}addBucket(r,l,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<l.symbolInstances.length;_++)l.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>r.overscaledZ)for(const A in T){const z=T[A];z.tileID.isChildOf(r)&&z.findMatches(l.symbolInstances,r,g)}else{const A=T[r.scaledTo(Number(_)).key];A&&A.findMatches(l.symbolInstances,r,g)}}for(let _=0;_<l.symbolInstances.length;_++){const T=l.symbolInstances.get(_);T.crossTileID||(T.crossTileID=d.generate(),g[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ps(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const d of l.getCrossTileIDsLists())for(const g of d)delete this.usedCrossTileIDs[r][g]}removeStaleBuckets(r){let l=!1;for(const d in this.indexes){const g=this.indexes[d];for(const _ in g)r[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,g[_]),delete g[_],l=!0)}return l}}class _r{constructor(){this.layerIndexes={},this.crossTileIDs=new dr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,d){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new il);let _=!1;const T={};g.handleWrapJump(d);for(const A of l){const z=A.getBucket(r);z&&r.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(A.tileID,z,this.crossTileIDs)&&(_=!0),T[z.bucketInstanceId]=!0)}return g.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(r){const l={};r.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}const va=(v,r)=>u.t(v,r&&r.filter(l=>l.identifier!=="source.canvas")),Xo=u.ax();class cu extends u.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const g=this.sourceCaches[d].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new Mt(vt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,g)=>this.getGlyphs(d,g)),this.dispatcher.registerMessageHandler("GI",(d,g)=>this.getImages(d,g)),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new Y(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Ae(256,512),this.crossTileSymbolIndex=new _r,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.az()),Ve().on(k,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const g=this.sourceCaches[d.sourceId];if(!g)return;const _=g.getSource();if(_&&_.vectorLayerIds)for(const T in this._layers){const A=this._layers[T];A.source===_.id&&this._validateLayer(A)}})}loadURL(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const g=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController,u.h(g,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,l,d)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new u.j(_))})}loadJSON(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,d)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Xo,{validate:!1})}_load(r,l,d){var g;const _=l.transformStyle?l.transformStyle(d,r):r;if(!l.validate||!va(this,u.x(_))){this._loaded=!0,this.stylesheet=_;for(const T in _.sources)this.addSource(T,_.sources[T],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new be(this.stylesheet.light),this.sky=new Ue(this.stylesheet.sky),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.aA(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of r){const d=u.aB(l);d.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=d}}_loadSprite(r,l=!1,d=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,T,A,z){return u._(this,void 0,void 0,function*(){const U=D(_),te=A>1?"@2x":"",Q={},fe={};for(const{id:we,url:Pe}of U){const Oe=T.transformRequest(ee(Pe,te,".json"),"SpriteJSON");Q[we]=u.h(Oe,z);const Me=T.transformRequest(ee(Pe,te,".png"),"SpriteImage");fe[we]=G.getImage(Me,z)}return yield Promise.all([...Object.values(Q),...Object.values(fe)]),function(we,Pe){return u._(this,void 0,void 0,function*(){const Oe={};for(const Me in we){Oe[Me]={};const Be=b.getImageCanvasContext((yield Pe[Me]).data),Ke=(yield we[Me]).data;for(const je in Ke){const{width:Je,height:nt,x:at,y:mt,sdf:wt,pixelRatio:Dt,stretchX:Bt,stretchY:bt,content:Tt,textFitWidth:Gt,textFitHeight:mn}=Ke[je];Oe[Me][je]={data:null,pixelRatio:Dt,sdf:wt,stretchX:Bt,stretchY:bt,content:Tt,textFitWidth:Gt,textFitHeight:mn,spriteData:{width:Je,height:nt,x:at,y:mt,context:Be}}}}return Oe})}(Q,fe)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const T in _){this._spritesImagesIds[T]=[];const A=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(z=>!(z in _)):[];for(const z of A)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in _[T]){const U=T==="default"?z:`${T}:${z}`;this._spritesImagesIds[T].push(U),U in this.imageManager.images?this.imageManager.updateImage(U,_[T][z],!1):this.imageManager.addImage(U,_[T][z]),l&&(this._changedImages[U]=!0)}}}).catch(_=>{this._spriteRequest=null,g=_,this.fire(new u.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),d&&d(g)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const d=r.sourceLayer;if(!d)return;const g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.j(new Error(`Source layer "${d}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const l=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l);const d=[];for(const g of r)l[g]&&d.push(l[g]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const l=Object.keys(this._layers);for(const d of l){const g=this._layers[d];g.type!=="custom"&&(r[d]=g.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(l){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const T in this._updatedSources){const A=this._updatedSources[T];if(A==="reload")this._reloadSource(T);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const d={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];d[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in d){const _=this.sourceCaches[g];!!d[g]!=!!_.used&&_.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,l&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var d;this._checkLoaded();const g=this.serialize();if(r=l.transformStyle?l.transformStyle(g,r):r,((d=l.validate)===null||d===void 0||d)&&va(this,u.x(r)))return!1;(r=u.aC(r)).layers=u.aA(r.layers);const _=u.aD(g,r),T=this._getOperationsToPerform(_);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const A of T.operations)A();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const l=[],d=[];for(const g of r)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":l.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":l.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,g.args));break;case"setSky":l.push(()=>this.setSky.apply(this,g.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":l.push(()=>{});break;default:d.push(g.command)}return{operations:l,unimplemented:d}}addImage(r,l){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.x.source,`sources.${r}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=this.sourceCaches[r]=new It(r,l,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,d={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new u.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(r.type==="custom"){if(va(this,u.aE(r)))return;_=u.aB(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(g,r.source),r=u.aC(r),r=u.e(r,{source:g})),this._validate(u.x.layer,`layers.${g}`,r,{arrayIndex:-1},d))return;_=u.aB(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const T=l?this._order.indexOf(l):this._order.length;if(l&&T===-1)this.fire(new u.j(new Error(`Cannot add layer "${g}" before non-existing layer "${l}".`)));else{if(this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const A=this._removedLayers[g];delete this._removedLayers[g],A.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const d=this._order.indexOf(r);this._order.splice(d,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,d){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===l&&g.maxzoom===d||(l!=null&&(g.minzoom=l),d!=null&&(g.maxzoom=d),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,d={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!u.aF(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.x.filter,`layers.${g.id}.filter`,l,null,d)||(g.filter=u.aC(l),this._updateLayer(g)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aC(this.getLayer(r).filter)}setLayoutProperty(r,l,d,g={}){this._checkLoaded();const _=this.getLayer(r);_?u.aF(_.getLayoutProperty(l),d)||(_.setLayoutProperty(l,d,g),this._updateLayer(_)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const d=this.getLayer(r);if(d)return d.getLayoutProperty(l);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,d,g={}){this._checkLoaded();const _=this.getLayer(r);_?u.aF(_.getPaintProperty(l),d)||(_.setPaintProperty(l,d,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const d=r.source,g=r.sourceLayer,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&g?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||g?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,r.id,l)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const d=r.source,g=this.sourceCaches[d];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const _=g.getSource().type,T=_==="vector"?r.sourceLayer:void 0;_!=="vector"||T?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(T,r.id,l):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,d=r.sourceLayer,g=this.sourceCaches[l];if(g!==void 0)return g.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(d,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aG(this.sourceCaches,_=>_.serialize()),l=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,g=this.stylesheet;return u.aH({version:g.version,name:g.name,metadata:g.metadata,light:g.light,sky:g.sky,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:r,layers:l,terrain:d},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=T=>this._layers[T].type==="fill-extrusion",d={},g=[];for(let T=this._order.length-1;T>=0;T--){const A=this._order[T];if(l(A)){d[A]=T;for(const z of r){const U=z[A];if(U)for(const te of U)g.push(te)}}}g.sort((T,A)=>A.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const A=this._order[T];if(l(A))for(let z=g.length-1;z>=0;z--){const U=g[z].feature;if(d[U.layer.id]<T)break;_.push(U),g.pop()}else for(const z of r){const U=z[A];if(U)for(const te of U)_.push(te.feature)}}return _}queryRenderedFeatures(r,l,d){l&&l.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const A of l.layers){const z=this._layers[A];if(!z)return this.fire(new u.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];g[z.source]=!0}}const _=[];l.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const A in this.sourceCaches)l.layers&&!g[A]||_.push(Zt(this.sourceCaches[A],this._layers,T,r,l,d));return this.placement&&_.push(function(A,z,U,te,Q,fe,we){const Pe={},Oe=fe.queryRenderedSymbols(te),Me=[];for(const Be of Object.keys(Oe).map(Number))Me.push(we[Be]);Me.sort(Wt);for(const Be of Me){const Ke=Be.featureIndex.lookupSymbolFeatures(Oe[Be.bucketInstanceId],z,Be.bucketIndex,Be.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,A);for(const je in Ke){const Je=Pe[je]=Pe[je]||[],nt=Ke[je];nt.sort((at,mt)=>{const wt=Be.featureSortOrder;if(wt){const Dt=wt.indexOf(at.featureIndex);return wt.indexOf(mt.featureIndex)-Dt}return mt.featureIndex-at.featureIndex});for(const at of nt)Je.push(at)}}for(const Be in Pe)Pe[Be].forEach(Ke=>{const je=Ke.feature,Je=U[A[Be].source].getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=Je});return Pe}(this._layers,T,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,l){l&&l.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[r];return d?function(g,_){const T=g.getRenderableIds().map(U=>g.getTileByID(U)),A=[],z={};for(let U=0;U<T.length;U++){const te=T[U],Q=te.tileID.canonical.key;z[Q]||(z[Q]=!0,te.querySourceFeatures(A,_))}return A}(d,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const d=this.light.getLight();let g=!1;for(const T in r)if(!u.aF(r[T],d[T])){g=!0;break}if(!g)return;const _={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(_)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,l={}){const d=this.sky.getSky();let g=!1;r||d&&(g=!0);for(const T in r)if(!u.aF(r[T],d[T])){g=!0;break}if(!g)return;const _={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,l),this.sky.updateTransitions(_)}_validate(r,l,d,g,_={}){return(!_||_.validate!==!1)&&va(this,r.call(u.x,u.e({key:l,style:this.serialize(),value:d,styleSpec:u.v},g)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ve().off(k,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,d,g,_=!1){let T=!1,A=!1;const z={};for(const U of this._order){const te=this._layers[U];if(te.type!=="symbol")continue;if(!z[te.source]){const fe=this.sourceCaches[te.source];z[te.source]=fe.getRenderableIds(!0).map(we=>fe.getTileByID(we)).sort((we,Pe)=>Pe.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(Pe.tileID)?-1:1))}const Q=this.crossTileSymbolIndex.addLayer(te,z[te.source],r.center.lng);T=T||Q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),r.zoom))&&(this.pauseablePlacement=new vr(r,this.map.terrain,this._order,_,l,d,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),A=!0),T&&this.pauseablePlacement.placement.setStale()),A||T)for(const U of this._order){const te=this._layers[U];te.type==="symbol"&&this.placement.updateLayerOpacities(te,z[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[l.source];return g&&g.setDependencies(l.tileID.key,l.type,l.icons),d})}getGlyphs(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(l.stacks),g=this.sourceCaches[l.source];return g&&g.setDependencies(l.tileID.key,l.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(u.x.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,d={},g){this._checkLoaded();const _=[{id:r,url:l}],T=[...D(this.stylesheet.sprite),..._];this._validate(u.x.sprite,"sprite",T,null,d)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,g))}removeSprite(r){this._checkLoaded();const l=D(this.stylesheet.sprite);if(l.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return D(this.stylesheet.sprite)}setSprite(r,l={},d){this._checkLoaded(),r&&this._validate(u.x.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var _a=u.Y([{name:"a_pos",type:"Int16",components:2}]);const Ko={prelude:In(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:In(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:In(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:In(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:In("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:In(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:In(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:In("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:In("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:In("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:In(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:In(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:In(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:In(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:In(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:In(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:In(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:In(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:In(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:In(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:In(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:In(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:In(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:In(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:In(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:In(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:In("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:In("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:In("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:In("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function In(v,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),g=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(g):g,A={};return{fragmentSource:v=v.replace(l,(z,U,te,Q,fe)=>(A[fe]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
varying ${te} ${Q} ${fe};
#else
uniform ${te} ${Q} u_${fe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${fe}
    ${te} ${Q} ${fe} = u_${fe};
#endif
`)),vertexSource:r=r.replace(l,(z,U,te,Q,fe)=>{const we=Q==="float"?"vec2":"vec4",Pe=fe.match(/color/)?"color":we;return A[fe]?U==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
attribute ${te} ${we} a_${fe};
varying ${te} ${Q} ${fe};
#else
uniform ${te} ${Q} u_${fe};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = a_${fe};
#else
    ${te} ${Q} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = unpack_mix_${Pe}(a_${fe}, u_${fe}_t);
#else
    ${te} ${Q} ${fe} = u_${fe};
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
attribute ${te} ${we} a_${fe};
#else
uniform ${te} ${Q} u_${fe};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${te} ${Q} ${fe} = a_${fe};
#else
    ${te} ${Q} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${te} ${Q} ${fe} = unpack_mix_${Pe}(a_${fe}, u_${fe}_t);
#else
    ${te} ${Q} ${fe} = u_${fe};
#endif
`}),staticAttributes:d,staticUniforms:T}}class ol{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,d,g,_,T,A,z,U){this.context=r;let te=this.boundPaintVertexBuffers.length!==g.length;for(let Q=0;!te&&Q<g.length;Q++)this.boundPaintVertexBuffers[Q]!==g[Q]&&(te=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||te||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==U?this.freshBind(l,d,g,_,T,A,z,U):(r.bindVertexArray.set(this.vao),A&&A.bind(),_&&_.dynamicDraw&&_.bind(),z&&z.bind(),U&&U.bind())}freshBind(r,l,d,g,_,T,A,z){const U=r.numAttributes,te=this.context,Q=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=z,l.enableAttributes(Q,r);for(const fe of d)fe.enableAttributes(Q,r);T&&T.enableAttributes(Q,r),A&&A.enableAttributes(Q,r),z&&z.enableAttributes(Q,r),l.bind(),l.setVertexAttribPointers(Q,r,_);for(const fe of d)fe.bind(),fe.setVertexAttribPointers(Q,r,_);T&&(T.bind(),T.setVertexAttribPointers(Q,r,_)),g&&g.bind(),A&&(A.bind(),A.setVertexAttribPointers(Q,r,_)),z&&(z.bind(),z.setVertexAttribPointers(Q,r,_)),te.currentNumAttributes=U}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const hu=(v,r,l,d,g)=>({u_matrix:v,u_texture:0,u_ele_delta:r,u_fog_matrix:l,u_fog_color:d?d.properties.get("fog-color"):u.aN.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(g):0,u_horizon_color:d?d.properties.get("horizon-color"):u.aN.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function Kr(v){const r=[];for(let l=0;l<v.length;l++){if(v[l]===null)continue;const d=v[l].split(" ");r.push(d.pop())}return r}class sl{constructor(r,l,d,g,_,T){const A=r.gl;this.program=A.createProgram();const z=Kr(l.staticAttributes),U=d?d.getBinderAttributes():[],te=z.concat(U),Q=Ko.prelude.staticUniforms?Kr(Ko.prelude.staticUniforms):[],fe=l.staticUniforms?Kr(l.staticUniforms):[],we=d?d.getBinderUniforms():[],Pe=Q.concat(fe).concat(we),Oe=[];for(const at of Pe)Oe.indexOf(at)<0&&Oe.push(at);const Me=d?d.defines():[];_&&Me.push("#define OVERDRAW_INSPECTOR;"),T&&Me.push("#define TERRAIN3D;");const Be=Me.concat(Ko.prelude.fragmentSource,l.fragmentSource).join(`
`),Ke=Me.concat(Ko.prelude.vertexSource,l.vertexSource).join(`
`),je=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(je,Be),A.compileShader(je),!A.getShaderParameter(je,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(je)}`);A.attachShader(this.program,je);const Je=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Je,Ke),A.compileShader(Je),!A.getShaderParameter(Je,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(Je)}`);A.attachShader(this.program,Je),this.attributes={};const nt={};this.numAttributes=te.length;for(let at=0;at<this.numAttributes;at++)te[at]&&(A.bindAttribLocation(this.program,at,te[at]),this.attributes[te[at]]=at);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(Je),A.deleteShader(je);for(let at=0;at<Oe.length;at++){const mt=Oe[at];if(mt&&!nt[mt]){const wt=A.getUniformLocation(this.program,mt);wt&&(nt[mt]=wt)}}this.fixedUniforms=g(r,nt),this.terrainUniforms=((at,mt)=>({u_depth:new u.aI(at,mt.u_depth),u_terrain:new u.aI(at,mt.u_terrain),u_terrain_dim:new u.aJ(at,mt.u_terrain_dim),u_terrain_matrix:new u.aK(at,mt.u_terrain_matrix),u_terrain_unpack:new u.aL(at,mt.u_terrain_unpack),u_terrain_exaggeration:new u.aJ(at,mt.u_terrain_exaggeration)}))(r,nt),this.binderUniforms=d?d.getUniforms(r,nt):[]}draw(r,l,d,g,_,T,A,z,U,te,Q,fe,we,Pe,Oe,Me,Be,Ke){const je=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(g),r.setColorMode(_),r.setCullFace(T),z){r.activeTexture.set(je.TEXTURE2),je.bindTexture(je.TEXTURE_2D,z.depthTexture),r.activeTexture.set(je.TEXTURE3),je.bindTexture(je.TEXTURE_2D,z.texture);for(const nt in this.terrainUniforms)this.terrainUniforms[nt].set(z[nt])}for(const nt in this.fixedUniforms)this.fixedUniforms[nt].set(A[nt]);Oe&&Oe.setUniforms(r,this.binderUniforms,we,{zoom:Pe});let Je=0;switch(l){case je.LINES:Je=2;break;case je.TRIANGLES:Je=3;break;case je.LINE_STRIP:Je=1}for(const nt of fe.get()){const at=nt.vaos||(nt.vaos={});(at[U]||(at[U]=new ol)).bind(r,this,te,Oe?Oe.getPaintVertexBuffers():[],Q,nt.vertexOffset,Me,Be,Ke),je.drawElements(l,nt.primitiveLength*Je,je.UNSIGNED_SHORT,nt.primitiveOffset*Je*2)}}}function al(v,r,l){const d=1/hn(l,1,r.transform.tileZoom),g=Math.pow(2,l.tileID.overscaledZ),_=l.tileSize*Math.pow(2,r.transform.tileZoom)/g,T=_*(l.tileID.canonical.x+l.tileID.wrap*g),A=_*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[T>>16,A>>16],u_pixel_coord_lower:[65535&T,65535&A]}}const ll=(v,r,l,d)=>{const g=r.style.light,_=g.properties.get("position"),T=[_.x,_.y,_.z],A=function(){var U=new u.A(9);return u.A!=Float32Array&&(U[1]=0,U[2]=0,U[3]=0,U[5]=0,U[6]=0,U[7]=0),U[0]=1,U[4]=1,U[8]=1,U}();g.properties.get("anchor")==="viewport"&&function(U,te){var Q=Math.sin(te),fe=Math.cos(te);U[0]=fe,U[1]=Q,U[2]=0,U[3]=-Q,U[4]=fe,U[5]=0,U[6]=0,U[7]=0,U[8]=1}(A,-r.transform.angle),function(U,te,Q){var fe=te[0],we=te[1],Pe=te[2];U[0]=fe*Q[0]+we*Q[3]+Pe*Q[6],U[1]=fe*Q[1]+we*Q[4]+Pe*Q[7],U[2]=fe*Q[2]+we*Q[5]+Pe*Q[8]}(T,T,A);const z=g.properties.get("color");return{u_matrix:v,u_lightpos:T,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+l,u_opacity:d}},ul=(v,r,l,d,g,_,T)=>u.e(ll(v,r,l,d),al(_,r,T),{u_height_factor:-Math.pow(2,g.overscaledZ)/T.tileSize/8}),xa=v=>({u_matrix:v}),ms=(v,r,l,d)=>u.e(xa(v),al(l,r,d)),du=(v,r)=>({u_matrix:v,u_world:r}),lc=(v,r,l,d,g)=>u.e(ms(v,r,l,d),{u_world:g}),wa=(v,r,l,d)=>{const g=v.transform;let _,T;if(d.paint.get("circle-pitch-alignment")==="map"){const A=hn(l,1,g.zoom);_=!0,T=[A,A]}else _=!1,T=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(r.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:T}},Gh=(v,r,l)=>({u_matrix:v,u_inv_matrix:r,u_camera_to_center_distance:l.cameraToCenterDistance,u_viewport_size:[l.width,l.height]}),gi=(v,r,l=1)=>({u_matrix:v,u_color:r,u_overlay:0,u_overlay_scale:l}),ba=v=>({u_matrix:v}),yi=(v,r,l,d)=>({u_matrix:v,u_extrude_scale:hn(r,1,l),u_intensity:d});function vi(v,r){const l=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new u.Z(0,d/l).toLngLat().lat,new u.Z(0,(d+1)/l).toLngLat().lat]}const Sa=(v,r,l,d)=>{const g=v.transform;return{u_matrix:cl(v,r,l,d),u_ratio:1/hn(r,1,g.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Ea=(v,r,l,d,g)=>u.e(Sa(v,r,l,g),{u_image:0,u_image_height:d}),uc=(v,r,l,d,g)=>{const _=v.transform,T=gs(r,_);return{u_matrix:cl(v,r,l,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/hn(r,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[T,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},cc=(v,r,l,d,g,_)=>{const T=v.lineAtlas,A=gs(r,v.transform),z=l.layout.get("line-cap")==="round",U=T.getDash(d.from,z),te=T.getDash(d.to,z),Q=U.width*g.fromScale,fe=te.width*g.toScale;return u.e(Sa(v,r,l,_),{u_patternscale_a:[A/Q,-U.height/2],u_patternscale_b:[A/fe,-te.height/2],u_sdfgamma:T.width/(256*Math.min(Q,fe)*v.pixelRatio)/2,u_image:0,u_tex_y_a:U.y,u_tex_y_b:te.y,u_mix:g.t})};function gs(v,r){return 1/hn(v,1,r.tileZoom)}function cl(v,r,l,d){return v.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Zh=(v,r,l,d,g)=>{return{u_matrix:v,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(T=g.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Wh(g.paint.get("raster-hue-rotate"))};var _,T};function Wh(v){v*=Math.PI/180;const r=Math.sin(v),l=Math.cos(v);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const hc=(v,r,l,d,g,_,T,A,z,U,te,Q,fe,we)=>{const Pe=T.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Pe.cameraToCenterDistance,u_pitch:Pe.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Pe.width/Pe.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:z,u_coord_matrix:U,u_is_text:+Q,u_pitch_with_map:+d,u_is_along_line:g,u_is_variable_anchor:_,u_texsize:fe,u_texture:0,u_translation:te,u_pitched_scale:we}},dc=(v,r,l,d,g,_,T,A,z,U,te,Q,fe,we,Pe)=>{const Oe=T.transform;return u.e(hc(v,r,l,d,g,_,T,A,z,U,te,Q,fe,Pe),{u_gamma_scale:d?Math.cos(Oe._pitch)*Oe.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:+we})},fc=(v,r,l,d,g,_,T,A,z,U,te,Q,fe,we)=>u.e(dc(v,r,l,d,g,_,T,A,z,U,te,!0,Q,!0,we),{u_texsize_icon:fe,u_texture_icon:1}),hl=(v,r,l)=>({u_matrix:v,u_opacity:r,u_color:l}),dl=(v,r,l,d,g,_)=>u.e(function(T,A,z,U){const te=z.imageManager.getPattern(T.from.toString()),Q=z.imageManager.getPattern(T.to.toString()),{width:fe,height:we}=z.imageManager.getPixelSize(),Pe=Math.pow(2,U.tileID.overscaledZ),Oe=U.tileSize*Math.pow(2,z.transform.tileZoom)/Pe,Me=Oe*(U.tileID.canonical.x+U.tileID.wrap*Pe),Be=Oe*U.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[fe,we],u_mix:A.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/hn(U,1,z.transform.tileZoom),u_pixel_coord_upper:[Me>>16,Be>>16],u_pixel_coord_lower:[65535&Me,65535&Be]}}(d,_,l,g),{u_matrix:v,u_opacity:r}),fl={fillExtrusion:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_lightpos:new u.aO(v,r.u_lightpos),u_lightintensity:new u.aJ(v,r.u_lightintensity),u_lightcolor:new u.aO(v,r.u_lightcolor),u_vertical_gradient:new u.aJ(v,r.u_vertical_gradient),u_opacity:new u.aJ(v,r.u_opacity)}),fillExtrusionPattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_lightpos:new u.aO(v,r.u_lightpos),u_lightintensity:new u.aJ(v,r.u_lightintensity),u_lightcolor:new u.aO(v,r.u_lightcolor),u_vertical_gradient:new u.aJ(v,r.u_vertical_gradient),u_height_factor:new u.aJ(v,r.u_height_factor),u_image:new u.aI(v,r.u_image),u_texsize:new u.aP(v,r.u_texsize),u_pixel_coord_upper:new u.aP(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(v,r.u_pixel_coord_lower),u_scale:new u.aO(v,r.u_scale),u_fade:new u.aJ(v,r.u_fade),u_opacity:new u.aJ(v,r.u_opacity)}),fill:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix)}),fillPattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_image:new u.aI(v,r.u_image),u_texsize:new u.aP(v,r.u_texsize),u_pixel_coord_upper:new u.aP(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(v,r.u_pixel_coord_lower),u_scale:new u.aO(v,r.u_scale),u_fade:new u.aJ(v,r.u_fade)}),fillOutline:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_world:new u.aP(v,r.u_world)}),fillOutlinePattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_world:new u.aP(v,r.u_world),u_image:new u.aI(v,r.u_image),u_texsize:new u.aP(v,r.u_texsize),u_pixel_coord_upper:new u.aP(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(v,r.u_pixel_coord_lower),u_scale:new u.aO(v,r.u_scale),u_fade:new u.aJ(v,r.u_fade)}),circle:(v,r)=>({u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_scale_with_map:new u.aI(v,r.u_scale_with_map),u_pitch_with_map:new u.aI(v,r.u_pitch_with_map),u_extrude_scale:new u.aP(v,r.u_extrude_scale),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_matrix:new u.aK(v,r.u_matrix)}),collisionBox:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_pixel_extrude_scale:new u.aP(v,r.u_pixel_extrude_scale)}),collisionCircle:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_inv_matrix:new u.aK(v,r.u_inv_matrix),u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_viewport_size:new u.aP(v,r.u_viewport_size)}),debug:(v,r)=>({u_color:new u.aM(v,r.u_color),u_matrix:new u.aK(v,r.u_matrix),u_overlay:new u.aI(v,r.u_overlay),u_overlay_scale:new u.aJ(v,r.u_overlay_scale)}),clippingMask:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix)}),heatmap:(v,r)=>({u_extrude_scale:new u.aJ(v,r.u_extrude_scale),u_intensity:new u.aJ(v,r.u_intensity),u_matrix:new u.aK(v,r.u_matrix)}),heatmapTexture:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_world:new u.aP(v,r.u_world),u_image:new u.aI(v,r.u_image),u_color_ramp:new u.aI(v,r.u_color_ramp),u_opacity:new u.aJ(v,r.u_opacity)}),hillshade:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_image:new u.aI(v,r.u_image),u_latrange:new u.aP(v,r.u_latrange),u_light:new u.aP(v,r.u_light),u_shadow:new u.aM(v,r.u_shadow),u_highlight:new u.aM(v,r.u_highlight),u_accent:new u.aM(v,r.u_accent)}),hillshadePrepare:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_image:new u.aI(v,r.u_image),u_dimension:new u.aP(v,r.u_dimension),u_zoom:new u.aJ(v,r.u_zoom),u_unpack:new u.aL(v,r.u_unpack)}),line:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_ratio:new u.aJ(v,r.u_ratio),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aP(v,r.u_units_to_pixels)}),lineGradient:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_ratio:new u.aJ(v,r.u_ratio),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aP(v,r.u_units_to_pixels),u_image:new u.aI(v,r.u_image),u_image_height:new u.aJ(v,r.u_image_height)}),linePattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_texsize:new u.aP(v,r.u_texsize),u_ratio:new u.aJ(v,r.u_ratio),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_image:new u.aI(v,r.u_image),u_units_to_pixels:new u.aP(v,r.u_units_to_pixels),u_scale:new u.aO(v,r.u_scale),u_fade:new u.aJ(v,r.u_fade)}),lineSDF:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_ratio:new u.aJ(v,r.u_ratio),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aP(v,r.u_units_to_pixels),u_patternscale_a:new u.aP(v,r.u_patternscale_a),u_patternscale_b:new u.aP(v,r.u_patternscale_b),u_sdfgamma:new u.aJ(v,r.u_sdfgamma),u_image:new u.aI(v,r.u_image),u_tex_y_a:new u.aJ(v,r.u_tex_y_a),u_tex_y_b:new u.aJ(v,r.u_tex_y_b),u_mix:new u.aJ(v,r.u_mix)}),raster:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_tl_parent:new u.aP(v,r.u_tl_parent),u_scale_parent:new u.aJ(v,r.u_scale_parent),u_buffer_scale:new u.aJ(v,r.u_buffer_scale),u_fade_t:new u.aJ(v,r.u_fade_t),u_opacity:new u.aJ(v,r.u_opacity),u_image0:new u.aI(v,r.u_image0),u_image1:new u.aI(v,r.u_image1),u_brightness_low:new u.aJ(v,r.u_brightness_low),u_brightness_high:new u.aJ(v,r.u_brightness_high),u_saturation_factor:new u.aJ(v,r.u_saturation_factor),u_contrast_factor:new u.aJ(v,r.u_contrast_factor),u_spin_weights:new u.aO(v,r.u_spin_weights)}),symbolIcon:(v,r)=>({u_is_size_zoom_constant:new u.aI(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(v,r.u_is_size_feature_constant),u_size_t:new u.aJ(v,r.u_size_t),u_size:new u.aJ(v,r.u_size),u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_pitch:new u.aJ(v,r.u_pitch),u_rotate_symbol:new u.aI(v,r.u_rotate_symbol),u_aspect_ratio:new u.aJ(v,r.u_aspect_ratio),u_fade_change:new u.aJ(v,r.u_fade_change),u_matrix:new u.aK(v,r.u_matrix),u_label_plane_matrix:new u.aK(v,r.u_label_plane_matrix),u_coord_matrix:new u.aK(v,r.u_coord_matrix),u_is_text:new u.aI(v,r.u_is_text),u_pitch_with_map:new u.aI(v,r.u_pitch_with_map),u_is_along_line:new u.aI(v,r.u_is_along_line),u_is_variable_anchor:new u.aI(v,r.u_is_variable_anchor),u_texsize:new u.aP(v,r.u_texsize),u_texture:new u.aI(v,r.u_texture),u_translation:new u.aP(v,r.u_translation),u_pitched_scale:new u.aJ(v,r.u_pitched_scale)}),symbolSDF:(v,r)=>({u_is_size_zoom_constant:new u.aI(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(v,r.u_is_size_feature_constant),u_size_t:new u.aJ(v,r.u_size_t),u_size:new u.aJ(v,r.u_size),u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_pitch:new u.aJ(v,r.u_pitch),u_rotate_symbol:new u.aI(v,r.u_rotate_symbol),u_aspect_ratio:new u.aJ(v,r.u_aspect_ratio),u_fade_change:new u.aJ(v,r.u_fade_change),u_matrix:new u.aK(v,r.u_matrix),u_label_plane_matrix:new u.aK(v,r.u_label_plane_matrix),u_coord_matrix:new u.aK(v,r.u_coord_matrix),u_is_text:new u.aI(v,r.u_is_text),u_pitch_with_map:new u.aI(v,r.u_pitch_with_map),u_is_along_line:new u.aI(v,r.u_is_along_line),u_is_variable_anchor:new u.aI(v,r.u_is_variable_anchor),u_texsize:new u.aP(v,r.u_texsize),u_texture:new u.aI(v,r.u_texture),u_gamma_scale:new u.aJ(v,r.u_gamma_scale),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_is_halo:new u.aI(v,r.u_is_halo),u_translation:new u.aP(v,r.u_translation),u_pitched_scale:new u.aJ(v,r.u_pitched_scale)}),symbolTextAndIcon:(v,r)=>({u_is_size_zoom_constant:new u.aI(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(v,r.u_is_size_feature_constant),u_size_t:new u.aJ(v,r.u_size_t),u_size:new u.aJ(v,r.u_size),u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_pitch:new u.aJ(v,r.u_pitch),u_rotate_symbol:new u.aI(v,r.u_rotate_symbol),u_aspect_ratio:new u.aJ(v,r.u_aspect_ratio),u_fade_change:new u.aJ(v,r.u_fade_change),u_matrix:new u.aK(v,r.u_matrix),u_label_plane_matrix:new u.aK(v,r.u_label_plane_matrix),u_coord_matrix:new u.aK(v,r.u_coord_matrix),u_is_text:new u.aI(v,r.u_is_text),u_pitch_with_map:new u.aI(v,r.u_pitch_with_map),u_is_along_line:new u.aI(v,r.u_is_along_line),u_is_variable_anchor:new u.aI(v,r.u_is_variable_anchor),u_texsize:new u.aP(v,r.u_texsize),u_texsize_icon:new u.aP(v,r.u_texsize_icon),u_texture:new u.aI(v,r.u_texture),u_texture_icon:new u.aI(v,r.u_texture_icon),u_gamma_scale:new u.aJ(v,r.u_gamma_scale),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_is_halo:new u.aI(v,r.u_is_halo),u_translation:new u.aP(v,r.u_translation),u_pitched_scale:new u.aJ(v,r.u_pitched_scale)}),background:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_opacity:new u.aJ(v,r.u_opacity),u_color:new u.aM(v,r.u_color)}),backgroundPattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_opacity:new u.aJ(v,r.u_opacity),u_image:new u.aI(v,r.u_image),u_pattern_tl_a:new u.aP(v,r.u_pattern_tl_a),u_pattern_br_a:new u.aP(v,r.u_pattern_br_a),u_pattern_tl_b:new u.aP(v,r.u_pattern_tl_b),u_pattern_br_b:new u.aP(v,r.u_pattern_br_b),u_texsize:new u.aP(v,r.u_texsize),u_mix:new u.aJ(v,r.u_mix),u_pattern_size_a:new u.aP(v,r.u_pattern_size_a),u_pattern_size_b:new u.aP(v,r.u_pattern_size_b),u_scale_a:new u.aJ(v,r.u_scale_a),u_scale_b:new u.aJ(v,r.u_scale_b),u_pixel_coord_upper:new u.aP(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(v,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aJ(v,r.u_tile_units_to_pixels)}),terrain:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_texture:new u.aI(v,r.u_texture),u_ele_delta:new u.aJ(v,r.u_ele_delta),u_fog_matrix:new u.aK(v,r.u_fog_matrix),u_fog_color:new u.aM(v,r.u_fog_color),u_fog_ground_blend:new u.aJ(v,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aJ(v,r.u_fog_ground_blend_opacity),u_horizon_color:new u.aM(v,r.u_horizon_color),u_horizon_fog_blend:new u.aJ(v,r.u_horizon_fog_blend)}),terrainDepth:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_ele_delta:new u.aJ(v,r.u_ele_delta)}),terrainCoords:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_texture:new u.aI(v,r.u_texture),u_terrain_coords_id:new u.aJ(v,r.u_terrain_coords_id),u_ele_delta:new u.aJ(v,r.u_ele_delta)}),sky:(v,r)=>({u_sky_color:new u.aM(v,r.u_sky_color),u_horizon_color:new u.aM(v,r.u_horizon_color),u_horizon:new u.aJ(v,r.u_horizon),u_sky_horizon_blend:new u.aJ(v,r.u_sky_horizon_blend)})};class fu{constructor(r,l,d){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ro{constructor(r,l,d,g){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let d=0;d<this.attributes.length;d++){const g=l.attributes[this.attributes[d].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,l,d){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],T=l.attributes[_.name];T!==void 0&&r.vertexAttribPointer(T,_.components,r[pl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pu=new WeakMap;function Bs(v){var r;if(pu.has(v))return pu.get(v);{const l=(r=v.getParameter(v.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return pu.set(v,l),l}}class An{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ns extends An{getDefault(){return u.aN.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Hh extends An{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Us extends An{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Xh extends An{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class $s extends An{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Kh extends An{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class pc extends An{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class qh extends An{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class mc extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class ml extends An{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class gl extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class gc extends An{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class yc extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class vc extends An{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class ys extends An{getDefault(){return u.aN.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class mu extends An{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Jh extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class Yh extends An{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class _c extends An{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Ta extends An{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class yl extends An{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class vl extends An{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Vs extends An{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class xc extends An{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Gi extends An{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class wc extends An{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class bc extends An{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class gu extends An{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;const d=this.gl;Bs(d)?d.bindVertexArray(r):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Sc extends An{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Gs extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class yo extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class qo extends An{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class yu extends qo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class vu extends qo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ca extends qo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class _l{constructor(r,l,d,g,_){this.context=r,this.width=l,this.height=d;const T=r.gl,A=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new yu(r,A),g)this.depthAttachment=_?new Ca(r,A):new vu(r,A);else if(_)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Gn{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}Gn.Replace=[1,0],Gn.disabled=new Gn(Gn.Replace,u.aN.transparent,[!1,!1,!1,!1]),Gn.unblended=new Gn(Gn.Replace,u.aN.transparent,[!0,!0,!0,!0]),Gn.alphaBlended=new Gn([1,771],u.aN.transparent,[!0,!0,!0,!0]);class _u{constructor(r){var l,d;if(this.gl=r,this.clearColor=new Ns(this),this.clearDepth=new Hh(this),this.clearStencil=new Us(this),this.colorMask=new Xh(this),this.depthMask=new $s(this),this.stencilMask=new Kh(this),this.stencilFunc=new pc(this),this.stencilOp=new qh(this),this.stencilTest=new mc(this),this.depthRange=new ml(this),this.depthTest=new gl(this),this.depthFunc=new gc(this),this.blend=new yc(this),this.blendFunc=new vc(this),this.blendColor=new ys(this),this.blendEquation=new mu(this),this.cullFace=new Jh(this),this.cullFaceSide=new Yh(this),this.frontFace=new _c(this),this.program=new Ta(this),this.activeTexture=new yl(this),this.viewport=new vl(this),this.bindFramebuffer=new Vs(this),this.bindRenderbuffer=new xc(this),this.bindTexture=new Gi(this),this.bindVertexBuffer=new wc(this),this.bindElementBuffer=new bc(this),this.bindVertexArray=new gu(this),this.pixelStoreUnpack=new Sc(this),this.pixelStoreUnpackPremultiplyAlpha=new Gs(this),this.pixelStoreUnpackFlipY=new yo(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Bs(r)){this.HALF_FLOAT=r.HALF_FLOAT;const g=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:g==null?void 0:g.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const g=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new fu(this,r,l)}createVertexBuffer(r,l,d){return new ro(this,r,l,d)}createRenderbuffer(r,l,d){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,r,l,d),this.bindRenderbuffer.set(null),_}createFramebuffer(r,l,d,g){return new _l(this,r,l,d,g)}clear({color:r,depth:l,stencil:d}){const g=this.gl;let _=0;r&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),g.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aF(r.blendFunction,Gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Bs(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return Bs(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class bn{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}bn.ReadOnly=!1,bn.ReadWrite=!0,bn.disabled=new bn(519,bn.ReadOnly,[0,1]);const Zs=7680;class Ln{constructor(r,l,d,g,_,T){this.test=r,this.ref=l,this.mask=d,this.fail=g,this.depthFail=_,this.pass=T}}Ln.disabled=new Ln({func:519,mask:0},0,0,Zs,Zs,Zs);class Kn{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}let Ws;function Pa(v,r,l,d,g){const _=v.context,T=_.gl,A=v.useProgram("collisionBox"),z=[];let U=0,te=0;for(let Be=0;Be<d.length;Be++){const Ke=d[Be],je=r.getTile(Ke).getBucket(l);if(!je)continue;const Je=g?je.textCollisionBox:je.iconCollisionBox,nt=je.collisionCircleArray;if(nt.length>0){const at=u.H();u.aR(at,je.placementInvProjMatrix,v.transform.glCoordMatrix),u.aR(at,at,je.placementViewportMatrix),z.push({circleArray:nt,circleOffset:te,transform:Ke.posMatrix,invTransform:at,coord:Ke}),U+=nt.length/4,te=U}Je&&A.draw(_,T.LINES,bn.disabled,Ln.disabled,v.colorModeForRenderPass(),Kn.disabled,{u_matrix:Ke.posMatrix,u_pixel_extrude_scale:[1/(Q=v.transform).width,1/Q.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ke),l.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,v.transform.zoom,null,null,Je.collisionVertexBuffer)}var Q;if(!g||!z.length)return;const fe=v.useProgram("collisionCircle"),we=new u.aS;we.resize(4*U),we._trim();let Pe=0;for(const Be of z)for(let Ke=0;Ke<Be.circleArray.length/4;Ke++){const je=4*Ke,Je=Be.circleArray[je+0],nt=Be.circleArray[je+1],at=Be.circleArray[je+2],mt=Be.circleArray[je+3];we.emplace(Pe++,Je,nt,at,mt,0),we.emplace(Pe++,Je,nt,at,mt,1),we.emplace(Pe++,Je,nt,at,mt,2),we.emplace(Pe++,Je,nt,at,mt,3)}(!Ws||Ws.length<2*U)&&(Ws=function(Be){const Ke=2*Be,je=new u.aU;je.resize(Ke),je._trim();for(let Je=0;Je<Ke;Je++){const nt=6*Je;je.uint16[nt+0]=4*Je+0,je.uint16[nt+1]=4*Je+1,je.uint16[nt+2]=4*Je+2,je.uint16[nt+3]=4*Je+2,je.uint16[nt+4]=4*Je+3,je.uint16[nt+5]=4*Je+0}return je}(U));const Oe=_.createIndexBuffer(Ws,!0),Me=_.createVertexBuffer(we,u.aT.members,!0);for(const Be of z){const Ke=Gh(Be.transform,Be.invTransform,v.transform);fe.draw(_,T.TRIANGLES,bn.disabled,Ln.disabled,v.colorModeForRenderPass(),Kn.disabled,Ke,v.style.map.terrain&&v.style.map.terrain.getTerrainData(Be.coord),l.id,Me,Oe,u.a0.simpleSegment(0,2*Be.circleOffset,Be.circleArray.length,Be.circleArray.length/2),null,v.transform.zoom,null,null,null)}Me.destroy(),Oe.destroy()}Kn.disabled=new Kn(!1,1029,2305),Kn.backCCW=new Kn(!0,1029,2305);const xu=u.ao(new Float32Array(16));function vo(v,r,l,d,g,_){const{horizontalAlign:T,verticalAlign:A}=u.av(v);return new u.P((-(T-.5)*r/g+d[0])*_,(-(A-.5)*l/g+d[1])*_)}function _o(v,r,l,d,g,_){const T=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let A=d.mult(_);return l||(A=A.rotate(-g)),ze(T.add(A),r.labelPlaneMatrix,r.getElevation).point}if(l){const A=st(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(v),z=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return v.add(d.rotate(z))}return v.add(d)}function Fr(v,r,l,d,g,_,T,A,z,U,te,Q,fe,we){const Pe=v.text.placedSymbolArray,Oe=v.text.dynamicLayoutVertexArray,Me=v.icon.dynamicLayoutVertexArray,Be={};Oe.clear();for(let Ke=0;Ke<Pe.length;Ke++){const je=Pe.get(Ke),Je=je.hidden||!je.crossTileID||v.allowVerticalPlacement&&!je.placedOrientation?null:d[je.crossTileID];if(Je){const nt=new u.P(je.anchorX,je.anchorY),at={getElevation:we,width:g.width,height:g.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:l,projection:te,projectionCache:null,tileAnchorPoint:nt,translation:Q,unwrappedTileID:fe},mt=l?ze(nt,T,we):st(nt.x,nt.y,at),wt=se(g.cameraToCenterDistance,mt.signedDistanceFromCamera);let Dt=u.aj(v.textSizeData,z,je)*wt/u.aq;l&&(Dt*=v.tilePixelRatio/A);const{width:Bt,height:bt,anchor:Tt,textOffset:Gt,textBoxScale:mn}=Je,At=vo(Tt,Bt,bt,Gt,mn,Dt),jt=te.getPitchedTextCorrection(g,nt.add(new u.P(Q[0],Q[1])),fe),cn=_o(mt.point,at,r,At,g.angle,jt),or=v.allowVerticalPlacement&&je.placedOrientation===u.ai.vertical?Math.PI/2:0;for(let xn=0;xn<je.numGlyphs;xn++)u.ak(Oe,cn,or);U&&je.associatedIconIndex>=0&&(Be[je.associatedIconIndex]={shiftedAnchor:cn,angle:or})}else nn(je.numGlyphs,Oe)}if(U){Me.clear();const Ke=v.icon.placedSymbolArray;for(let je=0;je<Ke.length;je++){const Je=Ke.get(je);if(Je.hidden)nn(Je.numGlyphs,Me);else{const nt=Be[je];if(nt)for(let at=0;at<Je.numGlyphs;at++)u.ak(Me,nt.shiftedAnchor,nt.angle);else nn(Je.numGlyphs,Me)}}v.icon.dynamicLayoutVertexBuffer.updateData(Me)}v.text.dynamicLayoutVertexBuffer.updateData(Oe)}function xo(v,r,l){return l.iconsInText&&r?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function io(v,r,l,d,g,_,T,A,z,U,te,Q){const fe=v.context,we=fe.gl,Pe=v.transform,Oe=rl(),Me=A==="map",Be=z==="map",Ke=A!=="viewport"&&l.layout.get("symbol-placement")!=="point",je=Me&&!Be&&!Ke,Je=!Be&&Ke,nt=!l.layout.get("symbol-sort-key").isConstant();let at=!1;const mt=v.depthModeForSublayer(0,bn.ReadOnly),wt=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Dt=[],Bt=Oe.getCircleRadiusCorrection(Pe);for(const bt of d){const Tt=r.getTile(bt),Gt=Tt.getBucket(l);if(!Gt)continue;const mn=g?Gt.text:Gt.icon;if(!mn||!mn.segments.get().length||!mn.hasVisibleVertices)continue;const At=mn.programConfigurations.get(l.id),jt=g||Gt.sdfIcons,cn=g?Gt.textSizeData:Gt.iconSizeData,or=Be||Pe.pitch!==0,xn=v.useProgram(xo(jt,g,Gt),At),Cn=u.ah(cn,Pe.zoom),sr=v.style.map.terrain&&v.style.map.terrain.getTerrainData(bt);let ti,Co,ar,zi,wi=[0,0],ni=null;if(g)Co=Tt.glyphAtlasTexture,ar=we.LINEAR,ti=Tt.glyphAtlasTexture.size,Gt.iconsInText&&(wi=Tt.imageAtlasTexture.size,ni=Tt.imageAtlasTexture,zi=or||v.options.rotating||v.options.zooming||cn.kind==="composite"||cn.kind==="camera"?we.LINEAR:we.NEAREST);else{const cr=l.layout.get("icon-size").constantOr(0)!==1||Gt.iconsNeedLinear;Co=Tt.imageAtlasTexture,ar=jt||v.options.rotating||v.options.zooming||cr||or?we.LINEAR:we.NEAREST,ti=Tt.imageAtlasTexture.size}const ri=hn(Tt,1,v.transform.zoom),Po=Je?bt.posMatrix:xu,Fa=Ii(Po,Be,Me,v.transform,ri),Pc=Ur(Po,Be,Me,v.transform,ri),El=Ur(bt.posMatrix,Be,Me,v.transform,ri),Ra=Oe.translatePosition(v.transform,Tt,_,T),Ic=wt&&Gt.hasTextData(),_d=l.layout.get("icon-text-fit")!=="none"&&Ic&&Gt.hasIconData();if(Ke){const cr=v.style.map.terrain?(xd,Dr)=>v.style.map.terrain.getElevation(bt,xd,Dr):null,Cl=l.layout.get("text-rotation-alignment")==="map";xe(Gt,bt.posMatrix,v,g,Fa,El,Be,U,Cl,Oe,bt.toUnwrapped(),Pe.width,Pe.height,Ra,cr)}const qr=bt.posMatrix,Io=g&&wt||_d,Ys=Ke||Io?xu:Fa,Tl=Pc,ii=jt&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oi;oi=jt?Gt.iconsInText?fc(cn.kind,Cn,je,Be,Ke,Io,v,qr,Ys,Tl,Ra,ti,wi,Bt):dc(cn.kind,Cn,je,Be,Ke,Io,v,qr,Ys,Tl,Ra,g,ti,!0,Bt):hc(cn.kind,Cn,je,Be,Ke,Io,v,qr,Ys,Tl,Ra,g,ti,Bt);const Zr={program:xn,buffers:mn,uniformValues:oi,atlasTexture:Co,atlasTextureIcon:ni,atlasInterpolation:ar,atlasInterpolationIcon:zi,isSDF:jt,hasHalo:ii};if(nt&&Gt.canOverlap){at=!0;const cr=mn.segments.get();for(const Cl of cr)Dt.push({segments:new u.a0([Cl]),sortKey:Cl.sortKey,state:Zr,terrainData:sr})}else Dt.push({segments:mn.segments,sortKey:0,state:Zr,terrainData:sr})}at&&Dt.sort((bt,Tt)=>bt.sortKey-Tt.sortKey);for(const bt of Dt){const Tt=bt.state;if(fe.activeTexture.set(we.TEXTURE0),Tt.atlasTexture.bind(Tt.atlasInterpolation,we.CLAMP_TO_EDGE),Tt.atlasTextureIcon&&(fe.activeTexture.set(we.TEXTURE1),Tt.atlasTextureIcon&&Tt.atlasTextureIcon.bind(Tt.atlasInterpolationIcon,we.CLAMP_TO_EDGE)),Tt.isSDF){const Gt=Tt.uniformValues;Tt.hasHalo&&(Gt.u_is_halo=1,wo(Tt.buffers,bt.segments,l,v,Tt.program,mt,te,Q,Gt,bt.terrainData)),Gt.u_is_halo=0}wo(Tt.buffers,bt.segments,l,v,Tt.program,mt,te,Q,Tt.uniformValues,bt.terrainData)}}function wo(v,r,l,d,g,_,T,A,z,U){const te=d.context;g.draw(te,te.gl.TRIANGLES,_,T,A,Kn.disabled,z,U,l.id,v.layoutVertexBuffer,v.indexBuffer,r,l.paint,d.transform.zoom,v.programConfigurations.get(l.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function _i(v,r,l,d,g){if(!l||!d||!d.imageAtlas)return;const _=d.imageAtlas.patternPositions;let T=_[l.to.toString()],A=_[l.from.toString()];if(!T&&A&&(T=A),!A&&T&&(A=T),!T||!A){const z=g.getPaintProperty(r);T=_[z],A=_[z]}T&&A&&v.setConstantPatternPositions(T,A)}function Hs(v,r,l,d,g,_,T){const A=v.context.gl,z="fill-pattern",U=l.paint.get(z),te=U&&U.constantOr(1),Q=l.getCrossfadeParameters();let fe,we,Pe,Oe,Me;T?(we=te&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",fe=A.LINES):(we=te?"fillPattern":"fill",fe=A.TRIANGLES);const Be=U.constantOr(null);for(const Ke of d){const je=r.getTile(Ke);if(te&&!je.patternsLoaded())continue;const Je=je.getBucket(l);if(!Je)continue;const nt=Je.programConfigurations.get(l.id),at=v.useProgram(we,nt),mt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ke);te&&(v.context.activeTexture.set(A.TEXTURE0),je.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),nt.updatePaintBuffers(Q)),_i(nt,z,Be,je,l);const wt=mt?Ke:null,Dt=v.translatePosMatrix(wt?wt.posMatrix:Ke.posMatrix,je,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(T){Oe=Je.indexBuffer2,Me=Je.segments2;const Bt=[A.drawingBufferWidth,A.drawingBufferHeight];Pe=we==="fillOutlinePattern"&&te?lc(Dt,v,Q,je,Bt):du(Dt,Bt)}else Oe=Je.indexBuffer,Me=Je.segments,Pe=te?ms(Dt,v,Q,je):xa(Dt);at.draw(v.context,fe,g,v.stencilModeForClipping(Ke),_,Kn.disabled,Pe,mt,l.id,Je.layoutVertexBuffer,Oe,Me,l.paint,v.transform.zoom,nt)}}function vs(v,r,l,d,g,_,T){const A=v.context,z=A.gl,U="fill-extrusion-pattern",te=l.paint.get(U),Q=te.constantOr(1),fe=l.getCrossfadeParameters(),we=l.paint.get("fill-extrusion-opacity"),Pe=te.constantOr(null);for(const Oe of d){const Me=r.getTile(Oe),Be=Me.getBucket(l);if(!Be)continue;const Ke=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Oe),je=Be.programConfigurations.get(l.id),Je=v.useProgram(Q?"fillExtrusionPattern":"fillExtrusion",je);Q&&(v.context.activeTexture.set(z.TEXTURE0),Me.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),je.updatePaintBuffers(fe)),_i(je,U,Pe,Me,l);const nt=v.translatePosMatrix(Oe.posMatrix,Me,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),at=l.paint.get("fill-extrusion-vertical-gradient"),mt=Q?ul(nt,v,at,we,Oe,fe,Me):ll(nt,v,at,we);Je.draw(A,A.gl.TRIANGLES,g,_,T,Kn.backCCW,mt,Ke,l.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,l.paint,v.transform.zoom,je,v.style.map.terrain&&Be.centroidVertexBuffer)}}function xi(v,r,l,d,g,_,T){const A=v.context,z=A.gl,U=l.fbo;if(!U)return;const te=v.useProgram("hillshade"),Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(r);A.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,U.colorAttachment.get()),te.draw(A,z.TRIANGLES,g,_,T,Kn.disabled,((fe,we,Pe,Oe)=>{const Me=Pe.paint.get("hillshade-shadow-color"),Be=Pe.paint.get("hillshade-highlight-color"),Ke=Pe.paint.get("hillshade-accent-color");let je=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=fe.transform.angle);const Je=!fe.options.moving;return{u_matrix:Oe?Oe.posMatrix:fe.transform.calculatePosMatrix(we.tileID.toUnwrapped(),Je),u_image:0,u_latrange:vi(0,we.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),je],u_shadow:Me,u_highlight:Be,u_accent:Ke}})(v,l,d,Q?r:null),Q,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Ai(v,r,l,d,g,_){const T=v.context,A=T.gl,z=r.dem;if(z&&z.data){const U=z.dim,te=z.stride,Q=z.getPixels();if(T.activeTexture.set(A.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(te),r.demTexture){const we=r.demTexture;we.update(Q,{premultiply:!1}),we.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else r.demTexture=new H(T,Q,A.RGBA,{premultiply:!1}),r.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);T.activeTexture.set(A.TEXTURE0);let fe=r.fbo;if(!fe){const we=new H(T,{width:U,height:U,data:null},A.RGBA);we.bind(A.LINEAR,A.CLAMP_TO_EDGE),fe=r.fbo=T.createFramebuffer(U,U,!0,!1),fe.colorAttachment.set(we.texture)}T.bindFramebuffer.set(fe.framebuffer),T.viewport.set([0,0,U,U]),v.useProgram("hillshadePrepare").draw(T,A.TRIANGLES,d,g,_,Kn.disabled,((we,Pe)=>{const Oe=Pe.stride,Me=u.H();return u.aQ(Me,0,u.X,-u.X,0,0,1),u.J(Me,Me,[0,-u.X,0]),{u_matrix:Me,u_image:1,u_dimension:[Oe,Oe],u_zoom:we.overscaledZ,u_unpack:Pe.getUnpackVector()}})(r.tileID,z),null,l.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Ia(v,r,l,d,g,_){const T=d.paint.get("raster-fade-duration");if(!_&&T>0){const A=b.now(),z=(A-v.timeAdded)/T,U=r?(A-r.timeAdded)/T:-1,te=l.getSource(),Q=g.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),fe=!r||Math.abs(r.tileID.overscaledZ-Q)>Math.abs(v.tileID.overscaledZ-Q),we=fe&&v.refreshedUponExpiration?1:u.ad(fe?z:1-U,0,1);return v.refreshedUponExpiration&&z>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-we}:{opacity:we,mix:0}}return{opacity:1,mix:0}}const _s=new u.aN(1,0,0,1),Jo=new u.aN(0,1,0,1),Aa=new u.aN(0,0,1,1),wu=new u.aN(1,0,1,1),xs=new u.aN(0,1,1,1);function Yo(v,r,l,d){ws(v,0,r+l/2,v.transform.width,l,d)}function oo(v,r,l,d){ws(v,r-l/2,0,l,v.transform.height,d)}function ws(v,r,l,d,g,_){const T=v.context,A=T.gl;A.enable(A.SCISSOR_TEST),A.scissor(r*v.pixelRatio,l*v.pixelRatio,d*v.pixelRatio,g*v.pixelRatio),T.clear({color:_}),A.disable(A.SCISSOR_TEST)}function zn(v,r,l){const d=v.context,g=d.gl,_=l.posMatrix,T=v.useProgram("debug"),A=bn.disabled,z=Ln.disabled,U=v.colorModeForRenderPass(),te="$debug",Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(l);d.activeTexture.set(g.TEXTURE0);const fe=r.getTileByID(l.key).latestRawTileData,we=Math.floor((fe&&fe.byteLength||0)/1024),Pe=r.getTile(l).tileSize,Oe=512/Math.min(Pe,512)*(l.overscaledZ/v.transform.zoom)*.5;let Me=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Me+=` => ${l.overscaledZ}`),function(Be,Ke){Be.initDebugOverlayCanvas();const je=Be.debugOverlayCanvas,Je=Be.context.gl,nt=Be.debugOverlayCanvas.getContext("2d");nt.clearRect(0,0,je.width,je.height),nt.shadowColor="white",nt.shadowBlur=2,nt.lineWidth=1.5,nt.strokeStyle="white",nt.textBaseline="top",nt.font="bold 36px Open Sans, sans-serif",nt.fillText(Ke,5,5),nt.strokeText(Ke,5,5),Be.debugOverlayTexture.update(je),Be.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}(v,`${Me} ${we}kB`),T.draw(d,g.TRIANGLES,A,z,Gn.alphaBlended,Kn.disabled,gi(_,u.aN.transparent,Oe),null,te,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),T.draw(d,g.LINE_STRIP,A,z,U,Kn.disabled,gi(_,u.aN.red),Q,te,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Xs(v,r,l){const d=v.context,g=d.gl,_=v.colorModeForRenderPass(),T=new bn(g.LEQUAL,bn.ReadWrite,v.depthRangeFor3D),A=v.useProgram("terrain"),z=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,v.width,v.height]);for(const U of l){const te=v.renderToTexture.getTexture(U),Q=r.getTerrainData(U.tileID);d.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,te.texture);const fe=v.transform.calculatePosMatrix(U.tileID.toUnwrapped()),we=r.getMeshFrameDelta(v.transform.zoom),Pe=v.transform.calculateFogMatrix(U.tileID.toUnwrapped()),Oe=hu(fe,we,Pe,v.style.sky,v.transform.pitch);A.draw(d,g.TRIANGLES,T,Ln.disabled,_,Kn.backCCW,Oe,Q,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class xl{constructor(r,l,d){this.vertexBuffer=r,this.indexBuffer=l,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class bu{constructor(r,l){this.context=new _u(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ao(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=It.maxUnderzooming+It.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _r}resize(r,l,d){if(this.width=Math.floor(r*d),this.height=Math.floor(l*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,l=new u.aX;l.emplaceBack(0,0),l.emplaceBack(u.X,0),l.emplaceBack(0,u.X),l.emplaceBack(u.X,u.X),this.tileExtentBuffer=r.createVertexBuffer(l,_a.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const d=new u.aX;d.emplaceBack(0,0),d.emplaceBack(u.X,0),d.emplaceBack(0,u.X),d.emplaceBack(u.X,u.X),this.debugBuffer=r.createVertexBuffer(d,_a.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const g=new u.$;g.emplaceBack(0,0,0,0),g.emplaceBack(u.X,0,u.X,0),g.emplaceBack(0,u.X,0,u.X),g.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=r.createVertexBuffer(g,L.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const _=new u.aX;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,_a.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const T=new u.aZ;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const A=new u.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(A);const z=this.context.gl;this.stencilClearMode=new Ln({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=u.H();u.aQ(d,0,this.width,this.height,0,0,1),u.K(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,bn.disabled,this.stencilClearMode,Gn.disabled,Kn.disabled,ba(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const d=this.context,g=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(Gn.disabled),d.setDepthMode(bn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of l){const A=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);_.draw(d,g.TRIANGLES,bn.disabled,new Ln({func:g.ALWAYS,mask:0},A,255,g.KEEP,g.KEEP,g.REPLACE),Gn.disabled,Kn.disabled,ba(T.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new Ln({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new Ln({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,d=r.sort((T,A)=>A.overscaledZ-T.overscaledZ),g=d[d.length-1].overscaledZ,_=d[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let A=0;A<_;A++)T[A+g]=new Ln({func:l.GEQUAL,mask:255},A+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=_,[T,d]}return[{[g]:Ln.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Gn([r.CONSTANT_COLOR,r.ONE],new u.aN(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gn.unblended:Gn.alphaBlended}depthModeForSublayer(r,l,d){if(!this.opaquePassEnabledForLayer())return bn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new bn(d||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const d=this.style._order,g=this.style.sourceCaches,_={},T={},A={};for(const z in g){const U=g[z];U.used&&U.prepare(this.context),_[z]=U.getVisibleCoordinates(),T[z]=_[z].slice().reverse(),A[z]=U.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<d.length;z++)if(this.style._layers[d[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of d){const U=this.style._layers[z];if(!U.hasOffscreenPass()||U.isHidden(this.transform.zoom))continue;const te=T[U.source];(U.type==="custom"||te.length)&&this.renderLayer(this,g[U.source],U,te)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.aN.black:u.aN.transparent,depth:1}),this.clearStencil(),this.style.stylesheet.sky&&function(z,U){const te=z.context,Q=te.gl,fe=((Be,Ke,je)=>({u_sky_color:Be.properties.get("sky-color"),u_horizon_color:Be.properties.get("horizon-color"),u_horizon:(Ke.height/2+Ke.getHorizon())*je,u_sky_horizon_blend:Be.properties.get("sky-horizon-blend")*Ke.height/2*je}))(U,z.style.map.transform,z.pixelRatio),we=new bn(Q.LEQUAL,bn.ReadWrite,[0,1]),Pe=Ln.disabled,Oe=z.colorModeForRenderPass(),Me=z.useProgram("sky");if(!U.mesh){const Be=new u.aX;Be.emplaceBack(-1,-1),Be.emplaceBack(1,-1),Be.emplaceBack(1,1),Be.emplaceBack(-1,1);const Ke=new u.aY;Ke.emplaceBack(0,1,2),Ke.emplaceBack(0,2,3),U.mesh=new xl(te.createVertexBuffer(Be,_a.members),te.createIndexBuffer(Ke),u.a0.simpleSegment(0,0,Be.length,Ke.length))}Me.draw(te,Q.TRIANGLES,we,Pe,Oe,Kn.disabled,fe,void 0,"sky",U.mesh.vertexBuffer,U.mesh.indexBuffer,U.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[d[this.currentLayer]],U=g[z.source],te=_[z.source];this._renderTileClippingMasks(z,te),this.renderLayer(this,U,z,te)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const z=this.style._layers[d[this.currentLayer]],U=g[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const te=(z.type==="symbol"?A:T)[z.source];this._renderTileClippingMasks(z,_[z.source]),this.renderLayer(this,U,z,te)}if(this.options.showTileBoundaries){const z=function(U,te){let Q=null;const fe=Object.values(U._layers).flatMap(Me=>Me.source&&!Me.isHidden(te)?[U.sourceCaches[Me.source]]:[]),we=fe.filter(Me=>Me.getSource().type==="vector"),Pe=fe.filter(Me=>Me.getSource().type!=="vector"),Oe=Me=>{(!Q||Q.getSource().maxzoom<Me.getSource().maxzoom)&&(Q=Me)};return we.forEach(Me=>Oe(Me)),Q||Pe.forEach(Me=>Oe(Me)),Q}(this.style,this.transform.zoom);z&&function(U,te,Q){for(let fe=0;fe<Q.length;fe++)zn(U,te,Q[fe])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const U=z.transform.padding;Yo(z,z.transform.height-(U.top||0),3,_s),Yo(z,U.bottom||0,3,Jo),oo(z,U.left||0,3,Aa),oo(z,z.transform.width-(U.right||0),3,wu);const te=z.transform.centerPoint;(function(Q,fe,we,Pe){ws(Q,fe-1,we-10,2,20,Pe),ws(Q,fe-10,we-1,20,2,Pe)})(z,te.x,z.transform.height-te.y,xs)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let g=this.terrainFacilitator.dirty;g||(g=r?!u.a_(l,d):!u.a$(l,d)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(u.b0(l,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,T){const A=_.context,z=A.gl,U=Gn.unblended,te=new bn(z.LEQUAL,bn.ReadWrite,[0,1]),Q=T.getTerrainMesh(),fe=T.sourceCache.getRenderableTiles(),we=_.useProgram("terrainDepth");A.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),A.clear({color:u.aN.transparent,depth:1});for(const Pe of fe){const Oe=T.getTerrainData(Pe.tileID),Me={u_matrix:_.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_ele_delta:T.getMeshFrameDelta(_.transform.zoom)};we.draw(A,z.TRIANGLES,te,Ln.disabled,U,Kn.backCCW,Me,Oe,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,T){const A=_.context,z=A.gl,U=Gn.unblended,te=new bn(z.LEQUAL,bn.ReadWrite,[0,1]),Q=T.getTerrainMesh(),fe=T.getCoordsTexture(),we=T.sourceCache.getRenderableTiles(),Pe=_.useProgram("terrainCoords");A.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),A.clear({color:u.aN.transparent,depth:1}),T.coordsIndex=[];for(const Oe of we){const Me=T.getTerrainData(Oe.tileID);A.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,fe.texture);const Be={u_matrix:_.transform.calculatePosMatrix(Oe.tileID.toUnwrapped()),u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(_.transform.zoom)};Pe.draw(A,z.TRIANGLES,te,Ln.disabled,U,Kn.backCCW,Be,Me,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),T.coordsIndex.push(Oe.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(r,l,d,g){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(g||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(_,T,A,z,U){if(_.renderPass!=="translucent")return;const te=Ln.disabled,Q=_.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(fe,we,Pe,Oe,Me,Be,Ke,je,Je){const nt=we.transform,at=rl(),mt=Me==="map",wt=Be==="map";for(const Dt of fe){const Bt=Oe.getTile(Dt),bt=Bt.getBucket(Pe);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const Tt=u.ah(bt.textSizeData,nt.zoom),Gt=hn(Bt,1,we.transform.zoom),mn=Ii(Dt.posMatrix,wt,mt,we.transform,Gt),At=Pe.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(Tt){const jt=Math.pow(2,nt.zoom-Bt.tileID.overscaledZ),cn=we.style.map.terrain?(xn,Cn)=>we.style.map.terrain.getElevation(Dt,xn,Cn):null,or=at.translatePosition(nt,Bt,Ke,je);Fr(bt,mt,wt,Je,nt,mn,Dt.posMatrix,jt,Tt,At,at,or,Dt.toUnwrapped(),cn)}}}(z,_,A,T,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),U),A.paint.get("icon-opacity").constantOr(1)!==0&&io(_,T,A,z,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),te,Q),A.paint.get("text-opacity").constantOr(1)!==0&&io(_,T,A,z,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),te,Q),T.map.showCollisionBoxes&&(Pa(_,T,A,z,!0),Pa(_,T,A,z,!1))})(r,l,d,g,this.style.placement.variableOffsets);break;case"circle":(function(_,T,A,z){if(_.renderPass!=="translucent")return;const U=A.paint.get("circle-opacity"),te=A.paint.get("circle-stroke-width"),Q=A.paint.get("circle-stroke-opacity"),fe=!A.layout.get("circle-sort-key").isConstant();if(U.constantOr(1)===0&&(te.constantOr(1)===0||Q.constantOr(1)===0))return;const we=_.context,Pe=we.gl,Oe=_.depthModeForSublayer(0,bn.ReadOnly),Me=Ln.disabled,Be=_.colorModeForRenderPass(),Ke=[];for(let je=0;je<z.length;je++){const Je=z[je],nt=T.getTile(Je),at=nt.getBucket(A);if(!at)continue;const mt=at.programConfigurations.get(A.id),wt=_.useProgram("circle",mt),Dt=at.layoutVertexBuffer,Bt=at.indexBuffer,bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Je),Tt={programConfiguration:mt,program:wt,layoutVertexBuffer:Dt,indexBuffer:Bt,uniformValues:wa(_,Je,nt,A),terrainData:bt};if(fe){const Gt=at.segments.get();for(const mn of Gt)Ke.push({segments:new u.a0([mn]),sortKey:mn.sortKey,state:Tt})}else Ke.push({segments:at.segments,sortKey:0,state:Tt})}fe&&Ke.sort((je,Je)=>je.sortKey-Je.sortKey);for(const je of Ke){const{programConfiguration:Je,program:nt,layoutVertexBuffer:at,indexBuffer:mt,uniformValues:wt,terrainData:Dt}=je.state;nt.draw(we,Pe.TRIANGLES,Oe,Me,Be,Kn.disabled,wt,Dt,A.id,at,mt,je.segments,A.paint,_.transform.zoom,Je)}})(r,l,d,g);break;case"heatmap":(function(_,T,A,z){if(A.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const U=_.context,te=U.gl,Q=Ln.disabled,fe=new Gn([te.ONE,te.ONE],u.aN.transparent,[!0,!0,!0,!0]);(function(we,Pe,Oe){const Me=we.gl;we.activeTexture.set(Me.TEXTURE1),we.viewport.set([0,0,Pe.width/4,Pe.height/4]);let Be=Oe.heatmapFbo;if(Be)Me.bindTexture(Me.TEXTURE_2D,Be.colorAttachment.get()),we.bindFramebuffer.set(Be.framebuffer);else{const Ke=Me.createTexture();Me.bindTexture(Me.TEXTURE_2D,Ke),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,Me.LINEAR),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,Me.LINEAR),Be=Oe.heatmapFbo=we.createFramebuffer(Pe.width/4,Pe.height/4,!1,!1),function(je,Je,nt,at){var mt,wt;const Dt=je.gl,Bt=(mt=je.HALF_FLOAT)!==null&&mt!==void 0?mt:Dt.UNSIGNED_BYTE,bt=(wt=je.RGBA16F)!==null&&wt!==void 0?wt:Dt.RGBA;Dt.texImage2D(Dt.TEXTURE_2D,0,bt,Je.width/4,Je.height/4,0,Dt.RGBA,Bt,null),at.colorAttachment.set(nt)}(we,Pe,Ke,Be)}})(U,_,A),U.clear({color:u.aN.transparent});for(let we=0;we<z.length;we++){const Pe=z[we];if(T.hasRenderableParent(Pe))continue;const Oe=T.getTile(Pe),Me=Oe.getBucket(A);if(!Me)continue;const Be=Me.programConfigurations.get(A.id),Ke=_.useProgram("heatmap",Be),{zoom:je}=_.transform;Ke.draw(U,te.TRIANGLES,bn.disabled,Q,fe,Kn.disabled,yi(Pe.posMatrix,Oe,je,A.paint.get("heatmap-intensity")),null,A.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,A.paint,_.transform.zoom,Be)}U.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(U,te){const Q=U.context,fe=Q.gl,we=te.heatmapFbo;if(!we)return;Q.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,we.colorAttachment.get()),Q.activeTexture.set(fe.TEXTURE1);let Pe=te.colorRampTexture;Pe||(Pe=te.colorRampTexture=new H(Q,te.colorRamp,fe.RGBA)),Pe.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),U.useProgram("heatmapTexture").draw(Q,fe.TRIANGLES,bn.disabled,Ln.disabled,U.colorModeForRenderPass(),Kn.disabled,((Oe,Me,Be,Ke)=>{const je=u.H();u.aQ(je,0,Oe.width,Oe.height,0,0,1);const Je=Oe.context.gl;return{u_matrix:je,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Me.paint.get("heatmap-opacity")}})(U,te),null,te.id,U.viewportBuffer,U.quadTriangleIndexBuffer,U.viewportSegments,te.paint,U.transform.zoom)}(_,A))})(r,l,d,g);break;case"line":(function(_,T,A,z){if(_.renderPass!=="translucent")return;const U=A.paint.get("line-opacity"),te=A.paint.get("line-width");if(U.constantOr(1)===0||te.constantOr(1)===0)return;const Q=_.depthModeForSublayer(0,bn.ReadOnly),fe=_.colorModeForRenderPass(),we=A.paint.get("line-dasharray"),Pe=A.paint.get("line-pattern"),Oe=Pe.constantOr(1),Me=A.paint.get("line-gradient"),Be=A.getCrossfadeParameters(),Ke=Oe?"linePattern":we?"lineSDF":Me?"lineGradient":"line",je=_.context,Je=je.gl;let nt=!0;for(const at of z){const mt=T.getTile(at);if(Oe&&!mt.patternsLoaded())continue;const wt=mt.getBucket(A);if(!wt)continue;const Dt=wt.programConfigurations.get(A.id),Bt=_.context.program.get(),bt=_.useProgram(Ke,Dt),Tt=nt||bt.program!==Bt,Gt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(at),mn=Pe.constantOr(null);if(mn&&mt.imageAtlas){const cn=mt.imageAtlas,or=cn.patternPositions[mn.to.toString()],xn=cn.patternPositions[mn.from.toString()];or&&xn&&Dt.setConstantPatternPositions(or,xn)}const At=Gt?at:null,jt=Oe?uc(_,mt,A,Be,At):we?cc(_,mt,A,we,Be,At):Me?Ea(_,mt,A,wt.lineClipsArray.length,At):Sa(_,mt,A,At);if(Oe)je.activeTexture.set(Je.TEXTURE0),mt.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Dt.updatePaintBuffers(Be);else if(we&&(Tt||_.lineAtlas.dirty))je.activeTexture.set(Je.TEXTURE0),_.lineAtlas.bind(je);else if(Me){const cn=wt.gradients[A.id];let or=cn.texture;if(A.gradientVersion!==cn.version){let xn=256;if(A.stepInterpolant){const Cn=T.getSource().maxzoom,sr=at.canonical.z===Cn?Math.ceil(1<<_.transform.maxZoom-at.canonical.z):1;xn=u.ad(u.aV(wt.maxLineLength/u.X*1024*sr),256,je.maxTextureSize)}cn.gradient=u.aW({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:xn,image:cn.gradient||void 0,clips:wt.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new H(je,cn.gradient,Je.RGBA),cn.version=A.gradientVersion,or=cn.texture}je.activeTexture.set(Je.TEXTURE0),or.bind(A.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}bt.draw(je,Je.TRIANGLES,Q,_.stencilModeForClipping(at),fe,Kn.disabled,jt,Gt,A.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,A.paint,_.transform.zoom,Dt,wt.layoutVertexBuffer2),nt=!1}})(r,l,d,g);break;case"fill":(function(_,T,A,z){const U=A.paint.get("fill-color"),te=A.paint.get("fill-opacity");if(te.constantOr(1)===0)return;const Q=_.colorModeForRenderPass(),fe=A.paint.get("fill-pattern"),we=_.opaquePassEnabledForLayer()&&!fe.constantOr(1)&&U.constantOr(u.aN.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===we){const Pe=_.depthModeForSublayer(1,_.renderPass==="opaque"?bn.ReadWrite:bn.ReadOnly);Hs(_,T,A,z,Pe,Q,!1)}if(_.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Pe=_.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,bn.ReadOnly);Hs(_,T,A,z,Pe,Q,!0)}})(r,l,d,g);break;case"fill-extrusion":(function(_,T,A,z){const U=A.paint.get("fill-extrusion-opacity");if(U!==0&&_.renderPass==="translucent"){const te=new bn(_.context.gl.LEQUAL,bn.ReadWrite,_.depthRangeFor3D);if(U!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))vs(_,T,A,z,te,Ln.disabled,Gn.disabled),vs(_,T,A,z,te,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const Q=_.colorModeForRenderPass();vs(_,T,A,z,te,Ln.disabled,Q)}}})(r,l,d,g);break;case"hillshade":(function(_,T,A,z){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const U=_.context,te=_.depthModeForSublayer(0,bn.ReadOnly),Q=_.colorModeForRenderPass(),[fe,we]=_.renderPass==="translucent"?_.stencilConfigForOverlap(z):[{},z];for(const Pe of we){const Oe=T.getTile(Pe);Oe.needsHillshadePrepare!==void 0&&Oe.needsHillshadePrepare&&_.renderPass==="offscreen"?Ai(_,Oe,A,te,Ln.disabled,Q):_.renderPass==="translucent"&&xi(_,Pe,Oe,A,te,fe[Pe.overscaledZ],Q)}U.viewport.set([0,0,_.width,_.height])})(r,l,d,g);break;case"raster":(function(_,T,A,z){if(_.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!z.length)return;const U=_.context,te=U.gl,Q=T.getSource(),fe=_.useProgram("raster"),we=_.colorModeForRenderPass(),[Pe,Oe]=Q instanceof ye?[{},z]:_.stencilConfigForOverlap(z),Me=Oe[Oe.length-1].overscaledZ,Be=!_.options.moving;for(const Ke of Oe){const je=_.depthModeForSublayer(Ke.overscaledZ-Me,A.paint.get("raster-opacity")===1?bn.ReadWrite:bn.ReadOnly,te.LESS),Je=T.getTile(Ke);Je.registerFadeDuration(A.paint.get("raster-fade-duration"));const nt=T.findLoadedParent(Ke,0),at=T.findLoadedSibling(Ke),mt=Ia(Je,nt||at||null,T,A,_.transform,_.style.map.terrain);let wt,Dt;const Bt=A.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;U.activeTexture.set(te.TEXTURE0),Je.texture.bind(Bt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),U.activeTexture.set(te.TEXTURE1),nt?(nt.texture.bind(Bt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,nt.tileID.overscaledZ-Je.tileID.overscaledZ),Dt=[Je.tileID.canonical.x*wt%1,Je.tileID.canonical.y*wt%1]):Je.texture.bind(Bt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);const bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ke),Tt=bt?Ke:null,Gt=Tt?Tt.posMatrix:_.transform.calculatePosMatrix(Ke.toUnwrapped(),Be),mn=Zh(Gt,Dt||[0,0],wt||1,mt,A);Q instanceof ye?fe.draw(U,te.TRIANGLES,je,Ln.disabled,we,Kn.disabled,mn,bt,A.id,Q.boundsBuffer,_.quadTriangleIndexBuffer,Q.boundsSegments):fe.draw(U,te.TRIANGLES,je,Pe[Ke.overscaledZ],we,Kn.disabled,mn,bt,A.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,l,d,g);break;case"background":(function(_,T,A,z){const U=A.paint.get("background-color"),te=A.paint.get("background-opacity");if(te===0)return;const Q=_.context,fe=Q.gl,we=_.transform,Pe=we.tileSize,Oe=A.paint.get("background-pattern");if(_.isPatternMissing(Oe))return;const Me=!Oe&&U.a===1&&te===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Me)return;const Be=Ln.disabled,Ke=_.depthModeForSublayer(0,Me==="opaque"?bn.ReadWrite:bn.ReadOnly),je=_.colorModeForRenderPass(),Je=_.useProgram(Oe?"backgroundPattern":"background"),nt=z||we.coveringTiles({tileSize:Pe,terrain:_.style.map.terrain});Oe&&(Q.activeTexture.set(fe.TEXTURE0),_.imageManager.bind(_.context));const at=A.getCrossfadeParameters();for(const mt of nt){const wt=z?mt.posMatrix:_.transform.calculatePosMatrix(mt.toUnwrapped()),Dt=Oe?dl(wt,te,_,Oe,{tileID:mt,tileSize:Pe},at):hl(wt,te,U),Bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(mt);Je.draw(Q,fe.TRIANGLES,Ke,Be,je,Kn.disabled,Dt,Bt,A.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,d,g);break;case"custom":(function(_,T,A){const z=_.context,U=A.implementation;if(_.renderPass==="offscreen"){const te=U.prerender;te&&(_.setCustomLayerDefaults(),z.setColorMode(_.colorModeForRenderPass()),te.call(U,z.gl,_.transform.customLayerMatrix()),z.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),z.setColorMode(_.colorModeForRenderPass()),z.setStencilMode(Ln.disabled);const te=U.renderingMode==="3d"?new bn(_.context.gl.LEQUAL,bn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,bn.ReadOnly);z.setDepthMode(te),U.render(z.gl,_.transform.customLayerMatrix()),z.setDirty(),_.setBaseState(),z.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,l,d,g,_){if(!d[0]&&!d[1])return r;const T=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(T){const U=Math.sin(T),te=Math.cos(T);d=[d[0]*te-d[1]*U,d[0]*U+d[1]*te]}const A=[_?d[0]:hn(l,d[0],this.transform.zoom),_?d[1]:hn(l,d[1],this.transform.zoom),0],z=new Float32Array(16);return u.J(z,r,A),z}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!l||!d}useProgram(r,l){this.cache=this.cache||{};const d=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new sl(this.context,Ko[r],l,fl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new H(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class Qo{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,d){const g=Math.pow(2,d),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const z=1/(A=u.ag([],A,r))[3]/l*g;return u.b1(A,A,[z,z,1/A[3],z])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const z=function(fe,we){var Pe=we[0],Oe=we[1],Me=we[2],Be=Pe*Pe+Oe*Oe+Me*Me;return Be>0&&(Be=1/Math.sqrt(Be)),fe[0]=we[0]*Be,fe[1]=we[1]*Be,fe[2]=we[2]*Be,fe}([],function(fe,we,Pe){var Oe=we[0],Me=we[1],Be=we[2],Ke=Pe[0],je=Pe[1],Je=Pe[2];return fe[0]=Me*Je-Be*je,fe[1]=Be*Ke-Oe*Je,fe[2]=Oe*je-Me*Ke,fe}([],E([],_[A[0]],_[A[1]]),E([],_[A[2]],_[A[1]]))),U=-((te=z)[0]*(Q=_[A[1]])[0]+te[1]*Q[1]+te[2]*Q[2]);var te,Q;return z.concat(U)});return new Qo(_,T)}}class Ma{constructor(r,l){this.min=r,this.max=l,this.center=function(d,g,_){return d[0]=.5*g[0],d[1]=.5*g[1],d[2]=.5*g[2],d}([],function(d,g,_){return d[0]=g[0]+_[0],d[1]=g[1]+_[1],d[2]=g[2]+_[2],d}([],this.min,this.max))}quadrant(r){const l=[r%2==0,r<2],d=K(this.min),g=K(this.max);for(let _=0;_<l.length;_++)d[_]=l[_]?this.min[_]:this.center[_],g[_]=l[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Ma(d,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let g=0;g<r.planes.length;g++){const _=r.planes[g];let T=0;for(let A=0;A<l.length;A++)u.b2(_,l[A])>=0&&T++;if(T===0)return 0;T!==l.length&&(d=!1)}if(d)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let A=0;A<r.points.length;A++){const z=r.points[A][g]-this.min[g];_=Math.min(_,z),T=Math.max(T,z)}if(T<0||_>this.max[g]-this.min[g])return 0}return 1}}class Z{constructor(r=0,l=0,d=0,g=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=d,this.right=g}interpolate(r,l,d){return l.top!=null&&r.top!=null&&(this.top=u.z.number(r.top,l.top,d)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.z.number(r.bottom,l.bottom,d)),l.left!=null&&r.left!=null&&(this.left=u.z.number(r.left,l.left,d)),l.right!=null&&r.right!=null&&(this.right=u.z.number(r.right,l.right,d)),this}getCenter(r,l){const d=u.ad((this.left+r-this.right)/2,0,r),g=u.ad((this.top+l-this.bottom)/2,0,l);return new u.P(d,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Z(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ge=85.051129;class $e{constructor(r,l,d,g,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Z,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new $e(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-u.b3(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var d=new u.A(4);return u.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,g,_){var T=g[0],A=g[1],z=g[2],U=g[3],te=Math.sin(_),Q=Math.cos(_);d[0]=T*Q+z*te,d[1]=A*Q+U*te,d[2]=T*-te+z*Q,d[3]=A*-te+U*Q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=u.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,d){this._unmodified=!1,this._edgeInsets.interpolate(r,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new u.b4(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new u.P(0,0)),g=this.pointCoordinate(new u.P(this.width,0)),_=this.pointCoordinate(new u.P(this.width,this.height)),T=this.pointCoordinate(new u.P(0,this.height)),A=Math.floor(Math.min(d.x,g.x,_.x,T.x)),z=Math.floor(Math.max(d.x,g.x,_.x,T.x)),U=1;for(let te=A-U;te<=z+U;te++)te!==0&&l.push(new u.b4(te,r))}return l}coveringTiles(r){var l,d;let g=this.coveringZoomLevel(r);const _=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),A=u.Z.fromLngLat(this.center),z=Math.pow(2,g),U=[z*T.x,z*T.y,0],te=[z*A.x,z*A.y,0],Q=Qo.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,g);let fe=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(fe=g);const we=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Pe=je=>({aabb:new Ma([je*z,0,0],[(je+1)*z,z,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),Oe=[],Me=[],Be=g,Ke=r.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let je=1;je<=3;je++)Oe.push(Pe(-je)),Oe.push(Pe(je));for(Oe.push(Pe(0));Oe.length>0;){const je=Oe.pop(),Je=je.x,nt=je.y;let at=je.fullyVisible;if(!at){const bt=je.aabb.intersects(Q);if(bt===0)continue;at=bt===2}const mt=r.terrain?U:te,wt=je.aabb.distanceX(mt),Dt=je.aabb.distanceY(mt),Bt=Math.max(Math.abs(wt),Math.abs(Dt));if(je.zoom===Be||Bt>we+(1<<Be-je.zoom)-2&&je.zoom>=fe){const bt=Be-je.zoom,Tt=U[0]-.5-(Je<<bt),Gt=U[1]-.5-(nt<<bt);Me.push({tileID:new u.S(je.zoom===Be?Ke:je.zoom,je.wrap,je.zoom,Je,nt),distanceSq:O([te[0]-.5-Je,te[1]-.5-nt]),tileDistanceToCamera:Math.sqrt(Tt*Tt+Gt*Gt)})}else for(let bt=0;bt<4;bt++){const Tt=(Je<<1)+bt%2,Gt=(nt<<1)+(bt>>1),mn=je.zoom+1;let At=je.aabb.quadrant(bt);if(r.terrain){const jt=new u.S(mn,je.wrap,mn,Tt,Gt),cn=r.terrain.getMinMaxElevation(jt),or=(l=cn.minElevation)!==null&&l!==void 0?l:this.elevation,xn=(d=cn.maxElevation)!==null&&d!==void 0?d:this.elevation;At=new Ma([At.min[0],At.min[1],or],[At.max[0],At.max[1],xn])}Oe.push({aabb:At,zoom:mn,x:Tt,y:Gt,wrap:je.wrap,fullyVisible:at})}}return Me.sort((je,Je)=>je.distanceSq-Je.distanceSq).map(je=>je.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=u.ad(r.lat,-85.051129,ge);return new u.P(u.O(r.lng)*this.worldSize,u.Q(l)*this.worldSize)}unproject(r){return new u.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,r),_=r.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-_))return;const T=d+l-_,A=Math.cos(this._pitch)*this.cameraToCenterDistance/T/u.b5(1,g.lat),z=this.scaleZoom(A/this.tileSize);this._elevation=_,this._center=g,this.zoom=z}setLocationAtPoint(r,l){const d=this.pointCoordinate(l),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),T=new u.Z(_.x-(d.x-g.x),_.y-(d.y-g.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return u.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const fe=l.pointCoordinate(r);if(fe!=null)return fe}const d=[r.x,r.y,0,1],g=[r.x,r.y,1,1];u.ag(d,d,this.pixelMatrixInverse),u.ag(g,g,this.pixelMatrixInverse);const _=d[3],T=g[3],A=d[1]/_,z=g[1]/T,U=d[2]/_,te=g[2]/T,Q=U===te?0:(0-U)/(te-U);return new u.Z(u.z.number(d[0]/_,g[0]/T,Q)/this.worldSize,u.z.number(A,z,Q)/this.worldSize)}coordinatePoint(r,l=0,d=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,l,1];return u.ag(g,g,d),new u.P(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new et().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new et([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,ge])}calculateTileMatrix(r){const l=r.canonical,d=this.worldSize/this.zoomScale(l.z),g=l.x+Math.pow(2,l.z)*r.wrap,_=u.ao(new Float64Array(16));return u.J(_,_,[g*d,l.y*d,0]),u.K(_,_,[d/u.X,d/u.X,1]),_}calculatePosMatrix(r,l=!1){const d=r.key,g=l?this._alignedPosMatrixCache:this._posMatrixCache;if(g[d])return g[d];const _=this.calculateTileMatrix(r);return u.L(_,l?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,_),g[d]=new Float32Array(_),g[d]}calculateFogMatrix(r){const l=r.key,d=this._fogMatrixCache;if(d[l])return d[l];const g=this.calculateTileMatrix(r);return u.L(g,this.fogMatrix,g),d[l]=new Float32Array(g),d[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,l){l=u.ad(+l,this.minZoom,this.maxZoom);const d={center:new u.N(r.lng,r.lat),zoom:l};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const je=179.9999999999;g=[-je,je]}const _=this.tileSize*this.zoomScale(d.zoom);let T=0,A=_,z=0,U=_,te=0,Q=0;const{x:fe,y:we}=this.size;if(this.latRange){const je=this.latRange;T=u.Q(je[1])*_,A=u.Q(je[0])*_,A-T<we&&(te=we/(A-T))}g&&(z=u.b3(u.O(g[0])*_,0,_),U=u.b3(u.O(g[1])*_,0,_),U<z&&(U+=_),U-z<fe&&(Q=fe/(U-z)));const{x:Pe,y:Oe}=this.project.call({worldSize:_},r);let Me,Be;const Ke=Math.max(Q||0,te||0);if(Ke){const je=new u.P(Q?(U+z)/2:Pe,te?(A+T)/2:Oe);return d.center=this.unproject.call({worldSize:_},je).wrap(),d.zoom+=this.scaleZoom(Ke),d}if(this.latRange){const je=we/2;Oe-je<T&&(Be=T+je),Oe+je>A&&(Be=A-je)}if(g){const je=(z+U)/2;let Je=Pe;this._renderWorldCopies&&(Je=u.b3(Pe,je-_/2,je+_/2));const nt=fe/2;Je-nt<z&&(Me=z+nt),Je+nt>U&&(Me=U-nt)}if(Me!==void 0||Be!==void 0){const je=new u.P(Me??Pe,Be??Oe);d.center=this.unproject.call({worldSize:_},je).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:l,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=d,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let g=u.ao(new Float64Array(16));u.K(g,g,[this.width/2,-this.height/2,1]),u.J(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.ao(new Float64Array(16)),u.K(g,g,[1,-1,1]),u.J(g,g,[-1,-1,0]),u.K(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this.minElevationForCurrentTile),A=_-T*this._pixelPerMeter/Math.cos(this._pitch),z=T<0?A:_,U=Math.PI/2+this._pitch,te=this._fov*(.5+r.y/this.height),Q=Math.sin(te)*z/Math.sin(u.ad(Math.PI-U-te,.01,Math.PI-.01)),fe=this.getHorizon(),we=2*Math.atan(fe/this.cameraToCenterDistance)*(.5+r.y/(2*fe)),Pe=Math.sin(we)*z/Math.sin(u.ad(Math.PI-U-we,.01,Math.PI-.01)),Oe=Math.min(Q,Pe),Me=1.01*(Math.cos(Math.PI/2-this._pitch)*Oe+z),Be=this.height/50;g=new Float64Array(16),u.b6(g,this._fov,this.width/this.height,Be,Me),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,u.K(g,g,[1,-1,1]),u.J(g,g,[0,0,-this.cameraToCenterDistance]),u.b7(g,g,this._pitch),u.ae(g,g,this.angle),u.J(g,g,[-l,-d,0]),this.mercatorMatrix=u.K([],g,[this.worldSize,this.worldSize,this.worldSize]),u.K(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,g),u.J(g,g,[0,0,-this.elevation]),this.modelViewProjectionMatrix=g,this.invModelViewProjectionMatrix=u.at([],g),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,_,Me),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ae(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-l,-d,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,g);const Ke=this.width%2/2,je=this.height%2/2,Je=Math.cos(this.angle),nt=Math.sin(this.angle),at=l-Math.round(l)+Je*Ke+nt*je,mt=d-Math.round(d)+Je*je+nt*Ke,wt=new Float64Array(g);if(u.J(wt,wt,[at>.5?at-1:at,mt>.5?mt-1:mt,0]),this.alignedModelViewProjectionMatrix=wt,g=u.at(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.ag(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let d=l.x,g=l.y,_=l.x,T=l.y;for(const A of r)d=Math.min(d,A.x),g=Math.min(g,A.y),_=Math.max(_,A.x),T=Math.max(T,A.y);return[new u.P(d,g),new u.P(_,g),new u.P(_,T),new u.P(d,T),new u.P(d,g)]}}lngLatToCameraDepth(r,l){const d=this.locationCoordinate(r),g=[d.x*this.worldSize,d.y*this.worldSize,l,1];return u.ag(g,g,this.modelViewProjectionMatrix),g[2]/g[3]}}function ut(v,r){let l,d=!1,g=null,_=null;const T=()=>{g=null,d&&(v.apply(_,l),g=setTimeout(T,r),d=!1)};return(...A)=>(d=!0,_=this,l=A,g||T(),g)}class kt{constructor(r){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}},this._updateHash=ut(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,g=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),T=Math.round(l.lng*_)/_,A=Math.round(l.lat*_)/_,z=this._map.getBearing(),U=this._map.getPitch();let te="";if(te+=r?`/${T}/${A}/${d}`:`${d}/${A}/${T}`,(z||U)&&(te+="/"+Math.round(10*z)/10),U&&(te+=`/${Math.round(U)}`),this._hashName){const Q=this._hashName;let fe=!1;const we=window.location.hash.slice(1).split("&").map(Pe=>{const Oe=Pe.split("=")[0];return Oe===Q?(fe=!0,`${Oe}=${te}`):Pe}).filter(Pe=>Pe);return fe||we.push(`${Q}=${te}`),`#${we.join("&")}`}return`#${te}`}}const St={linearity:.3,easing:u.b8(0,0,.3,1)},Ht=u.e({deceleration:2500,maxSpeed:1400},St),Jt=u.e({deceleration:20,maxSpeed:1400},St),vn=u.e({deceleration:1e3,maxSpeed:360},St),Dn=u.e({deceleration:1e3,maxSpeed:90},St);class Fn{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=b.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)l.zoom+=_.zoomDelta||0,l.bearing+=_.bearingDelta||0,l.pitch+=_.pitchDelta||0,_.panDelta&&l.pan._add(_.panDelta),_.around&&(l.around=_.around),_.pinchAround&&(l.pinchAround=_.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const _=rr(l.pan.mag(),d,u.e({},Ht,r||{}));g.offset=l.pan.mult(_.amount/l.pan.mag()),g.center=this._map.transform.center,Zn(g,_)}if(l.zoom){const _=rr(l.zoom,d,Jt);g.zoom=this._map.transform.zoom+_.amount,Zn(g,_)}if(l.bearing){const _=rr(l.bearing,d,vn);g.bearing=this._map.transform.bearing+u.ad(_.amount,-179,179),Zn(g,_)}if(l.pitch){const _=rr(l.pitch,d,Dn);g.pitch=this._map.transform.pitch+_.amount,Zn(g,_)}if(g.zoom||g.bearing){const _=l.pinchAround===void 0?l.around:l.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),u.e(g,{noMoveStart:!0})}}function Zn(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function rr(v,r,l){const{maxSpeed:d,linearity:g,deceleration:_}=l,T=u.ad(v*g/(r/1e3),-d,d),A=Math.abs(T)/(_*g);return{easing:l.easing,duration:1e3*A,amount:T*(A/2)}}class Un extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d,g={}){const _=C.mousePos(l.getCanvas(),d),T=l.unproject(_);super(r,u.e({point:_,lngLat:T,originalEvent:d},g)),this._defaultPrevented=!1,this.target=l}}class fr extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){const g=r==="touchend"?d.changedTouches:d.touches,_=C.touchPos(l.getCanvasContainer(),g),T=_.map(z=>l.unproject(z)),A=_.reduce((z,U,te,Q)=>z.add(U.div(Q.length)),new u.P(0,0));super(r,{points:_,point:A,lngLats:T,lngLat:l.unproject(A),originalEvent:d}),this._defaultPrevented=!1}}class so extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Mi{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new so(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new Un(r.type,this._map,r))}mouseup(r){this._map.fire(new Un(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new Un(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Un(r.type,this._map,r))}mouseover(r){this._map.fire(new Un(r.type,this._map,r))}mouseout(r){this._map.fire(new Un(r.type,this._map,r))}touchstart(r){return this._firePreventable(new fr(r.type,this._map,r))}touchmove(r){this._map.fire(new fr(r.type,this._map,r))}touchend(r){this._map.fire(new fr(r.type,this._map,r))}touchcancel(r){this._map.fire(new fr(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bo{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Un(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Un("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Un(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bs{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Ks{constructor(r,l){this._map=r,this._tr=new bs(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(C.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=d,this._box||(this._box=C.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(g.x,d.x),T=Math.max(g.x,d.x),A=Math.min(g.y,d.y),z=Math.max(g.y,d.y);C.setTransform(this._box,`translate(${_}px,${A}px)`),this._box.style.width=T-_+"px",this._box.style.height=z-A+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const d=this._startPos,g=l;if(this.reset(),C.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(d,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new u.k(r,{originalEvent:l}))}}function So(v,r){if(v.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${r.length}`);const l={};for(let d=0;d<v.length;d++)l[v[d].identifier]=r[d];return l}class Qh{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(g){const _=new u.P(0,0);for(const T of g)_._add(T);return _.div(g.length)}(l),this.touches=So(d,l)))}touchmove(r,l,d){if(this.aborted||!this.centroid)return;const g=So(d,l);for(const _ in this.touches){const T=g[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,l,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class ed{constructor(r){this.singleTap=new Qh(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,d){this.singleTap.touchstart(r,l,d)}touchmove(r,l,d){this.singleTap.touchmove(r,l,d)}touchend(r,l,d){const g=this.singleTap.touchend(r,l,d);if(g){const _=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(_&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class hp{constructor(r){this._tr=new bs(r),this._zoomIn=new ed({numTouches:1,numTaps:2}),this._zoomOut=new ed({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,d){this._zoomIn.touchstart(r,l,d),this._zoomOut.touchstart(r,l,d)}touchmove(r,l,d){this._zoomIn.touchmove(r,l,d),this._zoomOut.touchmove(r,l,d)}touchend(r,l,d){const g=this._zoomIn.touchend(r,l,d),_=this._zoomOut.touchend(r,l,d),T=this._tr;return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(g)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ir{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const g=l.length?l[0]:l;return!this._moved&&g.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(d,g))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&C.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ka={0:1,2:2};class ki{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const l=C.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,d){const g=ka[d];return l.buttons===void 0||(l.buttons&g)!==g}(r,this._eventButton)}isValidEndEvent(r){return C.mouseButton(r)===this._eventButton}}class Ec{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Su=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=r=>{r.preventDefault()}},td=({enable:v,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{const d=new ki({checkCorrectEvent:g=>C.mouseButton(g)===0&&g.ctrlKey||C.mouseButton(g)===2});return new ir({clickTolerance:r,move:(g,_)=>({bearingDelta:(_.x-g.x)*l}),moveStateManager:d,enable:v,assignEvents:Su})},za=({enable:v,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{const d=new ki({checkCorrectEvent:g=>C.mouseButton(g)===0&&g.ctrlKey||C.mouseButton(g)===2});return new ir({clickTolerance:r,move:(g,_)=>({pitchDelta:(_.y-g.y)*l}),moveStateManager:d,enable:v,assignEvents:Su})};class Eu{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(r,l,d){return this._calculateTransform(r,l,d)}touchmove(r,l,d){if(this._active&&!(d.length<this.minTouchs()))return r.preventDefault(),this._calculateTransform(r,l,d)}touchend(r,l,d){this._calculateTransform(r,l,d),this._active&&d.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,d){d.length>0&&(this._active=!0);const g=So(d,l),_=new u.P(0,0),T=new u.P(0,0);let A=0;for(const U in g){const te=g[U],Q=this._touches[U];Q&&(_._add(te),T._add(te.sub(Q)),A++,g[U]=te)}if(this._touches=g,A<this.minTouchs()||!T.mag())return;const z=T.div(A);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(A),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,d){if(!this._firstTwoTouches)return;r.preventDefault();const[g,_]=this._firstTwoTouches,T=Cu(d,l,g),A=Cu(d,l,_);if(!T||!A)return;const z=this._aroundCenter?null:T.add(A).div(2);return this._move([T,A],z,r)}touchend(r,l,d){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,T=Cu(d,l,g),A=Cu(d,l,_);T&&A||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Cu(v,r,l){for(let d=0;d<v.length;d++)if(v[d].identifier===l)return r[d]}function nd(v,r){return Math.log(v/r)/Math.LN2}class rd extends Tu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(nd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:nd(this._distance,d),pinchAround:l}}}function id(v,r){return 180*v.angleWith(r)/Math.PI}class od extends Tu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,d){const g=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:id(this._vector,g),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,d=id(r,this._startVector);return Math.abs(d)<l}}function Ss(v){return Math.abs(v.y)>Math.abs(v.x)}class sd extends Tu{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,d){super.touchstart(r,l,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Ss(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,d){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,_=l.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const T=r.y>0==l.y>0;return Ss(r)&&Ss(l)&&T}}const dp={panStep:100,bearingStep:15,pitchStep:10};class ad{constructor(r){this._tr=new bs(r);const l=dp;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,d=0,g=0,_=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:A=>{const z=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:fp,zoom:l?Math.round(z.zoom)+l*(r.shiftKey?2:1):z.zoom,bearing:z.bearing+d*this._bearingStep,pitch:z.pitch+g*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:z.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fp(v){return v*(2-v)}const ld=4.000244140625;class ud{constructor(r,l){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new bs(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!r[this._map.cooperativeGestures._bypassKey])return;let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=b.now(),g=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%ld==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=C.mousePos(this._map.getCanvas(),r),d=this._tr;this._around=l.y>d.transform.height/2-d.transform.getHorizon()?u.N.convert(this._aroundCenter?d.center:d.unproject(l)):u.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>ld?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&z!==0&&(z=1/z);const U=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(U*z))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,g=this._easing;let _,T=!1;if(this._type==="wheel"&&d&&g){const A=Math.min((b.now()-this._lastWheelEventTime)/200,1),z=g(A);_=u.z.number(d,l,z),A<1?this._frameId||(this._frameId=!0):T=!0}else _=l,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=u.b9;if(this._prevEase){const d=this._prevEase,g=(b.now()-d.start)/d.duration,_=d.easing(g+.01)-d.easing(g),T=.27/Math.sqrt(_*_+1e-4)*.01,A=Math.sqrt(.0729-T*T);l=u.b8(T,A,.25,1)}return this._prevEase={start:b.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class cd{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Pu{constructor(r){this._tr=new bs(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pp{constructor(){this._tap=new ed({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,d){if(!this._swipePoint)if(this._tapTime){const g=l[0],_=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(g)<30;_&&T?d.length>0&&(this._swipePoint=g,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,l,d)}touchmove(r,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const g=l[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,l,d)}touchend(r,l,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const g=this._tap.touchend(r,l,d);g&&(this._tapTime=r.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ao{constructor(r,l,d){this._el=r,this._mousePan=l,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Eo{constructor(r,l,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hd{constructor(r,l,d,g){this._el=r,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class To{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=C.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=l,this._container.appendChild(g);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=d,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(C.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(r){this._onCooperativeGesture(r.touches.length===1)}wheel(r){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!r[this._bypassKey])}_onCooperativeGesture(r){this._enabled&&r&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Es=v=>v.zoom||v.drag||v.pitch||v.rotate;class vy extends u.k{}function dd(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class _y{constructor(r,l){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=g.type==="renderFrame"?void 0:g,A={needsRenderFrame:!1},z={},U={},te=g.touches,Q=te?this._getMapTouches(te):void 0,fe=Q?C.touchPos(this._map.getCanvas(),Q):C.mousePos(this._map.getCanvas(),g);for(const{handlerName:Oe,handler:Me,allowed:Be}of this._handlers){if(!Me.isEnabled())continue;let Ke;this._blockedByActive(U,Be,Oe)?Me.reset():Me[_||g.type]&&(Ke=Me[_||g.type](g,fe,Q),this.mergeHandlerResult(A,z,Ke,Oe,T),Ke&&Ke.needsRenderFrame&&this._triggerRenderFrame()),(Ke||Me.isActive())&&(U[Oe]=Me)}const we={};for(const Oe in this._previousActiveHandlers)U[Oe]||(we[Oe]=T);this._previousActiveHandlers=U,(Object.keys(we).length||dd(A))&&(this._changes.push([A,z,we]),this._triggerRenderFrame()),(Object.keys(U).length||dd(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=A;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fn(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,T]of this._listeners)C.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,l,d]of this._listeners)C.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new Mi(l,r));const g=l.boxZoom=new Ks(l,r);this._add("boxZoom",g),r.interactive&&r.boxZoom&&g.enable();const _=l.cooperativeGestures=new To(l,r.cooperativeGestures);this._add("cooperativeGestures",_),r.cooperativeGestures&&_.enable();const T=new hp(l),A=new Pu(l);l.doubleClickZoom=new cd(A,T),this._add("tapZoom",T),this._add("clickZoom",A),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();const z=new pp;this._add("tapDragZoom",z);const U=l.touchPitch=new sd(l);this._add("touchPitch",U),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);const te=td(r),Q=za(r);l.dragRotate=new Eo(r,te,Q),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();const fe=(({enable:Ke,clickTolerance:je})=>{const Je=new ki({checkCorrectEvent:nt=>C.mouseButton(nt)===0&&!nt.ctrlKey});return new ir({clickTolerance:je,move:(nt,at)=>({around:at,panDelta:at.sub(nt)}),activateOnStart:!0,moveStateManager:Je,enable:Ke,assignEvents:Su})})(r),we=new Eu(r,l);l.dragPan=new ao(d,fe,we),this._add("mousePan",fe),this._add("touchPan",we,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);const Pe=new od,Oe=new rd;l.touchZoomRotate=new hd(d,Oe,Pe,z),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Oe,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);const Me=l.scrollZoom=new ud(l,()=>this._triggerRenderFrame());this._add("scrollZoom",Me,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);const Be=l.keyboard=new ad(l);this._add("keyboard",Be),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new bo(l))}_add(r,l,d){this._handlers.push({handlerName:r,handler:l,allowed:d}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Es(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,d){for(const g in r)if(g!==d&&(!l||l.indexOf(g)<0))return!0;return!1}_getMapTouches(r){const l=[];for(const d of r)this._el.contains(d.target)&&l.push(d);return l}mergeHandlerResult(r,l,d,g,_){if(!d)return;u.e(r,d);const T={handlerName:g,originalEvent:d.originalEvent||_};d.zoomDelta!==void 0&&(l.zoom=T),d.panDelta!==void 0&&(l.drag=T),d.pitchDelta!==void 0&&(l.pitch=T),d.bearingDelta!==void 0&&(l.rotate=T)}_applyChanges(){const r={},l={},d={};for(const[g,_,T]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),u.e(l,_),u.e(d,T);this._updateMapTransform(r,l,d),this._changes=[]}_updateMapTransform(r,l,d){const g=this._map,_=g._getTransformForUpdate(),T=g.terrain;if(!(dd(r)||T&&this._terrainMovement))return this._fireEvents(l,d,!0);let{panDelta:A,zoomDelta:z,bearingDelta:U,pitchDelta:te,around:Q,pinchAround:fe}=r;fe!==void 0&&(Q=fe),g._stop(!0),Q=Q||g.transform.centerPoint;const we=_.pointLocation(A?Q.sub(A):Q);U&&(_.bearing+=U),te&&(_.pitch+=te),z&&(_.zoom+=z),T?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(A)):_.setLocationAtPoint(we,Q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(we,Q)):_.setLocationAtPoint(we,Q),g._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,d,!0)}_fireEvents(r,l,d){const g=Es(this._eventsInProgress),_=Es(r),T={};for(const Q in r){const{originalEvent:fe}=r[Q];this._eventsInProgress[Q]||(T[`${Q}start`]=fe),this._eventsInProgress[Q]=r[Q]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const Q in T)this._fireEvent(Q,T[Q]);_&&this._fireEvent("move",_.originalEvent);for(const Q in r){const{originalEvent:fe}=r[Q];this._fireEvent(Q,fe)}const A={};let z;for(const Q in this._eventsInProgress){const{handlerName:fe,originalEvent:we}=this._eventsInProgress[Q];this._handlersById[fe].isActive()||(delete this._eventsInProgress[Q],z=l[fe]||we,A[`${Q}end`]=z)}for(const Q in A)this._fireEvent(Q,A[Q]);const U=Es(this._eventsInProgress),te=(g||_)&&!U;if(te&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),d&&te){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),fe=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;!Q||!Q.essential&&b.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:z})),fe(this._map.getBearing())&&this._map.resetNorth()):(fe(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new u.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new vy("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class xy extends u.E{constructor(r,l){super(),this._renderFrameCallback=()=>{const d=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,d){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},l),d)}panTo(r,l,d){return this.easeTo(u.e({center:r},l),d)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,d){return this.easeTo(u.e({zoom:r},l),d)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,d){return this.easeTo(u.e({bearing:r},l),d)}resetNorth(r,l){return this.rotateTo(0,u.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=et.convert(r);const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,l)}_cameraForBoxAndBearing(r,l,d,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=u.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const bt=g.padding;g.padding={top:bt,bottom:bt,right:bt,left:bt}}g.padding=u.e(_,g.padding);const T=this.transform,A=T.padding,z=new et(r,l),U=T.project(z.getNorthWest()),te=T.project(z.getNorthEast()),Q=T.project(z.getSouthEast()),fe=T.project(z.getSouthWest()),we=u.ba(-d),Pe=U.rotate(we),Oe=te.rotate(we),Me=Q.rotate(we),Be=fe.rotate(we),Ke=new u.P(Math.max(Pe.x,Oe.x,Be.x,Me.x),Math.max(Pe.y,Oe.y,Be.y,Me.y)),je=new u.P(Math.min(Pe.x,Oe.x,Be.x,Me.x),Math.min(Pe.y,Oe.y,Be.y,Me.y)),Je=Ke.sub(je),nt=(T.width-(A.left+A.right+g.padding.left+g.padding.right))/Je.x,at=(T.height-(A.top+A.bottom+g.padding.top+g.padding.bottom))/Je.y;if(at<0||nt<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(T.scaleZoom(T.scale*Math.min(nt,at)),g.maxZoom),wt=u.P.convert(g.offset),Dt=new u.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(u.ba(d)),Bt=wt.add(Dt).mult(T.scale/T.zoomScale(mt));return{center:T.unproject(U.add(Q).div(2).sub(Bt)),zoom:mt,bearing:d}}fitBounds(r,l,d){return this._fitInternal(this.cameraForBounds(r,l),l,d)}fitScreenCoordinates(r,l,d,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(l)),d,g),g,_)}_fitInternal(r,l,d){return r?(delete(l=u.e(r,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(r,l){this.stop();const d=this._getTransformForUpdate();let g=!1,_=!1,T=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(g=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=u.N.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(_=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(T=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new u.k("movestart",l)).fire(new u.k("move",l)),g&&this.fire(new u.k("zoomstart",l)).fire(new u.k("zoom",l)).fire(new u.k("zoomend",l)),_&&this.fire(new u.k("rotatestart",l)).fire(new u.k("rotate",l)).fire(new u.k("rotateend",l)),T&&this.fire(new u.k("pitchstart",l)).fire(new u.k("pitch",l)).fire(new u.k("pitchend",l)),this.fire(new u.k("moveend",l))}calculateCameraOptionsFromTo(r,l,d,g=0){const _=u.Z.fromLngLat(r,l),T=u.Z.fromLngLat(d,g),A=T.x-_.x,z=T.y-_.y,U=T.z-_.z,te=Math.hypot(A,z,U);if(te===0)throw new Error("Can't calculate camera options with same From and To");const Q=Math.hypot(A,z),fe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/te/this.transform.tileSize),we=180*Math.atan2(A,-z)/Math.PI;let Pe=180*Math.acos(Q/te)/Math.PI;return Pe=U<0?90-Pe:90+Pe,{center:T.toLngLat(),zoom:fe,pitch:Pe,bearing:we}}easeTo(r,l){var d;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b9},r)).animate===!1||!r.essential&&b.prefersReducedMotion)&&(r.duration=0);const g=this._getTransformForUpdate(),_=this.getZoom(),T=this.getBearing(),A=this.getPitch(),z=this.getPadding(),U="bearing"in r?this._normalizeBearing(r.bearing,T):T,te="pitch"in r?+r.pitch:A,Q="padding"in r?r.padding:g.padding,fe=u.P.convert(r.offset);let we=g.centerPoint.add(fe);const Pe=g.pointLocation(we),{center:Oe,zoom:Me}=g.getConstrained(u.N.convert(r.center||Pe),(d=r.zoom)!==null&&d!==void 0?d:_);this._normalizeCenter(Oe);const Be=g.project(Pe),Ke=g.project(Oe).sub(Be),je=g.zoomScale(Me-_);let Je,nt;r.around&&(Je=u.N.convert(r.around),nt=g.locationPoint(Je));const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Me!==_,this._rotating=this._rotating||T!==U,this._pitching=this._pitching||te!==A,this._padding=!g.isPaddingEqual(Q),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,at),this.terrain&&this._prepareElevation(Oe),this._ease(mt=>{if(this._zooming&&(g.zoom=u.z.number(_,Me,mt)),this._rotating&&(g.bearing=u.z.number(T,U,mt)),this._pitching&&(g.pitch=u.z.number(A,te,mt)),this._padding&&(g.interpolatePadding(z,Q,mt),we=g.centerPoint.add(fe)),this.terrain&&!r.freezeElevation&&this._updateElevation(mt),Je)g.setLocationAtPoint(Je,nt);else{const wt=g.zoomScale(g.zoom-_),Dt=Me>_?Math.min(2,je):Math.max(.5,je),Bt=Math.pow(Dt,1-mt),bt=g.unproject(Be.add(Ke.mult(mt*Bt)).mult(wt));g.setLocationAtPoint(g.renderWorldCopies?bt.wrap():bt,we)}this._applyUpdatedTransform(g),this._fireMoveEvents(l)},mt=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l,mt)},r),this}_prepareEase(r,l,d={}){this._moving=!0,l||d.moving||this.fire(new u.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(l-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const l=r.clone(),{center:d,zoom:g,pitch:_,bearing:T,elevation:A}=this.transformCameraUpdate(l);d&&(l.center=d),g!==void 0&&(l.zoom=g),_!==void 0&&(l.pitch=_),T!==void 0&&(l.bearing=T),A!==void 0&&(l.elevation=A),this.transform.apply(l)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const d=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.k("zoomend",r)),g&&this.fire(new u.k("rotateend",r)),_&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,l){var d;if(!r.essential&&b.prefersReducedMotion){const jt=u.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,l)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},r);const g=this._getTransformForUpdate(),_=this.getZoom(),T=this.getBearing(),A=this.getPitch(),z=this.getPadding(),U="bearing"in r?this._normalizeBearing(r.bearing,T):T,te="pitch"in r?+r.pitch:A,Q="padding"in r?r.padding:g.padding,fe=u.P.convert(r.offset);let we=g.centerPoint.add(fe);const Pe=g.pointLocation(we),{center:Oe,zoom:Me}=g.getConstrained(u.N.convert(r.center||Pe),(d=r.zoom)!==null&&d!==void 0?d:_);this._normalizeCenter(Oe);const Be=g.zoomScale(Me-_),Ke=g.project(Pe),je=g.project(Oe).sub(Ke);let Je=r.curve;const nt=Math.max(g.width,g.height),at=nt/Be,mt=je.mag();if("minZoom"in r){const jt=u.ad(Math.min(r.minZoom,_,Me),g.minZoom,g.maxZoom),cn=nt/g.zoomScale(jt-_);Je=Math.sqrt(cn/mt*2)}const wt=Je*Je;function Dt(jt){const cn=(at*at-nt*nt+(jt?-1:1)*wt*wt*mt*mt)/(2*(jt?at:nt)*wt*mt);return Math.log(Math.sqrt(cn*cn+1)-cn)}function Bt(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function bt(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const Tt=Dt(!1);let Gt=function(jt){return bt(Tt)/bt(Tt+Je*jt)},mn=function(jt){return nt*((bt(Tt)*(Bt(cn=Tt+Je*jt)/bt(cn))-Bt(Tt))/wt)/mt;var cn},At=(Dt(!0)-Tt)/Je;if(Math.abs(mt)<1e-6||!isFinite(At)){if(Math.abs(nt-at)<1e-6)return this.easeTo(r,l);const jt=at<nt?-1:1;At=Math.abs(Math.log(at/nt))/Je,mn=()=>0,Gt=cn=>Math.exp(jt*Je*cn)}return r.duration="duration"in r?+r.duration:1e3*At/("screenSpeed"in r?+r.screenSpeed/Je:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=T!==U,this._pitching=te!==A,this._padding=!g.isPaddingEqual(Q),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Oe),this._ease(jt=>{const cn=jt*At,or=1/Gt(cn);g.zoom=jt===1?Me:_+g.scaleZoom(or),this._rotating&&(g.bearing=u.z.number(T,U,jt)),this._pitching&&(g.pitch=u.z.number(A,te,jt)),this._padding&&(g.interpolatePadding(z,Q,jt),we=g.centerPoint.add(fe)),this.terrain&&!r.freezeElevation&&this._updateElevation(jt);const xn=jt===1?Oe:g.unproject(Ke.add(je.mult(mn(cn))).mult(or));g.setLocationAtPoint(g.renderWorldCopies?xn.wrap():xn,we),this._applyUpdatedTransform(g),this._fireMoveEvents(l)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,l)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,l,d){d.animate===!1||d.duration===0?(r(1),l()):(this._easeStart=b.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=u.b3(r,-180,180);const d=Math.abs(r-l);return Math.abs(r-360-l)<d&&(r-=360),Math.abs(r+360-l)<d&&(r+=360),r}_normalizeCenter(r){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const d=r.lng-l.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const fd={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class wl{constructor(r=fd){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const d=this._map._getUIString(`AttributionControl.${l}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style.sourceCaches;for(const g in l){const _=l[g];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,_)=>g.length-_.length),r=r.filter((g,_)=>{for(let T=_+1;T<r.length;T++)if(r[T].indexOf(g)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class es{constructor(r={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=C.create("div","maplibregl-ctrl");const l=C.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ut{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const g of d)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var mp=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class pd extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];const d={};for(const g of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))d[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.aQ(g.posMatrix,0,u.X,0,u.X,0,1),this._tiles[g.key]=new rt(g,this.tileSize));for(const g in this._tiles)d[g]||delete this._tiles[g]}freeRtt(r){for(const l in this._tiles){const d=this._tiles[l];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const d of this._renderableTilesKeys){const g=this._tiles[d].tileID;if(g.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),u.aQ(_.posMatrix,0,u.X,0,u.X,0,1),l[d]=_}else if(g.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=g.canonical.z-r.canonical.z,A=g.canonical.x-(g.canonical.x>>T<<T),z=g.canonical.y-(g.canonical.y>>T<<T),U=u.X>>T;u.aQ(_.posMatrix,0,U,0,U,0,1),u.J(_.posMatrix,_.posMatrix,[-A*U,-z*U,0]),l[d]=_}else if(r.canonical.isChildOf(g.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=r.canonical.z-g.canonical.z,A=r.canonical.x-(r.canonical.x>>T<<T),z=r.canonical.y-(r.canonical.y>>T<<T),U=u.X>>T;u.aQ(_.posMatrix,0,u.X,0,u.X,0,1),u.J(_.posMatrix,_.posMatrix,[A*U,z*U,0]),u.K(_.posMatrix,_.posMatrix,[1/2**T,1/2**T,0]),l[d]=_}}return l}getSourceTile(r,l){const d=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>d.maxzoom&&(g=d.maxzoom),g<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&l)for(;g>=d.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(g--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class gp{constructor(r,l,d){this.painter=r,this.sourceCache=new pd(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,d,g=u.X){var _;if(!(l>=0&&l<g&&d>=0&&d<g))return 0;const T=this.getTerrainData(r),A=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!A)return 0;const z=function(Pe,Oe,Me){var Be=Oe[0],Ke=Oe[1];return Pe[0]=Me[0]*Be+Me[4]*Ke+Me[12],Pe[1]=Me[1]*Be+Me[5]*Ke+Me[13],Pe}([],[l/g*u.X,d/g*u.X],T.u_terrain_matrix),U=[z[0]*A.dim,z[1]*A.dim],te=Math.floor(U[0]),Q=Math.floor(U[1]),fe=U[0]-te,we=U[1]-Q;return A.get(te,Q)*(1-fe)*(1-we)+A.get(te+1,Q)*fe*(1-we)+A.get(te,Q+1)*(1-fe)*we+A.get(te+1,Q+1)*fe*we}getElevationForLngLatZoom(r,l){const{tileID:d,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(d,g%u.X,_%u.X,u.X)}getElevation(r,l,d,g=u.X){return this.getDEMElevation(r,l,d,g)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.painter.context,_=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new H(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new H(g,new u.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ao([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const g=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new H(g,l.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),l.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?_=r.canonical.z-g:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>_<<_),A=r.canonical.y-(r.canonical.y>>_<<_),z=u.bb(new Float64Array(16),[1/(u.X<<_),1/(u.X<<_),0]);u.J(z,z,[T*u.X,A*u.X,0]),this._demMatrixCache[r.key]={matrix:z,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){const l=this.painter,d=l.width/devicePixelRatio,g=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new H(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new H(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,g,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let A=0;A<this._coordsTextureSize;A++,T+=4)l[T+0]=255&A,l[T+1]=255&_,l[T+2]=A>>8<<4|_>>8,l[T+3]=0;const d=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),g=new H(r,d,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),d=this.painter.context,g=d.gl,_=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(_,A-T-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);const z=l[0]+(l[2]>>4<<8),U=l[1]+((15&l[2])<<8),te=this.coordsIndex[255-l[3]],Q=te&&this.sourceCache.getTileByID(te);if(!Q)return null;const fe=this._coordsTextureSize,we=(1<<Q.tileID.canonical.z)*fe;return new u.Z((Q.tileID.canonical.x*fe+z)/we+Q.tileID.wrap,(Q.tileID.canonical.y*fe+U)/we,this.getElevation(Q.tileID,z,U,fe))}depthAtPoint(r){const l=new Uint8Array(4),d=this.painter.context,g=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,l=new u.bc,d=new u.aY,g=this.meshSize,_=u.X/g,T=g*g;for(let Q=0;Q<=g;Q++)for(let fe=0;fe<=g;fe++)l.emplaceBack(fe*_,Q*_,0);for(let Q=0;Q<T;Q+=g+1)for(let fe=0;fe<g;fe++)d.emplaceBack(fe+Q,g+fe+Q+1,g+fe+Q+2),d.emplaceBack(fe+Q,g+fe+Q+2,fe+Q+1);const A=l.length,z=A+2*(g+1);for(const Q of[0,1])for(let fe=0;fe<=g;fe++)for(const we of[0,1])l.emplaceBack(fe*_,Q*u.X,we);for(let Q=0;Q<2*g;Q+=2)d.emplaceBack(z+Q,z+Q+1,z+Q+3),d.emplaceBack(z+Q,z+Q+3,z+Q+2),d.emplaceBack(A+Q,A+Q+3,A+Q+1),d.emplaceBack(A+Q,A+Q+2,A+Q+3);const U=l.length,te=U+2*(g+1);for(const Q of[0,1])for(let fe=0;fe<=g;fe++)for(const we of[0,1])l.emplaceBack(Q*u.X,fe*_,we);for(let Q=0;Q<2*g;Q+=2)d.emplaceBack(U+Q,U+Q+1,U+Q+3),d.emplaceBack(U+Q,U+Q+3,U+Q+2),d.emplaceBack(te+Q,te+Q+3,te+Q+1),d.emplaceBack(te+Q,te+Q+2,te+Q+3);return this._mesh=new xl(r.createVertexBuffer(l,mp.members),r.createIndexBuffer(d),u.a0.simpleSegment(0,0,l.length,d.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.bd/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var d;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(d=this.getMinMaxElevation(g).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,l){const d=u.Z.fromLngLat(r.wrap()),g=(1<<l)*u.X,_=d.x*g,T=d.y*g,A=Math.floor(_/u.X),z=Math.floor(T/u.X);return{tileID:new u.S(l,0,l,A,z),mercatorX:_,mercatorY:T}}}class Iu{constructor(r,l,d){this._context=r,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new H(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:r,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ts={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class yp{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new Iu(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(l)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const g=r.sourceCaches[d].getVisibleCoordinates();for(const _ of g){const T=this.terrain.sourceCache.getTerrainCoords(_);for(const A in T)this._coordsDescendingInv[d][A]||(this._coordsDescendingInv[d][A]=[]),this._coordsDescendingInv[d][A].push(T[A])}}this._coordsDescendingInvStr={};for(const d of r._order){const g=r._layers[d],_=g.source;if(ts[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const T in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][T]=this._coordsDescendingInv[_][T].map(A=>A.key).sort().join()}}for(const d of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][d.tileID.key];_&&_!==d.rttCoords[g]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const l=r.type,d=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ts[l]&&(this._prevType&&ts[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!g))return!0;if(ts[this._prevType]||ts[l]&&g){this._prevType=l;const _=this._stacks.length-1,T=this._stacks[_]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Xs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[_]){const U=this.pool.getObjectForId(A.rtt[_].id);if(U.stamp===A.rtt[_].stamp){this.pool.useObject(U);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),A.rtt[_]={id:z.id,stamp:z.stamp},d.context.bindFramebuffer.set(z.fbo.framebuffer),d.context.clear({color:u.aN.transparent,stencil:0}),d.currentStencilSource=void 0;for(let U=0;U<T.length;U++){const te=d.style._layers[T[U]],Q=te.source?this._coordsDescendingInv[te.source][A.tileID.key]:[A.tileID];d.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),d._renderTileClippingMasks(te,Q),d.renderLayer(d,d.style.sourceCaches[te.source],te,Q),te.source&&(A.rttCoords[te.source]=this._coordsDescendingInvStr[te.source][A.tileID.key])}}return Xs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ts[l]}return!1}}const Lt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},md=S,wy={hash:!1,interactive:!0,bearingSnap:7,attributionControl:fd,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},vp=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},gd={showCompass:!0,showZoom:!0,visualizePitch:!1};class _p{constructor(r,l,d=!1){this.mousedown=T=>{this.startMouse(u.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),C.mousePos(this.element,T)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,C.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),C.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=td({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:A,bearingDegreesPerPixelMoved:z=.8})=>{const U=new Ec;return new ir({clickTolerance:A,move:(te,Q)=>({bearingDelta:(Q.x-te.x)*z}),moveStateManager:U,enable:T,assignEvents:vp})})({clickTolerance:g,enable:!0}),this.map=r,d&&(this.mousePitch=za({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:A,pitchDegreesPerPixelMoved:z=-.5})=>{const U=new Ec;return new ir({clickTolerance:A,move:(te,Q)=>({pitchDelta:(Q.y-te.y)*z}),moveStateManager:U,enable:T,assignEvents:vp})})({clickTolerance:_,enable:!0})),C.addEventListener(l,"mousedown",this.mousedown),C.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),C.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),C.disableDrag()}moveMouse(r,l){const d=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(r,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,l)||{};_&&d.setPitch(d.getPitch()+_)}}moveTouch(r,l){const d=this.map,{bearingDelta:g}=this.touchRotate.dragMove(r,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,l)||{};_&&d.setPitch(d.getPitch()+_)}}off(){const r=this.element;C.removeEventListener(r,"mousedown",this.mousedown),C.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend),C.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend)}}let qs;function xp(v,r,l){const d=new u.N(v.lng,v.lat);if(v=new u.N(v.lng,v.lat),r){const g=new u.N(v.lng-360,v.lat),_=new u.N(v.lng+360,v.lat),T=l.locationPoint(v).distSqr(r);l.locationPoint(g).distSqr(r)<T?v=g:l.locationPoint(_).distSqr(r)<T&&(v=_)}for(;Math.abs(v.lng-l.center.lng)>180;){const g=l.locationPoint(v);if(g.x>=0&&g.y>=0&&g.x<=l.width&&g.y<=l.height)break;v.lng>l.center.lng?v.lng-=360:v.lng+=360}return v.lng!==d.lng&&l.locationPoint(v).y>l.height/2-l.getHorizon()?v:d}const yd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Js(v,r,l){const d=v.classList;for(const g in yd)d.remove(`maplibregl-${l}-anchor-${g}`);d.add(`maplibregl-${l}-anchor-${r}`)}class Qn extends u.E{constructor(r){if(super(),this._onKeyPress=l=>{const d=l.code,g=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=l=>{const d=l.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()},this._update=l=>{var d;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?xp(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${yd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${_}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div");const l=C.createNS("http://www.w3.org/2000/svg","svg"),d=41,g=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${g}px`),l.setAttributeNS(null,"viewBox",`0 0 ${g} ${d}`);const _=C.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=C.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const A=C.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Be of z){const Ke=C.createNS("http://www.w3.org/2000/svg","ellipse");Ke.setAttributeNS(null,"opacity","0.04"),Ke.setAttributeNS(null,"cx","10.5"),Ke.setAttributeNS(null,"cy","5.80029008"),Ke.setAttributeNS(null,"rx",Be.rx),Ke.setAttributeNS(null,"ry",Be.ry),A.appendChild(Ke)}const U=C.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill",this._color);const te=C.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),U.appendChild(te);const Q=C.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");const fe=C.createNS("http://www.w3.org/2000/svg","path");fe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(fe);const we=C.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"transform","translate(6.0, 7.0)"),we.setAttributeNS(null,"fill","#FFFFFF");const Pe=C.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Oe=C.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#000000"),Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962");const Me=C.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#FFFFFF"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Oe),Pe.appendChild(Me),T.appendChild(A),T.appendChild(U),T.appendChild(Q),T.appendChild(we),T.appendChild(Pe),l.appendChild(T),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(l),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Js(this._element,this._anchor,"marker"),r&&r.className)for(const l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,d;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,_=g.terrain.depthAtPoint(this._pos),T=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,T)-_<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/g.transform._pixelPerMeter,z=Math.sin(g.getPitch()*Math.PI/180)*A,U=g.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),te=g.transform.lngLatToCameraDepth(this._lngLat,T+z)-U>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const Tc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let bl=0,Sl=!1;const wp={maxWidth:100,unit:"metric"};function vd(v,r,l){const d=l&&l.maxWidth||100,g=v._container.clientHeight/2,_=v.unproject([0,g]),T=v.unproject([d,g]),A=_.distanceTo(T);if(l&&l.unit==="imperial"){const z=3.2808*A;z>5280?Au(r,d,z/5280,v._getUIString("ScaleControl.Miles")):Au(r,d,z,v._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Au(r,d,A/1852,v._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Au(r,d,A/1e3,v._getUIString("ScaleControl.Kilometers")):Au(r,d,A,v._getUIString("ScaleControl.Meters"))}function Au(v,r,l,d){const g=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let A=_/T;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(z){const U=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*U)/U}(A),T*A}(l);v.style.width=r*(g/l)+"px",v.innerHTML=`${g}&nbsp;${d}`}const ns={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Cc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yt(v){if(v){if(typeof v=="number"){const r=Math.round(Math.abs(v)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,v),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-v),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(v,0),right:new u.P(-v,0)}}if(v instanceof u.P||Array.isArray(v)){const r=u.P.convert(v);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(v.center||[0,0]),top:u.P.convert(v.top||[0,0]),"top-left":u.P.convert(v["top-left"]||[0,0]),"top-right":u.P.convert(v["top-right"]||[0,0]),bottom:u.P.convert(v.bottom||[0,0]),"bottom-left":u.P.convert(v["bottom-left"]||[0,0]),"bottom-right":u.P.convert(v["bottom-right"]||[0,0]),left:u.P.convert(v.left||[0,0]),right:u.P.convert(v.right||[0,0])}}return Yt(new u.P(0,0))}const an=S;m.AJAXError=u.bg,m.Evented=u.E,m.LngLat=u.N,m.MercatorCoordinate=u.Z,m.Point=u.P,m.addProtocol=u.bh,m.config=u.a,m.removeProtocol=u.bi,m.AttributionControl=wl,m.BoxZoomHandler=Ks,m.CanvasSource=tt,m.CooperativeGesturesHandler=To,m.DoubleClickZoomHandler=cd,m.DragPanHandler=ao,m.DragRotateHandler=Eo,m.EdgeInsets=Z,m.FullscreenControl=class extends u.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=N,m.GeolocateControl=class extends u.E{constructor(v){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const l=new u.N(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,g=this._map.getBearing(),_=u.e({bearing:g},this.options.fitBoundsOptions),T=et.fromLngLat(l,d);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const l=new u.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Sl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Qn({element:this._dotElement}),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},Tc,v)}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(r=!1){if(qs!==void 0&&!r)return qs;if(window.navigator.permissions===void 0)return qs=!!window.navigator.geolocation,qs;try{qs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{qs=!!window.navigator.geolocation}return qs})}().then(r=>this._setupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,bl=0,Sl=!1}_isOutOfMapMaxBounds(v){const r=this._map.getMaxBounds(),l=v.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),r=v.getSouthEast(),l=v.getNorthEast(),d=r.distanceTo(l),g=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":bl--,Sl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),bl++,bl>1?(v={maximumAge:6e5,timeout:0},Sl=!0):(v=this.options.positionOptions,Sl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.Hash=kt,m.ImageSource=ye,m.KeyboardHandler=ad,m.LngLatBounds=et,m.LogoControl=es,m.Map=class extends xy{constructor(v){u.be.mark(u.bf.create);const r=Object.assign(Object.assign({},wy),v);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new $e(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ut,this._controls=[],this._mapId=u.a4(),this._contextLost=l=>{l.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:l}))},this._contextRestored=l=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:l}))},this._onMapScroll=l=>{if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Lt),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new ae(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let l=!1;const d=ut(g=>{this._trackResize&&!this._removed&&this.resize(g)._update()},50);this._resizeObserver=new ResizeObserver(g=>{l?d(g):l=!0}),this._resizeObserver.observe(this._container)}this.handlers=new _y(this,r),this._hash=r.hash&&new kt(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,u.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new wl(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new es,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new u.k(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new u.k(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new u.k("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(v,r){if(r===void 0&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=v.onAdd(this);this._controls.push(v);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,r,l,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,r,l,d)}resize(v){var r;const l=this._containerDimensions(),d=l[0],g=l[1],_=this._getClampedPixelRatio(d,g);if(this._resizeCanvas(d,g,_),this.painter.resize(d,g,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const z=this._getClampedPixelRatio(d,g);this._resizeCanvas(d,g,z),this.painter.resize(d,g,z)}this.transform.resize(d,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,g);const T=!this._moving;return T&&(this.stop(),this.fire(new u.k("movestart",v)).fire(new u.k("move",v))),this.fire(new u.k("resize",v)),T&&this.fire(new u.k("moveend",v)),this}_getClampedPixelRatio(v,r){const{0:l,1:d}=this._maxCanvasSize,g=this.getPixelRatio(),_=v*g,T=r*g;return Math.min(_>l?l/_:1,T>d?d/T:1)*g}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(et.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(u.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(u.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,r,l){if(v==="mouseenter"||v==="mouseover"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:_=>{const T=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];T.length?d||(d=!0,l.call(this,new Un(v,this,_.originalEvent,{features:T}))):d=!1},mouseout:()=>{d=!1}}}}if(v==="mouseleave"||v==="mouseout"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,l.call(this,new Un(v,this,T.originalEvent)))},mouseout:T=>{d&&(d=!1,l.call(this,new Un(v,this,T.originalEvent)))}}}}{const d=g=>{const _=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];_.length&&(g.features=_,l.call(this,g),delete g.features)};return{layer:r,listener:l,delegates:{[v]:d}}}}on(v,r,l){if(l===void 0)return super.on(v,r);const d=this._createDelegatedListener(v,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(d);for(const g in d.delegates)this.on(g,d.delegates[g]);return this}once(v,r,l){if(l===void 0)return super.once(v,r);const d=this._createDelegatedListener(v,r,l);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(v,r,l){return l===void 0?super.off(v,r):(this._delegatedListeners&&this._delegatedListeners[v]&&(d=>{const g=this._delegatedListeners[v];for(let _=0;_<g.length;_++){const T=g[_];if(T.layer===r&&T.listener===l){for(const A in T.delegates)this.off(A,T.delegates[A]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(v,r){if(!this.style)return[];let l;const d=v instanceof u.P||Array.isArray(v),g=d?v:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:v)||{},g instanceof u.P||typeof g[0]=="number")l=[u.P.convert(g)];else{const _=u.P.convert(g[0]),T=u.P.convert(g[1]);l=[_,new u.P(T.x,_.y),T,new u.P(_.x,T.y),_]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(v,r){return this.style.querySourceFeatures(v,r)}setStyle(v,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(v,r))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const r=this._locale[v];if(r==null)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,r));const l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new cu(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,r,l):this.style.loadJSON(v,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new cu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,r){if(typeof v=="string"){const l=this._requestManager.transformRequest(v,"Style");u.h(l,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new u.j(d))})}else typeof v=="object"&&this._updateDiff(v,r)}_updateDiff(v,r){try{this.style.setState(v,r)&&this._update(!0)}catch(l){u.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(v,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(v,r){return this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)}isSourceLoaded(v){const r=this.style&&this.style.sourceCaches[v];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const r=this.style.sourceCaches[v.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&r.reload();for(const l in this.style._layers){const d=this.style._layers[l];d.type==="hillshade"&&d.source===v.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new gp(this.painter,r,v),this.painter.renderToTexture=new yp(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:v})),this}getTerrain(){var v,r;return(r=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const r in v){const l=v[r]._tiles;for(const d in l){const g=l[d];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,r,l={}){const{pixelRatio:d=1,sdf:g=!1,stretchX:_,stretchY:T,content:A,textFitWidth:z,textFitHeight:U}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:Q,data:fe}=r,we=r;return this.style.addImage(v,{data:new u.R({width:te,height:Q},new Uint8Array(fe)),pixelRatio:d,stretchX:_,stretchY:T,content:A,textFitWidth:z,textFitHeight:U,sdf:g,version:0,userImage:we}),we.onAdd&&we.onAdd(this,v),this}}{const{width:te,height:Q,data:fe}=b.getImageData(r);this.style.addImage(v,{data:new u.R({width:te,height:Q},fe),pixelRatio:d,stretchX:_,stretchY:T,content:A,textFitWidth:z,textFitHeight:U,sdf:g,version:0})}}updateImage(v,r){const l=this.style.getImage(v);if(!l)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||u.b(r)?b.getImageData(r):r,{width:g,height:_,data:T}=d;if(g===void 0||_===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==l.data.width||_!==l.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(r instanceof HTMLImageElement||u.b(r));return l.data.replace(T,A),this.style.updateImage(v,l),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return G.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,r){return this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)}moveLayer(v,r){return this.style.moveLayer(v,r),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,r,l){return this.style.setLayerZoomRange(v,r,l),this._update(!0)}setFilter(v,r,l={}){return this.style.setFilter(v,r,l),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,r,l,d={}){return this.style.setPaintProperty(v,r,l,d),this._update(!0)}getPaintProperty(v,r){return this.style.getPaintProperty(v,r)}setLayoutProperty(v,r,l,d={}){return this.style.setLayoutProperty(v,r,l,d),this._update(!0)}getLayoutProperty(v,r){return this.style.getLayoutProperty(v,r)}setGlyphs(v,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,r,l,d=>{d||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,r,l=>{l||this._update(!0)}),this}setLight(v,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,r){return this.style.setFeatureState(v,r),this._update()}removeFeatureState(v,r){return this.style.removeFeatureState(v,r),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,r=0;return this._container&&(v=this._container.clientWidth||400,r=this._container.clientHeight||300),[v,r]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const r=this._canvasContainer=C.create("div","maplibregl-canvas-container",v);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),d=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],d);const g=this._controlContainer=C.create("div","maplibregl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=C.create("div",`maplibregl-ctrl-${T} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r,l){this._canvas.width=Math.floor(l*v),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:v},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const l=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!l){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new bu(l,this.transform),R.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=b.now();this.style.zoomHistory.update(g,_);const T=new u.a9(g,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=T.crossFadingFactor();A===1&&A===this._crossFadingFactor||(l=!0,this._crossFadingFactor=A),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.be.mark(u.bf.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,u.be.mark(u.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.be.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(v=>{u.be.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return md}getCameraTargetElevation(){return this.transform.elevation}},m.MapMouseEvent=Un,m.MapTouchEvent=fr,m.MapWheelEvent=so,m.Marker=Qn,m.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const r=this._map.getZoom(),l=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{const d=this._map._getUIString(`NavigationControl.${l}`);r.title=d,r.setAttribute("aria-label",d)},this.options=u.e({},gd,v),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),C.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),C.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _p(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,r){const l=C.create("button",v,this._container);return l.type="button",l.addEventListener("click",r),l}},m.Popup=class extends u.E{constructor(v){super(),this.remove=()=>(this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=C.create("div","maplibregl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?xp(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const _=Yt(this.options.offset);if(!g){const A=this._container.offsetWidth,z=this._container.offsetHeight;let U;U=d.y+_.bottom.y<z?["top"]:d.y>this._map.transform.height-z?["bottom"]:[],d.x<A/2?U.push("left"):d.x>this._map.transform.width-A/2&&U.push("right"),g=U.length===0?"bottom":U.join("-")}let T=d.add(_[g]);this.options.subpixelPositioning||(T=T.round()),C.setTransform(this._container,`${yd[g]} translate(${T.x}px,${T.y}px)`),Js(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(ns),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=u.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const r=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=v;d=l.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Cc);v&&v.focus()}},m.RasterDEMTileSource=Se,m.RasterTileSource=Vt,m.ScaleControl=class{constructor(v){this._onMove=()=>{vd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,vd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},wp),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=ud,m.Style=cu,m.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=C.create("button","maplibregl-ctrl-terrain",this._container),C.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){C.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=sd,m.TwoFingersTouchRotateHandler=od,m.TwoFingersTouchZoomHandler=rd,m.TwoFingersTouchZoomRotateHandler=hd,m.VectorTileSource=un,m.VideoSource=Xe,m.addSourceType=(v,r)=>u._(void 0,void 0,void 0,function*(){if(le(v))throw new Error(`A source type called "${v}" already exists.`);((l,d)=>{ht[l]=d})(v,r)}),m.clearPrewarmedResources=function(){const v=it;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Fe),it=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return Ve().getRTLTextPluginStatus()},m.getVersion=function(){return an},m.getWorkerCount=function(){return We.workerCount},m.getWorkerUrl=function(){return u.a.WORKER_URL},m.importScriptInWorkers=function(v){return pt().broadcast("IS",v)},m.prewarm=function(){vt().acquire(Fe)},m.setMaxParallelImageRequests=function(v){u.a.MAX_PARALLEL_IMAGE_REQUESTS=v},m.setRTLTextPlugin=function(v,r){return Ve().setRTLTextPlugin(v,r)},m.setWorkerCount=function(v){We.workerCount=v},m.setWorkerUrl=function(v){u.a.WORKER_URL=v}});var p=i;return p})})(jC);var LC=jC.exports;const DC=qf(LC),c4=DM({__proto__:null,default:DC},[LC]),h4="modulepreload",d4=function(e){return"/osm-address-editor-vite/"+e},R2={},f4=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const p=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),u=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=Promise.all(i.map(S=>{if(S=d4(S),S in R2)return;R2[S]=!0;const P=S.endsWith(".css"),M=P?'[rel="stylesheet"]':"";if(!!a)for(let R=p.length-1;R>=0;R--){const B=p[R];if(B.href===S&&(!P||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${M}`))return;const C=document.createElement("link");if(C.rel=P?"stylesheet":h4,P||(C.as="script",C.crossOrigin=""),C.href=S,u&&C.setAttribute("nonce",u),document.head.appendChild(C),P)return new Promise((R,B)=>{C.addEventListener("load",R),C.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${S}`)))})}))}return c.then(()=>t()).catch(p=>{const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=p,window.dispatchEvent(m),!m.defaultPrevented)throw p})},p4=yt.createContext(null);function m4(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,p=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===p}function Lo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Lo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Lo(e[c],t[c]))return!1;return!0}return!1}function g4(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function j2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Lo(i,a)||t.setProjection(i)}function O2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function L2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const y4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function D2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const p=t[a.ref];if(p){c=c||Object.assign({},a),delete c.ref;for(const m of y4)m in p&&(c[m]=p[m])}return c||a});return{...e,layers:i}}var B2={};const N2={version:8,sources:{},layers:[]},U2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},D0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},$2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},v4=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],_4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Mh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const p=this.props[$2[c.type]];p?p(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const p=this.props[U2[c.type]];p&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),p(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const p=this.props[D0[c.type]];p&&p(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),p=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||p&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Mh.savedMaps.pop();if(!a)return null;const c=a.map,p=c.getContainer();for(i.className=p.className;p.childNodes.length>0;)i.appendChild(p.childNodes[0]);c._container=i;const m=c._resizeObserver;m&&(m.disconnect(),m.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=N2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||x4()||null,container:t,style:D2(a)},p=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[p.longitude||0,p.latitude||0],zoom:p.zoom||0,pitch:p.pitch||0,bearing:p.bearing||0}),i.gl){const M=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=M,i.gl)}const m=new this._MapClass(c);p.padding&&m.setPadding(p.padding),i.cursor&&(m.getCanvas().style.cursor=i.cursor),this._createShadowTransform(m);const u=m._render;m._render=M=>{this._inRender=!0,u.call(m,M),this._inRender=!1};const S=m._renderTaskQueue.run;m._renderTaskQueue.run=M=>{S.call(m._renderTaskQueue,M),this._onBeforeRepaint()},m.on("render",()=>this._onAfterRepaint());const P=m.fire;m.fire=this._fireEvent.bind(this,P),m.on("resize",()=>{this._renderTransform.resize(m.transform.width,m.transform.height)}),m.on("styledata",()=>{this._updateStyleComponents(this.props,{}),j2(m.transform,this._renderTransform)}),m.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const M in U2)m.on(M,this._onPointerEvent);for(const M in D0)m.on(M,this._onCameraEvent);for(const M in $2)m.on(M,this._onEvent);this._map=m}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Mh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=g4(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:p,pitch:m,bearing:u}=c,S=a.isMoving();S&&(c.cameraElevationReference="sea");const P=L2(c,{...O2(a.transform),...t});if(S&&(c.cameraElevationReference="ground"),P&&i){const M=this._deferredEvents;M.move=!0,M.zoom||(M.zoom=p!==c.zoom),M.rotate||(M.rotate=u!==c.bearing),M.pitch||(M.pitch=m!==c.pitch)}return S||L2(a.transform,t),P}_updateSettings(t,i){const a=this._map;let c=!1;for(const p of v4)if(p in t&&!Lo(t[p],i[p])){c=!0;const m=a[`set${p[0].toUpperCase()}${p.slice(1)}`];m==null||m.call(a,t[p])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=N2,styleDiffing:c=!0}=t,p={diff:c};return"localIdeographFontFamily"in t&&(p.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(D2(a),p),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Lo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Lo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Lo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const p=this._map;let m=!1;for(const u of _4){const S=(a=t[u])!==null&&a!==void 0?a:!0,P=(c=i[u])!==null&&c!==void 0?c:!0;Lo(S,P)||(m=!0,S?p[u].enable(S):p[u].disable())}return m}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const p=t.type,m=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),S=u.length>0;!S&&m&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,S&&!m&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=p}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,p=c.transform,m=typeof i=="string"?i:i.type;return m==="move"&&this._updateViewState(this.props,!1),m in D0&&(typeof i=="object"&&(i.viewState=O2(p)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=p,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{j2(this._renderTransform,i),t.transform=i}}}Mh.savedMaps=[];function x4(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||B2.MapboxAccessToken}catch{}try{e=e||B2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const w4=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function b4(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const p=t.project(a);return t.transform=c,p},unproject:a=>{const c=t.transform;t.transform=e.transform;const p=t.unproject(a);return t.transform=c,p},queryTerrainElevation:(a,c)=>{const p=t.transform;t.transform=e.transform;const m=t.queryTerrainElevation(a,c);return t.transform=p,m},queryRenderedFeatures:(a,c)=>{const p=t.transform;t.transform=e.transform;const m=t.queryRenderedFeatures(a,c);return t.transform=p,m}};for(const a of S4(t))!(a in i)&&!w4.includes(a)&&(i[a]=t[a].bind(t));return i}function S4(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const E4=typeof document<"u"?yt.useLayoutEffect:yt.useEffect,T4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function C4(e,t){for(const a of T4)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Nh=yt.createContext(null);function P4(e,t,i){const a=yt.useContext(p4),[c,p]=yt.useState(null),m=yt.useRef(),{current:u}=yt.useRef({mapLib:null,map:null});yt.useEffect(()=>{const M=e.mapLib;let b=!0,C;return Promise.resolve(M||i).then(R=>{if(!b)return;if(!R)throw new Error("Invalid mapLib");const B="Map"in R?R:R.default;if(!B.Map)throw new Error("Invalid mapLib");if(C4(B,e),!B.supported||B.supported(e))e.reuseMaps&&(C=Mh.reuse(e,m.current)),C||(C=new Mh(B.Map,e,m.current)),u.map=b4(C),u.mapLib=B,p(C),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:B}=e;B?B({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{b=!1,C&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?C.recycle():C.destroy())}},[]),E4(()=>{c&&c.setProps(e)}),yt.useImperativeHandle(t,()=>u.map,[c]);const S=yt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),P={height:"100%"};return yt.createElement("div",{id:e.id,ref:m,style:S},c&&yt.createElement(Nh.Provider,{value:u},yt.createElement("div",{"mapboxgl-children":"",style:P},e.children)))}const I4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function oc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!I4.test(a)?i[a]=`${c}px`:i[a]=c}}function A4(e,t){const{map:i,mapLib:a}=yt.useContext(Nh),c=yt.useRef({props:e});c.current.props=e;const p=yt.useMemo(()=>{let j=!1;yt.Children.forEach(e.children,X=>{X&&(j=!0)});const he={...e,element:j?document.createElement("div"):null},q=new a.Marker(he);return q.setLngLat([e.longitude,e.latitude]),q.getElement().addEventListener("click",X=>{var G,ae;(ae=(G=c.current.props).onClick)===null||ae===void 0||ae.call(G,{type:"click",target:q,originalEvent:X})}),q.on("dragstart",X=>{var G,ae;const K=X;K.lngLat=p.getLngLat(),(ae=(G=c.current.props).onDragStart)===null||ae===void 0||ae.call(G,K)}),q.on("drag",X=>{var G,ae;const K=X;K.lngLat=p.getLngLat(),(ae=(G=c.current.props).onDrag)===null||ae===void 0||ae.call(G,K)}),q.on("dragend",X=>{var G,ae;const K=X;K.lngLat=p.getLngLat(),(ae=(G=c.current.props).onDragEnd)===null||ae===void 0||ae.call(G,K)}),q},[]);yt.useEffect(()=>(p.addTo(i.getMap()),()=>{p.remove()}),[]);const{longitude:m,latitude:u,offset:S,style:P,draggable:M=!1,popup:b=null,rotation:C=0,rotationAlignment:R="auto",pitchAlignment:B="auto"}=e;return yt.useEffect(()=>{oc(p.getElement(),P)},[P]),yt.useImperativeHandle(t,()=>p,[]),(p.getLngLat().lng!==m||p.getLngLat().lat!==u)&&p.setLngLat([m,u]),S&&!m4(p.getOffset(),S)&&p.setOffset(S),p.isDraggable()!==M&&p.setDraggable(M),p.getRotation()!==C&&p.setRotation(C),p.getRotationAlignment()!==R&&p.setRotationAlignment(R),p.getPitchAlignment()!==B&&p.setPitchAlignment(B),p.getPopup()!==b&&p.setPopup(b),ex.createPortal(e.children,p.getElement())}const M4=yt.memo(yt.forwardRef(A4));function V2(e){return new Set(e?e.trim().split(/\s+/):[])}function k4(e,t){const{map:i,mapLib:a}=yt.useContext(Nh),c=yt.useMemo(()=>document.createElement("div"),[]),p=yt.useRef({props:e});p.current.props=e;const m=yt.useMemo(()=>{const u={...e},S=new a.Popup(u);return S.setLngLat([e.longitude,e.latitude]),S.once("open",P=>{var M,b;(b=(M=p.current.props).onOpen)===null||b===void 0||b.call(M,P)}),S},[]);if(yt.useEffect(()=>{const u=S=>{var P,M;(M=(P=p.current.props).onClose)===null||M===void 0||M.call(P,S)};return m.on("close",u),m.setDOMContent(c).addTo(i.getMap()),()=>{m.off("close",u),m.isOpen()&&m.remove()}},[]),yt.useEffect(()=>{oc(m.getElement(),e.style)},[e.style]),yt.useImperativeHandle(t,()=>m,[]),m.isOpen()&&((m.getLngLat().lng!==e.longitude||m.getLngLat().lat!==e.latitude)&&m.setLngLat([e.longitude,e.latitude]),e.offset&&!Lo(m.options.offset,e.offset)&&m.setOffset(e.offset),(m.options.anchor!==e.anchor||m.options.maxWidth!==e.maxWidth)&&(m.options.anchor=e.anchor,m.setMaxWidth(e.maxWidth)),m.options.className!==e.className)){const u=V2(m.options.className),S=V2(e.className);for(const P of u)S.has(P)||m.removeClassName(P);for(const P of S)u.has(P)||m.addClassName(P);m.options.className=e.className}return ex.createPortal(e.children,c)}yt.memo(yt.forwardRef(k4));function np(e,t,i,a){const c=yt.useContext(Nh),p=yt.useMemo(()=>e(c),[]);return yt.useEffect(()=>{const m=a||i||t,u=typeof t=="function"&&typeof i=="function"?t:null,S=typeof i=="function"?i:typeof t=="function"?t:null,{map:P}=c;return P.hasControl(p)||(P.addControl(p,m==null?void 0:m.position),u&&u(c)),()=>{S&&S(c),P.hasControl(p)&&P.removeControl(p)}},[]),p}function z4(e){const t=np(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return yt.useEffect(()=>{oc(t._container,e.style)},[e.style]),null}yt.memo(z4);function F4(e){const t=np(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.useEffect(()=>{oc(t._controlContainer,e.style)},[e.style]),null}yt.memo(F4);function R4(e,t){const i=yt.useRef({props:e}),a=np(({mapLib:c})=>{const p=new c.GeolocateControl(e),m=p._setupUI;return p._setupUI=u=>{p._container.hasChildNodes()||m(u)},p.on("geolocate",u=>{var S,P;(P=(S=i.current.props).onGeolocate)===null||P===void 0||P.call(S,u)}),p.on("error",u=>{var S,P;(P=(S=i.current.props).onError)===null||P===void 0||P.call(S,u)}),p.on("outofmaxbounds",u=>{var S,P;(P=(S=i.current.props).onOutOfMaxBounds)===null||P===void 0||P.call(S,u)}),p.on("trackuserlocationstart",u=>{var S,P;(P=(S=i.current.props).onTrackUserLocationStart)===null||P===void 0||P.call(S,u)}),p.on("trackuserlocationend",u=>{var S,P;(P=(S=i.current.props).onTrackUserLocationEnd)===null||P===void 0||P.call(S,u)}),p},{position:e.position});return i.current.props=e,yt.useImperativeHandle(t,()=>a,[]),yt.useEffect(()=>{oc(a._container,e.style)},[e.style]),null}const j4=yt.memo(yt.forwardRef(R4));function O4(e){const t=np(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return yt.useEffect(()=>{oc(t._container,e.style)},[e.style]),null}const L4=yt.memo(O4);function D4(e){const t=np(({mapLib:p})=>new p.ScaleControl(e),{position:e.position}),i=yt.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),yt.useEffect(()=>{oc(t._container,c)},[c]),null}yt.memo(D4);function fg(e,t){if(!e)throw new Error(t)}function B4(e,t,i,a){if(fg(i.id===a.id,"layer id changed"),fg(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:p={},filter:m,minzoom:u,maxzoom:S,beforeId:P}=i;if(P!==a.beforeId&&e.moveLayer(t,P),c!==a.layout){const M=a.layout||{};for(const b in c)Lo(c[b],M[b])||e.setLayoutProperty(t,b,c[b]);for(const b in M)c.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(p!==a.paint){const M=a.paint||{};for(const b in p)Lo(p[b],M[b])||e.setPaintProperty(t,b,p[b]);for(const b in M)p.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}Lo(m,a.filter)||e.setFilter(t,m),(u!==a.minzoom||S!==a.maxzoom)&&e.setLayerZoomRange(t,u,S)}function N4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let U4=0;function $4(e){const t=yt.useContext(Nh).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-layer-${U4++}`,[]);if(yt.useEffect(()=>{if(t){const m=()=>a(u=>u+1);return t.on("styledata",m),m(),()=>{t.off("styledata",m),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{B4(t,c,e,i.current)}catch(m){console.warn(m)}else N4(t,c,e);return i.current=e,null}let V4=0;function G4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function Z4(e,t,i){fg(t.id===i.id,"source id changed"),fg(t.type===i.type,"source type changed");let a="",c=0;for(const m in t)m!=="children"&&m!=="id"&&!Lo(i[m],t[m])&&(a=m,c++);if(!c)return;const p=t.type;if(p==="geojson")e.setData(t.data);else if(p==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function W4(e){const t=yt.useContext(Nh).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-source-${V4++}`,[]);yt.useEffect(()=>{if(t){const m=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",m),m(),()=>{var u;if(t.off("styledata",m),t.style&&t.style._loaded&&t.getSource(c)){const S=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(S)for(const P of S)P.source===c&&t.removeLayer(P.id);t.removeSource(c)}}}},[t]);let p=t&&t.style&&t.getSource(c);return p?Z4(p,e,i.current):p=G4(t,c,e),i.current=e,p&&yt.Children.map(e.children,m=>m&&yt.cloneElement(m,{source:c}))||null}const H4=f4(()=>Promise.resolve().then(()=>c4),void 0),X4=yt.forwardRef(function(t,i){return P4(t,i,H4)}),K4=M4,q4=L4,J4=j4,Y4=$4,Q4=W4,G2=()=>{};let tx={},BC={},NC=null,UC={mark:G2,measure:G2};try{typeof window<"u"&&(tx=window),typeof document<"u"&&(BC=document),typeof MutationObserver<"u"&&(NC=MutationObserver),typeof performance<"u"&&(UC=performance)}catch{}const{userAgent:Z2=""}=tx.navigator||{},ru=tx,yr=BC,W2=NC,cm=UC;ru.document;const tl=!!yr.documentElement&&!!yr.head&&typeof yr.addEventListener=="function"&&typeof yr.createElement=="function",$C=~Z2.indexOf("MSIE")||~Z2.indexOf("Trident/");var Sr="classic",VC="duotone",No="sharp",Uo="sharp-duotone",ez=[Sr,VC,No,Uo],tz={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds"}},H2={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},nz=["kit"],rz=/fa(s|r|l|t|d|b|k|kd|ss|sr|sl|st|sds)?[\-\ ]/,iz=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,oz={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},sz={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds"}},az={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds"}},lz={classic:["fas","far","fal","fat"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds"]},uz={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid"}},cz={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds"}},GC={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid"}},hz=["solid","regular","light","thin","duotone","brands"],ZC=[1,2,3,4,5,6,7,8,9,10],dz=ZC.concat([11,12,13,14,15,16,17,18,19,20]),ef={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},fz=[...Object.keys(lz),...hz,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",ef.GROUP,ef.SWAP_OPACITY,ef.PRIMARY,ef.SECONDARY].concat(ZC.map(e=>"".concat(e,"x"))).concat(dz.map(e=>"w-".concat(e))),pz={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},mz={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},gz={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},X2={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}};const Ja="___FONT_AWESOME___",c_=16,WC="fa",HC="svg-inline--fa",Qu="data-fa-i2svg",h_="data-fa-pseudo-element",yz="data-fa-pseudo-element-pending",nx="data-prefix",rx="data-icon",K2="fontawesome-i2svg",vz="async",_z=["HTML","HEAD","STYLE","SCRIPT"],XC=(()=>{try{return!0}catch{return!1}})(),KC=[Sr,No,Uo];function rp(e){return new Proxy(e,{get(t,i){return i in t?t[i]:t[Sr]}})}const qC={...GC};qC[Sr]={...GC[Sr],...H2.kit,...H2["kit-duotone"]};const Wu=rp(qC),d_={...cz};d_[Sr]={...d_[Sr],...X2.kit,...X2["kit-duotone"]};const Vf=rp(d_),f_={...uz};f_[Sr]={...f_[Sr],...gz.kit};const Hu=rp(f_),p_={...az};p_[Sr]={...p_[Sr],...mz.kit};const xz=rp(p_),wz=rz,JC="fa-layers-text",bz=iz,Sz={...tz};rp(Sz);const Ez=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],B0=ef,kh=new Set;Object.keys(Vf[Sr]).map(kh.add.bind(kh));Object.keys(Vf[No]).map(kh.add.bind(kh));Object.keys(Vf[Uo]).map(kh.add.bind(kh));const Tz=[...nz,...fz],_f=ru.FontAwesomeConfig||{};function Cz(e){var t=yr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Pz(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}yr&&typeof yr.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[i,a]=t;const c=Pz(Cz(i));c!=null&&(_f[a]=c)});const YC={styleDefault:"solid",familyDefault:"classic",cssPrefix:WC,replacementClass:HC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};_f.familyPrefix&&(_f.cssPrefix=_f.familyPrefix);const zh={...YC,..._f};zh.autoReplaceSvg||(zh.observeMutations=!1);const on={};Object.keys(YC).forEach(e=>{Object.defineProperty(on,e,{enumerable:!0,set:function(t){zh[e]=t,xf.forEach(i=>i(on))},get:function(){return zh[e]}})});Object.defineProperty(on,"familyPrefix",{enumerable:!0,set:function(e){zh.cssPrefix=e,xf.forEach(t=>t(on))},get:function(){return zh.cssPrefix}});ru.FontAwesomeConfig=on;const xf=[];function Iz(e){return xf.push(e),()=>{xf.splice(xf.indexOf(e),1)}}const Ol=c_,ha={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Az(e){if(!e||!tl)return;const t=yr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const i=yr.head.childNodes;let a=null;for(let c=i.length-1;c>-1;c--){const p=i[c],m=(p.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(m)>-1&&(a=p)}return yr.head.insertBefore(t,a),e}const Mz="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Gf(){let e=12,t="";for(;e-- >0;)t+=Mz[Math.random()*62|0];return t}function Uh(e){const t=[];for(let i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function ix(e){return e.classList?Uh(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function QC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function kz(e){return Object.keys(e||{}).reduce((t,i)=>t+"".concat(i,'="').concat(QC(e[i]),'" '),"").trim()}function oy(e){return Object.keys(e||{}).reduce((t,i)=>t+"".concat(i,": ").concat(e[i].trim(),";"),"")}function ox(e){return e.size!==ha.size||e.x!==ha.x||e.y!==ha.y||e.rotate!==ha.rotate||e.flipX||e.flipY}function zz(e){let{transform:t,containerWidth:i,iconWidth:a}=e;const c={transform:"translate(".concat(i/2," 256)")},p="translate(".concat(t.x*32,", ").concat(t.y*32,") "),m="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),S={transform:"".concat(p," ").concat(m," ").concat(u)},P={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:S,path:P}}function Fz(e){let{transform:t,width:i=c_,height:a=c_,startCentered:c=!1}=e,p="";return c&&$C?p+="translate(".concat(t.x/Ol-i/2,"em, ").concat(t.y/Ol-a/2,"em) "):c?p+="translate(calc(-50% + ".concat(t.x/Ol,"em), calc(-50% + ").concat(t.y/Ol,"em)) "):p+="translate(".concat(t.x/Ol,"em, ").concat(t.y/Ol,"em) "),p+="scale(".concat(t.size/Ol*(t.flipX?-1:1),", ").concat(t.size/Ol*(t.flipY?-1:1),") "),p+="rotate(".concat(t.rotate,"deg) "),p}var Rz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function eP(){const e=WC,t=HC,i=on.cssPrefix,a=on.replacementClass;let c=Rz;if(i!==e||a!==t){const p=new RegExp("\\.".concat(e,"\\-"),"g"),m=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");c=c.replace(p,".".concat(i,"-")).replace(m,"--".concat(i,"-")).replace(u,".".concat(a))}return c}let q2=!1;function N0(){on.autoAddCss&&!q2&&(Az(eP()),q2=!0)}var jz={mixout(){return{dom:{css:eP,insertCss:N0}}},hooks(){return{beforeDOMElementCreation(){N0()},beforeI2svg(){N0()}}}};const Ya=ru||{};Ya[Ja]||(Ya[Ja]={});Ya[Ja].styles||(Ya[Ja].styles={});Ya[Ja].hooks||(Ya[Ja].hooks={});Ya[Ja].shims||(Ya[Ja].shims=[]);var da=Ya[Ja];const tP=[],nP=function(){yr.removeEventListener("DOMContentLoaded",nP),pg=1,tP.map(e=>e())};let pg=!1;tl&&(pg=(yr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(yr.readyState),pg||yr.addEventListener("DOMContentLoaded",nP));function Oz(e){tl&&(pg?setTimeout(e,0):tP.push(e))}function ip(e){const{tag:t,attributes:i={},children:a=[]}=e;return typeof e=="string"?QC(e):"<".concat(t," ").concat(kz(i),">").concat(a.map(ip).join(""),"</").concat(t,">")}function J2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var Lz=function(t,i){return function(a,c,p,m){return t.call(i,a,c,p,m)}},U0=function(t,i,a,c){var p=Object.keys(t),m=p.length,u=c!==void 0?Lz(i,c):i,S,P,M;for(a===void 0?(S=1,M=t[p[0]]):(S=0,M=a);S<m;S++)P=p[S],M=u(M,t[P],P,t);return M};function Dz(e){const t=[];let i=0;const a=e.length;for(;i<a;){const c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){const p=e.charCodeAt(i++);(p&64512)==56320?t.push(((c&1023)<<10)+(p&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function m_(e){const t=Dz(e);return t.length===1?t[0].toString(16):null}function Bz(e,t){const i=e.length;let a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function Y2(e){return Object.keys(e).reduce((t,i)=>{const a=e[i];return!!a.icon?t[a.iconName]=a.icon:t[i]=a,t},{})}function g_(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:a=!1}=i,c=Y2(t);typeof da.hooks.addPack=="function"&&!a?da.hooks.addPack(e,Y2(t)):da.styles[e]={...da.styles[e]||{},...c},e==="fas"&&g_("fa",t)}const{styles:Nu,shims:Nz}=da,Uz={[Sr]:Object.values(Hu[Sr]),[No]:Object.values(Hu[No]),[Uo]:Object.values(Hu[Uo])};let sx=null,rP={},iP={},oP={},sP={},aP={};const $z={[Sr]:Object.keys(Wu[Sr]),[No]:Object.keys(Wu[No]),[Uo]:Object.keys(Wu[Uo])};function Vz(e){return~Tz.indexOf(e)}function Gz(e,t){const i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!Vz(c)?c:null}const lP=()=>{const e=a=>U0(Nu,(c,p,m)=>(c[m]=U0(p,a,{}),c),{});rP=e((a,c,p)=>(c[3]&&(a[c[3]]=p),c[2]&&c[2].filter(u=>typeof u=="number").forEach(u=>{a[u.toString(16)]=p}),a)),iP=e((a,c,p)=>(a[p]=p,c[2]&&c[2].filter(u=>typeof u=="string").forEach(u=>{a[u]=p}),a)),aP=e((a,c,p)=>{const m=c[2];return a[p]=p,m.forEach(u=>{a[u]=p}),a});const t="far"in Nu||on.autoFetchSvg,i=U0(Nz,(a,c)=>{const p=c[0];let m=c[1];const u=c[2];return m==="far"&&!t&&(m="fas"),typeof p=="string"&&(a.names[p]={prefix:m,iconName:u}),typeof p=="number"&&(a.unicodes[p.toString(16)]={prefix:m,iconName:u}),a},{names:{},unicodes:{}});oP=i.names,sP=i.unicodes,sx=sy(on.styleDefault,{family:on.familyDefault})};Iz(e=>{sx=sy(e.styleDefault,{family:on.familyDefault})});lP();function ax(e,t){return(rP[e]||{})[t]}function Zz(e,t){return(iP[e]||{})[t]}function Zl(e,t){return(aP[e]||{})[t]}function uP(e){return oP[e]||{prefix:null,iconName:null}}function Wz(e){const t=sP[e],i=ax("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function iu(){return sx}const lx=()=>({prefix:null,iconName:null,rest:[]});function sy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:i=Sr}=t,a=Wu[i][e],c=Vf[i][e]||Vf[i][a],p=e in da.styles?e:null;return c||p||null}const Hz={[Sr]:Object.keys(Hu[Sr]),[No]:Object.keys(Hu[No]),[Uo]:Object.keys(Hu[Uo])};function ay(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:i=!1}=t,a={[Sr]:"".concat(on.cssPrefix,"-").concat(Sr),[No]:"".concat(on.cssPrefix,"-").concat(No),[Uo]:"".concat(on.cssPrefix,"-").concat(Uo)};let c=null,p=Sr;const m=ez.filter(S=>S!==VC);m.forEach(S=>{(e.includes(a[S])||e.some(P=>Hz[S].includes(P)))&&(p=S)});const u=e.reduce((S,P)=>{const M=Gz(on.cssPrefix,P);if(Nu[P]?(P=Uz[p].includes(P)?xz[p][P]:P,c=P,S.prefix=P):$z[p].indexOf(P)>-1?(c=P,S.prefix=sy(P,{family:p})):M?S.iconName=M:P!==on.replacementClass&&!m.some(b=>P===a[b])&&S.rest.push(P),!i&&S.prefix&&S.iconName){const b=c==="fa"?uP(S.iconName):{},C=Zl(S.prefix,S.iconName);b.prefix&&(c=null),S.iconName=b.iconName||C||S.iconName,S.prefix=b.prefix||S.prefix,S.prefix==="far"&&!Nu.far&&Nu.fas&&!on.autoFetchSvg&&(S.prefix="fas")}return S},lx());return(e.includes("fa-brands")||e.includes("fab"))&&(u.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(u.prefix="fad"),!u.prefix&&p===No&&(Nu.fass||on.autoFetchSvg)&&(u.prefix="fass",u.iconName=Zl(u.prefix,u.iconName)||u.iconName),!u.prefix&&p===Uo&&(Nu.fasds||on.autoFetchSvg)&&(u.prefix="fasds",u.iconName=Zl(u.prefix,u.iconName)||u.iconName),(u.prefix==="fa"||c==="fa")&&(u.prefix=iu()||"fas"),u}class Xz{constructor(){this.definitions={}}add(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];const c=i.reduce(this._pullDefinitions,{});Object.keys(c).forEach(p=>{this.definitions[p]={...this.definitions[p]||{},...c[p]},g_(p,c[p]);const m=Hu[Sr][p];m&&g_(m,c[p]),lP()})}reset(){this.definitions={}}_pullDefinitions(t,i){const a=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(a).map(c=>{const{prefix:p,iconName:m,icon:u}=a[c],S=u[2];t[p]||(t[p]={}),S.length>0&&S.forEach(P=>{typeof P=="string"&&(t[p][P]=u)}),t[p][m]=u}),t}}let Q2=[],ch={};const xh={},Kz=Object.keys(xh);function qz(e,t){let{mixoutsTo:i}=t;return Q2=e,ch={},Object.keys(xh).forEach(a=>{Kz.indexOf(a)===-1&&delete xh[a]}),Q2.forEach(a=>{const c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(p=>{typeof c[p]=="function"&&(i[p]=c[p]),typeof c[p]=="object"&&Object.keys(c[p]).forEach(m=>{i[p]||(i[p]={}),i[p][m]=c[p][m]})}),a.hooks){const p=a.hooks();Object.keys(p).forEach(m=>{ch[m]||(ch[m]=[]),ch[m].push(p[m])})}a.provides&&a.provides(xh)}),i}function y_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];return(ch[e]||[]).forEach(m=>{t=m.apply(null,[t,...a])}),t}function ec(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];(ch[e]||[]).forEach(p=>{p.apply(null,i)})}function ou(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return xh[e]?xh[e].apply(null,t):void 0}function v_(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const i=e.prefix||iu();if(t)return t=Zl(i,t)||t,J2(cP.definitions,i,t)||J2(da.styles,i,t)}const cP=new Xz,Jz=()=>{on.autoReplaceSvg=!1,on.observeMutations=!1,ec("noAuto")},Yz={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return tl?(ec("beforeI2svg",e),ou("pseudoElements2svg",e),ou("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;on.autoReplaceSvg===!1&&(on.autoReplaceSvg=!0),on.observeMutations=!0,Oz(()=>{eF({autoReplaceSvgRoot:t}),ec("watch",e)})}},Qz={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Zl(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=sy(e[0]);return{prefix:i,iconName:Zl(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(on.cssPrefix,"-"))>-1||e.match(wz))){const t=ay(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||iu(),iconName:Zl(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=iu();return{prefix:t,iconName:Zl(t,e)||e}}}},Zo={noAuto:Jz,config:on,dom:Yz,parse:Qz,library:cP,findIconDefinition:v_,toHtml:ip},eF=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=yr}=e;(Object.keys(da.styles).length>0||on.autoFetchSvg)&&tl&&on.autoReplaceSvg&&Zo.dom.i2svg({node:t})};function ly(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(i=>ip(i))}}),Object.defineProperty(e,"node",{get:function(){if(!tl)return;const i=yr.createElement("div");return i.innerHTML=e.html,i.children}}),e}function tF(e){let{children:t,main:i,mask:a,attributes:c,styles:p,transform:m}=e;if(ox(m)&&i.found&&!a.found){const{width:u,height:S}=i,P={x:u/S/2,y:.5};c.style=oy({...p,"transform-origin":"".concat(P.x+m.x/16,"em ").concat(P.y+m.y/16,"em")})}return[{tag:"svg",attributes:c,children:t}]}function nF(e){let{prefix:t,iconName:i,children:a,attributes:c,symbol:p}=e;const m=p===!0?"".concat(t,"-").concat(on.cssPrefix,"-").concat(i):p;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:{...c,id:m},children:a}]}]}function ux(e){const{icons:{main:t,mask:i},prefix:a,iconName:c,transform:p,symbol:m,title:u,maskId:S,titleId:P,extra:M,watchable:b=!1}=e,{width:C,height:R}=i.found?i:t,B=a==="fak",j=[on.replacementClass,c?"".concat(on.cssPrefix,"-").concat(c):""].filter(K=>M.classes.indexOf(K)===-1).filter(K=>K!==""||!!K).concat(M.classes).join(" ");let he={children:[],attributes:{...M.attributes,"data-prefix":a,"data-icon":c,class:j,role:M.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(C," ").concat(R)}};const q=B&&!~M.classes.indexOf("fa-fw")?{width:"".concat(C/R*16*.0625,"em")}:{};b&&(he.attributes[Qu]=""),u&&(he.children.push({tag:"title",attributes:{id:he.attributes["aria-labelledby"]||"title-".concat(P||Gf())},children:[u]}),delete he.attributes.title);const X={...he,prefix:a,iconName:c,main:t,mask:i,maskId:S,transform:p,symbol:m,styles:{...q,...M.styles}},{children:G,attributes:ae}=i.found&&t.found?ou("generateAbstractMask",X)||{children:[],attributes:{}}:ou("generateAbstractIcon",X)||{children:[],attributes:{}};return X.children=G,X.attributes=ae,m?nF(X):tF(X)}function eS(e){const{content:t,width:i,height:a,transform:c,title:p,extra:m,watchable:u=!1}=e,S={...m.attributes,...p?{title:p}:{},class:m.classes.join(" ")};u&&(S[Qu]="");const P={...m.styles};ox(c)&&(P.transform=Fz({transform:c,startCentered:!0,width:i,height:a}),P["-webkit-transform"]=P.transform);const M=oy(P);M.length>0&&(S.style=M);const b=[];return b.push({tag:"span",attributes:S,children:[t]}),p&&b.push({tag:"span",attributes:{class:"sr-only"},children:[p]}),b}function rF(e){const{content:t,title:i,extra:a}=e,c={...a.attributes,...i?{title:i}:{},class:a.classes.join(" ")},p=oy(a.styles);p.length>0&&(c.style=p);const m=[];return m.push({tag:"span",attributes:c,children:[t]}),i&&m.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),m}const{styles:$0}=da;function __(e){const t=e[0],i=e[1],[a]=e.slice(4);let c=null;return Array.isArray(a)?c={tag:"g",attributes:{class:"".concat(on.cssPrefix,"-").concat(B0.GROUP)},children:[{tag:"path",attributes:{class:"".concat(on.cssPrefix,"-").concat(B0.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(on.cssPrefix,"-").concat(B0.PRIMARY),fill:"currentColor",d:a[1]}}]}:c={tag:"path",attributes:{fill:"currentColor",d:a}},{found:!0,width:t,height:i,icon:c}}const iF={found:!1,width:512,height:512};function oF(e,t){!XC&&!on.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function x_(e,t){let i=t;return t==="fa"&&on.styleDefault!==null&&(t=iu()),new Promise((a,c)=>{if(i==="fa"){const p=uP(e)||{};e=p.iconName||e,t=p.prefix||t}if(e&&t&&$0[t]&&$0[t][e]){const p=$0[t][e];return a(__(p))}oF(e,t),a({...iF,icon:on.showMissingIcons&&e?ou("missingIconAbstract")||{}:{}})})}const tS=()=>{},w_=on.measurePerformance&&cm&&cm.mark&&cm.measure?cm:{mark:tS,measure:tS},tf='FA "6.6.0"',sF=e=>(w_.mark("".concat(tf," ").concat(e," begins")),()=>hP(e)),hP=e=>{w_.mark("".concat(tf," ").concat(e," ends")),w_.measure("".concat(tf," ").concat(e),"".concat(tf," ").concat(e," begins"),"".concat(tf," ").concat(e," ends"))};var cx={begin:sF,end:hP};const Rm=()=>{};function nS(e){return typeof(e.getAttribute?e.getAttribute(Qu):null)=="string"}function aF(e){const t=e.getAttribute?e.getAttribute(nx):null,i=e.getAttribute?e.getAttribute(rx):null;return t&&i}function lF(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(on.replacementClass)}function uF(){return on.autoReplaceSvg===!0?jm.replace:jm[on.autoReplaceSvg]||jm.replace}function cF(e){return yr.createElementNS("http://www.w3.org/2000/svg",e)}function hF(e){return yr.createElement(e)}function dP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:i=e.tag==="svg"?cF:hF}=t;if(typeof e=="string")return yr.createTextNode(e);const a=i(e.tag);return Object.keys(e.attributes||[]).forEach(function(p){a.setAttribute(p,e.attributes[p])}),(e.children||[]).forEach(function(p){a.appendChild(dP(p,{ceFn:i}))}),a}function dF(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const jm={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(i=>{t.parentNode.insertBefore(dP(i),t)}),t.getAttribute(Qu)===null&&on.keepOriginalSource){let i=yr.createComment(dF(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){const t=e[0],i=e[1];if(~ix(t).indexOf(on.replacementClass))return jm.replace(e);const a=new RegExp("".concat(on.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){const p=i[0].attributes.class.split(" ").reduce((m,u)=>(u===on.replacementClass||u.match(a)?m.toSvg.push(u):m.toNode.push(u),m),{toNode:[],toSvg:[]});i[0].attributes.class=p.toSvg.join(" "),p.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",p.toNode.join(" "))}const c=i.map(p=>ip(p)).join(`
`);t.setAttribute(Qu,""),t.innerHTML=c}};function rS(e){e()}function fP(e,t){const i=typeof t=="function"?t:Rm;if(e.length===0)i();else{let a=rS;on.mutateApproach===vz&&(a=ru.requestAnimationFrame||rS),a(()=>{const c=uF(),p=cx.begin("mutate");e.map(c),p(),i()})}}let hx=!1;function pP(){hx=!0}function b_(){hx=!1}let mg=null;function iS(e){if(!W2||!on.observeMutations)return;const{treeCallback:t=Rm,nodeCallback:i=Rm,pseudoElementsCallback:a=Rm,observeMutationsRoot:c=yr}=e;mg=new W2(p=>{if(hx)return;const m=iu();Uh(p).forEach(u=>{if(u.type==="childList"&&u.addedNodes.length>0&&!nS(u.addedNodes[0])&&(on.searchPseudoElements&&a(u.target),t(u.target)),u.type==="attributes"&&u.target.parentNode&&on.searchPseudoElements&&a(u.target.parentNode),u.type==="attributes"&&nS(u.target)&&~Ez.indexOf(u.attributeName))if(u.attributeName==="class"&&aF(u.target)){const{prefix:S,iconName:P}=ay(ix(u.target));u.target.setAttribute(nx,S||m),P&&u.target.setAttribute(rx,P)}else lF(u.target)&&i(u.target)})}),tl&&mg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function fF(){mg&&mg.disconnect()}function pF(e){const t=e.getAttribute("style");let i=[];return t&&(i=t.split(";").reduce((a,c)=>{const p=c.split(":"),m=p[0],u=p.slice(1);return m&&u.length>0&&(a[m]=u.join(":").trim()),a},{})),i}function mF(e){const t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"";let c=ay(ix(e));return c.prefix||(c.prefix=iu()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=Zz(c.prefix,e.innerText)||ax(c.prefix,m_(e.innerText))),!c.iconName&&on.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function gF(e){const t=Uh(e.attributes).reduce((c,p)=>(c.name!=="class"&&c.name!=="style"&&(c[p.name]=p.value),c),{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return on.autoA11y&&(i?t["aria-labelledby"]="".concat(on.replacementClass,"-title-").concat(a||Gf()):(t["aria-hidden"]="true",t.focusable="false")),t}function yF(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ha,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function oS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:i,prefix:a,rest:c}=mF(e),p=gF(e),m=y_("parseNodeAttributes",{},e);let u=t.styleParser?pF(e):[];return{iconName:i,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:a,transform:ha,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:c,styles:u,attributes:p},...m}}const{styles:vF}=da;function mP(e){const t=on.autoReplaceSvg==="nest"?oS(e,{styleParser:!1}):oS(e);return~t.extra.classes.indexOf(JC)?ou("generateLayersText",e,t):ou("generateSvgReplacementMutation",e,t)}let ma=new Set;KC.map(e=>{ma.add("fa-".concat(e))});Object.keys(Wu[Sr]).map(ma.add.bind(ma));Object.keys(Wu[No]).map(ma.add.bind(ma));Object.keys(Wu[Uo]).map(ma.add.bind(ma));ma=[...ma];function sS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!tl)return Promise.resolve();const i=yr.documentElement.classList,a=M=>i.add("".concat(K2,"-").concat(M)),c=M=>i.remove("".concat(K2,"-").concat(M)),p=on.autoFetchSvg?ma:KC.map(M=>"fa-".concat(M)).concat(Object.keys(vF));p.includes("fa")||p.push("fa");const m=[".".concat(JC,":not([").concat(Qu,"])")].concat(p.map(M=>".".concat(M,":not([").concat(Qu,"])"))).join(", ");if(m.length===0)return Promise.resolve();let u=[];try{u=Uh(e.querySelectorAll(m))}catch{}if(u.length>0)a("pending"),c("complete");else return Promise.resolve();const S=cx.begin("onTree"),P=u.reduce((M,b)=>{try{const C=mP(b);C&&M.push(C)}catch(C){XC||C.name==="MissingIcon"&&console.error(C)}return M},[]);return new Promise((M,b)=>{Promise.all(P).then(C=>{fP(C,()=>{a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),S(),M()})}).catch(C=>{S(),b(C)})})}function _F(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;mP(e).then(i=>{i&&fP([i],t)})}function xF(e){return function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||{}).icon?t:v_(t||{});let{mask:c}=i;return c&&(c=(c||{}).icon?c:v_(c||{})),e(a,{...i,mask:c})}}const wF=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:i=ha,symbol:a=!1,mask:c=null,maskId:p=null,title:m=null,titleId:u=null,classes:S=[],attributes:P={},styles:M={}}=t;if(!e)return;const{prefix:b,iconName:C,icon:R}=e;return ly({type:"icon",...e},()=>(ec("beforeDOMElementCreation",{iconDefinition:e,params:t}),on.autoA11y&&(m?P["aria-labelledby"]="".concat(on.replacementClass,"-title-").concat(u||Gf()):(P["aria-hidden"]="true",P.focusable="false")),ux({icons:{main:__(R),mask:c?__(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:C,transform:{...ha,...i},symbol:a,title:m,maskId:p,titleId:u,extra:{attributes:P,styles:M,classes:S}})))};var bF={mixout(){return{icon:xF(wF)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=sS,e.nodeCallback=_F,e}}},provides(e){e.i2svg=function(t){const{node:i=yr,callback:a=()=>{}}=t;return sS(i,a)},e.generateSvgReplacementMutation=function(t,i){const{iconName:a,title:c,titleId:p,prefix:m,transform:u,symbol:S,mask:P,maskId:M,extra:b}=i;return new Promise((C,R)=>{Promise.all([x_(a,m),P.iconName?x_(P.iconName,P.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(B=>{let[j,he]=B;C([t,ux({icons:{main:j,mask:he},prefix:m,iconName:a,transform:u,symbol:S,maskId:M,title:c,titleId:p,extra:b,watchable:!0})])}).catch(R)})},e.generateAbstractIcon=function(t){let{children:i,attributes:a,main:c,transform:p,styles:m}=t;const u=oy(m);u.length>0&&(a.style=u);let S;return ox(p)&&(S=ou("generateAbstractTransformGrouping",{main:c,transform:p,containerWidth:c.width,iconWidth:c.width})),i.push(S||c.icon),{children:i,attributes:a}}}},SF={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:i=[]}=t;return ly({type:"layer"},()=>{ec("beforeDOMElementCreation",{assembler:e,params:t});let a=[];return e(c=>{Array.isArray(c)?c.map(p=>{a=a.concat(p.abstract)}):a=a.concat(c.abstract)}),[{tag:"span",attributes:{class:["".concat(on.cssPrefix,"-layers"),...i].join(" ")},children:a}]})}}}},EF={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:i=null,classes:a=[],attributes:c={},styles:p={}}=t;return ly({type:"counter",content:e},()=>(ec("beforeDOMElementCreation",{content:e,params:t}),rF({content:e.toString(),title:i,extra:{attributes:c,styles:p,classes:["".concat(on.cssPrefix,"-layers-counter"),...a]}})))}}}},TF={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:i=ha,title:a=null,classes:c=[],attributes:p={},styles:m={}}=t;return ly({type:"text",content:e},()=>(ec("beforeDOMElementCreation",{content:e,params:t}),eS({content:e,transform:{...ha,...i},title:a,extra:{attributes:p,styles:m,classes:["".concat(on.cssPrefix,"-layers-text"),...c]}})))}}},provides(e){e.generateLayersText=function(t,i){const{title:a,transform:c,extra:p}=i;let m=null,u=null;if($C){const S=parseInt(getComputedStyle(t).fontSize,10),P=t.getBoundingClientRect();m=P.width/S,u=P.height/S}return on.autoA11y&&!a&&(p.attributes["aria-hidden"]="true"),Promise.resolve([t,eS({content:t.innerHTML,width:m,height:u,transform:c,title:a,extra:p,watchable:!0})])}}};const CF=new RegExp('"',"ug"),aS=[1105920,1112319],lS={FontAwesome:{normal:"fas",400:"fas"},...sz,...oz,...pz},S_=Object.keys(lS).reduce((e,t)=>(e[t.toLowerCase()]=lS[t],e),{}),PF=Object.keys(S_).reduce((e,t)=>{const i=S_[t];return e[t]=i[900]||[...Object.entries(i)][0][1],e},{});function IF(e){const t=e.replace(CF,""),i=Bz(t,0),a=i>=aS[0]&&i<=aS[1],c=t.length===2?t[0]===t[1]:!1;return{value:m_(c?t[0]:t),isSecondary:a||c}}function AF(e,t){const i=e.replace(/^['"]|['"]$/g,"").toLowerCase(),a=parseInt(t),c=isNaN(a)?"normal":a;return(S_[i]||{})[c]||PF[i]}function uS(e,t){const i="".concat(yz).concat(t.replace(":","-"));return new Promise((a,c)=>{if(e.getAttribute(i)!==null)return a();const m=Uh(e.children).filter(C=>C.getAttribute(h_)===t)[0],u=ru.getComputedStyle(e,t),S=u.getPropertyValue("font-family"),P=S.match(bz),M=u.getPropertyValue("font-weight"),b=u.getPropertyValue("content");if(m&&!P)return e.removeChild(m),a();if(P&&b!=="none"&&b!==""){const C=u.getPropertyValue("content");let R=AF(S,M);const{value:B,isSecondary:j}=IF(C),he=P[0].startsWith("FontAwesome");let q=ax(R,B),X=q;if(he){const G=Wz(B);G.iconName&&G.prefix&&(q=G.iconName,R=G.prefix)}if(q&&!j&&(!m||m.getAttribute(nx)!==R||m.getAttribute(rx)!==X)){e.setAttribute(i,X),m&&e.removeChild(m);const G=yF(),{extra:ae}=G;ae.attributes[h_]=t,x_(q,R).then(K=>{const W=ux({...G,icons:{main:K,mask:lx()},prefix:R,iconName:X,extra:ae,watchable:!0}),E=yr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(E,e.firstChild):e.appendChild(E),E.outerHTML=W.map(O=>ip(O)).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function MF(e){return Promise.all([uS(e,"::before"),uS(e,"::after")])}function kF(e){return e.parentNode!==document.head&&!~_z.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(h_)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function cS(e){if(tl)return new Promise((t,i)=>{const a=Uh(e.querySelectorAll("*")).filter(kF).map(MF),c=cx.begin("searchPseudoElements");pP(),Promise.all(a).then(()=>{c(),b_(),t()}).catch(()=>{c(),b_(),i()})})}var zF={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=cS,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:i=yr}=t;on.searchPseudoElements&&cS(i)}}};let hS=!1;var FF={mixout(){return{dom:{unwatch(){pP(),hS=!0}}}},hooks(){return{bootstrap(){iS(y_("mutationObserverCallbacks",{}))},noAuto(){fF()},watch(e){const{observeMutationsRoot:t}=e;hS?b_():iS(y_("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const dS=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((i,a)=>{const c=a.toLowerCase().split("-"),p=c[0];let m=c.slice(1).join("-");if(p&&m==="h")return i.flipX=!0,i;if(p&&m==="v")return i.flipY=!0,i;if(m=parseFloat(m),isNaN(m))return i;switch(p){case"grow":i.size=i.size+m;break;case"shrink":i.size=i.size-m;break;case"left":i.x=i.x-m;break;case"right":i.x=i.x+m;break;case"up":i.y=i.y-m;break;case"down":i.y=i.y+m;break;case"rotate":i.rotate=i.rotate+m;break}return i},t)};var RF={mixout(){return{parse:{transform:e=>dS(e)}}},hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-transform");return i&&(e.transform=dS(i)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:i,transform:a,containerWidth:c,iconWidth:p}=t;const m={transform:"translate(".concat(c/2," 256)")},u="translate(".concat(a.x*32,", ").concat(a.y*32,") "),S="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),P="rotate(".concat(a.rotate," 0 0)"),M={transform:"".concat(u," ").concat(S," ").concat(P)},b={transform:"translate(".concat(p/2*-1," -256)")},C={outer:m,inner:M,path:b};return{tag:"g",attributes:{...C.outer},children:[{tag:"g",attributes:{...C.inner},children:[{tag:i.icon.tag,children:i.icon.children,attributes:{...i.icon.attributes,...C.path}}]}]}}}};const V0={x:0,y:0,width:"100%",height:"100%"};function fS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function jF(e){return e.tag==="g"?e.children:[e]}var OF={hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-mask"),a=i?ay(i.split(" ").map(c=>c.trim())):lx();return a.prefix||(a.prefix=iu()),e.mask=a,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:i,attributes:a,main:c,mask:p,maskId:m,transform:u}=t;const{width:S,icon:P}=c,{width:M,icon:b}=p,C=zz({transform:u,containerWidth:M,iconWidth:S}),R={tag:"rect",attributes:{...V0,fill:"white"}},B=P.children?{children:P.children.map(fS)}:{},j={tag:"g",attributes:{...C.inner},children:[fS({tag:P.tag,attributes:{...P.attributes,...C.path},...B})]},he={tag:"g",attributes:{...C.outer},children:[j]},q="mask-".concat(m||Gf()),X="clip-".concat(m||Gf()),G={tag:"mask",attributes:{...V0,id:q,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"},children:[R,he]},ae={tag:"defs",children:[{tag:"clipPath",attributes:{id:X},children:jF(b)},G]};return i.push(ae,{tag:"rect",attributes:{fill:"currentColor","clip-path":"url(#".concat(X,")"),mask:"url(#".concat(q,")"),...V0}}),{children:i,attributes:a}}}},LF={provides(e){let t=!1;ru.matchMedia&&(t=ru.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const i=[],a={fill:"currentColor"},c={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:{...a,d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}});const p={...c,attributeName:"opacity"},m={tag:"circle",attributes:{...a,cx:"256",cy:"364",r:"28"},children:[]};return t||m.children.push({tag:"animate",attributes:{...c,attributeName:"r",values:"28;14;28;28;14;28;"}},{tag:"animate",attributes:{...p,values:"1;0;1;1;0;1;"}}),i.push(m),i.push({tag:"path",attributes:{...a,opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"},children:t?[]:[{tag:"animate",attributes:{...p,values:"1;0;0;0;0;1;"}}]}),t||i.push({tag:"path",attributes:{...a,opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"},children:[{tag:"animate",attributes:{...p,values:"0;0;1;1;0;0;"}}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},DF={hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-symbol"),a=i===null?!1:i===""?!0:i;return e.symbol=a,e}}}},BF=[jz,bF,SF,EF,TF,zF,FF,RF,OF,LF,DF];qz(BF,{mixoutsTo:Zo});Zo.noAuto;Zo.config;Zo.library;Zo.dom;const E_=Zo.parse;Zo.findIconDefinition;Zo.toHtml;const NF=Zo.icon;Zo.layer;Zo.text;Zo.counter;var gP={exports:{}},UF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$F=UF,VF=$F;function yP(){}function vP(){}vP.resetWarningCache=yP;var GF=function(){function e(a,c,p,m,u,S){if(S!==VF){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:vP,resetWarningCache:yP};return i.PropTypes=i,i};gP.exports=GF();var ZF=gP.exports;const Rn=qf(ZF);function pS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function sa(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(i),!0).forEach(function(a){hh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pS(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function hh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function WF(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,p;for(p=0;p<a.length;p++)c=a[p],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function HF(e,t){if(e==null)return{};var i=WF(e,t),a,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(c=0;c<p.length;c++)a=p[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function T_(e){return XF(e)||KF(e)||qF(e)||JF()}function XF(e){if(Array.isArray(e))return C_(e)}function KF(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qF(e,t){if(e){if(typeof e=="string")return C_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return C_(e,t)}}function C_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function JF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YF(e){var t,i=e.beat,a=e.fade,c=e.beatFade,p=e.bounce,m=e.shake,u=e.flash,S=e.spin,P=e.spinPulse,M=e.spinReverse,b=e.pulse,C=e.fixedWidth,R=e.inverse,B=e.border,j=e.listItem,he=e.flip,q=e.size,X=e.rotation,G=e.pull,ae=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":p,"fa-shake":m,"fa-flash":u,"fa-spin":S,"fa-spin-reverse":M,"fa-spin-pulse":P,"fa-pulse":b,"fa-fw":C,"fa-inverse":R,"fa-border":B,"fa-li":j,"fa-flip":he===!0,"fa-flip-horizontal":he==="horizontal"||he==="both","fa-flip-vertical":he==="vertical"||he==="both"},hh(t,"fa-".concat(q),typeof q<"u"&&q!==null),hh(t,"fa-rotate-".concat(X),typeof X<"u"&&X!==null&&X!==0),hh(t,"fa-pull-".concat(G),typeof G<"u"&&G!==null),hh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ae).map(function(K){return ae[K]?K:null}).filter(function(K){return K})}function QF(e){return e=e-0,e===e}function _P(e){return QF(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var eR=["style"];function tR(e){return e.charAt(0).toUpperCase()+e.slice(1)}function nR(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=_P(i.slice(0,a)),p=i.slice(a+1).trim();return c.startsWith("webkit")?t[tR(c)]=p:t[c]=p,t},{})}function xP(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(S){return xP(e,S)}),c=Object.keys(t.attributes||{}).reduce(function(S,P){var M=t.attributes[P];switch(P){case"class":S.attrs.className=M,delete t.attributes.class;break;case"style":S.attrs.style=nR(M);break;default:P.indexOf("aria-")===0||P.indexOf("data-")===0?S.attrs[P.toLowerCase()]=M:S.attrs[_P(P)]=M}return S},{attrs:{}}),p=i.style,m=p===void 0?{}:p,u=HF(i,eR);return c.attrs.style=sa(sa({},c.attrs.style),m),e.apply(void 0,[t.tag,sa(sa({},c.attrs),u)].concat(T_(a)))}var wP=!1;try{wP=!0}catch{}function rR(){if(!wP&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function mS(e){if(e&&gg(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(E_.icon)return E_.icon(e);if(e===null)return null;if(e&&gg(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function G0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?hh({},e,t):{}}var gS={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},eu=u1.forwardRef(function(e,t){var i=sa(sa({},gS),e),a=i.icon,c=i.mask,p=i.symbol,m=i.className,u=i.title,S=i.titleId,P=i.maskId,M=mS(a),b=G0("classes",[].concat(T_(YF(i)),T_((m||"").split(" ")))),C=G0("transform",typeof i.transform=="string"?E_.transform(i.transform):i.transform),R=G0("mask",mS(c)),B=NF(M,sa(sa(sa(sa({},b),C),R),{},{symbol:p,title:u,titleId:S,maskId:P}));if(!B)return rR("Could not find icon",M),null;var j=B.abstract,he={ref:t};return Object.keys(i).forEach(function(q){gS.hasOwnProperty(q)||(he[q]=i[q])}),iR(j[0],he)});eu.displayName="FontAwesomeIcon";eu.propTypes={beat:Rn.bool,border:Rn.bool,beatFade:Rn.bool,bounce:Rn.bool,className:Rn.string,fade:Rn.bool,flash:Rn.bool,mask:Rn.oneOfType([Rn.object,Rn.array,Rn.string]),maskId:Rn.string,fixedWidth:Rn.bool,inverse:Rn.bool,flip:Rn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Rn.oneOfType([Rn.object,Rn.array,Rn.string]),listItem:Rn.bool,pull:Rn.oneOf(["right","left"]),pulse:Rn.bool,rotation:Rn.oneOf([0,90,180,270]),shake:Rn.bool,size:Rn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Rn.bool,spinPulse:Rn.bool,spinReverse:Rn.bool,symbol:Rn.oneOfType([Rn.bool,Rn.string]),title:Rn.string,titleId:Rn.string,transform:Rn.oneOfType([Rn.string,Rn.object]),swapOpacity:Rn.bool};var iR=xP.bind(null,u1.createElement);const oR={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},P_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},sR={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},aR=sR;function hm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bP={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,p){function m(P,M){if(!c[P]){if(!a[P]){var b=typeof hm=="function"&&hm;if(!M&&b)return b(P,!0);if(u)return u(P,!0);var C=new Error("Cannot find module '"+P+"'");throw C.code="MODULE_NOT_FOUND",C}var R=c[P]={exports:{}};a[P][0].call(R.exports,function(B){var j=a[P][1][B];return m(j||B)},R,R.exports,i,a,c,p)}return c[P].exports}for(var u=typeof hm=="function"&&hm,S=0;S<p.length;S++)m(p[S]);return m}return i}()({1:[function(i,a,c){c.byteLength=C,c.toByteArray=B,c.fromByteArray=q;for(var p=[],m=[],u=typeof Uint8Array<"u"?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=0,M=S.length;P<M;++P)p[P]=S[P],m[S.charCodeAt(P)]=P;m[45]=62,m[95]=63;function b(X){var G=X.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=X.indexOf("=");ae===-1&&(ae=G);var K=ae===G?0:4-ae%4;return[ae,K]}function C(X){var G=b(X),ae=G[0],K=G[1];return(ae+K)*3/4-K}function R(X,G,ae){return(G+ae)*3/4-ae}function B(X){var G,ae=b(X),K=ae[0],W=ae[1],E=new u(R(X,K,W)),O=0,D=W>0?K-4:K,ee;for(ee=0;ee<D;ee+=4)G=m[X.charCodeAt(ee)]<<18|m[X.charCodeAt(ee+1)]<<12|m[X.charCodeAt(ee+2)]<<6|m[X.charCodeAt(ee+3)],E[O++]=G>>16&255,E[O++]=G>>8&255,E[O++]=G&255;return W===2&&(G=m[X.charCodeAt(ee)]<<2|m[X.charCodeAt(ee+1)]>>4,E[O++]=G&255),W===1&&(G=m[X.charCodeAt(ee)]<<10|m[X.charCodeAt(ee+1)]<<4|m[X.charCodeAt(ee+2)]>>2,E[O++]=G>>8&255,E[O++]=G&255),E}function j(X){return p[X>>18&63]+p[X>>12&63]+p[X>>6&63]+p[X&63]}function he(X,G,ae){for(var K,W=[],E=G;E<ae;E+=3)K=(X[E]<<16&16711680)+(X[E+1]<<8&65280)+(X[E+2]&255),W.push(j(K));return W.join("")}function q(X){for(var G,ae=X.length,K=ae%3,W=[],E=16383,O=0,D=ae-K;O<D;O+=E)W.push(he(X,O,O+E>D?D:O+E));return K===1?(G=X[ae-1],W.push(p[G>>2]+p[G<<4&63]+"==")):K===2&&(G=(X[ae-2]<<8)+X[ae-1],W.push(p[G>>10]+p[G>>4&63]+p[G<<2&63]+"=")),W.join("")}},{}],2:[function(i,a,c){(function(p){(function(){var m=i("base64-js"),u=i("ieee754");c.Buffer=b,c.SlowBuffer=K,c.INSPECT_MAX_BYTES=50;var S=2147483647;c.kMaxLength=S,b.TYPED_ARRAY_SUPPORT=P(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function P(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function M(Se){if(Se>S)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var N=new Uint8Array(Se);return N.__proto__=b.prototype,N}function b(Se,N,L){if(typeof Se=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(Se)}return C(Se,N,L)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function C(Se,N,L){if(typeof Se=="string")return he(Se,N);if(ArrayBuffer.isView(Se))return q(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(un(Se,ArrayBuffer)||Se&&un(Se.buffer,ArrayBuffer))return X(Se,N,L);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=Se.valueOf&&Se.valueOf();if(ye!=null&&ye!==Se)return b.from(ye,N,L);var Xe=G(Se);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return b.from(Se[Symbol.toPrimitive]("string"),N,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}b.from=function(Se,N,L){return C(Se,N,L)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function R(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function B(Se,N,L){return R(Se),Se<=0?M(Se):N!==void 0?typeof L=="string"?M(Se).fill(N,L):M(Se).fill(N):M(Se)}b.alloc=function(Se,N,L){return B(Se,N,L)};function j(Se){return R(Se),M(Se<0?0:ae(Se)|0)}b.allocUnsafe=function(Se){return j(Se)},b.allocUnsafeSlow=function(Se){return j(Se)};function he(Se,N){if((typeof N!="string"||N==="")&&(N="utf8"),!b.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var L=W(Se,N)|0,ye=M(L),Xe=ye.write(Se,N);return Xe!==L&&(ye=ye.slice(0,Xe)),ye}function q(Se){for(var N=Se.length<0?0:ae(Se.length)|0,L=M(N),ye=0;ye<N;ye+=1)L[ye]=Se[ye]&255;return L}function X(Se,N,L){if(N<0||Se.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<N+(L||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return N===void 0&&L===void 0?ye=new Uint8Array(Se):L===void 0?ye=new Uint8Array(Se,N):ye=new Uint8Array(Se,N,L),ye.__proto__=b.prototype,ye}function G(Se){if(b.isBuffer(Se)){var N=ae(Se.length)|0,L=M(N);return L.length===0||Se.copy(L,0,0,N),L}if(Se.length!==void 0)return typeof Se.length!="number"||Vt(Se.length)?M(0):q(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return q(Se.data)}function ae(Se){if(Se>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return Se|0}function K(Se){return+Se!=Se&&(Se=0),b.alloc(+Se)}b.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==b.prototype},b.compare=function(N,L){if(un(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),un(L,Uint8Array)&&(L=b.from(L,L.offset,L.byteLength)),!b.isBuffer(N)||!b.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===L)return 0;for(var ye=N.length,Xe=L.length,tt=0,ht=Math.min(ye,Xe);tt<ht;++tt)if(N[tt]!==L[tt]){ye=N[tt],Xe=L[tt];break}return ye<Xe?-1:Xe<ye?1:0},b.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(N,L){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return b.alloc(0);var ye;if(L===void 0)for(L=0,ye=0;ye<N.length;++ye)L+=N[ye].length;var Xe=b.allocUnsafe(L),tt=0;for(ye=0;ye<N.length;++ye){var ht=N[ye];if(un(ht,Uint8Array)&&(ht=b.from(ht)),!b.isBuffer(ht))throw new TypeError('"list" argument must be an Array of Buffers');ht.copy(Xe,tt),tt+=ht.length}return Xe};function W(Se,N){if(b.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||un(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var L=Se.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&L===0)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return Zt(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return et(Se).length;default:if(Xe)return ye?-1:Zt(Se).length;N=(""+N).toLowerCase(),Xe=!0}}b.byteLength=W;function E(Se,N,L){var ye=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,N>>>=0,L<=N))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return Ae(this,N,L);case"utf8":case"utf-8":return ne(this,N,L);case"ascii":return Ce(this,N,L);case"latin1":case"binary":return Ue(this,N,L);case"base64":return Y(this,N,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,N,L);default:if(ye)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),ye=!0}}b.prototype._isBuffer=!0;function O(Se,N,L){var ye=Se[N];Se[N]=Se[L],Se[L]=ye}b.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<N;L+=2)O(this,L,L+1);return this},b.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<N;L+=4)O(this,L,L+3),O(this,L+1,L+2);return this},b.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<N;L+=8)O(this,L,L+7),O(this,L+1,L+6),O(this,L+2,L+5),O(this,L+3,L+4);return this},b.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?ne(this,0,N):E.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(N){if(!b.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:b.compare(this,N)===0},b.prototype.inspect=function(){var N="",L=c.INSPECT_MAX_BYTES;return N=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(N+=" ... "),"<Buffer "+N+">"},b.prototype.compare=function(N,L,ye,Xe,tt){if(un(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(L===void 0&&(L=0),ye===void 0&&(ye=N?N.length:0),Xe===void 0&&(Xe=0),tt===void 0&&(tt=this.length),L<0||ye>N.length||Xe<0||tt>this.length)throw new RangeError("out of range index");if(Xe>=tt&&L>=ye)return 0;if(Xe>=tt)return-1;if(L>=ye)return 1;if(L>>>=0,ye>>>=0,Xe>>>=0,tt>>>=0,this===N)return 0;for(var ht=tt-Xe,le=ye-L,k=Math.min(ht,le),$=this.slice(Xe,tt),Ee=N.slice(L,ye),Ve=0;Ve<k;++Ve)if($[Ve]!==Ee[Ve]){ht=$[Ve],le=Ee[Ve];break}return ht<le?-1:le<ht?1:0};function D(Se,N,L,ye,Xe){if(Se.length===0)return-1;if(typeof L=="string"?(ye=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,Vt(L)&&(L=Xe?0:Se.length-1),L<0&&(L=Se.length+L),L>=Se.length){if(Xe)return-1;L=Se.length-1}else if(L<0)if(Xe)L=0;else return-1;if(typeof N=="string"&&(N=b.from(N,ye)),b.isBuffer(N))return N.length===0?-1:ee(Se,N,L,ye,Xe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(Se,N,L):Uint8Array.prototype.lastIndexOf.call(Se,N,L):ee(Se,[N],L,ye,Xe);throw new TypeError("val must be string, number or Buffer")}function ee(Se,N,L,ye,Xe){var tt=1,ht=Se.length,le=N.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(Se.length<2||N.length<2)return-1;tt=2,ht/=2,le/=2,L/=2}function k(Ge,Et){return tt===1?Ge[Et]:Ge.readUInt16BE(Et*tt)}var $;if(Xe){var Ee=-1;for($=L;$<ht;$++)if(k(Se,$)===k(N,Ee===-1?0:$-Ee)){if(Ee===-1&&(Ee=$),$-Ee+1===le)return Ee*tt}else Ee!==-1&&($-=$-Ee),Ee=-1}else for(L+le>ht&&(L=ht-le),$=L;$>=0;$--){for(var Ve=!0,rt=0;rt<le;rt++)if(k(Se,$+rt)!==k(N,rt)){Ve=!1;break}if(Ve)return $}return-1}b.prototype.includes=function(N,L,ye){return this.indexOf(N,L,ye)!==-1},b.prototype.indexOf=function(N,L,ye){return D(this,N,L,ye,!0)},b.prototype.lastIndexOf=function(N,L,ye){return D(this,N,L,ye,!1)};function H(Se,N,L,ye){L=Number(L)||0;var Xe=Se.length-L;ye?(ye=Number(ye),ye>Xe&&(ye=Xe)):ye=Xe;var tt=N.length;ye>tt/2&&(ye=tt/2);for(var ht=0;ht<ye;++ht){var le=parseInt(N.substr(ht*2,2),16);if(Vt(le))return ht;Se[L+ht]=le}return ht}function ve(Se,N,L,ye){return _n(Zt(N,Se.length-L),Se,L,ye)}function _e(Se,N,L,ye){return _n(Wt(N),Se,L,ye)}function pe(Se,N,L,ye){return _e(Se,N,L,ye)}function oe(Se,N,L,ye){return _n(et(N),Se,L,ye)}function ce(Se,N,L,ye){return _n(ln(N,Se.length-L),Se,L,ye)}b.prototype.write=function(N,L,ye,Xe){if(L===void 0)Xe="utf8",ye=this.length,L=0;else if(ye===void 0&&typeof L=="string")Xe=L,ye=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(ye)?(ye=ye>>>0,Xe===void 0&&(Xe="utf8")):(Xe=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-L;if((ye===void 0||ye>tt)&&(ye=tt),N.length>0&&(ye<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ht=!1;;)switch(Xe){case"hex":return H(this,N,L,ye);case"utf8":case"utf-8":return ve(this,N,L,ye);case"ascii":return _e(this,N,L,ye);case"latin1":case"binary":return pe(this,N,L,ye);case"base64":return oe(this,N,L,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,N,L,ye);default:if(ht)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ht=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(Se,N,L){return N===0&&L===Se.length?m.fromByteArray(Se):m.fromByteArray(Se.slice(N,L))}function ne(Se,N,L){L=Math.min(Se.length,L);for(var ye=[],Xe=N;Xe<L;){var tt=Se[Xe],ht=null,le=tt>239?4:tt>223?3:tt>191?2:1;if(Xe+le<=L){var k,$,Ee,Ve;switch(le){case 1:tt<128&&(ht=tt);break;case 2:k=Se[Xe+1],(k&192)===128&&(Ve=(tt&31)<<6|k&63,Ve>127&&(ht=Ve));break;case 3:k=Se[Xe+1],$=Se[Xe+2],(k&192)===128&&($&192)===128&&(Ve=(tt&15)<<12|(k&63)<<6|$&63,Ve>2047&&(Ve<55296||Ve>57343)&&(ht=Ve));break;case 4:k=Se[Xe+1],$=Se[Xe+2],Ee=Se[Xe+3],(k&192)===128&&($&192)===128&&(Ee&192)===128&&(Ve=(tt&15)<<18|(k&63)<<12|($&63)<<6|Ee&63,Ve>65535&&Ve<1114112&&(ht=Ve))}}ht===null?(ht=65533,le=1):ht>65535&&(ht-=65536,ye.push(ht>>>10&1023|55296),ht=56320|ht&1023),ye.push(ht),Xe+=le}return be(ye)}var de=4096;function be(Se){var N=Se.length;if(N<=de)return String.fromCharCode.apply(String,Se);for(var L="",ye=0;ye<N;)L+=String.fromCharCode.apply(String,Se.slice(ye,ye+=de));return L}function Ce(Se,N,L){var ye="";L=Math.min(Se.length,L);for(var Xe=N;Xe<L;++Xe)ye+=String.fromCharCode(Se[Xe]&127);return ye}function Ue(Se,N,L){var ye="";L=Math.min(Se.length,L);for(var Xe=N;Xe<L;++Xe)ye+=String.fromCharCode(Se[Xe]);return ye}function Ae(Se,N,L){var ye=Se.length;(!N||N<0)&&(N=0),(!L||L<0||L>ye)&&(L=ye);for(var Xe="",tt=N;tt<L;++tt)Xe+=xt(Se[tt]);return Xe}function Fe(Se,N,L){for(var ye=Se.slice(N,L),Xe="",tt=0;tt<ye.length;tt+=2)Xe+=String.fromCharCode(ye[tt]+ye[tt+1]*256);return Xe}b.prototype.slice=function(N,L){var ye=this.length;N=~~N,L=L===void 0?ye:~~L,N<0?(N+=ye,N<0&&(N=0)):N>ye&&(N=ye),L<0?(L+=ye,L<0&&(L=0)):L>ye&&(L=ye),L<N&&(L=N);var Xe=this.subarray(N,L);return Xe.__proto__=b.prototype,Xe};function We(Se,N,L){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+N>L)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(N,L,ye){N=N>>>0,L=L>>>0,ye||We(N,L,this.length);for(var Xe=this[N],tt=1,ht=0;++ht<L&&(tt*=256);)Xe+=this[N+ht]*tt;return Xe},b.prototype.readUIntBE=function(N,L,ye){N=N>>>0,L=L>>>0,ye||We(N,L,this.length);for(var Xe=this[N+--L],tt=1;L>0&&(tt*=256);)Xe+=this[N+--L]*tt;return Xe},b.prototype.readUInt8=function(N,L){return N=N>>>0,L||We(N,1,this.length),this[N]},b.prototype.readUInt16LE=function(N,L){return N=N>>>0,L||We(N,2,this.length),this[N]|this[N+1]<<8},b.prototype.readUInt16BE=function(N,L){return N=N>>>0,L||We(N,2,this.length),this[N]<<8|this[N+1]},b.prototype.readUInt32LE=function(N,L){return N=N>>>0,L||We(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},b.prototype.readUInt32BE=function(N,L){return N=N>>>0,L||We(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},b.prototype.readIntLE=function(N,L,ye){N=N>>>0,L=L>>>0,ye||We(N,L,this.length);for(var Xe=this[N],tt=1,ht=0;++ht<L&&(tt*=256);)Xe+=this[N+ht]*tt;return tt*=128,Xe>=tt&&(Xe-=Math.pow(2,8*L)),Xe},b.prototype.readIntBE=function(N,L,ye){N=N>>>0,L=L>>>0,ye||We(N,L,this.length);for(var Xe=L,tt=1,ht=this[N+--Xe];Xe>0&&(tt*=256);)ht+=this[N+--Xe]*tt;return tt*=128,ht>=tt&&(ht-=Math.pow(2,8*L)),ht},b.prototype.readInt8=function(N,L){return N=N>>>0,L||We(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},b.prototype.readInt16LE=function(N,L){N=N>>>0,L||We(N,2,this.length);var ye=this[N]|this[N+1]<<8;return ye&32768?ye|4294901760:ye},b.prototype.readInt16BE=function(N,L){N=N>>>0,L||We(N,2,this.length);var ye=this[N+1]|this[N]<<8;return ye&32768?ye|4294901760:ye},b.prototype.readInt32LE=function(N,L){return N=N>>>0,L||We(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},b.prototype.readInt32BE=function(N,L){return N=N>>>0,L||We(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},b.prototype.readFloatLE=function(N,L){return N=N>>>0,L||We(N,4,this.length),u.read(this,N,!0,23,4)},b.prototype.readFloatBE=function(N,L){return N=N>>>0,L||We(N,4,this.length),u.read(this,N,!1,23,4)},b.prototype.readDoubleLE=function(N,L){return N=N>>>0,L||We(N,8,this.length),u.read(this,N,!0,52,8)},b.prototype.readDoubleBE=function(N,L){return N=N>>>0,L||We(N,8,this.length),u.read(this,N,!1,52,8)};function Ze(Se,N,L,ye,Xe,tt){if(!b.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<tt)throw new RangeError('"value" argument is out of bounds');if(L+ye>Se.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(N,L,ye,Xe){if(N=+N,L=L>>>0,ye=ye>>>0,!Xe){var tt=Math.pow(2,8*ye)-1;Ze(this,N,L,ye,tt,0)}var ht=1,le=0;for(this[L]=N&255;++le<ye&&(ht*=256);)this[L+le]=N/ht&255;return L+ye},b.prototype.writeUIntBE=function(N,L,ye,Xe){if(N=+N,L=L>>>0,ye=ye>>>0,!Xe){var tt=Math.pow(2,8*ye)-1;Ze(this,N,L,ye,tt,0)}var ht=ye-1,le=1;for(this[L+ht]=N&255;--ht>=0&&(le*=256);)this[L+ht]=N/le&255;return L+ye},b.prototype.writeUInt8=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,1,255,0),this[L]=N&255,L+1},b.prototype.writeUInt16LE=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,2,65535,0),this[L]=N&255,this[L+1]=N>>>8,L+2},b.prototype.writeUInt16BE=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,2,65535,0),this[L]=N>>>8,this[L+1]=N&255,L+2},b.prototype.writeUInt32LE=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,4,4294967295,0),this[L+3]=N>>>24,this[L+2]=N>>>16,this[L+1]=N>>>8,this[L]=N&255,L+4},b.prototype.writeUInt32BE=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,4,4294967295,0),this[L]=N>>>24,this[L+1]=N>>>16,this[L+2]=N>>>8,this[L+3]=N&255,L+4},b.prototype.writeIntLE=function(N,L,ye,Xe){if(N=+N,L=L>>>0,!Xe){var tt=Math.pow(2,8*ye-1);Ze(this,N,L,ye,tt-1,-tt)}var ht=0,le=1,k=0;for(this[L]=N&255;++ht<ye&&(le*=256);)N<0&&k===0&&this[L+ht-1]!==0&&(k=1),this[L+ht]=(N/le>>0)-k&255;return L+ye},b.prototype.writeIntBE=function(N,L,ye,Xe){if(N=+N,L=L>>>0,!Xe){var tt=Math.pow(2,8*ye-1);Ze(this,N,L,ye,tt-1,-tt)}var ht=ye-1,le=1,k=0;for(this[L+ht]=N&255;--ht>=0&&(le*=256);)N<0&&k===0&&this[L+ht+1]!==0&&(k=1),this[L+ht]=(N/le>>0)-k&255;return L+ye},b.prototype.writeInt8=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,1,127,-128),N<0&&(N=255+N+1),this[L]=N&255,L+1},b.prototype.writeInt16LE=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,2,32767,-32768),this[L]=N&255,this[L+1]=N>>>8,L+2},b.prototype.writeInt16BE=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,2,32767,-32768),this[L]=N>>>8,this[L+1]=N&255,L+2},b.prototype.writeInt32LE=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,4,2147483647,-2147483648),this[L]=N&255,this[L+1]=N>>>8,this[L+2]=N>>>16,this[L+3]=N>>>24,L+4},b.prototype.writeInt32BE=function(N,L,ye){return N=+N,L=L>>>0,ye||Ze(this,N,L,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[L]=N>>>24,this[L+1]=N>>>16,this[L+2]=N>>>8,this[L+3]=N&255,L+4};function it(Se,N,L,ye,Xe,tt){if(L+ye>Se.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function ct(Se,N,L,ye,Xe){return N=+N,L=L>>>0,Xe||it(Se,N,L,4),u.write(Se,N,L,ye,23,4),L+4}b.prototype.writeFloatLE=function(N,L,ye){return ct(this,N,L,!0,ye)},b.prototype.writeFloatBE=function(N,L,ye){return ct(this,N,L,!1,ye)};function vt(Se,N,L,ye,Xe){return N=+N,L=L>>>0,Xe||it(Se,N,L,8),u.write(Se,N,L,ye,52,8),L+8}b.prototype.writeDoubleLE=function(N,L,ye){return vt(this,N,L,!0,ye)},b.prototype.writeDoubleBE=function(N,L,ye){return vt(this,N,L,!1,ye)},b.prototype.copy=function(N,L,ye,Xe){if(!b.isBuffer(N))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!Xe&&Xe!==0&&(Xe=this.length),L>=N.length&&(L=N.length),L||(L=0),Xe>0&&Xe<ye&&(Xe=ye),Xe===ye||N.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-L<Xe-ye&&(Xe=N.length-L+ye);var tt=Xe-ye;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(L,ye,Xe);else if(this===N&&ye<L&&L<Xe)for(var ht=tt-1;ht>=0;--ht)N[ht+L]=this[ht+ye];else Uint8Array.prototype.set.call(N,this.subarray(ye,Xe),L);return tt},b.prototype.fill=function(N,L,ye,Xe){if(typeof N=="string"){if(typeof L=="string"?(Xe=L,L=0,ye=this.length):typeof ye=="string"&&(Xe=ye,ye=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!b.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(N.length===1){var tt=N.charCodeAt(0);(Xe==="utf8"&&tt<128||Xe==="latin1")&&(N=tt)}}else typeof N=="number"&&(N=N&255);if(L<0||this.length<L||this.length<ye)throw new RangeError("Out of range index");if(ye<=L)return this;L=L>>>0,ye=ye===void 0?this.length:ye>>>0,N||(N=0);var ht;if(typeof N=="number")for(ht=L;ht<ye;++ht)this[ht]=N;else{var le=b.isBuffer(N)?N:b.from(N,Xe),k=le.length;if(k===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ht=0;ht<ye-L;++ht)this[ht+L]=le[ht%k]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function pt(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(Mt,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function xt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Zt(Se,N){N=N||1/0;for(var L,ye=Se.length,Xe=null,tt=[],ht=0;ht<ye;++ht){if(L=Se.charCodeAt(ht),L>55295&&L<57344){if(!Xe){if(L>56319){(N-=3)>-1&&tt.push(239,191,189);continue}else if(ht+1===ye){(N-=3)>-1&&tt.push(239,191,189);continue}Xe=L;continue}if(L<56320){(N-=3)>-1&&tt.push(239,191,189),Xe=L;continue}L=(Xe-55296<<10|L-56320)+65536}else Xe&&(N-=3)>-1&&tt.push(239,191,189);if(Xe=null,L<128){if((N-=1)<0)break;tt.push(L)}else if(L<2048){if((N-=2)<0)break;tt.push(L>>6|192,L&63|128)}else if(L<65536){if((N-=3)<0)break;tt.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((N-=4)<0)break;tt.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return tt}function Wt(Se){for(var N=[],L=0;L<Se.length;++L)N.push(Se.charCodeAt(L)&255);return N}function ln(Se,N){for(var L,ye,Xe,tt=[],ht=0;ht<Se.length&&!((N-=2)<0);++ht)L=Se.charCodeAt(ht),ye=L>>8,Xe=L%256,tt.push(Xe),tt.push(ye);return tt}function et(Se){return m.toByteArray(pt(Se))}function _n(Se,N,L,ye){for(var Xe=0;Xe<ye&&!(Xe+L>=N.length||Xe>=Se.length);++Xe)N[Xe+L]=Se[Xe];return Xe}function un(Se,N){return Se instanceof N||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===N.name}function Vt(Se){return Se!==Se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const p=i("./validator"),m=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");a.exports={XMLParser:m,XMLValidator:p,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const p=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",m=p+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+p+"]["+m+"]*",S=new RegExp("^"+u+"$"),P=function(b,C){const R=[];let B=C.exec(b);for(;B;){const j=[];j.startIndex=C.lastIndex-B[0].length;const he=B.length;for(let q=0;q<he;q++)j.push(B[q]);R.push(j),B=C.exec(b)}return R},M=function(b){const C=S.exec(b);return!(C===null||typeof C>"u")};c.isExist=function(b){return typeof b<"u"},c.isEmptyObject=function(b){return Object.keys(b).length===0},c.merge=function(b,C,R){if(C){const B=Object.keys(C),j=B.length;for(let he=0;he<j;he++)R==="strict"?b[B[he]]=[C[B[he]]]:b[B[he]]=C[B[he]]}},c.getValue=function(b){return c.isExist(b)?b:""},c.isName=M,c.getAllMatches=P,c.nameRegexp=u},{}],5:[function(i,a,c){const p=i("./util"),m={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(W,E){E=Object.assign({},m,E);const O=[];let D=!1,ee=!1;W[0]==="\uFEFF"&&(W=W.substr(1));for(let H=0;H<W.length;H++)if(W[H]==="<"&&W[H+1]==="?"){if(H+=2,H=S(W,H),H.err)return H}else if(W[H]==="<"){let ve=H;if(H++,W[H]==="!"){H=P(W,H);continue}else{let _e=!1;W[H]==="/"&&(_e=!0,H++);let pe="";for(;H<W.length&&W[H]!==">"&&W[H]!==" "&&W[H]!=="	"&&W[H]!==`
`&&W[H]!=="\r";H++)pe+=W[H];if(pe=pe.trim(),pe[pe.length-1]==="/"&&(pe=pe.substring(0,pe.length-1),H--),!G(pe)){let Y;return pe.trim().length===0?Y="Invalid space after '<'.":Y="Tag '"+pe+"' is an invalid name.",q("InvalidTag",Y,ae(W,H))}const oe=C(W,H);if(oe===!1)return q("InvalidAttr","Attributes for '"+pe+"' have open quote.",ae(W,H));let ce=oe.value;if(H=oe.index,ce[ce.length-1]==="/"){const Y=H-ce.length;ce=ce.substring(0,ce.length-1);const ne=B(ce,E);if(ne===!0)D=!0;else return q(ne.err.code,ne.err.msg,ae(W,Y+ne.err.line))}else if(_e)if(oe.tagClosed){if(ce.trim().length>0)return q("InvalidTag","Closing tag '"+pe+"' can't have attributes or invalid starting.",ae(W,ve));{const Y=O.pop();if(pe!==Y.tagName){let ne=ae(W,Y.tagStartPos);return q("InvalidTag","Expected closing tag '"+Y.tagName+"' (opened in line "+ne.line+", col "+ne.col+") instead of closing tag '"+pe+"'.",ae(W,ve))}O.length==0&&(ee=!0)}}else return q("InvalidTag","Closing tag '"+pe+"' doesn't have proper closing.",ae(W,H));else{const Y=B(ce,E);if(Y!==!0)return q(Y.err.code,Y.err.msg,ae(W,H-ce.length+Y.err.line));if(ee===!0)return q("InvalidXml","Multiple possible root nodes found.",ae(W,H));E.unpairedTags.indexOf(pe)!==-1||O.push({tagName:pe,tagStartPos:ve}),D=!0}for(H++;H<W.length;H++)if(W[H]==="<")if(W[H+1]==="!"){H++,H=P(W,H);continue}else if(W[H+1]==="?"){if(H=S(W,++H),H.err)return H}else break;else if(W[H]==="&"){const Y=he(W,H);if(Y==-1)return q("InvalidChar","char '&' is not expected.",ae(W,H));H=Y}else if(ee===!0&&!u(W[H]))return q("InvalidXml","Extra text at the end",ae(W,H));W[H]==="<"&&H--}}else{if(u(W[H]))continue;return q("InvalidChar","char '"+W[H]+"' is not expected.",ae(W,H))}if(D){if(O.length==1)return q("InvalidTag","Unclosed tag '"+O[0].tagName+"'.",ae(W,O[0].tagStartPos));if(O.length>0)return q("InvalidXml","Invalid '"+JSON.stringify(O.map(H=>H.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return q("InvalidXml","Start tag expected.",1);return!0};function u(W){return W===" "||W==="	"||W===`
`||W==="\r"}function S(W,E){const O=E;for(;E<W.length;E++)if(W[E]=="?"||W[E]==" "){const D=W.substr(O,E-O);if(E>5&&D==="xml")return q("InvalidXml","XML declaration allowed only at the start of the document.",ae(W,E));if(W[E]=="?"&&W[E+1]==">"){E++;break}else continue}return E}function P(W,E){if(W.length>E+5&&W[E+1]==="-"&&W[E+2]==="-"){for(E+=3;E<W.length;E++)if(W[E]==="-"&&W[E+1]==="-"&&W[E+2]===">"){E+=2;break}}else if(W.length>E+8&&W[E+1]==="D"&&W[E+2]==="O"&&W[E+3]==="C"&&W[E+4]==="T"&&W[E+5]==="Y"&&W[E+6]==="P"&&W[E+7]==="E"){let O=1;for(E+=8;E<W.length;E++)if(W[E]==="<")O++;else if(W[E]===">"&&(O--,O===0))break}else if(W.length>E+9&&W[E+1]==="["&&W[E+2]==="C"&&W[E+3]==="D"&&W[E+4]==="A"&&W[E+5]==="T"&&W[E+6]==="A"&&W[E+7]==="["){for(E+=8;E<W.length;E++)if(W[E]==="]"&&W[E+1]==="]"&&W[E+2]===">"){E+=2;break}}return E}const M='"',b="'";function C(W,E){let O="",D="",ee=!1;for(;E<W.length;E++){if(W[E]===M||W[E]===b)D===""?D=W[E]:D!==W[E]||(D="");else if(W[E]===">"&&D===""){ee=!0;break}O+=W[E]}return D!==""?!1:{value:O,index:E,tagClosed:ee}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function B(W,E){const O=p.getAllMatches(W,R),D={};for(let ee=0;ee<O.length;ee++){if(O[ee][1].length===0)return q("InvalidAttr","Attribute '"+O[ee][2]+"' has no space in starting.",K(O[ee]));if(O[ee][3]!==void 0&&O[ee][4]===void 0)return q("InvalidAttr","Attribute '"+O[ee][2]+"' is without value.",K(O[ee]));if(O[ee][3]===void 0&&!E.allowBooleanAttributes)return q("InvalidAttr","boolean attribute '"+O[ee][2]+"' is not allowed.",K(O[ee]));const H=O[ee][2];if(!X(H))return q("InvalidAttr","Attribute '"+H+"' is an invalid name.",K(O[ee]));if(!D.hasOwnProperty(H))D[H]=1;else return q("InvalidAttr","Attribute '"+H+"' is repeated.",K(O[ee]))}return!0}function j(W,E){let O=/\d/;for(W[E]==="x"&&(E++,O=/[\da-fA-F]/);E<W.length;E++){if(W[E]===";")return E;if(!W[E].match(O))break}return-1}function he(W,E){if(E++,W[E]===";")return-1;if(W[E]==="#")return E++,j(W,E);let O=0;for(;E<W.length;E++,O++)if(!(W[E].match(/\w/)&&O<20)){if(W[E]===";")break;return-1}return E}function q(W,E,O){return{err:{code:W,msg:E,line:O.line||O,col:O.col}}}function X(W){return p.isName(W)}function G(W){return p.isName(W)}function ae(W,E){const O=W.substring(0,E).split(/\r?\n/);return{line:O.length,col:O[O.length-1].length+1}}function K(W){return W.startIndex+W[1].length}},{"./util":4}],6:[function(i,a,c){const p=i("./orderedJs2Xml"),m={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,C){return C},attributeValueProcessor:function(b,C){return C},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(b){this.options=Object.assign({},m,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=M),this.processTextOrObjNode=S,this.options.format?(this.indentate=P,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(b){return this.options.preserveOrder?p(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},u.prototype.j2x=function(b,C){let R="",B="";for(let j in b)if(Object.prototype.hasOwnProperty.call(b,j))if(typeof b[j]>"u")this.isAttribute(j)&&(B+="");else if(b[j]===null)this.isAttribute(j)?B+="":j[0]==="?"?B+=this.indentate(C)+"<"+j+"?"+this.tagEndChar:B+=this.indentate(C)+"<"+j+"/"+this.tagEndChar;else if(b[j]instanceof Date)B+=this.buildTextValNode(b[j],j,"",C);else if(typeof b[j]!="object"){const he=this.isAttribute(j);if(he)R+=this.buildAttrPairStr(he,""+b[j]);else if(j===this.options.textNodeName){let q=this.options.tagValueProcessor(j,""+b[j]);B+=this.replaceEntitiesValue(q)}else B+=this.buildTextValNode(b[j],j,"",C)}else if(Array.isArray(b[j])){const he=b[j].length;let q="";for(let X=0;X<he;X++){const G=b[j][X];typeof G>"u"||(G===null?j[0]==="?"?B+=this.indentate(C)+"<"+j+"?"+this.tagEndChar:B+=this.indentate(C)+"<"+j+"/"+this.tagEndChar:typeof G=="object"?this.options.oneListGroup?q+=this.j2x(G,C+1).val:q+=this.processTextOrObjNode(G,j,C):q+=this.buildTextValNode(G,j,"",C))}this.options.oneListGroup&&(q=this.buildObjectNode(q,j,"",C)),B+=q}else if(this.options.attributesGroupName&&j===this.options.attributesGroupName){const he=Object.keys(b[j]),q=he.length;for(let X=0;X<q;X++)R+=this.buildAttrPairStr(he[X],""+b[j][he[X]])}else B+=this.processTextOrObjNode(b[j],j,C);return{attrStr:R,val:B}},u.prototype.buildAttrPairStr=function(b,C){return C=this.options.attributeValueProcessor(b,""+C),C=this.replaceEntitiesValue(C),this.options.suppressBooleanAttributes&&C==="true"?" "+b:" "+b+'="'+C+'"'};function S(b,C,R){const B=this.j2x(b,R+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],C,B.attrStr,R):this.buildObjectNode(B.val,C,B.attrStr,R)}u.prototype.buildObjectNode=function(b,C,R,B){if(b==="")return C[0]==="?"?this.indentate(B)+"<"+C+R+"?"+this.tagEndChar:this.indentate(B)+"<"+C+R+this.closeTag(C)+this.tagEndChar;{let j="</"+C+this.tagEndChar,he="";return C[0]==="?"&&(he="?",j=""),(R||R==="")&&b.indexOf("<")===-1?this.indentate(B)+"<"+C+R+he+">"+b+j:this.options.commentPropName!==!1&&C===this.options.commentPropName&&he.length===0?this.indentate(B)+`<!--${b}-->`+this.newLine:this.indentate(B)+"<"+C+R+he+this.tagEndChar+b+this.indentate(B)+j}},u.prototype.closeTag=function(b){let C="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(C="/"):this.options.suppressEmptyNode?C="/":C=`></${b}`,C},u.prototype.buildTextValNode=function(b,C,R,B){if(this.options.cdataPropName!==!1&&C===this.options.cdataPropName)return this.indentate(B)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&C===this.options.commentPropName)return this.indentate(B)+`<!--${b}-->`+this.newLine;if(C[0]==="?")return this.indentate(B)+"<"+C+R+"?"+this.tagEndChar;{let j=this.options.tagValueProcessor(C,b);return j=this.replaceEntitiesValue(j),j===""?this.indentate(B)+"<"+C+R+this.closeTag(C)+this.tagEndChar:this.indentate(B)+"<"+C+R+">"+j+"</"+C+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let C=0;C<this.options.entities.length;C++){const R=this.options.entities[C];b=b.replace(R.regex,R.val)}return b};function P(b){return this.options.indentBy.repeat(b)}function M(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(i,a,c){const p=`
`;function m(C,R){let B="";return R.format&&R.indentBy.length>0&&(B=p),u(C,R,"",B)}function u(C,R,B,j){let he="",q=!1;for(let X=0;X<C.length;X++){const G=C[X],ae=S(G);if(ae===void 0)continue;let K="";if(B.length===0?K=ae:K=`${B}.${ae}`,ae===R.textNodeName){let ee=G[ae];M(K,R)||(ee=R.tagValueProcessor(ae,ee),ee=b(ee,R)),q&&(he+=j),he+=ee,q=!1;continue}else if(ae===R.cdataPropName){q&&(he+=j),he+=`<![CDATA[${G[ae][0][R.textNodeName]}]]>`,q=!1;continue}else if(ae===R.commentPropName){he+=j+`<!--${G[ae][0][R.textNodeName]}-->`,q=!0;continue}else if(ae[0]==="?"){const ee=P(G[":@"],R),H=ae==="?xml"?"":j;let ve=G[ae][0][R.textNodeName];ve=ve.length!==0?" "+ve:"",he+=H+`<${ae}${ve}${ee}?>`,q=!0;continue}let W=j;W!==""&&(W+=R.indentBy);const E=P(G[":@"],R),O=j+`<${ae}${E}`,D=u(G[ae],R,K,W);R.unpairedTags.indexOf(ae)!==-1?R.suppressUnpairedNode?he+=O+">":he+=O+"/>":(!D||D.length===0)&&R.suppressEmptyNode?he+=O+"/>":D&&D.endsWith(">")?he+=O+`>${D}${j}</${ae}>`:(he+=O+">",D&&j!==""&&(D.includes("/>")||D.includes("</"))?he+=j+R.indentBy+D+j:he+=D,he+=`</${ae}>`),q=!0}return he}function S(C){const R=Object.keys(C);for(let B=0;B<R.length;B++){const j=R[B];if(C.hasOwnProperty(j)&&j!==":@")return j}}function P(C,R){let B="";if(C&&!R.ignoreAttributes)for(let j in C){if(!C.hasOwnProperty(j))continue;let he=R.attributeValueProcessor(j,C[j]);he=b(he,R),he===!0&&R.suppressBooleanAttributes?B+=` ${j.substr(R.attributeNamePrefix.length)}`:B+=` ${j.substr(R.attributeNamePrefix.length)}="${he}"`}return B}function M(C,R){C=C.substr(0,C.length-R.textNodeName.length-1);let B=C.substr(C.lastIndexOf(".")+1);for(let j in R.stopNodes)if(R.stopNodes[j]===C||R.stopNodes[j]==="*."+B)return!0;return!1}function b(C,R){if(C&&C.length>0&&R.processEntities)for(let B=0;B<R.entities.length;B++){const j=R.entities[B];C=C.replace(j.regex,j.val)}return C}a.exports=m},{}],8:[function(i,a,c){const p=i("../util");function m(B,j){const he={};if(B[j+3]==="O"&&B[j+4]==="C"&&B[j+5]==="T"&&B[j+6]==="Y"&&B[j+7]==="P"&&B[j+8]==="E"){j=j+9;let q=1,X=!1,G=!1,ae="";for(;j<B.length;j++)if(B[j]==="<"&&!G){if(X&&P(B,j))j+=7,[entityName,val,j]=u(B,j+1),val.indexOf("&")===-1&&(he[R(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(X&&M(B,j))j+=8;else if(X&&b(B,j))j+=8;else if(X&&C(B,j))j+=9;else if(S)G=!0;else throw new Error("Invalid DOCTYPE");q++,ae=""}else if(B[j]===">"){if(G?B[j-1]==="-"&&B[j-2]==="-"&&(G=!1,q--):q--,q===0)break}else B[j]==="["?X=!0:ae+=B[j];if(q!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:he,i:j}}function u(B,j){let he="";for(;j<B.length&&B[j]!=="'"&&B[j]!=='"';j++)he+=B[j];if(he=he.trim(),he.indexOf(" ")!==-1)throw new Error("External entites are not supported");const q=B[j++];let X="";for(;j<B.length&&B[j]!==q;j++)X+=B[j];return[he,X,j]}function S(B,j){return B[j+1]==="!"&&B[j+2]==="-"&&B[j+3]==="-"}function P(B,j){return B[j+1]==="!"&&B[j+2]==="E"&&B[j+3]==="N"&&B[j+4]==="T"&&B[j+5]==="I"&&B[j+6]==="T"&&B[j+7]==="Y"}function M(B,j){return B[j+1]==="!"&&B[j+2]==="E"&&B[j+3]==="L"&&B[j+4]==="E"&&B[j+5]==="M"&&B[j+6]==="E"&&B[j+7]==="N"&&B[j+8]==="T"}function b(B,j){return B[j+1]==="!"&&B[j+2]==="A"&&B[j+3]==="T"&&B[j+4]==="T"&&B[j+5]==="L"&&B[j+6]==="I"&&B[j+7]==="S"&&B[j+8]==="T"}function C(B,j){return B[j+1]==="!"&&B[j+2]==="N"&&B[j+3]==="O"&&B[j+4]==="T"&&B[j+5]==="A"&&B[j+6]==="T"&&B[j+7]==="I"&&B[j+8]==="O"&&B[j+9]==="N"}function R(B){if(p.isName(B))return B;throw new Error(`Invalid entity name ${B}`)}a.exports=m},{"../util":4}],9:[function(i,a,c){const p={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,S){return S},attributeValueProcessor:function(u,S){return S},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,S,P){return u}},m=function(u){return Object.assign({},p,u)};c.buildOptions=m,c.defaultOptions=p},{}],10:[function(i,a,c){const p=i("../util"),m=i("./xmlNode"),u=i("./DocTypeReader"),S=i("strnum");class P{constructor(ee){this.options=ee,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=M,this.parseXml=j,this.parseTextData=b,this.resolveNameSpace=C,this.buildAttributesMap=B,this.isItStopNode=G,this.replaceEntitiesValue=q,this.readStopNodeData=E,this.saveTextToParentTag=X,this.addChild=he}}function M(D){const ee=Object.keys(D);for(let H=0;H<ee.length;H++){const ve=ee[H];this.lastEntities[ve]={regex:new RegExp("&"+ve+";","g"),val:D[ve]}}}function b(D,ee,H,ve,_e,pe,oe){if(D!==void 0&&(this.options.trimValues&&!ve&&(D=D.trim()),D.length>0)){oe||(D=this.replaceEntitiesValue(D));const ce=this.options.tagValueProcessor(ee,D,H,_e,pe);return ce==null?D:typeof ce!=typeof D||ce!==D?ce:this.options.trimValues?O(D,this.options.parseTagValue,this.options.numberParseOptions):D.trim()===D?O(D,this.options.parseTagValue,this.options.numberParseOptions):D}}function C(D){if(this.options.removeNSPrefix){const ee=D.split(":"),H=D.charAt(0)==="/"?"/":"";if(ee[0]==="xmlns")return"";ee.length===2&&(D=H+ee[1])}return D}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function B(D,ee,H){if(!this.options.ignoreAttributes&&typeof D=="string"){const ve=p.getAllMatches(D,R),_e=ve.length,pe={};for(let oe=0;oe<_e;oe++){const ce=this.resolveNameSpace(ve[oe][1]);let Y=ve[oe][4],ne=this.options.attributeNamePrefix+ce;if(ce.length)if(this.options.transformAttributeName&&(ne=this.options.transformAttributeName(ne)),ne==="__proto__"&&(ne="#__proto__"),Y!==void 0){this.options.trimValues&&(Y=Y.trim()),Y=this.replaceEntitiesValue(Y);const de=this.options.attributeValueProcessor(ce,Y,ee);de==null?pe[ne]=Y:typeof de!=typeof Y||de!==Y?pe[ne]=de:pe[ne]=O(Y,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(pe[ne]=!0)}if(!Object.keys(pe).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=pe,oe}return pe}}const j=function(D){D=D.replace(/\r\n?/g,`
`);const ee=new m("!xml");let H=ee,ve="",_e="";for(let pe=0;pe<D.length;pe++)if(D[pe]==="<")if(D[pe+1]==="/"){const ce=K(D,">",pe,"Closing Tag is not closed.");let Y=D.substring(pe+2,ce).trim();if(this.options.removeNSPrefix){const be=Y.indexOf(":");be!==-1&&(Y=Y.substr(be+1))}this.options.transformTagName&&(Y=this.options.transformTagName(Y)),H&&(ve=this.saveTextToParentTag(ve,H,_e));const ne=_e.substring(_e.lastIndexOf(".")+1);if(Y&&this.options.unpairedTags.indexOf(Y)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${Y}>`);let de=0;ne&&this.options.unpairedTags.indexOf(ne)!==-1?(de=_e.lastIndexOf(".",_e.lastIndexOf(".")-1),this.tagsNodeStack.pop()):de=_e.lastIndexOf("."),_e=_e.substring(0,de),H=this.tagsNodeStack.pop(),ve="",pe=ce}else if(D[pe+1]==="?"){let ce=W(D,pe,!1,"?>");if(!ce)throw new Error("Pi Tag is not closed.");if(ve=this.saveTextToParentTag(ve,H,_e),!(this.options.ignoreDeclaration&&ce.tagName==="?xml"||this.options.ignorePiTags)){const Y=new m(ce.tagName);Y.add(this.options.textNodeName,""),ce.tagName!==ce.tagExp&&ce.attrExpPresent&&(Y[":@"]=this.buildAttributesMap(ce.tagExp,_e,ce.tagName)),this.addChild(H,Y,_e)}pe=ce.closeIndex+1}else if(D.substr(pe+1,3)==="!--"){const ce=K(D,"-->",pe+4,"Comment is not closed.");if(this.options.commentPropName){const Y=D.substring(pe+4,ce-2);ve=this.saveTextToParentTag(ve,H,_e),H.add(this.options.commentPropName,[{[this.options.textNodeName]:Y}])}pe=ce}else if(D.substr(pe+1,2)==="!D"){const ce=u(D,pe);this.docTypeEntities=ce.entities,pe=ce.i}else if(D.substr(pe+1,2)==="!["){const ce=K(D,"]]>",pe,"CDATA is not closed.")-2,Y=D.substring(pe+9,ce);if(ve=this.saveTextToParentTag(ve,H,_e),this.options.cdataPropName)H.add(this.options.cdataPropName,[{[this.options.textNodeName]:Y}]);else{let ne=this.parseTextData(Y,H.tagname,_e,!0,!1,!0);ne==null&&(ne=""),H.add(this.options.textNodeName,ne)}pe=ce+2}else{let ce=W(D,pe,this.options.removeNSPrefix),Y=ce.tagName;const ne=ce.rawTagName;let de=ce.tagExp,be=ce.attrExpPresent,Ce=ce.closeIndex;this.options.transformTagName&&(Y=this.options.transformTagName(Y)),H&&ve&&H.tagname!=="!xml"&&(ve=this.saveTextToParentTag(ve,H,_e,!1));const Ue=H;if(Ue&&this.options.unpairedTags.indexOf(Ue.tagname)!==-1&&(H=this.tagsNodeStack.pop(),_e=_e.substring(0,_e.lastIndexOf("."))),Y!==ee.tagname&&(_e+=_e?"."+Y:Y),this.isItStopNode(this.options.stopNodes,_e,Y)){let Ae="";if(de.length>0&&de.lastIndexOf("/")===de.length-1)pe=ce.closeIndex;else if(this.options.unpairedTags.indexOf(Y)!==-1)pe=ce.closeIndex;else{const We=this.readStopNodeData(D,ne,Ce+1);if(!We)throw new Error(`Unexpected end of ${ne}`);pe=We.i,Ae=We.tagContent}const Fe=new m(Y);Y!==de&&be&&(Fe[":@"]=this.buildAttributesMap(de,_e,Y)),Ae&&(Ae=this.parseTextData(Ae,Y,_e,!0,be,!0,!0)),_e=_e.substr(0,_e.lastIndexOf(".")),Fe.add(this.options.textNodeName,Ae),this.addChild(H,Fe,_e)}else{if(de.length>0&&de.lastIndexOf("/")===de.length-1){Y[Y.length-1]==="/"?(Y=Y.substr(0,Y.length-1),_e=_e.substr(0,_e.length-1),de=Y):de=de.substr(0,de.length-1),this.options.transformTagName&&(Y=this.options.transformTagName(Y));const Ae=new m(Y);Y!==de&&be&&(Ae[":@"]=this.buildAttributesMap(de,_e,Y)),this.addChild(H,Ae,_e),_e=_e.substr(0,_e.lastIndexOf("."))}else{const Ae=new m(Y);this.tagsNodeStack.push(H),Y!==de&&be&&(Ae[":@"]=this.buildAttributesMap(de,_e,Y)),this.addChild(H,Ae,_e),H=Ae}ve="",pe=Ce}}else ve+=D[pe];return ee.child};function he(D,ee,H){const ve=this.options.updateTag(ee.tagname,H,ee[":@"]);ve===!1||(typeof ve=="string"&&(ee.tagname=ve),D.addChild(ee))}const q=function(D){if(this.options.processEntities){for(let ee in this.docTypeEntities){const H=this.docTypeEntities[ee];D=D.replace(H.regx,H.val)}for(let ee in this.lastEntities){const H=this.lastEntities[ee];D=D.replace(H.regex,H.val)}if(this.options.htmlEntities)for(let ee in this.htmlEntities){const H=this.htmlEntities[ee];D=D.replace(H.regex,H.val)}D=D.replace(this.ampEntity.regex,this.ampEntity.val)}return D};function X(D,ee,H,ve){return D&&(ve===void 0&&(ve=Object.keys(ee.child).length===0),D=this.parseTextData(D,ee.tagname,H,!1,ee[":@"]?Object.keys(ee[":@"]).length!==0:!1,ve),D!==void 0&&D!==""&&ee.add(this.options.textNodeName,D),D=""),D}function G(D,ee,H){const ve="*."+H;for(const _e in D){const pe=D[_e];if(ve===pe||ee===pe)return!0}return!1}function ae(D,ee,H=">"){let ve,_e="";for(let pe=ee;pe<D.length;pe++){let oe=D[pe];if(ve)oe===ve&&(ve="");else if(oe==='"'||oe==="'")ve=oe;else if(oe===H[0])if(H[1]){if(D[pe+1]===H[1])return{data:_e,index:pe}}else return{data:_e,index:pe};else oe==="	"&&(oe=" ");_e+=oe}}function K(D,ee,H,ve){const _e=D.indexOf(ee,H);if(_e===-1)throw new Error(ve);return _e+ee.length-1}function W(D,ee,H,ve=">"){const _e=ae(D,ee+1,ve);if(!_e)return;let pe=_e.data;const oe=_e.index,ce=pe.search(/\s/);let Y=pe,ne=!0;ce!==-1&&(Y=pe.substring(0,ce),pe=pe.substring(ce+1).trimStart());const de=Y;if(H){const be=Y.indexOf(":");be!==-1&&(Y=Y.substr(be+1),ne=Y!==_e.data.substr(be+1))}return{tagName:Y,tagExp:pe,closeIndex:oe,attrExpPresent:ne,rawTagName:de}}function E(D,ee,H){const ve=H;let _e=1;for(;H<D.length;H++)if(D[H]==="<")if(D[H+1]==="/"){const pe=K(D,">",H,`${ee} is not closed`);if(D.substring(H+2,pe).trim()===ee&&(_e--,_e===0))return{tagContent:D.substring(ve,H),i:pe};H=pe}else if(D[H+1]==="?")H=K(D,"?>",H+1,"StopNode is not closed.");else if(D.substr(H+1,3)==="!--")H=K(D,"-->",H+3,"StopNode is not closed.");else if(D.substr(H+1,2)==="![")H=K(D,"]]>",H,"StopNode is not closed.")-2;else{const pe=W(D,H,">");pe&&((pe&&pe.tagName)===ee&&pe.tagExp[pe.tagExp.length-1]!=="/"&&_e++,H=pe.closeIndex)}}function O(D,ee,H){if(ee&&typeof D=="string"){const ve=D.trim();return ve==="true"?!0:ve==="false"?!1:S(D,H)}else return p.isExist(D)?D:""}a.exports=P},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:p}=i("./OptionsBuilder"),m=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),S=i("../validator");class P{constructor(b){this.externalEntities={},this.options=p(b)}parse(b,C){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(C){C===!0&&(C={});const j=S.validate(b,C);if(j!==!0)throw Error(`${j.err.msg}:${j.err.line}:${j.err.col}`)}const R=new m(this.options);R.addExternalEntities(this.externalEntities);const B=R.parseXml(b);return this.options.preserveOrder||B===void 0?B:u(B,this.options)}addEntity(b,C){if(C.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(C==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=C}}a.exports=P},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function p(M,b){return m(M,b)}function m(M,b,C){let R;const B={};for(let j=0;j<M.length;j++){const he=M[j],q=u(he);let X="";if(C===void 0?X=q:X=C+"."+q,q===b.textNodeName)R===void 0?R=he[q]:R+=""+he[q];else{if(q===void 0)continue;if(he[q]){let G=m(he[q],b,X);const ae=P(G,b);he[":@"]?S(G,he[":@"],X,b):Object.keys(G).length===1&&G[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?G=G[b.textNodeName]:Object.keys(G).length===0&&(b.alwaysCreateTextNode?G[b.textNodeName]="":G=""),B[q]!==void 0&&B.hasOwnProperty(q)?(Array.isArray(B[q])||(B[q]=[B[q]]),B[q].push(G)):b.isArray(q,X,ae)?B[q]=[G]:B[q]=G}}}return typeof R=="string"?R.length>0&&(B[b.textNodeName]=R):R!==void 0&&(B[b.textNodeName]=R),B}function u(M){const b=Object.keys(M);for(let C=0;C<b.length;C++){const R=b[C];if(R!==":@")return R}}function S(M,b,C,R){if(b){const B=Object.keys(b),j=B.length;for(let he=0;he<j;he++){const q=B[he];R.isArray(q,C+"."+q,!0,!0)?M[q]=[b[q]]:M[q]=b[q]}}}function P(M,b){const{textNodeName:C}=b,R=Object.keys(M).length;return!!(R===0||R===1&&(M[C]||typeof M[C]=="boolean"||M[C]===0))}c.prettify=p},{}],13:[function(i,a,c){class p{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,S){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:S})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=p},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(p,m,u,S,P){var M,b,C=P*8-S-1,R=(1<<C)-1,B=R>>1,j=-7,he=u?P-1:0,q=u?-1:1,X=p[m+he];for(he+=q,M=X&(1<<-j)-1,X>>=-j,j+=C;j>0;M=M*256+p[m+he],he+=q,j-=8);for(b=M&(1<<-j)-1,M>>=-j,j+=S;j>0;b=b*256+p[m+he],he+=q,j-=8);if(M===0)M=1-B;else{if(M===R)return b?NaN:(X?-1:1)*(1/0);b=b+Math.pow(2,S),M=M-B}return(X?-1:1)*b*Math.pow(2,M-S)},c.write=function(p,m,u,S,P,M){var b,C,R,B=M*8-P-1,j=(1<<B)-1,he=j>>1,q=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=S?0:M-1,G=S?1:-1,ae=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(C=isNaN(m)?1:0,b=j):(b=Math.floor(Math.log(m)/Math.LN2),m*(R=Math.pow(2,-b))<1&&(b--,R*=2),b+he>=1?m+=q/R:m+=q*Math.pow(2,1-he),m*R>=2&&(b++,R/=2),b+he>=j?(C=0,b=j):b+he>=1?(C=(m*R-1)*Math.pow(2,P),b=b+he):(C=m*Math.pow(2,he-1)*Math.pow(2,P),b=0));P>=8;p[u+X]=C&255,X+=G,C/=256,P-=8);for(b=b<<P|C,B+=P;B>0;p[u+X]=b&255,X+=G,b/=256,B-=8);p[u+X-G]|=ae*128}},{}],15:[function(i,a,c){const p=/^[-+]?0x[a-fA-F0-9]+$/,m=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function S(M,b={}){if(b=Object.assign({},u,b),!M||typeof M!="string")return M;let C=M.trim();if(b.skipLike!==void 0&&b.skipLike.test(C))return M;if(b.hex&&p.test(C))return Number.parseInt(C,16);{const R=m.exec(C);if(R){const B=R[1],j=R[2];let he=P(R[3]);const q=R[4]||R[6];if(!b.leadingZeros&&j.length>0&&B&&C[2]!==".")return M;if(!b.leadingZeros&&j.length>0&&!B&&C[1]!==".")return M;{const X=Number(C),G=""+X;return G.search(/[eE]/)!==-1||q?b.eNotation?X:M:C.indexOf(".")!==-1?G==="0"&&he===""||G===he||B&&G==="-"+he?X:M:j?he===G||B+he===G?X:M:C===G||C===B+G?X:M}}else return M}}function P(M){return M&&M.indexOf(".")!==-1&&(M=M.replace(/0+$/,""),M==="."?M="0":M[0]==="."?M="0"+M:M[M.length-1]==="."&&(M=M.substr(0,M.length-1))),M}a.exports=S},{}],16:[function(i,a,c){(function(p){(function(){var m=this&&this.__awaiter||function(C,R,B,j){function he(q){return q instanceof B?q:new B(function(X){X(q)})}return new(B||(B=Promise))(function(q,X){function G(W){try{K(j.next(W))}catch(E){X(E)}}function ae(W){try{K(j.throw(W))}catch(E){X(E)}}function K(W){W.done?q(W.value):he(W.value).then(G,ae)}K((j=j.apply(C,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const u=i("../auth"),S=i("../config"),P=i("./_xml"),M=C=>typeof btoa>"u"?p.from(C,"binary").toString("base64"):btoa(C);function b(C,R,B){return m(this,void 0,void 0,function*(){const{apiUrl:j,authHeader:he,basicAuth:q,userAgent:X}=(0,S.getConfig)(),G=q&&`Basic ${M(`${q.username}:${q.password}`)}`,ae=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let K=new URLSearchParams(R).toString();K&&(K=`?${K}`);const W=yield fetch(`${j}/api${C}${K}`,Object.assign(Object.assign({},B),{headers:Object.assign({Authorization:he||G||ae||"","User-Agent":X},B==null?void 0:B.headers)})),E=W.headers.get("Content-Type");if(E!=null&&E.startsWith("application/xml")){const O=yield W.text();return yield P.xmlParser.parse(O)}if(E!=null&&E.startsWith("application/json"))return W.json();if(W.ok)return yield W.text();throw new Error(`OSM API: ${yield W.text()}`)})}c.osmFetch=b}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const p=i("fast-xml-parser");c.xmlParser=new p.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:m=>m!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const p=i("fast-xml-parser"),m=new p.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(M){return m.build({osm:{changeset:{tag:Object.entries(M).map(([b,C])=>({$k:b,$v:C}))}}})}c.createChangesetMetaXml=u;const S=(M,b,C)=>b.reduce((R,B)=>{const j={$id:B.id,$version:C?0:B.version,$changeset:M,tag:Object.entries(B.tags||{}).map(([he,q])=>({$k:he,$v:q}))};switch(B.type){case"node":{const he=Object.assign(Object.assign({},j),{$lat:B.lat,$lon:B.lon});return Object.assign(Object.assign({},R),{node:[...R.node,he]})}case"way":{if(!B.nodes)throw new Error("Way has no nodes");const he=Object.assign(Object.assign({},j),{nd:B.nodes.map(q=>({$ref:q}))});return Object.assign(Object.assign({},R),{way:[...R.way,he]})}case"relation":{if(!B.members)throw new Error("Relation has no members");const he=Object.assign(Object.assign({},j),{member:B.members.map(q=>({$type:q.type,$ref:q.ref,$role:q.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,he]})}default:return R}},{node:[],way:[],relation:[]});function P(M,b,C){return m.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},C),{create:[S(M,b.create,!0)],modify:[S(M,b.modify)],delete:[Object.assign({"$if-unused":!0},S(M,b.delete))]})})}c.createOsmChangeXml=P},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const p=i("../_xml");function m(M){return{changeset:+M.$.changeset,id:+M.$.id,timestamp:M.$.timestamp,uid:+M.$.uid,user:M.$.user,version:+M.$.version,tags:M.tag?Object.fromEntries(M.tag.map(b=>[b.$.k,b.$.v])):void 0}}const u=M=>{const b=[];if(M.node){const C=M.node.map(R=>Object.assign(Object.assign({type:"node"},m(R)),{lat:+R.$.lat,lon:+R.$.lon}));b.push(...C)}if(M.way){const C=M.way.map(R=>{var B;return Object.assign(Object.assign({type:"way"},m(R)),{nodes:((B=R.nd)===null||B===void 0?void 0:B.map(j=>+j.$.ref))||[]})});b.push(...C)}if(M.relation){const C=M.relation.map(R=>{var B;return Object.assign(Object.assign({type:"relation"},m(R)),{members:((B=R.member)===null||B===void 0?void 0:B.map(j=>({ref:+j.$.ref,role:j.$.role,type:j.$.type})))||[]})});b.push(...C)}return b};function S(M){var b,C,R;return{create:((b=M.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(u))||[],modify:((C=M.osmChange[0].modify)===null||C===void 0?void 0:C.flatMap(u))||[],delete:((R=M.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(u))||[]}}c.parseOsmChangeJson=S;function P(M){const b=p.xmlParser.parse(M);return S(b)}c.parseOsmChangeXml=P},{"../_xml":17}],20:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(R){return R instanceof M?R:new M(function(B){B(R)})}return new(M||(M=Promise))(function(R,B){function j(X){try{q(b.next(X))}catch(G){B(G)}}function he(X){try{q(b.throw(X))}catch(G){B(G)}}function q(X){X.done?R(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const m=i("../_osmFetch");function u(S,P){return p(this,void 0,void 0,function*(){yield(0,m.osmFetch)(`/0.6/changeset/${S}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(P)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,a,c){var p=this&&this.__awaiter||function(P,M,b,C){function R(B){return B instanceof b?B:new b(function(j){j(B)})}return new(b||(b=Promise))(function(B,j){function he(G){try{X(C.next(G))}catch(ae){j(ae)}}function q(G){try{X(C.throw(G))}catch(ae){j(ae)}}function X(G){G.done?B(G.value):R(G.value).then(he,q)}X((C=C.apply(P,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const m=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function S(P){return p(this,void 0,void 0,function*(){const M=yield(0,m.osmFetch)(`/0.6/changeset/${P}/download`);return(0,u.parseOsmChangeJson)(M)})}c.getChangesetDiff=S},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,R,B){function j(he){return he instanceof R?he:new R(function(q){q(he)})}return new(R||(R=Promise))(function(he,q){function X(K){try{ae(B.next(K))}catch(W){q(W)}}function G(K){try{ae(B.throw(K))}catch(W){q(W)}}function ae(K){K.done?he(K.value):j(K.value).then(X,G)}ae((B=B.apply(b,C||[])).next())})},m=this&&this.__rest||function(b,C){var R={};for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&C.indexOf(B)<0&&(R[B]=b[B]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,B=Object.getOwnPropertySymbols(b);j<B.length;j++)C.indexOf(B[j])<0&&Object.prototype.propertyIsEnumerable.call(b,B[j])&&(R[B[j]]=b[B[j]]);return R};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const u=i("../_osmFetch"),S=b=>{var C;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(R=>[R.$.k,R.$.v])),discussion:(C=b.discussion)===null||C===void 0?void 0:C[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function P(b){var C;return p(this,void 0,void 0,function*(){const{only:R}=b,B=m(b,["only"]);return((C=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),B))).osm[0].changeset)===null||C===void 0?void 0:C.map(S))||[]})}c.listChangesets=P;function M(b,C=!0){return p(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:C})).osm[0].changeset.map(S)[0]})}c.getChangeset=M},{"../_osmFetch":16}],23:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(P,M,b,C){C===void 0&&(C=b);var R=Object.getOwnPropertyDescriptor(M,b);(!R||("get"in R?!M.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return M[b]}}),Object.defineProperty(P,C,R)}:function(P,M,b,C){C===void 0&&(C=b),P[C]=M[b]}),m=this&&this.__exportStar||function(P,M){for(var b in P)b!=="default"&&!Object.prototype.hasOwnProperty.call(M,b)&&p(M,P,b)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,m(i("./createChangesetComment"),c),m(i("./getChangesetDiff"),c),m(i("./getChangesets"),c),m(i("./uploadChangeset"),c);var u=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var S=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return S.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var p=this&&this.__awaiter||function(P,M,b,C){function R(B){return B instanceof b?B:new b(function(j){j(B)})}return new(b||(b=Promise))(function(B,j){function he(G){try{X(C.next(G))}catch(ae){j(ae)}}function q(G){try{X(C.throw(G))}catch(ae){j(ae)}}function X(G){G.done?B(G.value):R(G.value).then(he,q)}X((C=C.apply(P,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const m=i("../_osmFetch"),u=i("./_createOsmChangeXml");function S(P,M){return p(this,void 0,void 0,function*(){const b=(0,u.createChangesetMetaXml)(P),C=+(yield(0,m.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,u.createOsmChangeXml)(C,M);return yield(0,m.osmFetch)(`/0.6/changeset/${C}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,m.osmFetch)(`/0.6/changeset/${C}/close`,void 0,{method:"PUT"}),+C})}c.uploadChangeset=S},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(R){return R instanceof M?R:new M(function(B){B(R)})}return new(M||(M=Promise))(function(R,B){function j(X){try{q(b.next(X))}catch(G){B(G)}}function he(X){try{q(b.throw(X))}catch(G){B(G)}}function q(X){X.done?R(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const m=i("./_osmFetch");function u(){var S;return p(this,void 0,void 0,function*(){const P=yield(0,m.osmFetch)("/capabilities");return{limits:{maxArea:+P.osm[0].api[0].area[0].$.maximum,maxNoteArea:+P.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+P.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+P.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+P.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+P.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((S=P.osm[0].policy[0].imagery[0].blacklist)===null||S===void 0?void 0:S.map(b=>b.$.regex))||[]}}})}c.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,a,c){var p=this&&this.__awaiter||function(R,B,j,he){function q(X){return X instanceof j?X:new j(function(G){G(X)})}return new(j||(j=Promise))(function(X,G){function ae(E){try{W(he.next(E))}catch(O){G(O)}}function K(E){try{W(he.throw(E))}catch(O){G(O)}}function W(E){E.done?X(E.value):q(E.value).then(ae,K)}W((he=he.apply(R,B||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const m=i("./_osmFetch");function u(R,B,j){return p(this,void 0,void 0,function*(){const he=j&&R!=="node"?"/full":"";return(yield(0,m.osmFetch)(`/0.6/${R}/${B}${he}.json`)).elements})}c.getFeature=u;function S(R,B){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/${R}s.json?${R}s=${B.join(",")}`)).elements})}c.getFeatures=S;function P(R,B,j){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/${R}/${B}/${j}.json`)).elements[0]})}c.getFeatureAtVersion=P;function M(R,B){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/${R}/${B}/history.json`)).elements})}c.getFeatureHistory=M;function b(R){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}c.getWaysForNode=b;function C(R,B){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/${R}/${B}/relations.json`)).elements})}c.getRelationsForElement=C},{"./_osmFetch":16}],27:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(R){return R instanceof M?R:new M(function(B){B(R)})}return new(M||(M=Promise))(function(R,B){function j(X){try{q(b.next(X))}catch(G){B(G)}}function he(X){try{q(b.throw(X))}catch(G){B(G)}}function q(X){X.done?R(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const m=i("./_osmFetch");function u(S){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)("/0.6/map.json",{bbox:S})).elements})}c.getMapData=u},{"./_osmFetch":16}],28:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(R){return R instanceof M?R:new M(function(B){B(R)})}return new(M||(M=Promise))(function(R,B){function j(X){try{q(b.next(X))}catch(G){B(G)}}function he(X){try{q(b.throw(X))}catch(G){B(G)}}function q(X){X.done?R(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const m=i("./changesets");function u(S){return p(this,void 0,void 0,function*(){const P=yield(0,m.listChangesets)({display_name:S});if(!P.length)throw new Error("Could not get uid because the user has never edited the map");return P[0].uid})}c.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,a,c){var p=this&&this.__awaiter||function(P,M,b,C){function R(B){return B instanceof b?B:new b(function(j){j(B)})}return new(b||(b=Promise))(function(B,j){function he(G){try{X(C.next(G))}catch(ae){j(ae)}}function q(G){try{X(C.throw(G))}catch(ae){j(ae)}}function X(G){G.done?B(G.value):R(G.value).then(he,q)}X((C=C.apply(P,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const m=i("./_osmFetch");function u(P){return p(this,void 0,void 0,function*(){const M=yield(0,m.osmFetch)(`/0.6/user/${P==="me"?"details":P}.json`);return Object.assign(Object.assign({},M.user),{account_created:new Date(M.user.account_created)})})}c.getUser=u;function S(P){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)("/0.6/users",{users:P})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}c.getUsers=S},{"./_osmFetch":16}],30:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./changesets"),c),m(i("./notes"),c),m(i("./getCapabilities"),c),m(i("./getFeature"),c),m(i("./getMapData"),c),m(i("./getUIdFromDisplayName"),c),m(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var p=this&&this.__awaiter||function(C,R,B,j){function he(q){return q instanceof B?q:new B(function(X){X(q)})}return new(B||(B=Promise))(function(q,X){function G(W){try{K(j.next(W))}catch(E){X(E)}}function ae(W){try{K(j.throw(W))}catch(E){X(E)}}function K(W){W.done?q(W.value):he(W.value).then(G,ae)}K((j=j.apply(C,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const m=i("../_osmFetch"),u=C=>{const[R,B]=C.geometry.coordinates;return Object.assign(Object.assign({},C.properties),{location:{lat:B,lng:R}})};function S(C,R){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/notes${R?"/search":""}.json`,C)).features.map(u)})}function P(C){return S(C,!0)}c.getNotesForQuery=P;function M(C){return S({bbox:C},!1)}c.getNotesForArea=M;function b(C){return p(this,void 0,void 0,function*(){const R=yield(0,m.osmFetch)(`/0.6/notes/${C}.json`);return u(R)})}c.getNote=b},{"../_osmFetch":16}],32:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./getNotes"),c),m(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var p=this&&this.__awaiter||function(M,b,C,R){function B(j){return j instanceof C?j:new C(function(he){he(j)})}return new(C||(C=Promise))(function(j,he){function q(ae){try{G(R.next(ae))}catch(K){he(K)}}function X(ae){try{G(R.throw(ae))}catch(K){he(K)}}function G(ae){ae.done?j(ae.value):B(ae.value).then(q,X)}G((R=R.apply(M,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const m=i("../_osmFetch");function u(M,b,C){return p(this,void 0,void 0,function*(){yield(0,m.osmFetch)("/0.6/notes",{lat:M,lon:b,text:C})})}c.createNote=u;function S(M,b){return p(this,void 0,void 0,function*(){yield(0,m.osmFetch)(`/0.6/notes/${M}/comment`,{text:b})})}c.commentOnNote=S;function P(M,b){return p(this,void 0,void 0,function*(){yield(0,m.osmFetch)(`/0.6/notes/${M}/reopen`,{text:b})})}c.reopenNote=P},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function p(m){let u=!1;return new Promise((S,P)=>{const[M,b]=[600,550],C=Object.entries({width:M,height:b,left:window.screen.width/2-M/2,top:window.screen.height/2-b/2}).map(([j,he])=>`${j}=${he}`).join(","),R=window.open("about:blank","oauth_window",C);if(!R)throw new Error("Popup was blocked");R.location=m,window.authComplete=j=>{S(j),u=!0};const B=setInterval(()=>{R.closed&&(u||P(new Error("Cancelled")),clearInterval(B))},500)})}c.createPopup=p},{}],35:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(R){return R instanceof M?R:new M(function(B){B(R)})}return new(M||(M=Promise))(function(R,B){function j(X){try{q(b.next(X))}catch(G){B(G)}}function he(X){try{q(b.throw(X))}catch(G){B(G)}}function q(X){X.done?R(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const m=i("./helpers");function u(S,{options:P,pkceVerifier:M,state:b}){return p(this,void 0,void 0,function*(){const C=new URL(S).searchParams,R=C.get("error_description"),B=C.get("code"),j=C.get("state");if(R)throw new Error(R);if(!B)throw new Error("No code in OAuth response");if(!M||!b)throw new Error("No login in progress");if(b!==j)throw new Error("State Mismatch");const he={grant_type:"authorization_code",code:B,redirect_uri:P.redirectUrl,client_id:P.clientId,code_verifier:M},q=`${(0,m.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(he).toString()}`,G=yield(yield fetch(q,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in G)throw new Error(G.error_description);const ae={issuedAt:new Date(G.created_at*1e3).toISOString(),accessToken:G.access_token,scopes:G.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ae)),delete window.authComplete,ae})}c.exchangeCode=u},{"./helpers":36}],36:[function(i,a,c){var p=this&&this.__awaiter||function(M,b,C,R){function B(j){return j instanceof C?j:new C(function(he){he(j)})}return new(C||(C=Promise))(function(j,he){function q(ae){try{G(R.next(ae))}catch(K){he(K)}}function X(ae){try{G(R.throw(ae))}catch(K){he(K)}}function G(ae){ae.done?j(ae.value):B(ae.value).then(q,X)}G((R=R.apply(M,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const m=i("../config");function u(M){return p(this,void 0,void 0,function*(){const b=new TextEncoder().encode(M),C=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(C))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=u;function S(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(M=>`0${M.toString(16)}`.slice(-2)).join("")}c.getRandomString=S;function P(){let M=(0,m.getConfig)().apiUrl;return M==="https://api.openstreetmap.org"&&(M="https://www.openstreetmap.org"),M}c.getOAuthBaseUrl=P},{"../config":39}],37:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var p=this&&this.__awaiter||function(R,B,j,he){function q(X){return X instanceof j?X:new j(function(G){G(X)})}return new(j||(j=Promise))(function(X,G){function ae(E){try{W(he.next(E))}catch(O){G(O)}}function K(E){try{W(he.throw(E))}catch(O){G(O)}}function W(E){E.done?X(E.value):q(E.value).then(ae,K)}W((he=he.apply(R,B||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const m=i("./createPopup"),u=i("./exchangeCode"),S=i("./helpers");function P(R){return p(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const B=(0,S.getRandomString)(),j=(0,S.getRandomString)(),he=yield(0,S.sha256)(j),q={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:B,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:he},X=`${(0,S.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(q).toString()}`,G={state:B,pkceVerifier:j,options:R};if(R.mode==="popup"){const ae=yield(0,m.createPopup)(X);return(0,u.exchangeCode)(ae,G)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(G)),window.location.replace(X);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=P,c.authReady=p(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const B=window.location.href,j=localStorage.getItem("__osmAuthTemp");if(new URL(B).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(B),window.close();else if(j)try{const he=JSON.parse(j);yield(0,u.exchangeCode)(B,he),localStorage.removeItem("__osmAuthTemp")}catch(he){console.error("OSM Auth Error",he)}}});const M=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};c.getAuthToken=M;const b=()=>!!(0,c.getAuthToken)();c.isLoggedIn=b;function C(){localStorage.removeItem("__osmAuth")}c.logout=C},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const p={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},m=()=>p;c.getConfig=m;function u(S){Object.assign(p,S)}c.configure=u},{}],40:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./api"),c),m(i("./auth"),c),m(i("./config"),c),m(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./changesets"),c),m(i("./features"),c),m(i("./general"),c),m(i("./notes"),c),m(i("./osmPatch"),c),m(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(bP);var Fs=bP.exports;const SP=()=>{const[e,t]=yt.useState(!1);yt.useEffect(()=>{t(Fs.isLoggedIn())},[]);const i=yt.useCallback(()=>{(async()=>(await Fs.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Fs.isLoggedIn()),window.location.reload()))()},[]),a=yt.useCallback(()=>{(async()=>(Fs.logout(),t(!1)))()},[]);return gt.jsx(gt.Fragment,{children:e?gt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):gt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},lR=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Fs.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Fs.getUser("me");a(c)})()},[e]),gt.jsx(gt.Fragment,{children:i?gt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):gt.jsx("img",{})})},uR=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Fs.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Fs.getUser("me");a(c)})()},[e]),gt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[gt.jsxs("div",{children:[gt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?gt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):gt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),gt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[gt.jsx("div",{children:gt.jsx(lR,{})}),gt.jsx("div",{children:gt.jsx(SP,{})})]})]})},EP=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return gt.jsxs(gt.Fragment,{children:[gt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",gt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},cR=({feature:e})=>gt.jsx(gt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return gt.jsxs("div",{className:t,children:[gt.jsx("span",{className:"underline",children:t})," = ",gt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function nf(e,t,i){return parseInt(e.substr(t,i),16)}function TP(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function Z0(e,t,i){return i=i<0?i+6:i>6?i-6:i,TP(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function hR(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],p=e[3],m=e[4]||"";t="#"+a+a+c+c+p+p+m+m}return(i==7||i>8)&&(t=e),t}}function dR(e,t,i){let a;if(t==0){const c=TP(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,p=i*2-c;a=Z0(p,c,e*6+2)+Z0(p,c,e*6)+Z0(p,c,e*6-2)}return"#"+a}function Kd(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,dR(e,t,i)}const fR=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},yS={V:"jdenticon_config",n:"config"};var pR={};function mR(e,t){const i=typeof e=="object"&&e||pR[yS.n]||fR[yS.V]||{},a=i.lightness||{},c=i.saturation||{},p="color"in c?c.color:c,m=c.grayscale,u=i.backColor,S=i.padding;function P(b,C){let R=a[b];return R&&R.length>1||(R=C),function(B){return B=R[0]+B*(R[1]-R[0]),B<0?0:B>1?1:B}}function M(b){const C=i.hues;let R;return C&&C.length>0&&(R=C[0|.999*b*C.length]),typeof R=="number"?(R/360%1+1)%1:b}return{W:M,o:typeof p=="number"?p:.5,D:typeof m=="number"?m:0,p:P("color",[.4,.8]),F:P("grayscale",[.3,.9]),G:hR(u),X:typeof e=="number"?e:typeof S=="number"?S:t}}let dm=class{constructor(t,i){this.x=t,this.y=i}};class CP{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const p=this.q+this.H,m=this.t+this.H,u=this.Y;return u===1?new dm(p-i-(c||0),this.t+t):u===2?new dm(p-t-(a||0),m-i-(c||0)):u===3?new dm(this.q+i,m-t-(a||0)):new dm(this.q+t,this.t+i)}}const gR=new CP(0,0,0,0);class yR{constructor(t){this.J=t,this.u=gR}g(t,i){const a=i?-2:2,c=[];for(let p=i?t.length-2:0;p<t.length&&p>=0;p+=a)c.push(this.u.I(t[p],t[p+1]));this.J.g(c)}h(t,i,a,c){const p=this.u.I(t,i,a,a);this.J.h(p,a,c)}i(t,i,a,c,p){this.g([t,i,t+a,i,t+a,i+c,t,i+c],p)}j(t,i,a,c,p,m){const u=[t+a,i,t+a,i+c,t,i+c,t,i];u.splice((p||0)%4*2,2),this.g(u,m)}K(t,i,a,c,p){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],p)}}function vR(e,t,i,a){e=e%14;let c,p,m,u,S,P;e?e==1?(m=0|i*.5,u=0|i*.8,t.j(i-m,0,m,u,2)):e==2?(m=0|i/3,t.i(m,m,i-m,i-m)):e==3?(S=i*.1,P=i<6?1:i<8?2:0|i*.25,S=S>1?0|S:S>.5?1:S,t.i(P,P,i-S-P,i-S-P)):e==4?(p=0|i*.15,m=0|i*.5,t.h(i-m-p,i-m-p,m)):e==5?(S=i*.1,P=S*4,P>3&&(P=0|P),t.i(0,0,i,i),t.g([P,P,i-S,P,P+(i-P-S)/2,i-S],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(S=i*.14,P=i<4?1:i<6?2:0|i*.35,S=i<8?S:0|S,t.i(0,0,i,i),t.i(P,P,i-P-S,i-P-S,!0)):e==10?(S=i*.12,P=S*3,t.i(0,0,i,i),t.h(P,P,i-S-P,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(p=i*.25,t.i(0,0,i,i),t.K(p,p,i-p,i-p,!0)):!a&&(p=i*.4,m=i*1.2,t.h(p,p,m)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function vS(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function _R(e,t){return e=t.W(e),[Kd(e,t.D,t.F(0)),Kd(e,t.o,t.p(.5)),Kd(e,t.D,t.F(1)),Kd(e,t.o,t.p(1)),Kd(e,t.o,t.p(0))]}function xR(e,t,i){const a=mR(i,.08);a.G&&e.m(a.G);let c=e.k;const p=.5+c*a.X|0;c-=p*2;const m=new yR(e),u=0|c/4,S=0|p+c/2-u*2,P=0|p+c/2-u*2;function M(he,q,X,G,ae){const K=nf(t,X,1);let W=G?nf(t,G,1):0;e.L(C[R[he]]);for(let E=0;E<ae.length;E++)m.u=new CP(S+ae[E][0]*u,P+ae[E][1]*u,u,W++%4),q(K,m,u,E);e.M()}const b=nf(t,-7)/268435455,C=_R(b,a),R=[];let B;function j(he){if(he.indexOf(B)>=0){for(let q=0;q<he.length;q++)if(R.indexOf(he[q])>=0)return!0}}for(let he=0;he<3;he++)B=nf(t,8+he,1)%C.length,(j([0,4])||j([2,3]))&&(B=1),R.push(B);M(0,vS,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),M(1,vS,4,5,[[0,0],[3,0],[3,3],[0,3]]),M(2,vR,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function wR(e){var a=0,c=0,p=encodeURI(e)+"%80",m=[],u,S=[],P=1732584193,M=4023233417,b=~P,C=~M,R=3285377520,B=[P,M,b,C,R],j=0,he="";function q(X,G){return X<<G|X>>>32-G}for(;a<p.length;c++)m[c>>2]=m[c>>2]|(p[a]=="%"?parseInt(p.substring(a+1,a+=3),16):p.charCodeAt(a++))<<(3-(c&3))*8;for(u=((c+7>>6)+1)*16,m[u-1]=c*8-8;j<u;j+=16){for(a=0;a<80;a++)c=q(P,5)+R+(a<20?(M&b^~M&C)+1518500249:a<40?(M^b^C)+1859775393:a<60?(M&b^M&C^b&C)+2400959708:(M^b^C)+3395469782)+(S[a]=a<16?m[j+a]|0:q(S[a-3]^S[a-8]^S[a-14]^S[a-16],1)),R=C,C=b,b=q(M,30),M=P,P=c;B[0]=P=B[0]+P|0,B[1]=M=B[1]+M|0,B[2]=b=B[2]+b|0,B[3]=C=B[3]+C|0,B[4]=R=B[4]+R|0}for(a=0;a<40;a++)he+=(B[a>>3]>>>(7-(a&7))*4&15).toString(16);return he}function bR(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function SR(e){return wR(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function Zc(e){return(e*10+.5|0)/10}class ER{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Zc(t[a].x)+" "+Zc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,p=Zc(i/2),m=Zc(i),u="a"+p+","+p+" 0 1,"+c+" ";this.v+="M"+Zc(t.x)+" "+Zc(t.y+i/2)+u+m+",0"+u+-m+",0"}}class TR{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?nf(i[2],0)/255:1;this.O.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new ER)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.O.P(i,t[i].v)}}const CR={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class PR{constructor(t){this.k=t,this.C='<svg xmlns="'+CR.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}P(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function IR(e,t,i){const a=new PR(t);return xR(new TR(a),bR(e)||SR(e),i),a.toString()}const AR=({feature:e,size:t})=>e.properties===null?null:gt.jsx(gt.Fragment,{children:e.properties.userIconHref.length>0?gt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):gt.jsx("span",{dangerouslySetInnerHTML:{__html:IR(e.properties.user||"noname",t)}})}),MR=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?gt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null},kR={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},zR=({viewState:e})=>{const[t,i]=yt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),gt.jsx(gt.Fragment,{children:e&&t&&gt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[gt.jsx(eu,{icon:kR,style:{padding:"0px 3px"}}),gt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var PP={};class $i{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const p=i[c],m=t+p,u=Math.abs(t)<Math.abs(p)?t-(m-p):p-(m-t);u&&(i[a++]=u),t=m}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,p,m=0;if(i>0){for(m=t[--i];i>0&&(a=m,c=t[--i],m=a+c,p=c-(m-a),!p););i>0&&(p<0&&t[i-1]<0||p>0&&t[i-1]>0)&&(c=p*2,a=m+c,c==a-m&&(m=a))}return m}}function*FR(e){for(const t of e)yield*t}function IP(e){return Array.from(FR(e))}function dh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,p=new Array(c);++a<c;)p[a]=e+a*i;return p}var fn=1e-6,Zf=1e-12,Mn=Math.PI,Lr=Mn/2,yg=Mn/4,Yi=Mn*2,ur=180/Mn,gn=Mn/180,Bn=Math.abs,$h=Math.atan,Qi=Math.atan2,sn=Math.cos,fm=Math.ceil,AP=Math.exp,I_=Math.hypot,vg=Math.log,W0=Math.pow,en=Math.sin,cs=Math.sign||function(e){return e>0?1:e<0?-1:0},di=Math.sqrt,dx=Math.tan;function MP(e){return e>1?0:e<-1?Mn:Math.acos(e)}function eo(e){return e>1?Lr:e<-1?-Lr:Math.asin(e)}function _S(e){return(e=en(e/2))*e}function Ar(){}function _g(e,t){e&&wS.hasOwnProperty(e.type)&&wS[e.type](e,t)}var xS={Feature:function(e,t){_g(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)_g(i[a].geometry,t)}},wS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){A_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)A_(i[a],t,0)},Polygon:function(e,t){bS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)bS(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)_g(i[a],t)}};function A_(e,t,i){var a=-1,c=e.length-i,p;for(t.lineStart();++a<c;)p=e[a],t.point(p[0],p[1],p[2]);t.lineEnd()}function bS(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)A_(e[i],t,1);t.polygonEnd()}function zs(e,t){e&&xS.hasOwnProperty(e.type)?xS[e.type](e,t):_g(e,t)}var xg=new $i,wg=new $i,kP,zP,M_,k_,z_,ga={point:Ar,lineStart:Ar,lineEnd:Ar,polygonStart:function(){xg=new $i,ga.lineStart=RR,ga.lineEnd=jR},polygonEnd:function(){var e=+xg;wg.add(e<0?Yi+e:e),this.lineStart=this.lineEnd=this.point=Ar},sphere:function(){wg.add(Yi)}};function RR(){ga.point=OR}function jR(){FP(kP,zP)}function OR(e,t){ga.point=FP,kP=e,zP=t,e*=gn,t*=gn,M_=e,k_=sn(t=t/2+yg),z_=en(t)}function FP(e,t){e*=gn,t*=gn,t=t/2+yg;var i=e-M_,a=i>=0?1:-1,c=a*i,p=sn(t),m=en(t),u=z_*m,S=k_*p+u*sn(c),P=u*a*en(c);xg.add(Qi(P,S)),M_=e,k_=p,z_=m}function LR(e){return wg=new $i,zs(e,ga),wg*2}function bg(e){return[Qi(e[1],e[0]),eo(e[2])]}function tc(e){var t=e[0],i=e[1],a=sn(i);return[a*sn(t),a*en(t),en(i)]}function pm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function H0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function mm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Sg(e){var t=di(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Pr,co,jr,Oo,Bu,RP,jP,wh,wf,Bl,Qa,$a={point:F_,lineStart:SS,lineEnd:ES,polygonStart:function(){$a.point=LP,$a.lineStart=DR,$a.lineEnd=BR,wf=new $i,ga.polygonStart()},polygonEnd:function(){ga.polygonEnd(),$a.point=F_,$a.lineStart=SS,$a.lineEnd=ES,xg<0?(Pr=-(jr=180),co=-(Oo=90)):wf>fn?Oo=90:wf<-fn&&(co=-90),Qa[0]=Pr,Qa[1]=jr},sphere:function(){Pr=-(jr=180),co=-(Oo=90)}};function F_(e,t){Bl.push(Qa=[Pr=e,jr=e]),t<co&&(co=t),t>Oo&&(Oo=t)}function OP(e,t){var i=tc([e*gn,t*gn]);if(wh){var a=Fh(wh,i),c=[a[1],-a[0],0],p=Fh(c,a);Sg(p),p=bg(p);var m=e-Bu,u=m>0?1:-1,S=p[0]*ur*u,P,M=Bn(m)>180;M^(u*Bu<S&&S<u*e)?(P=p[1]*ur,P>Oo&&(Oo=P)):(S=(S+360)%360-180,M^(u*Bu<S&&S<u*e)?(P=-p[1]*ur,P<co&&(co=P)):(t<co&&(co=t),t>Oo&&(Oo=t))),M?e<Bu?jo(Pr,e)>jo(Pr,jr)&&(jr=e):jo(e,jr)>jo(Pr,jr)&&(Pr=e):jr>=Pr?(e<Pr&&(Pr=e),e>jr&&(jr=e)):e>Bu?jo(Pr,e)>jo(Pr,jr)&&(jr=e):jo(e,jr)>jo(Pr,jr)&&(Pr=e)}else Bl.push(Qa=[Pr=e,jr=e]);t<co&&(co=t),t>Oo&&(Oo=t),wh=i,Bu=e}function SS(){$a.point=OP}function ES(){Qa[0]=Pr,Qa[1]=jr,$a.point=F_,wh=null}function LP(e,t){if(wh){var i=e-Bu;wf.add(Bn(i)>180?i+(i>0?360:-360):i)}else RP=e,jP=t;ga.point(e,t),OP(e,t)}function DR(){ga.lineStart()}function BR(){LP(RP,jP),ga.lineEnd(),Bn(wf)>fn&&(Pr=-(jr=180)),Qa[0]=Pr,Qa[1]=jr,wh=null}function jo(e,t){return(t-=e)<0?t+360:t}function NR(e,t){return e[0]-t[0]}function TS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function UR(e){var t,i,a,c,p,m,u;if(Oo=jr=-(Pr=co=1/0),Bl=[],zs(e,$a),i=Bl.length){for(Bl.sort(NR),t=1,a=Bl[0],p=[a];t<i;++t)c=Bl[t],TS(a,c[0])||TS(a,c[1])?(jo(a[0],c[1])>jo(a[0],a[1])&&(a[1]=c[1]),jo(c[0],a[1])>jo(a[0],a[1])&&(a[0]=c[0])):p.push(a=c);for(m=-1/0,i=p.length-1,t=0,a=p[i];t<=i;a=c,++t)c=p[t],(u=jo(a[1],c[0]))>m&&(m=u,Pr=c[0],jr=a[1])}return Bl=Qa=null,Pr===1/0||co===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pr,co],[jr,Oo]]}var rf,Eg,Tg,Cg,Pg,Ig,Ag,Mg,R_,j_,O_,DP,BP,Xi,Ki,qi,Rs={sphere:Ar,point:fx,lineStart:CS,lineEnd:PS,polygonStart:function(){Rs.lineStart=GR,Rs.lineEnd=ZR},polygonEnd:function(){Rs.lineStart=CS,Rs.lineEnd=PS}};function fx(e,t){e*=gn,t*=gn;var i=sn(t);op(i*sn(e),i*en(e),en(t))}function op(e,t,i){++rf,Tg+=(e-Tg)/rf,Cg+=(t-Cg)/rf,Pg+=(i-Pg)/rf}function CS(){Rs.point=$R}function $R(e,t){e*=gn,t*=gn;var i=sn(t);Xi=i*sn(e),Ki=i*en(e),qi=en(t),Rs.point=VR,op(Xi,Ki,qi)}function VR(e,t){e*=gn,t*=gn;var i=sn(t),a=i*sn(e),c=i*en(e),p=en(t),m=Qi(di((m=Ki*p-qi*c)*m+(m=qi*a-Xi*p)*m+(m=Xi*c-Ki*a)*m),Xi*a+Ki*c+qi*p);Eg+=m,Ig+=m*(Xi+(Xi=a)),Ag+=m*(Ki+(Ki=c)),Mg+=m*(qi+(qi=p)),op(Xi,Ki,qi)}function PS(){Rs.point=fx}function GR(){Rs.point=WR}function ZR(){NP(DP,BP),Rs.point=fx}function WR(e,t){DP=e,BP=t,e*=gn,t*=gn,Rs.point=NP;var i=sn(t);Xi=i*sn(e),Ki=i*en(e),qi=en(t),op(Xi,Ki,qi)}function NP(e,t){e*=gn,t*=gn;var i=sn(t),a=i*sn(e),c=i*en(e),p=en(t),m=Ki*p-qi*c,u=qi*a-Xi*p,S=Xi*c-Ki*a,P=I_(m,u,S),M=eo(P),b=P&&-M/P;R_.add(b*m),j_.add(b*u),O_.add(b*S),Eg+=M,Ig+=M*(Xi+(Xi=a)),Ag+=M*(Ki+(Ki=c)),Mg+=M*(qi+(qi=p)),op(Xi,Ki,qi)}function HR(e){rf=Eg=Tg=Cg=Pg=Ig=Ag=Mg=0,R_=new $i,j_=new $i,O_=new $i,zs(e,Rs);var t=+R_,i=+j_,a=+O_,c=I_(t,i,a);return c<Zf&&(t=Ig,i=Ag,a=Mg,Eg<fn&&(t=Tg,i=Cg,a=Pg),c=I_(t,i,a),c<Zf)?[NaN,NaN]:[Qi(i,t)*ur,eo(a/c)*ur]}function Wc(e){return function(){return e}}function L_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function D_(e,t){return[Bn(e)>Mn?e+Math.round(-e/Yi)*Yi:e,t]}D_.invert=D_;function px(e,t,i){return(e%=Yi)?t||i?L_(AS(e),MS(t,i)):AS(e):t||i?MS(t,i):D_}function IS(e){return function(t,i){return t+=e,[t>Mn?t-Yi:t<-Mn?t+Yi:t,i]}}function AS(e){var t=IS(e);return t.invert=IS(-e),t}function MS(e,t){var i=sn(e),a=en(e),c=sn(t),p=en(t);function m(u,S){var P=sn(S),M=sn(u)*P,b=en(u)*P,C=en(S),R=C*i+M*a;return[Qi(b*c-R*p,M*i-C*a),eo(R*c+b*p)]}return m.invert=function(u,S){var P=sn(S),M=sn(u)*P,b=en(u)*P,C=en(S),R=C*c-b*p;return[Qi(b*c+C*p,M*i+R*a),eo(R*i-M*a)]},m}function UP(e){e=px(e[0]*gn,e[1]*gn,e.length>2?e[2]*gn:0);function t(i){return i=e(i[0]*gn,i[1]*gn),i[0]*=ur,i[1]*=ur,i}return t.invert=function(i){return i=e.invert(i[0]*gn,i[1]*gn),i[0]*=ur,i[1]*=ur,i},t}function $P(e,t,i,a,c,p){if(i){var m=sn(t),u=en(t),S=a*i;c==null?(c=t+a*Yi,p=t-S/2):(c=kS(m,c),p=kS(m,p),(a>0?c<p:c>p)&&(c+=a*Yi));for(var P,M=c;a>0?M>p:M<p;M-=S)P=bg([m,-u*sn(M),-u*en(M)]),e.point(P[0],P[1])}}function kS(e,t){t=tc(t),t[0]-=e,Sg(t);var i=MP(-t[1]);return((-t[2]<0?-i:i)+Yi-fn)%Yi}function XR(){var e=Wc([0,0]),t=Wc(90),i=Wc(6),a,c,p={point:m};function m(S,P){a.push(S=c(S,P)),S[0]*=ur,S[1]*=ur}function u(){var S=e.apply(this,arguments),P=t.apply(this,arguments)*gn,M=i.apply(this,arguments)*gn;return a=[],c=px(-S[0]*gn,-S[1]*gn,0).invert,$P(p,P,M,1),S={type:"Polygon",coordinates:[a]},a=c=null,S}return u.center=function(S){return arguments.length?(e=typeof S=="function"?S:Wc([+S[0],+S[1]]),u):e},u.radius=function(S){return arguments.length?(t=typeof S=="function"?S:Wc(+S),u):t},u.precision=function(S){return arguments.length?(i=typeof S=="function"?S:Wc(+S),u):i},u}function VP(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Ar,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Om(e,t){return Bn(e[0]-t[0])<fn&&Bn(e[1]-t[1])<fn}function gm(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function GP(e,t,i,a,c){var p=[],m=[],u,S;if(e.forEach(function(B){if(!((j=B.length-1)<=0)){var j,he=B[0],q=B[j],X;if(Om(he,q)){if(!he[2]&&!q[2]){for(c.lineStart(),u=0;u<j;++u)c.point((he=B[u])[0],he[1]);c.lineEnd();return}q[0]+=2*fn}p.push(X=new gm(he,B,null,!0)),m.push(X.o=new gm(he,null,X,!1)),p.push(X=new gm(q,B,null,!1)),m.push(X.o=new gm(q,null,X,!0))}}),!!p.length){for(m.sort(t),zS(p),zS(m),u=0,S=m.length;u<S;++u)m[u].e=i=!i;for(var P=p[0],M,b;;){for(var C=P,R=!0;C.v;)if((C=C.n)===P)return;M=C.z,c.lineStart();do{if(C.v=C.o.v=!0,C.e){if(R)for(u=0,S=M.length;u<S;++u)c.point((b=M[u])[0],b[1]);else a(C.x,C.n.x,1,c);C=C.n}else{if(R)for(M=C.p.z,u=M.length-1;u>=0;--u)c.point((b=M[u])[0],b[1]);else a(C.x,C.p.x,-1,c);C=C.p}C=C.o,M=C.z,R=!R}while(!C.v);c.lineEnd()}}}function zS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function X0(e){return Bn(e[0])<=Mn?e[0]:cs(e[0])*((Bn(e[0])+Mn)%Yi-Mn)}function ZP(e,t){var i=X0(t),a=t[1],c=en(a),p=[en(i),-sn(i),0],m=0,u=0,S=new $i;c===1?a=Lr+fn:c===-1&&(a=-Lr-fn);for(var P=0,M=e.length;P<M;++P)if(C=(b=e[P]).length)for(var b,C,R=b[C-1],B=X0(R),j=R[1]/2+yg,he=en(j),q=sn(j),X=0;X<C;++X,B=ae,he=W,q=E,R=G){var G=b[X],ae=X0(G),K=G[1]/2+yg,W=en(K),E=sn(K),O=ae-B,D=O>=0?1:-1,ee=D*O,H=ee>Mn,ve=he*W;if(S.add(Qi(ve*D*en(ee),q*E+ve*sn(ee))),m+=H?O+D*Yi:O,H^B>=i^ae>=i){var _e=Fh(tc(R),tc(G));Sg(_e);var pe=Fh(p,_e);Sg(pe);var oe=(H^O>=0?-1:1)*eo(pe[2]);(a>oe||a===oe&&(_e[0]||_e[1]))&&(u+=H^O>=0?1:-1)}}return(m<-fn||m<fn&&S<-Zf)^u&1}function WP(e,t,i,a){return function(c){var p=t(c),m=VP(),u=t(m),S=!1,P,M,b,C={point:R,lineStart:j,lineEnd:he,polygonStart:function(){C.point=q,C.lineStart=X,C.lineEnd=G,M=[],P=[]},polygonEnd:function(){C.point=R,C.lineStart=j,C.lineEnd=he,M=IP(M);var ae=ZP(P,a);M.length?(S||(c.polygonStart(),S=!0),GP(M,qR,ae,i,c)):ae&&(S||(c.polygonStart(),S=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),S&&(c.polygonEnd(),S=!1),M=P=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function R(ae,K){e(ae,K)&&c.point(ae,K)}function B(ae,K){p.point(ae,K)}function j(){C.point=B,p.lineStart()}function he(){C.point=R,p.lineEnd()}function q(ae,K){b.push([ae,K]),u.point(ae,K)}function X(){u.lineStart(),b=[]}function G(){q(b[0][0],b[0][1]),u.lineEnd();var ae=u.clean(),K=m.result(),W,E=K.length,O,D,ee;if(b.pop(),P.push(b),b=null,!!E){if(ae&1){if(D=K[0],(O=D.length-1)>0){for(S||(c.polygonStart(),S=!0),c.lineStart(),W=0;W<O;++W)c.point((ee=D[W])[0],ee[1]);c.lineEnd()}return}E>1&&ae&2&&K.push(K.pop().concat(K.shift())),M.push(K.filter(KR))}}return C}}function KR(e){return e.length>1}function qR(e,t){return((e=e.x)[0]<0?e[1]-Lr-fn:Lr-e[1])-((t=t.x)[0]<0?t[1]-Lr-fn:Lr-t[1])}const B_=WP(function(){return!0},JR,QR,[-Mn,-Lr]);function JR(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(p,m){var u=p>0?Mn:-Mn,S=Bn(p-t);Bn(S-Mn)<fn?(e.point(t,i=(i+m)/2>0?Lr:-Lr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(p,i),c=0):a!==u&&S>=Mn&&(Bn(t-a)<fn&&(t-=a*fn),Bn(p-u)<fn&&(p-=u*fn),i=YR(t,i,p,m),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),c=0),e.point(t=p,i=m),a=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function YR(e,t,i,a){var c,p,m=en(e-i);return Bn(m)>fn?$h((en(t)*(p=sn(a))*en(i)-en(a)*(c=sn(t))*en(e))/(c*p*m)):(t+a)/2}function QR(e,t,i,a){var c;if(e==null)c=i*Lr,a.point(-Mn,c),a.point(0,c),a.point(Mn,c),a.point(Mn,0),a.point(Mn,-c),a.point(0,-c),a.point(-Mn,-c),a.point(-Mn,0),a.point(-Mn,c);else if(Bn(e[0]-t[0])>fn){var p=e[0]<t[0]?Mn:-Mn;c=i*p/2,a.point(-p,c),a.point(0,c),a.point(p,c)}else a.point(t[0],t[1])}function HP(e){var t=sn(e),i=6*gn,a=t>0,c=Bn(t)>fn;function p(M,b,C,R){$P(R,e,i,C,M,b)}function m(M,b){return sn(M)*sn(b)>t}function u(M){var b,C,R,B,j;return{lineStart:function(){B=R=!1,j=1},point:function(he,q){var X=[he,q],G,ae=m(he,q),K=a?ae?0:P(he,q):ae?P(he+(he<0?Mn:-Mn),q):0;if(!b&&(B=R=ae)&&M.lineStart(),ae!==R&&(G=S(b,X),(!G||Om(b,G)||Om(X,G))&&(X[2]=1)),ae!==R)j=0,ae?(M.lineStart(),G=S(X,b),M.point(G[0],G[1])):(G=S(b,X),M.point(G[0],G[1],2),M.lineEnd()),b=G;else if(c&&b&&a^ae){var W;!(K&C)&&(W=S(X,b,!0))&&(j=0,a?(M.lineStart(),M.point(W[0][0],W[0][1]),M.point(W[1][0],W[1][1]),M.lineEnd()):(M.point(W[1][0],W[1][1]),M.lineEnd(),M.lineStart(),M.point(W[0][0],W[0][1],3)))}ae&&(!b||!Om(b,X))&&M.point(X[0],X[1]),b=X,R=ae,C=K},lineEnd:function(){R&&M.lineEnd(),b=null},clean:function(){return j|(B&&R)<<1}}}function S(M,b,C){var R=tc(M),B=tc(b),j=[1,0,0],he=Fh(R,B),q=pm(he,he),X=he[0],G=q-X*X;if(!G)return!C&&M;var ae=t*q/G,K=-t*X/G,W=Fh(j,he),E=mm(j,ae),O=mm(he,K);H0(E,O);var D=W,ee=pm(E,D),H=pm(D,D),ve=ee*ee-H*(pm(E,E)-1);if(!(ve<0)){var _e=di(ve),pe=mm(D,(-ee-_e)/H);if(H0(pe,E),pe=bg(pe),!C)return pe;var oe=M[0],ce=b[0],Y=M[1],ne=b[1],de;ce<oe&&(de=oe,oe=ce,ce=de);var be=ce-oe,Ce=Bn(be-Mn)<fn,Ue=Ce||be<fn;if(!Ce&&ne<Y&&(de=Y,Y=ne,ne=de),Ue?Ce?Y+ne>0^pe[1]<(Bn(pe[0]-oe)<fn?Y:ne):Y<=pe[1]&&pe[1]<=ne:be>Mn^(oe<=pe[0]&&pe[0]<=ce)){var Ae=mm(D,(-ee+_e)/H);return H0(Ae,E),[pe,bg(Ae)]}}}function P(M,b){var C=a?e:Mn-e,R=0;return M<-C?R|=1:M>C&&(R|=2),b<-C?R|=4:b>C&&(R|=8),R}return WP(m,u,p,a?[0,-e]:[-Mn,e-Mn])}function ej(e,t,i,a,c,p){var m=e[0],u=e[1],S=t[0],P=t[1],M=0,b=1,C=S-m,R=P-u,B;if(B=i-m,!(!C&&B>0)){if(B/=C,C<0){if(B<M)return;B<b&&(b=B)}else if(C>0){if(B>b)return;B>M&&(M=B)}if(B=c-m,!(!C&&B<0)){if(B/=C,C<0){if(B>b)return;B>M&&(M=B)}else if(C>0){if(B<M)return;B<b&&(b=B)}if(B=a-u,!(!R&&B>0)){if(B/=R,R<0){if(B<M)return;B<b&&(b=B)}else if(R>0){if(B>b)return;B>M&&(M=B)}if(B=p-u,!(!R&&B<0)){if(B/=R,R<0){if(B>b)return;B>M&&(M=B)}else if(R>0){if(B<M)return;B<b&&(b=B)}return M>0&&(e[0]=m+M*C,e[1]=u+M*R),b<1&&(t[0]=m+b*C,t[1]=u+b*R),!0}}}}}var of=1e9,ym=-of;function uy(e,t,i,a){function c(P,M){return e<=P&&P<=i&&t<=M&&M<=a}function p(P,M,b,C){var R=0,B=0;if(P==null||(R=m(P,b))!==(B=m(M,b))||S(P,M)<0^b>0)do C.point(R===0||R===3?e:i,R>1?a:t);while((R=(R+b+4)%4)!==B);else C.point(M[0],M[1])}function m(P,M){return Bn(P[0]-e)<fn?M>0?0:3:Bn(P[0]-i)<fn?M>0?2:1:Bn(P[1]-t)<fn?M>0?1:0:M>0?3:2}function u(P,M){return S(P.x,M.x)}function S(P,M){var b=m(P,1),C=m(M,1);return b!==C?b-C:b===0?M[1]-P[1]:b===1?P[0]-M[0]:b===2?P[1]-M[1]:M[0]-P[0]}return function(P){var M=P,b=VP(),C,R,B,j,he,q,X,G,ae,K,W,E={point:O,lineStart:ve,lineEnd:_e,polygonStart:ee,polygonEnd:H};function O(oe,ce){c(oe,ce)&&M.point(oe,ce)}function D(){for(var oe=0,ce=0,Y=R.length;ce<Y;++ce)for(var ne=R[ce],de=1,be=ne.length,Ce=ne[0],Ue,Ae,Fe=Ce[0],We=Ce[1];de<be;++de)Ue=Fe,Ae=We,Ce=ne[de],Fe=Ce[0],We=Ce[1],Ae<=a?We>a&&(Fe-Ue)*(a-Ae)>(We-Ae)*(e-Ue)&&++oe:We<=a&&(Fe-Ue)*(a-Ae)<(We-Ae)*(e-Ue)&&--oe;return oe}function ee(){M=b,C=[],R=[],W=!0}function H(){var oe=D(),ce=W&&oe,Y=(C=IP(C)).length;(ce||Y)&&(P.polygonStart(),ce&&(P.lineStart(),p(null,null,1,P),P.lineEnd()),Y&&GP(C,u,oe,p,P),P.polygonEnd()),M=P,C=R=B=null}function ve(){E.point=pe,R&&R.push(B=[]),K=!0,ae=!1,X=G=NaN}function _e(){C&&(pe(j,he),q&&ae&&b.rejoin(),C.push(b.result())),E.point=O,ae&&M.lineEnd()}function pe(oe,ce){var Y=c(oe,ce);if(R&&B.push([oe,ce]),K)j=oe,he=ce,q=Y,K=!1,Y&&(M.lineStart(),M.point(oe,ce));else if(Y&&ae)M.point(oe,ce);else{var ne=[X=Math.max(ym,Math.min(of,X)),G=Math.max(ym,Math.min(of,G))],de=[oe=Math.max(ym,Math.min(of,oe)),ce=Math.max(ym,Math.min(of,ce))];ej(ne,de,e,t,i,a)?(ae||(M.lineStart(),M.point(ne[0],ne[1])),M.point(de[0],de[1]),Y||M.lineEnd(),W=!1):Y&&(M.lineStart(),M.point(oe,ce),W=!1)}X=oe,G=ce,ae=Y}return E}}function tj(){var e=0,t=0,i=960,a=500,c,p,m;return m={stream:function(u){return c&&p===u?c:c=uy(e,t,i,a)(p=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],a=+u[1][1],c=p=null,m):[[e,t],[i,a]]}}}var N_,U_,Lm,Dm,Rh={sphere:Ar,point:Ar,lineStart:nj,lineEnd:Ar,polygonStart:Ar,polygonEnd:Ar};function nj(){Rh.point=ij,Rh.lineEnd=rj}function rj(){Rh.point=Rh.lineEnd=Ar}function ij(e,t){e*=gn,t*=gn,U_=e,Lm=en(t),Dm=sn(t),Rh.point=oj}function oj(e,t){e*=gn,t*=gn;var i=en(t),a=sn(t),c=Bn(e-U_),p=sn(c),m=en(c),u=a*m,S=Dm*i-Lm*a*p,P=Lm*i+Dm*a*p;N_.add(Qi(di(u*u+S*S),P)),U_=e,Lm=i,Dm=a}function XP(e){return N_=new $i,zs(e,Rh),+N_}var $_=[null,null],sj={type:"LineString",coordinates:$_};function kg(e,t){return $_[0]=e,$_[1]=t,XP(sj)}var FS={Feature:function(e,t){return zg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(zg(i[a].geometry,t))return!0;return!1}},RS={Sphere:function(){return!0},Point:function(e,t){return jS(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(jS(i[a],t))return!0;return!1},LineString:function(e,t){return OS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(OS(i[a],t))return!0;return!1},Polygon:function(e,t){return LS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(LS(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(zg(i[a],t))return!0;return!1}};function zg(e,t){return e&&RS.hasOwnProperty(e.type)?RS[e.type](e,t):!1}function jS(e,t){return kg(e,t)===0}function OS(e,t){for(var i,a,c,p=0,m=e.length;p<m;p++){if(a=kg(e[p],t),a===0||p>0&&(c=kg(e[p],e[p-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Zf*c))return!0;i=a}return!1}function LS(e,t){return!!ZP(e.map(aj),KP(t))}function aj(e){return e=e.map(KP),e.pop(),e}function KP(e){return[e[0]*gn,e[1]*gn]}function lj(e,t){return(e&&FS.hasOwnProperty(e.type)?FS[e.type]:zg)(e,t)}function DS(e,t,i){var a=dh(e,t-fn,i).concat(t);return function(c){return a.map(function(p){return[c,p]})}}function BS(e,t,i){var a=dh(e,t-fn,i).concat(t);return function(c){return a.map(function(p){return[p,c]})}}function qP(){var e,t,i,a,c,p,m,u,S=10,P=S,M=90,b=360,C,R,B,j,he=2.5;function q(){return{type:"MultiLineString",coordinates:X()}}function X(){return dh(fm(a/M)*M,i,M).map(B).concat(dh(fm(u/b)*b,m,b).map(j)).concat(dh(fm(t/S)*S,e,S).filter(function(G){return Bn(G%M)>fn}).map(C)).concat(dh(fm(p/P)*P,c,P).filter(function(G){return Bn(G%b)>fn}).map(R))}return q.lines=function(){return X().map(function(G){return{type:"LineString",coordinates:G}})},q.outline=function(){return{type:"Polygon",coordinates:[B(a).concat(j(m).slice(1),B(i).reverse().slice(1),j(u).reverse().slice(1))]}},q.extent=function(G){return arguments.length?q.extentMajor(G).extentMinor(G):q.extentMinor()},q.extentMajor=function(G){return arguments.length?(a=+G[0][0],i=+G[1][0],u=+G[0][1],m=+G[1][1],a>i&&(G=a,a=i,i=G),u>m&&(G=u,u=m,m=G),q.precision(he)):[[a,u],[i,m]]},q.extentMinor=function(G){return arguments.length?(t=+G[0][0],e=+G[1][0],p=+G[0][1],c=+G[1][1],t>e&&(G=t,t=e,e=G),p>c&&(G=p,p=c,c=G),q.precision(he)):[[t,p],[e,c]]},q.step=function(G){return arguments.length?q.stepMajor(G).stepMinor(G):q.stepMinor()},q.stepMajor=function(G){return arguments.length?(M=+G[0],b=+G[1],q):[M,b]},q.stepMinor=function(G){return arguments.length?(S=+G[0],P=+G[1],q):[S,P]},q.precision=function(G){return arguments.length?(he=+G,C=DS(p,c,90),R=BS(t,e,he),B=DS(u,m,90),j=BS(a,i,he),q):he},q.extentMajor([[-180,-90+fn],[180,90-fn]]).extentMinor([[-180,-80-fn],[180,80+fn]])}function uj(){return qP()()}function cj(e,t){var i=e[0]*gn,a=e[1]*gn,c=t[0]*gn,p=t[1]*gn,m=sn(a),u=en(a),S=sn(p),P=en(p),M=m*sn(i),b=m*en(i),C=S*sn(c),R=S*en(c),B=2*eo(di(_S(p-a)+m*S*_S(c-i))),j=en(B),he=B?function(q){var X=en(q*=B)/j,G=en(B-q)/j,ae=G*M+X*C,K=G*b+X*R,W=G*u+X*P;return[Qi(K,ae)*ur,Qi(W,di(ae*ae+K*K))*ur]}:function(){return[i*ur,a*ur]};return he.distance=B,he}const Wf=e=>e;var K0=new $i,V_=new $i,JP,YP,G_,Z_,Va={point:Ar,lineStart:Ar,lineEnd:Ar,polygonStart:function(){Va.lineStart=hj,Va.lineEnd=fj},polygonEnd:function(){Va.lineStart=Va.lineEnd=Va.point=Ar,K0.add(Bn(V_)),V_=new $i},result:function(){var e=K0/2;return K0=new $i,e}};function hj(){Va.point=dj}function dj(e,t){Va.point=QP,JP=G_=e,YP=Z_=t}function QP(e,t){V_.add(Z_*e-G_*t),G_=e,Z_=t}function fj(){QP(JP,YP)}var jh=1/0,Fg=jh,Hf=-jh,Rg=Hf,jg={point:pj,lineStart:Ar,lineEnd:Ar,polygonStart:Ar,polygonEnd:Ar,result:function(){var e=[[jh,Fg],[Hf,Rg]];return Hf=Rg=-(Fg=jh=1/0),e}};function pj(e,t){e<jh&&(jh=e),e>Hf&&(Hf=e),t<Fg&&(Fg=t),t>Rg&&(Rg=t)}var W_=0,H_=0,sf=0,Og=0,Lg=0,fh=0,X_=0,K_=0,af=0,eI,tI,la,ua,ls={point:nc,lineStart:NS,lineEnd:US,polygonStart:function(){ls.lineStart=yj,ls.lineEnd=vj},polygonEnd:function(){ls.point=nc,ls.lineStart=NS,ls.lineEnd=US},result:function(){var e=af?[X_/af,K_/af]:fh?[Og/fh,Lg/fh]:sf?[W_/sf,H_/sf]:[NaN,NaN];return W_=H_=sf=Og=Lg=fh=X_=K_=af=0,e}};function nc(e,t){W_+=e,H_+=t,++sf}function NS(){ls.point=mj}function mj(e,t){ls.point=gj,nc(la=e,ua=t)}function gj(e,t){var i=e-la,a=t-ua,c=di(i*i+a*a);Og+=c*(la+e)/2,Lg+=c*(ua+t)/2,fh+=c,nc(la=e,ua=t)}function US(){ls.point=nc}function yj(){ls.point=_j}function vj(){nI(eI,tI)}function _j(e,t){ls.point=nI,nc(eI=la=e,tI=ua=t)}function nI(e,t){var i=e-la,a=t-ua,c=di(i*i+a*a);Og+=c*(la+e)/2,Lg+=c*(ua+t)/2,fh+=c,c=ua*e-la*t,X_+=c*(la+e),K_+=c*(ua+t),af+=c*3,nc(la=e,ua=t)}function rI(e){this._context=e}rI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yi);break}}},result:Ar};var q_=new $i,q0,iI,oI,lf,uf,Xf={point:Ar,lineStart:function(){Xf.point=xj},lineEnd:function(){q0&&sI(iI,oI),Xf.point=Ar},polygonStart:function(){q0=!0},polygonEnd:function(){q0=null},result:function(){var e=+q_;return q_=new $i,e}};function xj(e,t){Xf.point=sI,iI=lf=e,oI=uf=t}function sI(e,t){lf-=e,uf-=t,q_.add(di(lf*lf+uf*uf)),lf=e,uf=t}function aI(){this._string=[]}aI.prototype={_radius:4.5,_circle:$S(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=$S(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function $S(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function wj(e,t){var i=4.5,a,c;function p(m){return m&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),zs(m,a(c))),c.result()}return p.area=function(m){return zs(m,a(Va)),Va.result()},p.measure=function(m){return zs(m,a(Xf)),Xf.result()},p.bounds=function(m){return zs(m,a(jg)),jg.result()},p.centroid=function(m){return zs(m,a(ls)),ls.result()},p.projection=function(m){return arguments.length?(a=m==null?(e=null,Wf):(e=m).stream,p):e},p.context=function(m){return arguments.length?(c=m==null?(t=null,new aI):new rI(t=m),typeof i!="function"&&c.pointRadius(i),p):t},p.pointRadius=function(m){return arguments.length?(i=typeof m=="function"?m:(c.pointRadius(+m),+m),p):i},p.projection(e).context(t)}function bj(e){return{stream:sp(e)}}function sp(e){return function(t){var i=new J_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function J_(){}J_.prototype={constructor:J_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function mx(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),zs(i,e.stream(jg)),t(jg.result()),a!=null&&e.clipExtent(a),e}function cy(e,t,i){return mx(e,function(a){var c=t[1][0]-t[0][0],p=t[1][1]-t[0][1],m=Math.min(c/(a[1][0]-a[0][0]),p/(a[1][1]-a[0][1])),u=+t[0][0]+(c-m*(a[1][0]+a[0][0]))/2,S=+t[0][1]+(p-m*(a[1][1]+a[0][1]))/2;e.scale(150*m).translate([u,S])},i)}function gx(e,t,i){return cy(e,[[0,0],t],i)}function yx(e,t,i){return mx(e,function(a){var c=+t,p=c/(a[1][0]-a[0][0]),m=(c-p*(a[1][0]+a[0][0]))/2,u=-p*a[0][1];e.scale(150*p).translate([m,u])},i)}function vx(e,t,i){return mx(e,function(a){var c=+t,p=c/(a[1][1]-a[0][1]),m=-p*a[0][0],u=(c-p*(a[1][1]+a[0][1]))/2;e.scale(150*p).translate([m,u])},i)}var VS=16,Sj=sn(30*gn);function GS(e,t){return+t?Tj(e,t):Ej(e)}function Ej(e){return sp({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function Tj(e,t){function i(a,c,p,m,u,S,P,M,b,C,R,B,j,he){var q=P-a,X=M-c,G=q*q+X*X;if(G>4*t&&j--){var ae=m+C,K=u+R,W=S+B,E=di(ae*ae+K*K+W*W),O=eo(W/=E),D=Bn(Bn(W)-1)<fn||Bn(p-b)<fn?(p+b)/2:Qi(K,ae),ee=e(D,O),H=ee[0],ve=ee[1],_e=H-a,pe=ve-c,oe=X*_e-q*pe;(oe*oe/G>t||Bn((q*_e+X*pe)/G-.5)>.3||m*C+u*R+S*B<Sj)&&(i(a,c,p,m,u,S,H,ve,D,ae/=E,K/=E,W,j,he),he.point(H,ve),i(H,ve,D,ae,K,W,P,M,b,C,R,B,j,he))}}return function(a){var c,p,m,u,S,P,M,b,C,R,B,j,he={point:q,lineStart:X,lineEnd:ae,polygonStart:function(){a.polygonStart(),he.lineStart=K},polygonEnd:function(){a.polygonEnd(),he.lineStart=X}};function q(O,D){O=e(O,D),a.point(O[0],O[1])}function X(){b=NaN,he.point=G,a.lineStart()}function G(O,D){var ee=tc([O,D]),H=e(O,D);i(b,C,M,R,B,j,b=H[0],C=H[1],M=O,R=ee[0],B=ee[1],j=ee[2],VS,a),a.point(b,C)}function ae(){he.point=q,a.lineEnd()}function K(){X(),he.point=W,he.lineEnd=E}function W(O,D){G(c=O,D),p=b,m=C,u=R,S=B,P=j,he.point=G}function E(){i(b,C,M,R,B,j,p,m,c,u,S,P,VS,a),he.lineEnd=ae,ae()}return he}}var Cj=sp({point:function(e,t){this.stream.point(e*gn,t*gn)}});function Pj(e){return sp({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function Ij(e,t,i,a,c){function p(m,u){return m*=a,u*=c,[t+e*m,i-e*u]}return p.invert=function(m,u){return[(m-t)/e*a,(i-u)/e*c]},p}function ZS(e,t,i,a,c,p){if(!p)return Ij(e,t,i,a,c);var m=sn(p),u=en(p),S=m*e,P=u*e,M=m/e,b=u/e,C=(u*i-m*t)/e,R=(u*t+m*i)/e;function B(j,he){return j*=a,he*=c,[S*j-P*he+t,i-P*j-S*he]}return B.invert=function(j,he){return[a*(M*j-b*he+C),c*(R-b*j-M*he)]},B}function ya(e){return _x(function(){return e})()}function _x(e){var t,i=150,a=480,c=250,p=0,m=0,u=0,S=0,P=0,M,b=0,C=1,R=1,B=null,j=B_,he=null,q,X,G,ae=Wf,K=.5,W,E,O,D,ee;function H(oe){return O(oe[0]*gn,oe[1]*gn)}function ve(oe){return oe=O.invert(oe[0],oe[1]),oe&&[oe[0]*ur,oe[1]*ur]}H.stream=function(oe){return D&&ee===oe?D:D=Cj(Pj(M)(j(W(ae(ee=oe)))))},H.preclip=function(oe){return arguments.length?(j=oe,B=void 0,pe()):j},H.postclip=function(oe){return arguments.length?(ae=oe,he=q=X=G=null,pe()):ae},H.clipAngle=function(oe){return arguments.length?(j=+oe?HP(B=oe*gn):(B=null,B_),pe()):B*ur},H.clipExtent=function(oe){return arguments.length?(ae=oe==null?(he=q=X=G=null,Wf):uy(he=+oe[0][0],q=+oe[0][1],X=+oe[1][0],G=+oe[1][1]),pe()):he==null?null:[[he,q],[X,G]]},H.scale=function(oe){return arguments.length?(i=+oe,_e()):i},H.translate=function(oe){return arguments.length?(a=+oe[0],c=+oe[1],_e()):[a,c]},H.center=function(oe){return arguments.length?(p=oe[0]%360*gn,m=oe[1]%360*gn,_e()):[p*ur,m*ur]},H.rotate=function(oe){return arguments.length?(u=oe[0]%360*gn,S=oe[1]%360*gn,P=oe.length>2?oe[2]%360*gn:0,_e()):[u*ur,S*ur,P*ur]},H.angle=function(oe){return arguments.length?(b=oe%360*gn,_e()):b*ur},H.reflectX=function(oe){return arguments.length?(C=oe?-1:1,_e()):C<0},H.reflectY=function(oe){return arguments.length?(R=oe?-1:1,_e()):R<0},H.precision=function(oe){return arguments.length?(W=GS(E,K=oe*oe),pe()):di(K)},H.fitExtent=function(oe,ce){return cy(H,oe,ce)},H.fitSize=function(oe,ce){return gx(H,oe,ce)},H.fitWidth=function(oe,ce){return yx(H,oe,ce)},H.fitHeight=function(oe,ce){return vx(H,oe,ce)};function _e(){var oe=ZS(i,0,0,C,R,b).apply(null,t(p,m)),ce=ZS(i,a-oe[0],c-oe[1],C,R,b);return M=px(u,S,P),E=L_(t,ce),O=L_(M,E),W=GS(E,K),pe()}function pe(){return D=ee=null,H}return function(){return t=e.apply(this,arguments),H.invert=t.invert&&ve,_e()}}function xx(e){var t=0,i=Mn/3,a=_x(e),c=a(t,i);return c.parallels=function(p){return arguments.length?a(t=p[0]*gn,i=p[1]*gn):[t*ur,i*ur]},c}function Aj(e){var t=sn(e);function i(a,c){return[a*t,en(c)/t]}return i.invert=function(a,c){return[a/t,eo(c*t)]},i}function lI(e,t){var i=en(e),a=(i+en(t))/2;if(Bn(a)<fn)return Aj(e);var c=1+i*(2*a-i),p=di(c)/a;function m(u,S){var P=di(c-2*a*en(S))/a;return[P*en(u*=a),p-P*sn(u)]}return m.invert=function(u,S){var P=p-S,M=Qi(u,Bn(P))*cs(P);return P*a<0&&(M-=Mn*cs(u)*cs(P)),[M/a,eo((c-(u*u+P*P)*a*a)/(2*a))]},m}function Dg(){return xx(lI).scale(155.424).center([0,33.6442])}function uI(){return Dg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Mj(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function kj(){var e,t,i=uI(),a,c=Dg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p,m=Dg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,S,P={point:function(C,R){S=[C,R]}};function M(C){var R=C[0],B=C[1];return S=null,a.point(R,B),S||(p.point(R,B),S)||(u.point(R,B),S)}M.invert=function(C){var R=i.scale(),B=i.translate(),j=(C[0]-B[0])/R,he=(C[1]-B[1])/R;return(he>=.12&&he<.234&&j>=-.425&&j<-.214?c:he>=.166&&he<.234&&j>=-.214&&j<-.115?m:i).invert(C)},M.stream=function(C){return e&&t===C?e:e=Mj([i.stream(t=C),c.stream(C),m.stream(C)])},M.precision=function(C){return arguments.length?(i.precision(C),c.precision(C),m.precision(C),b()):i.precision()},M.scale=function(C){return arguments.length?(i.scale(C),c.scale(C*.35),m.scale(C),M.translate(i.translate())):i.scale()},M.translate=function(C){if(!arguments.length)return i.translate();var R=i.scale(),B=+C[0],j=+C[1];return a=i.translate(C).clipExtent([[B-.455*R,j-.238*R],[B+.455*R,j+.238*R]]).stream(P),p=c.translate([B-.307*R,j+.201*R]).clipExtent([[B-.425*R+fn,j+.12*R+fn],[B-.214*R-fn,j+.234*R-fn]]).stream(P),u=m.translate([B-.205*R,j+.212*R]).clipExtent([[B-.214*R+fn,j+.166*R+fn],[B-.115*R-fn,j+.234*R-fn]]).stream(P),b()},M.fitExtent=function(C,R){return cy(M,C,R)},M.fitSize=function(C,R){return gx(M,C,R)},M.fitWidth=function(C,R){return yx(M,C,R)},M.fitHeight=function(C,R){return vx(M,C,R)};function b(){return e=t=null,M}return M.scale(1070)}function cI(e){return function(t,i){var a=sn(t),c=sn(i),p=e(a*c);return p===1/0?[2,0]:[p*c*en(t),p*en(i)]}}function ap(e){return function(t,i){var a=di(t*t+i*i),c=e(a),p=en(c),m=sn(c);return[Qi(t*p,a*m),eo(a&&i*p/a)]}}var wx=cI(function(e){return di(2/(1+e))});wx.invert=ap(function(e){return 2*eo(e/2)});function zj(){return ya(wx).scale(124.75).clipAngle(180-.001)}var bx=cI(function(e){return(e=MP(e))&&e/en(e)});bx.invert=ap(function(e){return e});function Fj(){return ya(bx).scale(79.4188).clipAngle(180-.001)}function lp(e,t){return[e,vg(dx((Lr+t)/2))]}lp.invert=function(e,t){return[e,2*$h(AP(t))-Lr]};function Rj(){return hI(lp).scale(961/Yi)}function hI(e){var t=ya(e),i=t.center,a=t.scale,c=t.translate,p=t.clipExtent,m=null,u,S,P;t.scale=function(b){return arguments.length?(a(b),M()):a()},t.translate=function(b){return arguments.length?(c(b),M()):c()},t.center=function(b){return arguments.length?(i(b),M()):i()},t.clipExtent=function(b){return arguments.length?(b==null?m=u=S=P=null:(m=+b[0][0],u=+b[0][1],S=+b[1][0],P=+b[1][1]),M()):m==null?null:[[m,u],[S,P]]};function M(){var b=Mn*a(),C=t(UP(t.rotate()).invert([0,0]));return p(m==null?[[C[0]-b,C[1]-b],[C[0]+b,C[1]+b]]:e===lp?[[Math.max(C[0]-b,m),u],[Math.min(C[0]+b,S),P]]:[[m,Math.max(C[1]-b,u)],[S,Math.min(C[1]+b,P)]])}return M()}function vm(e){return dx((Lr+e)/2)}function dI(e,t){var i=sn(e),a=e===t?en(e):vg(i/sn(t))/vg(vm(t)/vm(e)),c=i*W0(vm(e),a)/a;if(!a)return lp;function p(m,u){c>0?u<-Lr+fn&&(u=-Lr+fn):u>Lr-fn&&(u=Lr-fn);var S=c/W0(vm(u),a);return[S*en(a*m),c-S*sn(a*m)]}return p.invert=function(m,u){var S=c-u,P=cs(a)*di(m*m+S*S),M=Qi(m,Bn(S))*cs(S);return S*a<0&&(M-=Mn*cs(m)*cs(S)),[M/a,2*$h(W0(c/P,1/a))-Lr]},p}function jj(){return xx(dI).scale(109.5).parallels([30,30])}function Kf(e,t){return[e,t]}Kf.invert=Kf;function Oj(){return ya(Kf).scale(152.63)}function fI(e,t){var i=sn(e),a=e===t?en(e):(i-sn(t))/(t-e),c=i/a+e;if(Bn(a)<fn)return Kf;function p(m,u){var S=c-u,P=a*m;return[S*en(P),c-S*sn(P)]}return p.invert=function(m,u){var S=c-u,P=Qi(m,Bn(S))*cs(S);return S*a<0&&(P-=Mn*cs(m)*cs(S)),[P/a,c-cs(a)*di(m*m+S*S)]},p}function Lj(){return xx(fI).scale(131.154).center([0,13.9389])}var bf=1.340264,Sf=-.081106,Ef=893e-6,Tf=.003796,Bg=di(3)/2,Dj=12;function Sx(e,t){var i=eo(Bg*en(t)),a=i*i,c=a*a*a;return[e*sn(i)/(Bg*(bf+3*Sf*a+c*(7*Ef+9*Tf*a))),i*(bf+Sf*a+c*(Ef+Tf*a))]}Sx.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,p=0,m,u,S;p<Dj&&(u=i*(bf+Sf*a+c*(Ef+Tf*a))-t,S=bf+3*Sf*a+c*(7*Ef+9*Tf*a),i-=m=u/S,a=i*i,c=a*a*a,!(Bn(m)<Zf));++p);return[Bg*e*(bf+3*Sf*a+c*(7*Ef+9*Tf*a))/sn(i),eo(en(i)/Bg)]};function Bj(){return ya(Sx).scale(177.158)}function Ex(e,t){var i=sn(t),a=sn(e)*i;return[i*en(e)/a,en(t)/a]}Ex.invert=ap($h);function Nj(){return ya(Ex).scale(144.049).clipAngle(60)}function Uj(){var e=1,t=0,i=0,a=1,c=1,p=0,m,u,S=null,P,M,b,C=1,R=1,B=sp({point:function(ae,K){var W=G([ae,K]);this.stream.point(W[0],W[1])}}),j=Wf,he,q;function X(){return C=e*a,R=e*c,he=q=null,G}function G(ae){var K=ae[0]*C,W=ae[1]*R;if(p){var E=W*m-K*u;K=K*m+W*u,W=E}return[K+t,W+i]}return G.invert=function(ae){var K=ae[0]-t,W=ae[1]-i;if(p){var E=W*m+K*u;K=K*m-W*u,W=E}return[K/C,W/R]},G.stream=function(ae){return he&&q===ae?he:he=B(j(q=ae))},G.postclip=function(ae){return arguments.length?(j=ae,S=P=M=b=null,X()):j},G.clipExtent=function(ae){return arguments.length?(j=ae==null?(S=P=M=b=null,Wf):uy(S=+ae[0][0],P=+ae[0][1],M=+ae[1][0],b=+ae[1][1]),X()):S==null?null:[[S,P],[M,b]]},G.scale=function(ae){return arguments.length?(e=+ae,X()):e},G.translate=function(ae){return arguments.length?(t=+ae[0],i=+ae[1],X()):[t,i]},G.angle=function(ae){return arguments.length?(p=ae%360*gn,u=en(p),m=sn(p),X()):p*ur},G.reflectX=function(ae){return arguments.length?(a=ae?-1:1,X()):a<0},G.reflectY=function(ae){return arguments.length?(c=ae?-1:1,X()):c<0},G.fitExtent=function(ae,K){return cy(G,ae,K)},G.fitSize=function(ae,K){return gx(G,ae,K)},G.fitWidth=function(ae,K){return yx(G,ae,K)},G.fitHeight=function(ae,K){return vx(G,ae,K)},G}function Tx(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}Tx.invert=function(e,t){var i=t,a=25,c;do{var p=i*i,m=p*p;i-=c=(i*(1.007226+p*(.015085+m*(-.044475+.028874*p-.005916*m)))-t)/(1.007226+p*(.015085*3+m*(-.044475*7+.028874*9*p-.005916*11*m)))}while(Bn(c)>fn&&--a>0);return[e/(.8707+(p=i*i)*(-.131979+p*(-.013791+p*p*p*(.003971-.001529*p)))),i]};function $j(){return ya(Tx).scale(175.295)}function Cx(e,t){return[sn(t)*en(e),en(t)]}Cx.invert=ap(eo);function Vj(){return ya(Cx).scale(249.5).clipAngle(90+fn)}function Px(e,t){var i=sn(t),a=1+sn(e)*i;return[i*en(e)/a,en(t)/a]}Px.invert=ap(function(e){return 2*$h(e)});function Gj(){return ya(Px).scale(250).clipAngle(142)}function Ix(e,t){return[vg(dx((Lr+t)/2)),-e]}Ix.invert=function(e,t){return[-t,2*$h(AP(e))-Lr]};function Zj(){var e=hI(Ix),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const Wj=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:uI,geoAlbersUsa:kj,geoArea:LR,geoAzimuthalEqualArea:zj,geoAzimuthalEqualAreaRaw:wx,geoAzimuthalEquidistant:Fj,geoAzimuthalEquidistantRaw:bx,geoBounds:UR,geoCentroid:HR,geoCircle:XR,geoClipAntimeridian:B_,geoClipCircle:HP,geoClipExtent:tj,geoClipRectangle:uy,geoConicConformal:jj,geoConicConformalRaw:dI,geoConicEqualArea:Dg,geoConicEqualAreaRaw:lI,geoConicEquidistant:Lj,geoConicEquidistantRaw:fI,geoContains:lj,geoDistance:kg,geoEqualEarth:Bj,geoEqualEarthRaw:Sx,geoEquirectangular:Oj,geoEquirectangularRaw:Kf,geoGnomonic:Nj,geoGnomonicRaw:Ex,geoGraticule:qP,geoGraticule10:uj,geoIdentity:Uj,geoInterpolate:cj,geoLength:XP,geoMercator:Rj,geoMercatorRaw:lp,geoNaturalEarth1:$j,geoNaturalEarth1Raw:Tx,geoOrthographic:Vj,geoOrthographicRaw:Cx,geoPath:wj,geoProjection:ya,geoProjectionMutator:_x,geoRotation:UP,geoStereographic:Gj,geoStereographicRaw:Px,geoStream:zs,geoTransform:bj,geoTransverseMercator:Zj,geoTransverseMercatorRaw:Ix},Symbol.toStringTag,{value:"Module"})),Hj=i1(Wj);var su=2*Math.PI*6378137/2,Xj=Math.PI/180;function pI(e){return e=e||256,2*Math.PI*6378137/e}function Kj(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function Y_(e,t,i){var a=mI(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function mI(e,t,i){var a=t,c=Ox(e[0]),p=jx(e[1]),m=Math.sin(p*Xj),u=Math.pow(2,a),S=u*(c/360+.5),P=u*(.5-.25*Math.log((1+m)/(1-m))/Math.PI);return sc([S,P,a],i)}function qj(e,t=6){var i=e[0],a=e[1],c=e[2],p=e[3],m=(i-c)/2+c,u=(a-p)/2+p;return t!=null&&(m=Number(m.toFixed(t)),u=Number(u.toFixed(t))),[m,u]}function Ng(e,t,i={enable:!0,decimal:1}){e=hy(e,t);var a=e[0],c=e[1],p=a*su/180,m=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return m=m*su/180,i.enable&&(p=Number(p.toFixed(i.decimal)),m=Number(m.toFixed(i.decimal))),[p,m]}function Q_(e,t=6){var i=e[0],a=e[1],c=i/su*180,p=a/su*180;return p=180/Math.PI*(2*Math.atan(Math.exp(p*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),p=Number(p.toFixed(t))),[c,p]}function Ax(e,t,i){var a=e[0],c=e[1],p=Fx(t,i),m=(a+su)/p,u=(c+su)/p;return[m,u,t]}function gI(e,t,i){e=hy(e,i);var a=Ng(e),c=Ax(a,t);return Mx(c)}function Jj(e,t,i){if(e=hy(e,i),t===0)return[0,0,0];var a=gI(e,t);return vI(a)}function Yj(e,t){if(t===0)return[0,0,0];var i=Ax(e,t);return Mx(i)}function e1(e,t,i=1){var a=e[0],c=e[1],p=e[2],m=Fx(p,t),u=a*m-su,S=c*m-su;return i!=null&&(u=Number(u.toFixed(i)),S=Number(S.toFixed(i))),[u,S]}function Mx(e,t,i){t=t||256;var a=e[0],c=e[1],p=e[2];if(p===0)return[0,0,0];zx(p);var m=Math.ceil(a/t)-1,u=Math.ceil(c/t)-1;return m<0&&(m=0),u<0&&(u=0),[m,u,p]}function kx(e,t,i){sc(e,i),t=t||256;var a=e[0],c=e[1],p=e[2],m=e1([a*t,c*t,p]),u=e1([(a+1)*t,(c+1)*t,p]);return[m[0],m[1],u[0],u[1]]}function yI(e,t){sc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var p=kx([i,a,c]),m=p[0],u=p[1],S=p[2],P=p[3],M=Q_([m,u,c]),b=Q_([S,P,c]);return[M[0],M[1],b[0],b[1]]}function Qj(e){var t=up(e);return kx(t)}function eO(e){var t=up(e);return yI(t)}function vI(e,t){sc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var p=i,m=Math.pow(2,c)-1-a;return[p,m,c]}function up(e){var t=e[0],i=e[1],a=e[2],c=t,p=Math.pow(2,a)-i-1;return[c,p,a]}function tO(e){var t=up(e);return _I(t)}function _I(e,t){sc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var p="";return a=Math.pow(2,c)-1-a,Rx(c,0,-1).map(function(m){var u=0,S=1<<m-1;i&S&&(u+=1),a&S&&(u+=2),p=p.concat(u)}),p}function nO(e){var t=xI(e);return up(t)}function xI(e){var t=0,i=0,a=e.length;return Rx(a,0,-1).map(function(c){var p=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=p;break;case 2:i+=p;break;case 3:t+=p,i+=p;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function rO(e){var t=Ng([e[0],e[1]]),i=Ng([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function sc(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=zx(c),e=wI(e),e}function wI(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function zx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function hy(e,t){if(t===!1)return e;var i=Ox(e[0]),a=jx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function Fx(e,t){return pI(t)/Math.pow(2,e)}function Rx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),p=0;p<a;p++,e+=i)c[p]=e;return c}function iO(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(p){p[0]<t&&(t=p[0]),p[1]<i&&(i=p[1]),p[2]>a&&(a=p[2]),p[3]>c&&(c=p[3])}),[t,i,a,c]}}function oO(e){try{return sc(e),!0}catch{return!1}}function jx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Ox(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function sO(e){var t=Y_([e[0],e[1]],32),i=Y_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=aO(a);if(c===0)return[0,0,0];var p=a[0]>>>32-c,m=a[1]>>>32-c;return[p,m,c]}function aO(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const lO=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:qj,bboxToMeters:rO,bboxToTile:sO,googleToBBox:eO,googleToBBoxMeters:Qj,googleToQuadkey:tO,googleToTile:up,hash:Kj,initialResolution:pI,latitude:jx,lngLatToGoogle:Jj,lngLatToMeters:Ng,lngLatToTile:gI,longitude:Ox,maxBBox:iO,metersToLngLat:Q_,metersToPixels:Ax,metersToTile:Yj,pixelsToMeters:e1,pixelsToTile:Mx,pointToTile:Y_,pointToTileFraction:mI,quadkeyToGoogle:xI,quadkeyToTile:nO,range:Rx,resolution:Fx,tileToBBox:yI,tileToBBoxMeters:kx,tileToGoogle:vI,tileToQuadkey:_I,validTile:oO,validateLngLat:hy,validateTile:sc,validateZoom:zx,wrapTile:wI},Symbol.toStringTag,{value:"Module"})),uO=i1(lO);var dy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */dy.read=function(e,t,i,a,c){var p,m,u=c*8-a-1,S=(1<<u)-1,P=S>>1,M=-7,b=i?c-1:0,C=i?-1:1,R=e[t+b];for(b+=C,p=R&(1<<-M)-1,R>>=-M,M+=u;M>0;p=p*256+e[t+b],b+=C,M-=8);for(m=p&(1<<-M)-1,p>>=-M,M+=a;M>0;m=m*256+e[t+b],b+=C,M-=8);if(p===0)p=1-P;else{if(p===S)return m?NaN:(R?-1:1)*(1/0);m=m+Math.pow(2,a),p=p-P}return(R?-1:1)*m*Math.pow(2,p-a)};dy.write=function(e,t,i,a,c,p){var m,u,S,P=p*8-c-1,M=(1<<P)-1,b=M>>1,C=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=a?0:p-1,B=a?1:-1,j=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,m=M):(m=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-m))<1&&(m--,S*=2),m+b>=1?t+=C/S:t+=C*Math.pow(2,1-b),t*S>=2&&(m++,S/=2),m+b>=M?(u=0,m=M):m+b>=1?(u=(t*S-1)*Math.pow(2,c),m=m+b):(u=t*Math.pow(2,b-1)*Math.pow(2,c),m=0));c>=8;e[i+R]=u&255,R+=B,u/=256,c-=8);for(m=m<<c|u,P+=c;P>0;e[i+R]=m&255,R+=B,m/=256,P-=8);e[i+R-B]|=j*128};var cO=Xn,_m=dy;function Xn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0;Xn.Fixed64=1;Xn.Bytes=2;Xn.Fixed32=5;var t1=65536*65536,WS=1/t1,hO=12,bI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Xn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,p=this.pos;this.type=a&7,e(c,t,this),this.pos===p&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=xm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=XS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=xm(this.buf,this.pos)+xm(this.buf,this.pos+4)*t1;return this.pos+=8,e},readSFixed64:function(){var e=xm(this.buf,this.pos)+XS(this.buf,this.pos+4)*t1;return this.pos+=8,e},readFloat:function(){var e=_m.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=_m.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,dO(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=hO&&bI?CO(this.buf,t,e):TO(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xn.Bytes)return e.push(this.readVarint(t));var i=Ba(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSVarint());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xn.Bytes)return e.push(this.readBoolean());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFloat());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xn.Bytes)return e.push(this.readDouble());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed32());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed32());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed64());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed64());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xn.Fixed32)this.pos+=4;else if(t===Xn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Xc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Xc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Xc(this.buf,e&-1,this.pos),Xc(this.buf,Math.floor(e*WS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Xc(this.buf,e&-1,this.pos),Xc(this.buf,Math.floor(e*WS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){fO(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=PO(this.buf,e,this.pos);var i=this.pos-t;i>=128&&HS(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),_m.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),_m.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&HS(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Xn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,gO,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,yO,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,xO,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,vO,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,_O,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,wO,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,bO,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,SO,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,EO,t)},writeBytesField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function dO(e,t,i){var a=i.buf,c,p;if(p=a[i.pos++],c=(p&112)>>4,p<128||(p=a[i.pos++],c|=(p&127)<<3,p<128)||(p=a[i.pos++],c|=(p&127)<<10,p<128)||(p=a[i.pos++],c|=(p&127)<<17,p<128)||(p=a[i.pos++],c|=(p&127)<<24,p<128)||(p=a[i.pos++],c|=(p&1)<<31,p<128))return Hc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Ba(e){return e.type===Xn.Bytes?e.readVarint()+e.pos:e.pos+1}function Hc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function fO(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),pO(i,a,t),mO(a,t)}function pO(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function mO(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function HS(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function gO(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function yO(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function vO(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function _O(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function xO(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function wO(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function bO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function SO(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function EO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function xm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Xc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function XS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function TO(e,t,i){for(var a="",c=t;c<i;){var p=e[c],m=null,u=p>239?4:p>223?3:p>191?2:1;if(c+u>i)break;var S,P,M;u===1?p<128&&(m=p):u===2?(S=e[c+1],(S&192)===128&&(m=(p&31)<<6|S&63,m<=127&&(m=null))):u===3?(S=e[c+1],P=e[c+2],(S&192)===128&&(P&192)===128&&(m=(p&15)<<12|(S&63)<<6|P&63,(m<=2047||m>=55296&&m<=57343)&&(m=null))):u===4&&(S=e[c+1],P=e[c+2],M=e[c+3],(S&192)===128&&(P&192)===128&&(M&192)===128&&(m=(p&15)<<18|(S&63)<<12|(P&63)<<6|M&63,(m<=65535||m>=1114112)&&(m=null))),m===null?(m=65533,u=1):m>65535&&(m-=65536,a+=String.fromCharCode(m>>>10&1023|55296),m=56320|m&1023),a+=String.fromCharCode(m),c+=u}return a}function CO(e,t,i){return bI.decode(e.subarray(t,i))}function PO(e,t,i){for(var a=0,c,p;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(p)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,p=c;continue}else c=p-55296<<10|c-56320|65536,p=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):p=c;continue}else p&&(e[i++]=239,e[i++]=191,e[i++]=189,p=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Lx={exports:{}},SI=function(t,i){return function(){for(var c=new Array(arguments.length),p=0;p<c.length;p++)c[p]=arguments[p];return t.apply(i,c)}},IO=SI,ac=Object.prototype.toString;function Dx(e){return ac.call(e)==="[object Array]"}function n1(e){return typeof e>"u"}function AO(e){return e!==null&&!n1(e)&&e.constructor!==null&&!n1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function MO(e){return ac.call(e)==="[object ArrayBuffer]"}function kO(e){return typeof FormData<"u"&&e instanceof FormData}function zO(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function FO(e){return typeof e=="string"}function RO(e){return typeof e=="number"}function EI(e){return e!==null&&typeof e=="object"}function Bm(e){if(ac.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function jO(e){return ac.call(e)==="[object Date]"}function OO(e){return ac.call(e)==="[object File]"}function LO(e){return ac.call(e)==="[object Blob]"}function TI(e){return ac.call(e)==="[object Function]"}function DO(e){return EI(e)&&TI(e.pipe)}function BO(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function NO(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function UO(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Bx(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Dx(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function r1(){var e={};function t(c,p){Bm(e[p])&&Bm(c)?e[p]=r1(e[p],c):Bm(c)?e[p]=r1({},c):Dx(c)?e[p]=c.slice():e[p]=c}for(var i=0,a=arguments.length;i<a;i++)Bx(arguments[i],t);return e}function $O(e,t,i){return Bx(t,function(c,p){i&&typeof c=="function"?e[p]=IO(c,i):e[p]=c}),e}function VO(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Wo={isArray:Dx,isArrayBuffer:MO,isBuffer:AO,isFormData:kO,isArrayBufferView:zO,isString:FO,isNumber:RO,isObject:EI,isPlainObject:Bm,isUndefined:n1,isDate:jO,isFile:OO,isBlob:LO,isFunction:TI,isStream:DO,isURLSearchParams:BO,isStandardBrowserEnv:UO,forEach:Bx,merge:r1,extend:$O,trim:NO,stripBOM:VO},Kc=Wo;function KS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var CI=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Kc.isURLSearchParams(i))c=i.toString();else{var p=[];Kc.forEach(i,function(S,P){S===null||typeof S>"u"||(Kc.isArray(S)?P=P+"[]":S=[S],Kc.forEach(S,function(b){Kc.isDate(b)?b=b.toISOString():Kc.isObject(b)&&(b=JSON.stringify(b)),p.push(KS(P)+"="+KS(b))}))}),c=p.join("&")}if(c){var m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},GO=Wo;function fy(){this.handlers=[]}fy.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};fy.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};fy.prototype.forEach=function(t){GO.forEach(this.handlers,function(a){a!==null&&t(a)})};var ZO=fy,WO=Wo,HO=function(t,i){WO.forEach(t,function(c,p){p!==i&&p.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[p])})},PI=function(t,i,a,c,p){return t.config=i,a&&(t.code=a),t.request=c,t.response=p,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},J0,qS;function II(){if(qS)return J0;qS=1;var e=PI;return J0=function(i,a,c,p,m){var u=new Error(i);return e(u,a,c,p,m)},J0}var Y0,JS;function XO(){if(JS)return Y0;JS=1;var e=II();return Y0=function(i,a,c){var p=c.config.validateStatus;!c.status||!p||p(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},Y0}var Q0,YS;function KO(){if(YS)return Q0;YS=1;var e=Wo;return Q0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,p,m,u,S){var P=[];P.push(a+"="+encodeURIComponent(c)),e.isNumber(p)&&P.push("expires="+new Date(p).toGMTString()),e.isString(m)&&P.push("path="+m),e.isString(u)&&P.push("domain="+u),S===!0&&P.push("secure"),document.cookie=P.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Q0}var ev,QS;function qO(){return QS||(QS=1,ev=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),ev}var tv,eE;function JO(){return eE||(eE=1,tv=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),tv}var nv,tE;function YO(){if(tE)return nv;tE=1;var e=qO(),t=JO();return nv=function(a,c){return a&&!e(c)?t(a,c):c},nv}var rv,nE;function QO(){if(nE)return rv;nE=1;var e=Wo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return rv=function(a){var c={},p,m,u;return a&&e.forEach(a.split(`
`),function(P){if(u=P.indexOf(":"),p=e.trim(P.substr(0,u)).toLowerCase(),m=e.trim(P.substr(u+1)),p){if(c[p]&&t.indexOf(p)>=0)return;p==="set-cookie"?c[p]=(c[p]?c[p]:[]).concat([m]):c[p]=c[p]?c[p]+", "+m:m}}),c},rv}var iv,rE;function eL(){if(rE)return iv;rE=1;var e=Wo;return iv=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function p(m){var u=m;return i&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=p(window.location.href),function(u){var S=e.isString(u)?p(u):u;return S.protocol===c.protocol&&S.host===c.host}}():function(){return function(){return!0}}(),iv}var ov,iE;function oE(){if(iE)return ov;iE=1;var e=Wo,t=XO(),i=KO(),a=CI,c=YO(),p=QO(),m=eL(),u=II();return ov=function(P){return new Promise(function(b,C){var R=P.data,B=P.headers,j=P.responseType;e.isFormData(R)&&delete B["Content-Type"];var he=new XMLHttpRequest;if(P.auth){var q=P.auth.username||"",X=P.auth.password?unescape(encodeURIComponent(P.auth.password)):"";B.Authorization="Basic "+btoa(q+":"+X)}var G=c(P.baseURL,P.url);he.open(P.method.toUpperCase(),a(G,P.params,P.paramsSerializer),!0),he.timeout=P.timeout;function ae(){if(he){var W="getAllResponseHeaders"in he?p(he.getAllResponseHeaders()):null,E=!j||j==="text"||j==="json"?he.responseText:he.response,O={data:E,status:he.status,statusText:he.statusText,headers:W,config:P,request:he};t(b,C,O),he=null}}if("onloadend"in he?he.onloadend=ae:he.onreadystatechange=function(){!he||he.readyState!==4||he.status===0&&!(he.responseURL&&he.responseURL.indexOf("file:")===0)||setTimeout(ae)},he.onabort=function(){he&&(C(u("Request aborted",P,"ECONNABORTED",he)),he=null)},he.onerror=function(){C(u("Network Error",P,null,he)),he=null},he.ontimeout=function(){var E="timeout of "+P.timeout+"ms exceeded";P.timeoutErrorMessage&&(E=P.timeoutErrorMessage),C(u(E,P,P.transitional&&P.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",he)),he=null},e.isStandardBrowserEnv()){var K=(P.withCredentials||m(G))&&P.xsrfCookieName?i.read(P.xsrfCookieName):void 0;K&&(B[P.xsrfHeaderName]=K)}"setRequestHeader"in he&&e.forEach(B,function(E,O){typeof R>"u"&&O.toLowerCase()==="content-type"?delete B[O]:he.setRequestHeader(O,E)}),e.isUndefined(P.withCredentials)||(he.withCredentials=!!P.withCredentials),j&&j!=="json"&&(he.responseType=P.responseType),typeof P.onDownloadProgress=="function"&&he.addEventListener("progress",P.onDownloadProgress),typeof P.onUploadProgress=="function"&&he.upload&&he.upload.addEventListener("progress",P.onUploadProgress),P.cancelToken&&P.cancelToken.promise.then(function(E){he&&(he.abort(),C(E),he=null)}),R||(R=null),he.send(R)})},ov}var Ti=Wo,sE=HO,tL=PI,nL={"Content-Type":"application/x-www-form-urlencoded"};function aE(e,t){!Ti.isUndefined(e)&&Ti.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function rL(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=oE()),e}function iL(e,t,i){if(Ti.isString(e))try{return(t||JSON.parse)(e),Ti.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var py={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:rL(),transformRequest:[function(t,i){return sE(i,"Accept"),sE(i,"Content-Type"),Ti.isFormData(t)||Ti.isArrayBuffer(t)||Ti.isBuffer(t)||Ti.isStream(t)||Ti.isFile(t)||Ti.isBlob(t)?t:Ti.isArrayBufferView(t)?t.buffer:Ti.isURLSearchParams(t)?(aE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ti.isObject(t)||i&&i["Content-Type"]==="application/json"?(aE(i,"application/json"),iL(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,p=!a&&this.responseType==="json";if(p||c&&Ti.isString(t)&&t.length)try{return JSON.parse(t)}catch(m){if(p)throw m.name==="SyntaxError"?tL(m,this,"E_JSON_PARSE"):m}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};py.headers={common:{Accept:"application/json, text/plain, */*"}};Ti.forEach(["delete","get","head"],function(t){py.headers[t]={}});Ti.forEach(["post","put","patch"],function(t){py.headers[t]=Ti.merge(nL)});var Nx=py,oL=Wo,sL=Nx,aL=function(t,i,a){var c=this||sL;return oL.forEach(a,function(m){t=m.call(c,t,i)}),t},sv,lE;function AI(){return lE||(lE=1,sv=function(t){return!!(t&&t.__CANCEL__)}),sv}var uE=Wo,av=aL,lL=AI(),uL=Nx;function lv(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var cL=function(t){lv(t),t.headers=t.headers||{},t.data=av.call(t,t.data,t.headers,t.transformRequest),t.headers=uE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),uE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||uL.adapter;return i(t).then(function(c){return lv(t),c.data=av.call(t,c.data,c.headers,t.transformResponse),c},function(c){return lL(c)||(lv(t),c&&c.response&&(c.response.data=av.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Ni=Wo,MI=function(t,i){i=i||{};var a={},c=["url","method","data"],p=["headers","auth","proxy","params"],m=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function S(C,R){return Ni.isPlainObject(C)&&Ni.isPlainObject(R)?Ni.merge(C,R):Ni.isPlainObject(R)?Ni.merge({},R):Ni.isArray(R)?R.slice():R}function P(C){Ni.isUndefined(i[C])?Ni.isUndefined(t[C])||(a[C]=S(void 0,t[C])):a[C]=S(t[C],i[C])}Ni.forEach(c,function(R){Ni.isUndefined(i[R])||(a[R]=S(void 0,i[R]))}),Ni.forEach(p,P),Ni.forEach(m,function(R){Ni.isUndefined(i[R])?Ni.isUndefined(t[R])||(a[R]=S(void 0,t[R])):a[R]=S(void 0,i[R])}),Ni.forEach(u,function(R){R in i?a[R]=S(t[R],i[R]):R in t&&(a[R]=S(void 0,t[R]))});var M=c.concat(p).concat(m).concat(u),b=Object.keys(t).concat(Object.keys(i)).filter(function(R){return M.indexOf(R)===-1});return Ni.forEach(b,P),a};const hL="axios",dL="0.21.4",fL="Promise based HTTP client for the browser and node.js",pL="index.js",mL={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},gL={type:"git",url:"https://github.com/axios/axios.git"},yL=["xhr","http","ajax","promise","node"],vL="Matt Zabriskie",_L="MIT",xL={url:"https://github.com/axios/axios/issues"},wL="https://axios-http.com",bL={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},SL={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},EL="dist/axios.min.js",TL="dist/axios.min.js",CL="./index.d.ts",PL={"follow-redirects":"^1.14.0"},IL=[{path:"./dist/axios.min.js",threshold:"5kB"}],AL={name:hL,version:dL,description:fL,main:pL,scripts:mL,repository:gL,keywords:yL,author:vL,license:_L,bugs:xL,homepage:wL,devDependencies:bL,browser:SL,jsdelivr:EL,unpkg:TL,typings:CL,dependencies:PL,bundlesize:IL};var kI=AL,Ux={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Ux[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var cE={},ML=kI.version.split(".");function zI(e,t){for(var i=t?t.split("."):ML,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Ux.transitional=function(t,i,a){var c=i&&zI(i);function p(m,u){return"[Axios v"+kI.version+"] Transitional option '"+m+"'"+u+(a?". "+a:"")}return function(m,u,S){if(t===!1)throw new Error(p(u," has been removed in "+i));return c&&!cE[u]&&(cE[u]=!0,console.warn(p(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(m,u,S):!0}};function kL(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var p=a[c],m=t[p];if(m){var u=e[p],S=u===void 0||m(u,p,e);if(S!==!0)throw new TypeError("option "+p+" must be "+S);continue}if(i!==!0)throw Error("Unknown option "+p)}}var zL={isOlderVersion:zI,assertOptions:kL,validators:Ux},FI=Wo,FL=CI,hE=ZO,dE=cL,my=MI,RI=zL,qc=RI.validators;function cp(e){this.defaults=e,this.interceptors={request:new hE,response:new hE}}cp.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=my(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&RI.assertOptions(i,{silentJSONParsing:qc.transitional(qc.boolean,"1.0.0"),forcedJSONParsing:qc.transitional(qc.boolean,"1.0.0"),clarifyTimeoutError:qc.transitional(qc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(t)===!1||(c=c&&C.synchronous,a.unshift(C.fulfilled,C.rejected))});var p=[];this.interceptors.response.forEach(function(C){p.push(C.fulfilled,C.rejected)});var m;if(!c){var u=[dE,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(p),m=Promise.resolve(t);u.length;)m=m.then(u.shift(),u.shift());return m}for(var S=t;a.length;){var P=a.shift(),M=a.shift();try{S=P(S)}catch(b){M(b);break}}try{m=dE(S)}catch(b){return Promise.reject(b)}for(;p.length;)m=m.then(p.shift(),p.shift());return m};cp.prototype.getUri=function(t){return t=my(this.defaults,t),FL(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};FI.forEach(["delete","get","head","options"],function(t){cp.prototype[t]=function(i,a){return this.request(my(a||{},{method:t,url:i,data:(a||{}).data}))}});FI.forEach(["post","put","patch"],function(t){cp.prototype[t]=function(i,a,c){return this.request(my(c||{},{method:t,url:i,data:a}))}});var RL=cp,uv,fE;function jI(){if(fE)return uv;fE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,uv=e,uv}var cv,pE;function jL(){if(pE)return cv;pE=1;var e=jI();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(m){a=m});var c=this;i(function(m){c.reason||(c.reason=new e(m),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(m){a=m});return{token:c,cancel:a}},cv=t,cv}var hv,mE;function OL(){return mE||(mE=1,hv=function(t){return function(a){return t.apply(null,a)}}),hv}var dv,gE;function LL(){return gE||(gE=1,dv=function(t){return typeof t=="object"&&t.isAxiosError===!0}),dv}var yE=Wo,DL=SI,Nm=RL,BL=MI,NL=Nx;function OI(e){var t=new Nm(e),i=DL(Nm.prototype.request,t);return yE.extend(i,Nm.prototype,t),yE.extend(i,t),i}var Ds=OI(NL);Ds.Axios=Nm;Ds.create=function(t){return OI(BL(Ds.defaults,t))};Ds.Cancel=jI();Ds.CancelToken=jL();Ds.isCancel=AI();Ds.all=function(t){return Promise.all(t)};Ds.spread=OL();Ds.isAxiosError=LL();Lx.exports=Ds;Lx.exports.default=Ds;var UL=Lx.exports,$L=UL;const VL={},GL=Object.freeze(Object.defineProperty({__proto__:null,default:VL},Symbol.toStringTag,{value:"Module"})),ZL=i1(GL);var gy={},WL=bh;function bh(e,t){this.x=e,this.y=t}bh.prototype={clone:function(){return new bh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),p=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};bh.convert=function(e){return e instanceof bh?e:Array.isArray(e)?new bh(e[0],e[1]):e};var HL=WL,LI=Oh;function Oh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(XL,this,t)}function XL(e,t,i){e==1?t.id=i.readVarint():e==2?KL(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function KL(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}Oh.types=["Unknown","Point","LineString","Polygon"];Oh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,m=[],u;e.pos<t;){if(a<=0){var S=e.readVarint();i=S&7,a=S>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),i===1&&(u&&m.push(u),u=[]),u.push(new HL(c,p));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&m.push(u),m};Oh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,m=1/0,u=-1/0,S=1/0,P=-1/0;e.pos<t;){if(a<=0){var M=e.readVarint();i=M&7,a=M>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),c<m&&(m=c),c>u&&(u=c),p<S&&(S=p),p>P&&(P=p);else if(i!==7)throw new Error("unknown command "+i)}return[m,S,u,P]};Oh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,p=this.extent*t,m=this.loadGeometry(),u=Oh.types[this.type],S,P;function M(R){for(var B=0;B<R.length;B++){var j=R[B],he=180-(j.y+p)*360/a;R[B]=[(j.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(he*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(S=0;S<m.length;S++)b[S]=m[S][0];m=b,M(m);break;case 2:for(S=0;S<m.length;S++)M(m[S]);break;case 3:for(m=qL(m),S=0;S<m.length;S++)for(P=0;P<m[S].length;P++)M(m[S][P]);break}m.length===1?m=m[0]:u="Multi"+u;var C={type:"Feature",geometry:{type:u,coordinates:m},properties:this.properties};return"id"in this&&(C.id=this.id),C};function qL(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,p=0;p<t;p++){var m=JL(e[p]);m!==0&&(c===void 0&&(c=m<0),c===m<0?(a&&i.push(a),a=[e[p]]):a.push(e[p]))}return a&&i.push(a),i}function JL(e){for(var t=0,i=0,a=e.length,c=a-1,p,m;i<a;c=i++)p=e[i],m=e[c],t+=(m.x-p.x)*(p.y+m.y);return t}var YL=LI,DI=BI;function BI(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(QL,this,t),this.length=this._features.length}function QL(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(e5(i))}function e5(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}BI.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new YL(this._pbf,t,this.extent,this._keys,this._values)};var t5=DI,n5=r5;function r5(e,t){this.layers=e.readFields(i5,{},t)}function i5(e,t,i){if(e===3){var a=new t5(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}gy.VectorTile=n5;gy.VectorTileFeature=LI;gy.VectorTileLayer=DI;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Hj,i=uO,a=cO,c=$L,p=ZL,m=gy;function u(X){return X&&typeof X=="object"&&"default"in X?X:{default:X}}var S=u(a),P=u(c),M=u(p),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Nl<"u"?Nl:typeof self<"u"?self:{};function C(X){var G={exports:{}};return X(G,G.exports),G.exports}var R=C(function(X,G){(function(K,W){X.exports=W(P.default)})(b,function(ae){return function(K){var W={};function E(O){if(W[O])return W[O].exports;var D=W[O]={i:O,l:!1,exports:{}};return K[O].call(D.exports,D,D.exports,E),D.l=!0,D.exports}return E.m=K,E.c=W,E.d=function(O,D,ee){E.o(O,D)||Object.defineProperty(O,D,{enumerable:!0,get:ee})},E.r=function(O){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})},E.t=function(O,D){if(D&1&&(O=E(O)),D&8||D&4&&typeof O=="object"&&O&&O.__esModule)return O;var ee=Object.create(null);if(E.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:O}),D&2&&typeof O!="string")for(var H in O)E.d(ee,H,(function(ve){return O[ve]}).bind(null,H));return ee},E.n=function(O){var D=O&&O.__esModule?function(){return O.default}:function(){return O};return E.d(D,"a",D),D},E.o=function(O,D){return Object.prototype.hasOwnProperty.call(O,D)},E.p="",E(E.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(K,W,E){E.r(W),E.d(W,"CacheControl",function(){return Ce}),E.d(W,"parse",function(){return Ue}),E.d(W,"format",function(){return Ae}),E("./node_modules/core-js/modules/es6.array.from.js"),E("./node_modules/core-js/modules/es6.function.name.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/web.dom.iterable.js"),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.regexp.split.js"),E("./node_modules/core-js/modules/es6.number.is-finite.js");function O(Fe,We){return _e(Fe)||ve(Fe,We)||ee(Fe,We)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(Fe,We){if(Fe){if(typeof Fe=="string")return H(Fe,We);var Ze=Object.prototype.toString.call(Fe).slice(8,-1);if(Ze==="Object"&&Fe.constructor&&(Ze=Fe.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(Fe);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return H(Fe,We)}}function H(Fe,We){(We==null||We>Fe.length)&&(We=Fe.length);for(var Ze=0,it=new Array(We);Ze<We;Ze++)it[Ze]=Fe[Ze];return it}function ve(Fe,We){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Fe)))){var Ze=[],it=!0,ct=!1,vt=void 0;try{for(var Mt=Fe[Symbol.iterator](),pt;!(it=(pt=Mt.next()).done)&&(Ze.push(pt.value),!(We&&Ze.length===We));it=!0);}catch(xt){ct=!0,vt=xt}finally{try{!it&&Mt.return!=null&&Mt.return()}finally{if(ct)throw vt}}return Ze}}function _e(Fe){if(Array.isArray(Fe))return Fe}function pe(Fe,We){if(!(Fe instanceof We))throw new TypeError("Cannot call a class as a function")}function oe(Fe,We){for(var Ze=0;Ze<We.length;Ze++){var it=We[Ze];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Fe,it.key,it)}}function ce(Fe,We,Ze){return We&&oe(Fe.prototype,We),Ze&&oe(Fe,Ze),Fe}var Y=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ne={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function de(Fe){return Fe===null}function be(Fe){if(!Fe)return null;var We=parseInt(Fe,10);return!Number.isFinite(We)||We<0?null:We}var Ce=function(){function Fe(){pe(this,Fe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ce(Fe,[{key:"parse",value:function(Ze){if(!Ze||Ze.length===0)return this;var it={},ct=Ze.match(Y)||[];return Array.prototype.forEach.call(ct,function(vt){var Mt=vt.split("=",2),pt=O(Mt,1),xt=pt[0],Zt=null;Mt.length>1&&(Zt=Mt[1].trim()),it[xt.toLowerCase()]=Zt}),this.maxAge=be(it[ne.maxAge]),this.sharedMaxAge=be(it[ne.sharedMaxAge]),this.maxStale=de(it[ne.maxStale]),this.maxStaleDuration=be(it[ne.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=be(it[ne.minFresh]),this.immutable=de(it[ne.immutable]),this.mustRevalidate=de(it[ne.mustRevalidate]),this.noCache=de(it[ne.noCache]),this.noStore=de(it[ne.noStore]),this.noTransform=de(it[ne.noTransform]),this.onlyIfCached=de(it[ne.onlyIfCached]),this.private=de(it[ne.private]),this.proxyRevalidate=de(it[ne.proxyRevalidate]),this.public=de(it[ne.public]),this}},{key:"format",value:function(){var Ze=[];return this.maxAge&&Ze.push("".concat(ne.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ze.push("".concat(ne.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ze.push("".concat(ne.maxStale,"=").concat(this.maxStaleDuration)):Ze.push(ne.maxStale)),this.minFresh&&Ze.push("".concat(ne.minFresh,"=").concat(this.minFresh)),this.immutable&&Ze.push(ne.immutable),this.mustRevalidate&&Ze.push(ne.mustRevalidate),this.noCache&&Ze.push(ne.noCache),this.noStore&&Ze.push(ne.noStore),this.noTransform&&Ze.push(ne.noTransform),this.onlyIfCached&&Ze.push(ne.onlyIfCached),this.private&&Ze.push(ne.private),this.proxyRevalidate&&Ze.push(ne.proxyRevalidate),this.public&&Ze.push(ne.public),Ze.join(", ")}}]),Fe}();function Ue(Fe){var We=new Ce;return We.parse(Fe)}function Ae(Fe){return Fe instanceof Ce?Fe.format():Ce.prototype.format.call(Fe)}W.default={CacheControl:Ce,parse:Ue,format:Ae}},"./node_modules/charenc/charenc.js":function(K,W){var E={utf8:{stringToBytes:function(O){return E.bin.stringToBytes(unescape(encodeURIComponent(O)))},bytesToString:function(O){return decodeURIComponent(escape(E.bin.bytesToString(O)))}},bin:{stringToBytes:function(O){for(var D=[],ee=0;ee<O.length;ee++)D.push(O.charCodeAt(ee)&255);return D},bytesToString:function(O){for(var D=[],ee=0;ee<O.length;ee++)D.push(String.fromCharCode(O[ee]));return D.join("")}}};K.exports=E},"./node_modules/core-js/modules/_a-function.js":function(K,W){K.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_wks.js")("unscopables"),D=Array.prototype;D[O]==null&&E("./node_modules/core-js/modules/_hide.js")(D,O,{}),K.exports=function(ee){D[O][ee]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_string-at.js")(!0);K.exports=function(D,ee,H){return ee+(H?O(D,ee).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_is-object.js");K.exports=function(D){if(!O(D))throw TypeError(D+" is not an object!");return D}},"./node_modules/core-js/modules/_array-includes.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_to-iobject.js"),D=E("./node_modules/core-js/modules/_to-length.js"),ee=E("./node_modules/core-js/modules/_to-absolute-index.js");K.exports=function(H){return function(ve,_e,pe){var oe=O(ve),ce=D(oe.length),Y=ee(pe,ce),ne;if(H&&_e!=_e){for(;ce>Y;)if(ne=oe[Y++],ne!=ne)return!0}else for(;ce>Y;Y++)if((H||Y in oe)&&oe[Y]===_e)return H||Y||0;return!H&&-1}}},"./node_modules/core-js/modules/_bind.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_a-function.js"),D=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_invoke.js"),H=[].slice,ve={},_e=function(pe,oe,ce){if(!(oe in ve)){for(var Y=[],ne=0;ne<oe;ne++)Y[ne]="a["+ne+"]";ve[oe]=Function("F,a","return new F("+Y.join(",")+")")}return ve[oe](pe,ce)};K.exports=Function.bind||function(oe){var ce=O(this),Y=H.call(arguments,1),ne=function(){var de=Y.concat(H.call(arguments));return this instanceof ne?_e(ce,de.length,de):ee(ce,de,oe)};return D(ce.prototype)&&(ne.prototype=ce.prototype),ne}},"./node_modules/core-js/modules/_classof.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_cof.js"),D=E("./node_modules/core-js/modules/_wks.js")("toStringTag"),ee=O(function(){return arguments}())=="Arguments",H=function(ve,_e){try{return ve[_e]}catch{}};K.exports=function(ve){var _e,pe,oe;return ve===void 0?"Undefined":ve===null?"Null":typeof(pe=H(_e=Object(ve),D))=="string"?pe:ee?O(_e):(oe=O(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(K,W){var E={}.toString;K.exports=function(O){return E.call(O).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(K,W){var E=K.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},"./node_modules/core-js/modules/_create-property.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-dp.js"),D=E("./node_modules/core-js/modules/_property-desc.js");K.exports=function(ee,H,ve){H in ee?O.f(ee,H,D(0,ve)):ee[H]=ve}},"./node_modules/core-js/modules/_ctx.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_a-function.js");K.exports=function(D,ee,H){if(O(D),ee===void 0)return D;switch(H){case 1:return function(ve){return D.call(ee,ve)};case 2:return function(ve,_e){return D.call(ee,ve,_e)};case 3:return function(ve,_e,pe){return D.call(ee,ve,_e,pe)}}return function(){return D.apply(ee,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(K,W){K.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},"./node_modules/core-js/modules/_descriptors.js":function(K,W,E){K.exports=!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_is-object.js"),D=E("./node_modules/core-js/modules/_global.js").document,ee=O(D)&&O(D.createElement);K.exports=function(H){return ee?D.createElement(H):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(K,W){K.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-keys.js"),D=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_object-pie.js");K.exports=function(H){var ve=O(H),_e=D.f;if(_e)for(var pe=_e(H),oe=ee.f,ce=0,Y;pe.length>ce;)oe.call(H,Y=pe[ce++])&&ve.push(Y);return ve}},"./node_modules/core-js/modules/_export.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_global.js"),D=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_hide.js"),H=E("./node_modules/core-js/modules/_redefine.js"),ve=E("./node_modules/core-js/modules/_ctx.js"),_e="prototype",pe=function(oe,ce,Y){var ne=oe&pe.F,de=oe&pe.G,be=oe&pe.S,Ce=oe&pe.P,Ue=oe&pe.B,Ae=de?O:be?O[ce]||(O[ce]={}):(O[ce]||{})[_e],Fe=de?D:D[ce]||(D[ce]={}),We=Fe[_e]||(Fe[_e]={}),Ze,it,ct,vt;de&&(Y=ce);for(Ze in Y)it=!ne&&Ae&&Ae[Ze]!==void 0,ct=(it?Ae:Y)[Ze],vt=Ue&&it?ve(ct,O):Ce&&typeof ct=="function"?ve(Function.call,ct):ct,Ae&&H(Ae,Ze,ct,oe&pe.U),Fe[Ze]!=ct&&ee(Fe,Ze,vt),Ce&&We[Ze]!=ct&&(We[Ze]=ct)};O.core=D,pe.F=1,pe.G=2,pe.S=4,pe.P=8,pe.B=16,pe.W=32,pe.U=64,pe.R=128,K.exports=pe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_wks.js")("match");K.exports=function(D){var ee=/./;try{"/./"[D](ee)}catch{try{return ee[O]=!1,!"/./"[D](ee)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(K,W){K.exports=function(E){try{return!!E()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(K,W,E){E("./node_modules/core-js/modules/es6.regexp.exec.js");var O=E("./node_modules/core-js/modules/_redefine.js"),D=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_fails.js"),H=E("./node_modules/core-js/modules/_defined.js"),ve=E("./node_modules/core-js/modules/_wks.js"),_e=E("./node_modules/core-js/modules/_regexp-exec.js"),pe=ve("species"),oe=!ee(function(){var Y=/./;return Y.exec=function(){var ne=[];return ne.groups={a:"7"},ne},"".replace(Y,"$<a>")!=="7"}),ce=function(){var Y=/(?:)/,ne=Y.exec;Y.exec=function(){return ne.apply(this,arguments)};var de="ab".split(Y);return de.length===2&&de[0]==="a"&&de[1]==="b"}();K.exports=function(Y,ne,de){var be=ve(Y),Ce=!ee(function(){var it={};return it[be]=function(){return 7},""[Y](it)!=7}),Ue=Ce?!ee(function(){var it=!1,ct=/a/;return ct.exec=function(){return it=!0,null},Y==="split"&&(ct.constructor={},ct.constructor[pe]=function(){return ct}),ct[be](""),!it}):void 0;if(!Ce||!Ue||Y==="replace"&&!oe||Y==="split"&&!ce){var Ae=/./[be],Fe=de(H,be,""[Y],function(ct,vt,Mt,pt,xt){return vt.exec===_e?Ce&&!xt?{done:!0,value:Ae.call(vt,Mt,pt)}:{done:!0,value:ct.call(Mt,vt,pt)}:{done:!1}}),We=Fe[0],Ze=Fe[1];O(String.prototype,Y,We),D(RegExp.prototype,be,ne==2?function(it,ct){return Ze.call(it,this,ct)}:function(it){return Ze.call(it,this)})}}},"./node_modules/core-js/modules/_flags.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_an-object.js");K.exports=function(){var D=O(this),ee="";return D.global&&(ee+="g"),D.ignoreCase&&(ee+="i"),D.multiline&&(ee+="m"),D.unicode&&(ee+="u"),D.sticky&&(ee+="y"),ee}},"./node_modules/core-js/modules/_function-to-string.js":function(K,W,E){K.exports=E("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(K,W){var E=K.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},"./node_modules/core-js/modules/_has.js":function(K,W){var E={}.hasOwnProperty;K.exports=function(O,D){return E.call(O,D)}},"./node_modules/core-js/modules/_hide.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-dp.js"),D=E("./node_modules/core-js/modules/_property-desc.js");K.exports=E("./node_modules/core-js/modules/_descriptors.js")?function(ee,H,ve){return O.f(ee,H,D(1,ve))}:function(ee,H,ve){return ee[H]=ve,ee}},"./node_modules/core-js/modules/_html.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_global.js").document;K.exports=O&&O.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(K,W,E){K.exports=!E("./node_modules/core-js/modules/_descriptors.js")&&!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(E("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(K,W){K.exports=function(E,O,D){var ee=D===void 0;switch(O.length){case 0:return ee?E():E.call(D);case 1:return ee?E(O[0]):E.call(D,O[0]);case 2:return ee?E(O[0],O[1]):E.call(D,O[0],O[1]);case 3:return ee?E(O[0],O[1],O[2]):E.call(D,O[0],O[1],O[2]);case 4:return ee?E(O[0],O[1],O[2],O[3]):E.call(D,O[0],O[1],O[2],O[3])}return E.apply(D,O)}},"./node_modules/core-js/modules/_iobject.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_cof.js");K.exports=Object("z").propertyIsEnumerable(0)?Object:function(D){return O(D)=="String"?D.split(""):Object(D)}},"./node_modules/core-js/modules/_is-array-iter.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_iterators.js"),D=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=Array.prototype;K.exports=function(H){return H!==void 0&&(O.Array===H||ee[D]===H)}},"./node_modules/core-js/modules/_is-array.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_cof.js");K.exports=Array.isArray||function(ee){return O(ee)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(K,W){K.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_is-object.js"),D=E("./node_modules/core-js/modules/_cof.js"),ee=E("./node_modules/core-js/modules/_wks.js")("match");K.exports=function(H){var ve;return O(H)&&((ve=H[ee])!==void 0?!!ve:D(H)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_an-object.js");K.exports=function(D,ee,H,ve){try{return ve?ee(O(H)[0],H[1]):ee(H)}catch(pe){var _e=D.return;throw _e!==void 0&&O(_e.call(D)),pe}}},"./node_modules/core-js/modules/_iter-create.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-create.js"),D=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_set-to-string-tag.js"),H={};E("./node_modules/core-js/modules/_hide.js")(H,E("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),K.exports=function(ve,_e,pe){ve.prototype=O(H,{next:D(1,pe)}),ee(ve,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_library.js"),D=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),H=E("./node_modules/core-js/modules/_hide.js"),ve=E("./node_modules/core-js/modules/_iterators.js"),_e=E("./node_modules/core-js/modules/_iter-create.js"),pe=E("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=E("./node_modules/core-js/modules/_object-gpo.js"),ce=E("./node_modules/core-js/modules/_wks.js")("iterator"),Y=!([].keys&&"next"in[].keys()),ne="@@iterator",de="keys",be="values",Ce=function(){return this};K.exports=function(Ue,Ae,Fe,We,Ze,it,ct){_e(Fe,Ae,We);var vt=function(N){if(!Y&&N in Zt)return Zt[N];switch(N){case de:return function(){return new Fe(this,N)};case be:return function(){return new Fe(this,N)}}return function(){return new Fe(this,N)}},Mt=Ae+" Iterator",pt=Ze==be,xt=!1,Zt=Ue.prototype,Wt=Zt[ce]||Zt[ne]||Ze&&Zt[Ze],ln=Wt||vt(Ze),et=Ze?pt?vt("entries"):ln:void 0,_n=Ae=="Array"&&Zt.entries||Wt,un,Vt,Se;if(_n&&(Se=oe(_n.call(new Ue)),Se!==Object.prototype&&Se.next&&(pe(Se,Mt,!0),!O&&typeof Se[ce]!="function"&&H(Se,ce,Ce))),pt&&Wt&&Wt.name!==be&&(xt=!0,ln=function(){return Wt.call(this)}),(!O||ct)&&(Y||xt||!Zt[ce])&&H(Zt,ce,ln),ve[Ae]=ln,ve[Mt]=Ce,Ze)if(un={values:pt?ln:vt(be),keys:it?ln:vt(de),entries:et},ct)for(Vt in un)Vt in Zt||ee(Zt,Vt,un[Vt]);else D(D.P+D.F*(Y||xt),Ae,un);return un}},"./node_modules/core-js/modules/_iter-detect.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_wks.js")("iterator"),D=!1;try{var ee=[7][O]();ee.return=function(){D=!0},Array.from(ee,function(){throw 2})}catch{}K.exports=function(H,ve){if(!ve&&!D)return!1;var _e=!1;try{var pe=[7],oe=pe[O]();oe.next=function(){return{done:_e=!0}},pe[O]=function(){return oe},H(pe)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(K,W){K.exports=function(E,O){return{value:O,done:!!E}}},"./node_modules/core-js/modules/_iterators.js":function(K,W){K.exports={}},"./node_modules/core-js/modules/_library.js":function(K,W){K.exports=!1},"./node_modules/core-js/modules/_meta.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_uid.js")("meta"),D=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_has.js"),H=E("./node_modules/core-js/modules/_object-dp.js").f,ve=0,_e=Object.isExtensible||function(){return!0},pe=!E("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),oe=function(be){H(be,O,{value:{i:"O"+ ++ve,w:{}}})},ce=function(be,Ce){if(!D(be))return typeof be=="symbol"?be:(typeof be=="string"?"S":"P")+be;if(!ee(be,O)){if(!_e(be))return"F";if(!Ce)return"E";oe(be)}return be[O].i},Y=function(be,Ce){if(!ee(be,O)){if(!_e(be))return!0;if(!Ce)return!1;oe(be)}return be[O].w},ne=function(be){return pe&&de.NEED&&_e(be)&&!ee(be,O)&&oe(be),be},de=K.exports={KEY:O,NEED:!1,fastKey:ce,getWeak:Y,onFreeze:ne}},"./node_modules/core-js/modules/_object-create.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_an-object.js"),D=E("./node_modules/core-js/modules/_object-dps.js"),ee=E("./node_modules/core-js/modules/_enum-bug-keys.js"),H=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},_e="prototype",pe=function(){var oe=E("./node_modules/core-js/modules/_dom-create.js")("iframe"),ce=ee.length,Y="<",ne=">",de;for(oe.style.display="none",E("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",de=oe.contentWindow.document,de.open(),de.write(Y+"script"+ne+"document.F=Object"+Y+"/script"+ne),de.close(),pe=de.F;ce--;)delete pe[_e][ee[ce]];return pe()};K.exports=Object.create||function(ce,Y){var ne;return ce!==null?(ve[_e]=O(ce),ne=new ve,ve[_e]=null,ne[H]=ce):ne=pe(),Y===void 0?ne:D(ne,Y)}},"./node_modules/core-js/modules/_object-dp.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_an-object.js"),D=E("./node_modules/core-js/modules/_ie8-dom-define.js"),ee=E("./node_modules/core-js/modules/_to-primitive.js"),H=Object.defineProperty;W.f=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,pe,oe){if(O(_e),pe=ee(pe,!0),O(oe),D)try{return H(_e,pe,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(_e[pe]=oe.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-dp.js"),D=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_object-keys.js");K.exports=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,_e){D(ve);for(var pe=ee(_e),oe=pe.length,ce=0,Y;oe>ce;)O.f(ve,Y=pe[ce++],_e[Y]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-pie.js"),D=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),H=E("./node_modules/core-js/modules/_to-primitive.js"),ve=E("./node_modules/core-js/modules/_has.js"),_e=E("./node_modules/core-js/modules/_ie8-dom-define.js"),pe=Object.getOwnPropertyDescriptor;W.f=E("./node_modules/core-js/modules/_descriptors.js")?pe:function(ce,Y){if(ce=ee(ce),Y=H(Y,!0),_e)try{return pe(ce,Y)}catch{}if(ve(ce,Y))return D(!O.f.call(ce,Y),ce[Y])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_to-iobject.js"),D=E("./node_modules/core-js/modules/_object-gopn.js").f,ee={}.toString,H=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(_e){try{return D(_e)}catch{return H.slice()}};K.exports.f=function(pe){return H&&ee.call(pe)=="[object Window]"?ve(pe):D(O(pe))}},"./node_modules/core-js/modules/_object-gopn.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-keys-internal.js"),D=E("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");W.f=Object.getOwnPropertyNames||function(H){return O(H,D)}},"./node_modules/core-js/modules/_object-gops.js":function(K,W){W.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_has.js"),D=E("./node_modules/core-js/modules/_to-object.js"),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),H=Object.prototype;K.exports=Object.getPrototypeOf||function(ve){return ve=D(ve),O(ve,ee)?ve[ee]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?H:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_has.js"),D=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_array-includes.js")(!1),H=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");K.exports=function(ve,_e){var pe=D(ve),oe=0,ce=[],Y;for(Y in pe)Y!=H&&O(pe,Y)&&ce.push(Y);for(;_e.length>oe;)O(pe,Y=_e[oe++])&&(~ee(ce,Y)||ce.push(Y));return ce}},"./node_modules/core-js/modules/_object-keys.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-keys-internal.js"),D=E("./node_modules/core-js/modules/_enum-bug-keys.js");K.exports=Object.keys||function(H){return O(H,D)}},"./node_modules/core-js/modules/_object-pie.js":function(K,W){W.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-gopn.js"),D=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_an-object.js"),H=E("./node_modules/core-js/modules/_global.js").Reflect;K.exports=H&&H.ownKeys||function(_e){var pe=O.f(ee(_e)),oe=D.f;return oe?pe.concat(oe(_e)):pe}},"./node_modules/core-js/modules/_property-desc.js":function(K,W){K.exports=function(E,O){return{enumerable:!(E&1),configurable:!(E&2),writable:!(E&4),value:O}}},"./node_modules/core-js/modules/_redefine.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_global.js"),D=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_has.js"),H=E("./node_modules/core-js/modules/_uid.js")("src"),ve=E("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",pe=(""+ve).split(_e);E("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return ve.call(oe)},(K.exports=function(oe,ce,Y,ne){var de=typeof Y=="function";de&&(ee(Y,"name")||D(Y,"name",ce)),oe[ce]!==Y&&(de&&(ee(Y,H)||D(Y,H,oe[ce]?""+oe[ce]:pe.join(String(ce)))),oe===O?oe[ce]=Y:ne?oe[ce]?oe[ce]=Y:D(oe,ce,Y):(delete oe[ce],D(oe,ce,Y)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[H]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_classof.js"),D=RegExp.prototype.exec;K.exports=function(ee,H){var ve=ee.exec;if(typeof ve=="function"){var _e=ve.call(ee,H);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(O(ee)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return D.call(ee,H)}},"./node_modules/core-js/modules/_regexp-exec.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_flags.js"),D=RegExp.prototype.exec,ee=String.prototype.replace,H=D,ve="lastIndex",_e=function(){var ce=/a/,Y=/b*/g;return D.call(ce,"a"),D.call(Y,"a"),ce[ve]!==0||Y[ve]!==0}(),pe=/()??/.exec("")[1]!==void 0,oe=_e||pe;oe&&(H=function(Y){var ne=this,de,be,Ce,Ue;return pe&&(be=new RegExp("^"+ne.source+"$(?!\\s)",O.call(ne))),_e&&(de=ne[ve]),Ce=D.call(ne,Y),_e&&Ce&&(ne[ve]=ne.global?Ce.index+Ce[0].length:de),pe&&Ce&&Ce.length>1&&ee.call(Ce[0],be,function(){for(Ue=1;Ue<arguments.length-2;Ue++)arguments[Ue]===void 0&&(Ce[Ue]=void 0)}),Ce}),K.exports=H},"./node_modules/core-js/modules/_set-to-string-tag.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-dp.js").f,D=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_wks.js")("toStringTag");K.exports=function(H,ve,_e){H&&!D(H=_e?H:H.prototype,ee)&&O(H,ee,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_shared.js")("keys"),D=E("./node_modules/core-js/modules/_uid.js");K.exports=function(ee){return O[ee]||(O[ee]=D(ee))}},"./node_modules/core-js/modules/_shared.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_core.js"),D=E("./node_modules/core-js/modules/_global.js"),ee="__core-js_shared__",H=D[ee]||(D[ee]={});(K.exports=function(ve,_e){return H[ve]||(H[ve]=_e!==void 0?_e:{})})("versions",[]).push({version:O.version,mode:E("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_an-object.js"),D=E("./node_modules/core-js/modules/_a-function.js"),ee=E("./node_modules/core-js/modules/_wks.js")("species");K.exports=function(H,ve){var _e=O(H).constructor,pe;return _e===void 0||(pe=O(_e)[ee])==null?ve:D(pe)}},"./node_modules/core-js/modules/_string-at.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_to-integer.js"),D=E("./node_modules/core-js/modules/_defined.js");K.exports=function(ee){return function(H,ve){var _e=String(D(H)),pe=O(ve),oe=_e.length,ce,Y;return pe<0||pe>=oe?ee?"":void 0:(ce=_e.charCodeAt(pe),ce<55296||ce>56319||pe+1===oe||(Y=_e.charCodeAt(pe+1))<56320||Y>57343?ee?_e.charAt(pe):ce:ee?_e.slice(pe,pe+2):(ce-55296<<10)+(Y-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_is-regexp.js"),D=E("./node_modules/core-js/modules/_defined.js");K.exports=function(ee,H,ve){if(O(H))throw TypeError("String#"+ve+" doesn't accept regex!");return String(D(ee))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_to-integer.js"),D=Math.max,ee=Math.min;K.exports=function(H,ve){return H=O(H),H<0?D(H+ve,0):ee(H,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(K,W){var E=Math.ceil,O=Math.floor;K.exports=function(D){return isNaN(D=+D)?0:(D>0?O:E)(D)}},"./node_modules/core-js/modules/_to-iobject.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_iobject.js"),D=E("./node_modules/core-js/modules/_defined.js");K.exports=function(ee){return O(D(ee))}},"./node_modules/core-js/modules/_to-length.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_to-integer.js"),D=Math.min;K.exports=function(ee){return ee>0?D(O(ee),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_defined.js");K.exports=function(D){return Object(O(D))}},"./node_modules/core-js/modules/_to-primitive.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_is-object.js");K.exports=function(D,ee){if(!O(D))return D;var H,ve;if(ee&&typeof(H=D.toString)=="function"&&!O(ve=H.call(D))||typeof(H=D.valueOf)=="function"&&!O(ve=H.call(D))||!ee&&typeof(H=D.toString)=="function"&&!O(ve=H.call(D)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(K,W){var E=0,O=Math.random();K.exports=function(D){return"Symbol(".concat(D===void 0?"":D,")_",(++E+O).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_global.js"),D=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_library.js"),H=E("./node_modules/core-js/modules/_wks-ext.js"),ve=E("./node_modules/core-js/modules/_object-dp.js").f;K.exports=function(_e){var pe=D.Symbol||(D.Symbol=ee?{}:O.Symbol||{});_e.charAt(0)!="_"&&!(_e in pe)&&ve(pe,_e,{value:H.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(K,W,E){W.f=E("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_shared.js")("wks"),D=E("./node_modules/core-js/modules/_uid.js"),ee=E("./node_modules/core-js/modules/_global.js").Symbol,H=typeof ee=="function",ve=K.exports=function(_e){return O[_e]||(O[_e]=H&&ee[_e]||(H?ee:D)("Symbol."+_e))};ve.store=O},"./node_modules/core-js/modules/core.get-iterator-method.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_classof.js"),D=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=E("./node_modules/core-js/modules/_iterators.js");K.exports=E("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(H){if(H!=null)return H[D]||H["@@iterator"]||ee[O(H)]}},"./node_modules/core-js/modules/es6.array.from.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_ctx.js"),D=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_to-object.js"),H=E("./node_modules/core-js/modules/_iter-call.js"),ve=E("./node_modules/core-js/modules/_is-array-iter.js"),_e=E("./node_modules/core-js/modules/_to-length.js"),pe=E("./node_modules/core-js/modules/_create-property.js"),oe=E("./node_modules/core-js/modules/core.get-iterator-method.js");D(D.S+D.F*!E("./node_modules/core-js/modules/_iter-detect.js")(function(ce){Array.from(ce)}),"Array",{from:function(Y){var ne=ee(Y),de=typeof this=="function"?this:Array,be=arguments.length,Ce=be>1?arguments[1]:void 0,Ue=Ce!==void 0,Ae=0,Fe=oe(ne),We,Ze,it,ct;if(Ue&&(Ce=O(Ce,be>2?arguments[2]:void 0,2)),Fe!=null&&!(de==Array&&ve(Fe)))for(ct=Fe.call(ne),Ze=new de;!(it=ct.next()).done;Ae++)pe(Ze,Ae,Ue?H(ct,Ce,[it.value,Ae],!0):it.value);else for(We=_e(ne.length),Ze=new de(We);We>Ae;Ae++)pe(Ze,Ae,Ue?Ce(ne[Ae],Ae):ne[Ae]);return Ze.length=Ae,Ze}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_add-to-unscopables.js"),D=E("./node_modules/core-js/modules/_iter-step.js"),ee=E("./node_modules/core-js/modules/_iterators.js"),H=E("./node_modules/core-js/modules/_to-iobject.js");K.exports=E("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,_e){this._t=H(ve),this._i=0,this._k=_e},function(){var ve=this._t,_e=this._k,pe=this._i++;return!ve||pe>=ve.length?(this._t=void 0,D(1)):_e=="keys"?D(0,pe):_e=="values"?D(0,ve[pe]):D(0,[pe,ve[pe]])},"values"),ee.Arguments=ee.Array,O("keys"),O("values"),O("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_export.js");O(O.P,"Function",{bind:E("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_object-dp.js").f,D=Function.prototype,ee=/^\s*function ([^ (]*)/,H="name";H in D||E("./node_modules/core-js/modules/_descriptors.js")&&O(D,H,{configurable:!0,get:function(){try{return(""+this).match(ee)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_export.js"),D=E("./node_modules/core-js/modules/_global.js").isFinite;O(O.S,"Number",{isFinite:function(H){return typeof H=="number"&&D(H)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_classof.js"),D={};D[E("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",D+""!="[object z]"&&E("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+O(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_regexp-exec.js");E("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:O!==/./.exec},{exec:O})},"./node_modules/core-js/modules/es6.regexp.split.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_is-regexp.js"),D=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_species-constructor.js"),H=E("./node_modules/core-js/modules/_advance-string-index.js"),ve=E("./node_modules/core-js/modules/_to-length.js"),_e=E("./node_modules/core-js/modules/_regexp-exec-abstract.js"),pe=E("./node_modules/core-js/modules/_regexp-exec.js"),oe=E("./node_modules/core-js/modules/_fails.js"),ce=Math.min,Y=[].push,ne="split",de="length",be="lastIndex",Ce=4294967295,Ue=!oe(function(){});E("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ae,Fe,We,Ze){var it;return"abbc"[ne](/(b)*/)[1]=="c"||"test"[ne](/(?:)/,-1)[de]!=4||"ab"[ne](/(?:ab)*/)[de]!=2||"."[ne](/(.?)(.?)/)[de]!=4||"."[ne](/()()/)[de]>1||""[ne](/.?/)[de]?it=function(ct,vt){var Mt=String(this);if(ct===void 0&&vt===0)return[];if(!O(ct))return We.call(Mt,ct,vt);for(var pt=[],xt=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Zt=0,Wt=vt===void 0?Ce:vt>>>0,ln=new RegExp(ct.source,xt+"g"),et,_n,un;(et=pe.call(ln,Mt))&&(_n=ln[be],!(_n>Zt&&(pt.push(Mt.slice(Zt,et.index)),et[de]>1&&et.index<Mt[de]&&Y.apply(pt,et.slice(1)),un=et[0][de],Zt=_n,pt[de]>=Wt)));)ln[be]===et.index&&ln[be]++;return Zt===Mt[de]?(un||!ln.test(""))&&pt.push(""):pt.push(Mt.slice(Zt)),pt[de]>Wt?pt.slice(0,Wt):pt}:"0"[ne](void 0,0)[de]?it=function(ct,vt){return ct===void 0&&vt===0?[]:We.call(this,ct,vt)}:it=We,[function(vt,Mt){var pt=Ae(this),xt=vt==null?void 0:vt[Fe];return xt!==void 0?xt.call(vt,pt,Mt):it.call(String(pt),vt,Mt)},function(ct,vt){var Mt=Ze(it,ct,this,vt,it!==We);if(Mt.done)return Mt.value;var pt=D(ct),xt=String(this),Zt=ee(pt,RegExp),Wt=pt.unicode,ln=(pt.ignoreCase?"i":"")+(pt.multiline?"m":"")+(pt.unicode?"u":"")+(Ue?"y":"g"),et=new Zt(Ue?pt:"^(?:"+pt.source+")",ln),_n=vt===void 0?Ce:vt>>>0;if(_n===0)return[];if(xt.length===0)return _e(et,xt)===null?[xt]:[];for(var un=0,Vt=0,Se=[];Vt<xt.length;){et.lastIndex=Ue?Vt:0;var N=_e(et,Ue?xt:xt.slice(Vt)),L;if(N===null||(L=ce(ve(et.lastIndex+(Ue?0:Vt)),xt.length))===un)Vt=H(xt,Vt,Wt);else{if(Se.push(xt.slice(un,Vt)),Se.length===_n)return Se;for(var ye=1;ye<=N.length-1;ye++)if(Se.push(N[ye]),Se.length===_n)return Se;Vt=un=L}}return Se.push(xt.slice(un)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_export.js"),D=E("./node_modules/core-js/modules/_string-context.js"),ee="includes";O(O.P+O.F*E("./node_modules/core-js/modules/_fails-is-regexp.js")(ee),"String",{includes:function(ve){return!!~D(this,ve,ee).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_global.js"),D=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_descriptors.js"),H=E("./node_modules/core-js/modules/_export.js"),ve=E("./node_modules/core-js/modules/_redefine.js"),_e=E("./node_modules/core-js/modules/_meta.js").KEY,pe=E("./node_modules/core-js/modules/_fails.js"),oe=E("./node_modules/core-js/modules/_shared.js"),ce=E("./node_modules/core-js/modules/_set-to-string-tag.js"),Y=E("./node_modules/core-js/modules/_uid.js"),ne=E("./node_modules/core-js/modules/_wks.js"),de=E("./node_modules/core-js/modules/_wks-ext.js"),be=E("./node_modules/core-js/modules/_wks-define.js"),Ce=E("./node_modules/core-js/modules/_enum-keys.js"),Ue=E("./node_modules/core-js/modules/_is-array.js"),Ae=E("./node_modules/core-js/modules/_an-object.js"),Fe=E("./node_modules/core-js/modules/_is-object.js"),We=E("./node_modules/core-js/modules/_to-object.js"),Ze=E("./node_modules/core-js/modules/_to-iobject.js"),it=E("./node_modules/core-js/modules/_to-primitive.js"),ct=E("./node_modules/core-js/modules/_property-desc.js"),vt=E("./node_modules/core-js/modules/_object-create.js"),Mt=E("./node_modules/core-js/modules/_object-gopn-ext.js"),pt=E("./node_modules/core-js/modules/_object-gopd.js"),xt=E("./node_modules/core-js/modules/_object-gops.js"),Zt=E("./node_modules/core-js/modules/_object-dp.js"),Wt=E("./node_modules/core-js/modules/_object-keys.js"),ln=pt.f,et=Zt.f,_n=Mt.f,un=O.Symbol,Vt=O.JSON,Se=Vt&&Vt.stringify,N="prototype",L=ne("_hidden"),ye=ne("toPrimitive"),Xe={}.propertyIsEnumerable,tt=oe("symbol-registry"),ht=oe("symbols"),le=oe("op-symbols"),k=Object[N],$=typeof un=="function"&&!!xt.f,Ee=O.QObject,Ve=!Ee||!Ee[N]||!Ee[N].findChild,rt=ee&&pe(function(){return vt(et({},"a",{get:function(){return et(this,"a",{value:7}).a}})).a!=7})?function(Ie,ke,De){var qe=ln(k,ke);qe&&delete k[ke],et(Ie,ke,De),qe&&Ie!==k&&et(k,ke,qe)}:et,Ge=function(Ie){var ke=ht[Ie]=vt(un[N]);return ke._k=Ie,ke},Et=$&&typeof un.iterator=="symbol"?function(Ie){return typeof Ie=="symbol"}:function(Ie){return Ie instanceof un},It=function(ke,De,qe){return ke===k&&It(le,De,qe),Ae(ke),De=it(De,!0),Ae(qe),D(ht,De)?(qe.enumerable?(D(ke,L)&&ke[L][De]&&(ke[L][De]=!1),qe=vt(qe,{enumerable:ct(0,!1)})):(D(ke,L)||et(ke,L,ct(1,{})),ke[L][De]=!0),rt(ke,De,qe)):et(ke,De,qe)},yn=function(ke,De){Ae(ke);for(var qe=Ce(De=Ze(De)),Le=0,st=qe.length,dt;st>Le;)It(ke,dt=qe[Le++],De[dt]);return ke},Sn=function(ke,De){return De===void 0?vt(ke):yn(vt(ke),De)},Rt=function(ke){var De=Xe.call(this,ke=it(ke,!0));return this===k&&D(ht,ke)&&!D(le,ke)?!1:De||!D(this,ke)||!D(ht,ke)||D(this,L)&&this[L][ke]?De:!0},zr=function(ke,De){if(ke=Ze(ke),De=it(De,!0),!(ke===k&&D(ht,De)&&!D(le,De))){var qe=ln(ke,De);return qe&&D(ht,De)&&!(D(ke,L)&&ke[L][De])&&(qe.enumerable=!0),qe}},ei=function(ke){for(var De=_n(Ze(ke)),qe=[],Le=0,st;De.length>Le;)!D(ht,st=De[Le++])&&st!=L&&st!=_e&&qe.push(st);return qe},Ii=function(ke){for(var De=ke===k,qe=_n(De?le:Ze(ke)),Le=[],st=0,dt;qe.length>st;)D(ht,dt=qe[st++])&&(!De||D(k,dt))&&Le.push(ht[dt]);return Le};$||(un=function(){if(this instanceof un)throw TypeError("Symbol is not a constructor!");var ke=Y(arguments.length>0?arguments[0]:void 0),De=function(qe){this===k&&De.call(le,qe),D(this,L)&&D(this[L],ke)&&(this[L][ke]=!1),rt(this,ke,ct(1,qe))};return ee&&Ve&&rt(k,ke,{configurable:!0,set:De}),Ge(ke)},ve(un[N],"toString",function(){return this._k}),pt.f=zr,Zt.f=It,E("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=ei,E("./node_modules/core-js/modules/_object-pie.js").f=Rt,xt.f=Ii,ee&&!E("./node_modules/core-js/modules/_library.js")&&ve(k,"propertyIsEnumerable",Rt,!0),de.f=function(Ie){return Ge(ne(Ie))}),H(H.G+H.W+H.F*!$,{Symbol:un});for(var Ur="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ze=0;Ur.length>ze;)ne(Ur[ze++]);for(var se=Wt(ne.store),ie=0;se.length>ie;)be(se[ie++]);H(H.S+H.F*!$,"Symbol",{for:function(Ie){return D(tt,Ie+="")?tt[Ie]:tt[Ie]=un(Ie)},keyFor:function(ke){if(!Et(ke))throw TypeError(ke+" is not a symbol!");for(var De in tt)if(tt[De]===ke)return De},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),H(H.S+H.F*!$,"Object",{create:Sn,defineProperty:It,defineProperties:yn,getOwnPropertyDescriptor:zr,getOwnPropertyNames:ei,getOwnPropertySymbols:Ii});var xe=pe(function(){xt.f(1)});H(H.S+H.F*xe,"Object",{getOwnPropertySymbols:function(ke){return xt.f(We(ke))}}),Vt&&H(H.S+H.F*(!$||pe(function(){var Ie=un();return Se([Ie])!="[null]"||Se({a:Ie})!="{}"||Se(Object(Ie))!="{}"})),"JSON",{stringify:function(ke){for(var De=[ke],qe=1,Le,st;arguments.length>qe;)De.push(arguments[qe++]);if(st=Le=De[1],!(!Fe(Le)&&ke===void 0||Et(ke)))return Ue(Le)||(Le=function(dt,ot){if(typeof st=="function"&&(ot=st.call(this,dt,ot)),!Et(ot))return ot}),De[1]=Le,Se.apply(Vt,De)}}),un[N][ye]||E("./node_modules/core-js/modules/_hide.js")(un[N],ye,un[N].valueOf),ce(un,"Symbol"),ce(Math,"Math",!0),ce(O.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_export.js"),D=E("./node_modules/core-js/modules/_array-includes.js")(!0);O(O.P,"Array",{includes:function(H){return D(this,H,arguments.length>1?arguments[1]:void 0)}}),E("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(K,W,E){var O=E("./node_modules/core-js/modules/_export.js"),D=E("./node_modules/core-js/modules/_own-keys.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),H=E("./node_modules/core-js/modules/_object-gopd.js"),ve=E("./node_modules/core-js/modules/_create-property.js");O(O.S,"Object",{getOwnPropertyDescriptors:function(pe){for(var oe=ee(pe),ce=H.f,Y=D(oe),ne={},de=0,be,Ce;Y.length>de;)Ce=ce(oe,be=Y[de++]),Ce!==void 0&&ve(ne,be,Ce);return ne}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(K,W,E){E("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(K,W,E){for(var O=E("./node_modules/core-js/modules/es6.array.iterator.js"),D=E("./node_modules/core-js/modules/_object-keys.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),H=E("./node_modules/core-js/modules/_global.js"),ve=E("./node_modules/core-js/modules/_hide.js"),_e=E("./node_modules/core-js/modules/_iterators.js"),pe=E("./node_modules/core-js/modules/_wks.js"),oe=pe("iterator"),ce=pe("toStringTag"),Y=_e.Array,ne={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},de=D(ne),be=0;be<de.length;be++){var Ce=de[be],Ue=ne[Ce],Ae=H[Ce],Fe=Ae&&Ae.prototype,We;if(Fe&&(Fe[oe]||ve(Fe,oe,Y),Fe[ce]||ve(Fe,ce,Ce),_e[Ce]=Y,Ue))for(We in O)Fe[We]||ee(Fe,We,O[We],!0)}},"./node_modules/crypt/crypt.js":function(K,W){(function(){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O={rotl:function(D,ee){return D<<ee|D>>>32-ee},rotr:function(D,ee){return D<<32-ee|D>>>ee},endian:function(D){if(D.constructor==Number)return O.rotl(D,8)&16711935|O.rotl(D,24)&4278255360;for(var ee=0;ee<D.length;ee++)D[ee]=O.endian(D[ee]);return D},randomBytes:function(D){for(var ee=[];D>0;D--)ee.push(Math.floor(Math.random()*256));return ee},bytesToWords:function(D){for(var ee=[],H=0,ve=0;H<D.length;H++,ve+=8)ee[ve>>>5]|=D[H]<<24-ve%32;return ee},wordsToBytes:function(D){for(var ee=[],H=0;H<D.length*32;H+=8)ee.push(D[H>>>5]>>>24-H%32&255);return ee},bytesToHex:function(D){for(var ee=[],H=0;H<D.length;H++)ee.push((D[H]>>>4).toString(16)),ee.push((D[H]&15).toString(16));return ee.join("")},hexToBytes:function(D){for(var ee=[],H=0;H<D.length;H+=2)ee.push(parseInt(D.substr(H,2),16));return ee},bytesToBase64:function(D){for(var ee=[],H=0;H<D.length;H+=3)for(var ve=D[H]<<16|D[H+1]<<8|D[H+2],_e=0;_e<4;_e++)H*8+_e*6<=D.length*8?ee.push(E.charAt(ve>>>6*(3-_e)&63)):ee.push("=");return ee.join("")},base64ToBytes:function(D){D=D.replace(/[^A-Z0-9+\/]/ig,"");for(var ee=[],H=0,ve=0;H<D.length;ve=++H%4)ve!=0&&ee.push((E.indexOf(D.charAt(H-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|E.indexOf(D.charAt(H))>>>6-ve*2);return ee}};K.exports=O})()},"./node_modules/is-buffer/index.js":function(K,W){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */K.exports=function(D){return D!=null&&(E(D)||O(D)||!!D._isBuffer)};function E(D){return!!D.constructor&&typeof D.constructor.isBuffer=="function"&&D.constructor.isBuffer(D)}function O(D){return typeof D.readFloatLE=="function"&&typeof D.slice=="function"&&E(D.slice(0,0))}},"./node_modules/md5/md5.js":function(K,W,E){(function(){var O=E("./node_modules/crypt/crypt.js"),D=E("./node_modules/charenc/charenc.js").utf8,ee=E("./node_modules/is-buffer/index.js"),H=E("./node_modules/charenc/charenc.js").bin,ve=function(_e,pe){_e.constructor==String?pe&&pe.encoding==="binary"?_e=H.stringToBytes(_e):_e=D.stringToBytes(_e):ee(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var oe=O.bytesToWords(_e),ce=_e.length*8,Y=1732584193,ne=-271733879,de=-1732584194,be=271733878,Ce=0;Ce<oe.length;Ce++)oe[Ce]=(oe[Ce]<<8|oe[Ce]>>>24)&16711935|(oe[Ce]<<24|oe[Ce]>>>8)&4278255360;oe[ce>>>5]|=128<<ce%32,oe[(ce+64>>>9<<4)+14]=ce;for(var Ue=ve._ff,Ae=ve._gg,Fe=ve._hh,We=ve._ii,Ce=0;Ce<oe.length;Ce+=16){var Ze=Y,it=ne,ct=de,vt=be;Y=Ue(Y,ne,de,be,oe[Ce+0],7,-680876936),be=Ue(be,Y,ne,de,oe[Ce+1],12,-389564586),de=Ue(de,be,Y,ne,oe[Ce+2],17,606105819),ne=Ue(ne,de,be,Y,oe[Ce+3],22,-1044525330),Y=Ue(Y,ne,de,be,oe[Ce+4],7,-176418897),be=Ue(be,Y,ne,de,oe[Ce+5],12,1200080426),de=Ue(de,be,Y,ne,oe[Ce+6],17,-1473231341),ne=Ue(ne,de,be,Y,oe[Ce+7],22,-45705983),Y=Ue(Y,ne,de,be,oe[Ce+8],7,1770035416),be=Ue(be,Y,ne,de,oe[Ce+9],12,-1958414417),de=Ue(de,be,Y,ne,oe[Ce+10],17,-42063),ne=Ue(ne,de,be,Y,oe[Ce+11],22,-1990404162),Y=Ue(Y,ne,de,be,oe[Ce+12],7,1804603682),be=Ue(be,Y,ne,de,oe[Ce+13],12,-40341101),de=Ue(de,be,Y,ne,oe[Ce+14],17,-1502002290),ne=Ue(ne,de,be,Y,oe[Ce+15],22,1236535329),Y=Ae(Y,ne,de,be,oe[Ce+1],5,-165796510),be=Ae(be,Y,ne,de,oe[Ce+6],9,-1069501632),de=Ae(de,be,Y,ne,oe[Ce+11],14,643717713),ne=Ae(ne,de,be,Y,oe[Ce+0],20,-373897302),Y=Ae(Y,ne,de,be,oe[Ce+5],5,-701558691),be=Ae(be,Y,ne,de,oe[Ce+10],9,38016083),de=Ae(de,be,Y,ne,oe[Ce+15],14,-660478335),ne=Ae(ne,de,be,Y,oe[Ce+4],20,-405537848),Y=Ae(Y,ne,de,be,oe[Ce+9],5,568446438),be=Ae(be,Y,ne,de,oe[Ce+14],9,-1019803690),de=Ae(de,be,Y,ne,oe[Ce+3],14,-187363961),ne=Ae(ne,de,be,Y,oe[Ce+8],20,1163531501),Y=Ae(Y,ne,de,be,oe[Ce+13],5,-1444681467),be=Ae(be,Y,ne,de,oe[Ce+2],9,-51403784),de=Ae(de,be,Y,ne,oe[Ce+7],14,1735328473),ne=Ae(ne,de,be,Y,oe[Ce+12],20,-1926607734),Y=Fe(Y,ne,de,be,oe[Ce+5],4,-378558),be=Fe(be,Y,ne,de,oe[Ce+8],11,-2022574463),de=Fe(de,be,Y,ne,oe[Ce+11],16,1839030562),ne=Fe(ne,de,be,Y,oe[Ce+14],23,-35309556),Y=Fe(Y,ne,de,be,oe[Ce+1],4,-1530992060),be=Fe(be,Y,ne,de,oe[Ce+4],11,1272893353),de=Fe(de,be,Y,ne,oe[Ce+7],16,-155497632),ne=Fe(ne,de,be,Y,oe[Ce+10],23,-1094730640),Y=Fe(Y,ne,de,be,oe[Ce+13],4,681279174),be=Fe(be,Y,ne,de,oe[Ce+0],11,-358537222),de=Fe(de,be,Y,ne,oe[Ce+3],16,-722521979),ne=Fe(ne,de,be,Y,oe[Ce+6],23,76029189),Y=Fe(Y,ne,de,be,oe[Ce+9],4,-640364487),be=Fe(be,Y,ne,de,oe[Ce+12],11,-421815835),de=Fe(de,be,Y,ne,oe[Ce+15],16,530742520),ne=Fe(ne,de,be,Y,oe[Ce+2],23,-995338651),Y=We(Y,ne,de,be,oe[Ce+0],6,-198630844),be=We(be,Y,ne,de,oe[Ce+7],10,1126891415),de=We(de,be,Y,ne,oe[Ce+14],15,-1416354905),ne=We(ne,de,be,Y,oe[Ce+5],21,-57434055),Y=We(Y,ne,de,be,oe[Ce+12],6,1700485571),be=We(be,Y,ne,de,oe[Ce+3],10,-1894986606),de=We(de,be,Y,ne,oe[Ce+10],15,-1051523),ne=We(ne,de,be,Y,oe[Ce+1],21,-2054922799),Y=We(Y,ne,de,be,oe[Ce+8],6,1873313359),be=We(be,Y,ne,de,oe[Ce+15],10,-30611744),de=We(de,be,Y,ne,oe[Ce+6],15,-1560198380),ne=We(ne,de,be,Y,oe[Ce+13],21,1309151649),Y=We(Y,ne,de,be,oe[Ce+4],6,-145523070),be=We(be,Y,ne,de,oe[Ce+11],10,-1120210379),de=We(de,be,Y,ne,oe[Ce+2],15,718787259),ne=We(ne,de,be,Y,oe[Ce+9],21,-343485551),Y=Y+Ze>>>0,ne=ne+it>>>0,de=de+ct>>>0,be=be+vt>>>0}return O.endian([Y,ne,de,be])};ve._ff=function(_e,pe,oe,ce,Y,ne,de){var be=_e+(pe&oe|~pe&ce)+(Y>>>0)+de;return(be<<ne|be>>>32-ne)+pe},ve._gg=function(_e,pe,oe,ce,Y,ne,de){var be=_e+(pe&ce|oe&~ce)+(Y>>>0)+de;return(be<<ne|be>>>32-ne)+pe},ve._hh=function(_e,pe,oe,ce,Y,ne,de){var be=_e+(pe^oe^ce)+(Y>>>0)+de;return(be<<ne|be>>>32-ne)+pe},ve._ii=function(_e,pe,oe,ce,Y,ne,de){var be=_e+(oe^(pe|~ce))+(Y>>>0)+de;return(be<<ne|be>>>32-ne)+pe},ve._blocksize=16,ve._digestsize=16,K.exports=function(_e,pe){if(_e==null)throw new Error("Illegal argument "+_e);var oe=O.wordsToBytes(ve(_e,pe));return pe&&pe.asBytes?oe:pe&&pe.asString?H.bytesToString(oe):O.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(K,W,E){var O=function(D){var ee=Object.prototype,H=ee.hasOwnProperty,ve,_e=typeof Symbol=="function"?Symbol:{},pe=_e.iterator||"@@iterator",oe=_e.asyncIterator||"@@asyncIterator",ce=_e.toStringTag||"@@toStringTag";function Y(N,L,ye){return Object.defineProperty(N,L,{value:ye,enumerable:!0,configurable:!0,writable:!0}),N[L]}try{Y({},"")}catch{Y=function(L,ye,Xe){return L[ye]=Xe}}function ne(N,L,ye,Xe){var tt=L&&L.prototype instanceof We?L:We,ht=Object.create(tt.prototype),le=new un(Xe||[]);return ht._invoke=Wt(N,ye,le),ht}D.wrap=ne;function de(N,L,ye){try{return{type:"normal",arg:N.call(L,ye)}}catch(Xe){return{type:"throw",arg:Xe}}}var be="suspendedStart",Ce="suspendedYield",Ue="executing",Ae="completed",Fe={};function We(){}function Ze(){}function it(){}var ct={};ct[pe]=function(){return this};var vt=Object.getPrototypeOf,Mt=vt&&vt(vt(Vt([])));Mt&&Mt!==ee&&H.call(Mt,pe)&&(ct=Mt);var pt=it.prototype=We.prototype=Object.create(ct);Ze.prototype=pt.constructor=it,it.constructor=Ze,Ze.displayName=Y(it,ce,"GeneratorFunction");function xt(N){["next","throw","return"].forEach(function(L){Y(N,L,function(ye){return this._invoke(L,ye)})})}D.isGeneratorFunction=function(N){var L=typeof N=="function"&&N.constructor;return L?L===Ze||(L.displayName||L.name)==="GeneratorFunction":!1},D.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,it):(N.__proto__=it,Y(N,ce,"GeneratorFunction")),N.prototype=Object.create(pt),N},D.awrap=function(N){return{__await:N}};function Zt(N,L){function ye(ht,le,k,$){var Ee=de(N[ht],N,le);if(Ee.type==="throw")$(Ee.arg);else{var Ve=Ee.arg,rt=Ve.value;return rt&&typeof rt=="object"&&H.call(rt,"__await")?L.resolve(rt.__await).then(function(Ge){ye("next",Ge,k,$)},function(Ge){ye("throw",Ge,k,$)}):L.resolve(rt).then(function(Ge){Ve.value=Ge,k(Ve)},function(Ge){return ye("throw",Ge,k,$)})}}var Xe;function tt(ht,le){function k(){return new L(function($,Ee){ye(ht,le,$,Ee)})}return Xe=Xe?Xe.then(k,k):k()}this._invoke=tt}xt(Zt.prototype),Zt.prototype[oe]=function(){return this},D.AsyncIterator=Zt,D.async=function(N,L,ye,Xe,tt){tt===void 0&&(tt=Promise);var ht=new Zt(ne(N,L,ye,Xe),tt);return D.isGeneratorFunction(L)?ht:ht.next().then(function(le){return le.done?le.value:ht.next()})};function Wt(N,L,ye){var Xe=be;return function(ht,le){if(Xe===Ue)throw new Error("Generator is already running");if(Xe===Ae){if(ht==="throw")throw le;return Se()}for(ye.method=ht,ye.arg=le;;){var k=ye.delegate;if(k){var $=ln(k,ye);if($){if($===Fe)continue;return $}}if(ye.method==="next")ye.sent=ye._sent=ye.arg;else if(ye.method==="throw"){if(Xe===be)throw Xe=Ae,ye.arg;ye.dispatchException(ye.arg)}else ye.method==="return"&&ye.abrupt("return",ye.arg);Xe=Ue;var Ee=de(N,L,ye);if(Ee.type==="normal"){if(Xe=ye.done?Ae:Ce,Ee.arg===Fe)continue;return{value:Ee.arg,done:ye.done}}else Ee.type==="throw"&&(Xe=Ae,ye.method="throw",ye.arg=Ee.arg)}}}function ln(N,L){var ye=N.iterator[L.method];if(ye===ve){if(L.delegate=null,L.method==="throw"){if(N.iterator.return&&(L.method="return",L.arg=ve,ln(N,L),L.method==="throw"))return Fe;L.method="throw",L.arg=new TypeError("The iterator does not provide a 'throw' method")}return Fe}var Xe=de(ye,N.iterator,L.arg);if(Xe.type==="throw")return L.method="throw",L.arg=Xe.arg,L.delegate=null,Fe;var tt=Xe.arg;if(!tt)return L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,Fe;if(tt.done)L[N.resultName]=tt.value,L.next=N.nextLoc,L.method!=="return"&&(L.method="next",L.arg=ve);else return tt;return L.delegate=null,Fe}xt(pt),Y(pt,ce,"Generator"),pt[pe]=function(){return this},pt.toString=function(){return"[object Generator]"};function et(N){var L={tryLoc:N[0]};1 in N&&(L.catchLoc=N[1]),2 in N&&(L.finallyLoc=N[2],L.afterLoc=N[3]),this.tryEntries.push(L)}function _n(N){var L=N.completion||{};L.type="normal",delete L.arg,N.completion=L}function un(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(et,this),this.reset(!0)}D.keys=function(N){var L=[];for(var ye in N)L.push(ye);return L.reverse(),function Xe(){for(;L.length;){var tt=L.pop();if(tt in N)return Xe.value=tt,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function Vt(N){if(N){var L=N[pe];if(L)return L.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var ye=-1,Xe=function tt(){for(;++ye<N.length;)if(H.call(N,ye))return tt.value=N[ye],tt.done=!1,tt;return tt.value=ve,tt.done=!0,tt};return Xe.next=Xe}}return{next:Se}}D.values=Vt;function Se(){return{value:ve,done:!0}}return un.prototype={constructor:un,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(_n),!N)for(var L in this)L.charAt(0)==="t"&&H.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=ve)},stop:function(){this.done=!0;var N=this.tryEntries[0],L=N.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var L=this;function ye($,Ee){return ht.type="throw",ht.arg=N,L.next=$,Ee&&(L.method="next",L.arg=ve),!!Ee}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var tt=this.tryEntries[Xe],ht=tt.completion;if(tt.tryLoc==="root")return ye("end");if(tt.tryLoc<=this.prev){var le=H.call(tt,"catchLoc"),k=H.call(tt,"finallyLoc");if(le&&k){if(this.prev<tt.catchLoc)return ye(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return ye(tt.finallyLoc)}else if(le){if(this.prev<tt.catchLoc)return ye(tt.catchLoc,!0)}else if(k){if(this.prev<tt.finallyLoc)return ye(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,L){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var Xe=this.tryEntries[ye];if(Xe.tryLoc<=this.prev&&H.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var tt=Xe;break}}tt&&(N==="break"||N==="continue")&&tt.tryLoc<=L&&L<=tt.finallyLoc&&(tt=null);var ht=tt?tt.completion:{};return ht.type=N,ht.arg=L,tt?(this.method="next",this.next=tt.finallyLoc,Fe):this.complete(ht)},complete:function(N,L){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&L&&(this.next=L),Fe},finish:function(N){for(var L=this.tryEntries.length-1;L>=0;--L){var ye=this.tryEntries[L];if(ye.finallyLoc===N)return this.complete(ye.completion,ye.afterLoc),_n(ye),Fe}},catch:function(N){for(var L=this.tryEntries.length-1;L>=0;--L){var ye=this.tryEntries[L];if(ye.tryLoc===N){var Xe=ye.completion;if(Xe.type==="throw"){var tt=Xe.arg;_n(ye)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(N,L,ye){return this.delegate={iterator:Vt(N),resultName:L,nextLoc:ye},this.method==="next"&&(this.arg=ve),Fe}},D}(K.exports);try{regeneratorRuntime=O}catch{Function("r","regeneratorRuntime = r")(O)}},"./src/api.js":function(K,W,E){E.r(W),E.d(W,"setup",function(){return Ue}),E.d(W,"setupCache",function(){return Ce}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var O=E("axios"),D=E.n(O),ee=E("./src/request.js"),H=E("./src/cache.js");E.d(W,"serializeQuery",function(){return H.serializeQuery});var ve=E("./src/config.js"),_e=E("./src/utilities.js");function pe(Ae,Fe){if(Ae==null)return{};var We=oe(Ae,Fe),Ze,it;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Ae);for(it=0;it<ct.length;it++)Ze=ct[it],!(Fe.indexOf(Ze)>=0)&&Object.prototype.propertyIsEnumerable.call(Ae,Ze)&&(We[Ze]=Ae[Ze])}return We}function oe(Ae,Fe){if(Ae==null)return{};var We={},Ze=Object.keys(Ae),it,ct;for(ct=0;ct<Ze.length;ct++)it=Ze[ct],!(Fe.indexOf(it)>=0)&&(We[it]=Ae[it]);return We}function ce(Ae,Fe){var We=Object.keys(Ae);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(Ae);Fe&&(Ze=Ze.filter(function(it){return Object.getOwnPropertyDescriptor(Ae,it).enumerable})),We.push.apply(We,Ze)}return We}function Y(Ae){for(var Fe=1;Fe<arguments.length;Fe++){var We=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?ce(Object(We),!0).forEach(function(Ze){ne(Ae,Ze,We[Ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(We)):ce(Object(We)).forEach(function(Ze){Object.defineProperty(Ae,Ze,Object.getOwnPropertyDescriptor(We,Ze))})}return Ae}function ne(Ae,Fe,We){return Fe in Ae?Object.defineProperty(Ae,Fe,{value:We,enumerable:!0,configurable:!0,writable:!0}):Ae[Fe]=We,Ae}function de(Ae,Fe,We,Ze,it,ct,vt){try{var Mt=Ae[ct](vt),pt=Mt.value}catch(xt){We(xt);return}Mt.done?Fe(pt):Promise.resolve(pt).then(Ze,it)}function be(Ae){return function(){var Fe=this,We=arguments;return new Promise(function(Ze,it){var ct=Ae.apply(Fe,We);function vt(pt){de(ct,Ze,it,vt,Mt,"next",pt)}function Mt(pt){de(ct,Ze,it,vt,Mt,"throw",pt)}vt(void 0)})}}function Ce(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae=Object(ve.makeConfig)(Ae);function Fe(Ze){return We.apply(this,arguments)}function We(){return We=be(regeneratorRuntime.mark(function Ze(it){var ct,vt,Mt,pt,xt;return regeneratorRuntime.wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return ct=Object(ve.mergeRequestConfig)(Ae,it),Wt.next=3,Object(ee.default)(ct,it);case 3:if(vt=Wt.sent,Mt=vt.next,Object(_e.isFunction)(Mt)){Wt.next=7;break}return Wt.abrupt("return",Mt);case 7:return Wt.prev=7,Wt.next=10,ct.adapter(it);case 10:vt=Wt.sent,Wt.next=16;break;case 13:Wt.prev=13,Wt.t0=Wt.catch(7),pt=Wt.t0;case 16:if(!pt){Wt.next=31;break}if(xt=Object(_e.isFunction)(ct.readOnError)?ct.readOnError(pt,it):ct.readOnError,!xt){Wt.next=30;break}return Wt.prev=19,ct.acceptStale=!0,Wt.next=23,Object(ee.default)(ct,it);case 23:return vt=Wt.sent,vt.next.request.stale=!0,Wt.abrupt("return",vt.next);case 28:Wt.prev=28,Wt.t1=Wt.catch(19);case 30:throw pt;case 31:return Wt.abrupt("return",Mt(vt));case 32:case"end":return Wt.stop()}},Ze,null,[[7,13],[19,28]])})),We.apply(this,arguments)}return{adapter:Fe,config:Ae,store:Ae.store}}function Ue(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=Y(Y(Y({},ve.defaults.axios),Ae),{},{cache:Y(Y({},ve.defaults.axios.cache),Ae.cache)}),We=Ce(Fe.cache);Fe.cache;var Ze=pe(Fe,["cache"]),it=D.a.create(Y(Y({},Ze),{},{adapter:We.adapter}));return it.cache=We.store,it}W.default={setup:Ue,setupCache:Ce,serializeQuery:H.serializeQuery}},"./src/cache.js":function(K,W,E){E.r(W),E.d(W,"read",function(){return ce}),E.d(W,"write",function(){return pe}),E.d(W,"key",function(){return ne}),E.d(W,"invalidate",function(){return Ce}),E.d(W,"serializeQuery",function(){return Ue}),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var O=E("./src/utilities.js"),D=E("./node_modules/md5/md5.js"),ee=E.n(D),H=E("./src/serialize.js");function ve(Ae,Fe,We,Ze,it,ct,vt){try{var Mt=Ae[ct](vt),pt=Mt.value}catch(xt){We(xt);return}Mt.done?Fe(pt):Promise.resolve(pt).then(Ze,it)}function _e(Ae){return function(){var Fe=this,We=arguments;return new Promise(function(Ze,it){var ct=Ae.apply(Fe,We);function vt(pt){ve(ct,Ze,it,vt,Mt,"next",pt)}function Mt(pt){ve(ct,Ze,it,vt,Mt,"throw",pt)}vt(void 0)})}}function pe(Ae,Fe,We){return oe.apply(this,arguments)}function oe(){return oe=_e(regeneratorRuntime.mark(function Ae(Fe,We,Ze){var it;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,it={expires:Fe.expires,data:Object(H.default)(Fe,We,Ze)},vt.next=4,Fe.store.setItem(Fe.uuid,it);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),Fe.debug("Could not store response",vt.t0),!Fe.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,Fe.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),Fe.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Ae,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function ce(Ae,Fe){return Y.apply(this,arguments)}function Y(){return Y=_e(regeneratorRuntime.mark(function Ae(Fe,We){var Ze,it,ct,vt,Mt,pt,xt,Zt;return regeneratorRuntime.wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:return Ze=Fe.uuid,it=Fe.ignoreCache,ln.next=3,Fe.store.getItem(Ze);case 3:if(ct=ln.sent,!(it||!ct||!ct.data)){ln.next=10;break}throw Fe.debug("cache-miss",We.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(Mt=ct.expires,pt=ct.data,xt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!xt&&!Fe.acceptStale&&Mt!==0&&Mt<Date.now())){ln.next=18;break}throw Fe.debug("cache-stale",We.url),Zt=new Error,Zt.reason="cache-stale",Zt.message="Entry is stale",Zt;case 18:return Fe.debug(Fe.acceptStale?"cache-hit-stale":"cache-hit",We.url),ln.abrupt("return",pt);case 20:case"end":return ln.stop()}},Ae)})),Y.apply(this,arguments)}function ne(Ae){if(Object(O.isFunction)(Ae.key))return Ae.key;var Fe;return Object(O.isString)(Ae.key)?Fe=function(Ze){var it="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct="".concat(Ae.key,"/").concat(it).concat(Ue(Ze));return Ze.data?ct+ee()(Ze.data):ct}:Fe=function(Ze){var it="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct=it+Ue(Ze);return Ze.data?ct+ee()(Ze.data):ct},Fe}function de(Ae,Fe){return be.apply(this,arguments)}function be(){return be=_e(regeneratorRuntime.mark(function Ae(Fe,We){var Ze;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(Ze=We.method.toLowerCase(),!Fe.exclude.methods.includes(Ze)){ct.next=4;break}return ct.next=4,Fe.store.removeItem(Fe.uuid);case 4:case"end":return ct.stop()}},Ae)})),be.apply(this,arguments)}function Ce(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(O.isFunction)(Ae.invalidate)?Ae.invalidate:de}function Ue(Ae){if(!Ae.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ae.params);var Fe=Ae.params,We=Ae.params instanceof URLSearchParams;return We||(Fe=new URLSearchParams,Object.keys(Ae.params).forEach(function(Ze){return Fe.append(Ze,Ae.params[Ze])})),"?".concat(Fe.toString())}W.default={read:ce,write:pe,key:ne,invalidate:Ce,serializeQuery:Ue}},"./src/config.js":function(K,W,E){E.r(W),E.d(W,"defaults",function(){return Y}),E.d(W,"makeConfig",function(){return de}),E.d(W,"mergeRequestConfig",function(){return be}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var O=E("axios"),D=E.n(O),ee=E("./src/memory.js"),H=E("./src/cache.js");function ve(Ce,Ue){var Ae=Object.keys(Ce);if(Object.getOwnPropertySymbols){var Fe=Object.getOwnPropertySymbols(Ce);Ue&&(Fe=Fe.filter(function(We){return Object.getOwnPropertyDescriptor(Ce,We).enumerable})),Ae.push.apply(Ae,Fe)}return Ae}function _e(Ce){for(var Ue=1;Ue<arguments.length;Ue++){var Ae=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?ve(Object(Ae),!0).forEach(function(Fe){pe(Ce,Fe,Ae[Fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ce,Object.getOwnPropertyDescriptors(Ae)):ve(Object(Ae)).forEach(function(Fe){Object.defineProperty(Ce,Fe,Object.getOwnPropertyDescriptor(Ae,Fe))})}return Ce}function pe(Ce,Ue,Ae){return Ue in Ce?Object.defineProperty(Ce,Ue,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):Ce[Ue]=Ae,Ce}var oe=function(){},ce=function(){for(var Ue,Ae=arguments.length,Fe=new Array(Ae),We=0;We<Ae;We++)Fe[We]=arguments[We];return(Ue=console).log.apply(Ue,["[axios-cache-adapter]"].concat(Fe))},Y={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:D.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ne=["limit","store","adapter","uuid","acceptStale"],de=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ae=_e(_e(_e({},Y.cache),Ue),{},{exclude:_e(_e({},Y.cache.exclude),Ue.exclude)});return Ae.key=Object(H.key)(Ae),Ae.invalidate=Object(H.invalidate)(Ae),Ae.debug!==!1?Ae.debug=typeof Ae.debug=="function"?Ae.debug:ce:Ae.debug=oe,Ae.store||(Ae.store=new ee.default),Ae.debug("Global cache config",Ae),Ae},be=function(Ue,Ae){var Fe=Ae.cache||{};Fe&&ne.forEach(function(Ze){return Fe[Ze]?delete Fe[Ze]:void 0});var We=_e(_e(_e({},Ue),Fe),{},{exclude:_e(_e({},Ue.exclude),Fe.exclude)});return We.debug===!0&&(We.debug=ce),Fe.key&&(We.key=Object(H.key)(Fe)),We.uuid=We.key(Ae),Ue.debug("Request config for ".concat(Ae.url),We),We};W.default={defaults:Y,makeConfig:de,mergeRequestConfig:be}},"./src/exclude.js":function(K,W,E){E.r(W),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js");var O=E("./src/utilities.js");function D(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments.length>1?arguments[1]:void 0,ve=ee.exclude,_e=ve===void 0?{}:ve,pe=ee.debug,oe=H.method.toLowerCase();if(oe==="head"||_e.methods.includes(oe))return pe("Excluding request by HTTP method ".concat(H.url)),!0;if(typeof _e.filter=="function"&&_e.filter(H))return pe("Excluding request by filter ".concat(H.url)),!0;var ce=/\?.*$/.test(H.url)||Object(O.isObject)(H.params)&&Object.keys(H.params).length!==0||typeof URLSearchParams<"u"&&H.params instanceof URLSearchParams;if(_e.query&&ce)return pe("Excluding request by query ".concat(H.url)),!0;var Y=_e.paths||[],ne=Y.some(function(de){return H.url.match(de)});return ne?(pe("Excluding request by url match ".concat(H.url)),!0):!1}W.default=D},"./src/index.node.js":function(K,W,E){E.r(W);var O=E("./src/api.js");E.d(W,"setup",function(){return O.setup}),E.d(W,"setupCache",function(){return O.setupCache}),E.d(W,"serializeQuery",function(){return O.serializeQuery});var D=E("./src/redis.js");E.d(W,"RedisStore",function(){return D.default});var ee=E("./src/redis-default.js");E.d(W,"RedisDefaultStore",function(){return ee.default}),W.default={setup:O.setup,setupCache:O.setupCache,serializeQuery:O.serializeQuery,RedisStore:D.default,RedisDefaultStore:ee.default}},"./src/limit.js":function(K,W,E){E.r(W),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function O(ve,_e,pe,oe,ce,Y,ne){try{var de=ve[Y](ne),be=de.value}catch(Ce){pe(Ce);return}de.done?_e(be):Promise.resolve(be).then(oe,ce)}function D(ve){return function(){var _e=this,pe=arguments;return new Promise(function(oe,ce){var Y=ve.apply(_e,pe);function ne(be){O(Y,oe,ce,ne,de,"next",be)}function de(be){O(Y,oe,ce,ne,de,"throw",be)}ne(void 0)})}}function ee(ve){return H.apply(this,arguments)}function H(){return H=D(regeneratorRuntime.mark(function ve(_e){var pe,oe;return regeneratorRuntime.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,_e.store.length();case 2:if(pe=Y.sent,!(pe<_e.limit)){Y.next=5;break}return Y.abrupt("return");case 5:return _e.debug("Current store size: ".concat(pe)),Y.next=8,_e.store.iterate(function(ne,de){oe||(oe={value:ne,key:de}),ne.expires<oe.value.expires&&(oe={value:ne,key:de})});case 8:if(!oe){Y.next=12;break}return _e.debug("Removing item: ".concat(oe.key)),Y.next=12,_e.store.removeItem(oe.key);case 12:case"end":return Y.stop()}},ve)})),H.apply(this,arguments)}W.default=ee},"./src/memory.js":function(K,W,E){E.r(W),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var O=E("./src/utilities.js");function D(oe,ce,Y,ne,de,be,Ce){try{var Ue=oe[be](Ce),Ae=Ue.value}catch(Fe){Y(Fe);return}Ue.done?ce(Ae):Promise.resolve(Ae).then(ne,de)}function ee(oe){return function(){var ce=this,Y=arguments;return new Promise(function(ne,de){var be=oe.apply(ce,Y);function Ce(Ae){D(be,ne,de,Ce,Ue,"next",Ae)}function Ue(Ae){D(be,ne,de,Ce,Ue,"throw",Ae)}Ce(void 0)})}}function H(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var Y=0;Y<ce.length;Y++){var ne=ce[Y];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}function _e(oe,ce,Y){return ce&&ve(oe.prototype,ce),Y&&ve(oe,Y),oe}var pe=function(){function oe(){H(this,oe),this.store={}}return _e(oe,[{key:"getItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){var be;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return be=this.store[de]||null,Ue.abrupt("return",JSON.parse(be));case 2:case"end":return Ue.stop()}},ne,this)}));function Y(ne){return ce.apply(this,arguments)}return Y}()},{key:"setItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de,be){return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return this.store[de]=JSON.stringify(be),Ue.abrupt("return",be);case 2:case"end":return Ue.stop()}},ne,this)}));function Y(ne,de){return ce.apply(this,arguments)}return Y}()},{key:"removeItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:delete this.store[de];case 1:case"end":return Ce.stop()}},ne,this)}));function Y(ne){return ce.apply(this,arguments)}return Y}()},{key:"clear",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:this.store={};case 1:case"end":return be.stop()}},ne,this)}));function Y(){return ce.apply(this,arguments)}return Y}()},{key:"length",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Object.keys(this.store).length);case 1:case"end":return be.stop()}},ne,this)}));function Y(){return ce.apply(this,arguments)}return Y}()},{key:"iterate",value:function(Y){return Promise.all(Object(O.mapObject)(this.store,Y))}}]),oe}();W.default=pe},"./src/redis-default.js":function(K,W,E){E.r(W),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var O=E("util");function D(oe,ce,Y,ne,de,be,Ce){try{var Ue=oe[be](Ce),Ae=Ue.value}catch(Fe){Y(Fe);return}Ue.done?ce(Ae):Promise.resolve(Ae).then(ne,de)}function ee(oe){return function(){var ce=this,Y=arguments;return new Promise(function(ne,de){var be=oe.apply(ce,Y);function Ce(Ae){D(be,ne,de,Ce,Ue,"next",Ae)}function Ue(Ae){D(be,ne,de,Ce,Ue,"throw",Ae)}Ce(void 0)})}}function H(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var Y=0;Y<ce.length;Y++){var ne=ce[Y];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}function _e(oe,ce,Y){return ce&&ve(oe.prototype,ce),Y&&ve(oe,Y),oe}var pe=function(){function oe(ce){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};H(this,oe);var ne=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ce.constructor.name!=="RedisClient")throw ne}catch{throw ne}this.client=ce,this.prefix=Y.prefix||"axios-cache",this.maxScanCount=Y.maxScanCount||1e3,this.getAsync=Object(O.promisify)(ce.get).bind(ce),this.psetexAsync=Object(O.promisify)(ce.psetex).bind(ce),this.delAsync=Object(O.promisify)(ce.del).bind(ce),this.scanAsync=Object(O.promisify)(ce.scan).bind(ce)}return _e(oe,[{key:"calculateTTL",value:function(Y){var ne=Date.now();return Y.expires&&Y.expires>ne?Y.expires-ne:-1}},{key:"transformKey",value:function(Y){return this.prefix+"_"+Y}},{key:"getItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){var be;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.getAsync(this.transformKey(de));case 2:if(Ue.t0=Ue.sent,Ue.t0){Ue.next=5;break}Ue.t0=null;case 5:return be=Ue.t0,Ue.abrupt("return",JSON.parse(be));case 7:case"end":return Ue.stop()}},ne,this)}));function Y(ne){return ce.apply(this,arguments)}return Y}()},{key:"setItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de,be){var Ce,Ue;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(Ce=this.transformKey(de),Ue=this.calculateTTL(be),!(Ue>0)){Fe.next=5;break}return Fe.next=5,this.psetexAsync(Ce,Ue,JSON.stringify(be));case 5:return Fe.abrupt("return",be);case 6:case"end":return Fe.stop()}},ne,this)}));function Y(ne,de){return ce.apply(this,arguments)}return Y}()},{key:"removeItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.delAsync(this.transformKey(de));case 2:case"end":return Ce.stop()}},ne,this)}));function Y(ne){return ce.apply(this,arguments)}return Y}()},{key:"scan",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){var be,Ce;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:be="0";case 1:return Ae.next=3,this.scanAsync(be,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Ce=Ae.sent,be=Ce[0],Ae.next=7,de(Ce[1]);case 7:if(be!=="0"){Ae.next=1;break}case 8:case"end":return Ae.stop()}},ne,this)}));function Y(ne){return ce.apply(this,arguments)}return Y}()},{key:"clear",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(){var de=this;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.scan(function(Ue){return de.delAsync(Ue)});case 2:case"end":return Ce.stop()}},ne,this)}));function Y(){return ce.apply(this,arguments)}return Y}()},{key:"length",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(){var de;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return de=0,Ce.next=3,this.scan(function(Ue){de+=Ue.length});case 3:return Ce.abrupt("return",de);case 4:case"end":return Ce.stop()}},ne,this)}));function Y(){return ce.apply(this,arguments)}return Y}()},{key:"iterate",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){var be=this,Ce,Ue;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Ue=function(){return Ue=ee(regeneratorRuntime.mark(function Ze(it){var ct,vt;return regeneratorRuntime.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.getAsync(it);case 2:if(pt.t0=pt.sent,pt.t0){pt.next=5;break}pt.t0=null;case 5:return ct=pt.t0,vt=JSON.parse(ct),pt.next=9,de(vt,it);case 9:return pt.abrupt("return",pt.sent);case 10:case"end":return pt.stop()}},Ze,this)})),Ue.apply(this,arguments)},Ce=function(Ze){return Ue.apply(this,arguments)},Fe.next=4,this.scan(function(We){return Promise.all(We.map(Ce.bind(be)))});case 4:return Fe.abrupt("return",Promise.resolve([]));case 5:case"end":return Fe.stop()}},ne,this)}));function Y(ne){return ce.apply(this,arguments)}return Y}()}]),oe}();W.default=pe},"./src/redis.js":function(K,W,E){E.r(W),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var O=E("util"),D=E("./src/utilities.js");function ee(ce,Y,ne,de,be,Ce,Ue){try{var Ae=ce[Ce](Ue),Fe=Ae.value}catch(We){ne(We);return}Ae.done?Y(Fe):Promise.resolve(Fe).then(de,be)}function H(ce){return function(){var Y=this,ne=arguments;return new Promise(function(de,be){var Ce=ce.apply(Y,ne);function Ue(Fe){ee(Ce,de,be,Ue,Ae,"next",Fe)}function Ae(Fe){ee(Ce,de,be,Ue,Ae,"throw",Fe)}Ue(void 0)})}}function ve(ce,Y){if(!(ce instanceof Y))throw new TypeError("Cannot call a class as a function")}function _e(ce,Y){for(var ne=0;ne<Y.length;ne++){var de=Y[ne];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(ce,de.key,de)}}function pe(ce,Y,ne){return Y&&_e(ce.prototype,Y),ne&&_e(ce,ne),ce}var oe=function(){function ce(Y){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,ce);var de=new TypeError("First parameter must be a valid RedisClient instance.");try{if(Y.constructor.name!=="RedisClient")throw de}catch{throw de}this.client=Y,this.HASH_KEY=ne,this.hgetAsync=Object(O.promisify)(Y.hget).bind(Y),this.hsetAsync=Object(O.promisify)(Y.hset).bind(Y),this.hdelAsync=Object(O.promisify)(Y.hdel).bind(Y),this.delAsync=Object(O.promisify)(Y.del).bind(Y),this.hlenAsync=Object(O.promisify)(Y.hlen).bind(Y),this.hgetallAsync=Object(O.promisify)(Y.hgetall).bind(Y)}return pe(ce,[{key:"getItem",value:function(){var Y=H(regeneratorRuntime.mark(function de(be){var Ce;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetAsync(this.HASH_KEY,be);case 2:if(Ae.t0=Ae.sent,Ae.t0){Ae.next=5;break}Ae.t0=null;case 5:return Ce=Ae.t0,Ae.abrupt("return",JSON.parse(Ce));case 7:case"end":return Ae.stop()}},de,this)}));function ne(de){return Y.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var Y=H(regeneratorRuntime.mark(function de(be,Ce){return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hsetAsync(this.HASH_KEY,be,JSON.stringify(Ce));case 2:return Ae.abrupt("return",Ce);case 3:case"end":return Ae.stop()}},de,this)}));function ne(de,be){return Y.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var Y=H(regeneratorRuntime.mark(function de(be){return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.hdelAsync(this.HASH_KEY,be);case 2:case"end":return Ue.stop()}},de,this)}));function ne(de){return Y.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var Y=H(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Ce.stop()}},de,this)}));function ne(){return Y.apply(this,arguments)}return ne}()},{key:"length",value:function(){var Y=H(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Ce.stop()}},de,this)}));function ne(){return Y.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var Y=H(regeneratorRuntime.mark(function de(be){var Ce;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Ce=Ae.sent,Ae.abrupt("return",Promise.all(Object(D.mapObject)(Ce,be)));case 4:case"end":return Ae.stop()}},de,this)}));function ne(de){return Y.apply(this,arguments)}return ne}()}]),ce}();W.default=oe},"./src/request.js":function(K,W,E){E.r(W),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var O=E("./src/response.js"),D=E("./src/exclude.js"),ee=E("./src/cache.js");function H(oe,ce,Y,ne,de,be,Ce){try{var Ue=oe[be](Ce),Ae=Ue.value}catch(Fe){Y(Fe);return}Ue.done?ce(Ae):Promise.resolve(Ae).then(ne,de)}function ve(oe){return function(){var ce=this,Y=arguments;return new Promise(function(ne,de){var be=oe.apply(ce,Y);function Ce(Ae){H(be,ne,de,Ce,Ue,"next",Ae)}function Ue(Ae){H(be,ne,de,Ce,Ue,"throw",Ae)}Ce(void 0)})}}function _e(oe,ce){return pe.apply(this,arguments)}function pe(){return pe=ve(regeneratorRuntime.mark(function oe(ce,Y){var ne,de,be;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return be=function(){return ce.excludeFromCache=!0,{config:ce,next:ne}},ce.debug("uuid",ce.uuid),ne=function(){for(var Fe=arguments.length,We=new Array(Fe),Ze=0;Ze<Fe;Ze++)We[Ze]=arguments[Ze];return O.default.apply(void 0,[ce,Y].concat(We))},Ue.next=5,ce.invalidate(ce,Y);case 5:if(!Object(D.default)(ce,Y)){Ue.next=7;break}return Ue.abrupt("return",be());case 7:return Ue.prev=7,Ue.next=10,Object(ee.read)(ce,Y);case 10:return de=Ue.sent,de.config=Y,de.request={fromCache:!0},Ue.abrupt("return",{config:ce,next:de});case 16:if(Ue.prev=16,Ue.t0=Ue.catch(7),!(ce.clearOnStale&&Ue.t0.reason==="cache-stale")){Ue.next=21;break}return Ue.next=21,ce.store.removeItem(ce.uuid);case 21:return Ue.abrupt("return",{config:ce,next:ne});case 22:case"end":return Ue.stop()}},oe,null,[[7,16]])})),pe.apply(this,arguments)}W.default=_e},"./src/response.js":function(K,W,E){E.r(W),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var O=E("./src/limit.js"),D=E("./src/cache.js"),ee=E("./node_modules/cache-control-esm/index.js");function H(oe,ce,Y,ne,de,be,Ce){try{var Ue=oe[be](Ce),Ae=Ue.value}catch(Fe){Y(Fe);return}Ue.done?ce(Ae):Promise.resolve(Ae).then(ne,de)}function ve(oe){return function(){var ce=this,Y=arguments;return new Promise(function(ne,de){var be=oe.apply(ce,Y);function Ce(Ae){H(be,ne,de,Ce,Ue,"next",Ae)}function Ue(Ae){H(be,ne,de,Ce,Ue,"throw",Ae)}Ce(void 0)})}}function _e(oe,ce,Y){return pe.apply(this,arguments)}function pe(){return pe=ve(regeneratorRuntime.mark(function oe(ce,Y,ne){var de,be,Ce,Ue,Ae;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(de=ne.request,be=de===void 0?{}:de,Ce=ne.headers,Ue=Ce===void 0?{}:Ce,!(["arraybuffer","blob"].indexOf(be.responseType)>-1)){We.next=3;break}return We.abrupt("return",ne);case 3:if(Ae={},ce.readHeaders&&(Ue["cache-control"]?(Ae=Object(ee.parse)(Ue["cache-control"]),(Ae.noCache||Ae.noStore)&&(ce.excludeFromCache=!0)):Ue.expires?ce.expires=new Date(Ue.expires).getTime():ce.expires=new Date().getTime()),ce.excludeFromCache){We.next=15;break}if(Ae.maxAge||Ae.maxAge===0?ce.expires=Date.now()+Ae.maxAge*1e3:ce.readHeaders||(ce.expires=ce.maxAge===0?Date.now():Date.now()+ce.maxAge),!ce.limit){We.next=11;break}return ce.debug("Detected limit: ".concat(ce.limit)),We.next=11,Object(O.default)(ce);case 11:return We.next=13,Object(D.write)(ce,Y,ne);case 13:We.next=16;break;case 15:ne.request.excludedFromCache=!0;case 16:return We.abrupt("return",ne);case 17:case"end":return We.stop()}},oe)})),pe.apply(this,arguments)}W.default=_e},"./src/serialize.js":function(K,W,E){E.r(W),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function O(H,ve){if(H==null)return{};var _e=D(H,ve),pe,oe;if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(H);for(oe=0;oe<ce.length;oe++)pe=ce[oe],!(ve.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(H,pe)&&(_e[pe]=H[pe])}return _e}function D(H,ve){if(H==null)return{};var _e={},pe=Object.keys(H),oe,ce;for(ce=0;ce<pe.length;ce++)oe=pe[ce],!(ve.indexOf(oe)>=0)&&(_e[oe]=H[oe]);return _e}function ee(H,ve,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(oe){H.debug("Could not parse data as JSON",oe)}_e.request,_e.config;var pe=O(_e,["request","config"]);return pe}W.default=ee},"./src/utilities.js":function(K,W,E){E.r(W),E.d(W,"isObject",function(){return D}),E.d(W,"getTag",function(){return ee}),E.d(W,"isFunction",function(){return H}),E.d(W,"isString",function(){return ve}),E.d(W,"mapObject",function(){return _e}),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function O(pe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(ce){return typeof ce}:O=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},O(pe)}function D(pe){var oe=O(pe);return pe!=null&&(oe==="object"||oe==="function")}function ee(pe){return pe===null?pe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(pe)}function H(pe){if(!D(pe))return!1;var oe=ee(pe);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function ve(pe){var oe=O(pe);return oe==="string"||oe==="object"&&pe!=null&&!Array.isArray(pe)&&ee(pe)==="[object String]"}function _e(pe,oe){return D(pe)?Object.keys(pe).map(function(ce){return oe(pe[ce],ce)}):[]}},axios:function(K,W){K.exports=ae},util:function(K,W){K.exports=M.default}})})});const B={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},j=R.setupCache({maxAge:60*60*24*1e3}),he=P.default.create({adapter:j.adapter}),q=async(X,G={})=>{const ae={...B,...G},[K,W]=i.lngLatToGoogle(X,ae.zoomBase),E=ae.tileUrl.replace("{z}",String(ae.zoomBase)).replace("{x}",String(K)).replace("{y}",String(W)),O={code:"",prefecture:"",city:""};let D;try{const ve=await he.get(E,{responseType:"arraybuffer"});D=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const ee=new m.VectorTile(new S.default(D));let H=Object.keys(ee.layers);return Array.isArray(H)||(H=[H]),H.forEach(ve=>{const _e=ee.layers[ve];if(_e&&ae.layer===_e.name)for(let pe=0;pe<_e.length;pe++){const oe=_e.feature(pe).toGeoJSON(K,W,ae.zoomBase);H.length>1&&(oe.properties.vt_layer=ve);const ce={type:"FeatureCollection",features:[oe]};t.geoContains(ce,X)&&(O.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,O.prefecture=oe.properties.prefecture,O.city=oe.properties.city)}}),O};e.openReverseGeocoder=q})(PP);const o5={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},s5={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},a5={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},l5={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},vE={JPN:a5,CHN:o5,DEU:s5,KOR:l5};function NI(e,t,i={}){const a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function u5(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_E(e[0])||!_E(e[1]))throw new Error("coordinates must contain numbers");return NI({type:"Point",coordinates:e},t,i)}function c5(e,t,i={}){for(const c of e){if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(c[c.length-1].length!==c[0].length)throw new Error("First and last Position are not equivalent.");for(let p=0;p<c[c.length-1].length;p++)if(c[c.length-1][p]!==c[0][p])throw new Error("First and last Position are not equivalent.")}return NI({type:"Polygon",coordinates:e},t,i)}function _E(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function h5(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function d5(e){return e.type==="Feature"?e.geometry:e}function UI(e,t,i){if(e!==null)for(var a,c,p,m,u,S,P,M=0,b=0,C,R=e.type,B=R==="FeatureCollection",j=R==="Feature",he=B?e.features.length:1,q=0;q<he;q++){P=B?e.features[q].geometry:j?e.geometry:e,C=P?P.type==="GeometryCollection":!1,u=C?P.geometries.length:1;for(var X=0;X<u;X++){var G=0,ae=0;if(m=C?P.geometries[X]:P,m!==null){S=m.coordinates;var K=m.type;switch(M=i&&(K==="Polygon"||K==="MultiPolygon")?1:0,K){case null:break;case"Point":if(t(S,b,q,G,ae)===!1)return!1;b++,G++;break;case"LineString":case"MultiPoint":for(a=0;a<S.length;a++){if(t(S[a],b,q,G,ae)===!1)return!1;b++,K==="MultiPoint"&&G++}K==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(a=0;a<S.length;a++){for(c=0;c<S[a].length-M;c++){if(t(S[a][c],b,q,G,ae)===!1)return!1;b++}K==="MultiLineString"&&G++,K==="Polygon"&&ae++}K==="Polygon"&&G++;break;case"MultiPolygon":for(a=0;a<S.length;a++){for(ae=0,c=0;c<S[a].length;c++){for(p=0;p<S[a][c].length-M;p++){if(t(S[a][c][p],b,q,G,ae)===!1)return!1;b++}ae++}G++}break;case"GeometryCollection":for(a=0;a<m.geometries.length;a++)if(UI(m.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function f5(e,t){var i=0,a=0,c=0,p=0,m=0,u=0,S=0,P=0,M=null,b=null,C=e[0],R=e[1],B=t.length;for(i;i<B;i++){a=0;var j=t[i].length-1,he=t[i];if(M=he[0],M[0]!==he[j][0]&&M[1]!==he[j][1])throw new Error("First and last coordinates in a ring must be the same");for(m=M[0]-C,u=M[1]-R,a;a<j;a++){if(b=he[a+1],P=b[1]-R,u<0&&P<0||u>0&&P>0){M=b,u=P,m=M[0]-C;continue}if(S=b[0]-e[0],P>0&&u<=0){if(p=m*P-S*u,p>0)c=c+1;else if(p===0)return 0}else if(u>0&&P<=0){if(p=m*P-S*u,p<0)c=c+1;else if(p===0)return 0}else if(P===0&&u<0){if(p=m*P-S*u,p===0)return 0}else if(u===0&&P<0){if(p=m*P-S*u,p===0)return 0}else if(u===0&&P===0){if(S<=0&&m>=0)return 0;if(m<=0&&S>=0)return 0}M=b,u=P,m=S}}return c%2!==0}function p5(e,t,i={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const a=h5(e),c=d5(t),p=c.type,m=t.bbox;let u=c.coordinates;if(m&&m5(a,m)===!1)return!1;p==="Polygon"&&(u=[u]);let S=!1;for(var P=0;P<u.length;++P){const M=f5(a,u[P]);if(M===0)return!i.ignoreBoundary;M&&(S=!0)}return S}function m5(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function g5(e,t={}){let i=0,a=0,c=0;return UI(e,function(p){i+=p[0],a+=p[1],c++},!0),u5([i/c,a/c],t.properties)}const y5=()=>{const[e,t]=yt.useState(!1);return{detectCountry:yt.useCallback(async(a,c)=>{t(!0);const m=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of m.features)if(p5([a,c],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},fv=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var u;const[c,p]=yt.useState((u=e.properties)==null?void 0:u[t.key]);yt.useEffect(()=>{var S;p((S=e.properties)==null?void 0:S[t.key])},[e]);const m=yt.useCallback(S=>{p(S.currentTarget.value),a&&a(S)},[]);return gt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[gt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:m}),gt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(S=>{if(parseInt(S.tags.admin_level)===t.adminLevel)return gt.jsx("option",{value:S.tags.name},S.id);if(S.type==="node"&&t.adminLevel===9)return gt.jsx("option",{value:S.tags.name},S.id)})})]})},v5=({feature:e,fields:t})=>e.properties?gt.jsxs(gt.Fragment,{children:[t.postcodeField&&gt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,_5=({placeholder:e,defaultValue:t})=>{const[i,a]=yt.useState(t);yt.useEffect(()=>{a(t)},[t]);const c=yt.useCallback(p=>{a(p.currentTarget.value)},[]);return gt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[gt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Ug={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ug.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,p="Expected a function",m="__lodash_hash_undefined__",u=1,S=2,P=1/0,M=9007199254740991,b="[object Arguments]",C="[object Array]",R="[object Boolean]",B="[object Date]",j="[object Error]",he="[object Function]",q="[object GeneratorFunction]",X="[object Map]",G="[object Number]",ae="[object Object]",K="[object Promise]",W="[object RegExp]",E="[object Set]",O="[object String]",D="[object Symbol]",ee="[object WeakMap]",H="[object ArrayBuffer]",ve="[object DataView]",_e="[object Float32Array]",pe="[object Float64Array]",oe="[object Int8Array]",ce="[object Int16Array]",Y="[object Int32Array]",ne="[object Uint8Array]",de="[object Uint8ClampedArray]",be="[object Uint16Array]",Ce="[object Uint32Array]",Ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Fe=/^\./,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/[\\^$.*+?()[\]{}|]/g,it=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,pt={};pt[_e]=pt[pe]=pt[oe]=pt[ce]=pt[Y]=pt[ne]=pt[de]=pt[be]=pt[Ce]=!0,pt[b]=pt[C]=pt[H]=pt[R]=pt[ve]=pt[B]=pt[j]=pt[he]=pt[X]=pt[G]=pt[ae]=pt[W]=pt[E]=pt[O]=pt[ee]=!1;var xt={};xt[b]=xt[C]=xt[H]=xt[ve]=xt[R]=xt[B]=xt[_e]=xt[pe]=xt[oe]=xt[ce]=xt[Y]=xt[X]=xt[G]=xt[ae]=xt[W]=xt[E]=xt[O]=xt[D]=xt[ne]=xt[de]=xt[be]=xt[Ce]=!0,xt[j]=xt[he]=xt[ee]=!1;var Zt=typeof Nl=="object"&&Nl&&Nl.Object===Object&&Nl,Wt=typeof self=="object"&&self&&self.Object===Object&&self,ln=Zt||Wt||Function("return this")(),et=t&&!t.nodeType&&t,_n=et&&!0&&e&&!e.nodeType&&e,un=_n&&_n.exports===et,Vt=un&&Zt.process,Se=function(){try{return Vt&&Vt.binding("util")}catch{}}(),N=Se&&Se.isTypedArray;function L(Z,ge){return Z.set(ge[0],ge[1]),Z}function ye(Z,ge){return Z.add(ge),Z}function Xe(Z,ge,$e){switch($e.length){case 0:return Z.call(ge);case 1:return Z.call(ge,$e[0]);case 2:return Z.call(ge,$e[0],$e[1]);case 3:return Z.call(ge,$e[0],$e[1],$e[2])}return Z.apply(ge,$e)}function tt(Z,ge){for(var $e=-1,ut=Z?Z.length:0;++$e<ut&&ge(Z[$e],$e,Z)!==!1;);return Z}function ht(Z,ge){for(var $e=-1,ut=ge.length,kt=Z.length;++$e<ut;)Z[kt+$e]=ge[$e];return Z}function le(Z,ge,$e,ut){var kt=-1,St=Z?Z.length:0;for(ut&&St&&($e=Z[++kt]);++kt<St;)$e=ge($e,Z[kt],kt,Z);return $e}function k(Z,ge){for(var $e=-1,ut=Z?Z.length:0;++$e<ut;)if(ge(Z[$e],$e,Z))return!0;return!1}function $(Z){return function(ge){return ge==null?i:ge[Z]}}function Ee(Z,ge){for(var $e=-1,ut=Array(Z);++$e<Z;)ut[$e]=ge($e);return ut}function Ve(Z){return function(ge){return Z(ge)}}function rt(Z,ge){return Z==null?i:Z[ge]}function Ge(Z){var ge=!1;if(Z!=null&&typeof Z.toString!="function")try{ge=!!(Z+"")}catch{}return ge}function Et(Z){var ge=-1,$e=Array(Z.size);return Z.forEach(function(ut,kt){$e[++ge]=[kt,ut]}),$e}function It(Z,ge){return function($e){return Z(ge($e))}}function yn(Z){var ge=-1,$e=Array(Z.size);return Z.forEach(function(ut){$e[++ge]=ut}),$e}var Sn=Array.prototype,Rt=Function.prototype,zr=Object.prototype,ei=ln["__core-js_shared__"],Ii=function(){var Z=/[^.]+$/.exec(ei&&ei.keys&&ei.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),Ur=Rt.toString,ze=zr.hasOwnProperty,se=Ur.call(Object),ie=zr.toString,xe=RegExp("^"+Ur.call(ze).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=un?ln.Buffer:i,ke=ln.Symbol,De=ln.Uint8Array,qe=It(Object.getPrototypeOf,Object),Le=Object.create,st=zr.propertyIsEnumerable,dt=Sn.splice,ot=Object.getOwnPropertySymbols,Ct=Ie?Ie.isBuffer:i,Kt=It(Object.keys,Object),nn=Math.max,pn=Vs(ln,"DataView"),En=Vs(ln,"Map"),hn=Vs(ln,"Promise"),$n=Vs(ln,"Set"),Jn=Vs(ln,"WeakMap"),nr=Vs(Object,"create"),wn=!st.call({valueOf:1},"valueOf"),Nn=Ln(pn),Yn=Ln(En),Er=Ln(hn),$r=Ln($n),Vr=Ln(Jn),Ho=ke?ke.prototype:i,kn=Ho?Ho.valueOf:i,nl=Ho?Ho.toString:i;function Tn(){}function Tr(Z){var ge=-1,$e=Z?Z.length:0;for(this.clear();++ge<$e;){var ut=Z[ge];this.set(ut[0],ut[1])}}function fi(){this.__data__=nr?nr(null):{}}function Vh(Z){return this.has(Z)&&delete this.__data__[Z]}function pi(Z){var ge=this.__data__;if(nr){var $e=ge[Z];return $e===m?i:$e}return ze.call(ge,Z)?ge[Z]:i}function Gr(Z){var ge=this.__data__;return nr?ge[Z]!==i:ze.call(ge,Z)}function rl(Z,ge){var $e=this.__data__;return $e[Z]=nr&&ge===i?m:ge,this}Tr.prototype.clear=fi,Tr.prototype.delete=Vh,Tr.prototype.get=pi,Tr.prototype.has=Gr,Tr.prototype.set=rl;function mi(Z){var ge=-1,$e=Z?Z.length:0;for(this.clear();++ge<$e;){var ut=Z[ge];this.set(ut[0],ut[1])}}function vr(){this.__data__=[]}function go(Z){var ge=this.__data__,$e=wa(ge,Z);if($e<0)return!1;var ut=ge.length-1;return $e==ut?ge.pop():dt.call(ge,$e,1),!0}function ps(Z){var ge=this.__data__,$e=wa(ge,Z);return $e<0?i:ge[$e][1]}function dr(Z){return wa(this.__data__,Z)>-1}function il(Z,ge){var $e=this.__data__,ut=wa($e,Z);return ut<0?$e.push([Z,ge]):$e[ut][1]=ge,this}mi.prototype.clear=vr,mi.prototype.delete=go,mi.prototype.get=ps,mi.prototype.has=dr,mi.prototype.set=il;function _r(Z){var ge=-1,$e=Z?Z.length:0;for(this.clear();++ge<$e;){var ut=Z[ge];this.set(ut[0],ut[1])}}function va(){this.__data__={hash:new Tr,map:new(En||mi),string:new Tr}}function Xo(Z){return yl(this,Z).delete(Z)}function cu(Z){return yl(this,Z).get(Z)}function _a(Z){return yl(this,Z).has(Z)}function Ko(Z,ge){return yl(this,Z).set(Z,ge),this}_r.prototype.clear=va,_r.prototype.delete=Xo,_r.prototype.get=cu,_r.prototype.has=_a,_r.prototype.set=Ko;function In(Z){var ge=-1,$e=Z?Z.length:0;for(this.__data__=new _r;++ge<$e;)this.add(Z[ge])}function ol(Z){return this.__data__.set(Z,m),this}function hu(Z){return this.__data__.has(Z)}In.prototype.add=In.prototype.push=ol,In.prototype.has=hu;function Kr(Z){this.__data__=new mi(Z)}function sl(){this.__data__=new mi}function al(Z){return this.__data__.delete(Z)}function ll(Z){return this.__data__.get(Z)}function ul(Z){return this.__data__.has(Z)}function xa(Z,ge){var $e=this.__data__;if($e instanceof mi){var ut=$e.__data__;if(!En||ut.length<c-1)return ut.push([Z,ge]),this;$e=this.__data__=new _r(ut)}return $e.set(Z,ge),this}Kr.prototype.clear=sl,Kr.prototype.delete=al,Kr.prototype.get=ll,Kr.prototype.has=ul,Kr.prototype.set=xa;function ms(Z,ge){var $e=Fr(Z)||_o(Z)?Ee(Z.length,String):[],ut=$e.length,kt=!!ut;for(var St in Z)(ge||ze.call(Z,St))&&!(kt&&(St=="length"||Gs(St,ut)))&&$e.push(St);return $e}function du(Z,ge,$e){($e!==i&&!vo(Z[ge],$e)||typeof ge=="number"&&$e===i&&!(ge in Z))&&(Z[ge]=$e)}function lc(Z,ge,$e){var ut=Z[ge];(!(ze.call(Z,ge)&&vo(ut,$e))||$e===i&&!(ge in Z))&&(Z[ge]=$e)}function wa(Z,ge){for(var $e=Z.length;$e--;)if(vo(Z[$e][0],ge))return $e;return-1}function Gh(Z,ge){return Z&&gl(ge,oo(ge),Z)}function gi(Z,ge,$e,ut,kt,St,Ht){var Jt;if(ut&&(Jt=St?ut(Z,kt,St,Ht):ut(Z)),Jt!==i)return Jt;if(!xi(Z))return Z;var vn=Fr(Z);if(vn){if(Jt=bc(Z),!ge)return ml(Z,Jt)}else{var Dn=Gi(Z),Fn=Dn==he||Dn==q;if(wo(Z))return Hh(Z,ge);if(Dn==ae||Dn==b||Fn&&!St){if(Ge(Z))return St?Z:{};if(Jt=gu(Fn?{}:Z),!ge)return gc(Z,Gh(Jt,Z))}else{if(!xt[Dn])return St?Z:{};Jt=Sc(Z,Dn,gi,ge)}}Ht||(Ht=new Kr);var Zn=Ht.get(Z);if(Zn)return Zn;if(Ht.set(Z,Jt),!vn)var rr=$e?_c(Z):oo(Z);return tt(rr||Z,function(Un,fr){rr&&(fr=Un,Un=Z[fr]),lc(Jt,fr,gi(Un,ge,$e,ut,fr,Z,Ht))}),Jt}function ba(Z){return xi(Z)?Le(Z):{}}var yi=vc(Sa),vi=ys();function Sa(Z,ge){return Z&&vi(Z,ge,oo)}function Ea(Z,ge){ge=qo(ge,Z)?[ge]:Ns(ge);for(var $e=0,ut=ge.length;Z!=null&&$e<ut;)Z=Z[Zs(ge[$e++])];return $e&&$e==ut?Z:i}function uc(Z,ge,$e){var ut=ge(Z);return Fr(Z)?ut:ht(ut,$e(Z))}function cc(Z){return ie.call(Z)}function gs(Z,ge){return Z!=null&&ge in Object(Z)}function cl(Z,ge,$e,ut,kt){return Z===ge?!0:Z==null||ge==null||!xi(Z)&&!Ai(ge)?Z!==Z&&ge!==ge:Zh(Z,ge,cl,$e,ut,kt)}function Zh(Z,ge,$e,ut,kt,St){var Ht=Fr(Z),Jt=Fr(ge),vn=C,Dn=C;Ht||(vn=Gi(Z),vn=vn==b?ae:vn),Jt||(Dn=Gi(ge),Dn=Dn==b?ae:Dn);var Fn=vn==ae&&!Ge(Z),Zn=Dn==ae&&!Ge(ge),rr=vn==Dn;if(rr&&!Fn)return St||(St=new Kr),Ht||Jo(Z)?mu(Z,ge,$e,ut,kt,St):Jh(Z,ge,vn,$e,ut,kt,St);if(!(kt&S)){var Un=Fn&&ze.call(Z,"__wrapped__"),fr=Zn&&ze.call(ge,"__wrapped__");if(Un||fr){var so=Un?Z.value():Z,Mi=fr?ge.value():ge;return St||(St=new Kr),$e(so,Mi,ut,kt,St)}}return rr?(St||(St=new Kr),Yh(Z,ge,$e,ut,kt,St)):!1}function Wh(Z,ge,$e,ut){var kt=$e.length,St=kt,Ht=!ut;if(Z==null)return!St;for(Z=Object(Z);kt--;){var Jt=$e[kt];if(Ht&&Jt[2]?Jt[1]!==Z[Jt[0]]:!(Jt[0]in Z))return!1}for(;++kt<St;){Jt=$e[kt];var vn=Jt[0],Dn=Z[vn],Fn=Jt[1];if(Ht&&Jt[2]){if(Dn===i&&!(vn in Z))return!1}else{var Zn=new Kr;if(ut)var rr=ut(Dn,Fn,vn,Z,ge,Zn);if(!(rr===i?cl(Fn,Dn,ut,u|S,Zn):rr))return!1}}return!0}function hc(Z){if(!xi(Z)||vu(Z))return!1;var ge=Hs(Z)||Ge(Z)?xe:vt;return ge.test(Ln(Z))}function dc(Z){return Ai(Z)&&vs(Z.length)&&!!pt[ie.call(Z)]}function fc(Z){return typeof Z=="function"?Z:Z==null?Xs:typeof Z=="object"?Fr(Z)?fu(Z[0],Z[1]):fl(Z):bu(Z)}function hl(Z){if(!Ca(Z))return Kt(Z);var ge=[];for(var $e in Object(Z))ze.call(Z,$e)&&$e!="constructor"&&ge.push($e);return ge}function dl(Z){if(!xi(Z))return _u(Z);var ge=Ca(Z),$e=[];for(var ut in Z)ut=="constructor"&&(ge||!ze.call(Z,ut))||$e.push(ut);return $e}function fl(Z){var ge=vl(Z);return ge.length==1&&ge[0][2]?Gn(ge[0][0],ge[0][1]):function($e){return $e===Z||Wh($e,Z,ge)}}function fu(Z,ge){return qo(Z)&&_l(ge)?Gn(Zs(Z),ge):function($e){var ut=xs($e,Z);return ut===i&&ut===ge?Yo($e,Z):cl(ge,ut,i,u|S)}}function pl(Z,ge,$e,ut,kt){if(Z!==ge){if(!(Fr(ge)||Jo(ge)))var St=dl(ge);tt(St||ge,function(Ht,Jt){if(St&&(Jt=Ht,Ht=ge[Jt]),xi(Ht))kt||(kt=new Kr),ro(Z,ge,Jt,$e,pl,ut,kt);else{var vn=ut?ut(Z[Jt],Ht,Jt+"",Z,ge,kt):i;vn===i&&(vn=Ht),du(Z,Jt,vn)}})}}function ro(Z,ge,$e,ut,kt,St,Ht){var Jt=Z[$e],vn=ge[$e],Dn=Ht.get(vn);if(Dn){du(Z,$e,Dn);return}var Fn=St?St(Jt,vn,$e+"",Z,ge,Ht):i,Zn=Fn===i;Zn&&(Fn=vn,Fr(vn)||Jo(vn)?Fr(Jt)?Fn=Jt:io(Jt)?Fn=ml(Jt):(Zn=!1,Fn=gi(vn,!0)):Ia(vn)||_o(vn)?_o(Jt)?Fn=Aa(Jt):!xi(Jt)||ut&&Hs(Jt)?(Zn=!1,Fn=gi(vn,!0)):Fn=Jt:Zn=!1),Zn&&(Ht.set(vn,Fn),kt(Fn,vn,ut,St,Ht),Ht.delete(vn)),du(Z,$e,Fn)}function pu(Z){return function(ge){return Ea(ge,Z)}}function Bs(Z,ge){return ge=nn(ge===i?Z.length-1:ge,0),function(){for(var $e=arguments,ut=-1,kt=nn($e.length-ge,0),St=Array(kt);++ut<kt;)St[ut]=$e[ge+ut];ut=-1;for(var Ht=Array(ge+1);++ut<ge;)Ht[ut]=$e[ut];return Ht[ge]=St,Xe(Z,this,Ht)}}function An(Z){if(typeof Z=="string")return Z;if(_s(Z))return nl?nl.call(Z):"";var ge=Z+"";return ge=="0"&&1/Z==-P?"-0":ge}function Ns(Z){return Fr(Z)?Z:bn(Z)}function Hh(Z,ge){if(ge)return Z.slice();var $e=new Z.constructor(Z.length);return Z.copy($e),$e}function Us(Z){var ge=new Z.constructor(Z.byteLength);return new De(ge).set(new De(Z)),ge}function Xh(Z,ge){var $e=ge?Us(Z.buffer):Z.buffer;return new Z.constructor($e,Z.byteOffset,Z.byteLength)}function $s(Z,ge,$e){var ut=ge?$e(Et(Z),!0):Et(Z);return le(ut,L,new Z.constructor)}function Kh(Z){var ge=new Z.constructor(Z.source,ct.exec(Z));return ge.lastIndex=Z.lastIndex,ge}function pc(Z,ge,$e){var ut=ge?$e(yn(Z),!0):yn(Z);return le(ut,ye,new Z.constructor)}function qh(Z){return kn?Object(kn.call(Z)):{}}function mc(Z,ge){var $e=ge?Us(Z.buffer):Z.buffer;return new Z.constructor($e,Z.byteOffset,Z.length)}function ml(Z,ge){var $e=-1,ut=Z.length;for(ge||(ge=Array(ut));++$e<ut;)ge[$e]=Z[$e];return ge}function gl(Z,ge,$e,ut){$e||($e={});for(var kt=-1,St=ge.length;++kt<St;){var Ht=ge[kt],Jt=ut?ut($e[Ht],Z[Ht],Ht,$e,Z):i;lc($e,Ht,Jt===i?Z[Ht]:Jt)}return $e}function gc(Z,ge){return gl(Z,xc(Z),ge)}function yc(Z){return Bs(function(ge,$e){var ut=-1,kt=$e.length,St=kt>1?$e[kt-1]:i,Ht=kt>2?$e[2]:i;for(St=Z.length>3&&typeof St=="function"?(kt--,St):i,Ht&&yo($e[0],$e[1],Ht)&&(St=kt<3?i:St,kt=1),ge=Object(ge);++ut<kt;){var Jt=$e[ut];Jt&&Z(ge,Jt,ut,St)}return ge})}function vc(Z,ge){return function($e,ut){if($e==null)return $e;if(!xo($e))return Z($e,ut);for(var kt=$e.length,St=ge?kt:-1,Ht=Object($e);(ge?St--:++St<kt)&&ut(Ht[St],St,Ht)!==!1;);return $e}}function ys(Z){return function(ge,$e,ut){for(var kt=-1,St=Object(ge),Ht=ut(ge),Jt=Ht.length;Jt--;){var vn=Ht[Z?Jt:++kt];if($e(St[vn],vn,St)===!1)break}return ge}}function mu(Z,ge,$e,ut,kt,St){var Ht=kt&S,Jt=Z.length,vn=ge.length;if(Jt!=vn&&!(Ht&&vn>Jt))return!1;var Dn=St.get(Z);if(Dn&&St.get(ge))return Dn==ge;var Fn=-1,Zn=!0,rr=kt&u?new In:i;for(St.set(Z,ge),St.set(ge,Z);++Fn<Jt;){var Un=Z[Fn],fr=ge[Fn];if(ut)var so=Ht?ut(fr,Un,Fn,ge,Z,St):ut(Un,fr,Fn,Z,ge,St);if(so!==i){if(so)continue;Zn=!1;break}if(rr){if(!k(ge,function(Mi,bo){if(!rr.has(bo)&&(Un===Mi||$e(Un,Mi,ut,kt,St)))return rr.add(bo)})){Zn=!1;break}}else if(!(Un===fr||$e(Un,fr,ut,kt,St))){Zn=!1;break}}return St.delete(Z),St.delete(ge),Zn}function Jh(Z,ge,$e,ut,kt,St,Ht){switch($e){case ve:if(Z.byteLength!=ge.byteLength||Z.byteOffset!=ge.byteOffset)return!1;Z=Z.buffer,ge=ge.buffer;case H:return!(Z.byteLength!=ge.byteLength||!ut(new De(Z),new De(ge)));case R:case B:case G:return vo(+Z,+ge);case j:return Z.name==ge.name&&Z.message==ge.message;case W:case O:return Z==ge+"";case X:var Jt=Et;case E:var vn=St&S;if(Jt||(Jt=yn),Z.size!=ge.size&&!vn)return!1;var Dn=Ht.get(Z);if(Dn)return Dn==ge;St|=u,Ht.set(Z,ge);var Fn=mu(Jt(Z),Jt(ge),ut,kt,St,Ht);return Ht.delete(Z),Fn;case D:if(kn)return kn.call(Z)==kn.call(ge)}return!1}function Yh(Z,ge,$e,ut,kt,St){var Ht=kt&S,Jt=oo(Z),vn=Jt.length,Dn=oo(ge),Fn=Dn.length;if(vn!=Fn&&!Ht)return!1;for(var Zn=vn;Zn--;){var rr=Jt[Zn];if(!(Ht?rr in ge:ze.call(ge,rr)))return!1}var Un=St.get(Z);if(Un&&St.get(ge))return Un==ge;var fr=!0;St.set(Z,ge),St.set(ge,Z);for(var so=Ht;++Zn<vn;){rr=Jt[Zn];var Mi=Z[rr],bo=ge[rr];if(ut)var bs=Ht?ut(bo,Mi,rr,ge,Z,St):ut(Mi,bo,rr,Z,ge,St);if(!(bs===i?Mi===bo||$e(Mi,bo,ut,kt,St):bs)){fr=!1;break}so||(so=rr=="constructor")}if(fr&&!so){var Ks=Z.constructor,So=ge.constructor;Ks!=So&&"constructor"in Z&&"constructor"in ge&&!(typeof Ks=="function"&&Ks instanceof Ks&&typeof So=="function"&&So instanceof So)&&(fr=!1)}return St.delete(Z),St.delete(ge),fr}function _c(Z){return uc(Z,oo,xc)}function Ta(){var Z=Tn.iteratee||xl;return Z=Z===xl?fc:Z,arguments.length?Z(arguments[0],arguments[1]):Z}function yl(Z,ge){var $e=Z.__data__;return yu(ge)?$e[typeof ge=="string"?"string":"hash"]:$e.map}function vl(Z){for(var ge=oo(Z),$e=ge.length;$e--;){var ut=ge[$e],kt=Z[ut];ge[$e]=[ut,kt,_l(kt)]}return ge}function Vs(Z,ge){var $e=rt(Z,ge);return hc($e)?$e:i}var xc=ot?It(ot,Object):Qo,Gi=cc;(pn&&Gi(new pn(new ArrayBuffer(1)))!=ve||En&&Gi(new En)!=X||hn&&Gi(hn.resolve())!=K||$n&&Gi(new $n)!=E||Jn&&Gi(new Jn)!=ee)&&(Gi=function(Z){var ge=ie.call(Z),$e=ge==ae?Z.constructor:i,ut=$e?Ln($e):i;if(ut)switch(ut){case Nn:return ve;case Yn:return X;case Er:return K;case $r:return E;case Vr:return ee}return ge});function wc(Z,ge,$e){ge=qo(ge,Z)?[ge]:Ns(ge);for(var ut,kt=-1,Ht=ge.length;++kt<Ht;){var St=Zs(ge[kt]);if(!(ut=Z!=null&&$e(Z,St)))break;Z=Z[St]}if(ut)return ut;var Ht=Z?Z.length:0;return!!Ht&&vs(Ht)&&Gs(St,Ht)&&(Fr(Z)||_o(Z))}function bc(Z){var ge=Z.length,$e=Z.constructor(ge);return ge&&typeof Z[0]=="string"&&ze.call(Z,"index")&&($e.index=Z.index,$e.input=Z.input),$e}function gu(Z){return typeof Z.constructor=="function"&&!Ca(Z)?ba(qe(Z)):{}}function Sc(Z,ge,$e,ut){var kt=Z.constructor;switch(ge){case H:return Us(Z);case R:case B:return new kt(+Z);case ve:return Xh(Z,ut);case _e:case pe:case oe:case ce:case Y:case ne:case de:case be:case Ce:return mc(Z,ut);case X:return $s(Z,ut,$e);case G:case O:return new kt(Z);case W:return Kh(Z);case E:return pc(Z,ut,$e);case D:return qh(Z)}}function Gs(Z,ge){return ge=ge??M,!!ge&&(typeof Z=="number"||Mt.test(Z))&&Z>-1&&Z%1==0&&Z<ge}function yo(Z,ge,$e){if(!xi($e))return!1;var ut=typeof ge;return(ut=="number"?xo($e)&&Gs(ge,$e.length):ut=="string"&&ge in $e)?vo($e[ge],Z):!1}function qo(Z,ge){if(Fr(Z))return!1;var $e=typeof Z;return $e=="number"||$e=="symbol"||$e=="boolean"||Z==null||_s(Z)?!0:Ae.test(Z)||!Ue.test(Z)||ge!=null&&Z in Object(ge)}function yu(Z){var ge=typeof Z;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?Z!=="__proto__":Z===null}function vu(Z){return!!Ii&&Ii in Z}function Ca(Z){var ge=Z&&Z.constructor,$e=typeof ge=="function"&&ge.prototype||zr;return Z===$e}function _l(Z){return Z===Z&&!xi(Z)}function Gn(Z,ge){return function($e){return $e==null?!1:$e[Z]===ge&&(ge!==i||Z in Object($e))}}function _u(Z){var ge=[];if(Z!=null)for(var $e in Object(Z))ge.push($e);return ge}var bn=Pa(function(Z){Z=wu(Z);var ge=[];return Fe.test(Z)&&ge.push(""),Z.replace(We,function($e,ut,kt,St){ge.push(kt?St.replace(it,"$1"):ut||$e)}),ge});function Zs(Z){if(typeof Z=="string"||_s(Z))return Z;var ge=Z+"";return ge=="0"&&1/Z==-P?"-0":ge}function Ln(Z){if(Z!=null){try{return Ur.call(Z)}catch{}try{return Z+""}catch{}}return""}function Kn(Z){for(var ge=-1,$e=Z?Z.length:0,ut=0,kt=[];++ge<$e;){var St=Z[ge];St&&(kt[ut++]=St)}return kt}function Ws(Z,ge){var $e=Fr(Z)?tt:yi;return $e(Z,Ta(ge,3))}function Pa(Z,ge){if(typeof Z!="function"||ge&&typeof ge!="function")throw new TypeError(p);var $e=function(){var ut=arguments,kt=ge?ge.apply(this,ut):ut[0],St=$e.cache;if(St.has(kt))return St.get(kt);var Ht=Z.apply(this,ut);return $e.cache=St.set(kt,Ht),Ht};return $e.cache=new(Pa.Cache||_r),$e}Pa.Cache=_r;function xu(Z){return gi(Z,!1,!0)}function vo(Z,ge){return Z===ge||Z!==Z&&ge!==ge}function _o(Z){return io(Z)&&ze.call(Z,"callee")&&(!st.call(Z,"callee")||ie.call(Z)==b)}var Fr=Array.isArray;function xo(Z){return Z!=null&&vs(Z.length)&&!Hs(Z)}function io(Z){return Ai(Z)&&xo(Z)}var wo=Ct||Ma;function _i(Z){if(xo(Z)&&(Fr(Z)||typeof Z=="string"||typeof Z.splice=="function"||wo(Z)||_o(Z)))return!Z.length;var ge=Gi(Z);if(ge==X||ge==E)return!Z.size;if(wn||Ca(Z))return!Kt(Z).length;for(var $e in Z)if(ze.call(Z,$e))return!1;return!0}function Hs(Z){var ge=xi(Z)?ie.call(Z):"";return ge==he||ge==q}function vs(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=M}function xi(Z){var ge=typeof Z;return!!Z&&(ge=="object"||ge=="function")}function Ai(Z){return!!Z&&typeof Z=="object"}function Ia(Z){if(!Ai(Z)||ie.call(Z)!=ae||Ge(Z))return!1;var ge=qe(Z);if(ge===null)return!0;var $e=ze.call(ge,"constructor")&&ge.constructor;return typeof $e=="function"&&$e instanceof $e&&Ur.call($e)==se}function _s(Z){return typeof Z=="symbol"||Ai(Z)&&ie.call(Z)==D}var Jo=N?Ve(N):dc;function Aa(Z){return gl(Z,ws(Z))}function wu(Z){return Z==null?"":An(Z)}function xs(Z,ge,$e){var ut=Z==null?i:Ea(Z,ge);return ut===i?$e:ut}function Yo(Z,ge){return Z!=null&&wc(Z,ge,gs)}function oo(Z){return xo(Z)?ms(Z):hl(Z)}function ws(Z){return xo(Z)?ms(Z,!0):dl(Z)}var zn=yc(function(Z,ge,$e){pl(Z,ge,$e)});function Xs(Z){return Z}function xl(Z){return fc(typeof Z=="function"?Z:gi(Z,!0))}function bu(Z){return qo(Z)?$(Zs(Z)):pu(Z)}function Qo(){return[]}function Ma(){return!1}Tn.compact=Kn,Tn.iteratee=xl,Tn.keys=oo,Tn.keysIn=ws,Tn.memoize=Pa,Tn.merge=zn,Tn.property=bu,Tn.toPlainObject=Aa,Tn.clone=xu,Tn.eq=vo,Tn.forEach=Ws,Tn.get=xs,Tn.hasIn=Yo,Tn.identity=Xs,Tn.isArguments=_o,Tn.isArray=Fr,Tn.isArrayLike=xo,Tn.isArrayLikeObject=io,Tn.isBuffer=wo,Tn.isEmpty=_i,Tn.isFunction=Hs,Tn.isLength=vs,Tn.isObject=xi,Tn.isObjectLike=Ai,Tn.isPlainObject=Ia,Tn.isSymbol=_s,Tn.isTypedArray=Jo,Tn.stubArray=Qo,Tn.stubFalse=Ma,Tn.toString=wu,Tn.each=Ws,Tn.VERSION=a,_n&&((_n.exports=Tn)._=Tn,et._=Tn)}).call(Nl)})(Ug,Ug.exports);var x5=Ug.exports,w5=Um;function Um(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Um(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Um(e.geometries[a],t);else if(i==="Feature")Um(e.geometry,t);else if(i==="Polygon")xE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)xE(e.coordinates[a],t);return e}function xE(e,t){if(e.length!==0){wE(e[0],t);for(var i=1;i<e.length;i++)wE(e[i],!t)}}function wE(e,t){for(var i=0,a=0,c=0,p=e.length,m=p-1;c<p;m=c++){var u=(e[c][0]-e[m][0])*(e[m][1]+e[c][1]),S=i+u;a+=Math.abs(i)>=Math.abs(u)?i-S+u:u-S+i,i=S}i+a>=0!=!!t&&e.reverse()}const b5=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var S5=b5,Pn=x5,wm=w5,$m={};S5.forEach(function(e){if(e.polygon==="all")$m[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),$m[e.key]={},$m[e.key][t]=i}});function E5(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Pn.merge(e,t)}var $g={};$g=function(e,t,i){t=Pn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:$m,deduplicator:E5},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=p(e):a=c(e),a;function c(S){var P=new Array,M=new Array,b=new Array;function C(K){var W=Pn.clone(K);W.lat=K.center.lat,W.lon=K.center.lon,W.__is_center_placeholder=!0,P.push(W)}function R(K){var W=Pn.clone(K);W.nodes=[];function E(O,D,ee){var H={type:"node",id:"_"+W.type+"/"+W.id+"bounds"+ee,lat:O,lon:D};W.nodes.push(H.id),P.push(H)}E(W.bounds.minlat,W.bounds.minlon,1),E(W.bounds.maxlat,W.bounds.minlon,2),E(W.bounds.maxlat,W.bounds.maxlon,3),E(W.bounds.minlat,W.bounds.maxlon,4),W.nodes.push(W.nodes[0]),W.__is_bounds_placeholder=!0,M.push(W)}function B(K){function W(E,O,D){var ee={type:"node",id:D,lat:E,lon:O};P.push(ee)}Pn.isArray(K.nodes)||(K.nodes=K.geometry.map(function(E){return E!==null?"_anonymous@"+E.lat+"/"+E.lon:"_anonymous@unknown_location"})),K.geometry.forEach(function(E,O){E&&W(E.lat,E.lon,K.nodes[O])})}function j(K){function W(O,D,ee){var H={type:"node",id:ee,lat:O,lon:D};P.push(H)}function E(O,D){if(M.some(function(ve){return ve.type=="way"&&ve.id==D}))return;var ee={type:"way",id:D,nodes:[]};function H(ve,_e){var pe={type:"node",id:"_anonymous@"+ve+"/"+_e,lat:ve,lon:_e};ee.nodes.push(pe.id),P.push(pe)}O.forEach(function(ve){ve?H(ve.lat,ve.lon):ee.nodes.push(void 0)}),M.push(ee)}K.members.forEach(function(O,D){O.type=="node"?O.lat&&W(O.lat,O.lon,O.ref):O.type=="way"&&O.geometry&&(O.ref="_fullGeom"+O.ref,E(O.geometry,O.ref))})}for(var he=0;he<S.elements.length;he++)switch(S.elements[he].type){case"node":var q=S.elements[he];P.push(q);break;case"way":var X=Pn.clone(S.elements[he]);X.nodes=Pn.clone(X.nodes),M.push(X),X.center&&C(X),X.geometry?B(X):X.bounds&&R(X);break;case"relation":var G=Pn.clone(S.elements[he]);G.members=Pn.clone(G.members),b.push(G);var ae=G.members&&G.members.some(function(K){return K.type=="node"&&K.lat||K.type=="way"&&K.geometry&&K.geometry.length>0});G.center&&C(G),ae?j(G):G.bounds&&R(G);break}return m(P,M,b)}function p(S){var P=new Array,M=new Array,b=new Array;function C(G,ae,K){G.hasAttribute(K)&&(ae[K]=G.getAttribute(K))}function R(G,ae){var K=Pn.clone(G);C(ae,K,"lat"),C(ae,K,"lon"),K.__is_center_placeholder=!0,P.push(K)}function B(G,ae){var K=Pn.clone(G);K.nodes=[];function W(E,O,D){var ee={type:"node",id:"_"+K.type+"/"+K.id+"bounds"+D,lat:E,lon:O};K.nodes.push(ee.id),P.push(ee)}W(ae.getAttribute("minlat"),ae.getAttribute("minlon"),1),W(ae.getAttribute("maxlat"),ae.getAttribute("minlon"),2),W(ae.getAttribute("maxlat"),ae.getAttribute("maxlon"),3),W(ae.getAttribute("minlat"),ae.getAttribute("maxlon"),4),K.nodes.push(K.nodes[0]),K.__is_bounds_placeholder=!0,M.push(K)}function j(G,ae){function K(W,E,O){var D={type:"node",id:O,lat:W,lon:E};return P.push(D),D.id}Pn.isArray(G.nodes)||(G.nodes=[],Pn.each(ae,function(W,E){G.nodes.push("_anonymous@"+W.getAttribute("lat")+"/"+W.getAttribute("lon"))})),Pn.each(ae,function(W,E){W.getAttribute("lat")&&K(W.getAttribute("lat"),W.getAttribute("lon"),G.nodes[E])})}function he(G,ae){function K(E,O,D){var ee={type:"node",id:D,lat:E,lon:O};P.push(ee)}function W(E,O){if(M.some(function(H){return H.type=="way"&&H.id==O}))return;var D={type:"way",id:O,nodes:[]};function ee(H,ve){var _e={type:"node",id:"_anonymous@"+H+"/"+ve,lat:H,lon:ve};D.nodes.push(_e.id),P.push(_e)}Pn.each(E,function(H){H.getAttribute("lat")?ee(H.getAttribute("lat"),H.getAttribute("lon")):D.nodes.push(void 0)}),M.push(D)}Pn.each(ae,function(E,O){G.members[O].type=="node"?E.getAttribute("lat")&&K(E.getAttribute("lat"),E.getAttribute("lon"),G.members[O].ref):G.members[O].type=="way"&&E.getElementsByTagName("nd").length>0&&(G.members[O].ref="_fullGeom"+G.members[O].ref,W(E.getElementsByTagName("nd"),G.members[O].ref))})}Pn.each(S.getElementsByTagName("node"),function(G,ae){var K={};Pn.each(G.getElementsByTagName("tag"),function(E){K[E.getAttribute("k")]=E.getAttribute("v")});var W={type:"node"};C(G,W,"id"),C(G,W,"lat"),C(G,W,"lon"),C(G,W,"version"),C(G,W,"timestamp"),C(G,W,"changeset"),C(G,W,"uid"),C(G,W,"user"),Pn.isEmpty(K)||(W.tags=K),P.push(W)});var q,X;return Pn.each(S.getElementsByTagName("way"),function(G,ae){var K={},W=[];Pn.each(G.getElementsByTagName("tag"),function(D){K[D.getAttribute("k")]=D.getAttribute("v")});var E=!1;Pn.each(G.getElementsByTagName("nd"),function(D,ee){var H;(H=D.getAttribute("ref"))&&(W[ee]=H),!E&&D.getAttribute("lat")&&(E=!0)});var O={type:"way"};C(G,O,"id"),C(G,O,"version"),C(G,O,"timestamp"),C(G,O,"changeset"),C(G,O,"uid"),C(G,O,"user"),W.length>0&&(O.nodes=W),Pn.isEmpty(K)||(O.tags=K),(q=G.getElementsByTagName("center")[0])&&R(O,q),E?j(O,G.getElementsByTagName("nd")):(X=G.getElementsByTagName("bounds")[0])&&B(O,X),M.push(O)}),Pn.each(S.getElementsByTagName("relation"),function(G,ae){var K={},W=[];Pn.each(G.getElementsByTagName("tag"),function(D){K[D.getAttribute("k")]=D.getAttribute("v")});var E=!1;Pn.each(G.getElementsByTagName("member"),function(D,ee){W[ee]={},C(D,W[ee],"ref"),C(D,W[ee],"role"),C(D,W[ee],"type"),(!E&&W[ee].type=="node"&&D.getAttribute("lat")||W[ee].type=="way"&&D.getElementsByTagName("nd").length>0)&&(E=!0)});var O={type:"relation"};C(G,O,"id"),C(G,O,"version"),C(G,O,"timestamp"),C(G,O,"changeset"),C(G,O,"uid"),C(G,O,"user"),W.length>0&&(O.members=W),Pn.isEmpty(K)||(O.tags=K),(q=G.getElementsByTagName("center")[0])&&R(O,q),E?he(O,G.getElementsByTagName("member")):(X=G.getElementsByTagName("bounds")[0])&&B(O,X),b.push(O)}),m(P,M,b)}function m(S,P,M){function b(Fe,We){if(typeof We!="object"&&(We={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Fe,We);for(var Ze in Fe)if(t.uninterestingTags[Ze]!==!0&&!(We[Ze]===!0||We[Ze]===Fe[Ze]))return!0;return!1}function C(Fe){var We={timestamp:Fe.timestamp,version:Fe.version,changeset:Fe.changeset,user:Fe.user,uid:Fe.uid};for(var Ze in We)We[Ze]===void 0&&delete We[Ze];return We}for(var R=new Object,B=new Object,j=0;j<S.length;j++){var he=S[j];R[he.id]!==void 0&&(he=t.deduplicator(he,R[he.id])),R[he.id]=he,typeof he.tags<"u"&&b(he.tags)&&(B[he.id]=!0)}for(var j=0;j<M.length;j++)if(Pn.isArray(M[j].members))for(var q=0;q<M[j].members.length;q++)M[j].members[q].type=="node"&&(B[M[j].members[q].ref]=!0);for(var X=new Object,G=new Object,j=0;j<P.length;j++){var ae=P[j];if(X[ae.id]&&(ae=t.deduplicator(ae,X[ae.id])),X[ae.id]=ae,Pn.isArray(ae.nodes))for(var q=0;q<ae.nodes.length;q++)typeof ae.nodes[q]!="object"&&(G[ae.nodes[q]]=!0,ae.nodes[q]=R[ae.nodes[q]])}var K=new Array;for(var W in R){var he=R[W];(!G[W]||B[W])&&K.push(he)}for(var E=new Array,j=0;j<M.length;j++){var O=M[j];E[O.id]&&(O=t.deduplicator(O,E[O.id])),E[O.id]=O}var D={node:{},way:{},relation:{}};for(var W in E){var O=E[W];if(!Pn.isArray(O.members)){t.verbose&&console.warn("Relation",O.type+"/"+O.id,"ignored because it has no members");continue}for(var q=0;q<O.members.length;q++){var ee=O.members[q].type,H=O.members[q].ref;if(typeof H!="number"&&(H=H.replace("_fullGeom","")),!D[ee]){t.verbose&&console.warn("Relation",O.type+"/"+O.id,"member",ee+"/"+H,"ignored because it has an invalid type");continue}typeof D[ee][H]>"u"&&(D[ee][H]=[]),D[ee][H].push({role:O.members[q].role,rel:O.id,reltags:O.tags})}}var ve,_e=[];for(j=0;j<K.length;j++){if(typeof K[j].lon>"u"||typeof K[j].lat>"u"){t.verbose&&console.warn("POI",K[j].type+"/"+K[j].id,"ignored because it lacks coordinates");continue}var pe={type:"Feature",id:K[j].type+"/"+K[j].id,properties:{type:K[j].type,id:K[j].id,tags:K[j].tags||{},relations:D.node[K[j].id]||[],meta:C(K[j])},geometry:{type:"Point",coordinates:[+K[j].lon,+K[j].lat]}};K[j].__is_center_placeholder&&(pe.properties.geometry="center"),i?i(pe):_e.push(pe)}for(var oe=[],ce=[],j=0;j<M.length;j++)if(E[M[j].id]===M[j]){if(typeof M[j].tags<"u"&&(M[j].tags.type=="route"||M[j].tags.type=="waterway")){let We=function(Ze){var it=!1,ct;ct=Ze.members.filter(function(xt){return xt.type==="way"}),ct=ct.map(function(xt){var Zt=X[xt.ref];if(Zt===void 0||Zt.nodes===void 0){t.verbose&&console.warn("Route "+Ze.type+"/"+Ze.id,"tainted by a missing or incomplete  way",xt.type+"/"+xt.ref),it=!0;return}return{id:xt.ref,role:xt.role,way:Zt,nodes:Zt.nodes.filter(function(Wt){return Wt!==void 0?!0:(it=!0,t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"tainted by a way",xt.type+"/"+xt.ref,"with a missing node"),!1)})}}),ct=Pn.compact(ct);var vt;vt=pv(ct);var Mt=[];if(Mt=Pn.compact(vt.map(function(xt){return Pn.compact(xt.map(function(Zt){return[+Zt.lon,+Zt.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"contains no coordinates"),!1;var pt={type:"Feature",id:Ze.type+"/"+Ze.id,properties:{type:Ze.type,id:Ze.id,tags:Ze.tags||{},relations:D[Ze.type][Ze.id]||[],meta:C(Ze)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return it&&(t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"is tainted"),pt.properties.tainted=!0),pt};var Ue=We;if(!Pn.isArray(M[j].members)){t.verbose&&console.warn("Route",M[j].type+"/"+M[j].id,"ignored because it has no members");continue}if(M[j].members.forEach(function(Ze){X[Ze.ref]&&!b(X[Ze.ref].tags)&&(X[Ze.ref].is_skippablerelationmember=!0)}),pe=We(M[j]),pe===!1){t.verbose&&console.warn("Route relation",M[j].type+"/"+M[j].id,"ignored because it has invalid geometry");continue}i?i(wm(pe)):ce.push(pe)}if(typeof M[j].tags<"u"&&(M[j].tags.type=="multipolygon"||M[j].tags.type=="boundary")){let Ze=function(it,ct){var vt=!1,Mt=ne?"way":"relation",pt=typeof it.id=="number"?it.id:+it.id.replace("_fullGeom",""),xt;xt=ct.members.filter(function(L){return L.type==="way"}),xt=xt.map(function(L){var ye=X[L.ref];if(ye===void 0||ye.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a missing or incomplete way",L.type+"/"+L.ref),vt=!0;return}return{id:L.ref,role:L.role||"outer",way:ye,nodes:ye.nodes.filter(function(Xe){return Xe!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a way",L.type+"/"+L.ref,"with a missing node"),!1)})}}),xt=Pn.compact(xt);var Zt,Wt;Zt=pv(xt.filter(function(L){return L.role==="outer"})),Wt=pv(xt.filter(function(L){return L.role==="inner"}));var ln;function et(L){var ye=function(k,$){for(var Ee=0;Ee<$.length;Ee++)if(tt($[Ee],k))return!0;return!1},Xe=function(k){return k.map(function($){return[+$.lat,+$.lon]})},tt=function(k,$){for(var Ee=k[0],Ve=k[1],rt=!1,Ge=0,Et=$.length-1;Ge<$.length;Et=Ge++){var It=$[Ge][0],yn=$[Ge][1],Sn=$[Et][0],Rt=$[Et][1],zr=yn>Ve!=Rt>Ve&&Ee<(Sn-It)*(Ve-yn)/(Rt-yn)+It;zr&&(rt=!rt)}return rt},ht,le;for(L=Xe(L),ht=0;ht<Zt.length;ht++)if(le=Xe(Zt[ht]),ye(le,L))return ht}ln=Zt.map(function(L){return[L]});for(var _n=0;_n<Wt.length;_n++){var un=et(Wt[_n]);un!==void 0?ln[un].push(Wt[_n]):t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an inner ring with no containing outer")}var Vt=[];if(Vt=Pn.compact(ln.map(function(L){var ye=Pn.compact(L.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains a ring with less than four nodes");return}return Pn.compact(Xe.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(ye.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an empty ring cluster");return}return ye})),Vt.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains no coordinates"),!1;var Se="MultiPolygon";Vt.length===1&&(Se="Polygon",Vt=Vt[0]);var N={type:"Feature",id:it.type+"/"+pt,properties:{type:it.type,id:pt,tags:it.tags||{},relations:D[it.type][it.id]||[],meta:C(it)},geometry:{type:Se,coordinates:Vt}};return vt&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"is tainted"),N.properties.tainted=!0),N};var Ae=Ze;if(!Pn.isArray(M[j].members)){t.verbose&&console.warn("Multipolygon",M[j].type+"/"+M[j].id,"ignored because it has no members");continue}for(var Y=0,q=0;q<M[j].members.length;q++)M[j].members[q].role=="outer"?Y++:t.verbose&&M[j].members[q].role!="inner"&&console.warn("Multipolygon",M[j].type+"/"+M[j].id,"member",M[j].members[q].type+"/"+M[j].members[q].ref,'ignored because it has an invalid role: "'+M[j].members[q].role+'"');if(M[j].members.forEach(function(it){X[it.ref]&&(it.role==="outer"&&!b(X[it.ref].tags,M[j].tags)&&(X[it.ref].is_skippablerelationmember=!0),it.role==="inner"&&!b(X[it.ref].tags)&&(X[it.ref].is_skippablerelationmember=!0))}),Y==0){t.verbose&&console.warn("Multipolygon relation",M[j].type+"/"+M[j].id,"ignored because it has no outer ways");continue}var ne=!1;Y==1&&!b(M[j].tags,{type:!0})&&(ne=!0);var pe=null;if(!ne)pe=Ze(M[j],M[j]);else{var de=M[j].members.filter(function(it){return it.role==="outer"})[0];if(de=X[de.ref],de===void 0){t.verbose&&console.warn("Multipolygon relation",M[j].type+"/"+M[j].id,"ignored because outer way",de.type+"/"+de.ref,"is missing");continue}de.is_skippablerelationmember=!0,pe=Ze(de,M[j])}if(pe===!1){t.verbose&&console.warn("Multipolygon relation",M[j].type+"/"+M[j].id,"ignored because it has invalid geometry");continue}i?i(wm(pe)):ce.push(pe)}}for(var j=0;j<P.length;j++)if(X[P[j].id]===P[j]){if(!Pn.isArray(P[j].nodes)){t.verbose&&console.warn("Way",P[j].type+"/"+P[j].id,"ignored because it has no nodes");continue}if(!P[j].is_skippablerelationmember){typeof P[j].id!="number"&&(P[j].id=+P[j].id.replace("_fullGeom","")),P[j].tainted=!1,P[j].hidden=!1;var be=new Array;for(q=0;q<P[j].nodes.length;q++)typeof P[j].nodes[q]=="object"?be.push([+P[j].nodes[q].lon,+P[j].nodes[q].lat]):(t.verbose&&console.warn("Way",P[j].type+"/"+P[j].id,"is tainted by an invalid node"),P[j].tainted=!0);if(be.length<=1){t.verbose&&console.warn("Way",P[j].type+"/"+P[j].id,"ignored because it contains too few nodes");continue}var Ce="LineString";typeof P[j].nodes[0]<"u"&&typeof P[j].nodes[P[j].nodes.length-1]<"u"&&P[j].nodes[0].id===P[j].nodes[P[j].nodes.length-1].id&&(typeof P[j].tags<"u"&&u(P[j].tags)||P[j].__is_bounds_placeholder)&&(Ce="Polygon",be=[be]);var pe={type:"Feature",id:P[j].type+"/"+P[j].id,properties:{type:P[j].type,id:P[j].id,tags:P[j].tags||{},relations:D.way[P[j].id]||[],meta:C(P[j])},geometry:{type:Ce,coordinates:be}};P[j].tainted&&(t.verbose&&console.warn("Way",P[j].type+"/"+P[j].id,"is tainted"),pe.properties.tainted=!0),P[j].__is_bounds_placeholder&&(pe.properties.geometry="bounds"),i?i(wm(pe)):Ce=="LineString"?oe.push(pe):ce.push(pe)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(ce),ve.features=ve.features.concat(oe),ve.features=ve.features.concat(_e),t.flatProperties&&ve.features.forEach(function(Fe){Fe.properties=Pn.merge(Fe.properties.meta,Fe.properties.tags,{id:Fe.properties.type+"/"+Fe.properties.id})}),ve=wm(ve),ve)}function u(S){var P=t.polygonFeatures;if(typeof P=="function")return P(S);if(S.area==="no")return!1;for(var M in S){var b=S[M],C=P[M];if(!(typeof C>"u")&&b!=="no"&&(C===!0||C.included_values&&C.included_values[b]===!0||C.excluded_values&&C.excluded_values[b]!==!0))return!0}return!1}};function pv(e){for(var t=function(b){return b[0]},i=function(b){return b[b.length-1]},a=function(b,C){return b!==void 0&&C!==void 0&&b.id===C.id},c=[],p,m,u,S,P,M;e.length;)for(p=e.pop().nodes.slice(),c.push(p);e.length&&!a(t(p),i(p));){for(m=t(p),u=i(p),S=0;S<e.length;S++)if(M=e[S].nodes,a(u,t(M))){P=p.push,M=M.slice(1);break}else if(a(u,i(M))){P=p.push,M=M.slice(0,-1).reverse();break}else if(a(m,i(M))){P=p.unshift,M=M.slice(0,-1);break}else if(a(m,t(M))){P=p.unshift,M=M.slice(1).reverse();break}else M=P=null;if(!M)break;e.splice(S,1),P.apply(p,M)}return c}$g.toGeojson=$g;var T5=$g;const C5=qf(T5),mv={type:"FeatureCollection",features:[]},$I=()=>{const[e,t]=yt.useState(!1),i=yt.useCallback(async(m,u,S)=>{var j,he;if(e||(console.log(S),S<16))return mv;t(!0);let P=300;S>17&&(P=200),S>18&&(P=100),S>19&&(P=50),console.log("overpass: loading...");let M="[out:json]";M+=`[timeout:25];
`,M+='nwr["building"]',M+=`(around:${P},${m},${u});
`,M+="out meta geom;",console.log(M);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(M)}`,{});if(b.status!==200)return t(!1),mv;const C=await b.json();console.log("overpass json elements: ",C.elements);const R=C5(C);console.log("overpass osmtogeojson raw: ",R);for await(const q of R.features){if(!q.properties)continue;q.id=q.properties.id.split("/")[1];const X=(j=C.elements.filter(ae=>q.id?typeof q.id=="number"?ae.id===q.id:ae.id===parseInt(q.id):!1))==null?void 0:j[0];if(X&&(q.properties.tags=X.tags,q.properties.nodes=X.nodes),q.geometry.type==="Polygon"){const ae=c5(q.geometry.coordinates);var B=g5(ae);q.properties.center=B.geometry.coordinates}q.geometry.type==="Point"&&(q.properties.center=q.geometry.coordinates);const G=q.properties.uid;if(G){let ae=localStorage.getItem(G+"-icon");if(ae===null){const K=await Fs.getUser(G);(he=K.img)!=null&&he.href?(ae=K.img.href,localStorage.setItem(G+"-icon",K.img.href)):localStorage.setItem(G+"-icon","")}q.properties.userIconHref=ae||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[a,c]=yt.useState(!1),p=yt.useCallback(async m=>{console.log("overpass: loading...",m),c(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${m.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const S=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(S.status!==200){c(!1);return}const P=await S.json();console.log("overpass json parent elements: ",P.elements);const M=250,b=`
      [out:json]
      [timeout:25];
      node(id:${m.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${M});
      out;
      `;console.log(b);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(C.status!==200){c(!1);return}const R=await C.json();console.log("overpass json child elements: ",R.elements);const B=`
      [out:json]
      [timeout:25];
      node(id:${m.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${M});
      out;
      `;console.log(B);const j=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(B)}`,{});if(j.status!==200){c(!1);return}const he=await j.json();return console.log("overpass json neighbour elements: ",he.elements),c(!1),[...P.elements,...R.elements,...he.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:p,loadingOverpass:e,loadingOverpassAdmin:a}},P5=()=>gt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[gt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),gt.jsxs("datalist",{id:"source-list",children:[gt.jsx("option",{value:"survey"}),gt.jsx("option",{value:"local knowledge"}),gt.jsx("option",{value:"extrapolation"}),gt.jsx("option",{value:"estimation from existing data"})]})]}),gv={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},I5=({feature:e,onCancel:t,onSubmit:i})=>{var ve,_e,pe,oe;const{detectCountry:a,loadingCountry:c}=y5(),{fetchOverpassAdmin:p,loadingOverpassAdmin:m}=$I(),u=JSON.parse((ve=e.properties)==null?void 0:ve.center),[S,P]=yt.useState(void 0),[M,b]=yt.useState(),[C,R]=yt.useState(e),[B,j]=yt.useState(!1),[he,q]=yt.useState(!1),[X,G]=yt.useState(!1),[ae,K]=yt.useState(),[W,E]=yt.useState();yt.useEffect(()=>{j(Fs.isLoggedIn())},[]),yt.useEffect(()=>{(async()=>{var Y,ne;const ce=await a(u[0],u[1]);if(P(ce),(Y=ce==null?void 0:ce.properties)!=null&&Y.ISO_A3&&vE[ce.properties.ISO_A3]){const de=vE[ce.properties.ISO_A3];b(de);const be=de.defaultComment+" "+((ne=e.properties)==null?void 0:ne.id);E(be)}})()},[e]),yt.useEffect(()=>{console.log(C.properties)},[C]);const O=yt.useCallback(async()=>{const ce=await PP.openReverseGeocoder([u[0],u[1]]);R(Y=>{const ne={properties:{"addr:province":ce.prefecture,"addr:city":ce.city,...Y.properties}};return Y.properties=ne.properties,Y})},[]),D=yt.useCallback(async()=>{if(!C.properties)return;C.properties.nodes;const ce=await p(JSON.parse(C.properties.nodes));console.log("onOverpassReverseGeocode",ce),K(ce)},[C]),ee=yt.useCallback(async ce=>{var Ae,Fe,We;G(!0),ce.preventDefault();const Y=new FormData(ce.currentTarget),ne=JSON.parse((Ae=e.properties)==null?void 0:Ae.tags);Y.forEach((Ze,it)=>{typeof Ze=="string"&&Ze.length>0&&it!=="comment"&&it!=="source"&&(ne[it]=Ze)});const de={type:"way",id:e.id,version:(Fe=e.properties)==null?void 0:Fe.version,tags:ne,nodes:JSON.parse((We=e.properties)==null?void 0:We.nodes)};console.info(JSON.stringify(de,null,2));const be={create:[],modify:[de],delete:[]},Ce=Y.get("comment");Ce&&(gv.comment=Ce.toString());const Ue=Y.get("source");Ue&&(gv.source=Ue.toString()),await Fs.uploadChangeset(gv,be),G(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),H=yt.useCallback(()=>{q(!0)},[]);return C.properties?gt.jsxs("div",{children:[gt.jsxs("div",{children:["OSM:"," ",gt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+C.properties.id,target:"_blank",children:C.properties.id})," | ",gt.jsx(EP,{feature:C}),M&&gt.jsxs("span",{children:[" | ","Address:"," ",gt.jsx(v5,{feature:C,fields:M})]})]}),c?gt.jsx(eu,{icon:P_,spin:!0}):gt.jsx(gt.Fragment,{children:M?gt.jsxs("form",{onSubmit:ee,children:[gt.jsx("div",{className:"flex flex-wrap",children:gt.jsx(fv,{feature:C,fieldOption:M.postcodeField,onChange:H})}),gt.jsx("div",{className:"flex flex-wrap",children:M.mainFields.map(ce=>gt.jsx(fv,{feature:C,fieldOption:ce,onChange:H,suggestList:ae},ce.key))}),gt.jsx("div",{className:"flex flex-wrap",children:M.detailFields.map(ce=>gt.jsx(fv,{feature:C,fieldOption:ce,onChange:H},ce.key))}),gt.jsxs("div",{className:"flex flex-wrap",children:[gt.jsx(P5,{}),gt.jsx(_5,{defaultValue:W})]}),gt.jsx("div",{className:"flex flex-wrap",children:gt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[gt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=S==null?void 0:S.properties)==null?void 0:_e.ISO_A3)==="JPN"&&gt.jsx("button",{type:"button",onClick:O,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),gt.jsxs("button",{type:"button",disabled:m,onClick:D,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",m&&gt.jsx(eu,{icon:P_,spin:!0})]}),gt.jsx("button",{disabled:!B||X||!he,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!B&&gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),gt.jsx(SP,{})]})]})})]}):gt.jsx("div",{className:"flex flex-wrap",children:gt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[gt.jsxs("div",{className:"py-2",children:[gt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(pe=S==null?void 0:S.properties)==null?void 0:pe.NAME," (ISO code:",(oe=S==null?void 0:S.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),gt.jsx("p",{children:gt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),gt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function A5(e,t){const[i,a]=yt.useState(e);return yt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const M5={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},k5={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function z5(){const e=yt.useRef(null),[t,i]=yt.useState(),a=A5(t,2500),c=yt.useRef(null),[p,m]=yt.useState({type:"FeatureCollection",features:[]}),[u,S]=yt.useState("auto"),[P,M]=yt.useState(),[b,C]=yt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:B}=$I();yt.useEffect(()=>{setTimeout(()=>{var E;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(E=c.current)==null||E.trigger())},500)},[]);const j=yt.useCallback(E=>{const O=E.target.getCenter(),D=E.target.getZoom();i({zoom:D,latitude:O.lat,longitude:O.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),he=yt.useCallback(E=>{i(E.viewState)},[]),q=yt.useCallback(E=>{i(E.viewState)},[]);yt.useEffect(()=>{(async()=>{if(!a)return;const E=a,O=await R(E.latitude,E.longitude,E.zoom);m(O)})()},[a]);const X=yt.useCallback(E=>{var ve;S("pointer");const{features:O,point:{x:D,y:ee}}=E,H=O&&O[0];H?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:H.id},{hover:!0}),M({feature:H,x:D,y:ee})):M(void 0)},[]),G=yt.useCallback(E=>{var O;S("auto"),(O=e.current)==null||O.querySourceFeatures("buildings-source").map(D=>{var ee;(ee=e.current)==null||ee.setFeatureState({source:"buildings-source",id:D.id},{hover:!1})}),M(void 0)},[]),ae=yt.useCallback(E=>{var D;K();const O=E.features&&E.features[0];O&&((D=e.current)==null||D.setFeatureState({source:"buildings-source",id:O.id},{select:!0}),C([O]))},[]),K=yt.useCallback(()=>{var E;(E=e.current)==null||E.querySourceFeatures("buildings-source").map(O=>{var D;(D=e.current)==null||D.setFeatureState({source:"buildings-source",id:O.id},{select:!1})}),C([])},[]),W=yt.useMemo(()=>{let E=25;return t&&(E=t.zoom<18?20:t.zoom<19?25:35),p.features.map((O,D)=>!O.properties||!O.properties.center?null:gt.jsx(K4,{style:{cursor:"pointer"},longitude:O.properties.center[0],latitude:O.properties.center[1],anchor:"center",children:gt.jsx(AR,{feature:O,size:E})},`marker-${D}`))},[p,t]);return gt.jsxs("div",{children:[gt.jsx(uR,{}),gt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:gt.jsx(zR,{viewState:t})}),gt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&gt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:gt.jsx("div",{style:{padding:"10px"},children:b.map(E=>gt.jsx(I5,{feature:E,onCancel:K,onSubmit:K},E.id))})}),gt.jsxs(X4,{ref:e,...t,onMove:he,onMoveEnd:q,onLoad:j,interactiveLayerIds:["buildings-layer-fill"],onClick:ae,onMouseEnter:X,onMouseLeave:G,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:DC,style:{width:"100%",height:"100%"},mapStyle:M5,children:[gt.jsx(Q4,{id:"buildings-source",type:"geojson",data:p,children:gt.jsx(Y4,{...k5})}),gt.jsx(q4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),gt.jsx(J4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),gt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?gt.jsx(eu,{size:"2x",icon:aR}):B?gt.jsx(eu,{size:"2x",icon:P_,spin:!0}):gt.jsx(eu,{size:"2x",icon:oR})}),W,P&&gt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:P.x+5,top:P.y+5},children:[gt.jsx(EP,{feature:P.feature}),gt.jsx("br",{}),gt.jsx(MR,{feature:P.feature}),gt.jsx(cR,{feature:P.feature})]})]})]})]})}var VI={},yy={};yy.byteLength=j5;yy.toByteArray=L5;yy.fromByteArray=N5;var ca=[],os=[],F5=typeof Uint8Array<"u"?Uint8Array:Array,yv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Jc=0,R5=yv.length;Jc<R5;++Jc)ca[Jc]=yv[Jc],os[yv.charCodeAt(Jc)]=Jc;os[45]=62;os[95]=63;function GI(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function j5(e){var t=GI(e),i=t[0],a=t[1];return(i+a)*3/4-a}function O5(e,t,i){return(t+i)*3/4-i}function L5(e){var t,i=GI(e),a=i[0],c=i[1],p=new F5(O5(e,a,c)),m=0,u=c>0?a-4:a,S;for(S=0;S<u;S+=4)t=os[e.charCodeAt(S)]<<18|os[e.charCodeAt(S+1)]<<12|os[e.charCodeAt(S+2)]<<6|os[e.charCodeAt(S+3)],p[m++]=t>>16&255,p[m++]=t>>8&255,p[m++]=t&255;return c===2&&(t=os[e.charCodeAt(S)]<<2|os[e.charCodeAt(S+1)]>>4,p[m++]=t&255),c===1&&(t=os[e.charCodeAt(S)]<<10|os[e.charCodeAt(S+1)]<<4|os[e.charCodeAt(S+2)]>>2,p[m++]=t>>8&255,p[m++]=t&255),p}function D5(e){return ca[e>>18&63]+ca[e>>12&63]+ca[e>>6&63]+ca[e&63]}function B5(e,t,i){for(var a,c=[],p=t;p<i;p+=3)a=(e[p]<<16&16711680)+(e[p+1]<<8&65280)+(e[p+2]&255),c.push(D5(a));return c.join("")}function N5(e){for(var t,i=e.length,a=i%3,c=[],p=16383,m=0,u=i-a;m<u;m+=p)c.push(B5(e,m,m+p>u?u:m+p));return a===1?(t=e[i-1],c.push(ca[t>>2]+ca[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ca[t>>10]+ca[t>>4&63]+ca[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=yy,i=dy,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=X,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,u.TYPED_ARRAY_SUPPORT=p(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{const le=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(le,k),le.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function m(le){if(le>c)throw new RangeError('The value "'+le+'" is invalid for option "size"');const k=new Uint8Array(le);return Object.setPrototypeOf(k,u.prototype),k}function u(le,k,$){if(typeof le=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(le)}return S(le,k,$)}u.poolSize=8192;function S(le,k,$){if(typeof le=="string")return C(le,k);if(ArrayBuffer.isView(le))return B(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(L(le,ArrayBuffer)||le&&L(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(L(le,SharedArrayBuffer)||le&&L(le.buffer,SharedArrayBuffer)))return j(le,k,$);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=le.valueOf&&le.valueOf();if(Ee!=null&&Ee!==le)return u.from(Ee,k,$);const Ve=he(le);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return u.from(le[Symbol.toPrimitive]("string"),k,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}u.from=function(le,k,$){return S(le,k,$)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function P(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function M(le,k,$){return P(le),le<=0?m(le):k!==void 0?typeof $=="string"?m(le).fill(k,$):m(le).fill(k):m(le)}u.alloc=function(le,k,$){return M(le,k,$)};function b(le){return P(le),m(le<0?0:q(le)|0)}u.allocUnsafe=function(le){return b(le)},u.allocUnsafeSlow=function(le){return b(le)};function C(le,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const $=G(le,k)|0;let Ee=m($);const Ve=Ee.write(le,k);return Ve!==$&&(Ee=Ee.slice(0,Ve)),Ee}function R(le){const k=le.length<0?0:q(le.length)|0,$=m(k);for(let Ee=0;Ee<k;Ee+=1)$[Ee]=le[Ee]&255;return $}function B(le){if(L(le,Uint8Array)){const k=new Uint8Array(le);return j(k.buffer,k.byteOffset,k.byteLength)}return R(le)}function j(le,k,$){if(k<0||le.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<k+($||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return k===void 0&&$===void 0?Ee=new Uint8Array(le):$===void 0?Ee=new Uint8Array(le,k):Ee=new Uint8Array(le,k,$),Object.setPrototypeOf(Ee,u.prototype),Ee}function he(le){if(u.isBuffer(le)){const k=q(le.length)|0,$=m(k);return $.length===0||le.copy($,0,0,k),$}if(le.length!==void 0)return typeof le.length!="number"||ye(le.length)?m(0):R(le);if(le.type==="Buffer"&&Array.isArray(le.data))return R(le.data)}function q(le){if(le>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return le|0}function X(le){return+le!=le&&(le=0),u.alloc(+le)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,$){if(L(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),L($,Uint8Array)&&($=u.from($,$.offset,$.byteLength)),!u.isBuffer(k)||!u.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===$)return 0;let Ee=k.length,Ve=$.length;for(let rt=0,Ge=Math.min(Ee,Ve);rt<Ge;++rt)if(k[rt]!==$[rt]){Ee=k[rt],Ve=$[rt];break}return Ee<Ve?-1:Ve<Ee?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,$){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let Ee;if($===void 0)for($=0,Ee=0;Ee<k.length;++Ee)$+=k[Ee].length;const Ve=u.allocUnsafe($);let rt=0;for(Ee=0;Ee<k.length;++Ee){let Ge=k[Ee];if(L(Ge,Uint8Array))rt+Ge.length>Ve.length?(u.isBuffer(Ge)||(Ge=u.from(Ge)),Ge.copy(Ve,rt)):Uint8Array.prototype.set.call(Ve,Ge,rt);else if(u.isBuffer(Ge))Ge.copy(Ve,rt);else throw new TypeError('"list" argument must be an Array of Buffers');rt+=Ge.length}return Ve};function G(le,k){if(u.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||L(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const $=le.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&$===0)return 0;let Ve=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return _n(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $*2;case"hex":return $>>>1;case"base64":return Se(le).length;default:if(Ve)return Ee?-1:_n(le).length;k=(""+k).toLowerCase(),Ve=!0}}u.byteLength=G;function ae(le,k,$){let Ee=!1;if((k===void 0||k<0)&&(k=0),k>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0,k>>>=0,$<=k))return"";for(le||(le="utf8");;)switch(le){case"hex":return de(this,k,$);case"utf8":case"utf-8":return pe(this,k,$);case"ascii":return Y(this,k,$);case"latin1":case"binary":return ne(this,k,$);case"base64":return _e(this,k,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,k,$);default:if(Ee)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Ee=!0}}u.prototype._isBuffer=!0;function K(le,k,$){const Ee=le[k];le[k]=le[$],le[$]=Ee}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let $=0;$<k;$+=2)K(this,$,$+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let $=0;$<k;$+=4)K(this,$,$+3),K(this,$+1,$+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let $=0;$<k;$+=8)K(this,$,$+7),K(this,$+1,$+6),K(this,$+2,$+5),K(this,$+3,$+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?pe(this,0,k):ae.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const $=e.INSPECT_MAX_BYTES;return k=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(k+=" ... "),"<Buffer "+k+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(k,$,Ee,Ve,rt){if(L(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if($===void 0&&($=0),Ee===void 0&&(Ee=k?k.length:0),Ve===void 0&&(Ve=0),rt===void 0&&(rt=this.length),$<0||Ee>k.length||Ve<0||rt>this.length)throw new RangeError("out of range index");if(Ve>=rt&&$>=Ee)return 0;if(Ve>=rt)return-1;if($>=Ee)return 1;if($>>>=0,Ee>>>=0,Ve>>>=0,rt>>>=0,this===k)return 0;let Ge=rt-Ve,Et=Ee-$;const It=Math.min(Ge,Et),yn=this.slice(Ve,rt),Sn=k.slice($,Ee);for(let Rt=0;Rt<It;++Rt)if(yn[Rt]!==Sn[Rt]){Ge=yn[Rt],Et=Sn[Rt];break}return Ge<Et?-1:Et<Ge?1:0};function W(le,k,$,Ee,Ve){if(le.length===0)return-1;if(typeof $=="string"?(Ee=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),$=+$,ye($)&&($=Ve?0:le.length-1),$<0&&($=le.length+$),$>=le.length){if(Ve)return-1;$=le.length-1}else if($<0)if(Ve)$=0;else return-1;if(typeof k=="string"&&(k=u.from(k,Ee)),u.isBuffer(k))return k.length===0?-1:E(le,k,$,Ee,Ve);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(le,k,$):Uint8Array.prototype.lastIndexOf.call(le,k,$):E(le,[k],$,Ee,Ve);throw new TypeError("val must be string, number or Buffer")}function E(le,k,$,Ee,Ve){let rt=1,Ge=le.length,Et=k.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(le.length<2||k.length<2)return-1;rt=2,Ge/=2,Et/=2,$/=2}function It(Sn,Rt){return rt===1?Sn[Rt]:Sn.readUInt16BE(Rt*rt)}let yn;if(Ve){let Sn=-1;for(yn=$;yn<Ge;yn++)if(It(le,yn)===It(k,Sn===-1?0:yn-Sn)){if(Sn===-1&&(Sn=yn),yn-Sn+1===Et)return Sn*rt}else Sn!==-1&&(yn-=yn-Sn),Sn=-1}else for($+Et>Ge&&($=Ge-Et),yn=$;yn>=0;yn--){let Sn=!0;for(let Rt=0;Rt<Et;Rt++)if(It(le,yn+Rt)!==It(k,Rt)){Sn=!1;break}if(Sn)return yn}return-1}u.prototype.includes=function(k,$,Ee){return this.indexOf(k,$,Ee)!==-1},u.prototype.indexOf=function(k,$,Ee){return W(this,k,$,Ee,!0)},u.prototype.lastIndexOf=function(k,$,Ee){return W(this,k,$,Ee,!1)};function O(le,k,$,Ee){$=Number($)||0;const Ve=le.length-$;Ee?(Ee=Number(Ee),Ee>Ve&&(Ee=Ve)):Ee=Ve;const rt=k.length;Ee>rt/2&&(Ee=rt/2);let Ge;for(Ge=0;Ge<Ee;++Ge){const Et=parseInt(k.substr(Ge*2,2),16);if(ye(Et))return Ge;le[$+Ge]=Et}return Ge}function D(le,k,$,Ee){return N(_n(k,le.length-$),le,$,Ee)}function ee(le,k,$,Ee){return N(un(k),le,$,Ee)}function H(le,k,$,Ee){return N(Se(k),le,$,Ee)}function ve(le,k,$,Ee){return N(Vt(k,le.length-$),le,$,Ee)}u.prototype.write=function(k,$,Ee,Ve){if($===void 0)Ve="utf8",Ee=this.length,$=0;else if(Ee===void 0&&typeof $=="string")Ve=$,Ee=this.length,$=0;else if(isFinite($))$=$>>>0,isFinite(Ee)?(Ee=Ee>>>0,Ve===void 0&&(Ve="utf8")):(Ve=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const rt=this.length-$;if((Ee===void 0||Ee>rt)&&(Ee=rt),k.length>0&&(Ee<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");let Ge=!1;for(;;)switch(Ve){case"hex":return O(this,k,$,Ee);case"utf8":case"utf-8":return D(this,k,$,Ee);case"ascii":case"latin1":case"binary":return ee(this,k,$,Ee);case"base64":return H(this,k,$,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,k,$,Ee);default:if(Ge)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),Ge=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(le,k,$){return k===0&&$===le.length?t.fromByteArray(le):t.fromByteArray(le.slice(k,$))}function pe(le,k,$){$=Math.min(le.length,$);const Ee=[];let Ve=k;for(;Ve<$;){const rt=le[Ve];let Ge=null,Et=rt>239?4:rt>223?3:rt>191?2:1;if(Ve+Et<=$){let It,yn,Sn,Rt;switch(Et){case 1:rt<128&&(Ge=rt);break;case 2:It=le[Ve+1],(It&192)===128&&(Rt=(rt&31)<<6|It&63,Rt>127&&(Ge=Rt));break;case 3:It=le[Ve+1],yn=le[Ve+2],(It&192)===128&&(yn&192)===128&&(Rt=(rt&15)<<12|(It&63)<<6|yn&63,Rt>2047&&(Rt<55296||Rt>57343)&&(Ge=Rt));break;case 4:It=le[Ve+1],yn=le[Ve+2],Sn=le[Ve+3],(It&192)===128&&(yn&192)===128&&(Sn&192)===128&&(Rt=(rt&15)<<18|(It&63)<<12|(yn&63)<<6|Sn&63,Rt>65535&&Rt<1114112&&(Ge=Rt))}}Ge===null?(Ge=65533,Et=1):Ge>65535&&(Ge-=65536,Ee.push(Ge>>>10&1023|55296),Ge=56320|Ge&1023),Ee.push(Ge),Ve+=Et}return ce(Ee)}const oe=4096;function ce(le){const k=le.length;if(k<=oe)return String.fromCharCode.apply(String,le);let $="",Ee=0;for(;Ee<k;)$+=String.fromCharCode.apply(String,le.slice(Ee,Ee+=oe));return $}function Y(le,k,$){let Ee="";$=Math.min(le.length,$);for(let Ve=k;Ve<$;++Ve)Ee+=String.fromCharCode(le[Ve]&127);return Ee}function ne(le,k,$){let Ee="";$=Math.min(le.length,$);for(let Ve=k;Ve<$;++Ve)Ee+=String.fromCharCode(le[Ve]);return Ee}function de(le,k,$){const Ee=le.length;(!k||k<0)&&(k=0),(!$||$<0||$>Ee)&&($=Ee);let Ve="";for(let rt=k;rt<$;++rt)Ve+=Xe[le[rt]];return Ve}function be(le,k,$){const Ee=le.slice(k,$);let Ve="";for(let rt=0;rt<Ee.length-1;rt+=2)Ve+=String.fromCharCode(Ee[rt]+Ee[rt+1]*256);return Ve}u.prototype.slice=function(k,$){const Ee=this.length;k=~~k,$=$===void 0?Ee:~~$,k<0?(k+=Ee,k<0&&(k=0)):k>Ee&&(k=Ee),$<0?($+=Ee,$<0&&($=0)):$>Ee&&($=Ee),$<k&&($=k);const Ve=this.subarray(k,$);return Object.setPrototypeOf(Ve,u.prototype),Ve};function Ce(le,k,$){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+k>$)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,$,Ee){k=k>>>0,$=$>>>0,Ee||Ce(k,$,this.length);let Ve=this[k],rt=1,Ge=0;for(;++Ge<$&&(rt*=256);)Ve+=this[k+Ge]*rt;return Ve},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,$,Ee){k=k>>>0,$=$>>>0,Ee||Ce(k,$,this.length);let Ve=this[k+--$],rt=1;for(;$>0&&(rt*=256);)Ve+=this[k+--$]*rt;return Ve},u.prototype.readUint8=u.prototype.readUInt8=function(k,$){return k=k>>>0,$||Ce(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,$){return k=k>>>0,$||Ce(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,$){return k=k>>>0,$||Ce(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,$){return k=k>>>0,$||Ce(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,$){return k=k>>>0,$||Ce(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=tt(function(k){k=k>>>0,Zt(k,"offset");const $=this[k],Ee=this[k+7];($===void 0||Ee===void 0)&&Wt(k,this.length-8);const Ve=$+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,rt=this[++k]+this[++k]*2**8+this[++k]*2**16+Ee*2**24;return BigInt(Ve)+(BigInt(rt)<<BigInt(32))}),u.prototype.readBigUInt64BE=tt(function(k){k=k>>>0,Zt(k,"offset");const $=this[k],Ee=this[k+7];($===void 0||Ee===void 0)&&Wt(k,this.length-8);const Ve=$*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],rt=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Ee;return(BigInt(Ve)<<BigInt(32))+BigInt(rt)}),u.prototype.readIntLE=function(k,$,Ee){k=k>>>0,$=$>>>0,Ee||Ce(k,$,this.length);let Ve=this[k],rt=1,Ge=0;for(;++Ge<$&&(rt*=256);)Ve+=this[k+Ge]*rt;return rt*=128,Ve>=rt&&(Ve-=Math.pow(2,8*$)),Ve},u.prototype.readIntBE=function(k,$,Ee){k=k>>>0,$=$>>>0,Ee||Ce(k,$,this.length);let Ve=$,rt=1,Ge=this[k+--Ve];for(;Ve>0&&(rt*=256);)Ge+=this[k+--Ve]*rt;return rt*=128,Ge>=rt&&(Ge-=Math.pow(2,8*$)),Ge},u.prototype.readInt8=function(k,$){return k=k>>>0,$||Ce(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,$){k=k>>>0,$||Ce(k,2,this.length);const Ee=this[k]|this[k+1]<<8;return Ee&32768?Ee|4294901760:Ee},u.prototype.readInt16BE=function(k,$){k=k>>>0,$||Ce(k,2,this.length);const Ee=this[k+1]|this[k]<<8;return Ee&32768?Ee|4294901760:Ee},u.prototype.readInt32LE=function(k,$){return k=k>>>0,$||Ce(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,$){return k=k>>>0,$||Ce(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=tt(function(k){k=k>>>0,Zt(k,"offset");const $=this[k],Ee=this[k+7];($===void 0||Ee===void 0)&&Wt(k,this.length-8);const Ve=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(Ee<<24);return(BigInt(Ve)<<BigInt(32))+BigInt($+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=tt(function(k){k=k>>>0,Zt(k,"offset");const $=this[k],Ee=this[k+7];($===void 0||Ee===void 0)&&Wt(k,this.length-8);const Ve=($<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(Ve)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Ee)}),u.prototype.readFloatLE=function(k,$){return k=k>>>0,$||Ce(k,4,this.length),i.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,$){return k=k>>>0,$||Ce(k,4,this.length),i.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,$){return k=k>>>0,$||Ce(k,8,this.length),i.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,$){return k=k>>>0,$||Ce(k,8,this.length),i.read(this,k,!1,52,8)};function Ue(le,k,$,Ee,Ve,rt){if(!u.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>Ve||k<rt)throw new RangeError('"value" argument is out of bounds');if($+Ee>le.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,$,Ee,Ve){if(k=+k,$=$>>>0,Ee=Ee>>>0,!Ve){const Et=Math.pow(2,8*Ee)-1;Ue(this,k,$,Ee,Et,0)}let rt=1,Ge=0;for(this[$]=k&255;++Ge<Ee&&(rt*=256);)this[$+Ge]=k/rt&255;return $+Ee},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,$,Ee,Ve){if(k=+k,$=$>>>0,Ee=Ee>>>0,!Ve){const Et=Math.pow(2,8*Ee)-1;Ue(this,k,$,Ee,Et,0)}let rt=Ee-1,Ge=1;for(this[$+rt]=k&255;--rt>=0&&(Ge*=256);)this[$+rt]=k/Ge&255;return $+Ee},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,1,255,0),this[$]=k&255,$+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,2,65535,0),this[$]=k&255,this[$+1]=k>>>8,$+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,2,65535,0),this[$]=k>>>8,this[$+1]=k&255,$+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,4,4294967295,0),this[$+3]=k>>>24,this[$+2]=k>>>16,this[$+1]=k>>>8,this[$]=k&255,$+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,4,4294967295,0),this[$]=k>>>24,this[$+1]=k>>>16,this[$+2]=k>>>8,this[$+3]=k&255,$+4};function Ae(le,k,$,Ee,Ve){xt(k,Ee,Ve,le,$,7);let rt=Number(k&BigInt(4294967295));le[$++]=rt,rt=rt>>8,le[$++]=rt,rt=rt>>8,le[$++]=rt,rt=rt>>8,le[$++]=rt;let Ge=Number(k>>BigInt(32)&BigInt(4294967295));return le[$++]=Ge,Ge=Ge>>8,le[$++]=Ge,Ge=Ge>>8,le[$++]=Ge,Ge=Ge>>8,le[$++]=Ge,$}function Fe(le,k,$,Ee,Ve){xt(k,Ee,Ve,le,$,7);let rt=Number(k&BigInt(4294967295));le[$+7]=rt,rt=rt>>8,le[$+6]=rt,rt=rt>>8,le[$+5]=rt,rt=rt>>8,le[$+4]=rt;let Ge=Number(k>>BigInt(32)&BigInt(4294967295));return le[$+3]=Ge,Ge=Ge>>8,le[$+2]=Ge,Ge=Ge>>8,le[$+1]=Ge,Ge=Ge>>8,le[$]=Ge,$+8}u.prototype.writeBigUInt64LE=tt(function(k,$=0){return Ae(this,k,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=tt(function(k,$=0){return Fe(this,k,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,$,Ee,Ve){if(k=+k,$=$>>>0,!Ve){const It=Math.pow(2,8*Ee-1);Ue(this,k,$,Ee,It-1,-It)}let rt=0,Ge=1,Et=0;for(this[$]=k&255;++rt<Ee&&(Ge*=256);)k<0&&Et===0&&this[$+rt-1]!==0&&(Et=1),this[$+rt]=(k/Ge>>0)-Et&255;return $+Ee},u.prototype.writeIntBE=function(k,$,Ee,Ve){if(k=+k,$=$>>>0,!Ve){const It=Math.pow(2,8*Ee-1);Ue(this,k,$,Ee,It-1,-It)}let rt=Ee-1,Ge=1,Et=0;for(this[$+rt]=k&255;--rt>=0&&(Ge*=256);)k<0&&Et===0&&this[$+rt+1]!==0&&(Et=1),this[$+rt]=(k/Ge>>0)-Et&255;return $+Ee},u.prototype.writeInt8=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,1,127,-128),k<0&&(k=255+k+1),this[$]=k&255,$+1},u.prototype.writeInt16LE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,2,32767,-32768),this[$]=k&255,this[$+1]=k>>>8,$+2},u.prototype.writeInt16BE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,2,32767,-32768),this[$]=k>>>8,this[$+1]=k&255,$+2},u.prototype.writeInt32LE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,4,2147483647,-2147483648),this[$]=k&255,this[$+1]=k>>>8,this[$+2]=k>>>16,this[$+3]=k>>>24,$+4},u.prototype.writeInt32BE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ue(this,k,$,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[$]=k>>>24,this[$+1]=k>>>16,this[$+2]=k>>>8,this[$+3]=k&255,$+4},u.prototype.writeBigInt64LE=tt(function(k,$=0){return Ae(this,k,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=tt(function(k,$=0){return Fe(this,k,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function We(le,k,$,Ee,Ve,rt){if($+Ee>le.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function Ze(le,k,$,Ee,Ve){return k=+k,$=$>>>0,Ve||We(le,k,$,4),i.write(le,k,$,Ee,23,4),$+4}u.prototype.writeFloatLE=function(k,$,Ee){return Ze(this,k,$,!0,Ee)},u.prototype.writeFloatBE=function(k,$,Ee){return Ze(this,k,$,!1,Ee)};function it(le,k,$,Ee,Ve){return k=+k,$=$>>>0,Ve||We(le,k,$,8),i.write(le,k,$,Ee,52,8),$+8}u.prototype.writeDoubleLE=function(k,$,Ee){return it(this,k,$,!0,Ee)},u.prototype.writeDoubleBE=function(k,$,Ee){return it(this,k,$,!1,Ee)},u.prototype.copy=function(k,$,Ee,Ve){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Ve&&Ve!==0&&(Ve=this.length),$>=k.length&&($=k.length),$||($=0),Ve>0&&Ve<Ee&&(Ve=Ee),Ve===Ee||k.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),k.length-$<Ve-Ee&&(Ve=k.length-$+Ee);const rt=Ve-Ee;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin($,Ee,Ve):Uint8Array.prototype.set.call(k,this.subarray(Ee,Ve),$),rt},u.prototype.fill=function(k,$,Ee,Ve){if(typeof k=="string"){if(typeof $=="string"?(Ve=$,$=0,Ee=this.length):typeof Ee=="string"&&(Ve=Ee,Ee=this.length),Ve!==void 0&&typeof Ve!="string")throw new TypeError("encoding must be a string");if(typeof Ve=="string"&&!u.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);if(k.length===1){const Ge=k.charCodeAt(0);(Ve==="utf8"&&Ge<128||Ve==="latin1")&&(k=Ge)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if($<0||this.length<$||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=$)return this;$=$>>>0,Ee=Ee===void 0?this.length:Ee>>>0,k||(k=0);let rt;if(typeof k=="number")for(rt=$;rt<Ee;++rt)this[rt]=k;else{const Ge=u.isBuffer(k)?k:u.from(k,Ve),Et=Ge.length;if(Et===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(rt=0;rt<Ee-$;++rt)this[rt+$]=Ge[rt%Et]}return this};const ct={};function vt(le,k,$){ct[le]=class extends ${constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ve,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(le,k){return`The "${le}" argument must be of type number. Received type ${typeof k}`},TypeError),vt("ERR_OUT_OF_RANGE",function(le,k,$){let Ee=`The value of "${le}" is out of range.`,Ve=$;return Number.isInteger($)&&Math.abs($)>2**32?Ve=Mt(String($)):typeof $=="bigint"&&(Ve=String($),($>BigInt(2)**BigInt(32)||$<-(BigInt(2)**BigInt(32)))&&(Ve=Mt(Ve)),Ve+="n"),Ee+=` It must be ${k}. Received ${Ve}`,Ee},RangeError);function Mt(le){let k="",$=le.length;const Ee=le[0]==="-"?1:0;for(;$>=Ee+4;$-=3)k=`_${le.slice($-3,$)}${k}`;return`${le.slice(0,$)}${k}`}function pt(le,k,$){Zt(k,"offset"),(le[k]===void 0||le[k+$]===void 0)&&Wt(k,le.length-($+1))}function xt(le,k,$,Ee,Ve,rt){if(le>$||le<k){const Ge=typeof k=="bigint"?"n":"";let Et;throw rt>3?k===0||k===BigInt(0)?Et=`>= 0${Ge} and < 2${Ge} ** ${(rt+1)*8}${Ge}`:Et=`>= -(2${Ge} ** ${(rt+1)*8-1}${Ge}) and < 2 ** ${(rt+1)*8-1}${Ge}`:Et=`>= ${k}${Ge} and <= ${$}${Ge}`,new ct.ERR_OUT_OF_RANGE("value",Et,le)}pt(Ee,Ve,rt)}function Zt(le,k){if(typeof le!="number")throw new ct.ERR_INVALID_ARG_TYPE(k,"number",le)}function Wt(le,k,$){throw Math.floor(le)!==le?(Zt(le,$),new ct.ERR_OUT_OF_RANGE($||"offset","an integer",le)):k<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE($||"offset",`>= ${$?1:0} and <= ${k}`,le)}const ln=/[^+/0-9A-Za-z-_]/g;function et(le){if(le=le.split("=")[0],le=le.trim().replace(ln,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function _n(le,k){k=k||1/0;let $;const Ee=le.length;let Ve=null;const rt=[];for(let Ge=0;Ge<Ee;++Ge){if($=le.charCodeAt(Ge),$>55295&&$<57344){if(!Ve){if($>56319){(k-=3)>-1&&rt.push(239,191,189);continue}else if(Ge+1===Ee){(k-=3)>-1&&rt.push(239,191,189);continue}Ve=$;continue}if($<56320){(k-=3)>-1&&rt.push(239,191,189),Ve=$;continue}$=(Ve-55296<<10|$-56320)+65536}else Ve&&(k-=3)>-1&&rt.push(239,191,189);if(Ve=null,$<128){if((k-=1)<0)break;rt.push($)}else if($<2048){if((k-=2)<0)break;rt.push($>>6|192,$&63|128)}else if($<65536){if((k-=3)<0)break;rt.push($>>12|224,$>>6&63|128,$&63|128)}else if($<1114112){if((k-=4)<0)break;rt.push($>>18|240,$>>12&63|128,$>>6&63|128,$&63|128)}else throw new Error("Invalid code point")}return rt}function un(le){const k=[];for(let $=0;$<le.length;++$)k.push(le.charCodeAt($)&255);return k}function Vt(le,k){let $,Ee,Ve;const rt=[];for(let Ge=0;Ge<le.length&&!((k-=2)<0);++Ge)$=le.charCodeAt(Ge),Ee=$>>8,Ve=$%256,rt.push(Ve),rt.push(Ee);return rt}function Se(le){return t.toByteArray(et(le))}function N(le,k,$,Ee){let Ve;for(Ve=0;Ve<Ee&&!(Ve+$>=k.length||Ve>=le.length);++Ve)k[Ve+$]=le[Ve];return Ve}function L(le,k){return le instanceof k||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===k.name}function ye(le){return le!==le}const Xe=function(){const le="0123456789abcdef",k=new Array(256);for(let $=0;$<16;++$){const Ee=$*16;for(let Ve=0;Ve<16;++Ve)k[Ee+Ve]=le[$]+le[Ve]}return k}();function tt(le){return typeof BigInt>"u"?ht:le}function ht(){throw new Error("BigInt not supported")}})(VI);window.Buffer=VI.Buffer;u4.render(gt.jsx(u1.StrictMode,{children:gt.jsx(z5,{})}),document.getElementById("root"));

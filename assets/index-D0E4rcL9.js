function XF(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=i(c);fetch(c.href,f)}})();var Ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var vI={exports:{}},a0={},_I={exports:{}},zr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up=Symbol.for("react.element"),qF=Symbol.for("react.portal"),KF=Symbol.for("react.fragment"),JF=Symbol.for("react.strict_mode"),YF=Symbol.for("react.profiler"),QF=Symbol.for("react.provider"),eR=Symbol.for("react.context"),tR=Symbol.for("react.forward_ref"),rR=Symbol.for("react.suspense"),nR=Symbol.for("react.memo"),iR=Symbol.for("react.lazy"),tE=Symbol.iterator;function oR(e){return e===null||typeof e!="object"?null:(e=tE&&e[tE]||e["@@iterator"],typeof e=="function"?e:null)}var xI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wI=Object.assign,bI={};function _f(e,t,i){this.props=e,this.context=t,this.refs=bI,this.updater=i||xI}_f.prototype.isReactComponent={};_f.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function SI(){}SI.prototype=_f.prototype;function mw(e,t,i){this.props=e,this.context=t,this.refs=bI,this.updater=i||xI}var gw=mw.prototype=new SI;gw.constructor=mw;wI(gw,_f.prototype);gw.isPureReactComponent=!0;var rE=Array.isArray,EI=Object.prototype.hasOwnProperty,yw={current:null},TI={key:!0,ref:!0,__self:!0,__source:!0};function PI(e,t,i){var a,c={},f=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(f=""+t.key),t)EI.call(t,a)&&!TI.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=i;else if(1<l){for(var w=Array(l),E=0;E<l;E++)w[E]=arguments[E+2];c.children=w}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:Up,type:e,key:f,ref:d,props:c,_owner:yw.current}}function sR(e,t){return{$$typeof:Up,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Up}function aR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var nE=/\/+/g;function jv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aR(""+e.key):t.toString(36)}function yg(e,t,i,a,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(f){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Up:case qF:d=!0}}if(d)return d=e,c=c(d),e=a===""?"."+jv(d,0):a,rE(c)?(i="",e!=null&&(i=e.replace(nE,"$&/")+"/"),yg(c,t,i,"",function(E){return E})):c!=null&&(vw(c)&&(c=sR(c,i+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(nE,"$&/")+"/")+e)),t.push(c)),1;if(d=0,a=a===""?".":a+":",rE(e))for(var l=0;l<e.length;l++){f=e[l];var w=a+jv(f,l);d+=yg(f,t,i,w,c)}else if(w=oR(e),typeof w=="function")for(e=w.call(e),l=0;!(f=e.next()).done;)f=f.value,w=a+jv(f,l++),d+=yg(f,t,i,w,c);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Dm(e,t,i){if(e==null)return e;var a=[],c=0;return yg(e,a,"","",function(f){return t.call(i,f,c++)}),a}function lR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var so={current:null},vg={transition:null},uR={ReactCurrentDispatcher:so,ReactCurrentBatchConfig:vg,ReactCurrentOwner:yw};zr.Children={map:Dm,forEach:function(e,t,i){Dm(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Dm(e,function(){t++}),t},toArray:function(e){return Dm(e,function(t){return t})||[]},only:function(e){if(!vw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};zr.Component=_f;zr.Fragment=KF;zr.Profiler=YF;zr.PureComponent=mw;zr.StrictMode=JF;zr.Suspense=rR;zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uR;zr.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=wI({},e.props),c=e.key,f=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,d=yw.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(w in t)EI.call(t,w)&&!TI.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&l!==void 0?l[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=i;else if(1<w){l=Array(w);for(var E=0;E<w;E++)l[E]=arguments[E+2];a.children=l}return{$$typeof:Up,type:e.type,key:c,ref:f,props:a,_owner:d}};zr.createContext=function(e){return e={$$typeof:eR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QF,_context:e},e.Consumer=e};zr.createElement=PI;zr.createFactory=function(e){var t=PI.bind(null,e);return t.type=e,t};zr.createRef=function(){return{current:null}};zr.forwardRef=function(e){return{$$typeof:tR,render:e}};zr.isValidElement=vw;zr.lazy=function(e){return{$$typeof:iR,_payload:{_status:-1,_result:e},_init:lR}};zr.memo=function(e,t){return{$$typeof:nR,type:e,compare:t===void 0?null:t}};zr.startTransition=function(e){var t=vg.transition;vg.transition={};try{e()}finally{vg.transition=t}};zr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};zr.useCallback=function(e,t){return so.current.useCallback(e,t)};zr.useContext=function(e){return so.current.useContext(e)};zr.useDebugValue=function(){};zr.useDeferredValue=function(e){return so.current.useDeferredValue(e)};zr.useEffect=function(e,t){return so.current.useEffect(e,t)};zr.useId=function(){return so.current.useId()};zr.useImperativeHandle=function(e,t,i){return so.current.useImperativeHandle(e,t,i)};zr.useInsertionEffect=function(e,t){return so.current.useInsertionEffect(e,t)};zr.useLayoutEffect=function(e,t){return so.current.useLayoutEffect(e,t)};zr.useMemo=function(e,t){return so.current.useMemo(e,t)};zr.useReducer=function(e,t,i){return so.current.useReducer(e,t,i)};zr.useRef=function(e){return so.current.useRef(e)};zr.useState=function(e){return so.current.useState(e)};zr.useSyncExternalStore=function(e,t,i){return so.current.useSyncExternalStore(e,t,i)};zr.useTransition=function(){return so.current.useTransition()};zr.version="18.2.0";_I.exports=zr;var yt=_I.exports;const _w=vf(yt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cR=yt,hR=Symbol.for("react.element"),fR=Symbol.for("react.fragment"),dR=Object.prototype.hasOwnProperty,pR=cR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mR={key:!0,ref:!0,__self:!0,__source:!0};function AI(e,t,i){var a,c={},f=null,d=null;i!==void 0&&(f=""+i),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)dR.call(t,a)&&!mR.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:hR,type:e,key:f,ref:d,props:c,_owner:pR.current}}a0.Fragment=fR;a0.jsx=AI;a0.jsxs=AI;vI.exports=a0;var gt=vI.exports,II={exports:{}},qo={},CI={exports:{}},MI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,de){var be=re.length;re.push(de);e:for(;0<be;){var Pe=be-1>>>1,$e=re[Pe];if(0<c($e,de))re[Pe]=de,re[be]=$e,be=Pe;else break e}}function i(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var de=re[0],be=re.pop();if(be!==de){re[0]=be;e:for(var Pe=0,$e=re.length,Ce=$e>>>1;Pe<Ce;){var Fe=2*(Pe+1)-1,He=re[Fe],We=Fe+1,it=re[We];if(0>c(He,be))We<$e&&0>c(it,He)?(re[Pe]=it,re[We]=be,Pe=We):(re[Pe]=He,re[Fe]=be,Pe=Fe);else if(We<$e&&0>c(it,be))re[Pe]=it,re[We]=be,Pe=We;else break e}}return de}function c(re,de){var be=re.sortIndex-de.sortIndex;return be!==0?be:re.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var d=Date,l=d.now();e.unstable_now=function(){return d.now()-l}}var w=[],E=[],C=1,b=null,T=3,R=!1,L=!1,j=!1,le=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(re){for(var de=i(E);de!==null;){if(de.callback===null)a(E);else if(de.startTime<=re)a(E),de.sortIndex=de.expirationTime,t(w,de);else break;de=i(E)}}function se(re){if(j=!1,G(re),!L)if(i(w)!==null)L=!0,he(q);else{var de=i(E);de!==null&&Y(se,de.startTime-re)}}function q(re,de){L=!1,j&&(j=!1,K(z),z=-1),R=!0;var be=T;try{for(G(de),b=i(w);b!==null&&(!(b.expirationTime>de)||re&&!X());){var Pe=b.callback;if(typeof Pe=="function"){b.callback=null,T=b.priorityLevel;var $e=Pe(b.expirationTime<=de);de=e.unstable_now(),typeof $e=="function"?b.callback=$e:b===i(w)&&a(w),G(de)}else a(w);b=i(w)}if(b!==null)var Ce=!0;else{var Fe=i(E);Fe!==null&&Y(se,Fe.startTime-de),Ce=!1}return Ce}finally{b=null,T=be,R=!1}}var W=!1,P=null,z=-1,D=5,ee=-1;function X(){return!(e.unstable_now()-ee<D)}function ye(){if(P!==null){var re=e.unstable_now();ee=re;var de=!0;try{de=P(!0,re)}finally{de?ge():(W=!1,P=null)}}else W=!1}var ge;if(typeof Z=="function")ge=function(){Z(ye)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ie=fe.port2;fe.port1.onmessage=ye,ge=function(){ie.postMessage(null)}}else ge=function(){le(ye,0)};function he(re){P=re,W||(W=!0,ge())}function Y(re,de){z=le(function(){re(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){L||R||(L=!0,he(q))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return i(w)},e.unstable_next=function(re){switch(T){case 1:case 2:case 3:var de=3;break;default:de=T}var be=T;T=de;try{return re()}finally{T=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,de){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var be=T;T=re;try{return de()}finally{T=be}},e.unstable_scheduleCallback=function(re,de,be){var Pe=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Pe+be:Pe):be=Pe,re){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=be+$e,re={id:C++,callback:de,priorityLevel:re,startTime:be,expirationTime:$e,sortIndex:-1},be>Pe?(re.sortIndex=be,t(E,re),i(w)===null&&re===i(E)&&(j?(K(z),z=-1):j=!0,Y(se,be-Pe))):(re.sortIndex=$e,t(w,re),L||R||(L=!0,he(q))),re},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(re){var de=T;return function(){var be=T;T=de;try{return re.apply(this,arguments)}finally{T=be}}}})(MI);CI.exports=MI;var gR=CI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI=yt,Xo=gR;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OI=new Set,yp={};function Pc(e,t){Qh(e,t),Qh(e+"Capture",t)}function Qh(e,t){for(yp[e]=t,e=0;e<t.length;e++)OI.add(t[e])}var cl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a1=Object.prototype.hasOwnProperty,yR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iE={},oE={};function vR(e){return a1.call(oE,e)?!0:a1.call(iE,e)?!1:yR.test(e)?oE[e]=!0:(iE[e]=!0,!1)}function _R(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xR(e,t,i,a){if(t===null||typeof t>"u"||_R(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ao(e,t,i,a,c,f,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=d}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mi[e]=new ao(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mi[t]=new ao(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mi[e]=new ao(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mi[e]=new ao(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mi[e]=new ao(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mi[e]=new ao(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mi[e]=new ao(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mi[e]=new ao(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mi[e]=new ao(e,5,!1,e.toLowerCase(),null,!1,!1)});var xw=/[\-:]([a-z])/g;function ww(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xw,ww);Mi[t]=new ao(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xw,ww);Mi[t]=new ao(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xw,ww);Mi[t]=new ao(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mi[e]=new ao(e,1,!1,e.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new ao("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mi[e]=new ao(e,1,!1,e.toLowerCase(),null,!0,!0)});function bw(e,t,i,a){var c=Mi.hasOwnProperty(t)?Mi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xR(t,i,c,a)&&(i=null),a||c===null?vR(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var yl=kI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nm=Symbol.for("react.element"),Ph=Symbol.for("react.portal"),Ah=Symbol.for("react.fragment"),Sw=Symbol.for("react.strict_mode"),l1=Symbol.for("react.profiler"),FI=Symbol.for("react.provider"),RI=Symbol.for("react.context"),Ew=Symbol.for("react.forward_ref"),u1=Symbol.for("react.suspense"),c1=Symbol.for("react.suspense_list"),Tw=Symbol.for("react.memo"),eu=Symbol.for("react.lazy"),jI=Symbol.for("react.offscreen"),sE=Symbol.iterator;function Pd(e){return e===null||typeof e!="object"?null:(e=sE&&e[sE]||e["@@iterator"],typeof e=="function"?e:null)}var Fn=Object.assign,zv;function Bd(e){if(zv===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);zv=t&&t[1]||""}return`
`+zv+e}var Lv=!1;function Bv(e,t){if(!e||Lv)return"";Lv=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var a=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){a=E}e.call(t.prototype)}else{try{throw Error()}catch(E){a=E}e()}}catch(E){if(E&&a&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),f=a.stack.split(`
`),d=c.length-1,l=f.length-1;1<=d&&0<=l&&c[d]!==f[l];)l--;for(;1<=d&&0<=l;d--,l--)if(c[d]!==f[l]){if(d!==1||l!==1)do if(d--,l--,0>l||c[d]!==f[l]){var w=`
`+c[d].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=d&&0<=l);break}}}finally{Lv=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Bd(e):""}function wR(e){switch(e.tag){case 5:return Bd(e.type);case 16:return Bd("Lazy");case 13:return Bd("Suspense");case 19:return Bd("SuspenseList");case 0:case 2:case 15:return e=Bv(e.type,!1),e;case 11:return e=Bv(e.type.render,!1),e;case 1:return e=Bv(e.type,!0),e;default:return""}}function h1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ah:return"Fragment";case Ph:return"Portal";case l1:return"Profiler";case Sw:return"StrictMode";case u1:return"Suspense";case c1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case RI:return(e.displayName||"Context")+".Consumer";case FI:return(e._context.displayName||"Context")+".Provider";case Ew:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tw:return t=e.displayName||null,t!==null?t:h1(e.type)||"Memo";case eu:t=e._payload,e=e._init;try{return h1(e(t))}catch{}}return null}function bR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return h1(t);case 8:return t===Sw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _u(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SR(e){var t=zI(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(d){a=""+d,f.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $m(e){e._valueTracker||(e._valueTracker=SR(e))}function LI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=zI(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Zg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function f1(e,t){var i=t.checked;return Fn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function aE(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=_u(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function BI(e,t){t=t.checked,t!=null&&bw(e,"checked",t,!1)}function d1(e,t){BI(e,t);var i=_u(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?p1(e,t.type,i):t.hasOwnProperty("defaultValue")&&p1(e,t.type,_u(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lE(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function p1(e,t,i){(t!=="number"||Zg(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Dd=Array.isArray;function Vh(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+_u(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function m1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Fn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uE(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(Dd(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:_u(i)}}function DI(e,t){var i=_u(t.value),a=_u(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function cE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function NI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function g1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?NI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Um,$I=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Um=Um||document.createElement("div"),Um.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Um.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vp(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Yd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ER=["Webkit","ms","Moz","O"];Object.keys(Yd).forEach(function(e){ER.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yd[t]=Yd[e]})});function UI(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Yd.hasOwnProperty(e)&&Yd[e]?(""+t).trim():t+"px"}function VI(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=UI(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var TR=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function y1(e,t){if(t){if(TR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function v1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _1=null;function Pw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var x1=null,Gh=null,Wh=null;function hE(e){if(e=Wp(e)){if(typeof x1!="function")throw Error(At(280));var t=e.stateNode;t&&(t=f0(t),x1(e.stateNode,e.type,t))}}function GI(e){Gh?Wh?Wh.push(e):Wh=[e]:Gh=e}function WI(){if(Gh){var e=Gh,t=Wh;if(Wh=Gh=null,hE(e),t)for(e=0;e<t.length;e++)hE(t[e])}}function HI(e,t){return e(t)}function ZI(){}var Dv=!1;function XI(e,t,i){if(Dv)return e(t,i);Dv=!0;try{return HI(e,t,i)}finally{Dv=!1,(Gh!==null||Wh!==null)&&(ZI(),WI())}}function _p(e,t){var i=e.stateNode;if(i===null)return null;var a=f0(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var w1=!1;if(cl)try{var Ad={};Object.defineProperty(Ad,"passive",{get:function(){w1=!0}}),window.addEventListener("test",Ad,Ad),window.removeEventListener("test",Ad,Ad)}catch{w1=!1}function PR(e,t,i,a,c,f,d,l,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(i,E)}catch(C){this.onError(C)}}var Qd=!1,Xg=null,qg=!1,b1=null,AR={onError:function(e){Qd=!0,Xg=e}};function IR(e,t,i,a,c,f,d,l,w){Qd=!1,Xg=null,PR.apply(AR,arguments)}function CR(e,t,i,a,c,f,d,l,w){if(IR.apply(this,arguments),Qd){if(Qd){var E=Xg;Qd=!1,Xg=null}else throw Error(At(198));qg||(qg=!0,b1=E)}}function Ac(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function qI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fE(e){if(Ac(e)!==e)throw Error(At(188))}function MR(e){var t=e.alternate;if(!t){if(t=Ac(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===i)return fE(c),e;if(f===a)return fE(c),t;f=f.sibling}throw Error(At(188))}if(i.return!==a.return)i=c,a=f;else{for(var d=!1,l=c.child;l;){if(l===i){d=!0,i=c,a=f;break}if(l===a){d=!0,a=c,i=f;break}l=l.sibling}if(!d){for(l=f.child;l;){if(l===i){d=!0,i=f,a=c;break}if(l===a){d=!0,a=f,i=c;break}l=l.sibling}if(!d)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function KI(e){return e=MR(e),e!==null?JI(e):null}function JI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=JI(e);if(t!==null)return t;e=e.sibling}return null}var YI=Xo.unstable_scheduleCallback,dE=Xo.unstable_cancelCallback,kR=Xo.unstable_shouldYield,OR=Xo.unstable_requestPaint,Un=Xo.unstable_now,FR=Xo.unstable_getCurrentPriorityLevel,Aw=Xo.unstable_ImmediatePriority,QI=Xo.unstable_UserBlockingPriority,Kg=Xo.unstable_NormalPriority,RR=Xo.unstable_LowPriority,eC=Xo.unstable_IdlePriority,l0=null,Ta=null;function jR(e){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(l0,e,void 0,(e.current.flags&128)===128)}catch{}}var Gs=Math.clz32?Math.clz32:BR,zR=Math.log,LR=Math.LN2;function BR(e){return e>>>=0,e===0?32:31-(zR(e)/LR|0)|0}var Vm=64,Gm=4194304;function Nd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Jg(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,d=i&268435455;if(d!==0){var l=d&~c;l!==0?a=Nd(l):(f&=d,f!==0&&(a=Nd(f)))}else d=i&~c,d!==0?a=Nd(d):f!==0&&(a=Nd(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Gs(t),c=1<<i,a|=e[i],t&=~c;return a}function DR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NR(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var d=31-Gs(f),l=1<<d,w=c[d];w===-1?(!(l&i)||l&a)&&(c[d]=DR(l,t)):w<=t&&(e.expiredLanes|=l),f&=~l}}function S1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tC(){var e=Vm;return Vm<<=1,!(Vm&4194240)&&(Vm=64),e}function Nv(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Vp(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Gs(t),e[t]=i}function $R(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Gs(i),f=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~f}}function Iw(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Gs(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var tn=0;function rC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nC,Cw,iC,oC,sC,E1=!1,Wm=[],cu=null,hu=null,fu=null,xp=new Map,wp=new Map,iu=[],UR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pE(e,t){switch(e){case"focusin":case"focusout":cu=null;break;case"dragenter":case"dragleave":hu=null;break;case"mouseover":case"mouseout":fu=null;break;case"pointerover":case"pointerout":xp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wp.delete(t.pointerId)}}function Id(e,t,i,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Wp(t),t!==null&&Cw(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function VR(e,t,i,a,c){switch(t){case"focusin":return cu=Id(cu,e,t,i,a,c),!0;case"dragenter":return hu=Id(hu,e,t,i,a,c),!0;case"mouseover":return fu=Id(fu,e,t,i,a,c),!0;case"pointerover":var f=c.pointerId;return xp.set(f,Id(xp.get(f)||null,e,t,i,a,c)),!0;case"gotpointercapture":return f=c.pointerId,wp.set(f,Id(wp.get(f)||null,e,t,i,a,c)),!0}return!1}function aC(e){var t=lc(e.target);if(t!==null){var i=Ac(t);if(i!==null){if(t=i.tag,t===13){if(t=qI(i),t!==null){e.blockedOn=t,sC(e.priority,function(){iC(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _g(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=T1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);_1=a,i.target.dispatchEvent(a),_1=null}else return t=Wp(i),t!==null&&Cw(t),e.blockedOn=i,!1;t.shift()}return!0}function mE(e,t,i){_g(e)&&i.delete(t)}function GR(){E1=!1,cu!==null&&_g(cu)&&(cu=null),hu!==null&&_g(hu)&&(hu=null),fu!==null&&_g(fu)&&(fu=null),xp.forEach(mE),wp.forEach(mE)}function Cd(e,t){e.blockedOn===t&&(e.blockedOn=null,E1||(E1=!0,Xo.unstable_scheduleCallback(Xo.unstable_NormalPriority,GR)))}function bp(e){function t(c){return Cd(c,e)}if(0<Wm.length){Cd(Wm[0],e);for(var i=1;i<Wm.length;i++){var a=Wm[i];a.blockedOn===e&&(a.blockedOn=null)}}for(cu!==null&&Cd(cu,e),hu!==null&&Cd(hu,e),fu!==null&&Cd(fu,e),xp.forEach(t),wp.forEach(t),i=0;i<iu.length;i++)a=iu[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<iu.length&&(i=iu[0],i.blockedOn===null);)aC(i),i.blockedOn===null&&iu.shift()}var Hh=yl.ReactCurrentBatchConfig,Yg=!0;function WR(e,t,i,a){var c=tn,f=Hh.transition;Hh.transition=null;try{tn=1,Mw(e,t,i,a)}finally{tn=c,Hh.transition=f}}function HR(e,t,i,a){var c=tn,f=Hh.transition;Hh.transition=null;try{tn=4,Mw(e,t,i,a)}finally{tn=c,Hh.transition=f}}function Mw(e,t,i,a){if(Yg){var c=T1(e,t,i,a);if(c===null)Kv(e,t,a,Qg,i),pE(e,a);else if(VR(c,e,t,i,a))a.stopPropagation();else if(pE(e,a),t&4&&-1<UR.indexOf(e)){for(;c!==null;){var f=Wp(c);if(f!==null&&nC(f),f=T1(e,t,i,a),f===null&&Kv(e,t,a,Qg,i),f===c)break;c=f}c!==null&&a.stopPropagation()}else Kv(e,t,a,null,i)}}var Qg=null;function T1(e,t,i,a){if(Qg=null,e=Pw(a),e=lc(e),e!==null)if(t=Ac(e),t===null)e=null;else if(i=t.tag,i===13){if(e=qI(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qg=e,null}function lC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FR()){case Aw:return 1;case QI:return 4;case Kg:case RR:return 16;case eC:return 536870912;default:return 16}default:return 16}}var su=null,kw=null,xg=null;function uC(){if(xg)return xg;var e,t=kw,i=t.length,a,c="value"in su?su.value:su.textContent,f=c.length;for(e=0;e<i&&t[e]===c[e];e++);var d=i-e;for(a=1;a<=d&&t[i-a]===c[f-a];a++);return xg=c.slice(e,1<a?1-a:void 0)}function wg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hm(){return!0}function gE(){return!1}function Ko(e){function t(i,a,c,f,d){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=d,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Hm:gE,this.isPropagationStopped=gE,this}return Fn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Hm)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Hm)},persist:function(){},isPersistent:Hm}),t}var xf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ow=Ko(xf),Gp=Fn({},xf,{view:0,detail:0}),ZR=Ko(Gp),$v,Uv,Md,u0=Fn({},Gp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Md&&(Md&&e.type==="mousemove"?($v=e.screenX-Md.screenX,Uv=e.screenY-Md.screenY):Uv=$v=0,Md=e),$v)},movementY:function(e){return"movementY"in e?e.movementY:Uv}}),yE=Ko(u0),XR=Fn({},u0,{dataTransfer:0}),qR=Ko(XR),KR=Fn({},Gp,{relatedTarget:0}),Vv=Ko(KR),JR=Fn({},xf,{animationName:0,elapsedTime:0,pseudoElement:0}),YR=Ko(JR),QR=Fn({},xf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ej=Ko(QR),tj=Fn({},xf,{data:0}),vE=Ko(tj),rj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ij={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ij[e])?!!t[e]:!1}function Fw(){return oj}var sj=Fn({},Gp,{key:function(e){if(e.key){var t=rj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fw,charCode:function(e){return e.type==="keypress"?wg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aj=Ko(sj),lj=Fn({},u0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_E=Ko(lj),uj=Fn({},Gp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fw}),cj=Ko(uj),hj=Fn({},xf,{propertyName:0,elapsedTime:0,pseudoElement:0}),fj=Ko(hj),dj=Fn({},u0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pj=Ko(dj),mj=[9,13,27,32],Rw=cl&&"CompositionEvent"in window,ep=null;cl&&"documentMode"in document&&(ep=document.documentMode);var gj=cl&&"TextEvent"in window&&!ep,cC=cl&&(!Rw||ep&&8<ep&&11>=ep),xE=" ",wE=!1;function hC(e,t){switch(e){case"keyup":return mj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ih=!1;function yj(e,t){switch(e){case"compositionend":return fC(t);case"keypress":return t.which!==32?null:(wE=!0,xE);case"textInput":return e=t.data,e===xE&&wE?null:e;default:return null}}function vj(e,t){if(Ih)return e==="compositionend"||!Rw&&hC(e,t)?(e=uC(),xg=kw=su=null,Ih=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cC&&t.locale!=="ko"?null:t.data;default:return null}}var _j={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_j[e.type]:t==="textarea"}function dC(e,t,i,a){GI(a),t=ey(t,"onChange"),0<t.length&&(i=new Ow("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var tp=null,Sp=null;function xj(e){EC(e,0)}function c0(e){var t=kh(e);if(LI(t))return e}function wj(e,t){if(e==="change")return t}var pC=!1;if(cl){var Gv;if(cl){var Wv="oninput"in document;if(!Wv){var SE=document.createElement("div");SE.setAttribute("oninput","return;"),Wv=typeof SE.oninput=="function"}Gv=Wv}else Gv=!1;pC=Gv&&(!document.documentMode||9<document.documentMode)}function EE(){tp&&(tp.detachEvent("onpropertychange",mC),Sp=tp=null)}function mC(e){if(e.propertyName==="value"&&c0(Sp)){var t=[];dC(t,Sp,e,Pw(e)),XI(xj,t)}}function bj(e,t,i){e==="focusin"?(EE(),tp=t,Sp=i,tp.attachEvent("onpropertychange",mC)):e==="focusout"&&EE()}function Sj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return c0(Sp)}function Ej(e,t){if(e==="click")return c0(t)}function Tj(e,t){if(e==="input"||e==="change")return c0(t)}function Pj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zs=typeof Object.is=="function"?Object.is:Pj;function Ep(e,t){if(Zs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!a1.call(t,c)||!Zs(e[c],t[c]))return!1}return!0}function TE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function PE(e,t){var i=TE(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=TE(i)}}function gC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yC(){for(var e=window,t=Zg();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Zg(e.document)}return t}function jw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Aj(e){var t=yC(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&gC(i.ownerDocument.documentElement,i)){if(a!==null&&jw(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=PE(i,f);var d=PE(i,a);c&&d&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ij=cl&&"documentMode"in document&&11>=document.documentMode,Ch=null,P1=null,rp=null,A1=!1;function AE(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;A1||Ch==null||Ch!==Zg(a)||(a=Ch,"selectionStart"in a&&jw(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),rp&&Ep(rp,a)||(rp=a,a=ey(P1,"onSelect"),0<a.length&&(t=new Ow("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Ch)))}function Zm(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Mh={animationend:Zm("Animation","AnimationEnd"),animationiteration:Zm("Animation","AnimationIteration"),animationstart:Zm("Animation","AnimationStart"),transitionend:Zm("Transition","TransitionEnd")},Hv={},vC={};cl&&(vC=document.createElement("div").style,"AnimationEvent"in window||(delete Mh.animationend.animation,delete Mh.animationiteration.animation,delete Mh.animationstart.animation),"TransitionEvent"in window||delete Mh.transitionend.transition);function h0(e){if(Hv[e])return Hv[e];if(!Mh[e])return e;var t=Mh[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in vC)return Hv[e]=t[i];return e}var _C=h0("animationend"),xC=h0("animationiteration"),wC=h0("animationstart"),bC=h0("transitionend"),SC=new Map,IE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tu(e,t){SC.set(e,t),Pc(t,[e])}for(var Zv=0;Zv<IE.length;Zv++){var Xv=IE[Zv],Cj=Xv.toLowerCase(),Mj=Xv[0].toUpperCase()+Xv.slice(1);Tu(Cj,"on"+Mj)}Tu(_C,"onAnimationEnd");Tu(xC,"onAnimationIteration");Tu(wC,"onAnimationStart");Tu("dblclick","onDoubleClick");Tu("focusin","onFocus");Tu("focusout","onBlur");Tu(bC,"onTransitionEnd");Qh("onMouseEnter",["mouseout","mouseover"]);Qh("onMouseLeave",["mouseout","mouseover"]);Qh("onPointerEnter",["pointerout","pointerover"]);Qh("onPointerLeave",["pointerout","pointerover"]);Pc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("cancel close invalid load scroll toggle".split(" ").concat($d));function CE(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,CR(a,t,void 0,e),e.currentTarget=null}function EC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var d=a.length-1;0<=d;d--){var l=a[d],w=l.instance,E=l.currentTarget;if(l=l.listener,w!==f&&c.isPropagationStopped())break e;CE(c,l,E),f=w}else for(d=0;d<a.length;d++){if(l=a[d],w=l.instance,E=l.currentTarget,l=l.listener,w!==f&&c.isPropagationStopped())break e;CE(c,l,E),f=w}}}if(qg)throw e=b1,qg=!1,b1=null,e}function yn(e,t){var i=t[O1];i===void 0&&(i=t[O1]=new Set);var a=e+"__bubble";i.has(a)||(TC(t,e,2,!1),i.add(a))}function qv(e,t,i){var a=0;t&&(a|=4),TC(i,e,a,t)}var Xm="_reactListening"+Math.random().toString(36).slice(2);function Tp(e){if(!e[Xm]){e[Xm]=!0,OI.forEach(function(i){i!=="selectionchange"&&(kj.has(i)||qv(i,!1,e),qv(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xm]||(t[Xm]=!0,qv("selectionchange",!1,t))}}function TC(e,t,i,a){switch(lC(t)){case 1:var c=WR;break;case 4:c=HR;break;default:c=Mw}i=c.bind(null,t,i,e),c=void 0,!w1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Kv(e,t,i,a,c){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(d===4)for(d=a.return;d!==null;){var w=d.tag;if((w===3||w===4)&&(w=d.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;d=d.return}for(;l!==null;){if(d=lc(l),d===null)return;if(w=d.tag,w===5||w===6){a=f=d;continue e}l=l.parentNode}}a=a.return}XI(function(){var E=f,C=Pw(i),b=[];e:{var T=SC.get(e);if(T!==void 0){var R=Ow,L=e;switch(e){case"keypress":if(wg(i)===0)break e;case"keydown":case"keyup":R=aj;break;case"focusin":L="focus",R=Vv;break;case"focusout":L="blur",R=Vv;break;case"beforeblur":case"afterblur":R=Vv;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=yE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=qR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=cj;break;case _C:case xC:case wC:R=YR;break;case bC:R=fj;break;case"scroll":R=ZR;break;case"wheel":R=pj;break;case"copy":case"cut":case"paste":R=ej;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=_E}var j=(t&4)!==0,le=!j&&e==="scroll",K=j?T!==null?T+"Capture":null:T;j=[];for(var Z=E,G;Z!==null;){G=Z;var se=G.stateNode;if(G.tag===5&&se!==null&&(G=se,K!==null&&(se=_p(Z,K),se!=null&&j.push(Pp(Z,se,G)))),le)break;Z=Z.return}0<j.length&&(T=new R(T,L,null,i,C),b.push({event:T,listeners:j}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",T&&i!==_1&&(L=i.relatedTarget||i.fromElement)&&(lc(L)||L[hl]))break e;if((R||T)&&(T=C.window===C?C:(T=C.ownerDocument)?T.defaultView||T.parentWindow:window,R?(L=i.relatedTarget||i.toElement,R=E,L=L?lc(L):null,L!==null&&(le=Ac(L),L!==le||L.tag!==5&&L.tag!==6)&&(L=null)):(R=null,L=E),R!==L)){if(j=yE,se="onMouseLeave",K="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(j=_E,se="onPointerLeave",K="onPointerEnter",Z="pointer"),le=R==null?T:kh(R),G=L==null?T:kh(L),T=new j(se,Z+"leave",R,i,C),T.target=le,T.relatedTarget=G,se=null,lc(C)===E&&(j=new j(K,Z+"enter",L,i,C),j.target=G,j.relatedTarget=le,se=j),le=se,R&&L)t:{for(j=R,K=L,Z=0,G=j;G;G=mh(G))Z++;for(G=0,se=K;se;se=mh(se))G++;for(;0<Z-G;)j=mh(j),Z--;for(;0<G-Z;)K=mh(K),G--;for(;Z--;){if(j===K||K!==null&&j===K.alternate)break t;j=mh(j),K=mh(K)}j=null}else j=null;R!==null&&ME(b,T,R,j,!1),L!==null&&le!==null&&ME(b,le,L,j,!0)}}e:{if(T=E?kh(E):window,R=T.nodeName&&T.nodeName.toLowerCase(),R==="select"||R==="input"&&T.type==="file")var q=wj;else if(bE(T))if(pC)q=Tj;else{q=Sj;var W=bj}else(R=T.nodeName)&&R.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(q=Ej);if(q&&(q=q(e,E))){dC(b,q,i,C);break e}W&&W(e,T,E),e==="focusout"&&(W=T._wrapperState)&&W.controlled&&T.type==="number"&&p1(T,"number",T.value)}switch(W=E?kh(E):window,e){case"focusin":(bE(W)||W.contentEditable==="true")&&(Ch=W,P1=E,rp=null);break;case"focusout":rp=P1=Ch=null;break;case"mousedown":A1=!0;break;case"contextmenu":case"mouseup":case"dragend":A1=!1,AE(b,i,C);break;case"selectionchange":if(Ij)break;case"keydown":case"keyup":AE(b,i,C)}var P;if(Rw)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Ih?hC(e,i)&&(z="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(z="onCompositionStart");z&&(cC&&i.locale!=="ko"&&(Ih||z!=="onCompositionStart"?z==="onCompositionEnd"&&Ih&&(P=uC()):(su=C,kw="value"in su?su.value:su.textContent,Ih=!0)),W=ey(E,z),0<W.length&&(z=new vE(z,e,null,i,C),b.push({event:z,listeners:W}),P?z.data=P:(P=fC(i),P!==null&&(z.data=P)))),(P=gj?yj(e,i):vj(e,i))&&(E=ey(E,"onBeforeInput"),0<E.length&&(C=new vE("onBeforeInput","beforeinput",null,i,C),b.push({event:C,listeners:E}),C.data=P))}EC(b,t)})}function Pp(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ey(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=_p(e,i),f!=null&&a.unshift(Pp(e,f,c)),f=_p(e,t),f!=null&&a.push(Pp(e,f,c))),e=e.return}return a}function mh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ME(e,t,i,a,c){for(var f=t._reactName,d=[];i!==null&&i!==a;){var l=i,w=l.alternate,E=l.stateNode;if(w!==null&&w===a)break;l.tag===5&&E!==null&&(l=E,c?(w=_p(i,f),w!=null&&d.unshift(Pp(i,w,l))):c||(w=_p(i,f),w!=null&&d.push(Pp(i,w,l)))),i=i.return}d.length!==0&&e.push({event:t,listeners:d})}var Oj=/\r\n?/g,Fj=/\u0000|\uFFFD/g;function kE(e){return(typeof e=="string"?e:""+e).replace(Oj,`
`).replace(Fj,"")}function qm(e,t,i){if(t=kE(t),kE(e)!==t&&i)throw Error(At(425))}function ty(){}var I1=null,C1=null;function M1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var k1=typeof setTimeout=="function"?setTimeout:void 0,Rj=typeof clearTimeout=="function"?clearTimeout:void 0,OE=typeof Promise=="function"?Promise:void 0,jj=typeof queueMicrotask=="function"?queueMicrotask:typeof OE<"u"?function(e){return OE.resolve(null).then(e).catch(zj)}:k1;function zj(e){setTimeout(function(){throw e})}function Jv(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),bp(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);bp(t)}function du(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function FE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var wf=Math.random().toString(36).slice(2),_a="__reactFiber$"+wf,Ap="__reactProps$"+wf,hl="__reactContainer$"+wf,O1="__reactEvents$"+wf,Lj="__reactListeners$"+wf,Bj="__reactHandles$"+wf;function lc(e){var t=e[_a];if(t)return t;for(var i=e.parentNode;i;){if(t=i[hl]||i[_a]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=FE(e);e!==null;){if(i=e[_a])return i;e=FE(e)}return t}e=i,i=e.parentNode}return null}function Wp(e){return e=e[_a]||e[hl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function f0(e){return e[Ap]||null}var F1=[],Oh=-1;function Pu(e){return{current:e}}function vn(e){0>Oh||(e.current=F1[Oh],F1[Oh]=null,Oh--)}function dn(e,t){Oh++,F1[Oh]=e.current,e.current=t}var xu={},Zi=Pu(xu),vo=Pu(!1),yc=xu;function ef(e,t){var i=e.type.contextTypes;if(!i)return xu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in i)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function _o(e){return e=e.childContextTypes,e!=null}function ry(){vn(vo),vn(Zi)}function RE(e,t,i){if(Zi.current!==xu)throw Error(At(168));dn(Zi,t),dn(vo,i)}function PC(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(At(108,bR(e)||"Unknown",c));return Fn({},i,a)}function ny(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xu,yc=Zi.current,dn(Zi,e),dn(vo,vo.current),!0}function jE(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=PC(e,t,yc),a.__reactInternalMemoizedMergedChildContext=e,vn(vo),vn(Zi),dn(Zi,e)):vn(vo),dn(vo,i)}var nl=null,d0=!1,Yv=!1;function AC(e){nl===null?nl=[e]:nl.push(e)}function Dj(e){d0=!0,AC(e)}function Au(){if(!Yv&&nl!==null){Yv=!0;var e=0,t=tn;try{var i=nl;for(tn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}nl=null,d0=!1}catch(c){throw nl!==null&&(nl=nl.slice(e+1)),YI(Aw,Au),c}finally{tn=t,Yv=!1}}return null}var Fh=[],Rh=0,iy=null,oy=0,fs=[],ds=0,vc=null,sl=1,al="";function ic(e,t){Fh[Rh++]=oy,Fh[Rh++]=iy,iy=e,oy=t}function IC(e,t,i){fs[ds++]=sl,fs[ds++]=al,fs[ds++]=vc,vc=e;var a=sl;e=al;var c=32-Gs(a)-1;a&=~(1<<c),i+=1;var f=32-Gs(t)+c;if(30<f){var d=c-c%5;f=(a&(1<<d)-1).toString(32),a>>=d,c-=d,sl=1<<32-Gs(t)+c|i<<c|a,al=f+e}else sl=1<<f|i<<c|a,al=e}function zw(e){e.return!==null&&(ic(e,1),IC(e,1,0))}function Lw(e){for(;e===iy;)iy=Fh[--Rh],Fh[Rh]=null,oy=Fh[--Rh],Fh[Rh]=null;for(;e===vc;)vc=fs[--ds],fs[ds]=null,al=fs[--ds],fs[ds]=null,sl=fs[--ds],fs[ds]=null}var Wo=null,Go=null,En=!1,Ds=null;function CC(e,t){var i=ms(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function zE(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wo=e,Go=du(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wo=e,Go=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=vc!==null?{id:sl,overflow:al}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ms(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Wo=e,Go=null,!0):!1;default:return!1}}function R1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function j1(e){if(En){var t=Go;if(t){var i=t;if(!zE(e,t)){if(R1(e))throw Error(At(418));t=du(i.nextSibling);var a=Wo;t&&zE(e,t)?CC(a,i):(e.flags=e.flags&-4097|2,En=!1,Wo=e)}}else{if(R1(e))throw Error(At(418));e.flags=e.flags&-4097|2,En=!1,Wo=e}}}function LE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wo=e}function Km(e){if(e!==Wo)return!1;if(!En)return LE(e),En=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!M1(e.type,e.memoizedProps)),t&&(t=Go)){if(R1(e))throw MC(),Error(At(418));for(;t;)CC(e,t),t=du(t.nextSibling)}if(LE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Go=du(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Go=null}}else Go=Wo?du(e.stateNode.nextSibling):null;return!0}function MC(){for(var e=Go;e;)e=du(e.nextSibling)}function tf(){Go=Wo=null,En=!1}function Bw(e){Ds===null?Ds=[e]:Ds.push(e)}var Nj=yl.ReactCurrentBatchConfig;function Ls(e,t){if(e&&e.defaultProps){t=Fn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var sy=Pu(null),ay=null,jh=null,Dw=null;function Nw(){Dw=jh=ay=null}function $w(e){var t=sy.current;vn(sy),e._currentValue=t}function z1(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function Zh(e,t){ay=e,Dw=jh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yo=!0),e.firstContext=null)}function vs(e){var t=e._currentValue;if(Dw!==e)if(e={context:e,memoizedValue:t,next:null},jh===null){if(ay===null)throw Error(At(308));jh=e,ay.dependencies={lanes:0,firstContext:e}}else jh=jh.next=e;return t}var uc=null;function Uw(e){uc===null?uc=[e]:uc.push(e)}function kC(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,Uw(t)):(i.next=c.next,c.next=i),t.interleaved=i,fl(e,a)}function fl(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var tu=!1;function Vw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ul(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pu(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Vr&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,fl(e,i)}return c=a.interleaved,c===null?(t.next=t,Uw(a)):(t.next=c.next,c.next=t),a.interleaved=t,fl(e,i)}function bg(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,Iw(e,i)}}function BE(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?c=f=d:f=f.next=d,i=i.next}while(i!==null);f===null?c=f=t:f=f.next=t}else c=f=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ly(e,t,i,a){var c=e.updateQueue;tu=!1;var f=c.firstBaseUpdate,d=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var w=l,E=w.next;w.next=null,d===null?f=E:d.next=E,d=w;var C=e.alternate;C!==null&&(C=C.updateQueue,l=C.lastBaseUpdate,l!==d&&(l===null?C.firstBaseUpdate=E:l.next=E,C.lastBaseUpdate=w))}if(f!==null){var b=c.baseState;d=0,C=E=w=null,l=f;do{var T=l.lane,R=l.eventTime;if((a&T)===T){C!==null&&(C=C.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var L=e,j=l;switch(T=t,R=i,j.tag){case 1:if(L=j.payload,typeof L=="function"){b=L.call(R,b,T);break e}b=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=j.payload,T=typeof L=="function"?L.call(R,b,T):L,T==null)break e;b=Fn({},b,T);break e;case 2:tu=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,T=c.effects,T===null?c.effects=[l]:T.push(l))}else R={eventTime:R,lane:T,tag:l.tag,payload:l.payload,callback:l.callback,next:null},C===null?(E=C=R,w=b):C=C.next=R,d|=T;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;T=l,l=T.next,T.next=null,c.lastBaseUpdate=T,c.shared.pending=null}}while(!0);if(C===null&&(w=b),c.baseState=w,c.firstBaseUpdate=E,c.lastBaseUpdate=C,t=c.shared.interleaved,t!==null){c=t;do d|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);xc|=d,e.lanes=d,e.memoizedState=b}}function DE(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(At(191,c));c.call(a)}}}var FC=new kI.Component().refs;function L1(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Fn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var p0={isMounted:function(e){return(e=e._reactInternals)?Ac(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=ro(),c=gu(e),f=ul(a,c);f.payload=t,i!=null&&(f.callback=i),t=pu(e,f,c),t!==null&&(Ws(t,e,c,a),bg(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=ro(),c=gu(e),f=ul(a,c);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=pu(e,f,c),t!==null&&(Ws(t,e,c,a),bg(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ro(),a=gu(e),c=ul(i,a);c.tag=2,t!=null&&(c.callback=t),t=pu(e,c,a),t!==null&&(Ws(t,e,a,i),bg(t,e,a))}};function NE(e,t,i,a,c,f,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,d):t.prototype&&t.prototype.isPureReactComponent?!Ep(i,a)||!Ep(c,f):!0}function RC(e,t,i){var a=!1,c=xu,f=t.contextType;return typeof f=="object"&&f!==null?f=vs(f):(c=_o(t)?yc:Zi.current,a=t.contextTypes,f=(a=a!=null)?ef(e,c):xu),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=p0,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function $E(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&p0.enqueueReplaceState(t,t.state,null)}function B1(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=FC,Vw(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=vs(f):(f=_o(t)?yc:Zi.current,c.context=ef(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(L1(e,t,f,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&p0.enqueueReplaceState(c,c.state,null),ly(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function kd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var c=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(d){var l=c.refs;l===FC&&(l=c.refs={}),d===null?delete l[f]:l[f]=d},t._stringRef=f,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function Jm(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function UE(e){var t=e._init;return t(e._payload)}function jC(e){function t(K,Z){if(e){var G=K.deletions;G===null?(K.deletions=[Z],K.flags|=16):G.push(Z)}}function i(K,Z){if(!e)return null;for(;Z!==null;)t(K,Z),Z=Z.sibling;return null}function a(K,Z){for(K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function c(K,Z){return K=yu(K,Z),K.index=0,K.sibling=null,K}function f(K,Z,G){return K.index=G,e?(G=K.alternate,G!==null?(G=G.index,G<Z?(K.flags|=2,Z):G):(K.flags|=2,Z)):(K.flags|=1048576,Z)}function d(K){return e&&K.alternate===null&&(K.flags|=2),K}function l(K,Z,G,se){return Z===null||Z.tag!==6?(Z=o_(G,K.mode,se),Z.return=K,Z):(Z=c(Z,G),Z.return=K,Z)}function w(K,Z,G,se){var q=G.type;return q===Ah?C(K,Z,G.props.children,se,G.key):Z!==null&&(Z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===eu&&UE(q)===Z.type)?(se=c(Z,G.props),se.ref=kd(K,Z,G),se.return=K,se):(se=Ig(G.type,G.key,G.props,null,K.mode,se),se.ref=kd(K,Z,G),se.return=K,se)}function E(K,Z,G,se){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==G.containerInfo||Z.stateNode.implementation!==G.implementation?(Z=s_(G,K.mode,se),Z.return=K,Z):(Z=c(Z,G.children||[]),Z.return=K,Z)}function C(K,Z,G,se,q){return Z===null||Z.tag!==7?(Z=fc(G,K.mode,se,q),Z.return=K,Z):(Z=c(Z,G),Z.return=K,Z)}function b(K,Z,G){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=o_(""+Z,K.mode,G),Z.return=K,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Nm:return G=Ig(Z.type,Z.key,Z.props,null,K.mode,G),G.ref=kd(K,null,Z),G.return=K,G;case Ph:return Z=s_(Z,K.mode,G),Z.return=K,Z;case eu:var se=Z._init;return b(K,se(Z._payload),G)}if(Dd(Z)||Pd(Z))return Z=fc(Z,K.mode,G,null),Z.return=K,Z;Jm(K,Z)}return null}function T(K,Z,G,se){var q=Z!==null?Z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return q!==null?null:l(K,Z,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Nm:return G.key===q?w(K,Z,G,se):null;case Ph:return G.key===q?E(K,Z,G,se):null;case eu:return q=G._init,T(K,Z,q(G._payload),se)}if(Dd(G)||Pd(G))return q!==null?null:C(K,Z,G,se,null);Jm(K,G)}return null}function R(K,Z,G,se,q){if(typeof se=="string"&&se!==""||typeof se=="number")return K=K.get(G)||null,l(Z,K,""+se,q);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Nm:return K=K.get(se.key===null?G:se.key)||null,w(Z,K,se,q);case Ph:return K=K.get(se.key===null?G:se.key)||null,E(Z,K,se,q);case eu:var W=se._init;return R(K,Z,G,W(se._payload),q)}if(Dd(se)||Pd(se))return K=K.get(G)||null,C(Z,K,se,q,null);Jm(Z,se)}return null}function L(K,Z,G,se){for(var q=null,W=null,P=Z,z=Z=0,D=null;P!==null&&z<G.length;z++){P.index>z?(D=P,P=null):D=P.sibling;var ee=T(K,P,G[z],se);if(ee===null){P===null&&(P=D);break}e&&P&&ee.alternate===null&&t(K,P),Z=f(ee,Z,z),W===null?q=ee:W.sibling=ee,W=ee,P=D}if(z===G.length)return i(K,P),En&&ic(K,z),q;if(P===null){for(;z<G.length;z++)P=b(K,G[z],se),P!==null&&(Z=f(P,Z,z),W===null?q=P:W.sibling=P,W=P);return En&&ic(K,z),q}for(P=a(K,P);z<G.length;z++)D=R(P,K,z,G[z],se),D!==null&&(e&&D.alternate!==null&&P.delete(D.key===null?z:D.key),Z=f(D,Z,z),W===null?q=D:W.sibling=D,W=D);return e&&P.forEach(function(X){return t(K,X)}),En&&ic(K,z),q}function j(K,Z,G,se){var q=Pd(G);if(typeof q!="function")throw Error(At(150));if(G=q.call(G),G==null)throw Error(At(151));for(var W=q=null,P=Z,z=Z=0,D=null,ee=G.next();P!==null&&!ee.done;z++,ee=G.next()){P.index>z?(D=P,P=null):D=P.sibling;var X=T(K,P,ee.value,se);if(X===null){P===null&&(P=D);break}e&&P&&X.alternate===null&&t(K,P),Z=f(X,Z,z),W===null?q=X:W.sibling=X,W=X,P=D}if(ee.done)return i(K,P),En&&ic(K,z),q;if(P===null){for(;!ee.done;z++,ee=G.next())ee=b(K,ee.value,se),ee!==null&&(Z=f(ee,Z,z),W===null?q=ee:W.sibling=ee,W=ee);return En&&ic(K,z),q}for(P=a(K,P);!ee.done;z++,ee=G.next())ee=R(P,K,z,ee.value,se),ee!==null&&(e&&ee.alternate!==null&&P.delete(ee.key===null?z:ee.key),Z=f(ee,Z,z),W===null?q=ee:W.sibling=ee,W=ee);return e&&P.forEach(function(ye){return t(K,ye)}),En&&ic(K,z),q}function le(K,Z,G,se){if(typeof G=="object"&&G!==null&&G.type===Ah&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Nm:e:{for(var q=G.key,W=Z;W!==null;){if(W.key===q){if(q=G.type,q===Ah){if(W.tag===7){i(K,W.sibling),Z=c(W,G.props.children),Z.return=K,K=Z;break e}}else if(W.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===eu&&UE(q)===W.type){i(K,W.sibling),Z=c(W,G.props),Z.ref=kd(K,W,G),Z.return=K,K=Z;break e}i(K,W);break}else t(K,W);W=W.sibling}G.type===Ah?(Z=fc(G.props.children,K.mode,se,G.key),Z.return=K,K=Z):(se=Ig(G.type,G.key,G.props,null,K.mode,se),se.ref=kd(K,Z,G),se.return=K,K=se)}return d(K);case Ph:e:{for(W=G.key;Z!==null;){if(Z.key===W)if(Z.tag===4&&Z.stateNode.containerInfo===G.containerInfo&&Z.stateNode.implementation===G.implementation){i(K,Z.sibling),Z=c(Z,G.children||[]),Z.return=K,K=Z;break e}else{i(K,Z);break}else t(K,Z);Z=Z.sibling}Z=s_(G,K.mode,se),Z.return=K,K=Z}return d(K);case eu:return W=G._init,le(K,Z,W(G._payload),se)}if(Dd(G))return L(K,Z,G,se);if(Pd(G))return j(K,Z,G,se);Jm(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,Z!==null&&Z.tag===6?(i(K,Z.sibling),Z=c(Z,G),Z.return=K,K=Z):(i(K,Z),Z=o_(G,K.mode,se),Z.return=K,K=Z),d(K)):i(K,Z)}return le}var rf=jC(!0),zC=jC(!1),Hp={},Pa=Pu(Hp),Ip=Pu(Hp),Cp=Pu(Hp);function cc(e){if(e===Hp)throw Error(At(174));return e}function Gw(e,t){switch(dn(Cp,t),dn(Ip,e),dn(Pa,Hp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:g1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=g1(t,e)}vn(Pa),dn(Pa,t)}function nf(){vn(Pa),vn(Ip),vn(Cp)}function LC(e){cc(Cp.current);var t=cc(Pa.current),i=g1(t,e.type);t!==i&&(dn(Ip,e),dn(Pa,i))}function Ww(e){Ip.current===e&&(vn(Pa),vn(Ip))}var Mn=Pu(0);function uy(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qv=[];function Hw(){for(var e=0;e<Qv.length;e++)Qv[e]._workInProgressVersionPrimary=null;Qv.length=0}var Sg=yl.ReactCurrentDispatcher,e_=yl.ReactCurrentBatchConfig,_c=0,On=null,ei=null,di=null,cy=!1,np=!1,Mp=0,$j=0;function Ui(){throw Error(At(321))}function Zw(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Zs(e[i],t[i]))return!1;return!0}function Xw(e,t,i,a,c,f){if(_c=f,On=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sg.current=e===null||e.memoizedState===null?Wj:Hj,e=i(a,c),np){f=0;do{if(np=!1,Mp=0,25<=f)throw Error(At(301));f+=1,di=ei=null,t.updateQueue=null,Sg.current=Zj,e=i(a,c)}while(np)}if(Sg.current=hy,t=ei!==null&&ei.next!==null,_c=0,di=ei=On=null,cy=!1,t)throw Error(At(300));return e}function qw(){var e=Mp!==0;return Mp=0,e}function ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?On.memoizedState=di=e:di=di.next=e,di}function _s(){if(ei===null){var e=On.alternate;e=e!==null?e.memoizedState:null}else e=ei.next;var t=di===null?On.memoizedState:di.next;if(t!==null)di=t,ei=e;else{if(e===null)throw Error(At(310));ei=e,e={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},di===null?On.memoizedState=di=e:di=di.next=e}return di}function kp(e,t){return typeof t=="function"?t(e):t}function t_(e){var t=_s(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ei,c=a.baseQueue,f=i.pending;if(f!==null){if(c!==null){var d=c.next;c.next=f.next,f.next=d}a.baseQueue=c=f,i.pending=null}if(c!==null){f=c.next,a=a.baseState;var l=d=null,w=null,E=f;do{var C=E.lane;if((_c&C)===C)w!==null&&(w=w.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),a=E.hasEagerState?E.eagerState:e(a,E.action);else{var b={lane:C,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};w===null?(l=w=b,d=a):w=w.next=b,On.lanes|=C,xc|=C}E=E.next}while(E!==null&&E!==f);w===null?d=a:w.next=l,Zs(a,t.memoizedState)||(yo=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=w,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do f=c.lane,On.lanes|=f,xc|=f,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function r_(e){var t=_s(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,f=t.memoizedState;if(c!==null){i.pending=null;var d=c=c.next;do f=e(f,d.action),d=d.next;while(d!==c);Zs(f,t.memoizedState)||(yo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,a]}function BC(){}function DC(e,t){var i=On,a=_s(),c=t(),f=!Zs(a.memoizedState,c);if(f&&(a.memoizedState=c,yo=!0),a=a.queue,Kw(UC.bind(null,i,a,e),[e]),a.getSnapshot!==t||f||di!==null&&di.memoizedState.tag&1){if(i.flags|=2048,Op(9,$C.bind(null,i,a,c,t),void 0,null),pi===null)throw Error(At(349));_c&30||NC(i,t,c)}return c}function NC(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=On.updateQueue,t===null?(t={lastEffect:null,stores:null},On.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function $C(e,t,i,a){t.value=i,t.getSnapshot=a,VC(t)&&GC(e)}function UC(e,t,i){return i(function(){VC(t)&&GC(e)})}function VC(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Zs(e,i)}catch{return!0}}function GC(e){var t=fl(e,1);t!==null&&Ws(t,e,1,-1)}function VE(e){var t=ma();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kp,lastRenderedState:e},t.queue=e,e=e.dispatch=Gj.bind(null,On,e),[t.memoizedState,e]}function Op(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=On.updateQueue,t===null?(t={lastEffect:null,stores:null},On.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function WC(){return _s().memoizedState}function Eg(e,t,i,a){var c=ma();On.flags|=e,c.memoizedState=Op(1|t,i,void 0,a===void 0?null:a)}function m0(e,t,i,a){var c=_s();a=a===void 0?null:a;var f=void 0;if(ei!==null){var d=ei.memoizedState;if(f=d.destroy,a!==null&&Zw(a,d.deps)){c.memoizedState=Op(t,i,f,a);return}}On.flags|=e,c.memoizedState=Op(1|t,i,f,a)}function GE(e,t){return Eg(8390656,8,e,t)}function Kw(e,t){return m0(2048,8,e,t)}function HC(e,t){return m0(4,2,e,t)}function ZC(e,t){return m0(4,4,e,t)}function XC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qC(e,t,i){return i=i!=null?i.concat([e]):null,m0(4,4,XC.bind(null,t,e),i)}function Jw(){}function KC(e,t){var i=_s();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&Zw(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function JC(e,t){var i=_s();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&Zw(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function YC(e,t,i){return _c&21?(Zs(i,t)||(i=tC(),On.lanes|=i,xc|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=i)}function Uj(e,t){var i=tn;tn=i!==0&&4>i?i:4,e(!0);var a=e_.transition;e_.transition={};try{e(!1),t()}finally{tn=i,e_.transition=a}}function QC(){return _s().memoizedState}function Vj(e,t,i){var a=gu(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},eM(e))tM(t,i);else if(i=kC(e,t,i,a),i!==null){var c=ro();Ws(i,e,a,c),rM(i,t,a)}}function Gj(e,t,i){var a=gu(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(eM(e))tM(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var d=t.lastRenderedState,l=f(d,i);if(c.hasEagerState=!0,c.eagerState=l,Zs(l,d)){var w=t.interleaved;w===null?(c.next=c,Uw(t)):(c.next=w.next,w.next=c),t.interleaved=c;return}}catch{}finally{}i=kC(e,t,c,a),i!==null&&(c=ro(),Ws(i,e,a,c),rM(i,t,a))}}function eM(e){var t=e.alternate;return e===On||t!==null&&t===On}function tM(e,t){np=cy=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function rM(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,Iw(e,i)}}var hy={readContext:vs,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},Wj={readContext:vs,useCallback:function(e,t){return ma().memoizedState=[e,t===void 0?null:t],e},useContext:vs,useEffect:GE,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Eg(4194308,4,XC.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Eg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Eg(4,2,e,t)},useMemo:function(e,t){var i=ma();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=ma();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Vj.bind(null,On,e),[a.memoizedState,e]},useRef:function(e){var t=ma();return e={current:e},t.memoizedState=e},useState:VE,useDebugValue:Jw,useDeferredValue:function(e){return ma().memoizedState=e},useTransition:function(){var e=VE(!1),t=e[0];return e=Uj.bind(null,e[1]),ma().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=On,c=ma();if(En){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),pi===null)throw Error(At(349));_c&30||NC(a,t,i)}c.memoizedState=i;var f={value:i,getSnapshot:t};return c.queue=f,GE(UC.bind(null,a,f,e),[e]),a.flags|=2048,Op(9,$C.bind(null,a,f,i,t),void 0,null),i},useId:function(){var e=ma(),t=pi.identifierPrefix;if(En){var i=al,a=sl;i=(a&~(1<<32-Gs(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Mp++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=$j++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Hj={readContext:vs,useCallback:KC,useContext:vs,useEffect:Kw,useImperativeHandle:qC,useInsertionEffect:HC,useLayoutEffect:ZC,useMemo:JC,useReducer:t_,useRef:WC,useState:function(){return t_(kp)},useDebugValue:Jw,useDeferredValue:function(e){var t=_s();return YC(t,ei.memoizedState,e)},useTransition:function(){var e=t_(kp)[0],t=_s().memoizedState;return[e,t]},useMutableSource:BC,useSyncExternalStore:DC,useId:QC,unstable_isNewReconciler:!1},Zj={readContext:vs,useCallback:KC,useContext:vs,useEffect:Kw,useImperativeHandle:qC,useInsertionEffect:HC,useLayoutEffect:ZC,useMemo:JC,useReducer:r_,useRef:WC,useState:function(){return r_(kp)},useDebugValue:Jw,useDeferredValue:function(e){var t=_s();return ei===null?t.memoizedState=e:YC(t,ei.memoizedState,e)},useTransition:function(){var e=r_(kp)[0],t=_s().memoizedState;return[e,t]},useMutableSource:BC,useSyncExternalStore:DC,useId:QC,unstable_isNewReconciler:!1};function of(e,t){try{var i="",a=t;do i+=wR(a),a=a.return;while(a);var c=i}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function n_(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function D1(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Xj=typeof WeakMap=="function"?WeakMap:Map;function nM(e,t,i){i=ul(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){dy||(dy=!0,q1=a),D1(e,t)},i}function iM(e,t,i){i=ul(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){D1(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){D1(e,t),typeof a!="function"&&(mu===null?mu=new Set([this]):mu.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),i}function WE(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Xj;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=lz.bind(null,e,t,i),t.then(e,e))}function HE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ZE(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ul(-1,1),t.tag=2,pu(i,t,1))),i.lanes|=1),e)}var qj=yl.ReactCurrentOwner,yo=!1;function Yi(e,t,i,a){t.child=e===null?zC(t,null,i,a):rf(t,e.child,i,a)}function XE(e,t,i,a,c){i=i.render;var f=t.ref;return Zh(t,c),a=Xw(e,t,i,a,f,c),i=qw(),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,dl(e,t,c)):(En&&i&&zw(t),t.flags|=1,Yi(e,t,a,c),t.child)}function qE(e,t,i,a,c){if(e===null){var f=i.type;return typeof f=="function"&&!ob(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,oM(e,t,f,a,c)):(e=Ig(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&c)){var d=f.memoizedProps;if(i=i.compare,i=i!==null?i:Ep,i(d,a)&&e.ref===t.ref)return dl(e,t,c)}return t.flags|=1,e=yu(f,a),e.ref=t.ref,e.return=t,t.child=e}function oM(e,t,i,a,c){if(e!==null){var f=e.memoizedProps;if(Ep(f,a)&&e.ref===t.ref)if(yo=!1,t.pendingProps=a=f,(e.lanes&c)!==0)e.flags&131072&&(yo=!0);else return t.lanes=e.lanes,dl(e,t,c)}return N1(e,t,i,a,c)}function sM(e,t,i){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(Lh,No),No|=i;else{if(!(i&1073741824))return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dn(Lh,No),No|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:i,dn(Lh,No),No|=a}else f!==null?(a=f.baseLanes|i,t.memoizedState=null):a=i,dn(Lh,No),No|=a;return Yi(e,t,c,i),t.child}function aM(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function N1(e,t,i,a,c){var f=_o(i)?yc:Zi.current;return f=ef(t,f),Zh(t,c),i=Xw(e,t,i,a,f,c),a=qw(),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,dl(e,t,c)):(En&&a&&zw(t),t.flags|=1,Yi(e,t,i,c),t.child)}function KE(e,t,i,a,c){if(_o(i)){var f=!0;ny(t)}else f=!1;if(Zh(t,c),t.stateNode===null)Tg(e,t),RC(t,i,a),B1(t,i,a,c),a=!0;else if(e===null){var d=t.stateNode,l=t.memoizedProps;d.props=l;var w=d.context,E=i.contextType;typeof E=="object"&&E!==null?E=vs(E):(E=_o(i)?yc:Zi.current,E=ef(t,E));var C=i.getDerivedStateFromProps,b=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function";b||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==a||w!==E)&&$E(t,d,a,E),tu=!1;var T=t.memoizedState;d.state=T,ly(t,a,d,c),w=t.memoizedState,l!==a||T!==w||vo.current||tu?(typeof C=="function"&&(L1(t,i,C,a),w=t.memoizedState),(l=tu||NE(t,i,l,a,T,w,E))?(b||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),d.props=a,d.state=w,d.context=E,a=l):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,OC(e,t),l=t.memoizedProps,E=t.type===t.elementType?l:Ls(t.type,l),d.props=E,b=t.pendingProps,T=d.context,w=i.contextType,typeof w=="object"&&w!==null?w=vs(w):(w=_o(i)?yc:Zi.current,w=ef(t,w));var R=i.getDerivedStateFromProps;(C=typeof R=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==b||T!==w)&&$E(t,d,a,w),tu=!1,T=t.memoizedState,d.state=T,ly(t,a,d,c);var L=t.memoizedState;l!==b||T!==L||vo.current||tu?(typeof R=="function"&&(L1(t,i,R,a),L=t.memoizedState),(E=tu||NE(t,i,E,a,T,L,w)||!1)?(C||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,L,w),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,L,w)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=L),d.props=a,d.state=L,d.context=w,a=E):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return $1(e,t,i,a,f,c)}function $1(e,t,i,a,c,f){aM(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return c&&jE(t,i,!1),dl(e,t,f);a=t.stateNode,qj.current=t;var l=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=rf(t,e.child,null,f),t.child=rf(t,null,l,f)):Yi(e,t,l,f),t.memoizedState=a.state,c&&jE(t,i,!0),t.child}function lM(e){var t=e.stateNode;t.pendingContext?RE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&RE(e,t.context,!1),Gw(e,t.containerInfo)}function JE(e,t,i,a,c){return tf(),Bw(c),t.flags|=256,Yi(e,t,i,a),t.child}var U1={dehydrated:null,treeContext:null,retryLane:0};function V1(e){return{baseLanes:e,cachePool:null,transitions:null}}function uM(e,t,i){var a=t.pendingProps,c=Mn.current,f=!1,d=(t.flags&128)!==0,l;if((l=d)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),dn(Mn,c&1),e===null)return j1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,f?(a=t.mode,f=t.child,d={mode:"hidden",children:d},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=d):f=v0(d,a,0,null),e=fc(e,a,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=V1(i),t.memoizedState=U1,e):Yw(t,d));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return Kj(e,t,d,a,l,c,i);if(f){f=a.fallback,d=t.mode,c=e.child,l=c.sibling;var w={mode:"hidden",children:a.children};return!(d&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=yu(c,w),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?f=yu(l,f):(f=fc(f,d,i,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,d=e.child.memoizedState,d=d===null?V1(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},f.memoizedState=d,f.childLanes=e.childLanes&~i,t.memoizedState=U1,a}return f=e.child,e=f.sibling,a=yu(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function Yw(e,t){return t=v0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ym(e,t,i,a){return a!==null&&Bw(a),rf(t,e.child,null,i),e=Yw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kj(e,t,i,a,c,f,d){if(i)return t.flags&256?(t.flags&=-257,a=n_(Error(At(422))),Ym(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,c=t.mode,a=v0({mode:"visible",children:a.children},c,0,null),f=fc(f,c,d,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&rf(t,e.child,null,d),t.child.memoizedState=V1(d),t.memoizedState=U1,f);if(!(t.mode&1))return Ym(e,t,d,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,f=Error(At(419)),a=n_(f,a,void 0),Ym(e,t,d,a)}if(l=(d&e.childLanes)!==0,yo||l){if(a=pi,a!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|d)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,fl(e,c),Ws(a,e,c,-1))}return ib(),a=n_(Error(At(421))),Ym(e,t,d,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=uz.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,Go=du(c.nextSibling),Wo=t,En=!0,Ds=null,e!==null&&(fs[ds++]=sl,fs[ds++]=al,fs[ds++]=vc,sl=e.id,al=e.overflow,vc=t),t=Yw(t,a.children),t.flags|=4096,t)}function YE(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),z1(e.return,t,i)}function i_(e,t,i,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=i,f.tailMode=c)}function cM(e,t,i){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(Yi(e,t,a.children,i),a=Mn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&YE(e,i,t);else if(e.tag===19)YE(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(dn(Mn,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&uy(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),i_(t,!1,c,i,f);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&uy(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}i_(t,!0,i,null,f);break;case"together":i_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dl(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),xc|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=yu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=yu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Jj(e,t,i){switch(t.tag){case 3:lM(t),tf();break;case 5:LC(t);break;case 1:_o(t.type)&&ny(t);break;case 4:Gw(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;dn(sy,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(dn(Mn,Mn.current&1),t.flags|=128,null):i&t.child.childLanes?uM(e,t,i):(dn(Mn,Mn.current&1),e=dl(e,t,i),e!==null?e.sibling:null);dn(Mn,Mn.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return cM(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),dn(Mn,Mn.current),a)break;return null;case 22:case 23:return t.lanes=0,sM(e,t,i)}return dl(e,t,i)}var hM,G1,fM,dM;hM=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};G1=function(){};fM=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,cc(Pa.current);var f=null;switch(i){case"input":c=f1(e,c),a=f1(e,a),f=[];break;case"select":c=Fn({},c,{value:void 0}),a=Fn({},a,{value:void 0}),f=[];break;case"textarea":c=m1(e,c),a=m1(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=ty)}y1(i,a);var d;i=null;for(E in c)if(!a.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var l=c[E];for(d in l)l.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(yp.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in a){var w=a[E];if(l=c!=null?c[E]:void 0,a.hasOwnProperty(E)&&w!==l&&(w!=null||l!=null))if(E==="style")if(l){for(d in l)!l.hasOwnProperty(d)||w&&w.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in w)w.hasOwnProperty(d)&&l[d]!==w[d]&&(i||(i={}),i[d]=w[d])}else i||(f||(f=[]),f.push(E,i)),i=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,l=l?l.__html:void 0,w!=null&&l!==w&&(f=f||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(yp.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&yn("scroll",e),f||l===w||(f=[])):(f=f||[]).push(E,w))}i&&(f=f||[]).push("style",i);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};dM=function(e,t,i,a){i!==a&&(t.flags|=4)};function Od(e,t){if(!En)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Vi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function Yj(e,t,i){var a=t.pendingProps;switch(Lw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(t),null;case 1:return _o(t.type)&&ry(),Vi(t),null;case 3:return a=t.stateNode,nf(),vn(vo),vn(Zi),Hw(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Km(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ds!==null&&(Y1(Ds),Ds=null))),G1(e,t),Vi(t),null;case 5:Ww(t);var c=cc(Cp.current);if(i=t.type,e!==null&&t.stateNode!=null)fM(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Vi(t),null}if(e=cc(Pa.current),Km(t)){a=t.stateNode,i=t.type;var f=t.memoizedProps;switch(a[_a]=t,a[Ap]=f,e=(t.mode&1)!==0,i){case"dialog":yn("cancel",a),yn("close",a);break;case"iframe":case"object":case"embed":yn("load",a);break;case"video":case"audio":for(c=0;c<$d.length;c++)yn($d[c],a);break;case"source":yn("error",a);break;case"img":case"image":case"link":yn("error",a),yn("load",a);break;case"details":yn("toggle",a);break;case"input":aE(a,f),yn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},yn("invalid",a);break;case"textarea":uE(a,f),yn("invalid",a)}y1(i,f),c=null;for(var d in f)if(f.hasOwnProperty(d)){var l=f[d];d==="children"?typeof l=="string"?a.textContent!==l&&(f.suppressHydrationWarning!==!0&&qm(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&qm(a.textContent,l,e),c=["children",""+l]):yp.hasOwnProperty(d)&&l!=null&&d==="onScroll"&&yn("scroll",a)}switch(i){case"input":$m(a),lE(a,f,!0);break;case"textarea":$m(a),cE(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=ty)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=NI(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(i,{is:a.is}):(e=d.createElement(i),i==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,i),e[_a]=t,e[Ap]=a,hM(e,t,!1,!1),t.stateNode=e;e:{switch(d=v1(i,a),i){case"dialog":yn("cancel",e),yn("close",e),c=a;break;case"iframe":case"object":case"embed":yn("load",e),c=a;break;case"video":case"audio":for(c=0;c<$d.length;c++)yn($d[c],e);c=a;break;case"source":yn("error",e),c=a;break;case"img":case"image":case"link":yn("error",e),yn("load",e),c=a;break;case"details":yn("toggle",e),c=a;break;case"input":aE(e,a),c=f1(e,a),yn("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Fn({},a,{value:void 0}),yn("invalid",e);break;case"textarea":uE(e,a),c=m1(e,a),yn("invalid",e);break;default:c=a}y1(i,c),l=c;for(f in l)if(l.hasOwnProperty(f)){var w=l[f];f==="style"?VI(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&$I(e,w)):f==="children"?typeof w=="string"?(i!=="textarea"||w!=="")&&vp(e,w):typeof w=="number"&&vp(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(yp.hasOwnProperty(f)?w!=null&&f==="onScroll"&&yn("scroll",e):w!=null&&bw(e,f,w,d))}switch(i){case"input":$m(e),lE(e,a,!1);break;case"textarea":$m(e),cE(e);break;case"option":a.value!=null&&e.setAttribute("value",""+_u(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Vh(e,!!a.multiple,f,!1):a.defaultValue!=null&&Vh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=ty)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vi(t),null;case 6:if(e&&t.stateNode!=null)dM(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=cc(Cp.current),cc(Pa.current),Km(t)){if(a=t.stateNode,i=t.memoizedProps,a[_a]=t,(f=a.nodeValue!==i)&&(e=Wo,e!==null))switch(e.tag){case 3:qm(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qm(a.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[_a]=t,t.stateNode=a}return Vi(t),null;case 13:if(vn(Mn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(En&&Go!==null&&t.mode&1&&!(t.flags&128))MC(),tf(),t.flags|=98560,f=!1;else if(f=Km(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(At(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(At(317));f[_a]=t}else tf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vi(t),f=!1}else Ds!==null&&(Y1(Ds),Ds=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Mn.current&1?ti===0&&(ti=3):ib())),t.updateQueue!==null&&(t.flags|=4),Vi(t),null);case 4:return nf(),G1(e,t),e===null&&Tp(t.stateNode.containerInfo),Vi(t),null;case 10:return $w(t.type._context),Vi(t),null;case 17:return _o(t.type)&&ry(),Vi(t),null;case 19:if(vn(Mn),f=t.memoizedState,f===null)return Vi(t),null;if(a=(t.flags&128)!==0,d=f.rendering,d===null)if(a)Od(f,!1);else{if(ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=uy(e),d!==null){for(t.flags|=128,Od(f,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)f=i,e=a,f.flags&=14680066,d=f.alternate,d===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=d.childLanes,f.lanes=d.lanes,f.child=d.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=d.memoizedProps,f.memoizedState=d.memoizedState,f.updateQueue=d.updateQueue,f.type=d.type,e=d.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return dn(Mn,Mn.current&1|2),t.child}e=e.sibling}f.tail!==null&&Un()>sf&&(t.flags|=128,a=!0,Od(f,!1),t.lanes=4194304)}else{if(!a)if(e=uy(d),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Od(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!En)return Vi(t),null}else 2*Un()-f.renderingStartTime>sf&&i!==1073741824&&(t.flags|=128,a=!0,Od(f,!1),t.lanes=4194304);f.isBackwards?(d.sibling=t.child,t.child=d):(i=f.last,i!==null?i.sibling=d:t.child=d,f.last=d)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Un(),t.sibling=null,i=Mn.current,dn(Mn,a?i&1|2:i&1),t):(Vi(t),null);case 22:case 23:return nb(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?No&1073741824&&(Vi(t),t.subtreeFlags&6&&(t.flags|=8192)):Vi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function Qj(e,t){switch(Lw(t),t.tag){case 1:return _o(t.type)&&ry(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nf(),vn(vo),vn(Zi),Hw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ww(t),null;case 13:if(vn(Mn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));tf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vn(Mn),null;case 4:return nf(),null;case 10:return $w(t.type._context),null;case 22:case 23:return nb(),null;case 24:return null;default:return null}}var Qm=!1,Wi=!1,ez=typeof WeakSet=="function"?WeakSet:Set,tr=null;function zh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Bn(e,t,a)}else i.current=null}function W1(e,t,i){try{i()}catch(a){Bn(e,t,a)}}var QE=!1;function tz(e,t){if(I1=Yg,e=yC(),jw(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var d=0,l=-1,w=-1,E=0,C=0,b=e,T=null;t:for(;;){for(var R;b!==i||c!==0&&b.nodeType!==3||(l=d+c),b!==f||a!==0&&b.nodeType!==3||(w=d+a),b.nodeType===3&&(d+=b.nodeValue.length),(R=b.firstChild)!==null;)T=b,b=R;for(;;){if(b===e)break t;if(T===i&&++E===c&&(l=d),T===f&&++C===a&&(w=d),(R=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=R}i=l===-1||w===-1?null:{start:l,end:w}}else i=null}i=i||{start:0,end:0}}else i=null;for(C1={focusedElem:e,selectionRange:i},Yg=!1,tr=t;tr!==null;)if(t=tr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tr=e;else for(;tr!==null;){t=tr;try{var L=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var j=L.memoizedProps,le=L.memoizedState,K=t.stateNode,Z=K.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ls(t.type,j),le);K.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(se){Bn(t,t.return,se)}if(e=t.sibling,e!==null){e.return=t.return,tr=e;break}tr=t.return}return L=QE,QE=!1,L}function ip(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&W1(t,i,f)}c=c.next}while(c!==a)}}function g0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function H1(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function pM(e){var t=e.alternate;t!==null&&(e.alternate=null,pM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_a],delete t[Ap],delete t[O1],delete t[Lj],delete t[Bj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mM(e){return e.tag===5||e.tag===3||e.tag===4}function eT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Z1(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=ty));else if(a!==4&&(e=e.child,e!==null))for(Z1(e,t,i),e=e.sibling;e!==null;)Z1(e,t,i),e=e.sibling}function X1(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(X1(e,t,i),e=e.sibling;e!==null;)X1(e,t,i),e=e.sibling}var Ai=null,Bs=!1;function Yl(e,t,i){for(i=i.child;i!==null;)gM(e,t,i),i=i.sibling}function gM(e,t,i){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(l0,i)}catch{}switch(i.tag){case 5:Wi||zh(i,t);case 6:var a=Ai,c=Bs;Ai=null,Yl(e,t,i),Ai=a,Bs=c,Ai!==null&&(Bs?(e=Ai,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ai.removeChild(i.stateNode));break;case 18:Ai!==null&&(Bs?(e=Ai,i=i.stateNode,e.nodeType===8?Jv(e.parentNode,i):e.nodeType===1&&Jv(e,i),bp(e)):Jv(Ai,i.stateNode));break;case 4:a=Ai,c=Bs,Ai=i.stateNode.containerInfo,Bs=!0,Yl(e,t,i),Ai=a,Bs=c;break;case 0:case 11:case 14:case 15:if(!Wi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,d=f.destroy;f=f.tag,d!==void 0&&(f&2||f&4)&&W1(i,t,d),c=c.next}while(c!==a)}Yl(e,t,i);break;case 1:if(!Wi&&(zh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(l){Bn(i,t,l)}Yl(e,t,i);break;case 21:Yl(e,t,i);break;case 22:i.mode&1?(Wi=(a=Wi)||i.memoizedState!==null,Yl(e,t,i),Wi=a):Yl(e,t,i);break;default:Yl(e,t,i)}}function tT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new ez),t.forEach(function(a){var c=cz.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function js(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var f=e,d=t,l=d;e:for(;l!==null;){switch(l.tag){case 5:Ai=l.stateNode,Bs=!1;break e;case 3:Ai=l.stateNode.containerInfo,Bs=!0;break e;case 4:Ai=l.stateNode.containerInfo,Bs=!0;break e}l=l.return}if(Ai===null)throw Error(At(160));gM(f,d,c),Ai=null,Bs=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(E){Bn(c,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yM(t,e),t=t.sibling}function yM(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(js(t,e),pa(e),a&4){try{ip(3,e,e.return),g0(3,e)}catch(j){Bn(e,e.return,j)}try{ip(5,e,e.return)}catch(j){Bn(e,e.return,j)}}break;case 1:js(t,e),pa(e),a&512&&i!==null&&zh(i,i.return);break;case 5:if(js(t,e),pa(e),a&512&&i!==null&&zh(i,i.return),e.flags&32){var c=e.stateNode;try{vp(c,"")}catch(j){Bn(e,e.return,j)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,d=i!==null?i.memoizedProps:f,l=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&BI(c,f),v1(l,d);var E=v1(l,f);for(d=0;d<w.length;d+=2){var C=w[d],b=w[d+1];C==="style"?VI(c,b):C==="dangerouslySetInnerHTML"?$I(c,b):C==="children"?vp(c,b):bw(c,C,b,E)}switch(l){case"input":d1(c,f);break;case"textarea":DI(c,f);break;case"select":var T=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var R=f.value;R!=null?Vh(c,!!f.multiple,R,!1):T!==!!f.multiple&&(f.defaultValue!=null?Vh(c,!!f.multiple,f.defaultValue,!0):Vh(c,!!f.multiple,f.multiple?[]:"",!1))}c[Ap]=f}catch(j){Bn(e,e.return,j)}}break;case 6:if(js(t,e),pa(e),a&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(j){Bn(e,e.return,j)}}break;case 3:if(js(t,e),pa(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{bp(t.containerInfo)}catch(j){Bn(e,e.return,j)}break;case 4:js(t,e),pa(e);break;case 13:js(t,e),pa(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(tb=Un())),a&4&&tT(e);break;case 22:if(C=i!==null&&i.memoizedState!==null,e.mode&1?(Wi=(E=Wi)||C,js(t,e),Wi=E):js(t,e),pa(e),a&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!C&&e.mode&1)for(tr=e,C=e.child;C!==null;){for(b=tr=C;tr!==null;){switch(T=tr,R=T.child,T.tag){case 0:case 11:case 14:case 15:ip(4,T,T.return);break;case 1:zh(T,T.return);var L=T.stateNode;if(typeof L.componentWillUnmount=="function"){a=T,i=T.return;try{t=a,L.props=t.memoizedProps,L.state=t.memoizedState,L.componentWillUnmount()}catch(j){Bn(a,i,j)}}break;case 5:zh(T,T.return);break;case 22:if(T.memoizedState!==null){nT(b);continue}}R!==null?(R.return=T,tr=R):nT(b)}C=C.sibling}e:for(C=null,b=e;;){if(b.tag===5){if(C===null){C=b;try{c=b.stateNode,E?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=b.stateNode,w=b.memoizedProps.style,d=w!=null&&w.hasOwnProperty("display")?w.display:null,l.style.display=UI("display",d))}catch(j){Bn(e,e.return,j)}}}else if(b.tag===6){if(C===null)try{b.stateNode.nodeValue=E?"":b.memoizedProps}catch(j){Bn(e,e.return,j)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;C===b&&(C=null),b=b.return}C===b&&(C=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:js(t,e),pa(e),a&4&&tT(e);break;case 21:break;default:js(t,e),pa(e)}}function pa(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(mM(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(vp(c,""),a.flags&=-33);var f=eT(e);X1(e,f,c);break;case 3:case 4:var d=a.stateNode.containerInfo,l=eT(e);Z1(e,l,d);break;default:throw Error(At(161))}}catch(w){Bn(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rz(e,t,i){tr=e,vM(e)}function vM(e,t,i){for(var a=(e.mode&1)!==0;tr!==null;){var c=tr,f=c.child;if(c.tag===22&&a){var d=c.memoizedState!==null||Qm;if(!d){var l=c.alternate,w=l!==null&&l.memoizedState!==null||Wi;l=Qm;var E=Wi;if(Qm=d,(Wi=w)&&!E)for(tr=c;tr!==null;)d=tr,w=d.child,d.tag===22&&d.memoizedState!==null?iT(c):w!==null?(w.return=d,tr=w):iT(c);for(;f!==null;)tr=f,vM(f),f=f.sibling;tr=c,Qm=l,Wi=E}rT(e)}else c.subtreeFlags&8772&&f!==null?(f.return=c,tr=f):rT(e)}}function rT(e){for(;tr!==null;){var t=tr;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wi||g0(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Wi)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ls(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&DE(t,f,a);break;case 3:var d=t.updateQueue;if(d!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}DE(t,d,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&i.focus();break;case"img":w.src&&(i.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var C=E.memoizedState;if(C!==null){var b=C.dehydrated;b!==null&&bp(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Wi||t.flags&512&&H1(t)}catch(T){Bn(t,t.return,T)}}if(t===e){tr=null;break}if(i=t.sibling,i!==null){i.return=t.return,tr=i;break}tr=t.return}}function nT(e){for(;tr!==null;){var t=tr;if(t===e){tr=null;break}var i=t.sibling;if(i!==null){i.return=t.return,tr=i;break}tr=t.return}}function iT(e){for(;tr!==null;){var t=tr;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{g0(4,t)}catch(w){Bn(t,i,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(w){Bn(t,c,w)}}var f=t.return;try{H1(t)}catch(w){Bn(t,f,w)}break;case 5:var d=t.return;try{H1(t)}catch(w){Bn(t,d,w)}}}catch(w){Bn(t,t.return,w)}if(t===e){tr=null;break}var l=t.sibling;if(l!==null){l.return=t.return,tr=l;break}tr=t.return}}var nz=Math.ceil,fy=yl.ReactCurrentDispatcher,Qw=yl.ReactCurrentOwner,ys=yl.ReactCurrentBatchConfig,Vr=0,pi=null,Kn=null,Ci=0,No=0,Lh=Pu(0),ti=0,Fp=null,xc=0,y0=0,eb=0,op=null,mo=null,tb=0,sf=1/0,rl=null,dy=!1,q1=null,mu=null,eg=!1,au=null,py=0,sp=0,K1=null,Pg=-1,Ag=0;function ro(){return Vr&6?Un():Pg!==-1?Pg:Pg=Un()}function gu(e){return e.mode&1?Vr&2&&Ci!==0?Ci&-Ci:Nj.transition!==null?(Ag===0&&(Ag=tC()),Ag):(e=tn,e!==0||(e=window.event,e=e===void 0?16:lC(e.type)),e):1}function Ws(e,t,i,a){if(50<sp)throw sp=0,K1=null,Error(At(185));Vp(e,i,a),(!(Vr&2)||e!==pi)&&(e===pi&&(!(Vr&2)&&(y0|=i),ti===4&&ou(e,Ci)),xo(e,a),i===1&&Vr===0&&!(t.mode&1)&&(sf=Un()+500,d0&&Au()))}function xo(e,t){var i=e.callbackNode;NR(e,t);var a=Jg(e,e===pi?Ci:0);if(a===0)i!==null&&dE(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&dE(i),t===1)e.tag===0?Dj(oT.bind(null,e)):AC(oT.bind(null,e)),jj(function(){!(Vr&6)&&Au()}),i=null;else{switch(rC(a)){case 1:i=Aw;break;case 4:i=QI;break;case 16:i=Kg;break;case 536870912:i=eC;break;default:i=Kg}i=PM(i,_M.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function _M(e,t){if(Pg=-1,Ag=0,Vr&6)throw Error(At(327));var i=e.callbackNode;if(Xh()&&e.callbackNode!==i)return null;var a=Jg(e,e===pi?Ci:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=my(e,a);else{t=a;var c=Vr;Vr|=2;var f=wM();(pi!==e||Ci!==t)&&(rl=null,sf=Un()+500,hc(e,t));do try{sz();break}catch(l){xM(e,l)}while(!0);Nw(),fy.current=f,Vr=c,Kn!==null?t=0:(pi=null,Ci=0,t=ti)}if(t!==0){if(t===2&&(c=S1(e),c!==0&&(a=c,t=J1(e,c))),t===1)throw i=Fp,hc(e,0),ou(e,a),xo(e,Un()),i;if(t===6)ou(e,a);else{if(c=e.current.alternate,!(a&30)&&!iz(c)&&(t=my(e,a),t===2&&(f=S1(e),f!==0&&(a=f,t=J1(e,f))),t===1))throw i=Fp,hc(e,0),ou(e,a),xo(e,Un()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:oc(e,mo,rl);break;case 3:if(ou(e,a),(a&130023424)===a&&(t=tb+500-Un(),10<t)){if(Jg(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){ro(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=k1(oc.bind(null,e,mo,rl),t);break}oc(e,mo,rl);break;case 4:if(ou(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var d=31-Gs(a);f=1<<d,d=t[d],d>c&&(c=d),a&=~f}if(a=c,a=Un()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*nz(a/1960))-a,10<a){e.timeoutHandle=k1(oc.bind(null,e,mo,rl),a);break}oc(e,mo,rl);break;case 5:oc(e,mo,rl);break;default:throw Error(At(329))}}}return xo(e,Un()),e.callbackNode===i?_M.bind(null,e):null}function J1(e,t){var i=op;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),e=my(e,t),e!==2&&(t=mo,mo=i,t!==null&&Y1(t)),e}function Y1(e){mo===null?mo=e:mo.push.apply(mo,e)}function iz(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],f=c.getSnapshot;c=c.value;try{if(!Zs(f(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ou(e,t){for(t&=~eb,t&=~y0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Gs(t),a=1<<i;e[i]=-1,t&=~a}}function oT(e){if(Vr&6)throw Error(At(327));Xh();var t=Jg(e,0);if(!(t&1))return xo(e,Un()),null;var i=my(e,t);if(e.tag!==0&&i===2){var a=S1(e);a!==0&&(t=a,i=J1(e,a))}if(i===1)throw i=Fp,hc(e,0),ou(e,t),xo(e,Un()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,oc(e,mo,rl),xo(e,Un()),null}function rb(e,t){var i=Vr;Vr|=1;try{return e(t)}finally{Vr=i,Vr===0&&(sf=Un()+500,d0&&Au())}}function wc(e){au!==null&&au.tag===0&&!(Vr&6)&&Xh();var t=Vr;Vr|=1;var i=ys.transition,a=tn;try{if(ys.transition=null,tn=1,e)return e()}finally{tn=a,ys.transition=i,Vr=t,!(Vr&6)&&Au()}}function nb(){No=Lh.current,vn(Lh)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Rj(i)),Kn!==null)for(i=Kn.return;i!==null;){var a=i;switch(Lw(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ry();break;case 3:nf(),vn(vo),vn(Zi),Hw();break;case 5:Ww(a);break;case 4:nf();break;case 13:vn(Mn);break;case 19:vn(Mn);break;case 10:$w(a.type._context);break;case 22:case 23:nb()}i=i.return}if(pi=e,Kn=e=yu(e.current,null),Ci=No=t,ti=0,Fp=null,eb=y0=xc=0,mo=op=null,uc!==null){for(t=0;t<uc.length;t++)if(i=uc[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,f=i.pending;if(f!==null){var d=f.next;f.next=c,a.next=d}i.pending=a}uc=null}return e}function xM(e,t){do{var i=Kn;try{if(Nw(),Sg.current=hy,cy){for(var a=On.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}cy=!1}if(_c=0,di=ei=On=null,np=!1,Mp=0,Qw.current=null,i===null||i.return===null){ti=1,Fp=t,Kn=null;break}e:{var f=e,d=i.return,l=i,w=t;if(t=Ci,l.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w,C=l,b=C.tag;if(!(C.mode&1)&&(b===0||b===11||b===15)){var T=C.alternate;T?(C.updateQueue=T.updateQueue,C.memoizedState=T.memoizedState,C.lanes=T.lanes):(C.updateQueue=null,C.memoizedState=null)}var R=HE(d);if(R!==null){R.flags&=-257,ZE(R,d,l,f,t),R.mode&1&&WE(f,E,t),t=R,w=E;var L=t.updateQueue;if(L===null){var j=new Set;j.add(w),t.updateQueue=j}else L.add(w);break e}else{if(!(t&1)){WE(f,E,t),ib();break e}w=Error(At(426))}}else if(En&&l.mode&1){var le=HE(d);if(le!==null){!(le.flags&65536)&&(le.flags|=256),ZE(le,d,l,f,t),Bw(of(w,l));break e}}f=w=of(w,l),ti!==4&&(ti=2),op===null?op=[f]:op.push(f),f=d;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var K=nM(f,w,t);BE(f,K);break e;case 1:l=w;var Z=f.type,G=f.stateNode;if(!(f.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(mu===null||!mu.has(G)))){f.flags|=65536,t&=-t,f.lanes|=t;var se=iM(f,l,t);BE(f,se);break e}}f=f.return}while(f!==null)}SM(i)}catch(q){t=q,Kn===i&&i!==null&&(Kn=i=i.return);continue}break}while(!0)}function wM(){var e=fy.current;return fy.current=hy,e===null?hy:e}function ib(){(ti===0||ti===3||ti===2)&&(ti=4),pi===null||!(xc&268435455)&&!(y0&268435455)||ou(pi,Ci)}function my(e,t){var i=Vr;Vr|=2;var a=wM();(pi!==e||Ci!==t)&&(rl=null,hc(e,t));do try{oz();break}catch(c){xM(e,c)}while(!0);if(Nw(),Vr=i,fy.current=a,Kn!==null)throw Error(At(261));return pi=null,Ci=0,ti}function oz(){for(;Kn!==null;)bM(Kn)}function sz(){for(;Kn!==null&&!kR();)bM(Kn)}function bM(e){var t=TM(e.alternate,e,No);e.memoizedProps=e.pendingProps,t===null?SM(e):Kn=t,Qw.current=null}function SM(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=Qj(i,t),i!==null){i.flags&=32767,Kn=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ti=6,Kn=null;return}}else if(i=Yj(i,t,No),i!==null){Kn=i;return}if(t=t.sibling,t!==null){Kn=t;return}Kn=t=e}while(t!==null);ti===0&&(ti=5)}function oc(e,t,i){var a=tn,c=ys.transition;try{ys.transition=null,tn=1,az(e,t,i,a)}finally{ys.transition=c,tn=a}return null}function az(e,t,i,a){do Xh();while(au!==null);if(Vr&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if($R(e,f),e===pi&&(Kn=pi=null,Ci=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||eg||(eg=!0,PM(Kg,function(){return Xh(),null})),f=(i.flags&15990)!==0,i.subtreeFlags&15990||f){f=ys.transition,ys.transition=null;var d=tn;tn=1;var l=Vr;Vr|=4,Qw.current=null,tz(e,i),yM(i,e),Aj(C1),Yg=!!I1,C1=I1=null,e.current=i,rz(i),OR(),Vr=l,tn=d,ys.transition=f}else e.current=i;if(eg&&(eg=!1,au=e,py=c),f=e.pendingLanes,f===0&&(mu=null),jR(i.stateNode),xo(e,Un()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(dy)throw dy=!1,e=q1,q1=null,e;return py&1&&e.tag!==0&&Xh(),f=e.pendingLanes,f&1?e===K1?sp++:(sp=0,K1=e):sp=0,Au(),null}function Xh(){if(au!==null){var e=rC(py),t=ys.transition,i=tn;try{if(ys.transition=null,tn=16>e?16:e,au===null)var a=!1;else{if(e=au,au=null,py=0,Vr&6)throw Error(At(331));var c=Vr;for(Vr|=4,tr=e.current;tr!==null;){var f=tr,d=f.child;if(tr.flags&16){var l=f.deletions;if(l!==null){for(var w=0;w<l.length;w++){var E=l[w];for(tr=E;tr!==null;){var C=tr;switch(C.tag){case 0:case 11:case 15:ip(8,C,f)}var b=C.child;if(b!==null)b.return=C,tr=b;else for(;tr!==null;){C=tr;var T=C.sibling,R=C.return;if(pM(C),C===E){tr=null;break}if(T!==null){T.return=R,tr=T;break}tr=R}}}var L=f.alternate;if(L!==null){var j=L.child;if(j!==null){L.child=null;do{var le=j.sibling;j.sibling=null,j=le}while(j!==null)}}tr=f}}if(f.subtreeFlags&2064&&d!==null)d.return=f,tr=d;else e:for(;tr!==null;){if(f=tr,f.flags&2048)switch(f.tag){case 0:case 11:case 15:ip(9,f,f.return)}var K=f.sibling;if(K!==null){K.return=f.return,tr=K;break e}tr=f.return}}var Z=e.current;for(tr=Z;tr!==null;){d=tr;var G=d.child;if(d.subtreeFlags&2064&&G!==null)G.return=d,tr=G;else e:for(d=Z;tr!==null;){if(l=tr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:g0(9,l)}}catch(q){Bn(l,l.return,q)}if(l===d){tr=null;break e}var se=l.sibling;if(se!==null){se.return=l.return,tr=se;break e}tr=l.return}}if(Vr=c,Au(),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(l0,e)}catch{}a=!0}return a}finally{tn=i,ys.transition=t}}return!1}function sT(e,t,i){t=of(i,t),t=nM(e,t,1),e=pu(e,t,1),t=ro(),e!==null&&(Vp(e,1,t),xo(e,t))}function Bn(e,t,i){if(e.tag===3)sT(e,e,i);else for(;t!==null;){if(t.tag===3){sT(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(mu===null||!mu.has(a))){e=of(i,e),e=iM(t,e,1),t=pu(t,e,1),e=ro(),t!==null&&(Vp(t,1,e),xo(t,e));break}}t=t.return}}function lz(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=ro(),e.pingedLanes|=e.suspendedLanes&i,pi===e&&(Ci&i)===i&&(ti===4||ti===3&&(Ci&130023424)===Ci&&500>Un()-tb?hc(e,0):eb|=i),xo(e,t)}function EM(e,t){t===0&&(e.mode&1?(t=Gm,Gm<<=1,!(Gm&130023424)&&(Gm=4194304)):t=1);var i=ro();e=fl(e,t),e!==null&&(Vp(e,t,i),xo(e,i))}function uz(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),EM(e,i)}function cz(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),EM(e,i)}var TM;TM=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||vo.current)yo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return yo=!1,Jj(e,t,i);yo=!!(e.flags&131072)}else yo=!1,En&&t.flags&1048576&&IC(t,oy,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Tg(e,t),e=t.pendingProps;var c=ef(t,Zi.current);Zh(t,i),c=Xw(null,t,a,e,c,i);var f=qw();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_o(a)?(f=!0,ny(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Vw(t),c.updater=p0,t.stateNode=c,c._reactInternals=t,B1(t,a,e,i),t=$1(null,t,a,!0,f,i)):(t.tag=0,En&&f&&zw(t),Yi(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Tg(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=fz(a),e=Ls(a,e),c){case 0:t=N1(null,t,a,e,i);break e;case 1:t=KE(null,t,a,e,i);break e;case 11:t=XE(null,t,a,e,i);break e;case 14:t=qE(null,t,a,Ls(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),N1(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),KE(e,t,a,c,i);case 3:e:{if(lM(t),e===null)throw Error(At(387));a=t.pendingProps,f=t.memoizedState,c=f.element,OC(e,t),ly(t,a,null,i);var d=t.memoizedState;if(a=d.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=of(Error(At(423)),t),t=JE(e,t,a,i,c);break e}else if(a!==c){c=of(Error(At(424)),t),t=JE(e,t,a,i,c);break e}else for(Go=du(t.stateNode.containerInfo.firstChild),Wo=t,En=!0,Ds=null,i=zC(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(tf(),a===c){t=dl(e,t,i);break e}Yi(e,t,a,i)}t=t.child}return t;case 5:return LC(t),e===null&&j1(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,d=c.children,M1(a,c)?d=null:f!==null&&M1(a,f)&&(t.flags|=32),aM(e,t),Yi(e,t,d,i),t.child;case 6:return e===null&&j1(t),null;case 13:return uM(e,t,i);case 4:return Gw(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=rf(t,null,a,i):Yi(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),XE(e,t,a,c,i);case 7:return Yi(e,t,t.pendingProps,i),t.child;case 8:return Yi(e,t,t.pendingProps.children,i),t.child;case 12:return Yi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,f=t.memoizedProps,d=c.value,dn(sy,a._currentValue),a._currentValue=d,f!==null)if(Zs(f.value,d)){if(f.children===c.children&&!vo.current){t=dl(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){d=f.child;for(var w=l.firstContext;w!==null;){if(w.context===a){if(f.tag===1){w=ul(-1,i&-i),w.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var C=E.pending;C===null?w.next=w:(w.next=C.next,C.next=w),E.pending=w}}f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),z1(f.return,i,t),l.lanes|=i;break}w=w.next}}else if(f.tag===10)d=f.type===t.type?null:f.child;else if(f.tag===18){if(d=f.return,d===null)throw Error(At(341));d.lanes|=i,l=d.alternate,l!==null&&(l.lanes|=i),z1(d,i,t),d=f.sibling}else d=f.child;if(d!==null)d.return=f;else for(d=f;d!==null;){if(d===t){d=null;break}if(f=d.sibling,f!==null){f.return=d.return,d=f;break}d=d.return}f=d}Yi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,Zh(t,i),c=vs(c),a=a(c),t.flags|=1,Yi(e,t,a,i),t.child;case 14:return a=t.type,c=Ls(a,t.pendingProps),c=Ls(a.type,c),qE(e,t,a,c,i);case 15:return oM(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),Tg(e,t),t.tag=1,_o(a)?(e=!0,ny(t)):e=!1,Zh(t,i),RC(t,a,c),B1(t,a,c,i),$1(null,t,a,!0,e,i);case 19:return cM(e,t,i);case 22:return sM(e,t,i)}throw Error(At(156,t.tag))};function PM(e,t){return YI(e,t)}function hz(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(e,t,i,a){return new hz(e,t,i,a)}function ob(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fz(e){if(typeof e=="function")return ob(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ew)return 11;if(e===Tw)return 14}return 2}function yu(e,t){var i=e.alternate;return i===null?(i=ms(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ig(e,t,i,a,c,f){var d=2;if(a=e,typeof e=="function")ob(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Ah:return fc(i.children,c,f,t);case Sw:d=8,c|=8;break;case l1:return e=ms(12,i,t,c|2),e.elementType=l1,e.lanes=f,e;case u1:return e=ms(13,i,t,c),e.elementType=u1,e.lanes=f,e;case c1:return e=ms(19,i,t,c),e.elementType=c1,e.lanes=f,e;case jI:return v0(i,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case FI:d=10;break e;case RI:d=9;break e;case Ew:d=11;break e;case Tw:d=14;break e;case eu:d=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=ms(d,i,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function fc(e,t,i,a){return e=ms(7,e,a,t),e.lanes=i,e}function v0(e,t,i,a){return e=ms(22,e,a,t),e.elementType=jI,e.lanes=i,e.stateNode={isHidden:!1},e}function o_(e,t,i){return e=ms(6,e,null,t),e.lanes=i,e}function s_(e,t,i){return t=ms(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dz(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nv(0),this.expirationTimes=Nv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nv(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function sb(e,t,i,a,c,f,d,l,w){return e=new dz(e,t,i,l,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=ms(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vw(f),e}function pz(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ph,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function AM(e){if(!e)return xu;e=e._reactInternals;e:{if(Ac(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_o(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(_o(i))return PC(e,i,t)}return t}function IM(e,t,i,a,c,f,d,l,w){return e=sb(i,a,!0,e,c,f,d,l,w),e.context=AM(null),i=e.current,a=ro(),c=gu(i),f=ul(a,c),f.callback=t??null,pu(i,f,c),e.current.lanes=c,Vp(e,c,a),xo(e,a),e}function _0(e,t,i,a){var c=t.current,f=ro(),d=gu(c);return i=AM(i),t.context===null?t.context=i:t.pendingContext=i,t=ul(f,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=pu(c,t,d),e!==null&&(Ws(e,c,d,f),bg(e,c,d)),d}function gy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function aT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function ab(e,t){aT(e,t),(e=e.alternate)&&aT(e,t)}function mz(){return null}var CM=typeof reportError=="function"?reportError:function(e){console.error(e)};function lb(e){this._internalRoot=e}x0.prototype.render=lb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));_0(e,t,null,null)};x0.prototype.unmount=lb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wc(function(){_0(null,e,null,null)}),t[hl]=null}};function x0(e){this._internalRoot=e}x0.prototype.unstable_scheduleHydration=function(e){if(e){var t=oC();e={blockedOn:null,target:e,priority:t};for(var i=0;i<iu.length&&t!==0&&t<iu[i].priority;i++);iu.splice(i,0,e),i===0&&aC(e)}};function ub(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function w0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lT(){}function gz(e,t,i,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var E=gy(d);f.call(E)}}var d=IM(t,a,e,0,null,!1,!1,"",lT);return e._reactRootContainer=d,e[hl]=d.current,Tp(e.nodeType===8?e.parentNode:e),wc(),d}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var E=gy(w);l.call(E)}}var w=sb(e,0,!1,null,null,!1,!1,"",lT);return e._reactRootContainer=w,e[hl]=w.current,Tp(e.nodeType===8?e.parentNode:e),wc(function(){_0(t,w,i,a)}),w}function b0(e,t,i,a,c){var f=i._reactRootContainer;if(f){var d=f;if(typeof c=="function"){var l=c;c=function(){var w=gy(d);l.call(w)}}_0(t,d,e,c)}else d=gz(i,t,e,c,a);return gy(d)}nC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Nd(t.pendingLanes);i!==0&&(Iw(t,i|1),xo(t,Un()),!(Vr&6)&&(sf=Un()+500,Au()))}break;case 13:wc(function(){var a=fl(e,1);if(a!==null){var c=ro();Ws(a,e,1,c)}}),ab(e,1)}};Cw=function(e){if(e.tag===13){var t=fl(e,134217728);if(t!==null){var i=ro();Ws(t,e,134217728,i)}ab(e,134217728)}};iC=function(e){if(e.tag===13){var t=gu(e),i=fl(e,t);if(i!==null){var a=ro();Ws(i,e,t,a)}ab(e,t)}};oC=function(){return tn};sC=function(e,t){var i=tn;try{return tn=e,t()}finally{tn=i}};x1=function(e,t,i){switch(t){case"input":if(d1(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=f0(a);if(!c)throw Error(At(90));LI(a),d1(a,c)}}}break;case"textarea":DI(e,i);break;case"select":t=i.value,t!=null&&Vh(e,!!i.multiple,t,!1)}};HI=rb;ZI=wc;var yz={usingClientEntryPoint:!1,Events:[Wp,kh,f0,GI,WI,rb]},Fd={findFiberByHostInstance:lc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vz={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=KI(e),e===null?null:e.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||mz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tg.isDisabled&&tg.supportsFiber)try{l0=tg.inject(vz),Ta=tg}catch{}}qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yz;qo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ub(t))throw Error(At(200));return pz(e,t,null,i)};qo.createRoot=function(e,t){if(!ub(e))throw Error(At(299));var i=!1,a="",c=CM;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=sb(e,1,!1,null,null,i,!1,a,c),e[hl]=t.current,Tp(e.nodeType===8?e.parentNode:e),new lb(t)};qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=KI(t),e=e===null?null:e.stateNode,e};qo.flushSync=function(e){return wc(e)};qo.hydrate=function(e,t,i){if(!w0(t))throw Error(At(200));return b0(null,e,t,!0,i)};qo.hydrateRoot=function(e,t,i){if(!ub(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,c=!1,f="",d=CM;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),t=IM(t,null,e,1,i??null,c,!1,f,d),e[hl]=t.current,Tp(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new x0(t)};qo.render=function(e,t,i){if(!w0(t))throw Error(At(200));return b0(null,e,t,!1,i)};qo.unmountComponentAtNode=function(e){if(!w0(e))throw Error(At(40));return e._reactRootContainer?(wc(function(){b0(null,null,e,!1,function(){e._reactRootContainer=null,e[hl]=null})}),!0):!1};qo.unstable_batchedUpdates=rb;qo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!w0(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return b0(e,t,i,!1,a)};qo.version="18.2.0-next-9e3b772b8-20220608";function MM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MM)}catch(e){console.error(e)}}MM(),II.exports=qo;var cb=II.exports;const _z=vf(cb);var kM={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.5.0/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})(Ns,function(){var i={},a={};function c(d,l,w){if(a[d]=w,d==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",C={};return a.shared(C),a.index(i,C),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}c("shared",["exports"],function(d){function l(o,r,s,h){return new(s||(s=Promise))(function(m,y){function x(F){try{I(h.next(F))}catch(V){y(V)}}function S(F){try{I(h.throw(F))}catch(V){y(V)}}function I(F){var V;F.done?m(F.value):(V=F.value,V instanceof s?V:new s(function(J){J(V)})).then(x,S)}I((h=h.apply(o,r||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var E=C;function C(o,r){this.x=o,this.y=r}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,s=o.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),s=Math.sin(o),h=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,r){var s=Math.cos(o),h=Math.sin(o),m=r.y+h*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-h*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(o){return o instanceof C?o:Array.isArray(o)?new C(o[0],o[1]):o};var b=w(E),T=R;function R(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}R.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=m/y}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var L=w(T);let j,le;function K(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function Z(){if(le==null&&(le=!1,K())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const m=4*h;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const s=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){le=!0;break}}}return le||!1}function G(o,r,s,h){const m=new L(o,r,s,h);return y=>m.solve(y)}const se=G(.25,.1,.25,1);function q(o,r,s){return Math.min(s,Math.max(r,o))}function W(o,r,s){const h=s-r,m=((o-r)%h+h)%h+r;return m===r?s:m}function P(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}let z=1;function D(o,r,s){const h={};for(const m in o)h[m]=r.call(this,o[m],m,o);return h}function ee(o,r,s){const h={};for(const m in o)r.call(this,o[m],m,o)&&(h[m]=o[m]);return h}function X(o){return Array.isArray(o)?o.map(X):typeof o=="object"&&o?D(o,X):o}const ye={};function ge(o){ye[o]||(typeof console<"u"&&console.warn(o),ye[o]=!0)}function fe(o,r,s){return(s.y-o.y)*(r.x-o.x)>(r.y-o.y)*(s.x-o.x)}function ie(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let he=null;function Y(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function de(o,r,s,h,m){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(o,{timestamp:0});try{const x=y==null?void 0:y.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),I=new Uint8ClampedArray(h*m*4);if(yield y.copyTo(I,function(F,V,J,ne,ce){const me=4*Math.max(-V,0),Te=(Math.max(0,J)-J)*ne*4+me,Re=4*ne,Ne=Math.max(0,V),Qe=Math.max(0,J);return{rect:{x:Ne,y:Qe,width:Math.min(F.width,V+ne)-Ne,height:Math.min(F.height,J+ce)-Qe},layout:[{offset:Te,stride:Re}]}}(o,r,s,h,m)),S)for(let F=0;F<I.length;F+=4){const V=I[F];I[F]=I[F+2],I[F+2]=V}return I}finally{y.close()}})}let be,Pe;const $e="AbortError";function Ce(){return new Error($e)}const Fe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function He(o){return Fe.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const We="global-dispatcher";class it extends Error{constructor(r,s,h,m){super(`AJAXError: ${s} (${r}): ${h}`),this.status=r,this.statusText=s,this.url=h,this.body=m}}const ct=()=>ie(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,vt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=He(o.url);if(h)return h(o,r);if(ie(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:We},r)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ct())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return l(this,void 0,void 0,function*(){const y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ct(),signal:m.signal});h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");const x=yield fetch(y);if(!x.ok){const F=yield x.blob();throw new it(x.status,x.statusText,h.url,F)}let S;S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const I=yield S;if(m.signal.aborted)throw Ce();return{data:I,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,r);if(ie(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:We},r)}var s;return function(h,m){return new Promise((y,x)=>{var S;const I=new XMLHttpRequest;I.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(I.responseType="arraybuffer");for(const F in h.headers)I.setRequestHeader(F,h.headers[F]);h.type==="json"&&(I.responseType="text",!((S=h.headers)===null||S===void 0)&&S.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=h.credentials==="include",I.onerror=()=>{x(new Error(I.statusText))},I.onload=()=>{if(!m.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let F=I.response;if(h.type==="json")try{F=JSON.parse(I.response)}catch(V){return void x(V)}y({data:F,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const F=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});x(new it(I.status,I.statusText,h.url,F))}},m.signal.addEventListener("abort",()=>{I.abort(),x(Ce())}),I.send(h.body)})}(o,r)};function Mt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function pt(o,r,s){s[o]&&s[o].indexOf(r)!==-1||(s[o]=s[o]||[],s[o].push(r))}function xt(o,r,s){if(s&&s[o]){const h=s[o].indexOf(r);h!==-1&&s[o].splice(h,1)}}class Wt{constructor(r,s={}){P(this,s),this.type=r}}class Ht extends Wt{constructor(r,s={}){super("error",P({error:r},s))}}class ar{on(r,s){return this._listeners=this._listeners||{},pt(r,s,this._listeners),this}off(r,s){return xt(r,s,this._listeners),xt(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},pt(r,s,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,s){typeof r=="string"&&(r=new Wt(r,s||{}));const h=r.type;if(this.listens(h)){r.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,r);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of y)xt(h,S,this._oneTimeListeners),S.call(this,r);const x=this._eventedParent;x&&(P(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof Ht&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const vr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function lr(o,r){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return vr.forEach(h=>{h in r&&(s[h]=r[h])}),s}function Vt(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let s=0;s<o.length;s++)if(!Vt(o[s],r[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const s in o)if(!Vt(o[s],r[s]))return!1;return!0}return o===r}function Se(o,r){o.push(r)}function N(o,r,s){Se(s,{command:"addSource",args:[o,r[o]]})}function B(o,r,s){Se(r,{command:"removeSource",args:[o]}),s[o]=!0}function _e(o,r,s,h){B(o,s,h),N(o,r,s)}function Xe(o,r,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Vt(o[s][h],r[s][h]))return!1;for(h in r[s])if(Object.prototype.hasOwnProperty.call(r[s],h)&&h!=="data"&&!Vt(o[s][h],r[s][h]))return!1;return!0}function tt(o,r,s,h,m,y){o=o||{},r=r||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],r[x])||s.push({command:y,args:[h,x,r[x],m]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],r[x])||s.push({command:y,args:[h,x,r[x],m]}))}function ht(o){return o.id}function ue(o,r){return o[r.id]=r,o}class k{constructor(r,s,h,m){this.message=(r?`${r}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function U(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}class Ee extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class Ve{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(r){return new Ve(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const nt={kind:"null"},Ge={kind:"number"},Et={kind:"string"},It={kind:"boolean"},gr={kind:"color"},br={kind:"object"},Rt={kind:"value"},Rn={kind:"collator"},ri={kind:"formatted"},Oi={kind:"padding"},Vn={kind:"resolvedImage"},Oe={kind:"variableAnchorOffsetCollection"};function ae(o,r){return{kind:"array",itemType:o,N:r}}function oe(o){if(o.kind==="array"){const r=oe(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const xe=[nt,Ge,Et,It,gr,ri,br,ae(Rt),Oi,Vn,Oe];function Ie(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ie(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const s of xe)if(!Ie(s,r))return null}}return`Expected ${oe(o)} but found ${oe(r)} instead.`}function ke(o,r){return r.some(s=>s.kind===o.kind)}function Be(o,r){return r.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Ke(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Le=.96422,st=.82521,ft=4/29,ot=6/29,Pt=3*ot*ot,qt=ot*ot*ot,rr=Math.PI/180,dr=180/Math.PI;function Sr(o){return(o%=360)<0&&(o+=360),o}function cr([o,r,s,h]){let m,y;const x=Jr((.2225045*(o=Ur(o))+.7168786*(r=Ur(r))+.0606169*(s=Ur(s)))/1);o===r&&r===s?m=y=x:(m=Jr((.4360747*o+.3850649*r+.1430804*s)/Le),y=Jr((.0139322*o+.0971045*r+.7141733*s)/st));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-y),h]}function Ur(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Jr(o){return o>qt?Math.pow(o,1/3):o/Pt+ft}function nn([o,r,s,h]){let m=(o+16)/116,y=isNaN(r)?m:m+r/500,x=isNaN(s)?m:m-s/200;return m=1*Nr(m),y=Le*Nr(y),x=st*Nr(x),[xr(3.1338561*y-1.6168667*m-.4906146*x),xr(-.9787684*y+1.9161415*m+.033454*x),xr(.0719453*y-.2289914*m+1.4052427*x),h]}function xr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Nr(o){return o>ot?o*o*o:Pt*(o-ft)}function Yr(o){return parseInt(o.padEnd(2,o),16)/255}function Pn(o,r){return Gn(r?o/100:o,0,1)}function Gn(o,r,s){return Math.min(Math.max(r,o),s)}function Wn(o){return!o.some(Number.isNaN)}const Qo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Mr{constructor(r,s,h,m=1,y=!0){this.r=r,this.g=s,this.b=h,this.a=m,y||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,s,h,m]))}static parse(r){if(r instanceof Mr)return r;if(typeof r!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Qo[h];if(m){const[x,S,I]=m;return[x/255,S/255,I/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Yr(h.slice(S,S+=x)),Yr(h.slice(S,S+=x)),Yr(h.slice(S,S+=x)),Yr(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,I,F,V,J,ne,ce,me,Te,Re,Ne,Qe]=x,Ze=[V||" ",ce||" ",Re].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const Ye=[F,ne,Te].join(""),lt=Ye==="%%%"?100:Ye===""?255:0;if(lt){const _t=[Gn(+I/lt,0,1),Gn(+J/lt,0,1),Gn(+me/lt,0,1),Ne?Pn(+Ne,Qe):1];if(Wn(_t))return _t}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,S,I,F,V,J,ne,ce,me]=y,Te=[I||" ",V||" ",ne].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Re=[+S,Gn(+F,0,100),Gn(+J,0,100),ce?Pn(+ce,me):1];if(Wn(Re))return function([Ne,Qe,Ze,Ye]){function lt(_t){const Ft=(_t+Ne/30)%12,nr=Qe*Math.min(Ze,1-Ze);return Ze-nr*Math.max(-1,Math.min(Ft-3,9-Ft,1))}return Ne=Sr(Ne),Qe/=100,Ze/=100,[lt(0),lt(8),lt(4),Ye]}(Re)}}}(r);return s?new Mr(...s,!1):void 0}get rgb(){const{r,g:s,b:h,a:m}=this,y=m||1/0;return this.overwriteGetter("rgb",[r/y,s/y,h/y,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,h,m,y]=cr(r),x=Math.sqrt(h*h+m*m);return[Math.round(1e4*x)?Sr(Math.atan2(m,h)*dr):NaN,x,s,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",cr(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,h,m]=this.rgb;return`rgba(${[r,s,h].map(y=>Math.round(255*y)).join(",")},${m})`}}Mr.black=new Mr(0,0,0,1),Mr.white=new Mr(1,1,1,1),Mr.transparent=new Mr(0,0,0,0),Mr.red=new Mr(1,0,0,1);class _l{constructor(r,s,h){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Er{constructor(r,s,h,m,y){this.text=r,this.image=s,this.scale=h,this.fontStack=m,this.textColor=y}}class An{constructor(r){this.sections=r}static fromString(r){return new An([new Er(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof An?r:An.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class gi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof gi)return r;if(typeof r=="number")return new gi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new gi(r)}}toString(){return JSON.stringify(this.values)}}const If=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class yi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof yi)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let s=0;s<r.length;s+=2){const h=r[s],m=r[s+1];if(typeof h!="string"||!If.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new yi(r)}}toString(){return JSON.stringify(this.values)}}class Hn{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Hn({name:r,available:!1}):null}}function xl(o,r,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,s,h]:[o,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vi(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Mr||o instanceof _l||o instanceof An||o instanceof gi||o instanceof yi||o instanceof Hn)return!0;if(Array.isArray(o)){for(const r of o)if(!vi(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!vi(o[r]))return!1;return!0}return!1}function xn(o){if(o===null)return nt;if(typeof o=="string")return Et;if(typeof o=="boolean")return It;if(typeof o=="number")return Ge;if(o instanceof Mr)return gr;if(o instanceof _l)return Rn;if(o instanceof An)return ri;if(o instanceof gi)return Oi;if(o instanceof yi)return Oe;if(o instanceof Hn)return Vn;if(Array.isArray(o)){const r=o.length;let s;for(const h of o){const m=xn(h);if(s){if(s===m)continue;s=Rt;break}s=m}return ae(s||Rt,r)}return br}function wo(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof Mr||o instanceof An||o instanceof gi||o instanceof yi||o instanceof Hn?o.toString():JSON.stringify(o)}class ws{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!vi(r[1]))return s.error("invalid value");const h=r[1];let m=xn(h);const y=s.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new ws(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class pn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const wl={string:Et,number:Ge,boolean:It,object:br};class wn{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let h,m=1;const y=r[0];if(y==="array"){let S,I;if(r.length>2){const F=r[1];if(typeof F!="string"||!(F in wl)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=wl[F],m++}else S=Rt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=r[2],m++}h=ae(S,I)}else{if(!wl[y])throw new Error(`Types doesn't contain name = ${y}`);h=wl[y]}const x=[];for(;m<r.length;m++){const S=s.parse(r[m],m,Rt);if(!S)return null;x.push(S)}return new wn(h,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(r);if(!Ie(this.type,xn(h)))return h;if(s===this.args.length-1)throw new pn(`Expected value to be of type ${oe(this.type)}, but found ${oe(xn(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Fa={"to-boolean":It,"to-color":gr,"to-number":Ge,"to-string":Et};class es{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[0];if(!Fa[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return s.error("Expected one argument.");const m=Fa[h],y=[];for(let x=1;x<r.length;x++){const S=s.parse(r[x],x,Rt);if(!S)return null;y.push(S)}return new es(m,y)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let s,h;for(const m of this.args){if(s=m.evaluate(r),h=null,s instanceof Mr)return s;if(typeof s=="string"){const y=r.parseColor(s);if(y)return y}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:xl(s[0],s[1],s[2],s[3]),!h))return new Mr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new pn(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(r);const m=gi.parse(s);if(m)return m}throw new pn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(r);const m=yi.parse(s);if(m)return m}throw new pn(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(r),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new pn(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return An.fromString(wo(this.args[0].evaluate(r)));case"resolvedImage":return Hn.fromString(wo(this.args[0].evaluate(r)));default:return wo(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const ku=["Unknown","Point","LineString","Polygon"];class Ra{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ku[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=Mr.parse(r)),s}}class ts{constructor(r,s,h=[],m,y=new Ve,x=[]){this.registry=r,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=y,this.errors=x,this.expectedType=m,this._isConstant=s}parse(r,s,h,m,y={}){return s?this.concat(s,h,m)._parse(r,y):this._parse(r,y)}_parse(r,s){function h(m,y,x){return x==="assert"?new wn(y,[m]):x==="coerce"?new es(y,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let x=y.parse(r,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,I=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||I.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(S.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(S,I))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof ws)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Ra;try{x=new ws(x.type,x.evaluate(S))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,h){const m=typeof r=="number"?this.path.concat(r):this.path,y=h?this.scope.concat(h):this.scope;return new ts(this.registry,this._isConstant,m,s||null,y,this.errors)}error(r,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Ee(h,r))}checkSubtype(r,s){const h=Ie(r,s);return h&&this.error(h),h}}class Ar{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let y=1;y<r.length-1;y+=2){const x=r[y];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",y);const S=s.parse(r[y+1],y+1);if(!S)return null;h.push([x,S])}const m=s.parse(r[r.length-1],r.length-1,s.expectedType,h);return m?new Ar(h,m):null}outputDefined(){return this.result.outputDefined()}}class bl{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=r[1];return s.scope.has(h)?new bl(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Ou{constructor(r,s,h){this.type=r,this.index=s,this.input=h}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ge),m=s.parse(r[2],2,ae(s.expectedType||Rt));return h&&m?new Ou(m.type.itemType,h,m):null}evaluate(r){const s=this.index.evaluate(r),h=this.input.evaluate(r);if(s<0)throw new pn(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new pn(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new pn(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Jn{constructor(r,s){this.type=It,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Rt);return h&&m?ke(h.type,[It,Et,Ge,nt,Rt])?new Jn(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${oe(h.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!Be(s,["boolean","string","number","null"]))throw new pn(`Expected first argument to be of type boolean, string, number or null, but found ${oe(xn(s))} instead.`);if(!Be(h,["string","array"]))throw new pn(`Expected second argument to be of type array or string, but found ${oe(xn(h))} instead.`);return h.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Sl{constructor(r,s,h){this.type=Ge,this.needle=r,this.haystack=s,this.fromIndex=h}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Rt);if(!h||!m)return null;if(!ke(h.type,[It,Et,Ge,nt,Rt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${oe(h.type)} instead`);if(r.length===4){const y=s.parse(r[3],3,Ge);return y?new Sl(h,m,y):null}return new Sl(h,m)}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!Be(s,["boolean","string","number","null"]))throw new pn(`Expected first argument to be of type boolean, string, number or null, but found ${oe(xn(s))} instead.`);if(!Be(h,["string","array"]))throw new pn(`Expected second argument to be of type array or string, but found ${oe(xn(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return h.indexOf(s,m)}return h.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class El{constructor(r,s,h,m,y,x){this.inputType=r,this.type=s,this.input=h,this.cases=m,this.outputs=y,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const y={},x=[];for(let F=2;F<r.length-1;F+=2){let V=r[F];const J=r[F+1];Array.isArray(V)||(V=[V]);const ne=s.concat(F);if(V.length===0)return ne.error("Expected at least one branch label.");for(const me of V){if(typeof me!="number"&&typeof me!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return ne.error("Numeric branch labels must be integer values.");if(h){if(ne.checkSubtype(h,xn(me)))return null}else h=xn(me);if(y[String(me)]!==void 0)return ne.error("Branch labels must be unique.");y[String(me)]=x.length}const ce=s.parse(J,F,m);if(!ce)return null;m=m||ce.type,x.push(ce)}const S=s.parse(r[1],1,Rt);if(!S)return null;const I=s.parse(r[r.length-1],r.length-1,m);return I?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new El(h,m,S,y,x,I):null}evaluate(r){const s=this.input.evaluate(r);return(xn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Tl{constructor(r,s,h){this.type=r,this.branches=s,this.otherwise=h}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let x=1;x<r.length-1;x+=2){const S=s.parse(r[x],x,It);if(!S)return null;const I=s.parse(r[x+1],x+1,h);if(!I)return null;m.push([S,I]),h=h||I.type}const y=s.parse(r[r.length-1],r.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new Tl(h,m,y)}evaluate(r){for(const[s,h]of this.branches)if(s.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,h]of this.branches)r(s),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Pl{constructor(r,s,h,m){this.type=r,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Rt),m=s.parse(r[2],2,Ge);if(!h||!m)return null;if(!ke(h.type,[ae(Rt),Et,Rt]))return s.error(`Expected first argument to be of type array or string, but found ${oe(h.type)} instead`);if(r.length===4){const y=s.parse(r[3],3,Ge);return y?new Pl(h.type,h,m,y):null}return new Pl(h.type,h,m)}evaluate(r){const s=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!Be(s,["string","array"]))throw new pn(`Expected first argument to be of type array or string, but found ${oe(xn(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return s.slice(h,m)}return s.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function ja(o,r){const s=o.length-1;let h,m,y=0,x=s,S=0;for(;y<=x;)if(S=Math.floor((y+x)/2),h=o[S],m=o[S+1],h<=r){if(S===s||r<m)return S;y=S+1}else{if(!(h>r))throw new pn("Input is not a number.");x=S-1}return 0}class bs{constructor(r,s,h){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[m,y]of h)this.labels.push(m),this.outputs.push(y)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(r[1],1,Ge);if(!h)return null;const m=[];let y=null;s.expectedType&&s.expectedType.kind!=="value"&&(y=s.expectedType);for(let x=1;x<r.length;x+=2){const S=x===1?-1/0:r[x],I=r[x+1],F=x,V=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(m.length&&m[m.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const J=s.parse(I,V,y);if(!J)return null;y=y||J.type,m.push([S,J])}return new bs(y,h,m)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const y=s.length;return m>=s[y-1]?h[y-1].evaluate(r):h[ja(s,m)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Fu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Fc=za;function za(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}za.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=m/y}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Cf=Fu(Fc);function _i(o,r,s){return o+s*(r-o)}function La(o,r,s){return o.map((h,m)=>_i(h,r[m],s))}const xi={number:_i,color:function(o,r,s,h="rgb"){switch(h){case"rgb":{const[m,y,x,S]=La(o.rgb,r.rgb,s);return new Mr(m,y,x,S,!1)}case"hcl":{const[m,y,x,S]=o.hcl,[I,F,V,J]=r.hcl;let ne,ce;if(isNaN(m)||isNaN(I))isNaN(m)?isNaN(I)?ne=NaN:(ne=I,x!==1&&x!==0||(ce=F)):(ne=m,V!==1&&V!==0||(ce=y));else{let Qe=I-m;I>m&&Qe>180?Qe-=360:I<m&&m-I>180&&(Qe+=360),ne=m+s*Qe}const[me,Te,Re,Ne]=function([Qe,Ze,Ye,lt]){return Qe=isNaN(Qe)?0:Qe*rr,nn([Ye,Math.cos(Qe)*Ze,Math.sin(Qe)*Ze,lt])}([ne,ce??_i(y,F,s),_i(x,V,s),_i(S,J,s)]);return new Mr(me,Te,Re,Ne,!1)}case"lab":{const[m,y,x,S]=nn(La(o.lab,r.lab,s));return new Mr(m,y,x,S,!1)}}},array:La,padding:function(o,r,s){return new gi(La(o.values,r.values,s))},variableAnchorOffsetCollection:function(o,r,s){const h=o.values,m=r.values;if(h.length!==m.length)throw new pn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const y=[];for(let x=0;x<h.length;x+=2){if(h[x]!==m[x])throw new pn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${m[x]}`);y.push(h[x]);const[S,I]=h[x+1],[F,V]=m[x+1];y.push([_i(S,F,s),_i(I,V,s)])}return new yi(y)}};class wi{constructor(r,s,h,m,y){this.type=r,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of y)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(r,s,h,m){let y=0;if(r.name==="exponential")y=Ba(s,r.base,h,m);else if(r.name==="linear")y=Ba(s,1,h,m);else if(r.name==="cubic-bezier"){const x=r.controlPoints;y=new Cf(x[0],x[1],x[2],x[3]).solve(Ba(s,1,h,m))}return y}static parse(r,s){let[h,m,y,...x]=r;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const F=m[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:F}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const F=m.slice(1);if(F.length!==4||F.some(V=>typeof V!="number"||V<0||V>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:F}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(y=s.parse(y,2,Ge),!y)return null;const S=[];let I=null;h==="interpolate-hcl"||h==="interpolate-lab"?I=gr:s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType);for(let F=0;F<x.length;F+=2){const V=x[F],J=x[F+1],ne=F+3,ce=F+4;if(typeof V!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(S.length&&S[S.length-1][0]>=V)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const me=s.parse(J,ce,I);if(!me)return null;I=I||me.type,S.push([V,me])}return Ke(I,Ge)||Ke(I,gr)||Ke(I,Oi)||Ke(I,Oe)||Ke(I,ae(Ge))?new wi(I,h,m,y,S):s.error(`Type ${oe(I)} is not interpolatable.`)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const y=s.length;if(m>=s[y-1])return h[y-1].evaluate(r);const x=ja(s,m),S=wi.interpolationFactor(this.interpolation,m,s[x],s[x+1]),I=h[x].evaluate(r),F=h[x+1].evaluate(r);switch(this.operator){case"interpolate":return xi[this.type.kind](I,F,S);case"interpolate-hcl":return xi.color(I,F,S,"hcl");case"interpolate-lab":return xi.color(I,F,S,"lab")}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ba(o,r,s,h){const m=h-s,y=o-s;return m===0?0:r===1?y/m:(Math.pow(r,y)-1)/(Math.pow(r,m)-1)}class Da{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const y=[];for(const S of r.slice(1)){const I=s.parse(S,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,y.push(I)}if(!h)throw new Error("No output type");const x=m&&y.some(S=>Ie(m,S.type));return new Da(x?Rt:h,y)}evaluate(r){let s,h=null,m=0;for(const y of this.args)if(m++,h=y.evaluate(r),h&&h instanceof Hn&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Rc(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function jc(o,r,s,h){return h.compare(r,s)===0}function Ss(o,r,s){const h=o!=="=="&&o!=="!=";return class OM{constructor(y,x,S){this.type=It,this.lhs=y,this.rhs=x,this.collator=S,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const S=y[0];let I=x.parse(y[1],1,Rt);if(!I)return null;if(!Rc(S,I.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${oe(I.type)}'.`);let F=x.parse(y[2],2,Rt);if(!F)return null;if(!Rc(S,F.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${oe(F.type)}'.`);if(I.type.kind!==F.type.kind&&I.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${oe(I.type)}' and '${oe(F.type)}'.`);h&&(I.type.kind==="value"&&F.type.kind!=="value"?I=new wn(F.type,[I]):I.type.kind!=="value"&&F.type.kind==="value"&&(F=new wn(I.type,[F])));let V=null;if(y.length===4){if(I.type.kind!=="string"&&F.type.kind!=="string"&&I.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(V=x.parse(y[3],3,Rn),!V)return null}return new OM(I,F,V)}evaluate(y){const x=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const I=xn(x),F=xn(S);if(I.kind!==F.kind||I.kind!=="string"&&I.kind!=="number")throw new pn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${I.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=xn(x),F=xn(S);if(I.kind!=="string"||F.kind!=="string")return r(y,x,S)}return this.collator?s(y,x,S,this.collator.evaluate(y)):r(y,x,S)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const Al=Ss("==",function(o,r,s){return r===s},jc),Mf=Ss("!=",function(o,r,s){return r!==s},function(o,r,s,h){return!jc(0,r,s,h)}),kf=Ss("<",function(o,r,s){return r<s},function(o,r,s,h){return h.compare(r,s)<0}),zc=Ss(">",function(o,r,s){return r>s},function(o,r,s,h){return h.compare(r,s)>0}),Lc=Ss("<=",function(o,r,s){return r<=s},function(o,r,s,h){return h.compare(r,s)<=0}),Bc=Ss(">=",function(o,r,s){return r>=s},function(o,r,s,h){return h.compare(r,s)>=0});class Il{constructor(r,s,h){this.type=Rn,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,It);if(!m)return null;const y=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,It);if(!y)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Et),!x)?null:new Il(m,y,x)}evaluate(r){return new _l(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Cl{constructor(r,s,h,m,y){this.type=Et,this.number=r,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Ge);if(!h)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=s.parse(m.locale,1,Et),!y))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,Et),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=s.parse(m["min-fraction-digits"],1,Ge),!S))return null;let I=null;return m["max-fraction-digits"]&&(I=s.parse(m["max-fraction-digits"],1,Ge),!I)?null:new Cl(h,y,x,S,I)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Ml{constructor(r){this.type=ri,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let y=!1;for(let x=1;x<=r.length-1;++x){const S=r[x];if(y&&typeof S=="object"&&!Array.isArray(S)){y=!1;let I=null;if(S["font-scale"]&&(I=s.parse(S["font-scale"],1,Ge),!I))return null;let F=null;if(S["text-font"]&&(F=s.parse(S["text-font"],1,ae(Et)),!F))return null;let V=null;if(S["text-color"]&&(V=s.parse(S["text-color"],1,gr),!V))return null;const J=m[m.length-1];J.scale=I,J.font=F,J.textColor=V}else{const I=s.parse(r[x],1,Rt);if(!I)return null;const F=I.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:I,scale:null,font:null,textColor:null})}}return new Ml(m)}evaluate(r){return new An(this.sections.map(s=>{const h=s.content.evaluate(r);return xn(h)===Vn?new Er("",h,null,null,null):new Er(wo(h),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}}class Ru{constructor(r){this.type=Vn,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Et);return h?new Ru(h):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),h=Hn.fromString(s);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(s)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class kl{constructor(r){this.type=Ge,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=s.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${oe(h.type)} instead.`):new kl(h):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new pn(`Expected value to be of type string or array, but found ${oe(xn(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const lo=8192;function ju(o,r){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(s*m*lo),Math.round(h*m*lo)]}function qs(o,r){const s=Math.pow(2,r.z);return[(m=(o[0]/lo+r.x)/s,360*m-180),(h=(o[1]/lo+r.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,m}function Ir(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Ks(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Of(o,r,s){const h=o[0]-r[0],m=o[1]-r[1],y=o[0]-s[0],x=o[1]-s[1];return h*x-y*m==0&&h*y<=0&&m*x<=0}function Js(o,r,s,h){return(m=[h[0]-s[0],h[1]-s[1]])[0]*(y=[r[0]-o[0],r[1]-o[1]])[1]-m[1]*y[0]!=0&&!(!Nc(o,r,s,h)||!Nc(s,h,o,r));var m,y}function Ff(o,r,s){for(const h of s)for(let m=0;m<h.length-1;++m)if(Js(o,r,h[m],h[m+1]))return!0;return!1}function Ys(o,r,s=!1){let h=!1;for(const S of r)for(let I=0;I<S.length-1;I++){if(Of(o,S[I],S[I+1]))return s;(y=S[I])[1]>(m=o)[1]!=(x=S[I+1])[1]>m[1]&&m[0]<(x[0]-y[0])*(m[1]-y[1])/(x[1]-y[1])+y[0]&&(h=!h)}var m,y,x;return h}function Rf(o,r){for(const s of r)if(Ys(o,s))return!0;return!1}function Dc(o,r){for(const s of o)if(!Ys(s,r))return!1;for(let s=0;s<o.length-1;++s)if(Ff(o[s],o[s+1],r))return!1;return!0}function jf(o,r){for(const s of r)if(Dc(o,s))return!0;return!1}function Nc(o,r,s,h){const m=h[0]-s[0],y=h[1]-s[1],x=(o[0]-s[0])*y-m*(o[1]-s[1]),S=(r[0]-s[0])*y-m*(r[1]-s[1]);return x>0&&S<0||x<0&&S>0}function Ol(o,r,s){const h=[];for(let m=0;m<o.length;m++){const y=[];for(let x=0;x<o[m].length;x++){const S=ju(o[m][x],s);Ir(r,S),y.push(S)}h.push(y)}return h}function Fl(o,r,s){const h=[];for(let m=0;m<o.length;m++){const y=Ol(o[m],r,s);h.push(y)}return h}function $c(o,r,s,h){if(o[0]<s[0]||o[0]>s[2]){const m=.5*h;let y=o[0]-s[0]>m?-h:s[0]-o[0]>m?h:0;y===0&&(y=o[0]-s[2]>m?-h:s[2]-o[0]>m?h:0),o[0]+=y}Ir(r,o)}function Uc(o,r,s,h){const m=Math.pow(2,h.z)*lo,y=[h.x*lo,h.y*lo],x=[];for(const S of o)for(const I of S){const F=[I.x+y[0],I.y+y[1]];$c(F,r,s,m),x.push(F)}return x}function Vc(o,r,s,h){const m=Math.pow(2,h.z)*lo,y=[h.x*lo,h.y*lo],x=[];for(const I of o){const F=[];for(const V of I){const J=[V.x+y[0],V.y+y[1]];Ir(r,J),F.push(J)}x.push(F)}if(r[2]-r[0]<=m/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const I of x)for(const F of I)$c(F,r,s,m)}var S;return x}class Es{constructor(r,s){this.type=It,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(vi(r[1])){const h=r[1];if(h.type==="FeatureCollection"){const m=[];for(const y of h.features){const{type:x,coordinates:S}=y.geometry;x==="Polygon"&&m.push(S),x==="MultiPolygon"&&m.push(...S)}if(m.length)return new Es(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Es(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Es(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Ol(h.coordinates,y,x),I=Uc(s.geometry(),m,y,x);if(!Ks(m,y))return!1;for(const F of I)if(!Ys(F,S))return!1}if(h.type==="MultiPolygon"){const S=Fl(h.coordinates,y,x),I=Uc(s.geometry(),m,y,x);if(!Ks(m,y))return!1;for(const F of I)if(!Rf(F,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Ol(h.coordinates,y,x),I=Vc(s.geometry(),m,y,x);if(!Ks(m,y))return!1;for(const F of I)if(!Dc(F,S))return!1}if(h.type==="MultiPolygon"){const S=Fl(h.coordinates,y,x),I=Vc(s.geometry(),m,y,x);if(!Ks(m,y))return!1;for(const F of I)if(!jf(F,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let zu=class{constructor(o=[],r=zf){if(this.data=o,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:r,compare:s}=this,h=r[o];for(;o>0;){const m=o-1>>1,y=r[m];if(s(h,y)>=0)break;r[o]=y,o=m}r[o]=h}_down(o){const{data:r,compare:s}=this,h=this.length>>1,m=r[o];for(;o<h;){let y=1+(o<<1),x=r[y];const S=y+1;if(S<this.length&&s(r[S],x)<0&&(y=S,x=r[S]),s(x,m)>=0)break;r[o]=x,o=y}r[o]=m}};function zf(o,r){return o<r?-1:o>r?1:0}function Lf(o,r,s,h,m){Gc(o,r,s,h||o.length-1,m||Rl)}function Gc(o,r,s,h,m){for(;h>s;){if(h-s>600){var y=h-s+1,x=r-s+1,S=Math.log(y),I=.5*Math.exp(2*S/3),F=.5*Math.sqrt(S*I*(y-I)/y)*(x-y/2<0?-1:1);Gc(o,r,Math.max(s,Math.floor(r-x*I/y+F)),Math.min(h,Math.floor(r+(y-x)*I/y+F)),m)}var V=o[r],J=s,ne=h;for(Na(o,s,r),m(o[h],V)>0&&Na(o,s,h);J<ne;){for(Na(o,J,ne),J++,ne--;m(o[J],V)<0;)J++;for(;m(o[ne],V)>0;)ne--}m(o[s],V)===0?Na(o,s,ne):Na(o,++ne,h),ne<=r&&(s=ne+1),r<=ne&&(h=ne-1)}}function Na(o,r,s){var h=o[r];o[r]=o[s],o[s]=h}function Rl(o,r){return o<r?-1:o>r?1:0}function jl(o,r){if(o.length<=1)return[o];const s=[];let h,m;for(const y of o){const x=Wc(y);x!==0&&(y.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(h&&s.push(h),h=[y]):h.push(y))}if(h&&s.push(h),r>1)for(let y=0;y<s.length;y++)s[y].length<=r||(Lf(s[y],r,1,s[y].length-1,Qs),s[y]=s[y].slice(0,r));return s}function Qs(o,r){return r.area-o.area}function Wc(o){let r=0;for(let s,h,m=0,y=o.length,x=y-1;m<y;x=m++)s=o[m],h=o[x],r+=(h.x-s.x)*(s.y+h.y);return r}const qi=1/298.257223563,Hc=qi*(2-qi),Zc=Math.PI/180;class Lu{constructor(r){const s=6378.137*Zc*1e3,h=Math.cos(r*Zc),m=1/(1-Hc*(1-h*h)),y=Math.sqrt(m);this.kx=s*y*h,this.ky=s*y*m*(1-Hc)}distance(r,s){const h=this.wrap(r[0]-s[0])*this.kx,m=(r[1]-s[1])*this.ky;return Math.sqrt(h*h+m*m)}pointOnLine(r,s){let h,m,y,x,S=1/0;for(let I=0;I<r.length-1;I++){let F=r[I][0],V=r[I][1],J=this.wrap(r[I+1][0]-F)*this.kx,ne=(r[I+1][1]-V)*this.ky,ce=0;J===0&&ne===0||(ce=(this.wrap(s[0]-F)*this.kx*J+(s[1]-V)*this.ky*ne)/(J*J+ne*ne),ce>1?(F=r[I+1][0],V=r[I+1][1]):ce>0&&(F+=J/this.kx*ce,V+=ne/this.ky*ce)),J=this.wrap(s[0]-F)*this.kx,ne=(s[1]-V)*this.ky;const me=J*J+ne*ne;me<S&&(S=me,h=F,m=V,y=I,x=ce)}return{point:[h,m],index:y,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Xc(o,r){return r[0]-o[0]}function ea(o){return o[1]-o[0]+1}function bo(o,r){return o[1]>=o[0]&&o[1]<r}function rs(o,r){if(o[0]>o[1])return[null,null];const s=ea(o);if(r){if(s===2)return[o,null];const m=Math.floor(s/2);return[[o[0],o[0]+m],[o[0]+m,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function Bu(o,r){if(!bo(r,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=r[0];h<=r[1];++h)Ir(s,o[h]);return s}function Du(o){const r=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)Ir(r,h);return r}function $a(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function zl(o,r,s){if(!$a(o)||!$a(r))return NaN;let h=0,m=0;return o[2]<r[0]&&(h=r[0]-o[2]),o[0]>r[2]&&(h=o[0]-r[2]),o[1]>r[3]&&(m=o[1]-r[3]),o[3]<r[1]&&(m=r[1]-o[3]),s.distance([0,0],[h,m])}function Gr(o,r,s){const h=s.pointOnLine(r,o);return s.distance(o,h.point)}function Nu(o,r,s,h,m){const y=Math.min(Gr(o,[s,h],m),Gr(r,[s,h],m)),x=Math.min(Gr(s,[o,r],m),Gr(h,[o,r],m));return Math.min(y,x)}function wr(o,r,s,h,m){if(!bo(r,o.length)||!bo(h,s.length))return 1/0;let y=1/0;for(let x=r[0];x<r[1];++x){const S=o[x],I=o[x+1];for(let F=h[0];F<h[1];++F){const V=s[F],J=s[F+1];if(Js(S,I,V,J))return 0;y=Math.min(y,Nu(S,I,V,J,m))}}return y}function ta(o,r,s,h,m){if(!bo(r,o.length)||!bo(h,s.length))return NaN;let y=1/0;for(let x=r[0];x<=r[1];++x)for(let S=h[0];S<=h[1];++S)if(y=Math.min(y,m.distance(o[x],s[S])),y===0)return y;return y}function Lr(o,r,s){if(Ys(o,r,!0))return 0;let h=1/0;for(const m of r){const y=m[0],x=m[m.length-1];if(y!==x&&(h=Math.min(h,Gr(o,[x,y],s)),h===0))return h;const S=s.pointOnLine(m,o);if(h=Math.min(h,s.distance(o,S.point)),h===0)return h}return h}function qr(o,r,s,h){if(!bo(r,o.length))return NaN;for(let y=r[0];y<=r[1];++y)if(Ys(o[y],s,!0))return 0;let m=1/0;for(let y=r[0];y<r[1];++y){const x=o[y],S=o[y+1];for(const I of s)for(let F=0,V=I.length,J=V-1;F<V;J=F++){const ne=I[J],ce=I[F];if(Js(x,S,ne,ce))return 0;m=Math.min(m,Nu(x,S,ne,ce,h))}}return m}function ra(o,r){for(const s of o)for(const h of s)if(Ys(h,r,!0))return!0;return!1}function Ua(o,r,s,h=1/0){const m=Du(o),y=Du(r);if(h!==1/0&&zl(m,y,s)>=h)return h;if(Ks(m,y)){if(ra(o,r))return 0}else if(ra(r,o))return 0;let x=1/0;for(const S of o)for(let I=0,F=S.length,V=F-1;I<F;V=I++){const J=S[V],ne=S[I];for(const ce of r)for(let me=0,Te=ce.length,Re=Te-1;me<Te;Re=me++){const Ne=ce[Re],Qe=ce[me];if(Js(J,ne,Ne,Qe))return 0;x=Math.min(x,Nu(J,ne,Ne,Qe,s))}}return x}function $u(o,r,s,h,m,y){if(!y)return;const x=zl(Bu(h,y),m,s);x<r&&o.push([x,y,[0,0]])}function So(o,r,s,h,m,y,x){if(!y||!x)return;const S=zl(Bu(h,y),Bu(m,x),s);S<r&&o.push([S,y,x])}function Eo(o,r,s,h,m=1/0){let y=Math.min(h.distance(o[0],s[0][0]),m);if(y===0)return y;const x=new zu([[0,[0,o.length-1],[0,0]]],Xc),S=Du(s);for(;x.length>0;){const I=x.pop();if(I[0]>=y)continue;const F=I[1],V=r?50:100;if(ea(F)<=V){if(!bo(F,o.length))return NaN;if(r){const J=qr(o,F,s,h);if(isNaN(J)||J===0)return J;y=Math.min(y,J)}else for(let J=F[0];J<=F[1];++J){const ne=Lr(o[J],s,h);if(y=Math.min(y,ne),y===0)return 0}}else{const J=rs(F,r);$u(x,y,h,o,S,J[0]),$u(x,y,h,o,S,J[1])}}return y}function jn(o,r,s,h,m,y=1/0){let x=Math.min(y,m.distance(o[0],s[0]));if(x===0)return x;const S=new zu([[0,[0,o.length-1],[0,s.length-1]]],Xc);for(;S.length>0;){const I=S.pop();if(I[0]>=x)continue;const F=I[1],V=I[2],J=r?50:100,ne=h?50:100;if(ea(F)<=J&&ea(V)<=ne){if(!bo(F,o.length)&&bo(V,s.length))return NaN;let ce;if(r&&h)ce=wr(o,F,s,V,m),x=Math.min(x,ce);else if(r&&!h){const me=o.slice(F[0],F[1]+1);for(let Te=V[0];Te<=V[1];++Te)if(ce=Gr(s[Te],me,m),x=Math.min(x,ce),x===0)return x}else if(!r&&h){const me=s.slice(V[0],V[1]+1);for(let Te=F[0];Te<=F[1];++Te)if(ce=Gr(o[Te],me,m),x=Math.min(x,ce),x===0)return x}else ce=ta(o,F,s,V,m),x=Math.min(x,ce)}else{const ce=rs(F,r),me=rs(V,h);So(S,x,m,o,s,ce[0],me[0]),So(S,x,m,o,s,ce[0],me[1]),So(S,x,m,o,s,ce[1],me[0]),So(S,x,m,o,s,ce[1],me[1])}}return x}function To(o){return o.type==="MultiPolygon"?o.coordinates.map(r=>({type:"Polygon",coordinates:r})):o.type==="MultiLineString"?o.coordinates.map(r=>({type:"LineString",coordinates:r})):o.type==="MultiPoint"?o.coordinates.map(r=>({type:"Point",coordinates:r})):[o]}class uo{constructor(r,s){this.type=Ge,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(vi(r[1])){const h=r[1];if(h.type==="FeatureCollection")return new uo(h,h.features.map(m=>To(m.geometry)).flat());if(h.type==="Feature")return new uo(h,To(h.geometry));if("type"in h&&"coordinates"in h)return new uo(h,To(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=s.geometry(),y=m.flat().map(I=>qs([I.x,I.y],s.canonical));if(m.length===0)return NaN;const x=new Lu(y[0][1]);let S=1/0;for(const I of h){switch(I.type){case"Point":S=Math.min(S,jn(y,!1,[I.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,jn(y,!1,I.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Eo(y,!1,I.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=s.geometry(),y=m.flat().map(I=>qs([I.x,I.y],s.canonical));if(m.length===0)return NaN;const x=new Lu(y[0][1]);let S=1/0;for(const I of h){switch(I.type){case"Point":S=Math.min(S,jn(y,!0,[I.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,jn(y,!0,I.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Eo(y,!0,I.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="Polygon")return function(s,h){const m=s.geometry();if(m.length===0||m[0].length===0)return NaN;const y=jl(m,0).map(I=>I.map(F=>F.map(V=>qs([V.x,V.y],s.canonical)))),x=new Lu(y[0][0][0][1]);let S=1/0;for(const I of h)for(const F of y){switch(I.type){case"Point":S=Math.min(S,Eo([I.coordinates],!1,F,x,S));break;case"LineString":S=Math.min(S,Eo(I.coordinates,!0,F,x,S));break;case"Polygon":S=Math.min(S,Ua(F,I.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Po={"==":Al,"!=":Mf,">":zc,"<":kf,">=":Bc,"<=":Lc,array:wn,at:Ou,boolean:wn,case:Tl,coalesce:Da,collator:Il,format:Ml,image:Ru,in:Jn,"index-of":Sl,interpolate:wi,"interpolate-hcl":wi,"interpolate-lab":wi,length:kl,let:Ar,literal:ws,match:El,number:wn,"number-format":Cl,object:wn,slice:Pl,step:bs,string:wn,"to-boolean":es,"to-color":es,"to-number":es,"to-string":es,var:bl,within:Es,distance:uo};class bi{constructor(r,s,h,m){this.name=r,this.type=s,this._evaluate=h,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const h=r[0],m=bi.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([F])=>!Array.isArray(F)||F.length===r.length-1);let I=null;for(const[F,V]of S){I=new ts(s.registry,Va,s.path,null,s.scope);const J=[];let ne=!1;for(let ce=1;ce<r.length;ce++){const me=r[ce],Te=Array.isArray(F)?F[ce-1]:F.type,Re=I.parse(me,1+J.length,Te);if(!Re){ne=!0;break}J.push(Re)}if(!ne)if(Array.isArray(F)&&F.length!==J.length)I.error(`Expected ${F.length} arguments, but found ${J.length} instead.`);else{for(let ce=0;ce<J.length;ce++){const me=Array.isArray(F)?F[ce]:F.type,Te=J[ce];I.concat(ce+1).checkSubtype(me,Te.type)}if(I.errors.length===0)return new bi(h,y,V,J)}}if(S.length===1)s.errors.push(...I.errors);else{const F=(S.length?S:x).map(([J])=>{return ne=J,Array.isArray(ne)?`(${ne.map(oe).join(", ")})`:`(${oe(ne.type)}...)`;var ne}).join(" | "),V=[];for(let J=1;J<r.length;J++){const ne=s.parse(r[J],1+V.length);if(!ne)return null;V.push(oe(ne.type))}s.error(`Expected arguments of type ${F}, but found (${V.join(", ")}) instead.`)}return null}static register(r,s){bi.definitions=s;for(const h in s)r[h]=bi}}function na(o,[r,s,h,m]){r=r.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const y=m?m.evaluate(o):1,x=xl(r,s,h,y);if(x)throw new pn(x);return new Mr(r/255,s/255,h/255,y,!1)}function Ts(o,r){return o in r}function Si(o,r){const s=r[o];return s===void 0?null:s}function Fi(o){return{type:o}}function Va(o){if(o instanceof bl)return Va(o.boundExpression);if(o instanceof bi&&o.name==="error"||o instanceof Il||o instanceof Es||o instanceof uo)return!1;const r=o instanceof es||o instanceof wn;let s=!0;return o.eachChild(h=>{s=r?s&&Va(h):s&&h instanceof ws}),!!s&&Ps(o)&&Ga(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ps(o){if(o instanceof bi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Es||o instanceof uo)return!1;let r=!0;return o.eachChild(s=>{r&&!Ps(s)&&(r=!1)}),r}function ns(o){if(o instanceof bi&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(s=>{r&&!ns(s)&&(r=!1)}),r}function Ga(o,r){if(o instanceof bi&&r.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!Ga(h,r)&&(s=!1)}),s}function Uu(o){return{result:"success",value:o}}function As(o){return{result:"error",value:o}}function is(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function co(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Is(o){return!!o.expression&&o.expression.interpolated}function kr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function ia(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Ll(o){return o}function Vu(o,r){const s=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),y=o.type||(Is(r)?"exponential":"interval");if(s||r.type==="padding"){const V=s?Mr.parse:gi.parse;(o=U({},o)).stops&&(o.stops=o.stops.map(J=>[J[0],V(J[1])])),o.default=V(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,I,F;if(y==="exponential")S=ve;else if(y==="interval")S=H;else if(y==="categorical"){S=Wa,I=Object.create(null);for(const V of o.stops)I[V[0]]=V[1];F=typeof o.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);S=Ue}if(h){const V={},J=[];for(let me=0;me<o.stops.length;me++){const Te=o.stops[me],Re=Te[0].zoom;V[Re]===void 0&&(V[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},J.push(Re)),V[Re].stops.push([Te[0].value,Te[1]])}const ne=[];for(const me of J)ne.push([V[me].zoom,Vu(V[me],r)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:wi.interpolationFactor.bind(void 0,ce),zoomStops:ne.map(me=>me[0]),evaluate:({zoom:me},Te)=>ve({stops:ne,base:o.base},r,me).evaluate(me,Te)}}if(m){const V=y==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:wi.interpolationFactor.bind(void 0,V),zoomStops:o.stops.map(J=>J[0]),evaluate:({zoom:J})=>S(o,r,J,I,F)}}return{kind:"source",evaluate(V,J){const ne=J&&J.properties?J.properties[o.property]:void 0;return ne===void 0?os(o.default,r.default):S(o,r,ne,I,F)}}}function os(o,r,s){return o!==void 0?o:r!==void 0?r:s!==void 0?s:void 0}function Wa(o,r,s,h,m){return os(typeof s===m?h[s]:void 0,o.default,r.default)}function H(o,r,s){if(kr(s)!=="number")return os(o.default,r.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const m=ja(o.stops.map(y=>y[0]),s);return o.stops[m][1]}function ve(o,r,s){const h=o.base!==void 0?o.base:1;if(kr(s)!=="number")return os(o.default,r.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const y=ja(o.stops.map(V=>V[0]),s),x=function(V,J,ne,ce){const me=ce-ne,Te=V-ne;return me===0?0:J===1?Te/me:(Math.pow(J,Te)-1)/(Math.pow(J,me)-1)}(s,h,o.stops[y][0],o.stops[y+1][0]),S=o.stops[y][1],I=o.stops[y+1][1],F=xi[r.type]||Ll;return typeof S.evaluate=="function"?{evaluate(...V){const J=S.evaluate.apply(void 0,V),ne=I.evaluate.apply(void 0,V);if(J!==void 0&&ne!==void 0)return F(J,ne,x,o.colorSpace)}}:F(S,I,x,o.colorSpace)}function Ue(o,r,s){switch(r.type){case"color":s=Mr.parse(s);break;case"formatted":s=An.fromString(s.toString());break;case"resolvedImage":s=Hn.fromString(s.toString());break;case"padding":s=gi.parse(s);break;default:kr(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return os(s,o.default,r.default)}bi.register(Po,{error:[{kind:"error"},[Et],(o,[r])=>{throw new pn(r.evaluate(o))}],typeof:[Et,[Rt],(o,[r])=>oe(xn(r.evaluate(o)))],"to-rgba":[ae(Ge,4),[gr],(o,[r])=>{const[s,h,m,y]=r.evaluate(o).rgb;return[255*s,255*h,255*m,y]}],rgb:[gr,[Ge,Ge,Ge],na],rgba:[gr,[Ge,Ge,Ge,Ge],na],has:{type:It,overloads:[[[Et],(o,[r])=>Ts(r.evaluate(o),o.properties())],[[Et,br],(o,[r,s])=>Ts(r.evaluate(o),s.evaluate(o))]]},get:{type:Rt,overloads:[[[Et],(o,[r])=>Si(r.evaluate(o),o.properties())],[[Et,br],(o,[r,s])=>Si(r.evaluate(o),s.evaluate(o))]]},"feature-state":[Rt,[Et],(o,[r])=>Si(r.evaluate(o),o.featureState||{})],properties:[br,[],o=>o.properties()],"geometry-type":[Et,[],o=>o.geometryType()],id:[Rt,[],o=>o.id()],zoom:[Ge,[],o=>o.globals.zoom],"heatmap-density":[Ge,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ge,[],o=>o.globals.lineProgress||0],accumulated:[Rt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ge,Fi(Ge),(o,r)=>{let s=0;for(const h of r)s+=h.evaluate(o);return s}],"*":[Ge,Fi(Ge),(o,r)=>{let s=1;for(const h of r)s*=h.evaluate(o);return s}],"-":{type:Ge,overloads:[[[Ge,Ge],(o,[r,s])=>r.evaluate(o)-s.evaluate(o)],[[Ge],(o,[r])=>-r.evaluate(o)]]},"/":[Ge,[Ge,Ge],(o,[r,s])=>r.evaluate(o)/s.evaluate(o)],"%":[Ge,[Ge,Ge],(o,[r,s])=>r.evaluate(o)%s.evaluate(o)],ln2:[Ge,[],()=>Math.LN2],pi:[Ge,[],()=>Math.PI],e:[Ge,[],()=>Math.E],"^":[Ge,[Ge,Ge],(o,[r,s])=>Math.pow(r.evaluate(o),s.evaluate(o))],sqrt:[Ge,[Ge],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ge,[Ge],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ge,[Ge],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ge,[Ge],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ge,[Ge],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ge,[Ge],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ge,[Ge],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ge,Fi(Ge),(o,r)=>Math.min(...r.map(s=>s.evaluate(o)))],max:[Ge,Fi(Ge),(o,r)=>Math.max(...r.map(s=>s.evaluate(o)))],abs:[Ge,[Ge],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ge,[Ge],(o,[r])=>{const s=r.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ge,[Ge],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ge,[Ge],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[It,[Et,Rt],(o,[r,s])=>o.properties()[r.value]===s.value],"filter-id-==":[It,[Rt],(o,[r])=>o.id()===r.value],"filter-type-==":[It,[Et],(o,[r])=>o.geometryType()===r.value],"filter-<":[It,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[It,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<h}],"filter->":[It,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[It,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>h}],"filter-<=":[It,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[It,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<=h}],"filter->=":[It,[Et,Rt],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[It,[Rt],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>=h}],"filter-has":[It,[Rt],(o,[r])=>r.value in o.properties()],"filter-has-id":[It,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[It,[ae(Et)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[It,[ae(Rt)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[It,[Et,ae(Rt)],(o,[r,s])=>s.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[It,[Et,ae(Rt)],(o,[r,s])=>function(h,m,y,x){for(;y<=x;){const S=y+x>>1;if(m[S]===h)return!0;m[S]>h?x=S-1:y=S+1}return!1}(o.properties()[r.value],s.value,0,s.value.length-1)],all:{type:It,overloads:[[[It,It],(o,[r,s])=>r.evaluate(o)&&s.evaluate(o)],[Fi(It),(o,r)=>{for(const s of r)if(!s.evaluate(o))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(o,[r,s])=>r.evaluate(o)||s.evaluate(o)],[Fi(It),(o,r)=>{for(const s of r)if(s.evaluate(o))return!0;return!1}]]},"!":[It,[It],(o,[r])=>!r.evaluate(o)],"is-supported-script":[It,[Et],(o,[r])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(r.evaluate(o))}],upcase:[Et,[Et],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Et,[Et],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Et,Fi(Rt),(o,r)=>r.map(s=>wo(s.evaluate(o))).join("")],"resolved-locale":[Et,[Rn],(o,[r])=>r.evaluate(o).resolvedLocale()]});class ut{constructor(r,s){var h;this.expression=r,this._warningHistory={},this._evaluator=new Ra,this._defaultValue=s?(h=s).type==="color"&&ia(h.default)?new Mr(0,0,0,0):h.type==="color"?Mr.parse(h.default)||null:h.type==="padding"?gi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?yi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,s,h,m,y,x){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new pn(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function kt(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Po}function St(o,r){const s=new ts(Po,Va,[],r?function(m){const y={color:gr,string:Et,number:Ge,enum:Et,boolean:It,formatted:ri,padding:Oi,resolvedImage:Vn,variableAnchorOffsetCollection:Oe};return m.type==="array"?ae(y[m.value]||Rt,m.length):y[m.type]}(r):void 0),h=s.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Uu(new ut(h,r)):As(s.errors)}class Zt{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!ns(s.expression)}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,y,x)}evaluate(r,s,h,m,y,x){return this._styleExpression.evaluate(r,s,h,m,y,x)}}class Jt{constructor(r,s,h,m){this.kind=r,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!ns(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,s,h,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,y,x)}evaluate(r,s,h,m,y,x){return this._styleExpression.evaluate(r,s,h,m,y,x)}interpolationFactor(r,s,h){return this.interpolationType?wi.interpolationFactor(this.interpolationType,r,s,h):0}}function yr(o,r){const s=St(o,r);if(s.result==="error")return s;const h=s.value.expression,m=Ps(h);if(!m&&!is(r))return As([new Ee("","data expressions not supported")]);const y=Ga(h,["zoom"]);if(!y&&!co(r))return As([new Ee("","zoom expressions not supported")]);const x=Or(h);return x||y?x instanceof Ee?As([x]):x instanceof wi&&!Is(r)?As([new Ee("",'"interpolate" expressions cannot be used with this property')]):Uu(x?new Jt(m?"camera":"composite",s.value,x.labels,x instanceof wi?x.interpolation:void 0):new Zt(m?"constant":"source",s.value)):As([new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Br{constructor(r,s){this._parameters=r,this._specification=s,U(this,Vu(this._parameters,this._specification))}static deserialize(r){return new Br(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Or(o){let r=null;if(o instanceof Ar)r=Or(o.result);else if(o instanceof Da){for(const s of o.args)if(r=Or(s),r)break}else(o instanceof bs||o instanceof wi)&&o.input instanceof bi&&o.input.name==="zoom"&&(r=o);return r instanceof Ee||o.eachChild(s=>{const h=Or(s);h instanceof Ee?r=h:!r&&h?r=new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Ee("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Wr(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Wr(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const on={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $r(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Wr(o)||(o=Ri(o));const r=St(o,on);if(r.result==="error")throw new Error(r.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>r.value.evaluate(s,h,{},m),needGeometry:ho(o)}}function mn(o,r){return o<r?-1:o>r?1:0}function ho(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let r=1;r<o.length;r++)if(ho(o[r]))return!0;return!1}function Ri(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Ao(o[1],o[2],"=="):r==="!="?Io(Ao(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ao(o[1],o[2],r):r==="any"?(s=o.slice(1),["any"].concat(s.map(Ri))):r==="all"?["all"].concat(o.slice(1).map(Ri)):r==="none"?["all"].concat(o.slice(1).map(Ri).map(Io)):r==="in"?Cs(o[1],o.slice(2)):r==="!in"?Io(Cs(o[1],o.slice(2))):r==="has"?oa(o[1]):r!=="!has"||Io(oa(o[1]));var s}function Ao(o,r,s){switch(o){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,o,r]}}function Cs(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",o,["literal",r.sort(mn)]]:["filter-in-small",o,["literal",r]]}}function oa(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Io(o){return["!",o]}function Bf(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const y of o)m+=`${Bf(y)},`;return`${m}]`}const s=Object.keys(o).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${Bf(o[s[m]])},`;return`${h}}`}function Df(o){let r="";for(const s of vr)r+=`/${Bf(o[s])}`;return r}function nm(o){const r=o.value;return r?[new k(o.key,r,"constants have been deprecated as of v8")]:[]}function sn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ha(o){if(Array.isArray(o))return o.map(Ha);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const s in o)r[s]=Ha(o[s]);return r}return sn(o)}function ji(o){const r=o.key,s=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},y=o.style,x=o.styleSpec,S=o.validateSpec;let I=[];const F=kr(s);if(F!=="object")return[new k(r,s,`object expected, ${F} found`)];for(const V in s){const J=V.split(".")[0],ne=h[J]||h["*"];let ce;if(m[J])ce=m[J];else if(h[J])ce=S;else if(m["*"])ce=m["*"];else{if(!h["*"]){I.push(new k(r,s[V],`unknown property "${V}"`));continue}ce=S}I=I.concat(ce({key:(r&&`${r}.`)+V,value:s[V],valueSpec:ne,style:y,styleSpec:x,object:s,objectKey:V,validateSpec:S},s))}for(const V in h)m[V]||h[V].required&&h[V].default===void 0&&s[V]===void 0&&I.push(new k(r,s,`missing required property "${V}"`));return I}function qc(o){const r=o.value,s=o.valueSpec,h=o.style,m=o.styleSpec,y=o.key,x=o.arrayElementValidator||o.validateSpec;if(kr(r)!=="array")return[new k(y,r,`array expected, ${kr(r)} found`)];if(s.length&&r.length!==s.length)return[new k(y,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new k(y,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),kr(s.value)==="object"&&(S=s.value);let I=[];for(let F=0;F<r.length;F++)I=I.concat(x({array:r,arrayIndex:F,value:r[F],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${y}[${F}]`}));return I}function Gu(o){const r=o.key,s=o.value,h=o.valueSpec;let m=kr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new k(r,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new k(r,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new k(r,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Nf(o){const r=o.valueSpec,s=sn(o.value.type);let h,m,y,x={};const S=s!=="categorical"&&o.value.property===void 0,I=!S,F=kr(o.value.stops)==="array"&&kr(o.value.stops[0])==="array"&&kr(o.value.stops[0][0])==="object",V=ji({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ce){if(s==="identity")return[new k(ce.key,ce.value,'identity function may not have a "stops" property')];let me=[];const Te=ce.value;return me=me.concat(qc({key:ce.key,value:Te,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:J})),kr(Te)==="array"&&Te.length===0&&me.push(new k(ce.key,Te,"array must have at least one stop")),me},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:r,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return s==="identity"&&S&&V.push(new k(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||V.push(new k(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Is(o.valueSpec)&&V.push(new k(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(I&&!is(o.valueSpec)?V.push(new k(o.key,o.value,"property functions not supported")):S&&!co(o.valueSpec)&&V.push(new k(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||V.push(new k(o.key,o.value,'"property" property is required')),V;function J(ce){let me=[];const Te=ce.value,Re=ce.key;if(kr(Te)!=="array")return[new k(Re,Te,`array expected, ${kr(Te)} found`)];if(Te.length!==2)return[new k(Re,Te,`array length 2 expected, length ${Te.length} found`)];if(F){if(kr(Te[0])!=="object")return[new k(Re,Te,`object expected, ${kr(Te[0])} found`)];if(Te[0].zoom===void 0)return[new k(Re,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new k(Re,Te,"object stop key must have value")];if(y&&y>sn(Te[0].zoom))return[new k(Re,Te[0].zoom,"stop zoom values must appear in ascending order")];sn(Te[0].zoom)!==y&&(y=sn(Te[0].zoom),m=void 0,x={}),me=me.concat(ji({key:`${Re}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Gu,value:ne}}))}else me=me.concat(ne({key:`${Re}[0]`,value:Te[0],valueSpec:{},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},Te));return kt(Ha(Te[1]))?me.concat([new k(`${Re}[1]`,Te[1],"expressions are not allowed in function stops.")]):me.concat(ce.validateSpec({key:`${Re}[1]`,value:Te[1],valueSpec:r,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function ne(ce,me){const Te=kr(ce.value),Re=sn(ce.value),Ne=ce.value!==null?ce.value:me;if(h){if(Te!==h)return[new k(ce.key,Ne,`${Te} stop domain type must match previous stop domain type ${h}`)]}else h=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new k(ce.key,Ne,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&s!=="categorical"){let Qe=`number expected, ${Te} found`;return is(r)&&s===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new k(ce.key,Ne,Qe)]}return s!=="categorical"||Te!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&Te==="number"&&m!==void 0&&Re<m?[new k(ce.key,Ne,"stop domain values must appear in ascending order")]:(m=Re,s==="categorical"&&Re in x?[new k(ce.key,Ne,"stop domain values must be unique")]:(x[Re]=!0,[])):[new k(ce.key,Ne,`integer expected, found ${Re}`)]}}function Za(o){const r=(o.expressionContext==="property"?yr:St)(Ha(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new k(`${o.key}${h.key}`,o.value,h.message));const s=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new k(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ns(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ns(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Ga(s,["zoom","feature-state"]))return[new k(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Ps(s))return[new k(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wu(o){const r=o.key,s=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(sn(s))===-1&&m.push(new k(r,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(sn(s))===-1&&m.push(new k(r,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function Hu(o){return Wr(Ha(o.value))?Za(U({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zu(o)}function Zu(o){const r=o.value,s=o.key;if(kr(r)!=="array")return[new k(s,r,`array expected, ${kr(r)} found`)];const h=o.styleSpec;let m,y=[];if(r.length<1)return[new k(s,r,"filter array must have at least 1 element")];switch(y=y.concat(Wu({key:`${s}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),sn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&sn(r[1])==="$type"&&y.push(new k(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&y.push(new k(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=kr(r[1]),m!=="string"&&y.push(new k(`${s}[1]`,r[1],`string expected, ${m} found`)));for(let x=2;x<r.length;x++)m=kr(r[x]),sn(r[1])==="$type"?y=y.concat(Wu({key:`${s}[${x}]`,value:r[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new k(`${s}[${x}]`,r[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)y=y.concat(Zu({key:`${s}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=kr(r[1]),r.length!==2?y.push(new k(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new k(`${s}[1]`,r[1],`string expected, ${m} found`))}return y}function $f(o,r){const s=o.key,h=o.validateSpec,m=o.style,y=o.styleSpec,x=o.value,S=o.objectKey,I=y[`${r}_${o.layerType}`];if(!I)return[];const F=S.match(/^(.*)-transition$/);if(r==="paint"&&F&&I[F[1]]&&I[F[1]].transition)return h({key:s,value:x,valueSpec:y.transition,style:m,styleSpec:y});const V=o.valueSpec||I[S];if(!V)return[new k(s,x,`unknown property "${S}"`)];let J;if(kr(x)==="string"&&is(V)&&!V.tokens&&(J=/^{([^}]+)}$/.exec(x)))return[new k(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const ne=[];return o.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&ne.push(new k(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&ia(Ha(x))&&sn(x.type)==="identity"&&ne.push(new k(s,x,'"text-font" does not support identity functions'))),ne.concat(h({key:o.key,value:x,valueSpec:V,style:m,styleSpec:y,expressionContext:"property",propertyType:r,propertyKey:S}))}function Uf(o){return $f(o,"paint")}function Vf(o){return $f(o,"layout")}function Gf(o){let r=[];const s=o.value,h=o.key,m=o.style,y=o.styleSpec;s.type||s.ref||r.push(new k(h,s,'either "type" or "ref" is required'));let x=sn(s.type);const S=sn(s.ref);if(s.id){const I=sn(s.id);for(let F=0;F<o.arrayIndex;F++){const V=m.layers[F];sn(V.id)===I&&r.push(new k(h,s.id,`duplicate layer id "${s.id}", previously used at line ${V.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&r.push(new k(h,s[F],`"${F}" is prohibited for ref layers`))}),m.layers.forEach(F=>{sn(F.id)===S&&(I=F)}),I?I.ref?r.push(new k(h,s.ref,"ref cannot reference another ref layer")):x=sn(I.type):r.push(new k(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const I=m.sources&&m.sources[s.source],F=I&&sn(I.type);I?F==="vector"&&x==="raster"?r.push(new k(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?r.push(new k(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?r.push(new k(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?r.push(new k(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&I.lineMetrics||r.push(new k(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new k(h,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new k(h,s.source,`source "${s.source}" not found`))}else r.push(new k(h,s,'missing required property "source"'));return r=r.concat(ji({key:h,value:s,valueSpec:y.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:y.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Hu,layout:I=>ji({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":F=>Vf(U({layerType:x},F))}}),paint:I=>ji({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":F=>Uf(U({layerType:x},F))}})}})),r}function Ms(o){const r=o.value,s=o.key,h=kr(r);return h!=="string"?[new k(s,r,`string expected, ${h} found`)]:[]}const Wf={promoteId:function({key:o,value:r}){if(kr(r)==="string")return Ms({key:o,value:r});{const s=[];for(const h in r)s.push(...Ms({key:`${o}.${h}`,value:r[h]}));return s}}};function im(o){const r=o.value,s=o.key,h=o.styleSpec,m=o.style,y=o.validateSpec;if(!r.type)return[new k(s,r,'"type" is required')];const x=sn(r.type);let S;switch(x){case"vector":case"raster":return S=ji({key:s,value:r,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Wf,validateSpec:y}),S;case"raster-dem":return S=function(I){var F;const V=(F=I.sourceName)!==null&&F!==void 0?F:"",J=I.value,ne=I.styleSpec,ce=ne.source_raster_dem,me=I.style;let Te=[];const Re=kr(J);if(J===void 0)return Te;if(Re!=="object")return Te.push(new k("source_raster_dem",J,`object expected, ${Re} found`)),Te;const Ne=sn(J.encoding)==="custom",Qe=["redFactor","greenFactor","blueFactor","baseShift"],Ze=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Ye in J)!Ne&&Qe.includes(Ye)?Te.push(new k(Ye,J[Ye],`In "${V}": "${Ye}" is only valid when "encoding" is set to "custom". ${Ze} encoding found`)):ce[Ye]?Te=Te.concat(I.validateSpec({key:Ye,value:J[Ye],valueSpec:ce[Ye],validateSpec:I.validateSpec,style:me,styleSpec:ne})):Te.push(new k(Ye,J[Ye],`unknown property "${Ye}"`));return Te}({sourceName:s,value:r,style:o.style,styleSpec:h,validateSpec:y}),S;case"geojson":if(S=ji({key:s,value:r,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:y,objectElementValidators:Wf}),r.cluster)for(const I in r.clusterProperties){const[F,V]=r.clusterProperties[I],J=typeof F=="string"?[F,["accumulated"],["get",I]]:F;S.push(...Za({key:`${s}.${I}.map`,value:V,validateSpec:y,expressionContext:"cluster-map"})),S.push(...Za({key:`${s}.${I}.reduce`,value:J,validateSpec:y,expressionContext:"cluster-reduce"}))}return S;case"video":return ji({key:s,value:r,valueSpec:h.source_video,style:m,validateSpec:y,styleSpec:h});case"image":return ji({key:s,value:r,valueSpec:h.source_image,style:m,validateSpec:y,styleSpec:h});case"canvas":return[new k(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Wu({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:y,styleSpec:h})}}function Hf(o){const r=o.value,s=o.styleSpec,h=s.light,m=o.style;let y=[];const x=kr(r);if(r===void 0)return y;if(x!=="object")return y=y.concat([new k("light",r,`object expected, ${x} found`)]),y;for(const S in r){const I=S.match(/^(.*)-transition$/);y=y.concat(I&&h[I[1]]&&h[I[1]].transition?o.validateSpec({key:S,value:r[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)])}return y}function om(o){const r=o.value,s=o.styleSpec,h=s.sky,m=o.style,y=kr(r);if(r===void 0)return[];if(y!=="object")return[new k("sky",r,`object expected, ${y} found`)];let x=[];for(const S in r)x=x.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)]);return x}function Zf(o){const r=o.value,s=o.styleSpec,h=s.terrain,m=o.style;let y=[];const x=kr(r);if(r===void 0)return y;if(x!=="object")return y=y.concat([new k("terrain",r,`object expected, ${x} found`)]),y;for(const S in r)y=y.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)]);return y}function Xf(o){let r=[];const s=o.value,h=o.key;if(Array.isArray(s)){const m=[],y=[];for(const x in s)s[x].id&&m.includes(s[x].id)&&r.push(new k(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),m.push(s[x].id),s[x].url&&y.includes(s[x].url)&&r.push(new k(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),y.push(s[x].url),r=r.concat(ji({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return Ms({key:h,value:s})}const qf={"*":()=>[],array:qc,boolean:function(o){const r=o.value,s=o.key,h=kr(r);return h!=="boolean"?[new k(s,r,`boolean expected, ${h} found`)]:[]},number:Gu,color:function(o){const r=o.key,s=o.value,h=kr(s);return h!=="string"?[new k(r,s,`color expected, ${h} found`)]:Mr.parse(String(s))?[]:[new k(r,s,`color expected, "${s}" found`)]},constants:nm,enum:Wu,filter:Hu,function:Nf,layer:Gf,object:ji,source:im,light:Hf,sky:om,terrain:Zf,projection:function(o){const r=o.value,s=o.styleSpec,h=s.projection,m=o.style,y=kr(r);if(r===void 0)return[];if(y!=="object")return[new k("projection",r,`object expected, ${y} found`)];let x=[];for(const S in r)x=x.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)]);return x},string:Ms,formatted:function(o){return Ms(o).length===0?[]:Za(o)},resolvedImage:function(o){return Ms(o).length===0?[]:Za(o)},padding:function(o){const r=o.key,s=o.value;if(kr(s)==="array"){if(s.length<1||s.length>4)return[new k(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let y=0;y<s.length;y++)m=m.concat(o.validateSpec({key:`${r}[${y}]`,value:s[y],validateSpec:o.validateSpec,valueSpec:h}));return m}return Gu({key:r,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,s=o.value,h=kr(s),m=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new k(r,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let x=0;x<s.length;x+=2)y=y.concat(Wu({key:`${r}[${x}]`,value:s[x],valueSpec:m.layout_symbol["text-anchor"]})),y=y.concat(qc({key:`${r}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return y},sprite:Xf};function Xu(o){const r=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Xu,s.expression&&ia(sn(r))?Nf(o):s.expression&&kt(Ha(r))?Za(o):s.type&&qf[s.type]?qf[s.type](o):ji(U({},o,{valueSpec:s.type?h[s.type]:s}))}function sm(o){const r=o.value,s=o.key,h=Ms(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new k(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new k(s,r,'"glyphs" url must include a "{range}" token'))),h}function fo(o,r=et){let s=[];return s=s.concat(Xu({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:Xu,objectElementValidators:{glyphs:sm,"*":()=>[]}})),o.constants&&(s=s.concat(nm({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:Xu}))),Kf(s)}function Co(o){return function(r){return o({...r,validateSpec:Xu})}}function Kf(o){return[].concat(o).sort((r,s)=>r.line-s.line)}function Mo(o){return function(...r){return Kf(o.apply(this,r))}}fo.source=Mo(Co(im)),fo.sprite=Mo(Co(Xf)),fo.glyphs=Mo(Co(sm)),fo.light=Mo(Co(Hf)),fo.sky=Mo(Co(om)),fo.terrain=Mo(Co(Zf)),fo.layer=Mo(Co(Gf)),fo.filter=Mo(Co(Hu)),fo.paintProperty=Mo(Co(Uf)),fo.layoutProperty=Mo(Co(Vf));const ks=fo,$0=ks.light,Jf=ks.sky,U0=ks.paintProperty,V0=ks.layoutProperty;function Yf(o,r){let s=!1;if(r&&r.length)for(const h of r)o.fire(new Ht(new Error(h.message))),s=!0;return s}class Bl{constructor(r,s,h){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let I=0;I<this.d*this.d;I++){const F=x[3+I],V=x[3+I+1];m.push(F===V?null:x.subarray(F,V))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=h,this.scale=s/r,this.uid=0;const y=h/s*r;this.min=-y,this.max=r+y}insert(r,s,h,m,y){this._forEachCell(s,h,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,h,m,y,x){this.cells[y].push(x)}query(r,s,h,m,y){const x=this.min,S=this.max;if(r<=x&&s<=x&&S<=h&&S<=m&&!y)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(r,s,h,m,this._queryCell,I,{},y),I}}_queryCell(r,s,h,m,y,x,S,I){const F=this.cells[y];if(F!==null){const V=this.keys,J=this.bboxes;for(let ne=0;ne<F.length;ne++){const ce=F[ne];if(S[ce]===void 0){const me=4*ce;(I?I(J[me+0],J[me+1],J[me+2],J[me+3]):r<=J[me+2]&&s<=J[me+3]&&h>=J[me+0]&&m>=J[me+1])?(S[ce]=!0,x.push(V[ce])):S[ce]=!1}}}}_forEachCell(r,s,h,m,y,x,S,I){const F=this._convertToCellCoord(r),V=this._convertToCellCoord(s),J=this._convertToCellCoord(h),ne=this._convertToCellCoord(m);for(let ce=F;ce<=J;ce++)for(let me=V;me<=ne;me++){const Te=this.d*me+ce;if((!I||I(this._convertFromCellCoord(ce),this._convertFromCellCoord(me),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(me+1)))&&y.call(this,r,s,h,m,Te,x,S,I))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=s;for(let x=0;x<r.length;x++){const S=r[x];m[3+x]=y,m.set(S,y),y+=S.length}return m[3+r.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+r.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(r,s){const h=r.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(r){return new Bl(r.buffer)}}const ss={};function $t(o,r,s={}){if(ss[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),ss[o]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}$t("Object",Object),$t("TransferableGridIndex",Bl),$t("Color",Mr),$t("Error",Error),$t("AJAXError",it),$t("ResolvedImage",Hn),$t("StylePropertyFunction",Br),$t("StyleExpression",ut,{omit:["_evaluator"]}),$t("ZoomDependentExpression",Jt),$t("ZoomConstantExpression",Zt),$t("CompoundExpression",bi,{omit:["_evaluate"]});for(const o in Po)Po[o]._classRegistryKey||$t(`Expression_${o}`,Po[o]);function am(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Qf(o){return o.$name||o.constructor._classRegistryKey}function lm(o){return!function(r){if(r===null||typeof r!="object")return!1;const s=Qf(r);return!(!s||s==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||am(o)||Y(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function qu(o,r){if(lm(o))return(am(o)||Y(o))&&r&&r.push(o),ArrayBuffer.isView(o)&&r&&r.push(o.buffer),o instanceof ImageData&&r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const y=[];for(const x of o)y.push(qu(x,r));return y}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const s=Qf(o);if(!s)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!ss[s])throw new Error(`${s} is not registered.`);const{klass:h}=ss[s],m=h.serialize?h.serialize(o,r):{};if(h.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in o){if(!o.hasOwnProperty(y)||ss[s].omit.indexOf(y)>=0)continue;const x=o[y];m[y]=ss[s].shallow.indexOf(y)>=0?x:qu(x,r)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(m.$name=s),m}function as(o){if(lm(o))return o;if(Array.isArray(o))return o.map(as);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const r=Qf(o)||"Object";if(!ss[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=ss[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const y=o[m];h[m]=ss[r].shallow.indexOf(m)>=0?y:as(y)}return h}class um{constructor(){this.first=!0}update(r,s){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Lt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ed(o){for(const r of o)if(td(r.charCodeAt(0)))return!0;return!1}function G0(o){for(const r of o)if(!cm(r.charCodeAt(0)))return!1;return!0}function cm(o){return!(Lt.Arabic(o)||Lt["Arabic Supplement"](o)||Lt["Arabic Extended-A"](o)||Lt["Arabic Presentation Forms-A"](o)||Lt["Arabic Presentation Forms-B"](o))}function td(o){return!(o!==746&&o!==747&&(o<4352||!(Lt["Bopomofo Extended"](o)||Lt.Bopomofo(o)||Lt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Lt["CJK Compatibility Ideographs"](o)||Lt["CJK Compatibility"](o)||Lt["CJK Radicals Supplement"](o)||Lt["CJK Strokes"](o)||!(!Lt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Lt["CJK Unified Ideographs Extension A"](o)||Lt["CJK Unified Ideographs"](o)||Lt["Enclosed CJK Letters and Months"](o)||Lt["Hangul Compatibility Jamo"](o)||Lt["Hangul Jamo Extended-A"](o)||Lt["Hangul Jamo Extended-B"](o)||Lt["Hangul Jamo"](o)||Lt["Hangul Syllables"](o)||Lt.Hiragana(o)||Lt["Ideographic Description Characters"](o)||Lt.Kanbun(o)||Lt["Kangxi Radicals"](o)||Lt["Katakana Phonetic Extensions"](o)||Lt.Katakana(o)&&o!==12540||!(!Lt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Lt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Lt["Unified Canadian Aboriginal Syllabics"](o)||Lt["Unified Canadian Aboriginal Syllabics Extended"](o)||Lt["Vertical Forms"](o)||Lt["Yijing Hexagram Symbols"](o)||Lt["Yi Syllables"](o)||Lt["Yi Radicals"](o))))}function hm(o){return!(td(o)||function(r){return!!(Lt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Lt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Lt["Letterlike Symbols"](r)||Lt["Number Forms"](r)||Lt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Lt["Control Pictures"](r)&&r!==9251||Lt["Optical Character Recognition"](r)||Lt["Enclosed Alphanumerics"](r)||Lt["Geometric Shapes"](r)||Lt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Lt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Lt["CJK Symbols and Punctuation"](r)||Lt.Katakana(r)||Lt["Private Use Area"](r)||Lt["CJK Compatibility Forms"](r)||Lt["Small Form Variants"](r)||Lt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function sa(o){return o>=1424&&o<=2303||Lt["Arabic Presentation Forms-A"](o)||Lt["Arabic Presentation Forms-B"](o)}function fm(o,r){return!(!r&&sa(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Lt.Khmer(o))}function rd(o){for(const r of o)if(sa(r.charCodeAt(0)))return!0;return!1}const aa=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Qr{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new um,this.transition={})}isSupportedScript(r){return function(s,h){for(const m of s)if(!fm(m.charCodeAt(0),h))return!1;return!0}(r,aa.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Kc{constructor(r,s){this.property=r,this.value=s,this.expression=function(h,m){if(ia(h))return new Br(h,m);if(kt(h)){const y=yr(h,m);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=h;return m.type==="color"&&typeof h=="string"?y=Mr.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(y=yi.parse(h)):y=gi.parse(h),{kind:"constant",evaluate:()=>y}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,h){return this.property.possiblyEvaluate(this,r,s,h)}}class Dl{constructor(r){this.property=r,this.value=new Kc(r,void 0)}transitioned(r,s){return new dm(this.property,this.value,s,P({},r.transition,this.transition),r.now)}untransitioned(){return new dm(this.property,this.value,null,{},0)}}class Nl{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return X(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dl(this._values[r].property)),this._values[r].value=new Kc(this._values[r].property,s===null?void 0:X(s))}getTransition(r){return X(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dl(this._values[r].property)),this._values[r].transition=X(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h);const m=this.getTransition(s);m!==void 0&&(r[`${s}-transition`]=m)}return r}transitioned(r,s){const h=new nd(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(r,s._values[m]);return h}untransitioned(){const r=new nd(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class dm{constructor(r,s,h,m,y){this.property=r,this.value=s,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(r,s,h){const m=r.now||0,y=this.value.possiblyEvaluate(r,s,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return x.possiblyEvaluate(r,s,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,h),y,function(I){if(I<=0)return 0;if(I>=1)return 1;const F=I*I,V=F*I;return 4*(I<.5?V:3*(I-F)+V-.75)}(S))}}return y}}class nd{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,h){const m=new Jc(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,s,h);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ku{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return X(this._values[r].value)}setValue(r,s){this._values[r]=new Kc(this._values[r].property,s===null?void 0:X(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h)}return r}possiblyEvaluate(r,s,h){const m=new Jc(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,s,h);return m}}class ls{constructor(r,s,h){this.property=r,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,h,m){return this.property.evaluate(this.value,this.parameters,r,s,h,m)}}class Jc{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Yt{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,h){const m=xi[this.specification.type];return m?m(r,s,h):r}}class sr{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,h,m){return new ls(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},h,m)}:r.expression,s)}interpolate(r,s,h){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new ls(this,{kind:"constant",value:void 0},r.parameters);const m=xi[this.specification.type];if(m){const y=m(r.value.value,s.value.value,h);return new ls(this,{kind:"constant",value:y},r.parameters)}return r}evaluate(r,s,h,m,y,x){return r.kind==="constant"?r.value:r.evaluate(s,h,m,y,x)}}class v extends sr{possiblyEvaluate(r,s,h,m){if(r.value===void 0)return new ls(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const y=r.expression.evaluate(s,null,{},h,m),x=r.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,S=this._calculate(x,x,x,s);return new ls(this,{kind:"constant",value:S},s)}if(r.expression.kind==="camera"){const y=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new ls(this,{kind:"constant",value:y},s)}return new ls(this,r.expression,s)}evaluate(r,s,h,m,y,x){if(r.kind==="source"){const S=r.evaluate(s,h,m,y,x);return this._calculate(S,S,S,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},h,m),r.evaluate({zoom:Math.floor(s.zoom)},h,m),r.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):r.value}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class n{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const y=r.expression.evaluate(s,null,{},h,m);return this._calculate(y,y,y,s)}return this._calculate(r.expression.evaluate(new Qr(Math.floor(s.zoom-1),s)),r.expression.evaluate(new Qr(Math.floor(s.zoom),s)),r.expression.evaluate(new Qr(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class u{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){return!!r.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class p{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const h=r[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new Kc(h,void 0),y=this.defaultTransitionablePropertyValues[s]=new Dl(h);this.defaultTransitioningPropertyValues[s]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}$t("DataDrivenProperty",sr),$t("DataConstantProperty",Yt),$t("CrossFadedDataDrivenProperty",v),$t("CrossFadedProperty",n),$t("ColorRampProperty",u);const g="-transition";class _ extends ar{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new Ku(s.layout)),s.paint)){this._transitionablePaint=new Nl(s.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Jc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,h={}){s!=null&&this._validate(V0,`layers.${this.id}.layout.${r}`,r,s,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return r.endsWith(g)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,h={}){if(s!=null&&this._validate(U0,`layers.${this.id}.paint.${r}`,r,s,h))return!1;if(r.endsWith(g))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[r],y=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const I=this._transitionablePaint._values[r].value;return I.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(r,S,I)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ee(r,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(r,s,h,m,y={}){return(!y||y.validate!==!1)&&Yf(this,r.call(ks,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof ls&&is(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const A={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class M{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class O{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function $(o,r=1){let s=0,h=0;return{members:o.map(m=>{const y=A[m.type].BYTES_PER_ELEMENT,x=s=te(s,Math.max(r,y)),S=m.components||1;return h=Math.max(h,y),s+=y*S,{name:m.name,type:m.type,components:S,offset:x}}),size:te(s,Math.max(h,r)),alignment:r}}function te(o,r){return Math.ceil(o/r)*r}class Q extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.int16[m+0]=s,this.int16[m+1]=h,r}}Q.prototype.bytesPerElement=4,$t("StructArrayLayout2i4",Q);class pe extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.int16[y+0]=s,this.int16[y+1]=h,this.int16[y+2]=m,r}}pe.prototype.bytesPerElement=6,$t("StructArrayLayout3i6",pe);class we extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,h,m)}emplace(r,s,h,m,y){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=y,r}}we.prototype.bytesPerElement=8,$t("StructArrayLayout4i8",we);class Ae extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const I=6*r;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=m,this.int16[I+3]=y,this.int16[I+4]=x,this.int16[I+5]=S,r}}Ae.prototype.bytesPerElement=12,$t("StructArrayLayout2i4i12",Ae);class ze extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const I=4*r,F=8*r;return this.int16[I+0]=s,this.int16[I+1]=h,this.uint8[F+4]=m,this.uint8[F+5]=y,this.uint8[F+6]=x,this.uint8[F+7]=S,r}}ze.prototype.bytesPerElement=8,$t("StructArrayLayout2i4ub8",ze);class Me extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.float32[m+0]=s,this.float32[m+1]=h,r}}Me.prototype.bytesPerElement=8,$t("StructArrayLayout2f8",Me);class De extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,I,F,V){const J=this.length;return this.resize(J+1),this.emplace(J,r,s,h,m,y,x,S,I,F,V)}emplace(r,s,h,m,y,x,S,I,F,V,J){const ne=10*r;return this.uint16[ne+0]=s,this.uint16[ne+1]=h,this.uint16[ne+2]=m,this.uint16[ne+3]=y,this.uint16[ne+4]=x,this.uint16[ne+5]=S,this.uint16[ne+6]=I,this.uint16[ne+7]=F,this.uint16[ne+8]=V,this.uint16[ne+9]=J,r}}De.prototype.bytesPerElement=20,$t("StructArrayLayout10ui20",De);class qe extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,I,F,V,J,ne){const ce=this.length;return this.resize(ce+1),this.emplace(ce,r,s,h,m,y,x,S,I,F,V,J,ne)}emplace(r,s,h,m,y,x,S,I,F,V,J,ne,ce){const me=12*r;return this.int16[me+0]=s,this.int16[me+1]=h,this.int16[me+2]=m,this.int16[me+3]=y,this.uint16[me+4]=x,this.uint16[me+5]=S,this.uint16[me+6]=I,this.uint16[me+7]=F,this.int16[me+8]=V,this.int16[me+9]=J,this.int16[me+10]=ne,this.int16[me+11]=ce,r}}qe.prototype.bytesPerElement=24,$t("StructArrayLayout4i4ui4i24",qe);class je extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.float32[y+0]=s,this.float32[y+1]=h,this.float32[y+2]=m,r}}je.prototype.bytesPerElement=12,$t("StructArrayLayout3f12",je);class Je extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}Je.prototype.bytesPerElement=4,$t("StructArrayLayout1ul4",Je);class rt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,I,F){const V=this.length;return this.resize(V+1),this.emplace(V,r,s,h,m,y,x,S,I,F)}emplace(r,s,h,m,y,x,S,I,F,V){const J=10*r,ne=5*r;return this.int16[J+0]=s,this.int16[J+1]=h,this.int16[J+2]=m,this.int16[J+3]=y,this.int16[J+4]=x,this.int16[J+5]=S,this.uint32[ne+3]=I,this.uint16[J+8]=F,this.uint16[J+9]=V,r}}rt.prototype.bytesPerElement=20,$t("StructArrayLayout6i1ul2ui20",rt);class at extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const I=6*r;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=m,this.int16[I+3]=y,this.int16[I+4]=x,this.int16[I+5]=S,r}}at.prototype.bytesPerElement=12,$t("StructArrayLayout2i2i2i12",at);class mt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,h,m,y)}emplace(r,s,h,m,y,x){const S=4*r,I=8*r;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[I+6]=y,this.int16[I+7]=x,r}}mt.prototype.bytesPerElement=16,$t("StructArrayLayout2f1f2i16",mt);class wt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,y,x)}emplace(r,s,h,m,y,x,S){const I=16*r,F=4*r,V=8*r;return this.uint8[I+0]=s,this.uint8[I+1]=h,this.float32[F+1]=m,this.float32[F+2]=y,this.int16[V+6]=x,this.int16[V+7]=S,r}}wt.prototype.bytesPerElement=16,$t("StructArrayLayout2ub2f2i16",wt);class Bt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.uint16[y+0]=s,this.uint16[y+1]=h,this.uint16[y+2]=m,r}}Bt.prototype.bytesPerElement=6,$t("StructArrayLayout3ui6",Bt);class Dt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,I,F,V,J,ne,ce,me,Te,Re,Ne){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,r,s,h,m,y,x,S,I,F,V,J,ne,ce,me,Te,Re,Ne)}emplace(r,s,h,m,y,x,S,I,F,V,J,ne,ce,me,Te,Re,Ne,Qe){const Ze=24*r,Ye=12*r,lt=48*r;return this.int16[Ze+0]=s,this.int16[Ze+1]=h,this.uint16[Ze+2]=m,this.uint16[Ze+3]=y,this.uint32[Ye+2]=x,this.uint32[Ye+3]=S,this.uint32[Ye+4]=I,this.uint16[Ze+10]=F,this.uint16[Ze+11]=V,this.uint16[Ze+12]=J,this.float32[Ye+7]=ne,this.float32[Ye+8]=ce,this.uint8[lt+36]=me,this.uint8[lt+37]=Te,this.uint8[lt+38]=Re,this.uint32[Ye+10]=Ne,this.int16[Ze+22]=Qe,r}}Dt.prototype.bytesPerElement=48,$t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Dt);class bt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,y,x,S,I,F,V,J,ne,ce,me,Te,Re,Ne,Qe,Ze,Ye,lt,_t,Ft,nr,zt,Ot,Kt,Ut){const Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,r,s,h,m,y,x,S,I,F,V,J,ne,ce,me,Te,Re,Ne,Qe,Ze,Ye,lt,_t,Ft,nr,zt,Ot,Kt,Ut)}emplace(r,s,h,m,y,x,S,I,F,V,J,ne,ce,me,Te,Re,Ne,Qe,Ze,Ye,lt,_t,Ft,nr,zt,Ot,Kt,Ut,Nt){const dt=32*r,Qt=16*r;return this.int16[dt+0]=s,this.int16[dt+1]=h,this.int16[dt+2]=m,this.int16[dt+3]=y,this.int16[dt+4]=x,this.int16[dt+5]=S,this.int16[dt+6]=I,this.int16[dt+7]=F,this.uint16[dt+8]=V,this.uint16[dt+9]=J,this.uint16[dt+10]=ne,this.uint16[dt+11]=ce,this.uint16[dt+12]=me,this.uint16[dt+13]=Te,this.uint16[dt+14]=Re,this.uint16[dt+15]=Ne,this.uint16[dt+16]=Qe,this.uint16[dt+17]=Ze,this.uint16[dt+18]=Ye,this.uint16[dt+19]=lt,this.uint16[dt+20]=_t,this.uint16[dt+21]=Ft,this.uint16[dt+22]=nr,this.uint32[Qt+12]=zt,this.float32[Qt+13]=Ot,this.float32[Qt+14]=Kt,this.uint16[dt+30]=Ut,this.uint16[dt+31]=Nt,r}}bt.prototype.bytesPerElement=64,$t("StructArrayLayout8i15ui1ul2f2ui64",bt);class Tt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}Tt.prototype.bytesPerElement=4,$t("StructArrayLayout1f4",Tt);class Gt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=3*r;return this.uint16[6*r+0]=s,this.float32[y+1]=h,this.float32[y+2]=m,r}}Gt.prototype.bytesPerElement=12,$t("StructArrayLayout1ui2f12",Gt);class pr extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const y=4*r;return this.uint32[2*r+0]=s,this.uint16[y+2]=h,this.uint16[y+3]=m,r}}pr.prototype.bytesPerElement=8,$t("StructArrayLayout1ul2ui8",pr);class Ct extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.uint16[m+0]=s,this.uint16[m+1]=h,r}}Ct.prototype.bytesPerElement=4,$t("StructArrayLayout2ui4",Ct);class jt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}jt.prototype.bytesPerElement=2,$t("StructArrayLayout1ui2",jt);class ur extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,h,m)}emplace(r,s,h,m,y){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=y,r}}ur.prototype.bytesPerElement=16,$t("StructArrayLayout4f16",ur);class an extends M{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}an.prototype.size=20;class _r extends rt{get(r){return new an(this,r)}}$t("CollisionBoxArray",_r);class Tr extends M{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Tr.prototype.size=48;class ln extends Dt{get(r){return new Tr(this,r)}}$t("PlacedSymbolArray",ln);class ni extends M{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ni.prototype.size=64;class ko extends bt{get(r){return new ni(this,r)}}$t("SymbolInstanceArray",ko);class un extends Tt{getoffsetX(r){return this.float32[1*r+0]}}$t("GlyphOffsetArray",un);class zi extends pe{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}$t("SymbolLineVertexArray",zi);class Ei extends M{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ei.prototype.size=12;class ii extends Gt{get(r){return new Ei(this,r)}}$t("TextAnchorOffsetArray",ii);class oi extends M{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}oi.prototype.size=8;class Oo extends pr{get(r){return new oi(this,r)}}$t("FeatureIndexArray",Oo);class Xa extends Q{}class Yc extends Q{}class $l extends Q{}class qa extends Ae{}class Qc extends ze{}class id extends Me{}class Yn extends De{}class Fo extends qe{}class la extends je{}class Ul extends Je{}class si extends at{}class ai extends wt{}class Zn extends Bt{}class fn extends Ct{}const Vl=$([{name:"a_pos",components:2,type:"Int16"}],4),{members:od}=Vl;class Nn{constructor(r=[]){this.segments=r}prepareSegment(r,s,h,m){let y=this.segments[this.segments.length-1];return r>Nn.MAX_VERTEX_ARRAY_LENGTH&&ge(`Max vertices per segment is ${Nn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!y||y.vertexLength+r>Nn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,h,m){return new Nn([{vertexOffset:r,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function pm(o,r){return 256*(o=q(Math.floor(o),0,255))+q(Math.floor(r),0,255)}Nn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t("SegmentVector",Nn);const eh=$([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var th={exports:{}},ua={exports:{}};ua.exports=function(o,r){var s,h,m,y,x,S,I,F;for(h=o.length-(s=3&o.length),m=r,x=3432918353,S=461845907,F=0;F<h;)I=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,m=27492+(65535&(y=5*(65535&(m=(m^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(I=0,s){case 3:I^=(255&o.charCodeAt(F+2))<<16;case 2:I^=(255&o.charCodeAt(F+1))<<8;case 1:m^=I=(65535&(I=(I=(65535&(I^=255&o.charCodeAt(F)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var mm=ua.exports,sd={exports:{}};sd.exports=function(o,r){for(var s,h=o.length,m=r^h,y=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(y)|(255&o.charCodeAt(++y))<<8|(255&o.charCodeAt(++y))<<16|(255&o.charCodeAt(++y))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:m^=(255&o.charCodeAt(y+2))<<16;case 2:m^=(255&o.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var ad=mm,ld=sd.exports;th.exports=ad,th.exports.murmur3=ad,th.exports.murmur2=ld;var rh=w(th.exports);class Gl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,h,m){this.ids.push(y2(r)),this.positions.push(s,h,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=y2(r);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=s?m=x:h=x+1}const y=[];for(;this.ids[h]===s;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(r,s){const h=new Float64Array(r.ids),m=new Uint32Array(r.positions);return W0(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(r){const s=new Gl;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function y2(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:rh(String(o))}function W0(o,r,s,h){for(;s<h;){const m=o[s+h>>1];let y=s-1,x=h+1;for(;;){do y++;while(o[y]<m);do x--;while(o[x]>m);if(y>=x)break;gm(o,y,x),gm(r,3*y,3*x),gm(r,3*y+1,3*x+1),gm(r,3*y+2,3*x+2)}x-s<h-x?(W0(o,r,s,x),s=x+1):(W0(o,r,x+1,h),h=x)}}function gm(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}$t("FeaturePositionMap",Gl);class Ju{constructor(r,s){this.gl=r.gl,this.location=s}}class ym extends Ju{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class v2 extends Ju{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class _2 extends Ju{constructor(r,s){super(r,s),this.current=Mr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const t4=new Float32Array(16);function H0(o){return[pm(255*o.r,255*o.g),pm(255*o.b,255*o.a)]}class ud{constructor(r,s,h){this.value=r,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(r,s,h){r.set(h.constantOr(this.value))}getBinding(r,s,h){return this.type==="color"?new _2(r,s):new ym(r,s)}}class nh{constructor(r,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setUniform(r,s,h,m){const y=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&r.set(y)}getBinding(r,s,h){return h.substr(0,9)==="u_pattern"?new v2(r,s):new ym(r,s)}}class Ka{constructor(r,s,h,m){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,s,h,m,y){const x=this.paintVertexArray.length,S=this.expression.evaluate(new Qr(0),s,{},m,[],y);this.paintVertexArray.resize(r),this._setPaintValue(x,r,S)}updatePaintArray(r,s,h,m){const y=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(r,s,y)}_setPaintValue(r,s,h){if(this.type==="color"){const m=H0(h);for(let y=r;y<s;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=r;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Os{constructor(r,s,h,m,y,x){this.expression=r,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,h,m,y){const x=this.expression.evaluate(new Qr(this.zoom),s,{},m,[],y),S=this.expression.evaluate(new Qr(this.zoom+1),s,{},m,[],y),I=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(I,r,x,S)}updatePaintArray(r,s,h,m){const y=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(r,s,y,x)}_setPaintValue(r,s,h,m){if(this.type==="color"){const y=H0(h),x=H0(m);for(let S=r;S<s;S++)this.paintVertexArray.emplace(S,y[0],y[1],x[0],x[1])}else{for(let y=r;y<s;y++)this.paintVertexArray.emplace(y,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=q(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,s,h){return new ym(r,s)}}class Wl{constructor(r,s,h,m,y,x){this.expression=r,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(r,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(r,s,h,m,y){this._setPaintValues(r,s,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(r,s,h,m){if(!m||!h)return;const{min:y,mid:x,max:S}=h,I=m[y],F=m[x],V=m[S];if(I&&F&&V)for(let J=r;J<s;J++)this.zoomInPaintVertexArray.emplace(J,F.tl[0],F.tl[1],F.br[0],F.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],F.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,F.tl[0],F.tl[1],F.br[0],F.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],F.pixelRatio,V.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,eh.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,eh.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class x2{constructor(r,s,h){this.binders={},this._buffers=[];const m=[];for(const y in r.paint._values){if(!h(y))continue;const x=r.paint.get(y);if(!(x instanceof ls&&is(x.property.specification)))continue;const S=r4(y,r.type),I=x.value,F=x.property.specification.type,V=x.property.useIntegerZoom,J=x.property.specification["property-type"],ne=J==="cross-faded"||J==="cross-faded-data-driven";if(I.kind==="constant")this.binders[y]=ne?new nh(I.value,S):new ud(I.value,S,F),m.push(`/u_${y}`);else if(I.kind==="source"||ne){const ce=w2(y,F,"source");this.binders[y]=ne?new Wl(I,F,V,s,ce,r.id):new Ka(I,S,F,ce),m.push(`/a_${y}`)}else{const ce=w2(y,F,"composite");this.binders[y]=new Os(I,S,F,V,s,ce),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Ka||s instanceof Os?s.maxValue:0}populatePaintArrays(r,s,h,m,y){for(const x in this.binders){const S=this.binders[x];(S instanceof Ka||S instanceof Os||S instanceof Wl)&&S.populatePaintArray(r,s,h,m,y)}}setConstantPatternPositions(r,s){for(const h in this.binders){const m=this.binders[h];m instanceof nh&&m.setConstantPatternPositions(r,s)}}updatePaintArrays(r,s,h,m,y){let x=!1;for(const S in r){const I=s.getPositions(S);for(const F of I){const V=h.feature(F.index);for(const J in this.binders){const ne=this.binders[J];if((ne instanceof Ka||ne instanceof Os||ne instanceof Wl)&&ne.expression.isStateDependent===!0){const ce=m.paint.get(J);ne.expression=ce.value,ne.updatePaintArray(F.start,F.end,V,r[S],y),x=!0}}}}return x}defines(){const r=[];for(const s in this.binders){const h=this.binders[s];(h instanceof ud||h instanceof nh)&&r.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ka||h instanceof Os)for(let m=0;m<h.paintVertexAttributes.length;m++)r.push(h.paintVertexAttributes[m].name);else if(h instanceof Wl)for(let m=0;m<eh.members.length;m++)r.push(eh.members[m].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof ud||h instanceof nh||h instanceof Os)for(const m of h.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const h=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof ud||y instanceof nh||y instanceof Os){for(const x of y.uniformNames)if(s[x]){const S=y.getBinding(r,s[x],x);h.push({name:x,property:m,binding:S})}}}return h}setUniforms(r,s,h,m){for(const{name:y,property:x,binding:S}of s)this.binders[x].setUniform(S,m,h.get(x),y)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(r&&h instanceof Wl){const m=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Ka||h instanceof Os)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const s in this.binders){const h=this.binders[s];(h instanceof Ka||h instanceof Os||h instanceof Wl)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Ka||s instanceof Os||s instanceof Wl)&&s.destroy()}}}class Yu{constructor(r,s,h=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new x2(m,s,h);this.needsUpload=!1,this._featureMap=new Gl,this._bufferOffset=0}populatePaintArrays(r,s,h,m,y,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,s,m,y,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,h,m){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(r,this._featureMap,s,y,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function r4(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function w2(o,r,s){const h={color:{source:Me,composite:ur},number:{source:Tt,composite:Me}},m=function(y){return{"line-pattern":{source:Yn,composite:Yn},"fill-pattern":{source:Yn,composite:Yn},"fill-extrusion-pattern":{source:Yn,composite:Yn}}[y]}(o);return m&&m[s]||h[r][s]}$t("ConstantBinder",ud),$t("CrossFadedConstantBinder",nh),$t("SourceExpressionBinder",Ka),$t("CrossFadedCompositeBinder",Wl),$t("CompositeExpressionBinder",Os),$t("ProgramConfiguration",x2,{omit:["_buffers"]}),$t("ProgramConfigurationSet",Yu);const zn=8192,Z0=Math.pow(2,14)-1,b2=-Z0-1;function Qu(o){const r=zn/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let y=0;y<m.length;y++){const x=m[y],S=Math.round(x.x*r),I=Math.round(x.y*r);x.x=q(S,b2,Z0),x.y=q(I,b2,Z0),(S<x.x||S>x.x+1||I<x.y||I>x.y+1)&&ge("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ec(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Qu(o):[]}}function vm(o,r,s,h,m){o.emplaceBack(2*r+(h+1)/2,2*s+(m+1)/2)}class X0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Yc,this.indexArray=new Zn,this.segments=new Nn,this.programConfigurations=new Yu(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){const m=this.layers[0],y=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:I,id:F,index:V,sourceLayerIndex:J}of r){const ne=this.layers[0]._featureFilter.needGeometry,ce=ec(I,ne);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),ce,h))continue;const me=S?x.evaluate(ce,{},h):void 0,Te={id:F,properties:I.properties,type:I.type,sourceLayerIndex:J,index:V,geometry:ne?ce.geometry:Qu(I),patterns:{},sortKey:me};y.push(Te)}S&&y.sort((I,F)=>I.sortKey-F.sortKey);for(const I of y){const{geometry:F,index:V,sourceLayerIndex:J}=I,ne=r[V].feature;this.addFeature(I,F,V,h),s.featureIndex.insert(ne,F,V,J,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,od),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,h,m){for(const y of s)for(const x of y){const S=x.x,I=x.y;if(S<0||S>=zn||I<0||I>=zn)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),V=F.vertexLength;vm(this.layoutVertexArray,S,I,-1,-1),vm(this.layoutVertexArray,S,I,1,-1),vm(this.layoutVertexArray,S,I,1,1),vm(this.layoutVertexArray,S,I,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},m)}}function S2(o,r){for(let s=0;s<o.length;s++)if(ih(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(ih(o,r[s]))return!0;return!!q0(o,r)}function n4(o,r,s){return!!ih(o,r)||!!K0(r,o,s)}function E2(o,r){if(o.length===1)return P2(r,o[0]);for(let s=0;s<r.length;s++){const h=r[s];for(let m=0;m<h.length;m++)if(ih(o,h[m]))return!0}for(let s=0;s<o.length;s++)if(P2(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(q0(o,r[s]))return!0;return!1}function i4(o,r,s){if(o.length>1){if(q0(o,r))return!0;for(let h=0;h<r.length;h++)if(K0(r[h],o,s))return!0}for(let h=0;h<o.length;h++)if(K0(o[h],r,s))return!0;return!1}function q0(o,r){if(o.length===0||r.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],m=o[s+1];for(let y=0;y<r.length-1;y++)if(o4(h,m,r[y],r[y+1]))return!0}return!1}function o4(o,r,s,h){return fe(o,s,h)!==fe(r,s,h)&&fe(o,r,s)!==fe(o,r,h)}function K0(o,r,s){const h=s*s;if(r.length===1)return o.distSqr(r[0])<h;for(let m=1;m<r.length;m++)if(T2(o,r[m-1],r[m])<h)return!0;return!1}function T2(o,r,s){const h=r.distSqr(s);if(h===0)return o.distSqr(r);const m=((o.x-r.x)*(s.x-r.x)+(o.y-r.y)*(s.y-r.y))/h;return o.distSqr(m<0?r:m>1?s:s.sub(r)._mult(m)._add(r))}function P2(o,r){let s,h,m,y=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,I=s.length-1;S<s.length;I=S++)h=s[S],m=s[I],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(y=!y)}return y}function ih(o,r){let s=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const y=o[h],x=o[m];y.y>r.y!=x.y>r.y&&r.x<(x.x-y.x)*(r.y-y.y)/(x.y-y.y)+y.x&&(s=!s)}return s}function s4(o,r,s){const h=s[0],m=s[2];if(o.x<h.x&&r.x<h.x||o.x>m.x&&r.x>m.x||o.y<h.y&&r.y<h.y||o.y>m.y&&r.y>m.y)return!1;const y=fe(o,r,s[0]);return y!==fe(o,r,s[1])||y!==fe(o,r,s[2])||y!==fe(o,r,s[3])}function cd(o,r,s){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(r.id).getMaxValue(o)}function _m(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function xm(o,r,s,h,m){if(!r[0]&&!r[1])return o;const y=b.convert(r)._mult(m);s==="viewport"&&y._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(y));return x}let A2,I2;$t("CircleBucket",X0,{omit:["layers"]});var a4={get paint(){return I2=I2||new p({"circle-radius":new sr(et.paint_circle["circle-radius"]),"circle-color":new sr(et.paint_circle["circle-color"]),"circle-blur":new sr(et.paint_circle["circle-blur"]),"circle-opacity":new sr(et.paint_circle["circle-opacity"]),"circle-translate":new Yt(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Yt(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yt(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yt(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sr(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sr(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sr(et.paint_circle["circle-stroke-opacity"])})},get layout(){return A2=A2||new p({"circle-sort-key":new sr(et.layout_circle["circle-sort-key"])})}},Li=1e-6,oh=typeof Float32Array<"u"?Float32Array:Array;function J0(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function C2(o,r,s){var h=r[0],m=r[1],y=r[2],x=r[3],S=r[4],I=r[5],F=r[6],V=r[7],J=r[8],ne=r[9],ce=r[10],me=r[11],Te=r[12],Re=r[13],Ne=r[14],Qe=r[15],Ze=s[0],Ye=s[1],lt=s[2],_t=s[3];return o[0]=Ze*h+Ye*S+lt*J+_t*Te,o[1]=Ze*m+Ye*I+lt*ne+_t*Re,o[2]=Ze*y+Ye*F+lt*ce+_t*Ne,o[3]=Ze*x+Ye*V+lt*me+_t*Qe,o[4]=(Ze=s[4])*h+(Ye=s[5])*S+(lt=s[6])*J+(_t=s[7])*Te,o[5]=Ze*m+Ye*I+lt*ne+_t*Re,o[6]=Ze*y+Ye*F+lt*ce+_t*Ne,o[7]=Ze*x+Ye*V+lt*me+_t*Qe,o[8]=(Ze=s[8])*h+(Ye=s[9])*S+(lt=s[10])*J+(_t=s[11])*Te,o[9]=Ze*m+Ye*I+lt*ne+_t*Re,o[10]=Ze*y+Ye*F+lt*ce+_t*Ne,o[11]=Ze*x+Ye*V+lt*me+_t*Qe,o[12]=(Ze=s[12])*h+(Ye=s[13])*S+(lt=s[14])*J+(_t=s[15])*Te,o[13]=Ze*m+Ye*I+lt*ne+_t*Re,o[14]=Ze*y+Ye*F+lt*ce+_t*Ne,o[15]=Ze*x+Ye*V+lt*me+_t*Qe,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var hd,l4=C2;function wm(o,r,s){var h=r[0],m=r[1],y=r[2],x=r[3];return o[0]=s[0]*h+s[4]*m+s[8]*y+s[12]*x,o[1]=s[1]*h+s[5]*m+s[9]*y+s[13]*x,o[2]=s[2]*h+s[6]*m+s[10]*y+s[14]*x,o[3]=s[3]*h+s[7]*m+s[11]*y+s[15]*x,o}hd=new oh(4),oh!=Float32Array&&(hd[0]=0,hd[1]=0,hd[2]=0,hd[3]=0);class u4 extends _{constructor(r){super(r,a4)}createBucket(r){return new X0(r)}queryRadius(r){const s=r;return cd("circle-radius",this,s)+cd("circle-stroke-width",this,s)+_m(this.paint.get("circle-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S,I){const F=xm(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),V=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),J=this.paint.get("circle-pitch-alignment")==="map",ne=J?F:function(me,Te){return me.map(Re=>M2(Re,Te))}(F,I),ce=J?V*S:V;for(const me of m)for(const Te of me){const Re=J?Te:M2(Te,I);let Ne=ce;const Qe=wm([],[Te.x,Te.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=Qe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=x.cameraToCenterDistance/Qe[3]),n4(ne,Re,Ne))return!0}return!1}}function M2(o,r){const s=wm([],[o.x,o.y,0,1],r);return new b(s[0]/s[3],s[1]/s[3])}class k2 extends X0{}let O2;$t("HeatmapBucket",k2,{omit:["layers"]});var c4={get paint(){return O2=O2||new p({"heatmap-radius":new sr(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sr(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yt(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new u(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yt(et.paint_heatmap["heatmap-opacity"])})}};function Y0(o,{width:r,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*s*h}`)}else m=new Uint8Array(r*s*h);return o.width=r,o.height=s,o.data=m,o}function F2(o,{width:r,height:s},h){if(r===o.width&&s===o.height)return;const m=Y0({},{width:r,height:s},h);Q0(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,s)},h),o.width=r,o.height=s,o.data=m.data}function Q0(o,r,s,h,m,y){if(m.width===0||m.height===0)return r;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||h.x>r.width-m.width||h.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=r.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<m.height;I++){const F=((s.y+I)*o.width+s.x)*y,V=((h.y+I)*r.width+h.x)*y;for(let J=0;J<m.width*y;J++)S[V+J]=x[F+J]}return r}class fd{constructor(r,s){Y0(this,r,1,s)}resize(r){F2(this,r,1)}clone(){return new fd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,y){Q0(r,s,h,m,y,1)}}class Ro{constructor(r,s){Y0(this,r,4,s)}resize(r){F2(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,y){Q0(r,s,h,m,y,4)}}function R2(o){const r={},s=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new Ro({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const y=(x,S,I)=>{r[o.evaluationKey]=I;const F=o.expression.evaluate(r);m.data[x+S+0]=Math.floor(255*F.r/F.a),m.data[x+S+1]=Math.floor(255*F.g/F.a),m.data[x+S+2]=Math.floor(255*F.b/F.a),m.data[x+S+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let I=0,F=0;I<s;I++,F+=4){const V=I/(s-1),{start:J,end:ne}=o.clips[x];y(S,F,J*(1-V)+ne*V)}else for(let x=0,S=0;x<s;x++,S+=4)y(0,S,x/(s-1));return m}$t("AlphaImage",fd),$t("RGBAImage",Ro);class h4 extends _{createBucket(r){return new k2(r)}constructor(r){super(r,c4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=R2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let j2;var f4={get paint(){return j2=j2||new p({"hillshade-illumination-direction":new Yt(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yt(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yt(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yt(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yt(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yt(et.paint_hillshade["hillshade-accent-color"])})}};class d4 extends _{constructor(r){super(r,f4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const p4=$([{name:"a_pos",components:2,type:"Int16"}],4),{members:m4}=p4;var ev={exports:{}};function bm(o,r,s){s=s||2;var h,m,y,x,S,I,F,V=r&&r.length,J=V?r[0]*s:o.length,ne=z2(o,0,J,s,!0),ce=[];if(!ne||ne.next===ne.prev)return ce;if(V&&(ne=function(Te,Re,Ne,Qe){var Ze,Ye,lt,_t=[];for(Ze=0,Ye=Re.length;Ze<Ye;Ze++)(lt=z2(Te,Re[Ze]*Qe,Ze<Ye-1?Re[Ze+1]*Qe:Te.length,Qe,!1))===lt.next&&(lt.steiner=!0),_t.push(S4(lt));for(_t.sort(x4),Ze=0;Ze<_t.length;Ze++)Ne=w4(_t[Ze],Ne);return Ne}(o,r,ne,s)),o.length>80*s){h=y=o[0],m=x=o[1];for(var me=s;me<J;me+=s)(S=o[me])<h&&(h=S),(I=o[me+1])<m&&(m=I),S>y&&(y=S),I>x&&(x=I);F=(F=Math.max(y-h,x-m))!==0?32767/F:0}return dd(ne,ce,s,h,m,F,0),ce}function z2(o,r,s,h,m){var y,x;if(m===nv(o,r,s,h)>0)for(y=r;y<s;y+=h)x=D2(y,o[y],o[y+1],x);else for(y=s-h;y>=r;y-=h)x=D2(y,o[y],o[y+1],x);return x&&Sm(x,x.next)&&(md(x),x=x.next),x}function tc(o,r){if(!o)return o;r||(r=o);var s,h=o;do if(s=!1,h.steiner||!Sm(h,h.next)&&In(h.prev,h,h.next)!==0)h=h.next;else{if(md(h),(h=r=h.prev)===h.next)break;s=!0}while(s||h!==r);return r}function dd(o,r,s,h,m,y,x){if(o){!x&&y&&function(V,J,ne,ce){var me=V;do me.z===0&&(me.z=tv(me.x,me.y,J,ne,ce)),me.prevZ=me.prev,me.nextZ=me.next,me=me.next;while(me!==V);me.prevZ.nextZ=null,me.prevZ=null,function(Te){var Re,Ne,Qe,Ze,Ye,lt,_t,Ft,nr=1;do{for(Ne=Te,Te=null,Ye=null,lt=0;Ne;){for(lt++,Qe=Ne,_t=0,Re=0;Re<nr&&(_t++,Qe=Qe.nextZ);Re++);for(Ft=nr;_t>0||Ft>0&&Qe;)_t!==0&&(Ft===0||!Qe||Ne.z<=Qe.z)?(Ze=Ne,Ne=Ne.nextZ,_t--):(Ze=Qe,Qe=Qe.nextZ,Ft--),Ye?Ye.nextZ=Ze:Te=Ze,Ze.prevZ=Ye,Ye=Ze;Ne=Qe}Ye.nextZ=null,nr*=2}while(lt>1)}(me)}(o,h,m,y);for(var S,I,F=o;o.prev!==o.next;)if(S=o.prev,I=o.next,y?y4(o,h,m,y):g4(o))r.push(S.i/s|0),r.push(o.i/s|0),r.push(I.i/s|0),md(o),o=I.next,F=I.next;else if((o=I)===F){x?x===1?dd(o=v4(tc(o),r,s),r,s,h,m,y,2):x===2&&_4(o,r,s,h,m,y):dd(tc(o),r,s,h,m,y,1);break}}}function g4(o){var r=o.prev,s=o,h=o.next;if(In(r,s,h)>=0)return!1;for(var m=r.x,y=s.x,x=h.x,S=r.y,I=s.y,F=h.y,V=m<y?m<x?m:x:y<x?y:x,J=S<I?S<F?S:F:I<F?I:F,ne=m>y?m>x?m:x:y>x?y:x,ce=S>I?S>F?S:F:I>F?I:F,me=h.next;me!==r;){if(me.x>=V&&me.x<=ne&&me.y>=J&&me.y<=ce&&sh(m,S,y,I,x,F,me.x,me.y)&&In(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function y4(o,r,s,h){var m=o.prev,y=o,x=o.next;if(In(m,y,x)>=0)return!1;for(var S=m.x,I=y.x,F=x.x,V=m.y,J=y.y,ne=x.y,ce=S<I?S<F?S:F:I<F?I:F,me=V<J?V<ne?V:ne:J<ne?J:ne,Te=S>I?S>F?S:F:I>F?I:F,Re=V>J?V>ne?V:ne:J>ne?J:ne,Ne=tv(ce,me,r,s,h),Qe=tv(Te,Re,r,s,h),Ze=o.prevZ,Ye=o.nextZ;Ze&&Ze.z>=Ne&&Ye&&Ye.z<=Qe;){if(Ze.x>=ce&&Ze.x<=Te&&Ze.y>=me&&Ze.y<=Re&&Ze!==m&&Ze!==x&&sh(S,V,I,J,F,ne,Ze.x,Ze.y)&&In(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,Ye.x>=ce&&Ye.x<=Te&&Ye.y>=me&&Ye.y<=Re&&Ye!==m&&Ye!==x&&sh(S,V,I,J,F,ne,Ye.x,Ye.y)&&In(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;Ze&&Ze.z>=Ne;){if(Ze.x>=ce&&Ze.x<=Te&&Ze.y>=me&&Ze.y<=Re&&Ze!==m&&Ze!==x&&sh(S,V,I,J,F,ne,Ze.x,Ze.y)&&In(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;Ye&&Ye.z<=Qe;){if(Ye.x>=ce&&Ye.x<=Te&&Ye.y>=me&&Ye.y<=Re&&Ye!==m&&Ye!==x&&sh(S,V,I,J,F,ne,Ye.x,Ye.y)&&In(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function v4(o,r,s){var h=o;do{var m=h.prev,y=h.next.next;!Sm(m,y)&&L2(m,h,h.next,y)&&pd(m,y)&&pd(y,m)&&(r.push(m.i/s|0),r.push(h.i/s|0),r.push(y.i/s|0),md(h),md(h.next),h=o=y),h=h.next}while(h!==o);return tc(h)}function _4(o,r,s,h,m,y){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&E4(x,S)){var I=B2(x,S);return x=tc(x,x.next),I=tc(I,I.next),dd(x,r,s,h,m,y,0),void dd(I,r,s,h,m,y,0)}S=S.next}x=x.next}while(x!==o)}function x4(o,r){return o.x-r.x}function w4(o,r){var s=function(m,y){var x,S=y,I=m.x,F=m.y,V=-1/0;do{if(F<=S.y&&F>=S.next.y&&S.next.y!==S.y){var J=S.x+(F-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(J<=I&&J>V&&(V=J,x=S.x<S.next.x?S:S.next,J===I))return x}S=S.next}while(S!==y);if(!x)return null;var ne,ce=x,me=x.x,Te=x.y,Re=1/0;S=x;do I>=S.x&&S.x>=me&&I!==S.x&&sh(F<Te?I:V,F,me,Te,F<Te?V:I,F,S.x,S.y)&&(ne=Math.abs(F-S.y)/(I-S.x),pd(S,m)&&(ne<Re||ne===Re&&(S.x>x.x||S.x===x.x&&b4(x,S)))&&(x=S,Re=ne)),S=S.next;while(S!==ce);return x}(o,r);if(!s)return r;var h=B2(s,o);return tc(h,h.next),tc(s,s.next)}function b4(o,r){return In(o.prev,o,r.prev)<0&&In(r.next,o,o.next)<0}function tv(o,r,s,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function S4(o){var r=o,s=o;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==o);return s}function sh(o,r,s,h,m,y,x,S){return(m-x)*(r-S)>=(o-x)*(y-S)&&(o-x)*(h-S)>=(s-x)*(r-S)&&(s-x)*(y-S)>=(m-x)*(h-S)}function E4(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&L2(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(o,r)&&(pd(o,r)&&pd(r,o)&&function(s,h){var m=s,y=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(o,r)&&(In(o.prev,o,r.prev)||In(o,r.prev,r))||Sm(o,r)&&In(o.prev,o,o.next)>0&&In(r.prev,r,r.next)>0)}function In(o,r,s){return(r.y-o.y)*(s.x-r.x)-(r.x-o.x)*(s.y-r.y)}function Sm(o,r){return o.x===r.x&&o.y===r.y}function L2(o,r,s,h){var m=Tm(In(o,r,s)),y=Tm(In(o,r,h)),x=Tm(In(s,h,o)),S=Tm(In(s,h,r));return m!==y&&x!==S||!(m!==0||!Em(o,s,r))||!(y!==0||!Em(o,h,r))||!(x!==0||!Em(s,o,h))||!(S!==0||!Em(s,r,h))}function Em(o,r,s){return r.x<=Math.max(o.x,s.x)&&r.x>=Math.min(o.x,s.x)&&r.y<=Math.max(o.y,s.y)&&r.y>=Math.min(o.y,s.y)}function Tm(o){return o>0?1:o<0?-1:0}function pd(o,r){return In(o.prev,o,o.next)<0?In(o,r,o.next)>=0&&In(o,o.prev,r)>=0:In(o,r,o.prev)<0||In(o,o.next,r)<0}function B2(o,r){var s=new rv(o.i,o.x,o.y),h=new rv(r.i,r.x,r.y),m=o.next,y=r.prev;return o.next=r,r.prev=o,s.next=m,m.prev=s,h.next=s,s.prev=h,y.next=h,h.prev=y,h}function D2(o,r,s,h){var m=new rv(o,r,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function md(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function rv(o,r,s){this.i=o,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nv(o,r,s,h){for(var m=0,y=r,x=s-h;y<s;y+=h)m+=(o[x]-o[y])*(o[y+1]+o[x+1]),x=y;return m}ev.exports=bm,ev.exports.default=bm,bm.deviation=function(o,r,s,h){var m=r&&r.length,y=Math.abs(nv(o,0,m?r[0]*s:o.length,s));if(m)for(var x=0,S=r.length;x<S;x++)y-=Math.abs(nv(o,r[x]*s,x<S-1?r[x+1]*s:o.length,s));var I=0;for(x=0;x<h.length;x+=3){var F=h[x]*s,V=h[x+1]*s,J=h[x+2]*s;I+=Math.abs((o[F]-o[J])*(o[V+1]-o[F+1])-(o[F]-o[V])*(o[J+1]-o[F+1]))}return y===0&&I===0?0:Math.abs((I-y)/y)},bm.flatten=function(o){for(var r=o[0][0].length,s={vertices:[],holes:[],dimensions:r},h=0,m=0;m<o.length;m++){for(var y=0;y<o[m].length;y++)for(var x=0;x<r;x++)s.vertices.push(o[m][y][x]);m>0&&s.holes.push(h+=o[m-1].length)}return s};var N2=w(ev.exports);function iv(o,r,s){const h=s.patternDependencies;let m=!1;for(const y of r){const x=y.paint.get(`${o}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function ov(o,r,s,h,m){const y=m.patternDependencies;for(const x of r){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let I=S.evaluate({zoom:h-1},s,{},m.availableImages),F=S.evaluate({zoom:h},s,{},m.availableImages),V=S.evaluate({zoom:h+1},s,{},m.availableImages);I=I&&I.name?I.name:I,F=F&&F.name?F.name:F,V=V&&V.name?V.name:V,y[I]=!0,y[F]=!0,y[V]=!0,s.patterns[x.id]={min:I,mid:F,max:V}}}return s}class sv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $l,this.indexArray=new Zn,this.indexArray2=new fn,this.programConfigurations=new Yu(r.layers,r.zoom),this.segments=new Nn,this.segments2=new Nn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=iv("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),x=[];for(const{feature:S,id:I,index:F,sourceLayerIndex:V}of r){const J=this.layers[0]._featureFilter.needGeometry,ne=ec(S,J);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),ne,h))continue;const ce=y?m.evaluate(ne,{},h,s.availableImages):void 0,me={id:I,properties:S.properties,type:S.type,sourceLayerIndex:V,index:F,geometry:J?ne.geometry:Qu(S),patterns:{},sortKey:ce};x.push(me)}y&&x.sort((S,I)=>S.sortKey-I.sortKey);for(const S of x){const{geometry:I,index:F,sourceLayerIndex:V}=S;if(this.hasPattern){const J=ov("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(S,I,F,h,{});s.featureIndex.insert(r[F].feature,I,F,V,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,m4),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,h,m,y){for(const x of jl(s,500)){let S=0;for(const ce of x)S+=ce.length;const I=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),F=I.vertexLength,V=[],J=[];for(const ce of x){if(ce.length===0)continue;ce!==x[0]&&J.push(V.length/2);const me=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),Te=me.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(Te+ce.length-1,Te),V.push(ce[0].x),V.push(ce[0].y);for(let Re=1;Re<ce.length;Re++)this.layoutVertexArray.emplaceBack(ce[Re].x,ce[Re].y),this.indexArray2.emplaceBack(Te+Re-1,Te+Re),V.push(ce[Re].x),V.push(ce[Re].y);me.vertexLength+=ce.length,me.primitiveLength+=ce.length}const ne=N2(V,J);for(let ce=0;ce<ne.length;ce+=3)this.indexArray.emplaceBack(F+ne[ce],F+ne[ce+1],F+ne[ce+2]);I.vertexLength+=S,I.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}let $2,U2;$t("FillBucket",sv,{omit:["layers","patternFeatures"]});var T4={get paint(){return U2=U2||new p({"fill-antialias":new Yt(et.paint_fill["fill-antialias"]),"fill-opacity":new sr(et.paint_fill["fill-opacity"]),"fill-color":new sr(et.paint_fill["fill-color"]),"fill-outline-color":new sr(et.paint_fill["fill-outline-color"]),"fill-translate":new Yt(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Yt(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new v(et.paint_fill["fill-pattern"])})},get layout(){return $2=$2||new p({"fill-sort-key":new sr(et.layout_fill["fill-sort-key"])})}};class P4 extends _{constructor(r){super(r,T4)}recalculate(r,s){super.recalculate(r,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new sv(r)}queryRadius(){return _m(this.paint.get("fill-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S){return E2(xm(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const A4=$([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),I4=$([{name:"a_centroid",components:2,type:"Int16"}],4),{members:C4}=A4;var Hl={},M4=E,V2=ah;function ah(o,r,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(k4,this,r)}function k4(o,r,s){o==1?r.id=s.readVarint():o==2?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var x=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[x]=S}}(s,r):o==3?r.type=s.readVarint():o==4&&(r._geometry=s.pos)}function O4(o){for(var r,s,h=0,m=0,y=o.length,x=y-1;m<y;x=m++)h+=((s=o[x]).x-(r=o[m]).x)*(r.y+s.y);return h}ah.types=["Unknown","Point","LineString","Polygon"],ah.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,s=o.readVarint()+o.pos,h=1,m=0,y=0,x=0,S=[];o.pos<s;){if(m<=0){var I=o.readVarint();h=7&I,m=I>>3}if(m--,h===1||h===2)y+=o.readSVarint(),x+=o.readSVarint(),h===1&&(r&&S.push(r),r=[]),r.push(new M4(y,x));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&S.push(r),S},ah.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,s=1,h=0,m=0,y=0,x=1/0,S=-1/0,I=1/0,F=-1/0;o.pos<r;){if(h<=0){var V=o.readVarint();s=7&V,h=V>>3}if(h--,s===1||s===2)(m+=o.readSVarint())<x&&(x=m),m>S&&(S=m),(y+=o.readSVarint())<I&&(I=y),y>F&&(F=y);else if(s!==7)throw new Error("unknown command "+s)}return[x,I,S,F]},ah.prototype.toGeoJSON=function(o,r,s){var h,m,y=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*r,I=this.loadGeometry(),F=ah.types[this.type];function V(ce){for(var me=0;me<ce.length;me++){var Te=ce[me];ce[me]=[360*(Te.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+S)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(h=0;h<I.length;h++)J[h]=I[h][0];V(I=J);break;case 2:for(h=0;h<I.length;h++)V(I[h]);break;case 3:for(I=function(ce){var me=ce.length;if(me<=1)return[ce];for(var Te,Re,Ne=[],Qe=0;Qe<me;Qe++){var Ze=O4(ce[Qe]);Ze!==0&&(Re===void 0&&(Re=Ze<0),Re===Ze<0?(Te&&Ne.push(Te),Te=[ce[Qe]]):Te.push(ce[Qe]))}return Te&&Ne.push(Te),Ne}(I),h=0;h<I.length;h++)for(m=0;m<I[h].length;m++)V(I[h][m])}I.length===1?I=I[0]:F="Multi"+F;var ne={type:"Feature",geometry:{type:F,coordinates:I},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var F4=V2,G2=W2;function W2(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(R4,this,r),this.length=this._features.length}function R4(o,r,s){o===15?r.version=s.readVarint():o===1?r.name=s.readString():o===5?r.extent=s.readVarint():o===2?r._features.push(s.pos):o===3?r._keys.push(s.readString()):o===4&&r._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(s))}W2.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new F4(this._pbf,r,this.extent,this._keys,this._values)};var j4=G2;function z4(o,r,s){if(o===3){var h=new j4(s,s.readVarint()+s.pos);h.length&&(r[h.name]=h)}}Hl.VectorTile=function(o,r){this.layers=o.readFields(z4,{},r)},Hl.VectorTileFeature=V2,Hl.VectorTileLayer=G2;const L4=Hl.VectorTileFeature.types,av=Math.pow(2,13);function gd(o,r,s,h,m,y,x,S){o.emplaceBack(r,s,2*Math.floor(h*av)+x,m*av*2,y*av*2,Math.round(S))}class lv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new qa,this.centroidVertexArray=new Xa,this.indexArray=new Zn,this.programConfigurations=new Yu(r.layers,r.zoom),this.segments=new Nn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.features=[],this.hasPattern=iv("fill-extrusion",this.layers,s);for(const{feature:m,id:y,index:x,sourceLayerIndex:S}of r){const I=this.layers[0]._featureFilter.needGeometry,F=ec(m,I);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),F,h))continue;const V={id:y,sourceLayerIndex:S,index:x,geometry:I?F.geometry:Qu(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(ov("fill-extrusion",this.layers,V,this.zoom,s)):this.addFeature(V,V.geometry,x,h,{}),s.featureIndex.insert(m,V.geometry,x,S,this.index,!0)}}addFeatures(r,s,h){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,s,h)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,C4),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,I4.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,h,m,y){for(const x of jl(s,500)){const S={x:0,y:0,vertexCount:0};let I=0;for(const me of x)I+=me.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of x){if(me.length===0||D4(me))continue;let Te=0;for(let Re=0;Re<me.length;Re++){const Ne=me[Re];if(Re>=1){const Qe=me[Re-1];if(!B4(Ne,Qe)){F.vertexLength+4>Nn.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=Ne.sub(Qe)._perp()._unit(),Ye=Qe.dist(Ne);Te+Ye>32768&&(Te=0),gd(this.layoutVertexArray,Ne.x,Ne.y,Ze.x,Ze.y,0,0,Te),gd(this.layoutVertexArray,Ne.x,Ne.y,Ze.x,Ze.y,0,1,Te),S.x+=2*Ne.x,S.y+=2*Ne.y,S.vertexCount+=2,Te+=Ye,gd(this.layoutVertexArray,Qe.x,Qe.y,Ze.x,Ze.y,0,0,Te),gd(this.layoutVertexArray,Qe.x,Qe.y,Ze.x,Ze.y,0,1,Te),S.x+=2*Qe.x,S.y+=2*Qe.y,S.vertexCount+=2;const lt=F.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+I>Nn.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),L4[r.type]!=="Polygon")continue;const V=[],J=[],ne=F.vertexLength;for(const me of x)if(me.length!==0){me!==x[0]&&J.push(V.length/2);for(let Te=0;Te<me.length;Te++){const Re=me[Te];gd(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),S.x+=Re.x,S.y+=Re.y,S.vertexCount+=1,V.push(Re.x),V.push(Re.y)}}const ce=N2(V,J);for(let me=0;me<ce.length;me+=3)this.indexArray.emplaceBack(ne+ce[me],ne+ce[me+2],ne+ce[me+1]);F.primitiveLength+=ce.length/3,F.vertexLength+=I;for(let me=0;me<S.vertexCount;me++){const Te=Math.floor(S.x/S.vertexCount),Re=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(Te,Re)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}function B4(o,r){return o.x===r.x&&(o.x<0||o.x>zn)||o.y===r.y&&(o.y<0||o.y>zn)}function D4(o){return o.every(r=>r.x<0)||o.every(r=>r.x>zn)||o.every(r=>r.y<0)||o.every(r=>r.y>zn)}let H2;$t("FillExtrusionBucket",lv,{omit:["layers","features"]});var N4={get paint(){return H2=H2||new p({"fill-extrusion-opacity":new Yt(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sr(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yt(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yt(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new v(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sr(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sr(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yt(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class $4 extends _{constructor(r){super(r,N4)}createBucket(r){return new lv(r)}queryRadius(){return _m(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,s,h,m,y,x,S,I){const F=xm(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),V=this.paint.get("fill-extrusion-height").evaluate(s,h),J=this.paint.get("fill-extrusion-base").evaluate(s,h),ne=function(me,Te,Re,Ne){const Qe=[];for(const Ze of me){const Ye=[Ze.x,Ze.y,0,1];wm(Ye,Ye,Te),Qe.push(new b(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return Qe}(F,I),ce=function(me,Te,Re,Ne){const Qe=[],Ze=[],Ye=Ne[8]*Te,lt=Ne[9]*Te,_t=Ne[10]*Te,Ft=Ne[11]*Te,nr=Ne[8]*Re,zt=Ne[9]*Re,Ot=Ne[10]*Re,Kt=Ne[11]*Re;for(const Ut of me){const Nt=[],dt=[];for(const Qt of Ut){const Xt=Qt.x,hr=Qt.y,Kr=Ne[0]*Xt+Ne[4]*hr+Ne[12],Zr=Ne[1]*Xt+Ne[5]*hr+Ne[13],Xn=Ne[2]*Xt+Ne[6]*hr+Ne[14],us=Ne[3]*Xt+Ne[7]*hr+Ne[15],ui=Xn+_t,bn=us+Ft,Bi=Kr+nr,Di=Zr+zt,Ni=Xn+Ot,Sn=us+Kt,qn=new b((Kr+Ye)/bn,(Zr+lt)/bn);qn.z=ui/bn,Nt.push(qn);const Ti=new b(Bi/Sn,Di/Sn);Ti.z=Ni/Sn,dt.push(Ti)}Qe.push(Nt),Ze.push(dt)}return[Qe,Ze]}(m,J,V,I);return function(me,Te,Re){let Ne=1/0;E2(Re,Te)&&(Ne=Z2(Re,Te[0]));for(let Qe=0;Qe<Te.length;Qe++){const Ze=Te[Qe],Ye=me[Qe];for(let lt=0;lt<Ze.length-1;lt++){const _t=Ze[lt],Ft=[_t,Ze[lt+1],Ye[lt+1],Ye[lt],_t];S2(Re,Ft)&&(Ne=Math.min(Ne,Z2(Re,Ft)))}}return Ne!==1/0&&Ne}(ce[0],ce[1],ne)}}function yd(o,r){return o.x*r.x+o.y*r.y}function Z2(o,r){if(o.length===1){let s=0;const h=r[s++];let m;for(;!m||h.equals(m);)if(m=r[s++],!m)return 1/0;for(;s<r.length;s++){const y=r[s],x=o[0],S=m.sub(h),I=y.sub(h),F=x.sub(h),V=yd(S,S),J=yd(S,I),ne=yd(I,I),ce=yd(F,S),me=yd(F,I),Te=V*ne-J*J,Re=(ne*ce-J*me)/Te,Ne=(V*me-J*ce)/Te,Qe=h.z*(1-Re-Ne)+m.z*Re+y.z*Ne;if(isFinite(Qe))return Qe}return 1/0}{let s=1/0;for(const h of r)s=Math.min(s,h.z);return s}}const U4=$([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:V4}=U4,G4=$([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:W4}=G4,H4=Hl.VectorTileFeature.types,Z4=Math.cos(Math.PI/180*37.5),X2=Math.pow(2,14)/.5;class uv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Qc,this.layoutVertexArray2=new id,this.indexArray=new Zn,this.programConfigurations=new Yu(r.layers,r.zoom),this.segments=new Nn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=iv("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),x=[];for(const{feature:S,id:I,index:F,sourceLayerIndex:V}of r){const J=this.layers[0]._featureFilter.needGeometry,ne=ec(S,J);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),ne,h))continue;const ce=y?m.evaluate(ne,{},h):void 0,me={id:I,properties:S.properties,type:S.type,sourceLayerIndex:V,index:F,geometry:J?ne.geometry:Qu(S),patterns:{},sortKey:ce};x.push(me)}y&&x.sort((S,I)=>S.sortKey-I.sortKey);for(const S of x){const{geometry:I,index:F,sourceLayerIndex:V}=S;if(this.hasPattern){const J=ov("line",this.layers,S,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(S,I,F,h,{});s.featureIndex.insert(r[F].feature,I,F,V,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,W4)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,V4),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,h,m,y){const x=this.layers[0].layout,S=x.get("line-join").evaluate(r,{}),I=x.get("line-cap"),F=x.get("line-miter-limit"),V=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const J of s)this.addLine(J,r,S,I,F,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}addLine(r,s,h,m,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ne=0;Ne<r.length-1;Ne++)this.totalDistance+=r[Ne].dist(r[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=H4[s.type]==="Polygon";let I=r.length;for(;I>=2&&r[I-1].equals(r[I-2]);)I--;let F=0;for(;F<I-1&&r[F].equals(r[F+1]);)F++;if(I<(S?3:2))return;h==="bevel"&&(y=1.05);const V=this.overscaling<=16?15*zn/(512*this.overscaling):0,J=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let ne,ce,me,Te,Re;this.e1=this.e2=-1,S&&(ne=r[I-2],Re=r[F].sub(ne)._unit()._perp());for(let Ne=F;Ne<I;Ne++){if(me=Ne===I-1?S?r[F+1]:void 0:r[Ne+1],me&&r[Ne].equals(me))continue;Re&&(Te=Re),ne&&(ce=ne),ne=r[Ne],Re=me?me.sub(ne)._unit()._perp():Te,Te=Te||Re;let Qe=Te.add(Re);Qe.x===0&&Qe.y===0||Qe._unit();const Ze=Te.x*Re.x+Te.y*Re.y,Ye=Qe.x*Re.x+Qe.y*Re.y,lt=Ye!==0?1/Ye:1/0,_t=2*Math.sqrt(2-2*Ye),Ft=Ye<Z4&&ce&&me,nr=Te.x*Re.y-Te.y*Re.x>0;if(Ft&&Ne>F){const Kt=ne.dist(ce);if(Kt>2*V){const Ut=ne.sub(ne.sub(ce)._mult(V/Kt)._round());this.updateDistance(ce,Ut),this.addCurrentVertex(Ut,Te,0,0,J),ce=Ut}}const zt=ce&&me;let Ot=zt?h:S?"butt":m;if(zt&&Ot==="round"&&(lt<x?Ot="miter":lt<=2&&(Ot="fakeround")),Ot==="miter"&&lt>y&&(Ot="bevel"),Ot==="bevel"&&(lt>2&&(Ot="flipbevel"),lt<y&&(Ot="miter")),ce&&this.updateDistance(ce,ne),Ot==="miter")Qe._mult(lt),this.addCurrentVertex(ne,Qe,0,0,J);else if(Ot==="flipbevel"){if(lt>100)Qe=Re.mult(-1);else{const Kt=lt*Te.add(Re).mag()/Te.sub(Re).mag();Qe._perp()._mult(Kt*(nr?-1:1))}this.addCurrentVertex(ne,Qe,0,0,J),this.addCurrentVertex(ne,Qe.mult(-1),0,0,J)}else if(Ot==="bevel"||Ot==="fakeround"){const Kt=-Math.sqrt(lt*lt-1),Ut=nr?Kt:0,Nt=nr?0:Kt;if(ce&&this.addCurrentVertex(ne,Te,Ut,Nt,J),Ot==="fakeround"){const dt=Math.round(180*_t/Math.PI/20);for(let Qt=1;Qt<dt;Qt++){let Xt=Qt/dt;if(Xt!==.5){const Kr=Xt-.5;Xt+=Xt*Kr*(Xt-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*Kr*Kr+(.848013+Ze*(.215638*Ze-1.06021)))}const hr=Re.sub(Te)._mult(Xt)._add(Te)._unit()._mult(nr?-1:1);this.addHalfVertex(ne,hr.x,hr.y,!1,nr,0,J)}}me&&this.addCurrentVertex(ne,Re,-Ut,-Nt,J)}else if(Ot==="butt")this.addCurrentVertex(ne,Qe,0,0,J);else if(Ot==="square"){const Kt=ce?1:-1;this.addCurrentVertex(ne,Qe,Kt,Kt,J)}else Ot==="round"&&(ce&&(this.addCurrentVertex(ne,Te,0,0,J),this.addCurrentVertex(ne,Te,1,1,J,!0)),me&&(this.addCurrentVertex(ne,Re,-1,-1,J,!0),this.addCurrentVertex(ne,Re,0,0,J)));if(Ft&&Ne<I-1){const Kt=ne.dist(me);if(Kt>2*V){const Ut=ne.add(me.sub(ne)._mult(V/Kt)._round());this.updateDistance(ne,Ut),this.addCurrentVertex(Ut,Re,0,0,J),ne=Ut}}}}addCurrentVertex(r,s,h,m,y,x=!1){const S=s.y*m-s.x,I=-s.y-s.x*m;this.addHalfVertex(r,s.x+s.y*h,s.y-s.x*h,x,!1,h,y),this.addHalfVertex(r,S,I,x,!0,-m,y),this.distance>X2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,h,m,y,x))}addHalfVertex({x:r,y:s},h,m,y,x,S,I){const F=.5*(this.lineClips?this.scaledDistance*(X2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(y?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),I.primitiveLength++),x?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}let q2,K2;$t("LineBucket",uv,{omit:["layers","patternFeatures"]});var J2={get paint(){return K2=K2||new p({"line-opacity":new sr(et.paint_line["line-opacity"]),"line-color":new sr(et.paint_line["line-color"]),"line-translate":new Yt(et.paint_line["line-translate"]),"line-translate-anchor":new Yt(et.paint_line["line-translate-anchor"]),"line-width":new sr(et.paint_line["line-width"]),"line-gap-width":new sr(et.paint_line["line-gap-width"]),"line-offset":new sr(et.paint_line["line-offset"]),"line-blur":new sr(et.paint_line["line-blur"]),"line-dasharray":new n(et.paint_line["line-dasharray"]),"line-pattern":new v(et.paint_line["line-pattern"]),"line-gradient":new u(et.paint_line["line-gradient"])})},get layout(){return q2=q2||new p({"line-cap":new Yt(et.layout_line["line-cap"]),"line-join":new sr(et.layout_line["line-join"]),"line-miter-limit":new Yt(et.layout_line["line-miter-limit"]),"line-round-limit":new Yt(et.layout_line["line-round-limit"]),"line-sort-key":new sr(et.layout_line["line-sort-key"])})}};class X4 extends sr{possiblyEvaluate(r,s){return s=new Qr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,h,m){return s=P({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,h,m)}}let Pm;class q4 extends _{constructor(r){super(r,J2),this.gradientVersion=0,Pm||(Pm=new X4(J2.paint.properties["line-width"].specification),Pm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof bs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,s){super.recalculate(r,s),this.paint._values["line-floorwidth"]=Pm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new uv(r)}queryRadius(r){const s=r,h=Y2(cd("line-width",this,s),cd("line-gap-width",this,s)),m=cd("line-offset",this,s);return h/2+Math.abs(m)+_m(this.paint.get("line-translate"))}queryIntersectsFeature(r,s,h,m,y,x,S){const I=xm(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),F=S/2*Y2(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),V=this.paint.get("line-offset").evaluate(s,h);return V&&(m=function(J,ne){const ce=[];for(let me=0;me<J.length;me++){const Te=J[me],Re=[];for(let Ne=0;Ne<Te.length;Ne++){const Qe=Te[Ne-1],Ze=Te[Ne],Ye=Te[Ne+1],lt=Ne===0?new b(0,0):Ze.sub(Qe)._unit()._perp(),_t=Ne===Te.length-1?new b(0,0):Ye.sub(Ze)._unit()._perp(),Ft=lt._add(_t)._unit(),nr=Ft.x*_t.x+Ft.y*_t.y;nr!==0&&Ft._mult(1/nr),Re.push(Ft._mult(ne)._add(Ze))}ce.push(Re)}return ce}(m,V*S)),function(J,ne,ce){for(let me=0;me<ne.length;me++){const Te=ne[me];if(J.length>=3){for(let Re=0;Re<Te.length;Re++)if(ih(J,Te[Re]))return!0}if(i4(J,Te,ce))return!0}return!1}(I,m,F)}isTileClipped(){return!0}}function Y2(o,r){return r>0?r+2*o:o}const K4=$([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),J4=$([{name:"a_projected_pos",components:3,type:"Float32"}],4);$([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Y4=$([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);$([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Q2=$([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Q4=$([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function eF(o,r,s){return o.sections.forEach(h=>{h.text=function(m,y,x){const S=y.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),aa.applyArabicShaping&&(m=aa.applyArabicShaping(m)),m}(h.text,r,s)}),o}$([{name:"triangle",components:3,type:"Uint16"}]),$([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),$([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),$([{type:"Float32",name:"offsetX"}]),$([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),$([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const vd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var $n=24,eS=Hr,tS=function(o,r,s,h,m){var y,x,S=8*m-h-1,I=(1<<S)-1,F=I>>1,V=-7,J=s?m-1:0,ne=s?-1:1,ce=o[r+J];for(J+=ne,y=ce&(1<<-V)-1,ce>>=-V,V+=S;V>0;y=256*y+o[r+J],J+=ne,V-=8);for(x=y&(1<<-V)-1,y>>=-V,V+=h;V>0;x=256*x+o[r+J],J+=ne,V-=8);if(y===0)y=1-F;else{if(y===I)return x?NaN:1/0*(ce?-1:1);x+=Math.pow(2,h),y-=F}return(ce?-1:1)*x*Math.pow(2,y-h)},rS=function(o,r,s,h,m,y){var x,S,I,F=8*y-m-1,V=(1<<F)-1,J=V>>1,ne=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=h?0:y-1,me=h?1:-1,Te=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,x=V):(x=Math.floor(Math.log(r)/Math.LN2),r*(I=Math.pow(2,-x))<1&&(x--,I*=2),(r+=x+J>=1?ne/I:ne*Math.pow(2,1-J))*I>=2&&(x++,I/=2),x+J>=V?(S=0,x=V):x+J>=1?(S=(r*I-1)*Math.pow(2,m),x+=J):(S=r*Math.pow(2,J-1)*Math.pow(2,m),x=0));m>=8;o[s+ce]=255&S,ce+=me,S/=256,m-=8);for(x=x<<m|S,F+=m;F>0;o[s+ce]=255&x,ce+=me,x/=256,F-=8);o[s+ce-me]|=128*Te};function Hr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Hr.Varint=0,Hr.Fixed64=1,Hr.Bytes=2,Hr.Fixed32=5;var cv=4294967296,nS=1/cv,iS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ja(o){return o.type===Hr.Bytes?o.readVarint()+o.pos:o.pos+1}function lh(o,r,s){return s?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function oS(o,r,s){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=o;m--)s.buf[m+h]=s.buf[m]}function tF(o,r){for(var s=0;s<o.length;s++)r.writeVarint(o[s])}function rF(o,r){for(var s=0;s<o.length;s++)r.writeSVarint(o[s])}function nF(o,r){for(var s=0;s<o.length;s++)r.writeFloat(o[s])}function iF(o,r){for(var s=0;s<o.length;s++)r.writeDouble(o[s])}function oF(o,r){for(var s=0;s<o.length;s++)r.writeBoolean(o[s])}function sF(o,r){for(var s=0;s<o.length;s++)r.writeFixed32(o[s])}function aF(o,r){for(var s=0;s<o.length;s++)r.writeSFixed32(o[s])}function lF(o,r){for(var s=0;s<o.length;s++)r.writeFixed64(o[s])}function uF(o,r){for(var s=0;s<o.length;s++)r.writeSFixed64(o[s])}function Am(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function uh(o,r,s){o[s]=r,o[s+1]=r>>>8,o[s+2]=r>>>16,o[s+3]=r>>>24}function sS(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}Hr.prototype={destroy:function(){this.buf=null},readFields:function(o,r,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,o(m,r,this),this.pos===y&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=Am(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=sS(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Am(this.buf,this.pos)+Am(this.buf,this.pos+4)*cv;return this.pos+=8,o},readSFixed64:function(){var o=Am(this.buf,this.pos)+sS(this.buf,this.pos+4)*cv;return this.pos+=8,o},readFloat:function(){var o=tS(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=tS(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,s,h=this.buf;return r=127&(s=h[this.pos++]),s<128?r:(r|=(127&(s=h[this.pos++]))<<7,s<128?r:(r|=(127&(s=h[this.pos++]))<<14,s<128?r:(r|=(127&(s=h[this.pos++]))<<21,s<128?r:function(m,y,x){var S,I,F=x.buf;if(S=(112&(I=F[x.pos++]))>>4,I<128||(S|=(127&(I=F[x.pos++]))<<3,I<128)||(S|=(127&(I=F[x.pos++]))<<10,I<128)||(S|=(127&(I=F[x.pos++]))<<17,I<128)||(S|=(127&(I=F[x.pos++]))<<24,I<128)||(S|=(1&(I=F[x.pos++]))<<31,I<128))return lh(m,S,y);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&iS?function(s,h,m){return iS.decode(s.subarray(h,m))}(this.buf,r,o):function(s,h,m){for(var y="",x=h;x<m;){var S,I,F,V=s[x],J=null,ne=V>239?4:V>223?3:V>191?2:1;if(x+ne>m)break;ne===1?V<128&&(J=V):ne===2?(192&(S=s[x+1]))==128&&(J=(31&V)<<6|63&S)<=127&&(J=null):ne===3?(I=s[x+2],(192&(S=s[x+1]))==128&&(192&I)==128&&((J=(15&V)<<12|(63&S)<<6|63&I)<=2047||J>=55296&&J<=57343)&&(J=null)):ne===4&&(I=s[x+2],F=s[x+3],(192&(S=s[x+1]))==128&&(192&I)==128&&(192&F)==128&&((J=(15&V)<<18|(63&S)<<12|(63&I)<<6|63&F)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,ne=1):J>65535&&(J-=65536,y+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),y+=String.fromCharCode(J),x+=ne}return y}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==Hr.Bytes)return o.push(this.readVarint(r));var s=Ja(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==Hr.Bytes)return o.push(this.readSVarint());var r=Ja(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Hr.Bytes)return o.push(this.readBoolean());var r=Ja(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Hr.Bytes)return o.push(this.readFloat());var r=Ja(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Hr.Bytes)return o.push(this.readDouble());var r=Ja(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Hr.Bytes)return o.push(this.readFixed32());var r=Ja(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Hr.Bytes)return o.push(this.readSFixed32());var r=Ja(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Hr.Bytes)return o.push(this.readFixed64());var r=Ja(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Hr.Bytes)return o.push(this.readSFixed64());var r=Ja(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===Hr.Varint)for(;this.buf[this.pos++]>127;);else if(r===Hr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Hr.Fixed32)this.pos+=4;else{if(r!==Hr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),uh(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),uh(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),uh(this.buf,-1&o,this.pos),uh(this.buf,Math.floor(o*nS),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),uh(this.buf,-1&o,this.pos),uh(this.buf,Math.floor(o*nS),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,s){var h,m;if(r>=0?(h=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,x,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)}(h,0,s),function(y,x){var S=(7&y)<<4;x.buf[x.pos++]|=S|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,m,y){for(var x,S,I=0;I<m.length;I++){if((x=m.charCodeAt(I))>55295&&x<57344){if(!S){x>56319||I+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y}(this.buf,o,this.pos);var s=this.pos-r;s>=128&&oS(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),rS(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),rS(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,r){this.pos++;var s=this.pos;o(r,this);var h=this.pos-s;h>=128&&oS(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,s){this.writeTag(o,Hr.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,tF,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,rF,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,oF,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,nF,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,iF,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,sF,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,aF,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,lF,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,uF,r)},writeBytesField:function(o,r){this.writeTag(o,Hr.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,Hr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,Hr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,Hr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,Hr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,Hr.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,Hr.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,Hr.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,Hr.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,Hr.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var hv=w(eS);const fv=3;function cF(o,r,s){o===1&&s.readMessage(hF,r)}function hF(o,r,s){if(o===3){const{id:h,bitmap:m,width:y,height:x,left:S,top:I,advance:F}=s.readMessage(fF,{});r.push({id:h,bitmap:new fd({width:y+2*fv,height:x+2*fv},m),metrics:{width:y,height:x,left:S,top:I,advance:F}})}}function fF(o,r,s){o===1?r.id=s.readVarint():o===2?r.bitmap=s.readBytes():o===3?r.width=s.readVarint():o===4?r.height=s.readVarint():o===5?r.left=s.readSVarint():o===6?r.top=s.readSVarint():o===7&&(r.advance=s.readVarint())}const aS=fv;function lS(o){let r=0,s=0;for(const x of o)r+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let m=0,y=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const I=h[S];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,y=Math.max(y,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===I.w&&x.h===I.h){const F=h.pop();S<h.length&&(h[S]=F)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(h.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:m,h:y,fill:r/(m*y)||0}}const Ki=1;class dv{constructor(r,{pixelRatio:s,version:h,stretchX:m,stretchY:y,content:x,textFitWidth:S,textFitHeight:I}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=x,this.version=h,this.textFitWidth=S,this.textFitHeight=I}get tl(){return[this.paddedRect.x+Ki,this.paddedRect.y+Ki]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ki,this.paddedRect.y+this.paddedRect.h-Ki]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ki)/this.pixelRatio,(this.paddedRect.h-2*Ki)/this.pixelRatio]}}class uS{constructor(r,s){const h={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(r,h,y),this.addImages(s,m,y);const{w:x,h:S}=lS(y),I=new Ro({width:x||1,height:S||1});for(const F in r){const V=r[F],J=h[F].paddedRect;Ro.copy(V.data,I,{x:0,y:0},{x:J.x+Ki,y:J.y+Ki},V.data)}for(const F in s){const V=s[F],J=m[F].paddedRect,ne=J.x+Ki,ce=J.y+Ki,me=V.data.width,Te=V.data.height;Ro.copy(V.data,I,{x:0,y:0},{x:ne,y:ce},V.data),Ro.copy(V.data,I,{x:0,y:Te-1},{x:ne,y:ce-1},{width:me,height:1}),Ro.copy(V.data,I,{x:0,y:0},{x:ne,y:ce+Te},{width:me,height:1}),Ro.copy(V.data,I,{x:me-1,y:0},{x:ne-1,y:ce},{width:1,height:Te}),Ro.copy(V.data,I,{x:0,y:0},{x:ne+me,y:ce},{width:1,height:Te})}this.image=I,this.iconPositions=h,this.patternPositions=m}addImages(r,s,h){for(const m in r){const y=r[m],x={x:0,y:0,w:y.data.width+2*Ki,h:y.data.height+2*Ki};h.push(x),s[m]=new dv(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),s)}patchUpdatedImage(r,s,h){if(!r||!s||r.version===s.version)return;r.version=s.version;const[m,y]=r.tl;h.update(s.data,void 0,{x:m,y})}}var Zl;$t("ImagePosition",dv),$t("ImageAtlas",uS),d.ai=void 0,(Zl=d.ai||(d.ai={}))[Zl.none=0]="none",Zl[Zl.horizontal=1]="horizontal",Zl[Zl.vertical=2]="vertical",Zl[Zl.horizontalOnly=3]="horizontalOnly";const _d=-17;class xd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const h=new xd;return h.scale=r||1,h.fontStack=s,h}static forImage(r){const s=new xd;return s.imageName=r,s}}class ch{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const h=new ch;for(let m=0;m<r.sections.length;m++){const y=r.sections[m];y.image?h.addImageSection(y):h.addTextSection(y,s)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let s="";for(let h=0;h<r.length;h++){const m=r.charCodeAt(h+1)||null,y=r.charCodeAt(h-1)||null;s+=m&&hm(m)&&!vd[r[h+1]]||y&&hm(y)&&!vd[r[h-1]]||!vd[r[h]]?r[h]:vd[r[h]]}return s}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&Cm[this.text.charCodeAt(h)];h++)r++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&Cm[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const h=new ch;return h.text=this.text.substring(r,s),h.sectionIndex=this.sectionIndex.slice(r,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(xd.forText(r.scale,r.fontStack||s));const h=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(h)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void ge("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(xd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):ge("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Im(o,r,s,h,m,y,x,S,I,F,V,J,ne,ce,me){const Te=ch.fromFeature(o,m);let Re;J===d.ai.vertical&&Te.verticalizePunctuation();const{processBidirectionalText:Ne,processStyledBidirectionalText:Qe}=aa;if(Ne&&Te.sections.length===1){Re=[];const lt=Ne(Te.toString(),pv(Te,F,y,r,h,ce));for(const _t of lt){const Ft=new ch;Ft.text=_t,Ft.sections=Te.sections;for(let nr=0;nr<_t.length;nr++)Ft.sectionIndex.push(0);Re.push(Ft)}}else if(Qe){Re=[];const lt=Qe(Te.text,Te.sectionIndex,pv(Te,F,y,r,h,ce));for(const _t of lt){const Ft=new ch;Ft.text=_t[0],Ft.sectionIndex=_t[1],Ft.sections=Te.sections,Re.push(Ft)}}else Re=function(lt,_t){const Ft=[],nr=lt.text;let zt=0;for(const Ot of _t)Ft.push(lt.substring(zt,Ot)),zt=Ot;return zt<nr.length&&Ft.push(lt.substring(zt,nr.length)),Ft}(Te,pv(Te,F,y,r,h,ce));const Ze=[],Ye={positionedLines:Ze,text:Te.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(lt,_t,Ft,nr,zt,Ot,Kt,Ut,Nt,dt,Qt,Xt){let hr=0,Kr=_d,Zr=0,Xn=0;const us=Ut==="right"?1:Ut==="left"?0:.5;let ui=0;for(const Sn of zt){Sn.trim();const qn=Sn.getMaxScale(),Ti=(qn-1)*$n,ci={positionedGlyphs:[],lineOffset:0};lt.positionedLines[ui]=ci;const $i=ci.positionedGlyphs;let hi=0;if(!Sn.length()){Kr+=Ot,++ui;continue}for(let Ji=0;Ji<Sn.length();Ji++){const Rr=Sn.getSection(Ji),en=Sn.getSectionIndex(Ji),cn=Sn.getCharCode(Ji);let po=0,gn=null,ph=null,ha=null,fa=$n;const cs=!(Nt===d.ai.horizontal||!Qt&&!td(cn)||Qt&&(Cm[cn]||(bn=cn,Lt.Arabic(bn)||Lt["Arabic Supplement"](bn)||Lt["Arabic Extended-A"](bn)||Lt["Arabic Presentation Forms-A"](bn)||Lt["Arabic Presentation Forms-B"](bn))));if(Rr.imageName){const Lo=nr[Rr.imageName];if(!Lo)continue;ha=Rr.imageName,lt.iconsInText=lt.iconsInText||!0,ph=Lo.paddedRect;const Qn=Lo.displaySize;Rr.scale=Rr.scale*$n/Xt,gn={width:Qn[0],height:Qn[1],left:Ki,top:-aS,advance:cs?Qn[1]:Qn[0]},po=Ti+($n-Qn[1]*Rr.scale),fa=gn.advance;const Ya=cs?Qn[0]*Rr.scale-$n*qn:Qn[1]*Rr.scale-$n*qn;Ya>0&&Ya>hi&&(hi=Ya)}else{const Lo=Ft[Rr.fontStack],Qn=Lo&&Lo[cn];if(Qn&&Qn.rect)ph=Qn.rect,gn=Qn.metrics;else{const Ya=_t[Rr.fontStack],Td=Ya&&Ya[cn];if(!Td)continue;gn=Td.metrics}po=(qn-Rr.scale)*$n}cs?(lt.verticalizable=!0,$i.push({glyph:cn,imageName:ha,x:hr,y:Kr+po,vertical:cs,scale:Rr.scale,fontStack:Rr.fontStack,sectionIndex:en,metrics:gn,rect:ph}),hr+=fa*Rr.scale+dt):($i.push({glyph:cn,imageName:ha,x:hr,y:Kr+po,vertical:cs,scale:Rr.scale,fontStack:Rr.fontStack,sectionIndex:en,metrics:gn,rect:ph}),hr+=gn.advance*Rr.scale+dt)}$i.length!==0&&(Zr=Math.max(hr-dt,Zr),gF($i,0,$i.length-1,us,hi)),hr=0;const zo=Ot*qn+hi;ci.lineOffset=Math.max(hi,Ti),Kr+=zo,Xn=Math.max(zo,Xn),++ui}var bn;const Bi=Kr-_d,{horizontalAlign:Di,verticalAlign:Ni}=mv(Kt);(function(Sn,qn,Ti,ci,$i,hi,zo,Ji,Rr){const en=(qn-Ti)*$i;let cn=0;cn=hi!==zo?-Ji*ci-_d:(-ci*Rr+.5)*zo;for(const po of Sn)for(const gn of po.positionedGlyphs)gn.x+=en,gn.y+=cn})(lt.positionedLines,us,Di,Ni,Zr,Xn,Ot,Bi,zt.length),lt.top+=-Ni*Bi,lt.bottom=lt.top+Bi,lt.left+=-Di*Zr,lt.right=lt.left+Zr}(Ye,r,s,h,Re,x,S,I,J,F,ne,me),!function(lt){for(const _t of lt)if(_t.positionedGlyphs.length!==0)return!1;return!0}(Ze)&&Ye}const Cm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},dF={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},pF={40:!0};function cS(o,r,s,h,m,y){if(r.imageName){const x=h[r.imageName];return x?x.displaySize[0]*r.scale*$n/y+m:0}{const x=s[r.fontStack],S=x&&x[o];return S?S.metrics.advance*r.scale+m:0}}function hS(o,r,s,h){const m=Math.pow(o-r,2);return h?o<r?m/2:2*m:m+Math.abs(s)*s}function mF(o,r,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function fS(o,r,s,h,m,y){let x=null,S=hS(r,s,m,y);for(const I of h){const F=hS(r-I.x,s,m,y)+I.badness;F<=S&&(x=I,S=F)}return{index:o,x:r,priorBreak:x,badness:S}}function dS(o){return o?dS(o.priorBreak).concat(o.index):[]}function pv(o,r,s,h,m,y){if(!o)return[];const x=[],S=function(J,ne,ce,me,Te,Re){let Ne=0;for(let Qe=0;Qe<J.length();Qe++){const Ze=J.getSection(Qe);Ne+=cS(J.getCharCode(Qe),Ze,me,Te,ne,Re)}return Ne/Math.max(1,Math.ceil(Ne/ce))}(o,r,s,h,m,y),I=o.text.indexOf("​")>=0;let F=0;for(let J=0;J<o.length();J++){const ne=o.getSection(J),ce=o.getCharCode(J);if(Cm[ce]||(F+=cS(ce,ne,h,m,r,y)),J<o.length()-1){const me=!((V=ce)<11904||!(Lt["Bopomofo Extended"](V)||Lt.Bopomofo(V)||Lt["CJK Compatibility Forms"](V)||Lt["CJK Compatibility Ideographs"](V)||Lt["CJK Compatibility"](V)||Lt["CJK Radicals Supplement"](V)||Lt["CJK Strokes"](V)||Lt["CJK Symbols and Punctuation"](V)||Lt["CJK Unified Ideographs Extension A"](V)||Lt["CJK Unified Ideographs"](V)||Lt["Enclosed CJK Letters and Months"](V)||Lt["Halfwidth and Fullwidth Forms"](V)||Lt.Hiragana(V)||Lt["Ideographic Description Characters"](V)||Lt["Kangxi Radicals"](V)||Lt["Katakana Phonetic Extensions"](V)||Lt.Katakana(V)||Lt["Vertical Forms"](V)||Lt["Yi Radicals"](V)||Lt["Yi Syllables"](V)));(dF[ce]||me||ne.imageName||J!==o.length()-2&&pF[o.getCharCode(J+1)])&&x.push(fS(J+1,F,S,x,mF(ce,o.getCharCode(J+1),me&&I),!1))}}var V;return dS(fS(o.length(),F,S,x,0,!0))}function mv(o){let r=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function gF(o,r,s,h,m){if(!h&&!m)return;const y=o[s],x=(o[s].x+y.metrics.advance*y.scale)*h;for(let S=r;S<=s;S++)o[S].x-=x,o[S].y+=m}function yF(o,r,s){const{horizontalAlign:h,verticalAlign:m}=mv(s),y=r[0]-o.displaySize[0]*h,x=r[1]-o.displaySize[1]*m;return{image:o,top:x,bottom:x+o.displaySize[1],left:y,right:y+o.displaySize[0]}}function pS(o){var r,s;let h=o.left,m=o.top,y=o.right-h,x=o.bottom-m;const S=(r=o.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",I=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",F=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(I==="proportional"){if(S==="stretchOnly"&&y/x<F||S==="proportional"){const V=Math.ceil(x*F);h*=V/y,y=V}}else if(S==="proportional"&&I==="stretchOnly"&&F!==0&&y/x>F){const V=Math.ceil(y/F);m*=V/x,x=V}return{x1:h,y1:m,x2:h+y,y2:m+x}}function mS(o,r,s,h,m,y){const x=o.image;let S;if(x.content){const Re=x.content,Ne=x.pixelRatio||1;S=[Re[0]/Ne,Re[1]/Ne,x.displaySize[0]-Re[2]/Ne,x.displaySize[1]-Re[3]/Ne]}const I=r.left*y,F=r.right*y;let V,J,ne,ce;s==="width"||s==="both"?(ce=m[0]+I-h[3],J=m[0]+F+h[1]):(ce=m[0]+(I+F-x.displaySize[0])/2,J=ce+x.displaySize[0]);const me=r.top*y,Te=r.bottom*y;return s==="height"||s==="both"?(V=m[1]+me-h[0],ne=m[1]+Te+h[2]):(V=m[1]+(me+Te-x.displaySize[1])/2,ne=V+x.displaySize[1]),{image:x,top:V,right:J,bottom:ne,left:ce,collisionPadding:S}}const wd=255,ca=128,Xl=wd*ca;function gS(o,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Qr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let y=0;for(;y<h.length&&h[y]<=o;)y++;y=Math.max(0,y-1);let x=y;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[y],I=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:I,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:I,minSize:s.evaluate(new Qr(S)),maxSize:s.evaluate(new Qr(I)),interpolationType:m}}}function gv(o,r,s){let h="never";const m=o.get(r);return m?h=m:o.get(s)&&(h="always"),h}const vF=Hl.VectorTileFeature.types,_F=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mm(o,r,s,h,m,y,x,S,I,F,V,J,ne){const ce=S?Math.min(Xl,Math.round(S[0])):0,me=S?Math.min(Xl,Math.round(S[1])):0;o.emplaceBack(r,s,Math.round(32*h),Math.round(32*m),y,x,(ce<<1)+(I?1:0),me,16*F,16*V,256*J,256*ne)}function yv(o,r,s){o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s)}function xF(o){for(const r of o.sections)if(rd(r.text))return!0;return!1}class vv{constructor(r){this.layoutVertexArray=new Fo,this.indexArray=new Zn,this.programConfigurations=r,this.segments=new Nn,this.dynamicLayoutVertexArray=new la,this.opacityVertexArray=new Ul,this.hasVisibleVertices=!1,this.placedSymbolArray=new ln}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,K4.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,J4.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,_F,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$t("SymbolBuffers",vv);class _v{constructor(r,s,h){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Nn,this.collisionVertexArray=new ai}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Y4.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$t("CollisionBuffers",_v);class hh{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=J0([]),this.placementViewportMatrix=J0([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gS(this.zoom,s["text-size"]),this.iconSizeData=gS(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=gv(h,"text-overlap","text-allow-overlap")!=="never"||gv(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new vv(new Yu(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new vv(new Yu(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new un,this.lineVertexArray=new zi,this.symbolInstances=new ko,this.textAnchorOffsets=new ii}calculateGlyphDependencies(r,s,h,m,y){for(let x=0;x<r.length;x++)if(s[r.charCodeAt(x)]=!0,(h||m)&&y){const S=vd[r.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(r,s,h){const m=this.layers[0],y=m.layout,x=y.get("text-font"),S=y.get("text-field"),I=y.get("icon-image"),F=(S.value.kind!=="constant"||S.value.value instanceof An&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),V=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,J=y.get("symbol-sort-key");if(this.features=[],!F&&!V)return;const ne=s.iconDependencies,ce=s.glyphDependencies,me=s.availableImages,Te=new Qr(this.zoom);for(const{feature:Re,id:Ne,index:Qe,sourceLayerIndex:Ze}of r){const Ye=m._featureFilter.needGeometry,lt=ec(Re,Ye);if(!m._featureFilter.filter(Te,lt,h))continue;let _t,Ft;if(Ye||(lt.geometry=Qu(Re)),F){const zt=m.getValueAndResolveTokens("text-field",lt,h,me),Ot=An.factory(zt),Kt=this.hasRTLText=this.hasRTLText||xF(Ot);(!Kt||aa.getRTLTextPluginStatus()==="unavailable"||Kt&&aa.isParsed())&&(_t=eF(Ot,m,lt))}if(V){const zt=m.getValueAndResolveTokens("icon-image",lt,h,me);Ft=zt instanceof Hn?zt:Hn.fromString(zt)}if(!_t&&!Ft)continue;const nr=this.sortFeaturesByKey?J.evaluate(lt,{},h):void 0;if(this.features.push({id:Ne,text:_t,icon:Ft,index:Qe,sourceLayerIndex:Ze,geometry:lt.geometry,properties:Re.properties,type:vF[Re.type],sortKey:nr}),Ft&&(ne[Ft.name]=!0),_t){const zt=x.evaluate(lt,{},h).join(","),Ot=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ai.vertical)>=0;for(const Kt of _t.sections)if(Kt.image)ne[Kt.image.name]=!0;else{const Ut=ed(_t.toString()),Nt=Kt.fontStack||zt,dt=ce[Nt]=ce[Nt]||{};this.calculateGlyphDependencies(Kt.text,dt,Ot,this.allowVerticalPlacement,Ut)}}}y.get("symbol-placement")==="line"&&(this.features=function(Re){const Ne={},Qe={},Ze=[];let Ye=0;function lt(zt){Ze.push(Re[zt]),Ye++}function _t(zt,Ot,Kt){const Ut=Qe[zt];return delete Qe[zt],Qe[Ot]=Ut,Ze[Ut].geometry[0].pop(),Ze[Ut].geometry[0]=Ze[Ut].geometry[0].concat(Kt[0]),Ut}function Ft(zt,Ot,Kt){const Ut=Ne[Ot];return delete Ne[Ot],Ne[zt]=Ut,Ze[Ut].geometry[0].shift(),Ze[Ut].geometry[0]=Kt[0].concat(Ze[Ut].geometry[0]),Ut}function nr(zt,Ot,Kt){const Ut=Kt?Ot[0][Ot[0].length-1]:Ot[0][0];return`${zt}:${Ut.x}:${Ut.y}`}for(let zt=0;zt<Re.length;zt++){const Ot=Re[zt],Kt=Ot.geometry,Ut=Ot.text?Ot.text.toString():null;if(!Ut){lt(zt);continue}const Nt=nr(Ut,Kt),dt=nr(Ut,Kt,!0);if(Nt in Qe&&dt in Ne&&Qe[Nt]!==Ne[dt]){const Qt=Ft(Nt,dt,Kt),Xt=_t(Nt,dt,Ze[Qt].geometry);delete Ne[Nt],delete Qe[dt],Qe[nr(Ut,Ze[Xt].geometry,!0)]=Xt,Ze[Qt].geometry=null}else Nt in Qe?_t(Nt,dt,Kt):dt in Ne?Ft(Nt,dt,Kt):(lt(zt),Ne[Nt]=Ye-1,Qe[dt]=Ye-1)}return Ze.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ne)=>Re.sortKey-Ne.sortKey)}update(r,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const h=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(s[r.segment+1]),y=r.dist(s[r.segment]);const x={};for(let S=r.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:m},S<s.length-1&&(m+=s[S+1].dist(s[S]));for(let S=r.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:y},S>0&&(y+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const I=x[S];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,s,h,m,y,x,S,I,F,V,J,ne){const ce=r.indexArray,me=r.layoutVertexArray,Te=r.segments.prepareSegment(4*s.length,me,ce,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ne=Te.vertexLength,Qe=this.allowVerticalPlacement&&S===d.ai.vertical?Math.PI/2:0,Ze=x.text&&x.text.sections;for(let Ye=0;Ye<s.length;Ye++){const{tl:lt,tr:_t,bl:Ft,br:nr,tex:zt,pixelOffsetTL:Ot,pixelOffsetBR:Kt,minFontScaleX:Ut,minFontScaleY:Nt,glyphOffset:dt,isSDF:Qt,sectionIndex:Xt}=s[Ye],hr=Te.vertexLength,Kr=dt[1];Mm(me,I.x,I.y,lt.x,Kr+lt.y,zt.x,zt.y,h,Qt,Ot.x,Ot.y,Ut,Nt),Mm(me,I.x,I.y,_t.x,Kr+_t.y,zt.x+zt.w,zt.y,h,Qt,Kt.x,Ot.y,Ut,Nt),Mm(me,I.x,I.y,Ft.x,Kr+Ft.y,zt.x,zt.y+zt.h,h,Qt,Ot.x,Kt.y,Ut,Nt),Mm(me,I.x,I.y,nr.x,Kr+nr.y,zt.x+zt.w,zt.y+zt.h,h,Qt,Kt.x,Kt.y,Ut,Nt),yv(r.dynamicLayoutVertexArray,I,Qe),ce.emplaceBack(hr,hr+1,hr+2),ce.emplaceBack(hr+1,hr+2,hr+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dt[0]),Ye!==s.length-1&&Xt===s[Ye+1].sectionIndex||r.programConfigurations.populatePaintArrays(me.length,x,x.index,{},ne,Ze&&Ze[Xt])}r.placedSymbolArray.emplaceBack(I.x,I.y,Re,this.glyphOffsetArray.length-Re,Ne,F,V,I.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,J)}_addCollisionDebugVertex(r,s,h,m,y,x){return s.emplaceBack(0,0),r.emplaceBack(h.x,h.y,m,y,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,s,h,m,y,x,S){const I=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),F=I.vertexLength,V=y.layoutVertexArray,J=y.collisionVertexArray,ne=S.anchorX,ce=S.anchorY;this._addCollisionDebugVertex(V,J,x,ne,ce,new b(r,s)),this._addCollisionDebugVertex(V,J,x,ne,ce,new b(h,s)),this._addCollisionDebugVertex(V,J,x,ne,ce,new b(h,m)),this._addCollisionDebugVertex(V,J,x,ne,ce,new b(r,m)),I.vertexLength+=4;const me=y.indexArray;me.emplaceBack(F,F+1),me.emplaceBack(F+1,F+2),me.emplaceBack(F+2,F+3),me.emplaceBack(F+3,F),I.primitiveLength+=4}addDebugCollisionBoxes(r,s,h,m){for(let y=r;y<s;y++){const x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _v(si,Q2.members,fn),this.iconCollisionBox=new _v(si,Q2.members,fn);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,h,m,y,x,S,I,F){const V={};for(let J=s;J<h;J++){const ne=r.get(J);V.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},V.textFeatureIndex=ne.featureIndex;break}for(let J=m;J<y;J++){const ne=r.get(J);V.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},V.verticalTextFeatureIndex=ne.featureIndex;break}for(let J=x;J<S;J++){const ne=r.get(J);V.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},V.iconFeatureIndex=ne.featureIndex;break}for(let J=I;J<F;J++){const ne=r.get(J);V.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},V.verticalIconFeatureIndex=ne.featureIndex;break}return V}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const h=r.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<m;y+=4)r.indexArray.emplaceBack(y,y+1,y+2),r.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),h=Math.cos(r),m=[],y=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const I=this.symbolInstances.get(S);m.push(0|Math.round(s*I.anchorX+h*I.anchorY)),y.push(I.featureIndex)}return x.sort((S,I)=>m[S]-m[I]||y[I]-y[S]),x}addToSortKeyRanges(r,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,y,x)=>{m>=0&&x.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let yS,vS;$t("SymbolBucket",hh,{omit:["layers","collisionBoxArray","features","compareText"]}),hh.MAX_GLYPHS=65535,hh.addDynamicAttributes=yv;var xv={get paint(){return vS=vS||new p({"icon-opacity":new sr(et.paint_symbol["icon-opacity"]),"icon-color":new sr(et.paint_symbol["icon-color"]),"icon-halo-color":new sr(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new sr(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sr(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Yt(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yt(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new sr(et.paint_symbol["text-opacity"]),"text-color":new sr(et.paint_symbol["text-color"],{runtimeType:gr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sr(et.paint_symbol["text-halo-color"]),"text-halo-width":new sr(et.paint_symbol["text-halo-width"]),"text-halo-blur":new sr(et.paint_symbol["text-halo-blur"]),"text-translate":new Yt(et.paint_symbol["text-translate"]),"text-translate-anchor":new Yt(et.paint_symbol["text-translate-anchor"])})},get layout(){return yS=yS||new p({"symbol-placement":new Yt(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Yt(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yt(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sr(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yt(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yt(et.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Yt(et.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Yt(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yt(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yt(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new sr(et.layout_symbol["icon-size"]),"icon-text-fit":new Yt(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yt(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new sr(et.layout_symbol["icon-image"]),"icon-rotate":new sr(et.layout_symbol["icon-rotate"]),"icon-padding":new sr(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Yt(et.layout_symbol["icon-keep-upright"]),"icon-offset":new sr(et.layout_symbol["icon-offset"]),"icon-anchor":new sr(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yt(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yt(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yt(et.layout_symbol["text-rotation-alignment"]),"text-field":new sr(et.layout_symbol["text-field"]),"text-font":new sr(et.layout_symbol["text-font"]),"text-size":new sr(et.layout_symbol["text-size"]),"text-max-width":new sr(et.layout_symbol["text-max-width"]),"text-line-height":new Yt(et.layout_symbol["text-line-height"]),"text-letter-spacing":new sr(et.layout_symbol["text-letter-spacing"]),"text-justify":new sr(et.layout_symbol["text-justify"]),"text-radial-offset":new sr(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yt(et.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sr(et.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sr(et.layout_symbol["text-anchor"]),"text-max-angle":new Yt(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Yt(et.layout_symbol["text-writing-mode"]),"text-rotate":new sr(et.layout_symbol["text-rotate"]),"text-padding":new Yt(et.layout_symbol["text-padding"]),"text-keep-upright":new Yt(et.layout_symbol["text-keep-upright"]),"text-transform":new sr(et.layout_symbol["text-transform"]),"text-offset":new sr(et.layout_symbol["text-offset"]),"text-allow-overlap":new Yt(et.layout_symbol["text-allow-overlap"]),"text-overlap":new Yt(et.layout_symbol["text-overlap"]),"text-ignore-placement":new Yt(et.layout_symbol["text-ignore-placement"]),"text-optional":new Yt(et.layout_symbol["text-optional"])})}};class _S{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:nt,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$t("FormatSectionOverride",_S,{omit:["defaultValue"]});class km extends _{constructor(r){super(r,xv)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const y of h)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,h,m){const y=this.layout.get(r).evaluate(s,{},h,m),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||kt(x.value)||!y?y:function(S,I){return I.replace(/{([^{}]+)}/g,(F,V)=>S&&V in S?String(S[V]):"")}(s.properties,y)}createBucket(r){return new hh(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of xv.paint.overridableProperties){if(!km.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),h=new _S(s),m=new ut(h,s.property.specification);let y=null;y=s.value.kind==="constant"||s.value.kind==="source"?new Zt("source",m):new Jt("composite",m,s.value.zoomStops),this.paint._values[r]=new ls(s.property,y,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&km.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const h=r.get("text-field"),m=xv.paint.properties[s];let y=!1;const x=S=>{for(const I of S)if(m.overrides&&m.overrides.hasOverride(I))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof An)x(h.value.value.sections);else if(h.value.kind==="source"){const S=F=>{y||(F instanceof ws&&xn(F.value)===ri?x(F.value.sections):F instanceof Ml?x(F.sections):F.eachChild(S))},I=h.value;I._styleExpression&&S(I._styleExpression.expression)}return y}}let xS;var wF={get paint(){return xS=xS||new p({"background-color":new Yt(et.paint_background["background-color"]),"background-pattern":new n(et.paint_background["background-pattern"]),"background-opacity":new Yt(et.paint_background["background-opacity"])})}};class bF extends _{constructor(r){super(r,wF)}}let wS;var SF={get paint(){return wS=wS||new p({"raster-opacity":new Yt(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yt(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yt(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yt(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Yt(et.paint_raster["raster-saturation"]),"raster-contrast":new Yt(et.paint_raster["raster-contrast"]),"raster-resampling":new Yt(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Yt(et.paint_raster["raster-fade-duration"])})}};class EF extends _{constructor(r){super(r,SF)}}class TF extends _{constructor(r){super(r,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class PF{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const wv=63710088e-1;class ql{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ql(W(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,h=this.lat*s,m=r.lat*s,y=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((r.lng-this.lng)*s);return wv*Math.acos(Math.min(y,1))}static convert(r){if(r instanceof ql)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ql(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ql(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const bS=2*Math.PI*wv;function SS(o){return bS*Math.cos(o*Math.PI/180)}function ES(o){return(180+o)/360}function TS(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function PS(o,r){return o/SS(r)}function bv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Om{constructor(r,s,h=0){this.x=+r,this.y=+s,this.z=+h}static fromLngLat(r,s=0){const h=ql.convert(r);return new Om(ES(h.lng),TS(h.lat),PS(s,h.lat))}toLngLat(){return new ql(360*this.x-180,bv(this.y))}toAltitude(){return this.z*SS(bv(this.y))}meterInMercatorCoordinateUnits(){return 1/bS*(r=bv(this.y),1/Math.cos(r*Math.PI/180));var r}}function AS(o,r,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class Sv{constructor(r,s,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||s<0||s>=Math.pow(2,r))throw new Error(`x=${s}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=h,this.key=bd(0,r,r,s,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,h){const m=(x=this.y,S=this.z,I=AS(256*(y=this.x),256*(x=Math.pow(2,S)-x-1),S),F=AS(256*(y+1),256*(x+1),S),I[0]+","+I[1]+","+F[0]+","+F[1]);var y,x,S,I,F;const V=function(J,ne,ce){let me,Te="";for(let Re=J;Re>0;Re--)me=1<<Re-1,Te+=(ne&me?1:0)+(ce&me?2:0);return Te}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new b((r.x*s-this.x)*zn,(r.y*s-this.y)*zn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class IS{constructor(r,s){this.wrap=r,this.canonical=s,this.key=bd(r,s.z,s.z,s.x,s.y)}}class jo{constructor(r,s,h,m,y){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=s,this.canonical=new Sv(h,+m,+y),this.key=bd(s,r,h,m,y)}clone(){return new jo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new jo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jo(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?bd(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):bd(this.wrap*+s,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new jo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new jo(s,this.wrap,s,h,m),new jo(s,this.wrap,s,h+1,m),new jo(s,this.wrap,s,h,m+1),new jo(s,this.wrap,s,h+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new jo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new jo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new IS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Om(r.x-this.wrap,r.y))}}function bd(o,r,s,h,m){(o*=2)<0&&(o=-1*o-1);const y=1<<s;return(y*y*o+y*m+h).toString(36)+s.toString(36)+r.toString(36)}$t("CanonicalTileID",Sv),$t("OverscaledTileID",jo,{omit:["posMatrix"]});class CS{constructor(r,s,h,m=1,y=1,x=1,S=0){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void ge(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=y,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<I;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(I,F)]=this.data[this._idx(I-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,I)]=this.data[this._idx(F,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<I;F++)for(let V=0;V<I;V++){const J=this.get(F,V);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(r,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(r,s);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}unpack(r,s,h){return r*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ro({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,y=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:m=y-1;break;case 1:y=m+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const I=-s*this.dim,F=-h*this.dim;for(let V=x;V<S;V++)for(let J=m;J<y;J++)this.data[this._idx(J,V)]=r.data[this._idx(J+I,V+F)]}}$t("DEMData",CS);class MS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const h=r[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class kS{constructor(r,s,h,m,y){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=h,r._y=m,this.properties=r.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r}}class OS{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Bl(zn,16,0),this.grid3D=new Bl(zn,16,0),this.featureIndexArray=new Oo,this.promoteId=s}insert(r,s,h,m,y,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,y);const I=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const V=s[F],J=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<V.length;ne++){const ce=V[ne];J[0]=Math.min(J[0],ce.x),J[1]=Math.min(J[1],ce.y),J[2]=Math.max(J[2],ce.x),J[3]=Math.max(J[3],ce.y)}J[0]<zn&&J[1]<zn&&J[2]>=0&&J[3]>=0&&I.insert(S,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Hl.VectorTile(new hv(this.rawTileData)).layers,this.sourceLayerCoder=new MS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,s,h,m){this.loadVTLayers();const y=r.params||{},x=zn/r.tileSize/r.scale,S=$r(y.filter),I=r.queryGeometry,F=r.queryPadding*x,V=RS(I),J=this.grid.query(V.minX-F,V.minY-F,V.maxX+F,V.maxY+F),ne=RS(r.cameraQueryGeometry),ce=this.grid3D.query(ne.minX-F,ne.minY-F,ne.maxX+F,ne.maxY+F,(Re,Ne,Qe,Ze)=>function(Ye,lt,_t,Ft,nr){for(const Ot of Ye)if(lt<=Ot.x&&_t<=Ot.y&&Ft>=Ot.x&&nr>=Ot.y)return!0;const zt=[new b(lt,_t),new b(lt,nr),new b(Ft,nr),new b(Ft,_t)];if(Ye.length>2){for(const Ot of zt)if(ih(Ye,Ot))return!0}for(let Ot=0;Ot<Ye.length-1;Ot++)if(s4(Ye[Ot],Ye[Ot+1],zt))return!0;return!1}(r.cameraQueryGeometry,Re-F,Ne-F,Qe+F,Ze+F));for(const Re of ce)J.push(Re);J.sort(AF);const me={};let Te;for(let Re=0;Re<J.length;Re++){const Ne=J[Re];if(Ne===Te)continue;Te=Ne;const Qe=this.featureIndexArray.get(Ne);let Ze=null;this.loadMatchingFeature(me,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,S,y.layers,y.availableImages,s,h,m,(Ye,lt,_t)=>(Ze||(Ze=Qu(Ye)),lt.queryIntersectsFeature(I,Ye,_t,Ze,this.z,r.transform,x,r.pixelPosMatrix)))}return me}loadMatchingFeature(r,s,h,m,y,x,S,I,F,V,J){const ne=this.bucketLayerIDs[s];if(x&&!function(Re,Ne){for(let Qe=0;Qe<Re.length;Qe++)if(Ne.indexOf(Re[Qe])>=0)return!0;return!1}(x,ne))return;const ce=this.sourceLayerCoder.decode(h),me=this.vtLayers[ce].feature(m);if(y.needGeometry){const Re=ec(me,!0);if(!y.filter(new Qr(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!y.filter(new Qr(this.tileID.overscaledZ),me))return;const Te=this.getId(me,ce);for(let Re=0;Re<ne.length;Re++){const Ne=ne[Re];if(x&&x.indexOf(Ne)<0)continue;const Qe=I[Ne];if(!Qe)continue;let Ze={};Te&&V&&(Ze=V.getState(Qe.sourceLayer||"_geojsonTileLayer",Te));const Ye=P({},F[Ne]);Ye.paint=FS(Ye.paint,Qe.paint,me,Ze,S),Ye.layout=FS(Ye.layout,Qe.layout,me,Ze,S);const lt=!J||J(me,Qe,Ze);if(!lt)continue;const _t=new kS(me,this.z,this.x,this.y,Te);_t.layer=Ye;let Ft=r[Ne];Ft===void 0&&(Ft=r[Ne]=[]),Ft.push({featureIndex:m,feature:_t,intersectionZ:lt})}}lookupSymbolFeatures(r,s,h,m,y,x,S,I){const F={};this.loadVTLayers();const V=$r(y);for(const J of r)this.loadMatchingFeature(F,h,m,J,V,x,S,I,s);return F}hasLayer(r){for(const s of this.bucketLayerIDs)for(const h of s)if(r===h)return!0;return!1}getId(r,s){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function FS(o,r,s,h,m){return D(o,(y,x)=>{const S=r instanceof Jc?r.get(x):null;return S&&S.evaluate?S.evaluate(s,h,m):S})}function RS(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const y of o)r=Math.min(r,y.x),s=Math.min(s,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return{minX:r,minY:s,maxX:h,maxY:m}}function AF(o,r){return r-o}function jS(o,r,s,h,m){const y=[];for(let x=0;x<o.length;x++){const S=o[x];let I;for(let F=0;F<S.length-1;F++){let V=S[F],J=S[F+1];V.x<r&&J.x<r||(V.x<r?V=new b(r,V.y+(r-V.x)/(J.x-V.x)*(J.y-V.y))._round():J.x<r&&(J=new b(r,V.y+(r-V.x)/(J.x-V.x)*(J.y-V.y))._round()),V.y<s&&J.y<s||(V.y<s?V=new b(V.x+(s-V.y)/(J.y-V.y)*(J.x-V.x),s)._round():J.y<s&&(J=new b(V.x+(s-V.y)/(J.y-V.y)*(J.x-V.x),s)._round()),V.x>=h&&J.x>=h||(V.x>=h?V=new b(h,V.y+(h-V.x)/(J.x-V.x)*(J.y-V.y))._round():J.x>=h&&(J=new b(h,V.y+(h-V.x)/(J.x-V.x)*(J.y-V.y))._round()),V.y>=m&&J.y>=m||(V.y>=m?V=new b(V.x+(m-V.y)/(J.y-V.y)*(J.x-V.x),m)._round():J.y>=m&&(J=new b(V.x+(m-V.y)/(J.y-V.y)*(J.x-V.x),m)._round()),I&&V.equals(I[I.length-1])||(I=[V],y.push(I)),I.push(J)))))}}return y}$t("FeatureIndex",OS,{omit:["rawTileData","sourceLayerCoder"]});class Kl extends b{constructor(r,s,h,m){super(r,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new Kl(this.x,this.y,this.angle,this.segment)}}function zS(o,r,s,h,m){if(r.segment===void 0||s===0)return!0;let y=r,x=r.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(y),y=o[x]}S+=o[x].dist(o[x+1]),x++;const I=[];let F=0;for(;S<s/2;){const V=o[x],J=o[x+1];if(!J)return!1;let ne=o[x-1].angleTo(V)-V.angleTo(J);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:S,angleDelta:ne}),F+=ne;S-I[0].distance>h;)F-=I.shift().angleDelta;if(F>m)return!1;x++,S+=V.dist(J)}return!0}function LS(o){let r=0;for(let s=0;s<o.length-1;s++)r+=o[s].dist(o[s+1]);return r}function BS(o,r,s){return o?.6*r*s:0}function DS(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function IF(o,r,s,h,m,y){const x=BS(s,m,y),S=DS(s,h)*y;let I=0;const F=LS(o)/2;for(let V=0;V<o.length-1;V++){const J=o[V],ne=o[V+1],ce=J.dist(ne);if(I+ce>F){const me=(F-I)/ce,Te=xi.number(J.x,ne.x,me),Re=xi.number(J.y,ne.y,me),Ne=new Kl(Te,Re,ne.angleTo(J),V);return Ne._round(),!x||zS(o,Ne,S,x,r)?Ne:void 0}I+=ce}}function CF(o,r,s,h,m,y,x,S,I){const F=BS(h,y,x),V=DS(h,m),J=V*x,ne=o[0].x===0||o[0].x===I||o[0].y===0||o[0].y===I;return r-J<r/4&&(r=J+r/4),NS(o,ne?r/2*S%r:(V/2+2*y)*x*S%r,r,F,s,J,ne,!1,I)}function NS(o,r,s,h,m,y,x,S,I){const F=y/2,V=LS(o);let J=0,ne=r-s,ce=[];for(let me=0;me<o.length-1;me++){const Te=o[me],Re=o[me+1],Ne=Te.dist(Re),Qe=Re.angleTo(Te);for(;ne+s<J+Ne;){ne+=s;const Ze=(ne-J)/Ne,Ye=xi.number(Te.x,Re.x,Ze),lt=xi.number(Te.y,Re.y,Ze);if(Ye>=0&&Ye<I&&lt>=0&&lt<I&&ne-F>=0&&ne+F<=V){const _t=new Kl(Ye,lt,Qe,me);_t._round(),h&&!zS(o,_t,y,h,m)||ce.push(_t)}}J+=Ne}return S||ce.length||x||(ce=NS(o,J/2,s,h,m,y,x,!0,I)),ce}$t("Anchor",Kl);const fh=Ki;function $S(o,r,s,h){const m=[],y=o.image,x=y.pixelRatio,S=y.paddedRect.w-2*fh,I=y.paddedRect.h-2*fh;let F={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const V=y.stretchX||[[0,S]],J=y.stretchY||[[0,I]],ne=(dt,Qt)=>dt+Qt[1]-Qt[0],ce=V.reduce(ne,0),me=J.reduce(ne,0),Te=S-ce,Re=I-me;let Ne=0,Qe=ce,Ze=0,Ye=me,lt=0,_t=Te,Ft=0,nr=Re;if(y.content&&h){const dt=y.content,Qt=dt[2]-dt[0],Xt=dt[3]-dt[1];(y.textFitWidth||y.textFitHeight)&&(F=pS(o)),Ne=Fm(V,0,dt[0]),Ze=Fm(J,0,dt[1]),Qe=Fm(V,dt[0],dt[2]),Ye=Fm(J,dt[1],dt[3]),lt=dt[0]-Ne,Ft=dt[1]-Ze,_t=Qt-Qe,nr=Xt-Ye}const zt=F.x1,Ot=F.y1,Kt=F.x2-zt,Ut=F.y2-Ot,Nt=(dt,Qt,Xt,hr)=>{const Kr=Rm(dt.stretch-Ne,Qe,Kt,zt),Zr=jm(dt.fixed-lt,_t,dt.stretch,ce),Xn=Rm(Qt.stretch-Ze,Ye,Ut,Ot),us=jm(Qt.fixed-Ft,nr,Qt.stretch,me),ui=Rm(Xt.stretch-Ne,Qe,Kt,zt),bn=jm(Xt.fixed-lt,_t,Xt.stretch,ce),Bi=Rm(hr.stretch-Ze,Ye,Ut,Ot),Di=jm(hr.fixed-Ft,nr,hr.stretch,me),Ni=new b(Kr,Xn),Sn=new b(ui,Xn),qn=new b(ui,Bi),Ti=new b(Kr,Bi),ci=new b(Zr/x,us/x),$i=new b(bn/x,Di/x),hi=r*Math.PI/180;if(hi){const Rr=Math.sin(hi),en=Math.cos(hi),cn=[en,-Rr,Rr,en];Ni._matMult(cn),Sn._matMult(cn),Ti._matMult(cn),qn._matMult(cn)}const zo=dt.stretch+dt.fixed,Ji=Qt.stretch+Qt.fixed;return{tl:Ni,tr:Sn,bl:Ti,br:qn,tex:{x:y.paddedRect.x+fh+zo,y:y.paddedRect.y+fh+Ji,w:Xt.stretch+Xt.fixed-zo,h:hr.stretch+hr.fixed-Ji},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ci,pixelOffsetBR:$i,minFontScaleX:_t/x/Kt,minFontScaleY:nr/x/Ut,isSDF:s}};if(h&&(y.stretchX||y.stretchY)){const dt=US(V,Te,ce),Qt=US(J,Re,me);for(let Xt=0;Xt<dt.length-1;Xt++){const hr=dt[Xt],Kr=dt[Xt+1];for(let Zr=0;Zr<Qt.length-1;Zr++)m.push(Nt(hr,Qt[Zr],Kr,Qt[Zr+1]))}}else m.push(Nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:I+1}));return m}function Fm(o,r,s){let h=0;for(const m of o)h+=Math.max(r,Math.min(s,m[1]))-Math.max(r,Math.min(s,m[0]));return h}function US(o,r,s){const h=[{fixed:-fh,stretch:0}];for(const[m,y]of o){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(y-m)})}return h.push({fixed:r+fh,stretch:s}),h}function Rm(o,r,s,h){return o/r*s+h}function jm(o,r,s,h){return o-r*s/h}class zm{constructor(r,s,h,m,y,x,S,I,F,V){var J;if(this.boxStartIndex=r.length,F){let ne=x.top,ce=x.bottom;const me=x.collisionPadding;me&&(ne-=me[1],ce+=me[3]);let Te=ce-ne;Te>0&&(Te=Math.max(10,Te),this.circleDiameter=Te)}else{const ne=!((J=x.image)===null||J===void 0)&&J.content&&(x.image.textFitWidth||x.image.textFitHeight)?pS(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};ne.y1=ne.y1*S-I[0],ne.y2=ne.y2*S+I[2],ne.x1=ne.x1*S-I[3],ne.x2=ne.x2*S+I[1];const ce=x.collisionPadding;if(ce&&(ne.x1-=ce[0]*S,ne.y1-=ce[1]*S,ne.x2+=ce[2]*S,ne.y2+=ce[3]*S),V){const me=new b(ne.x1,ne.y1),Te=new b(ne.x2,ne.y1),Re=new b(ne.x1,ne.y2),Ne=new b(ne.x2,ne.y2),Qe=V*Math.PI/180;me._rotate(Qe),Te._rotate(Qe),Re._rotate(Qe),Ne._rotate(Qe),ne.x1=Math.min(me.x,Te.x,Re.x,Ne.x),ne.x2=Math.max(me.x,Te.x,Re.x,Ne.x),ne.y1=Math.min(me.y,Te.y,Re.y,Ne.y),ne.y2=Math.max(me.y,Te.y,Re.y,Ne.y)}r.emplaceBack(s.x,s.y,ne.x1,ne.y1,ne.x2,ne.y2,h,m,y)}this.boxEndIndex=r.length}}class MF{constructor(r=[],s=kF){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:h}=this,m=s[r];for(;r>0;){const y=r-1>>1,x=s[y];if(h(m,x)>=0)break;s[r]=x,r=y}s[r]=m}_down(r){const{data:s,compare:h}=this,m=this.length>>1,y=s[r];for(;r<m;){let x=1+(r<<1),S=s[x];const I=x+1;if(I<this.length&&h(s[I],S)<0&&(x=I,S=s[I]),h(S,y)>=0)break;s[r]=S,r=x}s[r]=y}}function kF(o,r){return o<r?-1:o>r?1:0}function OF(o,r=1,s=!1){let h=1/0,m=1/0,y=-1/0,x=-1/0;const S=o[0];for(let ce=0;ce<S.length;ce++){const me=S[ce];(!ce||me.x<h)&&(h=me.x),(!ce||me.y<m)&&(m=me.y),(!ce||me.x>y)&&(y=me.x),(!ce||me.y>x)&&(x=me.y)}const I=Math.min(y-h,x-m);let F=I/2;const V=new MF([],FF);if(I===0)return new b(h,m);for(let ce=h;ce<y;ce+=I)for(let me=m;me<x;me+=I)V.push(new dh(ce+F,me+F,F,o));let J=function(ce){let me=0,Te=0,Re=0;const Ne=ce[0];for(let Qe=0,Ze=Ne.length,Ye=Ze-1;Qe<Ze;Ye=Qe++){const lt=Ne[Qe],_t=Ne[Ye],Ft=lt.x*_t.y-_t.x*lt.y;Te+=(lt.x+_t.x)*Ft,Re+=(lt.y+_t.y)*Ft,me+=3*Ft}return new dh(Te/me,Re/me,0,ce)}(o),ne=V.length;for(;V.length;){const ce=V.pop();(ce.d>J.d||!J.d)&&(J=ce,s&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,ne)),ce.max-J.d<=r||(F=ce.h/2,V.push(new dh(ce.p.x-F,ce.p.y-F,F,o)),V.push(new dh(ce.p.x+F,ce.p.y-F,F,o)),V.push(new dh(ce.p.x-F,ce.p.y+F,F,o)),V.push(new dh(ce.p.x+F,ce.p.y+F,F,o)),ne+=4)}return s&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${J.d}`)),J.p}function FF(o,r){return r.max-o.max}function dh(o,r,s,h){this.p=new b(o,r),this.h=s,this.d=function(m,y){let x=!1,S=1/0;for(let I=0;I<y.length;I++){const F=y[I];for(let V=0,J=F.length,ne=J-1;V<J;ne=V++){const ce=F[V],me=F[ne];ce.y>m.y!=me.y>m.y&&m.x<(me.x-ce.x)*(m.y-ce.y)/(me.y-ce.y)+ce.x&&(x=!x),S=Math.min(S,T2(m,ce,me))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var li;d.ar=void 0,(li=d.ar||(d.ar={}))[li.center=1]="center",li[li.left=2]="left",li[li.right=3]="right",li[li.top=4]="top",li[li.bottom=5]="bottom",li[li["top-left"]=6]="top-left",li[li["top-right"]=7]="top-right",li[li["bottom-left"]=8]="bottom-left",li[li["bottom-right"]=9]="bottom-right";const Jl=7,Ev=Number.POSITIVE_INFINITY;function VS(o,r){return r[1]!==Ev?function(s,h,m){let y=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-Jl;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+Jl}switch(s){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,x]}(o,r[0],r[1]):function(s,h){let m=0,y=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":y=x-Jl;break;case"bottom-right":case"bottom-left":y=-x+Jl;break;case"bottom":y=-h+Jl;break;case"top":y=h-Jl}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(o,r[0])}function GS(o,r,s){var h;const m=o.layout,y=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},s);if(y){const S=y.values,I=[];for(let F=0;F<S.length;F+=2){const V=I[F]=S[F],J=S[F+1].map(ne=>ne*$n);V.startsWith("top")?J[1]-=Jl:V.startsWith("bottom")&&(J[1]+=Jl),I[F+1]=J}return new yi(I)}const x=m.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},s)*$n,Ev]:m.get("text-offset").evaluate(r,{},s).map(F=>F*$n);const I=[];for(const F of x)I.push(F,VS(F,S));return new yi(I)}return null}function Tv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function RF(o,r,s,h,m,y,x,S,I,F,V){let J=y.textMaxSize.evaluate(r,{});J===void 0&&(J=x);const ne=o.layers[0].layout,ce=ne.get("icon-offset").evaluate(r,{},V),me=HS(s.horizontal),Te=x/24,Re=o.tilePixelRatio*Te,Ne=o.tilePixelRatio*J/24,Qe=o.tilePixelRatio*S,Ze=o.tilePixelRatio*ne.get("symbol-spacing"),Ye=ne.get("text-padding")*o.tilePixelRatio,lt=function(dt,Qt,Xt,hr=1){const Kr=dt.get("icon-padding").evaluate(Qt,{},Xt),Zr=Kr&&Kr.values;return[Zr[0]*hr,Zr[1]*hr,Zr[2]*hr,Zr[3]*hr]}(ne,r,V,o.tilePixelRatio),_t=ne.get("text-max-angle")/180*Math.PI,Ft=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",nr=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",zt=ne.get("symbol-placement"),Ot=Ze/2,Kt=ne.get("icon-text-fit");let Ut;h&&Kt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Ut=mS(h,s.vertical,Kt,ne.get("icon-text-fit-padding"),ce,Te)),me&&(h=mS(h,me,Kt,ne.get("icon-text-fit-padding"),ce,Te)));const Nt=(dt,Qt)=>{Qt.x<0||Qt.x>=zn||Qt.y<0||Qt.y>=zn||function(Xt,hr,Kr,Zr,Xn,us,ui,bn,Bi,Di,Ni,Sn,qn,Ti,ci,$i,hi,zo,Ji,Rr,en,cn,po,gn,ph){const ha=Xt.addToLineVertexArray(hr,Kr);let fa,cs,Lo,Qn,Ya=0,Td=0,KS=0,JS=0,Fv=-1,Rv=-1;const Qa={};let YS=rh("");if(Xt.allowVerticalPlacement&&Zr.vertical){const Pi=bn.layout.get("text-rotate").evaluate(en,{},gn)+90;Lo=new zm(Bi,hr,Di,Ni,Sn,Zr.vertical,qn,Ti,ci,Pi),ui&&(Qn=new zm(Bi,hr,Di,Ni,Sn,ui,hi,zo,ci,Pi))}if(Xn){const Pi=bn.layout.get("icon-rotate").evaluate(en,{}),Bo=bn.layout.get("icon-text-fit")!=="none",rc=$S(Xn,Pi,po,Bo),Rs=ui?$S(ui,Pi,po,Bo):void 0;cs=new zm(Bi,hr,Di,Ni,Sn,Xn,hi,zo,!1,Pi),Ya=4*rc.length;const nc=Xt.iconSizeData;let da=null;nc.kind==="source"?(da=[ca*bn.layout.get("icon-size").evaluate(en,{})],da[0]>Xl&&ge(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${wd}. Reduce your "icon-size".`)):nc.kind==="composite"&&(da=[ca*cn.compositeIconSizes[0].evaluate(en,{},gn),ca*cn.compositeIconSizes[1].evaluate(en,{},gn)],(da[0]>Xl||da[1]>Xl)&&ge(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${wd}. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,rc,da,Rr,Ji,en,d.ai.none,hr,ha.lineStartIndex,ha.lineLength,-1,gn),Fv=Xt.icon.placedSymbolArray.length-1,Rs&&(Td=4*Rs.length,Xt.addSymbols(Xt.icon,Rs,da,Rr,Ji,en,d.ai.vertical,hr,ha.lineStartIndex,ha.lineLength,-1,gn),Rv=Xt.icon.placedSymbolArray.length-1)}const QS=Object.keys(Zr.horizontal);for(const Pi of QS){const Bo=Zr.horizontal[Pi];if(!fa){YS=rh(Bo.text);const Rs=bn.layout.get("text-rotate").evaluate(en,{},gn);fa=new zm(Bi,hr,Di,Ni,Sn,Bo,qn,Ti,ci,Rs)}const rc=Bo.positionedLines.length===1;if(KS+=WS(Xt,hr,Bo,us,bn,ci,en,$i,ha,Zr.vertical?d.ai.horizontal:d.ai.horizontalOnly,rc?QS:[Pi],Qa,Fv,cn,gn),rc)break}Zr.vertical&&(JS+=WS(Xt,hr,Zr.vertical,us,bn,ci,en,$i,ha,d.ai.vertical,["vertical"],Qa,Rv,cn,gn));const LF=fa?fa.boxStartIndex:Xt.collisionBoxArray.length,BF=fa?fa.boxEndIndex:Xt.collisionBoxArray.length,DF=Lo?Lo.boxStartIndex:Xt.collisionBoxArray.length,NF=Lo?Lo.boxEndIndex:Xt.collisionBoxArray.length,$F=cs?cs.boxStartIndex:Xt.collisionBoxArray.length,UF=cs?cs.boxEndIndex:Xt.collisionBoxArray.length,VF=Qn?Qn.boxStartIndex:Xt.collisionBoxArray.length,GF=Qn?Qn.boxEndIndex:Xt.collisionBoxArray.length;let Fs=-1;const Bm=(Pi,Bo)=>Pi&&Pi.circleDiameter?Math.max(Pi.circleDiameter,Bo):Bo;Fs=Bm(fa,Fs),Fs=Bm(Lo,Fs),Fs=Bm(cs,Fs),Fs=Bm(Qn,Fs);const eE=Fs>-1?1:0;eE&&(Fs*=ph/$n),Xt.glyphOffsetArray.length>=hh.MAX_GLYPHS&&ge("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),en.sortKey!==void 0&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,en.sortKey);const WF=GS(bn,en,gn),[HF,ZF]=function(Pi,Bo){const rc=Pi.length,Rs=Bo==null?void 0:Bo.values;if((Rs==null?void 0:Rs.length)>0)for(let nc=0;nc<Rs.length;nc+=2){const da=Rs[nc+1];Pi.emplaceBack(d.ar[Rs[nc]],da[0],da[1])}return[rc,Pi.length]}(Xt.textAnchorOffsets,WF);Xt.symbolInstances.emplaceBack(hr.x,hr.y,Qa.right>=0?Qa.right:-1,Qa.center>=0?Qa.center:-1,Qa.left>=0?Qa.left:-1,Qa.vertical||-1,Fv,Rv,YS,LF,BF,DF,NF,$F,UF,VF,GF,Di,KS,JS,Ya,Td,eE,0,qn,Fs,HF,ZF)}(o,Qt,dt,s,h,m,Ut,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Re,[Ye,Ye,Ye,Ye],Ft,I,Qe,lt,nr,ce,r,y,F,V,x)};if(zt==="line")for(const dt of jS(r.geometry,0,0,zn,zn)){const Qt=CF(dt,Ze,_t,s.vertical||me,h,24,Ne,o.overscaling,zn);for(const Xt of Qt)me&&jF(o,me.text,Ot,Xt)||Nt(dt,Xt)}else if(zt==="line-center"){for(const dt of r.geometry)if(dt.length>1){const Qt=IF(dt,_t,s.vertical||me,h,24,Ne);Qt&&Nt(dt,Qt)}}else if(r.type==="Polygon")for(const dt of jl(r.geometry,0)){const Qt=OF(dt,16);Nt(dt[0],new Kl(Qt.x,Qt.y,0))}else if(r.type==="LineString")for(const dt of r.geometry)Nt(dt,new Kl(dt[0].x,dt[0].y,0));else if(r.type==="Point")for(const dt of r.geometry)for(const Qt of dt)Nt([Qt],new Kl(Qt.x,Qt.y,0))}function WS(o,r,s,h,m,y,x,S,I,F,V,J,ne,ce,me){const Te=function(Qe,Ze,Ye,lt,_t,Ft,nr,zt){const Ot=lt.layout.get("text-rotate").evaluate(Ft,{})*Math.PI/180,Kt=[];for(const Ut of Ze.positionedLines)for(const Nt of Ut.positionedGlyphs){if(!Nt.rect)continue;const dt=Nt.rect||{};let Qt=aS+1,Xt=!0,hr=1,Kr=0;const Zr=(_t||zt)&&Nt.vertical,Xn=Nt.metrics.advance*Nt.scale/2;if(zt&&Ze.verticalizable&&(Kr=Ut.lineOffset/2-(Nt.imageName?-($n-Nt.metrics.width*Nt.scale)/2:(Nt.scale-1)*$n)),Nt.imageName){const Rr=nr[Nt.imageName];Xt=Rr.sdf,hr=Rr.pixelRatio,Qt=Ki/hr}const us=_t?[Nt.x+Xn,Nt.y]:[0,0];let ui=_t?[0,0]:[Nt.x+Xn+Ye[0],Nt.y+Ye[1]-Kr],bn=[0,0];Zr&&(bn=ui,ui=[0,0]);const Bi=Nt.metrics.isDoubleResolution?2:1,Di=(Nt.metrics.left-Qt)*Nt.scale-Xn+ui[0],Ni=(-Nt.metrics.top-Qt)*Nt.scale+ui[1],Sn=Di+dt.w/Bi*Nt.scale/hr,qn=Ni+dt.h/Bi*Nt.scale/hr,Ti=new b(Di,Ni),ci=new b(Sn,Ni),$i=new b(Di,qn),hi=new b(Sn,qn);if(Zr){const Rr=new b(-Xn,Xn-_d),en=-Math.PI/2,cn=$n/2-Xn,po=new b(5-_d-cn,-(Nt.imageName?cn:0)),gn=new b(...bn);Ti._rotateAround(en,Rr)._add(po)._add(gn),ci._rotateAround(en,Rr)._add(po)._add(gn),$i._rotateAround(en,Rr)._add(po)._add(gn),hi._rotateAround(en,Rr)._add(po)._add(gn)}if(Ot){const Rr=Math.sin(Ot),en=Math.cos(Ot),cn=[en,-Rr,Rr,en];Ti._matMult(cn),ci._matMult(cn),$i._matMult(cn),hi._matMult(cn)}const zo=new b(0,0),Ji=new b(0,0);Kt.push({tl:Ti,tr:ci,bl:$i,br:hi,tex:dt,writingMode:Ze.writingMode,glyphOffset:us,sectionIndex:Nt.sectionIndex,isSDF:Xt,pixelOffsetTL:zo,pixelOffsetBR:Ji,minFontScaleX:0,minFontScaleY:0})}return Kt}(0,s,S,m,y,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ne=null;Re.kind==="source"?(Ne=[ca*m.layout.get("text-size").evaluate(x,{})],Ne[0]>Xl&&ge(`${o.layerIds[0]}: Value for "text-size" is >= ${wd}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ne=[ca*ce.compositeTextSizes[0].evaluate(x,{},me),ca*ce.compositeTextSizes[1].evaluate(x,{},me)],(Ne[0]>Xl||Ne[1]>Xl)&&ge(`${o.layerIds[0]}: Value for "text-size" is >= ${wd}. Reduce your "text-size".`)),o.addSymbols(o.text,Te,Ne,S,y,x,F,r,I.lineStartIndex,I.lineLength,ne,me);for(const Qe of V)J[Qe]=o.text.placedSymbolArray.length-1;return 4*Te.length}function HS(o){for(const r in o)return o[r];return null}function jF(o,r,s,h){const m=o.compareText;if(r in m){const y=m[r];for(let x=y.length-1;x>=0;x--)if(h.dist(y[x])<s)return!0}else m[r]=[];return m[r].push(h),!1}const ZS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Pv{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const y=ZS[15&h];if(!y)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new Pv(S,x,y,r)}constructor(r,s=64,h=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const y=ZS.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-S%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+I,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+I),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+I,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=s,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Av(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:S}=this,I=[0,y.length-1,0],F=[];for(;I.length;){const V=I.pop()||0,J=I.pop()||0,ne=I.pop()||0;if(J-ne<=S){for(let Re=ne;Re<=J;Re++){const Ne=x[2*Re],Qe=x[2*Re+1];Ne>=r&&Ne<=h&&Qe>=s&&Qe<=m&&F.push(y[Re])}continue}const ce=ne+J>>1,me=x[2*ce],Te=x[2*ce+1];me>=r&&me<=h&&Te>=s&&Te<=m&&F.push(y[ce]),(V===0?r<=me:s<=Te)&&(I.push(ne),I.push(ce-1),I.push(1-V)),(V===0?h>=me:m>=Te)&&(I.push(ce+1),I.push(J),I.push(1-V))}return F}within(r,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:x}=this,S=[0,m.length-1,0],I=[],F=h*h;for(;S.length;){const V=S.pop()||0,J=S.pop()||0,ne=S.pop()||0;if(J-ne<=x){for(let Re=ne;Re<=J;Re++)qS(y[2*Re],y[2*Re+1],r,s)<=F&&I.push(m[Re]);continue}const ce=ne+J>>1,me=y[2*ce],Te=y[2*ce+1];qS(me,Te,r,s)<=F&&I.push(m[ce]),(V===0?r-h<=me:s-h<=Te)&&(S.push(ne),S.push(ce-1),S.push(1-V)),(V===0?r+h>=me:s+h>=Te)&&(S.push(ce+1),S.push(J),S.push(1-V))}return I}}function Av(o,r,s,h,m,y){if(m-h<=s)return;const x=h+m>>1;XS(o,r,x,h,m,y),Av(o,r,s,h,x-1,1-y),Av(o,r,s,x+1,m,1-y)}function XS(o,r,s,h,m,y){for(;m>h;){if(m-h>600){const F=m-h+1,V=s-h+1,J=Math.log(F),ne=.5*Math.exp(2*J/3),ce=.5*Math.sqrt(J*ne*(F-ne)/F)*(V-F/2<0?-1:1);XS(o,r,s,Math.max(h,Math.floor(s-V*ne/F+ce)),Math.min(m,Math.floor(s+(F-V)*ne/F+ce)),y)}const x=r[2*s+y];let S=h,I=m;for(Sd(o,r,h,s),r[2*m+y]>x&&Sd(o,r,h,m);S<I;){for(Sd(o,r,S,I),S++,I--;r[2*S+y]<x;)S++;for(;r[2*I+y]>x;)I--}r[2*h+y]===x?Sd(o,r,h,I):(I++,Sd(o,r,I,m)),I<=s&&(h=I+1),s<=I&&(m=I-1)}}function Sd(o,r,s,h){Iv(o,s,h),Iv(r,2*s,2*h),Iv(r,2*s+1,2*h+1)}function Iv(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}function qS(o,r,s,h){const m=o-s,y=r-h;return m*m+y*y}var Cv;d.bf=void 0,(Cv=d.bf||(d.bf={})).create="create",Cv.load="load",Cv.fullLoad="fullLoad";let Lm=null,Ed=[];const Mv=1e3/60,kv="loadTime",Ov="fullLoadTime",zF={mark(o){performance.mark(o)},frame(o){const r=o;Lm!=null&&Ed.push(r-Lm),Lm=r},clearMetrics(){Lm=null,Ed=[],performance.clearMeasures(kv),performance.clearMeasures(Ov);for(const o in d.bf)performance.clearMarks(d.bf[o])},getPerformanceMetrics(){performance.measure(kv,d.bf.create,d.bf.load),performance.measure(Ov,d.bf.create,d.bf.fullLoad);const o=performance.getEntriesByName(kv)[0].duration,r=performance.getEntriesByName(Ov)[0].duration,s=Ed.length,h=1/(Ed.reduce((y,x)=>y+x,0)/s/1e3),m=Ed.filter(y=>y>Mv).reduce((y,x)=>y+(x-Mv)/Mv,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};d.$=class extends we{},d.A=oh,d.B=Jf,d.C=function(o){if(he==null){const r=o.navigator?o.navigator.userAgent:null;he=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return he},d.D=Yt,d.E=ar,d.F=class{constructor(o,r){this.target=o,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new PF(()=>this.process()),this.subscription=function(s,h,m,y){return s.addEventListener(h,m,!1),{unsubscribe:()=>{s.removeEventListener(h,m,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=ie(self)?o:window}registerMessageHandler(o,r){this.messageHandlers[o]=r}sendAsync(o,r){return new Promise((s,h)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:s,reject:h},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const S={id:m,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const y=[],x=Object.assign(Object.assign({},o),{id:m,sourceMapId:this.mapId,origin:location.origin,data:qu(o.data,y)});this.target.postMessage(x,{transfer:y})})}receive(o){const r=o.data,s=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(ie(self)||r.mustQueue)return this.tasks[s]=r,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,r)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){return l(this,void 0,void 0,function*(){if(r.type==="<response>"){const m=this.resolveRejects[o];return delete this.resolveRejects[o],m?void(r.error?m.reject(as(r.error)):m.resolve(as(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=as(r.data),h=new AbortController;this.abortControllers[o]=h;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,s,h);this.completeTask(o,null,m)}catch(m){this.completeTask(o,m)}})}completeTask(o,r,s){const h=[];delete this.abortControllers[o];const m={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?qu(r):null,data:qu(s,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.G=We,d.H=function(){var o=new oh(16);return oh!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},d.I=dv,d.J=function(o,r,s){var h,m,y,x,S,I,F,V,J,ne,ce,me,Te=s[0],Re=s[1],Ne=s[2];return r===o?(o[12]=r[0]*Te+r[4]*Re+r[8]*Ne+r[12],o[13]=r[1]*Te+r[5]*Re+r[9]*Ne+r[13],o[14]=r[2]*Te+r[6]*Re+r[10]*Ne+r[14],o[15]=r[3]*Te+r[7]*Re+r[11]*Ne+r[15]):(m=r[1],y=r[2],x=r[3],S=r[4],I=r[5],F=r[6],V=r[7],J=r[8],ne=r[9],ce=r[10],me=r[11],o[0]=h=r[0],o[1]=m,o[2]=y,o[3]=x,o[4]=S,o[5]=I,o[6]=F,o[7]=V,o[8]=J,o[9]=ne,o[10]=ce,o[11]=me,o[12]=h*Te+S*Re+J*Ne+r[12],o[13]=m*Te+I*Re+ne*Ne+r[13],o[14]=y*Te+F*Re+ce*Ne+r[14],o[15]=x*Te+V*Re+me*Ne+r[15]),o},d.K=function(o,r,s){var h=s[0],m=s[1],y=s[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*m,o[5]=r[5]*m,o[6]=r[6]*m,o[7]=r[7]*m,o[8]=r[8]*y,o[9]=r[9]*y,o[10]=r[10]*y,o[11]=r[11]*y,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},d.L=C2,d.M=function(o,r){const s={};for(let h=0;h<r.length;h++){const m=r[h];m in o&&(s[m]=o[m])}return s},d.N=ql,d.O=ES,d.P=b,d.Q=TS,d.R=Ro,d.S=jo,d.T=Nl,d.U=K,d.V=Z,d.W=de,d.X=zn,d.Y=$,d.Z=Om,d._=l,d.a=Fe,d.a$=function(o,r){var s=o[0],h=o[1],m=o[2],y=o[3],x=o[4],S=o[5],I=o[6],F=o[7],V=o[8],J=o[9],ne=o[10],ce=o[11],me=o[12],Te=o[13],Re=o[14],Ne=o[15],Qe=r[0],Ze=r[1],Ye=r[2],lt=r[3],_t=r[4],Ft=r[5],nr=r[6],zt=r[7],Ot=r[8],Kt=r[9],Ut=r[10],Nt=r[11],dt=r[12],Qt=r[13],Xt=r[14],hr=r[15];return Math.abs(s-Qe)<=Li*Math.max(1,Math.abs(s),Math.abs(Qe))&&Math.abs(h-Ze)<=Li*Math.max(1,Math.abs(h),Math.abs(Ze))&&Math.abs(m-Ye)<=Li*Math.max(1,Math.abs(m),Math.abs(Ye))&&Math.abs(y-lt)<=Li*Math.max(1,Math.abs(y),Math.abs(lt))&&Math.abs(x-_t)<=Li*Math.max(1,Math.abs(x),Math.abs(_t))&&Math.abs(S-Ft)<=Li*Math.max(1,Math.abs(S),Math.abs(Ft))&&Math.abs(I-nr)<=Li*Math.max(1,Math.abs(I),Math.abs(nr))&&Math.abs(F-zt)<=Li*Math.max(1,Math.abs(F),Math.abs(zt))&&Math.abs(V-Ot)<=Li*Math.max(1,Math.abs(V),Math.abs(Ot))&&Math.abs(J-Kt)<=Li*Math.max(1,Math.abs(J),Math.abs(Kt))&&Math.abs(ne-Ut)<=Li*Math.max(1,Math.abs(ne),Math.abs(Ut))&&Math.abs(ce-Nt)<=Li*Math.max(1,Math.abs(ce),Math.abs(Nt))&&Math.abs(me-dt)<=Li*Math.max(1,Math.abs(me),Math.abs(dt))&&Math.abs(Te-Qt)<=Li*Math.max(1,Math.abs(Te),Math.abs(Qt))&&Math.abs(Re-Xt)<=Li*Math.max(1,Math.abs(Re),Math.abs(Xt))&&Math.abs(Ne-hr)<=Li*Math.max(1,Math.abs(Ne),Math.abs(hr))},d.a0=Nn,d.a1=Sv,d.a2=k,d.a3=o=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(s=>{r.onloadstart=()=>{s(r)};for(const h of o){const m=window.document.createElement("source");Mt(h)||(r.crossOrigin="Anonymous"),m.src=h,r.appendChild(m)}})},d.a4=function(){return z++},d.a5=_r,d.a6=hh,d.a7=$r,d.a8=ec,d.a9=Qr,d.aA=function(o){o=o.slice();const r=Object.create(null);for(let s=0;s<o.length;s++)r[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=lr(o[s],r[o[s].ref]));return o},d.aB=function(o){if(o.type==="custom")return new TF(o);switch(o.type){case"background":return new bF(o);case"circle":return new u4(o);case"fill":return new P4(o);case"fill-extrusion":return new $4(o);case"heatmap":return new h4(o);case"hillshade":return new d4(o);case"line":return new q4(o);case"raster":return new EF(o);case"symbol":return new km(o)}},d.aC=X,d.aD=function(o,r){if(!o)return[{command:"setStyle",args:[r]}];let s=[];try{if(!Vt(o.version,r.version))return[{command:"setStyle",args:[r]}];Vt(o.center,r.center)||s.push({command:"setCenter",args:[r.center]}),Vt(o.zoom,r.zoom)||s.push({command:"setZoom",args:[r.zoom]}),Vt(o.bearing,r.bearing)||s.push({command:"setBearing",args:[r.bearing]}),Vt(o.pitch,r.pitch)||s.push({command:"setPitch",args:[r.pitch]}),Vt(o.sprite,r.sprite)||s.push({command:"setSprite",args:[r.sprite]}),Vt(o.glyphs,r.glyphs)||s.push({command:"setGlyphs",args:[r.glyphs]}),Vt(o.transition,r.transition)||s.push({command:"setTransition",args:[r.transition]}),Vt(o.light,r.light)||s.push({command:"setLight",args:[r.light]}),Vt(o.terrain,r.terrain)||s.push({command:"setTerrain",args:[r.terrain]}),Vt(o.sky,r.sky)||s.push({command:"setSky",args:[r.sky]}),Vt(o.projection,r.projection)||s.push({command:"setProjection",args:[r.projection]});const h={},m=[];(function(x,S,I,F){let V;for(V in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,V)&&(Object.prototype.hasOwnProperty.call(S,V)||B(V,I,F));for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&(Object.prototype.hasOwnProperty.call(x,V)?Vt(x[V],S[V])||(x[V].type==="geojson"&&S[V].type==="geojson"&&Xe(x,S,V)?Se(I,{command:"setGeoJSONSourceData",args:[V,S[V].data]}):_e(V,S,I,F)):N(V,S,I))})(o.sources,r.sources,m,h);const y=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):y.push(x)}),s=s.concat(m),function(x,S,I){S=S||[];const F=(x=x||[]).map(ht),V=S.map(ht),J=x.reduce(ue,{}),ne=S.reduce(ue,{}),ce=F.slice(),me=Object.create(null);let Te,Re,Ne,Qe,Ze;for(let Ye=0,lt=0;Ye<F.length;Ye++)Te=F[Ye],Object.prototype.hasOwnProperty.call(ne,Te)?lt++:(Se(I,{command:"removeLayer",args:[Te]}),ce.splice(ce.indexOf(Te,lt),1));for(let Ye=0,lt=0;Ye<V.length;Ye++)Te=V[V.length-1-Ye],ce[ce.length-1-Ye]!==Te&&(Object.prototype.hasOwnProperty.call(J,Te)?(Se(I,{command:"removeLayer",args:[Te]}),ce.splice(ce.lastIndexOf(Te,ce.length-lt),1)):lt++,Qe=ce[ce.length-Ye],Se(I,{command:"addLayer",args:[ne[Te],Qe]}),ce.splice(ce.length-Ye,0,Te),me[Te]=!0);for(let Ye=0;Ye<V.length;Ye++)if(Te=V[Ye],Re=J[Te],Ne=ne[Te],!me[Te]&&!Vt(Re,Ne))if(Vt(Re.source,Ne.source)&&Vt(Re["source-layer"],Ne["source-layer"])&&Vt(Re.type,Ne.type)){for(Ze in tt(Re.layout,Ne.layout,I,Te,null,"setLayoutProperty"),tt(Re.paint,Ne.paint,I,Te,null,"setPaintProperty"),Vt(Re.filter,Ne.filter)||Se(I,{command:"setFilter",args:[Te,Ne.filter]}),Vt(Re.minzoom,Ne.minzoom)&&Vt(Re.maxzoom,Ne.maxzoom)||Se(I,{command:"setLayerZoomRange",args:[Te,Ne.minzoom,Ne.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?tt(Re[Ze],Ne[Ze],I,Te,Ze.slice(6),"setPaintProperty"):Vt(Re[Ze],Ne[Ze])||Se(I,{command:"setLayerProperty",args:[Te,Ze,Ne[Ze]]}));for(Ze in Ne)Object.prototype.hasOwnProperty.call(Ne,Ze)&&!Object.prototype.hasOwnProperty.call(Re,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?tt(Re[Ze],Ne[Ze],I,Te,Ze.slice(6),"setPaintProperty"):Vt(Re[Ze],Ne[Ze])||Se(I,{command:"setLayerProperty",args:[Te,Ze,Ne[Ze]]}))}else Se(I,{command:"removeLayer",args:[Te]}),Qe=ce[ce.lastIndexOf(Te)+1],Se(I,{command:"addLayer",args:[Ne,Qe]})}(y,r.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[r]}]}return s},d.aE=function(o){const r=[],s=o.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},d.aF=function o(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],s[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const h in r)if(!o(r[h],s[h]))return!1;return!0}return r===s},d.aG=D,d.aH=ee,d.aI=class extends Ju{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},d.aJ=ym,d.aK=class extends Ju{constructor(o,r){super(o,r),this.current=t4}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},d.aL=v2,d.aM=_2,d.aN=Mr,d.aO=class extends Ju{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},d.aP=class extends Ju{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},d.aQ=function(o,r,s,h,m,y,x){var S=1/(r-s),I=1/(h-m),F=1/(y-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*I,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(r+s)*S,o[13]=(m+h)*I,o[14]=(x+y)*F,o[15]=1,o},d.aR=l4,d.aS=class extends mt{},d.aT=Q4,d.aU=class extends Bt{},d.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},d.aW=R2,d.aX=Xa,d.aY=Zn,d.aZ=class extends jt{},d.a_=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]&&o[4]===r[4]&&o[5]===r[5]&&o[6]===r[6]&&o[7]===r[7]&&o[8]===r[8]&&o[9]===r[9]&&o[10]===r[10]&&o[11]===r[11]&&o[12]===r[12]&&o[13]===r[13]&&o[14]===r[14]&&o[15]===r[15]},d.aa=kS,d.ab=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,y)=>{const x=m||y;return r[h]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},d.ac=function(o,r){const s=[];for(const h in o)h in r||s.push(h);return s},d.ad=q,d.ae=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),y=r[0],x=r[1],S=r[2],I=r[3],F=r[4],V=r[5],J=r[6],ne=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=y*m+F*h,o[1]=x*m+V*h,o[2]=S*m+J*h,o[3]=I*m+ne*h,o[4]=F*m-y*h,o[5]=V*m-x*h,o[6]=J*m-S*h,o[7]=ne*m-I*h,o},d.af=function(o){var r=new oh(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},d.ag=wm,d.ah=function(o,r){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:x}=o,S=m?q(wi.interpolationFactor(m,r,y,x),0,1):0;o.kind==="camera"?h=xi.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},d.aj=function(o,{uSize:r,uSizeT:s},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/ca:o.kind==="composite"?xi.number(h/ca,m/ca,s):r},d.ak=yv,d.al=function(o,r,s,h){const m=r.y-o.y,y=r.x-o.x,x=h.y-s.y,S=h.x-s.x,I=x*y-S*m;if(I===0)return null;const F=(S*(o.y-s.y)-x*(o.x-s.x))/I;return new b(o.x+F*y,o.y+F*m)},d.am=jS,d.an=S2,d.ao=J0,d.ap=function(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const y of o)r=Math.min(r,y.x),s=Math.min(s,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return[r,s,h,m]},d.aq=$n,d.as=gv,d.at=function(o,r){var s=r[0],h=r[1],m=r[2],y=r[3],x=r[4],S=r[5],I=r[6],F=r[7],V=r[8],J=r[9],ne=r[10],ce=r[11],me=r[12],Te=r[13],Re=r[14],Ne=r[15],Qe=s*S-h*x,Ze=s*I-m*x,Ye=s*F-y*x,lt=h*I-m*S,_t=h*F-y*S,Ft=m*F-y*I,nr=V*Te-J*me,zt=V*Re-ne*me,Ot=V*Ne-ce*me,Kt=J*Re-ne*Te,Ut=J*Ne-ce*Te,Nt=ne*Ne-ce*Re,dt=Qe*Nt-Ze*Ut+Ye*Kt+lt*Ot-_t*zt+Ft*nr;return dt?(o[0]=(S*Nt-I*Ut+F*Kt)*(dt=1/dt),o[1]=(m*Ut-h*Nt-y*Kt)*dt,o[2]=(Te*Ft-Re*_t+Ne*lt)*dt,o[3]=(ne*_t-J*Ft-ce*lt)*dt,o[4]=(I*Ot-x*Nt-F*zt)*dt,o[5]=(s*Nt-m*Ot+y*zt)*dt,o[6]=(Re*Ye-me*Ft-Ne*Ze)*dt,o[7]=(V*Ft-ne*Ye+ce*Ze)*dt,o[8]=(x*Ut-S*Ot+F*nr)*dt,o[9]=(h*Ot-s*Ut-y*nr)*dt,o[10]=(me*_t-Te*Ye+Ne*Qe)*dt,o[11]=(J*Ye-V*_t-ce*Qe)*dt,o[12]=(S*zt-x*Kt-I*nr)*dt,o[13]=(s*Kt-h*zt+m*nr)*dt,o[14]=(Te*Ze-me*lt-Re*Qe)*dt,o[15]=(V*lt-J*Ze+ne*Qe)*dt,o):null},d.au=Tv,d.av=mv,d.aw=Pv,d.ax=function(){const o={},r=et.$version;for(const s in et.$root){const h=et.$root[s];if(h.required){let m=null;m=s==="version"?r:h.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},d.ay=um,d.az=ct,d.b=Y,d.b0=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},d.b1=function(o,r,s){return o[0]=r[0]*s[0],o[1]=r[1]*s[1],o[2]=r[2]*s[2],o[3]=r[3]*s[3],o},d.b2=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},d.b3=W,d.b4=IS,d.b5=PS,d.b6=function(o,r,s,h,m){var y,x=1/Math.tan(r/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(y=1/(h-m)),o[14]=2*m*h*y):(o[10]=-1,o[14]=-2*h),o},d.b7=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),y=r[4],x=r[5],S=r[6],I=r[7],F=r[8],V=r[9],J=r[10],ne=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=y*m+F*h,o[5]=x*m+V*h,o[6]=S*m+J*h,o[7]=I*m+ne*h,o[8]=F*m-y*h,o[9]=V*m-x*h,o[10]=J*m-S*h,o[11]=ne*m-I*h,o},d.b8=G,d.b9=se,d.bA=function(o){return o.message===$e},d.bB=St,d.bC=aa,d.ba=function(o){return o*Math.PI/180},d.bb=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},d.bc=class extends pe{},d.bd=wv,d.be=zF,d.bg=it,d.bh=function(o,r){Fe.REGISTERED_PROTOCOLS[o]=r},d.bi=function(o){delete Fe.REGISTERED_PROTOCOLS[o]},d.bj=function(o,r){const s={};for(let m=0;m<o.length;m++){const y=r&&r[o[m].id]||Df(o[m]);r&&(r[o[m].id]=y);let x=s[y];x||(x=s[y]=[]),x.push(o[m])}const h=[];for(const m in s)h.push(s[m]);return h},d.bk=$t,d.bl=MS,d.bm=OS,d.bn=uS,d.bo=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=zn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],s=r.layout,h=r._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new Qr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Qr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Qr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:V}=o.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Qr(F),o.canonical),h["text-size"].possiblyEvaluate(new Qr(V),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:V}=o.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Qr(F),o.canonical),h["icon-size"].possiblyEvaluate(new Qr(V),o.canonical)]}const y=s.get("text-line-height")*$n,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),I=s.get("text-size");for(const F of o.bucket.features){const V=s.get("text-font").evaluate(F,{},o.canonical).join(","),J=I.evaluate(F,{},o.canonical),ne=m.layoutTextSize.evaluate(F,{},o.canonical),ce=m.layoutIconSize.evaluate(F,{},o.canonical),me={horizontal:{},vertical:void 0},Te=F.text;let Re,Ne=[0,0];if(Te){const Ye=Te.toString(),lt=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*$n,_t=G0(Ye)?lt:0,Ft=s.get("text-anchor").evaluate(F,{},o.canonical),nr=GS(r,F,o.canonical);if(!nr){const Ut=s.get("text-radial-offset").evaluate(F,{},o.canonical);Ne=Ut?VS(Ft,[Ut*$n,Ev]):s.get("text-offset").evaluate(F,{},o.canonical).map(Nt=>Nt*$n)}let zt=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const Ot=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*$n:1/0,Kt=()=>{o.bucket.allowVerticalPlacement&&ed(Ye)&&(me.vertical=Im(Te,o.glyphMap,o.glyphPositions,o.imagePositions,V,Ot,y,Ft,"left",_t,Ne,d.ai.vertical,!0,ne,J))};if(!x&&nr){const Ut=new Set;if(zt==="auto")for(let dt=0;dt<nr.values.length;dt+=2)Ut.add(Tv(nr.values[dt]));else Ut.add(zt);let Nt=!1;for(const dt of Ut)if(!me.horizontal[dt])if(Nt)me.horizontal[dt]=me.horizontal[0];else{const Qt=Im(Te,o.glyphMap,o.glyphPositions,o.imagePositions,V,Ot,y,"center",dt,_t,Ne,d.ai.horizontal,!1,ne,J);Qt&&(me.horizontal[dt]=Qt,Nt=Qt.positionedLines.length===1)}Kt()}else{zt==="auto"&&(zt=Tv(Ft));const Ut=Im(Te,o.glyphMap,o.glyphPositions,o.imagePositions,V,Ot,y,Ft,zt,_t,Ne,d.ai.horizontal,!1,ne,J);Ut&&(me.horizontal[zt]=Ut),Kt(),ed(Ye)&&x&&S&&(me.vertical=Im(Te,o.glyphMap,o.glyphPositions,o.imagePositions,V,Ot,y,Ft,zt,_t,Ne,d.ai.vertical,!1,ne,J))}}let Qe=!1;if(F.icon&&F.icon.name){const Ye=o.imageMap[F.icon.name];Ye&&(Re=yF(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),Qe=!!Ye.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Qe:o.bucket.sdfIcons!==Qe&&ge("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ze=HS(me.horizontal)||me.vertical;o.bucket.iconsInText=!!Ze&&Ze.iconsInText,(Ze||Re)&&RF(o.bucket,F,me,Re,o.imageMap,m,ne,ce,Ne,Qe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},d.bp=uv,d.bq=sv,d.br=lv,d.bs=Hl,d.bt=hv,d.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},d.bv=function(o,r,s,h,m){return l(this,void 0,void 0,function*(){if(Z())try{return yield de(o,r,s,h,m)}catch{}return function(y,x,S,I,F){const V=y.width,J=y.height;be&&Pe||(be=new OffscreenCanvas(V,J),Pe=be.getContext("2d",{willReadFrequently:!0})),be.width=V,be.height=J,Pe.drawImage(y,0,0,V,J);const ne=Pe.getImageData(x,S,I,F);return Pe.clearRect(0,0,V,J),ne.data}(o,r,s,h,m)})},d.bw=CS,d.bx=w,d.by=E,d.bz=eS,d.c=Ce,d.d=o=>l(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(r)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=P,d.f=o=>new Promise((r,s)=>{const h=new Image;h.onload=()=>{r(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=re})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(m):re}),d.g=He,d.h=(o,r)=>vt(P(o,{type:"json"}),r),d.i=ie,d.j=Ht,d.k=Wt,d.l=(o,r)=>vt(P(o,{type:"arrayBuffer"}),r),d.m=vt,d.n=function(o){return new hv(o).readFields(cF,[])},d.o=fd,d.p=lS,d.q=p,d.r=$0,d.s=Mt,d.t=Yf,d.u=Lt,d.v=et,d.w=ge,d.x=ks,d.y=function([o,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(s),y:o*Math.sin(r)*Math.sin(s),z:o*Math.cos(s)}},d.z=xi}),c("worker",["./shared"],function(d){class l{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,oe){for(const Ie of ae){this._layerConfigs[Ie.id]=Ie;const ke=this._layers[Ie.id]=d.aB(Ie);ke._featureFilter=d.a7(ke.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of oe)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const xe=d.bj(Object.values(this._layerConfigs),this.keyCache);for(const Ie of xe){const ke=Ie.map(ot=>this._layers[ot.id]),Be=ke[0];if(Be.visibility==="none")continue;const Ke=Be.source||"";let Le=this.familiesBySource[Ke];Le||(Le=this.familiesBySource[Ke]={});const st=Be.sourceLayer||"_geojsonTileLayer";let ft=Le[st];ft||(ft=Le[st]=[]),ft.push(ke)}}}class w{constructor(ae){const oe={},xe=[];for(const Ke in ae){const Le=ae[Ke],st=oe[Ke]={};for(const ft in Le){const ot=Le[+ft];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const Pt={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};xe.push(Pt),st[ft]={rect:Pt,metrics:ot.metrics}}}const{w:Ie,h:ke}=d.p(xe),Be=new d.o({width:Ie||1,height:ke||1});for(const Ke in ae){const Le=ae[Ke];for(const st in Le){const ft=Le[+st];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const ot=oe[Ke][st].rect;d.o.copy(ft.bitmap,Be,{x:0,y:0},{x:ot.x+1,y:ot.y+1},ft.bitmap)}}this.image=Be,this.positions=oe}}d.bk("GlyphAtlas",w);class E{constructor(ae){this.tileID=new d.S(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,oe,xe,Ie){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new d.a5;const ke=new d.bl(Object.keys(ae.layers).sort()),Be=new d.bm(this.tileID,this.promoteId);Be.bucketLayerIDs=[];const Ke={},Le={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe},st=oe.familiesBySource[this.source];for(const xr in st){const Nr=ae.layers[xr];if(!Nr)continue;Nr.version===1&&d.w(`Vector tile source "${this.source}" layer "${xr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Yr=ke.encode(xr),Pn=[];for(let Gn=0;Gn<Nr.length;Gn++){const Wn=Nr.feature(Gn),Qo=Be.getId(Wn,xr);Pn.push({feature:Wn,id:Qo,index:Gn,sourceLayerIndex:Yr})}for(const Gn of st[xr]){const Wn=Gn[0];Wn.source!==this.source&&d.w(`layer.source = ${Wn.source} does not equal this.source = ${this.source}`),Wn.minzoom&&this.zoom<Math.floor(Wn.minzoom)||Wn.maxzoom&&this.zoom>=Wn.maxzoom||Wn.visibility!=="none"&&(C(Gn,this.zoom,xe),(Ke[Wn.id]=Wn.createBucket({index:Be.bucketLayerIDs.length,layers:Gn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yr,sourceID:this.source})).populate(Pn,Le,this.tileID.canonical),Be.bucketLayerIDs.push(Gn.map(Qo=>Qo.id)))}}const ft=d.aG(Le.glyphDependencies,xr=>Object.keys(xr).map(Number));this.inFlightDependencies.forEach(xr=>xr==null?void 0:xr.abort()),this.inFlightDependencies=[];let ot=Promise.resolve({});if(Object.keys(ft).length){const xr=new AbortController;this.inFlightDependencies.push(xr),ot=Ie.sendAsync({type:"GG",data:{stacks:ft,source:this.source,tileID:this.tileID,type:"glyphs"}},xr)}const Pt=Object.keys(Le.iconDependencies);let qt=Promise.resolve({});if(Pt.length){const xr=new AbortController;this.inFlightDependencies.push(xr),qt=Ie.sendAsync({type:"GI",data:{icons:Pt,source:this.source,tileID:this.tileID,type:"icons"}},xr)}const rr=Object.keys(Le.patternDependencies);let dr=Promise.resolve({});if(rr.length){const xr=new AbortController;this.inFlightDependencies.push(xr),dr=Ie.sendAsync({type:"GI",data:{icons:rr,source:this.source,tileID:this.tileID,type:"patterns"}},xr)}const[Sr,cr,Ur]=yield Promise.all([ot,qt,dr]),Jr=new w(Sr),nn=new d.bn(cr,Ur);for(const xr in Ke){const Nr=Ke[xr];Nr instanceof d.a6?(C(Nr.layers,this.zoom,xe),d.bo({bucket:Nr,glyphMap:Sr,glyphPositions:Jr.positions,imageMap:cr,imagePositions:nn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Nr.hasPattern&&(Nr instanceof d.bp||Nr instanceof d.bq||Nr instanceof d.br)&&(C(Nr.layers,this.zoom,xe),Nr.addFeatures(Le,this.tileID.canonical,nn.patternPositions))}return this.status="done",{buckets:Object.values(Ke).filter(xr=>!xr.isEmpty()),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jr.image,imageAtlas:nn,glyphMap:this.returnDependencies?Sr:null,iconMap:this.returnDependencies?cr:null,glyphPositions:this.returnDependencies?Jr.positions:null}})}}function C(Oe,ae,oe){const xe=new d.a9(ae);for(const Ie of Oe)Ie.recalculate(xe,oe)}class b{constructor(ae,oe,xe){this.actor=ae,this.layerIndex=oe,this.availableImages=xe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,oe){return d._(this,void 0,void 0,function*(){const xe=yield d.l(ae.request,oe);try{return{vectorTile:new d.bs.VectorTile(new d.bt(xe.data)),rawData:xe.data,cacheControl:xe.cacheControl,expires:xe.expires}}catch(Ie){const ke=new Uint8Array(xe.data);let Be=`Unable to parse the tile at ${ae.request.url}, `;throw Be+=ke[0]===31&&ke[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.message}`,new Error(Be)}})}loadTile(ae){return d._(this,void 0,void 0,function*(){const oe=ae.uid,xe=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new d.bu(ae.request),Ie=new E(ae);this.loading[oe]=Ie;const ke=new AbortController;Ie.abort=ke;try{const Be=yield this.loadVectorTile(ae,ke);if(delete this.loading[oe],!Be)return null;const Ke=Be.rawData,Le={};Be.expires&&(Le.expires=Be.expires),Be.cacheControl&&(Le.cacheControl=Be.cacheControl);const st={};if(xe){const ot=xe.finish();ot&&(st.resourceTiming=JSON.parse(JSON.stringify(ot)))}Ie.vectorTile=Be.vectorTile;const ft=Ie.parse(Be.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[oe]=Ie,this.fetching[oe]={rawTileData:Ke,cacheControl:Le,resourceTiming:st};try{const ot=yield ft;return d.e({rawTileData:Ke.slice(0)},ot,Le,st)}finally{delete this.fetching[oe]}}catch(Be){throw delete this.loading[oe],Ie.status="done",this.loaded[oe]=Ie,Be}})}reloadTile(ae){return d._(this,void 0,void 0,function*(){const oe=ae.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const xe=this.loaded[oe];if(xe.showCollisionBoxes=ae.showCollisionBoxes,xe.status==="parsing"){const Ie=yield xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor);let ke;if(this.fetching[oe]){const{rawTileData:Be,cacheControl:Ke,resourceTiming:Le}=this.fetching[oe];delete this.fetching[oe],ke=d.e({rawTileData:Be.slice(0)},Ie,Ke,Le)}else ke=Ie;return ke}if(xe.status==="done"&&xe.vectorTile)return xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ae){return d._(this,void 0,void 0,function*(){const oe=this.loading,xe=ae.uid;oe&&oe[xe]&&oe[xe].abort&&(oe[xe].abort.abort(),delete oe[xe])})}removeTile(ae){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class T{constructor(){this.loaded={}}loadTile(ae){return d._(this,void 0,void 0,function*(){const{uid:oe,encoding:xe,rawImageData:Ie,redFactor:ke,greenFactor:Be,blueFactor:Ke,baseShift:Le}=ae,st=Ie.width+2,ft=Ie.height+2,ot=d.b(Ie)?new d.R({width:st,height:ft},yield d.bv(Ie,-1,-1,st,ft)):Ie,Pt=new d.bw(oe,ot,xe,ke,Be,Ke,Le);return this.loaded=this.loaded||{},this.loaded[oe]=Pt,Pt})}removeTile(ae){const oe=this.loaded,xe=ae.uid;oe&&oe[xe]&&delete oe[xe]}}function R(Oe,ae){if(Oe.length!==0){L(Oe[0],ae);for(var oe=1;oe<Oe.length;oe++)L(Oe[oe],!ae)}}function L(Oe,ae){for(var oe=0,xe=0,Ie=0,ke=Oe.length,Be=ke-1;Ie<ke;Be=Ie++){var Ke=(Oe[Ie][0]-Oe[Be][0])*(Oe[Be][1]+Oe[Ie][1]),Le=oe+Ke;xe+=Math.abs(oe)>=Math.abs(Ke)?oe-Le+Ke:Ke-Le+oe,oe=Le}oe+xe>=0!=!!ae&&Oe.reverse()}var j=d.bx(function Oe(ae,oe){var xe,Ie=ae&&ae.type;if(Ie==="FeatureCollection")for(xe=0;xe<ae.features.length;xe++)Oe(ae.features[xe],oe);else if(Ie==="GeometryCollection")for(xe=0;xe<ae.geometries.length;xe++)Oe(ae.geometries[xe],oe);else if(Ie==="Feature")Oe(ae.geometry,oe);else if(Ie==="Polygon")R(ae.coordinates,oe);else if(Ie==="MultiPolygon")for(xe=0;xe<ae.coordinates.length;xe++)R(ae.coordinates[xe],oe);return ae});const le=d.bs.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},Z=d.by,G=d.bs.VectorTileFeature,se=q;function q(Oe,ae){this.options=ae||{},this.features=Oe,this.length=Oe.length}function W(Oe,ae){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=ae||4096}q.prototype.feature=function(Oe){return new W(this.features[Oe],this.options.extent)},W.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var ae=0;ae<Oe.length;ae++){for(var oe=Oe[ae],xe=[],Ie=0;Ie<oe.length;Ie++)xe.push(new Z(oe[Ie][0],oe[Ie][1]));this.geometry.push(xe)}return this.geometry},W.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,ae=1/0,oe=-1/0,xe=1/0,Ie=-1/0,ke=0;ke<Oe.length;ke++)for(var Be=Oe[ke],Ke=0;Ke<Be.length;Ke++){var Le=Be[Ke];ae=Math.min(ae,Le.x),oe=Math.max(oe,Le.x),xe=Math.min(xe,Le.y),Ie=Math.max(Ie,Le.y)}return[ae,xe,oe,Ie]},W.prototype.toGeoJSON=G.prototype.toGeoJSON;var P=d.bz,z=se;function D(Oe){var ae=new P;return function(oe,xe){for(var Ie in oe.layers)xe.writeMessage(3,ee,oe.layers[Ie])}(Oe,ae),ae.finish()}function ee(Oe,ae){var oe;ae.writeVarintField(15,Oe.version||1),ae.writeStringField(1,Oe.name||""),ae.writeVarintField(5,Oe.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<Oe.length;oe++)xe.feature=Oe.feature(oe),ae.writeMessage(2,X,xe);var Ie=xe.keys;for(oe=0;oe<Ie.length;oe++)ae.writeStringField(3,Ie[oe]);var ke=xe.values;for(oe=0;oe<ke.length;oe++)ae.writeMessage(4,he,ke[oe])}function X(Oe,ae){var oe=Oe.feature;oe.id!==void 0&&ae.writeVarintField(1,oe.id),ae.writeMessage(2,ye,Oe),ae.writeVarintField(3,oe.type),ae.writeMessage(4,ie,oe)}function ye(Oe,ae){var oe=Oe.feature,xe=Oe.keys,Ie=Oe.values,ke=Oe.keycache,Be=Oe.valuecache;for(var Ke in oe.properties){var Le=oe.properties[Ke],st=ke[Ke];if(Le!==null){st===void 0&&(xe.push(Ke),ke[Ke]=st=xe.length-1),ae.writeVarint(st);var ft=typeof Le;ft!=="string"&&ft!=="boolean"&&ft!=="number"&&(Le=JSON.stringify(Le));var ot=ft+":"+Le,Pt=Be[ot];Pt===void 0&&(Ie.push(Le),Be[ot]=Pt=Ie.length-1),ae.writeVarint(Pt)}}}function ge(Oe,ae){return(ae<<3)+(7&Oe)}function fe(Oe){return Oe<<1^Oe>>31}function ie(Oe,ae){for(var oe=Oe.loadGeometry(),xe=Oe.type,Ie=0,ke=0,Be=oe.length,Ke=0;Ke<Be;Ke++){var Le=oe[Ke],st=1;xe===1&&(st=Le.length),ae.writeVarint(ge(1,st));for(var ft=xe===3?Le.length-1:Le.length,ot=0;ot<ft;ot++){ot===1&&xe!==1&&ae.writeVarint(ge(2,ft-1));var Pt=Le[ot].x-Ie,qt=Le[ot].y-ke;ae.writeVarint(fe(Pt)),ae.writeVarint(fe(qt)),Ie+=Pt,ke+=qt}xe===3&&ae.writeVarint(ge(7,1))}}function he(Oe,ae){var oe=typeof Oe;oe==="string"?ae.writeStringField(1,Oe):oe==="boolean"?ae.writeBooleanField(7,Oe):oe==="number"&&(Oe%1!=0?ae.writeDoubleField(3,Oe):Oe<0?ae.writeSVarintField(6,Oe):ae.writeVarintField(5,Oe))}K.exports=D,K.exports.fromVectorTileJs=D,K.exports.fromGeojsonVt=function(Oe,ae){ae=ae||{};var oe={};for(var xe in Oe)oe[xe]=new z(Oe[xe].features,ae),oe[xe].name=xe,oe[xe].version=ae.version,oe[xe].extent=ae.extent;return D({layers:oe})},K.exports.GeoJSONWrapper=z;var Y=d.bx(K.exports);const re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},de=Math.fround||(be=new Float32Array(1),Oe=>(be[0]=+Oe,be[0]));var be;const Pe=3,$e=5,Ce=6;class Fe{constructor(ae){this.options=Object.assign(Object.create(re),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:oe,minZoom:xe,maxZoom:Ie}=this.options;oe&&console.time("total time");const ke=`prepare ${ae.length} points`;oe&&console.time(ke),this.points=ae;const Be=[];for(let Le=0;Le<ae.length;Le++){const st=ae[Le];if(!st.geometry)continue;const[ft,ot]=st.geometry.coordinates,Pt=de(it(ft)),qt=de(ct(ot));Be.push(Pt,qt,1/0,Le,-1,1),this.options.reduce&&Be.push(0)}let Ke=this.trees[Ie+1]=this._createTree(Be);oe&&console.timeEnd(ke);for(let Le=Ie;Le>=xe;Le--){const st=+Date.now();Ke=this.trees[Le]=this._createTree(this._cluster(Ke,Le)),oe&&console.log("z%d: %d clusters in %dms",Le,Ke.numItems,+Date.now()-st)}return oe&&console.timeEnd("total time"),this}getClusters(ae,oe){let xe=((ae[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,ae[1]));let ke=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const Be=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)xe=-180,ke=180;else if(xe>ke){const ot=this.getClusters([xe,Ie,180,Be],oe),Pt=this.getClusters([-180,Ie,ke,Be],oe);return ot.concat(Pt)}const Ke=this.trees[this._limitZoom(oe)],Le=Ke.range(it(xe),ct(Be),it(ke),ct(Ie)),st=Ke.data,ft=[];for(const ot of Le){const Pt=this.stride*ot;ft.push(st[Pt+$e]>1?He(st,Pt,this.clusterProps):this.points[st[Pt+Pe]])}return ft}getChildren(ae){const oe=this._getOriginId(ae),xe=this._getOriginZoom(ae),Ie="No cluster with the specified id.",ke=this.trees[xe];if(!ke)throw new Error(Ie);const Be=ke.data;if(oe*this.stride>=Be.length)throw new Error(Ie);const Ke=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Le=ke.within(Be[oe*this.stride],Be[oe*this.stride+1],Ke),st=[];for(const ft of Le){const ot=ft*this.stride;Be[ot+4]===ae&&st.push(Be[ot+$e]>1?He(Be,ot,this.clusterProps):this.points[Be[ot+Pe]])}if(st.length===0)throw new Error(Ie);return st}getLeaves(ae,oe,xe){const Ie=[];return this._appendLeaves(Ie,ae,oe=oe||10,xe=xe||0,0),Ie}getTile(ae,oe,xe){const Ie=this.trees[this._limitZoom(ae)],ke=Math.pow(2,ae),{extent:Be,radius:Ke}=this.options,Le=Ke/Be,st=(xe-Le)/ke,ft=(xe+1+Le)/ke,ot={features:[]};return this._addTileFeatures(Ie.range((oe-Le)/ke,st,(oe+1+Le)/ke,ft),Ie.data,oe,xe,ke,ot),oe===0&&this._addTileFeatures(Ie.range(1-Le/ke,st,1,ft),Ie.data,ke,xe,ke,ot),oe===ke-1&&this._addTileFeatures(Ie.range(0,st,Le/ke,ft),Ie.data,-1,xe,ke,ot),ot.features.length?ot:null}getClusterExpansionZoom(ae){let oe=this._getOriginZoom(ae)-1;for(;oe<=this.options.maxZoom;){const xe=this.getChildren(ae);if(oe++,xe.length!==1)break;ae=xe[0].properties.cluster_id}return oe}_appendLeaves(ae,oe,xe,Ie,ke){const Be=this.getChildren(oe);for(const Ke of Be){const Le=Ke.properties;if(Le&&Le.cluster?ke+Le.point_count<=Ie?ke+=Le.point_count:ke=this._appendLeaves(ae,Le.cluster_id,xe,Ie,ke):ke<Ie?ke++:ae.push(Ke),ae.length===xe)break}return ke}_createTree(ae){const oe=new d.aw(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<ae.length;xe+=this.stride)oe.add(ae[xe],ae[xe+1]);return oe.finish(),oe.data=ae,oe}_addTileFeatures(ae,oe,xe,Ie,ke,Be){for(const Ke of ae){const Le=Ke*this.stride,st=oe[Le+$e]>1;let ft,ot,Pt;if(st)ft=We(oe,Le,this.clusterProps),ot=oe[Le],Pt=oe[Le+1];else{const dr=this.points[oe[Le+Pe]];ft=dr.properties;const[Sr,cr]=dr.geometry.coordinates;ot=it(Sr),Pt=ct(cr)}const qt={type:1,geometry:[[Math.round(this.options.extent*(ot*ke-xe)),Math.round(this.options.extent*(Pt*ke-Ie))]],tags:ft};let rr;rr=st||this.options.generateId?oe[Le+Pe]:this.points[oe[Le+Pe]].id,rr!==void 0&&(qt.id=rr),Be.features.push(qt)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,oe){const{radius:xe,extent:Ie,reduce:ke,minPoints:Be}=this.options,Ke=xe/(Ie*Math.pow(2,oe)),Le=ae.data,st=[],ft=this.stride;for(let ot=0;ot<Le.length;ot+=ft){if(Le[ot+2]<=oe)continue;Le[ot+2]=oe;const Pt=Le[ot],qt=Le[ot+1],rr=ae.within(Le[ot],Le[ot+1],Ke),dr=Le[ot+$e];let Sr=dr;for(const cr of rr){const Ur=cr*ft;Le[Ur+2]>oe&&(Sr+=Le[Ur+$e])}if(Sr>dr&&Sr>=Be){let cr,Ur=Pt*dr,Jr=qt*dr,nn=-1;const xr=((ot/ft|0)<<5)+(oe+1)+this.points.length;for(const Nr of rr){const Yr=Nr*ft;if(Le[Yr+2]<=oe)continue;Le[Yr+2]=oe;const Pn=Le[Yr+$e];Ur+=Le[Yr]*Pn,Jr+=Le[Yr+1]*Pn,Le[Yr+4]=xr,ke&&(cr||(cr=this._map(Le,ot,!0),nn=this.clusterProps.length,this.clusterProps.push(cr)),ke(cr,this._map(Le,Yr)))}Le[ot+4]=xr,st.push(Ur/Sr,Jr/Sr,1/0,xr,-1,Sr),ke&&st.push(nn)}else{for(let cr=0;cr<ft;cr++)st.push(Le[ot+cr]);if(Sr>1)for(const cr of rr){const Ur=cr*ft;if(!(Le[Ur+2]<=oe)){Le[Ur+2]=oe;for(let Jr=0;Jr<ft;Jr++)st.push(Le[Ur+Jr])}}}}return st}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,oe,xe){if(ae[oe+$e]>1){const Be=this.clusterProps[ae[oe+Ce]];return xe?Object.assign({},Be):Be}const Ie=this.points[ae[oe+Pe]].properties,ke=this.options.map(Ie);return xe&&ke===Ie?Object.assign({},ke):ke}}function He(Oe,ae,oe){return{type:"Feature",id:Oe[ae+Pe],properties:We(Oe,ae,oe),geometry:{type:"Point",coordinates:[(xe=Oe[ae],360*(xe-.5)),vt(Oe[ae+1])]}};var xe}function We(Oe,ae,oe){const xe=Oe[ae+$e],Ie=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,ke=Oe[ae+Ce],Be=ke===-1?{}:Object.assign({},oe[ke]);return Object.assign(Be,{cluster:!0,cluster_id:Oe[ae+Pe],point_count:xe,point_count_abbreviated:Ie})}function it(Oe){return Oe/360+.5}function ct(Oe){const ae=Math.sin(Oe*Math.PI/180),oe=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return oe<0?0:oe>1?1:oe}function vt(Oe){const ae=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function Mt(Oe,ae,oe,xe){let Ie=xe;const ke=ae+(oe-ae>>1);let Be,Ke=oe-ae;const Le=Oe[ae],st=Oe[ae+1],ft=Oe[oe],ot=Oe[oe+1];for(let Pt=ae+3;Pt<oe;Pt+=3){const qt=pt(Oe[Pt],Oe[Pt+1],Le,st,ft,ot);if(qt>Ie)Be=Pt,Ie=qt;else if(qt===Ie){const rr=Math.abs(Pt-ke);rr<Ke&&(Be=Pt,Ke=rr)}}Ie>xe&&(Be-ae>3&&Mt(Oe,ae,Be,xe),Oe[Be+2]=Ie,oe-Be>3&&Mt(Oe,Be,oe,xe))}function pt(Oe,ae,oe,xe,Ie,ke){let Be=Ie-oe,Ke=ke-xe;if(Be!==0||Ke!==0){const Le=((Oe-oe)*Be+(ae-xe)*Ke)/(Be*Be+Ke*Ke);Le>1?(oe=Ie,xe=ke):Le>0&&(oe+=Be*Le,xe+=Ke*Le)}return Be=Oe-oe,Ke=ae-xe,Be*Be+Ke*Ke}function xt(Oe,ae,oe,xe){const Ie={id:Oe??null,type:ae,geometry:oe,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")Wt(Ie,oe);else if(ae==="Polygon")Wt(Ie,oe[0]);else if(ae==="MultiLineString")for(const ke of oe)Wt(Ie,ke);else if(ae==="MultiPolygon")for(const ke of oe)Wt(Ie,ke[0]);return Ie}function Wt(Oe,ae){for(let oe=0;oe<ae.length;oe+=3)Oe.minX=Math.min(Oe.minX,ae[oe]),Oe.minY=Math.min(Oe.minY,ae[oe+1]),Oe.maxX=Math.max(Oe.maxX,ae[oe]),Oe.maxY=Math.max(Oe.maxY,ae[oe+1])}function Ht(Oe,ae,oe,xe){if(!ae.geometry)return;const Ie=ae.geometry.coordinates;if(Ie&&Ie.length===0)return;const ke=ae.geometry.type,Be=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2);let Ke=[],Le=ae.id;if(oe.promoteId?Le=ae.properties[oe.promoteId]:oe.generateId&&(Le=xe||0),ke==="Point")ar(Ie,Ke);else if(ke==="MultiPoint")for(const st of Ie)ar(st,Ke);else if(ke==="LineString")et(Ie,Ke,Be,!1);else if(ke==="MultiLineString"){if(oe.lineMetrics){for(const st of Ie)Ke=[],et(st,Ke,Be,!1),Oe.push(xt(Le,"LineString",Ke,ae.properties));return}vr(Ie,Ke,Be,!1)}else if(ke==="Polygon")vr(Ie,Ke,Be,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(const st of ae.geometry.geometries)Ht(Oe,{id:Le,geometry:st,properties:ae.properties},oe,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const st of Ie){const ft=[];vr(st,ft,Be,!0),Ke.push(ft)}}Oe.push(xt(Le,ke,Ke,ae.properties))}function ar(Oe,ae){ae.push(lr(Oe[0]),Vt(Oe[1]),0)}function et(Oe,ae,oe,xe){let Ie,ke,Be=0;for(let Le=0;Le<Oe.length;Le++){const st=lr(Oe[Le][0]),ft=Vt(Oe[Le][1]);ae.push(st,ft,0),Le>0&&(Be+=xe?(Ie*ft-st*ke)/2:Math.sqrt(Math.pow(st-Ie,2)+Math.pow(ft-ke,2))),Ie=st,ke=ft}const Ke=ae.length-3;ae[2]=1,Mt(ae,0,Ke,oe),ae[Ke+2]=1,ae.size=Math.abs(Be),ae.start=0,ae.end=ae.size}function vr(Oe,ae,oe,xe){for(let Ie=0;Ie<Oe.length;Ie++){const ke=[];et(Oe[Ie],ke,oe,xe),ae.push(ke)}}function lr(Oe){return Oe/360+.5}function Vt(Oe){const ae=Math.sin(Oe*Math.PI/180),oe=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return oe<0?0:oe>1?1:oe}function Se(Oe,ae,oe,xe,Ie,ke,Be,Ke){if(xe/=ae,ke>=(oe/=ae)&&Be<xe)return Oe;if(Be<oe||ke>=xe)return null;const Le=[];for(const st of Oe){const ft=st.geometry;let ot=st.type;const Pt=Ie===0?st.minX:st.minY,qt=Ie===0?st.maxX:st.maxY;if(Pt>=oe&&qt<xe){Le.push(st);continue}if(qt<oe||Pt>=xe)continue;let rr=[];if(ot==="Point"||ot==="MultiPoint")N(ft,rr,oe,xe,Ie);else if(ot==="LineString")B(ft,rr,oe,xe,Ie,!1,Ke.lineMetrics);else if(ot==="MultiLineString")Xe(ft,rr,oe,xe,Ie,!1);else if(ot==="Polygon")Xe(ft,rr,oe,xe,Ie,!0);else if(ot==="MultiPolygon")for(const dr of ft){const Sr=[];Xe(dr,Sr,oe,xe,Ie,!0),Sr.length&&rr.push(Sr)}if(rr.length){if(Ke.lineMetrics&&ot==="LineString"){for(const dr of rr)Le.push(xt(st.id,ot,dr,st.tags));continue}ot!=="LineString"&&ot!=="MultiLineString"||(rr.length===1?(ot="LineString",rr=rr[0]):ot="MultiLineString"),ot!=="Point"&&ot!=="MultiPoint"||(ot=rr.length===3?"Point":"MultiPoint"),Le.push(xt(st.id,ot,rr,st.tags))}}return Le.length?Le:null}function N(Oe,ae,oe,xe,Ie){for(let ke=0;ke<Oe.length;ke+=3){const Be=Oe[ke+Ie];Be>=oe&&Be<=xe&&tt(ae,Oe[ke],Oe[ke+1],Oe[ke+2])}}function B(Oe,ae,oe,xe,Ie,ke,Be){let Ke=_e(Oe);const Le=Ie===0?ht:ue;let st,ft,ot=Oe.start;for(let Sr=0;Sr<Oe.length-3;Sr+=3){const cr=Oe[Sr],Ur=Oe[Sr+1],Jr=Oe[Sr+2],nn=Oe[Sr+3],xr=Oe[Sr+4],Nr=Ie===0?cr:Ur,Yr=Ie===0?nn:xr;let Pn=!1;Be&&(st=Math.sqrt(Math.pow(cr-nn,2)+Math.pow(Ur-xr,2))),Nr<oe?Yr>oe&&(ft=Le(Ke,cr,Ur,nn,xr,oe),Be&&(Ke.start=ot+st*ft)):Nr>xe?Yr<xe&&(ft=Le(Ke,cr,Ur,nn,xr,xe),Be&&(Ke.start=ot+st*ft)):tt(Ke,cr,Ur,Jr),Yr<oe&&Nr>=oe&&(ft=Le(Ke,cr,Ur,nn,xr,oe),Pn=!0),Yr>xe&&Nr<=xe&&(ft=Le(Ke,cr,Ur,nn,xr,xe),Pn=!0),!ke&&Pn&&(Be&&(Ke.end=ot+st*ft),ae.push(Ke),Ke=_e(Oe)),Be&&(ot+=st)}let Pt=Oe.length-3;const qt=Oe[Pt],rr=Oe[Pt+1],dr=Ie===0?qt:rr;dr>=oe&&dr<=xe&&tt(Ke,qt,rr,Oe[Pt+2]),Pt=Ke.length-3,ke&&Pt>=3&&(Ke[Pt]!==Ke[0]||Ke[Pt+1]!==Ke[1])&&tt(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&ae.push(Ke)}function _e(Oe){const ae=[];return ae.size=Oe.size,ae.start=Oe.start,ae.end=Oe.end,ae}function Xe(Oe,ae,oe,xe,Ie,ke){for(const Be of Oe)B(Be,ae,oe,xe,Ie,ke,!1)}function tt(Oe,ae,oe,xe){Oe.push(ae,oe,xe)}function ht(Oe,ae,oe,xe,Ie,ke){const Be=(ke-ae)/(xe-ae);return tt(Oe,ke,oe+(Ie-oe)*Be,1),Be}function ue(Oe,ae,oe,xe,Ie,ke){const Be=(ke-oe)/(Ie-oe);return tt(Oe,ae+(xe-ae)*Be,ke,1),Be}function k(Oe,ae){const oe=[];for(let xe=0;xe<Oe.length;xe++){const Ie=Oe[xe],ke=Ie.type;let Be;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")Be=U(Ie.geometry,ae);else if(ke==="MultiLineString"||ke==="Polygon"){Be=[];for(const Ke of Ie.geometry)Be.push(U(Ke,ae))}else if(ke==="MultiPolygon"){Be=[];for(const Ke of Ie.geometry){const Le=[];for(const st of Ke)Le.push(U(st,ae));Be.push(Le)}}oe.push(xt(Ie.id,ke,Be,Ie.tags))}return oe}function U(Oe,ae){const oe=[];oe.size=Oe.size,Oe.start!==void 0&&(oe.start=Oe.start,oe.end=Oe.end);for(let xe=0;xe<Oe.length;xe+=3)oe.push(Oe[xe]+ae,Oe[xe+1],Oe[xe+2]);return oe}function Ee(Oe,ae){if(Oe.transformed)return Oe;const oe=1<<Oe.z,xe=Oe.x,Ie=Oe.y;for(const ke of Oe.features){const Be=ke.geometry,Ke=ke.type;if(ke.geometry=[],Ke===1)for(let Le=0;Le<Be.length;Le+=2)ke.geometry.push(Ve(Be[Le],Be[Le+1],ae,oe,xe,Ie));else for(let Le=0;Le<Be.length;Le++){const st=[];for(let ft=0;ft<Be[Le].length;ft+=2)st.push(Ve(Be[Le][ft],Be[Le][ft+1],ae,oe,xe,Ie));ke.geometry.push(st)}}return Oe.transformed=!0,Oe}function Ve(Oe,ae,oe,xe,Ie,ke){return[Math.round(oe*(Oe*xe-Ie)),Math.round(oe*(ae*xe-ke))]}function nt(Oe,ae,oe,xe,Ie){const ke=ae===Ie.maxZoom?0:Ie.tolerance/((1<<ae)*Ie.extent),Be={features:[],numPoints:0,numSimplified:0,numFeatures:Oe.length,source:null,x:oe,y:xe,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ke of Oe)Ge(Be,Ke,ke,Ie);return Be}function Ge(Oe,ae,oe,xe){const Ie=ae.geometry,ke=ae.type,Be=[];if(Oe.minX=Math.min(Oe.minX,ae.minX),Oe.minY=Math.min(Oe.minY,ae.minY),Oe.maxX=Math.max(Oe.maxX,ae.maxX),Oe.maxY=Math.max(Oe.maxY,ae.maxY),ke==="Point"||ke==="MultiPoint")for(let Ke=0;Ke<Ie.length;Ke+=3)Be.push(Ie[Ke],Ie[Ke+1]),Oe.numPoints++,Oe.numSimplified++;else if(ke==="LineString")Et(Be,Ie,Oe,oe,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(let Ke=0;Ke<Ie.length;Ke++)Et(Be,Ie[Ke],Oe,oe,ke==="Polygon",Ke===0);else if(ke==="MultiPolygon")for(let Ke=0;Ke<Ie.length;Ke++){const Le=Ie[Ke];for(let st=0;st<Le.length;st++)Et(Be,Le[st],Oe,oe,!0,st===0)}if(Be.length){let Ke=ae.tags||null;if(ke==="LineString"&&xe.lineMetrics){Ke={};for(const st in ae.tags)Ke[st]=ae.tags[st];Ke.mapbox_clip_start=Ie.start/Ie.size,Ke.mapbox_clip_end=Ie.end/Ie.size}const Le={geometry:Be,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:Ke};ae.id!==null&&(Le.id=ae.id),Oe.features.push(Le)}}function Et(Oe,ae,oe,xe,Ie,ke){const Be=xe*xe;if(xe>0&&ae.size<(Ie?Be:xe))return void(oe.numPoints+=ae.length/3);const Ke=[];for(let Le=0;Le<ae.length;Le+=3)(xe===0||ae[Le+2]>Be)&&(oe.numSimplified++,Ke.push(ae[Le],ae[Le+1])),oe.numPoints++;Ie&&function(Le,st){let ft=0;for(let ot=0,Pt=Le.length,qt=Pt-2;ot<Pt;qt=ot,ot+=2)ft+=(Le[ot]-Le[qt])*(Le[ot+1]+Le[qt+1]);if(ft>0===st)for(let ot=0,Pt=Le.length;ot<Pt/2;ot+=2){const qt=Le[ot],rr=Le[ot+1];Le[ot]=Le[Pt-2-ot],Le[ot+1]=Le[Pt-1-ot],Le[Pt-2-ot]=qt,Le[Pt-1-ot]=rr}}(Ke,ke),Oe.push(Ke)}const It={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class gr{constructor(ae,oe){const xe=(oe=this.options=function(ke,Be){for(const Ke in Be)ke[Ke]=Be[Ke];return ke}(Object.create(It),oe)).debug;if(xe&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ie=function(ke,Be){const Ke=[];if(ke.type==="FeatureCollection")for(let Le=0;Le<ke.features.length;Le++)Ht(Ke,ke.features[Le],Be,Le);else Ht(Ke,ke.type==="Feature"?ke:{geometry:ke},Be);return Ke}(ae,oe);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ie=function(ke,Be){const Ke=Be.buffer/Be.extent;let Le=ke;const st=Se(ke,1,-1-Ke,Ke,0,-1,2,Be),ft=Se(ke,1,1-Ke,2+Ke,0,-1,2,Be);return(st||ft)&&(Le=Se(ke,1,-Ke,1+Ke,0,-1,2,Be)||[],st&&(Le=k(st,1).concat(Le)),ft&&(Le=Le.concat(k(ft,-1)))),Le}(Ie,oe),Ie.length&&this.splitTile(Ie,0,0,0),xe&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,oe,xe,Ie,ke,Be,Ke){const Le=[ae,oe,xe,Ie],st=this.options,ft=st.debug;for(;Le.length;){Ie=Le.pop(),xe=Le.pop(),oe=Le.pop(),ae=Le.pop();const ot=1<<oe,Pt=br(oe,xe,Ie);let qt=this.tiles[Pt];if(!qt&&(ft>1&&console.time("creation"),qt=this.tiles[Pt]=nt(ae,oe,xe,Ie,st),this.tileCoords.push({z:oe,x:xe,y:Ie}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,xe,Ie,qt.numFeatures,qt.numPoints,qt.numSimplified),console.timeEnd("creation"));const Pn=`z${oe}`;this.stats[Pn]=(this.stats[Pn]||0)+1,this.total++}if(qt.source=ae,ke==null){if(oe===st.indexMaxZoom||qt.numPoints<=st.indexMaxPoints)continue}else{if(oe===st.maxZoom||oe===ke)continue;if(ke!=null){const Pn=ke-oe;if(xe!==Be>>Pn||Ie!==Ke>>Pn)continue}}if(qt.source=null,ae.length===0)continue;ft>1&&console.time("clipping");const rr=.5*st.buffer/st.extent,dr=.5-rr,Sr=.5+rr,cr=1+rr;let Ur=null,Jr=null,nn=null,xr=null,Nr=Se(ae,ot,xe-rr,xe+Sr,0,qt.minX,qt.maxX,st),Yr=Se(ae,ot,xe+dr,xe+cr,0,qt.minX,qt.maxX,st);ae=null,Nr&&(Ur=Se(Nr,ot,Ie-rr,Ie+Sr,1,qt.minY,qt.maxY,st),Jr=Se(Nr,ot,Ie+dr,Ie+cr,1,qt.minY,qt.maxY,st),Nr=null),Yr&&(nn=Se(Yr,ot,Ie-rr,Ie+Sr,1,qt.minY,qt.maxY,st),xr=Se(Yr,ot,Ie+dr,Ie+cr,1,qt.minY,qt.maxY,st),Yr=null),ft>1&&console.timeEnd("clipping"),Le.push(Ur||[],oe+1,2*xe,2*Ie),Le.push(Jr||[],oe+1,2*xe,2*Ie+1),Le.push(nn||[],oe+1,2*xe+1,2*Ie),Le.push(xr||[],oe+1,2*xe+1,2*Ie+1)}}getTile(ae,oe,xe){ae=+ae,oe=+oe,xe=+xe;const Ie=this.options,{extent:ke,debug:Be}=Ie;if(ae<0||ae>24)return null;const Ke=1<<ae,Le=br(ae,oe=oe+Ke&Ke-1,xe);if(this.tiles[Le])return Ee(this.tiles[Le],ke);Be>1&&console.log("drilling down to z%d-%d-%d",ae,oe,xe);let st,ft=ae,ot=oe,Pt=xe;for(;!st&&ft>0;)ft--,ot>>=1,Pt>>=1,st=this.tiles[br(ft,ot,Pt)];return st&&st.source?(Be>1&&(console.log("found parent tile z%d-%d-%d",ft,ot,Pt),console.time("drilling down")),this.splitTile(st.source,ft,ot,Pt,ae,oe,xe),Be>1&&console.timeEnd("drilling down"),this.tiles[Le]?Ee(this.tiles[Le],ke):null):null}}function br(Oe,ae,oe){return 32*((1<<Oe)*oe+ae)+Oe}function Rt(Oe,ae){return ae?Oe.properties[ae]:Oe.id}function Rn(Oe,ae){if(Oe==null)return!0;if(Oe.type==="Feature")return Rt(Oe,ae)!=null;if(Oe.type==="FeatureCollection"){const oe=new Set;for(const xe of Oe.features){const Ie=Rt(xe,ae);if(Ie==null||oe.has(Ie))return!1;oe.add(Ie)}return!0}return!1}function ri(Oe,ae){const oe=new Map;if(Oe!=null)if(Oe.type==="Feature")oe.set(Rt(Oe,ae),Oe);else for(const xe of Oe.features)oe.set(Rt(xe,ae),xe);return oe}class Oi extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,oe){return d._(this,void 0,void 0,function*(){const xe=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!Ie)return null;const ke=new class{constructor(Ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.X,this.length=Ke.length,this._features=Ke}feature(Ke){return new class{constructor(Le){this._feature=Le,this.extent=d.X,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const st of this._feature.geometry)Le.push([new d.P(st[0],st[1])]);return Le}{const Le=[];for(const st of this._feature.geometry){const ft=[];for(const ot of st)ft.push(new d.P(ot[0],ot[1]));Le.push(ft)}return Le}}toGeoJSON(Le,st,ft){return le.call(this,Le,st,ft)}}(this._features[Ke])}}(Ie.features);let Be=Y(ke);return Be.byteOffset===0&&Be.byteLength===Be.buffer.byteLength||(Be=new Uint8Array(Be)),{vectorTile:ke,rawData:Be.buffer}})}loadData(ae){return d._(this,void 0,void 0,function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();const xe=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new d.bu(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new Fe(function({superclusterOptions:Be,clusterProperties:Ke}){if(!Ke||!Be)return Be;const Le={},st={},ft={accumulated:null,zoom:0},ot={properties:null},Pt=Object.keys(Ke);for(const qt of Pt){const[rr,dr]=Ke[qt],Sr=d.bB(dr),cr=d.bB(typeof rr=="string"?[rr,["accumulated"],["get",qt]]:rr);Le[qt]=Sr.value,st[qt]=cr.value}return Be.map=qt=>{ot.properties=qt;const rr={};for(const dr of Pt)rr[dr]=Le[dr].evaluate(ft,ot);return rr},Be.reduce=(qt,rr)=>{ot.properties=rr;for(const dr of Pt)ft.accumulated=qt[dr],qt[dr]=st[dr].evaluate(ft,ot)},Be}(ae)).load((yield this._pendingData).features):(Ie=yield this._pendingData,new gr(Ie,ae.geojsonVtOptions)),this.loaded={};const ke={};if(xe){const Be=xe.finish();Be&&(ke.resourceTiming={},ke.resourceTiming[ae.source]=JSON.parse(JSON.stringify(Be)))}return ke}catch(ke){if(delete this._pendingRequest,d.bA(ke))return{abandoned:!0};throw ke}var Ie})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const oe=this.loaded;return oe&&oe[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,oe){return d._(this,void 0,void 0,function*(){let xe=yield this.loadGeoJSON(ae,oe);if(delete this._pendingRequest,typeof xe!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(j(xe,!0),ae.filter){const Ie=d.bB(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(Be=>`${Be.key}: ${Be.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(Be=>Ie.value.evaluate({zoom:0},Be))}}return xe})}loadGeoJSON(ae,oe){return d._(this,void 0,void 0,function*(){const{promoteId:xe}=ae;if(ae.request){const Ie=yield d.h(ae.request,oe);return this._dataUpdateable=Rn(Ie.data,xe)?ri(Ie.data,xe):void 0,Ie.data}if(typeof ae.data=="string")try{const Ie=JSON.parse(ae.data);return this._dataUpdateable=Rn(Ie,xe)?ri(Ie,xe):void 0,Ie}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(Ie,ke,Be){var Ke,Le,st,ft;if(ke.removeAll&&Ie.clear(),ke.remove)for(const ot of ke.remove)Ie.delete(ot);if(ke.add)for(const ot of ke.add){const Pt=Rt(ot,Be);Pt!=null&&Ie.set(Pt,ot)}if(ke.update)for(const ot of ke.update){let Pt=Ie.get(ot.id);if(Pt==null)continue;const qt=!ot.removeAllProperties&&(((Ke=ot.removeProperties)===null||Ke===void 0?void 0:Ke.length)>0||((Le=ot.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((ot.newGeometry||ot.removeAllProperties||qt)&&(Pt=Object.assign({},Pt),Ie.set(ot.id,Pt),qt&&(Pt.properties=Object.assign({},Pt.properties))),ot.newGeometry&&(Pt.geometry=ot.newGeometry),ot.removeAllProperties)Pt.properties={};else if(((st=ot.removeProperties)===null||st===void 0?void 0:st.length)>0)for(const rr of ot.removeProperties)Object.prototype.hasOwnProperty.call(Pt.properties,rr)&&delete Pt.properties[rr];if(((ft=ot.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:rr,value:dr}of ot.addOrUpdateProperties)Pt.properties[rr]=dr}}(this._dataUpdateable,ae.dataDiff,xe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class Vn{constructor(ae){this.self=ae,this.actor=new d.F(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(oe,xe)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=xe},this.self.addProtocol=d.bh,this.self.removeProtocol=d.bi,this.self.registerRTLTextPlugin=oe=>{if(d.bC.isParsed())throw new Error("RTL text plugin already registered.");d.bC.setMethods(oe)},this.actor.registerMessageHandler("LDT",(oe,xe)=>this._getDEMWorkerSource(oe,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RDT",(oe,xe)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(oe,xe.source).removeTile(xe)})),this.actor.registerMessageHandler("GCEZ",(oe,xe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,xe.type,xe.source).getClusterExpansionZoom(xe)})),this.actor.registerMessageHandler("GCC",(oe,xe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,xe.type,xe.source).getClusterChildren(xe)})),this.actor.registerMessageHandler("GCL",(oe,xe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,xe.type,xe.source).getClusterLeaves(xe)})),this.actor.registerMessageHandler("LD",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).loadData(xe)),this.actor.registerMessageHandler("GD",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).getData()),this.actor.registerMessageHandler("LT",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RT",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).reloadTile(xe)),this.actor.registerMessageHandler("AT",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).abortTile(xe)),this.actor.registerMessageHandler("RMT",(oe,xe)=>this._getWorkerSource(oe,xe.type,xe.source).removeTile(xe)),this.actor.registerMessageHandler("RS",(oe,xe)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[oe]||!this.workerSources[oe][xe.type]||!this.workerSources[oe][xe.type][xe.source])return;const Ie=this.workerSources[oe][xe.type][xe.source];delete this.workerSources[oe][xe.type][xe.source],Ie.removeSource!==void 0&&Ie.removeSource(xe)})),this.actor.registerMessageHandler("RM",oe=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe]})),this.actor.registerMessageHandler("SR",(oe,xe)=>d._(this,void 0,void 0,function*(){this.referrer=xe})),this.actor.registerMessageHandler("SRPS",(oe,xe)=>this._syncRTLPluginState(oe,xe)),this.actor.registerMessageHandler("IS",(oe,xe)=>d._(this,void 0,void 0,function*(){this.self.importScripts(xe)})),this.actor.registerMessageHandler("SI",(oe,xe)=>this._setImages(oe,xe)),this.actor.registerMessageHandler("UL",(oe,xe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(oe).update(xe.layers,xe.removedIds)})),this.actor.registerMessageHandler("SL",(oe,xe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(oe).replace(xe)}))}_setImages(ae,oe){return d._(this,void 0,void 0,function*(){this.availableImages[ae]=oe;for(const xe in this.workerSources[ae]){const Ie=this.workerSources[ae][xe];for(const ke in Ie)Ie[ke].availableImages=oe}})}_syncRTLPluginState(ae,oe){return d._(this,void 0,void 0,function*(){if(d.bC.isParsed())return d.bC.getState();if(oe.pluginStatus!=="loading")return d.bC.setState(oe),oe;const xe=oe.pluginURL;if(this.self.importScripts(xe),d.bC.isParsed()){const Ie={pluginStatus:"loaded",pluginURL:xe};return d.bC.setState(Ie),Ie}throw d.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${xe}`)})}_getAvailableImages(ae){let oe=this.availableImages[ae];return oe||(oe=[]),oe}_getLayerIndex(ae){let oe=this.layerIndexes[ae];return oe||(oe=this.layerIndexes[ae]=new l),oe}_getWorkerSource(ae,oe,xe){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][oe]||(this.workerSources[ae][oe]={}),!this.workerSources[ae][oe][xe]){const Ie={sendAsync:(ke,Be)=>(ke.targetMapId=ae,this.actor.sendAsync(ke,Be))};switch(oe){case"vector":this.workerSources[ae][oe][xe]=new b(Ie,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][oe][xe]=new Oi(Ie,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][oe][xe]=new this.externalWorkerSourceTypes[oe](Ie,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][oe][xe]}_getDEMWorkerSource(ae,oe){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][oe]||(this.demWorkerSources[ae][oe]=new T),this.demWorkerSources[ae][oe]}}return d.i(self)&&(self.worker=new Vn(self)),Vn}),c("index",["exports","./shared"],function(d,l){var w="4.5.0";let E,C;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((n,u)=>{const p=requestAnimationFrame(n);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),u(l.c())})}),getImageData(v,n=0){return this.getImageCanvasContext(v).getImageData(-n,-n,v.width+2*n,v.height+2*n)},getImageCanvasContext(v){const n=window.document.createElement("canvas"),u=n.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return n.width=v.width,n.height=v.height,u.drawImage(v,0,0,v.width,v.height),u},resolveURL:v=>(E||(E=document.createElement("a")),E.href=v,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(C==null&&(C=matchMedia("(prefers-reduced-motion: reduce)")),C.matches)}};class T{static testProp(n){if(!T.docStyle)return n[0];for(let u=0;u<n.length;u++)if(n[u]in T.docStyle)return n[u];return n[0]}static create(n,u,p){const g=window.document.createElement(n);return u!==void 0&&(g.className=u),p&&p.appendChild(g),g}static createNS(n,u){return window.document.createElementNS(n,u)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(n,u){n.style[T.transformProp]=u}static addEventListener(n,u,p,g={}){n.addEventListener(u,p,"passive"in g?g:g.capture)}static removeEventListener(n,u,p,g={}){n.removeEventListener(u,p,"passive"in g?g:g.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(n){const u=n.getBoundingClientRect();return{x:u.width/n.offsetWidth||1,y:u.height/n.offsetHeight||1,boundingClientRect:u}}static getPoint(n,u,p){const g=u.boundingClientRect;return new l.P((p.clientX-g.left)/u.x-n.clientLeft,(p.clientY-g.top)/u.y-n.clientTop)}static mousePos(n,u){const p=T.getScale(n);return T.getPoint(n,p,u)}static touchPos(n,u){const p=[],g=T.getScale(n);for(let _=0;_<u.length;_++)p.push(T.getPoint(n,g,u[_]));return p}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!le&&j&&(K?Z(v):L=v)}};let L,j,le=!1,K=!1;function Z(v){const n=v.createTexture();v.bindTexture(v.TEXTURE_2D,n);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,j),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(n),le=!0}var G;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{L&&Z(L),L=null,K=!0},j.onerror=()=>{le=!0,L=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let n,u,p,g;v.resetRequestQueue=()=>{n=[],u=0,p=0,g={}},v.addThrottleControl=O=>{const $=p++;return g[$]=O,$},v.removeThrottleControl=O=>{delete g[O],A()},v.getImage=(O,$,te=!0)=>new Promise((Q,pe)=>{R.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),l.e(O,{type:"image"}),n.push({abortController:$,requestParameters:O,supportImageRefresh:te,state:"queued",onError:we=>{pe(we)},onSuccess:we=>{Q(we)}}),A()});const _=O=>l._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:$,supportImageRefresh:te,onError:Q,onSuccess:pe,abortController:we}=O,Ae=te===!1&&!l.i(self)&&!l.g($.url)&&(!$.headers||Object.keys($.headers).reduce((De,qe)=>De&&qe==="accept",!0));u++;const ze=Ae?M($,we):l.m($,we);try{const De=yield ze;delete O.abortController,O.state="completed",De.data instanceof HTMLImageElement||l.b(De.data)?pe(De):De.data&&pe({data:yield(Me=De.data,typeof createImageBitmap=="function"?l.d(Me):l.f(Me)),cacheControl:De.cacheControl,expires:De.expires})}catch(De){delete O.abortController,Q(De)}finally{u--,A()}var Me}),A=()=>{const O=(()=>{for(const $ of Object.keys(g))if(g[$]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=u;$<O&&n.length>0;$++){const te=n.shift();te.abortController.signal.aborted?$--:_(te)}},M=(O,$)=>new Promise((te,Q)=>{const pe=new Image,we=O.url,Ae=O.credentials;Ae&&Ae==="include"?pe.crossOrigin="use-credentials":(Ae&&Ae==="same-origin"||!l.s(we))&&(pe.crossOrigin="anonymous"),$.signal.addEventListener("abort",()=>{pe.src="",Q(l.c())}),pe.fetchPriority="high",pe.onload=()=>{pe.onerror=pe.onload=null,te({data:pe})},pe.onerror=()=>{pe.onerror=pe.onload=null,$.signal.aborted||Q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},pe.src=we})}(G||(G={})),G.resetRequestQueue();class se{constructor(n){this._transformRequestFn=n}transformRequest(n,u){return this._transformRequestFn&&this._transformRequestFn(n,u)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function q(v){var n=new l.A(3);return n[0]=v[0],n[1]=v[1],n[2]=v[2],n}var W,P=function(v,n,u){return v[0]=n[0]-u[0],v[1]=n[1]-u[1],v[2]=n[2]-u[2],v};W=new l.A(3),l.A!=Float32Array&&(W[0]=0,W[1]=0,W[2]=0);var z=function(v){var n=v[0],u=v[1];return n*n+u*u};function D(v){const n=[];if(typeof v=="string")n.push({id:"default",url:v});else if(v&&v.length>0){const u=[];for(const{id:p,url:g}of v){const _=`${p}${g}`;u.indexOf(_)===-1&&(u.push(_),n.push({id:p,url:g}))}}return n}function ee(v,n,u){const p=v.split("?");return p[0]+=`${n}${u}`,p.join("?")}(function(){var v=new l.A(2);l.A!=Float32Array&&(v[0]=0,v[1]=0)})();class X{constructor(n,u,p,g){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(u,g)}update(n,u,p){const{width:g,height:_}=n,A=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:M}=this,{gl:O}=M;if(this.useMipmap=!!(u&&u.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!u||u.premultiply!==!1)),A)this.size=[g,_],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||l.b(n)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,n):O.texImage2D(O.TEXTURE_2D,0,this.format,g,_,0,this.format,O.UNSIGNED_BYTE,n.data);else{const{x:$,y:te}=p||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||l.b(n)?O.texSubImage2D(O.TEXTURE_2D,0,$,te,O.RGBA,O.UNSIGNED_BYTE,n):O.texSubImage2D(O.TEXTURE_2D,0,$,te,g,_,O.RGBA,O.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(n,u,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),n!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,n),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||n),this.filter=n),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ye(v){const{userImage:n}=v;return!!(n&&n.render&&n.render())&&(v.data.replace(new Uint8Array(n.data.buffer)),!0)}class ge extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(n){const u=this.images[n];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(n,u){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,u)&&(this.images[n]=u)}_validate(n,u){let p=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new l.j(new Error(`Image "${n}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new l.j(new Error(`Image "${n}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${n}" has invalid "content" value`))),p=!1),p}_validateStretch(n,u){if(!n)return!0;let p=0;for(const g of n){if(g[0]<p||g[1]<g[0]||u<g[1])return!1;p=g[1]}return!0}_validateContent(n,u){if(!n)return!0;if(n.length!==4)return!1;const p=u.spriteData,g=p&&p.width||u.data.width,_=p&&p.height||u.data.height;return!(n[0]<0||g<n[0]||n[1]<0||_<n[1]||n[2]<0||g<n[2]||n[3]<0||_<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,u,p=!0){const g=this.getImage(n);if(p&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[n]=u,this.updatedImages[n]=!0}removeImage(n){const u=this.images[n];delete this.images[n],delete this.patterns[n],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((u,p)=>{let g=!0;if(!this.isLoaded())for(const _ of n)this.images[_]||(g=!1);this.isLoaded()||g?u(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:u})})}_getImagesForIds(n){const u={};for(const p of n){let g=this.getImage(p);g||(this.fire(new l.k("styleimagemissing",{id:p})),g=this.getImage(p)),g?u[p]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:l.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:n,height:u}=this.atlasImage;return{width:n,height:u}}getPattern(n){const u=this.patterns[n],p=this.getImage(n);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new l.I(g,p);this.patterns[n]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const u=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new X(n,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const _ in this.patterns)n.push(this.patterns[_].bin);const{w:u,h:p}=l.p(n),g=this.atlasImage;g.resize({width:u||1,height:p||1});for(const _ in this.patterns){const{bin:A}=this.patterns[_],M=A.x+1,O=A.y+1,$=this.getImage(_).data,te=$.width,Q=$.height;l.R.copy($,g,{x:0,y:0},{x:M,y:O},{width:te,height:Q}),l.R.copy($,g,{x:0,y:Q-1},{x:M,y:O-1},{width:te,height:1}),l.R.copy($,g,{x:0,y:0},{x:M,y:O+Q},{width:te,height:1}),l.R.copy($,g,{x:te-1,y:0},{x:M-1,y:O},{width:1,height:Q}),l.R.copy($,g,{x:0,y:0},{x:M+te,y:O},{width:1,height:Q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const u of n){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||l.w(`Image with ID: "${u}" was not found`),ye(p)&&this.updateImage(u,p)}}}const fe=1e20;function ie(v,n,u,p,g,_,A,M,O){for(let $=n;$<n+p;$++)he(v,u*_+$,_,g,A,M,O);for(let $=u;$<u+g;$++)he(v,$*_+n,1,p,A,M,O)}function he(v,n,u,p,g,_,A){_[0]=0,A[0]=-fe,A[1]=fe,g[0]=v[n];for(let M=1,O=0,$=0;M<p;M++){g[M]=v[n+M*u];const te=M*M;do{const Q=_[O];$=(g[M]-g[Q]+te-Q*Q)/(M-Q)/2}while($<=A[O]&&--O>-1);O++,_[O]=M,A[O]=$,A[O+1]=fe}for(let M=0,O=0;M<p;M++){for(;A[O+1]<M;)O++;const $=_[O],te=M-$;v[n+M*u]=g[$]+te*te}}class Y{constructor(n,u){this.requestManager=n,this.localIdeographFontFamily=u,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return l._(this,void 0,void 0,function*(){const u=[];for(const _ in n)for(const A of n[_])u.push(this._getAndCacheGlyphsPromise(_,A));const p=yield Promise.all(u),g={};for(const{stack:_,id:A,glyph:M}of p)g[_]||(g[_]={}),g[_][A]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return g})}_getAndCacheGlyphsPromise(n,u){return l._(this,void 0,void 0,function*(){let p=this.entries[n];p||(p=this.entries[n]={glyphs:{},requests:{},ranges:{}});let g=p.glyphs[u];if(g!==void 0)return{stack:n,id:u,glyph:g};if(g=this._tinySDF(p,n,u),g)return p.glyphs[u]=g,{stack:n,id:u,glyph:g};const _=Math.floor(u/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[_])return{stack:n,id:u,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[_]){const M=Y.loadGlyphRange(n,_,this.url,this.requestManager);p.requests[_]=M}const A=yield p.requests[_];for(const M in A)this._doesCharSupportLocalGlyph(+M)||(p.glyphs[+M]=A[+M]);return p.ranges[_]=!0,{stack:n,id:u,glyph:A[u]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](n)||l.u["Hangul Syllables"](n)||l.u.Hiragana(n)||l.u.Katakana(n))}_tinySDF(n,u,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=n.tinySDF;if(!_){let M="400";/bold/i.test(u)?M="900":/medium/i.test(u)?M="500":/light/i.test(u)&&(M="200"),_=n.tinySDF=new Y.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:M})}const A=_.draw(String.fromCharCode(p));return{id:p,bitmap:new l.o({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}Y.loadGlyphRange=function(v,n,u,p){return l._(this,void 0,void 0,function*(){const g=256*n,_=g+255,A=p.transformRequest(u.replace("{fontstack}",v).replace("{range}",`${g}-${_}`),"Glyphs"),M=yield l.l(A,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${n}, ${g}-${_}`);const O={};for(const $ of l.n(M.data))O[$.id]=$;return O})},Y.TinySDF=class{constructor({fontSize:v=24,buffer:n=3,radius:u=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:A="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=u;const M=this.size=v+4*n,O=this._createCanvas(M),$=this.ctx=O.getContext("2d",{willReadFrequently:!0});$.font=`${A} ${_} ${v}px ${g}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(v){const n=document.createElement("canvas");return n.width=n.height=v,n}draw(v){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(v),A=Math.ceil(u),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),O=Math.min(this.size-this.buffer,A+Math.ceil(p)),$=M+2*this.buffer,te=O+2*this.buffer,Q=Math.max($*te,0),pe=new Uint8ClampedArray(Q),we={data:pe,width:$,height:te,glyphWidth:M,glyphHeight:O,glyphTop:A,glyphLeft:0,glyphAdvance:n};if(M===0||O===0)return we;const{ctx:Ae,buffer:ze,gridInner:Me,gridOuter:De}=this;Ae.clearRect(ze,ze,M,O),Ae.fillText(v,ze,ze+A);const qe=Ae.getImageData(ze,ze,M,O);De.fill(fe,0,Q),Me.fill(0,0,Q);for(let je=0;je<O;je++)for(let Je=0;Je<M;Je++){const rt=qe.data[4*(je*M+Je)+3]/255;if(rt===0)continue;const at=(je+ze)*$+Je+ze;if(rt===1)De[at]=0,Me[at]=fe;else{const mt=.5-rt;De[at]=mt>0?mt*mt:0,Me[at]=mt<0?mt*mt:0}}ie(De,0,0,$,te,$,this.f,this.v,this.z),ie(Me,ze,ze,M,O,$,this.f,this.v,this.z);for(let je=0;je<Q;je++){const Je=Math.sqrt(De[je])-Math.sqrt(Me[je]);pe[je]=Math.round(255-255*(Je/this.radius+this.cutoff))}return we}};class re{constructor(){this.specification=l.v.light.position}possiblyEvaluate(n,u){return l.y(n.expression.evaluate(u))}interpolate(n,u,p){return{x:l.z.number(n.x,u.x,p),y:l.z.number(n.y,u.y,p),z:l.z.number(n.z,u.z,p)}}}let de;class be extends l.E{constructor(n){super(),de=de||new l.q({anchor:new l.D(l.v.light.anchor),position:new re,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(de),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,u={}){if(!this._validate(l.r,n,u))for(const p in n){const g=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,p){return(!p||p.validate!==!1)&&l.t(this,n.call(l.x,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Pe=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class $e extends l.E{constructor(n){super(),this._transitionable=new l.T(Pe),this.setSky(n),this._transitioning=this._transitionable.untransitioned()}setSky(n,u={}){if(!this._validate(l.B,n,u))for(const p in n){const g=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,p={}){return(p==null?void 0:p.validate)!==!1&&l.t(this,n.call(l.x,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Ce{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,u){const p=n.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(n,u)),this.dashEntry[p]}getDashRanges(n,u,p){const g=[];let _=n.length%2==1?-n[n.length-1]*p:0,A=n[0]*p,M=!0;g.push({left:_,right:A,isDash:M,zeroLength:n[0]===0});let O=n[0];for(let $=1;$<n.length;$++){M=!M;const te=n[$];_=O*p,O+=te,A=O*p,g.push({left:_,right:A,isDash:M,zeroLength:te===0})}return g}addRoundDash(n,u,p){const g=u/2;for(let _=-p;_<=p;_++){const A=this.width*(this.nextRow+p+_);let M=0,O=n[M];for(let $=0;$<this.width;$++){$/O.right>1&&(O=n[++M]);const te=Math.abs($-O.left),Q=Math.abs($-O.right),pe=Math.min(te,Q);let we;const Ae=_/p*(g+1);if(O.isDash){const ze=g-Math.abs(Ae);we=Math.sqrt(pe*pe+ze*ze)}else we=g-Math.sqrt(pe*pe+Ae*Ae);this.data[A+$]=Math.max(0,Math.min(255,we+128))}}}addRegularDash(n){for(let M=n.length-1;M>=0;--M){const O=n[M],$=n[M+1];O.zeroLength?n.splice(M,1):$&&$.isDash===O.isDash&&($.left=O.left,n.splice(M,1))}const u=n[0],p=n[n.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,A=n[_];for(let M=0;M<this.width;M++){M/A.right>1&&(A=n[++_]);const O=Math.abs(M-A.left),$=Math.abs(M-A.right),te=Math.min(O,$);this.data[g+M]=Math.max(0,Math.min(255,(A.isDash?te:-te)+128))}}addDash(n,u){const p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let M=0;M<n.length;M++)_+=n[M];if(_!==0){const M=this.width/_,O=this.getDashRanges(n,this.width,M);u?this.addRoundDash(O,M,p):this.addRegularDash(O)}const A={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,A}bind(n){const u=n.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const We=Math.floor(b.hardwareConcurrency/2);let it,ct;function vt(){return it||(it=new He),it}He.workerCount=l.C(globalThis)?Math.max(Math.min(We,3),1):1;class Mt{constructor(n,u){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let g=0;g<p.length;g++){const _=new l.F(p[g],u);_.name=`Worker ${g}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,u){const p=[];for(const g of this.actors)p.push(g.sendAsync({type:n,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,u){for(const p of this.actors)p.registerMessageHandler(n,u)}}function pt(){return ct||(ct=new Mt(vt(),l.G),ct.registerMessageHandler("GR",(v,n,u)=>l.m(n,u))),ct}function xt(v,n){const u=l.H();return l.J(u,u,[1,1,0]),l.K(u,u,[.5*v.width,.5*v.height,1]),l.L(u,u,v.calculatePosMatrix(n.toUnwrapped()))}function Wt(v,n,u,p,g,_){const A=function(Q,pe,we){if(Q)for(const Ae of Q){const ze=pe[Ae];if(ze&&ze.source===we&&ze.type==="fill-extrusion")return!0}else for(const Ae in pe){const ze=pe[Ae];if(ze.source===we&&ze.type==="fill-extrusion")return!0}return!1}(g&&g.layers,n,v.id),M=_.maxPitchScaleFactor(),O=v.tilesIn(p,M,A);O.sort(Ht);const $=[];for(const Q of O)$.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(n,u,v._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,g,_,M,xt(v.transform,Q.tileID))});const te=function(Q){const pe={},we={};for(const Ae of Q){const ze=Ae.queryResults,Me=Ae.wrappedTileID,De=we[Me]=we[Me]||{};for(const qe in ze){const je=ze[qe],Je=De[qe]=De[qe]||{},rt=pe[qe]=pe[qe]||[];for(const at of je)Je[at.featureIndex]||(Je[at.featureIndex]=!0,rt.push(at))}}return pe}($);for(const Q in te)te[Q].forEach(pe=>{const we=pe.feature,Ae=v.getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=Ae});return te}function Ht(v,n){const u=v.tileID,p=n.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function ar(v,n,u){return l._(this,void 0,void 0,function*(){let p=v;if(v.url?p=(yield l.h(n.transformRequest(v.url,"Source"),u)).data:yield b.frameAsync(u),!p)return null;const g=l.M(l.e(p,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(g.vectorLayerIds=p.vector_layers.map(_=>_.id)),g})}class et{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof l.N?new l.N(n.lng,n.lat):l.N.convert(n),this}setSouthWest(n){return this._sw=n instanceof l.N?new l.N(n.lng,n.lat):l.N.convert(n),this}extend(n){const u=this._sw,p=this._ne;let g,_;if(n instanceof l.N)g=n,_=n;else{if(!(n instanceof et))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(et.convert(n)):this.extend(l.N.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(l.N.convert(n)):this;if(g=n._sw,_=n._ne,!g||!_)return this}return u||p?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new l.N(g.lng,g.lat),this._ne=new l.N(_.lng,_.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:p}=l.N.convert(n);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(n){return n instanceof et?n:n&&new et(n)}static fromLngLat(n,u=0){const p=360*u/40075017,g=p/Math.cos(Math.PI/180*n.lat);return new et(new l.N(n.lng-g,n.lat-p),new l.N(n.lng+g,n.lat+p))}}class vr{constructor(n,u,p){this.bounds=et.convert(this.validateBounds(n)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const u=Math.pow(2,n.z),p=Math.floor(l.O(this.bounds.getWest())*u),g=Math.floor(l.Q(this.bounds.getNorth())*u),_=Math.ceil(l.O(this.bounds.getEast())*u),A=Math.ceil(l.Q(this.bounds.getSouth())*u);return n.x>=p&&n.x<_&&n.y>=g&&n.y<A}}class lr extends l.E{constructor(n,u,p,g){if(super(),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield ar(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(l.e(this,n),n.bounds&&(this.tileBounds=new vr(n.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new l.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(n){return l._(this,void 0,void 0,function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((_,A)=>{n.reloadPromise={resolve:_,reject:A}})}else n.actor=this.dispatcher.getActor(),g="LT";n.abortController=new AbortController;try{const _=yield n.actor.sendAsync({type:g,data:p},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,_)}catch(_){if(delete n.abortController,n.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,u){if(u&&u.resourceTiming&&(n.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&n.setExpiryData(u),n.loadVectorData(u,this.map.painter),n.reloadPromise){const p=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(p.resolve).catch(p.reject)}}abortTile(n){return l._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return l._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends l.E{constructor(n,u,p,g){super(),this.id=n,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.M(u,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield ar(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(l.e(this,n),n.bounds&&(this.tileBounds=new vr(n.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new l.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return l.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return l._(this,void 0,void 0,function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const p=yield G.getImage(this.map._requestManager.transformRequest(u,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const g=this.map.painter.context,_=g.gl,A=p.data;n.texture=this.map.painter.getTileTexture(A.width),n.texture?n.texture.update(A,{useMipmap:!0}):(n.texture=new X(g,A,_.RGBA,{useMipmap:!0}),n.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),n.state="loaded"}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}})}abortTile(n){return l._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return l._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Se extends Vt{constructor(n,u,p,g){super(n,u,p,g),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(n){return l._(this,void 0,void 0,function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const g=yield G.getImage(p,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(g&&g.data){const _=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&n.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const A=l.b(_)&&l.U()?_:yield this.readImageNow(_),M={type:this.type,uid:n.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const O=yield n.actor.sendAsync({type:"LDT",data:M});n.dem=O,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(g){if(delete n.abortController,n.aborted)n.state="unloaded";else if(g)throw n.state="errored",g}})}readImageNow(n){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.V()){const u=n.width+2,p=n.height+2;try{return new l.R({width:u,height:p},yield l.W(n,-1,-1,u,p))}catch{}}return b.getImageData(n,1)})}_getNeighboringTiles(n){const u=n.canonical,p=Math.pow(2,u.z),g=(u.x-1+p)%p,_=u.x===0?n.wrap-1:n.wrap,A=(u.x+1+p)%p,M=u.x+1===p?n.wrap+1:n.wrap,O={};return O[new l.S(n.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},O[new l.S(n.overscaledZ,M,u.z,A,u.y).key]={backfilled:!1},u.y>0&&(O[new l.S(n.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},O[new l.S(n.overscaledZ,n.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new l.S(n.overscaledZ,M,u.z,A,u.y-1).key]={backfilled:!1}),u.y+1<p&&(O[new l.S(n.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},O[new l.S(n.overscaledZ,n.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new l.S(n.overscaledZ,M,u.z,A,u.y+1).key]={backfilled:!1}),O}unloadTile(n){return l._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class N extends l.E{constructor(n,u,p,g){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.X/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.X,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.X,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return l._(this,void 0,void 0,function*(){const n=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:u,offset:p}})}_updateWorkerData(n){return l._(this,void 0,void 0,function*(){const u=l.e({type:this.type},this.workerOptions);n?u.dataDiff=n:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let g=null;p.resourceTiming&&p.resourceTiming[this.id]&&(g=p.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&l.e(_,{resourceTiming:g}),this.fire(new l.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(n){return l._(this,void 0,void 0,function*(){const u=n.actor?"RT":"LT";n.actor=this.actor;const p={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const g=yield this.actor.sendAsync({type:u,data:p},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(g,this.map.painter,u==="RT")})}abortTile(n){return l._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return l._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var B=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _e extends l.E{constructor(n,u,p,g){super(),this.id=n,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}load(n){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,n&&(this.coordinates=n),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new l.j(u))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const u=n.map(l.Z.fromLngLat);this.tileID=function(g){let _=1/0,A=1/0,M=-1/0,O=-1/0;for(const pe of g)_=Math.min(_,pe.x),A=Math.min(A,pe.y),M=Math.max(M,pe.x),O=Math.max(O,pe.y);const $=Math.max(M-_,O-A),te=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),Q=Math.pow(2,te);return new l.a1(te,Math.floor((_+M)/2*Q),Math.floor((A+O)/2*Q))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,l.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,l.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,u=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new X(n,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Xe extends _e{constructor(n,u,p,g){super(n,u,p,g),this.roundZoom=!0,this.type="video",this.options=u}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const u of n.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield l.a3(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new l.j(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const u=this.video.seekable;n<u.start(0)||n>u.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,u=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new X(n,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tt extends _e{constructor(n,u,p,g){super(n,u,p,g),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(A=>typeof A!="number"))||this.fire(new l.j(new l.a2(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${n}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${n}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new X(u,this.canvas,p.RGBA,{premultiply:!0});let g=!1;for(const _ in this.tiles){const A=this.tiles[_];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,g=!0)}g&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const ht={},ue=v=>{switch(v){case"geojson":return N;case"image":return _e;case"raster":return Vt;case"raster-dem":return Se;case"vector":return lr;case"video":return Xe;case"canvas":return tt}return ht[v]},k="RTLPluginLoaded";class U extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=pt()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return l._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(k))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ee=null;function Ve(){return Ee||(Ee=new U),Ee}class nt{constructor(n,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=l.a4(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const u=n+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(g,_){const A={};if(!_)return A;for(const M of g){const O=M.layerIds.map($=>_.getLayer($)).filter(Boolean);if(O.length!==0){M.layers=O,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map($=>O.filter(te=>te.id===$)[0]));for(const $ of O)A[$.id]=M}}return A}(n.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a6){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a6&&_.hasRTLText){this.hasRTLText=!0,Ve().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,p,g,_,A,M,O,$,te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:A,tileSize:this.tileSize,pixelPosMatrix:te,transform:O,params:M,queryPadding:this.queryPadding*$},n,u,p):{}}querySourceFeatures(n,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",A=g._geojsonTileLayer||g[_];if(!A)return;const M=l.a7(u&&u.filter),{z:O,x:$,y:te}=this.tileID.canonical,Q={z:O,x:$,y:te};for(let pe=0;pe<A.length;pe++){const we=A.feature(pe);if(M.needGeometry){const Me=l.a8(we,!0);if(!M.filter(new l.a9(this.tileID.overscaledZ),Me,this.tileID.canonical))continue}else if(!M.filter(new l.a9(this.tileID.overscaledZ),we))continue;const Ae=p.getId(we,_),ze=new l.aa(we,O,$,te,Ae);ze.tile=Q,n.push(ze)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const p=l.ab(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],A=_.layers[0].sourceLayer||"_geojsonTileLayer",M=p[A],O=n[A];if(!M||!O||Object.keys(O).length===0)continue;_.update(O,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=u&&u.style&&u.style.getLayer(g);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=b.now()+n}setDependencies(n,u){const p={};for(const g of u)p[g]=!0;this.dependencies[n]=p}hasDependency(n,u){for(const p of n){const g=this.dependencies[p];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class Ge{constructor(n,u){this.max=n,this.onRemove=u,this.reset()}reset(){for(const n in this.data)for(const u of this.data[n])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(n,u,p){const g=n.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(n,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const u=this.data[n].shift();return u.timeout&&clearTimeout(u.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),u.value}getByKey(n){const u=this.data[n];return u?u[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,u){if(!this.has(n))return this;const p=n.wrapped().key,g=u===void 0?0:this.data[p].indexOf(u),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(n){const u=[];for(const p in this.data)for(const g of this.data[p])n(g.value)||u.push(g);for(const p of u)this.remove(p.value.tileID,p)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,u,p){const g=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][g]=this.stateChanges[n][g]||{},l.e(this.stateChanges[n][g],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const _ in this.state[n])_!==g&&(this.deletedStates[n][_]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][g]===null){this.deletedStates[n][g]={};for(const _ in this.state[n][g])p[_]||(this.deletedStates[n][g][_]=null)}else for(const _ in p)this.deletedStates[n]&&this.deletedStates[n][g]&&this.deletedStates[n][g][_]===null&&delete this.deletedStates[n][g][_]}removeFeatureState(n,u,p){if(this.deletedStates[n]===null)return;const g=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&u!==void 0)this.deletedStates[n][g]!==null&&(this.deletedStates[n][g]=this.deletedStates[n][g]||{},this.deletedStates[n][g][p]=null);else if(u!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][g])for(p in this.deletedStates[n][g]={},this.stateChanges[n][g])this.deletedStates[n][g][p]=null;else this.deletedStates[n][g]=null;else this.deletedStates[n]=null}getState(n,u){const p=String(u),g=l.e({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const _=this.deletedStates[n][u];if(_===null)return{};for(const A in _)delete g[A]}return g}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const A in this.stateChanges[g])this.state[g][A]||(this.state[g][A]={}),l.e(this.state[g][A],this.stateChanges[g][A]),_[A]=this.state[g][A];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const A in this.state[g])_[A]={},this.state[g][A]={};else for(const A in this.deletedStates[g]){if(this.deletedStates[g][A]===null)this.state[g][A]={};else for(const M of Object.keys(this.deletedStates[g][A]))delete this.state[g][A][M];_[A]=this.state[g][A]}p[g]=p[g]||{},l.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in n)n[g].setFeatureState(p,u)}}class It extends l.E{constructor(n,u,p){super(),this.id=n,this.dispatcher=p,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,A,M)=>{const O=new(ue(_.type))(g,_,A,M);if(O.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${O.id}`);return O})(n,u,p,this),this._tiles={},this._cache=new Ge(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const u=this._tiles[n];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,u,p){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,u,p)}catch(g){n.state="errored",g.status!==404?this._source.fire(new l.j(g,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new l.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(gr).map(n=>n.key)}getRenderableIds(n){const u=[];for(const p in this._tiles)this._isIdRenderable(p,n)&&u.push(this._tiles[p]);return n?u.sort((p,g)=>{const _=p.tileID,A=g.tileID,M=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),O=new l.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-A.overscaledZ||O.y-M.y||O.x-M.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(gr).map(p=>p.key)}hasRenderableParent(n){const u=this.findLoadedParent(n,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(n,u){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(u||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,u){return l._(this,void 0,void 0,function*(){const p=this._tiles[n];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,n,u))})}_tileLoaded(n,u,p){n.timeAdded=b.now(),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(n.neighboringTiles&&n.neighboringTiles[_]){const A=this.getTileByID(_);p(n,A),p(A,n)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let A=_.tileID.canonical.x-g.tileID.canonical.x;const M=_.tileID.canonical.y-g.tileID.canonical.y,O=Math.pow(2,g.tileID.canonical.z),$=_.tileID.key;A===0&&M===0||Math.abs(M)>1||(Math.abs(A)>1&&(Math.abs(A+O)===1?A+=O:Math.abs(A-O)===1&&(A-=O)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,A,M),g.neighboringTiles&&g.neighboringTiles[$]&&(g.neighboringTiles[$].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,u,p,g){for(const _ in this._tiles){let A=this._tiles[_];if(g[_]||!A.hasData()||A.tileID.overscaledZ<=u||A.tileID.overscaledZ>p)continue;let M=A.tileID;for(;A&&A.tileID.overscaledZ>u+1;){const $=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[$.key],A&&A.hasData()&&(M=$)}let O=M;for(;O.overscaledZ>u;)if(O=O.scaledTo(O.overscaledZ-1),n[O.key]){g[M.key]=M;break}}}findLoadedParent(n,u){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=n.overscaledZ-1;p>=u;p--){const g=n.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const u=this._tiles[n.key];return u&&u.hasData()?u:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const u=Math.ceil(n.width/this._source.tileSize)+1,p=Math.ceil(n.height/this._source.tileSize)+1,g=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(n){const u=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,u){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(n,u,p,g,_,A){const M={},O={},$=Object.keys(n),te=b.now();for(const Q of $){const pe=n[Q],we=this._tiles[Q];if(!we||we.fadeEndTime!==0&&we.fadeEndTime<=te)continue;const Ae=this.findLoadedParent(pe,u),ze=this.findLoadedSibling(pe),Me=Ae||ze||null;Me&&(this._addTile(Me.tileID),M[Me.tileID.key]=Me.tileID),O[Q]=pe}this._retainLoadedChildren(O,g,p,n);for(const Q in M)n[Q]||(this._coveredTiles[Q]=!0,n[Q]=M[Q]);if(A){const Q={},pe={};for(const we of _)this._tiles[we.key].hasData()?Q[we.key]=we:pe[we.key]=we;for(const we in pe){const Ae=pe[we].children(this._source.maxzoom);this._tiles[Ae[0].key]&&this._tiles[Ae[1].key]&&this._tiles[Ae[2].key]&&this._tiles[Ae[3].key]&&(Q[Ae[0].key]=n[Ae[0].key]=Ae[0],Q[Ae[1].key]=n[Ae[1].key]=Ae[1],Q[Ae[2].key]=n[Ae[2].key]=Ae[2],Q[Ae[3].key]=n[Ae[3].key]=Ae[3],delete pe[we])}for(const we in pe){const Ae=pe[we],ze=this.findLoadedParent(Ae,this._source.minzoom),Me=this.findLoadedSibling(Ae),De=ze||Me||null;if(De){Q[De.tileID.key]=n[De.tileID.key]=De.tileID;for(const qe in Q)Q[qe].isChildOf(De.tileID)&&delete Q[qe]}}for(const we in this._tiles)Q[we]||(this._coveredTiles[we]=!0)}}update(n,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=n,this.terrain=u,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new l.S(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y)):(p=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(te=>this._source.hasTile(te)))):p=[];const g=n.coveringZoomLevel(this._source),_=Math.max(g-It.maxOverzooming,this._source.minzoom),A=Math.max(g+It.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const te={};for(const Q of p)if(Q.canonical.z>this._source.minzoom){const pe=Q.scaledTo(Q.canonical.z-1);te[pe.key]=pe;const we=Q.scaledTo(Math.max(this._source.minzoom,Math.min(Q.canonical.z,5)));te[we.key]=we}p=p.concat(Object.values(te))}const M=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,M&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(p,g);br(this._source.type)&&this._updateCoveredAndRetainedTiles(O,_,A,g,p,u);for(const te in O)this._tiles[te].clearFadeHold();const $=l.ac(this._tiles,O);for(const te of $){const Q=this._tiles[te];Q.hasSymbolBuckets&&!Q.holdingForFade()?Q.setHoldDuration(this.map._fadeDuration):Q.hasSymbolBuckets&&!Q.symbolFadeFinished()||this._removeTile(te)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,u){var p;const g={},_={},A=Math.max(u-It.maxOverzooming,this._source.minzoom),M=Math.max(u+It.maxUnderzooming,this._source.minzoom),O={};for(const $ of n){const te=this._addTile($);g[$.key]=$,te.hasData()||u<this._source.maxzoom&&(O[$.key]=$)}this._retainLoadedChildren(O,u,M,g);for(const $ of n){let te=this._tiles[$.key];if(te.hasData())continue;if(u+1>this._source.maxzoom){const pe=$.children(this._source.maxzoom)[0],we=this.getTile(pe);if(we&&we.hasData()){g[pe.key]=pe;continue}}else{const pe=$.children(this._source.maxzoom);if(g[pe[0].key]&&g[pe[1].key]&&g[pe[2].key]&&g[pe[3].key])continue}let Q=te.wasRequested();for(let pe=$.overscaledZ-1;pe>=A;--pe){const we=$.scaledTo(pe);if(_[we.key])break;if(_[we.key]=!0,te=this.getTile(we),!te&&Q&&(te=this._addTile(we)),te){const Ae=te.hasData();if((Ae||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||Q)&&(g[we.key]=we),Q=te.wasRequested(),Ae)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const u=[];let p,g=this._tiles[n].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of u)this._loadedParentTiles[_]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const u=this._tiles[n].tileID,p=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=p}}_addTile(n){let u=this._tiles[n.key];if(u)return u;u=this._cache.getAndRemove(n),u&&(this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,u)));const p=u;return u||(u=new nt(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(u,n.key,u.state)),u.uses++,this._tiles[n.key]=u,p||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(n,u){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=u.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}_removeTile(n){const u=this._tiles[n];u&&(u.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(n){const u=n.sourceDataType;n.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&u==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,u,p){const g=[],_=this.transform;if(!_)return g;const A=p?_.getCameraQueryGeometry(n):n,M=n.map(Ae=>_.pointCoordinate(Ae,this.terrain)),O=A.map(Ae=>_.pointCoordinate(Ae,this.terrain)),$=this.getIds();let te=1/0,Q=1/0,pe=-1/0,we=-1/0;for(const Ae of O)te=Math.min(te,Ae.x),Q=Math.min(Q,Ae.y),pe=Math.max(pe,Ae.x),we=Math.max(we,Ae.y);for(let Ae=0;Ae<$.length;Ae++){const ze=this._tiles[$[Ae]];if(ze.holdingForFade())continue;const Me=ze.tileID,De=Math.pow(2,_.zoom-ze.tileID.overscaledZ),qe=u*ze.queryPadding*l.X/ze.tileSize/De,je=[Me.getTilePoint(new l.Z(te,Q)),Me.getTilePoint(new l.Z(pe,we))];if(je[0].x-qe<l.X&&je[0].y-qe<l.X&&je[1].x+qe>=0&&je[1].y+qe>=0){const Je=M.map(at=>Me.getTilePoint(at)),rt=O.map(at=>Me.getTilePoint(at));g.push({tile:ze,tileID:Me,queryGeometry:Je,cameraQueryGeometry:rt,scale:De})}}return g}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(br(this._source.type)){const n=b.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=n)return!0}return!1}setFeatureState(n,u,p){this._state.updateState(n=n||"_geojsonTileLayer",u,p)}removeFeatureState(n,u,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",u,p)}getFeatureState(n,u){return this._state.getState(n=n||"_geojsonTileLayer",u)}setDependencies(n,u,p){const g=this._tiles[n];g&&g.setDependencies(u,p)}reloadTilesForDependencies(n,u){for(const p in this._tiles)this._tiles[p].hasDependency(n,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(n,u))}}function gr(v,n){const u=Math.abs(2*v.wrap)-+(v.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return v.overscaledZ-n.overscaledZ||p-u||n.canonical.y-v.canonical.y||n.canonical.x-v.canonical.x}function br(v){return v==="raster"||v==="image"||v==="video"}It.maxOverzooming=10,It.maxUnderzooming=3;class Rt{constructor(n,u){this.reset(n,u)}reset(n,u){this.points=n||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=l.ad(n,0,1);let u=1,p=this._distances[u];const g=n*this.paddedLength+this.padding;for(;p<g&&u<this._distances.length;)p=this._distances[++u];const _=u-1,A=this._distances[_],M=p-A,O=M>0?(g-A)/M:0;return this.points[_].mult(1-O).add(this.points[u].mult(O))}}function Rn(v,n){let u=!0;return v==="always"||v!=="never"&&n!=="never"||(u=!1),u}class ri{constructor(n,u,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(n/p),this.yCellCount=Math.ceil(u/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=u,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,u,p,g,_){this._forEachCell(u,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(n,u,p,g){this._forEachCell(u-g,p-g,u+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(u),this.circles.push(p),this.circles.push(g)}_insertBoxCell(n,u,p,g,_,A){this.boxCells[_].push(A)}_insertCircleCell(n,u,p,g,_,A){this.circleCells[_].push(A)}_query(n,u,p,g,_,A,M){if(p<0||n>this.width||g<0||u>this.height)return[];const O=[];if(n<=0&&u<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:n,y1:u,x2:p,y2:g}];for(let $=0;$<this.boxKeys.length;$++)O.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const te=this.circles[3*$],Q=this.circles[3*$+1],pe=this.circles[3*$+2];O.push({key:this.circleKeys[$],x1:te-pe,y1:Q-pe,x2:te+pe,y2:Q+pe})}}else this._forEachCell(n,u,p,g,this._queryCell,O,{hitTest:_,overlapMode:A,seenUids:{box:{},circle:{}}},M);return O}query(n,u,p,g){return this._query(n,u,p,g,!1,null)}hitTest(n,u,p,g,_,A){return this._query(n,u,p,g,!0,_,A).length>0}hitTestCircle(n,u,p,g,_){const A=n-p,M=n+p,O=u-p,$=u+p;if(M<0||A>this.width||$<0||O>this.height)return!1;const te=[];return this._forEachCell(A,O,M,$,this._queryCellCircle,te,{hitTest:!0,overlapMode:g,circle:{x:n,y:u,radius:p},seenUids:{box:{},circle:{}}},_),te.length>0}_queryCell(n,u,p,g,_,A,M,O){const{seenUids:$,hitTest:te,overlapMode:Q}=M,pe=this.boxCells[_];if(pe!==null){const Ae=this.bboxes;for(const ze of pe)if(!$.box[ze]){$.box[ze]=!0;const Me=4*ze,De=this.boxKeys[ze];if(n<=Ae[Me+2]&&u<=Ae[Me+3]&&p>=Ae[Me+0]&&g>=Ae[Me+1]&&(!O||O(De))&&(!te||!Rn(Q,De.overlapMode))&&(A.push({key:De,x1:Ae[Me],y1:Ae[Me+1],x2:Ae[Me+2],y2:Ae[Me+3]}),te))return!0}}const we=this.circleCells[_];if(we!==null){const Ae=this.circles;for(const ze of we)if(!$.circle[ze]){$.circle[ze]=!0;const Me=3*ze,De=this.circleKeys[ze];if(this._circleAndRectCollide(Ae[Me],Ae[Me+1],Ae[Me+2],n,u,p,g)&&(!O||O(De))&&(!te||!Rn(Q,De.overlapMode))){const qe=Ae[Me],je=Ae[Me+1],Je=Ae[Me+2];if(A.push({key:De,x1:qe-Je,y1:je-Je,x2:qe+Je,y2:je+Je}),te)return!0}}}return!1}_queryCellCircle(n,u,p,g,_,A,M,O){const{circle:$,seenUids:te,overlapMode:Q}=M,pe=this.boxCells[_];if(pe!==null){const Ae=this.bboxes;for(const ze of pe)if(!te.box[ze]){te.box[ze]=!0;const Me=4*ze,De=this.boxKeys[ze];if(this._circleAndRectCollide($.x,$.y,$.radius,Ae[Me+0],Ae[Me+1],Ae[Me+2],Ae[Me+3])&&(!O||O(De))&&!Rn(Q,De.overlapMode))return A.push(!0),!0}}const we=this.circleCells[_];if(we!==null){const Ae=this.circles;for(const ze of we)if(!te.circle[ze]){te.circle[ze]=!0;const Me=3*ze,De=this.circleKeys[ze];if(this._circlesCollide(Ae[Me],Ae[Me+1],Ae[Me+2],$.x,$.y,$.radius)&&(!O||O(De))&&!Rn(Q,De.overlapMode))return A.push(!0),!0}}}_forEachCell(n,u,p,g,_,A,M,O){const $=this._convertToXCellCoord(n),te=this._convertToYCellCoord(u),Q=this._convertToXCellCoord(p),pe=this._convertToYCellCoord(g);for(let we=$;we<=Q;we++)for(let Ae=te;Ae<=pe;Ae++)if(_.call(this,n,u,p,g,this.xCellCount*Ae+we,A,M,O))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,u,p,g,_,A){const M=g-n,O=_-u,$=p+A;return $*$>M*M+O*O}_circleAndRectCollide(n,u,p,g,_,A,M){const O=(A-g)/2,$=Math.abs(n-(g+O));if($>O+p)return!1;const te=(M-_)/2,Q=Math.abs(u-(_+te));if(Q>te+p)return!1;if($<=O||Q<=te)return!0;const pe=$-O,we=Q-te;return pe*pe+we*we<=p*p}}function Oi(v,n,u,p,g){const _=l.H();return n?(l.K(_,_,[1/g,1/g,1]),u||l.ae(_,_,p.angle)):l.L(_,p.labelPlaneMatrix,v),_}function Vn(v,n,u,p,g){if(n){const _=l.af(v);return l.K(_,_,[g,g,1]),u||l.ae(_,_,-p.angle),_}return p.glCoordMatrix}function Oe(v,n,u){let p;u?(p=[v.x,v.y,u(v.x,v.y),1],l.ag(p,p,n)):(p=[v.x,v.y,0,1],function(_,A,M){const O=A[0],$=A[1];_[0]=M[0]*O+M[4]*$+M[12],_[1]=M[1]*O+M[5]*$+M[13],_[3]=M[3]*O+M[7]*$+M[15]}(p,p,n));const g=p[3];return{point:new l.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function ae(v,n){return .5+v/n*.5}function oe(v,n){return v.x>=-n[0]&&v.x<=n[0]&&v.y>=-n[1]&&v.y<=n[1]}function xe(v,n,u,p,g,_,A,M,O,$,te,Q,pe,we,Ae){const ze=p?v.textSizeData:v.iconSizeData,Me=l.ah(ze,u.transform.zoom),De=[256/u.width*2+1,256/u.height*2+1],qe=p?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;qe.clear();const je=v.lineVertexArray,Je=p?v.text.placedSymbolArray:v.icon.placedSymbolArray,rt=u.transform.width/u.transform.height;let at=!1;for(let mt=0;mt<Je.length;mt++){const wt=Je.get(mt);if(wt.hidden||wt.writingMode===l.ai.vertical&&!at){rr(wt.numGlyphs,qe);continue}at=!1;const Bt=Oe(new l.P(wt.anchorX,wt.anchorY),n,Ae);if(!oe(Bt.point,De)){rr(wt.numGlyphs,qe);continue}const Dt=ae(u.transform.cameraToCenterDistance,Bt.signedDistanceFromCamera),bt=l.aj(ze,Me,wt),Tt=A?bt/Dt:bt*Dt,Gt={getElevation:Ae,labelPlaneMatrix:g,lineVertexArray:je,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:$,tileAnchorPoint:new l.P(wt.anchorX,wt.anchorY),unwrappedTileID:te,width:Q,height:pe,translation:we},pr=Be(Gt,wt,Tt,!1,M,n,_,v.glyphOffsetArray,qe,rt,O);at=pr.useVertical,(pr.notEnoughRoom||at||pr.needsFlipping&&Be(Gt,wt,Tt,!0,M,n,_,v.glyphOffsetArray,qe,rt,O).notEnoughRoom)&&rr(wt.numGlyphs,qe)}p?v.text.dynamicLayoutVertexBuffer.updateData(qe):v.icon.dynamicLayoutVertexBuffer.updateData(qe)}function Ie(v,n,u,p,g,_,A,M){const O=_.glyphStartIndex+_.numGlyphs,$=_.lineStartIndex,te=_.lineStartIndex+_.lineLength,Q=n.getoffsetX(_.glyphStartIndex),pe=n.getoffsetX(O-1),we=Pt(v*Q,u,p,g,_.segment,$,te,M,A);if(!we)return null;const Ae=Pt(v*pe,u,p,g,_.segment,$,te,M,A);return Ae?M.projectionCache.anyProjectionOccluded?null:{first:we,last:Ae}:null}function ke(v,n,u,p){return v===l.ai.horizontal&&Math.abs(u.y-n.y)>Math.abs(u.x-n.x)*p?{useVertical:!0}:(v===l.ai.vertical?n.y<u.y:n.x>u.x)?{needsFlipping:!0}:null}function Be(v,n,u,p,g,_,A,M,O,$,te){const Q=u/24,pe=n.lineOffsetX*Q,we=n.lineOffsetY*Q;let Ae;if(n.numGlyphs>1){const ze=n.glyphStartIndex+n.numGlyphs,Me=n.lineStartIndex,De=n.lineStartIndex+n.lineLength,qe=Ie(Q,M,pe,we,p,n,te,v);if(!qe)return{notEnoughRoom:!0};const je=Oe(qe.first.point,A,v.getElevation).point,Je=Oe(qe.last.point,A,v.getElevation).point;if(g&&!p){const rt=ke(n.writingMode,je,Je,$);if(rt)return rt}Ae=[qe.first];for(let rt=n.glyphStartIndex+1;rt<ze-1;rt++)Ae.push(Pt(Q*M.getoffsetX(rt),pe,we,p,n.segment,Me,De,v,te));Ae.push(qe.last)}else{if(g&&!p){const Me=Oe(v.tileAnchorPoint,_,v.getElevation).point,De=n.lineStartIndex+n.segment+1,qe=new l.P(v.lineVertexArray.getx(De),v.lineVertexArray.gety(De)),je=Oe(qe,_,v.getElevation),Je=je.signedDistanceFromCamera>0?je.point:function(at,mt,wt,Bt,Dt,bt){return Ke(at,mt,wt,1,Dt,bt)}(v.tileAnchorPoint,qe,Me,0,_,v),rt=ke(n.writingMode,Me,Je,$);if(rt)return rt}const ze=Pt(Q*M.getoffsetX(n.glyphStartIndex),pe,we,p,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,v,te);if(!ze||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ae=[ze]}for(const ze of Ae)l.ak(O,ze.point,ze.angle);return{}}function Ke(v,n,u,p,g,_){const A=v.add(v.sub(n)._unit()),M=g!==void 0?Oe(A,g,_.getElevation).point:st(A.x,A.y,_).point,O=u.sub(M);return u.add(O._mult(p/O.mag()))}function Le(v,n,u){const p=n.projectionCache;if(p.projections[v])return p.projections[v];const g=new l.P(n.lineVertexArray.getx(v),n.lineVertexArray.gety(v)),_=st(g.x,g.y,n);if(_.signedDistanceFromCamera>0)return p.projections[v]=_.point,p.anyProjectionOccluded=p.anyProjectionOccluded||_.isOccluded,_.point;const A=v-u.direction;return function(M,O,$,te,Q){return Ke(M,O,$,te,void 0,Q)}(u.distanceFromAnchor===0?n.tileAnchorPoint:new l.P(n.lineVertexArray.getx(A),n.lineVertexArray.gety(A)),g,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,n)}function st(v,n,u){const p=v+u.translation[0],g=n+u.translation[1];let _;return!u.pitchWithMap&&u.projection.useSpecialProjectionForSymbols?(_=u.projection.projectTileCoordinates(p,g,u.unwrappedTileID,u.getElevation),_.point.x=(.5*_.point.x+.5)*u.width,_.point.y=(.5*-_.point.y+.5)*u.height):(_=Oe(new l.P(p,g),u.labelPlaneMatrix,u.getElevation),_.isOccluded=!1),_}function ft(v,n,u){return v._unit()._perp()._mult(n*u)}function ot(v,n,u,p,g,_,A,M,O){if(M.projectionCache.offsets[v])return M.projectionCache.offsets[v];const $=u.add(n);if(v+O.direction<p||v+O.direction>=g)return M.projectionCache.offsets[v]=$,$;const te=Le(v+O.direction,M,O),Q=ft(te.sub(u),A,O.direction),pe=u.add(Q),we=te.add(Q);return M.projectionCache.offsets[v]=l.al(_,$,pe,we)||$,M.projectionCache.offsets[v]}function Pt(v,n,u,p,g,_,A,M,O){const $=p?v-n:v+n;let te=$>0?1:-1,Q=0;p&&(te*=-1,Q=Math.PI),te<0&&(Q+=Math.PI);let pe,we=te>0?_+g:_+g+1;M.projectionCache.cachedAnchorPoint?pe=M.projectionCache.cachedAnchorPoint:(pe=st(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=pe);let Ae,ze,Me=pe,De=pe,qe=0,je=0;const Je=Math.abs($),rt=[];let at;for(;qe+je<=Je;){if(we+=te,we<_||we>=A)return null;qe+=je,De=Me,ze=Ae;const Bt={absOffsetX:Je,direction:te,distanceFromAnchor:qe,previousVertex:De};if(Me=Le(we,M,Bt),u===0)rt.push(De),at=Me.sub(De);else{let Dt;const bt=Me.sub(De);Dt=bt.mag()===0?ft(Le(we+te,M,Bt).sub(Me),u,te):ft(bt,u,te),ze||(ze=De.add(Dt)),Ae=ot(we,Dt,Me,_,A,ze,u,M,Bt),rt.push(ze),at=Ae.sub(ze)}je=at.mag()}const mt=at._mult((Je-qe)/je)._add(ze||De),wt=Q+Math.atan2(Me.y-De.y,Me.x-De.x);return rt.push(mt),{point:mt,angle:O?wt:0,path:rt}}const qt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rr(v,n){for(let u=0;u<v;u++){const p=n.length;n.resize(p+4),n.float32.set(qt,3*p)}}const dr=100;class Sr{constructor(n,u,p=new ri(n.width+200,n.height+200,25),g=new ri(n.width+200,n.height+200,25)){this.transform=n,this.mapProjection=u,this.grid=p,this.ignoredGrid=g,this.pitchFactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+dr,this.screenBottomBoundary=n.height+dr,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,u,p,g,_,A,M,O,$,te,Q){const pe=n.anchorPointX+O[0],we=n.anchorPointY+O[1],Ae=this.projectAndGetPerspectiveRatio(g,pe,we,_,te),ze=this._projectCollisionBox(n,p,g,_,A,M,O,Ae,te,Q),[Me,De,qe,je]=ze.box;return this.mapProjection.useSpecialProjectionForSymbols&&(A?ze.allPointsOccluded:this.mapProjection.isOccluded(pe,we,_))||Ae.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Me,De,qe,je)||u!=="always"&&this.grid.hitTest(Me,De,qe,je,u,$)?{box:[Me,De,qe,je],placeable:!1,offscreen:!1}:{box:[Me,De,qe,je],placeable:!0,offscreen:this.isOffscreen(Me,De,qe,je)}}placeCollisionCircles(n,u,p,g,_,A,M,O,$,te,Q,pe,we,Ae,ze,Me){const De=[],qe=new l.P(u.anchorX,u.anchorY),je=this.getPerspectiveRatio(A,qe.x,qe.y,M,Me),Je=(Q?_/je:_*je)/l.aq,rt={getElevation:Me,labelPlaneMatrix:O,lineVertexArray:p,pitchWithMap:Q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:qe,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:ze},at=Ie(Je,g,u.lineOffsetX*Je,u.lineOffsetY*Je,!1,u,!1,rt);let mt=!1,wt=!1,Bt=!0;if(at){const Dt=.5*we*je+Ae,bt=new l.P(-100,-100),Tt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Gt=new Rt,pr=at.first,Ct=at.last;let jt=[];for(let _r=pr.path.length-1;_r>=1;_r--)jt.push(pr.path[_r]);for(let _r=1;_r<Ct.path.length;_r++)jt.push(Ct.path[_r]);const ur=2.5*Dt;if($){const _r=this.projectPathToScreenSpace(jt,rt,$);jt=_r.some(Tr=>Tr.signedDistanceFromCamera<=0)?[]:_r.map(Tr=>Tr.point)}let an=[];if(jt.length>0){const _r=jt[0].clone(),Tr=jt[0].clone();for(let ln=1;ln<jt.length;ln++)_r.x=Math.min(_r.x,jt[ln].x),_r.y=Math.min(_r.y,jt[ln].y),Tr.x=Math.max(Tr.x,jt[ln].x),Tr.y=Math.max(Tr.y,jt[ln].y);an=_r.x>=bt.x&&Tr.x<=Tt.x&&_r.y>=bt.y&&Tr.y<=Tt.y?[jt]:Tr.x<bt.x||_r.x>Tt.x||Tr.y<bt.y||_r.y>Tt.y?[]:l.am([jt],bt.x,bt.y,Tt.x,Tt.y)}for(const _r of an){Gt.reset(_r,.25*Dt);let Tr=0;Tr=Gt.length<=.5*Dt?1:Math.ceil(Gt.paddedLength/ur)+1;for(let ln=0;ln<Tr;ln++){const ni=ln/Math.max(Tr-1,1),ko=Gt.lerp(ni),un=ko.x+dr,zi=ko.y+dr;De.push(un,zi,Dt,0);const Ei=un-Dt,ii=zi-Dt,oi=un+Dt,Oo=zi+Dt;if(Bt=Bt&&this.isOffscreen(Ei,ii,oi,Oo),wt=wt||this.isInsideGrid(Ei,ii,oi,Oo),n!=="always"&&this.grid.hitTestCircle(un,zi,Dt,n,pe)&&(mt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:mt}}}}return{circles:!te&&mt||!wt||je<this.perspectiveRatioCutoff?[]:De,offscreen:Bt,collisionDetected:mt}}projectPathToScreenSpace(n,u,p){return n.map(g=>Oe(g,p,u.getElevation))}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,g=1/0,_=-1/0,A=-1/0;for(const te of n){const Q=new l.P(te.x+dr,te.y+dr);p=Math.min(p,Q.x),g=Math.min(g,Q.y),_=Math.max(_,Q.x),A=Math.max(A,Q.y),u.push(Q)}const M=this.grid.query(p,g,_,A).concat(this.ignoredGrid.query(p,g,_,A)),O={},$={};for(const te of M){const Q=te.key;if(O[Q.bucketInstanceId]===void 0&&(O[Q.bucketInstanceId]={}),O[Q.bucketInstanceId][Q.featureIndex])continue;const pe=[new l.P(te.x1,te.y1),new l.P(te.x2,te.y1),new l.P(te.x2,te.y2),new l.P(te.x1,te.y2)];l.an(u,pe)&&(O[Q.bucketInstanceId][Q.featureIndex]=!0,$[Q.bucketInstanceId]===void 0&&($[Q.bucketInstanceId]=[]),$[Q.bucketInstanceId].push(Q.featureIndex))}return $}insertCollisionBox(n,u,p,g,_,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:u},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,u,p,g,_,A){const M=p?this.ignoredGrid:this.grid,O={bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:u};for(let $=0;$<n.length;$+=4)M.insertCircle(O,n[$],n[$+1],n[$+2])}projectAndGetPerspectiveRatio(n,u,p,g,_){const A=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,p,g,_):Oe(new l.P(u,p),n,_);return{point:new l.P((A.point.x+1)/2*this.transform.width+dr,(1-A.point.y)/2*this.transform.height+dr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}getPerspectiveRatio(n,u,p,g,_){const A=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,p,g,_):Oe(new l.P(u,p),n,_);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(n,u,p,g){return p<dr||n>=this.screenRightBoundary||g<dr||u>this.screenBottomBoundary}isInsideGrid(n,u,p,g){return p>=0&&n<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const n=l.ao([]);return l.J(n,n,[-100,-100,0]),n}_projectCollisionBox(n,u,p,g,_,A,M,O,$,te){const Q=u*O.perspectiveRatio;let pe=new l.P(1,0),we=new l.P(0,1);const Ae=new l.P(n.anchorPointX+M[0],n.anchorPointY+M[1]);if(A&&!_){const Dt=this.projectAndGetPerspectiveRatio(p,Ae.x+1,Ae.y,g,$).point.sub(O.point).unit(),bt=Math.atan(Dt.y/Dt.x)+(Dt.x<0?Math.PI:0),Tt=Math.sin(bt),Gt=Math.cos(bt);pe=new l.P(Gt,Tt),we=new l.P(-Tt,Gt)}else if(!A&&_){const Dt=-this.transform.angle,bt=Math.sin(Dt),Tt=Math.cos(Dt);pe=new l.P(Tt,bt),we=new l.P(-bt,Tt)}let ze=O.point,Me=Q;if(_){ze=Ae;const Dt=this.transform.zoom-Math.floor(this.transform.zoom);Me=Math.pow(2,-Dt),Me*=this.mapProjection.getPitchedTextCorrection(this.transform,Ae,g),te||(Me*=l.ad(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}te&&(ze=ze.add(pe.mult(te.x*Me)).add(we.mult(te.y*Me)));const De=n.x1*Me,qe=n.x2*Me,je=(De+qe)/2,Je=n.y1*Me,rt=n.y2*Me,at=(Je+rt)/2,mt=[{offsetX:De,offsetY:Je},{offsetX:je,offsetY:Je},{offsetX:qe,offsetY:Je},{offsetX:qe,offsetY:at},{offsetX:qe,offsetY:rt},{offsetX:je,offsetY:rt},{offsetX:De,offsetY:rt},{offsetX:De,offsetY:at}];let wt=[];for(const{offsetX:Dt,offsetY:bt}of mt)wt.push(new l.P(ze.x+pe.x*Dt+we.x*bt,ze.y+pe.y*Dt+we.y*bt));let Bt=!1;if(_){const Dt=wt.map(bt=>this.projectAndGetPerspectiveRatio(p,bt.x,bt.y,g,$));Bt=Dt.some(bt=>!bt.isOccluded),wt=Dt.map(bt=>bt.point)}else Bt=!0;return{box:l.ap(wt),allPointsOccluded:!Bt}}}function cr(v,n,u){return n*(l.X/(v.tileSize*Math.pow(2,u-v.tileID.overscaledZ)))}class Ur{constructor(n,u,p,g){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?u:-u))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Jr{constructor(n,u,p,g,_){this.text=new Ur(n?n.text:null,u,p,_),this.icon=new Ur(n?n.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class nn{constructor(n,u,p){this.text=n,this.icon=u,this.skipFade=p}}class xr{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class Nr{constructor(n,u,p,g,_){this.bucketInstanceId=n,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class Yr{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const u=++this.maxGroupID;this.collisionGroups[n]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[n]}}function Pn(v,n,u,p,g){const{horizontalAlign:_,verticalAlign:A}=l.av(v);return new l.P(-(_-.5)*n+p[0]*g,-(A-.5)*u+p[1]*g)}class Gn{constructor(n,u,p,g,_,A){this.transform=n.clone(),this.terrain=p,this.collisionIndex=new Sr(this.transform,u),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Yr(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const u=this.terrain;return u?(p,g)=>u.getElevation(n,p,g):null}getBucketParts(n,u,p,g){const _=p.getBucket(u),A=p.latestFeatureIndex;if(!_||!A||u.id!==_.layerIds[0])return;const M=p.collisionBoxArray,O=_.layers[0].layout,$=_.layers[0].paint,te=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),Q=p.tileSize/l.X,pe=p.tileID.toUnwrapped(),we=this.transform.calculatePosMatrix(pe),Ae=O.get("text-pitch-alignment")==="map",ze=O.get("text-rotation-alignment")==="map",Me=cr(p,1,this.transform.zoom),De=this.collisionIndex.mapProjection.translatePosition(this.transform,p,$.get("text-translate"),$.get("text-translate-anchor")),qe=this.collisionIndex.mapProjection.translatePosition(this.transform,p,$.get("icon-translate"),$.get("icon-translate-anchor")),je=Oi(we,Ae,ze,this.transform,Me);let Je=null;if(Ae){const at=Vn(we,Ae,ze,this.transform,Me);Je=l.L([],this.transform.labelPlaneMatrix,at)}this.retainedQueryData[_.bucketInstanceId]=new Nr(_.bucketInstanceId,A,_.sourceLayerIndex,_.index,p.tileID);const rt={bucket:_,layout:O,translationText:De,translationIcon:qe,posMatrix:we,unwrappedTileID:pe,textLabelPlaneMatrix:je,labelToScreenMatrix:Je,scale:te,textPixelRatio:Q,holdingForFade:p.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const at of _.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:wt,symbolInstanceEnd:Bt}=at;n.push({sortKey:mt,symbolInstanceStart:wt,symbolInstanceEnd:Bt,parameters:rt})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(n,u,p,g,_,A,M,O,$,te,Q,pe,we,Ae,ze,Me,De,qe,je){const Je=l.ar[n.textAnchor],rt=[n.textOffset0,n.textOffset1],at=Pn(Je,p,g,rt,_),mt=this.collisionIndex.placeCollisionBox(u,pe,O,$,te,M,A,Me,Q.predicate,je,at);if((!qe||this.collisionIndex.placeCollisionBox(qe,pe,O,$,te,M,A,De,Q.predicate,je,at).placeable)&&mt.placeable){let wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(wt=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:rt,width:p,height:g,anchor:Je,textBoxScale:_,prevAnchor:wt},this.markUsedJustification(Ae,Je,we,ze),Ae.allowVerticalPlacement&&(this.markUsedOrientation(Ae,ze,we),this.placedOrientations[we.crossTileID]=ze),{shift:at,placedGlyphBoxes:mt}}}placeLayerBucketPart(n,u,p){const{bucket:g,layout:_,translationText:A,translationIcon:M,posMatrix:O,unwrappedTileID:$,textLabelPlaneMatrix:te,labelToScreenMatrix:Q,textPixelRatio:pe,holdingForFade:we,collisionBoxArray:Ae,partiallyEvaluatedTextSize:ze,collisionGroup:Me}=n.parameters,De=_.get("text-optional"),qe=_.get("icon-optional"),je=l.as(_,"text-overlap","text-allow-overlap"),Je=je==="always",rt=l.as(_,"icon-overlap","icon-allow-overlap"),at=rt==="always",mt=_.get("text-rotation-alignment")==="map",wt=_.get("text-pitch-alignment")==="map",Bt=_.get("icon-text-fit")!=="none",Dt=_.get("symbol-z-order")==="viewport-y",bt=Je&&(at||!g.hasIconData()||qe),Tt=at&&(Je||!g.hasTextData()||De);!g.collisionArrays&&Ae&&g.deserializeCollisionBoxes(Ae);const Gt=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),pr=(Ct,jt,ur)=>{var an,_r;if(u[Ct.crossTileID])return;if(we)return void(this.placements[Ct.crossTileID]=new nn(!1,!1,!1));let Tr=!1,ln=!1,ni=!0,ko=null,un={box:null,placeable:!1,offscreen:null},zi={box:null,placeable:!1,offscreen:null},Ei=null,ii=null,oi=null,Oo=0,Xa=0,Yc=0;jt.textFeatureIndex?Oo=jt.textFeatureIndex:Ct.useRuntimeCollisionCircles&&(Oo=Ct.featureIndex),jt.verticalTextFeatureIndex&&(Xa=jt.verticalTextFeatureIndex);const $l=jt.textBox;if($l){const Yn=si=>{let ai=l.ai.horizontal;if(g.allowVerticalPlacement&&!si&&this.prevPlacement){const Zn=this.prevPlacement.placedOrientations[Ct.crossTileID];Zn&&(this.placedOrientations[Ct.crossTileID]=Zn,ai=Zn,this.markUsedOrientation(g,ai,Ct))}return ai},Fo=(si,ai)=>{if(g.allowVerticalPlacement&&Ct.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const Zn of g.writingModes)if(Zn===l.ai.vertical?(un=ai(),zi=un):un=si(),un&&un.placeable)break}else un=si()},la=Ct.textAnchorOffsetStartIndex,Ul=Ct.textAnchorOffsetEndIndex;if(Ul===la){const si=(ai,Zn)=>{const fn=this.collisionIndex.placeCollisionBox(ai,je,pe,O,$,wt,mt,A,Me.predicate,Gt);return fn&&fn.placeable&&(this.markUsedOrientation(g,Zn,Ct),this.placedOrientations[Ct.crossTileID]=Zn),fn};Fo(()=>si($l,l.ai.horizontal),()=>{const ai=jt.verticalTextBox;return g.allowVerticalPlacement&&Ct.numVerticalGlyphVertices>0&&ai?si(ai,l.ai.vertical):{box:null,offscreen:null}}),Yn(un&&un.placeable)}else{let si=l.ar[(_r=(an=this.prevPlacement)===null||an===void 0?void 0:an.variableOffsets[Ct.crossTileID])===null||_r===void 0?void 0:_r.anchor];const ai=(fn,Vl,od)=>{const Nn=fn.x2-fn.x1,pm=fn.y2-fn.y1,eh=Ct.textBoxScale,th=Bt&&rt==="never"?Vl:null;let ua=null,mm=je==="never"?1:2,sd="never";si&&mm++;for(let ad=0;ad<mm;ad++){for(let ld=la;ld<Ul;ld++){const rh=g.textAnchorOffsets.get(ld);if(si&&rh.textAnchor!==si)continue;const Gl=this.attemptAnchorPlacement(rh,fn,Nn,pm,eh,mt,wt,pe,O,$,Me,sd,Ct,g,od,A,M,th,Gt);if(Gl&&(ua=Gl.placedGlyphBoxes,ua&&ua.placeable))return Tr=!0,ko=Gl.shift,ua}si?si=null:sd=je}return p&&!ua&&(ua={box:this.collisionIndex.placeCollisionBox($l,"always",pe,O,$,wt,mt,A,Me.predicate,Gt,new l.P(0,0)).box,offscreen:!1,placeable:!1}),ua};Fo(()=>ai($l,jt.iconBox,l.ai.horizontal),()=>{const fn=jt.verticalTextBox;return g.allowVerticalPlacement&&(!un||!un.placeable)&&Ct.numVerticalGlyphVertices>0&&fn?ai(fn,jt.verticalIconBox,l.ai.vertical):{box:null,occluded:!0,offscreen:null}}),un&&(Tr=un.placeable,ni=un.offscreen);const Zn=Yn(un&&un.placeable);if(!Tr&&this.prevPlacement){const fn=this.prevPlacement.variableOffsets[Ct.crossTileID];fn&&(this.variableOffsets[Ct.crossTileID]=fn,this.markUsedJustification(g,fn.anchor,Ct,Zn))}}}if(Ei=un,Tr=Ei&&Ei.placeable,ni=Ei&&Ei.offscreen,Ct.useRuntimeCollisionCircles){const Yn=g.text.placedSymbolArray.get(Ct.centerJustifiedTextSymbolIndex),Fo=l.aj(g.textSizeData,ze,Yn),la=_.get("text-padding");ii=this.collisionIndex.placeCollisionCircles(je,Yn,g.lineVertexArray,g.glyphOffsetArray,Fo,O,$,te,Q,p,wt,Me.predicate,Ct.collisionCircleDiameter,la,A,Gt),ii.circles.length&&ii.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),Tr=Je||ii.circles.length>0&&!ii.collisionDetected,ni=ni&&ii.offscreen}if(jt.iconFeatureIndex&&(Yc=jt.iconFeatureIndex),jt.iconBox){const Yn=Fo=>this.collisionIndex.placeCollisionBox(Fo,rt,pe,O,$,wt,mt,M,Me.predicate,Gt,Bt&&ko?ko:void 0);zi&&zi.placeable&&jt.verticalIconBox?(oi=Yn(jt.verticalIconBox),ln=oi.placeable):(oi=Yn(jt.iconBox),ln=oi.placeable),ni=ni&&oi.offscreen}const qa=De||Ct.numHorizontalGlyphVertices===0&&Ct.numVerticalGlyphVertices===0,Qc=qe||Ct.numIconVertices===0;qa||Qc?Qc?qa||(ln=ln&&Tr):Tr=ln&&Tr:ln=Tr=ln&&Tr;const id=ln&&oi.placeable;if(Tr&&Ei.placeable&&this.collisionIndex.insertCollisionBox(Ei.box,je,_.get("text-ignore-placement"),g.bucketInstanceId,zi&&zi.placeable&&Xa?Xa:Oo,Me.ID),id&&this.collisionIndex.insertCollisionBox(oi.box,rt,_.get("icon-ignore-placement"),g.bucketInstanceId,Yc,Me.ID),ii&&Tr&&this.collisionIndex.insertCollisionCircles(ii.circles,je,_.get("text-ignore-placement"),g.bucketInstanceId,Oo,Me.ID),p&&this.storeCollisionData(g.bucketInstanceId,ur,jt,Ei,oi,ii),Ct.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ct.crossTileID]=new nn(Tr||bt,ln||Tt,ni||g.justReloaded),u[Ct.crossTileID]=!0};if(Dt){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ct=g.getSortedSymbolIndexes(this.transform.angle);for(let jt=Ct.length-1;jt>=0;--jt){const ur=Ct[jt];pr(g.symbolInstances.get(ur),g.collisionArrays[ur],ur)}}else for(let Ct=n.symbolInstanceStart;Ct<n.symbolInstanceEnd;Ct++)pr(g.symbolInstances.get(Ct),g.collisionArrays[Ct],Ct);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const Ct=this.collisionCircleArrays[g.bucketInstanceId];l.at(Ct.invProjMatrix,O),Ct.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(n,u,p,g,_,A){if(p.textBox||p.iconBox){let M,O;this.collisionBoxArrays.has(n)?M=this.collisionBoxArrays.get(n):(M=new Map,this.collisionBoxArrays.set(n,M)),M.has(u)?O=M.get(u):(O={text:null,icon:null},M.set(u,O)),p.textBox&&(O.text=g.box),p.iconBox&&(O.icon=_.box)}if(A){let M=this.collisionCircleArrays[n];M===void 0&&(M=this.collisionCircleArrays[n]=new xr);for(let O=0;O<A.circles.length;O+=4)M.circles.push(A.circles[O+0]),M.circles.push(A.circles[O+1]),M.circles.push(A.circles[O+2]),M.circles.push(A.collisionDetected?1:0)}}markUsedJustification(n,u,p,g){let _;_=g===l.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.au(u)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const M of A)M>=0&&(n.text.placedSymbolArray.get(M).crossTileID=_>=0&&M!==_?0:p.crossTileID)}markUsedOrientation(n,u,p){const g=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,_=u===l.ai.vertical?u:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const M of A)n.text.placedSymbolArray.get(M).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(n):1,_=u?u.opacities:{},A=u?u.variableOffsets:{},M=u?u.placedOrientations:{};for(const O in this.placements){const $=this.placements[O],te=_[O];te?(this.opacities[O]=new Jr(te,g,$.text,$.icon),p=p||$.text!==te.text.placed||$.icon!==te.icon.placed):(this.opacities[O]=new Jr(null,g,$.text,$.icon,$.skipFade),p=p||$.text||$.icon)}for(const O in _){const $=_[O];if(!this.opacities[O]){const te=new Jr($,g,!1,!1);te.isHidden()||(this.opacities[O]=te,p=p||$.text.placed||$.icon.placed)}}for(const O in A)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=A[O]);for(const O in M)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=M[O]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:n)}updateLayerOpacities(n,u){const p={};for(const g of u){const _=g.getBucket(n);_&&g.latestFeatureIndex&&n.id===_.layerIds[0]&&this.updateBucketOpacities(_,g.tileID,p,g.collisionBoxArray)}}updateBucketOpacities(n,u,p,g){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const _=n.layers[0],A=_.layout,M=new Jr(null,0,!1,!1,!0),O=A.get("text-allow-overlap"),$=A.get("icon-allow-overlap"),te=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q=A.get("text-rotation-alignment")==="map",pe=A.get("text-pitch-alignment")==="map",we=A.get("icon-text-fit")!=="none",Ae=new Jr(null,0,O&&($||!n.hasIconData()||A.get("icon-optional")),$&&(O||!n.hasTextData()||A.get("text-optional")),!0);!n.collisionArrays&&g&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(g);const ze=(De,qe,je)=>{for(let Je=0;Je<qe/4;Je++)De.opacityVertexArray.emplaceBack(je);De.hasVisibleVertices=De.hasVisibleVertices||je!==Hn},Me=this.collisionBoxArrays.get(n.bucketInstanceId);for(let De=0;De<n.symbolInstances.length;De++){const qe=n.symbolInstances.get(De),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:Je,crossTileID:rt}=qe;let at=this.opacities[rt];p[rt]?at=M:at||(at=Ae,this.opacities[rt]=at),p[rt]=!0;const mt=qe.numIconVertices>0,wt=this.placedOrientations[qe.crossTileID],Bt=wt===l.ai.vertical,Dt=wt===l.ai.horizontal||wt===l.ai.horizontalOnly;if(je>0||Je>0){const Tt=yi(at.text);ze(n.text,je,Bt?Hn:Tt),ze(n.text,Je,Dt?Hn:Tt);const Gt=at.text.isHidden();[qe.rightJustifiedTextSymbolIndex,qe.centerJustifiedTextSymbolIndex,qe.leftJustifiedTextSymbolIndex].forEach(jt=>{jt>=0&&(n.text.placedSymbolArray.get(jt).hidden=Gt||Bt?1:0)}),qe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(qe.verticalPlacedTextSymbolIndex).hidden=Gt||Dt?1:0);const pr=this.variableOffsets[qe.crossTileID];pr&&this.markUsedJustification(n,pr.anchor,qe,wt);const Ct=this.placedOrientations[qe.crossTileID];Ct&&(this.markUsedJustification(n,"left",qe,Ct),this.markUsedOrientation(n,Ct,qe))}if(mt){const Tt=yi(at.icon),Gt=!(we&&qe.verticalPlacedIconSymbolIndex&&Bt);qe.placedIconSymbolIndex>=0&&(ze(n.icon,qe.numIconVertices,Gt?Tt:Hn),n.icon.placedSymbolArray.get(qe.placedIconSymbolIndex).hidden=at.icon.isHidden()),qe.verticalPlacedIconSymbolIndex>=0&&(ze(n.icon,qe.numVerticalIconVertices,Gt?Hn:Tt),n.icon.placedSymbolArray.get(qe.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const bt=Me&&Me.has(De)?Me.get(De):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Tt=n.collisionArrays[De];if(Tt){let Gt=new l.P(0,0);if(Tt.textBox||Tt.verticalTextBox){let pr=!0;if(te){const Ct=this.variableOffsets[rt];Ct?(Gt=Pn(Ct.anchor,Ct.width,Ct.height,Ct.textOffset,Ct.textBoxScale),Q&&Gt._rotate(pe?this.transform.angle:-this.transform.angle)):pr=!1}if(Tt.textBox||Tt.verticalTextBox){let Ct;Tt.textBox&&(Ct=Bt),Tt.verticalTextBox&&(Ct=Dt),Wn(n.textCollisionBox.collisionVertexArray,at.text.placed,!pr||Ct,bt.text,Gt.x,Gt.y)}}if(Tt.iconBox||Tt.verticalIconBox){const pr=!!(!Dt&&Tt.verticalIconBox);let Ct;Tt.iconBox&&(Ct=pr),Tt.verticalIconBox&&(Ct=!pr),Wn(n.iconCollisionBox.collisionVertexArray,at.icon.placed,Ct,bt.icon,we?Gt.x:0,we?Gt.y:0)}}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const De=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=De.invProjMatrix,n.placementViewportMatrix=De.viewportMatrix,n.collisionCircleArray=De.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>n}setStale(){this.stale=!0}}function Wn(v,n,u,p,g,_){p&&p.length!==0||(p=[0,0,0,0]);const A=p[0]-dr,M=p[1]-dr,O=p[2]-dr,$=p[3]-dr;v.emplaceBack(n?1:0,u?1:0,g||0,_||0,A,M),v.emplaceBack(n?1:0,u?1:0,g||0,_||0,O,M),v.emplaceBack(n?1:0,u?1:0,g||0,_||0,O,$),v.emplaceBack(n?1:0,u?1:0,g||0,_||0,A,$)}const Qo=Math.pow(2,25),Mr=Math.pow(2,24),_l=Math.pow(2,17),Er=Math.pow(2,16),An=Math.pow(2,9),gi=Math.pow(2,8),If=Math.pow(2,1);function yi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const n=v.placed?1:0,u=Math.floor(127*v.opacity);return u*Qo+n*Mr+u*_l+n*Er+u*An+n*gi+u*If+n}const Hn=0;function xl(){return{isOccluded:(v,n,u)=>!1,getPitchedTextCorrection:(v,n,u)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,n,u,p){throw new Error("Not implemented.")},translatePosition:(v,n,u,p)=>function(g,_,A,M,O=!1){if(!A[0]&&!A[1])return[0,0];const $=O?M==="map"?g.angle:0:M==="viewport"?-g.angle:0;if($){const te=Math.sin($),Q=Math.cos($);A=[A[0]*Q-A[1]*te,A[0]*te+A[1]*Q]}return[O?A[0]:cr(_,A[0],g.zoom),O?A[1]:cr(_,A[1],g.zoom)]}(v,n,u,p),getCircleRadiusCorrection:v=>1}}class vi{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,u,p,g,_){const A=this._bucketParts;for(;this._currentTileIndex<n.length;)if(u.getBucketParts(A,g,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((M,O)=>M.sortKey-O.sortKey));this._currentPartIndex<A.length;)if(u.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class xn{constructor(n,u,p,g,_,A,M,O){this.placement=new Gn(n,xl(),u,A,M,O),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(n,u,p){const g=b.now(),_=()=>!this._forceFullPlacement&&b.now()-g>2;for(;this._currentPlacementIndex>=0;){const A=u[n[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=M)&&(!A.maxzoom||A.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new vi(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const wo=512/l.X/2;class ws{constructor(n,u,p){this.tileID=n,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const A=u.get(_),M=A.key,O=g.get(M);O?O.push(A):g.set(M,[A])}for(const[_,A]of g){const M={positions:A.map(O=>({x:Math.floor(O.anchorX*wo),y:Math.floor(O.anchorY*wo)})),crossTileIDs:A.map(O=>O.crossTileID)};if(M.positions.length>128){const O=new l.aw(M.positions.length,16,Uint16Array);for(const{x:$,y:te}of M.positions)O.add($,te);O.finish(),delete M.positions,M.index=O}this._symbolsByKey[_]=M}}getScaledCoordinates(n,u){const{x:p,y:g,z:_}=this.tileID.canonical,{x:A,y:M,z:O}=u.canonical,$=wo/Math.pow(2,O-_),te=(M*l.X+n.anchorY)*$,Q=g*l.X*wo;return{x:Math.floor((A*l.X+n.anchorX)*$-p*l.X*wo),y:Math.floor(te-Q)}}findMatches(n,u,p){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<n.length;_++){const A=n.get(_);if(A.crossTileID)continue;const M=this._symbolsByKey[A.key];if(!M)continue;const O=this.getScaledCoordinates(A,u);if(M.index){const $=M.index.range(O.x-g,O.y-g,O.x+g,O.y+g).sort();for(const te of $){const Q=M.crossTileIDs[te];if(!p[Q]){p[Q]=!0,A.crossTileID=Q;break}}}else if(M.positions)for(let $=0;$<M.positions.length;$++){const te=M.positions[$],Q=M.crossTileIDs[$];if(Math.abs(te.x-O.x)<=g&&Math.abs(te.y-O.y)<=g&&!p[Q]){p[Q]=!0,A.crossTileID=Q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class pn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class wl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const u=Math.round((n-this.lng)/360);if(u!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const A in g){const M=g[A];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+u),_[M.tileID.key]=M}this.indexes[p]=_}this.lng=n}addBucket(n,u,p){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const g=this.usedCrossTileIDs[n.overscaledZ];for(const _ in this.indexes){const A=this.indexes[_];if(Number(_)>n.overscaledZ)for(const M in A){const O=A[M];O.tileID.isChildOf(n)&&O.findMatches(u.symbolInstances,n,g)}else{const M=A[n.scaledTo(Number(_)).key];M&&M.findMatches(u.symbolInstances,n,g)}}for(let _=0;_<u.symbolInstances.length;_++){const A=u.symbolInstances.get(_);A.crossTileID||(A.crossTileID=p.generate(),g[A.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new ws(n,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(n,u){for(const p of u.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[n][g]}removeStaleBuckets(n){let u=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)n[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],u=!0)}return u}}class wn{constructor(){this.layerIndexes={},this.crossTileIDs=new pn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,u,p){let g=this.layerIndexes[n.id];g===void 0&&(g=this.layerIndexes[n.id]=new wl);let _=!1;const A={};g.handleWrapJump(p);for(const M of u){const O=M.getBucket(n);O&&n.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(M.tileID,O,this.crossTileIDs)&&(_=!0),A[O.bucketInstanceId]=!0)}return g.removeStaleBuckets(A)&&(_=!0),_}pruneUnusedLayers(n){const u={};n.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const Fa=(v,n)=>l.t(v,n&&n.filter(u=>u.identifier!=="source.canvas")),es=l.ax();class ku extends l.E{constructor(n,u={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const g=this.sourceCaches[p].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[p].reload()}},this.map=n,this.dispatcher=new Mt(vt(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,g)=>this.getGlyphs(p,g)),this.dispatcher.registerMessageHandler("GI",(p,g)=>this.getImages(p,g)),this.imageManager=new ge,this.imageManager.setEventedParent(this),this.glyphManager=new Y(n._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Ce(256,512),this.crossTileSymbolIndex=new wn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.az()),Ve().on(k,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const g=this.sourceCaches[p.sourceId];if(!g)return;const _=g.getSource();if(_&&_.vectorLayerIds)for(const A in this._layers){const M=this._layers[A];M.source===_.id&&this._validateLayer(M)}})}loadURL(n,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController,l.h(g,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,u,p)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new l.j(_))})}loadJSON(n,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(n,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(es,{validate:!1})}_load(n,u,p){var g;const _=u.transformStyle?u.transformStyle(p,n):n;if(!u.validate||!Fa(this,l.x(_))){this._loaded=!0,this.stylesheet=_;for(const A in _.sources)this.addSource(A,_.sources[A],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new be(this.stylesheet.light),this.sky=new $e(this.stylesheet.sky),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const n=l.aA(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of n){const p=l.aB(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(n,u=!1,p=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,A,M,O){return l._(this,void 0,void 0,function*(){const $=D(_),te=M>1?"@2x":"",Q={},pe={};for(const{id:we,url:Ae}of $){const ze=A.transformRequest(ee(Ae,te,".json"),"SpriteJSON");Q[we]=l.h(ze,O);const Me=A.transformRequest(ee(Ae,te,".png"),"SpriteImage");pe[we]=G.getImage(Me,O)}return yield Promise.all([...Object.values(Q),...Object.values(pe)]),function(we,Ae){return l._(this,void 0,void 0,function*(){const ze={};for(const Me in we){ze[Me]={};const De=b.getImageCanvasContext((yield Ae[Me]).data),qe=(yield we[Me]).data;for(const je in qe){const{width:Je,height:rt,x:at,y:mt,sdf:wt,pixelRatio:Bt,stretchX:Dt,stretchY:bt,content:Tt,textFitWidth:Gt,textFitHeight:pr}=qe[je];ze[Me][je]={data:null,pixelRatio:Bt,sdf:wt,stretchX:Dt,stretchY:bt,content:Tt,textFitWidth:Gt,textFitHeight:pr,spriteData:{width:Je,height:rt,x:at,y:mt,context:De}}}}return ze})}(Q,pe)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const A in _){this._spritesImagesIds[A]=[];const M=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(O=>!(O in _)):[];for(const O of M)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in _[A]){const $=A==="default"?O:`${A}:${O}`;this._spritesImagesIds[A].push($),$ in this.imageManager.images?this.imageManager.updateImage($,_[A][O],!1):this.imageManager.addImage($,_[A][O]),u&&(this._changedImages[$]=!0)}}}).catch(_=>{this._spriteRequest=null,g=_,this.fire(new l.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(n){const u=this.sourceCaches[n.source];if(!u)return;const p=n.sourceLayer;if(!p)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const u=this._serializedAllLayers();if(!n||n.length===0)return Object.values(u);const p=[];for(const g of n)u[g]&&p.push(u[g]);return p}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const g=this._layers[p];g.type!=="custom"&&(n[p]=g.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const u=this._changed;if(u){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const A in this._updatedSources){const M=this._updatedSources[A];if(M==="reload")this._reloadSource(A);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(n,this._availableImages),!_.isHidden(n.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];!!p[g]!=!!_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(n),this.sky.recalculate(n),this.z=n.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,u={}){var p;this._checkLoaded();const g=this.serialize();if(n=u.transformStyle?u.transformStyle(g,n):n,((p=u.validate)===null||p===void 0||p)&&Fa(this,l.x(n)))return!1;(n=l.aC(n)).layers=l.aA(n.layers);const _=l.aD(g,n),A=this._getOperationsToPerform(_);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const M of A.operations)M();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const u=[],p=[];for(const g of n)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":u.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":u.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,g.args));break;case"setSky":u.push(()=>this.setSky.apply(this,g.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":u.push(()=>{});break;default:p.push(g.command)}return{operations:u,unimplemented:p}}addImage(n,u){if(this.getImage(n))return this.fire(new l.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,u),this._afterImageUpdated(n)}updateImage(n,u){this.imageManager.updateImage(n,u)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new l.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,u,p={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.x.source,`sources.${n}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[n]=new It(n,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:n})),g.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===n)return this.fire(new l.j(new Error(`Source "${n}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,u){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const p=this.sourceCaches[n].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,u,p={}){this._checkLoaded();const g=n.id;if(this.getLayer(g))return void this.fire(new l.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(n.type==="custom"){if(Fa(this,l.aE(n)))return;_=l.aB(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(g,n.source),n=l.aC(n),n=l.e(n,{source:g})),this._validate(l.x.layer,`layers.${g}`,n,{arrayIndex:-1},p))return;_=l.aB(n),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const A=u?this._order.indexOf(u):this._order.length;if(u&&A===-1)this.fire(new l.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(A,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const M=this._removedLayers[g];delete this._removedLayers[g],M.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(n,u){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new l.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===u)return;const p=this._order.indexOf(n);this._order.splice(p,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new l.j(new Error(`Cannot move layer "${n}" before non-existing layer "${u}".`))):(this._order.splice(g,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const u=this._layers[n];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${n}".`)));u.setEventedParent(null);const p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=u,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],u.onRemove&&u.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,u,p){this._checkLoaded();const g=this.getLayer(n);g?g.minzoom===u&&g.maxzoom===p||(u!=null&&(g.minzoom=u),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,u,p={}){this._checkLoaded();const g=this.getLayer(n);if(g){if(!l.aF(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.x.filter,`layers.${g.id}.filter`,u,null,p)||(g.filter=l.aC(u),this._updateLayer(g)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return l.aC(this.getLayer(n).filter)}setLayoutProperty(n,u,p,g={}){this._checkLoaded();const _=this.getLayer(n);_?l.aF(_.getLayoutProperty(u),p)||(_.setLayoutProperty(u,p,g),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,u){const p=this.getLayer(n);if(p)return p.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,u,p,g={}){this._checkLoaded();const _=this.getLayer(n);_?l.aF(_.getPaintProperty(u),p)||(_.setPaintProperty(u,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,u){return this.getLayer(n).getPaintProperty(u)}setFeatureState(n,u){this._checkLoaded();const p=n.source,g=n.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const A=_.getSource().type;A==="geojson"&&g?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||g?(n.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,n.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,u){this._checkLoaded();const p=n.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,A=_==="vector"?n.sourceLayer:void 0;_!=="vector"||A?u&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(A,n.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const u=n.source,p=n.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||p?(n.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,n.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=l.aG(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return l.aH({version:g.version,name:g.name,metadata:g.metadata,light:g.light,sky:g.sky,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:n,layers:u,terrain:p},_=>_!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const u=A=>this._layers[A].type==="fill-extrusion",p={},g=[];for(let A=this._order.length-1;A>=0;A--){const M=this._order[A];if(u(M)){p[M]=A;for(const O of n){const $=O[M];if($)for(const te of $)g.push(te)}}}g.sort((A,M)=>M.intersectionZ-A.intersectionZ);const _=[];for(let A=this._order.length-1;A>=0;A--){const M=this._order[A];if(u(M))for(let O=g.length-1;O>=0;O--){const $=g[O].feature;if(p[$.layer.id]<A)break;_.push($),g.pop()}else for(const O of n){const $=O[M];if($)for(const te of $)_.push(te.feature)}}return _}queryRenderedFeatures(n,u,p){u&&u.filter&&this._validate(l.x.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const M of u.layers){const O=this._layers[M];if(!O)return this.fire(new l.j(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];g[O.source]=!0}}const _=[];u.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const M in this.sourceCaches)u.layers&&!g[M]||_.push(Wt(this.sourceCaches[M],this._layers,A,n,u,p));return this.placement&&_.push(function(M,O,$,te,Q,pe,we){const Ae={},ze=pe.queryRenderedSymbols(te),Me=[];for(const De of Object.keys(ze).map(Number))Me.push(we[De]);Me.sort(Ht);for(const De of Me){const qe=De.featureIndex.lookupSymbolFeatures(ze[De.bucketInstanceId],O,De.bucketIndex,De.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,M);for(const je in qe){const Je=Ae[je]=Ae[je]||[],rt=qe[je];rt.sort((at,mt)=>{const wt=De.featureSortOrder;if(wt){const Bt=wt.indexOf(at.featureIndex);return wt.indexOf(mt.featureIndex)-Bt}return mt.featureIndex-at.featureIndex});for(const at of rt)Je.push(at)}}for(const De in Ae)Ae[De].forEach(qe=>{const je=qe.feature,Je=$[M[De].source].getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=Je});return Ae}(this._layers,A,this.sourceCaches,n,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(n,u){u&&u.filter&&this._validate(l.x.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[n];return p?function(g,_){const A=g.getRenderableIds().map($=>g.getTileByID($)),M=[],O={};for(let $=0;$<A.length;$++){const te=A[$],Q=te.tileID.canonical.key;O[Q]||(O[Q]=!0,te.querySourceFeatures(M,_))}return M}(p,u):[]}getLight(){return this.light.getLight()}setLight(n,u={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const A in n)if(!l.aF(n[A],p[A])){g=!0;break}if(!g)return;const _={now:b.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,u),this.light.updateTransitions(_)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,u={}){const p=this.sky.getSky();let g=!1;n||p&&(g=!0);for(const A in n)if(!l.aF(n[A],p[A])){g=!0;break}if(!g)return;const _={now:b.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,u),this.sky.updateTransitions(_)}_validate(n,u,p,g,_={}){return(!_||_.validate!==!1)&&Fa(this,n.call(l.x,l.e({key:u,style:this.serialize(),value:p,styleSpec:l.v},g)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ve().off(k,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const u in this.sourceCaches)this.sourceCaches[u].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,u,p,g,_=!1){let A=!1,M=!1;const O={};for(const $ of this._order){const te=this._layers[$];if(te.type!=="symbol")continue;if(!O[te.source]){const pe=this.sourceCaches[te.source];O[te.source]=pe.getRenderableIds(!0).map(we=>pe.getTileByID(we)).sort((we,Ae)=>Ae.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(Ae.tileID)?-1:1))}const Q=this.crossTileSymbolIndex.addLayer(te,O[te.source],n.center.lng);A=A||Q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),n.zoom))&&(this.pauseablePlacement=new xn(n,this.map.terrain,this._order,_,u,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),M=!0),A&&this.pauseablePlacement.placement.setStale()),M||A)for(const $ of this._order){const te=this._layers[$];te.type==="symbol"&&this.placement.updateLayerOpacities(te,O[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,u){return l._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];return g&&g.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(n,u){return l._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),g=this.sourceCaches[u.source];return g&&g.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,u={}){this._checkLoaded(),n&&this._validate(l.x.glyphs,"glyphs",n,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,u,p={},g){this._checkLoaded();const _=[{id:n,url:u}],A=[...D(this.stylesheet.sprite),..._];this._validate(l.x.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(_,!0,g))}removeSprite(n){this._checkLoaded();const u=D(this.stylesheet.sprite);if(u.find(p=>p.id===n)){if(this._spritesImagesIds[n])for(const p of this._spritesImagesIds[n])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===n),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return D(this.stylesheet.sprite)}setSprite(n,u={},p){this._checkLoaded(),n&&this._validate(l.x.sprite,"sprite",n,null,u)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,p):(this._unloadSprite(),p&&p(null)))}}var Ra=l.Y([{name:"a_pos",type:"Int16",components:2}]);const ts={prelude:Ar(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ar(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ar(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ar(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ar("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ar(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ar(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ar("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ar("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ar("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ar(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ar(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ar(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ar(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ar(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ar(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ar(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ar(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ar(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ar(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ar(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ar("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ar("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ar("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Ar("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ar(v,n){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=n.match(/attribute ([\w]+) ([\w]+)/g),g=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=_?_.concat(g):g,M={};return{fragmentSource:v=v.replace(u,(O,$,te,Q,pe)=>(M[pe]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
varying ${te} ${Q} ${pe};
#else
uniform ${te} ${Q} u_${pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pe}
    ${te} ${Q} ${pe} = u_${pe};
#endif
`)),vertexSource:n=n.replace(u,(O,$,te,Q,pe)=>{const we=Q==="float"?"vec2":"vec4",Ae=pe.match(/color/)?"color":we;return M[pe]?$==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${te} ${we} a_${pe};
varying ${te} ${Q} ${pe};
#else
uniform ${te} ${Q} u_${pe};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${te} ${Q} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Ae}(a_${pe}, u_${pe}_t);
#else
    ${te} ${Q} ${pe} = u_${pe};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${te} ${we} a_${pe};
#else
uniform ${te} ${Q} u_${pe};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${te} ${Q} ${pe} = a_${pe};
#else
    ${te} ${Q} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${te} ${Q} ${pe} = unpack_mix_${Ae}(a_${pe}, u_${pe}_t);
#else
    ${te} ${Q} ${pe} = u_${pe};
#endif
`}),staticAttributes:p,staticUniforms:A}}class bl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,u,p,g,_,A,M,O,$){this.context=n;let te=this.boundPaintVertexBuffers.length!==g.length;for(let Q=0;!te&&Q<g.length;Q++)this.boundPaintVertexBuffers[Q]!==g[Q]&&(te=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||te||this.boundIndexBuffer!==_||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==$?this.freshBind(u,p,g,_,A,M,O,$):(n.bindVertexArray.set(this.vao),M&&M.bind(),_&&_.dynamicDraw&&_.bind(),O&&O.bind(),$&&$.bind())}freshBind(n,u,p,g,_,A,M,O){const $=n.numAttributes,te=this.context,Q=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=O,u.enableAttributes(Q,n);for(const pe of p)pe.enableAttributes(Q,n);A&&A.enableAttributes(Q,n),M&&M.enableAttributes(Q,n),O&&O.enableAttributes(Q,n),u.bind(),u.setVertexAttribPointers(Q,n,_);for(const pe of p)pe.bind(),pe.setVertexAttribPointers(Q,n,_);A&&(A.bind(),A.setVertexAttribPointers(Q,n,_)),g&&g.bind(),M&&(M.bind(),M.setVertexAttribPointers(Q,n,_)),O&&(O.bind(),O.setVertexAttribPointers(Q,n,_)),te.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Ou=(v,n,u,p,g)=>({u_matrix:v,u_texture:0,u_ele_delta:n,u_fog_matrix:u,u_fog_color:p?p.properties.get("fog-color"):l.aN.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(g):0,u_horizon_color:p?p.properties.get("horizon-color"):l.aN.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function Jn(v){const n=[];for(let u=0;u<v.length;u++){if(v[u]===null)continue;const p=v[u].split(" ");n.push(p.pop())}return n}class Sl{constructor(n,u,p,g,_,A){const M=n.gl;this.program=M.createProgram();const O=Jn(u.staticAttributes),$=p?p.getBinderAttributes():[],te=O.concat($),Q=ts.prelude.staticUniforms?Jn(ts.prelude.staticUniforms):[],pe=u.staticUniforms?Jn(u.staticUniforms):[],we=p?p.getBinderUniforms():[],Ae=Q.concat(pe).concat(we),ze=[];for(const at of Ae)ze.indexOf(at)<0&&ze.push(at);const Me=p?p.defines():[];_&&Me.push("#define OVERDRAW_INSPECTOR;"),A&&Me.push("#define TERRAIN3D;");const De=Me.concat(ts.prelude.fragmentSource,u.fragmentSource).join(`
`),qe=Me.concat(ts.prelude.vertexSource,u.vertexSource).join(`
`),je=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(je,De),M.compileShader(je),!M.getShaderParameter(je,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(je)}`);M.attachShader(this.program,je);const Je=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Je,qe),M.compileShader(Je),!M.getShaderParameter(Je,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(Je)}`);M.attachShader(this.program,Je),this.attributes={};const rt={};this.numAttributes=te.length;for(let at=0;at<this.numAttributes;at++)te[at]&&(M.bindAttribLocation(this.program,at,te[at]),this.attributes[te[at]]=at);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(Je),M.deleteShader(je);for(let at=0;at<ze.length;at++){const mt=ze[at];if(mt&&!rt[mt]){const wt=M.getUniformLocation(this.program,mt);wt&&(rt[mt]=wt)}}this.fixedUniforms=g(n,rt),this.terrainUniforms=((at,mt)=>({u_depth:new l.aI(at,mt.u_depth),u_terrain:new l.aI(at,mt.u_terrain),u_terrain_dim:new l.aJ(at,mt.u_terrain_dim),u_terrain_matrix:new l.aK(at,mt.u_terrain_matrix),u_terrain_unpack:new l.aL(at,mt.u_terrain_unpack),u_terrain_exaggeration:new l.aJ(at,mt.u_terrain_exaggeration)}))(n,rt),this.binderUniforms=p?p.getUniforms(n,rt):[]}draw(n,u,p,g,_,A,M,O,$,te,Q,pe,we,Ae,ze,Me,De,qe){const je=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(p),n.setStencilMode(g),n.setColorMode(_),n.setCullFace(A),O){n.activeTexture.set(je.TEXTURE2),je.bindTexture(je.TEXTURE_2D,O.depthTexture),n.activeTexture.set(je.TEXTURE3),je.bindTexture(je.TEXTURE_2D,O.texture);for(const rt in this.terrainUniforms)this.terrainUniforms[rt].set(O[rt])}for(const rt in this.fixedUniforms)this.fixedUniforms[rt].set(M[rt]);ze&&ze.setUniforms(n,this.binderUniforms,we,{zoom:Ae});let Je=0;switch(u){case je.LINES:Je=2;break;case je.TRIANGLES:Je=3;break;case je.LINE_STRIP:Je=1}for(const rt of pe.get()){const at=rt.vaos||(rt.vaos={});(at[$]||(at[$]=new bl)).bind(n,this,te,ze?ze.getPaintVertexBuffers():[],Q,rt.vertexOffset,Me,De,qe),je.drawElements(u,rt.primitiveLength*Je,je.UNSIGNED_SHORT,rt.primitiveOffset*Je*2)}}}function El(v,n,u){const p=1/cr(u,1,n.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,n.transform.tileZoom)/g,A=_*(u.tileID.canonical.x+u.tileID.wrap*g),M=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[A>>16,M>>16],u_pixel_coord_lower:[65535&A,65535&M]}}const Tl=(v,n,u,p)=>{const g=n.style.light,_=g.properties.get("position"),A=[_.x,_.y,_.z],M=function(){var $=new l.A(9);return l.A!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}();g.properties.get("anchor")==="viewport"&&function($,te){var Q=Math.sin(te),pe=Math.cos(te);$[0]=pe,$[1]=Q,$[2]=0,$[3]=-Q,$[4]=pe,$[5]=0,$[6]=0,$[7]=0,$[8]=1}(M,-n.transform.angle),function($,te,Q){var pe=te[0],we=te[1],Ae=te[2];$[0]=pe*Q[0]+we*Q[3]+Ae*Q[6],$[1]=pe*Q[1]+we*Q[4]+Ae*Q[7],$[2]=pe*Q[2]+we*Q[5]+Ae*Q[8]}(A,A,M);const O=g.properties.get("color");return{u_matrix:v,u_lightpos:A,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+u,u_opacity:p}},Pl=(v,n,u,p,g,_,A)=>l.e(Tl(v,n,u,p),El(_,n,A),{u_height_factor:-Math.pow(2,g.overscaledZ)/A.tileSize/8}),ja=v=>({u_matrix:v}),bs=(v,n,u,p)=>l.e(ja(v),El(u,n,p)),Fu=(v,n)=>({u_matrix:v,u_world:n}),Fc=(v,n,u,p,g)=>l.e(bs(v,n,u,p),{u_world:g}),za=(v,n,u,p)=>{const g=v.transform;let _,A;if(p.paint.get("circle-pitch-alignment")==="map"){const M=cr(u,1,g.zoom);_=!0,A=[M,M]}else _=!1,A=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(n.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:A}},Cf=(v,n,u)=>({u_matrix:v,u_inv_matrix:n,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}),_i=(v,n,u=1)=>({u_matrix:v,u_color:n,u_overlay:0,u_overlay_scale:u}),La=v=>({u_matrix:v}),xi=(v,n,u,p)=>({u_matrix:v,u_extrude_scale:cr(n,1,u),u_intensity:p});function wi(v,n){const u=Math.pow(2,n.canonical.z),p=n.canonical.y;return[new l.Z(0,p/u).toLngLat().lat,new l.Z(0,(p+1)/u).toLngLat().lat]}const Ba=(v,n,u,p)=>{const g=v.transform;return{u_matrix:Al(v,n,u,p),u_ratio:1/cr(n,1,g.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Da=(v,n,u,p,g)=>l.e(Ba(v,n,u,g),{u_image:0,u_image_height:p}),Rc=(v,n,u,p,g)=>{const _=v.transform,A=Ss(n,_);return{u_matrix:Al(v,n,u,g),u_texsize:n.imageAtlasTexture.size,u_ratio:1/cr(n,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[A,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},jc=(v,n,u,p,g,_)=>{const A=v.lineAtlas,M=Ss(n,v.transform),O=u.layout.get("line-cap")==="round",$=A.getDash(p.from,O),te=A.getDash(p.to,O),Q=$.width*g.fromScale,pe=te.width*g.toScale;return l.e(Ba(v,n,u,_),{u_patternscale_a:[M/Q,-$.height/2],u_patternscale_b:[M/pe,-te.height/2],u_sdfgamma:A.width/(256*Math.min(Q,pe)*v.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:te.y,u_mix:g.t})};function Ss(v,n){return 1/cr(v,1,n.tileZoom)}function Al(v,n,u,p){return v.translatePosMatrix(p?p.posMatrix:n.tileID.posMatrix,n,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Mf=(v,n,u,p,g)=>{return{u_matrix:v,u_tl_parent:n,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(A=g.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:kf(g.paint.get("raster-hue-rotate"))};var _,A};function kf(v){v*=Math.PI/180;const n=Math.sin(v),u=Math.cos(v);return[(2*u+1)/3,(-Math.sqrt(3)*n-u+1)/3,(Math.sqrt(3)*n-u+1)/3]}const zc=(v,n,u,p,g,_,A,M,O,$,te,Q,pe,we)=>{const Ae=A.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_pitch:Ae.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:O,u_coord_matrix:$,u_is_text:+Q,u_pitch_with_map:+p,u_is_along_line:g,u_is_variable_anchor:_,u_texsize:pe,u_texture:0,u_translation:te,u_pitched_scale:we}},Lc=(v,n,u,p,g,_,A,M,O,$,te,Q,pe,we,Ae)=>{const ze=A.transform;return l.e(zc(v,n,u,p,g,_,A,M,O,$,te,Q,pe,Ae),{u_gamma_scale:p?Math.cos(ze._pitch)*ze.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:+we})},Bc=(v,n,u,p,g,_,A,M,O,$,te,Q,pe,we)=>l.e(Lc(v,n,u,p,g,_,A,M,O,$,te,!0,Q,!0,we),{u_texsize_icon:pe,u_texture_icon:1}),Il=(v,n,u)=>({u_matrix:v,u_opacity:n,u_color:u}),Cl=(v,n,u,p,g,_)=>l.e(function(A,M,O,$){const te=O.imageManager.getPattern(A.from.toString()),Q=O.imageManager.getPattern(A.to.toString()),{width:pe,height:we}=O.imageManager.getPixelSize(),Ae=Math.pow(2,$.tileID.overscaledZ),ze=$.tileSize*Math.pow(2,O.transform.tileZoom)/Ae,Me=ze*($.tileID.canonical.x+$.tileID.wrap*Ae),De=ze*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[pe,we],u_mix:M.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/cr($,1,O.transform.tileZoom),u_pixel_coord_upper:[Me>>16,De>>16],u_pixel_coord_lower:[65535&Me,65535&De]}}(p,_,u,g),{u_matrix:v,u_opacity:n}),Ml={fillExtrusion:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_lightpos:new l.aO(v,n.u_lightpos),u_lightintensity:new l.aJ(v,n.u_lightintensity),u_lightcolor:new l.aO(v,n.u_lightcolor),u_vertical_gradient:new l.aJ(v,n.u_vertical_gradient),u_opacity:new l.aJ(v,n.u_opacity)}),fillExtrusionPattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_lightpos:new l.aO(v,n.u_lightpos),u_lightintensity:new l.aJ(v,n.u_lightintensity),u_lightcolor:new l.aO(v,n.u_lightcolor),u_vertical_gradient:new l.aJ(v,n.u_vertical_gradient),u_height_factor:new l.aJ(v,n.u_height_factor),u_image:new l.aI(v,n.u_image),u_texsize:new l.aP(v,n.u_texsize),u_pixel_coord_upper:new l.aP(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.aP(v,n.u_pixel_coord_lower),u_scale:new l.aO(v,n.u_scale),u_fade:new l.aJ(v,n.u_fade),u_opacity:new l.aJ(v,n.u_opacity)}),fill:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix)}),fillPattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_image:new l.aI(v,n.u_image),u_texsize:new l.aP(v,n.u_texsize),u_pixel_coord_upper:new l.aP(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.aP(v,n.u_pixel_coord_lower),u_scale:new l.aO(v,n.u_scale),u_fade:new l.aJ(v,n.u_fade)}),fillOutline:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_world:new l.aP(v,n.u_world)}),fillOutlinePattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_world:new l.aP(v,n.u_world),u_image:new l.aI(v,n.u_image),u_texsize:new l.aP(v,n.u_texsize),u_pixel_coord_upper:new l.aP(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.aP(v,n.u_pixel_coord_lower),u_scale:new l.aO(v,n.u_scale),u_fade:new l.aJ(v,n.u_fade)}),circle:(v,n)=>({u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_scale_with_map:new l.aI(v,n.u_scale_with_map),u_pitch_with_map:new l.aI(v,n.u_pitch_with_map),u_extrude_scale:new l.aP(v,n.u_extrude_scale),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_matrix:new l.aK(v,n.u_matrix)}),collisionBox:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_pixel_extrude_scale:new l.aP(v,n.u_pixel_extrude_scale)}),collisionCircle:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_inv_matrix:new l.aK(v,n.u_inv_matrix),u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_viewport_size:new l.aP(v,n.u_viewport_size)}),debug:(v,n)=>({u_color:new l.aM(v,n.u_color),u_matrix:new l.aK(v,n.u_matrix),u_overlay:new l.aI(v,n.u_overlay),u_overlay_scale:new l.aJ(v,n.u_overlay_scale)}),clippingMask:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix)}),heatmap:(v,n)=>({u_extrude_scale:new l.aJ(v,n.u_extrude_scale),u_intensity:new l.aJ(v,n.u_intensity),u_matrix:new l.aK(v,n.u_matrix)}),heatmapTexture:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_world:new l.aP(v,n.u_world),u_image:new l.aI(v,n.u_image),u_color_ramp:new l.aI(v,n.u_color_ramp),u_opacity:new l.aJ(v,n.u_opacity)}),hillshade:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_image:new l.aI(v,n.u_image),u_latrange:new l.aP(v,n.u_latrange),u_light:new l.aP(v,n.u_light),u_shadow:new l.aM(v,n.u_shadow),u_highlight:new l.aM(v,n.u_highlight),u_accent:new l.aM(v,n.u_accent)}),hillshadePrepare:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_image:new l.aI(v,n.u_image),u_dimension:new l.aP(v,n.u_dimension),u_zoom:new l.aJ(v,n.u_zoom),u_unpack:new l.aL(v,n.u_unpack)}),line:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_ratio:new l.aJ(v,n.u_ratio),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_units_to_pixels:new l.aP(v,n.u_units_to_pixels)}),lineGradient:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_ratio:new l.aJ(v,n.u_ratio),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_units_to_pixels:new l.aP(v,n.u_units_to_pixels),u_image:new l.aI(v,n.u_image),u_image_height:new l.aJ(v,n.u_image_height)}),linePattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_texsize:new l.aP(v,n.u_texsize),u_ratio:new l.aJ(v,n.u_ratio),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_image:new l.aI(v,n.u_image),u_units_to_pixels:new l.aP(v,n.u_units_to_pixels),u_scale:new l.aO(v,n.u_scale),u_fade:new l.aJ(v,n.u_fade)}),lineSDF:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_ratio:new l.aJ(v,n.u_ratio),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_units_to_pixels:new l.aP(v,n.u_units_to_pixels),u_patternscale_a:new l.aP(v,n.u_patternscale_a),u_patternscale_b:new l.aP(v,n.u_patternscale_b),u_sdfgamma:new l.aJ(v,n.u_sdfgamma),u_image:new l.aI(v,n.u_image),u_tex_y_a:new l.aJ(v,n.u_tex_y_a),u_tex_y_b:new l.aJ(v,n.u_tex_y_b),u_mix:new l.aJ(v,n.u_mix)}),raster:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_tl_parent:new l.aP(v,n.u_tl_parent),u_scale_parent:new l.aJ(v,n.u_scale_parent),u_buffer_scale:new l.aJ(v,n.u_buffer_scale),u_fade_t:new l.aJ(v,n.u_fade_t),u_opacity:new l.aJ(v,n.u_opacity),u_image0:new l.aI(v,n.u_image0),u_image1:new l.aI(v,n.u_image1),u_brightness_low:new l.aJ(v,n.u_brightness_low),u_brightness_high:new l.aJ(v,n.u_brightness_high),u_saturation_factor:new l.aJ(v,n.u_saturation_factor),u_contrast_factor:new l.aJ(v,n.u_contrast_factor),u_spin_weights:new l.aO(v,n.u_spin_weights)}),symbolIcon:(v,n)=>({u_is_size_zoom_constant:new l.aI(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aI(v,n.u_is_size_feature_constant),u_size_t:new l.aJ(v,n.u_size_t),u_size:new l.aJ(v,n.u_size),u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_pitch:new l.aJ(v,n.u_pitch),u_rotate_symbol:new l.aI(v,n.u_rotate_symbol),u_aspect_ratio:new l.aJ(v,n.u_aspect_ratio),u_fade_change:new l.aJ(v,n.u_fade_change),u_matrix:new l.aK(v,n.u_matrix),u_label_plane_matrix:new l.aK(v,n.u_label_plane_matrix),u_coord_matrix:new l.aK(v,n.u_coord_matrix),u_is_text:new l.aI(v,n.u_is_text),u_pitch_with_map:new l.aI(v,n.u_pitch_with_map),u_is_along_line:new l.aI(v,n.u_is_along_line),u_is_variable_anchor:new l.aI(v,n.u_is_variable_anchor),u_texsize:new l.aP(v,n.u_texsize),u_texture:new l.aI(v,n.u_texture),u_translation:new l.aP(v,n.u_translation),u_pitched_scale:new l.aJ(v,n.u_pitched_scale)}),symbolSDF:(v,n)=>({u_is_size_zoom_constant:new l.aI(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aI(v,n.u_is_size_feature_constant),u_size_t:new l.aJ(v,n.u_size_t),u_size:new l.aJ(v,n.u_size),u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_pitch:new l.aJ(v,n.u_pitch),u_rotate_symbol:new l.aI(v,n.u_rotate_symbol),u_aspect_ratio:new l.aJ(v,n.u_aspect_ratio),u_fade_change:new l.aJ(v,n.u_fade_change),u_matrix:new l.aK(v,n.u_matrix),u_label_plane_matrix:new l.aK(v,n.u_label_plane_matrix),u_coord_matrix:new l.aK(v,n.u_coord_matrix),u_is_text:new l.aI(v,n.u_is_text),u_pitch_with_map:new l.aI(v,n.u_pitch_with_map),u_is_along_line:new l.aI(v,n.u_is_along_line),u_is_variable_anchor:new l.aI(v,n.u_is_variable_anchor),u_texsize:new l.aP(v,n.u_texsize),u_texture:new l.aI(v,n.u_texture),u_gamma_scale:new l.aJ(v,n.u_gamma_scale),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_is_halo:new l.aI(v,n.u_is_halo),u_translation:new l.aP(v,n.u_translation),u_pitched_scale:new l.aJ(v,n.u_pitched_scale)}),symbolTextAndIcon:(v,n)=>({u_is_size_zoom_constant:new l.aI(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aI(v,n.u_is_size_feature_constant),u_size_t:new l.aJ(v,n.u_size_t),u_size:new l.aJ(v,n.u_size),u_camera_to_center_distance:new l.aJ(v,n.u_camera_to_center_distance),u_pitch:new l.aJ(v,n.u_pitch),u_rotate_symbol:new l.aI(v,n.u_rotate_symbol),u_aspect_ratio:new l.aJ(v,n.u_aspect_ratio),u_fade_change:new l.aJ(v,n.u_fade_change),u_matrix:new l.aK(v,n.u_matrix),u_label_plane_matrix:new l.aK(v,n.u_label_plane_matrix),u_coord_matrix:new l.aK(v,n.u_coord_matrix),u_is_text:new l.aI(v,n.u_is_text),u_pitch_with_map:new l.aI(v,n.u_pitch_with_map),u_is_along_line:new l.aI(v,n.u_is_along_line),u_is_variable_anchor:new l.aI(v,n.u_is_variable_anchor),u_texsize:new l.aP(v,n.u_texsize),u_texsize_icon:new l.aP(v,n.u_texsize_icon),u_texture:new l.aI(v,n.u_texture),u_texture_icon:new l.aI(v,n.u_texture_icon),u_gamma_scale:new l.aJ(v,n.u_gamma_scale),u_device_pixel_ratio:new l.aJ(v,n.u_device_pixel_ratio),u_is_halo:new l.aI(v,n.u_is_halo),u_translation:new l.aP(v,n.u_translation),u_pitched_scale:new l.aJ(v,n.u_pitched_scale)}),background:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_opacity:new l.aJ(v,n.u_opacity),u_color:new l.aM(v,n.u_color)}),backgroundPattern:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_opacity:new l.aJ(v,n.u_opacity),u_image:new l.aI(v,n.u_image),u_pattern_tl_a:new l.aP(v,n.u_pattern_tl_a),u_pattern_br_a:new l.aP(v,n.u_pattern_br_a),u_pattern_tl_b:new l.aP(v,n.u_pattern_tl_b),u_pattern_br_b:new l.aP(v,n.u_pattern_br_b),u_texsize:new l.aP(v,n.u_texsize),u_mix:new l.aJ(v,n.u_mix),u_pattern_size_a:new l.aP(v,n.u_pattern_size_a),u_pattern_size_b:new l.aP(v,n.u_pattern_size_b),u_scale_a:new l.aJ(v,n.u_scale_a),u_scale_b:new l.aJ(v,n.u_scale_b),u_pixel_coord_upper:new l.aP(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.aP(v,n.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aJ(v,n.u_tile_units_to_pixels)}),terrain:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_texture:new l.aI(v,n.u_texture),u_ele_delta:new l.aJ(v,n.u_ele_delta),u_fog_matrix:new l.aK(v,n.u_fog_matrix),u_fog_color:new l.aM(v,n.u_fog_color),u_fog_ground_blend:new l.aJ(v,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aJ(v,n.u_fog_ground_blend_opacity),u_horizon_color:new l.aM(v,n.u_horizon_color),u_horizon_fog_blend:new l.aJ(v,n.u_horizon_fog_blend)}),terrainDepth:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_ele_delta:new l.aJ(v,n.u_ele_delta)}),terrainCoords:(v,n)=>({u_matrix:new l.aK(v,n.u_matrix),u_texture:new l.aI(v,n.u_texture),u_terrain_coords_id:new l.aJ(v,n.u_terrain_coords_id),u_ele_delta:new l.aJ(v,n.u_ele_delta)}),sky:(v,n)=>({u_sky_color:new l.aM(v,n.u_sky_color),u_horizon_color:new l.aM(v,n.u_horizon_color),u_horizon:new l.aJ(v,n.u_horizon),u_sky_horizon_blend:new l.aJ(v,n.u_sky_horizon_blend)})};class Ru{constructor(n,u,p){this.context=n;const g=n.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const kl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class lo{constructor(n,u,p,g){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=n;const _=n.gl;this.buffer=_.createBuffer(),n.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,u){for(let p=0;p<this.attributes.length;p++){const g=u.attributes[this.attributes[p].name];g!==void 0&&n.enableVertexAttribArray(g)}}setVertexAttribPointers(n,u,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],A=u.attributes[_.name];A!==void 0&&n.vertexAttribPointer(A,_.components,n[kl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ju=new WeakMap;function qs(v){var n;if(ju.has(v))return ju.get(v);{const u=(n=v.getParameter(v.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return ju.set(v,u),u}}class Ir{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ks extends Ir{getDefault(){return l.aN.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Of extends Ir{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Js extends Ir{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Ff extends Ir{getDefault(){return[!0,!0,!0,!0]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ys extends Ir{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Rf extends Ir{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Dc extends Ir{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const u=this.current;(n.func!==u.func||n.ref!==u.ref||n.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class jf extends Ir{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Nc extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=n,this.dirty=!1}}class Ol extends Ir{getDefault(){return[0,1]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Fl extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=n,this.dirty=!1}}class $c extends Ir{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Uc extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.BLEND):u.disable(u.BLEND),this.current=n,this.dirty=!1}}class Vc extends Ir{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Es extends Ir{getDefault(){return l.aN.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class zu extends Ir{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class zf extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=n,this.dirty=!1}}class Lf extends Ir{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Gc extends Ir{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Na extends Ir{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Rl extends Ir{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class jl extends Ir{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Qs extends Ir{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Wc extends Ir{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class qi extends Ir{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Hc extends Ir{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Zc extends Ir{getDefault(){return null}set(n){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Lu extends Ir{getDefault(){return null}set(n){var u;if(n===this.current&&!this.dirty)return;const p=this.gl;qs(p)?p.bindVertexArray(n):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Xc extends Ir{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class ea extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class bo extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class rs extends Ir{constructor(n,u){super(n),this.context=n,this.parent=u}getDefault(){return null}}class Bu extends rs{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Du extends rs{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class $a extends rs{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class zl{constructor(n,u,p,g,_){this.context=n,this.width=u,this.height=p;const A=n.gl,M=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Bu(n,M),g)this.depthAttachment=_?new $a(n,M):new Du(n,M);else if(_)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,u=this.colorAttachment.get();if(u&&n.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&n.deleteRenderbuffer(p)}n.deleteFramebuffer(this.framebuffer)}}class Gr{constructor(n,u,p){this.blendFunction=n,this.blendColor=u,this.mask=p}}Gr.Replace=[1,0],Gr.disabled=new Gr(Gr.Replace,l.aN.transparent,[!1,!1,!1,!1]),Gr.unblended=new Gr(Gr.Replace,l.aN.transparent,[!0,!0,!0,!0]),Gr.alphaBlended=new Gr([1,771],l.aN.transparent,[!0,!0,!0,!0]);class Nu{constructor(n){var u,p;if(this.gl=n,this.clearColor=new Ks(this),this.clearDepth=new Of(this),this.clearStencil=new Js(this),this.colorMask=new Ff(this),this.depthMask=new Ys(this),this.stencilMask=new Rf(this),this.stencilFunc=new Dc(this),this.stencilOp=new jf(this),this.stencilTest=new Nc(this),this.depthRange=new Ol(this),this.depthTest=new Fl(this),this.depthFunc=new $c(this),this.blend=new Uc(this),this.blendFunc=new Vc(this),this.blendColor=new Es(this),this.blendEquation=new zu(this),this.cullFace=new zf(this),this.cullFaceSide=new Lf(this),this.frontFace=new Gc(this),this.program=new Na(this),this.activeTexture=new Rl(this),this.viewport=new jl(this),this.bindFramebuffer=new Qs(this),this.bindRenderbuffer=new Wc(this),this.bindTexture=new qi(this),this.bindVertexBuffer=new Hc(this),this.bindElementBuffer=new Zc(this),this.bindVertexArray=new Lu(this),this.pixelStoreUnpack=new Xc(this),this.pixelStoreUnpackPremultiplyAlpha=new ea(this),this.pixelStoreUnpackFlipY=new bo(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),qs(n)){this.HALF_FLOAT=n.HALF_FLOAT;const g=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=n.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=n.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const g=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,u){return new Ru(this,n,u)}createVertexBuffer(n,u,p){return new lo(this,n,u,p)}createRenderbuffer(n,u,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,n,u,p),this.bindRenderbuffer.set(null),_}createFramebuffer(n,u,p,g){return new zl(this,n,u,p,g)}clear({color:n,depth:u,stencil:p}){const g=this.gl;let _=0;n&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){l.aF(n.blendFunction,Gr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return qs(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var u;return qs(this.gl)?this.gl.deleteVertexArray(n):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class wr{constructor(n,u,p){this.func=n,this.mask=u,this.range=p}}wr.ReadOnly=!1,wr.ReadWrite=!0,wr.disabled=new wr(519,wr.ReadOnly,[0,1]);const ta=7680;class Lr{constructor(n,u,p,g,_,A){this.test=n,this.ref=u,this.mask=p,this.fail=g,this.depthFail=_,this.pass=A}}Lr.disabled=new Lr({func:519,mask:0},0,0,ta,ta,ta);class qr{constructor(n,u,p){this.enable=n,this.mode=u,this.frontFace=p}}let ra;function Ua(v,n,u,p,g){const _=v.context,A=_.gl,M=v.useProgram("collisionBox"),O=[];let $=0,te=0;for(let De=0;De<p.length;De++){const qe=p[De],je=n.getTile(qe).getBucket(u);if(!je)continue;const Je=g?je.textCollisionBox:je.iconCollisionBox,rt=je.collisionCircleArray;if(rt.length>0){const at=l.H();l.aR(at,je.placementInvProjMatrix,v.transform.glCoordMatrix),l.aR(at,at,je.placementViewportMatrix),O.push({circleArray:rt,circleOffset:te,transform:qe.posMatrix,invTransform:at,coord:qe}),$+=rt.length/4,te=$}Je&&M.draw(_,A.LINES,wr.disabled,Lr.disabled,v.colorModeForRenderPass(),qr.disabled,{u_matrix:qe.posMatrix,u_pixel_extrude_scale:[1/(Q=v.transform).width,1/Q.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(qe),u.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,v.transform.zoom,null,null,Je.collisionVertexBuffer)}var Q;if(!g||!O.length)return;const pe=v.useProgram("collisionCircle"),we=new l.aS;we.resize(4*$),we._trim();let Ae=0;for(const De of O)for(let qe=0;qe<De.circleArray.length/4;qe++){const je=4*qe,Je=De.circleArray[je+0],rt=De.circleArray[je+1],at=De.circleArray[je+2],mt=De.circleArray[je+3];we.emplace(Ae++,Je,rt,at,mt,0),we.emplace(Ae++,Je,rt,at,mt,1),we.emplace(Ae++,Je,rt,at,mt,2),we.emplace(Ae++,Je,rt,at,mt,3)}(!ra||ra.length<2*$)&&(ra=function(De){const qe=2*De,je=new l.aU;je.resize(qe),je._trim();for(let Je=0;Je<qe;Je++){const rt=6*Je;je.uint16[rt+0]=4*Je+0,je.uint16[rt+1]=4*Je+1,je.uint16[rt+2]=4*Je+2,je.uint16[rt+3]=4*Je+2,je.uint16[rt+4]=4*Je+3,je.uint16[rt+5]=4*Je+0}return je}($));const ze=_.createIndexBuffer(ra,!0),Me=_.createVertexBuffer(we,l.aT.members,!0);for(const De of O){const qe=Cf(De.transform,De.invTransform,v.transform);pe.draw(_,A.TRIANGLES,wr.disabled,Lr.disabled,v.colorModeForRenderPass(),qr.disabled,qe,v.style.map.terrain&&v.style.map.terrain.getTerrainData(De.coord),u.id,Me,ze,l.a0.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,v.transform.zoom,null,null,null)}Me.destroy(),ze.destroy()}qr.disabled=new qr(!1,1029,2305),qr.backCCW=new qr(!0,1029,2305);const $u=l.ao(new Float32Array(16));function So(v,n,u,p,g,_){const{horizontalAlign:A,verticalAlign:M}=l.av(v);return new l.P((-(A-.5)*n/g+p[0])*_,(-(M-.5)*u/g+p[1])*_)}function Eo(v,n,u,p,g,_){const A=n.tileAnchorPoint.add(new l.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let M=p.mult(_);return u||(M=M.rotate(-g)),Oe(A.add(M),n.labelPlaneMatrix,n.getElevation).point}if(u){const M=st(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(v),O=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return v.add(p.rotate(O))}return v.add(p)}function jn(v,n,u,p,g,_,A,M,O,$,te,Q,pe,we){const Ae=v.text.placedSymbolArray,ze=v.text.dynamicLayoutVertexArray,Me=v.icon.dynamicLayoutVertexArray,De={};ze.clear();for(let qe=0;qe<Ae.length;qe++){const je=Ae.get(qe),Je=je.hidden||!je.crossTileID||v.allowVerticalPlacement&&!je.placedOrientation?null:p[je.crossTileID];if(Je){const rt=new l.P(je.anchorX,je.anchorY),at={getElevation:we,width:g.width,height:g.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:u,projection:te,projectionCache:null,tileAnchorPoint:rt,translation:Q,unwrappedTileID:pe},mt=u?Oe(rt,A,we):st(rt.x,rt.y,at),wt=ae(g.cameraToCenterDistance,mt.signedDistanceFromCamera);let Bt=l.aj(v.textSizeData,O,je)*wt/l.aq;u&&(Bt*=v.tilePixelRatio/M);const{width:Dt,height:bt,anchor:Tt,textOffset:Gt,textBoxScale:pr}=Je,Ct=So(Tt,Dt,bt,Gt,pr,Bt),jt=te.getPitchedTextCorrection(g,rt.add(new l.P(Q[0],Q[1])),pe),ur=Eo(mt.point,at,n,Ct,g.angle,jt),an=v.allowVerticalPlacement&&je.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let _r=0;_r<je.numGlyphs;_r++)l.ak(ze,ur,an);$&&je.associatedIconIndex>=0&&(De[je.associatedIconIndex]={shiftedAnchor:ur,angle:an})}else rr(je.numGlyphs,ze)}if($){Me.clear();const qe=v.icon.placedSymbolArray;for(let je=0;je<qe.length;je++){const Je=qe.get(je);if(Je.hidden)rr(Je.numGlyphs,Me);else{const rt=De[je];if(rt)for(let at=0;at<Je.numGlyphs;at++)l.ak(Me,rt.shiftedAnchor,rt.angle);else rr(Je.numGlyphs,Me)}}v.icon.dynamicLayoutVertexBuffer.updateData(Me)}v.text.dynamicLayoutVertexBuffer.updateData(ze)}function To(v,n,u){return u.iconsInText&&n?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function uo(v,n,u,p,g,_,A,M,O,$,te,Q){const pe=v.context,we=pe.gl,Ae=v.transform,ze=xl(),Me=M==="map",De=O==="map",qe=M!=="viewport"&&u.layout.get("symbol-placement")!=="point",je=Me&&!De&&!qe,Je=!De&&qe,rt=!u.layout.get("symbol-sort-key").isConstant();let at=!1;const mt=v.depthModeForSublayer(0,wr.ReadOnly),wt=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Bt=[],Dt=ze.getCircleRadiusCorrection(Ae);for(const bt of p){const Tt=n.getTile(bt),Gt=Tt.getBucket(u);if(!Gt)continue;const pr=g?Gt.text:Gt.icon;if(!pr||!pr.segments.get().length||!pr.hasVisibleVertices)continue;const Ct=pr.programConfigurations.get(u.id),jt=g||Gt.sdfIcons,ur=g?Gt.textSizeData:Gt.iconSizeData,an=De||Ae.pitch!==0,_r=v.useProgram(To(jt,g,Gt),Ct),Tr=l.ah(ur,Ae.zoom),ln=v.style.map.terrain&&v.style.map.terrain.getTerrainData(bt);let ni,ko,un,zi,Ei=[0,0],ii=null;if(g)ko=Tt.glyphAtlasTexture,un=we.LINEAR,ni=Tt.glyphAtlasTexture.size,Gt.iconsInText&&(Ei=Tt.imageAtlasTexture.size,ii=Tt.imageAtlasTexture,zi=an||v.options.rotating||v.options.zooming||ur.kind==="composite"||ur.kind==="camera"?we.LINEAR:we.NEAREST);else{const fn=u.layout.get("icon-size").constantOr(0)!==1||Gt.iconsNeedLinear;ko=Tt.imageAtlasTexture,un=jt||v.options.rotating||v.options.zooming||fn||an?we.LINEAR:we.NEAREST,ni=Tt.imageAtlasTexture.size}const oi=cr(Tt,1,v.transform.zoom),Oo=Je?bt.posMatrix:$u,Xa=Oi(Oo,De,Me,v.transform,oi),Yc=Vn(Oo,De,Me,v.transform,oi),$l=Vn(bt.posMatrix,De,Me,v.transform,oi),qa=ze.translatePosition(v.transform,Tt,_,A),Qc=wt&&Gt.hasTextData(),id=u.layout.get("icon-text-fit")!=="none"&&Qc&&Gt.hasIconData();if(qe){const fn=v.style.map.terrain?(od,Nn)=>v.style.map.terrain.getElevation(bt,od,Nn):null,Vl=u.layout.get("text-rotation-alignment")==="map";xe(Gt,bt.posMatrix,v,g,Xa,$l,De,$,Vl,ze,bt.toUnwrapped(),Ae.width,Ae.height,qa,fn)}const Yn=bt.posMatrix,Fo=g&&wt||id,la=qe||Fo?$u:Xa,Ul=Yc,si=jt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ai;ai=jt?Gt.iconsInText?Bc(ur.kind,Tr,je,De,qe,Fo,v,Yn,la,Ul,qa,ni,Ei,Dt):Lc(ur.kind,Tr,je,De,qe,Fo,v,Yn,la,Ul,qa,g,ni,!0,Dt):zc(ur.kind,Tr,je,De,qe,Fo,v,Yn,la,Ul,qa,g,ni,Dt);const Zn={program:_r,buffers:pr,uniformValues:ai,atlasTexture:ko,atlasTextureIcon:ii,atlasInterpolation:un,atlasInterpolationIcon:zi,isSDF:jt,hasHalo:si};if(rt&&Gt.canOverlap){at=!0;const fn=pr.segments.get();for(const Vl of fn)Bt.push({segments:new l.a0([Vl]),sortKey:Vl.sortKey,state:Zn,terrainData:ln})}else Bt.push({segments:pr.segments,sortKey:0,state:Zn,terrainData:ln})}at&&Bt.sort((bt,Tt)=>bt.sortKey-Tt.sortKey);for(const bt of Bt){const Tt=bt.state;if(pe.activeTexture.set(we.TEXTURE0),Tt.atlasTexture.bind(Tt.atlasInterpolation,we.CLAMP_TO_EDGE),Tt.atlasTextureIcon&&(pe.activeTexture.set(we.TEXTURE1),Tt.atlasTextureIcon&&Tt.atlasTextureIcon.bind(Tt.atlasInterpolationIcon,we.CLAMP_TO_EDGE)),Tt.isSDF){const Gt=Tt.uniformValues;Tt.hasHalo&&(Gt.u_is_halo=1,Po(Tt.buffers,bt.segments,u,v,Tt.program,mt,te,Q,Gt,bt.terrainData)),Gt.u_is_halo=0}Po(Tt.buffers,bt.segments,u,v,Tt.program,mt,te,Q,Tt.uniformValues,bt.terrainData)}}function Po(v,n,u,p,g,_,A,M,O,$){const te=p.context;g.draw(te,te.gl.TRIANGLES,_,A,M,qr.disabled,O,$,u.id,v.layoutVertexBuffer,v.indexBuffer,n,u.paint,p.transform.zoom,v.programConfigurations.get(u.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function bi(v,n,u,p,g){if(!u||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let A=_[u.to.toString()],M=_[u.from.toString()];if(!A&&M&&(A=M),!M&&A&&(M=A),!A||!M){const O=g.getPaintProperty(n);A=_[O],M=_[O]}A&&M&&v.setConstantPatternPositions(A,M)}function na(v,n,u,p,g,_,A){const M=v.context.gl,O="fill-pattern",$=u.paint.get(O),te=$&&$.constantOr(1),Q=u.getCrossfadeParameters();let pe,we,Ae,ze,Me;A?(we=te&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=M.LINES):(we=te?"fillPattern":"fill",pe=M.TRIANGLES);const De=$.constantOr(null);for(const qe of p){const je=n.getTile(qe);if(te&&!je.patternsLoaded())continue;const Je=je.getBucket(u);if(!Je)continue;const rt=Je.programConfigurations.get(u.id),at=v.useProgram(we,rt),mt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(qe);te&&(v.context.activeTexture.set(M.TEXTURE0),je.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),rt.updatePaintBuffers(Q)),bi(rt,O,De,je,u);const wt=mt?qe:null,Bt=v.translatePosMatrix(wt?wt.posMatrix:qe.posMatrix,je,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(A){ze=Je.indexBuffer2,Me=Je.segments2;const Dt=[M.drawingBufferWidth,M.drawingBufferHeight];Ae=we==="fillOutlinePattern"&&te?Fc(Bt,v,Q,je,Dt):Fu(Bt,Dt)}else ze=Je.indexBuffer,Me=Je.segments,Ae=te?bs(Bt,v,Q,je):ja(Bt);at.draw(v.context,pe,g,v.stencilModeForClipping(qe),_,qr.disabled,Ae,mt,u.id,Je.layoutVertexBuffer,ze,Me,u.paint,v.transform.zoom,rt)}}function Ts(v,n,u,p,g,_,A){const M=v.context,O=M.gl,$="fill-extrusion-pattern",te=u.paint.get($),Q=te.constantOr(1),pe=u.getCrossfadeParameters(),we=u.paint.get("fill-extrusion-opacity"),Ae=te.constantOr(null);for(const ze of p){const Me=n.getTile(ze),De=Me.getBucket(u);if(!De)continue;const qe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ze),je=De.programConfigurations.get(u.id),Je=v.useProgram(Q?"fillExtrusionPattern":"fillExtrusion",je);Q&&(v.context.activeTexture.set(O.TEXTURE0),Me.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),je.updatePaintBuffers(pe)),bi(je,$,Ae,Me,u);const rt=v.translatePosMatrix(ze.posMatrix,Me,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),at=u.paint.get("fill-extrusion-vertical-gradient"),mt=Q?Pl(rt,v,at,we,ze,pe,Me):Tl(rt,v,at,we);Je.draw(M,M.gl.TRIANGLES,g,_,A,qr.backCCW,mt,qe,u.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,u.paint,v.transform.zoom,je,v.style.map.terrain&&De.centroidVertexBuffer)}}function Si(v,n,u,p,g,_,A){const M=v.context,O=M.gl,$=u.fbo;if(!$)return;const te=v.useProgram("hillshade"),Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(n);M.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,$.colorAttachment.get()),te.draw(M,O.TRIANGLES,g,_,A,qr.disabled,((pe,we,Ae,ze)=>{const Me=Ae.paint.get("hillshade-shadow-color"),De=Ae.paint.get("hillshade-highlight-color"),qe=Ae.paint.get("hillshade-accent-color");let je=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=pe.transform.angle);const Je=!pe.options.moving;return{u_matrix:ze?ze.posMatrix:pe.transform.calculatePosMatrix(we.tileID.toUnwrapped(),Je),u_image:0,u_latrange:wi(0,we.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),je],u_shadow:Me,u_highlight:De,u_accent:qe}})(v,u,p,Q?n:null),Q,p.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Fi(v,n,u,p,g,_){const A=v.context,M=A.gl,O=n.dem;if(O&&O.data){const $=O.dim,te=O.stride,Q=O.getPixels();if(A.activeTexture.set(M.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||v.getTileTexture(te),n.demTexture){const we=n.demTexture;we.update(Q,{premultiply:!1}),we.bind(M.NEAREST,M.CLAMP_TO_EDGE)}else n.demTexture=new X(A,Q,M.RGBA,{premultiply:!1}),n.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);A.activeTexture.set(M.TEXTURE0);let pe=n.fbo;if(!pe){const we=new X(A,{width:$,height:$,data:null},M.RGBA);we.bind(M.LINEAR,M.CLAMP_TO_EDGE),pe=n.fbo=A.createFramebuffer($,$,!0,!1),pe.colorAttachment.set(we.texture)}A.bindFramebuffer.set(pe.framebuffer),A.viewport.set([0,0,$,$]),v.useProgram("hillshadePrepare").draw(A,M.TRIANGLES,p,g,_,qr.disabled,((we,Ae)=>{const ze=Ae.stride,Me=l.H();return l.aQ(Me,0,l.X,-l.X,0,0,1),l.J(Me,Me,[0,-l.X,0]),{u_matrix:Me,u_image:1,u_dimension:[ze,ze],u_zoom:we.overscaledZ,u_unpack:Ae.getUnpackVector()}})(n.tileID,O),null,u.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Va(v,n,u,p,g,_){const A=p.paint.get("raster-fade-duration");if(!_&&A>0){const M=b.now(),O=(M-v.timeAdded)/A,$=n?(M-n.timeAdded)/A:-1,te=u.getSource(),Q=g.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),pe=!n||Math.abs(n.tileID.overscaledZ-Q)>Math.abs(v.tileID.overscaledZ-Q),we=pe&&v.refreshedUponExpiration?1:l.ad(pe?O:1-$,0,1);return v.refreshedUponExpiration&&O>=1&&(v.refreshedUponExpiration=!1),n?{opacity:1,mix:1-we}:{opacity:we,mix:0}}return{opacity:1,mix:0}}const Ps=new l.aN(1,0,0,1),ns=new l.aN(0,1,0,1),Ga=new l.aN(0,0,1,1),Uu=new l.aN(1,0,1,1),As=new l.aN(0,1,1,1);function is(v,n,u,p){Is(v,0,n+u/2,v.transform.width,u,p)}function co(v,n,u,p){Is(v,n-u/2,0,u,v.transform.height,p)}function Is(v,n,u,p,g,_){const A=v.context,M=A.gl;M.enable(M.SCISSOR_TEST),M.scissor(n*v.pixelRatio,u*v.pixelRatio,p*v.pixelRatio,g*v.pixelRatio),A.clear({color:_}),M.disable(M.SCISSOR_TEST)}function kr(v,n,u){const p=v.context,g=p.gl,_=u.posMatrix,A=v.useProgram("debug"),M=wr.disabled,O=Lr.disabled,$=v.colorModeForRenderPass(),te="$debug",Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(u);p.activeTexture.set(g.TEXTURE0);const pe=n.getTileByID(u.key).latestRawTileData,we=Math.floor((pe&&pe.byteLength||0)/1024),Ae=n.getTile(u).tileSize,ze=512/Math.min(Ae,512)*(u.overscaledZ/v.transform.zoom)*.5;let Me=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Me+=` => ${u.overscaledZ}`),function(De,qe){De.initDebugOverlayCanvas();const je=De.debugOverlayCanvas,Je=De.context.gl,rt=De.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,je.width,je.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(qe,5,5),rt.strokeText(qe,5,5),De.debugOverlayTexture.update(je),De.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}(v,`${Me} ${we}kB`),A.draw(p,g.TRIANGLES,M,O,Gr.alphaBlended,qr.disabled,_i(_,l.aN.transparent,ze),null,te,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),A.draw(p,g.LINE_STRIP,M,O,$,qr.disabled,_i(_,l.aN.red),Q,te,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function ia(v,n,u){const p=v.context,g=p.gl,_=v.colorModeForRenderPass(),A=new wr(g.LEQUAL,wr.ReadWrite,v.depthRangeFor3D),M=v.useProgram("terrain"),O=n.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,v.width,v.height]);for(const $ of u){const te=v.renderToTexture.getTexture($),Q=n.getTerrainData($.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,te.texture);const pe=v.transform.calculatePosMatrix($.tileID.toUnwrapped()),we=n.getMeshFrameDelta(v.transform.zoom),Ae=v.transform.calculateFogMatrix($.tileID.toUnwrapped()),ze=Ou(pe,we,Ae,v.style.sky,v.transform.pitch);M.draw(p,g.TRIANGLES,A,Lr.disabled,_,qr.backCCW,ze,Q,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class Ll{constructor(n,u,p){this.vertexBuffer=n,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Vu{constructor(n,u){this.context=new Nu(n),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.ao(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=It.maxUnderzooming+It.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wn}resize(n,u,p){if(this.width=Math.floor(n*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const n=this.context,u=new l.aX;u.emplaceBack(0,0),u.emplaceBack(l.X,0),u.emplaceBack(0,l.X),u.emplaceBack(l.X,l.X),this.tileExtentBuffer=n.createVertexBuffer(u,Ra.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const p=new l.aX;p.emplaceBack(0,0),p.emplaceBack(l.X,0),p.emplaceBack(0,l.X),p.emplaceBack(l.X,l.X),this.debugBuffer=n.createVertexBuffer(p,Ra.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const g=new l.$;g.emplaceBack(0,0,0,0),g.emplaceBack(l.X,0,l.X,0),g.emplaceBack(0,l.X,0,l.X),g.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=n.createVertexBuffer(g,B.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const _=new l.aX;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(_,Ra.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const A=new l.aZ;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(A);const M=new l.aY;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(M);const O=this.context.gl;this.stencilClearMode=new Lr({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const n=this.context,u=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.H();l.aQ(p,0,this.width,this.height,0,0,1),l.K(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,u.TRIANGLES,wr.disabled,this.stencilClearMode,Gr.disabled,qr.disabled,La(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,u){if(this.currentStencilSource===n.source||!n.isTileClipped()||!u||!u.length)return;this.currentStencilSource=n.source;const p=this.context,g=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(Gr.disabled),p.setDepthMode(wr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of u){const M=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);_.draw(p,g.TRIANGLES,wr.disabled,new Lr({func:g.ALWAYS,mask:0},M,255,g.KEEP,g.KEEP,g.REPLACE),Gr.disabled,qr.disabled,La(A.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,u=this.context.gl;return new Lr({func:u.NOTEQUAL,mask:255},n,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(n){const u=this.context.gl;return new Lr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(n){const u=this.context.gl,p=n.sort((A,M)=>M.overscaledZ-A.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const A={};for(let M=0;M<_;M++)A[M+g]=new Lr({func:u.GEQUAL,mask:255},M+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[A,p]}return[{[g]:Lr.disabled},p]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Gr([n.CONSTANT_COLOR,n.ONE],new l.aN(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gr.unblended:Gr.alphaBlended}depthModeForSublayer(n,u,p){if(!this.opaquePassEnabledForLayer())return wr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new wr(p||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,u){this.style=n,this.options=u,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},A={},M={};for(const O in g){const $=g[O];$.used&&$.prepare(this.context),_[O]=$.getVisibleCoordinates(),A[O]=_[O].slice().reverse(),M[O]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<p.length;O++)if(this.style._layers[p[O]].is3D()){this.opaquePassCutoff=O;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const O of p){const $=this.style._layers[O];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const te=A[$.source];($.type==="custom"||te.length)&&this.renderLayer(this,g[$.source],$,te)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aN.black:l.aN.transparent,depth:1}),this.clearStencil(),this.style.stylesheet.sky&&function(O,$){const te=O.context,Q=te.gl,pe=((De,qe,je)=>({u_sky_color:De.properties.get("sky-color"),u_horizon_color:De.properties.get("horizon-color"),u_horizon:(qe.height/2+qe.getHorizon())*je,u_sky_horizon_blend:De.properties.get("sky-horizon-blend")*qe.height/2*je}))($,O.style.map.transform,O.pixelRatio),we=new wr(Q.LEQUAL,wr.ReadWrite,[0,1]),Ae=Lr.disabled,ze=O.colorModeForRenderPass(),Me=O.useProgram("sky");if(!$.mesh){const De=new l.aX;De.emplaceBack(-1,-1),De.emplaceBack(1,-1),De.emplaceBack(1,1),De.emplaceBack(-1,1);const qe=new l.aY;qe.emplaceBack(0,1,2),qe.emplaceBack(0,2,3),$.mesh=new Ll(te.createVertexBuffer(De,Ra.members),te.createIndexBuffer(qe),l.a0.simpleSegment(0,0,De.length,qe.length))}Me.draw(te,Q.TRIANGLES,we,Ae,ze,qr.disabled,pe,void 0,"sky",$.mesh.vertexBuffer,$.mesh.indexBuffer,$.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[p[this.currentLayer]],$=g[O.source],te=_[O.source];this._renderTileClippingMasks(O,te),this.renderLayer(this,$,O,te)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const O=this.style._layers[p[this.currentLayer]],$=g[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const te=(O.type==="symbol"?M:A)[O.source];this._renderTileClippingMasks(O,_[O.source]),this.renderLayer(this,$,O,te)}if(this.options.showTileBoundaries){const O=function($,te){let Q=null;const pe=Object.values($._layers).flatMap(Me=>Me.source&&!Me.isHidden(te)?[$.sourceCaches[Me.source]]:[]),we=pe.filter(Me=>Me.getSource().type==="vector"),Ae=pe.filter(Me=>Me.getSource().type!=="vector"),ze=Me=>{(!Q||Q.getSource().maxzoom<Me.getSource().maxzoom)&&(Q=Me)};return we.forEach(Me=>ze(Me)),Q||Ae.forEach(Me=>ze(Me)),Q}(this.style,this.transform.zoom);O&&function($,te,Q){for(let pe=0;pe<Q.length;pe++)kr($,te,Q[pe])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const $=O.transform.padding;is(O,O.transform.height-($.top||0),3,Ps),is(O,$.bottom||0,3,ns),co(O,$.left||0,3,Ga),co(O,O.transform.width-($.right||0),3,Uu);const te=O.transform.centerPoint;(function(Q,pe,we,Ae){Is(Q,pe-1,we-10,2,20,Ae),Is(Q,pe-10,we-1,20,2,Ae)})(O,te.x,O.transform.height-te.y,As)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let g=this.terrainFacilitator.dirty;g||(g=n?!l.a_(u,p):!l.a$(u,p)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(l.b0(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,A){const M=_.context,O=M.gl,$=Gr.unblended,te=new wr(O.LEQUAL,wr.ReadWrite,[0,1]),Q=A.getTerrainMesh(),pe=A.sourceCache.getRenderableTiles(),we=_.useProgram("terrainDepth");M.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),M.clear({color:l.aN.transparent,depth:1});for(const Ae of pe){const ze=A.getTerrainData(Ae.tileID),Me={u_matrix:_.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_ele_delta:A.getMeshFrameDelta(_.transform.zoom)};we.draw(M,O.TRIANGLES,te,Lr.disabled,$,qr.backCCW,Me,ze,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,A){const M=_.context,O=M.gl,$=Gr.unblended,te=new wr(O.LEQUAL,wr.ReadWrite,[0,1]),Q=A.getTerrainMesh(),pe=A.getCoordsTexture(),we=A.sourceCache.getRenderableTiles(),Ae=_.useProgram("terrainCoords");M.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),M.clear({color:l.aN.transparent,depth:1}),A.coordsIndex=[];for(const ze of we){const Me=A.getTerrainData(ze.tileID);M.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,pe.texture);const De={u_matrix:_.transform.calculatePosMatrix(ze.tileID.toUnwrapped()),u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(_.transform.zoom)};Ae.draw(M,O.TRIANGLES,te,Lr.disabled,$,qr.backCCW,De,Me,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),A.coordsIndex.push(ze.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(n,u,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,A,M,O,$){if(_.renderPass!=="translucent")return;const te=Lr.disabled,Q=_.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pe,we,Ae,ze,Me,De,qe,je,Je){const rt=we.transform,at=xl(),mt=Me==="map",wt=De==="map";for(const Bt of pe){const Dt=ze.getTile(Bt),bt=Dt.getBucket(Ae);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const Tt=l.ah(bt.textSizeData,rt.zoom),Gt=cr(Dt,1,we.transform.zoom),pr=Oi(Bt.posMatrix,wt,mt,we.transform,Gt),Ct=Ae.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(Tt){const jt=Math.pow(2,rt.zoom-Dt.tileID.overscaledZ),ur=we.style.map.terrain?(_r,Tr)=>we.style.map.terrain.getElevation(Bt,_r,Tr):null,an=at.translatePosition(rt,Dt,qe,je);jn(bt,mt,wt,Je,rt,pr,Bt.posMatrix,jt,Tt,Ct,at,an,Bt.toUnwrapped(),ur)}}}(O,_,M,A,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),$),M.paint.get("icon-opacity").constantOr(1)!==0&&uo(_,A,M,O,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),te,Q),M.paint.get("text-opacity").constantOr(1)!==0&&uo(_,A,M,O,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),te,Q),A.map.showCollisionBoxes&&(Ua(_,A,M,O,!0),Ua(_,A,M,O,!1))})(n,u,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,A,M,O){if(_.renderPass!=="translucent")return;const $=M.paint.get("circle-opacity"),te=M.paint.get("circle-stroke-width"),Q=M.paint.get("circle-stroke-opacity"),pe=!M.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(te.constantOr(1)===0||Q.constantOr(1)===0))return;const we=_.context,Ae=we.gl,ze=_.depthModeForSublayer(0,wr.ReadOnly),Me=Lr.disabled,De=_.colorModeForRenderPass(),qe=[];for(let je=0;je<O.length;je++){const Je=O[je],rt=A.getTile(Je),at=rt.getBucket(M);if(!at)continue;const mt=at.programConfigurations.get(M.id),wt=_.useProgram("circle",mt),Bt=at.layoutVertexBuffer,Dt=at.indexBuffer,bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Je),Tt={programConfiguration:mt,program:wt,layoutVertexBuffer:Bt,indexBuffer:Dt,uniformValues:za(_,Je,rt,M),terrainData:bt};if(pe){const Gt=at.segments.get();for(const pr of Gt)qe.push({segments:new l.a0([pr]),sortKey:pr.sortKey,state:Tt})}else qe.push({segments:at.segments,sortKey:0,state:Tt})}pe&&qe.sort((je,Je)=>je.sortKey-Je.sortKey);for(const je of qe){const{programConfiguration:Je,program:rt,layoutVertexBuffer:at,indexBuffer:mt,uniformValues:wt,terrainData:Bt}=je.state;rt.draw(we,Ae.TRIANGLES,ze,Me,De,qr.disabled,wt,Bt,M.id,at,mt,je.segments,M.paint,_.transform.zoom,Je)}})(n,u,p,g);break;case"heatmap":(function(_,A,M,O){if(M.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const $=_.context,te=$.gl,Q=Lr.disabled,pe=new Gr([te.ONE,te.ONE],l.aN.transparent,[!0,!0,!0,!0]);(function(we,Ae,ze){const Me=we.gl;we.activeTexture.set(Me.TEXTURE1),we.viewport.set([0,0,Ae.width/4,Ae.height/4]);let De=ze.heatmapFbo;if(De)Me.bindTexture(Me.TEXTURE_2D,De.colorAttachment.get()),we.bindFramebuffer.set(De.framebuffer);else{const qe=Me.createTexture();Me.bindTexture(Me.TEXTURE_2D,qe),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,Me.LINEAR),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,Me.LINEAR),De=ze.heatmapFbo=we.createFramebuffer(Ae.width/4,Ae.height/4,!1,!1),function(je,Je,rt,at){var mt,wt;const Bt=je.gl,Dt=(mt=je.HALF_FLOAT)!==null&&mt!==void 0?mt:Bt.UNSIGNED_BYTE,bt=(wt=je.RGBA16F)!==null&&wt!==void 0?wt:Bt.RGBA;Bt.texImage2D(Bt.TEXTURE_2D,0,bt,Je.width/4,Je.height/4,0,Bt.RGBA,Dt,null),at.colorAttachment.set(rt)}(we,Ae,qe,De)}})($,_,M),$.clear({color:l.aN.transparent});for(let we=0;we<O.length;we++){const Ae=O[we];if(A.hasRenderableParent(Ae))continue;const ze=A.getTile(Ae),Me=ze.getBucket(M);if(!Me)continue;const De=Me.programConfigurations.get(M.id),qe=_.useProgram("heatmap",De),{zoom:je}=_.transform;qe.draw($,te.TRIANGLES,wr.disabled,Q,pe,qr.disabled,xi(Ae.posMatrix,ze,je,M.paint.get("heatmap-intensity")),null,M.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,M.paint,_.transform.zoom,De)}$.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function($,te){const Q=$.context,pe=Q.gl,we=te.heatmapFbo;if(!we)return;Q.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,we.colorAttachment.get()),Q.activeTexture.set(pe.TEXTURE1);let Ae=te.colorRampTexture;Ae||(Ae=te.colorRampTexture=new X(Q,te.colorRamp,pe.RGBA)),Ae.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),$.useProgram("heatmapTexture").draw(Q,pe.TRIANGLES,wr.disabled,Lr.disabled,$.colorModeForRenderPass(),qr.disabled,((ze,Me,De,qe)=>{const je=l.H();l.aQ(je,0,ze.width,ze.height,0,0,1);const Je=ze.context.gl;return{u_matrix:je,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Me.paint.get("heatmap-opacity")}})($,te),null,te.id,$.viewportBuffer,$.quadTriangleIndexBuffer,$.viewportSegments,te.paint,$.transform.zoom)}(_,M))})(n,u,p,g);break;case"line":(function(_,A,M,O){if(_.renderPass!=="translucent")return;const $=M.paint.get("line-opacity"),te=M.paint.get("line-width");if($.constantOr(1)===0||te.constantOr(1)===0)return;const Q=_.depthModeForSublayer(0,wr.ReadOnly),pe=_.colorModeForRenderPass(),we=M.paint.get("line-dasharray"),Ae=M.paint.get("line-pattern"),ze=Ae.constantOr(1),Me=M.paint.get("line-gradient"),De=M.getCrossfadeParameters(),qe=ze?"linePattern":we?"lineSDF":Me?"lineGradient":"line",je=_.context,Je=je.gl;let rt=!0;for(const at of O){const mt=A.getTile(at);if(ze&&!mt.patternsLoaded())continue;const wt=mt.getBucket(M);if(!wt)continue;const Bt=wt.programConfigurations.get(M.id),Dt=_.context.program.get(),bt=_.useProgram(qe,Bt),Tt=rt||bt.program!==Dt,Gt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(at),pr=Ae.constantOr(null);if(pr&&mt.imageAtlas){const ur=mt.imageAtlas,an=ur.patternPositions[pr.to.toString()],_r=ur.patternPositions[pr.from.toString()];an&&_r&&Bt.setConstantPatternPositions(an,_r)}const Ct=Gt?at:null,jt=ze?Rc(_,mt,M,De,Ct):we?jc(_,mt,M,we,De,Ct):Me?Da(_,mt,M,wt.lineClipsArray.length,Ct):Ba(_,mt,M,Ct);if(ze)je.activeTexture.set(Je.TEXTURE0),mt.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Bt.updatePaintBuffers(De);else if(we&&(Tt||_.lineAtlas.dirty))je.activeTexture.set(Je.TEXTURE0),_.lineAtlas.bind(je);else if(Me){const ur=wt.gradients[M.id];let an=ur.texture;if(M.gradientVersion!==ur.version){let _r=256;if(M.stepInterpolant){const Tr=A.getSource().maxzoom,ln=at.canonical.z===Tr?Math.ceil(1<<_.transform.maxZoom-at.canonical.z):1;_r=l.ad(l.aV(wt.maxLineLength/l.X*1024*ln),256,je.maxTextureSize)}ur.gradient=l.aW({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:_r,image:ur.gradient||void 0,clips:wt.lineClipsArray}),ur.texture?ur.texture.update(ur.gradient):ur.texture=new X(je,ur.gradient,Je.RGBA),ur.version=M.gradientVersion,an=ur.texture}je.activeTexture.set(Je.TEXTURE0),an.bind(M.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}bt.draw(je,Je.TRIANGLES,Q,_.stencilModeForClipping(at),pe,qr.disabled,jt,Gt,M.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,M.paint,_.transform.zoom,Bt,wt.layoutVertexBuffer2),rt=!1}})(n,u,p,g);break;case"fill":(function(_,A,M,O){const $=M.paint.get("fill-color"),te=M.paint.get("fill-opacity");if(te.constantOr(1)===0)return;const Q=_.colorModeForRenderPass(),pe=M.paint.get("fill-pattern"),we=_.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&$.constantOr(l.aN.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===we){const Ae=_.depthModeForSublayer(1,_.renderPass==="opaque"?wr.ReadWrite:wr.ReadOnly);na(_,A,M,O,Ae,Q,!1)}if(_.renderPass==="translucent"&&M.paint.get("fill-antialias")){const Ae=_.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,wr.ReadOnly);na(_,A,M,O,Ae,Q,!0)}})(n,u,p,g);break;case"fill-extrusion":(function(_,A,M,O){const $=M.paint.get("fill-extrusion-opacity");if($!==0&&_.renderPass==="translucent"){const te=new wr(_.context.gl.LEQUAL,wr.ReadWrite,_.depthRangeFor3D);if($!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Ts(_,A,M,O,te,Lr.disabled,Gr.disabled),Ts(_,A,M,O,te,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const Q=_.colorModeForRenderPass();Ts(_,A,M,O,te,Lr.disabled,Q)}}})(n,u,p,g);break;case"hillshade":(function(_,A,M,O){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const $=_.context,te=_.depthModeForSublayer(0,wr.ReadOnly),Q=_.colorModeForRenderPass(),[pe,we]=_.renderPass==="translucent"?_.stencilConfigForOverlap(O):[{},O];for(const Ae of we){const ze=A.getTile(Ae);ze.needsHillshadePrepare!==void 0&&ze.needsHillshadePrepare&&_.renderPass==="offscreen"?Fi(_,ze,M,te,Lr.disabled,Q):_.renderPass==="translucent"&&Si(_,Ae,ze,M,te,pe[Ae.overscaledZ],Q)}$.viewport.set([0,0,_.width,_.height])})(n,u,p,g);break;case"raster":(function(_,A,M,O){if(_.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!O.length)return;const $=_.context,te=$.gl,Q=A.getSource(),pe=_.useProgram("raster"),we=_.colorModeForRenderPass(),[Ae,ze]=Q instanceof _e?[{},O]:_.stencilConfigForOverlap(O),Me=ze[ze.length-1].overscaledZ,De=!_.options.moving;for(const qe of ze){const je=_.depthModeForSublayer(qe.overscaledZ-Me,M.paint.get("raster-opacity")===1?wr.ReadWrite:wr.ReadOnly,te.LESS),Je=A.getTile(qe);Je.registerFadeDuration(M.paint.get("raster-fade-duration"));const rt=A.findLoadedParent(qe,0),at=A.findLoadedSibling(qe),mt=Va(Je,rt||at||null,A,M,_.transform,_.style.map.terrain);let wt,Bt;const Dt=M.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;$.activeTexture.set(te.TEXTURE0),Je.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(te.TEXTURE1),rt?(rt.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,rt.tileID.overscaledZ-Je.tileID.overscaledZ),Bt=[Je.tileID.canonical.x*wt%1,Je.tileID.canonical.y*wt%1]):Je.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);const bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(qe),Tt=bt?qe:null,Gt=Tt?Tt.posMatrix:_.transform.calculatePosMatrix(qe.toUnwrapped(),De),pr=Mf(Gt,Bt||[0,0],wt||1,mt,M);Q instanceof _e?pe.draw($,te.TRIANGLES,je,Lr.disabled,we,qr.disabled,pr,bt,M.id,Q.boundsBuffer,_.quadTriangleIndexBuffer,Q.boundsSegments):pe.draw($,te.TRIANGLES,je,Ae[qe.overscaledZ],we,qr.disabled,pr,bt,M.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(n,u,p,g);break;case"background":(function(_,A,M,O){const $=M.paint.get("background-color"),te=M.paint.get("background-opacity");if(te===0)return;const Q=_.context,pe=Q.gl,we=_.transform,Ae=we.tileSize,ze=M.paint.get("background-pattern");if(_.isPatternMissing(ze))return;const Me=!ze&&$.a===1&&te===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Me)return;const De=Lr.disabled,qe=_.depthModeForSublayer(0,Me==="opaque"?wr.ReadWrite:wr.ReadOnly),je=_.colorModeForRenderPass(),Je=_.useProgram(ze?"backgroundPattern":"background"),rt=O||we.coveringTiles({tileSize:Ae,terrain:_.style.map.terrain});ze&&(Q.activeTexture.set(pe.TEXTURE0),_.imageManager.bind(_.context));const at=M.getCrossfadeParameters();for(const mt of rt){const wt=O?mt.posMatrix:_.transform.calculatePosMatrix(mt.toUnwrapped()),Bt=ze?Cl(wt,te,_,ze,{tileID:mt,tileSize:Ae},at):Il(wt,te,$),Dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(mt);Je.draw(Q,pe.TRIANGLES,qe,De,je,qr.disabled,Bt,Dt,M.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(n,0,p,g);break;case"custom":(function(_,A,M){const O=_.context,$=M.implementation;if(_.renderPass==="offscreen"){const te=$.prerender;te&&(_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),te.call($,O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),O.setStencilMode(Lr.disabled);const te=$.renderingMode==="3d"?new wr(_.context.gl.LEQUAL,wr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,wr.ReadOnly);O.setDepthMode(te),$.render(O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState(),O.bindFramebuffer.set(null)}})(n,0,p)}}translatePosMatrix(n,u,p,g,_){if(!p[0]&&!p[1])return n;const A=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(A){const $=Math.sin(A),te=Math.cos(A);p=[p[0]*te-p[1]*$,p[0]*$+p[1]*te]}const M=[_?p[0]:cr(u,p[0],this.transform.zoom),_?p[1]:cr(u,p[1],this.transform.zoom),0],O=new Float32Array(16);return l.J(O,n,M),O}saveTileTexture(n){const u=this._tileTextures[n.size[0]];u?u.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const u=this._tileTextures[n];return u&&u.length>0?u.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const u=this.imageManager.getPattern(n.from.toString()),p=this.imageManager.getPattern(n.to.toString());return!u||!p}useProgram(n,u){this.cache=this.cache||{};const p=n+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Sl(this.context,ts[n],u,Ml[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new X(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:u}=this.context.gl;return this.width!==n||this.height!==u}}class os{constructor(n,u){this.points=n,this.planes=u}static fromInvProjectionMatrix(n,u,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const O=1/(M=l.ag([],M,n))[3]/u*g;return l.b1(M,M,[O,O,1/M[3],O])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const O=function(pe,we){var Ae=we[0],ze=we[1],Me=we[2],De=Ae*Ae+ze*ze+Me*Me;return De>0&&(De=1/Math.sqrt(De)),pe[0]=we[0]*De,pe[1]=we[1]*De,pe[2]=we[2]*De,pe}([],function(pe,we,Ae){var ze=we[0],Me=we[1],De=we[2],qe=Ae[0],je=Ae[1],Je=Ae[2];return pe[0]=Me*Je-De*je,pe[1]=De*qe-ze*Je,pe[2]=ze*je-Me*qe,pe}([],P([],_[M[0]],_[M[1]]),P([],_[M[2]],_[M[1]]))),$=-((te=O)[0]*(Q=_[M[1]])[0]+te[1]*Q[1]+te[2]*Q[2]);var te,Q;return O.concat($)});return new os(_,A)}}class Wa{constructor(n,u){this.min=n,this.max=u,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(n){const u=[n%2==0,n<2],p=q(this.min),g=q(this.max);for(let _=0;_<u.length;_++)p[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Wa(p,g)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<n.planes.length;g++){const _=n.planes[g];let A=0;for(let M=0;M<u.length;M++)l.b2(_,u[M])>=0&&A++;if(A===0)return 0;A!==u.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let M=0;M<n.points.length;M++){const O=n.points[M][g]-this.min[g];_=Math.min(_,O),A=Math.max(A,O)}if(A<0||_>this.max[g]-this.min[g])return 0}return 1}}class H{constructor(n=0,u=0,p=0,g=0){if(isNaN(n)||n<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=u,this.left=p,this.right=g}interpolate(n,u,p){return u.top!=null&&n.top!=null&&(this.top=l.z.number(n.top,u.top,p)),u.bottom!=null&&n.bottom!=null&&(this.bottom=l.z.number(n.bottom,u.bottom,p)),u.left!=null&&n.left!=null&&(this.left=l.z.number(n.left,u.left,p)),u.right!=null&&n.right!=null&&(this.right=l.z.number(n.right,u.right,p)),this}getCenter(n,u){const p=l.ad((this.left+n-this.right)/2,0,n),g=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(p,g)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new H(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ve=85.051129;class Ue{constructor(n,u,p,g,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=n||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new H,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new Ue(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const u=-l.b3(n,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new l.A(4);return l.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var A=g[0],M=g[1],O=g[2],$=g[3],te=Math.sin(_),Q=Math.cos(_);p[0]=A*Q+O*te,p[1]=M*Q+$*te,p[2]=A*-te+O*Q,p[3]=M*-te+$*Q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const u=l.ad(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const u=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,u,p){this._unmodified=!1,this._edgeInsets.interpolate(n,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const u=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(n){const u=[new l.b4(0,n)];if(this._renderWorldCopies){const p=this.pointCoordinate(new l.P(0,0)),g=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),A=this.pointCoordinate(new l.P(0,this.height)),M=Math.floor(Math.min(p.x,g.x,_.x,A.x)),O=Math.floor(Math.max(p.x,g.x,_.x,A.x)),$=1;for(let te=M-$;te<=O+$;te++)te!==0&&u.push(new l.b4(te,n))}return u}coveringTiles(n){var u,p;let g=this.coveringZoomLevel(n);const _=g;if(n.minzoom!==void 0&&g<n.minzoom)return[];n.maxzoom!==void 0&&g>n.maxzoom&&(g=n.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),M=l.Z.fromLngLat(this.center),O=Math.pow(2,g),$=[O*A.x,O*A.y,0],te=[O*M.x,O*M.y,0],Q=os.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,g);let pe=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(pe=g);const we=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Ae=je=>({aabb:new Wa([je*O,0,0],[(je+1)*O,O,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),ze=[],Me=[],De=g,qe=n.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let je=1;je<=3;je++)ze.push(Ae(-je)),ze.push(Ae(je));for(ze.push(Ae(0));ze.length>0;){const je=ze.pop(),Je=je.x,rt=je.y;let at=je.fullyVisible;if(!at){const bt=je.aabb.intersects(Q);if(bt===0)continue;at=bt===2}const mt=n.terrain?$:te,wt=je.aabb.distanceX(mt),Bt=je.aabb.distanceY(mt),Dt=Math.max(Math.abs(wt),Math.abs(Bt));if(je.zoom===De||Dt>we+(1<<De-je.zoom)-2&&je.zoom>=pe){const bt=De-je.zoom,Tt=$[0]-.5-(Je<<bt),Gt=$[1]-.5-(rt<<bt);Me.push({tileID:new l.S(je.zoom===De?qe:je.zoom,je.wrap,je.zoom,Je,rt),distanceSq:z([te[0]-.5-Je,te[1]-.5-rt]),tileDistanceToCamera:Math.sqrt(Tt*Tt+Gt*Gt)})}else for(let bt=0;bt<4;bt++){const Tt=(Je<<1)+bt%2,Gt=(rt<<1)+(bt>>1),pr=je.zoom+1;let Ct=je.aabb.quadrant(bt);if(n.terrain){const jt=new l.S(pr,je.wrap,pr,Tt,Gt),ur=n.terrain.getMinMaxElevation(jt),an=(u=ur.minElevation)!==null&&u!==void 0?u:this.elevation,_r=(p=ur.maxElevation)!==null&&p!==void 0?p:this.elevation;Ct=new Wa([Ct.min[0],Ct.min[1],an],[Ct.max[0],Ct.max[1],_r])}ze.push({aabb:Ct,zoom:pr,x:Tt,y:Gt,wrap:je.wrap,fullyVisible:at})}}return Me.sort((je,Je)=>je.distanceSq-Je.distanceSq).map(je=>je.tileID)}resize(n,u){this.width=n,this.height=u,this.pixelsToGLUnits=[2/n,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const u=l.ad(n.lat,-85.051129,ve);return new l.P(l.O(n.lng)*this.worldSize,l.Q(u)*this.worldSize)}unproject(n){return new l.Z(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const u=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,n),_=n.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-_))return;const A=p+u-_,M=Math.cos(this._pitch)*this.cameraToCenterDistance/A/l.b5(1,g.lat),O=this.scaleZoom(M/this.tileSize);this._elevation=_,this._center=g,this.zoom=O}setLocationAtPoint(n,u){const p=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(n),A=new l.Z(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,u){return u?this.coordinatePoint(this.locationCoordinate(n),u.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,u){return this.coordinateLocation(this.pointCoordinate(n,u))}locationCoordinate(n){return l.Z.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,u){if(u){const pe=u.pointCoordinate(n);if(pe!=null)return pe}const p=[n.x,n.y,0,1],g=[n.x,n.y,1,1];l.ag(p,p,this.pixelMatrixInverse),l.ag(g,g,this.pixelMatrixInverse);const _=p[3],A=g[3],M=p[1]/_,O=g[1]/A,$=p[2]/_,te=g[2]/A,Q=$===te?0:(0-$)/(te-$);return new l.Z(l.z.number(p[0]/_,g[0]/A,Q)/this.worldSize,l.z.number(M,O,Q)/this.worldSize)}coordinatePoint(n,u=0,p=this.pixelMatrix){const g=[n.x*this.worldSize,n.y*this.worldSize,u,1];return l.ag(g,g,p),new l.P(g[0]/g[3],g[1]/g[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new et().extend(this.pointLocation(new l.P(0,n))).extend(this.pointLocation(new l.P(this.width,n))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new et([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,ve])}calculateTileMatrix(n){const u=n.canonical,p=this.worldSize/this.zoomScale(u.z),g=u.x+Math.pow(2,u.z)*n.wrap,_=l.ao(new Float64Array(16));return l.J(_,_,[g*p,u.y*p,0]),l.K(_,_,[p/l.X,p/l.X,1]),_}calculatePosMatrix(n,u=!1){const p=n.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=this.calculateTileMatrix(n);return l.L(_,u?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,_),g[p]=new Float32Array(_),g[p]}calculateFogMatrix(n){const u=n.key,p=this._fogMatrixCache;if(p[u])return p[u];const g=this.calculateTileMatrix(n);return l.L(g,this.fogMatrix,g),p[u]=new Float32Array(g),p[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(n,u){u=l.ad(+u,this.minZoom,this.maxZoom);const p={center:new l.N(n.lng,n.lat),zoom:u};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const je=179.9999999999;g=[-je,je]}const _=this.tileSize*this.zoomScale(p.zoom);let A=0,M=_,O=0,$=_,te=0,Q=0;const{x:pe,y:we}=this.size;if(this.latRange){const je=this.latRange;A=l.Q(je[1])*_,M=l.Q(je[0])*_,M-A<we&&(te=we/(M-A))}g&&(O=l.b3(l.O(g[0])*_,0,_),$=l.b3(l.O(g[1])*_,0,_),$<O&&($+=_),$-O<pe&&(Q=pe/($-O)));const{x:Ae,y:ze}=this.project.call({worldSize:_},n);let Me,De;const qe=Math.max(Q||0,te||0);if(qe){const je=new l.P(Q?($+O)/2:Ae,te?(M+A)/2:ze);return p.center=this.unproject.call({worldSize:_},je).wrap(),p.zoom+=this.scaleZoom(qe),p}if(this.latRange){const je=we/2;ze-je<A&&(De=A+je),ze+je>M&&(De=M-je)}if(g){const je=(O+$)/2;let Je=Ae;this._renderWorldCopies&&(Je=l.b3(Ae,je-_/2,je+_/2));const rt=pe/2;Je-rt<O&&(Me=O+rt),Je+rt>$&&(Me=$-rt)}if(Me!==void 0||De!==void 0){const je=new l.P(Me??Ae,De??ze);p.center=this.unproject.call({worldSize:_},je).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=u,this.zoom=p,this._unmodified=n,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let g=l.ao(new Float64Array(16));l.K(g,g,[this.width/2,-this.height/2,1]),l.J(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.ao(new Float64Array(16)),l.K(g,g,[1,-1,1]),l.J(g,g,[-1,-1,0]),l.K(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this.minElevationForCurrentTile),M=_-A*this._pixelPerMeter/Math.cos(this._pitch),O=A<0?M:_,$=Math.PI/2+this._pitch,te=this._fov*(.5+n.y/this.height),Q=Math.sin(te)*O/Math.sin(l.ad(Math.PI-$-te,.01,Math.PI-.01)),pe=this.getHorizon(),we=2*Math.atan(pe/this.cameraToCenterDistance)*(.5+n.y/(2*pe)),Ae=Math.sin(we)*O/Math.sin(l.ad(Math.PI-$-we,.01,Math.PI-.01)),ze=Math.min(Q,Ae),Me=1.01*(Math.cos(Math.PI/2-this._pitch)*ze+O),De=this.height/50;g=new Float64Array(16),l.b6(g,this._fov,this.width/this.height,De,Me),g[8]=2*-n.x/this.width,g[9]=2*n.y/this.height,l.K(g,g,[1,-1,1]),l.J(g,g,[0,0,-this.cameraToCenterDistance]),l.b7(g,g,this._pitch),l.ae(g,g,this.angle),l.J(g,g,[-u,-p,0]),this.mercatorMatrix=l.K([],g,[this.worldSize,this.worldSize,this.worldSize]),l.K(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,g),l.J(g,g,[0,0,-this.elevation]),this.modelViewProjectionMatrix=g,this.invModelViewProjectionMatrix=l.at([],g),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,_,Me),this.fogMatrix[8]=2*-n.x/this.width,this.fogMatrix[9]=2*n.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ae(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-u,-p,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,g);const qe=this.width%2/2,je=this.height%2/2,Je=Math.cos(this.angle),rt=Math.sin(this.angle),at=u-Math.round(u)+Je*qe+rt*je,mt=p-Math.round(p)+Je*je+rt*qe,wt=new Float64Array(g);if(l.J(wt,wt,[at>.5?at-1:at,mt>.5?mt-1:mt,0]),this.alignedModelViewProjectionMatrix=wt,g=l.at(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new l.P(0,0)),u=[n.x*this.worldSize,n.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,n))}getCameraQueryGeometry(n){const u=this.getCameraPoint();if(n.length===1)return[n[0],u];{let p=u.x,g=u.y,_=u.x,A=u.y;for(const M of n)p=Math.min(p,M.x),g=Math.min(g,M.y),_=Math.max(_,M.x),A=Math.max(A,M.y);return[new l.P(p,g),new l.P(_,g),new l.P(_,A),new l.P(p,A),new l.P(p,g)]}}lngLatToCameraDepth(n,u){const p=this.locationCoordinate(n),g=[p.x*this.worldSize,p.y*this.worldSize,u,1];return l.ag(g,g,this.modelViewProjectionMatrix),g[2]/g[3]}}function ut(v,n){let u,p=!1,g=null,_=null;const A=()=>{g=null,p&&(v.apply(_,u),g=setTimeout(A,n),p=!1)};return(...M)=>(p=!0,_=this,u=M,g||A(),g)}class kt{constructor(n){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=ut(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),A=Math.round(u.lng*_)/_,M=Math.round(u.lat*_)/_,O=this._map.getBearing(),$=this._map.getPitch();let te="";if(te+=n?`/${A}/${M}/${p}`:`${p}/${M}/${A}`,(O||$)&&(te+="/"+Math.round(10*O)/10),$&&(te+=`/${Math.round($)}`),this._hashName){const Q=this._hashName;let pe=!1;const we=window.location.hash.slice(1).split("&").map(Ae=>{const ze=Ae.split("=")[0];return ze===Q?(pe=!0,`${ze}=${te}`):Ae}).filter(Ae=>Ae);return pe||we.push(`${Q}=${te}`),`#${we.join("&")}`}return`#${te}`}}const St={linearity:.3,easing:l.b8(0,0,.3,1)},Zt=l.e({deceleration:2500,maxSpeed:1400},St),Jt=l.e({deceleration:20,maxSpeed:1400},St),yr=l.e({deceleration:1e3,maxSpeed:360},St),Br=l.e({deceleration:1e3,maxSpeed:90},St);class Or{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,u=b.now();for(;n.length>0&&u-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=on(u.pan.mag(),p,l.e({},Zt,n||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,Wr(g,_)}if(u.zoom){const _=on(u.zoom,p,Jt);g.zoom=this._map.transform.zoom+_.amount,Wr(g,_)}if(u.bearing){const _=on(u.bearing,p,yr);g.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),Wr(g,_)}if(u.pitch){const _=on(u.pitch,p,Br);g.pitch=this._map.transform.pitch+_.amount,Wr(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(g,{noMoveStart:!0})}}function Wr(v,n){(!v.duration||v.duration<n.duration)&&(v.duration=n.duration,v.easing=n.easing)}function on(v,n,u){const{maxSpeed:p,linearity:g,deceleration:_}=u,A=l.ad(v*g/(n/1e3),-p,p),M=Math.abs(A)/(_*g);return{easing:u.easing,duration:1e3*M,amount:A*(M/2)}}class $r extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,p,g={}){const _=T.mousePos(u.getCanvas(),p),A=u.unproject(_);super(n,l.e({point:_,lngLat:A,originalEvent:p},g)),this._defaultPrevented=!1,this.target=u}}class mn extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,p){const g=n==="touchend"?p.changedTouches:p.touches,_=T.touchPos(u.getCanvasContainer(),g),A=_.map(O=>u.unproject(O)),M=_.reduce((O,$,te,Q)=>O.add($.div(Q.length)),new l.P(0,0));super(n,{points:_,point:M,lngLats:A,lngLat:u.unproject(M),originalEvent:p}),this._defaultPrevented=!1}}class ho extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,p){super(n,{originalEvent:p}),this._defaultPrevented=!1}}class Ri{constructor(n,u){this._map=n,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new ho(n.type,this._map,n))}mousedown(n,u){return this._mousedownPos=u,this._firePreventable(new $r(n.type,this._map,n))}mouseup(n){this._map.fire(new $r(n.type,this._map,n))}click(n,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new $r(n.type,this._map,n))}dblclick(n){return this._firePreventable(new $r(n.type,this._map,n))}mouseover(n){this._map.fire(new $r(n.type,this._map,n))}mouseout(n){this._map.fire(new $r(n.type,this._map,n))}touchstart(n){return this._firePreventable(new mn(n.type,this._map,n))}touchmove(n){this._map.fire(new mn(n.type,this._map,n))}touchend(n){this._map.fire(new mn(n.type,this._map,n))}touchcancel(n){this._map.fire(new mn(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ao{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new $r(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $r("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new $r(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cs{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(l.P.convert(n),this._map.terrain)}}class oa{constructor(n,u){this._map=n,this._tr=new Cs(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,u){this.isEnabled()&&n.shiftKey&&n.button===0&&(T.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(n,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const _=Math.min(g.x,p.x),A=Math.max(g.x,p.x),M=Math.min(g.y,p.y),O=Math.max(g.y,p.y);T.setTransform(this._box,`translate(${_}px,${M}px)`),this._box.style.width=A-_+"px",this._box.style.height=O-M+"px"}mouseupWindow(n,u){if(!this._active||n.button!==0)return;const p=this._startPos,g=u;if(this.reset(),T.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:n})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,u){return this._map.fire(new l.k(n,{originalEvent:u}))}}function Io(v,n){if(v.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${n.length}`);const u={};for(let p=0;p<v.length;p++)u[v[p].identifier]=n[p];return u}class Bf{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new l.P(0,0);for(const A of g)_._add(A);return _.div(g.length)}(u),this.touches=Io(p,u)))}touchmove(n,u,p){if(this.aborted||!this.centroid)return;const g=Io(p,u);for(const _ in this.touches){const A=g[_];(!A||A.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(n,u,p){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Df{constructor(n){this.singleTap=new Bf(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,u,p){this.singleTap.touchstart(n,u,p)}touchmove(n,u,p){this.singleTap.touchmove(n,u,p)}touchend(n,u,p){const g=this.singleTap.touchend(n,u,p);if(g){const _=n.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(g)<30;if(_&&A||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class nm{constructor(n){this._tr=new Cs(n),this._zoomIn=new Df({numTouches:1,numTaps:2}),this._zoomOut=new Df({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,u,p){this._zoomIn.touchstart(n,u,p),this._zoomOut.touchstart(n,u,p)}touchmove(n,u,p){this._zoomIn.touchmove(n,u,p),this._zoomOut.touchmove(n,u,p)}touchend(n,u,p){const g=this._zoomIn.touchend(n,u,p),_=this._zoomOut.touchend(n,u,p),A=this._tr;return g?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(g)},{originalEvent:n})}):_?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(_)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sn{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const u=this._moveFunction(...n);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(n,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const g=u.length?u[0]:u;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&T.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ha={0:1,2:2};class ji{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const u=T.mouseButton(n);this._eventButton=u}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(u,p){const g=Ha[p];return u.buttons===void 0||(u.buttons&g)!==g}(n,this._eventButton)}isValidEndEvent(n){return T.mouseButton(n)===this._eventButton}}class qc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const Gu=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=n=>{n.preventDefault()}},Nf=({enable:v,clickTolerance:n,bearingDegreesPerPixelMoved:u=.8})=>{const p=new ji({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new sn({clickTolerance:n,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:p,enable:v,assignEvents:Gu})},Za=({enable:v,clickTolerance:n,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new ji({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new sn({clickTolerance:n,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:p,enable:v,assignEvents:Gu})};class Wu{constructor(n,u){this._clickTolerance=n.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(n,u,p){return this._calculateTransform(n,u,p)}touchmove(n,u,p){if(this._active&&!(p.length<this.minTouchs()))return n.preventDefault(),this._calculateTransform(n,u,p)}touchend(n,u,p){this._calculateTransform(n,u,p),this._active&&p.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,u,p){p.length>0&&(this._active=!0);const g=Io(p,u),_=new l.P(0,0),A=new l.P(0,0);let M=0;for(const $ in g){const te=g[$],Q=this._touches[$];Q&&(_._add(te),A._add(te.sub(Q)),M++,g[$]=te)}if(this._touches=g,M<this.minTouchs()||!A.mag())return;const O=A.div(M);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(M),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(n,u,p){if(!this._firstTwoTouches)return;n.preventDefault();const[g,_]=this._firstTwoTouches,A=Zu(p,u,g),M=Zu(p,u,_);if(!A||!M)return;const O=this._aroundCenter?null:A.add(M).div(2);return this._move([A,M],O,n)}touchend(n,u,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,A=Zu(p,u,g),M=Zu(p,u,_);A&&M||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Zu(v,n,u){for(let p=0;p<v.length;p++)if(v[p].identifier===u)return n[p]}function $f(v,n){return Math.log(v/n)/Math.LN2}class Uf extends Hu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,u){const p=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs($f(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$f(this._distance,p),pinchAround:u}}}function Vf(v,n){return 180*v.angleWith(n)/Math.PI}class Gf extends Hu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,u,p){const g=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vf(this._vector,g),pinchAround:u}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const u=25/(Math.PI*this._minDiameter)*360,p=Vf(n,this._startVector);return Math.abs(p)<u}}function Ms(v){return Math.abs(v.y)>Math.abs(v.x)}class Wf extends Hu{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,u,p){super.touchstart(n,u,p),this._currentTouchCount=p.length}_start(n){this._lastPoints=n,Ms(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=n[0].sub(this._lastPoints[0]),_=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(n,u,p){if(this._valid!==void 0)return this._valid;const g=n.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=n.y>0==u.y>0;return Ms(n)&&Ms(u)&&A}}const im={panStep:100,bearingStep:15,pitchStep:10};class Hf{constructor(n){this._tr=new Cs(n);const u=im;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let u=0,p=0,g=0,_=0,A=0;switch(n.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:n.shiftKey?p=-1:(n.preventDefault(),_=-1);break;case 39:n.shiftKey?p=1:(n.preventDefault(),_=1);break;case 38:n.shiftKey?g=1:(n.preventDefault(),A=-1);break;case 40:n.shiftKey?g=-1:(n.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:M=>{const O=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:om,zoom:u?Math.round(O.zoom)+u*(n.shiftKey?2:1):O.zoom,bearing:O.bearing+p*this._bearingStep,pitch:O.pitch+g*this._pitchStep,offset:[-_*this._panStep,-A*this._panStep],center:O.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function om(v){return v*(2-v)}const Zf=4.000244140625;class Xf{constructor(n,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=n,this._tr=new Cs(n),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!n[this._map.cooperativeGestures._bypassKey])return;let u=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const p=b.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Zf==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),n.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=n,this._delta-=u,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=T.mousePos(this._map.getCanvas(),n),p=this._tr;this._around=u.y>p.transform.height/2-p.transform.getHorizon()?l.N.convert(this._aroundCenter?p.center:p.unproject(u)):l.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Zf?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&O!==0&&(O=1/O);const $=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom($*O))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,p=this._startZoom,g=this._easing;let _,A=!1;if(this._type==="wheel"&&p&&g){const M=Math.min((b.now()-this._lastWheelEventTime)/200,1),O=g(M);_=l.z.number(p,u,O),M<1?this._frameId||(this._frameId=!0):A=!0}else _=u,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:_-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let u=l.b9;if(this._prevEase){const p=this._prevEase,g=(b.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),A=.27/Math.sqrt(_*_+1e-4)*.01,M=Math.sqrt(.0729-A*A);u=l.b8(A,M,.25,1)}return this._prevEase={start:b.now(),duration:n,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class qf{constructor(n,u){this._clickZoom=n,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xu{constructor(n){this._tr=new Cs(n),this.reset()}reset(){this._active=!1}dblclick(n,u){return n.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sm{constructor(){this._tap=new Df({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,u,p){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=n.timeStamp-this._tapTime<500,A=this._tapPoint.dist(g)<30;_&&A?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(n,u,p)}touchmove(n,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,n.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(n,u,p)}touchend(n,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(n,u,p);g&&(this._tapTime=n.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fo{constructor(n,u,p){this._el=n,this._mousePan=u,this._touchPan=p}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Co{constructor(n,u,p){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Kf{constructor(n,u,p,g){this._el=n,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Mo{constructor(n,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",n);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=u,this._container.appendChild(g);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=p,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(n){this._onCooperativeGesture(n.touches.length===1)}wheel(n){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!n[this._bypassKey])}_onCooperativeGesture(n){this._enabled&&n&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ks=v=>v.zoom||v.drag||v.pitch||v.rotate;class $0 extends l.k{}function Jf(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class U0{constructor(n,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=g.type==="renderFrame"?void 0:g,M={needsRenderFrame:!1},O={},$={},te=g.touches,Q=te?this._getMapTouches(te):void 0,pe=Q?T.touchPos(this._map.getCanvas(),Q):T.mousePos(this._map.getCanvas(),g);for(const{handlerName:ze,handler:Me,allowed:De}of this._handlers){if(!Me.isEnabled())continue;let qe;this._blockedByActive($,De,ze)?Me.reset():Me[_||g.type]&&(qe=Me[_||g.type](g,pe,Q),this.mergeHandlerResult(M,O,qe,ze,A),qe&&qe.needsRenderFrame&&this._triggerRenderFrame()),(qe||Me.isActive())&&($[ze]=Me)}const we={};for(const ze in this._previousActiveHandlers)$[ze]||(we[ze]=A);this._previousActiveHandlers=$,(Object.keys(we).length||Jf(M))&&(this._changes.push([M,O,we]),this._triggerRenderFrame()),(Object.keys($).length||Jf(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=M;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Or(n),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,A]of this._listeners)T.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[n,u,p]of this._listeners)T.removeEventListener(n,u,n===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(n){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Ri(u,n));const g=u.boxZoom=new oa(u,n);this._add("boxZoom",g),n.interactive&&n.boxZoom&&g.enable();const _=u.cooperativeGestures=new Mo(u,n.cooperativeGestures);this._add("cooperativeGestures",_),n.cooperativeGestures&&_.enable();const A=new nm(u),M=new Xu(u);u.doubleClickZoom=new qf(M,A),this._add("tapZoom",A),this._add("clickZoom",M),n.interactive&&n.doubleClickZoom&&u.doubleClickZoom.enable();const O=new sm;this._add("tapDragZoom",O);const $=u.touchPitch=new Wf(u);this._add("touchPitch",$),n.interactive&&n.touchPitch&&u.touchPitch.enable(n.touchPitch);const te=Nf(n),Q=Za(n);u.dragRotate=new Co(n,te,Q),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]),n.interactive&&n.dragRotate&&u.dragRotate.enable();const pe=(({enable:qe,clickTolerance:je})=>{const Je=new ji({checkCorrectEvent:rt=>T.mouseButton(rt)===0&&!rt.ctrlKey});return new sn({clickTolerance:je,move:(rt,at)=>({around:at,panDelta:at.sub(rt)}),activateOnStart:!0,moveStateManager:Je,enable:qe,assignEvents:Gu})})(n),we=new Wu(n,u);u.dragPan=new fo(p,pe,we),this._add("mousePan",pe),this._add("touchPan",we,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&u.dragPan.enable(n.dragPan);const Ae=new Gf,ze=new Uf;u.touchZoomRotate=new Kf(p,ze,Ae,O),this._add("touchRotate",Ae,["touchPan","touchZoom"]),this._add("touchZoom",ze,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&u.touchZoomRotate.enable(n.touchZoomRotate);const Me=u.scrollZoom=new Xf(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Me,["mousePan"]),n.interactive&&n.scrollZoom&&u.scrollZoom.enable(n.scrollZoom);const De=u.keyboard=new Hf(u);this._add("keyboard",De),n.interactive&&n.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Ao(u))}_add(n,u,p){this._handlers.push({handlerName:n,handler:u,allowed:p}),this._handlersById[n]=u}stop(n){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ks(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,u,p){for(const g in n)if(g!==p&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(n){const u=[];for(const p of n)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(n,u,p,g,_){if(!p)return;l.e(n,p);const A={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(u.zoom=A),p.panDelta!==void 0&&(u.drag=A),p.pitchDelta!==void 0&&(u.pitch=A),p.bearingDelta!==void 0&&(u.rotate=A)}_applyChanges(){const n={},u={},p={};for(const[g,_,A]of this._changes)g.panDelta&&(n.panDelta=(n.panDelta||new l.P(0,0))._add(g.panDelta)),g.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(n.around=g.around),g.pinchAround!==void 0&&(n.pinchAround=g.pinchAround),g.noInertia&&(n.noInertia=g.noInertia),l.e(u,_),l.e(p,A);this._updateMapTransform(n,u,p),this._changes=[]}_updateMapTransform(n,u,p){const g=this._map,_=g._getTransformForUpdate(),A=g.terrain;if(!(Jf(n)||A&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:M,zoomDelta:O,bearingDelta:$,pitchDelta:te,around:Q,pinchAround:pe}=n;pe!==void 0&&(Q=pe),g._stop(!0),Q=Q||g.transform.centerPoint;const we=_.pointLocation(M?Q.sub(M):Q);$&&(_.bearing+=$),te&&(_.pitch+=te),O&&(_.zoom+=O),A?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(M)):_.setLocationAtPoint(we,Q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(we,Q)):_.setLocationAtPoint(we,Q),g._applyUpdatedTransform(_),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(u,p,!0)}_fireEvents(n,u,p){const g=ks(this._eventsInProgress),_=ks(n),A={};for(const Q in n){const{originalEvent:pe}=n[Q];this._eventsInProgress[Q]||(A[`${Q}start`]=pe),this._eventsInProgress[Q]=n[Q]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const Q in A)this._fireEvent(Q,A[Q]);_&&this._fireEvent("move",_.originalEvent);for(const Q in n){const{originalEvent:pe}=n[Q];this._fireEvent(Q,pe)}const M={};let O;for(const Q in this._eventsInProgress){const{handlerName:pe,originalEvent:we}=this._eventsInProgress[Q];this._handlersById[pe].isActive()||(delete this._eventsInProgress[Q],O=u[pe]||we,M[`${Q}end`]=O)}for(const Q in M)this._fireEvent(Q,M[Q]);const $=ks(this._eventsInProgress),te=(g||_)&&!$;if(te&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),p&&te){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pe=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;!Q||!Q.essential&&b.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:O})),pe(this._map.getBearing())&&this._map.resetNorth()):(pe(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(n,u){this._map.fire(new l.k(n,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new $0("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class V0 extends l.E{constructor(n,u){super(),this._renderFrameCallback=()=>{const p=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(n,u){return this.jumpTo({center:n},u)}panBy(n,u,p){return n=l.P.convert(n).mult(-1),this.panTo(this.transform.center,l.e({offset:n},u),p)}panTo(n,u,p){return this.easeTo(l.e({center:n},u),p)}getZoom(){return this.transform.zoom}setZoom(n,u){return this.jumpTo({zoom:n},u),this}zoomTo(n,u,p){return this.easeTo(l.e({zoom:n},u),p)}zoomIn(n,u){return this.zoomTo(this.getZoom()+1,n,u),this}zoomOut(n,u){return this.zoomTo(this.getZoom()-1,n,u),this}getBearing(){return this.transform.bearing}setBearing(n,u){return this.jumpTo({bearing:n},u),this}getPadding(){return this.transform.padding}setPadding(n,u){return this.jumpTo({padding:n},u),this}rotateTo(n,u,p){return this.easeTo(l.e({bearing:n},u),p)}resetNorth(n,u){return this.rotateTo(0,l.e({duration:1e3},n),u),this}resetNorthPitch(n,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},n),u),this}snapToNorth(n,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,u):this}getPitch(){return this.transform.pitch}setPitch(n,u){return this.jumpTo({pitch:n},u),this}cameraForBounds(n,u){n=et.convert(n);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),p,u)}_cameraForBoxAndBearing(n,u,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const bt=g.padding;g.padding={top:bt,bottom:bt,right:bt,left:bt}}g.padding=l.e(_,g.padding);const A=this.transform,M=A.padding,O=new et(n,u),$=A.project(O.getNorthWest()),te=A.project(O.getNorthEast()),Q=A.project(O.getSouthEast()),pe=A.project(O.getSouthWest()),we=l.ba(-p),Ae=$.rotate(we),ze=te.rotate(we),Me=Q.rotate(we),De=pe.rotate(we),qe=new l.P(Math.max(Ae.x,ze.x,De.x,Me.x),Math.max(Ae.y,ze.y,De.y,Me.y)),je=new l.P(Math.min(Ae.x,ze.x,De.x,Me.x),Math.min(Ae.y,ze.y,De.y,Me.y)),Je=qe.sub(je),rt=(A.width-(M.left+M.right+g.padding.left+g.padding.right))/Je.x,at=(A.height-(M.top+M.bottom+g.padding.top+g.padding.bottom))/Je.y;if(at<0||rt<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(A.scaleZoom(A.scale*Math.min(rt,at)),g.maxZoom),wt=l.P.convert(g.offset),Bt=new l.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(l.ba(p)),Dt=wt.add(Bt).mult(A.scale/A.zoomScale(mt));return{center:A.unproject($.add(Q).div(2).sub(Dt)),zoom:mt,bearing:p}}fitBounds(n,u,p){return this._fitInternal(this.cameraForBounds(n,u),u,p)}fitScreenCoordinates(n,u,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(n)),this.transform.pointLocation(l.P.convert(u)),p,g),g,_)}_fitInternal(n,u,p){return n?(delete(u=l.e(n,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(n,u){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,A=!1;return"zoom"in n&&p.zoom!==+n.zoom&&(g=!0,p.zoom=+n.zoom),n.center!==void 0&&(p.center=l.N.convert(n.center)),"bearing"in n&&p.bearing!==+n.bearing&&(_=!0,p.bearing=+n.bearing),"pitch"in n&&p.pitch!==+n.pitch&&(A=!0,p.pitch=+n.pitch),n.padding==null||p.isPaddingEqual(n.padding)||(p.padding=n.padding),this._applyUpdatedTransform(p),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),g&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),_&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),A&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(n,u,p,g=0){const _=l.Z.fromLngLat(n,u),A=l.Z.fromLngLat(p,g),M=A.x-_.x,O=A.y-_.y,$=A.z-_.z,te=Math.hypot(M,O,$);if(te===0)throw new Error("Can't calculate camera options with same From and To");const Q=Math.hypot(M,O),pe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/te/this.transform.tileSize),we=180*Math.atan2(M,-O)/Math.PI;let Ae=180*Math.acos(Q/te)/Math.PI;return Ae=$<0?90-Ae:90+Ae,{center:A.toLngLat(),zoom:pe,pitch:Ae,bearing:we}}easeTo(n,u){var p;this._stop(!1,n.easeId),((n=l.e({offset:[0,0],duration:500,easing:l.b9},n)).animate===!1||!n.essential&&b.prefersReducedMotion)&&(n.duration=0);const g=this._getTransformForUpdate(),_=this.getZoom(),A=this.getBearing(),M=this.getPitch(),O=this.getPadding(),$="bearing"in n?this._normalizeBearing(n.bearing,A):A,te="pitch"in n?+n.pitch:M,Q="padding"in n?n.padding:g.padding,pe=l.P.convert(n.offset);let we=g.centerPoint.add(pe);const Ae=g.pointLocation(we),{center:ze,zoom:Me}=g.getConstrained(l.N.convert(n.center||Ae),(p=n.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(ze);const De=g.project(Ae),qe=g.project(ze).sub(De),je=g.zoomScale(Me-_);let Je,rt;n.around&&(Je=l.N.convert(n.around),rt=g.locationPoint(Je));const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Me!==_,this._rotating=this._rotating||A!==$,this._pitching=this._pitching||te!==M,this._padding=!g.isPaddingEqual(Q),this._easeId=n.easeId,this._prepareEase(u,n.noMoveStart,at),this.terrain&&this._prepareElevation(ze),this._ease(mt=>{if(this._zooming&&(g.zoom=l.z.number(_,Me,mt)),this._rotating&&(g.bearing=l.z.number(A,$,mt)),this._pitching&&(g.pitch=l.z.number(M,te,mt)),this._padding&&(g.interpolatePadding(O,Q,mt),we=g.centerPoint.add(pe)),this.terrain&&!n.freezeElevation&&this._updateElevation(mt),Je)g.setLocationAtPoint(Je,rt);else{const wt=g.zoomScale(g.zoom-_),Bt=Me>_?Math.min(2,je):Math.max(.5,je),Dt=Math.pow(Bt,1-mt),bt=g.unproject(De.add(qe.mult(mt*Dt)).mult(wt));g.setLocationAtPoint(g.renderWorldCopies?bt.wrap():bt,we)}this._applyUpdatedTransform(g),this._fireMoveEvents(u)},mt=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u,mt)},n),this}_prepareEase(n,u,p={}){this._moving=!0,u||p.moving||this.fire(new l.k("movestart",n)),this._zooming&&!p.zooming&&this.fire(new l.k("zoomstart",n)),this._rotating&&!p.rotating&&this.fire(new l.k("rotatestart",n)),this._pitching&&!p.pitching&&this.fire(new l.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(p-(u-(p*n+this._elevationStart))/(1-n)),this._elevationTarget=u}this.transform.elevation=l.z.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const u=n.clone(),{center:p,zoom:g,pitch:_,bearing:A,elevation:M}=this.transformCameraUpdate(u);p&&(u.center=p),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),A!==void 0&&(u.bearing=A),M!==void 0&&(u.elevation=M),this.transform.apply(u)}_fireMoveEvents(n){this.fire(new l.k("move",n)),this._zooming&&this.fire(new l.k("zoom",n)),this._rotating&&this.fire(new l.k("rotate",n)),this._pitching&&this.fire(new l.k("pitch",n))}_afterEase(n,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new l.k("zoomend",n)),g&&this.fire(new l.k("rotateend",n)),_&&this.fire(new l.k("pitchend",n)),this.fire(new l.k("moveend",n))}flyTo(n,u){var p;if(!n.essential&&b.prefersReducedMotion){const jt=l.M(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,u)}this.stop(),n=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},n);const g=this._getTransformForUpdate(),_=this.getZoom(),A=this.getBearing(),M=this.getPitch(),O=this.getPadding(),$="bearing"in n?this._normalizeBearing(n.bearing,A):A,te="pitch"in n?+n.pitch:M,Q="padding"in n?n.padding:g.padding,pe=l.P.convert(n.offset);let we=g.centerPoint.add(pe);const Ae=g.pointLocation(we),{center:ze,zoom:Me}=g.getConstrained(l.N.convert(n.center||Ae),(p=n.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(ze);const De=g.zoomScale(Me-_),qe=g.project(Ae),je=g.project(ze).sub(qe);let Je=n.curve;const rt=Math.max(g.width,g.height),at=rt/De,mt=je.mag();if("minZoom"in n){const jt=l.ad(Math.min(n.minZoom,_,Me),g.minZoom,g.maxZoom),ur=rt/g.zoomScale(jt-_);Je=Math.sqrt(ur/mt*2)}const wt=Je*Je;function Bt(jt){const ur=(at*at-rt*rt+(jt?-1:1)*wt*wt*mt*mt)/(2*(jt?at:rt)*wt*mt);return Math.log(Math.sqrt(ur*ur+1)-ur)}function Dt(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function bt(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const Tt=Bt(!1);let Gt=function(jt){return bt(Tt)/bt(Tt+Je*jt)},pr=function(jt){return rt*((bt(Tt)*(Dt(ur=Tt+Je*jt)/bt(ur))-Dt(Tt))/wt)/mt;var ur},Ct=(Bt(!0)-Tt)/Je;if(Math.abs(mt)<1e-6||!isFinite(Ct)){if(Math.abs(rt-at)<1e-6)return this.easeTo(n,u);const jt=at<rt?-1:1;Ct=Math.abs(Math.log(at/rt))/Je,pr=()=>0,Gt=ur=>Math.exp(jt*Je*ur)}return n.duration="duration"in n?+n.duration:1e3*Ct/("screenSpeed"in n?+n.screenSpeed/Je:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=A!==$,this._pitching=te!==M,this._padding=!g.isPaddingEqual(Q),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ze),this._ease(jt=>{const ur=jt*Ct,an=1/Gt(ur);g.zoom=jt===1?Me:_+g.scaleZoom(an),this._rotating&&(g.bearing=l.z.number(A,$,jt)),this._pitching&&(g.pitch=l.z.number(M,te,jt)),this._padding&&(g.interpolatePadding(O,Q,jt),we=g.centerPoint.add(pe)),this.terrain&&!n.freezeElevation&&this._updateElevation(jt);const _r=jt===1?ze:g.unproject(qe.add(je.mult(pr(ur))).mult(an));g.setLocationAtPoint(g.renderWorldCopies?_r.wrap():_r,we),this._applyUpdatedTransform(g),this._fireMoveEvents(u)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,u)}return n||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(n,u,p){p.animate===!1||p.duration===0?(n(1),u()):(this._easeStart=b.now(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,u){n=l.b3(n,-180,180);const p=Math.abs(n-u);return Math.abs(n-360-u)<p&&(n-=360),Math.abs(n+360-u)<p&&(n+=360),n}_normalizeCenter(n){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=n.lng-u.center.lng;n.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const Yf={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Bl{constructor(n=Yf){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,u){const p=this._map._getUIString(`AttributionControl.${u}`);n.title=p,n.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const A=_.getSource();A.attribution&&n.indexOf(A.attribution)<0&&n.push(A.attribution)}}n=n.filter(g=>String(g).trim()),n.sort((g,_)=>g.length-_.length),n=n.filter((g,_)=>{for(let A=_+1;A<n.length;A++)if(n[A].indexOf(g)>=0)return!1;return!0});const p=n.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,n.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ss{constructor(n={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const u=T.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class $t{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const u=++this._id;return this._queue.push({callback:n,id:u,cancelled:!1}),u}remove(n){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const g of p)if(g.id===n)return void(g.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var am=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Qf extends l.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,u){this.sourceCache.update(n,u),this._renderableTilesKeys=[];const p={};for(const g of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.aQ(g.posMatrix,0,l.X,0,l.X,0,1),this._tiles[g.key]=new nt(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(n){for(const u in this._tiles){const p=this._tiles[u];(!n||p.tileID.equals(n)||p.tileID.isChildOf(n)||n.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const u={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16),l.aQ(_.posMatrix,0,l.X,0,l.X,0,1),u[p]=_}else if(g.canonical.isChildOf(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const A=g.canonical.z-n.canonical.z,M=g.canonical.x-(g.canonical.x>>A<<A),O=g.canonical.y-(g.canonical.y>>A<<A),$=l.X>>A;l.aQ(_.posMatrix,0,$,0,$,0,1),l.J(_.posMatrix,_.posMatrix,[-M*$,-O*$,0]),u[p]=_}else if(n.canonical.isChildOf(g.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const A=n.canonical.z-g.canonical.z,M=n.canonical.x-(n.canonical.x>>A<<A),O=n.canonical.y-(n.canonical.y>>A<<A),$=l.X>>A;l.aQ(_.posMatrix,0,l.X,0,l.X,0,1),l.J(_.posMatrix,_.posMatrix,[M*$,O*$,0]),l.K(_.posMatrix,_.posMatrix,[1/2**A,1/2**A,0]),u[p]=_}}return u}getSourceTile(n,u){const p=this.sourceCache._source;let g=n.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!_||!_.dem)&&u)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(n.scaledTo(g--).key);return _}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=n)}}class lm{constructor(n,u,p){this.painter=n,this.sourceCache=new Qf(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,u,p,g=l.X){var _;if(!(u>=0&&u<g&&p>=0&&p<g))return 0;const A=this.getTerrainData(n),M=(_=A.tile)===null||_===void 0?void 0:_.dem;if(!M)return 0;const O=function(Ae,ze,Me){var De=ze[0],qe=ze[1];return Ae[0]=Me[0]*De+Me[4]*qe+Me[12],Ae[1]=Me[1]*De+Me[5]*qe+Me[13],Ae}([],[u/g*l.X,p/g*l.X],A.u_terrain_matrix),$=[O[0]*M.dim,O[1]*M.dim],te=Math.floor($[0]),Q=Math.floor($[1]),pe=$[0]-te,we=$[1]-Q;return M.get(te,Q)*(1-pe)*(1-we)+M.get(te+1,Q)*pe*(1-we)+M.get(te,Q+1)*(1-pe)*we+M.get(te+1,Q+1)*pe*we}getElevationForLngLatZoom(n,u){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(n,u);return this.getElevation(p,g%l.X,_%l.X,l.X)}getElevation(n,u,p,g=l.X){return this.getDEMElevation(n,u,p,g)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const g=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new X(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new X(g,new l.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(n,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new X(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+n.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=n.canonical.z-u.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=g?_=n.canonical.z-g:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=n.canonical.x-(n.canonical.x>>_<<_),M=n.canonical.y-(n.canonical.y>>_<<_),O=l.bb(new Float64Array(16),[1/(l.X<<_),1/(l.X<<_),0]);l.J(O,O,[A*l.X,M*l.X,0]),this._demMatrixCache[n.key]={matrix:O,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(n){const u=this.painter,p=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new X(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new X(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,A=0;_<this._coordsTextureSize;_++)for(let M=0;M<this._coordsTextureSize;M++,A+=4)u[A+0]=255&M,u[A+1]=255&_,u[A+2]=M>>8<<4|_>>8,u[A+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new X(n,p,n.gl.RGBA,{premultiply:!1});return g.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,g=p.gl,_=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(_,M-A-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const O=u[0]+(u[2]>>4<<8),$=u[1]+((15&u[2])<<8),te=this.coordsIndex[255-u[3]],Q=te&&this.sourceCache.getTileByID(te);if(!Q)return null;const pe=this._coordsTextureSize,we=(1<<Q.tileID.canonical.z)*pe;return new l.Z((Q.tileID.canonical.x*pe+O)/we+Q.tileID.wrap,(Q.tileID.canonical.y*pe+$)/we,this.getElevation(Q.tileID,O,$,pe))}depthAtPoint(n){const u=new Uint8Array(4),p=this.painter.context,g=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,u=new l.bc,p=new l.aY,g=this.meshSize,_=l.X/g,A=g*g;for(let Q=0;Q<=g;Q++)for(let pe=0;pe<=g;pe++)u.emplaceBack(pe*_,Q*_,0);for(let Q=0;Q<A;Q+=g+1)for(let pe=0;pe<g;pe++)p.emplaceBack(pe+Q,g+pe+Q+1,g+pe+Q+2),p.emplaceBack(pe+Q,g+pe+Q+2,pe+Q+1);const M=u.length,O=M+2*(g+1);for(const Q of[0,1])for(let pe=0;pe<=g;pe++)for(const we of[0,1])u.emplaceBack(pe*_,Q*l.X,we);for(let Q=0;Q<2*g;Q+=2)p.emplaceBack(O+Q,O+Q+1,O+Q+3),p.emplaceBack(O+Q,O+Q+3,O+Q+2),p.emplaceBack(M+Q,M+Q+3,M+Q+1),p.emplaceBack(M+Q,M+Q+2,M+Q+3);const $=u.length,te=$+2*(g+1);for(const Q of[0,1])for(let pe=0;pe<=g;pe++)for(const we of[0,1])u.emplaceBack(Q*l.X,pe*_,we);for(let Q=0;Q<2*g;Q+=2)p.emplaceBack($+Q,$+Q+1,$+Q+3),p.emplaceBack($+Q,$+Q+3,$+Q+2),p.emplaceBack(te+Q,te+Q+3,te+Q+1),p.emplaceBack(te+Q,te+Q+2,te+Q+3);return this._mesh=new Ll(n.createVertexBuffer(u,am.members),n.createIndexBuffer(p),l.a0.simpleSegment(0,0,u.length,p.length)),this._mesh}getMeshFrameDelta(n){return 2*Math.PI*l.bd/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,u){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(n,u);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(n){const u=this.getTerrainData(n).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(n,u){const p=l.Z.fromLngLat(n.wrap()),g=(1<<u)*l.X,_=p.x*g,A=p.y*g,M=Math.floor(_/l.X),O=Math.floor(A/l.X);return{tileID:new l.S(u,0,u,M,O),mercatorX:_,mercatorY:A}}}class qu{constructor(n,u,p){this._context=n,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new X(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:n,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>n.id!==u),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const as={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class um{constructor(n,u){this.painter=n,this.terrain=u,this.pool=new qu(n.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(p=>!n._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in n.sourceCaches){this._coordsDescendingInv[p]={};const g=n.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const A=this.terrain.sourceCache.getTerrainCoords(_);for(const M in A)this._coordsDescendingInv[p][M]||(this._coordsDescendingInv[p][M]=[]),this._coordsDescendingInv[p][M].push(A[M])}}this._coordsDescendingInvStr={};for(const p of n._order){const g=n._layers[p],_=g.source;if(as[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const A in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][A]=this._coordsDescendingInv[_][A].map(M=>M.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const u=n.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(as[u]&&(this._prevType&&as[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(n.id),!g))return!0;if(as[this._prevType]||as[u]&&g){this._prevType=u;const _=this._stacks.length-1,A=this._stacks[_]||[];for(const M of this._renderableTiles){if(this.pool.isFull()&&(ia(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[_]){const $=this.pool.getObjectForId(M.rtt[_].id);if($.stamp===M.rtt[_].stamp){this.pool.useObject($);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),M.rtt[_]={id:O.id,stamp:O.stamp},p.context.bindFramebuffer.set(O.fbo.framebuffer),p.context.clear({color:l.aN.transparent,stencil:0}),p.currentStencilSource=void 0;for(let $=0;$<A.length;$++){const te=p.style._layers[A[$]],Q=te.source?this._coordsDescendingInv[te.source][M.tileID.key]:[M.tileID];p.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),p._renderTileClippingMasks(te,Q),p.renderLayer(p,p.style.sourceCaches[te.source],te,Q),te.source&&(M.rttCoords[te.source]=this._coordsDescendingInvStr[te.source][M.tileID.key])}}return ia(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),as[u]}return!1}}const Lt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ed=w,G0={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Yf,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},cm=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},td={showCompass:!0,showZoom:!0,visualizePitch:!1};class hm{constructor(n,u,p=!1){this.mousedown=A=>{this.startMouse(l.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),T.mousePos(this.element,A)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,T.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=n.dragRotate._mouseRotate.getClickTolerance(),_=n.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Nf({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:M,bearingDegreesPerPixelMoved:O=.8})=>{const $=new qc;return new sn({clickTolerance:M,move:(te,Q)=>({bearingDelta:(Q.x-te.x)*O}),moveStateManager:$,enable:A,assignEvents:cm})})({clickTolerance:g,enable:!0}),this.map=n,p&&(this.mousePitch=Za({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:M,pitchDegreesPerPixelMoved:O=-.5})=>{const $=new qc;return new sn({clickTolerance:M,move:(te,Q)=>({pitchDelta:(Q.y-te.y)*O}),moveStateManager:$,enable:A,assignEvents:cm})})({clickTolerance:_,enable:!0})),T.addEventListener(u,"mousedown",this.mousedown),T.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(u,"touchcancel",this.reset)}startMouse(n,u){this.mouseRotate.dragStart(n,u),this.mousePitch&&this.mousePitch.dragStart(n,u),T.disableDrag()}startTouch(n,u){this.touchRotate.dragStart(n,u),this.touchPitch&&this.touchPitch.dragStart(n,u),T.disableDrag()}moveMouse(n,u){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(n,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(n,u)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(n,u){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(n,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(n,u)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const n=this.element;T.removeEventListener(n,"mousedown",this.mousedown),T.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let sa;function fm(v,n,u){const p=new l.N(v.lng,v.lat);if(v=new l.N(v.lng,v.lat),n){const g=new l.N(v.lng-360,v.lat),_=new l.N(v.lng+360,v.lat),A=u.locationPoint(v).distSqr(n);u.locationPoint(g).distSqr(n)<A?v=g:u.locationPoint(_).distSqr(n)<A&&(v=_)}for(;Math.abs(v.lng-u.center.lng)>180;){const g=u.locationPoint(v);if(g.x>=0&&g.y>=0&&g.x<=u.width&&g.y<=u.height)break;v.lng>u.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&u.locationPoint(v).y>u.height/2-u.getHorizon()?v:p}const rd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function aa(v,n,u){const p=v.classList;for(const g in rd)p.remove(`maplibregl-${u}-anchor-${g}`);p.add(`maplibregl-${u}-anchor-${n}`)}class Qr extends l.E{constructor(n){if(super(),this._onKeyPress=u=>{const p=u.code,g=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=u=>{var p;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?fm(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${rd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${_}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=l.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div");const u=T.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=T.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const A=T.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const M=T.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const De of O){const qe=T.createNS("http://www.w3.org/2000/svg","ellipse");qe.setAttributeNS(null,"opacity","0.04"),qe.setAttributeNS(null,"cx","10.5"),qe.setAttributeNS(null,"cy","5.80029008"),qe.setAttributeNS(null,"rx",De.rx),qe.setAttributeNS(null,"ry",De.ry),M.appendChild(qe)}const $=T.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const te=T.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(te);const Q=T.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");const pe=T.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(pe);const we=T.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"transform","translate(6.0, 7.0)"),we.setAttributeNS(null,"fill","#FFFFFF");const Ae=T.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ze=T.createNS("http://www.w3.org/2000/svg","circle");ze.setAttributeNS(null,"fill","#000000"),ze.setAttributeNS(null,"opacity","0.25"),ze.setAttributeNS(null,"cx","5.5"),ze.setAttributeNS(null,"cy","5.5"),ze.setAttributeNS(null,"r","5.4999962");const Me=T.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#FFFFFF"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962"),Ae.appendChild(ze),Ae.appendChild(Me),A.appendChild(M),A.appendChild($),A.appendChild(Q),A.appendChild(we),A.appendChild(Ae),u.appendChild(A),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),aa(this._element,this._anchor,"marker"),n&&n.className)for(const u of n.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=l.N.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const g=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var u,p;if(!(!((u=this._map)===null||u===void 0)&&u.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,_=g.terrain.depthAtPoint(this._pos),A=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,A)-_<.006)return void(this._element.style.opacity=this._opacity);const M=-this._offset.y/g.transform._pixelPerMeter,O=Math.sin(g.getPitch()*Math.PI/180)*M,$=g.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),te=g.transform.lngLatToCameraDepth(this._lngLat,A+O)-$>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=l.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,u){return n===void 0&&u===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const Kc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Dl=0,Nl=!1;const dm={maxWidth:100,unit:"metric"};function nd(v,n,u){const p=u&&u.maxWidth||100,g=v._container.clientHeight/2,_=v.unproject([0,g]),A=v.unproject([p,g]),M=_.distanceTo(A);if(u&&u.unit==="imperial"){const O=3.2808*M;O>5280?Ku(n,p,O/5280,v._getUIString("ScaleControl.Miles")):Ku(n,p,O,v._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Ku(n,p,M/1852,v._getUIString("ScaleControl.NauticalMiles")):M>=1e3?Ku(n,p,M/1e3,v._getUIString("ScaleControl.Kilometers")):Ku(n,p,M,v._getUIString("ScaleControl.Meters"))}function Ku(v,n,u,p){const g=function(_){const A=Math.pow(10,`${Math.floor(_)}`.length-1);let M=_/A;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(O){const $=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*$)/$}(M),A*M}(u);v.style.width=n*(g/u)+"px",v.innerHTML=`${g}&nbsp;${p}`}const ls={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Jc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yt(v){if(v){if(typeof v=="number"){const n=Math.round(Math.abs(v)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,v),"top-left":new l.P(n,n),"top-right":new l.P(-n,n),bottom:new l.P(0,-v),"bottom-left":new l.P(n,-n),"bottom-right":new l.P(-n,-n),left:new l.P(v,0),right:new l.P(-v,0)}}if(v instanceof l.P||Array.isArray(v)){const n=l.P.convert(v);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:l.P.convert(v.center||[0,0]),top:l.P.convert(v.top||[0,0]),"top-left":l.P.convert(v["top-left"]||[0,0]),"top-right":l.P.convert(v["top-right"]||[0,0]),bottom:l.P.convert(v.bottom||[0,0]),"bottom-left":l.P.convert(v["bottom-left"]||[0,0]),"bottom-right":l.P.convert(v["bottom-right"]||[0,0]),left:l.P.convert(v.left||[0,0]),right:l.P.convert(v.right||[0,0])}}return Yt(new l.P(0,0))}const sr=w;d.AJAXError=l.bg,d.Evented=l.E,d.LngLat=l.N,d.MercatorCoordinate=l.Z,d.Point=l.P,d.addProtocol=l.bh,d.config=l.a,d.removeProtocol=l.bi,d.AttributionControl=Bl,d.BoxZoomHandler=oa,d.CanvasSource=tt,d.CooperativeGesturesHandler=Mo,d.DoubleClickZoomHandler=qf,d.DragPanHandler=fo,d.DragRotateHandler=Co,d.EdgeInsets=H,d.FullscreenControl=class extends l.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var n;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=u==null?void 0:u.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=N,d.GeolocateControl=class extends l.E{constructor(v){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const u=new l.N(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,g=this._map.getBearing(),_=l.e({bearing:g},this.options.fitBoundsOptions),A=et.fromLngLat(u,p);this._map.fitBounds(A,_,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const u=new l.N(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Nl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=n=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",n===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Qr({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))})}},this.options=l.e({},Kc,v)}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return l._(this,arguments,void 0,function*(n=!1){if(sa!==void 0&&!n)return sa;if(window.navigator.permissions===void 0)return sa=!!window.navigator.geolocation,sa;try{sa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{sa=!!window.navigator.geolocation}return sa})}().then(n=>this._setupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Dl=0,Nl=!1}_isOutOfMapMaxBounds(v){const n=this._map.getMaxBounds(),u=v.coords;return n&&(u.longitude<n.getWest()||u.longitude>n.getEast()||u.latitude<n.getSouth()||u.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),n=v.getSouthEast(),u=v.getNorthEast(),p=n.distanceTo(u),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Dl--,Nl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Dl++,Dl>1?(v={maximumAge:6e5,timeout:0},Nl=!0):(v=this.options.positionOptions,Nl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=kt,d.ImageSource=_e,d.KeyboardHandler=Hf,d.LngLatBounds=et,d.LogoControl=ss,d.Map=class extends V0{constructor(v){l.be.mark(l.bf.create);const n=Object.assign(Object.assign({},G0),v);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(n.maxPitch!=null&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ue(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new $t,this._controls=[],this._mapId=l.a4(),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=n.preserveDrawingBuffer===!0,this._antialias=n.antialias===!0,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles===!0,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions===!0,this._collectResourceTiming=n.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Lt),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=n.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new se(n.transformRequest),typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const p=ut(g=>{this._trackResize&&!this._removed&&this.resize(g)._update()},50);this._resizeObserver=new ResizeObserver(g=>{u?p(g):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new U0(this,n),this._hash=n.hash&&new kt(typeof n.hash=="string"&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,l.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Bl(typeof n.attributionControl=="boolean"?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new ss,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new l.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new l.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new l.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(v,n){if(n===void 0&&(n=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[n];return n.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(v);return n>-1&&this._controls.splice(n,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,n,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,n,u,p)}resize(v){var n;const u=this._containerDimensions(),p=u[0],g=u[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const O=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,O),this.painter.resize(p,g,O)}this.transform.resize(p,g),(n=this._requestedCameraState)===null||n===void 0||n.resize(p,g);const A=!this._moving;return A&&(this.stop(),this.fire(new l.k("movestart",v)).fire(new l.k("move",v))),this.fire(new l.k("resize",v)),A&&this.fire(new l.k("moveend",v)),this}_getClampedPixelRatio(v,n){const{0:u,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=v*g,A=n*g;return Math.min(_>u?u/_:1,A>p?p/A:1)*g}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(et.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(l.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(l.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,n,u){if(v==="mouseenter"||v==="mouseover"){let p=!1;return{layer:n,listener:u,delegates:{mousemove:_=>{const A=this.getLayer(n)?this.queryRenderedFeatures(_.point,{layers:[n]}):[];A.length?p||(p=!0,u.call(this,new $r(v,this,_.originalEvent,{features:A}))):p=!1},mouseout:()=>{p=!1}}}}if(v==="mouseleave"||v==="mouseout"){let p=!1;return{layer:n,listener:u,delegates:{mousemove:A=>{(this.getLayer(n)?this.queryRenderedFeatures(A.point,{layers:[n]}):[]).length?p=!0:p&&(p=!1,u.call(this,new $r(v,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,u.call(this,new $r(v,this,A.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(n)?this.queryRenderedFeatures(g.point,{layers:[n]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:n,listener:u,delegates:{[v]:p}}}}on(v,n,u){if(u===void 0)return super.on(v,n);const p=this._createDelegatedListener(v,n,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(v,n,u){if(u===void 0)return super.once(v,n);const p=this._createDelegatedListener(v,n,u);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(v,n,u){return u===void 0?super.off(v,n):(this._delegatedListeners&&this._delegatedListeners[v]&&(p=>{const g=this._delegatedListeners[v];for(let _=0;_<g.length;_++){const A=g[_];if(A.layer===n&&A.listener===u){for(const M in A.delegates)this.off(M,A.delegates[M]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(v,n){if(!this.style)return[];let u;const p=v instanceof l.P||Array.isArray(v),g=p?v:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(p?{}:v)||{},g instanceof l.P||typeof g[0]=="number")u=[l.P.convert(g)];else{const _=l.P.convert(g[0]),A=l.P.convert(g[1]);u=[_,new l.P(A.x,_.y),A,new l.P(_.x,A.y),_]}return this.style.queryRenderedFeatures(u,n,this.transform)}querySourceFeatures(v,n){return this.style.querySourceFeatures(v,n)}setStyle(v,n){return(n=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(v,n))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const n=this._locale[v];if(n==null)throw new Error(`Missing UI string '${v}'`);return n}_updateStyle(v,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,n));const u=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new ku(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,n,u):this.style.loadJSON(v,n,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ku(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,n){if(typeof v=="string"){const u=this._requestManager.transformRequest(v,"Style");l.h(u,new AbortController).then(p=>{this._updateDiff(p.data,n)}).catch(p=>{p&&this.fire(new l.j(p))})}else typeof v=="object"&&this._updateDiff(v,n)}_updateDiff(v,n){try{this.style.setState(v,n)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(v,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(v,n){return this._lazyInitEmptyStyle(),this.style.addSource(v,n),this._update(!0)}isSourceLoaded(v){const n=this.style&&this.style.sourceCaches[v];if(n!==void 0)return n.loaded();this.fire(new l.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const n=this.style.sourceCaches[v.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&n.reload();for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===v.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lm(this.painter,n,v),this.painter.renderToTexture=new um(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:v})),this}getTerrain(){var v,n;return(n=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const n in v){const u=v[n]._tiles;for(const p in u){const g=u[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,n,u={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:$}=u;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||l.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:Q,data:pe}=n,we=n;return this.style.addImage(v,{data:new l.R({width:te,height:Q},new Uint8Array(pe)),pixelRatio:p,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:$,sdf:g,version:0,userImage:we}),we.onAdd&&we.onAdd(this,v),this}}{const{width:te,height:Q,data:pe}=b.getImageData(n);this.style.addImage(v,{data:new l.R({width:te,height:Q},pe),pixelRatio:p,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:$,sdf:g,version:0})}}updateImage(v,n){const u=this.style.getImage(v);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=n instanceof HTMLImageElement||l.b(n)?b.getImageData(n):n,{width:g,height:_,data:A}=p;if(g===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(n instanceof HTMLImageElement||l.b(n));return u.data.replace(A,M),this.style.updateImage(v,u),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return G.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,n){return this._lazyInitEmptyStyle(),this.style.addLayer(v,n),this._update(!0)}moveLayer(v,n){return this.style.moveLayer(v,n),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,n,u){return this.style.setLayerZoomRange(v,n,u),this._update(!0)}setFilter(v,n,u={}){return this.style.setFilter(v,n,u),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,n,u,p={}){return this.style.setPaintProperty(v,n,u,p),this._update(!0)}getPaintProperty(v,n){return this.style.getPaintProperty(v,n)}setLayoutProperty(v,n,u,p={}){return this.style.setLayoutProperty(v,n,u,p),this._update(!0)}getLayoutProperty(v,n){return this.style.getLayoutProperty(v,n)}setGlyphs(v,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,n,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,n,u,p=>{p||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,n,u=>{u||this._update(!0)}),this}setLight(v,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,n){return this.style.setFeatureState(v,n),this._update()}removeFeatureState(v,n){return this.style.removeFeatureState(v,n),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,n=0;return this._container&&(v=this._container.clientWidth||400,n=this._container.clientHeight||300),[v,n]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const n=this._canvasContainer=T.create("div","maplibregl-canvas-container",v);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const g=this._controlContainer=T.create("div","maplibregl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{_[A]=T.create("div",`maplibregl-ctrl-${A} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,n,u){this._canvas.width=Math.floor(u*v),this._canvas.height=Math.floor(u*n),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{n={requestedAttributes:v},p&&(n.statusMessage=p.statusMessage,n.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!u){const p="Failed to initialize WebGL";throw n?(n.message=p,new Error(JSON.stringify(n))):new Error(p)}this.painter=new Vu(u,this.transform),R.testSupport(u)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=b.now();this.style.zoomHistory.update(g,_);const A=new l.a9(g,{now:_,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),M=A.crossFadingFactor();M===1&&M===this._crossFadingFactor||(u=!0,this._crossFadingFactor=M),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.be.mark(l.bf.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,l.be.mark(l.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.be.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(v=>{l.be.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return ed}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=$r,d.MapTouchEvent=mn,d.MapWheelEvent=ho,d.Marker=Qr,d.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const n=this._map.getZoom(),u=n===this._map.getMaxZoom(),p=n===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);n.title=p,n.setAttribute("aria-label",p)},this.options=l.e({},td,v),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,n){const u=T.create("button",v,this._container);return u.type="button",u.addEventListener("click",n),u}},d.Popup=class extends l.E{constructor(v){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{var u;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?fm(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._trackPointer&&!n)return;const p=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const _=Yt(this.options.offset);if(!g){const M=this._container.offsetWidth,O=this._container.offsetHeight;let $;$=p.y+_.bottom.y<O?["top"]:p.y>this._map.transform.height-O?["bottom"]:[],p.x<M/2?$.push("left"):p.x>this._map.transform.width-M/2&&$.push("right"),g=$.length===0?"bottom":$.join("-")}let A=p.add(_[g]);this.options.subpixelPositioning||(A=A.round()),T.setTransform(this._container,`${rd[g]} translate(${A.x}px,${A.y}px)`),aa(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(ls),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=l.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const n=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=v;p=u.firstChild,p;)n.appendChild(p);return this.setDOMContent(n)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Jc);v&&v.focus()}},d.RasterDEMTileSource=Se,d.RasterTileSource=Vt,d.ScaleControl=class{constructor(v){this._onMove=()=>{nd(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,nd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},dm),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Xf,d.Style=ku,d.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Wf,d.TwoFingersTouchRotateHandler=Gf,d.TwoFingersTouchZoomHandler=Uf,d.TwoFingersTouchZoomRotateHandler=Kf,d.VectorTileSource=lr,d.VideoSource=Xe,d.addSourceType=(v,n)=>l._(void 0,void 0,void 0,function*(){if(ue(v))throw new Error(`A source type called "${v}" already exists.`);((u,p)=>{ht[u]=p})(v,n)}),d.clearPrewarmedResources=function(){const v=it;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Fe),it=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return Ve().getRTLTextPluginStatus()},d.getVersion=function(){return sr},d.getWorkerCount=function(){return He.workerCount},d.getWorkerUrl=function(){return l.a.WORKER_URL},d.importScriptInWorkers=function(v){return pt().broadcast("IS",v)},d.prewarm=function(){vt().acquire(Fe)},d.setMaxParallelImageRequests=function(v){l.a.MAX_PARALLEL_IMAGE_REQUESTS=v},d.setRTLTextPlugin=function(v,n){return Ve().setRTLTextPlugin(v,n)},d.setWorkerCount=function(v){He.workerCount=v},d.setWorkerUrl=function(v){l.a.WORKER_URL=v}});var f=i;return f})})(kM);var FM=kM.exports;const RM=vf(FM),xz=XF({__proto__:null,default:RM},[FM]),wz="modulepreload",bz=function(e){return"/osm-address-editor-vite/"+e},uT={},Sz=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const f=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),l=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));c=Promise.all(i.map(w=>{if(w=bz(w),w in uT)return;uT[w]=!0;const E=w.endsWith(".css"),C=E?'[rel="stylesheet"]':"";if(!!a)for(let R=f.length-1;R>=0;R--){const L=f[R];if(L.href===w&&(!E||L.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${C}`))return;const T=document.createElement("link");if(T.rel=E?"stylesheet":wz,E||(T.as="script",T.crossOrigin=""),T.href=w,l&&T.setAttribute("nonce",l),document.head.appendChild(T),E)return new Promise((R,L)=>{T.addEventListener("load",R),T.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${w}`)))})}))}return c.then(()=>t()).catch(f=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=f,window.dispatchEvent(d),!d.defaultPrevented)throw f})},Ez=yt.createContext(null);function Tz(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===f}function Vo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Vo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Vo(e[c],t[c]))return!1;return!0}return!1}function Pz(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function cT(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Vo(i,a)||t.setProjection(i)}function hT(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function fT(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const Az=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function dT(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const f=t[a.ref];if(f){c=c||Object.assign({},a),delete c.ref;for(const d of Az)d in f&&(c[d]=f[d])}return c||a});return{...e,layers:i}}var pT={};const mT={version:8,sources:{},layers:[]},gT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},a_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},yT={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Iz=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Cz=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class af{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const f=this.props[yT[c.type]];f?f(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const f=this.props[gT[c.type]];f&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),f(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const f=this.props[a_[c.type]];f&&f(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=af.savedMaps.pop();if(!a)return null;const c=a.map,f=c.getContainer();for(i.className=f.className;f.childNodes.length>0;)i.appendChild(f.childNodes[0]);c._container=i;const d=c._resizeObserver;d&&(d.disconnect(),d.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=mT}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||Mz()||null,container:t,style:dT(a)},f=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[f.longitude||0,f.latitude||0],zoom:f.zoom||0,pitch:f.pitch||0,bearing:f.bearing||0}),i.gl){const C=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=C,i.gl)}const d=new this._MapClass(c);f.padding&&d.setPadding(f.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const l=d._render;d._render=C=>{this._inRender=!0,l.call(d,C),this._inRender=!1};const w=d._renderTaskQueue.run;d._renderTaskQueue.run=C=>{w.call(d._renderTaskQueue,C),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const E=d.fire;d.fire=this._fireEvent.bind(this,E),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>{this._updateStyleComponents(this.props,{}),cT(d.transform,this._renderTransform)}),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const C in gT)d.on(C,this._onPointerEvent);for(const C in a_)d.on(C,this._onCameraEvent);for(const C in yT)d.on(C,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),af.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=Pz(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:f,pitch:d,bearing:l}=c,w=a.isMoving();w&&(c.cameraElevationReference="sea");const E=fT(c,{...hT(a.transform),...t});if(w&&(c.cameraElevationReference="ground"),E&&i){const C=this._deferredEvents;C.move=!0,C.zoom||(C.zoom=f!==c.zoom),C.rotate||(C.rotate=l!==c.bearing),C.pitch||(C.pitch=d!==c.pitch)}return w||fT(a.transform,t),E}_updateSettings(t,i){const a=this._map;let c=!1;for(const f of Iz)if(f in t&&!Vo(t[f],i[f])){c=!0;const d=a[`set${f[0].toUpperCase()}${f.slice(1)}`];d==null||d.call(a,t[f])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=mT,styleDiffing:c=!0}=t,f={diff:c};return"localIdeographFontFamily"in t&&(f.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(dT(a),f),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Vo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Vo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Vo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const f=this._map;let d=!1;for(const l of Cz){const w=(a=t[l])!==null&&a!==void 0?a:!0,E=(c=i[l])!==null&&c!==void 0?c:!0;Vo(w,E)||(d=!0,w?f[l].enable(w):f[l].disable())}return d}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const f=t.type,d=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),w=l.length>0;!w&&d&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,w&&!d&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,f=c.transform,d=typeof i=="string"?i:i.type;return d==="move"&&this._updateViewState(this.props,!1),d in a_&&(typeof i=="object"&&(i.viewState=hT(f)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=f,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{cT(this._renderTransform,i),t.transform=i}}}af.savedMaps=[];function Mz(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||pT.MapboxAccessToken}catch{}try{e=e||pT.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const kz=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Oz(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const f=t.project(a);return t.transform=c,f},unproject:a=>{const c=t.transform;t.transform=e.transform;const f=t.unproject(a);return t.transform=c,f},queryTerrainElevation:(a,c)=>{const f=t.transform;t.transform=e.transform;const d=t.queryTerrainElevation(a,c);return t.transform=f,d},queryRenderedFeatures:(a,c)=>{const f=t.transform;t.transform=e.transform;const d=t.queryRenderedFeatures(a,c);return t.transform=f,d}};for(const a of Fz(t))!(a in i)&&!kz.includes(a)&&(i[a]=t[a].bind(t));return i}function Fz(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const Rz=typeof document<"u"?yt.useLayoutEffect:yt.useEffect,jz=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function zz(e,t){for(const a of jz)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const bf=yt.createContext(null);function Lz(e,t,i){const a=yt.useContext(Ez),[c,f]=yt.useState(null),d=yt.useRef(),{current:l}=yt.useRef({mapLib:null,map:null});yt.useEffect(()=>{const C=e.mapLib;let b=!0,T;return Promise.resolve(C||i).then(R=>{if(!b)return;if(!R)throw new Error("Invalid mapLib");const L="Map"in R?R:R.default;if(!L.Map)throw new Error("Invalid mapLib");if(zz(L,e),!L.supported||L.supported(e))e.reuseMaps&&(T=af.reuse(e,d.current)),T||(T=new af(L.Map,e,d.current)),l.map=Oz(T),l.mapLib=L,f(T),a==null||a.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:L}=e;L?L({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{b=!1,T&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),Rz(()=>{c&&c.setProps(e)}),yt.useImperativeHandle(t,()=>l.map,[c]);const w=yt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),E={height:"100%"};return yt.createElement("div",{id:e.id,ref:d,style:w},c&&yt.createElement(bf.Provider,{value:l},yt.createElement("div",{"mapboxgl-children":"",style:E},e.children)))}const Bz=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ic(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!Bz.test(a)?i[a]=`${c}px`:i[a]=c}}function Dz(e,t){const{map:i,mapLib:a}=yt.useContext(bf),c=yt.useRef({props:e});c.current.props=e;const f=yt.useMemo(()=>{let j=!1;yt.Children.forEach(e.children,Z=>{Z&&(j=!0)});const le={...e,element:j?document.createElement("div"):null},K=new a.Marker(le);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",Z=>{var G,se;(se=(G=c.current.props).onClick)===null||se===void 0||se.call(G,{type:"click",target:K,originalEvent:Z})}),K.on("dragstart",Z=>{var G,se;const q=Z;q.lngLat=f.getLngLat(),(se=(G=c.current.props).onDragStart)===null||se===void 0||se.call(G,q)}),K.on("drag",Z=>{var G,se;const q=Z;q.lngLat=f.getLngLat(),(se=(G=c.current.props).onDrag)===null||se===void 0||se.call(G,q)}),K.on("dragend",Z=>{var G,se;const q=Z;q.lngLat=f.getLngLat(),(se=(G=c.current.props).onDragEnd)===null||se===void 0||se.call(G,q)}),K},[]);yt.useEffect(()=>(f.addTo(i.getMap()),()=>{f.remove()}),[]);const{longitude:d,latitude:l,offset:w,style:E,draggable:C=!1,popup:b=null,rotation:T=0,rotationAlignment:R="auto",pitchAlignment:L="auto"}=e;return yt.useEffect(()=>{Ic(f.getElement(),E)},[E]),yt.useImperativeHandle(t,()=>f,[]),(f.getLngLat().lng!==d||f.getLngLat().lat!==l)&&f.setLngLat([d,l]),w&&!Tz(f.getOffset(),w)&&f.setOffset(w),f.isDraggable()!==C&&f.setDraggable(C),f.getRotation()!==T&&f.setRotation(T),f.getRotationAlignment()!==R&&f.setRotationAlignment(R),f.getPitchAlignment()!==L&&f.setPitchAlignment(L),f.getPopup()!==b&&f.setPopup(b),cb.createPortal(e.children,f.getElement())}const Nz=yt.memo(yt.forwardRef(Dz));function vT(e){return new Set(e?e.trim().split(/\s+/):[])}function $z(e,t){const{map:i,mapLib:a}=yt.useContext(bf),c=yt.useMemo(()=>document.createElement("div"),[]),f=yt.useRef({props:e});f.current.props=e;const d=yt.useMemo(()=>{const l={...e},w=new a.Popup(l);return w.setLngLat([e.longitude,e.latitude]),w.once("open",E=>{var C,b;(b=(C=f.current.props).onOpen)===null||b===void 0||b.call(C,E)}),w},[]);if(yt.useEffect(()=>{const l=w=>{var E,C;(C=(E=f.current.props).onClose)===null||C===void 0||C.call(E,w)};return d.on("close",l),d.setDOMContent(c).addTo(i.getMap()),()=>{d.off("close",l),d.isOpen()&&d.remove()}},[]),yt.useEffect(()=>{Ic(d.getElement(),e.style)},[e.style]),yt.useImperativeHandle(t,()=>d,[]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!Vo(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const l=vT(d.options.className),w=vT(e.className);for(const E of l)w.has(E)||d.removeClassName(E);for(const E of w)l.has(E)||d.addClassName(E);d.options.className=e.className}return cb.createPortal(e.children,c)}yt.memo(yt.forwardRef($z));function Zp(e,t,i,a){const c=yt.useContext(bf),f=yt.useMemo(()=>e(c),[]);return yt.useEffect(()=>{const d=a||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,w=typeof i=="function"?i:typeof t=="function"?t:null,{map:E}=c;return E.hasControl(f)||(E.addControl(f,d==null?void 0:d.position),l&&l(c)),()=>{w&&w(c),E.hasControl(f)&&E.removeControl(f)}},[]),f}function Uz(e){const t=Zp(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return yt.useEffect(()=>{Ic(t._container,e.style)},[e.style]),null}yt.memo(Uz);function Vz(e){const t=Zp(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.useEffect(()=>{Ic(t._controlContainer,e.style)},[e.style]),null}yt.memo(Vz);function Gz(e,t){const i=yt.useRef({props:e}),a=Zp(({mapLib:c})=>{const f=new c.GeolocateControl(e),d=f._setupUI;return f._setupUI=l=>{f._container.hasChildNodes()||d(l)},f.on("geolocate",l=>{var w,E;(E=(w=i.current.props).onGeolocate)===null||E===void 0||E.call(w,l)}),f.on("error",l=>{var w,E;(E=(w=i.current.props).onError)===null||E===void 0||E.call(w,l)}),f.on("outofmaxbounds",l=>{var w,E;(E=(w=i.current.props).onOutOfMaxBounds)===null||E===void 0||E.call(w,l)}),f.on("trackuserlocationstart",l=>{var w,E;(E=(w=i.current.props).onTrackUserLocationStart)===null||E===void 0||E.call(w,l)}),f.on("trackuserlocationend",l=>{var w,E;(E=(w=i.current.props).onTrackUserLocationEnd)===null||E===void 0||E.call(w,l)}),f},{position:e.position});return i.current.props=e,yt.useImperativeHandle(t,()=>a,[]),yt.useEffect(()=>{Ic(a._container,e.style)},[e.style]),null}const Wz=yt.memo(yt.forwardRef(Gz));function Hz(e){const t=Zp(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return yt.useEffect(()=>{Ic(t._container,e.style)},[e.style]),null}const Zz=yt.memo(Hz);function Xz(e){const t=Zp(({mapLib:f})=>new f.ScaleControl(e),{position:e.position}),i=yt.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),yt.useEffect(()=>{Ic(t._container,c)},[c]),null}yt.memo(Xz);function yy(e,t){if(!e)throw new Error(t)}function qz(e,t,i,a){if(yy(i.id===a.id,"layer id changed"),yy(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:f={},filter:d,minzoom:l,maxzoom:w,beforeId:E}=i;if(E!==a.beforeId&&e.moveLayer(t,E),c!==a.layout){const C=a.layout||{};for(const b in c)Vo(c[b],C[b])||e.setLayoutProperty(t,b,c[b]);for(const b in C)c.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(f!==a.paint){const C=a.paint||{};for(const b in f)Vo(f[b],C[b])||e.setPaintProperty(t,b,f[b]);for(const b in C)f.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}Vo(d,a.filter)||e.setFilter(t,d),(l!==a.minzoom||w!==a.maxzoom)&&e.setLayerZoomRange(t,l,w)}function Kz(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let Jz=0;function Yz(e){const t=yt.useContext(bf).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-layer-${Jz++}`,[]);if(yt.useEffect(()=>{if(t){const d=()=>a(l=>l+1);return t.on("styledata",d),d(),()=>{t.off("styledata",d),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{qz(t,c,e,i.current)}catch(d){console.warn(d)}else Kz(t,c,e);return i.current=e,null}let Qz=0;function eL(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function tL(e,t,i){yy(t.id===i.id,"source id changed"),yy(t.type===i.type,"source type changed");let a="",c=0;for(const d in t)d!=="children"&&d!=="id"&&!Vo(i[d],t[d])&&(a=d,c++);if(!c)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function rL(e){const t=yt.useContext(bf).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-source-${Qz++}`,[]);yt.useEffect(()=>{if(t){const d=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",d),d(),()=>{var l;if(t.off("styledata",d),t.style&&t.style._loaded&&t.getSource(c)){const w=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(w)for(const E of w)E.source===c&&t.removeLayer(E.id);t.removeSource(c)}}}},[t]);let f=t&&t.style&&t.getSource(c);return f?tL(f,e,i.current):f=eL(t,c,e),i.current=e,f&&yt.Children.map(e.children,d=>d&&yt.cloneElement(d,{source:c}))||null}const nL=Sz(()=>Promise.resolve().then(()=>xz),void 0),iL=yt.forwardRef(function(t,i){return Lz(t,i,nL)}),oL=Nz,sL=Zz,aL=Wz,lL=Yz,uL=rL,_T=()=>{};let hb={},jM={},zM=null,LM={mark:_T,measure:_T};try{typeof window<"u"&&(hb=window),typeof document<"u"&&(jM=document),typeof MutationObserver<"u"&&(zM=MutationObserver),typeof performance<"u"&&(LM=performance)}catch{}const{userAgent:xT=""}=hb.navigator||{},wu=hb,_n=jM,wT=zM,rg=LM;wu.document;const vl=!!_n.documentElement&&!!_n.head&&typeof _n.addEventListener=="function"&&typeof _n.createElement=="function",BM=~xT.indexOf("MSIE")||~xT.indexOf("Trident/");var Tn="classic",DM="duotone",Ho="sharp",Zo="sharp-duotone",cL=[Tn,DM,Ho,Zo],hL={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds"}},bT={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},fL=["kit"],dL=/fa(s|r|l|t|d|b|k|kd|ss|sr|sl|st|sds)?[\-\ ]/,pL=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,mL={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},gL={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds"}},yL={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds"}},vL={classic:["fas","far","fal","fat"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds"]},_L={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid"}},xL={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds"}},NM={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid"}},wL=["solid","regular","light","thin","duotone","brands"],$M=[1,2,3,4,5,6,7,8,9,10],bL=$M.concat([11,12,13,14,15,16,17,18,19,20]),Ud={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},SL=[...Object.keys(vL),...wL,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ud.GROUP,Ud.SWAP_OPACITY,Ud.PRIMARY,Ud.SECONDARY].concat($M.map(e=>"".concat(e,"x"))).concat(bL.map(e=>"w-".concat(e))),EL={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},TL={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},PL={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},ST={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}};const pl="___FONT_AWESOME___",Q1=16,UM="fa",VM="svg-inline--fa",bc="data-fa-i2svg",ex="data-fa-pseudo-element",AL="data-fa-pseudo-element-pending",fb="data-prefix",db="data-icon",ET="fontawesome-i2svg",IL="async",CL=["HTML","HEAD","STYLE","SCRIPT"],GM=(()=>{try{return!0}catch{return!1}})(),WM=[Tn,Ho,Zo];function Xp(e){return new Proxy(e,{get(t,i){return i in t?t[i]:t[Tn]}})}const HM={...NM};HM[Tn]={...NM[Tn],...bT.kit,...bT["kit-duotone"]};const dc=Xp(HM),tx={...xL};tx[Tn]={...tx[Tn],...ST.kit,...ST["kit-duotone"]};const Rp=Xp(tx),rx={..._L};rx[Tn]={...rx[Tn],...PL.kit};const pc=Xp(rx),nx={...yL};nx[Tn]={...nx[Tn],...TL.kit};const ML=Xp(nx),kL=dL,ZM="fa-layers-text",OL=pL,FL={...hL};Xp(FL);const RL=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],l_=Ud,lf=new Set;Object.keys(Rp[Tn]).map(lf.add.bind(lf));Object.keys(Rp[Ho]).map(lf.add.bind(lf));Object.keys(Rp[Zo]).map(lf.add.bind(lf));const jL=[...fL,...SL],ap=wu.FontAwesomeConfig||{};function zL(e){var t=_n.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function LL(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}_n&&typeof _n.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[i,a]=t;const c=LL(zL(i));c!=null&&(ap[a]=c)});const XM={styleDefault:"solid",familyDefault:"classic",cssPrefix:UM,replacementClass:VM,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ap.familyPrefix&&(ap.cssPrefix=ap.familyPrefix);const uf={...XM,...ap};uf.autoReplaceSvg||(uf.observeMutations=!1);const ir={};Object.keys(XM).forEach(e=>{Object.defineProperty(ir,e,{enumerable:!0,set:function(t){uf[e]=t,lp.forEach(i=>i(ir))},get:function(){return uf[e]}})});Object.defineProperty(ir,"familyPrefix",{enumerable:!0,set:function(e){uf.cssPrefix=e,lp.forEach(t=>t(ir))},get:function(){return uf.cssPrefix}});wu.FontAwesomeConfig=ir;const lp=[];function BL(e){return lp.push(e),()=>{lp.splice(lp.indexOf(e),1)}}const Ql=Q1,Sa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function DL(e){if(!e||!vl)return;const t=_n.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const i=_n.head.childNodes;let a=null;for(let c=i.length-1;c>-1;c--){const f=i[c],d=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(d)>-1&&(a=f)}return _n.head.insertBefore(t,a),e}const NL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function jp(){let e=12,t="";for(;e-- >0;)t+=NL[Math.random()*62|0];return t}function Sf(e){const t=[];for(let i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function pb(e){return e.classList?Sf(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function qM(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $L(e){return Object.keys(e||{}).reduce((t,i)=>t+"".concat(i,'="').concat(qM(e[i]),'" '),"").trim()}function S0(e){return Object.keys(e||{}).reduce((t,i)=>t+"".concat(i,": ").concat(e[i].trim(),";"),"")}function mb(e){return e.size!==Sa.size||e.x!==Sa.x||e.y!==Sa.y||e.rotate!==Sa.rotate||e.flipX||e.flipY}function UL(e){let{transform:t,containerWidth:i,iconWidth:a}=e;const c={transform:"translate(".concat(i/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),d="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),w={transform:"".concat(f," ").concat(d," ").concat(l)},E={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:w,path:E}}function VL(e){let{transform:t,width:i=Q1,height:a=Q1,startCentered:c=!1}=e,f="";return c&&BM?f+="translate(".concat(t.x/Ql-i/2,"em, ").concat(t.y/Ql-a/2,"em) "):c?f+="translate(calc(-50% + ".concat(t.x/Ql,"em), calc(-50% + ").concat(t.y/Ql,"em)) "):f+="translate(".concat(t.x/Ql,"em, ").concat(t.y/Ql,"em) "),f+="scale(".concat(t.size/Ql*(t.flipX?-1:1),", ").concat(t.size/Ql*(t.flipY?-1:1),") "),f+="rotate(".concat(t.rotate,"deg) "),f}var GL=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function KM(){const e=UM,t=VM,i=ir.cssPrefix,a=ir.replacementClass;let c=GL;if(i!==e||a!==t){const f=new RegExp("\\.".concat(e,"\\-"),"g"),d=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");c=c.replace(f,".".concat(i,"-")).replace(d,"--".concat(i,"-")).replace(l,".".concat(a))}return c}let TT=!1;function u_(){ir.autoAddCss&&!TT&&(DL(KM()),TT=!0)}var WL={mixout(){return{dom:{css:KM,insertCss:u_}}},hooks(){return{beforeDOMElementCreation(){u_()},beforeI2svg(){u_()}}}};const ml=wu||{};ml[pl]||(ml[pl]={});ml[pl].styles||(ml[pl].styles={});ml[pl].hooks||(ml[pl].hooks={});ml[pl].shims||(ml[pl].shims=[]);var Ea=ml[pl];const JM=[],YM=function(){_n.removeEventListener("DOMContentLoaded",YM),vy=1,JM.map(e=>e())};let vy=!1;vl&&(vy=(_n.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(_n.readyState),vy||_n.addEventListener("DOMContentLoaded",YM));function HL(e){vl&&(vy?setTimeout(e,0):JM.push(e))}function qp(e){const{tag:t,attributes:i={},children:a=[]}=e;return typeof e=="string"?qM(e):"<".concat(t," ").concat($L(i),">").concat(a.map(qp).join(""),"</").concat(t,">")}function PT(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var ZL=function(t,i){return function(a,c,f,d){return t.call(i,a,c,f,d)}},c_=function(t,i,a,c){var f=Object.keys(t),d=f.length,l=c!==void 0?ZL(i,c):i,w,E,C;for(a===void 0?(w=1,C=t[f[0]]):(w=0,C=a);w<d;w++)E=f[w],C=l(C,t[E],E,t);return C};function XL(e){const t=[];let i=0;const a=e.length;for(;i<a;){const c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){const f=e.charCodeAt(i++);(f&64512)==56320?t.push(((c&1023)<<10)+(f&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function ix(e){const t=XL(e);return t.length===1?t[0].toString(16):null}function qL(e,t){const i=e.length;let a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function AT(e){return Object.keys(e).reduce((t,i)=>{const a=e[i];return!!a.icon?t[a.iconName]=a.icon:t[i]=a,t},{})}function ox(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:a=!1}=i,c=AT(t);typeof Ea.hooks.addPack=="function"&&!a?Ea.hooks.addPack(e,AT(t)):Ea.styles[e]={...Ea.styles[e]||{},...c},e==="fas"&&ox("fa",t)}const{styles:ac,shims:KL}=Ea,JL={[Tn]:Object.values(pc[Tn]),[Ho]:Object.values(pc[Ho]),[Zo]:Object.values(pc[Zo])};let gb=null,QM={},ek={},tk={},rk={},nk={};const YL={[Tn]:Object.keys(dc[Tn]),[Ho]:Object.keys(dc[Ho]),[Zo]:Object.keys(dc[Zo])};function QL(e){return~jL.indexOf(e)}function e5(e,t){const i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!QL(c)?c:null}const ik=()=>{const e=a=>c_(ac,(c,f,d)=>(c[d]=c_(f,a,{}),c),{});QM=e((a,c,f)=>(c[3]&&(a[c[3]]=f),c[2]&&c[2].filter(l=>typeof l=="number").forEach(l=>{a[l.toString(16)]=f}),a)),ek=e((a,c,f)=>(a[f]=f,c[2]&&c[2].filter(l=>typeof l=="string").forEach(l=>{a[l]=f}),a)),nk=e((a,c,f)=>{const d=c[2];return a[f]=f,d.forEach(l=>{a[l]=f}),a});const t="far"in ac||ir.autoFetchSvg,i=c_(KL,(a,c)=>{const f=c[0];let d=c[1];const l=c[2];return d==="far"&&!t&&(d="fas"),typeof f=="string"&&(a.names[f]={prefix:d,iconName:l}),typeof f=="number"&&(a.unicodes[f.toString(16)]={prefix:d,iconName:l}),a},{names:{},unicodes:{}});tk=i.names,rk=i.unicodes,gb=E0(ir.styleDefault,{family:ir.familyDefault})};BL(e=>{gb=E0(e.styleDefault,{family:ir.familyDefault})});ik();function yb(e,t){return(QM[e]||{})[t]}function t5(e,t){return(ek[e]||{})[t]}function lu(e,t){return(nk[e]||{})[t]}function ok(e){return tk[e]||{prefix:null,iconName:null}}function r5(e){const t=rk[e],i=yb("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function bu(){return gb}const vb=()=>({prefix:null,iconName:null,rest:[]});function E0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:i=Tn}=t,a=dc[i][e],c=Rp[i][e]||Rp[i][a],f=e in Ea.styles?e:null;return c||f||null}const n5={[Tn]:Object.keys(pc[Tn]),[Ho]:Object.keys(pc[Ho]),[Zo]:Object.keys(pc[Zo])};function T0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:i=!1}=t,a={[Tn]:"".concat(ir.cssPrefix,"-").concat(Tn),[Ho]:"".concat(ir.cssPrefix,"-").concat(Ho),[Zo]:"".concat(ir.cssPrefix,"-").concat(Zo)};let c=null,f=Tn;const d=cL.filter(w=>w!==DM);d.forEach(w=>{(e.includes(a[w])||e.some(E=>n5[w].includes(E)))&&(f=w)});const l=e.reduce((w,E)=>{const C=e5(ir.cssPrefix,E);if(ac[E]?(E=JL[f].includes(E)?ML[f][E]:E,c=E,w.prefix=E):YL[f].indexOf(E)>-1?(c=E,w.prefix=E0(E,{family:f})):C?w.iconName=C:E!==ir.replacementClass&&!d.some(b=>E===a[b])&&w.rest.push(E),!i&&w.prefix&&w.iconName){const b=c==="fa"?ok(w.iconName):{},T=lu(w.prefix,w.iconName);b.prefix&&(c=null),w.iconName=b.iconName||T||w.iconName,w.prefix=b.prefix||w.prefix,w.prefix==="far"&&!ac.far&&ac.fas&&!ir.autoFetchSvg&&(w.prefix="fas")}return w},vb());return(e.includes("fa-brands")||e.includes("fab"))&&(l.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(l.prefix="fad"),!l.prefix&&f===Ho&&(ac.fass||ir.autoFetchSvg)&&(l.prefix="fass",l.iconName=lu(l.prefix,l.iconName)||l.iconName),!l.prefix&&f===Zo&&(ac.fasds||ir.autoFetchSvg)&&(l.prefix="fasds",l.iconName=lu(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||c==="fa")&&(l.prefix=bu()||"fas"),l}class i5{constructor(){this.definitions={}}add(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];const c=i.reduce(this._pullDefinitions,{});Object.keys(c).forEach(f=>{this.definitions[f]={...this.definitions[f]||{},...c[f]},ox(f,c[f]);const d=pc[Tn][f];d&&ox(d,c[f]),ik()})}reset(){this.definitions={}}_pullDefinitions(t,i){const a=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(a).map(c=>{const{prefix:f,iconName:d,icon:l}=a[c],w=l[2];t[f]||(t[f]={}),w.length>0&&w.forEach(E=>{typeof E=="string"&&(t[f][E]=l)}),t[f][d]=l}),t}}let IT=[],Bh={};const qh={},o5=Object.keys(qh);function s5(e,t){let{mixoutsTo:i}=t;return IT=e,Bh={},Object.keys(qh).forEach(a=>{o5.indexOf(a)===-1&&delete qh[a]}),IT.forEach(a=>{const c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(f=>{typeof c[f]=="function"&&(i[f]=c[f]),typeof c[f]=="object"&&Object.keys(c[f]).forEach(d=>{i[f]||(i[f]={}),i[f][d]=c[f][d]})}),a.hooks){const f=a.hooks();Object.keys(f).forEach(d=>{Bh[d]||(Bh[d]=[]),Bh[d].push(f[d])})}a.provides&&a.provides(qh)}),i}function sx(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];return(Bh[e]||[]).forEach(d=>{t=d.apply(null,[t,...a])}),t}function Sc(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];(Bh[e]||[]).forEach(f=>{f.apply(null,i)})}function Su(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return qh[e]?qh[e].apply(null,t):void 0}function ax(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const i=e.prefix||bu();if(t)return t=lu(i,t)||t,PT(sk.definitions,i,t)||PT(Ea.styles,i,t)}const sk=new i5,a5=()=>{ir.autoReplaceSvg=!1,ir.observeMutations=!1,Sc("noAuto")},l5={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vl?(Sc("beforeI2svg",e),Su("pseudoElements2svg",e),Su("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;ir.autoReplaceSvg===!1&&(ir.autoReplaceSvg=!0),ir.observeMutations=!0,HL(()=>{c5({autoReplaceSvgRoot:t}),Sc("watch",e)})}},u5={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:lu(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=E0(e[0]);return{prefix:i,iconName:lu(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(ir.cssPrefix,"-"))>-1||e.match(kL))){const t=T0(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||bu(),iconName:lu(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=bu();return{prefix:t,iconName:lu(t,e)||e}}}},Jo={noAuto:a5,config:ir,dom:l5,parse:u5,library:sk,findIconDefinition:ax,toHtml:qp},c5=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=_n}=e;(Object.keys(Ea.styles).length>0||ir.autoFetchSvg)&&vl&&ir.autoReplaceSvg&&Jo.dom.i2svg({node:t})};function P0(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(i=>qp(i))}}),Object.defineProperty(e,"node",{get:function(){if(!vl)return;const i=_n.createElement("div");return i.innerHTML=e.html,i.children}}),e}function h5(e){let{children:t,main:i,mask:a,attributes:c,styles:f,transform:d}=e;if(mb(d)&&i.found&&!a.found){const{width:l,height:w}=i,E={x:l/w/2,y:.5};c.style=S0({...f,"transform-origin":"".concat(E.x+d.x/16,"em ").concat(E.y+d.y/16,"em")})}return[{tag:"svg",attributes:c,children:t}]}function f5(e){let{prefix:t,iconName:i,children:a,attributes:c,symbol:f}=e;const d=f===!0?"".concat(t,"-").concat(ir.cssPrefix,"-").concat(i):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:{...c,id:d},children:a}]}]}function _b(e){const{icons:{main:t,mask:i},prefix:a,iconName:c,transform:f,symbol:d,title:l,maskId:w,titleId:E,extra:C,watchable:b=!1}=e,{width:T,height:R}=i.found?i:t,L=a==="fak",j=[ir.replacementClass,c?"".concat(ir.cssPrefix,"-").concat(c):""].filter(q=>C.classes.indexOf(q)===-1).filter(q=>q!==""||!!q).concat(C.classes).join(" ");let le={children:[],attributes:{...C.attributes,"data-prefix":a,"data-icon":c,class:j,role:C.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(T," ").concat(R)}};const K=L&&!~C.classes.indexOf("fa-fw")?{width:"".concat(T/R*16*.0625,"em")}:{};b&&(le.attributes[bc]=""),l&&(le.children.push({tag:"title",attributes:{id:le.attributes["aria-labelledby"]||"title-".concat(E||jp())},children:[l]}),delete le.attributes.title);const Z={...le,prefix:a,iconName:c,main:t,mask:i,maskId:w,transform:f,symbol:d,styles:{...K,...C.styles}},{children:G,attributes:se}=i.found&&t.found?Su("generateAbstractMask",Z)||{children:[],attributes:{}}:Su("generateAbstractIcon",Z)||{children:[],attributes:{}};return Z.children=G,Z.attributes=se,d?f5(Z):h5(Z)}function CT(e){const{content:t,width:i,height:a,transform:c,title:f,extra:d,watchable:l=!1}=e,w={...d.attributes,...f?{title:f}:{},class:d.classes.join(" ")};l&&(w[bc]="");const E={...d.styles};mb(c)&&(E.transform=VL({transform:c,startCentered:!0,width:i,height:a}),E["-webkit-transform"]=E.transform);const C=S0(E);C.length>0&&(w.style=C);const b=[];return b.push({tag:"span",attributes:w,children:[t]}),f&&b.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),b}function d5(e){const{content:t,title:i,extra:a}=e,c={...a.attributes,...i?{title:i}:{},class:a.classes.join(" ")},f=S0(a.styles);f.length>0&&(c.style=f);const d=[];return d.push({tag:"span",attributes:c,children:[t]}),i&&d.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),d}const{styles:h_}=Ea;function lx(e){const t=e[0],i=e[1],[a]=e.slice(4);let c=null;return Array.isArray(a)?c={tag:"g",attributes:{class:"".concat(ir.cssPrefix,"-").concat(l_.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ir.cssPrefix,"-").concat(l_.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(ir.cssPrefix,"-").concat(l_.PRIMARY),fill:"currentColor",d:a[1]}}]}:c={tag:"path",attributes:{fill:"currentColor",d:a}},{found:!0,width:t,height:i,icon:c}}const p5={found:!1,width:512,height:512};function m5(e,t){!GM&&!ir.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function ux(e,t){let i=t;return t==="fa"&&ir.styleDefault!==null&&(t=bu()),new Promise((a,c)=>{if(i==="fa"){const f=ok(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&h_[t]&&h_[t][e]){const f=h_[t][e];return a(lx(f))}m5(e,t),a({...p5,icon:ir.showMissingIcons&&e?Su("missingIconAbstract")||{}:{}})})}const MT=()=>{},cx=ir.measurePerformance&&rg&&rg.mark&&rg.measure?rg:{mark:MT,measure:MT},Vd='FA "6.6.0"',g5=e=>(cx.mark("".concat(Vd," ").concat(e," begins")),()=>ak(e)),ak=e=>{cx.mark("".concat(Vd," ").concat(e," ends")),cx.measure("".concat(Vd," ").concat(e),"".concat(Vd," ").concat(e," begins"),"".concat(Vd," ").concat(e," ends"))};var xb={begin:g5,end:ak};const Cg=()=>{};function kT(e){return typeof(e.getAttribute?e.getAttribute(bc):null)=="string"}function y5(e){const t=e.getAttribute?e.getAttribute(fb):null,i=e.getAttribute?e.getAttribute(db):null;return t&&i}function v5(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(ir.replacementClass)}function _5(){return ir.autoReplaceSvg===!0?Mg.replace:Mg[ir.autoReplaceSvg]||Mg.replace}function x5(e){return _n.createElementNS("http://www.w3.org/2000/svg",e)}function w5(e){return _n.createElement(e)}function lk(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:i=e.tag==="svg"?x5:w5}=t;if(typeof e=="string")return _n.createTextNode(e);const a=i(e.tag);return Object.keys(e.attributes||[]).forEach(function(f){a.setAttribute(f,e.attributes[f])}),(e.children||[]).forEach(function(f){a.appendChild(lk(f,{ceFn:i}))}),a}function b5(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const Mg={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(i=>{t.parentNode.insertBefore(lk(i),t)}),t.getAttribute(bc)===null&&ir.keepOriginalSource){let i=_n.createComment(b5(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){const t=e[0],i=e[1];if(~pb(t).indexOf(ir.replacementClass))return Mg.replace(e);const a=new RegExp("".concat(ir.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){const f=i[0].attributes.class.split(" ").reduce((d,l)=>(l===ir.replacementClass||l.match(a)?d.toSvg.push(l):d.toNode.push(l),d),{toNode:[],toSvg:[]});i[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",f.toNode.join(" "))}const c=i.map(f=>qp(f)).join(`
`);t.setAttribute(bc,""),t.innerHTML=c}};function OT(e){e()}function uk(e,t){const i=typeof t=="function"?t:Cg;if(e.length===0)i();else{let a=OT;ir.mutateApproach===IL&&(a=wu.requestAnimationFrame||OT),a(()=>{const c=_5(),f=xb.begin("mutate");e.map(c),f(),i()})}}let wb=!1;function ck(){wb=!0}function hx(){wb=!1}let _y=null;function FT(e){if(!wT||!ir.observeMutations)return;const{treeCallback:t=Cg,nodeCallback:i=Cg,pseudoElementsCallback:a=Cg,observeMutationsRoot:c=_n}=e;_y=new wT(f=>{if(wb)return;const d=bu();Sf(f).forEach(l=>{if(l.type==="childList"&&l.addedNodes.length>0&&!kT(l.addedNodes[0])&&(ir.searchPseudoElements&&a(l.target),t(l.target)),l.type==="attributes"&&l.target.parentNode&&ir.searchPseudoElements&&a(l.target.parentNode),l.type==="attributes"&&kT(l.target)&&~RL.indexOf(l.attributeName))if(l.attributeName==="class"&&y5(l.target)){const{prefix:w,iconName:E}=T0(pb(l.target));l.target.setAttribute(fb,w||d),E&&l.target.setAttribute(db,E)}else v5(l.target)&&i(l.target)})}),vl&&_y.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function S5(){_y&&_y.disconnect()}function E5(e){const t=e.getAttribute("style");let i=[];return t&&(i=t.split(";").reduce((a,c)=>{const f=c.split(":"),d=f[0],l=f.slice(1);return d&&l.length>0&&(a[d]=l.join(":").trim()),a},{})),i}function T5(e){const t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"";let c=T0(pb(e));return c.prefix||(c.prefix=bu()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=t5(c.prefix,e.innerText)||yb(c.prefix,ix(e.innerText))),!c.iconName&&ir.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function P5(e){const t=Sf(e.attributes).reduce((c,f)=>(c.name!=="class"&&c.name!=="style"&&(c[f.name]=f.value),c),{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return ir.autoA11y&&(i?t["aria-labelledby"]="".concat(ir.replacementClass,"-title-").concat(a||jp()):(t["aria-hidden"]="true",t.focusable="false")),t}function A5(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Sa,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function RT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:i,prefix:a,rest:c}=T5(e),f=P5(e),d=sx("parseNodeAttributes",{},e);let l=t.styleParser?E5(e):[];return{iconName:i,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:a,transform:Sa,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:c,styles:l,attributes:f},...d}}const{styles:I5}=Ea;function hk(e){const t=ir.autoReplaceSvg==="nest"?RT(e,{styleParser:!1}):RT(e);return~t.extra.classes.indexOf(ZM)?Su("generateLayersText",e,t):Su("generateSvgReplacementMutation",e,t)}let Aa=new Set;WM.map(e=>{Aa.add("fa-".concat(e))});Object.keys(dc[Tn]).map(Aa.add.bind(Aa));Object.keys(dc[Ho]).map(Aa.add.bind(Aa));Object.keys(dc[Zo]).map(Aa.add.bind(Aa));Aa=[...Aa];function jT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!vl)return Promise.resolve();const i=_n.documentElement.classList,a=C=>i.add("".concat(ET,"-").concat(C)),c=C=>i.remove("".concat(ET,"-").concat(C)),f=ir.autoFetchSvg?Aa:WM.map(C=>"fa-".concat(C)).concat(Object.keys(I5));f.includes("fa")||f.push("fa");const d=[".".concat(ZM,":not([").concat(bc,"])")].concat(f.map(C=>".".concat(C,":not([").concat(bc,"])"))).join(", ");if(d.length===0)return Promise.resolve();let l=[];try{l=Sf(e.querySelectorAll(d))}catch{}if(l.length>0)a("pending"),c("complete");else return Promise.resolve();const w=xb.begin("onTree"),E=l.reduce((C,b)=>{try{const T=hk(b);T&&C.push(T)}catch(T){GM||T.name==="MissingIcon"&&console.error(T)}return C},[]);return new Promise((C,b)=>{Promise.all(E).then(T=>{uk(T,()=>{a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),w(),C()})}).catch(T=>{w(),b(T)})})}function C5(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;hk(e).then(i=>{i&&uk([i],t)})}function M5(e){return function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||{}).icon?t:ax(t||{});let{mask:c}=i;return c&&(c=(c||{}).icon?c:ax(c||{})),e(a,{...i,mask:c})}}const k5=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:i=Sa,symbol:a=!1,mask:c=null,maskId:f=null,title:d=null,titleId:l=null,classes:w=[],attributes:E={},styles:C={}}=t;if(!e)return;const{prefix:b,iconName:T,icon:R}=e;return P0({type:"icon",...e},()=>(Sc("beforeDOMElementCreation",{iconDefinition:e,params:t}),ir.autoA11y&&(d?E["aria-labelledby"]="".concat(ir.replacementClass,"-title-").concat(l||jp()):(E["aria-hidden"]="true",E.focusable="false")),_b({icons:{main:lx(R),mask:c?lx(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:T,transform:{...Sa,...i},symbol:a,title:d,maskId:f,titleId:l,extra:{attributes:E,styles:C,classes:w}})))};var O5={mixout(){return{icon:M5(k5)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=jT,e.nodeCallback=C5,e}}},provides(e){e.i2svg=function(t){const{node:i=_n,callback:a=()=>{}}=t;return jT(i,a)},e.generateSvgReplacementMutation=function(t,i){const{iconName:a,title:c,titleId:f,prefix:d,transform:l,symbol:w,mask:E,maskId:C,extra:b}=i;return new Promise((T,R)=>{Promise.all([ux(a,d),E.iconName?ux(E.iconName,E.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(L=>{let[j,le]=L;T([t,_b({icons:{main:j,mask:le},prefix:d,iconName:a,transform:l,symbol:w,maskId:C,title:c,titleId:f,extra:b,watchable:!0})])}).catch(R)})},e.generateAbstractIcon=function(t){let{children:i,attributes:a,main:c,transform:f,styles:d}=t;const l=S0(d);l.length>0&&(a.style=l);let w;return mb(f)&&(w=Su("generateAbstractTransformGrouping",{main:c,transform:f,containerWidth:c.width,iconWidth:c.width})),i.push(w||c.icon),{children:i,attributes:a}}}},F5={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:i=[]}=t;return P0({type:"layer"},()=>{Sc("beforeDOMElementCreation",{assembler:e,params:t});let a=[];return e(c=>{Array.isArray(c)?c.map(f=>{a=a.concat(f.abstract)}):a=a.concat(c.abstract)}),[{tag:"span",attributes:{class:["".concat(ir.cssPrefix,"-layers"),...i].join(" ")},children:a}]})}}}},R5={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:i=null,classes:a=[],attributes:c={},styles:f={}}=t;return P0({type:"counter",content:e},()=>(Sc("beforeDOMElementCreation",{content:e,params:t}),d5({content:e.toString(),title:i,extra:{attributes:c,styles:f,classes:["".concat(ir.cssPrefix,"-layers-counter"),...a]}})))}}}},j5={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:i=Sa,title:a=null,classes:c=[],attributes:f={},styles:d={}}=t;return P0({type:"text",content:e},()=>(Sc("beforeDOMElementCreation",{content:e,params:t}),CT({content:e,transform:{...Sa,...i},title:a,extra:{attributes:f,styles:d,classes:["".concat(ir.cssPrefix,"-layers-text"),...c]}})))}}},provides(e){e.generateLayersText=function(t,i){const{title:a,transform:c,extra:f}=i;let d=null,l=null;if(BM){const w=parseInt(getComputedStyle(t).fontSize,10),E=t.getBoundingClientRect();d=E.width/w,l=E.height/w}return ir.autoA11y&&!a&&(f.attributes["aria-hidden"]="true"),Promise.resolve([t,CT({content:t.innerHTML,width:d,height:l,transform:c,title:a,extra:f,watchable:!0})])}}};const z5=new RegExp('"',"ug"),zT=[1105920,1112319],LT={FontAwesome:{normal:"fas",400:"fas"},...gL,...mL,...EL},fx=Object.keys(LT).reduce((e,t)=>(e[t.toLowerCase()]=LT[t],e),{}),L5=Object.keys(fx).reduce((e,t)=>{const i=fx[t];return e[t]=i[900]||[...Object.entries(i)][0][1],e},{});function B5(e){const t=e.replace(z5,""),i=qL(t,0),a=i>=zT[0]&&i<=zT[1],c=t.length===2?t[0]===t[1]:!1;return{value:ix(c?t[0]:t),isSecondary:a||c}}function D5(e,t){const i=e.replace(/^['"]|['"]$/g,"").toLowerCase(),a=parseInt(t),c=isNaN(a)?"normal":a;return(fx[i]||{})[c]||L5[i]}function BT(e,t){const i="".concat(AL).concat(t.replace(":","-"));return new Promise((a,c)=>{if(e.getAttribute(i)!==null)return a();const d=Sf(e.children).filter(T=>T.getAttribute(ex)===t)[0],l=wu.getComputedStyle(e,t),w=l.getPropertyValue("font-family"),E=w.match(OL),C=l.getPropertyValue("font-weight"),b=l.getPropertyValue("content");if(d&&!E)return e.removeChild(d),a();if(E&&b!=="none"&&b!==""){const T=l.getPropertyValue("content");let R=D5(w,C);const{value:L,isSecondary:j}=B5(T),le=E[0].startsWith("FontAwesome");let K=yb(R,L),Z=K;if(le){const G=r5(L);G.iconName&&G.prefix&&(K=G.iconName,R=G.prefix)}if(K&&!j&&(!d||d.getAttribute(fb)!==R||d.getAttribute(db)!==Z)){e.setAttribute(i,Z),d&&e.removeChild(d);const G=A5(),{extra:se}=G;se.attributes[ex]=t,ux(K,R).then(q=>{const W=_b({...G,icons:{main:q,mask:vb()},prefix:R,iconName:Z,extra:se,watchable:!0}),P=_n.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(P,e.firstChild):e.appendChild(P),P.outerHTML=W.map(z=>qp(z)).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function N5(e){return Promise.all([BT(e,"::before"),BT(e,"::after")])}function $5(e){return e.parentNode!==document.head&&!~CL.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(ex)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function DT(e){if(vl)return new Promise((t,i)=>{const a=Sf(e.querySelectorAll("*")).filter($5).map(N5),c=xb.begin("searchPseudoElements");ck(),Promise.all(a).then(()=>{c(),hx(),t()}).catch(()=>{c(),hx(),i()})})}var U5={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=DT,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:i=_n}=t;ir.searchPseudoElements&&DT(i)}}};let NT=!1;var V5={mixout(){return{dom:{unwatch(){ck(),NT=!0}}}},hooks(){return{bootstrap(){FT(sx("mutationObserverCallbacks",{}))},noAuto(){S5()},watch(e){const{observeMutationsRoot:t}=e;NT?hx():FT(sx("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const $T=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((i,a)=>{const c=a.toLowerCase().split("-"),f=c[0];let d=c.slice(1).join("-");if(f&&d==="h")return i.flipX=!0,i;if(f&&d==="v")return i.flipY=!0,i;if(d=parseFloat(d),isNaN(d))return i;switch(f){case"grow":i.size=i.size+d;break;case"shrink":i.size=i.size-d;break;case"left":i.x=i.x-d;break;case"right":i.x=i.x+d;break;case"up":i.y=i.y-d;break;case"down":i.y=i.y+d;break;case"rotate":i.rotate=i.rotate+d;break}return i},t)};var G5={mixout(){return{parse:{transform:e=>$T(e)}}},hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-transform");return i&&(e.transform=$T(i)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:i,transform:a,containerWidth:c,iconWidth:f}=t;const d={transform:"translate(".concat(c/2," 256)")},l="translate(".concat(a.x*32,", ").concat(a.y*32,") "),w="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),E="rotate(".concat(a.rotate," 0 0)"),C={transform:"".concat(l," ").concat(w," ").concat(E)},b={transform:"translate(".concat(f/2*-1," -256)")},T={outer:d,inner:C,path:b};return{tag:"g",attributes:{...T.outer},children:[{tag:"g",attributes:{...T.inner},children:[{tag:i.icon.tag,children:i.icon.children,attributes:{...i.icon.attributes,...T.path}}]}]}}}};const f_={x:0,y:0,width:"100%",height:"100%"};function UT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function W5(e){return e.tag==="g"?e.children:[e]}var H5={hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-mask"),a=i?T0(i.split(" ").map(c=>c.trim())):vb();return a.prefix||(a.prefix=bu()),e.mask=a,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:i,attributes:a,main:c,mask:f,maskId:d,transform:l}=t;const{width:w,icon:E}=c,{width:C,icon:b}=f,T=UL({transform:l,containerWidth:C,iconWidth:w}),R={tag:"rect",attributes:{...f_,fill:"white"}},L=E.children?{children:E.children.map(UT)}:{},j={tag:"g",attributes:{...T.inner},children:[UT({tag:E.tag,attributes:{...E.attributes,...T.path},...L})]},le={tag:"g",attributes:{...T.outer},children:[j]},K="mask-".concat(d||jp()),Z="clip-".concat(d||jp()),G={tag:"mask",attributes:{...f_,id:K,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"},children:[R,le]},se={tag:"defs",children:[{tag:"clipPath",attributes:{id:Z},children:W5(b)},G]};return i.push(se,{tag:"rect",attributes:{fill:"currentColor","clip-path":"url(#".concat(Z,")"),mask:"url(#".concat(K,")"),...f_}}),{children:i,attributes:a}}}},Z5={provides(e){let t=!1;wu.matchMedia&&(t=wu.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const i=[],a={fill:"currentColor"},c={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:{...a,d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}});const f={...c,attributeName:"opacity"},d={tag:"circle",attributes:{...a,cx:"256",cy:"364",r:"28"},children:[]};return t||d.children.push({tag:"animate",attributes:{...c,attributeName:"r",values:"28;14;28;28;14;28;"}},{tag:"animate",attributes:{...f,values:"1;0;1;1;0;1;"}}),i.push(d),i.push({tag:"path",attributes:{...a,opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"},children:t?[]:[{tag:"animate",attributes:{...f,values:"1;0;0;0;0;1;"}}]}),t||i.push({tag:"path",attributes:{...a,opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"},children:[{tag:"animate",attributes:{...f,values:"0;0;1;1;0;0;"}}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},X5={hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-symbol"),a=i===null?!1:i===""?!0:i;return e.symbol=a,e}}}},q5=[WL,O5,F5,R5,j5,U5,V5,G5,H5,Z5,X5];s5(q5,{mixoutsTo:Jo});Jo.noAuto;Jo.config;Jo.library;Jo.dom;const dx=Jo.parse;Jo.findIconDefinition;Jo.toHtml;const K5=Jo.icon;Jo.layer;Jo.text;Jo.counter;var fk={exports:{}},J5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Y5=J5,Q5=Y5;function dk(){}function pk(){}pk.resetWarningCache=dk;var e6=function(){function e(a,c,f,d,l,w){if(w!==Q5){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pk,resetWarningCache:dk};return i.PropTypes=i,i};fk.exports=e6();var t6=fk.exports;const Fr=vf(t6);function VT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function ga(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(i),!0).forEach(function(a){Dh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):VT(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function xy(e){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(e)}function Dh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r6(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,f;for(f=0;f<a.length;f++)c=a[f],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function n6(e,t){if(e==null)return{};var i=r6(e,t),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)a=f[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function px(e){return i6(e)||o6(e)||s6(e)||a6()}function i6(e){if(Array.isArray(e))return mx(e)}function o6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function s6(e,t){if(e){if(typeof e=="string")return mx(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return mx(e,t)}}function mx(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function a6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l6(e){var t,i=e.beat,a=e.fade,c=e.beatFade,f=e.bounce,d=e.shake,l=e.flash,w=e.spin,E=e.spinPulse,C=e.spinReverse,b=e.pulse,T=e.fixedWidth,R=e.inverse,L=e.border,j=e.listItem,le=e.flip,K=e.size,Z=e.rotation,G=e.pull,se=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":f,"fa-shake":d,"fa-flash":l,"fa-spin":w,"fa-spin-reverse":C,"fa-spin-pulse":E,"fa-pulse":b,"fa-fw":T,"fa-inverse":R,"fa-border":L,"fa-li":j,"fa-flip":le===!0,"fa-flip-horizontal":le==="horizontal"||le==="both","fa-flip-vertical":le==="vertical"||le==="both"},Dh(t,"fa-".concat(K),typeof K<"u"&&K!==null),Dh(t,"fa-rotate-".concat(Z),typeof Z<"u"&&Z!==null&&Z!==0),Dh(t,"fa-pull-".concat(G),typeof G<"u"&&G!==null),Dh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(se).map(function(q){return se[q]?q:null}).filter(function(q){return q})}function u6(e){return e=e-0,e===e}function mk(e){return u6(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var c6=["style"];function h6(e){return e.charAt(0).toUpperCase()+e.slice(1)}function f6(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=mk(i.slice(0,a)),f=i.slice(a+1).trim();return c.startsWith("webkit")?t[h6(c)]=f:t[c]=f,t},{})}function gk(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(w){return gk(e,w)}),c=Object.keys(t.attributes||{}).reduce(function(w,E){var C=t.attributes[E];switch(E){case"class":w.attrs.className=C,delete t.attributes.class;break;case"style":w.attrs.style=f6(C);break;default:E.indexOf("aria-")===0||E.indexOf("data-")===0?w.attrs[E.toLowerCase()]=C:w.attrs[mk(E)]=C}return w},{attrs:{}}),f=i.style,d=f===void 0?{}:f,l=n6(i,c6);return c.attrs.style=ga(ga({},c.attrs.style),d),e.apply(void 0,[t.tag,ga(ga({},c.attrs),l)].concat(px(a)))}var yk=!1;try{yk=!0}catch{}function d6(){if(!yk&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function GT(e){if(e&&xy(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(dx.icon)return dx.icon(e);if(e===null)return null;if(e&&xy(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function d_(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Dh({},e,t):{}}var WT={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},vu=_w.forwardRef(function(e,t){var i=ga(ga({},WT),e),a=i.icon,c=i.mask,f=i.symbol,d=i.className,l=i.title,w=i.titleId,E=i.maskId,C=GT(a),b=d_("classes",[].concat(px(l6(i)),px((d||"").split(" ")))),T=d_("transform",typeof i.transform=="string"?dx.transform(i.transform):i.transform),R=d_("mask",GT(c)),L=K5(C,ga(ga(ga(ga({},b),T),R),{},{symbol:f,title:l,titleId:w,maskId:E}));if(!L)return d6("Could not find icon",C),null;var j=L.abstract,le={ref:t};return Object.keys(i).forEach(function(K){WT.hasOwnProperty(K)||(le[K]=i[K])}),p6(j[0],le)});vu.displayName="FontAwesomeIcon";vu.propTypes={beat:Fr.bool,border:Fr.bool,beatFade:Fr.bool,bounce:Fr.bool,className:Fr.string,fade:Fr.bool,flash:Fr.bool,mask:Fr.oneOfType([Fr.object,Fr.array,Fr.string]),maskId:Fr.string,fixedWidth:Fr.bool,inverse:Fr.bool,flip:Fr.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Fr.oneOfType([Fr.object,Fr.array,Fr.string]),listItem:Fr.bool,pull:Fr.oneOf(["right","left"]),pulse:Fr.bool,rotation:Fr.oneOf([0,90,180,270]),shake:Fr.bool,size:Fr.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Fr.bool,spinPulse:Fr.bool,spinReverse:Fr.bool,symbol:Fr.oneOfType([Fr.bool,Fr.string]),title:Fr.string,titleId:Fr.string,transform:Fr.oneOfType([Fr.string,Fr.object]),swapOpacity:Fr.bool};var p6=gk.bind(null,_w.createElement);const m6={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},gx={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},g6={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},y6=g6;function ng(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vk={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,f){function d(E,C){if(!c[E]){if(!a[E]){var b=typeof ng=="function"&&ng;if(!C&&b)return b(E,!0);if(l)return l(E,!0);var T=new Error("Cannot find module '"+E+"'");throw T.code="MODULE_NOT_FOUND",T}var R=c[E]={exports:{}};a[E][0].call(R.exports,function(L){var j=a[E][1][L];return d(j||L)},R,R.exports,i,a,c,f)}return c[E].exports}for(var l=typeof ng=="function"&&ng,w=0;w<f.length;w++)d(f[w]);return d}return i}()({1:[function(i,a,c){c.byteLength=T,c.toByteArray=L,c.fromByteArray=K;for(var f=[],d=[],l=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,C=w.length;E<C;++E)f[E]=w[E],d[w.charCodeAt(E)]=E;d[45]=62,d[95]=63;function b(Z){var G=Z.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var se=Z.indexOf("=");se===-1&&(se=G);var q=se===G?0:4-se%4;return[se,q]}function T(Z){var G=b(Z),se=G[0],q=G[1];return(se+q)*3/4-q}function R(Z,G,se){return(G+se)*3/4-se}function L(Z){var G,se=b(Z),q=se[0],W=se[1],P=new l(R(Z,q,W)),z=0,D=W>0?q-4:q,ee;for(ee=0;ee<D;ee+=4)G=d[Z.charCodeAt(ee)]<<18|d[Z.charCodeAt(ee+1)]<<12|d[Z.charCodeAt(ee+2)]<<6|d[Z.charCodeAt(ee+3)],P[z++]=G>>16&255,P[z++]=G>>8&255,P[z++]=G&255;return W===2&&(G=d[Z.charCodeAt(ee)]<<2|d[Z.charCodeAt(ee+1)]>>4,P[z++]=G&255),W===1&&(G=d[Z.charCodeAt(ee)]<<10|d[Z.charCodeAt(ee+1)]<<4|d[Z.charCodeAt(ee+2)]>>2,P[z++]=G>>8&255,P[z++]=G&255),P}function j(Z){return f[Z>>18&63]+f[Z>>12&63]+f[Z>>6&63]+f[Z&63]}function le(Z,G,se){for(var q,W=[],P=G;P<se;P+=3)q=(Z[P]<<16&16711680)+(Z[P+1]<<8&65280)+(Z[P+2]&255),W.push(j(q));return W.join("")}function K(Z){for(var G,se=Z.length,q=se%3,W=[],P=16383,z=0,D=se-q;z<D;z+=P)W.push(le(Z,z,z+P>D?D:z+P));return q===1?(G=Z[se-1],W.push(f[G>>2]+f[G<<4&63]+"==")):q===2&&(G=(Z[se-2]<<8)+Z[se-1],W.push(f[G>>10]+f[G>>4&63]+f[G<<2&63]+"=")),W.join("")}},{}],2:[function(i,a,c){(function(f){(function(){var d=i("base64-js"),l=i("ieee754");c.Buffer=b,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50;var w=2147483647;c.kMaxLength=w,b.TYPED_ARRAY_SUPPORT=E(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function C(Se){if(Se>w)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var N=new Uint8Array(Se);return N.__proto__=b.prototype,N}function b(Se,N,B){if(typeof Se=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(Se)}return T(Se,N,B)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function T(Se,N,B){if(typeof Se=="string")return le(Se,N);if(ArrayBuffer.isView(Se))return K(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(lr(Se,ArrayBuffer)||Se&&lr(Se.buffer,ArrayBuffer))return Z(Se,N,B);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=Se.valueOf&&Se.valueOf();if(_e!=null&&_e!==Se)return b.from(_e,N,B);var Xe=G(Se);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return b.from(Se[Symbol.toPrimitive]("string"),N,B);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}b.from=function(Se,N,B){return T(Se,N,B)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function R(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function L(Se,N,B){return R(Se),Se<=0?C(Se):N!==void 0?typeof B=="string"?C(Se).fill(N,B):C(Se).fill(N):C(Se)}b.alloc=function(Se,N,B){return L(Se,N,B)};function j(Se){return R(Se),C(Se<0?0:se(Se)|0)}b.allocUnsafe=function(Se){return j(Se)},b.allocUnsafeSlow=function(Se){return j(Se)};function le(Se,N){if((typeof N!="string"||N==="")&&(N="utf8"),!b.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var B=W(Se,N)|0,_e=C(B),Xe=_e.write(Se,N);return Xe!==B&&(_e=_e.slice(0,Xe)),_e}function K(Se){for(var N=Se.length<0?0:se(Se.length)|0,B=C(N),_e=0;_e<N;_e+=1)B[_e]=Se[_e]&255;return B}function Z(Se,N,B){if(N<0||Se.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<N+(B||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return N===void 0&&B===void 0?_e=new Uint8Array(Se):B===void 0?_e=new Uint8Array(Se,N):_e=new Uint8Array(Se,N,B),_e.__proto__=b.prototype,_e}function G(Se){if(b.isBuffer(Se)){var N=se(Se.length)|0,B=C(N);return B.length===0||Se.copy(B,0,0,N),B}if(Se.length!==void 0)return typeof Se.length!="number"||Vt(Se.length)?C(0):K(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return K(Se.data)}function se(Se){if(Se>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return Se|0}function q(Se){return+Se!=Se&&(Se=0),b.alloc(+Se)}b.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==b.prototype},b.compare=function(N,B){if(lr(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),lr(B,Uint8Array)&&(B=b.from(B,B.offset,B.byteLength)),!b.isBuffer(N)||!b.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===B)return 0;for(var _e=N.length,Xe=B.length,tt=0,ht=Math.min(_e,Xe);tt<ht;++tt)if(N[tt]!==B[tt]){_e=N[tt],Xe=B[tt];break}return _e<Xe?-1:Xe<_e?1:0},b.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(N,B){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return b.alloc(0);var _e;if(B===void 0)for(B=0,_e=0;_e<N.length;++_e)B+=N[_e].length;var Xe=b.allocUnsafe(B),tt=0;for(_e=0;_e<N.length;++_e){var ht=N[_e];if(lr(ht,Uint8Array)&&(ht=b.from(ht)),!b.isBuffer(ht))throw new TypeError('"list" argument must be an Array of Buffers');ht.copy(Xe,tt),tt+=ht.length}return Xe};function W(Se,N){if(b.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||lr(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var B=Se.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&B===0)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return Wt(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B*2;case"hex":return B>>>1;case"base64":return et(Se).length;default:if(Xe)return _e?-1:Wt(Se).length;N=(""+N).toLowerCase(),Xe=!0}}b.byteLength=W;function P(Se,N,B){var _e=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0,N>>>=0,B<=N))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return Ce(this,N,B);case"utf8":case"utf-8":return re(this,N,B);case"ascii":return Pe(this,N,B);case"latin1":case"binary":return $e(this,N,B);case"base64":return Y(this,N,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,N,B);default:if(_e)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),_e=!0}}b.prototype._isBuffer=!0;function z(Se,N,B){var _e=Se[N];Se[N]=Se[B],Se[B]=_e}b.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<N;B+=2)z(this,B,B+1);return this},b.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<N;B+=4)z(this,B,B+3),z(this,B+1,B+2);return this},b.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<N;B+=8)z(this,B,B+7),z(this,B+1,B+6),z(this,B+2,B+5),z(this,B+3,B+4);return this},b.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?re(this,0,N):P.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(N){if(!b.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:b.compare(this,N)===0},b.prototype.inspect=function(){var N="",B=c.INSPECT_MAX_BYTES;return N=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(N+=" ... "),"<Buffer "+N+">"},b.prototype.compare=function(N,B,_e,Xe,tt){if(lr(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(B===void 0&&(B=0),_e===void 0&&(_e=N?N.length:0),Xe===void 0&&(Xe=0),tt===void 0&&(tt=this.length),B<0||_e>N.length||Xe<0||tt>this.length)throw new RangeError("out of range index");if(Xe>=tt&&B>=_e)return 0;if(Xe>=tt)return-1;if(B>=_e)return 1;if(B>>>=0,_e>>>=0,Xe>>>=0,tt>>>=0,this===N)return 0;for(var ht=tt-Xe,ue=_e-B,k=Math.min(ht,ue),U=this.slice(Xe,tt),Ee=N.slice(B,_e),Ve=0;Ve<k;++Ve)if(U[Ve]!==Ee[Ve]){ht=U[Ve],ue=Ee[Ve];break}return ht<ue?-1:ue<ht?1:0};function D(Se,N,B,_e,Xe){if(Se.length===0)return-1;if(typeof B=="string"?(_e=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,Vt(B)&&(B=Xe?0:Se.length-1),B<0&&(B=Se.length+B),B>=Se.length){if(Xe)return-1;B=Se.length-1}else if(B<0)if(Xe)B=0;else return-1;if(typeof N=="string"&&(N=b.from(N,_e)),b.isBuffer(N))return N.length===0?-1:ee(Se,N,B,_e,Xe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(Se,N,B):Uint8Array.prototype.lastIndexOf.call(Se,N,B):ee(Se,[N],B,_e,Xe);throw new TypeError("val must be string, number or Buffer")}function ee(Se,N,B,_e,Xe){var tt=1,ht=Se.length,ue=N.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(Se.length<2||N.length<2)return-1;tt=2,ht/=2,ue/=2,B/=2}function k(Ge,Et){return tt===1?Ge[Et]:Ge.readUInt16BE(Et*tt)}var U;if(Xe){var Ee=-1;for(U=B;U<ht;U++)if(k(Se,U)===k(N,Ee===-1?0:U-Ee)){if(Ee===-1&&(Ee=U),U-Ee+1===ue)return Ee*tt}else Ee!==-1&&(U-=U-Ee),Ee=-1}else for(B+ue>ht&&(B=ht-ue),U=B;U>=0;U--){for(var Ve=!0,nt=0;nt<ue;nt++)if(k(Se,U+nt)!==k(N,nt)){Ve=!1;break}if(Ve)return U}return-1}b.prototype.includes=function(N,B,_e){return this.indexOf(N,B,_e)!==-1},b.prototype.indexOf=function(N,B,_e){return D(this,N,B,_e,!0)},b.prototype.lastIndexOf=function(N,B,_e){return D(this,N,B,_e,!1)};function X(Se,N,B,_e){B=Number(B)||0;var Xe=Se.length-B;_e?(_e=Number(_e),_e>Xe&&(_e=Xe)):_e=Xe;var tt=N.length;_e>tt/2&&(_e=tt/2);for(var ht=0;ht<_e;++ht){var ue=parseInt(N.substr(ht*2,2),16);if(Vt(ue))return ht;Se[B+ht]=ue}return ht}function ye(Se,N,B,_e){return vr(Wt(N,Se.length-B),Se,B,_e)}function ge(Se,N,B,_e){return vr(Ht(N),Se,B,_e)}function fe(Se,N,B,_e){return ge(Se,N,B,_e)}function ie(Se,N,B,_e){return vr(et(N),Se,B,_e)}function he(Se,N,B,_e){return vr(ar(N,Se.length-B),Se,B,_e)}b.prototype.write=function(N,B,_e,Xe){if(B===void 0)Xe="utf8",_e=this.length,B=0;else if(_e===void 0&&typeof B=="string")Xe=B,_e=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(_e)?(_e=_e>>>0,Xe===void 0&&(Xe="utf8")):(Xe=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-B;if((_e===void 0||_e>tt)&&(_e=tt),N.length>0&&(_e<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ht=!1;;)switch(Xe){case"hex":return X(this,N,B,_e);case"utf8":case"utf-8":return ye(this,N,B,_e);case"ascii":return ge(this,N,B,_e);case"latin1":case"binary":return fe(this,N,B,_e);case"base64":return ie(this,N,B,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,N,B,_e);default:if(ht)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ht=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(Se,N,B){return N===0&&B===Se.length?d.fromByteArray(Se):d.fromByteArray(Se.slice(N,B))}function re(Se,N,B){B=Math.min(Se.length,B);for(var _e=[],Xe=N;Xe<B;){var tt=Se[Xe],ht=null,ue=tt>239?4:tt>223?3:tt>191?2:1;if(Xe+ue<=B){var k,U,Ee,Ve;switch(ue){case 1:tt<128&&(ht=tt);break;case 2:k=Se[Xe+1],(k&192)===128&&(Ve=(tt&31)<<6|k&63,Ve>127&&(ht=Ve));break;case 3:k=Se[Xe+1],U=Se[Xe+2],(k&192)===128&&(U&192)===128&&(Ve=(tt&15)<<12|(k&63)<<6|U&63,Ve>2047&&(Ve<55296||Ve>57343)&&(ht=Ve));break;case 4:k=Se[Xe+1],U=Se[Xe+2],Ee=Se[Xe+3],(k&192)===128&&(U&192)===128&&(Ee&192)===128&&(Ve=(tt&15)<<18|(k&63)<<12|(U&63)<<6|Ee&63,Ve>65535&&Ve<1114112&&(ht=Ve))}}ht===null?(ht=65533,ue=1):ht>65535&&(ht-=65536,_e.push(ht>>>10&1023|55296),ht=56320|ht&1023),_e.push(ht),Xe+=ue}return be(_e)}var de=4096;function be(Se){var N=Se.length;if(N<=de)return String.fromCharCode.apply(String,Se);for(var B="",_e=0;_e<N;)B+=String.fromCharCode.apply(String,Se.slice(_e,_e+=de));return B}function Pe(Se,N,B){var _e="";B=Math.min(Se.length,B);for(var Xe=N;Xe<B;++Xe)_e+=String.fromCharCode(Se[Xe]&127);return _e}function $e(Se,N,B){var _e="";B=Math.min(Se.length,B);for(var Xe=N;Xe<B;++Xe)_e+=String.fromCharCode(Se[Xe]);return _e}function Ce(Se,N,B){var _e=Se.length;(!N||N<0)&&(N=0),(!B||B<0||B>_e)&&(B=_e);for(var Xe="",tt=N;tt<B;++tt)Xe+=xt(Se[tt]);return Xe}function Fe(Se,N,B){for(var _e=Se.slice(N,B),Xe="",tt=0;tt<_e.length;tt+=2)Xe+=String.fromCharCode(_e[tt]+_e[tt+1]*256);return Xe}b.prototype.slice=function(N,B){var _e=this.length;N=~~N,B=B===void 0?_e:~~B,N<0?(N+=_e,N<0&&(N=0)):N>_e&&(N=_e),B<0?(B+=_e,B<0&&(B=0)):B>_e&&(B=_e),B<N&&(B=N);var Xe=this.subarray(N,B);return Xe.__proto__=b.prototype,Xe};function He(Se,N,B){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+N>B)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(N,B,_e){N=N>>>0,B=B>>>0,_e||He(N,B,this.length);for(var Xe=this[N],tt=1,ht=0;++ht<B&&(tt*=256);)Xe+=this[N+ht]*tt;return Xe},b.prototype.readUIntBE=function(N,B,_e){N=N>>>0,B=B>>>0,_e||He(N,B,this.length);for(var Xe=this[N+--B],tt=1;B>0&&(tt*=256);)Xe+=this[N+--B]*tt;return Xe},b.prototype.readUInt8=function(N,B){return N=N>>>0,B||He(N,1,this.length),this[N]},b.prototype.readUInt16LE=function(N,B){return N=N>>>0,B||He(N,2,this.length),this[N]|this[N+1]<<8},b.prototype.readUInt16BE=function(N,B){return N=N>>>0,B||He(N,2,this.length),this[N]<<8|this[N+1]},b.prototype.readUInt32LE=function(N,B){return N=N>>>0,B||He(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},b.prototype.readUInt32BE=function(N,B){return N=N>>>0,B||He(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},b.prototype.readIntLE=function(N,B,_e){N=N>>>0,B=B>>>0,_e||He(N,B,this.length);for(var Xe=this[N],tt=1,ht=0;++ht<B&&(tt*=256);)Xe+=this[N+ht]*tt;return tt*=128,Xe>=tt&&(Xe-=Math.pow(2,8*B)),Xe},b.prototype.readIntBE=function(N,B,_e){N=N>>>0,B=B>>>0,_e||He(N,B,this.length);for(var Xe=B,tt=1,ht=this[N+--Xe];Xe>0&&(tt*=256);)ht+=this[N+--Xe]*tt;return tt*=128,ht>=tt&&(ht-=Math.pow(2,8*B)),ht},b.prototype.readInt8=function(N,B){return N=N>>>0,B||He(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},b.prototype.readInt16LE=function(N,B){N=N>>>0,B||He(N,2,this.length);var _e=this[N]|this[N+1]<<8;return _e&32768?_e|4294901760:_e},b.prototype.readInt16BE=function(N,B){N=N>>>0,B||He(N,2,this.length);var _e=this[N+1]|this[N]<<8;return _e&32768?_e|4294901760:_e},b.prototype.readInt32LE=function(N,B){return N=N>>>0,B||He(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},b.prototype.readInt32BE=function(N,B){return N=N>>>0,B||He(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},b.prototype.readFloatLE=function(N,B){return N=N>>>0,B||He(N,4,this.length),l.read(this,N,!0,23,4)},b.prototype.readFloatBE=function(N,B){return N=N>>>0,B||He(N,4,this.length),l.read(this,N,!1,23,4)},b.prototype.readDoubleLE=function(N,B){return N=N>>>0,B||He(N,8,this.length),l.read(this,N,!0,52,8)},b.prototype.readDoubleBE=function(N,B){return N=N>>>0,B||He(N,8,this.length),l.read(this,N,!1,52,8)};function We(Se,N,B,_e,Xe,tt){if(!b.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<tt)throw new RangeError('"value" argument is out of bounds');if(B+_e>Se.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(N,B,_e,Xe){if(N=+N,B=B>>>0,_e=_e>>>0,!Xe){var tt=Math.pow(2,8*_e)-1;We(this,N,B,_e,tt,0)}var ht=1,ue=0;for(this[B]=N&255;++ue<_e&&(ht*=256);)this[B+ue]=N/ht&255;return B+_e},b.prototype.writeUIntBE=function(N,B,_e,Xe){if(N=+N,B=B>>>0,_e=_e>>>0,!Xe){var tt=Math.pow(2,8*_e)-1;We(this,N,B,_e,tt,0)}var ht=_e-1,ue=1;for(this[B+ht]=N&255;--ht>=0&&(ue*=256);)this[B+ht]=N/ue&255;return B+_e},b.prototype.writeUInt8=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,1,255,0),this[B]=N&255,B+1},b.prototype.writeUInt16LE=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,2,65535,0),this[B]=N&255,this[B+1]=N>>>8,B+2},b.prototype.writeUInt16BE=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,2,65535,0),this[B]=N>>>8,this[B+1]=N&255,B+2},b.prototype.writeUInt32LE=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,4,4294967295,0),this[B+3]=N>>>24,this[B+2]=N>>>16,this[B+1]=N>>>8,this[B]=N&255,B+4},b.prototype.writeUInt32BE=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,4,4294967295,0),this[B]=N>>>24,this[B+1]=N>>>16,this[B+2]=N>>>8,this[B+3]=N&255,B+4},b.prototype.writeIntLE=function(N,B,_e,Xe){if(N=+N,B=B>>>0,!Xe){var tt=Math.pow(2,8*_e-1);We(this,N,B,_e,tt-1,-tt)}var ht=0,ue=1,k=0;for(this[B]=N&255;++ht<_e&&(ue*=256);)N<0&&k===0&&this[B+ht-1]!==0&&(k=1),this[B+ht]=(N/ue>>0)-k&255;return B+_e},b.prototype.writeIntBE=function(N,B,_e,Xe){if(N=+N,B=B>>>0,!Xe){var tt=Math.pow(2,8*_e-1);We(this,N,B,_e,tt-1,-tt)}var ht=_e-1,ue=1,k=0;for(this[B+ht]=N&255;--ht>=0&&(ue*=256);)N<0&&k===0&&this[B+ht+1]!==0&&(k=1),this[B+ht]=(N/ue>>0)-k&255;return B+_e},b.prototype.writeInt8=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,1,127,-128),N<0&&(N=255+N+1),this[B]=N&255,B+1},b.prototype.writeInt16LE=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,2,32767,-32768),this[B]=N&255,this[B+1]=N>>>8,B+2},b.prototype.writeInt16BE=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,2,32767,-32768),this[B]=N>>>8,this[B+1]=N&255,B+2},b.prototype.writeInt32LE=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,4,2147483647,-2147483648),this[B]=N&255,this[B+1]=N>>>8,this[B+2]=N>>>16,this[B+3]=N>>>24,B+4},b.prototype.writeInt32BE=function(N,B,_e){return N=+N,B=B>>>0,_e||We(this,N,B,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[B]=N>>>24,this[B+1]=N>>>16,this[B+2]=N>>>8,this[B+3]=N&255,B+4};function it(Se,N,B,_e,Xe,tt){if(B+_e>Se.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function ct(Se,N,B,_e,Xe){return N=+N,B=B>>>0,Xe||it(Se,N,B,4),l.write(Se,N,B,_e,23,4),B+4}b.prototype.writeFloatLE=function(N,B,_e){return ct(this,N,B,!0,_e)},b.prototype.writeFloatBE=function(N,B,_e){return ct(this,N,B,!1,_e)};function vt(Se,N,B,_e,Xe){return N=+N,B=B>>>0,Xe||it(Se,N,B,8),l.write(Se,N,B,_e,52,8),B+8}b.prototype.writeDoubleLE=function(N,B,_e){return vt(this,N,B,!0,_e)},b.prototype.writeDoubleBE=function(N,B,_e){return vt(this,N,B,!1,_e)},b.prototype.copy=function(N,B,_e,Xe){if(!b.isBuffer(N))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!Xe&&Xe!==0&&(Xe=this.length),B>=N.length&&(B=N.length),B||(B=0),Xe>0&&Xe<_e&&(Xe=_e),Xe===_e||N.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-B<Xe-_e&&(Xe=N.length-B+_e);var tt=Xe-_e;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(B,_e,Xe);else if(this===N&&_e<B&&B<Xe)for(var ht=tt-1;ht>=0;--ht)N[ht+B]=this[ht+_e];else Uint8Array.prototype.set.call(N,this.subarray(_e,Xe),B);return tt},b.prototype.fill=function(N,B,_e,Xe){if(typeof N=="string"){if(typeof B=="string"?(Xe=B,B=0,_e=this.length):typeof _e=="string"&&(Xe=_e,_e=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!b.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(N.length===1){var tt=N.charCodeAt(0);(Xe==="utf8"&&tt<128||Xe==="latin1")&&(N=tt)}}else typeof N=="number"&&(N=N&255);if(B<0||this.length<B||this.length<_e)throw new RangeError("Out of range index");if(_e<=B)return this;B=B>>>0,_e=_e===void 0?this.length:_e>>>0,N||(N=0);var ht;if(typeof N=="number")for(ht=B;ht<_e;++ht)this[ht]=N;else{var ue=b.isBuffer(N)?N:b.from(N,Xe),k=ue.length;if(k===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ht=0;ht<_e-B;++ht)this[ht+B]=ue[ht%k]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function pt(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(Mt,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function xt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Wt(Se,N){N=N||1/0;for(var B,_e=Se.length,Xe=null,tt=[],ht=0;ht<_e;++ht){if(B=Se.charCodeAt(ht),B>55295&&B<57344){if(!Xe){if(B>56319){(N-=3)>-1&&tt.push(239,191,189);continue}else if(ht+1===_e){(N-=3)>-1&&tt.push(239,191,189);continue}Xe=B;continue}if(B<56320){(N-=3)>-1&&tt.push(239,191,189),Xe=B;continue}B=(Xe-55296<<10|B-56320)+65536}else Xe&&(N-=3)>-1&&tt.push(239,191,189);if(Xe=null,B<128){if((N-=1)<0)break;tt.push(B)}else if(B<2048){if((N-=2)<0)break;tt.push(B>>6|192,B&63|128)}else if(B<65536){if((N-=3)<0)break;tt.push(B>>12|224,B>>6&63|128,B&63|128)}else if(B<1114112){if((N-=4)<0)break;tt.push(B>>18|240,B>>12&63|128,B>>6&63|128,B&63|128)}else throw new Error("Invalid code point")}return tt}function Ht(Se){for(var N=[],B=0;B<Se.length;++B)N.push(Se.charCodeAt(B)&255);return N}function ar(Se,N){for(var B,_e,Xe,tt=[],ht=0;ht<Se.length&&!((N-=2)<0);++ht)B=Se.charCodeAt(ht),_e=B>>8,Xe=B%256,tt.push(Xe),tt.push(_e);return tt}function et(Se){return d.toByteArray(pt(Se))}function vr(Se,N,B,_e){for(var Xe=0;Xe<_e&&!(Xe+B>=N.length||Xe>=Se.length);++Xe)N[Xe+B]=Se[Xe];return Xe}function lr(Se,N){return Se instanceof N||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===N.name}function Vt(Se){return Se!==Se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const f=i("./validator"),d=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");a.exports={XMLParser:d,XMLValidator:f,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+f+"]["+d+"]*",w=new RegExp("^"+l+"$"),E=function(b,T){const R=[];let L=T.exec(b);for(;L;){const j=[];j.startIndex=T.lastIndex-L[0].length;const le=L.length;for(let K=0;K<le;K++)j.push(L[K]);R.push(j),L=T.exec(b)}return R},C=function(b){const T=w.exec(b);return!(T===null||typeof T>"u")};c.isExist=function(b){return typeof b<"u"},c.isEmptyObject=function(b){return Object.keys(b).length===0},c.merge=function(b,T,R){if(T){const L=Object.keys(T),j=L.length;for(let le=0;le<j;le++)R==="strict"?b[L[le]]=[T[L[le]]]:b[L[le]]=T[L[le]]}},c.getValue=function(b){return c.isExist(b)?b:""},c.isName=C,c.getAllMatches=E,c.nameRegexp=l},{}],5:[function(i,a,c){const f=i("./util"),d={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(W,P){P=Object.assign({},d,P);const z=[];let D=!1,ee=!1;W[0]==="\uFEFF"&&(W=W.substr(1));for(let X=0;X<W.length;X++)if(W[X]==="<"&&W[X+1]==="?"){if(X+=2,X=w(W,X),X.err)return X}else if(W[X]==="<"){let ye=X;if(X++,W[X]==="!"){X=E(W,X);continue}else{let ge=!1;W[X]==="/"&&(ge=!0,X++);let fe="";for(;X<W.length&&W[X]!==">"&&W[X]!==" "&&W[X]!=="	"&&W[X]!==`
`&&W[X]!=="\r";X++)fe+=W[X];if(fe=fe.trim(),fe[fe.length-1]==="/"&&(fe=fe.substring(0,fe.length-1),X--),!G(fe)){let Y;return fe.trim().length===0?Y="Invalid space after '<'.":Y="Tag '"+fe+"' is an invalid name.",K("InvalidTag",Y,se(W,X))}const ie=T(W,X);if(ie===!1)return K("InvalidAttr","Attributes for '"+fe+"' have open quote.",se(W,X));let he=ie.value;if(X=ie.index,he[he.length-1]==="/"){const Y=X-he.length;he=he.substring(0,he.length-1);const re=L(he,P);if(re===!0)D=!0;else return K(re.err.code,re.err.msg,se(W,Y+re.err.line))}else if(ge)if(ie.tagClosed){if(he.trim().length>0)return K("InvalidTag","Closing tag '"+fe+"' can't have attributes or invalid starting.",se(W,ye));{const Y=z.pop();if(fe!==Y.tagName){let re=se(W,Y.tagStartPos);return K("InvalidTag","Expected closing tag '"+Y.tagName+"' (opened in line "+re.line+", col "+re.col+") instead of closing tag '"+fe+"'.",se(W,ye))}z.length==0&&(ee=!0)}}else return K("InvalidTag","Closing tag '"+fe+"' doesn't have proper closing.",se(W,X));else{const Y=L(he,P);if(Y!==!0)return K(Y.err.code,Y.err.msg,se(W,X-he.length+Y.err.line));if(ee===!0)return K("InvalidXml","Multiple possible root nodes found.",se(W,X));P.unpairedTags.indexOf(fe)!==-1||z.push({tagName:fe,tagStartPos:ye}),D=!0}for(X++;X<W.length;X++)if(W[X]==="<")if(W[X+1]==="!"){X++,X=E(W,X);continue}else if(W[X+1]==="?"){if(X=w(W,++X),X.err)return X}else break;else if(W[X]==="&"){const Y=le(W,X);if(Y==-1)return K("InvalidChar","char '&' is not expected.",se(W,X));X=Y}else if(ee===!0&&!l(W[X]))return K("InvalidXml","Extra text at the end",se(W,X));W[X]==="<"&&X--}}else{if(l(W[X]))continue;return K("InvalidChar","char '"+W[X]+"' is not expected.",se(W,X))}if(D){if(z.length==1)return K("InvalidTag","Unclosed tag '"+z[0].tagName+"'.",se(W,z[0].tagStartPos));if(z.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(z.map(X=>X.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function l(W){return W===" "||W==="	"||W===`
`||W==="\r"}function w(W,P){const z=P;for(;P<W.length;P++)if(W[P]=="?"||W[P]==" "){const D=W.substr(z,P-z);if(P>5&&D==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",se(W,P));if(W[P]=="?"&&W[P+1]==">"){P++;break}else continue}return P}function E(W,P){if(W.length>P+5&&W[P+1]==="-"&&W[P+2]==="-"){for(P+=3;P<W.length;P++)if(W[P]==="-"&&W[P+1]==="-"&&W[P+2]===">"){P+=2;break}}else if(W.length>P+8&&W[P+1]==="D"&&W[P+2]==="O"&&W[P+3]==="C"&&W[P+4]==="T"&&W[P+5]==="Y"&&W[P+6]==="P"&&W[P+7]==="E"){let z=1;for(P+=8;P<W.length;P++)if(W[P]==="<")z++;else if(W[P]===">"&&(z--,z===0))break}else if(W.length>P+9&&W[P+1]==="["&&W[P+2]==="C"&&W[P+3]==="D"&&W[P+4]==="A"&&W[P+5]==="T"&&W[P+6]==="A"&&W[P+7]==="["){for(P+=8;P<W.length;P++)if(W[P]==="]"&&W[P+1]==="]"&&W[P+2]===">"){P+=2;break}}return P}const C='"',b="'";function T(W,P){let z="",D="",ee=!1;for(;P<W.length;P++){if(W[P]===C||W[P]===b)D===""?D=W[P]:D!==W[P]||(D="");else if(W[P]===">"&&D===""){ee=!0;break}z+=W[P]}return D!==""?!1:{value:z,index:P,tagClosed:ee}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function L(W,P){const z=f.getAllMatches(W,R),D={};for(let ee=0;ee<z.length;ee++){if(z[ee][1].length===0)return K("InvalidAttr","Attribute '"+z[ee][2]+"' has no space in starting.",q(z[ee]));if(z[ee][3]!==void 0&&z[ee][4]===void 0)return K("InvalidAttr","Attribute '"+z[ee][2]+"' is without value.",q(z[ee]));if(z[ee][3]===void 0&&!P.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+z[ee][2]+"' is not allowed.",q(z[ee]));const X=z[ee][2];if(!Z(X))return K("InvalidAttr","Attribute '"+X+"' is an invalid name.",q(z[ee]));if(!D.hasOwnProperty(X))D[X]=1;else return K("InvalidAttr","Attribute '"+X+"' is repeated.",q(z[ee]))}return!0}function j(W,P){let z=/\d/;for(W[P]==="x"&&(P++,z=/[\da-fA-F]/);P<W.length;P++){if(W[P]===";")return P;if(!W[P].match(z))break}return-1}function le(W,P){if(P++,W[P]===";")return-1;if(W[P]==="#")return P++,j(W,P);let z=0;for(;P<W.length;P++,z++)if(!(W[P].match(/\w/)&&z<20)){if(W[P]===";")break;return-1}return P}function K(W,P,z){return{err:{code:W,msg:P,line:z.line||z,col:z.col}}}function Z(W){return f.isName(W)}function G(W){return f.isName(W)}function se(W,P){const z=W.substring(0,P).split(/\r?\n/);return{line:z.length,col:z[z.length-1].length+1}}function q(W){return W.startIndex+W[1].length}},{"./util":4}],6:[function(i,a,c){const f=i("./orderedJs2Xml"),d={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,T){return T},attributeValueProcessor:function(b,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function l(b){this.options=Object.assign({},d,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=C),this.processTextOrObjNode=w,this.options.format?(this.indentate=E,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}l.prototype.build=function(b){return this.options.preserveOrder?f(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},l.prototype.j2x=function(b,T){let R="",L="";for(let j in b)if(Object.prototype.hasOwnProperty.call(b,j))if(typeof b[j]>"u")this.isAttribute(j)&&(L+="");else if(b[j]===null)this.isAttribute(j)?L+="":j[0]==="?"?L+=this.indentate(T)+"<"+j+"?"+this.tagEndChar:L+=this.indentate(T)+"<"+j+"/"+this.tagEndChar;else if(b[j]instanceof Date)L+=this.buildTextValNode(b[j],j,"",T);else if(typeof b[j]!="object"){const le=this.isAttribute(j);if(le)R+=this.buildAttrPairStr(le,""+b[j]);else if(j===this.options.textNodeName){let K=this.options.tagValueProcessor(j,""+b[j]);L+=this.replaceEntitiesValue(K)}else L+=this.buildTextValNode(b[j],j,"",T)}else if(Array.isArray(b[j])){const le=b[j].length;let K="";for(let Z=0;Z<le;Z++){const G=b[j][Z];typeof G>"u"||(G===null?j[0]==="?"?L+=this.indentate(T)+"<"+j+"?"+this.tagEndChar:L+=this.indentate(T)+"<"+j+"/"+this.tagEndChar:typeof G=="object"?this.options.oneListGroup?K+=this.j2x(G,T+1).val:K+=this.processTextOrObjNode(G,j,T):K+=this.buildTextValNode(G,j,"",T))}this.options.oneListGroup&&(K=this.buildObjectNode(K,j,"",T)),L+=K}else if(this.options.attributesGroupName&&j===this.options.attributesGroupName){const le=Object.keys(b[j]),K=le.length;for(let Z=0;Z<K;Z++)R+=this.buildAttrPairStr(le[Z],""+b[j][le[Z]])}else L+=this.processTextOrObjNode(b[j],j,T);return{attrStr:R,val:L}},l.prototype.buildAttrPairStr=function(b,T){return T=this.options.attributeValueProcessor(b,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+b:" "+b+'="'+T+'"'};function w(b,T,R){const L=this.j2x(b,R+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],T,L.attrStr,R):this.buildObjectNode(L.val,T,L.attrStr,R)}l.prototype.buildObjectNode=function(b,T,R,L){if(b==="")return T[0]==="?"?this.indentate(L)+"<"+T+R+"?"+this.tagEndChar:this.indentate(L)+"<"+T+R+this.closeTag(T)+this.tagEndChar;{let j="</"+T+this.tagEndChar,le="";return T[0]==="?"&&(le="?",j=""),(R||R==="")&&b.indexOf("<")===-1?this.indentate(L)+"<"+T+R+le+">"+b+j:this.options.commentPropName!==!1&&T===this.options.commentPropName&&le.length===0?this.indentate(L)+`<!--${b}-->`+this.newLine:this.indentate(L)+"<"+T+R+le+this.tagEndChar+b+this.indentate(L)+j}},l.prototype.closeTag=function(b){let T="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${b}`,T},l.prototype.buildTextValNode=function(b,T,R,L){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(L)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(L)+`<!--${b}-->`+this.newLine;if(T[0]==="?")return this.indentate(L)+"<"+T+R+"?"+this.tagEndChar;{let j=this.options.tagValueProcessor(T,b);return j=this.replaceEntitiesValue(j),j===""?this.indentate(L)+"<"+T+R+this.closeTag(T)+this.tagEndChar:this.indentate(L)+"<"+T+R+">"+j+"</"+T+this.tagEndChar}},l.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const R=this.options.entities[T];b=b.replace(R.regex,R.val)}return b};function E(b){return this.options.indentBy.repeat(b)}function C(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(i,a,c){const f=`
`;function d(T,R){let L="";return R.format&&R.indentBy.length>0&&(L=f),l(T,R,"",L)}function l(T,R,L,j){let le="",K=!1;for(let Z=0;Z<T.length;Z++){const G=T[Z],se=w(G);if(se===void 0)continue;let q="";if(L.length===0?q=se:q=`${L}.${se}`,se===R.textNodeName){let ee=G[se];C(q,R)||(ee=R.tagValueProcessor(se,ee),ee=b(ee,R)),K&&(le+=j),le+=ee,K=!1;continue}else if(se===R.cdataPropName){K&&(le+=j),le+=`<![CDATA[${G[se][0][R.textNodeName]}]]>`,K=!1;continue}else if(se===R.commentPropName){le+=j+`<!--${G[se][0][R.textNodeName]}-->`,K=!0;continue}else if(se[0]==="?"){const ee=E(G[":@"],R),X=se==="?xml"?"":j;let ye=G[se][0][R.textNodeName];ye=ye.length!==0?" "+ye:"",le+=X+`<${se}${ye}${ee}?>`,K=!0;continue}let W=j;W!==""&&(W+=R.indentBy);const P=E(G[":@"],R),z=j+`<${se}${P}`,D=l(G[se],R,q,W);R.unpairedTags.indexOf(se)!==-1?R.suppressUnpairedNode?le+=z+">":le+=z+"/>":(!D||D.length===0)&&R.suppressEmptyNode?le+=z+"/>":D&&D.endsWith(">")?le+=z+`>${D}${j}</${se}>`:(le+=z+">",D&&j!==""&&(D.includes("/>")||D.includes("</"))?le+=j+R.indentBy+D+j:le+=D,le+=`</${se}>`),K=!0}return le}function w(T){const R=Object.keys(T);for(let L=0;L<R.length;L++){const j=R[L];if(T.hasOwnProperty(j)&&j!==":@")return j}}function E(T,R){let L="";if(T&&!R.ignoreAttributes)for(let j in T){if(!T.hasOwnProperty(j))continue;let le=R.attributeValueProcessor(j,T[j]);le=b(le,R),le===!0&&R.suppressBooleanAttributes?L+=` ${j.substr(R.attributeNamePrefix.length)}`:L+=` ${j.substr(R.attributeNamePrefix.length)}="${le}"`}return L}function C(T,R){T=T.substr(0,T.length-R.textNodeName.length-1);let L=T.substr(T.lastIndexOf(".")+1);for(let j in R.stopNodes)if(R.stopNodes[j]===T||R.stopNodes[j]==="*."+L)return!0;return!1}function b(T,R){if(T&&T.length>0&&R.processEntities)for(let L=0;L<R.entities.length;L++){const j=R.entities[L];T=T.replace(j.regex,j.val)}return T}a.exports=d},{}],8:[function(i,a,c){const f=i("../util");function d(L,j){const le={};if(L[j+3]==="O"&&L[j+4]==="C"&&L[j+5]==="T"&&L[j+6]==="Y"&&L[j+7]==="P"&&L[j+8]==="E"){j=j+9;let K=1,Z=!1,G=!1,se="";for(;j<L.length;j++)if(L[j]==="<"&&!G){if(Z&&E(L,j))j+=7,[entityName,val,j]=l(L,j+1),val.indexOf("&")===-1&&(le[R(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(Z&&C(L,j))j+=8;else if(Z&&b(L,j))j+=8;else if(Z&&T(L,j))j+=9;else if(w)G=!0;else throw new Error("Invalid DOCTYPE");K++,se=""}else if(L[j]===">"){if(G?L[j-1]==="-"&&L[j-2]==="-"&&(G=!1,K--):K--,K===0)break}else L[j]==="["?Z=!0:se+=L[j];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:le,i:j}}function l(L,j){let le="";for(;j<L.length&&L[j]!=="'"&&L[j]!=='"';j++)le+=L[j];if(le=le.trim(),le.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=L[j++];let Z="";for(;j<L.length&&L[j]!==K;j++)Z+=L[j];return[le,Z,j]}function w(L,j){return L[j+1]==="!"&&L[j+2]==="-"&&L[j+3]==="-"}function E(L,j){return L[j+1]==="!"&&L[j+2]==="E"&&L[j+3]==="N"&&L[j+4]==="T"&&L[j+5]==="I"&&L[j+6]==="T"&&L[j+7]==="Y"}function C(L,j){return L[j+1]==="!"&&L[j+2]==="E"&&L[j+3]==="L"&&L[j+4]==="E"&&L[j+5]==="M"&&L[j+6]==="E"&&L[j+7]==="N"&&L[j+8]==="T"}function b(L,j){return L[j+1]==="!"&&L[j+2]==="A"&&L[j+3]==="T"&&L[j+4]==="T"&&L[j+5]==="L"&&L[j+6]==="I"&&L[j+7]==="S"&&L[j+8]==="T"}function T(L,j){return L[j+1]==="!"&&L[j+2]==="N"&&L[j+3]==="O"&&L[j+4]==="T"&&L[j+5]==="A"&&L[j+6]==="T"&&L[j+7]==="I"&&L[j+8]==="O"&&L[j+9]==="N"}function R(L){if(f.isName(L))return L;throw new Error(`Invalid entity name ${L}`)}a.exports=d},{"../util":4}],9:[function(i,a,c){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(l,w){return w},attributeValueProcessor:function(l,w){return w},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(l,w,E){return l}},d=function(l){return Object.assign({},f,l)};c.buildOptions=d,c.defaultOptions=f},{}],10:[function(i,a,c){const f=i("../util"),d=i("./xmlNode"),l=i("./DocTypeReader"),w=i("strnum");class E{constructor(ee){this.options=ee,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=C,this.parseXml=j,this.parseTextData=b,this.resolveNameSpace=T,this.buildAttributesMap=L,this.isItStopNode=G,this.replaceEntitiesValue=K,this.readStopNodeData=P,this.saveTextToParentTag=Z,this.addChild=le}}function C(D){const ee=Object.keys(D);for(let X=0;X<ee.length;X++){const ye=ee[X];this.lastEntities[ye]={regex:new RegExp("&"+ye+";","g"),val:D[ye]}}}function b(D,ee,X,ye,ge,fe,ie){if(D!==void 0&&(this.options.trimValues&&!ye&&(D=D.trim()),D.length>0)){ie||(D=this.replaceEntitiesValue(D));const he=this.options.tagValueProcessor(ee,D,X,ge,fe);return he==null?D:typeof he!=typeof D||he!==D?he:this.options.trimValues?z(D,this.options.parseTagValue,this.options.numberParseOptions):D.trim()===D?z(D,this.options.parseTagValue,this.options.numberParseOptions):D}}function T(D){if(this.options.removeNSPrefix){const ee=D.split(":"),X=D.charAt(0)==="/"?"/":"";if(ee[0]==="xmlns")return"";ee.length===2&&(D=X+ee[1])}return D}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function L(D,ee,X){if(!this.options.ignoreAttributes&&typeof D=="string"){const ye=f.getAllMatches(D,R),ge=ye.length,fe={};for(let ie=0;ie<ge;ie++){const he=this.resolveNameSpace(ye[ie][1]);let Y=ye[ie][4],re=this.options.attributeNamePrefix+he;if(he.length)if(this.options.transformAttributeName&&(re=this.options.transformAttributeName(re)),re==="__proto__"&&(re="#__proto__"),Y!==void 0){this.options.trimValues&&(Y=Y.trim()),Y=this.replaceEntitiesValue(Y);const de=this.options.attributeValueProcessor(he,Y,ee);de==null?fe[re]=Y:typeof de!=typeof Y||de!==Y?fe[re]=de:fe[re]=z(Y,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(fe[re]=!0)}if(!Object.keys(fe).length)return;if(this.options.attributesGroupName){const ie={};return ie[this.options.attributesGroupName]=fe,ie}return fe}}const j=function(D){D=D.replace(/\r\n?/g,`
`);const ee=new d("!xml");let X=ee,ye="",ge="";for(let fe=0;fe<D.length;fe++)if(D[fe]==="<")if(D[fe+1]==="/"){const he=q(D,">",fe,"Closing Tag is not closed.");let Y=D.substring(fe+2,he).trim();if(this.options.removeNSPrefix){const be=Y.indexOf(":");be!==-1&&(Y=Y.substr(be+1))}this.options.transformTagName&&(Y=this.options.transformTagName(Y)),X&&(ye=this.saveTextToParentTag(ye,X,ge));const re=ge.substring(ge.lastIndexOf(".")+1);if(Y&&this.options.unpairedTags.indexOf(Y)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${Y}>`);let de=0;re&&this.options.unpairedTags.indexOf(re)!==-1?(de=ge.lastIndexOf(".",ge.lastIndexOf(".")-1),this.tagsNodeStack.pop()):de=ge.lastIndexOf("."),ge=ge.substring(0,de),X=this.tagsNodeStack.pop(),ye="",fe=he}else if(D[fe+1]==="?"){let he=W(D,fe,!1,"?>");if(!he)throw new Error("Pi Tag is not closed.");if(ye=this.saveTextToParentTag(ye,X,ge),!(this.options.ignoreDeclaration&&he.tagName==="?xml"||this.options.ignorePiTags)){const Y=new d(he.tagName);Y.add(this.options.textNodeName,""),he.tagName!==he.tagExp&&he.attrExpPresent&&(Y[":@"]=this.buildAttributesMap(he.tagExp,ge,he.tagName)),this.addChild(X,Y,ge)}fe=he.closeIndex+1}else if(D.substr(fe+1,3)==="!--"){const he=q(D,"-->",fe+4,"Comment is not closed.");if(this.options.commentPropName){const Y=D.substring(fe+4,he-2);ye=this.saveTextToParentTag(ye,X,ge),X.add(this.options.commentPropName,[{[this.options.textNodeName]:Y}])}fe=he}else if(D.substr(fe+1,2)==="!D"){const he=l(D,fe);this.docTypeEntities=he.entities,fe=he.i}else if(D.substr(fe+1,2)==="!["){const he=q(D,"]]>",fe,"CDATA is not closed.")-2,Y=D.substring(fe+9,he);if(ye=this.saveTextToParentTag(ye,X,ge),this.options.cdataPropName)X.add(this.options.cdataPropName,[{[this.options.textNodeName]:Y}]);else{let re=this.parseTextData(Y,X.tagname,ge,!0,!1,!0);re==null&&(re=""),X.add(this.options.textNodeName,re)}fe=he+2}else{let he=W(D,fe,this.options.removeNSPrefix),Y=he.tagName;const re=he.rawTagName;let de=he.tagExp,be=he.attrExpPresent,Pe=he.closeIndex;this.options.transformTagName&&(Y=this.options.transformTagName(Y)),X&&ye&&X.tagname!=="!xml"&&(ye=this.saveTextToParentTag(ye,X,ge,!1));const $e=X;if($e&&this.options.unpairedTags.indexOf($e.tagname)!==-1&&(X=this.tagsNodeStack.pop(),ge=ge.substring(0,ge.lastIndexOf("."))),Y!==ee.tagname&&(ge+=ge?"."+Y:Y),this.isItStopNode(this.options.stopNodes,ge,Y)){let Ce="";if(de.length>0&&de.lastIndexOf("/")===de.length-1)fe=he.closeIndex;else if(this.options.unpairedTags.indexOf(Y)!==-1)fe=he.closeIndex;else{const He=this.readStopNodeData(D,re,Pe+1);if(!He)throw new Error(`Unexpected end of ${re}`);fe=He.i,Ce=He.tagContent}const Fe=new d(Y);Y!==de&&be&&(Fe[":@"]=this.buildAttributesMap(de,ge,Y)),Ce&&(Ce=this.parseTextData(Ce,Y,ge,!0,be,!0,!0)),ge=ge.substr(0,ge.lastIndexOf(".")),Fe.add(this.options.textNodeName,Ce),this.addChild(X,Fe,ge)}else{if(de.length>0&&de.lastIndexOf("/")===de.length-1){Y[Y.length-1]==="/"?(Y=Y.substr(0,Y.length-1),ge=ge.substr(0,ge.length-1),de=Y):de=de.substr(0,de.length-1),this.options.transformTagName&&(Y=this.options.transformTagName(Y));const Ce=new d(Y);Y!==de&&be&&(Ce[":@"]=this.buildAttributesMap(de,ge,Y)),this.addChild(X,Ce,ge),ge=ge.substr(0,ge.lastIndexOf("."))}else{const Ce=new d(Y);this.tagsNodeStack.push(X),Y!==de&&be&&(Ce[":@"]=this.buildAttributesMap(de,ge,Y)),this.addChild(X,Ce,ge),X=Ce}ye="",fe=Pe}}else ye+=D[fe];return ee.child};function le(D,ee,X){const ye=this.options.updateTag(ee.tagname,X,ee[":@"]);ye===!1||(typeof ye=="string"&&(ee.tagname=ye),D.addChild(ee))}const K=function(D){if(this.options.processEntities){for(let ee in this.docTypeEntities){const X=this.docTypeEntities[ee];D=D.replace(X.regx,X.val)}for(let ee in this.lastEntities){const X=this.lastEntities[ee];D=D.replace(X.regex,X.val)}if(this.options.htmlEntities)for(let ee in this.htmlEntities){const X=this.htmlEntities[ee];D=D.replace(X.regex,X.val)}D=D.replace(this.ampEntity.regex,this.ampEntity.val)}return D};function Z(D,ee,X,ye){return D&&(ye===void 0&&(ye=Object.keys(ee.child).length===0),D=this.parseTextData(D,ee.tagname,X,!1,ee[":@"]?Object.keys(ee[":@"]).length!==0:!1,ye),D!==void 0&&D!==""&&ee.add(this.options.textNodeName,D),D=""),D}function G(D,ee,X){const ye="*."+X;for(const ge in D){const fe=D[ge];if(ye===fe||ee===fe)return!0}return!1}function se(D,ee,X=">"){let ye,ge="";for(let fe=ee;fe<D.length;fe++){let ie=D[fe];if(ye)ie===ye&&(ye="");else if(ie==='"'||ie==="'")ye=ie;else if(ie===X[0])if(X[1]){if(D[fe+1]===X[1])return{data:ge,index:fe}}else return{data:ge,index:fe};else ie==="	"&&(ie=" ");ge+=ie}}function q(D,ee,X,ye){const ge=D.indexOf(ee,X);if(ge===-1)throw new Error(ye);return ge+ee.length-1}function W(D,ee,X,ye=">"){const ge=se(D,ee+1,ye);if(!ge)return;let fe=ge.data;const ie=ge.index,he=fe.search(/\s/);let Y=fe,re=!0;he!==-1&&(Y=fe.substring(0,he),fe=fe.substring(he+1).trimStart());const de=Y;if(X){const be=Y.indexOf(":");be!==-1&&(Y=Y.substr(be+1),re=Y!==ge.data.substr(be+1))}return{tagName:Y,tagExp:fe,closeIndex:ie,attrExpPresent:re,rawTagName:de}}function P(D,ee,X){const ye=X;let ge=1;for(;X<D.length;X++)if(D[X]==="<")if(D[X+1]==="/"){const fe=q(D,">",X,`${ee} is not closed`);if(D.substring(X+2,fe).trim()===ee&&(ge--,ge===0))return{tagContent:D.substring(ye,X),i:fe};X=fe}else if(D[X+1]==="?")X=q(D,"?>",X+1,"StopNode is not closed.");else if(D.substr(X+1,3)==="!--")X=q(D,"-->",X+3,"StopNode is not closed.");else if(D.substr(X+1,2)==="![")X=q(D,"]]>",X,"StopNode is not closed.")-2;else{const fe=W(D,X,">");fe&&((fe&&fe.tagName)===ee&&fe.tagExp[fe.tagExp.length-1]!=="/"&&ge++,X=fe.closeIndex)}}function z(D,ee,X){if(ee&&typeof D=="string"){const ye=D.trim();return ye==="true"?!0:ye==="false"?!1:w(D,X)}else return f.isExist(D)?D:""}a.exports=E},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:f}=i("./OptionsBuilder"),d=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),w=i("../validator");class E{constructor(b){this.externalEntities={},this.options=f(b)}parse(b,T){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const j=w.validate(b,T);if(j!==!0)throw Error(`${j.err.msg}:${j.err.line}:${j.err.col}`)}const R=new d(this.options);R.addExternalEntities(this.externalEntities);const L=R.parseXml(b);return this.options.preserveOrder||L===void 0?L:l(L,this.options)}addEntity(b,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(T==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=T}}a.exports=E},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function f(C,b){return d(C,b)}function d(C,b,T){let R;const L={};for(let j=0;j<C.length;j++){const le=C[j],K=l(le);let Z="";if(T===void 0?Z=K:Z=T+"."+K,K===b.textNodeName)R===void 0?R=le[K]:R+=""+le[K];else{if(K===void 0)continue;if(le[K]){let G=d(le[K],b,Z);const se=E(G,b);le[":@"]?w(G,le[":@"],Z,b):Object.keys(G).length===1&&G[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?G=G[b.textNodeName]:Object.keys(G).length===0&&(b.alwaysCreateTextNode?G[b.textNodeName]="":G=""),L[K]!==void 0&&L.hasOwnProperty(K)?(Array.isArray(L[K])||(L[K]=[L[K]]),L[K].push(G)):b.isArray(K,Z,se)?L[K]=[G]:L[K]=G}}}return typeof R=="string"?R.length>0&&(L[b.textNodeName]=R):R!==void 0&&(L[b.textNodeName]=R),L}function l(C){const b=Object.keys(C);for(let T=0;T<b.length;T++){const R=b[T];if(R!==":@")return R}}function w(C,b,T,R){if(b){const L=Object.keys(b),j=L.length;for(let le=0;le<j;le++){const K=L[le];R.isArray(K,T+"."+K,!0,!0)?C[K]=[b[K]]:C[K]=b[K]}}}function E(C,b){const{textNodeName:T}=b,R=Object.keys(C).length;return!!(R===0||R===1&&(C[T]||typeof C[T]=="boolean"||C[T]===0))}c.prettify=f},{}],13:[function(i,a,c){class f{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,w){l==="__proto__"&&(l="#__proto__"),this.child.push({[l]:w})}addChild(l){l.tagname==="__proto__"&&(l.tagname="#__proto__"),l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,":@":l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=f},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(f,d,l,w,E){var C,b,T=E*8-w-1,R=(1<<T)-1,L=R>>1,j=-7,le=l?E-1:0,K=l?-1:1,Z=f[d+le];for(le+=K,C=Z&(1<<-j)-1,Z>>=-j,j+=T;j>0;C=C*256+f[d+le],le+=K,j-=8);for(b=C&(1<<-j)-1,C>>=-j,j+=w;j>0;b=b*256+f[d+le],le+=K,j-=8);if(C===0)C=1-L;else{if(C===R)return b?NaN:(Z?-1:1)*(1/0);b=b+Math.pow(2,w),C=C-L}return(Z?-1:1)*b*Math.pow(2,C-w)},c.write=function(f,d,l,w,E,C){var b,T,R,L=C*8-E-1,j=(1<<L)-1,le=j>>1,K=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=w?0:C-1,G=w?1:-1,se=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(T=isNaN(d)?1:0,b=j):(b=Math.floor(Math.log(d)/Math.LN2),d*(R=Math.pow(2,-b))<1&&(b--,R*=2),b+le>=1?d+=K/R:d+=K*Math.pow(2,1-le),d*R>=2&&(b++,R/=2),b+le>=j?(T=0,b=j):b+le>=1?(T=(d*R-1)*Math.pow(2,E),b=b+le):(T=d*Math.pow(2,le-1)*Math.pow(2,E),b=0));E>=8;f[l+Z]=T&255,Z+=G,T/=256,E-=8);for(b=b<<E|T,L+=E;L>0;f[l+Z]=b&255,Z+=G,b/=256,L-=8);f[l+Z-G]|=se*128}},{}],15:[function(i,a,c){const f=/^[-+]?0x[a-fA-F0-9]+$/,d=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function w(C,b={}){if(b=Object.assign({},l,b),!C||typeof C!="string")return C;let T=C.trim();if(b.skipLike!==void 0&&b.skipLike.test(T))return C;if(b.hex&&f.test(T))return Number.parseInt(T,16);{const R=d.exec(T);if(R){const L=R[1],j=R[2];let le=E(R[3]);const K=R[4]||R[6];if(!b.leadingZeros&&j.length>0&&L&&T[2]!==".")return C;if(!b.leadingZeros&&j.length>0&&!L&&T[1]!==".")return C;{const Z=Number(T),G=""+Z;return G.search(/[eE]/)!==-1||K?b.eNotation?Z:C:T.indexOf(".")!==-1?G==="0"&&le===""||G===le||L&&G==="-"+le?Z:C:j?le===G||L+le===G?Z:C:T===G||T===L+G?Z:C}}else return C}}function E(C){return C&&C.indexOf(".")!==-1&&(C=C.replace(/0+$/,""),C==="."?C="0":C[0]==="."?C="0"+C:C[C.length-1]==="."&&(C=C.substr(0,C.length-1))),C}a.exports=w},{}],16:[function(i,a,c){(function(f){(function(){var d=this&&this.__awaiter||function(T,R,L,j){function le(K){return K instanceof L?K:new L(function(Z){Z(K)})}return new(L||(L=Promise))(function(K,Z){function G(W){try{q(j.next(W))}catch(P){Z(P)}}function se(W){try{q(j.throw(W))}catch(P){Z(P)}}function q(W){W.done?K(W.value):le(W.value).then(G,se)}q((j=j.apply(T,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const l=i("../auth"),w=i("../config"),E=i("./_xml"),C=T=>typeof btoa>"u"?f.from(T,"binary").toString("base64"):btoa(T);function b(T,R,L){return d(this,void 0,void 0,function*(){const{apiUrl:j,authHeader:le,basicAuth:K,userAgent:Z}=(0,w.getConfig)(),G=K&&`Basic ${C(`${K.username}:${K.password}`)}`,se=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let q=new URLSearchParams(R).toString();q&&(q=`?${q}`);const W=yield fetch(`${j}/api${T}${q}`,Object.assign(Object.assign({},L),{headers:Object.assign({Authorization:le||G||se||"","User-Agent":Z},L==null?void 0:L.headers)})),P=W.headers.get("Content-Type");if(P!=null&&P.startsWith("application/xml")){const z=yield W.text();return yield E.xmlParser.parse(z)}if(P!=null&&P.startsWith("application/json"))return W.json();if(W.ok)return yield W.text();throw new Error(`OSM API: ${yield W.text()}`)})}c.osmFetch=b}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const f=i("fast-xml-parser");c.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:d=>d!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const f=i("fast-xml-parser"),d=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(C){return d.build({osm:{changeset:{tag:Object.entries(C).map(([b,T])=>({$k:b,$v:T}))}}})}c.createChangesetMetaXml=l;const w=(C,b,T)=>b.reduce((R,L)=>{const j={$id:L.id,$version:T?0:L.version,$changeset:C,tag:Object.entries(L.tags||{}).map(([le,K])=>({$k:le,$v:K}))};switch(L.type){case"node":{const le=Object.assign(Object.assign({},j),{$lat:L.lat,$lon:L.lon});return Object.assign(Object.assign({},R),{node:[...R.node,le]})}case"way":{if(!L.nodes)throw new Error("Way has no nodes");const le=Object.assign(Object.assign({},j),{nd:L.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},R),{way:[...R.way,le]})}case"relation":{if(!L.members)throw new Error("Relation has no members");const le=Object.assign(Object.assign({},j),{member:L.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,le]})}default:return R}},{node:[],way:[],relation:[]});function E(C,b,T){return d.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[w(C,b.create,!0)],modify:[w(C,b.modify)],delete:[Object.assign({"$if-unused":!0},w(C,b.delete))]})})}c.createOsmChangeXml=E},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const f=i("../_xml");function d(C){return{changeset:+C.$.changeset,id:+C.$.id,timestamp:C.$.timestamp,uid:+C.$.uid,user:C.$.user,version:+C.$.version,tags:C.tag?Object.fromEntries(C.tag.map(b=>[b.$.k,b.$.v])):void 0}}const l=C=>{const b=[];if(C.node){const T=C.node.map(R=>Object.assign(Object.assign({type:"node"},d(R)),{lat:+R.$.lat,lon:+R.$.lon}));b.push(...T)}if(C.way){const T=C.way.map(R=>{var L;return Object.assign(Object.assign({type:"way"},d(R)),{nodes:((L=R.nd)===null||L===void 0?void 0:L.map(j=>+j.$.ref))||[]})});b.push(...T)}if(C.relation){const T=C.relation.map(R=>{var L;return Object.assign(Object.assign({type:"relation"},d(R)),{members:((L=R.member)===null||L===void 0?void 0:L.map(j=>({ref:+j.$.ref,role:j.$.role,type:j.$.type})))||[]})});b.push(...T)}return b};function w(C){var b,T,R;return{create:((b=C.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(l))||[],modify:((T=C.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(l))||[],delete:((R=C.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(l))||[]}}c.parseOsmChangeJson=w;function E(C){const b=f.xmlParser.parse(C);return w(b)}c.parseOsmChangeXml=E},{"../_xml":17}],20:[function(i,a,c){var f=this&&this.__awaiter||function(w,E,C,b){function T(R){return R instanceof C?R:new C(function(L){L(R)})}return new(C||(C=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function le(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const d=i("../_osmFetch");function l(w,E){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/changeset/${w}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(E)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,a,c){var f=this&&this.__awaiter||function(E,C,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function le(G){try{Z(T.next(G))}catch(se){j(se)}}function K(G){try{Z(T.throw(G))}catch(se){j(se)}}function Z(G){G.done?L(G.value):R(G.value).then(le,K)}Z((T=T.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const d=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function w(E){return f(this,void 0,void 0,function*(){const C=yield(0,d.osmFetch)(`/0.6/changeset/${E}/download`);return(0,l.parseOsmChangeJson)(C)})}c.getChangesetDiff=w},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var f=this&&this.__awaiter||function(b,T,R,L){function j(le){return le instanceof R?le:new R(function(K){K(le)})}return new(R||(R=Promise))(function(le,K){function Z(q){try{se(L.next(q))}catch(W){K(W)}}function G(q){try{se(L.throw(q))}catch(W){K(W)}}function se(q){q.done?le(q.value):j(q.value).then(Z,G)}se((L=L.apply(b,T||[])).next())})},d=this&&this.__rest||function(b,T){var R={};for(var L in b)Object.prototype.hasOwnProperty.call(b,L)&&T.indexOf(L)<0&&(R[L]=b[L]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,L=Object.getOwnPropertySymbols(b);j<L.length;j++)T.indexOf(L[j])<0&&Object.prototype.propertyIsEnumerable.call(b,L[j])&&(R[L[j]]=b[L[j]]);return R};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const l=i("../_osmFetch"),w=b=>{var T;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(R=>[R.$.k,R.$.v])),discussion:(T=b.discussion)===null||T===void 0?void 0:T[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function E(b){var T;return f(this,void 0,void 0,function*(){const{only:R}=b,L=d(b,["only"]);return((T=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),L))).osm[0].changeset)===null||T===void 0?void 0:T.map(w))||[]})}c.listChangesets=E;function C(b,T=!0){return f(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:T})).osm[0].changeset.map(w)[0]})}c.getChangeset=C},{"../_osmFetch":16}],23:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(E,C,b,T){T===void 0&&(T=b);var R=Object.getOwnPropertyDescriptor(C,b);(!R||("get"in R?!C.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return C[b]}}),Object.defineProperty(E,T,R)}:function(E,C,b,T){T===void 0&&(T=b),E[T]=C[b]}),d=this&&this.__exportStar||function(E,C){for(var b in E)b!=="default"&&!Object.prototype.hasOwnProperty.call(C,b)&&f(C,E,b)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,d(i("./createChangesetComment"),c),d(i("./getChangesetDiff"),c),d(i("./getChangesets"),c),d(i("./uploadChangeset"),c);var l=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var w=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return w.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var f=this&&this.__awaiter||function(E,C,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function le(G){try{Z(T.next(G))}catch(se){j(se)}}function K(G){try{Z(T.throw(G))}catch(se){j(se)}}function Z(G){G.done?L(G.value):R(G.value).then(le,K)}Z((T=T.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const d=i("../_osmFetch"),l=i("./_createOsmChangeXml");function w(E,C){return f(this,void 0,void 0,function*(){const b=(0,l.createChangesetMetaXml)(E),T=+(yield(0,d.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,l.createOsmChangeXml)(T,C);return yield(0,d.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,d.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}c.uploadChangeset=w},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var f=this&&this.__awaiter||function(w,E,C,b){function T(R){return R instanceof C?R:new C(function(L){L(R)})}return new(C||(C=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function le(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const d=i("./_osmFetch");function l(){var w;return f(this,void 0,void 0,function*(){const E=yield(0,d.osmFetch)("/capabilities");return{limits:{maxArea:+E.osm[0].api[0].area[0].$.maximum,maxNoteArea:+E.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+E.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+E.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+E.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+E.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((w=E.osm[0].policy[0].imagery[0].blacklist)===null||w===void 0?void 0:w.map(b=>b.$.regex))||[]}}})}c.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,a,c){var f=this&&this.__awaiter||function(R,L,j,le){function K(Z){return Z instanceof j?Z:new j(function(G){G(Z)})}return new(j||(j=Promise))(function(Z,G){function se(P){try{W(le.next(P))}catch(z){G(z)}}function q(P){try{W(le.throw(P))}catch(z){G(z)}}function W(P){P.done?Z(P.value):K(P.value).then(se,q)}W((le=le.apply(R,L||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const d=i("./_osmFetch");function l(R,L,j){return f(this,void 0,void 0,function*(){const le=j&&R!=="node"?"/full":"";return(yield(0,d.osmFetch)(`/0.6/${R}/${L}${le}.json`)).elements})}c.getFeature=l;function w(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}s.json?${R}s=${L.join(",")}`)).elements})}c.getFeatures=w;function E(R,L,j){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/${j}.json`)).elements[0]})}c.getFeatureAtVersion=E;function C(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/history.json`)).elements})}c.getFeatureHistory=C;function b(R){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}c.getWaysForNode=b;function T(R,L){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${L}/relations.json`)).elements})}c.getRelationsForElement=T},{"./_osmFetch":16}],27:[function(i,a,c){var f=this&&this.__awaiter||function(w,E,C,b){function T(R){return R instanceof C?R:new C(function(L){L(R)})}return new(C||(C=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function le(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const d=i("./_osmFetch");function l(w){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/map.json",{bbox:w})).elements})}c.getMapData=l},{"./_osmFetch":16}],28:[function(i,a,c){var f=this&&this.__awaiter||function(w,E,C,b){function T(R){return R instanceof C?R:new C(function(L){L(R)})}return new(C||(C=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function le(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const d=i("./changesets");function l(w){return f(this,void 0,void 0,function*(){const E=yield(0,d.listChangesets)({display_name:w});if(!E.length)throw new Error("Could not get uid because the user has never edited the map");return E[0].uid})}c.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,a,c){var f=this&&this.__awaiter||function(E,C,b,T){function R(L){return L instanceof b?L:new b(function(j){j(L)})}return new(b||(b=Promise))(function(L,j){function le(G){try{Z(T.next(G))}catch(se){j(se)}}function K(G){try{Z(T.throw(G))}catch(se){j(se)}}function Z(G){G.done?L(G.value):R(G.value).then(le,K)}Z((T=T.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const d=i("./_osmFetch");function l(E){return f(this,void 0,void 0,function*(){const C=yield(0,d.osmFetch)(`/0.6/user/${E==="me"?"details":E}.json`);return Object.assign(Object.assign({},C.user),{account_created:new Date(C.user.account_created)})})}c.getUser=l;function w(E){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/users",{users:E})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}c.getUsers=w},{"./_osmFetch":16}],30:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,C){C===void 0&&(C=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,C,b)}:function(l,w,E,C){C===void 0&&(C=E),l[C]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./changesets"),c),d(i("./notes"),c),d(i("./getCapabilities"),c),d(i("./getFeature"),c),d(i("./getMapData"),c),d(i("./getUIdFromDisplayName"),c),d(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var f=this&&this.__awaiter||function(T,R,L,j){function le(K){return K instanceof L?K:new L(function(Z){Z(K)})}return new(L||(L=Promise))(function(K,Z){function G(W){try{q(j.next(W))}catch(P){Z(P)}}function se(W){try{q(j.throw(W))}catch(P){Z(P)}}function q(W){W.done?K(W.value):le(W.value).then(G,se)}q((j=j.apply(T,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const d=i("../_osmFetch"),l=T=>{const[R,L]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:L,lng:R}})};function w(T,R){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/notes${R?"/search":""}.json`,T)).features.map(l)})}function E(T){return w(T,!0)}c.getNotesForQuery=E;function C(T){return w({bbox:T},!1)}c.getNotesForArea=C;function b(T){return f(this,void 0,void 0,function*(){const R=yield(0,d.osmFetch)(`/0.6/notes/${T}.json`);return l(R)})}c.getNote=b},{"../_osmFetch":16}],32:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,C){C===void 0&&(C=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,C,b)}:function(l,w,E,C){C===void 0&&(C=E),l[C]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./getNotes"),c),d(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var f=this&&this.__awaiter||function(C,b,T,R){function L(j){return j instanceof T?j:new T(function(le){le(j)})}return new(T||(T=Promise))(function(j,le){function K(se){try{G(R.next(se))}catch(q){le(q)}}function Z(se){try{G(R.throw(se))}catch(q){le(q)}}function G(se){se.done?j(se.value):L(se.value).then(K,Z)}G((R=R.apply(C,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const d=i("../_osmFetch");function l(C,b,T){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)("/0.6/notes",{lat:C,lon:b,text:T})})}c.createNote=l;function w(C,b){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${C}/comment`,{text:b})})}c.commentOnNote=w;function E(C,b){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${C}/reopen`,{text:b})})}c.reopenNote=E},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function f(d){let l=!1;return new Promise((w,E)=>{const[C,b]=[600,550],T=Object.entries({width:C,height:b,left:window.screen.width/2-C/2,top:window.screen.height/2-b/2}).map(([j,le])=>`${j}=${le}`).join(","),R=window.open("about:blank","oauth_window",T);if(!R)throw new Error("Popup was blocked");R.location=d,window.authComplete=j=>{w(j),l=!0};const L=setInterval(()=>{R.closed&&(l||E(new Error("Cancelled")),clearInterval(L))},500)})}c.createPopup=f},{}],35:[function(i,a,c){var f=this&&this.__awaiter||function(w,E,C,b){function T(R){return R instanceof C?R:new C(function(L){L(R)})}return new(C||(C=Promise))(function(R,L){function j(Z){try{K(b.next(Z))}catch(G){L(G)}}function le(Z){try{K(b.throw(Z))}catch(G){L(G)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,le)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const d=i("./helpers");function l(w,{options:E,pkceVerifier:C,state:b}){return f(this,void 0,void 0,function*(){const T=new URL(w).searchParams,R=T.get("error_description"),L=T.get("code"),j=T.get("state");if(R)throw new Error(R);if(!L)throw new Error("No code in OAuth response");if(!C||!b)throw new Error("No login in progress");if(b!==j)throw new Error("State Mismatch");const le={grant_type:"authorization_code",code:L,redirect_uri:E.redirectUrl,client_id:E.clientId,code_verifier:C},K=`${(0,d.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(le).toString()}`,G=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in G)throw new Error(G.error_description);const se={issuedAt:new Date(G.created_at*1e3).toISOString(),accessToken:G.access_token,scopes:G.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(se)),delete window.authComplete,se})}c.exchangeCode=l},{"./helpers":36}],36:[function(i,a,c){var f=this&&this.__awaiter||function(C,b,T,R){function L(j){return j instanceof T?j:new T(function(le){le(j)})}return new(T||(T=Promise))(function(j,le){function K(se){try{G(R.next(se))}catch(q){le(q)}}function Z(se){try{G(R.throw(se))}catch(q){le(q)}}function G(se){se.done?j(se.value):L(se.value).then(K,Z)}G((R=R.apply(C,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const d=i("../config");function l(C){return f(this,void 0,void 0,function*(){const b=new TextEncoder().encode(C),T=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(T))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=l;function w(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(C=>`0${C.toString(16)}`.slice(-2)).join("")}c.getRandomString=w;function E(){let C=(0,d.getConfig)().apiUrl;return C==="https://api.openstreetmap.org"&&(C="https://www.openstreetmap.org"),C}c.getOAuthBaseUrl=E},{"../config":39}],37:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,C){C===void 0&&(C=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,C,b)}:function(l,w,E,C){C===void 0&&(C=E),l[C]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var f=this&&this.__awaiter||function(R,L,j,le){function K(Z){return Z instanceof j?Z:new j(function(G){G(Z)})}return new(j||(j=Promise))(function(Z,G){function se(P){try{W(le.next(P))}catch(z){G(z)}}function q(P){try{W(le.throw(P))}catch(z){G(z)}}function W(P){P.done?Z(P.value):K(P.value).then(se,q)}W((le=le.apply(R,L||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const d=i("./createPopup"),l=i("./exchangeCode"),w=i("./helpers");function E(R){return f(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const L=(0,w.getRandomString)(),j=(0,w.getRandomString)(),le=yield(0,w.sha256)(j),K={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:L,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:le},Z=`${(0,w.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,G={state:L,pkceVerifier:j,options:R};if(R.mode==="popup"){const se=yield(0,d.createPopup)(Z);return(0,l.exchangeCode)(se,G)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(G)),window.location.replace(Z);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=E,c.authReady=f(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const L=window.location.href,j=localStorage.getItem("__osmAuthTemp");if(new URL(L).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(L),window.close();else if(j)try{const le=JSON.parse(j);yield(0,l.exchangeCode)(L,le),localStorage.removeItem("__osmAuthTemp")}catch(le){console.error("OSM Auth Error",le)}}});const C=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};c.getAuthToken=C;const b=()=>!!(0,c.getAuthToken)();c.isLoggedIn=b;function T(){localStorage.removeItem("__osmAuth")}c.logout=T},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},d=()=>f;c.getConfig=d;function l(w){Object.assign(f,w)}c.configure=l},{}],40:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,C){C===void 0&&(C=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,C,b)}:function(l,w,E,C){C===void 0&&(C=E),l[C]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./api"),c),d(i("./auth"),c),d(i("./config"),c),d(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,C){C===void 0&&(C=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,C,b)}:function(l,w,E,C){C===void 0&&(C=E),l[C]=w[E]}),d=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./changesets"),c),d(i("./features"),c),d(i("./general"),c),d(i("./notes"),c),d(i("./osmPatch"),c),d(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(vk);var Us=vk.exports;const _k=()=>{const[e,t]=yt.useState(!1);yt.useEffect(()=>{t(Us.isLoggedIn())},[]);const i=yt.useCallback(()=>{(async()=>(await Us.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Us.isLoggedIn()),window.location.reload()))()},[]),a=yt.useCallback(()=>{(async()=>(Us.logout(),t(!1)))()},[]);return gt.jsx(gt.Fragment,{children:e?gt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):gt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},v6=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Us.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Us.getUser("me");a(c)})()},[e]),gt.jsx(gt.Fragment,{children:i?gt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):gt.jsx("img",{})})},_6=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Us.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Us.getUser("me");a(c)})()},[e]),gt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[gt.jsxs("div",{children:[gt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?gt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):gt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),gt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[gt.jsx("div",{children:gt.jsx(v6,{})}),gt.jsx("div",{children:gt.jsx(_k,{})})]})]})},xk=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return gt.jsxs(gt.Fragment,{children:[gt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",gt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},x6=({feature:e})=>gt.jsx(gt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return gt.jsxs("div",{className:t,children:[gt.jsx("span",{className:"underline",children:t})," = ",gt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Gd(e,t,i){return parseInt(e.substr(t,i),16)}function wk(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function p_(e,t,i){return i=i<0?i+6:i>6?i-6:i,wk(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function w6(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],f=e[3],d=e[4]||"";t="#"+a+a+c+c+f+f+d+d}return(i==7||i>8)&&(t=e),t}}function b6(e,t,i){let a;if(t==0){const c=wk(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,f=i*2-c;a=p_(f,c,e*6+2)+p_(f,c,e*6)+p_(f,c,e*6-2)}return"#"+a}function Rd(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,b6(e,t,i)}const S6=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},HT={V:"jdenticon_config",n:"config"};var E6={};function T6(e,t){const i=typeof e=="object"&&e||E6[HT.n]||S6[HT.V]||{},a=i.lightness||{},c=i.saturation||{},f="color"in c?c.color:c,d=c.grayscale,l=i.backColor,w=i.padding;function E(b,T){let R=a[b];return R&&R.length>1||(R=T),function(L){return L=R[0]+L*(R[1]-R[0]),L<0?0:L>1?1:L}}function C(b){const T=i.hues;let R;return T&&T.length>0&&(R=T[0|.999*b*T.length]),typeof R=="number"?(R/360%1+1)%1:b}return{W:C,o:typeof f=="number"?f:.5,D:typeof d=="number"?d:0,p:E("color",[.4,.8]),F:E("grayscale",[.3,.9]),G:w6(l),X:typeof e=="number"?e:typeof w=="number"?w:t}}let ig=class{constructor(t,i){this.x=t,this.y=i}};class bk{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const f=this.q+this.H,d=this.t+this.H,l=this.Y;return l===1?new ig(f-i-(c||0),this.t+t):l===2?new ig(f-t-(a||0),d-i-(c||0)):l===3?new ig(this.q+i,d-t-(a||0)):new ig(this.q+t,this.t+i)}}const P6=new bk(0,0,0,0);class A6{constructor(t){this.J=t,this.u=P6}g(t,i){const a=i?-2:2,c=[];for(let f=i?t.length-2:0;f<t.length&&f>=0;f+=a)c.push(this.u.I(t[f],t[f+1]));this.J.g(c)}h(t,i,a,c){const f=this.u.I(t,i,a,a);this.J.h(f,a,c)}i(t,i,a,c,f){this.g([t,i,t+a,i,t+a,i+c,t,i+c],f)}j(t,i,a,c,f,d){const l=[t+a,i,t+a,i+c,t,i+c,t,i];l.splice((f||0)%4*2,2),this.g(l,d)}K(t,i,a,c,f){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],f)}}function I6(e,t,i,a){e=e%14;let c,f,d,l,w,E;e?e==1?(d=0|i*.5,l=0|i*.8,t.j(i-d,0,d,l,2)):e==2?(d=0|i/3,t.i(d,d,i-d,i-d)):e==3?(w=i*.1,E=i<6?1:i<8?2:0|i*.25,w=w>1?0|w:w>.5?1:w,t.i(E,E,i-w-E,i-w-E)):e==4?(f=0|i*.15,d=0|i*.5,t.h(i-d-f,i-d-f,d)):e==5?(w=i*.1,E=w*4,E>3&&(E=0|E),t.i(0,0,i,i),t.g([E,E,i-w,E,E+(i-E-w)/2,i-w],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(w=i*.14,E=i<4?1:i<6?2:0|i*.35,w=i<8?w:0|w,t.i(0,0,i,i),t.i(E,E,i-E-w,i-E-w,!0)):e==10?(w=i*.12,E=w*3,t.i(0,0,i,i),t.h(E,E,i-w-E,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(f=i*.25,t.i(0,0,i,i),t.K(f,f,i-f,i-f,!0)):!a&&(f=i*.4,d=i*1.2,t.h(f,f,d)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function ZT(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function C6(e,t){return e=t.W(e),[Rd(e,t.D,t.F(0)),Rd(e,t.o,t.p(.5)),Rd(e,t.D,t.F(1)),Rd(e,t.o,t.p(1)),Rd(e,t.o,t.p(0))]}function M6(e,t,i){const a=T6(i,.08);a.G&&e.m(a.G);let c=e.k;const f=.5+c*a.X|0;c-=f*2;const d=new A6(e),l=0|c/4,w=0|f+c/2-l*2,E=0|f+c/2-l*2;function C(le,K,Z,G,se){const q=Gd(t,Z,1);let W=G?Gd(t,G,1):0;e.L(T[R[le]]);for(let P=0;P<se.length;P++)d.u=new bk(w+se[P][0]*l,E+se[P][1]*l,l,W++%4),K(q,d,l,P);e.M()}const b=Gd(t,-7)/268435455,T=C6(b,a),R=[];let L;function j(le){if(le.indexOf(L)>=0){for(let K=0;K<le.length;K++)if(R.indexOf(le[K])>=0)return!0}}for(let le=0;le<3;le++)L=Gd(t,8+le,1)%T.length,(j([0,4])||j([2,3]))&&(L=1),R.push(L);C(0,ZT,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),C(1,ZT,4,5,[[0,0],[3,0],[3,3],[0,3]]),C(2,I6,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function k6(e){var a=0,c=0,f=encodeURI(e)+"%80",d=[],l,w=[],E=1732584193,C=4023233417,b=~E,T=~C,R=3285377520,L=[E,C,b,T,R],j=0,le="";function K(Z,G){return Z<<G|Z>>>32-G}for(;a<f.length;c++)d[c>>2]=d[c>>2]|(f[a]=="%"?parseInt(f.substring(a+1,a+=3),16):f.charCodeAt(a++))<<(3-(c&3))*8;for(l=((c+7>>6)+1)*16,d[l-1]=c*8-8;j<l;j+=16){for(a=0;a<80;a++)c=K(E,5)+R+(a<20?(C&b^~C&T)+1518500249:a<40?(C^b^T)+1859775393:a<60?(C&b^C&T^b&T)+2400959708:(C^b^T)+3395469782)+(w[a]=a<16?d[j+a]|0:K(w[a-3]^w[a-8]^w[a-14]^w[a-16],1)),R=T,T=b,b=K(C,30),C=E,E=c;L[0]=E=L[0]+E|0,L[1]=C=L[1]+C|0,L[2]=b=L[2]+b|0,L[3]=T=L[3]+T|0,L[4]=R=L[4]+R|0}for(a=0;a<40;a++)le+=(L[a>>3]>>>(7-(a&7))*4&15).toString(16);return le}function O6(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function F6(e){return k6(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function gh(e){return(e*10+.5|0)/10}class R6{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+gh(t[a].x)+" "+gh(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,f=gh(i/2),d=gh(i),l="a"+f+","+f+" 0 1,"+c+" ";this.v+="M"+gh(t.x)+" "+gh(t.y+i/2)+l+d+",0"+l+-d+",0"}}class j6{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Gd(i[2],0)/255:1;this.O.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new R6)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.O.P(i,t[i].v)}}const z6={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class L6{constructor(t){this.k=t,this.C='<svg xmlns="'+z6.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}P(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function B6(e,t,i){const a=new L6(t);return M6(new j6(a),O6(e)||F6(e),i),a.toString()}const D6=({feature:e,size:t})=>e.properties===null?null:gt.jsx(gt.Fragment,{children:e.properties.userIconHref.length>0?gt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):gt.jsx("span",{dangerouslySetInnerHTML:{__html:B6(e.properties.user||"noname",t)}})}),N6=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?gt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null},$6={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},U6=({viewState:e})=>{const[t,i]=yt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),gt.jsx(gt.Fragment,{children:e&&t&&gt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[gt.jsx(vu,{icon:$6,style:{padding:"0px 3px"}}),gt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var Sk={};class Hi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const f=i[c],d=t+f,l=Math.abs(t)<Math.abs(f)?t-(d-f):f-(d-t);l&&(i[a++]=l),t=d}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,f,d=0;if(i>0){for(d=t[--i];i>0&&(a=d,c=t[--i],d=a+c,f=c-(d-a),!f););i>0&&(f<0&&t[i-1]<0||f>0&&t[i-1]>0)&&(c=f*2,a=d+c,c==a-d&&(d=a))}return d}}function*V6(e){for(const t of e)yield*t}function Ek(e){return Array.from(V6(e))}function Nh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,f=new Array(c);++a<c;)f[a]=e+a*i;return f}var fr=1e-6,zp=1e-12,Cr=Math.PI,Dn=Cr/2,wy=Cr/4,no=Cr*2,hn=180/Cr,mr=Cr/180,Dr=Math.abs,Ef=Math.atan,io=Math.atan2,or=Math.cos,og=Math.ceil,Tk=Math.exp,yx=Math.hypot,by=Math.log,m_=Math.pow,er=Math.sin,gs=Math.sign||function(e){return e>0?1:e<0?-1:0},mi=Math.sqrt,bb=Math.tan;function Pk(e){return e>1?0:e<-1?Cr:Math.acos(e)}function oo(e){return e>1?Dn:e<-1?-Dn:Math.asin(e)}function XT(e){return(e=er(e/2))*e}function kn(){}function Sy(e,t){e&&KT.hasOwnProperty(e.type)&&KT[e.type](e,t)}var qT={Feature:function(e,t){Sy(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)Sy(i[a].geometry,t)}},KT={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){vx(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)vx(i[a],t,0)},Polygon:function(e,t){JT(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)JT(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)Sy(i[a],t)}};function vx(e,t,i){var a=-1,c=e.length-i,f;for(t.lineStart();++a<c;)f=e[a],t.point(f[0],f[1],f[2]);t.lineEnd()}function JT(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)vx(e[i],t,1);t.polygonEnd()}function $s(e,t){e&&qT.hasOwnProperty(e.type)?qT[e.type](e,t):Sy(e,t)}var Ey=new Hi,Ty=new Hi,Ak,Ik,_x,xx,wx,Ia={point:kn,lineStart:kn,lineEnd:kn,polygonStart:function(){Ey=new Hi,Ia.lineStart=G6,Ia.lineEnd=W6},polygonEnd:function(){var e=+Ey;Ty.add(e<0?no+e:e),this.lineStart=this.lineEnd=this.point=kn},sphere:function(){Ty.add(no)}};function G6(){Ia.point=H6}function W6(){Ck(Ak,Ik)}function H6(e,t){Ia.point=Ck,Ak=e,Ik=t,e*=mr,t*=mr,_x=e,xx=or(t=t/2+wy),wx=er(t)}function Ck(e,t){e*=mr,t*=mr,t=t/2+wy;var i=e-_x,a=i>=0?1:-1,c=a*i,f=or(t),d=er(t),l=wx*d,w=xx*f+l*or(c),E=l*a*er(c);Ey.add(io(E,w)),_x=e,xx=f,wx=d}function Z6(e){return Ty=new Hi,$s(e,Ia),Ty*2}function Py(e){return[io(e[1],e[0]),oo(e[2])]}function Ec(e){var t=e[0],i=e[1],a=or(i);return[a*or(t),a*er(t),er(i)]}function sg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function g_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ag(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ay(e){var t=mi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Cn,go,Ln,Uo,sc,Mk,kk,Kh,up,ru,gl,il={point:bx,lineStart:YT,lineEnd:QT,polygonStart:function(){il.point=Fk,il.lineStart=X6,il.lineEnd=q6,up=new Hi,Ia.polygonStart()},polygonEnd:function(){Ia.polygonEnd(),il.point=bx,il.lineStart=YT,il.lineEnd=QT,Ey<0?(Cn=-(Ln=180),go=-(Uo=90)):up>fr?Uo=90:up<-fr&&(go=-90),gl[0]=Cn,gl[1]=Ln},sphere:function(){Cn=-(Ln=180),go=-(Uo=90)}};function bx(e,t){ru.push(gl=[Cn=e,Ln=e]),t<go&&(go=t),t>Uo&&(Uo=t)}function Ok(e,t){var i=Ec([e*mr,t*mr]);if(Kh){var a=cf(Kh,i),c=[a[1],-a[0],0],f=cf(c,a);Ay(f),f=Py(f);var d=e-sc,l=d>0?1:-1,w=f[0]*hn*l,E,C=Dr(d)>180;C^(l*sc<w&&w<l*e)?(E=f[1]*hn,E>Uo&&(Uo=E)):(w=(w+360)%360-180,C^(l*sc<w&&w<l*e)?(E=-f[1]*hn,E<go&&(go=E)):(t<go&&(go=t),t>Uo&&(Uo=t))),C?e<sc?$o(Cn,e)>$o(Cn,Ln)&&(Ln=e):$o(e,Ln)>$o(Cn,Ln)&&(Cn=e):Ln>=Cn?(e<Cn&&(Cn=e),e>Ln&&(Ln=e)):e>sc?$o(Cn,e)>$o(Cn,Ln)&&(Ln=e):$o(e,Ln)>$o(Cn,Ln)&&(Cn=e)}else ru.push(gl=[Cn=e,Ln=e]);t<go&&(go=t),t>Uo&&(Uo=t),Kh=i,sc=e}function YT(){il.point=Ok}function QT(){gl[0]=Cn,gl[1]=Ln,il.point=bx,Kh=null}function Fk(e,t){if(Kh){var i=e-sc;up.add(Dr(i)>180?i+(i>0?360:-360):i)}else Mk=e,kk=t;Ia.point(e,t),Ok(e,t)}function X6(){Ia.lineStart()}function q6(){Fk(Mk,kk),Ia.lineEnd(),Dr(up)>fr&&(Cn=-(Ln=180)),gl[0]=Cn,gl[1]=Ln,Kh=null}function $o(e,t){return(t-=e)<0?t+360:t}function K6(e,t){return e[0]-t[0]}function eP(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function J6(e){var t,i,a,c,f,d,l;if(Uo=Ln=-(Cn=go=1/0),ru=[],$s(e,il),i=ru.length){for(ru.sort(K6),t=1,a=ru[0],f=[a];t<i;++t)c=ru[t],eP(a,c[0])||eP(a,c[1])?($o(a[0],c[1])>$o(a[0],a[1])&&(a[1]=c[1]),$o(c[0],a[1])>$o(a[0],a[1])&&(a[0]=c[0])):f.push(a=c);for(d=-1/0,i=f.length-1,t=0,a=f[i];t<=i;a=c,++t)c=f[t],(l=$o(a[1],c[0]))>d&&(d=l,Cn=c[0],Ln=a[1])}return ru=gl=null,Cn===1/0||go===1/0?[[NaN,NaN],[NaN,NaN]]:[[Cn,go],[Ln,Uo]]}var Wd,Iy,Cy,My,ky,Oy,Fy,Ry,Sx,Ex,Tx,Rk,jk,Qi,eo,to,Vs={sphere:kn,point:Sb,lineStart:tP,lineEnd:rP,polygonStart:function(){Vs.lineStart=eB,Vs.lineEnd=tB},polygonEnd:function(){Vs.lineStart=tP,Vs.lineEnd=rP}};function Sb(e,t){e*=mr,t*=mr;var i=or(t);Kp(i*or(e),i*er(e),er(t))}function Kp(e,t,i){++Wd,Cy+=(e-Cy)/Wd,My+=(t-My)/Wd,ky+=(i-ky)/Wd}function tP(){Vs.point=Y6}function Y6(e,t){e*=mr,t*=mr;var i=or(t);Qi=i*or(e),eo=i*er(e),to=er(t),Vs.point=Q6,Kp(Qi,eo,to)}function Q6(e,t){e*=mr,t*=mr;var i=or(t),a=i*or(e),c=i*er(e),f=er(t),d=io(mi((d=eo*f-to*c)*d+(d=to*a-Qi*f)*d+(d=Qi*c-eo*a)*d),Qi*a+eo*c+to*f);Iy+=d,Oy+=d*(Qi+(Qi=a)),Fy+=d*(eo+(eo=c)),Ry+=d*(to+(to=f)),Kp(Qi,eo,to)}function rP(){Vs.point=Sb}function eB(){Vs.point=rB}function tB(){zk(Rk,jk),Vs.point=Sb}function rB(e,t){Rk=e,jk=t,e*=mr,t*=mr,Vs.point=zk;var i=or(t);Qi=i*or(e),eo=i*er(e),to=er(t),Kp(Qi,eo,to)}function zk(e,t){e*=mr,t*=mr;var i=or(t),a=i*or(e),c=i*er(e),f=er(t),d=eo*f-to*c,l=to*a-Qi*f,w=Qi*c-eo*a,E=yx(d,l,w),C=oo(E),b=E&&-C/E;Sx.add(b*d),Ex.add(b*l),Tx.add(b*w),Iy+=C,Oy+=C*(Qi+(Qi=a)),Fy+=C*(eo+(eo=c)),Ry+=C*(to+(to=f)),Kp(Qi,eo,to)}function nB(e){Wd=Iy=Cy=My=ky=Oy=Fy=Ry=0,Sx=new Hi,Ex=new Hi,Tx=new Hi,$s(e,Vs);var t=+Sx,i=+Ex,a=+Tx,c=yx(t,i,a);return c<zp&&(t=Oy,i=Fy,a=Ry,Iy<fr&&(t=Cy,i=My,a=ky),c=yx(t,i,a),c<zp)?[NaN,NaN]:[io(i,t)*hn,oo(a/c)*hn]}function yh(e){return function(){return e}}function Px(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function Ax(e,t){return[Dr(e)>Cr?e+Math.round(-e/no)*no:e,t]}Ax.invert=Ax;function Eb(e,t,i){return(e%=no)?t||i?Px(iP(e),oP(t,i)):iP(e):t||i?oP(t,i):Ax}function nP(e){return function(t,i){return t+=e,[t>Cr?t-no:t<-Cr?t+no:t,i]}}function iP(e){var t=nP(e);return t.invert=nP(-e),t}function oP(e,t){var i=or(e),a=er(e),c=or(t),f=er(t);function d(l,w){var E=or(w),C=or(l)*E,b=er(l)*E,T=er(w),R=T*i+C*a;return[io(b*c-R*f,C*i-T*a),oo(R*c+b*f)]}return d.invert=function(l,w){var E=or(w),C=or(l)*E,b=er(l)*E,T=er(w),R=T*c-b*f;return[io(b*c+T*f,C*i+R*a),oo(R*i-C*a)]},d}function Lk(e){e=Eb(e[0]*mr,e[1]*mr,e.length>2?e[2]*mr:0);function t(i){return i=e(i[0]*mr,i[1]*mr),i[0]*=hn,i[1]*=hn,i}return t.invert=function(i){return i=e.invert(i[0]*mr,i[1]*mr),i[0]*=hn,i[1]*=hn,i},t}function Bk(e,t,i,a,c,f){if(i){var d=or(t),l=er(t),w=a*i;c==null?(c=t+a*no,f=t-w/2):(c=sP(d,c),f=sP(d,f),(a>0?c<f:c>f)&&(c+=a*no));for(var E,C=c;a>0?C>f:C<f;C-=w)E=Py([d,-l*or(C),-l*er(C)]),e.point(E[0],E[1])}}function sP(e,t){t=Ec(t),t[0]-=e,Ay(t);var i=Pk(-t[1]);return((-t[2]<0?-i:i)+no-fr)%no}function iB(){var e=yh([0,0]),t=yh(90),i=yh(6),a,c,f={point:d};function d(w,E){a.push(w=c(w,E)),w[0]*=hn,w[1]*=hn}function l(){var w=e.apply(this,arguments),E=t.apply(this,arguments)*mr,C=i.apply(this,arguments)*mr;return a=[],c=Eb(-w[0]*mr,-w[1]*mr,0).invert,Bk(f,E,C,1),w={type:"Polygon",coordinates:[a]},a=c=null,w}return l.center=function(w){return arguments.length?(e=typeof w=="function"?w:yh([+w[0],+w[1]]),l):e},l.radius=function(w){return arguments.length?(t=typeof w=="function"?w:yh(+w),l):t},l.precision=function(w){return arguments.length?(i=typeof w=="function"?w:yh(+w),l):i},l}function Dk(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:kn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function kg(e,t){return Dr(e[0]-t[0])<fr&&Dr(e[1]-t[1])<fr}function lg(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function Nk(e,t,i,a,c){var f=[],d=[],l,w;if(e.forEach(function(L){if(!((j=L.length-1)<=0)){var j,le=L[0],K=L[j],Z;if(kg(le,K)){if(!le[2]&&!K[2]){for(c.lineStart(),l=0;l<j;++l)c.point((le=L[l])[0],le[1]);c.lineEnd();return}K[0]+=2*fr}f.push(Z=new lg(le,L,null,!0)),d.push(Z.o=new lg(le,null,Z,!1)),f.push(Z=new lg(K,L,null,!1)),d.push(Z.o=new lg(K,null,Z,!0))}}),!!f.length){for(d.sort(t),aP(f),aP(d),l=0,w=d.length;l<w;++l)d[l].e=i=!i;for(var E=f[0],C,b;;){for(var T=E,R=!0;T.v;)if((T=T.n)===E)return;C=T.z,c.lineStart();do{if(T.v=T.o.v=!0,T.e){if(R)for(l=0,w=C.length;l<w;++l)c.point((b=C[l])[0],b[1]);else a(T.x,T.n.x,1,c);T=T.n}else{if(R)for(C=T.p.z,l=C.length-1;l>=0;--l)c.point((b=C[l])[0],b[1]);else a(T.x,T.p.x,-1,c);T=T.p}T=T.o,C=T.z,R=!R}while(!T.v);c.lineEnd()}}}function aP(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function y_(e){return Dr(e[0])<=Cr?e[0]:gs(e[0])*((Dr(e[0])+Cr)%no-Cr)}function $k(e,t){var i=y_(t),a=t[1],c=er(a),f=[er(i),-or(i),0],d=0,l=0,w=new Hi;c===1?a=Dn+fr:c===-1&&(a=-Dn-fr);for(var E=0,C=e.length;E<C;++E)if(T=(b=e[E]).length)for(var b,T,R=b[T-1],L=y_(R),j=R[1]/2+wy,le=er(j),K=or(j),Z=0;Z<T;++Z,L=se,le=W,K=P,R=G){var G=b[Z],se=y_(G),q=G[1]/2+wy,W=er(q),P=or(q),z=se-L,D=z>=0?1:-1,ee=D*z,X=ee>Cr,ye=le*W;if(w.add(io(ye*D*er(ee),K*P+ye*or(ee))),d+=X?z+D*no:z,X^L>=i^se>=i){var ge=cf(Ec(R),Ec(G));Ay(ge);var fe=cf(f,ge);Ay(fe);var ie=(X^z>=0?-1:1)*oo(fe[2]);(a>ie||a===ie&&(ge[0]||ge[1]))&&(l+=X^z>=0?1:-1)}}return(d<-fr||d<fr&&w<-zp)^l&1}function Uk(e,t,i,a){return function(c){var f=t(c),d=Dk(),l=t(d),w=!1,E,C,b,T={point:R,lineStart:j,lineEnd:le,polygonStart:function(){T.point=K,T.lineStart=Z,T.lineEnd=G,C=[],E=[]},polygonEnd:function(){T.point=R,T.lineStart=j,T.lineEnd=le,C=Ek(C);var se=$k(E,a);C.length?(w||(c.polygonStart(),w=!0),Nk(C,sB,se,i,c)):se&&(w||(c.polygonStart(),w=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),w&&(c.polygonEnd(),w=!1),C=E=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function R(se,q){e(se,q)&&c.point(se,q)}function L(se,q){f.point(se,q)}function j(){T.point=L,f.lineStart()}function le(){T.point=R,f.lineEnd()}function K(se,q){b.push([se,q]),l.point(se,q)}function Z(){l.lineStart(),b=[]}function G(){K(b[0][0],b[0][1]),l.lineEnd();var se=l.clean(),q=d.result(),W,P=q.length,z,D,ee;if(b.pop(),E.push(b),b=null,!!P){if(se&1){if(D=q[0],(z=D.length-1)>0){for(w||(c.polygonStart(),w=!0),c.lineStart(),W=0;W<z;++W)c.point((ee=D[W])[0],ee[1]);c.lineEnd()}return}P>1&&se&2&&q.push(q.pop().concat(q.shift())),C.push(q.filter(oB))}}return T}}function oB(e){return e.length>1}function sB(e,t){return((e=e.x)[0]<0?e[1]-Dn-fr:Dn-e[1])-((t=t.x)[0]<0?t[1]-Dn-fr:Dn-t[1])}const Ix=Uk(function(){return!0},aB,uB,[-Cr,-Dn]);function aB(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(f,d){var l=f>0?Cr:-Cr,w=Dr(f-t);Dr(w-Cr)<fr?(e.point(t,i=(i+d)/2>0?Dn:-Dn),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(f,i),c=0):a!==l&&w>=Cr&&(Dr(t-a)<fr&&(t-=a*fr),Dr(f-l)<fr&&(f-=l*fr),i=lB(t,i,f,d),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),c=0),e.point(t=f,i=d),a=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function lB(e,t,i,a){var c,f,d=er(e-i);return Dr(d)>fr?Ef((er(t)*(f=or(a))*er(i)-er(a)*(c=or(t))*er(e))/(c*f*d)):(t+a)/2}function uB(e,t,i,a){var c;if(e==null)c=i*Dn,a.point(-Cr,c),a.point(0,c),a.point(Cr,c),a.point(Cr,0),a.point(Cr,-c),a.point(0,-c),a.point(-Cr,-c),a.point(-Cr,0),a.point(-Cr,c);else if(Dr(e[0]-t[0])>fr){var f=e[0]<t[0]?Cr:-Cr;c=i*f/2,a.point(-f,c),a.point(0,c),a.point(f,c)}else a.point(t[0],t[1])}function Vk(e){var t=or(e),i=6*mr,a=t>0,c=Dr(t)>fr;function f(C,b,T,R){Bk(R,e,i,T,C,b)}function d(C,b){return or(C)*or(b)>t}function l(C){var b,T,R,L,j;return{lineStart:function(){L=R=!1,j=1},point:function(le,K){var Z=[le,K],G,se=d(le,K),q=a?se?0:E(le,K):se?E(le+(le<0?Cr:-Cr),K):0;if(!b&&(L=R=se)&&C.lineStart(),se!==R&&(G=w(b,Z),(!G||kg(b,G)||kg(Z,G))&&(Z[2]=1)),se!==R)j=0,se?(C.lineStart(),G=w(Z,b),C.point(G[0],G[1])):(G=w(b,Z),C.point(G[0],G[1],2),C.lineEnd()),b=G;else if(c&&b&&a^se){var W;!(q&T)&&(W=w(Z,b,!0))&&(j=0,a?(C.lineStart(),C.point(W[0][0],W[0][1]),C.point(W[1][0],W[1][1]),C.lineEnd()):(C.point(W[1][0],W[1][1]),C.lineEnd(),C.lineStart(),C.point(W[0][0],W[0][1],3)))}se&&(!b||!kg(b,Z))&&C.point(Z[0],Z[1]),b=Z,R=se,T=q},lineEnd:function(){R&&C.lineEnd(),b=null},clean:function(){return j|(L&&R)<<1}}}function w(C,b,T){var R=Ec(C),L=Ec(b),j=[1,0,0],le=cf(R,L),K=sg(le,le),Z=le[0],G=K-Z*Z;if(!G)return!T&&C;var se=t*K/G,q=-t*Z/G,W=cf(j,le),P=ag(j,se),z=ag(le,q);g_(P,z);var D=W,ee=sg(P,D),X=sg(D,D),ye=ee*ee-X*(sg(P,P)-1);if(!(ye<0)){var ge=mi(ye),fe=ag(D,(-ee-ge)/X);if(g_(fe,P),fe=Py(fe),!T)return fe;var ie=C[0],he=b[0],Y=C[1],re=b[1],de;he<ie&&(de=ie,ie=he,he=de);var be=he-ie,Pe=Dr(be-Cr)<fr,$e=Pe||be<fr;if(!Pe&&re<Y&&(de=Y,Y=re,re=de),$e?Pe?Y+re>0^fe[1]<(Dr(fe[0]-ie)<fr?Y:re):Y<=fe[1]&&fe[1]<=re:be>Cr^(ie<=fe[0]&&fe[0]<=he)){var Ce=ag(D,(-ee+ge)/X);return g_(Ce,P),[fe,Py(Ce)]}}}function E(C,b){var T=a?e:Cr-e,R=0;return C<-T?R|=1:C>T&&(R|=2),b<-T?R|=4:b>T&&(R|=8),R}return Uk(d,l,f,a?[0,-e]:[-Cr,e-Cr])}function cB(e,t,i,a,c,f){var d=e[0],l=e[1],w=t[0],E=t[1],C=0,b=1,T=w-d,R=E-l,L;if(L=i-d,!(!T&&L>0)){if(L/=T,T<0){if(L<C)return;L<b&&(b=L)}else if(T>0){if(L>b)return;L>C&&(C=L)}if(L=c-d,!(!T&&L<0)){if(L/=T,T<0){if(L>b)return;L>C&&(C=L)}else if(T>0){if(L<C)return;L<b&&(b=L)}if(L=a-l,!(!R&&L>0)){if(L/=R,R<0){if(L<C)return;L<b&&(b=L)}else if(R>0){if(L>b)return;L>C&&(C=L)}if(L=f-l,!(!R&&L<0)){if(L/=R,R<0){if(L>b)return;L>C&&(C=L)}else if(R>0){if(L<C)return;L<b&&(b=L)}return C>0&&(e[0]=d+C*T,e[1]=l+C*R),b<1&&(t[0]=d+b*T,t[1]=l+b*R),!0}}}}}var Hd=1e9,ug=-Hd;function A0(e,t,i,a){function c(E,C){return e<=E&&E<=i&&t<=C&&C<=a}function f(E,C,b,T){var R=0,L=0;if(E==null||(R=d(E,b))!==(L=d(C,b))||w(E,C)<0^b>0)do T.point(R===0||R===3?e:i,R>1?a:t);while((R=(R+b+4)%4)!==L);else T.point(C[0],C[1])}function d(E,C){return Dr(E[0]-e)<fr?C>0?0:3:Dr(E[0]-i)<fr?C>0?2:1:Dr(E[1]-t)<fr?C>0?1:0:C>0?3:2}function l(E,C){return w(E.x,C.x)}function w(E,C){var b=d(E,1),T=d(C,1);return b!==T?b-T:b===0?C[1]-E[1]:b===1?E[0]-C[0]:b===2?E[1]-C[1]:C[0]-E[0]}return function(E){var C=E,b=Dk(),T,R,L,j,le,K,Z,G,se,q,W,P={point:z,lineStart:ye,lineEnd:ge,polygonStart:ee,polygonEnd:X};function z(ie,he){c(ie,he)&&C.point(ie,he)}function D(){for(var ie=0,he=0,Y=R.length;he<Y;++he)for(var re=R[he],de=1,be=re.length,Pe=re[0],$e,Ce,Fe=Pe[0],He=Pe[1];de<be;++de)$e=Fe,Ce=He,Pe=re[de],Fe=Pe[0],He=Pe[1],Ce<=a?He>a&&(Fe-$e)*(a-Ce)>(He-Ce)*(e-$e)&&++ie:He<=a&&(Fe-$e)*(a-Ce)<(He-Ce)*(e-$e)&&--ie;return ie}function ee(){C=b,T=[],R=[],W=!0}function X(){var ie=D(),he=W&&ie,Y=(T=Ek(T)).length;(he||Y)&&(E.polygonStart(),he&&(E.lineStart(),f(null,null,1,E),E.lineEnd()),Y&&Nk(T,l,ie,f,E),E.polygonEnd()),C=E,T=R=L=null}function ye(){P.point=fe,R&&R.push(L=[]),q=!0,se=!1,Z=G=NaN}function ge(){T&&(fe(j,le),K&&se&&b.rejoin(),T.push(b.result())),P.point=z,se&&C.lineEnd()}function fe(ie,he){var Y=c(ie,he);if(R&&L.push([ie,he]),q)j=ie,le=he,K=Y,q=!1,Y&&(C.lineStart(),C.point(ie,he));else if(Y&&se)C.point(ie,he);else{var re=[Z=Math.max(ug,Math.min(Hd,Z)),G=Math.max(ug,Math.min(Hd,G))],de=[ie=Math.max(ug,Math.min(Hd,ie)),he=Math.max(ug,Math.min(Hd,he))];cB(re,de,e,t,i,a)?(se||(C.lineStart(),C.point(re[0],re[1])),C.point(de[0],de[1]),Y||C.lineEnd(),W=!1):Y&&(C.lineStart(),C.point(ie,he),W=!1)}Z=ie,G=he,se=Y}return P}}function hB(){var e=0,t=0,i=960,a=500,c,f,d;return d={stream:function(l){return c&&f===l?c:c=A0(e,t,i,a)(f=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],a=+l[1][1],c=f=null,d):[[e,t],[i,a]]}}}var Cx,Mx,Og,Fg,hf={sphere:kn,point:kn,lineStart:fB,lineEnd:kn,polygonStart:kn,polygonEnd:kn};function fB(){hf.point=pB,hf.lineEnd=dB}function dB(){hf.point=hf.lineEnd=kn}function pB(e,t){e*=mr,t*=mr,Mx=e,Og=er(t),Fg=or(t),hf.point=mB}function mB(e,t){e*=mr,t*=mr;var i=er(t),a=or(t),c=Dr(e-Mx),f=or(c),d=er(c),l=a*d,w=Fg*i-Og*a*f,E=Og*i+Fg*a*f;Cx.add(io(mi(l*l+w*w),E)),Mx=e,Og=i,Fg=a}function Gk(e){return Cx=new Hi,$s(e,hf),+Cx}var kx=[null,null],gB={type:"LineString",coordinates:kx};function jy(e,t){return kx[0]=e,kx[1]=t,Gk(gB)}var lP={Feature:function(e,t){return zy(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(zy(i[a].geometry,t))return!0;return!1}},uP={Sphere:function(){return!0},Point:function(e,t){return cP(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(cP(i[a],t))return!0;return!1},LineString:function(e,t){return hP(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(hP(i[a],t))return!0;return!1},Polygon:function(e,t){return fP(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(fP(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(zy(i[a],t))return!0;return!1}};function zy(e,t){return e&&uP.hasOwnProperty(e.type)?uP[e.type](e,t):!1}function cP(e,t){return jy(e,t)===0}function hP(e,t){for(var i,a,c,f=0,d=e.length;f<d;f++){if(a=jy(e[f],t),a===0||f>0&&(c=jy(e[f],e[f-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<zp*c))return!0;i=a}return!1}function fP(e,t){return!!$k(e.map(yB),Wk(t))}function yB(e){return e=e.map(Wk),e.pop(),e}function Wk(e){return[e[0]*mr,e[1]*mr]}function vB(e,t){return(e&&lP.hasOwnProperty(e.type)?lP[e.type]:zy)(e,t)}function dP(e,t,i){var a=Nh(e,t-fr,i).concat(t);return function(c){return a.map(function(f){return[c,f]})}}function pP(e,t,i){var a=Nh(e,t-fr,i).concat(t);return function(c){return a.map(function(f){return[f,c]})}}function Hk(){var e,t,i,a,c,f,d,l,w=10,E=w,C=90,b=360,T,R,L,j,le=2.5;function K(){return{type:"MultiLineString",coordinates:Z()}}function Z(){return Nh(og(a/C)*C,i,C).map(L).concat(Nh(og(l/b)*b,d,b).map(j)).concat(Nh(og(t/w)*w,e,w).filter(function(G){return Dr(G%C)>fr}).map(T)).concat(Nh(og(f/E)*E,c,E).filter(function(G){return Dr(G%b)>fr}).map(R))}return K.lines=function(){return Z().map(function(G){return{type:"LineString",coordinates:G}})},K.outline=function(){return{type:"Polygon",coordinates:[L(a).concat(j(d).slice(1),L(i).reverse().slice(1),j(l).reverse().slice(1))]}},K.extent=function(G){return arguments.length?K.extentMajor(G).extentMinor(G):K.extentMinor()},K.extentMajor=function(G){return arguments.length?(a=+G[0][0],i=+G[1][0],l=+G[0][1],d=+G[1][1],a>i&&(G=a,a=i,i=G),l>d&&(G=l,l=d,d=G),K.precision(le)):[[a,l],[i,d]]},K.extentMinor=function(G){return arguments.length?(t=+G[0][0],e=+G[1][0],f=+G[0][1],c=+G[1][1],t>e&&(G=t,t=e,e=G),f>c&&(G=f,f=c,c=G),K.precision(le)):[[t,f],[e,c]]},K.step=function(G){return arguments.length?K.stepMajor(G).stepMinor(G):K.stepMinor()},K.stepMajor=function(G){return arguments.length?(C=+G[0],b=+G[1],K):[C,b]},K.stepMinor=function(G){return arguments.length?(w=+G[0],E=+G[1],K):[w,E]},K.precision=function(G){return arguments.length?(le=+G,T=dP(f,c,90),R=pP(t,e,le),L=dP(l,d,90),j=pP(a,i,le),K):le},K.extentMajor([[-180,-90+fr],[180,90-fr]]).extentMinor([[-180,-80-fr],[180,80+fr]])}function _B(){return Hk()()}function xB(e,t){var i=e[0]*mr,a=e[1]*mr,c=t[0]*mr,f=t[1]*mr,d=or(a),l=er(a),w=or(f),E=er(f),C=d*or(i),b=d*er(i),T=w*or(c),R=w*er(c),L=2*oo(mi(XT(f-a)+d*w*XT(c-i))),j=er(L),le=L?function(K){var Z=er(K*=L)/j,G=er(L-K)/j,se=G*C+Z*T,q=G*b+Z*R,W=G*l+Z*E;return[io(q,se)*hn,io(W,mi(se*se+q*q))*hn]}:function(){return[i*hn,a*hn]};return le.distance=L,le}const Lp=e=>e;var v_=new Hi,Ox=new Hi,Zk,Xk,Fx,Rx,ol={point:kn,lineStart:kn,lineEnd:kn,polygonStart:function(){ol.lineStart=wB,ol.lineEnd=SB},polygonEnd:function(){ol.lineStart=ol.lineEnd=ol.point=kn,v_.add(Dr(Ox)),Ox=new Hi},result:function(){var e=v_/2;return v_=new Hi,e}};function wB(){ol.point=bB}function bB(e,t){ol.point=qk,Zk=Fx=e,Xk=Rx=t}function qk(e,t){Ox.add(Rx*e-Fx*t),Fx=e,Rx=t}function SB(){qk(Zk,Xk)}var ff=1/0,Ly=ff,Bp=-ff,By=Bp,Dy={point:EB,lineStart:kn,lineEnd:kn,polygonStart:kn,polygonEnd:kn,result:function(){var e=[[ff,Ly],[Bp,By]];return Bp=By=-(Ly=ff=1/0),e}};function EB(e,t){e<ff&&(ff=e),e>Bp&&(Bp=e),t<Ly&&(Ly=t),t>By&&(By=t)}var jx=0,zx=0,Zd=0,Ny=0,$y=0,$h=0,Lx=0,Bx=0,Xd=0,Kk,Jk,xa,wa,ps={point:Tc,lineStart:mP,lineEnd:gP,polygonStart:function(){ps.lineStart=AB,ps.lineEnd=IB},polygonEnd:function(){ps.point=Tc,ps.lineStart=mP,ps.lineEnd=gP},result:function(){var e=Xd?[Lx/Xd,Bx/Xd]:$h?[Ny/$h,$y/$h]:Zd?[jx/Zd,zx/Zd]:[NaN,NaN];return jx=zx=Zd=Ny=$y=$h=Lx=Bx=Xd=0,e}};function Tc(e,t){jx+=e,zx+=t,++Zd}function mP(){ps.point=TB}function TB(e,t){ps.point=PB,Tc(xa=e,wa=t)}function PB(e,t){var i=e-xa,a=t-wa,c=mi(i*i+a*a);Ny+=c*(xa+e)/2,$y+=c*(wa+t)/2,$h+=c,Tc(xa=e,wa=t)}function gP(){ps.point=Tc}function AB(){ps.point=CB}function IB(){Yk(Kk,Jk)}function CB(e,t){ps.point=Yk,Tc(Kk=xa=e,Jk=wa=t)}function Yk(e,t){var i=e-xa,a=t-wa,c=mi(i*i+a*a);Ny+=c*(xa+e)/2,$y+=c*(wa+t)/2,$h+=c,c=wa*e-xa*t,Lx+=c*(xa+e),Bx+=c*(wa+t),Xd+=c*3,Tc(xa=e,wa=t)}function Qk(e){this._context=e}Qk.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,no);break}}},result:kn};var Dx=new Hi,__,e3,t3,qd,Kd,Dp={point:kn,lineStart:function(){Dp.point=MB},lineEnd:function(){__&&r3(e3,t3),Dp.point=kn},polygonStart:function(){__=!0},polygonEnd:function(){__=null},result:function(){var e=+Dx;return Dx=new Hi,e}};function MB(e,t){Dp.point=r3,e3=qd=e,t3=Kd=t}function r3(e,t){qd-=e,Kd-=t,Dx.add(mi(qd*qd+Kd*Kd)),qd=e,Kd=t}function n3(){this._string=[]}n3.prototype={_radius:4.5,_circle:yP(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=yP(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function yP(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function kB(e,t){var i=4.5,a,c;function f(d){return d&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),$s(d,a(c))),c.result()}return f.area=function(d){return $s(d,a(ol)),ol.result()},f.measure=function(d){return $s(d,a(Dp)),Dp.result()},f.bounds=function(d){return $s(d,a(Dy)),Dy.result()},f.centroid=function(d){return $s(d,a(ps)),ps.result()},f.projection=function(d){return arguments.length?(a=d==null?(e=null,Lp):(e=d).stream,f):e},f.context=function(d){return arguments.length?(c=d==null?(t=null,new n3):new Qk(t=d),typeof i!="function"&&c.pointRadius(i),f):t},f.pointRadius=function(d){return arguments.length?(i=typeof d=="function"?d:(c.pointRadius(+d),+d),f):i},f.projection(e).context(t)}function OB(e){return{stream:Jp(e)}}function Jp(e){return function(t){var i=new Nx;for(var a in e)i[a]=e[a];return i.stream=t,i}}function Nx(){}Nx.prototype={constructor:Nx,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Tb(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),$s(i,e.stream(Dy)),t(Dy.result()),a!=null&&e.clipExtent(a),e}function I0(e,t,i){return Tb(e,function(a){var c=t[1][0]-t[0][0],f=t[1][1]-t[0][1],d=Math.min(c/(a[1][0]-a[0][0]),f/(a[1][1]-a[0][1])),l=+t[0][0]+(c-d*(a[1][0]+a[0][0]))/2,w=+t[0][1]+(f-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([l,w])},i)}function Pb(e,t,i){return I0(e,[[0,0],t],i)}function Ab(e,t,i){return Tb(e,function(a){var c=+t,f=c/(a[1][0]-a[0][0]),d=(c-f*(a[1][0]+a[0][0]))/2,l=-f*a[0][1];e.scale(150*f).translate([d,l])},i)}function Ib(e,t,i){return Tb(e,function(a){var c=+t,f=c/(a[1][1]-a[0][1]),d=-f*a[0][0],l=(c-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([d,l])},i)}var vP=16,FB=or(30*mr);function _P(e,t){return+t?jB(e,t):RB(e)}function RB(e){return Jp({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function jB(e,t){function i(a,c,f,d,l,w,E,C,b,T,R,L,j,le){var K=E-a,Z=C-c,G=K*K+Z*Z;if(G>4*t&&j--){var se=d+T,q=l+R,W=w+L,P=mi(se*se+q*q+W*W),z=oo(W/=P),D=Dr(Dr(W)-1)<fr||Dr(f-b)<fr?(f+b)/2:io(q,se),ee=e(D,z),X=ee[0],ye=ee[1],ge=X-a,fe=ye-c,ie=Z*ge-K*fe;(ie*ie/G>t||Dr((K*ge+Z*fe)/G-.5)>.3||d*T+l*R+w*L<FB)&&(i(a,c,f,d,l,w,X,ye,D,se/=P,q/=P,W,j,le),le.point(X,ye),i(X,ye,D,se,q,W,E,C,b,T,R,L,j,le))}}return function(a){var c,f,d,l,w,E,C,b,T,R,L,j,le={point:K,lineStart:Z,lineEnd:se,polygonStart:function(){a.polygonStart(),le.lineStart=q},polygonEnd:function(){a.polygonEnd(),le.lineStart=Z}};function K(z,D){z=e(z,D),a.point(z[0],z[1])}function Z(){b=NaN,le.point=G,a.lineStart()}function G(z,D){var ee=Ec([z,D]),X=e(z,D);i(b,T,C,R,L,j,b=X[0],T=X[1],C=z,R=ee[0],L=ee[1],j=ee[2],vP,a),a.point(b,T)}function se(){le.point=K,a.lineEnd()}function q(){Z(),le.point=W,le.lineEnd=P}function W(z,D){G(c=z,D),f=b,d=T,l=R,w=L,E=j,le.point=G}function P(){i(b,T,C,R,L,j,f,d,c,l,w,E,vP,a),le.lineEnd=se,se()}return le}}var zB=Jp({point:function(e,t){this.stream.point(e*mr,t*mr)}});function LB(e){return Jp({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function BB(e,t,i,a,c){function f(d,l){return d*=a,l*=c,[t+e*d,i-e*l]}return f.invert=function(d,l){return[(d-t)/e*a,(i-l)/e*c]},f}function xP(e,t,i,a,c,f){if(!f)return BB(e,t,i,a,c);var d=or(f),l=er(f),w=d*e,E=l*e,C=d/e,b=l/e,T=(l*i-d*t)/e,R=(l*t+d*i)/e;function L(j,le){return j*=a,le*=c,[w*j-E*le+t,i-E*j-w*le]}return L.invert=function(j,le){return[a*(C*j-b*le+T),c*(R-b*j-C*le)]},L}function Ma(e){return Cb(function(){return e})()}function Cb(e){var t,i=150,a=480,c=250,f=0,d=0,l=0,w=0,E=0,C,b=0,T=1,R=1,L=null,j=Ix,le=null,K,Z,G,se=Lp,q=.5,W,P,z,D,ee;function X(ie){return z(ie[0]*mr,ie[1]*mr)}function ye(ie){return ie=z.invert(ie[0],ie[1]),ie&&[ie[0]*hn,ie[1]*hn]}X.stream=function(ie){return D&&ee===ie?D:D=zB(LB(C)(j(W(se(ee=ie)))))},X.preclip=function(ie){return arguments.length?(j=ie,L=void 0,fe()):j},X.postclip=function(ie){return arguments.length?(se=ie,le=K=Z=G=null,fe()):se},X.clipAngle=function(ie){return arguments.length?(j=+ie?Vk(L=ie*mr):(L=null,Ix),fe()):L*hn},X.clipExtent=function(ie){return arguments.length?(se=ie==null?(le=K=Z=G=null,Lp):A0(le=+ie[0][0],K=+ie[0][1],Z=+ie[1][0],G=+ie[1][1]),fe()):le==null?null:[[le,K],[Z,G]]},X.scale=function(ie){return arguments.length?(i=+ie,ge()):i},X.translate=function(ie){return arguments.length?(a=+ie[0],c=+ie[1],ge()):[a,c]},X.center=function(ie){return arguments.length?(f=ie[0]%360*mr,d=ie[1]%360*mr,ge()):[f*hn,d*hn]},X.rotate=function(ie){return arguments.length?(l=ie[0]%360*mr,w=ie[1]%360*mr,E=ie.length>2?ie[2]%360*mr:0,ge()):[l*hn,w*hn,E*hn]},X.angle=function(ie){return arguments.length?(b=ie%360*mr,ge()):b*hn},X.reflectX=function(ie){return arguments.length?(T=ie?-1:1,ge()):T<0},X.reflectY=function(ie){return arguments.length?(R=ie?-1:1,ge()):R<0},X.precision=function(ie){return arguments.length?(W=_P(P,q=ie*ie),fe()):mi(q)},X.fitExtent=function(ie,he){return I0(X,ie,he)},X.fitSize=function(ie,he){return Pb(X,ie,he)},X.fitWidth=function(ie,he){return Ab(X,ie,he)},X.fitHeight=function(ie,he){return Ib(X,ie,he)};function ge(){var ie=xP(i,0,0,T,R,b).apply(null,t(f,d)),he=xP(i,a-ie[0],c-ie[1],T,R,b);return C=Eb(l,w,E),P=Px(t,he),z=Px(C,P),W=_P(P,q),fe()}function fe(){return D=ee=null,X}return function(){return t=e.apply(this,arguments),X.invert=t.invert&&ye,ge()}}function Mb(e){var t=0,i=Cr/3,a=Cb(e),c=a(t,i);return c.parallels=function(f){return arguments.length?a(t=f[0]*mr,i=f[1]*mr):[t*hn,i*hn]},c}function DB(e){var t=or(e);function i(a,c){return[a*t,er(c)/t]}return i.invert=function(a,c){return[a/t,oo(c*t)]},i}function i3(e,t){var i=er(e),a=(i+er(t))/2;if(Dr(a)<fr)return DB(e);var c=1+i*(2*a-i),f=mi(c)/a;function d(l,w){var E=mi(c-2*a*er(w))/a;return[E*er(l*=a),f-E*or(l)]}return d.invert=function(l,w){var E=f-w,C=io(l,Dr(E))*gs(E);return E*a<0&&(C-=Cr*gs(l)*gs(E)),[C/a,oo((c-(l*l+E*E)*a*a)/(2*a))]},d}function Uy(){return Mb(i3).scale(155.424).center([0,33.6442])}function o3(){return Uy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function NB(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function $B(){var e,t,i=o3(),a,c=Uy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,d=Uy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,w,E={point:function(T,R){w=[T,R]}};function C(T){var R=T[0],L=T[1];return w=null,a.point(R,L),w||(f.point(R,L),w)||(l.point(R,L),w)}C.invert=function(T){var R=i.scale(),L=i.translate(),j=(T[0]-L[0])/R,le=(T[1]-L[1])/R;return(le>=.12&&le<.234&&j>=-.425&&j<-.214?c:le>=.166&&le<.234&&j>=-.214&&j<-.115?d:i).invert(T)},C.stream=function(T){return e&&t===T?e:e=NB([i.stream(t=T),c.stream(T),d.stream(T)])},C.precision=function(T){return arguments.length?(i.precision(T),c.precision(T),d.precision(T),b()):i.precision()},C.scale=function(T){return arguments.length?(i.scale(T),c.scale(T*.35),d.scale(T),C.translate(i.translate())):i.scale()},C.translate=function(T){if(!arguments.length)return i.translate();var R=i.scale(),L=+T[0],j=+T[1];return a=i.translate(T).clipExtent([[L-.455*R,j-.238*R],[L+.455*R,j+.238*R]]).stream(E),f=c.translate([L-.307*R,j+.201*R]).clipExtent([[L-.425*R+fr,j+.12*R+fr],[L-.214*R-fr,j+.234*R-fr]]).stream(E),l=d.translate([L-.205*R,j+.212*R]).clipExtent([[L-.214*R+fr,j+.166*R+fr],[L-.115*R-fr,j+.234*R-fr]]).stream(E),b()},C.fitExtent=function(T,R){return I0(C,T,R)},C.fitSize=function(T,R){return Pb(C,T,R)},C.fitWidth=function(T,R){return Ab(C,T,R)},C.fitHeight=function(T,R){return Ib(C,T,R)};function b(){return e=t=null,C}return C.scale(1070)}function s3(e){return function(t,i){var a=or(t),c=or(i),f=e(a*c);return f===1/0?[2,0]:[f*c*er(t),f*er(i)]}}function Yp(e){return function(t,i){var a=mi(t*t+i*i),c=e(a),f=er(c),d=or(c);return[io(t*f,a*d),oo(a&&i*f/a)]}}var kb=s3(function(e){return mi(2/(1+e))});kb.invert=Yp(function(e){return 2*oo(e/2)});function UB(){return Ma(kb).scale(124.75).clipAngle(180-.001)}var Ob=s3(function(e){return(e=Pk(e))&&e/er(e)});Ob.invert=Yp(function(e){return e});function VB(){return Ma(Ob).scale(79.4188).clipAngle(180-.001)}function Qp(e,t){return[e,by(bb((Dn+t)/2))]}Qp.invert=function(e,t){return[e,2*Ef(Tk(t))-Dn]};function GB(){return a3(Qp).scale(961/no)}function a3(e){var t=Ma(e),i=t.center,a=t.scale,c=t.translate,f=t.clipExtent,d=null,l,w,E;t.scale=function(b){return arguments.length?(a(b),C()):a()},t.translate=function(b){return arguments.length?(c(b),C()):c()},t.center=function(b){return arguments.length?(i(b),C()):i()},t.clipExtent=function(b){return arguments.length?(b==null?d=l=w=E=null:(d=+b[0][0],l=+b[0][1],w=+b[1][0],E=+b[1][1]),C()):d==null?null:[[d,l],[w,E]]};function C(){var b=Cr*a(),T=t(Lk(t.rotate()).invert([0,0]));return f(d==null?[[T[0]-b,T[1]-b],[T[0]+b,T[1]+b]]:e===Qp?[[Math.max(T[0]-b,d),l],[Math.min(T[0]+b,w),E]]:[[d,Math.max(T[1]-b,l)],[w,Math.min(T[1]+b,E)]])}return C()}function cg(e){return bb((Dn+e)/2)}function l3(e,t){var i=or(e),a=e===t?er(e):by(i/or(t))/by(cg(t)/cg(e)),c=i*m_(cg(e),a)/a;if(!a)return Qp;function f(d,l){c>0?l<-Dn+fr&&(l=-Dn+fr):l>Dn-fr&&(l=Dn-fr);var w=c/m_(cg(l),a);return[w*er(a*d),c-w*or(a*d)]}return f.invert=function(d,l){var w=c-l,E=gs(a)*mi(d*d+w*w),C=io(d,Dr(w))*gs(w);return w*a<0&&(C-=Cr*gs(d)*gs(w)),[C/a,2*Ef(m_(c/E,1/a))-Dn]},f}function WB(){return Mb(l3).scale(109.5).parallels([30,30])}function Np(e,t){return[e,t]}Np.invert=Np;function HB(){return Ma(Np).scale(152.63)}function u3(e,t){var i=or(e),a=e===t?er(e):(i-or(t))/(t-e),c=i/a+e;if(Dr(a)<fr)return Np;function f(d,l){var w=c-l,E=a*d;return[w*er(E),c-w*or(E)]}return f.invert=function(d,l){var w=c-l,E=io(d,Dr(w))*gs(w);return w*a<0&&(E-=Cr*gs(d)*gs(w)),[E/a,c-gs(a)*mi(d*d+w*w)]},f}function ZB(){return Mb(u3).scale(131.154).center([0,13.9389])}var cp=1.340264,hp=-.081106,fp=893e-6,dp=.003796,Vy=mi(3)/2,XB=12;function Fb(e,t){var i=oo(Vy*er(t)),a=i*i,c=a*a*a;return[e*or(i)/(Vy*(cp+3*hp*a+c*(7*fp+9*dp*a))),i*(cp+hp*a+c*(fp+dp*a))]}Fb.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,f=0,d,l,w;f<XB&&(l=i*(cp+hp*a+c*(fp+dp*a))-t,w=cp+3*hp*a+c*(7*fp+9*dp*a),i-=d=l/w,a=i*i,c=a*a*a,!(Dr(d)<zp));++f);return[Vy*e*(cp+3*hp*a+c*(7*fp+9*dp*a))/or(i),oo(er(i)/Vy)]};function qB(){return Ma(Fb).scale(177.158)}function Rb(e,t){var i=or(t),a=or(e)*i;return[i*er(e)/a,er(t)/a]}Rb.invert=Yp(Ef);function KB(){return Ma(Rb).scale(144.049).clipAngle(60)}function JB(){var e=1,t=0,i=0,a=1,c=1,f=0,d,l,w=null,E,C,b,T=1,R=1,L=Jp({point:function(se,q){var W=G([se,q]);this.stream.point(W[0],W[1])}}),j=Lp,le,K;function Z(){return T=e*a,R=e*c,le=K=null,G}function G(se){var q=se[0]*T,W=se[1]*R;if(f){var P=W*d-q*l;q=q*d+W*l,W=P}return[q+t,W+i]}return G.invert=function(se){var q=se[0]-t,W=se[1]-i;if(f){var P=W*d+q*l;q=q*d-W*l,W=P}return[q/T,W/R]},G.stream=function(se){return le&&K===se?le:le=L(j(K=se))},G.postclip=function(se){return arguments.length?(j=se,w=E=C=b=null,Z()):j},G.clipExtent=function(se){return arguments.length?(j=se==null?(w=E=C=b=null,Lp):A0(w=+se[0][0],E=+se[0][1],C=+se[1][0],b=+se[1][1]),Z()):w==null?null:[[w,E],[C,b]]},G.scale=function(se){return arguments.length?(e=+se,Z()):e},G.translate=function(se){return arguments.length?(t=+se[0],i=+se[1],Z()):[t,i]},G.angle=function(se){return arguments.length?(f=se%360*mr,l=er(f),d=or(f),Z()):f*hn},G.reflectX=function(se){return arguments.length?(a=se?-1:1,Z()):a<0},G.reflectY=function(se){return arguments.length?(c=se?-1:1,Z()):c<0},G.fitExtent=function(se,q){return I0(G,se,q)},G.fitSize=function(se,q){return Pb(G,se,q)},G.fitWidth=function(se,q){return Ab(G,se,q)},G.fitHeight=function(se,q){return Ib(G,se,q)},G}function jb(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}jb.invert=function(e,t){var i=t,a=25,c;do{var f=i*i,d=f*f;i-=c=(i*(1.007226+f*(.015085+d*(-.044475+.028874*f-.005916*d)))-t)/(1.007226+f*(.015085*3+d*(-.044475*7+.028874*9*f-.005916*11*d)))}while(Dr(c)>fr&&--a>0);return[e/(.8707+(f=i*i)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),i]};function YB(){return Ma(jb).scale(175.295)}function zb(e,t){return[or(t)*er(e),er(t)]}zb.invert=Yp(oo);function QB(){return Ma(zb).scale(249.5).clipAngle(90+fr)}function Lb(e,t){var i=or(t),a=1+or(e)*i;return[i*er(e)/a,er(t)/a]}Lb.invert=Yp(function(e){return 2*Ef(e)});function eD(){return Ma(Lb).scale(250).clipAngle(142)}function Bb(e,t){return[by(bb((Dn+t)/2)),-e]}Bb.invert=function(e,t){return[-t,2*Ef(Tk(e))-Dn]};function tD(){var e=a3(Bb),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const rD=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:o3,geoAlbersUsa:$B,geoArea:Z6,geoAzimuthalEqualArea:UB,geoAzimuthalEqualAreaRaw:kb,geoAzimuthalEquidistant:VB,geoAzimuthalEquidistantRaw:Ob,geoBounds:J6,geoCentroid:nB,geoCircle:iB,geoClipAntimeridian:Ix,geoClipCircle:Vk,geoClipExtent:hB,geoClipRectangle:A0,geoConicConformal:WB,geoConicConformalRaw:l3,geoConicEqualArea:Uy,geoConicEqualAreaRaw:i3,geoConicEquidistant:ZB,geoConicEquidistantRaw:u3,geoContains:vB,geoDistance:jy,geoEqualEarth:qB,geoEqualEarthRaw:Fb,geoEquirectangular:HB,geoEquirectangularRaw:Np,geoGnomonic:KB,geoGnomonicRaw:Rb,geoGraticule:Hk,geoGraticule10:_B,geoIdentity:JB,geoInterpolate:xB,geoLength:Gk,geoMercator:GB,geoMercatorRaw:Qp,geoNaturalEarth1:YB,geoNaturalEarth1Raw:jb,geoOrthographic:QB,geoOrthographicRaw:zb,geoPath:kB,geoProjection:Ma,geoProjectionMutator:Cb,geoRotation:Lk,geoStereographic:eD,geoStereographicRaw:Lb,geoStream:$s,geoTransform:OB,geoTransverseMercator:tD,geoTransverseMercatorRaw:Bb},Symbol.toStringTag,{value:"Module"})),nD=pw(rD);var Eu=2*Math.PI*6378137/2,iD=Math.PI/180;function c3(e){return e=e||256,2*Math.PI*6378137/e}function oD(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function $x(e,t,i){var a=h3(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function h3(e,t,i){var a=t,c=Hb(e[0]),f=Wb(e[1]),d=Math.sin(f*iD),l=Math.pow(2,a),w=l*(c/360+.5),E=l*(.5-.25*Math.log((1+d)/(1-d))/Math.PI);return Cc([w,E,a],i)}function sD(e,t=6){var i=e[0],a=e[1],c=e[2],f=e[3],d=(i-c)/2+c,l=(a-f)/2+f;return t!=null&&(d=Number(d.toFixed(t)),l=Number(l.toFixed(t))),[d,l]}function Gy(e,t,i={enable:!0,decimal:1}){e=C0(e,t);var a=e[0],c=e[1],f=a*Eu/180,d=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return d=d*Eu/180,i.enable&&(f=Number(f.toFixed(i.decimal)),d=Number(d.toFixed(i.decimal))),[f,d]}function Ux(e,t=6){var i=e[0],a=e[1],c=i/Eu*180,f=a/Eu*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),f=Number(f.toFixed(t))),[c,f]}function Db(e,t,i){var a=e[0],c=e[1],f=Vb(t,i),d=(a+Eu)/f,l=(c+Eu)/f;return[d,l,t]}function f3(e,t,i){e=C0(e,i);var a=Gy(e),c=Db(a,t);return Nb(c)}function aD(e,t,i){if(e=C0(e,i),t===0)return[0,0,0];var a=f3(e,t);return p3(a)}function lD(e,t){if(t===0)return[0,0,0];var i=Db(e,t);return Nb(i)}function Vx(e,t,i=1){var a=e[0],c=e[1],f=e[2],d=Vb(f,t),l=a*d-Eu,w=c*d-Eu;return i!=null&&(l=Number(l.toFixed(i)),w=Number(w.toFixed(i))),[l,w]}function Nb(e,t,i){t=t||256;var a=e[0],c=e[1],f=e[2];if(f===0)return[0,0,0];Ub(f);var d=Math.ceil(a/t)-1,l=Math.ceil(c/t)-1;return d<0&&(d=0),l<0&&(l=0),[d,l,f]}function $b(e,t,i){Cc(e,i),t=t||256;var a=e[0],c=e[1],f=e[2],d=Vx([a*t,c*t,f]),l=Vx([(a+1)*t,(c+1)*t,f]);return[d[0],d[1],l[0],l[1]]}function d3(e,t){Cc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var f=$b([i,a,c]),d=f[0],l=f[1],w=f[2],E=f[3],C=Ux([d,l,c]),b=Ux([w,E,c]);return[C[0],C[1],b[0],b[1]]}function uD(e){var t=em(e);return $b(t)}function cD(e){var t=em(e);return d3(t)}function p3(e,t){Cc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var f=i,d=Math.pow(2,c)-1-a;return[f,d,c]}function em(e){var t=e[0],i=e[1],a=e[2],c=t,f=Math.pow(2,a)-i-1;return[c,f,a]}function hD(e){var t=em(e);return m3(t)}function m3(e,t){Cc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var f="";return a=Math.pow(2,c)-1-a,Gb(c,0,-1).map(function(d){var l=0,w=1<<d-1;i&w&&(l+=1),a&w&&(l+=2),f=f.concat(l)}),f}function fD(e){var t=g3(e);return em(t)}function g3(e){var t=0,i=0,a=e.length;return Gb(a,0,-1).map(function(c){var f=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=f;break;case 2:i+=f;break;case 3:t+=f,i+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function dD(e){var t=Gy([e[0],e[1]]),i=Gy([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function Cc(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=Ub(c),e=y3(e),e}function y3(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function Ub(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function C0(e,t){if(t===!1)return e;var i=Hb(e[0]),a=Wb(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function Vb(e,t){return c3(t)/Math.pow(2,e)}function Gb(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),f=0;f<a;f++,e+=i)c[f]=e;return c}function pD(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<i&&(i=f[1]),f[2]>a&&(a=f[2]),f[3]>c&&(c=f[3])}),[t,i,a,c]}}function mD(e){try{return Cc(e),!0}catch{return!1}}function Wb(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Hb(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function gD(e){var t=$x([e[0],e[1]],32),i=$x([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=yD(a);if(c===0)return[0,0,0];var f=a[0]>>>32-c,d=a[1]>>>32-c;return[f,d,c]}function yD(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const vD=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:sD,bboxToMeters:dD,bboxToTile:gD,googleToBBox:cD,googleToBBoxMeters:uD,googleToQuadkey:hD,googleToTile:em,hash:oD,initialResolution:c3,latitude:Wb,lngLatToGoogle:aD,lngLatToMeters:Gy,lngLatToTile:f3,longitude:Hb,maxBBox:pD,metersToLngLat:Ux,metersToPixels:Db,metersToTile:lD,pixelsToMeters:Vx,pixelsToTile:Nb,pointToTile:$x,pointToTileFraction:h3,quadkeyToGoogle:g3,quadkeyToTile:fD,range:Gb,resolution:Vb,tileToBBox:d3,tileToBBoxMeters:$b,tileToGoogle:p3,tileToQuadkey:m3,validTile:mD,validateLngLat:C0,validateTile:Cc,validateZoom:Ub,wrapTile:y3},Symbol.toStringTag,{value:"Module"})),_D=pw(vD);var M0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */M0.read=function(e,t,i,a,c){var f,d,l=c*8-a-1,w=(1<<l)-1,E=w>>1,C=-7,b=i?c-1:0,T=i?-1:1,R=e[t+b];for(b+=T,f=R&(1<<-C)-1,R>>=-C,C+=l;C>0;f=f*256+e[t+b],b+=T,C-=8);for(d=f&(1<<-C)-1,f>>=-C,C+=a;C>0;d=d*256+e[t+b],b+=T,C-=8);if(f===0)f=1-E;else{if(f===w)return d?NaN:(R?-1:1)*(1/0);d=d+Math.pow(2,a),f=f-E}return(R?-1:1)*d*Math.pow(2,f-a)};M0.write=function(e,t,i,a,c,f){var d,l,w,E=f*8-c-1,C=(1<<E)-1,b=C>>1,T=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=a?0:f-1,L=a?1:-1,j=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,d=C):(d=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-d))<1&&(d--,w*=2),d+b>=1?t+=T/w:t+=T*Math.pow(2,1-b),t*w>=2&&(d++,w/=2),d+b>=C?(l=0,d=C):d+b>=1?(l=(t*w-1)*Math.pow(2,c),d=d+b):(l=t*Math.pow(2,b-1)*Math.pow(2,c),d=0));c>=8;e[i+R]=l&255,R+=L,l/=256,c-=8);for(d=d<<c|l,E+=c;E>0;e[i+R]=d&255,R+=L,d/=256,E-=8);e[i+R-L]|=j*128};var xD=Xr,hg=M0;function Xr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xr.Varint=0;Xr.Fixed64=1;Xr.Bytes=2;Xr.Fixed32=5;var Gx=65536*65536,wP=1/Gx,wD=12,v3=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Xr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,f=this.pos;this.type=a&7,e(c,t,this),this.pos===f&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=fg(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=SP(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=fg(this.buf,this.pos)+fg(this.buf,this.pos+4)*Gx;return this.pos+=8,e},readSFixed64:function(){var e=fg(this.buf,this.pos)+SP(this.buf,this.pos+4)*Gx;return this.pos+=8,e},readFloat:function(){var e=hg.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=hg.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,bD(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=wD&&v3?zD(this.buf,t,e):jD(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xr.Bytes)return e.push(this.readVarint(t));var i=el(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xr.Bytes)return e.push(this.readSVarint());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xr.Bytes)return e.push(this.readBoolean());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xr.Bytes)return e.push(this.readFloat());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xr.Bytes)return e.push(this.readDouble());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xr.Bytes)return e.push(this.readFixed32());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xr.Bytes)return e.push(this.readSFixed32());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xr.Bytes)return e.push(this.readFixed64());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xr.Bytes)return e.push(this.readSFixed64());var t=el(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Xr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xr.Fixed32)this.pos+=4;else if(t===Xr.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),_h(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),_h(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),_h(this.buf,e&-1,this.pos),_h(this.buf,Math.floor(e*wP),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),_h(this.buf,e&-1,this.pos),_h(this.buf,Math.floor(e*wP),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){SD(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=LD(this.buf,e,this.pos);var i=this.pos-t;i>=128&&bP(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),hg.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),hg.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&bP(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Xr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,PD,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,AD,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,MD,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,ID,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,CD,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,kD,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,OD,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,FD,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,RD,t)},writeBytesField:function(e,t){this.writeTag(e,Xr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function bD(e,t,i){var a=i.buf,c,f;if(f=a[i.pos++],c=(f&112)>>4,f<128||(f=a[i.pos++],c|=(f&127)<<3,f<128)||(f=a[i.pos++],c|=(f&127)<<10,f<128)||(f=a[i.pos++],c|=(f&127)<<17,f<128)||(f=a[i.pos++],c|=(f&127)<<24,f<128)||(f=a[i.pos++],c|=(f&1)<<31,f<128))return vh(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function el(e){return e.type===Xr.Bytes?e.readVarint()+e.pos:e.pos+1}function vh(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function SD(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),ED(i,a,t),TD(a,t)}function ED(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function TD(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function bP(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function PD(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function AD(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function ID(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function CD(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function MD(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function kD(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function OD(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function FD(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function RD(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function fg(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function _h(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function SP(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function jD(e,t,i){for(var a="",c=t;c<i;){var f=e[c],d=null,l=f>239?4:f>223?3:f>191?2:1;if(c+l>i)break;var w,E,C;l===1?f<128&&(d=f):l===2?(w=e[c+1],(w&192)===128&&(d=(f&31)<<6|w&63,d<=127&&(d=null))):l===3?(w=e[c+1],E=e[c+2],(w&192)===128&&(E&192)===128&&(d=(f&15)<<12|(w&63)<<6|E&63,(d<=2047||d>=55296&&d<=57343)&&(d=null))):l===4&&(w=e[c+1],E=e[c+2],C=e[c+3],(w&192)===128&&(E&192)===128&&(C&192)===128&&(d=(f&15)<<18|(w&63)<<12|(E&63)<<6|C&63,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,l=1):d>65535&&(d-=65536,a+=String.fromCharCode(d>>>10&1023|55296),d=56320|d&1023),a+=String.fromCharCode(d),c+=l}return a}function zD(e,t,i){return v3.decode(e.subarray(t,i))}function LD(e,t,i){for(var a=0,c,f;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(f)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,f=c;continue}else c=f-55296<<10|c-56320|65536,f=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):f=c;continue}else f&&(e[i++]=239,e[i++]=191,e[i++]=189,f=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Zb={exports:{}},_3=function(t,i){return function(){for(var c=new Array(arguments.length),f=0;f<c.length;f++)c[f]=arguments[f];return t.apply(i,c)}},BD=_3,Mc=Object.prototype.toString;function Xb(e){return Mc.call(e)==="[object Array]"}function Wx(e){return typeof e>"u"}function DD(e){return e!==null&&!Wx(e)&&e.constructor!==null&&!Wx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function ND(e){return Mc.call(e)==="[object ArrayBuffer]"}function $D(e){return typeof FormData<"u"&&e instanceof FormData}function UD(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function VD(e){return typeof e=="string"}function GD(e){return typeof e=="number"}function x3(e){return e!==null&&typeof e=="object"}function Rg(e){if(Mc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function WD(e){return Mc.call(e)==="[object Date]"}function HD(e){return Mc.call(e)==="[object File]"}function ZD(e){return Mc.call(e)==="[object Blob]"}function w3(e){return Mc.call(e)==="[object Function]"}function XD(e){return x3(e)&&w3(e.pipe)}function qD(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function KD(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function JD(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function qb(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Xb(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function Hx(){var e={};function t(c,f){Rg(e[f])&&Rg(c)?e[f]=Hx(e[f],c):Rg(c)?e[f]=Hx({},c):Xb(c)?e[f]=c.slice():e[f]=c}for(var i=0,a=arguments.length;i<a;i++)qb(arguments[i],t);return e}function YD(e,t,i){return qb(t,function(c,f){i&&typeof c=="function"?e[f]=BD(c,i):e[f]=c}),e}function QD(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Yo={isArray:Xb,isArrayBuffer:ND,isBuffer:DD,isFormData:$D,isArrayBufferView:UD,isString:VD,isNumber:GD,isObject:x3,isPlainObject:Rg,isUndefined:Wx,isDate:WD,isFile:HD,isBlob:ZD,isFunction:w3,isStream:XD,isURLSearchParams:qD,isStandardBrowserEnv:JD,forEach:qb,merge:Hx,extend:YD,trim:KD,stripBOM:QD},xh=Yo;function EP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var b3=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(xh.isURLSearchParams(i))c=i.toString();else{var f=[];xh.forEach(i,function(w,E){w===null||typeof w>"u"||(xh.isArray(w)?E=E+"[]":w=[w],xh.forEach(w,function(b){xh.isDate(b)?b=b.toISOString():xh.isObject(b)&&(b=JSON.stringify(b)),f.push(EP(E)+"="+EP(b))}))}),c=f.join("&")}if(c){var d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},eN=Yo;function k0(){this.handlers=[]}k0.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};k0.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};k0.prototype.forEach=function(t){eN.forEach(this.handlers,function(a){a!==null&&t(a)})};var tN=k0,rN=Yo,nN=function(t,i){rN.forEach(t,function(c,f){f!==i&&f.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[f])})},S3=function(t,i,a,c,f){return t.config=i,a&&(t.code=a),t.request=c,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},x_,TP;function E3(){if(TP)return x_;TP=1;var e=S3;return x_=function(i,a,c,f,d){var l=new Error(i);return e(l,a,c,f,d)},x_}var w_,PP;function iN(){if(PP)return w_;PP=1;var e=E3();return w_=function(i,a,c){var f=c.config.validateStatus;!c.status||!f||f(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},w_}var b_,AP;function oN(){if(AP)return b_;AP=1;var e=Yo;return b_=e.isStandardBrowserEnv()?function(){return{write:function(a,c,f,d,l,w){var E=[];E.push(a+"="+encodeURIComponent(c)),e.isNumber(f)&&E.push("expires="+new Date(f).toGMTString()),e.isString(d)&&E.push("path="+d),e.isString(l)&&E.push("domain="+l),w===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),b_}var S_,IP;function sN(){return IP||(IP=1,S_=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),S_}var E_,CP;function aN(){return CP||(CP=1,E_=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),E_}var T_,MP;function lN(){if(MP)return T_;MP=1;var e=sN(),t=aN();return T_=function(a,c){return a&&!e(c)?t(a,c):c},T_}var P_,kP;function uN(){if(kP)return P_;kP=1;var e=Yo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return P_=function(a){var c={},f,d,l;return a&&e.forEach(a.split(`
`),function(E){if(l=E.indexOf(":"),f=e.trim(E.substr(0,l)).toLowerCase(),d=e.trim(E.substr(l+1)),f){if(c[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?c[f]=(c[f]?c[f]:[]).concat([d]):c[f]=c[f]?c[f]+", "+d:d}}),c},P_}var A_,OP;function cN(){if(OP)return A_;OP=1;var e=Yo;return A_=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function f(d){var l=d;return i&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=f(window.location.href),function(l){var w=e.isString(l)?f(l):l;return w.protocol===c.protocol&&w.host===c.host}}():function(){return function(){return!0}}(),A_}var I_,FP;function RP(){if(FP)return I_;FP=1;var e=Yo,t=iN(),i=oN(),a=b3,c=lN(),f=uN(),d=cN(),l=E3();return I_=function(E){return new Promise(function(b,T){var R=E.data,L=E.headers,j=E.responseType;e.isFormData(R)&&delete L["Content-Type"];var le=new XMLHttpRequest;if(E.auth){var K=E.auth.username||"",Z=E.auth.password?unescape(encodeURIComponent(E.auth.password)):"";L.Authorization="Basic "+btoa(K+":"+Z)}var G=c(E.baseURL,E.url);le.open(E.method.toUpperCase(),a(G,E.params,E.paramsSerializer),!0),le.timeout=E.timeout;function se(){if(le){var W="getAllResponseHeaders"in le?f(le.getAllResponseHeaders()):null,P=!j||j==="text"||j==="json"?le.responseText:le.response,z={data:P,status:le.status,statusText:le.statusText,headers:W,config:E,request:le};t(b,T,z),le=null}}if("onloadend"in le?le.onloadend=se:le.onreadystatechange=function(){!le||le.readyState!==4||le.status===0&&!(le.responseURL&&le.responseURL.indexOf("file:")===0)||setTimeout(se)},le.onabort=function(){le&&(T(l("Request aborted",E,"ECONNABORTED",le)),le=null)},le.onerror=function(){T(l("Network Error",E,null,le)),le=null},le.ontimeout=function(){var P="timeout of "+E.timeout+"ms exceeded";E.timeoutErrorMessage&&(P=E.timeoutErrorMessage),T(l(P,E,E.transitional&&E.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",le)),le=null},e.isStandardBrowserEnv()){var q=(E.withCredentials||d(G))&&E.xsrfCookieName?i.read(E.xsrfCookieName):void 0;q&&(L[E.xsrfHeaderName]=q)}"setRequestHeader"in le&&e.forEach(L,function(P,z){typeof R>"u"&&z.toLowerCase()==="content-type"?delete L[z]:le.setRequestHeader(z,P)}),e.isUndefined(E.withCredentials)||(le.withCredentials=!!E.withCredentials),j&&j!=="json"&&(le.responseType=E.responseType),typeof E.onDownloadProgress=="function"&&le.addEventListener("progress",E.onDownloadProgress),typeof E.onUploadProgress=="function"&&le.upload&&le.upload.addEventListener("progress",E.onUploadProgress),E.cancelToken&&E.cancelToken.promise.then(function(P){le&&(le.abort(),T(P),le=null)}),R||(R=null),le.send(R)})},I_}var Ii=Yo,jP=nN,hN=S3,fN={"Content-Type":"application/x-www-form-urlencoded"};function zP(e,t){!Ii.isUndefined(e)&&Ii.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function dN(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=RP()),e}function pN(e,t,i){if(Ii.isString(e))try{return(t||JSON.parse)(e),Ii.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var O0={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:dN(),transformRequest:[function(t,i){return jP(i,"Accept"),jP(i,"Content-Type"),Ii.isFormData(t)||Ii.isArrayBuffer(t)||Ii.isBuffer(t)||Ii.isStream(t)||Ii.isFile(t)||Ii.isBlob(t)?t:Ii.isArrayBufferView(t)?t.buffer:Ii.isURLSearchParams(t)?(zP(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ii.isObject(t)||i&&i["Content-Type"]==="application/json"?(zP(i,"application/json"),pN(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,f=!a&&this.responseType==="json";if(f||c&&Ii.isString(t)&&t.length)try{return JSON.parse(t)}catch(d){if(f)throw d.name==="SyntaxError"?hN(d,this,"E_JSON_PARSE"):d}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};O0.headers={common:{Accept:"application/json, text/plain, */*"}};Ii.forEach(["delete","get","head"],function(t){O0.headers[t]={}});Ii.forEach(["post","put","patch"],function(t){O0.headers[t]=Ii.merge(fN)});var Kb=O0,mN=Yo,gN=Kb,yN=function(t,i,a){var c=this||gN;return mN.forEach(a,function(d){t=d.call(c,t,i)}),t},C_,LP;function T3(){return LP||(LP=1,C_=function(t){return!!(t&&t.__CANCEL__)}),C_}var BP=Yo,M_=yN,vN=T3(),_N=Kb;function k_(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var xN=function(t){k_(t),t.headers=t.headers||{},t.data=M_.call(t,t.data,t.headers,t.transformRequest),t.headers=BP.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),BP.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||_N.adapter;return i(t).then(function(c){return k_(t),c.data=M_.call(t,c.data,c.headers,t.transformResponse),c},function(c){return vN(c)||(k_(t),c&&c.response&&(c.response.data=M_.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Gi=Yo,P3=function(t,i){i=i||{};var a={},c=["url","method","data"],f=["headers","auth","proxy","params"],d=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function w(T,R){return Gi.isPlainObject(T)&&Gi.isPlainObject(R)?Gi.merge(T,R):Gi.isPlainObject(R)?Gi.merge({},R):Gi.isArray(R)?R.slice():R}function E(T){Gi.isUndefined(i[T])?Gi.isUndefined(t[T])||(a[T]=w(void 0,t[T])):a[T]=w(t[T],i[T])}Gi.forEach(c,function(R){Gi.isUndefined(i[R])||(a[R]=w(void 0,i[R]))}),Gi.forEach(f,E),Gi.forEach(d,function(R){Gi.isUndefined(i[R])?Gi.isUndefined(t[R])||(a[R]=w(void 0,t[R])):a[R]=w(void 0,i[R])}),Gi.forEach(l,function(R){R in i?a[R]=w(t[R],i[R]):R in t&&(a[R]=w(void 0,t[R]))});var C=c.concat(f).concat(d).concat(l),b=Object.keys(t).concat(Object.keys(i)).filter(function(R){return C.indexOf(R)===-1});return Gi.forEach(b,E),a};const wN="axios",bN="0.21.4",SN="Promise based HTTP client for the browser and node.js",EN="index.js",TN={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},PN={type:"git",url:"https://github.com/axios/axios.git"},AN=["xhr","http","ajax","promise","node"],IN="Matt Zabriskie",CN="MIT",MN={url:"https://github.com/axios/axios/issues"},kN="https://axios-http.com",ON={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},FN={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},RN="dist/axios.min.js",jN="dist/axios.min.js",zN="./index.d.ts",LN={"follow-redirects":"^1.14.0"},BN=[{path:"./dist/axios.min.js",threshold:"5kB"}],DN={name:wN,version:bN,description:SN,main:EN,scripts:TN,repository:PN,keywords:AN,author:IN,license:CN,bugs:MN,homepage:kN,devDependencies:ON,browser:FN,jsdelivr:RN,unpkg:jN,typings:zN,dependencies:LN,bundlesize:BN};var A3=DN,Jb={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Jb[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var DP={},NN=A3.version.split(".");function I3(e,t){for(var i=t?t.split("."):NN,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Jb.transitional=function(t,i,a){var c=i&&I3(i);function f(d,l){return"[Axios v"+A3.version+"] Transitional option '"+d+"'"+l+(a?". "+a:"")}return function(d,l,w){if(t===!1)throw new Error(f(l," has been removed in "+i));return c&&!DP[l]&&(DP[l]=!0,console.warn(f(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(d,l,w):!0}};function $N(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var f=a[c],d=t[f];if(d){var l=e[f],w=l===void 0||d(l,f,e);if(w!==!0)throw new TypeError("option "+f+" must be "+w);continue}if(i!==!0)throw Error("Unknown option "+f)}}var UN={isOlderVersion:I3,assertOptions:$N,validators:Jb},C3=Yo,VN=b3,NP=tN,$P=xN,F0=P3,M3=UN,wh=M3.validators;function tm(e){this.defaults=e,this.interceptors={request:new NP,response:new NP}}tm.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=F0(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&M3.assertOptions(i,{silentJSONParsing:wh.transitional(wh.boolean,"1.0.0"),forcedJSONParsing:wh.transitional(wh.boolean,"1.0.0"),clarifyTimeoutError:wh.transitional(wh.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(c=c&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});var d;if(!c){var l=[$P,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(f),d=Promise.resolve(t);l.length;)d=d.then(l.shift(),l.shift());return d}for(var w=t;a.length;){var E=a.shift(),C=a.shift();try{w=E(w)}catch(b){C(b);break}}try{d=$P(w)}catch(b){return Promise.reject(b)}for(;f.length;)d=d.then(f.shift(),f.shift());return d};tm.prototype.getUri=function(t){return t=F0(this.defaults,t),VN(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};C3.forEach(["delete","get","head","options"],function(t){tm.prototype[t]=function(i,a){return this.request(F0(a||{},{method:t,url:i,data:(a||{}).data}))}});C3.forEach(["post","put","patch"],function(t){tm.prototype[t]=function(i,a,c){return this.request(F0(c||{},{method:t,url:i,data:a}))}});var GN=tm,O_,UP;function k3(){if(UP)return O_;UP=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,O_=e,O_}var F_,VP;function WN(){if(VP)return F_;VP=1;var e=k3();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(d){a=d});var c=this;i(function(d){c.reason||(c.reason=new e(d),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(d){a=d});return{token:c,cancel:a}},F_=t,F_}var R_,GP;function HN(){return GP||(GP=1,R_=function(t){return function(a){return t.apply(null,a)}}),R_}var j_,WP;function ZN(){return WP||(WP=1,j_=function(t){return typeof t=="object"&&t.isAxiosError===!0}),j_}var HP=Yo,XN=_3,jg=GN,qN=P3,KN=Kb;function O3(e){var t=new jg(e),i=XN(jg.prototype.request,t);return HP.extend(i,jg.prototype,t),HP.extend(i,t),i}var Xs=O3(KN);Xs.Axios=jg;Xs.create=function(t){return O3(qN(Xs.defaults,t))};Xs.Cancel=k3();Xs.CancelToken=WN();Xs.isCancel=T3();Xs.all=function(t){return Promise.all(t)};Xs.spread=HN();Xs.isAxiosError=ZN();Zb.exports=Xs;Zb.exports.default=Xs;var JN=Zb.exports,YN=JN;const QN={},e8=Object.freeze(Object.defineProperty({__proto__:null,default:QN},Symbol.toStringTag,{value:"Module"})),F3=pw(e8);var R0={},t8=Jh;function Jh(e,t){this.x=e,this.y=t}Jh.prototype={clone:function(){return new Jh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),f=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Jh.convert=function(e){return e instanceof Jh?e:Array.isArray(e)?new Jh(e[0],e[1]):e};var r8=t8,R3=df;function df(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(n8,this,t)}function n8(e,t,i){e==1?t.id=i.readVarint():e==2?i8(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function i8(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}df.types=["Unknown","Point","LineString","Polygon"];df.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,f=0,d=[],l;e.pos<t;){if(a<=0){var w=e.readVarint();i=w&7,a=w>>3}if(a--,i===1||i===2)c+=e.readSVarint(),f+=e.readSVarint(),i===1&&(l&&d.push(l),l=[]),l.push(new r8(c,f));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&d.push(l),d};df.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,f=0,d=1/0,l=-1/0,w=1/0,E=-1/0;e.pos<t;){if(a<=0){var C=e.readVarint();i=C&7,a=C>>3}if(a--,i===1||i===2)c+=e.readSVarint(),f+=e.readSVarint(),c<d&&(d=c),c>l&&(l=c),f<w&&(w=f),f>E&&(E=f);else if(i!==7)throw new Error("unknown command "+i)}return[d,w,l,E]};df.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,f=this.extent*t,d=this.loadGeometry(),l=df.types[this.type],w,E;function C(R){for(var L=0;L<R.length;L++){var j=R[L],le=180-(j.y+f)*360/a;R[L]=[(j.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(le*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(w=0;w<d.length;w++)b[w]=d[w][0];d=b,C(d);break;case 2:for(w=0;w<d.length;w++)C(d[w]);break;case 3:for(d=o8(d),w=0;w<d.length;w++)for(E=0;E<d[w].length;E++)C(d[w][E]);break}d.length===1?d=d[0]:l="Multi"+l;var T={type:"Feature",geometry:{type:l,coordinates:d},properties:this.properties};return"id"in this&&(T.id=this.id),T};function o8(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,f=0;f<t;f++){var d=s8(e[f]);d!==0&&(c===void 0&&(c=d<0),c===d<0?(a&&i.push(a),a=[e[f]]):a.push(e[f]))}return a&&i.push(a),i}function s8(e){for(var t=0,i=0,a=e.length,c=a-1,f,d;i<a;c=i++)f=e[i],d=e[c],t+=(d.x-f.x)*(f.y+d.y);return t}var a8=R3,j3=z3;function z3(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(l8,this,t),this.length=this._features.length}function l8(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(u8(i))}function u8(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}z3.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new a8(this._pbf,t,this.extent,this._keys,this._values)};var c8=j3,h8=f8;function f8(e,t){this.layers=e.readFields(d8,{},t)}function d8(e,t,i){if(e===3){var a=new c8(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}R0.VectorTile=h8;R0.VectorTileFeature=R3;R0.VectorTileLayer=j3;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=nD,i=_D,a=xD,c=YN,f=F3,d=R0;function l(Z){return Z&&typeof Z=="object"&&"default"in Z?Z:{default:Z}}var w=l(a),E=l(c),C=l(f),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ns<"u"?Ns:typeof self<"u"?self:{};function T(Z){var G={exports:{}};return Z(G,G.exports),G.exports}var R=T(function(Z,G){(function(q,W){Z.exports=W(E.default)})(b,function(se){return function(q){var W={};function P(z){if(W[z])return W[z].exports;var D=W[z]={i:z,l:!1,exports:{}};return q[z].call(D.exports,D,D.exports,P),D.l=!0,D.exports}return P.m=q,P.c=W,P.d=function(z,D,ee){P.o(z,D)||Object.defineProperty(z,D,{enumerable:!0,get:ee})},P.r=function(z){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})},P.t=function(z,D){if(D&1&&(z=P(z)),D&8||D&4&&typeof z=="object"&&z&&z.__esModule)return z;var ee=Object.create(null);if(P.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:z}),D&2&&typeof z!="string")for(var X in z)P.d(ee,X,(function(ye){return z[ye]}).bind(null,X));return ee},P.n=function(z){var D=z&&z.__esModule?function(){return z.default}:function(){return z};return P.d(D,"a",D),D},P.o=function(z,D){return Object.prototype.hasOwnProperty.call(z,D)},P.p="",P(P.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(q,W,P){P.r(W),P.d(W,"CacheControl",function(){return Pe}),P.d(W,"parse",function(){return $e}),P.d(W,"format",function(){return Ce}),P("./node_modules/core-js/modules/es6.array.from.js"),P("./node_modules/core-js/modules/es6.function.name.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/core-js/modules/web.dom.iterable.js"),P("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.regexp.split.js"),P("./node_modules/core-js/modules/es6.number.is-finite.js");function z(Fe,He){return ge(Fe)||ye(Fe,He)||ee(Fe,He)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(Fe,He){if(Fe){if(typeof Fe=="string")return X(Fe,He);var We=Object.prototype.toString.call(Fe).slice(8,-1);if(We==="Object"&&Fe.constructor&&(We=Fe.constructor.name),We==="Map"||We==="Set")return Array.from(Fe);if(We==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(We))return X(Fe,He)}}function X(Fe,He){(He==null||He>Fe.length)&&(He=Fe.length);for(var We=0,it=new Array(He);We<He;We++)it[We]=Fe[We];return it}function ye(Fe,He){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Fe)))){var We=[],it=!0,ct=!1,vt=void 0;try{for(var Mt=Fe[Symbol.iterator](),pt;!(it=(pt=Mt.next()).done)&&(We.push(pt.value),!(He&&We.length===He));it=!0);}catch(xt){ct=!0,vt=xt}finally{try{!it&&Mt.return!=null&&Mt.return()}finally{if(ct)throw vt}}return We}}function ge(Fe){if(Array.isArray(Fe))return Fe}function fe(Fe,He){if(!(Fe instanceof He))throw new TypeError("Cannot call a class as a function")}function ie(Fe,He){for(var We=0;We<He.length;We++){var it=He[We];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Fe,it.key,it)}}function he(Fe,He,We){return He&&ie(Fe.prototype,He),We&&ie(Fe,We),Fe}var Y=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,re={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function de(Fe){return Fe===null}function be(Fe){if(!Fe)return null;var He=parseInt(Fe,10);return!Number.isFinite(He)||He<0?null:He}var Pe=function(){function Fe(){fe(this,Fe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return he(Fe,[{key:"parse",value:function(We){if(!We||We.length===0)return this;var it={},ct=We.match(Y)||[];return Array.prototype.forEach.call(ct,function(vt){var Mt=vt.split("=",2),pt=z(Mt,1),xt=pt[0],Wt=null;Mt.length>1&&(Wt=Mt[1].trim()),it[xt.toLowerCase()]=Wt}),this.maxAge=be(it[re.maxAge]),this.sharedMaxAge=be(it[re.sharedMaxAge]),this.maxStale=de(it[re.maxStale]),this.maxStaleDuration=be(it[re.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=be(it[re.minFresh]),this.immutable=de(it[re.immutable]),this.mustRevalidate=de(it[re.mustRevalidate]),this.noCache=de(it[re.noCache]),this.noStore=de(it[re.noStore]),this.noTransform=de(it[re.noTransform]),this.onlyIfCached=de(it[re.onlyIfCached]),this.private=de(it[re.private]),this.proxyRevalidate=de(it[re.proxyRevalidate]),this.public=de(it[re.public]),this}},{key:"format",value:function(){var We=[];return this.maxAge&&We.push("".concat(re.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&We.push("".concat(re.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?We.push("".concat(re.maxStale,"=").concat(this.maxStaleDuration)):We.push(re.maxStale)),this.minFresh&&We.push("".concat(re.minFresh,"=").concat(this.minFresh)),this.immutable&&We.push(re.immutable),this.mustRevalidate&&We.push(re.mustRevalidate),this.noCache&&We.push(re.noCache),this.noStore&&We.push(re.noStore),this.noTransform&&We.push(re.noTransform),this.onlyIfCached&&We.push(re.onlyIfCached),this.private&&We.push(re.private),this.proxyRevalidate&&We.push(re.proxyRevalidate),this.public&&We.push(re.public),We.join(", ")}}]),Fe}();function $e(Fe){var He=new Pe;return He.parse(Fe)}function Ce(Fe){return Fe instanceof Pe?Fe.format():Pe.prototype.format.call(Fe)}W.default={CacheControl:Pe,parse:$e,format:Ce}},"./node_modules/charenc/charenc.js":function(q,W){var P={utf8:{stringToBytes:function(z){return P.bin.stringToBytes(unescape(encodeURIComponent(z)))},bytesToString:function(z){return decodeURIComponent(escape(P.bin.bytesToString(z)))}},bin:{stringToBytes:function(z){for(var D=[],ee=0;ee<z.length;ee++)D.push(z.charCodeAt(ee)&255);return D},bytesToString:function(z){for(var D=[],ee=0;ee<z.length;ee++)D.push(String.fromCharCode(z[ee]));return D.join("")}}};q.exports=P},"./node_modules/core-js/modules/_a-function.js":function(q,W){q.exports=function(P){if(typeof P!="function")throw TypeError(P+" is not a function!");return P}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_wks.js")("unscopables"),D=Array.prototype;D[z]==null&&P("./node_modules/core-js/modules/_hide.js")(D,z,{}),q.exports=function(ee){D[z][ee]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_string-at.js")(!0);q.exports=function(D,ee,X){return ee+(X?z(D,ee).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_is-object.js");q.exports=function(D){if(!z(D))throw TypeError(D+" is not an object!");return D}},"./node_modules/core-js/modules/_array-includes.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_to-iobject.js"),D=P("./node_modules/core-js/modules/_to-length.js"),ee=P("./node_modules/core-js/modules/_to-absolute-index.js");q.exports=function(X){return function(ye,ge,fe){var ie=z(ye),he=D(ie.length),Y=ee(fe,he),re;if(X&&ge!=ge){for(;he>Y;)if(re=ie[Y++],re!=re)return!0}else for(;he>Y;Y++)if((X||Y in ie)&&ie[Y]===ge)return X||Y||0;return!X&&-1}}},"./node_modules/core-js/modules/_bind.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_a-function.js"),D=P("./node_modules/core-js/modules/_is-object.js"),ee=P("./node_modules/core-js/modules/_invoke.js"),X=[].slice,ye={},ge=function(fe,ie,he){if(!(ie in ye)){for(var Y=[],re=0;re<ie;re++)Y[re]="a["+re+"]";ye[ie]=Function("F,a","return new F("+Y.join(",")+")")}return ye[ie](fe,he)};q.exports=Function.bind||function(ie){var he=z(this),Y=X.call(arguments,1),re=function(){var de=Y.concat(X.call(arguments));return this instanceof re?ge(he,de.length,de):ee(he,de,ie)};return D(he.prototype)&&(re.prototype=he.prototype),re}},"./node_modules/core-js/modules/_classof.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_cof.js"),D=P("./node_modules/core-js/modules/_wks.js")("toStringTag"),ee=z(function(){return arguments}())=="Arguments",X=function(ye,ge){try{return ye[ge]}catch{}};q.exports=function(ye){var ge,fe,ie;return ye===void 0?"Undefined":ye===null?"Null":typeof(fe=X(ge=Object(ye),D))=="string"?fe:ee?z(ge):(ie=z(ge))=="Object"&&typeof ge.callee=="function"?"Arguments":ie}},"./node_modules/core-js/modules/_cof.js":function(q,W){var P={}.toString;q.exports=function(z){return P.call(z).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(q,W){var P=q.exports={version:"2.6.12"};typeof __e=="number"&&(__e=P)},"./node_modules/core-js/modules/_create-property.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),D=P("./node_modules/core-js/modules/_property-desc.js");q.exports=function(ee,X,ye){X in ee?z.f(ee,X,D(0,ye)):ee[X]=ye}},"./node_modules/core-js/modules/_ctx.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_a-function.js");q.exports=function(D,ee,X){if(z(D),ee===void 0)return D;switch(X){case 1:return function(ye){return D.call(ee,ye)};case 2:return function(ye,ge){return D.call(ee,ye,ge)};case 3:return function(ye,ge,fe){return D.call(ee,ye,ge,fe)}}return function(){return D.apply(ee,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(q,W){q.exports=function(P){if(P==null)throw TypeError("Can't call method on  "+P);return P}},"./node_modules/core-js/modules/_descriptors.js":function(q,W,P){q.exports=!P("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_is-object.js"),D=P("./node_modules/core-js/modules/_global.js").document,ee=z(D)&&z(D.createElement);q.exports=function(X){return ee?D.createElement(X):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(q,W){q.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-keys.js"),D=P("./node_modules/core-js/modules/_object-gops.js"),ee=P("./node_modules/core-js/modules/_object-pie.js");q.exports=function(X){var ye=z(X),ge=D.f;if(ge)for(var fe=ge(X),ie=ee.f,he=0,Y;fe.length>he;)ie.call(X,Y=fe[he++])&&ye.push(Y);return ye}},"./node_modules/core-js/modules/_export.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_global.js"),D=P("./node_modules/core-js/modules/_core.js"),ee=P("./node_modules/core-js/modules/_hide.js"),X=P("./node_modules/core-js/modules/_redefine.js"),ye=P("./node_modules/core-js/modules/_ctx.js"),ge="prototype",fe=function(ie,he,Y){var re=ie&fe.F,de=ie&fe.G,be=ie&fe.S,Pe=ie&fe.P,$e=ie&fe.B,Ce=de?z:be?z[he]||(z[he]={}):(z[he]||{})[ge],Fe=de?D:D[he]||(D[he]={}),He=Fe[ge]||(Fe[ge]={}),We,it,ct,vt;de&&(Y=he);for(We in Y)it=!re&&Ce&&Ce[We]!==void 0,ct=(it?Ce:Y)[We],vt=$e&&it?ye(ct,z):Pe&&typeof ct=="function"?ye(Function.call,ct):ct,Ce&&X(Ce,We,ct,ie&fe.U),Fe[We]!=ct&&ee(Fe,We,vt),Pe&&He[We]!=ct&&(He[We]=ct)};z.core=D,fe.F=1,fe.G=2,fe.S=4,fe.P=8,fe.B=16,fe.W=32,fe.U=64,fe.R=128,q.exports=fe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_wks.js")("match");q.exports=function(D){var ee=/./;try{"/./"[D](ee)}catch{try{return ee[z]=!1,!"/./"[D](ee)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(q,W){q.exports=function(P){try{return!!P()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(q,W,P){P("./node_modules/core-js/modules/es6.regexp.exec.js");var z=P("./node_modules/core-js/modules/_redefine.js"),D=P("./node_modules/core-js/modules/_hide.js"),ee=P("./node_modules/core-js/modules/_fails.js"),X=P("./node_modules/core-js/modules/_defined.js"),ye=P("./node_modules/core-js/modules/_wks.js"),ge=P("./node_modules/core-js/modules/_regexp-exec.js"),fe=ye("species"),ie=!ee(function(){var Y=/./;return Y.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(Y,"$<a>")!=="7"}),he=function(){var Y=/(?:)/,re=Y.exec;Y.exec=function(){return re.apply(this,arguments)};var de="ab".split(Y);return de.length===2&&de[0]==="a"&&de[1]==="b"}();q.exports=function(Y,re,de){var be=ye(Y),Pe=!ee(function(){var it={};return it[be]=function(){return 7},""[Y](it)!=7}),$e=Pe?!ee(function(){var it=!1,ct=/a/;return ct.exec=function(){return it=!0,null},Y==="split"&&(ct.constructor={},ct.constructor[fe]=function(){return ct}),ct[be](""),!it}):void 0;if(!Pe||!$e||Y==="replace"&&!ie||Y==="split"&&!he){var Ce=/./[be],Fe=de(X,be,""[Y],function(ct,vt,Mt,pt,xt){return vt.exec===ge?Pe&&!xt?{done:!0,value:Ce.call(vt,Mt,pt)}:{done:!0,value:ct.call(Mt,vt,pt)}:{done:!1}}),He=Fe[0],We=Fe[1];z(String.prototype,Y,He),D(RegExp.prototype,be,re==2?function(it,ct){return We.call(it,this,ct)}:function(it){return We.call(it,this)})}}},"./node_modules/core-js/modules/_flags.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_an-object.js");q.exports=function(){var D=z(this),ee="";return D.global&&(ee+="g"),D.ignoreCase&&(ee+="i"),D.multiline&&(ee+="m"),D.unicode&&(ee+="u"),D.sticky&&(ee+="y"),ee}},"./node_modules/core-js/modules/_function-to-string.js":function(q,W,P){q.exports=P("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(q,W){var P=q.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=P)},"./node_modules/core-js/modules/_has.js":function(q,W){var P={}.hasOwnProperty;q.exports=function(z,D){return P.call(z,D)}},"./node_modules/core-js/modules/_hide.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),D=P("./node_modules/core-js/modules/_property-desc.js");q.exports=P("./node_modules/core-js/modules/_descriptors.js")?function(ee,X,ye){return z.f(ee,X,D(1,ye))}:function(ee,X,ye){return ee[X]=ye,ee}},"./node_modules/core-js/modules/_html.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_global.js").document;q.exports=z&&z.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(q,W,P){q.exports=!P("./node_modules/core-js/modules/_descriptors.js")&&!P("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(P("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(q,W){q.exports=function(P,z,D){var ee=D===void 0;switch(z.length){case 0:return ee?P():P.call(D);case 1:return ee?P(z[0]):P.call(D,z[0]);case 2:return ee?P(z[0],z[1]):P.call(D,z[0],z[1]);case 3:return ee?P(z[0],z[1],z[2]):P.call(D,z[0],z[1],z[2]);case 4:return ee?P(z[0],z[1],z[2],z[3]):P.call(D,z[0],z[1],z[2],z[3])}return P.apply(D,z)}},"./node_modules/core-js/modules/_iobject.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_cof.js");q.exports=Object("z").propertyIsEnumerable(0)?Object:function(D){return z(D)=="String"?D.split(""):Object(D)}},"./node_modules/core-js/modules/_is-array-iter.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_iterators.js"),D=P("./node_modules/core-js/modules/_wks.js")("iterator"),ee=Array.prototype;q.exports=function(X){return X!==void 0&&(z.Array===X||ee[D]===X)}},"./node_modules/core-js/modules/_is-array.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_cof.js");q.exports=Array.isArray||function(ee){return z(ee)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(q,W){q.exports=function(P){return typeof P=="object"?P!==null:typeof P=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_is-object.js"),D=P("./node_modules/core-js/modules/_cof.js"),ee=P("./node_modules/core-js/modules/_wks.js")("match");q.exports=function(X){var ye;return z(X)&&((ye=X[ee])!==void 0?!!ye:D(X)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_an-object.js");q.exports=function(D,ee,X,ye){try{return ye?ee(z(X)[0],X[1]):ee(X)}catch(fe){var ge=D.return;throw ge!==void 0&&z(ge.call(D)),fe}}},"./node_modules/core-js/modules/_iter-create.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-create.js"),D=P("./node_modules/core-js/modules/_property-desc.js"),ee=P("./node_modules/core-js/modules/_set-to-string-tag.js"),X={};P("./node_modules/core-js/modules/_hide.js")(X,P("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),q.exports=function(ye,ge,fe){ye.prototype=z(X,{next:D(1,fe)}),ee(ye,ge+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_library.js"),D=P("./node_modules/core-js/modules/_export.js"),ee=P("./node_modules/core-js/modules/_redefine.js"),X=P("./node_modules/core-js/modules/_hide.js"),ye=P("./node_modules/core-js/modules/_iterators.js"),ge=P("./node_modules/core-js/modules/_iter-create.js"),fe=P("./node_modules/core-js/modules/_set-to-string-tag.js"),ie=P("./node_modules/core-js/modules/_object-gpo.js"),he=P("./node_modules/core-js/modules/_wks.js")("iterator"),Y=!([].keys&&"next"in[].keys()),re="@@iterator",de="keys",be="values",Pe=function(){return this};q.exports=function($e,Ce,Fe,He,We,it,ct){ge(Fe,Ce,He);var vt=function(N){if(!Y&&N in Wt)return Wt[N];switch(N){case de:return function(){return new Fe(this,N)};case be:return function(){return new Fe(this,N)}}return function(){return new Fe(this,N)}},Mt=Ce+" Iterator",pt=We==be,xt=!1,Wt=$e.prototype,Ht=Wt[he]||Wt[re]||We&&Wt[We],ar=Ht||vt(We),et=We?pt?vt("entries"):ar:void 0,vr=Ce=="Array"&&Wt.entries||Ht,lr,Vt,Se;if(vr&&(Se=ie(vr.call(new $e)),Se!==Object.prototype&&Se.next&&(fe(Se,Mt,!0),!z&&typeof Se[he]!="function"&&X(Se,he,Pe))),pt&&Ht&&Ht.name!==be&&(xt=!0,ar=function(){return Ht.call(this)}),(!z||ct)&&(Y||xt||!Wt[he])&&X(Wt,he,ar),ye[Ce]=ar,ye[Mt]=Pe,We)if(lr={values:pt?ar:vt(be),keys:it?ar:vt(de),entries:et},ct)for(Vt in lr)Vt in Wt||ee(Wt,Vt,lr[Vt]);else D(D.P+D.F*(Y||xt),Ce,lr);return lr}},"./node_modules/core-js/modules/_iter-detect.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_wks.js")("iterator"),D=!1;try{var ee=[7][z]();ee.return=function(){D=!0},Array.from(ee,function(){throw 2})}catch{}q.exports=function(X,ye){if(!ye&&!D)return!1;var ge=!1;try{var fe=[7],ie=fe[z]();ie.next=function(){return{done:ge=!0}},fe[z]=function(){return ie},X(fe)}catch{}return ge}},"./node_modules/core-js/modules/_iter-step.js":function(q,W){q.exports=function(P,z){return{value:z,done:!!P}}},"./node_modules/core-js/modules/_iterators.js":function(q,W){q.exports={}},"./node_modules/core-js/modules/_library.js":function(q,W){q.exports=!1},"./node_modules/core-js/modules/_meta.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_uid.js")("meta"),D=P("./node_modules/core-js/modules/_is-object.js"),ee=P("./node_modules/core-js/modules/_has.js"),X=P("./node_modules/core-js/modules/_object-dp.js").f,ye=0,ge=Object.isExtensible||function(){return!0},fe=!P("./node_modules/core-js/modules/_fails.js")(function(){return ge(Object.preventExtensions({}))}),ie=function(be){X(be,z,{value:{i:"O"+ ++ye,w:{}}})},he=function(be,Pe){if(!D(be))return typeof be=="symbol"?be:(typeof be=="string"?"S":"P")+be;if(!ee(be,z)){if(!ge(be))return"F";if(!Pe)return"E";ie(be)}return be[z].i},Y=function(be,Pe){if(!ee(be,z)){if(!ge(be))return!0;if(!Pe)return!1;ie(be)}return be[z].w},re=function(be){return fe&&de.NEED&&ge(be)&&!ee(be,z)&&ie(be),be},de=q.exports={KEY:z,NEED:!1,fastKey:he,getWeak:Y,onFreeze:re}},"./node_modules/core-js/modules/_object-create.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_an-object.js"),D=P("./node_modules/core-js/modules/_object-dps.js"),ee=P("./node_modules/core-js/modules/_enum-bug-keys.js"),X=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ye=function(){},ge="prototype",fe=function(){var ie=P("./node_modules/core-js/modules/_dom-create.js")("iframe"),he=ee.length,Y="<",re=">",de;for(ie.style.display="none",P("./node_modules/core-js/modules/_html.js").appendChild(ie),ie.src="javascript:",de=ie.contentWindow.document,de.open(),de.write(Y+"script"+re+"document.F=Object"+Y+"/script"+re),de.close(),fe=de.F;he--;)delete fe[ge][ee[he]];return fe()};q.exports=Object.create||function(he,Y){var re;return he!==null?(ye[ge]=z(he),re=new ye,ye[ge]=null,re[X]=he):re=fe(),Y===void 0?re:D(re,Y)}},"./node_modules/core-js/modules/_object-dp.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_an-object.js"),D=P("./node_modules/core-js/modules/_ie8-dom-define.js"),ee=P("./node_modules/core-js/modules/_to-primitive.js"),X=Object.defineProperty;W.f=P("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ge,fe,ie){if(z(ge),fe=ee(fe,!0),z(ie),D)try{return X(ge,fe,ie)}catch{}if("get"in ie||"set"in ie)throw TypeError("Accessors not supported!");return"value"in ie&&(ge[fe]=ie.value),ge}},"./node_modules/core-js/modules/_object-dps.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-dp.js"),D=P("./node_modules/core-js/modules/_an-object.js"),ee=P("./node_modules/core-js/modules/_object-keys.js");q.exports=P("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ye,ge){D(ye);for(var fe=ee(ge),ie=fe.length,he=0,Y;ie>he;)z.f(ye,Y=fe[he++],ge[Y]);return ye}},"./node_modules/core-js/modules/_object-gopd.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-pie.js"),D=P("./node_modules/core-js/modules/_property-desc.js"),ee=P("./node_modules/core-js/modules/_to-iobject.js"),X=P("./node_modules/core-js/modules/_to-primitive.js"),ye=P("./node_modules/core-js/modules/_has.js"),ge=P("./node_modules/core-js/modules/_ie8-dom-define.js"),fe=Object.getOwnPropertyDescriptor;W.f=P("./node_modules/core-js/modules/_descriptors.js")?fe:function(he,Y){if(he=ee(he),Y=X(Y,!0),ge)try{return fe(he,Y)}catch{}if(ye(he,Y))return D(!z.f.call(he,Y),he[Y])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_to-iobject.js"),D=P("./node_modules/core-js/modules/_object-gopn.js").f,ee={}.toString,X=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ye=function(ge){try{return D(ge)}catch{return X.slice()}};q.exports.f=function(fe){return X&&ee.call(fe)=="[object Window]"?ye(fe):D(z(fe))}},"./node_modules/core-js/modules/_object-gopn.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-keys-internal.js"),D=P("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");W.f=Object.getOwnPropertyNames||function(X){return z(X,D)}},"./node_modules/core-js/modules/_object-gops.js":function(q,W){W.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_has.js"),D=P("./node_modules/core-js/modules/_to-object.js"),ee=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),X=Object.prototype;q.exports=Object.getPrototypeOf||function(ye){return ye=D(ye),z(ye,ee)?ye[ee]:typeof ye.constructor=="function"&&ye instanceof ye.constructor?ye.constructor.prototype:ye instanceof Object?X:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_has.js"),D=P("./node_modules/core-js/modules/_to-iobject.js"),ee=P("./node_modules/core-js/modules/_array-includes.js")(!1),X=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");q.exports=function(ye,ge){var fe=D(ye),ie=0,he=[],Y;for(Y in fe)Y!=X&&z(fe,Y)&&he.push(Y);for(;ge.length>ie;)z(fe,Y=ge[ie++])&&(~ee(he,Y)||he.push(Y));return he}},"./node_modules/core-js/modules/_object-keys.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-keys-internal.js"),D=P("./node_modules/core-js/modules/_enum-bug-keys.js");q.exports=Object.keys||function(X){return z(X,D)}},"./node_modules/core-js/modules/_object-pie.js":function(q,W){W.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-gopn.js"),D=P("./node_modules/core-js/modules/_object-gops.js"),ee=P("./node_modules/core-js/modules/_an-object.js"),X=P("./node_modules/core-js/modules/_global.js").Reflect;q.exports=X&&X.ownKeys||function(ge){var fe=z.f(ee(ge)),ie=D.f;return ie?fe.concat(ie(ge)):fe}},"./node_modules/core-js/modules/_property-desc.js":function(q,W){q.exports=function(P,z){return{enumerable:!(P&1),configurable:!(P&2),writable:!(P&4),value:z}}},"./node_modules/core-js/modules/_redefine.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_global.js"),D=P("./node_modules/core-js/modules/_hide.js"),ee=P("./node_modules/core-js/modules/_has.js"),X=P("./node_modules/core-js/modules/_uid.js")("src"),ye=P("./node_modules/core-js/modules/_function-to-string.js"),ge="toString",fe=(""+ye).split(ge);P("./node_modules/core-js/modules/_core.js").inspectSource=function(ie){return ye.call(ie)},(q.exports=function(ie,he,Y,re){var de=typeof Y=="function";de&&(ee(Y,"name")||D(Y,"name",he)),ie[he]!==Y&&(de&&(ee(Y,X)||D(Y,X,ie[he]?""+ie[he]:fe.join(String(he)))),ie===z?ie[he]=Y:re?ie[he]?ie[he]=Y:D(ie,he,Y):(delete ie[he],D(ie,he,Y)))})(Function.prototype,ge,function(){return typeof this=="function"&&this[X]||ye.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_classof.js"),D=RegExp.prototype.exec;q.exports=function(ee,X){var ye=ee.exec;if(typeof ye=="function"){var ge=ye.call(ee,X);if(typeof ge!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ge}if(z(ee)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return D.call(ee,X)}},"./node_modules/core-js/modules/_regexp-exec.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_flags.js"),D=RegExp.prototype.exec,ee=String.prototype.replace,X=D,ye="lastIndex",ge=function(){var he=/a/,Y=/b*/g;return D.call(he,"a"),D.call(Y,"a"),he[ye]!==0||Y[ye]!==0}(),fe=/()??/.exec("")[1]!==void 0,ie=ge||fe;ie&&(X=function(Y){var re=this,de,be,Pe,$e;return fe&&(be=new RegExp("^"+re.source+"$(?!\\s)",z.call(re))),ge&&(de=re[ye]),Pe=D.call(re,Y),ge&&Pe&&(re[ye]=re.global?Pe.index+Pe[0].length:de),fe&&Pe&&Pe.length>1&&ee.call(Pe[0],be,function(){for($e=1;$e<arguments.length-2;$e++)arguments[$e]===void 0&&(Pe[$e]=void 0)}),Pe}),q.exports=X},"./node_modules/core-js/modules/_set-to-string-tag.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-dp.js").f,D=P("./node_modules/core-js/modules/_has.js"),ee=P("./node_modules/core-js/modules/_wks.js")("toStringTag");q.exports=function(X,ye,ge){X&&!D(X=ge?X:X.prototype,ee)&&z(X,ee,{configurable:!0,value:ye})}},"./node_modules/core-js/modules/_shared-key.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_shared.js")("keys"),D=P("./node_modules/core-js/modules/_uid.js");q.exports=function(ee){return z[ee]||(z[ee]=D(ee))}},"./node_modules/core-js/modules/_shared.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_core.js"),D=P("./node_modules/core-js/modules/_global.js"),ee="__core-js_shared__",X=D[ee]||(D[ee]={});(q.exports=function(ye,ge){return X[ye]||(X[ye]=ge!==void 0?ge:{})})("versions",[]).push({version:z.version,mode:P("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_an-object.js"),D=P("./node_modules/core-js/modules/_a-function.js"),ee=P("./node_modules/core-js/modules/_wks.js")("species");q.exports=function(X,ye){var ge=z(X).constructor,fe;return ge===void 0||(fe=z(ge)[ee])==null?ye:D(fe)}},"./node_modules/core-js/modules/_string-at.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),D=P("./node_modules/core-js/modules/_defined.js");q.exports=function(ee){return function(X,ye){var ge=String(D(X)),fe=z(ye),ie=ge.length,he,Y;return fe<0||fe>=ie?ee?"":void 0:(he=ge.charCodeAt(fe),he<55296||he>56319||fe+1===ie||(Y=ge.charCodeAt(fe+1))<56320||Y>57343?ee?ge.charAt(fe):he:ee?ge.slice(fe,fe+2):(he-55296<<10)+(Y-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_is-regexp.js"),D=P("./node_modules/core-js/modules/_defined.js");q.exports=function(ee,X,ye){if(z(X))throw TypeError("String#"+ye+" doesn't accept regex!");return String(D(ee))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),D=Math.max,ee=Math.min;q.exports=function(X,ye){return X=z(X),X<0?D(X+ye,0):ee(X,ye)}},"./node_modules/core-js/modules/_to-integer.js":function(q,W){var P=Math.ceil,z=Math.floor;q.exports=function(D){return isNaN(D=+D)?0:(D>0?z:P)(D)}},"./node_modules/core-js/modules/_to-iobject.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_iobject.js"),D=P("./node_modules/core-js/modules/_defined.js");q.exports=function(ee){return z(D(ee))}},"./node_modules/core-js/modules/_to-length.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_to-integer.js"),D=Math.min;q.exports=function(ee){return ee>0?D(z(ee),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_defined.js");q.exports=function(D){return Object(z(D))}},"./node_modules/core-js/modules/_to-primitive.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_is-object.js");q.exports=function(D,ee){if(!z(D))return D;var X,ye;if(ee&&typeof(X=D.toString)=="function"&&!z(ye=X.call(D))||typeof(X=D.valueOf)=="function"&&!z(ye=X.call(D))||!ee&&typeof(X=D.toString)=="function"&&!z(ye=X.call(D)))return ye;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(q,W){var P=0,z=Math.random();q.exports=function(D){return"Symbol(".concat(D===void 0?"":D,")_",(++P+z).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_global.js"),D=P("./node_modules/core-js/modules/_core.js"),ee=P("./node_modules/core-js/modules/_library.js"),X=P("./node_modules/core-js/modules/_wks-ext.js"),ye=P("./node_modules/core-js/modules/_object-dp.js").f;q.exports=function(ge){var fe=D.Symbol||(D.Symbol=ee?{}:z.Symbol||{});ge.charAt(0)!="_"&&!(ge in fe)&&ye(fe,ge,{value:X.f(ge)})}},"./node_modules/core-js/modules/_wks-ext.js":function(q,W,P){W.f=P("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_shared.js")("wks"),D=P("./node_modules/core-js/modules/_uid.js"),ee=P("./node_modules/core-js/modules/_global.js").Symbol,X=typeof ee=="function",ye=q.exports=function(ge){return z[ge]||(z[ge]=X&&ee[ge]||(X?ee:D)("Symbol."+ge))};ye.store=z},"./node_modules/core-js/modules/core.get-iterator-method.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_classof.js"),D=P("./node_modules/core-js/modules/_wks.js")("iterator"),ee=P("./node_modules/core-js/modules/_iterators.js");q.exports=P("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(X){if(X!=null)return X[D]||X["@@iterator"]||ee[z(X)]}},"./node_modules/core-js/modules/es6.array.from.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_ctx.js"),D=P("./node_modules/core-js/modules/_export.js"),ee=P("./node_modules/core-js/modules/_to-object.js"),X=P("./node_modules/core-js/modules/_iter-call.js"),ye=P("./node_modules/core-js/modules/_is-array-iter.js"),ge=P("./node_modules/core-js/modules/_to-length.js"),fe=P("./node_modules/core-js/modules/_create-property.js"),ie=P("./node_modules/core-js/modules/core.get-iterator-method.js");D(D.S+D.F*!P("./node_modules/core-js/modules/_iter-detect.js")(function(he){Array.from(he)}),"Array",{from:function(Y){var re=ee(Y),de=typeof this=="function"?this:Array,be=arguments.length,Pe=be>1?arguments[1]:void 0,$e=Pe!==void 0,Ce=0,Fe=ie(re),He,We,it,ct;if($e&&(Pe=z(Pe,be>2?arguments[2]:void 0,2)),Fe!=null&&!(de==Array&&ye(Fe)))for(ct=Fe.call(re),We=new de;!(it=ct.next()).done;Ce++)fe(We,Ce,$e?X(ct,Pe,[it.value,Ce],!0):it.value);else for(He=ge(re.length),We=new de(He);He>Ce;Ce++)fe(We,Ce,$e?Pe(re[Ce],Ce):re[Ce]);return We.length=Ce,We}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_add-to-unscopables.js"),D=P("./node_modules/core-js/modules/_iter-step.js"),ee=P("./node_modules/core-js/modules/_iterators.js"),X=P("./node_modules/core-js/modules/_to-iobject.js");q.exports=P("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ye,ge){this._t=X(ye),this._i=0,this._k=ge},function(){var ye=this._t,ge=this._k,fe=this._i++;return!ye||fe>=ye.length?(this._t=void 0,D(1)):ge=="keys"?D(0,fe):ge=="values"?D(0,ye[fe]):D(0,[fe,ye[fe]])},"values"),ee.Arguments=ee.Array,z("keys"),z("values"),z("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_export.js");z(z.P,"Function",{bind:P("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_object-dp.js").f,D=Function.prototype,ee=/^\s*function ([^ (]*)/,X="name";X in D||P("./node_modules/core-js/modules/_descriptors.js")&&z(D,X,{configurable:!0,get:function(){try{return(""+this).match(ee)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_export.js"),D=P("./node_modules/core-js/modules/_global.js").isFinite;z(z.S,"Number",{isFinite:function(X){return typeof X=="number"&&D(X)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_classof.js"),D={};D[P("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",D+""!="[object z]"&&P("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+z(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_regexp-exec.js");P("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:z!==/./.exec},{exec:z})},"./node_modules/core-js/modules/es6.regexp.split.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_is-regexp.js"),D=P("./node_modules/core-js/modules/_an-object.js"),ee=P("./node_modules/core-js/modules/_species-constructor.js"),X=P("./node_modules/core-js/modules/_advance-string-index.js"),ye=P("./node_modules/core-js/modules/_to-length.js"),ge=P("./node_modules/core-js/modules/_regexp-exec-abstract.js"),fe=P("./node_modules/core-js/modules/_regexp-exec.js"),ie=P("./node_modules/core-js/modules/_fails.js"),he=Math.min,Y=[].push,re="split",de="length",be="lastIndex",Pe=4294967295,$e=!ie(function(){});P("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ce,Fe,He,We){var it;return"abbc"[re](/(b)*/)[1]=="c"||"test"[re](/(?:)/,-1)[de]!=4||"ab"[re](/(?:ab)*/)[de]!=2||"."[re](/(.?)(.?)/)[de]!=4||"."[re](/()()/)[de]>1||""[re](/.?/)[de]?it=function(ct,vt){var Mt=String(this);if(ct===void 0&&vt===0)return[];if(!z(ct))return He.call(Mt,ct,vt);for(var pt=[],xt=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Wt=0,Ht=vt===void 0?Pe:vt>>>0,ar=new RegExp(ct.source,xt+"g"),et,vr,lr;(et=fe.call(ar,Mt))&&(vr=ar[be],!(vr>Wt&&(pt.push(Mt.slice(Wt,et.index)),et[de]>1&&et.index<Mt[de]&&Y.apply(pt,et.slice(1)),lr=et[0][de],Wt=vr,pt[de]>=Ht)));)ar[be]===et.index&&ar[be]++;return Wt===Mt[de]?(lr||!ar.test(""))&&pt.push(""):pt.push(Mt.slice(Wt)),pt[de]>Ht?pt.slice(0,Ht):pt}:"0"[re](void 0,0)[de]?it=function(ct,vt){return ct===void 0&&vt===0?[]:He.call(this,ct,vt)}:it=He,[function(vt,Mt){var pt=Ce(this),xt=vt==null?void 0:vt[Fe];return xt!==void 0?xt.call(vt,pt,Mt):it.call(String(pt),vt,Mt)},function(ct,vt){var Mt=We(it,ct,this,vt,it!==He);if(Mt.done)return Mt.value;var pt=D(ct),xt=String(this),Wt=ee(pt,RegExp),Ht=pt.unicode,ar=(pt.ignoreCase?"i":"")+(pt.multiline?"m":"")+(pt.unicode?"u":"")+($e?"y":"g"),et=new Wt($e?pt:"^(?:"+pt.source+")",ar),vr=vt===void 0?Pe:vt>>>0;if(vr===0)return[];if(xt.length===0)return ge(et,xt)===null?[xt]:[];for(var lr=0,Vt=0,Se=[];Vt<xt.length;){et.lastIndex=$e?Vt:0;var N=ge(et,$e?xt:xt.slice(Vt)),B;if(N===null||(B=he(ye(et.lastIndex+($e?0:Vt)),xt.length))===lr)Vt=X(xt,Vt,Ht);else{if(Se.push(xt.slice(lr,Vt)),Se.length===vr)return Se;for(var _e=1;_e<=N.length-1;_e++)if(Se.push(N[_e]),Se.length===vr)return Se;Vt=lr=B}}return Se.push(xt.slice(lr)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_export.js"),D=P("./node_modules/core-js/modules/_string-context.js"),ee="includes";z(z.P+z.F*P("./node_modules/core-js/modules/_fails-is-regexp.js")(ee),"String",{includes:function(ye){return!!~D(this,ye,ee).indexOf(ye,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_global.js"),D=P("./node_modules/core-js/modules/_has.js"),ee=P("./node_modules/core-js/modules/_descriptors.js"),X=P("./node_modules/core-js/modules/_export.js"),ye=P("./node_modules/core-js/modules/_redefine.js"),ge=P("./node_modules/core-js/modules/_meta.js").KEY,fe=P("./node_modules/core-js/modules/_fails.js"),ie=P("./node_modules/core-js/modules/_shared.js"),he=P("./node_modules/core-js/modules/_set-to-string-tag.js"),Y=P("./node_modules/core-js/modules/_uid.js"),re=P("./node_modules/core-js/modules/_wks.js"),de=P("./node_modules/core-js/modules/_wks-ext.js"),be=P("./node_modules/core-js/modules/_wks-define.js"),Pe=P("./node_modules/core-js/modules/_enum-keys.js"),$e=P("./node_modules/core-js/modules/_is-array.js"),Ce=P("./node_modules/core-js/modules/_an-object.js"),Fe=P("./node_modules/core-js/modules/_is-object.js"),He=P("./node_modules/core-js/modules/_to-object.js"),We=P("./node_modules/core-js/modules/_to-iobject.js"),it=P("./node_modules/core-js/modules/_to-primitive.js"),ct=P("./node_modules/core-js/modules/_property-desc.js"),vt=P("./node_modules/core-js/modules/_object-create.js"),Mt=P("./node_modules/core-js/modules/_object-gopn-ext.js"),pt=P("./node_modules/core-js/modules/_object-gopd.js"),xt=P("./node_modules/core-js/modules/_object-gops.js"),Wt=P("./node_modules/core-js/modules/_object-dp.js"),Ht=P("./node_modules/core-js/modules/_object-keys.js"),ar=pt.f,et=Wt.f,vr=Mt.f,lr=z.Symbol,Vt=z.JSON,Se=Vt&&Vt.stringify,N="prototype",B=re("_hidden"),_e=re("toPrimitive"),Xe={}.propertyIsEnumerable,tt=ie("symbol-registry"),ht=ie("symbols"),ue=ie("op-symbols"),k=Object[N],U=typeof lr=="function"&&!!xt.f,Ee=z.QObject,Ve=!Ee||!Ee[N]||!Ee[N].findChild,nt=ee&&fe(function(){return vt(et({},"a",{get:function(){return et(this,"a",{value:7}).a}})).a!=7})?function(Ie,ke,Be){var Ke=ar(k,ke);Ke&&delete k[ke],et(Ie,ke,Be),Ke&&Ie!==k&&et(k,ke,Ke)}:et,Ge=function(Ie){var ke=ht[Ie]=vt(lr[N]);return ke._k=Ie,ke},Et=U&&typeof lr.iterator=="symbol"?function(Ie){return typeof Ie=="symbol"}:function(Ie){return Ie instanceof lr},It=function(ke,Be,Ke){return ke===k&&It(ue,Be,Ke),Ce(ke),Be=it(Be,!0),Ce(Ke),D(ht,Be)?(Ke.enumerable?(D(ke,B)&&ke[B][Be]&&(ke[B][Be]=!1),Ke=vt(Ke,{enumerable:ct(0,!1)})):(D(ke,B)||et(ke,B,ct(1,{})),ke[B][Be]=!0),nt(ke,Be,Ke)):et(ke,Be,Ke)},gr=function(ke,Be){Ce(ke);for(var Ke=Pe(Be=We(Be)),Le=0,st=Ke.length,ft;st>Le;)It(ke,ft=Ke[Le++],Be[ft]);return ke},br=function(ke,Be){return Be===void 0?vt(ke):gr(vt(ke),Be)},Rt=function(ke){var Be=Xe.call(this,ke=it(ke,!0));return this===k&&D(ht,ke)&&!D(ue,ke)?!1:Be||!D(this,ke)||!D(ht,ke)||D(this,B)&&this[B][ke]?Be:!0},Rn=function(ke,Be){if(ke=We(ke),Be=it(Be,!0),!(ke===k&&D(ht,Be)&&!D(ue,Be))){var Ke=ar(ke,Be);return Ke&&D(ht,Be)&&!(D(ke,B)&&ke[B][Be])&&(Ke.enumerable=!0),Ke}},ri=function(ke){for(var Be=vr(We(ke)),Ke=[],Le=0,st;Be.length>Le;)!D(ht,st=Be[Le++])&&st!=B&&st!=ge&&Ke.push(st);return Ke},Oi=function(ke){for(var Be=ke===k,Ke=vr(Be?ue:We(ke)),Le=[],st=0,ft;Ke.length>st;)D(ht,ft=Ke[st++])&&(!Be||D(k,ft))&&Le.push(ht[ft]);return Le};U||(lr=function(){if(this instanceof lr)throw TypeError("Symbol is not a constructor!");var ke=Y(arguments.length>0?arguments[0]:void 0),Be=function(Ke){this===k&&Be.call(ue,Ke),D(this,B)&&D(this[B],ke)&&(this[B][ke]=!1),nt(this,ke,ct(1,Ke))};return ee&&Ve&&nt(k,ke,{configurable:!0,set:Be}),Ge(ke)},ye(lr[N],"toString",function(){return this._k}),pt.f=Rn,Wt.f=It,P("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=ri,P("./node_modules/core-js/modules/_object-pie.js").f=Rt,xt.f=Oi,ee&&!P("./node_modules/core-js/modules/_library.js")&&ye(k,"propertyIsEnumerable",Rt,!0),de.f=function(Ie){return Ge(re(Ie))}),X(X.G+X.W+X.F*!U,{Symbol:lr});for(var Vn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Oe=0;Vn.length>Oe;)re(Vn[Oe++]);for(var ae=Ht(re.store),oe=0;ae.length>oe;)be(ae[oe++]);X(X.S+X.F*!U,"Symbol",{for:function(Ie){return D(tt,Ie+="")?tt[Ie]:tt[Ie]=lr(Ie)},keyFor:function(ke){if(!Et(ke))throw TypeError(ke+" is not a symbol!");for(var Be in tt)if(tt[Be]===ke)return Be},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),X(X.S+X.F*!U,"Object",{create:br,defineProperty:It,defineProperties:gr,getOwnPropertyDescriptor:Rn,getOwnPropertyNames:ri,getOwnPropertySymbols:Oi});var xe=fe(function(){xt.f(1)});X(X.S+X.F*xe,"Object",{getOwnPropertySymbols:function(ke){return xt.f(He(ke))}}),Vt&&X(X.S+X.F*(!U||fe(function(){var Ie=lr();return Se([Ie])!="[null]"||Se({a:Ie})!="{}"||Se(Object(Ie))!="{}"})),"JSON",{stringify:function(ke){for(var Be=[ke],Ke=1,Le,st;arguments.length>Ke;)Be.push(arguments[Ke++]);if(st=Le=Be[1],!(!Fe(Le)&&ke===void 0||Et(ke)))return $e(Le)||(Le=function(ft,ot){if(typeof st=="function"&&(ot=st.call(this,ft,ot)),!Et(ot))return ot}),Be[1]=Le,Se.apply(Vt,Be)}}),lr[N][_e]||P("./node_modules/core-js/modules/_hide.js")(lr[N],_e,lr[N].valueOf),he(lr,"Symbol"),he(Math,"Math",!0),he(z.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_export.js"),D=P("./node_modules/core-js/modules/_array-includes.js")(!0);z(z.P,"Array",{includes:function(X){return D(this,X,arguments.length>1?arguments[1]:void 0)}}),P("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(q,W,P){var z=P("./node_modules/core-js/modules/_export.js"),D=P("./node_modules/core-js/modules/_own-keys.js"),ee=P("./node_modules/core-js/modules/_to-iobject.js"),X=P("./node_modules/core-js/modules/_object-gopd.js"),ye=P("./node_modules/core-js/modules/_create-property.js");z(z.S,"Object",{getOwnPropertyDescriptors:function(fe){for(var ie=ee(fe),he=X.f,Y=D(ie),re={},de=0,be,Pe;Y.length>de;)Pe=he(ie,be=Y[de++]),Pe!==void 0&&ye(re,be,Pe);return re}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(q,W,P){P("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(q,W,P){for(var z=P("./node_modules/core-js/modules/es6.array.iterator.js"),D=P("./node_modules/core-js/modules/_object-keys.js"),ee=P("./node_modules/core-js/modules/_redefine.js"),X=P("./node_modules/core-js/modules/_global.js"),ye=P("./node_modules/core-js/modules/_hide.js"),ge=P("./node_modules/core-js/modules/_iterators.js"),fe=P("./node_modules/core-js/modules/_wks.js"),ie=fe("iterator"),he=fe("toStringTag"),Y=ge.Array,re={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},de=D(re),be=0;be<de.length;be++){var Pe=de[be],$e=re[Pe],Ce=X[Pe],Fe=Ce&&Ce.prototype,He;if(Fe&&(Fe[ie]||ye(Fe,ie,Y),Fe[he]||ye(Fe,he,Pe),ge[Pe]=Y,$e))for(He in z)Fe[He]||ee(Fe,He,z[He],!0)}},"./node_modules/crypt/crypt.js":function(q,W){(function(){var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z={rotl:function(D,ee){return D<<ee|D>>>32-ee},rotr:function(D,ee){return D<<32-ee|D>>>ee},endian:function(D){if(D.constructor==Number)return z.rotl(D,8)&16711935|z.rotl(D,24)&4278255360;for(var ee=0;ee<D.length;ee++)D[ee]=z.endian(D[ee]);return D},randomBytes:function(D){for(var ee=[];D>0;D--)ee.push(Math.floor(Math.random()*256));return ee},bytesToWords:function(D){for(var ee=[],X=0,ye=0;X<D.length;X++,ye+=8)ee[ye>>>5]|=D[X]<<24-ye%32;return ee},wordsToBytes:function(D){for(var ee=[],X=0;X<D.length*32;X+=8)ee.push(D[X>>>5]>>>24-X%32&255);return ee},bytesToHex:function(D){for(var ee=[],X=0;X<D.length;X++)ee.push((D[X]>>>4).toString(16)),ee.push((D[X]&15).toString(16));return ee.join("")},hexToBytes:function(D){for(var ee=[],X=0;X<D.length;X+=2)ee.push(parseInt(D.substr(X,2),16));return ee},bytesToBase64:function(D){for(var ee=[],X=0;X<D.length;X+=3)for(var ye=D[X]<<16|D[X+1]<<8|D[X+2],ge=0;ge<4;ge++)X*8+ge*6<=D.length*8?ee.push(P.charAt(ye>>>6*(3-ge)&63)):ee.push("=");return ee.join("")},base64ToBytes:function(D){D=D.replace(/[^A-Z0-9+\/]/ig,"");for(var ee=[],X=0,ye=0;X<D.length;ye=++X%4)ye!=0&&ee.push((P.indexOf(D.charAt(X-1))&Math.pow(2,-2*ye+8)-1)<<ye*2|P.indexOf(D.charAt(X))>>>6-ye*2);return ee}};q.exports=z})()},"./node_modules/is-buffer/index.js":function(q,W){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */q.exports=function(D){return D!=null&&(P(D)||z(D)||!!D._isBuffer)};function P(D){return!!D.constructor&&typeof D.constructor.isBuffer=="function"&&D.constructor.isBuffer(D)}function z(D){return typeof D.readFloatLE=="function"&&typeof D.slice=="function"&&P(D.slice(0,0))}},"./node_modules/md5/md5.js":function(q,W,P){(function(){var z=P("./node_modules/crypt/crypt.js"),D=P("./node_modules/charenc/charenc.js").utf8,ee=P("./node_modules/is-buffer/index.js"),X=P("./node_modules/charenc/charenc.js").bin,ye=function(ge,fe){ge.constructor==String?fe&&fe.encoding==="binary"?ge=X.stringToBytes(ge):ge=D.stringToBytes(ge):ee(ge)?ge=Array.prototype.slice.call(ge,0):!Array.isArray(ge)&&ge.constructor!==Uint8Array&&(ge=ge.toString());for(var ie=z.bytesToWords(ge),he=ge.length*8,Y=1732584193,re=-271733879,de=-1732584194,be=271733878,Pe=0;Pe<ie.length;Pe++)ie[Pe]=(ie[Pe]<<8|ie[Pe]>>>24)&16711935|(ie[Pe]<<24|ie[Pe]>>>8)&4278255360;ie[he>>>5]|=128<<he%32,ie[(he+64>>>9<<4)+14]=he;for(var $e=ye._ff,Ce=ye._gg,Fe=ye._hh,He=ye._ii,Pe=0;Pe<ie.length;Pe+=16){var We=Y,it=re,ct=de,vt=be;Y=$e(Y,re,de,be,ie[Pe+0],7,-680876936),be=$e(be,Y,re,de,ie[Pe+1],12,-389564586),de=$e(de,be,Y,re,ie[Pe+2],17,606105819),re=$e(re,de,be,Y,ie[Pe+3],22,-1044525330),Y=$e(Y,re,de,be,ie[Pe+4],7,-176418897),be=$e(be,Y,re,de,ie[Pe+5],12,1200080426),de=$e(de,be,Y,re,ie[Pe+6],17,-1473231341),re=$e(re,de,be,Y,ie[Pe+7],22,-45705983),Y=$e(Y,re,de,be,ie[Pe+8],7,1770035416),be=$e(be,Y,re,de,ie[Pe+9],12,-1958414417),de=$e(de,be,Y,re,ie[Pe+10],17,-42063),re=$e(re,de,be,Y,ie[Pe+11],22,-1990404162),Y=$e(Y,re,de,be,ie[Pe+12],7,1804603682),be=$e(be,Y,re,de,ie[Pe+13],12,-40341101),de=$e(de,be,Y,re,ie[Pe+14],17,-1502002290),re=$e(re,de,be,Y,ie[Pe+15],22,1236535329),Y=Ce(Y,re,de,be,ie[Pe+1],5,-165796510),be=Ce(be,Y,re,de,ie[Pe+6],9,-1069501632),de=Ce(de,be,Y,re,ie[Pe+11],14,643717713),re=Ce(re,de,be,Y,ie[Pe+0],20,-373897302),Y=Ce(Y,re,de,be,ie[Pe+5],5,-701558691),be=Ce(be,Y,re,de,ie[Pe+10],9,38016083),de=Ce(de,be,Y,re,ie[Pe+15],14,-660478335),re=Ce(re,de,be,Y,ie[Pe+4],20,-405537848),Y=Ce(Y,re,de,be,ie[Pe+9],5,568446438),be=Ce(be,Y,re,de,ie[Pe+14],9,-1019803690),de=Ce(de,be,Y,re,ie[Pe+3],14,-187363961),re=Ce(re,de,be,Y,ie[Pe+8],20,1163531501),Y=Ce(Y,re,de,be,ie[Pe+13],5,-1444681467),be=Ce(be,Y,re,de,ie[Pe+2],9,-51403784),de=Ce(de,be,Y,re,ie[Pe+7],14,1735328473),re=Ce(re,de,be,Y,ie[Pe+12],20,-1926607734),Y=Fe(Y,re,de,be,ie[Pe+5],4,-378558),be=Fe(be,Y,re,de,ie[Pe+8],11,-2022574463),de=Fe(de,be,Y,re,ie[Pe+11],16,1839030562),re=Fe(re,de,be,Y,ie[Pe+14],23,-35309556),Y=Fe(Y,re,de,be,ie[Pe+1],4,-1530992060),be=Fe(be,Y,re,de,ie[Pe+4],11,1272893353),de=Fe(de,be,Y,re,ie[Pe+7],16,-155497632),re=Fe(re,de,be,Y,ie[Pe+10],23,-1094730640),Y=Fe(Y,re,de,be,ie[Pe+13],4,681279174),be=Fe(be,Y,re,de,ie[Pe+0],11,-358537222),de=Fe(de,be,Y,re,ie[Pe+3],16,-722521979),re=Fe(re,de,be,Y,ie[Pe+6],23,76029189),Y=Fe(Y,re,de,be,ie[Pe+9],4,-640364487),be=Fe(be,Y,re,de,ie[Pe+12],11,-421815835),de=Fe(de,be,Y,re,ie[Pe+15],16,530742520),re=Fe(re,de,be,Y,ie[Pe+2],23,-995338651),Y=He(Y,re,de,be,ie[Pe+0],6,-198630844),be=He(be,Y,re,de,ie[Pe+7],10,1126891415),de=He(de,be,Y,re,ie[Pe+14],15,-1416354905),re=He(re,de,be,Y,ie[Pe+5],21,-57434055),Y=He(Y,re,de,be,ie[Pe+12],6,1700485571),be=He(be,Y,re,de,ie[Pe+3],10,-1894986606),de=He(de,be,Y,re,ie[Pe+10],15,-1051523),re=He(re,de,be,Y,ie[Pe+1],21,-2054922799),Y=He(Y,re,de,be,ie[Pe+8],6,1873313359),be=He(be,Y,re,de,ie[Pe+15],10,-30611744),de=He(de,be,Y,re,ie[Pe+6],15,-1560198380),re=He(re,de,be,Y,ie[Pe+13],21,1309151649),Y=He(Y,re,de,be,ie[Pe+4],6,-145523070),be=He(be,Y,re,de,ie[Pe+11],10,-1120210379),de=He(de,be,Y,re,ie[Pe+2],15,718787259),re=He(re,de,be,Y,ie[Pe+9],21,-343485551),Y=Y+We>>>0,re=re+it>>>0,de=de+ct>>>0,be=be+vt>>>0}return z.endian([Y,re,de,be])};ye._ff=function(ge,fe,ie,he,Y,re,de){var be=ge+(fe&ie|~fe&he)+(Y>>>0)+de;return(be<<re|be>>>32-re)+fe},ye._gg=function(ge,fe,ie,he,Y,re,de){var be=ge+(fe&he|ie&~he)+(Y>>>0)+de;return(be<<re|be>>>32-re)+fe},ye._hh=function(ge,fe,ie,he,Y,re,de){var be=ge+(fe^ie^he)+(Y>>>0)+de;return(be<<re|be>>>32-re)+fe},ye._ii=function(ge,fe,ie,he,Y,re,de){var be=ge+(ie^(fe|~he))+(Y>>>0)+de;return(be<<re|be>>>32-re)+fe},ye._blocksize=16,ye._digestsize=16,q.exports=function(ge,fe){if(ge==null)throw new Error("Illegal argument "+ge);var ie=z.wordsToBytes(ye(ge,fe));return fe&&fe.asBytes?ie:fe&&fe.asString?X.bytesToString(ie):z.bytesToHex(ie)}})()},"./node_modules/regenerator-runtime/runtime.js":function(q,W,P){var z=function(D){var ee=Object.prototype,X=ee.hasOwnProperty,ye,ge=typeof Symbol=="function"?Symbol:{},fe=ge.iterator||"@@iterator",ie=ge.asyncIterator||"@@asyncIterator",he=ge.toStringTag||"@@toStringTag";function Y(N,B,_e){return Object.defineProperty(N,B,{value:_e,enumerable:!0,configurable:!0,writable:!0}),N[B]}try{Y({},"")}catch{Y=function(B,_e,Xe){return B[_e]=Xe}}function re(N,B,_e,Xe){var tt=B&&B.prototype instanceof He?B:He,ht=Object.create(tt.prototype),ue=new lr(Xe||[]);return ht._invoke=Ht(N,_e,ue),ht}D.wrap=re;function de(N,B,_e){try{return{type:"normal",arg:N.call(B,_e)}}catch(Xe){return{type:"throw",arg:Xe}}}var be="suspendedStart",Pe="suspendedYield",$e="executing",Ce="completed",Fe={};function He(){}function We(){}function it(){}var ct={};ct[fe]=function(){return this};var vt=Object.getPrototypeOf,Mt=vt&&vt(vt(Vt([])));Mt&&Mt!==ee&&X.call(Mt,fe)&&(ct=Mt);var pt=it.prototype=He.prototype=Object.create(ct);We.prototype=pt.constructor=it,it.constructor=We,We.displayName=Y(it,he,"GeneratorFunction");function xt(N){["next","throw","return"].forEach(function(B){Y(N,B,function(_e){return this._invoke(B,_e)})})}D.isGeneratorFunction=function(N){var B=typeof N=="function"&&N.constructor;return B?B===We||(B.displayName||B.name)==="GeneratorFunction":!1},D.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,it):(N.__proto__=it,Y(N,he,"GeneratorFunction")),N.prototype=Object.create(pt),N},D.awrap=function(N){return{__await:N}};function Wt(N,B){function _e(ht,ue,k,U){var Ee=de(N[ht],N,ue);if(Ee.type==="throw")U(Ee.arg);else{var Ve=Ee.arg,nt=Ve.value;return nt&&typeof nt=="object"&&X.call(nt,"__await")?B.resolve(nt.__await).then(function(Ge){_e("next",Ge,k,U)},function(Ge){_e("throw",Ge,k,U)}):B.resolve(nt).then(function(Ge){Ve.value=Ge,k(Ve)},function(Ge){return _e("throw",Ge,k,U)})}}var Xe;function tt(ht,ue){function k(){return new B(function(U,Ee){_e(ht,ue,U,Ee)})}return Xe=Xe?Xe.then(k,k):k()}this._invoke=tt}xt(Wt.prototype),Wt.prototype[ie]=function(){return this},D.AsyncIterator=Wt,D.async=function(N,B,_e,Xe,tt){tt===void 0&&(tt=Promise);var ht=new Wt(re(N,B,_e,Xe),tt);return D.isGeneratorFunction(B)?ht:ht.next().then(function(ue){return ue.done?ue.value:ht.next()})};function Ht(N,B,_e){var Xe=be;return function(ht,ue){if(Xe===$e)throw new Error("Generator is already running");if(Xe===Ce){if(ht==="throw")throw ue;return Se()}for(_e.method=ht,_e.arg=ue;;){var k=_e.delegate;if(k){var U=ar(k,_e);if(U){if(U===Fe)continue;return U}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if(Xe===be)throw Xe=Ce,_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);Xe=$e;var Ee=de(N,B,_e);if(Ee.type==="normal"){if(Xe=_e.done?Ce:Pe,Ee.arg===Fe)continue;return{value:Ee.arg,done:_e.done}}else Ee.type==="throw"&&(Xe=Ce,_e.method="throw",_e.arg=Ee.arg)}}}function ar(N,B){var _e=N.iterator[B.method];if(_e===ye){if(B.delegate=null,B.method==="throw"){if(N.iterator.return&&(B.method="return",B.arg=ye,ar(N,B),B.method==="throw"))return Fe;B.method="throw",B.arg=new TypeError("The iterator does not provide a 'throw' method")}return Fe}var Xe=de(_e,N.iterator,B.arg);if(Xe.type==="throw")return B.method="throw",B.arg=Xe.arg,B.delegate=null,Fe;var tt=Xe.arg;if(!tt)return B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,Fe;if(tt.done)B[N.resultName]=tt.value,B.next=N.nextLoc,B.method!=="return"&&(B.method="next",B.arg=ye);else return tt;return B.delegate=null,Fe}xt(pt),Y(pt,he,"Generator"),pt[fe]=function(){return this},pt.toString=function(){return"[object Generator]"};function et(N){var B={tryLoc:N[0]};1 in N&&(B.catchLoc=N[1]),2 in N&&(B.finallyLoc=N[2],B.afterLoc=N[3]),this.tryEntries.push(B)}function vr(N){var B=N.completion||{};B.type="normal",delete B.arg,N.completion=B}function lr(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(et,this),this.reset(!0)}D.keys=function(N){var B=[];for(var _e in N)B.push(_e);return B.reverse(),function Xe(){for(;B.length;){var tt=B.pop();if(tt in N)return Xe.value=tt,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function Vt(N){if(N){var B=N[fe];if(B)return B.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var _e=-1,Xe=function tt(){for(;++_e<N.length;)if(X.call(N,_e))return tt.value=N[_e],tt.done=!1,tt;return tt.value=ye,tt.done=!0,tt};return Xe.next=Xe}}return{next:Se}}D.values=Vt;function Se(){return{value:ye,done:!0}}return lr.prototype={constructor:lr,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ye,this.done=!1,this.delegate=null,this.method="next",this.arg=ye,this.tryEntries.forEach(vr),!N)for(var B in this)B.charAt(0)==="t"&&X.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=ye)},stop:function(){this.done=!0;var N=this.tryEntries[0],B=N.completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var B=this;function _e(U,Ee){return ht.type="throw",ht.arg=N,B.next=U,Ee&&(B.method="next",B.arg=ye),!!Ee}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var tt=this.tryEntries[Xe],ht=tt.completion;if(tt.tryLoc==="root")return _e("end");if(tt.tryLoc<=this.prev){var ue=X.call(tt,"catchLoc"),k=X.call(tt,"finallyLoc");if(ue&&k){if(this.prev<tt.catchLoc)return _e(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return _e(tt.finallyLoc)}else if(ue){if(this.prev<tt.catchLoc)return _e(tt.catchLoc,!0)}else if(k){if(this.prev<tt.finallyLoc)return _e(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,B){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var Xe=this.tryEntries[_e];if(Xe.tryLoc<=this.prev&&X.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var tt=Xe;break}}tt&&(N==="break"||N==="continue")&&tt.tryLoc<=B&&B<=tt.finallyLoc&&(tt=null);var ht=tt?tt.completion:{};return ht.type=N,ht.arg=B,tt?(this.method="next",this.next=tt.finallyLoc,Fe):this.complete(ht)},complete:function(N,B){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&B&&(this.next=B),Fe},finish:function(N){for(var B=this.tryEntries.length-1;B>=0;--B){var _e=this.tryEntries[B];if(_e.finallyLoc===N)return this.complete(_e.completion,_e.afterLoc),vr(_e),Fe}},catch:function(N){for(var B=this.tryEntries.length-1;B>=0;--B){var _e=this.tryEntries[B];if(_e.tryLoc===N){var Xe=_e.completion;if(Xe.type==="throw"){var tt=Xe.arg;vr(_e)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(N,B,_e){return this.delegate={iterator:Vt(N),resultName:B,nextLoc:_e},this.method==="next"&&(this.arg=ye),Fe}},D}(q.exports);try{regeneratorRuntime=z}catch{Function("r","regeneratorRuntime = r")(z)}},"./src/api.js":function(q,W,P){P.r(W),P.d(W,"setup",function(){return $e}),P.d(W,"setupCache",function(){return Pe}),P("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js");var z=P("axios"),D=P.n(z),ee=P("./src/request.js"),X=P("./src/cache.js");P.d(W,"serializeQuery",function(){return X.serializeQuery});var ye=P("./src/config.js"),ge=P("./src/utilities.js");function fe(Ce,Fe){if(Ce==null)return{};var He=ie(Ce,Fe),We,it;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Ce);for(it=0;it<ct.length;it++)We=ct[it],!(Fe.indexOf(We)>=0)&&Object.prototype.propertyIsEnumerable.call(Ce,We)&&(He[We]=Ce[We])}return He}function ie(Ce,Fe){if(Ce==null)return{};var He={},We=Object.keys(Ce),it,ct;for(ct=0;ct<We.length;ct++)it=We[ct],!(Fe.indexOf(it)>=0)&&(He[it]=Ce[it]);return He}function he(Ce,Fe){var He=Object.keys(Ce);if(Object.getOwnPropertySymbols){var We=Object.getOwnPropertySymbols(Ce);Fe&&(We=We.filter(function(it){return Object.getOwnPropertyDescriptor(Ce,it).enumerable})),He.push.apply(He,We)}return He}function Y(Ce){for(var Fe=1;Fe<arguments.length;Fe++){var He=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?he(Object(He),!0).forEach(function(We){re(Ce,We,He[We])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ce,Object.getOwnPropertyDescriptors(He)):he(Object(He)).forEach(function(We){Object.defineProperty(Ce,We,Object.getOwnPropertyDescriptor(He,We))})}return Ce}function re(Ce,Fe,He){return Fe in Ce?Object.defineProperty(Ce,Fe,{value:He,enumerable:!0,configurable:!0,writable:!0}):Ce[Fe]=He,Ce}function de(Ce,Fe,He,We,it,ct,vt){try{var Mt=Ce[ct](vt),pt=Mt.value}catch(xt){He(xt);return}Mt.done?Fe(pt):Promise.resolve(pt).then(We,it)}function be(Ce){return function(){var Fe=this,He=arguments;return new Promise(function(We,it){var ct=Ce.apply(Fe,He);function vt(pt){de(ct,We,it,vt,Mt,"next",pt)}function Mt(pt){de(ct,We,it,vt,Mt,"throw",pt)}vt(void 0)})}}function Pe(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ce=Object(ye.makeConfig)(Ce);function Fe(We){return He.apply(this,arguments)}function He(){return He=be(regeneratorRuntime.mark(function We(it){var ct,vt,Mt,pt,xt;return regeneratorRuntime.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return ct=Object(ye.mergeRequestConfig)(Ce,it),Ht.next=3,Object(ee.default)(ct,it);case 3:if(vt=Ht.sent,Mt=vt.next,Object(ge.isFunction)(Mt)){Ht.next=7;break}return Ht.abrupt("return",Mt);case 7:return Ht.prev=7,Ht.next=10,ct.adapter(it);case 10:vt=Ht.sent,Ht.next=16;break;case 13:Ht.prev=13,Ht.t0=Ht.catch(7),pt=Ht.t0;case 16:if(!pt){Ht.next=31;break}if(xt=Object(ge.isFunction)(ct.readOnError)?ct.readOnError(pt,it):ct.readOnError,!xt){Ht.next=30;break}return Ht.prev=19,ct.acceptStale=!0,Ht.next=23,Object(ee.default)(ct,it);case 23:return vt=Ht.sent,vt.next.request.stale=!0,Ht.abrupt("return",vt.next);case 28:Ht.prev=28,Ht.t1=Ht.catch(19);case 30:throw pt;case 31:return Ht.abrupt("return",Mt(vt));case 32:case"end":return Ht.stop()}},We,null,[[7,13],[19,28]])})),He.apply(this,arguments)}return{adapter:Fe,config:Ce,store:Ce.store}}function $e(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=Y(Y(Y({},ye.defaults.axios),Ce),{},{cache:Y(Y({},ye.defaults.axios.cache),Ce.cache)}),He=Pe(Fe.cache);Fe.cache;var We=fe(Fe,["cache"]),it=D.a.create(Y(Y({},We),{},{adapter:He.adapter}));return it.cache=He.store,it}W.default={setup:$e,setupCache:Pe,serializeQuery:X.serializeQuery}},"./src/cache.js":function(q,W,P){P.r(W),P.d(W,"read",function(){return he}),P.d(W,"write",function(){return fe}),P.d(W,"key",function(){return re}),P.d(W,"invalidate",function(){return Pe}),P.d(W,"serializeQuery",function(){return $e}),P("./node_modules/core-js/modules/es7.array.includes.js"),P("./node_modules/core-js/modules/es6.string.includes.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/utilities.js"),D=P("./node_modules/md5/md5.js"),ee=P.n(D),X=P("./src/serialize.js");function ye(Ce,Fe,He,We,it,ct,vt){try{var Mt=Ce[ct](vt),pt=Mt.value}catch(xt){He(xt);return}Mt.done?Fe(pt):Promise.resolve(pt).then(We,it)}function ge(Ce){return function(){var Fe=this,He=arguments;return new Promise(function(We,it){var ct=Ce.apply(Fe,He);function vt(pt){ye(ct,We,it,vt,Mt,"next",pt)}function Mt(pt){ye(ct,We,it,vt,Mt,"throw",pt)}vt(void 0)})}}function fe(Ce,Fe,He){return ie.apply(this,arguments)}function ie(){return ie=ge(regeneratorRuntime.mark(function Ce(Fe,He,We){var it;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,it={expires:Fe.expires,data:Object(X.default)(Fe,He,We)},vt.next=4,Fe.store.setItem(Fe.uuid,it);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),Fe.debug("Could not store response",vt.t0),!Fe.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,Fe.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),Fe.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Ce,null,[[0,6],[10,15]])})),ie.apply(this,arguments)}function he(Ce,Fe){return Y.apply(this,arguments)}function Y(){return Y=ge(regeneratorRuntime.mark(function Ce(Fe,He){var We,it,ct,vt,Mt,pt,xt,Wt;return regeneratorRuntime.wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:return We=Fe.uuid,it=Fe.ignoreCache,ar.next=3,Fe.store.getItem(We);case 3:if(ct=ar.sent,!(it||!ct||!ct.data)){ar.next=10;break}throw Fe.debug("cache-miss",He.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(Mt=ct.expires,pt=ct.data,xt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!xt&&!Fe.acceptStale&&Mt!==0&&Mt<Date.now())){ar.next=18;break}throw Fe.debug("cache-stale",He.url),Wt=new Error,Wt.reason="cache-stale",Wt.message="Entry is stale",Wt;case 18:return Fe.debug(Fe.acceptStale?"cache-hit-stale":"cache-hit",He.url),ar.abrupt("return",pt);case 20:case"end":return ar.stop()}},Ce)})),Y.apply(this,arguments)}function re(Ce){if(Object(z.isFunction)(Ce.key))return Ce.key;var Fe;return Object(z.isString)(Ce.key)?Fe=function(We){var it="".concat(We.baseURL?We.baseURL:"").concat(We.url),ct="".concat(Ce.key,"/").concat(it).concat($e(We));return We.data?ct+ee()(We.data):ct}:Fe=function(We){var it="".concat(We.baseURL?We.baseURL:"").concat(We.url),ct=it+$e(We);return We.data?ct+ee()(We.data):ct},Fe}function de(Ce,Fe){return be.apply(this,arguments)}function be(){return be=ge(regeneratorRuntime.mark(function Ce(Fe,He){var We;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(We=He.method.toLowerCase(),!Fe.exclude.methods.includes(We)){ct.next=4;break}return ct.next=4,Fe.store.removeItem(Fe.uuid);case 4:case"end":return ct.stop()}},Ce)})),be.apply(this,arguments)}function Pe(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(z.isFunction)(Ce.invalidate)?Ce.invalidate:de}function $e(Ce){if(!Ce.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ce.params);var Fe=Ce.params,He=Ce.params instanceof URLSearchParams;return He||(Fe=new URLSearchParams,Object.keys(Ce.params).forEach(function(We){return Fe.append(We,Ce.params[We])})),"?".concat(Fe.toString())}W.default={read:he,write:fe,key:re,invalidate:Pe,serializeQuery:$e}},"./src/config.js":function(q,W,P){P.r(W),P.d(W,"defaults",function(){return Y}),P.d(W,"makeConfig",function(){return de}),P.d(W,"mergeRequestConfig",function(){return be}),P("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("axios"),D=P.n(z),ee=P("./src/memory.js"),X=P("./src/cache.js");function ye(Pe,$e){var Ce=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Fe=Object.getOwnPropertySymbols(Pe);$e&&(Fe=Fe.filter(function(He){return Object.getOwnPropertyDescriptor(Pe,He).enumerable})),Ce.push.apply(Ce,Fe)}return Ce}function ge(Pe){for(var $e=1;$e<arguments.length;$e++){var Ce=arguments[$e]!=null?arguments[$e]:{};$e%2?ye(Object(Ce),!0).forEach(function(Fe){fe(Pe,Fe,Ce[Fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(Ce)):ye(Object(Ce)).forEach(function(Fe){Object.defineProperty(Pe,Fe,Object.getOwnPropertyDescriptor(Ce,Fe))})}return Pe}function fe(Pe,$e,Ce){return $e in Pe?Object.defineProperty(Pe,$e,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):Pe[$e]=Ce,Pe}var ie=function(){},he=function(){for(var $e,Ce=arguments.length,Fe=new Array(Ce),He=0;He<Ce;He++)Fe[He]=arguments[He];return($e=console).log.apply($e,["[axios-cache-adapter]"].concat(Fe))},Y={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:D.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},re=["limit","store","adapter","uuid","acceptStale"],de=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ce=ge(ge(ge({},Y.cache),$e),{},{exclude:ge(ge({},Y.cache.exclude),$e.exclude)});return Ce.key=Object(X.key)(Ce),Ce.invalidate=Object(X.invalidate)(Ce),Ce.debug!==!1?Ce.debug=typeof Ce.debug=="function"?Ce.debug:he:Ce.debug=ie,Ce.store||(Ce.store=new ee.default),Ce.debug("Global cache config",Ce),Ce},be=function($e,Ce){var Fe=Ce.cache||{};Fe&&re.forEach(function(We){return Fe[We]?delete Fe[We]:void 0});var He=ge(ge(ge({},$e),Fe),{},{exclude:ge(ge({},$e.exclude),Fe.exclude)});return He.debug===!0&&(He.debug=he),Fe.key&&(He.key=Object(X.key)(Fe)),He.uuid=He.key(Ce),$e.debug("Request config for ".concat(Ce.url),He),He};W.default={defaults:Y,makeConfig:de,mergeRequestConfig:be}},"./src/exclude.js":function(q,W,P){P.r(W),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/core-js/modules/es7.array.includes.js"),P("./node_modules/core-js/modules/es6.string.includes.js");var z=P("./src/utilities.js");function D(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=arguments.length>1?arguments[1]:void 0,ye=ee.exclude,ge=ye===void 0?{}:ye,fe=ee.debug,ie=X.method.toLowerCase();if(ie==="head"||ge.methods.includes(ie))return fe("Excluding request by HTTP method ".concat(X.url)),!0;if(typeof ge.filter=="function"&&ge.filter(X))return fe("Excluding request by filter ".concat(X.url)),!0;var he=/\?.*$/.test(X.url)||Object(z.isObject)(X.params)&&Object.keys(X.params).length!==0||typeof URLSearchParams<"u"&&X.params instanceof URLSearchParams;if(ge.query&&he)return fe("Excluding request by query ".concat(X.url)),!0;var Y=ge.paths||[],re=Y.some(function(de){return X.url.match(de)});return re?(fe("Excluding request by url match ".concat(X.url)),!0):!1}W.default=D},"./src/index.node.js":function(q,W,P){P.r(W);var z=P("./src/api.js");P.d(W,"setup",function(){return z.setup}),P.d(W,"setupCache",function(){return z.setupCache}),P.d(W,"serializeQuery",function(){return z.serializeQuery});var D=P("./src/redis.js");P.d(W,"RedisStore",function(){return D.default});var ee=P("./src/redis-default.js");P.d(W,"RedisDefaultStore",function(){return ee.default}),W.default={setup:z.setup,setupCache:z.setupCache,serializeQuery:z.serializeQuery,RedisStore:D.default,RedisDefaultStore:ee.default}},"./src/limit.js":function(q,W,P){P.r(W),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(ye,ge,fe,ie,he,Y,re){try{var de=ye[Y](re),be=de.value}catch(Pe){fe(Pe);return}de.done?ge(be):Promise.resolve(be).then(ie,he)}function D(ye){return function(){var ge=this,fe=arguments;return new Promise(function(ie,he){var Y=ye.apply(ge,fe);function re(be){z(Y,ie,he,re,de,"next",be)}function de(be){z(Y,ie,he,re,de,"throw",be)}re(void 0)})}}function ee(ye){return X.apply(this,arguments)}function X(){return X=D(regeneratorRuntime.mark(function ye(ge){var fe,ie;return regeneratorRuntime.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,ge.store.length();case 2:if(fe=Y.sent,!(fe<ge.limit)){Y.next=5;break}return Y.abrupt("return");case 5:return ge.debug("Current store size: ".concat(fe)),Y.next=8,ge.store.iterate(function(re,de){ie||(ie={value:re,key:de}),re.expires<ie.value.expires&&(ie={value:re,key:de})});case 8:if(!ie){Y.next=12;break}return ge.debug("Removing item: ".concat(ie.key)),Y.next=12,ge.store.removeItem(ie.key);case 12:case"end":return Y.stop()}},ye)})),X.apply(this,arguments)}W.default=ee},"./src/memory.js":function(q,W,P){P.r(W),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js");var z=P("./src/utilities.js");function D(ie,he,Y,re,de,be,Pe){try{var $e=ie[be](Pe),Ce=$e.value}catch(Fe){Y(Fe);return}$e.done?he(Ce):Promise.resolve(Ce).then(re,de)}function ee(ie){return function(){var he=this,Y=arguments;return new Promise(function(re,de){var be=ie.apply(he,Y);function Pe(Ce){D(be,re,de,Pe,$e,"next",Ce)}function $e(Ce){D(be,re,de,Pe,$e,"throw",Ce)}Pe(void 0)})}}function X(ie,he){if(!(ie instanceof he))throw new TypeError("Cannot call a class as a function")}function ye(ie,he){for(var Y=0;Y<he.length;Y++){var re=he[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,re.key,re)}}function ge(ie,he,Y){return he&&ye(ie.prototype,he),Y&&ye(ie,Y),ie}var fe=function(){function ie(){X(this,ie),this.store={}}return ge(ie,[{key:"getItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){var be;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return be=this.store[de]||null,$e.abrupt("return",JSON.parse(be));case 2:case"end":return $e.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"setItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de,be){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return this.store[de]=JSON.stringify(be),$e.abrupt("return",be);case 2:case"end":return $e.stop()}},re,this)}));function Y(re,de){return he.apply(this,arguments)}return Y}()},{key:"removeItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:delete this.store[de];case 1:case"end":return Pe.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"clear",value:function(){var he=ee(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:this.store={};case 1:case"end":return be.stop()}},re,this)}));function Y(){return he.apply(this,arguments)}return Y}()},{key:"length",value:function(){var he=ee(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Object.keys(this.store).length);case 1:case"end":return be.stop()}},re,this)}));function Y(){return he.apply(this,arguments)}return Y}()},{key:"iterate",value:function(Y){return Promise.all(Object(z.mapObject)(this.store,Y))}}]),ie}();W.default=fe},"./src/redis-default.js":function(q,W,P){P.r(W),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.function.bind.js"),P("./node_modules/core-js/modules/es6.function.name.js");var z=P("util");function D(ie,he,Y,re,de,be,Pe){try{var $e=ie[be](Pe),Ce=$e.value}catch(Fe){Y(Fe);return}$e.done?he(Ce):Promise.resolve(Ce).then(re,de)}function ee(ie){return function(){var he=this,Y=arguments;return new Promise(function(re,de){var be=ie.apply(he,Y);function Pe(Ce){D(be,re,de,Pe,$e,"next",Ce)}function $e(Ce){D(be,re,de,Pe,$e,"throw",Ce)}Pe(void 0)})}}function X(ie,he){if(!(ie instanceof he))throw new TypeError("Cannot call a class as a function")}function ye(ie,he){for(var Y=0;Y<he.length;Y++){var re=he[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,re.key,re)}}function ge(ie,he,Y){return he&&ye(ie.prototype,he),Y&&ye(ie,Y),ie}var fe=function(){function ie(he){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};X(this,ie);var re=new TypeError("First parameter must be a valid RedisClient instance.");try{if(he.constructor.name!=="RedisClient")throw re}catch{throw re}this.client=he,this.prefix=Y.prefix||"axios-cache",this.maxScanCount=Y.maxScanCount||1e3,this.getAsync=Object(z.promisify)(he.get).bind(he),this.psetexAsync=Object(z.promisify)(he.psetex).bind(he),this.delAsync=Object(z.promisify)(he.del).bind(he),this.scanAsync=Object(z.promisify)(he.scan).bind(he)}return ge(ie,[{key:"calculateTTL",value:function(Y){var re=Date.now();return Y.expires&&Y.expires>re?Y.expires-re:-1}},{key:"transformKey",value:function(Y){return this.prefix+"_"+Y}},{key:"getItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){var be;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.getAsync(this.transformKey(de));case 2:if($e.t0=$e.sent,$e.t0){$e.next=5;break}$e.t0=null;case 5:return be=$e.t0,$e.abrupt("return",JSON.parse(be));case 7:case"end":return $e.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"setItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de,be){var Pe,$e;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(Pe=this.transformKey(de),$e=this.calculateTTL(be),!($e>0)){Fe.next=5;break}return Fe.next=5,this.psetexAsync(Pe,$e,JSON.stringify(be));case 5:return Fe.abrupt("return",be);case 6:case"end":return Fe.stop()}},re,this)}));function Y(re,de){return he.apply(this,arguments)}return Y}()},{key:"removeItem",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.delAsync(this.transformKey(de));case 2:case"end":return Pe.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"scan",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){var be,Pe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:be="0";case 1:return Ce.next=3,this.scanAsync(be,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Pe=Ce.sent,be=Pe[0],Ce.next=7,de(Pe[1]);case 7:if(be!=="0"){Ce.next=1;break}case 8:case"end":return Ce.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()},{key:"clear",value:function(){var he=ee(regeneratorRuntime.mark(function re(){var de=this;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.scan(function($e){return de.delAsync($e)});case 2:case"end":return Pe.stop()}},re,this)}));function Y(){return he.apply(this,arguments)}return Y}()},{key:"length",value:function(){var he=ee(regeneratorRuntime.mark(function re(){var de;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return de=0,Pe.next=3,this.scan(function($e){de+=$e.length});case 3:return Pe.abrupt("return",de);case 4:case"end":return Pe.stop()}},re,this)}));function Y(){return he.apply(this,arguments)}return Y}()},{key:"iterate",value:function(){var he=ee(regeneratorRuntime.mark(function re(de){var be=this,Pe,$e;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return $e=function(){return $e=ee(regeneratorRuntime.mark(function We(it){var ct,vt;return regeneratorRuntime.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.getAsync(it);case 2:if(pt.t0=pt.sent,pt.t0){pt.next=5;break}pt.t0=null;case 5:return ct=pt.t0,vt=JSON.parse(ct),pt.next=9,de(vt,it);case 9:return pt.abrupt("return",pt.sent);case 10:case"end":return pt.stop()}},We,this)})),$e.apply(this,arguments)},Pe=function(We){return $e.apply(this,arguments)},Fe.next=4,this.scan(function(He){return Promise.all(He.map(Pe.bind(be)))});case 4:return Fe.abrupt("return",Promise.resolve([]));case 5:case"end":return Fe.stop()}},re,this)}));function Y(re){return he.apply(this,arguments)}return Y}()}]),ie}();W.default=fe},"./src/redis.js":function(q,W,P){P.r(W),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.function.bind.js"),P("./node_modules/core-js/modules/es6.function.name.js");var z=P("util"),D=P("./src/utilities.js");function ee(he,Y,re,de,be,Pe,$e){try{var Ce=he[Pe]($e),Fe=Ce.value}catch(He){re(He);return}Ce.done?Y(Fe):Promise.resolve(Fe).then(de,be)}function X(he){return function(){var Y=this,re=arguments;return new Promise(function(de,be){var Pe=he.apply(Y,re);function $e(Fe){ee(Pe,de,be,$e,Ce,"next",Fe)}function Ce(Fe){ee(Pe,de,be,$e,Ce,"throw",Fe)}$e(void 0)})}}function ye(he,Y){if(!(he instanceof Y))throw new TypeError("Cannot call a class as a function")}function ge(he,Y){for(var re=0;re<Y.length;re++){var de=Y[re];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(he,de.key,de)}}function fe(he,Y,re){return Y&&ge(he.prototype,Y),re&&ge(he,re),he}var ie=function(){function he(Y){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ye(this,he);var de=new TypeError("First parameter must be a valid RedisClient instance.");try{if(Y.constructor.name!=="RedisClient")throw de}catch{throw de}this.client=Y,this.HASH_KEY=re,this.hgetAsync=Object(z.promisify)(Y.hget).bind(Y),this.hsetAsync=Object(z.promisify)(Y.hset).bind(Y),this.hdelAsync=Object(z.promisify)(Y.hdel).bind(Y),this.delAsync=Object(z.promisify)(Y.del).bind(Y),this.hlenAsync=Object(z.promisify)(Y.hlen).bind(Y),this.hgetallAsync=Object(z.promisify)(Y.hgetall).bind(Y)}return fe(he,[{key:"getItem",value:function(){var Y=X(regeneratorRuntime.mark(function de(be){var Pe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.hgetAsync(this.HASH_KEY,be);case 2:if(Ce.t0=Ce.sent,Ce.t0){Ce.next=5;break}Ce.t0=null;case 5:return Pe=Ce.t0,Ce.abrupt("return",JSON.parse(Pe));case 7:case"end":return Ce.stop()}},de,this)}));function re(de){return Y.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var Y=X(regeneratorRuntime.mark(function de(be,Pe){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.hsetAsync(this.HASH_KEY,be,JSON.stringify(Pe));case 2:return Ce.abrupt("return",Pe);case 3:case"end":return Ce.stop()}},de,this)}));function re(de,be){return Y.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var Y=X(regeneratorRuntime.mark(function de(be){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.hdelAsync(this.HASH_KEY,be);case 2:case"end":return $e.stop()}},de,this)}));function re(de){return Y.apply(this,arguments)}return re}()},{key:"clear",value:function(){var Y=X(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Pe.stop()}},de,this)}));function re(){return Y.apply(this,arguments)}return re}()},{key:"length",value:function(){var Y=X(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Pe.stop()}},de,this)}));function re(){return Y.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var Y=X(regeneratorRuntime.mark(function de(be){var Pe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Pe=Ce.sent,Ce.abrupt("return",Promise.all(Object(D.mapObject)(Pe,be)));case 4:case"end":return Ce.stop()}},de,this)}));function re(de){return Y.apply(this,arguments)}return re}()}]),he}();W.default=ie},"./src/request.js":function(q,W,P){P.r(W),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/response.js"),D=P("./src/exclude.js"),ee=P("./src/cache.js");function X(ie,he,Y,re,de,be,Pe){try{var $e=ie[be](Pe),Ce=$e.value}catch(Fe){Y(Fe);return}$e.done?he(Ce):Promise.resolve(Ce).then(re,de)}function ye(ie){return function(){var he=this,Y=arguments;return new Promise(function(re,de){var be=ie.apply(he,Y);function Pe(Ce){X(be,re,de,Pe,$e,"next",Ce)}function $e(Ce){X(be,re,de,Pe,$e,"throw",Ce)}Pe(void 0)})}}function ge(ie,he){return fe.apply(this,arguments)}function fe(){return fe=ye(regeneratorRuntime.mark(function ie(he,Y){var re,de,be;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return be=function(){return he.excludeFromCache=!0,{config:he,next:re}},he.debug("uuid",he.uuid),re=function(){for(var Fe=arguments.length,He=new Array(Fe),We=0;We<Fe;We++)He[We]=arguments[We];return z.default.apply(void 0,[he,Y].concat(He))},$e.next=5,he.invalidate(he,Y);case 5:if(!Object(D.default)(he,Y)){$e.next=7;break}return $e.abrupt("return",be());case 7:return $e.prev=7,$e.next=10,Object(ee.read)(he,Y);case 10:return de=$e.sent,de.config=Y,de.request={fromCache:!0},$e.abrupt("return",{config:he,next:de});case 16:if($e.prev=16,$e.t0=$e.catch(7),!(he.clearOnStale&&$e.t0.reason==="cache-stale")){$e.next=21;break}return $e.next=21,he.store.removeItem(he.uuid);case 21:return $e.abrupt("return",{config:he,next:re});case 22:case"end":return $e.stop()}},ie,null,[[7,16]])})),fe.apply(this,arguments)}W.default=ge},"./src/response.js":function(q,W,P){P.r(W),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var z=P("./src/limit.js"),D=P("./src/cache.js"),ee=P("./node_modules/cache-control-esm/index.js");function X(ie,he,Y,re,de,be,Pe){try{var $e=ie[be](Pe),Ce=$e.value}catch(Fe){Y(Fe);return}$e.done?he(Ce):Promise.resolve(Ce).then(re,de)}function ye(ie){return function(){var he=this,Y=arguments;return new Promise(function(re,de){var be=ie.apply(he,Y);function Pe(Ce){X(be,re,de,Pe,$e,"next",Ce)}function $e(Ce){X(be,re,de,Pe,$e,"throw",Ce)}Pe(void 0)})}}function ge(ie,he,Y){return fe.apply(this,arguments)}function fe(){return fe=ye(regeneratorRuntime.mark(function ie(he,Y,re){var de,be,Pe,$e,Ce;return regeneratorRuntime.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(de=re.request,be=de===void 0?{}:de,Pe=re.headers,$e=Pe===void 0?{}:Pe,!(["arraybuffer","blob"].indexOf(be.responseType)>-1)){He.next=3;break}return He.abrupt("return",re);case 3:if(Ce={},he.readHeaders&&($e["cache-control"]?(Ce=Object(ee.parse)($e["cache-control"]),(Ce.noCache||Ce.noStore)&&(he.excludeFromCache=!0)):$e.expires?he.expires=new Date($e.expires).getTime():he.expires=new Date().getTime()),he.excludeFromCache){He.next=15;break}if(Ce.maxAge||Ce.maxAge===0?he.expires=Date.now()+Ce.maxAge*1e3:he.readHeaders||(he.expires=he.maxAge===0?Date.now():Date.now()+he.maxAge),!he.limit){He.next=11;break}return he.debug("Detected limit: ".concat(he.limit)),He.next=11,Object(z.default)(he);case 11:return He.next=13,Object(D.write)(he,Y,re);case 13:He.next=16;break;case 15:re.request.excludedFromCache=!0;case 16:return He.abrupt("return",re);case 17:case"end":return He.stop()}},ie)})),fe.apply(this,arguments)}W.default=ge},"./src/serialize.js":function(q,W,P){P.r(W),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(X,ye){if(X==null)return{};var ge=D(X,ye),fe,ie;if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(X);for(ie=0;ie<he.length;ie++)fe=he[ie],!(ye.indexOf(fe)>=0)&&Object.prototype.propertyIsEnumerable.call(X,fe)&&(ge[fe]=X[fe])}return ge}function D(X,ye){if(X==null)return{};var ge={},fe=Object.keys(X),ie,he;for(he=0;he<fe.length;he++)ie=fe[he],!(ye.indexOf(ie)>=0)&&(ge[ie]=X[ie]);return ge}function ee(X,ye,ge){if(ge.data)try{ge.data=JSON.parse(ge.data)}catch(ie){X.debug("Could not parse data as JSON",ie)}ge.request,ge.config;var fe=z(ge,["request","config"]);return fe}W.default=ee},"./src/utilities.js":function(q,W,P){P.r(W),P.d(W,"isObject",function(){return D}),P.d(W,"getTag",function(){return ee}),P.d(W,"isFunction",function(){return X}),P.d(W,"isString",function(){return ye}),P.d(W,"mapObject",function(){return ge}),P("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function z(fe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(he){return typeof he}:z=function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},z(fe)}function D(fe){var ie=z(fe);return fe!=null&&(ie==="object"||ie==="function")}function ee(fe){return fe===null?fe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(fe)}function X(fe){if(!D(fe))return!1;var ie=ee(fe);return ie==="[object Function]"||ie==="[object AsyncFunction]"||ie==="[object GeneratorFunction]"||ie==="[object Proxy]"}function ye(fe){var ie=z(fe);return ie==="string"||ie==="object"&&fe!=null&&!Array.isArray(fe)&&ee(fe)==="[object String]"}function ge(fe,ie){return D(fe)?Object.keys(fe).map(function(he){return ie(fe[he],he)}):[]}},axios:function(q,W){q.exports=se},util:function(q,W){q.exports=C.default}})})});const L={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},j=R.setupCache({maxAge:60*60*24*1e3}),le=E.default.create({adapter:j.adapter}),K=async(Z,G={})=>{const se={...L,...G},[q,W]=i.lngLatToGoogle(Z,se.zoomBase),P=se.tileUrl.replace("{z}",String(se.zoomBase)).replace("{x}",String(q)).replace("{y}",String(W)),z={code:"",prefecture:"",city:""};let D;try{const ye=await le.get(P,{responseType:"arraybuffer"});D=Buffer.from(ye.data,"binary")}catch(ye){throw new Error(ye)}const ee=new d.VectorTile(new w.default(D));let X=Object.keys(ee.layers);return Array.isArray(X)||(X=[X]),X.forEach(ye=>{const ge=ee.layers[ye];if(ge&&se.layer===ge.name)for(let fe=0;fe<ge.length;fe++){const ie=ge.feature(fe).toGeoJSON(q,W,se.zoomBase);X.length>1&&(ie.properties.vt_layer=ye);const he={type:"FeatureCollection",features:[ie]};t.geoContains(he,Z)&&(z.code=String(ie.id).length===5?String(ie.id):`0${String(ie.id)}`,z.prefecture=ie.properties.prefecture,z.city=ie.properties.city)}}),z};e.openReverseGeocoder=K})(Sk);const p8={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},m8={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},g8={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},y8={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},ZP={JPN:g8,CHN:p8,DEU:m8,KOR:y8};var XP=Object.prototype.toString,L3=function(t){var i=XP.call(t),a=i==="[object Arguments]";return a||(a=i!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&XP.call(t.callee)==="[object Function]"),a},z_,qP;function v8(){if(qP)return z_;qP=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=L3,c=Object.prototype.propertyIsEnumerable,f=!c.call({toString:null},"toString"),d=c.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=function(T){var R=T.constructor;return R&&R.prototype===T},E={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},C=function(){if(typeof window>"u")return!1;for(var T in window)try{if(!E["$"+T]&&t.call(window,T)&&window[T]!==null&&typeof window[T]=="object")try{w(window[T])}catch{return!0}}catch{return!0}return!1}(),b=function(T){if(typeof window>"u"||!C)return w(T);try{return w(T)}catch{return!1}};e=function(R){var L=R!==null&&typeof R=="object",j=i.call(R)==="[object Function]",le=a(R),K=L&&i.call(R)==="[object String]",Z=[];if(!L&&!j&&!le)throw new TypeError("Object.keys called on a non-object");var G=d&&j;if(K&&R.length>0&&!t.call(R,0))for(var se=0;se<R.length;++se)Z.push(String(se));if(le&&R.length>0)for(var q=0;q<R.length;++q)Z.push(String(q));else for(var W in R)!(G&&W==="prototype")&&t.call(R,W)&&Z.push(String(W));if(f)for(var P=b(R),z=0;z<l.length;++z)!(P&&l[z]==="constructor")&&t.call(R,l[z])&&Z.push(l[z]);return Z}}return z_=e,z_}var _8=Array.prototype.slice,x8=L3,KP=Object.keys,zg=KP?function(t){return KP(t)}:v8(),JP=Object.keys;zg.shim=function(){if(Object.keys){var t=function(){var i=Object.keys(arguments);return i&&i.length===arguments.length}(1,2);t||(Object.keys=function(a){return x8(a)?JP(_8.call(a)):JP(a)})}else Object.keys=zg;return Object.keys||zg};var Yb=zg,w8=Error,b8=EvalError,S8=RangeError,E8=ReferenceError,B3=SyntaxError,Iu=TypeError,T8=URIError,j0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),a=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var c=42;t[i]=c;for(i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var f=Object.getOwnPropertySymbols(t);if(f.length!==1||f[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(t,i);if(d.value!==c||d.enumerable!==!0)return!1}return!0},YP=typeof Symbol<"u"&&Symbol,P8=j0,Qb=function(){return typeof YP!="function"||typeof Symbol!="function"||typeof YP("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:P8()},L_={__proto__:null,foo:{}},A8=Object,I8=function(){return{__proto__:L_}.foo===L_.foo&&!(L_ instanceof A8)},C8="Function.prototype.bind called on incompatible ",M8=Object.prototype.toString,k8=Math.max,O8="[object Function]",QP=function(t,i){for(var a=[],c=0;c<t.length;c+=1)a[c]=t[c];for(var f=0;f<i.length;f+=1)a[f+t.length]=i[f];return a},F8=function(t,i){for(var a=[],c=i||0,f=0;c<t.length;c+=1,f+=1)a[f]=t[c];return a},R8=function(e,t){for(var i="",a=0;a<e.length;a+=1)i+=e[a],a+1<e.length&&(i+=t);return i},j8=function(t){var i=this;if(typeof i!="function"||M8.apply(i)!==O8)throw new TypeError(C8+i);for(var a=F8(arguments,1),c,f=function(){if(this instanceof c){var C=i.apply(this,QP(a,arguments));return Object(C)===C?C:this}return i.apply(t,QP(a,arguments))},d=k8(0,i.length-a.length),l=[],w=0;w<d;w++)l[w]="$"+w;if(c=Function("binder","return function ("+R8(l,",")+"){ return binder.apply(this,arguments); }")(f),i.prototype){var E=function(){};E.prototype=i.prototype,c.prototype=new E,E.prototype=null}return c},z8=j8,e2=Function.prototype.bind||z8,L8=Function.prototype.call,B8=Object.prototype.hasOwnProperty,D8=e2,D3=D8.call(L8,B8),jr,N8=w8,$8=b8,U8=S8,V8=E8,pf=B3,Yh=Iu,G8=T8,N3=Function,B_=function(e){try{return N3('"use strict"; return ('+e+").constructor;")()}catch{}},mc=Object.getOwnPropertyDescriptor;if(mc)try{mc({},"")}catch{mc=null}var D_=function(){throw new Yh},W8=mc?function(){try{return arguments.callee,D_}catch{try{return mc(arguments,"callee").get}catch{return D_}}}():D_,bh=Qb(),H8=I8(),fi=Object.getPrototypeOf||(H8?function(e){return e.__proto__}:null),Th={},Z8=typeof Uint8Array>"u"||!fi?jr:fi(Uint8Array),gc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?jr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?jr:ArrayBuffer,"%ArrayIteratorPrototype%":bh&&fi?fi([][Symbol.iterator]()):jr,"%AsyncFromSyncIteratorPrototype%":jr,"%AsyncFunction%":Th,"%AsyncGenerator%":Th,"%AsyncGeneratorFunction%":Th,"%AsyncIteratorPrototype%":Th,"%Atomics%":typeof Atomics>"u"?jr:Atomics,"%BigInt%":typeof BigInt>"u"?jr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?jr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?jr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?jr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":N8,"%eval%":eval,"%EvalError%":$8,"%Float32Array%":typeof Float32Array>"u"?jr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?jr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?jr:FinalizationRegistry,"%Function%":N3,"%GeneratorFunction%":Th,"%Int8Array%":typeof Int8Array>"u"?jr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?jr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?jr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bh&&fi?fi(fi([][Symbol.iterator]())):jr,"%JSON%":typeof JSON=="object"?JSON:jr,"%Map%":typeof Map>"u"?jr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!bh||!fi?jr:fi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?jr:Promise,"%Proxy%":typeof Proxy>"u"?jr:Proxy,"%RangeError%":U8,"%ReferenceError%":V8,"%Reflect%":typeof Reflect>"u"?jr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?jr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!bh||!fi?jr:fi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?jr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bh&&fi?fi(""[Symbol.iterator]()):jr,"%Symbol%":bh?Symbol:jr,"%SyntaxError%":pf,"%ThrowTypeError%":W8,"%TypedArray%":Z8,"%TypeError%":Yh,"%Uint8Array%":typeof Uint8Array>"u"?jr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?jr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?jr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?jr:Uint32Array,"%URIError%":G8,"%WeakMap%":typeof WeakMap>"u"?jr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?jr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?jr:WeakSet};if(fi)try{null.error}catch(e){var X8=fi(fi(e));gc["%Error.prototype%"]=X8}var q8=function e(t){var i;if(t==="%AsyncFunction%")i=B_("async function () {}");else if(t==="%GeneratorFunction%")i=B_("function* () {}");else if(t==="%AsyncGeneratorFunction%")i=B_("async function* () {}");else if(t==="%AsyncGenerator%"){var a=e("%AsyncGeneratorFunction%");a&&(i=a.prototype)}else if(t==="%AsyncIteratorPrototype%"){var c=e("%AsyncGenerator%");c&&fi&&(i=fi(c.prototype))}return gc[t]=i,i},eA={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},rm=e2,Wy=D3,K8=rm.call(Function.call,Array.prototype.concat),J8=rm.call(Function.apply,Array.prototype.splice),tA=rm.call(Function.call,String.prototype.replace),Hy=rm.call(Function.call,String.prototype.slice),Y8=rm.call(Function.call,RegExp.prototype.exec),Q8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,e$=/\\(\\)?/g,t$=function(t){var i=Hy(t,0,1),a=Hy(t,-1);if(i==="%"&&a!=="%")throw new pf("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&i!=="%")throw new pf("invalid intrinsic syntax, expected opening `%`");var c=[];return tA(t,Q8,function(f,d,l,w){c[c.length]=l?tA(w,e$,"$1"):d||f}),c},r$=function(t,i){var a=t,c;if(Wy(eA,a)&&(c=eA[a],a="%"+c[0]+"%"),Wy(gc,a)){var f=gc[a];if(f===Th&&(f=q8(a)),typeof f>"u"&&!i)throw new Yh("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:c,name:a,value:f}}throw new pf("intrinsic "+t+" does not exist!")},ka=function(t,i){if(typeof t!="string"||t.length===0)throw new Yh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new Yh('"allowMissing" argument must be a boolean');if(Y8(/^%?[^%]*%?$/,t)===null)throw new pf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=t$(t),c=a.length>0?a[0]:"",f=r$("%"+c+"%",i),d=f.name,l=f.value,w=!1,E=f.alias;E&&(c=E[0],J8(a,K8([0,1],E)));for(var C=1,b=!0;C<a.length;C+=1){var T=a[C],R=Hy(T,0,1),L=Hy(T,-1);if((R==='"'||R==="'"||R==="`"||L==='"'||L==="'"||L==="`")&&R!==L)throw new pf("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(w=!0),c+="."+T,d="%"+c+"%",Wy(gc,d))l=gc[d];else if(l!=null){if(!(T in l)){if(!i)throw new Yh("base intrinsic for "+t+" exists, but the property is not available.");return}if(mc&&C+1>=a.length){var j=mc(l,T);b=!!j,b&&"get"in j&&!("originalValue"in j.get)?l=j.get:l=l[T]}else b=Wy(l,T),l=l[T];b&&!w&&(gc[d]=l)}}return l},n$=ka,Lg=n$("%Object.defineProperty%",!0)||!1;if(Lg)try{Lg({},"a",{value:1})}catch{Lg=!1}var t2=Lg,i$=ka,Bg=i$("%Object.getOwnPropertyDescriptor%",!0);if(Bg)try{Bg([],"length")}catch{Bg=null}var r2=Bg,rA=t2,o$=B3,Sh=Iu,nA=r2,n2=function(t,i,a){if(!t||typeof t!="object"&&typeof t!="function")throw new Sh("`obj` must be an object or a function`");if(typeof i!="string"&&typeof i!="symbol")throw new Sh("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Sh("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Sh("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Sh("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Sh("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,w=!!nA&&nA(t,i);if(rA)rA(t,i,{configurable:d===null&&w?w.configurable:!d,enumerable:c===null&&w?w.enumerable:!c,value:a,writable:f===null&&w?w.writable:!f});else if(l||!c&&!f&&!d)t[i]=a;else throw new o$("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Zx=t2,$3=function(){return!!Zx};$3.hasArrayLengthDefineBug=function(){if(!Zx)return null;try{return Zx([],"length",{value:1}).length!==1}catch{return!0}};var i2=$3,s$=Yb,a$=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",l$=Object.prototype.toString,u$=Array.prototype.concat,iA=n2,c$=function(e){return typeof e=="function"&&l$.call(e)==="[object Function]"},U3=i2(),h$=function(e,t,i,a){if(t in e){if(a===!0){if(e[t]===i)return}else if(!c$(a)||!a())return}U3?iA(e,t,i,!0):iA(e,t,i)},V3=function(e,t){var i=arguments.length>2?arguments[2]:{},a=s$(t);a$&&(a=u$.call(a,Object.getOwnPropertySymbols(t)));for(var c=0;c<a.length;c+=1)h$(e,a[c],t[a[c]],i[a[c]])};V3.supportsDescriptors=!!U3;var kc=V3,G3={exports:{}},f$=ka,oA=n2,d$=i2(),sA=r2,aA=Iu,p$=f$("%Math.floor%"),m$=function(t,i){if(typeof t!="function")throw new aA("`fn` is not a function");if(typeof i!="number"||i<0||i>4294967295||p$(i)!==i)throw new aA("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],c=!0,f=!0;if("length"in t&&sA){var d=sA(t,"length");d&&!d.configurable&&(c=!1),d&&!d.writable&&(f=!1)}return(c||f||!a)&&(d$?oA(t,"length",i,!0,!0):oA(t,"length",i)),t};(function(e){var t=e2,i=ka,a=m$,c=Iu,f=i("%Function.prototype.apply%"),d=i("%Function.prototype.call%"),l=i("%Reflect.apply%",!0)||t.call(d,f),w=t2,E=i("%Math.max%");e.exports=function(T){if(typeof T!="function")throw new c("a function is required");var R=l(t,d,arguments);return a(R,1+E(0,T.length-(arguments.length-1)),!0)};var C=function(){return l(t,f,arguments)};w?w(e.exports,"apply",{value:C}):e.exports.apply=C})(G3);var Tf=G3.exports,W3=ka,H3=Tf,g$=H3(W3("String.prototype.indexOf")),xs=function(t,i){var a=W3(t,!!i);return typeof a=="function"&&g$(t,".prototype.")>-1?H3(a):a},y$=Yb,Z3=j0(),X3=xs,lA=Object,v$=X3("Array.prototype.push"),uA=X3("Object.prototype.propertyIsEnumerable"),_$=Z3?Object.getOwnPropertySymbols:null,q3=function(t,i){if(t==null)throw new TypeError("target must be an object");var a=lA(t);if(arguments.length===1)return a;for(var c=1;c<arguments.length;++c){var f=lA(arguments[c]),d=y$(f),l=Z3&&(Object.getOwnPropertySymbols||_$);if(l)for(var w=l(f),E=0;E<w.length;++E){var C=w[E];uA(f,C)&&v$(d,C)}for(var b=0;b<d.length;++b){var T=d[b];if(uA(f,T)){var R=f[T];a[T]=R}}}return a},N_=q3,x$=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),i={},a=0;a<t.length;++a)i[t[a]]=t[a];var c=Object.assign({},i),f="";for(var d in c)f+=d;return e!==f},w$=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},K3=function(){return!Object.assign||x$()||w$()?N_:Object.assign},b$=kc,S$=K3,E$=function(){var t=S$();return b$(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},T$=kc,P$=Tf,A$=q3,J3=K3,I$=E$,C$=P$.apply(J3()),Y3=function(t,i){return C$(Object,arguments)};T$(Y3,{getPolyfill:J3,implementation:A$,shim:I$});var M$=Y3,$p=function(){return typeof(function(){}).name=="string"},pp=Object.getOwnPropertyDescriptor;if(pp)try{pp([],"length")}catch{pp=null}$p.functionsHaveConfigurableNames=function(){if(!$p()||!pp)return!1;var t=pp(function(){},"name");return!!t&&!!t.configurable};var k$=Function.prototype.bind;$p.boundFunctionsHaveNames=function(){return $p()&&typeof k$=="function"&&(function(){}).bind().name!==""};var O$=$p,cA=n2,F$=i2(),R$=O$.functionsHaveConfigurableNames(),j$=Iu,z$=function(t,i){if(typeof t!="function")throw new j$("`fn` is not a function");var a=arguments.length>2&&!!arguments[2];return(!a||R$)&&(F$?cA(t,"name",i,!0,!0):cA(t,"name",i)),t},L$=z$,B$=Iu,D$=Object,Q3=L$(function(){if(this==null||this!==D$(this))throw new B$("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),N$=Q3,$$=kc.supportsDescriptors,U$=Object.getOwnPropertyDescriptor,eO=function(){if($$&&/a/mig.flags==="gim"){var t=U$(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var i="",a={};if(Object.defineProperty(a,"hasIndices",{get:function(){i+="d"}}),Object.defineProperty(a,"sticky",{get:function(){i+="y"}}),i==="dy")return t.get}}return N$},V$=kc.supportsDescriptors,G$=eO,W$=Object.getOwnPropertyDescriptor,H$=Object.defineProperty,Z$=TypeError,hA=Object.getPrototypeOf,X$=/a/,q$=function(){if(!V$||!hA)throw new Z$("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=G$(),i=hA(X$),a=W$(i,"flags");return(!a||a.get!==t)&&H$(i,"flags",{configurable:!0,enumerable:!1,get:t}),t},K$=kc,J$=Tf,Y$=Q3,tO=eO,Q$=q$,rO=J$(tO());K$(rO,{getPolyfill:tO,implementation:Y$,shim:Q$});var eU=rO,Dg={exports:{}},tU=j0,Oc=function(){return tU()&&!!Symbol.toStringTag},rU=Oc(),nU=xs,Xx=nU("Object.prototype.toString"),z0=function(t){return rU&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Xx(t)==="[object Arguments]"},nO=function(t){return z0(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Xx(t)!=="[object Array]"&&Xx(t.callee)==="[object Function]"},iU=function(){return z0(arguments)}();z0.isLegacyArguments=nO;var iO=iU?z0:nO,o2=typeof Map=="function"&&Map.prototype,$_=Object.getOwnPropertyDescriptor&&o2?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Zy=o2&&$_&&typeof $_.get=="function"?$_.get:null,fA=o2&&Map.prototype.forEach,s2=typeof Set=="function"&&Set.prototype,U_=Object.getOwnPropertyDescriptor&&s2?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Xy=s2&&U_&&typeof U_.get=="function"?U_.get:null,dA=s2&&Set.prototype.forEach,oU=typeof WeakMap=="function"&&WeakMap.prototype,mp=oU?WeakMap.prototype.has:null,sU=typeof WeakSet=="function"&&WeakSet.prototype,gp=sU?WeakSet.prototype.has:null,aU=typeof WeakRef=="function"&&WeakRef.prototype,pA=aU?WeakRef.prototype.deref:null,lU=Boolean.prototype.valueOf,uU=Object.prototype.toString,cU=Function.prototype.toString,hU=String.prototype.match,a2=String.prototype.slice,uu=String.prototype.replace,fU=String.prototype.toUpperCase,mA=String.prototype.toLowerCase,oO=RegExp.prototype.test,gA=Array.prototype.concat,ya=Array.prototype.join,dU=Array.prototype.slice,yA=Math.floor,qx=typeof BigInt=="function"?BigInt.prototype.valueOf:null,V_=Object.getOwnPropertySymbols,Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,mf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Xi=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===mf||!0)?Symbol.toStringTag:null,sO=Object.prototype.propertyIsEnumerable,vA=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function _A(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||oO.call(/e/,t))return t;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var a=e<0?-yA(-e):yA(e);if(a!==e){var c=String(a),f=a2.call(t,c.length+1);return uu.call(c,i,"$&_")+"."+uu.call(uu.call(f,/([0-9]{3})/g,"$&_"),/_$/,"")}}return uu.call(t,i,"$&_")}var Jx=F3,xA=Jx.custom,wA=lO(xA)?xA:null,pU=function e(t,i,a,c){var f=i||{};if(nu(f,"quoteStyle")&&f.quoteStyle!=="single"&&f.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(nu(f,"maxStringLength")&&(typeof f.maxStringLength=="number"?f.maxStringLength<0&&f.maxStringLength!==1/0:f.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var d=nu(f,"customInspect")?f.customInspect:!0;if(typeof d!="boolean"&&d!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(nu(f,"indent")&&f.indent!==null&&f.indent!=="	"&&!(parseInt(f.indent,10)===f.indent&&f.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(nu(f,"numericSeparator")&&typeof f.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=f.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return cO(t,f);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var w=String(t);return l?_A(t,w):w}if(typeof t=="bigint"){var E=String(t)+"n";return l?_A(t,E):E}var C=typeof f.depth>"u"?5:f.depth;if(typeof a>"u"&&(a=0),a>=C&&C>0&&typeof t=="object")return Yx(t)?"[Array]":"[Object]";var b=OU(f,a);if(typeof c>"u")c=[];else if(uO(c,t)>=0)return"[Circular]";function T(ge,fe,ie){if(fe&&(c=dU.call(c),c.push(fe)),ie){var he={depth:f.depth};return nu(f,"quoteStyle")&&(he.quoteStyle=f.quoteStyle),e(ge,he,a+1,c)}return e(ge,f,a+1,c)}if(typeof t=="function"&&!bA(t)){var R=SU(t),L=dg(t,T);return"[Function"+(R?": "+R:" (anonymous)")+"]"+(L.length>0?" { "+ya.call(L,", ")+" }":"")}if(lO(t)){var j=mf?uu.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Kx.call(t);return typeof t=="object"&&!mf?jd(j):j}if(CU(t)){for(var le="<"+mA.call(String(t.nodeName)),K=t.attributes||[],Z=0;Z<K.length;Z++)le+=" "+K[Z].name+"="+aO(mU(K[Z].value),"double",f);return le+=">",t.childNodes&&t.childNodes.length&&(le+="..."),le+="</"+mA.call(String(t.nodeName))+">",le}if(Yx(t)){if(t.length===0)return"[]";var G=dg(t,T);return b&&!kU(G)?"["+Qx(G,b)+"]":"[ "+ya.call(G,", ")+" ]"}if(yU(t)){var se=dg(t,T);return!("cause"in Error.prototype)&&"cause"in t&&!sO.call(t,"cause")?"{ ["+String(t)+"] "+ya.call(gA.call("[cause]: "+T(t.cause),se),", ")+" }":se.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+ya.call(se,", ")+" }"}if(typeof t=="object"&&d){if(wA&&typeof t[wA]=="function"&&Jx)return Jx(t,{depth:C-a});if(d!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(EU(t)){var q=[];return fA&&fA.call(t,function(ge,fe){q.push(T(fe,t,!0)+" => "+T(ge,t))}),SA("Map",Zy.call(t),q,b)}if(AU(t)){var W=[];return dA&&dA.call(t,function(ge){W.push(T(ge,t))}),SA("Set",Xy.call(t),W,b)}if(TU(t))return G_("WeakMap");if(IU(t))return G_("WeakSet");if(PU(t))return G_("WeakRef");if(_U(t))return jd(T(Number(t)));if(wU(t))return jd(T(qx.call(t)));if(xU(t))return jd(lU.call(t));if(vU(t))return jd(T(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Ns)return"{ [object globalThis] }";if(!gU(t)&&!bA(t)){var P=dg(t,T),z=vA?vA(t)===Object.prototype:t instanceof Object||t.constructor===Object,D=t instanceof Object?"":"null prototype",ee=!z&&Xi&&Object(t)===t&&Xi in t?a2.call(Cu(t),8,-1):D?"Object":"",X=z||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ye=X+(ee||D?"["+ya.call(gA.call([],ee||[],D||[]),": ")+"] ":"");return P.length===0?ye+"{}":b?ye+"{"+Qx(P,b)+"}":ye+"{ "+ya.call(P,", ")+" }"}return String(t)};function aO(e,t,i){var a=(i.quoteStyle||t)==="double"?'"':"'";return a+e+a}function mU(e){return uu.call(String(e),/"/g,"&quot;")}function Yx(e){return Cu(e)==="[object Array]"&&(!Xi||!(typeof e=="object"&&Xi in e))}function gU(e){return Cu(e)==="[object Date]"&&(!Xi||!(typeof e=="object"&&Xi in e))}function bA(e){return Cu(e)==="[object RegExp]"&&(!Xi||!(typeof e=="object"&&Xi in e))}function yU(e){return Cu(e)==="[object Error]"&&(!Xi||!(typeof e=="object"&&Xi in e))}function vU(e){return Cu(e)==="[object String]"&&(!Xi||!(typeof e=="object"&&Xi in e))}function _U(e){return Cu(e)==="[object Number]"&&(!Xi||!(typeof e=="object"&&Xi in e))}function xU(e){return Cu(e)==="[object Boolean]"&&(!Xi||!(typeof e=="object"&&Xi in e))}function lO(e){if(mf)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Kx)return!1;try{return Kx.call(e),!0}catch{}return!1}function wU(e){if(!e||typeof e!="object"||!qx)return!1;try{return qx.call(e),!0}catch{}return!1}var bU=Object.prototype.hasOwnProperty||function(e){return e in this};function nu(e,t){return bU.call(e,t)}function Cu(e){return uU.call(e)}function SU(e){if(e.name)return e.name;var t=hU.call(cU.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function uO(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,a=e.length;i<a;i++)if(e[i]===t)return i;return-1}function EU(e){if(!Zy||!e||typeof e!="object")return!1;try{Zy.call(e);try{Xy.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function TU(e){if(!mp||!e||typeof e!="object")return!1;try{mp.call(e,mp);try{gp.call(e,gp)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function PU(e){if(!pA||!e||typeof e!="object")return!1;try{return pA.call(e),!0}catch{}return!1}function AU(e){if(!Xy||!e||typeof e!="object")return!1;try{Xy.call(e);try{Zy.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function IU(e){if(!gp||!e||typeof e!="object")return!1;try{gp.call(e,gp);try{mp.call(e,mp)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function CU(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function cO(e,t){if(e.length>t.maxStringLength){var i=e.length-t.maxStringLength,a="... "+i+" more character"+(i>1?"s":"");return cO(a2.call(e,0,t.maxStringLength),t)+a}var c=uu.call(uu.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,MU);return aO(c,"single",t)}function MU(e){var t=e.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return i?"\\"+i:"\\x"+(t<16?"0":"")+fU.call(t.toString(16))}function jd(e){return"Object("+e+")"}function G_(e){return e+" { ? }"}function SA(e,t,i,a){var c=a?Qx(i,a):ya.call(i,", ");return e+" ("+t+") {"+c+"}"}function kU(e){for(var t=0;t<e.length;t++)if(uO(e[t],`
`)>=0)return!1;return!0}function OU(e,t){var i;if(e.indent==="	")i="	";else if(typeof e.indent=="number"&&e.indent>0)i=ya.call(Array(e.indent+1)," ");else return null;return{base:i,prev:ya.call(Array(t+1),i)}}function Qx(e,t){if(e.length===0)return"";var i=`
`+t.prev+t.base;return i+ya.call(e,","+i)+`
`+t.prev}function dg(e,t){var i=Yx(e),a=[];if(i){a.length=e.length;for(var c=0;c<e.length;c++)a[c]=nu(e,c)?t(e[c],e):""}var f=typeof V_=="function"?V_(e):[],d;if(mf){d={};for(var l=0;l<f.length;l++)d["$"+f[l]]=f[l]}for(var w in e)nu(e,w)&&(i&&String(Number(w))===w&&w<e.length||mf&&d["$"+w]instanceof Symbol||(oO.call(/[^\w$]/,w)?a.push(t(w,e)+": "+t(e[w],e)):a.push(w+": "+t(e[w],e))));if(typeof V_=="function")for(var E=0;E<f.length;E++)sO.call(e,f[E])&&a.push("["+t(f[E])+"]: "+t(e[f[E]],e));return a}var hO=ka,Pf=xs,FU=pU,RU=Iu,pg=hO("%WeakMap%",!0),mg=hO("%Map%",!0),jU=Pf("WeakMap.prototype.get",!0),zU=Pf("WeakMap.prototype.set",!0),LU=Pf("WeakMap.prototype.has",!0),BU=Pf("Map.prototype.get",!0),DU=Pf("Map.prototype.set",!0),NU=Pf("Map.prototype.has",!0),l2=function(e,t){for(var i=e,a;(a=i.next)!==null;i=a)if(a.key===t)return i.next=a.next,a.next=e.next,e.next=a,a},$U=function(e,t){var i=l2(e,t);return i&&i.value},UU=function(e,t,i){var a=l2(e,t);a?a.value=i:e.next={key:t,next:e.next,value:i}},VU=function(e,t){return!!l2(e,t)},fO=function(){var t,i,a,c={assert:function(f){if(!c.has(f))throw new RU("Side channel does not contain "+FU(f))},get:function(f){if(pg&&f&&(typeof f=="object"||typeof f=="function")){if(t)return jU(t,f)}else if(mg){if(i)return BU(i,f)}else if(a)return $U(a,f)},has:function(f){if(pg&&f&&(typeof f=="object"||typeof f=="function")){if(t)return LU(t,f)}else if(mg){if(i)return NU(i,f)}else if(a)return VU(a,f);return!1},set:function(f,d){pg&&f&&(typeof f=="object"||typeof f=="function")?(t||(t=new pg),zU(t,f,d)):mg?(i||(i=new mg),DU(i,f,d)):(a||(a={key:{},next:null}),UU(a,f,d))}};return c},GU=D3,zd=fO(),tl=Iu,u2={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new tl("`O` is not an object");if(typeof t!="string")throw new tl("`slot` must be a string");if(zd.assert(e),!u2.has(e,t))throw new tl("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new tl("`O` is not an object");if(typeof t!="string")throw new tl("`slot` must be a string");var i=zd.get(e);return i&&i["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new tl("`O` is not an object");if(typeof t!="string")throw new tl("`slot` must be a string");var i=zd.get(e);return!!i&&GU(i,"$"+t)},set:function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new tl("`O` is not an object");if(typeof t!="string")throw new tl("`slot` must be a string");var a=zd.get(e);a||(a={},zd.set(e,a)),a["$"+t]=i}};Object.freeze&&Object.freeze(u2);var WU=u2,Ld=WU,HU=SyntaxError,EA=typeof StopIteration=="object"?StopIteration:null,ZU=function(t){if(!EA)throw new HU("this environment lacks StopIteration");Ld.set(t,"[[Done]]",!1);var i={next:function(){var c=Ld.get(this,"[[Iterator]]"),f=Ld.get(c,"[[Done]]");try{return{done:f,value:f?void 0:c.next()}}catch(d){if(Ld.set(c,"[[Done]]",!0),d!==EA)throw d;return{done:!0,value:void 0}}}};return Ld.set(i,"[[Iterator]]",t),i},W_,TA;function XU(){if(TA)return W_;TA=1;var e={}.toString;return W_=Array.isArray||function(t){return e.call(t)=="[object Array]"},W_}var qU=String.prototype.valueOf,KU=function(t){try{return qU.call(t),!0}catch{return!1}},JU=Object.prototype.toString,YU="[object String]",QU=Oc(),dO=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:QU?KU(t):JU.call(t)===YU},c2=typeof Map=="function"&&Map.prototype?Map:null,eV=typeof Set=="function"&&Set.prototype?Set:null,qy;c2||(qy=function(t){return!1});var pO=c2?Map.prototype.has:null,PA=eV?Set.prototype.has:null;!qy&&!pO&&(qy=function(t){return!1});var mO=qy||function(t){if(!t||typeof t!="object")return!1;try{if(pO.call(t),PA)try{PA.call(t)}catch{return!0}return t instanceof c2}catch{}return!1},tV=typeof Map=="function"&&Map.prototype?Map:null,h2=typeof Set=="function"&&Set.prototype?Set:null,Ky;h2||(Ky=function(t){return!1});var AA=tV?Map.prototype.has:null,gO=h2?Set.prototype.has:null;!Ky&&!gO&&(Ky=function(t){return!1});var yO=Ky||function(t){if(!t||typeof t!="object")return!1;try{if(gO.call(t),AA)try{AA.call(t)}catch{return!0}return t instanceof h2}catch{}return!1},IA=iO,CA=ZU;if(Qb()||j0()){var H_=Symbol.iterator;Dg.exports=function(t){if(t!=null&&typeof t[H_]<"u")return t[H_]();if(IA(t))return Array.prototype[H_].call(t)}}else{var rV=XU(),nV=dO,MA=ka,iV=MA("%Map%",!0),oV=MA("%Set%",!0),zs=xs,kA=zs("Array.prototype.push"),OA=zs("String.prototype.charCodeAt"),sV=zs("String.prototype.slice"),aV=function(t,i){var a=t.length;if(i+1>=a)return i+1;var c=OA(t,i);if(c<55296||c>56319)return i+1;var f=OA(t,i+1);return f<56320||f>57343?i+1:i+2},Z_=function(t){var i=0;return{next:function(){var c=i>=t.length,f;return c||(f=t[i],i+=1),{done:c,value:f}}}},FA=function(t,i){if(rV(t)||IA(t))return Z_(t);if(nV(t)){var a=0;return{next:function(){var f=aV(t,a),d=sV(t,a,f);return a=f,{done:f>t.length,value:d}}}}if(i&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()};if(!iV&&!oV)Dg.exports=function(t){if(t!=null)return FA(t,!0)};else{var lV=mO,uV=yO,RA=zs("Map.prototype.forEach",!0),jA=zs("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var zA=zs("Map.prototype.iterator",!0),LA=zs("Set.prototype.iterator",!0);var BA=zs("Map.prototype.@@iterator",!0)||zs("Map.prototype._es6-shim iterator_",!0),DA=zs("Set.prototype.@@iterator",!0)||zs("Set.prototype._es6-shim iterator_",!0),cV=function(t){if(lV(t)){if(zA)return CA(zA(t));if(BA)return BA(t);if(RA){var i=[];return RA(t,function(c,f){kA(i,[f,c])}),Z_(i)}}if(uV(t)){if(LA)return CA(LA(t));if(DA)return DA(t);if(jA){var a=[];return jA(t,function(c){kA(a,c)}),Z_(a)}}};Dg.exports=function(t){return cV(t)||FA(t)}}}var hV=Dg.exports,NA=function(e){return e!==e},vO=function(t,i){return t===0&&i===0?1/t===1/i:!!(t===i||NA(t)&&NA(i))},fV=vO,_O=function(){return typeof Object.is=="function"?Object.is:fV},dV=_O,pV=kc,mV=function(){var t=dV();return pV(Object,{is:t},{is:function(){return Object.is!==t}}),t},gV=kc,yV=Tf,vV=vO,xO=_O,_V=mV,wO=yV(xO(),Object);gV(wO,{getPolyfill:xO,implementation:vV,shim:_V});var xV=wO,wV={}.toString,bV=Array.isArray||function(e){return wV.call(e)=="[object Array]"},SV=Tf,bO=xs,EV=ka,ew=EV("%ArrayBuffer%",!0),Ng=bO("ArrayBuffer.prototype.byteLength",!0),TV=bO("Object.prototype.toString"),$A=!!ew&&!Ng&&new ew(0).slice,UA=!!$A&&SV($A),SO=Ng||UA?function(t){if(!t||typeof t!="object")return!1;try{return Ng?Ng(t):UA(t,0),!0}catch{return!1}}:ew?function(t){return TV(t)==="[object ArrayBuffer]"}:function(t){return!1},PV=Date.prototype.getDay,AV=function(t){try{return PV.call(t),!0}catch{return!1}},IV=Object.prototype.toString,CV="[object Date]",MV=Oc(),kV=function(t){return typeof t!="object"||t===null?!1:MV?AV(t):IV.call(t)===CV},tw=xs,EO=Oc(),TO,PO,rw,nw;if(EO){TO=tw("Object.prototype.hasOwnProperty"),PO=tw("RegExp.prototype.exec"),rw={};var X_=function(){throw rw};nw={toString:X_,valueOf:X_},typeof Symbol.toPrimitive=="symbol"&&(nw[Symbol.toPrimitive]=X_)}var OV=tw("Object.prototype.toString"),FV=Object.getOwnPropertyDescriptor,RV="[object RegExp]",jV=EO?function(t){if(!t||typeof t!="object")return!1;var i=FV(t,"lastIndex"),a=i&&TO(i,"value");if(!a)return!1;try{PO(t,nw)}catch(c){return c===rw}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:OV(t)===RV},zV=xs,VA=zV("SharedArrayBuffer.prototype.byteLength",!0),LV=VA?function(t){if(!t||typeof t!="object")return!1;try{return VA(t),!0}catch{return!1}}:function(t){return!1},BV=Number.prototype.toString,DV=function(t){try{return BV.call(t),!0}catch{return!1}},NV=Object.prototype.toString,$V="[object Number]",UV=Oc(),VV=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:UV?DV(t):NV.call(t)===$V},AO=xs,GV=AO("Boolean.prototype.toString"),WV=AO("Object.prototype.toString"),HV=function(t){try{return GV(t),!0}catch{return!1}},ZV="[object Boolean]",XV=Oc(),qV=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:XV&&Symbol.toStringTag in t?HV(t):WV(t)===ZV},iw={exports:{}},KV=Object.prototype.toString,JV=Qb();if(JV){var YV=Symbol.prototype.toString,QV=/^Symbol\(.*\)$/,e7=function(t){return typeof t.valueOf()!="symbol"?!1:QV.test(YV.call(t))};iw.exports=function(t){if(typeof t=="symbol")return!0;if(KV.call(t)!=="[object Symbol]")return!1;try{return e7(t)}catch{return!1}}}else iw.exports=function(t){return!1};var t7=iw.exports,ow={exports:{}},GA=typeof BigInt<"u"&&BigInt,r7=function(){return typeof GA=="function"&&typeof BigInt=="function"&&typeof GA(42)=="bigint"&&typeof BigInt(42)=="bigint"},n7=r7();if(n7){var i7=BigInt.prototype.valueOf,o7=function(t){try{return i7.call(t),!0}catch{}return!1};ow.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:o7(t)}}else ow.exports=function(t){return!1};var s7=ow.exports,a7=dO,l7=VV,u7=qV,c7=t7,h7=s7,f7=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(a7(t))return"String";if(l7(t))return"Number";if(u7(t))return"Boolean";if(c7(t))return"Symbol";if(h7(t))return"BigInt"},Jy=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,WA=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,Yy;Jy||(Yy=function(t){return!1});var sw=Jy?Jy.prototype.has:null,q_=WA?WA.prototype.has:null;!Yy&&!sw&&(Yy=function(t){return!1});var d7=Yy||function(t){if(!t||typeof t!="object")return!1;try{if(sw.call(t,sw),q_)try{q_.call(t,q_)}catch{return!0}return t instanceof Jy}catch{}return!1},aw={exports:{}},p7=ka,IO=xs,m7=p7("%WeakSet%",!0),K_=IO("WeakSet.prototype.has",!0);if(K_){var J_=IO("WeakMap.prototype.has",!0);aw.exports=function(t){if(!t||typeof t!="object")return!1;try{if(K_(t,K_),J_)try{J_(t,J_)}catch{return!0}return t instanceof m7}catch{}return!1}}else aw.exports=function(t){return!1};var g7=aw.exports,y7=mO,v7=yO,_7=d7,x7=g7,w7=function(t){if(t&&typeof t=="object"){if(y7(t))return"Map";if(v7(t))return"Set";if(_7(t))return"WeakMap";if(x7(t))return"WeakSet"}return!1},CO=Function.prototype.toString,Uh=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,lw,$g;if(typeof Uh=="function"&&typeof Object.defineProperty=="function")try{lw=Object.defineProperty({},"length",{get:function(){throw $g}}),$g={},Uh(function(){throw 42},null,lw)}catch(e){e!==$g&&(Uh=null)}else Uh=null;var b7=/^\s*class\b/,uw=function(t){try{var i=CO.call(t);return b7.test(i)}catch{return!1}},Y_=function(t){try{return uw(t)?!1:(CO.call(t),!0)}catch{return!1}},Ug=Object.prototype.toString,S7="[object Object]",E7="[object Function]",T7="[object GeneratorFunction]",P7="[object HTMLAllCollection]",A7="[object HTML document.all class]",I7="[object HTMLCollection]",C7=typeof Symbol=="function"&&!!Symbol.toStringTag,M7=!(0 in[,]),cw=function(){return!1};if(typeof document=="object"){var k7=document.all;Ug.call(k7)===Ug.call(document.all)&&(cw=function(t){if((M7||!t)&&(typeof t>"u"||typeof t=="object"))try{var i=Ug.call(t);return(i===P7||i===A7||i===I7||i===S7)&&t("")==null}catch{}return!1})}var O7=Uh?function(t){if(cw(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Uh(t,null,lw)}catch(i){if(i!==$g)return!1}return!uw(t)&&Y_(t)}:function(t){if(cw(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(C7)return Y_(t);if(uw(t))return!1;var i=Ug.call(t);return i!==E7&&i!==T7&&!/^\[object HTML/.test(i)?!1:Y_(t)},F7=O7,R7=Object.prototype.toString,MO=Object.prototype.hasOwnProperty,j7=function(t,i,a){for(var c=0,f=t.length;c<f;c++)MO.call(t,c)&&(a==null?i(t[c],c,t):i.call(a,t[c],c,t))},z7=function(t,i,a){for(var c=0,f=t.length;c<f;c++)a==null?i(t.charAt(c),c,t):i.call(a,t.charAt(c),c,t)},L7=function(t,i,a){for(var c in t)MO.call(t,c)&&(a==null?i(t[c],c,t):i.call(a,t[c],c,t))},B7=function(t,i,a){if(!F7(i))throw new TypeError("iterator must be a function");var c;arguments.length>=3&&(c=a),R7.call(t)==="[object Array]"?j7(t,i,c):typeof t=="string"?z7(t,i,c):L7(t,i,c)},D7=B7,N7=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Q_=N7,$7=typeof globalThis>"u"?Ns:globalThis,U7=function(){for(var t=[],i=0;i<Q_.length;i++)typeof $7[Q_[i]]=="function"&&(t[t.length]=Q_[i]);return t},Qy=D7,V7=U7,HA=Tf,f2=xs,Vg=r2,G7=f2("Object.prototype.toString"),kO=Oc(),ZA=typeof globalThis>"u"?Ns:globalThis,hw=V7(),d2=f2("String.prototype.slice"),e1=Object.getPrototypeOf,W7=f2("Array.prototype.indexOf",!0)||function(t,i){for(var a=0;a<t.length;a+=1)if(t[a]===i)return a;return-1},e0={__proto__:null};kO&&Vg&&e1?Qy(hw,function(e){var t=new ZA[e];if(Symbol.toStringTag in t){var i=e1(t),a=Vg(i,Symbol.toStringTag);if(!a){var c=e1(i);a=Vg(c,Symbol.toStringTag)}e0["$"+e]=HA(a.get)}}):Qy(hw,function(e){var t=new ZA[e],i=t.slice||t.set;i&&(e0["$"+e]=HA(i))});var H7=function(t){var i=!1;return Qy(e0,function(a,c){if(!i)try{"$"+a(t)===c&&(i=d2(c,1))}catch{}}),i},Z7=function(t){var i=!1;return Qy(e0,function(a,c){if(!i)try{a(t),i=d2(c,1)}catch{}}),i},X7=function(t){if(!t||typeof t!="object")return!1;if(!kO){var i=d2(G7(t),8,-1);return W7(hw,i)>-1?i:i!=="Object"?!1:Z7(t)}return Vg?H7(t):null},q7=xs,XA=q7("ArrayBuffer.prototype.byteLength",!0),K7=SO,J7=function(t){return K7(t)?XA?XA(t):t.byteLength:NaN},OO=M$,Oa=xs,qA=eU,Y7=ka,gf=hV,Q7=fO,KA=xV,JA=iO,YA=bV,QA=SO,eI=kV,tI=jV,rI=LV,nI=Yb,iI=f7,oI=w7,sI=X7,aI=J7,lI=Oa("SharedArrayBuffer.prototype.byteLength",!0),uI=Oa("Date.prototype.getTime"),t1=Object.getPrototypeOf,cI=Oa("Object.prototype.toString"),t0=Y7("%Set%",!0),fw=Oa("Map.prototype.has",!0),r0=Oa("Map.prototype.get",!0),hI=Oa("Map.prototype.size",!0),n0=Oa("Set.prototype.add",!0),FO=Oa("Set.prototype.delete",!0),i0=Oa("Set.prototype.has",!0),Gg=Oa("Set.prototype.size",!0);function fI(e,t,i,a){for(var c=gf(e),f;(f=c.next())&&!f.done;)if(Hs(t,f.value,i,a))return FO(e,f.value),!0;return!1}function RO(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function e9(e,t,i,a,c,f){var d=RO(i);if(d!=null)return d;var l=r0(t,d),w=OO({},c,{strict:!1});return typeof l>"u"&&!fw(t,d)||!Hs(a,l,w,f)?!1:!fw(e,d)&&Hs(a,l,w,f)}function t9(e,t,i){var a=RO(i);return a??(i0(t,a)&&!i0(e,a))}function dI(e,t,i,a,c,f){for(var d=gf(e),l,w;(l=d.next())&&!l.done;)if(w=l.value,Hs(i,w,c,f)&&Hs(a,r0(t,w),c,f))return FO(e,w),!0;return!1}function Hs(e,t,i,a){var c=i||{};if(c.strict?KA(e,t):e===t)return!0;var f=iI(e),d=iI(t);if(f!==d)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return c.strict?KA(e,t):e==t;var l=a.has(e),w=a.has(t),E;if(l&&w){if(a.get(e)===a.get(t))return!0}else E={};return l||a.set(e,E),w||a.set(t,E),i9(e,t,c,a)}function pI(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function r9(e,t,i,a){if(Gg(e)!==Gg(t))return!1;for(var c=gf(e),f=gf(t),d,l,w;(d=c.next())&&!d.done;)if(d.value&&typeof d.value=="object")w||(w=new t0),n0(w,d.value);else if(!i0(t,d.value)){if(i.strict||!t9(e,t,d.value))return!1;w||(w=new t0),n0(w,d.value)}if(w){for(;(l=f.next())&&!l.done;)if(l.value&&typeof l.value=="object"){if(!fI(w,l.value,i.strict,a))return!1}else if(!i.strict&&!i0(e,l.value)&&!fI(w,l.value,i.strict,a))return!1;return Gg(w)===0}return!0}function n9(e,t,i,a){if(hI(e)!==hI(t))return!1;for(var c=gf(e),f=gf(t),d,l,w,E,C,b;(d=c.next())&&!d.done;)if(E=d.value[0],C=d.value[1],E&&typeof E=="object")w||(w=new t0),n0(w,E);else if(b=r0(t,E),typeof b>"u"&&!fw(t,E)||!Hs(C,b,i,a)){if(i.strict||!e9(e,t,E,C,i,a))return!1;w||(w=new t0),n0(w,E)}if(w){for(;(l=f.next())&&!l.done;)if(E=l.value[0],b=l.value[1],E&&typeof E=="object"){if(!dI(w,e,E,b,i,a))return!1}else if(!i.strict&&(!e.has(E)||!Hs(r0(e,E),b,i,a))&&!dI(w,e,E,b,OO({},i,{strict:!1}),a))return!1;return Gg(w)===0}return!0}function i9(e,t,i,a){var c,f;if(typeof e!=typeof t||e==null||t==null||cI(e)!==cI(t)||JA(e)!==JA(t))return!1;var d=YA(e),l=YA(t);if(d!==l)return!1;var w=e instanceof Error,E=t instanceof Error;if(w!==E||(w||E)&&(e.name!==t.name||e.message!==t.message))return!1;var C=tI(e),b=tI(t);if(C!==b||(C||b)&&(e.source!==t.source||qA(e)!==qA(t)))return!1;var T=eI(e),R=eI(t);if(T!==R||(T||R)&&uI(e)!==uI(t)||i.strict&&t1&&t1(e)!==t1(t))return!1;var L=sI(e),j=sI(t);if(L!==j)return!1;if(L||j){if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}var le=pI(e),K=pI(t);if(le!==K)return!1;if(le||K){if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}var Z=QA(e),G=QA(t);if(Z!==G)return!1;if(Z||G)return aI(e)!==aI(t)?!1:typeof Uint8Array=="function"&&Hs(new Uint8Array(e),new Uint8Array(t),i,a);var se=rI(e),q=rI(t);if(se!==q)return!1;if(se||q)return lI(e)!==lI(t)?!1:typeof Uint8Array=="function"&&Hs(new Uint8Array(e),new Uint8Array(t),i,a);if(typeof e!=typeof t)return!1;var W=nI(e),P=nI(t);if(W.length!==P.length)return!1;for(W.sort(),P.sort(),c=W.length-1;c>=0;c--)if(W[c]!=P[c])return!1;for(c=W.length-1;c>=0;c--)if(f=W[c],!Hs(e[f],t[f],i,a))return!1;var z=oI(e),D=oI(t);return z!==D?!1:z==="Set"||D==="Set"?r9(e,t,i,a):z==="Map"?n9(e,t,i,a):!0}var o9=function(t,i,a){return Hs(t,i,a,Q7())};const s9=vf(o9);var a9=Object.defineProperty,rn=(e,t)=>a9(e,"name",{value:t,configurable:!0}),l9=class{constructor(t){this.direction=!1,this.compareProperties=!0;var i,a,c;this.precision=10**-((i=t==null?void 0:t.precision)!=null?i:17),this.direction=(a=t==null?void 0:t.direction)!=null?a:!1,this.compareProperties=(c=t==null?void 0:t.compareProperties)!=null?c:!0}compare(t,i){if(t.type!==i.type||!Jd(t,i))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,i.coordinates);case"LineString":return this.compareLine(t.coordinates,i.coordinates);case"Polygon":return this.comparePolygon(t,i);case"GeometryCollection":return this.compareGeometryCollection(t,i);case"Feature":return this.compareFeature(t,i);case"FeatureCollection":return this.compareFeatureCollection(t,i);default:if(t.type.startsWith("Multi")){const a=dw(t),c=dw(i);return a.every(f=>c.some(d=>this.compare(f,d)))}}return!1}compareCoord(t,i){return t.length===i.length&&t.every((a,c)=>Math.abs(a-i[c])<this.precision)}compareLine(t,i,a=0,c=!1){if(!Jd(t,i))return!1;const f=t;let d=i;if(c&&!this.compareCoord(f[0],d[0])){const w=this.fixStartIndex(d,f);if(w)d=w;else return!1}const l=this.compareCoord(f[a],d[a]);return this.direction||l?this.comparePath(f,d):this.compareCoord(f[a],d[d.length-(1+a)])?this.comparePath(f.slice().reverse(),d):!1}fixStartIndex(t,i){let a,c=-1;for(let f=0;f<t.length;f++)if(this.compareCoord(t[f],i[0])){c=f;break}return c>=0&&(a=[].concat(t.slice(c,t.length),t.slice(1,c+1))),a}comparePath(t,i){return t.every((a,c)=>this.compareCoord(a,i[c]))}comparePolygon(t,i){if(this.compareLine(t.coordinates[0],i.coordinates[0],1,!0)){const a=t.coordinates.slice(1,t.coordinates.length),c=i.coordinates.slice(1,i.coordinates.length);return a.every(f=>c.some(d=>this.compareLine(f,d,1,!0)))}return!1}compareGeometryCollection(t,i){return Jd(t.geometries,i.geometries)&&this.compareBBox(t,i)&&t.geometries.every((a,c)=>this.compare(a,i.geometries[c]))}compareFeature(t,i){return t.id===i.id&&(this.compareProperties?s9(t.properties,i.properties):!0)&&this.compareBBox(t,i)&&this.compare(t.geometry,i.geometry)}compareFeatureCollection(t,i){return Jd(t.features,i.features)&&this.compareBBox(t,i)&&t.features.every((a,c)=>this.compare(a,i.features[c]))}compareBBox(t,i){return!t.bbox&&!i.bbox||(t.bbox&&i.bbox?this.compareCoord(t.bbox,i.bbox):!1)}};rn(l9,"GeojsonEquality");function Jd(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}rn(Jd,"sameLength");function dw(e){return e.coordinates.map(t=>({type:e.type.replace("Multi",""),coordinates:t}))}rn(dw,"explode");var Do=63710088e-1,jO={centimeters:Do*100,centimetres:Do*100,degrees:360/(2*Math.PI),feet:Do*3.28084,inches:Do*39.37,kilometers:Do/1e3,kilometres:Do/1e3,meters:Do,metres:Do,miles:Do/1609.344,millimeters:Do*1e3,millimetres:Do*1e3,nauticalmiles:Do/1852,radians:1,yards:Do*1.0936},mI={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ca(e,t,i={}){const a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}rn(Ca,"feature");function u9(e,t,i={}){switch(e){case"Point":return va(t).geometry;case"LineString":return ll(t).geometry;case"Polygon":return L0(t).geometry;case"MultiPoint":return LO(t).geometry;case"MultiLineString":return zO(t).geometry;case"MultiPolygon":return BO(t).geometry;default:throw new Error(e+" is invalid")}}rn(u9,"geometry");function va(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!yf(e[0])||!yf(e[1]))throw new Error("coordinates must contain numbers");return Ca({type:"Point",coordinates:e},t,i)}rn(va,"point");function c9(e,t,i={}){return B0(e.map(a=>va(a,t)),i)}rn(c9,"points");function L0(e,t,i={}){for(const c of e){if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(c[c.length-1].length!==c[0].length)throw new Error("First and last Position are not equivalent.");for(let f=0;f<c[c.length-1].length;f++)if(c[c.length-1][f]!==c[0][f])throw new Error("First and last Position are not equivalent.")}return Ca({type:"Polygon",coordinates:e},t,i)}rn(L0,"polygon");function h9(e,t,i={}){return B0(e.map(a=>L0(a,t)),i)}rn(h9,"polygons");function ll(e,t,i={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Ca({type:"LineString",coordinates:e},t,i)}rn(ll,"lineString");function f9(e,t,i={}){return B0(e.map(a=>ll(a,t)),i)}rn(f9,"lineStrings");function B0(e,t={}){const i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=e,i}rn(B0,"featureCollection");function zO(e,t,i={}){return Ca({type:"MultiLineString",coordinates:e},t,i)}rn(zO,"multiLineString");function LO(e,t,i={}){return Ca({type:"MultiPoint",coordinates:e},t,i)}rn(LO,"multiPoint");function BO(e,t,i={}){return Ca({type:"MultiPolygon",coordinates:e},t,i)}rn(BO,"multiPolygon");function d9(e,t,i={}){return Ca({type:"GeometryCollection",geometries:e},t,i)}rn(d9,"geometryCollection");function p9(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const i=Math.pow(10,t||0);return Math.round(e*i)/i}rn(p9,"round");function DO(e,t="kilometers"){const i=jO[t];if(!i)throw new Error(t+" units is invalid");return e*i}rn(DO,"radiansToLength");function p2(e,t="kilometers"){const i=jO[t];if(!i)throw new Error(t+" units is invalid");return e/i}rn(p2,"lengthToRadians");function m9(e,t){return NO(p2(e,t))}rn(m9,"lengthToDegrees");function g9(e){let t=e%360;return t<0&&(t+=360),t}rn(g9,"bearingToAzimuth");function NO(e){return e%(2*Math.PI)*180/Math.PI}rn(NO,"radiansToDegrees");function y9(e){return e%360*Math.PI/180}rn(y9,"degreesToRadians");function v9(e,t="kilometers",i="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return DO(p2(e,t),i)}rn(v9,"convertLength");function _9(e,t="meters",i="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");const a=mI[t];if(!a)throw new Error("invalid original units");const c=mI[i];if(!c)throw new Error("invalid final units");return e/a*c}rn(_9,"convertArea");function yf(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}rn(yf,"isNumber");function m2(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}rn(m2,"isObject");function x9(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!yf(t))throw new Error("bbox must only contain numbers")})}rn(x9,"validateBBox");function w9(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}rn(w9,"validateId");var b9=Object.defineProperty,Mu=(e,t)=>b9(e,"name",{value:t,configurable:!0});function $O(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}Mu($O,"getCoord");function S9(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}Mu(S9,"getCoords");function UO(e){if(e.length>1&&yf(e[0])&&yf(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return UO(e[0]);throw new Error("coordinates must only contain numbers")}Mu(UO,"containsNumber");function E9(e,t,i){if(!t||!i)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.type)}Mu(E9,"geojsonType");function T9(e,t,i){if(!e)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.geometry.type)}Mu(T9,"featureOf");function P9(e,t,i){if(!e)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+i+", FeatureCollection required");for(const a of e.features){if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!a.geometry||a.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+a.geometry.type)}}Mu(P9,"collectionOf");function VO(e){return e.type==="Feature"?e.geometry:e}Mu(VO,"getGeom");function A9(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}Mu(A9,"getType");var I9=Object.defineProperty,ki=(e,t)=>I9(e,"name",{value:t,configurable:!0});function Af(e,t,i){if(e!==null)for(var a,c,f,d,l,w,E,C=0,b=0,T,R=e.type,L=R==="FeatureCollection",j=R==="Feature",le=L?e.features.length:1,K=0;K<le;K++){E=L?e.features[K].geometry:j?e.geometry:e,T=E?E.type==="GeometryCollection":!1,l=T?E.geometries.length:1;for(var Z=0;Z<l;Z++){var G=0,se=0;if(d=T?E.geometries[Z]:E,d!==null){w=d.coordinates;var q=d.type;switch(C=i&&(q==="Polygon"||q==="MultiPolygon")?1:0,q){case null:break;case"Point":if(t(w,b,K,G,se)===!1)return!1;b++,G++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(t(w[a],b,K,G,se)===!1)return!1;b++,q==="MultiPoint"&&G++}q==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(c=0;c<w[a].length-C;c++){if(t(w[a][c],b,K,G,se)===!1)return!1;b++}q==="MultiLineString"&&G++,q==="Polygon"&&se++}q==="Polygon"&&G++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(se=0,c=0;c<w[a].length;c++){for(f=0;f<w[a][c].length-C;f++){if(t(w[a][c][f],b,K,G,se)===!1)return!1;b++}se++}G++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(Af(d.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}ki(Af,"coordEach");function C9(e,t,i,a){var c=i;return Af(e,function(f,d,l,w,E){d===0&&i===void 0?c=f:c=t(c,f,d,l,w,E)},a),c}ki(C9,"coordReduce");function GO(e,t){var i;switch(e.type){case"FeatureCollection":for(i=0;i<e.features.length&&t(e.features[i].properties,i)!==!1;i++);break;case"Feature":t(e.properties,0);break}}ki(GO,"propEach");function M9(e,t,i){var a=i;return GO(e,function(c,f){f===0&&i===void 0?a=c:a=t(a,c,f)}),a}ki(M9,"propReduce");function WO(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var i=0;i<e.features.length&&t(e.features[i],i)!==!1;i++);}ki(WO,"featureEach");function k9(e,t,i){var a=i;return WO(e,function(c,f){f===0&&i===void 0?a=c:a=t(a,c,f)}),a}ki(k9,"featureReduce");function O9(e){var t=[];return Af(e,function(i){t.push(i)}),t}ki(O9,"coordAll");function g2(e,t){var i,a,c,f,d,l,w,E,C,b,T=0,R=e.type==="FeatureCollection",L=e.type==="Feature",j=R?e.features.length:1;for(i=0;i<j;i++){for(l=R?e.features[i].geometry:L?e.geometry:e,E=R?e.features[i].properties:L?e.properties:{},C=R?e.features[i].bbox:L?e.bbox:void 0,b=R?e.features[i].id:L?e.id:void 0,w=l?l.type==="GeometryCollection":!1,d=w?l.geometries.length:1,c=0;c<d;c++){if(f=w?l.geometries[c]:l,f===null){if(t(null,T,E,C,b)===!1)return!1;continue}switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(f,T,E,C,b)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<f.geometries.length;a++)if(t(f.geometries[a],T,E,C,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}ki(g2,"geomEach");function F9(e,t,i){var a=i;return g2(e,function(c,f,d,l,w){f===0&&i===void 0?a=c:a=t(a,c,f,d,l,w)}),a}ki(F9,"geomReduce");function D0(e,t){g2(e,function(i,a,c,f,d){var l=i===null?null:i.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(Ca(i,c,{bbox:f,id:d}),a,0)===!1?!1:void 0}var w;switch(l){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon";break}for(var E=0;E<i.coordinates.length;E++){var C=i.coordinates[E],b={type:w,coordinates:C};if(t(Ca(b,c),a,E)===!1)return!1}})}ki(D0,"flattenEach");function R9(e,t,i){var a=i;return D0(e,function(c,f,d){f===0&&d===0&&i===void 0?a=c:a=t(a,c,f,d)}),a}ki(R9,"flattenReduce");function HO(e,t){D0(e,function(i,a,c){var f=0;if(i.geometry){var d=i.geometry.type;if(!(d==="Point"||d==="MultiPoint")){var l,w=0,E=0,C=0;if(Af(i,function(b,T,R,L,j){if(l===void 0||a>w||L>E||j>C){l=b,w=a,E=L,C=j,f=0;return}var le=ll([l,b],i.properties);if(t(le,a,c,j,f)===!1)return!1;f++,l=b})===!1)return!1}}})}ki(HO,"segmentEach");function j9(e,t,i){var a=i,c=!1;return HO(e,function(f,d,l,w,E){c===!1&&i===void 0?a=f:a=t(a,f,d,l,w,E),c=!0}),a}ki(j9,"segmentReduce");function ZO(e,t){if(!e)throw new Error("geojson is required");D0(e,function(i,a,c){if(i.geometry!==null){var f=i.geometry.type,d=i.geometry.coordinates;switch(f){case"LineString":if(t(i,a,c,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<d.length;l++)if(t(ll(d[l],i.properties),a,c,l)===!1)return!1;break}}})}ki(ZO,"lineEach");function z9(e,t,i){var a=i;return ZO(e,function(c,f,d,l){f===0&&i===void 0?a=c:a=t(a,c,f,d,l)}),a}ki(z9,"lineReduce");function L9(e,t){if(t=t||{},!m2(t))throw new Error("options is invalid");var i=t.featureIndex||0,a=t.multiFeatureIndex||0,c=t.geometryIndex||0,f=t.segmentIndex||0,d=t.properties,l;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),d=d||e.features[i].properties,l=e.features[i].geometry;break;case"Feature":d=d||e.properties,l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var w=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=w.length+f-1),ll([w[f],w[f+1]],d,t);case"Polygon":return c<0&&(c=w.length+c),f<0&&(f=w[c].length+f-1),ll([w[c][f],w[c][f+1]],d,t);case"MultiLineString":return a<0&&(a=w.length+a),f<0&&(f=w[a].length+f-1),ll([w[a][f],w[a][f+1]],d,t);case"MultiPolygon":return a<0&&(a=w.length+a),c<0&&(c=w[a].length+c),f<0&&(f=w[a][c].length-f-1),ll([w[a][c][f],w[a][c][f+1]],d,t)}throw new Error("geojson is invalid")}ki(L9,"findSegment");function B9(e,t){if(t=t||{},!m2(t))throw new Error("options is invalid");var i=t.featureIndex||0,a=t.multiFeatureIndex||0,c=t.geometryIndex||0,f=t.coordIndex||0,d=t.properties,l;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),d=d||e.features[i].properties,l=e.features[i].geometry;break;case"Feature":d=d||e.properties,l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var w=l.coordinates;switch(l.type){case"Point":return va(w,d,t);case"MultiPoint":return a<0&&(a=w.length+a),va(w[a],d,t);case"LineString":return f<0&&(f=w.length+f),va(w[f],d,t);case"Polygon":return c<0&&(c=w.length+c),f<0&&(f=w[c].length+f),va(w[c][f],d,t);case"MultiLineString":return a<0&&(a=w.length+a),f<0&&(f=w[a].length+f),va(w[a][f],d,t);case"MultiPolygon":return a<0&&(a=w.length+a),c<0&&(c=w[a].length+c),f<0&&(f=w[a][c].length-f),va(w[a][c][f],d,t)}throw new Error("geojson is invalid")}ki(B9,"findPoint");function D9(e,t){var i=0,a=0,c=0,f=0,d=0,l=0,w=0,E=0,C=null,b=null,T=e[0],R=e[1],L=t.length;for(i;i<L;i++){a=0;var j=t[i].length-1,le=t[i];if(C=le[0],C[0]!==le[j][0]&&C[1]!==le[j][1])throw new Error("First and last coordinates in a ring must be the same");for(d=C[0]-T,l=C[1]-R,a;a<j;a++){if(b=le[a+1],E=b[1]-R,l<0&&E<0||l>0&&E>0){C=b,l=E,d=C[0]-T;continue}if(w=b[0]-e[0],E>0&&l<=0){if(f=d*E-w*l,f>0)c=c+1;else if(f===0)return 0}else if(l>0&&E<=0){if(f=d*E-w*l,f<0)c=c+1;else if(f===0)return 0}else if(E===0&&l<0){if(f=d*E-w*l,f===0)return 0}else if(l===0&&E<0){if(f=d*E-w*l,f===0)return 0}else if(l===0&&E===0){if(w<=0&&d>=0)return 0;if(d<=0&&w>=0)return 0}C=b,l=E,d=w}}return c%2!==0}var N9=Object.defineProperty,XO=(e,t)=>N9(e,"name",{value:t,configurable:!0});function qO(e,t,i={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const a=$O(e),c=VO(t),f=c.type,d=t.bbox;let l=c.coordinates;if(d&&KO(a,d)===!1)return!1;f==="Polygon"&&(l=[l]);let w=!1;for(var E=0;E<l.length;++E){const C=D9(a,l[E]);if(C===0)return!i.ignoreBoundary;C&&(w=!0)}return w}XO(qO,"booleanPointInPolygon");function KO(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}XO(KO,"inBBox");var $9=Object.defineProperty,U9=(e,t)=>$9(e,"name",{value:t,configurable:!0});function JO(e,t={}){let i=0,a=0,c=0;return Af(e,function(f){i+=f[0],a+=f[1],c++},!0),va([i/c,a/c],t.properties)}U9(JO,"centroid");const V9=()=>{const[e,t]=yt.useState(!1);return{detectCountry:yt.useCallback(async(a,c)=>{t(!0);const d=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of d.features)if(qO([a,c],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},r1=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var l;const[c,f]=yt.useState((l=e.properties)==null?void 0:l[t.key]);yt.useEffect(()=>{var w;f((w=e.properties)==null?void 0:w[t.key])},[e]);const d=yt.useCallback(w=>{f(w.currentTarget.value),a&&a(w)},[]);return gt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[gt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:d}),gt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(w=>{if(parseInt(w.tags.admin_level)===t.adminLevel)return gt.jsx("option",{value:w.tags.name},w.id);if(w.type==="node"&&t.adminLevel===9)return gt.jsx("option",{value:w.tags.name},w.id)})})]})},G9=({feature:e,fields:t})=>e.properties?gt.jsxs(gt.Fragment,{children:[t.postcodeField&&gt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,W9=({placeholder:e,defaultValue:t})=>{const[i,a]=yt.useState(t);yt.useEffect(()=>{a(t)},[t]);const c=yt.useCallback(f=>{a(f.currentTarget.value)},[]);return gt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[gt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var o0={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */o0.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,f="Expected a function",d="__lodash_hash_undefined__",l=1,w=2,E=1/0,C=9007199254740991,b="[object Arguments]",T="[object Array]",R="[object Boolean]",L="[object Date]",j="[object Error]",le="[object Function]",K="[object GeneratorFunction]",Z="[object Map]",G="[object Number]",se="[object Object]",q="[object Promise]",W="[object RegExp]",P="[object Set]",z="[object String]",D="[object Symbol]",ee="[object WeakMap]",X="[object ArrayBuffer]",ye="[object DataView]",ge="[object Float32Array]",fe="[object Float64Array]",ie="[object Int8Array]",he="[object Int16Array]",Y="[object Int32Array]",re="[object Uint8Array]",de="[object Uint8ClampedArray]",be="[object Uint16Array]",Pe="[object Uint32Array]",$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ce=/^\w*$/,Fe=/^\./,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,We=/[\\^$.*+?()[\]{}|]/g,it=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,pt={};pt[ge]=pt[fe]=pt[ie]=pt[he]=pt[Y]=pt[re]=pt[de]=pt[be]=pt[Pe]=!0,pt[b]=pt[T]=pt[X]=pt[R]=pt[ye]=pt[L]=pt[j]=pt[le]=pt[Z]=pt[G]=pt[se]=pt[W]=pt[P]=pt[z]=pt[ee]=!1;var xt={};xt[b]=xt[T]=xt[X]=xt[ye]=xt[R]=xt[L]=xt[ge]=xt[fe]=xt[ie]=xt[he]=xt[Y]=xt[Z]=xt[G]=xt[se]=xt[W]=xt[P]=xt[z]=xt[D]=xt[re]=xt[de]=xt[be]=xt[Pe]=!0,xt[j]=xt[le]=xt[ee]=!1;var Wt=typeof Ns=="object"&&Ns&&Ns.Object===Object&&Ns,Ht=typeof self=="object"&&self&&self.Object===Object&&self,ar=Wt||Ht||Function("return this")(),et=t&&!t.nodeType&&t,vr=et&&!0&&e&&!e.nodeType&&e,lr=vr&&vr.exports===et,Vt=lr&&Wt.process,Se=function(){try{return Vt&&Vt.binding("util")}catch{}}(),N=Se&&Se.isTypedArray;function B(H,ve){return H.set(ve[0],ve[1]),H}function _e(H,ve){return H.add(ve),H}function Xe(H,ve,Ue){switch(Ue.length){case 0:return H.call(ve);case 1:return H.call(ve,Ue[0]);case 2:return H.call(ve,Ue[0],Ue[1]);case 3:return H.call(ve,Ue[0],Ue[1],Ue[2])}return H.apply(ve,Ue)}function tt(H,ve){for(var Ue=-1,ut=H?H.length:0;++Ue<ut&&ve(H[Ue],Ue,H)!==!1;);return H}function ht(H,ve){for(var Ue=-1,ut=ve.length,kt=H.length;++Ue<ut;)H[kt+Ue]=ve[Ue];return H}function ue(H,ve,Ue,ut){var kt=-1,St=H?H.length:0;for(ut&&St&&(Ue=H[++kt]);++kt<St;)Ue=ve(Ue,H[kt],kt,H);return Ue}function k(H,ve){for(var Ue=-1,ut=H?H.length:0;++Ue<ut;)if(ve(H[Ue],Ue,H))return!0;return!1}function U(H){return function(ve){return ve==null?i:ve[H]}}function Ee(H,ve){for(var Ue=-1,ut=Array(H);++Ue<H;)ut[Ue]=ve(Ue);return ut}function Ve(H){return function(ve){return H(ve)}}function nt(H,ve){return H==null?i:H[ve]}function Ge(H){var ve=!1;if(H!=null&&typeof H.toString!="function")try{ve=!!(H+"")}catch{}return ve}function Et(H){var ve=-1,Ue=Array(H.size);return H.forEach(function(ut,kt){Ue[++ve]=[kt,ut]}),Ue}function It(H,ve){return function(Ue){return H(ve(Ue))}}function gr(H){var ve=-1,Ue=Array(H.size);return H.forEach(function(ut){Ue[++ve]=ut}),Ue}var br=Array.prototype,Rt=Function.prototype,Rn=Object.prototype,ri=ar["__core-js_shared__"],Oi=function(){var H=/[^.]+$/.exec(ri&&ri.keys&&ri.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),Vn=Rt.toString,Oe=Rn.hasOwnProperty,ae=Vn.call(Object),oe=Rn.toString,xe=RegExp("^"+Vn.call(Oe).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=lr?ar.Buffer:i,ke=ar.Symbol,Be=ar.Uint8Array,Ke=It(Object.getPrototypeOf,Object),Le=Object.create,st=Rn.propertyIsEnumerable,ft=br.splice,ot=Object.getOwnPropertySymbols,Pt=Ie?Ie.isBuffer:i,qt=It(Object.keys,Object),rr=Math.max,dr=Qs(ar,"DataView"),Sr=Qs(ar,"Map"),cr=Qs(ar,"Promise"),Ur=Qs(ar,"Set"),Jr=Qs(ar,"WeakMap"),nn=Qs(Object,"create"),xr=!st.call({valueOf:1},"valueOf"),Nr=Lr(dr),Yr=Lr(Sr),Pn=Lr(cr),Gn=Lr(Ur),Wn=Lr(Jr),Qo=ke?ke.prototype:i,Mr=Qo?Qo.valueOf:i,_l=Qo?Qo.toString:i;function Er(){}function An(H){var ve=-1,Ue=H?H.length:0;for(this.clear();++ve<Ue;){var ut=H[ve];this.set(ut[0],ut[1])}}function gi(){this.__data__=nn?nn(null):{}}function If(H){return this.has(H)&&delete this.__data__[H]}function yi(H){var ve=this.__data__;if(nn){var Ue=ve[H];return Ue===d?i:Ue}return Oe.call(ve,H)?ve[H]:i}function Hn(H){var ve=this.__data__;return nn?ve[H]!==i:Oe.call(ve,H)}function xl(H,ve){var Ue=this.__data__;return Ue[H]=nn&&ve===i?d:ve,this}An.prototype.clear=gi,An.prototype.delete=If,An.prototype.get=yi,An.prototype.has=Hn,An.prototype.set=xl;function vi(H){var ve=-1,Ue=H?H.length:0;for(this.clear();++ve<Ue;){var ut=H[ve];this.set(ut[0],ut[1])}}function xn(){this.__data__=[]}function wo(H){var ve=this.__data__,Ue=za(ve,H);if(Ue<0)return!1;var ut=ve.length-1;return Ue==ut?ve.pop():ft.call(ve,Ue,1),!0}function ws(H){var ve=this.__data__,Ue=za(ve,H);return Ue<0?i:ve[Ue][1]}function pn(H){return za(this.__data__,H)>-1}function wl(H,ve){var Ue=this.__data__,ut=za(Ue,H);return ut<0?Ue.push([H,ve]):Ue[ut][1]=ve,this}vi.prototype.clear=xn,vi.prototype.delete=wo,vi.prototype.get=ws,vi.prototype.has=pn,vi.prototype.set=wl;function wn(H){var ve=-1,Ue=H?H.length:0;for(this.clear();++ve<Ue;){var ut=H[ve];this.set(ut[0],ut[1])}}function Fa(){this.__data__={hash:new An,map:new(Sr||vi),string:new An}}function es(H){return Rl(this,H).delete(H)}function ku(H){return Rl(this,H).get(H)}function Ra(H){return Rl(this,H).has(H)}function ts(H,ve){return Rl(this,H).set(H,ve),this}wn.prototype.clear=Fa,wn.prototype.delete=es,wn.prototype.get=ku,wn.prototype.has=Ra,wn.prototype.set=ts;function Ar(H){var ve=-1,Ue=H?H.length:0;for(this.__data__=new wn;++ve<Ue;)this.add(H[ve])}function bl(H){return this.__data__.set(H,d),this}function Ou(H){return this.__data__.has(H)}Ar.prototype.add=Ar.prototype.push=bl,Ar.prototype.has=Ou;function Jn(H){this.__data__=new vi(H)}function Sl(){this.__data__=new vi}function El(H){return this.__data__.delete(H)}function Tl(H){return this.__data__.get(H)}function Pl(H){return this.__data__.has(H)}function ja(H,ve){var Ue=this.__data__;if(Ue instanceof vi){var ut=Ue.__data__;if(!Sr||ut.length<c-1)return ut.push([H,ve]),this;Ue=this.__data__=new wn(ut)}return Ue.set(H,ve),this}Jn.prototype.clear=Sl,Jn.prototype.delete=El,Jn.prototype.get=Tl,Jn.prototype.has=Pl,Jn.prototype.set=ja;function bs(H,ve){var Ue=jn(H)||Eo(H)?Ee(H.length,String):[],ut=Ue.length,kt=!!ut;for(var St in H)(ve||Oe.call(H,St))&&!(kt&&(St=="length"||ea(St,ut)))&&Ue.push(St);return Ue}function Fu(H,ve,Ue){(Ue!==i&&!So(H[ve],Ue)||typeof ve=="number"&&Ue===i&&!(ve in H))&&(H[ve]=Ue)}function Fc(H,ve,Ue){var ut=H[ve];(!(Oe.call(H,ve)&&So(ut,Ue))||Ue===i&&!(ve in H))&&(H[ve]=Ue)}function za(H,ve){for(var Ue=H.length;Ue--;)if(So(H[Ue][0],ve))return Ue;return-1}function Cf(H,ve){return H&&Fl(ve,co(ve),H)}function _i(H,ve,Ue,ut,kt,St,Zt){var Jt;if(ut&&(Jt=St?ut(H,kt,St,Zt):ut(H)),Jt!==i)return Jt;if(!Si(H))return H;var yr=jn(H);if(yr){if(Jt=Zc(H),!ve)return Ol(H,Jt)}else{var Br=qi(H),Or=Br==le||Br==K;if(Po(H))return Of(H,ve);if(Br==se||Br==b||Or&&!St){if(Ge(H))return St?H:{};if(Jt=Lu(Or?{}:H),!ve)return $c(H,Cf(Jt,H))}else{if(!xt[Br])return St?H:{};Jt=Xc(H,Br,_i,ve)}}Zt||(Zt=new Jn);var Wr=Zt.get(H);if(Wr)return Wr;if(Zt.set(H,Jt),!yr)var on=Ue?Gc(H):co(H);return tt(on||H,function($r,mn){on&&(mn=$r,$r=H[mn]),Fc(Jt,mn,_i($r,ve,Ue,ut,mn,H,Zt))}),Jt}function La(H){return Si(H)?Le(H):{}}var xi=Vc(Ba),wi=Es();function Ba(H,ve){return H&&wi(H,ve,co)}function Da(H,ve){ve=rs(ve,H)?[ve]:Ks(ve);for(var Ue=0,ut=ve.length;H!=null&&Ue<ut;)H=H[ta(ve[Ue++])];return Ue&&Ue==ut?H:i}function Rc(H,ve,Ue){var ut=ve(H);return jn(H)?ut:ht(ut,Ue(H))}function jc(H){return oe.call(H)}function Ss(H,ve){return H!=null&&ve in Object(H)}function Al(H,ve,Ue,ut,kt){return H===ve?!0:H==null||ve==null||!Si(H)&&!Fi(ve)?H!==H&&ve!==ve:Mf(H,ve,Al,Ue,ut,kt)}function Mf(H,ve,Ue,ut,kt,St){var Zt=jn(H),Jt=jn(ve),yr=T,Br=T;Zt||(yr=qi(H),yr=yr==b?se:yr),Jt||(Br=qi(ve),Br=Br==b?se:Br);var Or=yr==se&&!Ge(H),Wr=Br==se&&!Ge(ve),on=yr==Br;if(on&&!Or)return St||(St=new Jn),Zt||ns(H)?zu(H,ve,Ue,ut,kt,St):zf(H,ve,yr,Ue,ut,kt,St);if(!(kt&w)){var $r=Or&&Oe.call(H,"__wrapped__"),mn=Wr&&Oe.call(ve,"__wrapped__");if($r||mn){var ho=$r?H.value():H,Ri=mn?ve.value():ve;return St||(St=new Jn),Ue(ho,Ri,ut,kt,St)}}return on?(St||(St=new Jn),Lf(H,ve,Ue,ut,kt,St)):!1}function kf(H,ve,Ue,ut){var kt=Ue.length,St=kt,Zt=!ut;if(H==null)return!St;for(H=Object(H);kt--;){var Jt=Ue[kt];if(Zt&&Jt[2]?Jt[1]!==H[Jt[0]]:!(Jt[0]in H))return!1}for(;++kt<St;){Jt=Ue[kt];var yr=Jt[0],Br=H[yr],Or=Jt[1];if(Zt&&Jt[2]){if(Br===i&&!(yr in H))return!1}else{var Wr=new Jn;if(ut)var on=ut(Br,Or,yr,H,ve,Wr);if(!(on===i?Al(Or,Br,ut,l|w,Wr):on))return!1}}return!0}function zc(H){if(!Si(H)||Du(H))return!1;var ve=na(H)||Ge(H)?xe:vt;return ve.test(Lr(H))}function Lc(H){return Fi(H)&&Ts(H.length)&&!!pt[oe.call(H)]}function Bc(H){return typeof H=="function"?H:H==null?ia:typeof H=="object"?jn(H)?Ru(H[0],H[1]):Ml(H):Vu(H)}function Il(H){if(!$a(H))return qt(H);var ve=[];for(var Ue in Object(H))Oe.call(H,Ue)&&Ue!="constructor"&&ve.push(Ue);return ve}function Cl(H){if(!Si(H))return Nu(H);var ve=$a(H),Ue=[];for(var ut in H)ut=="constructor"&&(ve||!Oe.call(H,ut))||Ue.push(ut);return Ue}function Ml(H){var ve=jl(H);return ve.length==1&&ve[0][2]?Gr(ve[0][0],ve[0][1]):function(Ue){return Ue===H||kf(Ue,H,ve)}}function Ru(H,ve){return rs(H)&&zl(ve)?Gr(ta(H),ve):function(Ue){var ut=As(Ue,H);return ut===i&&ut===ve?is(Ue,H):Al(ve,ut,i,l|w)}}function kl(H,ve,Ue,ut,kt){if(H!==ve){if(!(jn(ve)||ns(ve)))var St=Cl(ve);tt(St||ve,function(Zt,Jt){if(St&&(Jt=Zt,Zt=ve[Jt]),Si(Zt))kt||(kt=new Jn),lo(H,ve,Jt,Ue,kl,ut,kt);else{var yr=ut?ut(H[Jt],Zt,Jt+"",H,ve,kt):i;yr===i&&(yr=Zt),Fu(H,Jt,yr)}})}}function lo(H,ve,Ue,ut,kt,St,Zt){var Jt=H[Ue],yr=ve[Ue],Br=Zt.get(yr);if(Br){Fu(H,Ue,Br);return}var Or=St?St(Jt,yr,Ue+"",H,ve,Zt):i,Wr=Or===i;Wr&&(Or=yr,jn(yr)||ns(yr)?jn(Jt)?Or=Jt:uo(Jt)?Or=Ol(Jt):(Wr=!1,Or=_i(yr,!0)):Va(yr)||Eo(yr)?Eo(Jt)?Or=Ga(Jt):!Si(Jt)||ut&&na(Jt)?(Wr=!1,Or=_i(yr,!0)):Or=Jt:Wr=!1),Wr&&(Zt.set(yr,Or),kt(Or,yr,ut,St,Zt),Zt.delete(yr)),Fu(H,Ue,Or)}function ju(H){return function(ve){return Da(ve,H)}}function qs(H,ve){return ve=rr(ve===i?H.length-1:ve,0),function(){for(var Ue=arguments,ut=-1,kt=rr(Ue.length-ve,0),St=Array(kt);++ut<kt;)St[ut]=Ue[ve+ut];ut=-1;for(var Zt=Array(ve+1);++ut<ve;)Zt[ut]=Ue[ut];return Zt[ve]=St,Xe(H,this,Zt)}}function Ir(H){if(typeof H=="string")return H;if(Ps(H))return _l?_l.call(H):"";var ve=H+"";return ve=="0"&&1/H==-E?"-0":ve}function Ks(H){return jn(H)?H:wr(H)}function Of(H,ve){if(ve)return H.slice();var Ue=new H.constructor(H.length);return H.copy(Ue),Ue}function Js(H){var ve=new H.constructor(H.byteLength);return new Be(ve).set(new Be(H)),ve}function Ff(H,ve){var Ue=ve?Js(H.buffer):H.buffer;return new H.constructor(Ue,H.byteOffset,H.byteLength)}function Ys(H,ve,Ue){var ut=ve?Ue(Et(H),!0):Et(H);return ue(ut,B,new H.constructor)}function Rf(H){var ve=new H.constructor(H.source,ct.exec(H));return ve.lastIndex=H.lastIndex,ve}function Dc(H,ve,Ue){var ut=ve?Ue(gr(H),!0):gr(H);return ue(ut,_e,new H.constructor)}function jf(H){return Mr?Object(Mr.call(H)):{}}function Nc(H,ve){var Ue=ve?Js(H.buffer):H.buffer;return new H.constructor(Ue,H.byteOffset,H.length)}function Ol(H,ve){var Ue=-1,ut=H.length;for(ve||(ve=Array(ut));++Ue<ut;)ve[Ue]=H[Ue];return ve}function Fl(H,ve,Ue,ut){Ue||(Ue={});for(var kt=-1,St=ve.length;++kt<St;){var Zt=ve[kt],Jt=ut?ut(Ue[Zt],H[Zt],Zt,Ue,H):i;Fc(Ue,Zt,Jt===i?H[Zt]:Jt)}return Ue}function $c(H,ve){return Fl(H,Wc(H),ve)}function Uc(H){return qs(function(ve,Ue){var ut=-1,kt=Ue.length,St=kt>1?Ue[kt-1]:i,Zt=kt>2?Ue[2]:i;for(St=H.length>3&&typeof St=="function"?(kt--,St):i,Zt&&bo(Ue[0],Ue[1],Zt)&&(St=kt<3?i:St,kt=1),ve=Object(ve);++ut<kt;){var Jt=Ue[ut];Jt&&H(ve,Jt,ut,St)}return ve})}function Vc(H,ve){return function(Ue,ut){if(Ue==null)return Ue;if(!To(Ue))return H(Ue,ut);for(var kt=Ue.length,St=ve?kt:-1,Zt=Object(Ue);(ve?St--:++St<kt)&&ut(Zt[St],St,Zt)!==!1;);return Ue}}function Es(H){return function(ve,Ue,ut){for(var kt=-1,St=Object(ve),Zt=ut(ve),Jt=Zt.length;Jt--;){var yr=Zt[H?Jt:++kt];if(Ue(St[yr],yr,St)===!1)break}return ve}}function zu(H,ve,Ue,ut,kt,St){var Zt=kt&w,Jt=H.length,yr=ve.length;if(Jt!=yr&&!(Zt&&yr>Jt))return!1;var Br=St.get(H);if(Br&&St.get(ve))return Br==ve;var Or=-1,Wr=!0,on=kt&l?new Ar:i;for(St.set(H,ve),St.set(ve,H);++Or<Jt;){var $r=H[Or],mn=ve[Or];if(ut)var ho=Zt?ut(mn,$r,Or,ve,H,St):ut($r,mn,Or,H,ve,St);if(ho!==i){if(ho)continue;Wr=!1;break}if(on){if(!k(ve,function(Ri,Ao){if(!on.has(Ao)&&($r===Ri||Ue($r,Ri,ut,kt,St)))return on.add(Ao)})){Wr=!1;break}}else if(!($r===mn||Ue($r,mn,ut,kt,St))){Wr=!1;break}}return St.delete(H),St.delete(ve),Wr}function zf(H,ve,Ue,ut,kt,St,Zt){switch(Ue){case ye:if(H.byteLength!=ve.byteLength||H.byteOffset!=ve.byteOffset)return!1;H=H.buffer,ve=ve.buffer;case X:return!(H.byteLength!=ve.byteLength||!ut(new Be(H),new Be(ve)));case R:case L:case G:return So(+H,+ve);case j:return H.name==ve.name&&H.message==ve.message;case W:case z:return H==ve+"";case Z:var Jt=Et;case P:var yr=St&w;if(Jt||(Jt=gr),H.size!=ve.size&&!yr)return!1;var Br=Zt.get(H);if(Br)return Br==ve;St|=l,Zt.set(H,ve);var Or=zu(Jt(H),Jt(ve),ut,kt,St,Zt);return Zt.delete(H),Or;case D:if(Mr)return Mr.call(H)==Mr.call(ve)}return!1}function Lf(H,ve,Ue,ut,kt,St){var Zt=kt&w,Jt=co(H),yr=Jt.length,Br=co(ve),Or=Br.length;if(yr!=Or&&!Zt)return!1;for(var Wr=yr;Wr--;){var on=Jt[Wr];if(!(Zt?on in ve:Oe.call(ve,on)))return!1}var $r=St.get(H);if($r&&St.get(ve))return $r==ve;var mn=!0;St.set(H,ve),St.set(ve,H);for(var ho=Zt;++Wr<yr;){on=Jt[Wr];var Ri=H[on],Ao=ve[on];if(ut)var Cs=Zt?ut(Ao,Ri,on,ve,H,St):ut(Ri,Ao,on,H,ve,St);if(!(Cs===i?Ri===Ao||Ue(Ri,Ao,ut,kt,St):Cs)){mn=!1;break}ho||(ho=on=="constructor")}if(mn&&!ho){var oa=H.constructor,Io=ve.constructor;oa!=Io&&"constructor"in H&&"constructor"in ve&&!(typeof oa=="function"&&oa instanceof oa&&typeof Io=="function"&&Io instanceof Io)&&(mn=!1)}return St.delete(H),St.delete(ve),mn}function Gc(H){return Rc(H,co,Wc)}function Na(){var H=Er.iteratee||Ll;return H=H===Ll?Bc:H,arguments.length?H(arguments[0],arguments[1]):H}function Rl(H,ve){var Ue=H.__data__;return Bu(ve)?Ue[typeof ve=="string"?"string":"hash"]:Ue.map}function jl(H){for(var ve=co(H),Ue=ve.length;Ue--;){var ut=ve[Ue],kt=H[ut];ve[Ue]=[ut,kt,zl(kt)]}return ve}function Qs(H,ve){var Ue=nt(H,ve);return zc(Ue)?Ue:i}var Wc=ot?It(ot,Object):os,qi=jc;(dr&&qi(new dr(new ArrayBuffer(1)))!=ye||Sr&&qi(new Sr)!=Z||cr&&qi(cr.resolve())!=q||Ur&&qi(new Ur)!=P||Jr&&qi(new Jr)!=ee)&&(qi=function(H){var ve=oe.call(H),Ue=ve==se?H.constructor:i,ut=Ue?Lr(Ue):i;if(ut)switch(ut){case Nr:return ye;case Yr:return Z;case Pn:return q;case Gn:return P;case Wn:return ee}return ve});function Hc(H,ve,Ue){ve=rs(ve,H)?[ve]:Ks(ve);for(var ut,kt=-1,Zt=ve.length;++kt<Zt;){var St=ta(ve[kt]);if(!(ut=H!=null&&Ue(H,St)))break;H=H[St]}if(ut)return ut;var Zt=H?H.length:0;return!!Zt&&Ts(Zt)&&ea(St,Zt)&&(jn(H)||Eo(H))}function Zc(H){var ve=H.length,Ue=H.constructor(ve);return ve&&typeof H[0]=="string"&&Oe.call(H,"index")&&(Ue.index=H.index,Ue.input=H.input),Ue}function Lu(H){return typeof H.constructor=="function"&&!$a(H)?La(Ke(H)):{}}function Xc(H,ve,Ue,ut){var kt=H.constructor;switch(ve){case X:return Js(H);case R:case L:return new kt(+H);case ye:return Ff(H,ut);case ge:case fe:case ie:case he:case Y:case re:case de:case be:case Pe:return Nc(H,ut);case Z:return Ys(H,ut,Ue);case G:case z:return new kt(H);case W:return Rf(H);case P:return Dc(H,ut,Ue);case D:return jf(H)}}function ea(H,ve){return ve=ve??C,!!ve&&(typeof H=="number"||Mt.test(H))&&H>-1&&H%1==0&&H<ve}function bo(H,ve,Ue){if(!Si(Ue))return!1;var ut=typeof ve;return(ut=="number"?To(Ue)&&ea(ve,Ue.length):ut=="string"&&ve in Ue)?So(Ue[ve],H):!1}function rs(H,ve){if(jn(H))return!1;var Ue=typeof H;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||H==null||Ps(H)?!0:Ce.test(H)||!$e.test(H)||ve!=null&&H in Object(ve)}function Bu(H){var ve=typeof H;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?H!=="__proto__":H===null}function Du(H){return!!Oi&&Oi in H}function $a(H){var ve=H&&H.constructor,Ue=typeof ve=="function"&&ve.prototype||Rn;return H===Ue}function zl(H){return H===H&&!Si(H)}function Gr(H,ve){return function(Ue){return Ue==null?!1:Ue[H]===ve&&(ve!==i||H in Object(Ue))}}function Nu(H){var ve=[];if(H!=null)for(var Ue in Object(H))ve.push(Ue);return ve}var wr=Ua(function(H){H=Uu(H);var ve=[];return Fe.test(H)&&ve.push(""),H.replace(He,function(Ue,ut,kt,St){ve.push(kt?St.replace(it,"$1"):ut||Ue)}),ve});function ta(H){if(typeof H=="string"||Ps(H))return H;var ve=H+"";return ve=="0"&&1/H==-E?"-0":ve}function Lr(H){if(H!=null){try{return Vn.call(H)}catch{}try{return H+""}catch{}}return""}function qr(H){for(var ve=-1,Ue=H?H.length:0,ut=0,kt=[];++ve<Ue;){var St=H[ve];St&&(kt[ut++]=St)}return kt}function ra(H,ve){var Ue=jn(H)?tt:xi;return Ue(H,Na(ve,3))}function Ua(H,ve){if(typeof H!="function"||ve&&typeof ve!="function")throw new TypeError(f);var Ue=function(){var ut=arguments,kt=ve?ve.apply(this,ut):ut[0],St=Ue.cache;if(St.has(kt))return St.get(kt);var Zt=H.apply(this,ut);return Ue.cache=St.set(kt,Zt),Zt};return Ue.cache=new(Ua.Cache||wn),Ue}Ua.Cache=wn;function $u(H){return _i(H,!1,!0)}function So(H,ve){return H===ve||H!==H&&ve!==ve}function Eo(H){return uo(H)&&Oe.call(H,"callee")&&(!st.call(H,"callee")||oe.call(H)==b)}var jn=Array.isArray;function To(H){return H!=null&&Ts(H.length)&&!na(H)}function uo(H){return Fi(H)&&To(H)}var Po=Pt||Wa;function bi(H){if(To(H)&&(jn(H)||typeof H=="string"||typeof H.splice=="function"||Po(H)||Eo(H)))return!H.length;var ve=qi(H);if(ve==Z||ve==P)return!H.size;if(xr||$a(H))return!qt(H).length;for(var Ue in H)if(Oe.call(H,Ue))return!1;return!0}function na(H){var ve=Si(H)?oe.call(H):"";return ve==le||ve==K}function Ts(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=C}function Si(H){var ve=typeof H;return!!H&&(ve=="object"||ve=="function")}function Fi(H){return!!H&&typeof H=="object"}function Va(H){if(!Fi(H)||oe.call(H)!=se||Ge(H))return!1;var ve=Ke(H);if(ve===null)return!0;var Ue=Oe.call(ve,"constructor")&&ve.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&Vn.call(Ue)==ae}function Ps(H){return typeof H=="symbol"||Fi(H)&&oe.call(H)==D}var ns=N?Ve(N):Lc;function Ga(H){return Fl(H,Is(H))}function Uu(H){return H==null?"":Ir(H)}function As(H,ve,Ue){var ut=H==null?i:Da(H,ve);return ut===i?Ue:ut}function is(H,ve){return H!=null&&Hc(H,ve,Ss)}function co(H){return To(H)?bs(H):Il(H)}function Is(H){return To(H)?bs(H,!0):Cl(H)}var kr=Uc(function(H,ve,Ue){kl(H,ve,Ue)});function ia(H){return H}function Ll(H){return Bc(typeof H=="function"?H:_i(H,!0))}function Vu(H){return rs(H)?U(ta(H)):ju(H)}function os(){return[]}function Wa(){return!1}Er.compact=qr,Er.iteratee=Ll,Er.keys=co,Er.keysIn=Is,Er.memoize=Ua,Er.merge=kr,Er.property=Vu,Er.toPlainObject=Ga,Er.clone=$u,Er.eq=So,Er.forEach=ra,Er.get=As,Er.hasIn=is,Er.identity=ia,Er.isArguments=Eo,Er.isArray=jn,Er.isArrayLike=To,Er.isArrayLikeObject=uo,Er.isBuffer=Po,Er.isEmpty=bi,Er.isFunction=na,Er.isLength=Ts,Er.isObject=Si,Er.isObjectLike=Fi,Er.isPlainObject=Va,Er.isSymbol=Ps,Er.isTypedArray=ns,Er.stubArray=os,Er.stubFalse=Wa,Er.toString=Uu,Er.each=ra,Er.VERSION=a,vr&&((vr.exports=Er)._=Er,et._=Er)}).call(Ns)})(o0,o0.exports);var H9=o0.exports,Z9=Wg;function Wg(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Wg(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Wg(e.geometries[a],t);else if(i==="Feature")Wg(e.geometry,t);else if(i==="Polygon")gI(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)gI(e.coordinates[a],t);return e}function gI(e,t){if(e.length!==0){yI(e[0],t);for(var i=1;i<e.length;i++)yI(e[i],!t)}}function yI(e,t){for(var i=0,a=0,c=0,f=e.length,d=f-1;c<f;d=c++){var l=(e[c][0]-e[d][0])*(e[d][1]+e[c][1]),w=i+l;a+=Math.abs(i)>=Math.abs(l)?i-w+l:l-w+i,i=w}i+a>=0!=!!t&&e.reverse()}const X9=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var q9=X9,Pr=H9,gg=Z9,Hg={};q9.forEach(function(e){if(e.polygon==="all")Hg[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),Hg[e.key]={},Hg[e.key][t]=i}});function K9(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Pr.merge(e,t)}var s0={};s0=function(e,t,i){t=Pr.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Hg,deduplicator:K9},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=f(e):a=c(e),a;function c(w){var E=new Array,C=new Array,b=new Array;function T(q){var W=Pr.clone(q);W.lat=q.center.lat,W.lon=q.center.lon,W.__is_center_placeholder=!0,E.push(W)}function R(q){var W=Pr.clone(q);W.nodes=[];function P(z,D,ee){var X={type:"node",id:"_"+W.type+"/"+W.id+"bounds"+ee,lat:z,lon:D};W.nodes.push(X.id),E.push(X)}P(W.bounds.minlat,W.bounds.minlon,1),P(W.bounds.maxlat,W.bounds.minlon,2),P(W.bounds.maxlat,W.bounds.maxlon,3),P(W.bounds.minlat,W.bounds.maxlon,4),W.nodes.push(W.nodes[0]),W.__is_bounds_placeholder=!0,C.push(W)}function L(q){function W(P,z,D){var ee={type:"node",id:D,lat:P,lon:z};E.push(ee)}Pr.isArray(q.nodes)||(q.nodes=q.geometry.map(function(P){return P!==null?"_anonymous@"+P.lat+"/"+P.lon:"_anonymous@unknown_location"})),q.geometry.forEach(function(P,z){P&&W(P.lat,P.lon,q.nodes[z])})}function j(q){function W(z,D,ee){var X={type:"node",id:ee,lat:z,lon:D};E.push(X)}function P(z,D){if(C.some(function(ye){return ye.type=="way"&&ye.id==D}))return;var ee={type:"way",id:D,nodes:[]};function X(ye,ge){var fe={type:"node",id:"_anonymous@"+ye+"/"+ge,lat:ye,lon:ge};ee.nodes.push(fe.id),E.push(fe)}z.forEach(function(ye){ye?X(ye.lat,ye.lon):ee.nodes.push(void 0)}),C.push(ee)}q.members.forEach(function(z,D){z.type=="node"?z.lat&&W(z.lat,z.lon,z.ref):z.type=="way"&&z.geometry&&(z.ref="_fullGeom"+z.ref,P(z.geometry,z.ref))})}for(var le=0;le<w.elements.length;le++)switch(w.elements[le].type){case"node":var K=w.elements[le];E.push(K);break;case"way":var Z=Pr.clone(w.elements[le]);Z.nodes=Pr.clone(Z.nodes),C.push(Z),Z.center&&T(Z),Z.geometry?L(Z):Z.bounds&&R(Z);break;case"relation":var G=Pr.clone(w.elements[le]);G.members=Pr.clone(G.members),b.push(G);var se=G.members&&G.members.some(function(q){return q.type=="node"&&q.lat||q.type=="way"&&q.geometry&&q.geometry.length>0});G.center&&T(G),se?j(G):G.bounds&&R(G);break}return d(E,C,b)}function f(w){var E=new Array,C=new Array,b=new Array;function T(G,se,q){G.hasAttribute(q)&&(se[q]=G.getAttribute(q))}function R(G,se){var q=Pr.clone(G);T(se,q,"lat"),T(se,q,"lon"),q.__is_center_placeholder=!0,E.push(q)}function L(G,se){var q=Pr.clone(G);q.nodes=[];function W(P,z,D){var ee={type:"node",id:"_"+q.type+"/"+q.id+"bounds"+D,lat:P,lon:z};q.nodes.push(ee.id),E.push(ee)}W(se.getAttribute("minlat"),se.getAttribute("minlon"),1),W(se.getAttribute("maxlat"),se.getAttribute("minlon"),2),W(se.getAttribute("maxlat"),se.getAttribute("maxlon"),3),W(se.getAttribute("minlat"),se.getAttribute("maxlon"),4),q.nodes.push(q.nodes[0]),q.__is_bounds_placeholder=!0,C.push(q)}function j(G,se){function q(W,P,z){var D={type:"node",id:z,lat:W,lon:P};return E.push(D),D.id}Pr.isArray(G.nodes)||(G.nodes=[],Pr.each(se,function(W,P){G.nodes.push("_anonymous@"+W.getAttribute("lat")+"/"+W.getAttribute("lon"))})),Pr.each(se,function(W,P){W.getAttribute("lat")&&q(W.getAttribute("lat"),W.getAttribute("lon"),G.nodes[P])})}function le(G,se){function q(P,z,D){var ee={type:"node",id:D,lat:P,lon:z};E.push(ee)}function W(P,z){if(C.some(function(X){return X.type=="way"&&X.id==z}))return;var D={type:"way",id:z,nodes:[]};function ee(X,ye){var ge={type:"node",id:"_anonymous@"+X+"/"+ye,lat:X,lon:ye};D.nodes.push(ge.id),E.push(ge)}Pr.each(P,function(X){X.getAttribute("lat")?ee(X.getAttribute("lat"),X.getAttribute("lon")):D.nodes.push(void 0)}),C.push(D)}Pr.each(se,function(P,z){G.members[z].type=="node"?P.getAttribute("lat")&&q(P.getAttribute("lat"),P.getAttribute("lon"),G.members[z].ref):G.members[z].type=="way"&&P.getElementsByTagName("nd").length>0&&(G.members[z].ref="_fullGeom"+G.members[z].ref,W(P.getElementsByTagName("nd"),G.members[z].ref))})}Pr.each(w.getElementsByTagName("node"),function(G,se){var q={};Pr.each(G.getElementsByTagName("tag"),function(P){q[P.getAttribute("k")]=P.getAttribute("v")});var W={type:"node"};T(G,W,"id"),T(G,W,"lat"),T(G,W,"lon"),T(G,W,"version"),T(G,W,"timestamp"),T(G,W,"changeset"),T(G,W,"uid"),T(G,W,"user"),Pr.isEmpty(q)||(W.tags=q),E.push(W)});var K,Z;return Pr.each(w.getElementsByTagName("way"),function(G,se){var q={},W=[];Pr.each(G.getElementsByTagName("tag"),function(D){q[D.getAttribute("k")]=D.getAttribute("v")});var P=!1;Pr.each(G.getElementsByTagName("nd"),function(D,ee){var X;(X=D.getAttribute("ref"))&&(W[ee]=X),!P&&D.getAttribute("lat")&&(P=!0)});var z={type:"way"};T(G,z,"id"),T(G,z,"version"),T(G,z,"timestamp"),T(G,z,"changeset"),T(G,z,"uid"),T(G,z,"user"),W.length>0&&(z.nodes=W),Pr.isEmpty(q)||(z.tags=q),(K=G.getElementsByTagName("center")[0])&&R(z,K),P?j(z,G.getElementsByTagName("nd")):(Z=G.getElementsByTagName("bounds")[0])&&L(z,Z),C.push(z)}),Pr.each(w.getElementsByTagName("relation"),function(G,se){var q={},W=[];Pr.each(G.getElementsByTagName("tag"),function(D){q[D.getAttribute("k")]=D.getAttribute("v")});var P=!1;Pr.each(G.getElementsByTagName("member"),function(D,ee){W[ee]={},T(D,W[ee],"ref"),T(D,W[ee],"role"),T(D,W[ee],"type"),(!P&&W[ee].type=="node"&&D.getAttribute("lat")||W[ee].type=="way"&&D.getElementsByTagName("nd").length>0)&&(P=!0)});var z={type:"relation"};T(G,z,"id"),T(G,z,"version"),T(G,z,"timestamp"),T(G,z,"changeset"),T(G,z,"uid"),T(G,z,"user"),W.length>0&&(z.members=W),Pr.isEmpty(q)||(z.tags=q),(K=G.getElementsByTagName("center")[0])&&R(z,K),P?le(z,G.getElementsByTagName("member")):(Z=G.getElementsByTagName("bounds")[0])&&L(z,Z),b.push(z)}),d(E,C,b)}function d(w,E,C){function b(Fe,He){if(typeof He!="object"&&(He={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Fe,He);for(var We in Fe)if(t.uninterestingTags[We]!==!0&&!(He[We]===!0||He[We]===Fe[We]))return!0;return!1}function T(Fe){var He={timestamp:Fe.timestamp,version:Fe.version,changeset:Fe.changeset,user:Fe.user,uid:Fe.uid};for(var We in He)He[We]===void 0&&delete He[We];return He}for(var R=new Object,L=new Object,j=0;j<w.length;j++){var le=w[j];R[le.id]!==void 0&&(le=t.deduplicator(le,R[le.id])),R[le.id]=le,typeof le.tags<"u"&&b(le.tags)&&(L[le.id]=!0)}for(var j=0;j<C.length;j++)if(Pr.isArray(C[j].members))for(var K=0;K<C[j].members.length;K++)C[j].members[K].type=="node"&&(L[C[j].members[K].ref]=!0);for(var Z=new Object,G=new Object,j=0;j<E.length;j++){var se=E[j];if(Z[se.id]&&(se=t.deduplicator(se,Z[se.id])),Z[se.id]=se,Pr.isArray(se.nodes))for(var K=0;K<se.nodes.length;K++)typeof se.nodes[K]!="object"&&(G[se.nodes[K]]=!0,se.nodes[K]=R[se.nodes[K]])}var q=new Array;for(var W in R){var le=R[W];(!G[W]||L[W])&&q.push(le)}for(var P=new Array,j=0;j<C.length;j++){var z=C[j];P[z.id]&&(z=t.deduplicator(z,P[z.id])),P[z.id]=z}var D={node:{},way:{},relation:{}};for(var W in P){var z=P[W];if(!Pr.isArray(z.members)){t.verbose&&console.warn("Relation",z.type+"/"+z.id,"ignored because it has no members");continue}for(var K=0;K<z.members.length;K++){var ee=z.members[K].type,X=z.members[K].ref;if(typeof X!="number"&&(X=X.replace("_fullGeom","")),!D[ee]){t.verbose&&console.warn("Relation",z.type+"/"+z.id,"member",ee+"/"+X,"ignored because it has an invalid type");continue}typeof D[ee][X]>"u"&&(D[ee][X]=[]),D[ee][X].push({role:z.members[K].role,rel:z.id,reltags:z.tags})}}var ye,ge=[];for(j=0;j<q.length;j++){if(typeof q[j].lon>"u"||typeof q[j].lat>"u"){t.verbose&&console.warn("POI",q[j].type+"/"+q[j].id,"ignored because it lacks coordinates");continue}var fe={type:"Feature",id:q[j].type+"/"+q[j].id,properties:{type:q[j].type,id:q[j].id,tags:q[j].tags||{},relations:D.node[q[j].id]||[],meta:T(q[j])},geometry:{type:"Point",coordinates:[+q[j].lon,+q[j].lat]}};q[j].__is_center_placeholder&&(fe.properties.geometry="center"),i?i(fe):ge.push(fe)}for(var ie=[],he=[],j=0;j<C.length;j++)if(P[C[j].id]===C[j]){if(typeof C[j].tags<"u"&&(C[j].tags.type=="route"||C[j].tags.type=="waterway")){let He=function(We){var it=!1,ct;ct=We.members.filter(function(xt){return xt.type==="way"}),ct=ct.map(function(xt){var Wt=Z[xt.ref];if(Wt===void 0||Wt.nodes===void 0){t.verbose&&console.warn("Route "+We.type+"/"+We.id,"tainted by a missing or incomplete  way",xt.type+"/"+xt.ref),it=!0;return}return{id:xt.ref,role:xt.role,way:Wt,nodes:Wt.nodes.filter(function(Ht){return Ht!==void 0?!0:(it=!0,t.verbose&&console.warn("Route",We.type+"/"+We.id,"tainted by a way",xt.type+"/"+xt.ref,"with a missing node"),!1)})}}),ct=Pr.compact(ct);var vt;vt=n1(ct);var Mt=[];if(Mt=Pr.compact(vt.map(function(xt){return Pr.compact(xt.map(function(Wt){return[+Wt.lon,+Wt.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",We.type+"/"+We.id,"contains no coordinates"),!1;var pt={type:"Feature",id:We.type+"/"+We.id,properties:{type:We.type,id:We.id,tags:We.tags||{},relations:D[We.type][We.id]||[],meta:T(We)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return it&&(t.verbose&&console.warn("Route",We.type+"/"+We.id,"is tainted"),pt.properties.tainted=!0),pt};var $e=He;if(!Pr.isArray(C[j].members)){t.verbose&&console.warn("Route",C[j].type+"/"+C[j].id,"ignored because it has no members");continue}if(C[j].members.forEach(function(We){Z[We.ref]&&!b(Z[We.ref].tags)&&(Z[We.ref].is_skippablerelationmember=!0)}),fe=He(C[j]),fe===!1){t.verbose&&console.warn("Route relation",C[j].type+"/"+C[j].id,"ignored because it has invalid geometry");continue}i?i(gg(fe)):he.push(fe)}if(typeof C[j].tags<"u"&&(C[j].tags.type=="multipolygon"||C[j].tags.type=="boundary")){let We=function(it,ct){var vt=!1,Mt=re?"way":"relation",pt=typeof it.id=="number"?it.id:+it.id.replace("_fullGeom",""),xt;xt=ct.members.filter(function(B){return B.type==="way"}),xt=xt.map(function(B){var _e=Z[B.ref];if(_e===void 0||_e.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a missing or incomplete way",B.type+"/"+B.ref),vt=!0;return}return{id:B.ref,role:B.role||"outer",way:_e,nodes:_e.nodes.filter(function(Xe){return Xe!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a way",B.type+"/"+B.ref,"with a missing node"),!1)})}}),xt=Pr.compact(xt);var Wt,Ht;Wt=n1(xt.filter(function(B){return B.role==="outer"})),Ht=n1(xt.filter(function(B){return B.role==="inner"}));var ar;function et(B){var _e=function(k,U){for(var Ee=0;Ee<U.length;Ee++)if(tt(U[Ee],k))return!0;return!1},Xe=function(k){return k.map(function(U){return[+U.lat,+U.lon]})},tt=function(k,U){for(var Ee=k[0],Ve=k[1],nt=!1,Ge=0,Et=U.length-1;Ge<U.length;Et=Ge++){var It=U[Ge][0],gr=U[Ge][1],br=U[Et][0],Rt=U[Et][1],Rn=gr>Ve!=Rt>Ve&&Ee<(br-It)*(Ve-gr)/(Rt-gr)+It;Rn&&(nt=!nt)}return nt},ht,ue;for(B=Xe(B),ht=0;ht<Wt.length;ht++)if(ue=Xe(Wt[ht]),_e(ue,B))return ht}ar=Wt.map(function(B){return[B]});for(var vr=0;vr<Ht.length;vr++){var lr=et(Ht[vr]);lr!==void 0?ar[lr].push(Ht[vr]):t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an inner ring with no containing outer")}var Vt=[];if(Vt=Pr.compact(ar.map(function(B){var _e=Pr.compact(B.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains a ring with less than four nodes");return}return Pr.compact(Xe.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(_e.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an empty ring cluster");return}return _e})),Vt.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains no coordinates"),!1;var Se="MultiPolygon";Vt.length===1&&(Se="Polygon",Vt=Vt[0]);var N={type:"Feature",id:it.type+"/"+pt,properties:{type:it.type,id:pt,tags:it.tags||{},relations:D[it.type][it.id]||[],meta:T(it)},geometry:{type:Se,coordinates:Vt}};return vt&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"is tainted"),N.properties.tainted=!0),N};var Ce=We;if(!Pr.isArray(C[j].members)){t.verbose&&console.warn("Multipolygon",C[j].type+"/"+C[j].id,"ignored because it has no members");continue}for(var Y=0,K=0;K<C[j].members.length;K++)C[j].members[K].role=="outer"?Y++:t.verbose&&C[j].members[K].role!="inner"&&console.warn("Multipolygon",C[j].type+"/"+C[j].id,"member",C[j].members[K].type+"/"+C[j].members[K].ref,'ignored because it has an invalid role: "'+C[j].members[K].role+'"');if(C[j].members.forEach(function(it){Z[it.ref]&&(it.role==="outer"&&!b(Z[it.ref].tags,C[j].tags)&&(Z[it.ref].is_skippablerelationmember=!0),it.role==="inner"&&!b(Z[it.ref].tags)&&(Z[it.ref].is_skippablerelationmember=!0))}),Y==0){t.verbose&&console.warn("Multipolygon relation",C[j].type+"/"+C[j].id,"ignored because it has no outer ways");continue}var re=!1;Y==1&&!b(C[j].tags,{type:!0})&&(re=!0);var fe=null;if(!re)fe=We(C[j],C[j]);else{var de=C[j].members.filter(function(it){return it.role==="outer"})[0];if(de=Z[de.ref],de===void 0){t.verbose&&console.warn("Multipolygon relation",C[j].type+"/"+C[j].id,"ignored because outer way",de.type+"/"+de.ref,"is missing");continue}de.is_skippablerelationmember=!0,fe=We(de,C[j])}if(fe===!1){t.verbose&&console.warn("Multipolygon relation",C[j].type+"/"+C[j].id,"ignored because it has invalid geometry");continue}i?i(gg(fe)):he.push(fe)}}for(var j=0;j<E.length;j++)if(Z[E[j].id]===E[j]){if(!Pr.isArray(E[j].nodes)){t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"ignored because it has no nodes");continue}if(!E[j].is_skippablerelationmember){typeof E[j].id!="number"&&(E[j].id=+E[j].id.replace("_fullGeom","")),E[j].tainted=!1,E[j].hidden=!1;var be=new Array;for(K=0;K<E[j].nodes.length;K++)typeof E[j].nodes[K]=="object"?be.push([+E[j].nodes[K].lon,+E[j].nodes[K].lat]):(t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"is tainted by an invalid node"),E[j].tainted=!0);if(be.length<=1){t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"ignored because it contains too few nodes");continue}var Pe="LineString";typeof E[j].nodes[0]<"u"&&typeof E[j].nodes[E[j].nodes.length-1]<"u"&&E[j].nodes[0].id===E[j].nodes[E[j].nodes.length-1].id&&(typeof E[j].tags<"u"&&l(E[j].tags)||E[j].__is_bounds_placeholder)&&(Pe="Polygon",be=[be]);var fe={type:"Feature",id:E[j].type+"/"+E[j].id,properties:{type:E[j].type,id:E[j].id,tags:E[j].tags||{},relations:D.way[E[j].id]||[],meta:T(E[j])},geometry:{type:Pe,coordinates:be}};E[j].tainted&&(t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"is tainted"),fe.properties.tainted=!0),E[j].__is_bounds_placeholder&&(fe.properties.geometry="bounds"),i?i(gg(fe)):Pe=="LineString"?ie.push(fe):he.push(fe)}}return i?!0:(ye={type:"FeatureCollection",features:[]},ye.features=ye.features.concat(he),ye.features=ye.features.concat(ie),ye.features=ye.features.concat(ge),t.flatProperties&&ye.features.forEach(function(Fe){Fe.properties=Pr.merge(Fe.properties.meta,Fe.properties.tags,{id:Fe.properties.type+"/"+Fe.properties.id})}),ye=gg(ye),ye)}function l(w){var E=t.polygonFeatures;if(typeof E=="function")return E(w);if(w.area==="no")return!1;for(var C in w){var b=w[C],T=E[C];if(!(typeof T>"u")&&b!=="no"&&(T===!0||T.included_values&&T.included_values[b]===!0||T.excluded_values&&T.excluded_values[b]!==!0))return!0}return!1}};function n1(e){for(var t=function(b){return b[0]},i=function(b){return b[b.length-1]},a=function(b,T){return b!==void 0&&T!==void 0&&b.id===T.id},c=[],f,d,l,w,E,C;e.length;)for(f=e.pop().nodes.slice(),c.push(f);e.length&&!a(t(f),i(f));){for(d=t(f),l=i(f),w=0;w<e.length;w++)if(C=e[w].nodes,a(l,t(C))){E=f.push,C=C.slice(1);break}else if(a(l,i(C))){E=f.push,C=C.slice(0,-1).reverse();break}else if(a(d,i(C))){E=f.unshift,C=C.slice(0,-1);break}else if(a(d,t(C))){E=f.unshift,C=C.slice(1).reverse();break}else C=E=null;if(!C)break;e.splice(w,1),E.apply(f,C)}return c}s0.toGeojson=s0;var J9=s0;const Y9=vf(J9),i1={type:"FeatureCollection",features:[]},YO=()=>{const[e,t]=yt.useState(!1),i=yt.useCallback(async(d,l,w)=>{var j,le;if(e||(console.log(w),w<16))return i1;t(!0);let E=300;w>17&&(E=200),w>18&&(E=100),w>19&&(E=50),console.log("overpass: loading...");let C="[out:json]";C+=`[timeout:25];
`,C+='nwr["building"]',C+=`(around:${E},${d},${l});
`,C+="out meta geom;",console.log(C);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(b.status!==200)return t(!1),i1;const T=await b.json();console.log("overpass json elements: ",T.elements);const R=Y9(T);console.log("overpass osmtogeojson raw: ",R);for await(const K of R.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const Z=(j=T.elements.filter(se=>K.id?typeof K.id=="number"?se.id===K.id:se.id===parseInt(K.id):!1))==null?void 0:j[0];if(Z&&(K.properties.tags=Z.tags,K.properties.nodes=Z.nodes),K.geometry.type==="Polygon"){const se=L0(K.geometry.coordinates);var L=JO(se);K.properties.center=L.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const G=K.properties.uid;if(G){let se=localStorage.getItem(G+"-icon");if(se===null){const q=await Us.getUser(G);(le=q.img)!=null&&le.href?(se=q.img.href,localStorage.setItem(G+"-icon",q.img.href)):localStorage.setItem(G+"-icon","")}K.properties.userIconHref=se||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[a,c]=yt.useState(!1),f=yt.useCallback(async d=>{console.log("overpass: loading...",d),c(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(w.status!==200){c(!1);return}const E=await w.json();console.log("overpass json parent elements: ",E.elements);const C=250,b=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${C});
      out;
      `;console.log(b);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(T.status!==200){c(!1);return}const R=await T.json();console.log("overpass json child elements: ",R.elements);const L=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${C});
      out;
      `;console.log(L);const j=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(L)}`,{});if(j.status!==200){c(!1);return}const le=await j.json();return console.log("overpass json neighbour elements: ",le.elements),c(!1),[...E.elements,...R.elements,...le.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:a}},Q9=()=>gt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[gt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),gt.jsxs("datalist",{id:"source-list",children:[gt.jsx("option",{value:"survey"}),gt.jsx("option",{value:"local knowledge"}),gt.jsx("option",{value:"extrapolation"}),gt.jsx("option",{value:"estimation from existing data"})]})]}),o1={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},eG=({feature:e,onCancel:t,onSubmit:i})=>{var ye,ge,fe,ie;const{detectCountry:a,loadingCountry:c}=V9(),{fetchOverpassAdmin:f,loadingOverpassAdmin:d}=YO(),l=JSON.parse((ye=e.properties)==null?void 0:ye.center),[w,E]=yt.useState(void 0),[C,b]=yt.useState(),[T,R]=yt.useState(e),[L,j]=yt.useState(!1),[le,K]=yt.useState(!1),[Z,G]=yt.useState(!1),[se,q]=yt.useState(),[W,P]=yt.useState();yt.useEffect(()=>{j(Us.isLoggedIn())},[]),yt.useEffect(()=>{(async()=>{var Y,re;const he=await a(l[0],l[1]);if(E(he),(Y=he==null?void 0:he.properties)!=null&&Y.ISO_A3&&ZP[he.properties.ISO_A3]){const de=ZP[he.properties.ISO_A3];b(de);const be=de.defaultComment+" "+((re=e.properties)==null?void 0:re.id);P(be)}})()},[e]),yt.useEffect(()=>{console.log(T.properties)},[T]);const z=yt.useCallback(async()=>{const he=await Sk.openReverseGeocoder([l[0],l[1]]);R(Y=>{const re={properties:{"addr:province":he.prefecture,"addr:city":he.city,...Y.properties}};return Y.properties=re.properties,Y})},[]),D=yt.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const he=await f(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",he),q(he)},[T]),ee=yt.useCallback(async he=>{var Ce,Fe,He;G(!0),he.preventDefault();const Y=new FormData(he.currentTarget),re=JSON.parse((Ce=e.properties)==null?void 0:Ce.tags);Y.forEach((We,it)=>{typeof We=="string"&&We.length>0&&it!=="comment"&&it!=="source"&&(re[it]=We)});const de={type:"way",id:e.id,version:(Fe=e.properties)==null?void 0:Fe.version,tags:re,nodes:JSON.parse((He=e.properties)==null?void 0:He.nodes)};console.info(JSON.stringify(de,null,2));const be={create:[],modify:[de],delete:[]},Pe=Y.get("comment");Pe&&(o1.comment=Pe.toString());const $e=Y.get("source");$e&&(o1.source=$e.toString()),await Us.uploadChangeset(o1,be),G(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),X=yt.useCallback(()=>{K(!0)},[]);return T.properties?gt.jsxs("div",{children:[gt.jsxs("div",{children:["OSM:"," ",gt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",gt.jsx(xk,{feature:T}),C&&gt.jsxs("span",{children:[" | ","Address:"," ",gt.jsx(G9,{feature:T,fields:C})]})]}),c?gt.jsx(vu,{icon:gx,spin:!0}):gt.jsx(gt.Fragment,{children:C?gt.jsxs("form",{onSubmit:ee,children:[gt.jsx("div",{className:"flex flex-wrap",children:gt.jsx(r1,{feature:T,fieldOption:C.postcodeField,onChange:X})}),gt.jsx("div",{className:"flex flex-wrap",children:C.mainFields.map(he=>gt.jsx(r1,{feature:T,fieldOption:he,onChange:X,suggestList:se},he.key))}),gt.jsx("div",{className:"flex flex-wrap",children:C.detailFields.map(he=>gt.jsx(r1,{feature:T,fieldOption:he,onChange:X},he.key))}),gt.jsxs("div",{className:"flex flex-wrap",children:[gt.jsx(Q9,{}),gt.jsx(W9,{defaultValue:W})]}),gt.jsx("div",{className:"flex flex-wrap",children:gt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[gt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((ge=w==null?void 0:w.properties)==null?void 0:ge.ISO_A3)==="JPN"&&gt.jsx("button",{type:"button",onClick:z,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),gt.jsxs("button",{type:"button",disabled:d,onClick:D,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",d&&gt.jsx(vu,{icon:gx,spin:!0})]}),gt.jsx("button",{disabled:!L||Z||!le,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!L&&gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),gt.jsx(_k,{})]})]})})]}):gt.jsx("div",{className:"flex flex-wrap",children:gt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[gt.jsxs("div",{className:"py-2",children:[gt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(fe=w==null?void 0:w.properties)==null?void 0:fe.NAME," (ISO code:",(ie=w==null?void 0:w.properties)==null?void 0:ie.ISO_A3,") does not support yet."]}),gt.jsx("p",{children:gt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),gt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function tG(e,t){const[i,a]=yt.useState(e);return yt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const rG={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},nG={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function iG(){const e=yt.useRef(null),[t,i]=yt.useState(),a=tG(t,2500),c=yt.useRef(null),[f,d]=yt.useState({type:"FeatureCollection",features:[]}),[l,w]=yt.useState("auto"),[E,C]=yt.useState(),[b,T]=yt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:L}=YO();yt.useEffect(()=>{setTimeout(()=>{var P;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(P=c.current)==null||P.trigger())},500)},[]);const j=yt.useCallback(P=>{const z=P.target.getCenter(),D=P.target.getZoom();i({zoom:D,latitude:z.lat,longitude:z.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),le=yt.useCallback(P=>{i(P.viewState)},[]),K=yt.useCallback(P=>{i(P.viewState)},[]);yt.useEffect(()=>{(async()=>{if(!a)return;const P=a,z=await R(P.latitude,P.longitude,P.zoom);d(z)})()},[a]);const Z=yt.useCallback(P=>{var ye;w("pointer");const{features:z,point:{x:D,y:ee}}=P,X=z&&z[0];X?((ye=e.current)==null||ye.setFeatureState({source:"buildings-source",id:X.id},{hover:!0}),C({feature:X,x:D,y:ee})):C(void 0)},[]),G=yt.useCallback(P=>{var z;w("auto"),(z=e.current)==null||z.querySourceFeatures("buildings-source").map(D=>{var ee;(ee=e.current)==null||ee.setFeatureState({source:"buildings-source",id:D.id},{hover:!1})}),C(void 0)},[]),se=yt.useCallback(P=>{var D;q();const z=P.features&&P.features[0];z&&((D=e.current)==null||D.setFeatureState({source:"buildings-source",id:z.id},{select:!0}),T([z]))},[]),q=yt.useCallback(()=>{var P;(P=e.current)==null||P.querySourceFeatures("buildings-source").map(z=>{var D;(D=e.current)==null||D.setFeatureState({source:"buildings-source",id:z.id},{select:!1})}),T([])},[]),W=yt.useMemo(()=>{let P=25;return t&&(P=t.zoom<18?20:t.zoom<19?25:35),f.features.map((z,D)=>!z.properties||!z.properties.center?null:gt.jsx(oL,{style:{cursor:"pointer"},longitude:z.properties.center[0],latitude:z.properties.center[1],anchor:"center",children:gt.jsx(D6,{feature:z,size:P})},`marker-${D}`))},[f,t]);return gt.jsxs("div",{children:[gt.jsx(_6,{}),gt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:gt.jsx(U6,{viewState:t})}),gt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&gt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:gt.jsx("div",{style:{padding:"10px"},children:b.map(P=>gt.jsx(eG,{feature:P,onCancel:q,onSubmit:q},P.id))})}),gt.jsxs(iL,{ref:e,...t,onMove:le,onMoveEnd:K,onLoad:j,interactiveLayerIds:["buildings-layer-fill"],onClick:se,onMouseEnter:Z,onMouseLeave:G,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:RM,style:{width:"100%",height:"100%"},mapStyle:rG,children:[gt.jsx(uL,{id:"buildings-source",type:"geojson",data:f,children:gt.jsx(lL,{...nG})}),gt.jsx(sL,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),gt.jsx(aL,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),gt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?gt.jsx(vu,{size:"2x",icon:y6}):L?gt.jsx(vu,{size:"2x",icon:gx,spin:!0}):gt.jsx(vu,{size:"2x",icon:m6})}),W,E&&gt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:E.x+5,top:E.y+5},children:[gt.jsx(xk,{feature:E.feature}),gt.jsx("br",{}),gt.jsx(N6,{feature:E.feature}),gt.jsx(x6,{feature:E.feature})]})]})]})]})}var QO={},N0={};N0.byteLength=aG;N0.toByteArray=uG;N0.fromByteArray=fG;var ba=[],hs=[],oG=typeof Uint8Array<"u"?Uint8Array:Array,s1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Eh=0,sG=s1.length;Eh<sG;++Eh)ba[Eh]=s1[Eh],hs[s1.charCodeAt(Eh)]=Eh;hs[45]=62;hs[95]=63;function e4(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function aG(e){var t=e4(e),i=t[0],a=t[1];return(i+a)*3/4-a}function lG(e,t,i){return(t+i)*3/4-i}function uG(e){var t,i=e4(e),a=i[0],c=i[1],f=new oG(lG(e,a,c)),d=0,l=c>0?a-4:a,w;for(w=0;w<l;w+=4)t=hs[e.charCodeAt(w)]<<18|hs[e.charCodeAt(w+1)]<<12|hs[e.charCodeAt(w+2)]<<6|hs[e.charCodeAt(w+3)],f[d++]=t>>16&255,f[d++]=t>>8&255,f[d++]=t&255;return c===2&&(t=hs[e.charCodeAt(w)]<<2|hs[e.charCodeAt(w+1)]>>4,f[d++]=t&255),c===1&&(t=hs[e.charCodeAt(w)]<<10|hs[e.charCodeAt(w+1)]<<4|hs[e.charCodeAt(w+2)]>>2,f[d++]=t>>8&255,f[d++]=t&255),f}function cG(e){return ba[e>>18&63]+ba[e>>12&63]+ba[e>>6&63]+ba[e&63]}function hG(e,t,i){for(var a,c=[],f=t;f<i;f+=3)a=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),c.push(cG(a));return c.join("")}function fG(e){for(var t,i=e.length,a=i%3,c=[],f=16383,d=0,l=i-a;d<l;d+=f)c.push(hG(e,d,d+f>l?l:d+f));return a===1?(t=e[i-1],c.push(ba[t>>2]+ba[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ba[t>>10]+ba[t>>4&63]+ba[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=N0,i=M0,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=Z,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,l.TYPED_ARRAY_SUPPORT=f(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const ue=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(ue,k),ue.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function d(ue){if(ue>c)throw new RangeError('The value "'+ue+'" is invalid for option "size"');const k=new Uint8Array(ue);return Object.setPrototypeOf(k,l.prototype),k}function l(ue,k,U){if(typeof ue=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ue)}return w(ue,k,U)}l.poolSize=8192;function w(ue,k,U){if(typeof ue=="string")return T(ue,k);if(ArrayBuffer.isView(ue))return L(ue);if(ue==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue);if(B(ue,ArrayBuffer)||ue&&B(ue.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(B(ue,SharedArrayBuffer)||ue&&B(ue.buffer,SharedArrayBuffer)))return j(ue,k,U);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=ue.valueOf&&ue.valueOf();if(Ee!=null&&Ee!==ue)return l.from(Ee,k,U);const Ve=le(ue);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return l.from(ue[Symbol.toPrimitive]("string"),k,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue)}l.from=function(ue,k,U){return w(ue,k,U)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function E(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function C(ue,k,U){return E(ue),ue<=0?d(ue):k!==void 0?typeof U=="string"?d(ue).fill(k,U):d(ue).fill(k):d(ue)}l.alloc=function(ue,k,U){return C(ue,k,U)};function b(ue){return E(ue),d(ue<0?0:K(ue)|0)}l.allocUnsafe=function(ue){return b(ue)},l.allocUnsafeSlow=function(ue){return b(ue)};function T(ue,k){if((typeof k!="string"||k==="")&&(k="utf8"),!l.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const U=G(ue,k)|0;let Ee=d(U);const Ve=Ee.write(ue,k);return Ve!==U&&(Ee=Ee.slice(0,Ve)),Ee}function R(ue){const k=ue.length<0?0:K(ue.length)|0,U=d(k);for(let Ee=0;Ee<k;Ee+=1)U[Ee]=ue[Ee]&255;return U}function L(ue){if(B(ue,Uint8Array)){const k=new Uint8Array(ue);return j(k.buffer,k.byteOffset,k.byteLength)}return R(ue)}function j(ue,k,U){if(k<0||ue.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<k+(U||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return k===void 0&&U===void 0?Ee=new Uint8Array(ue):U===void 0?Ee=new Uint8Array(ue,k):Ee=new Uint8Array(ue,k,U),Object.setPrototypeOf(Ee,l.prototype),Ee}function le(ue){if(l.isBuffer(ue)){const k=K(ue.length)|0,U=d(k);return U.length===0||ue.copy(U,0,0,k),U}if(ue.length!==void 0)return typeof ue.length!="number"||_e(ue.length)?d(0):R(ue);if(ue.type==="Buffer"&&Array.isArray(ue.data))return R(ue.data)}function K(ue){if(ue>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ue|0}function Z(ue){return+ue!=ue&&(ue=0),l.alloc(+ue)}l.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==l.prototype},l.compare=function(k,U){if(B(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),B(U,Uint8Array)&&(U=l.from(U,U.offset,U.byteLength)),!l.isBuffer(k)||!l.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===U)return 0;let Ee=k.length,Ve=U.length;for(let nt=0,Ge=Math.min(Ee,Ve);nt<Ge;++nt)if(k[nt]!==U[nt]){Ee=k[nt],Ve=U[nt];break}return Ee<Ve?-1:Ve<Ee?1:0},l.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(k,U){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return l.alloc(0);let Ee;if(U===void 0)for(U=0,Ee=0;Ee<k.length;++Ee)U+=k[Ee].length;const Ve=l.allocUnsafe(U);let nt=0;for(Ee=0;Ee<k.length;++Ee){let Ge=k[Ee];if(B(Ge,Uint8Array))nt+Ge.length>Ve.length?(l.isBuffer(Ge)||(Ge=l.from(Ge)),Ge.copy(Ve,nt)):Uint8Array.prototype.set.call(Ve,Ge,nt);else if(l.isBuffer(Ge))Ge.copy(Ve,nt);else throw new TypeError('"list" argument must be an Array of Buffers');nt+=Ge.length}return Ve};function G(ue,k){if(l.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||B(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ue);const U=ue.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&U===0)return 0;let Ve=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return vr(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return Se(ue).length;default:if(Ve)return Ee?-1:vr(ue).length;k=(""+k).toLowerCase(),Ve=!0}}l.byteLength=G;function se(ue,k,U){let Ee=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,k>>>=0,U<=k))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return de(this,k,U);case"utf8":case"utf-8":return fe(this,k,U);case"ascii":return Y(this,k,U);case"latin1":case"binary":return re(this,k,U);case"base64":return ge(this,k,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,k,U);default:if(Ee)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),Ee=!0}}l.prototype._isBuffer=!0;function q(ue,k,U){const Ee=ue[k];ue[k]=ue[U],ue[U]=Ee}l.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<k;U+=2)q(this,U,U+1);return this},l.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<k;U+=4)q(this,U,U+3),q(this,U+1,U+2);return this},l.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<k;U+=8)q(this,U,U+7),q(this,U+1,U+6),q(this,U+2,U+5),q(this,U+3,U+4);return this},l.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?fe(this,0,k):se.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(k){if(!l.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:l.compare(this,k)===0},l.prototype.inspect=function(){let k="";const U=e.INSPECT_MAX_BYTES;return k=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(k+=" ... "),"<Buffer "+k+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(k,U,Ee,Ve,nt){if(B(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),!l.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(U===void 0&&(U=0),Ee===void 0&&(Ee=k?k.length:0),Ve===void 0&&(Ve=0),nt===void 0&&(nt=this.length),U<0||Ee>k.length||Ve<0||nt>this.length)throw new RangeError("out of range index");if(Ve>=nt&&U>=Ee)return 0;if(Ve>=nt)return-1;if(U>=Ee)return 1;if(U>>>=0,Ee>>>=0,Ve>>>=0,nt>>>=0,this===k)return 0;let Ge=nt-Ve,Et=Ee-U;const It=Math.min(Ge,Et),gr=this.slice(Ve,nt),br=k.slice(U,Ee);for(let Rt=0;Rt<It;++Rt)if(gr[Rt]!==br[Rt]){Ge=gr[Rt],Et=br[Rt];break}return Ge<Et?-1:Et<Ge?1:0};function W(ue,k,U,Ee,Ve){if(ue.length===0)return-1;if(typeof U=="string"?(Ee=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,_e(U)&&(U=Ve?0:ue.length-1),U<0&&(U=ue.length+U),U>=ue.length){if(Ve)return-1;U=ue.length-1}else if(U<0)if(Ve)U=0;else return-1;if(typeof k=="string"&&(k=l.from(k,Ee)),l.isBuffer(k))return k.length===0?-1:P(ue,k,U,Ee,Ve);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(ue,k,U):Uint8Array.prototype.lastIndexOf.call(ue,k,U):P(ue,[k],U,Ee,Ve);throw new TypeError("val must be string, number or Buffer")}function P(ue,k,U,Ee,Ve){let nt=1,Ge=ue.length,Et=k.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(ue.length<2||k.length<2)return-1;nt=2,Ge/=2,Et/=2,U/=2}function It(br,Rt){return nt===1?br[Rt]:br.readUInt16BE(Rt*nt)}let gr;if(Ve){let br=-1;for(gr=U;gr<Ge;gr++)if(It(ue,gr)===It(k,br===-1?0:gr-br)){if(br===-1&&(br=gr),gr-br+1===Et)return br*nt}else br!==-1&&(gr-=gr-br),br=-1}else for(U+Et>Ge&&(U=Ge-Et),gr=U;gr>=0;gr--){let br=!0;for(let Rt=0;Rt<Et;Rt++)if(It(ue,gr+Rt)!==It(k,Rt)){br=!1;break}if(br)return gr}return-1}l.prototype.includes=function(k,U,Ee){return this.indexOf(k,U,Ee)!==-1},l.prototype.indexOf=function(k,U,Ee){return W(this,k,U,Ee,!0)},l.prototype.lastIndexOf=function(k,U,Ee){return W(this,k,U,Ee,!1)};function z(ue,k,U,Ee){U=Number(U)||0;const Ve=ue.length-U;Ee?(Ee=Number(Ee),Ee>Ve&&(Ee=Ve)):Ee=Ve;const nt=k.length;Ee>nt/2&&(Ee=nt/2);let Ge;for(Ge=0;Ge<Ee;++Ge){const Et=parseInt(k.substr(Ge*2,2),16);if(_e(Et))return Ge;ue[U+Ge]=Et}return Ge}function D(ue,k,U,Ee){return N(vr(k,ue.length-U),ue,U,Ee)}function ee(ue,k,U,Ee){return N(lr(k),ue,U,Ee)}function X(ue,k,U,Ee){return N(Se(k),ue,U,Ee)}function ye(ue,k,U,Ee){return N(Vt(k,ue.length-U),ue,U,Ee)}l.prototype.write=function(k,U,Ee,Ve){if(U===void 0)Ve="utf8",Ee=this.length,U=0;else if(Ee===void 0&&typeof U=="string")Ve=U,Ee=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(Ee)?(Ee=Ee>>>0,Ve===void 0&&(Ve="utf8")):(Ve=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const nt=this.length-U;if((Ee===void 0||Ee>nt)&&(Ee=nt),k.length>0&&(Ee<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");let Ge=!1;for(;;)switch(Ve){case"hex":return z(this,k,U,Ee);case"utf8":case"utf-8":return D(this,k,U,Ee);case"ascii":case"latin1":case"binary":return ee(this,k,U,Ee);case"base64":return X(this,k,U,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,k,U,Ee);default:if(Ge)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),Ge=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(ue,k,U){return k===0&&U===ue.length?t.fromByteArray(ue):t.fromByteArray(ue.slice(k,U))}function fe(ue,k,U){U=Math.min(ue.length,U);const Ee=[];let Ve=k;for(;Ve<U;){const nt=ue[Ve];let Ge=null,Et=nt>239?4:nt>223?3:nt>191?2:1;if(Ve+Et<=U){let It,gr,br,Rt;switch(Et){case 1:nt<128&&(Ge=nt);break;case 2:It=ue[Ve+1],(It&192)===128&&(Rt=(nt&31)<<6|It&63,Rt>127&&(Ge=Rt));break;case 3:It=ue[Ve+1],gr=ue[Ve+2],(It&192)===128&&(gr&192)===128&&(Rt=(nt&15)<<12|(It&63)<<6|gr&63,Rt>2047&&(Rt<55296||Rt>57343)&&(Ge=Rt));break;case 4:It=ue[Ve+1],gr=ue[Ve+2],br=ue[Ve+3],(It&192)===128&&(gr&192)===128&&(br&192)===128&&(Rt=(nt&15)<<18|(It&63)<<12|(gr&63)<<6|br&63,Rt>65535&&Rt<1114112&&(Ge=Rt))}}Ge===null?(Ge=65533,Et=1):Ge>65535&&(Ge-=65536,Ee.push(Ge>>>10&1023|55296),Ge=56320|Ge&1023),Ee.push(Ge),Ve+=Et}return he(Ee)}const ie=4096;function he(ue){const k=ue.length;if(k<=ie)return String.fromCharCode.apply(String,ue);let U="",Ee=0;for(;Ee<k;)U+=String.fromCharCode.apply(String,ue.slice(Ee,Ee+=ie));return U}function Y(ue,k,U){let Ee="";U=Math.min(ue.length,U);for(let Ve=k;Ve<U;++Ve)Ee+=String.fromCharCode(ue[Ve]&127);return Ee}function re(ue,k,U){let Ee="";U=Math.min(ue.length,U);for(let Ve=k;Ve<U;++Ve)Ee+=String.fromCharCode(ue[Ve]);return Ee}function de(ue,k,U){const Ee=ue.length;(!k||k<0)&&(k=0),(!U||U<0||U>Ee)&&(U=Ee);let Ve="";for(let nt=k;nt<U;++nt)Ve+=Xe[ue[nt]];return Ve}function be(ue,k,U){const Ee=ue.slice(k,U);let Ve="";for(let nt=0;nt<Ee.length-1;nt+=2)Ve+=String.fromCharCode(Ee[nt]+Ee[nt+1]*256);return Ve}l.prototype.slice=function(k,U){const Ee=this.length;k=~~k,U=U===void 0?Ee:~~U,k<0?(k+=Ee,k<0&&(k=0)):k>Ee&&(k=Ee),U<0?(U+=Ee,U<0&&(U=0)):U>Ee&&(U=Ee),U<k&&(U=k);const Ve=this.subarray(k,U);return Object.setPrototypeOf(Ve,l.prototype),Ve};function Pe(ue,k,U){if(ue%1!==0||ue<0)throw new RangeError("offset is not uint");if(ue+k>U)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(k,U,Ee){k=k>>>0,U=U>>>0,Ee||Pe(k,U,this.length);let Ve=this[k],nt=1,Ge=0;for(;++Ge<U&&(nt*=256);)Ve+=this[k+Ge]*nt;return Ve},l.prototype.readUintBE=l.prototype.readUIntBE=function(k,U,Ee){k=k>>>0,U=U>>>0,Ee||Pe(k,U,this.length);let Ve=this[k+--U],nt=1;for(;U>0&&(nt*=256);)Ve+=this[k+--U]*nt;return Ve},l.prototype.readUint8=l.prototype.readUInt8=function(k,U){return k=k>>>0,U||Pe(k,1,this.length),this[k]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(k,U){return k=k>>>0,U||Pe(k,2,this.length),this[k]|this[k+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(k,U){return k=k>>>0,U||Pe(k,2,this.length),this[k]<<8|this[k+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(k,U){return k=k>>>0,U||Pe(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(k,U){return k=k>>>0,U||Pe(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},l.prototype.readBigUInt64LE=tt(function(k){k=k>>>0,Wt(k,"offset");const U=this[k],Ee=this[k+7];(U===void 0||Ee===void 0)&&Ht(k,this.length-8);const Ve=U+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,nt=this[++k]+this[++k]*2**8+this[++k]*2**16+Ee*2**24;return BigInt(Ve)+(BigInt(nt)<<BigInt(32))}),l.prototype.readBigUInt64BE=tt(function(k){k=k>>>0,Wt(k,"offset");const U=this[k],Ee=this[k+7];(U===void 0||Ee===void 0)&&Ht(k,this.length-8);const Ve=U*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],nt=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Ee;return(BigInt(Ve)<<BigInt(32))+BigInt(nt)}),l.prototype.readIntLE=function(k,U,Ee){k=k>>>0,U=U>>>0,Ee||Pe(k,U,this.length);let Ve=this[k],nt=1,Ge=0;for(;++Ge<U&&(nt*=256);)Ve+=this[k+Ge]*nt;return nt*=128,Ve>=nt&&(Ve-=Math.pow(2,8*U)),Ve},l.prototype.readIntBE=function(k,U,Ee){k=k>>>0,U=U>>>0,Ee||Pe(k,U,this.length);let Ve=U,nt=1,Ge=this[k+--Ve];for(;Ve>0&&(nt*=256);)Ge+=this[k+--Ve]*nt;return nt*=128,Ge>=nt&&(Ge-=Math.pow(2,8*U)),Ge},l.prototype.readInt8=function(k,U){return k=k>>>0,U||Pe(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},l.prototype.readInt16LE=function(k,U){k=k>>>0,U||Pe(k,2,this.length);const Ee=this[k]|this[k+1]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt16BE=function(k,U){k=k>>>0,U||Pe(k,2,this.length);const Ee=this[k+1]|this[k]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt32LE=function(k,U){return k=k>>>0,U||Pe(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},l.prototype.readInt32BE=function(k,U){return k=k>>>0,U||Pe(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},l.prototype.readBigInt64LE=tt(function(k){k=k>>>0,Wt(k,"offset");const U=this[k],Ee=this[k+7];(U===void 0||Ee===void 0)&&Ht(k,this.length-8);const Ve=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(Ee<<24);return(BigInt(Ve)<<BigInt(32))+BigInt(U+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),l.prototype.readBigInt64BE=tt(function(k){k=k>>>0,Wt(k,"offset");const U=this[k],Ee=this[k+7];(U===void 0||Ee===void 0)&&Ht(k,this.length-8);const Ve=(U<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(Ve)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Ee)}),l.prototype.readFloatLE=function(k,U){return k=k>>>0,U||Pe(k,4,this.length),i.read(this,k,!0,23,4)},l.prototype.readFloatBE=function(k,U){return k=k>>>0,U||Pe(k,4,this.length),i.read(this,k,!1,23,4)},l.prototype.readDoubleLE=function(k,U){return k=k>>>0,U||Pe(k,8,this.length),i.read(this,k,!0,52,8)},l.prototype.readDoubleBE=function(k,U){return k=k>>>0,U||Pe(k,8,this.length),i.read(this,k,!1,52,8)};function $e(ue,k,U,Ee,Ve,nt){if(!l.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>Ve||k<nt)throw new RangeError('"value" argument is out of bounds');if(U+Ee>ue.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(k,U,Ee,Ve){if(k=+k,U=U>>>0,Ee=Ee>>>0,!Ve){const Et=Math.pow(2,8*Ee)-1;$e(this,k,U,Ee,Et,0)}let nt=1,Ge=0;for(this[U]=k&255;++Ge<Ee&&(nt*=256);)this[U+Ge]=k/nt&255;return U+Ee},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(k,U,Ee,Ve){if(k=+k,U=U>>>0,Ee=Ee>>>0,!Ve){const Et=Math.pow(2,8*Ee)-1;$e(this,k,U,Ee,Et,0)}let nt=Ee-1,Ge=1;for(this[U+nt]=k&255;--nt>=0&&(Ge*=256);)this[U+nt]=k/Ge&255;return U+Ee},l.prototype.writeUint8=l.prototype.writeUInt8=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,1,255,0),this[U]=k&255,U+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,2,65535,0),this[U]=k&255,this[U+1]=k>>>8,U+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,2,65535,0),this[U]=k>>>8,this[U+1]=k&255,U+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,4,4294967295,0),this[U+3]=k>>>24,this[U+2]=k>>>16,this[U+1]=k>>>8,this[U]=k&255,U+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,4,4294967295,0),this[U]=k>>>24,this[U+1]=k>>>16,this[U+2]=k>>>8,this[U+3]=k&255,U+4};function Ce(ue,k,U,Ee,Ve){xt(k,Ee,Ve,ue,U,7);let nt=Number(k&BigInt(4294967295));ue[U++]=nt,nt=nt>>8,ue[U++]=nt,nt=nt>>8,ue[U++]=nt,nt=nt>>8,ue[U++]=nt;let Ge=Number(k>>BigInt(32)&BigInt(4294967295));return ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,U}function Fe(ue,k,U,Ee,Ve){xt(k,Ee,Ve,ue,U,7);let nt=Number(k&BigInt(4294967295));ue[U+7]=nt,nt=nt>>8,ue[U+6]=nt,nt=nt>>8,ue[U+5]=nt,nt=nt>>8,ue[U+4]=nt;let Ge=Number(k>>BigInt(32)&BigInt(4294967295));return ue[U+3]=Ge,Ge=Ge>>8,ue[U+2]=Ge,Ge=Ge>>8,ue[U+1]=Ge,Ge=Ge>>8,ue[U]=Ge,U+8}l.prototype.writeBigUInt64LE=tt(function(k,U=0){return Ce(this,k,U,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=tt(function(k,U=0){return Fe(this,k,U,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(k,U,Ee,Ve){if(k=+k,U=U>>>0,!Ve){const It=Math.pow(2,8*Ee-1);$e(this,k,U,Ee,It-1,-It)}let nt=0,Ge=1,Et=0;for(this[U]=k&255;++nt<Ee&&(Ge*=256);)k<0&&Et===0&&this[U+nt-1]!==0&&(Et=1),this[U+nt]=(k/Ge>>0)-Et&255;return U+Ee},l.prototype.writeIntBE=function(k,U,Ee,Ve){if(k=+k,U=U>>>0,!Ve){const It=Math.pow(2,8*Ee-1);$e(this,k,U,Ee,It-1,-It)}let nt=Ee-1,Ge=1,Et=0;for(this[U+nt]=k&255;--nt>=0&&(Ge*=256);)k<0&&Et===0&&this[U+nt+1]!==0&&(Et=1),this[U+nt]=(k/Ge>>0)-Et&255;return U+Ee},l.prototype.writeInt8=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,1,127,-128),k<0&&(k=255+k+1),this[U]=k&255,U+1},l.prototype.writeInt16LE=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,2,32767,-32768),this[U]=k&255,this[U+1]=k>>>8,U+2},l.prototype.writeInt16BE=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,2,32767,-32768),this[U]=k>>>8,this[U+1]=k&255,U+2},l.prototype.writeInt32LE=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,4,2147483647,-2147483648),this[U]=k&255,this[U+1]=k>>>8,this[U+2]=k>>>16,this[U+3]=k>>>24,U+4},l.prototype.writeInt32BE=function(k,U,Ee){return k=+k,U=U>>>0,Ee||$e(this,k,U,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[U]=k>>>24,this[U+1]=k>>>16,this[U+2]=k>>>8,this[U+3]=k&255,U+4},l.prototype.writeBigInt64LE=tt(function(k,U=0){return Ce(this,k,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=tt(function(k,U=0){return Fe(this,k,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(ue,k,U,Ee,Ve,nt){if(U+Ee>ue.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function We(ue,k,U,Ee,Ve){return k=+k,U=U>>>0,Ve||He(ue,k,U,4),i.write(ue,k,U,Ee,23,4),U+4}l.prototype.writeFloatLE=function(k,U,Ee){return We(this,k,U,!0,Ee)},l.prototype.writeFloatBE=function(k,U,Ee){return We(this,k,U,!1,Ee)};function it(ue,k,U,Ee,Ve){return k=+k,U=U>>>0,Ve||He(ue,k,U,8),i.write(ue,k,U,Ee,52,8),U+8}l.prototype.writeDoubleLE=function(k,U,Ee){return it(this,k,U,!0,Ee)},l.prototype.writeDoubleBE=function(k,U,Ee){return it(this,k,U,!1,Ee)},l.prototype.copy=function(k,U,Ee,Ve){if(!l.isBuffer(k))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Ve&&Ve!==0&&(Ve=this.length),U>=k.length&&(U=k.length),U||(U=0),Ve>0&&Ve<Ee&&(Ve=Ee),Ve===Ee||k.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),k.length-U<Ve-Ee&&(Ve=k.length-U+Ee);const nt=Ve-Ee;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,Ee,Ve):Uint8Array.prototype.set.call(k,this.subarray(Ee,Ve),U),nt},l.prototype.fill=function(k,U,Ee,Ve){if(typeof k=="string"){if(typeof U=="string"?(Ve=U,U=0,Ee=this.length):typeof Ee=="string"&&(Ve=Ee,Ee=this.length),Ve!==void 0&&typeof Ve!="string")throw new TypeError("encoding must be a string");if(typeof Ve=="string"&&!l.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);if(k.length===1){const Ge=k.charCodeAt(0);(Ve==="utf8"&&Ge<128||Ve==="latin1")&&(k=Ge)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(U<0||this.length<U||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=U)return this;U=U>>>0,Ee=Ee===void 0?this.length:Ee>>>0,k||(k=0);let nt;if(typeof k=="number")for(nt=U;nt<Ee;++nt)this[nt]=k;else{const Ge=l.isBuffer(k)?k:l.from(k,Ve),Et=Ge.length;if(Et===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(nt=0;nt<Ee-U;++nt)this[nt+U]=Ge[nt%Et]}return this};const ct={};function vt(ue,k,U){ct[ue]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ue}]`,this.stack,delete this.name}get code(){return ue}set code(Ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ve,writable:!0})}toString(){return`${this.name} [${ue}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(ue){return ue?`${ue} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(ue,k){return`The "${ue}" argument must be of type number. Received type ${typeof k}`},TypeError),vt("ERR_OUT_OF_RANGE",function(ue,k,U){let Ee=`The value of "${ue}" is out of range.`,Ve=U;return Number.isInteger(U)&&Math.abs(U)>2**32?Ve=Mt(String(U)):typeof U=="bigint"&&(Ve=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(Ve=Mt(Ve)),Ve+="n"),Ee+=` It must be ${k}. Received ${Ve}`,Ee},RangeError);function Mt(ue){let k="",U=ue.length;const Ee=ue[0]==="-"?1:0;for(;U>=Ee+4;U-=3)k=`_${ue.slice(U-3,U)}${k}`;return`${ue.slice(0,U)}${k}`}function pt(ue,k,U){Wt(k,"offset"),(ue[k]===void 0||ue[k+U]===void 0)&&Ht(k,ue.length-(U+1))}function xt(ue,k,U,Ee,Ve,nt){if(ue>U||ue<k){const Ge=typeof k=="bigint"?"n":"";let Et;throw nt>3?k===0||k===BigInt(0)?Et=`>= 0${Ge} and < 2${Ge} ** ${(nt+1)*8}${Ge}`:Et=`>= -(2${Ge} ** ${(nt+1)*8-1}${Ge}) and < 2 ** ${(nt+1)*8-1}${Ge}`:Et=`>= ${k}${Ge} and <= ${U}${Ge}`,new ct.ERR_OUT_OF_RANGE("value",Et,ue)}pt(Ee,Ve,nt)}function Wt(ue,k){if(typeof ue!="number")throw new ct.ERR_INVALID_ARG_TYPE(k,"number",ue)}function Ht(ue,k,U){throw Math.floor(ue)!==ue?(Wt(ue,U),new ct.ERR_OUT_OF_RANGE(U||"offset","an integer",ue)):k<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE(U||"offset",`>= ${U?1:0} and <= ${k}`,ue)}const ar=/[^+/0-9A-Za-z-_]/g;function et(ue){if(ue=ue.split("=")[0],ue=ue.trim().replace(ar,""),ue.length<2)return"";for(;ue.length%4!==0;)ue=ue+"=";return ue}function vr(ue,k){k=k||1/0;let U;const Ee=ue.length;let Ve=null;const nt=[];for(let Ge=0;Ge<Ee;++Ge){if(U=ue.charCodeAt(Ge),U>55295&&U<57344){if(!Ve){if(U>56319){(k-=3)>-1&&nt.push(239,191,189);continue}else if(Ge+1===Ee){(k-=3)>-1&&nt.push(239,191,189);continue}Ve=U;continue}if(U<56320){(k-=3)>-1&&nt.push(239,191,189),Ve=U;continue}U=(Ve-55296<<10|U-56320)+65536}else Ve&&(k-=3)>-1&&nt.push(239,191,189);if(Ve=null,U<128){if((k-=1)<0)break;nt.push(U)}else if(U<2048){if((k-=2)<0)break;nt.push(U>>6|192,U&63|128)}else if(U<65536){if((k-=3)<0)break;nt.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((k-=4)<0)break;nt.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return nt}function lr(ue){const k=[];for(let U=0;U<ue.length;++U)k.push(ue.charCodeAt(U)&255);return k}function Vt(ue,k){let U,Ee,Ve;const nt=[];for(let Ge=0;Ge<ue.length&&!((k-=2)<0);++Ge)U=ue.charCodeAt(Ge),Ee=U>>8,Ve=U%256,nt.push(Ve),nt.push(Ee);return nt}function Se(ue){return t.toByteArray(et(ue))}function N(ue,k,U,Ee){let Ve;for(Ve=0;Ve<Ee&&!(Ve+U>=k.length||Ve>=ue.length);++Ve)k[Ve+U]=ue[Ve];return Ve}function B(ue,k){return ue instanceof k||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===k.name}function _e(ue){return ue!==ue}const Xe=function(){const ue="0123456789abcdef",k=new Array(256);for(let U=0;U<16;++U){const Ee=U*16;for(let Ve=0;Ve<16;++Ve)k[Ee+Ve]=ue[U]+ue[Ve]}return k}();function tt(ue){return typeof BigInt>"u"?ht:ue}function ht(){throw new Error("BigInt not supported")}})(QO);window.Buffer=QO.Buffer;_z.render(gt.jsx(_w.StrictMode,{children:gt.jsx(iG,{})}),document.getElementById("root"));

function Gw(u,c){for(var p=0;p<c.length;p++){const v=c[p];if(typeof v!="string"&&!Array.isArray(v)){for(const x in v)if(x!=="default"&&!(x in u)){const T=Object.getOwnPropertyDescriptor(v,x);T&&Object.defineProperty(u,x,T.get?T:{enumerable:!0,get:()=>v[x]})}}}return Object.freeze(Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))v(x);new MutationObserver(x=>{for(const T of x)if(T.type==="childList")for(const w of T.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&v(w)}).observe(document,{childList:!0,subtree:!0});function p(x){const T={};return x.integrity&&(T.integrity=x.integrity),x.referrerPolicy&&(T.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?T.credentials="include":x.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function v(x){if(x.ep)return;x.ep=!0;const T=p(x);fetch(x.href,T)}})();var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Df(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function c0(u){if(u.__esModule)return u;var c=u.default;if(typeof c=="function"){var p=function v(){return this instanceof v?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};p.prototype=c.prototype}else p={};return Object.defineProperty(p,"__esModule",{value:!0}),Object.keys(u).forEach(function(v){var x=Object.getOwnPropertyDescriptor(u,v);Object.defineProperty(p,v,x.get?x:{enumerable:!0,get:function(){return u[v]}})}),p}var ug={exports:{}},hf={},cg={exports:{}},hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function Hw(){if(dv)return hr;dv=1;var u=Symbol.for("react.element"),c=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),w=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),C=Symbol.iterator;function k(ie){return ie===null||typeof ie!="object"?null:(ie=C&&ie[C]||ie["@@iterator"],typeof ie=="function"?ie:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,Q={};function he(ie,ve,De){this.props=ie,this.context=ve,this.refs=Q,this.updater=De||V}he.prototype.isReactComponent={},he.prototype.setState=function(ie,ve){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,ve,"setState")},he.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function Te(){}Te.prototype=he.prototype;function we(ie,ve,De){this.props=ie,this.context=ve,this.refs=Q,this.updater=De||V}var _e=we.prototype=new Te;_e.constructor=we,N(_e,he.prototype),_e.isPureReactComponent=!0;var Me=Array.isArray,ne=Object.prototype.hasOwnProperty,ce={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function $(ie,ve,De){var Oe,Le={},Ye=null,tt=null;if(ve!=null)for(Oe in ve.ref!==void 0&&(tt=ve.ref),ve.key!==void 0&&(Ye=""+ve.key),ve)ne.call(ve,Oe)&&!M.hasOwnProperty(Oe)&&(Le[Oe]=ve[Oe]);var pt=arguments.length-2;if(pt===1)Le.children=De;else if(1<pt){for(var _t=Array(pt),Pt=0;Pt<pt;Pt++)_t[Pt]=arguments[Pt+2];Le.children=_t}if(ie&&ie.defaultProps)for(Oe in pt=ie.defaultProps,pt)Le[Oe]===void 0&&(Le[Oe]=pt[Oe]);return{$$typeof:u,type:ie,key:Ye,ref:tt,props:Le,_owner:ce.current}}function U(ie,ve){return{$$typeof:u,type:ie.type,key:ve,ref:ie.ref,props:ie.props,_owner:ie._owner}}function de(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===u}function K(ie){var ve={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(De){return ve[De]})}var j=/\/+/g;function W(ie,ve){return typeof ie=="object"&&ie!==null&&ie.key!=null?K(""+ie.key):ve.toString(36)}function J(ie,ve,De,Oe,Le){var Ye=typeof ie;(Ye==="undefined"||Ye==="boolean")&&(ie=null);var tt=!1;if(ie===null)tt=!0;else switch(Ye){case"string":case"number":tt=!0;break;case"object":switch(ie.$$typeof){case u:case c:tt=!0}}if(tt)return tt=ie,Le=Le(tt),ie=Oe===""?"."+W(tt,0):Oe,Me(Le)?(De="",ie!=null&&(De=ie.replace(j,"$&/")+"/"),J(Le,ve,De,"",function(Pt){return Pt})):Le!=null&&(de(Le)&&(Le=U(Le,De+(!Le.key||tt&&tt.key===Le.key?"":(""+Le.key).replace(j,"$&/")+"/")+ie)),ve.push(Le)),1;if(tt=0,Oe=Oe===""?".":Oe+":",Me(ie))for(var pt=0;pt<ie.length;pt++){Ye=ie[pt];var _t=Oe+W(Ye,pt);tt+=J(Ye,ve,De,_t,Le)}else if(_t=k(ie),typeof _t=="function")for(ie=_t.call(ie),pt=0;!(Ye=ie.next()).done;)Ye=Ye.value,_t=Oe+W(Ye,pt++),tt+=J(Ye,ve,De,_t,Le);else if(Ye==="object")throw ve=String(ie),Error("Objects are not valid as a React child (found: "+(ve==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":ve)+"). If you meant to render a collection of children, use an array instead.");return tt}function re(ie,ve,De){if(ie==null)return ie;var Oe=[],Le=0;return J(ie,Oe,"","",function(Ye){return ve.call(De,Ye,Le++)}),Oe}function ue(ie){if(ie._status===-1){var ve=ie._result;ve=ve(),ve.then(function(De){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=De)},function(De){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=De)}),ie._status===-1&&(ie._status=0,ie._result=ve)}if(ie._status===1)return ie._result.default;throw ie._result}var te={current:null},se={transition:null},xe={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:se,ReactCurrentOwner:ce};return hr.Children={map:re,forEach:function(ie,ve,De){re(ie,function(){ve.apply(this,arguments)},De)},count:function(ie){var ve=0;return re(ie,function(){ve++}),ve},toArray:function(ie){return re(ie,function(ve){return ve})||[]},only:function(ie){if(!de(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}},hr.Component=he,hr.Fragment=p,hr.Profiler=x,hr.PureComponent=we,hr.StrictMode=v,hr.Suspense=L,hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,hr.cloneElement=function(ie,ve,De){if(ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ie+".");var Oe=N({},ie.props),Le=ie.key,Ye=ie.ref,tt=ie._owner;if(ve!=null){if(ve.ref!==void 0&&(Ye=ve.ref,tt=ce.current),ve.key!==void 0&&(Le=""+ve.key),ie.type&&ie.type.defaultProps)var pt=ie.type.defaultProps;for(_t in ve)ne.call(ve,_t)&&!M.hasOwnProperty(_t)&&(Oe[_t]=ve[_t]===void 0&&pt!==void 0?pt[_t]:ve[_t])}var _t=arguments.length-2;if(_t===1)Oe.children=De;else if(1<_t){pt=Array(_t);for(var Pt=0;Pt<_t;Pt++)pt[Pt]=arguments[Pt+2];Oe.children=pt}return{$$typeof:u,type:ie.type,key:Le,ref:Ye,props:Oe,_owner:tt}},hr.createContext=function(ie){return ie={$$typeof:w,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ie.Provider={$$typeof:T,_context:ie},ie.Consumer=ie},hr.createElement=$,hr.createFactory=function(ie){var ve=$.bind(null,ie);return ve.type=ie,ve},hr.createRef=function(){return{current:null}},hr.forwardRef=function(ie){return{$$typeof:a,render:ie}},hr.isValidElement=de,hr.lazy=function(ie){return{$$typeof:D,_payload:{_status:-1,_result:ie},_init:ue}},hr.memo=function(ie,ve){return{$$typeof:R,type:ie,compare:ve===void 0?null:ve}},hr.startTransition=function(ie){var ve=se.transition;se.transition={};try{ie()}finally{se.transition=ve}},hr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},hr.useCallback=function(ie,ve){return te.current.useCallback(ie,ve)},hr.useContext=function(ie){return te.current.useContext(ie)},hr.useDebugValue=function(){},hr.useDeferredValue=function(ie){return te.current.useDeferredValue(ie)},hr.useEffect=function(ie,ve){return te.current.useEffect(ie,ve)},hr.useId=function(){return te.current.useId()},hr.useImperativeHandle=function(ie,ve,De){return te.current.useImperativeHandle(ie,ve,De)},hr.useInsertionEffect=function(ie,ve){return te.current.useInsertionEffect(ie,ve)},hr.useLayoutEffect=function(ie,ve){return te.current.useLayoutEffect(ie,ve)},hr.useMemo=function(ie,ve){return te.current.useMemo(ie,ve)},hr.useReducer=function(ie,ve,De){return te.current.useReducer(ie,ve,De)},hr.useRef=function(ie){return te.current.useRef(ie)},hr.useState=function(ie){return te.current.useState(ie)},hr.useSyncExternalStore=function(ie,ve,De){return te.current.useSyncExternalStore(ie,ve,De)},hr.useTransition=function(){return te.current.useTransition()},hr.version="18.2.0",hr}var fv;function h0(){return fv||(fv=1,cg.exports=Hw()),cg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function Zw(){if(pv)return hf;pv=1;var u=h0(),c=Symbol.for("react.element"),p=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,x=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T={key:!0,ref:!0,__self:!0,__source:!0};function w(a,L,R){var D,C={},k=null,V=null;R!==void 0&&(k=""+R),L.key!==void 0&&(k=""+L.key),L.ref!==void 0&&(V=L.ref);for(D in L)v.call(L,D)&&!T.hasOwnProperty(D)&&(C[D]=L[D]);if(a&&a.defaultProps)for(D in L=a.defaultProps,L)C[D]===void 0&&(C[D]=L[D]);return{$$typeof:c,type:a,key:k,ref:V,props:C,_owner:x.current}}return hf.Fragment=p,hf.jsx=w,hf.jsxs=w,hf}var mv;function Ww(){return mv||(mv=1,ug.exports=Zw()),ug.exports}var Mt=Ww(),zt=h0();const d0=Df(zt);var hg={exports:{}},Gs={},dg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function qw(){return gv||(gv=1,function(u){function c(se,xe){var ie=se.length;se.push(xe);e:for(;0<ie;){var ve=ie-1>>>1,De=se[ve];if(0<x(De,xe))se[ve]=xe,se[ie]=De,ie=ve;else break e}}function p(se){return se.length===0?null:se[0]}function v(se){if(se.length===0)return null;var xe=se[0],ie=se.pop();if(ie!==xe){se[0]=ie;e:for(var ve=0,De=se.length,Oe=De>>>1;ve<Oe;){var Le=2*(ve+1)-1,Ye=se[Le],tt=Le+1,pt=se[tt];if(0>x(Ye,ie))tt<De&&0>x(pt,Ye)?(se[ve]=pt,se[tt]=ie,ve=tt):(se[ve]=Ye,se[Le]=ie,ve=Le);else if(tt<De&&0>x(pt,ie))se[ve]=pt,se[tt]=ie,ve=tt;else break e}}return xe}function x(se,xe){var ie=se.sortIndex-xe.sortIndex;return ie!==0?ie:se.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var T=performance;u.unstable_now=function(){return T.now()}}else{var w=Date,a=w.now();u.unstable_now=function(){return w.now()-a}}var L=[],R=[],D=1,C=null,k=3,V=!1,N=!1,Q=!1,he=typeof setTimeout=="function"?setTimeout:null,Te=typeof clearTimeout=="function"?clearTimeout:null,we=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _e(se){for(var xe=p(R);xe!==null;){if(xe.callback===null)v(R);else if(xe.startTime<=se)v(R),xe.sortIndex=xe.expirationTime,c(L,xe);else break;xe=p(R)}}function Me(se){if(Q=!1,_e(se),!N)if(p(L)!==null)N=!0,ue(ne);else{var xe=p(R);xe!==null&&te(Me,xe.startTime-se)}}function ne(se,xe){N=!1,Q&&(Q=!1,Te($),$=-1),V=!0;var ie=k;try{for(_e(xe),C=p(L);C!==null&&(!(C.expirationTime>xe)||se&&!K());){var ve=C.callback;if(typeof ve=="function"){C.callback=null,k=C.priorityLevel;var De=ve(C.expirationTime<=xe);xe=u.unstable_now(),typeof De=="function"?C.callback=De:C===p(L)&&v(L),_e(xe)}else v(L);C=p(L)}if(C!==null)var Oe=!0;else{var Le=p(R);Le!==null&&te(Me,Le.startTime-xe),Oe=!1}return Oe}finally{C=null,k=ie,V=!1}}var ce=!1,M=null,$=-1,U=5,de=-1;function K(){return!(u.unstable_now()-de<U)}function j(){if(M!==null){var se=u.unstable_now();de=se;var xe=!0;try{xe=M(!0,se)}finally{xe?W():(ce=!1,M=null)}}else ce=!1}var W;if(typeof we=="function")W=function(){we(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,re=J.port2;J.port1.onmessage=j,W=function(){re.postMessage(null)}}else W=function(){he(j,0)};function ue(se){M=se,ce||(ce=!0,W())}function te(se,xe){$=he(function(){se(u.unstable_now())},xe)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(se){se.callback=null},u.unstable_continueExecution=function(){N||V||(N=!0,ue(ne))},u.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<se?Math.floor(1e3/se):5},u.unstable_getCurrentPriorityLevel=function(){return k},u.unstable_getFirstCallbackNode=function(){return p(L)},u.unstable_next=function(se){switch(k){case 1:case 2:case 3:var xe=3;break;default:xe=k}var ie=k;k=xe;try{return se()}finally{k=ie}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(se,xe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ie=k;k=se;try{return xe()}finally{k=ie}},u.unstable_scheduleCallback=function(se,xe,ie){var ve=u.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ve+ie:ve):ie=ve,se){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ie+De,se={id:D++,callback:xe,priorityLevel:se,startTime:ie,expirationTime:De,sortIndex:-1},ie>ve?(se.sortIndex=ie,c(R,se),p(L)===null&&se===p(R)&&(Q?(Te($),$=-1):Q=!0,te(Me,ie-ve))):(se.sortIndex=De,c(L,se),N||V||(N=!0,ue(ne))),se},u.unstable_shouldYield=K,u.unstable_wrapCallback=function(se){var xe=k;return function(){var ie=k;k=xe;try{return se.apply(this,arguments)}finally{k=ie}}}}(fg)),fg}var yv;function Xw(){return yv||(yv=1,dg.exports=qw()),dg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function Kw(){if(vv)return Gs;vv=1;var u=h0(),c=Xw();function p(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,m=1;m<arguments.length;m++)s+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,x={};function T(i,s){w(i,s),w(i+"Capture",s)}function w(i,s){for(x[i]=s,i=0;i<s.length;i++)v.add(s[i])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L=Object.prototype.hasOwnProperty,R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D={},C={};function k(i){return L.call(C,i)?!0:L.call(D,i)?!1:R.test(i)?C[i]=!0:(D[i]=!0,!1)}function V(i,s,m,S){if(m!==null&&m.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return S?!1:m!==null?!m.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,s,m,S){if(s===null||typeof s>"u"||V(i,s,m,S))return!0;if(S)return!1;if(m!==null)switch(m.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Q(i,s,m,S,F,Z,Se){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=S,this.attributeNamespace=F,this.mustUseProperty=m,this.propertyName=i,this.type=s,this.sanitizeURL=Z,this.removeEmptyString=Se}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){he[i]=new Q(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];he[s]=new Q(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){he[i]=new Q(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){he[i]=new Q(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){he[i]=new Q(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){he[i]=new Q(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){he[i]=new Q(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){he[i]=new Q(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){he[i]=new Q(i,5,!1,i.toLowerCase(),null,!1,!1)});var Te=/[\-:]([a-z])/g;function we(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(Te,we);he[s]=new Q(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(Te,we);he[s]=new Q(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(Te,we);he[s]=new Q(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){he[i]=new Q(i,1,!1,i.toLowerCase(),null,!1,!1)}),he.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){he[i]=new Q(i,1,!1,i.toLowerCase(),null,!0,!0)});function _e(i,s,m,S){var F=he.hasOwnProperty(s)?he[s]:null;(F!==null?F.type!==0:S||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,m,F,S)&&(m=null),S||F===null?k(s)&&(m===null?i.removeAttribute(s):i.setAttribute(s,""+m)):F.mustUseProperty?i[F.propertyName]=m===null?F.type===3?!1:"":m:(s=F.attributeName,S=F.attributeNamespace,m===null?i.removeAttribute(s):(F=F.type,m=F===3||F===4&&m===!0?"":""+m,S?i.setAttributeNS(S,s,m):i.setAttribute(s,m))))}var Me=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),ce=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),K=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),se=Symbol.iterator;function xe(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ie=Object.assign,ve;function De(i){if(ve===void 0)try{throw Error()}catch(m){var s=m.stack.trim().match(/\n( *(at )?)/);ve=s&&s[1]||""}return`
`+ve+i}var Oe=!1;function Le(i,s){if(!i||Oe)return"";Oe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(bt){var S=bt}Reflect.construct(i,[],s)}else{try{s.call()}catch(bt){S=bt}i.call(s.prototype)}else{try{throw Error()}catch(bt){S=bt}i()}}catch(bt){if(bt&&S&&typeof bt.stack=="string"){for(var F=bt.stack.split(`
`),Z=S.stack.split(`
`),Se=F.length-1,Xe=Z.length-1;1<=Se&&0<=Xe&&F[Se]!==Z[Xe];)Xe--;for(;1<=Se&&0<=Xe;Se--,Xe--)if(F[Se]!==Z[Xe]){if(Se!==1||Xe!==1)do if(Se--,Xe--,0>Xe||F[Se]!==Z[Xe]){var ot=`
`+F[Se].replace(" at new "," at ");return i.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",i.displayName)),ot}while(1<=Se&&0<=Xe);break}}}finally{Oe=!1,Error.prepareStackTrace=m}return(i=i?i.displayName||i.name:"")?De(i):""}function Ye(i){switch(i.tag){case 5:return De(i.type);case 16:return De("Lazy");case 13:return De("Suspense");case 19:return De("SuspenseList");case 0:case 2:case 15:return i=Le(i.type,!1),i;case 11:return i=Le(i.type.render,!1),i;case 1:return i=Le(i.type,!0),i;default:return""}}function tt(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case ce:return"Portal";case U:return"Profiler";case $:return"StrictMode";case W:return"Suspense";case J:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case K:return(i.displayName||"Context")+".Consumer";case de:return(i._context.displayName||"Context")+".Provider";case j:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case re:return s=i.displayName||null,s!==null?s:tt(i.type)||"Memo";case ue:s=i._payload,i=i._init;try{return tt(i(s))}catch{}}return null}function pt(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tt(s);case 8:return s===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function _t(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pt(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Wt(i){var s=Pt(i)?"checked":"value",m=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),S=""+i[s];if(!i.hasOwnProperty(s)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var F=m.get,Z=m.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return F.call(this)},set:function(Se){S=""+Se,Z.call(this,Se)}}),Object.defineProperty(i,s,{enumerable:m.enumerable}),{getValue:function(){return S},setValue:function(Se){S=""+Se},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Tt(i){i._valueTracker||(i._valueTracker=Wt(i))}function kt(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var m=s.getValue(),S="";return i&&(S=Pt(i)?i.checked?"true":"false":i.value),i=S,i!==m?(s.setValue(i),!0):!1}function Yt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function un(i,s){var m=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??i._wrapperState.initialChecked})}function In(i,s){var m=s.defaultValue==null?"":s.defaultValue,S=s.checked!=null?s.checked:s.defaultChecked;m=_t(s.value!=null?s.value:m),i._wrapperState={initialChecked:S,initialValue:m,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function at(i,s){s=s.checked,s!=null&&_e(i,"checked",s,!1)}function kn(i,s){at(i,s);var m=_t(s.value),S=s.type;if(m!=null)S==="number"?(m===0&&i.value===""||i.value!=m)&&(i.value=""+m):i.value!==""+m&&(i.value=""+m);else if(S==="submit"||S==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?en(i,s.type,m):s.hasOwnProperty("defaultValue")&&en(i,s.type,_t(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function cn(i,s,m){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var S=s.type;if(!(S!=="submit"&&S!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,m||s===i.value||(i.value=s),i.defaultValue=s}m=i.name,m!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,m!==""&&(i.name=m)}function en(i,s,m){(s!=="number"||Yt(i.ownerDocument)!==i)&&(m==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+m&&(i.defaultValue=""+m))}var ze=Array.isArray;function G(i,s,m,S){if(i=i.options,s){s={};for(var F=0;F<m.length;F++)s["$"+m[F]]=!0;for(m=0;m<i.length;m++)F=s.hasOwnProperty("$"+i[m].value),i[m].selected!==F&&(i[m].selected=F),F&&S&&(i[m].defaultSelected=!0)}else{for(m=""+_t(m),s=null,F=0;F<i.length;F++){if(i[F].value===m){i[F].selected=!0,S&&(i[F].defaultSelected=!0);return}s!==null||i[F].disabled||(s=i[F])}s!==null&&(s.selected=!0)}}function H(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ce(i,s){var m=s.value;if(m==null){if(m=s.children,s=s.defaultValue,m!=null){if(s!=null)throw Error(p(92));if(ze(m)){if(1<m.length)throw Error(p(93));m=m[0]}s=m}s==null&&(s=""),m=s}i._wrapperState={initialValue:_t(m)}}function rt(i,s){var m=_t(s.value),S=_t(s.defaultValue);m!=null&&(m=""+m,m!==i.value&&(i.value=m),s.defaultValue==null&&i.defaultValue!==m&&(i.defaultValue=m)),S!=null&&(i.defaultValue=""+S)}function ct(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function Et(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ye(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?Et(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var z,q=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,m,S,F){MSApp.execUnsafeLocalFunction(function(){return i(s,m,S,F)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(z=z||document.createElement("div"),z.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=z.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function Re(i,s){if(s){var m=i.firstChild;if(m&&m===i.lastChild&&m.nodeType===3){m.nodeValue=s;return}}i.textContent=s}var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function(i){ft.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),Je[s]=Je[i]})});function Qe(i,s,m){return s==null||typeof s=="boolean"||s===""?"":m||typeof s!="number"||s===0||Je.hasOwnProperty(i)&&Je[i]?(""+s).trim():s+"px"}function jt(i,s){i=i.style;for(var m in s)if(s.hasOwnProperty(m)){var S=m.indexOf("--")===0,F=Qe(m,s[m],S);m==="float"&&(m="cssFloat"),S?i.setProperty(m,F):i[m]=F}}var Bt=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zn(i,s){if(s){if(Bt[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function Zn(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qt=null;function Or(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var qr=null,Xr=null,Tr=null;function Ue(i){if(i=Mu(i)){if(typeof qr!="function")throw Error(p(280));var s=i.stateNode;s&&(s=ku(s),qr(i.stateNode,i.type,s))}}function me(i){Xr?Tr?Tr.push(i):Tr=[i]:Xr=i}function pe(){if(Xr){var i=Xr,s=Tr;if(Tr=Xr=null,Ue(i),s)for(i=0;i<s.length;i++)Ue(s[i])}}function Pe(i,s){return i(s)}function je(){}var Be=!1;function He(i,s,m){if(Be)return i(s,m);Be=!0;try{return Pe(i,s,m)}finally{Be=!1,(Xr!==null||Tr!==null)&&(je(),pe())}}function nt(i,s){var m=i.stateNode;if(m===null)return null;var S=ku(m);if(S===null)return null;m=S[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(i=i.type,S=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!S;break e;default:i=!1}if(i)return null;if(m&&typeof m!="function")throw Error(p(231,s,typeof m));return m}var Ze=!1;if(a)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{Ze=!1}function It(i,s,m,S,F,Z,Se,Xe,ot){var bt=Array.prototype.slice.call(arguments,3);try{s.apply(m,bt)}catch(Ot){this.onError(Ot)}}var gt=!1,Ut=null,pn=!1,vn=null,Jn={onError:function(i){gt=!0,Ut=i}};function jn(i,s,m,S,F,Z,Se,Xe,ot){gt=!1,Ut=null,It.apply(Jn,arguments)}function Qn(i,s,m,S,F,Z,Se,Xe,ot){if(jn.apply(this,arguments),gt){if(gt){var bt=Ut;gt=!1,Ut=null}else throw Error(p(198));pn||(pn=!0,vn=bt)}}function Un(i){var s=i,m=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,s.flags&4098&&(m=s.return),i=s.return;while(i)}return s.tag===3?m:null}function jr(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function xr(i){if(Un(i)!==i)throw Error(p(188))}function Wn(i){var s=i.alternate;if(!s){if(s=Un(i),s===null)throw Error(p(188));return s!==i?null:i}for(var m=i,S=s;;){var F=m.return;if(F===null)break;var Z=F.alternate;if(Z===null){if(S=F.return,S!==null){m=S;continue}break}if(F.child===Z.child){for(Z=F.child;Z;){if(Z===m)return xr(F),i;if(Z===S)return xr(F),s;Z=Z.sibling}throw Error(p(188))}if(m.return!==S.return)m=F,S=Z;else{for(var Se=!1,Xe=F.child;Xe;){if(Xe===m){Se=!0,m=F,S=Z;break}if(Xe===S){Se=!0,S=F,m=Z;break}Xe=Xe.sibling}if(!Se){for(Xe=Z.child;Xe;){if(Xe===m){Se=!0,m=Z,S=F;break}if(Xe===S){Se=!0,S=Z,m=F;break}Xe=Xe.sibling}if(!Se)throw Error(p(189))}}if(m.alternate!==S)throw Error(p(190))}if(m.tag!==3)throw Error(p(188));return m.stateNode.current===m?i:s}function lr(i){return i=Wn(i),i!==null?br(i):null}function br(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=br(i);if(s!==null)return s;i=i.sibling}return null}var ii=c.unstable_scheduleCallback,ci=c.unstable_cancelCallback,zi=c.unstable_shouldYield,is=c.unstable_requestPaint,Pn=c.unstable_now,Pl=c.unstable_getCurrentPriorityLevel,Xn=c.unstable_ImmediatePriority,Kr=c.unstable_UserBlockingPriority,_i=c.unstable_NormalPriority,Rc=c.unstable_LowPriority,Qi=c.unstable_IdlePriority,xi=null,Ri=null;function Fi(i){if(Ri&&typeof Ri.onCommitFiberRoot=="function")try{Ri.onCommitFiberRoot(xi,i,void 0,(i.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:$r,Qa=Math.log,Po=Math.LN2;function $r(i){return i>>>=0,i===0?32:31-(Qa(i)/Po|0)|0}var Zs=64,Br=4194304;function Ws(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function $i(i,s){var m=i.pendingLanes;if(m===0)return 0;var S=0,F=i.suspendedLanes,Z=i.pingedLanes,Se=m&268435455;if(Se!==0){var Xe=Se&~F;Xe!==0?S=Ws(Xe):(Z&=Se,Z!==0&&(S=Ws(Z)))}else Se=m&~F,Se!==0?S=Ws(Se):Z!==0&&(S=Ws(Z));if(S===0)return 0;if(s!==0&&s!==S&&!(s&F)&&(F=S&-S,Z=s&-s,F>=Z||F===16&&(Z&4194240)!==0))return s;if(S&4&&(S|=m&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=S;0<s;)m=31-fr(s),F=1<<m,S|=i[m],s&=~F;return S}function Fc(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Al(i,s){for(var m=i.suspendedLanes,S=i.pingedLanes,F=i.expirationTimes,Z=i.pendingLanes;0<Z;){var Se=31-fr(Z),Xe=1<<Se,ot=F[Se];ot===-1?(!(Xe&m)||Xe&S)&&(F[Se]=Fc(Xe,s)):ot<=s&&(i.expiredLanes|=Xe),Z&=~Xe}}function os(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function co(){var i=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),i}function nr(i){for(var s=[],m=0;31>m;m++)s.push(i);return s}function qs(i,s,m){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-fr(s),i[s]=m}function eo(i,s){var m=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var S=i.eventTimes;for(i=i.expirationTimes;0<m;){var F=31-fr(m),Z=1<<F;s[F]=0,S[F]=-1,i[F]=-1,m&=~Z}}function ks(i,s){var m=i.entangledLanes|=s;for(i=i.entanglements;m;){var S=31-fr(m),F=1<<S;F&s|i[S]&s&&(i[S]|=s),m&=~F}}var ur=0;function el(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ma,ka,zs,tl,yu,Xs=!1,Ml=[],oi=null,ho=null,Gr=null,hi=new Map,Rs=new Map,fo=[],kl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(i,s){switch(i){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(s.pointerId)}}function Uo(i,s,m,S,F,Z){return i===null||i.nativeEvent!==Z?(i={blockedOn:s,domEventName:m,eventSystemFlags:S,nativeEvent:Z,targetContainers:[F]},s!==null&&(s=Mu(s),s!==null&&ka(s)),i):(i.eventSystemFlags|=S,s=i.targetContainers,F!==null&&s.indexOf(F)===-1&&s.push(F),i)}function _u(i,s,m,S,F){switch(s){case"focusin":return oi=Uo(oi,i,s,m,S,F),!0;case"dragenter":return ho=Uo(ho,i,s,m,S,F),!0;case"mouseover":return Gr=Uo(Gr,i,s,m,S,F),!0;case"pointerover":var Z=F.pointerId;return hi.set(Z,Uo(hi.get(Z)||null,i,s,m,S,F)),!0;case"gotpointercapture":return Z=F.pointerId,Rs.set(Z,Uo(Rs.get(Z)||null,i,s,m,S,F)),!0}return!1}function xu(i){var s=aa(i.target);if(s!==null){var m=Un(s);if(m!==null){if(s=m.tag,s===13){if(s=jr(m),s!==null){i.blockedOn=s,yu(i.priority,function(){zs(m)});return}}else if(s===3&&m.stateNode.current.memoizedState.isDehydrated){i.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nl(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var m=rl(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(m===null){m=i.nativeEvent;var S=new m.constructor(m.type,m);qt=S,m.target.dispatchEvent(S),qt=null}else return s=Mu(m),s!==null&&ka(s),i.blockedOn=m,!1;s.shift()}return!0}function rc(i,s,m){nl(i)&&m.delete(s)}function Oc(){Xs=!1,oi!==null&&nl(oi)&&(oi=null),ho!==null&&nl(ho)&&(ho=null),Gr!==null&&nl(Gr)&&(Gr=null),hi.forEach(rc),Rs.forEach(rc)}function Ks(i,s){i.blockedOn===s&&(i.blockedOn=null,Xs||(Xs=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Oc)))}function ss(i){function s(F){return Ks(F,i)}if(0<Ml.length){Ks(Ml[0],i);for(var m=1;m<Ml.length;m++){var S=Ml[m];S.blockedOn===i&&(S.blockedOn=null)}}for(oi!==null&&Ks(oi,i),ho!==null&&Ks(ho,i),Gr!==null&&Ks(Gr,i),hi.forEach(s),Rs.forEach(s),m=0;m<fo.length;m++)S=fo[m],S.blockedOn===i&&(S.blockedOn=null);for(;0<fo.length&&(m=fo[0],m.blockedOn===null);)xu(m),m.blockedOn===null&&fo.shift()}var as=Me.ReactCurrentBatchConfig,Ys=!0;function wu(i,s,m,S){var F=ur,Z=as.transition;as.transition=null;try{ur=1,po(i,s,m,S)}finally{ur=F,as.transition=Z}}function zl(i,s,m,S){var F=ur,Z=as.transition;as.transition=null;try{ur=4,po(i,s,m,S)}finally{ur=F,as.transition=Z}}function po(i,s,m,S){if(Ys){var F=rl(i,s,m,S);if(F===null)Au(i,s,S,Rl,m),vu(i,S);else if(_u(F,i,s,m,S))S.stopPropagation();else if(vu(i,S),s&4&&-1<kl.indexOf(i)){for(;F!==null;){var Z=Mu(F);if(Z!==null&&Ma(Z),Z=rl(i,s,m,S),Z===null&&Au(i,s,S,Rl,m),Z===F)break;F=Z}F!==null&&S.stopPropagation()}else Au(i,s,S,null,m)}}var Rl=null;function rl(i,s,m,S){if(Rl=null,i=Or(S),i=aa(i),i!==null)if(s=Un(i),s===null)i=null;else if(m=s.tag,m===13){if(i=jr(s),i!==null)return i;i=null}else if(m===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return Rl=i,null}function Fs(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pl()){case Xn:return 1;case Kr:return 4;case _i:case Rc:return 16;case Qi:return 536870912;default:return 16}default:return 16}}var wi=null,ir=null,ls=null;function ic(){if(ls)return ls;var i,s=ir,m=s.length,S,F="value"in wi?wi.value:wi.textContent,Z=F.length;for(i=0;i<m&&s[i]===F[i];i++);var Se=m-i;for(S=1;S<=Se&&s[m-S]===F[Z-S];S++);return ls=F.slice(i,1<S?1-S:void 0)}function us(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Fl(){return!0}function bu(){return!1}function to(i){function s(m,S,F,Z,Se){this._reactName=m,this._targetInst=F,this.type=S,this.nativeEvent=Z,this.target=Se,this.currentTarget=null;for(var Xe in i)i.hasOwnProperty(Xe)&&(m=i[Xe],this[Xe]=m?m(Z):Z[Xe]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Fl:bu,this.isPropagationStopped=bu,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),s}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=to(Js),Os=ie({},Js,{view:0,detail:0}),oc=to(Os),Ol,jl,Ao,Ra=ie({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ao&&(Ao&&i.type==="mousemove"?(Ol=i.screenX-Ao.screenX,jl=i.screenY-Ao.screenY):jl=Ol=0,Ao=i),Ol)},movementY:function(i){return"movementY"in i?i.movementY:jl}}),sc=to(Ra),ac=ie({},Ra,{dataTransfer:0}),il=to(ac),jc=ie({},Os,{relatedTarget:0}),cs=to(jc),Lc=ie({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),Fa=to(Lc),Su=ie({},Js,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Mo=to(Su),lc=ie({},Js,{data:0}),Ll=to(lc),uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ko={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=ko[i])?!!s[i]:!1}function js(){return Eu}var Tu=ie({},Os,{key:function(i){if(i.key){var s=uc[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=us(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Dl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(i){return i.type==="keypress"?us(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?us(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Bl=to(Tu),Oa=ie({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hs=to(Oa),Nl=ie({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),Dc=to(Nl),Nr=ie({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ul=to(Nr),Vn=ie({},Ra,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Vl=to(Vn),wr=[9,13,27,32],or=a&&"CompositionEvent"in window,zo=null;a&&"documentMode"in document&&(zo=document.documentMode);var Vo=a&&"TextEvent"in window&&!zo,Ro=a&&(!or||zo&&8<zo&&11>=zo),di=" ",Gi=!1;function ds(i,s){switch(i){case"keyup":return wr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oi(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ls=!1;function ja(i,s){switch(i){case"compositionend":return Oi(s);case"keypress":return s.which!==32?null:(Gi=!0,di);case"textInput":return i=s.data,i===di&&Gi?null:i;default:return null}}function La(i,s){if(Ls)return i==="compositionend"||!or&&ds(i,s)?(i=ic(),ls=ir=wi=null,Ls=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ro&&s.locale!=="ko"?null:s.data;default:return null}}var gi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fo(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!gi[i.type]:s==="textarea"}function Qs(i,s,m,S){me(S),s=Zl(s,"onChange"),0<s.length&&(m=new za("onChange","change",null,m,S),i.push({event:m,listeners:s}))}var no=null,mo=null;function ol(i){cc(i,0)}function $o(i){var s=gs(i);if(kt(s))return i}function ea(i,s){if(i==="change")return s}var $l=!1;if(a){var go;if(a){var er="oninput"in document;if(!er){var sl=document.createElement("div");sl.setAttribute("oninput","return;"),er=typeof sl.oninput=="function"}go=er}else go=!1;$l=go&&(!document.documentMode||9<document.documentMode)}function Iu(){no&&(no.detachEvent("onpropertychange",al),mo=no=null)}function al(i){if(i.propertyName==="value"&&$o(mo)){var s=[];Qs(s,mo,i,Or(i)),He(ol,s)}}function ta(i,s,m){i==="focusin"?(Iu(),no=s,mo=m,no.attachEvent("onpropertychange",al)):i==="focusout"&&Iu()}function Cu(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return $o(mo)}function ll(i,s){if(i==="click")return $o(s)}function ee(i,s){if(i==="input"||i==="change")return $o(s)}function Ie(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var We=typeof Object.is=="function"?Object.is:Ie;function wt(i,s){if(We(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var m=Object.keys(i),S=Object.keys(s);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var F=m[S];if(!L.call(s,F)||!We(i[F],s[F]))return!1}return!0}function Kt(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Nt(i,s){var m=Kt(i);i=0;for(var S;m;){if(m.nodeType===3){if(S=i+m.textContent.length,i<=s&&S>=s)return{node:m,offset:s-i};i=S}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Kt(m)}}function an(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?an(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Sn(){for(var i=window,s=Yt();s instanceof i.HTMLIFrameElement;){try{var m=typeof s.contentWindow.location.href=="string"}catch{m=!1}if(m)i=s.contentWindow;else break;s=Yt(i.document)}return s}function Ln(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function pr(i){var s=Sn(),m=i.focusedElem,S=i.selectionRange;if(s!==m&&m&&m.ownerDocument&&an(m.ownerDocument.documentElement,m)){if(S!==null&&Ln(m)){if(s=S.start,i=S.end,i===void 0&&(i=s),"selectionStart"in m)m.selectionStart=s,m.selectionEnd=Math.min(i,m.value.length);else if(i=(s=m.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var F=m.textContent.length,Z=Math.min(S.start,F);S=S.end===void 0?Z:Math.min(S.end,F),!i.extend&&Z>S&&(F=S,S=Z,Z=F),F=Nt(m,Z);var Se=Nt(m,S);F&&Se&&(i.rangeCount!==1||i.anchorNode!==F.node||i.anchorOffset!==F.offset||i.focusNode!==Se.node||i.focusOffset!==Se.offset)&&(s=s.createRange(),s.setStart(F.node,F.offset),i.removeAllRanges(),Z>S?(i.addRange(s),i.extend(Se.node,Se.offset)):(s.setEnd(Se.node,Se.offset),i.addRange(s)))}}for(s=[],i=m;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<s.length;m++)i=s[m],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ar=a&&"documentMode"in document&&11>=document.documentMode,cr=null,Ur=null,Yr=null,Jr=!1;function yo(i,s,m){var S=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Jr||cr==null||cr!==Yt(S)||(S=cr,"selectionStart"in S&&Ln(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Yr&&wt(Yr,S)||(Yr=S,S=Zl(Ur,"onSelect"),0<S.length&&(s=new za("onSelect","select",null,s,m),i.push({event:s,listeners:S}),s.target=cr)))}function Hi(i,s){var m={};return m[i.toLowerCase()]=s.toLowerCase(),m["Webkit"+i]="webkit"+s,m["Moz"+i]="moz"+s,m}var bi={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},Ds={},Qr={};a&&(Qr=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);function ro(i){if(Ds[i])return Ds[i];if(!bi[i])return i;var s=bi[i],m;for(m in s)if(s.hasOwnProperty(m)&&m in Qr)return Ds[i]=s[m];return i}var Bc=ro("animationend"),Nc=ro("animationiteration"),Hr=ro("animationstart"),Go=ro("transitionend"),vo=new Map,Gl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bs(i,s){vo.set(i,s),T(s,[i])}for(var Hl=0;Hl<Gl.length;Hl++){var Da=Gl[Hl],na=Da.toLowerCase(),Uc=Da[0].toUpperCase()+Da.slice(1);Bs(na,"on"+Uc)}Bs(Bc,"onAnimationEnd"),Bs(Nc,"onAnimationIteration"),Bs(Hr,"onAnimationStart"),Bs("dblclick","onDoubleClick"),Bs("focusin","onFocus"),Bs("focusout","onBlur"),Bs(Go,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),T("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),T("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),T("onBeforeInput",["compositionend","keypress","textInput","paste"]),T("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),T("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),T("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function Pu(i,s,m){var S=i.type||"unknown-event";i.currentTarget=m,Qn(S,s,void 0,i),i.currentTarget=null}function cc(i,s){s=(s&4)!==0;for(var m=0;m<i.length;m++){var S=i[m],F=S.event;S=S.listeners;e:{var Z=void 0;if(s)for(var Se=S.length-1;0<=Se;Se--){var Xe=S[Se],ot=Xe.instance,bt=Xe.currentTarget;if(Xe=Xe.listener,ot!==Z&&F.isPropagationStopped())break e;Pu(F,Xe,bt),Z=ot}else for(Se=0;Se<S.length;Se++){if(Xe=S[Se],ot=Xe.instance,bt=Xe.currentTarget,Xe=Xe.listener,ot!==Z&&F.isPropagationStopped())break e;Pu(F,Xe,bt),Z=ot}}}if(pn)throw i=vn,pn=!1,vn=null,i}function Ir(i,s){var m=s[Yn];m===void 0&&(m=s[Yn]=new Set);var S=i+"__bubble";m.has(S)||(hc(s,i,2,!1),m.add(S))}function ra(i,s,m){var S=0;s&&(S|=4),hc(m,i,S,s)}var ul="_reactListening"+Math.random().toString(36).slice(2);function ia(i){if(!i[ul]){i[ul]=!0,v.forEach(function(m){m!=="selectionchange"&&(Vc.has(m)||ra(m,!1,i),ra(m,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[ul]||(s[ul]=!0,ra("selectionchange",!1,s))}}function hc(i,s,m,S){switch(Fs(s)){case 1:var F=wu;break;case 4:F=zl;break;default:F=po}m=F.bind(null,s,m,i),F=void 0,!Ze||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(F=!0),S?F!==void 0?i.addEventListener(s,m,{capture:!0,passive:F}):i.addEventListener(s,m,!0):F!==void 0?i.addEventListener(s,m,{passive:F}):i.addEventListener(s,m,!1)}function Au(i,s,m,S,F){var Z=S;if(!(s&1)&&!(s&2)&&S!==null)e:for(;;){if(S===null)return;var Se=S.tag;if(Se===3||Se===4){var Xe=S.stateNode.containerInfo;if(Xe===F||Xe.nodeType===8&&Xe.parentNode===F)break;if(Se===4)for(Se=S.return;Se!==null;){var ot=Se.tag;if((ot===3||ot===4)&&(ot=Se.stateNode.containerInfo,ot===F||ot.nodeType===8&&ot.parentNode===F))return;Se=Se.return}for(;Xe!==null;){if(Se=aa(Xe),Se===null)return;if(ot=Se.tag,ot===5||ot===6){S=Z=Se;continue e}Xe=Xe.parentNode}}S=S.return}He(function(){var bt=Z,Ot=Or(m),Vt=[];e:{var Rt=vo.get(i);if(Rt!==void 0){var dn=za,_n=i;switch(i){case"keypress":if(us(m)===0)break e;case"keydown":case"keyup":dn=Bl;break;case"focusin":_n="focus",dn=cs;break;case"focusout":_n="blur",dn=cs;break;case"beforeblur":case"afterblur":dn=cs;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dn=sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dn=il;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dn=Dc;break;case Bc:case Nc:case Hr:dn=Fa;break;case Go:dn=Ul;break;case"scroll":dn=oc;break;case"wheel":dn=Vl;break;case"copy":case"cut":case"paste":dn=Mo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dn=hs}var bn=(s&4)!==0,pi=!bn&&i==="scroll",vt=bn?Rt!==null?Rt+"Capture":null:Rt;bn=[];for(var lt=bt,xt;lt!==null;){xt=lt;var Xt=xt.stateNode;if(xt.tag===5&&Xt!==null&&(xt=Xt,vt!==null&&(Xt=nt(lt,vt),Xt!=null&&bn.push(cl(lt,Xt,xt)))),pi)break;lt=lt.return}0<bn.length&&(Rt=new dn(Rt,_n,null,m,Ot),Vt.push({event:Rt,listeners:bn}))}}if(!(s&7)){e:{if(Rt=i==="mouseover"||i==="pointerover",dn=i==="mouseout"||i==="pointerout",Rt&&m!==qt&&(_n=m.relatedTarget||m.fromElement)&&(aa(_n)||_n[ms]))break e;if((dn||Rt)&&(Rt=Ot.window===Ot?Ot:(Rt=Ot.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,dn?(_n=m.relatedTarget||m.toElement,dn=bt,_n=_n?aa(_n):null,_n!==null&&(pi=Un(_n),_n!==pi||_n.tag!==5&&_n.tag!==6)&&(_n=null)):(dn=null,_n=bt),dn!==_n)){if(bn=sc,Xt="onMouseLeave",vt="onMouseEnter",lt="mouse",(i==="pointerout"||i==="pointerover")&&(bn=hs,Xt="onPointerLeave",vt="onPointerEnter",lt="pointer"),pi=dn==null?Rt:gs(dn),xt=_n==null?Rt:gs(_n),Rt=new bn(Xt,lt+"leave",dn,m,Ot),Rt.target=pi,Rt.relatedTarget=xt,Xt=null,aa(Ot)===bt&&(bn=new bn(vt,lt+"enter",_n,m,Ot),bn.target=xt,bn.relatedTarget=pi,Xt=bn),pi=Xt,dn&&_n)t:{for(bn=dn,vt=_n,lt=0,xt=bn;xt;xt=oa(xt))lt++;for(xt=0,Xt=vt;Xt;Xt=oa(Xt))xt++;for(;0<lt-xt;)bn=oa(bn),lt--;for(;0<xt-lt;)vt=oa(vt),xt--;for(;lt--;){if(bn===vt||vt!==null&&bn===vt.alternate)break t;bn=oa(bn),vt=oa(vt)}bn=null}else bn=null;dn!==null&&hl(Vt,Rt,dn,bn,!1),_n!==null&&pi!==null&&hl(Vt,pi,_n,bn,!0)}}e:{if(Rt=bt?gs(bt):window,dn=Rt.nodeName&&Rt.nodeName.toLowerCase(),dn==="select"||dn==="input"&&Rt.type==="file")var Tn=ea;else if(Fo(Rt))if($l)Tn=ee;else{Tn=Cu;var Cn=ta}else(dn=Rt.nodeName)&&dn.toLowerCase()==="input"&&(Rt.type==="checkbox"||Rt.type==="radio")&&(Tn=ll);if(Tn&&(Tn=Tn(i,bt))){Qs(Vt,Tn,m,Ot);break e}Cn&&Cn(i,Rt,bt),i==="focusout"&&(Cn=Rt._wrapperState)&&Cn.controlled&&Rt.type==="number"&&en(Rt,"number",Rt.value)}switch(Cn=bt?gs(bt):window,i){case"focusin":(Fo(Cn)||Cn.contentEditable==="true")&&(cr=Cn,Ur=bt,Yr=null);break;case"focusout":Yr=Ur=cr=null;break;case"mousedown":Jr=!0;break;case"contextmenu":case"mouseup":case"dragend":Jr=!1,yo(Vt,m,Ot);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":yo(Vt,m,Ot)}var Dn;if(or)e:{switch(i){case"compositionstart":var Hn="onCompositionStart";break e;case"compositionend":Hn="onCompositionEnd";break e;case"compositionupdate":Hn="onCompositionUpdate";break e}Hn=void 0}else Ls?ds(i,m)&&(Hn="onCompositionEnd"):i==="keydown"&&m.keyCode===229&&(Hn="onCompositionStart");Hn&&(Ro&&m.locale!=="ko"&&(Ls||Hn!=="onCompositionStart"?Hn==="onCompositionEnd"&&Ls&&(Dn=ic()):(wi=Ot,ir="value"in wi?wi.value:wi.textContent,Ls=!0)),Cn=Zl(bt,Hn),0<Cn.length&&(Hn=new Ll(Hn,i,null,m,Ot),Vt.push({event:Hn,listeners:Cn}),Dn?Hn.data=Dn:(Dn=Oi(m),Dn!==null&&(Hn.data=Dn)))),(Dn=Vo?ja(i,m):La(i,m))&&(bt=Zl(bt,"onBeforeInput"),0<bt.length&&(Ot=new Ll("onBeforeInput","beforeinput",null,m,Ot),Vt.push({event:Ot,listeners:bt}),Ot.data=Dn))}cc(Vt,s)})}function cl(i,s,m){return{instance:i,listener:s,currentTarget:m}}function Zl(i,s){for(var m=s+"Capture",S=[];i!==null;){var F=i,Z=F.stateNode;F.tag===5&&Z!==null&&(F=Z,Z=nt(i,m),Z!=null&&S.unshift(cl(i,Z,F)),Z=nt(i,s),Z!=null&&S.push(cl(i,Z,F))),i=i.return}return S}function oa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function hl(i,s,m,S,F){for(var Z=s._reactName,Se=[];m!==null&&m!==S;){var Xe=m,ot=Xe.alternate,bt=Xe.stateNode;if(ot!==null&&ot===S)break;Xe.tag===5&&bt!==null&&(Xe=bt,F?(ot=nt(m,Z),ot!=null&&Se.unshift(cl(m,ot,Xe))):F||(ot=nt(m,Z),ot!=null&&Se.push(cl(m,ot,Xe)))),m=m.return}Se.length!==0&&i.push({event:s,listeners:Se})}var Fh=/\r\n?/g,Ho=/\u0000|\uFFFD/g;function fs(i){return(typeof i=="string"?i:""+i).replace(Fh,`
`).replace(Ho,"")}function Wl(i,s,m){if(s=fs(s),fs(i)!==s&&m)throw Error(p(425))}function _o(){}var sa=null,$c=null;function Gc(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var dc=typeof setTimeout=="function"?setTimeout:void 0,Oh=typeof clearTimeout=="function"?clearTimeout:void 0,fc=typeof Promise=="function"?Promise:void 0,ql=typeof queueMicrotask=="function"?queueMicrotask:typeof fc<"u"?function(i){return fc.resolve(null).then(i).catch(Zo)}:dc;function Zo(i){setTimeout(function(){throw i})}function on(i,s){var m=s,S=0;do{var F=m.nextSibling;if(i.removeChild(m),F&&F.nodeType===8)if(m=F.data,m==="/$"){if(S===0){i.removeChild(F),ss(s);return}S--}else m!=="$"&&m!=="$?"&&m!=="$!"||S++;m=F}while(m);ss(s)}function ps(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function pc(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var m=i.data;if(m==="$"||m==="$!"||m==="$?"){if(s===0)return i;s--}else m==="/$"&&s++}i=i.previousSibling}return null}var dl=Math.random().toString(36).slice(2),io="__reactFiber$"+dl,Ns="__reactProps$"+dl,ms="__reactContainer$"+dl,Yn="__reactEvents$"+dl,Hc="__reactListeners$"+dl,Cd="__reactHandles$"+dl;function aa(i){var s=i[io];if(s)return s;for(var m=i.parentNode;m;){if(s=m[ms]||m[io]){if(m=s.alternate,s.child!==null||m!==null&&m.child!==null)for(i=pc(i);i!==null;){if(m=i[io])return m;i=pc(i)}return s}i=m,m=i.parentNode}return null}function Mu(i){return i=i[io]||i[ms],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function gs(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function ku(i){return i[Ns]||null}var zu=[],fl=-1;function Na(i){return{current:i}}function Cr(i){0>fl||(i.current=zu[fl],zu[fl]=null,fl--)}function kr(i,s){fl++,zu[fl]=i.current,i.current=s}var Ua={},Sr=Na(Ua),tr=Na(!1),Wo=Ua;function la(i,s){var m=i.type.contextTypes;if(!m)return Ua;var S=i.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===s)return S.__reactInternalMemoizedMaskedChildContext;var F={},Z;for(Z in m)F[Z]=s[Z];return S&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=F),F}function ji(i){return i=i.childContextTypes,i!=null}function Ru(){Cr(tr),Cr(Sr)}function Xl(i,s,m){if(Sr.current!==Ua)throw Error(p(168));kr(Sr,s),kr(tr,m)}function Kl(i,s,m){var S=i.stateNode;if(s=s.childContextTypes,typeof S.getChildContext!="function")return m;S=S.getChildContext();for(var F in S)if(!(F in s))throw Error(p(108,pt(i)||"Unknown",F));return ie({},m,S)}function Oo(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ua,Wo=Sr.current,kr(Sr,i),kr(tr,tr.current),!0}function Yl(i,s,m){var S=i.stateNode;if(!S)throw Error(p(169));m?(i=Kl(i,s,Wo),S.__reactInternalMemoizedMergedChildContext=i,Cr(tr),Cr(Sr),kr(Sr,i)):Cr(tr),kr(tr,m)}var sn=null,En=!1,Jl=!1;function Fu(i){sn===null?sn=[i]:sn.push(i)}function Zc(i){En=!0,Fu(i)}function y(){if(!Jl&&sn!==null){Jl=!0;var i=0,s=ur;try{var m=sn;for(ur=1;i<m.length;i++){var S=m[i];do S=S(!0);while(S!==null)}sn=null,En=!1}catch(F){throw sn!==null&&(sn=sn.slice(i+1)),ii(Xn,y),F}finally{ur=s,Jl=!1}}return null}var e=[],o=0,h=null,d=0,g=[],I=0,A=null,O=1,X="";function ae(i,s){e[o++]=d,e[o++]=h,h=i,d=s}function le(i,s,m){g[I++]=O,g[I++]=X,g[I++]=A,A=i;var S=O;i=X;var F=32-fr(S)-1;S&=~(1<<F),m+=1;var Z=32-fr(s)+F;if(30<Z){var Se=F-F%5;Z=(S&(1<<Se)-1).toString(32),S>>=Se,F-=Se,O=1<<32-fr(s)+F|m<<F|S,X=Z+i}else O=1<<Z|m<<F|S,X=i}function be(i){i.return!==null&&(ae(i,1),le(i,1,0))}function Ae(i){for(;i===h;)h=e[--o],e[o]=null,d=e[--o],e[o]=null;for(;i===A;)A=g[--I],g[I]=null,X=g[--I],g[I]=null,O=g[--I],g[I]=null}var Fe=null,Ne=null,$e=!1,qe=null;function et(i,s){var m=Yo(5,null,null,0);m.elementType="DELETED",m.stateNode=s,m.return=i,s=i.deletions,s===null?(i.deletions=[m],i.flags|=16):s.push(m)}function Ve(i,s){switch(i.tag){case 5:var m=i.type;return s=s.nodeType!==1||m.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,Fe=i,Ne=ps(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,Fe=i,Ne=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(m=A!==null?{id:O,overflow:X}:null,i.memoizedState={dehydrated:s,treeContext:m,retryLane:1073741824},m=Yo(18,null,null,0),m.stateNode=s,m.return=i,i.child=m,Fe=i,Ne=null,!0):!1;default:return!1}}function st(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ut(i){if($e){var s=Ne;if(s){var m=s;if(!Ve(i,s)){if(st(i))throw Error(p(418));s=ps(m.nextSibling);var S=Fe;s&&Ve(i,s)?et(S,m):(i.flags=i.flags&-4097|2,$e=!1,Fe=i)}}else{if(st(i))throw Error(p(418));i.flags=i.flags&-4097|2,$e=!1,Fe=i}}}function mt(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Fe=i}function At(i){if(i!==Fe)return!1;if(!$e)return mt(i),$e=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Gc(i.type,i.memoizedProps)),s&&(s=Ne)){if(st(i))throw Dt(),Error(p(418));for(;s;)et(i,s),s=ps(s.nextSibling)}if(mt(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var m=i.data;if(m==="/$"){if(s===0){Ne=ps(i.nextSibling);break e}s--}else m!=="$"&&m!=="$!"&&m!=="$?"||s++}i=i.nextSibling}Ne=null}}else Ne=Fe?ps(i.stateNode.nextSibling):null;return!0}function Dt(){for(var i=Ne;i;)i=ps(i.nextSibling)}function Gt(){Ne=Fe=null,$e=!1}function tn(i){qe===null?qe=[i]:qe.push(i)}var Ht=Me.ReactCurrentBatchConfig;function Lt(i,s){if(i&&i.defaultProps){s=ie({},s),i=i.defaultProps;for(var m in i)s[m]===void 0&&(s[m]=i[m]);return s}return s}var hn=Na(null),Rn=null,$t=null,Qt=null;function Fn(){Qt=$t=Rn=null}function Er(i){var s=hn.current;Cr(hn),i._currentValue=s}function Gn(i,s,m){for(;i!==null;){var S=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,S!==null&&(S.childLanes|=s)):S!==null&&(S.childLanes&s)!==s&&(S.childLanes|=s),i===m)break;i=i.return}}function qn(i,s){Rn=i,Qt=$t=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&s&&(Ci=!0),i.firstContext=null)}function rr(i){var s=i._currentValue;if(Qt!==i)if(i={context:i,memoizedValue:s,next:null},$t===null){if(Rn===null)throw Error(p(308));$t=i,Rn.dependencies={lanes:0,firstContext:i}}else $t=$t.next=i;return s}var ei=null;function jo(i){ei===null?ei=[i]:ei.push(i)}function Pr(i,s,m,S){var F=s.interleaved;return F===null?(m.next=m,jo(s)):(m.next=F.next,F.next=m),s.interleaved=m,ti(i,S)}function ti(i,s){i.lanes|=s;var m=i.alternate;for(m!==null&&(m.lanes|=s),m=i,i=i.return;i!==null;)i.childLanes|=s,m=i.alternate,m!==null&&(m.childLanes|=s),m=i,i=i.return;return m.tag===3?m.stateNode:null}var ni=!1;function Si(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zi(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ei(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Lo(i,s,m){var S=i.updateQueue;if(S===null)return null;if(S=S.shared,mr&2){var F=S.pending;return F===null?s.next=s:(s.next=F.next,F.next=s),S.pending=s,ti(i,m)}return F=S.interleaved,F===null?(s.next=s,jo(S)):(s.next=F.next,F.next=s),S.interleaved=s,ti(i,m)}function pl(i,s,m){if(s=s.updateQueue,s!==null&&(s=s.shared,(m&4194240)!==0)){var S=s.lanes;S&=i.pendingLanes,m|=S,s.lanes=m,ks(i,m)}}function ml(i,s){var m=i.updateQueue,S=i.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var F=null,Z=null;if(m=m.firstBaseUpdate,m!==null){do{var Se={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};Z===null?F=Z=Se:Z=Z.next=Se,m=m.next}while(m!==null);Z===null?F=Z=s:Z=Z.next=s}else F=Z=s;m={baseState:S.baseState,firstBaseUpdate:F,lastBaseUpdate:Z,shared:S.shared,effects:S.effects},i.updateQueue=m;return}i=m.lastBaseUpdate,i===null?m.firstBaseUpdate=s:i.next=s,m.lastBaseUpdate=s}function oo(i,s,m,S){var F=i.updateQueue;ni=!1;var Z=F.firstBaseUpdate,Se=F.lastBaseUpdate,Xe=F.shared.pending;if(Xe!==null){F.shared.pending=null;var ot=Xe,bt=ot.next;ot.next=null,Se===null?Z=bt:Se.next=bt,Se=ot;var Ot=i.alternate;Ot!==null&&(Ot=Ot.updateQueue,Xe=Ot.lastBaseUpdate,Xe!==Se&&(Xe===null?Ot.firstBaseUpdate=bt:Xe.next=bt,Ot.lastBaseUpdate=ot))}if(Z!==null){var Vt=F.baseState;Se=0,Ot=bt=ot=null,Xe=Z;do{var Rt=Xe.lane,dn=Xe.eventTime;if((S&Rt)===Rt){Ot!==null&&(Ot=Ot.next={eventTime:dn,lane:0,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null});e:{var _n=i,bn=Xe;switch(Rt=s,dn=m,bn.tag){case 1:if(_n=bn.payload,typeof _n=="function"){Vt=_n.call(dn,Vt,Rt);break e}Vt=_n;break e;case 3:_n.flags=_n.flags&-65537|128;case 0:if(_n=bn.payload,Rt=typeof _n=="function"?_n.call(dn,Vt,Rt):_n,Rt==null)break e;Vt=ie({},Vt,Rt);break e;case 2:ni=!0}}Xe.callback!==null&&Xe.lane!==0&&(i.flags|=64,Rt=F.effects,Rt===null?F.effects=[Xe]:Rt.push(Xe))}else dn={eventTime:dn,lane:Rt,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null},Ot===null?(bt=Ot=dn,ot=Vt):Ot=Ot.next=dn,Se|=Rt;if(Xe=Xe.next,Xe===null){if(Xe=F.shared.pending,Xe===null)break;Rt=Xe,Xe=Rt.next,Rt.next=null,F.lastBaseUpdate=Rt,F.shared.pending=null}}while(!0);if(Ot===null&&(ot=Vt),F.baseState=ot,F.firstBaseUpdate=bt,F.lastBaseUpdate=Ot,s=F.shared.interleaved,s!==null){F=s;do Se|=F.lane,F=F.next;while(F!==s)}else Z===null&&(F.shared.lanes=0);Zu|=Se,i.lanes=Se,i.memoizedState=Vt}}function Ou(i,s,m){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var S=i[s],F=S.callback;if(F!==null){if(S.callback=null,S=m,typeof F!="function")throw Error(p(191,F));F.call(S)}}}var mc=new u.Component().refs;function xo(i,s,m,S){s=i.memoizedState,m=m(S,s),m=m==null?s:ie({},s,m),i.memoizedState=m,i.lanes===0&&(i.updateQueue.baseState=m)}var so={isMounted:function(i){return(i=i._reactInternals)?Un(i)===i:!1},enqueueSetState:function(i,s,m){i=i._reactInternals;var S=Do(),F=iu(i),Z=Ei(S,F);Z.payload=s,m!=null&&(Z.callback=m),s=Lo(i,Z,F),s!==null&&(_a(s,i,F,S),pl(s,i,F))},enqueueReplaceState:function(i,s,m){i=i._reactInternals;var S=Do(),F=iu(i),Z=Ei(S,F);Z.tag=1,Z.payload=s,m!=null&&(Z.callback=m),s=Lo(i,Z,F),s!==null&&(_a(s,i,F,S),pl(s,i,F))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var m=Do(),S=iu(i),F=Ei(m,S);F.tag=2,s!=null&&(F.callback=s),s=Lo(i,F,S),s!==null&&(_a(s,i,S,m),pl(s,i,S))}};function ua(i,s,m,S,F,Z,Se){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(S,Z,Se):s.prototype&&s.prototype.isPureReactComponent?!wt(m,S)||!wt(F,Z):!0}function qo(i,s,m){var S=!1,F=Ua,Z=s.contextType;return typeof Z=="object"&&Z!==null?Z=rr(Z):(F=ji(s)?Wo:Sr.current,S=s.contextTypes,Z=(S=S!=null)?la(i,F):Ua),s=new s(m,Z),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=so,i.stateNode=s,s._reactInternals=i,S&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=F,i.__reactInternalMemoizedMaskedChildContext=Z),s}function Ti(i,s,m,S){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(m,S),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(m,S),s.state!==i&&so.enqueueReplaceState(s,s.state,null)}function Ii(i,s,m,S){var F=i.stateNode;F.props=m,F.state=i.memoizedState,F.refs=mc,Si(i);var Z=s.contextType;typeof Z=="object"&&Z!==null?F.context=rr(Z):(Z=ji(s)?Wo:Sr.current,F.context=la(i,Z)),F.state=i.memoizedState,Z=s.getDerivedStateFromProps,typeof Z=="function"&&(xo(i,s,Z,m),F.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(s=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),s!==F.state&&so.enqueueReplaceState(F,F.state,null),oo(i,m,F,S),F.state=i.memoizedState),typeof F.componentDidMount=="function"&&(i.flags|=4194308)}function Li(i,s,m){if(i=m.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(p(309));var S=m.stateNode}if(!S)throw Error(p(147,i));var F=S,Z=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===Z?s.ref:(s=function(Se){var Xe=F.refs;Xe===mc&&(Xe=F.refs={}),Se===null?delete Xe[Z]:Xe[Z]=Se},s._stringRef=Z,s)}if(typeof i!="string")throw Error(p(284));if(!m._owner)throw Error(p(290,i))}return i}function Kn(i,s){throw i=Object.prototype.toString.call(s),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Va(i){var s=i._init;return s(i._payload)}function gl(i){function s(vt,lt){if(i){var xt=vt.deletions;xt===null?(vt.deletions=[lt],vt.flags|=16):xt.push(lt)}}function m(vt,lt){if(!i)return null;for(;lt!==null;)s(vt,lt),lt=lt.sibling;return null}function S(vt,lt){for(vt=new Map;lt!==null;)lt.key!==null?vt.set(lt.key,lt):vt.set(lt.index,lt),lt=lt.sibling;return vt}function F(vt,lt){return vt=bl(vt,lt),vt.index=0,vt.sibling=null,vt}function Z(vt,lt,xt){return vt.index=xt,i?(xt=vt.alternate,xt!==null?(xt=xt.index,xt<lt?(vt.flags|=2,lt):xt):(vt.flags|=2,lt)):(vt.flags|=1048576,lt)}function Se(vt){return i&&vt.alternate===null&&(vt.flags|=2),vt}function Xe(vt,lt,xt,Xt){return lt===null||lt.tag!==6?(lt=qa(xt,vt.mode,Xt),lt.return=vt,lt):(lt=F(lt,xt),lt.return=vt,lt)}function ot(vt,lt,xt,Xt){var Tn=xt.type;return Tn===M?Ot(vt,lt,xt.props.children,Xt,xt.key):lt!==null&&(lt.elementType===Tn||typeof Tn=="object"&&Tn!==null&&Tn.$$typeof===ue&&Va(Tn)===lt.type)?(Xt=F(lt,xt.props),Xt.ref=Li(vt,lt,xt),Xt.return=vt,Xt):(Xt=yh(xt.type,xt.key,xt.props,null,vt.mode,Xt),Xt.ref=Li(vt,lt,xt),Xt.return=vt,Xt)}function bt(vt,lt,xt,Xt){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==xt.containerInfo||lt.stateNode.implementation!==xt.implementation?(lt=nd(xt,vt.mode,Xt),lt.return=vt,lt):(lt=F(lt,xt.children||[]),lt.return=vt,lt)}function Ot(vt,lt,xt,Xt,Tn){return lt===null||lt.tag!==7?(lt=wa(xt,vt.mode,Xt,Tn),lt.return=vt,lt):(lt=F(lt,xt),lt.return=vt,lt)}function Vt(vt,lt,xt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return lt=qa(""+lt,vt.mode,xt),lt.return=vt,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case ne:return xt=yh(lt.type,lt.key,lt.props,null,vt.mode,xt),xt.ref=Li(vt,null,lt),xt.return=vt,xt;case ce:return lt=nd(lt,vt.mode,xt),lt.return=vt,lt;case ue:var Xt=lt._init;return Vt(vt,Xt(lt._payload),xt)}if(ze(lt)||xe(lt))return lt=wa(lt,vt.mode,xt,null),lt.return=vt,lt;Kn(vt,lt)}return null}function Rt(vt,lt,xt,Xt){var Tn=lt!==null?lt.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Tn!==null?null:Xe(vt,lt,""+xt,Xt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case ne:return xt.key===Tn?ot(vt,lt,xt,Xt):null;case ce:return xt.key===Tn?bt(vt,lt,xt,Xt):null;case ue:return Tn=xt._init,Rt(vt,lt,Tn(xt._payload),Xt)}if(ze(xt)||xe(xt))return Tn!==null?null:Ot(vt,lt,xt,Xt,null);Kn(vt,xt)}return null}function dn(vt,lt,xt,Xt,Tn){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return vt=vt.get(xt)||null,Xe(lt,vt,""+Xt,Tn);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case ne:return vt=vt.get(Xt.key===null?xt:Xt.key)||null,ot(lt,vt,Xt,Tn);case ce:return vt=vt.get(Xt.key===null?xt:Xt.key)||null,bt(lt,vt,Xt,Tn);case ue:var Cn=Xt._init;return dn(vt,lt,xt,Cn(Xt._payload),Tn)}if(ze(Xt)||xe(Xt))return vt=vt.get(xt)||null,Ot(lt,vt,Xt,Tn,null);Kn(lt,Xt)}return null}function _n(vt,lt,xt,Xt){for(var Tn=null,Cn=null,Dn=lt,Hn=lt=0,Vi=null;Dn!==null&&Hn<xt.length;Hn++){Dn.index>Hn?(Vi=Dn,Dn=null):Vi=Dn.sibling;var vr=Rt(vt,Dn,xt[Hn],Xt);if(vr===null){Dn===null&&(Dn=Vi);break}i&&Dn&&vr.alternate===null&&s(vt,Dn),lt=Z(vr,lt,Hn),Cn===null?Tn=vr:Cn.sibling=vr,Cn=vr,Dn=Vi}if(Hn===xt.length)return m(vt,Dn),$e&&ae(vt,Hn),Tn;if(Dn===null){for(;Hn<xt.length;Hn++)Dn=Vt(vt,xt[Hn],Xt),Dn!==null&&(lt=Z(Dn,lt,Hn),Cn===null?Tn=Dn:Cn.sibling=Dn,Cn=Dn);return $e&&ae(vt,Hn),Tn}for(Dn=S(vt,Dn);Hn<xt.length;Hn++)Vi=dn(Dn,vt,Hn,xt[Hn],Xt),Vi!==null&&(i&&Vi.alternate!==null&&Dn.delete(Vi.key===null?Hn:Vi.key),lt=Z(Vi,lt,Hn),Cn===null?Tn=Vi:Cn.sibling=Vi,Cn=Vi);return i&&Dn.forEach(function(su){return s(vt,su)}),$e&&ae(vt,Hn),Tn}function bn(vt,lt,xt,Xt){var Tn=xe(xt);if(typeof Tn!="function")throw Error(p(150));if(xt=Tn.call(xt),xt==null)throw Error(p(151));for(var Cn=Tn=null,Dn=lt,Hn=lt=0,Vi=null,vr=xt.next();Dn!==null&&!vr.done;Hn++,vr=xt.next()){Dn.index>Hn?(Vi=Dn,Dn=null):Vi=Dn.sibling;var su=Rt(vt,Dn,vr.value,Xt);if(su===null){Dn===null&&(Dn=Vi);break}i&&Dn&&su.alternate===null&&s(vt,Dn),lt=Z(su,lt,Hn),Cn===null?Tn=su:Cn.sibling=su,Cn=su,Dn=Vi}if(vr.done)return m(vt,Dn),$e&&ae(vt,Hn),Tn;if(Dn===null){for(;!vr.done;Hn++,vr=xt.next())vr=Vt(vt,vr.value,Xt),vr!==null&&(lt=Z(vr,lt,Hn),Cn===null?Tn=vr:Cn.sibling=vr,Cn=vr);return $e&&ae(vt,Hn),Tn}for(Dn=S(vt,Dn);!vr.done;Hn++,vr=xt.next())vr=dn(Dn,vt,Hn,vr.value,Xt),vr!==null&&(i&&vr.alternate!==null&&Dn.delete(vr.key===null?Hn:vr.key),lt=Z(vr,lt,Hn),Cn===null?Tn=vr:Cn.sibling=vr,Cn=vr);return i&&Dn.forEach(function(Ym){return s(vt,Ym)}),$e&&ae(vt,Hn),Tn}function pi(vt,lt,xt,Xt){if(typeof xt=="object"&&xt!==null&&xt.type===M&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case ne:e:{for(var Tn=xt.key,Cn=lt;Cn!==null;){if(Cn.key===Tn){if(Tn=xt.type,Tn===M){if(Cn.tag===7){m(vt,Cn.sibling),lt=F(Cn,xt.props.children),lt.return=vt,vt=lt;break e}}else if(Cn.elementType===Tn||typeof Tn=="object"&&Tn!==null&&Tn.$$typeof===ue&&Va(Tn)===Cn.type){m(vt,Cn.sibling),lt=F(Cn,xt.props),lt.ref=Li(vt,Cn,xt),lt.return=vt,vt=lt;break e}m(vt,Cn);break}else s(vt,Cn);Cn=Cn.sibling}xt.type===M?(lt=wa(xt.props.children,vt.mode,Xt,xt.key),lt.return=vt,vt=lt):(Xt=yh(xt.type,xt.key,xt.props,null,vt.mode,Xt),Xt.ref=Li(vt,lt,xt),Xt.return=vt,vt=Xt)}return Se(vt);case ce:e:{for(Cn=xt.key;lt!==null;){if(lt.key===Cn)if(lt.tag===4&&lt.stateNode.containerInfo===xt.containerInfo&&lt.stateNode.implementation===xt.implementation){m(vt,lt.sibling),lt=F(lt,xt.children||[]),lt.return=vt,vt=lt;break e}else{m(vt,lt);break}else s(vt,lt);lt=lt.sibling}lt=nd(xt,vt.mode,Xt),lt.return=vt,vt=lt}return Se(vt);case ue:return Cn=xt._init,pi(vt,lt,Cn(xt._payload),Xt)}if(ze(xt))return _n(vt,lt,xt,Xt);if(xe(xt))return bn(vt,lt,xt,Xt);Kn(vt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,lt!==null&&lt.tag===6?(m(vt,lt.sibling),lt=F(lt,xt),lt.return=vt,vt=lt):(m(vt,lt),lt=qa(xt,vt.mode,Xt),lt.return=vt,vt=lt),Se(vt)):m(vt,lt)}return pi}var ys=gl(!0),Wc=gl(!1),ju={},vs=Na(ju),Xo=Na(ju),Ql=Na(ju);function Us(i){if(i===ju)throw Error(p(174));return i}function yl(i,s){switch(kr(Ql,s),kr(Xo,i),kr(vs,ju),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ye(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=ye(s,i)}Cr(vs),kr(vs,s)}function ca(){Cr(vs),Cr(Xo),Cr(Ql)}function Lu(i){Us(Ql.current);var s=Us(vs.current),m=ye(s,i.type);s!==m&&(kr(Xo,i),kr(vs,m))}function $a(i){Xo.current===i&&(Cr(vs),Cr(Xo))}var Ar=Na(0);function Du(i){for(var s=i;s!==null;){if(s.tag===13){var m=s.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var jh=[];function Lh(){for(var i=0;i<jh.length;i++)jh[i]._workInProgressVersionPrimary=null;jh.length=0}var Dh=Me.ReactCurrentDispatcher,qc=Me.ReactCurrentBatchConfig,ha=0,zr=null,Lr=null,Rr=null,da=!1,gc=!1,fa=0,Lm=0;function ao(){throw Error(p(321))}function ri(i,s){if(s===null)return!1;for(var m=0;m<s.length&&m<i.length;m++)if(!We(i[m],s[m]))return!1;return!0}function Xc(i,s,m,S,F,Z){if(ha=Z,zr=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Dh.current=i===null||i.memoizedState===null?Fd:eh,i=m(S,F),gc){Z=0;do{if(gc=!1,fa=0,25<=Z)throw Error(p(301));Z+=1,Rr=Lr=null,s.updateQueue=null,Dh.current=_s,i=m(S,F)}while(gc)}if(Dh.current=Qc,s=Lr!==null&&Lr.next!==null,ha=0,Rr=Lr=zr=null,da=!1,s)throw Error(p(300));return i}function Bh(){var i=fa!==0;return fa=0,i}function wo(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?zr.memoizedState=Rr=i:Rr=Rr.next=i,Rr}function Wi(){if(Lr===null){var i=zr.alternate;i=i!==null?i.memoizedState:null}else i=Lr.next;var s=Rr===null?zr.memoizedState:Rr.next;if(s!==null)Rr=s,Lr=i;else{if(i===null)throw Error(p(310));Lr=i,i={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Rr===null?zr.memoizedState=Rr=i:Rr=Rr.next=i}return Rr}function eu(i,s){return typeof s=="function"?s(i):s}function Kc(i){var s=Wi(),m=s.queue;if(m===null)throw Error(p(311));m.lastRenderedReducer=i;var S=Lr,F=S.baseQueue,Z=m.pending;if(Z!==null){if(F!==null){var Se=F.next;F.next=Z.next,Z.next=Se}S.baseQueue=F=Z,m.pending=null}if(F!==null){Z=F.next,S=S.baseState;var Xe=Se=null,ot=null,bt=Z;do{var Ot=bt.lane;if((ha&Ot)===Ot)ot!==null&&(ot=ot.next={lane:0,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),S=bt.hasEagerState?bt.eagerState:i(S,bt.action);else{var Vt={lane:Ot,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null};ot===null?(Xe=ot=Vt,Se=S):ot=ot.next=Vt,zr.lanes|=Ot,Zu|=Ot}bt=bt.next}while(bt!==null&&bt!==Z);ot===null?Se=S:ot.next=Xe,We(S,s.memoizedState)||(Ci=!0),s.memoizedState=S,s.baseState=Se,s.baseQueue=ot,m.lastRenderedState=S}if(i=m.interleaved,i!==null){F=i;do Z=F.lane,zr.lanes|=Z,Zu|=Z,F=F.next;while(F!==i)}else F===null&&(m.lanes=0);return[s.memoizedState,m.dispatch]}function Nh(i){var s=Wi(),m=s.queue;if(m===null)throw Error(p(311));m.lastRenderedReducer=i;var S=m.dispatch,F=m.pending,Z=s.memoizedState;if(F!==null){m.pending=null;var Se=F=F.next;do Z=i(Z,Se.action),Se=Se.next;while(Se!==F);We(Z,s.memoizedState)||(Ci=!0),s.memoizedState=Z,s.baseQueue===null&&(s.baseState=Z),m.lastRenderedState=Z}return[Z,S]}function Wf(){}function Pd(i,s){var m=zr,S=Wi(),F=s(),Z=!We(S.memoizedState,F);if(Z&&(S.memoizedState=F,Ci=!0),S=S.queue,$h(Xf.bind(null,m,S,i),[i]),S.getSnapshot!==s||Z||Rr!==null&&Rr.memoizedState.tag&1){if(m.flags|=2048,Ga(9,Uh.bind(null,m,S,F,s),void 0,null),Ni===null)throw Error(p(349));ha&30||qf(m,s,F)}return F}function qf(i,s,m){i.flags|=16384,i={getSnapshot:s,value:m},s=zr.updateQueue,s===null?(s={lastEffect:null,stores:null},zr.updateQueue=s,s.stores=[i]):(m=s.stores,m===null?s.stores=[i]:m.push(i))}function Uh(i,s,m,S){s.value=m,s.getSnapshot=S,Vh(s)&&Ad(i)}function Xf(i,s,m){return m(function(){Vh(s)&&Ad(i)})}function Vh(i){var s=i.getSnapshot;i=i.value;try{var m=s();return!We(i,m)}catch{return!0}}function Ad(i){var s=ti(i,1);s!==null&&_a(s,i,1,-1)}function Md(i){var s=wo();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:i},s.queue=i,i=i.dispatch=tp.bind(null,zr,i),[s.memoizedState,i]}function Ga(i,s,m,S){return i={tag:i,create:s,destroy:m,deps:S,next:null},s=zr.updateQueue,s===null?(s={lastEffect:null,stores:null},zr.updateQueue=s,s.lastEffect=i.next=i):(m=s.lastEffect,m===null?s.lastEffect=i.next=i:(S=m.next,m.next=i,i.next=S,s.lastEffect=i)),i}function Kf(){return Wi().memoizedState}function tu(i,s,m,S){var F=wo();zr.flags|=i,F.memoizedState=Ga(1|s,m,void 0,S===void 0?null:S)}function Bu(i,s,m,S){var F=Wi();S=S===void 0?null:S;var Z=void 0;if(Lr!==null){var Se=Lr.memoizedState;if(Z=Se.destroy,S!==null&&ri(S,Se.deps)){F.memoizedState=Ga(s,m,Z,S);return}}zr.flags|=i,F.memoizedState=Ga(1|s,m,Z,S)}function Yc(i,s){return tu(8390656,8,i,s)}function $h(i,s){return Bu(2048,8,i,s)}function kd(i,s){return Bu(4,2,i,s)}function Yf(i,s){return Bu(4,4,i,s)}function lo(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Nu(i,s,m){return m=m!=null?m.concat([i]):null,Bu(4,4,lo.bind(null,s,i),m)}function Jc(){}function zd(i,s){var m=Wi();s=s===void 0?null:s;var S=m.memoizedState;return S!==null&&s!==null&&ri(s,S[1])?S[0]:(m.memoizedState=[i,s],i)}function yc(i,s){var m=Wi();s=s===void 0?null:s;var S=m.memoizedState;return S!==null&&s!==null&&ri(s,S[1])?S[0]:(i=i(),m.memoizedState=[i,s],i)}function Jf(i,s,m){return ha&21?(We(m,s)||(m=co(),zr.lanes|=m,Zu|=m,i.baseState=!0),s):(i.baseState&&(i.baseState=!1,Ci=!0),i.memoizedState=m)}function Gh(i,s){var m=ur;ur=m!==0&&4>m?m:4,i(!0);var S=qc.transition;qc.transition={};try{i(!1),s()}finally{ur=m,qc.transition=S}}function Qf(){return Wi().memoizedState}function ep(i,s,m){var S=iu(i);if(m={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null},Rd(i))np(s,m);else if(m=Pr(i,s,m,S),m!==null){var F=Do();_a(m,i,S,F),Hh(m,s,S)}}function tp(i,s,m){var S=iu(i),F={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null};if(Rd(i))np(s,F);else{var Z=i.alternate;if(i.lanes===0&&(Z===null||Z.lanes===0)&&(Z=s.lastRenderedReducer,Z!==null))try{var Se=s.lastRenderedState,Xe=Z(Se,m);if(F.hasEagerState=!0,F.eagerState=Xe,We(Xe,Se)){var ot=s.interleaved;ot===null?(F.next=F,jo(s)):(F.next=ot.next,ot.next=F),s.interleaved=F;return}}catch{}finally{}m=Pr(i,s,F,S),m!==null&&(F=Do(),_a(m,i,S,F),Hh(m,s,S))}}function Rd(i){var s=i.alternate;return i===zr||s!==null&&s===zr}function np(i,s){gc=da=!0;var m=i.pending;m===null?s.next=s:(s.next=m.next,m.next=s),i.pending=s}function Hh(i,s,m){if(m&4194240){var S=s.lanes;S&=i.pendingLanes,m|=S,s.lanes=m,ks(i,m)}}var Qc={readContext:rr,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useInsertionEffect:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useSyncExternalStore:ao,useId:ao,unstable_isNewReconciler:!1},Fd={readContext:rr,useCallback:function(i,s){return wo().memoizedState=[i,s===void 0?null:s],i},useContext:rr,useEffect:Yc,useImperativeHandle:function(i,s,m){return m=m!=null?m.concat([i]):null,tu(4194308,4,lo.bind(null,s,i),m)},useLayoutEffect:function(i,s){return tu(4194308,4,i,s)},useInsertionEffect:function(i,s){return tu(4,2,i,s)},useMemo:function(i,s){var m=wo();return s=s===void 0?null:s,i=i(),m.memoizedState=[i,s],i},useReducer:function(i,s,m){var S=wo();return s=m!==void 0?m(s):s,S.memoizedState=S.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},S.queue=i,i=i.dispatch=ep.bind(null,zr,i),[S.memoizedState,i]},useRef:function(i){var s=wo();return i={current:i},s.memoizedState=i},useState:Md,useDebugValue:Jc,useDeferredValue:function(i){return wo().memoizedState=i},useTransition:function(){var i=Md(!1),s=i[0];return i=Gh.bind(null,i[1]),wo().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,m){var S=zr,F=wo();if($e){if(m===void 0)throw Error(p(407));m=m()}else{if(m=s(),Ni===null)throw Error(p(349));ha&30||qf(S,s,m)}F.memoizedState=m;var Z={value:m,getSnapshot:s};return F.queue=Z,Yc(Xf.bind(null,S,Z,i),[i]),S.flags|=2048,Ga(9,Uh.bind(null,S,Z,m,s),void 0,null),m},useId:function(){var i=wo(),s=Ni.identifierPrefix;if($e){var m=X,S=O;m=(S&~(1<<32-fr(S)-1)).toString(32)+m,s=":"+s+"R"+m,m=fa++,0<m&&(s+="H"+m.toString(32)),s+=":"}else m=Lm++,s=":"+s+"r"+m.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},eh={readContext:rr,useCallback:zd,useContext:rr,useEffect:$h,useImperativeHandle:Nu,useInsertionEffect:kd,useLayoutEffect:Yf,useMemo:yc,useReducer:Kc,useRef:Kf,useState:function(){return Kc(eu)},useDebugValue:Jc,useDeferredValue:function(i){var s=Wi();return Jf(s,Lr.memoizedState,i)},useTransition:function(){var i=Kc(eu)[0],s=Wi().memoizedState;return[i,s]},useMutableSource:Wf,useSyncExternalStore:Pd,useId:Qf,unstable_isNewReconciler:!1},_s={readContext:rr,useCallback:zd,useContext:rr,useEffect:$h,useImperativeHandle:Nu,useInsertionEffect:kd,useLayoutEffect:Yf,useMemo:yc,useReducer:Nh,useRef:Kf,useState:function(){return Nh(eu)},useDebugValue:Jc,useDeferredValue:function(i){var s=Wi();return Lr===null?s.memoizedState=i:Jf(s,Lr.memoizedState,i)},useTransition:function(){var i=Nh(eu)[0],s=Wi().memoizedState;return[i,s]},useMutableSource:Wf,useSyncExternalStore:Pd,useId:Qf,unstable_isNewReconciler:!1};function Uu(i,s){try{var m="",S=s;do m+=Ye(S),S=S.return;while(S);var F=m}catch(Z){F=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:i,source:s,stack:F,digest:null}}function th(i,s,m){return{value:i,source:null,stack:m??null,digest:s??null}}function Od(i,s){try{console.error(s.value)}catch(m){setTimeout(function(){throw m})}}var rp=typeof WeakMap=="function"?WeakMap:Map;function ip(i,s,m){m=Ei(-1,m),m.tag=3,m.payload={element:null};var S=s.value;return m.callback=function(){fh||(fh=!0,yr=S),Od(i,s)},m}function op(i,s,m){m=Ei(-1,m),m.tag=3;var S=i.type.getDerivedStateFromError;if(typeof S=="function"){var F=s.value;m.payload=function(){return S(F)},m.callback=function(){Od(i,s)}}var Z=i.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(m.callback=function(){Od(i,s),typeof S!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var Se=s.stack;this.componentDidCatch(s.value,{componentStack:Se!==null?Se:""})}),m}function sp(i,s,m){var S=i.pingCache;if(S===null){S=i.pingCache=new rp;var F=new Set;S.set(s,F)}else F=S.get(s),F===void 0&&(F=new Set,S.set(s,F));F.has(m)||(F.add(m),i=Gm.bind(null,i,s,m),s.then(i,i))}function ap(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function jd(i,s,m,S,F){return i.mode&1?(i.flags|=65536,i.lanes=F,i):(i===s?i.flags|=65536:(i.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(s=Ei(-1,1),s.tag=2,Lo(m,s,1))),m.lanes|=1),i)}var lp=Me.ReactCurrentOwner,Ci=!1;function Di(i,s,m,S){s.child=i===null?Wc(s,null,m,S):ys(s,i.child,m,S)}function up(i,s,m,S,F){m=m.render;var Z=s.ref;return qn(s,F),S=Xc(i,s,m,S,Z,F),m=Bh(),i!==null&&!Ci?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~F,pa(i,s,F)):($e&&m&&be(s),s.flags|=1,Di(i,s,S,F),s.child)}function cp(i,s,m,S,F){if(i===null){var Z=m.type;return typeof Z=="function"&&!rf(Z)&&Z.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(s.tag=15,s.type=Z,hp(i,s,Z,S,F)):(i=yh(m.type,null,S,s,s.mode,F),i.ref=s.ref,i.return=s,s.child=i)}if(Z=i.child,!(i.lanes&F)){var Se=Z.memoizedProps;if(m=m.compare,m=m!==null?m:wt,m(Se,S)&&i.ref===s.ref)return pa(i,s,F)}return s.flags|=1,i=bl(Z,S),i.ref=s.ref,i.return=s,s.child=i}function hp(i,s,m,S,F){if(i!==null){var Z=i.memoizedProps;if(wt(Z,S)&&i.ref===s.ref)if(Ci=!1,s.pendingProps=S=Z,(i.lanes&F)!==0)i.flags&131072&&(Ci=!0);else return s.lanes=i.lanes,pa(i,s,F)}return Ld(i,s,m,S,F)}function dp(i,s,m){var S=s.pendingProps,F=S.children,Z=i!==null?i.memoizedState:null;if(S.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(Hu,ws),ws|=m;else{if(!(m&1073741824))return i=Z!==null?Z.baseLanes|m:m,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,kr(Hu,ws),ws|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=Z!==null?Z.baseLanes:m,kr(Hu,ws),ws|=S}else Z!==null?(S=Z.baseLanes|m,s.memoizedState=null):S=m,kr(Hu,ws),ws|=S;return Di(i,s,F,m),s.child}function fp(i,s){var m=s.ref;(i===null&&m!==null||i!==null&&i.ref!==m)&&(s.flags|=512,s.flags|=2097152)}function Ld(i,s,m,S,F){var Z=ji(m)?Wo:Sr.current;return Z=la(s,Z),qn(s,F),m=Xc(i,s,m,S,Z,F),S=Bh(),i!==null&&!Ci?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~F,pa(i,s,F)):($e&&S&&be(s),s.flags|=1,Di(i,s,m,F),s.child)}function pp(i,s,m,S,F){if(ji(m)){var Z=!0;Oo(s)}else Z=!1;if(qn(s,F),s.stateNode===null)nu(i,s),qo(s,m,S),Ii(s,m,S,F),S=!0;else if(i===null){var Se=s.stateNode,Xe=s.memoizedProps;Se.props=Xe;var ot=Se.context,bt=m.contextType;typeof bt=="object"&&bt!==null?bt=rr(bt):(bt=ji(m)?Wo:Sr.current,bt=la(s,bt));var Ot=m.getDerivedStateFromProps,Vt=typeof Ot=="function"||typeof Se.getSnapshotBeforeUpdate=="function";Vt||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Xe!==S||ot!==bt)&&Ti(s,Se,S,bt),ni=!1;var Rt=s.memoizedState;Se.state=Rt,oo(s,S,Se,F),ot=s.memoizedState,Xe!==S||Rt!==ot||tr.current||ni?(typeof Ot=="function"&&(xo(s,m,Ot,S),ot=s.memoizedState),(Xe=ni||ua(s,m,Xe,S,Rt,ot,bt))?(Vt||typeof Se.UNSAFE_componentWillMount!="function"&&typeof Se.componentWillMount!="function"||(typeof Se.componentWillMount=="function"&&Se.componentWillMount(),typeof Se.UNSAFE_componentWillMount=="function"&&Se.UNSAFE_componentWillMount()),typeof Se.componentDidMount=="function"&&(s.flags|=4194308)):(typeof Se.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=S,s.memoizedState=ot),Se.props=S,Se.state=ot,Se.context=bt,S=Xe):(typeof Se.componentDidMount=="function"&&(s.flags|=4194308),S=!1)}else{Se=s.stateNode,Zi(i,s),Xe=s.memoizedProps,bt=s.type===s.elementType?Xe:Lt(s.type,Xe),Se.props=bt,Vt=s.pendingProps,Rt=Se.context,ot=m.contextType,typeof ot=="object"&&ot!==null?ot=rr(ot):(ot=ji(m)?Wo:Sr.current,ot=la(s,ot));var dn=m.getDerivedStateFromProps;(Ot=typeof dn=="function"||typeof Se.getSnapshotBeforeUpdate=="function")||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Xe!==Vt||Rt!==ot)&&Ti(s,Se,S,ot),ni=!1,Rt=s.memoizedState,Se.state=Rt,oo(s,S,Se,F);var _n=s.memoizedState;Xe!==Vt||Rt!==_n||tr.current||ni?(typeof dn=="function"&&(xo(s,m,dn,S),_n=s.memoizedState),(bt=ni||ua(s,m,bt,S,Rt,_n,ot)||!1)?(Ot||typeof Se.UNSAFE_componentWillUpdate!="function"&&typeof Se.componentWillUpdate!="function"||(typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate(S,_n,ot),typeof Se.UNSAFE_componentWillUpdate=="function"&&Se.UNSAFE_componentWillUpdate(S,_n,ot)),typeof Se.componentDidUpdate=="function"&&(s.flags|=4),typeof Se.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof Se.componentDidUpdate!="function"||Xe===i.memoizedProps&&Rt===i.memoizedState||(s.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Xe===i.memoizedProps&&Rt===i.memoizedState||(s.flags|=1024),s.memoizedProps=S,s.memoizedState=_n),Se.props=S,Se.state=_n,Se.context=ot,S=bt):(typeof Se.componentDidUpdate!="function"||Xe===i.memoizedProps&&Rt===i.memoizedState||(s.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Xe===i.memoizedProps&&Rt===i.memoizedState||(s.flags|=1024),S=!1)}return nh(i,s,m,S,Z,F)}function nh(i,s,m,S,F,Z){fp(i,s);var Se=(s.flags&128)!==0;if(!S&&!Se)return F&&Yl(s,m,!1),pa(i,s,Z);S=s.stateNode,lp.current=s;var Xe=Se&&typeof m.getDerivedStateFromError!="function"?null:S.render();return s.flags|=1,i!==null&&Se?(s.child=ys(s,i.child,null,Z),s.child=ys(s,null,Xe,Z)):Di(i,s,Xe,Z),s.memoizedState=S.state,F&&Yl(s,m,!0),s.child}function mp(i){var s=i.stateNode;s.pendingContext?Xl(i,s.pendingContext,s.pendingContext!==s.context):s.context&&Xl(i,s.context,!1),yl(i,s.containerInfo)}function Vu(i,s,m,S,F){return Gt(),tn(F),s.flags|=256,Di(i,s,m,S),s.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Zr(i){return{baseLanes:i,cachePool:null,transitions:null}}function rh(i,s,m){var S=s.pendingProps,F=Ar.current,Z=!1,Se=(s.flags&128)!==0,Xe;if((Xe=Se)||(Xe=i!==null&&i.memoizedState===null?!1:(F&2)!==0),Xe?(Z=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(F|=1),kr(Ar,F&1),i===null)return ut(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(s.mode&1?i.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(Se=S.children,i=S.fallback,Z?(S=s.mode,Z=s.child,Se={mode:"hidden",children:Se},!(S&1)&&Z!==null?(Z.childLanes=0,Z.pendingProps=Se):Z=Ss(Se,S,0,null),i=wa(i,S,m,null),Z.return=s,i.return=s,Z.sibling=i,s.child=Z,s.child.memoizedState=Zr(m),s.memoizedState=Dd,i):Zh(s,Se));if(F=i.memoizedState,F!==null&&(Xe=F.dehydrated,Xe!==null))return Wh(i,s,Se,S,Xe,F,m);if(Z){Z=S.fallback,Se=s.mode,F=i.child,Xe=F.sibling;var ot={mode:"hidden",children:S.children};return!(Se&1)&&s.child!==F?(S=s.child,S.childLanes=0,S.pendingProps=ot,s.deletions=null):(S=bl(F,ot),S.subtreeFlags=F.subtreeFlags&14680064),Xe!==null?Z=bl(Xe,Z):(Z=wa(Z,Se,m,null),Z.flags|=2),Z.return=s,S.return=s,S.sibling=Z,s.child=S,S=Z,Z=s.child,Se=i.child.memoizedState,Se=Se===null?Zr(m):{baseLanes:Se.baseLanes|m,cachePool:null,transitions:Se.transitions},Z.memoizedState=Se,Z.childLanes=i.childLanes&~m,s.memoizedState=Dd,S}return Z=i.child,i=Z.sibling,S=bl(Z,{mode:"visible",children:S.children}),!(s.mode&1)&&(S.lanes=m),S.return=s,S.sibling=null,i!==null&&(m=s.deletions,m===null?(s.deletions=[i],s.flags|=16):m.push(i)),s.child=S,s.memoizedState=null,S}function Zh(i,s){return s=Ss({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function $u(i,s,m,S){return S!==null&&tn(S),ys(s,i.child,null,m),i=Zh(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Wh(i,s,m,S,F,Z,Se){if(m)return s.flags&256?(s.flags&=-257,S=th(Error(p(422))),$u(i,s,Se,S)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(Z=S.fallback,F=s.mode,S=Ss({mode:"visible",children:S.children},F,0,null),Z=wa(Z,F,Se,null),Z.flags|=2,S.return=s,Z.return=s,S.sibling=Z,s.child=S,s.mode&1&&ys(s,i.child,null,Se),s.child.memoizedState=Zr(Se),s.memoizedState=Dd,Z);if(!(s.mode&1))return $u(i,s,Se,null);if(F.data==="$!"){if(S=F.nextSibling&&F.nextSibling.dataset,S)var Xe=S.dgst;return S=Xe,Z=Error(p(419)),S=th(Z,S,void 0),$u(i,s,Se,S)}if(Xe=(Se&i.childLanes)!==0,Ci||Xe){if(S=Ni,S!==null){switch(Se&-Se){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=F&(S.suspendedLanes|Se)?0:F,F!==0&&F!==Z.retryLane&&(Z.retryLane=F,ti(i,F),_a(S,i,F,-1))}return td(),S=th(Error(p(421))),$u(i,s,Se,S)}return F.data==="$?"?(s.flags|=128,s.child=i.child,s=Pp.bind(null,i),F._reactRetry=s,null):(i=Z.treeContext,Ne=ps(F.nextSibling),Fe=s,$e=!0,qe=null,i!==null&&(g[I++]=O,g[I++]=X,g[I++]=A,O=i.id,X=i.overflow,A=s),s=Zh(s,S.children),s.flags|=4096,s)}function vc(i,s,m){i.lanes|=s;var S=i.alternate;S!==null&&(S.lanes|=s),Gn(i.return,s,m)}function qh(i,s,m,S,F){var Z=i.memoizedState;Z===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:F}:(Z.isBackwards=s,Z.rendering=null,Z.renderingStartTime=0,Z.last=S,Z.tail=m,Z.tailMode=F)}function Bd(i,s,m){var S=s.pendingProps,F=S.revealOrder,Z=S.tail;if(Di(i,s,S.children,m),S=Ar.current,S&2)S=S&1|2,s.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vc(i,m,s);else if(i.tag===19)vc(i,m,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}S&=1}if(kr(Ar,S),!(s.mode&1))s.memoizedState=null;else switch(F){case"forwards":for(m=s.child,F=null;m!==null;)i=m.alternate,i!==null&&Du(i)===null&&(F=m),m=m.sibling;m=F,m===null?(F=s.child,s.child=null):(F=m.sibling,m.sibling=null),qh(s,!1,F,m,Z);break;case"backwards":for(m=null,F=s.child,s.child=null;F!==null;){if(i=F.alternate,i!==null&&Du(i)===null){s.child=F;break}i=F.sibling,F.sibling=m,m=F,F=i}qh(s,!0,m,null,Z);break;case"together":qh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function nu(i,s){!(s.mode&1)&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function pa(i,s,m){if(i!==null&&(s.dependencies=i.dependencies),Zu|=s.lanes,!(m&s.childLanes))return null;if(i!==null&&s.child!==i.child)throw Error(p(153));if(s.child!==null){for(i=s.child,m=bl(i,i.pendingProps),s.child=m,m.return=s;i.sibling!==null;)i=i.sibling,m=m.sibling=bl(i,i.pendingProps),m.return=s;m.sibling=null}return s.child}function Nd(i,s,m){switch(s.tag){case 3:mp(s),Gt();break;case 5:Lu(s);break;case 1:ji(s.type)&&Oo(s);break;case 4:yl(s,s.stateNode.containerInfo);break;case 10:var S=s.type._context,F=s.memoizedProps.value;kr(hn,S._currentValue),S._currentValue=F;break;case 13:if(S=s.memoizedState,S!==null)return S.dehydrated!==null?(kr(Ar,Ar.current&1),s.flags|=128,null):m&s.child.childLanes?rh(i,s,m):(kr(Ar,Ar.current&1),i=pa(i,s,m),i!==null?i.sibling:null);kr(Ar,Ar.current&1);break;case 19:if(S=(m&s.childLanes)!==0,i.flags&128){if(S)return Bd(i,s,m);s.flags|=128}if(F=s.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),kr(Ar,Ar.current),S)break;return null;case 22:case 23:return s.lanes=0,dp(i,s,m)}return pa(i,s,m)}var Xh,ih,Ud,Vd;Xh=function(i,s){for(var m=s.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break;for(;m.sibling===null;){if(m.return===null||m.return===s)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},ih=function(){},Ud=function(i,s,m,S){var F=i.memoizedProps;if(F!==S){i=s.stateNode,Us(vs.current);var Z=null;switch(m){case"input":F=un(i,F),S=un(i,S),Z=[];break;case"select":F=ie({},F,{value:void 0}),S=ie({},S,{value:void 0}),Z=[];break;case"textarea":F=H(i,F),S=H(i,S),Z=[];break;default:typeof F.onClick!="function"&&typeof S.onClick=="function"&&(i.onclick=_o)}zn(m,S);var Se;m=null;for(bt in F)if(!S.hasOwnProperty(bt)&&F.hasOwnProperty(bt)&&F[bt]!=null)if(bt==="style"){var Xe=F[bt];for(Se in Xe)Xe.hasOwnProperty(Se)&&(m||(m={}),m[Se]="")}else bt!=="dangerouslySetInnerHTML"&&bt!=="children"&&bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&bt!=="autoFocus"&&(x.hasOwnProperty(bt)?Z||(Z=[]):(Z=Z||[]).push(bt,null));for(bt in S){var ot=S[bt];if(Xe=F!=null?F[bt]:void 0,S.hasOwnProperty(bt)&&ot!==Xe&&(ot!=null||Xe!=null))if(bt==="style")if(Xe){for(Se in Xe)!Xe.hasOwnProperty(Se)||ot&&ot.hasOwnProperty(Se)||(m||(m={}),m[Se]="");for(Se in ot)ot.hasOwnProperty(Se)&&Xe[Se]!==ot[Se]&&(m||(m={}),m[Se]=ot[Se])}else m||(Z||(Z=[]),Z.push(bt,m)),m=ot;else bt==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,Xe=Xe?Xe.__html:void 0,ot!=null&&Xe!==ot&&(Z=Z||[]).push(bt,ot)):bt==="children"?typeof ot!="string"&&typeof ot!="number"||(Z=Z||[]).push(bt,""+ot):bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&(x.hasOwnProperty(bt)?(ot!=null&&bt==="onScroll"&&Ir("scroll",i),Z||Xe===ot||(Z=[])):(Z=Z||[]).push(bt,ot))}m&&(Z=Z||[]).push("style",m);var bt=Z;(s.updateQueue=bt)&&(s.flags|=4)}},Vd=function(i,s,m,S){m!==S&&(s.flags|=4)};function oh(i,s){if(!$e)switch(i.tailMode){case"hidden":s=i.tail;for(var m=null;s!==null;)s.alternate!==null&&(m=s),s=s.sibling;m===null?i.tail=null:m.sibling=null;break;case"collapsed":m=i.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:S.sibling=null}}function bo(i){var s=i.alternate!==null&&i.alternate.child===i.child,m=0,S=0;if(s)for(var F=i.child;F!==null;)m|=F.lanes|F.childLanes,S|=F.subtreeFlags&14680064,S|=F.flags&14680064,F.return=i,F=F.sibling;else for(F=i.child;F!==null;)m|=F.lanes|F.childLanes,S|=F.subtreeFlags,S|=F.flags,F.return=i,F=F.sibling;return i.subtreeFlags|=S,i.childLanes=m,s}function Dm(i,s,m){var S=s.pendingProps;switch(Ae(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bo(s),null;case 1:return ji(s.type)&&Ru(),bo(s),null;case 3:return S=s.stateNode,ca(),Cr(tr),Cr(Sr),Lh(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(i===null||i.child===null)&&(At(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,qe!==null&&(qd(qe),qe=null))),ih(i,s),bo(s),null;case 5:$a(s);var F=Us(Ql.current);if(m=s.type,i!==null&&s.stateNode!=null)Ud(i,s,m,S,F),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!S){if(s.stateNode===null)throw Error(p(166));return bo(s),null}if(i=Us(vs.current),At(s)){S=s.stateNode,m=s.type;var Z=s.memoizedProps;switch(S[io]=s,S[Ns]=Z,i=(s.mode&1)!==0,m){case"dialog":Ir("cancel",S),Ir("close",S);break;case"iframe":case"object":case"embed":Ir("load",S);break;case"video":case"audio":for(F=0;F<Ba.length;F++)Ir(Ba[F],S);break;case"source":Ir("error",S);break;case"img":case"image":case"link":Ir("error",S),Ir("load",S);break;case"details":Ir("toggle",S);break;case"input":In(S,Z),Ir("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!Z.multiple},Ir("invalid",S);break;case"textarea":Ce(S,Z),Ir("invalid",S)}zn(m,Z),F=null;for(var Se in Z)if(Z.hasOwnProperty(Se)){var Xe=Z[Se];Se==="children"?typeof Xe=="string"?S.textContent!==Xe&&(Z.suppressHydrationWarning!==!0&&Wl(S.textContent,Xe,i),F=["children",Xe]):typeof Xe=="number"&&S.textContent!==""+Xe&&(Z.suppressHydrationWarning!==!0&&Wl(S.textContent,Xe,i),F=["children",""+Xe]):x.hasOwnProperty(Se)&&Xe!=null&&Se==="onScroll"&&Ir("scroll",S)}switch(m){case"input":Tt(S),cn(S,Z,!0);break;case"textarea":Tt(S),ct(S);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(S.onclick=_o)}S=F,s.updateQueue=S,S!==null&&(s.flags|=4)}else{Se=F.nodeType===9?F:F.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Et(m)),i==="http://www.w3.org/1999/xhtml"?m==="script"?(i=Se.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof S.is=="string"?i=Se.createElement(m,{is:S.is}):(i=Se.createElement(m),m==="select"&&(Se=i,S.multiple?Se.multiple=!0:S.size&&(Se.size=S.size))):i=Se.createElementNS(i,m),i[io]=s,i[Ns]=S,Xh(i,s,!1,!1),s.stateNode=i;e:{switch(Se=Zn(m,S),m){case"dialog":Ir("cancel",i),Ir("close",i),F=S;break;case"iframe":case"object":case"embed":Ir("load",i),F=S;break;case"video":case"audio":for(F=0;F<Ba.length;F++)Ir(Ba[F],i);F=S;break;case"source":Ir("error",i),F=S;break;case"img":case"image":case"link":Ir("error",i),Ir("load",i),F=S;break;case"details":Ir("toggle",i),F=S;break;case"input":In(i,S),F=un(i,S),Ir("invalid",i);break;case"option":F=S;break;case"select":i._wrapperState={wasMultiple:!!S.multiple},F=ie({},S,{value:void 0}),Ir("invalid",i);break;case"textarea":Ce(i,S),F=H(i,S),Ir("invalid",i);break;default:F=S}zn(m,F),Xe=F;for(Z in Xe)if(Xe.hasOwnProperty(Z)){var ot=Xe[Z];Z==="style"?jt(i,ot):Z==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&q(i,ot)):Z==="children"?typeof ot=="string"?(m!=="textarea"||ot!=="")&&Re(i,ot):typeof ot=="number"&&Re(i,""+ot):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(x.hasOwnProperty(Z)?ot!=null&&Z==="onScroll"&&Ir("scroll",i):ot!=null&&_e(i,Z,ot,Se))}switch(m){case"input":Tt(i),cn(i,S,!1);break;case"textarea":Tt(i),ct(i);break;case"option":S.value!=null&&i.setAttribute("value",""+_t(S.value));break;case"select":i.multiple=!!S.multiple,Z=S.value,Z!=null?G(i,!!S.multiple,Z,!1):S.defaultValue!=null&&G(i,!!S.multiple,S.defaultValue,!0);break;default:typeof F.onClick=="function"&&(i.onclick=_o)}switch(m){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return bo(s),null;case 6:if(i&&s.stateNode!=null)Vd(i,s,i.memoizedProps,S);else{if(typeof S!="string"&&s.stateNode===null)throw Error(p(166));if(m=Us(Ql.current),Us(vs.current),At(s)){if(S=s.stateNode,m=s.memoizedProps,S[io]=s,(Z=S.nodeValue!==m)&&(i=Fe,i!==null))switch(i.tag){case 3:Wl(S.nodeValue,m,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Wl(S.nodeValue,m,(i.mode&1)!==0)}Z&&(s.flags|=4)}else S=(m.nodeType===9?m:m.ownerDocument).createTextNode(S),S[io]=s,s.stateNode=S}return bo(s),null;case 13:if(Cr(Ar),S=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if($e&&Ne!==null&&s.mode&1&&!(s.flags&128))Dt(),Gt(),s.flags|=98560,Z=!1;else if(Z=At(s),S!==null&&S.dehydrated!==null){if(i===null){if(!Z)throw Error(p(318));if(Z=s.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(p(317));Z[io]=s}else Gt(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;bo(s),Z=!1}else qe!==null&&(qd(qe),qe=null),Z=!0;if(!Z)return s.flags&65536?s:null}return s.flags&128?(s.lanes=m,s):(S=S!==null,S!==(i!==null&&i.memoizedState!==null)&&S&&(s.child.flags|=8192,s.mode&1&&(i===null||Ar.current&1?Ui===0&&(Ui=3):td())),s.updateQueue!==null&&(s.flags|=4),bo(s),null);case 4:return ca(),ih(i,s),i===null&&ia(s.stateNode.containerInfo),bo(s),null;case 10:return Er(s.type._context),bo(s),null;case 17:return ji(s.type)&&Ru(),bo(s),null;case 19:if(Cr(Ar),Z=s.memoizedState,Z===null)return bo(s),null;if(S=(s.flags&128)!==0,Se=Z.rendering,Se===null)if(S)oh(Z,!1);else{if(Ui!==0||i!==null&&i.flags&128)for(i=s.child;i!==null;){if(Se=Du(i),Se!==null){for(s.flags|=128,oh(Z,!1),S=Se.updateQueue,S!==null&&(s.updateQueue=S,s.flags|=4),s.subtreeFlags=0,S=m,m=s.child;m!==null;)Z=m,i=S,Z.flags&=14680066,Se=Z.alternate,Se===null?(Z.childLanes=0,Z.lanes=i,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=Se.childLanes,Z.lanes=Se.lanes,Z.child=Se.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=Se.memoizedProps,Z.memoizedState=Se.memoizedState,Z.updateQueue=Se.updateQueue,Z.type=Se.type,i=Se.dependencies,Z.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),m=m.sibling;return kr(Ar,Ar.current&1|2),s.child}i=i.sibling}Z.tail!==null&&Pn()>Wu&&(s.flags|=128,S=!0,oh(Z,!1),s.lanes=4194304)}else{if(!S)if(i=Du(Se),i!==null){if(s.flags|=128,S=!0,m=i.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),oh(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!Se.alternate&&!$e)return bo(s),null}else 2*Pn()-Z.renderingStartTime>Wu&&m!==1073741824&&(s.flags|=128,S=!0,oh(Z,!1),s.lanes=4194304);Z.isBackwards?(Se.sibling=s.child,s.child=Se):(m=Z.last,m!==null?m.sibling=Se:s.child=Se,Z.last=Se)}return Z.tail!==null?(s=Z.tail,Z.rendering=s,Z.tail=s.sibling,Z.renderingStartTime=Pn(),s.sibling=null,m=Ar.current,kr(Ar,S?m&1|2:m&1),s):(bo(s),null);case 22:case 23:return Kd(),S=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==S&&(s.flags|=8192),S&&s.mode&1?ws&1073741824&&(bo(s),s.subtreeFlags&6&&(s.flags|=8192)):bo(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Bm(i,s){switch(Ae(s),s.tag){case 1:return ji(s.type)&&Ru(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ca(),Cr(tr),Cr(Sr),Lh(),i=s.flags,i&65536&&!(i&128)?(s.flags=i&-65537|128,s):null;case 5:return $a(s),null;case 13:if(Cr(Ar),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Gt()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Cr(Ar),null;case 4:return ca(),null;case 10:return Er(s.type._context),null;case 22:case 23:return Kd(),null;case 24:return null;default:return null}}var Kh=!1,si=!1,Nm=typeof WeakSet=="function"?WeakSet:Set,gn=null;function ma(i,s){var m=i.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(S){fi(i,s,S)}else m.current=null}function $d(i,s,m){try{m()}catch(S){fi(i,s,S)}}var gp=!1;function Um(i,s){if(sa=Ys,i=Sn(),Ln(i)){if("selectionStart"in i)var m={start:i.selectionStart,end:i.selectionEnd};else e:{m=(m=i.ownerDocument)&&m.defaultView||window;var S=m.getSelection&&m.getSelection();if(S&&S.rangeCount!==0){m=S.anchorNode;var F=S.anchorOffset,Z=S.focusNode;S=S.focusOffset;try{m.nodeType,Z.nodeType}catch{m=null;break e}var Se=0,Xe=-1,ot=-1,bt=0,Ot=0,Vt=i,Rt=null;t:for(;;){for(var dn;Vt!==m||F!==0&&Vt.nodeType!==3||(Xe=Se+F),Vt!==Z||S!==0&&Vt.nodeType!==3||(ot=Se+S),Vt.nodeType===3&&(Se+=Vt.nodeValue.length),(dn=Vt.firstChild)!==null;)Rt=Vt,Vt=dn;for(;;){if(Vt===i)break t;if(Rt===m&&++bt===F&&(Xe=Se),Rt===Z&&++Ot===S&&(ot=Se),(dn=Vt.nextSibling)!==null)break;Vt=Rt,Rt=Vt.parentNode}Vt=dn}m=Xe===-1||ot===-1?null:{start:Xe,end:ot}}else m=null}m=m||{start:0,end:0}}else m=null;for($c={focusedElem:i,selectionRange:m},Ys=!1,gn=s;gn!==null;)if(s=gn,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,gn=i;else for(;gn!==null;){s=gn;try{var _n=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(_n!==null){var bn=_n.memoizedProps,pi=_n.memoizedState,vt=s.stateNode,lt=vt.getSnapshotBeforeUpdate(s.elementType===s.type?bn:Lt(s.type,bn),pi);vt.__reactInternalSnapshotBeforeUpdate=lt}break;case 3:var xt=s.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Xt){fi(s,s.return,Xt)}if(i=s.sibling,i!==null){i.return=s.return,gn=i;break}gn=s.return}return _n=gp,gp=!1,_n}function _c(i,s,m){var S=s.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var F=S=S.next;do{if((F.tag&i)===i){var Z=F.destroy;F.destroy=void 0,Z!==void 0&&$d(s,m,Z)}F=F.next}while(F!==S)}}function sh(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var m=s=s.next;do{if((m.tag&i)===i){var S=m.create;m.destroy=S()}m=m.next}while(m!==s)}}function Gd(i){var s=i.ref;if(s!==null){var m=i.stateNode;switch(i.tag){case 5:i=m;break;default:i=m}typeof s=="function"?s(i):s.current=i}}function yp(i){var s=i.alternate;s!==null&&(i.alternate=null,yp(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[io],delete s[Ns],delete s[Yn],delete s[Hc],delete s[Cd])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function vp(i){return i.tag===5||i.tag===3||i.tag===4}function _p(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||vp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ah(i,s,m){var S=i.tag;if(S===5||S===6)i=i.stateNode,s?m.nodeType===8?m.parentNode.insertBefore(i,s):m.insertBefore(i,s):(m.nodeType===8?(s=m.parentNode,s.insertBefore(i,m)):(s=m,s.appendChild(i)),m=m._reactRootContainer,m!=null||s.onclick!==null||(s.onclick=_o));else if(S!==4&&(i=i.child,i!==null))for(ah(i,s,m),i=i.sibling;i!==null;)ah(i,s,m),i=i.sibling}function Gu(i,s,m){var S=i.tag;if(S===5||S===6)i=i.stateNode,s?m.insertBefore(i,s):m.appendChild(i);else if(S!==4&&(i=i.child,i!==null))for(Gu(i,s,m),i=i.sibling;i!==null;)Gu(i,s,m),i=i.sibling}var Bi=null,ga=!1;function ru(i,s,m){for(m=m.child;m!==null;)Hd(i,s,m),m=m.sibling}function Hd(i,s,m){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(xi,m)}catch{}switch(m.tag){case 5:si||ma(m,s);case 6:var S=Bi,F=ga;Bi=null,ru(i,s,m),Bi=S,ga=F,Bi!==null&&(ga?(i=Bi,m=m.stateNode,i.nodeType===8?i.parentNode.removeChild(m):i.removeChild(m)):Bi.removeChild(m.stateNode));break;case 18:Bi!==null&&(ga?(i=Bi,m=m.stateNode,i.nodeType===8?on(i.parentNode,m):i.nodeType===1&&on(i,m),ss(i)):on(Bi,m.stateNode));break;case 4:S=Bi,F=ga,Bi=m.stateNode.containerInfo,ga=!0,ru(i,s,m),Bi=S,ga=F;break;case 0:case 11:case 14:case 15:if(!si&&(S=m.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){F=S=S.next;do{var Z=F,Se=Z.destroy;Z=Z.tag,Se!==void 0&&(Z&2||Z&4)&&$d(m,s,Se),F=F.next}while(F!==S)}ru(i,s,m);break;case 1:if(!si&&(ma(m,s),S=m.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=m.memoizedProps,S.state=m.memoizedState,S.componentWillUnmount()}catch(Xe){fi(m,s,Xe)}ru(i,s,m);break;case 21:ru(i,s,m);break;case 22:m.mode&1?(si=(S=si)||m.memoizedState!==null,ru(i,s,m),si=S):ru(i,s,m);break;default:ru(i,s,m)}}function xp(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var m=i.stateNode;m===null&&(m=i.stateNode=new Nm),s.forEach(function(S){var F=Hm.bind(null,i,S);m.has(S)||(m.add(S),S.then(F,F))})}}function ya(i,s){var m=s.deletions;if(m!==null)for(var S=0;S<m.length;S++){var F=m[S];try{var Z=i,Se=s,Xe=Se;e:for(;Xe!==null;){switch(Xe.tag){case 5:Bi=Xe.stateNode,ga=!1;break e;case 3:Bi=Xe.stateNode.containerInfo,ga=!0;break e;case 4:Bi=Xe.stateNode.containerInfo,ga=!0;break e}Xe=Xe.return}if(Bi===null)throw Error(p(160));Hd(Z,Se,F),Bi=null,ga=!1;var ot=F.alternate;ot!==null&&(ot.return=null),F.return=null}catch(bt){fi(F,s,bt)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)xc(s,i),s=s.sibling}function xc(i,s){var m=i.alternate,S=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ya(s,i),va(i),S&4){try{_c(3,i,i.return),sh(3,i)}catch(bn){fi(i,i.return,bn)}try{_c(5,i,i.return)}catch(bn){fi(i,i.return,bn)}}break;case 1:ya(s,i),va(i),S&512&&m!==null&&ma(m,m.return);break;case 5:if(ya(s,i),va(i),S&512&&m!==null&&ma(m,m.return),i.flags&32){var F=i.stateNode;try{Re(F,"")}catch(bn){fi(i,i.return,bn)}}if(S&4&&(F=i.stateNode,F!=null)){var Z=i.memoizedProps,Se=m!==null?m.memoizedProps:Z,Xe=i.type,ot=i.updateQueue;if(i.updateQueue=null,ot!==null)try{Xe==="input"&&Z.type==="radio"&&Z.name!=null&&at(F,Z),Zn(Xe,Se);var bt=Zn(Xe,Z);for(Se=0;Se<ot.length;Se+=2){var Ot=ot[Se],Vt=ot[Se+1];Ot==="style"?jt(F,Vt):Ot==="dangerouslySetInnerHTML"?q(F,Vt):Ot==="children"?Re(F,Vt):_e(F,Ot,Vt,bt)}switch(Xe){case"input":kn(F,Z);break;case"textarea":rt(F,Z);break;case"select":var Rt=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!Z.multiple;var dn=Z.value;dn!=null?G(F,!!Z.multiple,dn,!1):Rt!==!!Z.multiple&&(Z.defaultValue!=null?G(F,!!Z.multiple,Z.defaultValue,!0):G(F,!!Z.multiple,Z.multiple?[]:"",!1))}F[Ns]=Z}catch(bn){fi(i,i.return,bn)}}break;case 6:if(ya(s,i),va(i),S&4){if(i.stateNode===null)throw Error(p(162));F=i.stateNode,Z=i.memoizedProps;try{F.nodeValue=Z}catch(bn){fi(i,i.return,bn)}}break;case 3:if(ya(s,i),va(i),S&4&&m!==null&&m.memoizedState.isDehydrated)try{ss(s.containerInfo)}catch(bn){fi(i,i.return,bn)}break;case 4:ya(s,i),va(i);break;case 13:ya(s,i),va(i),F=i.child,F.flags&8192&&(Z=F.memoizedState!==null,F.stateNode.isHidden=Z,!Z||F.alternate!==null&&F.alternate.memoizedState!==null||(ai=Pn())),S&4&&xp(i);break;case 22:if(Ot=m!==null&&m.memoizedState!==null,i.mode&1?(si=(bt=si)||Ot,ya(s,i),si=bt):ya(s,i),va(i),S&8192){if(bt=i.memoizedState!==null,(i.stateNode.isHidden=bt)&&!Ot&&i.mode&1)for(gn=i,Ot=i.child;Ot!==null;){for(Vt=gn=Ot;gn!==null;){switch(Rt=gn,dn=Rt.child,Rt.tag){case 0:case 11:case 14:case 15:_c(4,Rt,Rt.return);break;case 1:ma(Rt,Rt.return);var _n=Rt.stateNode;if(typeof _n.componentWillUnmount=="function"){S=Rt,m=Rt.return;try{s=S,_n.props=s.memoizedProps,_n.state=s.memoizedState,_n.componentWillUnmount()}catch(bn){fi(S,m,bn)}}break;case 5:ma(Rt,Rt.return);break;case 22:if(Rt.memoizedState!==null){Sp(Vt);continue}}dn!==null?(dn.return=Rt,gn=dn):Sp(Vt)}Ot=Ot.sibling}e:for(Ot=null,Vt=i;;){if(Vt.tag===5){if(Ot===null){Ot=Vt;try{F=Vt.stateNode,bt?(Z=F.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Xe=Vt.stateNode,ot=Vt.memoizedProps.style,Se=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,Xe.style.display=Qe("display",Se))}catch(bn){fi(i,i.return,bn)}}}else if(Vt.tag===6){if(Ot===null)try{Vt.stateNode.nodeValue=bt?"":Vt.memoizedProps}catch(bn){fi(i,i.return,bn)}}else if((Vt.tag!==22&&Vt.tag!==23||Vt.memoizedState===null||Vt===i)&&Vt.child!==null){Vt.child.return=Vt,Vt=Vt.child;continue}if(Vt===i)break e;for(;Vt.sibling===null;){if(Vt.return===null||Vt.return===i)break e;Ot===Vt&&(Ot=null),Vt=Vt.return}Ot===Vt&&(Ot=null),Vt.sibling.return=Vt.return,Vt=Vt.sibling}}break;case 19:ya(s,i),va(i),S&4&&xp(i);break;case 21:break;default:ya(s,i),va(i)}}function va(i){var s=i.flags;if(s&2){try{e:{for(var m=i.return;m!==null;){if(vp(m)){var S=m;break e}m=m.return}throw Error(p(160))}switch(S.tag){case 5:var F=S.stateNode;S.flags&32&&(Re(F,""),S.flags&=-33);var Z=_p(i);Gu(i,Z,F);break;case 3:case 4:var Se=S.stateNode.containerInfo,Xe=_p(i);ah(i,Xe,Se);break;default:throw Error(p(161))}}catch(ot){fi(i,i.return,ot)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Vm(i,s,m){gn=i,wp(i)}function wp(i,s,m){for(var S=(i.mode&1)!==0;gn!==null;){var F=gn,Z=F.child;if(F.tag===22&&S){var Se=F.memoizedState!==null||Kh;if(!Se){var Xe=F.alternate,ot=Xe!==null&&Xe.memoizedState!==null||si;Xe=Kh;var bt=si;if(Kh=Se,(si=ot)&&!bt)for(gn=F;gn!==null;)Se=gn,ot=Se.child,Se.tag===22&&Se.memoizedState!==null?Ep(F):ot!==null?(ot.return=Se,gn=ot):Ep(F);for(;Z!==null;)gn=Z,wp(Z),Z=Z.sibling;gn=F,Kh=Xe,si=bt}bp(i)}else F.subtreeFlags&8772&&Z!==null?(Z.return=F,gn=Z):bp(i)}}function bp(i){for(;gn!==null;){var s=gn;if(s.flags&8772){var m=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:si||sh(5,s);break;case 1:var S=s.stateNode;if(s.flags&4&&!si)if(m===null)S.componentDidMount();else{var F=s.elementType===s.type?m.memoizedProps:Lt(s.type,m.memoizedProps);S.componentDidUpdate(F,m.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var Z=s.updateQueue;Z!==null&&Ou(s,Z,S);break;case 3:var Se=s.updateQueue;if(Se!==null){if(m=null,s.child!==null)switch(s.child.tag){case 5:m=s.child.stateNode;break;case 1:m=s.child.stateNode}Ou(s,Se,m)}break;case 5:var Xe=s.stateNode;if(m===null&&s.flags&4){m=Xe;var ot=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&m.focus();break;case"img":ot.src&&(m.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var bt=s.alternate;if(bt!==null){var Ot=bt.memoizedState;if(Ot!==null){var Vt=Ot.dehydrated;Vt!==null&&ss(Vt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}si||s.flags&512&&Gd(s)}catch(Rt){fi(s,s.return,Rt)}}if(s===i){gn=null;break}if(m=s.sibling,m!==null){m.return=s.return,gn=m;break}gn=s.return}}function Sp(i){for(;gn!==null;){var s=gn;if(s===i){gn=null;break}var m=s.sibling;if(m!==null){m.return=s.return,gn=m;break}gn=s.return}}function Ep(i){for(;gn!==null;){var s=gn;try{switch(s.tag){case 0:case 11:case 15:var m=s.return;try{sh(4,s)}catch(ot){fi(s,m,ot)}break;case 1:var S=s.stateNode;if(typeof S.componentDidMount=="function"){var F=s.return;try{S.componentDidMount()}catch(ot){fi(s,F,ot)}}var Z=s.return;try{Gd(s)}catch(ot){fi(s,Z,ot)}break;case 5:var Se=s.return;try{Gd(s)}catch(ot){fi(s,Se,ot)}}}catch(ot){fi(s,s.return,ot)}if(s===i){gn=null;break}var Xe=s.sibling;if(Xe!==null){Xe.return=s.return,gn=Xe;break}gn=s.return}}var $m=Math.ceil,lh=Me.ReactCurrentDispatcher,uh=Me.ReactCurrentOwner,xs=Me.ReactCurrentBatchConfig,mr=0,Ni=null,Pi=null,Ai=0,ws=0,Hu=Na(0),Ui=0,ch=null,Zu=0,hh=0,Zd=0,dh=null,qi=null,ai=0,Wu=1/0,Ha=null,fh=!1,yr=null,Za=null,ph=!1,vl=null,Vs=0,Wa=0,Yh=null,Jh=-1,Qh=0;function Do(){return mr&6?Pn():Jh!==-1?Jh:Jh=Pn()}function iu(i){return i.mode&1?mr&2&&Ai!==0?Ai&-Ai:Ht.transition!==null?(Qh===0&&(Qh=co()),Qh):(i=ur,i!==0||(i=window.event,i=i===void 0?16:Fs(i.type)),i):1}function _a(i,s,m,S){if(50<Wa)throw Wa=0,Yh=null,Error(p(185));qs(i,m,S),(!(mr&2)||i!==Ni)&&(i===Ni&&(!(mr&2)&&(hh|=m),Ui===4&&bs(i,Ai)),Ko(i,S),m===1&&mr===0&&!(s.mode&1)&&(Wu=Pn()+500,En&&y()))}function Ko(i,s){var m=i.callbackNode;Al(i,s);var S=$i(i,i===Ni?Ai:0);if(S===0)m!==null&&ci(m),i.callbackNode=null,i.callbackPriority=0;else if(s=S&-S,i.callbackPriority!==s){if(m!=null&&ci(m),s===1)i.tag===0?Zc(Xd.bind(null,i)):Fu(Xd.bind(null,i)),ql(function(){!(mr&6)&&y()}),m=null;else{switch(el(S)){case 1:m=Xn;break;case 4:m=Kr;break;case 16:m=_i;break;case 536870912:m=Qi;break;default:m=_i}m=tf(m,Tp.bind(null,i))}i.callbackPriority=s,i.callbackNode=m}}function Tp(i,s){if(Jh=-1,Qh=0,mr&6)throw Error(p(327));var m=i.callbackNode;if(wl()&&i.callbackNode!==m)return null;var S=$i(i,i===Ni?Ai:0);if(S===0)return null;if(S&30||S&i.expiredLanes||s)s=Xi(i,S);else{s=S;var F=mr;mr|=2;var Z=Yd();(Ni!==i||Ai!==s)&&(Ha=null,Wu=Pn()+500,qu(i,s));do try{Cp();break}catch(Xe){Ip(i,Xe)}while(!0);Fn(),lh.current=Z,mr=F,Pi!==null?s=0:(Ni=null,Ai=0,s=Ui)}if(s!==0){if(s===2&&(F=os(i),F!==0&&(S=F,s=Wd(i,F))),s===1)throw m=ch,qu(i,0),bs(i,S),Ko(i,Pn()),m;if(s===6)bs(i,S);else{if(F=i.current.alternate,!(S&30)&&!ed(F)&&(s=Xi(i,S),s===2&&(Z=os(i),Z!==0&&(S=Z,s=Wd(i,Z))),s===1))throw m=ch,qu(i,0),bs(i,S),Ko(i,Pn()),m;switch(i.finishedWork=F,i.finishedLanes=S,s){case 0:case 1:throw Error(p(345));case 2:xa(i,qi,Ha);break;case 3:if(bs(i,S),(S&130023424)===S&&(s=ai+500-Pn(),10<s)){if($i(i,0)!==0)break;if(F=i.suspendedLanes,(F&S)!==S){Do(),i.pingedLanes|=i.suspendedLanes&F;break}i.timeoutHandle=dc(xa.bind(null,i,qi,Ha),s);break}xa(i,qi,Ha);break;case 4:if(bs(i,S),(S&4194240)===S)break;for(s=i.eventTimes,F=-1;0<S;){var Se=31-fr(S);Z=1<<Se,Se=s[Se],Se>F&&(F=Se),S&=~Z}if(S=F,S=Pn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*$m(S/1960))-S,10<S){i.timeoutHandle=dc(xa.bind(null,i,qi,Ha),S);break}xa(i,qi,Ha);break;case 5:xa(i,qi,Ha);break;default:throw Error(p(329))}}}return Ko(i,Pn()),i.callbackNode===m?Tp.bind(null,i):null}function Wd(i,s){var m=dh;return i.current.memoizedState.isDehydrated&&(qu(i,s).flags|=256),i=Xi(i,s),i!==2&&(s=qi,qi=m,s!==null&&qd(s)),i}function qd(i){qi===null?qi=i:qi.push.apply(qi,i)}function ed(i){for(var s=i;;){if(s.flags&16384){var m=s.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var S=0;S<m.length;S++){var F=m[S],Z=F.getSnapshot;F=F.value;try{if(!We(Z(),F))return!1}catch{return!1}}}if(m=s.child,s.subtreeFlags&16384&&m!==null)m.return=s,s=m;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bs(i,s){for(s&=~Zd,s&=~hh,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var m=31-fr(s),S=1<<m;i[m]=-1,s&=~S}}function Xd(i){if(mr&6)throw Error(p(327));wl();var s=$i(i,0);if(!(s&1))return Ko(i,Pn()),null;var m=Xi(i,s);if(i.tag!==0&&m===2){var S=os(i);S!==0&&(s=S,m=Wd(i,S))}if(m===1)throw m=ch,qu(i,0),bs(i,s),Ko(i,Pn()),m;if(m===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,xa(i,qi,Ha),Ko(i,Pn()),null}function mh(i,s){var m=mr;mr|=1;try{return i(s)}finally{mr=m,mr===0&&(Wu=Pn()+500,En&&y())}}function _l(i){vl!==null&&vl.tag===0&&!(mr&6)&&wl();var s=mr;mr|=1;var m=xs.transition,S=ur;try{if(xs.transition=null,ur=1,i)return i()}finally{ur=S,xs.transition=m,mr=s,!(mr&6)&&y()}}function Kd(){ws=Hu.current,Cr(Hu)}function qu(i,s){i.finishedWork=null,i.finishedLanes=0;var m=i.timeoutHandle;if(m!==-1&&(i.timeoutHandle=-1,Oh(m)),Pi!==null)for(m=Pi.return;m!==null;){var S=m;switch(Ae(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Ru();break;case 3:ca(),Cr(tr),Cr(Sr),Lh();break;case 5:$a(S);break;case 4:ca();break;case 13:Cr(Ar);break;case 19:Cr(Ar);break;case 10:Er(S.type._context);break;case 22:case 23:Kd()}m=m.return}if(Ni=i,Pi=i=bl(i.current,null),Ai=ws=s,Ui=0,ch=null,Zd=hh=Zu=0,qi=dh=null,ei!==null){for(s=0;s<ei.length;s++)if(m=ei[s],S=m.interleaved,S!==null){m.interleaved=null;var F=S.next,Z=m.pending;if(Z!==null){var Se=Z.next;Z.next=F,S.next=Se}m.pending=S}ei=null}return i}function Ip(i,s){do{var m=Pi;try{if(Fn(),Dh.current=Qc,da){for(var S=zr.memoizedState;S!==null;){var F=S.queue;F!==null&&(F.pending=null),S=S.next}da=!1}if(ha=0,Rr=Lr=zr=null,gc=!1,fa=0,uh.current=null,m===null||m.return===null){Ui=1,ch=s,Pi=null;break}e:{var Z=i,Se=m.return,Xe=m,ot=s;if(s=Ai,Xe.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var bt=ot,Ot=Xe,Vt=Ot.tag;if(!(Ot.mode&1)&&(Vt===0||Vt===11||Vt===15)){var Rt=Ot.alternate;Rt?(Ot.updateQueue=Rt.updateQueue,Ot.memoizedState=Rt.memoizedState,Ot.lanes=Rt.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var dn=ap(Se);if(dn!==null){dn.flags&=-257,jd(dn,Se,Xe,Z,s),dn.mode&1&&sp(Z,bt,s),s=dn,ot=bt;var _n=s.updateQueue;if(_n===null){var bn=new Set;bn.add(ot),s.updateQueue=bn}else _n.add(ot);break e}else{if(!(s&1)){sp(Z,bt,s),td();break e}ot=Error(p(426))}}else if($e&&Xe.mode&1){var pi=ap(Se);if(pi!==null){!(pi.flags&65536)&&(pi.flags|=256),jd(pi,Se,Xe,Z,s),tn(Uu(ot,Xe));break e}}Z=ot=Uu(ot,Xe),Ui!==4&&(Ui=2),dh===null?dh=[Z]:dh.push(Z),Z=Se;do{switch(Z.tag){case 3:Z.flags|=65536,s&=-s,Z.lanes|=s;var vt=ip(Z,ot,s);ml(Z,vt);break e;case 1:Xe=ot;var lt=Z.type,xt=Z.stateNode;if(!(Z.flags&128)&&(typeof lt.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Za===null||!Za.has(xt)))){Z.flags|=65536,s&=-s,Z.lanes|=s;var Xt=op(Z,Xe,s);ml(Z,Xt);break e}}Z=Z.return}while(Z!==null)}wc(m)}catch(Tn){s=Tn,Pi===m&&m!==null&&(Pi=m=m.return);continue}break}while(!0)}function Yd(){var i=lh.current;return lh.current=Qc,i===null?Qc:i}function td(){(Ui===0||Ui===3||Ui===2)&&(Ui=4),Ni===null||!(Zu&268435455)&&!(hh&268435455)||bs(Ni,Ai)}function Xi(i,s){var m=mr;mr|=2;var S=Yd();(Ni!==i||Ai!==s)&&(Ha=null,qu(i,s));do try{Jd();break}catch(F){Ip(i,F)}while(!0);if(Fn(),mr=m,lh.current=S,Pi!==null)throw Error(p(261));return Ni=null,Ai=0,Ui}function Jd(){for(;Pi!==null;)xl(Pi)}function Cp(){for(;Pi!==null&&!zi();)xl(Pi)}function xl(i){var s=ef(i.alternate,i,ws);i.memoizedProps=i.pendingProps,s===null?wc(i):Pi=s,uh.current=null}function wc(i){var s=i;do{var m=s.alternate;if(i=s.return,s.flags&32768){if(m=Bm(m,s),m!==null){m.flags&=32767,Pi=m;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ui=6,Pi=null;return}}else if(m=Dm(m,s,ws),m!==null){Pi=m;return}if(s=s.sibling,s!==null){Pi=s;return}Pi=s=i}while(s!==null);Ui===0&&(Ui=5)}function xa(i,s,m){var S=ur,F=xs.transition;try{xs.transition=null,ur=1,bc(i,s,m,S)}finally{xs.transition=F,ur=S}return null}function bc(i,s,m,S){do wl();while(vl!==null);if(mr&6)throw Error(p(327));m=i.finishedWork;var F=i.finishedLanes;if(m===null)return null;if(i.finishedWork=null,i.finishedLanes=0,m===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var Z=m.lanes|m.childLanes;if(eo(i,Z),i===Ni&&(Pi=Ni=null,Ai=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||ph||(ph=!0,tf(_i,function(){return wl(),null})),Z=(m.flags&15990)!==0,m.subtreeFlags&15990||Z){Z=xs.transition,xs.transition=null;var Se=ur;ur=1;var Xe=mr;mr|=4,uh.current=null,Um(i,m),xc(m,i),pr($c),Ys=!!sa,$c=sa=null,i.current=m,Vm(m),is(),mr=Xe,ur=Se,xs.transition=Z}else i.current=m;if(ph&&(ph=!1,vl=i,Vs=F),Z=i.pendingLanes,Z===0&&(Za=null),Fi(m.stateNode),Ko(i,Pn()),s!==null)for(S=i.onRecoverableError,m=0;m<s.length;m++)F=s[m],S(F.value,{componentStack:F.stack,digest:F.digest});if(fh)throw fh=!1,i=yr,yr=null,i;return Vs&1&&i.tag!==0&&wl(),Z=i.pendingLanes,Z&1?i===Yh?Wa++:(Wa=0,Yh=i):Wa=0,y(),null}function wl(){if(vl!==null){var i=el(Vs),s=xs.transition,m=ur;try{if(xs.transition=null,ur=16>i?16:i,vl===null)var S=!1;else{if(i=vl,vl=null,Vs=0,mr&6)throw Error(p(331));var F=mr;for(mr|=4,gn=i.current;gn!==null;){var Z=gn,Se=Z.child;if(gn.flags&16){var Xe=Z.deletions;if(Xe!==null){for(var ot=0;ot<Xe.length;ot++){var bt=Xe[ot];for(gn=bt;gn!==null;){var Ot=gn;switch(Ot.tag){case 0:case 11:case 15:_c(8,Ot,Z)}var Vt=Ot.child;if(Vt!==null)Vt.return=Ot,gn=Vt;else for(;gn!==null;){Ot=gn;var Rt=Ot.sibling,dn=Ot.return;if(yp(Ot),Ot===bt){gn=null;break}if(Rt!==null){Rt.return=dn,gn=Rt;break}gn=dn}}}var _n=Z.alternate;if(_n!==null){var bn=_n.child;if(bn!==null){_n.child=null;do{var pi=bn.sibling;bn.sibling=null,bn=pi}while(bn!==null)}}gn=Z}}if(Z.subtreeFlags&2064&&Se!==null)Se.return=Z,gn=Se;else e:for(;gn!==null;){if(Z=gn,Z.flags&2048)switch(Z.tag){case 0:case 11:case 15:_c(9,Z,Z.return)}var vt=Z.sibling;if(vt!==null){vt.return=Z.return,gn=vt;break e}gn=Z.return}}var lt=i.current;for(gn=lt;gn!==null;){Se=gn;var xt=Se.child;if(Se.subtreeFlags&2064&&xt!==null)xt.return=Se,gn=xt;else e:for(Se=lt;gn!==null;){if(Xe=gn,Xe.flags&2048)try{switch(Xe.tag){case 0:case 11:case 15:sh(9,Xe)}}catch(Tn){fi(Xe,Xe.return,Tn)}if(Xe===Se){gn=null;break e}var Xt=Xe.sibling;if(Xt!==null){Xt.return=Xe.return,gn=Xt;break e}gn=Xe.return}}if(mr=F,y(),Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(xi,i)}catch{}S=!0}return S}finally{ur=m,xs.transition=s}}return!1}function gh(i,s,m){s=Uu(m,s),s=ip(i,s,1),i=Lo(i,s,1),s=Do(),i!==null&&(qs(i,1,s),Ko(i,s))}function fi(i,s,m){if(i.tag===3)gh(i,i,m);else for(;s!==null;){if(s.tag===3){gh(s,i,m);break}else if(s.tag===1){var S=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Za===null||!Za.has(S))){i=Uu(m,i),i=op(s,i,1),s=Lo(s,i,1),i=Do(),s!==null&&(qs(s,1,i),Ko(s,i));break}}s=s.return}}function Gm(i,s,m){var S=i.pingCache;S!==null&&S.delete(s),s=Do(),i.pingedLanes|=i.suspendedLanes&m,Ni===i&&(Ai&m)===m&&(Ui===4||Ui===3&&(Ai&130023424)===Ai&&500>Pn()-ai?qu(i,0):Zd|=m),Ko(i,s)}function Qd(i,s){s===0&&(i.mode&1?(s=Br,Br<<=1,!(Br&130023424)&&(Br=4194304)):s=1);var m=Do();i=ti(i,s),i!==null&&(qs(i,s,m),Ko(i,m))}function Pp(i){var s=i.memoizedState,m=0;s!==null&&(m=s.retryLane),Qd(i,m)}function Hm(i,s){var m=0;switch(i.tag){case 13:var S=i.stateNode,F=i.memoizedState;F!==null&&(m=F.retryLane);break;case 19:S=i.stateNode;break;default:throw Error(p(314))}S!==null&&S.delete(s),Qd(i,m)}var ef;ef=function(i,s,m){if(i!==null)if(i.memoizedProps!==s.pendingProps||tr.current)Ci=!0;else{if(!(i.lanes&m)&&!(s.flags&128))return Ci=!1,Nd(i,s,m);Ci=!!(i.flags&131072)}else Ci=!1,$e&&s.flags&1048576&&le(s,d,s.index);switch(s.lanes=0,s.tag){case 2:var S=s.type;nu(i,s),i=s.pendingProps;var F=la(s,Sr.current);qn(s,m),F=Xc(null,s,S,i,F,m);var Z=Bh();return s.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ji(S)?(Z=!0,Oo(s)):Z=!1,s.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,Si(s),F.updater=so,s.stateNode=F,F._reactInternals=s,Ii(s,S,i,m),s=nh(null,s,S,!0,Z,m)):(s.tag=0,$e&&Z&&be(s),Di(null,s,F,m),s=s.child),s;case 16:S=s.elementType;e:{switch(nu(i,s),i=s.pendingProps,F=S._init,S=F(S._payload),s.type=S,F=s.tag=Zm(S),i=Lt(S,i),F){case 0:s=Ld(null,s,S,i,m);break e;case 1:s=pp(null,s,S,i,m);break e;case 11:s=up(null,s,S,i,m);break e;case 14:s=cp(null,s,S,Lt(S.type,i),m);break e}throw Error(p(306,S,""))}return s;case 0:return S=s.type,F=s.pendingProps,F=s.elementType===S?F:Lt(S,F),Ld(i,s,S,F,m);case 1:return S=s.type,F=s.pendingProps,F=s.elementType===S?F:Lt(S,F),pp(i,s,S,F,m);case 3:e:{if(mp(s),i===null)throw Error(p(387));S=s.pendingProps,Z=s.memoizedState,F=Z.element,Zi(i,s),oo(s,S,null,m);var Se=s.memoizedState;if(S=Se.element,Z.isDehydrated)if(Z={element:S,isDehydrated:!1,cache:Se.cache,pendingSuspenseBoundaries:Se.pendingSuspenseBoundaries,transitions:Se.transitions},s.updateQueue.baseState=Z,s.memoizedState=Z,s.flags&256){F=Uu(Error(p(423)),s),s=Vu(i,s,S,m,F);break e}else if(S!==F){F=Uu(Error(p(424)),s),s=Vu(i,s,S,m,F);break e}else for(Ne=ps(s.stateNode.containerInfo.firstChild),Fe=s,$e=!0,qe=null,m=Wc(s,null,S,m),s.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Gt(),S===F){s=pa(i,s,m);break e}Di(i,s,S,m)}s=s.child}return s;case 5:return Lu(s),i===null&&ut(s),S=s.type,F=s.pendingProps,Z=i!==null?i.memoizedProps:null,Se=F.children,Gc(S,F)?Se=null:Z!==null&&Gc(S,Z)&&(s.flags|=32),fp(i,s),Di(i,s,Se,m),s.child;case 6:return i===null&&ut(s),null;case 13:return rh(i,s,m);case 4:return yl(s,s.stateNode.containerInfo),S=s.pendingProps,i===null?s.child=ys(s,null,S,m):Di(i,s,S,m),s.child;case 11:return S=s.type,F=s.pendingProps,F=s.elementType===S?F:Lt(S,F),up(i,s,S,F,m);case 7:return Di(i,s,s.pendingProps,m),s.child;case 8:return Di(i,s,s.pendingProps.children,m),s.child;case 12:return Di(i,s,s.pendingProps.children,m),s.child;case 10:e:{if(S=s.type._context,F=s.pendingProps,Z=s.memoizedProps,Se=F.value,kr(hn,S._currentValue),S._currentValue=Se,Z!==null)if(We(Z.value,Se)){if(Z.children===F.children&&!tr.current){s=pa(i,s,m);break e}}else for(Z=s.child,Z!==null&&(Z.return=s);Z!==null;){var Xe=Z.dependencies;if(Xe!==null){Se=Z.child;for(var ot=Xe.firstContext;ot!==null;){if(ot.context===S){if(Z.tag===1){ot=Ei(-1,m&-m),ot.tag=2;var bt=Z.updateQueue;if(bt!==null){bt=bt.shared;var Ot=bt.pending;Ot===null?ot.next=ot:(ot.next=Ot.next,Ot.next=ot),bt.pending=ot}}Z.lanes|=m,ot=Z.alternate,ot!==null&&(ot.lanes|=m),Gn(Z.return,m,s),Xe.lanes|=m;break}ot=ot.next}}else if(Z.tag===10)Se=Z.type===s.type?null:Z.child;else if(Z.tag===18){if(Se=Z.return,Se===null)throw Error(p(341));Se.lanes|=m,Xe=Se.alternate,Xe!==null&&(Xe.lanes|=m),Gn(Se,m,s),Se=Z.sibling}else Se=Z.child;if(Se!==null)Se.return=Z;else for(Se=Z;Se!==null;){if(Se===s){Se=null;break}if(Z=Se.sibling,Z!==null){Z.return=Se.return,Se=Z;break}Se=Se.return}Z=Se}Di(i,s,F.children,m),s=s.child}return s;case 9:return F=s.type,S=s.pendingProps.children,qn(s,m),F=rr(F),S=S(F),s.flags|=1,Di(i,s,S,m),s.child;case 14:return S=s.type,F=Lt(S,s.pendingProps),F=Lt(S.type,F),cp(i,s,S,F,m);case 15:return hp(i,s,s.type,s.pendingProps,m);case 17:return S=s.type,F=s.pendingProps,F=s.elementType===S?F:Lt(S,F),nu(i,s),s.tag=1,ji(S)?(i=!0,Oo(s)):i=!1,qn(s,m),qo(s,S,F),Ii(s,S,F,m),nh(null,s,S,!0,i,m);case 19:return Bd(i,s,m);case 22:return dp(i,s,m)}throw Error(p(156,s.tag))};function tf(i,s){return ii(i,s)}function nf(i,s,m,S){this.tag=i,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yo(i,s,m,S){return new nf(i,s,m,S)}function rf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zm(i){if(typeof i=="function")return rf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===re)return 14}return 2}function bl(i,s){var m=i.alternate;return m===null?(m=Yo(i.tag,s,i.key,i.mode),m.elementType=i.elementType,m.type=i.type,m.stateNode=i.stateNode,m.alternate=i,i.alternate=m):(m.pendingProps=s,m.type=i.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=i.flags&14680064,m.childLanes=i.childLanes,m.lanes=i.lanes,m.child=i.child,m.memoizedProps=i.memoizedProps,m.memoizedState=i.memoizedState,m.updateQueue=i.updateQueue,s=i.dependencies,m.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},m.sibling=i.sibling,m.index=i.index,m.ref=i.ref,m}function yh(i,s,m,S,F,Z){var Se=2;if(S=i,typeof i=="function")rf(i)&&(Se=1);else if(typeof i=="string")Se=5;else e:switch(i){case M:return wa(m.children,F,Z,s);case $:Se=8,F|=8;break;case U:return i=Yo(12,m,s,F|2),i.elementType=U,i.lanes=Z,i;case W:return i=Yo(13,m,s,F),i.elementType=W,i.lanes=Z,i;case J:return i=Yo(19,m,s,F),i.elementType=J,i.lanes=Z,i;case te:return Ss(m,F,Z,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case de:Se=10;break e;case K:Se=9;break e;case j:Se=11;break e;case re:Se=14;break e;case ue:Se=16,S=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return s=Yo(Se,m,s,F),s.elementType=i,s.type=S,s.lanes=Z,s}function wa(i,s,m,S){return i=Yo(7,i,S,s),i.lanes=m,i}function Ss(i,s,m,S){return i=Yo(22,i,S,s),i.elementType=te,i.lanes=m,i.stateNode={isHidden:!1},i}function qa(i,s,m){return i=Yo(6,i,null,s),i.lanes=m,i}function nd(i,s,m){return s=Yo(4,i.children!==null?i.children:[],i.key,s),s.lanes=m,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function of(i,s,m,S,F){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nr(0),this.expirationTimes=nr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.identifierPrefix=S,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function sf(i,s,m,S,F,Z,Se,Xe,ot){return i=new of(i,s,m,Xe,ot),s===1?(s=1,Z===!0&&(s|=8)):s=0,Z=Yo(3,null,null,s),i.current=Z,Z.stateNode=i,Z.memoizedState={element:S,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Si(Z),i}function Wm(i,s,m){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:S==null?null:""+S,children:i,containerInfo:s,implementation:m}}function vh(i){if(!i)return Ua;i=i._reactInternals;e:{if(Un(i)!==i||i.tag!==1)throw Error(p(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ji(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(i.tag===1){var m=i.type;if(ji(m))return Kl(i,m,s)}return s}function rd(i,s,m,S,F,Z,Se,Xe,ot){return i=sf(m,S,!0,i,F,Z,Se,Xe,ot),i.context=vh(null),m=i.current,S=Do(),F=iu(m),Z=Ei(S,F),Z.callback=s??null,Lo(m,Z,F),i.current.lanes=F,qs(i,F,S),Ko(i,S),i}function id(i,s,m,S){var F=s.current,Z=Do(),Se=iu(F);return m=vh(m),s.context===null?s.context=m:s.pendingContext=m,s=Ei(Z,Se),s.payload={element:i},S=S===void 0?null:S,S!==null&&(s.callback=S),i=Lo(F,s,Se),i!==null&&(_a(i,F,Se,Z),pl(i,F,Se)),Se}function Sc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function od(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var m=i.retryLane;i.retryLane=m!==0&&m<s?m:s}}function ou(i,s){od(i,s),(i=i.alternate)&&od(i,s)}function Ap(){return null}var af=typeof reportError=="function"?reportError:function(i){console.error(i)};function _h(i){this._internalRoot=i}xh.prototype.render=_h.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(p(409));id(i,s,null,null)},xh.prototype.unmount=_h.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;_l(function(){id(null,i,null,null)}),s[ms]=null}};function xh(i){this._internalRoot=i}xh.prototype.unstable_scheduleHydration=function(i){if(i){var s=tl();i={blockedOn:null,target:i,priority:s};for(var m=0;m<fo.length&&s!==0&&s<fo[m].priority;m++);fo.splice(m,0,i),m===0&&xu(i)}};function Ec(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function wh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Mp(){}function qm(i,s,m,S,F){if(F){if(typeof S=="function"){var Z=S;S=function(){var bt=Sc(Se);Z.call(bt)}}var Se=rd(s,S,i,0,null,!1,!1,"",Mp);return i._reactRootContainer=Se,i[ms]=Se.current,ia(i.nodeType===8?i.parentNode:i),_l(),Se}for(;F=i.lastChild;)i.removeChild(F);if(typeof S=="function"){var Xe=S;S=function(){var bt=Sc(ot);Xe.call(bt)}}var ot=sf(i,0,!1,null,null,!1,!1,"",Mp);return i._reactRootContainer=ot,i[ms]=ot.current,ia(i.nodeType===8?i.parentNode:i),_l(function(){id(s,ot,m,S)}),ot}function bh(i,s,m,S,F){var Z=m._reactRootContainer;if(Z){var Se=Z;if(typeof F=="function"){var Xe=F;F=function(){var ot=Sc(Se);Xe.call(ot)}}id(s,Se,i,F)}else Se=qm(m,s,i,F,S);return Sc(Se)}Ma=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var m=Ws(s.pendingLanes);m!==0&&(ks(s,m|1),Ko(s,Pn()),!(mr&6)&&(Wu=Pn()+500,y()))}break;case 13:_l(function(){var S=ti(i,1);if(S!==null){var F=Do();_a(S,i,1,F)}}),ou(i,1)}},ka=function(i){if(i.tag===13){var s=ti(i,134217728);if(s!==null){var m=Do();_a(s,i,134217728,m)}ou(i,134217728)}},zs=function(i){if(i.tag===13){var s=iu(i),m=ti(i,s);if(m!==null){var S=Do();_a(m,i,s,S)}ou(i,s)}},tl=function(){return ur},yu=function(i,s){var m=ur;try{return ur=i,s()}finally{ur=m}},qr=function(i,s,m){switch(s){case"input":if(kn(i,m),s=m.name,m.type==="radio"&&s!=null){for(m=i;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<m.length;s++){var S=m[s];if(S!==i&&S.form===i.form){var F=ku(S);if(!F)throw Error(p(90));kt(S),kn(S,F)}}}break;case"textarea":rt(i,m);break;case"select":s=m.value,s!=null&&G(i,!!m.multiple,s,!1)}},Pe=mh,je=_l;var Xm={usingClientEntryPoint:!1,Events:[Mu,gs,ku,me,pe,mh]},Sh={findFiberByHostInstance:aa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Km={bundleType:Sh.bundleType,version:Sh.version,rendererPackageName:Sh.rendererPackageName,rendererConfig:Sh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Me.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=lr(i),i===null?null:i.stateNode},findFiberByHostInstance:Sh.findFiberByHostInstance||Ap,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{xi=sd.inject(Km),Ri=sd}catch{}}return Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xm,Gs.createPortal=function(i,s){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(s))throw Error(p(200));return Wm(i,s,null,m)},Gs.createRoot=function(i,s){if(!Ec(i))throw Error(p(299));var m=!1,S="",F=af;return s!=null&&(s.unstable_strictMode===!0&&(m=!0),s.identifierPrefix!==void 0&&(S=s.identifierPrefix),s.onRecoverableError!==void 0&&(F=s.onRecoverableError)),s=sf(i,1,!1,null,null,m,!1,S,F),i[ms]=s.current,ia(i.nodeType===8?i.parentNode:i),new _h(s)},Gs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=lr(s),i=i===null?null:i.stateNode,i},Gs.flushSync=function(i){return _l(i)},Gs.hydrate=function(i,s,m){if(!wh(s))throw Error(p(200));return bh(null,i,s,!0,m)},Gs.hydrateRoot=function(i,s,m){if(!Ec(i))throw Error(p(405));var S=m!=null&&m.hydratedSources||null,F=!1,Z="",Se=af;if(m!=null&&(m.unstable_strictMode===!0&&(F=!0),m.identifierPrefix!==void 0&&(Z=m.identifierPrefix),m.onRecoverableError!==void 0&&(Se=m.onRecoverableError)),s=rd(s,null,i,1,m??null,F,!1,Z,Se),i[ms]=s.current,ia(i),S)for(i=0;i<S.length;i++)m=S[i],F=m._getVersion,F=F(m._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[m,F]:s.mutableSourceEagerHydrationData.push(m,F);return new xh(s)},Gs.render=function(i,s,m){if(!wh(s))throw Error(p(200));return bh(null,i,s,!1,m)},Gs.unmountComponentAtNode=function(i){if(!wh(i))throw Error(p(40));return i._reactRootContainer?(_l(function(){bh(null,null,i,!1,function(){i._reactRootContainer=null,i[ms]=null})}),!0):!1},Gs.unstable_batchedUpdates=mh,Gs.unstable_renderSubtreeIntoContainer=function(i,s,m,S){if(!wh(m))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return bh(i,s,m,!1,S)},Gs.version="18.2.0-next-9e3b772b8-20220608",Gs}var _v;function Yw(){if(_v)return hg.exports;_v=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(c){console.error(c)}}return u(),hg.exports=Kw(),hg.exports}var f0=Yw();const Jw=Df(f0);var Xp={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var Qw=Xp.exports,xv;function eb(){return xv||(xv=1,function(u,c){(function(p,v){u.exports=v()})(Qw,function(){var p={},v={};function x(w,a,L){if(v[w]=L,w==="index"){var R="var sharedModule = {}; ("+v.shared+")(sharedModule); ("+v.worker+")(sharedModule);",D={};return v.shared(D),v.index(p,D),typeof window<"u"&&p.setWorkerUrl(window.URL.createObjectURL(new Blob([R],{type:"text/javascript"}))),p}}x("shared",["exports"],function(w){function a(n,t,r,l){return new(r||(r=Promise))(function(f,_){function b(B){try{P(l.next(B))}catch(Y){_(Y)}}function E(B){try{P(l.throw(B))}catch(Y){_(Y)}}function P(B){var Y;B.done?f(B.value):(Y=B.value,Y instanceof r?Y:new r(function(oe){oe(Y)})).then(b,E)}P((l=l.apply(n,t||[])).next())})}function L(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}typeof SuppressedError=="function"&&SuppressedError;var R=D;function D(n,t){this.x=n,this.y=t}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,t){return this.clone()._rotateAround(n,t)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var t=n.x-this.x,r=n.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,t){return Math.atan2(this.x*t-this.y*n,this.x*n+this.y*t)},_matMult:function(n){var t=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=t,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var t=Math.cos(n),r=Math.sin(n),l=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=l,this},_rotateAround:function(n,t){var r=Math.cos(n),l=Math.sin(n),f=t.y+l*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-l*(this.y-t.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},D.convert=function(n){return n instanceof D?n:Array.isArray(n)?new D(n[0],n[1]):n};var C=L(R),k=V;function V(n,t,r,l){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=r,this.p2y=l}V.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,l=0;l<8;l++){var f=this.sampleCurveX(r)-n;if(Math.abs(f)<t)return r;var _=this.sampleCurveDerivativeX(r);if(Math.abs(_)<1e-6)break;r-=f/_}var b=0,E=1;for(r=n,l=0;l<20&&(f=this.sampleCurveX(r),!(Math.abs(f-n)<t));l++)n>f?b=r:E=r,r=.5*(E-b)+b;return r},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var N=L(k);let Q,he;function Te(){return Q==null&&(Q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q}function we(){if(he==null&&(he=!1,Te())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let l=0;l<5*5;l++){const f=4*l;t.fillStyle=`rgb(${f},${f+1},${f+2})`,t.fillRect(l%5,Math.floor(l/5),1,1)}const r=t.getImageData(0,0,5,5).data;for(let l=0;l<5*5*4;l++)if(l%4!=3&&r[l]!==l){he=!0;break}}}return he||!1}function _e(n,t,r,l){const f=new N(n,t,r,l);return _=>f.solve(_)}const Me=_e(.25,.1,.25,1);function ne(n,t,r){return Math.min(r,Math.max(t,n))}function ce(n,t,r){const l=r-t,f=((n-t)%l+l)%l+t;return f===t?r:f}function M(n,...t){for(const r of t)for(const l in r)n[l]=r[l];return n}let $=1;function U(n,t,r){const l={};for(const f in n)l[f]=t.call(this,n[f],f,n);return l}function de(n,t,r){const l={};for(const f in n)t.call(this,n[f],f,n)&&(l[f]=n[f]);return l}function K(n){return Array.isArray(n)?n.map(K):typeof n=="object"&&n?U(n,K):n}const j={};function W(n){j[n]||(typeof console<"u"&&console.warn(n),j[n]=!0)}function J(n,t,r){return(r.y-n.y)*(t.x-n.x)>(t.y-n.y)*(r.x-n.x)}function re(n){return typeof WorkerGlobalScope<"u"&&n!==void 0&&n instanceof WorkerGlobalScope}let ue=null;function te(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap}const se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function xe(n,t,r,l,f){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(n,{timestamp:0});try{const b=_==null?void 0:_.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const E=b.startsWith("BGR"),P=new Uint8ClampedArray(l*f*4);if(yield _.copyTo(P,function(B,Y,oe,fe,ge){const Ee=4*Math.max(-Y,0),ke=(Math.max(0,oe)-oe)*fe*4+Ee,Ge=4*fe,Ke=Math.max(0,Y),dt=Math.max(0,oe);return{rect:{x:Ke,y:dt,width:Math.min(B.width,Y+fe)-Ke,height:Math.min(B.height,oe+ge)-dt},layout:[{offset:ke,stride:Ge}]}}(n,t,r,l,f)),E)for(let B=0;B<P.length;B+=4){const Y=P[B];P[B]=P[B+2],P[B+2]=Y}return P}finally{_.close()}})}let ie,ve;const De="AbortError";function Oe(){return new Error(De)}const Le={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ye(n){return Le.REGISTERED_PROTOCOLS[n.substring(0,n.indexOf("://"))]}const tt="global-dispatcher";class pt extends Error{constructor(t,r,l,f){super(`AJAXError: ${r} (${t}): ${l}`),this.status=t,this.statusText=r,this.url=l,this.body=f}}const _t=()=>re(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Pt=function(n,t){if(/:\/\//.test(n.url)&&!/^https?:|^file:/.test(n.url)){const l=Ye(n.url);if(l)return l(n,t);if(re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:n,targetMapId:tt},t)}if(!(/^file:/.test(r=n.url)||/^file:/.test(_t())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(l,f){return a(this,void 0,void 0,function*(){const _=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:_t(),signal:f.signal});l.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const b=yield fetch(_);if(!b.ok){const B=yield b.blob();throw new pt(b.status,b.statusText,l.url,B)}let E;E=l.type==="arrayBuffer"||l.type==="image"?b.arrayBuffer():l.type==="json"?b.json():b.text();const P=yield E;if(f.signal.aborted)throw Oe();return{data:P,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(n,t);if(re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:n,mustQueue:!0,targetMapId:tt},t)}var r;return function(l,f){return new Promise((_,b)=>{var E;const P=new XMLHttpRequest;P.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(P.responseType="arraybuffer");for(const B in l.headers)P.setRequestHeader(B,l.headers[B]);l.type==="json"&&(P.responseType="text",!((E=l.headers)===null||E===void 0)&&E.Accept||P.setRequestHeader("Accept","application/json")),P.withCredentials=l.credentials==="include",P.onerror=()=>{b(new Error(P.statusText))},P.onload=()=>{if(!f.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let B=P.response;if(l.type==="json")try{B=JSON.parse(P.response)}catch(Y){return void b(Y)}_({data:B,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{const B=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});b(new pt(P.status,P.statusText,l.url,B))}},f.signal.addEventListener("abort",()=>{P.abort(),b(Oe())}),P.send(l.body)})}(n,t)};function Wt(n){if(!n||n.indexOf("://")<=0||n.indexOf("data:image/")===0||n.indexOf("blob:")===0)return!0;const t=new URL(n),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function Tt(n,t,r){r[n]&&r[n].indexOf(t)!==-1||(r[n]=r[n]||[],r[n].push(t))}function kt(n,t,r){if(r&&r[n]){const l=r[n].indexOf(t);l!==-1&&r[n].splice(l,1)}}class Yt{constructor(t,r={}){M(this,r),this.type=t}}class un extends Yt{constructor(t,r={}){super("error",M({error:t},r))}}class In{on(t,r){return this._listeners=this._listeners||{},Tt(t,r,this._listeners),this}off(t,r){return kt(t,r,this._listeners),kt(t,r,this._oneTimeListeners),this}once(t,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Tt(t,r,this._oneTimeListeners),this):new Promise(l=>this.once(t,l))}fire(t,r){typeof t=="string"&&(t=new Yt(t,r||{}));const l=t.type;if(this.listens(l)){t.target=this;const f=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const E of f)E.call(this,t);const _=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const E of _)kt(l,E,this._oneTimeListeners),E.call(this,t);const b=this._eventedParent;b&&(M(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(t))}else t instanceof un&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,r){return this._eventedParent=t,this._eventedParentData=r,this}}var at={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const kn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function cn(n,t){const r={};for(const l in n)l!=="ref"&&(r[l]=n[l]);return kn.forEach(l=>{l in t&&(r[l]=t[l])}),r}function en(n,t){if(Array.isArray(n)){if(!Array.isArray(t)||n.length!==t.length)return!1;for(let r=0;r<n.length;r++)if(!en(n[r],t[r]))return!1;return!0}if(typeof n=="object"&&n!==null&&t!==null){if(typeof t!="object"||Object.keys(n).length!==Object.keys(t).length)return!1;for(const r in n)if(!en(n[r],t[r]))return!1;return!0}return n===t}function ze(n,t){n.push(t)}function G(n,t,r){ze(r,{command:"addSource",args:[n,t[n]]})}function H(n,t,r){ze(t,{command:"removeSource",args:[n]}),r[n]=!0}function Ce(n,t,r,l){H(n,r,l),G(n,t,r)}function rt(n,t,r){let l;for(l in n[r])if(Object.prototype.hasOwnProperty.call(n[r],l)&&l!=="data"&&!en(n[r][l],t[r][l]))return!1;for(l in t[r])if(Object.prototype.hasOwnProperty.call(t[r],l)&&l!=="data"&&!en(n[r][l],t[r][l]))return!1;return!0}function ct(n,t,r,l,f,_){n=n||{},t=t||{};for(const b in n)Object.prototype.hasOwnProperty.call(n,b)&&(en(n[b],t[b])||r.push({command:_,args:[l,b,t[b],f]}));for(const b in t)Object.prototype.hasOwnProperty.call(t,b)&&!Object.prototype.hasOwnProperty.call(n,b)&&(en(n[b],t[b])||r.push({command:_,args:[l,b,t[b],f]}))}function Et(n){return n.id}function ye(n,t){return n[t.id]=t,n}class z{constructor(t,r,l,f){this.message=(t?`${t}: `:"")+l,f&&(this.identifier=f),r!=null&&r.__line__&&(this.line=r.__line__)}}function q(n,...t){for(const r of t)for(const l in r)n[l]=r[l];return n}class Re extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}class Je{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[l,f]of r)this.bindings[l]=f}concat(t){return new Je(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ft={kind:"null"},Qe={kind:"number"},jt={kind:"string"},Bt={kind:"boolean"},zn={kind:"color"},Zn={kind:"object"},qt={kind:"value"},Or={kind:"collator"},qr={kind:"formatted"},Xr={kind:"padding"},Tr={kind:"resolvedImage"},Ue={kind:"variableAnchorOffsetCollection"};function me(n,t){return{kind:"array",itemType:n,N:t}}function pe(n){if(n.kind==="array"){const t=pe(n.itemType);return typeof n.N=="number"?`array<${t}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${t}>`}return n.kind}const Pe=[ft,Qe,jt,Bt,zn,qr,Zn,me(qt),Xr,Tr,Ue];function je(n,t){if(t.kind==="error")return null;if(n.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!je(n.itemType,t.itemType))&&(typeof n.N!="number"||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if(n.kind==="value"){for(const r of Pe)if(!je(r,t))return null}}return`Expected ${pe(n)} but found ${pe(t)} instead.`}function Be(n,t){return t.some(r=>r.kind===n.kind)}function He(n,t){return t.some(r=>r==="null"?n===null:r==="array"?Array.isArray(n):r==="object"?n&&!Array.isArray(n)&&typeof n=="object":r===typeof n)}function nt(n,t){return n.kind==="array"&&t.kind==="array"?n.itemType.kind===t.itemType.kind&&typeof n.N=="number":n.kind===t.kind}const Ze=.96422,yt=.82521,It=4/29,gt=6/29,Ut=3*gt*gt,pn=gt*gt*gt,vn=Math.PI/180,Jn=180/Math.PI;function jn(n){return(n%=360)<0&&(n+=360),n}function Qn([n,t,r,l]){let f,_;const b=jr((.2225045*(n=Un(n))+.7168786*(t=Un(t))+.0606169*(r=Un(r)))/1);n===t&&t===r?f=_=b:(f=jr((.4360747*n+.3850649*t+.1430804*r)/Ze),_=jr((.0139322*n+.0971045*t+.7141733*r)/yt));const E=116*b-16;return[E<0?0:E,500*(f-b),200*(b-_),l]}function Un(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function jr(n){return n>pn?Math.pow(n,1/3):n/Ut+It}function xr([n,t,r,l]){let f=(n+16)/116,_=isNaN(t)?f:f+t/500,b=isNaN(r)?f:f-r/200;return f=1*lr(f),_=Ze*lr(_),b=yt*lr(b),[Wn(3.1338561*_-1.6168667*f-.4906146*b),Wn(-.9787684*_+1.9161415*f+.033454*b),Wn(.0719453*_-.2289914*f+1.4052427*b),l]}function Wn(n){return(n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055)<0?0:n>1?1:n}function lr(n){return n>gt?n*n*n:Ut*(n-It)}function br(n){return parseInt(n.padEnd(2,n),16)/255}function ii(n,t){return ci(t?n/100:n,0,1)}function ci(n,t,r){return Math.min(Math.max(t,n),r)}function zi(n){return!n.some(Number.isNaN)}const is={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Pn{constructor(t,r,l,f=1,_=!0){this.r=t,this.g=r,this.b=l,this.a=f,_||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[t,r,l,f]))}static parse(t){if(t instanceof Pn)return t;if(typeof t!="string")return;const r=function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=is[l];if(f){const[b,E,P]=f;return[b/255,E/255,P/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){const b=l.length<6?1:2;let E=1;return[br(l.slice(E,E+=b)),br(l.slice(E,E+=b)),br(l.slice(E,E+=b)),br(l.slice(E,E+b)||"ff")]}if(l.startsWith("rgb")){const b=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[E,P,B,Y,oe,fe,ge,Ee,ke,Ge,Ke,dt]=b,it=[Y||" ",ge||" ",Ge].join("");if(it==="  "||it==="  /"||it===",,"||it===",,,"){const ht=[B,fe,ke].join(""),St=ht==="%%%"?100:ht===""?255:0;if(St){const Ft=[ci(+P/St,0,1),ci(+oe/St,0,1),ci(+Ee/St,0,1),Ke?ii(+Ke,dt):1];if(zi(Ft))return Ft}}return}}const _=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[b,E,P,B,Y,oe,fe,ge,Ee]=_,ke=[P||" ",Y||" ",fe].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const Ge=[+E,ci(+B,0,100),ci(+oe,0,100),ge?ii(+ge,Ee):1];if(zi(Ge))return function([Ke,dt,it,ht]){function St(Ft){const rn=(Ft+Ke/30)%12,An=dt*Math.min(it,1-it);return it-An*Math.max(-1,Math.min(rn-3,9-rn,1))}return Ke=jn(Ke),dt/=100,it/=100,[St(0),St(8),St(4),ht]}(Ge)}}}(t);return r?new Pn(...r,!1):void 0}get rgb(){const{r:t,g:r,b:l,a:f}=this,_=f||1/0;return this.overwriteGetter("rgb",[t/_,r/_,l/_,f])}get hcl(){return this.overwriteGetter("hcl",function(t){const[r,l,f,_]=Qn(t),b=Math.sqrt(l*l+f*f);return[Math.round(1e4*b)?jn(Math.atan2(f,l)*Jn):NaN,b,r,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Qn(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){const[t,r,l,f]=this.rgb;return`rgba(${[t,r,l].map(_=>Math.round(255*_)).join(",")},${f})`}}Pn.black=new Pn(0,0,0,1),Pn.white=new Pn(1,1,1,1),Pn.transparent=new Pn(0,0,0,0),Pn.red=new Pn(1,0,0,1);class Pl{constructor(t,r,l){this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Xn{constructor(t,r,l,f,_){this.text=t,this.image=r,this.scale=l,this.fontStack=f,this.textColor=_}}class Kr{constructor(t){this.sections=t}static fromString(t){return new Kr([new Xn(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Kr?t:Kr.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class _i{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof _i)return t;if(typeof t=="number")return new _i([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new _i(t)}}toString(){return JSON.stringify(this.values)}}const Rc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Qi)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let r=0;r<t.length;r+=2){const l=t[r],f=t[r+1];if(typeof l!="string"||!Rc.has(l)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Qi(t)}}toString(){return JSON.stringify(this.values)}}class xi{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new xi({name:t,available:!1}):null}}function Ri(n,t,r,l){return typeof n=="number"&&n>=0&&n<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[n,t,r,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[n,t,r,l]:[n,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fi(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Pn||n instanceof Pl||n instanceof Kr||n instanceof _i||n instanceof Qi||n instanceof xi)return!0;if(Array.isArray(n)){for(const t of n)if(!Fi(t))return!1;return!0}if(typeof n=="object"){for(const t in n)if(!Fi(n[t]))return!1;return!0}return!1}function fr(n){if(n===null)return ft;if(typeof n=="string")return jt;if(typeof n=="boolean")return Bt;if(typeof n=="number")return Qe;if(n instanceof Pn)return zn;if(n instanceof Pl)return Or;if(n instanceof Kr)return qr;if(n instanceof _i)return Xr;if(n instanceof Qi)return Ue;if(n instanceof xi)return Tr;if(Array.isArray(n)){const t=n.length;let r;for(const l of n){const f=fr(l);if(r){if(r===f)continue;r=qt;break}r=f}return me(r||qt,t)}return Zn}function Qa(n){const t=typeof n;return n===null?"":t==="string"||t==="number"||t==="boolean"?String(n):n instanceof Pn||n instanceof Kr||n instanceof _i||n instanceof Qi||n instanceof xi?n.toString():JSON.stringify(n)}class Po{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Fi(t[1]))return r.error("invalid value");const l=t[1];let f=fr(l);const _=r.expectedType;return f.kind!=="array"||f.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(f=_),new Po(f,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class $r{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Zs={string:jt,number:Qe,boolean:Bt,object:Zn};class Br{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let l,f=1;const _=t[0];if(_==="array"){let E,P;if(t.length>2){const B=t[1];if(typeof B!="string"||!(B in Zs)||B==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);E=Zs[B],f++}else E=qt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);P=t[2],f++}l=me(E,P)}else{if(!Zs[_])throw new Error(`Types doesn't contain name = ${_}`);l=Zs[_]}const b=[];for(;f<t.length;f++){const E=r.parse(t[f],f,qt);if(!E)return null;b.push(E)}return new Br(l,b)}evaluate(t){for(let r=0;r<this.args.length;r++){const l=this.args[r].evaluate(t);if(!je(this.type,fr(l)))return l;if(r===this.args.length-1)throw new $r(`Expected value to be of type ${pe(this.type)}, but found ${pe(fr(l))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Ws={"to-boolean":Bt,"to-color":zn,"to-number":Qe,"to-string":jt};class $i{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const l=t[0];if(!Ws[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&t.length!==2)return r.error("Expected one argument.");const f=Ws[l],_=[];for(let b=1;b<t.length;b++){const E=r.parse(t[b],b,qt);if(!E)return null;_.push(E)}return new $i(f,_)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,l;for(const f of this.args){if(r=f.evaluate(t),l=null,r instanceof Pn)return r;if(typeof r=="string"){const _=t.parseColor(r);if(_)return _}else if(Array.isArray(r)&&(l=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:Ri(r[0],r[1],r[2],r[3]),!l))return new Pn(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new $r(l||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const l of this.args){r=l.evaluate(t);const f=_i.parse(r);if(f)return f}throw new $r(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const l of this.args){r=l.evaluate(t);const f=Qi.parse(r);if(f)return f}throw new $r(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const l of this.args){if(r=l.evaluate(t),r===null)return 0;const f=Number(r);if(!isNaN(f))return f}throw new $r(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Kr.fromString(Qa(this.args[0].evaluate(t)));case"resolvedImage":return xi.fromString(Qa(this.args[0].evaluate(t)));default:return Qa(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Fc=["Unknown","Point","LineString","Polygon"];class Al{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Fc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache[t];return r||(r=this._parseColorCache[t]=Pn.parse(t)),r}}class os{constructor(t,r,l=[],f,_=new Je,b=[]){this.registry=t,this.path=l,this.key=l.map(E=>`[${E}]`).join(""),this.scope=_,this.errors=b,this.expectedType=f,this._isConstant=r}parse(t,r,l,f,_={}){return r?this.concat(r,l,f)._parse(t,_):this._parse(t,_)}_parse(t,r){function l(f,_,b){return b==="assert"?new Br(_,[f]):b==="coerce"?new $i(_,[f]):f}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=t[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[f];if(_){let b=_.parse(t,this);if(!b)return null;if(this.expectedType){const E=this.expectedType,P=b.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||P.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(E.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(E.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(E,P))return null}else b=l(b,E,r.typeAnnotation||"coerce");else b=l(b,E,r.typeAnnotation||"coerce");else b=l(b,E,r.typeAnnotation||"coerce");else b=l(b,E,r.typeAnnotation||"assert")}if(!(b instanceof Po)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const E=new Al;try{b=new Po(b.type,b.evaluate(E))}catch(P){return this.error(P.message),null}}return b}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,r,l){const f=typeof t=="number"?this.path.concat(t):this.path,_=l?this.scope.concat(l):this.scope;return new os(this.registry,this._isConstant,f,r||null,_,this.errors)}error(t,...r){const l=`${this.key}${r.map(f=>`[${f}]`).join("")}`;this.errors.push(new Re(l,t))}checkSubtype(t,r){const l=je(t,r);return l&&this.error(l),l}}class co{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const l=[];for(let _=1;_<t.length-1;_+=2){const b=t[_];if(typeof b!="string")return r.error(`Expected string, but found ${typeof b} instead.`,_);if(/[^a-zA-Z0-9_]/.test(b))return r.error("Variable names must contain only alphanumeric characters or '_'.",_);const E=r.parse(t[_+1],_+1);if(!E)return null;l.push([b,E])}const f=r.parse(t[t.length-1],t.length-1,r.expectedType,l);return f?new co(l,f):null}outputDefined(){return this.result.outputDefined()}}class nr{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const l=t[1];return r.scope.has(l)?new nr(l,r.scope.get(l)):r.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class qs{constructor(t,r,l){this.type=t,this.index=r,this.input=l}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=r.parse(t[1],1,Qe),f=r.parse(t[2],2,me(r.expectedType||qt));return l&&f?new qs(f.type.itemType,l,f):null}evaluate(t){const r=this.index.evaluate(t),l=this.input.evaluate(t);if(r<0)throw new $r(`Array index out of bounds: ${r} < 0.`);if(r>=l.length)throw new $r(`Array index out of bounds: ${r} > ${l.length-1}.`);if(r!==Math.floor(r))throw new $r(`Array index must be an integer, but found ${r} instead.`);return l[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class eo{constructor(t,r){this.type=Bt,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=r.parse(t[1],1,qt),f=r.parse(t[2],2,qt);return l&&f?Be(l.type,[Bt,jt,Qe,ft,qt])?new eo(l,f):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(l.type)} instead`):null}evaluate(t){const r=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!l)return!1;if(!He(r,["boolean","string","number","null"]))throw new $r(`Expected first argument to be of type boolean, string, number or null, but found ${pe(fr(r))} instead.`);if(!He(l,["string","array"]))throw new $r(`Expected second argument to be of type array or string, but found ${pe(fr(l))} instead.`);return l.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class ks{constructor(t,r,l){this.type=Qe,this.needle=t,this.haystack=r,this.fromIndex=l}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=r.parse(t[1],1,qt),f=r.parse(t[2],2,qt);if(!l||!f)return null;if(!Be(l.type,[Bt,jt,Qe,ft,qt]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(l.type)} instead`);if(t.length===4){const _=r.parse(t[3],3,Qe);return _?new ks(l,f,_):null}return new ks(l,f)}evaluate(t){const r=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!He(r,["boolean","string","number","null"]))throw new $r(`Expected first argument to be of type boolean, string, number or null, but found ${pe(fr(r))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(t)),He(l,["string"])){const _=l.indexOf(r,f);return _===-1?-1:[...l.slice(0,_)].length}if(He(l,["array"]))return l.indexOf(r,f);throw new $r(`Expected second argument to be of type array or string, but found ${pe(fr(l))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class ur{constructor(t,r,l,f,_,b){this.inputType=t,this.type=r,this.input=l,this.cases=f,this.outputs=_,this.otherwise=b}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return r.error("Expected an even number of arguments.");let l,f;r.expectedType&&r.expectedType.kind!=="value"&&(f=r.expectedType);const _={},b=[];for(let B=2;B<t.length-1;B+=2){let Y=t[B];const oe=t[B+1];Array.isArray(Y)||(Y=[Y]);const fe=r.concat(B);if(Y.length===0)return fe.error("Expected at least one branch label.");for(const Ee of Y){if(typeof Ee!="number"&&typeof Ee!="string")return fe.error("Branch labels must be numbers or strings.");if(typeof Ee=="number"&&Math.abs(Ee)>Number.MAX_SAFE_INTEGER)return fe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ee=="number"&&Math.floor(Ee)!==Ee)return fe.error("Numeric branch labels must be integer values.");if(l){if(fe.checkSubtype(l,fr(Ee)))return null}else l=fr(Ee);if(_[String(Ee)]!==void 0)return fe.error("Branch labels must be unique.");_[String(Ee)]=b.length}const ge=r.parse(oe,B,f);if(!ge)return null;f=f||ge.type,b.push(ge)}const E=r.parse(t[1],1,qt);if(!E)return null;const P=r.parse(t[t.length-1],t.length-1,f);return P?E.type.kind!=="value"&&r.concat(1).checkSubtype(l,E.type)?null:new ur(l,f,E,_,b,P):null}evaluate(t){const r=this.input.evaluate(t);return(fr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class el{constructor(t,r,l){this.type=t,this.branches=r,this.otherwise=l}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return r.error("Expected an odd number of arguments.");let l;r.expectedType&&r.expectedType.kind!=="value"&&(l=r.expectedType);const f=[];for(let b=1;b<t.length-1;b+=2){const E=r.parse(t[b],b,Bt);if(!E)return null;const P=r.parse(t[b+1],b+1,l);if(!P)return null;f.push([E,P]),l=l||P.type}const _=r.parse(t[t.length-1],t.length-1,l);if(!_)return null;if(!l)throw new Error("Can't infer output type");return new el(l,f,_)}evaluate(t){for(const[r,l]of this.branches)if(r.evaluate(t))return l.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,l]of this.branches)t(r),t(l);t(this.otherwise)}outputDefined(){return this.branches.every(([t,r])=>r.outputDefined())&&this.otherwise.outputDefined()}}class Ma{constructor(t,r,l,f){this.type=t,this.input=r,this.beginIndex=l,this.endIndex=f}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=r.parse(t[1],1,qt),f=r.parse(t[2],2,Qe);if(!l||!f)return null;if(!Be(l.type,[me(qt),jt,qt]))return r.error(`Expected first argument to be of type array or string, but found ${pe(l.type)} instead`);if(t.length===4){const _=r.parse(t[3],3,Qe);return _?new Ma(l.type,l,f,_):null}return new Ma(l.type,l,f)}evaluate(t){const r=this.input.evaluate(t),l=this.beginIndex.evaluate(t);let f;if(this.endIndex&&(f=this.endIndex.evaluate(t)),He(r,["string"]))return[...r].slice(l,f).join("");if(He(r,["array"]))return r.slice(l,f);throw new $r(`Expected first argument to be of type array or string, but found ${pe(fr(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ka(n,t){const r=n.length-1;let l,f,_=0,b=r,E=0;for(;_<=b;)if(E=Math.floor((_+b)/2),l=n[E],f=n[E+1],l<=t){if(E===r||t<f)return E;_=E+1}else{if(!(l>t))throw new $r("Input is not a number.");b=E-1}return 0}class zs{constructor(t,r,l){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[f,_]of l)this.labels.push(f),this.outputs.push(_)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");const l=r.parse(t[1],1,Qe);if(!l)return null;const f=[];let _=null;r.expectedType&&r.expectedType.kind!=="value"&&(_=r.expectedType);for(let b=1;b<t.length;b+=2){const E=b===1?-1/0:t[b],P=t[b+1],B=b,Y=b+1;if(typeof E!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(f.length&&f[f.length-1][0]>=E)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const oe=r.parse(P,Y,_);if(!oe)return null;_=_||oe.type,f.push([E,oe])}return new zs(_,l,f)}evaluate(t){const r=this.labels,l=this.outputs;if(r.length===1)return l[0].evaluate(t);const f=this.input.evaluate(t);if(f<=r[0])return l[0].evaluate(t);const _=r.length;return f>=r[_-1]?l[_-1].evaluate(t):l[ka(r,f)].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function tl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yu=Xs;function Xs(n,t,r,l){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=r,this.p2y=l}Xs.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,l=0;l<8;l++){var f=this.sampleCurveX(r)-n;if(Math.abs(f)<t)return r;var _=this.sampleCurveDerivativeX(r);if(Math.abs(_)<1e-6)break;r-=f/_}var b=0,E=1;for(r=n,l=0;l<20&&(f=this.sampleCurveX(r),!(Math.abs(f-n)<t));l++)n>f?b=r:E=r,r=.5*(E-b)+b;return r},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var Ml=tl(yu);function oi(n,t,r){return n+r*(t-n)}function ho(n,t,r){return n.map((l,f)=>oi(l,t[f],r))}const Gr={number:oi,color:function(n,t,r,l="rgb"){switch(l){case"rgb":{const[f,_,b,E]=ho(n.rgb,t.rgb,r);return new Pn(f,_,b,E,!1)}case"hcl":{const[f,_,b,E]=n.hcl,[P,B,Y,oe]=t.hcl;let fe,ge;if(isNaN(f)||isNaN(P))isNaN(f)?isNaN(P)?fe=NaN:(fe=P,b!==1&&b!==0||(ge=B)):(fe=f,Y!==1&&Y!==0||(ge=_));else{let dt=P-f;P>f&&dt>180?dt-=360:P<f&&f-P>180&&(dt+=360),fe=f+r*dt}const[Ee,ke,Ge,Ke]=function([dt,it,ht,St]){return dt=isNaN(dt)?0:dt*vn,xr([ht,Math.cos(dt)*it,Math.sin(dt)*it,St])}([fe,ge??oi(_,B,r),oi(b,Y,r),oi(E,oe,r)]);return new Pn(Ee,ke,Ge,Ke,!1)}case"lab":{const[f,_,b,E]=xr(ho(n.lab,t.lab,r));return new Pn(f,_,b,E,!1)}}},array:ho,padding:function(n,t,r){return new _i(ho(n.values,t.values,r))},variableAnchorOffsetCollection:function(n,t,r){const l=n.values,f=t.values;if(l.length!==f.length)throw new $r(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${t.toString()}`);const _=[];for(let b=0;b<l.length;b+=2){if(l[b]!==f[b])throw new $r(`Cannot interpolate values containing mismatched anchors. from[${b}]: ${l[b]}, to[${b}]: ${f[b]}`);_.push(l[b]);const[E,P]=l[b+1],[B,Y]=f[b+1];_.push([oi(E,B,r),oi(P,Y,r)])}return new Qi(_)}};class hi{constructor(t,r,l,f,_){this.type=t,this.operator=r,this.interpolation=l,this.input=f,this.labels=[],this.outputs=[];for(const[b,E]of _)this.labels.push(b),this.outputs.push(E)}static interpolationFactor(t,r,l,f){let _=0;if(t.name==="exponential")_=Rs(r,t.base,l,f);else if(t.name==="linear")_=Rs(r,1,l,f);else if(t.name==="cubic-bezier"){const b=t.controlPoints;_=new Ml(b[0],b[1],b[2],b[3]).solve(Rs(r,1,l,f))}return _}static parse(t,r){let[l,f,_,...b]=t;if(!Array.isArray(f)||f.length===0)return r.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const B=f[1];if(typeof B!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:B}}else{if(f[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const B=f.slice(1);if(B.length!==4||B.some(Y=>typeof Y!="number"||Y<0||Y>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:B}}}if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(_=r.parse(_,2,Qe),!_)return null;const E=[];let P=null;l==="interpolate-hcl"||l==="interpolate-lab"?P=zn:r.expectedType&&r.expectedType.kind!=="value"&&(P=r.expectedType);for(let B=0;B<b.length;B+=2){const Y=b[B],oe=b[B+1],fe=B+3,ge=B+4;if(typeof Y!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fe);if(E.length&&E[E.length-1][0]>=Y)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',fe);const Ee=r.parse(oe,ge,P);if(!Ee)return null;P=P||Ee.type,E.push([Y,Ee])}return nt(P,Qe)||nt(P,zn)||nt(P,Xr)||nt(P,Ue)||nt(P,me(Qe))?new hi(P,l,f,_,E):r.error(`Type ${pe(P)} is not interpolatable.`)}evaluate(t){const r=this.labels,l=this.outputs;if(r.length===1)return l[0].evaluate(t);const f=this.input.evaluate(t);if(f<=r[0])return l[0].evaluate(t);const _=r.length;if(f>=r[_-1])return l[_-1].evaluate(t);const b=ka(r,f),E=hi.interpolationFactor(this.interpolation,f,r[b],r[b+1]),P=l[b].evaluate(t),B=l[b+1].evaluate(t);switch(this.operator){case"interpolate":return Gr[this.type.kind](P,B,E);case"interpolate-hcl":return Gr.color(P,B,E,"hcl");case"interpolate-lab":return Gr.color(P,B,E,"lab")}}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Rs(n,t,r,l){const f=l-r,_=n-r;return f===0?0:t===1?_/f:(Math.pow(t,_)-1)/(Math.pow(t,f)-1)}class fo{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expectected at least one argument.");let l=null;const f=r.expectedType;f&&f.kind!=="value"&&(l=f);const _=[];for(const E of t.slice(1)){const P=r.parse(E,1+_.length,l,void 0,{typeAnnotation:"omit"});if(!P)return null;l=l||P.type,_.push(P)}if(!l)throw new Error("No output type");const b=f&&_.some(E=>je(f,E.type));return new fo(b?qt:l,_)}evaluate(t){let r,l=null,f=0;for(const _ of this.args)if(f++,l=_.evaluate(t),l&&l instanceof xi&&!l.available&&(r||(r=l.name),l=null,f===this.args.length&&(l=r)),l!==null)break;return l}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function kl(n,t){return n==="=="||n==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function vu(n,t,r,l){return l.compare(t,r)===0}function Uo(n,t,r){const l=n!=="=="&&n!=="!=";return class k1{constructor(_,b,E){this.type=Bt,this.lhs=_,this.rhs=b,this.collator=E,this.hasUntypedArgument=_.type.kind==="value"||b.type.kind==="value"}static parse(_,b){if(_.length!==3&&_.length!==4)return b.error("Expected two or three arguments.");const E=_[0];let P=b.parse(_[1],1,qt);if(!P)return null;if(!kl(E,P.type))return b.concat(1).error(`"${E}" comparisons are not supported for type '${pe(P.type)}'.`);let B=b.parse(_[2],2,qt);if(!B)return null;if(!kl(E,B.type))return b.concat(2).error(`"${E}" comparisons are not supported for type '${pe(B.type)}'.`);if(P.type.kind!==B.type.kind&&P.type.kind!=="value"&&B.type.kind!=="value")return b.error(`Cannot compare types '${pe(P.type)}' and '${pe(B.type)}'.`);l&&(P.type.kind==="value"&&B.type.kind!=="value"?P=new Br(B.type,[P]):P.type.kind!=="value"&&B.type.kind==="value"&&(B=new Br(P.type,[B])));let Y=null;if(_.length===4){if(P.type.kind!=="string"&&B.type.kind!=="string"&&P.type.kind!=="value"&&B.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(Y=b.parse(_[3],3,Or),!Y)return null}return new k1(P,B,Y)}evaluate(_){const b=this.lhs.evaluate(_),E=this.rhs.evaluate(_);if(l&&this.hasUntypedArgument){const P=fr(b),B=fr(E);if(P.kind!==B.kind||P.kind!=="string"&&P.kind!=="number")throw new $r(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${P.kind}, ${B.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const P=fr(b),B=fr(E);if(P.kind!=="string"||B.kind!=="string")return t(_,b,E)}return this.collator?r(_,b,E,this.collator.evaluate(_)):t(_,b,E)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const _u=Uo("==",function(n,t,r){return t===r},vu),xu=Uo("!=",function(n,t,r){return t!==r},function(n,t,r,l){return!vu(0,t,r,l)}),nl=Uo("<",function(n,t,r){return t<r},function(n,t,r,l){return l.compare(t,r)<0}),rc=Uo(">",function(n,t,r){return t>r},function(n,t,r,l){return l.compare(t,r)>0}),Oc=Uo("<=",function(n,t,r){return t<=r},function(n,t,r,l){return l.compare(t,r)<=0}),Ks=Uo(">=",function(n,t,r){return t>=r},function(n,t,r,l){return l.compare(t,r)>=0});class ss{constructor(t,r,l){this.type=Or,this.locale=l,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const l=t[1];if(typeof l!="object"||Array.isArray(l))return r.error("Collator options argument must be an object.");const f=r.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Bt);if(!f)return null;const _=r.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Bt);if(!_)return null;let b=null;return l.locale&&(b=r.parse(l.locale,1,jt),!b)?null:new ss(f,_,b)}evaluate(t){return new Pl(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class as{constructor(t,r,l,f,_){this.type=jt,this.number=t,this.locale=r,this.currency=l,this.minFractionDigits=f,this.maxFractionDigits=_}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const l=r.parse(t[1],1,Qe);if(!l)return null;const f=t[2];if(typeof f!="object"||Array.isArray(f))return r.error("NumberFormat options argument must be an object.");let _=null;if(f.locale&&(_=r.parse(f.locale,1,jt),!_))return null;let b=null;if(f.currency&&(b=r.parse(f.currency,1,jt),!b))return null;let E=null;if(f["min-fraction-digits"]&&(E=r.parse(f["min-fraction-digits"],1,Qe),!E))return null;let P=null;return f["max-fraction-digits"]&&(P=r.parse(f["max-fraction-digits"],1,Qe),!P)?null:new as(l,_,b,E,P)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Ys{constructor(t){this.type=qr,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const l=t[1];if(!Array.isArray(l)&&typeof l=="object")return r.error("First argument must be an image or text section.");const f=[];let _=!1;for(let b=1;b<=t.length-1;++b){const E=t[b];if(_&&typeof E=="object"&&!Array.isArray(E)){_=!1;let P=null;if(E["font-scale"]&&(P=r.parse(E["font-scale"],1,Qe),!P))return null;let B=null;if(E["text-font"]&&(B=r.parse(E["text-font"],1,me(jt)),!B))return null;let Y=null;if(E["text-color"]&&(Y=r.parse(E["text-color"],1,zn),!Y))return null;const oe=f[f.length-1];oe.scale=P,oe.font=B,oe.textColor=Y}else{const P=r.parse(t[b],1,qt);if(!P)return null;const B=P.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,f.push({content:P,scale:null,font:null,textColor:null})}}return new Ys(f)}evaluate(t){return new Kr(this.sections.map(r=>{const l=r.content.evaluate(t);return fr(l)===Tr?new Xn("",l,null,null,null):new Xn(Qa(l),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)}))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}outputDefined(){return!1}}class wu{constructor(t){this.type=Tr,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const l=r.parse(t[1],1,jt);return l?new wu(l):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),l=xi.fromString(r);return l&&t.availableImages&&(l.available=t.availableImages.indexOf(r)>-1),l}eachChild(t){t(this.input)}outputDefined(){return!1}}class zl{constructor(t){this.type=Qe,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const l=r.parse(t[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${pe(l.type)} instead.`):new zl(l):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new $r(`Expected value to be of type string or array, but found ${pe(fr(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const po=8192;function Rl(n,t){const r=(180+n[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(r*f*po),Math.round(l*f*po)]}function rl(n,t){const r=Math.pow(2,t.z);return[(f=(n[0]/po+t.x)/r,360*f-180),(l=(n[1]/po+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,f}function Fs(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function wi(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function ir(n,t,r){const l=n[0]-t[0],f=n[1]-t[1],_=n[0]-r[0],b=n[1]-r[1];return l*b-_*f==0&&l*_<=0&&f*b<=0}function ls(n,t,r,l){return(f=[l[0]-r[0],l[1]-r[1]])[0]*(_=[t[0]-n[0],t[1]-n[1]])[1]-f[1]*_[0]!=0&&!(!Js(n,t,r,l)||!Js(r,l,n,t));var f,_}function ic(n,t,r){for(const l of r)for(let f=0;f<l.length-1;++f)if(ls(n,t,l[f],l[f+1]))return!0;return!1}function us(n,t,r=!1){let l=!1;for(const E of t)for(let P=0;P<E.length-1;P++){if(ir(n,E[P],E[P+1]))return r;(_=E[P])[1]>(f=n)[1]!=(b=E[P+1])[1]>f[1]&&f[0]<(b[0]-_[0])*(f[1]-_[1])/(b[1]-_[1])+_[0]&&(l=!l)}var f,_,b;return l}function Fl(n,t){for(const r of t)if(us(n,r))return!0;return!1}function bu(n,t){for(const r of n)if(!us(r,t))return!1;for(let r=0;r<n.length-1;++r)if(ic(n[r],n[r+1],t))return!1;return!0}function to(n,t){for(const r of t)if(bu(n,r))return!0;return!1}function Js(n,t,r,l){const f=l[0]-r[0],_=l[1]-r[1],b=(n[0]-r[0])*_-f*(n[1]-r[1]),E=(t[0]-r[0])*_-f*(t[1]-r[1]);return b>0&&E<0||b<0&&E>0}function za(n,t,r){const l=[];for(let f=0;f<n.length;f++){const _=[];for(let b=0;b<n[f].length;b++){const E=Rl(n[f][b],r);Fs(t,E),_.push(E)}l.push(_)}return l}function Os(n,t,r){const l=[];for(let f=0;f<n.length;f++){const _=za(n[f],t,r);l.push(_)}return l}function oc(n,t,r,l){if(n[0]<r[0]||n[0]>r[2]){const f=.5*l;let _=n[0]-r[0]>f?-l:r[0]-n[0]>f?l:0;_===0&&(_=n[0]-r[2]>f?-l:r[2]-n[0]>f?l:0),n[0]+=_}Fs(t,n)}function Ol(n,t,r,l){const f=Math.pow(2,l.z)*po,_=[l.x*po,l.y*po],b=[];for(const E of n)for(const P of E){const B=[P.x+_[0],P.y+_[1]];oc(B,t,r,f),b.push(B)}return b}function jl(n,t,r,l){const f=Math.pow(2,l.z)*po,_=[l.x*po,l.y*po],b=[];for(const P of n){const B=[];for(const Y of P){const oe=[Y.x+_[0],Y.y+_[1]];Fs(t,oe),B.push(oe)}b.push(B)}if(t[2]-t[0]<=f/2){(E=t)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const P of b)for(const B of P)oc(B,t,r,f)}var E;return b}class Ao{constructor(t,r){this.type=Bt,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fi(t[1])){const l=t[1];if(l.type==="FeatureCollection"){const f=[];for(const _ of l.features){const{type:b,coordinates:E}=_.geometry;b==="Polygon"&&f.push(E),b==="MultiPolygon"&&f.push(...E)}if(f.length)return new Ao(l,{type:"MultiPolygon",coordinates:f})}else if(l.type==="Feature"){const f=l.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Ao(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new Ao(l,l)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(r,l){const f=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=r.canonicalID();if(l.type==="Polygon"){const E=za(l.coordinates,_,b),P=Ol(r.geometry(),f,_,b);if(!wi(f,_))return!1;for(const B of P)if(!us(B,E))return!1}if(l.type==="MultiPolygon"){const E=Os(l.coordinates,_,b),P=Ol(r.geometry(),f,_,b);if(!wi(f,_))return!1;for(const B of P)if(!Fl(B,E))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(r,l){const f=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=r.canonicalID();if(l.type==="Polygon"){const E=za(l.coordinates,_,b),P=jl(r.geometry(),f,_,b);if(!wi(f,_))return!1;for(const B of P)if(!bu(B,E))return!1}if(l.type==="MultiPolygon"){const E=Os(l.coordinates,_,b),P=jl(r.geometry(),f,_,b);if(!wi(f,_))return!1;for(const B of P)if(!to(B,E))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ra=class{constructor(n=[],t=(r,l)=>r<l?-1:r>l?1:0){if(this.data=n,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:t,compare:r}=this,l=t[n];for(;n>0;){const f=n-1>>1,_=t[f];if(r(l,_)>=0)break;t[n]=_,n=f}t[n]=l}_down(n){const{data:t,compare:r}=this,l=this.length>>1,f=t[n];for(;n<l;){let _=1+(n<<1);const b=_+1;if(b<this.length&&r(t[b],t[_])<0&&(_=b),r(t[_],f)>=0)break;t[n]=t[_],n=_}t[n]=f}};function sc(n,t,r,l,f){ac(n,t,r,l||n.length-1,f||jc)}function ac(n,t,r,l,f){for(;l>r;){if(l-r>600){var _=l-r+1,b=t-r+1,E=Math.log(_),P=.5*Math.exp(2*E/3),B=.5*Math.sqrt(E*P*(_-P)/_)*(b-_/2<0?-1:1);ac(n,t,Math.max(r,Math.floor(t-b*P/_+B)),Math.min(l,Math.floor(t+(_-b)*P/_+B)),f)}var Y=n[t],oe=r,fe=l;for(il(n,r,t),f(n[l],Y)>0&&il(n,r,l);oe<fe;){for(il(n,oe,fe),oe++,fe--;f(n[oe],Y)<0;)oe++;for(;f(n[fe],Y)>0;)fe--}f(n[r],Y)===0?il(n,r,fe):il(n,++fe,l),fe<=t&&(r=fe+1),t<=fe&&(l=fe-1)}}function il(n,t,r){var l=n[t];n[t]=n[r],n[r]=l}function jc(n,t){return n<t?-1:n>t?1:0}function cs(n,t){if(n.length<=1)return[n];const r=[];let l,f;for(const _ of n){const b=Fa(_);b!==0&&(_.area=Math.abs(b),f===void 0&&(f=b<0),f===b<0?(l&&r.push(l),l=[_]):l.push(_))}if(l&&r.push(l),t>1)for(let _=0;_<r.length;_++)r[_].length<=t||(sc(r[_],t,1,r[_].length-1,Lc),r[_]=r[_].slice(0,t));return r}function Lc(n,t){return t.area-n.area}function Fa(n){let t=0;for(let r,l,f=0,_=n.length,b=_-1;f<_;b=f++)r=n[f],l=n[b],t+=(l.x-r.x)*(r.y+l.y);return t}const Su=1/298.257223563,Mo=Su*(2-Su),lc=Math.PI/180;class Ll{constructor(t){const r=6378.137*lc*1e3,l=Math.cos(t*lc),f=1/(1-Mo*(1-l*l)),_=Math.sqrt(f);this.kx=r*_*l,this.ky=r*_*f*(1-Mo)}distance(t,r){const l=this.wrap(t[0]-r[0])*this.kx,f=(t[1]-r[1])*this.ky;return Math.sqrt(l*l+f*f)}pointOnLine(t,r){let l,f,_,b,E=1/0;for(let P=0;P<t.length-1;P++){let B=t[P][0],Y=t[P][1],oe=this.wrap(t[P+1][0]-B)*this.kx,fe=(t[P+1][1]-Y)*this.ky,ge=0;oe===0&&fe===0||(ge=(this.wrap(r[0]-B)*this.kx*oe+(r[1]-Y)*this.ky*fe)/(oe*oe+fe*fe),ge>1?(B=t[P+1][0],Y=t[P+1][1]):ge>0&&(B+=oe/this.kx*ge,Y+=fe/this.ky*ge)),oe=this.wrap(r[0]-B)*this.kx,fe=(r[1]-Y)*this.ky;const Ee=oe*oe+fe*fe;Ee<E&&(E=Ee,l=B,f=Y,_=P,b=ge)}return{point:[l,f],index:_,t:Math.max(0,Math.min(1,b))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function uc(n,t){return t[0]-n[0]}function Dl(n){return n[1]-n[0]+1}function ko(n,t){return n[1]>=n[0]&&n[1]<t}function Eu(n,t){if(n[0]>n[1])return[null,null];const r=Dl(n);if(t){if(r===2)return[n,null];const f=Math.floor(r/2);return[[n[0],n[0]+f],[n[0]+f,n[1]]]}if(r===1)return[n,null];const l=Math.floor(r/2)-1;return[[n[0],n[0]+l],[n[0]+l+1,n[1]]]}function js(n,t){if(!ko(t,n.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let l=t[0];l<=t[1];++l)Fs(r,n[l]);return r}function Tu(n){const t=[1/0,1/0,-1/0,-1/0];for(const r of n)for(const l of r)Fs(t,l);return t}function Bl(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function Oa(n,t,r){if(!Bl(n)||!Bl(t))return NaN;let l=0,f=0;return n[2]<t[0]&&(l=t[0]-n[2]),n[0]>t[2]&&(l=n[0]-t[2]),n[1]>t[3]&&(f=n[1]-t[3]),n[3]<t[1]&&(f=t[1]-n[3]),r.distance([0,0],[l,f])}function hs(n,t,r){const l=r.pointOnLine(t,n);return r.distance(n,l.point)}function Nl(n,t,r,l,f){const _=Math.min(hs(n,[r,l],f),hs(t,[r,l],f)),b=Math.min(hs(r,[n,t],f),hs(l,[n,t],f));return Math.min(_,b)}function Dc(n,t,r,l,f){if(!ko(t,n.length)||!ko(l,r.length))return 1/0;let _=1/0;for(let b=t[0];b<t[1];++b){const E=n[b],P=n[b+1];for(let B=l[0];B<l[1];++B){const Y=r[B],oe=r[B+1];if(ls(E,P,Y,oe))return 0;_=Math.min(_,Nl(E,P,Y,oe,f))}}return _}function Nr(n,t,r,l,f){if(!ko(t,n.length)||!ko(l,r.length))return NaN;let _=1/0;for(let b=t[0];b<=t[1];++b)for(let E=l[0];E<=l[1];++E)if(_=Math.min(_,f.distance(n[b],r[E])),_===0)return _;return _}function Ul(n,t,r){if(us(n,t,!0))return 0;let l=1/0;for(const f of t){const _=f[0],b=f[f.length-1];if(_!==b&&(l=Math.min(l,hs(n,[b,_],r)),l===0))return l;const E=r.pointOnLine(f,n);if(l=Math.min(l,r.distance(n,E.point)),l===0)return l}return l}function Vn(n,t,r,l){if(!ko(t,n.length))return NaN;for(let _=t[0];_<=t[1];++_)if(us(n[_],r,!0))return 0;let f=1/0;for(let _=t[0];_<t[1];++_){const b=n[_],E=n[_+1];for(const P of r)for(let B=0,Y=P.length,oe=Y-1;B<Y;oe=B++){const fe=P[oe],ge=P[B];if(ls(b,E,fe,ge))return 0;f=Math.min(f,Nl(b,E,fe,ge,l))}}return f}function Vl(n,t){for(const r of n)for(const l of r)if(us(l,t,!0))return!0;return!1}function wr(n,t,r,l=1/0){const f=Tu(n),_=Tu(t);if(l!==1/0&&Oa(f,_,r)>=l)return l;if(wi(f,_)){if(Vl(n,t))return 0}else if(Vl(t,n))return 0;let b=1/0;for(const E of n)for(let P=0,B=E.length,Y=B-1;P<B;Y=P++){const oe=E[Y],fe=E[P];for(const ge of t)for(let Ee=0,ke=ge.length,Ge=ke-1;Ee<ke;Ge=Ee++){const Ke=ge[Ge],dt=ge[Ee];if(ls(oe,fe,Ke,dt))return 0;b=Math.min(b,Nl(oe,fe,Ke,dt,r))}}return b}function or(n,t,r,l,f,_){if(!_)return;const b=Oa(js(l,_),f,r);b<t&&n.push([b,_,[0,0]])}function zo(n,t,r,l,f,_,b){if(!_||!b)return;const E=Oa(js(l,_),js(f,b),r);E<t&&n.push([E,_,b])}function Vo(n,t,r,l,f=1/0){let _=Math.min(l.distance(n[0],r[0][0]),f);if(_===0)return _;const b=new Ra([[0,[0,n.length-1],[0,0]]],uc),E=Tu(r);for(;b.length>0;){const P=b.pop();if(P[0]>=_)continue;const B=P[1],Y=t?50:100;if(Dl(B)<=Y){if(!ko(B,n.length))return NaN;if(t){const oe=Vn(n,B,r,l);if(isNaN(oe)||oe===0)return oe;_=Math.min(_,oe)}else for(let oe=B[0];oe<=B[1];++oe){const fe=Ul(n[oe],r,l);if(_=Math.min(_,fe),_===0)return 0}}else{const oe=Eu(B,t);or(b,_,l,n,E,oe[0]),or(b,_,l,n,E,oe[1])}}return _}function Ro(n,t,r,l,f,_=1/0){let b=Math.min(_,f.distance(n[0],r[0]));if(b===0)return b;const E=new Ra([[0,[0,n.length-1],[0,r.length-1]]],uc);for(;E.length>0;){const P=E.pop();if(P[0]>=b)continue;const B=P[1],Y=P[2],oe=t?50:100,fe=l?50:100;if(Dl(B)<=oe&&Dl(Y)<=fe){if(!ko(B,n.length)&&ko(Y,r.length))return NaN;let ge;if(t&&l)ge=Dc(n,B,r,Y,f),b=Math.min(b,ge);else if(t&&!l){const Ee=n.slice(B[0],B[1]+1);for(let ke=Y[0];ke<=Y[1];++ke)if(ge=hs(r[ke],Ee,f),b=Math.min(b,ge),b===0)return b}else if(!t&&l){const Ee=r.slice(Y[0],Y[1]+1);for(let ke=B[0];ke<=B[1];++ke)if(ge=hs(n[ke],Ee,f),b=Math.min(b,ge),b===0)return b}else ge=Nr(n,B,r,Y,f),b=Math.min(b,ge)}else{const ge=Eu(B,t),Ee=Eu(Y,l);zo(E,b,f,n,r,ge[0],Ee[0]),zo(E,b,f,n,r,ge[0],Ee[1]),zo(E,b,f,n,r,ge[1],Ee[0]),zo(E,b,f,n,r,ge[1],Ee[1])}}return b}function di(n){return n.type==="MultiPolygon"?n.coordinates.map(t=>({type:"Polygon",coordinates:t})):n.type==="MultiLineString"?n.coordinates.map(t=>({type:"LineString",coordinates:t})):n.type==="MultiPoint"?n.coordinates.map(t=>({type:"Point",coordinates:t})):[n]}class Gi{constructor(t,r){this.type=Qe,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fi(t[1])){const l=t[1];if(l.type==="FeatureCollection")return new Gi(l,l.features.map(f=>di(f.geometry)).flat());if(l.type==="Feature")return new Gi(l,di(l.geometry));if("type"in l&&"coordinates"in l)return new Gi(l,di(l))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(r,l){const f=r.geometry(),_=f.flat().map(P=>rl([P.x,P.y],r.canonical));if(f.length===0)return NaN;const b=new Ll(_[0][1]);let E=1/0;for(const P of l){switch(P.type){case"Point":E=Math.min(E,Ro(_,!1,[P.coordinates],!1,b,E));break;case"LineString":E=Math.min(E,Ro(_,!1,P.coordinates,!0,b,E));break;case"Polygon":E=Math.min(E,Vo(_,!1,P.coordinates,b,E))}if(E===0)return E}return E}(t,this.geometries);if(t.geometryType()==="LineString")return function(r,l){const f=r.geometry(),_=f.flat().map(P=>rl([P.x,P.y],r.canonical));if(f.length===0)return NaN;const b=new Ll(_[0][1]);let E=1/0;for(const P of l){switch(P.type){case"Point":E=Math.min(E,Ro(_,!0,[P.coordinates],!1,b,E));break;case"LineString":E=Math.min(E,Ro(_,!0,P.coordinates,!0,b,E));break;case"Polygon":E=Math.min(E,Vo(_,!0,P.coordinates,b,E))}if(E===0)return E}return E}(t,this.geometries);if(t.geometryType()==="Polygon")return function(r,l){const f=r.geometry();if(f.length===0||f[0].length===0)return NaN;const _=cs(f,0).map(P=>P.map(B=>B.map(Y=>rl([Y.x,Y.y],r.canonical)))),b=new Ll(_[0][0][0][1]);let E=1/0;for(const P of l)for(const B of _){switch(P.type){case"Point":E=Math.min(E,Vo([P.coordinates],!1,B,b,E));break;case"LineString":E=Math.min(E,Vo(P.coordinates,!0,B,b,E));break;case"Polygon":E=Math.min(E,wr(B,P.coordinates,b,E))}if(E===0)return E}return E}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ds={"==":_u,"!=":xu,">":rc,"<":nl,">=":Ks,"<=":Oc,array:Br,at:qs,boolean:Br,case:el,coalesce:fo,collator:ss,format:Ys,image:wu,in:eo,"index-of":ks,interpolate:hi,"interpolate-hcl":hi,"interpolate-lab":hi,length:zl,let:co,literal:Po,match:ur,number:Br,"number-format":as,object:Br,slice:Ma,step:zs,string:Br,"to-boolean":$i,"to-color":$i,"to-number":$i,"to-string":$i,var:nr,within:Ao,distance:Gi};class Oi{constructor(t,r,l,f){this.name=t,this.type=r,this._evaluate=l,this.args=f}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){const l=t[0],f=Oi.definitions[l];if(!f)return r.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(f)?f[0]:f.type,b=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,E=b.filter(([B])=>!Array.isArray(B)||B.length===t.length-1);let P=null;for(const[B,Y]of E){P=new os(r.registry,Fo,r.path,null,r.scope);const oe=[];let fe=!1;for(let ge=1;ge<t.length;ge++){const Ee=t[ge],ke=Array.isArray(B)?B[ge-1]:B.type,Ge=P.parse(Ee,1+oe.length,ke);if(!Ge){fe=!0;break}oe.push(Ge)}if(!fe)if(Array.isArray(B)&&B.length!==oe.length)P.error(`Expected ${B.length} arguments, but found ${oe.length} instead.`);else{for(let ge=0;ge<oe.length;ge++){const Ee=Array.isArray(B)?B[ge]:B.type,ke=oe[ge];P.concat(ge+1).checkSubtype(Ee,ke.type)}if(P.errors.length===0)return new Oi(l,_,Y,oe)}}if(E.length===1)r.errors.push(...P.errors);else{const B=(E.length?E:b).map(([oe])=>{return fe=oe,Array.isArray(fe)?`(${fe.map(pe).join(", ")})`:`(${pe(fe.type)}...)`;var fe}).join(" | "),Y=[];for(let oe=1;oe<t.length;oe++){const fe=r.parse(t[oe],1+Y.length);if(!fe)return null;Y.push(pe(fe.type))}r.error(`Expected arguments of type ${B}, but found (${Y.join(", ")}) instead.`)}return null}static register(t,r){Oi.definitions=r;for(const l in r)t[l]=Oi}}function Ls(n,[t,r,l,f]){t=t.evaluate(n),r=r.evaluate(n),l=l.evaluate(n);const _=f?f.evaluate(n):1,b=Ri(t,r,l,_);if(b)throw new $r(b);return new Pn(t/255,r/255,l/255,_,!1)}function ja(n,t){return n in t}function La(n,t){const r=t[n];return r===void 0?null:r}function gi(n){return{type:n}}function Fo(n){if(n instanceof nr)return Fo(n.boundExpression);if(n instanceof Oi&&n.name==="error"||n instanceof ss||n instanceof Ao||n instanceof Gi)return!1;const t=n instanceof $i||n instanceof Br;let r=!0;return n.eachChild(l=>{r=t?r&&Fo(l):r&&l instanceof Po}),!!r&&Qs(n)&&mo(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Qs(n){if(n instanceof Oi&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof Ao||n instanceof Gi)return!1;let t=!0;return n.eachChild(r=>{t&&!Qs(r)&&(t=!1)}),t}function no(n){if(n instanceof Oi&&n.name==="feature-state")return!1;let t=!0;return n.eachChild(r=>{t&&!no(r)&&(t=!1)}),t}function mo(n,t){if(n instanceof Oi&&t.indexOf(n.name)>=0)return!1;let r=!0;return n.eachChild(l=>{r&&!mo(l,t)&&(r=!1)}),r}function ol(n){return{result:"success",value:n}}function $o(n){return{result:"error",value:n}}function ea(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function $l(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function go(n){return!!n.expression&&n.expression.interpolated}function er(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function sl(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Iu(n){return n}function al(n,t){const r=t.type==="color",l=n.stops&&typeof n.stops[0][0]=="object",f=l||!(l||n.property!==void 0),_=n.type||(go(t)?"exponential":"interval");if(r||t.type==="padding"){const Y=r?Pn.parse:_i.parse;(n=q({},n)).stops&&(n.stops=n.stops.map(oe=>[oe[0],Y(oe[1])])),n.default=Y(n.default?n.default:t.default)}if(n.colorSpace&&(b=n.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${n.colorSpace}"`);var b;let E,P,B;if(_==="exponential")E=ee;else if(_==="interval")E=ll;else if(_==="categorical"){E=Cu,P=Object.create(null);for(const Y of n.stops)P[Y[0]]=Y[1];B=typeof n.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);E=Ie}if(l){const Y={},oe=[];for(let Ee=0;Ee<n.stops.length;Ee++){const ke=n.stops[Ee],Ge=ke[0].zoom;Y[Ge]===void 0&&(Y[Ge]={zoom:Ge,type:n.type,property:n.property,default:n.default,stops:[]},oe.push(Ge)),Y[Ge].stops.push([ke[0].value,ke[1]])}const fe=[];for(const Ee of oe)fe.push([Y[Ee].zoom,al(Y[Ee],t)]);const ge={name:"linear"};return{kind:"composite",interpolationType:ge,interpolationFactor:hi.interpolationFactor.bind(void 0,ge),zoomStops:fe.map(Ee=>Ee[0]),evaluate:({zoom:Ee},ke)=>ee({stops:fe,base:n.base},t,Ee).evaluate(Ee,ke)}}if(f){const Y=_==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:Y,interpolationFactor:hi.interpolationFactor.bind(void 0,Y),zoomStops:n.stops.map(oe=>oe[0]),evaluate:({zoom:oe})=>E(n,t,oe,P,B)}}return{kind:"source",evaluate(Y,oe){const fe=oe&&oe.properties?oe.properties[n.property]:void 0;return fe===void 0?ta(n.default,t.default):E(n,t,fe,P,B)}}}function ta(n,t,r){return n!==void 0?n:t!==void 0?t:r!==void 0?r:void 0}function Cu(n,t,r,l,f){return ta(typeof r===f?l[r]:void 0,n.default,t.default)}function ll(n,t,r){if(er(r)!=="number")return ta(n.default,t.default);const l=n.stops.length;if(l===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[l-1][0])return n.stops[l-1][1];const f=ka(n.stops.map(_=>_[0]),r);return n.stops[f][1]}function ee(n,t,r){const l=n.base!==void 0?n.base:1;if(er(r)!=="number")return ta(n.default,t.default);const f=n.stops.length;if(f===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[f-1][0])return n.stops[f-1][1];const _=ka(n.stops.map(Y=>Y[0]),r),b=function(Y,oe,fe,ge){const Ee=ge-fe,ke=Y-fe;return Ee===0?0:oe===1?ke/Ee:(Math.pow(oe,ke)-1)/(Math.pow(oe,Ee)-1)}(r,l,n.stops[_][0],n.stops[_+1][0]),E=n.stops[_][1],P=n.stops[_+1][1],B=Gr[t.type]||Iu;return typeof E.evaluate=="function"?{evaluate(...Y){const oe=E.evaluate.apply(void 0,Y),fe=P.evaluate.apply(void 0,Y);if(oe!==void 0&&fe!==void 0)return B(oe,fe,b,n.colorSpace)}}:B(E,P,b,n.colorSpace)}function Ie(n,t,r){switch(t.type){case"color":r=Pn.parse(r);break;case"formatted":r=Kr.fromString(r.toString());break;case"resolvedImage":r=xi.fromString(r.toString());break;case"padding":r=_i.parse(r);break;default:er(r)===t.type||t.type==="enum"&&t.values[r]||(r=void 0)}return ta(r,n.default,t.default)}Oi.register(ds,{error:[{kind:"error"},[jt],(n,[t])=>{throw new $r(t.evaluate(n))}],typeof:[jt,[qt],(n,[t])=>pe(fr(t.evaluate(n)))],"to-rgba":[me(Qe,4),[zn],(n,[t])=>{const[r,l,f,_]=t.evaluate(n).rgb;return[255*r,255*l,255*f,_]}],rgb:[zn,[Qe,Qe,Qe],Ls],rgba:[zn,[Qe,Qe,Qe,Qe],Ls],has:{type:Bt,overloads:[[[jt],(n,[t])=>ja(t.evaluate(n),n.properties())],[[jt,Zn],(n,[t,r])=>ja(t.evaluate(n),r.evaluate(n))]]},get:{type:qt,overloads:[[[jt],(n,[t])=>La(t.evaluate(n),n.properties())],[[jt,Zn],(n,[t,r])=>La(t.evaluate(n),r.evaluate(n))]]},"feature-state":[qt,[jt],(n,[t])=>La(t.evaluate(n),n.featureState||{})],properties:[Zn,[],n=>n.properties()],"geometry-type":[jt,[],n=>n.geometryType()],id:[qt,[],n=>n.id()],zoom:[Qe,[],n=>n.globals.zoom],"heatmap-density":[Qe,[],n=>n.globals.heatmapDensity||0],"line-progress":[Qe,[],n=>n.globals.lineProgress||0],accumulated:[qt,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Qe,gi(Qe),(n,t)=>{let r=0;for(const l of t)r+=l.evaluate(n);return r}],"*":[Qe,gi(Qe),(n,t)=>{let r=1;for(const l of t)r*=l.evaluate(n);return r}],"-":{type:Qe,overloads:[[[Qe,Qe],(n,[t,r])=>t.evaluate(n)-r.evaluate(n)],[[Qe],(n,[t])=>-t.evaluate(n)]]},"/":[Qe,[Qe,Qe],(n,[t,r])=>t.evaluate(n)/r.evaluate(n)],"%":[Qe,[Qe,Qe],(n,[t,r])=>t.evaluate(n)%r.evaluate(n)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(n,[t,r])=>Math.pow(t.evaluate(n),r.evaluate(n))],sqrt:[Qe,[Qe],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[Qe,[Qe],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[Qe,[Qe],(n,[t])=>Math.log(t.evaluate(n))],log2:[Qe,[Qe],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[Qe,[Qe],(n,[t])=>Math.sin(t.evaluate(n))],cos:[Qe,[Qe],(n,[t])=>Math.cos(t.evaluate(n))],tan:[Qe,[Qe],(n,[t])=>Math.tan(t.evaluate(n))],asin:[Qe,[Qe],(n,[t])=>Math.asin(t.evaluate(n))],acos:[Qe,[Qe],(n,[t])=>Math.acos(t.evaluate(n))],atan:[Qe,[Qe],(n,[t])=>Math.atan(t.evaluate(n))],min:[Qe,gi(Qe),(n,t)=>Math.min(...t.map(r=>r.evaluate(n)))],max:[Qe,gi(Qe),(n,t)=>Math.max(...t.map(r=>r.evaluate(n)))],abs:[Qe,[Qe],(n,[t])=>Math.abs(t.evaluate(n))],round:[Qe,[Qe],(n,[t])=>{const r=t.evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[Qe,[Qe],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[Qe,[Qe],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[Bt,[jt,qt],(n,[t,r])=>n.properties()[t.value]===r.value],"filter-id-==":[Bt,[qt],(n,[t])=>n.id()===t.value],"filter-type-==":[Bt,[jt],(n,[t])=>n.geometryType()===t.value],"filter-<":[Bt,[jt,qt],(n,[t,r])=>{const l=n.properties()[t.value],f=r.value;return typeof l==typeof f&&l<f}],"filter-id-<":[Bt,[qt],(n,[t])=>{const r=n.id(),l=t.value;return typeof r==typeof l&&r<l}],"filter->":[Bt,[jt,qt],(n,[t,r])=>{const l=n.properties()[t.value],f=r.value;return typeof l==typeof f&&l>f}],"filter-id->":[Bt,[qt],(n,[t])=>{const r=n.id(),l=t.value;return typeof r==typeof l&&r>l}],"filter-<=":[Bt,[jt,qt],(n,[t,r])=>{const l=n.properties()[t.value],f=r.value;return typeof l==typeof f&&l<=f}],"filter-id-<=":[Bt,[qt],(n,[t])=>{const r=n.id(),l=t.value;return typeof r==typeof l&&r<=l}],"filter->=":[Bt,[jt,qt],(n,[t,r])=>{const l=n.properties()[t.value],f=r.value;return typeof l==typeof f&&l>=f}],"filter-id->=":[Bt,[qt],(n,[t])=>{const r=n.id(),l=t.value;return typeof r==typeof l&&r>=l}],"filter-has":[Bt,[qt],(n,[t])=>t.value in n.properties()],"filter-has-id":[Bt,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Bt,[me(jt)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[Bt,[me(qt)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[Bt,[jt,me(qt)],(n,[t,r])=>r.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[Bt,[jt,me(qt)],(n,[t,r])=>function(l,f,_,b){for(;_<=b;){const E=_+b>>1;if(f[E]===l)return!0;f[E]>l?b=E-1:_=E+1}return!1}(n.properties()[t.value],r.value,0,r.value.length-1)],all:{type:Bt,overloads:[[[Bt,Bt],(n,[t,r])=>t.evaluate(n)&&r.evaluate(n)],[gi(Bt),(n,t)=>{for(const r of t)if(!r.evaluate(n))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],(n,[t,r])=>t.evaluate(n)||r.evaluate(n)],[gi(Bt),(n,t)=>{for(const r of t)if(r.evaluate(n))return!0;return!1}]]},"!":[Bt,[Bt],(n,[t])=>!t.evaluate(n)],"is-supported-script":[Bt,[jt],(n,[t])=>{const r=n.globals&&n.globals.isSupportedScript;return!r||r(t.evaluate(n))}],upcase:[jt,[jt],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[jt,[jt],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[jt,gi(qt),(n,t)=>t.map(r=>Qa(r.evaluate(n))).join("")],"resolved-locale":[jt,[Or],(n,[t])=>t.evaluate(n).resolvedLocale()]});class We{constructor(t,r){var l;this.expression=t,this._warningHistory={},this._evaluator=new Al,this._defaultValue=r?(l=r).type==="color"&&sl(l.default)?new Pn(0,0,0,0):l.type==="color"?Pn.parse(l.default)||null:l.type==="padding"?_i.parse(l.default)||null:l.type==="variableAnchorOffsetCollection"?Qi.parse(l.default)||null:l.default===void 0?null:l.default:null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,l,f,_,b){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=l,this._evaluator.canonical=f,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(t,r,l,f,_,b){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=l||null,this._evaluator.canonical=f,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new $r(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function wt(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in ds}function Kt(n,t){const r=new os(ds,Fo,[],t?function(f){const _={color:zn,string:jt,number:Qe,enum:jt,boolean:Bt,formatted:qr,padding:Xr,resolvedImage:Tr,variableAnchorOffsetCollection:Ue};return f.type==="array"?me(_[f.value]||qt,f.length):_[f.type]}(t):void 0),l=r.parse(n,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?ol(new We(l,t)):$o(r.errors)}class Nt{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!no(r.expression)}evaluateWithoutErrorHandling(t,r,l,f,_,b){return this._styleExpression.evaluateWithoutErrorHandling(t,r,l,f,_,b)}evaluate(t,r,l,f,_,b){return this._styleExpression.evaluate(t,r,l,f,_,b)}}class an{constructor(t,r,l,f){this.kind=t,this.zoomStops=l,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!no(r.expression),this.interpolationType=f}evaluateWithoutErrorHandling(t,r,l,f,_,b){return this._styleExpression.evaluateWithoutErrorHandling(t,r,l,f,_,b)}evaluate(t,r,l,f,_,b){return this._styleExpression.evaluate(t,r,l,f,_,b)}interpolationFactor(t,r,l){return this.interpolationType?hi.interpolationFactor(this.interpolationType,t,r,l):0}}function Sn(n,t){const r=Kt(n,t);if(r.result==="error")return r;const l=r.value.expression,f=Qs(l);if(!f&&!ea(t))return $o([new Re("","data expressions not supported")]);const _=mo(l,["zoom"]);if(!_&&!$l(t))return $o([new Re("","zoom expressions not supported")]);const b=pr(l);return b||_?b instanceof Re?$o([b]):b instanceof hi&&!go(t)?$o([new Re("",'"interpolate" expressions cannot be used with this property')]):ol(b?new an(f?"camera":"composite",r.value,b.labels,b instanceof hi?b.interpolation:void 0):new Nt(f?"constant":"source",r.value)):$o([new Re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ln{constructor(t,r){this._parameters=t,this._specification=r,q(this,al(this._parameters,this._specification))}static deserialize(t){return new Ln(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function pr(n){let t=null;if(n instanceof co)t=pr(n.result);else if(n instanceof fo){for(const r of n.args)if(t=pr(r),t)break}else(n instanceof zs||n instanceof hi)&&n.input instanceof Oi&&n.input.name==="zoom"&&(t=n);return t instanceof Re||n.eachChild(r=>{const l=pr(r);l instanceof Re?t=l:!t&&l?t=new Re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&l&&t!==l&&(t=new Re("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ar(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!ar(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const cr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ur(n){if(n==null)return{filter:()=>!0,needGeometry:!1};ar(n)||(n=yo(n));const t=Kt(n,cr);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return{filter:(r,l,f)=>t.value.evaluate(r,l,{},f),needGeometry:Jr(n)}}function Yr(n,t){return n<t?-1:n>t?1:0}function Jr(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let t=1;t<n.length;t++)if(Jr(n[t]))return!0;return!1}function yo(n){if(!n)return!0;const t=n[0];return n.length<=1?t!=="any":t==="=="?Hi(n[1],n[2],"=="):t==="!="?Qr(Hi(n[1],n[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Hi(n[1],n[2],t):t==="any"?(r=n.slice(1),["any"].concat(r.map(yo))):t==="all"?["all"].concat(n.slice(1).map(yo)):t==="none"?["all"].concat(n.slice(1).map(yo).map(Qr)):t==="in"?bi(n[1],n.slice(2)):t==="!in"?Qr(bi(n[1],n.slice(2))):t==="has"?Ds(n[1]):t!=="!has"||Qr(Ds(n[1]));var r}function Hi(n,t,r){switch(n){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,n,t]}}function bi(n,t){if(t.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(r=>typeof r!=typeof t[0])?["filter-in-large",n,["literal",t.sort(Yr)]]:["filter-in-small",n,["literal",t]]}}function Ds(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Qr(n){return["!",n]}function ro(n){const t=typeof n;if(t==="number"||t==="boolean"||t==="string"||n==null)return JSON.stringify(n);if(Array.isArray(n)){let f="[";for(const _ of n)f+=`${ro(_)},`;return`${f}]`}const r=Object.keys(n).sort();let l="{";for(let f=0;f<r.length;f++)l+=`${JSON.stringify(r[f])}:${ro(n[r[f]])},`;return`${l}}`}function Bc(n){let t="";for(const r of kn)t+=`/${ro(n[r])}`;return t}function Nc(n){const t=n.value;return t?[new z(n.key,t,"constants have been deprecated as of v8")]:[]}function Hr(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Go(n){if(Array.isArray(n))return n.map(Go);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const r in n)t[r]=Go(n[r]);return t}return Hr(n)}function vo(n){const t=n.key,r=n.value,l=n.valueSpec||{},f=n.objectElementValidators||{},_=n.style,b=n.styleSpec,E=n.validateSpec;let P=[];const B=er(r);if(B!=="object")return[new z(t,r,`object expected, ${B} found`)];for(const Y in r){const oe=Y.split(".")[0],fe=l[oe]||l["*"];let ge;if(f[oe])ge=f[oe];else if(l[oe])ge=E;else if(f["*"])ge=f["*"];else{if(!l["*"]){P.push(new z(t,r[Y],`unknown property "${Y}"`));continue}ge=E}P=P.concat(ge({key:(t&&`${t}.`)+Y,value:r[Y],valueSpec:fe,style:_,styleSpec:b,object:r,objectKey:Y,validateSpec:E},r))}for(const Y in l)f[Y]||l[Y].required&&l[Y].default===void 0&&r[Y]===void 0&&P.push(new z(t,r,`missing required property "${Y}"`));return P}function Gl(n){const t=n.value,r=n.valueSpec,l=n.style,f=n.styleSpec,_=n.key,b=n.arrayElementValidator||n.validateSpec;if(er(t)!=="array")return[new z(_,t,`array expected, ${er(t)} found`)];if(r.length&&t.length!==r.length)return[new z(_,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new z(_,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let E={type:r.value,values:r.values};f.$version<7&&(E.function=r.function),er(r.value)==="object"&&(E=r.value);let P=[];for(let B=0;B<t.length;B++)P=P.concat(b({array:t,arrayIndex:B,value:t[B],valueSpec:E,validateSpec:n.validateSpec,style:l,styleSpec:f,key:`${_}[${B}]`}));return P}function Bs(n){const t=n.key,r=n.value,l=n.valueSpec;let f=er(r);return f==="number"&&r!=r&&(f="NaN"),f!=="number"?[new z(t,r,`number expected, ${f} found`)]:"minimum"in l&&r<l.minimum?[new z(t,r,`${r} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&r>l.maximum?[new z(t,r,`${r} is greater than the maximum value ${l.maximum}`)]:[]}function Hl(n){const t=n.valueSpec,r=Hr(n.value.type);let l,f,_,b={};const E=r!=="categorical"&&n.value.property===void 0,P=!E,B=er(n.value.stops)==="array"&&er(n.value.stops[0])==="array"&&er(n.value.stops[0][0])==="object",Y=vo({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(ge){if(r==="identity")return[new z(ge.key,ge.value,'identity function may not have a "stops" property')];let Ee=[];const ke=ge.value;return Ee=Ee.concat(Gl({key:ge.key,value:ke,valueSpec:ge.valueSpec,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec,arrayElementValidator:oe})),er(ke)==="array"&&ke.length===0&&Ee.push(new z(ge.key,ke,"array must have at least one stop")),Ee},default:function(ge){return ge.validateSpec({key:ge.key,value:ge.value,valueSpec:t,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec})}}});return r==="identity"&&E&&Y.push(new z(n.key,n.value,'missing required property "property"')),r==="identity"||n.value.stops||Y.push(new z(n.key,n.value,'missing required property "stops"')),r==="exponential"&&n.valueSpec.expression&&!go(n.valueSpec)&&Y.push(new z(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(P&&!ea(n.valueSpec)?Y.push(new z(n.key,n.value,"property functions not supported")):E&&!$l(n.valueSpec)&&Y.push(new z(n.key,n.value,"zoom functions not supported"))),r!=="categorical"&&!B||n.value.property!==void 0||Y.push(new z(n.key,n.value,'"property" property is required')),Y;function oe(ge){let Ee=[];const ke=ge.value,Ge=ge.key;if(er(ke)!=="array")return[new z(Ge,ke,`array expected, ${er(ke)} found`)];if(ke.length!==2)return[new z(Ge,ke,`array length 2 expected, length ${ke.length} found`)];if(B){if(er(ke[0])!=="object")return[new z(Ge,ke,`object expected, ${er(ke[0])} found`)];if(ke[0].zoom===void 0)return[new z(Ge,ke,"object stop key must have zoom")];if(ke[0].value===void 0)return[new z(Ge,ke,"object stop key must have value")];if(_&&_>Hr(ke[0].zoom))return[new z(Ge,ke[0].zoom,"stop zoom values must appear in ascending order")];Hr(ke[0].zoom)!==_&&(_=Hr(ke[0].zoom),f=void 0,b={}),Ee=Ee.concat(vo({key:`${Ge}[0]`,value:ke[0],valueSpec:{zoom:{}},validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec,objectElementValidators:{zoom:Bs,value:fe}}))}else Ee=Ee.concat(fe({key:`${Ge}[0]`,value:ke[0],valueSpec:{},validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec},ke));return wt(Go(ke[1]))?Ee.concat([new z(`${Ge}[1]`,ke[1],"expressions are not allowed in function stops.")]):Ee.concat(ge.validateSpec({key:`${Ge}[1]`,value:ke[1],valueSpec:t,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec}))}function fe(ge,Ee){const ke=er(ge.value),Ge=Hr(ge.value),Ke=ge.value!==null?ge.value:Ee;if(l){if(ke!==l)return[new z(ge.key,Ke,`${ke} stop domain type must match previous stop domain type ${l}`)]}else l=ke;if(ke!=="number"&&ke!=="string"&&ke!=="boolean")return[new z(ge.key,Ke,"stop domain value must be a number, string, or boolean")];if(ke!=="number"&&r!=="categorical"){let dt=`number expected, ${ke} found`;return ea(t)&&r===void 0&&(dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(ge.key,Ke,dt)]}return r!=="categorical"||ke!=="number"||isFinite(Ge)&&Math.floor(Ge)===Ge?r!=="categorical"&&ke==="number"&&f!==void 0&&Ge<f?[new z(ge.key,Ke,"stop domain values must appear in ascending order")]:(f=Ge,r==="categorical"&&Ge in b?[new z(ge.key,Ke,"stop domain values must be unique")]:(b[Ge]=!0,[])):[new z(ge.key,Ke,`integer expected, found ${Ge}`)]}}function Da(n){const t=(n.expressionContext==="property"?Sn:Kt)(Go(n.value),n.valueSpec);if(t.result==="error")return t.value.map(l=>new z(`${n.key}${l.key}`,n.value,l.message));const r=t.value.expression||t.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!r.outputDefined())return[new z(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!no(r))return[new z(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!no(r))return[new z(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!mo(r,["zoom","feature-state"]))return[new z(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Qs(r))return[new z(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function na(n){const t=n.key,r=n.value,l=n.valueSpec,f=[];return Array.isArray(l.values)?l.values.indexOf(Hr(r))===-1&&f.push(new z(t,r,`expected one of [${l.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(l.values).indexOf(Hr(r))===-1&&f.push(new z(t,r,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(r)} found`)),f}function Uc(n){return ar(Go(n.value))?Da(q({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ba(n)}function Ba(n){const t=n.value,r=n.key;if(er(t)!=="array")return[new z(r,t,`array expected, ${er(t)} found`)];const l=n.styleSpec;let f,_=[];if(t.length<1)return[new z(r,t,"filter array must have at least 1 element")];switch(_=_.concat(na({key:`${r}[0]`,value:t[0],valueSpec:l.filter_operator,style:n.style,styleSpec:n.styleSpec})),Hr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Hr(t[1])==="$type"&&_.push(new z(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&_.push(new z(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(f=er(t[1]),f!=="string"&&_.push(new z(`${r}[1]`,t[1],`string expected, ${f} found`)));for(let b=2;b<t.length;b++)f=er(t[b]),Hr(t[1])==="$type"?_=_.concat(na({key:`${r}[${b}]`,value:t[b],valueSpec:l.geometry_type,style:n.style,styleSpec:n.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&_.push(new z(`${r}[${b}]`,t[b],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let b=1;b<t.length;b++)_=_.concat(Ba({key:`${r}[${b}]`,value:t[b],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":f=er(t[1]),t.length!==2?_.push(new z(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="string"&&_.push(new z(`${r}[1]`,t[1],`string expected, ${f} found`))}return _}function Vc(n,t){const r=n.key,l=n.validateSpec,f=n.style,_=n.styleSpec,b=n.value,E=n.objectKey,P=_[`${t}_${n.layerType}`];if(!P)return[];const B=E.match(/^(.*)-transition$/);if(t==="paint"&&B&&P[B[1]]&&P[B[1]].transition)return l({key:r,value:b,valueSpec:_.transition,style:f,styleSpec:_});const Y=n.valueSpec||P[E];if(!Y)return[new z(r,b,`unknown property "${E}"`)];let oe;if(er(b)==="string"&&ea(Y)&&!Y.tokens&&(oe=/^{([^}]+)}$/.exec(b)))return[new z(r,b,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(oe[1])} }\`.`)];const fe=[];return n.layerType==="symbol"&&(E==="text-field"&&f&&!f.glyphs&&fe.push(new z(r,b,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&sl(Go(b))&&Hr(b.type)==="identity"&&fe.push(new z(r,b,'"text-font" does not support identity functions'))),fe.concat(l({key:n.key,value:b,valueSpec:Y,style:f,styleSpec:_,expressionContext:"property",propertyType:t,propertyKey:E}))}function Pu(n){return Vc(n,"paint")}function cc(n){return Vc(n,"layout")}function Ir(n){let t=[];const r=n.value,l=n.key,f=n.style,_=n.styleSpec;r.type||r.ref||t.push(new z(l,r,'either "type" or "ref" is required'));let b=Hr(r.type);const E=Hr(r.ref);if(r.id){const P=Hr(r.id);for(let B=0;B<n.arrayIndex;B++){const Y=f.layers[B];Hr(Y.id)===P&&t.push(new z(l,r.id,`duplicate layer id "${r.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in r){let P;["type","source","source-layer","filter","layout"].forEach(B=>{B in r&&t.push(new z(l,r[B],`"${B}" is prohibited for ref layers`))}),f.layers.forEach(B=>{Hr(B.id)===E&&(P=B)}),P?P.ref?t.push(new z(l,r.ref,"ref cannot reference another ref layer")):b=Hr(P.type):t.push(new z(l,r.ref,`ref layer "${E}" not found`))}else if(b!=="background")if(r.source){const P=f.sources&&f.sources[r.source],B=P&&Hr(P.type);P?B==="vector"&&b==="raster"?t.push(new z(l,r.source,`layer "${r.id}" requires a raster source`)):B!=="raster-dem"&&b==="hillshade"?t.push(new z(l,r.source,`layer "${r.id}" requires a raster-dem source`)):B==="raster"&&b!=="raster"?t.push(new z(l,r.source,`layer "${r.id}" requires a vector source`)):B!=="vector"||r["source-layer"]?B==="raster-dem"&&b!=="hillshade"?t.push(new z(l,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!r.paint||!r.paint["line-gradient"]||B==="geojson"&&P.lineMetrics||t.push(new z(l,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new z(l,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new z(l,r.source,`source "${r.source}" not found`))}else t.push(new z(l,r,'missing required property "source"'));return t=t.concat(vo({key:l,value:r,valueSpec:_.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*":()=>[],type:()=>n.validateSpec({key:`${l}.type`,value:r.type,valueSpec:_.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:r,objectKey:"type"}),filter:Uc,layout:P=>vo({layer:r,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":B=>cc(q({layerType:b},B))}}),paint:P=>vo({layer:r,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":B=>Pu(q({layerType:b},B))}})}})),t}function ra(n){const t=n.value,r=n.key,l=er(t);return l!=="string"?[new z(r,t,`string expected, ${l} found`)]:[]}const ul={promoteId:function({key:n,value:t}){if(er(t)==="string")return ra({key:n,value:t});{const r=[];for(const l in t)r.push(...ra({key:`${n}.${l}`,value:t[l]}));return r}}};function ia(n){const t=n.value,r=n.key,l=n.styleSpec,f=n.style,_=n.validateSpec;if(!t.type)return[new z(r,t,'"type" is required')];const b=Hr(t.type);let E;switch(b){case"vector":case"raster":return E=vo({key:r,value:t,valueSpec:l[`source_${b.replace("-","_")}`],style:n.style,styleSpec:l,objectElementValidators:ul,validateSpec:_}),E;case"raster-dem":return E=function(P){var B;const Y=(B=P.sourceName)!==null&&B!==void 0?B:"",oe=P.value,fe=P.styleSpec,ge=fe.source_raster_dem,Ee=P.style;let ke=[];const Ge=er(oe);if(oe===void 0)return ke;if(Ge!=="object")return ke.push(new z("source_raster_dem",oe,`object expected, ${Ge} found`)),ke;const Ke=Hr(oe.encoding)==="custom",dt=["redFactor","greenFactor","blueFactor","baseShift"],it=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const ht in oe)!Ke&&dt.includes(ht)?ke.push(new z(ht,oe[ht],`In "${Y}": "${ht}" is only valid when "encoding" is set to "custom". ${it} encoding found`)):ge[ht]?ke=ke.concat(P.validateSpec({key:ht,value:oe[ht],valueSpec:ge[ht],validateSpec:P.validateSpec,style:Ee,styleSpec:fe})):ke.push(new z(ht,oe[ht],`unknown property "${ht}"`));return ke}({sourceName:r,value:t,style:n.style,styleSpec:l,validateSpec:_}),E;case"geojson":if(E=vo({key:r,value:t,valueSpec:l.source_geojson,style:f,styleSpec:l,validateSpec:_,objectElementValidators:ul}),t.cluster)for(const P in t.clusterProperties){const[B,Y]=t.clusterProperties[P],oe=typeof B=="string"?[B,["accumulated"],["get",P]]:B;E.push(...Da({key:`${r}.${P}.map`,value:Y,validateSpec:_,expressionContext:"cluster-map"})),E.push(...Da({key:`${r}.${P}.reduce`,value:oe,validateSpec:_,expressionContext:"cluster-reduce"}))}return E;case"video":return vo({key:r,value:t,valueSpec:l.source_video,style:f,validateSpec:_,styleSpec:l});case"image":return vo({key:r,value:t,valueSpec:l.source_image,style:f,validateSpec:_,styleSpec:l});case"canvas":return[new z(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return na({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:_,styleSpec:l})}}function hc(n){const t=n.value,r=n.styleSpec,l=r.light,f=n.style;let _=[];const b=er(t);if(t===void 0)return _;if(b!=="object")return _=_.concat([new z("light",t,`object expected, ${b} found`)]),_;for(const E in t){const P=E.match(/^(.*)-transition$/);_=_.concat(P&&l[P[1]]&&l[P[1]].transition?n.validateSpec({key:E,value:t[E],valueSpec:r.transition,validateSpec:n.validateSpec,style:f,styleSpec:r}):l[E]?n.validateSpec({key:E,value:t[E],valueSpec:l[E],validateSpec:n.validateSpec,style:f,styleSpec:r}):[new z(E,t[E],`unknown property "${E}"`)])}return _}function Au(n){const t=n.value,r=n.styleSpec,l=r.sky,f=n.style,_=er(t);if(t===void 0)return[];if(_!=="object")return[new z("sky",t,`object expected, ${_} found`)];let b=[];for(const E in t)b=b.concat(l[E]?n.validateSpec({key:E,value:t[E],valueSpec:l[E],style:f,styleSpec:r}):[new z(E,t[E],`unknown property "${E}"`)]);return b}function cl(n){const t=n.value,r=n.styleSpec,l=r.terrain,f=n.style;let _=[];const b=er(t);if(t===void 0)return _;if(b!=="object")return _=_.concat([new z("terrain",t,`object expected, ${b} found`)]),_;for(const E in t)_=_.concat(l[E]?n.validateSpec({key:E,value:t[E],valueSpec:l[E],validateSpec:n.validateSpec,style:f,styleSpec:r}):[new z(E,t[E],`unknown property "${E}"`)]);return _}function Zl(n){let t=[];const r=n.value,l=n.key;if(Array.isArray(r)){const f=[],_=[];for(const b in r)r[b].id&&f.includes(r[b].id)&&t.push(new z(l,r,`all the sprites' ids must be unique, but ${r[b].id} is duplicated`)),f.push(r[b].id),r[b].url&&_.includes(r[b].url)&&t.push(new z(l,r,`all the sprites' URLs must be unique, but ${r[b].url} is duplicated`)),_.push(r[b].url),t=t.concat(vo({key:`${l}[${b}]`,value:r[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:n.validateSpec}));return t}return ra({key:l,value:r})}const oa={"*":()=>[],array:Gl,boolean:function(n){const t=n.value,r=n.key,l=er(t);return l!=="boolean"?[new z(r,t,`boolean expected, ${l} found`)]:[]},number:Bs,color:function(n){const t=n.key,r=n.value,l=er(r);return l!=="string"?[new z(t,r,`color expected, ${l} found`)]:Pn.parse(String(r))?[]:[new z(t,r,`color expected, "${r}" found`)]},constants:Nc,enum:na,filter:Uc,function:Hl,layer:Ir,object:vo,source:ia,light:hc,sky:Au,terrain:cl,projection:function(n){const t=n.value,r=n.styleSpec,l=r.projection,f=n.style,_=er(t);if(t===void 0)return[];if(_!=="object")return[new z("projection",t,`object expected, ${_} found`)];let b=[];for(const E in t)b=b.concat(l[E]?n.validateSpec({key:E,value:t[E],valueSpec:l[E],style:f,styleSpec:r}):[new z(E,t[E],`unknown property "${E}"`)]);return b},string:ra,formatted:function(n){return ra(n).length===0?[]:Da(n)},resolvedImage:function(n){return ra(n).length===0?[]:Da(n)},padding:function(n){const t=n.key,r=n.value;if(er(r)==="array"){if(r.length<1||r.length>4)return[new z(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const l={type:"number"};let f=[];for(let _=0;_<r.length;_++)f=f.concat(n.validateSpec({key:`${t}[${_}]`,value:r[_],validateSpec:n.validateSpec,valueSpec:l}));return f}return Bs({key:t,value:r,valueSpec:{}})},variableAnchorOffsetCollection:function(n){const t=n.key,r=n.value,l=er(r),f=n.styleSpec;if(l!=="array"||r.length<1||r.length%2!=0)return[new z(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let b=0;b<r.length;b+=2)_=_.concat(na({key:`${t}[${b}]`,value:r[b],valueSpec:f.layout_symbol["text-anchor"]})),_=_.concat(Gl({key:`${t}[${b+1}]`,value:r[b+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:f}));return _},sprite:Zl};function hl(n){const t=n.value,r=n.valueSpec,l=n.styleSpec;return n.validateSpec=hl,r.expression&&sl(Hr(t))?Hl(n):r.expression&&wt(Go(t))?Da(n):r.type&&oa[r.type]?oa[r.type](n):vo(q({},n,{valueSpec:r.type?l[r.type]:r}))}function Fh(n){const t=n.value,r=n.key,l=ra(n);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new z(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new z(r,t,'"glyphs" url must include a "{range}" token'))),l}function Ho(n,t=at){let r=[];return r=r.concat(hl({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,validateSpec:hl,objectElementValidators:{glyphs:Fh,"*":()=>[]}})),n.constants&&(r=r.concat(Nc({key:"constants",value:n.constants,style:n,styleSpec:t,validateSpec:hl}))),Wl(r)}function fs(n){return function(t){return n({...t,validateSpec:hl})}}function Wl(n){return[].concat(n).sort((t,r)=>t.line-r.line)}function _o(n){return function(...t){return Wl(n.apply(this,t))}}Ho.source=_o(fs(ia)),Ho.sprite=_o(fs(Zl)),Ho.glyphs=_o(fs(Fh)),Ho.light=_o(fs(hc)),Ho.sky=_o(fs(Au)),Ho.terrain=_o(fs(cl)),Ho.layer=_o(fs(Ir)),Ho.filter=_o(fs(Uc)),Ho.paintProperty=_o(fs(Pu)),Ho.layoutProperty=_o(fs(cc));const sa=Ho,$c=sa.light,Gc=sa.sky,dc=sa.paintProperty,Oh=sa.layoutProperty;function fc(n,t){let r=!1;if(t&&t.length)for(const l of t)n.fire(new un(new Error(l.message))),r=!0;return r}class ql{constructor(t,r,l){const f=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const b=new Int32Array(this.arrayBuffer);t=b[0],this.d=(r=b[1])+2*(l=b[2]);for(let P=0;P<this.d*this.d;P++){const B=b[3+P],Y=b[3+P+1];f.push(B===Y?null:b.subarray(B,Y))}const E=b[3+f.length+1];this.keys=b.subarray(b[3+f.length],E),this.bboxes=b.subarray(E),this.insert=this._insertReadonly}else{this.d=r+2*l;for(let b=0;b<this.d*this.d;b++)f.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=t,this.padding=l,this.scale=r/t,this.uid=0;const _=l/r*t;this.min=-_,this.max=t+_}insert(t,r,l,f,_){this._forEachCell(r,l,f,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(r),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,r,l,f,_,b){this.cells[_].push(b)}query(t,r,l,f,_){const b=this.min,E=this.max;if(t<=b&&r<=b&&E<=l&&E<=f&&!_)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(t,r,l,f,this._queryCell,P,{},_),P}}_queryCell(t,r,l,f,_,b,E,P){const B=this.cells[_];if(B!==null){const Y=this.keys,oe=this.bboxes;for(let fe=0;fe<B.length;fe++){const ge=B[fe];if(E[ge]===void 0){const Ee=4*ge;(P?P(oe[Ee+0],oe[Ee+1],oe[Ee+2],oe[Ee+3]):t<=oe[Ee+2]&&r<=oe[Ee+3]&&l>=oe[Ee+0]&&f>=oe[Ee+1])?(E[ge]=!0,b.push(Y[ge])):E[ge]=!1}}}}_forEachCell(t,r,l,f,_,b,E,P){const B=this._convertToCellCoord(t),Y=this._convertToCellCoord(r),oe=this._convertToCellCoord(l),fe=this._convertToCellCoord(f);for(let ge=B;ge<=oe;ge++)for(let Ee=Y;Ee<=fe;Ee++){const ke=this.d*Ee+ge;if((!P||P(this._convertFromCellCoord(ge),this._convertFromCellCoord(Ee),this._convertFromCellCoord(ge+1),this._convertFromCellCoord(Ee+1)))&&_.call(this,t,r,l,f,ke,b,E,P))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,r=3+this.cells.length+1+1;let l=0;for(let b=0;b<this.cells.length;b++)l+=this.cells[b].length;const f=new Int32Array(r+l+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let _=r;for(let b=0;b<t.length;b++){const E=t[b];f[3+b]=_,f.set(E,_),_+=E.length}return f[3+t.length]=_,f.set(this.keys,_),_+=this.keys.length,f[3+t.length+1]=_,f.set(this.bboxes,_),_+=this.bboxes.length,f.buffer}static serialize(t,r){const l=t.toArrayBuffer();return r&&r.push(l),{buffer:l}}static deserialize(t){return new ql(t.buffer)}}const Zo={};function on(n,t,r={}){if(Zo[n])throw new Error(`${n} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:n,writeable:!1}),Zo[n]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}on("Object",Object),on("TransferableGridIndex",ql),on("Color",Pn),on("Error",Error),on("AJAXError",pt),on("ResolvedImage",xi),on("StylePropertyFunction",Ln),on("StyleExpression",We,{omit:["_evaluator"]}),on("ZoomDependentExpression",an),on("ZoomConstantExpression",Nt),on("CompoundExpression",Oi,{omit:["_evaluate"]});for(const n in ds)ds[n]._classRegistryKey||on(`Expression_${n}`,ds[n]);function ps(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function pc(n){return n.$name||n.constructor._classRegistryKey}function dl(n){return!function(t){if(t===null||typeof t!="object")return!1;const r=pc(t);return!(!r||r==="Object")}(n)&&(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n instanceof Blob||n instanceof Error||ps(n)||te(n)||ArrayBuffer.isView(n)||n instanceof ImageData)}function io(n,t){if(dl(n))return(ps(n)||te(n))&&t&&t.push(n),ArrayBuffer.isView(n)&&t&&t.push(n.buffer),n instanceof ImageData&&t&&t.push(n.data.buffer),n;if(Array.isArray(n)){const _=[];for(const b of n)_.push(io(b,t));return _}if(typeof n!="object")throw new Error("can't serialize object of type "+typeof n);const r=pc(n);if(!r)throw new Error(`can't serialize object of unregistered class ${n.constructor.name}`);if(!Zo[r])throw new Error(`${r} is not registered.`);const{klass:l}=Zo[r],f=l.serialize?l.serialize(n,t):{};if(l.serialize){if(t&&f===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in n){if(!n.hasOwnProperty(_)||Zo[r].omit.indexOf(_)>=0)continue;const b=n[_];f[_]=Zo[r].shallow.indexOf(_)>=0?b:io(b,t)}n instanceof Error&&(f.message=n.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(f.$name=r),f}function Ns(n){if(dl(n))return n;if(Array.isArray(n))return n.map(Ns);if(typeof n!="object")throw new Error("can't deserialize object of type "+typeof n);const t=pc(n)||"Object";if(!Zo[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=Zo[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(n);const l=Object.create(r.prototype);for(const f of Object.keys(n)){if(f==="$name")continue;const _=n[f];l[f]=Zo[t].shallow.indexOf(f)>=0?_:Ns(_)}return l}class ms{constructor(){this.first=!0}update(t,r){const l=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=r),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=l,!0))}}const Yn={"Latin-1 Supplement":n=>n>=128&&n<=255,"Hangul Jamo":n=>n>=4352&&n<=4607,Khmer:n=>n>=6016&&n<=6143,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Katakana:n=>n>=12448&&n<=12543,Kanbun:n=>n>=12688&&n<=12703,"CJK Strokes":n=>n>=12736&&n<=12783,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"Private Use Area":n=>n>=57344&&n<=63743,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function Hc(n){for(const t of n)if(zu(t.charCodeAt(0)))return!0;return!1}function Cd(n){for(const t of n)if(!gs(t.charCodeAt(0)))return!1;return!0}function aa(n){const t=n.map(r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}}).filter(r=>r);return new RegExp(t.join("|"),"u")}const Mu=aa(["Arab","Dupl","Mong","Ougr","Syrc"]);function gs(n){return!Mu.test(String.fromCodePoint(n))}const ku=aa(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function zu(n){return!(n!==746&&n!==747&&(n<4352||!(Yn["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||Yn["CJK Compatibility"](n)||Yn["CJK Strokes"](n)||!(!Yn["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||Yn["Enclosed CJK Letters and Months"](n)||Yn["Ideographic Description Characters"](n)||Yn.Kanbun(n)||Yn.Katakana(n)&&n!==12540||!(!Yn["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!Yn["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||Yn["Vertical Forms"](n)||Yn["Yijing Hexagram Symbols"](n)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(n))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(n))||ku.test(String.fromCodePoint(n)))))}function fl(n){return!(zu(n)||function(t){return!!(Yn["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Yn["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Yn["Letterlike Symbols"](t)||Yn["Number Forms"](t)||Yn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Yn["Control Pictures"](t)&&t!==9251||Yn["Optical Character Recognition"](t)||Yn["Enclosed Alphanumerics"](t)||Yn["Geometric Shapes"](t)||Yn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Yn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Yn["CJK Symbols and Punctuation"](t)||Yn.Katakana(t)||Yn["Private Use Area"](t)||Yn["CJK Compatibility Forms"](t)||Yn["Small Form Variants"](t)||Yn["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(n))}const Na=aa(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Cr(n){return Na.test(String.fromCodePoint(n))}function kr(n,t){return!(!t&&Cr(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||Yn.Khmer(n))}function Ua(n){for(const t of n)if(Cr(t.charCodeAt(0)))return!0;return!1}const Sr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(n){this.pluginStatus=n.pluginStatus,this.pluginURL=n.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(n){this.applyArabicShaping=n.applyArabicShaping,this.processBidirectionalText=n.processBidirectionalText,this.processStyledBidirectionalText=n.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class tr{constructor(t,r){this.zoom=t,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ms,this.transition={})}isSupportedScript(t){return function(r,l){for(const f of r)if(!kr(f.charCodeAt(0),l))return!1;return!0}(t,Sr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,r=t-Math.floor(t),l=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*r}}}class Wo{constructor(t,r){this.property=t,this.value=r,this.expression=function(l,f){if(sl(l))return new Ln(l,f);if(wt(l)){const _=Sn(l,f);if(_.result==="error")throw new Error(_.value.map(b=>`${b.key}: ${b.message}`).join(", "));return _.value}{let _=l;return f.type==="color"&&typeof l=="string"?_=Pn.parse(l):f.type!=="padding"||typeof l!="number"&&!Array.isArray(l)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(l)&&(_=Qi.parse(l)):_=_i.parse(l),{kind:"constant",evaluate:()=>_}}}(r===void 0?t.specification.default:r,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,r,l){return this.property.possiblyEvaluate(this,t,r,l)}}class la{constructor(t){this.property=t,this.value=new Wo(t,void 0)}transitioned(t,r){return new Ru(this.property,this.value,r,M({},t.transition,this.transition),t.now)}untransitioned(){return new Ru(this.property,this.value,null,{},0)}}class ji{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return K(this._values[t].value.value)}setValue(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new la(this._values[t].property)),this._values[t].value=new Wo(this._values[t].property,r===null?void 0:K(r))}getTransition(t){return K(this._values[t].transition)}setTransition(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new la(this._values[t].property)),this._values[t].transition=K(r)||void 0}serialize(){const t={};for(const r of Object.keys(this._values)){const l=this.getValue(r);l!==void 0&&(t[r]=l);const f=this.getTransition(r);f!==void 0&&(t[`${r}-transition`]=f)}return t}transitioned(t,r){const l=new Xl(this._properties);for(const f of Object.keys(this._values))l._values[f]=this._values[f].transitioned(t,r._values[f]);return l}untransitioned(){const t=new Xl(this._properties);for(const r of Object.keys(this._values))t._values[r]=this._values[r].untransitioned();return t}}class Ru{constructor(t,r,l,f,_){this.property=t,this.value=r,this.begin=_+f.delay||0,this.end=this.begin+f.duration||0,t.specification.transition&&(f.delay||f.duration)&&(this.prior=l)}possiblyEvaluate(t,r,l){const f=t.now||0,_=this.value.possiblyEvaluate(t,r,l),b=this.prior;if(b){if(f>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(f<this.begin)return b.possiblyEvaluate(t,r,l);{const E=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(t,r,l),_,function(P){if(P<=0)return 0;if(P>=1)return 1;const B=P*P,Y=B*P;return 4*(P<.5?Y:3*(P-B)+Y-.75)}(E))}}return _}}class Xl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,r,l){const f=new Yl(this._properties);for(const _ of Object.keys(this._values))f._values[_]=this._values[_].possiblyEvaluate(t,r,l);return f}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Kl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return K(this._values[t].value)}setValue(t,r){this._values[t]=new Wo(this._values[t].property,r===null?void 0:K(r))}serialize(){const t={};for(const r of Object.keys(this._values)){const l=this.getValue(r);l!==void 0&&(t[r]=l)}return t}possiblyEvaluate(t,r,l){const f=new Yl(this._properties);for(const _ of Object.keys(this._values))f._values[_]=this._values[_].possiblyEvaluate(t,r,l);return f}}class Oo{constructor(t,r,l){this.property=t,this.value=r,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,r,l,f){return this.property.evaluate(this.value,this.parameters,t,r,l,f)}}class Yl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class sn{constructor(t){this.specification=t}possiblyEvaluate(t,r){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(r)}interpolate(t,r,l){const f=Gr[this.specification.type];return f?f(t,r,l):t}}class En{constructor(t,r){this.specification=t,this.overrides=r}possiblyEvaluate(t,r,l,f){return new Oo(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(r,null,{},l,f)}:t.expression,r)}interpolate(t,r,l){if(t.value.kind!=="constant"||r.value.kind!=="constant")return t;if(t.value.value===void 0||r.value.value===void 0)return new Oo(this,{kind:"constant",value:void 0},t.parameters);const f=Gr[this.specification.type];if(f){const _=f(t.value.value,r.value.value,l);return new Oo(this,{kind:"constant",value:_},t.parameters)}return t}evaluate(t,r,l,f,_,b){return t.kind==="constant"?t.value:t.evaluate(r,l,f,_,b)}}class Jl extends En{possiblyEvaluate(t,r,l,f){if(t.value===void 0)return new Oo(this,{kind:"constant",value:void 0},r);if(t.expression.kind==="constant"){const _=t.expression.evaluate(r,null,{},l,f),b=t.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,E=this._calculate(b,b,b,r);return new Oo(this,{kind:"constant",value:E},r)}if(t.expression.kind==="camera"){const _=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new Oo(this,{kind:"constant",value:_},r)}return new Oo(this,t.expression,r)}evaluate(t,r,l,f,_,b){if(t.kind==="source"){const E=t.evaluate(r,l,f,_,b);return this._calculate(E,E,E,r)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},l,f),t.evaluate({zoom:Math.floor(r.zoom)},l,f),t.evaluate({zoom:Math.floor(r.zoom)+1},l,f),r):t.value}_calculate(t,r,l,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:l,to:r}}interpolate(t){return t}}class Fu{constructor(t){this.specification=t}possiblyEvaluate(t,r,l,f){if(t.value!==void 0){if(t.expression.kind==="constant"){const _=t.expression.evaluate(r,null,{},l,f);return this._calculate(_,_,_,r)}return this._calculate(t.expression.evaluate(new tr(Math.floor(r.zoom-1),r)),t.expression.evaluate(new tr(Math.floor(r.zoom),r)),t.expression.evaluate(new tr(Math.floor(r.zoom+1),r)),r)}}_calculate(t,r,l,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:l,to:r}}interpolate(t){return t}}class Zc{constructor(t){this.specification=t}possiblyEvaluate(t,r,l,f){return!!t.expression.evaluate(r,null,{},l,f)}interpolate(){return!1}}class y{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in t){const l=t[r];l.specification.overridable&&this.overridableProperties.push(r);const f=this.defaultPropertyValues[r]=new Wo(l,void 0),_=this.defaultTransitionablePropertyValues[r]=new la(l);this.defaultTransitioningPropertyValues[r]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=f.possiblyEvaluate({})}}}on("DataDrivenProperty",En),on("DataConstantProperty",sn),on("CrossFadedDataDrivenProperty",Jl),on("CrossFadedProperty",Fu),on("ColorRampProperty",Zc);const e="-transition";class o extends In{constructor(t,r){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),r.layout&&(this._unevaluatedLayout=new Kl(r.layout)),r.paint)){this._transitionablePaint=new ji(r.paint);for(const l in t.paint)this.setPaintProperty(l,t.paint[l],{validate:!1});for(const l in t.layout)this.setLayoutProperty(l,t.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yl(r.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,r,l={}){r!=null&&this._validate(Oh,`layers.${this.id}.layout.${t}`,t,r,l)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,r):this.visibility=r)}getPaintProperty(t){return t.endsWith(e)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,r,l={}){if(r!=null&&this._validate(dc,`layers.${this.id}.paint.${t}`,t,r,l))return!1;if(t.endsWith(e))return this._transitionablePaint.setTransition(t.slice(0,-11),r||void 0),!1;{const f=this._transitionablePaint._values[t],_=f.property.specification["property-type"]==="cross-faded-data-driven",b=f.value.isDataDriven(),E=f.value;this._transitionablePaint.setValue(t,r),this._handleSpecialPaintPropertyUpdate(t);const P=this._transitionablePaint._values[t].value;return P.isDataDriven()||b||_||this._handleOverridablePaintPropertyUpdate(t,E,P)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,r,l){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,r){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,r)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),de(t,(r,l)=>!(r===void 0||l==="layout"&&!Object.keys(r).length||l==="paint"&&!Object.keys(r).length))}_validate(t,r,l,f,_={}){return(!_||_.validate!==!1)&&fc(this,t.call(sa,{key:r,layerType:this.type,objectKey:l,value:f,styleSpec:at,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const r=this.paint.get(t);if(r instanceof Oo&&ea(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}const h={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class d{constructor(t,r){this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class g{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,r){return t._trim(),r&&(t.isTransferred=!0,r.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const r=Object.create(this.prototype);return r.arrayBuffer=t.arrayBuffer,r.length=t.length,r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function I(n,t=1){let r=0,l=0;return{members:n.map(f=>{const _=h[f.type].BYTES_PER_ELEMENT,b=r=A(r,Math.max(t,_)),E=f.components||1;return l=Math.max(l,_),r+=_*E,{name:f.name,type:f.type,components:E,offset:b}}),size:A(r,Math.max(l,t)),alignment:t}}function A(n,t){return Math.ceil(n/t)*t}class O extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r){const l=this.length;return this.resize(l+1),this.emplace(l,t,r)}emplace(t,r,l){const f=2*t;return this.int16[f+0]=r,this.int16[f+1]=l,t}}O.prototype.bytesPerElement=4,on("StructArrayLayout2i4",O);class X extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=3*t;return this.int16[_+0]=r,this.int16[_+1]=l,this.int16[_+2]=f,t}}X.prototype.bytesPerElement=6,on("StructArrayLayout3i6",X);class ae extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f){const _=this.length;return this.resize(_+1),this.emplace(_,t,r,l,f)}emplace(t,r,l,f,_){const b=4*t;return this.int16[b+0]=r,this.int16[b+1]=l,this.int16[b+2]=f,this.int16[b+3]=_,t}}ae.prototype.bytesPerElement=8,on("StructArrayLayout4i8",ae);class le extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,l,f,_,b)}emplace(t,r,l,f,_,b,E){const P=6*t;return this.int16[P+0]=r,this.int16[P+1]=l,this.int16[P+2]=f,this.int16[P+3]=_,this.int16[P+4]=b,this.int16[P+5]=E,t}}le.prototype.bytesPerElement=12,on("StructArrayLayout2i4i12",le);class be extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,l,f,_,b)}emplace(t,r,l,f,_,b,E){const P=4*t,B=8*t;return this.int16[P+0]=r,this.int16[P+1]=l,this.uint8[B+4]=f,this.uint8[B+5]=_,this.uint8[B+6]=b,this.uint8[B+7]=E,t}}be.prototype.bytesPerElement=8,on("StructArrayLayout2i4ub8",be);class Ae extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r){const l=this.length;return this.resize(l+1),this.emplace(l,t,r)}emplace(t,r,l){const f=2*t;return this.float32[f+0]=r,this.float32[f+1]=l,t}}Ae.prototype.bytesPerElement=8,on("StructArrayLayout2f8",Ae);class Fe extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,t,r,l,f,_,b,E,P,B,Y)}emplace(t,r,l,f,_,b,E,P,B,Y,oe){const fe=10*t;return this.uint16[fe+0]=r,this.uint16[fe+1]=l,this.uint16[fe+2]=f,this.uint16[fe+3]=_,this.uint16[fe+4]=b,this.uint16[fe+5]=E,this.uint16[fe+6]=P,this.uint16[fe+7]=B,this.uint16[fe+8]=Y,this.uint16[fe+9]=oe,t}}Fe.prototype.bytesPerElement=20,on("StructArrayLayout10ui20",Fe);class Ne extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B,Y,oe,fe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,t,r,l,f,_,b,E,P,B,Y,oe,fe)}emplace(t,r,l,f,_,b,E,P,B,Y,oe,fe,ge){const Ee=12*t;return this.int16[Ee+0]=r,this.int16[Ee+1]=l,this.int16[Ee+2]=f,this.int16[Ee+3]=_,this.uint16[Ee+4]=b,this.uint16[Ee+5]=E,this.uint16[Ee+6]=P,this.uint16[Ee+7]=B,this.int16[Ee+8]=Y,this.int16[Ee+9]=oe,this.int16[Ee+10]=fe,this.int16[Ee+11]=ge,t}}Ne.prototype.bytesPerElement=24,on("StructArrayLayout4i4ui4i24",Ne);class $e extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=3*t;return this.float32[_+0]=r,this.float32[_+1]=l,this.float32[_+2]=f,t}}$e.prototype.bytesPerElement=12,on("StructArrayLayout3f12",$e);class qe extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint32[1*t+0]=r,t}}qe.prototype.bytesPerElement=4,on("StructArrayLayout1ul4",qe);class et extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B){const Y=this.length;return this.resize(Y+1),this.emplace(Y,t,r,l,f,_,b,E,P,B)}emplace(t,r,l,f,_,b,E,P,B,Y){const oe=10*t,fe=5*t;return this.int16[oe+0]=r,this.int16[oe+1]=l,this.int16[oe+2]=f,this.int16[oe+3]=_,this.int16[oe+4]=b,this.int16[oe+5]=E,this.uint32[fe+3]=P,this.uint16[oe+8]=B,this.uint16[oe+9]=Y,t}}et.prototype.bytesPerElement=20,on("StructArrayLayout6i1ul2ui20",et);class Ve extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,l,f,_,b)}emplace(t,r,l,f,_,b,E){const P=6*t;return this.int16[P+0]=r,this.int16[P+1]=l,this.int16[P+2]=f,this.int16[P+3]=_,this.int16[P+4]=b,this.int16[P+5]=E,t}}Ve.prototype.bytesPerElement=12,on("StructArrayLayout2i2i2i12",Ve);class st extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,r,l,f,_)}emplace(t,r,l,f,_,b){const E=4*t,P=8*t;return this.float32[E+0]=r,this.float32[E+1]=l,this.float32[E+2]=f,this.int16[P+6]=_,this.int16[P+7]=b,t}}st.prototype.bytesPerElement=16,on("StructArrayLayout2f1f2i16",st);class ut extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,l,f,_,b)}emplace(t,r,l,f,_,b,E){const P=16*t,B=4*t,Y=8*t;return this.uint8[P+0]=r,this.uint8[P+1]=l,this.float32[B+1]=f,this.float32[B+2]=_,this.int16[Y+6]=b,this.int16[Y+7]=E,t}}ut.prototype.bytesPerElement=16,on("StructArrayLayout2ub2f2i16",ut);class mt extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=3*t;return this.uint16[_+0]=r,this.uint16[_+1]=l,this.uint16[_+2]=f,t}}mt.prototype.bytesPerElement=6,on("StructArrayLayout3ui6",mt);class At extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B,Y,oe,fe,ge,Ee,ke,Ge,Ke){const dt=this.length;return this.resize(dt+1),this.emplace(dt,t,r,l,f,_,b,E,P,B,Y,oe,fe,ge,Ee,ke,Ge,Ke)}emplace(t,r,l,f,_,b,E,P,B,Y,oe,fe,ge,Ee,ke,Ge,Ke,dt){const it=24*t,ht=12*t,St=48*t;return this.int16[it+0]=r,this.int16[it+1]=l,this.uint16[it+2]=f,this.uint16[it+3]=_,this.uint32[ht+2]=b,this.uint32[ht+3]=E,this.uint32[ht+4]=P,this.uint16[it+10]=B,this.uint16[it+11]=Y,this.uint16[it+12]=oe,this.float32[ht+7]=fe,this.float32[ht+8]=ge,this.uint8[St+36]=Ee,this.uint8[St+37]=ke,this.uint8[St+38]=Ge,this.uint32[ht+10]=Ke,this.int16[it+22]=dt,t}}At.prototype.bytesPerElement=48,on("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",At);class Dt extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B,Y,oe,fe,ge,Ee,ke,Ge,Ke,dt,it,ht,St,Ft,rn,An,nn,Jt,yn,fn){const ln=this.length;return this.resize(ln+1),this.emplace(ln,t,r,l,f,_,b,E,P,B,Y,oe,fe,ge,Ee,ke,Ge,Ke,dt,it,ht,St,Ft,rn,An,nn,Jt,yn,fn)}emplace(t,r,l,f,_,b,E,P,B,Y,oe,fe,ge,Ee,ke,Ge,Ke,dt,it,ht,St,Ft,rn,An,nn,Jt,yn,fn,ln){const Ct=32*t,xn=16*t;return this.int16[Ct+0]=r,this.int16[Ct+1]=l,this.int16[Ct+2]=f,this.int16[Ct+3]=_,this.int16[Ct+4]=b,this.int16[Ct+5]=E,this.int16[Ct+6]=P,this.int16[Ct+7]=B,this.uint16[Ct+8]=Y,this.uint16[Ct+9]=oe,this.uint16[Ct+10]=fe,this.uint16[Ct+11]=ge,this.uint16[Ct+12]=Ee,this.uint16[Ct+13]=ke,this.uint16[Ct+14]=Ge,this.uint16[Ct+15]=Ke,this.uint16[Ct+16]=dt,this.uint16[Ct+17]=it,this.uint16[Ct+18]=ht,this.uint16[Ct+19]=St,this.uint16[Ct+20]=Ft,this.uint16[Ct+21]=rn,this.uint16[Ct+22]=An,this.uint32[xn+12]=nn,this.float32[xn+13]=Jt,this.float32[xn+14]=yn,this.uint16[Ct+30]=fn,this.uint16[Ct+31]=ln,t}}Dt.prototype.bytesPerElement=64,on("StructArrayLayout8i15ui1ul2f2ui64",Dt);class Gt extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.float32[1*t+0]=r,t}}Gt.prototype.bytesPerElement=4,on("StructArrayLayout1f4",Gt);class tn extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=3*t;return this.uint16[6*t+0]=r,this.float32[_+1]=l,this.float32[_+2]=f,t}}tn.prototype.bytesPerElement=12,on("StructArrayLayout1ui2f12",tn);class Ht extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=4*t;return this.uint32[2*t+0]=r,this.uint16[_+2]=l,this.uint16[_+3]=f,t}}Ht.prototype.bytesPerElement=8,on("StructArrayLayout1ul2ui8",Ht);class Lt extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r){const l=this.length;return this.resize(l+1),this.emplace(l,t,r)}emplace(t,r,l){const f=2*t;return this.uint16[f+0]=r,this.uint16[f+1]=l,t}}Lt.prototype.bytesPerElement=4,on("StructArrayLayout2ui4",Lt);class hn extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint16[1*t+0]=r,t}}hn.prototype.bytesPerElement=2,on("StructArrayLayout1ui2",hn);class Rn extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l,f){const _=this.length;return this.resize(_+1),this.emplace(_,t,r,l,f)}emplace(t,r,l,f,_){const b=4*t;return this.float32[b+0]=r,this.float32[b+1]=l,this.float32[b+2]=f,this.float32[b+3]=_,t}}Rn.prototype.bytesPerElement=16,on("StructArrayLayout4f16",Rn);class $t extends d{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}$t.prototype.size=20;class Qt extends et{get(t){return new $t(this,t)}}on("CollisionBoxArray",Qt);class Fn extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Fn.prototype.size=48;class Er extends At{get(t){return new Fn(this,t)}}on("PlacedSymbolArray",Er);class Gn extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Gn.prototype.size=64;class qn extends Dt{get(t){return new Gn(this,t)}}on("SymbolInstanceArray",qn);class rr extends Gt{getoffsetX(t){return this.float32[1*t+0]}}on("GlyphOffsetArray",rr);class ei extends X{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}on("SymbolLineVertexArray",ei);class jo extends d{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}jo.prototype.size=12;class Pr extends tn{get(t){return new jo(this,t)}}on("TextAnchorOffsetArray",Pr);class ti extends d{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ti.prototype.size=8;class ni extends Ht{get(t){return new ti(this,t)}}on("FeatureIndexArray",ni);class Si extends O{}class Zi extends O{}class Ei extends O{}class Lo extends le{}class pl extends be{}class ml extends Ae{}class oo extends Fe{}class Ou extends Ne{}class mc extends $e{}class xo extends qe{}class so extends Ve{}class ua extends ut{}class qo extends mt{}class Ti extends Lt{}const Ii=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:Li}=Ii;class Kn{constructor(t=[]){this.segments=t}prepareSegment(t,r,l,f){let _=this.segments[this.segments.length-1];return t>Kn.MAX_VERTEX_ARRAY_LENGTH&&W(`Max vertices per segment is ${Kn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!_||_.vertexLength+t>Kn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==f)&&(_={vertexOffset:r.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},f!==void 0&&(_.sortKey=f),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const t of this.segments)for(const r in t.vaos)t.vaos[r].destroy()}static simpleSegment(t,r,l,f){return new Kn([{vertexOffset:t,primitiveOffset:r,vertexLength:l,primitiveLength:f,vaos:{},sortKey:0}])}}function Va(n,t){return 256*(n=ne(Math.floor(n),0,255))+ne(Math.floor(t),0,255)}Kn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,on("SegmentVector",Kn);const gl=I([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ys={exports:{}},Wc={exports:{}};Wc.exports=function(n,t){var r,l,f,_,b,E,P,B;for(l=n.length-(r=3&n.length),f=t,b=3432918353,E=461845907,B=0;B<l;)P=255&n.charCodeAt(B)|(255&n.charCodeAt(++B))<<8|(255&n.charCodeAt(++B))<<16|(255&n.charCodeAt(++B))<<24,++B,f=27492+(65535&(_=5*(65535&(f=(f^=P=(65535&(P=(P=(65535&P)*b+(((P>>>16)*b&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(P=0,r){case 3:P^=(255&n.charCodeAt(B+2))<<16;case 2:P^=(255&n.charCodeAt(B+1))<<8;case 1:f^=P=(65535&(P=(P=(65535&(P^=255&n.charCodeAt(B)))*b+(((P>>>16)*b&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295}return f^=n.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var ju=Wc.exports,vs={exports:{}};vs.exports=function(n,t){for(var r,l=n.length,f=t^l,_=0;l>=4;)r=1540483477*(65535&(r=255&n.charCodeAt(_)|(255&n.charCodeAt(++_))<<8|(255&n.charCodeAt(++_))<<16|(255&n.charCodeAt(++_))<<24))+((1540483477*(r>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),l-=4,++_;switch(l){case 3:f^=(255&n.charCodeAt(_+2))<<16;case 2:f^=(255&n.charCodeAt(_+1))<<8;case 1:f=1540483477*(65535&(f^=255&n.charCodeAt(_)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var Xo=ju,Ql=vs.exports;ys.exports=Xo,ys.exports.murmur3=Xo,ys.exports.murmur2=Ql;var Us=L(ys.exports);class yl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,r,l,f){this.ids.push(ca(t)),this.positions.push(r,l,f)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=ca(t);let l=0,f=this.ids.length-1;for(;l<f;){const b=l+f>>1;this.ids[b]>=r?f=b:l=b+1}const _=[];for(;this.ids[l]===r;)_.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return _}static serialize(t,r){const l=new Float64Array(t.ids),f=new Uint32Array(t.positions);return Lu(l,f,0,l.length-1),r&&r.push(l.buffer,f.buffer),{ids:l,positions:f}}static deserialize(t){const r=new yl;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}}function ca(n){const t=+n;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Us(String(n))}function Lu(n,t,r,l){for(;r<l;){const f=n[r+l>>1];let _=r-1,b=l+1;for(;;){do _++;while(n[_]<f);do b--;while(n[b]>f);if(_>=b)break;$a(n,_,b),$a(t,3*_,3*b),$a(t,3*_+1,3*b+1),$a(t,3*_+2,3*b+2)}b-r<l-b?(Lu(n,t,r,b),r=b+1):(Lu(n,t,b+1,l),l=b)}}function $a(n,t,r){const l=n[t];n[t]=n[r],n[r]=l}on("FeaturePositionMap",yl);class Ar{constructor(t,r){this.gl=t.gl,this.location=r}}class Du extends Ar{constructor(t,r){super(t,r),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class jh extends Ar{constructor(t,r){super(t,r),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Lh extends Ar{constructor(t,r){super(t,r),this.current=Pn.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Dh=new Float32Array(16);function qc(n){return[Va(255*n.r,255*n.g),Va(255*n.b,255*n.a)]}class ha{constructor(t,r,l){this.value=t,this.uniformNames=r.map(f=>`u_${f}`),this.type=l}setUniform(t,r,l){t.set(l.constantOr(this.value))}getBinding(t,r,l){return this.type==="color"?new Lh(t,r):new Du(t,r)}}class zr{constructor(t,r){this.uniformNames=r.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=t.tlbr}setUniform(t,r,l,f){const _=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&t.set(_)}getBinding(t,r,l){return l.substr(0,9)==="u_pattern"?new jh(t,r):new Du(t,r)}}class Lr{constructor(t,r,l,f){this.expression=t,this.type=l,this.maxValue=0,this.paintVertexAttributes=r.map(_=>({name:`a_${_}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(t,r,l,f,_){const b=this.paintVertexArray.length,E=this.expression.evaluate(new tr(0),r,{},f,[],_);this.paintVertexArray.resize(t),this._setPaintValue(b,t,E)}updatePaintArray(t,r,l,f){const _=this.expression.evaluate({zoom:0},l,f);this._setPaintValue(t,r,_)}_setPaintValue(t,r,l){if(this.type==="color"){const f=qc(l);for(let _=t;_<r;_++)this.paintVertexArray.emplace(_,f[0],f[1])}else{for(let f=t;f<r;f++)this.paintVertexArray.emplace(f,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Rr{constructor(t,r,l,f,_,b){this.expression=t,this.uniformNames=r.map(E=>`u_${E}_t`),this.type=l,this.useIntegerZoom=f,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=r.map(E=>({name:`a_${E}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(t,r,l,f,_){const b=this.expression.evaluate(new tr(this.zoom),r,{},f,[],_),E=this.expression.evaluate(new tr(this.zoom+1),r,{},f,[],_),P=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(P,t,b,E)}updatePaintArray(t,r,l,f){const _=this.expression.evaluate({zoom:this.zoom},l,f),b=this.expression.evaluate({zoom:this.zoom+1},l,f);this._setPaintValue(t,r,_,b)}_setPaintValue(t,r,l,f){if(this.type==="color"){const _=qc(l),b=qc(f);for(let E=t;E<r;E++)this.paintVertexArray.emplace(E,_[0],_[1],b[0],b[1])}else{for(let _=t;_<r;_++)this.paintVertexArray.emplace(_,l,f);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,r){const l=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,f=ne(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);t.set(f)}getBinding(t,r,l){return new Du(t,r)}}class da{constructor(t,r,l,f,_,b){this.expression=t,this.type=r,this.useIntegerZoom=l,this.zoom=f,this.layerId=b,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(t,r,l){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(f,t,r.patterns&&r.patterns[this.layerId],l)}updatePaintArray(t,r,l,f,_){this._setPaintValues(t,r,l.patterns&&l.patterns[this.layerId],_)}_setPaintValues(t,r,l,f){if(!f||!l)return;const{min:_,mid:b,max:E}=l,P=f[_],B=f[b],Y=f[E];if(P&&B&&Y)for(let oe=t;oe<r;oe++)this.zoomInPaintVertexArray.emplace(oe,B.tl[0],B.tl[1],B.br[0],B.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],B.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(oe,B.tl[0],B.tl[1],B.br[0],B.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],B.pixelRatio,Y.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,gl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,gl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class gc{constructor(t,r,l){this.binders={},this._buffers=[];const f=[];for(const _ in t.paint._values){if(!l(_))continue;const b=t.paint.get(_);if(!(b instanceof Oo&&ea(b.property.specification)))continue;const E=Lm(_,t.type),P=b.value,B=b.property.specification.type,Y=b.property.useIntegerZoom,oe=b.property.specification["property-type"],fe=oe==="cross-faded"||oe==="cross-faded-data-driven";if(P.kind==="constant")this.binders[_]=fe?new zr(P.value,E):new ha(P.value,E,B),f.push(`/u_${_}`);else if(P.kind==="source"||fe){const ge=ao(_,B,"source");this.binders[_]=fe?new da(P,B,Y,r,ge,t.id):new Lr(P,E,B,ge),f.push(`/a_${_}`)}else{const ge=ao(_,B,"composite");this.binders[_]=new Rr(P,E,B,Y,r,ge),f.push(`/z_${_}`)}}this.cacheKey=f.sort().join("")}getMaxValue(t){const r=this.binders[t];return r instanceof Lr||r instanceof Rr?r.maxValue:0}populatePaintArrays(t,r,l,f,_){for(const b in this.binders){const E=this.binders[b];(E instanceof Lr||E instanceof Rr||E instanceof da)&&E.populatePaintArray(t,r,l,f,_)}}setConstantPatternPositions(t,r){for(const l in this.binders){const f=this.binders[l];f instanceof zr&&f.setConstantPatternPositions(t,r)}}updatePaintArrays(t,r,l,f,_){let b=!1;for(const E in t){const P=r.getPositions(E);for(const B of P){const Y=l.feature(B.index);for(const oe in this.binders){const fe=this.binders[oe];if((fe instanceof Lr||fe instanceof Rr||fe instanceof da)&&fe.expression.isStateDependent===!0){const ge=f.paint.get(oe);fe.expression=ge.value,fe.updatePaintArray(B.start,B.end,Y,t[E],_),b=!0}}}}return b}defines(){const t=[];for(const r in this.binders){const l=this.binders[r];(l instanceof ha||l instanceof zr)&&t.push(...l.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return t}getBinderAttributes(){const t=[];for(const r in this.binders){const l=this.binders[r];if(l instanceof Lr||l instanceof Rr)for(let f=0;f<l.paintVertexAttributes.length;f++)t.push(l.paintVertexAttributes[f].name);else if(l instanceof da)for(let f=0;f<gl.members.length;f++)t.push(gl.members[f].name)}return t}getBinderUniforms(){const t=[];for(const r in this.binders){const l=this.binders[r];if(l instanceof ha||l instanceof zr||l instanceof Rr)for(const f of l.uniformNames)t.push(f)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,r){const l=[];for(const f in this.binders){const _=this.binders[f];if(_ instanceof ha||_ instanceof zr||_ instanceof Rr){for(const b of _.uniformNames)if(r[b]){const E=_.getBinding(t,r[b],b);l.push({name:b,property:f,binding:E})}}}return l}setUniforms(t,r,l,f){for(const{name:_,property:b,binding:E}of r)this.binders[b].setUniform(E,f,l.get(b),_)}updatePaintBuffers(t){this._buffers=[];for(const r in this.binders){const l=this.binders[r];if(t&&l instanceof da){const f=t.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(l instanceof Lr||l instanceof Rr)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(t){for(const r in this.binders){const l=this.binders[r];(l instanceof Lr||l instanceof Rr||l instanceof da)&&l.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const r=this.binders[t];(r instanceof Lr||r instanceof Rr||r instanceof da)&&r.destroy()}}}class fa{constructor(t,r,l=()=>!0){this.programConfigurations={};for(const f of t)this.programConfigurations[f.id]=new gc(f,r,l);this.needsUpload=!1,this._featureMap=new yl,this._bufferOffset=0}populatePaintArrays(t,r,l,f,_,b){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(t,r,f,_,b);r.id!==void 0&&this._featureMap.add(r.id,l,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,r,l,f){for(const _ of l)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(t,this._featureMap,r,_,f)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Lm(n,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(`${t}-`,"").replace(/-/g,"_")]}function ao(n,t,r){const l={color:{source:Ae,composite:Rn},number:{source:Gt,composite:Ae}},f=function(_){return{"line-pattern":{source:oo,composite:oo},"fill-pattern":{source:oo,composite:oo},"fill-extrusion-pattern":{source:oo,composite:oo}}[_]}(n);return f&&f[r]||l[t][r]}on("ConstantBinder",ha),on("CrossFadedConstantBinder",zr),on("SourceExpressionBinder",Lr),on("CrossFadedCompositeBinder",da),on("CompositeExpressionBinder",Rr),on("ProgramConfiguration",gc,{omit:["_buffers"]}),on("ProgramConfigurationSet",fa);const ri=8192,Xc=Math.pow(2,14)-1,Bh=-Xc-1;function wo(n){const t=ri/n.extent,r=n.loadGeometry();for(let l=0;l<r.length;l++){const f=r[l];for(let _=0;_<f.length;_++){const b=f[_],E=Math.round(b.x*t),P=Math.round(b.y*t);b.x=ne(E,Bh,Xc),b.y=ne(P,Bh,Xc),(E<b.x||E>b.x+1||P<b.y||P>b.y+1)&&W("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Wi(n,t){return{type:n.type,id:n.id,properties:n.properties,geometry:t?wo(n):[]}}function eu(n,t,r,l,f){n.emplaceBack(2*t+(l+1)/2,2*r+(f+1)/2)}class Kc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Zi,this.indexArray=new qo,this.segments=new Kn,this.programConfigurations=new fa(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,l){const f=this.layers[0],_=[];let b=null,E=!1;f.type==="circle"&&(b=f.layout.get("circle-sort-key"),E=!b.isConstant());for(const{feature:P,id:B,index:Y,sourceLayerIndex:oe}of t){const fe=this.layers[0]._featureFilter.needGeometry,ge=Wi(P,fe);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),ge,l))continue;const Ee=E?b.evaluate(ge,{},l):void 0,ke={id:B,properties:P.properties,type:P.type,sourceLayerIndex:oe,index:Y,geometry:fe?ge.geometry:wo(P),patterns:{},sortKey:Ee};_.push(ke)}E&&_.sort((P,B)=>P.sortKey-B.sortKey);for(const P of _){const{geometry:B,index:Y,sourceLayerIndex:oe}=P,fe=t[Y].feature;this.addFeature(P,B,Y,l),r.featureIndex.insert(fe,B,Y,oe,this.index)}}update(t,r,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Li),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,r,l,f){for(const _ of r)for(const b of _){const E=b.x,P=b.y;if(E<0||E>=ri||P<0||P>=ri)continue;const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),Y=B.vertexLength;eu(this.layoutVertexArray,E,P,-1,-1),eu(this.layoutVertexArray,E,P,1,-1),eu(this.layoutVertexArray,E,P,1,1),eu(this.layoutVertexArray,E,P,-1,1),this.indexArray.emplaceBack(Y,Y+1,Y+2),this.indexArray.emplaceBack(Y,Y+3,Y+2),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{},f)}}function Nh(n,t){for(let r=0;r<n.length;r++)if(Ga(t,n[r]))return!0;for(let r=0;r<t.length;r++)if(Ga(n,t[r]))return!0;return!!Uh(n,t)}function Wf(n,t,r){return!!Ga(n,t)||!!Vh(t,n,r)}function Pd(n,t){if(n.length===1)return Md(t,n[0]);for(let r=0;r<t.length;r++){const l=t[r];for(let f=0;f<l.length;f++)if(Ga(n,l[f]))return!0}for(let r=0;r<n.length;r++)if(Md(t,n[r]))return!0;for(let r=0;r<t.length;r++)if(Uh(n,t[r]))return!0;return!1}function qf(n,t,r){if(n.length>1){if(Uh(n,t))return!0;for(let l=0;l<t.length;l++)if(Vh(t[l],n,r))return!0}for(let l=0;l<n.length;l++)if(Vh(n[l],t,r))return!0;return!1}function Uh(n,t){if(n.length===0||t.length===0)return!1;for(let r=0;r<n.length-1;r++){const l=n[r],f=n[r+1];for(let _=0;_<t.length-1;_++)if(Xf(l,f,t[_],t[_+1]))return!0}return!1}function Xf(n,t,r,l){return J(n,r,l)!==J(t,r,l)&&J(n,t,r)!==J(n,t,l)}function Vh(n,t,r){const l=r*r;if(t.length===1)return n.distSqr(t[0])<l;for(let f=1;f<t.length;f++)if(Ad(n,t[f-1],t[f])<l)return!0;return!1}function Ad(n,t,r){const l=t.distSqr(r);if(l===0)return n.distSqr(t);const f=((n.x-t.x)*(r.x-t.x)+(n.y-t.y)*(r.y-t.y))/l;return n.distSqr(f<0?t:f>1?r:r.sub(t)._mult(f)._add(t))}function Md(n,t){let r,l,f,_=!1;for(let b=0;b<n.length;b++){r=n[b];for(let E=0,P=r.length-1;E<r.length;P=E++)l=r[E],f=r[P],l.y>t.y!=f.y>t.y&&t.x<(f.x-l.x)*(t.y-l.y)/(f.y-l.y)+l.x&&(_=!_)}return _}function Ga(n,t){let r=!1;for(let l=0,f=n.length-1;l<n.length;f=l++){const _=n[l],b=n[f];_.y>t.y!=b.y>t.y&&t.x<(b.x-_.x)*(t.y-_.y)/(b.y-_.y)+_.x&&(r=!r)}return r}function Kf(n,t,r){const l=r[0],f=r[2];if(n.x<l.x&&t.x<l.x||n.x>f.x&&t.x>f.x||n.y<l.y&&t.y<l.y||n.y>f.y&&t.y>f.y)return!1;const _=J(n,t,r[0]);return _!==J(n,t,r[1])||_!==J(n,t,r[2])||_!==J(n,t,r[3])}function tu(n,t,r){const l=t.paint.get(n).value;return l.kind==="constant"?l.value:r.programConfigurations.get(t.id).getMaxValue(n)}function Bu(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Yc(n,t,r,l,f){if(!t[0]&&!t[1])return n;const _=C.convert(t)._mult(f);r==="viewport"&&_._rotate(-l);const b=[];for(let E=0;E<n.length;E++)b.push(n[E].sub(_));return b}let $h,kd;on("CircleBucket",Kc,{omit:["layers"]});var Yf={get paint(){return kd=kd||new y({"circle-radius":new En(at.paint_circle["circle-radius"]),"circle-color":new En(at.paint_circle["circle-color"]),"circle-blur":new En(at.paint_circle["circle-blur"]),"circle-opacity":new En(at.paint_circle["circle-opacity"]),"circle-translate":new sn(at.paint_circle["circle-translate"]),"circle-translate-anchor":new sn(at.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sn(at.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sn(at.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new En(at.paint_circle["circle-stroke-width"]),"circle-stroke-color":new En(at.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new En(at.paint_circle["circle-stroke-opacity"])})},get layout(){return $h=$h||new y({"circle-sort-key":new En(at.layout_circle["circle-sort-key"])})}},lo=1e-6,Nu=typeof Float32Array<"u"?Float32Array:Array;function Jc(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function zd(n,t,r){var l=t[0],f=t[1],_=t[2],b=t[3],E=t[4],P=t[5],B=t[6],Y=t[7],oe=t[8],fe=t[9],ge=t[10],Ee=t[11],ke=t[12],Ge=t[13],Ke=t[14],dt=t[15],it=r[0],ht=r[1],St=r[2],Ft=r[3];return n[0]=it*l+ht*E+St*oe+Ft*ke,n[1]=it*f+ht*P+St*fe+Ft*Ge,n[2]=it*_+ht*B+St*ge+Ft*Ke,n[3]=it*b+ht*Y+St*Ee+Ft*dt,n[4]=(it=r[4])*l+(ht=r[5])*E+(St=r[6])*oe+(Ft=r[7])*ke,n[5]=it*f+ht*P+St*fe+Ft*Ge,n[6]=it*_+ht*B+St*ge+Ft*Ke,n[7]=it*b+ht*Y+St*Ee+Ft*dt,n[8]=(it=r[8])*l+(ht=r[9])*E+(St=r[10])*oe+(Ft=r[11])*ke,n[9]=it*f+ht*P+St*fe+Ft*Ge,n[10]=it*_+ht*B+St*ge+Ft*Ke,n[11]=it*b+ht*Y+St*Ee+Ft*dt,n[12]=(it=r[12])*l+(ht=r[13])*E+(St=r[14])*oe+(Ft=r[15])*ke,n[13]=it*f+ht*P+St*fe+Ft*Ge,n[14]=it*_+ht*B+St*ge+Ft*Ke,n[15]=it*b+ht*Y+St*Ee+Ft*dt,n}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var yc,Jf=zd;function Gh(n,t,r){var l=t[0],f=t[1],_=t[2],b=t[3];return n[0]=r[0]*l+r[4]*f+r[8]*_+r[12]*b,n[1]=r[1]*l+r[5]*f+r[9]*_+r[13]*b,n[2]=r[2]*l+r[6]*f+r[10]*_+r[14]*b,n[3]=r[3]*l+r[7]*f+r[11]*_+r[15]*b,n}yc=new Nu(4),Nu!=Float32Array&&(yc[0]=0,yc[1]=0,yc[2]=0,yc[3]=0);class Qf extends o{constructor(t){super(t,Yf)}createBucket(t){return new Kc(t)}queryRadius(t){const r=t;return tu("circle-radius",this,r)+tu("circle-stroke-width",this,r)+Bu(this.paint.get("circle-translate"))}queryIntersectsFeature(t,r,l,f,_,b,E,P){const B=Yc(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,E),Y=this.paint.get("circle-radius").evaluate(r,l)+this.paint.get("circle-stroke-width").evaluate(r,l),oe=this.paint.get("circle-pitch-alignment")==="map",fe=oe?B:function(Ee,ke){return Ee.map(Ge=>ep(Ge,ke))}(B,P),ge=oe?Y*E:Y;for(const Ee of f)for(const ke of Ee){const Ge=oe?ke:ep(ke,P);let Ke=ge;const dt=Gh([],[ke.x,ke.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ke*=dt[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ke*=b.cameraToCenterDistance/dt[3]),Wf(fe,Ge,Ke))return!0}return!1}}function ep(n,t){const r=Gh([],[n.x,n.y,0,1],t);return new C(r[0]/r[3],r[1]/r[3])}class tp extends Kc{}let Rd;on("HeatmapBucket",tp,{omit:["layers"]});var np={get paint(){return Rd=Rd||new y({"heatmap-radius":new En(at.paint_heatmap["heatmap-radius"]),"heatmap-weight":new En(at.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sn(at.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Zc(at.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sn(at.paint_heatmap["heatmap-opacity"])})}};function Hh(n,{width:t,height:r},l,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==t*r*l)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${t*r*l}`)}else f=new Uint8Array(t*r*l);return n.width=t,n.height=r,n.data=f,n}function Qc(n,{width:t,height:r},l){if(t===n.width&&r===n.height)return;const f=Hh({},{width:t,height:r},l);Fd(n,f,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,t),height:Math.min(n.height,r)},l),n.width=t,n.height=r,n.data=f.data}function Fd(n,t,r,l,f,_){if(f.width===0||f.height===0)return t;if(f.width>n.width||f.height>n.height||r.x>n.width-f.width||r.y>n.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||l.x>t.width-f.width||l.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const b=n.data,E=t.data;if(b===E)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<f.height;P++){const B=((r.y+P)*n.width+r.x)*_,Y=((l.y+P)*t.width+l.x)*_;for(let oe=0;oe<f.width*_;oe++)E[Y+oe]=b[B+oe]}return t}class eh{constructor(t,r){Hh(this,t,1,r)}resize(t){Qc(this,t,1)}clone(){return new eh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,l,f,_){Fd(t,r,l,f,_,1)}}class _s{constructor(t,r){Hh(this,t,4,r)}resize(t){Qc(this,t,4)}replace(t,r){r?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new _s({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,l,f,_){Fd(t,r,l,f,_,4)}}function Uu(n){const t={},r=n.resolution||256,l=n.clips?n.clips.length:1,f=n.image||new _s({width:r,height:l});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const _=(b,E,P)=>{t[n.evaluationKey]=P;const B=n.expression.evaluate(t);f.data[b+E+0]=Math.floor(255*B.r/B.a),f.data[b+E+1]=Math.floor(255*B.g/B.a),f.data[b+E+2]=Math.floor(255*B.b/B.a),f.data[b+E+3]=Math.floor(255*B.a)};if(n.clips)for(let b=0,E=0;b<l;++b,E+=4*r)for(let P=0,B=0;P<r;P++,B+=4){const Y=P/(r-1),{start:oe,end:fe}=n.clips[b];_(E,B,oe*(1-Y)+fe*Y)}else for(let b=0,E=0;b<r;b++,E+=4)_(0,E,b/(r-1));return f}on("AlphaImage",eh),on("RGBAImage",_s);const th="big-fb";class Od extends o{createBucket(t){return new tp(t)}constructor(t){super(t,np),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(th)&&this.heatmapFbos.delete(th)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let rp;var ip={get paint(){return rp=rp||new y({"hillshade-illumination-direction":new sn(at.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new sn(at.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sn(at.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sn(at.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sn(at.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sn(at.paint_hillshade["hillshade-accent-color"])})}};class op extends o{constructor(t){super(t,ip)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const sp=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:ap}=sp;function jd(n,t,r=2){const l=t&&t.length,f=l?t[0]*r:n.length;let _=lp(n,0,f,r,!0);const b=[];if(!_||_.next===_.prev)return b;let E,P,B;if(l&&(_=function(Y,oe,fe,ge){const Ee=[];for(let ke=0,Ge=oe.length;ke<Ge;ke++){const Ke=lp(Y,oe[ke]*ge,ke<Ge-1?oe[ke+1]*ge:Y.length,ge,!1);Ke===Ke.next&&(Ke.steiner=!0),Ee.push(mp(Ke))}Ee.sort(fp);for(let ke=0;ke<Ee.length;ke++)fe=Ld(Ee[ke],fe);return fe}(n,t,_,r)),n.length>80*r){E=1/0,P=1/0;let Y=-1/0,oe=-1/0;for(let fe=r;fe<f;fe+=r){const ge=n[fe],Ee=n[fe+1];ge<E&&(E=ge),Ee<P&&(P=Ee),ge>Y&&(Y=ge),Ee>oe&&(oe=Ee)}B=Math.max(Y-E,oe-P),B=B!==0?32767/B:0}return Di(_,b,r,E,P,B,0),b}function lp(n,t,r,l,f){let _;if(f===function(b,E,P,B){let Y=0;for(let oe=E,fe=P-B;oe<P;oe+=B)Y+=(b[fe]-b[oe])*(b[oe+1]+b[fe+1]),fe=oe;return Y}(n,t,r,l)>0)for(let b=t;b<r;b+=l)_=Bd(b/l|0,n[b],n[b+1],_);else for(let b=r-l;b>=t;b-=l)_=Bd(b/l|0,n[b],n[b+1],_);return _&&rh(_,_.next)&&(nu(_),_=_.next),_}function Ci(n,t){if(!n)return n;t||(t=n);let r,l=n;do if(r=!1,l.steiner||!rh(l,l.next)&&Zr(l.prev,l,l.next)!==0)l=l.next;else{if(nu(l),l=t=l.prev,l===l.next)break;r=!0}while(r||l!==t);return t}function Di(n,t,r,l,f,_,b){if(!n)return;!b&&_&&function(P,B,Y,oe){let fe=P;do fe.z===0&&(fe.z=nh(fe.x,fe.y,B,Y,oe)),fe.prevZ=fe.prev,fe.nextZ=fe.next,fe=fe.next;while(fe!==P);fe.prevZ.nextZ=null,fe.prevZ=null,function(ge){let Ee,ke=1;do{let Ge,Ke=ge;ge=null;let dt=null;for(Ee=0;Ke;){Ee++;let it=Ke,ht=0;for(let Ft=0;Ft<ke&&(ht++,it=it.nextZ,it);Ft++);let St=ke;for(;ht>0||St>0&&it;)ht!==0&&(St===0||!it||Ke.z<=it.z)?(Ge=Ke,Ke=Ke.nextZ,ht--):(Ge=it,it=it.nextZ,St--),dt?dt.nextZ=Ge:ge=Ge,Ge.prevZ=dt,dt=Ge;Ke=it}dt.nextZ=null,ke*=2}while(Ee>1)}(fe)}(n,l,f,_);let E=n;for(;n.prev!==n.next;){const P=n.prev,B=n.next;if(_?cp(n,l,f,_):up(n))t.push(P.i,n.i,B.i),nu(n),n=B.next,E=B.next;else if((n=B)===E){b?b===1?Di(n=hp(Ci(n),t),t,r,l,f,_,2):b===2&&dp(n,t,r,l,f,_):Di(Ci(n),t,r,l,f,_,1);break}}}function up(n){const t=n.prev,r=n,l=n.next;if(Zr(t,r,l)>=0)return!1;const f=t.x,_=r.x,b=l.x,E=t.y,P=r.y,B=l.y,Y=f<_?f<b?f:b:_<b?_:b,oe=E<P?E<B?E:B:P<B?P:B,fe=f>_?f>b?f:b:_>b?_:b,ge=E>P?E>B?E:B:P>B?P:B;let Ee=l.next;for(;Ee!==t;){if(Ee.x>=Y&&Ee.x<=fe&&Ee.y>=oe&&Ee.y<=ge&&Vu(f,E,_,P,b,B,Ee.x,Ee.y)&&Zr(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function cp(n,t,r,l){const f=n.prev,_=n,b=n.next;if(Zr(f,_,b)>=0)return!1;const E=f.x,P=_.x,B=b.x,Y=f.y,oe=_.y,fe=b.y,ge=E<P?E<B?E:B:P<B?P:B,Ee=Y<oe?Y<fe?Y:fe:oe<fe?oe:fe,ke=E>P?E>B?E:B:P>B?P:B,Ge=Y>oe?Y>fe?Y:fe:oe>fe?oe:fe,Ke=nh(ge,Ee,t,r,l),dt=nh(ke,Ge,t,r,l);let it=n.prevZ,ht=n.nextZ;for(;it&&it.z>=Ke&&ht&&ht.z<=dt;){if(it.x>=ge&&it.x<=ke&&it.y>=Ee&&it.y<=Ge&&it!==f&&it!==b&&Vu(E,Y,P,oe,B,fe,it.x,it.y)&&Zr(it.prev,it,it.next)>=0||(it=it.prevZ,ht.x>=ge&&ht.x<=ke&&ht.y>=Ee&&ht.y<=Ge&&ht!==f&&ht!==b&&Vu(E,Y,P,oe,B,fe,ht.x,ht.y)&&Zr(ht.prev,ht,ht.next)>=0))return!1;ht=ht.nextZ}for(;it&&it.z>=Ke;){if(it.x>=ge&&it.x<=ke&&it.y>=Ee&&it.y<=Ge&&it!==f&&it!==b&&Vu(E,Y,P,oe,B,fe,it.x,it.y)&&Zr(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;ht&&ht.z<=dt;){if(ht.x>=ge&&ht.x<=ke&&ht.y>=Ee&&ht.y<=Ge&&ht!==f&&ht!==b&&Vu(E,Y,P,oe,B,fe,ht.x,ht.y)&&Zr(ht.prev,ht,ht.next)>=0)return!1;ht=ht.nextZ}return!0}function hp(n,t){let r=n;do{const l=r.prev,f=r.next.next;!rh(l,f)&&Zh(l,r,r.next,f)&&vc(l,f)&&vc(f,l)&&(t.push(l.i,r.i,f.i),nu(r),nu(r.next),r=n=f),r=r.next}while(r!==n);return Ci(r)}function dp(n,t,r,l,f,_){let b=n;do{let E=b.next.next;for(;E!==b.prev;){if(b.i!==E.i&&Dd(b,E)){let P=qh(b,E);return b=Ci(b,b.next),P=Ci(P,P.next),Di(b,t,r,l,f,_,0),void Di(P,t,r,l,f,_,0)}E=E.next}b=b.next}while(b!==n)}function fp(n,t){return n.x-t.x}function Ld(n,t){const r=function(f,_){let b=_;const E=f.x,P=f.y;let B,Y=-1/0;do{if(P<=b.y&&P>=b.next.y&&b.next.y!==b.y){const ke=b.x+(P-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(ke<=E&&ke>Y&&(Y=ke,B=b.x<b.next.x?b:b.next,ke===E))return B}b=b.next}while(b!==_);if(!B)return null;const oe=B,fe=B.x,ge=B.y;let Ee=1/0;b=B;do{if(E>=b.x&&b.x>=fe&&E!==b.x&&Vu(P<ge?E:Y,P,fe,ge,P<ge?Y:E,P,b.x,b.y)){const ke=Math.abs(P-b.y)/(E-b.x);vc(b,f)&&(ke<Ee||ke===Ee&&(b.x>B.x||b.x===B.x&&pp(B,b)))&&(B=b,Ee=ke)}b=b.next}while(b!==oe);return B}(n,t);if(!r)return t;const l=qh(r,n);return Ci(l,l.next),Ci(r,r.next)}function pp(n,t){return Zr(n.prev,n,t.prev)<0&&Zr(t.next,n,n.next)<0}function nh(n,t,r,l,f){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-l)*f|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function mp(n){let t=n,r=n;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==n);return r}function Vu(n,t,r,l,f,_,b,E){return(f-b)*(t-E)>=(n-b)*(_-E)&&(n-b)*(l-E)>=(r-b)*(t-E)&&(r-b)*(_-E)>=(f-b)*(l-E)}function Dd(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function(r,l){let f=r;do{if(f.i!==r.i&&f.next.i!==r.i&&f.i!==l.i&&f.next.i!==l.i&&Zh(f,f.next,r,l))return!0;f=f.next}while(f!==r);return!1}(n,t)&&(vc(n,t)&&vc(t,n)&&function(r,l){let f=r,_=!1;const b=(r.x+l.x)/2,E=(r.y+l.y)/2;do f.y>E!=f.next.y>E&&f.next.y!==f.y&&b<(f.next.x-f.x)*(E-f.y)/(f.next.y-f.y)+f.x&&(_=!_),f=f.next;while(f!==r);return _}(n,t)&&(Zr(n.prev,n,t.prev)||Zr(n,t.prev,t))||rh(n,t)&&Zr(n.prev,n,n.next)>0&&Zr(t.prev,t,t.next)>0)}function Zr(n,t,r){return(t.y-n.y)*(r.x-t.x)-(t.x-n.x)*(r.y-t.y)}function rh(n,t){return n.x===t.x&&n.y===t.y}function Zh(n,t,r,l){const f=Wh(Zr(n,t,r)),_=Wh(Zr(n,t,l)),b=Wh(Zr(r,l,n)),E=Wh(Zr(r,l,t));return f!==_&&b!==E||!(f!==0||!$u(n,r,t))||!(_!==0||!$u(n,l,t))||!(b!==0||!$u(r,n,l))||!(E!==0||!$u(r,t,l))}function $u(n,t,r){return t.x<=Math.max(n.x,r.x)&&t.x>=Math.min(n.x,r.x)&&t.y<=Math.max(n.y,r.y)&&t.y>=Math.min(n.y,r.y)}function Wh(n){return n>0?1:n<0?-1:0}function vc(n,t){return Zr(n.prev,n,n.next)<0?Zr(n,t,n.next)>=0&&Zr(n,n.prev,t)>=0:Zr(n,t,n.prev)<0||Zr(n,n.next,t)<0}function qh(n,t){const r=pa(n.i,n.x,n.y),l=pa(t.i,t.x,t.y),f=n.next,_=t.prev;return n.next=t,t.prev=n,r.next=f,f.prev=r,l.next=r,r.prev=l,_.next=l,l.prev=_,l}function Bd(n,t,r,l){const f=pa(n,t,r);return l?(f.next=l.next,f.prev=l,l.next.prev=f,l.next=f):(f.prev=f,f.next=f),f}function nu(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function pa(n,t,r){return{i:n,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Nd(n,t,r){const l=r.patternDependencies;let f=!1;for(const _ of t){const b=_.paint.get(`${n}-pattern`);b.isConstant()||(f=!0);const E=b.constantOr(null);E&&(f=!0,l[E.to]=!0,l[E.from]=!0)}return f}function Xh(n,t,r,l,f){const _=f.patternDependencies;for(const b of t){const E=b.paint.get(`${n}-pattern`).value;if(E.kind!=="constant"){let P=E.evaluate({zoom:l-1},r,{},f.availableImages),B=E.evaluate({zoom:l},r,{},f.availableImages),Y=E.evaluate({zoom:l+1},r,{},f.availableImages);P=P&&P.name?P.name:P,B=B&&B.name?B.name:B,Y=Y&&Y.name?Y.name:Y,_[P]=!0,_[B]=!0,_[Y]=!0,r.patterns[b.id]={min:P,mid:B,max:Y}}}return r}class ih{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ei,this.indexArray=new qo,this.indexArray2=new Ti,this.programConfigurations=new fa(t.layers,t.zoom),this.segments=new Kn,this.segments2=new Kn,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,l){this.hasPattern=Nd("fill",this.layers,r);const f=this.layers[0].layout.get("fill-sort-key"),_=!f.isConstant(),b=[];for(const{feature:E,id:P,index:B,sourceLayerIndex:Y}of t){const oe=this.layers[0]._featureFilter.needGeometry,fe=Wi(E,oe);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),fe,l))continue;const ge=_?f.evaluate(fe,{},l,r.availableImages):void 0,Ee={id:P,properties:E.properties,type:E.type,sourceLayerIndex:Y,index:B,geometry:oe?fe.geometry:wo(E),patterns:{},sortKey:ge};b.push(Ee)}_&&b.sort((E,P)=>E.sortKey-P.sortKey);for(const E of b){const{geometry:P,index:B,sourceLayerIndex:Y}=E;if(this.hasPattern){const oe=Xh("fill",this.layers,E,this.zoom,r);this.patternFeatures.push(oe)}else this.addFeature(E,P,B,l,{});r.featureIndex.insert(t[B].feature,P,B,Y,this.index)}}update(t,r,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,l)}addFeatures(t,r,l){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,r,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ap),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,r,l,f,_){for(const b of cs(r,500)){let E=0;for(const ge of b)E+=ge.length;const P=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),B=P.vertexLength,Y=[],oe=[];for(const ge of b){if(ge.length===0)continue;ge!==b[0]&&oe.push(Y.length/2);const Ee=this.segments2.prepareSegment(ge.length,this.layoutVertexArray,this.indexArray2),ke=Ee.vertexLength;this.layoutVertexArray.emplaceBack(ge[0].x,ge[0].y),this.indexArray2.emplaceBack(ke+ge.length-1,ke),Y.push(ge[0].x),Y.push(ge[0].y);for(let Ge=1;Ge<ge.length;Ge++)this.layoutVertexArray.emplaceBack(ge[Ge].x,ge[Ge].y),this.indexArray2.emplaceBack(ke+Ge-1,ke+Ge),Y.push(ge[Ge].x),Y.push(ge[Ge].y);Ee.vertexLength+=ge.length,Ee.primitiveLength+=ge.length}const fe=jd(Y,oe);for(let ge=0;ge<fe.length;ge+=3)this.indexArray.emplaceBack(B+fe[ge],B+fe[ge+1],B+fe[ge+2]);P.vertexLength+=E,P.primitiveLength+=fe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,_,f)}}let Ud,Vd;on("FillBucket",ih,{omit:["layers","patternFeatures"]});var oh={get paint(){return Vd=Vd||new y({"fill-antialias":new sn(at.paint_fill["fill-antialias"]),"fill-opacity":new En(at.paint_fill["fill-opacity"]),"fill-color":new En(at.paint_fill["fill-color"]),"fill-outline-color":new En(at.paint_fill["fill-outline-color"]),"fill-translate":new sn(at.paint_fill["fill-translate"]),"fill-translate-anchor":new sn(at.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jl(at.paint_fill["fill-pattern"])})},get layout(){return Ud=Ud||new y({"fill-sort-key":new En(at.layout_fill["fill-sort-key"])})}};class bo extends o{constructor(t){super(t,oh)}recalculate(t,r){super.recalculate(t,r);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new ih(t)}queryRadius(){return Bu(this.paint.get("fill-translate"))}queryIntersectsFeature(t,r,l,f,_,b,E){return Pd(Yc(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,E),f)}isTileClipped(){return!0}}const Dm=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Bm=I([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Kh}=Dm;var si={},Nm=R,gn=ma;function ma(n,t,r,l,f){this.properties={},this.extent=r,this.type=0,this._pbf=n,this._geometry=-1,this._keys=l,this._values=f,n.readFields($d,this,t)}function $d(n,t,r){n==1?t.id=r.readVarint():n==2?function(l,f){for(var _=l.readVarint()+l.pos;l.pos<_;){var b=f._keys[l.readVarint()],E=f._values[l.readVarint()];f.properties[b]=E}}(r,t):n==3?t.type=r.readVarint():n==4&&(t._geometry=r.pos)}function gp(n){for(var t,r,l=0,f=0,_=n.length,b=_-1;f<_;b=f++)l+=((r=n[b]).x-(t=n[f]).x)*(t.y+r.y);return l}ma.types=["Unknown","Point","LineString","Polygon"],ma.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var t,r=n.readVarint()+n.pos,l=1,f=0,_=0,b=0,E=[];n.pos<r;){if(f<=0){var P=n.readVarint();l=7&P,f=P>>3}if(f--,l===1||l===2)_+=n.readSVarint(),b+=n.readSVarint(),l===1&&(t&&E.push(t),t=[]),t.push(new Nm(_,b));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&E.push(t),E},ma.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var t=n.readVarint()+n.pos,r=1,l=0,f=0,_=0,b=1/0,E=-1/0,P=1/0,B=-1/0;n.pos<t;){if(l<=0){var Y=n.readVarint();r=7&Y,l=Y>>3}if(l--,r===1||r===2)(f+=n.readSVarint())<b&&(b=f),f>E&&(E=f),(_+=n.readSVarint())<P&&(P=_),_>B&&(B=_);else if(r!==7)throw new Error("unknown command "+r)}return[b,P,E,B]},ma.prototype.toGeoJSON=function(n,t,r){var l,f,_=this.extent*Math.pow(2,r),b=this.extent*n,E=this.extent*t,P=this.loadGeometry(),B=ma.types[this.type];function Y(ge){for(var Ee=0;Ee<ge.length;Ee++){var ke=ge[Ee];ge[Ee]=[360*(ke.x+b)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ke.y+E)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(l=0;l<P.length;l++)oe[l]=P[l][0];Y(P=oe);break;case 2:for(l=0;l<P.length;l++)Y(P[l]);break;case 3:for(P=function(ge){var Ee=ge.length;if(Ee<=1)return[ge];for(var ke,Ge,Ke=[],dt=0;dt<Ee;dt++){var it=gp(ge[dt]);it!==0&&(Ge===void 0&&(Ge=it<0),Ge===it<0?(ke&&Ke.push(ke),ke=[ge[dt]]):ke.push(ge[dt]))}return ke&&Ke.push(ke),Ke}(P),l=0;l<P.length;l++)for(f=0;f<P[l].length;f++)Y(P[l][f])}P.length===1?P=P[0]:B="Multi"+B;var fe={type:"Feature",geometry:{type:B,coordinates:P},properties:this.properties};return"id"in this&&(fe.id=this.id),fe};var Um=gn,_c=sh;function sh(n,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(Gd,this,t),this.length=this._features.length}function Gd(n,t,r){n===15?t.version=r.readVarint():n===1?t.name=r.readString():n===5?t.extent=r.readVarint():n===2?t._features.push(r.pos):n===3?t._keys.push(r.readString()):n===4&&t._values.push(function(l){for(var f=null,_=l.readVarint()+l.pos;l.pos<_;){var b=l.readVarint()>>3;f=b===1?l.readString():b===2?l.readFloat():b===3?l.readDouble():b===4?l.readVarint64():b===5?l.readVarint():b===6?l.readSVarint():b===7?l.readBoolean():null}return f}(r))}sh.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var t=this._pbf.readVarint()+this._pbf.pos;return new Um(this._pbf,t,this.extent,this._keys,this._values)};var yp=_c;function vp(n,t,r){if(n===3){var l=new yp(r,r.readVarint()+r.pos);l.length&&(t[l.name]=l)}}si.VectorTile=function(n,t){this.layers=n.readFields(vp,{},t)},si.VectorTileFeature=gn,si.VectorTileLayer=_c;const _p=si.VectorTileFeature.types,ah=Math.pow(2,13);function Gu(n,t,r,l,f,_,b,E){n.emplaceBack(t,r,2*Math.floor(l*ah)+b,f*ah*2,_*ah*2,Math.round(E))}class Bi{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Lo,this.centroidVertexArray=new Si,this.indexArray=new qo,this.programConfigurations=new fa(t.layers,t.zoom),this.segments=new Kn,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,l){this.features=[],this.hasPattern=Nd("fill-extrusion",this.layers,r);for(const{feature:f,id:_,index:b,sourceLayerIndex:E}of t){const P=this.layers[0]._featureFilter.needGeometry,B=Wi(f,P);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),B,l))continue;const Y={id:_,sourceLayerIndex:E,index:b,geometry:P?B.geometry:wo(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Xh("fill-extrusion",this.layers,Y,this.zoom,r)):this.addFeature(Y,Y.geometry,b,l,{}),r.featureIndex.insert(f,Y.geometry,b,E,this.index,!0)}}addFeatures(t,r,l){for(const f of this.features){const{geometry:_}=f;this.addFeature(f,_,f.index,r,l)}}update(t,r,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Kh),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Bm.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,r,l,f,_){for(const b of cs(r,500)){const E={x:0,y:0,vertexCount:0};let P=0;for(const Ee of b)P+=Ee.length;let B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ee of b){if(Ee.length===0||ru(Ee))continue;let ke=0;for(let Ge=0;Ge<Ee.length;Ge++){const Ke=Ee[Ge];if(Ge>=1){const dt=Ee[Ge-1];if(!ga(Ke,dt)){B.vertexLength+4>Kn.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const it=Ke.sub(dt)._perp()._unit(),ht=dt.dist(Ke);ke+ht>32768&&(ke=0),Gu(this.layoutVertexArray,Ke.x,Ke.y,it.x,it.y,0,0,ke),Gu(this.layoutVertexArray,Ke.x,Ke.y,it.x,it.y,0,1,ke),E.x+=2*Ke.x,E.y+=2*Ke.y,E.vertexCount+=2,ke+=ht,Gu(this.layoutVertexArray,dt.x,dt.y,it.x,it.y,0,0,ke),Gu(this.layoutVertexArray,dt.x,dt.y,it.x,it.y,0,1,ke),E.x+=2*dt.x,E.y+=2*dt.y,E.vertexCount+=2;const St=B.vertexLength;this.indexArray.emplaceBack(St,St+2,St+1),this.indexArray.emplaceBack(St+1,St+2,St+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+P>Kn.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),_p[t.type]!=="Polygon")continue;const Y=[],oe=[],fe=B.vertexLength;for(const Ee of b)if(Ee.length!==0){Ee!==b[0]&&oe.push(Y.length/2);for(let ke=0;ke<Ee.length;ke++){const Ge=Ee[ke];Gu(this.layoutVertexArray,Ge.x,Ge.y,0,0,1,1,0),E.x+=Ge.x,E.y+=Ge.y,E.vertexCount+=1,Y.push(Ge.x),Y.push(Ge.y)}}const ge=jd(Y,oe);for(let Ee=0;Ee<ge.length;Ee+=3)this.indexArray.emplaceBack(fe+ge[Ee],fe+ge[Ee+2],fe+ge[Ee+1]);B.primitiveLength+=ge.length/3,B.vertexLength+=P;for(let Ee=0;Ee<E.vertexCount;Ee++){const ke=Math.floor(E.x/E.vertexCount),Ge=Math.floor(E.y/E.vertexCount);this.centroidVertexArray.emplaceBack(ke,Ge)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,_,f)}}function ga(n,t){return n.x===t.x&&(n.x<0||n.x>ri)||n.y===t.y&&(n.y<0||n.y>ri)}function ru(n){return n.every(t=>t.x<0)||n.every(t=>t.x>ri)||n.every(t=>t.y<0)||n.every(t=>t.y>ri)}let Hd;on("FillExtrusionBucket",Bi,{omit:["layers","features"]});var xp={get paint(){return Hd=Hd||new y({"fill-extrusion-opacity":new sn(at["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new En(at["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sn(at["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sn(at["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jl(at["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new En(at["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new En(at["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sn(at["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ya extends o{constructor(t){super(t,xp)}createBucket(t){return new Bi(t)}queryRadius(){return Bu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,r,l,f,_,b,E,P){const B=Yc(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,E),Y=this.paint.get("fill-extrusion-height").evaluate(r,l),oe=this.paint.get("fill-extrusion-base").evaluate(r,l),fe=function(Ee,ke,Ge,Ke){const dt=[];for(const it of Ee){const ht=[it.x,it.y,0,1];Gh(ht,ht,ke),dt.push(new C(ht[0]/ht[3],ht[1]/ht[3]))}return dt}(B,P),ge=function(Ee,ke,Ge,Ke){const dt=[],it=[],ht=Ke[8]*ke,St=Ke[9]*ke,Ft=Ke[10]*ke,rn=Ke[11]*ke,An=Ke[8]*Ge,nn=Ke[9]*Ge,Jt=Ke[10]*Ge,yn=Ke[11]*Ge;for(const fn of Ee){const ln=[],Ct=[];for(const xn of fn){const mn=xn.x,Bn=xn.y,Fr=Ke[0]*mn+Ke[4]*Bn+Ke[12],Mr=Ke[1]*mn+Ke[5]*Bn+Ke[13],Ki=Ke[2]*mn+Ke[6]*Bn+Ke[14],Xa=Ke[3]*mn+Ke[7]*Bn+Ke[15],Eo=Ki+Ft,Yi=Xa+rn,Jo=Fr+An,Qo=Mr+nn,es=Ki+Jt,mi=Xa+yn,Ji=new C((Fr+ht)/Yi,(Mr+St)/Yi);Ji.z=Eo/Yi,ln.push(Ji);const Bo=new C(Jo/mi,Qo/mi);Bo.z=es/mi,Ct.push(Bo)}dt.push(ln),it.push(Ct)}return[dt,it]}(f,oe,Y,P);return function(Ee,ke,Ge){let Ke=1/0;Pd(Ge,ke)&&(Ke=va(Ge,ke[0]));for(let dt=0;dt<ke.length;dt++){const it=ke[dt],ht=Ee[dt];for(let St=0;St<it.length-1;St++){const Ft=it[St],rn=[Ft,it[St+1],ht[St+1],ht[St],Ft];Nh(Ge,rn)&&(Ke=Math.min(Ke,va(Ge,rn)))}}return Ke!==1/0&&Ke}(ge[0],ge[1],fe)}}function xc(n,t){return n.x*t.x+n.y*t.y}function va(n,t){if(n.length===1){let r=0;const l=t[r++];let f;for(;!f||l.equals(f);)if(f=t[r++],!f)return 1/0;for(;r<t.length;r++){const _=t[r],b=n[0],E=f.sub(l),P=_.sub(l),B=b.sub(l),Y=xc(E,E),oe=xc(E,P),fe=xc(P,P),ge=xc(B,E),Ee=xc(B,P),ke=Y*fe-oe*oe,Ge=(fe*ge-oe*Ee)/ke,Ke=(Y*Ee-oe*ge)/ke,dt=l.z*(1-Ge-Ke)+f.z*Ge+_.z*Ke;if(isFinite(dt))return dt}return 1/0}{let r=1/0;for(const l of t)r=Math.min(r,l.z);return r}}const Vm=I([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:wp}=Vm,bp=I([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Sp}=bp,Ep=si.VectorTileFeature.types,$m=Math.cos(Math.PI/180*37.5),lh=Math.pow(2,14)/.5;class uh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new pl,this.layoutVertexArray2=new ml,this.indexArray=new qo,this.programConfigurations=new fa(t.layers,t.zoom),this.segments=new Kn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,l){this.hasPattern=Nd("line",this.layers,r);const f=this.layers[0].layout.get("line-sort-key"),_=!f.isConstant(),b=[];for(const{feature:E,id:P,index:B,sourceLayerIndex:Y}of t){const oe=this.layers[0]._featureFilter.needGeometry,fe=Wi(E,oe);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),fe,l))continue;const ge=_?f.evaluate(fe,{},l):void 0,Ee={id:P,properties:E.properties,type:E.type,sourceLayerIndex:Y,index:B,geometry:oe?fe.geometry:wo(E),patterns:{},sortKey:ge};b.push(Ee)}_&&b.sort((E,P)=>E.sortKey-P.sortKey);for(const E of b){const{geometry:P,index:B,sourceLayerIndex:Y}=E;if(this.hasPattern){const oe=Xh("line",this.layers,E,this.zoom,r);this.patternFeatures.push(oe)}else this.addFeature(E,P,B,l,{});r.featureIndex.insert(t[B].feature,P,B,Y,this.index)}}update(t,r,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,l)}addFeatures(t,r,l){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,r,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Sp)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wp),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,r,l,f,_){const b=this.layers[0].layout,E=b.get("line-join").evaluate(t,{}),P=b.get("line-cap"),B=b.get("line-miter-limit"),Y=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const oe of r)this.addLine(oe,t,E,P,B,Y);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,_,f)}addLine(t,r,l,f,_,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ke=0;Ke<t.length-1;Ke++)this.totalDistance+=t[Ke].dist(t[Ke+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=Ep[r.type]==="Polygon";let P=t.length;for(;P>=2&&t[P-1].equals(t[P-2]);)P--;let B=0;for(;B<P-1&&t[B].equals(t[B+1]);)B++;if(P<(E?3:2))return;l==="bevel"&&(_=1.05);const Y=this.overscaling<=16?15*ri/(512*this.overscaling):0,oe=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let fe,ge,Ee,ke,Ge;this.e1=this.e2=-1,E&&(fe=t[P-2],Ge=t[B].sub(fe)._unit()._perp());for(let Ke=B;Ke<P;Ke++){if(Ee=Ke===P-1?E?t[B+1]:void 0:t[Ke+1],Ee&&t[Ke].equals(Ee))continue;Ge&&(ke=Ge),fe&&(ge=fe),fe=t[Ke],Ge=Ee?Ee.sub(fe)._unit()._perp():ke,ke=ke||Ge;let dt=ke.add(Ge);dt.x===0&&dt.y===0||dt._unit();const it=ke.x*Ge.x+ke.y*Ge.y,ht=dt.x*Ge.x+dt.y*Ge.y,St=ht!==0?1/ht:1/0,Ft=2*Math.sqrt(2-2*ht),rn=ht<$m&&ge&&Ee,An=ke.x*Ge.y-ke.y*Ge.x>0;if(rn&&Ke>B){const yn=fe.dist(ge);if(yn>2*Y){const fn=fe.sub(fe.sub(ge)._mult(Y/yn)._round());this.updateDistance(ge,fn),this.addCurrentVertex(fn,ke,0,0,oe),ge=fn}}const nn=ge&&Ee;let Jt=nn?l:E?"butt":f;if(nn&&Jt==="round"&&(St<b?Jt="miter":St<=2&&(Jt="fakeround")),Jt==="miter"&&St>_&&(Jt="bevel"),Jt==="bevel"&&(St>2&&(Jt="flipbevel"),St<_&&(Jt="miter")),ge&&this.updateDistance(ge,fe),Jt==="miter")dt._mult(St),this.addCurrentVertex(fe,dt,0,0,oe);else if(Jt==="flipbevel"){if(St>100)dt=Ge.mult(-1);else{const yn=St*ke.add(Ge).mag()/ke.sub(Ge).mag();dt._perp()._mult(yn*(An?-1:1))}this.addCurrentVertex(fe,dt,0,0,oe),this.addCurrentVertex(fe,dt.mult(-1),0,0,oe)}else if(Jt==="bevel"||Jt==="fakeround"){const yn=-Math.sqrt(St*St-1),fn=An?yn:0,ln=An?0:yn;if(ge&&this.addCurrentVertex(fe,ke,fn,ln,oe),Jt==="fakeround"){const Ct=Math.round(180*Ft/Math.PI/20);for(let xn=1;xn<Ct;xn++){let mn=xn/Ct;if(mn!==.5){const Fr=mn-.5;mn+=mn*Fr*(mn-1)*((1.0904+it*(it*(3.55645-1.43519*it)-3.2452))*Fr*Fr+(.848013+it*(.215638*it-1.06021)))}const Bn=Ge.sub(ke)._mult(mn)._add(ke)._unit()._mult(An?-1:1);this.addHalfVertex(fe,Bn.x,Bn.y,!1,An,0,oe)}}Ee&&this.addCurrentVertex(fe,Ge,-fn,-ln,oe)}else if(Jt==="butt")this.addCurrentVertex(fe,dt,0,0,oe);else if(Jt==="square"){const yn=ge?1:-1;this.addCurrentVertex(fe,dt,yn,yn,oe)}else Jt==="round"&&(ge&&(this.addCurrentVertex(fe,ke,0,0,oe),this.addCurrentVertex(fe,ke,1,1,oe,!0)),Ee&&(this.addCurrentVertex(fe,Ge,-1,-1,oe,!0),this.addCurrentVertex(fe,Ge,0,0,oe)));if(rn&&Ke<P-1){const yn=fe.dist(Ee);if(yn>2*Y){const fn=fe.add(Ee.sub(fe)._mult(Y/yn)._round());this.updateDistance(fe,fn),this.addCurrentVertex(fn,Ge,0,0,oe),fe=fn}}}}addCurrentVertex(t,r,l,f,_,b=!1){const E=r.y*f-r.x,P=-r.y-r.x*f;this.addHalfVertex(t,r.x+r.y*l,r.y-r.x*l,b,!1,l,_),this.addHalfVertex(t,E,P,b,!0,-f,_),this.distance>lh/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,r,l,f,_,b))}addHalfVertex({x:t,y:r},l,f,_,b,E,P){const B=.5*(this.lineClips?this.scaledDistance*(lh-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(_?1:0),(r<<1)+(b?1:0),Math.round(63*l)+128,Math.round(63*f)+128,1+(E===0?0:E<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Y=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Y),P.primitiveLength++),b?this.e2=Y:this.e1=Y}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,r){this.distance+=t.dist(r),this.updateScaledDistance()}}let xs,mr;on("LineBucket",uh,{omit:["layers","patternFeatures"]});var Ni={get paint(){return mr=mr||new y({"line-opacity":new En(at.paint_line["line-opacity"]),"line-color":new En(at.paint_line["line-color"]),"line-translate":new sn(at.paint_line["line-translate"]),"line-translate-anchor":new sn(at.paint_line["line-translate-anchor"]),"line-width":new En(at.paint_line["line-width"]),"line-gap-width":new En(at.paint_line["line-gap-width"]),"line-offset":new En(at.paint_line["line-offset"]),"line-blur":new En(at.paint_line["line-blur"]),"line-dasharray":new Fu(at.paint_line["line-dasharray"]),"line-pattern":new Jl(at.paint_line["line-pattern"]),"line-gradient":new Zc(at.paint_line["line-gradient"])})},get layout(){return xs=xs||new y({"line-cap":new sn(at.layout_line["line-cap"]),"line-join":new En(at.layout_line["line-join"]),"line-miter-limit":new sn(at.layout_line["line-miter-limit"]),"line-round-limit":new sn(at.layout_line["line-round-limit"]),"line-sort-key":new En(at.layout_line["line-sort-key"])})}};class Pi extends En{possiblyEvaluate(t,r){return r=new tr(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(t,r)}evaluate(t,r,l,f){return r=M({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(t,r,l,f)}}let Ai;class ws extends o{constructor(t){super(t,Ni),this.gradientVersion=0,Ai||(Ai=new Pi(Ni.paint.properties["line-width"].specification),Ai.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!function(l){return l._styleExpression!==void 0}(r)&&r._styleExpression.expression instanceof zs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,r){super.recalculate(t,r),this.paint._values["line-floorwidth"]=Ai.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new uh(t)}queryRadius(t){const r=t,l=Hu(tu("line-width",this,r),tu("line-gap-width",this,r)),f=tu("line-offset",this,r);return l/2+Math.abs(f)+Bu(this.paint.get("line-translate"))}queryIntersectsFeature(t,r,l,f,_,b,E){const P=Yc(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,E),B=E/2*Hu(this.paint.get("line-width").evaluate(r,l),this.paint.get("line-gap-width").evaluate(r,l)),Y=this.paint.get("line-offset").evaluate(r,l);return Y&&(f=function(oe,fe){const ge=[];for(let Ee=0;Ee<oe.length;Ee++){const ke=oe[Ee],Ge=[];for(let Ke=0;Ke<ke.length;Ke++){const dt=ke[Ke-1],it=ke[Ke],ht=ke[Ke+1],St=Ke===0?new C(0,0):it.sub(dt)._unit()._perp(),Ft=Ke===ke.length-1?new C(0,0):ht.sub(it)._unit()._perp(),rn=St._add(Ft)._unit(),An=rn.x*Ft.x+rn.y*Ft.y;An!==0&&rn._mult(1/An),Ge.push(rn._mult(fe)._add(it))}ge.push(Ge)}return ge}(f,Y*E)),function(oe,fe,ge){for(let Ee=0;Ee<fe.length;Ee++){const ke=fe[Ee];if(oe.length>=3){for(let Ge=0;Ge<ke.length;Ge++)if(Ga(oe,ke[Ge]))return!0}if(qf(oe,ke,ge))return!0}return!1}(P,f,B)}isTileClipped(){return!0}}function Hu(n,t){return t>0?t+2*n:n}const Ui=I([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ch=I([{name:"a_projected_pos",components:3,type:"Float32"}],4);I([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Zu=I([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);I([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hh=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Zd=I([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function dh(n,t,r){return n.sections.forEach(l=>{l.text=function(f,_,b){const E=_.layout.get("text-transform").evaluate(b,{});return E==="uppercase"?f=f.toLocaleUpperCase():E==="lowercase"&&(f=f.toLocaleLowerCase()),Sr.applyArabicShaping&&(f=Sr.applyArabicShaping(f)),f}(l.text,t,r)}),n}I([{name:"triangle",components:3,type:"Uint16"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),I([{type:"Float32",name:"offsetX"}]),I([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),I([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const qi={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ai=24,Wu=yr,Ha=function(n,t,r,l,f){var _,b,E=8*f-l-1,P=(1<<E)-1,B=P>>1,Y=-7,oe=f-1,fe=-1,ge=n[t+oe];for(oe+=fe,_=ge&(1<<-Y)-1,ge>>=-Y,Y+=E;Y>0;_=256*_+n[t+oe],oe+=fe,Y-=8);for(b=_&(1<<-Y)-1,_>>=-Y,Y+=l;Y>0;b=256*b+n[t+oe],oe+=fe,Y-=8);if(_===0)_=1-B;else{if(_===P)return b?NaN:1/0*(ge?-1:1);b+=Math.pow(2,l),_-=B}return(ge?-1:1)*b*Math.pow(2,_-l)},fh=function(n,t,r,l,f,_){var b,E,P,B=8*_-f-1,Y=(1<<B)-1,oe=Y>>1,fe=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,ge=0,Ee=1,ke=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(E=isNaN(t)?1:0,b=Y):(b=Math.floor(Math.log(t)/Math.LN2),t*(P=Math.pow(2,-b))<1&&(b--,P*=2),(t+=b+oe>=1?fe/P:fe*Math.pow(2,1-oe))*P>=2&&(b++,P/=2),b+oe>=Y?(E=0,b=Y):b+oe>=1?(E=(t*P-1)*Math.pow(2,f),b+=oe):(E=t*Math.pow(2,oe-1)*Math.pow(2,f),b=0));f>=8;n[r+ge]=255&E,ge+=Ee,E/=256,f-=8);for(b=b<<f|E,B+=f;B>0;n[r+ge]=255&b,ge+=Ee,b/=256,B-=8);n[r+ge-Ee]|=128*ke};function yr(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}yr.Varint=0,yr.Fixed64=1,yr.Bytes=2,yr.Fixed32=5;var Za=4294967296,ph=1/Za,vl=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Vs(n){return n.type===yr.Bytes?n.readVarint()+n.pos:n.pos+1}function Wa(n,t,r){return r?4294967296*t+(n>>>0):4294967296*(t>>>0)+(n>>>0)}function Yh(n,t,r){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(l);for(var f=r.pos-1;f>=n;f--)r.buf[f+l]=r.buf[f]}function Jh(n,t){for(var r=0;r<n.length;r++)t.writeVarint(n[r])}function Qh(n,t){for(var r=0;r<n.length;r++)t.writeSVarint(n[r])}function Do(n,t){for(var r=0;r<n.length;r++)t.writeFloat(n[r])}function iu(n,t){for(var r=0;r<n.length;r++)t.writeDouble(n[r])}function _a(n,t){for(var r=0;r<n.length;r++)t.writeBoolean(n[r])}function Ko(n,t){for(var r=0;r<n.length;r++)t.writeFixed32(n[r])}function Tp(n,t){for(var r=0;r<n.length;r++)t.writeSFixed32(n[r])}function Wd(n,t){for(var r=0;r<n.length;r++)t.writeFixed64(n[r])}function qd(n,t){for(var r=0;r<n.length;r++)t.writeSFixed64(n[r])}function ed(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+16777216*n[t+3]}function bs(n,t,r){n[r]=t,n[r+1]=t>>>8,n[r+2]=t>>>16,n[r+3]=t>>>24}function Xd(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+(n[t+3]<<24)}yr.prototype={destroy:function(){this.buf=null},readFields:function(n,t,r){for(r=r||this.length;this.pos<r;){var l=this.readVarint(),f=l>>3,_=this.pos;this.type=7&l,n(f,t,this),this.pos===_&&this.skip(l)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=ed(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Xd(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=ed(this.buf,this.pos)+ed(this.buf,this.pos+4)*Za;return this.pos+=8,n},readSFixed64:function(){var n=ed(this.buf,this.pos)+Xd(this.buf,this.pos+4)*Za;return this.pos+=8,n},readFloat:function(){var n=Ha(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Ha(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var t,r,l=this.buf;return t=127&(r=l[this.pos++]),r<128?t:(t|=(127&(r=l[this.pos++]))<<7,r<128?t:(t|=(127&(r=l[this.pos++]))<<14,r<128?t:(t|=(127&(r=l[this.pos++]))<<21,r<128?t:function(f,_,b){var E,P,B=b.buf;if(E=(112&(P=B[b.pos++]))>>4,P<128||(E|=(127&(P=B[b.pos++]))<<3,P<128)||(E|=(127&(P=B[b.pos++]))<<10,P<128)||(E|=(127&(P=B[b.pos++]))<<17,P<128)||(E|=(127&(P=B[b.pos++]))<<24,P<128)||(E|=(1&(P=B[b.pos++]))<<31,P<128))return Wa(f,E,_);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=l[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,t=this.pos;return this.pos=n,n-t>=12&&vl?function(r,l,f){return vl.decode(r.subarray(l,f))}(this.buf,t,n):function(r,l,f){for(var _="",b=l;b<f;){var E,P,B,Y=r[b],oe=null,fe=Y>239?4:Y>223?3:Y>191?2:1;if(b+fe>f)break;fe===1?Y<128&&(oe=Y):fe===2?(192&(E=r[b+1]))==128&&(oe=(31&Y)<<6|63&E)<=127&&(oe=null):fe===3?(P=r[b+2],(192&(E=r[b+1]))==128&&(192&P)==128&&((oe=(15&Y)<<12|(63&E)<<6|63&P)<=2047||oe>=55296&&oe<=57343)&&(oe=null)):fe===4&&(P=r[b+2],B=r[b+3],(192&(E=r[b+1]))==128&&(192&P)==128&&(192&B)==128&&((oe=(15&Y)<<18|(63&E)<<12|(63&P)<<6|63&B)<=65535||oe>=1114112)&&(oe=null)),oe===null?(oe=65533,fe=1):oe>65535&&(oe-=65536,_+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),_+=String.fromCharCode(oe),b+=fe}return _}(this.buf,t,n)},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,n);return this.pos=n,t},readPackedVarint:function(n,t){if(this.type!==yr.Bytes)return n.push(this.readVarint(t));var r=Vs(this);for(n=n||[];this.pos<r;)n.push(this.readVarint(t));return n},readPackedSVarint:function(n){if(this.type!==yr.Bytes)return n.push(this.readSVarint());var t=Vs(this);for(n=n||[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==yr.Bytes)return n.push(this.readBoolean());var t=Vs(this);for(n=n||[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==yr.Bytes)return n.push(this.readFloat());var t=Vs(this);for(n=n||[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==yr.Bytes)return n.push(this.readDouble());var t=Vs(this);for(n=n||[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==yr.Bytes)return n.push(this.readFixed32());var t=Vs(this);for(n=n||[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==yr.Bytes)return n.push(this.readSFixed32());var t=Vs(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==yr.Bytes)return n.push(this.readFixed64());var t=Vs(this);for(n=n||[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==yr.Bytes)return n.push(this.readSFixed64());var t=Vs(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=7&n;if(t===yr.Varint)for(;this.buf[this.pos++]>127;);else if(t===yr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===yr.Fixed32)this.pos+=4;else{if(t!==yr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var t=this.length||16;t<this.pos+n;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),bs(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),bs(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),bs(this.buf,-1&n,this.pos),bs(this.buf,Math.floor(n*ph),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),bs(this.buf,-1&n,this.pos),bs(this.buf,Math.floor(n*ph),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(t,r){var l,f;if(t>=0?(l=t%4294967296|0,f=t/4294967296|0):(f=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,f=f+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(_,b,E){E.buf[E.pos++]=127&_|128,_>>>=7,E.buf[E.pos++]=127&_|128,_>>>=7,E.buf[E.pos++]=127&_|128,_>>>=7,E.buf[E.pos++]=127&_|128,E.buf[E.pos]=127&(_>>>=7)}(l,0,r),function(_,b){var E=(7&_)<<4;b.buf[b.pos++]|=E|((_>>>=3)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_)))))}(f,r)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var t=this.pos;this.pos=function(l,f,_){for(var b,E,P=0;P<f.length;P++){if((b=f.charCodeAt(P))>55295&&b<57344){if(!E){b>56319||P+1===f.length?(l[_++]=239,l[_++]=191,l[_++]=189):E=b;continue}if(b<56320){l[_++]=239,l[_++]=191,l[_++]=189,E=b;continue}b=E-55296<<10|b-56320|65536,E=null}else E&&(l[_++]=239,l[_++]=191,l[_++]=189,E=null);b<128?l[_++]=b:(b<2048?l[_++]=b>>6|192:(b<65536?l[_++]=b>>12|224:(l[_++]=b>>18|240,l[_++]=b>>12&63|128),l[_++]=b>>6&63|128),l[_++]=63&b|128)}return _}(this.buf,n,this.pos);var r=this.pos-t;r>=128&&Yh(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(n){this.realloc(4),fh(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),fh(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var t=n.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=n[r]},writeRawMessage:function(n,t){this.pos++;var r=this.pos;n(t,this);var l=this.pos-r;l>=128&&Yh(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeMessage:function(n,t,r){this.writeTag(n,yr.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(n,t){t.length&&this.writeMessage(n,Jh,t)},writePackedSVarint:function(n,t){t.length&&this.writeMessage(n,Qh,t)},writePackedBoolean:function(n,t){t.length&&this.writeMessage(n,_a,t)},writePackedFloat:function(n,t){t.length&&this.writeMessage(n,Do,t)},writePackedDouble:function(n,t){t.length&&this.writeMessage(n,iu,t)},writePackedFixed32:function(n,t){t.length&&this.writeMessage(n,Ko,t)},writePackedSFixed32:function(n,t){t.length&&this.writeMessage(n,Tp,t)},writePackedFixed64:function(n,t){t.length&&this.writeMessage(n,Wd,t)},writePackedSFixed64:function(n,t){t.length&&this.writeMessage(n,qd,t)},writeBytesField:function(n,t){this.writeTag(n,yr.Bytes),this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,yr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,yr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,yr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,yr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,yr.Varint),this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,yr.Varint),this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,yr.Bytes),this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,yr.Fixed32),this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,yr.Fixed64),this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,!!t)}};var mh=L(Wu);const _l=3;function Kd(n,t,r){n===1&&r.readMessage(qu,t)}function qu(n,t,r){if(n===3){const{id:l,bitmap:f,width:_,height:b,left:E,top:P,advance:B}=r.readMessage(Ip,{});t.push({id:l,bitmap:new eh({width:_+2*_l,height:b+2*_l},f),metrics:{width:_,height:b,left:E,top:P,advance:B}})}}function Ip(n,t,r){n===1?t.id=r.readVarint():n===2?t.bitmap=r.readBytes():n===3?t.width=r.readVarint():n===4?t.height=r.readVarint():n===5?t.left=r.readSVarint():n===6?t.top=r.readSVarint():n===7&&(t.advance=r.readVarint())}const Yd=_l;function td(n){let t=0,r=0;for(const b of n)t+=b.w*b.h,r=Math.max(r,b.w);n.sort((b,E)=>E.h-b.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let f=0,_=0;for(const b of n)for(let E=l.length-1;E>=0;E--){const P=l[E];if(!(b.w>P.w||b.h>P.h)){if(b.x=P.x,b.y=P.y,_=Math.max(_,b.y+b.h),f=Math.max(f,b.x+b.w),b.w===P.w&&b.h===P.h){const B=l.pop();E<l.length&&(l[E]=B)}else b.h===P.h?(P.x+=b.w,P.w-=b.w):b.w===P.w?(P.y+=b.h,P.h-=b.h):(l.push({x:P.x+b.w,y:P.y,w:P.w-b.w,h:b.h}),P.y+=b.h,P.h-=b.h);break}}return{w:f,h:_,fill:t/(f*_)||0}}const Xi=1;class Jd{constructor(t,{pixelRatio:r,version:l,stretchX:f,stretchY:_,content:b,textFitWidth:E,textFitHeight:P}){this.paddedRect=t,this.pixelRatio=r,this.stretchX=f,this.stretchY=_,this.content=b,this.version=l,this.textFitWidth=E,this.textFitHeight=P}get tl(){return[this.paddedRect.x+Xi,this.paddedRect.y+Xi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Xi,this.paddedRect.y+this.paddedRect.h-Xi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Xi)/this.pixelRatio,(this.paddedRect.h-2*Xi)/this.pixelRatio]}}class Cp{constructor(t,r){const l={},f={};this.haveRenderCallbacks=[];const _=[];this.addImages(t,l,_),this.addImages(r,f,_);const{w:b,h:E}=td(_),P=new _s({width:b||1,height:E||1});for(const B in t){const Y=t[B],oe=l[B].paddedRect;_s.copy(Y.data,P,{x:0,y:0},{x:oe.x+Xi,y:oe.y+Xi},Y.data)}for(const B in r){const Y=r[B],oe=f[B].paddedRect,fe=oe.x+Xi,ge=oe.y+Xi,Ee=Y.data.width,ke=Y.data.height;_s.copy(Y.data,P,{x:0,y:0},{x:fe,y:ge},Y.data),_s.copy(Y.data,P,{x:0,y:ke-1},{x:fe,y:ge-1},{width:Ee,height:1}),_s.copy(Y.data,P,{x:0,y:0},{x:fe,y:ge+ke},{width:Ee,height:1}),_s.copy(Y.data,P,{x:Ee-1,y:0},{x:fe-1,y:ge},{width:1,height:ke}),_s.copy(Y.data,P,{x:0,y:0},{x:fe+Ee,y:ge},{width:1,height:ke})}this.image=P,this.iconPositions=l,this.patternPositions=f}addImages(t,r,l){for(const f in t){const _=t[f],b={x:0,y:0,w:_.data.width+2*Xi,h:_.data.height+2*Xi};l.push(b),r[f]=new Jd(b,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in t.updatedImages)this.patchUpdatedImage(this.iconPositions[l],t.getImage(l),r),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l),r)}patchUpdatedImage(t,r,l){if(!t||!r||t.version===r.version)return;t.version=r.version;const[f,_]=t.tl;l.update(r.data,void 0,{x:f,y:_})}}var xl;on("ImagePosition",Jd),on("ImageAtlas",Cp),w.ah=void 0,(xl=w.ah||(w.ah={}))[xl.none=0]="none",xl[xl.horizontal=1]="horizontal",xl[xl.vertical=2]="vertical",xl[xl.horizontalOnly=3]="horizontalOnly";const wc=-17;class xa{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,r){const l=new xa;return l.scale=t||1,l.fontStack=r,l}static forImage(t){const r=new xa;return r.imageName=t,r}}class bc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,r){const l=new bc;for(let f=0;f<t.sections.length;f++){const _=t.sections[f];_.image?l.addImageSection(_):l.addTextSection(_,r)}return l}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let r="";for(let l=0;l<t.length;l++){const f=t.charCodeAt(l+1)||null,_=t.charCodeAt(l-1)||null;r+=f&&fl(f)&&!qi[t[l+1]]||_&&fl(_)&&!qi[t[l-1]]||!qi[t[l]]?t[l]:qi[t[l]]}return r}(this.text)}trim(){let t=0;for(let l=0;l<this.text.length&&gh[this.text.charCodeAt(l)];l++)t++;let r=this.text.length;for(let l=this.text.length-1;l>=0&&l>=t&&gh[this.text.charCodeAt(l)];l--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)}substring(t,r){const l=new bc;return l.text=this.text.substring(t,r),l.sectionIndex=this.sectionIndex.slice(t,r),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,r)=>Math.max(t,this.sections[r].scale),0)}addTextSection(t,r){this.text+=t.text,this.sections.push(xa.forText(t.scale,t.fontStack||r));const l=this.sections.length-1;for(let f=0;f<t.text.length;++f)this.sectionIndex.push(l)}addImageSection(t){const r=t.image?t.image.name:"";if(r.length===0)return void W("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(xa.forImage(r)),this.sectionIndex.push(this.sections.length-1)):W("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wl(n,t,r,l,f,_,b,E,P,B,Y,oe,fe,ge,Ee){const ke=bc.fromFeature(n,f);let Ge;oe===w.ah.vertical&&ke.verticalizePunctuation();const{processBidirectionalText:Ke,processStyledBidirectionalText:dt}=Sr;if(Ke&&ke.sections.length===1){Ge=[];const St=Ke(ke.toString(),nf(ke,B,_,t,l,ge));for(const Ft of St){const rn=new bc;rn.text=Ft,rn.sections=ke.sections;for(let An=0;An<Ft.length;An++)rn.sectionIndex.push(0);Ge.push(rn)}}else if(dt){Ge=[];const St=dt(ke.text,ke.sectionIndex,nf(ke,B,_,t,l,ge));for(const Ft of St){const rn=new bc;rn.text=Ft[0],rn.sectionIndex=Ft[1],rn.sections=ke.sections,Ge.push(rn)}}else Ge=function(St,Ft){const rn=[],An=St.text;let nn=0;for(const Jt of Ft)rn.push(St.substring(nn,Jt)),nn=Jt;return nn<An.length&&rn.push(St.substring(nn,An.length)),rn}(ke,nf(ke,B,_,t,l,ge));const it=[],ht={positionedLines:it,text:ke.toString(),top:Y[1],bottom:Y[1],left:Y[0],right:Y[0],writingMode:oe,iconsInText:!1,verticalizable:!1};return function(St,Ft,rn,An,nn,Jt,yn,fn,ln,Ct,xn,mn){let Bn=0,Fr=wc,Mr=0,Ki=0;const Xa=fn==="right"?1:fn==="left"?0:.5;let Eo=0;for(const mi of nn){mi.trim();const Ji=mi.getMaxScale(),Bo=(Ji-1)*ai,To={positionedGlyphs:[],lineOffset:0};St.positionedLines[Eo]=To;const ts=To.positionedGlyphs;let Io=0;if(!mi.length()){Fr+=Jt,++Eo;continue}for(let Es=0;Es<mi.length();Es++){const gr=mi.getSection(Es),Dr=mi.getSectionIndex(Es),Vr=mi.getCharCode(Es);let $s=0,li=null,ud=null,au=null,lu=ai;const Ka=!(ln===w.ah.horizontal||!xn&&!zu(Vr)||xn&&(gh[Vr]||(Yi=Vr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Yi)))));if(gr.imageName){const Sa=An[gr.imageName];if(!Sa)continue;au=gr.imageName,St.iconsInText=St.iconsInText||!0,ud=Sa.paddedRect;const uo=Sa.displaySize;gr.scale=gr.scale*ai/mn,li={width:uo[0],height:uo[1],left:Xi,top:-Yd,advance:Ka?uo[1]:uo[0]},$s=Bo+(ai-uo[1]*gr.scale),lu=li.advance;const Xu=Ka?uo[0]*gr.scale-ai*Ji:uo[1]*gr.scale-ai*Ji;Xu>0&&Xu>Io&&(Io=Xu)}else{const Sa=rn[gr.fontStack],uo=Sa&&Sa[Vr];if(uo&&uo.rect)ud=uo.rect,li=uo.metrics;else{const Xu=Ft[gr.fontStack],cf=Xu&&Xu[Vr];if(!cf)continue;li=cf.metrics}$s=(Ji-gr.scale)*ai}Ka?(St.verticalizable=!0,ts.push({glyph:Vr,imageName:au,x:Bn,y:Fr+$s,vertical:Ka,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:Dr,metrics:li,rect:ud}),Bn+=lu*gr.scale+Ct):(ts.push({glyph:Vr,imageName:au,x:Bn,y:Fr+$s,vertical:Ka,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:Dr,metrics:li,rect:ud}),Bn+=li.advance*gr.scale+Ct)}ts.length!==0&&(Mr=Math.max(Bn-Ct,Mr),rf(ts,0,ts.length-1,Xa,Io)),Bn=0;const ba=Jt*Ji+Io;To.lineOffset=Math.max(Io,Bo),Fr+=ba,Ki=Math.max(ba,Ki),++Eo}var Yi;const Jo=Fr-wc,{horizontalAlign:Qo,verticalAlign:es}=Yo(yn);(function(mi,Ji,Bo,To,ts,Io,ba,Es,gr){const Dr=(Ji-Bo)*ts;let Vr=0;Vr=Io!==ba?-Es*To-wc:(-To*gr+.5)*ba;for(const $s of mi)for(const li of $s.positionedGlyphs)li.x+=Dr,li.y+=Vr})(St.positionedLines,Xa,Qo,es,Mr,Ki,Jt,Jo,nn.length),St.top+=-es*Jo,St.bottom=St.top+Jo,St.left+=-Qo*Mr,St.right=St.left+Mr}(ht,t,r,l,Ge,b,E,P,oe,B,fe,Ee),!function(St){for(const Ft of St)if(Ft.positionedGlyphs.length!==0)return!1;return!0}(it)&&ht}const gh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fi={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Gm={40:!0};function Qd(n,t,r,l,f,_){if(t.imageName){const b=l[t.imageName];return b?b.displaySize[0]*t.scale*ai/_+f:0}{const b=r[t.fontStack],E=b&&b[n];return E?E.metrics.advance*t.scale+f:0}}function Pp(n,t,r,l){const f=Math.pow(n-t,2);return l?n<t?f/2:2*f:f+Math.abs(r)*r}function Hm(n,t,r){let l=0;return n===10&&(l-=1e4),r&&(l+=150),n!==40&&n!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function ef(n,t,r,l,f,_){let b=null,E=Pp(t,r,f,_);for(const P of l){const B=Pp(t-P.x,r,f,_)+P.badness;B<=E&&(b=P,E=B)}return{index:n,x:t,priorBreak:b,badness:E}}function tf(n){return n?tf(n.priorBreak).concat(n.index):[]}function nf(n,t,r,l,f,_){if(!n)return[];const b=[],E=function(oe,fe,ge,Ee,ke,Ge){let Ke=0;for(let dt=0;dt<oe.length();dt++){const it=oe.getSection(dt);Ke+=Qd(oe.getCharCode(dt),it,Ee,ke,fe,Ge)}return Ke/Math.max(1,Math.ceil(Ke/ge))}(n,t,r,l,f,_),P=n.text.indexOf("​")>=0;let B=0;for(let oe=0;oe<n.length();oe++){const fe=n.getSection(oe),ge=n.getCharCode(oe);if(gh[ge]||(B+=Qd(ge,fe,l,f,t,_)),oe<n.length()-1){const Ee=!((Y=ge)<11904)&&(!!Yn["CJK Compatibility Forms"](Y)||!!Yn["CJK Compatibility"](Y)||!!Yn["CJK Strokes"](Y)||!!Yn["CJK Symbols and Punctuation"](Y)||!!Yn["Enclosed CJK Letters and Months"](Y)||!!Yn["Halfwidth and Fullwidth Forms"](Y)||!!Yn["Ideographic Description Characters"](Y)||!!Yn["Vertical Forms"](Y)||ku.test(String.fromCodePoint(Y)));(fi[ge]||Ee||fe.imageName||oe!==n.length()-2&&Gm[n.getCharCode(oe+1)])&&b.push(ef(oe+1,B,E,b,Hm(ge,n.getCharCode(oe+1),Ee&&P),!1))}}var Y;return tf(ef(n.length(),B,E,b,0,!0))}function Yo(n){let t=.5,r=.5;switch(n){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function rf(n,t,r,l,f){if(!l&&!f)return;const _=n[r],b=(n[r].x+_.metrics.advance*_.scale)*l;for(let E=t;E<=r;E++)n[E].x-=b,n[E].y+=f}function Zm(n,t,r){const{horizontalAlign:l,verticalAlign:f}=Yo(r),_=t[0]-n.displaySize[0]*l,b=t[1]-n.displaySize[1]*f;return{image:n,top:b,bottom:b+n.displaySize[1],left:_,right:_+n.displaySize[0]}}function bl(n){var t,r;let l=n.left,f=n.top,_=n.right-l,b=n.bottom-f;const E=(t=n.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",P=(r=n.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",B=(n.image.content[2]-n.image.content[0])/(n.image.content[3]-n.image.content[1]);if(P==="proportional"){if(E==="stretchOnly"&&_/b<B||E==="proportional"){const Y=Math.ceil(b*B);l*=Y/_,_=Y}}else if(E==="proportional"&&P==="stretchOnly"&&B!==0&&_/b>B){const Y=Math.ceil(_/B);f*=Y/b,b=Y}return{x1:l,y1:f,x2:l+_,y2:f+b}}function yh(n,t,r,l,f,_){const b=n.image;let E;if(b.content){const Ge=b.content,Ke=b.pixelRatio||1;E=[Ge[0]/Ke,Ge[1]/Ke,b.displaySize[0]-Ge[2]/Ke,b.displaySize[1]-Ge[3]/Ke]}const P=t.left*_,B=t.right*_;let Y,oe,fe,ge;r==="width"||r==="both"?(ge=f[0]+P-l[3],oe=f[0]+B+l[1]):(ge=f[0]+(P+B-b.displaySize[0])/2,oe=ge+b.displaySize[0]);const Ee=t.top*_,ke=t.bottom*_;return r==="height"||r==="both"?(Y=f[1]+Ee-l[0],fe=f[1]+ke+l[2]):(Y=f[1]+(Ee+ke-b.displaySize[1])/2,fe=Y+b.displaySize[1]),{image:b,top:Y,right:oe,bottom:fe,left:ge,collisionPadding:E}}const wa=255,Ss=128,qa=wa*Ss;function nd(n,t){const{expression:r}=t;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new tr(n+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:f}=r;let _=0;for(;_<l.length&&l[_]<=n;)_++;_=Math.max(0,_-1);let b=_;for(;b<l.length&&l[b]<n+1;)b++;b=Math.min(l.length-1,b);const E=l[_],P=l[b];return r.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:P,interpolationType:f}:{kind:"camera",minZoom:E,maxZoom:P,minSize:r.evaluate(new tr(E)),maxSize:r.evaluate(new tr(P)),interpolationType:f}}}function of(n,t,r){let l="never";const f=n.get(t);return f?l=f:n.get(r)&&(l="always"),l}const sf=si.VectorTileFeature.types,Wm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vh(n,t,r,l,f,_,b,E,P,B,Y,oe,fe){const ge=E?Math.min(qa,Math.round(E[0])):0,Ee=E?Math.min(qa,Math.round(E[1])):0;n.emplaceBack(t,r,Math.round(32*l),Math.round(32*f),_,b,(ge<<1)+(P?1:0),Ee,16*B,16*Y,256*oe,256*fe)}function rd(n,t,r){n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r)}function id(n){for(const t of n.sections)if(Ua(t.text))return!0;return!1}class Sc{constructor(t){this.layoutVertexArray=new Ou,this.indexArray=new qo,this.programConfigurations=t,this.segments=new Kn,this.dynamicLayoutVertexArray=new mc,this.opacityVertexArray=new xo,this.hasVisibleVertices=!1,this.placedSymbolArray=new Er}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,r,l,f){this.isEmpty()||(l&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ui.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,ch.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Wm,!0),this.opacityVertexBuffer.itemSize=1),(l||f)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}on("SymbolBuffers",Sc);class od{constructor(t,r,l){this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new l,this.segments=new Kn,this.collisionVertexArray=new ua}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Zu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}on("CollisionBuffers",od);class ou{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(b=>b.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Jc([]),this.placementViewportMatrix=Jc([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nd(this.zoom,r["text-size"]),this.iconSizeData=nd(this.zoom,r["icon-size"]);const l=this.layers[0].layout,f=l.get("symbol-sort-key"),_=l.get("symbol-z-order");this.canOverlap=of(l,"text-overlap","text-allow-overlap")!=="never"||of(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(b=>w.ah[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=t.sourceID}createArrays(){this.text=new Sc(new fa(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Sc(new fa(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new rr,this.lineVertexArray=new ei,this.symbolInstances=new qn,this.textAnchorOffsets=new Pr}calculateGlyphDependencies(t,r,l,f,_){for(let b=0;b<t.length;b++)if(r[t.charCodeAt(b)]=!0,(l||f)&&_){const E=qi[t.charAt(b)];E&&(r[E.charCodeAt(0)]=!0)}}populate(t,r,l){const f=this.layers[0],_=f.layout,b=_.get("text-font"),E=_.get("text-field"),P=_.get("icon-image"),B=(E.value.kind!=="constant"||E.value.value instanceof Kr&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),Y=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,oe=_.get("symbol-sort-key");if(this.features=[],!B&&!Y)return;const fe=r.iconDependencies,ge=r.glyphDependencies,Ee=r.availableImages,ke=new tr(this.zoom);for(const{feature:Ge,id:Ke,index:dt,sourceLayerIndex:it}of t){const ht=f._featureFilter.needGeometry,St=Wi(Ge,ht);if(!f._featureFilter.filter(ke,St,l))continue;let Ft,rn;if(ht||(St.geometry=wo(Ge)),B){const nn=f.getValueAndResolveTokens("text-field",St,l,Ee),Jt=Kr.factory(nn),yn=this.hasRTLText=this.hasRTLText||id(Jt);(!yn||Sr.getRTLTextPluginStatus()==="unavailable"||yn&&Sr.isParsed())&&(Ft=dh(Jt,f,St))}if(Y){const nn=f.getValueAndResolveTokens("icon-image",St,l,Ee);rn=nn instanceof xi?nn:xi.fromString(nn)}if(!Ft&&!rn)continue;const An=this.sortFeaturesByKey?oe.evaluate(St,{},l):void 0;if(this.features.push({id:Ke,text:Ft,icon:rn,index:dt,sourceLayerIndex:it,geometry:St.geometry,properties:Ge.properties,type:sf[Ge.type],sortKey:An}),rn&&(fe[rn.name]=!0),Ft){const nn=b.evaluate(St,{},l).join(","),Jt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(w.ah.vertical)>=0;for(const yn of Ft.sections)if(yn.image)fe[yn.image.name]=!0;else{const fn=Hc(Ft.toString()),ln=yn.fontStack||nn,Ct=ge[ln]=ge[ln]||{};this.calculateGlyphDependencies(yn.text,Ct,Jt,this.allowVerticalPlacement,fn)}}}_.get("symbol-placement")==="line"&&(this.features=function(Ge){const Ke={},dt={},it=[];let ht=0;function St(nn){it.push(Ge[nn]),ht++}function Ft(nn,Jt,yn){const fn=dt[nn];return delete dt[nn],dt[Jt]=fn,it[fn].geometry[0].pop(),it[fn].geometry[0]=it[fn].geometry[0].concat(yn[0]),fn}function rn(nn,Jt,yn){const fn=Ke[Jt];return delete Ke[Jt],Ke[nn]=fn,it[fn].geometry[0].shift(),it[fn].geometry[0]=yn[0].concat(it[fn].geometry[0]),fn}function An(nn,Jt,yn){const fn=yn?Jt[0][Jt[0].length-1]:Jt[0][0];return`${nn}:${fn.x}:${fn.y}`}for(let nn=0;nn<Ge.length;nn++){const Jt=Ge[nn],yn=Jt.geometry,fn=Jt.text?Jt.text.toString():null;if(!fn){St(nn);continue}const ln=An(fn,yn),Ct=An(fn,yn,!0);if(ln in dt&&Ct in Ke&&dt[ln]!==Ke[Ct]){const xn=rn(ln,Ct,yn),mn=Ft(ln,Ct,it[xn].geometry);delete Ke[ln],delete dt[Ct],dt[An(fn,it[mn].geometry,!0)]=mn,it[xn].geometry=null}else ln in dt?Ft(ln,Ct,yn):Ct in Ke?rn(ln,Ct,yn):(St(nn),Ke[ln]=ht-1,dt[Ct]=ht-1)}return it.filter(nn=>nn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ge,Ke)=>Ge.sortKey-Ke.sortKey)}update(t,r,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,r,this.layers,l),this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,r){const l=this.lineVertexArray.length;if(t.segment!==void 0){let f=t.dist(r[t.segment+1]),_=t.dist(r[t.segment]);const b={};for(let E=t.segment+1;E<r.length;E++)b[E]={x:r[E].x,y:r[E].y,tileUnitDistanceFromAnchor:f},E<r.length-1&&(f+=r[E+1].dist(r[E]));for(let E=t.segment||0;E>=0;E--)b[E]={x:r[E].x,y:r[E].y,tileUnitDistanceFromAnchor:_},E>0&&(_+=r[E-1].dist(r[E]));for(let E=0;E<r.length;E++){const P=b[E];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(t,r,l,f,_,b,E,P,B,Y,oe,fe){const ge=t.indexArray,Ee=t.layoutVertexArray,ke=t.segments.prepareSegment(4*r.length,Ee,ge,this.canOverlap?b.sortKey:void 0),Ge=this.glyphOffsetArray.length,Ke=ke.vertexLength,dt=this.allowVerticalPlacement&&E===w.ah.vertical?Math.PI/2:0,it=b.text&&b.text.sections;for(let ht=0;ht<r.length;ht++){const{tl:St,tr:Ft,bl:rn,br:An,tex:nn,pixelOffsetTL:Jt,pixelOffsetBR:yn,minFontScaleX:fn,minFontScaleY:ln,glyphOffset:Ct,isSDF:xn,sectionIndex:mn}=r[ht],Bn=ke.vertexLength,Fr=Ct[1];vh(Ee,P.x,P.y,St.x,Fr+St.y,nn.x,nn.y,l,xn,Jt.x,Jt.y,fn,ln),vh(Ee,P.x,P.y,Ft.x,Fr+Ft.y,nn.x+nn.w,nn.y,l,xn,yn.x,Jt.y,fn,ln),vh(Ee,P.x,P.y,rn.x,Fr+rn.y,nn.x,nn.y+nn.h,l,xn,Jt.x,yn.y,fn,ln),vh(Ee,P.x,P.y,An.x,Fr+An.y,nn.x+nn.w,nn.y+nn.h,l,xn,yn.x,yn.y,fn,ln),rd(t.dynamicLayoutVertexArray,P,dt),ge.emplaceBack(Bn,Bn+1,Bn+2),ge.emplaceBack(Bn+1,Bn+2,Bn+3),ke.vertexLength+=4,ke.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ct[0]),ht!==r.length-1&&mn===r[ht+1].sectionIndex||t.programConfigurations.populatePaintArrays(Ee.length,b,b.index,{},fe,it&&it[mn])}t.placedSymbolArray.emplaceBack(P.x,P.y,Ge,this.glyphOffsetArray.length-Ge,Ke,B,Y,P.segment,l?l[0]:0,l?l[1]:0,f[0],f[1],E,0,!1,0,oe)}_addCollisionDebugVertex(t,r,l,f,_,b){return r.emplaceBack(0,0),t.emplaceBack(l.x,l.y,f,_,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(t,r,l,f,_,b,E){const P=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),B=P.vertexLength,Y=_.layoutVertexArray,oe=_.collisionVertexArray,fe=E.anchorX,ge=E.anchorY;this._addCollisionDebugVertex(Y,oe,b,fe,ge,new C(t,r)),this._addCollisionDebugVertex(Y,oe,b,fe,ge,new C(l,r)),this._addCollisionDebugVertex(Y,oe,b,fe,ge,new C(l,f)),this._addCollisionDebugVertex(Y,oe,b,fe,ge,new C(t,f)),P.vertexLength+=4;const Ee=_.indexArray;Ee.emplaceBack(B,B+1),Ee.emplaceBack(B+1,B+2),Ee.emplaceBack(B+2,B+3),Ee.emplaceBack(B+3,B),P.primitiveLength+=4}addDebugCollisionBoxes(t,r,l,f){for(let _=t;_<r;_++){const b=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,f?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new od(so,hh.members,Ti),this.iconCollisionBox=new od(so,hh.members,Ti);for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(t,r,l,f,_,b,E,P,B){const Y={};for(let oe=r;oe<l;oe++){const fe=t.get(oe);Y.textBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},Y.textFeatureIndex=fe.featureIndex;break}for(let oe=f;oe<_;oe++){const fe=t.get(oe);Y.verticalTextBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},Y.verticalTextFeatureIndex=fe.featureIndex;break}for(let oe=b;oe<E;oe++){const fe=t.get(oe);Y.iconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},Y.iconFeatureIndex=fe.featureIndex;break}for(let oe=P;oe<B;oe++){const fe=t.get(oe);Y.verticalIconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},Y.verticalIconFeatureIndex=fe.featureIndex;break}return Y}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,r){const l=t.placedSymbolArray.get(r),f=l.vertexStartIndex+4*l.numGlyphs;for(let _=l.vertexStartIndex;_<f;_+=4)t.indexArray.emplaceBack(_,_+1,_+2),t.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(t),l=Math.cos(t),f=[],_=[],b=[];for(let E=0;E<this.symbolInstances.length;++E){b.push(E);const P=this.symbolInstances.get(E);f.push(0|Math.round(r*P.anchorX+l*P.anchorY)),_.push(P.featureIndex)}return b.sort((E,P)=>f[E]-f[P]||_[P]-_[E]),b}addToSortKeyRanges(t,r){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===r?l.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const l=this.symbolInstances.get(r);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((f,_,b)=>{f>=0&&b.indexOf(f)===_&&this.addIndicesForPlacedSymbol(this.text,f)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ap,af;on("SymbolBucket",ou,{omit:["layers","collisionBoxArray","features","compareText"]}),ou.MAX_GLYPHS=65535,ou.addDynamicAttributes=rd;var _h={get paint(){return af=af||new y({"icon-opacity":new En(at.paint_symbol["icon-opacity"]),"icon-color":new En(at.paint_symbol["icon-color"]),"icon-halo-color":new En(at.paint_symbol["icon-halo-color"]),"icon-halo-width":new En(at.paint_symbol["icon-halo-width"]),"icon-halo-blur":new En(at.paint_symbol["icon-halo-blur"]),"icon-translate":new sn(at.paint_symbol["icon-translate"]),"icon-translate-anchor":new sn(at.paint_symbol["icon-translate-anchor"]),"text-opacity":new En(at.paint_symbol["text-opacity"]),"text-color":new En(at.paint_symbol["text-color"],{runtimeType:zn,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new En(at.paint_symbol["text-halo-color"]),"text-halo-width":new En(at.paint_symbol["text-halo-width"]),"text-halo-blur":new En(at.paint_symbol["text-halo-blur"]),"text-translate":new sn(at.paint_symbol["text-translate"]),"text-translate-anchor":new sn(at.paint_symbol["text-translate-anchor"])})},get layout(){return Ap=Ap||new y({"symbol-placement":new sn(at.layout_symbol["symbol-placement"]),"symbol-spacing":new sn(at.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sn(at.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new En(at.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sn(at.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sn(at.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sn(at.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sn(at.layout_symbol["icon-ignore-placement"]),"icon-optional":new sn(at.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sn(at.layout_symbol["icon-rotation-alignment"]),"icon-size":new En(at.layout_symbol["icon-size"]),"icon-text-fit":new sn(at.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sn(at.layout_symbol["icon-text-fit-padding"]),"icon-image":new En(at.layout_symbol["icon-image"]),"icon-rotate":new En(at.layout_symbol["icon-rotate"]),"icon-padding":new En(at.layout_symbol["icon-padding"]),"icon-keep-upright":new sn(at.layout_symbol["icon-keep-upright"]),"icon-offset":new En(at.layout_symbol["icon-offset"]),"icon-anchor":new En(at.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sn(at.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sn(at.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sn(at.layout_symbol["text-rotation-alignment"]),"text-field":new En(at.layout_symbol["text-field"]),"text-font":new En(at.layout_symbol["text-font"]),"text-size":new En(at.layout_symbol["text-size"]),"text-max-width":new En(at.layout_symbol["text-max-width"]),"text-line-height":new sn(at.layout_symbol["text-line-height"]),"text-letter-spacing":new En(at.layout_symbol["text-letter-spacing"]),"text-justify":new En(at.layout_symbol["text-justify"]),"text-radial-offset":new En(at.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sn(at.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new En(at.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new En(at.layout_symbol["text-anchor"]),"text-max-angle":new sn(at.layout_symbol["text-max-angle"]),"text-writing-mode":new sn(at.layout_symbol["text-writing-mode"]),"text-rotate":new En(at.layout_symbol["text-rotate"]),"text-padding":new sn(at.layout_symbol["text-padding"]),"text-keep-upright":new sn(at.layout_symbol["text-keep-upright"]),"text-transform":new En(at.layout_symbol["text-transform"]),"text-offset":new En(at.layout_symbol["text-offset"]),"text-allow-overlap":new sn(at.layout_symbol["text-allow-overlap"]),"text-overlap":new sn(at.layout_symbol["text-overlap"]),"text-ignore-placement":new sn(at.layout_symbol["text-ignore-placement"]),"text-optional":new sn(at.layout_symbol["text-optional"])})}};class xh{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ft,this.defaultValue=t}evaluate(t){if(t.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection))return r.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}on("FormatSectionOverride",xh,{omit:["defaultValue"]});class Ec extends o{constructor(t){super(t,_h)}recalculate(t,r){if(super.recalculate(t,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const f=[];for(const _ of l)f.indexOf(_)<0&&f.push(_);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,r,l,f){const _=this.layout.get(t).evaluate(r,{},l,f),b=this._unevaluatedLayout._values[t];return b.isDataDriven()||wt(b.value)||!_?_:function(E,P){return P.replace(/{([^{}]+)}/g,(B,Y)=>E&&Y in E?String(E[Y]):"")}(r.properties,_)}createBucket(t){return new ou(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of _h.paint.overridableProperties){if(!Ec.hasPaintOverride(this.layout,t))continue;const r=this.paint.get(t),l=new xh(r),f=new We(l,r.property.specification);let _=null;_=r.value.kind==="constant"||r.value.kind==="source"?new Nt("source",f):new an("composite",f,r.value.zoomStops),this.paint._values[t]=new Oo(r.property,_,r.parameters)}}_handleOverridablePaintPropertyUpdate(t,r,l){return!(!this.layout||r.isDataDriven()||l.isDataDriven())&&Ec.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,r){const l=t.get("text-field"),f=_h.paint.properties[r];let _=!1;const b=E=>{for(const P of E)if(f.overrides&&f.overrides.hasOverride(P))return void(_=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Kr)b(l.value.value.sections);else if(l.value.kind==="source"){const E=B=>{_||(B instanceof Po&&fr(B.value)===qr?b(B.value.sections):B instanceof Ys?b(B.sections):B.eachChild(E))},P=l.value;P._styleExpression&&E(P._styleExpression.expression)}return _}}let wh;var Mp={get paint(){return wh=wh||new y({"background-color":new sn(at.paint_background["background-color"]),"background-pattern":new Fu(at.paint_background["background-pattern"]),"background-opacity":new sn(at.paint_background["background-opacity"])})}};class qm extends o{constructor(t){super(t,Mp)}}let bh;var Xm={get paint(){return bh=bh||new y({"raster-opacity":new sn(at.paint_raster["raster-opacity"]),"raster-hue-rotate":new sn(at.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sn(at.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sn(at.paint_raster["raster-brightness-max"]),"raster-saturation":new sn(at.paint_raster["raster-saturation"]),"raster-contrast":new sn(at.paint_raster["raster-contrast"]),"raster-resampling":new sn(at.paint_raster["raster-resampling"]),"raster-fade-duration":new sn(at.paint_raster["raster-fade-duration"])})}};class Sh extends o{constructor(t){super(t,Xm)}}class Km extends o{constructor(t){super(t,{}),this.onAdd=r=>{this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},this.onRemove=r=>{this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class sd{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const i=63710088e-1;class s{constructor(t,r){if(isNaN(t)||isNaN(r))throw new Error(`Invalid LngLat object: (${t}, ${r})`);if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new s(ce(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const r=Math.PI/180,l=this.lat*r,f=t.lat*r,_=Math.sin(l)*Math.sin(f)+Math.cos(l)*Math.cos(f)*Math.cos((t.lng-this.lng)*r);return i*Math.acos(Math.min(_,1))}static convert(t){if(t instanceof s)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new s(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new s(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const m=2*Math.PI*i;function S(n){return m*Math.cos(n*Math.PI/180)}function F(n){return(180+n)/360}function Z(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Se(n,t){return n/S(t)}function Xe(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}class ot{constructor(t,r,l=0){this.x=+t,this.y=+r,this.z=+l}static fromLngLat(t,r=0){const l=s.convert(t);return new ot(F(l.lng),Z(l.lat),Se(r,l.lat))}toLngLat(){return new s(360*this.x-180,Xe(this.y))}toAltitude(){return this.z*S(Xe(this.y))}meterInMercatorCoordinateUnits(){return 1/m*(t=Xe(this.y),1/Math.cos(t*Math.PI/180));var t}}function bt(n,t,r){var l=2*Math.PI*6378137/256/Math.pow(2,r);return[n*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}class Ot{constructor(t,r,l){if(!function(f,_,b){return!(f<0||f>25||b<0||b>=Math.pow(2,f)||_<0||_>=Math.pow(2,f))}(t,r,l))throw new Error(`x=${r}, y=${l}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=r,this.y=l,this.key=dn(0,t,t,r,l)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,r,l){const f=(b=this.y,E=this.z,P=bt(256*(_=this.x),256*(b=Math.pow(2,E)-b-1),E),B=bt(256*(_+1),256*(b+1),E),P[0]+","+P[1]+","+B[0]+","+B[1]);var _,b,E,P,B;const Y=function(oe,fe,ge){let Ee,ke="";for(let Ge=oe;Ge>0;Ge--)Ee=1<<Ge-1,ke+=(fe&Ee?1:0)+(ge&Ee?2:0);return ke}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,Y).replace(/{bbox-epsg-3857}/g,f)}isChildOf(t){const r=this.z-t.z;return r>0&&t.x===this.x>>r&&t.y===this.y>>r}getTilePoint(t){const r=Math.pow(2,this.z);return new C((t.x*r-this.x)*ri,(t.y*r-this.y)*ri)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Vt{constructor(t,r){this.wrap=t,this.canonical=r,this.key=dn(t,r.z,r.z,r.x,r.y)}}class Rt{constructor(t,r,l,f,_){if(t<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${l}`);this.overscaledZ=t,this.wrap=r,this.canonical=new Ot(l,+f,+_),this.key=dn(r,t,l,f,_)}clone(){return new Rt(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-t;return t>this.canonical.z?new Rt(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rt(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(t,r){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-t;return t>this.canonical.z?dn(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y):dn(this.wrap*+r,t,t,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const r=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r}children(t){if(this.overscaledZ>=t)return[new Rt(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,l=2*this.canonical.x,f=2*this.canonical.y;return[new Rt(r,this.wrap,r,l,f),new Rt(r,this.wrap,r,l+1,f),new Rt(r,this.wrap,r,l,f+1),new Rt(r,this.wrap,r,l+1,f+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Rt(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Rt(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Vt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new ot(t.x-this.wrap,t.y))}}function dn(n,t,r,l,f){(n*=2)<0&&(n=-1*n-1);const _=1<<r;return(_*_*n+_*f+l).toString(36)+r.toString(36)+t.toString(36)}on("CanonicalTileID",Ot),on("OverscaledTileID",Rt,{omit:["posMatrix"]});class _n{constructor(t,r,l,f=1,_=1,b=1,E=0){if(this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void W(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const P=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=_,this.blueFactor=b,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let B=0;B<P;B++)this.data[this._idx(-1,B)]=this.data[this._idx(0,B)],this.data[this._idx(P,B)]=this.data[this._idx(P-1,B)],this.data[this._idx(B,-1)]=this.data[this._idx(B,0)],this.data[this._idx(B,P)]=this.data[this._idx(B,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let B=0;B<P;B++)for(let Y=0;Y<P;Y++){const oe=this.get(B,Y);oe>this.max&&(this.max=oe),oe<this.min&&(this.min=oe)}}get(t,r){const l=new Uint8Array(this.data.buffer),f=4*this._idx(t,r);return this.unpack(l[f],l[f+1],l[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(t+1)}unpack(t,r,l){return t*this.redFactor+r*this.greenFactor+l*this.blueFactor-this.baseShift}getPixels(){return new _s({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,r,l){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let f=r*this.dim,_=r*this.dim+this.dim,b=l*this.dim,E=l*this.dim+this.dim;switch(r){case-1:f=_-1;break;case 1:_=f+1}switch(l){case-1:b=E-1;break;case 1:E=b+1}const P=-r*this.dim,B=-l*this.dim;for(let Y=b;Y<E;Y++)for(let oe=f;oe<_;oe++)this.data[this._idx(oe,Y)]=t.data[this._idx(oe+P,Y+B)]}}on("DEMData",_n);class bn{constructor(t){this._stringToNumber={},this._numberToString=[];for(let r=0;r<t.length;r++){const l=t[r];this._stringToNumber[l]=r,this._numberToString[r]=l}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class pi{constructor(t,r,l,f,_){this.type="Feature",this._vectorTileFeature=t,t._z=r,t._x=l,t._y=f,this.properties=t.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(t[r]=this[r]);return t}}class vt{constructor(t,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ql(ri,16,0),this.grid3D=new ql(ri,16,0),this.featureIndexArray=new ni,this.promoteId=r}insert(t,r,l,f,_,b){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,f,_);const P=b?this.grid3D:this.grid;for(let B=0;B<r.length;B++){const Y=r[B],oe=[1/0,1/0,-1/0,-1/0];for(let fe=0;fe<Y.length;fe++){const ge=Y[fe];oe[0]=Math.min(oe[0],ge.x),oe[1]=Math.min(oe[1],ge.y),oe[2]=Math.max(oe[2],ge.x),oe[3]=Math.max(oe[3],ge.y)}oe[0]<ri&&oe[1]<ri&&oe[2]>=0&&oe[3]>=0&&P.insert(E,oe[0],oe[1],oe[2],oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new si.VectorTile(new mh(this.rawTileData)).layers,this.sourceLayerCoder=new bn(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,r,l,f){this.loadVTLayers();const _=t.params||{},b=ri/t.tileSize/t.scale,E=Ur(_.filter),P=t.queryGeometry,B=t.queryPadding*b,Y=xt(P),oe=this.grid.query(Y.minX-B,Y.minY-B,Y.maxX+B,Y.maxY+B),fe=xt(t.cameraQueryGeometry),ge=this.grid3D.query(fe.minX-B,fe.minY-B,fe.maxX+B,fe.maxY+B,(Ge,Ke,dt,it)=>function(ht,St,Ft,rn,An){for(const Jt of ht)if(St<=Jt.x&&Ft<=Jt.y&&rn>=Jt.x&&An>=Jt.y)return!0;const nn=[new C(St,Ft),new C(St,An),new C(rn,An),new C(rn,Ft)];if(ht.length>2){for(const Jt of nn)if(Ga(ht,Jt))return!0}for(let Jt=0;Jt<ht.length-1;Jt++)if(Kf(ht[Jt],ht[Jt+1],nn))return!0;return!1}(t.cameraQueryGeometry,Ge-B,Ke-B,dt+B,it+B));for(const Ge of ge)oe.push(Ge);oe.sort(Xt);const Ee={};let ke;for(let Ge=0;Ge<oe.length;Ge++){const Ke=oe[Ge];if(Ke===ke)continue;ke=Ke;const dt=this.featureIndexArray.get(Ke);let it=null;this.loadMatchingFeature(Ee,dt.bucketIndex,dt.sourceLayerIndex,dt.featureIndex,E,_.layers,_.availableImages,r,l,f,(ht,St,Ft)=>(it||(it=wo(ht)),St.queryIntersectsFeature(P,ht,Ft,it,this.z,t.transform,b,t.pixelPosMatrix)))}return Ee}loadMatchingFeature(t,r,l,f,_,b,E,P,B,Y,oe){const fe=this.bucketLayerIDs[r];if(b&&!function(Ge,Ke){for(let dt=0;dt<Ge.length;dt++)if(Ke.indexOf(Ge[dt])>=0)return!0;return!1}(b,fe))return;const ge=this.sourceLayerCoder.decode(l),Ee=this.vtLayers[ge].feature(f);if(_.needGeometry){const Ge=Wi(Ee,!0);if(!_.filter(new tr(this.tileID.overscaledZ),Ge,this.tileID.canonical))return}else if(!_.filter(new tr(this.tileID.overscaledZ),Ee))return;const ke=this.getId(Ee,ge);for(let Ge=0;Ge<fe.length;Ge++){const Ke=fe[Ge];if(b&&b.indexOf(Ke)<0)continue;const dt=P[Ke];if(!dt)continue;let it={};ke&&Y&&(it=Y.getState(dt.sourceLayer||"_geojsonTileLayer",ke));const ht=M({},B[Ke]);ht.paint=lt(ht.paint,dt.paint,Ee,it,E),ht.layout=lt(ht.layout,dt.layout,Ee,it,E);const St=!oe||oe(Ee,dt,it);if(!St)continue;const Ft=new pi(Ee,this.z,this.x,this.y,ke);Ft.layer=ht;let rn=t[Ke];rn===void 0&&(rn=t[Ke]=[]),rn.push({featureIndex:f,feature:Ft,intersectionZ:St})}}lookupSymbolFeatures(t,r,l,f,_,b,E,P){const B={};this.loadVTLayers();const Y=Ur(_);for(const oe of t)this.loadMatchingFeature(B,l,f,oe,Y,b,E,P,r);return B}hasLayer(t){for(const r of this.bucketLayerIDs)for(const l of r)if(t===l)return!0;return!1}getId(t,r){let l=t.id;return this.promoteId&&(l=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof l=="boolean"&&(l=Number(l))),l}}function lt(n,t,r,l,f){return U(n,(_,b)=>{const E=t instanceof Yl?t.get(b):null;return E&&E.evaluate?E.evaluate(r,l,f):E})}function xt(n){let t=1/0,r=1/0,l=-1/0,f=-1/0;for(const _ of n)t=Math.min(t,_.x),r=Math.min(r,_.y),l=Math.max(l,_.x),f=Math.max(f,_.y);return{minX:t,minY:r,maxX:l,maxY:f}}function Xt(n,t){return t-n}function Tn(n,t,r,l,f){const _=[];for(let b=0;b<n.length;b++){const E=n[b];let P;for(let B=0;B<E.length-1;B++){let Y=E[B],oe=E[B+1];Y.x<t&&oe.x<t||(Y.x<t?Y=new C(t,Y.y+(t-Y.x)/(oe.x-Y.x)*(oe.y-Y.y))._round():oe.x<t&&(oe=new C(t,Y.y+(t-Y.x)/(oe.x-Y.x)*(oe.y-Y.y))._round()),Y.y<r&&oe.y<r||(Y.y<r?Y=new C(Y.x+(r-Y.y)/(oe.y-Y.y)*(oe.x-Y.x),r)._round():oe.y<r&&(oe=new C(Y.x+(r-Y.y)/(oe.y-Y.y)*(oe.x-Y.x),r)._round()),Y.x>=l&&oe.x>=l||(Y.x>=l?Y=new C(l,Y.y+(l-Y.x)/(oe.x-Y.x)*(oe.y-Y.y))._round():oe.x>=l&&(oe=new C(l,Y.y+(l-Y.x)/(oe.x-Y.x)*(oe.y-Y.y))._round()),Y.y>=f&&oe.y>=f||(Y.y>=f?Y=new C(Y.x+(f-Y.y)/(oe.y-Y.y)*(oe.x-Y.x),f)._round():oe.y>=f&&(oe=new C(Y.x+(f-Y.y)/(oe.y-Y.y)*(oe.x-Y.x),f)._round()),P&&Y.equals(P[P.length-1])||(P=[Y],_.push(P)),P.push(oe)))))}}return _}on("FeatureIndex",vt,{omit:["rawTileData","sourceLayerCoder"]});class Cn extends C{constructor(t,r,l,f){super(t,r),this.angle=l,f!==void 0&&(this.segment=f)}clone(){return new Cn(this.x,this.y,this.angle,this.segment)}}function Dn(n,t,r,l,f){if(t.segment===void 0||r===0)return!0;let _=t,b=t.segment+1,E=0;for(;E>-r/2;){if(b--,b<0)return!1;E-=n[b].dist(_),_=n[b]}E+=n[b].dist(n[b+1]),b++;const P=[];let B=0;for(;E<r/2;){const Y=n[b],oe=n[b+1];if(!oe)return!1;let fe=n[b-1].angleTo(Y)-Y.angleTo(oe);for(fe=Math.abs((fe+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:E,angleDelta:fe}),B+=fe;E-P[0].distance>l;)B-=P.shift().angleDelta;if(B>f)return!1;b++,E+=Y.dist(oe)}return!0}function Hn(n){let t=0;for(let r=0;r<n.length-1;r++)t+=n[r].dist(n[r+1]);return t}function Vi(n,t,r){return n?.6*t*r:0}function vr(n,t){return Math.max(n?n.right-n.left:0,t?t.right-t.left:0)}function su(n,t,r,l,f,_){const b=Vi(r,f,_),E=vr(r,l)*_;let P=0;const B=Hn(n)/2;for(let Y=0;Y<n.length-1;Y++){const oe=n[Y],fe=n[Y+1],ge=oe.dist(fe);if(P+ge>B){const Ee=(B-P)/ge,ke=Gr.number(oe.x,fe.x,Ee),Ge=Gr.number(oe.y,fe.y,Ee),Ke=new Cn(ke,Ge,fe.angleTo(oe),Y);return Ke._round(),!b||Dn(n,Ke,E,b,t)?Ke:void 0}P+=ge}}function Ym(n,t,r,l,f,_,b,E,P){const B=Vi(l,_,b),Y=vr(l,f),oe=Y*b,fe=n[0].x===0||n[0].x===P||n[0].y===0||n[0].y===P;return t-oe<t/4&&(t=oe+t/4),Y0(n,fe?t/2*E%t:(Y/2+2*_)*b*E%t,t,B,r,oe,fe,!1,P)}function Y0(n,t,r,l,f,_,b,E,P){const B=_/2,Y=Hn(n);let oe=0,fe=t-r,ge=[];for(let Ee=0;Ee<n.length-1;Ee++){const ke=n[Ee],Ge=n[Ee+1],Ke=ke.dist(Ge),dt=Ge.angleTo(ke);for(;fe+r<oe+Ke;){fe+=r;const it=(fe-oe)/Ke,ht=Gr.number(ke.x,Ge.x,it),St=Gr.number(ke.y,Ge.y,it);if(ht>=0&&ht<P&&St>=0&&St<P&&fe-B>=0&&fe+B<=Y){const Ft=new Cn(ht,St,dt,Ee);Ft._round(),l&&!Dn(n,Ft,_,l,f)||ge.push(Ft)}}oe+=Ke}return E||ge.length||b||(ge=Y0(n,oe/2,r,l,f,_,b,!0,P)),ge}on("Anchor",Cn);const ad=Xi;function J0(n,t,r,l){const f=[],_=n.image,b=_.pixelRatio,E=_.paddedRect.w-2*ad,P=_.paddedRect.h-2*ad;let B={x1:n.left,y1:n.top,x2:n.right,y2:n.bottom};const Y=_.stretchX||[[0,E]],oe=_.stretchY||[[0,P]],fe=(Ct,xn)=>Ct+xn[1]-xn[0],ge=Y.reduce(fe,0),Ee=oe.reduce(fe,0),ke=E-ge,Ge=P-Ee;let Ke=0,dt=ge,it=0,ht=Ee,St=0,Ft=ke,rn=0,An=Ge;if(_.content&&l){const Ct=_.content,xn=Ct[2]-Ct[0],mn=Ct[3]-Ct[1];(_.textFitWidth||_.textFitHeight)&&(B=bl(n)),Ke=kp(Y,0,Ct[0]),it=kp(oe,0,Ct[1]),dt=kp(Y,Ct[0],Ct[2]),ht=kp(oe,Ct[1],Ct[3]),St=Ct[0]-Ke,rn=Ct[1]-it,Ft=xn-dt,An=mn-ht}const nn=B.x1,Jt=B.y1,yn=B.x2-nn,fn=B.y2-Jt,ln=(Ct,xn,mn,Bn)=>{const Fr=zp(Ct.stretch-Ke,dt,yn,nn),Mr=Rp(Ct.fixed-St,Ft,Ct.stretch,ge),Ki=zp(xn.stretch-it,ht,fn,Jt),Xa=Rp(xn.fixed-rn,An,xn.stretch,Ee),Eo=zp(mn.stretch-Ke,dt,yn,nn),Yi=Rp(mn.fixed-St,Ft,mn.stretch,ge),Jo=zp(Bn.stretch-it,ht,fn,Jt),Qo=Rp(Bn.fixed-rn,An,Bn.stretch,Ee),es=new C(Fr,Ki),mi=new C(Eo,Ki),Ji=new C(Eo,Jo),Bo=new C(Fr,Jo),To=new C(Mr/b,Xa/b),ts=new C(Yi/b,Qo/b),Io=t*Math.PI/180;if(Io){const gr=Math.sin(Io),Dr=Math.cos(Io),Vr=[Dr,-gr,gr,Dr];es._matMult(Vr),mi._matMult(Vr),Bo._matMult(Vr),Ji._matMult(Vr)}const ba=Ct.stretch+Ct.fixed,Es=xn.stretch+xn.fixed;return{tl:es,tr:mi,bl:Bo,br:Ji,tex:{x:_.paddedRect.x+ad+ba,y:_.paddedRect.y+ad+Es,w:mn.stretch+mn.fixed-ba,h:Bn.stretch+Bn.fixed-Es},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:To,pixelOffsetBR:ts,minFontScaleX:Ft/b/yn,minFontScaleY:An/b/fn,isSDF:r}};if(l&&(_.stretchX||_.stretchY)){const Ct=Q0(Y,ke,ge),xn=Q0(oe,Ge,Ee);for(let mn=0;mn<Ct.length-1;mn++){const Bn=Ct[mn],Fr=Ct[mn+1];for(let Mr=0;Mr<xn.length-1;Mr++)f.push(ln(Bn,xn[Mr],Fr,xn[Mr+1]))}}else f.push(ln({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:P+1}));return f}function kp(n,t,r){let l=0;for(const f of n)l+=Math.max(t,Math.min(r,f[1]))-Math.max(t,Math.min(r,f[0]));return l}function Q0(n,t,r){const l=[{fixed:-ad,stretch:0}];for(const[f,_]of n){const b=l[l.length-1];l.push({fixed:f-b.stretch,stretch:b.stretch}),l.push({fixed:f-b.stretch,stretch:b.stretch+(_-f)})}return l.push({fixed:t+ad,stretch:r}),l}function zp(n,t,r,l){return n/t*r+l}function Rp(n,t,r,l){return n-t*r/l}class Fp{constructor(t,r,l,f,_,b,E,P,B,Y){var oe;if(this.boxStartIndex=t.length,B){let fe=b.top,ge=b.bottom;const Ee=b.collisionPadding;Ee&&(fe-=Ee[1],ge+=Ee[3]);let ke=ge-fe;ke>0&&(ke=Math.max(10,ke),this.circleDiameter=ke)}else{const fe=!((oe=b.image)===null||oe===void 0)&&oe.content&&(b.image.textFitWidth||b.image.textFitHeight)?bl(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};fe.y1=fe.y1*E-P[0],fe.y2=fe.y2*E+P[2],fe.x1=fe.x1*E-P[3],fe.x2=fe.x2*E+P[1];const ge=b.collisionPadding;if(ge&&(fe.x1-=ge[0]*E,fe.y1-=ge[1]*E,fe.x2+=ge[2]*E,fe.y2+=ge[3]*E),Y){const Ee=new C(fe.x1,fe.y1),ke=new C(fe.x2,fe.y1),Ge=new C(fe.x1,fe.y2),Ke=new C(fe.x2,fe.y2),dt=Y*Math.PI/180;Ee._rotate(dt),ke._rotate(dt),Ge._rotate(dt),Ke._rotate(dt),fe.x1=Math.min(Ee.x,ke.x,Ge.x,Ke.x),fe.x2=Math.max(Ee.x,ke.x,Ge.x,Ke.x),fe.y1=Math.min(Ee.y,ke.y,Ge.y,Ke.y),fe.y2=Math.max(Ee.y,ke.y,Ge.y,Ke.y)}t.emplaceBack(r.x,r.y,fe.x1,fe.y1,fe.x2,fe.y2,l,f,_)}this.boxEndIndex=t.length}}class Cw{constructor(t=[],r=(l,f)=>l<f?-1:l>f?1:0){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:l}=this,f=r[t];for(;t>0;){const _=t-1>>1,b=r[_];if(l(f,b)>=0)break;r[t]=b,t=_}r[t]=f}_down(t){const{data:r,compare:l}=this,f=this.length>>1,_=r[t];for(;t<f;){let b=1+(t<<1);const E=b+1;if(E<this.length&&l(r[E],r[b])<0&&(b=E),l(r[b],_)>=0)break;r[t]=r[b],t=b}r[t]=_}}function Pw(n,t=1,r=!1){let l=1/0,f=1/0,_=-1/0,b=-1/0;const E=n[0];for(let ge=0;ge<E.length;ge++){const Ee=E[ge];(!ge||Ee.x<l)&&(l=Ee.x),(!ge||Ee.y<f)&&(f=Ee.y),(!ge||Ee.x>_)&&(_=Ee.x),(!ge||Ee.y>b)&&(b=Ee.y)}const P=Math.min(_-l,b-f);let B=P/2;const Y=new Cw([],Aw);if(P===0)return new C(l,f);for(let ge=l;ge<_;ge+=P)for(let Ee=f;Ee<b;Ee+=P)Y.push(new ld(ge+B,Ee+B,B,n));let oe=function(ge){let Ee=0,ke=0,Ge=0;const Ke=ge[0];for(let dt=0,it=Ke.length,ht=it-1;dt<it;ht=dt++){const St=Ke[dt],Ft=Ke[ht],rn=St.x*Ft.y-Ft.x*St.y;ke+=(St.x+Ft.x)*rn,Ge+=(St.y+Ft.y)*rn,Ee+=3*rn}return new ld(ke/Ee,Ge/Ee,0,ge)}(n),fe=Y.length;for(;Y.length;){const ge=Y.pop();(ge.d>oe.d||!oe.d)&&(oe=ge,r&&console.log("found best %d after %d probes",Math.round(1e4*ge.d)/1e4,fe)),ge.max-oe.d<=t||(B=ge.h/2,Y.push(new ld(ge.p.x-B,ge.p.y-B,B,n)),Y.push(new ld(ge.p.x+B,ge.p.y-B,B,n)),Y.push(new ld(ge.p.x-B,ge.p.y+B,B,n)),Y.push(new ld(ge.p.x+B,ge.p.y+B,B,n)),fe+=4)}return r&&(console.log(`num probes: ${fe}`),console.log(`best distance: ${oe.d}`)),oe.p}function Aw(n,t){return t.max-n.max}function ld(n,t,r,l){this.p=new C(n,t),this.h=r,this.d=function(f,_){let b=!1,E=1/0;for(let P=0;P<_.length;P++){const B=_[P];for(let Y=0,oe=B.length,fe=oe-1;Y<oe;fe=Y++){const ge=B[Y],Ee=B[fe];ge.y>f.y!=Ee.y>f.y&&f.x<(Ee.x-ge.x)*(f.y-ge.y)/(Ee.y-ge.y)+ge.x&&(b=!b),E=Math.min(E,Ad(f,ge,Ee))}}return(b?1:-1)*Math.sqrt(E)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}var So;w.aq=void 0,(So=w.aq||(w.aq={}))[So.center=1]="center",So[So.left=2]="left",So[So.right=3]="right",So[So.top=4]="top",So[So.bottom=5]="bottom",So[So["top-left"]=6]="top-left",So[So["top-right"]=7]="top-right",So[So["bottom-left"]=8]="bottom-left",So[So["bottom-right"]=9]="bottom-right";const Tc=7,Jm=Number.POSITIVE_INFINITY;function ev(n,t){return t[1]!==Jm?function(r,l,f){let _=0,b=0;switch(l=Math.abs(l),f=Math.abs(f),r){case"top-right":case"top-left":case"top":b=f-Tc;break;case"bottom-right":case"bottom-left":case"bottom":b=-f+Tc}switch(r){case"top-right":case"bottom-right":case"right":_=-l;break;case"top-left":case"bottom-left":case"left":_=l}return[_,b]}(n,t[0],t[1]):function(r,l){let f=0,_=0;l<0&&(l=0);const b=l/Math.SQRT2;switch(r){case"top-right":case"top-left":_=b-Tc;break;case"bottom-right":case"bottom-left":_=-b+Tc;break;case"bottom":_=-l+Tc;break;case"top":_=l-Tc}switch(r){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=l;break;case"right":f=-l}return[f,_]}(n,t[0])}function tv(n,t,r){var l;const f=n.layout,_=(l=f.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(t,{},r);if(_){const E=_.values,P=[];for(let B=0;B<E.length;B+=2){const Y=P[B]=E[B],oe=E[B+1].map(fe=>fe*ai);Y.startsWith("top")?oe[1]-=Tc:Y.startsWith("bottom")&&(oe[1]+=Tc),P[B+1]=oe}return new Qi(P)}const b=f.get("text-variable-anchor");if(b){let E;E=n._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(t,{},r)*ai,Jm]:f.get("text-offset").evaluate(t,{},r).map(B=>B*ai);const P=[];for(const B of b)P.push(B,ev(B,E));return new Qi(P)}return null}function Qm(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Mw(n,t,r,l,f,_,b,E,P,B,Y){let oe=_.textMaxSize.evaluate(t,{});oe===void 0&&(oe=b);const fe=n.layers[0].layout,ge=fe.get("icon-offset").evaluate(t,{},Y),Ee=rv(r.horizontal),ke=b/24,Ge=n.tilePixelRatio*ke,Ke=n.tilePixelRatio*oe/24,dt=n.tilePixelRatio*E,it=n.tilePixelRatio*fe.get("symbol-spacing"),ht=fe.get("text-padding")*n.tilePixelRatio,St=function(Ct,xn,mn,Bn=1){const Fr=Ct.get("icon-padding").evaluate(xn,{},mn),Mr=Fr&&Fr.values;return[Mr[0]*Bn,Mr[1]*Bn,Mr[2]*Bn,Mr[3]*Bn]}(fe,t,Y,n.tilePixelRatio),Ft=fe.get("text-max-angle")/180*Math.PI,rn=fe.get("text-rotation-alignment")!=="viewport"&&fe.get("symbol-placement")!=="point",An=fe.get("icon-rotation-alignment")==="map"&&fe.get("symbol-placement")!=="point",nn=fe.get("symbol-placement"),Jt=it/2,yn=fe.get("icon-text-fit");let fn;l&&yn!=="none"&&(n.allowVerticalPlacement&&r.vertical&&(fn=yh(l,r.vertical,yn,fe.get("icon-text-fit-padding"),ge,ke)),Ee&&(l=yh(l,Ee,yn,fe.get("icon-text-fit-padding"),ge,ke)));const ln=(Ct,xn)=>{xn.x<0||xn.x>=ri||xn.y<0||xn.y>=ri||function(mn,Bn,Fr,Mr,Ki,Xa,Eo,Yi,Jo,Qo,es,mi,Ji,Bo,To,ts,Io,ba,Es,gr,Dr,Vr,$s,li,ud){const au=mn.addToLineVertexArray(Bn,Fr);let lu,Ka,Sa,uo,Xu=0,cf=0,av=0,lv=0,ag=-1,lg=-1;const Ku={};let uv=Us("");if(mn.allowVerticalPlacement&&Mr.vertical){const No=Yi.layout.get("text-rotate").evaluate(Dr,{},li)+90;Sa=new Fp(Jo,Bn,Qo,es,mi,Mr.vertical,Ji,Bo,To,No),Eo&&(uo=new Fp(Jo,Bn,Qo,es,mi,Eo,Io,ba,To,No))}if(Ki){const No=Yi.layout.get("icon-rotate").evaluate(Dr,{}),Ea=Yi.layout.get("icon-text-fit")!=="none",Eh=J0(Ki,No,$s,Ea),El=Eo?J0(Eo,No,$s,Ea):void 0;Ka=new Fp(Jo,Bn,Qo,es,mi,Ki,Io,ba,!1,No),Xu=4*Eh.length;const Th=mn.iconSizeData;let uu=null;Th.kind==="source"?(uu=[Ss*Yi.layout.get("icon-size").evaluate(Dr,{})],uu[0]>qa&&W(`${mn.layerIds[0]}: Value for "icon-size" is >= ${wa}. Reduce your "icon-size".`)):Th.kind==="composite"&&(uu=[Ss*Vr.compositeIconSizes[0].evaluate(Dr,{},li),Ss*Vr.compositeIconSizes[1].evaluate(Dr,{},li)],(uu[0]>qa||uu[1]>qa)&&W(`${mn.layerIds[0]}: Value for "icon-size" is >= ${wa}. Reduce your "icon-size".`)),mn.addSymbols(mn.icon,Eh,uu,gr,Es,Dr,w.ah.none,Bn,au.lineStartIndex,au.lineLength,-1,li),ag=mn.icon.placedSymbolArray.length-1,El&&(cf=4*El.length,mn.addSymbols(mn.icon,El,uu,gr,Es,Dr,w.ah.vertical,Bn,au.lineStartIndex,au.lineLength,-1,li),lg=mn.icon.placedSymbolArray.length-1)}const cv=Object.keys(Mr.horizontal);for(const No of cv){const Ea=Mr.horizontal[No];if(!lu){uv=Us(Ea.text);const El=Yi.layout.get("text-rotate").evaluate(Dr,{},li);lu=new Fp(Jo,Bn,Qo,es,mi,Ea,Ji,Bo,To,El)}const Eh=Ea.positionedLines.length===1;if(av+=nv(mn,Bn,Ea,Xa,Yi,To,Dr,ts,au,Mr.vertical?w.ah.horizontal:w.ah.horizontalOnly,Eh?cv:[No],Ku,ag,Vr,li),Eh)break}Mr.vertical&&(lv+=nv(mn,Bn,Mr.vertical,Xa,Yi,To,Dr,ts,au,w.ah.vertical,["vertical"],Ku,lg,Vr,li));const Rw=lu?lu.boxStartIndex:mn.collisionBoxArray.length,Fw=lu?lu.boxEndIndex:mn.collisionBoxArray.length,Ow=Sa?Sa.boxStartIndex:mn.collisionBoxArray.length,jw=Sa?Sa.boxEndIndex:mn.collisionBoxArray.length,Lw=Ka?Ka.boxStartIndex:mn.collisionBoxArray.length,Dw=Ka?Ka.boxEndIndex:mn.collisionBoxArray.length,Bw=uo?uo.boxStartIndex:mn.collisionBoxArray.length,Nw=uo?uo.boxEndIndex:mn.collisionBoxArray.length;let Sl=-1;const jp=(No,Ea)=>No&&No.circleDiameter?Math.max(No.circleDiameter,Ea):Ea;Sl=jp(lu,Sl),Sl=jp(Sa,Sl),Sl=jp(Ka,Sl),Sl=jp(uo,Sl);const hv=Sl>-1?1:0;hv&&(Sl*=ud/ai),mn.glyphOffsetArray.length>=ou.MAX_GLYPHS&&W("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dr.sortKey!==void 0&&mn.addToSortKeyRanges(mn.symbolInstances.length,Dr.sortKey);const Uw=tv(Yi,Dr,li),[Vw,$w]=function(No,Ea){const Eh=No.length,El=Ea==null?void 0:Ea.values;if((El==null?void 0:El.length)>0)for(let Th=0;Th<El.length;Th+=2){const uu=El[Th+1];No.emplaceBack(w.aq[El[Th]],uu[0],uu[1])}return[Eh,No.length]}(mn.textAnchorOffsets,Uw);mn.symbolInstances.emplaceBack(Bn.x,Bn.y,Ku.right>=0?Ku.right:-1,Ku.center>=0?Ku.center:-1,Ku.left>=0?Ku.left:-1,Ku.vertical||-1,ag,lg,uv,Rw,Fw,Ow,jw,Lw,Dw,Bw,Nw,Qo,av,lv,Xu,cf,hv,0,Ji,Sl,Vw,$w)}(n,xn,Ct,r,l,f,fn,n.layers[0],n.collisionBoxArray,t.index,t.sourceLayerIndex,n.index,Ge,[ht,ht,ht,ht],rn,P,dt,St,An,ge,t,_,B,Y,b)};if(nn==="line")for(const Ct of Tn(t.geometry,0,0,ri,ri)){const xn=Ym(Ct,it,Ft,r.vertical||Ee,l,24,Ke,n.overscaling,ri);for(const mn of xn)Ee&&kw(n,Ee.text,Jt,mn)||ln(Ct,mn)}else if(nn==="line-center"){for(const Ct of t.geometry)if(Ct.length>1){const xn=su(Ct,Ft,r.vertical||Ee,l,24,Ke);xn&&ln(Ct,xn)}}else if(t.type==="Polygon")for(const Ct of cs(t.geometry,0)){const xn=Pw(Ct,16);ln(Ct[0],new Cn(xn.x,xn.y,0))}else if(t.type==="LineString")for(const Ct of t.geometry)ln(Ct,new Cn(Ct[0].x,Ct[0].y,0));else if(t.type==="Point")for(const Ct of t.geometry)for(const xn of Ct)ln([xn],new Cn(xn.x,xn.y,0))}function nv(n,t,r,l,f,_,b,E,P,B,Y,oe,fe,ge,Ee){const ke=function(dt,it,ht,St,Ft,rn,An,nn){const Jt=St.layout.get("text-rotate").evaluate(rn,{})*Math.PI/180,yn=[];for(const fn of it.positionedLines)for(const ln of fn.positionedGlyphs){if(!ln.rect)continue;const Ct=ln.rect||{};let xn=Yd+1,mn=!0,Bn=1,Fr=0;const Mr=(Ft||nn)&&ln.vertical,Ki=ln.metrics.advance*ln.scale/2;if(nn&&it.verticalizable&&(Fr=fn.lineOffset/2-(ln.imageName?-(ai-ln.metrics.width*ln.scale)/2:(ln.scale-1)*ai)),ln.imageName){const gr=An[ln.imageName];mn=gr.sdf,Bn=gr.pixelRatio,xn=Xi/Bn}const Xa=Ft?[ln.x+Ki,ln.y]:[0,0];let Eo=Ft?[0,0]:[ln.x+Ki+ht[0],ln.y+ht[1]-Fr],Yi=[0,0];Mr&&(Yi=Eo,Eo=[0,0]);const Jo=ln.metrics.isDoubleResolution?2:1,Qo=(ln.metrics.left-xn)*ln.scale-Ki+Eo[0],es=(-ln.metrics.top-xn)*ln.scale+Eo[1],mi=Qo+Ct.w/Jo*ln.scale/Bn,Ji=es+Ct.h/Jo*ln.scale/Bn,Bo=new C(Qo,es),To=new C(mi,es),ts=new C(Qo,Ji),Io=new C(mi,Ji);if(Mr){const gr=new C(-Ki,Ki-wc),Dr=-Math.PI/2,Vr=ai/2-Ki,$s=new C(5-wc-Vr,-(ln.imageName?Vr:0)),li=new C(...Yi);Bo._rotateAround(Dr,gr)._add($s)._add(li),To._rotateAround(Dr,gr)._add($s)._add(li),ts._rotateAround(Dr,gr)._add($s)._add(li),Io._rotateAround(Dr,gr)._add($s)._add(li)}if(Jt){const gr=Math.sin(Jt),Dr=Math.cos(Jt),Vr=[Dr,-gr,gr,Dr];Bo._matMult(Vr),To._matMult(Vr),ts._matMult(Vr),Io._matMult(Vr)}const ba=new C(0,0),Es=new C(0,0);yn.push({tl:Bo,tr:To,bl:ts,br:Io,tex:Ct,writingMode:it.writingMode,glyphOffset:Xa,sectionIndex:ln.sectionIndex,isSDF:mn,pixelOffsetTL:ba,pixelOffsetBR:Es,minFontScaleX:0,minFontScaleY:0})}return yn}(0,r,E,f,_,b,l,n.allowVerticalPlacement),Ge=n.textSizeData;let Ke=null;Ge.kind==="source"?(Ke=[Ss*f.layout.get("text-size").evaluate(b,{})],Ke[0]>qa&&W(`${n.layerIds[0]}: Value for "text-size" is >= ${wa}. Reduce your "text-size".`)):Ge.kind==="composite"&&(Ke=[Ss*ge.compositeTextSizes[0].evaluate(b,{},Ee),Ss*ge.compositeTextSizes[1].evaluate(b,{},Ee)],(Ke[0]>qa||Ke[1]>qa)&&W(`${n.layerIds[0]}: Value for "text-size" is >= ${wa}. Reduce your "text-size".`)),n.addSymbols(n.text,ke,Ke,E,_,b,B,t,P.lineStartIndex,P.lineLength,fe,Ee);for(const dt of Y)oe[dt]=n.text.placedSymbolArray.length-1;return 4*ke.length}function rv(n){for(const t in n)return n[t];return null}function kw(n,t,r,l){const f=n.compareText;if(t in f){const _=f[t];for(let b=_.length-1;b>=0;b--)if(l.dist(_[b])<r)return!0}else f[t]=[];return f[t].push(l),!1}const iv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class eg{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,l]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=l>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const _=iv[15&l];if(!_)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(t,2,1),[E]=new Uint32Array(t,4,1);return new eg(E,b,_,t)}constructor(t,r=64,l=Float64Array,f){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=l,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const _=iv.indexOf(this.ArrayType),b=2*t*this.ArrayType.BYTES_PER_ELEMENT,E=t*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-E%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${l}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+E+P,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+b+E+P),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+E+P,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=t,this.coords[this._pos++]=r,l}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return tg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:b,nodeSize:E}=this,P=[0,_.length-1,0],B=[];for(;P.length;){const Y=P.pop()||0,oe=P.pop()||0,fe=P.pop()||0;if(oe-fe<=E){for(let Ge=fe;Ge<=oe;Ge++){const Ke=b[2*Ge],dt=b[2*Ge+1];Ke>=t&&Ke<=l&&dt>=r&&dt<=f&&B.push(_[Ge])}continue}const ge=fe+oe>>1,Ee=b[2*ge],ke=b[2*ge+1];Ee>=t&&Ee<=l&&ke>=r&&ke<=f&&B.push(_[ge]),(Y===0?t<=Ee:r<=ke)&&(P.push(fe),P.push(ge-1),P.push(1-Y)),(Y===0?l>=Ee:f>=ke)&&(P.push(ge+1),P.push(oe),P.push(1-Y))}return B}within(t,r,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:_,nodeSize:b}=this,E=[0,f.length-1,0],P=[],B=l*l;for(;E.length;){const Y=E.pop()||0,oe=E.pop()||0,fe=E.pop()||0;if(oe-fe<=b){for(let Ge=fe;Ge<=oe;Ge++)sv(_[2*Ge],_[2*Ge+1],t,r)<=B&&P.push(f[Ge]);continue}const ge=fe+oe>>1,Ee=_[2*ge],ke=_[2*ge+1];sv(Ee,ke,t,r)<=B&&P.push(f[ge]),(Y===0?t-l<=Ee:r-l<=ke)&&(E.push(fe),E.push(ge-1),E.push(1-Y)),(Y===0?t+l>=Ee:r+l>=ke)&&(E.push(ge+1),E.push(oe),E.push(1-Y))}return P}}function tg(n,t,r,l,f,_){if(f-l<=r)return;const b=l+f>>1;ov(n,t,b,l,f,_),tg(n,t,r,l,b-1,1-_),tg(n,t,r,b+1,f,1-_)}function ov(n,t,r,l,f,_){for(;f>l;){if(f-l>600){const B=f-l+1,Y=r-l+1,oe=Math.log(B),fe=.5*Math.exp(2*oe/3),ge=.5*Math.sqrt(oe*fe*(B-fe)/B)*(Y-B/2<0?-1:1);ov(n,t,r,Math.max(l,Math.floor(r-Y*fe/B+ge)),Math.min(f,Math.floor(r+(B-Y)*fe/B+ge)),_)}const b=t[2*r+_];let E=l,P=f;for(lf(n,t,l,r),t[2*f+_]>b&&lf(n,t,l,f);E<P;){for(lf(n,t,E,P),E++,P--;t[2*E+_]<b;)E++;for(;t[2*P+_]>b;)P--}t[2*l+_]===b?lf(n,t,l,P):(P++,lf(n,t,P,f)),P<=r&&(l=P+1),r<=P&&(f=P-1)}}function lf(n,t,r,l){ng(n,r,l),ng(t,2*r,2*l),ng(t,2*r+1,2*l+1)}function ng(n,t,r){const l=n[t];n[t]=n[r],n[r]=l}function sv(n,t,r,l){const f=n-r,_=t-l;return f*f+_*_}var rg;w.bg=void 0,(rg=w.bg||(w.bg={})).create="create",rg.load="load",rg.fullLoad="fullLoad";let Op=null,uf=[];const ig=1e3/60,og="loadTime",sg="fullLoadTime",zw={mark(n){performance.mark(n)},frame(n){const t=n;Op!=null&&uf.push(t-Op),Op=t},clearMetrics(){Op=null,uf=[],performance.clearMeasures(og),performance.clearMeasures(sg);for(const n in w.bg)performance.clearMarks(w.bg[n])},getPerformanceMetrics(){performance.measure(og,w.bg.create,w.bg.load),performance.measure(sg,w.bg.create,w.bg.fullLoad);const n=performance.getEntriesByName(og)[0].duration,t=performance.getEntriesByName(sg)[0].duration,r=uf.length,l=1/(uf.reduce((_,b)=>_+b,0)/r/1e3),f=uf.filter(_=>_>ig).reduce((_,b)=>_+(b-ig)/ig,0);return{loadTime:n,fullLoadTime:t,fps:l,percentDroppedFrames:f/(r+f)*100,totalFrames:r}}};w.$=class extends ae{},w.A=Nu,w.B=Gc,w.C=function(n){if(ue==null){const t=n.navigator?n.navigator.userAgent:null;ue=!!n.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return ue},w.D=sn,w.E=In,w.F=class{constructor(n,t){this.target=n,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new sd(()=>this.process()),this.subscription=function(r,l,f,_){return r.addEventListener(l,f,!1),{unsubscribe:()=>{r.removeEventListener(l,f,!1)}}}(this.target,"message",r=>this.receive(r)),this.globalScope=re(self)?n:window}registerMessageHandler(n,t){this.messageHandlers[n]=t}sendAsync(n,t){return new Promise((r,l)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:r,reject:l},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const E={id:f,type:"<cancel>",origin:location.origin,targetMapId:n.targetMapId,sourceMapId:this.mapId};this.target.postMessage(E)},{once:!0});const _=[],b=Object.assign(Object.assign({},n),{id:f,sourceMapId:this.mapId,origin:location.origin,data:io(n.data,_)});this.target.postMessage(b,{transfer:_})})}receive(n){const t=n.data,r=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[r];const l=this.abortControllers[r];return delete this.abortControllers[r],void(l&&l.abort())}if(re(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(this.taskQueue.length===0)return;const n=this.taskQueue.shift(),t=this.tasks[n];delete this.tasks[n],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(n,t)}processTask(n,t){return a(this,void 0,void 0,function*(){if(t.type==="<response>"){const f=this.resolveRejects[n];return delete this.resolveRejects[n],f?void(t.error?f.reject(Ns(t.error)):f.resolve(Ns(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(n,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=Ns(t.data),l=new AbortController;this.abortControllers[n]=l;try{const f=yield this.messageHandlers[t.type](t.sourceMapId,r,l);this.completeTask(n,null,f)}catch(f){this.completeTask(n,f)}})}completeTask(n,t,r){const l=[];delete this.abortControllers[n];const f={id:n,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?io(t):null,data:io(r,l)};this.target.postMessage(f,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},w.G=tt,w.H=function(){var n=new Nu(16);return Nu!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},w.I=Jd,w.J=function(n,t,r){var l,f,_,b,E,P,B,Y,oe,fe,ge,Ee,ke=r[0],Ge=r[1],Ke=r[2];return t===n?(n[12]=t[0]*ke+t[4]*Ge+t[8]*Ke+t[12],n[13]=t[1]*ke+t[5]*Ge+t[9]*Ke+t[13],n[14]=t[2]*ke+t[6]*Ge+t[10]*Ke+t[14],n[15]=t[3]*ke+t[7]*Ge+t[11]*Ke+t[15]):(f=t[1],_=t[2],b=t[3],E=t[4],P=t[5],B=t[6],Y=t[7],oe=t[8],fe=t[9],ge=t[10],Ee=t[11],n[0]=l=t[0],n[1]=f,n[2]=_,n[3]=b,n[4]=E,n[5]=P,n[6]=B,n[7]=Y,n[8]=oe,n[9]=fe,n[10]=ge,n[11]=Ee,n[12]=l*ke+E*Ge+oe*Ke+t[12],n[13]=f*ke+P*Ge+fe*Ke+t[13],n[14]=_*ke+B*Ge+ge*Ke+t[14],n[15]=b*ke+Y*Ge+Ee*Ke+t[15]),n},w.K=function(n,t,r){var l=r[0],f=r[1],_=r[2];return n[0]=t[0]*l,n[1]=t[1]*l,n[2]=t[2]*l,n[3]=t[3]*l,n[4]=t[4]*f,n[5]=t[5]*f,n[6]=t[6]*f,n[7]=t[7]*f,n[8]=t[8]*_,n[9]=t[9]*_,n[10]=t[10]*_,n[11]=t[11]*_,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},w.L=zd,w.M=function(n,t){const r={};for(let l=0;l<t.length;l++){const f=t[l];f in n&&(r[f]=n[f])}return r},w.N=s,w.O=F,w.P=C,w.Q=Z,w.R=_s,w.S=Rt,w.T=ji,w.U=Te,w.V=we,w.W=xe,w.X=ri,w.Y=I,w.Z=ot,w._=a,w.a=Le,w.a$=function(n,t){var r=n[0],l=n[1],f=n[2],_=n[3],b=n[4],E=n[5],P=n[6],B=n[7],Y=n[8],oe=n[9],fe=n[10],ge=n[11],Ee=n[12],ke=n[13],Ge=n[14],Ke=n[15],dt=t[0],it=t[1],ht=t[2],St=t[3],Ft=t[4],rn=t[5],An=t[6],nn=t[7],Jt=t[8],yn=t[9],fn=t[10],ln=t[11],Ct=t[12],xn=t[13],mn=t[14],Bn=t[15];return Math.abs(r-dt)<=lo*Math.max(1,Math.abs(r),Math.abs(dt))&&Math.abs(l-it)<=lo*Math.max(1,Math.abs(l),Math.abs(it))&&Math.abs(f-ht)<=lo*Math.max(1,Math.abs(f),Math.abs(ht))&&Math.abs(_-St)<=lo*Math.max(1,Math.abs(_),Math.abs(St))&&Math.abs(b-Ft)<=lo*Math.max(1,Math.abs(b),Math.abs(Ft))&&Math.abs(E-rn)<=lo*Math.max(1,Math.abs(E),Math.abs(rn))&&Math.abs(P-An)<=lo*Math.max(1,Math.abs(P),Math.abs(An))&&Math.abs(B-nn)<=lo*Math.max(1,Math.abs(B),Math.abs(nn))&&Math.abs(Y-Jt)<=lo*Math.max(1,Math.abs(Y),Math.abs(Jt))&&Math.abs(oe-yn)<=lo*Math.max(1,Math.abs(oe),Math.abs(yn))&&Math.abs(fe-fn)<=lo*Math.max(1,Math.abs(fe),Math.abs(fn))&&Math.abs(ge-ln)<=lo*Math.max(1,Math.abs(ge),Math.abs(ln))&&Math.abs(Ee-Ct)<=lo*Math.max(1,Math.abs(Ee),Math.abs(Ct))&&Math.abs(ke-xn)<=lo*Math.max(1,Math.abs(ke),Math.abs(xn))&&Math.abs(Ge-mn)<=lo*Math.max(1,Math.abs(Ge),Math.abs(mn))&&Math.abs(Ke-Bn)<=lo*Math.max(1,Math.abs(Ke),Math.abs(Bn))},w.a0=Kn,w.a1=Ot,w.a2=z,w.a3=n=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(r=>{t.onloadstart=()=>{r(t)};for(const l of n){const f=window.document.createElement("source");Wt(l)||(t.crossOrigin="Anonymous"),f.src=l,t.appendChild(f)}})},w.a4=function(){return $++},w.a5=Qt,w.a6=ou,w.a7=Ur,w.a8=Wi,w.a9=pi,w.aA=function(n){if(n.type==="custom")return new Km(n);switch(n.type){case"background":return new qm(n);case"circle":return new Qf(n);case"fill":return new bo(n);case"fill-extrusion":return new ya(n);case"heatmap":return new Od(n);case"hillshade":return new op(n);case"line":return new ws(n);case"raster":return new Sh(n);case"symbol":return new Ec(n)}},w.aB=K,w.aC=function(n,t){if(!n)return[{command:"setStyle",args:[t]}];let r=[];try{if(!en(n.version,t.version))return[{command:"setStyle",args:[t]}];en(n.center,t.center)||r.push({command:"setCenter",args:[t.center]}),en(n.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),en(n.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),en(n.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),en(n.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),en(n.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),en(n.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),en(n.light,t.light)||r.push({command:"setLight",args:[t.light]}),en(n.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),en(n.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),en(n.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const l={},f=[];(function(b,E,P,B){let Y;for(Y in E=E||{},b=b||{})Object.prototype.hasOwnProperty.call(b,Y)&&(Object.prototype.hasOwnProperty.call(E,Y)||H(Y,P,B));for(Y in E)Object.prototype.hasOwnProperty.call(E,Y)&&(Object.prototype.hasOwnProperty.call(b,Y)?en(b[Y],E[Y])||(b[Y].type==="geojson"&&E[Y].type==="geojson"&&rt(b,E,Y)?ze(P,{command:"setGeoJSONSourceData",args:[Y,E[Y].data]}):Ce(Y,E,P,B)):G(Y,E,P))})(n.sources,t.sources,f,l);const _=[];n.layers&&n.layers.forEach(b=>{"source"in b&&l[b.source]?r.push({command:"removeLayer",args:[b.id]}):_.push(b)}),r=r.concat(f),function(b,E,P){E=E||[];const B=(b=b||[]).map(Et),Y=E.map(Et),oe=b.reduce(ye,{}),fe=E.reduce(ye,{}),ge=B.slice(),Ee=Object.create(null);let ke,Ge,Ke,dt,it;for(let ht=0,St=0;ht<B.length;ht++)ke=B[ht],Object.prototype.hasOwnProperty.call(fe,ke)?St++:(ze(P,{command:"removeLayer",args:[ke]}),ge.splice(ge.indexOf(ke,St),1));for(let ht=0,St=0;ht<Y.length;ht++)ke=Y[Y.length-1-ht],ge[ge.length-1-ht]!==ke&&(Object.prototype.hasOwnProperty.call(oe,ke)?(ze(P,{command:"removeLayer",args:[ke]}),ge.splice(ge.lastIndexOf(ke,ge.length-St),1)):St++,dt=ge[ge.length-ht],ze(P,{command:"addLayer",args:[fe[ke],dt]}),ge.splice(ge.length-ht,0,ke),Ee[ke]=!0);for(let ht=0;ht<Y.length;ht++)if(ke=Y[ht],Ge=oe[ke],Ke=fe[ke],!Ee[ke]&&!en(Ge,Ke))if(en(Ge.source,Ke.source)&&en(Ge["source-layer"],Ke["source-layer"])&&en(Ge.type,Ke.type)){for(it in ct(Ge.layout,Ke.layout,P,ke,null,"setLayoutProperty"),ct(Ge.paint,Ke.paint,P,ke,null,"setPaintProperty"),en(Ge.filter,Ke.filter)||ze(P,{command:"setFilter",args:[ke,Ke.filter]}),en(Ge.minzoom,Ke.minzoom)&&en(Ge.maxzoom,Ke.maxzoom)||ze(P,{command:"setLayerZoomRange",args:[ke,Ke.minzoom,Ke.maxzoom]}),Ge)Object.prototype.hasOwnProperty.call(Ge,it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?ct(Ge[it],Ke[it],P,ke,it.slice(6),"setPaintProperty"):en(Ge[it],Ke[it])||ze(P,{command:"setLayerProperty",args:[ke,it,Ke[it]]}));for(it in Ke)Object.prototype.hasOwnProperty.call(Ke,it)&&!Object.prototype.hasOwnProperty.call(Ge,it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?ct(Ge[it],Ke[it],P,ke,it.slice(6),"setPaintProperty"):en(Ge[it],Ke[it])||ze(P,{command:"setLayerProperty",args:[ke,it,Ke[it]]}))}else ze(P,{command:"removeLayer",args:[ke]}),dt=ge[ge.lastIndexOf(ke)+1],ze(P,{command:"addLayer",args:[Ke,dt]})}(_,t.layers,r)}catch(l){console.warn("Unable to compute style diff:",l),r=[{command:"setStyle",args:[t]}]}return r},w.aD=function(n){const t=[],r=n.id;return r===void 0&&t.push({message:`layers.${r}: missing required property "id"`}),n.render===void 0&&t.push({message:`layers.${r}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},w.aE=function n(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let l=0;l<t.length;l++)if(!n(t[l],r[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&r!==null){if(typeof r!="object"||Object.keys(t).length!==Object.keys(r).length)return!1;for(const l in t)if(!n(t[l],r[l]))return!1;return!0}return t===r},w.aF=U,w.aG=de,w.aH=class extends Ar{constructor(n,t){super(n,t),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},w.aI=Du,w.aJ=class extends Ar{constructor(n,t){super(n,t),this.current=Dh}set(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}},w.aK=jh,w.aL=Lh,w.aM=Pn,w.aN=class extends Ar{constructor(n,t){super(n,t),this.current=[0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))}},w.aO=class extends Ar{constructor(n,t){super(n,t),this.current=[0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))}},w.aP=function(n,t,r,l,f,_,b){var E=1/(t-r),P=1/(l-f),B=1/(_-b);return n[0]=-2*E,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*P,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*B,n[11]=0,n[12]=(t+r)*E,n[13]=(f+l)*P,n[14]=(b+_)*B,n[15]=1,n},w.aQ=Jf,w.aR=class extends st{},w.aS=Zd,w.aT=class extends mt{},w.aU=th,w.aV=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},w.aW=Uu,w.aX=Si,w.aY=qo,w.aZ=class extends hn{},w.a_=function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]},w.aa=function(n){const t={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,l,f,_)=>{const b=f||_;return t[l]=!b||b.toLowerCase(),""}),t["max-age"]){const r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t},w.ab=function(n,t){const r=[];for(const l in n)l in t||r.push(l);return r},w.ac=ne,w.ad=function(n,t,r){var l=Math.sin(r),f=Math.cos(r),_=t[0],b=t[1],E=t[2],P=t[3],B=t[4],Y=t[5],oe=t[6],fe=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=_*f+B*l,n[1]=b*f+Y*l,n[2]=E*f+oe*l,n[3]=P*f+fe*l,n[4]=B*f-_*l,n[5]=Y*f-b*l,n[6]=oe*f-E*l,n[7]=fe*f-P*l,n},w.ae=function(n){var t=new Nu(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},w.af=Gh,w.ag=function(n,t){let r=0,l=0;if(n.kind==="constant")l=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:f,minZoom:_,maxZoom:b}=n,E=f?ne(hi.interpolationFactor(f,t,_,b),0,1):0;n.kind==="camera"?l=Gr.number(n.minSize,n.maxSize,E):r=E}return{uSizeT:r,uSize:l}},w.ai=function(n,{uSize:t,uSizeT:r},{lowerSize:l,upperSize:f}){return n.kind==="source"?l/Ss:n.kind==="composite"?Gr.number(l/Ss,f/Ss,r):t},w.aj=rd,w.ak=function(n,t,r,l){const f=t.y-n.y,_=t.x-n.x,b=l.y-r.y,E=l.x-r.x,P=b*_-E*f;if(P===0)return null;const B=(E*(n.y-r.y)-b*(n.x-r.x))/P;return new C(n.x+B*_,n.y+B*f)},w.al=Tn,w.am=Nh,w.an=Jc,w.ao=function(n){let t=1/0,r=1/0,l=-1/0,f=-1/0;for(const _ of n)t=Math.min(t,_.x),r=Math.min(r,_.y),l=Math.max(l,_.x),f=Math.max(f,_.y);return[t,r,l,f]},w.ap=ai,w.ar=of,w.as=function(n,t){var r=t[0],l=t[1],f=t[2],_=t[3],b=t[4],E=t[5],P=t[6],B=t[7],Y=t[8],oe=t[9],fe=t[10],ge=t[11],Ee=t[12],ke=t[13],Ge=t[14],Ke=t[15],dt=r*E-l*b,it=r*P-f*b,ht=r*B-_*b,St=l*P-f*E,Ft=l*B-_*E,rn=f*B-_*P,An=Y*ke-oe*Ee,nn=Y*Ge-fe*Ee,Jt=Y*Ke-ge*Ee,yn=oe*Ge-fe*ke,fn=oe*Ke-ge*ke,ln=fe*Ke-ge*Ge,Ct=dt*ln-it*fn+ht*yn+St*Jt-Ft*nn+rn*An;return Ct?(n[0]=(E*ln-P*fn+B*yn)*(Ct=1/Ct),n[1]=(f*fn-l*ln-_*yn)*Ct,n[2]=(ke*rn-Ge*Ft+Ke*St)*Ct,n[3]=(fe*Ft-oe*rn-ge*St)*Ct,n[4]=(P*Jt-b*ln-B*nn)*Ct,n[5]=(r*ln-f*Jt+_*nn)*Ct,n[6]=(Ge*ht-Ee*rn-Ke*it)*Ct,n[7]=(Y*rn-fe*ht+ge*it)*Ct,n[8]=(b*fn-E*Jt+B*An)*Ct,n[9]=(l*Jt-r*fn-_*An)*Ct,n[10]=(Ee*Ft-ke*ht+Ke*dt)*Ct,n[11]=(oe*ht-Y*Ft-ge*dt)*Ct,n[12]=(E*nn-b*yn-P*An)*Ct,n[13]=(r*yn-l*nn+f*An)*Ct,n[14]=(ke*it-Ee*St-Ge*dt)*Ct,n[15]=(Y*St-oe*it+fe*dt)*Ct,n):null},w.at=Qm,w.au=Yo,w.av=eg,w.aw=function(){const n={},t=at.$version;for(const r in at.$root){const l=at.$root[r];if(l.required){let f=null;f=r==="version"?t:l.type==="array"?[]:{},f!=null&&(n[r]=f)}}return n},w.ax=ms,w.ay=_t,w.az=function(n){n=n.slice();const t=Object.create(null);for(let r=0;r<n.length;r++)t[n[r].id]=n[r];for(let r=0;r<n.length;r++)"ref"in n[r]&&(n[r]=cn(n[r],t[n[r].ref]));return n},w.b=te,w.b0=function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},w.b1=function(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n},w.b2=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},w.b3=ce,w.b4=Vt,w.b5=Se,w.b6=function(n,t,r,l,f){var _,b=1/Math.tan(t/2);return n[0]=b/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=b,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,f!=null&&f!==1/0?(n[10]=(f+l)*(_=1/(l-f)),n[14]=2*f*l*_):(n[10]=-1,n[14]=-2*l),n},w.b7=function(n,t,r){var l=Math.sin(r),f=Math.cos(r),_=t[4],b=t[5],E=t[6],P=t[7],B=t[8],Y=t[9],oe=t[10],fe=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=_*f+B*l,n[5]=b*f+Y*l,n[6]=E*f+oe*l,n[7]=P*f+fe*l,n[8]=B*f-_*l,n[9]=Y*f-b*l,n[10]=oe*f-E*l,n[11]=fe*f-P*l,n},w.b8=_e,w.b9=Me,w.bA=Wu,w.bB=function(n){return n.message===De},w.bC=Kt,w.bD=Sr,w.ba=function(n){return n*Math.PI/180},w.bb=function(n,t){const{x:r,y:l}=ot.fromLngLat(t);return!(n<0||n>25||l<0||l>=1||r<0||r>=1)},w.bc=function(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},w.bd=class extends X{},w.be=i,w.bf=zw,w.bh=pt,w.bi=function(n,t){Le.REGISTERED_PROTOCOLS[n]=t},w.bj=function(n){delete Le.REGISTERED_PROTOCOLS[n]},w.bk=function(n,t){const r={};for(let f=0;f<n.length;f++){const _=t&&t[n[f].id]||Bc(n[f]);t&&(t[n[f].id]=_);let b=r[_];b||(b=r[_]=[]),b.push(n[f])}const l=[];for(const f in r)l.push(r[f]);return l},w.bl=on,w.bm=bn,w.bn=vt,w.bo=Cp,w.bp=function(n){n.bucket.createArrays(),n.bucket.tilePixelRatio=ri/(512*n.bucket.overscaling),n.bucket.compareText={},n.bucket.iconsNeedLinear=!1;const t=n.bucket.layers[0],r=t.layout,l=t._unevaluatedLayout._values,f={layoutIconSize:l["icon-size"].possiblyEvaluate(new tr(n.bucket.zoom+1),n.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new tr(n.bucket.zoom+1),n.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new tr(18))};if(n.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:Y}=n.bucket.textSizeData;f.compositeTextSizes=[l["text-size"].possiblyEvaluate(new tr(B),n.canonical),l["text-size"].possiblyEvaluate(new tr(Y),n.canonical)]}if(n.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:Y}=n.bucket.iconSizeData;f.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new tr(B),n.canonical),l["icon-size"].possiblyEvaluate(new tr(Y),n.canonical)]}const _=r.get("text-line-height")*ai,b=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",E=r.get("text-keep-upright"),P=r.get("text-size");for(const B of n.bucket.features){const Y=r.get("text-font").evaluate(B,{},n.canonical).join(","),oe=P.evaluate(B,{},n.canonical),fe=f.layoutTextSize.evaluate(B,{},n.canonical),ge=f.layoutIconSize.evaluate(B,{},n.canonical),Ee={horizontal:{},vertical:void 0},ke=B.text;let Ge,Ke=[0,0];if(ke){const ht=ke.toString(),St=r.get("text-letter-spacing").evaluate(B,{},n.canonical)*ai,Ft=Cd(ht)?St:0,rn=r.get("text-anchor").evaluate(B,{},n.canonical),An=tv(t,B,n.canonical);if(!An){const fn=r.get("text-radial-offset").evaluate(B,{},n.canonical);Ke=fn?ev(rn,[fn*ai,Jm]):r.get("text-offset").evaluate(B,{},n.canonical).map(ln=>ln*ai)}let nn=b?"center":r.get("text-justify").evaluate(B,{},n.canonical);const Jt=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(B,{},n.canonical)*ai:1/0,yn=()=>{n.bucket.allowVerticalPlacement&&Hc(ht)&&(Ee.vertical=wl(ke,n.glyphMap,n.glyphPositions,n.imagePositions,Y,Jt,_,rn,"left",Ft,Ke,w.ah.vertical,!0,fe,oe))};if(!b&&An){const fn=new Set;if(nn==="auto")for(let Ct=0;Ct<An.values.length;Ct+=2)fn.add(Qm(An.values[Ct]));else fn.add(nn);let ln=!1;for(const Ct of fn)if(!Ee.horizontal[Ct])if(ln)Ee.horizontal[Ct]=Ee.horizontal[0];else{const xn=wl(ke,n.glyphMap,n.glyphPositions,n.imagePositions,Y,Jt,_,"center",Ct,Ft,Ke,w.ah.horizontal,!1,fe,oe);xn&&(Ee.horizontal[Ct]=xn,ln=xn.positionedLines.length===1)}yn()}else{nn==="auto"&&(nn=Qm(rn));const fn=wl(ke,n.glyphMap,n.glyphPositions,n.imagePositions,Y,Jt,_,rn,nn,Ft,Ke,w.ah.horizontal,!1,fe,oe);fn&&(Ee.horizontal[nn]=fn),yn(),Hc(ht)&&b&&E&&(Ee.vertical=wl(ke,n.glyphMap,n.glyphPositions,n.imagePositions,Y,Jt,_,rn,nn,Ft,Ke,w.ah.vertical,!1,fe,oe))}}let dt=!1;if(B.icon&&B.icon.name){const ht=n.imageMap[B.icon.name];ht&&(Ge=Zm(n.imagePositions[B.icon.name],r.get("icon-offset").evaluate(B,{},n.canonical),r.get("icon-anchor").evaluate(B,{},n.canonical)),dt=!!ht.sdf,n.bucket.sdfIcons===void 0?n.bucket.sdfIcons=dt:n.bucket.sdfIcons!==dt&&W("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ht.pixelRatio!==n.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(n.bucket.iconsNeedLinear=!0))}const it=rv(Ee.horizontal)||Ee.vertical;n.bucket.iconsInText=!!it&&it.iconsInText,(it||Ge)&&Mw(n.bucket,B,Ee,Ge,n.imageMap,f,fe,ge,Ke,dt,n.canonical)}n.showCollisionBoxes&&n.bucket.generateCollisionDebugBuffers()},w.bq=uh,w.br=ih,w.bs=Bi,w.bt=si,w.bu=mh,w.bv=class{constructor(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let n=performance.getEntriesByName(this._marks.measure);return n.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),n=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),n}},w.bw=function(n,t,r,l,f){return a(this,void 0,void 0,function*(){if(we())try{return yield xe(n,t,r,l,f)}catch{}return function(_,b,E,P,B){const Y=_.width,oe=_.height;ie&&ve||(ie=new OffscreenCanvas(Y,oe),ve=ie.getContext("2d",{willReadFrequently:!0})),ie.width=Y,ie.height=oe,ve.drawImage(_,0,0,Y,oe);const fe=ve.getImageData(b,E,P,B);return ve.clearRect(0,0,Y,oe),fe.data}(n,t,r,l,f)})},w.bx=_n,w.by=L,w.bz=R,w.c=Oe,w.d=n=>a(void 0,void 0,void 0,function*(){if(n.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(n)],{type:"image/png"});try{return createImageBitmap(t)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),w.e=M,w.f=n=>new Promise((t,r)=>{const l=new Image;l.onload=()=>{t(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=se})},l.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(n)],{type:"image/png"});l.src=n.byteLength?URL.createObjectURL(f):se}),w.g=Ye,w.h=(n,t)=>Pt(M(n,{type:"json"}),t),w.i=re,w.j=un,w.k=Yt,w.l=(n,t)=>Pt(M(n,{type:"arrayBuffer"}),t),w.m=Pt,w.n=function(n){return new mh(n).readFields(Kd,[])},w.o=eh,w.p=td,w.q=y,w.r=$c,w.s=Wt,w.t=fc,w.u=sa,w.v=at,w.w=W,w.x=function([n,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:n*Math.cos(t)*Math.sin(r),y:n*Math.sin(t)*Math.sin(r),z:n*Math.cos(r)}},w.y=Gr,w.z=tr}),x("worker",["./shared"],function(w){class a{constructor(me){this.keyCache={},me&&this.replace(me)}replace(me){this._layerConfigs={},this._layers={},this.update(me,[])}update(me,pe){for(const je of me){this._layerConfigs[je.id]=je;const Be=this._layers[je.id]=w.aA(je);Be._featureFilter=w.a7(Be.filter),this.keyCache[je.id]&&delete this.keyCache[je.id]}for(const je of pe)delete this.keyCache[je],delete this._layerConfigs[je],delete this._layers[je];this.familiesBySource={};const Pe=w.bk(Object.values(this._layerConfigs),this.keyCache);for(const je of Pe){const Be=je.map(gt=>this._layers[gt.id]),He=Be[0];if(He.visibility==="none")continue;const nt=He.source||"";let Ze=this.familiesBySource[nt];Ze||(Ze=this.familiesBySource[nt]={});const yt=He.sourceLayer||"_geojsonTileLayer";let It=Ze[yt];It||(It=Ze[yt]=[]),It.push(Be)}}}class L{constructor(me){const pe={},Pe=[];for(const nt in me){const Ze=me[nt],yt=pe[nt]={};for(const It in Ze){const gt=Ze[+It];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const Ut={x:0,y:0,w:gt.bitmap.width+2,h:gt.bitmap.height+2};Pe.push(Ut),yt[It]={rect:Ut,metrics:gt.metrics}}}const{w:je,h:Be}=w.p(Pe),He=new w.o({width:je||1,height:Be||1});for(const nt in me){const Ze=me[nt];for(const yt in Ze){const It=Ze[+yt];if(!It||It.bitmap.width===0||It.bitmap.height===0)continue;const gt=pe[nt][yt].rect;w.o.copy(It.bitmap,He,{x:0,y:0},{x:gt.x+1,y:gt.y+1},It.bitmap)}}this.image=He,this.positions=pe}}w.bl("GlyphAtlas",L);class R{constructor(me){this.tileID=new w.S(me.tileID.overscaledZ,me.tileID.wrap,me.tileID.canonical.z,me.tileID.canonical.x,me.tileID.canonical.y),this.uid=me.uid,this.zoom=me.zoom,this.pixelRatio=me.pixelRatio,this.tileSize=me.tileSize,this.source=me.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=me.showCollisionBoxes,this.collectResourceTiming=!!me.collectResourceTiming,this.returnDependencies=!!me.returnDependencies,this.promoteId=me.promoteId,this.inFlightDependencies=[]}parse(me,pe,Pe,je){return w._(this,void 0,void 0,function*(){this.status="parsing",this.data=me,this.collisionBoxArray=new w.a5;const Be=new w.bm(Object.keys(me.layers).sort()),He=new w.bn(this.tileID,this.promoteId);He.bucketLayerIDs=[];const nt={},Ze={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Pe},yt=pe.familiesBySource[this.source];for(const Wn in yt){const lr=me.layers[Wn];if(!lr)continue;lr.version===1&&w.w(`Vector tile source "${this.source}" layer "${Wn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const br=Be.encode(Wn),ii=[];for(let ci=0;ci<lr.length;ci++){const zi=lr.feature(ci),is=He.getId(zi,Wn);ii.push({feature:zi,id:is,index:ci,sourceLayerIndex:br})}for(const ci of yt[Wn]){const zi=ci[0];zi.source!==this.source&&w.w(`layer.source = ${zi.source} does not equal this.source = ${this.source}`),zi.minzoom&&this.zoom<Math.floor(zi.minzoom)||zi.maxzoom&&this.zoom>=zi.maxzoom||zi.visibility!=="none"&&(D(ci,this.zoom,Pe),(nt[zi.id]=zi.createBucket({index:He.bucketLayerIDs.length,layers:ci,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:br,sourceID:this.source})).populate(ii,Ze,this.tileID.canonical),He.bucketLayerIDs.push(ci.map(is=>is.id)))}}const It=w.aF(Ze.glyphDependencies,Wn=>Object.keys(Wn).map(Number));this.inFlightDependencies.forEach(Wn=>Wn==null?void 0:Wn.abort()),this.inFlightDependencies=[];let gt=Promise.resolve({});if(Object.keys(It).length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),gt=je.sendAsync({type:"GG",data:{stacks:It,source:this.source,tileID:this.tileID,type:"glyphs"}},Wn)}const Ut=Object.keys(Ze.iconDependencies);let pn=Promise.resolve({});if(Ut.length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),pn=je.sendAsync({type:"GI",data:{icons:Ut,source:this.source,tileID:this.tileID,type:"icons"}},Wn)}const vn=Object.keys(Ze.patternDependencies);let Jn=Promise.resolve({});if(vn.length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),Jn=je.sendAsync({type:"GI",data:{icons:vn,source:this.source,tileID:this.tileID,type:"patterns"}},Wn)}const[jn,Qn,Un]=yield Promise.all([gt,pn,Jn]),jr=new L(jn),xr=new w.bo(Qn,Un);for(const Wn in nt){const lr=nt[Wn];lr instanceof w.a6?(D(lr.layers,this.zoom,Pe),w.bp({bucket:lr,glyphMap:jn,glyphPositions:jr.positions,imageMap:Qn,imagePositions:xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):lr.hasPattern&&(lr instanceof w.bq||lr instanceof w.br||lr instanceof w.bs)&&(D(lr.layers,this.zoom,Pe),lr.addFeatures(Ze,this.tileID.canonical,xr.patternPositions))}return this.status="done",{buckets:Object.values(nt).filter(Wn=>!Wn.isEmpty()),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jr.image,imageAtlas:xr,glyphMap:this.returnDependencies?jn:null,iconMap:this.returnDependencies?Qn:null,glyphPositions:this.returnDependencies?jr.positions:null}})}}function D(Ue,me,pe){const Pe=new w.z(me);for(const je of Ue)je.recalculate(Pe,pe)}class C{constructor(me,pe,Pe){this.actor=me,this.layerIndex=pe,this.availableImages=Pe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(me,pe){return w._(this,void 0,void 0,function*(){const Pe=yield w.l(me.request,pe);try{return{vectorTile:new w.bt.VectorTile(new w.bu(Pe.data)),rawData:Pe.data,cacheControl:Pe.cacheControl,expires:Pe.expires}}catch(je){const Be=new Uint8Array(Pe.data);let He=`Unable to parse the tile at ${me.request.url}, `;throw He+=Be[0]===31&&Be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${je.message}`,new Error(He)}})}loadTile(me){return w._(this,void 0,void 0,function*(){const pe=me.uid,Pe=!!(me&&me.request&&me.request.collectResourceTiming)&&new w.bv(me.request),je=new R(me);this.loading[pe]=je;const Be=new AbortController;je.abort=Be;try{const He=yield this.loadVectorTile(me,Be);if(delete this.loading[pe],!He)return null;const nt=He.rawData,Ze={};He.expires&&(Ze.expires=He.expires),He.cacheControl&&(Ze.cacheControl=He.cacheControl);const yt={};if(Pe){const gt=Pe.finish();gt&&(yt.resourceTiming=JSON.parse(JSON.stringify(gt)))}je.vectorTile=He.vectorTile;const It=je.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[pe]=je,this.fetching[pe]={rawTileData:nt,cacheControl:Ze,resourceTiming:yt};try{const gt=yield It;return w.e({rawTileData:nt.slice(0)},gt,Ze,yt)}finally{delete this.fetching[pe]}}catch(He){throw delete this.loading[pe],je.status="done",this.loaded[pe]=je,He}})}reloadTile(me){return w._(this,void 0,void 0,function*(){const pe=me.uid;if(!this.loaded||!this.loaded[pe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Pe=this.loaded[pe];if(Pe.showCollisionBoxes=me.showCollisionBoxes,Pe.status==="parsing"){const je=yield Pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor);let Be;if(this.fetching[pe]){const{rawTileData:He,cacheControl:nt,resourceTiming:Ze}=this.fetching[pe];delete this.fetching[pe],Be=w.e({rawTileData:He.slice(0)},je,nt,Ze)}else Be=je;return Be}if(Pe.status==="done"&&Pe.vectorTile)return Pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(me){return w._(this,void 0,void 0,function*(){const pe=this.loading,Pe=me.uid;pe&&pe[Pe]&&pe[Pe].abort&&(pe[Pe].abort.abort(),delete pe[Pe])})}removeTile(me){return w._(this,void 0,void 0,function*(){this.loaded&&this.loaded[me.uid]&&delete this.loaded[me.uid]})}}class k{constructor(){this.loaded={}}loadTile(me){return w._(this,void 0,void 0,function*(){const{uid:pe,encoding:Pe,rawImageData:je,redFactor:Be,greenFactor:He,blueFactor:nt,baseShift:Ze}=me,yt=je.width+2,It=je.height+2,gt=w.b(je)?new w.R({width:yt,height:It},yield w.bw(je,-1,-1,yt,It)):je,Ut=new w.bx(pe,gt,Pe,Be,He,nt,Ze);return this.loaded=this.loaded||{},this.loaded[pe]=Ut,Ut})}removeTile(me){const pe=this.loaded,Pe=me.uid;pe&&pe[Pe]&&delete pe[Pe]}}function V(Ue,me){if(Ue.length!==0){N(Ue[0],me);for(var pe=1;pe<Ue.length;pe++)N(Ue[pe],!me)}}function N(Ue,me){for(var pe=0,Pe=0,je=0,Be=Ue.length,He=Be-1;je<Be;He=je++){var nt=(Ue[je][0]-Ue[He][0])*(Ue[He][1]+Ue[je][1]),Ze=pe+nt;Pe+=Math.abs(pe)>=Math.abs(nt)?pe-Ze+nt:nt-Ze+pe,pe=Ze}pe+Pe>=0!=!!me&&Ue.reverse()}var Q=w.by(function Ue(me,pe){var Pe,je=me&&me.type;if(je==="FeatureCollection")for(Pe=0;Pe<me.features.length;Pe++)Ue(me.features[Pe],pe);else if(je==="GeometryCollection")for(Pe=0;Pe<me.geometries.length;Pe++)Ue(me.geometries[Pe],pe);else if(je==="Feature")Ue(me.geometry,pe);else if(je==="Polygon")V(me.coordinates,pe);else if(je==="MultiPolygon")for(Pe=0;Pe<me.coordinates.length;Pe++)V(me.coordinates[Pe],pe);return me});const he=w.bt.VectorTileFeature.prototype.toGeoJSON;var Te={exports:{}},we=w.bz,_e=w.bt.VectorTileFeature,Me=ne;function ne(Ue,me){this.options=me||{},this.features=Ue,this.length=Ue.length}function ce(Ue,me){this.id=typeof Ue.id=="number"?Ue.id:void 0,this.type=Ue.type,this.rawGeometry=Ue.type===1?[Ue.geometry]:Ue.geometry,this.properties=Ue.tags,this.extent=me||4096}ne.prototype.feature=function(Ue){return new ce(this.features[Ue],this.options.extent)},ce.prototype.loadGeometry=function(){var Ue=this.rawGeometry;this.geometry=[];for(var me=0;me<Ue.length;me++){for(var pe=Ue[me],Pe=[],je=0;je<pe.length;je++)Pe.push(new we(pe[je][0],pe[je][1]));this.geometry.push(Pe)}return this.geometry},ce.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ue=this.geometry,me=1/0,pe=-1/0,Pe=1/0,je=-1/0,Be=0;Be<Ue.length;Be++)for(var He=Ue[Be],nt=0;nt<He.length;nt++){var Ze=He[nt];me=Math.min(me,Ze.x),pe=Math.max(pe,Ze.x),Pe=Math.min(Pe,Ze.y),je=Math.max(je,Ze.y)}return[me,Pe,pe,je]},ce.prototype.toGeoJSON=_e.prototype.toGeoJSON;var M=w.bA,$=Me;function U(Ue){var me=new M;return function(pe,Pe){for(var je in pe.layers)Pe.writeMessage(3,de,pe.layers[je])}(Ue,me),me.finish()}function de(Ue,me){var pe;me.writeVarintField(15,Ue.version||1),me.writeStringField(1,Ue.name||""),me.writeVarintField(5,Ue.extent||4096);var Pe={keys:[],values:[],keycache:{},valuecache:{}};for(pe=0;pe<Ue.length;pe++)Pe.feature=Ue.feature(pe),me.writeMessage(2,K,Pe);var je=Pe.keys;for(pe=0;pe<je.length;pe++)me.writeStringField(3,je[pe]);var Be=Pe.values;for(pe=0;pe<Be.length;pe++)me.writeMessage(4,ue,Be[pe])}function K(Ue,me){var pe=Ue.feature;pe.id!==void 0&&me.writeVarintField(1,pe.id),me.writeMessage(2,j,Ue),me.writeVarintField(3,pe.type),me.writeMessage(4,re,pe)}function j(Ue,me){var pe=Ue.feature,Pe=Ue.keys,je=Ue.values,Be=Ue.keycache,He=Ue.valuecache;for(var nt in pe.properties){var Ze=pe.properties[nt],yt=Be[nt];if(Ze!==null){yt===void 0&&(Pe.push(nt),Be[nt]=yt=Pe.length-1),me.writeVarint(yt);var It=typeof Ze;It!=="string"&&It!=="boolean"&&It!=="number"&&(Ze=JSON.stringify(Ze));var gt=It+":"+Ze,Ut=He[gt];Ut===void 0&&(je.push(Ze),He[gt]=Ut=je.length-1),me.writeVarint(Ut)}}}function W(Ue,me){return(me<<3)+(7&Ue)}function J(Ue){return Ue<<1^Ue>>31}function re(Ue,me){for(var pe=Ue.loadGeometry(),Pe=Ue.type,je=0,Be=0,He=pe.length,nt=0;nt<He;nt++){var Ze=pe[nt],yt=1;Pe===1&&(yt=Ze.length),me.writeVarint(W(1,yt));for(var It=Pe===3?Ze.length-1:Ze.length,gt=0;gt<It;gt++){gt===1&&Pe!==1&&me.writeVarint(W(2,It-1));var Ut=Ze[gt].x-je,pn=Ze[gt].y-Be;me.writeVarint(J(Ut)),me.writeVarint(J(pn)),je+=Ut,Be+=pn}Pe===3&&me.writeVarint(W(7,1))}}function ue(Ue,me){var pe=typeof Ue;pe==="string"?me.writeStringField(1,Ue):pe==="boolean"?me.writeBooleanField(7,Ue):pe==="number"&&(Ue%1!=0?me.writeDoubleField(3,Ue):Ue<0?me.writeSVarintField(6,Ue):me.writeVarintField(5,Ue))}Te.exports=U,Te.exports.fromVectorTileJs=U,Te.exports.fromGeojsonVt=function(Ue,me){me=me||{};var pe={};for(var Pe in Ue)pe[Pe]=new $(Ue[Pe].features,me),pe[Pe].name=Pe,pe[Pe].version=me.version,pe[Pe].extent=me.extent;return U({layers:pe})},Te.exports.GeoJSONWrapper=$;var te=w.by(Te.exports);const se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ue=>Ue},xe=Math.fround||(ie=new Float32Array(1),Ue=>(ie[0]=+Ue,ie[0]));var ie;const ve=3,De=5,Oe=6;class Le{constructor(me){this.options=Object.assign(Object.create(se),me),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(me){const{log:pe,minZoom:Pe,maxZoom:je}=this.options;pe&&console.time("total time");const Be=`prepare ${me.length} points`;pe&&console.time(Be),this.points=me;const He=[];for(let Ze=0;Ze<me.length;Ze++){const yt=me[Ze];if(!yt.geometry)continue;const[It,gt]=yt.geometry.coordinates,Ut=xe(pt(It)),pn=xe(_t(gt));He.push(Ut,pn,1/0,Ze,-1,1),this.options.reduce&&He.push(0)}let nt=this.trees[je+1]=this._createTree(He);pe&&console.timeEnd(Be);for(let Ze=je;Ze>=Pe;Ze--){const yt=+Date.now();nt=this.trees[Ze]=this._createTree(this._cluster(nt,Ze)),pe&&console.log("z%d: %d clusters in %dms",Ze,nt.numItems,+Date.now()-yt)}return pe&&console.timeEnd("total time"),this}getClusters(me,pe){let Pe=((me[0]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,me[1]));let Be=me[2]===180?180:((me[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,me[3]));if(me[2]-me[0]>=360)Pe=-180,Be=180;else if(Pe>Be){const gt=this.getClusters([Pe,je,180,He],pe),Ut=this.getClusters([-180,je,Be,He],pe);return gt.concat(Ut)}const nt=this.trees[this._limitZoom(pe)],Ze=nt.range(pt(Pe),_t(He),pt(Be),_t(je)),yt=nt.data,It=[];for(const gt of Ze){const Ut=this.stride*gt;It.push(yt[Ut+De]>1?Ye(yt,Ut,this.clusterProps):this.points[yt[Ut+ve]])}return It}getChildren(me){const pe=this._getOriginId(me),Pe=this._getOriginZoom(me),je="No cluster with the specified id.",Be=this.trees[Pe];if(!Be)throw new Error(je);const He=Be.data;if(pe*this.stride>=He.length)throw new Error(je);const nt=this.options.radius/(this.options.extent*Math.pow(2,Pe-1)),Ze=Be.within(He[pe*this.stride],He[pe*this.stride+1],nt),yt=[];for(const It of Ze){const gt=It*this.stride;He[gt+4]===me&&yt.push(He[gt+De]>1?Ye(He,gt,this.clusterProps):this.points[He[gt+ve]])}if(yt.length===0)throw new Error(je);return yt}getLeaves(me,pe,Pe){const je=[];return this._appendLeaves(je,me,pe=pe||10,Pe=Pe||0,0),je}getTile(me,pe,Pe){const je=this.trees[this._limitZoom(me)],Be=Math.pow(2,me),{extent:He,radius:nt}=this.options,Ze=nt/He,yt=(Pe-Ze)/Be,It=(Pe+1+Ze)/Be,gt={features:[]};return this._addTileFeatures(je.range((pe-Ze)/Be,yt,(pe+1+Ze)/Be,It),je.data,pe,Pe,Be,gt),pe===0&&this._addTileFeatures(je.range(1-Ze/Be,yt,1,It),je.data,Be,Pe,Be,gt),pe===Be-1&&this._addTileFeatures(je.range(0,yt,Ze/Be,It),je.data,-1,Pe,Be,gt),gt.features.length?gt:null}getClusterExpansionZoom(me){let pe=this._getOriginZoom(me)-1;for(;pe<=this.options.maxZoom;){const Pe=this.getChildren(me);if(pe++,Pe.length!==1)break;me=Pe[0].properties.cluster_id}return pe}_appendLeaves(me,pe,Pe,je,Be){const He=this.getChildren(pe);for(const nt of He){const Ze=nt.properties;if(Ze&&Ze.cluster?Be+Ze.point_count<=je?Be+=Ze.point_count:Be=this._appendLeaves(me,Ze.cluster_id,Pe,je,Be):Be<je?Be++:me.push(nt),me.length===Pe)break}return Be}_createTree(me){const pe=new w.av(me.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Pe=0;Pe<me.length;Pe+=this.stride)pe.add(me[Pe],me[Pe+1]);return pe.finish(),pe.data=me,pe}_addTileFeatures(me,pe,Pe,je,Be,He){for(const nt of me){const Ze=nt*this.stride,yt=pe[Ze+De]>1;let It,gt,Ut;if(yt)It=tt(pe,Ze,this.clusterProps),gt=pe[Ze],Ut=pe[Ze+1];else{const Jn=this.points[pe[Ze+ve]];It=Jn.properties;const[jn,Qn]=Jn.geometry.coordinates;gt=pt(jn),Ut=_t(Qn)}const pn={type:1,geometry:[[Math.round(this.options.extent*(gt*Be-Pe)),Math.round(this.options.extent*(Ut*Be-je))]],tags:It};let vn;vn=yt||this.options.generateId?pe[Ze+ve]:this.points[pe[Ze+ve]].id,vn!==void 0&&(pn.id=vn),He.features.push(pn)}}_limitZoom(me){return Math.max(this.options.minZoom,Math.min(Math.floor(+me),this.options.maxZoom+1))}_cluster(me,pe){const{radius:Pe,extent:je,reduce:Be,minPoints:He}=this.options,nt=Pe/(je*Math.pow(2,pe)),Ze=me.data,yt=[],It=this.stride;for(let gt=0;gt<Ze.length;gt+=It){if(Ze[gt+2]<=pe)continue;Ze[gt+2]=pe;const Ut=Ze[gt],pn=Ze[gt+1],vn=me.within(Ze[gt],Ze[gt+1],nt),Jn=Ze[gt+De];let jn=Jn;for(const Qn of vn){const Un=Qn*It;Ze[Un+2]>pe&&(jn+=Ze[Un+De])}if(jn>Jn&&jn>=He){let Qn,Un=Ut*Jn,jr=pn*Jn,xr=-1;const Wn=((gt/It|0)<<5)+(pe+1)+this.points.length;for(const lr of vn){const br=lr*It;if(Ze[br+2]<=pe)continue;Ze[br+2]=pe;const ii=Ze[br+De];Un+=Ze[br]*ii,jr+=Ze[br+1]*ii,Ze[br+4]=Wn,Be&&(Qn||(Qn=this._map(Ze,gt,!0),xr=this.clusterProps.length,this.clusterProps.push(Qn)),Be(Qn,this._map(Ze,br)))}Ze[gt+4]=Wn,yt.push(Un/jn,jr/jn,1/0,Wn,-1,jn),Be&&yt.push(xr)}else{for(let Qn=0;Qn<It;Qn++)yt.push(Ze[gt+Qn]);if(jn>1)for(const Qn of vn){const Un=Qn*It;if(!(Ze[Un+2]<=pe)){Ze[Un+2]=pe;for(let jr=0;jr<It;jr++)yt.push(Ze[Un+jr])}}}}return yt}_getOriginId(me){return me-this.points.length>>5}_getOriginZoom(me){return(me-this.points.length)%32}_map(me,pe,Pe){if(me[pe+De]>1){const He=this.clusterProps[me[pe+Oe]];return Pe?Object.assign({},He):He}const je=this.points[me[pe+ve]].properties,Be=this.options.map(je);return Pe&&Be===je?Object.assign({},Be):Be}}function Ye(Ue,me,pe){return{type:"Feature",id:Ue[me+ve],properties:tt(Ue,me,pe),geometry:{type:"Point",coordinates:[(Pe=Ue[me],360*(Pe-.5)),Pt(Ue[me+1])]}};var Pe}function tt(Ue,me,pe){const Pe=Ue[me+De],je=Pe>=1e4?`${Math.round(Pe/1e3)}k`:Pe>=1e3?Math.round(Pe/100)/10+"k":Pe,Be=Ue[me+Oe],He=Be===-1?{}:Object.assign({},pe[Be]);return Object.assign(He,{cluster:!0,cluster_id:Ue[me+ve],point_count:Pe,point_count_abbreviated:je})}function pt(Ue){return Ue/360+.5}function _t(Ue){const me=Math.sin(Ue*Math.PI/180),pe=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return pe<0?0:pe>1?1:pe}function Pt(Ue){const me=(180-360*Ue)*Math.PI/180;return 360*Math.atan(Math.exp(me))/Math.PI-90}function Wt(Ue,me,pe,Pe){let je=Pe;const Be=me+(pe-me>>1);let He,nt=pe-me;const Ze=Ue[me],yt=Ue[me+1],It=Ue[pe],gt=Ue[pe+1];for(let Ut=me+3;Ut<pe;Ut+=3){const pn=Tt(Ue[Ut],Ue[Ut+1],Ze,yt,It,gt);if(pn>je)He=Ut,je=pn;else if(pn===je){const vn=Math.abs(Ut-Be);vn<nt&&(He=Ut,nt=vn)}}je>Pe&&(He-me>3&&Wt(Ue,me,He,Pe),Ue[He+2]=je,pe-He>3&&Wt(Ue,He,pe,Pe))}function Tt(Ue,me,pe,Pe,je,Be){let He=je-pe,nt=Be-Pe;if(He!==0||nt!==0){const Ze=((Ue-pe)*He+(me-Pe)*nt)/(He*He+nt*nt);Ze>1?(pe=je,Pe=Be):Ze>0&&(pe+=He*Ze,Pe+=nt*Ze)}return He=Ue-pe,nt=me-Pe,He*He+nt*nt}function kt(Ue,me,pe,Pe){const je={id:Ue??null,type:me,geometry:pe,tags:Pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(me==="Point"||me==="MultiPoint"||me==="LineString")Yt(je,pe);else if(me==="Polygon")Yt(je,pe[0]);else if(me==="MultiLineString")for(const Be of pe)Yt(je,Be);else if(me==="MultiPolygon")for(const Be of pe)Yt(je,Be[0]);return je}function Yt(Ue,me){for(let pe=0;pe<me.length;pe+=3)Ue.minX=Math.min(Ue.minX,me[pe]),Ue.minY=Math.min(Ue.minY,me[pe+1]),Ue.maxX=Math.max(Ue.maxX,me[pe]),Ue.maxY=Math.max(Ue.maxY,me[pe+1])}function un(Ue,me,pe,Pe){if(!me.geometry)return;const je=me.geometry.coordinates;if(je&&je.length===0)return;const Be=me.geometry.type,He=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2);let nt=[],Ze=me.id;if(pe.promoteId?Ze=me.properties[pe.promoteId]:pe.generateId&&(Ze=Pe||0),Be==="Point")In(je,nt);else if(Be==="MultiPoint")for(const yt of je)In(yt,nt);else if(Be==="LineString")at(je,nt,He,!1);else if(Be==="MultiLineString"){if(pe.lineMetrics){for(const yt of je)nt=[],at(yt,nt,He,!1),Ue.push(kt(Ze,"LineString",nt,me.properties));return}kn(je,nt,He,!1)}else if(Be==="Polygon")kn(je,nt,He,!0);else{if(Be!=="MultiPolygon"){if(Be==="GeometryCollection"){for(const yt of me.geometry.geometries)un(Ue,{id:Ze,geometry:yt,properties:me.properties},pe,Pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const yt of je){const It=[];kn(yt,It,He,!0),nt.push(It)}}Ue.push(kt(Ze,Be,nt,me.properties))}function In(Ue,me){me.push(cn(Ue[0]),en(Ue[1]),0)}function at(Ue,me,pe,Pe){let je,Be,He=0;for(let Ze=0;Ze<Ue.length;Ze++){const yt=cn(Ue[Ze][0]),It=en(Ue[Ze][1]);me.push(yt,It,0),Ze>0&&(He+=Pe?(je*It-yt*Be)/2:Math.sqrt(Math.pow(yt-je,2)+Math.pow(It-Be,2))),je=yt,Be=It}const nt=me.length-3;me[2]=1,Wt(me,0,nt,pe),me[nt+2]=1,me.size=Math.abs(He),me.start=0,me.end=me.size}function kn(Ue,me,pe,Pe){for(let je=0;je<Ue.length;je++){const Be=[];at(Ue[je],Be,pe,Pe),me.push(Be)}}function cn(Ue){return Ue/360+.5}function en(Ue){const me=Math.sin(Ue*Math.PI/180),pe=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return pe<0?0:pe>1?1:pe}function ze(Ue,me,pe,Pe,je,Be,He,nt){if(Pe/=me,Be>=(pe/=me)&&He<Pe)return Ue;if(He<pe||Be>=Pe)return null;const Ze=[];for(const yt of Ue){const It=yt.geometry;let gt=yt.type;const Ut=je===0?yt.minX:yt.minY,pn=je===0?yt.maxX:yt.maxY;if(Ut>=pe&&pn<Pe){Ze.push(yt);continue}if(pn<pe||Ut>=Pe)continue;let vn=[];if(gt==="Point"||gt==="MultiPoint")G(It,vn,pe,Pe,je);else if(gt==="LineString")H(It,vn,pe,Pe,je,!1,nt.lineMetrics);else if(gt==="MultiLineString")rt(It,vn,pe,Pe,je,!1);else if(gt==="Polygon")rt(It,vn,pe,Pe,je,!0);else if(gt==="MultiPolygon")for(const Jn of It){const jn=[];rt(Jn,jn,pe,Pe,je,!0),jn.length&&vn.push(jn)}if(vn.length){if(nt.lineMetrics&&gt==="LineString"){for(const Jn of vn)Ze.push(kt(yt.id,gt,Jn,yt.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(vn.length===1?(gt="LineString",vn=vn[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=vn.length===3?"Point":"MultiPoint"),Ze.push(kt(yt.id,gt,vn,yt.tags))}}return Ze.length?Ze:null}function G(Ue,me,pe,Pe,je){for(let Be=0;Be<Ue.length;Be+=3){const He=Ue[Be+je];He>=pe&&He<=Pe&&ct(me,Ue[Be],Ue[Be+1],Ue[Be+2])}}function H(Ue,me,pe,Pe,je,Be,He){let nt=Ce(Ue);const Ze=je===0?Et:ye;let yt,It,gt=Ue.start;for(let jn=0;jn<Ue.length-3;jn+=3){const Qn=Ue[jn],Un=Ue[jn+1],jr=Ue[jn+2],xr=Ue[jn+3],Wn=Ue[jn+4],lr=je===0?Qn:Un,br=je===0?xr:Wn;let ii=!1;He&&(yt=Math.sqrt(Math.pow(Qn-xr,2)+Math.pow(Un-Wn,2))),lr<pe?br>pe&&(It=Ze(nt,Qn,Un,xr,Wn,pe),He&&(nt.start=gt+yt*It)):lr>Pe?br<Pe&&(It=Ze(nt,Qn,Un,xr,Wn,Pe),He&&(nt.start=gt+yt*It)):ct(nt,Qn,Un,jr),br<pe&&lr>=pe&&(It=Ze(nt,Qn,Un,xr,Wn,pe),ii=!0),br>Pe&&lr<=Pe&&(It=Ze(nt,Qn,Un,xr,Wn,Pe),ii=!0),!Be&&ii&&(He&&(nt.end=gt+yt*It),me.push(nt),nt=Ce(Ue)),He&&(gt+=yt)}let Ut=Ue.length-3;const pn=Ue[Ut],vn=Ue[Ut+1],Jn=je===0?pn:vn;Jn>=pe&&Jn<=Pe&&ct(nt,pn,vn,Ue[Ut+2]),Ut=nt.length-3,Be&&Ut>=3&&(nt[Ut]!==nt[0]||nt[Ut+1]!==nt[1])&&ct(nt,nt[0],nt[1],nt[2]),nt.length&&me.push(nt)}function Ce(Ue){const me=[];return me.size=Ue.size,me.start=Ue.start,me.end=Ue.end,me}function rt(Ue,me,pe,Pe,je,Be){for(const He of Ue)H(He,me,pe,Pe,je,Be,!1)}function ct(Ue,me,pe,Pe){Ue.push(me,pe,Pe)}function Et(Ue,me,pe,Pe,je,Be){const He=(Be-me)/(Pe-me);return ct(Ue,Be,pe+(je-pe)*He,1),He}function ye(Ue,me,pe,Pe,je,Be){const He=(Be-pe)/(je-pe);return ct(Ue,me+(Pe-me)*He,Be,1),He}function z(Ue,me){const pe=[];for(let Pe=0;Pe<Ue.length;Pe++){const je=Ue[Pe],Be=je.type;let He;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")He=q(je.geometry,me);else if(Be==="MultiLineString"||Be==="Polygon"){He=[];for(const nt of je.geometry)He.push(q(nt,me))}else if(Be==="MultiPolygon"){He=[];for(const nt of je.geometry){const Ze=[];for(const yt of nt)Ze.push(q(yt,me));He.push(Ze)}}pe.push(kt(je.id,Be,He,je.tags))}return pe}function q(Ue,me){const pe=[];pe.size=Ue.size,Ue.start!==void 0&&(pe.start=Ue.start,pe.end=Ue.end);for(let Pe=0;Pe<Ue.length;Pe+=3)pe.push(Ue[Pe]+me,Ue[Pe+1],Ue[Pe+2]);return pe}function Re(Ue,me){if(Ue.transformed)return Ue;const pe=1<<Ue.z,Pe=Ue.x,je=Ue.y;for(const Be of Ue.features){const He=Be.geometry,nt=Be.type;if(Be.geometry=[],nt===1)for(let Ze=0;Ze<He.length;Ze+=2)Be.geometry.push(Je(He[Ze],He[Ze+1],me,pe,Pe,je));else for(let Ze=0;Ze<He.length;Ze++){const yt=[];for(let It=0;It<He[Ze].length;It+=2)yt.push(Je(He[Ze][It],He[Ze][It+1],me,pe,Pe,je));Be.geometry.push(yt)}}return Ue.transformed=!0,Ue}function Je(Ue,me,pe,Pe,je,Be){return[Math.round(pe*(Ue*Pe-je)),Math.round(pe*(me*Pe-Be))]}function ft(Ue,me,pe,Pe,je){const Be=me===je.maxZoom?0:je.tolerance/((1<<me)*je.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:Ue.length,source:null,x:pe,y:Pe,z:me,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const nt of Ue)Qe(He,nt,Be,je);return He}function Qe(Ue,me,pe,Pe){const je=me.geometry,Be=me.type,He=[];if(Ue.minX=Math.min(Ue.minX,me.minX),Ue.minY=Math.min(Ue.minY,me.minY),Ue.maxX=Math.max(Ue.maxX,me.maxX),Ue.maxY=Math.max(Ue.maxY,me.maxY),Be==="Point"||Be==="MultiPoint")for(let nt=0;nt<je.length;nt+=3)He.push(je[nt],je[nt+1]),Ue.numPoints++,Ue.numSimplified++;else if(Be==="LineString")jt(He,je,Ue,pe,!1,!1);else if(Be==="MultiLineString"||Be==="Polygon")for(let nt=0;nt<je.length;nt++)jt(He,je[nt],Ue,pe,Be==="Polygon",nt===0);else if(Be==="MultiPolygon")for(let nt=0;nt<je.length;nt++){const Ze=je[nt];for(let yt=0;yt<Ze.length;yt++)jt(He,Ze[yt],Ue,pe,!0,yt===0)}if(He.length){let nt=me.tags||null;if(Be==="LineString"&&Pe.lineMetrics){nt={};for(const yt in me.tags)nt[yt]=me.tags[yt];nt.mapbox_clip_start=je.start/je.size,nt.mapbox_clip_end=je.end/je.size}const Ze={geometry:He,type:Be==="Polygon"||Be==="MultiPolygon"?3:Be==="LineString"||Be==="MultiLineString"?2:1,tags:nt};me.id!==null&&(Ze.id=me.id),Ue.features.push(Ze)}}function jt(Ue,me,pe,Pe,je,Be){const He=Pe*Pe;if(Pe>0&&me.size<(je?He:Pe))return void(pe.numPoints+=me.length/3);const nt=[];for(let Ze=0;Ze<me.length;Ze+=3)(Pe===0||me[Ze+2]>He)&&(pe.numSimplified++,nt.push(me[Ze],me[Ze+1])),pe.numPoints++;je&&function(Ze,yt){let It=0;for(let gt=0,Ut=Ze.length,pn=Ut-2;gt<Ut;pn=gt,gt+=2)It+=(Ze[gt]-Ze[pn])*(Ze[gt+1]+Ze[pn+1]);if(It>0===yt)for(let gt=0,Ut=Ze.length;gt<Ut/2;gt+=2){const pn=Ze[gt],vn=Ze[gt+1];Ze[gt]=Ze[Ut-2-gt],Ze[gt+1]=Ze[Ut-1-gt],Ze[Ut-2-gt]=pn,Ze[Ut-1-gt]=vn}}(nt,Be),Ue.push(nt)}const Bt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class zn{constructor(me,pe){const Pe=(pe=this.options=function(Be,He){for(const nt in He)Be[nt]=He[nt];return Be}(Object.create(Bt),pe)).debug;if(Pe&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");let je=function(Be,He){const nt=[];if(Be.type==="FeatureCollection")for(let Ze=0;Ze<Be.features.length;Ze++)un(nt,Be.features[Ze],He,Ze);else un(nt,Be.type==="Feature"?Be:{geometry:Be},He);return nt}(me,pe);this.tiles={},this.tileCoords=[],Pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),je=function(Be,He){const nt=He.buffer/He.extent;let Ze=Be;const yt=ze(Be,1,-1-nt,nt,0,-1,2,He),It=ze(Be,1,1-nt,2+nt,0,-1,2,He);return(yt||It)&&(Ze=ze(Be,1,-nt,1+nt,0,-1,2,He)||[],yt&&(Ze=z(yt,1).concat(Ze)),It&&(Ze=Ze.concat(z(It,-1)))),Ze}(je,pe),je.length&&this.splitTile(je,0,0,0),Pe&&(je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(me,pe,Pe,je,Be,He,nt){const Ze=[me,pe,Pe,je],yt=this.options,It=yt.debug;for(;Ze.length;){je=Ze.pop(),Pe=Ze.pop(),pe=Ze.pop(),me=Ze.pop();const gt=1<<pe,Ut=Zn(pe,Pe,je);let pn=this.tiles[Ut];if(!pn&&(It>1&&console.time("creation"),pn=this.tiles[Ut]=ft(me,pe,Pe,je,yt),this.tileCoords.push({z:pe,x:Pe,y:je}),It)){It>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,Pe,je,pn.numFeatures,pn.numPoints,pn.numSimplified),console.timeEnd("creation"));const ii=`z${pe}`;this.stats[ii]=(this.stats[ii]||0)+1,this.total++}if(pn.source=me,Be==null){if(pe===yt.indexMaxZoom||pn.numPoints<=yt.indexMaxPoints)continue}else{if(pe===yt.maxZoom||pe===Be)continue;if(Be!=null){const ii=Be-pe;if(Pe!==He>>ii||je!==nt>>ii)continue}}if(pn.source=null,me.length===0)continue;It>1&&console.time("clipping");const vn=.5*yt.buffer/yt.extent,Jn=.5-vn,jn=.5+vn,Qn=1+vn;let Un=null,jr=null,xr=null,Wn=null,lr=ze(me,gt,Pe-vn,Pe+jn,0,pn.minX,pn.maxX,yt),br=ze(me,gt,Pe+Jn,Pe+Qn,0,pn.minX,pn.maxX,yt);me=null,lr&&(Un=ze(lr,gt,je-vn,je+jn,1,pn.minY,pn.maxY,yt),jr=ze(lr,gt,je+Jn,je+Qn,1,pn.minY,pn.maxY,yt),lr=null),br&&(xr=ze(br,gt,je-vn,je+jn,1,pn.minY,pn.maxY,yt),Wn=ze(br,gt,je+Jn,je+Qn,1,pn.minY,pn.maxY,yt),br=null),It>1&&console.timeEnd("clipping"),Ze.push(Un||[],pe+1,2*Pe,2*je),Ze.push(jr||[],pe+1,2*Pe,2*je+1),Ze.push(xr||[],pe+1,2*Pe+1,2*je),Ze.push(Wn||[],pe+1,2*Pe+1,2*je+1)}}getTile(me,pe,Pe){me=+me,pe=+pe,Pe=+Pe;const je=this.options,{extent:Be,debug:He}=je;if(me<0||me>24)return null;const nt=1<<me,Ze=Zn(me,pe=pe+nt&nt-1,Pe);if(this.tiles[Ze])return Re(this.tiles[Ze],Be);He>1&&console.log("drilling down to z%d-%d-%d",me,pe,Pe);let yt,It=me,gt=pe,Ut=Pe;for(;!yt&&It>0;)It--,gt>>=1,Ut>>=1,yt=this.tiles[Zn(It,gt,Ut)];return yt&&yt.source?(He>1&&(console.log("found parent tile z%d-%d-%d",It,gt,Ut),console.time("drilling down")),this.splitTile(yt.source,It,gt,Ut,me,pe,Pe),He>1&&console.timeEnd("drilling down"),this.tiles[Ze]?Re(this.tiles[Ze],Be):null):null}}function Zn(Ue,me,pe){return 32*((1<<Ue)*pe+me)+Ue}function qt(Ue,me){return me?Ue.properties[me]:Ue.id}function Or(Ue,me){if(Ue==null)return!0;if(Ue.type==="Feature")return qt(Ue,me)!=null;if(Ue.type==="FeatureCollection"){const pe=new Set;for(const Pe of Ue.features){const je=qt(Pe,me);if(je==null||pe.has(je))return!1;pe.add(je)}return!0}return!1}function qr(Ue,me){const pe=new Map;if(Ue!=null)if(Ue.type==="Feature")pe.set(qt(Ue,me),Ue);else for(const Pe of Ue.features)pe.set(qt(Pe,me),Pe);return pe}class Xr extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(me,pe){return w._(this,void 0,void 0,function*(){const Pe=me.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const je=this._geoJSONIndex.getTile(Pe.z,Pe.x,Pe.y);if(!je)return null;const Be=new class{constructor(nt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=w.X,this.length=nt.length,this._features=nt}feature(nt){return new class{constructor(Ze){this._feature=Ze,this.extent=w.X,this.type=Ze.type,this.properties=Ze.tags,"id"in Ze&&!isNaN(Ze.id)&&(this.id=parseInt(Ze.id,10))}loadGeometry(){if(this._feature.type===1){const Ze=[];for(const yt of this._feature.geometry)Ze.push([new w.P(yt[0],yt[1])]);return Ze}{const Ze=[];for(const yt of this._feature.geometry){const It=[];for(const gt of yt)It.push(new w.P(gt[0],gt[1]));Ze.push(It)}return Ze}}toGeoJSON(Ze,yt,It){return he.call(this,Ze,yt,It)}}(this._features[nt])}}(je.features);let He=te(Be);return He.byteOffset===0&&He.byteLength===He.buffer.byteLength||(He=new Uint8Array(He)),{vectorTile:Be,rawData:He.buffer}})}loadData(me){return w._(this,void 0,void 0,function*(){var pe;(pe=this._pendingRequest)===null||pe===void 0||pe.abort();const Pe=!!(me&&me.request&&me.request.collectResourceTiming)&&new w.bv(me.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(me,this._pendingRequest),this._geoJSONIndex=me.cluster?new Le(function({superclusterOptions:He,clusterProperties:nt}){if(!nt||!He)return He;const Ze={},yt={},It={accumulated:null,zoom:0},gt={properties:null},Ut=Object.keys(nt);for(const pn of Ut){const[vn,Jn]=nt[pn],jn=w.bC(Jn),Qn=w.bC(typeof vn=="string"?[vn,["accumulated"],["get",pn]]:vn);Ze[pn]=jn.value,yt[pn]=Qn.value}return He.map=pn=>{gt.properties=pn;const vn={};for(const Jn of Ut)vn[Jn]=Ze[Jn].evaluate(It,gt);return vn},He.reduce=(pn,vn)=>{gt.properties=vn;for(const Jn of Ut)It.accumulated=pn[Jn],pn[Jn]=yt[Jn].evaluate(It,gt)},He}(me)).load((yield this._pendingData).features):(je=yield this._pendingData,new zn(je,me.geojsonVtOptions)),this.loaded={};const Be={};if(Pe){const He=Pe.finish();He&&(Be.resourceTiming={},Be.resourceTiming[me.source]=JSON.parse(JSON.stringify(He)))}return Be}catch(Be){if(delete this._pendingRequest,w.bB(Be))return{abandoned:!0};throw Be}var je})}getData(){return w._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(me){const pe=this.loaded;return pe&&pe[me.uid]?super.reloadTile(me):this.loadTile(me)}loadAndProcessGeoJSON(me,pe){return w._(this,void 0,void 0,function*(){let Pe=yield this.loadGeoJSON(me,pe);if(delete this._pendingRequest,typeof Pe!="object")throw new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`);if(Q(Pe,!0),me.filter){const je=w.bC(me.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(He=>`${He.key}: ${He.message}`).join(", "));Pe={type:"FeatureCollection",features:Pe.features.filter(He=>je.value.evaluate({zoom:0},He))}}return Pe})}loadGeoJSON(me,pe){return w._(this,void 0,void 0,function*(){const{promoteId:Pe}=me;if(me.request){const je=yield w.h(me.request,pe);return this._dataUpdateable=Or(je.data,Pe)?qr(je.data,Pe):void 0,je.data}if(typeof me.data=="string")try{const je=JSON.parse(me.data);return this._dataUpdateable=Or(je,Pe)?qr(je,Pe):void 0,je}catch{throw new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`)}if(!me.dataDiff)throw new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${me.source}`);return function(je,Be,He){var nt,Ze,yt,It;if(Be.removeAll&&je.clear(),Be.remove)for(const gt of Be.remove)je.delete(gt);if(Be.add)for(const gt of Be.add){const Ut=qt(gt,He);Ut!=null&&je.set(Ut,gt)}if(Be.update)for(const gt of Be.update){let Ut=je.get(gt.id);if(Ut==null)continue;const pn=!gt.removeAllProperties&&(((nt=gt.removeProperties)===null||nt===void 0?void 0:nt.length)>0||((Ze=gt.addOrUpdateProperties)===null||Ze===void 0?void 0:Ze.length)>0);if((gt.newGeometry||gt.removeAllProperties||pn)&&(Ut=Object.assign({},Ut),je.set(gt.id,Ut),pn&&(Ut.properties=Object.assign({},Ut.properties))),gt.newGeometry&&(Ut.geometry=gt.newGeometry),gt.removeAllProperties)Ut.properties={};else if(((yt=gt.removeProperties)===null||yt===void 0?void 0:yt.length)>0)for(const vn of gt.removeProperties)Object.prototype.hasOwnProperty.call(Ut.properties,vn)&&delete Ut.properties[vn];if(((It=gt.addOrUpdateProperties)===null||It===void 0?void 0:It.length)>0)for(const{key:vn,value:Jn}of gt.addOrUpdateProperties)Ut.properties[vn]=Jn}}(this._dataUpdateable,me.dataDiff,Pe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(me){return w._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(me){return this._geoJSONIndex.getClusterExpansionZoom(me.clusterId)}getClusterChildren(me){return this._geoJSONIndex.getChildren(me.clusterId)}getClusterLeaves(me){return this._geoJSONIndex.getLeaves(me.clusterId,me.limit,me.offset)}}class Tr{constructor(me){this.self=me,this.actor=new w.F(me),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(pe,Pe)=>{if(this.externalWorkerSourceTypes[pe])throw new Error(`Worker source with name "${pe}" already registered.`);this.externalWorkerSourceTypes[pe]=Pe},this.self.addProtocol=w.bi,this.self.removeProtocol=w.bj,this.self.registerRTLTextPlugin=pe=>{if(w.bD.isParsed())throw new Error("RTL text plugin already registered.");w.bD.setMethods(pe)},this.actor.registerMessageHandler("LDT",(pe,Pe)=>this._getDEMWorkerSource(pe,Pe.source).loadTile(Pe)),this.actor.registerMessageHandler("RDT",(pe,Pe)=>w._(this,void 0,void 0,function*(){this._getDEMWorkerSource(pe,Pe.source).removeTile(Pe)})),this.actor.registerMessageHandler("GCEZ",(pe,Pe)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Pe.type,Pe.source).getClusterExpansionZoom(Pe)})),this.actor.registerMessageHandler("GCC",(pe,Pe)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Pe.type,Pe.source).getClusterChildren(Pe)})),this.actor.registerMessageHandler("GCL",(pe,Pe)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Pe.type,Pe.source).getClusterLeaves(Pe)})),this.actor.registerMessageHandler("LD",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).loadData(Pe)),this.actor.registerMessageHandler("GD",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).getData()),this.actor.registerMessageHandler("LT",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).loadTile(Pe)),this.actor.registerMessageHandler("RT",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).reloadTile(Pe)),this.actor.registerMessageHandler("AT",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).abortTile(Pe)),this.actor.registerMessageHandler("RMT",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).removeTile(Pe)),this.actor.registerMessageHandler("RS",(pe,Pe)=>w._(this,void 0,void 0,function*(){if(!this.workerSources[pe]||!this.workerSources[pe][Pe.type]||!this.workerSources[pe][Pe.type][Pe.source])return;const je=this.workerSources[pe][Pe.type][Pe.source];delete this.workerSources[pe][Pe.type][Pe.source],je.removeSource!==void 0&&je.removeSource(Pe)})),this.actor.registerMessageHandler("RM",pe=>w._(this,void 0,void 0,function*(){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe]})),this.actor.registerMessageHandler("SR",(pe,Pe)=>w._(this,void 0,void 0,function*(){this.referrer=Pe})),this.actor.registerMessageHandler("SRPS",(pe,Pe)=>this._syncRTLPluginState(pe,Pe)),this.actor.registerMessageHandler("IS",(pe,Pe)=>w._(this,void 0,void 0,function*(){this.self.importScripts(Pe)})),this.actor.registerMessageHandler("SI",(pe,Pe)=>this._setImages(pe,Pe)),this.actor.registerMessageHandler("UL",(pe,Pe)=>w._(this,void 0,void 0,function*(){this._getLayerIndex(pe).update(Pe.layers,Pe.removedIds)})),this.actor.registerMessageHandler("SL",(pe,Pe)=>w._(this,void 0,void 0,function*(){this._getLayerIndex(pe).replace(Pe)}))}_setImages(me,pe){return w._(this,void 0,void 0,function*(){this.availableImages[me]=pe;for(const Pe in this.workerSources[me]){const je=this.workerSources[me][Pe];for(const Be in je)je[Be].availableImages=pe}})}_syncRTLPluginState(me,pe){return w._(this,void 0,void 0,function*(){if(w.bD.isParsed())return w.bD.getState();if(pe.pluginStatus!=="loading")return w.bD.setState(pe),pe;const Pe=pe.pluginURL;if(this.self.importScripts(Pe),w.bD.isParsed()){const je={pluginStatus:"loaded",pluginURL:Pe};return w.bD.setState(je),je}throw w.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Pe}`)})}_getAvailableImages(me){let pe=this.availableImages[me];return pe||(pe=[]),pe}_getLayerIndex(me){let pe=this.layerIndexes[me];return pe||(pe=this.layerIndexes[me]=new a),pe}_getWorkerSource(me,pe,Pe){if(this.workerSources[me]||(this.workerSources[me]={}),this.workerSources[me][pe]||(this.workerSources[me][pe]={}),!this.workerSources[me][pe][Pe]){const je={sendAsync:(Be,He)=>(Be.targetMapId=me,this.actor.sendAsync(Be,He))};switch(pe){case"vector":this.workerSources[me][pe][Pe]=new C(je,this._getLayerIndex(me),this._getAvailableImages(me));break;case"geojson":this.workerSources[me][pe][Pe]=new Xr(je,this._getLayerIndex(me),this._getAvailableImages(me));break;default:this.workerSources[me][pe][Pe]=new this.externalWorkerSourceTypes[pe](je,this._getLayerIndex(me),this._getAvailableImages(me))}}return this.workerSources[me][pe][Pe]}_getDEMWorkerSource(me,pe){return this.demWorkerSources[me]||(this.demWorkerSources[me]={}),this.demWorkerSources[me][pe]||(this.demWorkerSources[me][pe]=new k),this.demWorkerSources[me][pe]}}return w.i(self)&&(self.worker=new Tr(self)),Tr}),x("index",["exports","./shared"],function(w,a){var L="4.7.1";let R,D;const C={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((e,o)=>{const h=requestAnimationFrame(e);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(h),o(a.c())})}),getImageData(y,e=0){return this.getImageCanvasContext(y).getImageData(-e,-e,y.width+2*e,y.height+2*e)},getImageCanvasContext(y){const e=window.document.createElement("canvas"),o=e.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return e.width=y.width,e.height=y.height,o.drawImage(y,0,0,y.width,y.height),o},resolveURL:y=>(R||(R=document.createElement("a")),R.href=y,R.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(D==null&&(D=matchMedia("(prefers-reduced-motion: reduce)")),D.matches)}};class k{static testProp(e){if(!k.docStyle)return e[0];for(let o=0;o<e.length;o++)if(e[o]in k.docStyle)return e[o];return e[0]}static create(e,o,h){const d=window.document.createElement(e);return o!==void 0&&(d.className=o),h&&h.appendChild(d),d}static createNS(e,o){return window.document.createElementNS(e,o)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(e,o){e.style[k.transformProp]=o}static addEventListener(e,o,h,d={}){e.addEventListener(o,h,"passive"in d?d:d.capture)}static removeEventListener(e,o,h,d={}){e.removeEventListener(o,h,"passive"in d?d:d.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static getScale(e){const o=e.getBoundingClientRect();return{x:o.width/e.offsetWidth||1,y:o.height/e.offsetHeight||1,boundingClientRect:o}}static getPoint(e,o,h){const d=o.boundingClientRect;return new a.P((h.clientX-d.left)/o.x-e.clientLeft,(h.clientY-d.top)/o.y-e.clientTop)}static mousePos(e,o){const h=k.getScale(e);return k.getPoint(e,h,o)}static touchPos(e,o){const h=[],d=k.getScale(e);for(let g=0;g<o.length;g++)h.push(k.getPoint(e,d,o[g]));return h}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}k.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);const V={supported:!1,testSupport:function(y){!he&&Q&&(Te?we(y):N=y)}};let N,Q,he=!1,Te=!1;function we(y){const e=y.createTexture();y.bindTexture(y.TEXTURE_2D,e);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,Q),y.isContextLost())return;V.supported=!0}catch{}y.deleteTexture(e),he=!0}var _e;typeof document<"u"&&(Q=document.createElement("img"),Q.onload=()=>{N&&we(N),N=null,Te=!0},Q.onerror=()=>{he=!0,N=null},Q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let e,o,h,d;y.resetRequestQueue=()=>{e=[],o=0,h=0,d={}},y.addThrottleControl=O=>{const X=h++;return d[X]=O,X},y.removeThrottleControl=O=>{delete d[O],I()},y.getImage=(O,X,ae=!0)=>new Promise((le,be)=>{V.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),a.e(O,{type:"image"}),e.push({abortController:X,requestParameters:O,supportImageRefresh:ae,state:"queued",onError:Ae=>{be(Ae)},onSuccess:Ae=>{le(Ae)}}),I()});const g=O=>a._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:X,supportImageRefresh:ae,onError:le,onSuccess:be,abortController:Ae}=O,Fe=ae===!1&&!a.i(self)&&!a.g(X.url)&&(!X.headers||Object.keys(X.headers).reduce((qe,et)=>qe&&et==="accept",!0));o++;const Ne=Fe?A(X,Ae):a.m(X,Ae);try{const qe=yield Ne;delete O.abortController,O.state="completed",qe.data instanceof HTMLImageElement||a.b(qe.data)?be(qe):qe.data&&be({data:yield($e=qe.data,typeof createImageBitmap=="function"?a.d($e):a.f($e)),cacheControl:qe.cacheControl,expires:qe.expires})}catch(qe){delete O.abortController,le(qe)}finally{o--,I()}var $e}),I=()=>{const O=(()=>{for(const X of Object.keys(d))if(d[X]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let X=o;X<O&&e.length>0;X++){const ae=e.shift();ae.abortController.signal.aborted?X--:g(ae)}},A=(O,X)=>new Promise((ae,le)=>{const be=new Image,Ae=O.url,Fe=O.credentials;Fe&&Fe==="include"?be.crossOrigin="use-credentials":(Fe&&Fe==="same-origin"||!a.s(Ae))&&(be.crossOrigin="anonymous"),X.signal.addEventListener("abort",()=>{be.src="",le(a.c())}),be.fetchPriority="high",be.onload=()=>{be.onerror=be.onload=null,ae({data:be})},be.onerror=()=>{be.onerror=be.onload=null,X.signal.aborted||le(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},be.src=Ae})}(_e||(_e={})),_e.resetRequestQueue();class Me{constructor(e){this._transformRequestFn=e}transformRequest(e,o){return this._transformRequestFn&&this._transformRequestFn(e,o)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function ne(y){var e=new a.A(3);return e[0]=y[0],e[1]=y[1],e[2]=y[2],e}var ce,M=function(y,e,o){return y[0]=e[0]-o[0],y[1]=e[1]-o[1],y[2]=e[2]-o[2],y};ce=new a.A(3),a.A!=Float32Array&&(ce[0]=0,ce[1]=0,ce[2]=0);var $=function(y){var e=y[0],o=y[1];return e*e+o*o};function U(y){const e=[];if(typeof y=="string")e.push({id:"default",url:y});else if(y&&y.length>0){const o=[];for(const{id:h,url:d}of y){const g=`${h}${d}`;o.indexOf(g)===-1&&(o.push(g),e.push({id:h,url:d}))}}return e}function de(y,e,o){const h=y.split("?");return h[0]+=`${e}${o}`,h.join("?")}(function(){var y=new a.A(2);a.A!=Float32Array&&(y[0]=0,y[1]=0)})();class K{constructor(e,o,h,d){this.context=e,this.format=h,this.texture=e.gl.createTexture(),this.update(o,d)}update(e,o,h){const{width:d,height:g}=e,I=!(this.size&&this.size[0]===d&&this.size[1]===g||h),{context:A}=this,{gl:O}=A;if(this.useMipmap=!!(o&&o.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!o||o.premultiply!==!1)),I)this.size=[d,g],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||a.b(e)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,e):O.texImage2D(O.TEXTURE_2D,0,this.format,d,g,0,this.format,O.UNSIGNED_BYTE,e.data);else{const{x:X,y:ae}=h||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||a.b(e)?O.texSubImage2D(O.TEXTURE_2D,0,X,ae,O.RGBA,O.UNSIGNED_BYTE,e):O.texSubImage2D(O.TEXTURE_2D,0,X,ae,d,g,O.RGBA,O.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(e,o,h){const{context:d}=this,{gl:g}=d;g.bindTexture(g.TEXTURE_2D,this.texture),h!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=g.LINEAR),e!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,e),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,h||e),this.filter=e),o!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function j(y){const{userImage:e}=y;return!!(e&&e.render&&e.render())&&(y.data.replace(new Uint8Array(e.data.buffer)),!0)}class W extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:o,promiseResolve:h}of this.requestors)h(this._getImagesForIds(o));this.requestors=[]}}getImage(e){const o=this.images[e];if(o&&!o.data&&o.spriteData){const h=o.spriteData;o.data=new a.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),o.spriteData=null}return o}addImage(e,o){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,o)&&(this.images[e]=o)}_validate(e,o){let h=!0;const d=o.data||o.spriteData;return this._validateStretch(o.stretchX,d&&d.width)||(this.fire(new a.j(new Error(`Image "${e}" has invalid "stretchX" value`))),h=!1),this._validateStretch(o.stretchY,d&&d.height)||(this.fire(new a.j(new Error(`Image "${e}" has invalid "stretchY" value`))),h=!1),this._validateContent(o.content,o)||(this.fire(new a.j(new Error(`Image "${e}" has invalid "content" value`))),h=!1),h}_validateStretch(e,o){if(!e)return!0;let h=0;for(const d of e){if(d[0]<h||d[1]<d[0]||o<d[1])return!1;h=d[1]}return!0}_validateContent(e,o){if(!e)return!0;if(e.length!==4)return!1;const h=o.spriteData,d=h&&h.width||o.data.width,g=h&&h.height||o.data.height;return!(e[0]<0||d<e[0]||e[1]<0||g<e[1]||e[2]<0||d<e[2]||e[3]<0||g<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,o,h=!0){const d=this.getImage(e);if(h&&(d.data.width!==o.data.width||d.data.height!==o.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=d.version+1,this.images[e]=o,this.updatedImages[e]=!0}removeImage(e){const o=this.images[e];delete this.images[e],delete this.patterns[e],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((o,h)=>{let d=!0;if(!this.isLoaded())for(const g of e)this.images[g]||(d=!1);this.isLoaded()||d?o(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:o})})}_getImagesForIds(e){const o={};for(const h of e){let d=this.getImage(h);d||(this.fire(new a.k("styleimagemissing",{id:h})),d=this.getImage(h)),d?o[h]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:a.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:e,height:o}=this.atlasImage;return{width:e,height:o}}getPattern(e){const o=this.patterns[e],h=this.getImage(e);if(!h)return null;if(o&&o.position.version===h.version)return o.position;if(o)o.position.version=h.version;else{const d={w:h.data.width+2,h:h.data.height+2,x:0,y:0},g=new a.I(d,h);this.patterns[e]={bin:d,position:g}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const o=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new K(e,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const g in this.patterns)e.push(this.patterns[g].bin);const{w:o,h}=a.p(e),d=this.atlasImage;d.resize({width:o||1,height:h||1});for(const g in this.patterns){const{bin:I}=this.patterns[g],A=I.x+1,O=I.y+1,X=this.getImage(g).data,ae=X.width,le=X.height;a.R.copy(X,d,{x:0,y:0},{x:A,y:O},{width:ae,height:le}),a.R.copy(X,d,{x:0,y:le-1},{x:A,y:O-1},{width:ae,height:1}),a.R.copy(X,d,{x:0,y:0},{x:A,y:O+le},{width:ae,height:1}),a.R.copy(X,d,{x:ae-1,y:0},{x:A-1,y:O},{width:1,height:le}),a.R.copy(X,d,{x:0,y:0},{x:A+ae,y:O},{width:1,height:le})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const o of e){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const h=this.getImage(o);h||a.w(`Image with ID: "${o}" was not found`),j(h)&&this.updateImage(o,h)}}}const J=1e20;function re(y,e,o,h,d,g,I,A,O){for(let X=e;X<e+h;X++)ue(y,o*g+X,g,d,I,A,O);for(let X=o;X<o+d;X++)ue(y,X*g+e,1,h,I,A,O)}function ue(y,e,o,h,d,g,I){g[0]=0,I[0]=-J,I[1]=J,d[0]=y[e];for(let A=1,O=0,X=0;A<h;A++){d[A]=y[e+A*o];const ae=A*A;do{const le=g[O];X=(d[A]-d[le]+ae-le*le)/(A-le)/2}while(X<=I[O]&&--O>-1);O++,g[O]=A,I[O]=X,I[O+1]=J}for(let A=0,O=0;A<h;A++){for(;I[O+1]<A;)O++;const X=g[O],ae=A-X;y[e+A*o]=d[X]+ae*ae}}class te{constructor(e,o){this.requestManager=e,this.localIdeographFontFamily=o,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return a._(this,void 0,void 0,function*(){const o=[];for(const g in e)for(const I of e[g])o.push(this._getAndCacheGlyphsPromise(g,I));const h=yield Promise.all(o),d={};for(const{stack:g,id:I,glyph:A}of h)d[g]||(d[g]={}),d[g][I]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return d})}_getAndCacheGlyphsPromise(e,o){return a._(this,void 0,void 0,function*(){let h=this.entries[e];h||(h=this.entries[e]={glyphs:{},requests:{},ranges:{}});let d=h.glyphs[o];if(d!==void 0)return{stack:e,id:o,glyph:d};if(d=this._tinySDF(h,e,o),d)return h.glyphs[o]=d,{stack:e,id:o,glyph:d};const g=Math.floor(o/256);if(256*g>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[g])return{stack:e,id:o,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[g]){const A=te.loadGlyphRange(e,g,this.url,this.requestManager);h.requests[g]=A}const I=yield h.requests[g];for(const A in I)this._doesCharSupportLocalGlyph(+A)||(h.glyphs[+A]=I[+A]);return h.ranges[g]=!0,{stack:e,id:o,glyph:I[o]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,o,h){const d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(h))return;let g=e.tinySDF;if(!g){let A="400";/bold/i.test(o)?A="900":/medium/i.test(o)?A="500":/light/i.test(o)&&(A="200"),g=e.tinySDF=new te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:A})}const I=g.draw(String.fromCharCode(h));return{id:h,bitmap:new a.o({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}te.loadGlyphRange=function(y,e,o,h){return a._(this,void 0,void 0,function*(){const d=256*e,g=d+255,I=h.transformRequest(o.replace("{fontstack}",y).replace("{range}",`${d}-${g}`),"Glyphs"),A=yield a.l(I,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${e}, ${d}-${g}`);const O={};for(const X of a.n(A.data))O[X.id]=X;return O})},te.TinySDF=class{constructor({fontSize:y=24,buffer:e=3,radius:o=8,cutoff:h=.25,fontFamily:d="sans-serif",fontWeight:g="normal",fontStyle:I="normal"}={}){this.buffer=e,this.cutoff=h,this.radius=o;const A=this.size=y+4*e,O=this._createCanvas(A),X=this.ctx=O.getContext("2d",{willReadFrequently:!0});X.font=`${I} ${g} ${y}px ${d}`,X.textBaseline="alphabetic",X.textAlign="left",X.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(y){const e=document.createElement("canvas");return e.width=e.height=y,e}draw(y){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:h,actualBoundingBoxLeft:d,actualBoundingBoxRight:g}=this.ctx.measureText(y),I=Math.ceil(o),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-d))),O=Math.min(this.size-this.buffer,I+Math.ceil(h)),X=A+2*this.buffer,ae=O+2*this.buffer,le=Math.max(X*ae,0),be=new Uint8ClampedArray(le),Ae={data:be,width:X,height:ae,glyphWidth:A,glyphHeight:O,glyphTop:I,glyphLeft:0,glyphAdvance:e};if(A===0||O===0)return Ae;const{ctx:Fe,buffer:Ne,gridInner:$e,gridOuter:qe}=this;Fe.clearRect(Ne,Ne,A,O),Fe.fillText(y,Ne,Ne+I);const et=Fe.getImageData(Ne,Ne,A,O);qe.fill(J,0,le),$e.fill(0,0,le);for(let Ve=0;Ve<O;Ve++)for(let st=0;st<A;st++){const ut=et.data[4*(Ve*A+st)+3]/255;if(ut===0)continue;const mt=(Ve+Ne)*X+st+Ne;if(ut===1)qe[mt]=0,$e[mt]=J;else{const At=.5-ut;qe[mt]=At>0?At*At:0,$e[mt]=At<0?At*At:0}}re(qe,0,0,X,ae,X,this.f,this.v,this.z),re($e,Ne,Ne,A,O,X,this.f,this.v,this.z);for(let Ve=0;Ve<le;Ve++){const st=Math.sqrt(qe[Ve])-Math.sqrt($e[Ve]);be[Ve]=Math.round(255-255*(st/this.radius+this.cutoff))}return Ae}};class se{constructor(){this.specification=a.v.light.position}possiblyEvaluate(e,o){return a.x(e.expression.evaluate(o))}interpolate(e,o,h){return{x:a.y.number(e.x,o.x,h),y:a.y.number(e.y,o.y,h),z:a.y.number(e.z,o.z,h)}}}let xe;class ie extends a.E{constructor(e){super(),xe=xe||new a.q({anchor:new a.D(a.v.light.anchor),position:new se,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(xe),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,o={}){if(!this._validate(a.r,e,o))for(const h in e){const d=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),d):this._transitionable.setValue(h,d)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,h){return(!h||h.validate!==!1)&&a.t(this,e.call(a.u,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const ve=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class De extends a.E{constructor(e){super(),this._transitionable=new a.T(ve),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(e,o={}){if(!this._validate(a.B,e,o)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const h in e){const d=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),d):this._transitionable.setValue(h,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,h={}){return(h==null?void 0:h.validate)!==!1&&a.t(this,e.call(a.u,a.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class Oe{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,o){const h=e.join(",")+String(o);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(e,o)),this.dashEntry[h]}getDashRanges(e,o,h){const d=[];let g=e.length%2==1?-e[e.length-1]*h:0,I=e[0]*h,A=!0;d.push({left:g,right:I,isDash:A,zeroLength:e[0]===0});let O=e[0];for(let X=1;X<e.length;X++){A=!A;const ae=e[X];g=O*h,O+=ae,I=O*h,d.push({left:g,right:I,isDash:A,zeroLength:ae===0})}return d}addRoundDash(e,o,h){const d=o/2;for(let g=-h;g<=h;g++){const I=this.width*(this.nextRow+h+g);let A=0,O=e[A];for(let X=0;X<this.width;X++){X/O.right>1&&(O=e[++A]);const ae=Math.abs(X-O.left),le=Math.abs(X-O.right),be=Math.min(ae,le);let Ae;const Fe=g/h*(d+1);if(O.isDash){const Ne=d-Math.abs(Fe);Ae=Math.sqrt(be*be+Ne*Ne)}else Ae=d-Math.sqrt(be*be+Fe*Fe);this.data[I+X]=Math.max(0,Math.min(255,Ae+128))}}}addRegularDash(e){for(let A=e.length-1;A>=0;--A){const O=e[A],X=e[A+1];O.zeroLength?e.splice(A,1):X&&X.isDash===O.isDash&&(X.left=O.left,e.splice(A,1))}const o=e[0],h=e[e.length-1];o.isDash===h.isDash&&(o.left=h.left-this.width,h.right=o.right+this.width);const d=this.width*this.nextRow;let g=0,I=e[g];for(let A=0;A<this.width;A++){A/I.right>1&&(I=e[++g]);const O=Math.abs(A-I.left),X=Math.abs(A-I.right),ae=Math.min(O,X);this.data[d+A]=Math.max(0,Math.min(255,(I.isDash?ae:-ae)+128))}}addDash(e,o){const h=o?7:0,d=2*h+1;if(this.nextRow+d>this.height)return a.w("LineAtlas out of space"),null;let g=0;for(let A=0;A<e.length;A++)g+=e[A];if(g!==0){const A=this.width/g,O=this.getDashRanges(e,this.width,A);o?this.addRoundDash(O,A,h):this.addRegularDash(O)}const I={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:g};return this.nextRow+=d,this.dirty=!0,I}bind(e){const o=e.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const Le="maplibre_preloaded_worker_pool";class Ye{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Ye.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Le]}numActive(){return Object.keys(this.active).length}}const tt=Math.floor(C.hardwareConcurrency/2);let pt,_t;function Pt(){return pt||(pt=new Ye),pt}Ye.workerCount=a.C(globalThis)?Math.max(Math.min(tt,3),1):1;class Wt{constructor(e,o){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=o;const h=this.workerPool.acquire(o);for(let d=0;d<h.length;d++){const g=new a.F(h[d],o);g.name=`Worker ${d}`,this.actors.push(g)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,o){const h=[];for(const d of this.actors)h.push(d.sendAsync({type:e,data:o}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,o){for(const h of this.actors)h.registerMessageHandler(e,o)}}function Tt(){return _t||(_t=new Wt(Pt(),a.G),_t.registerMessageHandler("GR",(y,e,o)=>a.m(e,o))),_t}function kt(y,e){const o=a.H();return a.J(o,o,[1,1,0]),a.K(o,o,[.5*y.width,.5*y.height,1]),a.L(o,o,y.calculatePosMatrix(e.toUnwrapped()))}function Yt(y,e,o,h,d,g){const I=function(le,be,Ae){if(le)for(const Fe of le){const Ne=be[Fe];if(Ne&&Ne.source===Ae&&Ne.type==="fill-extrusion")return!0}else for(const Fe in be){const Ne=be[Fe];if(Ne.source===Ae&&Ne.type==="fill-extrusion")return!0}return!1}(d&&d.layers,e,y.id),A=g.maxPitchScaleFactor(),O=y.tilesIn(h,A,I);O.sort(un);const X=[];for(const le of O)X.push({wrappedTileID:le.tileID.wrapped().key,queryResults:le.tile.queryRenderedFeatures(e,o,y._state,le.queryGeometry,le.cameraQueryGeometry,le.scale,d,g,A,kt(y.transform,le.tileID))});const ae=function(le){const be={},Ae={};for(const Fe of le){const Ne=Fe.queryResults,$e=Fe.wrappedTileID,qe=Ae[$e]=Ae[$e]||{};for(const et in Ne){const Ve=Ne[et],st=qe[et]=qe[et]||{},ut=be[et]=be[et]||[];for(const mt of Ve)st[mt.featureIndex]||(st[mt.featureIndex]=!0,ut.push(mt))}}return be}(X);for(const le in ae)ae[le].forEach(be=>{const Ae=be.feature,Fe=y.getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=Fe});return ae}function un(y,e){const o=y.tileID,h=e.tileID;return o.overscaledZ-h.overscaledZ||o.canonical.y-h.canonical.y||o.wrap-h.wrap||o.canonical.x-h.canonical.x}function In(y,e,o){return a._(this,void 0,void 0,function*(){let h=y;if(y.url?h=(yield a.h(e.transformRequest(y.url,"Source"),o)).data:yield C.frameAsync(o),!h)return null;const d=a.M(a.e(h,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(d.vectorLayerIds=h.vector_layers.map(g=>g.id)),d})}class at{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof a.N?new a.N(e.lng,e.lat):a.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof a.N?new a.N(e.lng,e.lat):a.N.convert(e),this}extend(e){const o=this._sw,h=this._ne;let d,g;if(e instanceof a.N)d=e,g=e;else{if(!(e instanceof at))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(at.convert(e)):this.extend(a.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(a.N.convert(e)):this;if(d=e._sw,g=e._ne,!d||!g)return this}return o||h?(o.lng=Math.min(d.lng,o.lng),o.lat=Math.min(d.lat,o.lat),h.lng=Math.max(g.lng,h.lng),h.lat=Math.max(g.lat,h.lat)):(this._sw=new a.N(d.lng,d.lat),this._ne=new a.N(g.lng,g.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:h}=a.N.convert(e);let d=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&d}static convert(e){return e instanceof at?e:e&&new at(e)}static fromLngLat(e,o=0){const h=360*o/40075017,d=h/Math.cos(Math.PI/180*e.lat);return new at(new a.N(e.lng-d,e.lat-h),new a.N(e.lng+d,e.lat+h))}adjustAntiMeridian(){const e=new a.N(this._sw.lng,this._sw.lat),o=new a.N(this._ne.lng,this._ne.lat);return new at(e,e.lng>o.lng?new a.N(o.lng+360,o.lat):o)}}class kn{constructor(e,o,h){this.bounds=at.convert(this.validateBounds(e)),this.minzoom=o||0,this.maxzoom=h||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const o=Math.pow(2,e.z),h=Math.floor(a.O(this.bounds.getWest())*o),d=Math.floor(a.Q(this.bounds.getNorth())*o),g=Math.ceil(a.O(this.bounds.getEast())*o),I=Math.ceil(a.Q(this.bounds.getSouth())*o);return e.x>=h&&e.x<g&&e.y>=d&&e.y<I}}class cn extends a.E{constructor(e,o,h,d){if(super(),this.id=e,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(o,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield In(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(a.e(this,e),e.bounds&&(this.tileBounds=new kn(e.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new a.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(e){return a._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(o,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};h.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((g,I)=>{e.reloadPromise={resolve:g,reject:I}})}else e.actor=this.dispatcher.getActor(),d="LT";e.abortController=new AbortController;try{const g=yield e.actor.sendAsync({type:d,data:h},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,g)}catch(g){if(delete e.abortController,e.aborted)return;if(g&&g.status!==404)throw g;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,o){if(o&&o.resourceTiming&&(e.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&e.setExpiryData(o),e.loadVectorData(o,this.map.painter),e.reloadPromise){const h=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(h.resolve).catch(h.reject)}}abortTile(e){return a._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return a._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class en extends a.E{constructor(e,o,h,d){super(),this.id=e,this.dispatcher=h,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},o),a.e(this,a.M(o,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield In(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(a.e(this,e),e.bounds&&(this.tileBounds=new kn(e.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new a.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return a.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return a._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const h=yield _e.getImage(this.map._requestManager.transformRequest(o,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&e.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const d=this.map.painter.context,g=d.gl,I=h.data;e.texture=this.map.painter.getTileTexture(I.width),e.texture?e.texture.update(I,{useMipmap:!0}):(e.texture=new K(d,I,g.RGBA,{useMipmap:!0}),e.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(h){if(delete e.abortController,e.aborted)e.state="unloaded";else if(h)throw e.state="errored",h}})}abortTile(e){return a._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return a._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class ze extends en{constructor(e,o,h,d){super(e,o,h,d),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(e){return a._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(o,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const d=yield _e.getImage(h,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(d&&d.data){const g=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&e.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const I=a.b(g)&&a.U()?g:yield this.readImageNow(g),A={type:this.type,uid:e.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const O=yield e.actor.sendAsync({type:"LDT",data:A});e.dem=O,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(d){if(delete e.abortController,e.aborted)e.state="unloaded";else if(d)throw e.state="errored",d}})}readImageNow(e){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.V()){const o=e.width+2,h=e.height+2;try{return new a.R({width:o,height:h},yield a.W(e,-1,-1,o,h))}catch{}}return C.getImageData(e,1)})}_getNeighboringTiles(e){const o=e.canonical,h=Math.pow(2,o.z),d=(o.x-1+h)%h,g=o.x===0?e.wrap-1:e.wrap,I=(o.x+1+h)%h,A=o.x+1===h?e.wrap+1:e.wrap,O={};return O[new a.S(e.overscaledZ,g,o.z,d,o.y).key]={backfilled:!1},O[new a.S(e.overscaledZ,A,o.z,I,o.y).key]={backfilled:!1},o.y>0&&(O[new a.S(e.overscaledZ,g,o.z,d,o.y-1).key]={backfilled:!1},O[new a.S(e.overscaledZ,e.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},O[new a.S(e.overscaledZ,A,o.z,I,o.y-1).key]={backfilled:!1}),o.y+1<h&&(O[new a.S(e.overscaledZ,g,o.z,d,o.y+1).key]={backfilled:!1},O[new a.S(e.overscaledZ,e.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},O[new a.S(e.overscaledZ,A,o.z,I,o.y+1).key]={backfilled:!1}),O}unloadTile(e){return a._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class G extends a.E{constructor(e,o,h,d){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(d),this._data=o.data,this._options=a.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const g=a.X/this.tileSize;o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*g,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*g,extent:a.X,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:a.X,radius:(o.clusterRadius||50)*g,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return a._(this,void 0,void 0,function*(){const e=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,o,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:o,offset:h}})}_updateWorkerData(e){return a._(this,void 0,void 0,function*(){const o=a.e({type:this.type},this.workerOptions);e?o.dataDiff=e:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(C.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let d=null;h.resourceTiming&&h.resourceTiming[this.id]&&(d=h.resourceTiming[this.id].slice(0));const g={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&a.e(g,{resourceTiming:d}),this.fire(new a.k("data",Object.assign(Object.assign({},g),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},g),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(h))}})}loaded(){return this._pendingLoads===0}loadTile(e){return a._(this,void 0,void 0,function*(){const o=e.actor?"RT":"LT";e.actor=this.actor;const h={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const d=yield this.actor.sendAsync({type:o,data:h},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(d,this.map.painter,o==="RT")})}abortTile(e){return a._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return a._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var H=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ce extends a.E{constructor(e,o,h,d){super(),this.id=e,this.dispatcher=h,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=o}load(e){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield _e.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,e&&(this.coordinates=e),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new a.j(o))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const o=e.map(a.Z.fromLngLat);this.tileID=function(d){let g=1/0,I=1/0,A=-1/0,O=-1/0;for(const be of d)g=Math.min(g,be.x),I=Math.min(I,be.y),A=Math.max(A,be.x),O=Math.max(O,be.y);const X=Math.max(A-g,O-I),ae=Math.max(0,Math.floor(-Math.log(X)/Math.LN2)),le=Math.pow(2,ae);return new a.a1(ae,Math.floor((g+A)/2*le),Math.floor((I+O)/2*le))}(o),this.minzoom=this.maxzoom=this.tileID.z;const h=o.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new a.$,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,a.X,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,a.X),this._boundsArray.emplaceBack(h[2].x,h[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new K(e,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let h=!1;for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,h=!0)}h&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class rt extends Ce{constructor(e,o,h,d){super(e,o,h,d),this.roundZoom=!0,this.type="video",this.options=o}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const o of e.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield a.a3(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new a.j(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const o=this.video.seekable;e<o.start(0)||e>o.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new K(e,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let h=!1;for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,h=!0)}h&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ct extends Ce{constructor(e,o,h,d){super(e,o,h,d),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(I=>typeof I!="number"))||this.fire(new a.j(new a.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a2(`sources.${e}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new K(o,this.canvas,h.RGBA,{premultiply:!0});let d=!1;for(const g in this.tiles){const I=this.tiles[g];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,d=!0)}d&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Et={},ye=y=>{switch(y){case"geojson":return G;case"image":return Ce;case"raster":return en;case"raster-dem":return ze;case"vector":return cn;case"video":return rt;case"canvas":return ct}return Et[y]},z="RTLPluginLoaded";class q extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Tt()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return a._(this,arguments,void 0,function*(o,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=C.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(z))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Re=null;function Je(){return Re||(Re=new q),Re}class ft{constructor(e,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=a.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const o=e+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,o,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(d,g){const I={};if(!g)return I;for(const A of d){const O=A.layerIds.map(X=>g.getLayer(X)).filter(Boolean);if(O.length!==0){A.layers=O,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(X=>O.filter(ae=>ae.id===X)[0]));for(const X of O)I[X.id]=A}}return I}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const g=this.buckets[d];if(g instanceof a.a6){if(this.hasSymbolBuckets=!0,!h)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const g=this.buckets[d];if(g instanceof a.a6&&g.hasRTLText){this.hasRTLText=!0,Je().lazyLoad();break}}this.queryPadding=0;for(const d in this.buckets){const g=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(d).queryRadius(g))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const h in this.buckets){const d=this.buckets[h];d.uploadPending()&&d.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new K(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new K(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,h,d,g,I,A,O,X,ae){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:g,scale:I,tileSize:this.tileSize,pixelPosMatrix:ae,transform:O,params:A,queryPadding:this.queryPadding*X},e,o,h):{}}querySourceFeatures(e,o){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const d=h.loadVTLayers(),g=o&&o.sourceLayer?o.sourceLayer:"",I=d._geojsonTileLayer||d[g];if(!I)return;const A=a.a7(o&&o.filter),{z:O,x:X,y:ae}=this.tileID.canonical,le={z:O,x:X,y:ae};for(let be=0;be<I.length;be++){const Ae=I.feature(be);if(A.needGeometry){const $e=a.a8(Ae,!0);if(!A.filter(new a.z(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!A.filter(new a.z(this.tileID.overscaledZ),Ae))continue;const Fe=h.getId(Ae,g),Ne=new a.a9(Ae,O,X,ae,Fe);Ne.tile=le,e.push(Ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const h=a.aa(e.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const h=Date.now();let d=!1;if(this.expirationTime>h)d=!1;else if(o)if(this.expirationTime<o)d=!0;else{const g=this.expirationTime-o;g?this.expirationTime=h+Math.max(g,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const d in this.buckets){if(!o.style.hasLayer(d))continue;const g=this.buckets[d],I=g.layers[0].sourceLayer||"_geojsonTileLayer",A=h[I],O=e[I];if(!A||!O||Object.keys(O).length===0)continue;g.update(O,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const X=o&&o.style&&o.style.getLayer(d);X&&(this.queryPadding=Math.max(this.queryPadding,X.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<C.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=C.now()+e}setDependencies(e,o){const h={};for(const d of o)h[d]=!0;this.dependencies[e]=h}hasDependency(e,o){for(const h of e){const d=this.dependencies[h];if(d){for(const g of o)if(d[g])return!0}}return!1}}class Qe{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,h){const d=e.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const g={value:o,timeout:void 0};if(h!==void 0&&(g.timeout=setTimeout(()=>{this.remove(e,g)},h)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const h=e.wrapped().key,d=o===void 0?0:this.data[h].indexOf(o),g=this.data[h][d];return this.data[h].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(g.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const h in this.data)for(const d of this.data[h])e(d.value)||o.push(d);for(const h of o)this.remove(h.value.tileID,h)}}class jt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,h){const d=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][d]=this.stateChanges[e][d]||{},a.e(this.stateChanges[e][d],h),this.deletedStates[e]===null){this.deletedStates[e]={};for(const g in this.state[e])g!==d&&(this.deletedStates[e][g]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][d]===null){this.deletedStates[e][d]={};for(const g in this.state[e][d])h[g]||(this.deletedStates[e][d][g]=null)}else for(const g in h)this.deletedStates[e]&&this.deletedStates[e][d]&&this.deletedStates[e][d][g]===null&&delete this.deletedStates[e][d][g]}removeFeatureState(e,o,h){if(this.deletedStates[e]===null)return;const d=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},h&&o!==void 0)this.deletedStates[e][d]!==null&&(this.deletedStates[e][d]=this.deletedStates[e][d]||{},this.deletedStates[e][d][h]=null);else if(o!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][d])for(h in this.deletedStates[e][d]={},this.stateChanges[e][d])this.deletedStates[e][d][h]=null;else this.deletedStates[e][d]=null;else this.deletedStates[e]=null}getState(e,o){const h=String(o),d=a.e({},(this.state[e]||{})[h],(this.stateChanges[e]||{})[h]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const g=this.deletedStates[e][o];if(g===null)return{};for(const I in g)delete d[I]}return d}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const h={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const g={};for(const I in this.stateChanges[d])this.state[d][I]||(this.state[d][I]={}),a.e(this.state[d][I],this.stateChanges[d][I]),g[I]=this.state[d][I];h[d]=g}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const g={};if(this.deletedStates[d]===null)for(const I in this.state[d])g[I]={},this.state[d][I]={};else for(const I in this.deletedStates[d]){if(this.deletedStates[d][I]===null)this.state[d][I]={};else for(const A of Object.keys(this.deletedStates[d][I]))delete this.state[d][I][A];g[I]=this.state[d][I]}h[d]=h[d]||{},a.e(h[d],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const d in e)e[d].setFeatureState(h,o)}}class Bt extends a.E{constructor(e,o,h){super(),this.id=e,this.dispatcher=h,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,g,I,A)=>{const O=new(ye(g.type))(d,g,I,A);if(O.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${O.id}`);return O})(e,o,h,this),this._tiles={},this._cache=new Qe(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new jt,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const o=this._tiles[e];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,o,h){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,o,h)}catch(d){e.state="errored",d.status!==404?this._source.fire(new a.j(d,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new a.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const h=this._tiles[o];h.upload(e),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(zn).map(e=>e.key)}getRenderableIds(e){const o=[];for(const h in this._tiles)this._isIdRenderable(h,e)&&o.push(this._tiles[h]);return e?o.sort((h,d)=>{const g=h.tileID,I=d.tileID,A=new a.P(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),O=new a.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-I.overscaledZ||O.y-A.y||O.x-A.x}).map(h=>h.tileID.key):o.map(h=>h.tileID).sort(zn).map(h=>h.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,o){return a._(this,void 0,void 0,function*(){const h=this._tiles[e];h&&(h.state!=="loading"&&(h.state=o),yield this._loadTile(h,e,o))})}_tileLoaded(e,o,h){e.timeAdded=C.now(),h==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const o=this.getRenderableIds();for(let d=0;d<o.length;d++){const g=o[d];if(e.neighboringTiles&&e.neighboringTiles[g]){const I=this.getTileByID(g);h(e,I),h(I,e)}}function h(d,g){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let I=g.tileID.canonical.x-d.tileID.canonical.x;const A=g.tileID.canonical.y-d.tileID.canonical.y,O=Math.pow(2,d.tileID.canonical.z),X=g.tileID.key;I===0&&A===0||Math.abs(A)>1||(Math.abs(I)>1&&(Math.abs(I+O)===1?I+=O:Math.abs(I-O)===1&&(I-=O)),g.dem&&d.dem&&(d.dem.backfillBorder(g.dem,I,A),d.neighboringTiles&&d.neighboringTiles[X]&&(d.neighboringTiles[X].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,h,d){for(const g in this._tiles){let I=this._tiles[g];if(d[g]||!I.hasData()||I.tileID.overscaledZ<=o||I.tileID.overscaledZ>h)continue;let A=I.tileID;for(;I&&I.tileID.overscaledZ>o+1;){const X=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[X.key],I&&I.hasData()&&(A=X)}let O=A;for(;O.overscaledZ>o;)if(O=O.scaledTo(O.overscaledZ-1),e[O.key]){d[A.key]=A;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const h=this._loadedParentTiles[e.key];return h&&h.tileID.overscaledZ>=o?h:null}for(let h=e.overscaledZ-1;h>=o;h--){const d=e.scaledTo(h),g=this._getLoadedTile(d);if(g)return g}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const o=Math.ceil(e.width/this._source.tileSize)+1,h=Math.ceil(e.height/this._source.tileSize)+1,d=Math.floor(o*h*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(g)}handleWrapJump(e){const o=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,o){const h={};for(const d in this._tiles){const g=this._tiles[d];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+o),h[g.tileID.key]=g}this._tiles=h;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(e,o,h,d,g,I){const A={},O={},X=Object.keys(e),ae=C.now();for(const le of X){const be=e[le],Ae=this._tiles[le];if(!Ae||Ae.fadeEndTime!==0&&Ae.fadeEndTime<=ae)continue;const Fe=this.findLoadedParent(be,o),Ne=this.findLoadedSibling(be),$e=Fe||Ne||null;$e&&(this._addTile($e.tileID),A[$e.tileID.key]=$e.tileID),O[le]=be}this._retainLoadedChildren(O,d,h,e);for(const le in A)e[le]||(this._coveredTiles[le]=!0,e[le]=A[le]);if(I){const le={},be={};for(const Ae of g)this._tiles[Ae.key].hasData()?le[Ae.key]=Ae:be[Ae.key]=Ae;for(const Ae in be){const Fe=be[Ae].children(this._source.maxzoom);this._tiles[Fe[0].key]&&this._tiles[Fe[1].key]&&this._tiles[Fe[2].key]&&this._tiles[Fe[3].key]&&(le[Fe[0].key]=e[Fe[0].key]=Fe[0],le[Fe[1].key]=e[Fe[1].key]=Fe[1],le[Fe[2].key]=e[Fe[2].key]=Fe[2],le[Fe[3].key]=e[Fe[3].key]=Fe[3],delete be[Ae])}for(const Ae in be){const Fe=be[Ae],Ne=this.findLoadedParent(Fe,this._source.minzoom),$e=this.findLoadedSibling(Fe),qe=Ne||$e||null;if(qe){le[qe.tileID.key]=e[qe.tileID.key]=qe.tileID;for(const et in le)le[et].isChildOf(qe.tileID)&&delete le[et]}}for(const Ae in this._tiles)le[Ae]||(this._coveredTiles[Ae]=!0)}}update(e,o){if(!this._sourceLoaded||this._paused)return;let h;this.transform=e,this.terrain=o,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(ae=>new a.S(ae.canonical.z,ae.wrap,ae.canonical.z,ae.canonical.x,ae.canonical.y)):(h=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o}),this._source.hasTile&&(h=h.filter(ae=>this._source.hasTile(ae)))):h=[];const d=e.coveringZoomLevel(this._source),g=Math.max(d-Bt.maxOverzooming,this._source.minzoom),I=Math.max(d+Bt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ae={};for(const le of h)if(le.canonical.z>this._source.minzoom){const be=le.scaledTo(le.canonical.z-1);ae[be.key]=be;const Ae=le.scaledTo(Math.max(this._source.minzoom,Math.min(le.canonical.z,5)));ae[Ae.key]=Ae}h=h.concat(Object.values(ae))}const A=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(h,d);Zn(this._source.type)&&this._updateCoveredAndRetainedTiles(O,g,I,d,h,o);for(const ae in O)this._tiles[ae].clearFadeHold();const X=a.ab(this._tiles,O);for(const ae of X){const le=this._tiles[ae];le.hasSymbolBuckets&&!le.holdingForFade()?le.setHoldDuration(this.map._fadeDuration):le.hasSymbolBuckets&&!le.symbolFadeFinished()||this._removeTile(ae)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,o){var h;const d={},g={},I=Math.max(o-Bt.maxOverzooming,this._source.minzoom),A=Math.max(o+Bt.maxUnderzooming,this._source.minzoom),O={};for(const X of e){const ae=this._addTile(X);d[X.key]=X,ae.hasData()||o<this._source.maxzoom&&(O[X.key]=X)}this._retainLoadedChildren(O,o,A,d);for(const X of e){let ae=this._tiles[X.key];if(ae.hasData())continue;if(o+1>this._source.maxzoom){const be=X.children(this._source.maxzoom)[0],Ae=this.getTile(be);if(Ae&&Ae.hasData()){d[be.key]=be;continue}}else{const be=X.children(this._source.maxzoom);if(d[be[0].key]&&d[be[1].key]&&d[be[2].key]&&d[be[3].key])continue}let le=ae.wasRequested();for(let be=X.overscaledZ-1;be>=I;--be){const Ae=X.scaledTo(be);if(g[Ae.key])break;if(g[Ae.key]=!0,ae=this.getTile(Ae),!ae&&le&&(ae=this._addTile(Ae)),ae){const Fe=ae.hasData();if((Fe||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||le)&&(d[Ae.key]=Ae),le=ae.wasRequested(),Fe)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let h,d=this._tiles[e].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){h=this._loadedParentTiles[d.key];break}o.push(d.key);const g=d.scaledTo(d.overscaledZ-1);if(h=this._getLoadedTile(g),h)break;d=g}for(const g of o)this._loadedParentTiles[g]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const o=this._tiles[e].tileID,h=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=h}}_addTile(e){let o=this._tiles[e.key];if(o)return o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const h=o;return o||(o=new ft(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(o,e.key,o.state)),o.uses++,this._tiles[e.key]=o,h||this._source.fire(new a.k("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const h=o.getExpiryTimeout();h&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},h))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(e){const o=e.sourceDataType;e.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&o==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,o,h){const d=[],g=this.transform;if(!g)return d;const I=h?g.getCameraQueryGeometry(e):e,A=e.map(Fe=>g.pointCoordinate(Fe,this.terrain)),O=I.map(Fe=>g.pointCoordinate(Fe,this.terrain)),X=this.getIds();let ae=1/0,le=1/0,be=-1/0,Ae=-1/0;for(const Fe of O)ae=Math.min(ae,Fe.x),le=Math.min(le,Fe.y),be=Math.max(be,Fe.x),Ae=Math.max(Ae,Fe.y);for(let Fe=0;Fe<X.length;Fe++){const Ne=this._tiles[X[Fe]];if(Ne.holdingForFade())continue;const $e=Ne.tileID,qe=Math.pow(2,g.zoom-Ne.tileID.overscaledZ),et=o*Ne.queryPadding*a.X/Ne.tileSize/qe,Ve=[$e.getTilePoint(new a.Z(ae,le)),$e.getTilePoint(new a.Z(be,Ae))];if(Ve[0].x-et<a.X&&Ve[0].y-et<a.X&&Ve[1].x+et>=0&&Ve[1].y+et>=0){const st=A.map(mt=>$e.getTilePoint(mt)),ut=O.map(mt=>$e.getTilePoint(mt));d.push({tile:Ne,tileID:$e,queryGeometry:st,cameraQueryGeometry:ut,scale:qe})}}return d}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(h=>this._tiles[h].tileID);for(const h of o)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Zn(this._source.type)){const e=C.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=e)return!0}return!1}setFeatureState(e,o,h){this._state.updateState(e=e||"_geojsonTileLayer",o,h)}removeFeatureState(e,o,h){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,h)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,h){const d=this._tiles[e];d&&d.setDependencies(o,h)}reloadTilesForDependencies(e,o){for(const h in this._tiles)this._tiles[h].hasDependency(e,o)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(e,o))}}function zn(y,e){const o=Math.abs(2*y.wrap)-+(y.wrap<0),h=Math.abs(2*e.wrap)-+(e.wrap<0);return y.overscaledZ-e.overscaledZ||h-o||e.canonical.y-y.canonical.y||e.canonical.x-y.canonical.x}function Zn(y){return y==="raster"||y==="image"||y==="video"}Bt.maxOverzooming=10,Bt.maxUnderzooming=3;class qt{constructor(e,o){this.reset(e,o)}reset(e,o){this.points=e||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=a.ac(e,0,1);let o=1,h=this._distances[o];const d=e*this.paddedLength+this.padding;for(;h<d&&o<this._distances.length;)h=this._distances[++o];const g=o-1,I=this._distances[g],A=h-I,O=A>0?(d-I)/A:0;return this.points[g].mult(1-O).add(this.points[o].mult(O))}}function Or(y,e){let o=!0;return y==="always"||y!=="never"&&e!=="never"||(o=!1),o}class qr{constructor(e,o,h){const d=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(e/h),this.yCellCount=Math.ceil(o/h);for(let I=0;I<this.xCellCount*this.yCellCount;I++)d.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=o,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,o,h,d,g){this._forEachCell(o,h,d,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(d),this.bboxes.push(g)}insertCircle(e,o,h,d){this._forEachCell(o-d,h-d,o+d,h+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(o),this.circles.push(h),this.circles.push(d)}_insertBoxCell(e,o,h,d,g,I){this.boxCells[g].push(I)}_insertCircleCell(e,o,h,d,g,I){this.circleCells[g].push(I)}_query(e,o,h,d,g,I,A){if(h<0||e>this.width||d<0||o>this.height)return[];const O=[];if(e<=0&&o<=0&&this.width<=h&&this.height<=d){if(g)return[{key:null,x1:e,y1:o,x2:h,y2:d}];for(let X=0;X<this.boxKeys.length;X++)O.push({key:this.boxKeys[X],x1:this.bboxes[4*X],y1:this.bboxes[4*X+1],x2:this.bboxes[4*X+2],y2:this.bboxes[4*X+3]});for(let X=0;X<this.circleKeys.length;X++){const ae=this.circles[3*X],le=this.circles[3*X+1],be=this.circles[3*X+2];O.push({key:this.circleKeys[X],x1:ae-be,y1:le-be,x2:ae+be,y2:le+be})}}else this._forEachCell(e,o,h,d,this._queryCell,O,{hitTest:g,overlapMode:I,seenUids:{box:{},circle:{}}},A);return O}query(e,o,h,d){return this._query(e,o,h,d,!1,null)}hitTest(e,o,h,d,g,I){return this._query(e,o,h,d,!0,g,I).length>0}hitTestCircle(e,o,h,d,g){const I=e-h,A=e+h,O=o-h,X=o+h;if(A<0||I>this.width||X<0||O>this.height)return!1;const ae=[];return this._forEachCell(I,O,A,X,this._queryCellCircle,ae,{hitTest:!0,overlapMode:d,circle:{x:e,y:o,radius:h},seenUids:{box:{},circle:{}}},g),ae.length>0}_queryCell(e,o,h,d,g,I,A,O){const{seenUids:X,hitTest:ae,overlapMode:le}=A,be=this.boxCells[g];if(be!==null){const Fe=this.bboxes;for(const Ne of be)if(!X.box[Ne]){X.box[Ne]=!0;const $e=4*Ne,qe=this.boxKeys[Ne];if(e<=Fe[$e+2]&&o<=Fe[$e+3]&&h>=Fe[$e+0]&&d>=Fe[$e+1]&&(!O||O(qe))&&(!ae||!Or(le,qe.overlapMode))&&(I.push({key:qe,x1:Fe[$e],y1:Fe[$e+1],x2:Fe[$e+2],y2:Fe[$e+3]}),ae))return!0}}const Ae=this.circleCells[g];if(Ae!==null){const Fe=this.circles;for(const Ne of Ae)if(!X.circle[Ne]){X.circle[Ne]=!0;const $e=3*Ne,qe=this.circleKeys[Ne];if(this._circleAndRectCollide(Fe[$e],Fe[$e+1],Fe[$e+2],e,o,h,d)&&(!O||O(qe))&&(!ae||!Or(le,qe.overlapMode))){const et=Fe[$e],Ve=Fe[$e+1],st=Fe[$e+2];if(I.push({key:qe,x1:et-st,y1:Ve-st,x2:et+st,y2:Ve+st}),ae)return!0}}}return!1}_queryCellCircle(e,o,h,d,g,I,A,O){const{circle:X,seenUids:ae,overlapMode:le}=A,be=this.boxCells[g];if(be!==null){const Fe=this.bboxes;for(const Ne of be)if(!ae.box[Ne]){ae.box[Ne]=!0;const $e=4*Ne,qe=this.boxKeys[Ne];if(this._circleAndRectCollide(X.x,X.y,X.radius,Fe[$e+0],Fe[$e+1],Fe[$e+2],Fe[$e+3])&&(!O||O(qe))&&!Or(le,qe.overlapMode))return I.push(!0),!0}}const Ae=this.circleCells[g];if(Ae!==null){const Fe=this.circles;for(const Ne of Ae)if(!ae.circle[Ne]){ae.circle[Ne]=!0;const $e=3*Ne,qe=this.circleKeys[Ne];if(this._circlesCollide(Fe[$e],Fe[$e+1],Fe[$e+2],X.x,X.y,X.radius)&&(!O||O(qe))&&!Or(le,qe.overlapMode))return I.push(!0),!0}}}_forEachCell(e,o,h,d,g,I,A,O){const X=this._convertToXCellCoord(e),ae=this._convertToYCellCoord(o),le=this._convertToXCellCoord(h),be=this._convertToYCellCoord(d);for(let Ae=X;Ae<=le;Ae++)for(let Fe=ae;Fe<=be;Fe++)if(g.call(this,e,o,h,d,this.xCellCount*Fe+Ae,I,A,O))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,o,h,d,g,I){const A=d-e,O=g-o,X=h+I;return X*X>A*A+O*O}_circleAndRectCollide(e,o,h,d,g,I,A){const O=(I-d)/2,X=Math.abs(e-(d+O));if(X>O+h)return!1;const ae=(A-g)/2,le=Math.abs(o-(g+ae));if(le>ae+h)return!1;if(X<=O||le<=ae)return!0;const be=X-O,Ae=le-ae;return be*be+Ae*Ae<=h*h}}function Xr(y,e,o,h,d){const g=a.H();return e?(a.K(g,g,[1/d,1/d,1]),o||a.ad(g,g,h.angle)):a.L(g,h.labelPlaneMatrix,y),g}function Tr(y,e,o,h,d){if(e){const g=a.ae(y);return a.K(g,g,[d,d,1]),o||a.ad(g,g,-h.angle),g}return h.glCoordMatrix}function Ue(y,e,o,h){let d;h?(d=[y,e,h(y,e),1],a.af(d,d,o)):(d=[y,e,0,1],Jn(d,d,o));const g=d[3];return{point:new a.P(d[0]/g,d[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function me(y,e){return .5+y/e*.5}function pe(y,e){return y.x>=-e[0]&&y.x<=e[0]&&y.y>=-e[1]&&y.y<=e[1]}function Pe(y,e,o,h,d,g,I,A,O,X,ae,le,be,Ae,Fe){const Ne=h?y.textSizeData:y.iconSizeData,$e=a.ag(Ne,o.transform.zoom),qe=[256/o.width*2+1,256/o.height*2+1],et=h?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;et.clear();const Ve=y.lineVertexArray,st=h?y.text.placedSymbolArray:y.icon.placedSymbolArray,ut=o.transform.width/o.transform.height;let mt=!1;for(let At=0;At<st.length;At++){const Dt=st.get(At);if(Dt.hidden||Dt.writingMode===a.ah.vertical&&!mt){vn(Dt.numGlyphs,et);continue}mt=!1;const Gt=Ue(Dt.anchorX,Dt.anchorY,e,Fe);if(!pe(Gt.point,qe)){vn(Dt.numGlyphs,et);continue}const tn=me(o.transform.cameraToCenterDistance,Gt.signedDistanceFromCamera),Ht=a.ai(Ne,$e,Dt),Lt=I?Ht/tn:Ht*tn,hn={getElevation:Fe,labelPlaneMatrix:d,lineVertexArray:Ve,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:X,tileAnchorPoint:new a.P(Dt.anchorX,Dt.anchorY),unwrappedTileID:ae,width:le,height:be,translation:Ae},Rn=He(hn,Dt,Lt,!1,A,e,g,y.glyphOffsetArray,et,ut,O);mt=Rn.useVertical,(Rn.notEnoughRoom||mt||Rn.needsFlipping&&He(hn,Dt,Lt,!0,A,e,g,y.glyphOffsetArray,et,ut,O).notEnoughRoom)&&vn(Dt.numGlyphs,et)}h?y.text.dynamicLayoutVertexBuffer.updateData(et):y.icon.dynamicLayoutVertexBuffer.updateData(et)}function je(y,e,o,h,d,g,I,A){const O=g.glyphStartIndex+g.numGlyphs,X=g.lineStartIndex,ae=g.lineStartIndex+g.lineLength,le=e.getoffsetX(g.glyphStartIndex),be=e.getoffsetX(O-1),Ae=Ut(y*le,o,h,d,g.segment,X,ae,A,I);if(!Ae)return null;const Fe=Ut(y*be,o,h,d,g.segment,X,ae,A,I);return Fe?A.projectionCache.anyProjectionOccluded?null:{first:Ae,last:Fe}:null}function Be(y,e,o,h){return y===a.ah.horizontal&&Math.abs(o.y-e.y)>Math.abs(o.x-e.x)*h?{useVertical:!0}:(y===a.ah.vertical?e.y<o.y:e.x>o.x)?{needsFlipping:!0}:null}function He(y,e,o,h,d,g,I,A,O,X,ae){const le=o/24,be=e.lineOffsetX*le,Ae=e.lineOffsetY*le;let Fe;if(e.numGlyphs>1){const Ne=e.glyphStartIndex+e.numGlyphs,$e=e.lineStartIndex,qe=e.lineStartIndex+e.lineLength,et=je(le,A,be,Ae,h,e,ae,y);if(!et)return{notEnoughRoom:!0};const Ve=Ue(et.first.point.x,et.first.point.y,I,y.getElevation).point,st=Ue(et.last.point.x,et.last.point.y,I,y.getElevation).point;if(d&&!h){const ut=Be(e.writingMode,Ve,st,X);if(ut)return ut}Fe=[et.first];for(let ut=e.glyphStartIndex+1;ut<Ne-1;ut++)Fe.push(Ut(le*A.getoffsetX(ut),be,Ae,h,e.segment,$e,qe,y,ae));Fe.push(et.last)}else{if(d&&!h){const $e=Ue(y.tileAnchorPoint.x,y.tileAnchorPoint.y,g,y.getElevation).point,qe=e.lineStartIndex+e.segment+1,et=new a.P(y.lineVertexArray.getx(qe),y.lineVertexArray.gety(qe)),Ve=Ue(et.x,et.y,g,y.getElevation),st=Ve.signedDistanceFromCamera>0?Ve.point:function(mt,At,Dt,Gt,tn,Ht){return nt(mt,At,Dt,1,tn,Ht)}(y.tileAnchorPoint,et,$e,0,g,y),ut=Be(e.writingMode,$e,st,X);if(ut)return ut}const Ne=Ut(le*A.getoffsetX(e.glyphStartIndex),be,Ae,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,y,ae);if(!Ne||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Fe=[Ne]}for(const Ne of Fe)a.aj(O,Ne.point,Ne.angle);return{}}function nt(y,e,o,h,d,g){const I=y.add(y.sub(e)._unit()),A=d!==void 0?Ue(I.x,I.y,d,g.getElevation).point:yt(I.x,I.y,g).point,O=o.sub(A);return o.add(O._mult(h/O.mag()))}function Ze(y,e,o){const h=e.projectionCache;if(h.projections[y])return h.projections[y];const d=new a.P(e.lineVertexArray.getx(y),e.lineVertexArray.gety(y)),g=yt(d.x,d.y,e);if(g.signedDistanceFromCamera>0)return h.projections[y]=g.point,h.anyProjectionOccluded=h.anyProjectionOccluded||g.isOccluded,g.point;const I=y-o.direction;return function(A,O,X,ae,le){return nt(A,O,X,ae,void 0,le)}(o.distanceFromAnchor===0?e.tileAnchorPoint:new a.P(e.lineVertexArray.getx(I),e.lineVertexArray.gety(I)),d,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,e)}function yt(y,e,o){const h=y+o.translation[0],d=e+o.translation[1];let g;return!o.pitchWithMap&&o.projection.useSpecialProjectionForSymbols?(g=o.projection.projectTileCoordinates(h,d,o.unwrappedTileID,o.getElevation),g.point.x=(.5*g.point.x+.5)*o.width,g.point.y=(.5*-g.point.y+.5)*o.height):(g=Ue(h,d,o.labelPlaneMatrix,o.getElevation),g.isOccluded=!1),g}function It(y,e,o){return y._unit()._perp()._mult(e*o)}function gt(y,e,o,h,d,g,I,A,O){if(A.projectionCache.offsets[y])return A.projectionCache.offsets[y];const X=o.add(e);if(y+O.direction<h||y+O.direction>=d)return A.projectionCache.offsets[y]=X,X;const ae=Ze(y+O.direction,A,O),le=It(ae.sub(o),I,O.direction),be=o.add(le),Ae=ae.add(le);return A.projectionCache.offsets[y]=a.ak(g,X,be,Ae)||X,A.projectionCache.offsets[y]}function Ut(y,e,o,h,d,g,I,A,O){const X=h?y-e:y+e;let ae=X>0?1:-1,le=0;h&&(ae*=-1,le=Math.PI),ae<0&&(le+=Math.PI);let be,Ae=ae>0?g+d:g+d+1;A.projectionCache.cachedAnchorPoint?be=A.projectionCache.cachedAnchorPoint:(be=yt(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=be);let Fe,Ne,$e=be,qe=be,et=0,Ve=0;const st=Math.abs(X),ut=[];let mt;for(;et+Ve<=st;){if(Ae+=ae,Ae<g||Ae>=I)return null;et+=Ve,qe=$e,Ne=Fe;const Gt={absOffsetX:st,direction:ae,distanceFromAnchor:et,previousVertex:qe};if($e=Ze(Ae,A,Gt),o===0)ut.push(qe),mt=$e.sub(qe);else{let tn;const Ht=$e.sub(qe);tn=Ht.mag()===0?It(Ze(Ae+ae,A,Gt).sub($e),o,ae):It(Ht,o,ae),Ne||(Ne=qe.add(tn)),Fe=gt(Ae,tn,$e,g,I,Ne,o,A,Gt),ut.push(Ne),mt=Fe.sub(Ne)}Ve=mt.mag()}const At=mt._mult((st-et)/Ve)._add(Ne||qe),Dt=le+Math.atan2($e.y-qe.y,$e.x-qe.x);return ut.push(At),{point:At,angle:O?Dt:0,path:ut}}const pn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function vn(y,e){for(let o=0;o<y;o++){const h=e.length;e.resize(h+4),e.float32.set(pn,3*h)}}function Jn(y,e,o){const h=e[0],d=e[1];return y[0]=o[0]*h+o[4]*d+o[12],y[1]=o[1]*h+o[5]*d+o[13],y[3]=o[3]*h+o[7]*d+o[15],y}const jn=100;class Qn{constructor(e,o,h=new qr(e.width+200,e.height+200,25),d=new qr(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=o,this.grid=h,this.ignoredGrid=d,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+jn,this.screenBottomBoundary=e.height+jn,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,o,h,d,g,I,A,O,X,ae,le){const be=e.anchorPointX+O[0],Ae=e.anchorPointY+O[1],Fe=this.projectAndGetPerspectiveRatio(d,be,Ae,g,ae),Ne=h*Fe.perspectiveRatio;let $e;if(I||A)$e=this._projectCollisionBox(e,Ne,d,g,I,A,O,Fe,ae,le);else{const ut=Fe.point.x+(le?le.x*Ne:0),mt=Fe.point.y+(le?le.y*Ne:0);$e={allPointsOccluded:!1,box:[ut+e.x1*Ne,mt+e.y1*Ne,ut+e.x2*Ne,mt+e.y2*Ne]}}const[qe,et,Ve,st]=$e.box;return this.mapProjection.useSpecialProjectionForSymbols&&(I?$e.allPointsOccluded:this.mapProjection.isOccluded(be,Ae,g))||Fe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(qe,et,Ve,st)||o!=="always"&&this.grid.hitTest(qe,et,Ve,st,o,X)?{box:[qe,et,Ve,st],placeable:!1,offscreen:!1}:{box:[qe,et,Ve,st],placeable:!0,offscreen:this.isOffscreen(qe,et,Ve,st)}}placeCollisionCircles(e,o,h,d,g,I,A,O,X,ae,le,be,Ae,Fe,Ne,$e){const qe=[],et=new a.P(o.anchorX,o.anchorY),Ve=this.getPerspectiveRatio(I,et.x,et.y,A,$e),st=(le?g/Ve:g*Ve)/a.ap,ut={getElevation:$e,labelPlaneMatrix:O,lineVertexArray:h,pitchWithMap:le,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:et,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Ne},mt=je(st,d,o.lineOffsetX*st,o.lineOffsetY*st,!1,o,!1,ut);let At=!1,Dt=!1,Gt=!0;if(mt){const tn=.5*Ae*Ve+Fe,Ht=new a.P(-100,-100),Lt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),hn=new qt,Rn=mt.first,$t=mt.last;let Qt=[];for(let Gn=Rn.path.length-1;Gn>=1;Gn--)Qt.push(Rn.path[Gn]);for(let Gn=1;Gn<$t.path.length;Gn++)Qt.push($t.path[Gn]);const Fn=2.5*tn;if(X){const Gn=this.projectPathToScreenSpace(Qt,ut,X);Qt=Gn.some(qn=>qn.signedDistanceFromCamera<=0)?[]:Gn.map(qn=>qn.point)}let Er=[];if(Qt.length>0){const Gn=Qt[0].clone(),qn=Qt[0].clone();for(let rr=1;rr<Qt.length;rr++)Gn.x=Math.min(Gn.x,Qt[rr].x),Gn.y=Math.min(Gn.y,Qt[rr].y),qn.x=Math.max(qn.x,Qt[rr].x),qn.y=Math.max(qn.y,Qt[rr].y);Er=Gn.x>=Ht.x&&qn.x<=Lt.x&&Gn.y>=Ht.y&&qn.y<=Lt.y?[Qt]:qn.x<Ht.x||Gn.x>Lt.x||qn.y<Ht.y||Gn.y>Lt.y?[]:a.al([Qt],Ht.x,Ht.y,Lt.x,Lt.y)}for(const Gn of Er){hn.reset(Gn,.25*tn);let qn=0;qn=hn.length<=.5*tn?1:Math.ceil(hn.paddedLength/Fn)+1;for(let rr=0;rr<qn;rr++){const ei=rr/Math.max(qn-1,1),jo=hn.lerp(ei),Pr=jo.x+jn,ti=jo.y+jn;qe.push(Pr,ti,tn,0);const ni=Pr-tn,Si=ti-tn,Zi=Pr+tn,Ei=ti+tn;if(Gt=Gt&&this.isOffscreen(ni,Si,Zi,Ei),Dt=Dt||this.isInsideGrid(ni,Si,Zi,Ei),e!=="always"&&this.grid.hitTestCircle(Pr,ti,tn,e,be)&&(At=!0,!ae))return{circles:[],offscreen:!1,collisionDetected:At}}}}return{circles:!ae&&At||!Dt||Ve<this.perspectiveRatioCutoff?[]:qe,offscreen:Gt,collisionDetected:At}}projectPathToScreenSpace(e,o,h){return e.map(d=>Ue(d.x,d.y,h,o.getElevation))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let h=1/0,d=1/0,g=-1/0,I=-1/0;for(const ae of e){const le=new a.P(ae.x+jn,ae.y+jn);h=Math.min(h,le.x),d=Math.min(d,le.y),g=Math.max(g,le.x),I=Math.max(I,le.y),o.push(le)}const A=this.grid.query(h,d,g,I).concat(this.ignoredGrid.query(h,d,g,I)),O={},X={};for(const ae of A){const le=ae.key;if(O[le.bucketInstanceId]===void 0&&(O[le.bucketInstanceId]={}),O[le.bucketInstanceId][le.featureIndex])continue;const be=[new a.P(ae.x1,ae.y1),new a.P(ae.x2,ae.y1),new a.P(ae.x2,ae.y2),new a.P(ae.x1,ae.y2)];a.am(o,be)&&(O[le.bucketInstanceId][le.featureIndex]=!0,X[le.bucketInstanceId]===void 0&&(X[le.bucketInstanceId]=[]),X[le.bucketInstanceId].push(le.featureIndex))}return X}insertCollisionBox(e,o,h,d,g,I){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:g,collisionGroupID:I,overlapMode:o},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,o,h,d,g,I){const A=h?this.ignoredGrid:this.grid,O={bucketInstanceId:d,featureIndex:g,collisionGroupID:I,overlapMode:o};for(let X=0;X<e.length;X+=4)A.insertCircle(O,e[X],e[X+1],e[X+2])}projectAndGetPerspectiveRatio(e,o,h,d,g){let I;g?(I=[o,h,g(o,h),1],a.af(I,I,e)):(I=[o,h,0,1],Jn(I,I,e));const A=I[3];return{point:new a.P((I[0]/A+1)/2*this.transform.width+jn,(-I[1]/A+1)/2*this.transform.height+jn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A*.5,isOccluded:!1,signedDistanceFromCamera:A}}getPerspectiveRatio(e,o,h,d,g){const I=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(o,h,d,g):Ue(o,h,e,g);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(e,o,h,d){return h<jn||e>=this.screenRightBoundary||d<jn||o>this.screenBottomBoundary}isInsideGrid(e,o,h,d){return h>=0&&e<this.gridRightBoundary&&d>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const e=a.an([]);return a.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,o,h,d,g,I,A,O,X,ae){let le=new a.P(1,0),be=new a.P(0,1);const Ae=new a.P(e.anchorPointX+A[0],e.anchorPointY+A[1]);if(I&&!g){const Gt=this.projectAndGetPerspectiveRatio(h,Ae.x+1,Ae.y,d,X).point.sub(O.point).unit(),tn=Math.atan(Gt.y/Gt.x)+(Gt.x<0?Math.PI:0),Ht=Math.sin(tn),Lt=Math.cos(tn);le=new a.P(Lt,Ht),be=new a.P(-Ht,Lt)}else if(!I&&g){const Gt=-this.transform.angle,tn=Math.sin(Gt),Ht=Math.cos(Gt);le=new a.P(Ht,tn),be=new a.P(-tn,Ht)}let Fe=O.point,Ne=o;if(g){Fe=Ae;const Gt=this.transform.zoom-Math.floor(this.transform.zoom);Ne=Math.pow(2,-Gt),Ne*=this.mapProjection.getPitchedTextCorrection(this.transform,Ae,d),ae||(Ne*=a.ac(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}ae&&(Fe=Fe.add(le.mult(ae.x*Ne)).add(be.mult(ae.y*Ne)));const $e=e.x1*Ne,qe=e.x2*Ne,et=($e+qe)/2,Ve=e.y1*Ne,st=e.y2*Ne,ut=(Ve+st)/2,mt=[{offsetX:$e,offsetY:Ve},{offsetX:et,offsetY:Ve},{offsetX:qe,offsetY:Ve},{offsetX:qe,offsetY:ut},{offsetX:qe,offsetY:st},{offsetX:et,offsetY:st},{offsetX:$e,offsetY:st},{offsetX:$e,offsetY:ut}];let At=[];for(const{offsetX:Gt,offsetY:tn}of mt)At.push(new a.P(Fe.x+le.x*Gt+be.x*tn,Fe.y+le.y*Gt+be.y*tn));let Dt=!1;if(g){const Gt=At.map(tn=>this.projectAndGetPerspectiveRatio(h,tn.x,tn.y,d,X));Dt=Gt.some(tn=>!tn.isOccluded),At=Gt.map(tn=>tn.point)}else Dt=!0;return{box:a.ao(At),allPointsOccluded:!Dt}}}function Un(y,e,o){return e*(a.X/(y.tileSize*Math.pow(2,o-y.tileID.overscaledZ)))}class jr{constructor(e,o,h,d){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?o:-o))):d&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class xr{constructor(e,o,h,d,g){this.text=new jr(e?e.text:null,o,h,g),this.icon=new jr(e?e.icon:null,o,d,g)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Wn{constructor(e,o,h){this.text=e,this.icon=o,this.skipFade=h}}class lr{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class br{constructor(e,o,h,d,g){this.bucketInstanceId=e,this.featureIndex=o,this.sourceLayerIndex=h,this.bucketIndex=d,this.tileID=g}}class ii{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const o=++this.maxGroupID;this.collisionGroups[e]={ID:o,predicate:h=>h.collisionGroupID===o}}return this.collisionGroups[e]}}function ci(y,e,o,h,d){const{horizontalAlign:g,verticalAlign:I}=a.au(y);return new a.P(-(g-.5)*e+h[0]*d,-(I-.5)*o+h[1]*d)}class zi{constructor(e,o,h,d,g,I){this.transform=e.clone(),this.terrain=h,this.collisionIndex=new Qn(this.transform,o),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ii(g),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const o=this.terrain;return o?(h,d)=>o.getElevation(e,h,d):null}getBucketParts(e,o,h,d){const g=h.getBucket(o),I=h.latestFeatureIndex;if(!g||!I||o.id!==g.layerIds[0])return;const A=h.collisionBoxArray,O=g.layers[0].layout,X=g.layers[0].paint,ae=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),le=h.tileSize/a.X,be=h.tileID.toUnwrapped(),Ae=this.transform.calculatePosMatrix(be),Fe=O.get("text-pitch-alignment")==="map",Ne=O.get("text-rotation-alignment")==="map",$e=Un(h,1,this.transform.zoom),qe=this.collisionIndex.mapProjection.translatePosition(this.transform,h,X.get("text-translate"),X.get("text-translate-anchor")),et=this.collisionIndex.mapProjection.translatePosition(this.transform,h,X.get("icon-translate"),X.get("icon-translate-anchor")),Ve=Xr(Ae,Fe,Ne,this.transform,$e);let st=null;if(Fe){const mt=Tr(Ae,Fe,Ne,this.transform,$e);st=a.L([],this.transform.labelPlaneMatrix,mt)}this.retainedQueryData[g.bucketInstanceId]=new br(g.bucketInstanceId,I,g.sourceLayerIndex,g.index,h.tileID);const ut={bucket:g,layout:O,translationText:qe,translationIcon:et,posMatrix:Ae,unwrappedTileID:be,textLabelPlaneMatrix:Ve,labelToScreenMatrix:st,scale:ae,textPixelRatio:le,holdingForFade:h.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:a.ag(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(d)for(const mt of g.sortKeyRanges){const{sortKey:At,symbolInstanceStart:Dt,symbolInstanceEnd:Gt}=mt;e.push({sortKey:At,symbolInstanceStart:Dt,symbolInstanceEnd:Gt,parameters:ut})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:ut})}attemptAnchorPlacement(e,o,h,d,g,I,A,O,X,ae,le,be,Ae,Fe,Ne,$e,qe,et,Ve){const st=a.aq[e.textAnchor],ut=[e.textOffset0,e.textOffset1],mt=ci(st,h,d,ut,g),At=this.collisionIndex.placeCollisionBox(o,be,O,X,ae,A,I,$e,le.predicate,Ve,mt);if((!et||this.collisionIndex.placeCollisionBox(et,be,O,X,ae,A,I,qe,le.predicate,Ve,mt).placeable)&&At.placeable){let Dt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID].text&&(Dt=this.prevPlacement.variableOffsets[Ae.crossTileID].anchor),Ae.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ae.crossTileID]={textOffset:ut,width:h,height:d,anchor:st,textBoxScale:g,prevAnchor:Dt},this.markUsedJustification(Fe,st,Ae,Ne),Fe.allowVerticalPlacement&&(this.markUsedOrientation(Fe,Ne,Ae),this.placedOrientations[Ae.crossTileID]=Ne),{shift:mt,placedGlyphBoxes:At}}}placeLayerBucketPart(e,o,h){const{bucket:d,layout:g,translationText:I,translationIcon:A,posMatrix:O,unwrappedTileID:X,textLabelPlaneMatrix:ae,labelToScreenMatrix:le,textPixelRatio:be,holdingForFade:Ae,collisionBoxArray:Fe,partiallyEvaluatedTextSize:Ne,collisionGroup:$e}=e.parameters,qe=g.get("text-optional"),et=g.get("icon-optional"),Ve=a.ar(g,"text-overlap","text-allow-overlap"),st=Ve==="always",ut=a.ar(g,"icon-overlap","icon-allow-overlap"),mt=ut==="always",At=g.get("text-rotation-alignment")==="map",Dt=g.get("text-pitch-alignment")==="map",Gt=g.get("icon-text-fit")!=="none",tn=g.get("symbol-z-order")==="viewport-y",Ht=st&&(mt||!d.hasIconData()||et),Lt=mt&&(st||!d.hasTextData()||qe);!d.collisionArrays&&Fe&&d.deserializeCollisionBoxes(Fe);const hn=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),Rn=($t,Qt,Fn)=>{var Er,Gn;if(o[$t.crossTileID])return;if(Ae)return void(this.placements[$t.crossTileID]=new Wn(!1,!1,!1));let qn=!1,rr=!1,ei=!0,jo=null,Pr={box:null,placeable:!1,offscreen:null},ti={box:null,placeable:!1,offscreen:null},ni=null,Si=null,Zi=null,Ei=0,Lo=0,pl=0;Qt.textFeatureIndex?Ei=Qt.textFeatureIndex:$t.useRuntimeCollisionCircles&&(Ei=$t.featureIndex),Qt.verticalTextFeatureIndex&&(Lo=Qt.verticalTextFeatureIndex);const ml=Qt.textBox;if(ml){const xo=Ti=>{let Ii=a.ah.horizontal;if(d.allowVerticalPlacement&&!Ti&&this.prevPlacement){const Li=this.prevPlacement.placedOrientations[$t.crossTileID];Li&&(this.placedOrientations[$t.crossTileID]=Li,Ii=Li,this.markUsedOrientation(d,Ii,$t))}return Ii},so=(Ti,Ii)=>{if(d.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&Qt.verticalTextBox){for(const Li of d.writingModes)if(Li===a.ah.vertical?(Pr=Ii(),ti=Pr):Pr=Ti(),Pr&&Pr.placeable)break}else Pr=Ti()},ua=$t.textAnchorOffsetStartIndex,qo=$t.textAnchorOffsetEndIndex;if(qo===ua){const Ti=(Ii,Li)=>{const Kn=this.collisionIndex.placeCollisionBox(Ii,Ve,be,O,X,Dt,At,I,$e.predicate,hn);return Kn&&Kn.placeable&&(this.markUsedOrientation(d,Li,$t),this.placedOrientations[$t.crossTileID]=Li),Kn};so(()=>Ti(ml,a.ah.horizontal),()=>{const Ii=Qt.verticalTextBox;return d.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&Ii?Ti(Ii,a.ah.vertical):{box:null,offscreen:null}}),xo(Pr&&Pr.placeable)}else{let Ti=a.aq[(Gn=(Er=this.prevPlacement)===null||Er===void 0?void 0:Er.variableOffsets[$t.crossTileID])===null||Gn===void 0?void 0:Gn.anchor];const Ii=(Kn,Va,gl)=>{const ys=Kn.x2-Kn.x1,Wc=Kn.y2-Kn.y1,ju=$t.textBoxScale,vs=Gt&&ut==="never"?Va:null;let Xo=null,Ql=Ve==="never"?1:2,Us="never";Ti&&Ql++;for(let yl=0;yl<Ql;yl++){for(let ca=ua;ca<qo;ca++){const Lu=d.textAnchorOffsets.get(ca);if(Ti&&Lu.textAnchor!==Ti)continue;const $a=this.attemptAnchorPlacement(Lu,Kn,ys,Wc,ju,At,Dt,be,O,X,$e,Us,$t,d,gl,I,A,vs,hn);if($a&&(Xo=$a.placedGlyphBoxes,Xo&&Xo.placeable))return qn=!0,jo=$a.shift,Xo}Ti?Ti=null:Us=Ve}return h&&!Xo&&(Xo={box:this.collisionIndex.placeCollisionBox(ml,"always",be,O,X,Dt,At,I,$e.predicate,hn,new a.P(0,0)).box,offscreen:!1,placeable:!1}),Xo};so(()=>Ii(ml,Qt.iconBox,a.ah.horizontal),()=>{const Kn=Qt.verticalTextBox;return d.allowVerticalPlacement&&(!Pr||!Pr.placeable)&&$t.numVerticalGlyphVertices>0&&Kn?Ii(Kn,Qt.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Pr&&(qn=Pr.placeable,ei=Pr.offscreen);const Li=xo(Pr&&Pr.placeable);if(!qn&&this.prevPlacement){const Kn=this.prevPlacement.variableOffsets[$t.crossTileID];Kn&&(this.variableOffsets[$t.crossTileID]=Kn,this.markUsedJustification(d,Kn.anchor,$t,Li))}}}if(ni=Pr,qn=ni&&ni.placeable,ei=ni&&ni.offscreen,$t.useRuntimeCollisionCircles){const xo=d.text.placedSymbolArray.get($t.centerJustifiedTextSymbolIndex),so=a.ai(d.textSizeData,Ne,xo),ua=g.get("text-padding");Si=this.collisionIndex.placeCollisionCircles(Ve,xo,d.lineVertexArray,d.glyphOffsetArray,so,O,X,ae,le,h,Dt,$e.predicate,$t.collisionCircleDiameter,ua,I,hn),Si.circles.length&&Si.collisionDetected&&!h&&a.w("Collisions detected, but collision boxes are not shown"),qn=st||Si.circles.length>0&&!Si.collisionDetected,ei=ei&&Si.offscreen}if(Qt.iconFeatureIndex&&(pl=Qt.iconFeatureIndex),Qt.iconBox){const xo=so=>this.collisionIndex.placeCollisionBox(so,ut,be,O,X,Dt,At,A,$e.predicate,hn,Gt&&jo?jo:void 0);ti&&ti.placeable&&Qt.verticalIconBox?(Zi=xo(Qt.verticalIconBox),rr=Zi.placeable):(Zi=xo(Qt.iconBox),rr=Zi.placeable),ei=ei&&Zi.offscreen}const oo=qe||$t.numHorizontalGlyphVertices===0&&$t.numVerticalGlyphVertices===0,Ou=et||$t.numIconVertices===0;oo||Ou?Ou?oo||(rr=rr&&qn):qn=rr&&qn:rr=qn=rr&&qn;const mc=rr&&Zi.placeable;if(qn&&ni.placeable&&this.collisionIndex.insertCollisionBox(ni.box,Ve,g.get("text-ignore-placement"),d.bucketInstanceId,ti&&ti.placeable&&Lo?Lo:Ei,$e.ID),mc&&this.collisionIndex.insertCollisionBox(Zi.box,ut,g.get("icon-ignore-placement"),d.bucketInstanceId,pl,$e.ID),Si&&qn&&this.collisionIndex.insertCollisionCircles(Si.circles,Ve,g.get("text-ignore-placement"),d.bucketInstanceId,Ei,$e.ID),h&&this.storeCollisionData(d.bucketInstanceId,Fn,Qt,ni,Zi,Si),$t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$t.crossTileID]=new Wn(qn||Ht,rr||Lt,ei||d.justReloaded),o[$t.crossTileID]=!0};if(tn){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const $t=d.getSortedSymbolIndexes(this.transform.angle);for(let Qt=$t.length-1;Qt>=0;--Qt){const Fn=$t[Qt];Rn(d.symbolInstances.get(Fn),d.collisionArrays[Fn],Fn)}}else for(let $t=e.symbolInstanceStart;$t<e.symbolInstanceEnd;$t++)Rn(d.symbolInstances.get($t),d.collisionArrays[$t],$t);if(h&&d.bucketInstanceId in this.collisionCircleArrays){const $t=this.collisionCircleArrays[d.bucketInstanceId];a.as($t.invProjMatrix,O),$t.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(e,o,h,d,g,I){if(h.textBox||h.iconBox){let A,O;this.collisionBoxArrays.has(e)?A=this.collisionBoxArrays.get(e):(A=new Map,this.collisionBoxArrays.set(e,A)),A.has(o)?O=A.get(o):(O={text:null,icon:null},A.set(o,O)),h.textBox&&(O.text=d.box),h.iconBox&&(O.icon=g.box)}if(I){let A=this.collisionCircleArrays[e];A===void 0&&(A=this.collisionCircleArrays[e]=new lr);for(let O=0;O<I.circles.length;O+=4)A.circles.push(I.circles[O+0]),A.circles.push(I.circles[O+1]),A.circles.push(I.circles[O+2]),A.circles.push(I.collisionDetected?1:0)}}markUsedJustification(e,o,h,d){let g;g=d===a.ah.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[a.at(o)];const I=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const A of I)A>=0&&(e.text.placedSymbolArray.get(A).crossTileID=g>=0&&A!==g?0:h.crossTileID)}markUsedOrientation(e,o,h){const d=o===a.ah.horizontal||o===a.ah.horizontalOnly?o:0,g=o===a.ah.vertical?o:0,I=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const A of I)e.text.placedSymbolArray.get(A).placedOrientation=d;h.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=g)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let h=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const d=o?o.symbolFadeChange(e):1,g=o?o.opacities:{},I=o?o.variableOffsets:{},A=o?o.placedOrientations:{};for(const O in this.placements){const X=this.placements[O],ae=g[O];ae?(this.opacities[O]=new xr(ae,d,X.text,X.icon),h=h||X.text!==ae.text.placed||X.icon!==ae.icon.placed):(this.opacities[O]=new xr(null,d,X.text,X.icon,X.skipFade),h=h||X.text||X.icon)}for(const O in g){const X=g[O];if(!this.opacities[O]){const ae=new xr(X,d,!1,!1);ae.isHidden()||(this.opacities[O]=ae,h=h||X.text.placed||X.icon.placed)}}for(const O in I)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=I[O]);for(const O in A)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=A[O]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:e)}updateLayerOpacities(e,o){const h={};for(const d of o){const g=d.getBucket(e);g&&d.latestFeatureIndex&&e.id===g.layerIds[0]&&this.updateBucketOpacities(g,d.tileID,h,d.collisionBoxArray)}}updateBucketOpacities(e,o,h,d){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const g=e.layers[0],I=g.layout,A=new xr(null,0,!1,!1,!0),O=I.get("text-allow-overlap"),X=I.get("icon-allow-overlap"),ae=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),le=I.get("text-rotation-alignment")==="map",be=I.get("text-pitch-alignment")==="map",Ae=I.get("icon-text-fit")!=="none",Fe=new xr(null,0,O&&(X||!e.hasIconData()||I.get("icon-optional")),X&&(O||!e.hasTextData()||I.get("text-optional")),!0);!e.collisionArrays&&d&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(d);const Ne=(qe,et,Ve)=>{for(let st=0;st<et/4;st++)qe.opacityVertexArray.emplaceBack(Ve);qe.hasVisibleVertices=qe.hasVisibleVertices||Ve!==Ri},$e=this.collisionBoxArrays.get(e.bucketInstanceId);for(let qe=0;qe<e.symbolInstances.length;qe++){const et=e.symbolInstances.get(qe),{numHorizontalGlyphVertices:Ve,numVerticalGlyphVertices:st,crossTileID:ut}=et;let mt=this.opacities[ut];h[ut]?mt=A:mt||(mt=Fe,this.opacities[ut]=mt),h[ut]=!0;const At=et.numIconVertices>0,Dt=this.placedOrientations[et.crossTileID],Gt=Dt===a.ah.vertical,tn=Dt===a.ah.horizontal||Dt===a.ah.horizontalOnly;if(Ve>0||st>0){const Lt=xi(mt.text);Ne(e.text,Ve,Gt?Ri:Lt),Ne(e.text,st,tn?Ri:Lt);const hn=mt.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(Qt=>{Qt>=0&&(e.text.placedSymbolArray.get(Qt).hidden=hn||Gt?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=hn||tn?1:0);const Rn=this.variableOffsets[et.crossTileID];Rn&&this.markUsedJustification(e,Rn.anchor,et,Dt);const $t=this.placedOrientations[et.crossTileID];$t&&(this.markUsedJustification(e,"left",et,$t),this.markUsedOrientation(e,$t,et))}if(At){const Lt=xi(mt.icon),hn=!(Ae&&et.verticalPlacedIconSymbolIndex&&Gt);et.placedIconSymbolIndex>=0&&(Ne(e.icon,et.numIconVertices,hn?Lt:Ri),e.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=mt.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(Ne(e.icon,et.numVerticalIconVertices,hn?Ri:Lt),e.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=mt.icon.isHidden())}const Ht=$e&&$e.has(qe)?$e.get(qe):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Lt=e.collisionArrays[qe];if(Lt){let hn=new a.P(0,0);if(Lt.textBox||Lt.verticalTextBox){let Rn=!0;if(ae){const $t=this.variableOffsets[ut];$t?(hn=ci($t.anchor,$t.width,$t.height,$t.textOffset,$t.textBoxScale),le&&hn._rotate(be?this.transform.angle:-this.transform.angle)):Rn=!1}if(Lt.textBox||Lt.verticalTextBox){let $t;Lt.textBox&&($t=Gt),Lt.verticalTextBox&&($t=tn),is(e.textCollisionBox.collisionVertexArray,mt.text.placed,!Rn||$t,Ht.text,hn.x,hn.y)}}if(Lt.iconBox||Lt.verticalIconBox){const Rn=!!(!tn&&Lt.verticalIconBox);let $t;Lt.iconBox&&($t=Rn),Lt.verticalIconBox&&($t=!Rn),is(e.iconCollisionBox.collisionVertexArray,mt.icon.placed,$t,Ht.icon,Ae?hn.x:0,Ae?hn.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const qe=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=qe.invProjMatrix,e.placementViewportMatrix=qe.viewportMatrix,e.collisionCircleArray=qe.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,o){const h=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*h>e}setStale(){this.stale=!0}}function is(y,e,o,h,d,g){h&&h.length!==0||(h=[0,0,0,0]);const I=h[0]-jn,A=h[1]-jn,O=h[2]-jn,X=h[3]-jn;y.emplaceBack(e?1:0,o?1:0,d||0,g||0,I,A),y.emplaceBack(e?1:0,o?1:0,d||0,g||0,O,A),y.emplaceBack(e?1:0,o?1:0,d||0,g||0,O,X),y.emplaceBack(e?1:0,o?1:0,d||0,g||0,I,X)}const Pn=Math.pow(2,25),Pl=Math.pow(2,24),Xn=Math.pow(2,17),Kr=Math.pow(2,16),_i=Math.pow(2,9),Rc=Math.pow(2,8),Qi=Math.pow(2,1);function xi(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const e=y.placed?1:0,o=Math.floor(127*y.opacity);return o*Pn+e*Pl+o*Xn+e*Kr+o*_i+e*Rc+o*Qi+e}const Ri=0;function Fi(){return{isOccluded:(y,e,o)=>!1,getPitchedTextCorrection:(y,e,o)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,e,o,h){throw new Error("Not implemented.")},translatePosition:(y,e,o,h)=>function(d,g,I,A,O=!1){if(!I[0]&&!I[1])return[0,0];const X=O?A==="map"?d.angle:0:A==="viewport"?-d.angle:0;if(X){const ae=Math.sin(X),le=Math.cos(X);I=[I[0]*le-I[1]*ae,I[0]*ae+I[1]*le]}return[O?I[0]:Un(g,I[0],d.zoom),O?I[1]:Un(g,I[1],d.zoom)]}(y,e,o,h),getCircleRadiusCorrection:y=>1}}class fr{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,o,h,d,g){const I=this._bucketParts;for(;this._currentTileIndex<e.length;)if(o.getBucketParts(I,d,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((A,O)=>A.sortKey-O.sortKey));this._currentPartIndex<I.length;)if(o.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,g())return!0;return!1}}class Qa{constructor(e,o,h,d,g,I,A,O){this.placement=new zi(e,Fi(),o,I,A,O),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(e,o,h){const d=C.now(),g=()=>!this._forceFullPlacement&&C.now()-d>2;for(;this._currentPlacementIndex>=0;){const I=o[e[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=A)&&(!I.maxzoom||I.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new fr(I)),this._inProgressLayer.continuePlacement(h[I.source],this.placement,this._showCollisionBoxes,I,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Po=512/a.X/2;class $r{constructor(e,o,h){this.tileID=e,this.bucketInstanceId=h,this._symbolsByKey={};const d=new Map;for(let g=0;g<o.length;g++){const I=o.get(g),A=I.key,O=d.get(A);O?O.push(I):d.set(A,[I])}for(const[g,I]of d){const A={positions:I.map(O=>({x:Math.floor(O.anchorX*Po),y:Math.floor(O.anchorY*Po)})),crossTileIDs:I.map(O=>O.crossTileID)};if(A.positions.length>128){const O=new a.av(A.positions.length,16,Uint16Array);for(const{x:X,y:ae}of A.positions)O.add(X,ae);O.finish(),delete A.positions,A.index=O}this._symbolsByKey[g]=A}}getScaledCoordinates(e,o){const{x:h,y:d,z:g}=this.tileID.canonical,{x:I,y:A,z:O}=o.canonical,X=Po/Math.pow(2,O-g),ae=(A*a.X+e.anchorY)*X,le=d*a.X*Po;return{x:Math.floor((I*a.X+e.anchorX)*X-h*a.X*Po),y:Math.floor(ae-le)}}findMatches(e,o,h){const d=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let g=0;g<e.length;g++){const I=e.get(g);if(I.crossTileID)continue;const A=this._symbolsByKey[I.key];if(!A)continue;const O=this.getScaledCoordinates(I,o);if(A.index){const X=A.index.range(O.x-d,O.y-d,O.x+d,O.y+d).sort();for(const ae of X){const le=A.crossTileIDs[ae];if(!h[le]){h[le]=!0,I.crossTileID=le;break}}}else if(A.positions)for(let X=0;X<A.positions.length;X++){const ae=A.positions[X],le=A.crossTileIDs[X];if(Math.abs(ae.x-O.x)<=d&&Math.abs(ae.y-O.y)<=d&&!h[le]){h[le]=!0,I.crossTileID=le;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class Zs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Br{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const o=Math.round((e-this.lng)/360);if(o!==0)for(const h in this.indexes){const d=this.indexes[h],g={};for(const I in d){const A=d[I];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+o),g[A.tileID.key]=A}this.indexes[h]=g}this.lng=e}addBucket(e,o,h){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let g=0;g<o.symbolInstances.length;g++)o.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const d=this.usedCrossTileIDs[e.overscaledZ];for(const g in this.indexes){const I=this.indexes[g];if(Number(g)>e.overscaledZ)for(const A in I){const O=I[A];O.tileID.isChildOf(e)&&O.findMatches(o.symbolInstances,e,d)}else{const A=I[e.scaledTo(Number(g)).key];A&&A.findMatches(o.symbolInstances,e,d)}}for(let g=0;g<o.symbolInstances.length;g++){const I=o.symbolInstances.get(g);I.crossTileID||(I.crossTileID=h.generate(),d[I.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new $r(e,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(e,o){for(const h of o.getCrossTileIDsLists())for(const d of h)delete this.usedCrossTileIDs[e][d]}removeStaleBuckets(e){let o=!1;for(const h in this.indexes){const d=this.indexes[h];for(const g in d)e[d[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,d[g]),delete d[g],o=!0)}return o}}class Ws{constructor(){this.layerIndexes={},this.crossTileIDs=new Zs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,o,h){let d=this.layerIndexes[e.id];d===void 0&&(d=this.layerIndexes[e.id]=new Br);let g=!1;const I={};d.handleWrapJump(h);for(const A of o){const O=A.getBucket(e);O&&e.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(A.tileID,O,this.crossTileIDs)&&(g=!0),I[O.bucketInstanceId]=!0)}return d.removeStaleBuckets(I)&&(g=!0),g}pruneUnusedLayers(e){const o={};e.forEach(h=>{o[h]=!0});for(const h in this.layerIndexes)o[h]||delete this.layerIndexes[h]}}const $i=(y,e)=>a.t(y,e&&e.filter(o=>o.identifier!=="source.canvas")),Fc=a.aw();class Al extends a.E{constructor(e,o={}){super(),this._rtlPluginLoaded=()=>{for(const h in this.sourceCaches){const d=this.sourceCaches[h].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[h].reload()}},this.map=e,this.dispatcher=new Wt(Pt(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,d)=>this.getGlyphs(h,d)),this.dispatcher.registerMessageHandler("GI",(h,d)=>this.getImages(h,d)),this.imageManager=new W,this.imageManager.setEventedParent(this),this.glyphManager=new te(e._requestManager,o.localIdeographFontFamily),this.lineAtlas=new Oe(256,512),this.crossTileSymbolIndex=new Ws,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),Je().on(z,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const d=this.sourceCaches[h.sourceId];if(!d)return;const g=d.getSource();if(g&&g.vectorLayerIds)for(const I in this._layers){const A=this._layers[I];A.source===g.id&&this._validateLayer(A)}})}loadURL(e,o={},h){this.fire(new a.k("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const d=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const g=this._loadStyleRequest;a.h(d,this._loadStyleRequest).then(I=>{this._loadStyleRequest=null,this._load(I.data,o,h)}).catch(I=>{this._loadStyleRequest=null,I&&!g.signal.aborted&&this.fire(new a.j(I))})}loadJSON(e,o={},h){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(e,o,h)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(Fc,{validate:!1})}_load(e,o,h){var d;const g=o.transformStyle?o.transformStyle(h,e):e;if(!o.validate||!$i(this,a.u(g))){this._loaded=!0,this.stylesheet=g;for(const I in g.sources)this.addSource(I,g.sources[I],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new ie(this.stylesheet.light),this.sky=new De(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const e=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of e){const h=a.aA(o);h.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=h}}_loadSprite(e,o=!1,h=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(g,I,A,O){return a._(this,void 0,void 0,function*(){const X=U(g),ae=A>1?"@2x":"",le={},be={};for(const{id:Ae,url:Fe}of X){const Ne=I.transformRequest(de(Fe,ae,".json"),"SpriteJSON");le[Ae]=a.h(Ne,O);const $e=I.transformRequest(de(Fe,ae,".png"),"SpriteImage");be[Ae]=_e.getImage($e,O)}return yield Promise.all([...Object.values(le),...Object.values(be)]),function(Ae,Fe){return a._(this,void 0,void 0,function*(){const Ne={};for(const $e in Ae){Ne[$e]={};const qe=C.getImageCanvasContext((yield Fe[$e]).data),et=(yield Ae[$e]).data;for(const Ve in et){const{width:st,height:ut,x:mt,y:At,sdf:Dt,pixelRatio:Gt,stretchX:tn,stretchY:Ht,content:Lt,textFitWidth:hn,textFitHeight:Rn}=et[Ve];Ne[$e][Ve]={data:null,pixelRatio:Gt,sdf:Dt,stretchX:tn,stretchY:Ht,content:Lt,textFitWidth:hn,textFitHeight:Rn,spriteData:{width:st,height:ut,x:mt,y:At,context:qe}}}}return Ne})}(le,be)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(g=>{if(this._spriteRequest=null,g)for(const I in g){this._spritesImagesIds[I]=[];const A=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(O=>!(O in g)):[];for(const O of A)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in g[I]){const X=I==="default"?O:`${I}:${O}`;this._spritesImagesIds[I].push(X),X in this.imageManager.images?this.imageManager.updateImage(X,g[I][O],!1):this.imageManager.addImage(X,g[I][O]),o&&(this._changedImages[X]=!0)}}}).catch(g=>{this._spriteRequest=null,d=g,this.fire(new a.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),h&&h(d)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(e){const o=this.sourceCaches[e.source];if(!o)return;const h=e.sourceLayer;if(!h)return;const d=o.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(h)===-1)&&this.fire(new a.j(new Error(`Source layer "${h}" does not exist on source "${d.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,o=!1){const h=this._serializedAllLayers();if(!e||e.length===0)return Object.values(o?a.aB(h):h);const d=[];for(const g of e)if(h[g]){const I=o?a.aB(h[g]):h[g];d.push(I)}return d}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const o=Object.keys(this._layers);for(const h of o){const d=this._layers[h];d.type!=="custom"&&(e[h]=d.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const o=this._changed;if(o){const d=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);(d.length||g.length)&&this._updateWorkerLayers(d,g);for(const I in this._updatedSources){const A=this._updatedSources[I];if(A==="reload")this._reloadSource(I);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const h={};for(const d in this.sourceCaches){const g=this.sourceCaches[d];h[d]=g.used,g.used=!1}for(const d of this._order){const g=this._layers[d];g.recalculate(e,this._availableImages),!g.isHidden(e.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(const d in h){const g=this.sourceCaches[d];!!h[d]!=!!g.used&&g.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,o&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,o={}){var h;this._checkLoaded();const d=this.serialize();if(e=o.transformStyle?o.transformStyle(d,e):e,((h=o.validate)===null||h===void 0||h)&&$i(this,a.u(e)))return!1;(e=a.aB(e)).layers=a.az(e.layers);const g=a.aC(d,e),I=this._getOperationsToPerform(g);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const A of I.operations)A();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const o=[],h=[];for(const d of e)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":o.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":o.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":o.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":o.push(()=>{});break;default:h.push(d.command)}return{operations:o,unimplemented:h}}addImage(e,o){if(this.getImage(e))return this.fire(new a.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,o),this._afterImageUpdated(e)}updateImage(e,o){this.imageManager.updateImage(e,o)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new a.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,o,h={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(a.u.source,`sources.${e}`,o,null,h))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const d=this.sourceCaches[e]=new Bt(e,o,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:e})),d.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===e)return this.fire(new a.j(new Error(`Source "${e}" cannot be removed while layer "${h}" is using it.`)));const o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,o){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const h=this.sourceCaches[e].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(o),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,o,h={}){this._checkLoaded();const d=e.id;if(this.getLayer(d))return void this.fire(new a.j(new Error(`Layer "${d}" already exists on this map.`)));let g;if(e.type==="custom"){if($i(this,a.aD(e)))return;g=a.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(d,e.source),e=a.aB(e),e=a.e(e,{source:d})),this._validate(a.u.layer,`layers.${d}`,e,{arrayIndex:-1},h))return;g=a.aA(e),this._validateLayer(g),g.setEventedParent(this,{layer:{id:d}})}const I=o?this._order.indexOf(o):this._order.length;if(o&&I===-1)this.fire(new a.j(new Error(`Cannot add layer "${d}" before non-existing layer "${o}".`)));else{if(this._order.splice(I,0,d),this._layerOrderChanged=!0,this._layers[d]=g,this._removedLayers[d]&&g.source&&g.type!=="custom"){const A=this._removedLayers[d];delete this._removedLayers[d],A.type!==g.type?this._updatedSources[g.source]="clear":(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause())}this._updateLayer(g),g.onAdd&&g.onAdd(this.map)}}moveLayer(e,o){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new a.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===o)return;const h=this._order.indexOf(e);this._order.splice(h,1);const d=o?this._order.indexOf(o):this._order.length;o&&d===-1?this.fire(new a.j(new Error(`Cannot move layer "${e}" before non-existing layer "${o}".`))):(this._order.splice(d,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const o=this._layers[e];if(!o)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${e}".`)));o.setEventedParent(null);const h=this._order.indexOf(e);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=o,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],o.onRemove&&o.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,o,h){this._checkLoaded();const d=this.getLayer(e);d?d.minzoom===o&&d.maxzoom===h||(o!=null&&(d.minzoom=o),h!=null&&(d.maxzoom=h),this._updateLayer(d)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,o,h={}){this._checkLoaded();const d=this.getLayer(e);if(d){if(!a.aE(d.filter,o))return o==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(a.u.filter,`layers.${d.id}.filter`,o,null,h)||(d.filter=a.aB(o),this._updateLayer(d)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return a.aB(this.getLayer(e).filter)}setLayoutProperty(e,o,h,d={}){this._checkLoaded();const g=this.getLayer(e);g?a.aE(g.getLayoutProperty(o),h)||(g.setLayoutProperty(o,h,d),this._updateLayer(g)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,o){const h=this.getLayer(e);if(h)return h.getLayoutProperty(o);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,o,h,d={}){this._checkLoaded();const g=this.getLayer(e);g?a.aE(g.getPaintProperty(o),h)||(g.setPaintProperty(o,h,d)&&this._updateLayer(g),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,o){return this.getLayer(e).getPaintProperty(o)}setFeatureState(e,o){this._checkLoaded();const h=e.source,d=e.sourceLayer,g=this.sourceCaches[h];if(g===void 0)return void this.fire(new a.j(new Error(`The source '${h}' does not exist in the map's style.`)));const I=g.getSource().type;I==="geojson"&&d?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||d?(e.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),g.setFeatureState(d,e.id,o)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,o){this._checkLoaded();const h=e.source,d=this.sourceCaches[h];if(d===void 0)return void this.fire(new a.j(new Error(`The source '${h}' does not exist in the map's style.`)));const g=d.getSource().type,I=g==="vector"?e.sourceLayer:void 0;g!=="vector"||I?o&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(I,e.id,o):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const o=e.source,h=e.sourceLayer,d=this.sourceCaches[o];if(d!==void 0)return d.getSource().type!=="vector"||h?(e.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(h,e.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=a.aF(this.sourceCaches,g=>g.serialize()),o=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,d=this.stylesheet;return a.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:e,layers:o,terrain:h},g=>g!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const o=I=>this._layers[I].type==="fill-extrusion",h={},d=[];for(let I=this._order.length-1;I>=0;I--){const A=this._order[I];if(o(A)){h[A]=I;for(const O of e){const X=O[A];if(X)for(const ae of X)d.push(ae)}}}d.sort((I,A)=>A.intersectionZ-I.intersectionZ);const g=[];for(let I=this._order.length-1;I>=0;I--){const A=this._order[I];if(o(A))for(let O=d.length-1;O>=0;O--){const X=d[O].feature;if(h[X.layer.id]<I)break;g.push(X),d.pop()}else for(const O of e){const X=O[A];if(X)for(const ae of X)g.push(ae.feature)}}return g}queryRenderedFeatures(e,o,h){o&&o.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",o.filter,null,o);const d={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const A of o.layers){const O=this._layers[A];if(!O)return this.fire(new a.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];d[O.source]=!0}}const g=[];o.availableImages=this._availableImages;const I=this._serializedAllLayers();for(const A in this.sourceCaches)o.layers&&!d[A]||g.push(Yt(this.sourceCaches[A],this._layers,I,e,o,h));return this.placement&&g.push(function(A,O,X,ae,le,be,Ae){const Fe={},Ne=be.queryRenderedSymbols(ae),$e=[];for(const qe of Object.keys(Ne).map(Number))$e.push(Ae[qe]);$e.sort(un);for(const qe of $e){const et=qe.featureIndex.lookupSymbolFeatures(Ne[qe.bucketInstanceId],O,qe.bucketIndex,qe.sourceLayerIndex,le.filter,le.layers,le.availableImages,A);for(const Ve in et){const st=Fe[Ve]=Fe[Ve]||[],ut=et[Ve];ut.sort((mt,At)=>{const Dt=qe.featureSortOrder;if(Dt){const Gt=Dt.indexOf(mt.featureIndex);return Dt.indexOf(At.featureIndex)-Gt}return At.featureIndex-mt.featureIndex});for(const mt of ut)st.push(mt)}}for(const qe in Fe)Fe[qe].forEach(et=>{const Ve=et.feature,st=X[A[qe].source].getFeatureState(Ve.layer["source-layer"],Ve.id);Ve.source=Ve.layer.source,Ve.layer["source-layer"]&&(Ve.sourceLayer=Ve.layer["source-layer"]),Ve.state=st});return Fe}(this._layers,I,this.sourceCaches,e,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)}querySourceFeatures(e,o){o&&o.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",o.filter,null,o);const h=this.sourceCaches[e];return h?function(d,g){const I=d.getRenderableIds().map(X=>d.getTileByID(X)),A=[],O={};for(let X=0;X<I.length;X++){const ae=I[X],le=ae.tileID.canonical.key;O[le]||(O[le]=!0,ae.querySourceFeatures(A,g))}return A}(h,o):[]}getLight(){return this.light.getLight()}setLight(e,o={}){this._checkLoaded();const h=this.light.getLight();let d=!1;for(const I in e)if(!a.aE(e[I],h[I])){d=!0;break}if(!d)return;const g={now:C.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,o),this.light.updateTransitions(g)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,o={}){const h=this.getSky();let d=!1;if(!e&&!h)return;if(e&&!h)d=!0;else if(!e&&h)d=!0;else for(const I in e)if(!a.aE(e[I],h[I])){d=!0;break}if(!d)return;const g={now:C.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,o),this.sky.updateTransitions(g)}_validate(e,o,h,d,g={}){return(!g||g.validate!==!1)&&$i(this,e.call(a.u,a.e({key:o,style:this.serialize(),value:h,styleSpec:a.v},d)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Je().off(z,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const h=this.sourceCaches[o];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const o in this.sourceCaches)this.sourceCaches[o].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,o,h,d,g=!1){let I=!1,A=!1;const O={};for(const X of this._order){const ae=this._layers[X];if(ae.type!=="symbol")continue;if(!O[ae.source]){const be=this.sourceCaches[ae.source];O[ae.source]=be.getRenderableIds(!0).map(Ae=>be.getTileByID(Ae)).sort((Ae,Fe)=>Fe.tileID.overscaledZ-Ae.tileID.overscaledZ||(Ae.tileID.isLessThan(Fe.tileID)?-1:1))}const le=this.crossTileSymbolIndex.addLayer(ae,O[ae.source],e.center.lng);I=I||le}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((g=g||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(C.now(),e.zoom))&&(this.pauseablePlacement=new Qa(e,this.map.terrain,this._order,g,o,h,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(C.now()),A=!0),I&&this.pauseablePlacement.placement.setStale()),A||I)for(const X of this._order){const ae=this._layers[X];ae.type==="symbol"&&this.placement.updateLayerOpacities(ae,O[ae.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(C.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,o){return a._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,o.icons),h})}getGlyphs(e,o){return a._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(o.stacks),d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,o={}){this._checkLoaded(),e&&this._validate(a.u.glyphs,"glyphs",e,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,o,h={},d){this._checkLoaded();const g=[{id:e,url:o}],I=[...U(this.stylesheet.sprite),...g];this._validate(a.u.sprite,"sprite",I,null,h)||(this.stylesheet.sprite=I,this._loadSprite(g,!0,d))}removeSprite(e){this._checkLoaded();const o=U(this.stylesheet.sprite);if(o.find(h=>h.id===e)){if(this._spritesImagesIds[e])for(const h of this._spritesImagesIds[e])this.imageManager.removeImage(h),this._changedImages[h]=!0;o.splice(o.findIndex(h=>h.id===e),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return U(this.stylesheet.sprite)}setSprite(e,o={},h){this._checkLoaded(),e&&this._validate(a.u.sprite,"sprite",e,null,o)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,h):(this._unloadSprite(),h&&h(null)))}}var os=a.Y([{name:"a_pos",type:"Int16",components:2}]);const co={prelude:nr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:nr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:nr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:nr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:nr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:nr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:nr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:nr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:nr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:nr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:nr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:nr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:nr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:nr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:nr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:nr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:nr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:nr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:nr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:nr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:nr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:nr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:nr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:nr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:nr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:nr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:nr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:nr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:nr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function nr(y,e){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=e.match(/attribute ([\w]+) ([\w]+)/g),d=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=g?g.concat(d):d,A={};return{fragmentSource:y=y.replace(o,(O,X,ae,le,be)=>(A[be]=!0,X==="define"?`
#ifndef HAS_UNIFORM_u_${be}
varying ${ae} ${le} ${be};
#else
uniform ${ae} ${le} u_${be};
#endif
`:`
#ifdef HAS_UNIFORM_u_${be}
    ${ae} ${le} ${be} = u_${be};
#endif
`)),vertexSource:e=e.replace(o,(O,X,ae,le,be)=>{const Ae=le==="float"?"vec2":"vec4",Fe=be.match(/color/)?"color":Ae;return A[be]?X==="define"?`
#ifndef HAS_UNIFORM_u_${be}
uniform lowp float u_${be}_t;
attribute ${ae} ${Ae} a_${be};
varying ${ae} ${le} ${be};
#else
uniform ${ae} ${le} u_${be};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${be}
    ${be} = a_${be};
#else
    ${ae} ${le} ${be} = u_${be};
#endif
`:`
#ifndef HAS_UNIFORM_u_${be}
    ${be} = unpack_mix_${Fe}(a_${be}, u_${be}_t);
#else
    ${ae} ${le} ${be} = u_${be};
#endif
`:X==="define"?`
#ifndef HAS_UNIFORM_u_${be}
uniform lowp float u_${be}_t;
attribute ${ae} ${Ae} a_${be};
#else
uniform ${ae} ${le} u_${be};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${be}
    ${ae} ${le} ${be} = a_${be};
#else
    ${ae} ${le} ${be} = u_${be};
#endif
`:`
#ifndef HAS_UNIFORM_u_${be}
    ${ae} ${le} ${be} = unpack_mix_${Fe}(a_${be}, u_${be}_t);
#else
    ${ae} ${le} ${be} = u_${be};
#endif
`}),staticAttributes:h,staticUniforms:I}}class qs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,o,h,d,g,I,A,O,X){this.context=e;let ae=this.boundPaintVertexBuffers.length!==d.length;for(let le=0;!ae&&le<d.length;le++)this.boundPaintVertexBuffers[le]!==d[le]&&(ae=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==h||ae||this.boundIndexBuffer!==g||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==X?this.freshBind(o,h,d,g,I,A,O,X):(e.bindVertexArray.set(this.vao),A&&A.bind(),g&&g.dynamicDraw&&g.bind(),O&&O.bind(),X&&X.bind())}freshBind(e,o,h,d,g,I,A,O){const X=e.numAttributes,ae=this.context,le=ae.gl;this.vao&&this.destroy(),this.vao=ae.createVertexArray(),ae.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=d,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=O,o.enableAttributes(le,e);for(const be of h)be.enableAttributes(le,e);I&&I.enableAttributes(le,e),A&&A.enableAttributes(le,e),O&&O.enableAttributes(le,e),o.bind(),o.setVertexAttribPointers(le,e,g);for(const be of h)be.bind(),be.setVertexAttribPointers(le,e,g);I&&(I.bind(),I.setVertexAttribPointers(le,e,g)),d&&d.bind(),A&&(A.bind(),A.setVertexAttribPointers(le,e,g)),O&&(O.bind(),O.setVertexAttribPointers(le,e,g)),ae.currentNumAttributes=X}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const eo=(y,e,o,h,d)=>({u_matrix:y,u_texture:0,u_ele_delta:e,u_fog_matrix:o,u_fog_color:h?h.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:h?h.calculateFogBlendOpacity(d):0,u_horizon_color:h?h.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1});function ks(y){const e=[];for(let o=0;o<y.length;o++){if(y[o]===null)continue;const h=y[o].split(" ");e.push(h.pop())}return e}class ur{constructor(e,o,h,d,g,I){const A=e.gl;this.program=A.createProgram();const O=ks(o.staticAttributes),X=h?h.getBinderAttributes():[],ae=O.concat(X),le=co.prelude.staticUniforms?ks(co.prelude.staticUniforms):[],be=o.staticUniforms?ks(o.staticUniforms):[],Ae=h?h.getBinderUniforms():[],Fe=le.concat(be).concat(Ae),Ne=[];for(const mt of Fe)Ne.indexOf(mt)<0&&Ne.push(mt);const $e=h?h.defines():[];g&&$e.push("#define OVERDRAW_INSPECTOR;"),I&&$e.push("#define TERRAIN3D;");const qe=$e.concat(co.prelude.fragmentSource,o.fragmentSource).join(`
`),et=$e.concat(co.prelude.vertexSource,o.vertexSource).join(`
`),Ve=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ve,qe),A.compileShader(Ve),!A.getShaderParameter(Ve,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Ve)}`);A.attachShader(this.program,Ve);const st=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(st,et),A.compileShader(st),!A.getShaderParameter(st,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(st)}`);A.attachShader(this.program,st),this.attributes={};const ut={};this.numAttributes=ae.length;for(let mt=0;mt<this.numAttributes;mt++)ae[mt]&&(A.bindAttribLocation(this.program,mt,ae[mt]),this.attributes[ae[mt]]=mt);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(st),A.deleteShader(Ve);for(let mt=0;mt<Ne.length;mt++){const At=Ne[mt];if(At&&!ut[At]){const Dt=A.getUniformLocation(this.program,At);Dt&&(ut[At]=Dt)}}this.fixedUniforms=d(e,ut),this.terrainUniforms=((mt,At)=>({u_depth:new a.aH(mt,At.u_depth),u_terrain:new a.aH(mt,At.u_terrain),u_terrain_dim:new a.aI(mt,At.u_terrain_dim),u_terrain_matrix:new a.aJ(mt,At.u_terrain_matrix),u_terrain_unpack:new a.aK(mt,At.u_terrain_unpack),u_terrain_exaggeration:new a.aI(mt,At.u_terrain_exaggeration)}))(e,ut),this.binderUniforms=h?h.getUniforms(e,ut):[]}draw(e,o,h,d,g,I,A,O,X,ae,le,be,Ae,Fe,Ne,$e,qe,et){const Ve=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(h),e.setStencilMode(d),e.setColorMode(g),e.setCullFace(I),O){e.activeTexture.set(Ve.TEXTURE2),Ve.bindTexture(Ve.TEXTURE_2D,O.depthTexture),e.activeTexture.set(Ve.TEXTURE3),Ve.bindTexture(Ve.TEXTURE_2D,O.texture);for(const ut in this.terrainUniforms)this.terrainUniforms[ut].set(O[ut])}for(const ut in this.fixedUniforms)this.fixedUniforms[ut].set(A[ut]);Ne&&Ne.setUniforms(e,this.binderUniforms,Ae,{zoom:Fe});let st=0;switch(o){case Ve.LINES:st=2;break;case Ve.TRIANGLES:st=3;break;case Ve.LINE_STRIP:st=1}for(const ut of be.get()){const mt=ut.vaos||(ut.vaos={});(mt[X]||(mt[X]=new qs)).bind(e,this,ae,Ne?Ne.getPaintVertexBuffers():[],le,ut.vertexOffset,$e,qe,et),Ve.drawElements(o,ut.primitiveLength*st,Ve.UNSIGNED_SHORT,ut.primitiveOffset*st*2)}}}function el(y,e,o){const h=1/Un(o,1,e.transform.tileZoom),d=Math.pow(2,o.tileID.overscaledZ),g=o.tileSize*Math.pow(2,e.transform.tileZoom)/d,I=g*(o.tileID.canonical.x+o.tileID.wrap*d),A=g*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[h,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[I>>16,A>>16],u_pixel_coord_lower:[65535&I,65535&A]}}const Ma=(y,e,o,h)=>{const d=e.style.light,g=d.properties.get("position"),I=[g.x,g.y,g.z],A=function(){var X=new a.A(9);return a.A!=Float32Array&&(X[1]=0,X[2]=0,X[3]=0,X[5]=0,X[6]=0,X[7]=0),X[0]=1,X[4]=1,X[8]=1,X}();d.properties.get("anchor")==="viewport"&&function(X,ae){var le=Math.sin(ae),be=Math.cos(ae);X[0]=be,X[1]=le,X[2]=0,X[3]=-le,X[4]=be,X[5]=0,X[6]=0,X[7]=0,X[8]=1}(A,-e.transform.angle),function(X,ae,le){var be=ae[0],Ae=ae[1],Fe=ae[2];X[0]=be*le[0]+Ae*le[3]+Fe*le[6],X[1]=be*le[1]+Ae*le[4]+Fe*le[7],X[2]=be*le[2]+Ae*le[5]+Fe*le[8]}(I,I,A);const O=d.properties.get("color");return{u_matrix:y,u_lightpos:I,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+o,u_opacity:h}},ka=(y,e,o,h,d,g,I)=>a.e(Ma(y,e,o,h),el(g,e,I),{u_height_factor:-Math.pow(2,d.overscaledZ)/I.tileSize/8}),zs=y=>({u_matrix:y}),tl=(y,e,o,h)=>a.e(zs(y),el(o,e,h)),yu=(y,e)=>({u_matrix:y,u_world:e}),Xs=(y,e,o,h,d)=>a.e(tl(y,e,o,h),{u_world:d}),Ml=(y,e,o,h)=>{const d=y.transform;let g,I;if(h.paint.get("circle-pitch-alignment")==="map"){const A=Un(o,1,d.zoom);g=!0,I=[A,A]}else g=!1,I=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(e.posMatrix,o,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:I}},oi=(y,e,o)=>({u_matrix:y,u_inv_matrix:e,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}),ho=(y,e,o=1)=>({u_matrix:y,u_color:e,u_overlay:0,u_overlay_scale:o}),Gr=y=>({u_matrix:y}),hi=(y,e,o,h)=>({u_matrix:y,u_extrude_scale:Un(e,1,o),u_intensity:h}),Rs=(y,e,o,h)=>{const d=a.H();a.aP(d,0,y.width,y.height,0,0,1);const g=y.context.gl;return{u_matrix:d,u_world:[g.drawingBufferWidth,g.drawingBufferHeight],u_image:o,u_color_ramp:h,u_opacity:e.paint.get("heatmap-opacity")}};function fo(y,e){const o=Math.pow(2,e.canonical.z),h=e.canonical.y;return[new a.Z(0,h/o).toLngLat().lat,new a.Z(0,(h+1)/o).toLngLat().lat]}const kl=(y,e,o,h)=>{const d=y.transform;return{u_matrix:nl(y,e,o,h),u_ratio:1/Un(e,1,d.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},vu=(y,e,o,h,d)=>a.e(kl(y,e,o,d),{u_image:0,u_image_height:h}),Uo=(y,e,o,h,d)=>{const g=y.transform,I=xu(e,g);return{u_matrix:nl(y,e,o,d),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Un(e,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[I,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},_u=(y,e,o,h,d,g)=>{const I=y.lineAtlas,A=xu(e,y.transform),O=o.layout.get("line-cap")==="round",X=I.getDash(h.from,O),ae=I.getDash(h.to,O),le=X.width*d.fromScale,be=ae.width*d.toScale;return a.e(kl(y,e,o,g),{u_patternscale_a:[A/le,-X.height/2],u_patternscale_b:[A/be,-ae.height/2],u_sdfgamma:I.width/(256*Math.min(le,be)*y.pixelRatio)/2,u_image:0,u_tex_y_a:X.y,u_tex_y_b:ae.y,u_mix:d.t})};function xu(y,e){return 1/Un(y,1,e.tileZoom)}function nl(y,e,o,h){return y.translatePosMatrix(h?h.posMatrix:e.tileID.posMatrix,e,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const rc=(y,e,o,h,d)=>{return{u_matrix:y,u_tl_parent:e,u_scale_parent:o,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(I=d.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(g=d.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:Oc(d.paint.get("raster-hue-rotate"))};var g,I};function Oc(y){y*=Math.PI/180;const e=Math.sin(y),o=Math.cos(y);return[(2*o+1)/3,(-Math.sqrt(3)*e-o+1)/3,(Math.sqrt(3)*e-o+1)/3]}const Ks=(y,e,o,h,d,g,I,A,O,X,ae,le,be,Ae)=>{const Fe=I.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:Fe.cameraToCenterDistance,u_pitch:Fe.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:Fe.width/Fe.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:O,u_coord_matrix:X,u_is_text:+le,u_pitch_with_map:+h,u_is_along_line:d,u_is_variable_anchor:g,u_texsize:be,u_texture:0,u_translation:ae,u_pitched_scale:Ae}},ss=(y,e,o,h,d,g,I,A,O,X,ae,le,be,Ae,Fe)=>{const Ne=I.transform;return a.e(Ks(y,e,o,h,d,g,I,A,O,X,ae,le,be,Fe),{u_gamma_scale:h?Math.cos(Ne._pitch)*Ne.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:+Ae})},as=(y,e,o,h,d,g,I,A,O,X,ae,le,be,Ae)=>a.e(ss(y,e,o,h,d,g,I,A,O,X,ae,!0,le,!0,Ae),{u_texsize_icon:be,u_texture_icon:1}),Ys=(y,e,o)=>({u_matrix:y,u_opacity:e,u_color:o}),wu=(y,e,o,h,d,g)=>a.e(function(I,A,O,X){const ae=O.imageManager.getPattern(I.from.toString()),le=O.imageManager.getPattern(I.to.toString()),{width:be,height:Ae}=O.imageManager.getPixelSize(),Fe=Math.pow(2,X.tileID.overscaledZ),Ne=X.tileSize*Math.pow(2,O.transform.tileZoom)/Fe,$e=Ne*(X.tileID.canonical.x+X.tileID.wrap*Fe),qe=Ne*X.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:le.tl,u_pattern_br_b:le.br,u_texsize:[be,Ae],u_mix:A.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:le.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Un(X,1,O.transform.tileZoom),u_pixel_coord_upper:[$e>>16,qe>>16],u_pixel_coord_lower:[65535&$e,65535&qe]}}(h,g,o,d),{u_matrix:y,u_opacity:e}),zl={fillExtrusion:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_lightpos:new a.aN(y,e.u_lightpos),u_lightintensity:new a.aI(y,e.u_lightintensity),u_lightcolor:new a.aN(y,e.u_lightcolor),u_vertical_gradient:new a.aI(y,e.u_vertical_gradient),u_opacity:new a.aI(y,e.u_opacity)}),fillExtrusionPattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_lightpos:new a.aN(y,e.u_lightpos),u_lightintensity:new a.aI(y,e.u_lightintensity),u_lightcolor:new a.aN(y,e.u_lightcolor),u_vertical_gradient:new a.aI(y,e.u_vertical_gradient),u_height_factor:new a.aI(y,e.u_height_factor),u_image:new a.aH(y,e.u_image),u_texsize:new a.aO(y,e.u_texsize),u_pixel_coord_upper:new a.aO(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(y,e.u_pixel_coord_lower),u_scale:new a.aN(y,e.u_scale),u_fade:new a.aI(y,e.u_fade),u_opacity:new a.aI(y,e.u_opacity)}),fill:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix)}),fillPattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_image:new a.aH(y,e.u_image),u_texsize:new a.aO(y,e.u_texsize),u_pixel_coord_upper:new a.aO(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(y,e.u_pixel_coord_lower),u_scale:new a.aN(y,e.u_scale),u_fade:new a.aI(y,e.u_fade)}),fillOutline:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_world:new a.aO(y,e.u_world)}),fillOutlinePattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_world:new a.aO(y,e.u_world),u_image:new a.aH(y,e.u_image),u_texsize:new a.aO(y,e.u_texsize),u_pixel_coord_upper:new a.aO(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(y,e.u_pixel_coord_lower),u_scale:new a.aN(y,e.u_scale),u_fade:new a.aI(y,e.u_fade)}),circle:(y,e)=>({u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_scale_with_map:new a.aH(y,e.u_scale_with_map),u_pitch_with_map:new a.aH(y,e.u_pitch_with_map),u_extrude_scale:new a.aO(y,e.u_extrude_scale),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_matrix:new a.aJ(y,e.u_matrix)}),collisionBox:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_pixel_extrude_scale:new a.aO(y,e.u_pixel_extrude_scale)}),collisionCircle:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_inv_matrix:new a.aJ(y,e.u_inv_matrix),u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_viewport_size:new a.aO(y,e.u_viewport_size)}),debug:(y,e)=>({u_color:new a.aL(y,e.u_color),u_matrix:new a.aJ(y,e.u_matrix),u_overlay:new a.aH(y,e.u_overlay),u_overlay_scale:new a.aI(y,e.u_overlay_scale)}),clippingMask:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix)}),heatmap:(y,e)=>({u_extrude_scale:new a.aI(y,e.u_extrude_scale),u_intensity:new a.aI(y,e.u_intensity),u_matrix:new a.aJ(y,e.u_matrix)}),heatmapTexture:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_world:new a.aO(y,e.u_world),u_image:new a.aH(y,e.u_image),u_color_ramp:new a.aH(y,e.u_color_ramp),u_opacity:new a.aI(y,e.u_opacity)}),hillshade:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_image:new a.aH(y,e.u_image),u_latrange:new a.aO(y,e.u_latrange),u_light:new a.aO(y,e.u_light),u_shadow:new a.aL(y,e.u_shadow),u_highlight:new a.aL(y,e.u_highlight),u_accent:new a.aL(y,e.u_accent)}),hillshadePrepare:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_image:new a.aH(y,e.u_image),u_dimension:new a.aO(y,e.u_dimension),u_zoom:new a.aI(y,e.u_zoom),u_unpack:new a.aK(y,e.u_unpack)}),line:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_ratio:new a.aI(y,e.u_ratio),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_units_to_pixels:new a.aO(y,e.u_units_to_pixels)}),lineGradient:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_ratio:new a.aI(y,e.u_ratio),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_units_to_pixels:new a.aO(y,e.u_units_to_pixels),u_image:new a.aH(y,e.u_image),u_image_height:new a.aI(y,e.u_image_height)}),linePattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_texsize:new a.aO(y,e.u_texsize),u_ratio:new a.aI(y,e.u_ratio),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_image:new a.aH(y,e.u_image),u_units_to_pixels:new a.aO(y,e.u_units_to_pixels),u_scale:new a.aN(y,e.u_scale),u_fade:new a.aI(y,e.u_fade)}),lineSDF:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_ratio:new a.aI(y,e.u_ratio),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_units_to_pixels:new a.aO(y,e.u_units_to_pixels),u_patternscale_a:new a.aO(y,e.u_patternscale_a),u_patternscale_b:new a.aO(y,e.u_patternscale_b),u_sdfgamma:new a.aI(y,e.u_sdfgamma),u_image:new a.aH(y,e.u_image),u_tex_y_a:new a.aI(y,e.u_tex_y_a),u_tex_y_b:new a.aI(y,e.u_tex_y_b),u_mix:new a.aI(y,e.u_mix)}),raster:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_tl_parent:new a.aO(y,e.u_tl_parent),u_scale_parent:new a.aI(y,e.u_scale_parent),u_buffer_scale:new a.aI(y,e.u_buffer_scale),u_fade_t:new a.aI(y,e.u_fade_t),u_opacity:new a.aI(y,e.u_opacity),u_image0:new a.aH(y,e.u_image0),u_image1:new a.aH(y,e.u_image1),u_brightness_low:new a.aI(y,e.u_brightness_low),u_brightness_high:new a.aI(y,e.u_brightness_high),u_saturation_factor:new a.aI(y,e.u_saturation_factor),u_contrast_factor:new a.aI(y,e.u_contrast_factor),u_spin_weights:new a.aN(y,e.u_spin_weights)}),symbolIcon:(y,e)=>({u_is_size_zoom_constant:new a.aH(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(y,e.u_is_size_feature_constant),u_size_t:new a.aI(y,e.u_size_t),u_size:new a.aI(y,e.u_size),u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_pitch:new a.aI(y,e.u_pitch),u_rotate_symbol:new a.aH(y,e.u_rotate_symbol),u_aspect_ratio:new a.aI(y,e.u_aspect_ratio),u_fade_change:new a.aI(y,e.u_fade_change),u_matrix:new a.aJ(y,e.u_matrix),u_label_plane_matrix:new a.aJ(y,e.u_label_plane_matrix),u_coord_matrix:new a.aJ(y,e.u_coord_matrix),u_is_text:new a.aH(y,e.u_is_text),u_pitch_with_map:new a.aH(y,e.u_pitch_with_map),u_is_along_line:new a.aH(y,e.u_is_along_line),u_is_variable_anchor:new a.aH(y,e.u_is_variable_anchor),u_texsize:new a.aO(y,e.u_texsize),u_texture:new a.aH(y,e.u_texture),u_translation:new a.aO(y,e.u_translation),u_pitched_scale:new a.aI(y,e.u_pitched_scale)}),symbolSDF:(y,e)=>({u_is_size_zoom_constant:new a.aH(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(y,e.u_is_size_feature_constant),u_size_t:new a.aI(y,e.u_size_t),u_size:new a.aI(y,e.u_size),u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_pitch:new a.aI(y,e.u_pitch),u_rotate_symbol:new a.aH(y,e.u_rotate_symbol),u_aspect_ratio:new a.aI(y,e.u_aspect_ratio),u_fade_change:new a.aI(y,e.u_fade_change),u_matrix:new a.aJ(y,e.u_matrix),u_label_plane_matrix:new a.aJ(y,e.u_label_plane_matrix),u_coord_matrix:new a.aJ(y,e.u_coord_matrix),u_is_text:new a.aH(y,e.u_is_text),u_pitch_with_map:new a.aH(y,e.u_pitch_with_map),u_is_along_line:new a.aH(y,e.u_is_along_line),u_is_variable_anchor:new a.aH(y,e.u_is_variable_anchor),u_texsize:new a.aO(y,e.u_texsize),u_texture:new a.aH(y,e.u_texture),u_gamma_scale:new a.aI(y,e.u_gamma_scale),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_is_halo:new a.aH(y,e.u_is_halo),u_translation:new a.aO(y,e.u_translation),u_pitched_scale:new a.aI(y,e.u_pitched_scale)}),symbolTextAndIcon:(y,e)=>({u_is_size_zoom_constant:new a.aH(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(y,e.u_is_size_feature_constant),u_size_t:new a.aI(y,e.u_size_t),u_size:new a.aI(y,e.u_size),u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_pitch:new a.aI(y,e.u_pitch),u_rotate_symbol:new a.aH(y,e.u_rotate_symbol),u_aspect_ratio:new a.aI(y,e.u_aspect_ratio),u_fade_change:new a.aI(y,e.u_fade_change),u_matrix:new a.aJ(y,e.u_matrix),u_label_plane_matrix:new a.aJ(y,e.u_label_plane_matrix),u_coord_matrix:new a.aJ(y,e.u_coord_matrix),u_is_text:new a.aH(y,e.u_is_text),u_pitch_with_map:new a.aH(y,e.u_pitch_with_map),u_is_along_line:new a.aH(y,e.u_is_along_line),u_is_variable_anchor:new a.aH(y,e.u_is_variable_anchor),u_texsize:new a.aO(y,e.u_texsize),u_texsize_icon:new a.aO(y,e.u_texsize_icon),u_texture:new a.aH(y,e.u_texture),u_texture_icon:new a.aH(y,e.u_texture_icon),u_gamma_scale:new a.aI(y,e.u_gamma_scale),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_is_halo:new a.aH(y,e.u_is_halo),u_translation:new a.aO(y,e.u_translation),u_pitched_scale:new a.aI(y,e.u_pitched_scale)}),background:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_opacity:new a.aI(y,e.u_opacity),u_color:new a.aL(y,e.u_color)}),backgroundPattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_opacity:new a.aI(y,e.u_opacity),u_image:new a.aH(y,e.u_image),u_pattern_tl_a:new a.aO(y,e.u_pattern_tl_a),u_pattern_br_a:new a.aO(y,e.u_pattern_br_a),u_pattern_tl_b:new a.aO(y,e.u_pattern_tl_b),u_pattern_br_b:new a.aO(y,e.u_pattern_br_b),u_texsize:new a.aO(y,e.u_texsize),u_mix:new a.aI(y,e.u_mix),u_pattern_size_a:new a.aO(y,e.u_pattern_size_a),u_pattern_size_b:new a.aO(y,e.u_pattern_size_b),u_scale_a:new a.aI(y,e.u_scale_a),u_scale_b:new a.aI(y,e.u_scale_b),u_pixel_coord_upper:new a.aO(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(y,e.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(y,e.u_tile_units_to_pixels)}),terrain:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_texture:new a.aH(y,e.u_texture),u_ele_delta:new a.aI(y,e.u_ele_delta),u_fog_matrix:new a.aJ(y,e.u_fog_matrix),u_fog_color:new a.aL(y,e.u_fog_color),u_fog_ground_blend:new a.aI(y,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(y,e.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(y,e.u_horizon_color),u_horizon_fog_blend:new a.aI(y,e.u_horizon_fog_blend)}),terrainDepth:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_ele_delta:new a.aI(y,e.u_ele_delta)}),terrainCoords:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_texture:new a.aH(y,e.u_texture),u_terrain_coords_id:new a.aI(y,e.u_terrain_coords_id),u_ele_delta:new a.aI(y,e.u_ele_delta)}),sky:(y,e)=>({u_sky_color:new a.aL(y,e.u_sky_color),u_horizon_color:new a.aL(y,e.u_horizon_color),u_horizon:new a.aI(y,e.u_horizon),u_sky_horizon_blend:new a.aI(y,e.u_sky_horizon_blend)})};class po{constructor(e,o,h){this.context=e;const d=e.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rl{constructor(e,o,h,d){this.length=o.length,this.attributes=h,this.itemSize=o.bytesPerElement,this.dynamicDraw=d,this.context=e;const g=e.gl;this.buffer=g.createBuffer(),e.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,o){for(let h=0;h<this.attributes.length;h++){const d=o.attributes[this.attributes[h].name];d!==void 0&&e.enableVertexAttribArray(d)}}setVertexAttribPointers(e,o,h){for(let d=0;d<this.attributes.length;d++){const g=this.attributes[d],I=o.attributes[g.name];I!==void 0&&e.vertexAttribPointer(I,g.components,e[Rl[g.type]],!1,this.itemSize,g.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fs=new WeakMap;function wi(y){var e;if(Fs.has(y))return Fs.get(y);{const o=(e=y.getParameter(y.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Fs.set(y,o),o}}class ir{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ls extends ir{getDefault(){return a.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ic extends ir{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class us extends ir{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Fl extends ir{getDefault(){return[!0,!0,!0,!0]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class bu extends ir{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class to extends ir{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Js extends ir{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const o=this.current;(e.func!==o.func||e.ref!==o.ref||e.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class za extends ir{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Os extends ir{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=e,this.dirty=!1}}class oc extends ir{getDefault(){return[0,1]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ol extends ir{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=e,this.dirty=!1}}class jl extends ir{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Ao extends ir{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.BLEND):o.disable(o.BLEND),this.current=e,this.dirty=!1}}class Ra extends ir{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class sc extends ir{getDefault(){return a.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ac extends ir{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class il extends ir{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=e,this.dirty=!1}}class jc extends ir{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class cs extends ir{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Lc extends ir{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Fa extends ir{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Su extends ir{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Mo extends ir{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class lc extends ir{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ll extends ir{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class uc extends ir{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Dl extends ir{getDefault(){return null}set(e){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ko extends ir{getDefault(){return null}set(e){var o;if(e===this.current&&!this.dirty)return;const h=this.gl;wi(h)?h.bindVertexArray(e):(o=h.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Eu extends ir{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class js extends ir{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Tu extends ir{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Bl extends ir{constructor(e,o){super(e),this.context=e,this.parent=o}getDefault(){return null}}class Oa extends Bl{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class hs extends Bl{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Nl extends Bl{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Dc{constructor(e,o,h,d,g){this.context=e,this.width=o,this.height=h;const I=e.gl,A=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new Oa(e,A),d)this.depthAttachment=g?new Nl(e,A):new hs(e,A);else if(g)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,o=this.colorAttachment.get();if(o&&e.deleteTexture(o),this.depthAttachment){const h=this.depthAttachment.get();h&&e.deleteRenderbuffer(h)}e.deleteFramebuffer(this.framebuffer)}}class Nr{constructor(e,o,h){this.blendFunction=e,this.blendColor=o,this.mask=h}}Nr.Replace=[1,0],Nr.disabled=new Nr(Nr.Replace,a.aM.transparent,[!1,!1,!1,!1]),Nr.unblended=new Nr(Nr.Replace,a.aM.transparent,[!0,!0,!0,!0]),Nr.alphaBlended=new Nr([1,771],a.aM.transparent,[!0,!0,!0,!0]);class Ul{constructor(e){var o,h;if(this.gl=e,this.clearColor=new ls(this),this.clearDepth=new ic(this),this.clearStencil=new us(this),this.colorMask=new Fl(this),this.depthMask=new bu(this),this.stencilMask=new to(this),this.stencilFunc=new Js(this),this.stencilOp=new za(this),this.stencilTest=new Os(this),this.depthRange=new oc(this),this.depthTest=new Ol(this),this.depthFunc=new jl(this),this.blend=new Ao(this),this.blendFunc=new Ra(this),this.blendColor=new sc(this),this.blendEquation=new ac(this),this.cullFace=new il(this),this.cullFaceSide=new jc(this),this.frontFace=new cs(this),this.program=new Lc(this),this.activeTexture=new Fa(this),this.viewport=new Su(this),this.bindFramebuffer=new Mo(this),this.bindRenderbuffer=new lc(this),this.bindTexture=new Ll(this),this.bindVertexBuffer=new uc(this),this.bindElementBuffer=new Dl(this),this.bindVertexArray=new ko(this),this.pixelStoreUnpack=new Eu(this),this.pixelStoreUnpackPremultiplyAlpha=new js(this),this.pixelStoreUnpackFlipY=new Tu(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),wi(e)){this.HALF_FLOAT=e.HALF_FLOAT;const d=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=e.RGBA16F)!==null&&o!==void 0?o:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(h=e.RGB16F)!==null&&h!==void 0?h:d==null?void 0:d.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const d=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,o){return new po(this,e,o)}createVertexBuffer(e,o,h){return new rl(this,e,o,h)}createRenderbuffer(e,o,h){const d=this.gl,g=d.createRenderbuffer();return this.bindRenderbuffer.set(g),d.renderbufferStorage(d.RENDERBUFFER,e,o,h),this.bindRenderbuffer.set(null),g}createFramebuffer(e,o,h,d){return new Dc(this,e,o,h,d)}clear({color:e,depth:o,stencil:h}){const d=this.gl;let g=0;e&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),h!==void 0&&(g|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),d.clear(g)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){a.aE(e.blendFunction,Nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return wi(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var o;return wi(this.gl)?this.gl.deleteVertexArray(e):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Vn{constructor(e,o,h){this.func=e,this.mask=o,this.range=h}}Vn.ReadOnly=!1,Vn.ReadWrite=!0,Vn.disabled=new Vn(519,Vn.ReadOnly,[0,1]);const Vl=7680;class wr{constructor(e,o,h,d,g,I){this.test=e,this.ref=o,this.mask=h,this.fail=d,this.depthFail=g,this.pass=I}}wr.disabled=new wr({func:519,mask:0},0,0,Vl,Vl,Vl);class or{constructor(e,o,h){this.enable=e,this.mode=o,this.frontFace=h}}let zo;function Vo(y,e,o,h,d){const g=y.context,I=g.gl,A=y.useProgram("collisionBox"),O=[];let X=0,ae=0;for(let qe=0;qe<h.length;qe++){const et=h[qe],Ve=e.getTile(et).getBucket(o);if(!Ve)continue;const st=d?Ve.textCollisionBox:Ve.iconCollisionBox,ut=Ve.collisionCircleArray;if(ut.length>0){const mt=a.H();a.aQ(mt,Ve.placementInvProjMatrix,y.transform.glCoordMatrix),a.aQ(mt,mt,Ve.placementViewportMatrix),O.push({circleArray:ut,circleOffset:ae,transform:et.posMatrix,invTransform:mt,coord:et}),X+=ut.length/4,ae=X}st&&A.draw(g,I.LINES,Vn.disabled,wr.disabled,y.colorModeForRenderPass(),or.disabled,{u_matrix:et.posMatrix,u_pixel_extrude_scale:[1/(le=y.transform).width,1/le.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(et),o.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,null,y.transform.zoom,null,null,st.collisionVertexBuffer)}var le;if(!d||!O.length)return;const be=y.useProgram("collisionCircle"),Ae=new a.aR;Ae.resize(4*X),Ae._trim();let Fe=0;for(const qe of O)for(let et=0;et<qe.circleArray.length/4;et++){const Ve=4*et,st=qe.circleArray[Ve+0],ut=qe.circleArray[Ve+1],mt=qe.circleArray[Ve+2],At=qe.circleArray[Ve+3];Ae.emplace(Fe++,st,ut,mt,At,0),Ae.emplace(Fe++,st,ut,mt,At,1),Ae.emplace(Fe++,st,ut,mt,At,2),Ae.emplace(Fe++,st,ut,mt,At,3)}(!zo||zo.length<2*X)&&(zo=function(qe){const et=2*qe,Ve=new a.aT;Ve.resize(et),Ve._trim();for(let st=0;st<et;st++){const ut=6*st;Ve.uint16[ut+0]=4*st+0,Ve.uint16[ut+1]=4*st+1,Ve.uint16[ut+2]=4*st+2,Ve.uint16[ut+3]=4*st+2,Ve.uint16[ut+4]=4*st+3,Ve.uint16[ut+5]=4*st+0}return Ve}(X));const Ne=g.createIndexBuffer(zo,!0),$e=g.createVertexBuffer(Ae,a.aS.members,!0);for(const qe of O){const et=oi(qe.transform,qe.invTransform,y.transform);be.draw(g,I.TRIANGLES,Vn.disabled,wr.disabled,y.colorModeForRenderPass(),or.disabled,et,y.style.map.terrain&&y.style.map.terrain.getTerrainData(qe.coord),o.id,$e,Ne,a.a0.simpleSegment(0,2*qe.circleOffset,qe.circleArray.length,qe.circleArray.length/2),null,y.transform.zoom,null,null,null)}$e.destroy(),Ne.destroy()}or.disabled=new or(!1,1029,2305),or.backCCW=new or(!0,1029,2305);const Ro=a.an(new Float32Array(16));function di(y,e,o,h,d,g){const{horizontalAlign:I,verticalAlign:A}=a.au(y);return new a.P((-(I-.5)*e/d+h[0])*g,(-(A-.5)*o/d+h[1])*g)}function Gi(y,e,o,h,d,g){const I=e.tileAnchorPoint.add(new a.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let A=h.mult(g);o||(A=A.rotate(-d));const O=I.add(A);return Ue(O.x,O.y,e.labelPlaneMatrix,e.getElevation).point}if(o){const A=yt(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(y),O=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return y.add(h.rotate(O))}return y.add(h)}function ds(y,e,o,h,d,g,I,A,O,X,ae,le,be,Ae){const Fe=y.text.placedSymbolArray,Ne=y.text.dynamicLayoutVertexArray,$e=y.icon.dynamicLayoutVertexArray,qe={};Ne.clear();for(let et=0;et<Fe.length;et++){const Ve=Fe.get(et),st=Ve.hidden||!Ve.crossTileID||y.allowVerticalPlacement&&!Ve.placedOrientation?null:h[Ve.crossTileID];if(st){const ut=new a.P(Ve.anchorX,Ve.anchorY),mt={getElevation:Ae,width:d.width,height:d.height,labelPlaneMatrix:g,lineVertexArray:null,pitchWithMap:o,projection:ae,projectionCache:null,tileAnchorPoint:ut,translation:le,unwrappedTileID:be},At=o?Ue(ut.x,ut.y,I,Ae):yt(ut.x,ut.y,mt),Dt=me(d.cameraToCenterDistance,At.signedDistanceFromCamera);let Gt=a.ai(y.textSizeData,O,Ve)*Dt/a.ap;o&&(Gt*=y.tilePixelRatio/A);const{width:tn,height:Ht,anchor:Lt,textOffset:hn,textBoxScale:Rn}=st,$t=di(Lt,tn,Ht,hn,Rn,Gt),Qt=ae.getPitchedTextCorrection(d,ut.add(new a.P(le[0],le[1])),be),Fn=Gi(At.point,mt,e,$t,d.angle,Qt),Er=y.allowVerticalPlacement&&Ve.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Gn=0;Gn<Ve.numGlyphs;Gn++)a.aj(Ne,Fn,Er);X&&Ve.associatedIconIndex>=0&&(qe[Ve.associatedIconIndex]={shiftedAnchor:Fn,angle:Er})}else vn(Ve.numGlyphs,Ne)}if(X){$e.clear();const et=y.icon.placedSymbolArray;for(let Ve=0;Ve<et.length;Ve++){const st=et.get(Ve);if(st.hidden)vn(st.numGlyphs,$e);else{const ut=qe[Ve];if(ut)for(let mt=0;mt<st.numGlyphs;mt++)a.aj($e,ut.shiftedAnchor,ut.angle);else vn(st.numGlyphs,$e)}}y.icon.dynamicLayoutVertexBuffer.updateData($e)}y.text.dynamicLayoutVertexBuffer.updateData(Ne)}function Oi(y,e,o){return o.iconsInText&&e?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Ls(y,e,o,h,d,g,I,A,O,X,ae,le){const be=y.context,Ae=be.gl,Fe=y.transform,Ne=Fi(),$e=A==="map",qe=O==="map",et=A!=="viewport"&&o.layout.get("symbol-placement")!=="point",Ve=$e&&!qe&&!et,st=!qe&&et,ut=!o.layout.get("symbol-sort-key").isConstant();let mt=!1;const At=y.depthModeForSublayer(0,Vn.ReadOnly),Dt=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Gt=[],tn=Ne.getCircleRadiusCorrection(Fe);for(const Ht of h){const Lt=e.getTile(Ht),hn=Lt.getBucket(o);if(!hn)continue;const Rn=d?hn.text:hn.icon;if(!Rn||!Rn.segments.get().length||!Rn.hasVisibleVertices)continue;const $t=Rn.programConfigurations.get(o.id),Qt=d||hn.sdfIcons,Fn=d?hn.textSizeData:hn.iconSizeData,Er=qe||Fe.pitch!==0,Gn=y.useProgram(Oi(Qt,d,hn),$t),qn=a.ag(Fn,Fe.zoom),rr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ht);let ei,jo,Pr,ti,ni=[0,0],Si=null;if(d)jo=Lt.glyphAtlasTexture,Pr=Ae.LINEAR,ei=Lt.glyphAtlasTexture.size,hn.iconsInText&&(ni=Lt.imageAtlasTexture.size,Si=Lt.imageAtlasTexture,ti=Er||y.options.rotating||y.options.zooming||Fn.kind==="composite"||Fn.kind==="camera"?Ae.LINEAR:Ae.NEAREST);else{const Kn=o.layout.get("icon-size").constantOr(0)!==1||hn.iconsNeedLinear;jo=Lt.imageAtlasTexture,Pr=Qt||y.options.rotating||y.options.zooming||Kn||Er?Ae.LINEAR:Ae.NEAREST,ei=Lt.imageAtlasTexture.size}const Zi=Un(Lt,1,y.transform.zoom),Ei=st?Ht.posMatrix:Ro,Lo=Xr(Ei,qe,$e,y.transform,Zi),pl=Tr(Ei,qe,$e,y.transform,Zi),ml=Tr(Ht.posMatrix,qe,$e,y.transform,Zi),oo=Ne.translatePosition(y.transform,Lt,g,I),Ou=Dt&&hn.hasTextData(),mc=o.layout.get("icon-text-fit")!=="none"&&Ou&&hn.hasIconData();if(et){const Kn=y.style.map.terrain?(gl,ys)=>y.style.map.terrain.getElevation(Ht,gl,ys):null,Va=o.layout.get("text-rotation-alignment")==="map";Pe(hn,Ht.posMatrix,y,d,Lo,ml,qe,X,Va,Ne,Ht.toUnwrapped(),Fe.width,Fe.height,oo,Kn)}const xo=Ht.posMatrix,so=d&&Dt||mc,ua=et||so?Ro:Lo,qo=pl,Ti=Qt&&o.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ii;Ii=Qt?hn.iconsInText?as(Fn.kind,qn,Ve,qe,et,so,y,xo,ua,qo,oo,ei,ni,tn):ss(Fn.kind,qn,Ve,qe,et,so,y,xo,ua,qo,oo,d,ei,!0,tn):Ks(Fn.kind,qn,Ve,qe,et,so,y,xo,ua,qo,oo,d,ei,tn);const Li={program:Gn,buffers:Rn,uniformValues:Ii,atlasTexture:jo,atlasTextureIcon:Si,atlasInterpolation:Pr,atlasInterpolationIcon:ti,isSDF:Qt,hasHalo:Ti};if(ut&&hn.canOverlap){mt=!0;const Kn=Rn.segments.get();for(const Va of Kn)Gt.push({segments:new a.a0([Va]),sortKey:Va.sortKey,state:Li,terrainData:rr})}else Gt.push({segments:Rn.segments,sortKey:0,state:Li,terrainData:rr})}mt&&Gt.sort((Ht,Lt)=>Ht.sortKey-Lt.sortKey);for(const Ht of Gt){const Lt=Ht.state;if(be.activeTexture.set(Ae.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,Ae.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(be.activeTexture.set(Ae.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,Ae.CLAMP_TO_EDGE)),Lt.isSDF){const hn=Lt.uniformValues;Lt.hasHalo&&(hn.u_is_halo=1,ja(Lt.buffers,Ht.segments,o,y,Lt.program,At,ae,le,hn,Ht.terrainData)),hn.u_is_halo=0}ja(Lt.buffers,Ht.segments,o,y,Lt.program,At,ae,le,Lt.uniformValues,Ht.terrainData)}}function ja(y,e,o,h,d,g,I,A,O,X){const ae=h.context;d.draw(ae,ae.gl.TRIANGLES,g,I,A,or.disabled,O,X,o.id,y.layoutVertexBuffer,y.indexBuffer,e,o.paint,h.transform.zoom,y.programConfigurations.get(o.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function La(y,e,o,h){const d=y.context,g=d.gl,I=wr.disabled,A=new Nr([g.ONE,g.ONE],a.aM.transparent,[!0,!0,!0,!0]),O=e.getBucket(o);if(!O)return;const X=h.key;let ae=o.heatmapFbos.get(X);ae||(ae=Fo(d,e.tileSize,e.tileSize),o.heatmapFbos.set(X,ae)),d.bindFramebuffer.set(ae.framebuffer),d.viewport.set([0,0,e.tileSize,e.tileSize]),d.clear({color:a.aM.transparent});const le=O.programConfigurations.get(o.id),be=y.useProgram("heatmap",le),Ae=y.style.map.terrain.getTerrainData(h);be.draw(d,g.TRIANGLES,Vn.disabled,I,A,or.disabled,hi(h.posMatrix,e,y.transform.zoom,o.paint.get("heatmap-intensity")),Ae,o.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,o.paint,y.transform.zoom,le)}function gi(y,e,o){const h=y.context,d=h.gl;h.setColorMode(y.colorModeForRenderPass());const g=Qs(h,e),I=o.key,A=e.heatmapFbos.get(I);A&&(h.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,A.colorAttachment.get()),h.activeTexture.set(d.TEXTURE1),g.bind(d.LINEAR,d.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(h,d.TRIANGLES,Vn.disabled,wr.disabled,y.colorModeForRenderPass(),or.disabled,Rs(y,e,0,1),null,e.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,e.paint,y.transform.zoom),A.destroy(),e.heatmapFbos.delete(I))}function Fo(y,e,o){var h,d;const g=y.gl,I=g.createTexture();g.bindTexture(g.TEXTURE_2D,I),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);const A=(h=y.HALF_FLOAT)!==null&&h!==void 0?h:g.UNSIGNED_BYTE,O=(d=y.RGBA16F)!==null&&d!==void 0?d:g.RGBA;g.texImage2D(g.TEXTURE_2D,0,O,e,o,0,g.RGBA,A,null);const X=y.createFramebuffer(e,o,!1,!1);return X.colorAttachment.set(I),X}function Qs(y,e){return e.colorRampTexture||(e.colorRampTexture=new K(y,e.colorRamp,y.gl.RGBA)),e.colorRampTexture}function no(y,e,o,h,d){if(!o||!h||!h.imageAtlas)return;const g=h.imageAtlas.patternPositions;let I=g[o.to.toString()],A=g[o.from.toString()];if(!I&&A&&(I=A),!A&&I&&(A=I),!I||!A){const O=d.getPaintProperty(e);I=g[O],A=g[O]}I&&A&&y.setConstantPatternPositions(I,A)}function mo(y,e,o,h,d,g,I){const A=y.context.gl,O="fill-pattern",X=o.paint.get(O),ae=X&&X.constantOr(1),le=o.getCrossfadeParameters();let be,Ae,Fe,Ne,$e;I?(Ae=ae&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",be=A.LINES):(Ae=ae?"fillPattern":"fill",be=A.TRIANGLES);const qe=X.constantOr(null);for(const et of h){const Ve=e.getTile(et);if(ae&&!Ve.patternsLoaded())continue;const st=Ve.getBucket(o);if(!st)continue;const ut=st.programConfigurations.get(o.id),mt=y.useProgram(Ae,ut),At=y.style.map.terrain&&y.style.map.terrain.getTerrainData(et);ae&&(y.context.activeTexture.set(A.TEXTURE0),Ve.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ut.updatePaintBuffers(le)),no(ut,O,qe,Ve,o);const Dt=At?et:null,Gt=y.translatePosMatrix(Dt?Dt.posMatrix:et.posMatrix,Ve,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(I){Ne=st.indexBuffer2,$e=st.segments2;const tn=[A.drawingBufferWidth,A.drawingBufferHeight];Fe=Ae==="fillOutlinePattern"&&ae?Xs(Gt,y,le,Ve,tn):yu(Gt,tn)}else Ne=st.indexBuffer,$e=st.segments,Fe=ae?tl(Gt,y,le,Ve):zs(Gt);mt.draw(y.context,be,d,y.stencilModeForClipping(et),g,or.disabled,Fe,At,o.id,st.layoutVertexBuffer,Ne,$e,o.paint,y.transform.zoom,ut)}}function ol(y,e,o,h,d,g,I){const A=y.context,O=A.gl,X="fill-extrusion-pattern",ae=o.paint.get(X),le=ae.constantOr(1),be=o.getCrossfadeParameters(),Ae=o.paint.get("fill-extrusion-opacity"),Fe=ae.constantOr(null);for(const Ne of h){const $e=e.getTile(Ne),qe=$e.getBucket(o);if(!qe)continue;const et=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne),Ve=qe.programConfigurations.get(o.id),st=y.useProgram(le?"fillExtrusionPattern":"fillExtrusion",Ve);le&&(y.context.activeTexture.set(O.TEXTURE0),$e.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ve.updatePaintBuffers(be)),no(Ve,X,Fe,$e,o);const ut=y.translatePosMatrix(Ne.posMatrix,$e,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),mt=o.paint.get("fill-extrusion-vertical-gradient"),At=le?ka(ut,y,mt,Ae,Ne,be,$e):Ma(ut,y,mt,Ae);st.draw(A,A.gl.TRIANGLES,d,g,I,or.backCCW,At,et,o.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,o.paint,y.transform.zoom,Ve,y.style.map.terrain&&qe.centroidVertexBuffer)}}function $o(y,e,o,h,d,g,I){const A=y.context,O=A.gl,X=o.fbo;if(!X)return;const ae=y.useProgram("hillshade"),le=y.style.map.terrain&&y.style.map.terrain.getTerrainData(e);A.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,X.colorAttachment.get()),ae.draw(A,O.TRIANGLES,d,g,I,or.disabled,((be,Ae,Fe,Ne)=>{const $e=Fe.paint.get("hillshade-shadow-color"),qe=Fe.paint.get("hillshade-highlight-color"),et=Fe.paint.get("hillshade-accent-color");let Ve=Fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Fe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ve-=be.transform.angle);const st=!be.options.moving;return{u_matrix:Ne?Ne.posMatrix:be.transform.calculatePosMatrix(Ae.tileID.toUnwrapped(),st),u_image:0,u_latrange:fo(0,Ae.tileID),u_light:[Fe.paint.get("hillshade-exaggeration"),Ve],u_shadow:$e,u_highlight:qe,u_accent:et}})(y,o,h,le?e:null),le,h.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function ea(y,e,o,h,d,g){const I=y.context,A=I.gl,O=e.dem;if(O&&O.data){const X=O.dim,ae=O.stride,le=O.getPixels();if(I.activeTexture.set(A.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||y.getTileTexture(ae),e.demTexture){const Ae=e.demTexture;Ae.update(le,{premultiply:!1}),Ae.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else e.demTexture=new K(I,le,A.RGBA,{premultiply:!1}),e.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);I.activeTexture.set(A.TEXTURE0);let be=e.fbo;if(!be){const Ae=new K(I,{width:X,height:X,data:null},A.RGBA);Ae.bind(A.LINEAR,A.CLAMP_TO_EDGE),be=e.fbo=I.createFramebuffer(X,X,!0,!1),be.colorAttachment.set(Ae.texture)}I.bindFramebuffer.set(be.framebuffer),I.viewport.set([0,0,X,X]),y.useProgram("hillshadePrepare").draw(I,A.TRIANGLES,h,d,g,or.disabled,((Ae,Fe)=>{const Ne=Fe.stride,$e=a.H();return a.aP($e,0,a.X,-a.X,0,0,1),a.J($e,$e,[0,-a.X,0]),{u_matrix:$e,u_image:1,u_dimension:[Ne,Ne],u_zoom:Ae.overscaledZ,u_unpack:Fe.getUnpackVector()}})(e.tileID,O),null,o.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function $l(y,e,o,h,d,g){const I=h.paint.get("raster-fade-duration");if(!g&&I>0){const A=C.now(),O=(A-y.timeAdded)/I,X=e?(A-e.timeAdded)/I:-1,ae=o.getSource(),le=d.coveringZoomLevel({tileSize:ae.tileSize,roundZoom:ae.roundZoom}),be=!e||Math.abs(e.tileID.overscaledZ-le)>Math.abs(y.tileID.overscaledZ-le),Ae=be&&y.refreshedUponExpiration?1:a.ac(be?O:1-X,0,1);return y.refreshedUponExpiration&&O>=1&&(y.refreshedUponExpiration=!1),e?{opacity:1,mix:1-Ae}:{opacity:Ae,mix:0}}return{opacity:1,mix:0}}const go=new a.aM(1,0,0,1),er=new a.aM(0,1,0,1),sl=new a.aM(0,0,1,1),Iu=new a.aM(1,0,1,1),al=new a.aM(0,1,1,1);function ta(y,e,o,h){ll(y,0,e+o/2,y.transform.width,o,h)}function Cu(y,e,o,h){ll(y,e-o/2,0,o,y.transform.height,h)}function ll(y,e,o,h,d,g){const I=y.context,A=I.gl;A.enable(A.SCISSOR_TEST),A.scissor(e*y.pixelRatio,o*y.pixelRatio,h*y.pixelRatio,d*y.pixelRatio),I.clear({color:g}),A.disable(A.SCISSOR_TEST)}function ee(y,e,o){const h=y.context,d=h.gl,g=o.posMatrix,I=y.useProgram("debug"),A=Vn.disabled,O=wr.disabled,X=y.colorModeForRenderPass(),ae="$debug",le=y.style.map.terrain&&y.style.map.terrain.getTerrainData(o);h.activeTexture.set(d.TEXTURE0);const be=e.getTileByID(o.key).latestRawTileData,Ae=Math.floor((be&&be.byteLength||0)/1024),Fe=e.getTile(o).tileSize,Ne=512/Math.min(Fe,512)*(o.overscaledZ/y.transform.zoom)*.5;let $e=o.canonical.toString();o.overscaledZ!==o.canonical.z&&($e+=` => ${o.overscaledZ}`),function(qe,et){qe.initDebugOverlayCanvas();const Ve=qe.debugOverlayCanvas,st=qe.context.gl,ut=qe.debugOverlayCanvas.getContext("2d");ut.clearRect(0,0,Ve.width,Ve.height),ut.shadowColor="white",ut.shadowBlur=2,ut.lineWidth=1.5,ut.strokeStyle="white",ut.textBaseline="top",ut.font="bold 36px Open Sans, sans-serif",ut.fillText(et,5,5),ut.strokeText(et,5,5),qe.debugOverlayTexture.update(Ve),qe.debugOverlayTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE)}(y,`${$e} ${Ae}kB`),I.draw(h,d.TRIANGLES,A,O,Nr.alphaBlended,or.disabled,ho(g,a.aM.transparent,Ne),null,ae,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),I.draw(h,d.LINE_STRIP,A,O,X,or.disabled,ho(g,a.aM.red),le,ae,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Ie(y,e,o){const h=y.context,d=h.gl,g=y.colorModeForRenderPass(),I=new Vn(d.LEQUAL,Vn.ReadWrite,y.depthRangeFor3D),A=y.useProgram("terrain"),O=e.getTerrainMesh();h.bindFramebuffer.set(null),h.viewport.set([0,0,y.width,y.height]);for(const X of o){const ae=y.renderToTexture.getTexture(X),le=e.getTerrainData(X.tileID);h.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,ae.texture);const be=y.transform.calculatePosMatrix(X.tileID.toUnwrapped()),Ae=e.getMeshFrameDelta(y.transform.zoom),Fe=y.transform.calculateFogMatrix(X.tileID.toUnwrapped()),Ne=eo(be,Ae,Fe,y.style.sky,y.transform.pitch);A.draw(h,d.TRIANGLES,I,wr.disabled,g,or.backCCW,Ne,le,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class We{constructor(e,o,h){this.vertexBuffer=e,this.indexBuffer=o,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class wt{constructor(e,o){this.context=new Ul(e),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Bt.maxUnderzooming+Bt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ws}resize(e,o,h){if(this.width=Math.floor(e*h),this.height=Math.floor(o*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style._order)this.style._layers[d].resize()}setup(){const e=this.context,o=new a.aX;o.emplaceBack(0,0),o.emplaceBack(a.X,0),o.emplaceBack(0,a.X),o.emplaceBack(a.X,a.X),this.tileExtentBuffer=e.createVertexBuffer(o,os.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);const h=new a.aX;h.emplaceBack(0,0),h.emplaceBack(a.X,0),h.emplaceBack(0,a.X),h.emplaceBack(a.X,a.X),this.debugBuffer=e.createVertexBuffer(h,os.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);const d=new a.$;d.emplaceBack(0,0,0,0),d.emplaceBack(a.X,0,a.X,0),d.emplaceBack(0,a.X,0,a.X),d.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=e.createVertexBuffer(d,H.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);const g=new a.aX;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(g,os.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);const I=new a.aZ;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(I);const A=new a.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(A);const O=this.context.gl;this.stencilClearMode=new wr({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const e=this.context,o=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=a.H();a.aP(h,0,this.width,this.height,0,0,1),a.K(h,h,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,o.TRIANGLES,Vn.disabled,this.stencilClearMode,Nr.disabled,or.disabled,Gr(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,o){if(this.currentStencilSource===e.source||!e.isTileClipped()||!o||!o.length)return;this.currentStencilSource=e.source;const h=this.context,d=h.gl;this.nextStencilID+o.length>256&&this.clearStencil(),h.setColorMode(Nr.disabled),h.setDepthMode(Vn.disabled);const g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of o){const A=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);g.draw(h,d.TRIANGLES,Vn.disabled,new wr({func:d.ALWAYS,mask:0},A,255,d.KEEP,d.KEEP,d.REPLACE),Nr.disabled,or.disabled,Gr(I.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,o=this.context.gl;return new wr({func:o.NOTEQUAL,mask:255},e,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(e){const o=this.context.gl;return new wr({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(e){const o=this.context.gl,h=e.sort((I,A)=>A.overscaledZ-I.overscaledZ),d=h[h.length-1].overscaledZ,g=h[0].overscaledZ-d+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();const I={};for(let A=0;A<g;A++)I[A+d]=new wr({func:o.GEQUAL,mask:255},A+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=g,[I,h]}return[{[d]:wr.disabled},h]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Nr([e.CONSTANT_COLOR,e.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nr.unblended:Nr.alphaBlended}depthModeForSublayer(e,o,h){if(!this.opaquePassEnabledForLayer())return Vn.disabled;const d=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Vn(h||this.context.gl.LEQUAL,o,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,o){this.style=e,this.options=o,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(C.now()),this.imageManager.beginFrame();const h=this.style._order,d=this.style.sourceCaches,g={},I={},A={};for(const O in d){const X=d[O];X.used&&X.prepare(this.context),g[O]=X.getVisibleCoordinates(),I[O]=g[O].slice().reverse(),A[O]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<h.length;O++)if(this.style._layers[h[O]].is3D()){this.opaquePassCutoff=O;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const O of h){const X=this.style._layers[O];if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const ae=I[X.source];(X.type==="custom"||ae.length)&&this.renderLayer(this,d[X.source],X,ae)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(O,X){const ae=O.context,le=ae.gl,be=((qe,et,Ve)=>({u_sky_color:qe.properties.get("sky-color"),u_horizon_color:qe.properties.get("horizon-color"),u_horizon:(et.height/2+et.getHorizon())*Ve,u_sky_horizon_blend:qe.properties.get("sky-horizon-blend")*et.height/2*Ve}))(X,O.style.map.transform,O.pixelRatio),Ae=new Vn(le.LEQUAL,Vn.ReadWrite,[0,1]),Fe=wr.disabled,Ne=O.colorModeForRenderPass(),$e=O.useProgram("sky");if(!X.mesh){const qe=new a.aX;qe.emplaceBack(-1,-1),qe.emplaceBack(1,-1),qe.emplaceBack(1,1),qe.emplaceBack(-1,1);const et=new a.aY;et.emplaceBack(0,1,2),et.emplaceBack(0,2,3),X.mesh=new We(ae.createVertexBuffer(qe,os.members),ae.createIndexBuffer(et),a.a0.simpleSegment(0,0,qe.length,et.length))}$e.draw(ae,le.TRIANGLES,Ae,Fe,Ne,or.disabled,be,void 0,"sky",X.mesh.vertexBuffer,X.mesh.indexBuffer,X.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[h[this.currentLayer]],X=d[O.source],ae=g[O.source];this._renderTileClippingMasks(O,ae),this.renderLayer(this,X,O,ae)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const O=this.style._layers[h[this.currentLayer]],X=d[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const ae=(O.type==="symbol"?A:I)[O.source];this._renderTileClippingMasks(O,g[O.source]),this.renderLayer(this,X,O,ae)}if(this.options.showTileBoundaries){const O=function(X,ae){let le=null;const be=Object.values(X._layers).flatMap($e=>$e.source&&!$e.isHidden(ae)?[X.sourceCaches[$e.source]]:[]),Ae=be.filter($e=>$e.getSource().type==="vector"),Fe=be.filter($e=>$e.getSource().type!=="vector"),Ne=$e=>{(!le||le.getSource().maxzoom<$e.getSource().maxzoom)&&(le=$e)};return Ae.forEach($e=>Ne($e)),le||Fe.forEach($e=>Ne($e)),le}(this.style,this.transform.zoom);O&&function(X,ae,le){for(let be=0;be<le.length;be++)ee(X,ae,le[be])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const X=O.transform.padding;ta(O,O.transform.height-(X.top||0),3,go),ta(O,X.bottom||0,3,er),Cu(O,X.left||0,3,sl),Cu(O,O.transform.width-(X.right||0),3,Iu);const ae=O.transform.centerPoint;(function(le,be,Ae,Fe){ll(le,be-1,Ae-10,2,20,Fe),ll(le,be-10,Ae-1,20,2,Fe)})(O,ae.x,O.transform.height-ae.y,al)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix;let d=this.terrainFacilitator.dirty;d||(d=e?!a.a_(o,h):!a.a$(o,h)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(a.b0(o,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(g,I){const A=g.context,O=A.gl,X=Nr.unblended,ae=new Vn(O.LEQUAL,Vn.ReadWrite,[0,1]),le=I.getTerrainMesh(),be=I.sourceCache.getRenderableTiles(),Ae=g.useProgram("terrainDepth");A.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),A.clear({color:a.aM.transparent,depth:1});for(const Fe of be){const Ne=I.getTerrainData(Fe.tileID),$e={u_matrix:g.transform.calculatePosMatrix(Fe.tileID.toUnwrapped()),u_ele_delta:I.getMeshFrameDelta(g.transform.zoom)};Ae.draw(A,O.TRIANGLES,ae,wr.disabled,X,or.backCCW,$e,Ne,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain),function(g,I){const A=g.context,O=A.gl,X=Nr.unblended,ae=new Vn(O.LEQUAL,Vn.ReadWrite,[0,1]),le=I.getTerrainMesh(),be=I.getCoordsTexture(),Ae=I.sourceCache.getRenderableTiles(),Fe=g.useProgram("terrainCoords");A.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),A.clear({color:a.aM.transparent,depth:1}),I.coordsIndex=[];for(const Ne of Ae){const $e=I.getTerrainData(Ne.tileID);A.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,be.texture);const qe={u_matrix:g.transform.calculatePosMatrix(Ne.tileID.toUnwrapped()),u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(g.transform.zoom)};Fe.draw(A,O.TRIANGLES,ae,wr.disabled,X,or.backCCW,qe,$e,"terrain",le.vertexBuffer,le.indexBuffer,le.segments),I.coordsIndex.push(Ne.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain))}renderLayer(e,o,h,d){if(!h.isHidden(this.transform.zoom)&&(h.type==="background"||h.type==="custom"||(d||[]).length))switch(this.id=h.id,h.type){case"symbol":(function(g,I,A,O,X){if(g.renderPass!=="translucent")return;const ae=wr.disabled,le=g.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(be,Ae,Fe,Ne,$e,qe,et,Ve,st){const ut=Ae.transform,mt=Fi(),At=$e==="map",Dt=qe==="map";for(const Gt of be){const tn=Ne.getTile(Gt),Ht=tn.getBucket(Fe);if(!Ht||!Ht.text||!Ht.text.segments.get().length)continue;const Lt=a.ag(Ht.textSizeData,ut.zoom),hn=Un(tn,1,Ae.transform.zoom),Rn=Xr(Gt.posMatrix,Dt,At,Ae.transform,hn),$t=Fe.layout.get("icon-text-fit")!=="none"&&Ht.hasIconData();if(Lt){const Qt=Math.pow(2,ut.zoom-tn.tileID.overscaledZ),Fn=Ae.style.map.terrain?(Gn,qn)=>Ae.style.map.terrain.getElevation(Gt,Gn,qn):null,Er=mt.translatePosition(ut,tn,et,Ve);ds(Ht,At,Dt,st,ut,Rn,Gt.posMatrix,Qt,Lt,$t,mt,Er,Gt.toUnwrapped(),Fn)}}}(O,g,A,I,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),X),A.paint.get("icon-opacity").constantOr(1)!==0&&Ls(g,I,A,O,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),ae,le),A.paint.get("text-opacity").constantOr(1)!==0&&Ls(g,I,A,O,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),ae,le),I.map.showCollisionBoxes&&(Vo(g,I,A,O,!0),Vo(g,I,A,O,!1))})(e,o,h,d,this.style.placement.variableOffsets);break;case"circle":(function(g,I,A,O){if(g.renderPass!=="translucent")return;const X=A.paint.get("circle-opacity"),ae=A.paint.get("circle-stroke-width"),le=A.paint.get("circle-stroke-opacity"),be=!A.layout.get("circle-sort-key").isConstant();if(X.constantOr(1)===0&&(ae.constantOr(1)===0||le.constantOr(1)===0))return;const Ae=g.context,Fe=Ae.gl,Ne=g.depthModeForSublayer(0,Vn.ReadOnly),$e=wr.disabled,qe=g.colorModeForRenderPass(),et=[];for(let Ve=0;Ve<O.length;Ve++){const st=O[Ve],ut=I.getTile(st),mt=ut.getBucket(A);if(!mt)continue;const At=mt.programConfigurations.get(A.id),Dt=g.useProgram("circle",At),Gt=mt.layoutVertexBuffer,tn=mt.indexBuffer,Ht=g.style.map.terrain&&g.style.map.terrain.getTerrainData(st),Lt={programConfiguration:At,program:Dt,layoutVertexBuffer:Gt,indexBuffer:tn,uniformValues:Ml(g,st,ut,A),terrainData:Ht};if(be){const hn=mt.segments.get();for(const Rn of hn)et.push({segments:new a.a0([Rn]),sortKey:Rn.sortKey,state:Lt})}else et.push({segments:mt.segments,sortKey:0,state:Lt})}be&&et.sort((Ve,st)=>Ve.sortKey-st.sortKey);for(const Ve of et){const{programConfiguration:st,program:ut,layoutVertexBuffer:mt,indexBuffer:At,uniformValues:Dt,terrainData:Gt}=Ve.state;ut.draw(Ae,Fe.TRIANGLES,Ne,$e,qe,or.disabled,Dt,Gt,A.id,mt,At,Ve.segments,A.paint,g.transform.zoom,st)}})(e,o,h,d);break;case"heatmap":(function(g,I,A,O){if(A.paint.get("heatmap-opacity")===0)return;const X=g.context;if(g.style.map.terrain){for(const ae of O){const le=I.getTile(ae);I.hasRenderableParent(ae)||(g.renderPass==="offscreen"?La(g,le,A,ae):g.renderPass==="translucent"&&gi(g,A,ae))}X.viewport.set([0,0,g.width,g.height])}else g.renderPass==="offscreen"?function(ae,le,be,Ae){const Fe=ae.context,Ne=Fe.gl,$e=wr.disabled,qe=new Nr([Ne.ONE,Ne.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(et,Ve,st){const ut=et.gl;et.activeTexture.set(ut.TEXTURE1),et.viewport.set([0,0,Ve.width/4,Ve.height/4]);let mt=st.heatmapFbos.get(a.aU);mt?(ut.bindTexture(ut.TEXTURE_2D,mt.colorAttachment.get()),et.bindFramebuffer.set(mt.framebuffer)):(mt=Fo(et,Ve.width/4,Ve.height/4),st.heatmapFbos.set(a.aU,mt))})(Fe,ae,be),Fe.clear({color:a.aM.transparent});for(let et=0;et<Ae.length;et++){const Ve=Ae[et];if(le.hasRenderableParent(Ve))continue;const st=le.getTile(Ve),ut=st.getBucket(be);if(!ut)continue;const mt=ut.programConfigurations.get(be.id),At=ae.useProgram("heatmap",mt),{zoom:Dt}=ae.transform;At.draw(Fe,Ne.TRIANGLES,Vn.disabled,$e,qe,or.disabled,hi(Ve.posMatrix,st,Dt,be.paint.get("heatmap-intensity")),null,be.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,be.paint,ae.transform.zoom,mt)}Fe.viewport.set([0,0,ae.width,ae.height])}(g,I,A,O):g.renderPass==="translucent"&&function(ae,le){const be=ae.context,Ae=be.gl;be.setColorMode(ae.colorModeForRenderPass());const Fe=le.heatmapFbos.get(a.aU);Fe&&(be.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,Fe.colorAttachment.get()),be.activeTexture.set(Ae.TEXTURE1),Qs(be,le).bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),ae.useProgram("heatmapTexture").draw(be,Ae.TRIANGLES,Vn.disabled,wr.disabled,ae.colorModeForRenderPass(),or.disabled,Rs(ae,le,0,1),null,le.id,ae.viewportBuffer,ae.quadTriangleIndexBuffer,ae.viewportSegments,le.paint,ae.transform.zoom))}(g,A)})(e,o,h,d);break;case"line":(function(g,I,A,O){if(g.renderPass!=="translucent")return;const X=A.paint.get("line-opacity"),ae=A.paint.get("line-width");if(X.constantOr(1)===0||ae.constantOr(1)===0)return;const le=g.depthModeForSublayer(0,Vn.ReadOnly),be=g.colorModeForRenderPass(),Ae=A.paint.get("line-dasharray"),Fe=A.paint.get("line-pattern"),Ne=Fe.constantOr(1),$e=A.paint.get("line-gradient"),qe=A.getCrossfadeParameters(),et=Ne?"linePattern":Ae?"lineSDF":$e?"lineGradient":"line",Ve=g.context,st=Ve.gl;let ut=!0;for(const mt of O){const At=I.getTile(mt);if(Ne&&!At.patternsLoaded())continue;const Dt=At.getBucket(A);if(!Dt)continue;const Gt=Dt.programConfigurations.get(A.id),tn=g.context.program.get(),Ht=g.useProgram(et,Gt),Lt=ut||Ht.program!==tn,hn=g.style.map.terrain&&g.style.map.terrain.getTerrainData(mt),Rn=Fe.constantOr(null);if(Rn&&At.imageAtlas){const Fn=At.imageAtlas,Er=Fn.patternPositions[Rn.to.toString()],Gn=Fn.patternPositions[Rn.from.toString()];Er&&Gn&&Gt.setConstantPatternPositions(Er,Gn)}const $t=hn?mt:null,Qt=Ne?Uo(g,At,A,qe,$t):Ae?_u(g,At,A,Ae,qe,$t):$e?vu(g,At,A,Dt.lineClipsArray.length,$t):kl(g,At,A,$t);if(Ne)Ve.activeTexture.set(st.TEXTURE0),At.imageAtlasTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE),Gt.updatePaintBuffers(qe);else if(Ae&&(Lt||g.lineAtlas.dirty))Ve.activeTexture.set(st.TEXTURE0),g.lineAtlas.bind(Ve);else if($e){const Fn=Dt.gradients[A.id];let Er=Fn.texture;if(A.gradientVersion!==Fn.version){let Gn=256;if(A.stepInterpolant){const qn=I.getSource().maxzoom,rr=mt.canonical.z===qn?Math.ceil(1<<g.transform.maxZoom-mt.canonical.z):1;Gn=a.ac(a.aV(Dt.maxLineLength/a.X*1024*rr),256,Ve.maxTextureSize)}Fn.gradient=a.aW({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Gn,image:Fn.gradient||void 0,clips:Dt.lineClipsArray}),Fn.texture?Fn.texture.update(Fn.gradient):Fn.texture=new K(Ve,Fn.gradient,st.RGBA),Fn.version=A.gradientVersion,Er=Fn.texture}Ve.activeTexture.set(st.TEXTURE0),Er.bind(A.stepInterpolant?st.NEAREST:st.LINEAR,st.CLAMP_TO_EDGE)}Ht.draw(Ve,st.TRIANGLES,le,g.stencilModeForClipping(mt),be,or.disabled,Qt,hn,A.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,A.paint,g.transform.zoom,Gt,Dt.layoutVertexBuffer2),ut=!1}})(e,o,h,d);break;case"fill":(function(g,I,A,O){const X=A.paint.get("fill-color"),ae=A.paint.get("fill-opacity");if(ae.constantOr(1)===0)return;const le=g.colorModeForRenderPass(),be=A.paint.get("fill-pattern"),Ae=g.opaquePassEnabledForLayer()&&!be.constantOr(1)&&X.constantOr(a.aM.transparent).a===1&&ae.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===Ae){const Fe=g.depthModeForSublayer(1,g.renderPass==="opaque"?Vn.ReadWrite:Vn.ReadOnly);mo(g,I,A,O,Fe,le,!1)}if(g.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Fe=g.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Vn.ReadOnly);mo(g,I,A,O,Fe,le,!0)}})(e,o,h,d);break;case"fill-extrusion":(function(g,I,A,O){const X=A.paint.get("fill-extrusion-opacity");if(X!==0&&g.renderPass==="translucent"){const ae=new Vn(g.context.gl.LEQUAL,Vn.ReadWrite,g.depthRangeFor3D);if(X!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))ol(g,I,A,O,ae,wr.disabled,Nr.disabled),ol(g,I,A,O,ae,g.stencilModeFor3D(),g.colorModeForRenderPass());else{const le=g.colorModeForRenderPass();ol(g,I,A,O,ae,wr.disabled,le)}}})(e,o,h,d);break;case"hillshade":(function(g,I,A,O){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const X=g.context,ae=g.depthModeForSublayer(0,Vn.ReadOnly),le=g.colorModeForRenderPass(),[be,Ae]=g.renderPass==="translucent"?g.stencilConfigForOverlap(O):[{},O];for(const Fe of Ae){const Ne=I.getTile(Fe);Ne.needsHillshadePrepare!==void 0&&Ne.needsHillshadePrepare&&g.renderPass==="offscreen"?ea(g,Ne,A,ae,wr.disabled,le):g.renderPass==="translucent"&&$o(g,Fe,Ne,A,ae,be[Fe.overscaledZ],le)}X.viewport.set([0,0,g.width,g.height])})(e,o,h,d);break;case"raster":(function(g,I,A,O){if(g.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!O.length)return;const X=g.context,ae=X.gl,le=I.getSource(),be=g.useProgram("raster"),Ae=g.colorModeForRenderPass(),[Fe,Ne]=le instanceof Ce?[{},O]:g.stencilConfigForOverlap(O),$e=Ne[Ne.length-1].overscaledZ,qe=!g.options.moving;for(const et of Ne){const Ve=g.depthModeForSublayer(et.overscaledZ-$e,A.paint.get("raster-opacity")===1?Vn.ReadWrite:Vn.ReadOnly,ae.LESS),st=I.getTile(et);st.registerFadeDuration(A.paint.get("raster-fade-duration"));const ut=I.findLoadedParent(et,0),mt=I.findLoadedSibling(et),At=$l(st,ut||mt||null,I,A,g.transform,g.style.map.terrain);let Dt,Gt;const tn=A.paint.get("raster-resampling")==="nearest"?ae.NEAREST:ae.LINEAR;X.activeTexture.set(ae.TEXTURE0),st.texture.bind(tn,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),X.activeTexture.set(ae.TEXTURE1),ut?(ut.texture.bind(tn,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),Dt=Math.pow(2,ut.tileID.overscaledZ-st.tileID.overscaledZ),Gt=[st.tileID.canonical.x*Dt%1,st.tileID.canonical.y*Dt%1]):st.texture.bind(tn,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),st.texture.useMipmap&&X.extTextureFilterAnisotropic&&g.transform.pitch>20&&ae.texParameterf(ae.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax);const Ht=g.style.map.terrain&&g.style.map.terrain.getTerrainData(et),Lt=Ht?et:null,hn=Lt?Lt.posMatrix:g.transform.calculatePosMatrix(et.toUnwrapped(),qe),Rn=rc(hn,Gt||[0,0],Dt||1,At,A);le instanceof Ce?be.draw(X,ae.TRIANGLES,Ve,wr.disabled,Ae,or.disabled,Rn,Ht,A.id,le.boundsBuffer,g.quadTriangleIndexBuffer,le.boundsSegments):be.draw(X,ae.TRIANGLES,Ve,Fe[et.overscaledZ],Ae,or.disabled,Rn,Ht,A.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}})(e,o,h,d);break;case"background":(function(g,I,A,O){const X=A.paint.get("background-color"),ae=A.paint.get("background-opacity");if(ae===0)return;const le=g.context,be=le.gl,Ae=g.transform,Fe=Ae.tileSize,Ne=A.paint.get("background-pattern");if(g.isPatternMissing(Ne))return;const $e=!Ne&&X.a===1&&ae===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==$e)return;const qe=wr.disabled,et=g.depthModeForSublayer(0,$e==="opaque"?Vn.ReadWrite:Vn.ReadOnly),Ve=g.colorModeForRenderPass(),st=g.useProgram(Ne?"backgroundPattern":"background"),ut=O||Ae.coveringTiles({tileSize:Fe,terrain:g.style.map.terrain});Ne&&(le.activeTexture.set(be.TEXTURE0),g.imageManager.bind(g.context));const mt=A.getCrossfadeParameters();for(const At of ut){const Dt=O?At.posMatrix:g.transform.calculatePosMatrix(At.toUnwrapped()),Gt=Ne?wu(Dt,ae,g,Ne,{tileID:At,tileSize:Fe},mt):Ys(Dt,ae,X),tn=g.style.map.terrain&&g.style.map.terrain.getTerrainData(At);st.draw(le,be.TRIANGLES,et,qe,Ve,or.disabled,Gt,tn,A.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}})(e,0,h,d);break;case"custom":(function(g,I,A){const O=g.context,X=A.implementation;if(g.renderPass==="offscreen"){const ae=X.prerender;ae&&(g.setCustomLayerDefaults(),O.setColorMode(g.colorModeForRenderPass()),ae.call(X,O.gl,g.transform.customLayerMatrix()),O.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),O.setColorMode(g.colorModeForRenderPass()),O.setStencilMode(wr.disabled);const ae=X.renderingMode==="3d"?new Vn(g.context.gl.LEQUAL,Vn.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,Vn.ReadOnly);O.setDepthMode(ae),X.render(O.gl,g.transform.customLayerMatrix(),{farZ:g.transform.farZ,nearZ:g.transform.nearZ,fov:g.transform._fov,modelViewProjectionMatrix:g.transform.modelViewProjectionMatrix,projectionMatrix:g.transform.projectionMatrix}),O.setDirty(),g.setBaseState(),O.bindFramebuffer.set(null)}})(e,0,h)}}translatePosMatrix(e,o,h,d,g){if(!h[0]&&!h[1])return e;const I=g?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(I){const X=Math.sin(I),ae=Math.cos(I);h=[h[0]*ae-h[1]*X,h[0]*X+h[1]*ae]}const A=[g?h[0]:Un(o,h[0],this.transform.zoom),g?h[1]:Un(o,h[1],this.transform.zoom),0],O=new Float32Array(16);return a.J(O,e,A),O}saveTileTexture(e){const o=this._tileTextures[e.size[0]];o?o.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const o=this._tileTextures[e];return o&&o.length>0?o.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const o=this.imageManager.getPattern(e.from.toString()),h=this.imageManager.getPattern(e.to.toString());return!o||!h}useProgram(e,o){this.cache=this.cache||{};const h=e+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new ur(this.context,co[e],o,zl[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new K(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:o}=this.context.gl;return this.width!==e||this.height!==o}}class Kt{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,h){const d=Math.pow(2,h),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const O=1/(A=a.af([],A,e))[3]/o*d;return a.b1(A,A,[O,O,1/A[3],O])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const O=function(be,Ae){var Fe=Ae[0],Ne=Ae[1],$e=Ae[2],qe=Fe*Fe+Ne*Ne+$e*$e;return qe>0&&(qe=1/Math.sqrt(qe)),be[0]=Ae[0]*qe,be[1]=Ae[1]*qe,be[2]=Ae[2]*qe,be}([],function(be,Ae,Fe){var Ne=Ae[0],$e=Ae[1],qe=Ae[2],et=Fe[0],Ve=Fe[1],st=Fe[2];return be[0]=$e*st-qe*Ve,be[1]=qe*et-Ne*st,be[2]=Ne*Ve-$e*et,be}([],M([],g[A[0]],g[A[1]]),M([],g[A[2]],g[A[1]]))),X=-((ae=O)[0]*(le=g[A[1]])[0]+ae[1]*le[1]+ae[2]*le[2]);var ae,le;return O.concat(X)});return new Kt(g,I)}}class Nt{constructor(e,o){this.min=e,this.max=o,this.center=function(h,d,g){return h[0]=.5*d[0],h[1]=.5*d[1],h[2]=.5*d[2],h}([],function(h,d,g){return h[0]=d[0]+g[0],h[1]=d[1]+g[1],h[2]=d[2]+g[2],h}([],this.min,this.max))}quadrant(e){const o=[e%2==0,e<2],h=ne(this.min),d=ne(this.max);for(let g=0;g<o.length;g++)h[g]=o[g]?this.min[g]:this.center[g],d[g]=o[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new Nt(h,d)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const o=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let h=!0;for(let d=0;d<e.planes.length;d++){const g=e.planes[d];let I=0;for(let A=0;A<o.length;A++)a.b2(g,o[A])>=0&&I++;if(I===0)return 0;I!==o.length&&(h=!1)}if(h)return 2;for(let d=0;d<3;d++){let g=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let A=0;A<e.points.length;A++){const O=e.points[A][d]-this.min[d];g=Math.min(g,O),I=Math.max(I,O)}if(I<0||g>this.max[d]-this.min[d])return 0}return 1}}class an{constructor(e=0,o=0,h=0,d=0){if(isNaN(e)||e<0||isNaN(o)||o<0||isNaN(h)||h<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=o,this.left=h,this.right=d}interpolate(e,o,h){return o.top!=null&&e.top!=null&&(this.top=a.y.number(e.top,o.top,h)),o.bottom!=null&&e.bottom!=null&&(this.bottom=a.y.number(e.bottom,o.bottom,h)),o.left!=null&&e.left!=null&&(this.left=a.y.number(e.left,o.left,h)),o.right!=null&&e.right!=null&&(this.right=a.y.number(e.right,o.right,h)),this}getCenter(e,o){const h=a.ac((this.left+e-this.right)/2,0,e),d=a.ac((this.top+o-this.bottom)/2,0,o);return new a.P(h,d)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new an(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Sn=85.051129;class Ln{constructor(e,o,h,d,g){this.tileSize=512,this._renderWorldCopies=g===void 0||!!g,this._minZoom=e||0,this._maxZoom=o||22,this._minPitch=h??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new an,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new Ln(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const o=-a.b3(e,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=function(){var h=new a.A(4);return a.A!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}(),function(h,d,g){var I=d[0],A=d[1],O=d[2],X=d[3],ae=Math.sin(g),le=Math.cos(g);h[0]=I*le+O*ae,h[1]=A*le+X*ae,h[2]=I*-ae+O*le,h[3]=A*-ae+X*le}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const o=a.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const o=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.tileZoom=Math.max(0,Math.floor(o)),this.scale=this.zoomScale(o),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,o,h){this._unmodified=!1,this._edgeInsets.interpolate(e,o,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const o=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(e){const o=[new a.b4(0,e)];if(this._renderWorldCopies){const h=this.pointCoordinate(new a.P(0,0)),d=this.pointCoordinate(new a.P(this.width,0)),g=this.pointCoordinate(new a.P(this.width,this.height)),I=this.pointCoordinate(new a.P(0,this.height)),A=Math.floor(Math.min(h.x,d.x,g.x,I.x)),O=Math.floor(Math.max(h.x,d.x,g.x,I.x)),X=1;for(let ae=A-X;ae<=O+X;ae++)ae!==0&&o.push(new a.b4(ae,e))}return o}coveringTiles(e){var o,h;let d=this.coveringZoomLevel(e);const g=d;if(e.minzoom!==void 0&&d<e.minzoom)return[];e.maxzoom!==void 0&&d>e.maxzoom&&(d=e.maxzoom);const I=this.pointCoordinate(this.getCameraPoint()),A=a.Z.fromLngLat(this.center),O=Math.pow(2,d),X=[O*I.x,O*I.y,0],ae=[O*A.x,O*A.y,0],le=Kt.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d);let be=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(be=d);const Ae=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,Fe=Ve=>({aabb:new Nt([Ve*O,0,0],[(Ve+1)*O,O,0]),zoom:0,x:0,y:0,wrap:Ve,fullyVisible:!1}),Ne=[],$e=[],qe=d,et=e.reparseOverscaled?g:d;if(this._renderWorldCopies)for(let Ve=1;Ve<=3;Ve++)Ne.push(Fe(-Ve)),Ne.push(Fe(Ve));for(Ne.push(Fe(0));Ne.length>0;){const Ve=Ne.pop(),st=Ve.x,ut=Ve.y;let mt=Ve.fullyVisible;if(!mt){const Ht=Ve.aabb.intersects(le);if(Ht===0)continue;mt=Ht===2}const At=e.terrain?X:ae,Dt=Ve.aabb.distanceX(At),Gt=Ve.aabb.distanceY(At),tn=Math.max(Math.abs(Dt),Math.abs(Gt));if(Ve.zoom===qe||tn>Ae+(1<<qe-Ve.zoom)-2&&Ve.zoom>=be){const Ht=qe-Ve.zoom,Lt=X[0]-.5-(st<<Ht),hn=X[1]-.5-(ut<<Ht);$e.push({tileID:new a.S(Ve.zoom===qe?et:Ve.zoom,Ve.wrap,Ve.zoom,st,ut),distanceSq:$([ae[0]-.5-st,ae[1]-.5-ut]),tileDistanceToCamera:Math.sqrt(Lt*Lt+hn*hn)})}else for(let Ht=0;Ht<4;Ht++){const Lt=(st<<1)+Ht%2,hn=(ut<<1)+(Ht>>1),Rn=Ve.zoom+1;let $t=Ve.aabb.quadrant(Ht);if(e.terrain){const Qt=new a.S(Rn,Ve.wrap,Rn,Lt,hn),Fn=e.terrain.getMinMaxElevation(Qt),Er=(o=Fn.minElevation)!==null&&o!==void 0?o:this.elevation,Gn=(h=Fn.maxElevation)!==null&&h!==void 0?h:this.elevation;$t=new Nt([$t.min[0],$t.min[1],Er],[$t.max[0],$t.max[1],Gn])}Ne.push({aabb:$t,zoom:Rn,x:Lt,y:hn,wrap:Ve.wrap,fullyVisible:mt})}}return $e.sort((Ve,st)=>Ve.distanceSq-st.distanceSq).map(Ve=>Ve.tileID)}resize(e,o){this.width=e,this.height=o,this.pixelsToGLUnits=[2/e,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const o=a.ac(e.lat,-85.051129,Sn);return new a.P(a.O(e.lng)*this.worldSize,a.Q(o)*this.worldSize)}unproject(e){return new a.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const o=this.elevation,h=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,e),g=e.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-g))return;const I=h+o-g,A=Math.cos(this._pitch)*this.cameraToCenterDistance/I/a.b5(1,d.lat),O=this.scaleZoom(A/this.tileSize);this._elevation=g,this._center=d,this.zoom=O}setLocationAtPoint(e,o){const h=this.pointCoordinate(o),d=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(e),I=new a.Z(g.x-(h.x-d.x),g.y-(h.y-d.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,o){return o?this.coordinatePoint(this.locationCoordinate(e),o.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,o){return this.coordinateLocation(this.pointCoordinate(e,o))}locationCoordinate(e){return a.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,o){if(o){const be=o.pointCoordinate(e);if(be!=null)return be}const h=[e.x,e.y,0,1],d=[e.x,e.y,1,1];a.af(h,h,this.pixelMatrixInverse),a.af(d,d,this.pixelMatrixInverse);const g=h[3],I=d[3],A=h[1]/g,O=d[1]/I,X=h[2]/g,ae=d[2]/I,le=X===ae?0:(0-X)/(ae-X);return new a.Z(a.y.number(h[0]/g,d[0]/I,le)/this.worldSize,a.y.number(A,O,le)/this.worldSize)}coordinatePoint(e,o=0,h=this.pixelMatrix){const d=[e.x*this.worldSize,e.y*this.worldSize,o,1];return a.af(d,d,h),new a.P(d[0]/d[3],d[1]/d[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new at().extend(this.pointLocation(new a.P(0,e))).extend(this.pointLocation(new a.P(this.width,e))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new at([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Sn])}calculateTileMatrix(e){const o=e.canonical,h=this.worldSize/this.zoomScale(o.z),d=o.x+Math.pow(2,o.z)*e.wrap,g=a.an(new Float64Array(16));return a.J(g,g,[d*h,o.y*h,0]),a.K(g,g,[h/a.X,h/a.X,1]),g}calculatePosMatrix(e,o=!1){const h=e.key,d=o?this._alignedPosMatrixCache:this._posMatrixCache;if(d[h])return d[h];const g=this.calculateTileMatrix(e);return a.L(g,o?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,g),d[h]=new Float32Array(g),d[h]}calculateFogMatrix(e){const o=e.key,h=this._fogMatrixCache;if(h[o])return h[o];const d=this.calculateTileMatrix(e);return a.L(d,this.fogMatrix,d),h[o]=new Float32Array(d),h[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,o){o=a.ac(+o,this.minZoom,this.maxZoom);const h={center:new a.N(e.lng,e.lat),zoom:o};let d=this.lngRange;if(!this._renderWorldCopies&&d===null){const Ve=179.9999999999;d=[-Ve,Ve]}const g=this.tileSize*this.zoomScale(h.zoom);let I=0,A=g,O=0,X=g,ae=0,le=0;const{x:be,y:Ae}=this.size;if(this.latRange){const Ve=this.latRange;I=a.Q(Ve[1])*g,A=a.Q(Ve[0])*g,A-I<Ae&&(ae=Ae/(A-I))}d&&(O=a.b3(a.O(d[0])*g,0,g),X=a.b3(a.O(d[1])*g,0,g),X<O&&(X+=g),X-O<be&&(le=be/(X-O)));const{x:Fe,y:Ne}=this.project.call({worldSize:g},e);let $e,qe;const et=Math.max(le||0,ae||0);if(et){const Ve=new a.P(le?(X+O)/2:Fe,ae?(A+I)/2:Ne);return h.center=this.unproject.call({worldSize:g},Ve).wrap(),h.zoom+=this.scaleZoom(et),h}if(this.latRange){const Ve=Ae/2;Ne-Ve<I&&(qe=I+Ve),Ne+Ve>A&&(qe=A-Ve)}if(d){const Ve=(O+X)/2;let st=Fe;this._renderWorldCopies&&(st=a.b3(Fe,Ve-g/2,Ve+g/2));const ut=be/2;st-ut<O&&($e=O+ut),st+ut>X&&($e=X-ut)}if($e!==void 0||qe!==void 0){const Ve=new a.P($e??Fe,qe??Ne);h.center=this.unproject.call({worldSize:g},Ve).wrap()}return h}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:o,zoom:h}=this.getConstrained(this.center,this.zoom);this.center=o,this.zoom=h,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,o=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let d=a.an(new Float64Array(16));a.K(d,d,[this.width/2,-this.height/2,1]),a.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=a.an(new Float64Array(16)),a.K(d,d,[1,-1,1]),a.J(d,d,[-1,-1,0]),a.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;const g=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this.minElevationForCurrentTile),A=g-I*this._pixelPerMeter/Math.cos(this._pitch),O=I<0?A:g,X=Math.PI/2+this._pitch,ae=this._fov*(.5+e.y/this.height),le=Math.sin(ae)*O/Math.sin(a.ac(Math.PI-X-ae,.01,Math.PI-.01)),be=this.getHorizon(),Ae=2*Math.atan(be/this.cameraToCenterDistance)*(.5+e.y/(2*be)),Fe=Math.sin(Ae)*O/Math.sin(a.ac(Math.PI-X-Ae,.01,Math.PI-.01)),Ne=Math.min(le,Fe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Ne+O),this.nearZ=this.height/50,d=new Float64Array(16),a.b6(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-e.x/this.width,d[9]=2*e.y/this.height,this.projectionMatrix=a.ae(d),a.K(d,d,[1,-1,1]),a.J(d,d,[0,0,-this.cameraToCenterDistance]),a.b7(d,d,this._pitch),a.ad(d,d,this.angle),a.J(d,d,[-o,-h,0]),this.mercatorMatrix=a.K([],d,[this.worldSize,this.worldSize,this.worldSize]),a.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,d),a.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=a.as([],d),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,g,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-o,-h,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,d);const $e=this.width%2/2,qe=this.height%2/2,et=Math.cos(this.angle),Ve=Math.sin(this.angle),st=o-Math.round(o)+et*$e+Ve*qe,ut=h-Math.round(h)+et*qe+Ve*$e,mt=new Float64Array(d);if(a.J(mt,mt,[st>.5?st-1:st,ut>.5?ut-1:ut,0]),this.alignedModelViewProjectionMatrix=mt,d=a.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new a.P(0,0)),o=[e.x*this.worldSize,e.y*this.worldSize,0,1];return a.af(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,e))}getCameraQueryGeometry(e){const o=this.getCameraPoint();if(e.length===1)return[e[0],o];{let h=o.x,d=o.y,g=o.x,I=o.y;for(const A of e)h=Math.min(h,A.x),d=Math.min(d,A.y),g=Math.max(g,A.x),I=Math.max(I,A.y);return[new a.P(h,d),new a.P(g,d),new a.P(g,I),new a.P(h,I),new a.P(h,d)]}}lngLatToCameraDepth(e,o){const h=this.locationCoordinate(e),d=[h.x*this.worldSize,h.y*this.worldSize,o,1];return a.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function pr(y,e){let o,h=!1,d=null,g=null;const I=()=>{d=null,h&&(y.apply(g,o),d=setTimeout(I,e),h=!1)};return(...A)=>(h=!0,g=this,o=A,d||I(),d)}class ar{constructor(e){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let h;return o.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(h=d)}),(h&&h[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(o.length>=3&&!o.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:h,pitch:+(o[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const h=o.join("/");let d=h;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${h}`);let g=window.location.hash.replace(d,"");g.startsWith("#&")?g=g.slice(0,1)+g.slice(2):g==="#"&&(g="");let I=window.location.href.replace(/(#.+)?$/,g);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=pr(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const o=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,d=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,d),I=Math.round(o.lng*g)/g,A=Math.round(o.lat*g)/g,O=this._map.getBearing(),X=this._map.getPitch();let ae="";if(ae+=e?`/${I}/${A}/${h}`:`${h}/${A}/${I}`,(O||X)&&(ae+="/"+Math.round(10*O)/10),X&&(ae+=`/${Math.round(X)}`),this._hashName){const le=this._hashName;let be=!1;const Ae=window.location.hash.slice(1).split("&").map(Fe=>{const Ne=Fe.split("=")[0];return Ne===le?(be=!0,`${Ne}=${ae}`):Fe}).filter(Fe=>Fe);return be||Ae.push(`${le}=${ae}`),`#${Ae.join("&")}`}return`#${ae}`}}const cr={linearity:.3,easing:a.b8(0,0,.3,1)},Ur=a.e({deceleration:2500,maxSpeed:1400},cr),Yr=a.e({deceleration:20,maxSpeed:1400},cr),Jr=a.e({deceleration:1e3,maxSpeed:360},cr),yo=a.e({deceleration:1e3,maxSpeed:90},cr);class Hi{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:C.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,o=C.now();for(;e.length>0&&o-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:g}of this._inertiaBuffer)o.zoom+=g.zoomDelta||0,o.bearing+=g.bearingDelta||0,o.pitch+=g.pitchDelta||0,g.panDelta&&o.pan._add(g.panDelta),g.around&&(o.around=g.around),g.pinchAround&&(o.pinchAround=g.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(o.pan.mag()){const g=Ds(o.pan.mag(),h,a.e({},Ur,e||{}));d.offset=o.pan.mult(g.amount/o.pan.mag()),d.center=this._map.transform.center,bi(d,g)}if(o.zoom){const g=Ds(o.zoom,h,Yr);d.zoom=this._map.transform.zoom+g.amount,bi(d,g)}if(o.bearing){const g=Ds(o.bearing,h,Jr);d.bearing=this._map.transform.bearing+a.ac(g.amount,-179,179),bi(d,g)}if(o.pitch){const g=Ds(o.pitch,h,yo);d.pitch=this._map.transform.pitch+g.amount,bi(d,g)}if(d.zoom||d.bearing){const g=o.pinchAround===void 0?o.around:o.pinchAround;d.around=g?this._map.unproject(g):this._map.getCenter()}return this.clear(),a.e(d,{noMoveStart:!0})}}function bi(y,e){(!y.duration||y.duration<e.duration)&&(y.duration=e.duration,y.easing=e.easing)}function Ds(y,e,o){const{maxSpeed:h,linearity:d,deceleration:g}=o,I=a.ac(y*d/(e/1e3),-h,h),A=Math.abs(I)/(g*d);return{easing:o.easing,duration:1e3*A,amount:I*(A/2)}}class Qr extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,h,d={}){const g=k.mousePos(o.getCanvas(),h),I=o.unproject(g);super(e,a.e({point:g,lngLat:I,originalEvent:h},d)),this._defaultPrevented=!1,this.target=o}}class ro extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,h){const d=e==="touchend"?h.changedTouches:h.touches,g=k.touchPos(o.getCanvasContainer(),d),I=g.map(O=>o.unproject(O)),A=g.reduce((O,X,ae,le)=>O.add(X.div(le.length)),new a.P(0,0));super(e,{points:g,point:A,lngLats:I,lngLat:o.unproject(A),originalEvent:h}),this._defaultPrevented=!1}}class Bc extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,h){super(e,{originalEvent:h}),this._defaultPrevented=!1}}class Nc{constructor(e,o){this._map=e,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Bc(e.type,this._map,e))}mousedown(e,o){return this._mousedownPos=o,this._firePreventable(new Qr(e.type,this._map,e))}mouseup(e){this._map.fire(new Qr(e.type,this._map,e))}click(e,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Qr(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Qr(e.type,this._map,e))}mouseover(e){this._map.fire(new Qr(e.type,this._map,e))}mouseout(e){this._map.fire(new Qr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ro(e.type,this._map,e))}touchmove(e){this._map.fire(new ro(e.type,this._map,e))}touchend(e){this._map.fire(new ro(e.type,this._map,e))}touchcancel(e){this._map.fire(new ro(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hr{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Qr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Qr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Go{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(a.P.convert(e),this._map.terrain)}}class vo{constructor(e,o){this._map=e,this._tr=new Go(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,o){this.isEnabled()&&e.shiftKey&&e.button===0&&(k.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(e,o){if(!this._active)return;const h=o;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const d=this._startPos;this._lastPos=h,this._box||(this._box=k.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const g=Math.min(d.x,h.x),I=Math.max(d.x,h.x),A=Math.min(d.y,h.y),O=Math.max(d.y,h.y);k.setTransform(this._box,`translate(${g}px,${A}px)`),this._box.style.width=I-g+"px",this._box.style.height=O-A+"px"}mouseupWindow(e,o){if(!this._active||e.button!==0)return;const h=this._startPos,d=o;if(this.reset(),k.suppressClick(),h.x!==d.x||h.y!==d.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:e})),{cameraAnimation:g=>g.fitScreenCoordinates(h,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,o){return this._map.fire(new a.k(e,{originalEvent:o}))}}function Gl(y,e){if(y.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${e.length}`);const o={};for(let h=0;h<y.length;h++)o[y[h].identifier]=e[h];return o}class Bs{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,o,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),h.length===this.numTouches&&(this.centroid=function(d){const g=new a.P(0,0);for(const I of d)g._add(I);return g.div(d.length)}(o),this.touches=Gl(h,o)))}touchmove(e,o,h){if(this.aborted||!this.centroid)return;const d=Gl(h,o);for(const g in this.touches){const I=d[g];(!I||I.dist(this.touches[g])>30)&&(this.aborted=!0)}}touchend(e,o,h){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Hl{constructor(e){this.singleTap=new Bs(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,o,h){this.singleTap.touchstart(e,o,h)}touchmove(e,o,h){this.singleTap.touchmove(e,o,h)}touchend(e,o,h){const d=this.singleTap.touchend(e,o,h);if(d){const g=e.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(d)<30;if(g&&I||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class Da{constructor(e){this._tr=new Go(e),this._zoomIn=new Hl({numTouches:1,numTaps:2}),this._zoomOut=new Hl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,o,h){this._zoomIn.touchstart(e,o,h),this._zoomOut.touchstart(e,o,h)}touchmove(e,o,h){this._zoomIn.touchmove(e,o,h),this._zoomOut.touchmove(e,o,h)}touchend(e,o,h){const d=this._zoomIn.touchend(e,o,h),g=this._zoomOut.touchend(e,o,h),I=this._tr;return d?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(d)},{originalEvent:e})}):g?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(g)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class na{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const o=this._moveFunction(...e);if(o.bearingDelta||o.pitchDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(e,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=o.length?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,o){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const d=o.length?o[0]:o;return!this._moved&&d.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(h,d))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&k.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Uc={0:1,2:2};class Ba{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const o=k.mouseButton(e);this._eventButton=o}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(o,h){const d=Uc[h];return o.buttons===void 0||(o.buttons&d)!==d}(e,this._eventButton)}isValidEndEvent(e){return k.mouseButton(e)===this._eventButton}}class Vc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Pu=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=e=>{e.preventDefault()}},cc=({enable:y,clickTolerance:e,bearingDegreesPerPixelMoved:o=.8})=>{const h=new Ba({checkCorrectEvent:d=>k.mouseButton(d)===0&&d.ctrlKey||k.mouseButton(d)===2});return new na({clickTolerance:e,move:(d,g)=>({bearingDelta:(g.x-d.x)*o}),moveStateManager:h,enable:y,assignEvents:Pu})},Ir=({enable:y,clickTolerance:e,pitchDegreesPerPixelMoved:o=-.5})=>{const h=new Ba({checkCorrectEvent:d=>k.mouseButton(d)===0&&d.ctrlKey||k.mouseButton(d)===2});return new na({clickTolerance:e,move:(d,g)=>({pitchDelta:(g.y-d.y)*o}),moveStateManager:h,enable:y,assignEvents:Pu})};class ra{constructor(e,o){this._clickTolerance=e.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,o,h){return this._calculateTransform(e,o,h)}touchmove(e,o,h){if(this._active){if(!this._shouldBePrevented(h.length))return e.preventDefault(),this._calculateTransform(e,o,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,o,h){this._calculateTransform(e,o,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,o,h){h.length>0&&(this._active=!0);const d=Gl(h,o),g=new a.P(0,0),I=new a.P(0,0);let A=0;for(const X in d){const ae=d[X],le=this._touches[X];le&&(g._add(ae),I._add(ae.sub(le)),A++,d[X]=ae)}if(this._touches=d,this._shouldBePrevented(A)||!I.mag())return;const O=I.div(A);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:g.div(A),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ul{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,o,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([o[0],o[1]]))}touchmove(e,o,h){if(!this._firstTwoTouches)return;e.preventDefault();const[d,g]=this._firstTwoTouches,I=ia(h,o,d),A=ia(h,o,g);if(!I||!A)return;const O=this._aroundCenter?null:I.add(A).div(2);return this._move([I,A],O,e)}touchend(e,o,h){if(!this._firstTwoTouches)return;const[d,g]=this._firstTwoTouches,I=ia(h,o,d),A=ia(h,o,g);I&&A||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ia(y,e,o){for(let h=0;h<y.length;h++)if(y[h].identifier===o)return e[h]}function hc(y,e){return Math.log(y/e)/Math.LN2}class Au extends ul{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,o){const h=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(hc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:hc(this._distance,h),pinchAround:o}}}function cl(y,e){return 180*y.angleWith(e)/Math.PI}class Zl extends ul{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,o,h){const d=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:cl(this._vector,d),pinchAround:o}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const o=25/(Math.PI*this._minDiameter)*360,h=cl(e,this._startVector);return Math.abs(h)<o}}function oa(y){return Math.abs(y.y)>Math.abs(y.x)}class hl extends ul{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,o,h){super.touchstart(e,o,h),this._currentTouchCount=h.length}_start(e){this._lastPoints=e,oa(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,o,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const d=e[0].sub(this._lastPoints[0]),g=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,g,h.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(d.y+g.y)/2*-.5}):void 0}gestureBeginsVertically(e,o,h){if(this._valid!==void 0)return this._valid;const d=e.mag()>=2,g=o.mag()>=2;if(!d&&!g)return;if(!d||!g)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const I=e.y>0==o.y>0;return oa(e)&&oa(o)&&I}}const Fh={panStep:100,bearingStep:15,pitchStep:10};class Ho{constructor(e){this._tr=new Go(e);const o=Fh;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let o=0,h=0,d=0,g=0,I=0;switch(e.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:e.shiftKey?h=-1:(e.preventDefault(),g=-1);break;case 39:e.shiftKey?h=1:(e.preventDefault(),g=1);break;case 38:e.shiftKey?d=1:(e.preventDefault(),I=-1);break;case 40:e.shiftKey?d=-1:(e.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(h=0,d=0),{cameraAnimation:A=>{const O=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:fs,zoom:o?Math.round(O.zoom)+o*(e.shiftKey?2:1):O.zoom,bearing:O.bearing+h*this._bearingStep,pitch:O.pitch+d*this._pitchStep,offset:[-g*this._panStep,-I*this._panStep],center:O.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fs(y){return y*(2-y)}const Wl=4.000244140625;class _o{constructor(e,o){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=e,this._tr=new Go(e),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let o=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const h=C.now(),d=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,o!==0&&o%Wl==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(d*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),e.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=e,this._delta-=o,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=k.mousePos(this._map.getCanvas(),e),h=this._tr;this._around=o.y>h.transform.height/2-h.transform.getHorizon()?a.N.convert(this._aroundCenter?h.center:h.unproject(o)):a.N.convert(h.center),this._aroundPoint=h.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>Wl?this._wheelZoomRate:this._defaultZoomRate;let X=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&X!==0&&(X=1/X);const ae=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(ae*X))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,h=this._startZoom,d=this._easing;let g,I=!1;const A=C.now()-this._lastWheelEventTime;if(this._type==="wheel"&&h&&d&&A){const O=Math.min(A/200,1),X=d(O);g=a.y.number(h,o,X),O<1?this._frameId||(this._frameId=!0):I=!0}else g=o,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:g-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let o=a.b9;if(this._prevEase){const h=this._prevEase,d=(C.now()-h.start)/h.duration,g=h.easing(d+.01)-h.easing(d),I=.27/Math.sqrt(g*g+1e-4)*.01,A=Math.sqrt(.0729-I*I);o=a.b8(I,A,.25,1)}return this._prevEase={start:C.now(),duration:e,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class sa{constructor(e,o){this._clickZoom=e,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $c{constructor(e){this._tr=new Go(e),this.reset()}reset(){this._active=!1}dblclick(e,o){return e.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gc{constructor(){this._tap=new Hl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,o,h){if(!this._swipePoint)if(this._tapTime){const d=o[0],g=e.timeStamp-this._tapTime<500,I=this._tapPoint.dist(d)<30;g&&I?h.length>0&&(this._swipePoint=d,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(e,o,h)}touchmove(e,o,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const d=o[0],g=d.y-this._swipePoint.y;return this._swipePoint=d,e.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(e,o,h)}touchend(e,o,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const d=this._tap.touchend(e,o,h);d&&(this._tapTime=e.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dc{constructor(e,o,h){this._el=e,this._mousePan=o,this._touchPan=h}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Oh{constructor(e,o,h){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=o,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class fc{constructor(e,o,h,d){this._el=e,this._touchZoom=o,this._touchRotate=h,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ql{constructor(e,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=k.create("div","maplibregl-cooperative-gesture-screen",e);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=o,this._container.appendChild(d);const g=document.createElement("div");g.className="maplibregl-mobile-message",g.textContent=h,this._container.appendChild(g),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(k.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,o){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:e,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Zo=y=>y.zoom||y.drag||y.pitch||y.rotate;class on extends a.k{}function ps(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class pc{constructor(e,o){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,g)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=d.type==="renderFrame"?void 0:d,A={needsRenderFrame:!1},O={},X={},ae=d.touches,le=ae?this._getMapTouches(ae):void 0,be=le?k.touchPos(this._map.getCanvas(),le):k.mousePos(this._map.getCanvas(),d);for(const{handlerName:Ne,handler:$e,allowed:qe}of this._handlers){if(!$e.isEnabled())continue;let et;this._blockedByActive(X,qe,Ne)?$e.reset():$e[g||d.type]&&(et=$e[g||d.type](d,be,le),this.mergeHandlerResult(A,O,et,Ne,I),et&&et.needsRenderFrame&&this._triggerRenderFrame()),(et||$e.isActive())&&(X[Ne]=$e)}const Ae={};for(const Ne in this._previousActiveHandlers)X[Ne]||(Ae[Ne]=I);this._previousActiveHandlers=X,(Object.keys(Ae).length||ps(A))&&(this._changes.push([A,O,Ae]),this._triggerRenderFrame()),(Object.keys(X).length||ps(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Fe}=A;Fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Fe(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Hi(e),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[d,g,I]of this._listeners)k.addEventListener(d,g,d===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[e,o,h]of this._listeners)k.removeEventListener(e,o,e===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(e){const o=this._map,h=o.getCanvasContainer();this._add("mapEvent",new Nc(o,e));const d=o.boxZoom=new vo(o,e);this._add("boxZoom",d),e.interactive&&e.boxZoom&&d.enable();const g=o.cooperativeGestures=new ql(o,e.cooperativeGestures);this._add("cooperativeGestures",g),e.cooperativeGestures&&g.enable();const I=new Da(o),A=new $c(o);o.doubleClickZoom=new sa(A,I),this._add("tapZoom",I),this._add("clickZoom",A),e.interactive&&e.doubleClickZoom&&o.doubleClickZoom.enable();const O=new Gc;this._add("tapDragZoom",O);const X=o.touchPitch=new hl(o);this._add("touchPitch",X),e.interactive&&e.touchPitch&&o.touchPitch.enable(e.touchPitch);const ae=cc(e),le=Ir(e);o.dragRotate=new Oh(e,ae,le),this._add("mouseRotate",ae,["mousePitch"]),this._add("mousePitch",le,["mouseRotate"]),e.interactive&&e.dragRotate&&o.dragRotate.enable();const be=(({enable:et,clickTolerance:Ve})=>{const st=new Ba({checkCorrectEvent:ut=>k.mouseButton(ut)===0&&!ut.ctrlKey});return new na({clickTolerance:Ve,move:(ut,mt)=>({around:mt,panDelta:mt.sub(ut)}),activateOnStart:!0,moveStateManager:st,enable:et,assignEvents:Pu})})(e),Ae=new ra(e,o);o.dragPan=new dc(h,be,Ae),this._add("mousePan",be),this._add("touchPan",Ae,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&o.dragPan.enable(e.dragPan);const Fe=new Zl,Ne=new Au;o.touchZoomRotate=new fc(h,Ne,Fe,O),this._add("touchRotate",Fe,["touchPan","touchZoom"]),this._add("touchZoom",Ne,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&o.touchZoomRotate.enable(e.touchZoomRotate);const $e=o.scrollZoom=new _o(o,()=>this._triggerRenderFrame());this._add("scrollZoom",$e,["mousePan"]),e.interactive&&e.scrollZoom&&o.scrollZoom.enable(e.scrollZoom);const qe=o.keyboard=new Ho(o);this._add("keyboard",qe),e.interactive&&e.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new Hr(o))}_add(e,o,h){this._handlers.push({handlerName:e,handler:o,allowed:h}),this._handlersById[e]=o}stop(e){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Zo(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,o,h){for(const d in e)if(d!==h&&(!o||o.indexOf(d)<0))return!0;return!1}_getMapTouches(e){const o=[];for(const h of e)this._el.contains(h.target)&&o.push(h);return o}mergeHandlerResult(e,o,h,d,g){if(!h)return;a.e(e,h);const I={handlerName:d,originalEvent:h.originalEvent||g};h.zoomDelta!==void 0&&(o.zoom=I),h.panDelta!==void 0&&(o.drag=I),h.pitchDelta!==void 0&&(o.pitch=I),h.bearingDelta!==void 0&&(o.rotate=I)}_applyChanges(){const e={},o={},h={};for(const[d,g,I]of this._changes)d.panDelta&&(e.panDelta=(e.panDelta||new a.P(0,0))._add(d.panDelta)),d.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(e.around=d.around),d.pinchAround!==void 0&&(e.pinchAround=d.pinchAround),d.noInertia&&(e.noInertia=d.noInertia),a.e(o,g),a.e(h,I);this._updateMapTransform(e,o,h),this._changes=[]}_updateMapTransform(e,o,h){const d=this._map,g=d._getTransformForUpdate(),I=d.terrain;if(!(ps(e)||I&&this._terrainMovement))return this._fireEvents(o,h,!0);let{panDelta:A,zoomDelta:O,bearingDelta:X,pitchDelta:ae,around:le,pinchAround:be}=e;be!==void 0&&(le=be),d._stop(!0),le=le||d.transform.centerPoint;const Ae=g.pointLocation(A?le.sub(A):le);X&&(g.bearing+=X),ae&&(g.pitch+=ae),O&&(g.zoom+=O),I?this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?g.center=g.pointLocation(g.centerPoint.sub(A)):g.setLocationAtPoint(Ae,le):(this._terrainMovement=!0,this._map._elevationFreeze=!0,g.setLocationAtPoint(Ae,le)):g.setLocationAtPoint(Ae,le),d._applyUpdatedTransform(g),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(o,h,!0)}_fireEvents(e,o,h){const d=Zo(this._eventsInProgress),g=Zo(e),I={};for(const le in e){const{originalEvent:be}=e[le];this._eventsInProgress[le]||(I[`${le}start`]=be),this._eventsInProgress[le]=e[le]}!d&&g&&this._fireEvent("movestart",g.originalEvent);for(const le in I)this._fireEvent(le,I[le]);g&&this._fireEvent("move",g.originalEvent);for(const le in e){const{originalEvent:be}=e[le];this._fireEvent(le,be)}const A={};let O;for(const le in this._eventsInProgress){const{handlerName:be,originalEvent:Ae}=this._eventsInProgress[le];this._handlersById[be].isActive()||(delete this._eventsInProgress[le],O=o[be]||Ae,A[`${le}end`]=O)}for(const le in A)this._fireEvent(le,A[le]);const X=Zo(this._eventsInProgress),ae=(d||g)&&!X;if(ae&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const le=this._map._getTransformForUpdate();le.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(le)}if(h&&ae){this._updatingCamera=!0;const le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),be=Ae=>Ae!==0&&-this._bearingSnap<Ae&&Ae<this._bearingSnap;!le||!le.essential&&C.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:O})),be(this._map.getBearing())&&this._map.resetNorth()):(be(le.bearing||this._map.getBearing())&&(le.bearing=0),le.freezeElevation=!0,this._map.easeTo(le,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(e,o){this._map.fire(new a.k(e,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new on("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class dl extends a.E{constructor(e,o){super(),this._renderFrameCallback=()=>{const h=Math.min((C.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=o.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,o){return this.jumpTo({center:e},o)}panBy(e,o,h){return e=a.P.convert(e).mult(-1),this.panTo(this.transform.center,a.e({offset:e},o),h)}panTo(e,o,h){return this.easeTo(a.e({center:e},o),h)}getZoom(){return this.transform.zoom}setZoom(e,o){return this.jumpTo({zoom:e},o),this}zoomTo(e,o,h){return this.easeTo(a.e({zoom:e},o),h)}zoomIn(e,o){return this.zoomTo(this.getZoom()+1,e,o),this}zoomOut(e,o){return this.zoomTo(this.getZoom()-1,e,o),this}getBearing(){return this.transform.bearing}setBearing(e,o){return this.jumpTo({bearing:e},o),this}getPadding(){return this.transform.padding}setPadding(e,o){return this.jumpTo({padding:e},o),this}rotateTo(e,o,h){return this.easeTo(a.e({bearing:e},o),h)}resetNorth(e,o){return this.rotateTo(0,a.e({duration:1e3},e),o),this}resetNorthPitch(e,o){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},e),o),this}snapToNorth(e,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,o):this}getPitch(){return this.transform.pitch}setPitch(e,o){return this.jumpTo({pitch:e},o),this}cameraForBounds(e,o){e=at.convert(e).adjustAntiMeridian();const h=o&&o.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),h,o)}_cameraForBoxAndBearing(e,o,h,d){const g={top:0,bottom:0,right:0,left:0};if(typeof(d=a.e({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const Ht=d.padding;d.padding={top:Ht,bottom:Ht,right:Ht,left:Ht}}d.padding=a.e(g,d.padding);const I=this.transform,A=I.padding,O=new at(e,o),X=I.project(O.getNorthWest()),ae=I.project(O.getNorthEast()),le=I.project(O.getSouthEast()),be=I.project(O.getSouthWest()),Ae=a.ba(-h),Fe=X.rotate(Ae),Ne=ae.rotate(Ae),$e=le.rotate(Ae),qe=be.rotate(Ae),et=new a.P(Math.max(Fe.x,Ne.x,qe.x,$e.x),Math.max(Fe.y,Ne.y,qe.y,$e.y)),Ve=new a.P(Math.min(Fe.x,Ne.x,qe.x,$e.x),Math.min(Fe.y,Ne.y,qe.y,$e.y)),st=et.sub(Ve),ut=(I.width-(A.left+A.right+d.padding.left+d.padding.right))/st.x,mt=(I.height-(A.top+A.bottom+d.padding.top+d.padding.bottom))/st.y;if(mt<0||ut<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const At=Math.min(I.scaleZoom(I.scale*Math.min(ut,mt)),d.maxZoom),Dt=a.P.convert(d.offset),Gt=new a.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(a.ba(h)),tn=Dt.add(Gt).mult(I.scale/I.zoomScale(At));return{center:I.unproject(X.add(le).div(2).sub(tn)),zoom:At,bearing:h}}fitBounds(e,o,h){return this._fitInternal(this.cameraForBounds(e,o),o,h)}fitScreenCoordinates(e,o,h,d,g){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(e)),this.transform.pointLocation(a.P.convert(o)),h,d),d,g)}_fitInternal(e,o,h){return e?(delete(o=a.e(e,o)).padding,o.linear?this.easeTo(o,h):this.flyTo(o,h)):this}jumpTo(e,o){this.stop();const h=this._getTransformForUpdate();let d=!1,g=!1,I=!1;return"zoom"in e&&h.zoom!==+e.zoom&&(d=!0,h.zoom=+e.zoom),e.center!==void 0&&(h.center=a.N.convert(e.center)),"bearing"in e&&h.bearing!==+e.bearing&&(g=!0,h.bearing=+e.bearing),"pitch"in e&&h.pitch!==+e.pitch&&(I=!0,h.pitch=+e.pitch),e.padding==null||h.isPaddingEqual(e.padding)||(h.padding=e.padding),this._applyUpdatedTransform(h),this.fire(new a.k("movestart",o)).fire(new a.k("move",o)),d&&this.fire(new a.k("zoomstart",o)).fire(new a.k("zoom",o)).fire(new a.k("zoomend",o)),g&&this.fire(new a.k("rotatestart",o)).fire(new a.k("rotate",o)).fire(new a.k("rotateend",o)),I&&this.fire(new a.k("pitchstart",o)).fire(new a.k("pitch",o)).fire(new a.k("pitchend",o)),this.fire(new a.k("moveend",o))}calculateCameraOptionsFromTo(e,o,h,d=0){const g=a.Z.fromLngLat(e,o),I=a.Z.fromLngLat(h,d),A=I.x-g.x,O=I.y-g.y,X=I.z-g.z,ae=Math.hypot(A,O,X);if(ae===0)throw new Error("Can't calculate camera options with same From and To");const le=Math.hypot(A,O),be=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ae/this.transform.tileSize),Ae=180*Math.atan2(A,-O)/Math.PI;let Fe=180*Math.acos(le/ae)/Math.PI;return Fe=X<0?90-Fe:90+Fe,{center:I.toLngLat(),zoom:be,pitch:Fe,bearing:Ae}}easeTo(e,o){var h;this._stop(!1,e.easeId),((e=a.e({offset:[0,0],duration:500,easing:a.b9},e)).animate===!1||!e.essential&&C.prefersReducedMotion)&&(e.duration=0);const d=this._getTransformForUpdate(),g=d.zoom,I=d.bearing,A=d.pitch,O=d.padding,X="bearing"in e?this._normalizeBearing(e.bearing,I):I,ae="pitch"in e?+e.pitch:A,le="padding"in e?e.padding:d.padding,be=a.P.convert(e.offset);let Ae=d.centerPoint.add(be);const Fe=d.pointLocation(Ae),{center:Ne,zoom:$e}=d.getConstrained(a.N.convert(e.center||Fe),(h=e.zoom)!==null&&h!==void 0?h:g);this._normalizeCenter(Ne,d);const qe=d.project(Fe),et=d.project(Ne).sub(qe),Ve=d.zoomScale($e-g);let st,ut;e.around&&(st=a.N.convert(e.around),ut=d.locationPoint(st));const mt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$e!==g,this._rotating=this._rotating||I!==X,this._pitching=this._pitching||ae!==A,this._padding=!d.isPaddingEqual(le),this._easeId=e.easeId,this._prepareEase(o,e.noMoveStart,mt),this.terrain&&this._prepareElevation(Ne),this._ease(At=>{if(this._zooming&&(d.zoom=a.y.number(g,$e,At)),this._rotating&&(d.bearing=a.y.number(I,X,At)),this._pitching&&(d.pitch=a.y.number(A,ae,At)),this._padding&&(d.interpolatePadding(O,le,At),Ae=d.centerPoint.add(be)),this.terrain&&!e.freezeElevation&&this._updateElevation(At),st)d.setLocationAtPoint(st,ut);else{const Dt=d.zoomScale(d.zoom-g),Gt=$e>g?Math.min(2,Ve):Math.max(.5,Ve),tn=Math.pow(Gt,1-At),Ht=d.unproject(qe.add(et.mult(At*tn)).mult(Dt));d.setLocationAtPoint(d.renderWorldCopies?Ht.wrap():Ht,Ae)}this._applyUpdatedTransform(d),this._fireMoveEvents(o)},At=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o,At)},e),this}_prepareEase(e,o,h={}){this._moving=!0,o||h.moving||this.fire(new a.k("movestart",e)),this._zooming&&!h.zooming&&this.fire(new a.k("zoomstart",e)),this._rotating&&!h.rotating&&this.fire(new a.k("rotatestart",e)),this._pitching&&!h.pitching&&this.fire(new a.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&o!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(h-(o-(h*e+this._elevationStart))/(1-e)),this._elevationTarget=o}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const o=e.getCameraPosition(),h=this.terrain.getElevationForLngLatZoom(o.lngLat,e.zoom);if(o.altitude<h){const d=this.calculateCameraOptionsFromTo(o.lngLat,h,e.center,e.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(e){const o=[];if(this.terrain&&o.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&o.push(d=>this.transformCameraUpdate(d)),!o.length)return;const h=e.clone();for(const d of o){const g=h.clone(),{center:I,zoom:A,pitch:O,bearing:X,elevation:ae}=d(g);I&&(g.center=I),A!==void 0&&(g.zoom=A),O!==void 0&&(g.pitch=O),X!==void 0&&(g.bearing=X),ae!==void 0&&(g.elevation=ae),h.apply(g)}this.transform.apply(h)}_fireMoveEvents(e){this.fire(new a.k("move",e)),this._zooming&&this.fire(new a.k("zoom",e)),this._rotating&&this.fire(new a.k("rotate",e)),this._pitching&&this.fire(new a.k("pitch",e))}_afterEase(e,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const h=this._zooming,d=this._rotating,g=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new a.k("zoomend",e)),d&&this.fire(new a.k("rotateend",e)),g&&this.fire(new a.k("pitchend",e)),this.fire(new a.k("moveend",e))}flyTo(e,o){var h;if(!e.essential&&C.prefersReducedMotion){const Qt=a.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Qt,o)}this.stop(),e=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},e);const d=this._getTransformForUpdate(),g=d.zoom,I=d.bearing,A=d.pitch,O=d.padding,X="bearing"in e?this._normalizeBearing(e.bearing,I):I,ae="pitch"in e?+e.pitch:A,le="padding"in e?e.padding:d.padding,be=a.P.convert(e.offset);let Ae=d.centerPoint.add(be);const Fe=d.pointLocation(Ae),{center:Ne,zoom:$e}=d.getConstrained(a.N.convert(e.center||Fe),(h=e.zoom)!==null&&h!==void 0?h:g);this._normalizeCenter(Ne,d);const qe=d.zoomScale($e-g),et=d.project(Fe),Ve=d.project(Ne).sub(et);let st=e.curve;const ut=Math.max(d.width,d.height),mt=ut/qe,At=Ve.mag();if("minZoom"in e){const Qt=a.ac(Math.min(e.minZoom,g,$e),d.minZoom,d.maxZoom),Fn=ut/d.zoomScale(Qt-g);st=Math.sqrt(Fn/At*2)}const Dt=st*st;function Gt(Qt){const Fn=(mt*mt-ut*ut+(Qt?-1:1)*Dt*Dt*At*At)/(2*(Qt?mt:ut)*Dt*At);return Math.log(Math.sqrt(Fn*Fn+1)-Fn)}function tn(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function Ht(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const Lt=Gt(!1);let hn=function(Qt){return Ht(Lt)/Ht(Lt+st*Qt)},Rn=function(Qt){return ut*((Ht(Lt)*(tn(Fn=Lt+st*Qt)/Ht(Fn))-tn(Lt))/Dt)/At;var Fn},$t=(Gt(!0)-Lt)/st;if(Math.abs(At)<1e-6||!isFinite($t)){if(Math.abs(ut-mt)<1e-6)return this.easeTo(e,o);const Qt=mt<ut?-1:1;$t=Math.abs(Math.log(mt/ut))/st,Rn=()=>0,hn=Fn=>Math.exp(Qt*st*Fn)}return e.duration="duration"in e?+e.duration:1e3*$t/("screenSpeed"in e?+e.screenSpeed/st:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=I!==X,this._pitching=ae!==A,this._padding=!d.isPaddingEqual(le),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(Ne),this._ease(Qt=>{const Fn=Qt*$t,Er=1/hn(Fn);d.zoom=Qt===1?$e:g+d.scaleZoom(Er),this._rotating&&(d.bearing=a.y.number(I,X,Qt)),this._pitching&&(d.pitch=a.y.number(A,ae,Qt)),this._padding&&(d.interpolatePadding(O,le,Qt),Ae=d.centerPoint.add(be)),this.terrain&&!e.freezeElevation&&this._updateElevation(Qt);const Gn=Qt===1?Ne:d.unproject(et.add(Ve.mult(Rn(Fn))).mult(Er));d.setLocationAtPoint(d.renderWorldCopies?Gn.wrap():Gn,Ae),this._applyUpdatedTransform(d),this._fireMoveEvents(o)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,o){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,o)}return e||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(e,o,h){h.animate===!1||h.duration===0?(e(1),o()):(this._easeStart=C.now(),this._easeOptions=h,this._onEaseFrame=e,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,o){e=a.b3(e,-180,180);const h=Math.abs(e-o);return Math.abs(e-360-o)<h&&(e-=360),Math.abs(e+360-o)<h&&(e+=360),e}_normalizeCenter(e,o){if(!o.renderWorldCopies||o.lngRange)return;const h=e.lng-o.center.lng;e.lng+=h>180?-360:h<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const io={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ns{constructor(e=io){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,o){const h=this._map._getUIString(`AttributionControl.${o}`);e.title=h,e.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}const o=this._map.style.sourceCaches;for(const d in o){const g=o[d];if(g.used||g.usedForTerrain){const I=g.getSource();I.attribution&&e.indexOf(I.attribution)<0&&e.push(I.attribution)}}e=e.filter(d=>String(d).trim()),e.sort((d,g)=>d.length-g.length),e=e.filter((d,g)=>{for(let I=g+1;I<e.length;I++)if(e[I].indexOf(d)>=0)return!1;return!0});const h=e.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,e.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ms{constructor(e={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const h=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl");const o=k.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Yn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const o=++this._id;return this._queue.push({callback:e,id:o,cancelled:!1}),o}remove(e){const o=this._currentlyRunning,h=o?this._queue.concat(o):this._queue;for(const d of h)if(d.id===e)return void(d.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const h of o)if(!h.cancelled&&(h.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Hc=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Cd extends a.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,o){this.sourceCache.update(e,o),this._renderableTilesKeys=[];const h={};for(const d of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o}))h[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),a.aP(d.posMatrix,0,a.X,0,a.X,0,1),this._tiles[d.key]=new ft(d,this.tileSize));for(const d in this._tiles)h[d]||delete this._tiles[d]}freeRtt(e){for(const o in this._tiles){const h=this._tiles[o];(!e||h.tileID.equals(e)||h.tileID.isChildOf(e)||e.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const o={};for(const h of this._renderableTilesKeys){const d=this._tiles[h].tileID;if(d.canonical.equals(e.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16),a.aP(g.posMatrix,0,a.X,0,a.X,0,1),o[h]=g}else if(d.canonical.isChildOf(e.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16);const I=d.canonical.z-e.canonical.z,A=d.canonical.x-(d.canonical.x>>I<<I),O=d.canonical.y-(d.canonical.y>>I<<I),X=a.X>>I;a.aP(g.posMatrix,0,X,0,X,0,1),a.J(g.posMatrix,g.posMatrix,[-A*X,-O*X,0]),o[h]=g}else if(e.canonical.isChildOf(d.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16);const I=e.canonical.z-d.canonical.z,A=e.canonical.x-(e.canonical.x>>I<<I),O=e.canonical.y-(e.canonical.y>>I<<I),X=a.X>>I;a.aP(g.posMatrix,0,a.X,0,a.X,0,1),a.J(g.posMatrix,g.posMatrix,[A*X,O*X,0]),a.K(g.posMatrix,g.posMatrix,[1/2**I,1/2**I,0]),o[h]=g}}return o}getSourceTile(e,o){const h=this.sourceCache._source;let d=e.overscaledZ-this.deltaZoom;if(d>h.maxzoom&&(d=h.maxzoom),d<h.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(d).key);let g=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!g||!g.dem)&&o)for(;d>=h.minzoom&&(!g||!g.dem);)g=this.sourceCache.getTileByID(e.scaledTo(d--).key);return g}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter(o=>o.timeAdded>=e)}}class aa{constructor(e,o,h){this.painter=e,this.sourceCache=new Cd(o),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,o,h,d=a.X){var g;if(!(o>=0&&o<d&&h>=0&&h<d))return 0;const I=this.getTerrainData(e),A=(g=I.tile)===null||g===void 0?void 0:g.dem;if(!A)return 0;const O=function(Fe,Ne,$e){var qe=Ne[0],et=Ne[1];return Fe[0]=$e[0]*qe+$e[4]*et+$e[12],Fe[1]=$e[1]*qe+$e[5]*et+$e[13],Fe}([],[o/d*a.X,h/d*a.X],I.u_terrain_matrix),X=[O[0]*A.dim,O[1]*A.dim],ae=Math.floor(X[0]),le=Math.floor(X[1]),be=X[0]-ae,Ae=X[1]-le;return A.get(ae,le)*(1-be)*(1-Ae)+A.get(ae+1,le)*be*(1-Ae)+A.get(ae,le+1)*(1-be)*Ae+A.get(ae+1,le+1)*be*Ae}getElevationForLngLatZoom(e,o){if(!a.bb(o,e.wrap()))return 0;const{tileID:h,mercatorX:d,mercatorY:g}=this._getOverscaledTileIDFromLngLatZoom(e,o);return this.getElevation(h,d%a.X,g%a.X,a.X)}getElevation(e,o,h,d=a.X){return this.getDEMElevation(e,o,h,d)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const d=this.painter.context,g=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new K(d,g,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new K(d,new a.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const o=this.sourceCache.getSourceTile(e,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const d=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new K(d,o.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),o.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const h=o&&o+o.tileID.key+e.key;if(h&&!this._demMatrixCache[h]){const d=this.sourceCache.sourceCache._source.maxzoom;let g=e.canonical.z-o.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=d?g=e.canonical.z-d:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=e.canonical.x-(e.canonical.x>>g<<g),A=e.canonical.y-(e.canonical.y>>g<<g),O=a.bc(new Float64Array(16),[1/(a.X<<g),1/(a.X<<g),0]);a.J(O,O,[I*a.X,A*a.X,0]),this._demMatrixCache[e.key]={matrix:O,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(e){const o=this.painter,h=o.width/devicePixelRatio,d=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new K(o.context,{width:h,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new K(o.context,{width:h,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(h,d,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,h,d))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let g=0,I=0;g<this._coordsTextureSize;g++)for(let A=0;A<this._coordsTextureSize;A++,I+=4)o[I+0]=255&A,o[I+1]=255&g,o[I+2]=A>>8<<4|g>>8,o[I+3]=0;const h=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),d=new K(e,h,e.gl.RGBA,{premultiply:!1});return d.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),h=this.painter.context,d=h.gl,g=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(g,A-I-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),h.bindFramebuffer.set(null);const O=o[0]+(o[2]>>4<<8),X=o[1]+((15&o[2])<<8),ae=this.coordsIndex[255-o[3]],le=ae&&this.sourceCache.getTileByID(ae);if(!le)return null;const be=this._coordsTextureSize,Ae=(1<<le.tileID.canonical.z)*be;return new a.Z((le.tileID.canonical.x*be+O)/Ae+le.tileID.wrap,(le.tileID.canonical.y*be+X)/Ae,this.getElevation(le.tileID,O,X,be))}depthAtPoint(e){const o=new Uint8Array(4),h=this.painter.context,d=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),h.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,o=new a.bd,h=new a.aY,d=this.meshSize,g=a.X/d,I=d*d;for(let le=0;le<=d;le++)for(let be=0;be<=d;be++)o.emplaceBack(be*g,le*g,0);for(let le=0;le<I;le+=d+1)for(let be=0;be<d;be++)h.emplaceBack(be+le,d+be+le+1,d+be+le+2),h.emplaceBack(be+le,d+be+le+2,be+le+1);const A=o.length,O=A+2*(d+1);for(const le of[0,1])for(let be=0;be<=d;be++)for(const Ae of[0,1])o.emplaceBack(be*g,le*a.X,Ae);for(let le=0;le<2*d;le+=2)h.emplaceBack(O+le,O+le+1,O+le+3),h.emplaceBack(O+le,O+le+3,O+le+2),h.emplaceBack(A+le,A+le+3,A+le+1),h.emplaceBack(A+le,A+le+2,A+le+3);const X=o.length,ae=X+2*(d+1);for(const le of[0,1])for(let be=0;be<=d;be++)for(const Ae of[0,1])o.emplaceBack(le*a.X,be*g,Ae);for(let le=0;le<2*d;le+=2)h.emplaceBack(X+le,X+le+1,X+le+3),h.emplaceBack(X+le,X+le+3,X+le+2),h.emplaceBack(ae+le,ae+le+3,ae+le+1),h.emplaceBack(ae+le,ae+le+2,ae+le+3);return this._mesh=new We(e.createVertexBuffer(o,Hc.members),e.createIndexBuffer(h),a.a0.simpleSegment(0,0,o.length,h.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*a.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,o){var h;const{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(e,o);return(h=this.getMinMaxElevation(d).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(e){const o=this.getTerrainData(e).tile,h={minElevation:null,maxElevation:null};return o&&o.dem&&(h.minElevation=o.dem.min*this.exaggeration,h.maxElevation=o.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(e,o){const h=a.Z.fromLngLat(e.wrap()),d=(1<<o)*a.X,g=h.x*d,I=h.y*d,A=Math.floor(g/a.X),O=Math.floor(I/a.X);return{tileID:new a.S(o,0,o,A,O),mercatorX:g,mercatorY:I}}}class Mu{constructor(e,o,h){this._context=e,this._size=o,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new K(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(h.texture),{id:e,fbo:o,texture:h,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>e.id!==o),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const gs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ku{constructor(e,o){this.painter=e,this.terrain=o,this.pool=new Mu(e.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(h=>!e._layers[h].isHidden(o)),this._coordsDescendingInv={};for(const h in e.sourceCaches){this._coordsDescendingInv[h]={};const d=e.sourceCaches[h].getVisibleCoordinates();for(const g of d){const I=this.terrain.sourceCache.getTerrainCoords(g);for(const A in I)this._coordsDescendingInv[h][A]||(this._coordsDescendingInv[h][A]=[]),this._coordsDescendingInv[h][A].push(I[A])}}this._coordsDescendingInvStr={};for(const h of e._order){const d=e._layers[h],g=d.source;if(gs[d.type]&&!this._coordsDescendingInvStr[g]){this._coordsDescendingInvStr[g]={};for(const I in this._coordsDescendingInv[g])this._coordsDescendingInvStr[g][I]=this._coordsDescendingInv[g][I].map(A=>A.key).sort().join()}}for(const h of this._renderableTiles)for(const d in this._coordsDescendingInvStr){const g=this._coordsDescendingInvStr[d][h.tileID.key];g&&g!==h.rttCoords[d]&&(h.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const o=e.type,h=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(gs[o]&&(this._prevType&&gs[this._prevType]||this._stacks.push([]),this._prevType=o,this._stacks[this._stacks.length-1].push(e.id),!d))return!0;if(gs[this._prevType]||gs[o]&&d){this._prevType=o;const g=this._stacks.length-1,I=this._stacks[g]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Ie(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[g]){const X=this.pool.getObjectForId(A.rtt[g].id);if(X.stamp===A.rtt[g].stamp){this.pool.useObject(X);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),A.rtt[g]={id:O.id,stamp:O.stamp},h.context.bindFramebuffer.set(O.fbo.framebuffer),h.context.clear({color:a.aM.transparent,stencil:0}),h.currentStencilSource=void 0;for(let X=0;X<I.length;X++){const ae=h.style._layers[I[X]],le=ae.source?this._coordsDescendingInv[ae.source][A.tileID.key]:[A.tileID];h.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),h._renderTileClippingMasks(ae,le),h.renderLayer(h,h.style.sourceCaches[ae.source],ae,le),ae.source&&(A.rttCoords[ae.source]=this._coordsDescendingInvStr[ae.source][A.tileID.key])}}return Ie(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),gs[o]}return!1}}const zu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},fl=L,Na={hash:!1,interactive:!0,bearingSnap:7,attributionControl:io,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Cr=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},kr={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ua{constructor(e,o,h=!1){this.mousedown=I=>{this.startMouse(a.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),k.mousePos(this.element,I)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,k.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),k.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const d=e.dragRotate._mouseRotate.getClickTolerance(),g=e.dragRotate._mousePitch.getClickTolerance();this.element=o,this.mouseRotate=cc({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:A,bearingDegreesPerPixelMoved:O=.8})=>{const X=new Vc;return new na({clickTolerance:A,move:(ae,le)=>({bearingDelta:(le.x-ae.x)*O}),moveStateManager:X,enable:I,assignEvents:Cr})})({clickTolerance:d,enable:!0}),this.map=e,h&&(this.mousePitch=Ir({clickTolerance:g,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:A,pitchDegreesPerPixelMoved:O=-.5})=>{const X=new Vc;return new na({clickTolerance:A,move:(ae,le)=>({pitchDelta:(le.y-ae.y)*O}),moveStateManager:X,enable:I,assignEvents:Cr})})({clickTolerance:g,enable:!0})),k.addEventListener(o,"mousedown",this.mousedown),k.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(o,"touchcancel",this.reset)}startMouse(e,o){this.mouseRotate.dragStart(e,o),this.mousePitch&&this.mousePitch.dragStart(e,o),k.disableDrag()}startTouch(e,o){this.touchRotate.dragStart(e,o),this.touchPitch&&this.touchPitch.dragStart(e,o),k.disableDrag()}moveMouse(e,o){const h=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(e,o)||{};if(d&&h.setBearing(h.getBearing()+d),this.mousePitch){const{pitchDelta:g}=this.mousePitch.dragMove(e,o)||{};g&&h.setPitch(h.getPitch()+g)}}moveTouch(e,o){const h=this.map,{bearingDelta:d}=this.touchRotate.dragMove(e,o)||{};if(d&&h.setBearing(h.getBearing()+d),this.touchPitch){const{pitchDelta:g}=this.touchPitch.dragMove(e,o)||{};g&&h.setPitch(h.getPitch()+g)}}off(){const e=this.element;k.removeEventListener(e,"mousedown",this.mousedown),k.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend),k.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend)}}let Sr;function tr(y,e,o){const h=new a.N(y.lng,y.lat);if(y=new a.N(y.lng,y.lat),e){const d=new a.N(y.lng-360,y.lat),g=new a.N(y.lng+360,y.lat),I=o.locationPoint(y).distSqr(e);o.locationPoint(d).distSqr(e)<I?y=d:o.locationPoint(g).distSqr(e)<I&&(y=g)}for(;Math.abs(y.lng-o.center.lng)>180;){const d=o.locationPoint(y);if(d.x>=0&&d.y>=0&&d.x<=o.width&&d.y<=o.height)break;y.lng>o.center.lng?y.lng-=360:y.lng+=360}return y.lng!==h.lng&&o.locationPoint(y).y>o.height/2-o.getHorizon()?y:h}const Wo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function la(y,e,o){const h=y.classList;for(const d in Wo)h.remove(`maplibregl-${o}-anchor-${d}`);h.add(`maplibregl-${o}-anchor-${e}`)}class ji extends a.E{constructor(e){if(super(),this._onKeyPress=o=>{const h=o.code,d=o.charCode||o.keyCode;h!=="Space"&&h!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=o=>{const h=o.originalEvent.target,d=this._element;this._popup&&(h===d||d.contains(h))&&this.togglePopup()},this._update=o=>{var h;if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?tr(this._lngLat,this._flatPos,this._map.transform):(h=this._lngLat)===null||h===void 0?void 0:h.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${Wo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${g}`),C.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=a.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div");const o=k.createNS("http://www.w3.org/2000/svg","svg"),h=41,d=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${h}px`),o.setAttributeNS(null,"width",`${d}px`),o.setAttributeNS(null,"viewBox",`0 0 ${d} ${h}`);const g=k.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");const I=k.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const A=k.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const qe of O){const et=k.createNS("http://www.w3.org/2000/svg","ellipse");et.setAttributeNS(null,"opacity","0.04"),et.setAttributeNS(null,"cx","10.5"),et.setAttributeNS(null,"cy","5.80029008"),et.setAttributeNS(null,"rx",qe.rx),et.setAttributeNS(null,"ry",qe.ry),A.appendChild(et)}const X=k.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"fill",this._color);const ae=k.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),X.appendChild(ae);const le=k.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"fill","#000000");const be=k.createNS("http://www.w3.org/2000/svg","path");be.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),le.appendChild(be);const Ae=k.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");const Fe=k.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ne=k.createNS("http://www.w3.org/2000/svg","circle");Ne.setAttributeNS(null,"fill","#000000"),Ne.setAttributeNS(null,"opacity","0.25"),Ne.setAttributeNS(null,"cx","5.5"),Ne.setAttributeNS(null,"cy","5.5"),Ne.setAttributeNS(null,"r","5.4999962");const $e=k.createNS("http://www.w3.org/2000/svg","circle");$e.setAttributeNS(null,"fill","#FFFFFF"),$e.setAttributeNS(null,"cx","5.5"),$e.setAttributeNS(null,"cy","5.5"),$e.setAttributeNS(null,"r","5.4999962"),Fe.appendChild(Ne),Fe.appendChild($e),I.appendChild(A),I.appendChild(X),I.appendChild(le),I.appendChild(Ae),I.appendChild(Fe),o.appendChild(I),o.setAttributeNS(null,"height",h*this._scale+"px"),o.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(o),this._offset=a.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),la(this._element,this._anchor,"marker"),e&&e.className)for(const o of e.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=a.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const d=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var o,h;if(!(!((o=this._map)===null||o===void 0)&&o.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const d=this._map,g=d.terrain.depthAtPoint(this._pos),I=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,I)-g<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/d.transform._pixelPerMeter,O=Math.sin(d.getPitch()*Math.PI/180)*A,X=d.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),ae=d.transform.lngLatToCameraDepth(this._lngLat,I+O)-X>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&ae&&this._popup.remove(),this._element.style.opacity=ae?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=a.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,o){return e===void 0&&o===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const Ru={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Xl=0,Kl=!1;const Oo={maxWidth:100,unit:"metric"};function Yl(y,e,o){const h=o&&o.maxWidth||100,d=y._container.clientHeight/2,g=y.unproject([0,d]),I=y.unproject([h,d]),A=g.distanceTo(I);if(o&&o.unit==="imperial"){const O=3.2808*A;O>5280?sn(e,h,O/5280,y._getUIString("ScaleControl.Miles")):sn(e,h,O,y._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?sn(e,h,A/1852,y._getUIString("ScaleControl.NauticalMiles")):A>=1e3?sn(e,h,A/1e3,y._getUIString("ScaleControl.Kilometers")):sn(e,h,A,y._getUIString("ScaleControl.Meters"))}function sn(y,e,o,h){const d=function(g){const I=Math.pow(10,`${Math.floor(g)}`.length-1);let A=g/I;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(O){const X=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*X)/X}(A),I*A}(o);y.style.width=e*(d/o)+"px",y.innerHTML=`${d}&nbsp;${h}`}const En={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Jl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fu(y){if(y){if(typeof y=="number"){const e=Math.round(Math.abs(y)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,y),"top-left":new a.P(e,e),"top-right":new a.P(-e,e),bottom:new a.P(0,-y),"bottom-left":new a.P(e,-e),"bottom-right":new a.P(-e,-e),left:new a.P(y,0),right:new a.P(-y,0)}}if(y instanceof a.P||Array.isArray(y)){const e=a.P.convert(y);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:a.P.convert(y.center||[0,0]),top:a.P.convert(y.top||[0,0]),"top-left":a.P.convert(y["top-left"]||[0,0]),"top-right":a.P.convert(y["top-right"]||[0,0]),bottom:a.P.convert(y.bottom||[0,0]),"bottom-left":a.P.convert(y["bottom-left"]||[0,0]),"bottom-right":a.P.convert(y["bottom-right"]||[0,0]),left:a.P.convert(y.left||[0,0]),right:a.P.convert(y.right||[0,0])}}return Fu(new a.P(0,0))}const Zc=L;w.AJAXError=a.bh,w.Evented=a.E,w.LngLat=a.N,w.MercatorCoordinate=a.Z,w.Point=a.P,w.addProtocol=a.bi,w.config=a.a,w.removeProtocol=a.bj,w.AttributionControl=Ns,w.BoxZoomHandler=vo,w.CanvasSource=ct,w.CooperativeGesturesHandler=ql,w.DoubleClickZoomHandler=sa,w.DragPanHandler=dc,w.DragRotateHandler=Oh,w.EdgeInsets=an,w.FullscreenControl=class extends a.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var e;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=o==null?void 0:o.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},w.GeoJSONSource=G,w.GeolocateControl=class extends a.E{constructor(y){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const o=new a.N(e.coords.longitude,e.coords.latitude),h=e.coords.accuracy,d=this._map.getBearing(),g=a.e({bearing:d},this.options.fitBoundsOptions),I=at.fromLngLat(o,h);this._map.fitBounds(I,g,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const o=new a.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&Kl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ji({element:this._dotElement}),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ji({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))})}},this.options=a.e({},Ru,y)}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(e=!1){if(Sr!==void 0&&!e)return Sr;if(window.navigator.permissions===void 0)return Sr=!!window.navigator.geolocation,Sr;try{Sr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Sr=!!window.navigator.geolocation}return Sr})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Xl=0,Kl=!1}_isOutOfMapMaxBounds(y){const e=this._map.getMaxBounds(),o=y.coords;return e&&(o.longitude<e.getWest()||o.longitude>e.getEast()||o.latitude<e.getSouth()||o.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),e=y.getSouthEast(),o=y.getNorthEast(),h=e.distanceTo(o),d=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xl--,Kl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Xl++,Xl>1?(y={maximumAge:6e5,timeout:0},Kl=!0):(y=this.options.positionOptions,Kl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},w.Hash=ar,w.ImageSource=Ce,w.KeyboardHandler=Ho,w.LngLatBounds=at,w.LogoControl=ms,w.Map=class extends dl{constructor(y){a.bf.mark(a.bg.create);const e=Object.assign(Object.assign({},Na),y);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ln(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Yn,this._controls=[],this._mapId=a.a4(),this._contextLost=o=>{o.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},zu),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=_e.addThrottleControl(()=>this.isMoving()),this._requestManager=new Me(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;const h=pr(d=>{this._trackResize&&!this._removed&&(this.resize(d),this.redraw())},50);this._resizeObserver=new ResizeObserver(d=>{o?h(d):o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new pc(this,e),this._hash=e.hash&&new ar(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,a.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Ns(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new ms,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new a.k(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new a.k(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new a.k("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(y,e){if(e===void 0&&(e=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=y.onAdd(this);this._controls.push(y);const h=this._controlPositions[e];return e.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(y);return e>-1&&this._controls.splice(e,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,e,o,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,e,o,h)}resize(y){var e;const o=this._containerDimensions(),h=o[0],d=o[1],g=this._getClampedPixelRatio(h,d);if(this._resizeCanvas(h,d,g),this.painter.resize(h,d,g),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const O=this._getClampedPixelRatio(h,d);this._resizeCanvas(h,d,O),this.painter.resize(h,d,O)}this.transform.resize(h,d),(e=this._requestedCameraState)===null||e===void 0||e.resize(h,d);const I=!this._moving;return I&&(this.stop(),this.fire(new a.k("movestart",y)).fire(new a.k("move",y))),this.fire(new a.k("resize",y)),I&&this.fire(new a.k("moveend",y)),this}_getClampedPixelRatio(y,e){const{0:o,1:h}=this._maxCanvasSize,d=this.getPixelRatio(),g=y*d,I=e*d;return Math.min(g>o?o/g:1,I>h?h/I:1)*d}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(at.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(a.N.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(a.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,e,o){if(y==="mouseenter"||y==="mouseover"){let h=!1;return{layers:e,listener:o,delegates:{mousemove:g=>{const I=e.filter(O=>this.getLayer(O)),A=I.length!==0?this.queryRenderedFeatures(g.point,{layers:I}):[];A.length?h||(h=!0,o.call(this,new Qr(y,this,g.originalEvent,{features:A}))):h=!1},mouseout:()=>{h=!1}}}}if(y==="mouseleave"||y==="mouseout"){let h=!1;return{layers:e,listener:o,delegates:{mousemove:I=>{const A=e.filter(O=>this.getLayer(O));(A.length!==0?this.queryRenderedFeatures(I.point,{layers:A}):[]).length?h=!0:h&&(h=!1,o.call(this,new Qr(y,this,I.originalEvent)))},mouseout:I=>{h&&(h=!1,o.call(this,new Qr(y,this,I.originalEvent)))}}}}{const h=d=>{const g=e.filter(A=>this.getLayer(A)),I=g.length!==0?this.queryRenderedFeatures(d.point,{layers:g}):[];I.length&&(d.features=I,o.call(this,d),delete d.features)};return{layers:e,listener:o,delegates:{[y]:h}}}}_saveDelegatedListener(y,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(e)}_removeDelegatedListener(y,e,o){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const h=this._delegatedListeners[y];for(let d=0;d<h.length;d++){const g=h[d];if(g.listener===o&&g.layers.length===e.length&&g.layers.every(I=>e.includes(I))){for(const I in g.delegates)this.off(I,g.delegates[I]);return void h.splice(d,1)}}}on(y,e,o){if(o===void 0)return super.on(y,e);const h=this._createDelegatedListener(y,typeof e=="string"?[e]:e,o);this._saveDelegatedListener(y,h);for(const d in h.delegates)this.on(d,h.delegates[d]);return this}once(y,e,o){if(o===void 0)return super.once(y,e);const h=typeof e=="string"?[e]:e,d=this._createDelegatedListener(y,h,o);for(const g in d.delegates){const I=d.delegates[g];d.delegates[g]=(...A)=>{this._removeDelegatedListener(y,h,o),I(...A)}}this._saveDelegatedListener(y,d);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(y,e,o){return o===void 0?super.off(y,e):(this._removeDelegatedListener(y,typeof e=="string"?[e]:e,o),this)}queryRenderedFeatures(y,e){if(!this.style)return[];let o;const h=y instanceof a.P||Array.isArray(y),d=h?y:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(h?{}:y)||{},d instanceof a.P||typeof d[0]=="number")o=[a.P.convert(d)];else{const g=a.P.convert(d[0]),I=a.P.convert(d[1]);o=[g,new a.P(I.x,g.y),I,new a.P(g.x,I.y),g]}return this.style.queryRenderedFeatures(o,e,this.transform)}querySourceFeatures(y,e){return this.style.querySourceFeatures(y,e)}setStyle(y,e){return(e=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(y,e))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const e=this._locale[y];if(e==null)throw new Error(`Missing UI string '${y}'`);return e}_updateStyle(y,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,e));const o=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Al(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,e,o):this.style.loadJSON(y,e,o),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Al(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,e){if(typeof y=="string"){const o=this._requestManager.transformRequest(y,"Style");a.h(o,new AbortController).then(h=>{this._updateDiff(h.data,e)}).catch(h=>{h&&this.fire(new a.j(h))})}else typeof y=="object"&&this._updateDiff(y,e)}_updateDiff(y,e){try{this.style.setState(y,e)&&this._update(!0)}catch(o){a.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(y,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(y,e){return this._lazyInitEmptyStyle(),this.style.addSource(y,e),this._update(!0)}isSourceLoaded(y){const e=this.style&&this.style.sourceCaches[y];if(e!==void 0)return e.loaded();this.fire(new a.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const e=this.style.sourceCaches[y.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&e.reload();for(const o in this.style._layers){const h=this.style._layers[o];h.type==="hillshade"&&h.source===y.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new aa(this.painter,e,y),this.painter.renderToTexture=new ku(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:y})),this}getTerrain(){var y,e;return(e=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const e in y){const o=y[e]._tiles;for(const h in o){const d=o[h];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,e,o={}){const{pixelRatio:h=1,sdf:d=!1,stretchX:g,stretchY:I,content:A,textFitWidth:O,textFitHeight:X}=o;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||a.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ae,height:le,data:be}=e,Ae=e;return this.style.addImage(y,{data:new a.R({width:ae,height:le},new Uint8Array(be)),pixelRatio:h,stretchX:g,stretchY:I,content:A,textFitWidth:O,textFitHeight:X,sdf:d,version:0,userImage:Ae}),Ae.onAdd&&Ae.onAdd(this,y),this}}{const{width:ae,height:le,data:be}=C.getImageData(e);this.style.addImage(y,{data:new a.R({width:ae,height:le},be),pixelRatio:h,stretchX:g,stretchY:I,content:A,textFitWidth:O,textFitHeight:X,sdf:d,version:0})}}updateImage(y,e){const o=this.style.getImage(y);if(!o)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=e instanceof HTMLImageElement||a.b(e)?C.getImageData(e):e,{width:d,height:g,data:I}=h;if(d===void 0||g===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==o.data.width||g!==o.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(e instanceof HTMLImageElement||a.b(e));return o.data.replace(I,A),this.style.updateImage(y,o),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return _e.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,e){return this._lazyInitEmptyStyle(),this.style.addLayer(y,e),this._update(!0)}moveLayer(y,e){return this.style.moveLayer(y,e),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,e,o){return this.style.setLayerZoomRange(y,e,o),this._update(!0)}setFilter(y,e,o={}){return this.style.setFilter(y,e,o),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,e,o,h={}){return this.style.setPaintProperty(y,e,o,h),this._update(!0)}getPaintProperty(y,e){return this.style.getPaintProperty(y,e)}setLayoutProperty(y,e,o,h={}){return this.style.setLayoutProperty(y,e,o,h),this._update(!0)}getLayoutProperty(y,e){return this.style.getLayoutProperty(y,e)}setGlyphs(y,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,e,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,e,o,h=>{h||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,e,o=>{o||this._update(!0)}),this}setLight(y,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(y){return this._lazyInitEmptyStyle(),this.style.setSky(y),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,e){return this.style.setFeatureState(y,e),this._update()}removeFeatureState(y,e){return this.style.removeFeatureState(y,e),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,e=0;return this._container&&(y=this._container.clientWidth||400,e=this._container.clientHeight||300),[y,e]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const e=this._canvasContainer=k.create("div","maplibregl-canvas-container",y);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),h=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],h);const d=this._controlContainer=k.create("div","maplibregl-control-container",y),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{g[I]=k.create("div",`maplibregl-ctrl-${I} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,e,o){this._canvas.width=Math.floor(o*y),this._canvas.height=Math.floor(o*e),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{e={requestedAttributes:y},h&&(e.statusMessage=h.statusMessage,e.type=h.type)},{once:!0});const o=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!o){const h="Failed to initialize WebGL";throw e?(e.message=h,new Error(JSON.stringify(e))):new Error(h)}this.painter=new wt(o,this.transform),V.testSupport(o)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const d=this.transform.zoom,g=C.now();this.style.zoomHistory.update(d,g);const I=new a.z(d,{now:g,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=I.crossFadingFactor();A===1&&A===this._crossFadingFactor||(o=!0,this._crossFadingFactor=A),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),_e.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(y=>{a.bf.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return fl}getCameraTargetElevation(){return this.transform.elevation}},w.MapMouseEvent=Qr,w.MapTouchEvent=ro,w.MapWheelEvent=Bc,w.Marker=ji,w.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const e=this._map.getZoom(),o=e===this._map.getMaxZoom(),h=e===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,o)=>{const h=this._map._getUIString(`NavigationControl.${o}`);e.title=h,e.setAttribute("aria-label",h)},this.options=a.e({},kr,y),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),k.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),k.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ua(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,e){const o=k.create("button",y,this._container);return o.type="button",o.addEventListener("click",e),o}},w.Popup=class extends a.E{constructor(y){super(),this.remove=()=>(this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var o;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=k.create("div","maplibregl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?tr(this._lngLat,this._flatPos,this._map.transform):(o=this._lngLat)===null||o===void 0?void 0:o.wrap(),this._trackPointer&&!e)return;const h=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor;const g=Fu(this.options.offset);if(!d){const A=this._container.offsetWidth,O=this._container.offsetHeight;let X;X=h.y+g.bottom.y<O?["top"]:h.y>this._map.transform.height-O?["bottom"]:[],h.x<A/2?X.push("left"):h.x>this._map.transform.width-A/2&&X.push("right"),d=X.length===0?"bottom":X.join("-")}let I=h.add(g[d]);this.options.subpixelPositioning||(I=I.round()),k.setTransform(this._container,`${Wo[d]} translate(${I.x}px,${I.y}px)`),la(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(En),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=a.N.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const e=document.createDocumentFragment(),o=document.createElement("body");let h;for(o.innerHTML=y;h=o.firstChild,h;)e.appendChild(h);return this.setDOMContent(e)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Jl);y&&y.focus()}},w.RasterDEMTileSource=ze,w.RasterTileSource=en,w.ScaleControl=class{constructor(y){this._onMove=()=>{Yl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Yl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Oo),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},w.ScrollZoomHandler=_o,w.Style=Al,w.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},w.TwoFingersTouchPitchHandler=hl,w.TwoFingersTouchRotateHandler=Zl,w.TwoFingersTouchZoomHandler=Au,w.TwoFingersTouchZoomRotateHandler=fc,w.VectorTileSource=cn,w.VideoSource=rt,w.addSourceType=(y,e)=>a._(void 0,void 0,void 0,function*(){if(ye(y))throw new Error(`A source type called "${y}" already exists.`);((o,h)=>{Et[o]=h})(y,e)}),w.clearPrewarmedResources=function(){const y=pt;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Le),pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},w.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},w.getRTLTextPluginStatus=function(){return Je().getRTLTextPluginStatus()},w.getVersion=function(){return Zc},w.getWorkerCount=function(){return Ye.workerCount},w.getWorkerUrl=function(){return a.a.WORKER_URL},w.importScriptInWorkers=function(y){return Tt().broadcast("IS",y)},w.prewarm=function(){Pt().acquire(Le)},w.setMaxParallelImageRequests=function(y){a.a.MAX_PARALLEL_IMAGE_REQUESTS=y},w.setRTLTextPlugin=function(y,e){return Je().setRTLTextPlugin(y,e)},w.setWorkerCount=function(y){Ye.workerCount=y},w.setWorkerUrl=function(y){a.a.WORKER_URL=y}});var T=p;return T})}(Xp)),Xp.exports}var z1=eb();const R1=Df(z1),tb=Gw({__proto__:null,default:R1},[z1]),nb="modulepreload",rb=function(u){return"/osm-address-editor-vite/"+u},wv={},ib=function(c,p,v){let x=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),a=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));x=Promise.allSettled(p.map(L=>{if(L=rb(L),L in wv)return;wv[L]=!0;const R=L.endsWith(".css"),D=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${L}"]${D}`))return;const C=document.createElement("link");if(C.rel=R?"stylesheet":nb,R||(C.as="script"),C.crossOrigin="",C.href=L,a&&C.setAttribute("nonce",a),document.head.appendChild(C),R)return new Promise((k,V)=>{C.addEventListener("load",k),C.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${L}`)))})}))}function T(w){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=w,window.dispatchEvent(a),!a.defaultPrevented)throw w}return x.then(w=>{for(const a of w||[])a.status==="rejected"&&T(a.reason);return c().catch(T)})},ob=zt.createContext(null);function sb(u,c){const p=Array.isArray(u)?u[0]:u?u.x:0,v=Array.isArray(u)?u[1]:u?u.y:0,x=Array.isArray(c)?c[0]:c?c.x:0,T=Array.isArray(c)?c[1]:c?c.y:0;return p===x&&v===T}function Ca(u,c){if(u===c)return!0;if(!u||!c)return!1;if(Array.isArray(u)){if(!Array.isArray(c)||u.length!==c.length)return!1;for(let p=0;p<u.length;p++)if(!Ca(u[p],c[p]))return!1;return!0}else if(Array.isArray(c))return!1;if(typeof u=="object"&&typeof c=="object"){const p=Object.keys(u),v=Object.keys(c);if(p.length!==v.length)return!1;for(const x of p)if(!c.hasOwnProperty(x)||!Ca(u[x],c[x]))return!1;return!0}return!1}function ab(u){const c=u.clone();return c.pixelsToGLUnits=u.pixelsToGLUnits,c}function bv(u,c){if(!u.getProjection)return;const p=u.getProjection(),v=c.getProjection();Ca(p,v)||c.setProjection(p)}function Sv(u){return{longitude:u.center.lng,latitude:u.center.lat,zoom:u.zoom,pitch:u.pitch,bearing:u.bearing,padding:u.padding}}function Ev(u,c){const p=c.viewState||c;let v=!1;if("longitude"in p&&"latitude"in p){const x=u.center;u.center=new x.constructor(p.longitude,p.latitude),v=v||x!==u.center}if("zoom"in p){const x=u.zoom;u.zoom=p.zoom,v=v||x!==u.zoom}if("bearing"in p){const x=u.bearing;u.bearing=p.bearing,v=v||x!==u.bearing}if("pitch"in p){const x=u.pitch;u.pitch=p.pitch,v=v||x!==u.pitch}return p.padding&&!u.isPaddingEqual(p.padding)&&(v=!0,u.padding=p.padding),v}const lb=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Tv(u){if(!u)return null;if(typeof u=="string"||("toJS"in u&&(u=u.toJS()),!u.layers))return u;const c={};for(const v of u.layers)c[v.id]=v;const p=u.layers.map(v=>{let x=null;"interactive"in v&&(x=Object.assign({},v),delete x.interactive);const T=c[v.ref];if(T){x=x||Object.assign({},v),delete x.ref;for(const w of lb)w in T&&(x[w]=T[w])}return x||v});return{...u,layers:p}}var Iv={};const Cv={version:8,sources:{},layers:[]},Pv={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},pg={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Av={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ub=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],cb=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class _d{constructor(c,p,v){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=x=>{const T=this.props[Av[x.type]];T?T(x):x.type==="error"&&console.error(x.error)},this._onPointerEvent=x=>{(x.type==="mousemove"||x.type==="mouseout")&&this._updateHover(x);const T=this.props[Pv[x.type]];T&&(this.props.interactiveLayerIds&&x.type!=="mouseover"&&x.type!=="mouseout"&&(x.features=this._hoveredFeatures||this._queryRenderedFeatures(x.point)),T(x),delete x.features)},this._onCameraEvent=x=>{if(!this._internalUpdate){const T=this.props[pg[x.type]];T&&T(x)}x.type in this._deferredEvents&&(this._deferredEvents[x.type]=!1)},this._MapClass=c,this.props=p,this._initialize(v)}get map(){return this._map}get transform(){return this._renderTransform}setProps(c){const p=this.props;this.props=c;const v=this._updateSettings(c,p);v&&this._createShadowTransform(this._map);const x=this._updateSize(c),T=this._updateViewState(c,!0);this._updateStyle(c,p),this._updateStyleComponents(c,p),this._updateHandlers(c,p),(v||x||T&&!this._map.isMoving())&&this.redraw()}static reuse(c,p){const v=_d.savedMaps.pop();if(!v)return null;const x=v.map,T=x.getContainer();for(p.className=T.className;T.childNodes.length>0;)p.appendChild(T.childNodes[0]);x._container=p;const w=x._resizeObserver;w&&(w.disconnect(),w.observe(p)),v.setProps({...c,styleDiffing:!1}),x.resize();const{initialViewState:a}=c;return a&&(a.bounds?x.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):v._updateViewState(a,!1)),x.isStyleLoaded()?x.fire("load"):x.once("styledata",()=>x.fire("load")),x._update(),v}_initialize(c){const{props:p}=this,{mapStyle:v=Cv}=p,x={...p,...p.initialViewState,accessToken:p.mapboxAccessToken||hb()||null,container:c,style:Tv(v)},T=x.initialViewState||x.viewState||x;if(Object.assign(x,{center:[T.longitude||0,T.latitude||0],zoom:T.zoom||0,pitch:T.pitch||0,bearing:T.bearing||0}),p.gl){const D=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=D,p.gl)}const w=new this._MapClass(x);T.padding&&w.setPadding(T.padding),p.cursor&&(w.getCanvas().style.cursor=p.cursor),this._createShadowTransform(w);const a=w._render;w._render=D=>{this._inRender=!0,a.call(w,D),this._inRender=!1};const L=w._renderTaskQueue.run;w._renderTaskQueue.run=D=>{L.call(w._renderTaskQueue,D),this._onBeforeRepaint()},w.on("render",()=>this._onAfterRepaint());const R=w.fire;w.fire=this._fireEvent.bind(this,R),w.on("resize",()=>{this._renderTransform.resize(w.transform.width,w.transform.height)}),w.on("styledata",()=>{this._updateStyleComponents(this.props,{}),bv(w.transform,this._renderTransform)}),w.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const D in Pv)w.on(D,this._onPointerEvent);for(const D in pg)w.on(D,this._onCameraEvent);for(const D in Av)w.on(D,this._onEvent);this._map=w}recycle(){const p=this.map.getContainer().querySelector("[mapboxgl-children]");p==null||p.remove(),_d.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const c=this._map;!this._inRender&&c.style&&(c._frame&&(c._frame.cancel(),c._frame=null),c._render())}_createShadowTransform(c){const p=ab(c.transform);c.painter.transform=p,this._renderTransform=p}_updateSize(c){const{viewState:p}=c;if(p){const v=this._map;if(p.width!==v.transform.width||p.height!==v.transform.height)return v.resize(),!0}return!1}_updateViewState(c,p){if(this._internalUpdate)return!1;const v=this._map,x=this._renderTransform,{zoom:T,pitch:w,bearing:a}=x,L=v.isMoving();L&&(x.cameraElevationReference="sea");const R=Ev(x,{...Sv(v.transform),...c});if(L&&(x.cameraElevationReference="ground"),R&&p){const D=this._deferredEvents;D.move=!0,D.zoom||(D.zoom=T!==x.zoom),D.rotate||(D.rotate=a!==x.bearing),D.pitch||(D.pitch=w!==x.pitch)}return L||Ev(v.transform,c),R}_updateSettings(c,p){const v=this._map;let x=!1;for(const T of ub)if(T in c&&!Ca(c[T],p[T])){x=!0;const w=v[`set${T[0].toUpperCase()}${T.slice(1)}`];w==null||w.call(v,c[T])}return x}_updateStyle(c,p){if(c.cursor!==p.cursor&&(this._map.getCanvas().style.cursor=c.cursor||""),c.mapStyle!==p.mapStyle){const{mapStyle:v=Cv,styleDiffing:x=!0}=c,T={diff:x};return"localIdeographFontFamily"in c&&(T.localIdeographFontFamily=c.localIdeographFontFamily),this._map.setStyle(Tv(v),T),!0}return!1}_updateStyleComponents(c,p){const v=this._map;let x=!1;return v.isStyleLoaded()&&("light"in c&&v.setLight&&!Ca(c.light,p.light)&&(x=!0,v.setLight(c.light)),"fog"in c&&v.setFog&&!Ca(c.fog,p.fog)&&(x=!0,v.setFog(c.fog)),"terrain"in c&&v.setTerrain&&!Ca(c.terrain,p.terrain)&&(!c.terrain||v.getSource(c.terrain.source))&&(x=!0,v.setTerrain(c.terrain))),x}_updateHandlers(c,p){var v,x;const T=this._map;let w=!1;for(const a of cb){const L=(v=c[a])!==null&&v!==void 0?v:!0,R=(x=p[a])!==null&&x!==void 0?x:!0;Ca(L,R)||(w=!0,L?T[a].enable(L):T[a].disable())}return w}_queryRenderedFeatures(c){const p=this._map,v=p.transform,{interactiveLayerIds:x=[]}=this.props;try{return p.transform=this._renderTransform,p.queryRenderedFeatures(c,{layers:x.filter(p.getLayer.bind(p))})}catch{return[]}finally{p.transform=v}}_updateHover(c){var p;const{props:v}=this;if(v.interactiveLayerIds&&(v.onMouseMove||v.onMouseEnter||v.onMouseLeave)){const T=c.type,w=((p=this._hoveredFeatures)===null||p===void 0?void 0:p.length)>0,a=this._queryRenderedFeatures(c.point),L=a.length>0;!L&&w&&(c.type="mouseleave",this._onPointerEvent(c)),this._hoveredFeatures=a,L&&!w&&(c.type="mouseenter",this._onPointerEvent(c)),c.type=T}else this._hoveredFeatures=null}_fireEvent(c,p,v){const x=this._map,T=x.transform,w=typeof p=="string"?p:p.type;return w==="move"&&this._updateViewState(this.props,!1),w in pg&&(typeof p=="object"&&(p.viewState=Sv(T)),this._map.isMoving())?(x.transform=this._renderTransform,c.call(x,p,v),x.transform=T,x):(c.call(x,p,v),x)}_onBeforeRepaint(){const c=this._map;this._internalUpdate=!0;for(const v in this._deferredEvents)this._deferredEvents[v]&&c.fire(v);this._internalUpdate=!1;const p=this._map.transform;c.transform=this._renderTransform,this._onAfterRepaint=()=>{bv(this._renderTransform,p),c.transform=p}}}_d.savedMaps=[];function hb(){let u=null;if(typeof location<"u"){const c=/access_token=([^&\/]*)/.exec(location.search);u=c&&c[1]}try{u=u||Iv.MapboxAccessToken}catch{}try{u=u||Iv.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return u}const db=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function fb(u){if(!u)return null;const c=u.map,p={getMap:()=>c,getCenter:()=>u.transform.center,getZoom:()=>u.transform.zoom,getBearing:()=>u.transform.bearing,getPitch:()=>u.transform.pitch,getPadding:()=>u.transform.padding,getBounds:()=>u.transform.getBounds(),project:v=>{const x=c.transform;c.transform=u.transform;const T=c.project(v);return c.transform=x,T},unproject:v=>{const x=c.transform;c.transform=u.transform;const T=c.unproject(v);return c.transform=x,T},queryTerrainElevation:(v,x)=>{const T=c.transform;c.transform=u.transform;const w=c.queryTerrainElevation(v,x);return c.transform=T,w},queryRenderedFeatures:(v,x)=>{const T=c.transform;c.transform=u.transform;const w=c.queryRenderedFeatures(v,x);return c.transform=T,w}};for(const v of pb(c))!(v in p)&&!db.includes(v)&&(p[v]=c[v].bind(c));return p}function pb(u){const c=new Set;let p=u;for(;p;){for(const v of Object.getOwnPropertyNames(p))v[0]!=="_"&&typeof u[v]=="function"&&v!=="fire"&&v!=="setEventedParent"&&c.add(v);p=Object.getPrototypeOf(p)}return Array.from(c)}const mb=typeof document<"u"?zt.useLayoutEffect:zt.useEffect,gb=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function yb(u,c){for(const v of gb)v in c&&(u[v]=c[v]);const{RTLTextPlugin:p="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=c;p&&u.getRTLTextPluginStatus&&u.getRTLTextPluginStatus()==="unavailable"&&u.setRTLTextPlugin(p,v=>{v&&console.error(v)},!0)}const Ed=zt.createContext(null);function vb(u,c,p){const v=zt.useContext(ob),[x,T]=zt.useState(null),w=zt.useRef(),{current:a}=zt.useRef({mapLib:null,map:null});zt.useEffect(()=>{const D=u.mapLib;let C=!0,k;return Promise.resolve(D||p).then(V=>{if(!C)return;if(!V)throw new Error("Invalid mapLib");const N="Map"in V?V:V.default;if(!N.Map)throw new Error("Invalid mapLib");if(yb(N,u),!N.supported||N.supported(u))u.reuseMaps&&(k=_d.reuse(u,w.current)),k||(k=new _d(N.Map,u,w.current)),a.map=fb(k),a.mapLib=N,T(k),v==null||v.onMapMount(a.map,u.id);else throw new Error("Map is not supported by this browser")}).catch(V=>{const{onError:N}=u;N?N({type:"error",target:null,originalEvent:null,error:V}):console.error(V)}),()=>{C=!1,k&&(v==null||v.onMapUnmount(u.id),u.reuseMaps?k.recycle():k.destroy())}},[]),mb(()=>{x&&x.setProps(u)}),zt.useImperativeHandle(c,()=>a.map,[x]);const L=zt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...u.style}),[u.style]),R={height:"100%"};return zt.createElement("div",{id:u.id,ref:w,style:L},x&&zt.createElement(Ed.Provider,{value:a},zt.createElement("div",{"mapboxgl-children":"",style:R},u.children)))}const _b=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function zh(u,c){if(!u||!c)return;const p=u.style;for(const v in c){const x=c[v];Number.isFinite(x)&&!_b.test(v)?p[v]=`${x}px`:p[v]=x}}function xb(u,c){const{map:p,mapLib:v}=zt.useContext(Ed),x=zt.useRef({props:u});x.current.props=u;const T=zt.useMemo(()=>{let Q=!1;zt.Children.forEach(u.children,we=>{we&&(Q=!0)});const he={...u,element:Q?document.createElement("div"):null},Te=new v.Marker(he);return Te.setLngLat([u.longitude,u.latitude]),Te.getElement().addEventListener("click",we=>{var _e,Me;(Me=(_e=x.current.props).onClick)===null||Me===void 0||Me.call(_e,{type:"click",target:Te,originalEvent:we})}),Te.on("dragstart",we=>{var _e,Me;const ne=we;ne.lngLat=T.getLngLat(),(Me=(_e=x.current.props).onDragStart)===null||Me===void 0||Me.call(_e,ne)}),Te.on("drag",we=>{var _e,Me;const ne=we;ne.lngLat=T.getLngLat(),(Me=(_e=x.current.props).onDrag)===null||Me===void 0||Me.call(_e,ne)}),Te.on("dragend",we=>{var _e,Me;const ne=we;ne.lngLat=T.getLngLat(),(Me=(_e=x.current.props).onDragEnd)===null||Me===void 0||Me.call(_e,ne)}),Te},[]);zt.useEffect(()=>(T.addTo(p.getMap()),()=>{T.remove()}),[]);const{longitude:w,latitude:a,offset:L,style:R,draggable:D=!1,popup:C=null,rotation:k=0,rotationAlignment:V="auto",pitchAlignment:N="auto"}=u;return zt.useEffect(()=>{zh(T.getElement(),R)},[R]),zt.useImperativeHandle(c,()=>T,[]),(T.getLngLat().lng!==w||T.getLngLat().lat!==a)&&T.setLngLat([w,a]),L&&!sb(T.getOffset(),L)&&T.setOffset(L),T.isDraggable()!==D&&T.setDraggable(D),T.getRotation()!==k&&T.setRotation(k),T.getRotationAlignment()!==V&&T.setRotationAlignment(V),T.getPitchAlignment()!==N&&T.setPitchAlignment(N),T.getPopup()!==C&&T.setPopup(C),f0.createPortal(u.children,T.getElement())}const wb=zt.memo(zt.forwardRef(xb));function Mv(u){return new Set(u?u.trim().split(/\s+/):[])}function bb(u,c){const{map:p,mapLib:v}=zt.useContext(Ed),x=zt.useMemo(()=>document.createElement("div"),[]),T=zt.useRef({props:u});T.current.props=u;const w=zt.useMemo(()=>{const a={...u},L=new v.Popup(a);return L.setLngLat([u.longitude,u.latitude]),L.once("open",R=>{var D,C;(C=(D=T.current.props).onOpen)===null||C===void 0||C.call(D,R)}),L},[]);if(zt.useEffect(()=>{const a=L=>{var R,D;(D=(R=T.current.props).onClose)===null||D===void 0||D.call(R,L)};return w.on("close",a),w.setDOMContent(x).addTo(p.getMap()),()=>{w.off("close",a),w.isOpen()&&w.remove()}},[]),zt.useEffect(()=>{zh(w.getElement(),u.style)},[u.style]),zt.useImperativeHandle(c,()=>w,[]),w.isOpen()&&((w.getLngLat().lng!==u.longitude||w.getLngLat().lat!==u.latitude)&&w.setLngLat([u.longitude,u.latitude]),u.offset&&!Ca(w.options.offset,u.offset)&&w.setOffset(u.offset),(w.options.anchor!==u.anchor||w.options.maxWidth!==u.maxWidth)&&(w.options.anchor=u.anchor,w.setMaxWidth(u.maxWidth)),w.options.className!==u.className)){const a=Mv(w.options.className),L=Mv(u.className);for(const R of a)L.has(R)||w.removeClassName(R);for(const R of L)a.has(R)||w.addClassName(R);w.options.className=u.className}return f0.createPortal(u.children,x)}zt.memo(zt.forwardRef(bb));function Bf(u,c,p,v){const x=zt.useContext(Ed),T=zt.useMemo(()=>u(x),[]);return zt.useEffect(()=>{const w=c,a=typeof c=="function"&&typeof p=="function"?c:null,L=typeof c=="function"?c:null,{map:R}=x;return R.hasControl(T)||(R.addControl(T,w==null?void 0:w.position),a&&a(x)),()=>{L&&L(x),R.hasControl(T)&&R.removeControl(T)}},[]),T}function Sb(u){const c=Bf(({mapLib:p})=>new p.AttributionControl(u),{position:u.position});return zt.useEffect(()=>{zh(c._container,u.style)},[u.style]),null}zt.memo(Sb);function Eb(u){const c=Bf(({mapLib:p})=>new p.FullscreenControl({container:u.containerId&&document.getElementById(u.containerId)}),{position:u.position});return zt.useEffect(()=>{zh(c._controlContainer,u.style)},[u.style]),null}zt.memo(Eb);function Tb(u,c){const p=zt.useRef({props:u}),v=Bf(({mapLib:x})=>{const T=new x.GeolocateControl(u),w=T._setupUI;return T._setupUI=a=>{T._container.hasChildNodes()||w(a)},T.on("geolocate",a=>{var L,R;(R=(L=p.current.props).onGeolocate)===null||R===void 0||R.call(L,a)}),T.on("error",a=>{var L,R;(R=(L=p.current.props).onError)===null||R===void 0||R.call(L,a)}),T.on("outofmaxbounds",a=>{var L,R;(R=(L=p.current.props).onOutOfMaxBounds)===null||R===void 0||R.call(L,a)}),T.on("trackuserlocationstart",a=>{var L,R;(R=(L=p.current.props).onTrackUserLocationStart)===null||R===void 0||R.call(L,a)}),T.on("trackuserlocationend",a=>{var L,R;(R=(L=p.current.props).onTrackUserLocationEnd)===null||R===void 0||R.call(L,a)}),T},{position:u.position});return p.current.props=u,zt.useImperativeHandle(c,()=>v,[]),zt.useEffect(()=>{zh(v._container,u.style)},[u.style]),null}const Ib=zt.memo(zt.forwardRef(Tb));function Cb(u){const c=Bf(({mapLib:p})=>new p.NavigationControl(u),{position:u.position});return zt.useEffect(()=>{zh(c._container,u.style)},[u.style]),null}const Pb=zt.memo(Cb);function Ab(u){const c=Bf(({mapLib:T})=>new T.ScaleControl(u),{position:u.position}),p=zt.useRef(u),v=p.current;p.current=u;const{style:x}=u;return u.maxWidth!==void 0&&u.maxWidth!==v.maxWidth&&(c.options.maxWidth=u.maxWidth),u.unit!==void 0&&u.unit!==v.unit&&c.setUnit(u.unit),zt.useEffect(()=>{zh(c._container,x)},[x]),null}zt.memo(Ab);function tm(u,c){if(!u)throw new Error(c)}function Mb(u,c,p,v){if(tm(p.id===v.id,"layer id changed"),tm(p.type===v.type,"layer type changed"),p.type==="custom"||v.type==="custom")return;const{layout:x={},paint:T={},filter:w,minzoom:a,maxzoom:L,beforeId:R}=p;if(R!==v.beforeId&&u.moveLayer(c,R),x!==v.layout){const D=v.layout||{};for(const C in x)Ca(x[C],D[C])||u.setLayoutProperty(c,C,x[C]);for(const C in D)x.hasOwnProperty(C)||u.setLayoutProperty(c,C,void 0)}if(T!==v.paint){const D=v.paint||{};for(const C in T)Ca(T[C],D[C])||u.setPaintProperty(c,C,T[C]);for(const C in D)T.hasOwnProperty(C)||u.setPaintProperty(c,C,void 0)}Ca(w,v.filter)||u.setFilter(c,w),(a!==v.minzoom||L!==v.maxzoom)&&u.setLayerZoomRange(c,a,L)}function kb(u,c,p){if(u.style&&u.style._loaded&&(!("source"in p)||u.getSource(p.source))){const v={...p,id:c};delete v.beforeId,u.addLayer(v,p.beforeId)}}let zb=0;function Rb(u){const c=zt.useContext(Ed).map.getMap(),p=zt.useRef(u),[,v]=zt.useState(0),x=zt.useMemo(()=>u.id||`jsx-layer-${zb++}`,[]);if(zt.useEffect(()=>{if(c){const w=()=>v(a=>a+1);return c.on("styledata",w),w(),()=>{c.off("styledata",w),c.style&&c.style._loaded&&c.getLayer(x)&&c.removeLayer(x)}}},[c]),c&&c.style&&c.getLayer(x))try{Mb(c,x,u,p.current)}catch(w){console.warn(w)}else kb(c,x,u);return p.current=u,null}let Fb=0;function Ob(u,c,p){if(u.style&&u.style._loaded){const v={...p};return delete v.id,delete v.children,u.addSource(c,v),u.getSource(c)}return null}function jb(u,c,p){tm(c.id===p.id,"source id changed"),tm(c.type===p.type,"source type changed");let v="",x=0;for(const w in c)w!=="children"&&w!=="id"&&!Ca(p[w],c[w])&&(v=w,x++);if(!x)return;const T=c.type;if(T==="geojson")u.setData(c.data);else if(T==="image")u.updateImage({url:c.url,coordinates:c.coordinates});else if("setCoordinates"in u&&x===1&&v==="coordinates")u.setCoordinates(c.coordinates);else if("setUrl"in u)switch(v){case"url":u.setUrl(c.url);break;case"tiles":u.setTiles(c.tiles);break}else console.warn(`Unable to update <Source> prop: ${v}`)}function Lb(u){const c=zt.useContext(Ed).map.getMap(),p=zt.useRef(u),[,v]=zt.useState(0),x=zt.useMemo(()=>u.id||`jsx-source-${Fb++}`,[]);zt.useEffect(()=>{if(c){const w=()=>setTimeout(()=>v(a=>a+1),0);return c.on("styledata",w),w(),()=>{var a;if(c.off("styledata",w),c.style&&c.style._loaded&&c.getSource(x)){const L=(a=c.getStyle())===null||a===void 0?void 0:a.layers;if(L)for(const R of L)R.source===x&&c.removeLayer(R.id);c.removeSource(x)}}}},[c]);let T=c&&c.style&&c.getSource(x);return T?jb(T,u,p.current):T=Ob(c,x,u),p.current=u,T&&zt.Children.map(u.children,w=>w&&zt.cloneElement(w,{source:x}))||null}const Db=ib(()=>Promise.resolve().then(()=>tb),void 0),Bb=zt.forwardRef(function(c,p){return vb(c,p,Db)}),Nb=wb,Ub=Pb,Vb=Ib,$b=Rb,Gb=Lb;/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function Hb(u,c,p){return(c=Wb(c))in u?Object.defineProperty(u,c,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[c]=p,u}function kv(u,c){var p=Object.keys(u);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(u);c&&(v=v.filter(function(x){return Object.getOwnPropertyDescriptor(u,x).enumerable})),p.push.apply(p,v)}return p}function Zt(u){for(var c=1;c<arguments.length;c++){var p=arguments[c]!=null?arguments[c]:{};c%2?kv(Object(p),!0).forEach(function(v){Hb(u,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):kv(Object(p)).forEach(function(v){Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(p,v))})}return u}function Zb(u,c){if(typeof u!="object"||!u)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var v=p.call(u,c||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(u)}function Wb(u){var c=Zb(u,"string");return typeof c=="symbol"?c:c+""}const zv=()=>{};let p0={},F1={},O1=null,j1={mark:zv,measure:zv};try{typeof window<"u"&&(p0=window),typeof document<"u"&&(F1=document),typeof MutationObserver<"u"&&(O1=MutationObserver),typeof performance<"u"&&(j1=performance)}catch{}const{userAgent:Rv=""}=p0.navigator||{},Ac=p0,ui=F1,Fv=O1,Lp=j1;Ac.document;const nc=!!ui.documentElement&&!!ui.head&&typeof ui.addEventListener=="function"&&typeof ui.createElement=="function",L1=~Rv.indexOf("MSIE")||~Rv.indexOf("Trident/");var qb=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Xb=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,D1={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},Kb={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},B1=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],rs="classic",Am="duotone",Yb="sharp",Jb="sharp-duotone",N1=[rs,Am,Yb,Jb],Qb={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},e2={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},t2=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),n2={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},r2=["fak","fa-kit","fakd","fa-kit-duotone"],Ov={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},i2=["kit"],o2={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},s2=["fak","fakd"],a2={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},jv={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Dp={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},l2=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],u2=["fak","fa-kit","fakd","fa-kit-duotone"],c2={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},h2={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},d2={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},yy={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},f2=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],vy=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...l2,...f2],p2=["solid","regular","light","thin","duotone","brands"],U1=[1,2,3,4,5,6,7,8,9,10],m2=U1.concat([11,12,13,14,15,16,17,18,19,20]),g2=[...Object.keys(d2),...p2,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Dp.GROUP,Dp.SWAP_OPACITY,Dp.PRIMARY,Dp.SECONDARY].concat(U1.map(u=>"".concat(u,"x"))).concat(m2.map(u=>"w-".concat(u))),y2={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Qu="___FONT_AWESOME___",_y=16,V1="fa",$1="svg-inline--fa",Ph="data-fa-i2svg",xy="data-fa-pseudo-element",v2="data-fa-pseudo-element-pending",m0="data-prefix",g0="data-icon",Lv="fontawesome-i2svg",_2="async",x2=["HTML","HEAD","STYLE","SCRIPT"],G1=(()=>{try{return!0}catch{return!1}})();function Nf(u){return new Proxy(u,{get(c,p){return p in c?c[p]:c[rs]}})}const H1=Zt({},D1);H1[rs]=Zt(Zt(Zt(Zt({},{"fa-duotone":"duotone"}),D1[rs]),Ov.kit),Ov["kit-duotone"]);const w2=Nf(H1),wy=Zt({},n2);wy[rs]=Zt(Zt(Zt(Zt({},{duotone:"fad"}),wy[rs]),jv.kit),jv["kit-duotone"]);const Dv=Nf(wy),by=Zt({},yy);by[rs]=Zt(Zt({},by[rs]),a2.kit);const y0=Nf(by),Sy=Zt({},h2);Sy[rs]=Zt(Zt({},Sy[rs]),o2.kit);Nf(Sy);const b2=qb,Z1="fa-layers-text",S2=Xb,E2=Zt({},Qb);Nf(E2);const T2=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],mg=Kb,I2=[...i2,...g2],Ef=Ac.FontAwesomeConfig||{};function C2(u){var c=ui.querySelector("script["+u+"]");if(c)return c.getAttribute(u)}function P2(u){return u===""?!0:u==="false"?!1:u==="true"?!0:u}ui&&typeof ui.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(c=>{let[p,v]=c;const x=P2(C2(p));x!=null&&(Ef[v]=x)});const W1={styleDefault:"solid",familyDefault:rs,cssPrefix:V1,replacementClass:$1,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Ef.familyPrefix&&(Ef.cssPrefix=Ef.familyPrefix);const xd=Zt(Zt({},W1),Ef);xd.autoReplaceSvg||(xd.observeMutations=!1);const On={};Object.keys(W1).forEach(u=>{Object.defineProperty(On,u,{enumerable:!0,set:function(c){xd[u]=c,Tf.forEach(p=>p(On))},get:function(){return xd[u]}})});Object.defineProperty(On,"familyPrefix",{enumerable:!0,set:function(u){xd.cssPrefix=u,Tf.forEach(c=>c(On))},get:function(){return xd.cssPrefix}});Ac.FontAwesomeConfig=On;const Tf=[];function A2(u){return Tf.push(u),()=>{Tf.splice(Tf.indexOf(u),1)}}const Ic=_y,fu={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function M2(u){if(!u||!nc)return;const c=ui.createElement("style");c.setAttribute("type","text/css"),c.innerHTML=u;const p=ui.head.childNodes;let v=null;for(let x=p.length-1;x>-1;x--){const T=p[x],w=(T.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(w)>-1&&(v=T)}return ui.head.insertBefore(c,v),u}const k2="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function kf(){let u=12,c="";for(;u-- >0;)c+=k2[Math.random()*62|0];return c}function Td(u){const c=[];for(let p=(u||[]).length>>>0;p--;)c[p]=u[p];return c}function v0(u){return u.classList?Td(u.classList):(u.getAttribute("class")||"").split(" ").filter(c=>c)}function q1(u){return"".concat(u).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function z2(u){return Object.keys(u||{}).reduce((c,p)=>c+"".concat(p,'="').concat(q1(u[p]),'" '),"").trim()}function Mm(u){return Object.keys(u||{}).reduce((c,p)=>c+"".concat(p,": ").concat(u[p].trim(),";"),"")}function _0(u){return u.size!==fu.size||u.x!==fu.x||u.y!==fu.y||u.rotate!==fu.rotate||u.flipX||u.flipY}function R2(u){let{transform:c,containerWidth:p,iconWidth:v}=u;const x={transform:"translate(".concat(p/2," 256)")},T="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),a="rotate(".concat(c.rotate," 0 0)"),L={transform:"".concat(T," ").concat(w," ").concat(a)},R={transform:"translate(".concat(v/2*-1," -256)")};return{outer:x,inner:L,path:R}}function F2(u){let{transform:c,width:p=_y,height:v=_y,startCentered:x=!1}=u,T="";return x&&L1?T+="translate(".concat(c.x/Ic-p/2,"em, ").concat(c.y/Ic-v/2,"em) "):x?T+="translate(calc(-50% + ".concat(c.x/Ic,"em), calc(-50% + ").concat(c.y/Ic,"em)) "):T+="translate(".concat(c.x/Ic,"em, ").concat(c.y/Ic,"em) "),T+="scale(".concat(c.size/Ic*(c.flipX?-1:1),", ").concat(c.size/Ic*(c.flipY?-1:1),") "),T+="rotate(".concat(c.rotate,"deg) "),T}var O2=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function X1(){const u=V1,c=$1,p=On.cssPrefix,v=On.replacementClass;let x=O2;if(p!==u||v!==c){const T=new RegExp("\\.".concat(u,"\\-"),"g"),w=new RegExp("\\--".concat(u,"\\-"),"g"),a=new RegExp("\\.".concat(c),"g");x=x.replace(T,".".concat(p,"-")).replace(w,"--".concat(p,"-")).replace(a,".".concat(v))}return x}let Bv=!1;function gg(){On.autoAddCss&&!Bv&&(M2(X1()),Bv=!0)}var j2={mixout(){return{dom:{css:X1,insertCss:gg}}},hooks(){return{beforeDOMElementCreation(){gg()},beforeI2svg(){gg()}}}};const ec=Ac||{};ec[Qu]||(ec[Qu]={});ec[Qu].styles||(ec[Qu].styles={});ec[Qu].hooks||(ec[Qu].hooks={});ec[Qu].shims||(ec[Qu].shims=[]);var pu=ec[Qu];const K1=[],Y1=function(){ui.removeEventListener("DOMContentLoaded",Y1),nm=1,K1.map(u=>u())};let nm=!1;nc&&(nm=(ui.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ui.readyState),nm||ui.addEventListener("DOMContentLoaded",Y1));function L2(u){nc&&(nm?setTimeout(u,0):K1.push(u))}function Uf(u){const{tag:c,attributes:p={},children:v=[]}=u;return typeof u=="string"?q1(u):"<".concat(c," ").concat(z2(p),">").concat(v.map(Uf).join(""),"</").concat(c,">")}function Nv(u,c,p){if(u&&u[c]&&u[c][p])return{prefix:c,iconName:p,icon:u[c][p]}}var yg=function(c,p,v,x){var T=Object.keys(c),w=T.length,a=p,L,R,D;for(v===void 0?(L=1,D=c[T[0]]):(L=0,D=v);L<w;L++)R=T[L],D=a(D,c[R],R,c);return D};function D2(u){const c=[];let p=0;const v=u.length;for(;p<v;){const x=u.charCodeAt(p++);if(x>=55296&&x<=56319&&p<v){const T=u.charCodeAt(p++);(T&64512)==56320?c.push(((x&1023)<<10)+(T&1023)+65536):(c.push(x),p--)}else c.push(x)}return c}function Ey(u){const c=D2(u);return c.length===1?c[0].toString(16):null}function B2(u,c){const p=u.length;let v=u.charCodeAt(c),x;return v>=55296&&v<=56319&&p>c+1&&(x=u.charCodeAt(c+1),x>=56320&&x<=57343)?(v-55296)*1024+x-56320+65536:v}function Uv(u){return Object.keys(u).reduce((c,p)=>{const v=u[p];return!!v.icon?c[v.iconName]=v.icon:c[p]=v,c},{})}function Ty(u,c){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:v=!1}=p,x=Uv(c);typeof pu.hooks.addPack=="function"&&!v?pu.hooks.addPack(u,Uv(c)):pu.styles[u]=Zt(Zt({},pu.styles[u]||{}),x),u==="fas"&&Ty("fa",c)}const{styles:zf,shims:N2}=pu,J1=Object.keys(y0),U2=J1.reduce((u,c)=>(u[c]=Object.keys(y0[c]),u),{});let x0=null,Q1={},ex={},tx={},nx={},rx={};function V2(u){return~I2.indexOf(u)}function $2(u,c){const p=c.split("-"),v=p[0],x=p.slice(1).join("-");return v===u&&x!==""&&!V2(x)?x:null}const ix=()=>{const u=v=>yg(zf,(x,T,w)=>(x[w]=yg(T,v,{}),x),{});Q1=u((v,x,T)=>(x[3]&&(v[x[3]]=T),x[2]&&x[2].filter(a=>typeof a=="number").forEach(a=>{v[a.toString(16)]=T}),v)),ex=u((v,x,T)=>(v[T]=T,x[2]&&x[2].filter(a=>typeof a=="string").forEach(a=>{v[a]=T}),v)),rx=u((v,x,T)=>{const w=x[2];return v[T]=T,w.forEach(a=>{v[a]=T}),v});const c="far"in zf||On.autoFetchSvg,p=yg(N2,(v,x)=>{const T=x[0];let w=x[1];const a=x[2];return w==="far"&&!c&&(w="fas"),typeof T=="string"&&(v.names[T]={prefix:w,iconName:a}),typeof T=="number"&&(v.unicodes[T.toString(16)]={prefix:w,iconName:a}),v},{names:{},unicodes:{}});tx=p.names,nx=p.unicodes,x0=km(On.styleDefault,{family:On.familyDefault})};A2(u=>{x0=km(u.styleDefault,{family:On.familyDefault})});ix();function w0(u,c){return(Q1[u]||{})[c]}function G2(u,c){return(ex[u]||{})[c]}function Ch(u,c){return(rx[u]||{})[c]}function ox(u){return tx[u]||{prefix:null,iconName:null}}function H2(u){const c=nx[u],p=w0("fas",u);return c||(p?{prefix:"fas",iconName:p}:null)||{prefix:null,iconName:null}}function Mc(){return x0}const sx=()=>({prefix:null,iconName:null,rest:[]});function Z2(u){let c=rs;const p=J1.reduce((v,x)=>(v[x]="".concat(On.cssPrefix,"-").concat(x),v),{});return N1.forEach(v=>{(u.includes(p[v])||u.some(x=>U2[v].includes(x)))&&(c=v)}),c}function km(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:p=rs}=c,v=w2[p][u];if(p===Am&&!u)return"fad";const x=Dv[p][u]||Dv[p][v],T=u in pu.styles?u:null;return x||T||null}function W2(u){let c=[],p=null;return u.forEach(v=>{const x=$2(On.cssPrefix,v);x?p=x:v&&c.push(v)}),{iconName:p,rest:c}}function Vv(u){return u.sort().filter((c,p,v)=>v.indexOf(c)===p)}function zm(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:p=!1}=c;let v=null;const x=vy.concat(u2),T=Vv(u.filter(C=>x.includes(C))),w=Vv(u.filter(C=>!vy.includes(C))),a=T.filter(C=>(v=C,!B1.includes(C))),[L=null]=a,R=Z2(T),D=Zt(Zt({},W2(w)),{},{prefix:km(L,{family:R})});return Zt(Zt(Zt({},D),Y2({values:u,family:R,styles:zf,config:On,canonical:D,givenPrefix:v})),q2(p,v,D))}function q2(u,c,p){let{prefix:v,iconName:x}=p;if(u||!v||!x)return{prefix:v,iconName:x};const T=c==="fa"?ox(x):{},w=Ch(v,x);return x=T.iconName||w||x,v=T.prefix||v,v==="far"&&!zf.far&&zf.fas&&!On.autoFetchSvg&&(v="fas"),{prefix:v,iconName:x}}const X2=N1.filter(u=>u!==rs||u!==Am),K2=Object.keys(yy).filter(u=>u!==rs).map(u=>Object.keys(yy[u])).flat();function Y2(u){const{values:c,family:p,canonical:v,givenPrefix:x="",styles:T={},config:w={}}=u,a=p===Am,L=c.includes("fa-duotone")||c.includes("fad"),R=w.familyDefault==="duotone",D=v.prefix==="fad"||v.prefix==="fa-duotone";if(!a&&(L||R||D)&&(v.prefix="fad"),(c.includes("fa-brands")||c.includes("fab"))&&(v.prefix="fab"),!v.prefix&&X2.includes(p)&&(Object.keys(T).find(k=>K2.includes(k))||w.autoFetchSvg)){const k=t2.get(p).defaultShortPrefixId;v.prefix=k,v.iconName=Ch(v.prefix,v.iconName)||v.iconName}return(v.prefix==="fa"||x==="fa")&&(v.prefix=Mc()||"fas"),v}class J2{constructor(){this.definitions={}}add(){for(var c=arguments.length,p=new Array(c),v=0;v<c;v++)p[v]=arguments[v];const x=p.reduce(this._pullDefinitions,{});Object.keys(x).forEach(T=>{this.definitions[T]=Zt(Zt({},this.definitions[T]||{}),x[T]),Ty(T,x[T]);const w=y0[rs][T];w&&Ty(w,x[T]),ix()})}reset(){this.definitions={}}_pullDefinitions(c,p){const v=p.prefix&&p.iconName&&p.icon?{0:p}:p;return Object.keys(v).map(x=>{const{prefix:T,iconName:w,icon:a}=v[x],L=a[2];c[T]||(c[T]={}),L.length>0&&L.forEach(R=>{typeof R=="string"&&(c[T][R]=a)}),c[T][w]=a}),c}}let $v=[],fd={};const yd={},Q2=Object.keys(yd);function eS(u,c){let{mixoutsTo:p}=c;return $v=u,fd={},Object.keys(yd).forEach(v=>{Q2.indexOf(v)===-1&&delete yd[v]}),$v.forEach(v=>{const x=v.mixout?v.mixout():{};if(Object.keys(x).forEach(T=>{typeof x[T]=="function"&&(p[T]=x[T]),typeof x[T]=="object"&&Object.keys(x[T]).forEach(w=>{p[T]||(p[T]={}),p[T][w]=x[T][w]})}),v.hooks){const T=v.hooks();Object.keys(T).forEach(w=>{fd[w]||(fd[w]=[]),fd[w].push(T[w])})}v.provides&&v.provides(yd)}),p}function Iy(u,c){for(var p=arguments.length,v=new Array(p>2?p-2:0),x=2;x<p;x++)v[x-2]=arguments[x];return(fd[u]||[]).forEach(w=>{c=w.apply(null,[c,...v])}),c}function Ah(u){for(var c=arguments.length,p=new Array(c>1?c-1:0),v=1;v<c;v++)p[v-1]=arguments[v];(fd[u]||[]).forEach(T=>{T.apply(null,p)})}function kc(){const u=arguments[0],c=Array.prototype.slice.call(arguments,1);return yd[u]?yd[u].apply(null,c):void 0}function Cy(u){u.prefix==="fa"&&(u.prefix="fas");let{iconName:c}=u;const p=u.prefix||Mc();if(c)return c=Ch(p,c)||c,Nv(ax.definitions,p,c)||Nv(pu.styles,p,c)}const ax=new J2,tS=()=>{On.autoReplaceSvg=!1,On.observeMutations=!1,Ah("noAuto")},nS={i2svg:function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return nc?(Ah("beforeI2svg",u),kc("pseudoElements2svg",u),kc("i2svg",u)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:c}=u;On.autoReplaceSvg===!1&&(On.autoReplaceSvg=!0),On.observeMutations=!0,L2(()=>{iS({autoReplaceSvgRoot:c}),Ah("watch",u)})}},rS={icon:u=>{if(u===null)return null;if(typeof u=="object"&&u.prefix&&u.iconName)return{prefix:u.prefix,iconName:Ch(u.prefix,u.iconName)||u.iconName};if(Array.isArray(u)&&u.length===2){const c=u[1].indexOf("fa-")===0?u[1].slice(3):u[1],p=km(u[0]);return{prefix:p,iconName:Ch(p,c)||c}}if(typeof u=="string"&&(u.indexOf("".concat(On.cssPrefix,"-"))>-1||u.match(b2))){const c=zm(u.split(" "),{skipLookups:!0});return{prefix:c.prefix||Mc(),iconName:Ch(c.prefix,c.iconName)||c.iconName}}if(typeof u=="string"){const c=Mc();return{prefix:c,iconName:Ch(c,u)||u}}}},Pa={noAuto:tS,config:On,dom:nS,parse:rS,library:ax,findIconDefinition:Cy,toHtml:Uf},iS=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:c=ui}=u;(Object.keys(pu.styles).length>0||On.autoFetchSvg)&&nc&&On.autoReplaceSvg&&Pa.dom.i2svg({node:c})};function Rm(u,c){return Object.defineProperty(u,"abstract",{get:c}),Object.defineProperty(u,"html",{get:function(){return u.abstract.map(p=>Uf(p))}}),Object.defineProperty(u,"node",{get:function(){if(!nc)return;const p=ui.createElement("div");return p.innerHTML=u.html,p.children}}),u}function oS(u){let{children:c,main:p,mask:v,attributes:x,styles:T,transform:w}=u;if(_0(w)&&p.found&&!v.found){const{width:a,height:L}=p,R={x:a/L/2,y:.5};x.style=Mm(Zt(Zt({},T),{},{"transform-origin":"".concat(R.x+w.x/16,"em ").concat(R.y+w.y/16,"em")}))}return[{tag:"svg",attributes:x,children:c}]}function sS(u){let{prefix:c,iconName:p,children:v,attributes:x,symbol:T}=u;const w=T===!0?"".concat(c,"-").concat(On.cssPrefix,"-").concat(p):T;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Zt(Zt({},x),{},{id:w}),children:v}]}]}function b0(u){const{icons:{main:c,mask:p},prefix:v,iconName:x,transform:T,symbol:w,title:a,maskId:L,titleId:R,extra:D,watchable:C=!1}=u,{width:k,height:V}=p.found?p:c,N=s2.includes(v),Q=[On.replacementClass,x?"".concat(On.cssPrefix,"-").concat(x):""].filter(ne=>D.classes.indexOf(ne)===-1).filter(ne=>ne!==""||!!ne).concat(D.classes).join(" ");let he={children:[],attributes:Zt(Zt({},D.attributes),{},{"data-prefix":v,"data-icon":x,class:Q,role:D.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(k," ").concat(V)})};const Te=N&&!~D.classes.indexOf("fa-fw")?{width:"".concat(k/V*16*.0625,"em")}:{};C&&(he.attributes[Ph]=""),a&&(he.children.push({tag:"title",attributes:{id:he.attributes["aria-labelledby"]||"title-".concat(R||kf())},children:[a]}),delete he.attributes.title);const we=Zt(Zt({},he),{},{prefix:v,iconName:x,main:c,mask:p,maskId:L,transform:T,symbol:w,styles:Zt(Zt({},Te),D.styles)}),{children:_e,attributes:Me}=p.found&&c.found?kc("generateAbstractMask",we)||{children:[],attributes:{}}:kc("generateAbstractIcon",we)||{children:[],attributes:{}};return we.children=_e,we.attributes=Me,w?sS(we):oS(we)}function Gv(u){const{content:c,width:p,height:v,transform:x,title:T,extra:w,watchable:a=!1}=u,L=Zt(Zt(Zt({},w.attributes),T?{title:T}:{}),{},{class:w.classes.join(" ")});a&&(L[Ph]="");const R=Zt({},w.styles);_0(x)&&(R.transform=F2({transform:x,startCentered:!0,width:p,height:v}),R["-webkit-transform"]=R.transform);const D=Mm(R);D.length>0&&(L.style=D);const C=[];return C.push({tag:"span",attributes:L,children:[c]}),T&&C.push({tag:"span",attributes:{class:"sr-only"},children:[T]}),C}function aS(u){const{content:c,title:p,extra:v}=u,x=Zt(Zt(Zt({},v.attributes),p?{title:p}:{}),{},{class:v.classes.join(" ")}),T=Mm(v.styles);T.length>0&&(x.style=T);const w=[];return w.push({tag:"span",attributes:x,children:[c]}),p&&w.push({tag:"span",attributes:{class:"sr-only"},children:[p]}),w}const{styles:vg}=pu;function Py(u){const c=u[0],p=u[1],[v]=u.slice(4);let x=null;return Array.isArray(v)?x={tag:"g",attributes:{class:"".concat(On.cssPrefix,"-").concat(mg.GROUP)},children:[{tag:"path",attributes:{class:"".concat(On.cssPrefix,"-").concat(mg.SECONDARY),fill:"currentColor",d:v[0]}},{tag:"path",attributes:{class:"".concat(On.cssPrefix,"-").concat(mg.PRIMARY),fill:"currentColor",d:v[1]}}]}:x={tag:"path",attributes:{fill:"currentColor",d:v}},{found:!0,width:c,height:p,icon:x}}const lS={found:!1,width:512,height:512};function uS(u,c){!G1&&!On.showMissingIcons&&u&&console.error('Icon with name "'.concat(u,'" and prefix "').concat(c,'" is missing.'))}function Ay(u,c){let p=c;return c==="fa"&&On.styleDefault!==null&&(c=Mc()),new Promise((v,x)=>{if(p==="fa"){const T=ox(u)||{};u=T.iconName||u,c=T.prefix||c}if(u&&c&&vg[c]&&vg[c][u]){const T=vg[c][u];return v(Py(T))}uS(u,c),v(Zt(Zt({},lS),{},{icon:On.showMissingIcons&&u?kc("missingIconAbstract")||{}:{}}))})}const Hv=()=>{},My=On.measurePerformance&&Lp&&Lp.mark&&Lp.measure?Lp:{mark:Hv,measure:Hv},mf='FA "6.7.1"',cS=u=>(My.mark("".concat(mf," ").concat(u," begins")),()=>lx(u)),lx=u=>{My.mark("".concat(mf," ").concat(u," ends")),My.measure("".concat(mf," ").concat(u),"".concat(mf," ").concat(u," begins"),"".concat(mf," ").concat(u," ends"))};var S0={begin:cS,end:lx};const Kp=()=>{};function Zv(u){return typeof(u.getAttribute?u.getAttribute(Ph):null)=="string"}function hS(u){const c=u.getAttribute?u.getAttribute(m0):null,p=u.getAttribute?u.getAttribute(g0):null;return c&&p}function dS(u){return u&&u.classList&&u.classList.contains&&u.classList.contains(On.replacementClass)}function fS(){return On.autoReplaceSvg===!0?Yp.replace:Yp[On.autoReplaceSvg]||Yp.replace}function pS(u){return ui.createElementNS("http://www.w3.org/2000/svg",u)}function mS(u){return ui.createElement(u)}function ux(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:p=u.tag==="svg"?pS:mS}=c;if(typeof u=="string")return ui.createTextNode(u);const v=p(u.tag);return Object.keys(u.attributes||[]).forEach(function(T){v.setAttribute(T,u.attributes[T])}),(u.children||[]).forEach(function(T){v.appendChild(ux(T,{ceFn:p}))}),v}function gS(u){let c=" ".concat(u.outerHTML," ");return c="".concat(c,"Font Awesome fontawesome.com "),c}const Yp={replace:function(u){const c=u[0];if(c.parentNode)if(u[1].forEach(p=>{c.parentNode.insertBefore(ux(p),c)}),c.getAttribute(Ph)===null&&On.keepOriginalSource){let p=ui.createComment(gS(c));c.parentNode.replaceChild(p,c)}else c.remove()},nest:function(u){const c=u[0],p=u[1];if(~v0(c).indexOf(On.replacementClass))return Yp.replace(u);const v=new RegExp("".concat(On.cssPrefix,"-.*"));if(delete p[0].attributes.id,p[0].attributes.class){const T=p[0].attributes.class.split(" ").reduce((w,a)=>(a===On.replacementClass||a.match(v)?w.toSvg.push(a):w.toNode.push(a),w),{toNode:[],toSvg:[]});p[0].attributes.class=T.toSvg.join(" "),T.toNode.length===0?c.removeAttribute("class"):c.setAttribute("class",T.toNode.join(" "))}const x=p.map(T=>Uf(T)).join(`
`);c.setAttribute(Ph,""),c.innerHTML=x}};function Wv(u){u()}function cx(u,c){const p=typeof c=="function"?c:Kp;if(u.length===0)p();else{let v=Wv;On.mutateApproach===_2&&(v=Ac.requestAnimationFrame||Wv),v(()=>{const x=fS(),T=S0.begin("mutate");u.map(x),T(),p()})}}let E0=!1;function hx(){E0=!0}function ky(){E0=!1}let rm=null;function qv(u){if(!Fv||!On.observeMutations)return;const{treeCallback:c=Kp,nodeCallback:p=Kp,pseudoElementsCallback:v=Kp,observeMutationsRoot:x=ui}=u;rm=new Fv(T=>{if(E0)return;const w=Mc();Td(T).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!Zv(a.addedNodes[0])&&(On.searchPseudoElements&&v(a.target),c(a.target)),a.type==="attributes"&&a.target.parentNode&&On.searchPseudoElements&&v(a.target.parentNode),a.type==="attributes"&&Zv(a.target)&&~T2.indexOf(a.attributeName))if(a.attributeName==="class"&&hS(a.target)){const{prefix:L,iconName:R}=zm(v0(a.target));a.target.setAttribute(m0,L||w),R&&a.target.setAttribute(g0,R)}else dS(a.target)&&p(a.target)})}),nc&&rm.observe(x,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function yS(){rm&&rm.disconnect()}function vS(u){const c=u.getAttribute("style");let p=[];return c&&(p=c.split(";").reduce((v,x)=>{const T=x.split(":"),w=T[0],a=T.slice(1);return w&&a.length>0&&(v[w]=a.join(":").trim()),v},{})),p}function _S(u){const c=u.getAttribute("data-prefix"),p=u.getAttribute("data-icon"),v=u.innerText!==void 0?u.innerText.trim():"";let x=zm(v0(u));return x.prefix||(x.prefix=Mc()),c&&p&&(x.prefix=c,x.iconName=p),x.iconName&&x.prefix||(x.prefix&&v.length>0&&(x.iconName=G2(x.prefix,u.innerText)||w0(x.prefix,Ey(u.innerText))),!x.iconName&&On.autoFetchSvg&&u.firstChild&&u.firstChild.nodeType===Node.TEXT_NODE&&(x.iconName=u.firstChild.data)),x}function xS(u){const c=Td(u.attributes).reduce((x,T)=>(x.name!=="class"&&x.name!=="style"&&(x[T.name]=T.value),x),{}),p=u.getAttribute("title"),v=u.getAttribute("data-fa-title-id");return On.autoA11y&&(p?c["aria-labelledby"]="".concat(On.replacementClass,"-title-").concat(v||kf()):(c["aria-hidden"]="true",c.focusable="false")),c}function wS(){return{iconName:null,title:null,titleId:null,prefix:null,transform:fu,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Xv(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:p,prefix:v,rest:x}=_S(u),T=xS(u),w=Iy("parseNodeAttributes",{},u);let a=c.styleParser?vS(u):[];return Zt({iconName:p,title:u.getAttribute("title"),titleId:u.getAttribute("data-fa-title-id"),prefix:v,transform:fu,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:x,styles:a,attributes:T}},w)}const{styles:bS}=pu;function dx(u){const c=On.autoReplaceSvg==="nest"?Xv(u,{styleParser:!1}):Xv(u);return~c.extra.classes.indexOf(Z1)?kc("generateLayersText",u,c):kc("generateSvgReplacementMutation",u,c)}function SS(){return[...r2,...vy]}function Kv(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!nc)return Promise.resolve();const p=ui.documentElement.classList,v=D=>p.add("".concat(Lv,"-").concat(D)),x=D=>p.remove("".concat(Lv,"-").concat(D)),T=On.autoFetchSvg?SS():B1.concat(Object.keys(bS));T.includes("fa")||T.push("fa");const w=[".".concat(Z1,":not([").concat(Ph,"])")].concat(T.map(D=>".".concat(D,":not([").concat(Ph,"])"))).join(", ");if(w.length===0)return Promise.resolve();let a=[];try{a=Td(u.querySelectorAll(w))}catch{}if(a.length>0)v("pending"),x("complete");else return Promise.resolve();const L=S0.begin("onTree"),R=a.reduce((D,C)=>{try{const k=dx(C);k&&D.push(k)}catch(k){G1||k.name==="MissingIcon"&&console.error(k)}return D},[]);return new Promise((D,C)=>{Promise.all(R).then(k=>{cx(k,()=>{v("active"),v("complete"),x("pending"),typeof c=="function"&&c(),L(),D()})}).catch(k=>{L(),C(k)})})}function ES(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;dx(u).then(p=>{p&&cx([p],c)})}function TS(u){return function(c){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v=(c||{}).icon?c:Cy(c||{});let{mask:x}=p;return x&&(x=(x||{}).icon?x:Cy(x||{})),u(v,Zt(Zt({},p),{},{mask:x}))}}const IS=function(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:p=fu,symbol:v=!1,mask:x=null,maskId:T=null,title:w=null,titleId:a=null,classes:L=[],attributes:R={},styles:D={}}=c;if(!u)return;const{prefix:C,iconName:k,icon:V}=u;return Rm(Zt({type:"icon"},u),()=>(Ah("beforeDOMElementCreation",{iconDefinition:u,params:c}),On.autoA11y&&(w?R["aria-labelledby"]="".concat(On.replacementClass,"-title-").concat(a||kf()):(R["aria-hidden"]="true",R.focusable="false")),b0({icons:{main:Py(V),mask:x?Py(x.icon):{found:!1,width:null,height:null,icon:{}}},prefix:C,iconName:k,transform:Zt(Zt({},fu),p),symbol:v,title:w,maskId:T,titleId:a,extra:{attributes:R,styles:D,classes:L}})))};var CS={mixout(){return{icon:TS(IS)}},hooks(){return{mutationObserverCallbacks(u){return u.treeCallback=Kv,u.nodeCallback=ES,u}}},provides(u){u.i2svg=function(c){const{node:p=ui,callback:v=()=>{}}=c;return Kv(p,v)},u.generateSvgReplacementMutation=function(c,p){const{iconName:v,title:x,titleId:T,prefix:w,transform:a,symbol:L,mask:R,maskId:D,extra:C}=p;return new Promise((k,V)=>{Promise.all([Ay(v,w),R.iconName?Ay(R.iconName,R.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(N=>{let[Q,he]=N;k([c,b0({icons:{main:Q,mask:he},prefix:w,iconName:v,transform:a,symbol:L,maskId:D,title:x,titleId:T,extra:C,watchable:!0})])}).catch(V)})},u.generateAbstractIcon=function(c){let{children:p,attributes:v,main:x,transform:T,styles:w}=c;const a=Mm(w);a.length>0&&(v.style=a);let L;return _0(T)&&(L=kc("generateAbstractTransformGrouping",{main:x,transform:T,containerWidth:x.width,iconWidth:x.width})),p.push(L||x.icon),{children:p,attributes:v}}}},PS={mixout(){return{layer(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:p=[]}=c;return Rm({type:"layer"},()=>{Ah("beforeDOMElementCreation",{assembler:u,params:c});let v=[];return u(x=>{Array.isArray(x)?x.map(T=>{v=v.concat(T.abstract)}):v=v.concat(x.abstract)}),[{tag:"span",attributes:{class:["".concat(On.cssPrefix,"-layers"),...p].join(" ")},children:v}]})}}}},AS={mixout(){return{counter(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:p=null,classes:v=[],attributes:x={},styles:T={}}=c;return Rm({type:"counter",content:u},()=>(Ah("beforeDOMElementCreation",{content:u,params:c}),aS({content:u.toString(),title:p,extra:{attributes:x,styles:T,classes:["".concat(On.cssPrefix,"-layers-counter"),...v]}})))}}}},MS={mixout(){return{text(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:p=fu,title:v=null,classes:x=[],attributes:T={},styles:w={}}=c;return Rm({type:"text",content:u},()=>(Ah("beforeDOMElementCreation",{content:u,params:c}),Gv({content:u,transform:Zt(Zt({},fu),p),title:v,extra:{attributes:T,styles:w,classes:["".concat(On.cssPrefix,"-layers-text"),...x]}})))}}},provides(u){u.generateLayersText=function(c,p){const{title:v,transform:x,extra:T}=p;let w=null,a=null;if(L1){const L=parseInt(getComputedStyle(c).fontSize,10),R=c.getBoundingClientRect();w=R.width/L,a=R.height/L}return On.autoA11y&&!v&&(T.attributes["aria-hidden"]="true"),Promise.resolve([c,Gv({content:c.innerHTML,width:w,height:a,transform:x,title:v,extra:T,watchable:!0})])}}};const kS=new RegExp('"',"ug"),Yv=[1105920,1112319],Jv=Zt(Zt(Zt(Zt({},{FontAwesome:{normal:"fas",400:"fas"}}),e2),y2),c2),zy=Object.keys(Jv).reduce((u,c)=>(u[c.toLowerCase()]=Jv[c],u),{}),zS=Object.keys(zy).reduce((u,c)=>{const p=zy[c];return u[c]=p[900]||[...Object.entries(p)][0][1],u},{});function RS(u){const c=u.replace(kS,""),p=B2(c,0),v=p>=Yv[0]&&p<=Yv[1],x=c.length===2?c[0]===c[1]:!1;return{value:Ey(x?c[0]:c),isSecondary:v||x}}function FS(u,c){const p=u.replace(/^['"]|['"]$/g,"").toLowerCase(),v=parseInt(c),x=isNaN(v)?"normal":v;return(zy[p]||{})[x]||zS[p]}function Qv(u,c){const p="".concat(v2).concat(c.replace(":","-"));return new Promise((v,x)=>{if(u.getAttribute(p)!==null)return v();const w=Td(u.children).filter(k=>k.getAttribute(xy)===c)[0],a=Ac.getComputedStyle(u,c),L=a.getPropertyValue("font-family"),R=L.match(S2),D=a.getPropertyValue("font-weight"),C=a.getPropertyValue("content");if(w&&!R)return u.removeChild(w),v();if(R&&C!=="none"&&C!==""){const k=a.getPropertyValue("content");let V=FS(L,D);const{value:N,isSecondary:Q}=RS(k),he=R[0].startsWith("FontAwesome");let Te=w0(V,N),we=Te;if(he){const _e=H2(N);_e.iconName&&_e.prefix&&(Te=_e.iconName,V=_e.prefix)}if(Te&&!Q&&(!w||w.getAttribute(m0)!==V||w.getAttribute(g0)!==we)){u.setAttribute(p,we),w&&u.removeChild(w);const _e=wS(),{extra:Me}=_e;Me.attributes[xy]=c,Ay(Te,V).then(ne=>{const ce=b0(Zt(Zt({},_e),{},{icons:{main:ne,mask:sx()},prefix:V,iconName:we,extra:Me,watchable:!0})),M=ui.createElementNS("http://www.w3.org/2000/svg","svg");c==="::before"?u.insertBefore(M,u.firstChild):u.appendChild(M),M.outerHTML=ce.map($=>Uf($)).join(`
`),u.removeAttribute(p),v()}).catch(x)}else v()}else v()})}function OS(u){return Promise.all([Qv(u,"::before"),Qv(u,"::after")])}function jS(u){return u.parentNode!==document.head&&!~x2.indexOf(u.tagName.toUpperCase())&&!u.getAttribute(xy)&&(!u.parentNode||u.parentNode.tagName!=="svg")}function e_(u){if(nc)return new Promise((c,p)=>{const v=Td(u.querySelectorAll("*")).filter(jS).map(OS),x=S0.begin("searchPseudoElements");hx(),Promise.all(v).then(()=>{x(),ky(),c()}).catch(()=>{x(),ky(),p()})})}var LS={hooks(){return{mutationObserverCallbacks(u){return u.pseudoElementsCallback=e_,u}}},provides(u){u.pseudoElements2svg=function(c){const{node:p=ui}=c;On.searchPseudoElements&&e_(p)}}};let t_=!1;var DS={mixout(){return{dom:{unwatch(){hx(),t_=!0}}}},hooks(){return{bootstrap(){qv(Iy("mutationObserverCallbacks",{}))},noAuto(){yS()},watch(u){const{observeMutationsRoot:c}=u;t_?ky():qv(Iy("mutationObserverCallbacks",{observeMutationsRoot:c}))}}}};const n_=u=>{let c={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return u.toLowerCase().split(" ").reduce((p,v)=>{const x=v.toLowerCase().split("-"),T=x[0];let w=x.slice(1).join("-");if(T&&w==="h")return p.flipX=!0,p;if(T&&w==="v")return p.flipY=!0,p;if(w=parseFloat(w),isNaN(w))return p;switch(T){case"grow":p.size=p.size+w;break;case"shrink":p.size=p.size-w;break;case"left":p.x=p.x-w;break;case"right":p.x=p.x+w;break;case"up":p.y=p.y-w;break;case"down":p.y=p.y+w;break;case"rotate":p.rotate=p.rotate+w;break}return p},c)};var BS={mixout(){return{parse:{transform:u=>n_(u)}}},hooks(){return{parseNodeAttributes(u,c){const p=c.getAttribute("data-fa-transform");return p&&(u.transform=n_(p)),u}}},provides(u){u.generateAbstractTransformGrouping=function(c){let{main:p,transform:v,containerWidth:x,iconWidth:T}=c;const w={transform:"translate(".concat(x/2," 256)")},a="translate(".concat(v.x*32,", ").concat(v.y*32,") "),L="scale(".concat(v.size/16*(v.flipX?-1:1),", ").concat(v.size/16*(v.flipY?-1:1),") "),R="rotate(".concat(v.rotate," 0 0)"),D={transform:"".concat(a," ").concat(L," ").concat(R)},C={transform:"translate(".concat(T/2*-1," -256)")},k={outer:w,inner:D,path:C};return{tag:"g",attributes:Zt({},k.outer),children:[{tag:"g",attributes:Zt({},k.inner),children:[{tag:p.icon.tag,children:p.icon.children,attributes:Zt(Zt({},p.icon.attributes),k.path)}]}]}}}};const _g={x:0,y:0,width:"100%",height:"100%"};function r_(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u.attributes&&(u.attributes.fill||c)&&(u.attributes.fill="black"),u}function NS(u){return u.tag==="g"?u.children:[u]}var US={hooks(){return{parseNodeAttributes(u,c){const p=c.getAttribute("data-fa-mask"),v=p?zm(p.split(" ").map(x=>x.trim())):sx();return v.prefix||(v.prefix=Mc()),u.mask=v,u.maskId=c.getAttribute("data-fa-mask-id"),u}}},provides(u){u.generateAbstractMask=function(c){let{children:p,attributes:v,main:x,mask:T,maskId:w,transform:a}=c;const{width:L,icon:R}=x,{width:D,icon:C}=T,k=R2({transform:a,containerWidth:D,iconWidth:L}),V={tag:"rect",attributes:Zt(Zt({},_g),{},{fill:"white"})},N=R.children?{children:R.children.map(r_)}:{},Q={tag:"g",attributes:Zt({},k.inner),children:[r_(Zt({tag:R.tag,attributes:Zt(Zt({},R.attributes),k.path)},N))]},he={tag:"g",attributes:Zt({},k.outer),children:[Q]},Te="mask-".concat(w||kf()),we="clip-".concat(w||kf()),_e={tag:"mask",attributes:Zt(Zt({},_g),{},{id:Te,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[V,he]},Me={tag:"defs",children:[{tag:"clipPath",attributes:{id:we},children:NS(C)},_e]};return p.push(Me,{tag:"rect",attributes:Zt({fill:"currentColor","clip-path":"url(#".concat(we,")"),mask:"url(#".concat(Te,")")},_g)}),{children:p,attributes:v}}}},VS={provides(u){let c=!1;Ac.matchMedia&&(c=Ac.matchMedia("(prefers-reduced-motion: reduce)").matches),u.missingIconAbstract=function(){const p=[],v={fill:"currentColor"},x={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};p.push({tag:"path",attributes:Zt(Zt({},v),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const T=Zt(Zt({},x),{},{attributeName:"opacity"}),w={tag:"circle",attributes:Zt(Zt({},v),{},{cx:"256",cy:"364",r:"28"}),children:[]};return c||w.children.push({tag:"animate",attributes:Zt(Zt({},x),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Zt(Zt({},T),{},{values:"1;0;1;1;0;1;"})}),p.push(w),p.push({tag:"path",attributes:Zt(Zt({},v),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:c?[]:[{tag:"animate",attributes:Zt(Zt({},T),{},{values:"1;0;0;0;0;1;"})}]}),c||p.push({tag:"path",attributes:Zt(Zt({},v),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Zt(Zt({},T),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:p}}}},$S={hooks(){return{parseNodeAttributes(u,c){const p=c.getAttribute("data-fa-symbol"),v=p===null?!1:p===""?!0:p;return u.symbol=v,u}}}},GS=[j2,CS,PS,AS,MS,LS,DS,BS,US,VS,$S];eS(GS,{mixoutsTo:Pa});Pa.noAuto;Pa.config;Pa.library;Pa.dom;const Ry=Pa.parse;Pa.findIconDefinition;Pa.toHtml;const HS=Pa.icon;Pa.layer;Pa.text;Pa.counter;var xg={exports:{}},wg,i_;function ZS(){if(i_)return wg;i_=1;var u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wg=u,wg}var bg,o_;function WS(){if(o_)return bg;o_=1;var u=ZS();function c(){}function p(){}return p.resetWarningCache=c,bg=function(){function v(w,a,L,R,D,C){if(C!==u){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}v.isRequired=v;function x(){return v}var T={array:v,bigint:v,bool:v,func:v,number:v,object:v,string:v,symbol:v,any:v,arrayOf:x,element:v,elementType:v,instanceOf:x,node:v,objectOf:x,oneOf:x,oneOfType:x,shape:x,exact:x,checkPropTypes:p,resetWarningCache:c};return T.PropTypes=T,T},bg}var s_;function qS(){return s_||(s_=1,xg.exports=WS()()),xg.exports}var XS=qS();const dr=Df(XS);function a_(u,c){var p=Object.keys(u);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(u);c&&(v=v.filter(function(x){return Object.getOwnPropertyDescriptor(u,x).enumerable})),p.push.apply(p,v)}return p}function cu(u){for(var c=1;c<arguments.length;c++){var p=arguments[c]!=null?arguments[c]:{};c%2?a_(Object(p),!0).forEach(function(v){pd(u,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):a_(Object(p)).forEach(function(v){Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(p,v))})}return u}function im(u){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},im(u)}function pd(u,c,p){return c in u?Object.defineProperty(u,c,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[c]=p,u}function KS(u,c){if(u==null)return{};var p={},v=Object.keys(u),x,T;for(T=0;T<v.length;T++)x=v[T],!(c.indexOf(x)>=0)&&(p[x]=u[x]);return p}function YS(u,c){if(u==null)return{};var p=KS(u,c),v,x;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(u);for(x=0;x<T.length;x++)v=T[x],!(c.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(u,v)&&(p[v]=u[v])}return p}function Fy(u){return JS(u)||QS(u)||eE(u)||tE()}function JS(u){if(Array.isArray(u))return Oy(u)}function QS(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function eE(u,c){if(u){if(typeof u=="string")return Oy(u,c);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Oy(u,c)}}function Oy(u,c){(c==null||c>u.length)&&(c=u.length);for(var p=0,v=new Array(c);p<c;p++)v[p]=u[p];return v}function tE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nE(u){var c,p=u.beat,v=u.fade,x=u.beatFade,T=u.bounce,w=u.shake,a=u.flash,L=u.spin,R=u.spinPulse,D=u.spinReverse,C=u.pulse,k=u.fixedWidth,V=u.inverse,N=u.border,Q=u.listItem,he=u.flip,Te=u.size,we=u.rotation,_e=u.pull,Me=(c={"fa-beat":p,"fa-fade":v,"fa-beat-fade":x,"fa-bounce":T,"fa-shake":w,"fa-flash":a,"fa-spin":L,"fa-spin-reverse":D,"fa-spin-pulse":R,"fa-pulse":C,"fa-fw":k,"fa-inverse":V,"fa-border":N,"fa-li":Q,"fa-flip":he===!0,"fa-flip-horizontal":he==="horizontal"||he==="both","fa-flip-vertical":he==="vertical"||he==="both"},pd(c,"fa-".concat(Te),typeof Te<"u"&&Te!==null),pd(c,"fa-rotate-".concat(we),typeof we<"u"&&we!==null&&we!==0),pd(c,"fa-pull-".concat(_e),typeof _e<"u"&&_e!==null),pd(c,"fa-swap-opacity",u.swapOpacity),c);return Object.keys(Me).map(function(ne){return Me[ne]?ne:null}).filter(function(ne){return ne})}function rE(u){return u=u-0,u===u}function fx(u){return rE(u)?u:(u=u.replace(/[\-_\s]+(.)?/g,function(c,p){return p?p.toUpperCase():""}),u.substr(0,1).toLowerCase()+u.substr(1))}var iE=["style"];function oE(u){return u.charAt(0).toUpperCase()+u.slice(1)}function sE(u){return u.split(";").map(function(c){return c.trim()}).filter(function(c){return c}).reduce(function(c,p){var v=p.indexOf(":"),x=fx(p.slice(0,v)),T=p.slice(v+1).trim();return x.startsWith("webkit")?c[oE(x)]=T:c[x]=T,c},{})}function px(u,c){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof c=="string")return c;var v=(c.children||[]).map(function(L){return px(u,L)}),x=Object.keys(c.attributes||{}).reduce(function(L,R){var D=c.attributes[R];switch(R){case"class":L.attrs.className=D,delete c.attributes.class;break;case"style":L.attrs.style=sE(D);break;default:R.indexOf("aria-")===0||R.indexOf("data-")===0?L.attrs[R.toLowerCase()]=D:L.attrs[fx(R)]=D}return L},{attrs:{}}),T=p.style,w=T===void 0?{}:T,a=YS(p,iE);return x.attrs.style=cu(cu({},x.attrs.style),w),u.apply(void 0,[c.tag,cu(cu({},x.attrs),a)].concat(Fy(v)))}var mx=!1;try{mx=!0}catch{}function aE(){if(!mx&&console&&typeof console.error=="function"){var u;(u=console).error.apply(u,arguments)}}function l_(u){if(u&&im(u)==="object"&&u.prefix&&u.iconName&&u.icon)return u;if(Ry.icon)return Ry.icon(u);if(u===null)return null;if(u&&im(u)==="object"&&u.prefix&&u.iconName)return u;if(Array.isArray(u)&&u.length===2)return{prefix:u[0],iconName:u[1]};if(typeof u=="string")return{prefix:"fas",iconName:u}}function Sg(u,c){return Array.isArray(c)&&c.length>0||!Array.isArray(c)&&c?pd({},u,c):{}}var u_={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Pc=d0.forwardRef(function(u,c){var p=cu(cu({},u_),u),v=p.icon,x=p.mask,T=p.symbol,w=p.className,a=p.title,L=p.titleId,R=p.maskId,D=l_(v),C=Sg("classes",[].concat(Fy(nE(p)),Fy((w||"").split(" ")))),k=Sg("transform",typeof p.transform=="string"?Ry.transform(p.transform):p.transform),V=Sg("mask",l_(x)),N=HS(D,cu(cu(cu(cu({},C),k),V),{},{symbol:T,title:a,titleId:L,maskId:R}));if(!N)return aE("Could not find icon",D),null;var Q=N.abstract,he={ref:c};return Object.keys(p).forEach(function(Te){u_.hasOwnProperty(Te)||(he[Te]=p[Te])}),lE(Q[0],he)});Pc.displayName="FontAwesomeIcon";Pc.propTypes={beat:dr.bool,border:dr.bool,beatFade:dr.bool,bounce:dr.bool,className:dr.string,fade:dr.bool,flash:dr.bool,mask:dr.oneOfType([dr.object,dr.array,dr.string]),maskId:dr.string,fixedWidth:dr.bool,inverse:dr.bool,flip:dr.oneOf([!0,!1,"horizontal","vertical","both"]),icon:dr.oneOfType([dr.object,dr.array,dr.string]),listItem:dr.bool,pull:dr.oneOf(["right","left"]),pulse:dr.bool,rotation:dr.oneOf([0,90,180,270]),shake:dr.bool,size:dr.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:dr.bool,spinPulse:dr.bool,spinReverse:dr.bool,symbol:dr.oneOfType([dr.bool,dr.string]),title:dr.string,titleId:dr.string,transform:dr.oneOfType([dr.string,dr.object]),swapOpacity:dr.bool};var lE=px.bind(null,d0.createElement);/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const uE={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},jy={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},cE={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},hE=cE;function Bp(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Eg={exports:{}},c_;function dE(){return c_||(c_=1,function(u,c){(function(p){u.exports=p()})(function(){return function(){function p(v,x,T){function w(R,D){if(!x[R]){if(!v[R]){var C=typeof Bp=="function"&&Bp;if(!D&&C)return C(R,!0);if(a)return a(R,!0);var k=new Error("Cannot find module '"+R+"'");throw k.code="MODULE_NOT_FOUND",k}var V=x[R]={exports:{}};v[R][0].call(V.exports,function(N){var Q=v[R][1][N];return w(Q||N)},V,V.exports,p,v,x,T)}return x[R].exports}for(var a=typeof Bp=="function"&&Bp,L=0;L<T.length;L++)w(T[L]);return w}return p}()({1:[function(p,v,x){x.byteLength=k,x.toByteArray=N,x.fromByteArray=Te;for(var T=[],w=[],a=typeof Uint8Array<"u"?Uint8Array:Array,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0,D=L.length;R<D;++R)T[R]=L[R],w[L.charCodeAt(R)]=R;w[45]=62,w[95]=63;function C(we){var _e=we.length;if(_e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Me=we.indexOf("=");Me===-1&&(Me=_e);var ne=Me===_e?0:4-Me%4;return[Me,ne]}function k(we){var _e=C(we),Me=_e[0],ne=_e[1];return(Me+ne)*3/4-ne}function V(we,_e,Me){return(_e+Me)*3/4-Me}function N(we){var _e,Me=C(we),ne=Me[0],ce=Me[1],M=new a(V(we,ne,ce)),$=0,U=ce>0?ne-4:ne,de;for(de=0;de<U;de+=4)_e=w[we.charCodeAt(de)]<<18|w[we.charCodeAt(de+1)]<<12|w[we.charCodeAt(de+2)]<<6|w[we.charCodeAt(de+3)],M[$++]=_e>>16&255,M[$++]=_e>>8&255,M[$++]=_e&255;return ce===2&&(_e=w[we.charCodeAt(de)]<<2|w[we.charCodeAt(de+1)]>>4,M[$++]=_e&255),ce===1&&(_e=w[we.charCodeAt(de)]<<10|w[we.charCodeAt(de+1)]<<4|w[we.charCodeAt(de+2)]>>2,M[$++]=_e>>8&255,M[$++]=_e&255),M}function Q(we){return T[we>>18&63]+T[we>>12&63]+T[we>>6&63]+T[we&63]}function he(we,_e,Me){for(var ne,ce=[],M=_e;M<Me;M+=3)ne=(we[M]<<16&16711680)+(we[M+1]<<8&65280)+(we[M+2]&255),ce.push(Q(ne));return ce.join("")}function Te(we){for(var _e,Me=we.length,ne=Me%3,ce=[],M=16383,$=0,U=Me-ne;$<U;$+=M)ce.push(he(we,$,$+M>U?U:$+M));return ne===1?(_e=we[Me-1],ce.push(T[_e>>2]+T[_e<<4&63]+"==")):ne===2&&(_e=(we[Me-2]<<8)+we[Me-1],ce.push(T[_e>>10]+T[_e>>4&63]+T[_e<<2&63]+"=")),ce.join("")}},{}],2:[function(p,v,x){(function(T){(function(){var w=p("base64-js"),a=p("ieee754");x.Buffer=C,x.SlowBuffer=ne,x.INSPECT_MAX_BYTES=50;var L=2147483647;x.kMaxLength=L,C.TYPED_ARRAY_SUPPORT=R(),!C.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function R(){try{var ze=new Uint8Array(1);return ze.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ze.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}});function D(ze){if(ze>L)throw new RangeError('The value "'+ze+'" is invalid for option "size"');var G=new Uint8Array(ze);return G.__proto__=C.prototype,G}function C(ze,G,H){if(typeof ze=="number"){if(typeof G=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Q(ze)}return k(ze,G,H)}typeof Symbol<"u"&&Symbol.species!=null&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),C.poolSize=8192;function k(ze,G,H){if(typeof ze=="string")return he(ze,G);if(ArrayBuffer.isView(ze))return Te(ze);if(ze==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ze);if(cn(ze,ArrayBuffer)||ze&&cn(ze.buffer,ArrayBuffer))return we(ze,G,H);if(typeof ze=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ce=ze.valueOf&&ze.valueOf();if(Ce!=null&&Ce!==ze)return C.from(Ce,G,H);var rt=_e(ze);if(rt)return rt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ze[Symbol.toPrimitive]=="function")return C.from(ze[Symbol.toPrimitive]("string"),G,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ze)}C.from=function(ze,G,H){return k(ze,G,H)},C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array;function V(ze){if(typeof ze!="number")throw new TypeError('"size" argument must be of type number');if(ze<0)throw new RangeError('The value "'+ze+'" is invalid for option "size"')}function N(ze,G,H){return V(ze),ze<=0?D(ze):G!==void 0?typeof H=="string"?D(ze).fill(G,H):D(ze).fill(G):D(ze)}C.alloc=function(ze,G,H){return N(ze,G,H)};function Q(ze){return V(ze),D(ze<0?0:Me(ze)|0)}C.allocUnsafe=function(ze){return Q(ze)},C.allocUnsafeSlow=function(ze){return Q(ze)};function he(ze,G){if((typeof G!="string"||G==="")&&(G="utf8"),!C.isEncoding(G))throw new TypeError("Unknown encoding: "+G);var H=ce(ze,G)|0,Ce=D(H),rt=Ce.write(ze,G);return rt!==H&&(Ce=Ce.slice(0,rt)),Ce}function Te(ze){for(var G=ze.length<0?0:Me(ze.length)|0,H=D(G),Ce=0;Ce<G;Ce+=1)H[Ce]=ze[Ce]&255;return H}function we(ze,G,H){if(G<0||ze.byteLength<G)throw new RangeError('"offset" is outside of buffer bounds');if(ze.byteLength<G+(H||0))throw new RangeError('"length" is outside of buffer bounds');var Ce;return G===void 0&&H===void 0?Ce=new Uint8Array(ze):H===void 0?Ce=new Uint8Array(ze,G):Ce=new Uint8Array(ze,G,H),Ce.__proto__=C.prototype,Ce}function _e(ze){if(C.isBuffer(ze)){var G=Me(ze.length)|0,H=D(G);return H.length===0||ze.copy(H,0,0,G),H}if(ze.length!==void 0)return typeof ze.length!="number"||en(ze.length)?D(0):Te(ze);if(ze.type==="Buffer"&&Array.isArray(ze.data))return Te(ze.data)}function Me(ze){if(ze>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return ze|0}function ne(ze){return+ze!=ze&&(ze=0),C.alloc(+ze)}C.isBuffer=function(G){return G!=null&&G._isBuffer===!0&&G!==C.prototype},C.compare=function(G,H){if(cn(G,Uint8Array)&&(G=C.from(G,G.offset,G.byteLength)),cn(H,Uint8Array)&&(H=C.from(H,H.offset,H.byteLength)),!C.isBuffer(G)||!C.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(G===H)return 0;for(var Ce=G.length,rt=H.length,ct=0,Et=Math.min(Ce,rt);ct<Et;++ct)if(G[ct]!==H[ct]){Ce=G[ct],rt=H[ct];break}return Ce<rt?-1:rt<Ce?1:0},C.isEncoding=function(G){switch(String(G).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(G,H){if(!Array.isArray(G))throw new TypeError('"list" argument must be an Array of Buffers');if(G.length===0)return C.alloc(0);var Ce;if(H===void 0)for(H=0,Ce=0;Ce<G.length;++Ce)H+=G[Ce].length;var rt=C.allocUnsafe(H),ct=0;for(Ce=0;Ce<G.length;++Ce){var Et=G[Ce];if(cn(Et,Uint8Array)&&(Et=C.from(Et)),!C.isBuffer(Et))throw new TypeError('"list" argument must be an Array of Buffers');Et.copy(rt,ct),ct+=Et.length}return rt};function ce(ze,G){if(C.isBuffer(ze))return ze.length;if(ArrayBuffer.isView(ze)||cn(ze,ArrayBuffer))return ze.byteLength;if(typeof ze!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ze);var H=ze.length,Ce=arguments.length>2&&arguments[2]===!0;if(!Ce&&H===0)return 0;for(var rt=!1;;)switch(G){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return Yt(ze).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return at(ze).length;default:if(rt)return Ce?-1:Yt(ze).length;G=(""+G).toLowerCase(),rt=!0}}C.byteLength=ce;function M(ze,G,H){var Ce=!1;if((G===void 0||G<0)&&(G=0),G>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,G>>>=0,H<=G))return"";for(ze||(ze="utf8");;)switch(ze){case"hex":return Oe(this,G,H);case"utf8":case"utf-8":return se(this,G,H);case"ascii":return ve(this,G,H);case"latin1":case"binary":return De(this,G,H);case"base64":return te(this,G,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,G,H);default:if(Ce)throw new TypeError("Unknown encoding: "+ze);ze=(ze+"").toLowerCase(),Ce=!0}}C.prototype._isBuffer=!0;function $(ze,G,H){var Ce=ze[G];ze[G]=ze[H],ze[H]=Ce}C.prototype.swap16=function(){var G=this.length;if(G%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<G;H+=2)$(this,H,H+1);return this},C.prototype.swap32=function(){var G=this.length;if(G%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<G;H+=4)$(this,H,H+3),$(this,H+1,H+2);return this},C.prototype.swap64=function(){var G=this.length;if(G%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<G;H+=8)$(this,H,H+7),$(this,H+1,H+6),$(this,H+2,H+5),$(this,H+3,H+4);return this},C.prototype.toString=function(){var G=this.length;return G===0?"":arguments.length===0?se(this,0,G):M.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(G){if(!C.isBuffer(G))throw new TypeError("Argument must be a Buffer");return this===G?!0:C.compare(this,G)===0},C.prototype.inspect=function(){var G="",H=x.INSPECT_MAX_BYTES;return G=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(G+=" ... "),"<Buffer "+G+">"},C.prototype.compare=function(G,H,Ce,rt,ct){if(cn(G,Uint8Array)&&(G=C.from(G,G.offset,G.byteLength)),!C.isBuffer(G))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof G);if(H===void 0&&(H=0),Ce===void 0&&(Ce=G?G.length:0),rt===void 0&&(rt=0),ct===void 0&&(ct=this.length),H<0||Ce>G.length||rt<0||ct>this.length)throw new RangeError("out of range index");if(rt>=ct&&H>=Ce)return 0;if(rt>=ct)return-1;if(H>=Ce)return 1;if(H>>>=0,Ce>>>=0,rt>>>=0,ct>>>=0,this===G)return 0;for(var Et=ct-rt,ye=Ce-H,z=Math.min(Et,ye),q=this.slice(rt,ct),Re=G.slice(H,Ce),Je=0;Je<z;++Je)if(q[Je]!==Re[Je]){Et=q[Je],ye=Re[Je];break}return Et<ye?-1:ye<Et?1:0};function U(ze,G,H,Ce,rt){if(ze.length===0)return-1;if(typeof H=="string"?(Ce=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,en(H)&&(H=rt?0:ze.length-1),H<0&&(H=ze.length+H),H>=ze.length){if(rt)return-1;H=ze.length-1}else if(H<0)if(rt)H=0;else return-1;if(typeof G=="string"&&(G=C.from(G,Ce)),C.isBuffer(G))return G.length===0?-1:de(ze,G,H,Ce,rt);if(typeof G=="number")return G=G&255,typeof Uint8Array.prototype.indexOf=="function"?rt?Uint8Array.prototype.indexOf.call(ze,G,H):Uint8Array.prototype.lastIndexOf.call(ze,G,H):de(ze,[G],H,Ce,rt);throw new TypeError("val must be string, number or Buffer")}function de(ze,G,H,Ce,rt){var ct=1,Et=ze.length,ye=G.length;if(Ce!==void 0&&(Ce=String(Ce).toLowerCase(),Ce==="ucs2"||Ce==="ucs-2"||Ce==="utf16le"||Ce==="utf-16le")){if(ze.length<2||G.length<2)return-1;ct=2,Et/=2,ye/=2,H/=2}function z(Qe,jt){return ct===1?Qe[jt]:Qe.readUInt16BE(jt*ct)}var q;if(rt){var Re=-1;for(q=H;q<Et;q++)if(z(ze,q)===z(G,Re===-1?0:q-Re)){if(Re===-1&&(Re=q),q-Re+1===ye)return Re*ct}else Re!==-1&&(q-=q-Re),Re=-1}else for(H+ye>Et&&(H=Et-ye),q=H;q>=0;q--){for(var Je=!0,ft=0;ft<ye;ft++)if(z(ze,q+ft)!==z(G,ft)){Je=!1;break}if(Je)return q}return-1}C.prototype.includes=function(G,H,Ce){return this.indexOf(G,H,Ce)!==-1},C.prototype.indexOf=function(G,H,Ce){return U(this,G,H,Ce,!0)},C.prototype.lastIndexOf=function(G,H,Ce){return U(this,G,H,Ce,!1)};function K(ze,G,H,Ce){H=Number(H)||0;var rt=ze.length-H;Ce?(Ce=Number(Ce),Ce>rt&&(Ce=rt)):Ce=rt;var ct=G.length;Ce>ct/2&&(Ce=ct/2);for(var Et=0;Et<Ce;++Et){var ye=parseInt(G.substr(Et*2,2),16);if(en(ye))return Et;ze[H+Et]=ye}return Et}function j(ze,G,H,Ce){return kn(Yt(G,ze.length-H),ze,H,Ce)}function W(ze,G,H,Ce){return kn(un(G),ze,H,Ce)}function J(ze,G,H,Ce){return W(ze,G,H,Ce)}function re(ze,G,H,Ce){return kn(at(G),ze,H,Ce)}function ue(ze,G,H,Ce){return kn(In(G,ze.length-H),ze,H,Ce)}C.prototype.write=function(G,H,Ce,rt){if(H===void 0)rt="utf8",Ce=this.length,H=0;else if(Ce===void 0&&typeof H=="string")rt=H,Ce=this.length,H=0;else if(isFinite(H))H=H>>>0,isFinite(Ce)?(Ce=Ce>>>0,rt===void 0&&(rt="utf8")):(rt=Ce,Ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ct=this.length-H;if((Ce===void 0||Ce>ct)&&(Ce=ct),G.length>0&&(Ce<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");rt||(rt="utf8");for(var Et=!1;;)switch(rt){case"hex":return K(this,G,H,Ce);case"utf8":case"utf-8":return j(this,G,H,Ce);case"ascii":return W(this,G,H,Ce);case"latin1":case"binary":return J(this,G,H,Ce);case"base64":return re(this,G,H,Ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,G,H,Ce);default:if(Et)throw new TypeError("Unknown encoding: "+rt);rt=(""+rt).toLowerCase(),Et=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function te(ze,G,H){return G===0&&H===ze.length?w.fromByteArray(ze):w.fromByteArray(ze.slice(G,H))}function se(ze,G,H){H=Math.min(ze.length,H);for(var Ce=[],rt=G;rt<H;){var ct=ze[rt],Et=null,ye=ct>239?4:ct>223?3:ct>191?2:1;if(rt+ye<=H){var z,q,Re,Je;switch(ye){case 1:ct<128&&(Et=ct);break;case 2:z=ze[rt+1],(z&192)===128&&(Je=(ct&31)<<6|z&63,Je>127&&(Et=Je));break;case 3:z=ze[rt+1],q=ze[rt+2],(z&192)===128&&(q&192)===128&&(Je=(ct&15)<<12|(z&63)<<6|q&63,Je>2047&&(Je<55296||Je>57343)&&(Et=Je));break;case 4:z=ze[rt+1],q=ze[rt+2],Re=ze[rt+3],(z&192)===128&&(q&192)===128&&(Re&192)===128&&(Je=(ct&15)<<18|(z&63)<<12|(q&63)<<6|Re&63,Je>65535&&Je<1114112&&(Et=Je))}}Et===null?(Et=65533,ye=1):Et>65535&&(Et-=65536,Ce.push(Et>>>10&1023|55296),Et=56320|Et&1023),Ce.push(Et),rt+=ye}return ie(Ce)}var xe=4096;function ie(ze){var G=ze.length;if(G<=xe)return String.fromCharCode.apply(String,ze);for(var H="",Ce=0;Ce<G;)H+=String.fromCharCode.apply(String,ze.slice(Ce,Ce+=xe));return H}function ve(ze,G,H){var Ce="";H=Math.min(ze.length,H);for(var rt=G;rt<H;++rt)Ce+=String.fromCharCode(ze[rt]&127);return Ce}function De(ze,G,H){var Ce="";H=Math.min(ze.length,H);for(var rt=G;rt<H;++rt)Ce+=String.fromCharCode(ze[rt]);return Ce}function Oe(ze,G,H){var Ce=ze.length;(!G||G<0)&&(G=0),(!H||H<0||H>Ce)&&(H=Ce);for(var rt="",ct=G;ct<H;++ct)rt+=kt(ze[ct]);return rt}function Le(ze,G,H){for(var Ce=ze.slice(G,H),rt="",ct=0;ct<Ce.length;ct+=2)rt+=String.fromCharCode(Ce[ct]+Ce[ct+1]*256);return rt}C.prototype.slice=function(G,H){var Ce=this.length;G=~~G,H=H===void 0?Ce:~~H,G<0?(G+=Ce,G<0&&(G=0)):G>Ce&&(G=Ce),H<0?(H+=Ce,H<0&&(H=0)):H>Ce&&(H=Ce),H<G&&(H=G);var rt=this.subarray(G,H);return rt.__proto__=C.prototype,rt};function Ye(ze,G,H){if(ze%1!==0||ze<0)throw new RangeError("offset is not uint");if(ze+G>H)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUIntLE=function(G,H,Ce){G=G>>>0,H=H>>>0,Ce||Ye(G,H,this.length);for(var rt=this[G],ct=1,Et=0;++Et<H&&(ct*=256);)rt+=this[G+Et]*ct;return rt},C.prototype.readUIntBE=function(G,H,Ce){G=G>>>0,H=H>>>0,Ce||Ye(G,H,this.length);for(var rt=this[G+--H],ct=1;H>0&&(ct*=256);)rt+=this[G+--H]*ct;return rt},C.prototype.readUInt8=function(G,H){return G=G>>>0,H||Ye(G,1,this.length),this[G]},C.prototype.readUInt16LE=function(G,H){return G=G>>>0,H||Ye(G,2,this.length),this[G]|this[G+1]<<8},C.prototype.readUInt16BE=function(G,H){return G=G>>>0,H||Ye(G,2,this.length),this[G]<<8|this[G+1]},C.prototype.readUInt32LE=function(G,H){return G=G>>>0,H||Ye(G,4,this.length),(this[G]|this[G+1]<<8|this[G+2]<<16)+this[G+3]*16777216},C.prototype.readUInt32BE=function(G,H){return G=G>>>0,H||Ye(G,4,this.length),this[G]*16777216+(this[G+1]<<16|this[G+2]<<8|this[G+3])},C.prototype.readIntLE=function(G,H,Ce){G=G>>>0,H=H>>>0,Ce||Ye(G,H,this.length);for(var rt=this[G],ct=1,Et=0;++Et<H&&(ct*=256);)rt+=this[G+Et]*ct;return ct*=128,rt>=ct&&(rt-=Math.pow(2,8*H)),rt},C.prototype.readIntBE=function(G,H,Ce){G=G>>>0,H=H>>>0,Ce||Ye(G,H,this.length);for(var rt=H,ct=1,Et=this[G+--rt];rt>0&&(ct*=256);)Et+=this[G+--rt]*ct;return ct*=128,Et>=ct&&(Et-=Math.pow(2,8*H)),Et},C.prototype.readInt8=function(G,H){return G=G>>>0,H||Ye(G,1,this.length),this[G]&128?(255-this[G]+1)*-1:this[G]},C.prototype.readInt16LE=function(G,H){G=G>>>0,H||Ye(G,2,this.length);var Ce=this[G]|this[G+1]<<8;return Ce&32768?Ce|4294901760:Ce},C.prototype.readInt16BE=function(G,H){G=G>>>0,H||Ye(G,2,this.length);var Ce=this[G+1]|this[G]<<8;return Ce&32768?Ce|4294901760:Ce},C.prototype.readInt32LE=function(G,H){return G=G>>>0,H||Ye(G,4,this.length),this[G]|this[G+1]<<8|this[G+2]<<16|this[G+3]<<24},C.prototype.readInt32BE=function(G,H){return G=G>>>0,H||Ye(G,4,this.length),this[G]<<24|this[G+1]<<16|this[G+2]<<8|this[G+3]},C.prototype.readFloatLE=function(G,H){return G=G>>>0,H||Ye(G,4,this.length),a.read(this,G,!0,23,4)},C.prototype.readFloatBE=function(G,H){return G=G>>>0,H||Ye(G,4,this.length),a.read(this,G,!1,23,4)},C.prototype.readDoubleLE=function(G,H){return G=G>>>0,H||Ye(G,8,this.length),a.read(this,G,!0,52,8)},C.prototype.readDoubleBE=function(G,H){return G=G>>>0,H||Ye(G,8,this.length),a.read(this,G,!1,52,8)};function tt(ze,G,H,Ce,rt,ct){if(!C.isBuffer(ze))throw new TypeError('"buffer" argument must be a Buffer instance');if(G>rt||G<ct)throw new RangeError('"value" argument is out of bounds');if(H+Ce>ze.length)throw new RangeError("Index out of range")}C.prototype.writeUIntLE=function(G,H,Ce,rt){if(G=+G,H=H>>>0,Ce=Ce>>>0,!rt){var ct=Math.pow(2,8*Ce)-1;tt(this,G,H,Ce,ct,0)}var Et=1,ye=0;for(this[H]=G&255;++ye<Ce&&(Et*=256);)this[H+ye]=G/Et&255;return H+Ce},C.prototype.writeUIntBE=function(G,H,Ce,rt){if(G=+G,H=H>>>0,Ce=Ce>>>0,!rt){var ct=Math.pow(2,8*Ce)-1;tt(this,G,H,Ce,ct,0)}var Et=Ce-1,ye=1;for(this[H+Et]=G&255;--Et>=0&&(ye*=256);)this[H+Et]=G/ye&255;return H+Ce},C.prototype.writeUInt8=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,1,255,0),this[H]=G&255,H+1},C.prototype.writeUInt16LE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,2,65535,0),this[H]=G&255,this[H+1]=G>>>8,H+2},C.prototype.writeUInt16BE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,2,65535,0),this[H]=G>>>8,this[H+1]=G&255,H+2},C.prototype.writeUInt32LE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,4,4294967295,0),this[H+3]=G>>>24,this[H+2]=G>>>16,this[H+1]=G>>>8,this[H]=G&255,H+4},C.prototype.writeUInt32BE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,4,4294967295,0),this[H]=G>>>24,this[H+1]=G>>>16,this[H+2]=G>>>8,this[H+3]=G&255,H+4},C.prototype.writeIntLE=function(G,H,Ce,rt){if(G=+G,H=H>>>0,!rt){var ct=Math.pow(2,8*Ce-1);tt(this,G,H,Ce,ct-1,-ct)}var Et=0,ye=1,z=0;for(this[H]=G&255;++Et<Ce&&(ye*=256);)G<0&&z===0&&this[H+Et-1]!==0&&(z=1),this[H+Et]=(G/ye>>0)-z&255;return H+Ce},C.prototype.writeIntBE=function(G,H,Ce,rt){if(G=+G,H=H>>>0,!rt){var ct=Math.pow(2,8*Ce-1);tt(this,G,H,Ce,ct-1,-ct)}var Et=Ce-1,ye=1,z=0;for(this[H+Et]=G&255;--Et>=0&&(ye*=256);)G<0&&z===0&&this[H+Et+1]!==0&&(z=1),this[H+Et]=(G/ye>>0)-z&255;return H+Ce},C.prototype.writeInt8=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,1,127,-128),G<0&&(G=255+G+1),this[H]=G&255,H+1},C.prototype.writeInt16LE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,2,32767,-32768),this[H]=G&255,this[H+1]=G>>>8,H+2},C.prototype.writeInt16BE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,2,32767,-32768),this[H]=G>>>8,this[H+1]=G&255,H+2},C.prototype.writeInt32LE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,4,2147483647,-2147483648),this[H]=G&255,this[H+1]=G>>>8,this[H+2]=G>>>16,this[H+3]=G>>>24,H+4},C.prototype.writeInt32BE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,4,2147483647,-2147483648),G<0&&(G=4294967295+G+1),this[H]=G>>>24,this[H+1]=G>>>16,this[H+2]=G>>>8,this[H+3]=G&255,H+4};function pt(ze,G,H,Ce,rt,ct){if(H+Ce>ze.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function _t(ze,G,H,Ce,rt){return G=+G,H=H>>>0,rt||pt(ze,G,H,4),a.write(ze,G,H,Ce,23,4),H+4}C.prototype.writeFloatLE=function(G,H,Ce){return _t(this,G,H,!0,Ce)},C.prototype.writeFloatBE=function(G,H,Ce){return _t(this,G,H,!1,Ce)};function Pt(ze,G,H,Ce,rt){return G=+G,H=H>>>0,rt||pt(ze,G,H,8),a.write(ze,G,H,Ce,52,8),H+8}C.prototype.writeDoubleLE=function(G,H,Ce){return Pt(this,G,H,!0,Ce)},C.prototype.writeDoubleBE=function(G,H,Ce){return Pt(this,G,H,!1,Ce)},C.prototype.copy=function(G,H,Ce,rt){if(!C.isBuffer(G))throw new TypeError("argument should be a Buffer");if(Ce||(Ce=0),!rt&&rt!==0&&(rt=this.length),H>=G.length&&(H=G.length),H||(H=0),rt>0&&rt<Ce&&(rt=Ce),rt===Ce||G.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(Ce<0||Ce>=this.length)throw new RangeError("Index out of range");if(rt<0)throw new RangeError("sourceEnd out of bounds");rt>this.length&&(rt=this.length),G.length-H<rt-Ce&&(rt=G.length-H+Ce);var ct=rt-Ce;if(this===G&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(H,Ce,rt);else if(this===G&&Ce<H&&H<rt)for(var Et=ct-1;Et>=0;--Et)G[Et+H]=this[Et+Ce];else Uint8Array.prototype.set.call(G,this.subarray(Ce,rt),H);return ct},C.prototype.fill=function(G,H,Ce,rt){if(typeof G=="string"){if(typeof H=="string"?(rt=H,H=0,Ce=this.length):typeof Ce=="string"&&(rt=Ce,Ce=this.length),rt!==void 0&&typeof rt!="string")throw new TypeError("encoding must be a string");if(typeof rt=="string"&&!C.isEncoding(rt))throw new TypeError("Unknown encoding: "+rt);if(G.length===1){var ct=G.charCodeAt(0);(rt==="utf8"&&ct<128||rt==="latin1")&&(G=ct)}}else typeof G=="number"&&(G=G&255);if(H<0||this.length<H||this.length<Ce)throw new RangeError("Out of range index");if(Ce<=H)return this;H=H>>>0,Ce=Ce===void 0?this.length:Ce>>>0,G||(G=0);var Et;if(typeof G=="number")for(Et=H;Et<Ce;++Et)this[Et]=G;else{var ye=C.isBuffer(G)?G:C.from(G,rt),z=ye.length;if(z===0)throw new TypeError('The value "'+G+'" is invalid for argument "value"');for(Et=0;Et<Ce-H;++Et)this[Et+H]=ye[Et%z]}return this};var Wt=/[^+/0-9A-Za-z-_]/g;function Tt(ze){if(ze=ze.split("=")[0],ze=ze.trim().replace(Wt,""),ze.length<2)return"";for(;ze.length%4!==0;)ze=ze+"=";return ze}function kt(ze){return ze<16?"0"+ze.toString(16):ze.toString(16)}function Yt(ze,G){G=G||1/0;for(var H,Ce=ze.length,rt=null,ct=[],Et=0;Et<Ce;++Et){if(H=ze.charCodeAt(Et),H>55295&&H<57344){if(!rt){if(H>56319){(G-=3)>-1&&ct.push(239,191,189);continue}else if(Et+1===Ce){(G-=3)>-1&&ct.push(239,191,189);continue}rt=H;continue}if(H<56320){(G-=3)>-1&&ct.push(239,191,189),rt=H;continue}H=(rt-55296<<10|H-56320)+65536}else rt&&(G-=3)>-1&&ct.push(239,191,189);if(rt=null,H<128){if((G-=1)<0)break;ct.push(H)}else if(H<2048){if((G-=2)<0)break;ct.push(H>>6|192,H&63|128)}else if(H<65536){if((G-=3)<0)break;ct.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if((G-=4)<0)break;ct.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return ct}function un(ze){for(var G=[],H=0;H<ze.length;++H)G.push(ze.charCodeAt(H)&255);return G}function In(ze,G){for(var H,Ce,rt,ct=[],Et=0;Et<ze.length&&!((G-=2)<0);++Et)H=ze.charCodeAt(Et),Ce=H>>8,rt=H%256,ct.push(rt),ct.push(Ce);return ct}function at(ze){return w.toByteArray(Tt(ze))}function kn(ze,G,H,Ce){for(var rt=0;rt<Ce&&!(rt+H>=G.length||rt>=ze.length);++rt)G[rt+H]=ze[rt];return rt}function cn(ze,G){return ze instanceof G||ze!=null&&ze.constructor!=null&&ze.constructor.name!=null&&ze.constructor.name===G.name}function en(ze){return ze!==ze}}).call(this)}).call(this,p("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(p,v,x){const T=p("./validator"),w=p("./xmlparser/XMLParser"),a=p("./xmlbuilder/json2xml");v.exports={XMLParser:w,XMLValidator:T,XMLBuilder:a}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(p,v,x){const T=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",w=T+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",a="["+T+"]["+w+"]*",L=new RegExp("^"+a+"$"),R=function(C,k){const V=[];let N=k.exec(C);for(;N;){const Q=[];Q.startIndex=k.lastIndex-N[0].length;const he=N.length;for(let Te=0;Te<he;Te++)Q.push(N[Te]);V.push(Q),N=k.exec(C)}return V},D=function(C){const k=L.exec(C);return!(k===null||typeof k>"u")};x.isExist=function(C){return typeof C<"u"},x.isEmptyObject=function(C){return Object.keys(C).length===0},x.merge=function(C,k,V){if(k){const N=Object.keys(k),Q=N.length;for(let he=0;he<Q;he++)V==="strict"?C[N[he]]=[k[N[he]]]:C[N[he]]=k[N[he]]}},x.getValue=function(C){return x.isExist(C)?C:""},x.isName=D,x.getAllMatches=R,x.nameRegexp=a},{}],5:[function(p,v,x){const T=p("./util"),w={allowBooleanAttributes:!1,unpairedTags:[]};x.validate=function(ce,M){M=Object.assign({},w,M);const $=[];let U=!1,de=!1;ce[0]==="\uFEFF"&&(ce=ce.substr(1));for(let K=0;K<ce.length;K++)if(ce[K]==="<"&&ce[K+1]==="?"){if(K+=2,K=L(ce,K),K.err)return K}else if(ce[K]==="<"){let j=K;if(K++,ce[K]==="!"){K=R(ce,K);continue}else{let W=!1;ce[K]==="/"&&(W=!0,K++);let J="";for(;K<ce.length&&ce[K]!==">"&&ce[K]!==" "&&ce[K]!=="	"&&ce[K]!==`
`&&ce[K]!=="\r";K++)J+=ce[K];if(J=J.trim(),J[J.length-1]==="/"&&(J=J.substring(0,J.length-1),K--),!_e(J)){let te;return J.trim().length===0?te="Invalid space after '<'.":te="Tag '"+J+"' is an invalid name.",Te("InvalidTag",te,Me(ce,K))}const re=k(ce,K);if(re===!1)return Te("InvalidAttr","Attributes for '"+J+"' have open quote.",Me(ce,K));let ue=re.value;if(K=re.index,ue[ue.length-1]==="/"){const te=K-ue.length;ue=ue.substring(0,ue.length-1);const se=N(ue,M);if(se===!0)U=!0;else return Te(se.err.code,se.err.msg,Me(ce,te+se.err.line))}else if(W)if(re.tagClosed){if(ue.trim().length>0)return Te("InvalidTag","Closing tag '"+J+"' can't have attributes or invalid starting.",Me(ce,j));{const te=$.pop();if(J!==te.tagName){let se=Me(ce,te.tagStartPos);return Te("InvalidTag","Expected closing tag '"+te.tagName+"' (opened in line "+se.line+", col "+se.col+") instead of closing tag '"+J+"'.",Me(ce,j))}$.length==0&&(de=!0)}}else return Te("InvalidTag","Closing tag '"+J+"' doesn't have proper closing.",Me(ce,K));else{const te=N(ue,M);if(te!==!0)return Te(te.err.code,te.err.msg,Me(ce,K-ue.length+te.err.line));if(de===!0)return Te("InvalidXml","Multiple possible root nodes found.",Me(ce,K));M.unpairedTags.indexOf(J)!==-1||$.push({tagName:J,tagStartPos:j}),U=!0}for(K++;K<ce.length;K++)if(ce[K]==="<")if(ce[K+1]==="!"){K++,K=R(ce,K);continue}else if(ce[K+1]==="?"){if(K=L(ce,++K),K.err)return K}else break;else if(ce[K]==="&"){const te=he(ce,K);if(te==-1)return Te("InvalidChar","char '&' is not expected.",Me(ce,K));K=te}else if(de===!0&&!a(ce[K]))return Te("InvalidXml","Extra text at the end",Me(ce,K));ce[K]==="<"&&K--}}else{if(a(ce[K]))continue;return Te("InvalidChar","char '"+ce[K]+"' is not expected.",Me(ce,K))}if(U){if($.length==1)return Te("InvalidTag","Unclosed tag '"+$[0].tagName+"'.",Me(ce,$[0].tagStartPos));if($.length>0)return Te("InvalidXml","Invalid '"+JSON.stringify($.map(K=>K.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Te("InvalidXml","Start tag expected.",1);return!0};function a(ce){return ce===" "||ce==="	"||ce===`
`||ce==="\r"}function L(ce,M){const $=M;for(;M<ce.length;M++)if(ce[M]=="?"||ce[M]==" "){const U=ce.substr($,M-$);if(M>5&&U==="xml")return Te("InvalidXml","XML declaration allowed only at the start of the document.",Me(ce,M));if(ce[M]=="?"&&ce[M+1]==">"){M++;break}else continue}return M}function R(ce,M){if(ce.length>M+5&&ce[M+1]==="-"&&ce[M+2]==="-"){for(M+=3;M<ce.length;M++)if(ce[M]==="-"&&ce[M+1]==="-"&&ce[M+2]===">"){M+=2;break}}else if(ce.length>M+8&&ce[M+1]==="D"&&ce[M+2]==="O"&&ce[M+3]==="C"&&ce[M+4]==="T"&&ce[M+5]==="Y"&&ce[M+6]==="P"&&ce[M+7]==="E"){let $=1;for(M+=8;M<ce.length;M++)if(ce[M]==="<")$++;else if(ce[M]===">"&&($--,$===0))break}else if(ce.length>M+9&&ce[M+1]==="["&&ce[M+2]==="C"&&ce[M+3]==="D"&&ce[M+4]==="A"&&ce[M+5]==="T"&&ce[M+6]==="A"&&ce[M+7]==="["){for(M+=8;M<ce.length;M++)if(ce[M]==="]"&&ce[M+1]==="]"&&ce[M+2]===">"){M+=2;break}}return M}const D='"',C="'";function k(ce,M){let $="",U="",de=!1;for(;M<ce.length;M++){if(ce[M]===D||ce[M]===C)U===""?U=ce[M]:U!==ce[M]||(U="");else if(ce[M]===">"&&U===""){de=!0;break}$+=ce[M]}return U!==""?!1:{value:$,index:M,tagClosed:de}}const V=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function N(ce,M){const $=T.getAllMatches(ce,V),U={};for(let de=0;de<$.length;de++){if($[de][1].length===0)return Te("InvalidAttr","Attribute '"+$[de][2]+"' has no space in starting.",ne($[de]));if($[de][3]!==void 0&&$[de][4]===void 0)return Te("InvalidAttr","Attribute '"+$[de][2]+"' is without value.",ne($[de]));if($[de][3]===void 0&&!M.allowBooleanAttributes)return Te("InvalidAttr","boolean attribute '"+$[de][2]+"' is not allowed.",ne($[de]));const K=$[de][2];if(!we(K))return Te("InvalidAttr","Attribute '"+K+"' is an invalid name.",ne($[de]));if(!U.hasOwnProperty(K))U[K]=1;else return Te("InvalidAttr","Attribute '"+K+"' is repeated.",ne($[de]))}return!0}function Q(ce,M){let $=/\d/;for(ce[M]==="x"&&(M++,$=/[\da-fA-F]/);M<ce.length;M++){if(ce[M]===";")return M;if(!ce[M].match($))break}return-1}function he(ce,M){if(M++,ce[M]===";")return-1;if(ce[M]==="#")return M++,Q(ce,M);let $=0;for(;M<ce.length;M++,$++)if(!(ce[M].match(/\w/)&&$<20)){if(ce[M]===";")break;return-1}return M}function Te(ce,M,$){return{err:{code:ce,msg:M,line:$.line||$,col:$.col}}}function we(ce){return T.isName(ce)}function _e(ce){return T.isName(ce)}function Me(ce,M){const $=ce.substring(0,M).split(/\r?\n/);return{line:$.length,col:$[$.length-1].length+1}}function ne(ce){return ce.startIndex+ce[1].length}},{"./util":4}],6:[function(p,v,x){const T=p("./orderedJs2Xml"),w={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(C,k){return k},attributeValueProcessor:function(C,k){return k},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function a(C){this.options=Object.assign({},w,C),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=D),this.processTextOrObjNode=L,this.options.format?(this.indentate=R,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}a.prototype.build=function(C){return this.options.preserveOrder?T(C,this.options):(Array.isArray(C)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(C={[this.options.arrayNodeName]:C}),this.j2x(C,0).val)},a.prototype.j2x=function(C,k){let V="",N="";for(let Q in C)if(Object.prototype.hasOwnProperty.call(C,Q))if(typeof C[Q]>"u")this.isAttribute(Q)&&(N+="");else if(C[Q]===null)this.isAttribute(Q)?N+="":Q[0]==="?"?N+=this.indentate(k)+"<"+Q+"?"+this.tagEndChar:N+=this.indentate(k)+"<"+Q+"/"+this.tagEndChar;else if(C[Q]instanceof Date)N+=this.buildTextValNode(C[Q],Q,"",k);else if(typeof C[Q]!="object"){const he=this.isAttribute(Q);if(he)V+=this.buildAttrPairStr(he,""+C[Q]);else if(Q===this.options.textNodeName){let Te=this.options.tagValueProcessor(Q,""+C[Q]);N+=this.replaceEntitiesValue(Te)}else N+=this.buildTextValNode(C[Q],Q,"",k)}else if(Array.isArray(C[Q])){const he=C[Q].length;let Te="";for(let we=0;we<he;we++){const _e=C[Q][we];typeof _e>"u"||(_e===null?Q[0]==="?"?N+=this.indentate(k)+"<"+Q+"?"+this.tagEndChar:N+=this.indentate(k)+"<"+Q+"/"+this.tagEndChar:typeof _e=="object"?this.options.oneListGroup?Te+=this.j2x(_e,k+1).val:Te+=this.processTextOrObjNode(_e,Q,k):Te+=this.buildTextValNode(_e,Q,"",k))}this.options.oneListGroup&&(Te=this.buildObjectNode(Te,Q,"",k)),N+=Te}else if(this.options.attributesGroupName&&Q===this.options.attributesGroupName){const he=Object.keys(C[Q]),Te=he.length;for(let we=0;we<Te;we++)V+=this.buildAttrPairStr(he[we],""+C[Q][he[we]])}else N+=this.processTextOrObjNode(C[Q],Q,k);return{attrStr:V,val:N}},a.prototype.buildAttrPairStr=function(C,k){return k=this.options.attributeValueProcessor(C,""+k),k=this.replaceEntitiesValue(k),this.options.suppressBooleanAttributes&&k==="true"?" "+C:" "+C+'="'+k+'"'};function L(C,k,V){const N=this.j2x(C,V+1);return C[this.options.textNodeName]!==void 0&&Object.keys(C).length===1?this.buildTextValNode(C[this.options.textNodeName],k,N.attrStr,V):this.buildObjectNode(N.val,k,N.attrStr,V)}a.prototype.buildObjectNode=function(C,k,V,N){if(C==="")return k[0]==="?"?this.indentate(N)+"<"+k+V+"?"+this.tagEndChar:this.indentate(N)+"<"+k+V+this.closeTag(k)+this.tagEndChar;{let Q="</"+k+this.tagEndChar,he="";return k[0]==="?"&&(he="?",Q=""),(V||V==="")&&C.indexOf("<")===-1?this.indentate(N)+"<"+k+V+he+">"+C+Q:this.options.commentPropName!==!1&&k===this.options.commentPropName&&he.length===0?this.indentate(N)+`<!--${C}-->`+this.newLine:this.indentate(N)+"<"+k+V+he+this.tagEndChar+C+this.indentate(N)+Q}},a.prototype.closeTag=function(C){let k="";return this.options.unpairedTags.indexOf(C)!==-1?this.options.suppressUnpairedNode||(k="/"):this.options.suppressEmptyNode?k="/":k=`></${C}`,k},a.prototype.buildTextValNode=function(C,k,V,N){if(this.options.cdataPropName!==!1&&k===this.options.cdataPropName)return this.indentate(N)+`<![CDATA[${C}]]>`+this.newLine;if(this.options.commentPropName!==!1&&k===this.options.commentPropName)return this.indentate(N)+`<!--${C}-->`+this.newLine;if(k[0]==="?")return this.indentate(N)+"<"+k+V+"?"+this.tagEndChar;{let Q=this.options.tagValueProcessor(k,C);return Q=this.replaceEntitiesValue(Q),Q===""?this.indentate(N)+"<"+k+V+this.closeTag(k)+this.tagEndChar:this.indentate(N)+"<"+k+V+">"+Q+"</"+k+this.tagEndChar}},a.prototype.replaceEntitiesValue=function(C){if(C&&C.length>0&&this.options.processEntities)for(let k=0;k<this.options.entities.length;k++){const V=this.options.entities[k];C=C.replace(V.regex,V.val)}return C};function R(C){return this.options.indentBy.repeat(C)}function D(C){return C.startsWith(this.options.attributeNamePrefix)&&C!==this.options.textNodeName?C.substr(this.attrPrefixLen):!1}v.exports=a},{"./orderedJs2Xml":7}],7:[function(p,v,x){const T=`
`;function w(k,V){let N="";return V.format&&V.indentBy.length>0&&(N=T),a(k,V,"",N)}function a(k,V,N,Q){let he="",Te=!1;for(let we=0;we<k.length;we++){const _e=k[we],Me=L(_e);if(Me===void 0)continue;let ne="";if(N.length===0?ne=Me:ne=`${N}.${Me}`,Me===V.textNodeName){let de=_e[Me];D(ne,V)||(de=V.tagValueProcessor(Me,de),de=C(de,V)),Te&&(he+=Q),he+=de,Te=!1;continue}else if(Me===V.cdataPropName){Te&&(he+=Q),he+=`<![CDATA[${_e[Me][0][V.textNodeName]}]]>`,Te=!1;continue}else if(Me===V.commentPropName){he+=Q+`<!--${_e[Me][0][V.textNodeName]}-->`,Te=!0;continue}else if(Me[0]==="?"){const de=R(_e[":@"],V),K=Me==="?xml"?"":Q;let j=_e[Me][0][V.textNodeName];j=j.length!==0?" "+j:"",he+=K+`<${Me}${j}${de}?>`,Te=!0;continue}let ce=Q;ce!==""&&(ce+=V.indentBy);const M=R(_e[":@"],V),$=Q+`<${Me}${M}`,U=a(_e[Me],V,ne,ce);V.unpairedTags.indexOf(Me)!==-1?V.suppressUnpairedNode?he+=$+">":he+=$+"/>":(!U||U.length===0)&&V.suppressEmptyNode?he+=$+"/>":U&&U.endsWith(">")?he+=$+`>${U}${Q}</${Me}>`:(he+=$+">",U&&Q!==""&&(U.includes("/>")||U.includes("</"))?he+=Q+V.indentBy+U+Q:he+=U,he+=`</${Me}>`),Te=!0}return he}function L(k){const V=Object.keys(k);for(let N=0;N<V.length;N++){const Q=V[N];if(k.hasOwnProperty(Q)&&Q!==":@")return Q}}function R(k,V){let N="";if(k&&!V.ignoreAttributes)for(let Q in k){if(!k.hasOwnProperty(Q))continue;let he=V.attributeValueProcessor(Q,k[Q]);he=C(he,V),he===!0&&V.suppressBooleanAttributes?N+=` ${Q.substr(V.attributeNamePrefix.length)}`:N+=` ${Q.substr(V.attributeNamePrefix.length)}="${he}"`}return N}function D(k,V){k=k.substr(0,k.length-V.textNodeName.length-1);let N=k.substr(k.lastIndexOf(".")+1);for(let Q in V.stopNodes)if(V.stopNodes[Q]===k||V.stopNodes[Q]==="*."+N)return!0;return!1}function C(k,V){if(k&&k.length>0&&V.processEntities)for(let N=0;N<V.entities.length;N++){const Q=V.entities[N];k=k.replace(Q.regex,Q.val)}return k}v.exports=w},{}],8:[function(p,v,x){const T=p("../util");function w(N,Q){const he={};if(N[Q+3]==="O"&&N[Q+4]==="C"&&N[Q+5]==="T"&&N[Q+6]==="Y"&&N[Q+7]==="P"&&N[Q+8]==="E"){Q=Q+9;let Te=1,we=!1,_e=!1,Me="";for(;Q<N.length;Q++)if(N[Q]==="<"&&!_e){if(we&&R(N,Q))Q+=7,[entityName,val,Q]=a(N,Q+1),val.indexOf("&")===-1&&(he[V(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(we&&D(N,Q))Q+=8;else if(we&&C(N,Q))Q+=8;else if(we&&k(N,Q))Q+=9;else if(L)_e=!0;else throw new Error("Invalid DOCTYPE");Te++,Me=""}else if(N[Q]===">"){if(_e?N[Q-1]==="-"&&N[Q-2]==="-"&&(_e=!1,Te--):Te--,Te===0)break}else N[Q]==="["?we=!0:Me+=N[Q];if(Te!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:he,i:Q}}function a(N,Q){let he="";for(;Q<N.length&&N[Q]!=="'"&&N[Q]!=='"';Q++)he+=N[Q];if(he=he.trim(),he.indexOf(" ")!==-1)throw new Error("External entites are not supported");const Te=N[Q++];let we="";for(;Q<N.length&&N[Q]!==Te;Q++)we+=N[Q];return[he,we,Q]}function L(N,Q){return N[Q+1]==="!"&&N[Q+2]==="-"&&N[Q+3]==="-"}function R(N,Q){return N[Q+1]==="!"&&N[Q+2]==="E"&&N[Q+3]==="N"&&N[Q+4]==="T"&&N[Q+5]==="I"&&N[Q+6]==="T"&&N[Q+7]==="Y"}function D(N,Q){return N[Q+1]==="!"&&N[Q+2]==="E"&&N[Q+3]==="L"&&N[Q+4]==="E"&&N[Q+5]==="M"&&N[Q+6]==="E"&&N[Q+7]==="N"&&N[Q+8]==="T"}function C(N,Q){return N[Q+1]==="!"&&N[Q+2]==="A"&&N[Q+3]==="T"&&N[Q+4]==="T"&&N[Q+5]==="L"&&N[Q+6]==="I"&&N[Q+7]==="S"&&N[Q+8]==="T"}function k(N,Q){return N[Q+1]==="!"&&N[Q+2]==="N"&&N[Q+3]==="O"&&N[Q+4]==="T"&&N[Q+5]==="A"&&N[Q+6]==="T"&&N[Q+7]==="I"&&N[Q+8]==="O"&&N[Q+9]==="N"}function V(N){if(T.isName(N))return N;throw new Error(`Invalid entity name ${N}`)}v.exports=w},{"../util":4}],9:[function(p,v,x){const T={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(a,L){return L},attributeValueProcessor:function(a,L){return L},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(a,L,R){return a}},w=function(a){return Object.assign({},T,a)};x.buildOptions=w,x.defaultOptions=T},{}],10:[function(p,v,x){const T=p("../util"),w=p("./xmlNode"),a=p("./DocTypeReader"),L=p("strnum");class R{constructor(de){this.options=de,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=D,this.parseXml=Q,this.parseTextData=C,this.resolveNameSpace=k,this.buildAttributesMap=N,this.isItStopNode=_e,this.replaceEntitiesValue=Te,this.readStopNodeData=M,this.saveTextToParentTag=we,this.addChild=he}}function D(U){const de=Object.keys(U);for(let K=0;K<de.length;K++){const j=de[K];this.lastEntities[j]={regex:new RegExp("&"+j+";","g"),val:U[j]}}}function C(U,de,K,j,W,J,re){if(U!==void 0&&(this.options.trimValues&&!j&&(U=U.trim()),U.length>0)){re||(U=this.replaceEntitiesValue(U));const ue=this.options.tagValueProcessor(de,U,K,W,J);return ue==null?U:typeof ue!=typeof U||ue!==U?ue:this.options.trimValues?$(U,this.options.parseTagValue,this.options.numberParseOptions):U.trim()===U?$(U,this.options.parseTagValue,this.options.numberParseOptions):U}}function k(U){if(this.options.removeNSPrefix){const de=U.split(":"),K=U.charAt(0)==="/"?"/":"";if(de[0]==="xmlns")return"";de.length===2&&(U=K+de[1])}return U}const V=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function N(U,de,K){if(!this.options.ignoreAttributes&&typeof U=="string"){const j=T.getAllMatches(U,V),W=j.length,J={};for(let re=0;re<W;re++){const ue=this.resolveNameSpace(j[re][1]);let te=j[re][4],se=this.options.attributeNamePrefix+ue;if(ue.length)if(this.options.transformAttributeName&&(se=this.options.transformAttributeName(se)),se==="__proto__"&&(se="#__proto__"),te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const xe=this.options.attributeValueProcessor(ue,te,de);xe==null?J[se]=te:typeof xe!=typeof te||xe!==te?J[se]=xe:J[se]=$(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(J[se]=!0)}if(!Object.keys(J).length)return;if(this.options.attributesGroupName){const re={};return re[this.options.attributesGroupName]=J,re}return J}}const Q=function(U){U=U.replace(/\r\n?/g,`
`);const de=new w("!xml");let K=de,j="",W="";for(let J=0;J<U.length;J++)if(U[J]==="<")if(U[J+1]==="/"){const ue=ne(U,">",J,"Closing Tag is not closed.");let te=U.substring(J+2,ue).trim();if(this.options.removeNSPrefix){const ie=te.indexOf(":");ie!==-1&&(te=te.substr(ie+1))}this.options.transformTagName&&(te=this.options.transformTagName(te)),K&&(j=this.saveTextToParentTag(j,K,W));const se=W.substring(W.lastIndexOf(".")+1);if(te&&this.options.unpairedTags.indexOf(te)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${te}>`);let xe=0;se&&this.options.unpairedTags.indexOf(se)!==-1?(xe=W.lastIndexOf(".",W.lastIndexOf(".")-1),this.tagsNodeStack.pop()):xe=W.lastIndexOf("."),W=W.substring(0,xe),K=this.tagsNodeStack.pop(),j="",J=ue}else if(U[J+1]==="?"){let ue=ce(U,J,!1,"?>");if(!ue)throw new Error("Pi Tag is not closed.");if(j=this.saveTextToParentTag(j,K,W),!(this.options.ignoreDeclaration&&ue.tagName==="?xml"||this.options.ignorePiTags)){const te=new w(ue.tagName);te.add(this.options.textNodeName,""),ue.tagName!==ue.tagExp&&ue.attrExpPresent&&(te[":@"]=this.buildAttributesMap(ue.tagExp,W,ue.tagName)),this.addChild(K,te,W)}J=ue.closeIndex+1}else if(U.substr(J+1,3)==="!--"){const ue=ne(U,"-->",J+4,"Comment is not closed.");if(this.options.commentPropName){const te=U.substring(J+4,ue-2);j=this.saveTextToParentTag(j,K,W),K.add(this.options.commentPropName,[{[this.options.textNodeName]:te}])}J=ue}else if(U.substr(J+1,2)==="!D"){const ue=a(U,J);this.docTypeEntities=ue.entities,J=ue.i}else if(U.substr(J+1,2)==="!["){const ue=ne(U,"]]>",J,"CDATA is not closed.")-2,te=U.substring(J+9,ue);if(j=this.saveTextToParentTag(j,K,W),this.options.cdataPropName)K.add(this.options.cdataPropName,[{[this.options.textNodeName]:te}]);else{let se=this.parseTextData(te,K.tagname,W,!0,!1,!0);se==null&&(se=""),K.add(this.options.textNodeName,se)}J=ue+2}else{let ue=ce(U,J,this.options.removeNSPrefix),te=ue.tagName;const se=ue.rawTagName;let xe=ue.tagExp,ie=ue.attrExpPresent,ve=ue.closeIndex;this.options.transformTagName&&(te=this.options.transformTagName(te)),K&&j&&K.tagname!=="!xml"&&(j=this.saveTextToParentTag(j,K,W,!1));const De=K;if(De&&this.options.unpairedTags.indexOf(De.tagname)!==-1&&(K=this.tagsNodeStack.pop(),W=W.substring(0,W.lastIndexOf("."))),te!==de.tagname&&(W+=W?"."+te:te),this.isItStopNode(this.options.stopNodes,W,te)){let Oe="";if(xe.length>0&&xe.lastIndexOf("/")===xe.length-1)J=ue.closeIndex;else if(this.options.unpairedTags.indexOf(te)!==-1)J=ue.closeIndex;else{const Ye=this.readStopNodeData(U,se,ve+1);if(!Ye)throw new Error(`Unexpected end of ${se}`);J=Ye.i,Oe=Ye.tagContent}const Le=new w(te);te!==xe&&ie&&(Le[":@"]=this.buildAttributesMap(xe,W,te)),Oe&&(Oe=this.parseTextData(Oe,te,W,!0,ie,!0,!0)),W=W.substr(0,W.lastIndexOf(".")),Le.add(this.options.textNodeName,Oe),this.addChild(K,Le,W)}else{if(xe.length>0&&xe.lastIndexOf("/")===xe.length-1){te[te.length-1]==="/"?(te=te.substr(0,te.length-1),W=W.substr(0,W.length-1),xe=te):xe=xe.substr(0,xe.length-1),this.options.transformTagName&&(te=this.options.transformTagName(te));const Oe=new w(te);te!==xe&&ie&&(Oe[":@"]=this.buildAttributesMap(xe,W,te)),this.addChild(K,Oe,W),W=W.substr(0,W.lastIndexOf("."))}else{const Oe=new w(te);this.tagsNodeStack.push(K),te!==xe&&ie&&(Oe[":@"]=this.buildAttributesMap(xe,W,te)),this.addChild(K,Oe,W),K=Oe}j="",J=ve}}else j+=U[J];return de.child};function he(U,de,K){const j=this.options.updateTag(de.tagname,K,de[":@"]);j===!1||(typeof j=="string"&&(de.tagname=j),U.addChild(de))}const Te=function(U){if(this.options.processEntities){for(let de in this.docTypeEntities){const K=this.docTypeEntities[de];U=U.replace(K.regx,K.val)}for(let de in this.lastEntities){const K=this.lastEntities[de];U=U.replace(K.regex,K.val)}if(this.options.htmlEntities)for(let de in this.htmlEntities){const K=this.htmlEntities[de];U=U.replace(K.regex,K.val)}U=U.replace(this.ampEntity.regex,this.ampEntity.val)}return U};function we(U,de,K,j){return U&&(j===void 0&&(j=Object.keys(de.child).length===0),U=this.parseTextData(U,de.tagname,K,!1,de[":@"]?Object.keys(de[":@"]).length!==0:!1,j),U!==void 0&&U!==""&&de.add(this.options.textNodeName,U),U=""),U}function _e(U,de,K){const j="*."+K;for(const W in U){const J=U[W];if(j===J||de===J)return!0}return!1}function Me(U,de,K=">"){let j,W="";for(let J=de;J<U.length;J++){let re=U[J];if(j)re===j&&(j="");else if(re==='"'||re==="'")j=re;else if(re===K[0])if(K[1]){if(U[J+1]===K[1])return{data:W,index:J}}else return{data:W,index:J};else re==="	"&&(re=" ");W+=re}}function ne(U,de,K,j){const W=U.indexOf(de,K);if(W===-1)throw new Error(j);return W+de.length-1}function ce(U,de,K,j=">"){const W=Me(U,de+1,j);if(!W)return;let J=W.data;const re=W.index,ue=J.search(/\s/);let te=J,se=!0;ue!==-1&&(te=J.substring(0,ue),J=J.substring(ue+1).trimStart());const xe=te;if(K){const ie=te.indexOf(":");ie!==-1&&(te=te.substr(ie+1),se=te!==W.data.substr(ie+1))}return{tagName:te,tagExp:J,closeIndex:re,attrExpPresent:se,rawTagName:xe}}function M(U,de,K){const j=K;let W=1;for(;K<U.length;K++)if(U[K]==="<")if(U[K+1]==="/"){const J=ne(U,">",K,`${de} is not closed`);if(U.substring(K+2,J).trim()===de&&(W--,W===0))return{tagContent:U.substring(j,K),i:J};K=J}else if(U[K+1]==="?")K=ne(U,"?>",K+1,"StopNode is not closed.");else if(U.substr(K+1,3)==="!--")K=ne(U,"-->",K+3,"StopNode is not closed.");else if(U.substr(K+1,2)==="![")K=ne(U,"]]>",K,"StopNode is not closed.")-2;else{const J=ce(U,K,">");J&&((J&&J.tagName)===de&&J.tagExp[J.tagExp.length-1]!=="/"&&W++,K=J.closeIndex)}}function $(U,de,K){if(de&&typeof U=="string"){const j=U.trim();return j==="true"?!0:j==="false"?!1:L(U,K)}else return T.isExist(U)?U:""}v.exports=R},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(p,v,x){const{buildOptions:T}=p("./OptionsBuilder"),w=p("./OrderedObjParser"),{prettify:a}=p("./node2json"),L=p("../validator");class R{constructor(C){this.externalEntities={},this.options=T(C)}parse(C,k){if(typeof C!="string")if(C.toString)C=C.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(k){k===!0&&(k={});const Q=L.validate(C,k);if(Q!==!0)throw Error(`${Q.err.msg}:${Q.err.line}:${Q.err.col}`)}const V=new w(this.options);V.addExternalEntities(this.externalEntities);const N=V.parseXml(C);return this.options.preserveOrder||N===void 0?N:a(N,this.options)}addEntity(C,k){if(k.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(C.indexOf("&")!==-1||C.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(k==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[C]=k}}v.exports=R},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(p,v,x){function T(D,C){return w(D,C)}function w(D,C,k){let V;const N={};for(let Q=0;Q<D.length;Q++){const he=D[Q],Te=a(he);let we="";if(k===void 0?we=Te:we=k+"."+Te,Te===C.textNodeName)V===void 0?V=he[Te]:V+=""+he[Te];else{if(Te===void 0)continue;if(he[Te]){let _e=w(he[Te],C,we);const Me=R(_e,C);he[":@"]?L(_e,he[":@"],we,C):Object.keys(_e).length===1&&_e[C.textNodeName]!==void 0&&!C.alwaysCreateTextNode?_e=_e[C.textNodeName]:Object.keys(_e).length===0&&(C.alwaysCreateTextNode?_e[C.textNodeName]="":_e=""),N[Te]!==void 0&&N.hasOwnProperty(Te)?(Array.isArray(N[Te])||(N[Te]=[N[Te]]),N[Te].push(_e)):C.isArray(Te,we,Me)?N[Te]=[_e]:N[Te]=_e}}}return typeof V=="string"?V.length>0&&(N[C.textNodeName]=V):V!==void 0&&(N[C.textNodeName]=V),N}function a(D){const C=Object.keys(D);for(let k=0;k<C.length;k++){const V=C[k];if(V!==":@")return V}}function L(D,C,k,V){if(C){const N=Object.keys(C),Q=N.length;for(let he=0;he<Q;he++){const Te=N[he];V.isArray(Te,k+"."+Te,!0,!0)?D[Te]=[C[Te]]:D[Te]=C[Te]}}}function R(D,C){const{textNodeName:k}=C,V=Object.keys(D).length;return!!(V===0||V===1&&(D[k]||typeof D[k]=="boolean"||D[k]===0))}x.prettify=T},{}],13:[function(p,v,x){class T{constructor(a){this.tagname=a,this.child=[],this[":@"]={}}add(a,L){a==="__proto__"&&(a="#__proto__"),this.child.push({[a]:L})}addChild(a){a.tagname==="__proto__"&&(a.tagname="#__proto__"),a[":@"]&&Object.keys(a[":@"]).length>0?this.child.push({[a.tagname]:a.child,":@":a[":@"]}):this.child.push({[a.tagname]:a.child})}}v.exports=T},{}],14:[function(p,v,x){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */x.read=function(T,w,a,L,R){var D,C,k=R*8-L-1,V=(1<<k)-1,N=V>>1,Q=-7,he=a?R-1:0,Te=a?-1:1,we=T[w+he];for(he+=Te,D=we&(1<<-Q)-1,we>>=-Q,Q+=k;Q>0;D=D*256+T[w+he],he+=Te,Q-=8);for(C=D&(1<<-Q)-1,D>>=-Q,Q+=L;Q>0;C=C*256+T[w+he],he+=Te,Q-=8);if(D===0)D=1-N;else{if(D===V)return C?NaN:(we?-1:1)*(1/0);C=C+Math.pow(2,L),D=D-N}return(we?-1:1)*C*Math.pow(2,D-L)},x.write=function(T,w,a,L,R,D){var C,k,V,N=D*8-R-1,Q=(1<<N)-1,he=Q>>1,Te=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,we=L?0:D-1,_e=L?1:-1,Me=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(k=isNaN(w)?1:0,C=Q):(C=Math.floor(Math.log(w)/Math.LN2),w*(V=Math.pow(2,-C))<1&&(C--,V*=2),C+he>=1?w+=Te/V:w+=Te*Math.pow(2,1-he),w*V>=2&&(C++,V/=2),C+he>=Q?(k=0,C=Q):C+he>=1?(k=(w*V-1)*Math.pow(2,R),C=C+he):(k=w*Math.pow(2,he-1)*Math.pow(2,R),C=0));R>=8;T[a+we]=k&255,we+=_e,k/=256,R-=8);for(C=C<<R|k,N+=R;N>0;T[a+we]=C&255,we+=_e,C/=256,N-=8);T[a+we-_e]|=Me*128}},{}],15:[function(p,v,x){const T=/^[-+]?0x[a-fA-F0-9]+$/,w=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const a={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function L(D,C={}){if(C=Object.assign({},a,C),!D||typeof D!="string")return D;let k=D.trim();if(C.skipLike!==void 0&&C.skipLike.test(k))return D;if(C.hex&&T.test(k))return Number.parseInt(k,16);{const V=w.exec(k);if(V){const N=V[1],Q=V[2];let he=R(V[3]);const Te=V[4]||V[6];if(!C.leadingZeros&&Q.length>0&&N&&k[2]!==".")return D;if(!C.leadingZeros&&Q.length>0&&!N&&k[1]!==".")return D;{const we=Number(k),_e=""+we;return _e.search(/[eE]/)!==-1||Te?C.eNotation?we:D:k.indexOf(".")!==-1?_e==="0"&&he===""||_e===he||N&&_e==="-"+he?we:D:Q?he===_e||N+he===_e?we:D:k===_e||k===N+_e?we:D}}else return D}}function R(D){return D&&D.indexOf(".")!==-1&&(D=D.replace(/0+$/,""),D==="."?D="0":D[0]==="."?D="0"+D:D[D.length-1]==="."&&(D=D.substr(0,D.length-1))),D}v.exports=L},{}],16:[function(p,v,x){(function(T){(function(){var w=this&&this.__awaiter||function(k,V,N,Q){function he(Te){return Te instanceof N?Te:new N(function(we){we(Te)})}return new(N||(N=Promise))(function(Te,we){function _e(ce){try{ne(Q.next(ce))}catch(M){we(M)}}function Me(ce){try{ne(Q.throw(ce))}catch(M){we(M)}}function ne(ce){ce.done?Te(ce.value):he(ce.value).then(_e,Me)}ne((Q=Q.apply(k,V||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.osmFetch=void 0;const a=p("../auth"),L=p("../config"),R=p("./_xml"),D=k=>typeof btoa>"u"?T.from(k,"binary").toString("base64"):btoa(k);function C(k,V,N){return w(this,void 0,void 0,function*(){const{apiUrl:Q,authHeader:he,basicAuth:Te,userAgent:we}=(0,L.getConfig)(),_e=Te&&`Basic ${D(`${Te.username}:${Te.password}`)}`,Me=(0,a.getAuthToken)()&&`Bearer ${(0,a.getAuthToken)()}`;let ne=new URLSearchParams(V).toString();ne&&(ne=`?${ne}`);const ce=yield fetch(`${Q}/api${k}${ne}`,Object.assign(Object.assign({},N),{headers:Object.assign({Authorization:he||_e||Me||"","User-Agent":we},N==null?void 0:N.headers)})),M=ce.headers.get("Content-Type");if(M!=null&&M.startsWith("application/xml")){const $=yield ce.text();return yield R.xmlParser.parse($)}if(M!=null&&M.startsWith("application/json"))return ce.json();if(ce.ok)return yield ce.text();throw new Error(`OSM API: ${yield ce.text()}`)})}x.osmFetch=C}).call(this)}).call(this,p("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.xmlParser=void 0;const T=p("fast-xml-parser");x.xmlParser=new T.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:w=>w!=="$"})},{"fast-xml-parser":3}],18:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.createOsmChangeXml=x.createChangesetMetaXml=void 0;const T=p("fast-xml-parser"),w=new T.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function a(D){return w.build({osm:{changeset:{tag:Object.entries(D).map(([C,k])=>({$k:C,$v:k}))}}})}x.createChangesetMetaXml=a;const L=(D,C,k)=>C.reduce((V,N)=>{const Q={$id:N.id,$version:k?0:N.version,$changeset:D,tag:Object.entries(N.tags||{}).map(([he,Te])=>({$k:he,$v:Te}))};switch(N.type){case"node":{const he=Object.assign(Object.assign({},Q),{$lat:N.lat,$lon:N.lon});return Object.assign(Object.assign({},V),{node:[...V.node,he]})}case"way":{if(!N.nodes)throw new Error("Way has no nodes");const he=Object.assign(Object.assign({},Q),{nd:N.nodes.map(Te=>({$ref:Te}))});return Object.assign(Object.assign({},V),{way:[...V.way,he]})}case"relation":{if(!N.members)throw new Error("Relation has no members");const he=Object.assign(Object.assign({},Q),{member:N.members.map(Te=>({$type:Te.type,$ref:Te.ref,$role:Te.role}))});return Object.assign(Object.assign({},V),{relation:[...V.relation,he]})}default:return V}},{node:[],way:[],relation:[]});function R(D,C,k){return w.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},k),{create:[L(D,C.create,!0)],modify:[L(D,C.modify)],delete:[Object.assign({"$if-unused":!0},L(D,C.delete))]})})}x.createOsmChangeXml=R},{"fast-xml-parser":3}],19:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.parseOsmChangeXml=x.parseOsmChangeJson=void 0;const T=p("../_xml");function w(D){return{changeset:+D.$.changeset,id:+D.$.id,timestamp:D.$.timestamp,uid:+D.$.uid,user:D.$.user,version:+D.$.version,tags:D.tag?Object.fromEntries(D.tag.map(C=>[C.$.k,C.$.v])):void 0}}const a=D=>{const C=[];if(D.node){const k=D.node.map(V=>Object.assign(Object.assign({type:"node"},w(V)),{lat:+V.$.lat,lon:+V.$.lon}));C.push(...k)}if(D.way){const k=D.way.map(V=>{var N;return Object.assign(Object.assign({type:"way"},w(V)),{nodes:((N=V.nd)===null||N===void 0?void 0:N.map(Q=>+Q.$.ref))||[]})});C.push(...k)}if(D.relation){const k=D.relation.map(V=>{var N;return Object.assign(Object.assign({type:"relation"},w(V)),{members:((N=V.member)===null||N===void 0?void 0:N.map(Q=>({ref:+Q.$.ref,role:Q.$.role,type:Q.$.type})))||[]})});C.push(...k)}return C};function L(D){var C,k,V;return{create:((C=D.osmChange[0].create)===null||C===void 0?void 0:C.flatMap(a))||[],modify:((k=D.osmChange[0].modify)===null||k===void 0?void 0:k.flatMap(a))||[],delete:((V=D.osmChange[0].delete)===null||V===void 0?void 0:V.flatMap(a))||[]}}x.parseOsmChangeJson=L;function R(D){const C=T.xmlParser.parse(D);return L(C)}x.parseOsmChangeXml=R},{"../_xml":17}],20:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(we){try{Te(C.next(we))}catch(_e){N(_e)}}function he(we){try{Te(C.throw(we))}catch(_e){N(_e)}}function Te(we){we.done?V(we.value):k(we.value).then(Q,he)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.createChangesetComment=void 0;const w=p("../_osmFetch");function a(L,R){return T(this,void 0,void 0,function*(){yield(0,w.osmFetch)(`/0.6/changeset/${L}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(R)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}x.createChangesetComment=a},{"../_osmFetch":16}],21:[function(p,v,x){var T=this&&this.__awaiter||function(R,D,C,k){function V(N){return N instanceof C?N:new C(function(Q){Q(N)})}return new(C||(C=Promise))(function(N,Q){function he(_e){try{we(k.next(_e))}catch(Me){Q(Me)}}function Te(_e){try{we(k.throw(_e))}catch(Me){Q(Me)}}function we(_e){_e.done?N(_e.value):V(_e.value).then(he,Te)}we((k=k.apply(R,D||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getChangesetDiff=void 0;const w=p("../_osmFetch"),a=p("./_parseOsmChangeXml");function L(R){return T(this,void 0,void 0,function*(){const D=yield(0,w.osmFetch)(`/0.6/changeset/${R}/download`);return(0,a.parseOsmChangeJson)(D)})}x.getChangesetDiff=L},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(p,v,x){var T=this&&this.__awaiter||function(C,k,V,N){function Q(he){return he instanceof V?he:new V(function(Te){Te(he)})}return new(V||(V=Promise))(function(he,Te){function we(ne){try{Me(N.next(ne))}catch(ce){Te(ce)}}function _e(ne){try{Me(N.throw(ne))}catch(ce){Te(ce)}}function Me(ne){ne.done?he(ne.value):Q(ne.value).then(we,_e)}Me((N=N.apply(C,k||[])).next())})},w=this&&this.__rest||function(C,k){var V={};for(var N in C)Object.prototype.hasOwnProperty.call(C,N)&&k.indexOf(N)<0&&(V[N]=C[N]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Q=0,N=Object.getOwnPropertySymbols(C);Q<N.length;Q++)k.indexOf(N[Q])<0&&Object.prototype.propertyIsEnumerable.call(C,N[Q])&&(V[N[Q]]=C[N[Q]]);return V};Object.defineProperty(x,"__esModule",{value:!0}),x.getChangeset=x.listChangesets=void 0;const a=p("../_osmFetch"),L=C=>{var k;return{id:+C.$.id,created_at:new Date(C.$.created_at),closed_at:new Date(C.$.closed_at),open:C.$.open==="true",comments_count:+C.$.comments_count,changes_count:+C.$.changes_count,min_lat:+C.$.min_lat,min_lon:+C.$.min_lon,max_lat:+C.$.max_lat,max_lon:+C.$.max_lon,uid:+C.$.uid,user:C.$.user,tags:Object.fromEntries(C.tag.map(V=>[V.$.k,V.$.v])),discussion:(k=C.discussion)===null||k===void 0?void 0:k[0].comment.map(V=>({date:new Date(V.$.date),user:V.$.user,uid:V.$.uid,text:V.text[0]}))}};function R(C){var k;return T(this,void 0,void 0,function*(){const{only:V}=C,N=w(C,["only"]);return((k=(yield(0,a.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},V&&{[V]:!0}),N))).osm[0].changeset)===null||k===void 0?void 0:k.map(L))||[]})}x.listChangesets=R;function D(C,k=!0){return T(this,void 0,void 0,function*(){return(yield(0,a.osmFetch)(`/0.6/changeset/${C}`,{include_discussion:k})).osm[0].changeset.map(L)[0]})}x.getChangeset=D},{"../_osmFetch":16}],23:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(R,D,C,k){k===void 0&&(k=C);var V=Object.getOwnPropertyDescriptor(D,C);(!V||("get"in V?!D.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return D[C]}}),Object.defineProperty(R,k,V)}:function(R,D,C,k){k===void 0&&(k=C),R[k]=D[C]}),w=this&&this.__exportStar||function(R,D){for(var C in R)C!=="default"&&!Object.prototype.hasOwnProperty.call(D,C)&&T(D,R,C)};Object.defineProperty(x,"__esModule",{value:!0}),x.createOsmChangeXml=x.parseOsmChangeXml=void 0,w(p("./createChangesetComment"),x),w(p("./getChangesetDiff"),x),w(p("./getChangesets"),x),w(p("./uploadChangeset"),x);var a=p("./_parseOsmChangeXml");Object.defineProperty(x,"parseOsmChangeXml",{enumerable:!0,get:function(){return a.parseOsmChangeXml}});var L=p("./_createOsmChangeXml");Object.defineProperty(x,"createOsmChangeXml",{enumerable:!0,get:function(){return L.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(p,v,x){var T=this&&this.__awaiter||function(R,D,C,k){function V(N){return N instanceof C?N:new C(function(Q){Q(N)})}return new(C||(C=Promise))(function(N,Q){function he(_e){try{we(k.next(_e))}catch(Me){Q(Me)}}function Te(_e){try{we(k.throw(_e))}catch(Me){Q(Me)}}function we(_e){_e.done?N(_e.value):V(_e.value).then(he,Te)}we((k=k.apply(R,D||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.uploadChangeset=void 0;const w=p("../_osmFetch"),a=p("./_createOsmChangeXml");function L(R,D){return T(this,void 0,void 0,function*(){const C=(0,a.createChangesetMetaXml)(R),k=+(yield(0,w.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:C,headers:{"content-type":"application/xml; charset=utf-8"}})),V=(0,a.createOsmChangeXml)(k,D);return yield(0,w.osmFetch)(`/0.6/changeset/${k}/upload`,void 0,{method:"POST",body:V,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,w.osmFetch)(`/0.6/changeset/${k}/close`,void 0,{method:"PUT"}),+k})}x.uploadChangeset=L},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(we){try{Te(C.next(we))}catch(_e){N(_e)}}function he(we){try{Te(C.throw(we))}catch(_e){N(_e)}}function Te(we){we.done?V(we.value):k(we.value).then(Q,he)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getCapabilities=void 0;const w=p("./_osmFetch");function a(){var L;return T(this,void 0,void 0,function*(){const R=yield(0,w.osmFetch)("/capabilities");return{limits:{maxArea:+R.osm[0].api[0].area[0].$.maximum,maxNoteArea:+R.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+R.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+R.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+R.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+R.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((L=R.osm[0].policy[0].imagery[0].blacklist)===null||L===void 0?void 0:L.map(C=>C.$.regex))||[]}}})}x.getCapabilities=a},{"./_osmFetch":16}],26:[function(p,v,x){var T=this&&this.__awaiter||function(V,N,Q,he){function Te(we){return we instanceof Q?we:new Q(function(_e){_e(we)})}return new(Q||(Q=Promise))(function(we,_e){function Me(M){try{ce(he.next(M))}catch($){_e($)}}function ne(M){try{ce(he.throw(M))}catch($){_e($)}}function ce(M){M.done?we(M.value):Te(M.value).then(Me,ne)}ce((he=he.apply(V,N||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getRelationsForElement=x.getWaysForNode=x.getFeatureHistory=x.getFeatureAtVersion=x.getFeatures=x.getFeature=void 0;const w=p("./_osmFetch");function a(V,N,Q){return T(this,void 0,void 0,function*(){const he=Q&&V!=="node"?"/full":"";return(yield(0,w.osmFetch)(`/0.6/${V}/${N}${he}.json`)).elements})}x.getFeature=a;function L(V,N){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/${V}s.json?${V}s=${N.join(",")}`)).elements})}x.getFeatures=L;function R(V,N,Q){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/${V}/${N}/${Q}.json`)).elements[0]})}x.getFeatureAtVersion=R;function D(V,N){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/${V}/${N}/history.json`)).elements})}x.getFeatureHistory=D;function C(V){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/node/${V}/ways.json`)).elements})}x.getWaysForNode=C;function k(V,N){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/${V}/${N}/relations.json`)).elements})}x.getRelationsForElement=k},{"./_osmFetch":16}],27:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(we){try{Te(C.next(we))}catch(_e){N(_e)}}function he(we){try{Te(C.throw(we))}catch(_e){N(_e)}}function Te(we){we.done?V(we.value):k(we.value).then(Q,he)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getMapData=void 0;const w=p("./_osmFetch");function a(L){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)("/0.6/map.json",{bbox:L})).elements})}x.getMapData=a},{"./_osmFetch":16}],28:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(we){try{Te(C.next(we))}catch(_e){N(_e)}}function he(we){try{Te(C.throw(we))}catch(_e){N(_e)}}function Te(we){we.done?V(we.value):k(we.value).then(Q,he)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getUIdFromDisplayName=void 0;const w=p("./changesets");function a(L){return T(this,void 0,void 0,function*(){const R=yield(0,w.listChangesets)({display_name:L});if(!R.length)throw new Error("Could not get uid because the user has never edited the map");return R[0].uid})}x.getUIdFromDisplayName=a},{"./changesets":23}],29:[function(p,v,x){var T=this&&this.__awaiter||function(R,D,C,k){function V(N){return N instanceof C?N:new C(function(Q){Q(N)})}return new(C||(C=Promise))(function(N,Q){function he(_e){try{we(k.next(_e))}catch(Me){Q(Me)}}function Te(_e){try{we(k.throw(_e))}catch(Me){Q(Me)}}function we(_e){_e.done?N(_e.value):V(_e.value).then(he,Te)}we((k=k.apply(R,D||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getUsers=x.getUser=void 0;const w=p("./_osmFetch");function a(R){return T(this,void 0,void 0,function*(){const D=yield(0,w.osmFetch)(`/0.6/user/${R==="me"?"details":R}.json`);return Object.assign(Object.assign({},D.user),{account_created:new Date(D.user.account_created)})})}x.getUser=a;function L(R){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)("/0.6/users",{users:R})).users.map(C=>Object.assign(Object.assign({},C),{account_created:new Date(C.account_created)}))})}x.getUsers=L},{"./_osmFetch":16}],30:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./changesets"),x),w(p("./notes"),x),w(p("./getCapabilities"),x),w(p("./getFeature"),x),w(p("./getMapData"),x),w(p("./getUIdFromDisplayName"),x),w(p("./getUser"),x)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(p,v,x){var T=this&&this.__awaiter||function(k,V,N,Q){function he(Te){return Te instanceof N?Te:new N(function(we){we(Te)})}return new(N||(N=Promise))(function(Te,we){function _e(ce){try{ne(Q.next(ce))}catch(M){we(M)}}function Me(ce){try{ne(Q.throw(ce))}catch(M){we(M)}}function ne(ce){ce.done?Te(ce.value):he(ce.value).then(_e,Me)}ne((Q=Q.apply(k,V||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getNote=x.getNotesForArea=x.getNotesForQuery=void 0;const w=p("../_osmFetch"),a=k=>{const[V,N]=k.geometry.coordinates;return Object.assign(Object.assign({},k.properties),{location:{lat:N,lng:V}})};function L(k,V){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/notes${V?"/search":""}.json`,k)).features.map(a)})}function R(k){return L(k,!0)}x.getNotesForQuery=R;function D(k){return L({bbox:k},!1)}x.getNotesForArea=D;function C(k){return T(this,void 0,void 0,function*(){const V=yield(0,w.osmFetch)(`/0.6/notes/${k}.json`);return a(V)})}x.getNote=C},{"../_osmFetch":16}],32:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./getNotes"),x),w(p("./noteActions"),x)},{"./getNotes":31,"./noteActions":33}],33:[function(p,v,x){var T=this&&this.__awaiter||function(D,C,k,V){function N(Q){return Q instanceof k?Q:new k(function(he){he(Q)})}return new(k||(k=Promise))(function(Q,he){function Te(Me){try{_e(V.next(Me))}catch(ne){he(ne)}}function we(Me){try{_e(V.throw(Me))}catch(ne){he(ne)}}function _e(Me){Me.done?Q(Me.value):N(Me.value).then(Te,we)}_e((V=V.apply(D,C||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.reopenNote=x.commentOnNote=x.createNote=void 0;const w=p("../_osmFetch");function a(D,C,k){return T(this,void 0,void 0,function*(){yield(0,w.osmFetch)("/0.6/notes",{lat:D,lon:C,text:k})})}x.createNote=a;function L(D,C){return T(this,void 0,void 0,function*(){yield(0,w.osmFetch)(`/0.6/notes/${D}/comment`,{text:C})})}x.commentOnNote=L;function R(D,C){return T(this,void 0,void 0,function*(){yield(0,w.osmFetch)(`/0.6/notes/${D}/reopen`,{text:C})})}x.reopenNote=R},{"../_osmFetch":16}],34:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.createPopup=void 0;function T(w){let a=!1;return new Promise((L,R)=>{const[D,C]=[600,550],k=Object.entries({width:D,height:C,left:window.screen.width/2-D/2,top:window.screen.height/2-C/2}).map(([Q,he])=>`${Q}=${he}`).join(","),V=window.open("about:blank","oauth_window",k);if(!V)throw new Error("Popup was blocked");V.location=w,window.authComplete=Q=>{L(Q),a=!0};const N=setInterval(()=>{V.closed&&(a||R(new Error("Cancelled")),clearInterval(N))},500)})}x.createPopup=T},{}],35:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(we){try{Te(C.next(we))}catch(_e){N(_e)}}function he(we){try{Te(C.throw(we))}catch(_e){N(_e)}}function Te(we){we.done?V(we.value):k(we.value).then(Q,he)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.exchangeCode=void 0;const w=p("./helpers");function a(L,{options:R,pkceVerifier:D,state:C}){return T(this,void 0,void 0,function*(){const k=new URL(L).searchParams,V=k.get("error_description"),N=k.get("code"),Q=k.get("state");if(V)throw new Error(V);if(!N)throw new Error("No code in OAuth response");if(!D||!C)throw new Error("No login in progress");if(C!==Q)throw new Error("State Mismatch");const he={grant_type:"authorization_code",code:N,redirect_uri:R.redirectUrl,client_id:R.clientId,code_verifier:D},Te=`${(0,w.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(he).toString()}`,_e=yield(yield fetch(Te,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in _e)throw new Error(_e.error_description);const Me={issuedAt:new Date(_e.created_at*1e3).toISOString(),accessToken:_e.access_token,scopes:_e.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(Me)),delete window.authComplete,Me})}x.exchangeCode=a},{"./helpers":36}],36:[function(p,v,x){var T=this&&this.__awaiter||function(D,C,k,V){function N(Q){return Q instanceof k?Q:new k(function(he){he(Q)})}return new(k||(k=Promise))(function(Q,he){function Te(Me){try{_e(V.next(Me))}catch(ne){he(ne)}}function we(Me){try{_e(V.throw(Me))}catch(ne){he(ne)}}function _e(Me){Me.done?Q(Me.value):N(Me.value).then(Te,we)}_e((V=V.apply(D,C||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getOAuthBaseUrl=x.getRandomString=x.sha256=void 0;const w=p("../config");function a(D){return T(this,void 0,void 0,function*(){const C=new TextEncoder().encode(D),k=yield window.crypto.subtle.digest("SHA-256",C);return btoa(String.fromCharCode(...new Uint8Array(k))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}x.sha256=a;function L(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(D=>`0${D.toString(16)}`.slice(-2)).join("")}x.getRandomString=L;function R(){let D=(0,w.getConfig)().apiUrl;return D==="https://api.openstreetmap.org"&&(D="https://www.openstreetmap.org"),D}x.getOAuthBaseUrl=R},{"../config":39}],37:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./oauth2"),x)},{"./oauth2":38}],38:[function(p,v,x){var T=this&&this.__awaiter||function(V,N,Q,he){function Te(we){return we instanceof Q?we:new Q(function(_e){_e(we)})}return new(Q||(Q=Promise))(function(we,_e){function Me(M){try{ce(he.next(M))}catch($){_e($)}}function ne(M){try{ce(he.throw(M))}catch($){_e($)}}function ce(M){M.done?we(M.value):Te(M.value).then(Me,ne)}ce((he=he.apply(V,N||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.logout=x.isLoggedIn=x.getAuthToken=x.authReady=x.login=void 0;const w=p("./createPopup"),a=p("./exchangeCode"),L=p("./helpers");function R(V){return T(this,void 0,void 0,function*(){if(!V.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!V.clientId)throw new Error("You must include the 'clientId' option");if(!V.scopes)throw new Error("You must include the 'scopes' option");const N=(0,L.getRandomString)(),Q=(0,L.getRandomString)(),he=yield(0,L.sha256)(Q),Te={scope:V.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:N,redirect_uri:V.redirectUrl,client_id:V.clientId,code_challenge_method:"S256",code_challenge:he},we=`${(0,L.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(Te).toString()}`,_e={state:N,pkceVerifier:Q,options:V};if(V.mode==="popup"){const Me=yield(0,w.createPopup)(we);return(0,a.exchangeCode)(Me,_e)}if(V.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(_e)),window.location.replace(we);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}x.login=R,x.authReady=T(void 0,void 0,void 0,function*(){var V;if(typeof window>"u")return;const N=window.location.href,Q=localStorage.getItem("__osmAuthTemp");if(new URL(N).searchParams.get("code")){if(!((V=window.opener)===null||V===void 0)&&V.authComplete)window.opener.authComplete(N),window.close();else if(Q)try{const he=JSON.parse(Q);yield(0,a.exchangeCode)(N,he),localStorage.removeItem("__osmAuthTemp")}catch(he){console.error("OSM Auth Error",he)}}});const D=()=>{try{const V=localStorage.getItem("__osmAuth");return V?JSON.parse(V).accessToken:void 0}catch{return}};x.getAuthToken=D;const C=()=>!!(0,x.getAuthToken)();x.isLoggedIn=C;function k(){localStorage.removeItem("__osmAuth")}x.logout=k},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.configure=x.getConfig=void 0;const T={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},w=()=>T;x.getConfig=w;function a(L){Object.assign(T,L)}x.configure=a},{}],40:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./api"),x),w(p("./auth"),x),w(p("./config"),x),w(p("./types"),x)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0})},{}],42:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}],43:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}],44:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./changesets"),x),w(p("./features"),x),w(p("./general"),x),w(p("./notes"),x),w(p("./osmPatch"),x),w(p("./user"),x)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}],46:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}],47:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}]},{},[40])(40)})}(Eg)),Eg.exports}var Il=dE();const gx=()=>{const[u,c]=zt.useState(!1);zt.useEffect(()=>{c(Il.isLoggedIn())},[]);const p=zt.useCallback(()=>{(async()=>(await Il.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),c(Il.isLoggedIn()),window.location.reload()))()},[]),v=zt.useCallback(()=>{(async()=>(Il.logout(),c(!1)))()},[]);return Mt.jsx(Mt.Fragment,{children:u?Mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:v,children:"logout"}):Mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:p,children:"login"})})},fE=()=>{const[u,c]=zt.useState(!1),[p,v]=zt.useState(void 0);return zt.useEffect(()=>{c(Il.isLoggedIn())},[]),zt.useEffect(()=>{u&&(async()=>{const x=await Il.getUser("me");v(x)})()},[u]),Mt.jsx(Mt.Fragment,{children:p?Mt.jsx("img",{style:{width:"44px",height:"44px"},src:p.img.href,alt:p.display_name,title:p.display_name}):Mt.jsx("img",{})})},pE=()=>{const[u,c]=zt.useState(!1),[p,v]=zt.useState(void 0);return zt.useEffect(()=>{c(Il.isLoggedIn())},[]),zt.useEffect(()=>{u&&(async()=>{const x=await Il.getUser("me");v(x)})()},[u]),Mt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[Mt.jsxs("div",{children:[Mt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),p?Mt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",p==null?void 0:p.display_name,", You have"," ",p==null?void 0:p.changesets.count," changesets."]}):Mt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),Mt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[Mt.jsx("div",{children:Mt.jsx(fE,{})}),Mt.jsx("div",{children:Mt.jsx(gx,{})})]})]})},yx=({feature:u})=>{var p;const c=JSON.parse((p=u.properties)==null?void 0:p.center);return Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(c[0]*1e4)/1e4]}),", ",Mt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(c[1]*1e4)/1e4," "]})]})},mE=({feature:u})=>Mt.jsx(Mt.Fragment,{children:u.properties&&Object.keys(u.properties).map(c=>{var p;if(c.startsWith("addr"))return Mt.jsxs("div",{className:c,children:[Mt.jsx("span",{className:"underline",children:c})," = ",Mt.jsx("span",{children:(p=u.properties)==null?void 0:p[c]})]})})});function gf(u,c,p){return parseInt(u.substr(c,p),16)}function vx(u){return u|=0,u<0?"00":u<16?"0"+u.toString(16):u<256?u.toString(16):"ff"}function Tg(u,c,p){return p=p<0?p+6:p>6?p-6:p,vx(255*(p<1?u+(c-u)*p:p<3?c:p<4?u+(c-u)*(4-p):u))}function gE(u){if(/^#[0-9a-f]{3,8}$/i.test(u)){let c;const p=u.length;if(p<6){const v=u[1],x=u[2],T=u[3],w=u[4]||"";c="#"+v+v+x+x+T+T+w+w}return(p==7||p>8)&&(c=u),c}}function yE(u,c,p){let v;if(c==0){const x=vx(p*255);v=x+x+x}else{const x=p<=.5?p*(c+1):p+c-p*c,T=p*2-x;v=Tg(T,x,u*6+2)+Tg(T,x,u*6)+Tg(T,x,u*6-2)}return"#"+v}function df(u,c,p){const v=[.55,.5,.5,.46,.6,.55,.55],x=v[u*6+.5|0];return p=p<.5?p*x*2:x+(p-.5)*(1-x)*2,yE(u,c,p)}const vE=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},h_={V:"jdenticon_config",n:"config"};var _E={};function xE(u,c){const p=_E[h_.n]||vE[h_.V]||{},v=p.lightness||{},x=p.saturation||{},T="color"in x?x.color:x,w=x.grayscale,a=p.backColor,L=p.padding;function R(C,k){let V=v[C];return V&&V.length>1||(V=k),function(N){return N=V[0]+N*(V[1]-V[0]),N<0?0:N>1?1:N}}function D(C){const k=p.hues;let V;return k&&k.length>0&&(V=k[0|.999*C*k.length]),typeof V=="number"?(V/360%1+1)%1:C}return{W:D,o:typeof T=="number"?T:.5,D:typeof w=="number"?w:0,p:R("color",[.4,.8]),F:R("grayscale",[.3,.9]),G:gE(a),X:typeof L=="number"?L:c}}class Np{constructor(c,p){this.x=c,this.y=p}}class _x{constructor(c,p,v,x){this.q=c,this.t=p,this.H=v,this.Y=x}I(c,p,v,x){const T=this.q+this.H,w=this.t+this.H,a=this.Y;return a===1?new Np(T-p-(x||0),this.t+c):a===2?new Np(T-c-(v||0),w-p-(x||0)):a===3?new Np(this.q+p,w-c-(v||0)):new Np(this.q+c,this.t+p)}}const wE=new _x(0,0,0,0);class bE{constructor(c){this.J=c,this.u=wE}g(c,p){const v=p?-2:2,x=[];for(let T=p?c.length-2:0;T<c.length&&T>=0;T+=v)x.push(this.u.I(c[T],c[T+1]));this.J.g(x)}h(c,p,v,x){const T=this.u.I(c,p,v,v);this.J.h(T,v,x)}i(c,p,v,x,T){this.g([c,p,c+v,p,c+v,p+x,c,p+x],T)}j(c,p,v,x,T,w){const a=[c+v,p,c+v,p+x,c,p+x,c,p];a.splice((T||0)%4*2,2),this.g(a,w)}K(c,p,v,x,T){this.g([c+v/2,p,c+v,p+x/2,c+v/2,p+x,c,p+x/2],T)}}function SE(u,c,p,v){u=u%14;let x,T,w,a,L,R;u?u==1?(w=0|p*.5,a=0|p*.8,c.j(p-w,0,w,a,2)):u==2?(w=0|p/3,c.i(w,w,p-w,p-w)):u==3?(L=p*.1,R=p<6?1:p<8?2:0|p*.25,L=L>1?0|L:L>.5?1:L,c.i(R,R,p-L-R,p-L-R)):u==4?(T=0|p*.15,w=0|p*.5,c.h(p-w-T,p-w-T,w)):u==5?(L=p*.1,R=L*4,R>3&&(R=0|R),c.i(0,0,p,p),c.g([R,R,p-L,R,R+(p-R-L)/2,p-L],!0)):u==6?c.g([0,0,p,0,p,p*.7,p*.4,p*.4,p*.7,p,0,p]):u==7?c.j(p/2,p/2,p/2,p/2,3):u==8?(c.i(0,0,p,p/2),c.i(0,p/2,p/2,p/2),c.j(p/2,p/2,p/2,p/2,1)):u==9?(L=p*.14,R=p<4?1:p<6?2:0|p*.35,L=p<8?L:0|L,c.i(0,0,p,p),c.i(R,R,p-R-L,p-R-L,!0)):u==10?(L=p*.12,R=L*3,c.i(0,0,p,p),c.h(R,R,p-L-R,!0)):u==11?c.j(p/2,p/2,p/2,p/2,3):u==12?(T=p*.25,c.i(0,0,p,p),c.K(T,T,p-T,p-T,!0)):!v&&(T=p*.4,w=p*1.2,c.h(T,T,w)):(x=p*.42,c.g([0,0,p,0,p,p-x*2,p-x,p,0,p]))}function d_(u,c,p){u=u%4;let v;u?u==1?c.j(0,p/2,p,p/2,0):u==2?c.K(0,0,p,p):(v=p/6,c.h(v,v,p-2*v)):c.j(0,0,p,p,0)}function EE(u,c){return u=c.W(u),[df(u,c.D,c.F(0)),df(u,c.o,c.p(.5)),df(u,c.D,c.F(1)),df(u,c.o,c.p(1)),df(u,c.o,c.p(0))]}function TE(u,c,p){const v=xE(p,.08);v.G&&u.m(v.G);let x=u.k;const T=.5+x*v.X|0;x-=T*2;const w=new bE(u),a=0|x/4,L=0|T+x/2-a*2,R=0|T+x/2-a*2;function D(he,Te,we,_e,Me){const ne=gf(c,we,1);let ce=_e?gf(c,_e,1):0;u.L(k[V[he]]);for(let M=0;M<Me.length;M++)w.u=new _x(L+Me[M][0]*a,R+Me[M][1]*a,a,ce++%4),Te(ne,w,a,M);u.M()}const C=gf(c,-7)/268435455,k=EE(C,v),V=[];let N;function Q(he){if(he.indexOf(N)>=0){for(let Te=0;Te<he.length;Te++)if(V.indexOf(he[Te])>=0)return!0}}for(let he=0;he<3;he++)N=gf(c,8+he,1)%k.length,(Q([0,4])||Q([2,3]))&&(N=1),V.push(N);D(0,d_,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),D(1,d_,4,5,[[0,0],[3,0],[3,3],[0,3]]),D(2,SE,1,null,[[1,1],[2,1],[2,2],[1,2]]),u.finish()}function IE(u){var v=0,x=0,T=encodeURI(u)+"%80",w=[],a,L=[],R=1732584193,D=4023233417,C=~R,k=~D,V=3285377520,N=[R,D,C,k,V],Q=0,he="";function Te(we,_e){return we<<_e|we>>>32-_e}for(;v<T.length;x++)w[x>>2]=w[x>>2]|(T[v]=="%"?parseInt(T.substring(v+1,v+=3),16):T.charCodeAt(v++))<<(3-(x&3))*8;for(a=((x+7>>6)+1)*16,w[a-1]=x*8-8;Q<a;Q+=16){for(v=0;v<80;v++)x=Te(R,5)+V+(v<20?(D&C^~D&k)+1518500249:v<40?(D^C^k)+1859775393:v<60?(D&C^D&k^C&k)+2400959708:(D^C^k)+3395469782)+(L[v]=v<16?w[Q+v]|0:Te(L[v-3]^L[v-8]^L[v-14]^L[v-16],1)),V=k,k=C,C=Te(D,30),D=R,R=x;N[0]=R=N[0]+R|0,N[1]=D=N[1]+D|0,N[2]=C=N[2]+C|0,N[3]=k=N[3]+k|0,N[4]=V=N[4]+V|0}for(v=0;v<40;v++)he+=(N[v>>3]>>>(7-(v&7))*4&15).toString(16);return he}function CE(u){return/^[0-9a-f]{11,}$/i.test(u)&&u}function PE(u){return IE(u==null?"":""+u)}typeof document<"u"&&document.querySelectorAll.bind(document);function cd(u){return(u*10+.5|0)/10}class AE{constructor(){this.v=""}g(c){let p="";for(let v=0;v<c.length;v++)p+=(v?"L":"M")+cd(c[v].x)+" "+cd(c[v].y);this.v+=p+"Z"}h(c,p,v){const x=v?0:1,T=cd(p/2),w=cd(p),a="a"+T+","+T+" 0 1,"+x+" ";this.v+="M"+cd(c.x)+" "+cd(c.y+p/2)+a+w+",0"+a+-w+",0"}}class ME{constructor(c){this.A,this.B={},this.O=c,this.k=c.k}m(c){const p=/^(#......)(..)?/.exec(c),v=p[2]?gf(p[2],0)/255:1;this.O.m(p[1],v)}L(c){this.A=this.B[c]||(this.B[c]=new AE)}M(){}g(c){this.A.g(c)}h(c,p,v){this.A.h(c,p,v)}finish(){const c=this.B;for(let p in c)c.hasOwnProperty(p)&&this.O.P(p,c[p].v)}}const kE={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class zE{constructor(c){this.k=c,this.C='<svg xmlns="'+kE.R+'" width="'+c+'" height="'+c+'" viewBox="0 0 '+c+" "+c+'">'}m(c,p){p&&(this.C+='<rect width="100%" height="100%" fill="'+c+'" opacity="'+p.toFixed(2)+'"/>')}P(c,p){this.C+='<path fill="'+c+'" d="'+p+'"/>'}toString(){return this.C+"</svg>"}}function RE(u,c,p){const v=new zE(c);return TE(new ME(v),CE(u)||PE(u),p),v.toString()}const FE=({feature:u,size:c})=>u.properties===null?null:Mt.jsx(Mt.Fragment,{children:u.properties.userIconHref.length>0?Mt.jsx("img",{src:u.properties.userIconHref,style:{width:c+"px",height:c+"px"}}):Mt.jsx("span",{dangerouslySetInnerHTML:{__html:RE(u.properties.user||"noname",c)}})}),OE=({feature:u})=>{var c;return(c=u.properties)!=null&&c.uid?Mt.jsxs("span",{children:["Last edited by: ",u.properties.user]}):null};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const jE={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},LE=({viewState:u})=>{const[c,p]=zt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return zt.useEffect(()=>{p(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[u]),Mt.jsx(Mt.Fragment,{children:u&&c&&Mt.jsxs("a",{href:c,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[Mt.jsx(Pc,{icon:jE,style:{padding:"0px 3px"}}),Mt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var Ig={};class ns{constructor(){this._partials=new Float64Array(32),this._n=0}add(c){const p=this._partials;let v=0;for(let x=0;x<this._n&&x<32;x++){const T=p[x],w=c+T,a=Math.abs(c)<Math.abs(T)?c-(w-T):T-(w-c);a&&(p[v++]=a),c=w}return p[v]=c,this._n=v+1,this}valueOf(){const c=this._partials;let p=this._n,v,x,T,w=0;if(p>0){for(w=c[--p];p>0&&(v=w,x=c[--p],w=v+x,T=x-(w-v),!T););p>0&&(T<0&&c[p-1]<0||T>0&&c[p-1]>0)&&(x=T*2,v=w+x,x==v-w&&(w=v))}return w}}function*DE(u){for(const c of u)yield*c}function xx(u){return Array.from(DE(u))}function md(u,c,p){u=+u,c=+c,p=(x=arguments.length)<2?(c=u,u=0,1):x<3?1:+p;for(var v=-1,x=Math.max(0,Math.ceil((c-u)/p))|0,T=new Array(x);++v<x;)T[v]=u+v*p;return T}var Nn=1e-6,Rf=1e-12,sr=Math.PI,ki=sr/2,om=sr/4,Ps=sr*2,Wr=180/sr,$n=sr/180,_r=Math.abs,Id=Math.atan,As=Math.atan2,Mn=Math.cos,Up=Math.ceil,wx=Math.exp,Ly=Math.hypot,sm=Math.log,Cg=Math.pow,wn=Math.sin,Ja=Math.sign||function(u){return u>0?1:u<0?-1:0},Co=Math.sqrt,T0=Math.tan;function bx(u){return u>1?0:u<-1?sr:Math.acos(u)}function Ms(u){return u>1?ki:u<-1?-ki:Math.asin(u)}function f_(u){return(u=wn(u/2))*u}function vi(){}function am(u,c){u&&m_.hasOwnProperty(u.type)&&m_[u.type](u,c)}var p_={Feature:function(u,c){am(u.geometry,c)},FeatureCollection:function(u,c){for(var p=u.features,v=-1,x=p.length;++v<x;)am(p[v].geometry,c)}},m_={Sphere:function(u,c){c.sphere()},Point:function(u,c){u=u.coordinates,c.point(u[0],u[1],u[2])},MultiPoint:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)u=p[v],c.point(u[0],u[1],u[2])},LineString:function(u,c){Dy(u.coordinates,c,0)},MultiLineString:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)Dy(p[v],c,0)},Polygon:function(u,c){g_(u.coordinates,c)},MultiPolygon:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)g_(p[v],c)},GeometryCollection:function(u,c){for(var p=u.geometries,v=-1,x=p.length;++v<x;)am(p[v],c)}};function Dy(u,c,p){var v=-1,x=u.length-p,T;for(c.lineStart();++v<x;)T=u[v],c.point(T[0],T[1],T[2]);c.lineEnd()}function g_(u,c){var p=-1,v=u.length;for(c.polygonStart();++p<v;)Dy(u[p],c,1);c.polygonEnd()}function Tl(u,c){u&&p_.hasOwnProperty(u.type)?p_[u.type](u,c):am(u,c)}var lm=new ns,um=new ns,Sx,Ex,By,Ny,Uy,mu={point:vi,lineStart:vi,lineEnd:vi,polygonStart:function(){lm=new ns,mu.lineStart=BE,mu.lineEnd=NE},polygonEnd:function(){var u=+lm;um.add(u<0?Ps+u:u),this.lineStart=this.lineEnd=this.point=vi},sphere:function(){um.add(Ps)}};function BE(){mu.point=UE}function NE(){Tx(Sx,Ex)}function UE(u,c){mu.point=Tx,Sx=u,Ex=c,u*=$n,c*=$n,By=u,Ny=Mn(c=c/2+om),Uy=wn(c)}function Tx(u,c){u*=$n,c*=$n,c=c/2+om;var p=u-By,v=p>=0?1:-1,x=v*p,T=Mn(c),w=wn(c),a=Uy*w,L=Ny*T+a*Mn(x),R=a*v*wn(x);lm.add(As(R,L)),By=u,Ny=T,Uy=w}function VE(u){return um=new ns,Tl(u,mu),um*2}function cm(u){return[As(u[1],u[0]),Ms(u[2])]}function Mh(u){var c=u[0],p=u[1],v=Mn(p);return[v*Mn(c),v*wn(c),wn(p)]}function Vp(u,c){return u[0]*c[0]+u[1]*c[1]+u[2]*c[2]}function wd(u,c){return[u[1]*c[2]-u[2]*c[1],u[2]*c[0]-u[0]*c[2],u[0]*c[1]-u[1]*c[0]]}function Pg(u,c){u[0]+=c[0],u[1]+=c[1],u[2]+=c[2]}function $p(u,c){return[u[0]*c,u[1]*c,u[2]*c]}function hm(u){var c=Co(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]);u[0]/=c,u[1]/=c,u[2]/=c}var yi,Hs,Mi,Ia,Ih,Ix,Cx,vd,If,Cc,tc,Yu={point:Vy,lineStart:y_,lineEnd:v_,polygonStart:function(){Yu.point=Ax,Yu.lineStart=$E,Yu.lineEnd=GE,If=new ns,mu.polygonStart()},polygonEnd:function(){mu.polygonEnd(),Yu.point=Vy,Yu.lineStart=y_,Yu.lineEnd=v_,lm<0?(yi=-(Mi=180),Hs=-(Ia=90)):If>Nn?Ia=90:If<-Nn&&(Hs=-90),tc[0]=yi,tc[1]=Mi},sphere:function(){yi=-(Mi=180),Hs=-(Ia=90)}};function Vy(u,c){Cc.push(tc=[yi=u,Mi=u]),c<Hs&&(Hs=c),c>Ia&&(Ia=c)}function Px(u,c){var p=Mh([u*$n,c*$n]);if(vd){var v=wd(vd,p),x=[v[1],-v[0],0],T=wd(x,v);hm(T),T=cm(T);var w=u-Ih,a=w>0?1:-1,L=T[0]*Wr*a,R,D=_r(w)>180;D^(a*Ih<L&&L<a*u)?(R=T[1]*Wr,R>Ia&&(Ia=R)):(L=(L+360)%360-180,D^(a*Ih<L&&L<a*u)?(R=-T[1]*Wr,R<Hs&&(Hs=R)):(c<Hs&&(Hs=c),c>Ia&&(Ia=c))),D?u<Ih?Ta(yi,u)>Ta(yi,Mi)&&(Mi=u):Ta(u,Mi)>Ta(yi,Mi)&&(yi=u):Mi>=yi?(u<yi&&(yi=u),u>Mi&&(Mi=u)):u>Ih?Ta(yi,u)>Ta(yi,Mi)&&(Mi=u):Ta(u,Mi)>Ta(yi,Mi)&&(yi=u)}else Cc.push(tc=[yi=u,Mi=u]);c<Hs&&(Hs=c),c>Ia&&(Ia=c),vd=p,Ih=u}function y_(){Yu.point=Px}function v_(){tc[0]=yi,tc[1]=Mi,Yu.point=Vy,vd=null}function Ax(u,c){if(vd){var p=u-Ih;If.add(_r(p)>180?p+(p>0?360:-360):p)}else Ix=u,Cx=c;mu.point(u,c),Px(u,c)}function $E(){mu.lineStart()}function GE(){Ax(Ix,Cx),mu.lineEnd(),_r(If)>Nn&&(yi=-(Mi=180)),tc[0]=yi,tc[1]=Mi,vd=null}function Ta(u,c){return(c-=u)<0?c+360:c}function HE(u,c){return u[0]-c[0]}function __(u,c){return u[0]<=u[1]?u[0]<=c&&c<=u[1]:c<u[0]||u[1]<c}function ZE(u){var c,p,v,x,T,w,a;if(Ia=Mi=-(yi=Hs=1/0),Cc=[],Tl(u,Yu),p=Cc.length){for(Cc.sort(HE),c=1,v=Cc[0],T=[v];c<p;++c)x=Cc[c],__(v,x[0])||__(v,x[1])?(Ta(v[0],x[1])>Ta(v[0],v[1])&&(v[1]=x[1]),Ta(x[0],v[1])>Ta(v[0],v[1])&&(v[0]=x[0])):T.push(v=x);for(w=-1/0,p=T.length-1,c=0,v=T[p];c<=p;v=x,++c)x=T[c],(a=Ta(v[1],x[0]))>w&&(w=a,yi=x[0],Mi=v[1])}return Cc=tc=null,yi===1/0||Hs===1/0?[[NaN,NaN],[NaN,NaN]]:[[yi,Hs],[Mi,Ia]]}var yf,dm,fm,pm,mm,gm,ym,vm,$y,Gy,Hy,Mx,kx,Ts,Is,Cs,Cl={sphere:vi,point:I0,lineStart:x_,lineEnd:w_,polygonStart:function(){Cl.lineStart=XE,Cl.lineEnd=KE},polygonEnd:function(){Cl.lineStart=x_,Cl.lineEnd=w_}};function I0(u,c){u*=$n,c*=$n;var p=Mn(c);Vf(p*Mn(u),p*wn(u),wn(c))}function Vf(u,c,p){++yf,fm+=(u-fm)/yf,pm+=(c-pm)/yf,mm+=(p-mm)/yf}function x_(){Cl.point=WE}function WE(u,c){u*=$n,c*=$n;var p=Mn(c);Ts=p*Mn(u),Is=p*wn(u),Cs=wn(c),Cl.point=qE,Vf(Ts,Is,Cs)}function qE(u,c){u*=$n,c*=$n;var p=Mn(c),v=p*Mn(u),x=p*wn(u),T=wn(c),w=As(Co((w=Is*T-Cs*x)*w+(w=Cs*v-Ts*T)*w+(w=Ts*x-Is*v)*w),Ts*v+Is*x+Cs*T);dm+=w,gm+=w*(Ts+(Ts=v)),ym+=w*(Is+(Is=x)),vm+=w*(Cs+(Cs=T)),Vf(Ts,Is,Cs)}function w_(){Cl.point=I0}function XE(){Cl.point=YE}function KE(){zx(Mx,kx),Cl.point=I0}function YE(u,c){Mx=u,kx=c,u*=$n,c*=$n,Cl.point=zx;var p=Mn(c);Ts=p*Mn(u),Is=p*wn(u),Cs=wn(c),Vf(Ts,Is,Cs)}function zx(u,c){u*=$n,c*=$n;var p=Mn(c),v=p*Mn(u),x=p*wn(u),T=wn(c),w=Is*T-Cs*x,a=Cs*v-Ts*T,L=Ts*x-Is*v,R=Ly(w,a,L),D=Ms(R),C=R&&-D/R;$y.add(C*w),Gy.add(C*a),Hy.add(C*L),dm+=D,gm+=D*(Ts+(Ts=v)),ym+=D*(Is+(Is=x)),vm+=D*(Cs+(Cs=T)),Vf(Ts,Is,Cs)}function JE(u){yf=dm=fm=pm=mm=gm=ym=vm=0,$y=new ns,Gy=new ns,Hy=new ns,Tl(u,Cl);var c=+$y,p=+Gy,v=+Hy,x=Ly(c,p,v);return x<Rf&&(c=gm,p=ym,v=vm,dm<Nn&&(c=fm,p=pm,v=mm),x=Ly(c,p,v),x<Rf)?[NaN,NaN]:[As(p,c)*Wr,Ms(v/x)*Wr]}function hd(u){return function(){return u}}function Zy(u,c){function p(v,x){return v=u(v,x),c(v[0],v[1])}return u.invert&&c.invert&&(p.invert=function(v,x){return v=c.invert(v,x),v&&u.invert(v[0],v[1])}),p}function Wy(u,c){return[_r(u)>sr?u+Math.round(-u/Ps)*Ps:u,c]}Wy.invert=Wy;function C0(u,c,p){return(u%=Ps)?c||p?Zy(S_(u),E_(c,p)):S_(u):c||p?E_(c,p):Wy}function b_(u){return function(c,p){return c+=u,[c>sr?c-Ps:c<-sr?c+Ps:c,p]}}function S_(u){var c=b_(u);return c.invert=b_(-u),c}function E_(u,c){var p=Mn(u),v=wn(u),x=Mn(c),T=wn(c);function w(a,L){var R=Mn(L),D=Mn(a)*R,C=wn(a)*R,k=wn(L),V=k*p+D*v;return[As(C*x-V*T,D*p-k*v),Ms(V*x+C*T)]}return w.invert=function(a,L){var R=Mn(L),D=Mn(a)*R,C=wn(a)*R,k=wn(L),V=k*x-C*T;return[As(C*x+k*T,D*p+V*v),Ms(V*p-D*v)]},w}function Rx(u){u=C0(u[0]*$n,u[1]*$n,u.length>2?u[2]*$n:0);function c(p){return p=u(p[0]*$n,p[1]*$n),p[0]*=Wr,p[1]*=Wr,p}return c.invert=function(p){return p=u.invert(p[0]*$n,p[1]*$n),p[0]*=Wr,p[1]*=Wr,p},c}function Fx(u,c,p,v,x,T){if(p){var w=Mn(c),a=wn(c),L=v*p;x==null?(x=c+v*Ps,T=c-L/2):(x=T_(w,x),T=T_(w,T),(v>0?x<T:x>T)&&(x+=v*Ps));for(var R,D=x;v>0?D>T:D<T;D-=L)R=cm([w,-a*Mn(D),-a*wn(D)]),u.point(R[0],R[1])}}function T_(u,c){c=Mh(c),c[0]-=u,hm(c);var p=bx(-c[1]);return((-c[2]<0?-p:p)+Ps-Nn)%Ps}function QE(){var u=hd([0,0]),c=hd(90),p=hd(6),v,x,T={point:w};function w(L,R){v.push(L=x(L,R)),L[0]*=Wr,L[1]*=Wr}function a(){var L=u.apply(this,arguments),R=c.apply(this,arguments)*$n,D=p.apply(this,arguments)*$n;return v=[],x=C0(-L[0]*$n,-L[1]*$n,0).invert,Fx(T,R,D,1),L={type:"Polygon",coordinates:[v]},v=x=null,L}return a.center=function(L){return arguments.length?(u=typeof L=="function"?L:hd([+L[0],+L[1]]),a):u},a.radius=function(L){return arguments.length?(c=typeof L=="function"?L:hd(+L),a):c},a.precision=function(L){return arguments.length?(p=typeof L=="function"?L:hd(+L),a):p},a}function Ox(){var u=[],c;return{point:function(p,v,x){c.push([p,v,x])},lineStart:function(){u.push(c=[])},lineEnd:vi,rejoin:function(){u.length>1&&u.push(u.pop().concat(u.shift()))},result:function(){var p=u;return u=[],c=null,p}}}function Jp(u,c){return _r(u[0]-c[0])<Nn&&_r(u[1]-c[1])<Nn}function Gp(u,c,p,v){this.x=u,this.z=c,this.o=p,this.e=v,this.v=!1,this.n=this.p=null}function jx(u,c,p,v,x){var T=[],w=[],a,L;if(u.forEach(function(N){if(!((Q=N.length-1)<=0)){var Q,he=N[0],Te=N[Q],we;if(Jp(he,Te)){if(!he[2]&&!Te[2]){for(x.lineStart(),a=0;a<Q;++a)x.point((he=N[a])[0],he[1]);x.lineEnd();return}Te[0]+=2*Nn}T.push(we=new Gp(he,N,null,!0)),w.push(we.o=new Gp(he,null,we,!1)),T.push(we=new Gp(Te,N,null,!1)),w.push(we.o=new Gp(Te,null,we,!0))}}),!!T.length){for(w.sort(c),I_(T),I_(w),a=0,L=w.length;a<L;++a)w[a].e=p=!p;for(var R=T[0],D,C;;){for(var k=R,V=!0;k.v;)if((k=k.n)===R)return;D=k.z,x.lineStart();do{if(k.v=k.o.v=!0,k.e){if(V)for(a=0,L=D.length;a<L;++a)x.point((C=D[a])[0],C[1]);else v(k.x,k.n.x,1,x);k=k.n}else{if(V)for(D=k.p.z,a=D.length-1;a>=0;--a)x.point((C=D[a])[0],C[1]);else v(k.x,k.p.x,-1,x);k=k.p}k=k.o,D=k.z,V=!V}while(!k.v);x.lineEnd()}}}function I_(u){if(c=u.length){for(var c,p=0,v=u[0],x;++p<c;)v.n=x=u[p],x.p=v,v=x;v.n=x=u[0],x.p=v}}function Ag(u){return _r(u[0])<=sr?u[0]:Ja(u[0])*((_r(u[0])+sr)%Ps-sr)}function Lx(u,c){var p=Ag(c),v=c[1],x=wn(v),T=[wn(p),-Mn(p),0],w=0,a=0,L=new ns;x===1?v=ki+Nn:x===-1&&(v=-ki-Nn);for(var R=0,D=u.length;R<D;++R)if(k=(C=u[R]).length)for(var C,k,V=C[k-1],N=Ag(V),Q=V[1]/2+om,he=wn(Q),Te=Mn(Q),we=0;we<k;++we,N=Me,he=ce,Te=M,V=_e){var _e=C[we],Me=Ag(_e),ne=_e[1]/2+om,ce=wn(ne),M=Mn(ne),$=Me-N,U=$>=0?1:-1,de=U*$,K=de>sr,j=he*ce;if(L.add(As(j*U*wn(de),Te*M+j*Mn(de))),w+=K?$+U*Ps:$,K^N>=p^Me>=p){var W=wd(Mh(V),Mh(_e));hm(W);var J=wd(T,W);hm(J);var re=(K^$>=0?-1:1)*Ms(J[2]);(v>re||v===re&&(W[0]||W[1]))&&(a+=K^$>=0?1:-1)}}return(w<-Nn||w<Nn&&L<-Rf)^a&1}function Dx(u,c,p,v){return function(x){var T=c(x),w=Ox(),a=c(w),L=!1,R,D,C,k={point:V,lineStart:Q,lineEnd:he,polygonStart:function(){k.point=Te,k.lineStart=we,k.lineEnd=_e,D=[],R=[]},polygonEnd:function(){k.point=V,k.lineStart=Q,k.lineEnd=he,D=xx(D);var Me=Lx(R,v);D.length?(L||(x.polygonStart(),L=!0),jx(D,tT,Me,p,x)):Me&&(L||(x.polygonStart(),L=!0),x.lineStart(),p(null,null,1,x),x.lineEnd()),L&&(x.polygonEnd(),L=!1),D=R=null},sphere:function(){x.polygonStart(),x.lineStart(),p(null,null,1,x),x.lineEnd(),x.polygonEnd()}};function V(Me,ne){u(Me,ne)&&x.point(Me,ne)}function N(Me,ne){T.point(Me,ne)}function Q(){k.point=N,T.lineStart()}function he(){k.point=V,T.lineEnd()}function Te(Me,ne){C.push([Me,ne]),a.point(Me,ne)}function we(){a.lineStart(),C=[]}function _e(){Te(C[0][0],C[0][1]),a.lineEnd();var Me=a.clean(),ne=w.result(),ce,M=ne.length,$,U,de;if(C.pop(),R.push(C),C=null,!!M){if(Me&1){if(U=ne[0],($=U.length-1)>0){for(L||(x.polygonStart(),L=!0),x.lineStart(),ce=0;ce<$;++ce)x.point((de=U[ce])[0],de[1]);x.lineEnd()}return}M>1&&Me&2&&ne.push(ne.pop().concat(ne.shift())),D.push(ne.filter(eT))}}return k}}function eT(u){return u.length>1}function tT(u,c){return((u=u.x)[0]<0?u[1]-ki-Nn:ki-u[1])-((c=c.x)[0]<0?c[1]-ki-Nn:ki-c[1])}const qy=Dx(function(){return!0},nT,iT,[-sr,-ki]);function nT(u){var c=NaN,p=NaN,v=NaN,x;return{lineStart:function(){u.lineStart(),x=1},point:function(T,w){var a=T>0?sr:-sr,L=_r(T-c);_r(L-sr)<Nn?(u.point(c,p=(p+w)/2>0?ki:-ki),u.point(v,p),u.lineEnd(),u.lineStart(),u.point(a,p),u.point(T,p),x=0):v!==a&&L>=sr&&(_r(c-v)<Nn&&(c-=v*Nn),_r(T-a)<Nn&&(T-=a*Nn),p=rT(c,p,T,w),u.point(v,p),u.lineEnd(),u.lineStart(),u.point(a,p),x=0),u.point(c=T,p=w),v=a},lineEnd:function(){u.lineEnd(),c=p=NaN},clean:function(){return 2-x}}}function rT(u,c,p,v){var x,T,w=wn(u-p);return _r(w)>Nn?Id((wn(c)*(T=Mn(v))*wn(p)-wn(v)*(x=Mn(c))*wn(u))/(x*T*w)):(c+v)/2}function iT(u,c,p,v){var x;if(u==null)x=p*ki,v.point(-sr,x),v.point(0,x),v.point(sr,x),v.point(sr,0),v.point(sr,-x),v.point(0,-x),v.point(-sr,-x),v.point(-sr,0),v.point(-sr,x);else if(_r(u[0]-c[0])>Nn){var T=u[0]<c[0]?sr:-sr;x=p*T/2,v.point(-T,x),v.point(0,x),v.point(T,x)}else v.point(c[0],c[1])}function Bx(u){var c=Mn(u),p=6*$n,v=c>0,x=_r(c)>Nn;function T(D,C,k,V){Fx(V,u,p,k,D,C)}function w(D,C){return Mn(D)*Mn(C)>c}function a(D){var C,k,V,N,Q;return{lineStart:function(){N=V=!1,Q=1},point:function(he,Te){var we=[he,Te],_e,Me=w(he,Te),ne=v?Me?0:R(he,Te):Me?R(he+(he<0?sr:-sr),Te):0;if(!C&&(N=V=Me)&&D.lineStart(),Me!==V&&(_e=L(C,we),(!_e||Jp(C,_e)||Jp(we,_e))&&(we[2]=1)),Me!==V)Q=0,Me?(D.lineStart(),_e=L(we,C),D.point(_e[0],_e[1])):(_e=L(C,we),D.point(_e[0],_e[1],2),D.lineEnd()),C=_e;else if(x&&C&&v^Me){var ce;!(ne&k)&&(ce=L(we,C,!0))&&(Q=0,v?(D.lineStart(),D.point(ce[0][0],ce[0][1]),D.point(ce[1][0],ce[1][1]),D.lineEnd()):(D.point(ce[1][0],ce[1][1]),D.lineEnd(),D.lineStart(),D.point(ce[0][0],ce[0][1],3)))}Me&&(!C||!Jp(C,we))&&D.point(we[0],we[1]),C=we,V=Me,k=ne},lineEnd:function(){V&&D.lineEnd(),C=null},clean:function(){return Q|(N&&V)<<1}}}function L(D,C,k){var V=Mh(D),N=Mh(C),Q=[1,0,0],he=wd(V,N),Te=Vp(he,he),we=he[0],_e=Te-we*we;if(!_e)return!k&&D;var Me=c*Te/_e,ne=-c*we/_e,ce=wd(Q,he),M=$p(Q,Me),$=$p(he,ne);Pg(M,$);var U=ce,de=Vp(M,U),K=Vp(U,U),j=de*de-K*(Vp(M,M)-1);if(!(j<0)){var W=Co(j),J=$p(U,(-de-W)/K);if(Pg(J,M),J=cm(J),!k)return J;var re=D[0],ue=C[0],te=D[1],se=C[1],xe;ue<re&&(xe=re,re=ue,ue=xe);var ie=ue-re,ve=_r(ie-sr)<Nn,De=ve||ie<Nn;if(!ve&&se<te&&(xe=te,te=se,se=xe),De?ve?te+se>0^J[1]<(_r(J[0]-re)<Nn?te:se):te<=J[1]&&J[1]<=se:ie>sr^(re<=J[0]&&J[0]<=ue)){var Oe=$p(U,(-de+W)/K);return Pg(Oe,M),[J,cm(Oe)]}}}function R(D,C){var k=v?u:sr-u,V=0;return D<-k?V|=1:D>k&&(V|=2),C<-k?V|=4:C>k&&(V|=8),V}return Dx(w,a,T,v?[0,-u]:[-sr,u-sr])}function oT(u,c,p,v,x,T){var w=u[0],a=u[1],L=c[0],R=c[1],D=0,C=1,k=L-w,V=R-a,N;if(N=p-w,!(!k&&N>0)){if(N/=k,k<0){if(N<D)return;N<C&&(C=N)}else if(k>0){if(N>C)return;N>D&&(D=N)}if(N=x-w,!(!k&&N<0)){if(N/=k,k<0){if(N>C)return;N>D&&(D=N)}else if(k>0){if(N<D)return;N<C&&(C=N)}if(N=v-a,!(!V&&N>0)){if(N/=V,V<0){if(N<D)return;N<C&&(C=N)}else if(V>0){if(N>C)return;N>D&&(D=N)}if(N=T-a,!(!V&&N<0)){if(N/=V,V<0){if(N>C)return;N>D&&(D=N)}else if(V>0){if(N<D)return;N<C&&(C=N)}return D>0&&(u[0]=w+D*k,u[1]=a+D*V),C<1&&(c[0]=w+C*k,c[1]=a+C*V),!0}}}}}var vf=1e9,Hp=-vf;function Fm(u,c,p,v){function x(R,D){return u<=R&&R<=p&&c<=D&&D<=v}function T(R,D,C,k){var V=0,N=0;if(R==null||(V=w(R,C))!==(N=w(D,C))||L(R,D)<0^C>0)do k.point(V===0||V===3?u:p,V>1?v:c);while((V=(V+C+4)%4)!==N);else k.point(D[0],D[1])}function w(R,D){return _r(R[0]-u)<Nn?D>0?0:3:_r(R[0]-p)<Nn?D>0?2:1:_r(R[1]-c)<Nn?D>0?1:0:D>0?3:2}function a(R,D){return L(R.x,D.x)}function L(R,D){var C=w(R,1),k=w(D,1);return C!==k?C-k:C===0?D[1]-R[1]:C===1?R[0]-D[0]:C===2?R[1]-D[1]:D[0]-R[0]}return function(R){var D=R,C=Ox(),k,V,N,Q,he,Te,we,_e,Me,ne,ce,M={point:$,lineStart:j,lineEnd:W,polygonStart:de,polygonEnd:K};function $(re,ue){x(re,ue)&&D.point(re,ue)}function U(){for(var re=0,ue=0,te=V.length;ue<te;++ue)for(var se=V[ue],xe=1,ie=se.length,ve=se[0],De,Oe,Le=ve[0],Ye=ve[1];xe<ie;++xe)De=Le,Oe=Ye,ve=se[xe],Le=ve[0],Ye=ve[1],Oe<=v?Ye>v&&(Le-De)*(v-Oe)>(Ye-Oe)*(u-De)&&++re:Ye<=v&&(Le-De)*(v-Oe)<(Ye-Oe)*(u-De)&&--re;return re}function de(){D=C,k=[],V=[],ce=!0}function K(){var re=U(),ue=ce&&re,te=(k=xx(k)).length;(ue||te)&&(R.polygonStart(),ue&&(R.lineStart(),T(null,null,1,R),R.lineEnd()),te&&jx(k,a,re,T,R),R.polygonEnd()),D=R,k=V=N=null}function j(){M.point=J,V&&V.push(N=[]),ne=!0,Me=!1,we=_e=NaN}function W(){k&&(J(Q,he),Te&&Me&&C.rejoin(),k.push(C.result())),M.point=$,Me&&D.lineEnd()}function J(re,ue){var te=x(re,ue);if(V&&N.push([re,ue]),ne)Q=re,he=ue,Te=te,ne=!1,te&&(D.lineStart(),D.point(re,ue));else if(te&&Me)D.point(re,ue);else{var se=[we=Math.max(Hp,Math.min(vf,we)),_e=Math.max(Hp,Math.min(vf,_e))],xe=[re=Math.max(Hp,Math.min(vf,re)),ue=Math.max(Hp,Math.min(vf,ue))];oT(se,xe,u,c,p,v)?(Me||(D.lineStart(),D.point(se[0],se[1])),D.point(xe[0],xe[1]),te||D.lineEnd(),ce=!1):te&&(D.lineStart(),D.point(re,ue),ce=!1)}we=re,_e=ue,Me=te}return M}}function sT(){var u=0,c=0,p=960,v=500,x,T,w;return w={stream:function(a){return x&&T===a?x:x=Fm(u,c,p,v)(T=a)},extent:function(a){return arguments.length?(u=+a[0][0],c=+a[0][1],p=+a[1][0],v=+a[1][1],x=T=null,w):[[u,c],[p,v]]}}}var Xy,Ky,Qp,em,bd={sphere:vi,point:vi,lineStart:aT,lineEnd:vi,polygonStart:vi,polygonEnd:vi};function aT(){bd.point=uT,bd.lineEnd=lT}function lT(){bd.point=bd.lineEnd=vi}function uT(u,c){u*=$n,c*=$n,Ky=u,Qp=wn(c),em=Mn(c),bd.point=cT}function cT(u,c){u*=$n,c*=$n;var p=wn(c),v=Mn(c),x=_r(u-Ky),T=Mn(x),w=wn(x),a=v*w,L=em*p-Qp*v*T,R=Qp*p+em*v*T;Xy.add(As(Co(a*a+L*L),R)),Ky=u,Qp=p,em=v}function Nx(u){return Xy=new ns,Tl(u,bd),+Xy}var Yy=[null,null],hT={type:"LineString",coordinates:Yy};function _m(u,c){return Yy[0]=u,Yy[1]=c,Nx(hT)}var C_={Feature:function(u,c){return xm(u.geometry,c)},FeatureCollection:function(u,c){for(var p=u.features,v=-1,x=p.length;++v<x;)if(xm(p[v].geometry,c))return!0;return!1}},P_={Sphere:function(){return!0},Point:function(u,c){return A_(u.coordinates,c)},MultiPoint:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)if(A_(p[v],c))return!0;return!1},LineString:function(u,c){return M_(u.coordinates,c)},MultiLineString:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)if(M_(p[v],c))return!0;return!1},Polygon:function(u,c){return k_(u.coordinates,c)},MultiPolygon:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)if(k_(p[v],c))return!0;return!1},GeometryCollection:function(u,c){for(var p=u.geometries,v=-1,x=p.length;++v<x;)if(xm(p[v],c))return!0;return!1}};function xm(u,c){return u&&P_.hasOwnProperty(u.type)?P_[u.type](u,c):!1}function A_(u,c){return _m(u,c)===0}function M_(u,c){for(var p,v,x,T=0,w=u.length;T<w;T++){if(v=_m(u[T],c),v===0||T>0&&(x=_m(u[T],u[T-1]),x>0&&p<=x&&v<=x&&(p+v-x)*(1-Math.pow((p-v)/x,2))<Rf*x))return!0;p=v}return!1}function k_(u,c){return!!Lx(u.map(dT),Ux(c))}function dT(u){return u=u.map(Ux),u.pop(),u}function Ux(u){return[u[0]*$n,u[1]*$n]}function fT(u,c){return(u&&C_.hasOwnProperty(u.type)?C_[u.type]:xm)(u,c)}function z_(u,c,p){var v=md(u,c-Nn,p).concat(c);return function(x){return v.map(function(T){return[x,T]})}}function R_(u,c,p){var v=md(u,c-Nn,p).concat(c);return function(x){return v.map(function(T){return[T,x]})}}function Vx(){var u,c,p,v,x,T,w,a,L=10,R=L,D=90,C=360,k,V,N,Q,he=2.5;function Te(){return{type:"MultiLineString",coordinates:we()}}function we(){return md(Up(v/D)*D,p,D).map(N).concat(md(Up(a/C)*C,w,C).map(Q)).concat(md(Up(c/L)*L,u,L).filter(function(_e){return _r(_e%D)>Nn}).map(k)).concat(md(Up(T/R)*R,x,R).filter(function(_e){return _r(_e%C)>Nn}).map(V))}return Te.lines=function(){return we().map(function(_e){return{type:"LineString",coordinates:_e}})},Te.outline=function(){return{type:"Polygon",coordinates:[N(v).concat(Q(w).slice(1),N(p).reverse().slice(1),Q(a).reverse().slice(1))]}},Te.extent=function(_e){return arguments.length?Te.extentMajor(_e).extentMinor(_e):Te.extentMinor()},Te.extentMajor=function(_e){return arguments.length?(v=+_e[0][0],p=+_e[1][0],a=+_e[0][1],w=+_e[1][1],v>p&&(_e=v,v=p,p=_e),a>w&&(_e=a,a=w,w=_e),Te.precision(he)):[[v,a],[p,w]]},Te.extentMinor=function(_e){return arguments.length?(c=+_e[0][0],u=+_e[1][0],T=+_e[0][1],x=+_e[1][1],c>u&&(_e=c,c=u,u=_e),T>x&&(_e=T,T=x,x=_e),Te.precision(he)):[[c,T],[u,x]]},Te.step=function(_e){return arguments.length?Te.stepMajor(_e).stepMinor(_e):Te.stepMinor()},Te.stepMajor=function(_e){return arguments.length?(D=+_e[0],C=+_e[1],Te):[D,C]},Te.stepMinor=function(_e){return arguments.length?(L=+_e[0],R=+_e[1],Te):[L,R]},Te.precision=function(_e){return arguments.length?(he=+_e,k=z_(T,x,90),V=R_(c,u,he),N=z_(a,w,90),Q=R_(v,p,he),Te):he},Te.extentMajor([[-180,-90+Nn],[180,90-Nn]]).extentMinor([[-180,-80-Nn],[180,80+Nn]])}function pT(){return Vx()()}function mT(u,c){var p=u[0]*$n,v=u[1]*$n,x=c[0]*$n,T=c[1]*$n,w=Mn(v),a=wn(v),L=Mn(T),R=wn(T),D=w*Mn(p),C=w*wn(p),k=L*Mn(x),V=L*wn(x),N=2*Ms(Co(f_(T-v)+w*L*f_(x-p))),Q=wn(N),he=N?function(Te){var we=wn(Te*=N)/Q,_e=wn(N-Te)/Q,Me=_e*D+we*k,ne=_e*C+we*V,ce=_e*a+we*R;return[As(ne,Me)*Wr,As(ce,Co(Me*Me+ne*ne))*Wr]}:function(){return[p*Wr,v*Wr]};return he.distance=N,he}const Ff=u=>u;var Mg=new ns,Jy=new ns,$x,Gx,Qy,e0,Ju={point:vi,lineStart:vi,lineEnd:vi,polygonStart:function(){Ju.lineStart=gT,Ju.lineEnd=vT},polygonEnd:function(){Ju.lineStart=Ju.lineEnd=Ju.point=vi,Mg.add(_r(Jy)),Jy=new ns},result:function(){var u=Mg/2;return Mg=new ns,u}};function gT(){Ju.point=yT}function yT(u,c){Ju.point=Hx,$x=Qy=u,Gx=e0=c}function Hx(u,c){Jy.add(e0*u-Qy*c),Qy=u,e0=c}function vT(){Hx($x,Gx)}var Sd=1/0,wm=Sd,Of=-Sd,bm=Of,Sm={point:_T,lineStart:vi,lineEnd:vi,polygonStart:vi,polygonEnd:vi,result:function(){var u=[[Sd,wm],[Of,bm]];return Of=bm=-(wm=Sd=1/0),u}};function _T(u,c){u<Sd&&(Sd=u),u>Of&&(Of=u),c<wm&&(wm=c),c>bm&&(bm=c)}var t0=0,n0=0,_f=0,Em=0,Tm=0,gd=0,r0=0,i0=0,xf=0,Zx,Wx,hu,du,Ya={point:kh,lineStart:F_,lineEnd:O_,polygonStart:function(){Ya.lineStart=bT,Ya.lineEnd=ST},polygonEnd:function(){Ya.point=kh,Ya.lineStart=F_,Ya.lineEnd=O_},result:function(){var u=xf?[r0/xf,i0/xf]:gd?[Em/gd,Tm/gd]:_f?[t0/_f,n0/_f]:[NaN,NaN];return t0=n0=_f=Em=Tm=gd=r0=i0=xf=0,u}};function kh(u,c){t0+=u,n0+=c,++_f}function F_(){Ya.point=xT}function xT(u,c){Ya.point=wT,kh(hu=u,du=c)}function wT(u,c){var p=u-hu,v=c-du,x=Co(p*p+v*v);Em+=x*(hu+u)/2,Tm+=x*(du+c)/2,gd+=x,kh(hu=u,du=c)}function O_(){Ya.point=kh}function bT(){Ya.point=ET}function ST(){qx(Zx,Wx)}function ET(u,c){Ya.point=qx,kh(Zx=hu=u,Wx=du=c)}function qx(u,c){var p=u-hu,v=c-du,x=Co(p*p+v*v);Em+=x*(hu+u)/2,Tm+=x*(du+c)/2,gd+=x,x=du*u-hu*c,r0+=x*(hu+u),i0+=x*(du+c),xf+=x*3,kh(hu=u,du=c)}function Xx(u){this._context=u}Xx.prototype={_radius:4.5,pointRadius:function(u){return this._radius=u,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(u,c){switch(this._point){case 0:{this._context.moveTo(u,c),this._point=1;break}case 1:{this._context.lineTo(u,c);break}default:{this._context.moveTo(u+this._radius,c),this._context.arc(u,c,this._radius,0,Ps);break}}},result:vi};var o0=new ns,kg,Kx,Yx,wf,bf,jf={point:vi,lineStart:function(){jf.point=TT},lineEnd:function(){kg&&Jx(Kx,Yx),jf.point=vi},polygonStart:function(){kg=!0},polygonEnd:function(){kg=null},result:function(){var u=+o0;return o0=new ns,u}};function TT(u,c){jf.point=Jx,Kx=wf=u,Yx=bf=c}function Jx(u,c){wf-=u,bf-=c,o0.add(Co(wf*wf+bf*bf)),wf=u,bf=c}function Qx(){this._string=[]}Qx.prototype={_radius:4.5,_circle:j_(4.5),pointRadius:function(u){return(u=+u)!==this._radius&&(this._radius=u,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(u,c){switch(this._point){case 0:{this._string.push("M",u,",",c),this._point=1;break}case 1:{this._string.push("L",u,",",c);break}default:{this._circle==null&&(this._circle=j_(this._radius)),this._string.push("M",u,",",c,this._circle);break}}},result:function(){if(this._string.length){var u=this._string.join("");return this._string=[],u}else return null}};function j_(u){return"m0,"+u+"a"+u+","+u+" 0 1,1 0,"+-2*u+"a"+u+","+u+" 0 1,1 0,"+2*u+"z"}function IT(u,c){var p=4.5,v,x;function T(w){return w&&(typeof p=="function"&&x.pointRadius(+p.apply(this,arguments)),Tl(w,v(x))),x.result()}return T.area=function(w){return Tl(w,v(Ju)),Ju.result()},T.measure=function(w){return Tl(w,v(jf)),jf.result()},T.bounds=function(w){return Tl(w,v(Sm)),Sm.result()},T.centroid=function(w){return Tl(w,v(Ya)),Ya.result()},T.projection=function(w){return arguments.length?(v=w==null?(u=null,Ff):(u=w).stream,T):u},T.context=function(w){return arguments.length?(x=w==null?(c=null,new Qx):new Xx(c=w),typeof p!="function"&&x.pointRadius(p),T):c},T.pointRadius=function(w){return arguments.length?(p=typeof w=="function"?w:(x.pointRadius(+w),+w),T):p},T.projection(u).context(c)}function CT(u){return{stream:$f(u)}}function $f(u){return function(c){var p=new s0;for(var v in u)p[v]=u[v];return p.stream=c,p}}function s0(){}s0.prototype={constructor:s0,point:function(u,c){this.stream.point(u,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function P0(u,c,p){var v=u.clipExtent&&u.clipExtent();return u.scale(150).translate([0,0]),v!=null&&u.clipExtent(null),Tl(p,u.stream(Sm)),c(Sm.result()),v!=null&&u.clipExtent(v),u}function Om(u,c,p){return P0(u,function(v){var x=c[1][0]-c[0][0],T=c[1][1]-c[0][1],w=Math.min(x/(v[1][0]-v[0][0]),T/(v[1][1]-v[0][1])),a=+c[0][0]+(x-w*(v[1][0]+v[0][0]))/2,L=+c[0][1]+(T-w*(v[1][1]+v[0][1]))/2;u.scale(150*w).translate([a,L])},p)}function A0(u,c,p){return Om(u,[[0,0],c],p)}function M0(u,c,p){return P0(u,function(v){var x=+c,T=x/(v[1][0]-v[0][0]),w=(x-T*(v[1][0]+v[0][0]))/2,a=-T*v[0][1];u.scale(150*T).translate([w,a])},p)}function k0(u,c,p){return P0(u,function(v){var x=+c,T=x/(v[1][1]-v[0][1]),w=-T*v[0][0],a=(x-T*(v[1][1]+v[0][1]))/2;u.scale(150*T).translate([w,a])},p)}var L_=16,PT=Mn(30*$n);function D_(u,c){return+c?MT(u,c):AT(u)}function AT(u){return $f({point:function(c,p){c=u(c,p),this.stream.point(c[0],c[1])}})}function MT(u,c){function p(v,x,T,w,a,L,R,D,C,k,V,N,Q,he){var Te=R-v,we=D-x,_e=Te*Te+we*we;if(_e>4*c&&Q--){var Me=w+k,ne=a+V,ce=L+N,M=Co(Me*Me+ne*ne+ce*ce),$=Ms(ce/=M),U=_r(_r(ce)-1)<Nn||_r(T-C)<Nn?(T+C)/2:As(ne,Me),de=u(U,$),K=de[0],j=de[1],W=K-v,J=j-x,re=we*W-Te*J;(re*re/_e>c||_r((Te*W+we*J)/_e-.5)>.3||w*k+a*V+L*N<PT)&&(p(v,x,T,w,a,L,K,j,U,Me/=M,ne/=M,ce,Q,he),he.point(K,j),p(K,j,U,Me,ne,ce,R,D,C,k,V,N,Q,he))}}return function(v){var x,T,w,a,L,R,D,C,k,V,N,Q,he={point:Te,lineStart:we,lineEnd:Me,polygonStart:function(){v.polygonStart(),he.lineStart=ne},polygonEnd:function(){v.polygonEnd(),he.lineStart=we}};function Te($,U){$=u($,U),v.point($[0],$[1])}function we(){C=NaN,he.point=_e,v.lineStart()}function _e($,U){var de=Mh([$,U]),K=u($,U);p(C,k,D,V,N,Q,C=K[0],k=K[1],D=$,V=de[0],N=de[1],Q=de[2],L_,v),v.point(C,k)}function Me(){he.point=Te,v.lineEnd()}function ne(){we(),he.point=ce,he.lineEnd=M}function ce($,U){_e(x=$,U),T=C,w=k,a=V,L=N,R=Q,he.point=_e}function M(){p(C,k,D,V,N,Q,T,w,x,a,L,R,L_,v),he.lineEnd=Me,Me()}return he}}var kT=$f({point:function(u,c){this.stream.point(u*$n,c*$n)}});function zT(u){return $f({point:function(c,p){var v=u(c,p);return this.stream.point(v[0],v[1])}})}function RT(u,c,p,v,x){function T(w,a){return w*=v,a*=x,[c+u*w,p-u*a]}return T.invert=function(w,a){return[(w-c)/u*v,(p-a)/u*x]},T}function B_(u,c,p,v,x,T){if(!T)return RT(u,c,p,v,x);var w=Mn(T),a=wn(T),L=w*u,R=a*u,D=w/u,C=a/u,k=(a*p-w*c)/u,V=(a*c+w*p)/u;function N(Q,he){return Q*=v,he*=x,[L*Q-R*he+c,p-R*Q-L*he]}return N.invert=function(Q,he){return[v*(D*Q-C*he+k),x*(V-C*Q-D*he)]},N}function gu(u){return z0(function(){return u})()}function z0(u){var c,p=150,v=480,x=250,T=0,w=0,a=0,L=0,R=0,D,C=0,k=1,V=1,N=null,Q=qy,he=null,Te,we,_e,Me=Ff,ne=.5,ce,M,$,U,de;function K(re){return $(re[0]*$n,re[1]*$n)}function j(re){return re=$.invert(re[0],re[1]),re&&[re[0]*Wr,re[1]*Wr]}K.stream=function(re){return U&&de===re?U:U=kT(zT(D)(Q(ce(Me(de=re)))))},K.preclip=function(re){return arguments.length?(Q=re,N=void 0,J()):Q},K.postclip=function(re){return arguments.length?(Me=re,he=Te=we=_e=null,J()):Me},K.clipAngle=function(re){return arguments.length?(Q=+re?Bx(N=re*$n):(N=null,qy),J()):N*Wr},K.clipExtent=function(re){return arguments.length?(Me=re==null?(he=Te=we=_e=null,Ff):Fm(he=+re[0][0],Te=+re[0][1],we=+re[1][0],_e=+re[1][1]),J()):he==null?null:[[he,Te],[we,_e]]},K.scale=function(re){return arguments.length?(p=+re,W()):p},K.translate=function(re){return arguments.length?(v=+re[0],x=+re[1],W()):[v,x]},K.center=function(re){return arguments.length?(T=re[0]%360*$n,w=re[1]%360*$n,W()):[T*Wr,w*Wr]},K.rotate=function(re){return arguments.length?(a=re[0]%360*$n,L=re[1]%360*$n,R=re.length>2?re[2]%360*$n:0,W()):[a*Wr,L*Wr,R*Wr]},K.angle=function(re){return arguments.length?(C=re%360*$n,W()):C*Wr},K.reflectX=function(re){return arguments.length?(k=re?-1:1,W()):k<0},K.reflectY=function(re){return arguments.length?(V=re?-1:1,W()):V<0},K.precision=function(re){return arguments.length?(ce=D_(M,ne=re*re),J()):Co(ne)},K.fitExtent=function(re,ue){return Om(K,re,ue)},K.fitSize=function(re,ue){return A0(K,re,ue)},K.fitWidth=function(re,ue){return M0(K,re,ue)},K.fitHeight=function(re,ue){return k0(K,re,ue)};function W(){var re=B_(p,0,0,k,V,C).apply(null,c(T,w)),ue=B_(p,v-re[0],x-re[1],k,V,C);return D=C0(a,L,R),M=Zy(c,ue),$=Zy(D,M),ce=D_(M,ne),J()}function J(){return U=de=null,K}return function(){return c=u.apply(this,arguments),K.invert=c.invert&&j,W()}}function R0(u){var c=0,p=sr/3,v=z0(u),x=v(c,p);return x.parallels=function(T){return arguments.length?v(c=T[0]*$n,p=T[1]*$n):[c*Wr,p*Wr]},x}function FT(u){var c=Mn(u);function p(v,x){return[v*c,wn(x)/c]}return p.invert=function(v,x){return[v/c,Ms(x*c)]},p}function ew(u,c){var p=wn(u),v=(p+wn(c))/2;if(_r(v)<Nn)return FT(u);var x=1+p*(2*v-p),T=Co(x)/v;function w(a,L){var R=Co(x-2*v*wn(L))/v;return[R*wn(a*=v),T-R*Mn(a)]}return w.invert=function(a,L){var R=T-L,D=As(a,_r(R))*Ja(R);return R*v<0&&(D-=sr*Ja(a)*Ja(R)),[D/v,Ms((x-(a*a+R*R)*v*v)/(2*v))]},w}function Im(){return R0(ew).scale(155.424).center([0,33.6442])}function tw(){return Im().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function OT(u){var c=u.length;return{point:function(p,v){for(var x=-1;++x<c;)u[x].point(p,v)},sphere:function(){for(var p=-1;++p<c;)u[p].sphere()},lineStart:function(){for(var p=-1;++p<c;)u[p].lineStart()},lineEnd:function(){for(var p=-1;++p<c;)u[p].lineEnd()},polygonStart:function(){for(var p=-1;++p<c;)u[p].polygonStart()},polygonEnd:function(){for(var p=-1;++p<c;)u[p].polygonEnd()}}}function jT(){var u,c,p=tw(),v,x=Im().rotate([154,0]).center([-2,58.5]).parallels([55,65]),T,w=Im().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,L,R={point:function(k,V){L=[k,V]}};function D(k){var V=k[0],N=k[1];return L=null,v.point(V,N),L||(T.point(V,N),L)||(a.point(V,N),L)}D.invert=function(k){var V=p.scale(),N=p.translate(),Q=(k[0]-N[0])/V,he=(k[1]-N[1])/V;return(he>=.12&&he<.234&&Q>=-.425&&Q<-.214?x:he>=.166&&he<.234&&Q>=-.214&&Q<-.115?w:p).invert(k)},D.stream=function(k){return u&&c===k?u:u=OT([p.stream(c=k),x.stream(k),w.stream(k)])},D.precision=function(k){return arguments.length?(p.precision(k),x.precision(k),w.precision(k),C()):p.precision()},D.scale=function(k){return arguments.length?(p.scale(k),x.scale(k*.35),w.scale(k),D.translate(p.translate())):p.scale()},D.translate=function(k){if(!arguments.length)return p.translate();var V=p.scale(),N=+k[0],Q=+k[1];return v=p.translate(k).clipExtent([[N-.455*V,Q-.238*V],[N+.455*V,Q+.238*V]]).stream(R),T=x.translate([N-.307*V,Q+.201*V]).clipExtent([[N-.425*V+Nn,Q+.12*V+Nn],[N-.214*V-Nn,Q+.234*V-Nn]]).stream(R),a=w.translate([N-.205*V,Q+.212*V]).clipExtent([[N-.214*V+Nn,Q+.166*V+Nn],[N-.115*V-Nn,Q+.234*V-Nn]]).stream(R),C()},D.fitExtent=function(k,V){return Om(D,k,V)},D.fitSize=function(k,V){return A0(D,k,V)},D.fitWidth=function(k,V){return M0(D,k,V)},D.fitHeight=function(k,V){return k0(D,k,V)};function C(){return u=c=null,D}return D.scale(1070)}function nw(u){return function(c,p){var v=Mn(c),x=Mn(p),T=u(v*x);return T===1/0?[2,0]:[T*x*wn(c),T*wn(p)]}}function Gf(u){return function(c,p){var v=Co(c*c+p*p),x=u(v),T=wn(x),w=Mn(x);return[As(c*T,v*w),Ms(v&&p*T/v)]}}var F0=nw(function(u){return Co(2/(1+u))});F0.invert=Gf(function(u){return 2*Ms(u/2)});function LT(){return gu(F0).scale(124.75).clipAngle(180-.001)}var O0=nw(function(u){return(u=bx(u))&&u/wn(u)});O0.invert=Gf(function(u){return u});function DT(){return gu(O0).scale(79.4188).clipAngle(180-.001)}function Hf(u,c){return[u,sm(T0((ki+c)/2))]}Hf.invert=function(u,c){return[u,2*Id(wx(c))-ki]};function BT(){return rw(Hf).scale(961/Ps)}function rw(u){var c=gu(u),p=c.center,v=c.scale,x=c.translate,T=c.clipExtent,w=null,a,L,R;c.scale=function(C){return arguments.length?(v(C),D()):v()},c.translate=function(C){return arguments.length?(x(C),D()):x()},c.center=function(C){return arguments.length?(p(C),D()):p()},c.clipExtent=function(C){return arguments.length?(C==null?w=a=L=R=null:(w=+C[0][0],a=+C[0][1],L=+C[1][0],R=+C[1][1]),D()):w==null?null:[[w,a],[L,R]]};function D(){var C=sr*v(),k=c(Rx(c.rotate()).invert([0,0]));return T(w==null?[[k[0]-C,k[1]-C],[k[0]+C,k[1]+C]]:u===Hf?[[Math.max(k[0]-C,w),a],[Math.min(k[0]+C,L),R]]:[[w,Math.max(k[1]-C,a)],[L,Math.min(k[1]+C,R)]])}return D()}function Zp(u){return T0((ki+u)/2)}function iw(u,c){var p=Mn(u),v=u===c?wn(u):sm(p/Mn(c))/sm(Zp(c)/Zp(u)),x=p*Cg(Zp(u),v)/v;if(!v)return Hf;function T(w,a){x>0?a<-ki+Nn&&(a=-ki+Nn):a>ki-Nn&&(a=ki-Nn);var L=x/Cg(Zp(a),v);return[L*wn(v*w),x-L*Mn(v*w)]}return T.invert=function(w,a){var L=x-a,R=Ja(v)*Co(w*w+L*L),D=As(w,_r(L))*Ja(L);return L*v<0&&(D-=sr*Ja(w)*Ja(L)),[D/v,2*Id(Cg(x/R,1/v))-ki]},T}function NT(){return R0(iw).scale(109.5).parallels([30,30])}function Lf(u,c){return[u,c]}Lf.invert=Lf;function UT(){return gu(Lf).scale(152.63)}function ow(u,c){var p=Mn(u),v=u===c?wn(u):(p-Mn(c))/(c-u),x=p/v+u;if(_r(v)<Nn)return Lf;function T(w,a){var L=x-a,R=v*w;return[L*wn(R),x-L*Mn(R)]}return T.invert=function(w,a){var L=x-a,R=As(w,_r(L))*Ja(L);return L*v<0&&(R-=sr*Ja(w)*Ja(L)),[R/v,x-Ja(v)*Co(w*w+L*L)]},T}function VT(){return R0(ow).scale(131.154).center([0,13.9389])}var Cf=1.340264,Pf=-.081106,Af=893e-6,Mf=.003796,Cm=Co(3)/2,$T=12;function j0(u,c){var p=Ms(Cm*wn(c)),v=p*p,x=v*v*v;return[u*Mn(p)/(Cm*(Cf+3*Pf*v+x*(7*Af+9*Mf*v))),p*(Cf+Pf*v+x*(Af+Mf*v))]}j0.invert=function(u,c){for(var p=c,v=p*p,x=v*v*v,T=0,w,a,L;T<$T&&(a=p*(Cf+Pf*v+x*(Af+Mf*v))-c,L=Cf+3*Pf*v+x*(7*Af+9*Mf*v),p-=w=a/L,v=p*p,x=v*v*v,!(_r(w)<Rf));++T);return[Cm*u*(Cf+3*Pf*v+x*(7*Af+9*Mf*v))/Mn(p),Ms(wn(p)/Cm)]};function GT(){return gu(j0).scale(177.158)}function L0(u,c){var p=Mn(c),v=Mn(u)*p;return[p*wn(u)/v,wn(c)/v]}L0.invert=Gf(Id);function HT(){return gu(L0).scale(144.049).clipAngle(60)}function ZT(){var u=1,c=0,p=0,v=1,x=1,T=0,w,a,L=null,R,D,C,k=1,V=1,N=$f({point:function(Me,ne){var ce=_e([Me,ne]);this.stream.point(ce[0],ce[1])}}),Q=Ff,he,Te;function we(){return k=u*v,V=u*x,he=Te=null,_e}function _e(Me){var ne=Me[0]*k,ce=Me[1]*V;if(T){var M=ce*w-ne*a;ne=ne*w+ce*a,ce=M}return[ne+c,ce+p]}return _e.invert=function(Me){var ne=Me[0]-c,ce=Me[1]-p;if(T){var M=ce*w+ne*a;ne=ne*w-ce*a,ce=M}return[ne/k,ce/V]},_e.stream=function(Me){return he&&Te===Me?he:he=N(Q(Te=Me))},_e.postclip=function(Me){return arguments.length?(Q=Me,L=R=D=C=null,we()):Q},_e.clipExtent=function(Me){return arguments.length?(Q=Me==null?(L=R=D=C=null,Ff):Fm(L=+Me[0][0],R=+Me[0][1],D=+Me[1][0],C=+Me[1][1]),we()):L==null?null:[[L,R],[D,C]]},_e.scale=function(Me){return arguments.length?(u=+Me,we()):u},_e.translate=function(Me){return arguments.length?(c=+Me[0],p=+Me[1],we()):[c,p]},_e.angle=function(Me){return arguments.length?(T=Me%360*$n,a=wn(T),w=Mn(T),we()):T*Wr},_e.reflectX=function(Me){return arguments.length?(v=Me?-1:1,we()):v<0},_e.reflectY=function(Me){return arguments.length?(x=Me?-1:1,we()):x<0},_e.fitExtent=function(Me,ne){return Om(_e,Me,ne)},_e.fitSize=function(Me,ne){return A0(_e,Me,ne)},_e.fitWidth=function(Me,ne){return M0(_e,Me,ne)},_e.fitHeight=function(Me,ne){return k0(_e,Me,ne)},_e}function D0(u,c){var p=c*c,v=p*p;return[u*(.8707-.131979*p+v*(-.013791+v*(.003971*p-.001529*v))),c*(1.007226+p*(.015085+v*(-.044475+.028874*p-.005916*v)))]}D0.invert=function(u,c){var p=c,v=25,x;do{var T=p*p,w=T*T;p-=x=(p*(1.007226+T*(.015085+w*(-.044475+.028874*T-.005916*w)))-c)/(1.007226+T*(.015085*3+w*(-.044475*7+.028874*9*T-.005916*11*w)))}while(_r(x)>Nn&&--v>0);return[u/(.8707+(T=p*p)*(-.131979+T*(-.013791+T*T*T*(.003971-.001529*T)))),p]};function WT(){return gu(D0).scale(175.295)}function B0(u,c){return[Mn(c)*wn(u),wn(c)]}B0.invert=Gf(Ms);function qT(){return gu(B0).scale(249.5).clipAngle(90+Nn)}function N0(u,c){var p=Mn(c),v=1+Mn(u)*p;return[p*wn(u)/v,wn(c)/v]}N0.invert=Gf(function(u){return 2*Id(u)});function XT(){return gu(N0).scale(250).clipAngle(142)}function U0(u,c){return[sm(T0((ki+c)/2)),-u]}U0.invert=function(u,c){return[-c,2*Id(wx(u))-ki]};function KT(){var u=rw(U0),c=u.center,p=u.rotate;return u.center=function(v){return arguments.length?c([-v[1],v[0]]):(v=c(),[v[1],-v[0]])},u.rotate=function(v){return arguments.length?p([v[0],v[1],v.length>2?v[2]+90:90]):(v=p(),[v[0],v[1],v[2]-90])},p([0,0,90]).scale(159.155)}const YT=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:tw,geoAlbersUsa:jT,geoArea:VE,geoAzimuthalEqualArea:LT,geoAzimuthalEqualAreaRaw:F0,geoAzimuthalEquidistant:DT,geoAzimuthalEquidistantRaw:O0,geoBounds:ZE,geoCentroid:JE,geoCircle:QE,geoClipAntimeridian:qy,geoClipCircle:Bx,geoClipExtent:sT,geoClipRectangle:Fm,geoConicConformal:NT,geoConicConformalRaw:iw,geoConicEqualArea:Im,geoConicEqualAreaRaw:ew,geoConicEquidistant:VT,geoConicEquidistantRaw:ow,geoContains:fT,geoDistance:_m,geoEqualEarth:GT,geoEqualEarthRaw:j0,geoEquirectangular:UT,geoEquirectangularRaw:Lf,geoGnomonic:HT,geoGnomonicRaw:L0,geoGraticule:Vx,geoGraticule10:pT,geoIdentity:ZT,geoInterpolate:mT,geoLength:Nx,geoMercator:BT,geoMercatorRaw:Hf,geoNaturalEarth1:WT,geoNaturalEarth1Raw:D0,geoOrthographic:qT,geoOrthographicRaw:B0,geoPath:IT,geoProjection:gu,geoProjectionMutator:z0,geoRotation:Rx,geoStereographic:XT,geoStereographicRaw:N0,geoStream:Tl,geoTransform:CT,geoTransverseMercator:KT,geoTransverseMercatorRaw:U0},Symbol.toStringTag,{value:"Module"})),JT=c0(YT);var zc=2*Math.PI*6378137/2,QT=Math.PI/180;function sw(u){return u=u||256,2*Math.PI*6378137/u}function eI(u){var c=u[0],p=u[1],v=u[2];return(1<<v)*((1<<v)+c)+p}function a0(u,c,p){var v=aw(u,c,p);return v[0]=Math.floor(v[0]),v[1]=Math.floor(v[1]),v}function aw(u,c,p){var v=c,x=X0(u[0]),T=q0(u[1]),w=Math.sin(T*QT),a=Math.pow(2,v),L=a*(x/360+.5),R=a*(.5-.25*Math.log((1+w)/(1-w))/Math.PI);return Rh([L,R,v],p)}function tI(u,c=6){var p=u[0],v=u[1],x=u[2],T=u[3],w=(p-x)/2+x,a=(v-T)/2+T;return c!=null&&(w=Number(w.toFixed(c)),a=Number(a.toFixed(c))),[w,a]}function Pm(u,c,p={enable:!0,decimal:1}){u=jm(u,c);var v=u[0],x=u[1],T=v*zc/180,w=Math.log(Math.tan((90+x)*Math.PI/360))/(Math.PI/180);return w=w*zc/180,p.enable&&(T=Number(T.toFixed(p.decimal)),w=Number(w.toFixed(p.decimal))),[T,w]}function l0(u,c=6){var p=u[0],v=u[1],x=p/zc*180,T=v/zc*180;return T=180/Math.PI*(2*Math.atan(Math.exp(T*Math.PI/180))-Math.PI/2),c!=null&&(x=Number(x.toFixed(c)),T=Number(T.toFixed(c))),[x,T]}function V0(u,c,p){var v=u[0],x=u[1],T=Z0(c,p),w=(v+zc)/T,a=(x+zc)/T;return[w,a,c]}function lw(u,c,p){u=jm(u,p);var v=Pm(u),x=V0(v,c);return $0(x)}function nI(u,c,p){if(u=jm(u,p),c===0)return[0,0,0];var v=lw(u,c);return cw(v)}function rI(u,c){if(c===0)return[0,0,0];var p=V0(u,c);return $0(p)}function u0(u,c,p=1){var v=u[0],x=u[1],T=u[2],w=Z0(T,c),a=v*w-zc,L=x*w-zc;return p!=null&&(a=Number(a.toFixed(p)),L=Number(L.toFixed(p))),[a,L]}function $0(u,c,p){c=c||256;var v=u[0],x=u[1],T=u[2];if(T===0)return[0,0,0];H0(T);var w=Math.ceil(v/c)-1,a=Math.ceil(x/c)-1;return w<0&&(w=0),a<0&&(a=0),[w,a,T]}function G0(u,c,p){Rh(u,p),c=c||256;var v=u[0],x=u[1],T=u[2],w=u0([v*c,x*c,T]),a=u0([(v+1)*c,(x+1)*c,T]);return[w[0],w[1],a[0],a[1]]}function uw(u,c){Rh(u,c);var p=u[0],v=u[1],x=u[2];if(x===0)return[-180,-85.051129,180,85.051129];var T=G0([p,v,x]),w=T[0],a=T[1],L=T[2],R=T[3],D=l0([w,a,x]),C=l0([L,R,x]);return[D[0],D[1],C[0],C[1]]}function iI(u){var c=Zf(u);return G0(c)}function oI(u){var c=Zf(u);return uw(c)}function cw(u,c){Rh(u,c);var p=u[0],v=u[1],x=u[2];if(x===0)return[0,0,0];var T=p,w=Math.pow(2,x)-1-v;return[T,w,x]}function Zf(u){var c=u[0],p=u[1],v=u[2],x=c,T=Math.pow(2,v)-p-1;return[x,T,v]}function sI(u){var c=Zf(u);return hw(c)}function hw(u,c){Rh(u,c);var p=u[0],v=u[1],x=u[2];if(x===0)return"";var T="";return v=Math.pow(2,x)-1-v,W0(x,0,-1).map(function(w){var a=0,L=1<<w-1;p&L&&(a+=1),v&L&&(a+=2),T=T.concat(a)}),T}function aI(u){var c=dw(u);return Zf(c)}function dw(u){var c=0,p=0,v=u.length;return W0(v,0,-1).map(function(x){var T=1<<x-1;switch(parseInt(u[v-x],0)){case 0:break;case 1:c+=T;break;case 2:p+=T;break;case 3:c+=T,p+=T;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[c,p,v]}function lI(u){var c=Pm([u[0],u[1]]),p=Pm([u[2],u[3]]);return[c[0],c[1],p[0],p[1]]}function Rh(u,c){var p=u[0],v=u[1],x=u[2];if(c===!1)return u;if(x==null)throw new Error("<zoom> is required");if(p==null)throw new Error("<x> is required");if(v==null)throw new Error("<y> is required");return x=H0(x),u=fw(u),u}function fw(u){var c=u[0],p=u[1],v=u[2],x=Math.pow(2,v);return c=c%x,c<0&&(c=c+x),[c,p,v]}function H0(u){if(u===!1)return u;if(u==null)throw new Error("<zoom> is required");if(u<0)throw new Error("<zoom> cannot be less than 0");if(u>32)throw new Error("<zoom> cannot be greater than 32");return u}function jm(u,c){if(c===!1)return u;var p=X0(u[0]),v=q0(u[1]);return v>85&&(v=85),v<-85&&(v=-85),[p,v]}function Z0(u,c){return sw(c)/Math.pow(2,u)}function W0(u,c,p){c==null&&(c=u||0,u=0),p||(p=c<u?-1:1);for(var v=Math.max(Math.ceil((c-u)/p),0),x=Array(v),T=0;T<v;T++,u+=p)x[T]=u;return x}function uI(u){if(!u)throw new Error("array is required");if(u&&u[0]&&u.length===4&&u[0][0]===void 0)return u;if(u&&u[0]&&u[0][0]!==void 0){var c=u[0][0],p=u[0][1],v=u[0][2],x=u[0][3];return u.map(function(T){T[0]<c&&(c=T[0]),T[1]<p&&(p=T[1]),T[2]>v&&(v=T[2]),T[3]>x&&(x=T[3])}),[c,p,v,x]}}function cI(u){try{return Rh(u),!0}catch{return!1}}function q0(u){if(u==null)throw new Error("lat is required");return(u>90||u<-90)&&(u=u%180,u>90&&(u=-180+u),u<-90&&(u=180+u),u===0&&(u=0)),u}function X0(u){if(u==null)throw new Error("lng is required");return(u>180||u<-180)&&(u=u%360,u>180&&(u=-360+u),u<-180&&(u=360+u),u===0&&(u=0)),u}function hI(u){var c=a0([u[0],u[1]],32),p=a0([u[2],u[3]],32),v=[c[0],c[1],p[0],p[1]],x=dI(v);if(x===0)return[0,0,0];var T=v[0]>>>32-x,w=v[1]>>>32-x;return[T,w,x]}function dI(u){for(var c=28,p=0;p<c;p++){var v=1<<32-(p+1);if((u[0]&v)!==(u[2]&v)||(u[1]&v)!==(u[3]&v))return p}return c}const fI=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:tI,bboxToMeters:lI,bboxToTile:hI,googleToBBox:oI,googleToBBoxMeters:iI,googleToQuadkey:sI,googleToTile:Zf,hash:eI,initialResolution:sw,latitude:q0,lngLatToGoogle:nI,lngLatToMeters:Pm,lngLatToTile:lw,longitude:X0,maxBBox:uI,metersToLngLat:l0,metersToPixels:V0,metersToTile:rI,pixelsToMeters:u0,pixelsToTile:$0,pointToTile:a0,pointToTileFraction:aw,quadkeyToGoogle:dw,quadkeyToTile:aI,range:W0,resolution:Z0,tileToBBox:uw,tileToBBoxMeters:G0,tileToGoogle:cw,tileToQuadkey:hw,validTile:cI,validateLngLat:jm,validateTile:Rh,validateZoom:H0,wrapTile:fw},Symbol.toStringTag,{value:"Module"})),pI=c0(fI);var Wp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var N_;function pw(){return N_||(N_=1,Wp.read=function(u,c,p,v,x){var T,w,a=x*8-v-1,L=(1<<a)-1,R=L>>1,D=-7,C=p?x-1:0,k=p?-1:1,V=u[c+C];for(C+=k,T=V&(1<<-D)-1,V>>=-D,D+=a;D>0;T=T*256+u[c+C],C+=k,D-=8);for(w=T&(1<<-D)-1,T>>=-D,D+=v;D>0;w=w*256+u[c+C],C+=k,D-=8);if(T===0)T=1-R;else{if(T===L)return w?NaN:(V?-1:1)*(1/0);w=w+Math.pow(2,v),T=T-R}return(V?-1:1)*w*Math.pow(2,T-v)},Wp.write=function(u,c,p,v,x,T){var w,a,L,R=T*8-x-1,D=(1<<R)-1,C=D>>1,k=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=v?0:T-1,N=v?1:-1,Q=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(a=isNaN(c)?1:0,w=D):(w=Math.floor(Math.log(c)/Math.LN2),c*(L=Math.pow(2,-w))<1&&(w--,L*=2),w+C>=1?c+=k/L:c+=k*Math.pow(2,1-C),c*L>=2&&(w++,L/=2),w+C>=D?(a=0,w=D):w+C>=1?(a=(c*L-1)*Math.pow(2,x),w=w+C):(a=c*Math.pow(2,C-1)*Math.pow(2,x),w=0));x>=8;u[p+V]=a&255,V+=N,a/=256,x-=8);for(w=w<<x|a,R+=x;R>0;u[p+V]=w&255,V+=N,w/=256,R-=8);u[p+V-N]|=Q*128}),Wp}var zg,U_;function mI(){if(U_)return zg;U_=1,zg=c;var u=pw();function c(j){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(j)?j:new Uint8Array(j||0),this.pos=0,this.type=0,this.length=this.buf.length}c.Varint=0,c.Fixed64=1,c.Bytes=2,c.Fixed32=5;var p=65536*65536,v=1/p,x=12,T=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");c.prototype={destroy:function(){this.buf=null},readFields:function(j,W,J){for(J=J||this.length;this.pos<J;){var re=this.readVarint(),ue=re>>3,te=this.pos;this.type=re&7,j(ue,W,this),this.pos===te&&this.skip(re)}return W},readMessage:function(j,W){return this.readFields(j,W,this.readVarint()+this.pos)},readFixed32:function(){var j=ce(this.buf,this.pos);return this.pos+=4,j},readSFixed32:function(){var j=$(this.buf,this.pos);return this.pos+=4,j},readFixed64:function(){var j=ce(this.buf,this.pos)+ce(this.buf,this.pos+4)*p;return this.pos+=8,j},readSFixed64:function(){var j=ce(this.buf,this.pos)+$(this.buf,this.pos+4)*p;return this.pos+=8,j},readFloat:function(){var j=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,j},readDouble:function(){var j=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,j},readVarint:function(j){var W=this.buf,J,re;return re=W[this.pos++],J=re&127,re<128||(re=W[this.pos++],J|=(re&127)<<7,re<128)||(re=W[this.pos++],J|=(re&127)<<14,re<128)||(re=W[this.pos++],J|=(re&127)<<21,re<128)?J:(re=W[this.pos],J|=(re&15)<<28,w(J,j,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var j=this.readVarint();return j%2===1?(j+1)/-2:j/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var j=this.readVarint()+this.pos,W=this.pos;return this.pos=j,j-W>=x&&T?de(this.buf,W,j):U(this.buf,W,j)},readBytes:function(){var j=this.readVarint()+this.pos,W=this.buf.subarray(this.pos,j);return this.pos=j,W},readPackedVarint:function(j,W){if(this.type!==c.Bytes)return j.push(this.readVarint(W));var J=a(this);for(j=j||[];this.pos<J;)j.push(this.readVarint(W));return j},readPackedSVarint:function(j){if(this.type!==c.Bytes)return j.push(this.readSVarint());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readSVarint());return j},readPackedBoolean:function(j){if(this.type!==c.Bytes)return j.push(this.readBoolean());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readBoolean());return j},readPackedFloat:function(j){if(this.type!==c.Bytes)return j.push(this.readFloat());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readFloat());return j},readPackedDouble:function(j){if(this.type!==c.Bytes)return j.push(this.readDouble());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readDouble());return j},readPackedFixed32:function(j){if(this.type!==c.Bytes)return j.push(this.readFixed32());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readFixed32());return j},readPackedSFixed32:function(j){if(this.type!==c.Bytes)return j.push(this.readSFixed32());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readSFixed32());return j},readPackedFixed64:function(j){if(this.type!==c.Bytes)return j.push(this.readFixed64());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readFixed64());return j},readPackedSFixed64:function(j){if(this.type!==c.Bytes)return j.push(this.readSFixed64());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readSFixed64());return j},skip:function(j){var W=j&7;if(W===c.Varint)for(;this.buf[this.pos++]>127;);else if(W===c.Bytes)this.pos=this.readVarint()+this.pos;else if(W===c.Fixed32)this.pos+=4;else if(W===c.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+W)},writeTag:function(j,W){this.writeVarint(j<<3|W)},realloc:function(j){for(var W=this.length||16;W<this.pos+j;)W*=2;if(W!==this.length){var J=new Uint8Array(W);J.set(this.buf),this.buf=J,this.length=W}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(j){this.realloc(4),M(this.buf,j,this.pos),this.pos+=4},writeSFixed32:function(j){this.realloc(4),M(this.buf,j,this.pos),this.pos+=4},writeFixed64:function(j){this.realloc(8),M(this.buf,j&-1,this.pos),M(this.buf,Math.floor(j*v),this.pos+4),this.pos+=8},writeSFixed64:function(j){this.realloc(8),M(this.buf,j&-1,this.pos),M(this.buf,Math.floor(j*v),this.pos+4),this.pos+=8},writeVarint:function(j){if(j=+j||0,j>268435455||j<0){R(j,this);return}this.realloc(4),this.buf[this.pos++]=j&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=(j>>>=7)&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=(j>>>=7)&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=j>>>7&127)))},writeSVarint:function(j){this.writeVarint(j<0?-j*2-1:j*2)},writeBoolean:function(j){this.writeVarint(!!j)},writeString:function(j){j=String(j),this.realloc(j.length*4),this.pos++;var W=this.pos;this.pos=K(this.buf,j,this.pos);var J=this.pos-W;J>=128&&k(W,J,this),this.pos=W-1,this.writeVarint(J),this.pos+=J},writeFloat:function(j){this.realloc(4),u.write(this.buf,j,this.pos,!0,23,4),this.pos+=4},writeDouble:function(j){this.realloc(8),u.write(this.buf,j,this.pos,!0,52,8),this.pos+=8},writeBytes:function(j){var W=j.length;this.writeVarint(W),this.realloc(W);for(var J=0;J<W;J++)this.buf[this.pos++]=j[J]},writeRawMessage:function(j,W){this.pos++;var J=this.pos;j(W,this);var re=this.pos-J;re>=128&&k(J,re,this),this.pos=J-1,this.writeVarint(re),this.pos+=re},writeMessage:function(j,W,J){this.writeTag(j,c.Bytes),this.writeRawMessage(W,J)},writePackedVarint:function(j,W){W.length&&this.writeMessage(j,V,W)},writePackedSVarint:function(j,W){W.length&&this.writeMessage(j,N,W)},writePackedBoolean:function(j,W){W.length&&this.writeMessage(j,Te,W)},writePackedFloat:function(j,W){W.length&&this.writeMessage(j,Q,W)},writePackedDouble:function(j,W){W.length&&this.writeMessage(j,he,W)},writePackedFixed32:function(j,W){W.length&&this.writeMessage(j,we,W)},writePackedSFixed32:function(j,W){W.length&&this.writeMessage(j,_e,W)},writePackedFixed64:function(j,W){W.length&&this.writeMessage(j,Me,W)},writePackedSFixed64:function(j,W){W.length&&this.writeMessage(j,ne,W)},writeBytesField:function(j,W){this.writeTag(j,c.Bytes),this.writeBytes(W)},writeFixed32Field:function(j,W){this.writeTag(j,c.Fixed32),this.writeFixed32(W)},writeSFixed32Field:function(j,W){this.writeTag(j,c.Fixed32),this.writeSFixed32(W)},writeFixed64Field:function(j,W){this.writeTag(j,c.Fixed64),this.writeFixed64(W)},writeSFixed64Field:function(j,W){this.writeTag(j,c.Fixed64),this.writeSFixed64(W)},writeVarintField:function(j,W){this.writeTag(j,c.Varint),this.writeVarint(W)},writeSVarintField:function(j,W){this.writeTag(j,c.Varint),this.writeSVarint(W)},writeStringField:function(j,W){this.writeTag(j,c.Bytes),this.writeString(W)},writeFloatField:function(j,W){this.writeTag(j,c.Fixed32),this.writeFloat(W)},writeDoubleField:function(j,W){this.writeTag(j,c.Fixed64),this.writeDouble(W)},writeBooleanField:function(j,W){this.writeVarintField(j,!!W)}};function w(j,W,J){var re=J.buf,ue,te;if(te=re[J.pos++],ue=(te&112)>>4,te<128||(te=re[J.pos++],ue|=(te&127)<<3,te<128)||(te=re[J.pos++],ue|=(te&127)<<10,te<128)||(te=re[J.pos++],ue|=(te&127)<<17,te<128)||(te=re[J.pos++],ue|=(te&127)<<24,te<128)||(te=re[J.pos++],ue|=(te&1)<<31,te<128))return L(j,ue,W);throw new Error("Expected varint not more than 10 bytes")}function a(j){return j.type===c.Bytes?j.readVarint()+j.pos:j.pos+1}function L(j,W,J){return J?W*4294967296+(j>>>0):(W>>>0)*4294967296+(j>>>0)}function R(j,W){var J,re;if(j>=0?(J=j%4294967296|0,re=j/4294967296|0):(J=~(-j%4294967296),re=~(-j/4294967296),J^4294967295?J=J+1|0:(J=0,re=re+1|0)),j>=18446744073709552e3||j<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");W.realloc(10),D(J,re,W),C(re,W)}function D(j,W,J){J.buf[J.pos++]=j&127|128,j>>>=7,J.buf[J.pos++]=j&127|128,j>>>=7,J.buf[J.pos++]=j&127|128,j>>>=7,J.buf[J.pos++]=j&127|128,j>>>=7,J.buf[J.pos]=j&127}function C(j,W){var J=(j&7)<<4;W.buf[W.pos++]|=J|((j>>>=3)?128:0),j&&(W.buf[W.pos++]=j&127|((j>>>=7)?128:0),j&&(W.buf[W.pos++]=j&127|((j>>>=7)?128:0),j&&(W.buf[W.pos++]=j&127|((j>>>=7)?128:0),j&&(W.buf[W.pos++]=j&127|((j>>>=7)?128:0),j&&(W.buf[W.pos++]=j&127)))))}function k(j,W,J){var re=W<=16383?1:W<=2097151?2:W<=268435455?3:Math.floor(Math.log(W)/(Math.LN2*7));J.realloc(re);for(var ue=J.pos-1;ue>=j;ue--)J.buf[ue+re]=J.buf[ue]}function V(j,W){for(var J=0;J<j.length;J++)W.writeVarint(j[J])}function N(j,W){for(var J=0;J<j.length;J++)W.writeSVarint(j[J])}function Q(j,W){for(var J=0;J<j.length;J++)W.writeFloat(j[J])}function he(j,W){for(var J=0;J<j.length;J++)W.writeDouble(j[J])}function Te(j,W){for(var J=0;J<j.length;J++)W.writeBoolean(j[J])}function we(j,W){for(var J=0;J<j.length;J++)W.writeFixed32(j[J])}function _e(j,W){for(var J=0;J<j.length;J++)W.writeSFixed32(j[J])}function Me(j,W){for(var J=0;J<j.length;J++)W.writeFixed64(j[J])}function ne(j,W){for(var J=0;J<j.length;J++)W.writeSFixed64(j[J])}function ce(j,W){return(j[W]|j[W+1]<<8|j[W+2]<<16)+j[W+3]*16777216}function M(j,W,J){j[J]=W,j[J+1]=W>>>8,j[J+2]=W>>>16,j[J+3]=W>>>24}function $(j,W){return(j[W]|j[W+1]<<8|j[W+2]<<16)+(j[W+3]<<24)}function U(j,W,J){for(var re="",ue=W;ue<J;){var te=j[ue],se=null,xe=te>239?4:te>223?3:te>191?2:1;if(ue+xe>J)break;var ie,ve,De;xe===1?te<128&&(se=te):xe===2?(ie=j[ue+1],(ie&192)===128&&(se=(te&31)<<6|ie&63,se<=127&&(se=null))):xe===3?(ie=j[ue+1],ve=j[ue+2],(ie&192)===128&&(ve&192)===128&&(se=(te&15)<<12|(ie&63)<<6|ve&63,(se<=2047||se>=55296&&se<=57343)&&(se=null))):xe===4&&(ie=j[ue+1],ve=j[ue+2],De=j[ue+3],(ie&192)===128&&(ve&192)===128&&(De&192)===128&&(se=(te&15)<<18|(ie&63)<<12|(ve&63)<<6|De&63,(se<=65535||se>=1114112)&&(se=null))),se===null?(se=65533,xe=1):se>65535&&(se-=65536,re+=String.fromCharCode(se>>>10&1023|55296),se=56320|se&1023),re+=String.fromCharCode(se),ue+=xe}return re}function de(j,W,J){return T.decode(j.subarray(W,J))}function K(j,W,J){for(var re=0,ue,te;re<W.length;re++){if(ue=W.charCodeAt(re),ue>55295&&ue<57344)if(te)if(ue<56320){j[J++]=239,j[J++]=191,j[J++]=189,te=ue;continue}else ue=te-55296<<10|ue-56320|65536,te=null;else{ue>56319||re+1===W.length?(j[J++]=239,j[J++]=191,j[J++]=189):te=ue;continue}else te&&(j[J++]=239,j[J++]=191,j[J++]=189,te=null);ue<128?j[J++]=ue:(ue<2048?j[J++]=ue>>6|192:(ue<65536?j[J++]=ue>>12|224:(j[J++]=ue>>18|240,j[J++]=ue>>12&63|128),j[J++]=ue>>6&63|128),j[J++]=ue&63|128)}return J}return zg}var qp={exports:{}},Rg,V_;function mw(){return V_||(V_=1,Rg=function(c,p){return function(){for(var x=new Array(arguments.length),T=0;T<x.length;T++)x[T]=arguments[T];return c.apply(p,x)}}),Rg}var Fg,$_;function Aa(){if($_)return Fg;$_=1;var u=mw(),c=Object.prototype.toString;function p($){return c.call($)==="[object Array]"}function v($){return typeof $>"u"}function x($){return $!==null&&!v($)&&$.constructor!==null&&!v($.constructor)&&typeof $.constructor.isBuffer=="function"&&$.constructor.isBuffer($)}function T($){return c.call($)==="[object ArrayBuffer]"}function w($){return typeof FormData<"u"&&$ instanceof FormData}function a($){var U;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?U=ArrayBuffer.isView($):U=$&&$.buffer&&$.buffer instanceof ArrayBuffer,U}function L($){return typeof $=="string"}function R($){return typeof $=="number"}function D($){return $!==null&&typeof $=="object"}function C($){if(c.call($)!=="[object Object]")return!1;var U=Object.getPrototypeOf($);return U===null||U===Object.prototype}function k($){return c.call($)==="[object Date]"}function V($){return c.call($)==="[object File]"}function N($){return c.call($)==="[object Blob]"}function Q($){return c.call($)==="[object Function]"}function he($){return D($)&&Q($.pipe)}function Te($){return typeof URLSearchParams<"u"&&$ instanceof URLSearchParams}function we($){return $.trim?$.trim():$.replace(/^\s+|\s+$/g,"")}function _e(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Me($,U){if(!($===null||typeof $>"u"))if(typeof $!="object"&&($=[$]),p($))for(var de=0,K=$.length;de<K;de++)U.call(null,$[de],de,$);else for(var j in $)Object.prototype.hasOwnProperty.call($,j)&&U.call(null,$[j],j,$)}function ne(){var $={};function U(j,W){C($[W])&&C(j)?$[W]=ne($[W],j):C(j)?$[W]=ne({},j):p(j)?$[W]=j.slice():$[W]=j}for(var de=0,K=arguments.length;de<K;de++)Me(arguments[de],U);return $}function ce($,U,de){return Me(U,function(j,W){de&&typeof j=="function"?$[W]=u(j,de):$[W]=j}),$}function M($){return $.charCodeAt(0)===65279&&($=$.slice(1)),$}return Fg={isArray:p,isArrayBuffer:T,isBuffer:x,isFormData:w,isArrayBufferView:a,isString:L,isNumber:R,isObject:D,isPlainObject:C,isUndefined:v,isDate:k,isFile:V,isBlob:N,isFunction:Q,isStream:he,isURLSearchParams:Te,isStandardBrowserEnv:_e,forEach:Me,merge:ne,extend:ce,trim:we,stripBOM:M},Fg}var Og,G_;function gw(){if(G_)return Og;G_=1;var u=Aa();function c(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return Og=function(v,x,T){if(!x)return v;var w;if(T)w=T(x);else if(u.isURLSearchParams(x))w=x.toString();else{var a=[];u.forEach(x,function(D,C){D===null||typeof D>"u"||(u.isArray(D)?C=C+"[]":D=[D],u.forEach(D,function(V){u.isDate(V)?V=V.toISOString():u.isObject(V)&&(V=JSON.stringify(V)),a.push(c(C)+"="+c(V))}))}),w=a.join("&")}if(w){var L=v.indexOf("#");L!==-1&&(v=v.slice(0,L)),v+=(v.indexOf("?")===-1?"?":"&")+w}return v},Og}var jg,H_;function gI(){if(H_)return jg;H_=1;var u=Aa();function c(){this.handlers=[]}return c.prototype.use=function(v,x,T){return this.handlers.push({fulfilled:v,rejected:x,synchronous:T?T.synchronous:!1,runWhen:T?T.runWhen:null}),this.handlers.length-1},c.prototype.eject=function(v){this.handlers[v]&&(this.handlers[v]=null)},c.prototype.forEach=function(v){u.forEach(this.handlers,function(T){T!==null&&v(T)})},jg=c,jg}var Lg,Z_;function yI(){if(Z_)return Lg;Z_=1;var u=Aa();return Lg=function(p,v){u.forEach(p,function(T,w){w!==v&&w.toUpperCase()===v.toUpperCase()&&(p[v]=T,delete p[w])})},Lg}var Dg,W_;function yw(){return W_||(W_=1,Dg=function(c,p,v,x,T){return c.config=p,v&&(c.code=v),c.request=x,c.response=T,c.isAxiosError=!0,c.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},c}),Dg}var Bg,q_;function vw(){if(q_)return Bg;q_=1;var u=yw();return Bg=function(p,v,x,T,w){var a=new Error(p);return u(a,v,x,T,w)},Bg}var Ng,X_;function vI(){if(X_)return Ng;X_=1;var u=vw();return Ng=function(p,v,x){var T=x.config.validateStatus;!x.status||!T||T(x.status)?p(x):v(u("Request failed with status code "+x.status,x.config,null,x.request,x))},Ng}var Ug,K_;function _I(){if(K_)return Ug;K_=1;var u=Aa();return Ug=u.isStandardBrowserEnv()?function(){return{write:function(v,x,T,w,a,L){var R=[];R.push(v+"="+encodeURIComponent(x)),u.isNumber(T)&&R.push("expires="+new Date(T).toGMTString()),u.isString(w)&&R.push("path="+w),u.isString(a)&&R.push("domain="+a),L===!0&&R.push("secure"),document.cookie=R.join("; ")},read:function(v){var x=document.cookie.match(new RegExp("(^|;\\s*)("+v+")=([^;]*)"));return x?decodeURIComponent(x[3]):null},remove:function(v){this.write(v,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ug}var Vg,Y_;function xI(){return Y_||(Y_=1,Vg=function(c){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)}),Vg}var $g,J_;function wI(){return J_||(J_=1,$g=function(c,p){return p?c.replace(/\/+$/,"")+"/"+p.replace(/^\/+/,""):c}),$g}var Gg,Q_;function bI(){if(Q_)return Gg;Q_=1;var u=xI(),c=wI();return Gg=function(v,x){return v&&!u(x)?c(v,x):x},Gg}var Hg,e1;function SI(){if(e1)return Hg;e1=1;var u=Aa(),c=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Hg=function(v){var x={},T,w,a;return v&&u.forEach(v.split(`
`),function(R){if(a=R.indexOf(":"),T=u.trim(R.substr(0,a)).toLowerCase(),w=u.trim(R.substr(a+1)),T){if(x[T]&&c.indexOf(T)>=0)return;T==="set-cookie"?x[T]=(x[T]?x[T]:[]).concat([w]):x[T]=x[T]?x[T]+", "+w:w}}),x},Hg}var Zg,t1;function EI(){if(t1)return Zg;t1=1;var u=Aa();return Zg=u.isStandardBrowserEnv()?function(){var p=/(msie|trident)/i.test(navigator.userAgent),v=document.createElement("a"),x;function T(w){var a=w;return p&&(v.setAttribute("href",a),a=v.href),v.setAttribute("href",a),{href:v.href,protocol:v.protocol?v.protocol.replace(/:$/,""):"",host:v.host,search:v.search?v.search.replace(/^\?/,""):"",hash:v.hash?v.hash.replace(/^#/,""):"",hostname:v.hostname,port:v.port,pathname:v.pathname.charAt(0)==="/"?v.pathname:"/"+v.pathname}}return x=T(window.location.href),function(a){var L=u.isString(a)?T(a):a;return L.protocol===x.protocol&&L.host===x.host}}():function(){return function(){return!0}}(),Zg}var Wg,n1;function r1(){if(n1)return Wg;n1=1;var u=Aa(),c=vI(),p=_I(),v=gw(),x=bI(),T=SI(),w=EI(),a=vw();return Wg=function(R){return new Promise(function(C,k){var V=R.data,N=R.headers,Q=R.responseType;u.isFormData(V)&&delete N["Content-Type"];var he=new XMLHttpRequest;if(R.auth){var Te=R.auth.username||"",we=R.auth.password?unescape(encodeURIComponent(R.auth.password)):"";N.Authorization="Basic "+btoa(Te+":"+we)}var _e=x(R.baseURL,R.url);he.open(R.method.toUpperCase(),v(_e,R.params,R.paramsSerializer),!0),he.timeout=R.timeout;function Me(){if(he){var ce="getAllResponseHeaders"in he?T(he.getAllResponseHeaders()):null,M=!Q||Q==="text"||Q==="json"?he.responseText:he.response,$={data:M,status:he.status,statusText:he.statusText,headers:ce,config:R,request:he};c(C,k,$),he=null}}if("onloadend"in he?he.onloadend=Me:he.onreadystatechange=function(){!he||he.readyState!==4||he.status===0&&!(he.responseURL&&he.responseURL.indexOf("file:")===0)||setTimeout(Me)},he.onabort=function(){he&&(k(a("Request aborted",R,"ECONNABORTED",he)),he=null)},he.onerror=function(){k(a("Network Error",R,null,he)),he=null},he.ontimeout=function(){var M="timeout of "+R.timeout+"ms exceeded";R.timeoutErrorMessage&&(M=R.timeoutErrorMessage),k(a(M,R,R.transitional&&R.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",he)),he=null},u.isStandardBrowserEnv()){var ne=(R.withCredentials||w(_e))&&R.xsrfCookieName?p.read(R.xsrfCookieName):void 0;ne&&(N[R.xsrfHeaderName]=ne)}"setRequestHeader"in he&&u.forEach(N,function(M,$){typeof V>"u"&&$.toLowerCase()==="content-type"?delete N[$]:he.setRequestHeader($,M)}),u.isUndefined(R.withCredentials)||(he.withCredentials=!!R.withCredentials),Q&&Q!=="json"&&(he.responseType=R.responseType),typeof R.onDownloadProgress=="function"&&he.addEventListener("progress",R.onDownloadProgress),typeof R.onUploadProgress=="function"&&he.upload&&he.upload.addEventListener("progress",R.onUploadProgress),R.cancelToken&&R.cancelToken.promise.then(function(M){he&&(he.abort(),k(M),he=null)}),V||(V=null),he.send(V)})},Wg}var qg,i1;function K0(){if(i1)return qg;i1=1;var u=Aa(),c=yI(),p=yw(),v={"Content-Type":"application/x-www-form-urlencoded"};function x(L,R){!u.isUndefined(L)&&u.isUndefined(L["Content-Type"])&&(L["Content-Type"]=R)}function T(){var L;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(L=r1()),L}function w(L,R,D){if(u.isString(L))try{return(R||JSON.parse)(L),u.trim(L)}catch(C){if(C.name!=="SyntaxError")throw C}return(0,JSON.stringify)(L)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:T(),transformRequest:[function(R,D){return c(D,"Accept"),c(D,"Content-Type"),u.isFormData(R)||u.isArrayBuffer(R)||u.isBuffer(R)||u.isStream(R)||u.isFile(R)||u.isBlob(R)?R:u.isArrayBufferView(R)?R.buffer:u.isURLSearchParams(R)?(x(D,"application/x-www-form-urlencoded;charset=utf-8"),R.toString()):u.isObject(R)||D&&D["Content-Type"]==="application/json"?(x(D,"application/json"),w(R)):R}],transformResponse:[function(R){var D=this.transitional,C=D&&D.silentJSONParsing,k=D&&D.forcedJSONParsing,V=!C&&this.responseType==="json";if(V||k&&u.isString(R)&&R.length)try{return JSON.parse(R)}catch(N){if(V)throw N.name==="SyntaxError"?p(N,this,"E_JSON_PARSE"):N}return R}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(R){return R>=200&&R<300}};return a.headers={common:{Accept:"application/json, text/plain, */*"}},u.forEach(["delete","get","head"],function(R){a.headers[R]={}}),u.forEach(["post","put","patch"],function(R){a.headers[R]=u.merge(v)}),qg=a,qg}var Xg,o1;function TI(){if(o1)return Xg;o1=1;var u=Aa(),c=K0();return Xg=function(v,x,T){var w=this||c;return u.forEach(T,function(L){v=L.call(w,v,x)}),v},Xg}var Kg,s1;function _w(){return s1||(s1=1,Kg=function(c){return!!(c&&c.__CANCEL__)}),Kg}var Yg,a1;function II(){if(a1)return Yg;a1=1;var u=Aa(),c=TI(),p=_w(),v=K0();function x(T){T.cancelToken&&T.cancelToken.throwIfRequested()}return Yg=function(w){x(w),w.headers=w.headers||{},w.data=c.call(w,w.data,w.headers,w.transformRequest),w.headers=u.merge(w.headers.common||{},w.headers[w.method]||{},w.headers),u.forEach(["delete","get","head","post","put","patch","common"],function(R){delete w.headers[R]});var a=w.adapter||v.adapter;return a(w).then(function(R){return x(w),R.data=c.call(w,R.data,R.headers,w.transformResponse),R},function(R){return p(R)||(x(w),R&&R.response&&(R.response.data=c.call(w,R.response.data,R.response.headers,w.transformResponse))),Promise.reject(R)})},Yg}var Jg,l1;function xw(){if(l1)return Jg;l1=1;var u=Aa();return Jg=function(p,v){v=v||{};var x={},T=["url","method","data"],w=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],L=["validateStatus"];function R(V,N){return u.isPlainObject(V)&&u.isPlainObject(N)?u.merge(V,N):u.isPlainObject(N)?u.merge({},N):u.isArray(N)?N.slice():N}function D(V){u.isUndefined(v[V])?u.isUndefined(p[V])||(x[V]=R(void 0,p[V])):x[V]=R(p[V],v[V])}u.forEach(T,function(N){u.isUndefined(v[N])||(x[N]=R(void 0,v[N]))}),u.forEach(w,D),u.forEach(a,function(N){u.isUndefined(v[N])?u.isUndefined(p[N])||(x[N]=R(void 0,p[N])):x[N]=R(void 0,v[N])}),u.forEach(L,function(N){N in v?x[N]=R(p[N],v[N]):N in p&&(x[N]=R(void 0,p[N]))});var C=T.concat(w).concat(a).concat(L),k=Object.keys(p).concat(Object.keys(v)).filter(function(N){return C.indexOf(N)===-1});return u.forEach(k,D),x},Jg}const CI="axios",PI="0.21.4",AI="Promise based HTTP client for the browser and node.js",MI="index.js",kI={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},zI={type:"git",url:"https://github.com/axios/axios.git"},RI=["xhr","http","ajax","promise","node"],FI="Matt Zabriskie",OI="MIT",jI={url:"https://github.com/axios/axios/issues"},LI="https://axios-http.com",DI={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},BI={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},NI="dist/axios.min.js",UI="dist/axios.min.js",VI="./index.d.ts",$I={"follow-redirects":"^1.14.0"},GI=[{path:"./dist/axios.min.js",threshold:"5kB"}],HI={name:CI,version:PI,description:AI,main:MI,scripts:kI,repository:zI,keywords:RI,author:FI,license:OI,bugs:jI,homepage:LI,devDependencies:DI,browser:BI,jsdelivr:NI,unpkg:UI,typings:VI,dependencies:$I,bundlesize:GI};var Qg,u1;function ZI(){if(u1)return Qg;u1=1;var u=HI,c={};["object","boolean","number","function","string","symbol"].forEach(function(w,a){c[w]=function(R){return typeof R===w||"a"+(a<1?"n ":" ")+w}});var p={},v=u.version.split(".");function x(w,a){for(var L=a?a.split("."):v,R=w.split("."),D=0;D<3;D++){if(L[D]>R[D])return!0;if(L[D]<R[D])return!1}return!1}c.transitional=function(a,L,R){var D=L&&x(L);function C(k,V){return"[Axios v"+u.version+"] Transitional option '"+k+"'"+V+(R?". "+R:"")}return function(k,V,N){if(a===!1)throw new Error(C(V," has been removed in "+L));return D&&!p[V]&&(p[V]=!0,console.warn(C(V," has been deprecated since v"+L+" and will be removed in the near future"))),a?a(k,V,N):!0}};function T(w,a,L){if(typeof w!="object")throw new TypeError("options must be an object");for(var R=Object.keys(w),D=R.length;D-- >0;){var C=R[D],k=a[C];if(k){var V=w[C],N=V===void 0||k(V,C,w);if(N!==!0)throw new TypeError("option "+C+" must be "+N);continue}if(L!==!0)throw Error("Unknown option "+C)}}return Qg={isOlderVersion:x,assertOptions:T,validators:c},Qg}var ey,c1;function WI(){if(c1)return ey;c1=1;var u=Aa(),c=gw(),p=gI(),v=II(),x=xw(),T=ZI(),w=T.validators;function a(L){this.defaults=L,this.interceptors={request:new p,response:new p}}return a.prototype.request=function(R){typeof R=="string"?(R=arguments[1]||{},R.url=arguments[0]):R=R||{},R=x(this.defaults,R),R.method?R.method=R.method.toLowerCase():this.defaults.method?R.method=this.defaults.method.toLowerCase():R.method="get";var D=R.transitional;D!==void 0&&T.assertOptions(D,{silentJSONParsing:w.transitional(w.boolean,"1.0.0"),forcedJSONParsing:w.transitional(w.boolean,"1.0.0"),clarifyTimeoutError:w.transitional(w.boolean,"1.0.0")},!1);var C=[],k=!0;this.interceptors.request.forEach(function(Me){typeof Me.runWhen=="function"&&Me.runWhen(R)===!1||(k=k&&Me.synchronous,C.unshift(Me.fulfilled,Me.rejected))});var V=[];this.interceptors.response.forEach(function(Me){V.push(Me.fulfilled,Me.rejected)});var N;if(!k){var Q=[v,void 0];for(Array.prototype.unshift.apply(Q,C),Q=Q.concat(V),N=Promise.resolve(R);Q.length;)N=N.then(Q.shift(),Q.shift());return N}for(var he=R;C.length;){var Te=C.shift(),we=C.shift();try{he=Te(he)}catch(_e){we(_e);break}}try{N=v(he)}catch(_e){return Promise.reject(_e)}for(;V.length;)N=N.then(V.shift(),V.shift());return N},a.prototype.getUri=function(R){return R=x(this.defaults,R),c(R.url,R.params,R.paramsSerializer).replace(/^\?/,"")},u.forEach(["delete","get","head","options"],function(R){a.prototype[R]=function(D,C){return this.request(x(C||{},{method:R,url:D,data:(C||{}).data}))}}),u.forEach(["post","put","patch"],function(R){a.prototype[R]=function(D,C,k){return this.request(x(k||{},{method:R,url:D,data:C}))}}),ey=a,ey}var ty,h1;function ww(){if(h1)return ty;h1=1;function u(c){this.message=c}return u.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},u.prototype.__CANCEL__=!0,ty=u,ty}var ny,d1;function qI(){if(d1)return ny;d1=1;var u=ww();function c(p){if(typeof p!="function")throw new TypeError("executor must be a function.");var v;this.promise=new Promise(function(w){v=w});var x=this;p(function(w){x.reason||(x.reason=new u(w),v(x.reason))})}return c.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},c.source=function(){var v,x=new c(function(w){v=w});return{token:x,cancel:v}},ny=c,ny}var ry,f1;function XI(){return f1||(f1=1,ry=function(c){return function(v){return c.apply(null,v)}}),ry}var iy,p1;function KI(){return p1||(p1=1,iy=function(c){return typeof c=="object"&&c.isAxiosError===!0}),iy}var m1;function YI(){if(m1)return qp.exports;m1=1;var u=Aa(),c=mw(),p=WI(),v=xw(),x=K0();function T(a){var L=new p(a),R=c(p.prototype.request,L);return u.extend(R,p.prototype,L),u.extend(R,L),R}var w=T(x);return w.Axios=p,w.create=function(L){return T(v(w.defaults,L))},w.Cancel=ww(),w.CancelToken=qI(),w.isCancel=_w(),w.all=function(L){return Promise.all(L)},w.spread=XI(),w.isAxiosError=KI(),qp.exports=w,qp.exports.default=w,qp.exports}var oy,g1;function JI(){return g1||(g1=1,oy=YI()),oy}const QI={},eC=Object.freeze(Object.defineProperty({__proto__:null,default:QI},Symbol.toStringTag,{value:"Module"})),tC=c0(eC);var ff={},sy,y1;function nC(){if(y1)return sy;y1=1,sy=u;function u(c,p){this.x=c,this.y=p}return u.prototype={clone:function(){return new u(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,p){return this.clone()._rotateAround(c,p)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var p=c.x-this.x,v=c.y-this.y;return p*p+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,p){return Math.atan2(this.x*p-this.y*c,this.x*c+this.y*p)},_matMult:function(c){var p=c[0]*this.x+c[1]*this.y,v=c[2]*this.x+c[3]*this.y;return this.x=p,this.y=v,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var p=Math.cos(c),v=Math.sin(c),x=p*this.x-v*this.y,T=v*this.x+p*this.y;return this.x=x,this.y=T,this},_rotateAround:function(c,p){var v=Math.cos(c),x=Math.sin(c),T=p.x+v*(this.x-p.x)-x*(this.y-p.y),w=p.y+x*(this.x-p.x)+v*(this.y-p.y);return this.x=T,this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(c){return c instanceof u?c:Array.isArray(c)?new u(c[0],c[1]):c},sy}var ay,v1;function bw(){if(v1)return ay;v1=1;var u=nC();ay=c;function c(w,a,L,R,D){this.properties={},this.extent=L,this.type=0,this._pbf=w,this._geometry=-1,this._keys=R,this._values=D,w.readFields(p,this,a)}function p(w,a,L){w==1?a.id=L.readVarint():w==2?v(L,a):w==3?a.type=L.readVarint():w==4&&(a._geometry=L.pos)}function v(w,a){for(var L=w.readVarint()+w.pos;w.pos<L;){var R=a._keys[w.readVarint()],D=a._values[w.readVarint()];a.properties[R]=D}}c.types=["Unknown","Point","LineString","Polygon"],c.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var a=w.readVarint()+w.pos,L=1,R=0,D=0,C=0,k=[],V;w.pos<a;){if(R<=0){var N=w.readVarint();L=N&7,R=N>>3}if(R--,L===1||L===2)D+=w.readSVarint(),C+=w.readSVarint(),L===1&&(V&&k.push(V),V=[]),V.push(new u(D,C));else if(L===7)V&&V.push(V[0].clone());else throw new Error("unknown command "+L)}return V&&k.push(V),k},c.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var a=w.readVarint()+w.pos,L=1,R=0,D=0,C=0,k=1/0,V=-1/0,N=1/0,Q=-1/0;w.pos<a;){if(R<=0){var he=w.readVarint();L=he&7,R=he>>3}if(R--,L===1||L===2)D+=w.readSVarint(),C+=w.readSVarint(),D<k&&(k=D),D>V&&(V=D),C<N&&(N=C),C>Q&&(Q=C);else if(L!==7)throw new Error("unknown command "+L)}return[k,N,V,Q]},c.prototype.toGeoJSON=function(w,a,L){var R=this.extent*Math.pow(2,L),D=this.extent*w,C=this.extent*a,k=this.loadGeometry(),V=c.types[this.type],N,Q;function he(_e){for(var Me=0;Me<_e.length;Me++){var ne=_e[Me],ce=180-(ne.y+C)*360/R;_e[Me]=[(ne.x+D)*360/R-180,360/Math.PI*Math.atan(Math.exp(ce*Math.PI/180))-90]}}switch(this.type){case 1:var Te=[];for(N=0;N<k.length;N++)Te[N]=k[N][0];k=Te,he(k);break;case 2:for(N=0;N<k.length;N++)he(k[N]);break;case 3:for(k=x(k),N=0;N<k.length;N++)for(Q=0;Q<k[N].length;Q++)he(k[N][Q]);break}k.length===1?k=k[0]:V="Multi"+V;var we={type:"Feature",geometry:{type:V,coordinates:k},properties:this.properties};return"id"in this&&(we.id=this.id),we};function x(w){var a=w.length;if(a<=1)return[w];for(var L=[],R,D,C=0;C<a;C++){var k=T(w[C]);k!==0&&(D===void 0&&(D=k<0),D===k<0?(R&&L.push(R),R=[w[C]]):R.push(w[C]))}return R&&L.push(R),L}function T(w){for(var a=0,L=0,R=w.length,D=R-1,C,k;L<R;D=L++)C=w[L],k=w[D],a+=(k.x-C.x)*(C.y+k.y);return a}return ay}var ly,_1;function Sw(){if(_1)return ly;_1=1;var u=bw();ly=c;function c(x,T){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=x,this._keys=[],this._values=[],this._features=[],x.readFields(p,this,T),this.length=this._features.length}function p(x,T,w){x===15?T.version=w.readVarint():x===1?T.name=w.readString():x===5?T.extent=w.readVarint():x===2?T._features.push(w.pos):x===3?T._keys.push(w.readString()):x===4&&T._values.push(v(w))}function v(x){for(var T=null,w=x.readVarint()+x.pos;x.pos<w;){var a=x.readVarint()>>3;T=a===1?x.readString():a===2?x.readFloat():a===3?x.readDouble():a===4?x.readVarint64():a===5?x.readVarint():a===6?x.readSVarint():a===7?x.readBoolean():null}return T}return c.prototype.feature=function(x){if(x<0||x>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[x];var T=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,T,this.extent,this._keys,this._values)},ly}var uy,x1;function rC(){if(x1)return uy;x1=1;var u=Sw();uy=c;function c(v,x){this.layers=v.readFields(p,{},x)}function p(v,x,T){if(v===3){var w=new u(T,T.readVarint()+T.pos);w.length&&(x[w.name]=w)}}return uy}var w1;function iC(){return w1||(w1=1,ff.VectorTile=rC(),ff.VectorTileFeature=bw(),ff.VectorTileLayer=Sw()),ff}var b1;function oC(){return b1||(b1=1,function(u){Object.defineProperty(u,"__esModule",{value:!0});var c=JT,p=pI,v=mI(),x=JI(),T=tC,w=iC();function a(we){return we&&typeof we=="object"&&"default"in we?we:{default:we}}var L=a(v),R=a(x),D=a(T),C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof dd<"u"?dd:typeof self<"u"?self:{};function k(we){var _e={exports:{}};return we(_e,_e.exports),_e.exports}var V=k(function(we,_e){(function(ne,ce){we.exports=ce(R.default)})(C,function(Me){return function(ne){var ce={};function M($){if(ce[$])return ce[$].exports;var U=ce[$]={i:$,l:!1,exports:{}};return ne[$].call(U.exports,U,U.exports,M),U.l=!0,U.exports}return M.m=ne,M.c=ce,M.d=function($,U,de){M.o($,U)||Object.defineProperty($,U,{enumerable:!0,get:de})},M.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},M.t=function($,U){if(U&1&&($=M($)),U&8||U&4&&typeof $=="object"&&$&&$.__esModule)return $;var de=Object.create(null);if(M.r(de),Object.defineProperty(de,"default",{enumerable:!0,value:$}),U&2&&typeof $!="string")for(var K in $)M.d(de,K,(function(j){return $[j]}).bind(null,K));return de},M.n=function($){var U=$&&$.__esModule?function(){return $.default}:function(){return $};return M.d(U,"a",U),U},M.o=function($,U){return Object.prototype.hasOwnProperty.call($,U)},M.p="",M(M.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(ne,ce,M){M.r(ce),M.d(ce,"CacheControl",function(){return ve}),M.d(ce,"parse",function(){return De}),M.d(ce,"format",function(){return Oe}),M("./node_modules/core-js/modules/es6.array.from.js"),M("./node_modules/core-js/modules/es6.function.name.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/core-js/modules/web.dom.iterable.js"),M("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.regexp.split.js"),M("./node_modules/core-js/modules/es6.number.is-finite.js");function $(Le,Ye){return W(Le)||j(Le,Ye)||de(Le,Ye)||U()}function U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(Le,Ye){if(Le){if(typeof Le=="string")return K(Le,Ye);var tt=Object.prototype.toString.call(Le).slice(8,-1);if(tt==="Object"&&Le.constructor&&(tt=Le.constructor.name),tt==="Map"||tt==="Set")return Array.from(Le);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return K(Le,Ye)}}function K(Le,Ye){(Ye==null||Ye>Le.length)&&(Ye=Le.length);for(var tt=0,pt=new Array(Ye);tt<Ye;tt++)pt[tt]=Le[tt];return pt}function j(Le,Ye){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Le)))){var tt=[],pt=!0,_t=!1,Pt=void 0;try{for(var Wt=Le[Symbol.iterator](),Tt;!(pt=(Tt=Wt.next()).done)&&(tt.push(Tt.value),!(Ye&&tt.length===Ye));pt=!0);}catch(kt){_t=!0,Pt=kt}finally{try{!pt&&Wt.return!=null&&Wt.return()}finally{if(_t)throw Pt}}return tt}}function W(Le){if(Array.isArray(Le))return Le}function J(Le,Ye){if(!(Le instanceof Ye))throw new TypeError("Cannot call a class as a function")}function re(Le,Ye){for(var tt=0;tt<Ye.length;tt++){var pt=Ye[tt];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(Le,pt.key,pt)}}function ue(Le,Ye,tt){return Ye&&re(Le.prototype,Ye),Le}var te=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,se={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function xe(Le){return Le===null}function ie(Le){if(!Le)return null;var Ye=parseInt(Le,10);return!Number.isFinite(Ye)||Ye<0?null:Ye}var ve=function(){function Le(){J(this,Le),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ue(Le,[{key:"parse",value:function(tt){if(!tt||tt.length===0)return this;var pt={},_t=tt.match(te)||[];return Array.prototype.forEach.call(_t,function(Pt){var Wt=Pt.split("=",2),Tt=$(Wt,1),kt=Tt[0],Yt=null;Wt.length>1&&(Yt=Wt[1].trim()),pt[kt.toLowerCase()]=Yt}),this.maxAge=ie(pt[se.maxAge]),this.sharedMaxAge=ie(pt[se.sharedMaxAge]),this.maxStale=xe(pt[se.maxStale]),this.maxStaleDuration=ie(pt[se.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=ie(pt[se.minFresh]),this.immutable=xe(pt[se.immutable]),this.mustRevalidate=xe(pt[se.mustRevalidate]),this.noCache=xe(pt[se.noCache]),this.noStore=xe(pt[se.noStore]),this.noTransform=xe(pt[se.noTransform]),this.onlyIfCached=xe(pt[se.onlyIfCached]),this.private=xe(pt[se.private]),this.proxyRevalidate=xe(pt[se.proxyRevalidate]),this.public=xe(pt[se.public]),this}},{key:"format",value:function(){var tt=[];return this.maxAge&&tt.push("".concat(se.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&tt.push("".concat(se.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?tt.push("".concat(se.maxStale,"=").concat(this.maxStaleDuration)):tt.push(se.maxStale)),this.minFresh&&tt.push("".concat(se.minFresh,"=").concat(this.minFresh)),this.immutable&&tt.push(se.immutable),this.mustRevalidate&&tt.push(se.mustRevalidate),this.noCache&&tt.push(se.noCache),this.noStore&&tt.push(se.noStore),this.noTransform&&tt.push(se.noTransform),this.onlyIfCached&&tt.push(se.onlyIfCached),this.private&&tt.push(se.private),this.proxyRevalidate&&tt.push(se.proxyRevalidate),this.public&&tt.push(se.public),tt.join(", ")}}]),Le}();function De(Le){var Ye=new ve;return Ye.parse(Le)}function Oe(Le){return Le instanceof ve?Le.format():ve.prototype.format.call(Le)}ce.default={CacheControl:ve,parse:De,format:Oe}},"./node_modules/charenc/charenc.js":function(ne,ce){var M={utf8:{stringToBytes:function($){return M.bin.stringToBytes(unescape(encodeURIComponent($)))},bytesToString:function($){return decodeURIComponent(escape(M.bin.bytesToString($)))}},bin:{stringToBytes:function($){for(var U=[],de=0;de<$.length;de++)U.push($.charCodeAt(de)&255);return U},bytesToString:function($){for(var U=[],de=0;de<$.length;de++)U.push(String.fromCharCode($[de]));return U.join("")}}};ne.exports=M},"./node_modules/core-js/modules/_a-function.js":function(ne,ce){ne.exports=function(M){if(typeof M!="function")throw TypeError(M+" is not a function!");return M}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_wks.js")("unscopables"),U=Array.prototype;U[$]==null&&M("./node_modules/core-js/modules/_hide.js")(U,$,{}),ne.exports=function(de){U[$][de]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_string-at.js")(!0);ne.exports=function(U,de,K){return de+(K?$(U,de).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_is-object.js");ne.exports=function(U){if(!$(U))throw TypeError(U+" is not an object!");return U}},"./node_modules/core-js/modules/_array-includes.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_to-iobject.js"),U=M("./node_modules/core-js/modules/_to-length.js"),de=M("./node_modules/core-js/modules/_to-absolute-index.js");ne.exports=function(K){return function(j,W,J){var re=$(j),ue=U(re.length),te=de(J,ue),se;if(K&&W!=W){for(;ue>te;)if(se=re[te++],se!=se)return!0}else for(;ue>te;te++)if((K||te in re)&&re[te]===W)return K||te||0;return!K&&-1}}},"./node_modules/core-js/modules/_bind.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_a-function.js"),U=M("./node_modules/core-js/modules/_is-object.js"),de=M("./node_modules/core-js/modules/_invoke.js"),K=[].slice,j={},W=function(J,re,ue){if(!(re in j)){for(var te=[],se=0;se<re;se++)te[se]="a["+se+"]";j[re]=Function("F,a","return new F("+te.join(",")+")")}return j[re](J,ue)};ne.exports=Function.bind||function(re){var ue=$(this),te=K.call(arguments,1),se=function(){var xe=te.concat(K.call(arguments));return this instanceof se?W(ue,xe.length,xe):de(ue,xe,re)};return U(ue.prototype)&&(se.prototype=ue.prototype),se}},"./node_modules/core-js/modules/_classof.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_cof.js"),U=M("./node_modules/core-js/modules/_wks.js")("toStringTag"),de=$(function(){return arguments}())=="Arguments",K=function(j,W){try{return j[W]}catch{}};ne.exports=function(j){var W,J,re;return j===void 0?"Undefined":j===null?"Null":typeof(J=K(W=Object(j),U))=="string"?J:de?$(W):(re=$(W))=="Object"&&typeof W.callee=="function"?"Arguments":re}},"./node_modules/core-js/modules/_cof.js":function(ne,ce){var M={}.toString;ne.exports=function($){return M.call($).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(ne,ce){var M=ne.exports={version:"2.6.12"};typeof __e=="number"&&(__e=M)},"./node_modules/core-js/modules/_create-property.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-dp.js"),U=M("./node_modules/core-js/modules/_property-desc.js");ne.exports=function(de,K,j){K in de?$.f(de,K,U(0,j)):de[K]=j}},"./node_modules/core-js/modules/_ctx.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_a-function.js");ne.exports=function(U,de,K){if($(U),de===void 0)return U;switch(K){case 1:return function(j){return U.call(de,j)};case 2:return function(j,W){return U.call(de,j,W)};case 3:return function(j,W,J){return U.call(de,j,W,J)}}return function(){return U.apply(de,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(ne,ce){ne.exports=function(M){if(M==null)throw TypeError("Can't call method on  "+M);return M}},"./node_modules/core-js/modules/_descriptors.js":function(ne,ce,M){ne.exports=!M("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_is-object.js"),U=M("./node_modules/core-js/modules/_global.js").document,de=$(U)&&$(U.createElement);ne.exports=function(K){return de?U.createElement(K):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(ne,ce){ne.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-keys.js"),U=M("./node_modules/core-js/modules/_object-gops.js"),de=M("./node_modules/core-js/modules/_object-pie.js");ne.exports=function(K){var j=$(K),W=U.f;if(W)for(var J=W(K),re=de.f,ue=0,te;J.length>ue;)re.call(K,te=J[ue++])&&j.push(te);return j}},"./node_modules/core-js/modules/_export.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_global.js"),U=M("./node_modules/core-js/modules/_core.js"),de=M("./node_modules/core-js/modules/_hide.js"),K=M("./node_modules/core-js/modules/_redefine.js"),j=M("./node_modules/core-js/modules/_ctx.js"),W="prototype",J=function(re,ue,te){var se=re&J.F,xe=re&J.G,ie=re&J.S,ve=re&J.P,De=re&J.B,Oe=xe?$:ie?$[ue]||($[ue]={}):($[ue]||{})[W],Le=xe?U:U[ue]||(U[ue]={}),Ye=Le[W]||(Le[W]={}),tt,pt,_t,Pt;xe&&(te=ue);for(tt in te)pt=!se&&Oe&&Oe[tt]!==void 0,_t=(pt?Oe:te)[tt],Pt=De&&pt?j(_t,$):ve&&typeof _t=="function"?j(Function.call,_t):_t,Oe&&K(Oe,tt,_t,re&J.U),Le[tt]!=_t&&de(Le,tt,Pt),ve&&Ye[tt]!=_t&&(Ye[tt]=_t)};$.core=U,J.F=1,J.G=2,J.S=4,J.P=8,J.B=16,J.W=32,J.U=64,J.R=128,ne.exports=J},"./node_modules/core-js/modules/_fails-is-regexp.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_wks.js")("match");ne.exports=function(U){var de=/./;try{"/./"[U](de)}catch{try{return de[$]=!1,!"/./"[U](de)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(ne,ce){ne.exports=function(M){try{return!!M()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(ne,ce,M){M("./node_modules/core-js/modules/es6.regexp.exec.js");var $=M("./node_modules/core-js/modules/_redefine.js"),U=M("./node_modules/core-js/modules/_hide.js"),de=M("./node_modules/core-js/modules/_fails.js"),K=M("./node_modules/core-js/modules/_defined.js"),j=M("./node_modules/core-js/modules/_wks.js"),W=M("./node_modules/core-js/modules/_regexp-exec.js"),J=j("species"),re=!de(function(){var te=/./;return te.exec=function(){var se=[];return se.groups={a:"7"},se},"".replace(te,"$<a>")!=="7"}),ue=function(){var te=/(?:)/,se=te.exec;te.exec=function(){return se.apply(this,arguments)};var xe="ab".split(te);return xe.length===2&&xe[0]==="a"&&xe[1]==="b"}();ne.exports=function(te,se,xe){var ie=j(te),ve=!de(function(){var pt={};return pt[ie]=function(){return 7},""[te](pt)!=7}),De=ve?!de(function(){var pt=!1,_t=/a/;return _t.exec=function(){return pt=!0,null},te==="split"&&(_t.constructor={},_t.constructor[J]=function(){return _t}),_t[ie](""),!pt}):void 0;if(!ve||!De||te==="replace"&&!re||te==="split"&&!ue){var Oe=/./[ie],Le=xe(K,ie,""[te],function(_t,Pt,Wt,Tt,kt){return Pt.exec===W?ve&&!kt?{done:!0,value:Oe.call(Pt,Wt,Tt)}:{done:!0,value:_t.call(Wt,Pt,Tt)}:{done:!1}}),Ye=Le[0],tt=Le[1];$(String.prototype,te,Ye),U(RegExp.prototype,ie,se==2?function(pt,_t){return tt.call(pt,this,_t)}:function(pt){return tt.call(pt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_an-object.js");ne.exports=function(){var U=$(this),de="";return U.global&&(de+="g"),U.ignoreCase&&(de+="i"),U.multiline&&(de+="m"),U.unicode&&(de+="u"),U.sticky&&(de+="y"),de}},"./node_modules/core-js/modules/_function-to-string.js":function(ne,ce,M){ne.exports=M("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(ne,ce){var M=ne.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=M)},"./node_modules/core-js/modules/_has.js":function(ne,ce){var M={}.hasOwnProperty;ne.exports=function($,U){return M.call($,U)}},"./node_modules/core-js/modules/_hide.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-dp.js"),U=M("./node_modules/core-js/modules/_property-desc.js");ne.exports=M("./node_modules/core-js/modules/_descriptors.js")?function(de,K,j){return $.f(de,K,U(1,j))}:function(de,K,j){return de[K]=j,de}},"./node_modules/core-js/modules/_html.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_global.js").document;ne.exports=$&&$.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(ne,ce,M){ne.exports=!M("./node_modules/core-js/modules/_descriptors.js")&&!M("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(M("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(ne,ce){ne.exports=function(M,$,U){var de=U===void 0;switch($.length){case 0:return de?M():M.call(U);case 1:return de?M($[0]):M.call(U,$[0]);case 2:return de?M($[0],$[1]):M.call(U,$[0],$[1]);case 3:return de?M($[0],$[1],$[2]):M.call(U,$[0],$[1],$[2]);case 4:return de?M($[0],$[1],$[2],$[3]):M.call(U,$[0],$[1],$[2],$[3])}return M.apply(U,$)}},"./node_modules/core-js/modules/_iobject.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_cof.js");ne.exports=Object("z").propertyIsEnumerable(0)?Object:function(U){return $(U)=="String"?U.split(""):Object(U)}},"./node_modules/core-js/modules/_is-array-iter.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_iterators.js"),U=M("./node_modules/core-js/modules/_wks.js")("iterator"),de=Array.prototype;ne.exports=function(K){return K!==void 0&&($.Array===K||de[U]===K)}},"./node_modules/core-js/modules/_is-array.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_cof.js");ne.exports=Array.isArray||function(de){return $(de)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(ne,ce){ne.exports=function(M){return typeof M=="object"?M!==null:typeof M=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_is-object.js"),U=M("./node_modules/core-js/modules/_cof.js"),de=M("./node_modules/core-js/modules/_wks.js")("match");ne.exports=function(K){var j;return $(K)&&((j=K[de])!==void 0?!!j:U(K)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_an-object.js");ne.exports=function(U,de,K,j){try{return j?de($(K)[0],K[1]):de(K)}catch(J){var W=U.return;throw W!==void 0&&$(W.call(U)),J}}},"./node_modules/core-js/modules/_iter-create.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-create.js"),U=M("./node_modules/core-js/modules/_property-desc.js"),de=M("./node_modules/core-js/modules/_set-to-string-tag.js"),K={};M("./node_modules/core-js/modules/_hide.js")(K,M("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),ne.exports=function(j,W,J){j.prototype=$(K,{next:U(1,J)}),de(j,W+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_library.js"),U=M("./node_modules/core-js/modules/_export.js"),de=M("./node_modules/core-js/modules/_redefine.js"),K=M("./node_modules/core-js/modules/_hide.js"),j=M("./node_modules/core-js/modules/_iterators.js"),W=M("./node_modules/core-js/modules/_iter-create.js"),J=M("./node_modules/core-js/modules/_set-to-string-tag.js"),re=M("./node_modules/core-js/modules/_object-gpo.js"),ue=M("./node_modules/core-js/modules/_wks.js")("iterator"),te=!([].keys&&"next"in[].keys()),se="@@iterator",xe="keys",ie="values",ve=function(){return this};ne.exports=function(De,Oe,Le,Ye,tt,pt,_t){W(Le,Oe,Ye);var Pt=function(G){if(!te&&G in Yt)return Yt[G];switch(G){case xe:return function(){return new Le(this,G)};case ie:return function(){return new Le(this,G)}}return function(){return new Le(this,G)}},Wt=Oe+" Iterator",Tt=tt==ie,kt=!1,Yt=De.prototype,un=Yt[ue]||Yt[se]||tt&&Yt[tt],In=un||Pt(tt),at=tt?Tt?Pt("entries"):In:void 0,kn=Oe=="Array"&&Yt.entries||un,cn,en,ze;if(kn&&(ze=re(kn.call(new De)),ze!==Object.prototype&&ze.next&&(J(ze,Wt,!0),!$&&typeof ze[ue]!="function"&&K(ze,ue,ve))),Tt&&un&&un.name!==ie&&(kt=!0,In=function(){return un.call(this)}),(!$||_t)&&(te||kt||!Yt[ue])&&K(Yt,ue,In),j[Oe]=In,j[Wt]=ve,tt)if(cn={values:Tt?In:Pt(ie),keys:pt?In:Pt(xe),entries:at},_t)for(en in cn)en in Yt||de(Yt,en,cn[en]);else U(U.P+U.F*(te||kt),Oe,cn);return cn}},"./node_modules/core-js/modules/_iter-detect.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_wks.js")("iterator"),U=!1;try{var de=[7][$]();de.return=function(){U=!0},Array.from(de,function(){throw 2})}catch{}ne.exports=function(K,j){if(!j&&!U)return!1;var W=!1;try{var J=[7],re=J[$]();re.next=function(){return{done:W=!0}},J[$]=function(){return re},K(J)}catch{}return W}},"./node_modules/core-js/modules/_iter-step.js":function(ne,ce){ne.exports=function(M,$){return{value:$,done:!!M}}},"./node_modules/core-js/modules/_iterators.js":function(ne,ce){ne.exports={}},"./node_modules/core-js/modules/_library.js":function(ne,ce){ne.exports=!1},"./node_modules/core-js/modules/_meta.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_uid.js")("meta"),U=M("./node_modules/core-js/modules/_is-object.js"),de=M("./node_modules/core-js/modules/_has.js"),K=M("./node_modules/core-js/modules/_object-dp.js").f,j=0,W=Object.isExtensible||function(){return!0},J=!M("./node_modules/core-js/modules/_fails.js")(function(){return W(Object.preventExtensions({}))}),re=function(ie){K(ie,$,{value:{i:"O"+ ++j,w:{}}})},ue=function(ie,ve){if(!U(ie))return typeof ie=="symbol"?ie:(typeof ie=="string"?"S":"P")+ie;if(!de(ie,$)){if(!W(ie))return"F";if(!ve)return"E";re(ie)}return ie[$].i},te=function(ie,ve){if(!de(ie,$)){if(!W(ie))return!0;if(!ve)return!1;re(ie)}return ie[$].w},se=function(ie){return J&&xe.NEED&&W(ie)&&!de(ie,$)&&re(ie),ie},xe=ne.exports={KEY:$,NEED:!1,fastKey:ue,getWeak:te,onFreeze:se}},"./node_modules/core-js/modules/_object-create.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_an-object.js"),U=M("./node_modules/core-js/modules/_object-dps.js"),de=M("./node_modules/core-js/modules/_enum-bug-keys.js"),K=M("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),j=function(){},W="prototype",J=function(){var re=M("./node_modules/core-js/modules/_dom-create.js")("iframe"),ue=de.length,te="<",se=">",xe;for(re.style.display="none",M("./node_modules/core-js/modules/_html.js").appendChild(re),re.src="javascript:",xe=re.contentWindow.document,xe.open(),xe.write(te+"script"+se+"document.F=Object"+te+"/script"+se),xe.close(),J=xe.F;ue--;)delete J[W][de[ue]];return J()};ne.exports=Object.create||function(ue,te){var se;return ue!==null?(j[W]=$(ue),se=new j,j[W]=null,se[K]=ue):se=J(),te===void 0?se:U(se,te)}},"./node_modules/core-js/modules/_object-dp.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_an-object.js"),U=M("./node_modules/core-js/modules/_ie8-dom-define.js"),de=M("./node_modules/core-js/modules/_to-primitive.js"),K=Object.defineProperty;ce.f=M("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(W,J,re){if($(W),J=de(J,!0),$(re),U)try{return K(W,J,re)}catch{}if("get"in re||"set"in re)throw TypeError("Accessors not supported!");return"value"in re&&(W[J]=re.value),W}},"./node_modules/core-js/modules/_object-dps.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-dp.js"),U=M("./node_modules/core-js/modules/_an-object.js"),de=M("./node_modules/core-js/modules/_object-keys.js");ne.exports=M("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(j,W){U(j);for(var J=de(W),re=J.length,ue=0,te;re>ue;)$.f(j,te=J[ue++],W[te]);return j}},"./node_modules/core-js/modules/_object-gopd.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-pie.js"),U=M("./node_modules/core-js/modules/_property-desc.js"),de=M("./node_modules/core-js/modules/_to-iobject.js"),K=M("./node_modules/core-js/modules/_to-primitive.js"),j=M("./node_modules/core-js/modules/_has.js"),W=M("./node_modules/core-js/modules/_ie8-dom-define.js"),J=Object.getOwnPropertyDescriptor;ce.f=M("./node_modules/core-js/modules/_descriptors.js")?J:function(ue,te){if(ue=de(ue),te=K(te,!0),W)try{return J(ue,te)}catch{}if(j(ue,te))return U(!$.f.call(ue,te),ue[te])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_to-iobject.js"),U=M("./node_modules/core-js/modules/_object-gopn.js").f,de={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],j=function(W){try{return U(W)}catch{return K.slice()}};ne.exports.f=function(J){return K&&de.call(J)=="[object Window]"?j(J):U($(J))}},"./node_modules/core-js/modules/_object-gopn.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-keys-internal.js"),U=M("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");ce.f=Object.getOwnPropertyNames||function(K){return $(K,U)}},"./node_modules/core-js/modules/_object-gops.js":function(ne,ce){ce.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_has.js"),U=M("./node_modules/core-js/modules/_to-object.js"),de=M("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),K=Object.prototype;ne.exports=Object.getPrototypeOf||function(j){return j=U(j),$(j,de)?j[de]:typeof j.constructor=="function"&&j instanceof j.constructor?j.constructor.prototype:j instanceof Object?K:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_has.js"),U=M("./node_modules/core-js/modules/_to-iobject.js"),de=M("./node_modules/core-js/modules/_array-includes.js")(!1),K=M("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");ne.exports=function(j,W){var J=U(j),re=0,ue=[],te;for(te in J)te!=K&&$(J,te)&&ue.push(te);for(;W.length>re;)$(J,te=W[re++])&&(~de(ue,te)||ue.push(te));return ue}},"./node_modules/core-js/modules/_object-keys.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-keys-internal.js"),U=M("./node_modules/core-js/modules/_enum-bug-keys.js");ne.exports=Object.keys||function(K){return $(K,U)}},"./node_modules/core-js/modules/_object-pie.js":function(ne,ce){ce.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-gopn.js"),U=M("./node_modules/core-js/modules/_object-gops.js"),de=M("./node_modules/core-js/modules/_an-object.js"),K=M("./node_modules/core-js/modules/_global.js").Reflect;ne.exports=K&&K.ownKeys||function(W){var J=$.f(de(W)),re=U.f;return re?J.concat(re(W)):J}},"./node_modules/core-js/modules/_property-desc.js":function(ne,ce){ne.exports=function(M,$){return{enumerable:!(M&1),configurable:!(M&2),writable:!(M&4),value:$}}},"./node_modules/core-js/modules/_redefine.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_global.js"),U=M("./node_modules/core-js/modules/_hide.js"),de=M("./node_modules/core-js/modules/_has.js"),K=M("./node_modules/core-js/modules/_uid.js")("src"),j=M("./node_modules/core-js/modules/_function-to-string.js"),W="toString",J=(""+j).split(W);M("./node_modules/core-js/modules/_core.js").inspectSource=function(re){return j.call(re)},(ne.exports=function(re,ue,te,se){var xe=typeof te=="function";xe&&(de(te,"name")||U(te,"name",ue)),re[ue]!==te&&(xe&&(de(te,K)||U(te,K,re[ue]?""+re[ue]:J.join(String(ue)))),re===$?re[ue]=te:se?re[ue]?re[ue]=te:U(re,ue,te):(delete re[ue],U(re,ue,te)))})(Function.prototype,W,function(){return typeof this=="function"&&this[K]||j.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_classof.js"),U=RegExp.prototype.exec;ne.exports=function(de,K){var j=de.exec;if(typeof j=="function"){var W=j.call(de,K);if(typeof W!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return W}if($(de)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return U.call(de,K)}},"./node_modules/core-js/modules/_regexp-exec.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_flags.js"),U=RegExp.prototype.exec,de=String.prototype.replace,K=U,j="lastIndex",W=function(){var ue=/a/,te=/b*/g;return U.call(ue,"a"),U.call(te,"a"),ue[j]!==0||te[j]!==0}(),J=/()??/.exec("")[1]!==void 0,re=W||J;re&&(K=function(te){var se=this,xe,ie,ve,De;return J&&(ie=new RegExp("^"+se.source+"$(?!\\s)",$.call(se))),W&&(xe=se[j]),ve=U.call(se,te),W&&ve&&(se[j]=se.global?ve.index+ve[0].length:xe),J&&ve&&ve.length>1&&de.call(ve[0],ie,function(){for(De=1;De<arguments.length-2;De++)arguments[De]===void 0&&(ve[De]=void 0)}),ve}),ne.exports=K},"./node_modules/core-js/modules/_set-to-string-tag.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-dp.js").f,U=M("./node_modules/core-js/modules/_has.js"),de=M("./node_modules/core-js/modules/_wks.js")("toStringTag");ne.exports=function(K,j,W){K&&!U(K=W?K:K.prototype,de)&&$(K,de,{configurable:!0,value:j})}},"./node_modules/core-js/modules/_shared-key.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_shared.js")("keys"),U=M("./node_modules/core-js/modules/_uid.js");ne.exports=function(de){return $[de]||($[de]=U(de))}},"./node_modules/core-js/modules/_shared.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_core.js"),U=M("./node_modules/core-js/modules/_global.js"),de="__core-js_shared__",K=U[de]||(U[de]={});(ne.exports=function(j,W){return K[j]||(K[j]=W!==void 0?W:{})})("versions",[]).push({version:$.version,mode:M("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_an-object.js"),U=M("./node_modules/core-js/modules/_a-function.js"),de=M("./node_modules/core-js/modules/_wks.js")("species");ne.exports=function(K,j){var W=$(K).constructor,J;return W===void 0||(J=$(W)[de])==null?j:U(J)}},"./node_modules/core-js/modules/_string-at.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_to-integer.js"),U=M("./node_modules/core-js/modules/_defined.js");ne.exports=function(de){return function(K,j){var W=String(U(K)),J=$(j),re=W.length,ue,te;return J<0||J>=re?de?"":void 0:(ue=W.charCodeAt(J),ue<55296||ue>56319||J+1===re||(te=W.charCodeAt(J+1))<56320||te>57343?de?W.charAt(J):ue:de?W.slice(J,J+2):(ue-55296<<10)+(te-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_is-regexp.js"),U=M("./node_modules/core-js/modules/_defined.js");ne.exports=function(de,K,j){if($(K))throw TypeError("String#"+j+" doesn't accept regex!");return String(U(de))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_to-integer.js"),U=Math.max,de=Math.min;ne.exports=function(K,j){return K=$(K),K<0?U(K+j,0):de(K,j)}},"./node_modules/core-js/modules/_to-integer.js":function(ne,ce){var M=Math.ceil,$=Math.floor;ne.exports=function(U){return isNaN(U=+U)?0:(U>0?$:M)(U)}},"./node_modules/core-js/modules/_to-iobject.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_iobject.js"),U=M("./node_modules/core-js/modules/_defined.js");ne.exports=function(de){return $(U(de))}},"./node_modules/core-js/modules/_to-length.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_to-integer.js"),U=Math.min;ne.exports=function(de){return de>0?U($(de),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_defined.js");ne.exports=function(U){return Object($(U))}},"./node_modules/core-js/modules/_to-primitive.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_is-object.js");ne.exports=function(U,de){if(!$(U))return U;var K,j;if(de&&typeof(K=U.toString)=="function"&&!$(j=K.call(U))||typeof(K=U.valueOf)=="function"&&!$(j=K.call(U))||!de&&typeof(K=U.toString)=="function"&&!$(j=K.call(U)))return j;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(ne,ce){var M=0,$=Math.random();ne.exports=function(U){return"Symbol(".concat(U===void 0?"":U,")_",(++M+$).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_global.js"),U=M("./node_modules/core-js/modules/_core.js"),de=M("./node_modules/core-js/modules/_library.js"),K=M("./node_modules/core-js/modules/_wks-ext.js"),j=M("./node_modules/core-js/modules/_object-dp.js").f;ne.exports=function(W){var J=U.Symbol||(U.Symbol=de?{}:$.Symbol||{});W.charAt(0)!="_"&&!(W in J)&&j(J,W,{value:K.f(W)})}},"./node_modules/core-js/modules/_wks-ext.js":function(ne,ce,M){ce.f=M("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_shared.js")("wks"),U=M("./node_modules/core-js/modules/_uid.js"),de=M("./node_modules/core-js/modules/_global.js").Symbol,K=typeof de=="function",j=ne.exports=function(W){return $[W]||($[W]=K&&de[W]||(K?de:U)("Symbol."+W))};j.store=$},"./node_modules/core-js/modules/core.get-iterator-method.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_classof.js"),U=M("./node_modules/core-js/modules/_wks.js")("iterator"),de=M("./node_modules/core-js/modules/_iterators.js");ne.exports=M("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(K){if(K!=null)return K[U]||K["@@iterator"]||de[$(K)]}},"./node_modules/core-js/modules/es6.array.from.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_ctx.js"),U=M("./node_modules/core-js/modules/_export.js"),de=M("./node_modules/core-js/modules/_to-object.js"),K=M("./node_modules/core-js/modules/_iter-call.js"),j=M("./node_modules/core-js/modules/_is-array-iter.js"),W=M("./node_modules/core-js/modules/_to-length.js"),J=M("./node_modules/core-js/modules/_create-property.js"),re=M("./node_modules/core-js/modules/core.get-iterator-method.js");U(U.S+U.F*!M("./node_modules/core-js/modules/_iter-detect.js")(function(ue){Array.from(ue)}),"Array",{from:function(te){var se=de(te),xe=typeof this=="function"?this:Array,ie=arguments.length,ve=ie>1?arguments[1]:void 0,De=ve!==void 0,Oe=0,Le=re(se),Ye,tt,pt,_t;if(De&&(ve=$(ve,ie>2?arguments[2]:void 0,2)),Le!=null&&!(xe==Array&&j(Le)))for(_t=Le.call(se),tt=new xe;!(pt=_t.next()).done;Oe++)J(tt,Oe,De?K(_t,ve,[pt.value,Oe],!0):pt.value);else for(Ye=W(se.length),tt=new xe(Ye);Ye>Oe;Oe++)J(tt,Oe,De?ve(se[Oe],Oe):se[Oe]);return tt.length=Oe,tt}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_add-to-unscopables.js"),U=M("./node_modules/core-js/modules/_iter-step.js"),de=M("./node_modules/core-js/modules/_iterators.js"),K=M("./node_modules/core-js/modules/_to-iobject.js");ne.exports=M("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(j,W){this._t=K(j),this._i=0,this._k=W},function(){var j=this._t,W=this._k,J=this._i++;return!j||J>=j.length?(this._t=void 0,U(1)):W=="keys"?U(0,J):W=="values"?U(0,j[J]):U(0,[J,j[J]])},"values"),de.Arguments=de.Array,$("keys"),$("values"),$("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_export.js");$($.P,"Function",{bind:M("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_object-dp.js").f,U=Function.prototype,de=/^\s*function ([^ (]*)/,K="name";K in U||M("./node_modules/core-js/modules/_descriptors.js")&&$(U,K,{configurable:!0,get:function(){try{return(""+this).match(de)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_export.js"),U=M("./node_modules/core-js/modules/_global.js").isFinite;$($.S,"Number",{isFinite:function(K){return typeof K=="number"&&U(K)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_classof.js"),U={};U[M("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",U+""!="[object z]"&&M("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+$(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_regexp-exec.js");M("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:$!==/./.exec},{exec:$})},"./node_modules/core-js/modules/es6.regexp.split.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_is-regexp.js"),U=M("./node_modules/core-js/modules/_an-object.js"),de=M("./node_modules/core-js/modules/_species-constructor.js"),K=M("./node_modules/core-js/modules/_advance-string-index.js"),j=M("./node_modules/core-js/modules/_to-length.js"),W=M("./node_modules/core-js/modules/_regexp-exec-abstract.js"),J=M("./node_modules/core-js/modules/_regexp-exec.js"),re=M("./node_modules/core-js/modules/_fails.js"),ue=Math.min,te=[].push,se="split",xe="length",ie="lastIndex",ve=4294967295,De=!re(function(){});M("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Oe,Le,Ye,tt){var pt;return"abbc"[se](/(b)*/)[1]=="c"||"test"[se](/(?:)/,-1)[xe]!=4||"ab"[se](/(?:ab)*/)[xe]!=2||"."[se](/(.?)(.?)/)[xe]!=4||"."[se](/()()/)[xe]>1||""[se](/.?/)[xe]?pt=function(_t,Pt){var Wt=String(this);if(_t===void 0&&Pt===0)return[];if(!$(_t))return Ye.call(Wt,_t,Pt);for(var Tt=[],kt=(_t.ignoreCase?"i":"")+(_t.multiline?"m":"")+(_t.unicode?"u":"")+(_t.sticky?"y":""),Yt=0,un=Pt===void 0?ve:Pt>>>0,In=new RegExp(_t.source,kt+"g"),at,kn,cn;(at=J.call(In,Wt))&&(kn=In[ie],!(kn>Yt&&(Tt.push(Wt.slice(Yt,at.index)),at[xe]>1&&at.index<Wt[xe]&&te.apply(Tt,at.slice(1)),cn=at[0][xe],Yt=kn,Tt[xe]>=un)));)In[ie]===at.index&&In[ie]++;return Yt===Wt[xe]?(cn||!In.test(""))&&Tt.push(""):Tt.push(Wt.slice(Yt)),Tt[xe]>un?Tt.slice(0,un):Tt}:"0"[se](void 0,0)[xe]?pt=function(_t,Pt){return _t===void 0&&Pt===0?[]:Ye.call(this,_t,Pt)}:pt=Ye,[function(Pt,Wt){var Tt=Oe(this),kt=Pt==null?void 0:Pt[Le];return kt!==void 0?kt.call(Pt,Tt,Wt):pt.call(String(Tt),Pt,Wt)},function(_t,Pt){var Wt=tt(pt,_t,this,Pt,pt!==Ye);if(Wt.done)return Wt.value;var Tt=U(_t),kt=String(this),Yt=de(Tt,RegExp),un=Tt.unicode,In=(Tt.ignoreCase?"i":"")+(Tt.multiline?"m":"")+(Tt.unicode?"u":"")+(De?"y":"g"),at=new Yt(De?Tt:"^(?:"+Tt.source+")",In),kn=Pt===void 0?ve:Pt>>>0;if(kn===0)return[];if(kt.length===0)return W(at,kt)===null?[kt]:[];for(var cn=0,en=0,ze=[];en<kt.length;){at.lastIndex=De?en:0;var G=W(at,De?kt:kt.slice(en)),H;if(G===null||(H=ue(j(at.lastIndex+(De?0:en)),kt.length))===cn)en=K(kt,en,un);else{if(ze.push(kt.slice(cn,en)),ze.length===kn)return ze;for(var Ce=1;Ce<=G.length-1;Ce++)if(ze.push(G[Ce]),ze.length===kn)return ze;en=cn=H}}return ze.push(kt.slice(cn)),ze}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_export.js"),U=M("./node_modules/core-js/modules/_string-context.js"),de="includes";$($.P+$.F*M("./node_modules/core-js/modules/_fails-is-regexp.js")(de),"String",{includes:function(j){return!!~U(this,j,de).indexOf(j,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_global.js"),U=M("./node_modules/core-js/modules/_has.js"),de=M("./node_modules/core-js/modules/_descriptors.js"),K=M("./node_modules/core-js/modules/_export.js"),j=M("./node_modules/core-js/modules/_redefine.js"),W=M("./node_modules/core-js/modules/_meta.js").KEY,J=M("./node_modules/core-js/modules/_fails.js"),re=M("./node_modules/core-js/modules/_shared.js"),ue=M("./node_modules/core-js/modules/_set-to-string-tag.js"),te=M("./node_modules/core-js/modules/_uid.js"),se=M("./node_modules/core-js/modules/_wks.js"),xe=M("./node_modules/core-js/modules/_wks-ext.js"),ie=M("./node_modules/core-js/modules/_wks-define.js"),ve=M("./node_modules/core-js/modules/_enum-keys.js"),De=M("./node_modules/core-js/modules/_is-array.js"),Oe=M("./node_modules/core-js/modules/_an-object.js"),Le=M("./node_modules/core-js/modules/_is-object.js"),Ye=M("./node_modules/core-js/modules/_to-object.js"),tt=M("./node_modules/core-js/modules/_to-iobject.js"),pt=M("./node_modules/core-js/modules/_to-primitive.js"),_t=M("./node_modules/core-js/modules/_property-desc.js"),Pt=M("./node_modules/core-js/modules/_object-create.js"),Wt=M("./node_modules/core-js/modules/_object-gopn-ext.js"),Tt=M("./node_modules/core-js/modules/_object-gopd.js"),kt=M("./node_modules/core-js/modules/_object-gops.js"),Yt=M("./node_modules/core-js/modules/_object-dp.js"),un=M("./node_modules/core-js/modules/_object-keys.js"),In=Tt.f,at=Yt.f,kn=Wt.f,cn=$.Symbol,en=$.JSON,ze=en&&en.stringify,G="prototype",H=se("_hidden"),Ce=se("toPrimitive"),rt={}.propertyIsEnumerable,ct=re("symbol-registry"),Et=re("symbols"),ye=re("op-symbols"),z=Object[G],q=typeof cn=="function"&&!!kt.f,Re=$.QObject,Je=!Re||!Re[G]||!Re[G].findChild,ft=de&&J(function(){return Pt(at({},"a",{get:function(){return at(this,"a",{value:7}).a}})).a!=7})?function(je,Be,He){var nt=In(z,Be);nt&&delete z[Be],at(je,Be,He),nt&&je!==z&&at(z,Be,nt)}:at,Qe=function(je){var Be=Et[je]=Pt(cn[G]);return Be._k=je,Be},jt=q&&typeof cn.iterator=="symbol"?function(je){return typeof je=="symbol"}:function(je){return je instanceof cn},Bt=function(Be,He,nt){return Be===z&&Bt(ye,He,nt),Oe(Be),He=pt(He,!0),Oe(nt),U(Et,He)?(nt.enumerable?(U(Be,H)&&Be[H][He]&&(Be[H][He]=!1),nt=Pt(nt,{enumerable:_t(0,!1)})):(U(Be,H)||at(Be,H,_t(1,{})),Be[H][He]=!0),ft(Be,He,nt)):at(Be,He,nt)},zn=function(Be,He){Oe(Be);for(var nt=ve(He=tt(He)),Ze=0,yt=nt.length,It;yt>Ze;)Bt(Be,It=nt[Ze++],He[It]);return Be},Zn=function(Be,He){return He===void 0?Pt(Be):zn(Pt(Be),He)},qt=function(Be){var He=rt.call(this,Be=pt(Be,!0));return this===z&&U(Et,Be)&&!U(ye,Be)?!1:He||!U(this,Be)||!U(Et,Be)||U(this,H)&&this[H][Be]?He:!0},Or=function(Be,He){if(Be=tt(Be),He=pt(He,!0),!(Be===z&&U(Et,He)&&!U(ye,He))){var nt=In(Be,He);return nt&&U(Et,He)&&!(U(Be,H)&&Be[H][He])&&(nt.enumerable=!0),nt}},qr=function(Be){for(var He=kn(tt(Be)),nt=[],Ze=0,yt;He.length>Ze;)!U(Et,yt=He[Ze++])&&yt!=H&&yt!=W&&nt.push(yt);return nt},Xr=function(Be){for(var He=Be===z,nt=kn(He?ye:tt(Be)),Ze=[],yt=0,It;nt.length>yt;)U(Et,It=nt[yt++])&&(!He||U(z,It))&&Ze.push(Et[It]);return Ze};q||(cn=function(){if(this instanceof cn)throw TypeError("Symbol is not a constructor!");var Be=te(arguments.length>0?arguments[0]:void 0),He=function(nt){this===z&&He.call(ye,nt),U(this,H)&&U(this[H],Be)&&(this[H][Be]=!1),ft(this,Be,_t(1,nt))};return de&&Je&&ft(z,Be,{configurable:!0,set:He}),Qe(Be)},j(cn[G],"toString",function(){return this._k}),Tt.f=Or,Yt.f=Bt,M("./node_modules/core-js/modules/_object-gopn.js").f=Wt.f=qr,M("./node_modules/core-js/modules/_object-pie.js").f=qt,kt.f=Xr,de&&!M("./node_modules/core-js/modules/_library.js")&&j(z,"propertyIsEnumerable",qt,!0),xe.f=function(je){return Qe(se(je))}),K(K.G+K.W+K.F*!q,{Symbol:cn});for(var Tr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ue=0;Tr.length>Ue;)se(Tr[Ue++]);for(var me=un(se.store),pe=0;me.length>pe;)ie(me[pe++]);K(K.S+K.F*!q,"Symbol",{for:function(je){return U(ct,je+="")?ct[je]:ct[je]=cn(je)},keyFor:function(Be){if(!jt(Be))throw TypeError(Be+" is not a symbol!");for(var He in ct)if(ct[He]===Be)return He},useSetter:function(){Je=!0},useSimple:function(){Je=!1}}),K(K.S+K.F*!q,"Object",{create:Zn,defineProperty:Bt,defineProperties:zn,getOwnPropertyDescriptor:Or,getOwnPropertyNames:qr,getOwnPropertySymbols:Xr});var Pe=J(function(){kt.f(1)});K(K.S+K.F*Pe,"Object",{getOwnPropertySymbols:function(Be){return kt.f(Ye(Be))}}),en&&K(K.S+K.F*(!q||J(function(){var je=cn();return ze([je])!="[null]"||ze({a:je})!="{}"||ze(Object(je))!="{}"})),"JSON",{stringify:function(Be){for(var He=[Be],nt=1,Ze,yt;arguments.length>nt;)He.push(arguments[nt++]);if(yt=Ze=He[1],!(!Le(Ze)&&Be===void 0||jt(Be)))return De(Ze)||(Ze=function(It,gt){if(typeof yt=="function"&&(gt=yt.call(this,It,gt)),!jt(gt))return gt}),He[1]=Ze,ze.apply(en,He)}}),cn[G][Ce]||M("./node_modules/core-js/modules/_hide.js")(cn[G],Ce,cn[G].valueOf),ue(cn,"Symbol"),ue(Math,"Math",!0),ue($.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_export.js"),U=M("./node_modules/core-js/modules/_array-includes.js")(!0);$($.P,"Array",{includes:function(K){return U(this,K,arguments.length>1?arguments[1]:void 0)}}),M("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(ne,ce,M){var $=M("./node_modules/core-js/modules/_export.js"),U=M("./node_modules/core-js/modules/_own-keys.js"),de=M("./node_modules/core-js/modules/_to-iobject.js"),K=M("./node_modules/core-js/modules/_object-gopd.js"),j=M("./node_modules/core-js/modules/_create-property.js");$($.S,"Object",{getOwnPropertyDescriptors:function(J){for(var re=de(J),ue=K.f,te=U(re),se={},xe=0,ie,ve;te.length>xe;)ve=ue(re,ie=te[xe++]),ve!==void 0&&j(se,ie,ve);return se}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(ne,ce,M){M("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(ne,ce,M){for(var $=M("./node_modules/core-js/modules/es6.array.iterator.js"),U=M("./node_modules/core-js/modules/_object-keys.js"),de=M("./node_modules/core-js/modules/_redefine.js"),K=M("./node_modules/core-js/modules/_global.js"),j=M("./node_modules/core-js/modules/_hide.js"),W=M("./node_modules/core-js/modules/_iterators.js"),J=M("./node_modules/core-js/modules/_wks.js"),re=J("iterator"),ue=J("toStringTag"),te=W.Array,se={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},xe=U(se),ie=0;ie<xe.length;ie++){var ve=xe[ie],De=se[ve],Oe=K[ve],Le=Oe&&Oe.prototype,Ye;if(Le&&(Le[re]||j(Le,re,te),Le[ue]||j(Le,ue,ve),W[ve]=te,De))for(Ye in $)Le[Ye]||de(Le,Ye,$[Ye],!0)}},"./node_modules/crypt/crypt.js":function(ne,ce){(function(){var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$={rotl:function(U,de){return U<<de|U>>>32-de},rotr:function(U,de){return U<<32-de|U>>>de},endian:function(U){if(U.constructor==Number)return $.rotl(U,8)&16711935|$.rotl(U,24)&4278255360;for(var de=0;de<U.length;de++)U[de]=$.endian(U[de]);return U},randomBytes:function(U){for(var de=[];U>0;U--)de.push(Math.floor(Math.random()*256));return de},bytesToWords:function(U){for(var de=[],K=0,j=0;K<U.length;K++,j+=8)de[j>>>5]|=U[K]<<24-j%32;return de},wordsToBytes:function(U){for(var de=[],K=0;K<U.length*32;K+=8)de.push(U[K>>>5]>>>24-K%32&255);return de},bytesToHex:function(U){for(var de=[],K=0;K<U.length;K++)de.push((U[K]>>>4).toString(16)),de.push((U[K]&15).toString(16));return de.join("")},hexToBytes:function(U){for(var de=[],K=0;K<U.length;K+=2)de.push(parseInt(U.substr(K,2),16));return de},bytesToBase64:function(U){for(var de=[],K=0;K<U.length;K+=3)for(var j=U[K]<<16|U[K+1]<<8|U[K+2],W=0;W<4;W++)K*8+W*6<=U.length*8?de.push(M.charAt(j>>>6*(3-W)&63)):de.push("=");return de.join("")},base64ToBytes:function(U){U=U.replace(/[^A-Z0-9+\/]/ig,"");for(var de=[],K=0,j=0;K<U.length;j=++K%4)j!=0&&de.push((M.indexOf(U.charAt(K-1))&Math.pow(2,-2*j+8)-1)<<j*2|M.indexOf(U.charAt(K))>>>6-j*2);return de}};ne.exports=$})()},"./node_modules/is-buffer/index.js":function(ne,ce){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ne.exports=function(U){return U!=null&&(M(U)||$(U)||!!U._isBuffer)};function M(U){return!!U.constructor&&typeof U.constructor.isBuffer=="function"&&U.constructor.isBuffer(U)}function $(U){return typeof U.readFloatLE=="function"&&typeof U.slice=="function"&&M(U.slice(0,0))}},"./node_modules/md5/md5.js":function(ne,ce,M){(function(){var $=M("./node_modules/crypt/crypt.js"),U=M("./node_modules/charenc/charenc.js").utf8,de=M("./node_modules/is-buffer/index.js"),K=M("./node_modules/charenc/charenc.js").bin,j=function(W,J){W.constructor==String?J&&J.encoding==="binary"?W=K.stringToBytes(W):W=U.stringToBytes(W):de(W)?W=Array.prototype.slice.call(W,0):!Array.isArray(W)&&W.constructor!==Uint8Array&&(W=W.toString());for(var re=$.bytesToWords(W),ue=W.length*8,te=1732584193,se=-271733879,xe=-1732584194,ie=271733878,ve=0;ve<re.length;ve++)re[ve]=(re[ve]<<8|re[ve]>>>24)&16711935|(re[ve]<<24|re[ve]>>>8)&4278255360;re[ue>>>5]|=128<<ue%32,re[(ue+64>>>9<<4)+14]=ue;for(var De=j._ff,Oe=j._gg,Le=j._hh,Ye=j._ii,ve=0;ve<re.length;ve+=16){var tt=te,pt=se,_t=xe,Pt=ie;te=De(te,se,xe,ie,re[ve+0],7,-680876936),ie=De(ie,te,se,xe,re[ve+1],12,-389564586),xe=De(xe,ie,te,se,re[ve+2],17,606105819),se=De(se,xe,ie,te,re[ve+3],22,-1044525330),te=De(te,se,xe,ie,re[ve+4],7,-176418897),ie=De(ie,te,se,xe,re[ve+5],12,1200080426),xe=De(xe,ie,te,se,re[ve+6],17,-1473231341),se=De(se,xe,ie,te,re[ve+7],22,-45705983),te=De(te,se,xe,ie,re[ve+8],7,1770035416),ie=De(ie,te,se,xe,re[ve+9],12,-1958414417),xe=De(xe,ie,te,se,re[ve+10],17,-42063),se=De(se,xe,ie,te,re[ve+11],22,-1990404162),te=De(te,se,xe,ie,re[ve+12],7,1804603682),ie=De(ie,te,se,xe,re[ve+13],12,-40341101),xe=De(xe,ie,te,se,re[ve+14],17,-1502002290),se=De(se,xe,ie,te,re[ve+15],22,1236535329),te=Oe(te,se,xe,ie,re[ve+1],5,-165796510),ie=Oe(ie,te,se,xe,re[ve+6],9,-1069501632),xe=Oe(xe,ie,te,se,re[ve+11],14,643717713),se=Oe(se,xe,ie,te,re[ve+0],20,-373897302),te=Oe(te,se,xe,ie,re[ve+5],5,-701558691),ie=Oe(ie,te,se,xe,re[ve+10],9,38016083),xe=Oe(xe,ie,te,se,re[ve+15],14,-660478335),se=Oe(se,xe,ie,te,re[ve+4],20,-405537848),te=Oe(te,se,xe,ie,re[ve+9],5,568446438),ie=Oe(ie,te,se,xe,re[ve+14],9,-1019803690),xe=Oe(xe,ie,te,se,re[ve+3],14,-187363961),se=Oe(se,xe,ie,te,re[ve+8],20,1163531501),te=Oe(te,se,xe,ie,re[ve+13],5,-1444681467),ie=Oe(ie,te,se,xe,re[ve+2],9,-51403784),xe=Oe(xe,ie,te,se,re[ve+7],14,1735328473),se=Oe(se,xe,ie,te,re[ve+12],20,-1926607734),te=Le(te,se,xe,ie,re[ve+5],4,-378558),ie=Le(ie,te,se,xe,re[ve+8],11,-2022574463),xe=Le(xe,ie,te,se,re[ve+11],16,1839030562),se=Le(se,xe,ie,te,re[ve+14],23,-35309556),te=Le(te,se,xe,ie,re[ve+1],4,-1530992060),ie=Le(ie,te,se,xe,re[ve+4],11,1272893353),xe=Le(xe,ie,te,se,re[ve+7],16,-155497632),se=Le(se,xe,ie,te,re[ve+10],23,-1094730640),te=Le(te,se,xe,ie,re[ve+13],4,681279174),ie=Le(ie,te,se,xe,re[ve+0],11,-358537222),xe=Le(xe,ie,te,se,re[ve+3],16,-722521979),se=Le(se,xe,ie,te,re[ve+6],23,76029189),te=Le(te,se,xe,ie,re[ve+9],4,-640364487),ie=Le(ie,te,se,xe,re[ve+12],11,-421815835),xe=Le(xe,ie,te,se,re[ve+15],16,530742520),se=Le(se,xe,ie,te,re[ve+2],23,-995338651),te=Ye(te,se,xe,ie,re[ve+0],6,-198630844),ie=Ye(ie,te,se,xe,re[ve+7],10,1126891415),xe=Ye(xe,ie,te,se,re[ve+14],15,-1416354905),se=Ye(se,xe,ie,te,re[ve+5],21,-57434055),te=Ye(te,se,xe,ie,re[ve+12],6,1700485571),ie=Ye(ie,te,se,xe,re[ve+3],10,-1894986606),xe=Ye(xe,ie,te,se,re[ve+10],15,-1051523),se=Ye(se,xe,ie,te,re[ve+1],21,-2054922799),te=Ye(te,se,xe,ie,re[ve+8],6,1873313359),ie=Ye(ie,te,se,xe,re[ve+15],10,-30611744),xe=Ye(xe,ie,te,se,re[ve+6],15,-1560198380),se=Ye(se,xe,ie,te,re[ve+13],21,1309151649),te=Ye(te,se,xe,ie,re[ve+4],6,-145523070),ie=Ye(ie,te,se,xe,re[ve+11],10,-1120210379),xe=Ye(xe,ie,te,se,re[ve+2],15,718787259),se=Ye(se,xe,ie,te,re[ve+9],21,-343485551),te=te+tt>>>0,se=se+pt>>>0,xe=xe+_t>>>0,ie=ie+Pt>>>0}return $.endian([te,se,xe,ie])};j._ff=function(W,J,re,ue,te,se,xe){var ie=W+(J&re|~J&ue)+(te>>>0)+xe;return(ie<<se|ie>>>32-se)+J},j._gg=function(W,J,re,ue,te,se,xe){var ie=W+(J&ue|re&~ue)+(te>>>0)+xe;return(ie<<se|ie>>>32-se)+J},j._hh=function(W,J,re,ue,te,se,xe){var ie=W+(J^re^ue)+(te>>>0)+xe;return(ie<<se|ie>>>32-se)+J},j._ii=function(W,J,re,ue,te,se,xe){var ie=W+(re^(J|~ue))+(te>>>0)+xe;return(ie<<se|ie>>>32-se)+J},j._blocksize=16,j._digestsize=16,ne.exports=function(W,J){if(W==null)throw new Error("Illegal argument "+W);var re=$.wordsToBytes(j(W,J));return J&&J.asBytes?re:J&&J.asString?K.bytesToString(re):$.bytesToHex(re)}})()},"./node_modules/regenerator-runtime/runtime.js":function(ne,ce,M){var $=function(U){var de=Object.prototype,K=de.hasOwnProperty,j,W=typeof Symbol=="function"?Symbol:{},J=W.iterator||"@@iterator",re=W.asyncIterator||"@@asyncIterator",ue=W.toStringTag||"@@toStringTag";function te(G,H,Ce){return Object.defineProperty(G,H,{value:Ce,enumerable:!0,configurable:!0,writable:!0}),G[H]}try{te({},"")}catch{te=function(H,Ce,rt){return H[Ce]=rt}}function se(G,H,Ce,rt){var ct=H&&H.prototype instanceof Ye?H:Ye,Et=Object.create(ct.prototype),ye=new cn(rt||[]);return Et._invoke=un(G,Ce,ye),Et}U.wrap=se;function xe(G,H,Ce){try{return{type:"normal",arg:G.call(H,Ce)}}catch(rt){return{type:"throw",arg:rt}}}var ie="suspendedStart",ve="suspendedYield",De="executing",Oe="completed",Le={};function Ye(){}function tt(){}function pt(){}var _t={};_t[J]=function(){return this};var Pt=Object.getPrototypeOf,Wt=Pt&&Pt(Pt(en([])));Wt&&Wt!==de&&K.call(Wt,J)&&(_t=Wt);var Tt=pt.prototype=Ye.prototype=Object.create(_t);tt.prototype=Tt.constructor=pt,pt.constructor=tt,tt.displayName=te(pt,ue,"GeneratorFunction");function kt(G){["next","throw","return"].forEach(function(H){te(G,H,function(Ce){return this._invoke(H,Ce)})})}U.isGeneratorFunction=function(G){var H=typeof G=="function"&&G.constructor;return H?H===tt||(H.displayName||H.name)==="GeneratorFunction":!1},U.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,pt):(G.__proto__=pt,te(G,ue,"GeneratorFunction")),G.prototype=Object.create(Tt),G},U.awrap=function(G){return{__await:G}};function Yt(G,H){function Ce(Et,ye,z,q){var Re=xe(G[Et],G,ye);if(Re.type==="throw")q(Re.arg);else{var Je=Re.arg,ft=Je.value;return ft&&typeof ft=="object"&&K.call(ft,"__await")?H.resolve(ft.__await).then(function(Qe){Ce("next",Qe,z,q)},function(Qe){Ce("throw",Qe,z,q)}):H.resolve(ft).then(function(Qe){Je.value=Qe,z(Je)},function(Qe){return Ce("throw",Qe,z,q)})}}var rt;function ct(Et,ye){function z(){return new H(function(q,Re){Ce(Et,ye,q,Re)})}return rt=rt?rt.then(z,z):z()}this._invoke=ct}kt(Yt.prototype),Yt.prototype[re]=function(){return this},U.AsyncIterator=Yt,U.async=function(G,H,Ce,rt,ct){ct===void 0&&(ct=Promise);var Et=new Yt(se(G,H,Ce,rt),ct);return U.isGeneratorFunction(H)?Et:Et.next().then(function(ye){return ye.done?ye.value:Et.next()})};function un(G,H,Ce){var rt=ie;return function(Et,ye){if(rt===De)throw new Error("Generator is already running");if(rt===Oe){if(Et==="throw")throw ye;return ze()}for(Ce.method=Et,Ce.arg=ye;;){var z=Ce.delegate;if(z){var q=In(z,Ce);if(q){if(q===Le)continue;return q}}if(Ce.method==="next")Ce.sent=Ce._sent=Ce.arg;else if(Ce.method==="throw"){if(rt===ie)throw rt=Oe,Ce.arg;Ce.dispatchException(Ce.arg)}else Ce.method==="return"&&Ce.abrupt("return",Ce.arg);rt=De;var Re=xe(G,H,Ce);if(Re.type==="normal"){if(rt=Ce.done?Oe:ve,Re.arg===Le)continue;return{value:Re.arg,done:Ce.done}}else Re.type==="throw"&&(rt=Oe,Ce.method="throw",Ce.arg=Re.arg)}}}function In(G,H){var Ce=G.iterator[H.method];if(Ce===j){if(H.delegate=null,H.method==="throw"){if(G.iterator.return&&(H.method="return",H.arg=j,In(G,H),H.method==="throw"))return Le;H.method="throw",H.arg=new TypeError("The iterator does not provide a 'throw' method")}return Le}var rt=xe(Ce,G.iterator,H.arg);if(rt.type==="throw")return H.method="throw",H.arg=rt.arg,H.delegate=null,Le;var ct=rt.arg;if(!ct)return H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,Le;if(ct.done)H[G.resultName]=ct.value,H.next=G.nextLoc,H.method!=="return"&&(H.method="next",H.arg=j);else return ct;return H.delegate=null,Le}kt(Tt),te(Tt,ue,"Generator"),Tt[J]=function(){return this},Tt.toString=function(){return"[object Generator]"};function at(G){var H={tryLoc:G[0]};1 in G&&(H.catchLoc=G[1]),2 in G&&(H.finallyLoc=G[2],H.afterLoc=G[3]),this.tryEntries.push(H)}function kn(G){var H=G.completion||{};H.type="normal",delete H.arg,G.completion=H}function cn(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(at,this),this.reset(!0)}U.keys=function(G){var H=[];for(var Ce in G)H.push(Ce);return H.reverse(),function rt(){for(;H.length;){var ct=H.pop();if(ct in G)return rt.value=ct,rt.done=!1,rt}return rt.done=!0,rt}};function en(G){if(G){var H=G[J];if(H)return H.call(G);if(typeof G.next=="function")return G;if(!isNaN(G.length)){var Ce=-1,rt=function ct(){for(;++Ce<G.length;)if(K.call(G,Ce))return ct.value=G[Ce],ct.done=!1,ct;return ct.value=j,ct.done=!0,ct};return rt.next=rt}}return{next:ze}}U.values=en;function ze(){return{value:j,done:!0}}return cn.prototype={constructor:cn,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=j,this.done=!1,this.delegate=null,this.method="next",this.arg=j,this.tryEntries.forEach(kn),!G)for(var H in this)H.charAt(0)==="t"&&K.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=j)},stop:function(){this.done=!0;var G=this.tryEntries[0],H=G.completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var H=this;function Ce(q,Re){return Et.type="throw",Et.arg=G,H.next=q,Re&&(H.method="next",H.arg=j),!!Re}for(var rt=this.tryEntries.length-1;rt>=0;--rt){var ct=this.tryEntries[rt],Et=ct.completion;if(ct.tryLoc==="root")return Ce("end");if(ct.tryLoc<=this.prev){var ye=K.call(ct,"catchLoc"),z=K.call(ct,"finallyLoc");if(ye&&z){if(this.prev<ct.catchLoc)return Ce(ct.catchLoc,!0);if(this.prev<ct.finallyLoc)return Ce(ct.finallyLoc)}else if(ye){if(this.prev<ct.catchLoc)return Ce(ct.catchLoc,!0)}else if(z){if(this.prev<ct.finallyLoc)return Ce(ct.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(G,H){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var rt=this.tryEntries[Ce];if(rt.tryLoc<=this.prev&&K.call(rt,"finallyLoc")&&this.prev<rt.finallyLoc){var ct=rt;break}}ct&&(G==="break"||G==="continue")&&ct.tryLoc<=H&&H<=ct.finallyLoc&&(ct=null);var Et=ct?ct.completion:{};return Et.type=G,Et.arg=H,ct?(this.method="next",this.next=ct.finallyLoc,Le):this.complete(Et)},complete:function(G,H){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&H&&(this.next=H),Le},finish:function(G){for(var H=this.tryEntries.length-1;H>=0;--H){var Ce=this.tryEntries[H];if(Ce.finallyLoc===G)return this.complete(Ce.completion,Ce.afterLoc),kn(Ce),Le}},catch:function(G){for(var H=this.tryEntries.length-1;H>=0;--H){var Ce=this.tryEntries[H];if(Ce.tryLoc===G){var rt=Ce.completion;if(rt.type==="throw"){var ct=rt.arg;kn(Ce)}return ct}}throw new Error("illegal catch attempt")},delegateYield:function(G,H,Ce){return this.delegate={iterator:en(G),resultName:H,nextLoc:Ce},this.method==="next"&&(this.arg=j),Le}},U}(ne.exports);try{regeneratorRuntime=$}catch{Function("r","regeneratorRuntime = r")($)}},"./src/api.js":function(ne,ce,M){M.r(ce),M.d(ce,"setup",function(){return De}),M.d(ce,"setupCache",function(){return ve}),M("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/regenerator-runtime/runtime.js");var $=M("axios"),U=M.n($),de=M("./src/request.js"),K=M("./src/cache.js");M.d(ce,"serializeQuery",function(){return K.serializeQuery});var j=M("./src/config.js"),W=M("./src/utilities.js");function J(Oe,Le){if(Oe==null)return{};var Ye=re(Oe,Le),tt,pt;if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(Oe);for(pt=0;pt<_t.length;pt++)tt=_t[pt],!(Le.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(Oe,tt)&&(Ye[tt]=Oe[tt])}return Ye}function re(Oe,Le){if(Oe==null)return{};var Ye={},tt=Object.keys(Oe),pt,_t;for(_t=0;_t<tt.length;_t++)pt=tt[_t],!(Le.indexOf(pt)>=0)&&(Ye[pt]=Oe[pt]);return Ye}function ue(Oe,Le){var Ye=Object.keys(Oe);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(Oe);Le&&(tt=tt.filter(function(pt){return Object.getOwnPropertyDescriptor(Oe,pt).enumerable})),Ye.push.apply(Ye,tt)}return Ye}function te(Oe){for(var Le=1;Le<arguments.length;Le++){var Ye=arguments[Le]!=null?arguments[Le]:{};Le%2?ue(Object(Ye),!0).forEach(function(tt){se(Oe,tt,Ye[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(Ye)):ue(Object(Ye)).forEach(function(tt){Object.defineProperty(Oe,tt,Object.getOwnPropertyDescriptor(Ye,tt))})}return Oe}function se(Oe,Le,Ye){return Le in Oe?Object.defineProperty(Oe,Le,{value:Ye,enumerable:!0,configurable:!0,writable:!0}):Oe[Le]=Ye,Oe}function xe(Oe,Le,Ye,tt,pt,_t,Pt){try{var Wt=Oe[_t](Pt),Tt=Wt.value}catch(kt){Ye(kt);return}Wt.done?Le(Tt):Promise.resolve(Tt).then(tt,pt)}function ie(Oe){return function(){var Le=this,Ye=arguments;return new Promise(function(tt,pt){var _t=Oe.apply(Le,Ye);function Pt(Tt){xe(_t,tt,pt,Pt,Wt,"next",Tt)}function Wt(Tt){xe(_t,tt,pt,Pt,Wt,"throw",Tt)}Pt(void 0)})}}function ve(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Oe=Object(j.makeConfig)(Oe);function Le(tt){return Ye.apply(this,arguments)}function Ye(){return Ye=ie(regeneratorRuntime.mark(function tt(pt){var _t,Pt,Wt,Tt,kt;return regeneratorRuntime.wrap(function(un){for(;;)switch(un.prev=un.next){case 0:return _t=Object(j.mergeRequestConfig)(Oe,pt),un.next=3,Object(de.default)(_t,pt);case 3:if(Pt=un.sent,Wt=Pt.next,Object(W.isFunction)(Wt)){un.next=7;break}return un.abrupt("return",Wt);case 7:return un.prev=7,un.next=10,_t.adapter(pt);case 10:Pt=un.sent,un.next=16;break;case 13:un.prev=13,un.t0=un.catch(7),Tt=un.t0;case 16:if(!Tt){un.next=31;break}if(kt=Object(W.isFunction)(_t.readOnError)?_t.readOnError(Tt,pt):_t.readOnError,!kt){un.next=30;break}return un.prev=19,_t.acceptStale=!0,un.next=23,Object(de.default)(_t,pt);case 23:return Pt=un.sent,Pt.next.request.stale=!0,un.abrupt("return",Pt.next);case 28:un.prev=28,un.t1=un.catch(19);case 30:throw Tt;case 31:return un.abrupt("return",Wt(Pt));case 32:case"end":return un.stop()}},tt,null,[[7,13],[19,28]])})),Ye.apply(this,arguments)}return{adapter:Le,config:Oe,store:Oe.store}}function De(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=te(te(te({},j.defaults.axios),Oe),{},{cache:te(te({},j.defaults.axios.cache),Oe.cache)}),Ye=ve(Le.cache);Le.cache;var tt=J(Le,["cache"]),pt=U.a.create(te(te({},tt),{},{adapter:Ye.adapter}));return pt.cache=Ye.store,pt}ce.default={setup:De,setupCache:ve,serializeQuery:K.serializeQuery}},"./src/cache.js":function(ne,ce,M){M.r(ce),M.d(ce,"read",function(){return ue}),M.d(ce,"write",function(){return J}),M.d(ce,"key",function(){return se}),M.d(ce,"invalidate",function(){return ve}),M.d(ce,"serializeQuery",function(){return De}),M("./node_modules/core-js/modules/es7.array.includes.js"),M("./node_modules/core-js/modules/es6.string.includes.js"),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");var $=M("./src/utilities.js"),U=M("./node_modules/md5/md5.js"),de=M.n(U),K=M("./src/serialize.js");function j(Oe,Le,Ye,tt,pt,_t,Pt){try{var Wt=Oe[_t](Pt),Tt=Wt.value}catch(kt){Ye(kt);return}Wt.done?Le(Tt):Promise.resolve(Tt).then(tt,pt)}function W(Oe){return function(){var Le=this,Ye=arguments;return new Promise(function(tt,pt){var _t=Oe.apply(Le,Ye);function Pt(Tt){j(_t,tt,pt,Pt,Wt,"next",Tt)}function Wt(Tt){j(_t,tt,pt,Pt,Wt,"throw",Tt)}Pt(void 0)})}}function J(Oe,Le,Ye){return re.apply(this,arguments)}function re(){return re=W(regeneratorRuntime.mark(function Oe(Le,Ye,tt){var pt;return regeneratorRuntime.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.prev=0,pt={expires:Le.expires,data:Object(K.default)(Le,Ye,tt)},Pt.next=4,Le.store.setItem(Le.uuid,pt);case 4:Pt.next=19;break;case 6:if(Pt.prev=6,Pt.t0=Pt.catch(0),Le.debug("Could not store response",Pt.t0),!Le.clearOnError){Pt.next=18;break}return Pt.prev=10,Pt.next=13,Le.store.clear();case 13:Pt.next=18;break;case 15:Pt.prev=15,Pt.t1=Pt.catch(10),Le.debug("Could not clear store",Pt.t1);case 18:return Pt.abrupt("return",!1);case 19:return Pt.abrupt("return",!0);case 20:case"end":return Pt.stop()}},Oe,null,[[0,6],[10,15]])})),re.apply(this,arguments)}function ue(Oe,Le){return te.apply(this,arguments)}function te(){return te=W(regeneratorRuntime.mark(function Oe(Le,Ye){var tt,pt,_t,Pt,Wt,Tt,kt,Yt;return regeneratorRuntime.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:return tt=Le.uuid,pt=Le.ignoreCache,In.next=3,Le.store.getItem(tt);case 3:if(_t=In.sent,!(pt||!_t||!_t.data)){In.next=10;break}throw Le.debug("cache-miss",Ye.url),Pt=new Error,Pt.reason="cache-miss",Pt.message="Entry not found from cache",Pt;case 10:if(Wt=_t.expires,Tt=_t.data,kt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!kt&&!Le.acceptStale&&Wt!==0&&Wt<Date.now())){In.next=18;break}throw Le.debug("cache-stale",Ye.url),Yt=new Error,Yt.reason="cache-stale",Yt.message="Entry is stale",Yt;case 18:return Le.debug(Le.acceptStale?"cache-hit-stale":"cache-hit",Ye.url),In.abrupt("return",Tt);case 20:case"end":return In.stop()}},Oe)})),te.apply(this,arguments)}function se(Oe){if(Object($.isFunction)(Oe.key))return Oe.key;var Le;return Object($.isString)(Oe.key)?Le=function(tt){var pt="".concat(tt.baseURL?tt.baseURL:"").concat(tt.url),_t="".concat(Oe.key,"/").concat(pt).concat(De(tt));return tt.data?_t+de()(tt.data):_t}:Le=function(tt){var pt="".concat(tt.baseURL?tt.baseURL:"").concat(tt.url),_t=pt+De(tt);return tt.data?_t+de()(tt.data):_t},Le}function xe(Oe,Le){return ie.apply(this,arguments)}function ie(){return ie=W(regeneratorRuntime.mark(function Oe(Le,Ye){var tt;return regeneratorRuntime.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(tt=Ye.method.toLowerCase(),!Le.exclude.methods.includes(tt)){_t.next=4;break}return _t.next=4,Le.store.removeItem(Le.uuid);case 4:case"end":return _t.stop()}},Oe)})),ie.apply(this,arguments)}function ve(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object($.isFunction)(Oe.invalidate)?Oe.invalidate:xe}function De(Oe){if(!Oe.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Oe.params);var Le=Oe.params,Ye=Oe.params instanceof URLSearchParams;return Ye||(Le=new URLSearchParams,Object.keys(Oe.params).forEach(function(tt){return Le.append(tt,Oe.params[tt])})),"?".concat(Le.toString())}ce.default={read:ue,write:J,key:se,invalidate:ve,serializeQuery:De}},"./src/config.js":function(ne,ce,M){M.r(ce),M.d(ce,"defaults",function(){return te}),M.d(ce,"makeConfig",function(){return xe}),M.d(ce,"mergeRequestConfig",function(){return ie}),M("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");var $=M("axios"),U=M.n($),de=M("./src/memory.js"),K=M("./src/cache.js");function j(ve,De){var Oe=Object.keys(ve);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(ve);De&&(Le=Le.filter(function(Ye){return Object.getOwnPropertyDescriptor(ve,Ye).enumerable})),Oe.push.apply(Oe,Le)}return Oe}function W(ve){for(var De=1;De<arguments.length;De++){var Oe=arguments[De]!=null?arguments[De]:{};De%2?j(Object(Oe),!0).forEach(function(Le){J(ve,Le,Oe[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Oe)):j(Object(Oe)).forEach(function(Le){Object.defineProperty(ve,Le,Object.getOwnPropertyDescriptor(Oe,Le))})}return ve}function J(ve,De,Oe){return De in ve?Object.defineProperty(ve,De,{value:Oe,enumerable:!0,configurable:!0,writable:!0}):ve[De]=Oe,ve}var re=function(){},ue=function(){for(var De,Oe=arguments.length,Le=new Array(Oe),Ye=0;Ye<Oe;Ye++)Le[Ye]=arguments[Ye];return(De=console).log.apply(De,["[axios-cache-adapter]"].concat(Le))},te={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:U.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},se=["limit","store","adapter","uuid","acceptStale"],xe=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Oe=W(W(W({},te.cache),De),{},{exclude:W(W({},te.cache.exclude),De.exclude)});return Oe.key=Object(K.key)(Oe),Oe.invalidate=Object(K.invalidate)(Oe),Oe.debug!==!1?Oe.debug=typeof Oe.debug=="function"?Oe.debug:ue:Oe.debug=re,Oe.store||(Oe.store=new de.default),Oe.debug("Global cache config",Oe),Oe},ie=function(De,Oe){var Le=Oe.cache||{};Le&&se.forEach(function(tt){return Le[tt]?delete Le[tt]:void 0});var Ye=W(W(W({},De),Le),{},{exclude:W(W({},De.exclude),Le.exclude)});return Ye.debug===!0&&(Ye.debug=ue),Le.key&&(Ye.key=Object(K.key)(Le)),Ye.uuid=Ye.key(Oe),De.debug("Request config for ".concat(Oe.url),Ye),Ye};ce.default={defaults:te,makeConfig:xe,mergeRequestConfig:ie}},"./src/exclude.js":function(ne,ce,M){M.r(ce),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/core-js/modules/es7.array.includes.js"),M("./node_modules/core-js/modules/es6.string.includes.js");var $=M("./src/utilities.js");function U(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1?arguments[1]:void 0,j=de.exclude,W=j===void 0?{}:j,J=de.debug,re=K.method.toLowerCase();if(re==="head"||W.methods.includes(re))return J("Excluding request by HTTP method ".concat(K.url)),!0;if(typeof W.filter=="function"&&W.filter(K))return J("Excluding request by filter ".concat(K.url)),!0;var ue=/\?.*$/.test(K.url)||Object($.isObject)(K.params)&&Object.keys(K.params).length!==0||typeof URLSearchParams<"u"&&K.params instanceof URLSearchParams;if(W.query&&ue)return J("Excluding request by query ".concat(K.url)),!0;var te=W.paths||[],se=te.some(function(xe){return K.url.match(xe)});return se?(J("Excluding request by url match ".concat(K.url)),!0):!1}ce.default=U},"./src/index.node.js":function(ne,ce,M){M.r(ce);var $=M("./src/api.js");M.d(ce,"setup",function(){return $.setup}),M.d(ce,"setupCache",function(){return $.setupCache}),M.d(ce,"serializeQuery",function(){return $.serializeQuery});var U=M("./src/redis.js");M.d(ce,"RedisStore",function(){return U.default});var de=M("./src/redis-default.js");M.d(ce,"RedisDefaultStore",function(){return de.default}),ce.default={setup:$.setup,setupCache:$.setupCache,serializeQuery:$.serializeQuery,RedisStore:U.default,RedisDefaultStore:de.default}},"./src/limit.js":function(ne,ce,M){M.r(ce),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");function $(j,W,J,re,ue,te,se){try{var xe=j[te](se),ie=xe.value}catch(ve){J(ve);return}xe.done?W(ie):Promise.resolve(ie).then(re,ue)}function U(j){return function(){var W=this,J=arguments;return new Promise(function(re,ue){var te=j.apply(W,J);function se(ie){$(te,re,ue,se,xe,"next",ie)}function xe(ie){$(te,re,ue,se,xe,"throw",ie)}se(void 0)})}}function de(j){return K.apply(this,arguments)}function K(){return K=U(regeneratorRuntime.mark(function j(W){var J,re;return regeneratorRuntime.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,W.store.length();case 2:if(J=te.sent,!(J<W.limit)){te.next=5;break}return te.abrupt("return");case 5:return W.debug("Current store size: ".concat(J)),te.next=8,W.store.iterate(function(se,xe){re||(re={value:se,key:xe}),se.expires<re.value.expires&&(re={value:se,key:xe})});case 8:if(!re){te.next=12;break}return W.debug("Removing item: ".concat(re.key)),te.next=12,W.store.removeItem(re.key);case 12:case"end":return te.stop()}},j)})),K.apply(this,arguments)}ce.default=de},"./src/memory.js":function(ne,ce,M){M.r(ce),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/regenerator-runtime/runtime.js");var $=M("./src/utilities.js");function U(re,ue,te,se,xe,ie,ve){try{var De=re[ie](ve),Oe=De.value}catch(Le){te(Le);return}De.done?ue(Oe):Promise.resolve(Oe).then(se,xe)}function de(re){return function(){var ue=this,te=arguments;return new Promise(function(se,xe){var ie=re.apply(ue,te);function ve(Oe){U(ie,se,xe,ve,De,"next",Oe)}function De(Oe){U(ie,se,xe,ve,De,"throw",Oe)}ve(void 0)})}}function K(re,ue){if(!(re instanceof ue))throw new TypeError("Cannot call a class as a function")}function j(re,ue){for(var te=0;te<ue.length;te++){var se=ue[te];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(re,se.key,se)}}function W(re,ue,te){return ue&&j(re.prototype,ue),re}var J=function(){function re(){K(this,re),this.store={}}return W(re,[{key:"getItem",value:function(){var ue=de(regeneratorRuntime.mark(function se(xe){var ie;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return ie=this.store[xe]||null,De.abrupt("return",JSON.parse(ie));case 2:case"end":return De.stop()}},se,this)}));function te(se){return ue.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var ue=de(regeneratorRuntime.mark(function se(xe,ie){return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return this.store[xe]=JSON.stringify(ie),De.abrupt("return",ie);case 2:case"end":return De.stop()}},se,this)}));function te(se,xe){return ue.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var ue=de(regeneratorRuntime.mark(function se(xe){return regeneratorRuntime.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:delete this.store[xe];case 1:case"end":return ve.stop()}},se,this)}));function te(se){return ue.apply(this,arguments)}return te}()},{key:"clear",value:function(){var ue=de(regeneratorRuntime.mark(function se(){return regeneratorRuntime.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:this.store={};case 1:case"end":return ie.stop()}},se,this)}));function te(){return ue.apply(this,arguments)}return te}()},{key:"length",value:function(){var ue=de(regeneratorRuntime.mark(function se(){return regeneratorRuntime.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.abrupt("return",Object.keys(this.store).length);case 1:case"end":return ie.stop()}},se,this)}));function te(){return ue.apply(this,arguments)}return te}()},{key:"iterate",value:function(te){return Promise.all(Object($.mapObject)(this.store,te))}}]),re}();ce.default=J},"./src/redis-default.js":function(ne,ce,M){M.r(ce),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.function.bind.js"),M("./node_modules/core-js/modules/es6.function.name.js");var $=M("util");function U(re,ue,te,se,xe,ie,ve){try{var De=re[ie](ve),Oe=De.value}catch(Le){te(Le);return}De.done?ue(Oe):Promise.resolve(Oe).then(se,xe)}function de(re){return function(){var ue=this,te=arguments;return new Promise(function(se,xe){var ie=re.apply(ue,te);function ve(Oe){U(ie,se,xe,ve,De,"next",Oe)}function De(Oe){U(ie,se,xe,ve,De,"throw",Oe)}ve(void 0)})}}function K(re,ue){if(!(re instanceof ue))throw new TypeError("Cannot call a class as a function")}function j(re,ue){for(var te=0;te<ue.length;te++){var se=ue[te];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(re,se.key,se)}}function W(re,ue,te){return ue&&j(re.prototype,ue),re}var J=function(){function re(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K(this,re);var se=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ue.constructor.name!=="RedisClient")throw se}catch{throw se}this.client=ue,this.prefix=te.prefix||"axios-cache",this.maxScanCount=te.maxScanCount||1e3,this.getAsync=Object($.promisify)(ue.get).bind(ue),this.psetexAsync=Object($.promisify)(ue.psetex).bind(ue),this.delAsync=Object($.promisify)(ue.del).bind(ue),this.scanAsync=Object($.promisify)(ue.scan).bind(ue)}return W(re,[{key:"calculateTTL",value:function(te){var se=Date.now();return te.expires&&te.expires>se?te.expires-se:-1}},{key:"transformKey",value:function(te){return this.prefix+"_"+te}},{key:"getItem",value:function(){var ue=de(regeneratorRuntime.mark(function se(xe){var ie;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,this.getAsync(this.transformKey(xe));case 2:if(De.t0=De.sent,De.t0){De.next=5;break}De.t0=null;case 5:return ie=De.t0,De.abrupt("return",JSON.parse(ie));case 7:case"end":return De.stop()}},se,this)}));function te(se){return ue.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var ue=de(regeneratorRuntime.mark(function se(xe,ie){var ve,De;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(ve=this.transformKey(xe),De=this.calculateTTL(ie),!(De>0)){Le.next=5;break}return Le.next=5,this.psetexAsync(ve,De,JSON.stringify(ie));case 5:return Le.abrupt("return",ie);case 6:case"end":return Le.stop()}},se,this)}));function te(se,xe){return ue.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var ue=de(regeneratorRuntime.mark(function se(xe){return regeneratorRuntime.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,this.delAsync(this.transformKey(xe));case 2:case"end":return ve.stop()}},se,this)}));function te(se){return ue.apply(this,arguments)}return te}()},{key:"scan",value:function(){var ue=de(regeneratorRuntime.mark(function se(xe){var ie,ve;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:ie="0";case 1:return Oe.next=3,this.scanAsync(ie,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return ve=Oe.sent,ie=ve[0],Oe.next=7,xe(ve[1]);case 7:if(ie!=="0"){Oe.next=1;break}case 8:case"end":return Oe.stop()}},se,this)}));function te(se){return ue.apply(this,arguments)}return te}()},{key:"clear",value:function(){var ue=de(regeneratorRuntime.mark(function se(){var xe=this;return regeneratorRuntime.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,this.scan(function(De){return xe.delAsync(De)});case 2:case"end":return ve.stop()}},se,this)}));function te(){return ue.apply(this,arguments)}return te}()},{key:"length",value:function(){var ue=de(regeneratorRuntime.mark(function se(){var xe;return regeneratorRuntime.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return xe=0,ve.next=3,this.scan(function(De){xe+=De.length});case 3:return ve.abrupt("return",xe);case 4:case"end":return ve.stop()}},se,this)}));function te(){return ue.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var ue=de(regeneratorRuntime.mark(function se(xe){var ie=this,ve,De;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return De=function(){return De=de(regeneratorRuntime.mark(function tt(pt){var _t,Pt;return regeneratorRuntime.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return Tt.next=2,this.getAsync(pt);case 2:if(Tt.t0=Tt.sent,Tt.t0){Tt.next=5;break}Tt.t0=null;case 5:return _t=Tt.t0,Pt=JSON.parse(_t),Tt.next=9,xe(Pt,pt);case 9:return Tt.abrupt("return",Tt.sent);case 10:case"end":return Tt.stop()}},tt,this)})),De.apply(this,arguments)},ve=function(tt){return De.apply(this,arguments)},Le.next=4,this.scan(function(Ye){return Promise.all(Ye.map(ve.bind(ie)))});case 4:return Le.abrupt("return",Promise.resolve([]));case 5:case"end":return Le.stop()}},se,this)}));function te(se){return ue.apply(this,arguments)}return te}()}]),re}();ce.default=J},"./src/redis.js":function(ne,ce,M){M.r(ce),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.function.bind.js"),M("./node_modules/core-js/modules/es6.function.name.js");var $=M("util"),U=M("./src/utilities.js");function de(ue,te,se,xe,ie,ve,De){try{var Oe=ue[ve](De),Le=Oe.value}catch(Ye){se(Ye);return}Oe.done?te(Le):Promise.resolve(Le).then(xe,ie)}function K(ue){return function(){var te=this,se=arguments;return new Promise(function(xe,ie){var ve=ue.apply(te,se);function De(Le){de(ve,xe,ie,De,Oe,"next",Le)}function Oe(Le){de(ve,xe,ie,De,Oe,"throw",Le)}De(void 0)})}}function j(ue,te){if(!(ue instanceof te))throw new TypeError("Cannot call a class as a function")}function W(ue,te){for(var se=0;se<te.length;se++){var xe=te[se];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(ue,xe.key,xe)}}function J(ue,te,se){return te&&W(ue.prototype,te),ue}var re=function(){function ue(te){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";j(this,ue);var xe=new TypeError("First parameter must be a valid RedisClient instance.");try{if(te.constructor.name!=="RedisClient")throw xe}catch{throw xe}this.client=te,this.HASH_KEY=se,this.hgetAsync=Object($.promisify)(te.hget).bind(te),this.hsetAsync=Object($.promisify)(te.hset).bind(te),this.hdelAsync=Object($.promisify)(te.hdel).bind(te),this.delAsync=Object($.promisify)(te.del).bind(te),this.hlenAsync=Object($.promisify)(te.hlen).bind(te),this.hgetallAsync=Object($.promisify)(te.hgetall).bind(te)}return J(ue,[{key:"getItem",value:function(){var te=K(regeneratorRuntime.mark(function xe(ie){var ve;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.hgetAsync(this.HASH_KEY,ie);case 2:if(Oe.t0=Oe.sent,Oe.t0){Oe.next=5;break}Oe.t0=null;case 5:return ve=Oe.t0,Oe.abrupt("return",JSON.parse(ve));case 7:case"end":return Oe.stop()}},xe,this)}));function se(xe){return te.apply(this,arguments)}return se}()},{key:"setItem",value:function(){var te=K(regeneratorRuntime.mark(function xe(ie,ve){return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.hsetAsync(this.HASH_KEY,ie,JSON.stringify(ve));case 2:return Oe.abrupt("return",ve);case 3:case"end":return Oe.stop()}},xe,this)}));function se(xe,ie){return te.apply(this,arguments)}return se}()},{key:"removeItem",value:function(){var te=K(regeneratorRuntime.mark(function xe(ie){return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,this.hdelAsync(this.HASH_KEY,ie);case 2:case"end":return De.stop()}},xe,this)}));function se(xe){return te.apply(this,arguments)}return se}()},{key:"clear",value:function(){var te=K(regeneratorRuntime.mark(function xe(){return regeneratorRuntime.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return ve.stop()}},xe,this)}));function se(){return te.apply(this,arguments)}return se}()},{key:"length",value:function(){var te=K(regeneratorRuntime.mark(function xe(){return regeneratorRuntime.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return ve.stop()}},xe,this)}));function se(){return te.apply(this,arguments)}return se}()},{key:"iterate",value:function(){var te=K(regeneratorRuntime.mark(function xe(ie){var ve;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return ve=Oe.sent,Oe.abrupt("return",Promise.all(Object(U.mapObject)(ve,ie)));case 4:case"end":return Oe.stop()}},xe,this)}));function se(xe){return te.apply(this,arguments)}return se}()}]),ue}();ce.default=re},"./src/request.js":function(ne,ce,M){M.r(ce),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");var $=M("./src/response.js"),U=M("./src/exclude.js"),de=M("./src/cache.js");function K(re,ue,te,se,xe,ie,ve){try{var De=re[ie](ve),Oe=De.value}catch(Le){te(Le);return}De.done?ue(Oe):Promise.resolve(Oe).then(se,xe)}function j(re){return function(){var ue=this,te=arguments;return new Promise(function(se,xe){var ie=re.apply(ue,te);function ve(Oe){K(ie,se,xe,ve,De,"next",Oe)}function De(Oe){K(ie,se,xe,ve,De,"throw",Oe)}ve(void 0)})}}function W(re,ue){return J.apply(this,arguments)}function J(){return J=j(regeneratorRuntime.mark(function re(ue,te){var se,xe,ie;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return ie=function(){return ue.excludeFromCache=!0,{config:ue,next:se}},ue.debug("uuid",ue.uuid),se=function(){for(var Le=arguments.length,Ye=new Array(Le),tt=0;tt<Le;tt++)Ye[tt]=arguments[tt];return $.default.apply(void 0,[ue,te].concat(Ye))},De.next=5,ue.invalidate(ue,te);case 5:if(!Object(U.default)(ue,te)){De.next=7;break}return De.abrupt("return",ie());case 7:return De.prev=7,De.next=10,Object(de.read)(ue,te);case 10:return xe=De.sent,xe.config=te,xe.request={fromCache:!0},De.abrupt("return",{config:ue,next:xe});case 16:if(De.prev=16,De.t0=De.catch(7),!(ue.clearOnStale&&De.t0.reason==="cache-stale")){De.next=21;break}return De.next=21,ue.store.removeItem(ue.uuid);case 21:return De.abrupt("return",{config:ue,next:se});case 22:case"end":return De.stop()}},re,null,[[7,16]])})),J.apply(this,arguments)}ce.default=W},"./src/response.js":function(ne,ce,M){M.r(ce),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");var $=M("./src/limit.js"),U=M("./src/cache.js"),de=M("./node_modules/cache-control-esm/index.js");function K(re,ue,te,se,xe,ie,ve){try{var De=re[ie](ve),Oe=De.value}catch(Le){te(Le);return}De.done?ue(Oe):Promise.resolve(Oe).then(se,xe)}function j(re){return function(){var ue=this,te=arguments;return new Promise(function(se,xe){var ie=re.apply(ue,te);function ve(Oe){K(ie,se,xe,ve,De,"next",Oe)}function De(Oe){K(ie,se,xe,ve,De,"throw",Oe)}ve(void 0)})}}function W(re,ue,te){return J.apply(this,arguments)}function J(){return J=j(regeneratorRuntime.mark(function re(ue,te,se){var xe,ie,ve,De,Oe;return regeneratorRuntime.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(xe=se.request,ie=xe===void 0?{}:xe,ve=se.headers,De=ve===void 0?{}:ve,!(["arraybuffer","blob"].indexOf(ie.responseType)>-1)){Ye.next=3;break}return Ye.abrupt("return",se);case 3:if(Oe={},ue.readHeaders&&(De["cache-control"]?(Oe=Object(de.parse)(De["cache-control"]),(Oe.noCache||Oe.noStore)&&(ue.excludeFromCache=!0)):De.expires?ue.expires=new Date(De.expires).getTime():ue.expires=new Date().getTime()),ue.excludeFromCache){Ye.next=15;break}if(Oe.maxAge||Oe.maxAge===0?ue.expires=Date.now()+Oe.maxAge*1e3:ue.readHeaders||(ue.expires=ue.maxAge===0?Date.now():Date.now()+ue.maxAge),!ue.limit){Ye.next=11;break}return ue.debug("Detected limit: ".concat(ue.limit)),Ye.next=11,Object($.default)(ue);case 11:return Ye.next=13,Object(U.write)(ue,te,se);case 13:Ye.next=16;break;case 15:se.request.excludedFromCache=!0;case 16:return Ye.abrupt("return",se);case 17:case"end":return Ye.stop()}},re)})),J.apply(this,arguments)}ce.default=W},"./src/serialize.js":function(ne,ce,M){M.r(ce),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");function $(K,j){if(K==null)return{};var W=U(K,j),J,re;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(K);for(re=0;re<ue.length;re++)J=ue[re],!(j.indexOf(J)>=0)&&Object.prototype.propertyIsEnumerable.call(K,J)&&(W[J]=K[J])}return W}function U(K,j){if(K==null)return{};var W={},J=Object.keys(K),re,ue;for(ue=0;ue<J.length;ue++)re=J[ue],!(j.indexOf(re)>=0)&&(W[re]=K[re]);return W}function de(K,j,W){if(W.data)try{W.data=JSON.parse(W.data)}catch(re){K.debug("Could not parse data as JSON",re)}W.request,W.config;var J=$(W,["request","config"]);return J}ce.default=de},"./src/utilities.js":function(ne,ce,M){M.r(ce),M.d(ce,"isObject",function(){return U}),M.d(ce,"getTag",function(){return de}),M.d(ce,"isFunction",function(){return K}),M.d(ce,"isString",function(){return j}),M.d(ce,"mapObject",function(){return W}),M("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");function $(J){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$=function(ue){return typeof ue}:$=function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},$(J)}function U(J){var re=$(J);return J!=null&&(re==="object"||re==="function")}function de(J){return J===null?J===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(J)}function K(J){if(!U(J))return!1;var re=de(J);return re==="[object Function]"||re==="[object AsyncFunction]"||re==="[object GeneratorFunction]"||re==="[object Proxy]"}function j(J){var re=$(J);return re==="string"||re==="object"&&J!=null&&!Array.isArray(J)&&de(J)==="[object String]"}function W(J,re){return U(J)?Object.keys(J).map(function(ue){return re(J[ue],ue)}):[]}},axios:function(ne,ce){ne.exports=Me},util:function(ne,ce){ne.exports=D.default}})})});const N={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},Q=V.setupCache({maxAge:60*60*24*1e3}),he=R.default.create({adapter:Q.adapter}),Te=async(we,_e={})=>{const Me={...N,..._e},[ne,ce]=p.lngLatToGoogle(we,Me.zoomBase),M=Me.tileUrl.replace("{z}",String(Me.zoomBase)).replace("{x}",String(ne)).replace("{y}",String(ce)),$={code:"",prefecture:"",city:""};let U;try{const j=await he.get(M,{responseType:"arraybuffer"});U=Buffer.from(j.data,"binary")}catch(j){throw new Error(j)}const de=new w.VectorTile(new L.default(U));let K=Object.keys(de.layers);return Array.isArray(K)||(K=[K]),K.forEach(j=>{const W=de.layers[j];if(W&&Me.layer===W.name)for(let J=0;J<W.length;J++){const re=W.feature(J).toGeoJSON(ne,ce,Me.zoomBase);K.length>1&&(re.properties.vt_layer=j);const ue={type:"FeatureCollection",features:[re]};c.geoContains(ue,we)&&($.code=String(re.id).length===5?String(re.id):`0${String(re.id)}`,$.prefecture=re.properties.prefecture,$.city=re.properties.city)}}),$};u.openReverseGeocoder=Te}(Ig)),Ig}var sC=oC();const aC={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},lC={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},uC={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},cC={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},S1={JPN:uC,CHN:aC,DEU:lC,KOR:cC};function Ew(u,c,p={}){const v={type:"Feature"};return(p.id===0||p.id)&&(v.id=p.id),p.bbox&&(v.bbox=p.bbox),v.properties=c||{},v.geometry=u,v}function hC(u,c,p={}){if(!u)throw new Error("coordinates is required");if(!Array.isArray(u))throw new Error("coordinates must be an Array");if(u.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E1(u[0])||!E1(u[1]))throw new Error("coordinates must contain numbers");return Ew({type:"Point",coordinates:u},c,p)}function dC(u,c,p={}){for(const x of u){if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(x[x.length-1].length!==x[0].length)throw new Error("First and last Position are not equivalent.");for(let T=0;T<x[x.length-1].length;T++)if(x[x.length-1][T]!==x[0][T])throw new Error("First and last Position are not equivalent.")}return Ew({type:"Polygon",coordinates:u},c,p)}function E1(u){return!isNaN(u)&&u!==null&&!Array.isArray(u)}function fC(u){if(!u)throw new Error("coord is required");if(!Array.isArray(u)){if(u.type==="Feature"&&u.geometry!==null&&u.geometry.type==="Point")return[...u.geometry.coordinates];if(u.type==="Point")return[...u.coordinates]}if(Array.isArray(u)&&u.length>=2&&!Array.isArray(u[0])&&!Array.isArray(u[1]))return[...u];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function pC(u){return u.type==="Feature"?u.geometry:u}function Tw(u,c,p){if(u!==null)for(var v,x,T,w,a,L,R,D=0,C=0,k,V=u.type,N=V==="FeatureCollection",Q=V==="Feature",he=N?u.features.length:1,Te=0;Te<he;Te++){R=N?u.features[Te].geometry:Q?u.geometry:u,k=R?R.type==="GeometryCollection":!1,a=k?R.geometries.length:1;for(var we=0;we<a;we++){var _e=0,Me=0;if(w=k?R.geometries[we]:R,w!==null){L=w.coordinates;var ne=w.type;switch(D=ne==="Polygon"||ne==="MultiPolygon"?1:0,ne){case null:break;case"Point":if(c(L,C,Te,_e,Me)===!1)return!1;C++,_e++;break;case"LineString":case"MultiPoint":for(v=0;v<L.length;v++){if(c(L[v],C,Te,_e,Me)===!1)return!1;C++,ne==="MultiPoint"&&_e++}ne==="LineString"&&_e++;break;case"Polygon":case"MultiLineString":for(v=0;v<L.length;v++){for(x=0;x<L[v].length-D;x++){if(c(L[v][x],C,Te,_e,Me)===!1)return!1;C++}ne==="MultiLineString"&&_e++,ne==="Polygon"&&Me++}ne==="Polygon"&&_e++;break;case"MultiPolygon":for(v=0;v<L.length;v++){for(Me=0,x=0;x<L[v].length;x++){for(T=0;T<L[v][x].length-D;T++){if(c(L[v][x][T],C,Te,_e,Me)===!1)return!1;C++}Me++}_e++}break;case"GeometryCollection":for(v=0;v<w.geometries.length;v++)if(Tw(w.geometries[v],c)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mC(u,c){var p=0,v=0,x=0,T=0,w=0,a=0,L=0,R=0,D=null,C=null,k=u[0],V=u[1],N=c.length;for(p;p<N;p++){v=0;var Q=c[p].length-1,he=c[p];if(D=he[0],D[0]!==he[Q][0]&&D[1]!==he[Q][1])throw new Error("First and last coordinates in a ring must be the same");for(w=D[0]-k,a=D[1]-V,v;v<Q;v++){if(C=he[v+1],R=C[1]-V,a<0&&R<0||a>0&&R>0){D=C,a=R,w=D[0]-k;continue}if(L=C[0]-u[0],R>0&&a<=0){if(T=w*R-L*a,T>0)x=x+1;else if(T===0)return 0}else if(a>0&&R<=0){if(T=w*R-L*a,T<0)x=x+1;else if(T===0)return 0}else if(R===0&&a<0){if(T=w*R-L*a,T===0)return 0}else if(a===0&&R<0){if(T=w*R-L*a,T===0)return 0}else if(a===0&&R===0){if(L<=0&&w>=0)return 0;if(w<=0&&L>=0)return 0}D=C,a=R,w=L}}return x%2!==0}function gC(u,c,p={}){if(!u)throw new Error("point is required");if(!c)throw new Error("polygon is required");const v=fC(u),x=pC(c),T=x.type,w=c.bbox;let a=x.coordinates;if(w&&yC(v,w)===!1)return!1;T==="Polygon"&&(a=[a]);let L=!1;for(var R=0;R<a.length;++R){const D=mC(v,a[R]);if(D===0)return!p.ignoreBoundary;D&&(L=!0)}return L}function yC(u,c){return c[0]<=u[0]&&c[1]<=u[1]&&c[2]>=u[0]&&c[3]>=u[1]}function vC(u,c={}){let p=0,v=0,x=0;return Tw(u,function(T){p+=T[0],v+=T[1],x++}),hC([p/x,v/x],c.properties)}const _C=()=>{const[u,c]=zt.useState(!1);return{detectCountry:zt.useCallback(async(v,x)=>{c(!0);const w=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const a of w.features)if(gC([v,x],a.geometry))return console.log("country: ",a.properties),c(!1),a;c(!1)},[]),loadingCountry:u}},cy=({feature:u,fieldOption:c,suggestList:p,onChange:v})=>{var a;const[x,T]=zt.useState((a=u.properties)==null?void 0:a[c.key]);zt.useEffect(()=>{var L;T((L=u.properties)==null?void 0:L[c.key])},[u]);const w=zt.useCallback(L=>{T(L.currentTarget.value),v&&v(L)},[]);return Mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Mt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:c.key,children:[c.displayName," (",c.key,")"]}),Mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:c.key,name:c.key,type:"text",autoComplete:"on",list:c.key+"-list",placeholder:c.placeholder,value:x,onChange:w}),Mt.jsx("datalist",{id:c.key+"-list",children:p&&p.map(L=>{if(parseInt(L.tags.admin_level)===c.adminLevel)return Mt.jsx("option",{value:L.tags.name},L.id);if(L.type==="node"&&c.adminLevel===9)return Mt.jsx("option",{value:L.tags.name},L.id)})})]})},xC=({feature:u,fields:c})=>u.properties?Mt.jsxs(Mt.Fragment,{children:[c.postcodeField&&Mt.jsx("span",{children:u.properties[c.postcodeField.key]})," ",c.mainFields&&c.mainFields.map(p=>{var v;return Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("span",{children:(v=u.properties)==null?void 0:v[p.key]})," "]})}),c.detailFields&&c.detailFields.map(p=>{var v;return Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("span",{children:(v=u.properties)==null?void 0:v[p.key]})," "]})})]}):null,wC=({placeholder:u,defaultValue:c})=>{const[p,v]=zt.useState(c);zt.useEffect(()=>{v(c)},[c]);const x=zt.useCallback(T=>{v(T.currentTarget.value)},[]);return Mt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[Mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),Mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:u,value:p,required:!0,onChange:x})]})};var Sf={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var bC=Sf.exports,T1;function SC(){return T1||(T1=1,function(u,c){(function(){var p,v="4.15.0",x=200,T="Expected a function",w="__lodash_hash_undefined__",a=1,L=2,R=1/0,D=9007199254740991,C="[object Arguments]",k="[object Array]",V="[object Boolean]",N="[object Date]",Q="[object Error]",he="[object Function]",Te="[object GeneratorFunction]",we="[object Map]",_e="[object Number]",Me="[object Object]",ne="[object Promise]",ce="[object RegExp]",M="[object Set]",$="[object String]",U="[object Symbol]",de="[object WeakMap]",K="[object ArrayBuffer]",j="[object DataView]",W="[object Float32Array]",J="[object Float64Array]",re="[object Int8Array]",ue="[object Int16Array]",te="[object Int32Array]",se="[object Uint8Array]",xe="[object Uint8ClampedArray]",ie="[object Uint16Array]",ve="[object Uint32Array]",De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,Le=/^\./,Ye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt=/[\\^$.*+?()[\]{}|]/g,pt=/\\(\\)?/g,_t=/\w*$/,Pt=/^\[object .+?Constructor\]$/,Wt=/^(?:0|[1-9]\d*)$/,Tt={};Tt[W]=Tt[J]=Tt[re]=Tt[ue]=Tt[te]=Tt[se]=Tt[xe]=Tt[ie]=Tt[ve]=!0,Tt[C]=Tt[k]=Tt[K]=Tt[V]=Tt[j]=Tt[N]=Tt[Q]=Tt[he]=Tt[we]=Tt[_e]=Tt[Me]=Tt[ce]=Tt[M]=Tt[$]=Tt[de]=!1;var kt={};kt[C]=kt[k]=kt[K]=kt[j]=kt[V]=kt[N]=kt[W]=kt[J]=kt[re]=kt[ue]=kt[te]=kt[we]=kt[_e]=kt[Me]=kt[ce]=kt[M]=kt[$]=kt[U]=kt[se]=kt[xe]=kt[ie]=kt[ve]=!0,kt[Q]=kt[he]=kt[de]=!1;var Yt=typeof dd=="object"&&dd&&dd.Object===Object&&dd,un=typeof self=="object"&&self&&self.Object===Object&&self,In=Yt||un||Function("return this")(),at=c&&!c.nodeType&&c,kn=at&&!0&&u&&!u.nodeType&&u,cn=kn&&kn.exports===at,en=cn&&Yt.process,ze=function(){try{return en&&en.binding("util")}catch{}}(),G=ze&&ze.isTypedArray;function H(ee,Ie){return ee.set(Ie[0],Ie[1]),ee}function Ce(ee,Ie){return ee.add(Ie),ee}function rt(ee,Ie,We){switch(We.length){case 0:return ee.call(Ie);case 1:return ee.call(Ie,We[0]);case 2:return ee.call(Ie,We[0],We[1]);case 3:return ee.call(Ie,We[0],We[1],We[2])}return ee.apply(Ie,We)}function ct(ee,Ie){for(var We=-1,wt=ee?ee.length:0;++We<wt&&Ie(ee[We],We,ee)!==!1;);return ee}function Et(ee,Ie){for(var We=-1,wt=Ie.length,Kt=ee.length;++We<wt;)ee[Kt+We]=Ie[We];return ee}function ye(ee,Ie,We,wt){for(var Kt=-1,Nt=ee?ee.length:0;++Kt<Nt;)We=Ie(We,ee[Kt],Kt,ee);return We}function z(ee,Ie){for(var We=-1,wt=ee?ee.length:0;++We<wt;)if(Ie(ee[We],We,ee))return!0;return!1}function q(ee){return function(Ie){return Ie==null?p:Ie[ee]}}function Re(ee,Ie){for(var We=-1,wt=Array(ee);++We<ee;)wt[We]=Ie(We);return wt}function Je(ee){return function(Ie){return ee(Ie)}}function ft(ee,Ie){return ee==null?p:ee[Ie]}function Qe(ee){var Ie=!1;if(ee!=null&&typeof ee.toString!="function")try{Ie=!!(ee+"")}catch{}return Ie}function jt(ee){var Ie=-1,We=Array(ee.size);return ee.forEach(function(wt,Kt){We[++Ie]=[Kt,wt]}),We}function Bt(ee,Ie){return function(We){return ee(Ie(We))}}function zn(ee){var Ie=-1,We=Array(ee.size);return ee.forEach(function(wt){We[++Ie]=wt}),We}var Zn=Array.prototype,qt=Function.prototype,Or=Object.prototype,qr=In["__core-js_shared__"],Xr=function(){var ee=/[^.]+$/.exec(qr&&qr.keys&&qr.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Tr=qt.toString,Ue=Or.hasOwnProperty,me=Tr.call(Object),pe=Or.toString,Pe=RegExp("^"+Tr.call(Ue).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=cn?In.Buffer:p,Be=In.Symbol,He=In.Uint8Array,nt=Bt(Object.getPrototypeOf,Object),Ze=Object.create,yt=Or.propertyIsEnumerable,It=Zn.splice,gt=Object.getOwnPropertySymbols,Ut=je?je.isBuffer:p,pn=Bt(Object.keys,Object),vn=Math.max,Jn=Fa(In,"DataView"),jn=Fa(In,"Map"),Qn=Fa(In,"Promise"),Un=Fa(In,"Set"),jr=Fa(In,"WeakMap"),xr=Fa(Object,"create"),Wn=!yt.call({valueOf:1},"valueOf"),lr=Vn(Jn),br=Vn(jn),ii=Vn(Qn),ci=Vn(Un),zi=Vn(jr),is=Be?Be.prototype:p,Pn=is?is.valueOf:p,Pl=is?is.toString:p;function Xn(){}function Kr(ee){var Ie=-1,We=ee?ee.length:0;for(this.clear();++Ie<We;){var wt=ee[Ie];this.set(wt[0],wt[1])}}function _i(){this.__data__=xr?xr(null):{}}function Rc(ee){return this.has(ee)&&delete this.__data__[ee]}function Qi(ee){var Ie=this.__data__;if(xr){var We=Ie[ee];return We===w?p:We}return Ue.call(Ie,ee)?Ie[ee]:p}function xi(ee){var Ie=this.__data__;return xr?Ie[ee]!==p:Ue.call(Ie,ee)}function Ri(ee,Ie){var We=this.__data__;return We[ee]=xr&&Ie===p?w:Ie,this}Kr.prototype.clear=_i,Kr.prototype.delete=Rc,Kr.prototype.get=Qi,Kr.prototype.has=xi,Kr.prototype.set=Ri;function Fi(ee){var Ie=-1,We=ee?ee.length:0;for(this.clear();++Ie<We;){var wt=ee[Ie];this.set(wt[0],wt[1])}}function fr(){this.__data__=[]}function Qa(ee){var Ie=this.__data__,We=Xs(Ie,ee);if(We<0)return!1;var wt=Ie.length-1;return We==wt?Ie.pop():It.call(Ie,We,1),!0}function Po(ee){var Ie=this.__data__,We=Xs(Ie,ee);return We<0?p:Ie[We][1]}function $r(ee){return Xs(this.__data__,ee)>-1}function Zs(ee,Ie){var We=this.__data__,wt=Xs(We,ee);return wt<0?We.push([ee,Ie]):We[wt][1]=Ie,this}Fi.prototype.clear=fr,Fi.prototype.delete=Qa,Fi.prototype.get=Po,Fi.prototype.has=$r,Fi.prototype.set=Zs;function Br(ee){var Ie=-1,We=ee?ee.length:0;for(this.clear();++Ie<We;){var wt=ee[Ie];this.set(wt[0],wt[1])}}function Ws(){this.__data__={hash:new Kr,map:new(jn||Fi),string:new Kr}}function $i(ee){return cs(this,ee).delete(ee)}function Fc(ee){return cs(this,ee).get(ee)}function Al(ee){return cs(this,ee).has(ee)}function os(ee,Ie){return cs(this,ee).set(ee,Ie),this}Br.prototype.clear=Ws,Br.prototype.delete=$i,Br.prototype.get=Fc,Br.prototype.has=Al,Br.prototype.set=os;function co(ee){var Ie=-1,We=ee?ee.length:0;for(this.__data__=new Br;++Ie<We;)this.add(ee[Ie])}function nr(ee){return this.__data__.set(ee,w),this}function qs(ee){return this.__data__.has(ee)}co.prototype.add=co.prototype.push=nr,co.prototype.has=qs;function eo(ee){this.__data__=new Fi(ee)}function ks(){this.__data__=new Fi}function ur(ee){return this.__data__.delete(ee)}function el(ee){return this.__data__.get(ee)}function Ma(ee){return this.__data__.has(ee)}function ka(ee,Ie){var We=this.__data__;if(We instanceof Fi){var wt=We.__data__;if(!jn||wt.length<x-1)return wt.push([ee,Ie]),this;We=this.__data__=new Br(wt)}return We.set(ee,Ie),this}eo.prototype.clear=ks,eo.prototype.delete=ur,eo.prototype.get=el,eo.prototype.has=Ma,eo.prototype.set=ka;function zs(ee,Ie){var We=di(ee)||Ro(ee)?Re(ee.length,String):[],wt=We.length,Kt=!!wt;for(var Nt in ee)(Ie||Ue.call(ee,Nt))&&!(Kt&&(Nt=="length"||ko(Nt,wt)))&&We.push(Nt);return We}function tl(ee,Ie,We){(We!==p&&!Vo(ee[Ie],We)||typeof Ie=="number"&&We===p&&!(Ie in ee))&&(ee[Ie]=We)}function yu(ee,Ie,We){var wt=ee[Ie];(!(Ue.call(ee,Ie)&&Vo(wt,We))||We===p&&!(Ie in ee))&&(ee[Ie]=We)}function Xs(ee,Ie){for(var We=ee.length;We--;)if(Vo(ee[We][0],Ie))return We;return-1}function Ml(ee,Ie){return ee&&Os(Ie,go(Ie),ee)}function oi(ee,Ie,We,wt,Kt,Nt,an){var Sn;if(wt&&(Sn=Nt?wt(ee,Kt,Nt,an):wt(ee)),Sn!==p)return Sn;if(!gi(ee))return ee;var Ln=di(ee);if(Ln){if(Sn=Ll(ee),!Ie)return za(ee,Sn)}else{var pr=Mo(ee),ar=pr==he||pr==Te;if(Oi(ee))return ir(ee,Ie);if(pr==Me||pr==C||ar&&!Nt){if(Qe(ee))return Nt?ee:{};if(Sn=uc(ar?{}:ee),!Ie)return oc(ee,Ml(Sn,ee))}else{if(!kt[pr])return Nt?ee:{};Sn=Dl(ee,pr,oi,Ie)}}an||(an=new eo);var cr=an.get(ee);if(cr)return cr;if(an.set(ee,Sn),!Ln)var Ur=We?il(ee):go(ee);return ct(Ur||ee,function(Yr,Jr){Ur&&(Jr=Yr,Yr=ee[Jr]),yu(Sn,Jr,oi(Yr,Ie,We,wt,Jr,ee,an))}),Sn}function ho(ee){return gi(ee)?Ze(ee):{}}var Gr=jl(Rs),hi=Ao();function Rs(ee,Ie){return ee&&hi(ee,Ie,go)}function fo(ee,Ie){Ie=js(Ie,ee)?[Ie]:wi(Ie);for(var We=0,wt=Ie.length;ee!=null&&We<wt;)ee=ee[Ul(Ie[We++])];return We&&We==wt?ee:p}function kl(ee,Ie,We){var wt=Ie(ee);return di(ee)?wt:Et(wt,We(ee))}function vu(ee){return pe.call(ee)}function Uo(ee,Ie){return ee!=null&&Ie in Object(ee)}function _u(ee,Ie,We,wt,Kt){return ee===Ie?!0:ee==null||Ie==null||!gi(ee)&&!Fo(Ie)?ee!==ee&&Ie!==Ie:xu(ee,Ie,_u,We,wt,Kt)}function xu(ee,Ie,We,wt,Kt,Nt){var an=di(ee),Sn=di(Ie),Ln=k,pr=k;an||(Ln=Mo(ee),Ln=Ln==C?Me:Ln),Sn||(pr=Mo(Ie),pr=pr==C?Me:pr);var ar=Ln==Me&&!Qe(ee),cr=pr==Me&&!Qe(Ie),Ur=Ln==pr;if(Ur&&!ar)return Nt||(Nt=new eo),an||mo(ee)?Ra(ee,Ie,We,wt,Kt,Nt):sc(ee,Ie,Ln,We,wt,Kt,Nt);if(!(Kt&L)){var Yr=ar&&Ue.call(ee,"__wrapped__"),Jr=cr&&Ue.call(Ie,"__wrapped__");if(Yr||Jr){var yo=Yr?ee.value():ee,Hi=Jr?Ie.value():Ie;return Nt||(Nt=new eo),We(yo,Hi,wt,Kt,Nt)}}return Ur?(Nt||(Nt=new eo),ac(ee,Ie,We,wt,Kt,Nt)):!1}function nl(ee,Ie,We,wt){var Kt=We.length,Nt=Kt;if(ee==null)return!Nt;for(ee=Object(ee);Kt--;){var an=We[Kt];if(an[2]?an[1]!==ee[an[0]]:!(an[0]in ee))return!1}for(;++Kt<Nt;){an=We[Kt];var Sn=an[0],Ln=ee[Sn],pr=an[1];if(an[2]){if(Ln===p&&!(Sn in ee))return!1}else{var ar=new eo,cr;if(!(cr===p?_u(pr,Ln,wt,a|L,ar):cr))return!1}}return!0}function rc(ee){if(!gi(ee)||Bl(ee))return!1;var Ie=ja(ee)||Qe(ee)?Pe:Pt;return Ie.test(Vn(ee))}function Oc(ee){return Fo(ee)&&La(ee.length)&&!!Tt[pe.call(ee)]}function Ks(ee){return typeof ee=="function"?ee:ee==null?Iu:typeof ee=="object"?di(ee)?wu(ee[0],ee[1]):Ys(ee):ta(ee)}function ss(ee){if(!Oa(ee))return pn(ee);var Ie=[];for(var We in Object(ee))Ue.call(ee,We)&&We!="constructor"&&Ie.push(We);return Ie}function as(ee){if(!gi(ee))return Dc(ee);var Ie=Oa(ee),We=[];for(var wt in ee)wt=="constructor"&&(Ie||!Ue.call(ee,wt))||We.push(wt);return We}function Ys(ee){var Ie=Lc(ee);return Ie.length==1&&Ie[0][2]?Nl(Ie[0][0],Ie[0][1]):function(We){return We===ee||nl(We,ee,Ie)}}function wu(ee,Ie){return js(ee)&&hs(Ie)?Nl(Ul(ee),Ie):function(We){var wt=ea(We,ee);return wt===p&&wt===Ie?$l(We,ee):_u(Ie,wt,p,a|L)}}function zl(ee,Ie,We,wt,Kt){if(ee!==Ie){if(!(di(Ie)||mo(Ie)))var Nt=as(Ie);ct(Nt||Ie,function(an,Sn){if(Nt&&(Sn=an,an=Ie[Sn]),gi(an))Kt||(Kt=new eo),po(ee,Ie,Sn,We,zl,wt,Kt);else{var Ln=wt?wt(ee[Sn],an,Sn+"",ee,Ie,Kt):p;Ln===p&&(Ln=an),tl(ee,Sn,Ln)}})}}function po(ee,Ie,We,wt,Kt,Nt,an){var Sn=ee[We],Ln=Ie[We],pr=an.get(Ln);if(pr){tl(ee,We,pr);return}var ar=Nt?Nt(Sn,Ln,We+"",ee,Ie,an):p,cr=ar===p;cr&&(ar=Ln,di(Ln)||mo(Ln)?di(Sn)?ar=Sn:ds(Sn)?ar=za(Sn):(cr=!1,ar=oi(Ln,!0)):Qs(Ln)||Ro(Ln)?Ro(Sn)?ar=ol(Sn):!gi(Sn)||wt&&ja(Sn)?(cr=!1,ar=oi(Ln,!0)):ar=Sn:cr=!1),cr&&(an.set(Ln,ar),Kt(ar,Ln,wt,Nt,an),an.delete(Ln)),tl(ee,We,ar)}function Rl(ee){return function(Ie){return fo(Ie,ee)}}function rl(ee,Ie){return Ie=vn(Ie===p?ee.length-1:Ie,0),function(){for(var We=arguments,wt=-1,Kt=vn(We.length-Ie,0),Nt=Array(Kt);++wt<Kt;)Nt[wt]=We[Ie+wt];wt=-1;for(var an=Array(Ie+1);++wt<Ie;)an[wt]=We[wt];return an[Ie]=Nt,rt(ee,this,an)}}function Fs(ee){if(typeof ee=="string")return ee;if(no(ee))return Pl?Pl.call(ee):"";var Ie=ee+"";return Ie=="0"&&1/ee==-R?"-0":Ie}function wi(ee){return di(ee)?ee:Nr(ee)}function ir(ee,Ie){if(Ie)return ee.slice();var We=new ee.constructor(ee.length);return ee.copy(We),We}function ls(ee){var Ie=new ee.constructor(ee.byteLength);return new He(Ie).set(new He(ee)),Ie}function ic(ee,Ie){var We=Ie?ls(ee.buffer):ee.buffer;return new ee.constructor(We,ee.byteOffset,ee.byteLength)}function us(ee,Ie,We){var wt=Ie?We(jt(ee),!0):jt(ee);return ye(wt,H,new ee.constructor)}function Fl(ee){var Ie=new ee.constructor(ee.source,_t.exec(ee));return Ie.lastIndex=ee.lastIndex,Ie}function bu(ee,Ie,We){var wt=Ie?We(zn(ee),!0):zn(ee);return ye(wt,Ce,new ee.constructor)}function to(ee){return Pn?Object(Pn.call(ee)):{}}function Js(ee,Ie){var We=Ie?ls(ee.buffer):ee.buffer;return new ee.constructor(We,ee.byteOffset,ee.length)}function za(ee,Ie){var We=-1,wt=ee.length;for(Ie||(Ie=Array(wt));++We<wt;)Ie[We]=ee[We];return Ie}function Os(ee,Ie,We,wt){We||(We={});for(var Kt=-1,Nt=Ie.length;++Kt<Nt;){var an=Ie[Kt],Sn=p;yu(We,an,Sn===p?ee[an]:Sn)}return We}function oc(ee,Ie){return Os(ee,Su(ee),Ie)}function Ol(ee){return rl(function(Ie,We){var wt=-1,Kt=We.length,Nt=Kt>1?We[Kt-1]:p,an=Kt>2?We[2]:p;for(Nt=ee.length>3&&typeof Nt=="function"?(Kt--,Nt):p,an&&Eu(We[0],We[1],an)&&(Nt=Kt<3?p:Nt,Kt=1),Ie=Object(Ie);++wt<Kt;){var Sn=We[wt];Sn&&ee(Ie,Sn,wt,Nt)}return Ie})}function jl(ee,Ie){return function(We,wt){if(We==null)return We;if(!Gi(We))return ee(We,wt);for(var Kt=We.length,Nt=-1,an=Object(We);++Nt<Kt&&wt(an[Nt],Nt,an)!==!1;);return We}}function Ao(ee){return function(Ie,We,wt){for(var Kt=-1,Nt=Object(Ie),an=wt(Ie),Sn=an.length;Sn--;){var Ln=an[++Kt];if(We(Nt[Ln],Ln,Nt)===!1)break}return Ie}}function Ra(ee,Ie,We,wt,Kt,Nt){var an=Kt&L,Sn=ee.length,Ln=Ie.length;if(Sn!=Ln&&!(an&&Ln>Sn))return!1;var pr=Nt.get(ee);if(pr&&Nt.get(Ie))return pr==Ie;var ar=-1,cr=!0,Ur=Kt&a?new co:p;for(Nt.set(ee,Ie),Nt.set(Ie,ee);++ar<Sn;){var Yr=ee[ar],Jr=Ie[ar];if(wt)var yo=an?wt(Jr,Yr,ar,Ie,ee,Nt):wt(Yr,Jr,ar,ee,Ie,Nt);if(yo!==p){if(yo)continue;cr=!1;break}if(Ur){if(!z(Ie,function(Hi,bi){if(!Ur.has(bi)&&(Yr===Hi||We(Yr,Hi,wt,Kt,Nt)))return Ur.add(bi)})){cr=!1;break}}else if(!(Yr===Jr||We(Yr,Jr,wt,Kt,Nt))){cr=!1;break}}return Nt.delete(ee),Nt.delete(Ie),cr}function sc(ee,Ie,We,wt,Kt,Nt,an){switch(We){case j:if(ee.byteLength!=Ie.byteLength||ee.byteOffset!=Ie.byteOffset)return!1;ee=ee.buffer,Ie=Ie.buffer;case K:return!(ee.byteLength!=Ie.byteLength||!wt(new He(ee),new He(Ie)));case V:case N:case _e:return Vo(+ee,+Ie);case Q:return ee.name==Ie.name&&ee.message==Ie.message;case ce:case $:return ee==Ie+"";case we:var Sn=jt;case M:var Ln=Nt&L;if(Sn||(Sn=zn),ee.size!=Ie.size&&!Ln)return!1;var pr=an.get(ee);if(pr)return pr==Ie;Nt|=a,an.set(ee,Ie);var ar=Ra(Sn(ee),Sn(Ie),wt,Kt,Nt,an);return an.delete(ee),ar;case U:if(Pn)return Pn.call(ee)==Pn.call(Ie)}return!1}function ac(ee,Ie,We,wt,Kt,Nt){var an=Kt&L,Sn=go(ee),Ln=Sn.length,pr=go(Ie),ar=pr.length;if(Ln!=ar&&!an)return!1;for(var cr=Ln;cr--;){var Ur=Sn[cr];if(!(an?Ur in Ie:Ue.call(Ie,Ur)))return!1}var Yr=Nt.get(ee);if(Yr&&Nt.get(Ie))return Yr==Ie;var Jr=!0;Nt.set(ee,Ie),Nt.set(Ie,ee);for(var yo=an;++cr<Ln;){Ur=Sn[cr];var Hi=ee[Ur],bi=Ie[Ur];if(wt)var Ds=an?wt(bi,Hi,Ur,Ie,ee,Nt):wt(Hi,bi,Ur,ee,Ie,Nt);if(!(Ds===p?Hi===bi||We(Hi,bi,wt,Kt,Nt):Ds)){Jr=!1;break}yo||(yo=Ur=="constructor")}if(Jr&&!yo){var Qr=ee.constructor,ro=Ie.constructor;Qr!=ro&&"constructor"in ee&&"constructor"in Ie&&!(typeof Qr=="function"&&Qr instanceof Qr&&typeof ro=="function"&&ro instanceof ro)&&(Jr=!1)}return Nt.delete(ee),Nt.delete(Ie),Jr}function il(ee){return kl(ee,go,Su)}function jc(){var ee=Xn.iteratee||al;return ee=ee===al?Ks:ee,arguments.length?ee(arguments[0],arguments[1]):ee}function cs(ee,Ie){var We=ee.__data__;return Tu(Ie)?We[typeof Ie=="string"?"string":"hash"]:We.map}function Lc(ee){for(var Ie=go(ee),We=Ie.length;We--;){var wt=Ie[We],Kt=ee[wt];Ie[We]=[wt,Kt,hs(Kt)]}return Ie}function Fa(ee,Ie){var We=ft(ee,Ie);return rc(We)?We:p}var Su=gt?Bt(gt,Object):Cu,Mo=vu;(Jn&&Mo(new Jn(new ArrayBuffer(1)))!=j||jn&&Mo(new jn)!=we||Qn&&Mo(Qn.resolve())!=ne||Un&&Mo(new Un)!=M||jr&&Mo(new jr)!=de)&&(Mo=function(ee){var Ie=pe.call(ee),We=Ie==Me?ee.constructor:p,wt=We?Vn(We):p;if(wt)switch(wt){case lr:return j;case br:return we;case ii:return ne;case ci:return M;case zi:return de}return Ie});function lc(ee,Ie,We){Ie=js(Ie,ee)?[Ie]:wi(Ie);for(var wt,Kt=-1,an=Ie.length;++Kt<an;){var Nt=Ul(Ie[Kt]);if(!(wt=ee!=null&&We(ee,Nt)))break;ee=ee[Nt]}if(wt)return wt;var an=ee?ee.length:0;return!!an&&La(an)&&ko(Nt,an)&&(di(ee)||Ro(ee))}function Ll(ee){var Ie=ee.length,We=ee.constructor(Ie);return Ie&&typeof ee[0]=="string"&&Ue.call(ee,"index")&&(We.index=ee.index,We.input=ee.input),We}function uc(ee){return typeof ee.constructor=="function"&&!Oa(ee)?ho(nt(ee)):{}}function Dl(ee,Ie,We,wt){var Kt=ee.constructor;switch(Ie){case K:return ls(ee);case V:case N:return new Kt(+ee);case j:return ic(ee,wt);case W:case J:case re:case ue:case te:case se:case xe:case ie:case ve:return Js(ee,wt);case we:return us(ee,wt,We);case _e:case $:return new Kt(ee);case ce:return Fl(ee);case M:return bu(ee,wt,We);case U:return to(ee)}}function ko(ee,Ie){return Ie=Ie??D,!!Ie&&(typeof ee=="number"||Wt.test(ee))&&ee>-1&&ee%1==0&&ee<Ie}function Eu(ee,Ie,We){if(!gi(We))return!1;var wt=typeof Ie;return(wt=="number"?Gi(We)&&ko(Ie,We.length):wt=="string"&&Ie in We)?Vo(We[Ie],ee):!1}function js(ee,Ie){if(di(ee))return!1;var We=typeof ee;return We=="number"||We=="symbol"||We=="boolean"||ee==null||no(ee)?!0:Oe.test(ee)||!De.test(ee)||Ie!=null&&ee in Object(Ie)}function Tu(ee){var Ie=typeof ee;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ee!=="__proto__":ee===null}function Bl(ee){return!!Xr&&Xr in ee}function Oa(ee){var Ie=ee&&ee.constructor,We=typeof Ie=="function"&&Ie.prototype||Or;return ee===We}function hs(ee){return ee===ee&&!gi(ee)}function Nl(ee,Ie){return function(We){return We==null?!1:We[ee]===Ie&&(Ie!==p||ee in Object(We))}}function Dc(ee){var Ie=[];if(ee!=null)for(var We in Object(ee))Ie.push(We);return Ie}var Nr=or(function(ee){ee=$o(ee);var Ie=[];return Le.test(ee)&&Ie.push(""),ee.replace(Ye,function(We,wt,Kt,Nt){Ie.push(Kt?Nt.replace(pt,"$1"):wt||We)}),Ie});function Ul(ee){if(typeof ee=="string"||no(ee))return ee;var Ie=ee+"";return Ie=="0"&&1/ee==-R?"-0":Ie}function Vn(ee){if(ee!=null){try{return Tr.call(ee)}catch{}try{return ee+""}catch{}}return""}function Vl(ee){for(var Ie=-1,We=ee?ee.length:0,wt=0,Kt=[];++Ie<We;){var Nt=ee[Ie];Nt&&(Kt[wt++]=Nt)}return Kt}function wr(ee,Ie){var We=di(ee)?ct:Gr;return We(ee,jc(Ie,3))}function or(ee,Ie){if(typeof ee!="function"||Ie&&typeof Ie!="function")throw new TypeError(T);var We=function(){var wt=arguments,Kt=Ie?Ie.apply(this,wt):wt[0],Nt=We.cache;if(Nt.has(Kt))return Nt.get(Kt);var an=ee.apply(this,wt);return We.cache=Nt.set(Kt,an),an};return We.cache=new(or.Cache||Br),We}or.Cache=Br;function zo(ee){return oi(ee,!1,!0)}function Vo(ee,Ie){return ee===Ie||ee!==ee&&Ie!==Ie}function Ro(ee){return ds(ee)&&Ue.call(ee,"callee")&&(!yt.call(ee,"callee")||pe.call(ee)==C)}var di=Array.isArray;function Gi(ee){return ee!=null&&La(ee.length)&&!ja(ee)}function ds(ee){return Fo(ee)&&Gi(ee)}var Oi=Ut||ll;function Ls(ee){if(Gi(ee)&&(di(ee)||typeof ee=="string"||typeof ee.splice=="function"||Oi(ee)||Ro(ee)))return!ee.length;var Ie=Mo(ee);if(Ie==we||Ie==M)return!ee.size;if(Wn||Oa(ee))return!pn(ee).length;for(var We in ee)if(Ue.call(ee,We))return!1;return!0}function ja(ee){var Ie=gi(ee)?pe.call(ee):"";return Ie==he||Ie==Te}function La(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=D}function gi(ee){var Ie=typeof ee;return!!ee&&(Ie=="object"||Ie=="function")}function Fo(ee){return!!ee&&typeof ee=="object"}function Qs(ee){if(!Fo(ee)||pe.call(ee)!=Me||Qe(ee))return!1;var Ie=nt(ee);if(Ie===null)return!0;var We=Ue.call(Ie,"constructor")&&Ie.constructor;return typeof We=="function"&&We instanceof We&&Tr.call(We)==me}function no(ee){return typeof ee=="symbol"||Fo(ee)&&pe.call(ee)==U}var mo=G?Je(G):Oc;function ol(ee){return Os(ee,er(ee))}function $o(ee){return ee==null?"":Fs(ee)}function ea(ee,Ie,We){var wt=ee==null?p:fo(ee,Ie);return wt===p?We:wt}function $l(ee,Ie){return ee!=null&&lc(ee,Ie,Uo)}function go(ee){return Gi(ee)?zs(ee):ss(ee)}function er(ee){return Gi(ee)?zs(ee,!0):as(ee)}var sl=Ol(function(ee,Ie,We){zl(ee,Ie,We)});function Iu(ee){return ee}function al(ee){return Ks(typeof ee=="function"?ee:oi(ee,!0))}function ta(ee){return js(ee)?q(Ul(ee)):Rl(ee)}function Cu(){return[]}function ll(){return!1}Xn.compact=Vl,Xn.iteratee=al,Xn.keys=go,Xn.keysIn=er,Xn.memoize=or,Xn.merge=sl,Xn.property=ta,Xn.toPlainObject=ol,Xn.clone=zo,Xn.eq=Vo,Xn.forEach=wr,Xn.get=ea,Xn.hasIn=$l,Xn.identity=Iu,Xn.isArguments=Ro,Xn.isArray=di,Xn.isArrayLike=Gi,Xn.isArrayLikeObject=ds,Xn.isBuffer=Oi,Xn.isEmpty=Ls,Xn.isFunction=ja,Xn.isLength=La,Xn.isObject=gi,Xn.isObjectLike=Fo,Xn.isPlainObject=Qs,Xn.isSymbol=no,Xn.isTypedArray=mo,Xn.stubArray=Cu,Xn.stubFalse=ll,Xn.toString=$o,Xn.each=wr,Xn.VERSION=v,kn&&((kn.exports=Xn)._=Xn,at._=Xn)}).call(bC)}(Sf,Sf.exports)),Sf.exports}var hy,I1;function EC(){if(I1)return hy;I1=1,hy=u;function u(v,x){var T=v&&v.type,w;if(T==="FeatureCollection")for(w=0;w<v.features.length;w++)u(v.features[w],x);else if(T==="GeometryCollection")for(w=0;w<v.geometries.length;w++)u(v.geometries[w],x);else if(T==="Feature")u(v.geometry,x);else if(T==="Polygon")c(v.coordinates,x);else if(T==="MultiPolygon")for(w=0;w<v.coordinates.length;w++)c(v.coordinates[w],x);return v}function c(v,x){if(v.length!==0){p(v[0],x);for(var T=1;T<v.length;T++)p(v[T],!x)}}function p(v,x){for(var T=0,w=0,a=0,L=v.length,R=L-1;a<L;R=a++){var D=(v[a][0]-v[R][0])*(v[R][1]+v[a][1]),C=T+D;w+=Math.abs(T)>=Math.abs(D)?T-C+D:D-C+T,T=C}T+w>=0!=!!x&&v.reverse()}return hy}const TC=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var dy,C1;function IC(){return C1||(C1=1,dy=TC),dy}var fy,P1;function CC(){if(P1)return fy;P1=1;var u=SC(),c=EC(),p={};IC().forEach(function(w){if(w.polygon==="all")p[w.key]=!0;else{var a=w.polygon==="whitelist"?"included_values":"excluded_values",L={};w.values.forEach(function(R){L[R]=!0}),p[w.key]={},p[w.key][a]=L}});function v(w,a){return(w.version||a.version)&&w.version!==a.version?(+w.version||0)>(+a.version||0)?w:a:u.merge(w,a)}var x={};x=function(w,a,L){a=u.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:p,deduplicator:v},a);var R;return typeof XMLDocument<"u"&&w instanceof XMLDocument||typeof XMLDocument>"u"&&w.childNodes?R=C(w):R=D(w),R;function D(N){var Q=new Array,he=new Array,Te=new Array;function we(K){var j=u.clone(K);j.lat=K.center.lat,j.lon=K.center.lon,j.__is_center_placeholder=!0,Q.push(j)}function _e(K){var j=u.clone(K);j.nodes=[];function W(J,re,ue){var te={type:"node",id:"_"+j.type+"/"+j.id+"bounds"+ue,lat:J,lon:re};j.nodes.push(te.id),Q.push(te)}W(j.bounds.minlat,j.bounds.minlon,1),W(j.bounds.maxlat,j.bounds.minlon,2),W(j.bounds.maxlat,j.bounds.maxlon,3),W(j.bounds.minlat,j.bounds.maxlon,4),j.nodes.push(j.nodes[0]),j.__is_bounds_placeholder=!0,he.push(j)}function Me(K){function j(W,J,re){var ue={type:"node",id:re,lat:W,lon:J};Q.push(ue)}u.isArray(K.nodes)||(K.nodes=K.geometry.map(function(W){return W!==null?"_anonymous@"+W.lat+"/"+W.lon:"_anonymous@unknown_location"})),K.geometry.forEach(function(W,J){W&&j(W.lat,W.lon,K.nodes[J])})}function ne(K){function j(J,re,ue){var te={type:"node",id:ue,lat:J,lon:re};Q.push(te)}function W(J,re){if(he.some(function(se){return se.type=="way"&&se.id==re}))return;var ue={type:"way",id:re,nodes:[]};function te(se,xe){var ie={type:"node",id:"_anonymous@"+se+"/"+xe,lat:se,lon:xe};ue.nodes.push(ie.id),Q.push(ie)}J.forEach(function(se){se?te(se.lat,se.lon):ue.nodes.push(void 0)}),he.push(ue)}K.members.forEach(function(J,re){J.type=="node"?J.lat&&j(J.lat,J.lon,J.ref):J.type=="way"&&J.geometry&&(J.ref="_fullGeom"+J.ref,W(J.geometry,J.ref))})}for(var ce=0;ce<N.elements.length;ce++)switch(N.elements[ce].type){case"node":var M=N.elements[ce];Q.push(M);break;case"way":var $=u.clone(N.elements[ce]);$.nodes=u.clone($.nodes),he.push($),$.center&&we($),$.geometry?Me($):$.bounds&&_e($);break;case"relation":var U=u.clone(N.elements[ce]);U.members=u.clone(U.members),Te.push(U);var de=U.members&&U.members.some(function(K){return K.type=="node"&&K.lat||K.type=="way"&&K.geometry&&K.geometry.length>0});U.center&&we(U),de?ne(U):U.bounds&&_e(U);break}return k(Q,he,Te)}function C(N){var Q=new Array,he=new Array,Te=new Array;function we(U,de,K){U.hasAttribute(K)&&(de[K]=U.getAttribute(K))}function _e(U,de){var K=u.clone(U);we(de,K,"lat"),we(de,K,"lon"),K.__is_center_placeholder=!0,Q.push(K)}function Me(U,de){var K=u.clone(U);K.nodes=[];function j(W,J,re){var ue={type:"node",id:"_"+K.type+"/"+K.id+"bounds"+re,lat:W,lon:J};K.nodes.push(ue.id),Q.push(ue)}j(de.getAttribute("minlat"),de.getAttribute("minlon"),1),j(de.getAttribute("maxlat"),de.getAttribute("minlon"),2),j(de.getAttribute("maxlat"),de.getAttribute("maxlon"),3),j(de.getAttribute("minlat"),de.getAttribute("maxlon"),4),K.nodes.push(K.nodes[0]),K.__is_bounds_placeholder=!0,he.push(K)}function ne(U,de){function K(j,W,J){var re={type:"node",id:J,lat:j,lon:W};return Q.push(re),re.id}u.isArray(U.nodes)||(U.nodes=[],u.each(de,function(j,W){U.nodes.push("_anonymous@"+j.getAttribute("lat")+"/"+j.getAttribute("lon"))})),u.each(de,function(j,W){j.getAttribute("lat")&&K(j.getAttribute("lat"),j.getAttribute("lon"),U.nodes[W])})}function ce(U,de){function K(W,J,re){var ue={type:"node",id:re,lat:W,lon:J};Q.push(ue)}function j(W,J){if(he.some(function(te){return te.type=="way"&&te.id==J}))return;var re={type:"way",id:J,nodes:[]};function ue(te,se){var xe={type:"node",id:"_anonymous@"+te+"/"+se,lat:te,lon:se};re.nodes.push(xe.id),Q.push(xe)}u.each(W,function(te){te.getAttribute("lat")?ue(te.getAttribute("lat"),te.getAttribute("lon")):re.nodes.push(void 0)}),he.push(re)}u.each(de,function(W,J){U.members[J].type=="node"?W.getAttribute("lat")&&K(W.getAttribute("lat"),W.getAttribute("lon"),U.members[J].ref):U.members[J].type=="way"&&W.getElementsByTagName("nd").length>0&&(U.members[J].ref="_fullGeom"+U.members[J].ref,j(W.getElementsByTagName("nd"),U.members[J].ref))})}u.each(N.getElementsByTagName("node"),function(U,de){var K={};u.each(U.getElementsByTagName("tag"),function(W){K[W.getAttribute("k")]=W.getAttribute("v")});var j={type:"node"};we(U,j,"id"),we(U,j,"lat"),we(U,j,"lon"),we(U,j,"version"),we(U,j,"timestamp"),we(U,j,"changeset"),we(U,j,"uid"),we(U,j,"user"),u.isEmpty(K)||(j.tags=K),Q.push(j)});var M,$;return u.each(N.getElementsByTagName("way"),function(U,de){var K={},j=[];u.each(U.getElementsByTagName("tag"),function(re){K[re.getAttribute("k")]=re.getAttribute("v")});var W=!1;u.each(U.getElementsByTagName("nd"),function(re,ue){var te;(te=re.getAttribute("ref"))&&(j[ue]=te),!W&&re.getAttribute("lat")&&(W=!0)});var J={type:"way"};we(U,J,"id"),we(U,J,"version"),we(U,J,"timestamp"),we(U,J,"changeset"),we(U,J,"uid"),we(U,J,"user"),j.length>0&&(J.nodes=j),u.isEmpty(K)||(J.tags=K),(M=U.getElementsByTagName("center")[0])&&_e(J,M),W?ne(J,U.getElementsByTagName("nd")):($=U.getElementsByTagName("bounds")[0])&&Me(J,$),he.push(J)}),u.each(N.getElementsByTagName("relation"),function(U,de){var K={},j=[];u.each(U.getElementsByTagName("tag"),function(re){K[re.getAttribute("k")]=re.getAttribute("v")});var W=!1;u.each(U.getElementsByTagName("member"),function(re,ue){j[ue]={},we(re,j[ue],"ref"),we(re,j[ue],"role"),we(re,j[ue],"type"),(!W&&j[ue].type=="node"&&re.getAttribute("lat")||j[ue].type=="way"&&re.getElementsByTagName("nd").length>0)&&(W=!0)});var J={type:"relation"};we(U,J,"id"),we(U,J,"version"),we(U,J,"timestamp"),we(U,J,"changeset"),we(U,J,"uid"),we(U,J,"user"),j.length>0&&(J.members=j),u.isEmpty(K)||(J.tags=K),(M=U.getElementsByTagName("center")[0])&&_e(J,M),W?ce(J,U.getElementsByTagName("member")):($=U.getElementsByTagName("bounds")[0])&&Me(J,$),Te.push(J)}),k(Q,he,Te)}function k(N,Q,he){function Te(Wt,Tt){if(typeof Tt!="object"&&(Tt={}),typeof a.uninterestingTags=="function")return!a.uninterestingTags(Wt,Tt);for(var kt in Wt)if(a.uninterestingTags[kt]!==!0&&!(Tt[kt]===!0||Tt[kt]===Wt[kt]))return!0;return!1}function we(Wt){var Tt={timestamp:Wt.timestamp,version:Wt.version,changeset:Wt.changeset,user:Wt.user,uid:Wt.uid};for(var kt in Tt)Tt[kt]===void 0&&delete Tt[kt];return Tt}for(var _e=new Object,Me=new Object,ne=0;ne<N.length;ne++){var ce=N[ne];_e[ce.id]!==void 0&&(ce=a.deduplicator(ce,_e[ce.id])),_e[ce.id]=ce,typeof ce.tags<"u"&&Te(ce.tags)&&(Me[ce.id]=!0)}for(var ne=0;ne<he.length;ne++)if(u.isArray(he[ne].members))for(var M=0;M<he[ne].members.length;M++)he[ne].members[M].type=="node"&&(Me[he[ne].members[M].ref]=!0);for(var $=new Object,U=new Object,ne=0;ne<Q.length;ne++){var de=Q[ne];if($[de.id]&&(de=a.deduplicator(de,$[de.id])),$[de.id]=de,u.isArray(de.nodes))for(var M=0;M<de.nodes.length;M++)typeof de.nodes[M]!="object"&&(U[de.nodes[M]]=!0,de.nodes[M]=_e[de.nodes[M]])}var K=new Array;for(var j in _e){var ce=_e[j];(!U[j]||Me[j])&&K.push(ce)}for(var W=new Array,ne=0;ne<he.length;ne++){var J=he[ne];W[J.id]&&(J=a.deduplicator(J,W[J.id])),W[J.id]=J}var re={node:{},way:{},relation:{}};for(var j in W){var J=W[j];if(!u.isArray(J.members)){a.verbose&&console.warn("Relation",J.type+"/"+J.id,"ignored because it has no members");continue}for(var M=0;M<J.members.length;M++){var ue=J.members[M].type,te=J.members[M].ref;if(typeof te!="number"&&(te=te.replace("_fullGeom","")),!re[ue]){a.verbose&&console.warn("Relation",J.type+"/"+J.id,"member",ue+"/"+te,"ignored because it has an invalid type");continue}typeof re[ue][te]>"u"&&(re[ue][te]=[]),re[ue][te].push({role:J.members[M].role,rel:J.id,reltags:J.tags})}}var se,xe=[];for(ne=0;ne<K.length;ne++){if(typeof K[ne].lon>"u"||typeof K[ne].lat>"u"){a.verbose&&console.warn("POI",K[ne].type+"/"+K[ne].id,"ignored because it lacks coordinates");continue}var ie={type:"Feature",id:K[ne].type+"/"+K[ne].id,properties:{type:K[ne].type,id:K[ne].id,tags:K[ne].tags||{},relations:re.node[K[ne].id]||[],meta:we(K[ne])},geometry:{type:"Point",coordinates:[+K[ne].lon,+K[ne].lat]}};K[ne].__is_center_placeholder&&(ie.properties.geometry="center"),L?L(ie):xe.push(ie)}for(var ve=[],De=[],ne=0;ne<he.length;ne++)if(W[he[ne].id]===he[ne]){if(typeof he[ne].tags<"u"&&(he[ne].tags.type=="route"||he[ne].tags.type=="waterway")){let Tt=function(kt){var Yt=!1,un;un=kt.members.filter(function(cn){return cn.type==="way"}),un=un.map(function(cn){var en=$[cn.ref];if(en===void 0||en.nodes===void 0){a.verbose&&console.warn("Route "+kt.type+"/"+kt.id,"tainted by a missing or incomplete  way",cn.type+"/"+cn.ref),Yt=!0;return}return{id:cn.ref,role:cn.role,way:en,nodes:en.nodes.filter(function(ze){return ze!==void 0?!0:(Yt=!0,a.verbose&&console.warn("Route",kt.type+"/"+kt.id,"tainted by a way",cn.type+"/"+cn.ref,"with a missing node"),!1)})}}),un=u.compact(un);var In;In=T(un);var at=[];if(at=u.compact(In.map(function(cn){return u.compact(cn.map(function(en){return[+en.lon,+en.lat]}))})),at.length==0)return a.verbose&&console.warn("Route",kt.type+"/"+kt.id,"contains no coordinates"),!1;var kn={type:"Feature",id:kt.type+"/"+kt.id,properties:{type:kt.type,id:kt.id,tags:kt.tags||{},relations:re[kt.type][kt.id]||[],meta:we(kt)},geometry:{type:at.length===1?"LineString":"MultiLineString",coordinates:at.length===1?at[0]:at}};return Yt&&(a.verbose&&console.warn("Route",kt.type+"/"+kt.id,"is tainted"),kn.properties.tainted=!0),kn};var _t=Tt;if(!u.isArray(he[ne].members)){a.verbose&&console.warn("Route",he[ne].type+"/"+he[ne].id,"ignored because it has no members");continue}if(he[ne].members.forEach(function(kt){$[kt.ref]&&!Te($[kt.ref].tags)&&($[kt.ref].is_skippablerelationmember=!0)}),ie=Tt(he[ne]),ie===!1){a.verbose&&console.warn("Route relation",he[ne].type+"/"+he[ne].id,"ignored because it has invalid geometry");continue}L?L(c(ie)):De.push(ie)}if(typeof he[ne].tags<"u"&&(he[ne].tags.type=="multipolygon"||he[ne].tags.type=="boundary")){let kt=function(Yt,un){var In=!1,at=Le?"way":"relation",kn=typeof Yt.id=="number"?Yt.id:+Yt.id.replace("_fullGeom",""),cn;cn=un.members.filter(function(z){return z.type==="way"}),cn=cn.map(function(z){var q=$[z.ref];if(q===void 0||q.nodes===void 0){a.verbose&&console.warn("Multipolygon",at+"/"+kn,"tainted by a missing or incomplete way",z.type+"/"+z.ref),In=!0;return}return{id:z.ref,role:z.role||"outer",way:q,nodes:q.nodes.filter(function(Re){return Re!==void 0?!0:(In=!0,a.verbose&&console.warn("Multipolygon",at+"/"+kn,"tainted by a way",z.type+"/"+z.ref,"with a missing node"),!1)})}}),cn=u.compact(cn);var en,ze;en=T(cn.filter(function(z){return z.role==="outer"})),ze=T(cn.filter(function(z){return z.role==="inner"}));var G;function H(z){var q=function(jt,Bt){for(var zn=0;zn<Bt.length;zn++)if(Je(Bt[zn],jt))return!0;return!1},Re=function(jt){return jt.map(function(Bt){return[+Bt.lat,+Bt.lon]})},Je=function(jt,Bt){for(var zn=jt[0],Zn=jt[1],qt=!1,Or=0,qr=Bt.length-1;Or<Bt.length;qr=Or++){var Xr=Bt[Or][0],Tr=Bt[Or][1],Ue=Bt[qr][0],me=Bt[qr][1],pe=Tr>Zn!=me>Zn&&zn<(Ue-Xr)*(Zn-Tr)/(me-Tr)+Xr;pe&&(qt=!qt)}return qt},ft,Qe;for(z=Re(z),ft=0;ft<en.length;ft++)if(Qe=Re(en[ft]),q(Qe,z))return ft}G=en.map(function(z){return[z]});for(var Ce=0;Ce<ze.length;Ce++){var rt=H(ze[Ce]);rt!==void 0?G[rt].push(ze[Ce]):a.verbose&&console.warn("Multipolygon",at+"/"+kn,"contains an inner ring with no containing outer")}var ct=[];if(ct=u.compact(G.map(function(z){var q=u.compact(z.map(function(Re){if(Re.length<4){a.verbose&&console.warn("Multipolygon",at+"/"+kn,"contains a ring with less than four nodes");return}return u.compact(Re.map(function(Je){return[+Je.lon,+Je.lat]}))}));if(q.length==0){a.verbose&&console.warn("Multipolygon",at+"/"+kn,"contains an empty ring cluster");return}return q})),ct.length==0)return a.verbose&&console.warn("Multipolygon",at+"/"+kn,"contains no coordinates"),!1;var Et="MultiPolygon";ct.length===1&&(Et="Polygon",ct=ct[0]);var ye={type:"Feature",id:Yt.type+"/"+kn,properties:{type:Yt.type,id:kn,tags:Yt.tags||{},relations:re[Yt.type][Yt.id]||[],meta:we(Yt)},geometry:{type:Et,coordinates:ct}};return In&&(a.verbose&&console.warn("Multipolygon",at+"/"+kn,"is tainted"),ye.properties.tainted=!0),ye};var Pt=kt;if(!u.isArray(he[ne].members)){a.verbose&&console.warn("Multipolygon",he[ne].type+"/"+he[ne].id,"ignored because it has no members");continue}for(var Oe=0,M=0;M<he[ne].members.length;M++)he[ne].members[M].role=="outer"?Oe++:a.verbose&&he[ne].members[M].role!="inner"&&console.warn("Multipolygon",he[ne].type+"/"+he[ne].id,"member",he[ne].members[M].type+"/"+he[ne].members[M].ref,'ignored because it has an invalid role: "'+he[ne].members[M].role+'"');if(he[ne].members.forEach(function(Yt){$[Yt.ref]&&(Yt.role==="outer"&&!Te($[Yt.ref].tags,he[ne].tags)&&($[Yt.ref].is_skippablerelationmember=!0),Yt.role==="inner"&&!Te($[Yt.ref].tags)&&($[Yt.ref].is_skippablerelationmember=!0))}),Oe==0){a.verbose&&console.warn("Multipolygon relation",he[ne].type+"/"+he[ne].id,"ignored because it has no outer ways");continue}var Le=!1;Oe==1&&!Te(he[ne].tags,{type:!0})&&(Le=!0);var ie=null;if(!Le)ie=kt(he[ne],he[ne]);else{var Ye=he[ne].members.filter(function(Yt){return Yt.role==="outer"})[0];if(Ye=$[Ye.ref],Ye===void 0){a.verbose&&console.warn("Multipolygon relation",he[ne].type+"/"+he[ne].id,"ignored because outer way",Ye.type+"/"+Ye.ref,"is missing");continue}Ye.is_skippablerelationmember=!0,ie=kt(Ye,he[ne])}if(ie===!1){a.verbose&&console.warn("Multipolygon relation",he[ne].type+"/"+he[ne].id,"ignored because it has invalid geometry");continue}L?L(c(ie)):De.push(ie)}}for(var ne=0;ne<Q.length;ne++)if($[Q[ne].id]===Q[ne]){if(!u.isArray(Q[ne].nodes)){a.verbose&&console.warn("Way",Q[ne].type+"/"+Q[ne].id,"ignored because it has no nodes");continue}if(!Q[ne].is_skippablerelationmember){typeof Q[ne].id!="number"&&(Q[ne].id=+Q[ne].id.replace("_fullGeom","")),Q[ne].tainted=!1,Q[ne].hidden=!1;var tt=new Array;for(M=0;M<Q[ne].nodes.length;M++)typeof Q[ne].nodes[M]=="object"?tt.push([+Q[ne].nodes[M].lon,+Q[ne].nodes[M].lat]):(a.verbose&&console.warn("Way",Q[ne].type+"/"+Q[ne].id,"is tainted by an invalid node"),Q[ne].tainted=!0);if(tt.length<=1){a.verbose&&console.warn("Way",Q[ne].type+"/"+Q[ne].id,"ignored because it contains too few nodes");continue}var pt="LineString";typeof Q[ne].nodes[0]<"u"&&typeof Q[ne].nodes[Q[ne].nodes.length-1]<"u"&&Q[ne].nodes[0].id===Q[ne].nodes[Q[ne].nodes.length-1].id&&(typeof Q[ne].tags<"u"&&V(Q[ne].tags)||Q[ne].__is_bounds_placeholder)&&(pt="Polygon",tt=[tt]);var ie={type:"Feature",id:Q[ne].type+"/"+Q[ne].id,properties:{type:Q[ne].type,id:Q[ne].id,tags:Q[ne].tags||{},relations:re.way[Q[ne].id]||[],meta:we(Q[ne])},geometry:{type:pt,coordinates:tt}};Q[ne].tainted&&(a.verbose&&console.warn("Way",Q[ne].type+"/"+Q[ne].id,"is tainted"),ie.properties.tainted=!0),Q[ne].__is_bounds_placeholder&&(ie.properties.geometry="bounds"),L?L(c(ie)):pt=="LineString"?ve.push(ie):De.push(ie)}}return L?!0:(se={type:"FeatureCollection",features:[]},se.features=se.features.concat(De),se.features=se.features.concat(ve),se.features=se.features.concat(xe),a.flatProperties&&se.features.forEach(function(Wt){Wt.properties=u.merge(Wt.properties.meta,Wt.properties.tags,{id:Wt.properties.type+"/"+Wt.properties.id})}),se=c(se),se)}function V(N){var Q=a.polygonFeatures;if(typeof Q=="function")return Q(N);if(N.area==="no")return!1;for(var he in N){var Te=N[he],we=Q[he];if(!(typeof we>"u")&&Te!=="no"&&(we===!0||we.included_values&&we.included_values[Te]===!0||we.excluded_values&&we.excluded_values[Te]!==!0))return!0}return!1}};function T(w){for(var a=function(Te){return Te[0]},L=function(Te){return Te[Te.length-1]},R=function(Te,we){return Te!==void 0&&we!==void 0&&Te.id===we.id},D=[],C,k,V,N,Q,he;w.length;)for(C=w.pop().nodes.slice(),D.push(C);w.length&&!R(a(C),L(C));){for(k=a(C),V=L(C),N=0;N<w.length;N++)if(he=w[N].nodes,R(V,a(he))){Q=C.push,he=he.slice(1);break}else if(R(V,L(he))){Q=C.push,he=he.slice(0,-1).reverse();break}else if(R(k,L(he))){Q=C.unshift,he=he.slice(0,-1);break}else if(R(k,a(he))){Q=C.unshift,he=he.slice(1).reverse();break}else he=Q=null;if(!he)break;w.splice(N,1),Q.apply(C,he)}return D}return x.toGeojson=x,fy=x,fy}var PC=CC();const AC=Df(PC),py={type:"FeatureCollection",features:[]},Iw=()=>{const[u,c]=zt.useState(!1),p=zt.useCallback(async(w,a,L)=>{var Q,he;if(u||(console.log(L),L<16))return py;c(!0);let R=300;L>17&&(R=200),L>18&&(R=100),L>19&&(R=50),console.log("overpass: loading...");let D="[out:json]";D+=`[timeout:25];
`,D+='nwr["building"]',D+=`(around:${R},${w},${a});
`,D+="out meta geom;",console.log(D);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(D)}`,{});if(C.status!==200)return c(!1),py;const k=await C.json();console.log("overpass json elements: ",k.elements);const V=AC(k);console.log("overpass osmtogeojson raw: ",V);for await(const Te of V.features){if(!Te.properties)continue;Te.id=Te.properties.id.split("/")[1];const we=(Q=k.elements.filter(Me=>Te.id?typeof Te.id=="number"?Me.id===Te.id:Me.id===parseInt(Te.id):!1))==null?void 0:Q[0];if(we&&(Te.properties.tags=we.tags,Te.properties.nodes=we.nodes),Te.geometry.type==="Polygon"){const Me=dC(Te.geometry.coordinates);var N=vC(Me);Te.properties.center=N.geometry.coordinates}Te.geometry.type==="Point"&&(Te.properties.center=Te.geometry.coordinates);const _e=Te.properties.uid;if(_e){let Me=localStorage.getItem(_e+"-icon");if(Me===null){const ne=await Il.getUser(_e);(he=ne.img)!=null&&he.href?(Me=ne.img.href,localStorage.setItem(_e+"-icon",ne.img.href)):localStorage.setItem(_e+"-icon","")}Te.properties.userIconHref=Me||""}}return console.log("overpass osmtogeojson converted: ",V),console.log("overpass: loaded."),c(!1),V},[]),[v,x]=zt.useState(!1),T=zt.useCallback(async w=>{console.log("overpass: loading...",w),x(!0);const a=`
      [out:json]
      [timeout:25];
      node(id:${w.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(a);const L=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(a)}`,{});if(L.status!==200){x(!1);return}const R=await L.json();console.log("overpass json parent elements: ",R.elements);const D=250,C=`
      [out:json]
      [timeout:25];
      node(id:${w.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${D});
      out;
      `;console.log(C);const k=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(k.status!==200){x(!1);return}const V=await k.json();console.log("overpass json child elements: ",V.elements);const N=`
      [out:json]
      [timeout:25];
      node(id:${w.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${D});
      out;
      `;console.log(N);const Q=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(N)}`,{});if(Q.status!==200){x(!1);return}const he=await Q.json();return console.log("overpass json neighbour elements: ",he.elements),x(!1),[...R.elements,...V.elements,...he.elements]},[]);return{fetchOverpassBuildings:p,fetchOverpassAdmin:T,loadingOverpass:u,loadingOverpassAdmin:v}},MC=()=>Mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),Mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),Mt.jsxs("datalist",{id:"source-list",children:[Mt.jsx("option",{value:"survey"}),Mt.jsx("option",{value:"local knowledge"}),Mt.jsx("option",{value:"extrapolation"}),Mt.jsx("option",{value:"estimation from existing data"})]})]}),my={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},kC=({feature:u,onCancel:c,onSubmit:p})=>{var j,W,J,re;const{detectCountry:v,loadingCountry:x}=_C(),{fetchOverpassAdmin:T,loadingOverpassAdmin:w}=Iw(),a=JSON.parse((j=u.properties)==null?void 0:j.center),[L,R]=zt.useState(void 0),[D,C]=zt.useState(),[k,V]=zt.useState(u),[N,Q]=zt.useState(!1),[he,Te]=zt.useState(!1),[we,_e]=zt.useState(!1),[Me,ne]=zt.useState(),[ce,M]=zt.useState();zt.useEffect(()=>{Q(Il.isLoggedIn())},[]),zt.useEffect(()=>{(async()=>{var te,se;const ue=await v(a[0],a[1]);if(R(ue),(te=ue==null?void 0:ue.properties)!=null&&te.ISO_A3&&S1[ue.properties.ISO_A3]){const xe=S1[ue.properties.ISO_A3];C(xe);const ie=xe.defaultComment+" "+((se=u.properties)==null?void 0:se.id);M(ie)}})()},[u]),zt.useEffect(()=>{console.log(k.properties)},[k]);const $=zt.useCallback(async()=>{const ue=await sC.openReverseGeocoder([a[0],a[1]]);V(te=>{const se={properties:{"addr:province":ue.prefecture,"addr:city":ue.city,...te.properties}};return te.properties=se.properties,te})},[]),U=zt.useCallback(async()=>{if(!k.properties)return;k.properties.nodes;const ue=await T(JSON.parse(k.properties.nodes));console.log("onOverpassReverseGeocode",ue),ne(ue)},[k]),de=zt.useCallback(async ue=>{var Oe,Le,Ye;_e(!0),ue.preventDefault();const te=new FormData(ue.currentTarget),se=JSON.parse((Oe=u.properties)==null?void 0:Oe.tags);te.forEach((tt,pt)=>{typeof tt=="string"&&tt.length>0&&pt!=="comment"&&pt!=="source"&&(se[pt]=tt)});const xe={type:"way",id:u.id,version:(Le=u.properties)==null?void 0:Le.version,tags:se,nodes:JSON.parse((Ye=u.properties)==null?void 0:Ye.nodes)};console.info(JSON.stringify(xe,null,2));const ie={create:[],modify:[xe],delete:[]},ve=te.get("comment");ve&&(my.comment=ve.toString());const De=te.get("source");De&&(my.source=De.toString()),await Il.uploadChangeset(my,ie),_e(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),p()},[u]),K=zt.useCallback(()=>{Te(!0)},[]);return k.properties?Mt.jsxs("div",{children:[Mt.jsxs("div",{children:["OSM:"," ",Mt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+k.properties.id,target:"_blank",children:k.properties.id})," | ",Mt.jsx(yx,{feature:k}),D&&Mt.jsxs("span",{children:[" | ","Address:"," ",Mt.jsx(xC,{feature:k,fields:D})]})]}),x?Mt.jsx(Pc,{icon:jy,spin:!0}):Mt.jsx(Mt.Fragment,{children:D?Mt.jsxs("form",{onSubmit:de,children:[Mt.jsx("div",{className:"flex flex-wrap",children:Mt.jsx(cy,{feature:k,fieldOption:D.postcodeField,onChange:K})}),Mt.jsx("div",{className:"flex flex-wrap",children:D.mainFields.map(ue=>Mt.jsx(cy,{feature:k,fieldOption:ue,onChange:K,suggestList:Me},ue.key))}),Mt.jsx("div",{className:"flex flex-wrap",children:D.detailFields.map(ue=>Mt.jsx(cy,{feature:k,fieldOption:ue,onChange:K},ue.key))}),Mt.jsxs("div",{className:"flex flex-wrap",children:[Mt.jsx(MC,{}),Mt.jsx(wC,{defaultValue:ce})]}),Mt.jsx("div",{className:"flex flex-wrap",children:Mt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[Mt.jsx("button",{type:"button",onClick:c,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((W=L==null?void 0:L.properties)==null?void 0:W.ISO_A3)==="JPN"&&Mt.jsx("button",{type:"button",onClick:$,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),Mt.jsxs("button",{type:"button",disabled:w,onClick:U,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",w&&Mt.jsx(Pc,{icon:jy,spin:!0})]}),Mt.jsx("button",{disabled:!N||we||!he,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!N&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),Mt.jsx(gx,{})]})]})})]}):Mt.jsx("div",{className:"flex flex-wrap",children:Mt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[Mt.jsxs("div",{className:"py-2",children:[Mt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(J=L==null?void 0:L.properties)==null?void 0:J.NAME," (ISO code:",(re=L==null?void 0:L.properties)==null?void 0:re.ISO_A3,") does not support yet."]}),Mt.jsx("p",{children:Mt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),Mt.jsx("button",{type:"button",onClick:c,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function zC(u,c){const[p,v]=zt.useState(u);return zt.useEffect(()=>{const x=setTimeout(()=>{v(u)},c);return()=>{clearTimeout(x)}},[u,c]),p}const RC={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},FC={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function OC(){const u=zt.useRef(null),[c,p]=zt.useState(),v=zC(c,2500),x=zt.useRef(null),[T,w]=zt.useState({type:"FeatureCollection",features:[]}),[a,L]=zt.useState("auto"),[R,D]=zt.useState(),[C,k]=zt.useState([]),{fetchOverpassBuildings:V,loadingOverpass:N}=Iw();zt.useEffect(()=>{setTimeout(()=>{var M;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(M=x.current)==null||M.trigger())},500)},[]);const Q=zt.useCallback(M=>{const $=M.target.getCenter(),U=M.target.getZoom();p({zoom:U,latitude:$.lat,longitude:$.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),he=zt.useCallback(M=>{p(M.viewState)},[]),Te=zt.useCallback(M=>{p(M.viewState)},[]);zt.useEffect(()=>{(async()=>{if(!v)return;const M=v,$=await V(M.latitude,M.longitude,M.zoom);w($)})()},[v]);const we=zt.useCallback(M=>{var j;L("pointer");const{features:$,point:{x:U,y:de}}=M,K=$&&$[0];K?((j=u.current)==null||j.setFeatureState({source:"buildings-source",id:K.id},{hover:!0}),D({feature:K,x:U,y:de})):D(void 0)},[]),_e=zt.useCallback(M=>{var $;L("auto"),($=u.current)==null||$.querySourceFeatures("buildings-source").map(U=>{var de;(de=u.current)==null||de.setFeatureState({source:"buildings-source",id:U.id},{hover:!1})}),D(void 0)},[]),Me=zt.useCallback(M=>{var U;ne();const $=M.features&&M.features[0];$&&((U=u.current)==null||U.setFeatureState({source:"buildings-source",id:$.id},{select:!0}),k([$]))},[]),ne=zt.useCallback(()=>{var M;(M=u.current)==null||M.querySourceFeatures("buildings-source").map($=>{var U;(U=u.current)==null||U.setFeatureState({source:"buildings-source",id:$.id},{select:!1})}),k([])},[]),ce=zt.useMemo(()=>{let M=25;return c&&(M=c.zoom<18?20:c.zoom<19?25:35),T.features.map(($,U)=>!$.properties||!$.properties.center?null:Mt.jsx(Nb,{style:{cursor:"pointer"},longitude:$.properties.center[0],latitude:$.properties.center[1],anchor:"center",children:Mt.jsx(FE,{feature:$,size:M})},`marker-${U}`))},[T,c]);return Mt.jsxs("div",{children:[Mt.jsx(pE,{}),Mt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:Mt.jsx(LE,{viewState:c})}),Mt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[C.length>0&&Mt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:Mt.jsx("div",{style:{padding:"10px"},children:C.map(M=>Mt.jsx(kC,{feature:M,onCancel:ne,onSubmit:ne},M.id))})}),Mt.jsxs(Bb,{ref:u,...c,onMove:he,onMoveEnd:Te,onLoad:Q,interactiveLayerIds:["buildings-layer-fill"],onClick:Me,onMouseEnter:we,onMouseLeave:_e,dragRotate:!1,boxZoom:!1,hash:!0,cursor:a,mapLib:R1,style:{width:"100%",height:"100%"},mapStyle:RC,children:[Mt.jsx(Gb,{id:"buildings-source",type:"geojson",data:T,children:Mt.jsx($b,{...FC})}),Mt.jsx(Ub,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),Mt.jsx(Vb,{ref:x,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),Mt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!c||c!=null&&c.zoom&&c.zoom<16?Mt.jsx(Pc,{size:"2x",icon:hE}):N?Mt.jsx(Pc,{size:"2x",icon:jy,spin:!0}):Mt.jsx(Pc,{size:"2x",icon:uE})}),ce,R&&Mt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:R.x+5,top:R.y+5},children:[Mt.jsx(yx,{feature:R.feature}),Mt.jsx("br",{}),Mt.jsx(OE,{feature:R.feature}),Mt.jsx(mE,{feature:R.feature})]})]})]})]})}var gy={},pf={},A1;function jC(){if(A1)return pf;A1=1,pf.byteLength=a,pf.toByteArray=R,pf.fromByteArray=k;for(var u=[],c=[],p=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,T=v.length;x<T;++x)u[x]=v[x],c[v.charCodeAt(x)]=x;c[45]=62,c[95]=63;function w(V){var N=V.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Q=V.indexOf("=");Q===-1&&(Q=N);var he=Q===N?0:4-Q%4;return[Q,he]}function a(V){var N=w(V),Q=N[0],he=N[1];return(Q+he)*3/4-he}function L(V,N,Q){return(N+Q)*3/4-Q}function R(V){var N,Q=w(V),he=Q[0],Te=Q[1],we=new p(L(V,he,Te)),_e=0,Me=Te>0?he-4:he,ne;for(ne=0;ne<Me;ne+=4)N=c[V.charCodeAt(ne)]<<18|c[V.charCodeAt(ne+1)]<<12|c[V.charCodeAt(ne+2)]<<6|c[V.charCodeAt(ne+3)],we[_e++]=N>>16&255,we[_e++]=N>>8&255,we[_e++]=N&255;return Te===2&&(N=c[V.charCodeAt(ne)]<<2|c[V.charCodeAt(ne+1)]>>4,we[_e++]=N&255),Te===1&&(N=c[V.charCodeAt(ne)]<<10|c[V.charCodeAt(ne+1)]<<4|c[V.charCodeAt(ne+2)]>>2,we[_e++]=N>>8&255,we[_e++]=N&255),we}function D(V){return u[V>>18&63]+u[V>>12&63]+u[V>>6&63]+u[V&63]}function C(V,N,Q){for(var he,Te=[],we=N;we<Q;we+=3)he=(V[we]<<16&16711680)+(V[we+1]<<8&65280)+(V[we+2]&255),Te.push(D(he));return Te.join("")}function k(V){for(var N,Q=V.length,he=Q%3,Te=[],we=16383,_e=0,Me=Q-he;_e<Me;_e+=we)Te.push(C(V,_e,_e+we>Me?Me:_e+we));return he===1?(N=V[Q-1],Te.push(u[N>>2]+u[N<<4&63]+"==")):he===2&&(N=(V[Q-2]<<8)+V[Q-1],Te.push(u[N>>10]+u[N>>4&63]+u[N<<2&63]+"=")),Te.join("")}return pf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var M1;function LC(){return M1||(M1=1,function(u){const c=jC(),p=pw(),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;u.Buffer=a,u.SlowBuffer=we,u.INSPECT_MAX_BYTES=50;const x=2147483647;u.kMaxLength=x,a.TYPED_ARRAY_SUPPORT=T(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function T(){try{const ye=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(ye,z),ye.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function w(ye){if(ye>x)throw new RangeError('The value "'+ye+'" is invalid for option "size"');const z=new Uint8Array(ye);return Object.setPrototypeOf(z,a.prototype),z}function a(ye,z,q){if(typeof ye=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(ye)}return L(ye,z,q)}a.poolSize=8192;function L(ye,z,q){if(typeof ye=="string")return k(ye,z);if(ArrayBuffer.isView(ye))return N(ye);if(ye==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye);if(H(ye,ArrayBuffer)||ye&&H(ye.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(ye,SharedArrayBuffer)||ye&&H(ye.buffer,SharedArrayBuffer)))return Q(ye,z,q);if(typeof ye=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Re=ye.valueOf&&ye.valueOf();if(Re!=null&&Re!==ye)return a.from(Re,z,q);const Je=he(ye);if(Je)return Je;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ye[Symbol.toPrimitive]=="function")return a.from(ye[Symbol.toPrimitive]("string"),z,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye)}a.from=function(ye,z,q){return L(ye,z,q)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function R(ye){if(typeof ye!="number")throw new TypeError('"size" argument must be of type number');if(ye<0)throw new RangeError('The value "'+ye+'" is invalid for option "size"')}function D(ye,z,q){return R(ye),ye<=0?w(ye):z!==void 0?typeof q=="string"?w(ye).fill(z,q):w(ye).fill(z):w(ye)}a.alloc=function(ye,z,q){return D(ye,z,q)};function C(ye){return R(ye),w(ye<0?0:Te(ye)|0)}a.allocUnsafe=function(ye){return C(ye)},a.allocUnsafeSlow=function(ye){return C(ye)};function k(ye,z){if((typeof z!="string"||z==="")&&(z="utf8"),!a.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const q=_e(ye,z)|0;let Re=w(q);const Je=Re.write(ye,z);return Je!==q&&(Re=Re.slice(0,Je)),Re}function V(ye){const z=ye.length<0?0:Te(ye.length)|0,q=w(z);for(let Re=0;Re<z;Re+=1)q[Re]=ye[Re]&255;return q}function N(ye){if(H(ye,Uint8Array)){const z=new Uint8Array(ye);return Q(z.buffer,z.byteOffset,z.byteLength)}return V(ye)}function Q(ye,z,q){if(z<0||ye.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<z+(q||0))throw new RangeError('"length" is outside of buffer bounds');let Re;return z===void 0&&q===void 0?Re=new Uint8Array(ye):q===void 0?Re=new Uint8Array(ye,z):Re=new Uint8Array(ye,z,q),Object.setPrototypeOf(Re,a.prototype),Re}function he(ye){if(a.isBuffer(ye)){const z=Te(ye.length)|0,q=w(z);return q.length===0||ye.copy(q,0,0,z),q}if(ye.length!==void 0)return typeof ye.length!="number"||Ce(ye.length)?w(0):V(ye);if(ye.type==="Buffer"&&Array.isArray(ye.data))return V(ye.data)}function Te(ye){if(ye>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return ye|0}function we(ye){return+ye!=ye&&(ye=0),a.alloc(+ye)}a.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==a.prototype},a.compare=function(z,q){if(H(z,Uint8Array)&&(z=a.from(z,z.offset,z.byteLength)),H(q,Uint8Array)&&(q=a.from(q,q.offset,q.byteLength)),!a.isBuffer(z)||!a.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===q)return 0;let Re=z.length,Je=q.length;for(let ft=0,Qe=Math.min(Re,Je);ft<Qe;++ft)if(z[ft]!==q[ft]){Re=z[ft],Je=q[ft];break}return Re<Je?-1:Je<Re?1:0},a.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(z,q){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return a.alloc(0);let Re;if(q===void 0)for(q=0,Re=0;Re<z.length;++Re)q+=z[Re].length;const Je=a.allocUnsafe(q);let ft=0;for(Re=0;Re<z.length;++Re){let Qe=z[Re];if(H(Qe,Uint8Array))ft+Qe.length>Je.length?(a.isBuffer(Qe)||(Qe=a.from(Qe)),Qe.copy(Je,ft)):Uint8Array.prototype.set.call(Je,Qe,ft);else if(a.isBuffer(Qe))Qe.copy(Je,ft);else throw new TypeError('"list" argument must be an Array of Buffers');ft+=Qe.length}return Je};function _e(ye,z){if(a.isBuffer(ye))return ye.length;if(ArrayBuffer.isView(ye)||H(ye,ArrayBuffer))return ye.byteLength;if(typeof ye!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ye);const q=ye.length,Re=arguments.length>2&&arguments[2]===!0;if(!Re&&q===0)return 0;let Je=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return kn(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return ze(ye).length;default:if(Je)return Re?-1:kn(ye).length;z=(""+z).toLowerCase(),Je=!0}}a.byteLength=_e;function Me(ye,z,q){let Re=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,z>>>=0,q<=z))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return xe(this,z,q);case"utf8":case"utf-8":return J(this,z,q);case"ascii":return te(this,z,q);case"latin1":case"binary":return se(this,z,q);case"base64":return W(this,z,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,z,q);default:if(Re)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),Re=!0}}a.prototype._isBuffer=!0;function ne(ye,z,q){const Re=ye[z];ye[z]=ye[q],ye[q]=Re}a.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<z;q+=2)ne(this,q,q+1);return this},a.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<z;q+=4)ne(this,q,q+3),ne(this,q+1,q+2);return this},a.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<z;q+=8)ne(this,q,q+7),ne(this,q+1,q+6),ne(this,q+2,q+5),ne(this,q+3,q+4);return this},a.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?J(this,0,z):Me.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(z){if(!a.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:a.compare(this,z)===0},a.prototype.inspect=function(){let z="";const q=u.INSPECT_MAX_BYTES;return z=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(z+=" ... "),"<Buffer "+z+">"},v&&(a.prototype[v]=a.prototype.inspect),a.prototype.compare=function(z,q,Re,Je,ft){if(H(z,Uint8Array)&&(z=a.from(z,z.offset,z.byteLength)),!a.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(q===void 0&&(q=0),Re===void 0&&(Re=z?z.length:0),Je===void 0&&(Je=0),ft===void 0&&(ft=this.length),q<0||Re>z.length||Je<0||ft>this.length)throw new RangeError("out of range index");if(Je>=ft&&q>=Re)return 0;if(Je>=ft)return-1;if(q>=Re)return 1;if(q>>>=0,Re>>>=0,Je>>>=0,ft>>>=0,this===z)return 0;let Qe=ft-Je,jt=Re-q;const Bt=Math.min(Qe,jt),zn=this.slice(Je,ft),Zn=z.slice(q,Re);for(let qt=0;qt<Bt;++qt)if(zn[qt]!==Zn[qt]){Qe=zn[qt],jt=Zn[qt];break}return Qe<jt?-1:jt<Qe?1:0};function ce(ye,z,q,Re,Je){if(ye.length===0)return-1;if(typeof q=="string"?(Re=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,Ce(q)&&(q=Je?0:ye.length-1),q<0&&(q=ye.length+q),q>=ye.length){if(Je)return-1;q=ye.length-1}else if(q<0)if(Je)q=0;else return-1;if(typeof z=="string"&&(z=a.from(z,Re)),a.isBuffer(z))return z.length===0?-1:M(ye,z,q,Re,Je);if(typeof z=="number")return z=z&255,typeof Uint8Array.prototype.indexOf=="function"?Je?Uint8Array.prototype.indexOf.call(ye,z,q):Uint8Array.prototype.lastIndexOf.call(ye,z,q):M(ye,[z],q,Re,Je);throw new TypeError("val must be string, number or Buffer")}function M(ye,z,q,Re,Je){let ft=1,Qe=ye.length,jt=z.length;if(Re!==void 0&&(Re=String(Re).toLowerCase(),Re==="ucs2"||Re==="ucs-2"||Re==="utf16le"||Re==="utf-16le")){if(ye.length<2||z.length<2)return-1;ft=2,Qe/=2,jt/=2,q/=2}function Bt(Zn,qt){return ft===1?Zn[qt]:Zn.readUInt16BE(qt*ft)}let zn;if(Je){let Zn=-1;for(zn=q;zn<Qe;zn++)if(Bt(ye,zn)===Bt(z,Zn===-1?0:zn-Zn)){if(Zn===-1&&(Zn=zn),zn-Zn+1===jt)return Zn*ft}else Zn!==-1&&(zn-=zn-Zn),Zn=-1}else for(q+jt>Qe&&(q=Qe-jt),zn=q;zn>=0;zn--){let Zn=!0;for(let qt=0;qt<jt;qt++)if(Bt(ye,zn+qt)!==Bt(z,qt)){Zn=!1;break}if(Zn)return zn}return-1}a.prototype.includes=function(z,q,Re){return this.indexOf(z,q,Re)!==-1},a.prototype.indexOf=function(z,q,Re){return ce(this,z,q,Re,!0)},a.prototype.lastIndexOf=function(z,q,Re){return ce(this,z,q,Re,!1)};function $(ye,z,q,Re){q=Number(q)||0;const Je=ye.length-q;Re?(Re=Number(Re),Re>Je&&(Re=Je)):Re=Je;const ft=z.length;Re>ft/2&&(Re=ft/2);let Qe;for(Qe=0;Qe<Re;++Qe){const jt=parseInt(z.substr(Qe*2,2),16);if(Ce(jt))return Qe;ye[q+Qe]=jt}return Qe}function U(ye,z,q,Re){return G(kn(z,ye.length-q),ye,q,Re)}function de(ye,z,q,Re){return G(cn(z),ye,q,Re)}function K(ye,z,q,Re){return G(ze(z),ye,q,Re)}function j(ye,z,q,Re){return G(en(z,ye.length-q),ye,q,Re)}a.prototype.write=function(z,q,Re,Je){if(q===void 0)Je="utf8",Re=this.length,q=0;else if(Re===void 0&&typeof q=="string")Je=q,Re=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(Re)?(Re=Re>>>0,Je===void 0&&(Je="utf8")):(Je=Re,Re=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ft=this.length-q;if((Re===void 0||Re>ft)&&(Re=ft),z.length>0&&(Re<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");Je||(Je="utf8");let Qe=!1;for(;;)switch(Je){case"hex":return $(this,z,q,Re);case"utf8":case"utf-8":return U(this,z,q,Re);case"ascii":case"latin1":case"binary":return de(this,z,q,Re);case"base64":return K(this,z,q,Re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,z,q,Re);default:if(Qe)throw new TypeError("Unknown encoding: "+Je);Je=(""+Je).toLowerCase(),Qe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(ye,z,q){return z===0&&q===ye.length?c.fromByteArray(ye):c.fromByteArray(ye.slice(z,q))}function J(ye,z,q){q=Math.min(ye.length,q);const Re=[];let Je=z;for(;Je<q;){const ft=ye[Je];let Qe=null,jt=ft>239?4:ft>223?3:ft>191?2:1;if(Je+jt<=q){let Bt,zn,Zn,qt;switch(jt){case 1:ft<128&&(Qe=ft);break;case 2:Bt=ye[Je+1],(Bt&192)===128&&(qt=(ft&31)<<6|Bt&63,qt>127&&(Qe=qt));break;case 3:Bt=ye[Je+1],zn=ye[Je+2],(Bt&192)===128&&(zn&192)===128&&(qt=(ft&15)<<12|(Bt&63)<<6|zn&63,qt>2047&&(qt<55296||qt>57343)&&(Qe=qt));break;case 4:Bt=ye[Je+1],zn=ye[Je+2],Zn=ye[Je+3],(Bt&192)===128&&(zn&192)===128&&(Zn&192)===128&&(qt=(ft&15)<<18|(Bt&63)<<12|(zn&63)<<6|Zn&63,qt>65535&&qt<1114112&&(Qe=qt))}}Qe===null?(Qe=65533,jt=1):Qe>65535&&(Qe-=65536,Re.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),Re.push(Qe),Je+=jt}return ue(Re)}const re=4096;function ue(ye){const z=ye.length;if(z<=re)return String.fromCharCode.apply(String,ye);let q="",Re=0;for(;Re<z;)q+=String.fromCharCode.apply(String,ye.slice(Re,Re+=re));return q}function te(ye,z,q){let Re="";q=Math.min(ye.length,q);for(let Je=z;Je<q;++Je)Re+=String.fromCharCode(ye[Je]&127);return Re}function se(ye,z,q){let Re="";q=Math.min(ye.length,q);for(let Je=z;Je<q;++Je)Re+=String.fromCharCode(ye[Je]);return Re}function xe(ye,z,q){const Re=ye.length;(!z||z<0)&&(z=0),(!q||q<0||q>Re)&&(q=Re);let Je="";for(let ft=z;ft<q;++ft)Je+=rt[ye[ft]];return Je}function ie(ye,z,q){const Re=ye.slice(z,q);let Je="";for(let ft=0;ft<Re.length-1;ft+=2)Je+=String.fromCharCode(Re[ft]+Re[ft+1]*256);return Je}a.prototype.slice=function(z,q){const Re=this.length;z=~~z,q=q===void 0?Re:~~q,z<0?(z+=Re,z<0&&(z=0)):z>Re&&(z=Re),q<0?(q+=Re,q<0&&(q=0)):q>Re&&(q=Re),q<z&&(q=z);const Je=this.subarray(z,q);return Object.setPrototypeOf(Je,a.prototype),Je};function ve(ye,z,q){if(ye%1!==0||ye<0)throw new RangeError("offset is not uint");if(ye+z>q)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(z,q,Re){z=z>>>0,q=q>>>0,Re||ve(z,q,this.length);let Je=this[z],ft=1,Qe=0;for(;++Qe<q&&(ft*=256);)Je+=this[z+Qe]*ft;return Je},a.prototype.readUintBE=a.prototype.readUIntBE=function(z,q,Re){z=z>>>0,q=q>>>0,Re||ve(z,q,this.length);let Je=this[z+--q],ft=1;for(;q>0&&(ft*=256);)Je+=this[z+--q]*ft;return Je},a.prototype.readUint8=a.prototype.readUInt8=function(z,q){return z=z>>>0,q||ve(z,1,this.length),this[z]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(z,q){return z=z>>>0,q||ve(z,2,this.length),this[z]|this[z+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(z,q){return z=z>>>0,q||ve(z,2,this.length),this[z]<<8|this[z+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(z,q){return z=z>>>0,q||ve(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(z,q){return z=z>>>0,q||ve(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},a.prototype.readBigUInt64LE=ct(function(z){z=z>>>0,Yt(z,"offset");const q=this[z],Re=this[z+7];(q===void 0||Re===void 0)&&un(z,this.length-8);const Je=q+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,ft=this[++z]+this[++z]*2**8+this[++z]*2**16+Re*2**24;return BigInt(Je)+(BigInt(ft)<<BigInt(32))}),a.prototype.readBigUInt64BE=ct(function(z){z=z>>>0,Yt(z,"offset");const q=this[z],Re=this[z+7];(q===void 0||Re===void 0)&&un(z,this.length-8);const Je=q*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],ft=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+Re;return(BigInt(Je)<<BigInt(32))+BigInt(ft)}),a.prototype.readIntLE=function(z,q,Re){z=z>>>0,q=q>>>0,Re||ve(z,q,this.length);let Je=this[z],ft=1,Qe=0;for(;++Qe<q&&(ft*=256);)Je+=this[z+Qe]*ft;return ft*=128,Je>=ft&&(Je-=Math.pow(2,8*q)),Je},a.prototype.readIntBE=function(z,q,Re){z=z>>>0,q=q>>>0,Re||ve(z,q,this.length);let Je=q,ft=1,Qe=this[z+--Je];for(;Je>0&&(ft*=256);)Qe+=this[z+--Je]*ft;return ft*=128,Qe>=ft&&(Qe-=Math.pow(2,8*q)),Qe},a.prototype.readInt8=function(z,q){return z=z>>>0,q||ve(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},a.prototype.readInt16LE=function(z,q){z=z>>>0,q||ve(z,2,this.length);const Re=this[z]|this[z+1]<<8;return Re&32768?Re|4294901760:Re},a.prototype.readInt16BE=function(z,q){z=z>>>0,q||ve(z,2,this.length);const Re=this[z+1]|this[z]<<8;return Re&32768?Re|4294901760:Re},a.prototype.readInt32LE=function(z,q){return z=z>>>0,q||ve(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},a.prototype.readInt32BE=function(z,q){return z=z>>>0,q||ve(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},a.prototype.readBigInt64LE=ct(function(z){z=z>>>0,Yt(z,"offset");const q=this[z],Re=this[z+7];(q===void 0||Re===void 0)&&un(z,this.length-8);const Je=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(Re<<24);return(BigInt(Je)<<BigInt(32))+BigInt(q+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),a.prototype.readBigInt64BE=ct(function(z){z=z>>>0,Yt(z,"offset");const q=this[z],Re=this[z+7];(q===void 0||Re===void 0)&&un(z,this.length-8);const Je=(q<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(Je)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+Re)}),a.prototype.readFloatLE=function(z,q){return z=z>>>0,q||ve(z,4,this.length),p.read(this,z,!0,23,4)},a.prototype.readFloatBE=function(z,q){return z=z>>>0,q||ve(z,4,this.length),p.read(this,z,!1,23,4)},a.prototype.readDoubleLE=function(z,q){return z=z>>>0,q||ve(z,8,this.length),p.read(this,z,!0,52,8)},a.prototype.readDoubleBE=function(z,q){return z=z>>>0,q||ve(z,8,this.length),p.read(this,z,!1,52,8)};function De(ye,z,q,Re,Je,ft){if(!a.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Je||z<ft)throw new RangeError('"value" argument is out of bounds');if(q+Re>ye.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(z,q,Re,Je){if(z=+z,q=q>>>0,Re=Re>>>0,!Je){const jt=Math.pow(2,8*Re)-1;De(this,z,q,Re,jt,0)}let ft=1,Qe=0;for(this[q]=z&255;++Qe<Re&&(ft*=256);)this[q+Qe]=z/ft&255;return q+Re},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(z,q,Re,Je){if(z=+z,q=q>>>0,Re=Re>>>0,!Je){const jt=Math.pow(2,8*Re)-1;De(this,z,q,Re,jt,0)}let ft=Re-1,Qe=1;for(this[q+ft]=z&255;--ft>=0&&(Qe*=256);)this[q+ft]=z/Qe&255;return q+Re},a.prototype.writeUint8=a.prototype.writeUInt8=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,1,255,0),this[q]=z&255,q+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,2,65535,0),this[q]=z&255,this[q+1]=z>>>8,q+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,2,65535,0),this[q]=z>>>8,this[q+1]=z&255,q+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,4,4294967295,0),this[q+3]=z>>>24,this[q+2]=z>>>16,this[q+1]=z>>>8,this[q]=z&255,q+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,4,4294967295,0),this[q]=z>>>24,this[q+1]=z>>>16,this[q+2]=z>>>8,this[q+3]=z&255,q+4};function Oe(ye,z,q,Re,Je){kt(z,Re,Je,ye,q,7);let ft=Number(z&BigInt(4294967295));ye[q++]=ft,ft=ft>>8,ye[q++]=ft,ft=ft>>8,ye[q++]=ft,ft=ft>>8,ye[q++]=ft;let Qe=Number(z>>BigInt(32)&BigInt(4294967295));return ye[q++]=Qe,Qe=Qe>>8,ye[q++]=Qe,Qe=Qe>>8,ye[q++]=Qe,Qe=Qe>>8,ye[q++]=Qe,q}function Le(ye,z,q,Re,Je){kt(z,Re,Je,ye,q,7);let ft=Number(z&BigInt(4294967295));ye[q+7]=ft,ft=ft>>8,ye[q+6]=ft,ft=ft>>8,ye[q+5]=ft,ft=ft>>8,ye[q+4]=ft;let Qe=Number(z>>BigInt(32)&BigInt(4294967295));return ye[q+3]=Qe,Qe=Qe>>8,ye[q+2]=Qe,Qe=Qe>>8,ye[q+1]=Qe,Qe=Qe>>8,ye[q]=Qe,q+8}a.prototype.writeBigUInt64LE=ct(function(z,q=0){return Oe(this,z,q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ct(function(z,q=0){return Le(this,z,q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(z,q,Re,Je){if(z=+z,q=q>>>0,!Je){const Bt=Math.pow(2,8*Re-1);De(this,z,q,Re,Bt-1,-Bt)}let ft=0,Qe=1,jt=0;for(this[q]=z&255;++ft<Re&&(Qe*=256);)z<0&&jt===0&&this[q+ft-1]!==0&&(jt=1),this[q+ft]=(z/Qe>>0)-jt&255;return q+Re},a.prototype.writeIntBE=function(z,q,Re,Je){if(z=+z,q=q>>>0,!Je){const Bt=Math.pow(2,8*Re-1);De(this,z,q,Re,Bt-1,-Bt)}let ft=Re-1,Qe=1,jt=0;for(this[q+ft]=z&255;--ft>=0&&(Qe*=256);)z<0&&jt===0&&this[q+ft+1]!==0&&(jt=1),this[q+ft]=(z/Qe>>0)-jt&255;return q+Re},a.prototype.writeInt8=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,1,127,-128),z<0&&(z=255+z+1),this[q]=z&255,q+1},a.prototype.writeInt16LE=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,2,32767,-32768),this[q]=z&255,this[q+1]=z>>>8,q+2},a.prototype.writeInt16BE=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,2,32767,-32768),this[q]=z>>>8,this[q+1]=z&255,q+2},a.prototype.writeInt32LE=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,4,2147483647,-2147483648),this[q]=z&255,this[q+1]=z>>>8,this[q+2]=z>>>16,this[q+3]=z>>>24,q+4},a.prototype.writeInt32BE=function(z,q,Re){return z=+z,q=q>>>0,Re||De(this,z,q,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[q]=z>>>24,this[q+1]=z>>>16,this[q+2]=z>>>8,this[q+3]=z&255,q+4},a.prototype.writeBigInt64LE=ct(function(z,q=0){return Oe(this,z,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ct(function(z,q=0){return Le(this,z,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ye(ye,z,q,Re,Je,ft){if(q+Re>ye.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function tt(ye,z,q,Re,Je){return z=+z,q=q>>>0,Je||Ye(ye,z,q,4),p.write(ye,z,q,Re,23,4),q+4}a.prototype.writeFloatLE=function(z,q,Re){return tt(this,z,q,!0,Re)},a.prototype.writeFloatBE=function(z,q,Re){return tt(this,z,q,!1,Re)};function pt(ye,z,q,Re,Je){return z=+z,q=q>>>0,Je||Ye(ye,z,q,8),p.write(ye,z,q,Re,52,8),q+8}a.prototype.writeDoubleLE=function(z,q,Re){return pt(this,z,q,!0,Re)},a.prototype.writeDoubleBE=function(z,q,Re){return pt(this,z,q,!1,Re)},a.prototype.copy=function(z,q,Re,Je){if(!a.isBuffer(z))throw new TypeError("argument should be a Buffer");if(Re||(Re=0),!Je&&Je!==0&&(Je=this.length),q>=z.length&&(q=z.length),q||(q=0),Je>0&&Je<Re&&(Je=Re),Je===Re||z.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(Re<0||Re>=this.length)throw new RangeError("Index out of range");if(Je<0)throw new RangeError("sourceEnd out of bounds");Je>this.length&&(Je=this.length),z.length-q<Je-Re&&(Je=z.length-q+Re);const ft=Je-Re;return this===z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(q,Re,Je):Uint8Array.prototype.set.call(z,this.subarray(Re,Je),q),ft},a.prototype.fill=function(z,q,Re,Je){if(typeof z=="string"){if(typeof q=="string"?(Je=q,q=0,Re=this.length):typeof Re=="string"&&(Je=Re,Re=this.length),Je!==void 0&&typeof Je!="string")throw new TypeError("encoding must be a string");if(typeof Je=="string"&&!a.isEncoding(Je))throw new TypeError("Unknown encoding: "+Je);if(z.length===1){const Qe=z.charCodeAt(0);(Je==="utf8"&&Qe<128||Je==="latin1")&&(z=Qe)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(q<0||this.length<q||this.length<Re)throw new RangeError("Out of range index");if(Re<=q)return this;q=q>>>0,Re=Re===void 0?this.length:Re>>>0,z||(z=0);let ft;if(typeof z=="number")for(ft=q;ft<Re;++ft)this[ft]=z;else{const Qe=a.isBuffer(z)?z:a.from(z,Je),jt=Qe.length;if(jt===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(ft=0;ft<Re-q;++ft)this[ft+q]=Qe[ft%jt]}return this};const _t={};function Pt(ye,z,q){_t[ye]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ye}]`,this.stack,delete this.name}get code(){return ye}set code(Je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Je,writable:!0})}toString(){return`${this.name} [${ye}]: ${this.message}`}}}Pt("ERR_BUFFER_OUT_OF_BOUNDS",function(ye){return ye?`${ye} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pt("ERR_INVALID_ARG_TYPE",function(ye,z){return`The "${ye}" argument must be of type number. Received type ${typeof z}`},TypeError),Pt("ERR_OUT_OF_RANGE",function(ye,z,q){let Re=`The value of "${ye}" is out of range.`,Je=q;return Number.isInteger(q)&&Math.abs(q)>2**32?Je=Wt(String(q)):typeof q=="bigint"&&(Je=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(Je=Wt(Je)),Je+="n"),Re+=` It must be ${z}. Received ${Je}`,Re},RangeError);function Wt(ye){let z="",q=ye.length;const Re=ye[0]==="-"?1:0;for(;q>=Re+4;q-=3)z=`_${ye.slice(q-3,q)}${z}`;return`${ye.slice(0,q)}${z}`}function Tt(ye,z,q){Yt(z,"offset"),(ye[z]===void 0||ye[z+q]===void 0)&&un(z,ye.length-(q+1))}function kt(ye,z,q,Re,Je,ft){if(ye>q||ye<z){const Qe=typeof z=="bigint"?"n":"";let jt;throw z===0||z===BigInt(0)?jt=`>= 0${Qe} and < 2${Qe} ** ${(ft+1)*8}${Qe}`:jt=`>= -(2${Qe} ** ${(ft+1)*8-1}${Qe}) and < 2 ** ${(ft+1)*8-1}${Qe}`,new _t.ERR_OUT_OF_RANGE("value",jt,ye)}Tt(Re,Je,ft)}function Yt(ye,z){if(typeof ye!="number")throw new _t.ERR_INVALID_ARG_TYPE(z,"number",ye)}function un(ye,z,q){throw Math.floor(ye)!==ye?(Yt(ye,q),new _t.ERR_OUT_OF_RANGE("offset","an integer",ye)):z<0?new _t.ERR_BUFFER_OUT_OF_BOUNDS:new _t.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${z}`,ye)}const In=/[^+/0-9A-Za-z-_]/g;function at(ye){if(ye=ye.split("=")[0],ye=ye.trim().replace(In,""),ye.length<2)return"";for(;ye.length%4!==0;)ye=ye+"=";return ye}function kn(ye,z){z=z||1/0;let q;const Re=ye.length;let Je=null;const ft=[];for(let Qe=0;Qe<Re;++Qe){if(q=ye.charCodeAt(Qe),q>55295&&q<57344){if(!Je){if(q>56319){(z-=3)>-1&&ft.push(239,191,189);continue}else if(Qe+1===Re){(z-=3)>-1&&ft.push(239,191,189);continue}Je=q;continue}if(q<56320){(z-=3)>-1&&ft.push(239,191,189),Je=q;continue}q=(Je-55296<<10|q-56320)+65536}else Je&&(z-=3)>-1&&ft.push(239,191,189);if(Je=null,q<128){if((z-=1)<0)break;ft.push(q)}else if(q<2048){if((z-=2)<0)break;ft.push(q>>6|192,q&63|128)}else if(q<65536){if((z-=3)<0)break;ft.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((z-=4)<0)break;ft.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return ft}function cn(ye){const z=[];for(let q=0;q<ye.length;++q)z.push(ye.charCodeAt(q)&255);return z}function en(ye,z){let q,Re,Je;const ft=[];for(let Qe=0;Qe<ye.length&&!((z-=2)<0);++Qe)q=ye.charCodeAt(Qe),Re=q>>8,Je=q%256,ft.push(Je),ft.push(Re);return ft}function ze(ye){return c.toByteArray(at(ye))}function G(ye,z,q,Re){let Je;for(Je=0;Je<Re&&!(Je+q>=z.length||Je>=ye.length);++Je)z[Je+q]=ye[Je];return Je}function H(ye,z){return ye instanceof z||ye!=null&&ye.constructor!=null&&ye.constructor.name!=null&&ye.constructor.name===z.name}function Ce(ye){return ye!==ye}const rt=function(){const ye="0123456789abcdef",z=new Array(256);for(let q=0;q<16;++q){const Re=q*16;for(let Je=0;Je<16;++Je)z[Re+Je]=ye[q]+ye[Je]}return z}();function ct(ye){return typeof BigInt>"u"?Et:ye}function Et(){throw new Error("BigInt not supported")}}(gy)),gy}var DC=LC();window.Buffer=DC.Buffer;Jw.render(Mt.jsx(d0.StrictMode,{children:Mt.jsx(OC,{})}),document.getElementById("root"));

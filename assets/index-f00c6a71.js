function QP(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function b_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var RE={exports:{}},hg={},FE={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td=Symbol.for("react.element"),eM=Symbol.for("react.portal"),tM=Symbol.for("react.fragment"),nM=Symbol.for("react.strict_mode"),rM=Symbol.for("react.profiler"),iM=Symbol.for("react.provider"),oM=Symbol.for("react.context"),sM=Symbol.for("react.forward_ref"),aM=Symbol.for("react.suspense"),lM=Symbol.for("react.memo"),uM=Symbol.for("react.lazy"),Bw=Symbol.iterator;function cM(e){return e===null||typeof e!="object"?null:(e=Bw&&e[Bw]||e["@@iterator"],typeof e=="function"?e:null)}var jE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DE=Object.assign,BE={};function Eh(e,t,i){this.props=e,this.context=t,this.refs=BE,this.updater=i||jE}Eh.prototype.isReactComponent={};Eh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Eh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function NE(){}NE.prototype=Eh.prototype;function E_(e,t,i){this.props=e,this.context=t,this.refs=BE,this.updater=i||jE}var S_=E_.prototype=new NE;S_.constructor=E_;DE(S_,Eh.prototype);S_.isPureReactComponent=!0;var Nw=Array.isArray,UE=Object.prototype.hasOwnProperty,T_={current:null},$E={key:!0,ref:!0,__self:!0,__source:!0};function VE(e,t,i){var a,c={},d=null,y=null;if(t!=null)for(a in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(d=""+t.key),t)UE.call(t,a)&&!$E.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=i;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:Td,type:e,key:d,ref:y,props:c,_owner:T_.current}}function hM(e,t){return{$$typeof:Td,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function C_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Td}function fM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Uw=/\/+/g;function Oy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fM(""+e.key):t.toString(36)}function Np(e,t,i,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(d){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case Td:case eM:y=!0}}if(y)return y=e,c=c(y),e=a===""?"."+Oy(y,0):a,Nw(c)?(i="",e!=null&&(i=e.replace(Uw,"$&/")+"/"),Np(c,t,i,"",function(w){return w})):c!=null&&(C_(c)&&(c=hM(c,i+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(Uw,"$&/")+"/")+e)),t.push(c)),1;if(y=0,a=a===""?".":a+":",Nw(e))for(var l=0;l<e.length;l++){d=e[l];var b=a+Oy(d,l);y+=Np(d,t,i,b,c)}else if(b=cM(e),typeof b=="function")for(e=b.call(e),l=0;!(d=e.next()).done;)d=d.value,b=a+Oy(d,l++),y+=Np(d,t,i,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function hp(e,t,i){if(e==null)return e;var a=[],c=0;return Np(e,a,"","",function(d){return t.call(i,d,c++)}),a}function dM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var uo={current:null},Up={transition:null},pM={ReactCurrentDispatcher:uo,ReactCurrentBatchConfig:Up,ReactCurrentOwner:T_};jn.Children={map:hp,forEach:function(e,t,i){hp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return hp(e,function(){t++}),t},toArray:function(e){return hp(e,function(t){return t})||[]},only:function(e){if(!C_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jn.Component=Eh;jn.Fragment=tM;jn.Profiler=rM;jn.PureComponent=E_;jn.StrictMode=nM;jn.Suspense=aM;jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pM;jn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=DE({},e.props),c=e.key,d=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,y=T_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)UE.call(t,b)&&!$E.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];a.children=l}return{$$typeof:Td,type:e.type,key:c,ref:d,props:a,_owner:y}};jn.createContext=function(e){return e={$$typeof:oM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iM,_context:e},e.Consumer=e};jn.createElement=VE;jn.createFactory=function(e){var t=VE.bind(null,e);return t.type=e,t};jn.createRef=function(){return{current:null}};jn.forwardRef=function(e){return{$$typeof:sM,render:e}};jn.isValidElement=C_;jn.lazy=function(e){return{$$typeof:uM,_payload:{_status:-1,_result:e},_init:dM}};jn.memo=function(e,t){return{$$typeof:lM,type:e,compare:t===void 0?null:t}};jn.startTransition=function(e){var t=Up.transition;Up.transition={};try{e()}finally{Up.transition=t}};jn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jn.useCallback=function(e,t){return uo.current.useCallback(e,t)};jn.useContext=function(e){return uo.current.useContext(e)};jn.useDebugValue=function(){};jn.useDeferredValue=function(e){return uo.current.useDeferredValue(e)};jn.useEffect=function(e,t){return uo.current.useEffect(e,t)};jn.useId=function(){return uo.current.useId()};jn.useImperativeHandle=function(e,t,i){return uo.current.useImperativeHandle(e,t,i)};jn.useInsertionEffect=function(e,t){return uo.current.useInsertionEffect(e,t)};jn.useLayoutEffect=function(e,t){return uo.current.useLayoutEffect(e,t)};jn.useMemo=function(e,t){return uo.current.useMemo(e,t)};jn.useReducer=function(e,t,i){return uo.current.useReducer(e,t,i)};jn.useRef=function(e){return uo.current.useRef(e)};jn.useState=function(e){return uo.current.useState(e)};jn.useSyncExternalStore=function(e,t,i){return uo.current.useSyncExternalStore(e,t,i)};jn.useTransition=function(){return uo.current.useTransition()};jn.version="18.2.0";FE.exports=jn;var _t=FE.exports;const GE=Sd(_t);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM=_t,gM=Symbol.for("react.element"),yM=Symbol.for("react.fragment"),vM=Object.prototype.hasOwnProperty,_M=mM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xM={key:!0,ref:!0,__self:!0,__source:!0};function ZE(e,t,i){var a,c={},d=null,y=null;i!==void 0&&(d=""+i),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(y=t.ref);for(a in t)vM.call(t,a)&&!xM.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:gM,type:e,key:d,ref:y,props:c,_owner:_M.current}}hg.Fragment=yM;hg.jsx=ZE;hg.jsxs=ZE;RE.exports=hg;var dt=RE.exports,WE={exports:{}},Vo={},HE={exports:{}},XE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ne,me){var Ee=ne.length;ne.push(me);e:for(;0<Ee;){var we=Ee-1>>>1,Ue=ne[we];if(0<c(Ue,me))ne[we]=me,ne[Ee]=Ue,Ee=we;else break e}}function i(ne){return ne.length===0?null:ne[0]}function a(ne){if(ne.length===0)return null;var me=ne[0],Ee=ne.pop();if(Ee!==me){ne[0]=Ee;e:for(var we=0,Ue=ne.length,Le=Ue>>>1;we<Le;){var Me=2*(we+1)-1,He=ne[Me],Ge=Me+1,rt=ne[Ge];if(0>c(He,Ee))Ge<Ue&&0>c(rt,He)?(ne[we]=rt,ne[Ge]=Ee,we=Ge):(ne[we]=He,ne[Me]=Ee,we=Me);else if(Ge<Ue&&0>c(rt,Ee))ne[we]=rt,ne[Ge]=Ee,we=Ge;else break e}}return me}function c(ne,me){var Ee=ne.sortIndex-me.sortIndex;return Ee!==0?Ee:ne.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var b=[],w=[],A=1,E=null,L=3,F=!1,Q=!1,K=!1,pe=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ne){for(var me=i(w);me!==null;){if(me.callback===null)a(w);else if(me.startTime<=ne)a(w),me.sortIndex=me.expirationTime,t(b,me);else break;me=i(w)}}function oe(ne){if(K=!1,U(ne),!Q)if(i(b)!==null)Q=!0,le(W);else{var me=i(w);me!==null&&ie(oe,me.startTime-ne)}}function W(ne,me){Q=!1,K&&(K=!1,G(M),M=-1),F=!0;var Ee=L;try{for(U(me),E=i(b);E!==null&&(!(E.expirationTime>me)||ne&&!J());){var we=E.callback;if(typeof we=="function"){E.callback=null,L=E.priorityLevel;var Ue=we(E.expirationTime<=me);me=e.unstable_now(),typeof Ue=="function"?E.callback=Ue:E===i(b)&&a(b),U(me)}else a(b);E=i(b)}if(E!==null)var Le=!0;else{var Me=i(w);Me!==null&&ie(oe,Me.startTime-me),Le=!1}return Le}finally{E=null,L=Ee,F=!1}}var N=!1,S=null,M=-1,Z=5,q=-1;function J(){return!(e.unstable_now()-q<Z)}function ye(){if(S!==null){var ne=e.unstable_now();q=ne;var me=!0;try{me=S(!0,ne)}finally{me?xe():(N=!1,S=null)}}else N=!1}var xe;if(typeof V=="function")xe=function(){V(ye)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,te=be.port2;be.port1.onmessage=ye,xe=function(){te.postMessage(null)}}else xe=function(){pe(ye,0)};function le(ne){S=ne,N||(N=!0,xe())}function ie(ne,me){M=pe(function(){ne(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){Q||F||(Q=!0,le(W))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(ne){switch(L){case 1:case 2:case 3:var me=3;break;default:me=L}var Ee=L;L=me;try{return ne()}finally{L=Ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,me){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Ee=L;L=ne;try{return me()}finally{L=Ee}},e.unstable_scheduleCallback=function(ne,me,Ee){var we=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?we+Ee:we):Ee=we,ne){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=Ee+Ue,ne={id:A++,callback:me,priorityLevel:ne,startTime:Ee,expirationTime:Ue,sortIndex:-1},Ee>we?(ne.sortIndex=Ee,t(w,ne),i(b)===null&&ne===i(w)&&(K?(G(M),M=-1):K=!0,ie(oe,Ee-we))):(ne.sortIndex=Ue,t(b,ne),Q||F||(Q=!0,le(W))),ne},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(ne){var me=L;return function(){var Ee=L;L=me;try{return ne.apply(this,arguments)}finally{L=Ee}}}})(XE);HE.exports=XE;var wM=HE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE=_t,$o=wM;function Mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KE=new Set,nd={};function Xu(e,t){hh(e,t),hh(e+"Capture",t)}function hh(e,t){for(nd[e]=t,e=0;e<t.length;e++)KE.add(t[e])}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B0=Object.prototype.hasOwnProperty,bM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$w={},Vw={};function EM(e){return B0.call(Vw,e)?!0:B0.call($w,e)?!1:bM.test(e)?Vw[e]=!0:($w[e]=!0,!1)}function SM(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TM(e,t,i,a){if(t===null||typeof t>"u"||SM(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function co(e,t,i,a,c,d,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=y}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pi[e]=new co(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pi[t]=new co(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pi[e]=new co(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pi[e]=new co(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pi[e]=new co(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pi[e]=new co(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pi[e]=new co(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pi[e]=new co(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pi[e]=new co(e,5,!1,e.toLowerCase(),null,!1,!1)});var A_=/[\-:]([a-z])/g;function I_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(A_,I_);Pi[t]=new co(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(A_,I_);Pi[t]=new co(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(A_,I_);Pi[t]=new co(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pi[e]=new co(e,1,!1,e.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new co("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pi[e]=new co(e,1,!1,e.toLowerCase(),null,!0,!0)});function P_(e,t,i,a){var c=Pi.hasOwnProperty(t)?Pi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TM(t,i,c,a)&&(i=null),a||c===null?EM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Ya=qE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fp=Symbol.for("react.element"),Bc=Symbol.for("react.portal"),Nc=Symbol.for("react.fragment"),M_=Symbol.for("react.strict_mode"),N0=Symbol.for("react.profiler"),YE=Symbol.for("react.provider"),JE=Symbol.for("react.context"),k_=Symbol.for("react.forward_ref"),U0=Symbol.for("react.suspense"),$0=Symbol.for("react.suspense_list"),L_=Symbol.for("react.memo"),Ll=Symbol.for("react.lazy"),QE=Symbol.for("react.offscreen"),Gw=Symbol.iterator;function _f(e){return e===null||typeof e!="object"?null:(e=Gw&&e[Gw]||e["@@iterator"],typeof e=="function"?e:null)}var Or=Object.assign,Ry;function If(e){if(Ry===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ry=t&&t[1]||""}return`
`+Ry+e}var Fy=!1;function jy(e,t){if(!e||Fy)return"";Fy=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var a=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){a=w}e.call(t.prototype)}else{try{throw Error()}catch(w){a=w}e()}}catch(w){if(w&&a&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=a.stack.split(`
`),y=c.length-1,l=d.length-1;1<=y&&0<=l&&c[y]!==d[l];)l--;for(;1<=y&&0<=l;y--,l--)if(c[y]!==d[l]){if(y!==1||l!==1)do if(y--,l--,0>l||c[y]!==d[l]){var b=`
`+c[y].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=y&&0<=l);break}}}finally{Fy=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?If(e):""}function CM(e){switch(e.tag){case 5:return If(e.type);case 16:return If("Lazy");case 13:return If("Suspense");case 19:return If("SuspenseList");case 0:case 2:case 15:return e=jy(e.type,!1),e;case 11:return e=jy(e.type.render,!1),e;case 1:return e=jy(e.type,!0),e;default:return""}}function V0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nc:return"Fragment";case Bc:return"Portal";case N0:return"Profiler";case M_:return"StrictMode";case U0:return"Suspense";case $0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case JE:return(e.displayName||"Context")+".Consumer";case YE:return(e._context.displayName||"Context")+".Provider";case k_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L_:return t=e.displayName||null,t!==null?t:V0(e.type)||"Memo";case Ll:t=e._payload,e=e._init;try{return V0(e(t))}catch{}}return null}function AM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V0(t);case 8:return t===M_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function IM(e){var t=eS(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dp(e){e._valueTracker||(e._valueTracker=IM(e))}function tS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=eS(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function lm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function G0(e,t){var i=t.checked;return Or({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Zw(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=Kl(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nS(e,t){t=t.checked,t!=null&&P_(e,"checked",t,!1)}function Z0(e,t){nS(e,t);var i=Kl(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?W0(e,t.type,i):t.hasOwnProperty("defaultValue")&&W0(e,t.type,Kl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ww(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function W0(e,t,i){(t!=="number"||lm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Pf=Array.isArray;function nh(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Kl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function H0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Mt(91));return Or({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hw(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Mt(92));if(Pf(i)){if(1<i.length)throw Error(Mt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Kl(i)}}function rS(e,t){var i=Kl(t.value),a=Kl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Xw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pp,oS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pp=pp||document.createElement("div"),pp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rd(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PM=["Webkit","ms","Moz","O"];Object.keys(Nf).forEach(function(e){PM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nf[t]=Nf[e]})});function sS(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Nf.hasOwnProperty(e)&&Nf[e]?(""+t).trim():t+"px"}function aS(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=sS(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var MM=Or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q0(e,t){if(t){if(MM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Mt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Mt(62))}}function K0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y0=null;function z_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var J0=null,rh=null,ih=null;function qw(e){if(e=Id(e)){if(typeof J0!="function")throw Error(Mt(280));var t=e.stateNode;t&&(t=gg(t),J0(e.stateNode,e.type,t))}}function lS(e){rh?ih?ih.push(e):ih=[e]:rh=e}function uS(){if(rh){var e=rh,t=ih;if(ih=rh=null,qw(e),t)for(e=0;e<t.length;e++)qw(t[e])}}function cS(e,t){return e(t)}function hS(){}var Dy=!1;function fS(e,t,i){if(Dy)return e(t,i);Dy=!0;try{return cS(e,t,i)}finally{Dy=!1,(rh!==null||ih!==null)&&(hS(),uS())}}function id(e,t){var i=e.stateNode;if(i===null)return null;var a=gg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Mt(231,t,typeof i));return i}var Q0=!1;if(Va)try{var xf={};Object.defineProperty(xf,"passive",{get:function(){Q0=!0}}),window.addEventListener("test",xf,xf),window.removeEventListener("test",xf,xf)}catch{Q0=!1}function kM(e,t,i,a,c,d,y,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(A){this.onError(A)}}var Uf=!1,um=null,cm=!1,ev=null,LM={onError:function(e){Uf=!0,um=e}};function zM(e,t,i,a,c,d,y,l,b){Uf=!1,um=null,kM.apply(LM,arguments)}function OM(e,t,i,a,c,d,y,l,b){if(zM.apply(this,arguments),Uf){if(Uf){var w=um;Uf=!1,um=null}else throw Error(Mt(198));cm||(cm=!0,ev=w)}}function qu(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function dS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Kw(e){if(qu(e)!==e)throw Error(Mt(188))}function RM(e){var t=e.alternate;if(!t){if(t=qu(e),t===null)throw Error(Mt(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return Kw(c),e;if(d===a)return Kw(c),t;d=d.sibling}throw Error(Mt(188))}if(i.return!==a.return)i=c,a=d;else{for(var y=!1,l=c.child;l;){if(l===i){y=!0,i=c,a=d;break}if(l===a){y=!0,a=c,i=d;break}l=l.sibling}if(!y){for(l=d.child;l;){if(l===i){y=!0,i=d,a=c;break}if(l===a){y=!0,a=d,i=c;break}l=l.sibling}if(!y)throw Error(Mt(189))}}if(i.alternate!==a)throw Error(Mt(190))}if(i.tag!==3)throw Error(Mt(188));return i.stateNode.current===i?e:t}function pS(e){return e=RM(e),e!==null?mS(e):null}function mS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mS(e);if(t!==null)return t;e=e.sibling}return null}var gS=$o.unstable_scheduleCallback,Yw=$o.unstable_cancelCallback,FM=$o.unstable_shouldYield,jM=$o.unstable_requestPaint,Hr=$o.unstable_now,DM=$o.unstable_getCurrentPriorityLevel,O_=$o.unstable_ImmediatePriority,yS=$o.unstable_UserBlockingPriority,hm=$o.unstable_NormalPriority,BM=$o.unstable_LowPriority,vS=$o.unstable_IdlePriority,fg=null,ca=null;function NM(e){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(fg,e,void 0,(e.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:VM,UM=Math.log,$M=Math.LN2;function VM(e){return e>>>=0,e===0?32:31-(UM(e)/$M|0)|0}var mp=64,gp=4194304;function Mf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fm(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,y=i&268435455;if(y!==0){var l=y&~c;l!==0?a=Mf(l):(d&=y,d!==0&&(a=Mf(d)))}else y=i&~c,y!==0?a=Mf(y):d!==0&&(a=Mf(d));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Bs(t),c=1<<i,a|=e[i],t&=~c;return a}function GM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var y=31-Bs(d),l=1<<y,b=c[y];b===-1?(!(l&i)||l&a)&&(c[y]=GM(l,t)):b<=t&&(e.expiredLanes|=l),d&=~l}}function tv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _S(){var e=mp;return mp<<=1,!(mp&4194240)&&(mp=64),e}function By(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Cd(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bs(t),e[t]=i}function WM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Bs(i),d=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~d}}function R_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Bs(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var er=0;function xS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wS,F_,bS,ES,SS,nv=!1,yp=[],$l=null,Vl=null,Gl=null,od=new Map,sd=new Map,Fl=[],HM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jw(e,t){switch(e){case"focusin":case"focusout":$l=null;break;case"dragenter":case"dragleave":Vl=null;break;case"mouseover":case"mouseout":Gl=null;break;case"pointerover":case"pointerout":od.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(t.pointerId)}}function wf(e,t,i,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Id(t),t!==null&&F_(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function XM(e,t,i,a,c){switch(t){case"focusin":return $l=wf($l,e,t,i,a,c),!0;case"dragenter":return Vl=wf(Vl,e,t,i,a,c),!0;case"mouseover":return Gl=wf(Gl,e,t,i,a,c),!0;case"pointerover":var d=c.pointerId;return od.set(d,wf(od.get(d)||null,e,t,i,a,c)),!0;case"gotpointercapture":return d=c.pointerId,sd.set(d,wf(sd.get(d)||null,e,t,i,a,c)),!0}return!1}function TS(e){var t=zu(e.target);if(t!==null){var i=qu(t);if(i!==null){if(t=i.tag,t===13){if(t=dS(i),t!==null){e.blockedOn=t,SS(e.priority,function(){bS(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $p(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=rv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);Y0=a,i.target.dispatchEvent(a),Y0=null}else return t=Id(i),t!==null&&F_(t),e.blockedOn=i,!1;t.shift()}return!0}function Qw(e,t,i){$p(e)&&i.delete(t)}function qM(){nv=!1,$l!==null&&$p($l)&&($l=null),Vl!==null&&$p(Vl)&&(Vl=null),Gl!==null&&$p(Gl)&&(Gl=null),od.forEach(Qw),sd.forEach(Qw)}function bf(e,t){e.blockedOn===t&&(e.blockedOn=null,nv||(nv=!0,$o.unstable_scheduleCallback($o.unstable_NormalPriority,qM)))}function ad(e){function t(c){return bf(c,e)}if(0<yp.length){bf(yp[0],e);for(var i=1;i<yp.length;i++){var a=yp[i];a.blockedOn===e&&(a.blockedOn=null)}}for($l!==null&&bf($l,e),Vl!==null&&bf(Vl,e),Gl!==null&&bf(Gl,e),od.forEach(t),sd.forEach(t),i=0;i<Fl.length;i++)a=Fl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Fl.length&&(i=Fl[0],i.blockedOn===null);)TS(i),i.blockedOn===null&&Fl.shift()}var oh=Ya.ReactCurrentBatchConfig,dm=!0;function KM(e,t,i,a){var c=er,d=oh.transition;oh.transition=null;try{er=1,j_(e,t,i,a)}finally{er=c,oh.transition=d}}function YM(e,t,i,a){var c=er,d=oh.transition;oh.transition=null;try{er=4,j_(e,t,i,a)}finally{er=c,oh.transition=d}}function j_(e,t,i,a){if(dm){var c=rv(e,t,i,a);if(c===null)qy(e,t,a,pm,i),Jw(e,a);else if(XM(c,e,t,i,a))a.stopPropagation();else if(Jw(e,a),t&4&&-1<HM.indexOf(e)){for(;c!==null;){var d=Id(c);if(d!==null&&wS(d),d=rv(e,t,i,a),d===null&&qy(e,t,a,pm,i),d===c)break;c=d}c!==null&&a.stopPropagation()}else qy(e,t,a,null,i)}}var pm=null;function rv(e,t,i,a){if(pm=null,e=z_(a),e=zu(e),e!==null)if(t=qu(e),t===null)e=null;else if(i=t.tag,i===13){if(e=dS(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pm=e,null}function CS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DM()){case O_:return 1;case yS:return 4;case hm:case BM:return 16;case vS:return 536870912;default:return 16}default:return 16}}var Bl=null,D_=null,Vp=null;function AS(){if(Vp)return Vp;var e,t=D_,i=t.length,a,c="value"in Bl?Bl.value:Bl.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var y=i-e;for(a=1;a<=y&&t[i-a]===c[d-a];a++);return Vp=c.slice(e,1<a?1-a:void 0)}function Gp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vp(){return!0}function eb(){return!1}function Go(e){function t(i,a,c,d,y){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?vp:eb,this.isPropagationStopped=eb,this}return Or(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=vp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=vp)},persist:function(){},isPersistent:vp}),t}var Sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B_=Go(Sh),Ad=Or({},Sh,{view:0,detail:0}),JM=Go(Ad),Ny,Uy,Ef,dg=Or({},Ad,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ef&&(Ef&&e.type==="mousemove"?(Ny=e.screenX-Ef.screenX,Uy=e.screenY-Ef.screenY):Uy=Ny=0,Ef=e),Ny)},movementY:function(e){return"movementY"in e?e.movementY:Uy}}),tb=Go(dg),QM=Or({},dg,{dataTransfer:0}),ek=Go(QM),tk=Or({},Ad,{relatedTarget:0}),$y=Go(tk),nk=Or({},Sh,{animationName:0,elapsedTime:0,pseudoElement:0}),rk=Go(nk),ik=Or({},Sh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ok=Go(ik),sk=Or({},Sh,{data:0}),nb=Go(sk),ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ck(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uk[e])?!!t[e]:!1}function N_(){return ck}var hk=Or({},Ad,{key:function(e){if(e.key){var t=ak[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N_,charCode:function(e){return e.type==="keypress"?Gp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fk=Go(hk),dk=Or({},dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rb=Go(dk),pk=Or({},Ad,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N_}),mk=Go(pk),gk=Or({},Sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),yk=Go(gk),vk=Or({},dg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_k=Go(vk),xk=[9,13,27,32],U_=Va&&"CompositionEvent"in window,$f=null;Va&&"documentMode"in document&&($f=document.documentMode);var wk=Va&&"TextEvent"in window&&!$f,IS=Va&&(!U_||$f&&8<$f&&11>=$f),ib=String.fromCharCode(32),ob=!1;function PS(e,t){switch(e){case"keyup":return xk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Uc=!1;function bk(e,t){switch(e){case"compositionend":return MS(t);case"keypress":return t.which!==32?null:(ob=!0,ib);case"textInput":return e=t.data,e===ib&&ob?null:e;default:return null}}function Ek(e,t){if(Uc)return e==="compositionend"||!U_&&PS(e,t)?(e=AS(),Vp=D_=Bl=null,Uc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return IS&&t.locale!=="ko"?null:t.data;default:return null}}var Sk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Sk[e.type]:t==="textarea"}function kS(e,t,i,a){lS(a),t=mm(t,"onChange"),0<t.length&&(i=new B_("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Vf=null,ld=null;function Tk(e){$S(e,0)}function pg(e){var t=Gc(e);if(tS(t))return e}function Ck(e,t){if(e==="change")return t}var LS=!1;if(Va){var Vy;if(Va){var Gy="oninput"in document;if(!Gy){var ab=document.createElement("div");ab.setAttribute("oninput","return;"),Gy=typeof ab.oninput=="function"}Vy=Gy}else Vy=!1;LS=Vy&&(!document.documentMode||9<document.documentMode)}function lb(){Vf&&(Vf.detachEvent("onpropertychange",zS),ld=Vf=null)}function zS(e){if(e.propertyName==="value"&&pg(ld)){var t=[];kS(t,ld,e,z_(e)),fS(Tk,t)}}function Ak(e,t,i){e==="focusin"?(lb(),Vf=t,ld=i,Vf.attachEvent("onpropertychange",zS)):e==="focusout"&&lb()}function Ik(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pg(ld)}function Pk(e,t){if(e==="click")return pg(t)}function Mk(e,t){if(e==="input"||e==="change")return pg(t)}function kk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Us=typeof Object.is=="function"?Object.is:kk;function ud(e,t){if(Us(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!B0.call(t,c)||!Us(e[c],t[c]))return!1}return!0}function ub(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cb(e,t){var i=ub(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ub(i)}}function OS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?OS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function RS(){for(var e=window,t=lm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=lm(e.document)}return t}function $_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Lk(e){var t=RS(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&OS(i.ownerDocument.documentElement,i)){if(a!==null&&$_(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=cb(i,d);var y=cb(i,a);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zk=Va&&"documentMode"in document&&11>=document.documentMode,$c=null,iv=null,Gf=null,ov=!1;function hb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ov||$c==null||$c!==lm(a)||(a=$c,"selectionStart"in a&&$_(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Gf&&ud(Gf,a)||(Gf=a,a=mm(iv,"onSelect"),0<a.length&&(t=new B_("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=$c)))}function _p(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Vc={animationend:_p("Animation","AnimationEnd"),animationiteration:_p("Animation","AnimationIteration"),animationstart:_p("Animation","AnimationStart"),transitionend:_p("Transition","TransitionEnd")},Zy={},FS={};Va&&(FS=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);function mg(e){if(Zy[e])return Zy[e];if(!Vc[e])return e;var t=Vc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in FS)return Zy[e]=t[i];return e}var jS=mg("animationend"),DS=mg("animationiteration"),BS=mg("animationstart"),NS=mg("transitionend"),US=new Map,fb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tu(e,t){US.set(e,t),Xu(t,[e])}for(var Wy=0;Wy<fb.length;Wy++){var Hy=fb[Wy],Ok=Hy.toLowerCase(),Rk=Hy[0].toUpperCase()+Hy.slice(1);tu(Ok,"on"+Rk)}tu(jS,"onAnimationEnd");tu(DS,"onAnimationIteration");tu(BS,"onAnimationStart");tu("dblclick","onDoubleClick");tu("focusin","onFocus");tu("focusout","onBlur");tu(NS,"onTransitionEnd");hh("onMouseEnter",["mouseout","mouseover"]);hh("onMouseLeave",["mouseout","mouseover"]);hh("onPointerEnter",["pointerout","pointerover"]);hh("onPointerLeave",["pointerout","pointerover"]);Xu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fk=new Set("cancel close invalid load scroll toggle".split(" ").concat(kf));function db(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,OM(a,t,void 0,e),e.currentTarget=null}function $S(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var y=a.length-1;0<=y;y--){var l=a[y],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==d&&c.isPropagationStopped())break e;db(c,l,w),d=b}else for(y=0;y<a.length;y++){if(l=a[y],b=l.instance,w=l.currentTarget,l=l.listener,b!==d&&c.isPropagationStopped())break e;db(c,l,w),d=b}}}if(cm)throw e=ev,cm=!1,ev=null,e}function vr(e,t){var i=t[cv];i===void 0&&(i=t[cv]=new Set);var a=e+"__bubble";i.has(a)||(VS(t,e,2,!1),i.add(a))}function Xy(e,t,i){var a=0;t&&(a|=4),VS(i,e,a,t)}var xp="_reactListening"+Math.random().toString(36).slice(2);function cd(e){if(!e[xp]){e[xp]=!0,KE.forEach(function(i){i!=="selectionchange"&&(Fk.has(i)||Xy(i,!1,e),Xy(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xp]||(t[xp]=!0,Xy("selectionchange",!1,t))}}function VS(e,t,i,a){switch(CS(t)){case 1:var c=KM;break;case 4:c=YM;break;default:c=j_}i=c.bind(null,t,i,e),c=void 0,!Q0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function qy(e,t,i,a,c){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(y===4)for(y=a.return;y!==null;){var b=y.tag;if((b===3||b===4)&&(b=y.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;y=y.return}for(;l!==null;){if(y=zu(l),y===null)return;if(b=y.tag,b===5||b===6){a=d=y;continue e}l=l.parentNode}}a=a.return}fS(function(){var w=d,A=z_(i),E=[];e:{var L=US.get(e);if(L!==void 0){var F=B_,Q=e;switch(e){case"keypress":if(Gp(i)===0)break e;case"keydown":case"keyup":F=fk;break;case"focusin":Q="focus",F=$y;break;case"focusout":Q="blur",F=$y;break;case"beforeblur":case"afterblur":F=$y;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=tb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=ek;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=mk;break;case jS:case DS:case BS:F=rk;break;case NS:F=yk;break;case"scroll":F=JM;break;case"wheel":F=_k;break;case"copy":case"cut":case"paste":F=ok;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=rb}var K=(t&4)!==0,pe=!K&&e==="scroll",G=K?L!==null?L+"Capture":null:L;K=[];for(var V=w,U;V!==null;){U=V;var oe=U.stateNode;if(U.tag===5&&oe!==null&&(U=oe,G!==null&&(oe=id(V,G),oe!=null&&K.push(hd(V,oe,U)))),pe)break;V=V.return}0<K.length&&(L=new F(L,Q,null,i,A),E.push({event:L,listeners:K}))}}if(!(t&7)){e:{if(L=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",L&&i!==Y0&&(Q=i.relatedTarget||i.fromElement)&&(zu(Q)||Q[Ga]))break e;if((F||L)&&(L=A.window===A?A:(L=A.ownerDocument)?L.defaultView||L.parentWindow:window,F?(Q=i.relatedTarget||i.toElement,F=w,Q=Q?zu(Q):null,Q!==null&&(pe=qu(Q),Q!==pe||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(F=null,Q=w),F!==Q)){if(K=tb,oe="onMouseLeave",G="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(K=rb,oe="onPointerLeave",G="onPointerEnter",V="pointer"),pe=F==null?L:Gc(F),U=Q==null?L:Gc(Q),L=new K(oe,V+"leave",F,i,A),L.target=pe,L.relatedTarget=U,oe=null,zu(A)===w&&(K=new K(G,V+"enter",Q,i,A),K.target=U,K.relatedTarget=pe,oe=K),pe=oe,F&&Q)t:{for(K=F,G=Q,V=0,U=K;U;U=kc(U))V++;for(U=0,oe=G;oe;oe=kc(oe))U++;for(;0<V-U;)K=kc(K),V--;for(;0<U-V;)G=kc(G),U--;for(;V--;){if(K===G||G!==null&&K===G.alternate)break t;K=kc(K),G=kc(G)}K=null}else K=null;F!==null&&pb(E,L,F,K,!1),Q!==null&&pe!==null&&pb(E,pe,Q,K,!0)}}e:{if(L=w?Gc(w):window,F=L.nodeName&&L.nodeName.toLowerCase(),F==="select"||F==="input"&&L.type==="file")var W=Ck;else if(sb(L))if(LS)W=Mk;else{W=Ik;var N=Ak}else(F=L.nodeName)&&F.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(W=Pk);if(W&&(W=W(e,w))){kS(E,W,i,A);break e}N&&N(e,L,w),e==="focusout"&&(N=L._wrapperState)&&N.controlled&&L.type==="number"&&W0(L,"number",L.value)}switch(N=w?Gc(w):window,e){case"focusin":(sb(N)||N.contentEditable==="true")&&($c=N,iv=w,Gf=null);break;case"focusout":Gf=iv=$c=null;break;case"mousedown":ov=!0;break;case"contextmenu":case"mouseup":case"dragend":ov=!1,hb(E,i,A);break;case"selectionchange":if(zk)break;case"keydown":case"keyup":hb(E,i,A)}var S;if(U_)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Uc?PS(e,i)&&(M="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(M="onCompositionStart");M&&(IS&&i.locale!=="ko"&&(Uc||M!=="onCompositionStart"?M==="onCompositionEnd"&&Uc&&(S=AS()):(Bl=A,D_="value"in Bl?Bl.value:Bl.textContent,Uc=!0)),N=mm(w,M),0<N.length&&(M=new nb(M,e,null,i,A),E.push({event:M,listeners:N}),S?M.data=S:(S=MS(i),S!==null&&(M.data=S)))),(S=wk?bk(e,i):Ek(e,i))&&(w=mm(w,"onBeforeInput"),0<w.length&&(A=new nb("onBeforeInput","beforeinput",null,i,A),E.push({event:A,listeners:w}),A.data=S))}$S(E,t)})}function hd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function mm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=id(e,i),d!=null&&a.unshift(hd(e,d,c)),d=id(e,t),d!=null&&a.push(hd(e,d,c))),e=e.return}return a}function kc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pb(e,t,i,a,c){for(var d=t._reactName,y=[];i!==null&&i!==a;){var l=i,b=l.alternate,w=l.stateNode;if(b!==null&&b===a)break;l.tag===5&&w!==null&&(l=w,c?(b=id(i,d),b!=null&&y.unshift(hd(i,b,l))):c||(b=id(i,d),b!=null&&y.push(hd(i,b,l)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var jk=/\r\n?/g,Dk=/\u0000|\uFFFD/g;function mb(e){return(typeof e=="string"?e:""+e).replace(jk,`
`).replace(Dk,"")}function wp(e,t,i){if(t=mb(t),mb(e)!==t&&i)throw Error(Mt(425))}function gm(){}var sv=null,av=null;function lv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uv=typeof setTimeout=="function"?setTimeout:void 0,Bk=typeof clearTimeout=="function"?clearTimeout:void 0,gb=typeof Promise=="function"?Promise:void 0,Nk=typeof queueMicrotask=="function"?queueMicrotask:typeof gb<"u"?function(e){return gb.resolve(null).then(e).catch(Uk)}:uv;function Uk(e){setTimeout(function(){throw e})}function Ky(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),ad(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);ad(t)}function Zl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Th=Math.random().toString(36).slice(2),oa="__reactFiber$"+Th,fd="__reactProps$"+Th,Ga="__reactContainer$"+Th,cv="__reactEvents$"+Th,$k="__reactListeners$"+Th,Vk="__reactHandles$"+Th;function zu(e){var t=e[oa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ga]||i[oa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=yb(e);e!==null;){if(i=e[oa])return i;e=yb(e)}return t}e=i,i=e.parentNode}return null}function Id(e){return e=e[oa]||e[Ga],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Mt(33))}function gg(e){return e[fd]||null}var hv=[],Zc=-1;function nu(e){return{current:e}}function _r(e){0>Zc||(e.current=hv[Zc],hv[Zc]=null,Zc--)}function hr(e,t){Zc++,hv[Zc]=e.current,e.current=t}var Yl={},Wi=nu(Yl),wo=nu(!1),Bu=Yl;function fh(e,t){var i=e.type.contextTypes;if(!i)return Yl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function bo(e){return e=e.childContextTypes,e!=null}function ym(){_r(wo),_r(Wi)}function vb(e,t,i){if(Wi.current!==Yl)throw Error(Mt(168));hr(Wi,t),hr(wo,i)}function GS(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Mt(108,AM(e)||"Unknown",c));return Or({},i,a)}function vm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yl,Bu=Wi.current,hr(Wi,e),hr(wo,wo.current),!0}function _b(e,t,i){var a=e.stateNode;if(!a)throw Error(Mt(169));i?(e=GS(e,t,Bu),a.__reactInternalMemoizedMergedChildContext=e,_r(wo),_r(Wi),hr(Wi,e)):_r(wo),hr(wo,i)}var Da=null,yg=!1,Yy=!1;function ZS(e){Da===null?Da=[e]:Da.push(e)}function Gk(e){yg=!0,ZS(e)}function ru(){if(!Yy&&Da!==null){Yy=!0;var e=0,t=er;try{var i=Da;for(er=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Da=null,yg=!1}catch(c){throw Da!==null&&(Da=Da.slice(e+1)),gS(O_,ru),c}finally{er=t,Yy=!1}}return null}var Wc=[],Hc=0,_m=null,xm=0,ls=[],us=0,Nu=null,Na=1,Ua="";function Mu(e,t){Wc[Hc++]=xm,Wc[Hc++]=_m,_m=e,xm=t}function WS(e,t,i){ls[us++]=Na,ls[us++]=Ua,ls[us++]=Nu,Nu=e;var a=Na;e=Ua;var c=32-Bs(a)-1;a&=~(1<<c),i+=1;var d=32-Bs(t)+c;if(30<d){var y=c-c%5;d=(a&(1<<y)-1).toString(32),a>>=y,c-=y,Na=1<<32-Bs(t)+c|i<<c|a,Ua=d+e}else Na=1<<d|i<<c|a,Ua=e}function V_(e){e.return!==null&&(Mu(e,1),WS(e,1,0))}function G_(e){for(;e===_m;)_m=Wc[--Hc],Wc[Hc]=null,xm=Wc[--Hc],Wc[Hc]=null;for(;e===Nu;)Nu=ls[--us],ls[us]=null,Ua=ls[--us],ls[us]=null,Na=ls[--us],ls[us]=null}var Uo=null,No=null,Cr=!1,zs=null;function HS(e,t){var i=hs(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function xb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Uo=e,No=Zl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Uo=e,No=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Nu!==null?{id:Na,overflow:Ua}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=hs(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Uo=e,No=null,!0):!1;default:return!1}}function fv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dv(e){if(Cr){var t=No;if(t){var i=t;if(!xb(e,t)){if(fv(e))throw Error(Mt(418));t=Zl(i.nextSibling);var a=Uo;t&&xb(e,t)?HS(a,i):(e.flags=e.flags&-4097|2,Cr=!1,Uo=e)}}else{if(fv(e))throw Error(Mt(418));e.flags=e.flags&-4097|2,Cr=!1,Uo=e}}}function wb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Uo=e}function bp(e){if(e!==Uo)return!1;if(!Cr)return wb(e),Cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lv(e.type,e.memoizedProps)),t&&(t=No)){if(fv(e))throw XS(),Error(Mt(418));for(;t;)HS(e,t),t=Zl(t.nextSibling)}if(wb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){No=Zl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}No=null}}else No=Uo?Zl(e.stateNode.nextSibling):null;return!0}function XS(){for(var e=No;e;)e=Zl(e.nextSibling)}function dh(){No=Uo=null,Cr=!1}function Z_(e){zs===null?zs=[e]:zs.push(e)}var Zk=Ya.ReactCurrentBatchConfig;function ks(e,t){if(e&&e.defaultProps){t=Or({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var wm=nu(null),bm=null,Xc=null,W_=null;function H_(){W_=Xc=bm=null}function X_(e){var t=wm.current;_r(wm),e._currentValue=t}function pv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function sh(e,t){bm=e,W_=Xc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xo=!0),e.firstContext=null)}function ps(e){var t=e._currentValue;if(W_!==e)if(e={context:e,memoizedValue:t,next:null},Xc===null){if(bm===null)throw Error(Mt(308));Xc=e,bm.dependencies={lanes:0,firstContext:e}}else Xc=Xc.next=e;return t}var Ou=null;function q_(e){Ou===null?Ou=[e]:Ou.push(e)}function qS(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,q_(t)):(i.next=c.next,c.next=i),t.interleaved=i,Za(e,a)}function Za(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var zl=!1;function K_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $a(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Gn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Za(e,i)}return c=a.interleaved,c===null?(t.next=t,q_(a)):(t.next=c.next,c.next=t),a.interleaved=t,Za(e,i)}function Zp(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,R_(e,i)}}function bb(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=y:d=d.next=y,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Em(e,t,i,a){var c=e.updateQueue;zl=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,y===null?d=w:y.next=w,y=b;var A=e.alternate;A!==null&&(A=A.updateQueue,l=A.lastBaseUpdate,l!==y&&(l===null?A.firstBaseUpdate=w:l.next=w,A.lastBaseUpdate=b))}if(d!==null){var E=c.baseState;y=0,A=w=b=null,l=d;do{var L=l.lane,F=l.eventTime;if((a&L)===L){A!==null&&(A=A.next={eventTime:F,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var Q=e,K=l;switch(L=t,F=i,K.tag){case 1:if(Q=K.payload,typeof Q=="function"){E=Q.call(F,E,L);break e}E=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=K.payload,L=typeof Q=="function"?Q.call(F,E,L):Q,L==null)break e;E=Or({},E,L);break e;case 2:zl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,L=c.effects,L===null?c.effects=[l]:L.push(l))}else F={eventTime:F,lane:L,tag:l.tag,payload:l.payload,callback:l.callback,next:null},A===null?(w=A=F,b=E):A=A.next=F,y|=L;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;L=l,l=L.next,L.next=null,c.lastBaseUpdate=L,c.shared.pending=null}}while(1);if(A===null&&(b=E),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);$u|=y,e.lanes=y,e.memoizedState=E}}function Eb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(Mt(191,c));c.call(a)}}}var YS=new qE.Component().refs;function mv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Or({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var vg={isMounted:function(e){return(e=e._reactInternals)?qu(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=oo(),c=Xl(e),d=$a(a,c);d.payload=t,i!=null&&(d.callback=i),t=Wl(e,d,c),t!==null&&(Ns(t,e,c,a),Zp(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=oo(),c=Xl(e),d=$a(a,c);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=Wl(e,d,c),t!==null&&(Ns(t,e,c,a),Zp(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=oo(),a=Xl(e),c=$a(i,a);c.tag=2,t!=null&&(c.callback=t),t=Wl(e,c,a),t!==null&&(Ns(t,e,a,i),Zp(t,e,a))}};function Sb(e,t,i,a,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,y):t.prototype&&t.prototype.isPureReactComponent?!ud(i,a)||!ud(c,d):!0}function JS(e,t,i){var a=!1,c=Yl,d=t.contextType;return typeof d=="object"&&d!==null?d=ps(d):(c=bo(t)?Bu:Wi.current,a=t.contextTypes,d=(a=a!=null)?fh(e,c):Yl),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function Tb(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&vg.enqueueReplaceState(t,t.state,null)}function gv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=YS,K_(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=ps(d):(d=bo(t)?Bu:Wi.current,c.context=fh(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(mv(e,t,d,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&vg.enqueueReplaceState(c,c.state,null),Em(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Sf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Mt(309));var a=i.stateNode}if(!a)throw Error(Mt(147,e));var c=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(y){var l=c.refs;l===YS&&(l=c.refs={}),y===null?delete l[d]:l[d]=y},t._stringRef=d,t)}if(typeof e!="string")throw Error(Mt(284));if(!i._owner)throw Error(Mt(290,e))}return e}function Ep(e,t){throw e=Object.prototype.toString.call(t),Error(Mt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cb(e){var t=e._init;return t(e._payload)}function QS(e){function t(G,V){if(e){var U=G.deletions;U===null?(G.deletions=[V],G.flags|=16):U.push(V)}}function i(G,V){if(!e)return null;for(;V!==null;)t(G,V),V=V.sibling;return null}function a(G,V){for(G=new Map;V!==null;)V.key!==null?G.set(V.key,V):G.set(V.index,V),V=V.sibling;return G}function c(G,V){return G=ql(G,V),G.index=0,G.sibling=null,G}function d(G,V,U){return G.index=U,e?(U=G.alternate,U!==null?(U=U.index,U<V?(G.flags|=2,V):U):(G.flags|=2,V)):(G.flags|=1048576,V)}function y(G){return e&&G.alternate===null&&(G.flags|=2),G}function l(G,V,U,oe){return V===null||V.tag!==6?(V=i0(U,G.mode,oe),V.return=G,V):(V=c(V,U),V.return=G,V)}function b(G,V,U,oe){var W=U.type;return W===Nc?A(G,V,U.props.children,oe,U.key):V!==null&&(V.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ll&&Cb(W)===V.type)?(oe=c(V,U.props),oe.ref=Sf(G,V,U),oe.return=G,oe):(oe=Yp(U.type,U.key,U.props,null,G.mode,oe),oe.ref=Sf(G,V,U),oe.return=G,oe)}function w(G,V,U,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=o0(U,G.mode,oe),V.return=G,V):(V=c(V,U.children||[]),V.return=G,V)}function A(G,V,U,oe,W){return V===null||V.tag!==7?(V=Du(U,G.mode,oe,W),V.return=G,V):(V=c(V,U),V.return=G,V)}function E(G,V,U){if(typeof V=="string"&&V!==""||typeof V=="number")return V=i0(""+V,G.mode,U),V.return=G,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case fp:return U=Yp(V.type,V.key,V.props,null,G.mode,U),U.ref=Sf(G,null,V),U.return=G,U;case Bc:return V=o0(V,G.mode,U),V.return=G,V;case Ll:var oe=V._init;return E(G,oe(V._payload),U)}if(Pf(V)||_f(V))return V=Du(V,G.mode,U,null),V.return=G,V;Ep(G,V)}return null}function L(G,V,U,oe){var W=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return W!==null?null:l(G,V,""+U,oe);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case fp:return U.key===W?b(G,V,U,oe):null;case Bc:return U.key===W?w(G,V,U,oe):null;case Ll:return W=U._init,L(G,V,W(U._payload),oe)}if(Pf(U)||_f(U))return W!==null?null:A(G,V,U,oe,null);Ep(G,U)}return null}function F(G,V,U,oe,W){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return G=G.get(U)||null,l(V,G,""+oe,W);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case fp:return G=G.get(oe.key===null?U:oe.key)||null,b(V,G,oe,W);case Bc:return G=G.get(oe.key===null?U:oe.key)||null,w(V,G,oe,W);case Ll:var N=oe._init;return F(G,V,U,N(oe._payload),W)}if(Pf(oe)||_f(oe))return G=G.get(U)||null,A(V,G,oe,W,null);Ep(V,oe)}return null}function Q(G,V,U,oe){for(var W=null,N=null,S=V,M=V=0,Z=null;S!==null&&M<U.length;M++){S.index>M?(Z=S,S=null):Z=S.sibling;var q=L(G,S,U[M],oe);if(q===null){S===null&&(S=Z);break}e&&S&&q.alternate===null&&t(G,S),V=d(q,V,M),N===null?W=q:N.sibling=q,N=q,S=Z}if(M===U.length)return i(G,S),Cr&&Mu(G,M),W;if(S===null){for(;M<U.length;M++)S=E(G,U[M],oe),S!==null&&(V=d(S,V,M),N===null?W=S:N.sibling=S,N=S);return Cr&&Mu(G,M),W}for(S=a(G,S);M<U.length;M++)Z=F(S,G,M,U[M],oe),Z!==null&&(e&&Z.alternate!==null&&S.delete(Z.key===null?M:Z.key),V=d(Z,V,M),N===null?W=Z:N.sibling=Z,N=Z);return e&&S.forEach(function(J){return t(G,J)}),Cr&&Mu(G,M),W}function K(G,V,U,oe){var W=_f(U);if(typeof W!="function")throw Error(Mt(150));if(U=W.call(U),U==null)throw Error(Mt(151));for(var N=W=null,S=V,M=V=0,Z=null,q=U.next();S!==null&&!q.done;M++,q=U.next()){S.index>M?(Z=S,S=null):Z=S.sibling;var J=L(G,S,q.value,oe);if(J===null){S===null&&(S=Z);break}e&&S&&J.alternate===null&&t(G,S),V=d(J,V,M),N===null?W=J:N.sibling=J,N=J,S=Z}if(q.done)return i(G,S),Cr&&Mu(G,M),W;if(S===null){for(;!q.done;M++,q=U.next())q=E(G,q.value,oe),q!==null&&(V=d(q,V,M),N===null?W=q:N.sibling=q,N=q);return Cr&&Mu(G,M),W}for(S=a(G,S);!q.done;M++,q=U.next())q=F(S,G,M,q.value,oe),q!==null&&(e&&q.alternate!==null&&S.delete(q.key===null?M:q.key),V=d(q,V,M),N===null?W=q:N.sibling=q,N=q);return e&&S.forEach(function(ye){return t(G,ye)}),Cr&&Mu(G,M),W}function pe(G,V,U,oe){if(typeof U=="object"&&U!==null&&U.type===Nc&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case fp:e:{for(var W=U.key,N=V;N!==null;){if(N.key===W){if(W=U.type,W===Nc){if(N.tag===7){i(G,N.sibling),V=c(N,U.props.children),V.return=G,G=V;break e}}else if(N.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ll&&Cb(W)===N.type){i(G,N.sibling),V=c(N,U.props),V.ref=Sf(G,N,U),V.return=G,G=V;break e}i(G,N);break}else t(G,N);N=N.sibling}U.type===Nc?(V=Du(U.props.children,G.mode,oe,U.key),V.return=G,G=V):(oe=Yp(U.type,U.key,U.props,null,G.mode,oe),oe.ref=Sf(G,V,U),oe.return=G,G=oe)}return y(G);case Bc:e:{for(N=U.key;V!==null;){if(V.key===N)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){i(G,V.sibling),V=c(V,U.children||[]),V.return=G,G=V;break e}else{i(G,V);break}else t(G,V);V=V.sibling}V=o0(U,G.mode,oe),V.return=G,G=V}return y(G);case Ll:return N=U._init,pe(G,V,N(U._payload),oe)}if(Pf(U))return Q(G,V,U,oe);if(_f(U))return K(G,V,U,oe);Ep(G,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,V!==null&&V.tag===6?(i(G,V.sibling),V=c(V,U),V.return=G,G=V):(i(G,V),V=i0(U,G.mode,oe),V.return=G,G=V),y(G)):i(G,V)}return pe}var ph=QS(!0),eT=QS(!1),Pd={},ha=nu(Pd),dd=nu(Pd),pd=nu(Pd);function Ru(e){if(e===Pd)throw Error(Mt(174));return e}function Y_(e,t){switch(hr(pd,t),hr(dd,e),hr(ha,Pd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X0(t,e)}_r(ha),hr(ha,t)}function mh(){_r(ha),_r(dd),_r(pd)}function tT(e){Ru(pd.current);var t=Ru(ha.current),i=X0(t,e.type);t!==i&&(hr(dd,e),hr(ha,i))}function J_(e){dd.current===e&&(_r(ha),_r(dd))}var kr=nu(0);function Sm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jy=[];function Q_(){for(var e=0;e<Jy.length;e++)Jy[e]._workInProgressVersionPrimary=null;Jy.length=0}var Wp=Ya.ReactCurrentDispatcher,Qy=Ya.ReactCurrentBatchConfig,Uu=0,zr=null,ei=null,hi=null,Tm=!1,Zf=!1,md=0,Wk=0;function Ui(){throw Error(Mt(321))}function e1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Us(e[i],t[i]))return!1;return!0}function t1(e,t,i,a,c,d){if(Uu=d,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wp.current=e===null||e.memoizedState===null?Kk:Yk,e=i(a,c),Zf){d=0;do{if(Zf=!1,md=0,25<=d)throw Error(Mt(301));d+=1,hi=ei=null,t.updateQueue=null,Wp.current=Jk,e=i(a,c)}while(Zf)}if(Wp.current=Cm,t=ei!==null&&ei.next!==null,Uu=0,hi=ei=zr=null,Tm=!1,t)throw Error(Mt(300));return e}function n1(){var e=md!==0;return md=0,e}function ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?zr.memoizedState=hi=e:hi=hi.next=e,hi}function ms(){if(ei===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=ei.next;var t=hi===null?zr.memoizedState:hi.next;if(t!==null)hi=t,ei=e;else{if(e===null)throw Error(Mt(310));ei=e,e={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},hi===null?zr.memoizedState=hi=e:hi=hi.next=e}return hi}function gd(e,t){return typeof t=="function"?t(e):t}function e0(e){var t=ms(),i=t.queue;if(i===null)throw Error(Mt(311));i.lastRenderedReducer=e;var a=ei,c=a.baseQueue,d=i.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}a.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,a=a.baseState;var l=y=null,b=null,w=d;do{var A=w.lane;if((Uu&A)===A)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),a=w.hasEagerState?w.eagerState:e(a,w.action);else{var E={lane:A,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=E,y=a):b=b.next=E,zr.lanes|=A,$u|=A}w=w.next}while(w!==null&&w!==d);b===null?y=a:b.next=l,Us(a,t.memoizedState)||(xo=!0),t.memoizedState=a,t.baseState=y,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do d=c.lane,zr.lanes|=d,$u|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function t0(e){var t=ms(),i=t.queue;if(i===null)throw Error(Mt(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);Us(d,t.memoizedState)||(xo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,a]}function nT(){}function rT(e,t){var i=zr,a=ms(),c=t(),d=!Us(a.memoizedState,c);if(d&&(a.memoizedState=c,xo=!0),a=a.queue,r1(sT.bind(null,i,a,e),[e]),a.getSnapshot!==t||d||hi!==null&&hi.memoizedState.tag&1){if(i.flags|=2048,yd(9,oT.bind(null,i,a,c,t),void 0,null),fi===null)throw Error(Mt(349));Uu&30||iT(i,t,c)}return c}function iT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function oT(e,t,i,a){t.value=i,t.getSnapshot=a,aT(t)&&lT(e)}function sT(e,t,i){return i(function(){aT(t)&&lT(e)})}function aT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Us(e,i)}catch{return!0}}function lT(e){var t=Za(e,1);t!==null&&Ns(t,e,1,-1)}function Ab(e){var t=ia();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:e},t.queue=e,e=e.dispatch=qk.bind(null,zr,e),[t.memoizedState,e]}function yd(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function uT(){return ms().memoizedState}function Hp(e,t,i,a){var c=ia();zr.flags|=e,c.memoizedState=yd(1|t,i,void 0,a===void 0?null:a)}function _g(e,t,i,a){var c=ms();a=a===void 0?null:a;var d=void 0;if(ei!==null){var y=ei.memoizedState;if(d=y.destroy,a!==null&&e1(a,y.deps)){c.memoizedState=yd(t,i,d,a);return}}zr.flags|=e,c.memoizedState=yd(1|t,i,d,a)}function Ib(e,t){return Hp(8390656,8,e,t)}function r1(e,t){return _g(2048,8,e,t)}function cT(e,t){return _g(4,2,e,t)}function hT(e,t){return _g(4,4,e,t)}function fT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dT(e,t,i){return i=i!=null?i.concat([e]):null,_g(4,4,fT.bind(null,t,e),i)}function i1(){}function pT(e,t){var i=ms();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&e1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function mT(e,t){var i=ms();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&e1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function gT(e,t,i){return Uu&21?(Us(i,t)||(i=_S(),zr.lanes|=i,$u|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=i)}function Hk(e,t){var i=er;er=i!==0&&4>i?i:4,e(!0);var a=Qy.transition;Qy.transition={};try{e(!1),t()}finally{er=i,Qy.transition=a}}function yT(){return ms().memoizedState}function Xk(e,t,i){var a=Xl(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},vT(e))_T(t,i);else if(i=qS(e,t,i,a),i!==null){var c=oo();Ns(i,e,a,c),xT(i,t,a)}}function qk(e,t,i){var a=Xl(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(vT(e))_T(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var y=t.lastRenderedState,l=d(y,i);if(c.hasEagerState=!0,c.eagerState=l,Us(l,y)){var b=t.interleaved;b===null?(c.next=c,q_(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=qS(e,t,c,a),i!==null&&(c=oo(),Ns(i,e,a,c),xT(i,t,a))}}function vT(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function _T(e,t){Zf=Tm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function xT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,R_(e,i)}}var Cm={readContext:ps,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},Kk={readContext:ps,useCallback:function(e,t){return ia().memoizedState=[e,t===void 0?null:t],e},useContext:ps,useEffect:Ib,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Hp(4194308,4,fT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Hp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hp(4,2,e,t)},useMemo:function(e,t){var i=ia();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=ia();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Xk.bind(null,zr,e),[a.memoizedState,e]},useRef:function(e){var t=ia();return e={current:e},t.memoizedState=e},useState:Ab,useDebugValue:i1,useDeferredValue:function(e){return ia().memoizedState=e},useTransition:function(){var e=Ab(!1),t=e[0];return e=Hk.bind(null,e[1]),ia().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=zr,c=ia();if(Cr){if(i===void 0)throw Error(Mt(407));i=i()}else{if(i=t(),fi===null)throw Error(Mt(349));Uu&30||iT(a,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,Ib(sT.bind(null,a,d,e),[e]),a.flags|=2048,yd(9,oT.bind(null,a,d,i,t),void 0,null),i},useId:function(){var e=ia(),t=fi.identifierPrefix;if(Cr){var i=Ua,a=Na;i=(a&~(1<<32-Bs(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=md++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Wk++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Yk={readContext:ps,useCallback:pT,useContext:ps,useEffect:r1,useImperativeHandle:dT,useInsertionEffect:cT,useLayoutEffect:hT,useMemo:mT,useReducer:e0,useRef:uT,useState:function(){return e0(gd)},useDebugValue:i1,useDeferredValue:function(e){var t=ms();return gT(t,ei.memoizedState,e)},useTransition:function(){var e=e0(gd)[0],t=ms().memoizedState;return[e,t]},useMutableSource:nT,useSyncExternalStore:rT,useId:yT,unstable_isNewReconciler:!1},Jk={readContext:ps,useCallback:pT,useContext:ps,useEffect:r1,useImperativeHandle:dT,useInsertionEffect:cT,useLayoutEffect:hT,useMemo:mT,useReducer:t0,useRef:uT,useState:function(){return t0(gd)},useDebugValue:i1,useDeferredValue:function(e){var t=ms();return ei===null?t.memoizedState=e:gT(t,ei.memoizedState,e)},useTransition:function(){var e=t0(gd)[0],t=ms().memoizedState;return[e,t]},useMutableSource:nT,useSyncExternalStore:rT,useId:yT,unstable_isNewReconciler:!1};function gh(e,t){try{var i="",a=t;do i+=CM(a),a=a.return;while(a);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function n0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function yv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Qk=typeof WeakMap=="function"?WeakMap:Map;function wT(e,t,i){i=$a(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Im||(Im=!0,Av=a),yv(e,t)},i}function bT(e,t,i){i=$a(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){yv(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){yv(e,t),typeof a!="function"&&(Hl===null?Hl=new Set([this]):Hl.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function Pb(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Qk;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=d3.bind(null,e,t,i),t.then(e,e))}function Mb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kb(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=$a(-1,1),t.tag=2,Wl(i,t,1))),i.lanes|=1),e)}var e3=Ya.ReactCurrentOwner,xo=!1;function to(e,t,i,a){t.child=e===null?eT(t,null,i,a):ph(t,e.child,i,a)}function Lb(e,t,i,a,c){i=i.render;var d=t.ref;return sh(t,c),a=t1(e,t,i,a,d,c),i=n1(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Wa(e,t,c)):(Cr&&i&&V_(t),t.flags|=1,to(e,t,a,c),t.child)}function zb(e,t,i,a,c){if(e===null){var d=i.type;return typeof d=="function"&&!f1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,ET(e,t,d,a,c)):(e=Yp(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var y=d.memoizedProps;if(i=i.compare,i=i!==null?i:ud,i(y,a)&&e.ref===t.ref)return Wa(e,t,c)}return t.flags|=1,e=ql(d,a),e.ref=t.ref,e.return=t,t.child=e}function ET(e,t,i,a,c){if(e!==null){var d=e.memoizedProps;if(ud(d,a)&&e.ref===t.ref)if(xo=!1,t.pendingProps=a=d,(e.lanes&c)!==0)e.flags&131072&&(xo=!0);else return t.lanes=e.lanes,Wa(e,t,c)}return vv(e,t,i,a,c)}function ST(e,t,i){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(Kc,jo),jo|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,hr(Kc,jo),jo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:i,hr(Kc,jo),jo|=a}else d!==null?(a=d.baseLanes|i,t.memoizedState=null):a=i,hr(Kc,jo),jo|=a;return to(e,t,c,i),t.child}function TT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function vv(e,t,i,a,c){var d=bo(i)?Bu:Wi.current;return d=fh(t,d),sh(t,c),i=t1(e,t,i,a,d,c),a=n1(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Wa(e,t,c)):(Cr&&a&&V_(t),t.flags|=1,to(e,t,i,c),t.child)}function Ob(e,t,i,a,c){if(bo(i)){var d=!0;vm(t)}else d=!1;if(sh(t,c),t.stateNode===null)Xp(e,t),JS(t,i,a),gv(t,i,a,c),a=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var b=y.context,w=i.contextType;typeof w=="object"&&w!==null?w=ps(w):(w=bo(i)?Bu:Wi.current,w=fh(t,w));var A=i.getDerivedStateFromProps,E=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function";E||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==a||b!==w)&&Tb(t,y,a,w),zl=!1;var L=t.memoizedState;y.state=L,Em(t,a,y,c),b=t.memoizedState,l!==a||L!==b||wo.current||zl?(typeof A=="function"&&(mv(t,i,A,a),b=t.memoizedState),(l=zl||Sb(t,i,l,a,L,b,w))?(E||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),y.props=a,y.state=b,y.context=w,a=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{y=t.stateNode,KS(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:ks(t.type,l),y.props=w,E=t.pendingProps,L=y.context,b=i.contextType,typeof b=="object"&&b!==null?b=ps(b):(b=bo(i)?Bu:Wi.current,b=fh(t,b));var F=i.getDerivedStateFromProps;(A=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==E||L!==b)&&Tb(t,y,a,b),zl=!1,L=t.memoizedState,y.state=L,Em(t,a,y,c);var Q=t.memoizedState;l!==E||L!==Q||wo.current||zl?(typeof F=="function"&&(mv(t,i,F,a),Q=t.memoizedState),(w=zl||Sb(t,i,w,a,L,Q,b)||!1)?(A||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,Q,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,Q,b)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Q),y.props=a,y.state=Q,y.context=b,a=w):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),a=!1)}return _v(e,t,i,a,d,c)}function _v(e,t,i,a,c,d){TT(e,t);var y=(t.flags&128)!==0;if(!a&&!y)return c&&_b(t,i,!1),Wa(e,t,d);a=t.stateNode,e3.current=t;var l=y&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&y?(t.child=ph(t,e.child,null,d),t.child=ph(t,null,l,d)):to(e,t,l,d),t.memoizedState=a.state,c&&_b(t,i,!0),t.child}function CT(e){var t=e.stateNode;t.pendingContext?vb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vb(e,t.context,!1),Y_(e,t.containerInfo)}function Rb(e,t,i,a,c){return dh(),Z_(c),t.flags|=256,to(e,t,i,a),t.child}var xv={dehydrated:null,treeContext:null,retryLane:0};function wv(e){return{baseLanes:e,cachePool:null,transitions:null}}function AT(e,t,i){var a=t.pendingProps,c=kr.current,d=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),hr(kr,c&1),e===null)return dv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=a.children,e=a.fallback,d?(a=t.mode,d=t.child,y={mode:"hidden",children:y},!(a&1)&&d!==null?(d.childLanes=0,d.pendingProps=y):d=bg(y,a,0,null),e=Du(e,a,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=wv(i),t.memoizedState=xv,e):o1(t,y));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return t3(e,t,y,a,l,c,i);if(d){d=a.fallback,y=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:a.children};return!(y&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=ql(c,b),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=ql(l,d):(d=Du(d,y,i,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,y=e.child.memoizedState,y=y===null?wv(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},d.memoizedState=y,d.childLanes=e.childLanes&~i,t.memoizedState=xv,a}return d=e.child,e=d.sibling,a=ql(d,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function o1(e,t){return t=bg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sp(e,t,i,a){return a!==null&&Z_(a),ph(t,e.child,null,i),e=o1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function t3(e,t,i,a,c,d,y){if(i)return t.flags&256?(t.flags&=-257,a=n0(Error(Mt(422))),Sp(e,t,y,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,c=t.mode,a=bg({mode:"visible",children:a.children},c,0,null),d=Du(d,c,y,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,t.mode&1&&ph(t,e.child,null,y),t.child.memoizedState=wv(y),t.memoizedState=xv,d);if(!(t.mode&1))return Sp(e,t,y,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,d=Error(Mt(419)),a=n0(d,a,void 0),Sp(e,t,y,a)}if(l=(y&e.childLanes)!==0,xo||l){if(a=fi,a!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|y)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Za(e,c),Ns(a,e,c,-1))}return h1(),a=n0(Error(Mt(421))),Sp(e,t,y,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=p3.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,No=Zl(c.nextSibling),Uo=t,Cr=!0,zs=null,e!==null&&(ls[us++]=Na,ls[us++]=Ua,ls[us++]=Nu,Na=e.id,Ua=e.overflow,Nu=t),t=o1(t,a.children),t.flags|=4096,t)}function Fb(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),pv(e.return,t,i)}function r0(e,t,i,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=c)}function IT(e,t,i){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(to(e,t,a.children,i),a=kr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fb(e,i,t);else if(e.tag===19)Fb(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(hr(kr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Sm(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),r0(t,!1,c,i,d);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Sm(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}r0(t,!0,i,null,d);break;case"together":r0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),$u|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Mt(153));if(t.child!==null){for(e=t.child,i=ql(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=ql(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function n3(e,t,i){switch(t.tag){case 3:CT(t),dh();break;case 5:tT(t);break;case 1:bo(t.type)&&vm(t);break;case 4:Y_(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;hr(wm,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(hr(kr,kr.current&1),t.flags|=128,null):i&t.child.childLanes?AT(e,t,i):(hr(kr,kr.current&1),e=Wa(e,t,i),e!==null?e.sibling:null);hr(kr,kr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return IT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),hr(kr,kr.current),a)break;return null;case 22:case 23:return t.lanes=0,ST(e,t,i)}return Wa(e,t,i)}var PT,bv,MT,kT;PT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};bv=function(){};MT=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Ru(ha.current);var d=null;switch(i){case"input":c=G0(e,c),a=G0(e,a),d=[];break;case"select":c=Or({},c,{value:void 0}),a=Or({},a,{value:void 0}),d=[];break;case"textarea":c=H0(e,c),a=H0(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=gm)}q0(i,a);var y;i=null;for(w in c)if(!a.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(y in l)l.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(nd.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in a){var b=a[w];if(l=c!=null?c[w]:void 0,a.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(y in l)!l.hasOwnProperty(y)||b&&b.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in b)b.hasOwnProperty(y)&&l[y]!==b[y]&&(i||(i={}),i[y]=b[y])}else i||(d||(d=[]),d.push(w,i)),i=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(nd.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&vr("scroll",e),d||l===b||(d=[])):(d=d||[]).push(w,b))}i&&(d=d||[]).push("style",i);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};kT=function(e,t,i,a){i!==a&&(t.flags|=4)};function Tf(e,t){if(!Cr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function $i(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function r3(e,t,i){var a=t.pendingProps;switch(G_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $i(t),null;case 1:return bo(t.type)&&ym(),$i(t),null;case 3:return a=t.stateNode,mh(),_r(wo),_r(Wi),Q_(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(bp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zs!==null&&(Mv(zs),zs=null))),bv(e,t),$i(t),null;case 5:J_(t);var c=Ru(pd.current);if(i=t.type,e!==null&&t.stateNode!=null)MT(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Mt(166));return $i(t),null}if(e=Ru(ha.current),bp(t)){a=t.stateNode,i=t.type;var d=t.memoizedProps;switch(a[oa]=t,a[fd]=d,e=(t.mode&1)!==0,i){case"dialog":vr("cancel",a),vr("close",a);break;case"iframe":case"object":case"embed":vr("load",a);break;case"video":case"audio":for(c=0;c<kf.length;c++)vr(kf[c],a);break;case"source":vr("error",a);break;case"img":case"image":case"link":vr("error",a),vr("load",a);break;case"details":vr("toggle",a);break;case"input":Zw(a,d),vr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},vr("invalid",a);break;case"textarea":Hw(a,d),vr("invalid",a)}q0(i,d),c=null;for(var y in d)if(d.hasOwnProperty(y)){var l=d[y];y==="children"?typeof l=="string"?a.textContent!==l&&(d.suppressHydrationWarning!==!0&&wp(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&wp(a.textContent,l,e),c=["children",""+l]):nd.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&vr("scroll",a)}switch(i){case"input":dp(a),Ww(a,d,!0);break;case"textarea":dp(a),Xw(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=gm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iS(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=y.createElement(i,{is:a.is}):(e=y.createElement(i),i==="select"&&(y=e,a.multiple?y.multiple=!0:a.size&&(y.size=a.size))):e=y.createElementNS(e,i),e[oa]=t,e[fd]=a,PT(e,t,!1,!1),t.stateNode=e;e:{switch(y=K0(i,a),i){case"dialog":vr("cancel",e),vr("close",e),c=a;break;case"iframe":case"object":case"embed":vr("load",e),c=a;break;case"video":case"audio":for(c=0;c<kf.length;c++)vr(kf[c],e);c=a;break;case"source":vr("error",e),c=a;break;case"img":case"image":case"link":vr("error",e),vr("load",e),c=a;break;case"details":vr("toggle",e),c=a;break;case"input":Zw(e,a),c=G0(e,a),vr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Or({},a,{value:void 0}),vr("invalid",e);break;case"textarea":Hw(e,a),c=H0(e,a),vr("invalid",e);break;default:c=a}q0(i,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="style"?aS(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&oS(e,b)):d==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&rd(e,b):typeof b=="number"&&rd(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(nd.hasOwnProperty(d)?b!=null&&d==="onScroll"&&vr("scroll",e):b!=null&&P_(e,d,b,y))}switch(i){case"input":dp(e),Ww(e,a,!1);break;case"textarea":dp(e),Xw(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Kl(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?nh(e,!!a.multiple,d,!1):a.defaultValue!=null&&nh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=gm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $i(t),null;case 6:if(e&&t.stateNode!=null)kT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Mt(166));if(i=Ru(pd.current),Ru(ha.current),bp(t)){if(a=t.stateNode,i=t.memoizedProps,a[oa]=t,(d=a.nodeValue!==i)&&(e=Uo,e!==null))switch(e.tag){case 3:wp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wp(a.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[oa]=t,t.stateNode=a}return $i(t),null;case 13:if(_r(kr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cr&&No!==null&&t.mode&1&&!(t.flags&128))XS(),dh(),t.flags|=98560,d=!1;else if(d=bp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(Mt(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(Mt(317));d[oa]=t}else dh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$i(t),d=!1}else zs!==null&&(Mv(zs),zs=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||kr.current&1?ti===0&&(ti=3):h1())),t.updateQueue!==null&&(t.flags|=4),$i(t),null);case 4:return mh(),bv(e,t),e===null&&cd(t.stateNode.containerInfo),$i(t),null;case 10:return X_(t.type._context),$i(t),null;case 17:return bo(t.type)&&ym(),$i(t),null;case 19:if(_r(kr),d=t.memoizedState,d===null)return $i(t),null;if(a=(t.flags&128)!==0,y=d.rendering,y===null)if(a)Tf(d,!1);else{if(ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=Sm(e),y!==null){for(t.flags|=128,Tf(d,!1),a=y.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)d=i,e=a,d.flags&=14680066,y=d.alternate,y===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,e=y.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return hr(kr,kr.current&1|2),t.child}e=e.sibling}d.tail!==null&&Hr()>yh&&(t.flags|=128,a=!0,Tf(d,!1),t.lanes=4194304)}else{if(!a)if(e=Sm(y),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Tf(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Cr)return $i(t),null}else 2*Hr()-d.renderingStartTime>yh&&i!==1073741824&&(t.flags|=128,a=!0,Tf(d,!1),t.lanes=4194304);d.isBackwards?(y.sibling=t.child,t.child=y):(i=d.last,i!==null?i.sibling=y:t.child=y,d.last=y)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Hr(),t.sibling=null,i=kr.current,hr(kr,a?i&1|2:i&1),t):($i(t),null);case 22:case 23:return c1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?jo&1073741824&&($i(t),t.subtreeFlags&6&&(t.flags|=8192)):$i(t),null;case 24:return null;case 25:return null}throw Error(Mt(156,t.tag))}function i3(e,t){switch(G_(t),t.tag){case 1:return bo(t.type)&&ym(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mh(),_r(wo),_r(Wi),Q_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return J_(t),null;case 13:if(_r(kr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Mt(340));dh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _r(kr),null;case 4:return mh(),null;case 10:return X_(t.type._context),null;case 22:case 23:return c1(),null;case 24:return null;default:return null}}var Tp=!1,Gi=!1,o3=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function qc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Nr(e,t,a)}else i.current=null}function Ev(e,t,i){try{i()}catch(a){Nr(e,t,a)}}var jb=!1;function s3(e,t){if(sv=dm,e=RS(),$_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var y=0,l=-1,b=-1,w=0,A=0,E=e,L=null;t:for(;;){for(var F;E!==i||c!==0&&E.nodeType!==3||(l=y+c),E!==d||a!==0&&E.nodeType!==3||(b=y+a),E.nodeType===3&&(y+=E.nodeValue.length),(F=E.firstChild)!==null;)L=E,E=F;for(;;){if(E===e)break t;if(L===i&&++w===c&&(l=y),L===d&&++A===a&&(b=y),(F=E.nextSibling)!==null)break;E=L,L=E.parentNode}E=F}i=l===-1||b===-1?null:{start:l,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(av={focusedElem:e,selectionRange:i},dm=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){t=Qt;try{var Q=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var K=Q.memoizedProps,pe=Q.memoizedState,G=t.stateNode,V=G.getSnapshotBeforeUpdate(t.elementType===t.type?K:ks(t.type,K),pe);G.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Mt(163))}}catch(oe){Nr(t,t.return,oe)}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}return Q=jb,jb=!1,Q}function Wf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Ev(t,i,d)}c=c.next}while(c!==a)}}function xg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Sv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function LT(e){var t=e.alternate;t!==null&&(e.alternate=null,LT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oa],delete t[fd],delete t[cv],delete t[$k],delete t[Vk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zT(e){return e.tag===5||e.tag===3||e.tag===4}function Db(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=gm));else if(a!==4&&(e=e.child,e!==null))for(Tv(e,t,i),e=e.sibling;e!==null;)Tv(e,t,i),e=e.sibling}function Cv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Cv(e,t,i),e=e.sibling;e!==null;)Cv(e,t,i),e=e.sibling}var Ci=null,Ls=!1;function Ml(e,t,i){for(i=i.child;i!==null;)OT(e,t,i),i=i.sibling}function OT(e,t,i){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(fg,i)}catch{}switch(i.tag){case 5:Gi||qc(i,t);case 6:var a=Ci,c=Ls;Ci=null,Ml(e,t,i),Ci=a,Ls=c,Ci!==null&&(Ls?(e=Ci,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ci.removeChild(i.stateNode));break;case 18:Ci!==null&&(Ls?(e=Ci,i=i.stateNode,e.nodeType===8?Ky(e.parentNode,i):e.nodeType===1&&Ky(e,i),ad(e)):Ky(Ci,i.stateNode));break;case 4:a=Ci,c=Ls,Ci=i.stateNode.containerInfo,Ls=!0,Ml(e,t,i),Ci=a,Ls=c;break;case 0:case 11:case 14:case 15:if(!Gi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,y=d.destroy;d=d.tag,y!==void 0&&(d&2||d&4)&&Ev(i,t,y),c=c.next}while(c!==a)}Ml(e,t,i);break;case 1:if(!Gi&&(qc(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(l){Nr(i,t,l)}Ml(e,t,i);break;case 21:Ml(e,t,i);break;case 22:i.mode&1?(Gi=(a=Gi)||i.memoizedState!==null,Ml(e,t,i),Gi=a):Ml(e,t,i);break;default:Ml(e,t,i)}}function Bb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new o3),t.forEach(function(a){var c=m3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Ms(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var d=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:Ci=l.stateNode,Ls=!1;break e;case 3:Ci=l.stateNode.containerInfo,Ls=!0;break e;case 4:Ci=l.stateNode.containerInfo,Ls=!0;break e}l=l.return}if(Ci===null)throw Error(Mt(160));OT(d,y,c),Ci=null,Ls=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){Nr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)RT(t,e),t=t.sibling}function RT(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ms(t,e),ra(e),a&4){try{Wf(3,e,e.return),xg(3,e)}catch(K){Nr(e,e.return,K)}try{Wf(5,e,e.return)}catch(K){Nr(e,e.return,K)}}break;case 1:Ms(t,e),ra(e),a&512&&i!==null&&qc(i,i.return);break;case 5:if(Ms(t,e),ra(e),a&512&&i!==null&&qc(i,i.return),e.flags&32){var c=e.stateNode;try{rd(c,"")}catch(K){Nr(e,e.return,K)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,y=i!==null?i.memoizedProps:d,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&nS(c,d),K0(l,y);var w=K0(l,d);for(y=0;y<b.length;y+=2){var A=b[y],E=b[y+1];A==="style"?aS(c,E):A==="dangerouslySetInnerHTML"?oS(c,E):A==="children"?rd(c,E):P_(c,A,E,w)}switch(l){case"input":Z0(c,d);break;case"textarea":rS(c,d);break;case"select":var L=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var F=d.value;F!=null?nh(c,!!d.multiple,F,!1):L!==!!d.multiple&&(d.defaultValue!=null?nh(c,!!d.multiple,d.defaultValue,!0):nh(c,!!d.multiple,d.multiple?[]:"",!1))}c[fd]=d}catch(K){Nr(e,e.return,K)}}break;case 6:if(Ms(t,e),ra(e),a&4){if(e.stateNode===null)throw Error(Mt(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(K){Nr(e,e.return,K)}}break;case 3:if(Ms(t,e),ra(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{ad(t.containerInfo)}catch(K){Nr(e,e.return,K)}break;case 4:Ms(t,e),ra(e);break;case 13:Ms(t,e),ra(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(l1=Hr())),a&4&&Bb(e);break;case 22:if(A=i!==null&&i.memoizedState!==null,e.mode&1?(Gi=(w=Gi)||A,Ms(t,e),Gi=w):Ms(t,e),ra(e),a&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!A&&e.mode&1)for(Qt=e,A=e.child;A!==null;){for(E=Qt=A;Qt!==null;){switch(L=Qt,F=L.child,L.tag){case 0:case 11:case 14:case 15:Wf(4,L,L.return);break;case 1:qc(L,L.return);var Q=L.stateNode;if(typeof Q.componentWillUnmount=="function"){a=L,i=L.return;try{t=a,Q.props=t.memoizedProps,Q.state=t.memoizedState,Q.componentWillUnmount()}catch(K){Nr(a,i,K)}}break;case 5:qc(L,L.return);break;case 22:if(L.memoizedState!==null){Ub(E);continue}}F!==null?(F.return=L,Qt=F):Ub(E)}A=A.sibling}e:for(A=null,E=e;;){if(E.tag===5){if(A===null){A=E;try{c=E.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=E.stateNode,b=E.memoizedProps.style,y=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=sS("display",y))}catch(K){Nr(e,e.return,K)}}}else if(E.tag===6){if(A===null)try{E.stateNode.nodeValue=w?"":E.memoizedProps}catch(K){Nr(e,e.return,K)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;A===E&&(A=null),E=E.return}A===E&&(A=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Ms(t,e),ra(e),a&4&&Bb(e);break;case 21:break;default:Ms(t,e),ra(e)}}function ra(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(zT(i)){var a=i;break e}i=i.return}throw Error(Mt(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(rd(c,""),a.flags&=-33);var d=Db(e);Cv(e,d,c);break;case 3:case 4:var y=a.stateNode.containerInfo,l=Db(e);Tv(e,l,y);break;default:throw Error(Mt(161))}}catch(b){Nr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function a3(e,t,i){Qt=e,FT(e)}function FT(e,t,i){for(var a=(e.mode&1)!==0;Qt!==null;){var c=Qt,d=c.child;if(c.tag===22&&a){var y=c.memoizedState!==null||Tp;if(!y){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Gi;l=Tp;var w=Gi;if(Tp=y,(Gi=b)&&!w)for(Qt=c;Qt!==null;)y=Qt,b=y.child,y.tag===22&&y.memoizedState!==null?$b(c):b!==null?(b.return=y,Qt=b):$b(c);for(;d!==null;)Qt=d,FT(d),d=d.sibling;Qt=c,Tp=l,Gi=w}Nb(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,Qt=d):Nb(e)}}function Nb(e){for(;Qt!==null;){var t=Qt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gi||xg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Gi)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:ks(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Eb(t,d,a);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Eb(t,y,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var A=w.memoizedState;if(A!==null){var E=A.dehydrated;E!==null&&ad(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Mt(163))}Gi||t.flags&512&&Sv(t)}catch(L){Nr(t,t.return,L)}}if(t===e){Qt=null;break}if(i=t.sibling,i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function Ub(e){for(;Qt!==null;){var t=Qt;if(t===e){Qt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function $b(e){for(;Qt!==null;){var t=Qt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{xg(4,t)}catch(b){Nr(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Nr(t,c,b)}}var d=t.return;try{Sv(t)}catch(b){Nr(t,d,b)}break;case 5:var y=t.return;try{Sv(t)}catch(b){Nr(t,y,b)}}}catch(b){Nr(t,t.return,b)}if(t===e){Qt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Qt=l;break}Qt=t.return}}var l3=Math.ceil,Am=Ya.ReactCurrentDispatcher,s1=Ya.ReactCurrentOwner,ds=Ya.ReactCurrentBatchConfig,Gn=0,fi=null,Kr=null,Ii=0,jo=0,Kc=nu(0),ti=0,vd=null,$u=0,wg=0,a1=0,Hf=null,vo=null,l1=0,yh=1/0,ja=null,Im=!1,Av=null,Hl=null,Cp=!1,Nl=null,Pm=0,Xf=0,Iv=null,qp=-1,Kp=0;function oo(){return Gn&6?Hr():qp!==-1?qp:qp=Hr()}function Xl(e){return e.mode&1?Gn&2&&Ii!==0?Ii&-Ii:Zk.transition!==null?(Kp===0&&(Kp=_S()),Kp):(e=er,e!==0||(e=window.event,e=e===void 0?16:CS(e.type)),e):1}function Ns(e,t,i,a){if(50<Xf)throw Xf=0,Iv=null,Error(Mt(185));Cd(e,i,a),(!(Gn&2)||e!==fi)&&(e===fi&&(!(Gn&2)&&(wg|=i),ti===4&&jl(e,Ii)),Eo(e,a),i===1&&Gn===0&&!(t.mode&1)&&(yh=Hr()+500,yg&&ru()))}function Eo(e,t){var i=e.callbackNode;ZM(e,t);var a=fm(e,e===fi?Ii:0);if(a===0)i!==null&&Yw(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Yw(i),t===1)e.tag===0?Gk(Vb.bind(null,e)):ZS(Vb.bind(null,e)),Nk(function(){!(Gn&6)&&ru()}),i=null;else{switch(xS(a)){case 1:i=O_;break;case 4:i=yS;break;case 16:i=hm;break;case 536870912:i=vS;break;default:i=hm}i=GT(i,jT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function jT(e,t){if(qp=-1,Kp=0,Gn&6)throw Error(Mt(327));var i=e.callbackNode;if(ah()&&e.callbackNode!==i)return null;var a=fm(e,e===fi?Ii:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Mm(e,a);else{t=a;var c=Gn;Gn|=2;var d=BT();(fi!==e||Ii!==t)&&(ja=null,yh=Hr()+500,ju(e,t));do try{h3();break}catch(l){DT(e,l)}while(1);H_(),Am.current=d,Gn=c,Kr!==null?t=0:(fi=null,Ii=0,t=ti)}if(t!==0){if(t===2&&(c=tv(e),c!==0&&(a=c,t=Pv(e,c))),t===1)throw i=vd,ju(e,0),jl(e,a),Eo(e,Hr()),i;if(t===6)jl(e,a);else{if(c=e.current.alternate,!(a&30)&&!u3(c)&&(t=Mm(e,a),t===2&&(d=tv(e),d!==0&&(a=d,t=Pv(e,d))),t===1))throw i=vd,ju(e,0),jl(e,a),Eo(e,Hr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Mt(345));case 2:ku(e,vo,ja);break;case 3:if(jl(e,a),(a&130023424)===a&&(t=l1+500-Hr(),10<t)){if(fm(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){oo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=uv(ku.bind(null,e,vo,ja),t);break}ku(e,vo,ja);break;case 4:if(jl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var y=31-Bs(a);d=1<<y,y=t[y],y>c&&(c=y),a&=~d}if(a=c,a=Hr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*l3(a/1960))-a,10<a){e.timeoutHandle=uv(ku.bind(null,e,vo,ja),a);break}ku(e,vo,ja);break;case 5:ku(e,vo,ja);break;default:throw Error(Mt(329))}}}return Eo(e,Hr()),e.callbackNode===i?jT.bind(null,e):null}function Pv(e,t){var i=Hf;return e.current.memoizedState.isDehydrated&&(ju(e,t).flags|=256),e=Mm(e,t),e!==2&&(t=vo,vo=i,t!==null&&Mv(t)),e}function Mv(e){vo===null?vo=e:vo.push.apply(vo,e)}function u3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],d=c.getSnapshot;c=c.value;try{if(!Us(d(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jl(e,t){for(t&=~a1,t&=~wg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Bs(t),a=1<<i;e[i]=-1,t&=~a}}function Vb(e){if(Gn&6)throw Error(Mt(327));ah();var t=fm(e,0);if(!(t&1))return Eo(e,Hr()),null;var i=Mm(e,t);if(e.tag!==0&&i===2){var a=tv(e);a!==0&&(t=a,i=Pv(e,a))}if(i===1)throw i=vd,ju(e,0),jl(e,t),Eo(e,Hr()),i;if(i===6)throw Error(Mt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e,vo,ja),Eo(e,Hr()),null}function u1(e,t){var i=Gn;Gn|=1;try{return e(t)}finally{Gn=i,Gn===0&&(yh=Hr()+500,yg&&ru())}}function Vu(e){Nl!==null&&Nl.tag===0&&!(Gn&6)&&ah();var t=Gn;Gn|=1;var i=ds.transition,a=er;try{if(ds.transition=null,er=1,e)return e()}finally{er=a,ds.transition=i,Gn=t,!(Gn&6)&&ru()}}function c1(){jo=Kc.current,_r(Kc)}function ju(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Bk(i)),Kr!==null)for(i=Kr.return;i!==null;){var a=i;switch(G_(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ym();break;case 3:mh(),_r(wo),_r(Wi),Q_();break;case 5:J_(a);break;case 4:mh();break;case 13:_r(kr);break;case 19:_r(kr);break;case 10:X_(a.type._context);break;case 22:case 23:c1()}i=i.return}if(fi=e,Kr=e=ql(e.current,null),Ii=jo=t,ti=0,vd=null,a1=wg=$u=0,vo=Hf=null,Ou!==null){for(t=0;t<Ou.length;t++)if(i=Ou[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,d=i.pending;if(d!==null){var y=d.next;d.next=c,a.next=y}i.pending=a}Ou=null}return e}function DT(e,t){do{var i=Kr;try{if(H_(),Wp.current=Cm,Tm){for(var a=zr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Tm=!1}if(Uu=0,hi=ei=zr=null,Zf=!1,md=0,s1.current=null,i===null||i.return===null){ti=1,vd=t,Kr=null;break}e:{var d=e,y=i.return,l=i,b=t;if(t=Ii,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,A=l,E=A.tag;if(!(A.mode&1)&&(E===0||E===11||E===15)){var L=A.alternate;L?(A.updateQueue=L.updateQueue,A.memoizedState=L.memoizedState,A.lanes=L.lanes):(A.updateQueue=null,A.memoizedState=null)}var F=Mb(y);if(F!==null){F.flags&=-257,kb(F,y,l,d,t),F.mode&1&&Pb(d,w,t),t=F,b=w;var Q=t.updateQueue;if(Q===null){var K=new Set;K.add(b),t.updateQueue=K}else Q.add(b);break e}else{if(!(t&1)){Pb(d,w,t),h1();break e}b=Error(Mt(426))}}else if(Cr&&l.mode&1){var pe=Mb(y);if(pe!==null){!(pe.flags&65536)&&(pe.flags|=256),kb(pe,y,l,d,t),Z_(gh(b,l));break e}}d=b=gh(b,l),ti!==4&&(ti=2),Hf===null?Hf=[d]:Hf.push(d),d=y;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var G=wT(d,b,t);bb(d,G);break e;case 1:l=b;var V=d.type,U=d.stateNode;if(!(d.flags&128)&&(typeof V.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Hl===null||!Hl.has(U)))){d.flags|=65536,t&=-t,d.lanes|=t;var oe=bT(d,l,t);bb(d,oe);break e}}d=d.return}while(d!==null)}UT(i)}catch(W){t=W,Kr===i&&i!==null&&(Kr=i=i.return);continue}break}while(1)}function BT(){var e=Am.current;return Am.current=Cm,e===null?Cm:e}function h1(){(ti===0||ti===3||ti===2)&&(ti=4),fi===null||!($u&268435455)&&!(wg&268435455)||jl(fi,Ii)}function Mm(e,t){var i=Gn;Gn|=2;var a=BT();(fi!==e||Ii!==t)&&(ja=null,ju(e,t));do try{c3();break}catch(c){DT(e,c)}while(1);if(H_(),Gn=i,Am.current=a,Kr!==null)throw Error(Mt(261));return fi=null,Ii=0,ti}function c3(){for(;Kr!==null;)NT(Kr)}function h3(){for(;Kr!==null&&!FM();)NT(Kr)}function NT(e){var t=VT(e.alternate,e,jo);e.memoizedProps=e.pendingProps,t===null?UT(e):Kr=t,s1.current=null}function UT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=i3(i,t),i!==null){i.flags&=32767,Kr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ti=6,Kr=null;return}}else if(i=r3(i,t,jo),i!==null){Kr=i;return}if(t=t.sibling,t!==null){Kr=t;return}Kr=t=e}while(t!==null);ti===0&&(ti=5)}function ku(e,t,i){var a=er,c=ds.transition;try{ds.transition=null,er=1,f3(e,t,i,a)}finally{ds.transition=c,er=a}return null}function f3(e,t,i,a){do ah();while(Nl!==null);if(Gn&6)throw Error(Mt(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Mt(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(WM(e,d),e===fi&&(Kr=fi=null,Ii=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Cp||(Cp=!0,GT(hm,function(){return ah(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=ds.transition,ds.transition=null;var y=er;er=1;var l=Gn;Gn|=4,s1.current=null,s3(e,i),RT(i,e),Lk(av),dm=!!sv,av=sv=null,e.current=i,a3(i),jM(),Gn=l,er=y,ds.transition=d}else e.current=i;if(Cp&&(Cp=!1,Nl=e,Pm=c),d=e.pendingLanes,d===0&&(Hl=null),NM(i.stateNode),Eo(e,Hr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Im)throw Im=!1,e=Av,Av=null,e;return Pm&1&&e.tag!==0&&ah(),d=e.pendingLanes,d&1?e===Iv?Xf++:(Xf=0,Iv=e):Xf=0,ru(),null}function ah(){if(Nl!==null){var e=xS(Pm),t=ds.transition,i=er;try{if(ds.transition=null,er=16>e?16:e,Nl===null)var a=!1;else{if(e=Nl,Nl=null,Pm=0,Gn&6)throw Error(Mt(331));var c=Gn;for(Gn|=4,Qt=e.current;Qt!==null;){var d=Qt,y=d.child;if(Qt.flags&16){var l=d.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(Qt=w;Qt!==null;){var A=Qt;switch(A.tag){case 0:case 11:case 15:Wf(8,A,d)}var E=A.child;if(E!==null)E.return=A,Qt=E;else for(;Qt!==null;){A=Qt;var L=A.sibling,F=A.return;if(LT(A),A===w){Qt=null;break}if(L!==null){L.return=F,Qt=L;break}Qt=F}}}var Q=d.alternate;if(Q!==null){var K=Q.child;if(K!==null){Q.child=null;do{var pe=K.sibling;K.sibling=null,K=pe}while(K!==null)}}Qt=d}}if(d.subtreeFlags&2064&&y!==null)y.return=d,Qt=y;else e:for(;Qt!==null;){if(d=Qt,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Wf(9,d,d.return)}var G=d.sibling;if(G!==null){G.return=d.return,Qt=G;break e}Qt=d.return}}var V=e.current;for(Qt=V;Qt!==null;){y=Qt;var U=y.child;if(y.subtreeFlags&2064&&U!==null)U.return=y,Qt=U;else e:for(y=V;Qt!==null;){if(l=Qt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xg(9,l)}}catch(W){Nr(l,l.return,W)}if(l===y){Qt=null;break e}var oe=l.sibling;if(oe!==null){oe.return=l.return,Qt=oe;break e}Qt=l.return}}if(Gn=c,ru(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(fg,e)}catch{}a=!0}return a}finally{er=i,ds.transition=t}}return!1}function Gb(e,t,i){t=gh(i,t),t=wT(e,t,1),e=Wl(e,t,1),t=oo(),e!==null&&(Cd(e,1,t),Eo(e,t))}function Nr(e,t,i){if(e.tag===3)Gb(e,e,i);else for(;t!==null;){if(t.tag===3){Gb(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Hl===null||!Hl.has(a))){e=gh(i,e),e=bT(t,e,1),t=Wl(t,e,1),e=oo(),t!==null&&(Cd(t,1,e),Eo(t,e));break}}t=t.return}}function d3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=oo(),e.pingedLanes|=e.suspendedLanes&i,fi===e&&(Ii&i)===i&&(ti===4||ti===3&&(Ii&130023424)===Ii&&500>Hr()-l1?ju(e,0):a1|=i),Eo(e,t)}function $T(e,t){t===0&&(e.mode&1?(t=gp,gp<<=1,!(gp&130023424)&&(gp=4194304)):t=1);var i=oo();e=Za(e,t),e!==null&&(Cd(e,t,i),Eo(e,i))}function p3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),$T(e,i)}function m3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Mt(314))}a!==null&&a.delete(t),$T(e,i)}var VT;VT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||wo.current)xo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return xo=!1,n3(e,t,i);xo=!!(e.flags&131072)}else xo=!1,Cr&&t.flags&1048576&&WS(t,xm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Xp(e,t),e=t.pendingProps;var c=fh(t,Wi.current);sh(t,i),c=t1(null,t,a,e,c,i);var d=n1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bo(a)?(d=!0,vm(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,K_(t),c.updater=vg,t.stateNode=c,c._reactInternals=t,gv(t,a,e,i),t=_v(null,t,a,!0,d,i)):(t.tag=0,Cr&&d&&V_(t),to(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Xp(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=y3(a),e=ks(a,e),c){case 0:t=vv(null,t,a,e,i);break e;case 1:t=Ob(null,t,a,e,i);break e;case 11:t=Lb(null,t,a,e,i);break e;case 14:t=zb(null,t,a,ks(a.type,e),i);break e}throw Error(Mt(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ks(a,c),vv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ks(a,c),Ob(e,t,a,c,i);case 3:e:{if(CT(t),e===null)throw Error(Mt(387));a=t.pendingProps,d=t.memoizedState,c=d.element,KS(e,t),Em(t,a,null,i);var y=t.memoizedState;if(a=y.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=gh(Error(Mt(423)),t),t=Rb(e,t,a,i,c);break e}else if(a!==c){c=gh(Error(Mt(424)),t),t=Rb(e,t,a,i,c);break e}else for(No=Zl(t.stateNode.containerInfo.firstChild),Uo=t,Cr=!0,zs=null,i=eT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(dh(),a===c){t=Wa(e,t,i);break e}to(e,t,a,i)}t=t.child}return t;case 5:return tT(t),e===null&&dv(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,y=c.children,lv(a,c)?y=null:d!==null&&lv(a,d)&&(t.flags|=32),TT(e,t),to(e,t,y,i),t.child;case 6:return e===null&&dv(t),null;case 13:return AT(e,t,i);case 4:return Y_(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ph(t,null,a,i):to(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ks(a,c),Lb(e,t,a,c,i);case 7:return to(e,t,t.pendingProps,i),t.child;case 8:return to(e,t,t.pendingProps.children,i),t.child;case 12:return to(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,d=t.memoizedProps,y=c.value,hr(wm,a._currentValue),a._currentValue=y,d!==null)if(Us(d.value,y)){if(d.children===c.children&&!wo.current){t=Wa(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){y=d.child;for(var b=l.firstContext;b!==null;){if(b.context===a){if(d.tag===1){b=$a(-1,i&-i),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var A=w.pending;A===null?b.next=b:(b.next=A.next,A.next=b),w.pending=b}}d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),pv(d.return,i,t),l.lanes|=i;break}b=b.next}}else if(d.tag===10)y=d.type===t.type?null:d.child;else if(d.tag===18){if(y=d.return,y===null)throw Error(Mt(341));y.lanes|=i,l=y.alternate,l!==null&&(l.lanes|=i),pv(y,i,t),y=d.sibling}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===t){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}to(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,sh(t,i),c=ps(c),a=a(c),t.flags|=1,to(e,t,a,i),t.child;case 14:return a=t.type,c=ks(a,t.pendingProps),c=ks(a.type,c),zb(e,t,a,c,i);case 15:return ET(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ks(a,c),Xp(e,t),t.tag=1,bo(a)?(e=!0,vm(t)):e=!1,sh(t,i),JS(t,a,c),gv(t,a,c,i),_v(null,t,a,!0,e,i);case 19:return IT(e,t,i);case 22:return ST(e,t,i)}throw Error(Mt(156,t.tag))};function GT(e,t){return gS(e,t)}function g3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(e,t,i,a){return new g3(e,t,i,a)}function f1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function y3(e){if(typeof e=="function")return f1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===k_)return 11;if(e===L_)return 14}return 2}function ql(e,t){var i=e.alternate;return i===null?(i=hs(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Yp(e,t,i,a,c,d){var y=2;if(a=e,typeof e=="function")f1(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Nc:return Du(i.children,c,d,t);case M_:y=8,c|=8;break;case N0:return e=hs(12,i,t,c|2),e.elementType=N0,e.lanes=d,e;case U0:return e=hs(13,i,t,c),e.elementType=U0,e.lanes=d,e;case $0:return e=hs(19,i,t,c),e.elementType=$0,e.lanes=d,e;case QE:return bg(i,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case YE:y=10;break e;case JE:y=9;break e;case k_:y=11;break e;case L_:y=14;break e;case Ll:y=16,a=null;break e}throw Error(Mt(130,e==null?e:typeof e,""))}return t=hs(y,i,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function Du(e,t,i,a){return e=hs(7,e,a,t),e.lanes=i,e}function bg(e,t,i,a){return e=hs(22,e,a,t),e.elementType=QE,e.lanes=i,e.stateNode={isHidden:!1},e}function i0(e,t,i){return e=hs(6,e,null,t),e.lanes=i,e}function o0(e,t,i){return t=hs(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function v3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=By(0),this.expirationTimes=By(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=By(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function d1(e,t,i,a,c,d,y,l,b){return e=new v3(e,t,i,l,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=hs(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},K_(d),e}function _3(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function ZT(e){if(!e)return Yl;e=e._reactInternals;e:{if(qu(e)!==e||e.tag!==1)throw Error(Mt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Mt(171))}if(e.tag===1){var i=e.type;if(bo(i))return GS(e,i,t)}return t}function WT(e,t,i,a,c,d,y,l,b){return e=d1(i,a,!0,e,c,d,y,l,b),e.context=ZT(null),i=e.current,a=oo(),c=Xl(i),d=$a(a,c),d.callback=t??null,Wl(i,d,c),e.current.lanes=c,Cd(e,c,a),Eo(e,a),e}function Eg(e,t,i,a){var c=t.current,d=oo(),y=Xl(c);return i=ZT(i),t.context===null?t.context=i:t.pendingContext=i,t=$a(d,y),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Wl(c,t,y),e!==null&&(Ns(e,c,y,d),Zp(e,c,y)),y}function km(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function p1(e,t){Zb(e,t),(e=e.alternate)&&Zb(e,t)}function x3(){return null}var HT=typeof reportError=="function"?reportError:function(e){console.error(e)};function m1(e){this._internalRoot=e}Sg.prototype.render=m1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Mt(409));Eg(e,t,null,null)};Sg.prototype.unmount=m1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vu(function(){Eg(null,e,null,null)}),t[Ga]=null}};function Sg(e){this._internalRoot=e}Sg.prototype.unstable_scheduleHydration=function(e){if(e){var t=ES();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Fl.length&&t!==0&&t<Fl[i].priority;i++);Fl.splice(i,0,e),i===0&&TS(e)}};function g1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Tg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wb(){}function w3(e,t,i,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var w=km(y);d.call(w)}}var y=WT(t,a,e,0,null,!1,!1,"",Wb);return e._reactRootContainer=y,e[Ga]=y.current,cd(e.nodeType===8?e.parentNode:e),Vu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var w=km(b);l.call(w)}}var b=d1(e,0,!1,null,null,!1,!1,"",Wb);return e._reactRootContainer=b,e[Ga]=b.current,cd(e.nodeType===8?e.parentNode:e),Vu(function(){Eg(t,b,i,a)}),b}function Cg(e,t,i,a,c){var d=i._reactRootContainer;if(d){var y=d;if(typeof c=="function"){var l=c;c=function(){var b=km(y);l.call(b)}}Eg(t,y,e,c)}else y=w3(i,t,e,c,a);return km(y)}wS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Mf(t.pendingLanes);i!==0&&(R_(t,i|1),Eo(t,Hr()),!(Gn&6)&&(yh=Hr()+500,ru()))}break;case 13:Vu(function(){var a=Za(e,1);if(a!==null){var c=oo();Ns(a,e,1,c)}}),p1(e,1)}};F_=function(e){if(e.tag===13){var t=Za(e,134217728);if(t!==null){var i=oo();Ns(t,e,134217728,i)}p1(e,134217728)}};bS=function(e){if(e.tag===13){var t=Xl(e),i=Za(e,t);if(i!==null){var a=oo();Ns(i,e,t,a)}p1(e,t)}};ES=function(){return er};SS=function(e,t){var i=er;try{return er=e,t()}finally{er=i}};J0=function(e,t,i){switch(t){case"input":if(Z0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=gg(a);if(!c)throw Error(Mt(90));tS(a),Z0(a,c)}}}break;case"textarea":rS(e,i);break;case"select":t=i.value,t!=null&&nh(e,!!i.multiple,t,!1)}};cS=u1;hS=Vu;var b3={usingClientEntryPoint:!1,Events:[Id,Gc,gg,lS,uS,u1]},Cf={findFiberByHostInstance:zu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},E3={bundleType:Cf.bundleType,version:Cf.version,rendererPackageName:Cf.rendererPackageName,rendererConfig:Cf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ya.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pS(e),e===null?null:e.stateNode},findFiberByHostInstance:Cf.findFiberByHostInstance||x3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ap.isDisabled&&Ap.supportsFiber)try{fg=Ap.inject(E3),ca=Ap}catch{}}Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b3;Vo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g1(t))throw Error(Mt(200));return _3(e,t,null,i)};Vo.createRoot=function(e,t){if(!g1(e))throw Error(Mt(299));var i=!1,a="",c=HT;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=d1(e,1,!1,null,null,i,!1,a,c),e[Ga]=t.current,cd(e.nodeType===8?e.parentNode:e),new m1(t)};Vo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Mt(188)):(e=Object.keys(e).join(","),Error(Mt(268,e)));return e=pS(t),e=e===null?null:e.stateNode,e};Vo.flushSync=function(e){return Vu(e)};Vo.hydrate=function(e,t,i){if(!Tg(t))throw Error(Mt(200));return Cg(null,e,t,!0,i)};Vo.hydrateRoot=function(e,t,i){if(!g1(e))throw Error(Mt(405));var a=i!=null&&i.hydratedSources||null,c=!1,d="",y=HT;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=WT(t,null,e,1,i??null,c,!1,d,y),e[Ga]=t.current,cd(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Sg(t)};Vo.render=function(e,t,i){if(!Tg(t))throw Error(Mt(200));return Cg(null,e,t,!1,i)};Vo.unmountComponentAtNode=function(e){if(!Tg(e))throw Error(Mt(40));return e._reactRootContainer?(Vu(function(){Cg(null,null,e,!1,function(){e._reactRootContainer=null,e[Ga]=null})}),!0):!1};Vo.unstable_batchedUpdates=u1;Vo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Tg(i))throw Error(Mt(200));if(e==null||e._reactInternals===void 0)throw Error(Mt(38));return Cg(e,t,i,!1,a)};Vo.version="18.2.0-next-9e3b772b8-20220608";function XT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XT)}catch(e){console.error(e)}}XT(),WE.exports=Vo;var y1=WE.exports;const S3=Sd(y1);var qT={exports:{}};(function(e,t){(function(i,a){e.exports=a()})(Rl,function(){var i,a,c;function d(l,b){if(!i)i=b;else if(!a)a=b;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",A={};i(A),c=b(A),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(l){function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var w=A;function A(o,n){this.x=o,this.y=n}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(o){return o instanceof A?o:Array.isArray(o)?new A(o[0],o[1]):o};var E=b(w),L=F;function F(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}F.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var x=0,T=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?x=s:T=s,s=.5*(T-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Q=b(L);function K(o,n,s,h){const p=new Q(o,n,s,h);return function(v){return p.solve(v)}}const pe=K(.25,.1,.25,1);function G(o,n,s){return Math.min(s,Math.max(n,o))}function V(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function U(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let oe=1;function W(o,n,s){const h={};for(const p in o)h[p]=n.call(s||this,o[p],p,o);return h}function N(o,n,s){const h={};for(const p in o)n.call(s||this,o[p],p,o)&&(h[p]=o[p]);return h}function S(o){return Array.isArray(o)?o.map(S):typeof o=="object"&&o?W(o,S):o}const M={};function Z(o){M[o]||(typeof console<"u"&&console.warn(o),M[o]=!0)}function q(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function J(o){let n=0;for(let s,h,p=0,v=o.length,x=v-1;p<v;x=p++)s=o[p],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function ye(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let xe=null;function be(o){if(xe==null){const n=o.navigator?o.navigator.userAgent:null;xe=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return xe}function te(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ie,ne;const me={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){return this.getImageCanvasContext(o).getImageData(-n,-n,o.width+2*n,o.height+2*n)},getImageCanvasContext(o){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=o.width,n.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(ie||(ie=document.createElement("a")),ie.href=o,ie.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ne==null&&(ne=matchMedia("(prefers-reduced-motion: reduce)")),ne.matches)}},Ee={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class we extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const Ue=ye()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Le=o=>Ee.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Me(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Ue(),signal:s.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(T=>{(o.type==="arrayBuffer"||o.type==="image"?T.arrayBuffer():o.type==="json"?T.json():T.text()).then(P=>{v||(p=!0,n(null,P,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(P=>{v||n(new Error(P.message))})})(x):x.blob().then(T=>n(new we(x.status,x.statusText,o.url,T)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,p||s.abort()}}}const He=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(ye()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!ye())return(Le(o.url)||Me)(o,n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(Ue())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Me(o,n);if(ye()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(T){return p(T)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new we(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},Ge=function(o,n){return He(U(o,{type:"arrayBuffer"}),n)};function rt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function ct(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function vt(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Pt{constructor(n,s={}){U(this,s),this.type=n}}class ht extends Pt{constructor(n,s={}){super("error",U({error:n},s))}}class Et{on(n,s){return this._listeners=this._listeners||{},ct(n,s,this._listeners),this}off(n,s){return vt(n,s,this._listeners),vt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},ct(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Pt(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const T of p)T.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const T of v)vt(h,T,this._oneTimeListeners),T.call(this,n);const x=this._eventedParent;x&&(U(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof ht&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function fn(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return Ut.forEach(h=>{h in n&&(s[h]=n[h])}),s}function qt(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!qt(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!qt(o[s],n[s]))return!1;return!0}return o===n}const Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function un(o,n,s){s.push({command:Vt.addSource,args:[o,n[o]]})}function gn(o,n,s){n.push({command:Vt.removeSource,args:[o]}),s[o]=!0}function Se(o,n,s,h){gn(o,s,h),un(o,n,s)}function j(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!qt(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!qt(o[s][h],n[s][h]))return!1;return!0}function O(o,n,s,h,p,v){let x;for(x in n=n||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(qt(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(qt(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}))}function _e(o){return o.id}function Ze(o,n){return o[n.id]=n,o}class Fe{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function ut(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class ae extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class z{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new z(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const D={kind:"null"},ce={kind:"number"},Re={kind:"string"},Xe={kind:"boolean"},st={kind:"color"},en={kind:"object"},kt={kind:"value"},yn={kind:"collator"},An={kind:"formatted"},_n={kind:"padding"},wr={kind:"resolvedImage"},pi={kind:"variableAnchorOffsetCollection"};function fr(o,n){return{kind:"array",itemType:o,N:n}}function On(o){if(o.kind==="array"){const n=On(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const dr=[D,ce,Re,Xe,st,An,en,fr(kt),_n,wr,pi];function mi(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!mi(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of dr)if(!mi(s,n))return null}}return`Expected ${On(o)} but found ${On(n)} instead.`}function ke(o,n){return n.some(s=>s.kind===o.kind)}function re(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function se(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const fe=.96422,Te=.82521,ze=4/29,qe=6/29,Ve=3*qe*qe,$e=qe*qe*qe,Qe=Math.PI/180,pt=180/Math.PI;function gt(o){return(o%=360)<0&&(o+=360),o}function yt([o,n,s,h]){let p,v;const x=cn((.2225045*(o=tn(o))+.7168786*(n=tn(n))+.0606169*(s=tn(s)))/1);o===n&&n===s?p=v=x:(p=cn((.4360747*o+.3850649*n+.1430804*s)/fe),v=cn((.0139322*o+.0971045*n+.7141733*s)/Te));const T=116*x-16;return[T<0?0:T,500*(p-x),200*(x-v),h]}function tn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function cn(o){return o>$e?Math.pow(o,1/3):o/Ve+ze}function Nt([o,n,s,h]){let p=(o+16)/116,v=isNaN(n)?p:p+n/500,x=isNaN(s)?p:p-s/200;return p=1*hn(p),v=fe*hn(v),x=Te*hn(x),[Xt(3.1338561*v-1.6168667*p-.4906146*x),Xt(-.9787684*v+1.9161415*p+.033454*x),Xt(.0719453*v-.2289914*p+1.4052427*x),h]}function Xt(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function hn(o){return o>qe?o*o*o:Ve*(o-ze)}function En(o){return parseInt(o.padEnd(2,o),16)/255}function $n(o,n){return xn(n?o/100:o,0,1)}function xn(o,n,s){return Math.min(Math.max(n,o),s)}function Mn(o){return!o.some(Number.isNaN)}const ni={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class an{constructor(n,s,h,p=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof an)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=ni[h];if(p){const[x,T,P]=p;return[x/255,T/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let T=1;return[En(h.slice(T,T+=x)),En(h.slice(T,T+=x)),En(h.slice(T,T+=x)),En(h.slice(T,T+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[T,P,R,X,ee,ue,de,ge,Pe,je,Ne,et]=x,We=[X||" ",de||" ",je].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const tt=[R,ue,Pe].join(""),it=tt==="%%%"?100:tt===""?255:0;if(it){const mt=[xn(+P/it,0,1),xn(+ee/it,0,1),xn(+ge/it,0,1),Ne?$n(+Ne,et):1];if(Mn(mt))return mt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,T,P,R,X,ee,ue,de,ge]=v,Pe=[P||" ",X||" ",ue].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const je=[+T,xn(+R,0,100),xn(+ee,0,100),de?$n(+de,ge):1];if(Mn(je))return function([Ne,et,We,tt]){function it(mt){const jt=(mt+Ne/30)%12,Zt=et*Math.min(We,1-We);return We-Zt*Math.max(-1,Math.min(jt-3,9-jt,1))}return Ne=gt(Ne),et/=100,We/=100,[it(0),it(8),it(4),tt]}(je)}}}(n);return s?new an(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,p,v]=yt(n),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?gt(Math.atan2(p,h)*pt):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",yt(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${p})`}}an.black=new an(0,0,0,1),an.white=new an(1,1,1,1),an.transparent=new an(0,0,0,0),an.red=new an(1,0,0,1);class br{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Er{constructor(n,s,h,p,v){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class Yn{constructor(n){this.sections=n}static fromString(n){return new Yn([new Er(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Yn?n:Yn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ri{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ri)return n;if(typeof n=="number")return new ri([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ri(n)}}toString(){return JSON.stringify(this.values)}}const kn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ar{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ar)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],p=n[s+1];if(typeof h!="string"||!kn.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new ar(n)}}toString(){return JSON.stringify(this.values)}}class Mi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Mi({name:n,available:!1}):null}}function Qu(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qa(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof an||o instanceof br||o instanceof Yn||o instanceof ri||o instanceof ar||o instanceof Mi)return!0;if(Array.isArray(o)){for(const n of o)if(!Qa(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Qa(o[n]))return!1;return!0}return!1}function pr(o){if(o===null)return D;if(typeof o=="string")return Re;if(typeof o=="boolean")return Xe;if(typeof o=="number")return ce;if(o instanceof an)return st;if(o instanceof br)return yn;if(o instanceof Yn)return An;if(o instanceof ri)return _n;if(o instanceof ar)return pi;if(o instanceof Mi)return wr;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=pr(h);if(s){if(s===p)continue;s=kt;break}s=p}return fr(s||kt,n)}return en}function Ho(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof an||o instanceof Yn||o instanceof ri||o instanceof ar||o instanceof Mi?o.toString():JSON.stringify(o)}class Yr{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Qa(n[1]))return s.error("invalid value");const h=n[1];let p=pr(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new Yr(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class mr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const el={string:Re,number:ce,boolean:Xe,object:en};class Xr{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let T,P;if(n.length>2){const R=n[1];if(typeof R!="string"||!(R in el)||R==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);T=el[R],p++}else T=kt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=n[2],p++}h=fr(T,P)}else{if(!el[v])throw new Error(`Types doesn't contain name = ${v}`);h=el[v]}const x=[];for(;p<n.length;p++){const T=s.parse(n[p],p,kt);if(!T)return null;x.push(T)}return new Xr(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!mi(this.type,pr(h)))return h;if(s===this.args.length-1)throw new mr(`Expected value to be of type ${On(this.type)}, but found ${On(pr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const tl={"to-boolean":Xe,"to-color":st,"to-number":ce,"to-string":Re};class ho{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!tl[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=tl[h],v=[];for(let x=1;x<n.length;x++){const T=s.parse(n[x],x,kt);if(!T)return null;v.push(T)}return new ho(p,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof an)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Qu(s[0],s[1],s[2],s[3]),!h))return new an(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new mr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const p=ri.parse(s);if(p)return p}throw new mr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const p=ar.parse(s);if(p)return p}throw new mr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new mr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Yn.fromString(Ho(this.args[0].evaluate(n)));case"resolvedImage":return Mi.fromString(Ho(this.args[0].evaluate(n)));default:return Ho(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const gi=["Unknown","Point","LineString","Polygon"];class Nn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?gi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=an.parse(n)),s}}class nl{constructor(n,s,h=[],p,v=new z,x=[]){this.registry=n,this.path=h,this.key=h.map(T=>`[${T}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,v={}){return s?this.concat(s,h,p)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(p,v,x){return x==="assert"?new Xr(v,[p]):x==="coerce"?new ho(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const T=this.expectedType,P=x.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||P.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(T.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(T,P))return null}else x=h(x,T,s.typeAnnotation||"coerce");else x=h(x,T,s.typeAnnotation||"coerce");else x=h(x,T,s.typeAnnotation||"coerce");else x=h(x,T,s.typeAnnotation||"assert")}if(!(x instanceof Yr)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const T=new Nn;try{x=new Yr(x.type,x.evaluate(T))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new nl(this.registry,this._isConstant,p,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new ae(h,n))}checkSubtype(n,s){const h=mi(n,s);return h&&this.error(h),h}}class Vs{constructor(n,s,h){this.type=yn,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Xe);if(!p)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Xe);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Re),!x)?null:new Vs(p,v,x)}evaluate(n){return new br(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Xo=8192;function rl(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function qo(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Ph(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*Xo),Math.round(h*p*Xo)]}function ec(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-s[0],x=o[1]-s[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function ii(o,n){let s=!1;for(let x=0,T=n.length;x<T;x++){const P=n[x];for(let R=0,X=P.length;R<X-1;R++){if(ec(o,P[R],P[R+1]))return!1;(p=P[R])[1]>(h=o)[1]!=(v=P[R+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(s=!s)}}var h,p,v;return s}function Mh(o,n){for(let s=0;s<n.length;s++)if(ii(o,n[s]))return!0;return!1}function tc(o,n,s,h){const p=h[0]-s[0],v=h[1]-s[1],x=(o[0]-s[0])*v-p*(o[1]-s[1]),T=(n[0]-s[0])*v-p*(n[1]-s[1]);return x>0&&T<0||x<0&&T>0}function kh(o,n,s){for(const R of s)for(let X=0;X<R.length-1;++X)if((T=[(x=R[X+1])[0]-(v=R[X])[0],x[1]-v[1]])[0]*(P=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-T[1]*P[0]!=0&&tc(h,p,v,x)&&tc(v,x,h,p))return!0;var h,p,v,x,T,P;return!1}function nc(o,n){for(let s=0;s<o.length;++s)if(!ii(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(kh(o[s],o[s+1],n))return!1;return!0}function rc(o,n){for(let s=0;s<n.length;s++)if(nc(o,n[s]))return!0;return!1}function ma(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const T=Ph(o[p][x],s);rl(n,T),v.push(T)}h.push(v)}return h}function il(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=ma(o[p],n,s);h.push(v)}return h}function iu(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let v=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;v===0&&(v=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=v}rl(n,o)}function gs(o,n,s,h){const p=Math.pow(2,h.z)*Xo,v=[h.x*Xo,h.y*Xo],x=[];for(const T of o)for(const P of T){const R=[P.x+v[0],P.y+v[1]];iu(R,n,s,p),x.push(R)}return x}function ic(o,n,s,h){const p=Math.pow(2,h.z)*Xo,v=[h.x*Xo,h.y*Xo],x=[];for(const P of o){const R=[];for(const X of P){const ee=[X.x+v[0],X.y+v[1]];rl(n,ee),R.push(ee)}x.push(R)}if(n[2]-n[0]<=p/2){(T=n)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const P of x)for(const R of P)iu(R,n,s,p)}var T;return x}class ki{constructor(n,s){this.type=Xe,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Qa(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new ki(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new ki(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ki(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const T=ma(h.coordinates,v,x),P=gs(s.geometry(),p,v,x);if(!qo(p,v))return!1;for(const R of P)if(!ii(R,T))return!1}if(h.type==="MultiPolygon"){const T=il(h.coordinates,v,x),P=gs(s.geometry(),p,v,x);if(!qo(p,v))return!1;for(const R of P)if(!Mh(R,T))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const T=ma(h.coordinates,v,x),P=ic(s.geometry(),p,v,x);if(!qo(p,v))return!1;for(const R of P)if(!nc(R,T))return!1}if(h.type==="MultiPolygon"){const T=il(h.coordinates,v,x),P=ic(s.geometry(),p,v,x);if(!qo(p,v))return!1;for(const R of P)if(!rc(R,T))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class ol{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new ol(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class yi{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],p=yi.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,T=x.filter(([R])=>!Array.isArray(R)||R.length===n.length-1);let P=null;for(const[R,X]of T){P=new nl(s.registry,ga,s.path,null,s.scope);const ee=[];let ue=!1;for(let de=1;de<n.length;de++){const ge=n[de],Pe=Array.isArray(R)?R[de-1]:R.type,je=P.parse(ge,1+ee.length,Pe);if(!je){ue=!0;break}ee.push(je)}if(!ue)if(Array.isArray(R)&&R.length!==ee.length)P.error(`Expected ${R.length} arguments, but found ${ee.length} instead.`);else{for(let de=0;de<ee.length;de++){const ge=Array.isArray(R)?R[de]:R.type,Pe=ee[de];P.concat(de+1).checkSubtype(ge,Pe.type)}if(P.errors.length===0)return new yi(h,v,X,ee)}}if(T.length===1)s.errors.push(...P.errors);else{const R=(T.length?T:x).map(([ee])=>{return ue=ee,Array.isArray(ue)?`(${ue.map(On).join(", ")})`:`(${On(ue.type)}...)`;var ue}).join(" | "),X=[];for(let ee=1;ee<n.length;ee++){const ue=s.parse(n[ee],1+X.length);if(!ue)return null;X.push(On(ue.type))}s.error(`Expected arguments of type ${R}, but found (${X.join(", ")}) instead.`)}return null}static register(n,s){yi.definitions=s;for(const h in s)n[h]=yi}}function ga(o){if(o instanceof ol)return ga(o.boundExpression);if(o instanceof yi&&o.name==="error"||o instanceof Vs||o instanceof ki)return!1;const n=o instanceof ho||o instanceof Xr;let s=!0;return o.eachChild(h=>{s=n?s&&ga(h):s&&h instanceof Yr}),!!s&&sl(o)&&ya(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function sl(o){if(o instanceof yi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ki)return!1;let n=!0;return o.eachChild(s=>{n&&!sl(s)&&(n=!1)}),n}function Gs(o){if(o instanceof yi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!Gs(s)&&(n=!1)}),n}function ya(o,n){if(o instanceof yi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!ya(h,n)&&(s=!1)}),s}function va(o,n){const s=o.length-1;let h,p,v=0,x=s,T=0;for(;v<=x;)if(T=Math.floor((v+x)/2),h=o[T],p=o[T+1],h<=n){if(T===s||n<p)return T;v=T+1}else{if(!(h>n))throw new mr("Input is not a number.");x=T-1}return 0}class _a{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,ce);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const T=x===1?-1/0:n[x],P=n[x+1],R=x,X=x+1;if(typeof T!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(p.length&&p[p.length-1][0]>=T)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const ee=s.parse(P,X,v);if(!ee)return null;v=v||ee.type,p.push([T,ee])}return new _a(v,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(n):h[va(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function So(o,n,s){return o+s*(n-o)}function al(o,n,s){return o.map((h,p)=>So(h,n[p],s))}const vi={number:So,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[p,v,x,T]=al(o.rgb,n.rgb,s);return new an(p,v,x,T,!1)}case"hcl":{const[p,v,x,T]=o.hcl,[P,R,X,ee]=n.hcl;let ue,de;if(isNaN(p)||isNaN(P))isNaN(p)?isNaN(P)?ue=NaN:(ue=P,x!==1&&x!==0||(de=R)):(ue=p,X!==1&&X!==0||(de=v));else{let et=P-p;P>p&&et>180?et-=360:P<p&&p-P>180&&(et+=360),ue=p+s*et}const[ge,Pe,je,Ne]=function([et,We,tt,it]){return et=isNaN(et)?0:et*Qe,Nt([tt,Math.cos(et)*We,Math.sin(et)*We,it])}([ue,de??So(v,R,s),So(x,X,s),So(T,ee,s)]);return new an(ge,Pe,je,Ne,!1)}case"lab":{const[p,v,x,T]=Nt(al(o.lab,n.lab,s));return new an(p,v,x,T,!1)}}},array:al,padding:function(o,n,s){return new ri(al(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,p=n.values;if(h.length!==p.length)throw new mr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==p[x])throw new mr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${p[x]}`);v.push(h[x]);const[T,P]=h[x+1],[R,X]=p[x+1];v.push([So(T,R,s),So(P,X,s)])}return new ar(v)}};class _i{constructor(n,s,h,p,v){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,T]of v)this.labels.push(x),this.outputs.push(T)}static interpolationFactor(n,s,h,p){let v=0;if(n.name==="exponential")v=ou(s,n.base,h,p);else if(n.name==="linear")v=ou(s,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new Q(x[0],x[1],x[2],x[3]).solve(ou(s,1,h,p))}return v}static parse(n,s){let[h,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const R=p[1];if(typeof R!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:R}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const R=p.slice(1);if(R.length!==4||R.some(X=>typeof X!="number"||X<0||X>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:R}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,ce),!v)return null;const T=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=st:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let R=0;R<x.length;R+=2){const X=x[R],ee=x[R+1],ue=R+3,de=R+4;if(typeof X!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if(T.length&&T[T.length-1][0]>=X)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ue);const ge=s.parse(ee,de,P);if(!ge)return null;P=P||ge.type,T.push([X,ge])}return se(P,ce)||se(P,st)||se(P,_n)||se(P,pi)||se(P,fr(ce))?new _i(P,h,p,v,T):s.error(`Type ${On(P)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(n);const x=va(s,p),T=_i.interpolationFactor(this.interpolation,p,s[x],s[x+1]),P=h[x].evaluate(n),R=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return vi[this.type.kind](P,R,T);case"interpolate-hcl":return vi.color(P,R,T,"hcl");case"interpolate-lab":return vi.color(P,R,T,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ou(o,n,s,h){const p=h-s,v=o-s;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class xa{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const T of n.slice(1)){const P=s.parse(T,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,v.push(P)}if(!h)throw new Error("No output type");const x=p&&v.some(T=>mi(p,T.type));return new xa(x?kt:h,v)}evaluate(n){let s,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof Mi&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Zs{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const T=s.parse(n[v+1],v+1);if(!T)return null;h.push([x,T])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new Zs(h,p):null}outputDefined(){return this.result.outputDefined()}}class ys{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,ce),p=s.parse(n[2],2,fr(s.expectedType||kt));return h&&p?new ys(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new mr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new mr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new mr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class zn{constructor(n,s){this.type=Xe,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,kt),p=s.parse(n[2],2,kt);return h&&p?ke(h.type,[Xe,Re,ce,D,kt])?new zn(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${On(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!re(s,["boolean","string","number","null"]))throw new mr(`Expected first argument to be of type boolean, string, number or null, but found ${On(pr(s))} instead.`);if(!re(h,["string","array"]))throw new mr(`Expected second argument to be of type array or string, but found ${On(pr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class ll{constructor(n,s,h){this.type=ce,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,kt),p=s.parse(n[2],2,kt);if(!h||!p)return null;if(!ke(h.type,[Xe,Re,ce,D,kt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${On(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,ce);return v?new ll(h,p,v):null}return new ll(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!re(s,["boolean","string","number","null"]))throw new mr(`Expected first argument to be of type boolean, string, number or null, but found ${On(pr(s))} instead.`);if(!re(h,["string","array"]))throw new mr(`Expected second argument to be of type array or string, but found ${On(pr(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class ul{constructor(n,s,h,p,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},x=[];for(let R=2;R<n.length-1;R+=2){let X=n[R];const ee=n[R+1];Array.isArray(X)||(X=[X]);const ue=s.concat(R);if(X.length===0)return ue.error("Expected at least one branch label.");for(const ge of X){if(typeof ge!="number"&&typeof ge!="string")return ue.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return ue.error("Numeric branch labels must be integer values.");if(h){if(ue.checkSubtype(h,pr(ge)))return null}else h=pr(ge);if(v[String(ge)]!==void 0)return ue.error("Branch labels must be unique.");v[String(ge)]=x.length}const de=s.parse(ee,R,p);if(!de)return null;p=p||de.type,x.push(de)}const T=s.parse(n[1],1,kt);if(!T)return null;const P=s.parse(n[n.length-1],n.length-1,p);return P?T.type.kind!=="value"&&s.concat(1).checkSubtype(h,T.type)?null:new ul(h,p,T,v,x,P):null}evaluate(n){const s=this.input.evaluate(n);return(pr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class su{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const T=s.parse(n[x],x,Xe);if(!T)return null;const P=s.parse(n[x+1],x+1,h);if(!P)return null;p.push([T,P]),h=h||P.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new su(h,p,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class cl{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,kt),p=s.parse(n[2],2,ce);if(!h||!p)return null;if(!ke(h.type,[fr(kt),Re,kt]))return s.error(`Expected first argument to be of type array or string, but found ${On(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,ce);return v?new cl(h.type,h,p,v):null}return new cl(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!re(s,["string","array"]))throw new mr(`Expected first argument to be of type array or string, but found ${On(pr(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function oc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function sc(o,n,s,h){return h.compare(n,s)===0}function vs(o,n,s){const h=o!=="=="&&o!=="!=";return class KT{constructor(v,x,T){this.type=Xe,this.lhs=v,this.rhs=x,this.collator=T,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const T=v[0];let P=x.parse(v[1],1,kt);if(!P)return null;if(!oc(T,P.type))return x.concat(1).error(`"${T}" comparisons are not supported for type '${On(P.type)}'.`);let R=x.parse(v[2],2,kt);if(!R)return null;if(!oc(T,R.type))return x.concat(2).error(`"${T}" comparisons are not supported for type '${On(R.type)}'.`);if(P.type.kind!==R.type.kind&&P.type.kind!=="value"&&R.type.kind!=="value")return x.error(`Cannot compare types '${On(P.type)}' and '${On(R.type)}'.`);h&&(P.type.kind==="value"&&R.type.kind!=="value"?P=new Xr(R.type,[P]):P.type.kind!=="value"&&R.type.kind==="value"&&(R=new Xr(P.type,[R])));let X=null;if(v.length===4){if(P.type.kind!=="string"&&R.type.kind!=="string"&&P.type.kind!=="value"&&R.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(X=x.parse(v[3],3,yn),!X)return null}return new KT(P,R,X)}evaluate(v){const x=this.lhs.evaluate(v),T=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const P=pr(x),R=pr(T);if(P.kind!==R.kind||P.kind!=="string"&&P.kind!=="number")throw new mr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${R.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=pr(x),R=pr(T);if(P.kind!=="string"||R.kind!=="string")return n(v,x,T)}return this.collator?s(v,x,T,this.collator.evaluate(v)):n(v,x,T)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Lh=vs("==",function(o,n,s){return n===s},sc),au=vs("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!sc(0,n,s,h)}),zh=vs("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Oh=vs(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Rh=vs("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Fh=vs(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class lu{constructor(n,s,h,p,v){this.type=Re,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,ce);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,Re),!v))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,Re),!x))return null;let T=null;if(p["min-fraction-digits"]&&(T=s.parse(p["min-fraction-digits"],1,ce),!T))return null;let P=null;return p["max-fraction-digits"]&&(P=s.parse(p["max-fraction-digits"],1,ce),!P)?null:new lu(h,v,x,T,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class hl{constructor(n){this.type=An,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const T=n[x];if(v&&typeof T=="object"&&!Array.isArray(T)){v=!1;let P=null;if(T["font-scale"]&&(P=s.parse(T["font-scale"],1,ce),!P))return null;let R=null;if(T["text-font"]&&(R=s.parse(T["text-font"],1,fr(Re)),!R))return null;let X=null;if(T["text-color"]&&(X=s.parse(T["text-color"],1,st),!X))return null;const ee=p[p.length-1];ee.scale=P,ee.font=R,ee.textColor=X}else{const P=s.parse(n[x],1,kt);if(!P)return null;const R=P.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new hl(p)}evaluate(n){return new Yn(this.sections.map(s=>{const h=s.content.evaluate(n);return pr(h)===wr?new Er("",h,null,null,null):new Er(Ho(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class fl{constructor(n){this.type=wr,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Re);return h?new fl(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Mi.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class wa{constructor(n){this.type=ce,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${On(h.type)} instead.`):new wa(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new mr(`Expected value to be of type string or array, but found ${On(pr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Ws={"==":Lh,"!=":au,">":Oh,"<":zh,">=":Fh,"<=":Rh,array:Xr,at:ys,boolean:Xr,case:su,coalesce:xa,collator:Vs,format:hl,image:fl,in:zn,"index-of":ll,interpolate:_i,"interpolate-hcl":_i,"interpolate-lab":_i,length:wa,let:Zs,literal:Yr,match:ul,number:Xr,"number-format":lu,object:Xr,slice:cl,step:_a,string:Xr,"to-boolean":ho,"to-color":ho,"to-number":ho,"to-string":ho,var:ol,within:ki};function ac(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=Qu(n,s,h,v);if(x)throw new mr(x);return new an(n/255,s/255,h/255,v,!1)}function lc(o,n){return o in n}function uu(o,n){const s=n[o];return s===void 0?null:s}function Ko(o){return{type:o}}function uc(o){return{result:"success",value:o}}function Hs(o){return{result:"error",value:o}}function Xs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function cc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function qs(o){return!!o.expression&&o.expression.interpolated}function Rn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function To(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function hc(o){return o}function Hi(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(qs(n)?"exponential":"interval");if(s||n.type==="padding"){const X=s?an.parse:ri.parse;(o=ut({},o)).stops&&(o.stops=o.stops.map(ee=>[ee[0],X(ee[1])])),o.default=X(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let T,P,R;if(v==="exponential")T=fc;else if(v==="interval")T=Dh;else if(v==="categorical"){T=jh,P=Object.create(null);for(const X of o.stops)P[X[0]]=X[1];R=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);T=cu}if(h){const X={},ee=[];for(let ge=0;ge<o.stops.length;ge++){const Pe=o.stops[ge],je=Pe[0].zoom;X[je]===void 0&&(X[je]={zoom:je,type:o.type,property:o.property,default:o.default,stops:[]},ee.push(je)),X[je].stops.push([Pe[0].value,Pe[1]])}const ue=[];for(const ge of ee)ue.push([X[ge].zoom,Hi(X[ge],n)]);const de={name:"linear"};return{kind:"composite",interpolationType:de,interpolationFactor:_i.interpolationFactor.bind(void 0,de),zoomStops:ue.map(ge=>ge[0]),evaluate:({zoom:ge},Pe)=>fc({stops:ue,base:o.base},n,ge).evaluate(ge,Pe)}}if(p){const X=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:X,interpolationFactor:_i.interpolationFactor.bind(void 0,X),zoomStops:o.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>T(o,n,ee,P,R)}}return{kind:"source",evaluate(X,ee){const ue=ee&&ee.properties?ee.properties[o.property]:void 0;return ue===void 0?_s(o.default,n.default):T(o,n,ue,P,R)}}}function _s(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function jh(o,n,s,h,p){return _s(typeof s===p?h[s]:void 0,o.default,n.default)}function Dh(o,n,s){if(Rn(s)!=="number")return _s(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=va(o.stops.map(v=>v[0]),s);return o.stops[p][1]}function fc(o,n,s){const h=o.base!==void 0?o.base:1;if(Rn(s)!=="number")return _s(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=va(o.stops.map(X=>X[0]),s),x=function(X,ee,ue,de){const ge=de-ue,Pe=X-ue;return ge===0?0:ee===1?Pe/ge:(Math.pow(ee,Pe)-1)/(Math.pow(ee,ge)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),T=o.stops[v][1],P=o.stops[v+1][1],R=vi[n.type]||hc;return typeof T.evaluate=="function"?{evaluate(...X){const ee=T.evaluate.apply(void 0,X),ue=P.evaluate.apply(void 0,X);if(ee!==void 0&&ue!==void 0)return R(ee,ue,x,o.colorSpace)}}:R(T,P,x,o.colorSpace)}function cu(o,n,s){switch(n.type){case"color":s=an.parse(s);break;case"formatted":s=Yn.fromString(s.toString());break;case"resolvedImage":s=Mi.fromString(s.toString());break;case"padding":s=ri.parse(s);break;default:Rn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return _s(s,o.default,n.default)}yi.register(Ws,{error:[{kind:"error"},[Re],(o,[n])=>{throw new mr(n.evaluate(o))}],typeof:[Re,[kt],(o,[n])=>On(pr(n.evaluate(o)))],"to-rgba":[fr(ce,4),[st],(o,[n])=>{const[s,h,p,v]=n.evaluate(o).rgb;return[255*s,255*h,255*p,v]}],rgb:[st,[ce,ce,ce],ac],rgba:[st,[ce,ce,ce,ce],ac],has:{type:Xe,overloads:[[[Re],(o,[n])=>lc(n.evaluate(o),o.properties())],[[Re,en],(o,[n,s])=>lc(n.evaluate(o),s.evaluate(o))]]},get:{type:kt,overloads:[[[Re],(o,[n])=>uu(n.evaluate(o),o.properties())],[[Re,en],(o,[n,s])=>uu(n.evaluate(o),s.evaluate(o))]]},"feature-state":[kt,[Re],(o,[n])=>uu(n.evaluate(o),o.featureState||{})],properties:[en,[],o=>o.properties()],"geometry-type":[Re,[],o=>o.geometryType()],id:[kt,[],o=>o.id()],zoom:[ce,[],o=>o.globals.zoom],"heatmap-density":[ce,[],o=>o.globals.heatmapDensity||0],"line-progress":[ce,[],o=>o.globals.lineProgress||0],accumulated:[kt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[ce,Ko(ce),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[ce,Ko(ce),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:ce,overloads:[[[ce,ce],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[ce],(o,[n])=>-n.evaluate(o)]]},"/":[ce,[ce,ce],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[ce,[ce,ce],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[ce,[],()=>Math.LN2],pi:[ce,[],()=>Math.PI],e:[ce,[],()=>Math.E],"^":[ce,[ce,ce],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[ce,[ce],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[ce,[ce],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[ce,[ce],(o,[n])=>Math.log(n.evaluate(o))],log2:[ce,[ce],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[ce,[ce],(o,[n])=>Math.sin(n.evaluate(o))],cos:[ce,[ce],(o,[n])=>Math.cos(n.evaluate(o))],tan:[ce,[ce],(o,[n])=>Math.tan(n.evaluate(o))],asin:[ce,[ce],(o,[n])=>Math.asin(n.evaluate(o))],acos:[ce,[ce],(o,[n])=>Math.acos(n.evaluate(o))],atan:[ce,[ce],(o,[n])=>Math.atan(n.evaluate(o))],min:[ce,Ko(ce),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[ce,Ko(ce),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[ce,[ce],(o,[n])=>Math.abs(n.evaluate(o))],round:[ce,[ce],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[ce,[ce],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[ce,[ce],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[Xe,[Re,kt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[Xe,[kt],(o,[n])=>o.id()===n.value],"filter-type-==":[Xe,[Re],(o,[n])=>o.geometryType()===n.value],"filter-<":[Xe,[Re,kt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[Xe,[kt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[Xe,[Re,kt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[Xe,[kt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[Xe,[Re,kt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[Xe,[kt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[Xe,[Re,kt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[Xe,[kt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[Xe,[kt],(o,[n])=>n.value in o.properties()],"filter-has-id":[Xe,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Xe,[fr(Re)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[Xe,[fr(kt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[Xe,[Re,fr(kt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[Xe,[Re,fr(kt)],(o,[n,s])=>function(h,p,v,x){for(;v<=x;){const T=v+x>>1;if(p[T]===h)return!0;p[T]>h?x=T-1:v=T+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Xe,overloads:[[[Xe,Xe],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Ko(Xe),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Xe,overloads:[[[Xe,Xe],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Ko(Xe),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[Xe,[Xe],(o,[n])=>!n.evaluate(o)],"is-supported-script":[Xe,[Re],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Re,[Re],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Re,[Re],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Re,Ko(kt),(o,n)=>n.map(s=>Ho(s.evaluate(o))).join("")],"resolved-locale":[Re,[yn],(o,[n])=>n.evaluate(o).resolvedLocale()]});class nr{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Nn,this._defaultValue=s?(h=s).type==="color"&&To(h.default)?new an(0,0,0,0):h.type==="color"?an.parse(h.default)||null:h.type==="padding"?ri.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?ar.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new mr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function xs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ws}function wn(o,n){const s=new nl(Ws,ga,[],n?function(p){const v={color:st,string:Re,number:ce,enum:Re,boolean:Xe,formatted:An,padding:_n,resolvedImage:wr,variableAnchorOffsetCollection:pi};return p.type==="array"?fr(v[p.value]||kt,p.length):v[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?uc(new nr(h,n)):Hs(s.errors)}class ba{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Gs(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}}class Vn{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Gs(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}interpolationFactor(n,s,h){return this.interpolationType?_i.interpolationFactor(this.interpolationType,n,s,h):0}}function Hn(o,n){const s=wn(o,n);if(s.result==="error")return s;const h=s.value.expression,p=sl(h);if(!p&&!Xs(n))return Hs([new ae("","data expressions not supported")]);const v=ya(h,["zoom"]);if(!v&&!cc(n))return Hs([new ae("","zoom expressions not supported")]);const x=Ea(h);return x||v?x instanceof ae?Hs([x]):x instanceof _i&&!qs(n)?Hs([new ae("",'"interpolate" expressions cannot be used with this property')]):uc(x?new Vn(p?"camera":"composite",s.value,x.labels,x instanceof _i?x.interpolation:void 0):new ba(p?"constant":"source",s.value)):Hs([new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yo{constructor(n,s){this._parameters=n,this._specification=s,ut(this,Hi(this._parameters,this._specification))}static deserialize(n){return new Yo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Ea(o){let n=null;if(o instanceof Zs)n=Ea(o.result);else if(o instanceof xa){for(const s of o.args)if(n=Ea(s),n)break}else(o instanceof _a||o instanceof _i)&&o.input instanceof yi&&o.input.name==="zoom"&&(n=o);return n instanceof ae||o.eachChild(s=>{const h=Ea(s);h instanceof ae?n=h:!n&&h?n=new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new ae("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function hu(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!hu(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const dl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Co(o){if(o==null)return{filter:()=>!0,needGeometry:!1};hu(o)||(o=Jo(o));const n=wn(o,dl);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:pl(o)}}function Bh(o,n){return o<n?-1:o>n?1:0}function pl(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(pl(o[n]))return!0;return!1}function Jo(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?ml(o[1],o[2],"=="):n==="!="?Rr(ml(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?ml(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Jo))):n==="all"?["all"].concat(o.slice(1).map(Jo)):n==="none"?["all"].concat(o.slice(1).map(Jo).map(Rr)):n==="in"?Qo(o[1],o.slice(2)):n==="!in"?Rr(Qo(o[1],o.slice(2))):n==="has"?Ao(o[1]):n==="!has"?Rr(Ao(o[1])):n!=="within"||o;var s}function ml(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Qo(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Bh)]]:["filter-in-small",o,["literal",n]]}}function Ao(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Rr(o){return["!",o]}function Io(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${Io(v)},`;return`${p}]`}const s=Object.keys(o).sort();let h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${Io(o[s[p]])},`;return`${h}}`}function fu(o){let n="";for(const s of Ut)n+=`/${Io(o[s])}`;return n}function gl(o){const n=o.value;return n?[new Fe(o.key,n,"constants have been deprecated as of v8")]:[]}function gr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function fo(o){if(Array.isArray(o))return o.map(fo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=fo(o[s]);return n}return gr(o)}function Jr(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec,T=o.validateSpec;let P=[];const R=Rn(s);if(R!=="object")return[new Fe(n,s,`object expected, ${R} found`)];for(const X in s){const ee=X.split(".")[0],ue=h[ee]||h["*"];let de;if(p[ee])de=p[ee];else if(h[ee])de=T;else if(p["*"])de=p["*"];else{if(!h["*"]){P.push(new Fe(n,s[X],`unknown property "${X}"`));continue}de=T}P=P.concat(de({key:(n&&`${n}.`)+X,value:s[X],valueSpec:ue,style:v,styleSpec:x,object:s,objectKey:X,validateSpec:T},s))}for(const X in h)p[X]||h[X].required&&h[X].default===void 0&&s[X]===void 0&&P.push(new Fe(n,s,`missing required property "${X}"`));return P}function xi(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Rn(n)!=="array")return[new Fe(v,n,`array expected, ${Rn(n)} found`)];if(s.length&&n.length!==s.length)return[new Fe(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Fe(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let T={type:s.value,values:s.values};p.$version<7&&(T.function=s.function),Rn(s.value)==="object"&&(T=s.value);let P=[];for(let R=0;R<n.length;R++)P=P.concat(x({array:n,arrayIndex:R,value:n[R],valueSpec:T,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${v}[${R}]`}));return P}function Po(o){const n=o.key,s=o.value,h=o.valueSpec;let p=Rn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Fe(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new Fe(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Fe(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function yl(o){const n=o.valueSpec,s=gr(o.value.type);let h,p,v,x={};const T=s!=="categorical"&&o.value.property===void 0,P=!T,R=Rn(o.value.stops)==="array"&&Rn(o.value.stops[0])==="array"&&Rn(o.value.stops[0][0])==="object",X=Jr({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(de){if(s==="identity")return[new Fe(de.key,de.value,'identity function may not have a "stops" property')];let ge=[];const Pe=de.value;return ge=ge.concat(xi({key:de.key,value:Pe,valueSpec:de.valueSpec,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec,arrayElementValidator:ee})),Rn(Pe)==="array"&&Pe.length===0&&ge.push(new Fe(de.key,Pe,"array must have at least one stop")),ge},default:function(de){return de.validateSpec({key:de.key,value:de.value,valueSpec:n,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec})}}});return s==="identity"&&T&&X.push(new Fe(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||X.push(new Fe(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!qs(o.valueSpec)&&X.push(new Fe(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!Xs(o.valueSpec)?X.push(new Fe(o.key,o.value,"property functions not supported")):T&&!cc(o.valueSpec)&&X.push(new Fe(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!R||o.value.property!==void 0||X.push(new Fe(o.key,o.value,'"property" property is required')),X;function ee(de){let ge=[];const Pe=de.value,je=de.key;if(Rn(Pe)!=="array")return[new Fe(je,Pe,`array expected, ${Rn(Pe)} found`)];if(Pe.length!==2)return[new Fe(je,Pe,`array length 2 expected, length ${Pe.length} found`)];if(R){if(Rn(Pe[0])!=="object")return[new Fe(je,Pe,`object expected, ${Rn(Pe[0])} found`)];if(Pe[0].zoom===void 0)return[new Fe(je,Pe,"object stop key must have zoom")];if(Pe[0].value===void 0)return[new Fe(je,Pe,"object stop key must have value")];if(v&&v>gr(Pe[0].zoom))return[new Fe(je,Pe[0].zoom,"stop zoom values must appear in ascending order")];gr(Pe[0].zoom)!==v&&(v=gr(Pe[0].zoom),p=void 0,x={}),ge=ge.concat(Jr({key:`${je}[0]`,value:Pe[0],valueSpec:{zoom:{}},validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec,objectElementValidators:{zoom:Po,value:ue}}))}else ge=ge.concat(ue({key:`${je}[0]`,value:Pe[0],valueSpec:{},validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec},Pe));return xs(fo(Pe[1]))?ge.concat([new Fe(`${je}[1]`,Pe[1],"expressions are not allowed in function stops.")]):ge.concat(de.validateSpec({key:`${je}[1]`,value:Pe[1],valueSpec:n,validateSpec:de.validateSpec,style:de.style,styleSpec:de.styleSpec}))}function ue(de,ge){const Pe=Rn(de.value),je=gr(de.value),Ne=de.value!==null?de.value:ge;if(h){if(Pe!==h)return[new Fe(de.key,Ne,`${Pe} stop domain type must match previous stop domain type ${h}`)]}else h=Pe;if(Pe!=="number"&&Pe!=="string"&&Pe!=="boolean")return[new Fe(de.key,Ne,"stop domain value must be a number, string, or boolean")];if(Pe!=="number"&&s!=="categorical"){let et=`number expected, ${Pe} found`;return Xs(n)&&s===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(de.key,Ne,et)]}return s!=="categorical"||Pe!=="number"||isFinite(je)&&Math.floor(je)===je?s!=="categorical"&&Pe==="number"&&p!==void 0&&je<p?[new Fe(de.key,Ne,"stop domain values must appear in ascending order")]:(p=je,s==="categorical"&&je in x?[new Fe(de.key,Ne,"stop domain values must be unique")]:(x[je]=!0,[])):[new Fe(de.key,Ne,`integer expected, found ${je}`)]}}function Li(o){const n=(o.expressionContext==="property"?Hn:wn)(fo(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new Fe(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new Fe(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Gs(s))return[new Fe(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Gs(s))return[new Fe(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ya(s,["zoom","feature-state"]))return[new Fe(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!sl(s))return[new Fe(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function es(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(gr(s))===-1&&p.push(new Fe(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(gr(s))===-1&&p.push(new Fe(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Sa(o){return hu(fo(o.value))?Li(ut({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):du(o)}function du(o){const n=o.value,s=o.key;if(Rn(n)!=="array")return[new Fe(s,n,`array expected, ${Rn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new Fe(s,n,"filter array must have at least 1 element")];switch(v=v.concat(es({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),gr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&gr(n[1])==="$type"&&v.push(new Fe(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Fe(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Rn(n[1]),p!=="string"&&v.push(new Fe(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=Rn(n[x]),gr(n[1])==="$type"?v=v.concat(es({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new Fe(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(du({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Rn(n[1]),n.length!==2?v.push(new Fe(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new Fe(`${s}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=Rn(n[1]),n.length!==2?v.push(new Fe(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new Fe(`${s}[1]`,n[1],`object expected, ${p} found`))}return v}function Ta(o,n){const s=o.key,h=o.validateSpec,p=o.style,v=o.styleSpec,x=o.value,T=o.objectKey,P=v[`${n}_${o.layerType}`];if(!P)return[];const R=T.match(/^(.*)-transition$/);if(n==="paint"&&R&&P[R[1]]&&P[R[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:p,styleSpec:v});const X=o.valueSpec||P[T];if(!X)return[new Fe(s,x,`unknown property "${T}"`)];let ee;if(Rn(x)==="string"&&Xs(X)&&!X.tokens&&(ee=/^{([^}]+)}$/.exec(x)))return[new Fe(s,x,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const ue=[];return o.layerType==="symbol"&&(T==="text-field"&&p&&!p.glyphs&&ue.push(new Fe(s,x,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&To(fo(x))&&gr(x.type)==="identity"&&ue.push(new Fe(s,x,'"text-font" does not support identity functions'))),ue.concat(h({key:o.key,value:x,valueSpec:X,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:T}))}function Ks(o){return Ta(o,"paint")}function Xi(o){return Ta(o,"layout")}function Ca(o){let n=[];const s=o.value,h=o.key,p=o.style,v=o.styleSpec;s.type||s.ref||n.push(new Fe(h,s,'either "type" or "ref" is required'));let x=gr(s.type);const T=gr(s.ref);if(s.id){const P=gr(s.id);for(let R=0;R<o.arrayIndex;R++){const X=p.layers[R];gr(X.id)===P&&n.push(new Fe(h,s.id,`duplicate layer id "${s.id}", previously used at line ${X.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach(R=>{R in s&&n.push(new Fe(h,s[R],`"${R}" is prohibited for ref layers`))}),p.layers.forEach(R=>{gr(R.id)===T&&(P=R)}),P?P.ref?n.push(new Fe(h,s.ref,"ref cannot reference another ref layer")):x=gr(P.type):n.push(new Fe(h,s.ref,`ref layer "${T}" not found`))}else if(x!=="background")if(s.source){const P=p.sources&&p.sources[s.source],R=P&&gr(P.type);P?R==="vector"&&x==="raster"?n.push(new Fe(h,s.source,`layer "${s.id}" requires a raster source`)):R==="raster"&&x!=="raster"?n.push(new Fe(h,s.source,`layer "${s.id}" requires a vector source`)):R!=="vector"||s["source-layer"]?R==="raster-dem"&&x!=="hillshade"?n.push(new Fe(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||R==="geojson"&&P.lineMetrics||n.push(new Fe(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Fe(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Fe(h,s.source,`source "${s.source}" not found`))}else n.push(new Fe(h,s,'missing required property "source"'));return n=n.concat(Jr({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Sa,layout:P=>Jr({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":R=>Xi(ut({layerType:x},R))}}),paint:P=>Jr({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":R=>Ks(ut({layerType:x},R))}})}})),n}function ts(o){const n=o.value,s=o.key,h=Rn(n);return h!=="string"?[new Fe(s,n,`string expected, ${h} found`)]:[]}const pu={promoteId:function({key:o,value:n}){if(Rn(n)==="string")return ts({key:o,value:n});{const s=[];for(const h in n)s.push(...ts({key:`${o}.${h}`,value:n[h]}));return s}}};function ws(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style,v=o.validateSpec;if(!n.type)return[new Fe(s,n,'"type" is required')];const x=gr(n.type);let T;switch(x){case"vector":case"raster":case"raster-dem":return T=Jr({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:pu,validateSpec:v}),T;case"geojson":if(T=Jr({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:pu}),n.cluster)for(const P in n.clusterProperties){const[R,X]=n.clusterProperties[P],ee=typeof R=="string"?[R,["accumulated"],["get",P]]:R;T.push(...Li({key:`${s}.${P}.map`,value:X,validateSpec:v,expressionContext:"cluster-map"})),T.push(...Li({key:`${s}.${P}.reduce`,value:ee,validateSpec:v,expressionContext:"cluster-reduce"}))}return T;case"video":return Jr({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return Jr({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new Fe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return es({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:h})}}function mu(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let v=[];const x=Rn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Fe("light",n,`object expected, ${x} found`)]),v;for(const T in n){const P=T.match(/^(.*)-transition$/);v=v.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:T,value:n[T],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):h[T]?o.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new Fe(T,n[T],`unknown property "${T}"`)])}return v}function gu(o){const n=o.value,s=o.styleSpec,h=s.terrain,p=o.style;let v=[];const x=Rn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Fe("terrain",n,`object expected, ${x} found`)]),v;for(const T in n)v=v.concat(h[T]?o.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new Fe(T,n[T],`unknown property "${T}"`)]);return v}function yu(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const p=[],v=[];for(const x in s)s[x].id&&p.includes(s[x].id)&&n.push(new Fe(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new Fe(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(Jr({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return ts({key:h,value:s})}const $={"*":()=>[],array:xi,boolean:function(o){const n=o.value,s=o.key,h=Rn(n);return h!=="boolean"?[new Fe(s,n,`boolean expected, ${h} found`)]:[]},number:Po,color:function(o){const n=o.key,s=o.value,h=Rn(s);return h!=="string"?[new Fe(n,s,`color expected, ${h} found`)]:an.parse(String(s))?[]:[new Fe(n,s,`color expected, "${s}" found`)]},constants:gl,enum:es,filter:Sa,function:yl,layer:Ca,object:Jr,source:ws,light:mu,terrain:gu,string:ts,formatted:function(o){return ts(o).length===0?[]:Li(o)},resolvedImage:function(o){return ts(o).length===0?[]:Li(o)},padding:function(o){const n=o.key,s=o.value;if(Rn(s)==="array"){if(s.length<1||s.length>4)return[new Fe(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return p}return Po({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=Rn(s),p=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Fe(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(es({key:`${n}[${x}]`,value:s[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(xi({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:yu};function ve(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=ve,s.expression&&To(gr(n))?yl(o):s.expression&&xs(fo(n))?Li(o):s.type&&$[s.type]?$[s.type](o):Jr(ut({},o,{valueSpec:s.type?h[s.type]:s}))}function Be(o){const n=o.value,s=o.key,h=ts(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Fe(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Fe(s,n,'"glyphs" url must include a "{range}" token'))),h}function ot(o,n=Je){let s=[];return s=s.concat(ve({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:ve,objectElementValidators:{glyphs:Be,"*":()=>[]}})),o.constants&&(s=s.concat(gl({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:ve}))),Tt(s)}function St(o){return function(n){return o({...n,validateSpec:ve})}}function Tt(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function Dt(o){return function(...n){return Tt(o.apply(this,n))}}ot.source=Dt(St(ws)),ot.sprite=Dt(St(yu)),ot.glyphs=Dt(St(Be)),ot.light=Dt(St(mu)),ot.terrain=Dt(St(gu)),ot.layer=Dt(St(Ca)),ot.filter=Dt(St(Sa)),ot.paintProperty=Dt(St(Ks)),ot.layoutProperty=Dt(St(Xi));const Wt=ot,vn=Wt.light,Fn=Wt.paintProperty,Un=Wt.layoutProperty;function Kn(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new ht(new Error(h.message))),s=!0;return s}class Jn{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const R=x[3+P],X=x[3+P+1];p.push(R===X?null:x.subarray(R,X))}const T=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],T),this.bboxes=x.subarray(T),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,p,v){this._forEachCell(s,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,v,x){this.cells[v].push(x)}query(n,s,h,p,v){const x=this.min,T=this.max;if(n<=x&&s<=x&&T<=h&&T<=p&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,s,h,p,this._queryCell,P,{},v),P}}_queryCell(n,s,h,p,v,x,T,P){const R=this.cells[v];if(R!==null){const X=this.keys,ee=this.bboxes;for(let ue=0;ue<R.length;ue++){const de=R[ue];if(T[de]===void 0){const ge=4*de;(P?P(ee[ge+0],ee[ge+1],ee[ge+2],ee[ge+3]):n<=ee[ge+2]&&s<=ee[ge+3]&&h>=ee[ge+0]&&p>=ee[ge+1])?(T[de]=!0,x.push(X[de])):T[de]=!1}}}}_forEachCell(n,s,h,p,v,x,T,P){const R=this._convertToCellCoord(n),X=this._convertToCellCoord(s),ee=this._convertToCellCoord(h),ue=this._convertToCellCoord(p);for(let de=R;de<=ee;de++)for(let ge=X;ge<=ue;ge++){const Pe=this.d*ge+de;if((!P||P(this._convertFromCellCoord(de),this._convertFromCellCoord(ge),this._convertFromCellCoord(de+1),this._convertFromCellCoord(ge+1)))&&v.call(this,n,s,h,p,Pe,x,T,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const T=n[x];p[3+x]=v,p.set(T,v),v+=T.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Jn(n.buffer)}}const Qn={};function At(o,n,s={}){if(Qn[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Qn[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}At("Object",Object),At("TransferableGridIndex",Jn),At("Color",an),At("Error",Error),At("AJAXError",we),At("ResolvedImage",Mi),At("StylePropertyFunction",Yo),At("StyleExpression",nr,{omit:["_evaluator"]}),At("ZoomDependentExpression",Vn),At("ZoomConstantExpression",ba),At("CompoundExpression",yi,{omit:["_evaluate"]});for(const o in Ws)Ws[o]._classRegistryKey||At(`Expression_${o}`,Ws[o]);function wi(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function bi(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(wi(o)||te(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(bi(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Qn[h])throw new Error(`${h} is not registered.`);const p=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Qn[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=Qn[h].shallow.indexOf(v)>=0?x:bi(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function Ei(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||wi(o)||te(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Ei);if(typeof o=="object"){const n=o.$name||"Object";if(!Qn[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Qn[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=Qn[n].shallow.indexOf(p)>=0?v:Ei(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class vl{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const zt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function bs(o){for(const n of o)if(vu(n.charCodeAt(0)))return!0;return!1}function Dd(o){for(const n of o)if(!Ug(n.charCodeAt(0)))return!1;return!0}function Ug(o){return!(zt.Arabic(o)||zt["Arabic Supplement"](o)||zt["Arabic Extended-A"](o)||zt["Arabic Presentation Forms-A"](o)||zt["Arabic Presentation Forms-B"](o))}function vu(o){return!(o!==746&&o!==747&&(o<4352||!(zt["Bopomofo Extended"](o)||zt.Bopomofo(o)||zt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||zt["CJK Compatibility Ideographs"](o)||zt["CJK Compatibility"](o)||zt["CJK Radicals Supplement"](o)||zt["CJK Strokes"](o)||!(!zt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||zt["CJK Unified Ideographs Extension A"](o)||zt["CJK Unified Ideographs"](o)||zt["Enclosed CJK Letters and Months"](o)||zt["Hangul Compatibility Jamo"](o)||zt["Hangul Jamo Extended-A"](o)||zt["Hangul Jamo Extended-B"](o)||zt["Hangul Jamo"](o)||zt["Hangul Syllables"](o)||zt.Hiragana(o)||zt["Ideographic Description Characters"](o)||zt.Kanbun(o)||zt["Kangxi Radicals"](o)||zt["Katakana Phonetic Extensions"](o)||zt.Katakana(o)&&o!==12540||!(!zt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!zt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||zt["Unified Canadian Aboriginal Syllabics"](o)||zt["Unified Canadian Aboriginal Syllabics Extended"](o)||zt["Vertical Forms"](o)||zt["Yijing Hexagram Symbols"](o)||zt["Yi Syllables"](o)||zt["Yi Radicals"](o))))}function _u(o){return!(vu(o)||function(n){return!!(zt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||zt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||zt["Letterlike Symbols"](n)||zt["Number Forms"](n)||zt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||zt["Control Pictures"](n)&&n!==9251||zt["Optical Character Recognition"](n)||zt["Enclosed Alphanumerics"](n)||zt["Geometric Shapes"](n)||zt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||zt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||zt["CJK Symbols and Punctuation"](n)||zt.Katakana(n)||zt["Private Use Area"](n)||zt["CJK Compatibility Forms"](n)||zt["Small Form Variants"](n)||zt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Nh(o){return o>=1424&&o<=2303||zt["Arabic Presentation Forms-A"](o)||zt["Arabic Presentation Forms-B"](o)}function $g(o,n){return!(!n&&Nh(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||zt.Khmer(o))}function Bd(o){for(const n of o)if(Nh(n.charCodeAt(0)))return!0;return!1}const Uh="deferred",xu="loading",$h="loaded";let Vh=null,zi="unavailable",Ys=null;const Gh=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(zi="error"),Vh&&Vh(o)};function Zh(){Wh.fire(new Pt("pluginStateChange",{pluginStatus:zi,pluginURL:Ys}))}const Wh=new Et,Hh=function(){return zi},Nd=function(){if(zi!==Uh||!Ys)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zi=xu,Zh(),Ys&&Ge({url:Ys},o=>{o?Gh(o):(zi=$h,Zh())})},po={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>zi===$h||po.applyArabicShaping!=null,isLoading:()=>zi===xu,setState(o){if(!ye())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");zi=o.pluginStatus,Ys=o.pluginURL},isParsed(){if(!ye())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return po.applyArabicShaping!=null&&po.processBidirectionalText!=null&&po.processStyledBidirectionalText!=null},getPluginURL(){if(!ye())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ys}};class rr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new vl,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!$g(p.charCodeAt(0),h))return!1;return!0}(n,po.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class dc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(To(h))return new Yo(h,p);if(xs(h)){const v=Hn(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return p.type==="color"&&typeof h=="string"?v=an.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=ar.parse(h)):v=ri.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class _l{constructor(n){this.property=n,this.value=new dc(n,void 0)}transitioned(n,s){return new pc(this.property,this.value,s,U({},n.transition,this.transition),n.now)}untransitioned(){return new pc(this.property,this.value,null,{},0)}}class Ud{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return S(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new _l(this._values[n].property)),this._values[n].value=new dc(this._values[n].property,s===null?void 0:S(s))}getTransition(n){return S(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new _l(this._values[n].property)),this._values[n].transition=S(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new $d(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new $d(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class pc{constructor(n,s,h,p,v){this.property=n,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,s,h);{const T=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const R=P*P,X=R*P;return 4*(P<.5?X:3*(P-R)+X-.75)}(T))}}return v}}class $d{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new wu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Vg{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return S(this._values[n].value)}setValue(n,s){this._values[n]=new dc(this._values[n].property,s===null?void 0:S(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new wu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}}class Mo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class wu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Kt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const p=vi[this.specification.type];return p?p(n,s,h):n}}class ln{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new Mo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Mo(this,{kind:"constant",value:void 0},n.parameters);const p=vi[this.specification.type];if(p){const v=p(n.value.value,s.value.value,h);return new Mo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,p,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,p,v,x)}}class mc extends ln{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new Mo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,T=this._calculate(x,x,x,s);return new Mo(this,{kind:"constant",value:T},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Mo(this,{kind:"constant",value:v},s)}return new Mo(this,n.expression,s)}evaluate(n,s,h,p,v,x){if(n.kind==="source"){const T=n.evaluate(s,h,p,v,x);return this._calculate(T,T,T,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Xh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new rr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new rr(Math.floor(s.zoom),s)),n.expression.evaluate(new rr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class qh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class Oi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new dc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new _l(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}At("DataDrivenProperty",ln),At("DataConstantProperty",Kt),At("CrossFadedDataDrivenProperty",mc),At("CrossFadedProperty",Xh),At("ColorRampProperty",qh);const Aa="-transition";class ns extends Et{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Vg(s.layout)),s.paint)){this._transitionablePaint=new Ud(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Un,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Aa)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Fn,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Aa))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),T=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,T,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),N(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,v={}){return(!v||v.validate!==!1)&&Kn(this,n.call(Wt,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:Je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Mo&&Xs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Gg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class bu{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class lr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ar(o,n=1){let s=0,h=0;return{members:o.map(p=>{const v=Gg[p.type].BYTES_PER_ELEMENT,x=s=Vd(s,Math.max(n,v)),T=p.components||1;return h=Math.max(h,v),s+=v*T,{name:p.name,type:p.type,components:T,offset:x}}),size:Vd(s,Math.max(h,n)),alignment:n}}function Vd(o,n){return Math.ceil(o/n)*n}class mo extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}mo.prototype.bytesPerElement=4,At("StructArrayLayout2i4",mo);class Eu extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,n}}Eu.prototype.bytesPerElement=6,At("StructArrayLayout3i6",Eu);class Su extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,n}}Su.prototype.bytesPerElement=8,At("StructArrayLayout4i8",Su);class gc extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,T){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=T,n}}gc.prototype.bytesPerElement=12,At("StructArrayLayout2i4i12",gc);class Tu extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,T){const P=4*n,R=8*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[R+4]=p,this.uint8[R+5]=v,this.uint8[R+6]=x,this.uint8[R+7]=T,n}}Tu.prototype.bytesPerElement=8,At("StructArrayLayout2i4ub8",Tu);class Cu extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}Cu.prototype.bytesPerElement=8,At("StructArrayLayout2f8",Cu);class xl extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,T,P,R,X){const ee=this.length;return this.resize(ee+1),this.emplace(ee,n,s,h,p,v,x,T,P,R,X)}emplace(n,s,h,p,v,x,T,P,R,X,ee){const ue=10*n;return this.uint16[ue+0]=s,this.uint16[ue+1]=h,this.uint16[ue+2]=p,this.uint16[ue+3]=v,this.uint16[ue+4]=x,this.uint16[ue+5]=T,this.uint16[ue+6]=P,this.uint16[ue+7]=R,this.uint16[ue+8]=X,this.uint16[ue+9]=ee,n}}xl.prototype.bytesPerElement=20,At("StructArrayLayout10ui20",xl);class Ia extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,T,P,R,X,ee,ue){const de=this.length;return this.resize(de+1),this.emplace(de,n,s,h,p,v,x,T,P,R,X,ee,ue)}emplace(n,s,h,p,v,x,T,P,R,X,ee,ue,de){const ge=12*n;return this.int16[ge+0]=s,this.int16[ge+1]=h,this.int16[ge+2]=p,this.int16[ge+3]=v,this.uint16[ge+4]=x,this.uint16[ge+5]=T,this.uint16[ge+6]=P,this.uint16[ge+7]=R,this.int16[ge+8]=X,this.int16[ge+9]=ee,this.int16[ge+10]=ue,this.int16[ge+11]=de,n}}Ia.prototype.bytesPerElement=24,At("StructArrayLayout4i4ui4i24",Ia);class Kh extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}Kh.prototype.bytesPerElement=12,At("StructArrayLayout3f12",Kh);class yc extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}yc.prototype.bytesPerElement=4,At("StructArrayLayout1ul4",yc);class Pa extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,T,P,R){const X=this.length;return this.resize(X+1),this.emplace(X,n,s,h,p,v,x,T,P,R)}emplace(n,s,h,p,v,x,T,P,R,X){const ee=10*n,ue=5*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=p,this.int16[ee+3]=v,this.int16[ee+4]=x,this.int16[ee+5]=T,this.uint32[ue+3]=P,this.uint16[ee+8]=R,this.uint16[ee+9]=X,n}}Pa.prototype.bytesPerElement=20,At("StructArrayLayout6i1ul2ui20",Pa);class Yh extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,T){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=T,n}}Yh.prototype.bytesPerElement=12,At("StructArrayLayout2i2i2i12",Yh);class Jh extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,p,v)}emplace(n,s,h,p,v,x){const T=4*n,P=8*n;return this.float32[T+0]=s,this.float32[T+1]=h,this.float32[T+2]=p,this.int16[P+6]=v,this.int16[P+7]=x,n}}Jh.prototype.bytesPerElement=16,At("StructArrayLayout2f1f2i16",Jh);class vc extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=12*n,T=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[T+1]=p,this.float32[T+2]=v,n}}vc.prototype.bytesPerElement=12,At("StructArrayLayout2ub2f12",vc);class _c extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}_c.prototype.bytesPerElement=6,At("StructArrayLayout3ui6",_c);class Qh extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,T,P,R,X,ee,ue,de,ge,Pe,je,Ne){const et=this.length;return this.resize(et+1),this.emplace(et,n,s,h,p,v,x,T,P,R,X,ee,ue,de,ge,Pe,je,Ne)}emplace(n,s,h,p,v,x,T,P,R,X,ee,ue,de,ge,Pe,je,Ne,et){const We=24*n,tt=12*n,it=48*n;return this.int16[We+0]=s,this.int16[We+1]=h,this.uint16[We+2]=p,this.uint16[We+3]=v,this.uint32[tt+2]=x,this.uint32[tt+3]=T,this.uint32[tt+4]=P,this.uint16[We+10]=R,this.uint16[We+11]=X,this.uint16[We+12]=ee,this.float32[tt+7]=ue,this.float32[tt+8]=de,this.uint8[it+36]=ge,this.uint8[it+37]=Pe,this.uint8[it+38]=je,this.uint32[tt+10]=Ne,this.int16[We+22]=et,n}}Qh.prototype.bytesPerElement=48,At("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Qh);class Dn extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,T,P,R,X,ee,ue,de,ge,Pe,je,Ne,et,We,tt,it,mt,jt,Zt,Ft,Rt,It,Bt){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,n,s,h,p,v,x,T,P,R,X,ee,ue,de,ge,Pe,je,Ne,et,We,tt,it,mt,jt,Zt,Ft,Rt,It,Bt)}emplace(n,s,h,p,v,x,T,P,R,X,ee,ue,de,ge,Pe,je,Ne,et,We,tt,it,mt,jt,Zt,Ft,Rt,It,Bt,Lt){const bt=32*n,on=16*n;return this.int16[bt+0]=s,this.int16[bt+1]=h,this.int16[bt+2]=p,this.int16[bt+3]=v,this.int16[bt+4]=x,this.int16[bt+5]=T,this.int16[bt+6]=P,this.int16[bt+7]=R,this.uint16[bt+8]=X,this.uint16[bt+9]=ee,this.uint16[bt+10]=ue,this.uint16[bt+11]=de,this.uint16[bt+12]=ge,this.uint16[bt+13]=Pe,this.uint16[bt+14]=je,this.uint16[bt+15]=Ne,this.uint16[bt+16]=et,this.uint16[bt+17]=We,this.uint16[bt+18]=tt,this.uint16[bt+19]=it,this.uint16[bt+20]=mt,this.uint16[bt+21]=jt,this.uint16[bt+22]=Zt,this.uint32[on+12]=Ft,this.float32[on+13]=Rt,this.float32[on+14]=It,this.uint16[bt+30]=Bt,this.uint16[bt+31]=Lt,n}}Dn.prototype.bytesPerElement=64,At("StructArrayLayout8i15ui1ul2f2ui64",Dn);class g extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}g.prototype.bytesPerElement=4,At("StructArrayLayout1f4",g);class r extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}r.prototype.bytesPerElement=12,At("StructArrayLayout1ui2f12",r);class u extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}u.prototype.bytesPerElement=8,At("StructArrayLayout1ul2ui8",u);class f extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}f.prototype.bytesPerElement=4,At("StructArrayLayout2ui4",f);class m extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}m.prototype.bytesPerElement=2,At("StructArrayLayout1ui2",m);class _ extends lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,n}}_.prototype.bytesPerElement=16,At("StructArrayLayout4f16",_);class C extends bu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}C.prototype.size=20;class I extends Pa{get(n){return new C(this,n)}}At("CollisionBoxArray",I);class k extends bu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}k.prototype.size=48;class B extends Qh{get(n){return new k(this,n)}}At("PlacedSymbolArray",B);class H extends bu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}H.prototype.size=64;class Y extends Dn{get(n){return new H(this,n)}}At("SymbolInstanceArray",Y);class he extends g{getoffsetX(n){return this.float32[1*n+0]}}At("GlyphOffsetArray",he);class Ie extends Eu{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}At("SymbolLineVertexArray",Ie);class Ae extends bu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ae.prototype.size=12;class Oe extends r{get(n){return new Ae(this,n)}}At("TextAnchorOffsetArray",Oe);class Ce extends bu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ce.prototype.size=8;class Ke extends u{get(n){return new Ce(this,n)}}At("FeatureIndexArray",Ke);class nt extends mo{}class De extends mo{}class Ye extends mo{}class at extends gc{}class lt extends Tu{}class ft extends Cu{}class wt extends xl{}class xt extends Ia{}class Ct extends Kh{}class Gt extends yc{}class Sn extends Yh{}class Ot extends vc{}class nn extends _c{}class $t extends f{}const ir=Ar([{name:"a_pos",components:2,type:"Int16"}],4),{members:Tn}=ir;class rn{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let v=this.segments[this.segments.length-1];return n>rn.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${rn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>rn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new rn([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Cn(o,n){return 256*(o=G(Math.floor(o),0,255))+G(Math.floor(n),0,255)}rn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,At("SegmentVector",rn);const ur=Ar([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Zn={exports:{}},qi={exports:{}};qi.exports=function(o,n){var s,h,p,v,x,T,P,R;for(h=o.length-(s=3&o.length),p=n,x=3432918353,T=461845907,R=0;R<h;)P=255&o.charCodeAt(R)|(255&o.charCodeAt(++R))<<8|(255&o.charCodeAt(++R))<<16|(255&o.charCodeAt(++R))<<24,++R,p=27492+(65535&(v=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*T+(((P>>>16)*T&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt(R+2))<<16;case 2:P^=(255&o.charCodeAt(R+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(R)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*T+(((P>>>16)*T&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Qr=qi.exports,Sr={exports:{}};Sr.exports=function(o,n){for(var s,h=o.length,p=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var Ri=Qr,rs=Sr.exports;Zn.exports=Ri,Zn.exports.murmur3=Ri,Zn.exports.murmur2=rs;var ko=b(Zn.exports);class is{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(wl(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=wl(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=s?p=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Js(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new is;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function wl(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ko(String(o))}function Js(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;Es(o,v,x),Es(n,3*v,3*x),Es(n,3*v+1,3*x+1),Es(n,3*v+2,3*x+2)}x-s<h-x?(Js(o,n,s,x),s=x+1):(Js(o,n,x+1,h),h=x)}}function Es(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}At("FeaturePositionMap",is);class Ir{constructor(n,s){this.gl=n.gl,this.location=s}}class $r extends Ir{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class oi extends Ir{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class bl extends Ir{constructor(n,s){super(n,s),this.current=an.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Vr=new Float32Array(16);function Fr(o){return[Cn(255*o.r,255*o.g),Cn(255*o.b,255*o.a)]}class si{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new bl(n,s):new $r(n,s)}}class cr{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new oi(n,s):new $r(n,s)}}class Ss{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,v){const x=this.paintVertexArray.length,T=this.expression.evaluate(new rr(0),s,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,T)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const p=Fr(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Lo{constructor(n,s,h,p,v,x){this.expression=n,this.uniformNames=s.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,p,v){const x=this.expression.evaluate(new rr(this.zoom),s,{},p,[],v),T=this.expression.evaluate(new rr(this.zoom+1),s,{},p,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,T)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,p){if(this.type==="color"){const v=Fr(h),x=Fr(p);for(let T=n;T<s;T++)this.paintVertexArray.emplace(T,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=G(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new $r(n,s)}}class Qs{constructor(n,s,h,p,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:v,mid:x,max:T}=h,P=p[v],R=p[x],X=p[T];if(P&&R&&X)for(let ee=n;ee<s;ee++)this.zoomInPaintVertexArray.emplace(ee,R.tl[0],R.tl[1],R.br[0],R.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],R.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,R.tl[0],R.tl[1],R.br[0],R.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],R.pixelRatio,X.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ur.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ur.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gd{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Mo&&Xs(x.property.specification)))continue;const T=Zg(v,n.type),P=x.value,R=x.property.specification.type,X=x.property.useIntegerZoom,ee=x.property.specification["property-type"],ue=ee==="cross-faded"||ee==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=ue?new cr(P.value,T):new si(P.value,T,R),p.push(`/u_${v}`);else if(P.kind==="source"||ue){const de=ka(v,R,"source");this.binders[v]=ue?new Qs(P,R,X,s,de,n.id):new Ss(P,T,R,de),p.push(`/a_${v}`)}else{const de=ka(v,R,"composite");this.binders[v]=new Lo(P,T,R,X,s,de),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Ss||s instanceof Lo?s.maxValue:0}populatePaintArrays(n,s,h,p,v){for(const x in this.binders){const T=this.binders[x];(T instanceof Ss||T instanceof Lo||T instanceof Qs)&&T.populatePaintArray(n,s,h,p,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof cr&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,v){let x=!1;for(const T in n){const P=s.getPositions(T);for(const R of P){const X=h.feature(R.index);for(const ee in this.binders){const ue=this.binders[ee];if((ue instanceof Ss||ue instanceof Lo||ue instanceof Qs)&&ue.expression.isStateDependent===!0){const de=p.paint.get(ee);ue.expression=de.value,ue.updatePaintArray(R.start,R.end,X,n[T],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof si||h instanceof cr)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ss||h instanceof Lo)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof Qs)for(let p=0;p<ur.members.length;p++)n.push(ur.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof si||h instanceof cr||h instanceof Lo)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof si||v instanceof cr||v instanceof Lo){for(const x of v.uniformNames)if(s[x]){const T=v.getBinding(n,s[x],x);h.push({name:x,property:p,binding:T})}}}return h}setUniforms(n,s,h,p){for(const{name:v,property:x,binding:T}of s)this.binders[x].setUniform(T,p,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Qs){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof Ss||h instanceof Lo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Ss||h instanceof Lo||h instanceof Qs)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Ss||s instanceof Lo||s instanceof Qs)&&s.destroy()}}}class Ma{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new Gd(p,s,h);this.needsUpload=!1,this._featureMap=new is,this._bufferOffset=0}populatePaintArrays(n,s,h,p,v,x){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(n,s,p,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Zg(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function ka(o,n,s){const h={color:{source:Cu,composite:_},number:{source:g,composite:Cu}},p=function(v){return{"line-pattern":{source:wt,composite:wt},"fill-pattern":{source:wt,composite:wt},"fill-extrusion-pattern":{source:wt,composite:wt}}[v]}(o);return p&&p[s]||h[n][s]}At("ConstantBinder",si),At("CrossFadedConstantBinder",cr),At("SourceExpressionBinder",Ss),At("CrossFadedCompositeBinder",Qs),At("CompositeExpressionBinder",Lo),At("ProgramConfiguration",Gd,{omit:["_buffers"]}),At("ProgramConfigurationSet",Ma);const yr=8192,xc=Math.pow(2,14)-1,ef=-xc-1;function Ts(o){const n=yr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let v=0;v<p.length;v++){const x=p[v],T=Math.round(x.x*n),P=Math.round(x.y*n);x.x=G(T,ef,xc),x.y=G(P,ef,xc),(T<x.x||T>x.x+1||P<x.y||P>x.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ea(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Ts(o):[]}}function El(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class Wg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new De,this.indexArray=new nn,this.segments=new rn,this.programConfigurations=new Ma(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],v=[];let x=null,T=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),T=!x.isConstant());for(const{feature:P,id:R,index:X,sourceLayerIndex:ee}of n){const ue=this.layers[0]._featureFilter.needGeometry,de=ea(P,ue);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),de,h))continue;const ge=T?x.evaluate(de,{},h):void 0,Pe={id:R,properties:P.properties,type:P.type,sourceLayerIndex:ee,index:X,geometry:ue?de.geometry:Ts(P),patterns:{},sortKey:ge};v.push(Pe)}T&&v.sort((P,R)=>P.sortKey-R.sortKey);for(const P of v){const{geometry:R,index:X,sourceLayerIndex:ee}=P,ue=n[X].feature;this.addFeature(P,R,X,h),s.featureIndex.insert(ue,R,X,ee,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Tn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const v of s)for(const x of v){const T=x.x,P=x.y;if(T<0||T>=yr||P<0||P>=yr)continue;const R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),X=R.vertexLength;El(this.layoutVertexArray,T,P,-1,-1),El(this.layoutVertexArray,T,P,1,-1),El(this.layoutVertexArray,T,P,1,1),El(this.layoutVertexArray,T,P,-1,1),this.indexArray.emplaceBack(X,X+1,X+2),this.indexArray.emplaceBack(X,X+3,X+2),R.vertexLength+=4,R.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function lx(o,n){for(let s=0;s<o.length;s++)if(wc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(wc(o,n[s]))return!0;return!!Hg(o,n)}function sI(o,n,s){return!!wc(o,n)||!!Xg(n,o,s)}function ux(o,n){if(o.length===1)return hx(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(wc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(hx(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Hg(o,n[s]))return!0;return!1}function aI(o,n,s){if(o.length>1){if(Hg(o,n))return!0;for(let h=0;h<n.length;h++)if(Xg(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Xg(o[h],n,s))return!0;return!1}function Hg(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let v=0;v<n.length-1;v++)if(lI(h,p,n[v],n[v+1]))return!0}return!1}function lI(o,n,s,h){return q(o,s,h)!==q(n,s,h)&&q(o,n,s)!==q(o,n,h)}function Xg(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(cx(o,n[p-1],n[p])<h)return!0;return!1}function cx(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function hx(o,n){let s,h,p,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let T=0,P=s.length-1;T<s.length;P=T++)h=s[T],p=s[P],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function wc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function uI(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=q(o,n,s[0]);return v!==q(o,n,s[1])||v!==q(o,n,s[2])||v!==q(o,n,s[3])}function tf(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Zd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Wd(o,n,s,h,p){if(!n[0]&&!n[1])return o;const v=E.convert(n)._mult(p);s==="viewport"&&v._rotate(-h);const x=[];for(let T=0;T<o.length;T++)x.push(o[T].sub(v));return x}let fx,dx;At("CircleBucket",Wg,{omit:["layers"]});var cI={get paint(){return dx=dx||new Oi({"circle-radius":new ln(Je.paint_circle["circle-radius"]),"circle-color":new ln(Je.paint_circle["circle-color"]),"circle-blur":new ln(Je.paint_circle["circle-blur"]),"circle-opacity":new ln(Je.paint_circle["circle-opacity"]),"circle-translate":new Kt(Je.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(Je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(Je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(Je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ln(Je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ln(Je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ln(Je.paint_circle["circle-stroke-opacity"])})},get layout(){return fx=fx||new Oi({"circle-sort-key":new ln(Je.layout_circle["circle-sort-key"])})}},Fi=1e-6,bc=typeof Float32Array<"u"?Float32Array:Array;function qg(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function px(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3],T=n[4],P=n[5],R=n[6],X=n[7],ee=n[8],ue=n[9],de=n[10],ge=n[11],Pe=n[12],je=n[13],Ne=n[14],et=n[15],We=s[0],tt=s[1],it=s[2],mt=s[3];return o[0]=We*h+tt*T+it*ee+mt*Pe,o[1]=We*p+tt*P+it*ue+mt*je,o[2]=We*v+tt*R+it*de+mt*Ne,o[3]=We*x+tt*X+it*ge+mt*et,o[4]=(We=s[4])*h+(tt=s[5])*T+(it=s[6])*ee+(mt=s[7])*Pe,o[5]=We*p+tt*P+it*ue+mt*je,o[6]=We*v+tt*R+it*de+mt*Ne,o[7]=We*x+tt*X+it*ge+mt*et,o[8]=(We=s[8])*h+(tt=s[9])*T+(it=s[10])*ee+(mt=s[11])*Pe,o[9]=We*p+tt*P+it*ue+mt*je,o[10]=We*v+tt*R+it*de+mt*Ne,o[11]=We*x+tt*X+it*ge+mt*et,o[12]=(We=s[12])*h+(tt=s[13])*T+(it=s[14])*ee+(mt=s[15])*Pe,o[13]=We*p+tt*P+it*ue+mt*je,o[14]=We*v+tt*R+it*de+mt*Ne,o[15]=We*x+tt*X+it*ge+mt*et,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var nf,hI=px;function Hd(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*x,o[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*x,o[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*x,o[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*x,o}nf=new bc(4),bc!=Float32Array&&(nf[0]=0,nf[1]=0,nf[2]=0,nf[3]=0);class fI extends ns{constructor(n){super(n,cI)}createBucket(n){return new Wg(n)}queryRadius(n){const s=n;return tf("circle-radius",this,s)+tf("circle-stroke-width",this,s)+Zd(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,p,v,x,T,P){const R=Wd(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,T),X=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),ee=this.paint.get("circle-pitch-alignment")==="map",ue=ee?R:function(ge,Pe){return ge.map(je=>mx(je,Pe))}(R,P),de=ee?X*T:X;for(const ge of p)for(const Pe of ge){const je=ee?Pe:mx(Pe,P);let Ne=de;const et=Hd([],[Pe.x,Pe.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=et[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=x.cameraToCenterDistance/et[3]),sI(ue,je,Ne))return!0}return!1}}function mx(o,n){const s=Hd([],[o.x,o.y,0,1],n);return new E(s[0]/s[3],s[1]/s[3])}class gx extends Wg{}let yx;At("HeatmapBucket",gx,{omit:["layers"]});var dI={get paint(){return yx=yx||new Oi({"heatmap-radius":new ln(Je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ln(Je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(Je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qh(Je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(Je.paint_heatmap["heatmap-opacity"])})}};function Kg(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function vx(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=Kg({},{width:n,height:s},h);Yg(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function Yg(o,n,s,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,T=n.data;if(x===T)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<p.height;P++){const R=((s.y+P)*o.width+s.x)*v,X=((h.y+P)*n.width+h.x)*v;for(let ee=0;ee<p.width*v;ee++)T[X+ee]=x[R+ee]}return n}class rf{constructor(n,s){Kg(this,n,1,s)}resize(n){vx(this,n,1)}clone(){return new rf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){Yg(n,s,h,p,v,1)}}class zo{constructor(n,s){Kg(this,n,4,s)}resize(n){vx(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){Yg(n,s,h,p,v,4)}}function _x(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new zo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,T,P)=>{n[o.evaluationKey]=P;const R=o.expression.evaluate(n);p.data[x+T+0]=Math.floor(255*R.r/R.a),p.data[x+T+1]=Math.floor(255*R.g/R.a),p.data[x+T+2]=Math.floor(255*R.b/R.a),p.data[x+T+3]=Math.floor(255*R.a)};if(o.clips)for(let x=0,T=0;x<h;++x,T+=4*s)for(let P=0,R=0;P<s;P++,R+=4){const X=P/(s-1),{start:ee,end:ue}=o.clips[x];v(T,R,ee*(1-X)+ue*X)}else for(let x=0,T=0;x<s;x++,T+=4)v(0,T,x/(s-1));return p}At("AlphaImage",rf),At("RGBAImage",zo);class pI extends ns{createBucket(n){return new gx(n)}constructor(n){super(n,dI),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=_x({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let xx;var mI={get paint(){return xx=xx||new Oi({"hillshade-illumination-direction":new Kt(Je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kt(Je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(Je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(Je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(Je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(Je.paint_hillshade["hillshade-accent-color"])})}};class gI extends ns{constructor(n){super(n,mI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const yI=Ar([{name:"a_pos",components:2,type:"Int16"}],4),{members:vI}=yI;var Jg={exports:{}};function Xd(o,n,s){s=s||2;var h,p,v,x,T,P,R,X=n&&n.length,ee=X?n[0]*s:o.length,ue=wx(o,0,ee,s,!0),de=[];if(!ue||ue.next===ue.prev)return de;if(X&&(ue=function(Pe,je,Ne,et){var We,tt,it,mt=[];for(We=0,tt=je.length;We<tt;We++)(it=wx(Pe,je[We]*et,We<tt-1?je[We+1]*et:Pe.length,et,!1))===it.next&&(it.steiner=!0),mt.push(CI(it));for(mt.sort(EI),We=0;We<mt.length;We++)Ne=SI(mt[We],Ne);return Ne}(o,n,ue,s)),o.length>80*s){h=v=o[0],p=x=o[1];for(var ge=s;ge<ee;ge+=s)(T=o[ge])<h&&(h=T),(P=o[ge+1])<p&&(p=P),T>v&&(v=T),P>x&&(x=P);R=(R=Math.max(v-h,x-p))!==0?32767/R:0}return of(ue,de,s,h,p,R,0),de}function wx(o,n,s,h,p){var v,x;if(p===ty(o,n,s,h)>0)for(v=n;v<s;v+=h)x=Sx(v,o[v],o[v+1],x);else for(v=s-h;v>=n;v-=h)x=Sx(v,o[v],o[v+1],x);return x&&qd(x,x.next)&&(af(x),x=x.next),x}function Au(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!qd(h,h.next)&&Pr(h.prev,h,h.next)!==0)h=h.next;else{if(af(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function of(o,n,s,h,p,v,x){if(o){!x&&v&&function(X,ee,ue,de){var ge=X;do ge.z===0&&(ge.z=Qg(ge.x,ge.y,ee,ue,de)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==X);ge.prevZ.nextZ=null,ge.prevZ=null,function(Pe){var je,Ne,et,We,tt,it,mt,jt,Zt=1;do{for(Ne=Pe,Pe=null,tt=null,it=0;Ne;){for(it++,et=Ne,mt=0,je=0;je<Zt&&(mt++,et=et.nextZ);je++);for(jt=Zt;mt>0||jt>0&&et;)mt!==0&&(jt===0||!et||Ne.z<=et.z)?(We=Ne,Ne=Ne.nextZ,mt--):(We=et,et=et.nextZ,jt--),tt?tt.nextZ=We:Pe=We,We.prevZ=tt,tt=We;Ne=et}tt.nextZ=null,Zt*=2}while(it>1)}(ge)}(o,h,p,v);for(var T,P,R=o;o.prev!==o.next;)if(T=o.prev,P=o.next,v?xI(o,h,p,v):_I(o))n.push(T.i/s|0),n.push(o.i/s|0),n.push(P.i/s|0),af(o),o=P.next,R=P.next;else if((o=P)===R){x?x===1?of(o=wI(Au(o),n,s),n,s,h,p,v,2):x===2&&bI(o,n,s,h,p,v):of(Au(o),n,s,h,p,v,1);break}}}function _I(o){var n=o.prev,s=o,h=o.next;if(Pr(n,s,h)>=0)return!1;for(var p=n.x,v=s.x,x=h.x,T=n.y,P=s.y,R=h.y,X=p<v?p<x?p:x:v<x?v:x,ee=T<P?T<R?T:R:P<R?P:R,ue=p>v?p>x?p:x:v>x?v:x,de=T>P?T>R?T:R:P>R?P:R,ge=h.next;ge!==n;){if(ge.x>=X&&ge.x<=ue&&ge.y>=ee&&ge.y<=de&&Ec(p,T,v,P,x,R,ge.x,ge.y)&&Pr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function xI(o,n,s,h){var p=o.prev,v=o,x=o.next;if(Pr(p,v,x)>=0)return!1;for(var T=p.x,P=v.x,R=x.x,X=p.y,ee=v.y,ue=x.y,de=T<P?T<R?T:R:P<R?P:R,ge=X<ee?X<ue?X:ue:ee<ue?ee:ue,Pe=T>P?T>R?T:R:P>R?P:R,je=X>ee?X>ue?X:ue:ee>ue?ee:ue,Ne=Qg(de,ge,n,s,h),et=Qg(Pe,je,n,s,h),We=o.prevZ,tt=o.nextZ;We&&We.z>=Ne&&tt&&tt.z<=et;){if(We.x>=de&&We.x<=Pe&&We.y>=ge&&We.y<=je&&We!==p&&We!==x&&Ec(T,X,P,ee,R,ue,We.x,We.y)&&Pr(We.prev,We,We.next)>=0||(We=We.prevZ,tt.x>=de&&tt.x<=Pe&&tt.y>=ge&&tt.y<=je&&tt!==p&&tt!==x&&Ec(T,X,P,ee,R,ue,tt.x,tt.y)&&Pr(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;We&&We.z>=Ne;){if(We.x>=de&&We.x<=Pe&&We.y>=ge&&We.y<=je&&We!==p&&We!==x&&Ec(T,X,P,ee,R,ue,We.x,We.y)&&Pr(We.prev,We,We.next)>=0)return!1;We=We.prevZ}for(;tt&&tt.z<=et;){if(tt.x>=de&&tt.x<=Pe&&tt.y>=ge&&tt.y<=je&&tt!==p&&tt!==x&&Ec(T,X,P,ee,R,ue,tt.x,tt.y)&&Pr(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function wI(o,n,s){var h=o;do{var p=h.prev,v=h.next.next;!qd(p,v)&&bx(p,h,h.next,v)&&sf(p,v)&&sf(v,p)&&(n.push(p.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),af(h),af(h.next),h=o=v),h=h.next}while(h!==o);return Au(h)}function bI(o,n,s,h,p,v){var x=o;do{for(var T=x.next.next;T!==x.prev;){if(x.i!==T.i&&AI(x,T)){var P=Ex(x,T);return x=Au(x,x.next),P=Au(P,P.next),of(x,n,s,h,p,v,0),void of(P,n,s,h,p,v,0)}T=T.next}x=x.next}while(x!==o)}function EI(o,n){return o.x-n.x}function SI(o,n){var s=function(p,v){var x,T=v,P=p.x,R=p.y,X=-1/0;do{if(R<=T.y&&R>=T.next.y&&T.next.y!==T.y){var ee=T.x+(R-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(ee<=P&&ee>X&&(X=ee,x=T.x<T.next.x?T:T.next,ee===P))return x}T=T.next}while(T!==v);if(!x)return null;var ue,de=x,ge=x.x,Pe=x.y,je=1/0;T=x;do P>=T.x&&T.x>=ge&&P!==T.x&&Ec(R<Pe?P:X,R,ge,Pe,R<Pe?X:P,R,T.x,T.y)&&(ue=Math.abs(R-T.y)/(P-T.x),sf(T,p)&&(ue<je||ue===je&&(T.x>x.x||T.x===x.x&&TI(x,T)))&&(x=T,je=ue)),T=T.next;while(T!==de);return x}(o,n);if(!s)return n;var h=Ex(s,o);return Au(h,h.next),Au(s,s.next)}function TI(o,n){return Pr(o.prev,o,n.prev)<0&&Pr(n.next,o,o.next)<0}function Qg(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function CI(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Ec(o,n,s,h,p,v,x,T){return(p-x)*(n-T)>=(o-x)*(v-T)&&(o-x)*(h-T)>=(s-x)*(n-T)&&(s-x)*(v-T)>=(p-x)*(h-T)}function AI(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&bx(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(sf(o,n)&&sf(n,o)&&function(s,h){var p=s,v=!1,x=(s.x+h.x)/2,T=(s.y+h.y)/2;do p.y>T!=p.next.y>T&&p.next.y!==p.y&&x<(p.next.x-p.x)*(T-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(o,n)&&(Pr(o.prev,o,n.prev)||Pr(o,n.prev,n))||qd(o,n)&&Pr(o.prev,o,o.next)>0&&Pr(n.prev,n,n.next)>0)}function Pr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function qd(o,n){return o.x===n.x&&o.y===n.y}function bx(o,n,s,h){var p=Yd(Pr(o,n,s)),v=Yd(Pr(o,n,h)),x=Yd(Pr(s,h,o)),T=Yd(Pr(s,h,n));return p!==v&&x!==T||!(p!==0||!Kd(o,s,n))||!(v!==0||!Kd(o,h,n))||!(x!==0||!Kd(s,o,h))||!(T!==0||!Kd(s,n,h))}function Kd(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Yd(o){return o>0?1:o<0?-1:0}function sf(o,n){return Pr(o.prev,o,o.next)<0?Pr(o,n,o.next)>=0&&Pr(o,o.prev,n)>=0:Pr(o,n,o.prev)<0||Pr(o,o.next,n)<0}function Ex(o,n){var s=new ey(o.i,o.x,o.y),h=new ey(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function Sx(o,n,s,h){var p=new ey(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function af(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function ey(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ty(o,n,s,h){for(var p=0,v=n,x=s-h;v<s;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}Jg.exports=Xd,Jg.exports.default=Xd,Xd.deviation=function(o,n,s,h){var p=n&&n.length,v=Math.abs(ty(o,0,p?n[0]*s:o.length,s));if(p)for(var x=0,T=n.length;x<T;x++)v-=Math.abs(ty(o,n[x]*s,x<T-1?n[x+1]*s:o.length,s));var P=0;for(x=0;x<h.length;x+=3){var R=h[x]*s,X=h[x+1]*s,ee=h[x+2]*s;P+=Math.abs((o[R]-o[ee])*(o[X+1]-o[R+1])-(o[R]-o[X])*(o[ee+1]-o[R+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},Xd.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<n;x++)s.vertices.push(o[p][v][x]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var Tx=b(Jg.exports);function II(o,n,s,h,p){Cx(o,n,s||0,h||o.length-1,p||PI)}function Cx(o,n,s,h,p){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,T=Math.log(v),P=.5*Math.exp(2*T/3),R=.5*Math.sqrt(T*P*(v-P)/v)*(x-v/2<0?-1:1);Cx(o,n,Math.max(s,Math.floor(n-x*P/v+R)),Math.min(h,Math.floor(n+(v-x)*P/v+R)),p)}var X=o[n],ee=s,ue=h;for(lf(o,s,n),p(o[h],X)>0&&lf(o,s,h);ee<ue;){for(lf(o,ee,ue),ee++,ue--;p(o[ee],X)<0;)ee++;for(;p(o[ue],X)>0;)ue--}p(o[s],X)===0?lf(o,s,ue):lf(o,++ue,h),ue<=n&&(s=ue+1),n<=ue&&(h=ue-1)}}function lf(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function PI(o,n){return o<n?-1:o>n?1:0}function ny(o,n){const s=o.length;if(s<=1)return[o];const h=[];let p,v;for(let x=0;x<s;x++){const T=J(o[x]);T!==0&&(o[x].area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(II(h[x],n,1,h[x].length-1,MI),h[x]=h[x].slice(0,n));return h}function MI(o,n){return n.area-o.area}function ry(o,n,s){const h=s.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const T=x.constantOr(null);T&&(p=!0,h[T.to]=!0,h[T.from]=!0)}return p}function iy(o,n,s,h,p){const v=p.patternDependencies;for(const x of n){const T=x.paint.get(`${o}-pattern`).value;if(T.kind!=="constant"){let P=T.evaluate({zoom:h-1},s,{},p.availableImages),R=T.evaluate({zoom:h},s,{},p.availableImages),X=T.evaluate({zoom:h+1},s,{},p.availableImages);P=P&&P.name?P.name:P,R=R&&R.name?R.name:R,X=X&&X.name?X.name:X,v[P]=!0,v[R]=!0,v[X]=!0,s.patterns[x.id]={min:P,mid:R,max:X}}}return s}class oy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ye,this.indexArray=new nn,this.indexArray2=new $t,this.programConfigurations=new Ma(n.layers,n.zoom),this.segments=new rn,this.segments2=new rn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=ry("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:T,id:P,index:R,sourceLayerIndex:X}of n){const ee=this.layers[0]._featureFilter.needGeometry,ue=ea(T,ee);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),ue,h))continue;const de=v?p.evaluate(ue,{},h,s.availableImages):void 0,ge={id:P,properties:T.properties,type:T.type,sourceLayerIndex:X,index:R,geometry:ee?ue.geometry:Ts(T),patterns:{},sortKey:de};x.push(ge)}v&&x.sort((T,P)=>T.sortKey-P.sortKey);for(const T of x){const{geometry:P,index:R,sourceLayerIndex:X}=T;if(this.hasPattern){const ee=iy("fill",this.layers,T,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(T,P,R,h,{});s.featureIndex.insert(n[R].feature,P,R,X,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,vI),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,v){for(const x of ny(s,500)){let T=0;for(const de of x)T+=de.length;const P=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),R=P.vertexLength,X=[],ee=[];for(const de of x){if(de.length===0)continue;de!==x[0]&&ee.push(X.length/2);const ge=this.segments2.prepareSegment(de.length,this.layoutVertexArray,this.indexArray2),Pe=ge.vertexLength;this.layoutVertexArray.emplaceBack(de[0].x,de[0].y),this.indexArray2.emplaceBack(Pe+de.length-1,Pe),X.push(de[0].x),X.push(de[0].y);for(let je=1;je<de.length;je++)this.layoutVertexArray.emplaceBack(de[je].x,de[je].y),this.indexArray2.emplaceBack(Pe+je-1,Pe+je),X.push(de[je].x),X.push(de[je].y);ge.vertexLength+=de.length,ge.primitiveLength+=de.length}const ue=Tx(X,ee);for(let de=0;de<ue.length;de+=3)this.indexArray.emplaceBack(R+ue[de],R+ue[de+1],R+ue[de+2]);P.vertexLength+=T,P.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}let Ax,Ix;At("FillBucket",oy,{omit:["layers","patternFeatures"]});var kI={get paint(){return Ix=Ix||new Oi({"fill-antialias":new Kt(Je.paint_fill["fill-antialias"]),"fill-opacity":new ln(Je.paint_fill["fill-opacity"]),"fill-color":new ln(Je.paint_fill["fill-color"]),"fill-outline-color":new ln(Je.paint_fill["fill-outline-color"]),"fill-translate":new Kt(Je.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(Je.paint_fill["fill-translate-anchor"]),"fill-pattern":new mc(Je.paint_fill["fill-pattern"])})},get layout(){return Ax=Ax||new Oi({"fill-sort-key":new ln(Je.layout_fill["fill-sort-key"])})}};class LI extends ns{constructor(n){super(n,kI)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new oy(n)}queryRadius(){return Zd(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,p,v,x,T){return ux(Wd(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,T),p)}isTileClipped(){return!0}}const zI=Ar([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),OI=Ar([{name:"a_centroid",components:2,type:"Int16"}],4),{members:RI}=zI;var Sl={},FI=w,Px=Sc;function Sc(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(jI,this,n)}function jI(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],T=p._values[h.readVarint()];p.properties[x]=T}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function DI(o){for(var n,s,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((s=o[x]).x-(n=o[p]).x)*(n.y+s.y);return h}Sc.types=["Unknown","Point","LineString","Polygon"],Sc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,T=[];o.pos<s;){if(p<=0){var P=o.readVarint();h=7&P,p=P>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&T.push(n),n=[]),n.push(new FI(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&T.push(n),T},Sc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,v=0,x=1/0,T=-1/0,P=1/0,R=-1/0;o.pos<n;){if(h<=0){var X=o.readVarint();s=7&X,h=X>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<x&&(x=p),p>T&&(T=p),(v+=o.readSVarint())<P&&(P=v),v>R&&(R=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,T,R]},Sc.prototype.toGeoJSON=function(o,n,s){var h,p,v=this.extent*Math.pow(2,s),x=this.extent*o,T=this.extent*n,P=this.loadGeometry(),R=Sc.types[this.type];function X(de){for(var ge=0;ge<de.length;ge++){var Pe=de[ge];de[ge]=[360*(Pe.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+T)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var ee=[];for(h=0;h<P.length;h++)ee[h]=P[h][0];X(P=ee);break;case 2:for(h=0;h<P.length;h++)X(P[h]);break;case 3:for(P=function(de){var ge=de.length;if(ge<=1)return[de];for(var Pe,je,Ne=[],et=0;et<ge;et++){var We=DI(de[et]);We!==0&&(je===void 0&&(je=We<0),je===We<0?(Pe&&Ne.push(Pe),Pe=[de[et]]):Pe.push(de[et]))}return Pe&&Ne.push(Pe),Ne}(P),h=0;h<P.length;h++)for(p=0;p<P[h].length;p++)X(P[h][p])}P.length===1?P=P[0]:R="Multi"+R;var ue={type:"Feature",geometry:{type:R,coordinates:P},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var BI=Px,Mx=kx;function kx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(NI,this,n),this.length=this._features.length}function NI(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(s))}kx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new BI(this._pbf,n,this.extent,this._keys,this._values)};var UI=Mx;function $I(o,n,s){if(o===3){var h=new UI(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Sl.VectorTile=function(o,n){this.layers=o.readFields($I,{},n)},Sl.VectorTileFeature=Px,Sl.VectorTileLayer=Mx;const VI=Sl.VectorTileFeature.types,sy=Math.pow(2,13);function uf(o,n,s,h,p,v,x,T){o.emplaceBack(n,s,2*Math.floor(h*sy)+x,p*sy*2,v*sy*2,Math.round(T))}class ay{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new at,this.centroidVertexArray=new nt,this.indexArray=new nn,this.programConfigurations=new Ma(n.layers,n.zoom),this.segments=new rn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=ry("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:x,sourceLayerIndex:T}of n){const P=this.layers[0]._featureFilter.needGeometry,R=ea(p,P);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),R,h))continue;const X={id:v,sourceLayerIndex:T,index:x,geometry:P?R.geometry:Ts(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(iy("fill-extrusion",this.layers,X,this.zoom,s)):this.addFeature(X,X.geometry,x,h,{}),s.featureIndex.insert(p,X.geometry,x,T,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,RI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,OI.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,v){const x={x:0,y:0,vertexCount:0};for(const T of ny(s,500)){let P=0;for(const ge of T)P+=ge.length;let R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of T){if(ge.length===0||ZI(ge))continue;let Pe=0;for(let je=0;je<ge.length;je++){const Ne=ge[je];if(je>=1){const et=ge[je-1];if(!GI(Ne,et)){R.vertexLength+4>rn.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const We=Ne.sub(et)._perp()._unit(),tt=et.dist(Ne);Pe+tt>32768&&(Pe=0),uf(this.layoutVertexArray,Ne.x,Ne.y,We.x,We.y,0,0,Pe),uf(this.layoutVertexArray,Ne.x,Ne.y,We.x,We.y,0,1,Pe),x.x+=2*Ne.x,x.y+=2*Ne.y,x.vertexCount+=2,Pe+=tt,uf(this.layoutVertexArray,et.x,et.y,We.x,We.y,0,0,Pe),uf(this.layoutVertexArray,et.x,et.y,We.x,We.y,0,1,Pe),x.x+=2*et.x,x.y+=2*et.y,x.vertexCount+=2;const it=R.vertexLength;this.indexArray.emplaceBack(it,it+2,it+1),this.indexArray.emplaceBack(it+1,it+2,it+3),R.vertexLength+=4,R.primitiveLength+=2}}}}if(R.vertexLength+P>rn.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),VI[n.type]!=="Polygon")continue;const X=[],ee=[],ue=R.vertexLength;for(const ge of T)if(ge.length!==0){ge!==T[0]&&ee.push(X.length/2);for(let Pe=0;Pe<ge.length;Pe++){const je=ge[Pe];uf(this.layoutVertexArray,je.x,je.y,0,0,1,1,0),x.x+=je.x,x.y+=je.y,x.vertexCount+=1,X.push(je.x),X.push(je.y)}}const de=Tx(X,ee);for(let ge=0;ge<de.length;ge+=3)this.indexArray.emplaceBack(ue+de[ge],ue+de[ge+2],ue+de[ge+1]);R.primitiveLength+=de.length/3,R.vertexLength+=P}for(let T=0;T<x.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function GI(o,n){return o.x===n.x&&(o.x<0||o.x>yr)||o.y===n.y&&(o.y<0||o.y>yr)}function ZI(o){return o.every(n=>n.x<0)||o.every(n=>n.x>yr)||o.every(n=>n.y<0)||o.every(n=>n.y>yr)}let Lx;At("FillExtrusionBucket",ay,{omit:["layers","features"]});var WI={get paint(){return Lx=Lx||new Oi({"fill-extrusion-opacity":new Kt(Je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ln(Je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(Je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(Je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mc(Je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ln(Je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ln(Je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kt(Je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class HI extends ns{constructor(n){super(n,WI)}createBucket(n){return new ay(n)}queryRadius(){return Zd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,p,v,x,T,P){const R=Wd(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,T),X=this.paint.get("fill-extrusion-height").evaluate(s,h),ee=this.paint.get("fill-extrusion-base").evaluate(s,h),ue=function(ge,Pe,je,Ne){const et=[];for(const We of ge){const tt=[We.x,We.y,0,1];Hd(tt,tt,Pe),et.push(new E(tt[0]/tt[3],tt[1]/tt[3]))}return et}(R,P),de=function(ge,Pe,je,Ne){const et=[],We=[],tt=Ne[8]*Pe,it=Ne[9]*Pe,mt=Ne[10]*Pe,jt=Ne[11]*Pe,Zt=Ne[8]*je,Ft=Ne[9]*je,Rt=Ne[10]*je,It=Ne[11]*je;for(const Bt of ge){const Lt=[],bt=[];for(const on of Bt){const Ht=on.x,bn=on.y,tr=Ne[0]*Ht+Ne[4]*bn+Ne[12],or=Ne[1]*Ht+Ne[5]*bn+Ne[13],Zr=Ne[2]*Ht+Ne[6]*bn+Ne[14],go=Ne[3]*Ht+Ne[7]*bn+Ne[15],ji=Zr+mt,jr=go+jt,qr=tr+Zt,li=or+Ft,Yi=Zr+Rt,Di=go+It,Dr=new E((tr+tt)/jr,(or+it)/jr);Dr.z=ji/jr,Lt.push(Dr);const Wr=new E(qr/Di,li/Di);Wr.z=Yi/Di,bt.push(Wr)}et.push(Lt),We.push(bt)}return[et,We]}(p,ee,X,P);return function(ge,Pe,je){let Ne=1/0;ux(je,Pe)&&(Ne=zx(je,Pe[0]));for(let et=0;et<Pe.length;et++){const We=Pe[et],tt=ge[et];for(let it=0;it<We.length-1;it++){const mt=We[it],jt=[mt,We[it+1],tt[it+1],tt[it],mt];lx(je,jt)&&(Ne=Math.min(Ne,zx(je,jt)))}}return Ne!==1/0&&Ne}(de[0],de[1],ue)}}function cf(o,n){return o.x*n.x+o.y*n.y}function zx(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const v=n[s],x=o[0],T=p.sub(h),P=v.sub(h),R=x.sub(h),X=cf(T,T),ee=cf(T,P),ue=cf(P,P),de=cf(R,T),ge=cf(R,P),Pe=X*ue-ee*ee,je=(ue*de-ee*ge)/Pe,Ne=(X*ge-ee*de)/Pe,et=h.z*(1-je-Ne)+p.z*je+v.z*Ne;if(isFinite(et))return et}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const XI=Ar([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:qI}=XI,KI=Ar([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:YI}=KI,JI=Sl.VectorTileFeature.types,QI=Math.cos(Math.PI/180*37.5),Ox=Math.pow(2,14)/.5;class ly{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new lt,this.layoutVertexArray2=new ft,this.indexArray=new nn,this.programConfigurations=new Ma(n.layers,n.zoom),this.segments=new rn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=ry("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:T,id:P,index:R,sourceLayerIndex:X}of n){const ee=this.layers[0]._featureFilter.needGeometry,ue=ea(T,ee);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),ue,h))continue;const de=v?p.evaluate(ue,{},h):void 0,ge={id:P,properties:T.properties,type:T.type,sourceLayerIndex:X,index:R,geometry:ee?ue.geometry:Ts(T),patterns:{},sortKey:de};x.push(ge)}v&&x.sort((T,P)=>T.sortKey-P.sortKey);for(const T of x){const{geometry:P,index:R,sourceLayerIndex:X}=T;if(this.hasPattern){const ee=iy("line",this.layers,T,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(T,P,R,h,{});s.featureIndex.insert(n[R].feature,P,R,X,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,YI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,v){const x=this.layers[0].layout,T=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),R=x.get("line-miter-limit"),X=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ee of s)this.addLine(ee,n,T,P,R,X);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,s,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ne=0;Ne<n.length-1;Ne++)this.totalDistance+=n[Ne].dist(n[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=JI[s.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let R=0;for(;R<P-1&&n[R].equals(n[R+1]);)R++;if(P<(T?3:2))return;h==="bevel"&&(v=1.05);const X=this.overscaling<=16?15*yr/(512*this.overscaling):0,ee=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let ue,de,ge,Pe,je;this.e1=this.e2=-1,T&&(ue=n[P-2],je=n[R].sub(ue)._unit()._perp());for(let Ne=R;Ne<P;Ne++){if(ge=Ne===P-1?T?n[R+1]:void 0:n[Ne+1],ge&&n[Ne].equals(ge))continue;je&&(Pe=je),ue&&(de=ue),ue=n[Ne],je=ge?ge.sub(ue)._unit()._perp():Pe,Pe=Pe||je;let et=Pe.add(je);et.x===0&&et.y===0||et._unit();const We=Pe.x*je.x+Pe.y*je.y,tt=et.x*je.x+et.y*je.y,it=tt!==0?1/tt:1/0,mt=2*Math.sqrt(2-2*tt),jt=tt<QI&&de&&ge,Zt=Pe.x*je.y-Pe.y*je.x>0;if(jt&&Ne>R){const It=ue.dist(de);if(It>2*X){const Bt=ue.sub(ue.sub(de)._mult(X/It)._round());this.updateDistance(de,Bt),this.addCurrentVertex(Bt,Pe,0,0,ee),de=Bt}}const Ft=de&&ge;let Rt=Ft?h:T?"butt":p;if(Ft&&Rt==="round"&&(it<x?Rt="miter":it<=2&&(Rt="fakeround")),Rt==="miter"&&it>v&&(Rt="bevel"),Rt==="bevel"&&(it>2&&(Rt="flipbevel"),it<v&&(Rt="miter")),de&&this.updateDistance(de,ue),Rt==="miter")et._mult(it),this.addCurrentVertex(ue,et,0,0,ee);else if(Rt==="flipbevel"){if(it>100)et=je.mult(-1);else{const It=it*Pe.add(je).mag()/Pe.sub(je).mag();et._perp()._mult(It*(Zt?-1:1))}this.addCurrentVertex(ue,et,0,0,ee),this.addCurrentVertex(ue,et.mult(-1),0,0,ee)}else if(Rt==="bevel"||Rt==="fakeround"){const It=-Math.sqrt(it*it-1),Bt=Zt?It:0,Lt=Zt?0:It;if(de&&this.addCurrentVertex(ue,Pe,Bt,Lt,ee),Rt==="fakeround"){const bt=Math.round(180*mt/Math.PI/20);for(let on=1;on<bt;on++){let Ht=on/bt;if(Ht!==.5){const tr=Ht-.5;Ht+=Ht*tr*(Ht-1)*((1.0904+We*(We*(3.55645-1.43519*We)-3.2452))*tr*tr+(.848013+We*(.215638*We-1.06021)))}const bn=je.sub(Pe)._mult(Ht)._add(Pe)._unit()._mult(Zt?-1:1);this.addHalfVertex(ue,bn.x,bn.y,!1,Zt,0,ee)}}ge&&this.addCurrentVertex(ue,je,-Bt,-Lt,ee)}else if(Rt==="butt")this.addCurrentVertex(ue,et,0,0,ee);else if(Rt==="square"){const It=de?1:-1;this.addCurrentVertex(ue,et,It,It,ee)}else Rt==="round"&&(de&&(this.addCurrentVertex(ue,Pe,0,0,ee),this.addCurrentVertex(ue,Pe,1,1,ee,!0)),ge&&(this.addCurrentVertex(ue,je,-1,-1,ee,!0),this.addCurrentVertex(ue,je,0,0,ee)));if(jt&&Ne<P-1){const It=ue.dist(ge);if(It>2*X){const Bt=ue.add(ge.sub(ue)._mult(X/It)._round());this.updateDistance(ue,Bt),this.addCurrentVertex(Bt,je,0,0,ee),ue=Bt}}}}addCurrentVertex(n,s,h,p,v,x=!1){const T=s.y*p-s.x,P=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,T,P,x,!0,-p,v),this.distance>Ox/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,v,x))}addHalfVertex({x:n,y:s},h,p,v,x,T,P){const R=.5*(this.lineClips?this.scaledDistance*(Ox-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(T===0?0:T<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const X=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,X),P.primitiveLength++),x?this.e2=X:this.e1=X}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Rx,Fx;At("LineBucket",ly,{omit:["layers","patternFeatures"]});var jx={get paint(){return Fx=Fx||new Oi({"line-opacity":new ln(Je.paint_line["line-opacity"]),"line-color":new ln(Je.paint_line["line-color"]),"line-translate":new Kt(Je.paint_line["line-translate"]),"line-translate-anchor":new Kt(Je.paint_line["line-translate-anchor"]),"line-width":new ln(Je.paint_line["line-width"]),"line-gap-width":new ln(Je.paint_line["line-gap-width"]),"line-offset":new ln(Je.paint_line["line-offset"]),"line-blur":new ln(Je.paint_line["line-blur"]),"line-dasharray":new Xh(Je.paint_line["line-dasharray"]),"line-pattern":new mc(Je.paint_line["line-pattern"]),"line-gradient":new qh(Je.paint_line["line-gradient"])})},get layout(){return Rx=Rx||new Oi({"line-cap":new Kt(Je.layout_line["line-cap"]),"line-join":new ln(Je.layout_line["line-join"]),"line-miter-limit":new Kt(Je.layout_line["line-miter-limit"]),"line-round-limit":new Kt(Je.layout_line["line-round-limit"]),"line-sort-key":new ln(Je.layout_line["line-sort-key"])})}};class eP extends ln{possiblyEvaluate(n,s){return s=new rr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=U({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let Jd;class tP extends ns{constructor(n){super(n,jx),this.gradientVersion=0,Jd||(Jd=new eP(jx.paint.properties["line-width"].specification),Jd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){n==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof _a,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Jd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new ly(n)}queryRadius(n){const s=n,h=Dx(tf("line-width",this,s),tf("line-gap-width",this,s)),p=tf("line-offset",this,s);return h/2+Math.abs(p)+Zd(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,p,v,x,T){const P=Wd(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,T),R=T/2*Dx(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),X=this.paint.get("line-offset").evaluate(s,h);return X&&(p=function(ee,ue){const de=[];for(let ge=0;ge<ee.length;ge++){const Pe=ee[ge],je=[];for(let Ne=0;Ne<Pe.length;Ne++){const et=Pe[Ne-1],We=Pe[Ne],tt=Pe[Ne+1],it=Ne===0?new E(0,0):We.sub(et)._unit()._perp(),mt=Ne===Pe.length-1?new E(0,0):tt.sub(We)._unit()._perp(),jt=it._add(mt)._unit(),Zt=jt.x*mt.x+jt.y*mt.y;Zt!==0&&jt._mult(1/Zt),je.push(jt._mult(ue)._add(We))}de.push(je)}return de}(p,X*T)),function(ee,ue,de){for(let ge=0;ge<ue.length;ge++){const Pe=ue[ge];if(ee.length>=3){for(let je=0;je<Pe.length;je++)if(wc(ee,Pe[je]))return!0}if(aI(ee,Pe,de))return!0}return!1}(P,p,R)}isTileClipped(){return!0}}function Dx(o,n){return n>0?n+2*o:o}const nP=Ar([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rP=Ar([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ar([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const iP=Ar([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ar([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bx=Ar([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),oP=Ar([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sP(o,n,s){return o.sections.forEach(h=>{h.text=function(p,v,x){const T=v.layout.get("text-transform").evaluate(x,{});return T==="uppercase"?p=p.toLocaleUpperCase():T==="lowercase"&&(p=p.toLocaleLowerCase()),po.applyArabicShaping&&(p=po.applyArabicShaping(p)),p}(h.text,n,s)}),o}Ar([{name:"triangle",components:3,type:"Uint16"}]),Ar([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ar([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ar([{type:"Float32",name:"offsetX"}]),Ar([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ar([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const hf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Gr=24,Nx=Xn,Ux=function(o,n,s,h,p){var v,x,T=8*p-h-1,P=(1<<T)-1,R=P>>1,X=-7,ee=s?p-1:0,ue=s?-1:1,de=o[n+ee];for(ee+=ue,v=de&(1<<-X)-1,de>>=-X,X+=T;X>0;v=256*v+o[n+ee],ee+=ue,X-=8);for(x=v&(1<<-X)-1,v>>=-X,X+=h;X>0;x=256*x+o[n+ee],ee+=ue,X-=8);if(v===0)v=1-R;else{if(v===P)return x?NaN:1/0*(de?-1:1);x+=Math.pow(2,h),v-=R}return(de?-1:1)*x*Math.pow(2,v-h)},$x=function(o,n,s,h,p,v){var x,T,P,R=8*v-p-1,X=(1<<R)-1,ee=X>>1,ue=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,de=h?0:v-1,ge=h?1:-1,Pe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,x=X):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+ee>=1?ue/P:ue*Math.pow(2,1-ee))*P>=2&&(x++,P/=2),x+ee>=X?(T=0,x=X):x+ee>=1?(T=(n*P-1)*Math.pow(2,p),x+=ee):(T=n*Math.pow(2,ee-1)*Math.pow(2,p),x=0));p>=8;o[s+de]=255&T,de+=ge,T/=256,p-=8);for(x=x<<p|T,R+=p;R>0;o[s+de]=255&x,de+=ge,x/=256,R-=8);o[s+de-ge]|=128*Pe};function Xn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0,Xn.Fixed64=1,Xn.Bytes=2,Xn.Fixed32=5;var uy=4294967296,Vx=1/uy,Gx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function La(o){return o.type===Xn.Bytes?o.readVarint()+o.pos:o.pos+1}function Tc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Zx(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function aP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function lP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function uP(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function cP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function hP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function fP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function dP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function pP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function mP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function Qd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Cc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Wx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Xn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Qd(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Wx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Qd(this.buf,this.pos)+Qd(this.buf,this.pos+4)*uy;return this.pos+=8,o},readSFixed64:function(){var o=Qd(this.buf,this.pos)+Wx(this.buf,this.pos+4)*uy;return this.pos+=8,o},readFloat:function(){var o=Ux(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Ux(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,v,x){var T,P,R=x.buf;if(T=(112&(P=R[x.pos++]))>>4,P<128||(T|=(127&(P=R[x.pos++]))<<3,P<128)||(T|=(127&(P=R[x.pos++]))<<10,P<128)||(T|=(127&(P=R[x.pos++]))<<17,P<128)||(T|=(127&(P=R[x.pos++]))<<24,P<128)||(T|=(1&(P=R[x.pos++]))<<31,P<128))return Tc(p,T,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Gx?function(s,h,p){return Gx.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var v="",x=h;x<p;){var T,P,R,X=s[x],ee=null,ue=X>239?4:X>223?3:X>191?2:1;if(x+ue>p)break;ue===1?X<128&&(ee=X):ue===2?(192&(T=s[x+1]))==128&&(ee=(31&X)<<6|63&T)<=127&&(ee=null):ue===3?(P=s[x+2],(192&(T=s[x+1]))==128&&(192&P)==128&&((ee=(15&X)<<12|(63&T)<<6|63&P)<=2047||ee>=55296&&ee<=57343)&&(ee=null)):ue===4&&(P=s[x+2],R=s[x+3],(192&(T=s[x+1]))==128&&(192&P)==128&&(192&R)==128&&((ee=(15&X)<<18|(63&T)<<12|(63&P)<<6|63&R)<=65535||ee>=1114112)&&(ee=null)),ee===null?(ee=65533,ue=1):ee>65535&&(ee-=65536,v+=String.fromCharCode(ee>>>10&1023|55296),ee=56320|1023&ee),v+=String.fromCharCode(ee),x+=ue}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Xn.Bytes)return o.push(this.readVarint(n));var s=La(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSVarint());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Xn.Bytes)return o.push(this.readBoolean());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFloat());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Xn.Bytes)return o.push(this.readDouble());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFixed32());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSFixed32());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFixed64());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSFixed64());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Xn.Fixed32)this.pos+=4;else{if(n!==Xn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Cc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Cc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Cc(this.buf,-1&o,this.pos),Cc(this.buf,Math.floor(o*Vx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Cc(this.buf,-1&o,this.pos),Cc(this.buf,Math.floor(o*Vx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,T){T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,T.buf[T.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var T=(7&v)<<4;x.buf[x.pos++]|=T|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var x,T,P=0;P<p.length;P++){if((x=p.charCodeAt(P))>55295&&x<57344){if(!T){x>56319||P+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):T=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,T=x;continue}x=T-55296<<10|x-56320|65536,T=null}else T&&(h[v++]=239,h[v++]=191,h[v++]=189,T=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Zx(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),$x(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),$x(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Zx(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Xn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,aP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,lP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,hP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,uP,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,cP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,fP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,dP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,pP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,mP,n)},writeBytesField:function(o,n){this.writeTag(o,Xn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Xn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Xn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Xn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var cy=b(Nx);const hy=3;function gP(o,n,s){o===1&&s.readMessage(yP,n)}function yP(o,n,s){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:T,top:P,advance:R}=s.readMessage(vP,{});n.push({id:h,bitmap:new rf({width:v+2*hy,height:x+2*hy},p),metrics:{width:v,height:x,left:T,top:P,advance:R}})}}function vP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Hx=hy;function Xx(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,T)=>T.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,v=0;for(const x of o)for(let T=h.length-1;T>=0;T--){const P=h[T];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===P.w&&x.h===P.h){const R=h.pop();T<h.length&&(h[T]=R)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}const Ki=1;class fy{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+Ki,this.paddedRect.y+Ki]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ki,this.paddedRect.y+this.paddedRect.h-Ki]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ki)/this.pixelRatio,(this.paddedRect.h-2*Ki)/this.pixelRatio]}}class qx{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,p,v);const{w:x,h:T}=Xx(v),P=new zo({width:x||1,height:T||1});for(const R in n){const X=n[R],ee=h[R].paddedRect;zo.copy(X.data,P,{x:0,y:0},{x:ee.x+Ki,y:ee.y+Ki},X.data)}for(const R in s){const X=s[R],ee=p[R].paddedRect,ue=ee.x+Ki,de=ee.y+Ki,ge=X.data.width,Pe=X.data.height;zo.copy(X.data,P,{x:0,y:0},{x:ue,y:de},X.data),zo.copy(X.data,P,{x:0,y:Pe-1},{x:ue,y:de-1},{width:ge,height:1}),zo.copy(X.data,P,{x:0,y:0},{x:ue,y:de+Pe},{width:ge,height:1}),zo.copy(X.data,P,{x:ge-1,y:0},{x:ue-1,y:de},{width:1,height:Pe}),zo.copy(X.data,P,{x:0,y:0},{x:ue+ge,y:de},{width:1,height:Pe})}this.image=P,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2*Ki,h:v.data.height+2*Ki};h.push(x),s[p]=new fy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,v]=n.tl;h.update(s.data,void 0,{x:p,y:v})}}var Tl;At("ImagePosition",fy),At("ImageAtlas",qx),l.WritingMode=void 0,(Tl=l.WritingMode||(l.WritingMode={}))[Tl.none=0]="none",Tl[Tl.horizontal=1]="horizontal",Tl[Tl.vertical=2]="vertical",Tl[Tl.horizontalOnly=3]="horizontalOnly";const ff=-17;class df{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new df;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new df;return s.imageName=n,s}}class Ac{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Ac;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=p&&_u(p)&&!hf[n[h+1]]||v&&_u(v)&&!hf[n[h-1]]||!hf[n[h]]?n[h]:hf[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&tp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&tp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Ac;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(df.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Z("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(df.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ep(o,n,s,h,p,v,x,T,P,R,X,ee,ue,de,ge,Pe){const je=Ac.fromFeature(o,p);let Ne;ee===l.WritingMode.vertical&&je.verticalizePunctuation();const{processBidirectionalText:et,processStyledBidirectionalText:We}=po;if(et&&je.sections.length===1){Ne=[];const mt=et(je.toString(),dy(je,R,v,n,h,de,ge));for(const jt of mt){const Zt=new Ac;Zt.text=jt,Zt.sections=je.sections;for(let Ft=0;Ft<jt.length;Ft++)Zt.sectionIndex.push(0);Ne.push(Zt)}}else if(We){Ne=[];const mt=We(je.text,je.sectionIndex,dy(je,R,v,n,h,de,ge));for(const jt of mt){const Zt=new Ac;Zt.text=jt[0],Zt.sectionIndex=jt[1],Zt.sections=je.sections,Ne.push(Zt)}}else Ne=function(mt,jt){const Zt=[],Ft=mt.text;let Rt=0;for(const It of jt)Zt.push(mt.substring(Rt,It)),Rt=It;return Rt<Ft.length&&Zt.push(mt.substring(Rt,Ft.length)),Zt}(je,dy(je,R,v,n,h,de,ge));const tt=[],it={positionedLines:tt,text:je.toString(),top:X[1],bottom:X[1],left:X[0],right:X[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return function(mt,jt,Zt,Ft,Rt,It,Bt,Lt,bt,on,Ht,bn){let tr=0,or=ff,Zr=0,go=0;const ji=Lt==="right"?1:Lt==="left"?0:.5;let jr=0;for(const Dr of Rt){Dr.trim();const Wr=Dr.getMaxScale(),Si=(Wr-1)*Gr,Bi={positionedGlyphs:[],lineOffset:0};mt.positionedLines[jr]=Bi;const Ji=Bi.positionedGlyphs;let Qi=0;if(!Dr.length()){or+=It,++jr;continue}for(let ui=0;ui<Dr.length();ui++){const In=Dr.getSection(ui),yo=Dr.getSectionIndex(ui),ci=Dr.getCharCode(ui);let Ni=0,os=null,Cs=null,As=null,za=Gr;const ss=!(bt===l.WritingMode.horizontal||!Ht&&!vu(ci)||Ht&&(tp[ci]||(qr=ci,zt.Arabic(qr)||zt["Arabic Supplement"](qr)||zt["Arabic Extended-A"](qr)||zt["Arabic Presentation Forms-A"](qr)||zt["Arabic Presentation Forms-B"](qr))));if(In.imageName){const Ro=Ft[In.imageName];if(!Ro)continue;As=In.imageName,mt.iconsInText=mt.iconsInText||!0,Cs=Ro.paddedRect;const eo=Ro.displaySize;In.scale=In.scale*Gr/bn,os={width:eo[0],height:eo[1],left:Ki,top:-Hx,advance:ss?eo[1]:eo[0]},Ni=Si+(Gr-eo[1]*In.scale),za=os.advance;const Oa=ss?eo[0]*In.scale-Gr*Wr:eo[1]*In.scale-Gr*Wr;Oa>0&&Oa>Qi&&(Qi=Oa)}else{const Ro=Zt[In.fontStack],eo=Ro&&Ro[ci];if(eo&&eo.rect)Cs=eo.rect,os=eo.metrics;else{const Oa=jt[In.fontStack],vf=Oa&&Oa[ci];if(!vf)continue;os=vf.metrics}Ni=(Wr-In.scale)*Gr}ss?(mt.verticalizable=!0,Ji.push({glyph:ci,imageName:As,x:tr,y:or+Ni,vertical:ss,scale:In.scale,fontStack:In.fontStack,sectionIndex:yo,metrics:os,rect:Cs}),tr+=za*In.scale+on):(Ji.push({glyph:ci,imageName:As,x:tr,y:or+Ni,vertical:ss,scale:In.scale,fontStack:In.fontStack,sectionIndex:yo,metrics:os,rect:Cs}),tr+=os.advance*In.scale+on)}Ji.length!==0&&(Zr=Math.max(tr-on,Zr),wP(Ji,0,Ji.length-1,ji,Qi)),tr=0;const Tr=It*Wr+Qi;Bi.lineOffset=Math.max(Qi,Si),or+=Tr,go=Math.max(Tr,go),++jr}var qr;const li=or-ff,{horizontalAlign:Yi,verticalAlign:Di}=py(Bt);(function(Dr,Wr,Si,Bi,Ji,Qi,Tr,ui,In){const yo=(Wr-Si)*Ji;let ci=0;ci=Qi!==Tr?-ui*Bi-ff:(-Bi*In+.5)*Tr;for(const Ni of Dr)for(const os of Ni.positionedGlyphs)os.x+=yo,os.y+=ci})(mt.positionedLines,ji,Yi,Di,Zr,go,It,li,Rt.length),mt.top+=-Di*li,mt.bottom=mt.top+li,mt.left+=-Yi*Zr,mt.right=mt.left+Zr}(it,n,s,h,Ne,x,T,P,ee,R,ue,Pe),!function(mt){for(const jt of mt)if(jt.positionedGlyphs.length!==0)return!1;return!0}(tt)&&it}const tp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_P={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Kx(o,n,s,h,p,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Gr/v+p:0}{const x=s[n.fontStack],T=x&&x[o];return T?T.metrics.advance*n.scale+p:0}}function Yx(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function xP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Jx(o,n,s,h,p,v){let x=null,T=Yx(n,s,p,v);for(const P of h){const R=Yx(n-P.x,s,p,v)+P.badness;R<=T&&(x=P,T=R)}return{index:o,x:n,priorBreak:x,badness:T}}function Qx(o){return o?Qx(o.priorBreak).concat(o.index):[]}function dy(o,n,s,h,p,v,x){if(v!=="point")return[];if(!o)return[];const T=[],P=function(ue,de,ge,Pe,je,Ne){let et=0;for(let We=0;We<ue.length();We++){const tt=ue.getSection(We);et+=Kx(ue.getCharCode(We),tt,Pe,je,de,Ne)}return et/Math.max(1,Math.ceil(et/ge))}(o,n,s,h,p,x),R=o.text.indexOf("")>=0;let X=0;for(let ue=0;ue<o.length();ue++){const de=o.getSection(ue),ge=o.getCharCode(ue);if(tp[ge]||(X+=Kx(ge,de,h,p,n,x)),ue<o.length()-1){const Pe=!((ee=ge)<11904||!(zt["Bopomofo Extended"](ee)||zt.Bopomofo(ee)||zt["CJK Compatibility Forms"](ee)||zt["CJK Compatibility Ideographs"](ee)||zt["CJK Compatibility"](ee)||zt["CJK Radicals Supplement"](ee)||zt["CJK Strokes"](ee)||zt["CJK Symbols and Punctuation"](ee)||zt["CJK Unified Ideographs Extension A"](ee)||zt["CJK Unified Ideographs"](ee)||zt["Enclosed CJK Letters and Months"](ee)||zt["Halfwidth and Fullwidth Forms"](ee)||zt.Hiragana(ee)||zt["Ideographic Description Characters"](ee)||zt["Kangxi Radicals"](ee)||zt["Katakana Phonetic Extensions"](ee)||zt.Katakana(ee)||zt["Vertical Forms"](ee)||zt["Yi Radicals"](ee)||zt["Yi Syllables"](ee)));(_P[ge]||Pe||de.imageName)&&T.push(Jx(ue+1,X,P,T,xP(ge,o.getCharCode(ue+1),Pe&&R),!1))}}var ee;return Qx(Jx(o.length(),X,P,T,0,!0))}function py(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function wP(o,n,s,h,p){if(!h&&!p)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*h;for(let T=n;T<=s;T++)o[T].x-=x,o[T].y+=p}function bP(o,n,s){const{horizontalAlign:h,verticalAlign:p}=py(s),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function ew(o,n,s,h,p,v){const x=o.image;let T;if(x.content){const je=x.content,Ne=x.pixelRatio||1;T=[je[0]/Ne,je[1]/Ne,x.displaySize[0]-je[2]/Ne,x.displaySize[1]-je[3]/Ne]}const P=n.left*v,R=n.right*v;let X,ee,ue,de;s==="width"||s==="both"?(de=p[0]+P-h[3],ee=p[0]+R+h[1]):(de=p[0]+(P+R-x.displaySize[0])/2,ee=de+x.displaySize[0]);const ge=n.top*v,Pe=n.bottom*v;return s==="height"||s==="both"?(X=p[1]+ge-h[0],ue=p[1]+Pe+h[2]):(X=p[1]+(ge+Pe-x.displaySize[1])/2,ue=X+x.displaySize[1]),{image:x,top:X,right:ee,bottom:ue,left:de,collisionPadding:T}}const pf=255,ta=128,Cl=pf*ta;function tw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new rr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const T=h[v],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:T,maxZoom:P,minSize:s.evaluate(new rr(T)),maxSize:s.evaluate(new rr(P)),interpolationType:p}}}function my(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}const EP=Sl.VectorTileFeature.types,SP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function np(o,n,s,h,p,v,x,T,P,R,X,ee,ue){const de=T?Math.min(Cl,Math.round(T[0])):0,ge=T?Math.min(Cl,Math.round(T[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),v,x,(de<<1)+(P?1:0),ge,16*R,16*X,256*ee,256*ue)}function gy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function TP(o){for(const n of o.sections)if(Bd(n.text))return!0;return!1}class yy{constructor(n){this.layoutVertexArray=new xt,this.indexArray=new nn,this.programConfigurations=n,this.segments=new rn,this.dynamicLayoutVertexArray=new Ct,this.opacityVertexArray=new Gt,this.hasVisibleVertices=!1,this.placedSymbolArray=new B}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,nP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,rP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,SP,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}At("SymbolBuffers",yy);class vy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new rn,this.collisionVertexArray=new Ot}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,iP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}At("CollisionBuffers",vy);class Ic{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qg([]),this.placementViewportMatrix=qg([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tw(this.zoom,s["text-size"]),this.iconSizeData=tw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=my(h,"text-overlap","text-allow-overlap")!=="never"||my(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new yy(new Ma(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new yy(new Ma(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new he,this.lineVertexArray=new Ie,this.symbolInstances=new Y,this.textAnchorOffsets=new Oe}calculateGlyphDependencies(n,s,h,p,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||p)&&v){const T=hf[n.charAt(x)];T&&(s[T.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),T=v.get("text-field"),P=v.get("icon-image"),R=(T.value.kind!=="constant"||T.value.value instanceof Yn&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),X=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,ee=v.get("symbol-sort-key");if(this.features=[],!R&&!X)return;const ue=s.iconDependencies,de=s.glyphDependencies,ge=s.availableImages,Pe=new rr(this.zoom);for(const{feature:je,id:Ne,index:et,sourceLayerIndex:We}of n){const tt=p._featureFilter.needGeometry,it=ea(je,tt);if(!p._featureFilter.filter(Pe,it,h))continue;let mt,jt;if(tt||(it.geometry=Ts(je)),R){const Ft=p.getValueAndResolveTokens("text-field",it,h,ge),Rt=Yn.factory(Ft);TP(Rt)&&(this.hasRTLText=!0),(!this.hasRTLText||Hh()==="unavailable"||this.hasRTLText&&po.isParsed())&&(mt=sP(Rt,p,it))}if(X){const Ft=p.getValueAndResolveTokens("icon-image",it,h,ge);jt=Ft instanceof Mi?Ft:Mi.fromString(Ft)}if(!mt&&!jt)continue;const Zt=this.sortFeaturesByKey?ee.evaluate(it,{},h):void 0;if(this.features.push({id:Ne,text:mt,icon:jt,index:et,sourceLayerIndex:We,geometry:it.geometry,properties:je.properties,type:EP[je.type],sortKey:Zt}),jt&&(ue[jt.name]=!0),mt){const Ft=x.evaluate(it,{},h).join(","),Rt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const It of mt.sections)if(It.image)ue[It.image.name]=!0;else{const Bt=bs(mt.toString()),Lt=It.fontStack||Ft,bt=de[Lt]=de[Lt]||{};this.calculateGlyphDependencies(It.text,bt,Rt,this.allowVerticalPlacement,Bt)}}}v.get("symbol-placement")==="line"&&(this.features=function(je){const Ne={},et={},We=[];let tt=0;function it(Ft){We.push(je[Ft]),tt++}function mt(Ft,Rt,It){const Bt=et[Ft];return delete et[Ft],et[Rt]=Bt,We[Bt].geometry[0].pop(),We[Bt].geometry[0]=We[Bt].geometry[0].concat(It[0]),Bt}function jt(Ft,Rt,It){const Bt=Ne[Rt];return delete Ne[Rt],Ne[Ft]=Bt,We[Bt].geometry[0].shift(),We[Bt].geometry[0]=It[0].concat(We[Bt].geometry[0]),Bt}function Zt(Ft,Rt,It){const Bt=It?Rt[0][Rt[0].length-1]:Rt[0][0];return`${Ft}:${Bt.x}:${Bt.y}`}for(let Ft=0;Ft<je.length;Ft++){const Rt=je[Ft],It=Rt.geometry,Bt=Rt.text?Rt.text.toString():null;if(!Bt){it(Ft);continue}const Lt=Zt(Bt,It),bt=Zt(Bt,It,!0);if(Lt in et&&bt in Ne&&et[Lt]!==Ne[bt]){const on=jt(Lt,bt,It),Ht=mt(Lt,bt,We[on].geometry);delete Ne[Lt],delete et[bt],et[Zt(Bt,We[Ht].geometry,!0)]=Ht,We[on].geometry=null}else Lt in et?mt(Lt,bt,It):bt in Ne?jt(Lt,bt,It):(it(Ft),Ne[Lt]=tt-1,et[bt]=tt-1)}return We.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((je,Ne)=>je.sortKey-Ne.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let T=n.segment+1;T<s.length;T++)x[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:p},T<s.length-1&&(p+=s[T+1].dist(s[T]));for(let T=n.segment||0;T>=0;T--)x[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:v},T>0&&(v+=s[T-1].dist(s[T]));for(let T=0;T<s.length;T++){const P=x[T];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,v,x,T,P,R,X,ee,ue){const de=n.indexArray,ge=n.layoutVertexArray,Pe=n.segments.prepareSegment(4*s.length,ge,de,this.canOverlap?x.sortKey:void 0),je=this.glyphOffsetArray.length,Ne=Pe.vertexLength,et=this.allowVerticalPlacement&&T===l.WritingMode.vertical?Math.PI/2:0,We=x.text&&x.text.sections;for(let tt=0;tt<s.length;tt++){const{tl:it,tr:mt,bl:jt,br:Zt,tex:Ft,pixelOffsetTL:Rt,pixelOffsetBR:It,minFontScaleX:Bt,minFontScaleY:Lt,glyphOffset:bt,isSDF:on,sectionIndex:Ht}=s[tt],bn=Pe.vertexLength,tr=bt[1];np(ge,P.x,P.y,it.x,tr+it.y,Ft.x,Ft.y,h,on,Rt.x,Rt.y,Bt,Lt),np(ge,P.x,P.y,mt.x,tr+mt.y,Ft.x+Ft.w,Ft.y,h,on,It.x,Rt.y,Bt,Lt),np(ge,P.x,P.y,jt.x,tr+jt.y,Ft.x,Ft.y+Ft.h,h,on,Rt.x,It.y,Bt,Lt),np(ge,P.x,P.y,Zt.x,tr+Zt.y,Ft.x+Ft.w,Ft.y+Ft.h,h,on,It.x,It.y,Bt,Lt),gy(n.dynamicLayoutVertexArray,P,et),de.emplaceBack(bn,bn+1,bn+2),de.emplaceBack(bn+1,bn+2,bn+3),Pe.vertexLength+=4,Pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),tt!==s.length-1&&Ht===s[tt+1].sectionIndex||n.programConfigurations.populatePaintArrays(ge.length,x,x.index,{},ue,We&&We[Ht])}n.placedSymbolArray.emplaceBack(P.x,P.y,je,this.glyphOffsetArray.length-je,Ne,R,X,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],T,0,!1,0,ee)}_addCollisionDebugVertex(n,s,h,p,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,p,v,x,T){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),R=P.vertexLength,X=v.layoutVertexArray,ee=v.collisionVertexArray,ue=T.anchorX,de=T.anchorY;this._addCollisionDebugVertex(X,ee,x,ue,de,new E(n,s)),this._addCollisionDebugVertex(X,ee,x,ue,de,new E(h,s)),this._addCollisionDebugVertex(X,ee,x,ue,de,new E(h,p)),this._addCollisionDebugVertex(X,ee,x,ue,de,new E(n,p)),P.vertexLength+=4;const ge=v.indexArray;ge.emplaceBack(R,R+1),ge.emplaceBack(R+1,R+2),ge.emplaceBack(R+2,R+3),ge.emplaceBack(R+3,R),P.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vy(Sn,Bx.members,$t),this.iconCollisionBox=new vy(Sn,Bx.members,$t);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,v,x,T,P,R){const X={};for(let ee=s;ee<h;ee++){const ue=n.get(ee);X.textBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},X.textFeatureIndex=ue.featureIndex;break}for(let ee=p;ee<v;ee++){const ue=n.get(ee);X.verticalTextBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},X.verticalTextFeatureIndex=ue.featureIndex;break}for(let ee=x;ee<T;ee++){const ue=n.get(ee);X.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},X.iconFeatureIndex=ue.featureIndex;break}for(let ee=P;ee<R;ee++){const ue=n.get(ee);X.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},X.verticalIconFeatureIndex=ue.featureIndex;break}return X}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],v=[],x=[];for(let T=0;T<this.symbolInstances.length;++T){x.push(T);const P=this.symbolInstances.get(T);p.push(0|Math.round(s*P.anchorX+h*P.anchorY)),v.push(P.featureIndex)}return x.sort((T,P)=>p[T]-p[P]||v[P]-v[T]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let nw,rw;At("SymbolBucket",Ic,{omit:["layers","collisionBoxArray","features","compareText"]}),Ic.MAX_GLYPHS=65535,Ic.addDynamicAttributes=gy;var _y={get paint(){return rw=rw||new Oi({"icon-opacity":new ln(Je.paint_symbol["icon-opacity"]),"icon-color":new ln(Je.paint_symbol["icon-color"]),"icon-halo-color":new ln(Je.paint_symbol["icon-halo-color"]),"icon-halo-width":new ln(Je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ln(Je.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(Je.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(Je.paint_symbol["icon-translate-anchor"]),"text-opacity":new ln(Je.paint_symbol["text-opacity"]),"text-color":new ln(Je.paint_symbol["text-color"],{runtimeType:st,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ln(Je.paint_symbol["text-halo-color"]),"text-halo-width":new ln(Je.paint_symbol["text-halo-width"]),"text-halo-blur":new ln(Je.paint_symbol["text-halo-blur"]),"text-translate":new Kt(Je.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(Je.paint_symbol["text-translate-anchor"])})},get layout(){return nw=nw||new Oi({"symbol-placement":new Kt(Je.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(Je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(Je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ln(Je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(Je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kt(Je.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kt(Je.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kt(Je.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(Je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(Je.layout_symbol["icon-rotation-alignment"]),"icon-size":new ln(Je.layout_symbol["icon-size"]),"icon-text-fit":new Kt(Je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kt(Je.layout_symbol["icon-text-fit-padding"]),"icon-image":new ln(Je.layout_symbol["icon-image"]),"icon-rotate":new ln(Je.layout_symbol["icon-rotate"]),"icon-padding":new ln(Je.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(Je.layout_symbol["icon-keep-upright"]),"icon-offset":new ln(Je.layout_symbol["icon-offset"]),"icon-anchor":new ln(Je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(Je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(Je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(Je.layout_symbol["text-rotation-alignment"]),"text-field":new ln(Je.layout_symbol["text-field"]),"text-font":new ln(Je.layout_symbol["text-font"]),"text-size":new ln(Je.layout_symbol["text-size"]),"text-max-width":new ln(Je.layout_symbol["text-max-width"]),"text-line-height":new Kt(Je.layout_symbol["text-line-height"]),"text-letter-spacing":new ln(Je.layout_symbol["text-letter-spacing"]),"text-justify":new ln(Je.layout_symbol["text-justify"]),"text-radial-offset":new ln(Je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(Je.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ln(Je.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ln(Je.layout_symbol["text-anchor"]),"text-max-angle":new Kt(Je.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(Je.layout_symbol["text-writing-mode"]),"text-rotate":new ln(Je.layout_symbol["text-rotate"]),"text-padding":new Kt(Je.layout_symbol["text-padding"]),"text-keep-upright":new Kt(Je.layout_symbol["text-keep-upright"]),"text-transform":new ln(Je.layout_symbol["text-transform"]),"text-offset":new ln(Je.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(Je.layout_symbol["text-allow-overlap"]),"text-overlap":new Kt(Je.layout_symbol["text-overlap"]),"text-ignore-placement":new Kt(Je.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(Je.layout_symbol["text-optional"])})}};class iw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:D,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}At("FormatSectionOverride",iw,{omit:["defaultValue"]});class rp extends ns{constructor(n){super(n,_y)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const v=this.layout.get(n).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||xs(x.value)||!v?v:function(T,P){return P.replace(/{([^{}]+)}/g,(R,X)=>X in T?String(T[X]):"")}(s.properties,v)}createBucket(n){return new Ic(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of _y.paint.overridableProperties){if(!rp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new iw(s),p=new nr(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new ba("source",p):new Vn("composite",p,s.value.zoomStops),this.paint._values[n]=new Mo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&rp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=_y.paint.properties[s];let v=!1;const x=T=>{for(const P of T)if(p.overrides&&p.overrides.hasOverride(P))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Yn)x(h.value.value.sections);else if(h.value.kind==="source"){const T=R=>{v||(R instanceof Yr&&pr(R.value)===An?x(R.value.sections):R instanceof hl?x(R.sections):R.eachChild(T))},P=h.value;P._styleExpression&&T(P._styleExpression.expression)}return v}}let ow;var CP={get paint(){return ow=ow||new Oi({"background-color":new Kt(Je.paint_background["background-color"]),"background-pattern":new Xh(Je.paint_background["background-pattern"]),"background-opacity":new Kt(Je.paint_background["background-opacity"])})}};class AP extends ns{constructor(n){super(n,CP)}}let sw;var IP={get paint(){return sw=sw||new Oi({"raster-opacity":new Kt(Je.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kt(Je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(Je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(Je.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(Je.paint_raster["raster-saturation"]),"raster-contrast":new Kt(Je.paint_raster["raster-contrast"]),"raster-resampling":new Kt(Je.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(Je.paint_raster["raster-fade-duration"])})}};class PP extends ns{constructor(n){super(n,IP)}}class MP extends ns{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class kP{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const xy=63710088e-1;class Al{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Al(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return xy*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Al)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Al(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Al(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const aw=2*Math.PI*xy;function lw(o){return aw*Math.cos(o*Math.PI/180)}function uw(o){return(180+o)/360}function cw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function hw(o,n){return o/lw(n)}function wy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class ip{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Al.convert(n);return new ip(uw(h.lng),cw(h.lat),hw(s,h.lat))}toLngLat(){return new Al(360*this.x-180,wy(this.y))}toAltitude(){return this.z*lw(wy(this.y))}meterInMercatorCoordinateUnits(){return 1/aw*(n=wy(this.y),1/Math.cos(n*Math.PI/180));var n}}function fw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class by{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=mf(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(x=this.y,T=this.z,P=fw(256*(v=this.x),256*(x=Math.pow(2,T)-x-1),T),R=fw(256*(v+1),256*(x+1),T),P[0]+","+P[1]+","+R[0]+","+R[1]);var v,x,T,P,R;const X=function(ee,ue,de){let ge,Pe="";for(let je=ee;je>0;je--)ge=1<<je-1,Pe+=(ue&ge?1:0)+(de&ge?2:0);return Pe}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,X).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new E((n.x*s-this.x)*yr,(n.y*s-this.y)*yr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=mf(n,s.z,s.z,s.x,s.y)}}class Oo{constructor(n,s,h,p,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new by(h,+p,+v),this.key=mf(s,n,h,p,v)}clone(){return new Oo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Oo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Oo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?mf(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):mf(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Oo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Oo(s,this.wrap,s,h,p),new Oo(s,this.wrap,s,h+1,p),new Oo(s,this.wrap,s,h,p+1),new Oo(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Oo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Oo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new ip(n.x-this.wrap,n.y))}}function mf(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+h).toString(36)+s.toString(36)+n.toString(36)}At("CanonicalTileID",by),At("OverscaledTileID",Oo,{omit:["posMatrix"]});class pw{constructor(n,s,h){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void Z(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const p=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(let v=0;v<p;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(p,v)]=this.data[this._idx(p-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,p)]=this.data[this._idx(v,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let v=0;v<p;v++)for(let x=0;x<p;x++){const T=this.get(v,x);T>this.max&&(this.max=T),T<this.min&&(this.min=T)}}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[p],h[p+1],h[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}_unpackMapbox(n,s,h){return(256*n*256+256*s+h)/10-1e4}_unpackTerrarium(n,s,h){return 256*n+s+h/256-32768}getPixels(){return new zo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,T=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=T-1;break;case 1:T=x+1}const P=-s*this.dim,R=-h*this.dim;for(let X=x;X<T;X++)for(let ee=p;ee<v;ee++)this.data[this._idx(ee,X)]=n.data[this._idx(ee+P,X+R)]}}At("DEMData",pw);class mw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class gw{constructor(n,s,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class yw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Jn(yr,16,0),this.grid3D=new Jn(yr,16,0),this.featureIndexArray=new Ke,this.promoteId=s}insert(n,s,h,p,v,x){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const P=x?this.grid3D:this.grid;for(let R=0;R<s.length;R++){const X=s[R],ee=[1/0,1/0,-1/0,-1/0];for(let ue=0;ue<X.length;ue++){const de=X[ue];ee[0]=Math.min(ee[0],de.x),ee[1]=Math.min(ee[1],de.y),ee[2]=Math.max(ee[2],de.x),ee[3]=Math.max(ee[3],de.y)}ee[0]<yr&&ee[1]<yr&&ee[2]>=0&&ee[3]>=0&&P.insert(T,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sl.VectorTile(new cy(this.rawTileData)).layers,this.sourceLayerCoder=new mw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const v=n.params||{},x=yr/n.tileSize/n.scale,T=Co(v.filter),P=n.queryGeometry,R=n.queryPadding*x,X=_w(P),ee=this.grid.query(X.minX-R,X.minY-R,X.maxX+R,X.maxY+R),ue=_w(n.cameraQueryGeometry),de=this.grid3D.query(ue.minX-R,ue.minY-R,ue.maxX+R,ue.maxY+R,(je,Ne,et,We)=>function(tt,it,mt,jt,Zt){for(const Rt of tt)if(it<=Rt.x&&mt<=Rt.y&&jt>=Rt.x&&Zt>=Rt.y)return!0;const Ft=[new E(it,mt),new E(it,Zt),new E(jt,Zt),new E(jt,mt)];if(tt.length>2){for(const Rt of Ft)if(wc(tt,Rt))return!0}for(let Rt=0;Rt<tt.length-1;Rt++)if(uI(tt[Rt],tt[Rt+1],Ft))return!0;return!1}(n.cameraQueryGeometry,je-R,Ne-R,et+R,We+R));for(const je of de)ee.push(je);ee.sort(LP);const ge={};let Pe;for(let je=0;je<ee.length;je++){const Ne=ee[je];if(Ne===Pe)continue;Pe=Ne;const et=this.featureIndexArray.get(Ne);let We=null;this.loadMatchingFeature(ge,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,T,v.layers,v.availableImages,s,h,p,(tt,it,mt)=>(We||(We=Ts(tt)),it.queryIntersectsFeature(P,tt,mt,We,this.z,n.transform,x,n.pixelPosMatrix)))}return ge}loadMatchingFeature(n,s,h,p,v,x,T,P,R,X,ee){const ue=this.bucketLayerIDs[s];if(x&&!function(je,Ne){for(let et=0;et<je.length;et++)if(Ne.indexOf(je[et])>=0)return!0;return!1}(x,ue))return;const de=this.sourceLayerCoder.decode(h),ge=this.vtLayers[de].feature(p);if(v.needGeometry){const je=ea(ge,!0);if(!v.filter(new rr(this.tileID.overscaledZ),je,this.tileID.canonical))return}else if(!v.filter(new rr(this.tileID.overscaledZ),ge))return;const Pe=this.getId(ge,de);for(let je=0;je<ue.length;je++){const Ne=ue[je];if(x&&x.indexOf(Ne)<0)continue;const et=P[Ne];if(!et)continue;let We={};Pe&&X&&(We=X.getState(et.sourceLayer||"_geojsonTileLayer",Pe));const tt=U({},R[Ne]);tt.paint=vw(tt.paint,et.paint,ge,We,T),tt.layout=vw(tt.layout,et.layout,ge,We,T);const it=!ee||ee(ge,et,We);if(!it)continue;const mt=new gw(ge,this.z,this.x,this.y,Pe);mt.layer=tt;let jt=n[Ne];jt===void 0&&(jt=n[Ne]=[]),jt.push({featureIndex:p,feature:mt,intersectionZ:it})}}lookupSymbolFeatures(n,s,h,p,v,x,T,P){const R={};this.loadVTLayers();const X=Co(v);for(const ee of n)this.loadMatchingFeature(R,h,p,ee,X,x,T,P,s);return R}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function vw(o,n,s,h,p){return W(o,(v,x)=>{const T=n instanceof wu?n.get(x):null;return T&&T.evaluate?T.evaluate(s,h,p):T})}function _w(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:s,maxX:h,maxY:p}}function LP(o,n){return n-o}function xw(o,n,s,h,p){const v=[];for(let x=0;x<o.length;x++){const T=o[x];let P;for(let R=0;R<T.length-1;R++){let X=T[R],ee=T[R+1];X.x<n&&ee.x<n||(X.x<n?X=new E(n,X.y+(n-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x<n&&(ee=new E(n,X.y+(n-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y<s&&ee.y<s||(X.y<s?X=new E(X.x+(s-X.y)/(ee.y-X.y)*(ee.x-X.x),s)._round():ee.y<s&&(ee=new E(X.x+(s-X.y)/(ee.y-X.y)*(ee.x-X.x),s)._round()),X.x>=h&&ee.x>=h||(X.x>=h?X=new E(h,X.y+(h-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x>=h&&(ee=new E(h,X.y+(h-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y>=p&&ee.y>=p||(X.y>=p?X=new E(X.x+(p-X.y)/(ee.y-X.y)*(ee.x-X.x),p)._round():ee.y>=p&&(ee=new E(X.x+(p-X.y)/(ee.y-X.y)*(ee.x-X.x),p)._round()),P&&X.equals(P[P.length-1])||(P=[X],v.push(P)),P.push(ee)))))}}return v}At("FeatureIndex",yw,{omit:["rawTileData","sourceLayerCoder"]});class Il extends E{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Il(this.x,this.y,this.angle,this.segment)}}function ww(o,n,s,h,p){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,T=0;for(;T>-s/2;){if(x--,x<0)return!1;T-=o[x].dist(v),v=o[x]}T+=o[x].dist(o[x+1]),x++;const P=[];let R=0;for(;T<s/2;){const X=o[x],ee=o[x+1];if(!ee)return!1;let ue=o[x-1].angleTo(X)-X.angleTo(ee);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:T,angleDelta:ue}),R+=ue;T-P[0].distance>h;)R-=P.shift().angleDelta;if(R>p)return!1;x++,T+=X.dist(ee)}return!0}function bw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function Ew(o,n,s){return o?.6*n*s:0}function Sw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function zP(o,n,s,h,p,v){const x=Ew(s,p,v),T=Sw(s,h)*v;let P=0;const R=bw(o)/2;for(let X=0;X<o.length-1;X++){const ee=o[X],ue=o[X+1],de=ee.dist(ue);if(P+de>R){const ge=(R-P)/de,Pe=vi.number(ee.x,ue.x,ge),je=vi.number(ee.y,ue.y,ge),Ne=new Il(Pe,je,ue.angleTo(ee),X);return Ne._round(),!x||ww(o,Ne,T,x,n)?Ne:void 0}P+=de}}function OP(o,n,s,h,p,v,x,T,P){const R=Ew(h,v,x),X=Sw(h,p),ee=X*x,ue=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return n-ee<n/4&&(n=ee+n/4),Tw(o,ue?n/2*T%n:(X/2+2*v)*x*T%n,n,R,s,ee,ue,!1,P)}function Tw(o,n,s,h,p,v,x,T,P){const R=v/2,X=bw(o);let ee=0,ue=n-s,de=[];for(let ge=0;ge<o.length-1;ge++){const Pe=o[ge],je=o[ge+1],Ne=Pe.dist(je),et=je.angleTo(Pe);for(;ue+s<ee+Ne;){ue+=s;const We=(ue-ee)/Ne,tt=vi.number(Pe.x,je.x,We),it=vi.number(Pe.y,je.y,We);if(tt>=0&&tt<P&&it>=0&&it<P&&ue-R>=0&&ue+R<=X){const mt=new Il(tt,it,et,ge);mt._round(),h&&!ww(o,mt,v,h,p)||de.push(mt)}}ee+=Ne}return T||de.length||x||(de=Tw(o,ee/2,s,h,p,v,x,!0,P)),de}At("Anchor",Il);const Pc=Ki;function Cw(o,n,s,h){const p=[],v=o.image,x=v.pixelRatio,T=v.paddedRect.w-2*Pc,P=v.paddedRect.h-2*Pc,R=o.right-o.left,X=o.bottom-o.top,ee=v.stretchX||[[0,T]],ue=v.stretchY||[[0,P]],de=(It,Bt)=>It+Bt[1]-Bt[0],ge=ee.reduce(de,0),Pe=ue.reduce(de,0),je=T-ge,Ne=P-Pe;let et=0,We=ge,tt=0,it=Pe,mt=0,jt=je,Zt=0,Ft=Ne;if(v.content&&h){const It=v.content;et=op(ee,0,It[0]),tt=op(ue,0,It[1]),We=op(ee,It[0],It[2]),it=op(ue,It[1],It[3]),mt=It[0]-et,Zt=It[1]-tt,jt=It[2]-It[0]-We,Ft=It[3]-It[1]-it}const Rt=(It,Bt,Lt,bt)=>{const on=sp(It.stretch-et,We,R,o.left),Ht=ap(It.fixed-mt,jt,It.stretch,ge),bn=sp(Bt.stretch-tt,it,X,o.top),tr=ap(Bt.fixed-Zt,Ft,Bt.stretch,Pe),or=sp(Lt.stretch-et,We,R,o.left),Zr=ap(Lt.fixed-mt,jt,Lt.stretch,ge),go=sp(bt.stretch-tt,it,X,o.top),ji=ap(bt.fixed-Zt,Ft,bt.stretch,Pe),jr=new E(on,bn),qr=new E(or,bn),li=new E(or,go),Yi=new E(on,go),Di=new E(Ht/x,tr/x),Dr=new E(Zr/x,ji/x),Wr=n*Math.PI/180;if(Wr){const Ji=Math.sin(Wr),Qi=Math.cos(Wr),Tr=[Qi,-Ji,Ji,Qi];jr._matMult(Tr),qr._matMult(Tr),Yi._matMult(Tr),li._matMult(Tr)}const Si=It.stretch+It.fixed,Bi=Bt.stretch+Bt.fixed;return{tl:jr,tr:qr,bl:Yi,br:li,tex:{x:v.paddedRect.x+Pc+Si,y:v.paddedRect.y+Pc+Bi,w:Lt.stretch+Lt.fixed-Si,h:bt.stretch+bt.fixed-Bi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Di,pixelOffsetBR:Dr,minFontScaleX:jt/x/R,minFontScaleY:Ft/x/X,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const It=Aw(ee,je,ge),Bt=Aw(ue,Ne,Pe);for(let Lt=0;Lt<It.length-1;Lt++){const bt=It[Lt],on=It[Lt+1];for(let Ht=0;Ht<Bt.length-1;Ht++)p.push(Rt(bt,Bt[Ht],on,Bt[Ht+1]))}}else p.push(Rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:P+1}));return p}function op(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function Aw(o,n,s){const h=[{fixed:-Pc,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:n+Pc,stretch:s}),h}function sp(o,n,s,h){return o/n*s+h}function ap(o,n,s,h){return o-n*s/h}class lp{constructor(n,s,h,p,v,x,T,P,R,X){if(this.boxStartIndex=n.length,R){let ee=x.top,ue=x.bottom;const de=x.collisionPadding;de&&(ee-=de[1],ue+=de[3]);let ge=ue-ee;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let ee=x.top*T-P[0],ue=x.bottom*T+P[2],de=x.left*T-P[3],ge=x.right*T+P[1];const Pe=x.collisionPadding;if(Pe&&(de-=Pe[0]*T,ee-=Pe[1]*T,ge+=Pe[2]*T,ue+=Pe[3]*T),X){const je=new E(de,ee),Ne=new E(ge,ee),et=new E(de,ue),We=new E(ge,ue),tt=X*Math.PI/180;je._rotate(tt),Ne._rotate(tt),et._rotate(tt),We._rotate(tt),de=Math.min(je.x,Ne.x,et.x,We.x),ge=Math.max(je.x,Ne.x,et.x,We.x),ee=Math.min(je.y,Ne.y,et.y,We.y),ue=Math.max(je.y,Ne.y,et.y,We.y)}n.emplaceBack(s.x,s.y,de,ee,ge,ue,h,p,v)}this.boxEndIndex=n.length}}class RP{constructor(n=[],s=FP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(p,x)>=0)break;s[n]=x,n=v}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,v=s[n];for(;n<p;){let x=1+(n<<1),T=s[x];const P=x+1;if(P<this.length&&h(s[P],T)<0&&(x=P,T=s[P]),h(T,v)>=0)break;s[n]=T,n=x}s[n]=v}}function FP(o,n){return o<n?-1:o>n?1:0}function jP(o,n=1,s=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const T=o[0];for(let de=0;de<T.length;de++){const ge=T[de];(!de||ge.x<h)&&(h=ge.x),(!de||ge.y<p)&&(p=ge.y),(!de||ge.x>v)&&(v=ge.x),(!de||ge.y>x)&&(x=ge.y)}const P=Math.min(v-h,x-p);let R=P/2;const X=new RP([],DP);if(P===0)return new E(h,p);for(let de=h;de<v;de+=P)for(let ge=p;ge<x;ge+=P)X.push(new Mc(de+R,ge+R,R,o));let ee=function(de){let ge=0,Pe=0,je=0;const Ne=de[0];for(let et=0,We=Ne.length,tt=We-1;et<We;tt=et++){const it=Ne[et],mt=Ne[tt],jt=it.x*mt.y-mt.x*it.y;Pe+=(it.x+mt.x)*jt,je+=(it.y+mt.y)*jt,ge+=3*jt}return new Mc(Pe/ge,je/ge,0,de)}(o),ue=X.length;for(;X.length;){const de=X.pop();(de.d>ee.d||!ee.d)&&(ee=de,s&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,ue)),de.max-ee.d<=n||(R=de.h/2,X.push(new Mc(de.p.x-R,de.p.y-R,R,o)),X.push(new Mc(de.p.x+R,de.p.y-R,R,o)),X.push(new Mc(de.p.x-R,de.p.y+R,R,o)),X.push(new Mc(de.p.x+R,de.p.y+R,R,o)),ue+=4)}return s&&(console.log(`num probes: ${ue}`),console.log(`best distance: ${ee.d}`)),ee.p}function DP(o,n){return n.max-o.max}function Mc(o,n,s,h){this.p=new E(o,n),this.h=s,this.d=function(p,v){let x=!1,T=1/0;for(let P=0;P<v.length;P++){const R=v[P];for(let X=0,ee=R.length,ue=ee-1;X<ee;ue=X++){const de=R[X],ge=R[ue];de.y>p.y!=ge.y>p.y&&p.x<(ge.x-de.x)*(p.y-de.y)/(ge.y-de.y)+de.x&&(x=!x),T=Math.min(T,cx(p,de,ge))}}return(x?1:-1)*Math.sqrt(T)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var ai;l.TextAnchorEnum=void 0,(ai=l.TextAnchorEnum||(l.TextAnchorEnum={}))[ai.center=1]="center",ai[ai.left=2]="left",ai[ai.right=3]="right",ai[ai.top=4]="top",ai[ai.bottom=5]="bottom",ai[ai["top-left"]=6]="top-left",ai[ai["top-right"]=7]="top-right",ai[ai["bottom-left"]=8]="bottom-left",ai[ai["bottom-right"]=9]="bottom-right";const Pl=7,Ey=Number.POSITIVE_INFINITY;function Iw(o,n){return n[1]!==Ey?function(s,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-Pl;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+Pl}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(s,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Pl;break;case"bottom-right":case"bottom-left":v=-x+Pl;break;case"bottom":v=-h+Pl;break;case"top":v=h-Pl}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function Pw(o,n,s){var h;const p=o.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const T=v.values,P=[];for(let R=0;R<T.length;R+=2){const X=P[R]=T[R],ee=T[R+1].map(ue=>ue*Gr);X.startsWith("top")?ee[1]-=Pl:X.startsWith("bottom")&&(ee[1]+=Pl),P[R+1]=ee}return new ar(P)}const x=p.get("text-variable-anchor");if(x){let T;T=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},s)*Gr,Ey]:p.get("text-offset").evaluate(n,{},s).map(R=>R*Gr);const P=[];for(const R of x)P.push(R,Iw(R,T));return new ar(P)}return null}function Sy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function BP(o,n,s,h,p,v,x,T,P,R,X){let ee=v.textMaxSize.evaluate(n,{});ee===void 0&&(ee=x);const ue=o.layers[0].layout,de=ue.get("icon-offset").evaluate(n,{},X),ge=kw(s.horizontal),Pe=x/24,je=o.tilePixelRatio*Pe,Ne=o.tilePixelRatio*ee/24,et=o.tilePixelRatio*T,We=o.tilePixelRatio*ue.get("symbol-spacing"),tt=ue.get("text-padding")*o.tilePixelRatio,it=function(bt,on,Ht,bn=1){const tr=bt.get("icon-padding").evaluate(on,{},Ht),or=tr&&tr.values;return[or[0]*bn,or[1]*bn,or[2]*bn,or[3]*bn]}(ue,n,X,o.tilePixelRatio),mt=ue.get("text-max-angle")/180*Math.PI,jt=ue.get("text-rotation-alignment")!=="viewport"&&ue.get("symbol-placement")!=="point",Zt=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",Ft=ue.get("symbol-placement"),Rt=We/2,It=ue.get("icon-text-fit");let Bt;h&&It!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Bt=ew(h,s.vertical,It,ue.get("icon-text-fit-padding"),de,Pe)),ge&&(h=ew(h,ge,It,ue.get("icon-text-fit-padding"),de,Pe)));const Lt=(bt,on)=>{on.x<0||on.x>=yr||on.y<0||on.y>=yr||function(Ht,bn,tr,or,Zr,go,ji,jr,qr,li,Yi,Di,Dr,Wr,Si,Bi,Ji,Qi,Tr,ui,In,yo,ci,Ni,os){const Cs=Ht.addToLineVertexArray(bn,tr);let As,za,ss,Ro,eo=0,Oa=0,vf=0,Rw=0,Ly=-1,zy=-1;const Ra={};let Fw=ko("");if(Ht.allowVerticalPlacement&&or.vertical){const Ti=jr.layout.get("text-rotate").evaluate(In,{},Ni)+90;ss=new lp(qr,bn,li,Yi,Di,or.vertical,Dr,Wr,Si,Ti),ji&&(Ro=new lp(qr,bn,li,Yi,Di,ji,Ji,Qi,Si,Ti))}if(Zr){const Ti=jr.layout.get("icon-rotate").evaluate(In,{}),Fo=jr.layout.get("icon-text-fit")!=="none",Iu=Cw(Zr,Ti,ci,Fo),Ps=ji?Cw(ji,Ti,ci,Fo):void 0;za=new lp(qr,bn,li,Yi,Di,Zr,Ji,Qi,!1,Ti),eo=4*Iu.length;const Pu=Ht.iconSizeData;let na=null;Pu.kind==="source"?(na=[ta*jr.layout.get("icon-size").evaluate(In,{})],na[0]>Cl&&Z(`${Ht.layerIds[0]}: Value for "icon-size" is >= ${pf}. Reduce your "icon-size".`)):Pu.kind==="composite"&&(na=[ta*yo.compositeIconSizes[0].evaluate(In,{},Ni),ta*yo.compositeIconSizes[1].evaluate(In,{},Ni)],(na[0]>Cl||na[1]>Cl)&&Z(`${Ht.layerIds[0]}: Value for "icon-size" is >= ${pf}. Reduce your "icon-size".`)),Ht.addSymbols(Ht.icon,Iu,na,ui,Tr,In,l.WritingMode.none,bn,Cs.lineStartIndex,Cs.lineLength,-1,Ni),Ly=Ht.icon.placedSymbolArray.length-1,Ps&&(Oa=4*Ps.length,Ht.addSymbols(Ht.icon,Ps,na,ui,Tr,In,l.WritingMode.vertical,bn,Cs.lineStartIndex,Cs.lineLength,-1,Ni),zy=Ht.icon.placedSymbolArray.length-1)}const jw=Object.keys(or.horizontal);for(const Ti of jw){const Fo=or.horizontal[Ti];if(!As){Fw=ko(Fo.text);const Ps=jr.layout.get("text-rotate").evaluate(In,{},Ni);As=new lp(qr,bn,li,Yi,Di,Fo,Dr,Wr,Si,Ps)}const Iu=Fo.positionedLines.length===1;if(vf+=Mw(Ht,bn,Fo,go,jr,Si,In,Bi,Cs,or.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Iu?jw:[Ti],Ra,Ly,yo,Ni),Iu)break}or.vertical&&(Rw+=Mw(Ht,bn,or.vertical,go,jr,Si,In,Bi,Cs,l.WritingMode.vertical,["vertical"],Ra,zy,yo,Ni));const $P=As?As.boxStartIndex:Ht.collisionBoxArray.length,VP=As?As.boxEndIndex:Ht.collisionBoxArray.length,GP=ss?ss.boxStartIndex:Ht.collisionBoxArray.length,ZP=ss?ss.boxEndIndex:Ht.collisionBoxArray.length,WP=za?za.boxStartIndex:Ht.collisionBoxArray.length,HP=za?za.boxEndIndex:Ht.collisionBoxArray.length,XP=Ro?Ro.boxStartIndex:Ht.collisionBoxArray.length,qP=Ro?Ro.boxEndIndex:Ht.collisionBoxArray.length;let Is=-1;const cp=(Ti,Fo)=>Ti&&Ti.circleDiameter?Math.max(Ti.circleDiameter,Fo):Fo;Is=cp(As,Is),Is=cp(ss,Is),Is=cp(za,Is),Is=cp(Ro,Is);const Dw=Is>-1?1:0;Dw&&(Is*=os/Gr),Ht.glyphOffsetArray.length>=Ic.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),In.sortKey!==void 0&&Ht.addToSortKeyRanges(Ht.symbolInstances.length,In.sortKey);const KP=Pw(jr,In,Ni),[YP,JP]=function(Ti,Fo){const Iu=Ti.length,Ps=Fo==null?void 0:Fo.values;if((Ps==null?void 0:Ps.length)>0)for(let Pu=0;Pu<Ps.length;Pu+=2){const na=Ps[Pu+1];Ti.emplaceBack(l.TextAnchorEnum[Ps[Pu]],na[0],na[1])}return[Iu,Ti.length]}(Ht.textAnchorOffsets,KP);Ht.symbolInstances.emplaceBack(bn.x,bn.y,Ra.right>=0?Ra.right:-1,Ra.center>=0?Ra.center:-1,Ra.left>=0?Ra.left:-1,Ra.vertical||-1,Ly,zy,Fw,$P,VP,GP,ZP,WP,HP,XP,qP,li,vf,Rw,eo,Oa,Dw,0,Dr,Is,YP,JP)}(o,on,bt,s,h,p,Bt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,je,[tt,tt,tt,tt],jt,P,et,it,Zt,de,n,v,R,X,x)};if(Ft==="line")for(const bt of xw(n.geometry,0,0,yr,yr)){const on=OP(bt,We,mt,s.vertical||ge,h,24,Ne,o.overscaling,yr);for(const Ht of on)ge&&NP(o,ge.text,Rt,Ht)||Lt(bt,Ht)}else if(Ft==="line-center"){for(const bt of n.geometry)if(bt.length>1){const on=zP(bt,mt,s.vertical||ge,h,24,Ne);on&&Lt(bt,on)}}else if(n.type==="Polygon")for(const bt of ny(n.geometry,0)){const on=jP(bt,16);Lt(bt[0],new Il(on.x,on.y,0))}else if(n.type==="LineString")for(const bt of n.geometry)Lt(bt,new Il(bt[0].x,bt[0].y,0));else if(n.type==="Point")for(const bt of n.geometry)for(const on of bt)Lt([on],new Il(on.x,on.y,0))}function Mw(o,n,s,h,p,v,x,T,P,R,X,ee,ue,de,ge){const Pe=function(et,We,tt,it,mt,jt,Zt,Ft){const Rt=it.layout.get("text-rotate").evaluate(jt,{})*Math.PI/180,It=[];for(const Bt of We.positionedLines)for(const Lt of Bt.positionedGlyphs){if(!Lt.rect)continue;const bt=Lt.rect||{};let on=Hx+1,Ht=!0,bn=1,tr=0;const or=(mt||Ft)&&Lt.vertical,Zr=Lt.metrics.advance*Lt.scale/2;if(Ft&&We.verticalizable&&(tr=Bt.lineOffset/2-(Lt.imageName?-(Gr-Lt.metrics.width*Lt.scale)/2:(Lt.scale-1)*Gr)),Lt.imageName){const Tr=Zt[Lt.imageName];Ht=Tr.sdf,bn=Tr.pixelRatio,on=Ki/bn}const go=mt?[Lt.x+Zr,Lt.y]:[0,0];let ji=mt?[0,0]:[Lt.x+Zr+tt[0],Lt.y+tt[1]-tr],jr=[0,0];or&&(jr=ji,ji=[0,0]);const qr=(Lt.metrics.left-on)*Lt.scale-Zr+ji[0],li=(-Lt.metrics.top-on)*Lt.scale+ji[1],Yi=qr+bt.w*Lt.scale/bn,Di=li+bt.h*Lt.scale/bn,Dr=new E(qr,li),Wr=new E(Yi,li),Si=new E(qr,Di),Bi=new E(Yi,Di);if(or){const Tr=new E(-Zr,Zr-ff),ui=-Math.PI/2,In=Gr/2-Zr,yo=new E(5-ff-In,-(Lt.imageName?In:0)),ci=new E(...jr);Dr._rotateAround(ui,Tr)._add(yo)._add(ci),Wr._rotateAround(ui,Tr)._add(yo)._add(ci),Si._rotateAround(ui,Tr)._add(yo)._add(ci),Bi._rotateAround(ui,Tr)._add(yo)._add(ci)}if(Rt){const Tr=Math.sin(Rt),ui=Math.cos(Rt),In=[ui,-Tr,Tr,ui];Dr._matMult(In),Wr._matMult(In),Si._matMult(In),Bi._matMult(In)}const Ji=new E(0,0),Qi=new E(0,0);It.push({tl:Dr,tr:Wr,bl:Si,br:Bi,tex:bt,writingMode:We.writingMode,glyphOffset:go,sectionIndex:Lt.sectionIndex,isSDF:Ht,pixelOffsetTL:Ji,pixelOffsetBR:Qi,minFontScaleX:0,minFontScaleY:0})}return It}(0,s,T,p,v,x,h,o.allowVerticalPlacement),je=o.textSizeData;let Ne=null;je.kind==="source"?(Ne=[ta*p.layout.get("text-size").evaluate(x,{})],Ne[0]>Cl&&Z(`${o.layerIds[0]}: Value for "text-size" is >= ${pf}. Reduce your "text-size".`)):je.kind==="composite"&&(Ne=[ta*de.compositeTextSizes[0].evaluate(x,{},ge),ta*de.compositeTextSizes[1].evaluate(x,{},ge)],(Ne[0]>Cl||Ne[1]>Cl)&&Z(`${o.layerIds[0]}: Value for "text-size" is >= ${pf}. Reduce your "text-size".`)),o.addSymbols(o.text,Pe,Ne,T,v,x,R,n,P.lineStartIndex,P.lineLength,ue,ge);for(const et of X)ee[et]=o.text.placedSymbolArray.length-1;return 4*Pe.length}function kw(o){for(const n in o)return o[n];return null}function NP(o,n,s,h){const p=o.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else p[n]=[];return p[n].push(h),!1}const Lw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ty{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=Lw[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[T]=new Uint32Array(n,4,1);return new Ty(T,x,v,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=Lw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,T=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-T%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+T+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Cy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:T}=this,P=[0,v.length-1,0],R=[];for(;P.length;){const X=P.pop()||0,ee=P.pop()||0,ue=P.pop()||0;if(ee-ue<=T){for(let je=ue;je<=ee;je++){const Ne=x[2*je],et=x[2*je+1];Ne>=n&&Ne<=h&&et>=s&&et<=p&&R.push(v[je])}continue}const de=ue+ee>>1,ge=x[2*de],Pe=x[2*de+1];ge>=n&&ge<=h&&Pe>=s&&Pe<=p&&R.push(v[de]),(X===0?n<=ge:s<=Pe)&&(P.push(ue),P.push(de-1),P.push(1-X)),(X===0?h>=ge:p>=Pe)&&(P.push(de+1),P.push(ee),P.push(1-X))}return R}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,T=[0,p.length-1,0],P=[],R=h*h;for(;T.length;){const X=T.pop()||0,ee=T.pop()||0,ue=T.pop()||0;if(ee-ue<=x){for(let je=ue;je<=ee;je++)Ow(v[2*je],v[2*je+1],n,s)<=R&&P.push(p[je]);continue}const de=ue+ee>>1,ge=v[2*de],Pe=v[2*de+1];Ow(ge,Pe,n,s)<=R&&P.push(p[de]),(X===0?n-h<=ge:s-h<=Pe)&&(T.push(ue),T.push(de-1),T.push(1-X)),(X===0?n+h>=ge:s+h>=Pe)&&(T.push(de+1),T.push(ee),T.push(1-X))}return P}}function Cy(o,n,s,h,p,v){if(p-h<=s)return;const x=h+p>>1;zw(o,n,x,h,p,v),Cy(o,n,s,h,x-1,1-v),Cy(o,n,s,x+1,p,1-v)}function zw(o,n,s,h,p,v){for(;p>h;){if(p-h>600){const R=p-h+1,X=s-h+1,ee=Math.log(R),ue=.5*Math.exp(2*ee/3),de=.5*Math.sqrt(ee*ue*(R-ue)/R)*(X-R/2<0?-1:1);zw(o,n,s,Math.max(h,Math.floor(s-X*ue/R+de)),Math.min(p,Math.floor(s+(R-X)*ue/R+de)),v)}const x=n[2*s+v];let T=h,P=p;for(gf(o,n,h,s),n[2*p+v]>x&&gf(o,n,h,p);T<P;){for(gf(o,n,T,P),T++,P--;n[2*T+v]<x;)T++;for(;n[2*P+v]>x;)P--}n[2*h+v]===x?gf(o,n,h,P):(P++,gf(o,n,P,p)),P<=s&&(h=P+1),s<=P&&(p=P-1)}}function gf(o,n,s,h){Ay(o,s,h),Ay(n,2*s,2*h),Ay(n,2*s+1,2*h+1)}function Ay(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Ow(o,n,s,h){const p=o-s,v=n-h;return p*p+v*v}var Iy;l.PerformanceMarkers=void 0,(Iy=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",Iy.load="load",Iy.fullLoad="fullLoad";let up=null,yf=[];const Py=1e3/60,My="loadTime",ky="fullLoadTime",UP={mark(o){performance.mark(o)},frame(o){const n=o;up!=null&&yf.push(n-up),up=n},clearMetrics(){up=null,yf=[],performance.clearMeasures(My),performance.clearMeasures(ky);for(const o in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(My,l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure(ky,l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(My)[0].duration,n=performance.getEntriesByName(ky)[0].duration,s=yf.length,h=1/(yf.reduce((v,x)=>v+x,0)/s/1e3),p=yf.filter(v=>v>Py).reduce((v,x)=>v+(x-Py)/Py,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};l.AJAXError=we,l.ARRAY_TYPE=bc,l.Actor=class{constructor(o,n,s){this.receive=h=>{const p=h.data,v=p.id;if(v&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else ye()||p.mustQueue?(this.tasks[v]=p,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,p)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),p=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(h,p)},this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new kP(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ye()?o:window}send(o,n,s,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=be(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!s,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:bi(n,x)},x),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(Ei(n.error)):s(null,Ei(n.data)))}else{let s=!1;const h=be(this.globalScope)?void 0:[],p=n.hasCallback?(T,P)=>{s=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:T?bi(T):null,data:bi(P,h)},h)}:T=>{s=!0};let v=null;const x=Ei(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,p);else if(this.parent.getWorkerSource){const T=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,T[0],x.source)[T[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=rf,l.CanonicalTileID=by,l.CollisionBoxArray=I,l.CollisionCircleLayoutArray=class extends Jh{},l.Color=an,l.DEMData=pw,l.DataConstantProperty=Kt,l.DictionaryCoder=mw,l.EXTENT=yr,l.ErrorEvent=ht,l.EvaluationParameters=rr,l.Event=Pt,l.Evented=Et,l.FeatureIndex=yw,l.FillBucket=oy,l.FillExtrusionBucket=ay,l.GeoJSONFeature=gw,l.ImageAtlas=qx,l.ImagePosition=fy,l.KDBush=Ty,l.LineBucket=ly,l.LineStripIndexArray=class extends m{},l.LngLat=Al,l.MercatorCoordinate=ip,l.ONE_EM=Gr,l.OverscaledTileID=Oo,l.PerformanceUtils=UP,l.Point=E,l.Pos3dArray=class extends Eu{},l.PosArray=nt,l.Properties=Oi,l.Protobuf=cy,l.QuadTriangleArray=class extends _c{},l.RGBAImage=zo,l.RasterBoundsArray=class extends Su{},l.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.SegmentVector=rn,l.SymbolBucket=Ic,l.Transitionable=Ud,l.TriangleIndexArray=nn,l.Uniform1f=$r,l.Uniform1i=class extends Ir{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends Ir{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.Uniform3f=class extends Ir{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.Uniform4f=oi,l.UniformColor=bl,l.UniformMatrix4f=class extends Ir{constructor(o,n){super(o,n),this.current=Vr}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.UnwrappedTileID=dw,l.ValidationError=Fe,l.ZoomHistory=vl,l.addDynamicAttributes=gy,l.arrayBufferToImage=function(o,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=le})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(h):le},l.arrayBufferToImageBitmap=function(o,n){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.asyncAll=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((x,T)=>{n(x,(P,R)=>{P&&(v=P),p[T]=R,--h==0&&s(v,p)})})},l.bezier=K,l.browser=me,l.clamp=G,l.clipLine=xw,l.clone=function(o){var n=new bc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.clone$1=S,l.collisionCircleLayout=oP,l.config=Ee,l.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.create=function(){var o=new bc(16);return bc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l.createExpression=wn,l.createFilter=Co,l.createLayout=Ar,l.createStyleLayer=function(o){if(o.type==="custom")return new MP(o);switch(o.type){case"background":return new AP(o);case"circle":return new fI(o);case"fill":return new LI(o);case"fill-extrusion":return new HI(o);case"heatmap":return new pI(o);case"hillshade":return new gI(o);case"line":return new tP(o);case"raster":return new PP(o);case"symbol":return new rp(o)}},l.deepEqual=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},l.defaultEasing=pe,l.derefLayers=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=fn(o[s],n[o[s].ref]));return o},l.diffStyles=function(o,n){if(!o)return[{command:Vt.setStyle,args:[n]}];let s=[];try{if(!qt(o.version,n.version))return[{command:Vt.setStyle,args:[n]}];qt(o.center,n.center)||s.push({command:Vt.setCenter,args:[n.center]}),qt(o.zoom,n.zoom)||s.push({command:Vt.setZoom,args:[n.zoom]}),qt(o.bearing,n.bearing)||s.push({command:Vt.setBearing,args:[n.bearing]}),qt(o.pitch,n.pitch)||s.push({command:Vt.setPitch,args:[n.pitch]}),qt(o.sprite,n.sprite)||s.push({command:Vt.setSprite,args:[n.sprite]}),qt(o.glyphs,n.glyphs)||s.push({command:Vt.setGlyphs,args:[n.glyphs]}),qt(o.transition,n.transition)||s.push({command:Vt.setTransition,args:[n.transition]}),qt(o.light,n.light)||s.push({command:Vt.setLight,args:[n.light]});const h={},p=[];(function(x,T,P,R){let X;for(X in T=T||{},x=x||{})Object.prototype.hasOwnProperty.call(x,X)&&(Object.prototype.hasOwnProperty.call(T,X)||gn(X,P,R));for(X in T)Object.prototype.hasOwnProperty.call(T,X)&&(Object.prototype.hasOwnProperty.call(x,X)?qt(x[X],T[X])||(x[X].type==="geojson"&&T[X].type==="geojson"&&j(x,T,X)?P.push({command:Vt.setGeoJSONSourceData,args:[X,T[X].data]}):Se(X,T,P,R)):un(X,T,P))})(o.sources,n.sources,p,h);const v=[];o.layers&&o.layers.forEach(x=>{h[x.source]?s.push({command:Vt.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(p),function(x,T,P){T=T||[];const R=(x=x||[]).map(_e),X=T.map(_e),ee=x.reduce(Ze,{}),ue=T.reduce(Ze,{}),de=R.slice(),ge=Object.create(null);let Pe,je,Ne,et,We,tt,it;for(Pe=0,je=0;Pe<R.length;Pe++)Ne=R[Pe],Object.prototype.hasOwnProperty.call(ue,Ne)?je++:(P.push({command:Vt.removeLayer,args:[Ne]}),de.splice(de.indexOf(Ne,je),1));for(Pe=0,je=0;Pe<X.length;Pe++)Ne=X[X.length-1-Pe],de[de.length-1-Pe]!==Ne&&(Object.prototype.hasOwnProperty.call(ee,Ne)?(P.push({command:Vt.removeLayer,args:[Ne]}),de.splice(de.lastIndexOf(Ne,de.length-je),1)):je++,tt=de[de.length-Pe],P.push({command:Vt.addLayer,args:[ue[Ne],tt]}),de.splice(de.length-Pe,0,Ne),ge[Ne]=!0);for(Pe=0;Pe<X.length;Pe++)if(Ne=X[Pe],et=ee[Ne],We=ue[Ne],!ge[Ne]&&!qt(et,We))if(qt(et.source,We.source)&&qt(et["source-layer"],We["source-layer"])&&qt(et.type,We.type)){for(it in O(et.layout,We.layout,P,Ne,null,Vt.setLayoutProperty),O(et.paint,We.paint,P,Ne,null,Vt.setPaintProperty),qt(et.filter,We.filter)||P.push({command:Vt.setFilter,args:[Ne,We.filter]}),qt(et.minzoom,We.minzoom)&&qt(et.maxzoom,We.maxzoom)||P.push({command:Vt.setLayerZoomRange,args:[Ne,We.minzoom,We.maxzoom]}),et)Object.prototype.hasOwnProperty.call(et,it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?O(et[it],We[it],P,Ne,it.slice(6),Vt.setPaintProperty):qt(et[it],We[it])||P.push({command:Vt.setLayerProperty,args:[Ne,it,We[it]]}));for(it in We)Object.prototype.hasOwnProperty.call(We,it)&&!Object.prototype.hasOwnProperty.call(et,it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?O(et[it],We[it],P,Ne,it.slice(6),Vt.setPaintProperty):qt(et[it],We[it])||P.push({command:Vt.setLayerProperty,args:[Ne,it,We[it]]}))}else P.push({command:Vt.removeLayer,args:[Ne]}),tt=de[de.lastIndexOf(Ne)+1],P.push({command:Vt.addLayer,args:[We,tt]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:Vt.setStyle,args:[n]}]}return s},l.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.earthRadius=xy,l.emitValidationErrors=Kn,l.emptyStyle=function(){const o={},n=Je.$version;for(const s in Je.$root){const h=Je.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},l.equals=function(o,n){var s=o[0],h=o[1],p=o[2],v=o[3],x=o[4],T=o[5],P=o[6],R=o[7],X=o[8],ee=o[9],ue=o[10],de=o[11],ge=o[12],Pe=o[13],je=o[14],Ne=o[15],et=n[0],We=n[1],tt=n[2],it=n[3],mt=n[4],jt=n[5],Zt=n[6],Ft=n[7],Rt=n[8],It=n[9],Bt=n[10],Lt=n[11],bt=n[12],on=n[13],Ht=n[14],bn=n[15];return Math.abs(s-et)<=Fi*Math.max(1,Math.abs(s),Math.abs(et))&&Math.abs(h-We)<=Fi*Math.max(1,Math.abs(h),Math.abs(We))&&Math.abs(p-tt)<=Fi*Math.max(1,Math.abs(p),Math.abs(tt))&&Math.abs(v-it)<=Fi*Math.max(1,Math.abs(v),Math.abs(it))&&Math.abs(x-mt)<=Fi*Math.max(1,Math.abs(x),Math.abs(mt))&&Math.abs(T-jt)<=Fi*Math.max(1,Math.abs(T),Math.abs(jt))&&Math.abs(P-Zt)<=Fi*Math.max(1,Math.abs(P),Math.abs(Zt))&&Math.abs(R-Ft)<=Fi*Math.max(1,Math.abs(R),Math.abs(Ft))&&Math.abs(X-Rt)<=Fi*Math.max(1,Math.abs(X),Math.abs(Rt))&&Math.abs(ee-It)<=Fi*Math.max(1,Math.abs(ee),Math.abs(It))&&Math.abs(ue-Bt)<=Fi*Math.max(1,Math.abs(ue),Math.abs(Bt))&&Math.abs(de-Lt)<=Fi*Math.max(1,Math.abs(de),Math.abs(Lt))&&Math.abs(ge-bt)<=Fi*Math.max(1,Math.abs(ge),Math.abs(bt))&&Math.abs(Pe-on)<=Fi*Math.max(1,Math.abs(Pe),Math.abs(on))&&Math.abs(je-Ht)<=Fi*Math.max(1,Math.abs(je),Math.abs(Ht))&&Math.abs(Ne-bn)<=Fi*Math.max(1,Math.abs(Ne),Math.abs(bn))},l.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/ta:o.kind==="composite"?vi.number(h/ta,p/ta,s):n},l.evaluateSizeForZoom=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,T=p?G(_i.interpolationFactor(p,n,v,x),0,1):0;o.kind==="camera"?h=vi.number(o.minSize,o.maxSize,T):s=T}return{uSizeT:s,uSize:h}},l.evented=Wh,l.extend=U,l.filterObject=N,l.findLineIntersection=function(o,n,s,h){const p=n.y-o.y,v=n.x-o.x,x=h.y-s.y,T=h.x-s.x,P=x*v-T*p;if(P===0)return null;const R=(T*(o.y-s.y)-x*(o.x-s.x))/P;return new E(o.x+R*v,o.y+R*p)},l.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.getAnchorAlignment=py,l.getAnchorJustification=Sy,l.getArrayBuffer=Ge,l.getDefaultExportFromCjs=b,l.getJSON=function(o,n){return He(U(o,{type:"json"}),n)},l.getOverlapMode=my,l.getProtocolAction=Le,l.getRTLTextPluginStatus=Hh,l.getReferrer=Ue,l.getVideo=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");rt(o[h])||(s.crossOrigin="Anonymous"),p.src=o[h],s.appendChild(p)}return{cancel:()=>{}}},l.groupByLayout=function(o,n){const s={};for(let p=0;p<o.length;p++){const v=n&&n[o[p].id]||fu(o[p]);n&&(n[o[p].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(o[p])}const h=[];for(const p in s)h.push(s[p]);return h},l.identity=qg,l.interpolate=vi,l.invert=function(o,n){var s=n[0],h=n[1],p=n[2],v=n[3],x=n[4],T=n[5],P=n[6],R=n[7],X=n[8],ee=n[9],ue=n[10],de=n[11],ge=n[12],Pe=n[13],je=n[14],Ne=n[15],et=s*T-h*x,We=s*P-p*x,tt=s*R-v*x,it=h*P-p*T,mt=h*R-v*T,jt=p*R-v*P,Zt=X*Pe-ee*ge,Ft=X*je-ue*ge,Rt=X*Ne-de*ge,It=ee*je-ue*Pe,Bt=ee*Ne-de*Pe,Lt=ue*Ne-de*je,bt=et*Lt-We*Bt+tt*It+it*Rt-mt*Ft+jt*Zt;return bt?(o[0]=(T*Lt-P*Bt+R*It)*(bt=1/bt),o[1]=(p*Bt-h*Lt-v*It)*bt,o[2]=(Pe*jt-je*mt+Ne*it)*bt,o[3]=(ue*mt-ee*jt-de*it)*bt,o[4]=(P*Rt-x*Lt-R*Ft)*bt,o[5]=(s*Lt-p*Rt+v*Ft)*bt,o[6]=(je*tt-ge*jt-Ne*We)*bt,o[7]=(X*jt-ue*tt+de*We)*bt,o[8]=(x*Bt-T*Rt+R*Zt)*bt,o[9]=(h*Rt-s*Bt-v*Zt)*bt,o[10]=(ge*mt-Pe*tt+Ne*et)*bt,o[11]=(ee*tt-X*mt-de*et)*bt,o[12]=(T*Ft-x*It-P*Zt)*bt,o[13]=(s*It-h*Ft+p*Zt)*bt,o[14]=(Pe*We-ge*it-je*et)*bt,o[15]=(X*it-ee*We+ue*et)*bt,o):null},l.isImageBitmap=te,l.isSafari=be,l.isWorker=ye,l.keysDifference=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},l.lazyLoadRTLTextPlugin=function(){po.isLoading()||po.isLoaded()||Hh()!=="deferred"||Nd()},l.makeRequest=He,l.mapObject=W,l.mercatorXfromLng=uw,l.mercatorYfromLat=cw,l.mercatorZfromAltitude=hw,l.mul=hI,l.mul$1=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},l.multiply=px,l.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.operations=Vt,l.ortho=function(o,n,s,h,p,v,x){var T=1/(n-s),P=1/(h-p),R=1/(v-x);return o[0]=-2*T,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*R,o[11]=0,o[12]=(n+s)*T,o[13]=(p+h)*P,o[14]=(x+v)*R,o[15]=1,o},l.parseCacheControl=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const x=p||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},l.parseGlyphPbf=function(o){return new cy(o).readFields(gP,[])},l.pbf=Nx,l.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=yr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new rr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new rr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new rr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:X}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new rr(R),o.canonical),h["text-size"].possiblyEvaluate(new rr(X),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:X}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new rr(R),o.canonical),h["icon-size"].possiblyEvaluate(new rr(X),o.canonical)]}const v=s.get("text-line-height")*Gr,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",T=s.get("text-keep-upright"),P=s.get("text-size");for(const R of o.bucket.features){const X=s.get("text-font").evaluate(R,{},o.canonical).join(","),ee=P.evaluate(R,{},o.canonical),ue=p.layoutTextSize.evaluate(R,{},o.canonical),de=p.layoutIconSize.evaluate(R,{},o.canonical),ge={horizontal:{},vertical:void 0},Pe=R.text;let je,Ne=[0,0];if(Pe){const tt=Pe.toString(),it=s.get("text-letter-spacing").evaluate(R,{},o.canonical)*Gr,mt=Dd(tt)?it:0,jt=s.get("text-anchor").evaluate(R,{},o.canonical),Zt=Pw(n,R,o.canonical);if(!Zt){const Lt=s.get("text-radial-offset").evaluate(R,{},o.canonical);Ne=Lt?Iw(jt,[Lt*Gr,Ey]):s.get("text-offset").evaluate(R,{},o.canonical).map(bt=>bt*Gr)}let Ft=x?"center":s.get("text-justify").evaluate(R,{},o.canonical);const Rt=s.get("symbol-placement"),It=Rt==="point"?s.get("text-max-width").evaluate(R,{},o.canonical)*Gr:0,Bt=()=>{o.bucket.allowVerticalPlacement&&bs(tt)&&(ge.vertical=ep(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,X,It,v,jt,"left",mt,Ne,l.WritingMode.vertical,!0,Rt,ue,ee))};if(!x&&Zt){const Lt=new Set;if(Ft==="auto")for(let on=0;on<Zt.values.length;on+=2)Lt.add(Sy(Zt.values[on]));else Lt.add(Ft);let bt=!1;for(const on of Lt)if(!ge.horizontal[on])if(bt)ge.horizontal[on]=ge.horizontal[0];else{const Ht=ep(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,X,It,v,"center",on,mt,Ne,l.WritingMode.horizontal,!1,Rt,ue,ee);Ht&&(ge.horizontal[on]=Ht,bt=Ht.positionedLines.length===1)}Bt()}else{Ft==="auto"&&(Ft=Sy(jt));const Lt=ep(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,X,It,v,jt,Ft,mt,Ne,l.WritingMode.horizontal,!1,Rt,ue,ee);Lt&&(ge.horizontal[Ft]=Lt),Bt(),bs(tt)&&x&&T&&(ge.vertical=ep(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,X,It,v,jt,Ft,mt,Ne,l.WritingMode.vertical,!1,Rt,ue,ee))}}let et=!1;if(R.icon&&R.icon.name){const tt=o.imageMap[R.icon.name];tt&&(je=bP(o.imagePositions[R.icon.name],s.get("icon-offset").evaluate(R,{},o.canonical),s.get("icon-anchor").evaluate(R,{},o.canonical)),et=!!tt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=et:o.bucket.sdfIcons!==et&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(tt.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const We=kw(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!We&&We.iconsInText,(We||je)&&BP(o.bucket,R,ge,je,o.imageMap,p,ue,de,Ne,et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.perspective=function(o,n,s,h,p){var v,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},l.pick=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},l.plugin=po,l.pointGeometry=w,l.polygonIntersectsPolygon=lx,l.potpack=Xx,l.register=At,l.registerForPluginStateChange=function(o){return o({pluginStatus:zi,pluginURL:Ys}),Wh.on("pluginStateChange",o),o},l.renderColorRamp=_x,l.rotateX=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[4],x=n[5],T=n[6],P=n[7],R=n[8],X=n[9],ee=n[10],ue=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+R*h,o[5]=x*p+X*h,o[6]=T*p+ee*h,o[7]=P*p+ue*h,o[8]=R*p-v*h,o[9]=X*p-x*h,o[10]=ee*p-T*h,o[11]=ue*p-P*h,o},l.rotateZ=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[0],x=n[1],T=n[2],P=n[3],R=n[4],X=n[5],ee=n[6],ue=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+R*h,o[1]=x*p+X*h,o[2]=T*p+ee*h,o[3]=P*p+ue*h,o[4]=R*p-v*h,o[5]=X*p-x*h,o[6]=ee*p-T*h,o[7]=ue*p-P*h,o},l.sameOrigin=rt,l.scale=function(o,n,s){var h=s[0],p=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.setRTLTextPlugin=function(o,n,s=!1){if(zi===Uh||zi===xu||zi===$h)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ys=me.resolveURL(o),zi=Uh,Vh=n,Zh(),s||Nd()},l.sphericalToCartesian=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},l.toEvaluationFeature=ea,l.transformMat4=Hd,l.translate=function(o,n,s){var h,p,v,x,T,P,R,X,ee,ue,de,ge,Pe=s[0],je=s[1],Ne=s[2];return n===o?(o[12]=n[0]*Pe+n[4]*je+n[8]*Ne+n[12],o[13]=n[1]*Pe+n[5]*je+n[9]*Ne+n[13],o[14]=n[2]*Pe+n[6]*je+n[10]*Ne+n[14],o[15]=n[3]*Pe+n[7]*je+n[11]*Ne+n[15]):(p=n[1],v=n[2],x=n[3],T=n[4],P=n[5],R=n[6],X=n[7],ee=n[8],ue=n[9],de=n[10],ge=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=x,o[4]=T,o[5]=P,o[6]=R,o[7]=X,o[8]=ee,o[9]=ue,o[10]=de,o[11]=ge,o[12]=h*Pe+T*je+ee*Ne+n[12],o[13]=p*Pe+P*je+ue*Ne+n[13],o[14]=v*Pe+R*je+de*Ne+n[14],o[15]=x*Pe+X*je+ge*Ne+n[15]),o},l.triggerPluginCompletionEvent=Gh,l.unicodeBlockLookup=zt,l.uniqueId=function(){return oe++},l.v8Spec=Je,l.validateCustomStyleLayer=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateLight=vn,l.validateStyle=Wt,l.vectorTile=Sl,l.warnOnce=Z,l.wrap=V}),d(["./shared"],function(l){class b{constructor(re){this.keyCache={},re&&this.replace(re)}replace(re){this._layerConfigs={},this._layers={},this.update(re,[])}update(re,se){for(const Te of re){this._layerConfigs[Te.id]=Te;const ze=this._layers[Te.id]=l.createStyleLayer(Te);ze._featureFilter=l.createFilter(ze.filter),this.keyCache[Te.id]&&delete this.keyCache[Te.id]}for(const Te of se)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const fe=l.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Te of fe){const ze=Te.map(gt=>this._layers[gt.id]),qe=ze[0];if(qe.visibility==="none")continue;const Ve=qe.source||"";let $e=this.familiesBySource[Ve];$e||($e=this.familiesBySource[Ve]={});const Qe=qe.sourceLayer||"_geojsonTileLayer";let pt=$e[Qe];pt||(pt=$e[Qe]=[]),pt.push(ze)}}}class w{constructor(re){const se={},fe=[];for(const Ve in re){const $e=re[Ve],Qe=se[Ve]={};for(const pt in $e){const gt=$e[+pt];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const yt={x:0,y:0,w:gt.bitmap.width+2,h:gt.bitmap.height+2};fe.push(yt),Qe[pt]={rect:yt,metrics:gt.metrics}}}const{w:Te,h:ze}=l.potpack(fe),qe=new l.AlphaImage({width:Te||1,height:ze||1});for(const Ve in re){const $e=re[Ve];for(const Qe in $e){const pt=$e[+Qe];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const gt=se[Ve][Qe].rect;l.AlphaImage.copy(pt.bitmap,qe,{x:0,y:0},{x:gt.x+1,y:gt.y+1},pt.bitmap)}}this.image=qe,this.positions=se}}l.register("GlyphAtlas",w);class A{constructor(re){this.tileID=new l.OverscaledTileID(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(re,se,fe,Te,ze){this.status="parsing",this.data=re,this.collisionBoxArray=new l.CollisionBoxArray;const qe=new l.DictionaryCoder(Object.keys(re.layers).sort()),Ve=new l.FeatureIndex(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const $e={},Qe={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},pt=se.familiesBySource[this.source];for(const xn in pt){const Mn=re.layers[xn];if(!Mn)continue;Mn.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${xn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ni=qe.encode(xn),an=[];for(let br=0;br<Mn.length;br++){const Er=Mn.feature(br),Yn=Ve.getId(Er,xn);an.push({feature:Er,id:Yn,index:br,sourceLayerIndex:ni})}for(const br of pt[xn]){const Er=br[0];Er.source!==this.source&&l.warnOnce(`layer.source = ${Er.source} does not equal this.source = ${this.source}`),Er.minzoom&&this.zoom<Math.floor(Er.minzoom)||Er.maxzoom&&this.zoom>=Er.maxzoom||Er.visibility!=="none"&&(E(br,this.zoom,fe),($e[Er.id]=Er.createBucket({index:Ve.bucketLayerIDs.length,layers:br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ni,sourceID:this.source})).populate(an,Qe,this.tileID.canonical),Ve.bucketLayerIDs.push(br.map(Yn=>Yn.id)))}}let gt,yt,tn,cn;const Nt=l.mapObject(Qe.glyphDependencies,xn=>Object.keys(xn).map(Number));this.inFlightDependencies.forEach(xn=>xn==null?void 0:xn.cancel()),this.inFlightDependencies=[];const Xt=++this.dependencySentinel;Object.keys(Nt).length?this.inFlightDependencies.push(Te.send("getGlyphs",{uid:this.uid,stacks:Nt,source:this.source,tileID:this.tileID,type:"glyphs"},(xn,Mn)=>{Xt===this.dependencySentinel&&(gt||(gt=xn,yt=Mn,$n.call(this)))})):yt={};const hn=Object.keys(Qe.iconDependencies);hn.length?this.inFlightDependencies.push(Te.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"icons"},(xn,Mn)=>{Xt===this.dependencySentinel&&(gt||(gt=xn,tn=Mn,$n.call(this)))})):tn={};const En=Object.keys(Qe.patternDependencies);function $n(){if(gt)return ze(gt);if(yt&&tn&&cn){const xn=new w(yt),Mn=new l.ImageAtlas(tn,cn);for(const ni in $e){const an=$e[ni];an instanceof l.SymbolBucket?(E(an.layers,this.zoom,fe),l.performSymbolLayout({bucket:an,glyphMap:yt,glyphPositions:xn.positions,imageMap:tn,imagePositions:Mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):an.hasPattern&&(an instanceof l.LineBucket||an instanceof l.FillBucket||an instanceof l.FillExtrusionBucket)&&(E(an.layers,this.zoom,fe),an.addFeatures(Qe,this.tileID.canonical,Mn.patternPositions))}this.status="done",ze(null,{buckets:Object.values($e).filter(ni=>!ni.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xn.image,imageAtlas:Mn,glyphMap:this.returnDependencies?yt:null,iconMap:this.returnDependencies?tn:null,glyphPositions:this.returnDependencies?xn.positions:null})}}En.length?this.inFlightDependencies.push(Te.send("getImages",{icons:En,source:this.source,tileID:this.tileID,type:"patterns"},(xn,Mn)=>{Xt===this.dependencySentinel&&(gt||(gt=xn,cn=Mn,$n.call(this)))})):cn={},$n.call(this)}}function E(ke,re,se){const fe=new l.EvaluationParameters(re);for(const Te of ke)Te.recalculate(fe,se)}function L(ke,re){const se=l.getArrayBuffer(ke.request,(fe,Te,ze,qe)=>{fe?re(fe):Te&&re(null,{vectorTile:new l.vectorTile.VectorTile(new l.Protobuf(Te)),rawData:Te,cacheControl:ze,expires:qe})});return()=>{se.cancel(),re()}}class F{constructor(re,se,fe,Te){this.actor=re,this.layerIndex=se,this.availableImages=fe,this.loadVectorData=Te||L,this.fetching={},this.loading={},this.loaded={}}loadTile(re,se){const fe=re.uid;this.loading||(this.loading={});const Te=!!(re&&re.request&&re.request.collectResourceTiming)&&new l.RequestPerformance(re.request),ze=this.loading[fe]=new A(re);ze.abort=this.loadVectorData(re,(qe,Ve)=>{if(delete this.loading[fe],qe||!Ve)return ze.status="done",this.loaded[fe]=ze,se(qe);const $e=Ve.rawData,Qe={};Ve.expires&&(Qe.expires=Ve.expires),Ve.cacheControl&&(Qe.cacheControl=Ve.cacheControl);const pt={};if(Te){const gt=Te.finish();gt&&(pt.resourceTiming=JSON.parse(JSON.stringify(gt)))}ze.vectorTile=Ve.vectorTile,ze.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,(gt,yt)=>{if(delete this.fetching[fe],gt||!yt)return se(gt);se(null,l.extend({rawTileData:$e.slice(0)},yt,Qe,pt))}),this.loaded=this.loaded||{},this.loaded[fe]=ze,this.fetching[fe]={rawTileData:$e,cacheControl:Qe,resourceTiming:pt}})}reloadTile(re,se){const fe=this.loaded,Te=re.uid;if(fe&&fe[Te]){const ze=fe[Te];ze.showCollisionBoxes=re.showCollisionBoxes,ze.status==="parsing"?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,(qe,Ve)=>{if(qe||!Ve)return se(qe,Ve);let $e;if(this.fetching[Te]){const{rawTileData:Qe,cacheControl:pt,resourceTiming:gt}=this.fetching[Te];delete this.fetching[Te],$e=l.extend({rawTileData:Qe.slice(0)},Ve,pt,gt)}else $e=Ve;se(null,$e)}):ze.status==="done"&&(ze.vectorTile?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,se):se())}}abortTile(re,se){const fe=this.loading,Te=re.uid;fe&&fe[Te]&&fe[Te].abort&&(fe[Te].abort(),delete fe[Te]),se()}removeTile(re,se){const fe=this.loaded,Te=re.uid;fe&&fe[Te]&&delete fe[Te],se()}}class Q{constructor(){this.loaded={}}loadTile(re,se){const{uid:fe,encoding:Te,rawImageData:ze}=re,qe=l.isImageBitmap(ze)?this.getImageData(ze):ze,Ve=new l.DEMData(fe,qe,Te);this.loaded=this.loaded||{},this.loaded[fe]=Ve,se(null,Ve)}getImageData(re){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(re.width,re.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=re.width,this.offscreenCanvas.height=re.height,this.offscreenCanvasContext.drawImage(re,0,0,re.width,re.height);const se=this.offscreenCanvasContext.getImageData(-1,-1,re.width+2,re.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:se.width,height:se.height},se.data)}removeTile(re){const se=this.loaded,fe=re.uid;se&&se[fe]&&delete se[fe]}}function K(ke,re){if(ke.length!==0){pe(ke[0],re);for(var se=1;se<ke.length;se++)pe(ke[se],!re)}}function pe(ke,re){for(var se=0,fe=0,Te=0,ze=ke.length,qe=ze-1;Te<ze;qe=Te++){var Ve=(ke[Te][0]-ke[qe][0])*(ke[qe][1]+ke[Te][1]),$e=se+Ve;fe+=Math.abs(se)>=Math.abs(Ve)?se-$e+Ve:Ve-$e+se,se=$e}se+fe>=0!=!!re&&ke.reverse()}var G=l.getDefaultExportFromCjs(function ke(re,se){var fe,Te=re&&re.type;if(Te==="FeatureCollection")for(fe=0;fe<re.features.length;fe++)ke(re.features[fe],se);else if(Te==="GeometryCollection")for(fe=0;fe<re.geometries.length;fe++)ke(re.geometries[fe],se);else if(Te==="Feature")ke(re.geometry,se);else if(Te==="Polygon")K(re.coordinates,se);else if(Te==="MultiPolygon")for(fe=0;fe<re.coordinates.length;fe++)K(re.coordinates[fe],se);return re});const V=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;var U={exports:{}},oe=l.pointGeometry,W=l.vectorTile.VectorTileFeature,N=S;function S(ke,re){this.options=re||{},this.features=ke,this.length=ke.length}function M(ke,re){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=re||4096}S.prototype.feature=function(ke){return new M(this.features[ke],this.options.extent)},M.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var re=0;re<ke.length;re++){for(var se=ke[re],fe=[],Te=0;Te<se.length;Te++)fe.push(new oe(se[Te][0],se[Te][1]));this.geometry.push(fe)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,re=1/0,se=-1/0,fe=1/0,Te=-1/0,ze=0;ze<ke.length;ze++)for(var qe=ke[ze],Ve=0;Ve<qe.length;Ve++){var $e=qe[Ve];re=Math.min(re,$e.x),se=Math.max(se,$e.x),fe=Math.min(fe,$e.y),Te=Math.max(Te,$e.y)}return[re,fe,se,Te]},M.prototype.toGeoJSON=W.prototype.toGeoJSON;var Z=l.pbf,q=N;function J(ke){var re=new Z;return function(se,fe){for(var Te in se.layers)fe.writeMessage(3,ye,se.layers[Te])}(ke,re),re.finish()}function ye(ke,re){var se;re.writeVarintField(15,ke.version||1),re.writeStringField(1,ke.name||""),re.writeVarintField(5,ke.extent||4096);var fe={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<ke.length;se++)fe.feature=ke.feature(se),re.writeMessage(2,xe,fe);var Te=fe.keys;for(se=0;se<Te.length;se++)re.writeStringField(3,Te[se]);var ze=fe.values;for(se=0;se<ze.length;se++)re.writeMessage(4,ne,ze[se])}function xe(ke,re){var se=ke.feature;se.id!==void 0&&re.writeVarintField(1,se.id),re.writeMessage(2,be,ke),re.writeVarintField(3,se.type),re.writeMessage(4,ie,se)}function be(ke,re){var se=ke.feature,fe=ke.keys,Te=ke.values,ze=ke.keycache,qe=ke.valuecache;for(var Ve in se.properties){var $e=se.properties[Ve],Qe=ze[Ve];if($e!==null){Qe===void 0&&(fe.push(Ve),ze[Ve]=Qe=fe.length-1),re.writeVarint(Qe);var pt=typeof $e;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&($e=JSON.stringify($e));var gt=pt+":"+$e,yt=qe[gt];yt===void 0&&(Te.push($e),qe[gt]=yt=Te.length-1),re.writeVarint(yt)}}}function te(ke,re){return(re<<3)+(7&ke)}function le(ke){return ke<<1^ke>>31}function ie(ke,re){for(var se=ke.loadGeometry(),fe=ke.type,Te=0,ze=0,qe=se.length,Ve=0;Ve<qe;Ve++){var $e=se[Ve],Qe=1;fe===1&&(Qe=$e.length),re.writeVarint(te(1,Qe));for(var pt=fe===3?$e.length-1:$e.length,gt=0;gt<pt;gt++){gt===1&&fe!==1&&re.writeVarint(te(2,pt-1));var yt=$e[gt].x-Te,tn=$e[gt].y-ze;re.writeVarint(le(yt)),re.writeVarint(le(tn)),Te+=yt,ze+=tn}fe===3&&re.writeVarint(te(7,1))}}function ne(ke,re){var se=typeof ke;se==="string"?re.writeStringField(1,ke):se==="boolean"?re.writeBooleanField(7,ke):se==="number"&&(ke%1!=0?re.writeDoubleField(3,ke):ke<0?re.writeSVarintField(6,ke):re.writeVarintField(5,ke))}U.exports=J,U.exports.fromVectorTileJs=J,U.exports.fromGeojsonVt=function(ke,re){re=re||{};var se={};for(var fe in ke)se[fe]=new q(ke[fe].features,re),se[fe].name=fe,se[fe].version=re.version,se[fe].extent=re.extent;return J({layers:se})},U.exports.GeoJSONWrapper=q;var me=l.getDefaultExportFromCjs(U.exports);const Ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},we=Math.fround||(Ue=new Float32Array(1),ke=>(Ue[0]=+ke,Ue[0]));var Ue;const Le=3,Me=5,He=6;class Ge{constructor(re){this.options=Object.assign(Object.create(Ee),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:se,minZoom:fe,maxZoom:Te}=this.options;se&&console.time("total time");const ze=`prepare ${re.length} points`;se&&console.time(ze),this.points=re;const qe=[];for(let $e=0;$e<re.length;$e++){const Qe=re[$e];if(!Qe.geometry)continue;const[pt,gt]=Qe.geometry.coordinates,yt=we(vt(pt)),tn=we(Pt(gt));qe.push(yt,tn,1/0,$e,-1,1),this.options.reduce&&qe.push(0)}let Ve=this.trees[Te+1]=this._createTree(qe);se&&console.timeEnd(ze);for(let $e=Te;$e>=fe;$e--){const Qe=+Date.now();Ve=this.trees[$e]=this._createTree(this._cluster(Ve,$e)),se&&console.log("z%d: %d clusters in %dms",$e,Ve.numItems,+Date.now()-Qe)}return se&&console.timeEnd("total time"),this}getClusters(re,se){let fe=((re[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,re[1]));let ze=re[2]===180?180:((re[2]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)fe=-180,ze=180;else if(fe>ze){const gt=this.getClusters([fe,Te,180,qe],se),yt=this.getClusters([-180,Te,ze,qe],se);return gt.concat(yt)}const Ve=this.trees[this._limitZoom(se)],$e=Ve.range(vt(fe),Pt(qe),vt(ze),Pt(Te)),Qe=Ve.data,pt=[];for(const gt of $e){const yt=this.stride*gt;pt.push(Qe[yt+Me]>1?rt(Qe,yt,this.clusterProps):this.points[Qe[yt+Le]])}return pt}getChildren(re){const se=this._getOriginId(re),fe=this._getOriginZoom(re),Te="No cluster with the specified id.",ze=this.trees[fe];if(!ze)throw new Error(Te);const qe=ze.data;if(se*this.stride>=qe.length)throw new Error(Te);const Ve=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),$e=ze.within(qe[se*this.stride],qe[se*this.stride+1],Ve),Qe=[];for(const pt of $e){const gt=pt*this.stride;qe[gt+4]===re&&Qe.push(qe[gt+Me]>1?rt(qe,gt,this.clusterProps):this.points[qe[gt+Le]])}if(Qe.length===0)throw new Error(Te);return Qe}getLeaves(re,se,fe){const Te=[];return this._appendLeaves(Te,re,se=se||10,fe=fe||0,0),Te}getTile(re,se,fe){const Te=this.trees[this._limitZoom(re)],ze=Math.pow(2,re),{extent:qe,radius:Ve}=this.options,$e=Ve/qe,Qe=(fe-$e)/ze,pt=(fe+1+$e)/ze,gt={features:[]};return this._addTileFeatures(Te.range((se-$e)/ze,Qe,(se+1+$e)/ze,pt),Te.data,se,fe,ze,gt),se===0&&this._addTileFeatures(Te.range(1-$e/ze,Qe,1,pt),Te.data,ze,fe,ze,gt),se===ze-1&&this._addTileFeatures(Te.range(0,Qe,$e/ze,pt),Te.data,-1,fe,ze,gt),gt.features.length?gt:null}getClusterExpansionZoom(re){let se=this._getOriginZoom(re)-1;for(;se<=this.options.maxZoom;){const fe=this.getChildren(re);if(se++,fe.length!==1)break;re=fe[0].properties.cluster_id}return se}_appendLeaves(re,se,fe,Te,ze){const qe=this.getChildren(se);for(const Ve of qe){const $e=Ve.properties;if($e&&$e.cluster?ze+$e.point_count<=Te?ze+=$e.point_count:ze=this._appendLeaves(re,$e.cluster_id,fe,Te,ze):ze<Te?ze++:re.push(Ve),re.length===fe)break}return ze}_createTree(re){const se=new l.KDBush(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<re.length;fe+=this.stride)se.add(re[fe],re[fe+1]);return se.finish(),se.data=re,se}_addTileFeatures(re,se,fe,Te,ze,qe){for(const Ve of re){const $e=Ve*this.stride,Qe=se[$e+Me]>1;let pt,gt,yt;if(Qe)pt=ct(se,$e,this.clusterProps),gt=se[$e],yt=se[$e+1];else{const Nt=this.points[se[$e+Le]];pt=Nt.properties;const[Xt,hn]=Nt.geometry.coordinates;gt=vt(Xt),yt=Pt(hn)}const tn={type:1,geometry:[[Math.round(this.options.extent*(gt*ze-fe)),Math.round(this.options.extent*(yt*ze-Te))]],tags:pt};let cn;cn=Qe||this.options.generateId?se[$e+Le]:this.points[se[$e+Le]].id,cn!==void 0&&(tn.id=cn),qe.features.push(tn)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,se){const{radius:fe,extent:Te,reduce:ze,minPoints:qe}=this.options,Ve=fe/(Te*Math.pow(2,se)),$e=re.data,Qe=[],pt=this.stride;for(let gt=0;gt<$e.length;gt+=pt){if($e[gt+2]<=se)continue;$e[gt+2]=se;const yt=$e[gt],tn=$e[gt+1],cn=re.within($e[gt],$e[gt+1],Ve),Nt=$e[gt+Me];let Xt=Nt;for(const hn of cn){const En=hn*pt;$e[En+2]>se&&(Xt+=$e[En+Me])}if(Xt>Nt&&Xt>=qe){let hn,En=yt*Nt,$n=tn*Nt,xn=-1;const Mn=((gt/pt|0)<<5)+(se+1)+this.points.length;for(const ni of cn){const an=ni*pt;if($e[an+2]<=se)continue;$e[an+2]=se;const br=$e[an+Me];En+=$e[an]*br,$n+=$e[an+1]*br,$e[an+4]=Mn,ze&&(hn||(hn=this._map($e,gt,!0),xn=this.clusterProps.length,this.clusterProps.push(hn)),ze(hn,this._map($e,an)))}$e[gt+4]=Mn,Qe.push(En/Xt,$n/Xt,1/0,Mn,-1,Xt),ze&&Qe.push(xn)}else{for(let hn=0;hn<pt;hn++)Qe.push($e[gt+hn]);if(Xt>1)for(const hn of cn){const En=hn*pt;if(!($e[En+2]<=se)){$e[En+2]=se;for(let $n=0;$n<pt;$n++)Qe.push($e[En+$n])}}}}return Qe}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,se,fe){if(re[se+Me]>1){const qe=this.clusterProps[re[se+He]];return fe?Object.assign({},qe):qe}const Te=this.points[re[se+Le]].properties,ze=this.options.map(Te);return fe&&ze===Te?Object.assign({},ze):ze}}function rt(ke,re,se){return{type:"Feature",id:ke[re+Le],properties:ct(ke,re,se),geometry:{type:"Point",coordinates:[(fe=ke[re],360*(fe-.5)),ht(ke[re+1])]}};var fe}function ct(ke,re,se){const fe=ke[re+Me],Te=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,ze=ke[re+He],qe=ze===-1?{}:Object.assign({},se[ze]);return Object.assign(qe,{cluster:!0,cluster_id:ke[re+Le],point_count:fe,point_count_abbreviated:Te})}function vt(ke){return ke/360+.5}function Pt(ke){const re=Math.sin(ke*Math.PI/180),se=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return se<0?0:se>1?1:se}function ht(ke){const re=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function Et(ke,re,se,fe){for(var Te,ze=fe,qe=se-re>>1,Ve=se-re,$e=ke[re],Qe=ke[re+1],pt=ke[se],gt=ke[se+1],yt=re+3;yt<se;yt+=3){var tn=Je(ke[yt],ke[yt+1],$e,Qe,pt,gt);if(tn>ze)Te=yt,ze=tn;else if(tn===ze){var cn=Math.abs(yt-qe);cn<Ve&&(Te=yt,Ve=cn)}}ze>fe&&(Te-re>3&&Et(ke,re,Te,fe),ke[Te+2]=ze,se-Te>3&&Et(ke,Te,se,fe))}function Je(ke,re,se,fe,Te,ze){var qe=Te-se,Ve=ze-fe;if(qe!==0||Ve!==0){var $e=((ke-se)*qe+(re-fe)*Ve)/(qe*qe+Ve*Ve);$e>1?(se=Te,fe=ze):$e>0&&(se+=qe*$e,fe+=Ve*$e)}return(qe=ke-se)*qe+(Ve=re-fe)*Ve}function Ut(ke,re,se,fe){var Te={id:ke===void 0?null:ke,type:re,geometry:se,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ze){var qe=ze.geometry,Ve=ze.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")fn(ze,qe);else if(Ve==="Polygon"||Ve==="MultiLineString")for(var $e=0;$e<qe.length;$e++)fn(ze,qe[$e]);else if(Ve==="MultiPolygon")for($e=0;$e<qe.length;$e++)for(var Qe=0;Qe<qe[$e].length;Qe++)fn(ze,qe[$e][Qe])}(Te),Te}function fn(ke,re){for(var se=0;se<re.length;se+=3)ke.minX=Math.min(ke.minX,re[se]),ke.minY=Math.min(ke.minY,re[se+1]),ke.maxX=Math.max(ke.maxX,re[se]),ke.maxY=Math.max(ke.maxY,re[se+1])}function qt(ke,re,se,fe){if(re.geometry){var Te=re.geometry.coordinates,ze=re.geometry.type,qe=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),Ve=[],$e=re.id;if(se.promoteId?$e=re.properties[se.promoteId]:se.generateId&&($e=fe||0),ze==="Point")Vt(Te,Ve);else if(ze==="MultiPoint")for(var Qe=0;Qe<Te.length;Qe++)Vt(Te[Qe],Ve);else if(ze==="LineString")un(Te,Ve,qe,!1);else if(ze==="MultiLineString"){if(se.lineMetrics){for(Qe=0;Qe<Te.length;Qe++)un(Te[Qe],Ve=[],qe,!1),ke.push(Ut($e,"LineString",Ve,re.properties));return}gn(Te,Ve,qe,!1)}else if(ze==="Polygon")gn(Te,Ve,qe,!0);else{if(ze!=="MultiPolygon"){if(ze==="GeometryCollection"){for(Qe=0;Qe<re.geometry.geometries.length;Qe++)qt(ke,{id:$e,geometry:re.geometry.geometries[Qe],properties:re.properties},se,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qe=0;Qe<Te.length;Qe++){var pt=[];gn(Te[Qe],pt,qe,!0),Ve.push(pt)}}ke.push(Ut($e,ze,Ve,re.properties))}}function Vt(ke,re){re.push(Se(ke[0])),re.push(j(ke[1])),re.push(0)}function un(ke,re,se,fe){for(var Te,ze,qe=0,Ve=0;Ve<ke.length;Ve++){var $e=Se(ke[Ve][0]),Qe=j(ke[Ve][1]);re.push($e),re.push(Qe),re.push(0),Ve>0&&(qe+=fe?(Te*Qe-$e*ze)/2:Math.sqrt(Math.pow($e-Te,2)+Math.pow(Qe-ze,2))),Te=$e,ze=Qe}var pt=re.length-3;re[2]=1,Et(re,0,pt,se),re[pt+2]=1,re.size=Math.abs(qe),re.start=0,re.end=re.size}function gn(ke,re,se,fe){for(var Te=0;Te<ke.length;Te++){var ze=[];un(ke[Te],ze,se,fe),re.push(ze)}}function Se(ke){return ke/360+.5}function j(ke){var re=Math.sin(ke*Math.PI/180),se=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return se<0?0:se>1?1:se}function O(ke,re,se,fe,Te,ze,qe,Ve){if(fe/=re,ze>=(se/=re)&&qe<fe)return ke;if(qe<se||ze>=fe)return null;for(var $e=[],Qe=0;Qe<ke.length;Qe++){var pt=ke[Qe],gt=pt.geometry,yt=pt.type,tn=Te===0?pt.minX:pt.minY,cn=Te===0?pt.maxX:pt.maxY;if(tn>=se&&cn<fe)$e.push(pt);else if(!(cn<se||tn>=fe)){var Nt=[];if(yt==="Point"||yt==="MultiPoint")_e(gt,Nt,se,fe,Te);else if(yt==="LineString")Ze(gt,Nt,se,fe,Te,!1,Ve.lineMetrics);else if(yt==="MultiLineString")ut(gt,Nt,se,fe,Te,!1);else if(yt==="Polygon")ut(gt,Nt,se,fe,Te,!0);else if(yt==="MultiPolygon")for(var Xt=0;Xt<gt.length;Xt++){var hn=[];ut(gt[Xt],hn,se,fe,Te,!0),hn.length&&Nt.push(hn)}if(Nt.length){if(Ve.lineMetrics&&yt==="LineString"){for(Xt=0;Xt<Nt.length;Xt++)$e.push(Ut(pt.id,yt,Nt[Xt],pt.tags));continue}yt!=="LineString"&&yt!=="MultiLineString"||(Nt.length===1?(yt="LineString",Nt=Nt[0]):yt="MultiLineString"),yt!=="Point"&&yt!=="MultiPoint"||(yt=Nt.length===3?"Point":"MultiPoint"),$e.push(Ut(pt.id,yt,Nt,pt.tags))}}}return $e.length?$e:null}function _e(ke,re,se,fe,Te){for(var ze=0;ze<ke.length;ze+=3){var qe=ke[ze+Te];qe>=se&&qe<=fe&&(re.push(ke[ze]),re.push(ke[ze+1]),re.push(ke[ze+2]))}}function Ze(ke,re,se,fe,Te,ze,qe){for(var Ve,$e,Qe=Fe(ke),pt=Te===0?z:D,gt=ke.start,yt=0;yt<ke.length-3;yt+=3){var tn=ke[yt],cn=ke[yt+1],Nt=ke[yt+2],Xt=ke[yt+3],hn=ke[yt+4],En=Te===0?tn:cn,$n=Te===0?Xt:hn,xn=!1;qe&&(Ve=Math.sqrt(Math.pow(tn-Xt,2)+Math.pow(cn-hn,2))),En<se?$n>se&&($e=pt(Qe,tn,cn,Xt,hn,se),qe&&(Qe.start=gt+Ve*$e)):En>fe?$n<fe&&($e=pt(Qe,tn,cn,Xt,hn,fe),qe&&(Qe.start=gt+Ve*$e)):ae(Qe,tn,cn,Nt),$n<se&&En>=se&&($e=pt(Qe,tn,cn,Xt,hn,se),xn=!0),$n>fe&&En<=fe&&($e=pt(Qe,tn,cn,Xt,hn,fe),xn=!0),!ze&&xn&&(qe&&(Qe.end=gt+Ve*$e),re.push(Qe),Qe=Fe(ke)),qe&&(gt+=Ve)}var Mn=ke.length-3;tn=ke[Mn],cn=ke[Mn+1],Nt=ke[Mn+2],(En=Te===0?tn:cn)>=se&&En<=fe&&ae(Qe,tn,cn,Nt),Mn=Qe.length-3,ze&&Mn>=3&&(Qe[Mn]!==Qe[0]||Qe[Mn+1]!==Qe[1])&&ae(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&re.push(Qe)}function Fe(ke){var re=[];return re.size=ke.size,re.start=ke.start,re.end=ke.end,re}function ut(ke,re,se,fe,Te,ze){for(var qe=0;qe<ke.length;qe++)Ze(ke[qe],re,se,fe,Te,ze,!1)}function ae(ke,re,se,fe){ke.push(re),ke.push(se),ke.push(fe)}function z(ke,re,se,fe,Te,ze){var qe=(ze-re)/(fe-re);return ke.push(ze),ke.push(se+(Te-se)*qe),ke.push(1),qe}function D(ke,re,se,fe,Te,ze){var qe=(ze-se)/(Te-se);return ke.push(re+(fe-re)*qe),ke.push(ze),ke.push(1),qe}function ce(ke,re){for(var se=[],fe=0;fe<ke.length;fe++){var Te,ze=ke[fe],qe=ze.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Te=Re(ze.geometry,re);else if(qe==="MultiLineString"||qe==="Polygon"){Te=[];for(var Ve=0;Ve<ze.geometry.length;Ve++)Te.push(Re(ze.geometry[Ve],re))}else if(qe==="MultiPolygon")for(Te=[],Ve=0;Ve<ze.geometry.length;Ve++){for(var $e=[],Qe=0;Qe<ze.geometry[Ve].length;Qe++)$e.push(Re(ze.geometry[Ve][Qe],re));Te.push($e)}se.push(Ut(ze.id,qe,Te,ze.tags))}return se}function Re(ke,re){var se=[];se.size=ke.size,ke.start!==void 0&&(se.start=ke.start,se.end=ke.end);for(var fe=0;fe<ke.length;fe+=3)se.push(ke[fe]+re,ke[fe+1],ke[fe+2]);return se}function Xe(ke,re){if(ke.transformed)return ke;var se,fe,Te,ze=1<<ke.z,qe=ke.x,Ve=ke.y;for(se=0;se<ke.features.length;se++){var $e=ke.features[se],Qe=$e.geometry,pt=$e.type;if($e.geometry=[],pt===1)for(fe=0;fe<Qe.length;fe+=2)$e.geometry.push(st(Qe[fe],Qe[fe+1],re,ze,qe,Ve));else for(fe=0;fe<Qe.length;fe++){var gt=[];for(Te=0;Te<Qe[fe].length;Te+=2)gt.push(st(Qe[fe][Te],Qe[fe][Te+1],re,ze,qe,Ve));$e.geometry.push(gt)}}return ke.transformed=!0,ke}function st(ke,re,se,fe,Te,ze){return[Math.round(se*(ke*fe-Te)),Math.round(se*(re*fe-ze))]}function en(ke,re,se,fe,Te){for(var ze=re===Te.maxZoom?0:Te.tolerance/((1<<re)*Te.extent),qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:fe,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<ke.length;Ve++){qe.numFeatures++,kt(qe,ke[Ve],ze,Te);var $e=ke[Ve].minX,Qe=ke[Ve].minY,pt=ke[Ve].maxX,gt=ke[Ve].maxY;$e<qe.minX&&(qe.minX=$e),Qe<qe.minY&&(qe.minY=Qe),pt>qe.maxX&&(qe.maxX=pt),gt>qe.maxY&&(qe.maxY=gt)}return qe}function kt(ke,re,se,fe){var Te=re.geometry,ze=re.type,qe=[];if(ze==="Point"||ze==="MultiPoint")for(var Ve=0;Ve<Te.length;Ve+=3)qe.push(Te[Ve]),qe.push(Te[Ve+1]),ke.numPoints++,ke.numSimplified++;else if(ze==="LineString")yn(qe,Te,ke,se,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(Ve=0;Ve<Te.length;Ve++)yn(qe,Te[Ve],ke,se,ze==="Polygon",Ve===0);else if(ze==="MultiPolygon")for(var $e=0;$e<Te.length;$e++){var Qe=Te[$e];for(Ve=0;Ve<Qe.length;Ve++)yn(qe,Qe[Ve],ke,se,!0,Ve===0)}if(qe.length){var pt=re.tags||null;if(ze==="LineString"&&fe.lineMetrics){for(var gt in pt={},re.tags)pt[gt]=re.tags[gt];pt.mapbox_clip_start=Te.start/Te.size,pt.mapbox_clip_end=Te.end/Te.size}var yt={geometry:qe,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:pt};re.id!==null&&(yt.id=re.id),ke.features.push(yt)}}function yn(ke,re,se,fe,Te,ze){var qe=fe*fe;if(fe>0&&re.size<(Te?qe:fe))se.numPoints+=re.length/3;else{for(var Ve=[],$e=0;$e<re.length;$e+=3)(fe===0||re[$e+2]>qe)&&(se.numSimplified++,Ve.push(re[$e]),Ve.push(re[$e+1])),se.numPoints++;Te&&function(Qe,pt){for(var gt=0,yt=0,tn=Qe.length,cn=tn-2;yt<tn;cn=yt,yt+=2)gt+=(Qe[yt]-Qe[cn])*(Qe[yt+1]+Qe[cn+1]);if(gt>0===pt)for(yt=0,tn=Qe.length;yt<tn/2;yt+=2){var Nt=Qe[yt],Xt=Qe[yt+1];Qe[yt]=Qe[tn-2-yt],Qe[yt+1]=Qe[tn-1-yt],Qe[tn-2-yt]=Nt,Qe[tn-1-yt]=Xt}}(Ve,ze),ke.push(Ve)}}function An(ke,re){var se=(re=this.options=function(Te,ze){for(var qe in ze)Te[qe]=ze[qe];return Te}(Object.create(this.options),re)).debug;if(se&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var fe=function(Te,ze){var qe=[];if(Te.type==="FeatureCollection")for(var Ve=0;Ve<Te.features.length;Ve++)qt(qe,Te.features[Ve],ze,Ve);else qt(qe,Te.type==="Feature"?Te:{geometry:Te},ze);return qe}(ke,re);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fe=function(Te,ze){var qe=ze.buffer/ze.extent,Ve=Te,$e=O(Te,1,-1-qe,qe,0,-1,2,ze),Qe=O(Te,1,1-qe,2+qe,0,-1,2,ze);return($e||Qe)&&(Ve=O(Te,1,-qe,1+qe,0,-1,2,ze)||[],$e&&(Ve=ce($e,1).concat(Ve)),Qe&&(Ve=Ve.concat(ce(Qe,-1)))),Ve}(fe,re),fe.length&&this.splitTile(fe,0,0,0),se&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _n(ke,re,se){return 32*((1<<ke)*se+re)+ke}function wr(ke,re){return re?ke.properties[re]:ke.id}function pi(ke,re){if(ke==null)return!0;if(ke.type==="Feature")return wr(ke,re)!=null;if(ke.type==="FeatureCollection"){const se=new Set;for(const fe of ke.features){const Te=wr(fe,re);if(Te==null||se.has(Te))return!1;se.add(Te)}return!0}return!1}function fr(ke,re){const se=new Map;if(ke!=null)if(ke.type==="Feature")se.set(wr(ke,re),ke);else for(const fe of ke.features)se.set(wr(fe,re),fe);return se}function On(ke,re){const se=ke.tileID.canonical;if(!this._geoJSONIndex)return re(null,null);const fe=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!fe)return re(null,null);const Te=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(Ve){this._feature=Ve,this.extent=l.EXTENT,this.type=Ve.type,this.properties=Ve.tags,"id"in Ve&&!isNaN(Ve.id)&&(this.id=parseInt(Ve.id,10))}loadGeometry(){if(this._feature.type===1){const Ve=[];for(const $e of this._feature.geometry)Ve.push([new l.Point($e[0],$e[1])]);return Ve}{const Ve=[];for(const $e of this._feature.geometry){const Qe=[];for(const pt of $e)Qe.push(new l.Point(pt[0],pt[1]));Ve.push(Qe)}return Ve}}toGeoJSON(Ve,$e,Qe){return V.call(this,Ve,$e,Qe)}}(this._features[qe])}}(fe.features);let ze=me(Te);ze.byteOffset===0&&ze.byteLength===ze.buffer.byteLength||(ze=new Uint8Array(ze)),re(null,{vectorTile:Te,rawData:ze.buffer})}An.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},An.prototype.splitTile=function(ke,re,se,fe,Te,ze,qe){for(var Ve=[ke,re,se,fe],$e=this.options,Qe=$e.debug;Ve.length;){fe=Ve.pop(),se=Ve.pop(),re=Ve.pop(),ke=Ve.pop();var pt=1<<re,gt=_n(re,se,fe),yt=this.tiles[gt];if(!yt&&(Qe>1&&console.time("creation"),yt=this.tiles[gt]=en(ke,re,se,fe,$e),this.tileCoords.push({z:re,x:se,y:fe}),Qe)){Qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,se,fe,yt.numFeatures,yt.numPoints,yt.numSimplified),console.timeEnd("creation"));var tn="z"+re;this.stats[tn]=(this.stats[tn]||0)+1,this.total++}if(yt.source=ke,Te){if(re===$e.maxZoom||re===Te)continue;var cn=1<<Te-re;if(se!==Math.floor(ze/cn)||fe!==Math.floor(qe/cn))continue}else if(re===$e.indexMaxZoom||yt.numPoints<=$e.indexMaxPoints)continue;if(yt.source=null,ke.length!==0){Qe>1&&console.time("clipping");var Nt,Xt,hn,En,$n,xn,Mn=.5*$e.buffer/$e.extent,ni=.5-Mn,an=.5+Mn,br=1+Mn;Nt=Xt=hn=En=null,$n=O(ke,pt,se-Mn,se+an,0,yt.minX,yt.maxX,$e),xn=O(ke,pt,se+ni,se+br,0,yt.minX,yt.maxX,$e),ke=null,$n&&(Nt=O($n,pt,fe-Mn,fe+an,1,yt.minY,yt.maxY,$e),Xt=O($n,pt,fe+ni,fe+br,1,yt.minY,yt.maxY,$e),$n=null),xn&&(hn=O(xn,pt,fe-Mn,fe+an,1,yt.minY,yt.maxY,$e),En=O(xn,pt,fe+ni,fe+br,1,yt.minY,yt.maxY,$e),xn=null),Qe>1&&console.timeEnd("clipping"),Ve.push(Nt||[],re+1,2*se,2*fe),Ve.push(Xt||[],re+1,2*se,2*fe+1),Ve.push(hn||[],re+1,2*se+1,2*fe),Ve.push(En||[],re+1,2*se+1,2*fe+1)}}},An.prototype.getTile=function(ke,re,se){var fe=this.options,Te=fe.extent,ze=fe.debug;if(ke<0||ke>24)return null;var qe=1<<ke,Ve=_n(ke,re=(re%qe+qe)%qe,se);if(this.tiles[Ve])return Xe(this.tiles[Ve],Te);ze>1&&console.log("drilling down to z%d-%d-%d",ke,re,se);for(var $e,Qe=ke,pt=re,gt=se;!$e&&Qe>0;)Qe--,pt=Math.floor(pt/2),gt=Math.floor(gt/2),$e=this.tiles[_n(Qe,pt,gt)];return $e&&$e.source?(ze>1&&console.log("found parent tile z%d-%d-%d",Qe,pt,gt),ze>1&&console.time("drilling down"),this.splitTile($e.source,Qe,pt,gt,ke,re,se),ze>1&&console.timeEnd("drilling down"),this.tiles[Ve]?Xe(this.tiles[Ve],Te):null):null};class dr extends F{constructor(re,se,fe,Te){super(re,se,fe,On),this._dataUpdateable=new Map,this.loadGeoJSON=(ze,qe)=>{const{promoteId:Ve}=ze;if(ze.request)return l.getJSON(ze.request,($e,Qe,pt,gt)=>{this._dataUpdateable=pi(Qe,Ve)?fr(Qe,Ve):void 0,qe($e,Qe,pt,gt)});if(typeof ze.data=="string")try{const $e=JSON.parse(ze.data);this._dataUpdateable=pi($e,Ve)?fr($e,Ve):void 0,qe(null,$e)}catch{qe(new Error(`Input data given to '${ze.source}' is not a valid GeoJSON object.`))}else ze.dataDiff?this._dataUpdateable?(function($e,Qe,pt){var gt,yt,tn,cn;if(Qe.removeAll&&$e.clear(),Qe.remove)for(const Nt of Qe.remove)$e.delete(Nt);if(Qe.add)for(const Nt of Qe.add){const Xt=wr(Nt,pt);Xt!=null&&$e.set(Xt,Nt)}if(Qe.update)for(const Nt of Qe.update){let Xt=$e.get(Nt.id);if(Xt==null)continue;const hn=!Nt.removeAllProperties&&(((gt=Nt.removeProperties)===null||gt===void 0?void 0:gt.length)>0||((yt=Nt.addOrUpdateProperties)===null||yt===void 0?void 0:yt.length)>0);if((Nt.newGeometry||Nt.removeAllProperties||hn)&&(Xt={...Xt},$e.set(Nt.id,Xt),hn&&(Xt.properties={...Xt.properties})),Nt.newGeometry&&(Xt.geometry=Nt.newGeometry),Nt.removeAllProperties)Xt.properties={};else if(((tn=Nt.removeProperties)===null||tn===void 0?void 0:tn.length)>0)for(const En of Nt.removeProperties)Object.prototype.hasOwnProperty.call(Xt.properties,En)&&delete Xt.properties[En];if(((cn=Nt.addOrUpdateProperties)===null||cn===void 0?void 0:cn.length)>0)for(const{key:En,value:$n}of Nt.addOrUpdateProperties)Xt.properties[En]=$n}}(this._dataUpdateable,ze.dataDiff,Ve),qe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):qe(new Error(`Cannot update existing geojson data in ${ze.source}`)):qe(new Error(`Input data given to '${ze.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Te&&(this.loadGeoJSON=Te)}loadData(re,se){var fe;(fe=this._pendingRequest)===null||fe===void 0||fe.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Te=!!(re&&re.request&&re.request.collectResourceTiming)&&new l.RequestPerformance(re.request);this._pendingCallback=se,this._pendingRequest=this.loadGeoJSON(re,(ze,qe)=>{if(delete this._pendingCallback,delete this._pendingRequest,ze||!qe)return se(ze);if(typeof qe!="object")return se(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));{G(qe,!0);try{if(re.filter){const $e=l.createExpression(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if($e.result==="error")throw new Error($e.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));qe={type:"FeatureCollection",features:qe.features.filter(pt=>$e.value.evaluate({zoom:0},pt))}}this._geoJSONIndex=re.cluster?new Ge(function({superclusterOptions:$e,clusterProperties:Qe}){if(!Qe||!$e)return $e;const pt={},gt={},yt={accumulated:null,zoom:0},tn={properties:null},cn=Object.keys(Qe);for(const Nt of cn){const[Xt,hn]=Qe[Nt],En=l.createExpression(hn),$n=l.createExpression(typeof Xt=="string"?[Xt,["accumulated"],["get",Nt]]:Xt);pt[Nt]=En.value,gt[Nt]=$n.value}return $e.map=Nt=>{tn.properties=Nt;const Xt={};for(const hn of cn)Xt[hn]=pt[hn].evaluate(yt,tn);return Xt},$e.reduce=(Nt,Xt)=>{tn.properties=Xt;for(const hn of cn)yt.accumulated=Nt[hn],Nt[hn]=gt[hn].evaluate(yt,tn)},$e}(re)).load(qe.features):function($e,Qe){return new An($e,Qe)}(qe,re.geojsonVtOptions)}catch($e){return se($e)}this.loaded={};const Ve={};if(Te){const $e=Te.finish();$e&&(Ve.resourceTiming={},Ve.resourceTiming[re.source]=JSON.parse(JSON.stringify($e)))}se(null,Ve)}})}reloadTile(re,se){const fe=this.loaded;return fe&&fe[re.uid]?super.reloadTile(re,se):this.loadTile(re,se)}removeSource(re,se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),se()}getClusterExpansionZoom(re,se){try{se(null,this._geoJSONIndex.getClusterExpansionZoom(re.clusterId))}catch(fe){se(fe)}}getClusterChildren(re,se){try{se(null,this._geoJSONIndex.getChildren(re.clusterId))}catch(fe){se(fe)}}getClusterLeaves(re,se){try{se(null,this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset))}catch(fe){se(fe)}}}class mi{constructor(re){this.self=re,this.actor=new l.Actor(re,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:F,geojson:dr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(se,fe)=>{if(this.workerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.workerSourceTypes[se]=fe},this.self.registerRTLTextPlugin=se=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=se.applyArabicShaping,l.plugin.processBidirectionalText=se.processBidirectionalText,l.plugin.processStyledBidirectionalText=se.processStyledBidirectionalText}}setReferrer(re,se){this.referrer=se}setImages(re,se,fe){this.availableImages[re]=se;for(const Te in this.workerSources[re]){const ze=this.workerSources[re][Te];for(const qe in ze)ze[qe].availableImages=se}fe()}setLayers(re,se,fe){this.getLayerIndex(re).replace(se),fe()}updateLayers(re,se,fe){this.getLayerIndex(re).update(se.layers,se.removedIds),fe()}loadTile(re,se,fe){this.getWorkerSource(re,se.type,se.source).loadTile(se,fe)}loadDEMTile(re,se,fe){this.getDEMWorkerSource(re,se.source).loadTile(se,fe)}reloadTile(re,se,fe){this.getWorkerSource(re,se.type,se.source).reloadTile(se,fe)}abortTile(re,se,fe){this.getWorkerSource(re,se.type,se.source).abortTile(se,fe)}removeTile(re,se,fe){this.getWorkerSource(re,se.type,se.source).removeTile(se,fe)}removeDEMTile(re,se){this.getDEMWorkerSource(re,se.source).removeTile(se)}removeSource(re,se,fe){if(!this.workerSources[re]||!this.workerSources[re][se.type]||!this.workerSources[re][se.type][se.source])return;const Te=this.workerSources[re][se.type][se.source];delete this.workerSources[re][se.type][se.source],Te.removeSource!==void 0?Te.removeSource(se,fe):fe()}loadWorkerSource(re,se,fe){try{this.self.importScripts(se.url),fe()}catch(Te){fe(Te.toString())}}syncRTLPluginState(re,se,fe){try{l.plugin.setState(se);const Te=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Te!=null){this.self.importScripts(Te);const ze=l.plugin.isParsed();fe(ze?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Te}`),ze)}}catch(Te){fe(Te.toString())}}getAvailableImages(re){let se=this.availableImages[re];return se||(se=[]),se}getLayerIndex(re){let se=this.layerIndexes[re];return se||(se=this.layerIndexes[re]=new b),se}getWorkerSource(re,se,fe){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][se]||(this.workerSources[re][se]={}),!this.workerSources[re][se][fe]){const Te={send:(ze,qe,Ve)=>{this.actor.send(ze,qe,Ve,re)}};this.workerSources[re][se][fe]=new this.workerSourceTypes[se](Te,this.getLayerIndex(re),this.getAvailableImages(re))}return this.workerSources[re][se][fe]}getDEMWorkerSource(re,se){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][se]||(this.demWorkerSources[re][se]=new Q),this.demWorkerSources[re][se]}}return l.isWorker()&&(self.worker=new mi(self)),mi}),d(["./shared"],function(l){var b="3.3.1";class w{static testProp(r){if(!w.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in w.docStyle)return r[u];return r[0]}static create(r,u,f){const m=window.document.createElement(r);return u!==void 0&&(m.className=u),f&&f.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,u){r.style[w.transformProp]=u}static addEventListener(r,u,f,m={}){r.addEventListener(u,f,"passive"in m?m:m.capture)}static removeEventListener(r,u,f,m={}){r.removeEventListener(u,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,u){const f=r.getBoundingClientRect();return new l.Point(u.clientX-f.left-r.clientLeft,u.clientY-f.top-r.clientTop)}static touchPos(r,u){const f=r.getBoundingClientRect(),m=[];for(let _=0;_<u.length;_++)m.push(new l.Point(u[_].clientX-f.left-r.clientLeft,u[_].clientY-f.top-r.clientTop));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const A={supported:!1,testSupport:function(g){!F&&L&&(Q?K(g):E=g)}};let E,L,F=!1,Q=!1;function K(g){const r=g.createTexture();g.bindTexture(g.TEXTURE_2D,r);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,L),g.isContextLost())return;A.supported=!0}catch{}g.deleteTexture(r),F=!0}var pe,G;typeof document<"u"&&(L=document.createElement("img"),L.onload=function(){E&&K(E),E=null,Q=!0},L.onerror=function(){F=!0,E=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let r,u,f,m;g.resetRequestQueue=()=>{r=[],u=0,f=0,m={}},g.addThrottleControl=B=>{const H=f++;return m[H]=B,H},g.removeThrottleControl=B=>{delete m[B],I()},g.getImage=(B,H,Y=!0)=>{A.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*");const he={requestParameters:B,supportImageRefresh:Y,callback:H,cancelled:!1,completed:!1,cancel:()=>{he.completed||he.cancelled||(he.cancelled=!0,he.innerRequest&&(he.innerRequest.cancel(),u--),I())}};return r.push(he),I(),he};const _=B=>{const{requestParameters:H,supportImageRefresh:Y,callback:he}=B;return l.extend(H,{type:"image"}),(Y!==!1||l.isWorker()||l.getProtocolAction(H.url)||H.headers&&!Object.keys(H.headers).reduce((Ie,Ae)=>Ie&&Ae==="accept",!0)?l.makeRequest:k)(H,(Ie,Ae,Oe,Ce)=>{C(B,he,Ie,Ae,Oe,Ce)})},C=(B,H,Y,he,Ie,Ae)=>{Y?H(Y):he instanceof HTMLImageElement||l.isImageBitmap(he)?H(null,he):he&&((Oe,Ce)=>{typeof createImageBitmap=="function"?l.arrayBufferToImageBitmap(Oe,Ce):l.arrayBufferToImage(Oe,Ce)})(he,(Oe,Ce)=>{Oe!=null?H(Oe):Ce!=null&&H(null,Ce,{cacheControl:Ie,expires:Ae})}),B.cancelled||(B.completed=!0,u--,I())},I=()=>{const B=(()=>{const H=Object.keys(m);let Y=!1;if(H.length>0){for(const he of H)if(Y=m[he](),Y)break}return Y})()?l.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=u;H<B&&r.length>0;H++){const Y=r.shift();if(Y.cancelled){H--;continue}const he=_(Y);u++,Y.innerRequest=he}},k=(B,H)=>{const Y=new Image,he=B.url;let Ie=!1;const Ae=B.credentials;return Ae&&Ae==="include"?Y.crossOrigin="use-credentials":(Ae&&Ae==="same-origin"||!l.sameOrigin(he))&&(Y.crossOrigin="anonymous"),Y.fetchPriority="high",Y.onload=()=>{H(null,Y),Y.onerror=Y.onload=null},Y.onerror=()=>{Ie||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),Y.onerror=Y.onload=null},Y.src=he,{cancel:()=>{Ie=!0,Y.src=""}}}}(pe||(pe={})),pe.resetRequestQueue(),function(g){g.Glyphs="Glyphs",g.Image="Image",g.Source="Source",g.SpriteImage="SpriteImage",g.SpriteJSON="SpriteJSON",g.Style="Style",g.Tile="Tile",g.Unknown="Unknown"}(G||(G={}));class V{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,f){const m=function(_){const C=_.match(U);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(r);return m.path+=`${u}${f}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const U=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function oe(g){var r=new l.ARRAY_TYPE(3);return r[0]=g[0],r[1]=g[1],r[2]=g[2],r}var W,N=function(g,r,u){return g[0]=r[0]-u[0],g[1]=r[1]-u[1],g[2]=r[2]-u[2],g};W=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(W[0]=0,W[1]=0,W[2]=0);var S=function(g){var r=g[0],u=g[1];return r*r+u*u};function M(g){const r=[];if(typeof g=="string")r.push({id:"default",url:g});else if(g&&g.length>0){const u=[];for(const{id:f,url:m}of g){const _=`${f}${m}`;u.indexOf(_)===-1&&(u.push(_),r.push({id:f,url:m}))}}return r}function Z(g,r,u,f,m){if(f)return void g(f);if(m!==Object.values(r).length||m!==Object.values(u).length)return;const _={};for(const C in r){_[C]={};const I=l.browser.getImageCanvasContext(u[C]),k=r[C];for(const B in k){const{width:H,height:Y,x:he,y:Ie,sdf:Ae,pixelRatio:Oe,stretchX:Ce,stretchY:Ke,content:nt}=k[B];_[C][B]={data:null,pixelRatio:Oe,sdf:Ae,stretchX:Ce,stretchY:Ke,content:nt,spriteData:{width:H,height:Y,x:he,y:Ie,context:I}}}}g(null,_)}(function(){var g=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(g[0]=0,g[1]=0)})();class q{constructor(r,u,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(u,m)}update(r,u,f){const{width:m,height:_}=r,C=!(this.size&&this.size[0]===m&&this.size[1]===_||f),{context:I}=this,{gl:k}=I;if(this.useMipmap=!!(u&&u.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,r):k.texImage2D(k.TEXTURE_2D,0,this.format,m,_,0,this.format,k.UNSIGNED_BYTE,r.data);else{const{x:B,y:H}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?k.texSubImage2D(k.TEXTURE_2D,0,B,H,k.RGBA,k.UNSIGNED_BYTE,r):k.texSubImage2D(k.TEXTURE_2D,0,B,H,m,_,k.RGBA,k.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(r,u,f){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||r),this.filter=r),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function J(g){const{userImage:r}=g;return!!(r&&r.render&&r.render())&&(g.data.replace(new Uint8Array(r.data.buffer)),!0)}class ye extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new l.RGBAImage({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let f=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,u){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||u<m[1])return!1;f=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const f=u.spriteData,m=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let f=!0;if(!this.isLoaded())for(const m of r)this.images[m]||(f=!1);this.isLoaded()||f?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const f={};for(const m of r){let _=this.getImage(m);_||(this.fire(new l.Event("styleimagemissing",{id:m})),_=this.getImage(m)),_?f[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],f=this.getImage(r);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new l.ImagePosition(m,f);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:u,h:f}=l.potpack(r),m=this.atlasImage;m.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],I=C.x+1,k=C.y+1,B=this.getImage(_).data,H=B.width,Y=B.height;l.RGBAImage.copy(B,m,{x:0,y:0},{x:I,y:k},{width:H,height:Y}),l.RGBAImage.copy(B,m,{x:0,y:Y-1},{x:I,y:k-1},{width:H,height:1}),l.RGBAImage.copy(B,m,{x:0,y:0},{x:I,y:k+Y},{width:H,height:1}),l.RGBAImage.copy(B,m,{x:H-1,y:0},{x:I-1,y:k},{width:1,height:Y}),l.RGBAImage.copy(B,m,{x:0,y:0},{x:I+H,y:k},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||l.warnOnce(`Image with ID: "${u}" was not found`),J(f)&&this.updateImage(u,f)}}}const xe=1e20;function be(g,r,u,f,m,_,C,I,k){for(let B=r;B<r+f;B++)te(g,u*_+B,_,m,C,I,k);for(let B=u;B<u+m;B++)te(g,B*_+r,1,f,C,I,k)}function te(g,r,u,f,m,_,C){_[0]=0,C[0]=-xe,C[1]=xe,m[0]=g[r];for(let I=1,k=0,B=0;I<f;I++){m[I]=g[r+I*u];const H=I*I;do{const Y=_[k];B=(m[I]-m[Y]+H-Y*Y)/(I-Y)/2}while(B<=C[k]&&--k>-1);k++,_[k]=I,C[k]=B,C[k+1]=xe}for(let I=0,k=0;I<f;I++){for(;C[k+1]<I;)k++;const B=_[k],H=I-B;g[r+I*u]=m[B]+H*H}}class le{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const f=[];for(const m in r)for(const _ of r[m])f.push({stack:m,id:_});l.asyncAll(f,({stack:m,id:_},C)=>{let I=this.entries[m];I||(I=this.entries[m]={glyphs:{},requests:{},ranges:{}});let k=I.glyphs[_];if(k!==void 0)return void C(null,{stack:m,id:_,glyph:k});if(k=this._tinySDF(I,m,_),k)return I.glyphs[_]=k,void C(null,{stack:m,id:_,glyph:k});const B=Math.floor(_/256);if(256*B>65535)return void C(new Error("glyphs > 65535 not supported"));if(I.ranges[B])return void C(null,{stack:m,id:_,glyph:k});if(!this.url)return void C(new Error("glyphsUrl is not set"));let H=I.requests[B];H||(H=I.requests[B]=[],le.loadGlyphRange(m,B,this.url,this.requestManager,(Y,he)=>{if(he){for(const Ie in he)this._doesCharSupportLocalGlyph(+Ie)||(I.glyphs[+Ie]=he[+Ie]);I.ranges[B]=!0}for(const Ie of H)Ie(Y,he);delete I.requests[B]})),H.push((Y,he)=>{Y?C(Y):he&&C(null,{stack:m,id:_,glyph:he[_]||null})})},(m,_)=>{if(m)u(m);else if(_){const C={};for(const{stack:I,id:k,glyph:B}of _)(C[I]||(C[I]={}))[k]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](r)||l.unicodeBlockLookup["Hangul Syllables"](r)||l.unicodeBlockLookup.Hiragana(r)||l.unicodeBlockLookup.Katakana(r))}_tinySDF(r,u,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let _=r.tinySDF;if(!_){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),_=r.tinySDF=new le.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:m,fontWeight:I})}const C=_.draw(String.fromCharCode(f));return{id:f,bitmap:new l.AlphaImage({width:C.width||30,height:C.height||30},C.data),metrics:{width:C.glyphWidth||24,height:C.glyphHeight||24,left:C.glyphLeft||0,top:C.glyphTop-27||-8,advance:C.glyphAdvance||24}}}}le.loadGlyphRange=function(g,r,u,f,m){const _=256*r,C=_+255,I=f.transformRequest(u.replace("{fontstack}",g).replace("{range}",`${_}-${C}`),G.Glyphs);l.getArrayBuffer(I,(k,B)=>{if(k)m(k);else if(B){const H={};for(const Y of l.parseGlyphPbf(B))H[Y.id]=Y;m(null,H)}})},le.TinySDF=class{constructor({fontSize:g=24,buffer:r=3,radius:u=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=u;const I=this.size=g+4*r,k=this._createCanvas(I),B=this.ctx=k.getContext("2d",{willReadFrequently:!0});B.font=`${C} ${_} ${g}px ${m}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(g){const r=document.createElement("canvas");return r.width=r.height=g,r}draw(g){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(g),C=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),k=Math.min(this.size-this.buffer,C+Math.ceil(f)),B=I+2*this.buffer,H=k+2*this.buffer,Y=Math.max(B*H,0),he=new Uint8ClampedArray(Y),Ie={data:he,width:B,height:H,glyphWidth:I,glyphHeight:k,glyphTop:C,glyphLeft:0,glyphAdvance:r};if(I===0||k===0)return Ie;const{ctx:Ae,buffer:Oe,gridInner:Ce,gridOuter:Ke}=this;Ae.clearRect(Oe,Oe,I,k),Ae.fillText(g,Oe,Oe+C);const nt=Ae.getImageData(Oe,Oe,I,k);Ke.fill(xe,0,Y),Ce.fill(0,0,Y);for(let De=0;De<k;De++)for(let Ye=0;Ye<I;Ye++){const at=nt.data[4*(De*I+Ye)+3]/255;if(at===0)continue;const lt=(De+Oe)*B+Ye+Oe;if(at===1)Ke[lt]=0,Ce[lt]=xe;else{const ft=.5-at;Ke[lt]=ft>0?ft*ft:0,Ce[lt]=ft<0?ft*ft:0}}be(Ke,0,0,B,H,B,this.f,this.v,this.z),be(Ce,Oe,Oe,I,k,B,this.f,this.v,this.z);for(let De=0;De<Y;De++){const Ye=Math.sqrt(Ke[De])-Math.sqrt(Ce[De]);he[De]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return Ie}};class ie{constructor(){this.specification=l.v8Spec.light.position}possiblyEvaluate(r,u){return l.sphericalToCartesian(r.expression.evaluate(u))}interpolate(r,u,f){return{x:l.interpolate.number(r.x,u.x,f),y:l.interpolate.number(r.y,u.y,f),z:l.interpolate.number(r.z,u.z,f)}}}let ne,me;class Ee extends l.Evented{constructor(r){super(),ne=ne||new l.Properties({anchor:new l.DataConstantProperty(l.v8Spec.light.anchor),position:new ie,color:new l.DataConstantProperty(l.v8Spec.light.color),intensity:new l.DataConstantProperty(l.v8Spec.light.intensity)}),this._transitionable=new l.Transitionable(ne),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.validateLight,r,u))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f){return(!f||f.validate!==!1)&&l.emitValidationErrors(this,r.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v8Spec})))}}class we{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const f=r.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,u)),this.dashEntry[f]}getDashRanges(r,u,f){const m=[];let _=r.length%2==1?-r[r.length-1]*f:0,C=r[0]*f,I=!0;m.push({left:_,right:C,isDash:I,zeroLength:r[0]===0});let k=r[0];for(let B=1;B<r.length;B++){I=!I;const H=r[B];_=k*f,k+=H,C=k*f,m.push({left:_,right:C,isDash:I,zeroLength:H===0})}return m}addRoundDash(r,u,f){const m=u/2;for(let _=-f;_<=f;_++){const C=this.width*(this.nextRow+f+_);let I=0,k=r[I];for(let B=0;B<this.width;B++){B/k.right>1&&(k=r[++I]);const H=Math.abs(B-k.left),Y=Math.abs(B-k.right),he=Math.min(H,Y);let Ie;const Ae=_/f*(m+1);if(k.isDash){const Oe=m-Math.abs(Ae);Ie=Math.sqrt(he*he+Oe*Oe)}else Ie=m-Math.sqrt(he*he+Ae*Ae);this.data[C+B]=Math.max(0,Math.min(255,Ie+128))}}}addRegularDash(r){for(let I=r.length-1;I>=0;--I){const k=r[I],B=r[I+1];k.zeroLength?r.splice(I,1):B&&B.isDash===k.isDash&&(B.left=k.left,r.splice(I,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const m=this.width*this.nextRow;let _=0,C=r[_];for(let I=0;I<this.width;I++){I/C.right>1&&(C=r[++_]);const k=Math.abs(I-C.left),B=Math.abs(I-C.right),H=Math.min(k,B);this.data[m+I]=Math.max(0,Math.min(255,(C.isDash?H:-H)+128))}}addDash(r,u){const f=u?7:0,m=2*f+1;if(this.nextRow+m>this.height)return l.warnOnce("LineAtlas out of space"),null;let _=0;for(let I=0;I<r.length;I++)_+=r[I];if(_!==0){const I=this.width/_,k=this.getDashRanges(r,this.width,I);u?this.addRoundDash(k,I,f):this.addRegularDash(k)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=m,this.dirty=!0,C}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Ue{constructor(r,u,f){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=f;const m=this.workerPool.acquire(f);for(let _=0;_<m.length;_++){const C=new Ue.Actor(m[_],u,f);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,f){l.asyncAll(this.actors,(m,_)=>{m.send(r,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function Le(g,r,u){const f=function(m,_){if(m)return u(m);if(_){const C=l.pick(l.extend(_,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(I=>I.id)),u(null,C)}};return g.url?l.getJSON(r.transformRequest(g.url,G.Source),f):l.browser.frame(()=>f(null,g))}Ue.Actor=l.Actor;class Me{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.LngLat?new l.LngLat(r.lng,r.lat):l.LngLat.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.LngLat?new l.LngLat(r.lng,r.lat):l.LngLat.convert(r),this}extend(r){const u=this._sw,f=this._ne;let m,_;if(r instanceof l.LngLat)m=r,_=r;else{if(!(r instanceof Me))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Me.convert(r)):this.extend(l.LngLat.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.LngLat.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return u||f?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new l.LngLat(m.lng,m.lat),this._ne=new l.LngLat(_.lng,_.lat)),this}getCenter(){return new l.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new l.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:f}=l.LngLat.convert(r);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Me?r:r&&new Me(r)}static fromLngLat(r,u=0){const f=360*u/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Me(new l.LngLat(r.lng-m,r.lat-f),new l.LngLat(r.lng+m,r.lat+f))}}class He{constructor(r,u,f){this.bounds=Me.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),f=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*u),m=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*u),_=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*u),C=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*u);return r.x>=f&&r.x<_&&r.y>=m&&r.y<C}}class Ge extends l.Evented{constructor(r,u,f,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Le(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.ErrorEvent(_)):C&&(l.extend(this,C),C.bounds&&(this.tileBounds=new He(C.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.extend({},this._options),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(u,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(f,G.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,I){return delete r.request,r.aborted?u(null):C&&C.status!==404?u(C):(I&&I.resourceTiming&&(r.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&r.setExpiryData(I),r.loadVectorData(I,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",m,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",m,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class rt extends l.Evented{constructor(r,u,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},u),l.extend(this,l.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Le(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.ErrorEvent(r)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new He(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=pe.getImage(this.map._requestManager.transformRequest(f,G.Tile),(m,_,C)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(m)r.state="errored",u(m);else if(_){this.map._refreshExpiredTiles&&C&&r.setExpiryData(C);const I=this.map.painter.context,k=I.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new q(I,_,k.RGBA,{useMipmap:!0}),r.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class ct extends rt{constructor(r,u,f,m){super(r,u,f,m),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function m(_,C){_&&(r.state="errored",u(_)),C&&(r.dem=C,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.request=pe.getImage(this.map._requestManager.transformRequest(f,G.Tile),(function(_,C){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(_)r.state="errored",u(_);else if(C){this.map._refreshExpiredTiles&&r.setExpiryData(C),delete C.cacheControl,delete C.expires;const I=l.isImageBitmap(C)&&(me==null&&(me=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),me)?C:l.browser.getImageData(C,1),k={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:I,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",k,m.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),r.neighboringTiles=this._getNeighboringTiles(r.tileID)}_getNeighboringTiles(r){const u=r.canonical,f=Math.pow(2,u.z),m=(u.x-1+f)%f,_=u.x===0?r.wrap-1:r.wrap,C=(u.x+1+f)%f,I=u.x+1===f?r.wrap+1:r.wrap,k={};return k[new l.OverscaledTileID(r.overscaledZ,_,u.z,m,u.y).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,I,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(k[new l.OverscaledTileID(r.overscaledZ,_,u.z,m,u.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,I,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<f&&(k[new l.OverscaledTileID(r.overscaledZ,_,u.z,m,u.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,I,u.z,C,u.y+1).key]={backfilled:!1}),k}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class vt extends l.Evented{constructor(r,u,f,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.extend({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=u.data,this._options=l.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.EXTENT,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,f,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:f},m),this}_updateWorkerData(r){const u=l.extend({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.browser.resolveURL(this._data),G.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source"}));let _=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_=m.resourceTiming[this.id].slice(0)),f)return void this.fire(new l.ErrorEvent(f));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.extend(C,{resourceTiming:_}),this.fire(new l.Event("data",{...C,sourceDataType:"metadata"})),this.fire(new l.Event("data",{...C,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const f=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(f,m,(_,C)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):_?u(_):(r.loadVectorData(C,this.map.painter,f==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Pt=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ht extends l.Evented{constructor(r,u,f,m){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=pe.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(I,k)=>{this._request=null,this._loaded=!0,I?this.fire(new l.ErrorEvent(I)):k&&(this.image=k,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Pt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let I=!1;for(const k in this.tiles){const B=this.tiles[k];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,I=!0)}I&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(m){let _=1/0,C=1/0,I=-1/0,k=-1/0;for(const he of m)_=Math.min(_,he.x),C=Math.min(C,he.y),I=Math.max(I,he.x),k=Math.max(k,he.y);const B=Math.max(I-_,k-C),H=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),Y=Math.pow(2,H);return new l.CanonicalTileID(H,Math.floor((_+I)/2*Y),Math.floor((C+k)/2*Y))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}hasTransition(){return!1}}class Et extends ht{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,G.Source).url);l.getVideo(this.urls,(C,I)=>{this._loaded=!0,C?this.fire(new l.ErrorEvent(C)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Pt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new q(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let I=!1;for(const k in this.tiles){const B=this.tiles[k];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,I=!0)}I&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Je extends ht{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,I=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Pt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(C,this.canvas,I.RGBA,{premultiply:!0});let k=!1;for(const B in this.tiles){const H=this.tiles[B];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture,k=!0)}k&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Ut={},fn=g=>{switch(g){case"geojson":return vt;case"image":return ht;case"raster":return rt;case"raster-dem":return ct;case"vector":return Ge;case"video":return Et;case"canvas":return Je}return Ut[g]};function qt(g,r){const u=l.create();return l.translate(u,u,[1,1,0]),l.scale(u,u,[.5*g.width,.5*g.height,1]),l.multiply(u,u,g.calculatePosMatrix(r.toUnwrapped()))}function Vt(g,r,u,f,m,_){const C=function(Y,he,Ie){if(Y)for(const Ae of Y){const Oe=he[Ae];if(Oe&&Oe.source===Ie&&Oe.type==="fill-extrusion")return!0}else for(const Ae in he){const Oe=he[Ae];if(Oe.source===Ie&&Oe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,g.id),I=_.maxPitchScaleFactor(),k=g.tilesIn(f,I,C);k.sort(un);const B=[];for(const Y of k)B.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(r,u,g._state,Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,m,_,I,qt(g.transform,Y.tileID))});const H=function(Y){const he={},Ie={};for(const Ae of Y){const Oe=Ae.queryResults,Ce=Ae.wrappedTileID,Ke=Ie[Ce]=Ie[Ce]||{};for(const nt in Oe){const De=Oe[nt],Ye=Ke[nt]=Ke[nt]||{},at=he[nt]=he[nt]||[];for(const lt of De)Ye[lt.featureIndex]||(Ye[lt.featureIndex]=!0,at.push(lt))}}return he}(B);for(const Y in H)H[Y].forEach(he=>{const Ie=he.feature,Ae=g.getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=Ae});return H}function un(g,r){const u=g.tileID,f=r.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class gn{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const C={};if(!_)return C;for(const I of m){const k=I.layerIds.map(B=>_.getLayer(B)).filter(Boolean);if(k.length!==0){I.layers=k,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(B=>k.filter(H=>H.id===B)[0]));for(const B of k)C[B.id]=I}}return C}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.SymbolBucket&&_.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,f,m,_,C,I,k,B,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:H,transform:k,params:I,queryPadding:this.queryPadding*B},r,u,f):{}}querySourceFeatures(r,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",C=m._geojsonTileLayer||m[_];if(!C)return;const I=l.createFilter(u&&u.filter),{z:k,x:B,y:H}=this.tileID.canonical,Y={z:k,x:B,y:H};for(let he=0;he<C.length;he++){const Ie=C.feature(he);if(I.needGeometry){const Ce=l.toEvaluationFeature(Ie,!0);if(!I.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!I.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Ie))continue;const Ae=f.getId(Ie,_),Oe=new l.GeoJSONFeature(Ie,k,B,H,Ae);Oe.tile=Y,r.push(Oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const f=l.parseCacheControl(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const _=this.buckets[m],C=_.layers[0].sourceLayer||"_geojsonTileLayer",I=f[C],k=r[C];if(!I||!k||Object.keys(k).length===0)continue;_.update(k,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const B=u&&u.style&&u.style.getLayer(m);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.browser.now()+r}setDependencies(r,u){const f={};for(const m of u)f[m]=!0;this.dependencies[r]=f}hasDependency(r,u){for(const f of r){const m=this.dependencies[f];if(m){for(const _ of u)if(m[_])return!0}}return!1}}class Se{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},f)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const f=r.wrapped().key,m=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][m];return this.data[f].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||u.push(m);for(const f of u)this.remove(f.value.tileID,f)}}class j{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,f){const m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},l.extend(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])f[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,u,f){if(this.deletedStates[r]===null)return;const m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,u){const f=String(u),m=l.extend({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][u];if(_===null)return{};for(const C in _)delete m[C]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const C in this.stateChanges[m])this.state[m][C]||(this.state[m][C]={}),l.extend(this.state[m][C],this.stateChanges[m][C]),_[C]=this.state[m][C];f[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const C in this.state[m])_[C]={},this.state[m][C]={};else for(const C in this.deletedStates[m]){if(this.deletedStates[m][C]===null)this.state[m][C]={};else for(const I of Object.keys(this.deletedStates[m][C]))delete this.state[m][C][I];_[C]=this.state[m][C]}f[m]=f[m]||{},l.extend(f[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,u)}}class O extends l.Evented{constructor(r,u,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,C,I)=>{const k=new(fn(_.type))(m,_,C,I);if(k.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${k.id}`);return k})(r,u,f,this),this._tiles={},this._cache=new Se(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new j,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(_e).map(r=>r.key)}getRenderableIds(r){const u=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&u.push(this._tiles[f]);return r?u.sort((f,m)=>{const _=f.tileID,C=m.tileID,I=new l.Point(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),k=new l.Point(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||k.y-I.y||k.x-I.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(_e).map(f=>f.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,r,u)))}_tileLoaded(r,u,f,m){if(m)return r.state="errored",void(m.status!==404?this._source.fire(new l.ErrorEvent(m,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.browser.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const _=u[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const C=this.getTileByID(_);f(r,C),f(C,r)}}function f(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-m.tileID.canonical.x;const I=_.tileID.canonical.y-m.tileID.canonical.y,k=Math.pow(2,m.tileID.canonical.z),B=_.tileID.key;C===0&&I===0||Math.abs(I)>1||(Math.abs(C)>1&&(Math.abs(C+k)===1?C+=k:Math.abs(C-k)===1&&(C-=k)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,C,I),m.neighboringTiles&&m.neighboringTiles[B]&&(m.neighboringTiles[B].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,f,m){for(const _ in this._tiles){let C=this._tiles[_];if(m[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>f)continue;let I=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const B=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[B.key],C&&C.hasData()&&(I=B)}let k=I;for(;k.overscaledZ>u;)if(k=k.scaledTo(k.overscaledZ-1),r[k.key]){m[I.key]=I;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=r.overscaledZ-1;f>=u;f--){const m=r.scaledTo(f),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?l.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const f={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(H=>new l.OverscaledTileID(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(H=>this._source.hasTile(H)))):f=[];const m=r.coveringZoomLevel(this._source),_=Math.max(m-O.maxOverzooming,this._source.minzoom),C=Math.max(m+O.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const H={};for(const Y of f)if(Y.canonical.z>this._source.minzoom){const he=Y.scaledTo(Y.canonical.z-1);H[he.key]=he;const Ie=Y.scaledTo(Math.max(this._source.minzoom,Math.min(Y.canonical.z,5)));H[Ie.key]=Ie}f=f.concat(Object.values(H))}const I=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new l.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(f,m);if(Ze(this._source.type)){const H={},Y={},he=Object.keys(k),Ie=l.browser.now();for(const Ae of he){const Oe=k[Ae],Ce=this._tiles[Ae];if(!Ce||Ce.fadeEndTime!==0&&Ce.fadeEndTime<=Ie)continue;const Ke=this.findLoadedParent(Oe,_);Ke&&(this._addTile(Ke.tileID),H[Ke.tileID.key]=Ke.tileID),Y[Ae]=Oe}this._retainLoadedChildren(Y,m,C,k);for(const Ae in H)k[Ae]||(this._coveredTiles[Ae]=!0,k[Ae]=H[Ae]);if(u){const Ae={},Oe={};for(const Ce of f)this._tiles[Ce.key].hasData()?Ae[Ce.key]=Ce:Oe[Ce.key]=Ce;for(const Ce in Oe){const Ke=Oe[Ce].children(this._source.maxzoom);this._tiles[Ke[0].key]&&this._tiles[Ke[1].key]&&this._tiles[Ke[2].key]&&this._tiles[Ke[3].key]&&(Ae[Ke[0].key]=k[Ke[0].key]=Ke[0],Ae[Ke[1].key]=k[Ke[1].key]=Ke[1],Ae[Ke[2].key]=k[Ke[2].key]=Ke[2],Ae[Ke[3].key]=k[Ke[3].key]=Ke[3],delete Oe[Ce])}for(const Ce in Oe){const Ke=this.findLoadedParent(Oe[Ce],this._source.minzoom);if(Ke){Ae[Ke.tileID.key]=k[Ke.tileID.key]=Ke.tileID;for(const nt in Ae)Ae[nt].isChildOf(Ke.tileID)&&delete Ae[nt]}}for(const Ce in this._tiles)Ae[Ce]||(this._coveredTiles[Ce]=!0)}}for(const H in k)this._tiles[H].clearFadeHold();const B=l.keysDifference(this._tiles,k);for(const H of B){const Y=this._tiles[H];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(H)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const f={},m={},_=Math.max(u-O.maxOverzooming,this._source.minzoom),C=Math.max(u+O.maxUnderzooming,this._source.minzoom),I={};for(const k of r){const B=this._addTile(k);f[k.key]=k,B.hasData()||u<this._source.maxzoom&&(I[k.key]=k)}this._retainLoadedChildren(I,u,C,f);for(const k of r){let B=this._tiles[k.key];if(B.hasData())continue;if(u+1>this._source.maxzoom){const Y=k.children(this._source.maxzoom)[0],he=this.getTile(Y);if(he&&he.hasData()){f[Y.key]=Y;continue}}else{const Y=k.children(this._source.maxzoom);if(f[Y[0].key]&&f[Y[1].key]&&f[Y[2].key]&&f[Y[3].key])continue}let H=B.wasRequested();for(let Y=k.overscaledZ-1;Y>=_;--Y){const he=k.scaledTo(Y);if(m[he.key])break;if(m[he.key]=!0,B=this.getTile(he),!B&&H&&(B=this._addTile(he)),B){const Ie=B.hasData();if((H||Ie)&&(f[he.key]=he),H=B.wasRequested(),Ie)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}u.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;m=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const f=u;return u||(u=new gn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,f||this._source.fire(new l.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=u.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,f){const m=[],_=this.transform;if(!_)return m;const C=f?_.getCameraQueryGeometry(r):r,I=r.map(Ae=>_.pointCoordinate(Ae,this.terrain)),k=C.map(Ae=>_.pointCoordinate(Ae,this.terrain)),B=this.getIds();let H=1/0,Y=1/0,he=-1/0,Ie=-1/0;for(const Ae of k)H=Math.min(H,Ae.x),Y=Math.min(Y,Ae.y),he=Math.max(he,Ae.x),Ie=Math.max(Ie,Ae.y);for(let Ae=0;Ae<B.length;Ae++){const Oe=this._tiles[B[Ae]];if(Oe.holdingForFade())continue;const Ce=Oe.tileID,Ke=Math.pow(2,_.zoom-Oe.tileID.overscaledZ),nt=u*Oe.queryPadding*l.EXTENT/Oe.tileSize/Ke,De=[Ce.getTilePoint(new l.MercatorCoordinate(H,Y)),Ce.getTilePoint(new l.MercatorCoordinate(he,Ie))];if(De[0].x-nt<l.EXTENT&&De[0].y-nt<l.EXTENT&&De[1].x+nt>=0&&De[1].y+nt>=0){const Ye=I.map(lt=>Ce.getTilePoint(lt)),at=k.map(lt=>Ce.getTilePoint(lt));m.push({tile:Oe,tileID:Ce,queryGeometry:Ye,cameraQueryGeometry:at,scale:Ke})}}return m}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Ze(this._source.type)){const r=l.browser.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,f){this._state.updateState(r=r||"_geojsonTileLayer",u,f)}removeFeatureState(r,u,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,f)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,f){const m=this._tiles[r];m&&m.setDependencies(u,f)}reloadTilesForDependencies(r,u){for(const f in this._tiles)this._tiles[f].hasDependency(r,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,u))}}function _e(g,r){const u=Math.abs(2*g.wrap)-+(g.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return g.overscaledZ-r.overscaledZ||f-u||r.canonical.y-g.canonical.y||r.canonical.x-g.canonical.x}function Ze(g){return g==="raster"||g==="image"||g==="video"}O.maxOverzooming=10,O.maxUnderzooming=3;const Fe="mapboxgl_preloaded_worker_pool";class ut{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<ut.workerCount;)this.workers.push(new Worker(l.config.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const ae=Math.floor(l.browser.hardwareConcurrency/2);let z;function D(){return z||(z=new ut),z}ut.workerCount=l.isSafari(globalThis)?Math.max(Math.min(ae,3),1):1;class ce{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.clamp(r,0,1);let u=1,f=this._distances[u];const m=r*this.paddedLength+this.padding;for(;f<m&&u<this._distances.length;)f=this._distances[++u];const _=u-1,C=this._distances[_],I=f-C,k=I>0?(m-C)/I:0;return this.points[_].mult(1-k).add(this.points[u].mult(k))}}function Re(g,r){let u=!0;return g==="always"||g!=="never"&&r!=="never"||(u=!1),u}class Xe{constructor(r,u,f){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(u/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,f,m,_){this._forEachCell(u,f,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,u,f,m){this._forEachCell(u-m,f-m,u+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,u,f,m,_,C){this.boxCells[_].push(C)}_insertCircleCell(r,u,f,m,_,C){this.circleCells[_].push(C)}_query(r,u,f,m,_,C,I){if(f<0||r>this.width||m<0||u>this.height)return[];const k=[];if(r<=0&&u<=0&&this.width<=f&&this.height<=m){if(_)return[{key:null,x1:r,y1:u,x2:f,y2:m}];for(let B=0;B<this.boxKeys.length;B++)k.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const H=this.circles[3*B],Y=this.circles[3*B+1],he=this.circles[3*B+2];k.push({key:this.circleKeys[B],x1:H-he,y1:Y-he,x2:H+he,y2:Y+he})}}else this._forEachCell(r,u,f,m,this._queryCell,k,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},I);return k}query(r,u,f,m){return this._query(r,u,f,m,!1,null)}hitTest(r,u,f,m,_,C){return this._query(r,u,f,m,!0,_,C).length>0}hitTestCircle(r,u,f,m,_){const C=r-f,I=r+f,k=u-f,B=u+f;if(I<0||C>this.width||B<0||k>this.height)return!1;const H=[];return this._forEachCell(C,k,I,B,this._queryCellCircle,H,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:f},seenUids:{box:{},circle:{}}},_),H.length>0}_queryCell(r,u,f,m,_,C,I,k){const{seenUids:B,hitTest:H,overlapMode:Y}=I,he=this.boxCells[_];if(he!==null){const Ae=this.bboxes;for(const Oe of he)if(!B.box[Oe]){B.box[Oe]=!0;const Ce=4*Oe,Ke=this.boxKeys[Oe];if(r<=Ae[Ce+2]&&u<=Ae[Ce+3]&&f>=Ae[Ce+0]&&m>=Ae[Ce+1]&&(!k||k(Ke))&&(!H||!Re(Y,Ke.overlapMode))&&(C.push({key:Ke,x1:Ae[Ce],y1:Ae[Ce+1],x2:Ae[Ce+2],y2:Ae[Ce+3]}),H))return!0}}const Ie=this.circleCells[_];if(Ie!==null){const Ae=this.circles;for(const Oe of Ie)if(!B.circle[Oe]){B.circle[Oe]=!0;const Ce=3*Oe,Ke=this.circleKeys[Oe];if(this._circleAndRectCollide(Ae[Ce],Ae[Ce+1],Ae[Ce+2],r,u,f,m)&&(!k||k(Ke))&&(!H||!Re(Y,Ke.overlapMode))){const nt=Ae[Ce],De=Ae[Ce+1],Ye=Ae[Ce+2];if(C.push({key:Ke,x1:nt-Ye,y1:De-Ye,x2:nt+Ye,y2:De+Ye}),H)return!0}}}return!1}_queryCellCircle(r,u,f,m,_,C,I,k){const{circle:B,seenUids:H,overlapMode:Y}=I,he=this.boxCells[_];if(he!==null){const Ae=this.bboxes;for(const Oe of he)if(!H.box[Oe]){H.box[Oe]=!0;const Ce=4*Oe,Ke=this.boxKeys[Oe];if(this._circleAndRectCollide(B.x,B.y,B.radius,Ae[Ce+0],Ae[Ce+1],Ae[Ce+2],Ae[Ce+3])&&(!k||k(Ke))&&!Re(Y,Ke.overlapMode))return C.push(!0),!0}}const Ie=this.circleCells[_];if(Ie!==null){const Ae=this.circles;for(const Oe of Ie)if(!H.circle[Oe]){H.circle[Oe]=!0;const Ce=3*Oe,Ke=this.circleKeys[Oe];if(this._circlesCollide(Ae[Ce],Ae[Ce+1],Ae[Ce+2],B.x,B.y,B.radius)&&(!k||k(Ke))&&!Re(Y,Ke.overlapMode))return C.push(!0),!0}}}_forEachCell(r,u,f,m,_,C,I,k){const B=this._convertToXCellCoord(r),H=this._convertToYCellCoord(u),Y=this._convertToXCellCoord(f),he=this._convertToYCellCoord(m);for(let Ie=B;Ie<=Y;Ie++)for(let Ae=H;Ae<=he;Ae++)if(_.call(this,r,u,f,m,this.xCellCount*Ae+Ie,C,I,k))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,f,m,_,C){const I=m-r,k=_-u,B=f+C;return B*B>I*I+k*k}_circleAndRectCollide(r,u,f,m,_,C,I){const k=(C-m)/2,B=Math.abs(r-(m+k));if(B>k+f)return!1;const H=(I-_)/2,Y=Math.abs(u-(_+H));if(Y>H+f)return!1;if(B<=k||Y<=H)return!0;const he=B-k,Ie=Y-H;return he*he+Ie*Ie<=f*f}}function st(g,r,u,f,m){const _=l.create();return r?(l.scale(_,_,[1/m,1/m,1]),u||l.rotateZ(_,_,f.angle)):l.multiply(_,f.labelPlaneMatrix,g),_}function en(g,r,u,f,m){if(r){const _=l.clone(g);return l.scale(_,_,[m,m,1]),u||l.rotateZ(_,_,-f.angle),_}return f.glCoordMatrix}function kt(g,r,u){let f;u?(f=[g.x,g.y,u(g.x,g.y),1],l.transformMat4(f,f,r)):(f=[g.x,g.y,0,1],Te(f,f,r));const m=f[3];return{point:new l.Point(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function yn(g,r){return .5+g/r*.5}function An(g,r){const u=g[0]/g[3],f=g[1]/g[3];return u>=-r[0]&&u<=r[0]&&f>=-r[1]&&f<=r[1]}function _n(g,r,u,f,m,_,C,I,k,B){const H=f?g.textSizeData:g.iconSizeData,Y=l.evaluateSizeForZoom(H,u.transform.zoom),he=[256/u.width*2+1,256/u.height*2+1],Ie=f?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Ie.clear();const Ae=g.lineVertexArray,Oe=f?g.text.placedSymbolArray:g.icon.placedSymbolArray,Ce=u.transform.width/u.transform.height;let Ke=!1;for(let nt=0;nt<Oe.length;nt++){const De=Oe.get(nt);if(De.hidden||De.writingMode===l.WritingMode.vertical&&!Ke){fe(De.numGlyphs,Ie);continue}let Ye;if(Ke=!1,B?(Ye=[De.anchorX,De.anchorY,B(De.anchorX,De.anchorY),1],l.transformMat4(Ye,Ye,r)):(Ye=[De.anchorX,De.anchorY,0,1],Te(Ye,Ye,r)),!An(Ye,he)){fe(De.numGlyphs,Ie);continue}const at=yn(u.transform.cameraToCenterDistance,Ye[3]),lt=l.evaluateSizeForFeature(H,Y,De),ft=C?lt/at:lt*at,wt=new l.Point(De.anchorX,De.anchorY),xt=kt(wt,m,B).point,Ct={projections:{},offsets:{}},Gt=fr(De,ft,!1,I,r,m,_,g.glyphOffsetArray,Ae,Ie,xt,wt,Ct,Ce,k,B);Ke=Gt.useVertical,(Gt.notEnoughRoom||Ke||Gt.needsFlipping&&fr(De,ft,!0,I,r,m,_,g.glyphOffsetArray,Ae,Ie,xt,wt,Ct,Ce,k,B).notEnoughRoom)&&fe(De.numGlyphs,Ie)}f?g.text.dynamicLayoutVertexBuffer.updateData(Ie):g.icon.dynamicLayoutVertexBuffer.updateData(Ie)}function wr(g,r,u,f,m,_,C,I,k,B,H,Y,he){const Ie=I.glyphStartIndex+I.numGlyphs,Ae=I.lineStartIndex,Oe=I.lineStartIndex+I.lineLength,Ce=r.getoffsetX(I.glyphStartIndex),Ke=r.getoffsetX(Ie-1),nt=re(g*Ce,u,f,m,_,C,I.segment,Ae,Oe,k,B,H,Y,he);if(!nt)return null;const De=re(g*Ke,u,f,m,_,C,I.segment,Ae,Oe,k,B,H,Y,he);return De?{first:nt,last:De}:null}function pi(g,r,u,f){return g===l.WritingMode.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*f?{useVertical:!0}:(g===l.WritingMode.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function fr(g,r,u,f,m,_,C,I,k,B,H,Y,he,Ie,Ae,Oe){const Ce=r/24,Ke=g.lineOffsetX*Ce,nt=g.lineOffsetY*Ce;let De;if(g.numGlyphs>1){const Ye=g.glyphStartIndex+g.numGlyphs,at=g.lineStartIndex,lt=g.lineStartIndex+g.lineLength,ft=wr(Ce,I,Ke,nt,u,H,Y,g,k,_,he,Ae,Oe);if(!ft)return{notEnoughRoom:!0};const wt=kt(ft.first.point,C,Oe).point,xt=kt(ft.last.point,C,Oe).point;if(f&&!u){const Ct=pi(g.writingMode,wt,xt,Ie);if(Ct)return Ct}De=[ft.first];for(let Ct=g.glyphStartIndex+1;Ct<Ye-1;Ct++)De.push(re(Ce*I.getoffsetX(Ct),Ke,nt,u,H,Y,g.segment,at,lt,k,_,he,Ae,Oe));De.push(ft.last)}else{if(f&&!u){const at=kt(Y,m,Oe).point,lt=g.lineStartIndex+g.segment+1,ft=new l.Point(k.getx(lt),k.gety(lt)),wt=kt(ft,m,Oe),xt=wt.signedDistanceFromCamera>0?wt.point:On(Y,ft,at,1,m,Oe),Ct=pi(g.writingMode,at,xt,Ie);if(Ct)return Ct}const Ye=re(Ce*I.getoffsetX(g.glyphStartIndex),Ke,nt,u,H,Y,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,k,_,he,Ae,Oe);if(!Ye)return{notEnoughRoom:!0};De=[Ye]}for(const Ye of De)l.addDynamicAttributes(B,Ye.point,Ye.angle);return{}}function On(g,r,u,f,m,_){const C=kt(g.add(g.sub(r)._unit()),m,_).point,I=u.sub(C);return u.add(I._mult(f/I.mag()))}function dr(g,r){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:I,previousVertex:k,direction:B,absOffsetX:H}=r;if(u.projections[g])return u.projections[g];const Y=new l.Point(f.getx(g),f.gety(g)),he=kt(Y,m,I);if(he.signedDistanceFromCamera>0)return u.projections[g]=he.point,he.point;const Ie=g-B;return On(C===0?_:new l.Point(f.getx(Ie),f.gety(Ie)),Y,k,H-C+1,m,I)}function mi(g,r,u){return g._unit()._perp()._mult(r*u)}function ke(g,r,u,f,m,_,C,I){const{projectionCache:k,direction:B}=I;if(k.offsets[g])return k.offsets[g];const H=u.add(r);if(g+B<f||g+B>=m)return k.offsets[g]=H,H;const Y=dr(g+B,I),he=mi(Y.sub(u),C,B),Ie=u.add(he),Ae=Y.add(he);return k.offsets[g]=l.findLineIntersection(_,H,Ie,Ae)||H,k.offsets[g]}function re(g,r,u,f,m,_,C,I,k,B,H,Y,he,Ie){const Ae=f?g-r:g+r;let Oe=Ae>0?1:-1,Ce=0;f&&(Oe*=-1,Ce=Math.PI),Oe<0&&(Ce+=Math.PI);let Ke,nt,De=Oe>0?I+C:I+C+1,Ye=m,at=m,lt=0,ft=0;const wt=Math.abs(Ae),xt=[];let Ct;for(;lt+ft<=wt;){if(De+=Oe,De<I||De>=k)return null;lt+=ft,at=Ye,nt=Ke;const Ot={projectionCache:Y,lineVertexArray:B,labelPlaneMatrix:H,tileAnchorPoint:_,distanceFromAnchor:lt,getElevation:Ie,previousVertex:at,direction:Oe,absOffsetX:wt};if(Ye=dr(De,Ot),u===0)xt.push(at),Ct=Ye.sub(at);else{let nn;const $t=Ye.sub(at);nn=$t.mag()===0?mi(dr(De+Oe,Ot).sub(Ye),u,Oe):mi($t,u,Oe),nt||(nt=at.add(nn)),Ke=ke(De,nn,Ye,I,k,nt,u,Ot),xt.push(nt),Ct=Ke.sub(nt)}ft=Ct.mag()}const Gt=Ct._mult((wt-lt)/ft)._add(nt||at),Sn=Ce+Math.atan2(Ye.y-at.y,Ye.x-at.x);return xt.push(Gt),{point:Gt,angle:he?Sn:0,path:xt}}const se=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function fe(g,r){for(let u=0;u<g;u++){const f=r.length;r.resize(f+4),r.float32.set(se,3*f)}}function Te(g,r,u){const f=r[0],m=r[1];return g[0]=u[0]*f+u[4]*m+u[12],g[1]=u[1]*f+u[5]*m+u[13],g[3]=u[3]*f+u[7]*m+u[15],g}const ze=100;class qe{constructor(r,u=new Xe(r.width+200,r.height+200,25),f=new Xe(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+ze,this.screenBottomBoundary=r.height+ze,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,f,m,_,C){const I=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,C),k=f*I.perspectiveRatio,B=r.x1*k+I.point.x,H=r.y1*k+I.point.y,Y=r.x2*k+I.point.x,he=r.y2*k+I.point.y;return!this.isInsideGrid(B,H,Y,he)||u!=="always"&&this.grid.hitTest(B,H,Y,he,u,_)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[B,H,Y,he],offscreen:this.isOffscreen(B,H,Y,he)}}placeCollisionCircles(r,u,f,m,_,C,I,k,B,H,Y,he,Ie,Ae){const Oe=[],Ce=new l.Point(u.anchorX,u.anchorY),Ke=kt(Ce,C,Ae),nt=yn(this.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),De=(H?_/nt:_*nt)/l.ONE_EM,Ye=kt(Ce,I,Ae).point,at=wr(De,m,u.lineOffsetX*De,u.lineOffsetY*De,!1,Ye,Ce,u,f,I,{projections:{},offsets:{}},!1,Ae);let lt=!1,ft=!1,wt=!0;if(at){const xt=.5*he*nt+Ie,Ct=new l.Point(-100,-100),Gt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Sn=new ce,Ot=at.first,nn=at.last;let $t=[];for(let rn=Ot.path.length-1;rn>=1;rn--)$t.push(Ot.path[rn]);for(let rn=1;rn<nn.path.length;rn++)$t.push(nn.path[rn]);const ir=2.5*xt;if(k){const rn=$t.map(Cn=>kt(Cn,k,Ae));$t=rn.some(Cn=>Cn.signedDistanceFromCamera<=0)?[]:rn.map(Cn=>Cn.point)}let Tn=[];if($t.length>0){const rn=$t[0].clone(),Cn=$t[0].clone();for(let ur=1;ur<$t.length;ur++)rn.x=Math.min(rn.x,$t[ur].x),rn.y=Math.min(rn.y,$t[ur].y),Cn.x=Math.max(Cn.x,$t[ur].x),Cn.y=Math.max(Cn.y,$t[ur].y);Tn=rn.x>=Ct.x&&Cn.x<=Gt.x&&rn.y>=Ct.y&&Cn.y<=Gt.y?[$t]:Cn.x<Ct.x||rn.x>Gt.x||Cn.y<Ct.y||rn.y>Gt.y?[]:l.clipLine([$t],Ct.x,Ct.y,Gt.x,Gt.y)}for(const rn of Tn){Sn.reset(rn,.25*xt);let Cn=0;Cn=Sn.length<=.5*xt?1:Math.ceil(Sn.paddedLength/ir)+1;for(let ur=0;ur<Cn;ur++){const Zn=ur/Math.max(Cn-1,1),qi=Sn.lerp(Zn),Qr=qi.x+ze,Sr=qi.y+ze;Oe.push(Qr,Sr,xt,0);const Ri=Qr-xt,rs=Sr-xt,ko=Qr+xt,is=Sr+xt;if(wt=wt&&this.isOffscreen(Ri,rs,ko,is),ft=ft||this.isInsideGrid(Ri,rs,ko,is),r!=="always"&&this.grid.hitTestCircle(Qr,Sr,xt,r,Y)&&(lt=!0,!B))return{circles:[],offscreen:!1,collisionDetected:lt}}}}return{circles:!B&&lt||!ft||nt<this.perspectiveRatioCutoff?[]:Oe,offscreen:wt,collisionDetected:lt}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,m=1/0,_=-1/0,C=-1/0;for(const H of r){const Y=new l.Point(H.x+ze,H.y+ze);f=Math.min(f,Y.x),m=Math.min(m,Y.y),_=Math.max(_,Y.x),C=Math.max(C,Y.y),u.push(Y)}const I=this.grid.query(f,m,_,C).concat(this.ignoredGrid.query(f,m,_,C)),k={},B={};for(const H of I){const Y=H.key;if(k[Y.bucketInstanceId]===void 0&&(k[Y.bucketInstanceId]={}),k[Y.bucketInstanceId][Y.featureIndex])continue;const he=[new l.Point(H.x1,H.y1),new l.Point(H.x2,H.y1),new l.Point(H.x2,H.y2),new l.Point(H.x1,H.y2)];l.polygonIntersectsPolygon(u,he)&&(k[Y.bucketInstanceId][Y.featureIndex]=!0,B[Y.bucketInstanceId]===void 0&&(B[Y.bucketInstanceId]=[]),B[Y.bucketInstanceId].push(Y.featureIndex))}return B}insertCollisionBox(r,u,f,m,_,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:C,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,f,m,_,C){const I=f?this.ignoredGrid:this.grid,k={bucketInstanceId:m,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let B=0;B<r.length;B+=4)I.insertCircle(k,r[B],r[B+1],r[B+2])}projectAndGetPerspectiveRatio(r,u,f,m){let _;return m?(_=[u,f,m(u,f),1],l.transformMat4(_,_,r)):(_=[u,f,0,1],Te(_,_,r)),{point:new l.Point((_[0]/_[3]+1)/2*this.transform.width+ze,(-_[1]/_[3]+1)/2*this.transform.height+ze),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,u,f,m){return f<ze||r>=this.screenRightBoundary||m<ze||u>this.screenBottomBoundary}isInsideGrid(r,u,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.identity([]);return l.translate(r,r,[-100,-100,0]),r}}function Ve(g,r,u){return r*(l.EXTENT/(g.tileSize*Math.pow(2,u-g.tileID.overscaledZ)))}class $e{constructor(r,u,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Qe{constructor(r,u,f,m,_){this.text=new $e(r?r.text:null,u,f,_),this.icon=new $e(r?r.icon:null,u,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class pt{constructor(r,u,f){this.text=r,this.icon=u,this.skipFade=f}}class gt{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class yt{constructor(r,u,f,m,_){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=_}}class tn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[r]}}function cn(g,r,u,f,m){const{horizontalAlign:_,verticalAlign:C}=l.getAnchorAlignment(g);return new l.Point(-(_-.5)*r+f[0]*m,-(C-.5)*u+f[1]*m)}function Nt(g,r,u,f,m,_){const{x1:C,x2:I,y1:k,y2:B,anchorPointX:H,anchorPointY:Y}=g,he=new l.Point(r,u);return f&&he._rotate(m?_:-_),{x1:C+he.x,y1:k+he.y,x2:I+he.x,y2:B+he.y,anchorPointX:H,anchorPointY:Y}}class Xt{constructor(r,u,f,m,_){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new qe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new tn(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,f,m){const _=f.getBucket(u),C=f.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const I=f.collisionBoxArray,k=_.layers[0].layout,B=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),H=f.tileSize/l.EXTENT,Y=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),he=k.get("text-pitch-alignment")==="map",Ie=k.get("text-rotation-alignment")==="map",Ae=Ve(f,1,this.transform.zoom),Oe=st(Y,he,Ie,this.transform,Ae);let Ce=null;if(he){const nt=en(Y,he,Ie,this.transform,Ae);Ce=l.multiply([],this.transform.labelPlaneMatrix,nt)}this.retainedQueryData[_.bucketInstanceId]=new yt(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,f.tileID);const Ke={bucket:_,layout:k,posMatrix:Y,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Ce,scale:B,textPixelRatio:H,holdingForFade:f.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const nt of _.sortKeyRanges){const{sortKey:De,symbolInstanceStart:Ye,symbolInstanceEnd:at}=nt;r.push({sortKey:De,symbolInstanceStart:Ye,symbolInstanceEnd:at,parameters:Ke})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(r,u,f,m,_,C,I,k,B,H,Y,he,Ie,Ae,Oe,Ce){const Ke=l.TextAnchorEnum[r.textAnchor],nt=[r.textOffset0,r.textOffset1],De=cn(Ke,f,m,nt,_),Ye=this.collisionIndex.placeCollisionBox(Nt(u,De.x,De.y,C,I,this.transform.angle),Y,k,B,H.predicate,Ce);if((!Oe||this.collisionIndex.placeCollisionBox(Nt(Oe,De.x,De.y,C,I,this.transform.angle),Y,k,B,H.predicate,Ce).box.length!==0)&&Ye.box.length>0){let at;if(this.prevPlacement&&this.prevPlacement.variableOffsets[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID].text&&(at=this.prevPlacement.variableOffsets[he.crossTileID].anchor),he.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[he.crossTileID]={textOffset:nt,width:f,height:m,anchor:Ke,textBoxScale:_,prevAnchor:at},this.markUsedJustification(Ie,Ke,he,Ae),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Ae,he),this.placedOrientations[he.crossTileID]=Ae),{shift:De,placedGlyphBoxes:Ye}}}placeLayerBucketPart(r,u,f){const{bucket:m,layout:_,posMatrix:C,textLabelPlaneMatrix:I,labelToScreenMatrix:k,textPixelRatio:B,holdingForFade:H,collisionBoxArray:Y,partiallyEvaluatedTextSize:he,collisionGroup:Ie}=r.parameters,Ae=_.get("text-optional"),Oe=_.get("icon-optional"),Ce=l.getOverlapMode(_,"text-overlap","text-allow-overlap"),Ke=Ce==="always",nt=l.getOverlapMode(_,"icon-overlap","icon-allow-overlap"),De=nt==="always",Ye=_.get("text-rotation-alignment")==="map",at=_.get("text-pitch-alignment")==="map",lt=_.get("icon-text-fit")!=="none",ft=_.get("symbol-z-order")==="viewport-y",wt=Ke&&(De||!m.hasIconData()||Oe),xt=De&&(Ke||!m.hasTextData()||Ae);!m.collisionArrays&&Y&&m.deserializeCollisionBoxes(Y);const Ct=this.retainedQueryData[m.bucketInstanceId].tileID,Gt=this.terrain?(Ot,nn)=>this.terrain.getElevation(Ct,Ot,nn):null,Sn=(Ot,nn)=>{var $t,ir;if(u[Ot.crossTileID])return;if(H)return void(this.placements[Ot.crossTileID]=new pt(!1,!1,!1));let Tn=!1,rn=!1,Cn=!0,ur=null,Zn={box:null,offscreen:null},qi={box:null,offscreen:null},Qr=null,Sr=null,Ri=null,rs=0,ko=0,is=0;nn.textFeatureIndex?rs=nn.textFeatureIndex:Ot.useRuntimeCollisionCircles&&(rs=Ot.featureIndex),nn.verticalTextFeatureIndex&&(ko=nn.verticalTextFeatureIndex);const wl=nn.textBox;if(wl){const Ir=Vr=>{let Fr=l.WritingMode.horizontal;if(m.allowVerticalPlacement&&!Vr&&this.prevPlacement){const si=this.prevPlacement.placedOrientations[Ot.crossTileID];si&&(this.placedOrientations[Ot.crossTileID]=si,Fr=si,this.markUsedOrientation(m,Fr,Ot))}return Fr},$r=(Vr,Fr)=>{if(m.allowVerticalPlacement&&Ot.numVerticalGlyphVertices>0&&nn.verticalTextBox){for(const si of m.writingModes)if(si===l.WritingMode.vertical?(Zn=Fr(),qi=Zn):Zn=Vr(),Zn&&Zn.box&&Zn.box.length)break}else Zn=Vr()},oi=Ot.textAnchorOffsetStartIndex,bl=Ot.textAnchorOffsetEndIndex;if(bl===oi){const Vr=(Fr,si)=>{const cr=this.collisionIndex.placeCollisionBox(Fr,Ce,B,C,Ie.predicate,Gt);return cr&&cr.box&&cr.box.length&&(this.markUsedOrientation(m,si,Ot),this.placedOrientations[Ot.crossTileID]=si),cr};$r(()=>Vr(wl,l.WritingMode.horizontal),()=>{const Fr=nn.verticalTextBox;return m.allowVerticalPlacement&&Ot.numVerticalGlyphVertices>0&&Fr?Vr(Fr,l.WritingMode.vertical):{box:null,offscreen:null}}),Ir(Zn&&Zn.box&&Zn.box.length)}else{let Vr=l.TextAnchorEnum[(ir=($t=this.prevPlacement)===null||$t===void 0?void 0:$t.variableOffsets[Ot.crossTileID])===null||ir===void 0?void 0:ir.anchor];const Fr=(cr,Ss,Lo)=>{const Qs=cr.x2-cr.x1,Gd=cr.y2-cr.y1,Ma=Ot.textBoxScale,Zg=lt&&nt==="never"?Ss:null;let ka={box:[],offscreen:!1},yr=Ce==="never"?1:2,xc="never";Vr&&yr++;for(let ef=0;ef<yr;ef++){for(let Ts=oi;Ts<bl;Ts++){const ea=m.textAnchorOffsets.get(Ts);if(Vr&&ea.textAnchor!==Vr)continue;const El=this.attemptAnchorPlacement(ea,cr,Qs,Gd,Ma,Ye,at,B,C,Ie,xc,Ot,m,Lo,Zg,Gt);if(El&&(ka=El.placedGlyphBoxes,ka&&ka.box&&ka.box.length))return Tn=!0,ur=El.shift,ka}Vr?Vr=null:xc=Ce}return ka};$r(()=>Fr(wl,nn.iconBox,l.WritingMode.horizontal),()=>{const cr=nn.verticalTextBox;return m.allowVerticalPlacement&&!(Zn&&Zn.box&&Zn.box.length)&&Ot.numVerticalGlyphVertices>0&&cr?Fr(cr,nn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Zn&&(Tn=Zn.box,Cn=Zn.offscreen);const si=Ir(Zn&&Zn.box);if(!Tn&&this.prevPlacement){const cr=this.prevPlacement.variableOffsets[Ot.crossTileID];cr&&(this.variableOffsets[Ot.crossTileID]=cr,this.markUsedJustification(m,cr.anchor,Ot,si))}}}if(Qr=Zn,Tn=Qr&&Qr.box&&Qr.box.length>0,Cn=Qr&&Qr.offscreen,Ot.useRuntimeCollisionCircles){const Ir=m.text.placedSymbolArray.get(Ot.centerJustifiedTextSymbolIndex),$r=l.evaluateSizeForFeature(m.textSizeData,he,Ir),oi=_.get("text-padding");Sr=this.collisionIndex.placeCollisionCircles(Ce,Ir,m.lineVertexArray,m.glyphOffsetArray,$r,C,I,k,f,at,Ie.predicate,Ot.collisionCircleDiameter,oi,Gt),Sr.circles.length&&Sr.collisionDetected&&!f&&l.warnOnce("Collisions detected, but collision boxes are not shown"),Tn=Ke||Sr.circles.length>0&&!Sr.collisionDetected,Cn=Cn&&Sr.offscreen}if(nn.iconFeatureIndex&&(is=nn.iconFeatureIndex),nn.iconBox){const Ir=$r=>{const oi=lt&&ur?Nt($r,ur.x,ur.y,Ye,at,this.transform.angle):$r;return this.collisionIndex.placeCollisionBox(oi,nt,B,C,Ie.predicate,Gt)};qi&&qi.box&&qi.box.length&&nn.verticalIconBox?(Ri=Ir(nn.verticalIconBox),rn=Ri.box.length>0):(Ri=Ir(nn.iconBox),rn=Ri.box.length>0),Cn=Cn&&Ri.offscreen}const Js=Ae||Ot.numHorizontalGlyphVertices===0&&Ot.numVerticalGlyphVertices===0,Es=Oe||Ot.numIconVertices===0;if(Js||Es?Es?Js||(rn=rn&&Tn):Tn=rn&&Tn:rn=Tn=rn&&Tn,Tn&&Qr&&Qr.box&&this.collisionIndex.insertCollisionBox(Qr.box,Ce,_.get("text-ignore-placement"),m.bucketInstanceId,qi&&qi.box&&ko?ko:rs,Ie.ID),rn&&Ri&&this.collisionIndex.insertCollisionBox(Ri.box,nt,_.get("icon-ignore-placement"),m.bucketInstanceId,is,Ie.ID),Sr&&(Tn&&this.collisionIndex.insertCollisionCircles(Sr.circles,Ce,_.get("text-ignore-placement"),m.bucketInstanceId,rs,Ie.ID),f)){const Ir=m.bucketInstanceId;let $r=this.collisionCircleArrays[Ir];$r===void 0&&($r=this.collisionCircleArrays[Ir]=new gt);for(let oi=0;oi<Sr.circles.length;oi+=4)$r.circles.push(Sr.circles[oi+0]),$r.circles.push(Sr.circles[oi+1]),$r.circles.push(Sr.circles[oi+2]),$r.circles.push(Sr.collisionDetected?1:0)}if(Ot.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ot.crossTileID]=new pt(Tn||wt,rn||xt,Cn||m.justReloaded),u[Ot.crossTileID]=!0};if(ft){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ot=m.getSortedSymbolIndexes(this.transform.angle);for(let nn=Ot.length-1;nn>=0;--nn){const $t=Ot[nn];Sn(m.symbolInstances.get($t),m.collisionArrays[$t])}}else for(let Ot=r.symbolInstanceStart;Ot<r.symbolInstanceEnd;Ot++)Sn(m.symbolInstances.get(Ot),m.collisionArrays[Ot]);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const Ot=this.collisionCircleArrays[m.bucketInstanceId];l.invert(Ot.invProjMatrix,C),Ot.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,u,f,m){let _;_=m===l.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(u)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const I of C)I>=0&&(r.text.placedSymbolArray.get(I).crossTileID=_>=0&&I!==_?0:f.crossTileID)}markUsedOrientation(r,u,f){const m=u===l.WritingMode.horizontal||u===l.WritingMode.horizontalOnly?u:0,_=u===l.WritingMode.vertical?u:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const I of C)r.text.placedSymbolArray.get(I).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(r):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const k in this.placements){const B=this.placements[k],H=_[k];H?(this.opacities[k]=new Qe(H,m,B.text,B.icon),f=f||B.text!==H.text.placed||B.icon!==H.icon.placed):(this.opacities[k]=new Qe(null,m,B.text,B.icon,B.skipFade),f=f||B.text||B.icon)}for(const k in _){const B=_[k];if(!this.opacities[k]){const H=new Qe(B,m,!1,!1);H.isHidden()||(this.opacities[k]=H,f=f||B.text.placed||B.icon.placed)}}for(const k in C)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=C[k]);for(const k in I)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=I[k]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const f={};for(const m of u){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,m.collisionBoxArray)}}updateBucketOpacities(r,u,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],_=m.layout,C=new Qe(null,0,!1,!1,!0),I=_.get("text-allow-overlap"),k=_.get("icon-allow-overlap"),B=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),H=_.get("text-rotation-alignment")==="map",Y=_.get("text-pitch-alignment")==="map",he=_.get("icon-text-fit")!=="none",Ie=new Qe(null,0,I&&(k||!r.hasIconData()||_.get("icon-optional")),k&&(I||!r.hasTextData()||_.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const Ae=(Oe,Ce,Ke)=>{for(let nt=0;nt<Ce/4;nt++)Oe.opacityVertexArray.emplaceBack(Ke);Oe.hasVisibleVertices=Oe.hasVisibleVertices||Ke!==Yn};for(let Oe=0;Oe<r.symbolInstances.length;Oe++){const Ce=r.symbolInstances.get(Oe),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:nt,crossTileID:De}=Ce;let Ye=this.opacities[De];u[De]?Ye=C:Ye||(Ye=Ie,this.opacities[De]=Ye),u[De]=!0;const at=Ce.numIconVertices>0,lt=this.placedOrientations[Ce.crossTileID],ft=lt===l.WritingMode.vertical,wt=lt===l.WritingMode.horizontal||lt===l.WritingMode.horizontalOnly;if(Ke>0||nt>0){const xt=Er(Ye.text);Ae(r.text,Ke,ft?Yn:xt),Ae(r.text,nt,wt?Yn:xt);const Ct=Ye.text.isHidden();[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(Ot=>{Ot>=0&&(r.text.placedSymbolArray.get(Ot).hidden=Ct||ft?1:0)}),Ce.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ce.verticalPlacedTextSymbolIndex).hidden=Ct||wt?1:0);const Gt=this.variableOffsets[Ce.crossTileID];Gt&&this.markUsedJustification(r,Gt.anchor,Ce,lt);const Sn=this.placedOrientations[Ce.crossTileID];Sn&&(this.markUsedJustification(r,"left",Ce,Sn),this.markUsedOrientation(r,Sn,Ce))}if(at){const xt=Er(Ye.icon),Ct=!(he&&Ce.verticalPlacedIconSymbolIndex&&ft);Ce.placedIconSymbolIndex>=0&&(Ae(r.icon,Ce.numIconVertices,Ct?xt:Yn),r.icon.placedSymbolArray.get(Ce.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),Ce.verticalPlacedIconSymbolIndex>=0&&(Ae(r.icon,Ce.numVerticalIconVertices,Ct?Yn:xt),r.icon.placedSymbolArray.get(Ce.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Oe];if(xt){let Ct=new l.Point(0,0);if(xt.textBox||xt.verticalTextBox){let Sn=!0;if(B){const Ot=this.variableOffsets[De];Ot?(Ct=cn(Ot.anchor,Ot.width,Ot.height,Ot.textOffset,Ot.textBoxScale),H&&Ct._rotate(Y?this.transform.angle:-this.transform.angle)):Sn=!1}xt.textBox&&hn(r.textCollisionBox.collisionVertexArray,Ye.text.placed,!Sn||ft,Ct.x,Ct.y),xt.verticalTextBox&&hn(r.textCollisionBox.collisionVertexArray,Ye.text.placed,!Sn||wt,Ct.x,Ct.y)}const Gt=!!(!wt&&xt.verticalIconBox);xt.iconBox&&hn(r.iconCollisionBox.collisionVertexArray,Ye.icon.placed,Gt,he?Ct.x:0,he?Ct.y:0),xt.verticalIconBox&&hn(r.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!Gt,he?Ct.x:0,he?Ct.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Oe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Oe.invProjMatrix,r.placementViewportMatrix=Oe.viewportMatrix,r.collisionCircleArray=Oe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function hn(g,r,u,f,m){g.emplaceBack(r?1:0,u?1:0,f||0,m||0),g.emplaceBack(r?1:0,u?1:0,f||0,m||0),g.emplaceBack(r?1:0,u?1:0,f||0,m||0),g.emplaceBack(r?1:0,u?1:0,f||0,m||0)}const En=Math.pow(2,25),$n=Math.pow(2,24),xn=Math.pow(2,17),Mn=Math.pow(2,16),ni=Math.pow(2,9),an=Math.pow(2,8),br=Math.pow(2,1);function Er(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const r=g.placed?1:0,u=Math.floor(127*g.opacity);return u*En+r*$n+u*xn+r*Mn+u*ni+r*an+u*br+r}const Yn=0;class ri{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,f,m,_){const C=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(C,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,k)=>I.sortKey-k.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class kn{constructor(r,u,f,m,_,C,I,k){this.placement=new Xt(r,u,C,I,k),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,u,f){const m=l.browser.now(),_=()=>!this._forceFullPlacement&&l.browser.now()-m>2;for(;this._currentPlacementIndex>=0;){const C=u[r[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new ri(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ar=512/l.EXTENT/2;class Mi{constructor(r,u,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let _=0;_<u.length;_++){const C=u.get(_),I=C.key,k=m.get(I);k?k.push(C):m.set(I,[C])}for(const[_,C]of m){const I={positions:C.map(k=>({x:Math.floor(k.anchorX*ar),y:Math.floor(k.anchorY*ar)})),crossTileIDs:C.map(k=>k.crossTileID)};if(I.positions.length>128){const k=new l.KDBush(I.positions.length,16,Uint16Array);for(const{x:B,y:H}of I.positions)k.add(B,H);k.finish(),delete I.positions,I.index=k}this._symbolsByKey[_]=I}}getScaledCoordinates(r,u){const{x:f,y:m,z:_}=this.tileID.canonical,{x:C,y:I,z:k}=u.canonical,B=ar/Math.pow(2,k-_),H=(I*l.EXTENT+r.anchorY)*B,Y=m*l.EXTENT*ar;return{x:Math.floor((C*l.EXTENT+r.anchorX)*B-f*l.EXTENT*ar),y:Math.floor(H-Y)}}findMatches(r,u,f){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<r.length;_++){const C=r.get(_);if(C.crossTileID)continue;const I=this._symbolsByKey[C.key];if(!I)continue;const k=this.getScaledCoordinates(C,u);if(I.index){const B=I.index.range(k.x-m,k.y-m,k.x+m,k.y+m).sort();for(const H of B){const Y=I.crossTileIDs[H];if(!f[Y]){f[Y]=!0,C.crossTileID=Y;break}}}else if(I.positions)for(let B=0;B<I.positions.length;B++){const H=I.positions[B],Y=I.crossTileIDs[B];if(Math.abs(H.x-k.x)<=m&&Math.abs(H.y-k.y)<=m&&!f[Y]){f[Y]=!0,C.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Qu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Qa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const f in this.indexes){const m=this.indexes[f],_={};for(const C in m){const I=m[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),_[I.tileID.key]=I}this.indexes[f]=_}this.lng=r}addBucket(r,u,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>r.overscaledZ)for(const I in C){const k=C[I];k.tileID.isChildOf(r)&&k.findMatches(u.symbolInstances,r,m)}else{const I=C[r.scaledTo(Number(_)).key];I&&I.findMatches(u.symbolInstances,r,m)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=f.generate(),m[C.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Mi(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const f of u.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(const f in this.indexes){const m=this.indexes[f];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[_]),delete m[_],u=!0)}return u}}class pr{constructor(){this.layerIndexes={},this.crossTileIDs=new Qu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new Qa);let _=!1;const C={};m.handleWrapJump(f);for(const I of u){const k=I.getBucket(r);k&&r.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(I.tileID,k,this.crossTileIDs)&&(_=!0),C[k.bucketInstanceId]=!0)}return m.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(r){const u={};r.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const Ho=(g,r)=>l.emitValidationErrors(g,r&&r.filter(u=>u.identifier!=="source.canvas")),Yr=l.pick(l.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),mr=l.pick(l.operations,["setCenter","setZoom","setBearing","setPitch"]),el=l.emptyStyle();class Xr extends l.Evented{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Ue(D(),this,r._getMapId()),this.imageManager=new ye,this.imageManager.setEventedParent(this),this.glyphManager=new le(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new we(256,512),this.crossTileSymbolIndex=new pr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const f=this;this._rtlTextPluginCallback=Xr.registerForPluginStateChange(m=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(_,C)=>{if(l.triggerPluginCompletionEvent(_),C&&C.every(I=>I))for(const I in f.sourceCaches){const k=f.sourceCaches[I].getSource().type;k!=="vector"&&k!=="geojson"||f.sourceCaches[I].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const _=this.sourceCaches[m.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const I in this._layers){const k=this._layers[I];k.source===C.id&&this._validateLayer(k)}})}loadURL(r,u={},f){this.fire(new l.Event("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(r,G.Style);this._request=l.getJSON(m,(_,C)=>{this._request=null,_?this.fire(new l.ErrorEvent(_)):C&&this._load(C,u,f)})}loadJSON(r,u={},f){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,f)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(el,{validate:!1})}_load(r,u,f){var m;const _=u.transformStyle?u.transformStyle(f,r):r;if(!u.validate||!Ho(this,l.validateStyle(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Ee(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}}_createLayers(){const r=l.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const f=l.createStyleLayer(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(r,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,_,C,I){const k=M(m),B=k.length,H=C>1?"@2x":"",Y={},he={},Ie={};for(const{id:Ae,url:Oe}of k){const Ce=_.transformRequest(_.normalizeSpriteURL(Oe,H,".json"),G.SpriteJSON),Ke=`${Ae}_${Ce.url}`;Y[Ke]=l.getJSON(Ce,(Ye,at)=>{delete Y[Ke],he[Ae]=at,Z(I,he,Ie,Ye,B)});const nt=_.transformRequest(_.normalizeSpriteURL(Oe,H,".png"),G.SpriteImage),De=`${Ae}_${nt.url}`;Y[De]=pe.getImage(nt,(Ye,at)=>{delete Y[De],Ie[Ae]=at,Z(I,he,Ie,Ye,B)})}return{cancel(){for(const Ae of Object.values(Y))Ae.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(m,_)=>{if(this._spriteRequest=null,m)this.fire(new l.ErrorEvent(m));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const I=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(k=>!(k in _)):[];for(const k of I)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in _[C]){const B=C==="default"?k:`${C}:${k}`;this._spritesImagesIds[C].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,_[C][k],!1):this.imageManager.addImage(B,_[C][k]),u&&(this._changedImages[B]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const f=r.sourceLayer;if(!f)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const f=[];for(const m of r)u[m]&&f.push(u[m]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const C in this._updatedSources){const I=this._updatedSources[C];if(I==="reload")this._reloadSource(C);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];f[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in f){const _=this.sourceCaches[m];f[m]!==_.used&&_.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const f=this.serialize();if(r=u.transformStyle?u.transformStyle(f,r):r,Ho(this,l.validateStyle(r)))return!1;(r=l.clone$1(r)).layers=l.derefLayers(r.layers);const m=l.diffStyles(f,r).filter(C=>!(C.command in mr));if(m.length===0)return!1;const _=m.filter(C=>!(C.command in Yr));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of m)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=r,!0}addImage(r,u){if(this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.validateStyle.source,`sources.${r}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[r]=new O(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new l.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new l.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(Ho(this,l.validateCustomStyleLayer(r)))return;_=l.createStyleLayer(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=l.clone$1(r),r=l.extend(r,{source:m})),this._validate(l.validateStyle.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;_=l.createStyleLayer(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const I=this._removedLayers[m];delete this._removedLayers[m],I.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===f||(u!=null&&(m.minzoom=u),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!l.deepEqual(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.validateStyle.filter,`layers.${m.id}.filter`,u,null,f)||(m.filter=l.clone$1(u),this._updateLayer(m)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.deepEqual(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,m),this._updateLayer(_)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const f=this.getLayer(r);if(f)return f.getLayoutProperty(u);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.deepEqual(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const f=r.source,m=r.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&m?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||m?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,u)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const _=m.getSource().type,C=_==="vector"?r.sourceLayer:void 0;_!=="vector"||C?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(C,r.id,u):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,f=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.mapObject(this.sourceCaches,m=>m.serialize()),u=this._serializeByIds(this._order),f=this.stylesheet;return l.filterObject({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:r,layers:u},m=>m!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=C=>this._layers[C].type==="fill-extrusion",f={},m=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I)){f[I]=C;for(const k of r){const B=k[I];if(B)for(const H of B)m.push(H)}}}m.sort((C,I)=>I.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I))for(let k=m.length-1;k>=0;k--){const B=m[k].feature;if(f[B.layer.id]<C)break;_.push(B),m.pop()}else for(const k of r){const B=k[I];if(B)for(const H of B)_.push(H.feature)}}return _}queryRenderedFeatures(r,u,f){u&&u.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const k=this._layers[I];if(!k)return this.fire(new l.ErrorEvent(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];m[k.source]=!0}}const _=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const I in this.sourceCaches)u.layers&&!m[I]||_.push(Vt(this.sourceCaches[I],this._layers,C,r,u,f));return this.placement&&_.push(function(I,k,B,H,Y,he,Ie){const Ae={},Oe=he.queryRenderedSymbols(H),Ce=[];for(const Ke of Object.keys(Oe).map(Number))Ce.push(Ie[Ke]);Ce.sort(un);for(const Ke of Ce){const nt=Ke.featureIndex.lookupSymbolFeatures(Oe[Ke.bucketInstanceId],k,Ke.bucketIndex,Ke.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,I);for(const De in nt){const Ye=Ae[De]=Ae[De]||[],at=nt[De];at.sort((lt,ft)=>{const wt=Ke.featureSortOrder;if(wt){const xt=wt.indexOf(lt.featureIndex);return wt.indexOf(ft.featureIndex)-xt}return ft.featureIndex-lt.featureIndex});for(const lt of at)Ye.push(lt)}}for(const Ke in Ae)Ae[Ke].forEach(nt=>{const De=nt.feature,Ye=B[I[Ke].source].getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=Ye});return Ae}(this._layers,C,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,u){u&&u.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[r];return f?function(m,_){const C=m.getRenderableIds().map(B=>m.getTileByID(B)),I=[],k={};for(let B=0;B<C.length;B++){const H=C[B],Y=H.tileID.canonical.key;k[Y]||(k[Y]=!0,H.querySourceFeatures(I,_))}return I}(f,u):[]}addSourceType(r,u,f){return fn(r)?f(new Error(`A source type called "${r}" already exists.`)):(((m,_)=>{Ut[m]=_})(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const C in r)if(!l.deepEqual(r[C],f[C])){m=!0;break}if(!m)return;const _={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(_)}_validate(r,u,f,m,_={}){return(!_||_.validate!==!1)&&Ho(this,r.call(l.validateStyle,l.extend({key:u,style:this.serialize(),value:f,styleSpec:l.v8Spec},m)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,f,m,_=!1){let C=!1,I=!1;const k={};for(const B of this._order){const H=this._layers[B];if(H.type!=="symbol")continue;if(!k[H.source]){const he=this.sourceCaches[H.source];k[H.source]=he.getRenderableIds(!0).map(Ie=>he.getTileByID(Ie)).sort((Ie,Ae)=>Ae.tileID.overscaledZ-Ie.tileID.overscaledZ||(Ie.tileID.isLessThan(Ae.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(H,k[H.source],r.center.lng);C=C||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),r.zoom))&&(this.pauseablePlacement=new kn(r,this.map.terrain,this._order,_,u,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(const B of this._order){const H=this._layers[B];H.type==="symbol"&&this.placement.updateLayerOpacities(H,k[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,f){this.glyphManager.getGlyphs(u.stacks,f);const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,f){return l.makeRequest(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.validateStyle.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,f={},m){this._checkLoaded();const _=[{id:r,url:u}],C=[...M(this.stylesheet.sprite),..._];this._validate(l.validateStyle.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const u=M(this.stylesheet.sprite);if(u.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}else this.fire(new l.ErrorEvent(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return M(this.stylesheet.sprite)}setSprite(r,u={},f){this._checkLoaded(),r&&this._validate(l.validateStyle.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}Xr.registerForPluginStateChange=l.registerForPluginStateChange;var tl=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ho="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const gi={prelude:Nn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Nn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Nn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Nn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Nn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Nn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Nn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Nn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Nn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Nn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Nn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Nn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Nn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Nn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Nn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Nn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Nn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Nn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Nn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Nn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Nn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Nn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Nn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Nn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ho),terrainDepth:Nn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ho),terrainCoords:Nn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ho)};function Nn(g,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(m):m,I={};return{fragmentSource:g=g.replace(u,(k,B,H,Y,he)=>(I[he]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${he}
varying ${H} ${Y} ${he};
#else
uniform ${H} ${Y} u_${he};
#endif
`:`
#ifdef HAS_UNIFORM_u_${he}
    ${H} ${Y} ${he} = u_${he};
#endif
`)),vertexSource:r=r.replace(u,(k,B,H,Y,he)=>{const Ie=Y==="float"?"vec2":"vec4",Ae=he.match(/color/)?"color":Ie;return I[he]?B==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${H} ${Ie} a_${he};
varying ${H} ${Y} ${he};
#else
uniform ${H} ${Y} u_${he};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = a_${he};
#else
    ${H} ${Y} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = unpack_mix_${Ae}(a_${he}, u_${he}_t);
#else
    ${H} ${Y} ${he} = u_${he};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${H} ${Ie} a_${he};
#else
uniform ${H} ${Y} u_${he};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${H} ${Y} ${he} = a_${he};
#else
    ${H} ${Y} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${H} ${Y} ${he} = unpack_mix_${Ae}(a_${he}, u_${he}_t);
#else
    ${H} ${Y} ${he} = u_${he};
#endif
`}),staticAttributes:f,staticUniforms:C}}class nl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,f,m,_,C,I,k,B){this.context=r;let H=this.boundPaintVertexBuffers.length!==m.length;for(let Y=0;!H&&Y<m.length;Y++)this.boundPaintVertexBuffers[Y]!==m[Y]&&(H=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||H||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==B?this.freshBind(u,f,m,_,C,I,k,B):(r.bindVertexArray.set(this.vao),I&&I.bind(),_&&_.dynamicDraw&&_.bind(),k&&k.bind(),B&&B.bind())}freshBind(r,u,f,m,_,C,I,k){const B=r.numAttributes,H=this.context,Y=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=k,u.enableAttributes(Y,r);for(const he of f)he.enableAttributes(Y,r);C&&C.enableAttributes(Y,r),I&&I.enableAttributes(Y,r),k&&k.enableAttributes(Y,r),u.bind(),u.setVertexAttribPointers(Y,r,_);for(const he of f)he.bind(),he.setVertexAttribPointers(Y,r,_);C&&(C.bind(),C.setVertexAttribPointers(Y,r,_)),m&&m.bind(),I&&(I.bind(),I.setVertexAttribPointers(Y,r,_)),k&&(k.bind(),k.setVertexAttribPointers(Y,r,_)),H.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Vs(g){const r=[];for(let u=0;u<g.length;u++){if(g[u]===null)continue;const f=g[u].split(" ");r.push(f.pop())}return r}class Xo{constructor(r,u,f,m,_,C){const I=r.gl;this.program=I.createProgram();const k=Vs(u.staticAttributes),B=f?f.getBinderAttributes():[],H=k.concat(B),Y=gi.prelude.staticUniforms?Vs(gi.prelude.staticUniforms):[],he=u.staticUniforms?Vs(u.staticUniforms):[],Ie=f?f.getBinderUniforms():[],Ae=Y.concat(he).concat(Ie),Oe=[];for(const lt of Ae)Oe.indexOf(lt)<0&&Oe.push(lt);const Ce=f?f.defines():[];_&&Ce.push("#define OVERDRAW_INSPECTOR;"),C&&Ce.push("#define TERRAIN3D;");const Ke=Ce.concat(gi.prelude.fragmentSource,u.fragmentSource).join(`
`),nt=Ce.concat(gi.prelude.vertexSource,u.vertexSource).join(`
`),De=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(De,Ke),I.compileShader(De),!I.getShaderParameter(De,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(De)}`);I.attachShader(this.program,De);const Ye=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(Ye,nt),I.compileShader(Ye),!I.getShaderParameter(Ye,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(Ye)}`);I.attachShader(this.program,Ye),this.attributes={};const at={};this.numAttributes=H.length;for(let lt=0;lt<this.numAttributes;lt++)H[lt]&&(I.bindAttribLocation(this.program,lt,H[lt]),this.attributes[H[lt]]=lt);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(Ye),I.deleteShader(De);for(let lt=0;lt<Oe.length;lt++){const ft=Oe[lt];if(ft&&!at[ft]){const wt=I.getUniformLocation(this.program,ft);wt&&(at[ft]=wt)}}this.fixedUniforms=m(r,at),this.terrainUniforms=((lt,ft)=>({u_depth:new l.Uniform1i(lt,ft.u_depth),u_terrain:new l.Uniform1i(lt,ft.u_terrain),u_terrain_dim:new l.Uniform1f(lt,ft.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(lt,ft.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(lt,ft.u_terrain_unpack),u_terrain_exaggeration:new l.Uniform1f(lt,ft.u_terrain_exaggeration)}))(r,at),this.binderUniforms=f?f.getUniforms(r,at):[]}draw(r,u,f,m,_,C,I,k,B,H,Y,he,Ie,Ae,Oe,Ce,Ke,nt){const De=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(C),k){r.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,k.depthTexture),r.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,k.texture);for(const at in this.terrainUniforms)this.terrainUniforms[at].set(k[at])}for(const at in this.fixedUniforms)this.fixedUniforms[at].set(I[at]);Oe&&Oe.setUniforms(r,this.binderUniforms,Ie,{zoom:Ae});let Ye=0;switch(u){case De.LINES:Ye=2;break;case De.TRIANGLES:Ye=3;break;case De.LINE_STRIP:Ye=1}for(const at of he.get()){const lt=at.vaos||(at.vaos={});(lt[B]||(lt[B]=new nl)).bind(r,this,H,Oe?Oe.getPaintVertexBuffers():[],Y,at.vertexOffset,Ce,Ke,nt),De.drawElements(u,at.primitiveLength*Ye,De.UNSIGNED_SHORT,at.primitiveOffset*Ye*2)}}}function rl(g,r,u){const f=1/Ve(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,C=_*(u.tileID.canonical.x+u.tileID.wrap*m),I=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[C>>16,I>>16],u_pixel_coord_lower:[65535&C,65535&I]}}const qo=(g,r,u,f)=>{const m=r.style.light,_=m.properties.get("position"),C=[_.x,_.y,_.z],I=function(){var B=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(B[1]=0,B[2]=0,B[3]=0,B[5]=0,B[6]=0,B[7]=0),B[0]=1,B[4]=1,B[8]=1,B}();m.properties.get("anchor")==="viewport"&&function(B,H){var Y=Math.sin(H),he=Math.cos(H);B[0]=he,B[1]=Y,B[2]=0,B[3]=-Y,B[4]=he,B[5]=0,B[6]=0,B[7]=0,B[8]=1}(I,-r.transform.angle),function(B,H,Y){var he=H[0],Ie=H[1],Ae=H[2];B[0]=he*Y[0]+Ie*Y[3]+Ae*Y[6],B[1]=he*Y[1]+Ie*Y[4]+Ae*Y[7],B[2]=he*Y[2]+Ie*Y[5]+Ae*Y[8]}(C,C,I);const k=m.properties.get("color");return{u_matrix:g,u_lightpos:C,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+u,u_opacity:f}},Ph=(g,r,u,f,m,_,C)=>l.extend(qo(g,r,u,f),rl(_,r,C),{u_height_factor:-Math.pow(2,m.overscaledZ)/C.tileSize/8}),ec=g=>({u_matrix:g}),ii=(g,r,u,f)=>l.extend(ec(g),rl(u,r,f)),Mh=(g,r)=>({u_matrix:g,u_world:r}),tc=(g,r,u,f,m)=>l.extend(ii(g,r,u,f),{u_world:m}),kh=(g,r,u,f)=>{const m=g.transform;let _,C;if(f.paint.get("circle-pitch-alignment")==="map"){const I=Ve(u,1,m.zoom);_=!0,C=[I,I]}else _=!1,C=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(r.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:C}},nc=(g,r,u)=>{const f=Ve(u,1,r.zoom),m=Math.pow(2,r.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*m),r.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:_}},rc=(g,r,u=1)=>({u_matrix:g,u_color:r,u_overlay:0,u_overlay_scale:u}),ma=g=>({u_matrix:g}),il=(g,r,u,f)=>({u_matrix:g,u_extrude_scale:Ve(r,1,u),u_intensity:f});function iu(g,r){const u=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new l.MercatorCoordinate(0,f/u).toLngLat().lat,new l.MercatorCoordinate(0,(f+1)/u).toLngLat().lat]}const gs=(g,r,u,f)=>{const m=g.transform;return{u_matrix:ga(g,r,u,f),u_ratio:1/Ve(r,1,m.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},ic=(g,r,u,f,m)=>l.extend(gs(g,r,u,m),{u_image:0,u_image_height:f}),ki=(g,r,u,f,m)=>{const _=g.transform,C=yi(r,_);return{u_matrix:ga(g,r,u,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Ve(r,1,_.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[C,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},ol=(g,r,u,f,m,_)=>{const C=g.lineAtlas,I=yi(r,g.transform),k=u.layout.get("line-cap")==="round",B=C.getDash(f.from,k),H=C.getDash(f.to,k),Y=B.width*m.fromScale,he=H.width*m.toScale;return l.extend(gs(g,r,u,_),{u_patternscale_a:[I/Y,-B.height/2],u_patternscale_b:[I/he,-H.height/2],u_sdfgamma:C.width/(256*Math.min(Y,he)*g.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:H.y,u_mix:m.t})};function yi(g,r){return 1/Ve(g,1,r.tileZoom)}function ga(g,r,u,f){return g.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const sl=(g,r,u,f,m)=>{return{u_matrix:g,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(C=m.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Gs(m.paint.get("raster-hue-rotate"))};var _,C};function Gs(g){g*=Math.PI/180;const r=Math.sin(g),u=Math.cos(g);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const ya=(g,r,u,f,m,_,C,I,k,B)=>{const H=m.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:H.width/H.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:I,u_is_text:+k,u_pitch_with_map:+f,u_texsize:B,u_texture:0}},va=(g,r,u,f,m,_,C,I,k,B,H)=>{const Y=m.transform;return l.extend(ya(g,r,u,f,m,_,C,I,k,B),{u_gamma_scale:f?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+H})},_a=(g,r,u,f,m,_,C,I,k,B)=>l.extend(va(g,r,u,f,m,_,C,I,!0,k,!0),{u_texsize_icon:B,u_texture_icon:1}),So=(g,r,u)=>({u_matrix:g,u_opacity:r,u_color:u}),al=(g,r,u,f,m,_)=>l.extend(function(C,I,k,B){const H=k.imageManager.getPattern(C.from.toString()),Y=k.imageManager.getPattern(C.to.toString()),{width:he,height:Ie}=k.imageManager.getPixelSize(),Ae=Math.pow(2,B.tileID.overscaledZ),Oe=B.tileSize*Math.pow(2,k.transform.tileZoom)/Ae,Ce=Oe*(B.tileID.canonical.x+B.tileID.wrap*Ae),Ke=Oe*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[he,Ie],u_mix:I.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Ve(B,1,k.transform.tileZoom),u_pixel_coord_upper:[Ce>>16,Ke>>16],u_pixel_coord_lower:[65535&Ce,65535&Ke]}}(f,_,u,m),{u_matrix:g,u_opacity:r}),vi={fillExtrusion:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_lightpos:new l.Uniform3f(g,r.u_lightpos),u_lightintensity:new l.Uniform1f(g,r.u_lightintensity),u_lightcolor:new l.Uniform3f(g,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(g,r.u_vertical_gradient),u_opacity:new l.Uniform1f(g,r.u_opacity)}),fillExtrusionPattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_lightpos:new l.Uniform3f(g,r.u_lightpos),u_lightintensity:new l.Uniform1f(g,r.u_lightintensity),u_lightcolor:new l.Uniform3f(g,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(g,r.u_vertical_gradient),u_height_factor:new l.Uniform1f(g,r.u_height_factor),u_image:new l.Uniform1i(g,r.u_image),u_texsize:new l.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(g,r.u_scale),u_fade:new l.Uniform1f(g,r.u_fade),u_opacity:new l.Uniform1f(g,r.u_opacity)}),fill:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix)}),fillPattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_image:new l.Uniform1i(g,r.u_image),u_texsize:new l.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(g,r.u_scale),u_fade:new l.Uniform1f(g,r.u_fade)}),fillOutline:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_world:new l.Uniform2f(g,r.u_world)}),fillOutlinePattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_world:new l.Uniform2f(g,r.u_world),u_image:new l.Uniform1i(g,r.u_image),u_texsize:new l.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(g,r.u_scale),u_fade:new l.Uniform1f(g,r.u_fade)}),circle:(g,r)=>({u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(g,r.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(g,r.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(g,r.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(g,r.u_matrix)}),collisionBox:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(g,r.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(g,r.u_extrude_scale),u_overscale_factor:new l.Uniform1f(g,r.u_overscale_factor)}),collisionCircle:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_inv_matrix:new l.UniformMatrix4f(g,r.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(g,r.u_viewport_size)}),debug:(g,r)=>({u_color:new l.UniformColor(g,r.u_color),u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_overlay:new l.Uniform1i(g,r.u_overlay),u_overlay_scale:new l.Uniform1f(g,r.u_overlay_scale)}),clippingMask:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix)}),heatmap:(g,r)=>({u_extrude_scale:new l.Uniform1f(g,r.u_extrude_scale),u_intensity:new l.Uniform1f(g,r.u_intensity),u_matrix:new l.UniformMatrix4f(g,r.u_matrix)}),heatmapTexture:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_world:new l.Uniform2f(g,r.u_world),u_image:new l.Uniform1i(g,r.u_image),u_color_ramp:new l.Uniform1i(g,r.u_color_ramp),u_opacity:new l.Uniform1f(g,r.u_opacity)}),hillshade:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_image:new l.Uniform1i(g,r.u_image),u_latrange:new l.Uniform2f(g,r.u_latrange),u_light:new l.Uniform2f(g,r.u_light),u_shadow:new l.UniformColor(g,r.u_shadow),u_highlight:new l.UniformColor(g,r.u_highlight),u_accent:new l.UniformColor(g,r.u_accent)}),hillshadePrepare:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_image:new l.Uniform1i(g,r.u_image),u_dimension:new l.Uniform2f(g,r.u_dimension),u_zoom:new l.Uniform1f(g,r.u_zoom),u_unpack:new l.Uniform4f(g,r.u_unpack)}),line:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_ratio:new l.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(g,r.u_units_to_pixels)}),lineGradient:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_ratio:new l.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(g,r.u_units_to_pixels),u_image:new l.Uniform1i(g,r.u_image),u_image_height:new l.Uniform1f(g,r.u_image_height)}),linePattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_texsize:new l.Uniform2f(g,r.u_texsize),u_ratio:new l.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_image:new l.Uniform1i(g,r.u_image),u_units_to_pixels:new l.Uniform2f(g,r.u_units_to_pixels),u_scale:new l.Uniform3f(g,r.u_scale),u_fade:new l.Uniform1f(g,r.u_fade)}),lineSDF:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_ratio:new l.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(g,r.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(g,r.u_patternscale_a),u_patternscale_b:new l.Uniform2f(g,r.u_patternscale_b),u_sdfgamma:new l.Uniform1f(g,r.u_sdfgamma),u_image:new l.Uniform1i(g,r.u_image),u_tex_y_a:new l.Uniform1f(g,r.u_tex_y_a),u_tex_y_b:new l.Uniform1f(g,r.u_tex_y_b),u_mix:new l.Uniform1f(g,r.u_mix)}),raster:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_tl_parent:new l.Uniform2f(g,r.u_tl_parent),u_scale_parent:new l.Uniform1f(g,r.u_scale_parent),u_buffer_scale:new l.Uniform1f(g,r.u_buffer_scale),u_fade_t:new l.Uniform1f(g,r.u_fade_t),u_opacity:new l.Uniform1f(g,r.u_opacity),u_image0:new l.Uniform1i(g,r.u_image0),u_image1:new l.Uniform1i(g,r.u_image1),u_brightness_low:new l.Uniform1f(g,r.u_brightness_low),u_brightness_high:new l.Uniform1f(g,r.u_brightness_high),u_saturation_factor:new l.Uniform1f(g,r.u_saturation_factor),u_contrast_factor:new l.Uniform1f(g,r.u_contrast_factor),u_spin_weights:new l.Uniform3f(g,r.u_spin_weights)}),symbolIcon:(g,r)=>({u_is_size_zoom_constant:new l.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(g,r.u_size_t),u_size:new l.Uniform1f(g,r.u_size),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(g,r.u_pitch),u_rotate_symbol:new l.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(g,r.u_fade_change),u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new l.Uniform1i(g,r.u_is_text),u_pitch_with_map:new l.Uniform1i(g,r.u_pitch_with_map),u_texsize:new l.Uniform2f(g,r.u_texsize),u_texture:new l.Uniform1i(g,r.u_texture)}),symbolSDF:(g,r)=>({u_is_size_zoom_constant:new l.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(g,r.u_size_t),u_size:new l.Uniform1f(g,r.u_size),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(g,r.u_pitch),u_rotate_symbol:new l.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(g,r.u_fade_change),u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new l.Uniform1i(g,r.u_is_text),u_pitch_with_map:new l.Uniform1i(g,r.u_pitch_with_map),u_texsize:new l.Uniform2f(g,r.u_texsize),u_texture:new l.Uniform1i(g,r.u_texture),u_gamma_scale:new l.Uniform1f(g,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(g,r.u_is_halo)}),symbolTextAndIcon:(g,r)=>({u_is_size_zoom_constant:new l.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(g,r.u_size_t),u_size:new l.Uniform1f(g,r.u_size),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(g,r.u_pitch),u_rotate_symbol:new l.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(g,r.u_fade_change),u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new l.Uniform1i(g,r.u_is_text),u_pitch_with_map:new l.Uniform1i(g,r.u_pitch_with_map),u_texsize:new l.Uniform2f(g,r.u_texsize),u_texsize_icon:new l.Uniform2f(g,r.u_texsize_icon),u_texture:new l.Uniform1i(g,r.u_texture),u_texture_icon:new l.Uniform1i(g,r.u_texture_icon),u_gamma_scale:new l.Uniform1f(g,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(g,r.u_is_halo)}),background:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_opacity:new l.Uniform1f(g,r.u_opacity),u_color:new l.UniformColor(g,r.u_color)}),backgroundPattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_opacity:new l.Uniform1f(g,r.u_opacity),u_image:new l.Uniform1i(g,r.u_image),u_pattern_tl_a:new l.Uniform2f(g,r.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(g,r.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(g,r.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(g,r.u_pattern_br_b),u_texsize:new l.Uniform2f(g,r.u_texsize),u_mix:new l.Uniform1f(g,r.u_mix),u_pattern_size_a:new l.Uniform2f(g,r.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(g,r.u_pattern_size_b),u_scale_a:new l.Uniform1f(g,r.u_scale_a),u_scale_b:new l.Uniform1f(g,r.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(g,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(g,r.u_tile_units_to_pixels)}),terrain:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_texture:new l.Uniform1i(g,r.u_texture),u_ele_delta:new l.Uniform1f(g,r.u_ele_delta)}),terrainDepth:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_ele_delta:new l.Uniform1f(g,r.u_ele_delta)}),terrainCoords:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_texture:new l.Uniform1i(g,r.u_texture),u_terrain_coords_id:new l.Uniform1f(g,r.u_terrain_coords_id),u_ele_delta:new l.Uniform1f(g,r.u_ele_delta)})};class _i{constructor(r,u,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ou={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xa{constructor(r,u,f,m){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let f=0;f<this.attributes.length;f++){const m=u.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,f){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],C=u.attributes[_.name];C!==void 0&&r.vertexAttribPointer(C,_.components,r[ou[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Zs=new WeakMap;function ys(g){if(Zs.has(g))return Zs.get(g);{const r=g.getParameter(g.VERSION).startsWith("WebGL 2.0");return Zs.set(g,r),r}}class zn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ll extends zn{getDefault(){return l.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ul extends zn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class su extends zn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class cl extends zn{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class oc extends zn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class sc extends zn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class vs extends zn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Lh extends zn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class au extends zn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class zh extends zn{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Oh extends zn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class Rh extends zn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Fh extends zn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class lu extends zn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class hl extends zn{getDefault(){return l.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class fl extends zn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class wa extends zn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class Ws extends zn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class ac extends zn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class lc extends zn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class uu extends zn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Ko extends zn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class uc extends zn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Hs extends zn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Xs extends zn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class cc extends zn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class qs extends zn{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Rn extends zn{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const f=this.gl;ys(f)?f.bindVertexArray(r):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class To extends zn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class hc extends zn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Hi extends zn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class _s extends zn{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class jh extends _s{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Dh extends _s{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class fc extends _s{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class cu{constructor(r,u,f,m,_){this.context=r,this.width=u,this.height=f;const C=r.gl,I=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new jh(r,I),m)this.depthAttachment=_?new fc(r,I):new Dh(r,I);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class nr{constructor(r,u,f){this.blendFunction=r,this.blendColor=u,this.mask=f}}nr.Replace=[1,0],nr.disabled=new nr(nr.Replace,l.Color.transparent,[!1,!1,!1,!1]),nr.unblended=new nr(nr.Replace,l.Color.transparent,[!0,!0,!0,!0]),nr.alphaBlended=new nr([1,771],l.Color.transparent,[!0,!0,!0,!0]);class xs{constructor(r){var u,f;if(this.gl=r,this.clearColor=new ll(this),this.clearDepth=new ul(this),this.clearStencil=new su(this),this.colorMask=new cl(this),this.depthMask=new oc(this),this.stencilMask=new sc(this),this.stencilFunc=new vs(this),this.stencilOp=new Lh(this),this.stencilTest=new au(this),this.depthRange=new zh(this),this.depthTest=new Oh(this),this.depthFunc=new Rh(this),this.blend=new Fh(this),this.blendFunc=new lu(this),this.blendColor=new hl(this),this.blendEquation=new fl(this),this.cullFace=new wa(this),this.cullFaceSide=new Ws(this),this.frontFace=new ac(this),this.program=new lc(this),this.activeTexture=new uu(this),this.viewport=new Ko(this),this.bindFramebuffer=new uc(this),this.bindRenderbuffer=new Hs(this),this.bindTexture=new Xs(this),this.bindVertexBuffer=new cc(this),this.bindElementBuffer=new qs(this),this.bindVertexArray=new Rn(this),this.pixelStoreUnpack=new To(this),this.pixelStoreUnpackPremultiplyAlpha=new hc(this),this.pixelStoreUnpackFlipY=new Hi(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ys(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new _i(this,r,u)}createVertexBuffer(r,u,f){return new xa(this,r,u,f)}createRenderbuffer(r,u,f){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(r,u,f,m){return new cu(this,r,u,f,m)}clear({color:r,depth:u,stencil:f}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.deepEqual(r.blendFunction,nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ys(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return ys(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class wn{constructor(r,u,f){this.func=r,this.mask=u,this.range=f}}wn.ReadOnly=!1,wn.ReadWrite=!0,wn.disabled=new wn(519,wn.ReadOnly,[0,1]);const ba=7680;class Vn{constructor(r,u,f,m,_,C){this.test=r,this.ref=u,this.mask=f,this.fail=m,this.depthFail=_,this.pass=C}}Vn.disabled=new Vn({func:519,mask:0},0,0,ba,ba,ba);class Hn{constructor(r,u,f){this.enable=r,this.mode=u,this.frontFace=f}}let Yo;function Ea(g,r,u,f,m,_,C){const I=g.context,k=I.gl,B=g.useProgram("collisionBox"),H=[];let Y=0,he=0;for(let De=0;De<f.length;De++){const Ye=f[De],at=r.getTile(Ye),lt=at.getBucket(u);if(!lt)continue;let ft=Ye.posMatrix;m[0]===0&&m[1]===0||(ft=g.translatePosMatrix(Ye.posMatrix,at,m,_));const wt=C?lt.textCollisionBox:lt.iconCollisionBox,xt=lt.collisionCircleArray;if(xt.length>0){const Ct=l.create(),Gt=ft;l.mul(Ct,lt.placementInvProjMatrix,g.transform.glCoordMatrix),l.mul(Ct,Ct,lt.placementViewportMatrix),H.push({circleArray:xt,circleOffset:he,transform:Gt,invTransform:Ct,coord:Ye}),Y+=xt.length/4,he=Y}wt&&B.draw(I,k.LINES,wn.disabled,Vn.disabled,g.colorModeForRenderPass(),Hn.disabled,nc(ft,g.transform,at),g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ye),u.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,g.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!C||!H.length)return;const Ie=g.useProgram("collisionCircle"),Ae=new l.CollisionCircleLayoutArray;Ae.resize(4*Y),Ae._trim();let Oe=0;for(const De of H)for(let Ye=0;Ye<De.circleArray.length/4;Ye++){const at=4*Ye,lt=De.circleArray[at+0],ft=De.circleArray[at+1],wt=De.circleArray[at+2],xt=De.circleArray[at+3];Ae.emplace(Oe++,lt,ft,wt,xt,0),Ae.emplace(Oe++,lt,ft,wt,xt,1),Ae.emplace(Oe++,lt,ft,wt,xt,2),Ae.emplace(Oe++,lt,ft,wt,xt,3)}(!Yo||Yo.length<2*Y)&&(Yo=function(De){const Ye=2*De,at=new l.QuadTriangleArray;at.resize(Ye),at._trim();for(let lt=0;lt<Ye;lt++){const ft=6*lt;at.uint16[ft+0]=4*lt+0,at.uint16[ft+1]=4*lt+1,at.uint16[ft+2]=4*lt+2,at.uint16[ft+3]=4*lt+2,at.uint16[ft+4]=4*lt+3,at.uint16[ft+5]=4*lt+0}return at}(Y));const Ce=I.createIndexBuffer(Yo,!0),Ke=I.createVertexBuffer(Ae,l.collisionCircleLayout.members,!0);for(const De of H){const Ye={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(nt=g.transform).cameraToCenterDistance,u_viewport_size:[nt.width,nt.height]};Ie.draw(I,k.TRIANGLES,wn.disabled,Vn.disabled,g.colorModeForRenderPass(),Hn.disabled,Ye,g.style.map.terrain&&g.style.map.terrain.getTerrainData(De.coord),u.id,Ke,Ce,l.SegmentVector.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,g.transform.zoom,null,null,null)}var nt;Ke.destroy(),Ce.destroy()}Hn.disabled=new Hn(!1,1029,2305),Hn.backCCW=new Hn(!0,1029,2305);const hu=l.identity(new Float32Array(16));function dl(g,r,u,f,m,_){const{horizontalAlign:C,verticalAlign:I}=l.getAnchorAlignment(g);return new l.Point((-(C-.5)*r/m+f[0])*_,(-(I-.5)*u/m+f[1])*_)}function Co(g,r,u,f,m,_,C,I,k,B,H){const Y=g.text.placedSymbolArray,he=g.text.dynamicLayoutVertexArray,Ie=g.icon.dynamicLayoutVertexArray,Ae={};he.clear();for(let Oe=0;Oe<Y.length;Oe++){const Ce=Y.get(Oe),Ke=Ce.hidden||!Ce.crossTileID||g.allowVerticalPlacement&&!Ce.placedOrientation?null:f[Ce.crossTileID];if(Ke){const nt=new l.Point(Ce.anchorX,Ce.anchorY),De=kt(nt,u?C:_,H),Ye=yn(m.cameraToCenterDistance,De.signedDistanceFromCamera);let at=l.evaluateSizeForFeature(g.textSizeData,k,Ce)*Ye/l.ONE_EM;u&&(at*=g.tilePixelRatio/I);const{width:lt,height:ft,anchor:wt,textOffset:xt,textBoxScale:Ct}=Ke,Gt=dl(wt,lt,ft,xt,Ct,at),Sn=u?kt(nt.add(Gt),_,H).point:De.point.add(r?Gt.rotate(-m.angle):Gt),Ot=g.allowVerticalPlacement&&Ce.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let nn=0;nn<Ce.numGlyphs;nn++)l.addDynamicAttributes(he,Sn,Ot);B&&Ce.associatedIconIndex>=0&&(Ae[Ce.associatedIconIndex]={shiftedAnchor:Sn,angle:Ot})}else fe(Ce.numGlyphs,he)}if(B){Ie.clear();const Oe=g.icon.placedSymbolArray;for(let Ce=0;Ce<Oe.length;Ce++){const Ke=Oe.get(Ce);if(Ke.hidden)fe(Ke.numGlyphs,Ie);else{const nt=Ae[Ce];if(nt)for(let De=0;De<Ke.numGlyphs;De++)l.addDynamicAttributes(Ie,nt.shiftedAnchor,nt.angle);else fe(Ke.numGlyphs,Ie)}}g.icon.dynamicLayoutVertexBuffer.updateData(Ie)}g.text.dynamicLayoutVertexBuffer.updateData(he)}function Bh(g,r,u){return u.iconsInText&&r?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function pl(g,r,u,f,m,_,C,I,k,B,H,Y){const he=g.context,Ie=he.gl,Ae=g.transform,Oe=I==="map",Ce=k==="map",Ke=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",nt=Oe&&!Ce&&!Ke,De=!u.layout.get("symbol-sort-key").isConstant();let Ye=!1;const at=g.depthModeForSublayer(0,wn.ReadOnly),lt=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ft=[];for(const wt of f){const xt=r.getTile(wt),Ct=xt.getBucket(u);if(!Ct)continue;const Gt=m?Ct.text:Ct.icon;if(!Gt||!Gt.segments.get().length||!Gt.hasVisibleVertices)continue;const Sn=Gt.programConfigurations.get(u.id),Ot=m||Ct.sdfIcons,nn=m?Ct.textSizeData:Ct.iconSizeData,$t=Ce||Ae.pitch!==0,ir=g.useProgram(Bh(Ot,m,Ct),Sn),Tn=l.evaluateSizeForZoom(nn,Ae.zoom),rn=g.style.map.terrain&&g.style.map.terrain.getTerrainData(wt);let Cn,ur,Zn,qi,Qr=[0,0],Sr=null;if(m)ur=xt.glyphAtlasTexture,Zn=Ie.LINEAR,Cn=xt.glyphAtlasTexture.size,Ct.iconsInText&&(Qr=xt.imageAtlasTexture.size,Sr=xt.imageAtlasTexture,qi=$t||g.options.rotating||g.options.zooming||nn.kind==="composite"||nn.kind==="camera"?Ie.LINEAR:Ie.NEAREST);else{const Vr=u.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;ur=xt.imageAtlasTexture,Zn=Ot||g.options.rotating||g.options.zooming||Vr||$t?Ie.LINEAR:Ie.NEAREST,Cn=xt.imageAtlasTexture.size}const Ri=Ve(xt,1,g.transform.zoom),rs=st(wt.posMatrix,Ce,Oe,g.transform,Ri),ko=en(wt.posMatrix,Ce,Oe,g.transform,Ri),is=lt&&Ct.hasTextData(),wl=u.layout.get("icon-text-fit")!=="none"&&is&&Ct.hasIconData();if(Ke){const Vr=g.style.map.terrain?(si,cr)=>g.style.map.terrain.getElevation(wt,si,cr):null,Fr=u.layout.get("text-rotation-alignment")==="map";_n(Ct,wt.posMatrix,g,m,rs,ko,Ce,B,Fr,Vr)}const Js=g.translatePosMatrix(wt.posMatrix,xt,_,C),Es=Ke||m&&lt||wl?hu:rs,Ir=g.translatePosMatrix(ko,xt,_,C,!0),$r=Ot&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oi;oi=Ot?Ct.iconsInText?_a(nn.kind,Tn,nt,Ce,g,Js,Es,Ir,Cn,Qr):va(nn.kind,Tn,nt,Ce,g,Js,Es,Ir,m,Cn,!0):ya(nn.kind,Tn,nt,Ce,g,Js,Es,Ir,m,Cn);const bl={program:ir,buffers:Gt,uniformValues:oi,atlasTexture:ur,atlasTextureIcon:Sr,atlasInterpolation:Zn,atlasInterpolationIcon:qi,isSDF:Ot,hasHalo:$r};if(De&&Ct.canOverlap){Ye=!0;const Vr=Gt.segments.get();for(const Fr of Vr)ft.push({segments:new l.SegmentVector([Fr]),sortKey:Fr.sortKey,state:bl,terrainData:rn})}else ft.push({segments:Gt.segments,sortKey:0,state:bl,terrainData:rn})}Ye&&ft.sort((wt,xt)=>wt.sortKey-xt.sortKey);for(const wt of ft){const xt=wt.state;if(he.activeTexture.set(Ie.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Ie.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(he.activeTexture.set(Ie.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Ie.CLAMP_TO_EDGE)),xt.isSDF){const Ct=xt.uniformValues;xt.hasHalo&&(Ct.u_is_halo=1,Jo(xt.buffers,wt.segments,u,g,xt.program,at,H,Y,Ct,wt.terrainData)),Ct.u_is_halo=0}Jo(xt.buffers,wt.segments,u,g,xt.program,at,H,Y,xt.uniformValues,wt.terrainData)}}function Jo(g,r,u,f,m,_,C,I,k,B){const H=f.context;m.draw(H,H.gl.TRIANGLES,_,C,I,Hn.disabled,k,B,u.id,g.layoutVertexBuffer,g.indexBuffer,r,u.paint,f.transform.zoom,g.programConfigurations.get(u.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function ml(g,r,u,f,m){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let C=_[u.to.toString()],I=_[u.from.toString()];if(!C||!I){const k=m.getPaintProperty(r);C=_[k],I=_[k]}C&&I&&g.setConstantPatternPositions(C,I)}function Qo(g,r,u,f,m,_,C){const I=g.context.gl,k="fill-pattern",B=u.paint.get(k),H=B&&B.constantOr(1),Y=u.getCrossfadeParameters();let he,Ie,Ae,Oe,Ce;C?(Ie=H&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=I.LINES):(Ie=H?"fillPattern":"fill",he=I.TRIANGLES);const Ke=B.constantOr(null);for(const nt of f){const De=r.getTile(nt);if(H&&!De.patternsLoaded())continue;const Ye=De.getBucket(u);if(!Ye)continue;const at=Ye.programConfigurations.get(u.id),lt=g.useProgram(Ie,at),ft=g.style.map.terrain&&g.style.map.terrain.getTerrainData(nt);H&&(g.context.activeTexture.set(I.TEXTURE0),De.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),at.updatePaintBuffers(Y)),ml(at,k,Ke,De,u);const wt=ft?nt:null,xt=g.translatePosMatrix(wt?wt.posMatrix:nt.posMatrix,De,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){Oe=Ye.indexBuffer2,Ce=Ye.segments2;const Ct=[I.drawingBufferWidth,I.drawingBufferHeight];Ae=Ie==="fillOutlinePattern"&&H?tc(xt,g,Y,De,Ct):Mh(xt,Ct)}else Oe=Ye.indexBuffer,Ce=Ye.segments,Ae=H?ii(xt,g,Y,De):ec(xt);lt.draw(g.context,he,m,g.stencilModeForClipping(nt),_,Hn.disabled,Ae,ft,u.id,Ye.layoutVertexBuffer,Oe,Ce,u.paint,g.transform.zoom,at)}}function Ao(g,r,u,f,m,_,C){const I=g.context,k=I.gl,B="fill-extrusion-pattern",H=u.paint.get(B),Y=H.constantOr(1),he=u.getCrossfadeParameters(),Ie=u.paint.get("fill-extrusion-opacity"),Ae=H.constantOr(null);for(const Oe of f){const Ce=r.getTile(Oe),Ke=Ce.getBucket(u);if(!Ke)continue;const nt=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Oe),De=Ke.programConfigurations.get(u.id),Ye=g.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",De);Y&&(g.context.activeTexture.set(k.TEXTURE0),Ce.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),De.updatePaintBuffers(he)),ml(De,B,Ae,Ce,u);const at=g.translatePosMatrix(Oe.posMatrix,Ce,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),lt=u.paint.get("fill-extrusion-vertical-gradient"),ft=Y?Ph(at,g,lt,Ie,Oe,he,Ce):qo(at,g,lt,Ie);Ye.draw(I,I.gl.TRIANGLES,m,_,C,Hn.backCCW,ft,nt,u.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,u.paint,g.transform.zoom,De,g.style.map.terrain&&Ke.centroidVertexBuffer)}}function Rr(g,r,u,f,m,_,C){const I=g.context,k=I.gl,B=u.fbo;if(!B)return;const H=g.useProgram("hillshade"),Y=g.style.map.terrain&&g.style.map.terrain.getTerrainData(r);I.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,B.colorAttachment.get()),H.draw(I,k.TRIANGLES,m,_,C,Hn.disabled,((he,Ie,Ae,Oe)=>{const Ce=Ae.paint.get("hillshade-shadow-color"),Ke=Ae.paint.get("hillshade-highlight-color"),nt=Ae.paint.get("hillshade-accent-color");let De=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=he.transform.angle);const Ye=!he.options.moving;return{u_matrix:Oe?Oe.posMatrix:he.transform.calculatePosMatrix(Ie.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:iu(0,Ie.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),De],u_shadow:Ce,u_highlight:Ke,u_accent:nt}})(g,u,f,Y?r:null),Y,f.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function Io(g,r,u,f,m,_){const C=g.context,I=C.gl,k=r.dem;if(k&&k.data){const B=k.dim,H=k.stride,Y=k.getPixels();if(C.activeTexture.set(I.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||g.getTileTexture(H),r.demTexture){const Ie=r.demTexture;Ie.update(Y,{premultiply:!1}),Ie.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else r.demTexture=new q(C,Y,I.RGBA,{premultiply:!1}),r.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);C.activeTexture.set(I.TEXTURE0);let he=r.fbo;if(!he){const Ie=new q(C,{width:B,height:B,data:null},I.RGBA);Ie.bind(I.LINEAR,I.CLAMP_TO_EDGE),he=r.fbo=C.createFramebuffer(B,B,!0,!1),he.colorAttachment.set(Ie.texture)}C.bindFramebuffer.set(he.framebuffer),C.viewport.set([0,0,B,B]),g.useProgram("hillshadePrepare").draw(C,I.TRIANGLES,f,m,_,Hn.disabled,((Ie,Ae)=>{const Oe=Ae.stride,Ce=l.create();return l.ortho(Ce,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Ce,Ce,[0,-l.EXTENT,0]),{u_matrix:Ce,u_image:1,u_dimension:[Oe,Oe],u_zoom:Ie.overscaledZ,u_unpack:Ae.getUnpackVector()}})(r.tileID,k),null,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function fu(g,r,u,f,m,_){const C=f.paint.get("raster-fade-duration");if(!_&&C>0){const I=l.browser.now(),k=(I-g.timeAdded)/C,B=r?(I-r.timeAdded)/C:-1,H=u.getSource(),Y=m.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),he=!r||Math.abs(r.tileID.overscaledZ-Y)>Math.abs(g.tileID.overscaledZ-Y),Ie=he&&g.refreshedUponExpiration?1:l.clamp(he?k:1-B,0,1);return g.refreshedUponExpiration&&k>=1&&(g.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Ie}:{opacity:Ie,mix:0}}return{opacity:1,mix:0}}const gl=new l.Color(1,0,0,1),gr=new l.Color(0,1,0,1),fo=new l.Color(0,0,1,1),Jr=new l.Color(1,0,1,1),xi=new l.Color(0,1,1,1);function Po(g,r,u,f){Li(g,0,r+u/2,g.transform.width,u,f)}function yl(g,r,u,f){Li(g,r-u/2,0,u,g.transform.height,f)}function Li(g,r,u,f,m,_){const C=g.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(r*g.pixelRatio,u*g.pixelRatio,f*g.pixelRatio,m*g.pixelRatio),C.clear({color:_}),I.disable(I.SCISSOR_TEST)}function es(g,r,u){const f=g.context,m=f.gl,_=u.posMatrix,C=g.useProgram("debug"),I=wn.disabled,k=Vn.disabled,B=g.colorModeForRenderPass(),H="$debug",Y=g.style.map.terrain&&g.style.map.terrain.getTerrainData(u);f.activeTexture.set(m.TEXTURE0);const he=r.getTileByID(u.key).latestRawTileData,Ie=Math.floor((he&&he.byteLength||0)/1024),Ae=r.getTile(u).tileSize,Oe=512/Math.min(Ae,512)*(u.overscaledZ/g.transform.zoom)*.5;let Ce=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ce+=` => ${u.overscaledZ}`),function(Ke,nt){Ke.initDebugOverlayCanvas();const De=Ke.debugOverlayCanvas,Ye=Ke.context.gl,at=Ke.debugOverlayCanvas.getContext("2d");at.clearRect(0,0,De.width,De.height),at.shadowColor="white",at.shadowBlur=2,at.lineWidth=1.5,at.strokeStyle="white",at.textBaseline="top",at.font="bold 36px Open Sans, sans-serif",at.fillText(nt,5,5),at.strokeText(nt,5,5),Ke.debugOverlayTexture.update(De),Ke.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(g,`${Ce} ${Ie}kB`),C.draw(f,m.TRIANGLES,I,k,nr.alphaBlended,Hn.disabled,rc(_,l.Color.transparent,Oe),null,H,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),C.draw(f,m.LINE_STRIP,I,k,B,Hn.disabled,rc(_,l.Color.red),Y,H,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function Sa(g,r,u){const f=g.context,m=f.gl,_=g.colorModeForRenderPass(),C=new wn(m.LEQUAL,wn.ReadWrite,g.depthRangeFor3D),I=g.useProgram("terrain"),k=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,g.width,g.height]);for(const B of u){const H=g.renderToTexture.getTexture(B),Y=r.getTerrainData(B.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,H.texture);const he={u_matrix:g.transform.calculatePosMatrix(B.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(g.transform.zoom)};I.draw(f,m.TRIANGLES,C,Vn.disabled,_,Hn.backCCW,he,Y,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class du{constructor(r,u){this.context=new xs(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=O.maxUnderzooming+O.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pr}resize(r,u,f){if(this.width=Math.floor(r*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,u=new l.PosArray;u.emplaceBack(0,0),u.emplaceBack(l.EXTENT,0),u.emplaceBack(0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(u,tl.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const f=new l.PosArray;f.emplaceBack(0,0),f.emplaceBack(l.EXTENT,0),f.emplaceBack(0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=r.createVertexBuffer(f,tl.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const m=new l.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(l.EXTENT,0,l.EXTENT,0),m.emplaceBack(0,l.EXTENT,0,l.EXTENT),m.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(m,Pt.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const _=new l.PosArray;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,tl.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const C=new l.LineStripIndexArray;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(C);const I=new l.TriangleIndexArray;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(I);const k=this.context.gl;this.stencilClearMode=new Vn({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.create();l.ortho(f,0,this.width,this.height,0,0,1),l.scale(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,wn.disabled,this.stencilClearMode,nr.disabled,Hn.disabled,ma(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(nr.disabled),f.setDepthMode(wn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const I=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(f,m.TRIANGLES,wn.disabled,new Vn({func:m.ALWAYS,mask:0},I,255,m.KEEP,m.KEEP,m.REPLACE),nr.disabled,Hn.disabled,ma(C.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new Vn({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new Vn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,f=r.sort((C,I)=>I.overscaledZ-C.overscaledZ),m=f[f.length-1].overscaledZ,_=f[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let I=0;I<_;I++)C[I+m]=new Vn({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,f]}return[{[m]:Vn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new nr([r.CONSTANT_COLOR,r.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?nr.unblended:nr.alphaBlended}depthModeForSublayer(r,u,f){if(!this.opaquePassEnabledForLayer())return wn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new wn(f||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,_={},C={},I={};for(const k in m){const B=m[k];B.used&&B.prepare(this.context),_[k]=B.getVisibleCoordinates(),C[k]=_[k].slice().reverse(),I[k]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<f.length;k++)if(this.style._layers[f[k]].is3D()){this.opaquePassCutoff=k;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const k=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||k.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(B,H){const Y=B.context,he=Y.gl,Ie=nr.unblended,Ae=new wn(he.LEQUAL,wn.ReadWrite,[0,1]),Oe=H.getTerrainMesh(),Ce=H.sourceCache.getRenderableTiles(),Ke=B.useProgram("terrainDepth");Y.bindFramebuffer.set(H.getFramebuffer("depth").framebuffer),Y.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),Y.clear({color:l.Color.transparent,depth:1});for(const nt of Ce){const De=H.getTerrainData(nt.tileID),Ye={u_matrix:B.transform.calculatePosMatrix(nt.tileID.toUnwrapped()),u_ele_delta:H.getMeshFrameDelta(B.transform.zoom)};Ke.draw(Y,he.TRIANGLES,Ae,Vn.disabled,Ie,Hn.backCCW,Ye,De,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,B.width,B.height])}(this,this.style.map.terrain),function(B,H){const Y=B.context,he=Y.gl,Ie=nr.unblended,Ae=new wn(he.LEQUAL,wn.ReadWrite,[0,1]),Oe=H.getTerrainMesh(),Ce=H.getCoordsTexture(),Ke=H.sourceCache.getRenderableTiles(),nt=B.useProgram("terrainCoords");Y.bindFramebuffer.set(H.getFramebuffer("coords").framebuffer),Y.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),Y.clear({color:l.Color.transparent,depth:1}),H.coordsIndex=[];for(const De of Ke){const Ye=H.getTerrainData(De.tileID);Y.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Ce.texture);const at={u_matrix:B.transform.calculatePosMatrix(De.tileID.toUnwrapped()),u_terrain_coords_id:(255-H.coordsIndex.length)/255,u_texture:0,u_ele_delta:H.getMeshFrameDelta(B.transform.zoom)};nt.draw(Y,he.TRIANGLES,Ae,Vn.disabled,Ie,Hn.backCCW,at,Ye,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments),H.coordsIndex.push(De.tileID.key)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,B.width,B.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const k of f){const B=this.style._layers[k];if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const H=C[B.source];(B.type==="custom"||H.length)&&this.renderLayer(this,m[B.source],B,H)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[f[this.currentLayer]],B=m[k.source],H=_[k.source];this._renderTileClippingMasks(k,H),this.renderLayer(this,B,k,H)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const k=this.style._layers[f[this.currentLayer]],B=m[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const H=(k.type==="symbol"?I:C)[k.source];this._renderTileClippingMasks(k,_[k.source]),this.renderLayer(this,B,k,H)}if(this.options.showTileBoundaries){const k=function(B,H){let Y=null;const he=Object.values(B._layers).flatMap(Ce=>Ce.source&&!Ce.isHidden(H)?[B.sourceCaches[Ce.source]]:[]),Ie=he.filter(Ce=>Ce.getSource().type==="vector"),Ae=he.filter(Ce=>Ce.getSource().type!=="vector"),Oe=Ce=>{(!Y||Y.getSource().maxzoom<Ce.getSource().maxzoom)&&(Y=Ce)};return Ie.forEach(Ce=>Oe(Ce)),Y||Ae.forEach(Ce=>Oe(Ce)),Y}(this.style,this.transform.zoom);k&&function(B,H,Y){for(let he=0;he<Y.length;he++)es(B,H,Y[he])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const B=k.transform.padding;Po(k,k.transform.height-(B.top||0),3,gl),Po(k,B.bottom||0,3,gr),yl(k,B.left||0,3,fo),yl(k,k.transform.width-(B.right||0),3,Jr);const H=k.transform.centerPoint;(function(Y,he,Ie,Ae){Li(Y,he-1,Ie-10,2,20,Ae),Li(Y,he-10,Ie-1,20,2,Ae)})(k,H.x,k.transform.height-H.y,xi)}(this),this.context.setDefault()}renderLayer(r,u,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,C,I,k,B){if(_.renderPass!=="translucent")return;const H=Vn.disabled,Y=_.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(he,Ie,Ae,Oe,Ce,Ke,nt){const De=Ie.transform,Ye=Ce==="map",at=Ke==="map";for(const lt of he){const ft=Oe.getTile(lt),wt=ft.getBucket(Ae);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const xt=l.evaluateSizeForZoom(wt.textSizeData,De.zoom),Ct=Ve(ft,1,Ie.transform.zoom),Gt=st(lt.posMatrix,at,Ye,Ie.transform,Ct),Sn=Ae.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(xt){const Ot=Math.pow(2,De.zoom-ft.tileID.overscaledZ);Co(wt,Ye,at,nt,De,Gt,lt.posMatrix,Ot,xt,Sn,Ie.style.map.terrain?(nn,$t)=>Ie.style.map.terrain.getElevation(lt,nn,$t):null)}}}(k,_,I,C,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),B),I.paint.get("icon-opacity").constantOr(1)!==0&&pl(_,C,I,k,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),H,Y),I.paint.get("text-opacity").constantOr(1)!==0&&pl(_,C,I,k,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),H,Y),C.map.showCollisionBoxes&&(Ea(_,C,I,k,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),Ea(_,C,I,k,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(r,u,f,m,this.style.placement.variableOffsets);break;case"circle":(function(_,C,I,k){if(_.renderPass!=="translucent")return;const B=I.paint.get("circle-opacity"),H=I.paint.get("circle-stroke-width"),Y=I.paint.get("circle-stroke-opacity"),he=!I.layout.get("circle-sort-key").isConstant();if(B.constantOr(1)===0&&(H.constantOr(1)===0||Y.constantOr(1)===0))return;const Ie=_.context,Ae=Ie.gl,Oe=_.depthModeForSublayer(0,wn.ReadOnly),Ce=Vn.disabled,Ke=_.colorModeForRenderPass(),nt=[];for(let De=0;De<k.length;De++){const Ye=k[De],at=C.getTile(Ye),lt=at.getBucket(I);if(!lt)continue;const ft=lt.programConfigurations.get(I.id),wt=_.useProgram("circle",ft),xt=lt.layoutVertexBuffer,Ct=lt.indexBuffer,Gt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ye),Sn={programConfiguration:ft,program:wt,layoutVertexBuffer:xt,indexBuffer:Ct,uniformValues:kh(_,Ye,at,I),terrainData:Gt};if(he){const Ot=lt.segments.get();for(const nn of Ot)nt.push({segments:new l.SegmentVector([nn]),sortKey:nn.sortKey,state:Sn})}else nt.push({segments:lt.segments,sortKey:0,state:Sn})}he&&nt.sort((De,Ye)=>De.sortKey-Ye.sortKey);for(const De of nt){const{programConfiguration:Ye,program:at,layoutVertexBuffer:lt,indexBuffer:ft,uniformValues:wt,terrainData:xt}=De.state;at.draw(Ie,Ae.TRIANGLES,Oe,Ce,Ke,Hn.disabled,wt,xt,I.id,lt,ft,De.segments,I.paint,_.transform.zoom,Ye)}})(r,u,f,m);break;case"heatmap":(function(_,C,I,k){if(I.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const B=_.context,H=B.gl,Y=Vn.disabled,he=new nr([H.ONE,H.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Ie,Ae,Oe){const Ce=Ie.gl;Ie.activeTexture.set(Ce.TEXTURE1),Ie.viewport.set([0,0,Ae.width/4,Ae.height/4]);let Ke=Oe.heatmapFbo;if(Ke)Ce.bindTexture(Ce.TEXTURE_2D,Ke.colorAttachment.get()),Ie.bindFramebuffer.set(Ke.framebuffer);else{const nt=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,nt),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),Ke=Oe.heatmapFbo=Ie.createFramebuffer(Ae.width/4,Ae.height/4,!1,!1),function(De,Ye,at,lt){var ft,wt;const xt=De.gl,Ct=(ft=De.HALF_FLOAT)!==null&&ft!==void 0?ft:xt.UNSIGNED_BYTE,Gt=(wt=De.RGBA16F)!==null&&wt!==void 0?wt:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,Gt,Ye.width/4,Ye.height/4,0,xt.RGBA,Ct,null),lt.colorAttachment.set(at)}(Ie,Ae,nt,Ke)}})(B,_,I),B.clear({color:l.Color.transparent});for(let Ie=0;Ie<k.length;Ie++){const Ae=k[Ie];if(C.hasRenderableParent(Ae))continue;const Oe=C.getTile(Ae),Ce=Oe.getBucket(I);if(!Ce)continue;const Ke=Ce.programConfigurations.get(I.id),nt=_.useProgram("heatmap",Ke),{zoom:De}=_.transform;nt.draw(B,H.TRIANGLES,wn.disabled,Y,he,Hn.disabled,il(Ae.posMatrix,Oe,De,I.paint.get("heatmap-intensity")),null,I.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,I.paint,_.transform.zoom,Ke)}B.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(B,H){const Y=B.context,he=Y.gl,Ie=H.heatmapFbo;if(!Ie)return;Y.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Ie.colorAttachment.get()),Y.activeTexture.set(he.TEXTURE1);let Ae=H.colorRampTexture;Ae||(Ae=H.colorRampTexture=new q(Y,H.colorRamp,he.RGBA)),Ae.bind(he.LINEAR,he.CLAMP_TO_EDGE),B.useProgram("heatmapTexture").draw(Y,he.TRIANGLES,wn.disabled,Vn.disabled,B.colorModeForRenderPass(),Hn.disabled,((Oe,Ce,Ke,nt)=>{const De=l.create();l.ortho(De,0,Oe.width,Oe.height,0,0,1);const Ye=Oe.context.gl;return{u_matrix:De,u_world:[Ye.drawingBufferWidth,Ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}})(B,H),null,H.id,B.viewportBuffer,B.quadTriangleIndexBuffer,B.viewportSegments,H.paint,B.transform.zoom)}(_,I))})(r,u,f,m);break;case"line":(function(_,C,I,k){if(_.renderPass!=="translucent")return;const B=I.paint.get("line-opacity"),H=I.paint.get("line-width");if(B.constantOr(1)===0||H.constantOr(1)===0)return;const Y=_.depthModeForSublayer(0,wn.ReadOnly),he=_.colorModeForRenderPass(),Ie=I.paint.get("line-dasharray"),Ae=I.paint.get("line-pattern"),Oe=Ae.constantOr(1),Ce=I.paint.get("line-gradient"),Ke=I.getCrossfadeParameters(),nt=Oe?"linePattern":Ie?"lineSDF":Ce?"lineGradient":"line",De=_.context,Ye=De.gl;let at=!0;for(const lt of k){const ft=C.getTile(lt);if(Oe&&!ft.patternsLoaded())continue;const wt=ft.getBucket(I);if(!wt)continue;const xt=wt.programConfigurations.get(I.id),Ct=_.context.program.get(),Gt=_.useProgram(nt,xt),Sn=at||Gt.program!==Ct,Ot=_.style.map.terrain&&_.style.map.terrain.getTerrainData(lt),nn=Ae.constantOr(null);if(nn&&ft.imageAtlas){const Tn=ft.imageAtlas,rn=Tn.patternPositions[nn.to.toString()],Cn=Tn.patternPositions[nn.from.toString()];rn&&Cn&&xt.setConstantPatternPositions(rn,Cn)}const $t=Ot?lt:null,ir=Oe?ki(_,ft,I,Ke,$t):Ie?ol(_,ft,I,Ie,Ke,$t):Ce?ic(_,ft,I,wt.lineClipsArray.length,$t):gs(_,ft,I,$t);if(Oe)De.activeTexture.set(Ye.TEXTURE0),ft.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),xt.updatePaintBuffers(Ke);else if(Ie&&(Sn||_.lineAtlas.dirty))De.activeTexture.set(Ye.TEXTURE0),_.lineAtlas.bind(De);else if(Ce){const Tn=wt.gradients[I.id];let rn=Tn.texture;if(I.gradientVersion!==Tn.version){let Cn=256;if(I.stepInterpolant){const ur=C.getSource().maxzoom,Zn=lt.canonical.z===ur?Math.ceil(1<<_.transform.maxZoom-lt.canonical.z):1;Cn=l.clamp(l.nextPowerOfTwo(wt.maxLineLength/l.EXTENT*1024*Zn),256,De.maxTextureSize)}Tn.gradient=l.renderColorRamp({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Cn,image:Tn.gradient||void 0,clips:wt.lineClipsArray}),Tn.texture?Tn.texture.update(Tn.gradient):Tn.texture=new q(De,Tn.gradient,Ye.RGBA),Tn.version=I.gradientVersion,rn=Tn.texture}De.activeTexture.set(Ye.TEXTURE0),rn.bind(I.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}Gt.draw(De,Ye.TRIANGLES,Y,_.stencilModeForClipping(lt),he,Hn.disabled,ir,Ot,I.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,I.paint,_.transform.zoom,xt,wt.layoutVertexBuffer2),at=!1}})(r,u,f,m);break;case"fill":(function(_,C,I,k){const B=I.paint.get("fill-color"),H=I.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const Y=_.colorModeForRenderPass(),he=I.paint.get("fill-pattern"),Ie=_.opaquePassEnabledForLayer()&&!he.constantOr(1)&&B.constantOr(l.Color.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Ie){const Ae=_.depthModeForSublayer(1,_.renderPass==="opaque"?wn.ReadWrite:wn.ReadOnly);Qo(_,C,I,k,Ae,Y,!1)}if(_.renderPass==="translucent"&&I.paint.get("fill-antialias")){const Ae=_.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,wn.ReadOnly);Qo(_,C,I,k,Ae,Y,!0)}})(r,u,f,m);break;case"fill-extrusion":(function(_,C,I,k){const B=I.paint.get("fill-extrusion-opacity");if(B!==0&&_.renderPass==="translucent"){const H=new wn(_.context.gl.LEQUAL,wn.ReadWrite,_.depthRangeFor3D);if(B!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Ao(_,C,I,k,H,Vn.disabled,nr.disabled),Ao(_,C,I,k,H,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const Y=_.colorModeForRenderPass();Ao(_,C,I,k,H,Vn.disabled,Y)}}})(r,u,f,m);break;case"hillshade":(function(_,C,I,k){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const B=_.context,H=_.depthModeForSublayer(0,wn.ReadOnly),Y=_.colorModeForRenderPass(),[he,Ie]=_.renderPass==="translucent"?_.stencilConfigForOverlap(k):[{},k];for(const Ae of Ie){const Oe=C.getTile(Ae);Oe.needsHillshadePrepare!==void 0&&Oe.needsHillshadePrepare&&_.renderPass==="offscreen"?Io(_,Oe,I,H,Vn.disabled,Y):_.renderPass==="translucent"&&Rr(_,Ae,Oe,I,H,he[Ae.overscaledZ],Y)}B.viewport.set([0,0,_.width,_.height])})(r,u,f,m);break;case"raster":(function(_,C,I,k){if(_.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!k.length)return;const B=_.context,H=B.gl,Y=C.getSource(),he=_.useProgram("raster"),Ie=_.colorModeForRenderPass(),[Ae,Oe]=Y instanceof ht?[{},k]:_.stencilConfigForOverlap(k),Ce=Oe[Oe.length-1].overscaledZ,Ke=!_.options.moving;for(const nt of Oe){const De=_.depthModeForSublayer(nt.overscaledZ-Ce,I.paint.get("raster-opacity")===1?wn.ReadWrite:wn.ReadOnly,H.LESS),Ye=C.getTile(nt);Ye.registerFadeDuration(I.paint.get("raster-fade-duration"));const at=C.findLoadedParent(nt,0),lt=fu(Ye,at,C,I,_.transform,_.style.map.terrain);let ft,wt;const xt=I.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;B.activeTexture.set(H.TEXTURE0),Ye.texture.bind(xt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),B.activeTexture.set(H.TEXTURE1),at?(at.texture.bind(xt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),ft=Math.pow(2,at.tileID.overscaledZ-Ye.tileID.overscaledZ),wt=[Ye.tileID.canonical.x*ft%1,Ye.tileID.canonical.y*ft%1]):Ye.texture.bind(xt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST);const Ct=_.style.map.terrain&&_.style.map.terrain.getTerrainData(nt),Gt=Ct?nt:null,Sn=Gt?Gt.posMatrix:_.transform.calculatePosMatrix(nt.toUnwrapped(),Ke),Ot=sl(Sn,wt||[0,0],ft||1,lt,I);Y instanceof ht?he.draw(B,H.TRIANGLES,De,Vn.disabled,Ie,Hn.disabled,Ot,Ct,I.id,Y.boundsBuffer,_.quadTriangleIndexBuffer,Y.boundsSegments):he.draw(B,H.TRIANGLES,De,Ae[nt.overscaledZ],Ie,Hn.disabled,Ot,Ct,I.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,u,f,m);break;case"background":(function(_,C,I,k){const B=I.paint.get("background-color"),H=I.paint.get("background-opacity");if(H===0)return;const Y=_.context,he=Y.gl,Ie=_.transform,Ae=Ie.tileSize,Oe=I.paint.get("background-pattern");if(_.isPatternMissing(Oe))return;const Ce=!Oe&&B.a===1&&H===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ce)return;const Ke=Vn.disabled,nt=_.depthModeForSublayer(0,Ce==="opaque"?wn.ReadWrite:wn.ReadOnly),De=_.colorModeForRenderPass(),Ye=_.useProgram(Oe?"backgroundPattern":"background"),at=k||Ie.coveringTiles({tileSize:Ae,terrain:_.style.map.terrain});Oe&&(Y.activeTexture.set(he.TEXTURE0),_.imageManager.bind(_.context));const lt=I.getCrossfadeParameters();for(const ft of at){const wt=k?ft.posMatrix:_.transform.calculatePosMatrix(ft.toUnwrapped()),xt=Oe?al(wt,H,_,Oe,{tileID:ft,tileSize:Ae},lt):So(wt,H,B),Ct=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ft);Ye.draw(Y,he.TRIANGLES,nt,Ke,De,Hn.disabled,xt,Ct,I.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(_,C,I){const k=_.context,B=I.implementation;if(_.renderPass==="offscreen"){const H=B.prerender;H&&(_.setCustomLayerDefaults(),k.setColorMode(_.colorModeForRenderPass()),H.call(B,k.gl,_.transform.customLayerMatrix()),k.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),k.setColorMode(_.colorModeForRenderPass()),k.setStencilMode(Vn.disabled);const H=B.renderingMode==="3d"?new wn(_.context.gl.LEQUAL,wn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,wn.ReadOnly);k.setDepthMode(H),B.render(k.gl,_.transform.customLayerMatrix()),k.setDirty(),_.setBaseState(),k.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,u,f,m,_){if(!f[0]&&!f[1])return r;const C=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(C){const B=Math.sin(C),H=Math.cos(C);f=[f[0]*H-f[1]*B,f[0]*B+f[1]*H]}const I=[_?f[0]:Ve(u,f[0],this.transform.zoom),_?f[1]:Ve(u,f[1],this.transform.zoom),0],k=new Float32Array(16);return l.translate(k,r,I),k}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!u||!f}useProgram(r,u){this.cache=this.cache||{};const f=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Xo(this.context,gi[r],u,vi[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class Ta{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,f){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const k=1/(I=l.transformMat4([],I,r))[3]/u*m;return l.mul$1(I,I,[k,k,1/I[3],k])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const k=function(he,Ie){var Ae=Ie[0],Oe=Ie[1],Ce=Ie[2],Ke=Ae*Ae+Oe*Oe+Ce*Ce;return Ke>0&&(Ke=1/Math.sqrt(Ke)),he[0]=Ie[0]*Ke,he[1]=Ie[1]*Ke,he[2]=Ie[2]*Ke,he}([],function(he,Ie,Ae){var Oe=Ie[0],Ce=Ie[1],Ke=Ie[2],nt=Ae[0],De=Ae[1],Ye=Ae[2];return he[0]=Ce*Ye-Ke*De,he[1]=Ke*nt-Oe*Ye,he[2]=Oe*De-Ce*nt,he}([],N([],_[I[0]],_[I[1]]),N([],_[I[2]],_[I[1]]))),B=-((H=k)[0]*(Y=_[I[1]])[0]+H[1]*Y[1]+H[2]*Y[2]);var H,Y;return k.concat(B)});return new Ta(_,C)}}class Ks{constructor(r,u){this.min=r,this.max=u,this.center=function(f,m,_){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,_){return f[0]=m[0]+_[0],f[1]=m[1]+_[1],f[2]=m[2]+_[2],f}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],f=oe(this.min),m=oe(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],m[_]=u[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new Ks(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const _=r.planes[m];let C=0;for(let I=0;I<u.length;I++)l.dot(_,u[I])>=0&&C++;if(C===0)return 0;C!==u.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let I=0;I<r.points.length;I++){const k=r.points[I][m]-this.min[m];_=Math.min(_,k),C=Math.max(C,k)}if(C<0||_>this.max[m]-this.min[m])return 0}return 1}}class Xi{constructor(r=0,u=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=f,this.right=m}interpolate(r,u,f){return u.top!=null&&r.top!=null&&(this.top=l.interpolate.number(r.top,u.top,f)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.interpolate.number(r.bottom,u.bottom,f)),u.left!=null&&r.left!=null&&(this.left=l.interpolate.number(r.left,u.left,f)),u.right!=null&&r.right!=null&&(this.right=l.interpolate.number(r.right,u.right,f)),this}getCenter(r,u){const f=l.clamp((this.left+r-this.right)/2,0,r),m=l.clamp((this.top+u-this.bottom)/2,0,u);return new l.Point(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Xi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ca{constructor(r,u,f,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xi,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new Ca(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-l.wrap(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,_){var C=m[0],I=m[1],k=m[2],B=m[3],H=Math.sin(_),Y=Math.cos(_);f[0]=C*Y+k*H,f[1]=I*Y+B*H,f[2]=C*-H+k*Y,f[3]=I*-H+B*Y}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=l.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,f){this._unmodified=!1,this._edgeInsets.interpolate(r,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new l.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.Point(0,0)),m=this.pointCoordinate(new l.Point(this.width,0)),_=this.pointCoordinate(new l.Point(this.width,this.height)),C=this.pointCoordinate(new l.Point(0,this.height)),I=Math.floor(Math.min(f.x,m.x,_.x,C.x)),k=Math.floor(Math.max(f.x,m.x,_.x,C.x)),B=1;for(let H=I-B;H<=k+B;H++)H!==0&&u.push(new l.UnwrappedTileID(H,r))}return u}coveringTiles(r){var u,f;let m=this.coveringZoomLevel(r);const _=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),I=l.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,m),B=[k*C.x,k*C.y,0],H=[k*I.x,k*I.y,0],Y=Ta.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let he=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(he=m);const Ie=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Ae=De=>({aabb:new Ks([De*k,0,0],[(De+1)*k,k,0]),zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Oe=[],Ce=[],Ke=m,nt=r.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let De=1;De<=3;De++)Oe.push(Ae(-De)),Oe.push(Ae(De));for(Oe.push(Ae(0));Oe.length>0;){const De=Oe.pop(),Ye=De.x,at=De.y;let lt=De.fullyVisible;if(!lt){const Gt=De.aabb.intersects(Y);if(Gt===0)continue;lt=Gt===2}const ft=r.terrain?B:H,wt=De.aabb.distanceX(ft),xt=De.aabb.distanceY(ft),Ct=Math.max(Math.abs(wt),Math.abs(xt));if(De.zoom===Ke||Ct>Ie+(1<<Ke-De.zoom)-2&&De.zoom>=he){const Gt=Ke-De.zoom,Sn=B[0]-.5-(Ye<<Gt),Ot=B[1]-.5-(at<<Gt);Ce.push({tileID:new l.OverscaledTileID(De.zoom===Ke?nt:De.zoom,De.wrap,De.zoom,Ye,at),distanceSq:S([H[0]-.5-Ye,H[1]-.5-at]),tileDistanceToCamera:Math.sqrt(Sn*Sn+Ot*Ot)})}else for(let Gt=0;Gt<4;Gt++){const Sn=(Ye<<1)+Gt%2,Ot=(at<<1)+(Gt>>1),nn=De.zoom+1;let $t=De.aabb.quadrant(Gt);if(r.terrain){const ir=new l.OverscaledTileID(nn,De.wrap,nn,Sn,Ot),Tn=r.terrain.getMinMaxElevation(ir),rn=(u=Tn.minElevation)!==null&&u!==void 0?u:this.elevation,Cn=(f=Tn.maxElevation)!==null&&f!==void 0?f:this.elevation;$t=new Ks([$t.min[0],$t.min[1],rn],[$t.max[0],$t.max[1],Cn])}Oe.push({aabb:$t,zoom:nn,x:Sn,y:Ot,wrap:De.wrap,fullyVisible:lt})}}return Ce.sort((De,Ye)=>De.distanceSq-Ye.distanceSq).map(De=>De.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=l.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(r.lng)*this.worldSize,l.mercatorYfromLat(u)*this.worldSize)}unproject(r){return new l.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),f=r.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const m=this.getCameraPosition(),_=l.MercatorCoordinate.fromLngLat(m.lngLat,m.altitude),C=l.MercatorCoordinate.fromLngLat(u,f),I=_.x-C.x,k=_.y-C.y,B=_.z-C.z,H=Math.sqrt(I*I+k*k+B*B),Y=this.scaleZoom(this.cameraToCenterDistance/H/this.tileSize);this._elevation=f,this._center=u,this.zoom=Y}setLocationAtPoint(r,u){const f=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),C=new l.MercatorCoordinate(_.x-(f.x-m.x),_.y-(f.y-m.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),u.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return l.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const he=u.pointCoordinate(r);if(he!=null)return he}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];l.transformMat4(f,f,this.pixelMatrixInverse),l.transformMat4(m,m,this.pixelMatrixInverse);const _=f[3],C=m[3],I=f[1]/_,k=m[1]/C,B=f[2]/_,H=m[2]/C,Y=B===H?0:(0-B)/(H-B);return new l.MercatorCoordinate(l.interpolate.number(f[0]/_,m[0]/C,Y)/this.worldSize,l.interpolate.number(I,k,Y)/this.worldSize)}coordinatePoint(r,u=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.transformMat4(m,m,f),new l.Point(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Me().extend(this.pointLocation(new l.Point(0,r))).extend(this.pointLocation(new l.Point(this.width,r))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Me([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const f=r.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const _=r.canonical,C=this.worldSize/this.zoomScale(_.z),I=_.x+Math.pow(2,_.z)*r.wrap,k=l.identity(new Float64Array(16));return l.translate(k,k,[I*C,_.y*C,0]),l.scale(k,k,[C/l.EXTENT,C/l.EXTENT,1]),l.multiply(k,u?this.alignedProjMatrix:this.projMatrix,k),m[f]=new Float32Array(k),m[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,f,m,_=-90,C=90,I=-180,k=180;const B=this.size,H=this._unmodified;if(this.latRange){const Ie=this.latRange;_=l.mercatorYfromLat(Ie[1])*this.worldSize,C=l.mercatorYfromLat(Ie[0])*this.worldSize,r=C-_<B.y?B.y/(C-_):0}if(this.lngRange){const Ie=this.lngRange;I=l.wrap(l.mercatorXfromLng(Ie[0])*this.worldSize,0,this.worldSize),k=l.wrap(l.mercatorXfromLng(Ie[1])*this.worldSize,0,this.worldSize),k<I&&(k+=this.worldSize),u=k-I<B.x?B.x/(k-I):0}const Y=this.point,he=Math.max(u||0,r||0);if(he)return this.center=this.unproject(new l.Point(u?(k+I)/2:Y.x,r?(C+_)/2:Y.y)),this.zoom+=this.scaleZoom(he),this._unmodified=H,void(this._constraining=!1);if(this.latRange){const Ie=Y.y,Ae=B.y/2;Ie-Ae<_&&(m=_+Ae),Ie+Ae>C&&(m=C-Ae)}if(this.lngRange){const Ie=(I+k)/2,Ae=l.wrap(Y.x,Ie-this.worldSize/2,Ie+this.worldSize/2),Oe=B.x/2;Ae-Oe<I&&(f=I+Oe),Ae+Oe>k&&(f=k-Oe)}f===void 0&&m===void 0||(this.center=this.unproject(new l.Point(f!==void 0?f:Y.x,m!==void 0?m:Y.y)).wrap()),this._unmodified=H,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let m=l.identity(new Float64Array(16));l.scale(m,m,[this.width/2,-this.height/2,1]),l.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.identity(new Float64Array(16)),l.scale(m,m,[1,-1,1]),l.translate(m,m,[-1,-1,0]),l.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),I=_-C*this._pixelPerMeter/Math.cos(this._pitch),k=C<0?I:_,B=Math.PI/2+this._pitch,H=this._fov*(.5+r.y/this.height),Y=Math.sin(H)*k/Math.sin(l.clamp(Math.PI-B-H,.01,Math.PI-.01)),he=this.getHorizon(),Ie=2*Math.atan(he/this.cameraToCenterDistance)*(.5+r.y/(2*he)),Ae=Math.sin(Ie)*k/Math.sin(l.clamp(Math.PI-B-Ie,.01,Math.PI-.01)),Oe=Math.min(Y,Ae),Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*Oe+k),Ke=this.height/50;m=new Float64Array(16),l.perspective(m,this._fov,this.width/this.height,Ke,Ce),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,l.scale(m,m,[1,-1,1]),l.translate(m,m,[0,0,-this.cameraToCenterDistance]),l.rotateX(m,m,this._pitch),l.rotateZ(m,m,this.angle),l.translate(m,m,[-u,-f,0]),this.mercatorMatrix=l.scale([],m,[this.worldSize,this.worldSize,this.worldSize]),l.scale(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,m),l.translate(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=l.invert([],m),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,m);const nt=this.width%2/2,De=this.height%2/2,Ye=Math.cos(this.angle),at=Math.sin(this.angle),lt=u-Math.round(u)+Ye*nt+at*De,ft=f-Math.round(f)+Ye*De+at*nt,wt=new Float64Array(m);if(l.translate(wt,wt,[lt>.5?lt-1:lt,ft>.5?ft-1:ft,0]),this.alignedProjMatrix=wt,m=l.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.Point(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let f=u.x,m=u.y,_=u.x,C=u.y;for(const I of r)f=Math.min(f,I.x),m=Math.min(m,I.y),_=Math.max(_,I.x),C=Math.max(C,I.y);return[new l.Point(f,m),new l.Point(_,m),new l.Point(_,C),new l.Point(f,C),new l.Point(f,m)]}}}function ts(g,r){let u,f=!1,m=null,_=null;const C=()=>{m=null,f&&(g.apply(_,u),m=setTimeout(C,r),f=!1)};return(...I)=>(f=!0,_=this,u=I,m||C(),m)}class pu{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=ts(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),C=Math.round(u.lng*_)/_,I=Math.round(u.lat*_)/_,k=this._map.getBearing(),B=this._map.getPitch();let H="";if(H+=r?`/${C}/${I}/${f}`:`${f}/${I}/${C}`,(k||B)&&(H+="/"+Math.round(10*k)/10),B&&(H+=`/${Math.round(B)}`),this._hashName){const Y=this._hashName;let he=!1;const Ie=window.location.hash.slice(1).split("&").map(Ae=>{const Oe=Ae.split("=")[0];return Oe===Y?(he=!0,`${Oe}=${H}`):Ae}).filter(Ae=>Ae);return he||Ie.push(`${Y}=${H}`),`#${Ie.join("&")}`}return`#${H}`}}const ws={linearity:.3,easing:l.bezier(0,0,.3,1)},mu=l.extend({deceleration:2500,maxSpeed:1400},ws),gu=l.extend({deceleration:20,maxSpeed:1400},ws),yu=l.extend({deceleration:1e3,maxSpeed:360},ws),$=l.extend({deceleration:1e3,maxSpeed:90},ws);class ve{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=l.browser.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const _=ot(u.pan.mag(),f,l.extend({},mu,r||{}));m.offset=u.pan.mult(_.amount/u.pan.mag()),m.center=this._map.transform.center,Be(m,_)}if(u.zoom){const _=ot(u.zoom,f,gu);m.zoom=this._map.transform.zoom+_.amount,Be(m,_)}if(u.bearing){const _=ot(u.bearing,f,yu);m.bearing=this._map.transform.bearing+l.clamp(_.amount,-179,179),Be(m,_)}if(u.pitch){const _=ot(u.pitch,f,$);m.pitch=this._map.transform.pitch+_.amount,Be(m,_)}if(m.zoom||m.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.extend(m,{noMoveStart:!0})}}function Be(g,r){(!g.duration||g.duration<r.duration)&&(g.duration=r.duration,g.easing=r.easing)}function ot(g,r,u){const{maxSpeed:f,linearity:m,deceleration:_}=u,C=l.clamp(g*m/(r/1e3),-f,f),I=Math.abs(C)/(_*m);return{easing:u.easing,duration:1e3*I,amount:C*(I/2)}}class St extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f,m={}){const _=w.mousePos(u.getCanvasContainer(),f),C=u.unproject(_);super(r,l.extend({point:_,lngLat:C,originalEvent:f},m)),this._defaultPrevented=!1,this.target=u}}class Tt extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){const m=r==="touchend"?f.changedTouches:f.touches,_=w.touchPos(u.getCanvasContainer(),m),C=_.map(k=>u.unproject(k)),I=_.reduce((k,B,H,Y)=>k.add(B.div(Y.length)),new l.Point(0,0));super(r,{points:_,point:I,lngLats:C,lngLat:u.unproject(I),originalEvent:f}),this._defaultPrevented=!1}}class Dt extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Wt{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Dt(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new St(r.type,this._map,r))}mouseup(r){this._map.fire(new St(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new St(r.type,this._map,r))}dblclick(r){return this._firePreventable(new St(r.type,this._map,r))}mouseover(r){this._map.fire(new St(r.type,this._map,r))}mouseout(r){this._map.fire(new St(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Tt(r.type,this._map,r))}touchmove(r){this._map.fire(new Tt(r.type,this._map,r))}touchend(r){this._map.fire(new Tt(r.type,this._map,r))}touchcancel(r){this._map.fire(new Tt(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vn{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new St(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new St("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new St(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.Point.convert(r),this._map.terrain)}}class Un{constructor(r,u){this._map=r,this._tr=new Fn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,f.x),C=Math.max(m.x,f.x),I=Math.min(m.y,f.y),k=Math.max(m.y,f.y);w.setTransform(this._box,`translate(${_}px,${I}px)`),this._box.style.width=C-_+"px",this._box.style.height=k-I+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const f=this._startPos,m=u;if(this.reset(),w.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.Event(r,{originalEvent:u}))}}function Kn(g,r){if(g.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${r.length}`);const u={};for(let f=0;f<g.length;f++)u[g[f].identifier]=r[f];return u}class Jn{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const _=new l.Point(0,0);for(const C of m)_._add(C);return _.div(m.length)}(u),this.touches=Kn(f,u)))}touchmove(r,u,f){if(this.aborted||!this.centroid)return;const m=Kn(f,u);for(const _ in this.touches){const C=m[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,u,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Qn{constructor(r){this.singleTap=new Jn(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,f){this.singleTap.touchstart(r,u,f)}touchmove(r,u,f){this.singleTap.touchmove(r,u,f)}touchend(r,u,f){const m=this.singleTap.touchend(r,u,f);if(m){const _=r.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(m)<30;if(_&&C||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class At{constructor(r){this._tr=new Fn(r),this._zoomIn=new Qn({numTouches:1,numTaps:2}),this._zoomOut=new Qn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,f){this._zoomIn.touchstart(r,u,f),this._zoomOut.touchstart(r,u,f)}touchmove(r,u,f){this._zoomIn.touchmove(r,u,f),this._zoomOut.touchmove(r,u,f)}touchend(r,u,f){const m=this._zoomIn.touchend(r,u,f),_=this._zoomOut.touchend(r,u,f),C=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wi{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=u.length?u[0]:u;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const bi={0:1,2:2};class Ei{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=w.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,f){const m=bi[f];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class vl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const zt=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=function(r){r.preventDefault()}},bs=({enable:g,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const f=new Ei({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new wi({clickTolerance:r,move:(m,_)=>({bearingDelta:(_.x-m.x)*u}),moveStateManager:f,enable:g,assignEvents:zt})},Dd=({enable:g,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new Ei({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new wi({clickTolerance:r,move:(m,_)=>({pitchDelta:(_.y-m.y)*u}),moveStateManager:f,enable:g,assignEvents:zt})};class Ug{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,f){return this._calculateTransform(r,u,f)}touchmove(r,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,f)}touchend(r,u,f){this._calculateTransform(r,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,f){f.length>0&&(this._active=!0);const m=Kn(f,u),_=new l.Point(0,0),C=new l.Point(0,0);let I=0;for(const B in m){const H=m[B],Y=this._touches[B];Y&&(_._add(H),C._add(H.sub(Y)),I++,m[B]=H)}if(this._touches=m,I<this._minTouches||!C.mag())return;const k=C.div(I);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(I),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,C=_u(f,u,m),I=_u(f,u,_);if(!C||!I)return;const k=this._aroundCenter?null:C.add(I).div(2);return this._move([C,I],k,r)}touchend(r,u,f){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,C=_u(f,u,m),I=_u(f,u,_);C&&I||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function _u(g,r,u){for(let f=0;f<g.length;f++)if(g[f].identifier===u)return r[f]}function Nh(g,r){return Math.log(g/r)/Math.LN2}class $g extends vu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Nh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nh(this._distance,f),pinchAround:u}}}function Bd(g,r){return 180*g.angleWith(r)/Math.PI}class Uh extends vu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Bd(this._vector,f),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,f=Bd(r,this._startVector);return Math.abs(f)<u}}function xu(g){return Math.abs(g.y)>Math.abs(g.x)}class $h extends vu{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,f){super.touchstart(r,u,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,xu(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=u.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=r.y>0==u.y>0;return xu(r)&&xu(u)&&C}}const Vh={panStep:100,bearingStep:15,pitchStep:10};class zi{constructor(r){this._tr=new Fn(r);const u=Vh;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,f=0,m=0,_=0,C=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),C=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:I=>{const k=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Ys,zoom:u?Math.round(k.zoom)+u*(r.shiftKey?2:1):k.zoom,bearing:k.bearing+f*this._bearingStep,pitch:k.pitch+m*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:k.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ys(g){return g*(2-g)}const Gh=4.000244140625;class Zh{constructor(r,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new Fn(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=l.browser.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%Gh==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,r),f=this._tr;this._around=l.LngLat.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Gh?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&k!==0&&(k=1/k);const B=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(B*k))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let _,C=!1;if(this._type==="wheel"&&f&&m){const I=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),k=m(I);_=l.interpolate.number(f,u,k),I<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.defaultEasing;if(this._prevEase){const f=this._prevEase,m=(l.browser.now()-f.start)/f.duration,_=f.easing(m+.01)-f.easing(m),C=.27/Math.sqrt(_*_+1e-4)*.01,I=Math.sqrt(.0729-C*C);u=l.bezier(C,I,.25,1)}return this._prevEase={start:l.browser.now(),duration:r,easing:u},u}reset(){this._active=!1}}class Wh{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Hh{constructor(r){this._tr=new Fn(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nd{constructor(){this._tap=new Qn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,f){if(!this._swipePoint)if(this._tapTime){const m=u[0],_=r.timeStamp-this._tapTime<500,C=this._tapPoint.dist(m)<30;_&&C?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,u,f)}touchmove(r,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=u[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,u,f)}touchend(r,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,u,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class po{constructor(r,u,f){this._el=r,this._mousePan=u,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class rr{constructor(r,u,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class dc{constructor(r,u,f,m){this._el=r,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const _l=g=>g.zoom||g.drag||g.pitch||g.rotate;class Ud extends l.Event{}function pc(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class $d{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=m.type==="renderFrame"?void 0:m,I={needsRenderFrame:!1},k={},B={},H=m.touches,Y=H?this._getMapTouches(H):void 0,he=Y?w.touchPos(this._el,Y):w.mousePos(this._el,m);for(const{handlerName:Oe,handler:Ce,allowed:Ke}of this._handlers){if(!Ce.isEnabled())continue;let nt;this._blockedByActive(B,Ke,Oe)?Ce.reset():Ce[_||m.type]&&(nt=Ce[_||m.type](m,he,Y),this.mergeHandlerResult(I,k,nt,Oe,C),nt&&nt.needsRenderFrame&&this._triggerRenderFrame()),(nt||Ce.isActive())&&(B[Oe]=Ce)}const Ie={};for(const Oe in this._previousActiveHandlers)B[Oe]||(Ie[Oe]=C);this._previousActiveHandlers=B,(Object.keys(Ie).length||pc(I))&&(this._changes.push([I,k,Ie]),this._triggerRenderFrame()),(Object.keys(B).length||pc(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=I;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ve(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,C]of this._listeners)w.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[r,u,f]of this._listeners)w.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Wt(u,r));const m=u.boxZoom=new Un(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=new At(u),C=new Hh(u);u.doubleClickZoom=new Wh(C,_),this._add("tapZoom",_),this._add("clickZoom",C),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const I=new Nd;this._add("tapDragZoom",I);const k=u.touchPitch=new $h(u);this._add("touchPitch",k),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const B=bs(r),H=Dd(r);u.dragRotate=new rr(r,B,H),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const Y=(({enable:Ke,clickTolerance:nt})=>{const De=new Ei({checkCorrectEvent:Ye=>w.mouseButton(Ye)===0&&!Ye.ctrlKey});return new wi({clickTolerance:nt,move:(Ye,at)=>({around:at,panDelta:at.sub(Ye)}),activateOnStart:!0,moveStateManager:De,enable:Ke,assignEvents:zt})})(r),he=new Ug(r,u);u.dragPan=new po(f,Y,he),this._add("mousePan",Y),this._add("touchPan",he,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const Ie=new Uh,Ae=new $g;u.touchZoomRotate=new dc(f,Ae,Ie,I),this._add("touchRotate",Ie,["touchPan","touchZoom"]),this._add("touchZoom",Ae,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const Oe=u.scrollZoom=new Zh(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Oe,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Ce=u.keyboard=new zi(u);this._add("keyboard",Ce),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new vn(u))}_add(r,u,f){this._handlers.push({handlerName:r,handler:u,allowed:f}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_l(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,f){for(const m in r)if(m!==f&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const f of r)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(r,u,f,m,_){if(!f)return;l.extend(r,f);const C={handlerName:m,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=C),f.panDelta!==void 0&&(u.drag=C),f.pitchDelta!==void 0&&(u.pitch=C),f.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const r={},u={},f={};for(const[m,_,C]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new l.Point(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),l.extend(u,_),l.extend(f,C);this._updateMapTransform(r,u,f),this._changes=[]}_updateMapTransform(r,u,f){const m=this._map,_=m._getTransformForUpdate(),C=m.terrain;if(!(pc(r)||C&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:I,zoomDelta:k,bearingDelta:B,pitchDelta:H,around:Y,pinchAround:he}=r;he!==void 0&&(Y=he),m._stop(!0),Y=Y||m.transform.centerPoint;const Ie=_.pointLocation(I?Y.sub(I):Y);B&&(_.bearing+=B),H&&(_.pitch+=H),k&&(_.zoom+=k),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(I)):_.setLocationAtPoint(Ie,Y):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(Ie,Y),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(Ie,Y),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,f,!0)}_fireEvents(r,u,f){const m=_l(this._eventsInProgress),_=_l(r),C={};for(const H in r){const{originalEvent:Y}=r[H];this._eventsInProgress[H]||(C[`${H}start`]=Y),this._eventsInProgress[H]=r[H]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const H in C)this._fireEvent(H,C[H]);_&&this._fireEvent("move",_.originalEvent);for(const H in r){const{originalEvent:Y}=r[H];this._fireEvent(H,Y)}const I={};let k;for(const H in this._eventsInProgress){const{handlerName:Y,originalEvent:he}=this._eventsInProgress[H];this._handlersById[Y].isActive()||(delete this._eventsInProgress[H],k=u[Y]||he,I[`${H}end`]=k)}for(const H in I)this._fireEvent(H,I[H]);const B=_l(this._eventsInProgress);if(f&&(m||_)&&!B){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Y=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;H?(Y(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:k})):(this._map.fire(new l.Event("moveend",{originalEvent:k})),Y(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.Event(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Ud("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Vg extends l.Evented{constructor(r,u){super(),this._renderFrameCallback=()=>{const f=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,f){return r=l.Point.convert(r).mult(-1),this.panTo(this.transform.center,l.extend({offset:r},u),f)}panTo(r,u,f){return this.easeTo(l.extend({center:r},u),f)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,f){return this.easeTo(l.extend({zoom:r},u),f)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,f){return this.easeTo(l.extend({bearing:r},u),f)}resetNorth(r,u){return this.rotateTo(0,l.extend({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Me.convert(r);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,u)}_cameraForBoxAndBearing(r,u,f,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=l.extend({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const at=m.padding;m.padding={top:at,bottom:at,right:at,left:at}}m.padding=l.extend(_,m.padding);const C=this.transform,I=C.padding,k=C.project(l.LngLat.convert(r)),B=C.project(l.LngLat.convert(u)),H=k.rotate(-f*Math.PI/180),Y=B.rotate(-f*Math.PI/180),he=new l.Point(Math.max(H.x,Y.x),Math.max(H.y,Y.y)),Ie=new l.Point(Math.min(H.x,Y.x),Math.min(H.y,Y.y)),Ae=he.sub(Ie),Oe=(C.width-(I.left+I.right+m.padding.left+m.padding.right))/Ae.x,Ce=(C.height-(I.top+I.bottom+m.padding.top+m.padding.bottom))/Ae.y;if(Ce<0||Oe<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(C.scaleZoom(C.scale*Math.min(Oe,Ce)),m.maxZoom),nt=l.Point.convert(m.offset),De=new l.Point((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(f*Math.PI/180),Ye=nt.add(De).mult(C.scale/C.zoomScale(Ke));return{center:C.unproject(k.add(B).div(2).sub(Ye)),zoom:Ke,bearing:f}}fitBounds(r,u,f){return this._fitInternal(this.cameraForBounds(r,u),u,f)}fitScreenCoordinates(r,u,f,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(r)),this.transform.pointLocation(l.Point.convert(u)),f,m),m,_)}_fitInternal(r,u,f){return r?(delete(u=l.extend(r,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(r,u){this.stop();const f=this._getTransformForUpdate();let m=!1,_=!1,C=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=l.LngLat.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(_=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(C=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),m&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),_&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),C&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u))}calculateCameraOptionsFromTo(r,u,f,m=0){const _=l.MercatorCoordinate.fromLngLat(r,u),C=l.MercatorCoordinate.fromLngLat(f,m),I=C.x-_.x,k=C.y-_.y,B=C.z-_.z,H=Math.hypot(I,k,B);if(H===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(I,k),he=this.transform.scaleZoom(this.transform.cameraToCenterDistance/H/this.transform.tileSize),Ie=180*Math.atan2(I,-k)/Math.PI;let Ae=180*Math.acos(Y/H)/Math.PI;return Ae=B<0?90-Ae:90+Ae,{center:C.toLngLat(),zoom:he,pitch:Ae,bearing:Ie}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.extend({offset:[0,0],duration:500,easing:l.defaultEasing},r)).animate===!1||!r.essential&&l.browser.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),C=this.getPitch(),I=this.getPadding(),k="zoom"in r?+r.zoom:m,B="bearing"in r?this._normalizeBearing(r.bearing,_):_,H="pitch"in r?+r.pitch:C,Y="padding"in r?r.padding:f.padding,he=l.Point.convert(r.offset);let Ie=f.centerPoint.add(he);const Ae=f.pointLocation(Ie),Oe=l.LngLat.convert(r.center||Ae);this._normalizeCenter(Oe);const Ce=f.project(Ae),Ke=f.project(Oe).sub(Ce),nt=f.zoomScale(k-m);let De,Ye;r.around&&(De=l.LngLat.convert(r.around),Ye=f.locationPoint(De));const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==m,this._rotating=this._rotating||_!==B,this._pitching=this._pitching||H!==C,this._padding=!f.isPaddingEqual(Y),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,at),this.terrain&&this._prepareElevation(Oe),this._ease(lt=>{if(this._zooming&&(f.zoom=l.interpolate.number(m,k,lt)),this._rotating&&(f.bearing=l.interpolate.number(_,B,lt)),this._pitching&&(f.pitch=l.interpolate.number(C,H,lt)),this._padding&&(f.interpolatePadding(I,Y,lt),Ie=f.centerPoint.add(he)),this.terrain&&!r.freezeElevation&&this._updateElevation(lt),De)f.setLocationAtPoint(De,Ye);else{const ft=f.zoomScale(f.zoom-m),wt=k>m?Math.min(2,nt):Math.max(.5,nt),xt=Math.pow(wt,1-lt),Ct=f.unproject(Ce.add(Ke.mult(lt*xt)).mult(ft));f.setLocationAtPoint(f.renderWorldCopies?Ct.wrap():Ct,Ie)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},lt=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,lt)},r),this}_prepareEase(r,u,f={}){this._moving=!0,u||f.moving||this.fire(new l.Event("movestart",r)),this._zooming&&!f.zooming&&this.fire(new l.Event("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new l.Event("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new l.Event("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(u-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=l.interpolate.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:f,zoom:m,pitch:_,bearing:C,elevation:I}=this.transformCameraUpdate(u);f&&(u.center=f),m!==void 0&&(u.zoom=m),_!==void 0&&(u.pitch=_),C!==void 0&&(u.bearing=C),I!==void 0&&(u.elevation=I),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new l.Event("move",r)),this._zooming&&this.fire(new l.Event("zoom",r)),this._rotating&&this.fire(new l.Event("rotate",r)),this._pitching&&this.fire(new l.Event("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.Event("zoomend",r)),m&&this.fire(new l.Event("rotateend",r)),_&&this.fire(new l.Event("pitchend",r)),this.fire(new l.Event("moveend",r))}flyTo(r,u){if(!r.essential&&l.browser.prefersReducedMotion){const $t=l.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo($t,u)}this.stop(),r=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.defaultEasing},r);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),C=this.getPitch(),I=this.getPadding(),k="zoom"in r?l.clamp(+r.zoom,f.minZoom,f.maxZoom):m,B="bearing"in r?this._normalizeBearing(r.bearing,_):_,H="pitch"in r?+r.pitch:C,Y="padding"in r?r.padding:f.padding,he=f.zoomScale(k-m),Ie=l.Point.convert(r.offset);let Ae=f.centerPoint.add(Ie);const Oe=f.pointLocation(Ae),Ce=l.LngLat.convert(r.center||Oe);this._normalizeCenter(Ce);const Ke=f.project(Oe),nt=f.project(Ce).sub(Ke);let De=r.curve;const Ye=Math.max(f.width,f.height),at=Ye/he,lt=nt.mag();if("minZoom"in r){const $t=l.clamp(Math.min(r.minZoom,m,k),f.minZoom,f.maxZoom),ir=Ye/f.zoomScale($t-m);De=Math.sqrt(ir/lt*2)}const ft=De*De;function wt($t){const ir=(at*at-Ye*Ye+($t?-1:1)*ft*ft*lt*lt)/(2*($t?at:Ye)*ft*lt);return Math.log(Math.sqrt(ir*ir+1)-ir)}function xt($t){return(Math.exp($t)-Math.exp(-$t))/2}function Ct($t){return(Math.exp($t)+Math.exp(-$t))/2}const Gt=wt(!1);let Sn=function($t){return Ct(Gt)/Ct(Gt+De*$t)},Ot=function($t){return Ye*((Ct(Gt)*(xt(ir=Gt+De*$t)/Ct(ir))-xt(Gt))/ft)/lt;var ir},nn=(wt(!0)-Gt)/De;if(Math.abs(lt)<1e-6||!isFinite(nn)){if(Math.abs(Ye-at)<1e-6)return this.easeTo(r,u);const $t=at<Ye?-1:1;nn=Math.abs(Math.log(at/Ye))/De,Ot=function(){return 0},Sn=function(ir){return Math.exp($t*De*ir)}}return r.duration="duration"in r?+r.duration:1e3*nn/("screenSpeed"in r?+r.screenSpeed/De:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==B,this._pitching=H!==C,this._padding=!f.isPaddingEqual(Y),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Ce),this._ease($t=>{const ir=$t*nn,Tn=1/Sn(ir);f.zoom=$t===1?k:m+f.scaleZoom(Tn),this._rotating&&(f.bearing=l.interpolate.number(_,B,$t)),this._pitching&&(f.pitch=l.interpolate.number(C,H,$t)),this._padding&&(f.interpolatePadding(I,Y,$t),Ae=f.centerPoint.add(Ie)),this.terrain&&!r.freezeElevation&&this._updateElevation($t);const rn=$t===1?Ce:f.unproject(Ke.add(nt.mult(Ot(ir))).mult(Tn));f.setLocationAtPoint(f.renderWorldCopies?rn.wrap():rn,Ae),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,u,f){f.animate===!1||f.duration===0?(r(1),u()):(this._easeStart=l.browser.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=l.wrap(r,-180,180);const f=Math.abs(r-u);return Math.abs(r-360-u)<f&&(r-=360),Math.abs(r+360-u)<f&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=r.lng-u.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.LngLat.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class Mo{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const f=this._map._getUIString(`AttributionControl.${u}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const _=u[m];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&r.indexOf(C.attribution)<0&&r.push(C.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let C=_+1;C<r.length;C++)if(r[C].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class wu{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Kt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ln={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var mc=l.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Xh extends l.Evented{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.ortho(m.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[m.key]=new gn(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const u in this._tiles){const f=this._tiles[u];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),l.ortho(_.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),u[f]=_}else if(m.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const C=m.canonical.z-r.canonical.z,I=m.canonical.x-(m.canonical.x>>C<<C),k=m.canonical.y-(m.canonical.y>>C<<C),B=l.EXTENT>>C;l.ortho(_.posMatrix,0,B,0,B,0,1),l.translate(_.posMatrix,_.posMatrix,[-I*B,-k*B,0]),u[f]=_}else if(r.canonical.isChildOf(m.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const C=r.canonical.z-m.canonical.z,I=r.canonical.x-(r.canonical.x>>C<<C),k=r.canonical.y-(r.canonical.y>>C<<C),B=l.EXTENT>>C;l.ortho(_.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(_.posMatrix,_.posMatrix,[I*B,k*B,0]),l.scale(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[f]=_}}return u}getSourceTile(r,u){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&u)for(;m>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class qh{constructor(r,u,f){this.painter=r,this.sourceCache=new Xh(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,f,m=l.EXTENT){var _;if(!(u>=0&&u<m&&f>=0&&f<m))return 0;const C=this.getTerrainData(r),I=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!I)return 0;const k=function(Ae,Oe,Ce){var Ke=Oe[0],nt=Oe[1];return Ae[0]=Ce[0]*Ke+Ce[4]*nt+Ce[12],Ae[1]=Ce[1]*Ke+Ce[5]*nt+Ce[13],Ae}([],[u/m*l.EXTENT,f/m*l.EXTENT],C.u_terrain_matrix),B=[k[0]*I.dim,k[1]*I.dim],H=Math.floor(B[0]),Y=Math.floor(B[1]),he=B[0]-H,Ie=B[1]-Y;return I.get(H,Y)*(1-he)*(1-Ie)+I.get(H+1,Y)*he*(1-Ie)+I.get(H,Y+1)*(1-he)*Ie+I.get(H+1,Y+1)*he*Ie}getElevationForLngLatZoom(r,u){const{tileID:f,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(f,m%l.EXTENT,_%l.EXTENT,l.EXTENT)}getElevation(r,u,f,m=l.EXTENT){return this.getDEMElevation(r,u,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(m,new l.RGBAImage({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new q(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=r.canonical.x-(r.canonical.x>>_<<_),I=r.canonical.y-(r.canonical.y>>_<<_),k=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<_),1/(l.EXTENT<<_),0]);l.translate(k,k,[C*l.EXTENT,I*l.EXTENT,0]),this._demMatrixCache[r.key]={matrix:k,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,f=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let I=0;I<this._coordsTextureSize;I++,C+=4)u[C+0]=255&I,u[C+1]=255&_,u[C+2]=I>>8<<4|_>>8,u[C+3]=0;const f=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new q(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){const u=new Uint8Array(4),f=this.painter.context,m=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),I=this.coordsIndex[255-u[3]],k=I&&this.sourceCache.getTileByID(I);if(!k)return null;const B=this._coordsTextureSize,H=(1<<k.tileID.canonical.z)*B;return new l.MercatorCoordinate((k.tileID.canonical.x*B+_)/H,(k.tileID.canonical.y*B+C)/H,this.getElevation(k.tileID,_,C,B))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new l.Pos3dArray,f=new l.TriangleIndexArray,m=this.meshSize,_=l.EXTENT/m,C=m*m;for(let Y=0;Y<=m;Y++)for(let he=0;he<=m;he++)u.emplaceBack(he*_,Y*_,0);for(let Y=0;Y<C;Y+=m+1)for(let he=0;he<m;he++)f.emplaceBack(he+Y,m+he+Y+1,m+he+Y+2),f.emplaceBack(he+Y,m+he+Y+2,he+Y+1);const I=u.length,k=I+2*(m+1);for(const Y of[0,1])for(let he=0;he<=m;he++)for(const Ie of[0,1])u.emplaceBack(he*_,Y*l.EXTENT,Ie);for(let Y=0;Y<2*m;Y+=2)f.emplaceBack(k+Y,k+Y+1,k+Y+3),f.emplaceBack(k+Y,k+Y+3,k+Y+2),f.emplaceBack(I+Y,I+Y+3,I+Y+1),f.emplaceBack(I+Y,I+Y+2,I+Y+3);const B=u.length,H=B+2*(m+1);for(const Y of[0,1])for(let he=0;he<=m;he++)for(const Ie of[0,1])u.emplaceBack(Y*l.EXTENT,he*_,Ie);for(let Y=0;Y<2*m;Y+=2)f.emplaceBack(B+Y,B+Y+1,B+Y+3),f.emplaceBack(B+Y,B+Y+3,B+Y+2),f.emplaceBack(H+Y,H+Y+3,H+Y+1),f.emplaceBack(H+Y,H+Y+2,H+Y+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(u,mc.members),segments:l.SegmentVector.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.earthRadius/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,u){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,u){const f=l.MercatorCoordinate.fromLngLat(r.wrap()),m=(1<<u)*l.EXTENT,_=f.x*m,C=f.y*m,I=Math.floor(_/l.EXTENT),k=Math.floor(C/l.EXTENT);return{tileID:new l.OverscaledTileID(u,0,u,I,k),mercatorX:_,mercatorY:C}}}class Oi{constructor(r,u,f){this._context=r,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:r,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Aa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ns{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Oi(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const _ of m){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const I in C)this._coordsDescendingInv[f][I]||(this._coordsDescendingInv[f][I]=[]),this._coordsDescendingInv[f][I].push(C[I])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],_=m.source;if(Aa[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(I=>I.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][f.tileID.key];_&&_!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Aa[u]&&(this._prevType&&Aa[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Aa[this._prevType]||Aa[u]&&m){this._prevType=u;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(Sa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[_]){const B=this.pool.getObjectForId(I.rtt[_].id);if(B.stamp===I.rtt[_].stamp){this.pool.useObject(B);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),I.rtt[_]={id:k.id,stamp:k.stamp},f.context.bindFramebuffer.set(k.fbo.framebuffer),f.context.clear({color:l.Color.transparent,stencil:0}),f.currentStencilSource=void 0;for(let B=0;B<C.length;B++){const H=f.style._layers[C[B]],Y=H.source?this._coordsDescendingInv[H.source][I.tileID.key]:[I.tileID];f.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),f._renderTileClippingMasks(H,Y),f.renderLayer(f,f.style.sourceCaches[H.source],H,Y),H.source&&(I.rttCoords[H.source]=this._coordsDescendingInvStr[H.source][I.tileID.key])}}return Sa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Aa[u]}return!1}}const Gg=b,bu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},lr=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},Ar={showCompass:!0,showZoom:!0,visualizePitch:!1};class Vd{constructor(r,u,f=!1){this.mousedown=C=>{this.startMouse(l.extend({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),w.mousePos(this.element,C)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,w.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=bs({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:I,bearingDegreesPerPixelMoved:k=.8})=>{const B=new vl;return new wi({clickTolerance:I,move:(H,Y)=>({bearingDelta:(Y.x-H.x)*k}),moveStateManager:B,enable:C,assignEvents:lr})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=Dd({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:I,pitchDegreesPerPixelMoved:k=-.5})=>{const B=new vl;return new wi({clickTolerance:I,move:(H,Y)=>({pitchDelta:(Y.y-H.y)*k}),moveStateManager:B,enable:C,assignEvents:lr})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),w.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),w.disableDrag()}moveMouse(r,u){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(r,u){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let mo;function Eu(g,r,u){if(g=new l.LngLat(g.lng,g.lat),r){const f=new l.LngLat(g.lng-360,g.lat),m=new l.LngLat(g.lng+360,g.lat),_=u.locationPoint(g).distSqr(r);u.locationPoint(f).distSqr(r)<_?g=f:u.locationPoint(m).distSqr(r)<_&&(g=m)}for(;Math.abs(g.lng-u.center.lng)>180;){const f=u.locationPoint(g);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;g.lng>u.center.lng?g.lng-=360:g.lng+=360}return g}const Su={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gc(g,r,u){const f=g.classList;for(const m in Su)f.remove(`maplibregl-${u}-anchor-${m}`);f.add(`maplibregl-${u}-anchor-${r}`)}class Tu extends l.Evented{constructor(r){if(super(),this._onKeyPress=u=>{const f=u.code,m=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Eu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Su[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${f}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const _=this._map.unproject(this._pos),C=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=_.distanceTo(this._lngLat)>20*C?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const I=w.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ke of k){const nt=w.createNS("http://www.w3.org/2000/svg","ellipse");nt.setAttributeNS(null,"opacity","0.04"),nt.setAttributeNS(null,"cx","10.5"),nt.setAttributeNS(null,"cy","5.80029008"),nt.setAttributeNS(null,"rx",Ke.rx),nt.setAttributeNS(null,"ry",Ke.ry),I.appendChild(nt)}const B=w.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);const H=w.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(H);const Y=w.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");const he=w.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(he);const Ie=w.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");const Ae=w.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Oe=w.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#000000"),Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962");const Ce=w.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),Ae.appendChild(Oe),Ae.appendChild(Ce),C.appendChild(I),C.appendChild(B),C.appendChild(Y),C.appendChild(Ie),C.appendChild(Ae),u.appendChild(C),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=l.Point.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),gc(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=l.Point.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Cu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let xl=0,Ia=!1;const Kh={maxWidth:100,unit:"metric"};function yc(g,r,u){const f=u&&u.maxWidth||100,m=g._container.clientHeight/2,_=g.unproject([0,m]),C=g.unproject([f,m]),I=_.distanceTo(C);if(u&&u.unit==="imperial"){const k=3.2808*I;k>5280?Pa(r,f,k/5280,g._getUIString("ScaleControl.Miles")):Pa(r,f,k,g._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Pa(r,f,I/1852,g._getUIString("ScaleControl.NauticalMiles")):I>=1e3?Pa(r,f,I/1e3,g._getUIString("ScaleControl.Kilometers")):Pa(r,f,I,g._getUIString("ScaleControl.Meters"))}function Pa(g,r,u,f){const m=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let I=_/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(k){const B=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*B)/B}(I),C*I}(u);g.style.width=r*(m/u)+"px",g.innerHTML=`${m}&nbsp;${f}`}const Yh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Jh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function vc(g){if(g){if(typeof g=="number"){const r=Math.round(Math.abs(g)/Math.SQRT2);return{center:new l.Point(0,0),top:new l.Point(0,g),"top-left":new l.Point(r,r),"top-right":new l.Point(-r,r),bottom:new l.Point(0,-g),"bottom-left":new l.Point(r,-r),"bottom-right":new l.Point(-r,-r),left:new l.Point(g,0),right:new l.Point(-g,0)}}if(g instanceof l.Point||Array.isArray(g)){const r=l.Point.convert(g);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.Point.convert(g.center||[0,0]),top:l.Point.convert(g.top||[0,0]),"top-left":l.Point.convert(g["top-left"]||[0,0]),"top-right":l.Point.convert(g["top-right"]||[0,0]),bottom:l.Point.convert(g.bottom||[0,0]),"bottom-left":l.Point.convert(g["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(g["bottom-right"]||[0,0]),left:l.Point.convert(g.left||[0,0]),right:l.Point.convert(g.right||[0,0])}}return vc(new l.Point(0,0))}const _c={extend:(g,...r)=>l.extend(g,...r),run(g){g()},logToElement(g,r=!1,u="log"){const f=window.document.getElementById(u);f&&(r&&(f.innerHTML=""),f.innerHTML+=`<br>${g}`)}},Qh=b;class Dn{static get version(){return Qh}static get workerCount(){return ut.workerCount}static set workerCount(r){ut.workerCount=r}static get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){l.config.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return l.config.WORKER_URL}static set workerUrl(r){l.config.WORKER_URL=r}static addProtocol(r,u){l.config.REGISTERED_PROTOCOLS[r]=u}static removeProtocol(r){delete l.config.REGISTERED_PROTOCOLS[r]}}return Dn.Map=class extends Vg{constructor(g){if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(g=l.extend({},bu,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ca(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new Kt,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},ln,g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this._imageQueueHandle=pe.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const u=ts(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{r?u(f):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new $d(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new pu(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,l.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Mo({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new wu,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new l.Event(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new l.Event(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new l.Event("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(g,r){if(r===void 0&&(r=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=g.onAdd(this);this._controls.push(g);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(g);return r>-1&&this._controls.splice(r,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,r,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,r,u,f)}resize(g){var r;const u=this._containerDimensions(),f=u[0],m=u[1],_=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,_),this.painter.resize(f,m,_),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const k=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,k),this.painter.resize(f,m,k)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const C=!this._moving;return C&&(this.stop(),this.fire(new l.Event("movestart",g)).fire(new l.Event("move",g))),this.fire(new l.Event("resize",g)),C&&this.fire(new l.Event("moveend",g)),this}_getClampedPixelRatio(g,r){const{0:u,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),_=g*m,C=r*m;return Math.min(_>u?u/_:1,C>f?f/C:1)*m}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(Me.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(g){return this._cooperativeGestures=g,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(g){return this.transform.locationPoint(l.LngLat.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(l.Point.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,r,u){if(g==="mouseenter"||g==="mouseover"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];C.length?f||(f=!0,u.call(this,new St(g,this,_.originalEvent,{features:C}))):f=!1},mouseout:()=>{f=!1}}}}if(g==="mouseleave"||g==="mouseout"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:C=>{(this.getLayer(r)?this.queryRenderedFeatures(C.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,u.call(this,new St(g,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,u.call(this,new St(g,this,C.originalEvent)))}}}}{const f=m=>{const _=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];_.length&&(m.features=_,u.call(this,m),delete m.features)};return{layer:r,listener:u,delegates:{[g]:f}}}}on(g,r,u){if(u===void 0)return super.on(g,r);const f=this._createDelegatedListener(g,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(g,r,u){if(u===void 0)return super.once(g,r);const f=this._createDelegatedListener(g,r,u);for(const m in f.delegates)this.once(m,f.delegates[m]);return this}off(g,r,u){return u===void 0?super.off(g,r):(this._delegatedListeners&&this._delegatedListeners[g]&&(f=>{const m=this._delegatedListeners[g];for(let _=0;_<m.length;_++){const C=m[_];if(C.layer===r&&C.listener===u){for(const I in C.delegates)this.off(I,C.delegates[I]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(g,r){if(!this.style)return[];let u;const f=g instanceof l.Point||Array.isArray(g),m=f?g:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:g)||{},m instanceof l.Point||typeof m[0]=="number")u=[l.Point.convert(m)];else{const _=l.Point.convert(m[0]),C=l.Point.convert(m[1]);u=[_,new l.Point(C.x,_.y),C,new l.Point(_.x,C.y),_]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(g,r){return this.style.querySourceFeatures(g,r)}setStyle(g,r){return(r=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(g,r))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const r=this._locale[g];if(r==null)throw new Error(`Missing UI string '${g}'`);return r}_updateStyle(g,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new Xr(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,r,u):this.style.loadJSON(g,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Xr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,r){if(typeof g=="string"){const u=this._requestManager.transformRequest(g,G.Style);l.getJSON(u,(f,m)=>{f?this.fire(new l.ErrorEvent(f)):m&&this._updateDiff(m,r)})}else typeof g=="object"&&this._updateDiff(g,r)}_updateDiff(g,r){try{this.style.setState(g,r)&&this._update(!0)}catch(u){l.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(g,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(g,r){return this._lazyInitEmptyStyle(),this.style.addSource(g,r),this._update(!0)}isSourceLoaded(g){const r=this.style&&this.style.sourceCaches[g];if(r!==void 0)return r.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const r=this.style.sourceCaches[g.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===g.source&&l.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new qh(this.painter,r,g),this.painter.renderToTexture=new ns(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==g.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.Event("terrain",{terrain:g})),this}getTerrain(){var g,r;return(r=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const r in g){const u=g[r]._tiles;for(const f in u){const m=u[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(g,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,r,u)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,r,u={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:_,stretchY:C,content:I}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.isImageBitmap(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:B,data:H}=r,Y=r;return this.style.addImage(g,{data:new l.RGBAImage({width:k,height:B},new Uint8Array(H)),pixelRatio:f,stretchX:_,stretchY:C,content:I,sdf:m,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,g),this}}{const{width:k,height:B,data:H}=l.browser.getImageData(r);this.style.addImage(g,{data:new l.RGBAImage({width:k,height:B},H),pixelRatio:f,stretchX:_,stretchY:C,content:I,sdf:m,version:0})}}updateImage(g,r){const u=this.style.getImage(g);if(!u)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||l.isImageBitmap(r)?l.browser.getImageData(r):r,{width:m,height:_,data:C}=f;if(m===void 0||_===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||_!==u.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(r instanceof HTMLImageElement||l.isImageBitmap(r));return u.data.replace(C,I),this.style.updateImage(g,u),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,r){pe.getImage(this._requestManager.transformRequest(g,G.Image),r)}listImages(){return this.style.listImages()}addLayer(g,r){return this._lazyInitEmptyStyle(),this.style.addLayer(g,r),this._update(!0)}moveLayer(g,r){return this.style.moveLayer(g,r),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,r,u){return this.style.setLayerZoomRange(g,r,u),this._update(!0)}setFilter(g,r,u={}){return this.style.setFilter(g,r,u),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,r,u,f={}){return this.style.setPaintProperty(g,r,u,f),this._update(!0)}getPaintProperty(g,r){return this.style.getPaintProperty(g,r)}setLayoutProperty(g,r,u,f={}){return this.style.setLayoutProperty(g,r,u,f),this._update(!0)}getLayoutProperty(g,r){return this.style.getLayoutProperty(g,r)}setGlyphs(g,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,r,u,f=>{f||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,r,u=>{u||this._update(!0)}),this}setLight(g,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,r){return this.style.setFeatureState(g,r),this._update()}removeFeatureState(g,r){return this.style.removeFeatureState(g,r),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,r=0;return this._container&&(g=this._container.clientWidth||400,r=this._container.clientHeight||300),[g,r]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",g);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const m=this._controlContainer=w.create("div","maplibregl-control-container",g),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=w.create("div",`maplibregl-ctrl-${C} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${g}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(g,r,u){this._canvas.width=Math.floor(u*g),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:g},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!u){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new du(u,this.transform),A.testSupport(u)}_onCooperativeGesture(g,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=l.browser.now();this.style.zoomHistory.update(m,_);const C=new l.EvaluationParameters(m,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=C.crossFadingFactor();I===1&&I===this._crossFadingFactor||(u=!0,this._crossFadingFactor=I),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),pe.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.browser.frame(g=>{l.PerformanceUtils.frame(g),this._frame=null,this._render(g)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return Gg}getCameraTargetElevation(){return this.transform.elevation}},Dn.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);r.title=f,r.setAttribute("aria-label",f)},this.options=l.extend({},Ar,g),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,r){const u=w.create("button",g,this._container);return u.type="button",u.addEventListener("click",r),u}},Dn.GeolocateControl=class extends l.Evented{constructor(g){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.Event("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new l.LngLat(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),_=l.extend({bearing:m},this.options.fitBoundsOptions),C=Me.fromLngLat(u,f);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new l.LngLat(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ia)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.Event("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Tu({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Tu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}},this.options=l.extend({},Cu,g)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){mo===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{mo=f.state!=="denied",r(mo)}).catch(()=>{mo=!!window.navigator.geolocation,r(mo)}):(mo=!!window.navigator.geolocation,r(mo)):r(mo)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,xl=0,Ia=!1}_isOutOfMapMaxBounds(g){const r=this._map.getMaxBounds(),u=g.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),r=g.getSouthEast(),u=g.getNorthEast(),f=r.distanceTo(u),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":xl--,Ia=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),xl++,xl>1?(g={maximumAge:6e5,timeout:0},Ia=!0):(g=this.options.positionOptions,Ia=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Dn.AttributionControl=Mo,Dn.LogoControl=wu,Dn.ScaleControl=class{constructor(g){this._onMove=()=>{yc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,yc(this._map,this._container,this.options)},this.options=l.extend({},Kh,g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Dn.FullscreenControl=class extends l.Evented{constructor(g={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Dn.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=g}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Dn.Popup=class extends l.Evented{constructor(g){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Eu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const u=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let f=this.options.anchor;const m=vc(this.options.offset);if(!f){const C=this._container.offsetWidth,I=this._container.offsetHeight;let k;k=u.y+m.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<C/2?k.push("left"):u.x>this._map.transform.width-C/2&&k.push("right"),f=k.length===0?"bottom":k.join("-")}const _=u.add(m[f]).round();w.setTransform(this._container,`${Su[f]} translate(${_.x}px,${_.y}px)`),gc(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=l.extend(Object.create(Yh),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=l.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const r=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=g;f=u.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Jh);g&&g.focus()}},Dn.Marker=Tu,Dn.Style=Xr,Dn.LngLat=l.LngLat,Dn.LngLatBounds=Me,Dn.Point=l.Point,Dn.MercatorCoordinate=l.MercatorCoordinate,Dn.Evented=l.Evented,Dn.AJAXError=l.AJAXError,Dn.config=l.config,Dn.CanvasSource=Je,Dn.GeoJSONSource=vt,Dn.ImageSource=ht,Dn.RasterDEMTileSource=ct,Dn.RasterTileSource=rt,Dn.VectorTileSource=Ge,Dn.VideoSource=Et,Dn.setRTLTextPlugin=l.setRTLTextPlugin,Dn.getRTLTextPluginStatus=l.getRTLTextPluginStatus,Dn.prewarm=function(){D().acquire(Fe)},Dn.clearPrewarmedResources=function(){const g=z;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Fe),z=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},_c.extend(Dn,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),Dn});var y=c;return y})})(qT);var YT=qT.exports;const JT=Sd(YT),T3=QP({__proto__:null,default:JT},[YT]);const C3="modulepreload",A3=function(e){return"/osm-address-editor-vite/"+e},Hb={},I3=function(t,i,a){if(!i||i.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=A3(d),d in Hb)return;Hb[d]=!0;const y=d.endsWith(".css"),l=y?'[rel="stylesheet"]':"";if(!!a)for(let A=c.length-1;A>=0;A--){const E=c[A];if(E.href===d&&(!y||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${l}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":C3,y||(w.as="script",w.crossOrigin=""),w.href=d,document.head.appendChild(w),y)return new Promise((A,E)=>{w.addEventListener("load",A),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t()).catch(d=>{const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=d,window.dispatchEvent(y),!y.defaultPrevented)throw d})},P3=_t.createContext(null);function M3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function Xb(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function qb(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const k3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Kb(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{const c=t[a.ref];let d=null;if("interactive"in a&&(d={...a},delete d.interactive),c){d=d||{...a},delete d.ref;for(const y of k3)y in c&&(d[y]=c[y])}return d||a});return{...e,layers:i}}function L3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===d}function cs(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!cs(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!cs(e[c],t[c]))return!1;return!0}return!1}const Yb={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},s0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Jb={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},z3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],O3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class vh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[Jb[c.type]];d&&d(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[Yb[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[s0[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=vh.savedMaps.pop();if(!a)return null;const c=a.map,d=c.getContainer();for(i.className=d.className;d.childNodes.length>0;)i.appendChild(d.childNodes[0]);c._container=i;const y=c._resizeObserver;y&&(y.disconnect(),y.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,a={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||R3()||null,container:t,style:Kb(i.mapStyle)},c=a.initialViewState||a.viewState||a;if(Object.assign(a,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),i.gl){const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=w,i.gl)}const d=new this._MapClass(a);c.padding&&d.setPadding(c.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const y=d._render;d._render=w=>{this._inRender=!0,y.call(d,w),this._inRender=!1};const l=d._renderTaskQueue.run;d._renderTaskQueue.run=w=>{l.call(d._renderTaskQueue,w),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const b=d.fire;d.fire=this._fireEvent.bind(this,b),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>this._updateStyleComponents(this.props,{})),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const w in Yb)d.on(w,this._onPointerEvent);for(const w in s0)d.on(w,this._onCameraEvent);for(const w in Jb)d.on(w,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),vh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=M3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:d,pitch:y,bearing:l}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const w=qb(c,{...Xb(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&i){const A=this._deferredEvents;A.move=!0,A.zoom||(A.zoom=d!==c.zoom),A.rotate||(A.rotate=l!==c.bearing),A.pitch||(A.pitch=y!==c.pitch)}return b||qb(a.transform,t),w}_updateSettings(t,i){const a=this._map;let c=!1;for(const d of z3)d in t&&!cs(t[d],i[d])&&(c=!0,a[`set${d[0].toUpperCase()}${d.slice(1)}`](t[d]));return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==i.mapStyle){const a={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(a.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Kb(t.mapStyle),a),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.style.loaded()&&("light"in t&&!cs(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&!cs(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&!cs(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){const a=this._map;let c=!1;for(const d of O3){const y=t[d];cs(y,i[d])||(c=!0,y?a[d].enable(y):a[d].disable())}return c}_queryRenderedFeatures(t){const i=this._map,{interactiveLayerIds:a=[]}=this.props;try{return i.queryRenderedFeatures(t,{layers:a.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const d=t.type,y=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&y&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!y&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,d=c.transform,y=typeof i=="string"?i:i.type;return y==="move"&&this._updateViewState(this.props,!1),y in s0&&(typeof i=="object"&&(i.viewState=Xb(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=d,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=i}}}vh.savedMaps=[];function R3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const F3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function j3(e,t){if(!e)return null;const i=e.map,a={getMap:()=>i,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c)),queryTerrainElevation:(c,d)=>{const y=i.transform;i.transform=e.transform;const l=i.queryTerrainElevation(c,d);return i.transform=y,l}};for(const c of D3(i))!(c in a)&&!F3.includes(c)&&(a[c]=i[c].bind(i));return a}function D3(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const B3=typeof document<"u"?_t.useLayoutEffect:_t.useEffect,N3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function U3(e,t){for(const i of N3)i in t&&(e[i]=t[i]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,i=>{i&&console.error(i)},!1)}const Ch=_t.createContext(null),$3={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},v1=_t.forwardRef((e,t)=>{const i=_t.useContext(P3),[a,c]=_t.useState(null),d=_t.useRef(),{current:y}=_t.useRef({mapLib:null,map:null});_t.useEffect(()=>{const w=e.mapLib;let A=!0,E;return Promise.resolve(w||I3(()=>Promise.resolve().then(()=>T3),void 0)).then(L=>{if(A){if(L.Map||(L=L.default),!L||!L.Map)throw new Error("Invalid mapLib");if(U3(L,e),!L.supported||L.supported(e))e.reuseMaps&&(E=vh.reuse(e,d.current)),E||(E=new vh(L.Map,e,d.current)),y.map=j3(E,L),y.mapLib=L,c(E),i==null||i.onMapMount(y.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(L=>{e.onError({type:"error",target:null,originalEvent:null,error:L})}),()=>{A=!1,E&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?E.recycle():E.destroy())}},[]),B3(()=>{a&&a.setProps(e)}),_t.useImperativeHandle(t,()=>y.map,[a]);const l=_t.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return _t.createElement("div",{id:e.id,ref:d,style:l},a&&_t.createElement(Ch.Provider,{value:y},_t.createElement("div",{"mapboxgl-children":"",style:b},e.children)))});v1.displayName="Map";v1.defaultProps=$3;const V3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ku(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!V3.test(a)?i[a]=`${c}px`:i[a]=c}}const G3={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function QT(e){const{map:t,mapLib:i}=_t.useContext(Ch),a=_t.useRef({props:e});a.current.props=e;const c=_t.useMemo(()=>{let d=!1;_t.Children.forEach(e.children,b=>{b&&(d=!0)});const y={...e,element:d?document.createElement("div"):null},l=new i.Marker(y).setLngLat([e.longitude,e.latitude]);return l.getElement().addEventListener("click",b=>{var w,A;(A=(w=a.current.props).onClick)===null||A===void 0||A.call(w,{type:"click",target:l,originalEvent:b})}),l.on("dragstart",b=>{var w,A;const E=b;E.lngLat=c.getLngLat(),(A=(w=a.current.props).onDragStart)===null||A===void 0||A.call(w,E)}),l.on("drag",b=>{var w,A;const E=b;E.lngLat=c.getLngLat(),(A=(w=a.current.props).onDrag)===null||A===void 0||A.call(w,E)}),l.on("dragend",b=>{var w,A;const E=b;E.lngLat=c.getLngLat(),(A=(w=a.current.props).onDragEnd)===null||A===void 0||A.call(w,E)}),l},[]);return _t.useEffect(()=>(c.addTo(t.getMap()),()=>{c.remove()}),[]),_t.useEffect(()=>{Ku(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!L3(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),y1.createPortal(e.children,c.getElement())}QT.defaultProps=G3;const Z3=_t.memo(QT);function Qb(e){return new Set(e?e.trim().split(/\s+/):[])}function W3(e){const{map:t,mapLib:i}=_t.useContext(Ch),a=_t.useMemo(()=>document.createElement("div"),[]),c=_t.useRef({props:e});c.current.props=e;const d=_t.useMemo(()=>{const y={...e},l=new i.Popup(y).setLngLat([e.longitude,e.latitude]);return l.once("open",b=>{var w,A;(A=(w=c.current.props).onOpen)===null||A===void 0||A.call(w,b)}),l},[]);if(_t.useEffect(()=>{const y=l=>{var b,w;(w=(b=c.current.props).onClose)===null||w===void 0||w.call(b,l)};return d.on("close",y),d.setDOMContent(a).addTo(t.getMap()),()=>{d.off("close",y),d.isOpen()&&d.remove()}},[]),_t.useEffect(()=>{Ku(d.getElement(),e.style)},[e.style]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!cs(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const y=Qb(d.options.className),l=Qb(e.className);for(const b of y)l.has(b)||d.removeClassName(b);for(const b of l)y.has(b)||d.addClassName(b);d.options.className=e.className}return y1.createPortal(e.children,a)}_t.memo(W3);function Md(e,t,i,a){const c=_t.useContext(Ch),d=_t.useMemo(()=>e(c),[]);return _t.useEffect(()=>{const y=a||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,y==null?void 0:y.position),l&&l(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function H3(e){const t=Md(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return _t.useEffect(()=>{Ku(t._container,e.style)},[e.style]),null}_t.memo(H3);function X3(e){const t=Md(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return _t.useEffect(()=>{Ku(t._controlContainer,e.style)},[e.style]),null}_t.memo(X3);const eC=_t.forwardRef((e,t)=>{const i=_t.useRef({props:e}),a=Md(({mapLib:c})=>{const d=new c.GeolocateControl(e),y=d._setupUI;return d._setupUI=l=>{d._container.hasChildNodes()||y(l)},d.on("geolocate",l=>{var b,w;(w=(b=i.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),d.on("error",l=>{var b,w;(w=(b=i.current.props).onError)===null||w===void 0||w.call(b,l)}),d.on("outofmaxbounds",l=>{var b,w;(w=(b=i.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationstart",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationend",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),d},{position:e.position});return i.current.props=e,_t.useImperativeHandle(t,()=>({trigger:()=>a.trigger()}),[]),_t.useEffect(()=>{Ku(a._container,e.style)},[e.style]),null});eC.displayName="GeolocateControl";const q3=_t.memo(eC);function K3(e){const t=Md(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return _t.useEffect(()=>{Ku(t._container,e.style)},[e.style]),null}const Y3=_t.memo(K3),J3={unit:"metric",maxWidth:100};function tC(e){const t=Md(({mapLib:i})=>new i.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),_t.useEffect(()=>{Ku(t._container,e.style)},[e.style]),null}tC.defaultProps=J3;_t.memo(tC);function Lm(e,t){if(!e)throw new Error(t)}let Q3=0;function e4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function t4(e,t,i){Lm(t.id===i.id,"source id changed"),Lm(t.type===i.type,"source type changed");let a="",c=0;for(const y in t)y!=="children"&&y!=="id"&&!cs(i[y],t[y])&&(a=y,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((d==="canvas"||d==="video")&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if(d==="vector"&&"setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function n4(e){const t=_t.useContext(Ch).map.getMap(),i=_t.useRef(e),[,a]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-source-${Q3++}`,[]);_t.useEffect(()=>{if(t){const y=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",y),y(),()=>{var l;if(t.off("styledata",y),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?t4(d,e,i.current):d=e4(t,c,e),i.current=e,d&&_t.Children.map(e.children,y=>y&&_t.cloneElement(y,{source:c}))||null}function r4(e,t,i,a){if(Lm(i.id===a.id,"layer id changed"),Lm(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:d={},filter:y,minzoom:l,maxzoom:b,beforeId:w}=i;if(w!==a.beforeId&&e.moveLayer(t,w),c!==a.layout){const A=a.layout||{};for(const E in c)cs(c[E],A[E])||e.setLayoutProperty(t,E,c[E]);for(const E in A)c.hasOwnProperty(E)||e.setLayoutProperty(t,E,void 0)}if(d!==a.paint){const A=a.paint||{};for(const E in d)cs(d[E],A[E])||e.setPaintProperty(t,E,d[E]);for(const E in A)d.hasOwnProperty(E)||e.setPaintProperty(t,E,void 0)}cs(y,a.filter)||e.setFilter(t,y),(l!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,l,b)}function i4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let o4=0;function s4(e){const t=_t.useContext(Ch).map.getMap(),i=_t.useRef(e),[,a]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-layer-${o4++}`,[]);if(_t.useEffect(()=>{if(t){const y=()=>a(l=>l+1);return t.on("styledata",y),y(),()=>{t.off("styledata",y),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{r4(t,c,e,i.current)}catch(y){console.warn(y)}else i4(t,c,e);return i.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function e2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Yt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?e2(Object(i),!0).forEach(function(a){u4(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):e2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function a4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l4(e,t,i){return t&&t2(e.prototype,t),i&&t2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function u4(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _1(e,t){return h4(e)||d4(e,t)||nC(e,t)||m4()}function Ag(e){return c4(e)||f4(e)||nC(e)||p4()}function c4(e){if(Array.isArray(e))return kv(e)}function h4(e){if(Array.isArray(e))return e}function f4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,d=!1,y,l;try{for(i=i.call(e);!(c=(y=i.next()).done)&&(a.push(y.value),!(t&&a.length===t));c=!0);}catch(b){d=!0,l=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(d)throw l}}return a}}function nC(e,t){if(e){if(typeof e=="string")return kv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kv(e,t)}}function kv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function p4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n2=function(){},x1={},rC={},iC=null,oC={mark:n2,measure:n2};try{typeof window<"u"&&(x1=window),typeof document<"u"&&(rC=document),typeof MutationObserver<"u"&&(iC=MutationObserver),typeof performance<"u"&&(oC=performance)}catch{}var g4=x1.navigator||{},r2=g4.userAgent,i2=r2===void 0?"":r2,Jl=x1,xr=rC,o2=iC,Ip=oC;Jl.document;var Ja=!!xr.documentElement&&!!xr.head&&typeof xr.addEventListener=="function"&&typeof xr.createElement=="function",sC=~i2.indexOf("MSIE")||~i2.indexOf("Trident/"),Ha="___FONT_AWESOME___",Lv=16,aC="fa",lC="svg-inline--fa",Gu="data-fa-i2svg",zv="data-fa-pseudo-element",y4="data-fa-pseudo-element-pending",w1="data-prefix",b1="data-icon",s2="fontawesome-i2svg",v4="async",_4=["HTML","HEAD","STYLE","SCRIPT"],uC=function(){try{return!0}catch{return!1}}(),E1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Om={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},cC={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},x4={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},w4=/fa[srltdbk\-\ ]/,hC="fa-layers-text",b4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,E4={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},fC=[1,2,3,4,5,6,7,8,9,10],S4=fC.concat([11,12,13,14,15,16,17,18,19,20]),T4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Fu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},C4=[].concat(Ag(Object.keys(Om)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Fu.GROUP,Fu.SWAP_OPACITY,Fu.PRIMARY,Fu.SECONDARY]).concat(fC.map(function(e){return"".concat(e,"x")})).concat(S4.map(function(e){return"w-".concat(e)})),dC=Jl.FontAwesomeConfig||{};function A4(e){var t=xr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function I4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(xr&&typeof xr.querySelector=="function"){var P4=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];P4.forEach(function(e){var t=_1(e,2),i=t[0],a=t[1],c=I4(A4(i));c!=null&&(dC[a]=c)})}var M4={familyPrefix:aC,styleDefault:"solid",replacementClass:lC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},qf=Yt(Yt({},M4),dC);qf.autoReplaceSvg||(qf.observeMutations=!1);var mn={};Object.keys(qf).forEach(function(e){Object.defineProperty(mn,e,{enumerable:!0,set:function(i){qf[e]=i,Jp.forEach(function(a){return a(mn)})},get:function(){return qf[e]}})});Jl.FontAwesomeConfig=mn;var Jp=[];function k4(e){return Jp.push(e),function(){Jp.splice(Jp.indexOf(e),1)}}var kl=Lv,ua={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function L4(e){if(!(!e||!Ja)){var t=xr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=xr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var d=i[c],y=(d.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(y)>-1&&(a=d)}return xr.head.insertBefore(t,a),e}}var z4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function _d(){for(var e=12,t="";e-- >0;)t+=z4[Math.random()*62|0];return t}function Ah(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function S1(e){return e.classList?Ah(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function pC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function O4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(pC(e[i]),'" ')},"").trim()}function Ig(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function T1(e){return e.size!==ua.size||e.x!==ua.x||e.y!==ua.y||e.rotate!==ua.rotate||e.flipX||e.flipY}function R4(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(t.x*32,", ").concat(t.y*32,") "),y="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(d," ").concat(y," ").concat(l)},w={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:w}}function F4(e){var t=e.transform,i=e.width,a=i===void 0?Lv:i,c=e.height,d=c===void 0?Lv:c,y=e.startCentered,l=y===void 0?!1:y,b="";return l&&sC?b+="translate(".concat(t.x/kl-a/2,"em, ").concat(t.y/kl-d/2,"em) "):l?b+="translate(calc(-50% + ".concat(t.x/kl,"em), calc(-50% + ").concat(t.y/kl,"em)) "):b+="translate(".concat(t.x/kl,"em, ").concat(t.y/kl,"em) "),b+="scale(".concat(t.size/kl*(t.flipX?-1:1),", ").concat(t.size/kl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var j4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function mC(){var e=aC,t=lC,i=mn.familyPrefix,a=mn.replacementClass,c=j4;if(i!==e||a!==t){var d=new RegExp("\\.".concat(e,"\\-"),"g"),y=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");c=c.replace(d,".".concat(i,"-")).replace(y,"--".concat(i,"-")).replace(l,".".concat(a))}return c}var a2=!1;function a0(){mn.autoAddCss&&!a2&&(L4(mC()),a2=!0)}var D4={mixout:function(){return{dom:{css:mC,insertCss:a0}}},hooks:function(){return{beforeDOMElementCreation:function(){a0()},beforeI2svg:function(){a0()}}}},Xa=Jl||{};Xa[Ha]||(Xa[Ha]={});Xa[Ha].styles||(Xa[Ha].styles={});Xa[Ha].hooks||(Xa[Ha].hooks={});Xa[Ha].shims||(Xa[Ha].shims=[]);var Fs=Xa[Ha],gC=[],B4=function e(){xr.removeEventListener("DOMContentLoaded",e),Rm=1,gC.map(function(t){return t()})},Rm=!1;Ja&&(Rm=(xr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(xr.readyState),Rm||xr.addEventListener("DOMContentLoaded",B4));function N4(e){Ja&&(Rm?setTimeout(e,0):gC.push(e))}function kd(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,d=c===void 0?[]:c;return typeof e=="string"?pC(e):"<".concat(t," ").concat(O4(a),">").concat(d.map(kd).join(""),"</").concat(t,">")}function l2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var U4=function(t,i){return function(a,c,d,y){return t.call(i,a,c,d,y)}},l0=function(t,i,a,c){var d=Object.keys(t),y=d.length,l=c!==void 0?U4(i,c):i,b,w,A;for(a===void 0?(b=1,A=t[d[0]]):(b=0,A=a);b<y;b++)w=d[b],A=l(A,t[w],w,t);return A};function $4(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var d=e.charCodeAt(i++);(d&64512)==56320?t.push(((c&1023)<<10)+(d&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function Ov(e){var t=$4(e);return t.length===1?t[0].toString(16):null}function V4(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function u2(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function Rv(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,d=u2(t);typeof Fs.hooks.addPack=="function"&&!c?Fs.hooks.addPack(e,u2(t)):Fs.styles[e]=Yt(Yt({},Fs.styles[e]||{}),d),e==="fas"&&Rv("fa",t)}var Kf=Fs.styles,G4=Fs.shims,Z4=Object.values(cC),C1=null,yC={},vC={},_C={},xC={},wC={},W4=Object.keys(E1);function H4(e){return~C4.indexOf(e)}function X4(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!H4(c)?c:null}var bC=function(){var t=function(d){return l0(Kf,function(y,l,b){return y[b]=l0(l,d,{}),y},{})};yC=t(function(c,d,y){if(d[3]&&(c[d[3]]=y),d[2]){var l=d[2].filter(function(b){return typeof b=="number"});l.forEach(function(b){c[b.toString(16)]=y})}return c}),vC=t(function(c,d,y){if(c[y]=y,d[2]){var l=d[2].filter(function(b){return typeof b=="string"});l.forEach(function(b){c[b]=y})}return c}),wC=t(function(c,d,y){var l=d[2];return c[y]=y,l.forEach(function(b){c[b]=y}),c});var i="far"in Kf||mn.autoFetchSvg,a=l0(G4,function(c,d){var y=d[0],l=d[1],b=d[2];return l==="far"&&!i&&(l="fas"),typeof y=="string"&&(c.names[y]={prefix:l,iconName:b}),typeof y=="number"&&(c.unicodes[y.toString(16)]={prefix:l,iconName:b}),c},{names:{},unicodes:{}});_C=a.names,xC=a.unicodes,C1=Pg(mn.styleDefault)};k4(function(e){C1=Pg(e.styleDefault)});bC();function A1(e,t){return(yC[e]||{})[t]}function q4(e,t){return(vC[e]||{})[t]}function Yc(e,t){return(wC[e]||{})[t]}function EC(e){return _C[e]||{prefix:null,iconName:null}}function K4(e){var t=xC[e],i=A1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function Ql(){return C1}var I1=function(){return{prefix:null,iconName:null,rest:[]}};function Pg(e){var t=E1[e],i=Om[e]||Om[t],a=e in Fs.styles?e:null;return i||a||null}function Mg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,a=i===void 0?!1:i,c=null,d=e.reduce(function(y,l){var b=X4(mn.familyPrefix,l);if(Kf[l]?(l=Z4.includes(l)?x4[l]:l,c=l,y.prefix=l):W4.indexOf(l)>-1?(c=l,y.prefix=Pg(l)):b?y.iconName=b:l!==mn.replacementClass&&y.rest.push(l),!a&&y.prefix&&y.iconName){var w=c==="fa"?EC(y.iconName):{},A=Yc(y.prefix,y.iconName);w.prefix&&(c=null),y.iconName=w.iconName||A||y.iconName,y.prefix=w.prefix||y.prefix,y.prefix==="far"&&!Kf.far&&Kf.fas&&!mn.autoFetchSvg&&(y.prefix="fas")}return y},I1());return(d.prefix==="fa"||c==="fa")&&(d.prefix=Ql()||"fas"),d}var Y4=function(){function e(){a4(this,e),this.definitions={}}return l4(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];var y=c.reduce(this._pullDefinitions,{});Object.keys(y).forEach(function(l){i.definitions[l]=Yt(Yt({},i.definitions[l]||{}),y[l]),Rv(l,y[l]);var b=cC[l];b&&Rv(b,y[l]),bC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(d){var y=c[d],l=y.prefix,b=y.iconName,w=y.icon,A=w[2];i[l]||(i[l]={}),A.length>0&&A.forEach(function(E){typeof E=="string"&&(i[l][E]=w)}),i[l][b]=w}),i}}]),e}(),c2=[],Jc={},lh={},J4=Object.keys(lh);function Q4(e,t){var i=t.mixoutsTo;return c2=e,Jc={},Object.keys(lh).forEach(function(a){J4.indexOf(a)===-1&&delete lh[a]}),c2.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(y){typeof c[y]=="function"&&(i[y]=c[y]),zm(c[y])==="object"&&Object.keys(c[y]).forEach(function(l){i[y]||(i[y]={}),i[y][l]=c[y][l]})}),a.hooks){var d=a.hooks();Object.keys(d).forEach(function(y){Jc[y]||(Jc[y]=[]),Jc[y].push(d[y])})}a.provides&&a.provides(lh)}),i}function Fv(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var d=Jc[e]||[];return d.forEach(function(y){t=y.apply(null,[t].concat(a))}),t}function Zu(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=Jc[e]||[];c.forEach(function(d){d.apply(null,i)})}function qa(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return lh[e]?lh[e].apply(null,t):void 0}function jv(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||Ql();if(t)return t=Yc(i,t)||t,l2(SC.definitions,i,t)||l2(Fs.styles,i,t)}var SC=new Y4,eL=function(){mn.autoReplaceSvg=!1,mn.observeMutations=!1,Zu("noAuto")},tL={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ja?(Zu("beforeI2svg",t),qa("pseudoElements2svg",t),qa("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;mn.autoReplaceSvg===!1&&(mn.autoReplaceSvg=!0),mn.observeMutations=!0,N4(function(){rL({autoReplaceSvgRoot:i}),Zu("watch",t)})}},nL={icon:function(t){if(t===null)return null;if(zm(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Yc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=Pg(t[0]);return{prefix:a,iconName:Yc(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(mn.familyPrefix,"-"))>-1||t.match(w4))){var c=Mg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||Ql(),iconName:Yc(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var d=Ql();return{prefix:d,iconName:Yc(d,t)||t}}}},Zo={noAuto:eL,config:mn,dom:tL,parse:nL,library:SC,findIconDefinition:jv,toHtml:kd},rL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?xr:i;(Object.keys(Fs.styles).length>0||mn.autoFetchSvg)&&Ja&&mn.autoReplaceSvg&&Zo.dom.i2svg({node:a})};function kg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return kd(a)})}}),Object.defineProperty(e,"node",{get:function(){if(Ja){var a=xr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function iL(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,d=e.styles,y=e.transform;if(T1(y)&&i.found&&!a.found){var l=i.width,b=i.height,w={x:l/b/2,y:.5};c.style=Ig(Yt(Yt({},d),{},{"transform-origin":"".concat(w.x+y.x/16,"em ").concat(w.y+y.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function oL(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,d=e.symbol,y=d===!0?"".concat(t,"-").concat(mn.familyPrefix,"-").concat(i):d;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Yt(Yt({},c),{},{id:y}),children:a}]}]}function P1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,d=e.iconName,y=e.transform,l=e.symbol,b=e.title,w=e.maskId,A=e.titleId,E=e.extra,L=e.watchable,F=L===void 0?!1:L,Q=a.found?a:i,K=Q.width,pe=Q.height,G=c==="fak",V=[mn.replacementClass,d?"".concat(mn.familyPrefix,"-").concat(d):""].filter(function(Z){return E.classes.indexOf(Z)===-1}).filter(function(Z){return Z!==""||!!Z}).concat(E.classes).join(" "),U={children:[],attributes:Yt(Yt({},E.attributes),{},{"data-prefix":c,"data-icon":d,class:V,role:E.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(K," ").concat(pe)})},oe=G&&!~E.classes.indexOf("fa-fw")?{width:"".concat(K/pe*16*.0625,"em")}:{};F&&(U.attributes[Gu]=""),b&&(U.children.push({tag:"title",attributes:{id:U.attributes["aria-labelledby"]||"title-".concat(A||_d())},children:[b]}),delete U.attributes.title);var W=Yt(Yt({},U),{},{prefix:c,iconName:d,main:i,mask:a,maskId:w,transform:y,symbol:l,styles:Yt(Yt({},oe),E.styles)}),N=a.found&&i.found?qa("generateAbstractMask",W)||{children:[],attributes:{}}:qa("generateAbstractIcon",W)||{children:[],attributes:{}},S=N.children,M=N.attributes;return W.children=S,W.attributes=M,l?oL(W):iL(W)}function h2(e){var t=e.content,i=e.width,a=e.height,c=e.transform,d=e.title,y=e.extra,l=e.watchable,b=l===void 0?!1:l,w=Yt(Yt(Yt({},y.attributes),d?{title:d}:{}),{},{class:y.classes.join(" ")});b&&(w[Gu]="");var A=Yt({},y.styles);T1(c)&&(A.transform=F4({transform:c,startCentered:!0,width:i,height:a}),A["-webkit-transform"]=A.transform);var E=Ig(A);E.length>0&&(w.style=E);var L=[];return L.push({tag:"span",attributes:w,children:[t]}),d&&L.push({tag:"span",attributes:{class:"sr-only"},children:[d]}),L}function sL(e){var t=e.content,i=e.title,a=e.extra,c=Yt(Yt(Yt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),d=Ig(a.styles);d.length>0&&(c.style=d);var y=[];return y.push({tag:"span",attributes:c,children:[t]}),i&&y.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),y}var u0=Fs.styles;function Dv(e){var t=e[0],i=e[1],a=e.slice(4),c=_1(a,1),d=c[0],y=null;return Array.isArray(d)?y={tag:"g",attributes:{class:"".concat(mn.familyPrefix,"-").concat(Fu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(mn.familyPrefix,"-").concat(Fu.SECONDARY),fill:"currentColor",d:d[0]}},{tag:"path",attributes:{class:"".concat(mn.familyPrefix,"-").concat(Fu.PRIMARY),fill:"currentColor",d:d[1]}}]}:y={tag:"path",attributes:{fill:"currentColor",d}},{found:!0,width:t,height:i,icon:y}}var aL={found:!1,width:512,height:512};function lL(e,t){!uC&&!mn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function Bv(e,t){var i=t;return t==="fa"&&mn.styleDefault!==null&&(t=Ql()),new Promise(function(a,c){if(qa("missingIconAbstract"),i==="fa"){var d=EC(e)||{};e=d.iconName||e,t=d.prefix||t}if(e&&t&&u0[t]&&u0[t][e]){var y=u0[t][e];return a(Dv(y))}lL(e,t),a(Yt(Yt({},aL),{},{icon:mn.showMissingIcons&&e?qa("missingIconAbstract")||{}:{}}))})}var f2=function(){},Nv=mn.measurePerformance&&Ip&&Ip.mark&&Ip.measure?Ip:{mark:f2,measure:f2},Lf='FA "6.0.0"',uL=function(t){return Nv.mark("".concat(Lf," ").concat(t," begins")),function(){return TC(t)}},TC=function(t){Nv.mark("".concat(Lf," ").concat(t," ends")),Nv.measure("".concat(Lf," ").concat(t),"".concat(Lf," ").concat(t," begins"),"".concat(Lf," ").concat(t," ends"))},M1={begin:uL,end:TC},Qp=function(){};function d2(e){var t=e.getAttribute?e.getAttribute(Gu):null;return typeof t=="string"}function cL(e){var t=e.getAttribute?e.getAttribute(w1):null,i=e.getAttribute?e.getAttribute(b1):null;return t&&i}function hL(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(mn.replacementClass)}function fL(){if(mn.autoReplaceSvg===!0)return em.replace;var e=em[mn.autoReplaceSvg];return e||em.replace}function dL(e){return xr.createElementNS("http://www.w3.org/2000/svg",e)}function pL(e){return xr.createElement(e)}function CC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?dL:pL:i;if(typeof e=="string")return xr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(y){c.setAttribute(y,e.attributes[y])});var d=e.children||[];return d.forEach(function(y){c.appendChild(CC(y,{ceFn:a}))}),c}function mL(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var em={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(CC(c),i)}),i.getAttribute(Gu)===null&&mn.keepOriginalSource){var a=xr.createComment(mL(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~S1(i).indexOf(mn.replacementClass))return em.replace(t);var c=new RegExp("".concat(mn.familyPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var d=a[0].attributes.class.split(" ").reduce(function(l,b){return b===mn.replacementClass||b.match(c)?l.toSvg.push(b):l.toNode.push(b),l},{toNode:[],toSvg:[]});a[0].attributes.class=d.toSvg.join(" "),d.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",d.toNode.join(" "))}var y=a.map(function(l){return kd(l)}).join(`
`);i.setAttribute(Gu,""),i.innerHTML=y}};function p2(e){e()}function AC(e,t){var i=typeof t=="function"?t:Qp;if(e.length===0)i();else{var a=p2;mn.mutateApproach===v4&&(a=Jl.requestAnimationFrame||p2),a(function(){var c=fL(),d=M1.begin("mutate");e.map(c),d(),i()})}}var k1=!1;function IC(){k1=!0}function Uv(){k1=!1}var Fm=null;function m2(e){if(o2&&mn.observeMutations){var t=e.treeCallback,i=t===void 0?Qp:t,a=e.nodeCallback,c=a===void 0?Qp:a,d=e.pseudoElementsCallback,y=d===void 0?Qp:d,l=e.observeMutationsRoot,b=l===void 0?xr:l;Fm=new o2(function(w){if(!k1){var A=Ql();Ah(w).forEach(function(E){if(E.type==="childList"&&E.addedNodes.length>0&&!d2(E.addedNodes[0])&&(mn.searchPseudoElements&&y(E.target),i(E.target)),E.type==="attributes"&&E.target.parentNode&&mn.searchPseudoElements&&y(E.target.parentNode),E.type==="attributes"&&d2(E.target)&&~T4.indexOf(E.attributeName))if(E.attributeName==="class"&&cL(E.target)){var L=Mg(S1(E.target)),F=L.prefix,Q=L.iconName;E.target.setAttribute(w1,F||A),Q&&E.target.setAttribute(b1,Q)}else hL(E.target)&&c(E.target)})}}),Ja&&Fm.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function gL(){Fm&&Fm.disconnect()}function yL(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var d=c.split(":"),y=d[0],l=d.slice(1);return y&&l.length>0&&(a[y]=l.join(":").trim()),a},{})),i}function vL(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=Mg(S1(e));return c.prefix||(c.prefix=Ql()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||c.prefix&&a.length>0&&(c.iconName=q4(c.prefix,e.innerText)||A1(c.prefix,Ov(e.innerText))),c}function _L(e){var t=Ah(e.attributes).reduce(function(c,d){return c.name!=="class"&&c.name!=="style"&&(c[d.name]=d.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return mn.autoA11y&&(i?t["aria-labelledby"]="".concat(mn.replacementClass,"-title-").concat(a||_d()):(t["aria-hidden"]="true",t.focusable="false")),t}function xL(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ua,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function g2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=vL(e),a=i.iconName,c=i.prefix,d=i.rest,y=_L(e),l=Fv("parseNodeAttributes",{},e),b=t.styleParser?yL(e):[];return Yt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:ua,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:d,styles:b,attributes:y}},l)}var wL=Fs.styles;function PC(e){var t=mn.autoReplaceSvg==="nest"?g2(e,{styleParser:!1}):g2(e);return~t.extra.classes.indexOf(hC)?qa("generateLayersText",e,t):qa("generateSvgReplacementMutation",e,t)}function y2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ja)return Promise.resolve();var i=xr.documentElement.classList,a=function(E){return i.add("".concat(s2,"-").concat(E))},c=function(E){return i.remove("".concat(s2,"-").concat(E))},d=mn.autoFetchSvg?Object.keys(E1):Object.keys(wL),y=[".".concat(hC,":not([").concat(Gu,"])")].concat(d.map(function(A){return".".concat(A,":not([").concat(Gu,"])")})).join(", ");if(y.length===0)return Promise.resolve();var l=[];try{l=Ah(e.querySelectorAll(y))}catch{}if(l.length>0)a("pending"),c("complete");else return Promise.resolve();var b=M1.begin("onTree"),w=l.reduce(function(A,E){try{var L=PC(E);L&&A.push(L)}catch(F){uC||F.name==="MissingIcon"&&console.error(F)}return A},[]);return new Promise(function(A,E){Promise.all(w).then(function(L){AC(L,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),A()})}).catch(function(L){b(),E(L)})})}function bL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;PC(e).then(function(i){i&&AC([i],t)})}function EL(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:jv(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:jv(c||{})),e(a,Yt(Yt({},i),{},{mask:c}))}}var SL=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?ua:a,d=i.symbol,y=d===void 0?!1:d,l=i.mask,b=l===void 0?null:l,w=i.maskId,A=w===void 0?null:w,E=i.title,L=E===void 0?null:E,F=i.titleId,Q=F===void 0?null:F,K=i.classes,pe=K===void 0?[]:K,G=i.attributes,V=G===void 0?{}:G,U=i.styles,oe=U===void 0?{}:U;if(t){var W=t.prefix,N=t.iconName,S=t.icon;return kg(Yt({type:"icon"},t),function(){return Zu("beforeDOMElementCreation",{iconDefinition:t,params:i}),mn.autoA11y&&(L?V["aria-labelledby"]="".concat(mn.replacementClass,"-title-").concat(Q||_d()):(V["aria-hidden"]="true",V.focusable="false")),P1({icons:{main:Dv(S),mask:b?Dv(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:W,iconName:N,transform:Yt(Yt({},ua),c),symbol:y,title:L,maskId:A,titleId:Q,extra:{attributes:V,styles:oe,classes:pe}})})}},TL={mixout:function(){return{icon:EL(SL)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=y2,i.nodeCallback=bL,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?xr:a,d=i.callback,y=d===void 0?function(){}:d;return y2(c,y)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,d=a.title,y=a.titleId,l=a.prefix,b=a.transform,w=a.symbol,A=a.mask,E=a.maskId,L=a.extra;return new Promise(function(F,Q){Promise.all([Bv(c,l),A.iconName?Bv(A.iconName,A.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(K){var pe=_1(K,2),G=pe[0],V=pe[1];F([i,P1({icons:{main:G,mask:V},prefix:l,iconName:c,transform:b,symbol:w,maskId:E,title:d,titleId:y,extra:L,watchable:!0})])}).catch(Q)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,d=i.main,y=i.transform,l=i.styles,b=Ig(l);b.length>0&&(c.style=b);var w;return T1(y)&&(w=qa("generateAbstractTransformGrouping",{main:d,transform:y,containerWidth:d.width,iconWidth:d.width})),a.push(w||d.icon),{children:a,attributes:c}}}},CL={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,d=c===void 0?[]:c;return kg({type:"layer"},function(){Zu("beforeDOMElementCreation",{assembler:i,params:a});var y=[];return i(function(l){Array.isArray(l)?l.map(function(b){y=y.concat(b.abstract)}):y=y.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(mn.familyPrefix,"-layers")].concat(Ag(d)).join(" ")},children:y}]})}}}},AL={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,d=c===void 0?null:c,y=a.classes,l=y===void 0?[]:y,b=a.attributes,w=b===void 0?{}:b,A=a.styles,E=A===void 0?{}:A;return kg({type:"counter",content:i},function(){return Zu("beforeDOMElementCreation",{content:i,params:a}),sL({content:i.toString(),title:d,extra:{attributes:w,styles:E,classes:["".concat(mn.familyPrefix,"-layers-counter")].concat(Ag(l))}})})}}}},IL={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,d=c===void 0?ua:c,y=a.title,l=y===void 0?null:y,b=a.classes,w=b===void 0?[]:b,A=a.attributes,E=A===void 0?{}:A,L=a.styles,F=L===void 0?{}:L;return kg({type:"text",content:i},function(){return Zu("beforeDOMElementCreation",{content:i,params:a}),h2({content:i,transform:Yt(Yt({},ua),d),title:l,extra:{attributes:E,styles:F,classes:["".concat(mn.familyPrefix,"-layers-text")].concat(Ag(w))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,d=a.transform,y=a.extra,l=null,b=null;if(sC){var w=parseInt(getComputedStyle(i).fontSize,10),A=i.getBoundingClientRect();l=A.width/w,b=A.height/w}return mn.autoA11y&&!c&&(y.attributes["aria-hidden"]="true"),Promise.resolve([i,h2({content:i.innerHTML,width:l,height:b,transform:d,title:c,extra:y,watchable:!0})])}}},PL=new RegExp('"',"ug"),v2=[1105920,1112319];function ML(e){var t=e.replace(PL,""),i=V4(t,0),a=i>=v2[0]&&i<=v2[1],c=t.length===2?t[0]===t[1]:!1;return{value:Ov(c?t[0]:t),isSecondary:a||c}}function _2(e,t){var i="".concat(y4).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var d=Ah(e.children),y=d.filter(function(N){return N.getAttribute(zv)===t})[0],l=Jl.getComputedStyle(e,t),b=l.getPropertyValue("font-family").match(b4),w=l.getPropertyValue("font-weight"),A=l.getPropertyValue("content");if(y&&!b)return e.removeChild(y),a();if(b&&A!=="none"&&A!==""){var E=l.getPropertyValue("content"),L=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Om[b[2].toLowerCase()]:E4[w],F=ML(E),Q=F.value,K=F.isSecondary,pe=b[0].startsWith("FontAwesome"),G=A1(L,Q),V=G;if(pe){var U=K4(Q);U.iconName&&U.prefix&&(G=U.iconName,L=U.prefix)}if(G&&!K&&(!y||y.getAttribute(w1)!==L||y.getAttribute(b1)!==V)){e.setAttribute(i,V),y&&e.removeChild(y);var oe=xL(),W=oe.extra;W.attributes[zv]=t,Bv(G,L).then(function(N){var S=P1(Yt(Yt({},oe),{},{icons:{main:N,mask:I1()},prefix:L,iconName:V,extra:W,watchable:!0})),M=xr.createElement("svg");t==="::before"?e.insertBefore(M,e.firstChild):e.appendChild(M),M.outerHTML=S.map(function(Z){return kd(Z)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function kL(e){return Promise.all([_2(e,"::before"),_2(e,"::after")])}function LL(e){return e.parentNode!==document.head&&!~_4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(zv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function x2(e){if(Ja)return new Promise(function(t,i){var a=Ah(e.querySelectorAll("*")).filter(LL).map(kL),c=M1.begin("searchPseudoElements");IC(),Promise.all(a).then(function(){c(),Uv(),t()}).catch(function(){c(),Uv(),i()})})}var zL={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=x2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?xr:a;mn.searchPseudoElements&&x2(c)}}},w2=!1,OL={mixout:function(){return{dom:{unwatch:function(){IC(),w2=!0}}}},hooks:function(){return{bootstrap:function(){m2(Fv("mutationObserverCallbacks",{}))},noAuto:function(){gL()},watch:function(i){var a=i.observeMutationsRoot;w2?Uv():m2(Fv("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},b2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var d=c.toLowerCase().split("-"),y=d[0],l=d.slice(1).join("-");if(y&&l==="h")return a.flipX=!0,a;if(y&&l==="v")return a.flipY=!0,a;if(l=parseFloat(l),isNaN(l))return a;switch(y){case"grow":a.size=a.size+l;break;case"shrink":a.size=a.size-l;break;case"left":a.x=a.x-l;break;case"right":a.x=a.x+l;break;case"up":a.y=a.y-l;break;case"down":a.y=a.y+l;break;case"rotate":a.rotate=a.rotate+l;break}return a},i)},RL={mixout:function(){return{parse:{transform:function(i){return b2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=b2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,d=i.containerWidth,y=i.iconWidth,l={transform:"translate(".concat(d/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),A="rotate(".concat(c.rotate," 0 0)"),E={transform:"".concat(b," ").concat(w," ").concat(A)},L={transform:"translate(".concat(y/2*-1," -256)")},F={outer:l,inner:E,path:L};return{tag:"g",attributes:Yt({},F.outer),children:[{tag:"g",attributes:Yt({},F.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Yt(Yt({},a.icon.attributes),F.path)}]}]}}}},c0={x:0,y:0,width:"100%",height:"100%"};function E2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function FL(e){return e.tag==="g"?e.children:[e]}var jL={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),d=c?Mg(c.split(" ").map(function(y){return y.trim()})):I1();return d.prefix||(d.prefix=Ql()),i.mask=d,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,d=i.main,y=i.mask,l=i.maskId,b=i.transform,w=d.width,A=d.icon,E=y.width,L=y.icon,F=R4({transform:b,containerWidth:E,iconWidth:w}),Q={tag:"rect",attributes:Yt(Yt({},c0),{},{fill:"white"})},K=A.children?{children:A.children.map(E2)}:{},pe={tag:"g",attributes:Yt({},F.inner),children:[E2(Yt({tag:A.tag,attributes:Yt(Yt({},A.attributes),F.path)},K))]},G={tag:"g",attributes:Yt({},F.outer),children:[pe]},V="mask-".concat(l||_d()),U="clip-".concat(l||_d()),oe={tag:"mask",attributes:Yt(Yt({},c0),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Q,G]},W={tag:"defs",children:[{tag:"clipPath",attributes:{id:U},children:FL(L)},oe]};return a.push(W,{tag:"rect",attributes:Yt({fill:"currentColor","clip-path":"url(#".concat(U,")"),mask:"url(#".concat(V,")")},c0)}),{children:a,attributes:c}}}},DL={provides:function(t){var i=!1;Jl.matchMedia&&(i=Jl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},d={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Yt(Yt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var y=Yt(Yt({},d),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Yt(Yt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||l.children.push({tag:"animate",attributes:Yt(Yt({},d),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Yt(Yt({},y),{},{values:"1;0;1;1;0;1;"})}),a.push(l),a.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Yt(Yt({},y),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Yt(Yt({},y),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},BL={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),d=c===null?!1:c===""?!0:c;return i.symbol=d,i}}}},NL=[D4,TL,CL,AL,IL,zL,OL,RL,jL,DL,BL];Q4(NL,{mixoutsTo:Zo});Zo.noAuto;Zo.config;Zo.library;Zo.dom;var $v=Zo.parse;Zo.findIconDefinition;Zo.toHtml;var UL=Zo.icon;Zo.layer;Zo.text;Zo.counter;var MC={exports:{}},$L="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",VL=$L,GL=VL;function kC(){}function LC(){}LC.resetWarningCache=kC;var ZL=function(){function e(a,c,d,y,l,b){if(b!==GL){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:LC,resetWarningCache:kC};return i.PropTypes=i,i};MC.exports=ZL();var WL=MC.exports;const Wn=Sd(WL);function S2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Ul(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(i),!0).forEach(function(a){Qc(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function Qc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function HL(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,d;for(d=0;d<a.length;d++)c=a[d],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function zC(e,t){if(e==null)return{};var i=HL(e,t),a,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)a=d[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Vv(e){return XL(e)||qL(e)||KL(e)||YL()}function XL(e){if(Array.isArray(e))return Gv(e)}function qL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KL(e,t){if(e){if(typeof e=="string")return Gv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gv(e,t)}}function Gv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function YL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JL(e){var t,i=e.beat,a=e.fade,c=e.flash,d=e.spin,y=e.spinPulse,l=e.spinReverse,b=e.pulse,w=e.fixedWidth,A=e.inverse,E=e.border,L=e.listItem,F=e.flip,Q=e.size,K=e.rotation,pe=e.pull,G=(t={"fa-beat":i,"fa-fade":a,"fa-flash":c,"fa-spin":d,"fa-spin-reverse":l,"fa-spin-pulse":y,"fa-pulse":b,"fa-fw":w,"fa-inverse":A,"fa-border":E,"fa-li":L,"fa-flip-horizontal":F==="horizontal"||F==="both","fa-flip-vertical":F==="vertical"||F==="both"},Qc(t,"fa-".concat(Q),typeof Q<"u"&&Q!==null),Qc(t,"fa-rotate-".concat(K),typeof K<"u"&&K!==null&&K!==0),Qc(t,"fa-pull-".concat(pe),typeof pe<"u"&&pe!==null),Qc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(G).map(function(V){return G[V]?V:null}).filter(function(V){return V})}function QL(e){return e=e-0,e===e}function OC(e){return QL(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var e5=["style"];function t5(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n5(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=OC(i.slice(0,a)),d=i.slice(a+1).trim();return c.startsWith("webkit")?t[t5(c)]=d:t[c]=d,t},{})}function RC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return RC(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,w){var A=t.attributes[w];switch(w){case"class":b.attrs.className=A,delete t.attributes.class;break;case"style":b.attrs.style=n5(A);break;default:w.indexOf("aria-")===0||w.indexOf("data-")===0?b.attrs[w.toLowerCase()]=A:b.attrs[OC(w)]=A}return b},{attrs:{}}),d=i.style,y=d===void 0?{}:d,l=zC(i,e5);return c.attrs.style=Ul(Ul({},c.attrs.style),y),e.apply(void 0,[t.tag,Ul(Ul({},c.attrs),l)].concat(Vv(a)))}var FC=!1;try{FC=!0}catch{}function r5(){if(!FC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function T2(e){if(e&&jm(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if($v.icon)return $v.icon(e);if(e===null)return null;if(e&&jm(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function h0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Qc({},e,t):{}}var i5=["forwardedRef"];function fa(e){var t=e.forwardedRef,i=zC(e,i5),a=i.icon,c=i.mask,d=i.symbol,y=i.className,l=i.title,b=i.titleId,w=T2(a),A=h0("classes",[].concat(Vv(JL(i)),Vv(y.split(" ")))),E=h0("transform",typeof i.transform=="string"?$v.transform(i.transform):i.transform),L=h0("mask",T2(c)),F=UL(w,Ul(Ul(Ul(Ul({},A),E),L),{},{symbol:d,title:l,titleId:b}));if(!F)return r5("Could not find icon",w),null;var Q=F.abstract,K={ref:t};return Object.keys(i).forEach(function(pe){fa.defaultProps.hasOwnProperty(pe)||(K[pe]=i[pe])}),o5(Q[0],K)}fa.displayName="FontAwesomeIcon";fa.propTypes={beat:Wn.bool,border:Wn.bool,className:Wn.string,fade:Wn.bool,flash:Wn.bool,mask:Wn.oneOfType([Wn.object,Wn.array,Wn.string]),fixedWidth:Wn.bool,inverse:Wn.bool,flip:Wn.oneOf(["horizontal","vertical","both"]),icon:Wn.oneOfType([Wn.object,Wn.array,Wn.string]),listItem:Wn.bool,pull:Wn.oneOf(["right","left"]),pulse:Wn.bool,rotation:Wn.oneOf([0,90,180,270]),size:Wn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Wn.bool,spinPulse:Wn.bool,spinReverse:Wn.bool,symbol:Wn.oneOfType([Wn.bool,Wn.string]),title:Wn.string,transform:Wn.oneOfType([Wn.string,Wn.object]),swapOpacity:Wn.bool};fa.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var o5=RC.bind(null,GE.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var s5={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},a5=s5,Zv={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},l5={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function Pp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,d){function y(w,A){if(!c[w]){if(!a[w]){var E=typeof Pp=="function"&&Pp;if(!A&&E)return E(w,!0);if(l)return l(w,!0);var L=new Error("Cannot find module '"+w+"'");throw L.code="MODULE_NOT_FOUND",L}var F=c[w]={exports:{}};a[w][0].call(F.exports,function(Q){var K=a[w][1][Q];return y(K||Q)},F,F.exports,i,a,c,d)}return c[w].exports}for(var l=typeof Pp=="function"&&Pp,b=0;b<d.length;b++)y(d[b]);return y}return i}()({1:[function(i,a,c){c.byteLength=L,c.toByteArray=Q,c.fromByteArray=G;for(var d=[],y=[],l=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,A=b.length;w<A;++w)d[w]=b[w],y[b.charCodeAt(w)]=w;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63;function E(V){var U=V.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=V.indexOf("=");oe===-1&&(oe=U);var W=oe===U?0:4-oe%4;return[oe,W]}function L(V){var U=E(V),oe=U[0],W=U[1];return(oe+W)*3/4-W}function F(V,U,oe){return(U+oe)*3/4-oe}function Q(V){var U,oe=E(V),W=oe[0],N=oe[1],S=new l(F(V,W,N)),M=0,Z=N>0?W-4:W,q;for(q=0;q<Z;q+=4)U=y[V.charCodeAt(q)]<<18|y[V.charCodeAt(q+1)]<<12|y[V.charCodeAt(q+2)]<<6|y[V.charCodeAt(q+3)],S[M++]=U>>16&255,S[M++]=U>>8&255,S[M++]=U&255;return N===2&&(U=y[V.charCodeAt(q)]<<2|y[V.charCodeAt(q+1)]>>4,S[M++]=U&255),N===1&&(U=y[V.charCodeAt(q)]<<10|y[V.charCodeAt(q+1)]<<4|y[V.charCodeAt(q+2)]>>2,S[M++]=U>>8&255,S[M++]=U&255),S}function K(V){return d[V>>18&63]+d[V>>12&63]+d[V>>6&63]+d[V&63]}function pe(V,U,oe){for(var W,N=[],S=U;S<oe;S+=3)W=(V[S]<<16&16711680)+(V[S+1]<<8&65280)+(V[S+2]&255),N.push(K(W));return N.join("")}function G(V){for(var U,oe=V.length,W=oe%3,N=[],S=16383,M=0,Z=oe-W;M<Z;M+=S)N.push(pe(V,M,M+S>Z?Z:M+S));return W===1?(U=V[oe-1],N.push(d[U>>2]+d[U<<4&63]+"==")):W===2&&(U=(V[oe-2]<<8)+V[oe-1],N.push(d[U>>10]+d[U>>4&63]+d[U<<2&63]+"=")),N.join("")}},{}],2:[function(i,a,c){(function(d){(function(){var y=i("base64-js"),l=i("ieee754");c.Buffer=E,c.SlowBuffer=W,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,E.TYPED_ARRAY_SUPPORT=w(),!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function A(Se){if(Se>b)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var j=new Uint8Array(Se);return j.__proto__=E.prototype,j}function E(Se,j,O){if(typeof Se=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return K(Se)}return L(Se,j,O)}typeof Symbol<"u"&&Symbol.species!=null&&E[Symbol.species]===E&&Object.defineProperty(E,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),E.poolSize=8192;function L(Se,j,O){if(typeof Se=="string")return pe(Se,j);if(ArrayBuffer.isView(Se))return G(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(un(Se,ArrayBuffer)||Se&&un(Se.buffer,ArrayBuffer))return V(Se,j,O);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=Se.valueOf&&Se.valueOf();if(_e!=null&&_e!==Se)return E.from(_e,j,O);var Ze=U(Se);if(Ze)return Ze;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return E.from(Se[Symbol.toPrimitive]("string"),j,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}E.from=function(Se,j,O){return L(Se,j,O)},E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array;function F(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function Q(Se,j,O){return F(Se),Se<=0?A(Se):j!==void 0?typeof O=="string"?A(Se).fill(j,O):A(Se).fill(j):A(Se)}E.alloc=function(Se,j,O){return Q(Se,j,O)};function K(Se){return F(Se),A(Se<0?0:oe(Se)|0)}E.allocUnsafe=function(Se){return K(Se)},E.allocUnsafeSlow=function(Se){return K(Se)};function pe(Se,j){if((typeof j!="string"||j==="")&&(j="utf8"),!E.isEncoding(j))throw new TypeError("Unknown encoding: "+j);var O=N(Se,j)|0,_e=A(O),Ze=_e.write(Se,j);return Ze!==O&&(_e=_e.slice(0,Ze)),_e}function G(Se){for(var j=Se.length<0?0:oe(Se.length)|0,O=A(j),_e=0;_e<j;_e+=1)O[_e]=Se[_e]&255;return O}function V(Se,j,O){if(j<0||Se.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<j+(O||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return j===void 0&&O===void 0?_e=new Uint8Array(Se):O===void 0?_e=new Uint8Array(Se,j):_e=new Uint8Array(Se,j,O),_e.__proto__=E.prototype,_e}function U(Se){if(E.isBuffer(Se)){var j=oe(Se.length)|0,O=A(j);return O.length===0||Se.copy(O,0,0,j),O}if(Se.length!==void 0)return typeof Se.length!="number"||gn(Se.length)?A(0):G(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return G(Se.data)}function oe(Se){if(Se>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return Se|0}function W(Se){return+Se!=Se&&(Se=0),E.alloc(+Se)}E.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==E.prototype},E.compare=function(j,O){if(un(j,Uint8Array)&&(j=E.from(j,j.offset,j.byteLength)),un(O,Uint8Array)&&(O=E.from(O,O.offset,O.byteLength)),!E.isBuffer(j)||!E.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===O)return 0;for(var _e=j.length,Ze=O.length,Fe=0,ut=Math.min(_e,Ze);Fe<ut;++Fe)if(j[Fe]!==O[Fe]){_e=j[Fe],Ze=O[Fe];break}return _e<Ze?-1:Ze<_e?1:0},E.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(j,O){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return E.alloc(0);var _e;if(O===void 0)for(O=0,_e=0;_e<j.length;++_e)O+=j[_e].length;var Ze=E.allocUnsafe(O),Fe=0;for(_e=0;_e<j.length;++_e){var ut=j[_e];if(un(ut,Uint8Array)&&(ut=E.from(ut)),!E.isBuffer(ut))throw new TypeError('"list" argument must be an Array of Buffers');ut.copy(Ze,Fe),Fe+=ut.length}return Ze};function N(Se,j){if(E.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||un(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var O=Se.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&O===0)return 0;for(var Ze=!1;;)switch(j){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Je(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return qt(Se).length;default:if(Ze)return _e?-1:Je(Se).length;j=(""+j).toLowerCase(),Ze=!0}}E.byteLength=N;function S(Se,j,O){var _e=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,j>>>=0,O<=j))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return Le(this,j,O);case"utf8":case"utf-8":return ne(this,j,O);case"ascii":return we(this,j,O);case"latin1":case"binary":return Ue(this,j,O);case"base64":return ie(this,j,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,j,O);default:if(_e)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),_e=!0}}E.prototype._isBuffer=!0;function M(Se,j,O){var _e=Se[j];Se[j]=Se[O],Se[O]=_e}E.prototype.swap16=function(){var j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<j;O+=2)M(this,O,O+1);return this},E.prototype.swap32=function(){var j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<j;O+=4)M(this,O,O+3),M(this,O+1,O+2);return this},E.prototype.swap64=function(){var j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<j;O+=8)M(this,O,O+7),M(this,O+1,O+6),M(this,O+2,O+5),M(this,O+3,O+4);return this},E.prototype.toString=function(){var j=this.length;return j===0?"":arguments.length===0?ne(this,0,j):S.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(j){if(!E.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:E.compare(this,j)===0},E.prototype.inspect=function(){var j="",O=c.INSPECT_MAX_BYTES;return j=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(j+=" ... "),"<Buffer "+j+">"},E.prototype.compare=function(j,O,_e,Ze,Fe){if(un(j,Uint8Array)&&(j=E.from(j,j.offset,j.byteLength)),!E.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(O===void 0&&(O=0),_e===void 0&&(_e=j?j.length:0),Ze===void 0&&(Ze=0),Fe===void 0&&(Fe=this.length),O<0||_e>j.length||Ze<0||Fe>this.length)throw new RangeError("out of range index");if(Ze>=Fe&&O>=_e)return 0;if(Ze>=Fe)return-1;if(O>=_e)return 1;if(O>>>=0,_e>>>=0,Ze>>>=0,Fe>>>=0,this===j)return 0;for(var ut=Fe-Ze,ae=_e-O,z=Math.min(ut,ae),D=this.slice(Ze,Fe),ce=j.slice(O,_e),Re=0;Re<z;++Re)if(D[Re]!==ce[Re]){ut=D[Re],ae=ce[Re];break}return ut<ae?-1:ae<ut?1:0};function Z(Se,j,O,_e,Ze){if(Se.length===0)return-1;if(typeof O=="string"?(_e=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,gn(O)&&(O=Ze?0:Se.length-1),O<0&&(O=Se.length+O),O>=Se.length){if(Ze)return-1;O=Se.length-1}else if(O<0)if(Ze)O=0;else return-1;if(typeof j=="string"&&(j=E.from(j,_e)),E.isBuffer(j))return j.length===0?-1:q(Se,j,O,_e,Ze);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?Ze?Uint8Array.prototype.indexOf.call(Se,j,O):Uint8Array.prototype.lastIndexOf.call(Se,j,O):q(Se,[j],O,_e,Ze);throw new TypeError("val must be string, number or Buffer")}function q(Se,j,O,_e,Ze){var Fe=1,ut=Se.length,ae=j.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(Se.length<2||j.length<2)return-1;Fe=2,ut/=2,ae/=2,O/=2}function z(st,en){return Fe===1?st[en]:st.readUInt16BE(en*Fe)}var D;if(Ze){var ce=-1;for(D=O;D<ut;D++)if(z(Se,D)===z(j,ce===-1?0:D-ce)){if(ce===-1&&(ce=D),D-ce+1===ae)return ce*Fe}else ce!==-1&&(D-=D-ce),ce=-1}else for(O+ae>ut&&(O=ut-ae),D=O;D>=0;D--){for(var Re=!0,Xe=0;Xe<ae;Xe++)if(z(Se,D+Xe)!==z(j,Xe)){Re=!1;break}if(Re)return D}return-1}E.prototype.includes=function(j,O,_e){return this.indexOf(j,O,_e)!==-1},E.prototype.indexOf=function(j,O,_e){return Z(this,j,O,_e,!0)},E.prototype.lastIndexOf=function(j,O,_e){return Z(this,j,O,_e,!1)};function J(Se,j,O,_e){O=Number(O)||0;var Ze=Se.length-O;_e?(_e=Number(_e),_e>Ze&&(_e=Ze)):_e=Ze;var Fe=j.length;_e>Fe/2&&(_e=Fe/2);for(var ut=0;ut<_e;++ut){var ae=parseInt(j.substr(ut*2,2),16);if(gn(ae))return ut;Se[O+ut]=ae}return ut}function ye(Se,j,O,_e){return Vt(Je(j,Se.length-O),Se,O,_e)}function xe(Se,j,O,_e){return Vt(Ut(j),Se,O,_e)}function be(Se,j,O,_e){return xe(Se,j,O,_e)}function te(Se,j,O,_e){return Vt(qt(j),Se,O,_e)}function le(Se,j,O,_e){return Vt(fn(j,Se.length-O),Se,O,_e)}E.prototype.write=function(j,O,_e,Ze){if(O===void 0)Ze="utf8",_e=this.length,O=0;else if(_e===void 0&&typeof O=="string")Ze=O,_e=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(_e)?(_e=_e>>>0,Ze===void 0&&(Ze="utf8")):(Ze=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Fe=this.length-O;if((_e===void 0||_e>Fe)&&(_e=Fe),j.length>0&&(_e<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ze||(Ze="utf8");for(var ut=!1;;)switch(Ze){case"hex":return J(this,j,O,_e);case"utf8":case"utf-8":return ye(this,j,O,_e);case"ascii":return xe(this,j,O,_e);case"latin1":case"binary":return be(this,j,O,_e);case"base64":return te(this,j,O,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,j,O,_e);default:if(ut)throw new TypeError("Unknown encoding: "+Ze);Ze=(""+Ze).toLowerCase(),ut=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(Se,j,O){return j===0&&O===Se.length?y.fromByteArray(Se):y.fromByteArray(Se.slice(j,O))}function ne(Se,j,O){O=Math.min(Se.length,O);for(var _e=[],Ze=j;Ze<O;){var Fe=Se[Ze],ut=null,ae=Fe>239?4:Fe>223?3:Fe>191?2:1;if(Ze+ae<=O){var z,D,ce,Re;switch(ae){case 1:Fe<128&&(ut=Fe);break;case 2:z=Se[Ze+1],(z&192)===128&&(Re=(Fe&31)<<6|z&63,Re>127&&(ut=Re));break;case 3:z=Se[Ze+1],D=Se[Ze+2],(z&192)===128&&(D&192)===128&&(Re=(Fe&15)<<12|(z&63)<<6|D&63,Re>2047&&(Re<55296||Re>57343)&&(ut=Re));break;case 4:z=Se[Ze+1],D=Se[Ze+2],ce=Se[Ze+3],(z&192)===128&&(D&192)===128&&(ce&192)===128&&(Re=(Fe&15)<<18|(z&63)<<12|(D&63)<<6|ce&63,Re>65535&&Re<1114112&&(ut=Re))}}ut===null?(ut=65533,ae=1):ut>65535&&(ut-=65536,_e.push(ut>>>10&1023|55296),ut=56320|ut&1023),_e.push(ut),Ze+=ae}return Ee(_e)}var me=4096;function Ee(Se){var j=Se.length;if(j<=me)return String.fromCharCode.apply(String,Se);for(var O="",_e=0;_e<j;)O+=String.fromCharCode.apply(String,Se.slice(_e,_e+=me));return O}function we(Se,j,O){var _e="";O=Math.min(Se.length,O);for(var Ze=j;Ze<O;++Ze)_e+=String.fromCharCode(Se[Ze]&127);return _e}function Ue(Se,j,O){var _e="";O=Math.min(Se.length,O);for(var Ze=j;Ze<O;++Ze)_e+=String.fromCharCode(Se[Ze]);return _e}function Le(Se,j,O){var _e=Se.length;(!j||j<0)&&(j=0),(!O||O<0||O>_e)&&(O=_e);for(var Ze="",Fe=j;Fe<O;++Fe)Ze+=Et(Se[Fe]);return Ze}function Me(Se,j,O){for(var _e=Se.slice(j,O),Ze="",Fe=0;Fe<_e.length;Fe+=2)Ze+=String.fromCharCode(_e[Fe]+_e[Fe+1]*256);return Ze}E.prototype.slice=function(j,O){var _e=this.length;j=~~j,O=O===void 0?_e:~~O,j<0?(j+=_e,j<0&&(j=0)):j>_e&&(j=_e),O<0?(O+=_e,O<0&&(O=0)):O>_e&&(O=_e),O<j&&(O=j);var Ze=this.subarray(j,O);return Ze.__proto__=E.prototype,Ze};function He(Se,j,O){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+j>O)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUIntLE=function(j,O,_e){j=j>>>0,O=O>>>0,_e||He(j,O,this.length);for(var Ze=this[j],Fe=1,ut=0;++ut<O&&(Fe*=256);)Ze+=this[j+ut]*Fe;return Ze},E.prototype.readUIntBE=function(j,O,_e){j=j>>>0,O=O>>>0,_e||He(j,O,this.length);for(var Ze=this[j+--O],Fe=1;O>0&&(Fe*=256);)Ze+=this[j+--O]*Fe;return Ze},E.prototype.readUInt8=function(j,O){return j=j>>>0,O||He(j,1,this.length),this[j]},E.prototype.readUInt16LE=function(j,O){return j=j>>>0,O||He(j,2,this.length),this[j]|this[j+1]<<8},E.prototype.readUInt16BE=function(j,O){return j=j>>>0,O||He(j,2,this.length),this[j]<<8|this[j+1]},E.prototype.readUInt32LE=function(j,O){return j=j>>>0,O||He(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},E.prototype.readUInt32BE=function(j,O){return j=j>>>0,O||He(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},E.prototype.readIntLE=function(j,O,_e){j=j>>>0,O=O>>>0,_e||He(j,O,this.length);for(var Ze=this[j],Fe=1,ut=0;++ut<O&&(Fe*=256);)Ze+=this[j+ut]*Fe;return Fe*=128,Ze>=Fe&&(Ze-=Math.pow(2,8*O)),Ze},E.prototype.readIntBE=function(j,O,_e){j=j>>>0,O=O>>>0,_e||He(j,O,this.length);for(var Ze=O,Fe=1,ut=this[j+--Ze];Ze>0&&(Fe*=256);)ut+=this[j+--Ze]*Fe;return Fe*=128,ut>=Fe&&(ut-=Math.pow(2,8*O)),ut},E.prototype.readInt8=function(j,O){return j=j>>>0,O||He(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},E.prototype.readInt16LE=function(j,O){j=j>>>0,O||He(j,2,this.length);var _e=this[j]|this[j+1]<<8;return _e&32768?_e|4294901760:_e},E.prototype.readInt16BE=function(j,O){j=j>>>0,O||He(j,2,this.length);var _e=this[j+1]|this[j]<<8;return _e&32768?_e|4294901760:_e},E.prototype.readInt32LE=function(j,O){return j=j>>>0,O||He(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},E.prototype.readInt32BE=function(j,O){return j=j>>>0,O||He(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},E.prototype.readFloatLE=function(j,O){return j=j>>>0,O||He(j,4,this.length),l.read(this,j,!0,23,4)},E.prototype.readFloatBE=function(j,O){return j=j>>>0,O||He(j,4,this.length),l.read(this,j,!1,23,4)},E.prototype.readDoubleLE=function(j,O){return j=j>>>0,O||He(j,8,this.length),l.read(this,j,!0,52,8)},E.prototype.readDoubleBE=function(j,O){return j=j>>>0,O||He(j,8,this.length),l.read(this,j,!1,52,8)};function Ge(Se,j,O,_e,Ze,Fe){if(!E.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>Ze||j<Fe)throw new RangeError('"value" argument is out of bounds');if(O+_e>Se.length)throw new RangeError("Index out of range")}E.prototype.writeUIntLE=function(j,O,_e,Ze){if(j=+j,O=O>>>0,_e=_e>>>0,!Ze){var Fe=Math.pow(2,8*_e)-1;Ge(this,j,O,_e,Fe,0)}var ut=1,ae=0;for(this[O]=j&255;++ae<_e&&(ut*=256);)this[O+ae]=j/ut&255;return O+_e},E.prototype.writeUIntBE=function(j,O,_e,Ze){if(j=+j,O=O>>>0,_e=_e>>>0,!Ze){var Fe=Math.pow(2,8*_e)-1;Ge(this,j,O,_e,Fe,0)}var ut=_e-1,ae=1;for(this[O+ut]=j&255;--ut>=0&&(ae*=256);)this[O+ut]=j/ae&255;return O+_e},E.prototype.writeUInt8=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,1,255,0),this[O]=j&255,O+1},E.prototype.writeUInt16LE=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,2,65535,0),this[O]=j&255,this[O+1]=j>>>8,O+2},E.prototype.writeUInt16BE=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,2,65535,0),this[O]=j>>>8,this[O+1]=j&255,O+2},E.prototype.writeUInt32LE=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,4,4294967295,0),this[O+3]=j>>>24,this[O+2]=j>>>16,this[O+1]=j>>>8,this[O]=j&255,O+4},E.prototype.writeUInt32BE=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,4,4294967295,0),this[O]=j>>>24,this[O+1]=j>>>16,this[O+2]=j>>>8,this[O+3]=j&255,O+4},E.prototype.writeIntLE=function(j,O,_e,Ze){if(j=+j,O=O>>>0,!Ze){var Fe=Math.pow(2,8*_e-1);Ge(this,j,O,_e,Fe-1,-Fe)}var ut=0,ae=1,z=0;for(this[O]=j&255;++ut<_e&&(ae*=256);)j<0&&z===0&&this[O+ut-1]!==0&&(z=1),this[O+ut]=(j/ae>>0)-z&255;return O+_e},E.prototype.writeIntBE=function(j,O,_e,Ze){if(j=+j,O=O>>>0,!Ze){var Fe=Math.pow(2,8*_e-1);Ge(this,j,O,_e,Fe-1,-Fe)}var ut=_e-1,ae=1,z=0;for(this[O+ut]=j&255;--ut>=0&&(ae*=256);)j<0&&z===0&&this[O+ut+1]!==0&&(z=1),this[O+ut]=(j/ae>>0)-z&255;return O+_e},E.prototype.writeInt8=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,1,127,-128),j<0&&(j=255+j+1),this[O]=j&255,O+1},E.prototype.writeInt16LE=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,2,32767,-32768),this[O]=j&255,this[O+1]=j>>>8,O+2},E.prototype.writeInt16BE=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,2,32767,-32768),this[O]=j>>>8,this[O+1]=j&255,O+2},E.prototype.writeInt32LE=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,4,2147483647,-2147483648),this[O]=j&255,this[O+1]=j>>>8,this[O+2]=j>>>16,this[O+3]=j>>>24,O+4},E.prototype.writeInt32BE=function(j,O,_e){return j=+j,O=O>>>0,_e||Ge(this,j,O,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[O]=j>>>24,this[O+1]=j>>>16,this[O+2]=j>>>8,this[O+3]=j&255,O+4};function rt(Se,j,O,_e,Ze,Fe){if(O+_e>Se.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ct(Se,j,O,_e,Ze){return j=+j,O=O>>>0,Ze||rt(Se,j,O,4),l.write(Se,j,O,_e,23,4),O+4}E.prototype.writeFloatLE=function(j,O,_e){return ct(this,j,O,!0,_e)},E.prototype.writeFloatBE=function(j,O,_e){return ct(this,j,O,!1,_e)};function vt(Se,j,O,_e,Ze){return j=+j,O=O>>>0,Ze||rt(Se,j,O,8),l.write(Se,j,O,_e,52,8),O+8}E.prototype.writeDoubleLE=function(j,O,_e){return vt(this,j,O,!0,_e)},E.prototype.writeDoubleBE=function(j,O,_e){return vt(this,j,O,!1,_e)},E.prototype.copy=function(j,O,_e,Ze){if(!E.isBuffer(j))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!Ze&&Ze!==0&&(Ze=this.length),O>=j.length&&(O=j.length),O||(O=0),Ze>0&&Ze<_e&&(Ze=_e),Ze===_e||j.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(Ze<0)throw new RangeError("sourceEnd out of bounds");Ze>this.length&&(Ze=this.length),j.length-O<Ze-_e&&(Ze=j.length-O+_e);var Fe=Ze-_e;if(this===j&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,_e,Ze);else if(this===j&&_e<O&&O<Ze)for(var ut=Fe-1;ut>=0;--ut)j[ut+O]=this[ut+_e];else Uint8Array.prototype.set.call(j,this.subarray(_e,Ze),O);return Fe},E.prototype.fill=function(j,O,_e,Ze){if(typeof j=="string"){if(typeof O=="string"?(Ze=O,O=0,_e=this.length):typeof _e=="string"&&(Ze=_e,_e=this.length),Ze!==void 0&&typeof Ze!="string")throw new TypeError("encoding must be a string");if(typeof Ze=="string"&&!E.isEncoding(Ze))throw new TypeError("Unknown encoding: "+Ze);if(j.length===1){var Fe=j.charCodeAt(0);(Ze==="utf8"&&Fe<128||Ze==="latin1")&&(j=Fe)}}else typeof j=="number"&&(j=j&255);if(O<0||this.length<O||this.length<_e)throw new RangeError("Out of range index");if(_e<=O)return this;O=O>>>0,_e=_e===void 0?this.length:_e>>>0,j||(j=0);var ut;if(typeof j=="number")for(ut=O;ut<_e;++ut)this[ut]=j;else{var ae=E.isBuffer(j)?j:E.from(j,Ze),z=ae.length;if(z===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(ut=0;ut<_e-O;++ut)this[ut+O]=ae[ut%z]}return this};var Pt=/[^+/0-9A-Za-z-_]/g;function ht(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(Pt,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function Et(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Je(Se,j){j=j||1/0;for(var O,_e=Se.length,Ze=null,Fe=[],ut=0;ut<_e;++ut){if(O=Se.charCodeAt(ut),O>55295&&O<57344){if(!Ze){if(O>56319){(j-=3)>-1&&Fe.push(239,191,189);continue}else if(ut+1===_e){(j-=3)>-1&&Fe.push(239,191,189);continue}Ze=O;continue}if(O<56320){(j-=3)>-1&&Fe.push(239,191,189),Ze=O;continue}O=(Ze-55296<<10|O-56320)+65536}else Ze&&(j-=3)>-1&&Fe.push(239,191,189);if(Ze=null,O<128){if((j-=1)<0)break;Fe.push(O)}else if(O<2048){if((j-=2)<0)break;Fe.push(O>>6|192,O&63|128)}else if(O<65536){if((j-=3)<0)break;Fe.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((j-=4)<0)break;Fe.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return Fe}function Ut(Se){for(var j=[],O=0;O<Se.length;++O)j.push(Se.charCodeAt(O)&255);return j}function fn(Se,j){for(var O,_e,Ze,Fe=[],ut=0;ut<Se.length&&!((j-=2)<0);++ut)O=Se.charCodeAt(ut),_e=O>>8,Ze=O%256,Fe.push(Ze),Fe.push(_e);return Fe}function qt(Se){return y.toByteArray(ht(Se))}function Vt(Se,j,O,_e){for(var Ze=0;Ze<_e&&!(Ze+O>=j.length||Ze>=Se.length);++Ze)j[Ze+O]=Se[Ze];return Ze}function un(Se,j){return Se instanceof j||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===j.name}function gn(Se){return Se!==Se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const d=i("./validator"),y=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");a.exports={XMLParser:y,XMLValidator:d,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",y=d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+d+"]["+y+"]*",b=new RegExp("^"+l+"$"),w=function(E,L){const F=[];let Q=L.exec(E);for(;Q;){const K=[];K.startIndex=L.lastIndex-Q[0].length;const pe=Q.length;for(let G=0;G<pe;G++)K.push(Q[G]);F.push(K),Q=L.exec(E)}return F},A=function(E){const L=b.exec(E);return!(L===null||typeof L>"u")};c.isExist=function(E){return typeof E<"u"},c.isEmptyObject=function(E){return Object.keys(E).length===0},c.merge=function(E,L,F){if(L){const Q=Object.keys(L),K=Q.length;for(let pe=0;pe<K;pe++)F==="strict"?E[Q[pe]]=[L[Q[pe]]]:E[Q[pe]]=L[Q[pe]]}},c.getValue=function(E){return c.isExist(E)?E:""},c.isName=A,c.getAllMatches=w,c.nameRegexp=l},{}],5:[function(i,a,c){const d=i("./util"),y={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(N,S){S=Object.assign({},y,S);const M=[];let Z=!1,q=!1;N[0]==="\uFEFF"&&(N=N.substr(1));for(let J=0;J<N.length;J++)if(N[J]==="<"&&N[J+1]==="?"){if(J+=2,J=b(N,J),J.err)return J}else if(N[J]==="<"){let ye=J;if(J++,N[J]==="!"){J=w(N,J);continue}else{let xe=!1;N[J]==="/"&&(xe=!0,J++);let be="";for(;J<N.length&&N[J]!==">"&&N[J]!==" "&&N[J]!=="	"&&N[J]!==`
`&&N[J]!=="\r";J++)be+=N[J];if(be=be.trim(),be[be.length-1]==="/"&&(be=be.substring(0,be.length-1),J--),!U(be)){let ie;return be.trim().length===0?ie="Invalid space after '<'.":ie="Tag '"+be+"' is an invalid name.",G("InvalidTag",ie,oe(N,J))}const te=L(N,J);if(te===!1)return G("InvalidAttr","Attributes for '"+be+"' have open quote.",oe(N,J));let le=te.value;if(J=te.index,le[le.length-1]==="/"){const ie=J-le.length;le=le.substring(0,le.length-1);const ne=Q(le,S);if(ne===!0)Z=!0;else return G(ne.err.code,ne.err.msg,oe(N,ie+ne.err.line))}else if(xe)if(te.tagClosed){if(le.trim().length>0)return G("InvalidTag","Closing tag '"+be+"' can't have attributes or invalid starting.",oe(N,ye));{const ie=M.pop();if(be!==ie.tagName){let ne=oe(N,ie.tagStartPos);return G("InvalidTag","Expected closing tag '"+ie.tagName+"' (opened in line "+ne.line+", col "+ne.col+") instead of closing tag '"+be+"'.",oe(N,ye))}M.length==0&&(q=!0)}}else return G("InvalidTag","Closing tag '"+be+"' doesn't have proper closing.",oe(N,J));else{const ie=Q(le,S);if(ie!==!0)return G(ie.err.code,ie.err.msg,oe(N,J-le.length+ie.err.line));if(q===!0)return G("InvalidXml","Multiple possible root nodes found.",oe(N,J));S.unpairedTags.indexOf(be)!==-1||M.push({tagName:be,tagStartPos:ye}),Z=!0}for(J++;J<N.length;J++)if(N[J]==="<")if(N[J+1]==="!"){J++,J=w(N,J);continue}else if(N[J+1]==="?"){if(J=b(N,++J),J.err)return J}else break;else if(N[J]==="&"){const ie=pe(N,J);if(ie==-1)return G("InvalidChar","char '&' is not expected.",oe(N,J));J=ie}else if(q===!0&&!l(N[J]))return G("InvalidXml","Extra text at the end",oe(N,J));N[J]==="<"&&J--}}else{if(l(N[J]))continue;return G("InvalidChar","char '"+N[J]+"' is not expected.",oe(N,J))}if(Z){if(M.length==1)return G("InvalidTag","Unclosed tag '"+M[0].tagName+"'.",oe(N,M[0].tagStartPos));if(M.length>0)return G("InvalidXml","Invalid '"+JSON.stringify(M.map(J=>J.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return G("InvalidXml","Start tag expected.",1);return!0};function l(N){return N===" "||N==="	"||N===`
`||N==="\r"}function b(N,S){const M=S;for(;S<N.length;S++)if(N[S]=="?"||N[S]==" "){const Z=N.substr(M,S-M);if(S>5&&Z==="xml")return G("InvalidXml","XML declaration allowed only at the start of the document.",oe(N,S));if(N[S]=="?"&&N[S+1]==">"){S++;break}else continue}return S}function w(N,S){if(N.length>S+5&&N[S+1]==="-"&&N[S+2]==="-"){for(S+=3;S<N.length;S++)if(N[S]==="-"&&N[S+1]==="-"&&N[S+2]===">"){S+=2;break}}else if(N.length>S+8&&N[S+1]==="D"&&N[S+2]==="O"&&N[S+3]==="C"&&N[S+4]==="T"&&N[S+5]==="Y"&&N[S+6]==="P"&&N[S+7]==="E"){let M=1;for(S+=8;S<N.length;S++)if(N[S]==="<")M++;else if(N[S]===">"&&(M--,M===0))break}else if(N.length>S+9&&N[S+1]==="["&&N[S+2]==="C"&&N[S+3]==="D"&&N[S+4]==="A"&&N[S+5]==="T"&&N[S+6]==="A"&&N[S+7]==="["){for(S+=8;S<N.length;S++)if(N[S]==="]"&&N[S+1]==="]"&&N[S+2]===">"){S+=2;break}}return S}const A='"',E="'";function L(N,S){let M="",Z="",q=!1;for(;S<N.length;S++){if(N[S]===A||N[S]===E)Z===""?Z=N[S]:Z!==N[S]||(Z="");else if(N[S]===">"&&Z===""){q=!0;break}M+=N[S]}return Z!==""?!1:{value:M,index:S,tagClosed:q}}const F=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Q(N,S){const M=d.getAllMatches(N,F),Z={};for(let q=0;q<M.length;q++){if(M[q][1].length===0)return G("InvalidAttr","Attribute '"+M[q][2]+"' has no space in starting.",W(M[q]));if(M[q][3]!==void 0&&M[q][4]===void 0)return G("InvalidAttr","Attribute '"+M[q][2]+"' is without value.",W(M[q]));if(M[q][3]===void 0&&!S.allowBooleanAttributes)return G("InvalidAttr","boolean attribute '"+M[q][2]+"' is not allowed.",W(M[q]));const J=M[q][2];if(!V(J))return G("InvalidAttr","Attribute '"+J+"' is an invalid name.",W(M[q]));if(!Z.hasOwnProperty(J))Z[J]=1;else return G("InvalidAttr","Attribute '"+J+"' is repeated.",W(M[q]))}return!0}function K(N,S){let M=/\d/;for(N[S]==="x"&&(S++,M=/[\da-fA-F]/);S<N.length;S++){if(N[S]===";")return S;if(!N[S].match(M))break}return-1}function pe(N,S){if(S++,N[S]===";")return-1;if(N[S]==="#")return S++,K(N,S);let M=0;for(;S<N.length;S++,M++)if(!(N[S].match(/\w/)&&M<20)){if(N[S]===";")break;return-1}return S}function G(N,S,M){return{err:{code:N,msg:S,line:M.line||M,col:M.col}}}function V(N){return d.isName(N)}function U(N){return d.isName(N)}function oe(N,S){const M=N.substring(0,S).split(/\r?\n/);return{line:M.length,col:M[M.length-1].length+1}}function W(N){return N.startIndex+N[1].length}},{"./util":4}],6:[function(i,a,c){const d=i("./orderedJs2Xml"),y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(G,V){return V},attributeValueProcessor:function(G,V){return V},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function l(G){this.options=Object.assign({},y,G),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=pe),this.processTextOrObjNode=w,this.options.format?(this.indentate=K,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=Q,this.buildObjNode=E):(this.buildTextNode=L,this.buildObjNode=A),this.buildTextValNode=L,this.buildObjectNode=A,this.replaceEntitiesValue=F,this.buildAttrPairStr=b}l.prototype.build=function(G){return this.options.preserveOrder?d(G,this.options):(Array.isArray(G)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(G={[this.options.arrayNodeName]:G}),this.j2x(G,0).val)},l.prototype.j2x=function(G,V){let U="",oe="";for(let W in G)if(!(typeof G[W]>"u"))if(G[W]===null)W[0]==="?"?oe+=this.indentate(V)+"<"+W+"?"+this.tagEndChar:oe+=this.indentate(V)+"<"+W+"/"+this.tagEndChar;else if(G[W]instanceof Date)oe+=this.buildTextNode(G[W],W,"",V);else if(typeof G[W]!="object"){const N=this.isAttribute(W);if(N)U+=this.buildAttrPairStr(N,""+G[W]);else if(W===this.options.textNodeName){let S=this.options.tagValueProcessor(W,""+G[W]);oe+=this.replaceEntitiesValue(S)}else oe+=this.buildTextNode(G[W],W,"",V)}else if(Array.isArray(G[W])){const N=G[W].length;for(let S=0;S<N;S++){const M=G[W][S];typeof M>"u"||(M===null?W[0]==="?"?oe+=this.indentate(V)+"<"+W+"?"+this.tagEndChar:oe+=this.indentate(V)+"<"+W+"/"+this.tagEndChar:typeof M=="object"?oe+=this.processTextOrObjNode(M,W,V):oe+=this.buildTextNode(M,W,"",V))}}else if(this.options.attributesGroupName&&W===this.options.attributesGroupName){const N=Object.keys(G[W]),S=N.length;for(let M=0;M<S;M++)U+=this.buildAttrPairStr(N[M],""+G[W][N[M]])}else oe+=this.processTextOrObjNode(G[W],W,V);return{attrStr:U,val:oe}};function b(G,V){return V=this.options.attributeValueProcessor(G,""+V),V=this.replaceEntitiesValue(V),this.options.suppressBooleanAttributes&&V==="true"?" "+G:" "+G+'="'+V+'"'}function w(G,V,U){const oe=this.j2x(G,U+1);return G[this.options.textNodeName]!==void 0&&Object.keys(G).length===1?this.buildTextNode(G[this.options.textNodeName],V,oe.attrStr,U):this.buildObjNode(oe.val,V,oe.attrStr,U)}function A(G,V,U,oe){let W="</"+V+this.tagEndChar,N="";return V[0]==="?"&&(N="?",W=""),U&&G.indexOf("<")===-1?this.indentate(oe)+"<"+V+U+N+">"+G+W:this.options.commentPropName!==!1&&V===this.options.commentPropName&&N.length===0?this.indentate(oe)+`<!--${G}-->`+this.newLine:this.indentate(oe)+"<"+V+U+N+this.tagEndChar+G+this.indentate(oe)+W}function E(G,V,U,oe){return G!==""?this.buildObjectNode(G,V,U,oe):V[0]==="?"?this.indentate(oe)+"<"+V+U+"?"+this.tagEndChar:this.indentate(oe)+"<"+V+U+"/"+this.tagEndChar}function L(G,V,U,oe){if(this.options.cdataPropName!==!1&&V===this.options.cdataPropName)return this.indentate(oe)+`<![CDATA[${G}]]>`+this.newLine;if(this.options.commentPropName!==!1&&V===this.options.commentPropName)return this.indentate(oe)+`<!--${G}-->`+this.newLine;{let W=this.options.tagValueProcessor(V,G);return W=this.replaceEntitiesValue(W),W===""&&this.options.unpairedTags.indexOf(V)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+V+this.tagEndChar:this.indentate(oe)+"<"+V+"/"+this.tagEndChar:this.indentate(oe)+"<"+V+U+">"+W+"</"+V+this.tagEndChar}}function F(G){if(G&&G.length>0&&this.options.processEntities)for(let V=0;V<this.options.entities.length;V++){const U=this.options.entities[V];G=G.replace(U.regex,U.val)}return G}function Q(G,V,U,oe){return G===""&&this.options.unpairedTags.indexOf(V)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+V+this.tagEndChar:this.indentate(oe)+"<"+V+"/"+this.tagEndChar:G!==""?this.buildTextValNode(G,V,U,oe):V[0]==="?"?this.indentate(oe)+"<"+V+U+"?"+this.tagEndChar:this.indentate(oe)+"<"+V+U+"/"+this.tagEndChar}function K(G){return this.options.indentBy.repeat(G)}function pe(G){return G.startsWith(this.options.attributeNamePrefix)?G.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(i,a,c){const d=`
`;function y(L,F){return l(L,F,"",0)}function l(L,F,Q,K){let pe="",G="";F.format&&F.indentBy.length>0&&(G=d+""+F.indentBy.repeat(K));for(let V=0;V<L.length;V++){const U=L[V],oe=b(U);let W="";if(Q.length===0?W=oe:W=`${Q}.${oe}`,oe===F.textNodeName){let Z=U[oe];A(W,F)||(Z=F.tagValueProcessor(oe,Z),Z=E(Z,F)),pe+=G+Z;continue}else if(oe===F.cdataPropName){pe+=G+`<![CDATA[${U[oe][0][F.textNodeName]}]]>`;continue}else if(oe===F.commentPropName){pe+=G+`<!--${U[oe][0][F.textNodeName]}-->`;continue}else if(oe[0]==="?"){const Z=w(U[":@"],F),q=oe==="?xml"?"":G;let J=U[oe][0][F.textNodeName];J=J.length!==0?" "+J:"",pe+=q+`<${oe}${J}${Z}?>`;continue}const N=w(U[":@"],F);let S=G+`<${oe}${N}`,M=l(U[oe],F,W,K+1);F.unpairedTags.indexOf(oe)!==-1?F.suppressUnpairedNode?pe+=S+">":pe+=S+"/>":(!M||M.length===0)&&F.suppressEmptyNode?pe+=S+"/>":pe+=S+`>${M}${G}</${oe}>`}return pe}function b(L){const F=Object.keys(L);for(let Q=0;Q<F.length;Q++){const K=F[Q];if(K!==":@")return K}}function w(L,F){let Q="";if(L&&!F.ignoreAttributes)for(let K in L){let pe=F.attributeValueProcessor(K,L[K]);pe=E(pe,F),pe===!0&&F.suppressBooleanAttributes?Q+=` ${K.substr(F.attributeNamePrefix.length)}`:Q+=` ${K.substr(F.attributeNamePrefix.length)}="${pe}"`}return Q}function A(L,F){L=L.substr(0,L.length-F.textNodeName.length-1);let Q=L.substr(L.lastIndexOf(".")+1);for(let K in F.stopNodes)if(F.stopNodes[K]===L||F.stopNodes[K]==="*."+Q)return!0;return!1}function E(L,F){if(L&&L.length>0&&F.processEntities)for(let Q=0;Q<F.entities.length;Q++){const K=F.entities[Q];L=L.replace(K.regex,K.val)}return L}a.exports=y},{}],8:[function(i,a,c){function d(b,w){const A={};if(b[w+3]==="O"&&b[w+4]==="C"&&b[w+5]==="T"&&b[w+6]==="Y"&&b[w+7]==="P"&&b[w+8]==="E"){w=w+9;let E=1,L=!1,F=!1,Q=!1,K="";for(;w<b.length;w++)if(b[w]==="<"){if(L&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="N"&&b[w+4]==="T"&&b[w+5]==="I"&&b[w+6]==="T"&&b[w+7]==="Y")w+=7,F=!0;else if(L&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="L"&&b[w+4]==="E"&&b[w+5]==="M"&&b[w+6]==="E"&&b[w+7]==="N"&&b[w+8]==="T")w+=8;else if(b[w+1]==="!"&&b[w+2]==="-"&&b[w+3]==="-")Q=!0;else throw new Error("Invalid DOCTYPE");E++,K=""}else if(b[w]===">"){if(Q)if(b[w-1]==="-"&&b[w-2]==="-")Q=!1;else throw new Error("Invalid XML comment in DOCTYPE");else F&&(l(K,A),F=!1);if(E--,E===0)break}else b[w]==="["?L=!0:K+=b[w];if(E!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:A,i:w}}const y=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(b,w){const A=y.exec(b);A&&(w[A[1]]={regx:RegExp(`&${A[1]};`,"g"),val:A[3]})}a.exports=d},{}],9:[function(i,a,c){const d={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,b){return b},attributeValueProcessor:function(l,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},y=function(l){return Object.assign({},d,l)};c.buildOptions=y,c.defaultOptions=d},{}],10:[function(i,a,c){const d=i("../util"),y=i("./xmlNode"),l=i("./DocTypeReader"),b=i("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,d.nameRegexp);class w{constructor(Z){this.options=Z,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=A,this.parseXml=K,this.parseTextData=E,this.resolveNameSpace=L,this.buildAttributesMap=Q,this.isItStopNode=V,this.replaceEntitiesValue=pe,this.readStopNodeData=N,this.saveTextToParentTag=G}}function A(M){const Z=Object.keys(M);for(let q=0;q<Z.length;q++){const J=Z[q];this.lastEntities[J]={regex:new RegExp("&"+J+";","g"),val:M[J]}}}function E(M,Z,q,J,ye,xe,be){if(M!==void 0&&(this.options.trimValues&&!J&&(M=M.trim()),M.length>0)){be||(M=this.replaceEntitiesValue(M));const te=this.options.tagValueProcessor(Z,M,q,ye,xe);return te==null?M:typeof te!=typeof M||te!==M?te:this.options.trimValues?S(M,this.options.parseTagValue,this.options.numberParseOptions):M.trim()===M?S(M,this.options.parseTagValue,this.options.numberParseOptions):M}}function L(M){if(this.options.removeNSPrefix){const Z=M.split(":"),q=M.charAt(0)==="/"?"/":"";if(Z[0]==="xmlns")return"";Z.length===2&&(M=q+Z[1])}return M}const F=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Q(M,Z){if(!this.options.ignoreAttributes&&typeof M=="string"){const q=d.getAllMatches(M,F),J=q.length,ye={};for(let xe=0;xe<J;xe++){const be=this.resolveNameSpace(q[xe][1]);let te=q[xe][4];const le=this.options.attributeNamePrefix+be;if(be.length)if(te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const ie=this.options.attributeValueProcessor(be,te,Z);ie==null?ye[le]=te:typeof ie!=typeof te||ie!==te?ye[le]=ie:ye[le]=S(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ye[le]=!0)}if(!Object.keys(ye).length)return;if(this.options.attributesGroupName){const xe={};return xe[this.options.attributesGroupName]=ye,xe}return ye}}const K=function(M){M=M.replace(/\r\n?/g,`
`);const Z=new y("!xml");let q=Z,J="",ye="";for(let xe=0;xe<M.length;xe++)if(M[xe]==="<")if(M[xe+1]==="/"){const te=oe(M,">",xe,"Closing Tag is not closed.");let le=M.substring(xe+2,te).trim();if(this.options.removeNSPrefix){const ie=le.indexOf(":");ie!==-1&&(le=le.substr(ie+1))}q&&(J=this.saveTextToParentTag(J,q,ye)),ye=ye.substr(0,ye.lastIndexOf(".")),q=this.tagsNodeStack.pop(),J="",xe=te}else if(M[xe+1]==="?"){let te=W(M,xe,!1,"?>");if(!te)throw new Error("Pi Tag is not closed.");if(J=this.saveTextToParentTag(J,q,ye),!(this.options.ignoreDeclaration&&te.tagName==="?xml"||this.options.ignorePiTags)){const le=new y(te.tagName);le.add(this.options.textNodeName,""),te.tagName!==te.tagExp&&te.attrExpPresent&&(le[":@"]=this.buildAttributesMap(te.tagExp,ye)),q.addChild(le)}xe=te.closeIndex+1}else if(M.substr(xe+1,3)==="!--"){const te=oe(M,"-->",xe+4,"Comment is not closed.");if(this.options.commentPropName){const le=M.substring(xe+4,te-2);J=this.saveTextToParentTag(J,q,ye),q.add(this.options.commentPropName,[{[this.options.textNodeName]:le}])}xe=te}else if(M.substr(xe+1,2)==="!D"){const te=l(M,xe);this.docTypeEntities=te.entities,xe=te.i}else if(M.substr(xe+1,2)==="!["){const te=oe(M,"]]>",xe,"CDATA is not closed.")-2,le=M.substring(xe+9,te);if(J=this.saveTextToParentTag(J,q,ye),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:le}]);else{let ie=this.parseTextData(le,q.tagname,ye,!0,!1,!0);ie||(ie=""),q.add(this.options.textNodeName,ie)}xe=te+2}else{let te=W(M,xe,this.options.removeNSPrefix),le=te.tagName,ie=te.tagExp,ne=te.attrExpPresent,me=te.closeIndex;q&&J&&q.tagname!=="!xml"&&(J=this.saveTextToParentTag(J,q,ye,!1)),le!==Z.tagname&&(ye+=ye?"."+le:le);const Ee=q;if(Ee&&this.options.unpairedTags.indexOf(Ee.tagname)!==-1&&(q=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,ye,le)){let we="";if(ie.length>0&&ie.lastIndexOf("/")===ie.length-1)xe=te.closeIndex;else if(this.options.unpairedTags.indexOf(le)!==-1)xe=te.closeIndex;else{const Le=this.readStopNodeData(M,le,me+1);if(!Le)throw new Error(`Unexpected end of ${le}`);xe=Le.i,we=Le.tagContent}const Ue=new y(le);le!==ie&&ne&&(Ue[":@"]=this.buildAttributesMap(ie,ye)),we&&(we=this.parseTextData(we,le,ye,!0,ne,!0,!0)),ye=ye.substr(0,ye.lastIndexOf(".")),Ue.add(this.options.textNodeName,we),q.addChild(Ue)}else{if(ie.length>0&&ie.lastIndexOf("/")===ie.length-1){le[le.length-1]==="/"?(le=le.substr(0,le.length-1),ie=le):ie=ie.substr(0,ie.length-1);const we=new y(le);le!==ie&&ne&&(we[":@"]=this.buildAttributesMap(ie,ye)),ye=ye.substr(0,ye.lastIndexOf(".")),q.addChild(we)}else{const we=new y(le);this.tagsNodeStack.push(q),le!==ie&&ne&&(we[":@"]=this.buildAttributesMap(ie,ye)),q.addChild(we),q=we}J="",xe=me}}else J+=M[xe];return Z.child},pe=function(M){if(this.options.processEntities){for(let Z in this.docTypeEntities){const q=this.docTypeEntities[Z];M=M.replace(q.regx,q.val)}for(let Z in this.lastEntities){const q=this.lastEntities[Z];M=M.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let Z in this.htmlEntities){const q=this.htmlEntities[Z];M=M.replace(q.regex,q.val)}}return M};function G(M,Z,q,J){return M&&(J===void 0&&(J=Object.keys(Z.child).length===0),M=this.parseTextData(M,Z.tagname,q,!1,Z[":@"]?Object.keys(Z[":@"]).length!==0:!1,J),M!==void 0&&M!==""&&Z.add(this.options.textNodeName,M),M=""),M}function V(M,Z,q){const J="*."+q;for(const ye in M){const xe=M[ye];if(J===xe||Z===xe)return!0}return!1}function U(M,Z,q=">"){let J,ye="";for(let xe=Z;xe<M.length;xe++){let be=M[xe];if(J)be===J&&(J="");else if(be==='"'||be==="'")J=be;else if(be===q[0])if(q[1]){if(M[xe+1]===q[1])return{data:ye,index:xe}}else return{data:ye,index:xe};else be==="	"&&(be=" ");ye+=be}}function oe(M,Z,q,J){const ye=M.indexOf(Z,q);if(ye===-1)throw new Error(J);return ye+Z.length-1}function W(M,Z,q,J=">"){const ye=U(M,Z+1,J);if(!ye)return;let xe=ye.data;const be=ye.index,te=xe.search(/\s/);let le=xe,ie=!0;if(te!==-1&&(le=xe.substr(0,te).replace(/\s\s*$/,""),xe=xe.substr(te+1)),q){const ne=le.indexOf(":");ne!==-1&&(le=le.substr(ne+1),ie=le!==ye.data.substr(ne+1))}return{tagName:le,tagExp:xe,closeIndex:be,attrExpPresent:ie}}function N(M,Z,q){const J=q;for(;q<M.length;q++)if(M[q]==="<"&&M[q+1]==="/"){const ye=oe(M,">",q,`${Z} is not closed`);if(M.substring(q+2,ye).trim()===Z)return{tagContent:M.substring(J,q),i:ye};q=ye}}function S(M,Z,q){if(Z&&typeof M=="string"){const J=M.trim();return J==="true"?!0:J==="false"?!1:b(M,q)}else return d.isExist(M)?M:""}a.exports=w},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:d}=i("./OptionsBuilder"),y=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),b=i("../validator");class w{constructor(E){this.externalEntities={},this.options=d(E)}parse(E,L){if(typeof E!="string")if(E.toString)E=E.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(L){L===!0&&(L={});const K=b.validate(E,L);if(K!==!0)throw Error(`${K.err.msg}:${K.err.line}:${K.err.col}`)}const F=new y(this.options);F.addExternalEntities(this.externalEntities);const Q=F.parseXml(E);return this.options.preserveOrder||Q===void 0?Q:l(Q,this.options)}addEntity(E,L){if(L.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(E.indexOf("&")!==-1||E.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[E]=L}}a.exports=w},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function d(A,E){return y(A,E)}function y(A,E,L){let F;const Q={};for(let K=0;K<A.length;K++){const pe=A[K],G=l(pe);let V="";if(L===void 0?V=G:V=L+"."+G,G===E.textNodeName)F===void 0?F=pe[G]:F+=""+pe[G];else{if(G===void 0)continue;if(pe[G]){let U=y(pe[G],E,V);const oe=w(U,E);pe[":@"]?b(U,pe[":@"],V,E):Object.keys(U).length===1&&U[E.textNodeName]!==void 0&&!E.alwaysCreateTextNode?U=U[E.textNodeName]:Object.keys(U).length===0&&(E.alwaysCreateTextNode?U[E.textNodeName]="":U=""),Q[G]!==void 0?(Array.isArray(Q[G])||(Q[G]=[Q[G]]),Q[G].push(U)):E.isArray(G,V,oe)?Q[G]=[U]:Q[G]=U}}}return typeof F=="string"?F.length>0&&(Q[E.textNodeName]=F):F!==void 0&&(Q[E.textNodeName]=F),Q}function l(A){const E=Object.keys(A);for(let L=0;L<E.length;L++){const F=E[L];if(F!==":@")return F}}function b(A,E,L,F){if(E){const Q=Object.keys(E),K=Q.length;for(let pe=0;pe<K;pe++){const G=Q[pe];F.isArray(G,L+"."+G,!0,!0)?A[G]=[E[G]]:A[G]=E[G]}}}function w(A,E){const L=Object.keys(A).length;return!!(L===0||L===1&&A[E.textNodeName])}c.prettify=d},{}],13:[function(i,a,c){class d{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,b){this.child.push({[l]:b})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,":@":l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=d},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,y,l,b,w){var A,E,L=w*8-b-1,F=(1<<L)-1,Q=F>>1,K=-7,pe=l?w-1:0,G=l?-1:1,V=d[y+pe];for(pe+=G,A=V&(1<<-K)-1,V>>=-K,K+=L;K>0;A=A*256+d[y+pe],pe+=G,K-=8);for(E=A&(1<<-K)-1,A>>=-K,K+=b;K>0;E=E*256+d[y+pe],pe+=G,K-=8);if(A===0)A=1-Q;else{if(A===F)return E?NaN:(V?-1:1)*(1/0);E=E+Math.pow(2,b),A=A-Q}return(V?-1:1)*E*Math.pow(2,A-b)},c.write=function(d,y,l,b,w,A){var E,L,F,Q=A*8-w-1,K=(1<<Q)-1,pe=K>>1,G=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=b?0:A-1,U=b?1:-1,oe=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(L=isNaN(y)?1:0,E=K):(E=Math.floor(Math.log(y)/Math.LN2),y*(F=Math.pow(2,-E))<1&&(E--,F*=2),E+pe>=1?y+=G/F:y+=G*Math.pow(2,1-pe),y*F>=2&&(E++,F/=2),E+pe>=K?(L=0,E=K):E+pe>=1?(L=(y*F-1)*Math.pow(2,w),E=E+pe):(L=y*Math.pow(2,pe-1)*Math.pow(2,w),E=0));w>=8;d[l+V]=L&255,V+=U,L/=256,w-=8);for(E=E<<w|L,Q+=w;Q>0;d[l+V]=E&255,V+=U,E/=256,Q-=8);d[l+V-U]|=oe*128}},{}],15:[function(i,a,c){const d=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(A,E={}){if(E=Object.assign({},l,E),!A||typeof A!="string")return A;let L=A.trim();if(E.skipLike!==void 0&&E.skipLike.test(L))return A;if(E.hex&&d.test(L))return Number.parseInt(L,16);{const F=y.exec(L);if(F){const Q=F[1],K=F[2];let pe=w(F[3]);const G=F[4]||F[6];if(!E.leadingZeros&&K.length>0&&Q&&L[2]!==".")return A;if(!E.leadingZeros&&K.length>0&&!Q&&L[1]!==".")return A;{const V=Number(L),U=""+V;return U.search(/[eE]/)!==-1||G?E.eNotation?V:A:L.indexOf(".")!==-1?U==="0"&&pe===""||U===pe||Q&&U==="-"+pe?V:A:K?pe===U||Q+pe===U?V:A:L===U||L===Q+U?V:A}}else return A}}function w(A){return A&&A.indexOf(".")!==-1&&(A=A.replace(/0+$/,""),A==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substr(0,A.length-1))),A}a.exports=b},{}],16:[function(i,a,c){(function(d){(function(){var y=this&&this.__awaiter||function(L,F,Q,K){function pe(G){return G instanceof Q?G:new Q(function(V){V(G)})}return new(Q||(Q=Promise))(function(G,V){function U(N){try{W(K.next(N))}catch(S){V(S)}}function oe(N){try{W(K.throw(N))}catch(S){V(S)}}function W(N){N.done?G(N.value):pe(N.value).then(U,oe)}W((K=K.apply(L,F||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const l=i("../auth"),b=i("../config"),w=i("./_xml"),A=L=>typeof btoa>"u"?d.from(L,"binary").toString("base64"):btoa(L);function E(L,F,Q){return y(this,void 0,void 0,function*(){const{apiUrl:K,authHeader:pe,basicAuth:G,userAgent:V}=(0,b.getConfig)(),U=G&&`Basic ${A(`${G.username}:${G.password}`)}`,oe=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let W=new URLSearchParams(F).toString();W&&(W=`?${W}`);const N=yield fetch(`${K}/api${L}${W}`,Object.assign(Object.assign({},Q),{headers:Object.assign({Authorization:pe||U||oe||"","User-Agent":V},Q==null?void 0:Q.headers)})),S=N.headers.get("Content-Type");if(S!=null&&S.startsWith("application/xml")){const M=yield N.text();return yield w.xmlParser.parse(M)}if(S!=null&&S.startsWith("application/json"))return N.json();if(N.ok)return yield N.text();throw new Error(`OSM API: ${yield N.text()}`)})}c.osmFetch=E}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const d=i("fast-xml-parser");c.xmlParser=new d.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:y=>y!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const d=i("fast-xml-parser"),y=new d.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(A){return y.build({osm:{changeset:{tag:Object.entries(A).map(([E,L])=>({$k:E,$v:L}))}}})}c.createChangesetMetaXml=l;const b=(A,E,L)=>E.reduce((F,Q)=>{const K={$id:Q.id,$version:L?0:Q.version,$changeset:A,tag:Object.entries(Q.tags||{}).map(([pe,G])=>({$k:pe,$v:G}))};switch(Q.type){case"node":{const pe=Object.assign(Object.assign({},K),{$lat:Q.lat,$lon:Q.lon});return Object.assign(Object.assign({},F),{node:[...F.node,pe]})}case"way":{if(!Q.nodes)throw new Error("Way has no nodes");const pe=Object.assign(Object.assign({},K),{nd:Q.nodes.map(G=>({$ref:G}))});return Object.assign(Object.assign({},F),{way:[...F.way,pe]})}case"relation":{if(!Q.members)throw new Error("Relation has no members");const pe=Object.assign(Object.assign({},K),{member:Q.members.map(G=>({$type:G.type,$ref:G.ref,$role:G.role}))});return Object.assign(Object.assign({},F),{relation:[...F.relation,pe]})}default:return F}},{node:[],way:[],relation:[]});function w(A,E,L){return y.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},L),{create:[b(A,E.create,!0)],modify:[b(A,E.modify)],delete:[Object.assign({"$if-unused":!0},b(A,E.delete))]})})}c.createOsmChangeXml=w},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const d=i("../_xml");function y(A){return{changeset:+A.$.changeset,id:+A.$.id,timestamp:A.$.timestamp,uid:+A.$.uid,user:A.$.user,version:+A.$.version,tags:A.tag?Object.fromEntries(A.tag.map(E=>[E.$.k,E.$.v])):void 0}}const l=A=>{const E=[];if(A.node){const L=A.node.map(F=>Object.assign(Object.assign({type:"node"},y(F)),{lat:+F.$.lat,lon:+F.$.lon}));E.push(...L)}if(A.way){const L=A.way.map(F=>{var Q;return Object.assign(Object.assign({type:"way"},y(F)),{nodes:((Q=F.nd)===null||Q===void 0?void 0:Q.map(K=>+K.$.ref))||[]})});E.push(...L)}if(A.relation){const L=A.relation.map(F=>{var Q;return Object.assign(Object.assign({type:"relation"},y(F)),{members:((Q=F.member)===null||Q===void 0?void 0:Q.map(K=>({ref:+K.$.ref,role:K.$.role,type:K.$.type})))||[]})});E.push(...L)}return E};function b(A){var E,L,F;return{create:((E=A.osmChange[0].create)===null||E===void 0?void 0:E.flatMap(l))||[],modify:((L=A.osmChange[0].modify)===null||L===void 0?void 0:L.flatMap(l))||[],delete:((F=A.osmChange[0].delete)===null||F===void 0?void 0:F.flatMap(l))||[]}}c.parseOsmChangeJson=b;function w(A){const E=d.xmlParser.parse(A);return b(E)}c.parseOsmChangeXml=w},{"../_xml":17}],20:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,E){function L(F){return F instanceof A?F:new A(function(Q){Q(F)})}return new(A||(A=Promise))(function(F,Q){function K(V){try{G(E.next(V))}catch(U){Q(U)}}function pe(V){try{G(E.throw(V))}catch(U){Q(U)}}function G(V){V.done?F(V.value):L(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const y=i("../_osmFetch");function l(b,w){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(w)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,E,L){function F(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(U){try{V(L.next(U))}catch(oe){K(oe)}}function G(U){try{V(L.throw(U))}catch(oe){K(oe)}}function V(U){U.done?Q(U.value):F(U.value).then(pe,G)}V((L=L.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const y=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function b(w){return d(this,void 0,void 0,function*(){const A=yield(0,y.osmFetch)(`/0.6/changeset/${w}/download`);return(0,l.parseOsmChangeJson)(A)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var d=this&&this.__awaiter||function(E,L,F,Q){function K(pe){return pe instanceof F?pe:new F(function(G){G(pe)})}return new(F||(F=Promise))(function(pe,G){function V(W){try{oe(Q.next(W))}catch(N){G(N)}}function U(W){try{oe(Q.throw(W))}catch(N){G(N)}}function oe(W){W.done?pe(W.value):K(W.value).then(V,U)}oe((Q=Q.apply(E,L||[])).next())})},y=this&&this.__rest||function(E,L){var F={};for(var Q in E)Object.prototype.hasOwnProperty.call(E,Q)&&L.indexOf(Q)<0&&(F[Q]=E[Q]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,Q=Object.getOwnPropertySymbols(E);K<Q.length;K++)L.indexOf(Q[K])<0&&Object.prototype.propertyIsEnumerable.call(E,Q[K])&&(F[Q[K]]=E[Q[K]]);return F};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const l=i("../_osmFetch"),b=E=>{var L;return{id:+E.$.id,created_at:new Date(E.$.created_at),closed_at:new Date(E.$.closed_at),open:E.$.open==="true",comments_count:+E.$.comments_count,changes_count:+E.$.changes_count,min_lat:+E.$.min_lat,min_lon:+E.$.min_lon,max_lat:+E.$.max_lat,max_lon:+E.$.max_lon,uid:+E.$.uid,user:E.$.user,tags:Object.fromEntries(E.tag.map(F=>[F.$.k,F.$.v])),discussion:(L=E.discussion)===null||L===void 0?void 0:L[0].comment.map(F=>({date:new Date(F.$.date),user:F.$.user,uid:F.$.uid,text:F.text[0]}))}};function w(E){var L;return d(this,void 0,void 0,function*(){const{only:F}=E,Q=y(E,["only"]);return((L=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},F&&{[F]:!0}),Q))).osm[0].changeset)===null||L===void 0?void 0:L.map(b))||[]})}c.listChangesets=w;function A(E,L=!0){return d(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${E}`,{include_discussion:L})).osm[0].changeset.map(b)[0]})}c.getChangeset=A},{"../_osmFetch":16}],23:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(w,A,E,L){L===void 0&&(L=E);var F=Object.getOwnPropertyDescriptor(A,E);(!F||("get"in F?!A.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(w,L,F)}:function(w,A,E,L){L===void 0&&(L=E),w[L]=A[E]}),y=this&&this.__exportStar||function(w,A){for(var E in w)E!=="default"&&!Object.prototype.hasOwnProperty.call(A,E)&&d(A,w,E)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,y(i("./createChangesetComment"),c),y(i("./getChangesetDiff"),c),y(i("./getChangesets"),c),y(i("./uploadChangeset"),c);var l=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,E,L){function F(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(U){try{V(L.next(U))}catch(oe){K(oe)}}function G(U){try{V(L.throw(U))}catch(oe){K(oe)}}function V(U){U.done?Q(U.value):F(U.value).then(pe,G)}V((L=L.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const y=i("../_osmFetch"),l=i("./_createOsmChangeXml");function b(w,A){return d(this,void 0,void 0,function*(){const E=(0,l.createChangesetMetaXml)(w),L=+(yield(0,y.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:E,headers:{"content-type":"application/xml; charset=utf-8"}})),F=(0,l.createOsmChangeXml)(L,A);return yield(0,y.osmFetch)(`/0.6/changeset/${L}/upload`,void 0,{method:"POST",body:F,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,y.osmFetch)(`/0.6/changeset/${L}/close`,void 0,{method:"PUT"}),+L})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,E){function L(F){return F instanceof A?F:new A(function(Q){Q(F)})}return new(A||(A=Promise))(function(F,Q){function K(V){try{G(E.next(V))}catch(U){Q(U)}}function pe(V){try{G(E.throw(V))}catch(U){Q(U)}}function G(V){V.done?F(V.value):L(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const y=i("./_osmFetch");function l(){return d(this,void 0,void 0,function*(){const b=yield(0,y.osmFetch)("/capabilities");return{limits:{maxArea:+b.osm[0].api[0].area[0].$.maximum,maxNoteArea:+b.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+b.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+b.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+b.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+b.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:b.osm[0].policy[0].imagery[0].blacklist.map(A=>A.$.regex)}}})}c.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,a,c){var d=this&&this.__awaiter||function(F,Q,K,pe){function G(V){return V instanceof K?V:new K(function(U){U(V)})}return new(K||(K=Promise))(function(V,U){function oe(S){try{N(pe.next(S))}catch(M){U(M)}}function W(S){try{N(pe.throw(S))}catch(M){U(M)}}function N(S){S.done?V(S.value):G(S.value).then(oe,W)}N((pe=pe.apply(F,Q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const y=i("./_osmFetch");function l(F,Q,K){return d(this,void 0,void 0,function*(){const pe=K&&F!=="node"?"/full":"";return(yield(0,y.osmFetch)(`/0.6/${F}/${Q}${pe}.json`)).elements})}c.getFeature=l;function b(F,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${F}s.json?${F}s=${Q.join(",")}`)).elements})}c.getFeatures=b;function w(F,Q,K){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${F}/${Q}/${K}.json`)).elements[0]})}c.getFeatureAtVersion=w;function A(F,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${F}/${Q}/history.json`)).elements})}c.getFeatureHistory=A;function E(F){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/node/${F}/ways.json`)).elements})}c.getWaysForNode=E;function L(F,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${F}/${Q}/relations.json`)).elements})}c.getRelationsForElement=L},{"./_osmFetch":16}],27:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,E){function L(F){return F instanceof A?F:new A(function(Q){Q(F)})}return new(A||(A=Promise))(function(F,Q){function K(V){try{G(E.next(V))}catch(U){Q(U)}}function pe(V){try{G(E.throw(V))}catch(U){Q(U)}}function G(V){V.done?F(V.value):L(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const y=i("./_osmFetch");function l(b){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=l},{"./_osmFetch":16}],28:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,E){function L(F){return F instanceof A?F:new A(function(Q){Q(F)})}return new(A||(A=Promise))(function(F,Q){function K(V){try{G(E.next(V))}catch(U){Q(U)}}function pe(V){try{G(E.throw(V))}catch(U){Q(U)}}function G(V){V.done?F(V.value):L(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const y=i("./changesets");function l(b){return d(this,void 0,void 0,function*(){const w=yield(0,y.listChangesets)({display_name:b});if(!w.length)throw new Error("Could not get uid because the user has never edited the map");return w[0].uid})}c.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,E,L){function F(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(U){try{V(L.next(U))}catch(oe){K(oe)}}function G(U){try{V(L.throw(U))}catch(oe){K(oe)}}function V(U){U.done?Q(U.value):F(U.value).then(pe,G)}V((L=L.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const y=i("./_osmFetch");function l(w){return d(this,void 0,void 0,function*(){const A=yield(0,y.osmFetch)(`/0.6/user/${w==="me"?"details":w}.json`);return Object.assign(Object.assign({},A.user),{account_created:new Date(A.user.account_created)})})}c.getUser=l;function b(w){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/users",{users:w})).users.map(E=>Object.assign(Object.assign({},E),{account_created:new Date(E.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,E)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./notes"),c),y(i("./getCapabilities"),c),y(i("./getFeature"),c),y(i("./getMapData"),c),y(i("./getUIdFromDisplayName"),c),y(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var d=this&&this.__awaiter||function(L,F,Q,K){function pe(G){return G instanceof Q?G:new Q(function(V){V(G)})}return new(Q||(Q=Promise))(function(G,V){function U(N){try{W(K.next(N))}catch(S){V(S)}}function oe(N){try{W(K.throw(N))}catch(S){V(S)}}function W(N){N.done?G(N.value):pe(N.value).then(U,oe)}W((K=K.apply(L,F||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const y=i("../_osmFetch"),l=L=>{const[F,Q]=L.geometry.coordinates;return Object.assign(Object.assign({},L.properties),{location:{lat:Q,lng:F}})};function b(L,F){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/notes${F?"/search":""}.json`,L)).features.map(l)})}function w(L){return b(L,!0)}c.getNotesForQuery=w;function A(L){return b({bbox:L},!1)}c.getNotesForArea=A;function E(L){return d(this,void 0,void 0,function*(){const F=yield(0,y.osmFetch)(`/0.6/notes/${L}.json`);return l(F)})}c.getNote=E},{"../_osmFetch":16}],32:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,E)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./getNotes"),c),y(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var d=this&&this.__awaiter||function(A,E,L,F){function Q(K){return K instanceof L?K:new L(function(pe){pe(K)})}return new(L||(L=Promise))(function(K,pe){function G(oe){try{U(F.next(oe))}catch(W){pe(W)}}function V(oe){try{U(F.throw(oe))}catch(W){pe(W)}}function U(oe){oe.done?K(oe.value):Q(oe.value).then(G,V)}U((F=F.apply(A,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const y=i("../_osmFetch");function l(A,E,L){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)("/0.6/notes",{lat:A,lon:E,text:L})})}c.createNote=l;function b(A,E){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${A}/comment`,{text:E})})}c.commentOnNote=b;function w(A,E){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${A}/reopen`,{text:E})})}c.reopenNote=w},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function d(y){let l=!1;return new Promise((b,w)=>{const[A,E]=[600,550],L=Object.entries({width:A,height:E,left:window.screen.width/2-A/2,top:window.screen.height/2-E/2}).map(([K,pe])=>`${K}=${pe}`).join(","),F=window.open("about:blank","oauth_window",L);if(!F)throw new Error("Popup was blocked");F.location=y,window.authComplete=K=>{b(K),l=!0};const Q=setInterval(()=>{F.closed&&(l||w(new Error("Cancelled")),clearInterval(Q))},500)})}c.createPopup=d},{}],35:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,E){function L(F){return F instanceof A?F:new A(function(Q){Q(F)})}return new(A||(A=Promise))(function(F,Q){function K(V){try{G(E.next(V))}catch(U){Q(U)}}function pe(V){try{G(E.throw(V))}catch(U){Q(U)}}function G(V){V.done?F(V.value):L(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const y=i("./helpers");function l(b,{options:w,pkceVerifier:A,state:E}){return d(this,void 0,void 0,function*(){const L=new URL(b).searchParams,F=L.get("error_description"),Q=L.get("code"),K=L.get("state");if(F)throw new Error(F);if(!Q)throw new Error("No code in OAuth response");if(!A||!E)throw new Error("No login in progress");if(E!==K)throw new Error("State Mismatch");const pe={grant_type:"authorization_code",code:Q,redirect_uri:w.redirectUrl,client_id:w.clientId,code_verifier:A},G=`${(0,y.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(pe).toString()}`,U=yield(yield fetch(G,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in U)throw new Error(U.error_description);const oe={issuedAt:new Date(U.created_at*1e3).toISOString(),accessToken:U.access_token,scopes:U.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(oe)),delete window.authComplete,oe})}c.exchangeCode=l},{"./helpers":36}],36:[function(i,a,c){var d=this&&this.__awaiter||function(A,E,L,F){function Q(K){return K instanceof L?K:new L(function(pe){pe(K)})}return new(L||(L=Promise))(function(K,pe){function G(oe){try{U(F.next(oe))}catch(W){pe(W)}}function V(oe){try{U(F.throw(oe))}catch(W){pe(W)}}function U(oe){oe.done?K(oe.value):Q(oe.value).then(G,V)}U((F=F.apply(A,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const y=i("../config");function l(A){return d(this,void 0,void 0,function*(){const E=new TextEncoder().encode(A),L=yield window.crypto.subtle.digest("SHA-256",E);return btoa(String.fromCharCode(...new Uint8Array(L))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=l;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(A=>`0${A.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function w(){let A=(0,y.getConfig)().apiUrl;return A==="https://api.openstreetmap.org"&&(A="https://www.openstreetmap.org"),A}c.getOAuthBaseUrl=w},{"../config":39}],37:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,E)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var d=this&&this.__awaiter||function(F,Q,K,pe){function G(V){return V instanceof K?V:new K(function(U){U(V)})}return new(K||(K=Promise))(function(V,U){function oe(S){try{N(pe.next(S))}catch(M){U(M)}}function W(S){try{N(pe.throw(S))}catch(M){U(M)}}function N(S){S.done?V(S.value):G(S.value).then(oe,W)}N((pe=pe.apply(F,Q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const y=i("./createPopup"),l=i("./exchangeCode"),b=i("./helpers");function w(F){return d(this,void 0,void 0,function*(){if(!F.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!F.clientId)throw new Error("You must include the 'clientId' option");if(!F.scopes)throw new Error("You must include the 'scopes' option");const Q=(0,b.getRandomString)(),K=(0,b.getRandomString)(),pe=yield(0,b.sha256)(K),G={scope:F.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:Q,redirect_uri:F.redirectUrl,client_id:F.clientId,code_challenge_method:"S256",code_challenge:pe},V=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(G).toString()}`,U={state:Q,pkceVerifier:K,options:F};if(F.mode==="popup"){const oe=yield(0,y.createPopup)(V);return(0,l.exchangeCode)(oe,U)}if(F.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(U)),window.location.replace(V);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=w,c.authReady=(()=>d(void 0,void 0,void 0,function*(){var F;if(typeof window>"u")return;const Q=window.location.href,K=localStorage.getItem("__osmAuthTemp");if(new URL(Q).searchParams.get("code")){if(!((F=window.opener)===null||F===void 0)&&F.authComplete)window.opener.authComplete(Q),window.close();else if(K)try{const pe=JSON.parse(K);yield(0,l.exchangeCode)(Q,pe),localStorage.removeItem("__osmAuthTemp")}catch(pe){console.error("OSM Auth Error",pe)}}}))();const A=()=>{try{const F=localStorage.getItem("__osmAuth");return F?JSON.parse(F).accessToken:void 0}catch{return}};c.getAuthToken=A;const E=()=>!!(0,c.getAuthToken)();c.isLoggedIn=E;function L(){localStorage.removeItem("__osmAuth")}c.logout=L},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const d={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},y=()=>d;c.getConfig=y;function l(b){Object.assign(d,b)}c.configure=l},{}],40:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,E)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),i("./polyfill"),y(i("./api"),c),y(i("./auth"),c),y(i("./config"),c),y(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./polyfill":41,"./types":45}],41:[function(i,a,c){if(typeof fetch>"u")try{i("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],42:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],43:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],44:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],45:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,E)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./features"),c),y(i("./general"),c),y(i("./notes"),c),y(i("./user"),c)},{"./changesets":42,"./features":43,"./general":44,"./notes":46,"./user":47}],46:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],47:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}]},{},[40])(40)})})(jC);var js=jC.exports;const DC=()=>{const[e,t]=_t.useState(!1);_t.useEffect(()=>{t(js.isLoggedIn())},[]);const i=_t.useCallback(()=>{(async()=>(await js.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(js.isLoggedIn()),window.location.reload()))()},[]),a=_t.useCallback(()=>{(async()=>(js.logout(),t(!1)))()},[]);return dt.jsx(dt.Fragment,{children:e?dt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):dt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},u5=()=>{const[e,t]=_t.useState(!1),[i,a]=_t.useState(void 0);return _t.useEffect(()=>{t(js.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await js.getUser("me");a(c)})()},[e]),dt.jsx(dt.Fragment,{children:i?dt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):dt.jsx("img",{})})},c5=()=>{const[e,t]=_t.useState(!1),[i,a]=_t.useState(void 0);return _t.useEffect(()=>{t(js.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await js.getUser("me");a(c)})()},[e]),dt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[dt.jsxs("div",{children:[dt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?dt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):dt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),dt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[dt.jsx("div",{children:dt.jsx(u5,{})}),dt.jsx("div",{children:dt.jsx(DC,{})})]})]})},BC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return dt.jsxs(dt.Fragment,{children:[dt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",dt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},h5=({feature:e})=>dt.jsx(dt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return dt.jsxs("div",{className:t,children:[dt.jsx("span",{className:"underline",children:t})," = ",dt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function zf(e,t,i){return parseInt(e.substr(t,i),16)}function NC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function f0(e,t,i){return i=i<0?i+6:i>6?i-6:i,NC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function f5(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],d=e[3],y=e[4]||"";t="#"+a+a+c+c+d+d+y+y}return(i==7||i>8)&&(t=e),t}}function d5(e,t,i){let a;if(t==0){const c=NC(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,d=i*2-c;a=f0(d,c,e*6+2)+f0(d,c,e*6)+f0(d,c,e*6-2)}return"#"+a}function Af(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,d5(e,t,i)}const p5=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},C2={V:"jdenticon_config",n:"config"};var m5={};function g5(e,t){const i=typeof e=="object"&&e||m5[C2.n]||p5[C2.V]||{},a=i.lightness||{},c=i.saturation||{},d="color"in c?c.color:c,y=c.grayscale,l=i.backColor,b=i.padding;function w(E,L){let F=a[E];return F&&F.length>1||(F=L),function(Q){return Q=F[0]+Q*(F[1]-F[0]),Q<0?0:Q>1?1:Q}}function A(E){const L=i.hues;let F;return L&&L.length>0&&(F=L[0|.999*E*L.length]),typeof F=="number"?(F/360%1+1)%1:E}return{W:A,o:typeof d=="number"?d:.5,D:typeof y=="number"?y:0,p:w("color",[.4,.8]),F:w("grayscale",[.3,.9]),G:f5(l),X:typeof e=="number"?e:typeof b=="number"?b:t}}let Mp=class{constructor(t,i){this.x=t,this.y=i}};class UC{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const d=this.q+this.H,y=this.t+this.H,l=this.Y;return l===1?new Mp(d-i-(c||0),this.t+t):l===2?new Mp(d-t-(a||0),y-i-(c||0)):l===3?new Mp(this.q+i,y-t-(a||0)):new Mp(this.q+t,this.t+i)}}const y5=new UC(0,0,0,0);class v5{constructor(t){this.J=t,this.u=y5}g(t,i){const a=i?-2:2,c=[];for(let d=i?t.length-2:0;d<t.length&&d>=0;d+=a)c.push(this.u.I(t[d],t[d+1]));this.J.g(c)}h(t,i,a,c){const d=this.u.I(t,i,a,a);this.J.h(d,a,c)}i(t,i,a,c,d){this.g([t,i,t+a,i,t+a,i+c,t,i+c],d)}j(t,i,a,c,d,y){const l=[t+a,i,t+a,i+c,t,i+c,t,i];l.splice((d||0)%4*2,2),this.g(l,y)}K(t,i,a,c,d){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],d)}}function _5(e,t,i,a){e=e%14;let c,d,y,l,b,w;e?e==1?(y=0|i*.5,l=0|i*.8,t.j(i-y,0,y,l,2)):e==2?(y=0|i/3,t.i(y,y,i-y,i-y)):e==3?(b=i*.1,w=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(w,w,i-b-w,i-b-w)):e==4?(d=0|i*.15,y=0|i*.5,t.h(i-y-d,i-y-d,y)):e==5?(b=i*.1,w=b*4,w>3&&(w=0|w),t.i(0,0,i,i),t.g([w,w,i-b,w,w+(i-w-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,w=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(w,w,i-w-b,i-w-b,!0)):e==10?(b=i*.12,w=b*3,t.i(0,0,i,i),t.h(w,w,i-b-w,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(d=i*.25,t.i(0,0,i,i),t.K(d,d,i-d,i-d,!0)):!a&&(d=i*.4,y=i*1.2,t.h(d,d,y)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function A2(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function x5(e,t){return e=t.W(e),[Af(e,t.D,t.F(0)),Af(e,t.o,t.p(.5)),Af(e,t.D,t.F(1)),Af(e,t.o,t.p(1)),Af(e,t.o,t.p(0))]}function w5(e,t,i){const a=g5(i,.08);a.G&&e.m(a.G);let c=e.k;const d=.5+c*a.X|0;c-=d*2;const y=new v5(e),l=0|c/4,b=0|d+c/2-l*2,w=0|d+c/2-l*2;function A(pe,G,V,U,oe){const W=zf(t,V,1);let N=U?zf(t,U,1):0;e.L(L[F[pe]]);for(let S=0;S<oe.length;S++)y.u=new UC(b+oe[S][0]*l,w+oe[S][1]*l,l,N++%4),G(W,y,l,S);e.M()}const E=zf(t,-7)/268435455,L=x5(E,a),F=[];let Q;function K(pe){if(pe.indexOf(Q)>=0){for(let G=0;G<pe.length;G++)if(F.indexOf(pe[G])>=0)return!0}}for(let pe=0;pe<3;pe++)Q=zf(t,8+pe,1)%L.length,(K([0,4])||K([2,3]))&&(Q=1),F.push(Q);A(0,A2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),A(1,A2,4,5,[[0,0],[3,0],[3,3],[0,3]]),A(2,_5,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function b5(e){var a=0,c=0,d=encodeURI(e)+"%80",y=[],l,b=[],w=1732584193,A=4023233417,E=~w,L=~A,F=3285377520,Q=[w,A,E,L,F],K=0,pe="";function G(V,U){return V<<U|V>>>32-U}for(;a<d.length;c++)y[c>>2]=y[c>>2]|(d[a]=="%"?parseInt(d.substring(a+1,a+=3),16):d.charCodeAt(a++))<<(3-(c&3))*8;for(l=((c+7>>6)+1)*16,y[l-1]=c*8-8;K<l;K+=16){for(a=0;a<80;a++)c=G(w,5)+F+(a<20?(A&E^~A&L)+1518500249:a<40?(A^E^L)+1859775393:a<60?(A&E^A&L^E&L)+2400959708:(A^E^L)+3395469782)+(b[a]=a<16?y[K+a]|0:G(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),F=L,L=E,E=G(A,30),A=w,w=c;Q[0]=w=Q[0]+w|0,Q[1]=A=Q[1]+A|0,Q[2]=E=Q[2]+E|0,Q[3]=L=Q[3]+L|0,Q[4]=F=Q[4]+F|0}for(a=0;a<40;a++)pe+=(Q[a>>3]>>>(7-(a&7))*4&15).toString(16);return pe}function E5(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function S5(e){return b5(e==null?"":""+e)}function Lc(e){return(e*10+.5|0)/10}class T5{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Lc(t[a].x)+" "+Lc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,d=Lc(i/2),y=Lc(i),l="a"+d+","+d+" 0 1,"+c+" ";this.v+="M"+Lc(t.x)+" "+Lc(t.y+i/2)+l+y+",0"+l+-y+",0"}}class C5{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?zf(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new T5)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const A5={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class I5{constructor(t){this.k=t,this.C='<svg xmlns="'+A5.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function P5(e,t,i){const a=new I5(t);return w5(new C5(a),E5(e)||S5(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const M5=({feature:e,size:t})=>e.properties===null?null:dt.jsx(dt.Fragment,{children:e.properties.userIconHref.length>0?dt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):dt.jsx("span",{dangerouslySetInnerHTML:{__html:P5(e.properties.user||"noname",t)}})}),k5=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?dt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var L5={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const z5=({viewState:e})=>{const[t,i]=_t.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return _t.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),dt.jsx(dt.Fragment,{children:e&&t&&dt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[dt.jsx(fa,{icon:L5,style:{padding:"0px 3px"}}),dt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var $C={};class Zi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const d=i[c],y=t+d,l=Math.abs(t)<Math.abs(d)?t-(y-d):d-(y-t);l&&(i[a++]=l),t=y}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,d,y=0;if(i>0){for(y=t[--i];i>0&&(a=y,c=t[--i],y=a+c,d=c-(y-a),!d););i>0&&(d<0&&t[i-1]<0||d>0&&t[i-1]>0)&&(c=d*2,a=y+c,c==a-y&&(y=a))}return y}}function*O5(e){for(const t of e)yield*t}function VC(e){return Array.from(O5(e))}function eh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,d=new Array(c);++a<c;)d[a]=e+a*i;return d}var dn=1e-6,xd=1e-12,Ln=Math.PI,Ur=Ln/2,Dm=Ln/4,so=Ln*2,sr=180/Ln,pn=Ln/180,Bn=Math.abs,Ih=Math.atan,ao=Math.atan2,sn=Math.cos,kp=Math.ceil,GC=Math.exp,Wv=Math.hypot,Bm=Math.log,d0=Math.pow,Jt=Math.sin,fs=Math.sign||function(e){return e>0?1:e<0?-1:0},di=Math.sqrt,L1=Math.tan;function ZC(e){return e>1?0:e<-1?Ln:Math.acos(e)}function lo(e){return e>1?Ur:e<-1?-Ur:Math.asin(e)}function I2(e){return(e=Jt(e/2))*e}function Lr(){}function Nm(e,t){e&&M2.hasOwnProperty(e.type)&&M2[e.type](e,t)}var P2={Feature:function(e,t){Nm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)Nm(i[a].geometry,t)}},M2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Hv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)Hv(i[a],t,0)},Polygon:function(e,t){k2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)k2(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)Nm(i[a],t)}};function Hv(e,t,i){var a=-1,c=e.length-i,d;for(t.lineStart();++a<c;)d=e[a],t.point(d[0],d[1],d[2]);t.lineEnd()}function k2(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)Hv(e[i],t,1);t.polygonEnd()}function Os(e,t){e&&P2.hasOwnProperty(e.type)?P2[e.type](e,t):Nm(e,t)}var Um=new Zi,$m=new Zi,WC,HC,Xv,qv,Kv,da={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){Um=new Zi,da.lineStart=R5,da.lineEnd=F5},polygonEnd:function(){var e=+Um;$m.add(e<0?so+e:e),this.lineStart=this.lineEnd=this.point=Lr},sphere:function(){$m.add(so)}};function R5(){da.point=j5}function F5(){XC(WC,HC)}function j5(e,t){da.point=XC,WC=e,HC=t,e*=pn,t*=pn,Xv=e,qv=sn(t=t/2+Dm),Kv=Jt(t)}function XC(e,t){e*=pn,t*=pn,t=t/2+Dm;var i=e-Xv,a=i>=0?1:-1,c=a*i,d=sn(t),y=Jt(t),l=Kv*y,b=qv*d+l*sn(c),w=l*a*Jt(c);Um.add(ao(w,b)),Xv=e,qv=d,Kv=y}function D5(e){return $m=new Zi,Os(e,da),$m*2}function Vm(e){return[ao(e[1],e[0]),lo(e[2])]}function Wu(e){var t=e[0],i=e[1],a=sn(i);return[a*sn(t),a*Jt(t),Jt(i)]}function Lp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _h(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function p0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function zp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Gm(e){var t=di(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Mr,_o,Br,Bo,Lu,qC,KC,uh,Yf,Ol,Ka,Ba={point:Yv,lineStart:L2,lineEnd:z2,polygonStart:function(){Ba.point=JC,Ba.lineStart=B5,Ba.lineEnd=N5,Yf=new Zi,da.polygonStart()},polygonEnd:function(){da.polygonEnd(),Ba.point=Yv,Ba.lineStart=L2,Ba.lineEnd=z2,Um<0?(Mr=-(Br=180),_o=-(Bo=90)):Yf>dn?Bo=90:Yf<-dn&&(_o=-90),Ka[0]=Mr,Ka[1]=Br},sphere:function(){Mr=-(Br=180),_o=-(Bo=90)}};function Yv(e,t){Ol.push(Ka=[Mr=e,Br=e]),t<_o&&(_o=t),t>Bo&&(Bo=t)}function YC(e,t){var i=Wu([e*pn,t*pn]);if(uh){var a=_h(uh,i),c=[a[1],-a[0],0],d=_h(c,a);Gm(d),d=Vm(d);var y=e-Lu,l=y>0?1:-1,b=d[0]*sr*l,w,A=Bn(y)>180;A^(l*Lu<b&&b<l*e)?(w=d[1]*sr,w>Bo&&(Bo=w)):(b=(b+360)%360-180,A^(l*Lu<b&&b<l*e)?(w=-d[1]*sr,w<_o&&(_o=w)):(t<_o&&(_o=t),t>Bo&&(Bo=t))),A?e<Lu?Do(Mr,e)>Do(Mr,Br)&&(Br=e):Do(e,Br)>Do(Mr,Br)&&(Mr=e):Br>=Mr?(e<Mr&&(Mr=e),e>Br&&(Br=e)):e>Lu?Do(Mr,e)>Do(Mr,Br)&&(Br=e):Do(e,Br)>Do(Mr,Br)&&(Mr=e)}else Ol.push(Ka=[Mr=e,Br=e]);t<_o&&(_o=t),t>Bo&&(Bo=t),uh=i,Lu=e}function L2(){Ba.point=YC}function z2(){Ka[0]=Mr,Ka[1]=Br,Ba.point=Yv,uh=null}function JC(e,t){if(uh){var i=e-Lu;Yf.add(Bn(i)>180?i+(i>0?360:-360):i)}else qC=e,KC=t;da.point(e,t),YC(e,t)}function B5(){da.lineStart()}function N5(){JC(qC,KC),da.lineEnd(),Bn(Yf)>dn&&(Mr=-(Br=180)),Ka[0]=Mr,Ka[1]=Br,uh=null}function Do(e,t){return(t-=e)<0?t+360:t}function U5(e,t){return e[0]-t[0]}function O2(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function $5(e){var t,i,a,c,d,y,l;if(Bo=Br=-(Mr=_o=1/0),Ol=[],Os(e,Ba),i=Ol.length){for(Ol.sort(U5),t=1,a=Ol[0],d=[a];t<i;++t)c=Ol[t],O2(a,c[0])||O2(a,c[1])?(Do(a[0],c[1])>Do(a[0],a[1])&&(a[1]=c[1]),Do(c[0],a[1])>Do(a[0],a[1])&&(a[0]=c[0])):d.push(a=c);for(y=-1/0,i=d.length-1,t=0,a=d[i];t<=i;a=c,++t)c=d[t],(l=Do(a[1],c[0]))>y&&(y=l,Mr=c[0],Br=a[1])}return Ol=Ka=null,Mr===1/0||_o===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mr,_o],[Br,Bo]]}var Of,Zm,Wm,Hm,Xm,qm,Km,Ym,Jv,Qv,e_,QC,eA,no,ro,io,Ds={sphere:Lr,point:z1,lineStart:R2,lineEnd:F2,polygonStart:function(){Ds.lineStart=Z5,Ds.lineEnd=W5},polygonEnd:function(){Ds.lineStart=R2,Ds.lineEnd=F2}};function z1(e,t){e*=pn,t*=pn;var i=sn(t);Ld(i*sn(e),i*Jt(e),Jt(t))}function Ld(e,t,i){++Of,Wm+=(e-Wm)/Of,Hm+=(t-Hm)/Of,Xm+=(i-Xm)/Of}function R2(){Ds.point=V5}function V5(e,t){e*=pn,t*=pn;var i=sn(t);no=i*sn(e),ro=i*Jt(e),io=Jt(t),Ds.point=G5,Ld(no,ro,io)}function G5(e,t){e*=pn,t*=pn;var i=sn(t),a=i*sn(e),c=i*Jt(e),d=Jt(t),y=ao(di((y=ro*d-io*c)*y+(y=io*a-no*d)*y+(y=no*c-ro*a)*y),no*a+ro*c+io*d);Zm+=y,qm+=y*(no+(no=a)),Km+=y*(ro+(ro=c)),Ym+=y*(io+(io=d)),Ld(no,ro,io)}function F2(){Ds.point=z1}function Z5(){Ds.point=H5}function W5(){tA(QC,eA),Ds.point=z1}function H5(e,t){QC=e,eA=t,e*=pn,t*=pn,Ds.point=tA;var i=sn(t);no=i*sn(e),ro=i*Jt(e),io=Jt(t),Ld(no,ro,io)}function tA(e,t){e*=pn,t*=pn;var i=sn(t),a=i*sn(e),c=i*Jt(e),d=Jt(t),y=ro*d-io*c,l=io*a-no*d,b=no*c-ro*a,w=Wv(y,l,b),A=lo(w),E=w&&-A/w;Jv.add(E*y),Qv.add(E*l),e_.add(E*b),Zm+=A,qm+=A*(no+(no=a)),Km+=A*(ro+(ro=c)),Ym+=A*(io+(io=d)),Ld(no,ro,io)}function X5(e){Of=Zm=Wm=Hm=Xm=qm=Km=Ym=0,Jv=new Zi,Qv=new Zi,e_=new Zi,Os(e,Ds);var t=+Jv,i=+Qv,a=+e_,c=Wv(t,i,a);return c<xd&&(t=qm,i=Km,a=Ym,Zm<dn&&(t=Wm,i=Hm,a=Xm),c=Wv(t,i,a),c<xd)?[NaN,NaN]:[ao(i,t)*sr,lo(a/c)*sr]}function zc(e){return function(){return e}}function t_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function n_(e,t){return[Bn(e)>Ln?e+Math.round(-e/so)*so:e,t]}n_.invert=n_;function O1(e,t,i){return(e%=so)?t||i?t_(D2(e),B2(t,i)):D2(e):t||i?B2(t,i):n_}function j2(e){return function(t,i){return t+=e,[t>Ln?t-so:t<-Ln?t+so:t,i]}}function D2(e){var t=j2(e);return t.invert=j2(-e),t}function B2(e,t){var i=sn(e),a=Jt(e),c=sn(t),d=Jt(t);function y(l,b){var w=sn(b),A=sn(l)*w,E=Jt(l)*w,L=Jt(b),F=L*i+A*a;return[ao(E*c-F*d,A*i-L*a),lo(F*c+E*d)]}return y.invert=function(l,b){var w=sn(b),A=sn(l)*w,E=Jt(l)*w,L=Jt(b),F=L*c-E*d;return[ao(E*c+L*d,A*i+F*a),lo(F*i-A*a)]},y}function nA(e){e=O1(e[0]*pn,e[1]*pn,e.length>2?e[2]*pn:0);function t(i){return i=e(i[0]*pn,i[1]*pn),i[0]*=sr,i[1]*=sr,i}return t.invert=function(i){return i=e.invert(i[0]*pn,i[1]*pn),i[0]*=sr,i[1]*=sr,i},t}function rA(e,t,i,a,c,d){if(i){var y=sn(t),l=Jt(t),b=a*i;c==null?(c=t+a*so,d=t-b/2):(c=N2(y,c),d=N2(y,d),(a>0?c<d:c>d)&&(c+=a*so));for(var w,A=c;a>0?A>d:A<d;A-=b)w=Vm([y,-l*sn(A),-l*Jt(A)]),e.point(w[0],w[1])}}function N2(e,t){t=Wu(t),t[0]-=e,Gm(t);var i=ZC(-t[1]);return((-t[2]<0?-i:i)+so-dn)%so}function q5(){var e=zc([0,0]),t=zc(90),i=zc(6),a,c,d={point:y};function y(b,w){a.push(b=c(b,w)),b[0]*=sr,b[1]*=sr}function l(){var b=e.apply(this,arguments),w=t.apply(this,arguments)*pn,A=i.apply(this,arguments)*pn;return a=[],c=O1(-b[0]*pn,-b[1]*pn,0).invert,rA(d,w,A,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return l.center=function(b){return arguments.length?(e=typeof b=="function"?b:zc([+b[0],+b[1]]),l):e},l.radius=function(b){return arguments.length?(t=typeof b=="function"?b:zc(+b),l):t},l.precision=function(b){return arguments.length?(i=typeof b=="function"?b:zc(+b),l):i},l}function iA(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Lr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function tm(e,t){return Bn(e[0]-t[0])<dn&&Bn(e[1]-t[1])<dn}function Op(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function oA(e,t,i,a,c){var d=[],y=[],l,b;if(e.forEach(function(Q){if(!((K=Q.length-1)<=0)){var K,pe=Q[0],G=Q[K],V;if(tm(pe,G)){if(!pe[2]&&!G[2]){for(c.lineStart(),l=0;l<K;++l)c.point((pe=Q[l])[0],pe[1]);c.lineEnd();return}G[0]+=2*dn}d.push(V=new Op(pe,Q,null,!0)),y.push(V.o=new Op(pe,null,V,!1)),d.push(V=new Op(G,Q,null,!1)),y.push(V.o=new Op(G,null,V,!0))}}),!!d.length){for(y.sort(t),U2(d),U2(y),l=0,b=y.length;l<b;++l)y[l].e=i=!i;for(var w=d[0],A,E;;){for(var L=w,F=!0;L.v;)if((L=L.n)===w)return;A=L.z,c.lineStart();do{if(L.v=L.o.v=!0,L.e){if(F)for(l=0,b=A.length;l<b;++l)c.point((E=A[l])[0],E[1]);else a(L.x,L.n.x,1,c);L=L.n}else{if(F)for(A=L.p.z,l=A.length-1;l>=0;--l)c.point((E=A[l])[0],E[1]);else a(L.x,L.p.x,-1,c);L=L.p}L=L.o,A=L.z,F=!F}while(!L.v);c.lineEnd()}}}function U2(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function m0(e){return Bn(e[0])<=Ln?e[0]:fs(e[0])*((Bn(e[0])+Ln)%so-Ln)}function sA(e,t){var i=m0(t),a=t[1],c=Jt(a),d=[Jt(i),-sn(i),0],y=0,l=0,b=new Zi;c===1?a=Ur+dn:c===-1&&(a=-Ur-dn);for(var w=0,A=e.length;w<A;++w)if(L=(E=e[w]).length)for(var E,L,F=E[L-1],Q=m0(F),K=F[1]/2+Dm,pe=Jt(K),G=sn(K),V=0;V<L;++V,Q=oe,pe=N,G=S,F=U){var U=E[V],oe=m0(U),W=U[1]/2+Dm,N=Jt(W),S=sn(W),M=oe-Q,Z=M>=0?1:-1,q=Z*M,J=q>Ln,ye=pe*N;if(b.add(ao(ye*Z*Jt(q),G*S+ye*sn(q))),y+=J?M+Z*so:M,J^Q>=i^oe>=i){var xe=_h(Wu(F),Wu(U));Gm(xe);var be=_h(d,xe);Gm(be);var te=(J^M>=0?-1:1)*lo(be[2]);(a>te||a===te&&(xe[0]||xe[1]))&&(l+=J^M>=0?1:-1)}}return(y<-dn||y<dn&&b<-xd)^l&1}function aA(e,t,i,a){return function(c){var d=t(c),y=iA(),l=t(y),b=!1,w,A,E,L={point:F,lineStart:K,lineEnd:pe,polygonStart:function(){L.point=G,L.lineStart=V,L.lineEnd=U,A=[],w=[]},polygonEnd:function(){L.point=F,L.lineStart=K,L.lineEnd=pe,A=VC(A);var oe=sA(w,a);A.length?(b||(c.polygonStart(),b=!0),oA(A,Y5,oe,i,c)):oe&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),A=w=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function F(oe,W){e(oe,W)&&c.point(oe,W)}function Q(oe,W){d.point(oe,W)}function K(){L.point=Q,d.lineStart()}function pe(){L.point=F,d.lineEnd()}function G(oe,W){E.push([oe,W]),l.point(oe,W)}function V(){l.lineStart(),E=[]}function U(){G(E[0][0],E[0][1]),l.lineEnd();var oe=l.clean(),W=y.result(),N,S=W.length,M,Z,q;if(E.pop(),w.push(E),E=null,!!S){if(oe&1){if(Z=W[0],(M=Z.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),N=0;N<M;++N)c.point((q=Z[N])[0],q[1]);c.lineEnd()}return}S>1&&oe&2&&W.push(W.pop().concat(W.shift())),A.push(W.filter(K5))}}return L}}function K5(e){return e.length>1}function Y5(e,t){return((e=e.x)[0]<0?e[1]-Ur-dn:Ur-e[1])-((t=t.x)[0]<0?t[1]-Ur-dn:Ur-t[1])}const r_=aA(function(){return!0},J5,ez,[-Ln,-Ur]);function J5(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(d,y){var l=d>0?Ln:-Ln,b=Bn(d-t);Bn(b-Ln)<dn?(e.point(t,i=(i+y)/2>0?Ur:-Ur),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(d,i),c=0):a!==l&&b>=Ln&&(Bn(t-a)<dn&&(t-=a*dn),Bn(d-l)<dn&&(d-=l*dn),i=Q5(t,i,d,y),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),c=0),e.point(t=d,i=y),a=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function Q5(e,t,i,a){var c,d,y=Jt(e-i);return Bn(y)>dn?Ih((Jt(t)*(d=sn(a))*Jt(i)-Jt(a)*(c=sn(t))*Jt(e))/(c*d*y)):(t+a)/2}function ez(e,t,i,a){var c;if(e==null)c=i*Ur,a.point(-Ln,c),a.point(0,c),a.point(Ln,c),a.point(Ln,0),a.point(Ln,-c),a.point(0,-c),a.point(-Ln,-c),a.point(-Ln,0),a.point(-Ln,c);else if(Bn(e[0]-t[0])>dn){var d=e[0]<t[0]?Ln:-Ln;c=i*d/2,a.point(-d,c),a.point(0,c),a.point(d,c)}else a.point(t[0],t[1])}function lA(e){var t=sn(e),i=6*pn,a=t>0,c=Bn(t)>dn;function d(A,E,L,F){rA(F,e,i,L,A,E)}function y(A,E){return sn(A)*sn(E)>t}function l(A){var E,L,F,Q,K;return{lineStart:function(){Q=F=!1,K=1},point:function(pe,G){var V=[pe,G],U,oe=y(pe,G),W=a?oe?0:w(pe,G):oe?w(pe+(pe<0?Ln:-Ln),G):0;if(!E&&(Q=F=oe)&&A.lineStart(),oe!==F&&(U=b(E,V),(!U||tm(E,U)||tm(V,U))&&(V[2]=1)),oe!==F)K=0,oe?(A.lineStart(),U=b(V,E),A.point(U[0],U[1])):(U=b(E,V),A.point(U[0],U[1],2),A.lineEnd()),E=U;else if(c&&E&&a^oe){var N;!(W&L)&&(N=b(V,E,!0))&&(K=0,a?(A.lineStart(),A.point(N[0][0],N[0][1]),A.point(N[1][0],N[1][1]),A.lineEnd()):(A.point(N[1][0],N[1][1]),A.lineEnd(),A.lineStart(),A.point(N[0][0],N[0][1],3)))}oe&&(!E||!tm(E,V))&&A.point(V[0],V[1]),E=V,F=oe,L=W},lineEnd:function(){F&&A.lineEnd(),E=null},clean:function(){return K|(Q&&F)<<1}}}function b(A,E,L){var F=Wu(A),Q=Wu(E),K=[1,0,0],pe=_h(F,Q),G=Lp(pe,pe),V=pe[0],U=G-V*V;if(!U)return!L&&A;var oe=t*G/U,W=-t*V/U,N=_h(K,pe),S=zp(K,oe),M=zp(pe,W);p0(S,M);var Z=N,q=Lp(S,Z),J=Lp(Z,Z),ye=q*q-J*(Lp(S,S)-1);if(!(ye<0)){var xe=di(ye),be=zp(Z,(-q-xe)/J);if(p0(be,S),be=Vm(be),!L)return be;var te=A[0],le=E[0],ie=A[1],ne=E[1],me;le<te&&(me=te,te=le,le=me);var Ee=le-te,we=Bn(Ee-Ln)<dn,Ue=we||Ee<dn;if(!we&&ne<ie&&(me=ie,ie=ne,ne=me),Ue?we?ie+ne>0^be[1]<(Bn(be[0]-te)<dn?ie:ne):ie<=be[1]&&be[1]<=ne:Ee>Ln^(te<=be[0]&&be[0]<=le)){var Le=zp(Z,(-q+xe)/J);return p0(Le,S),[be,Vm(Le)]}}}function w(A,E){var L=a?e:Ln-e,F=0;return A<-L?F|=1:A>L&&(F|=2),E<-L?F|=4:E>L&&(F|=8),F}return aA(y,l,d,a?[0,-e]:[-Ln,e-Ln])}function tz(e,t,i,a,c,d){var y=e[0],l=e[1],b=t[0],w=t[1],A=0,E=1,L=b-y,F=w-l,Q;if(Q=i-y,!(!L&&Q>0)){if(Q/=L,L<0){if(Q<A)return;Q<E&&(E=Q)}else if(L>0){if(Q>E)return;Q>A&&(A=Q)}if(Q=c-y,!(!L&&Q<0)){if(Q/=L,L<0){if(Q>E)return;Q>A&&(A=Q)}else if(L>0){if(Q<A)return;Q<E&&(E=Q)}if(Q=a-l,!(!F&&Q>0)){if(Q/=F,F<0){if(Q<A)return;Q<E&&(E=Q)}else if(F>0){if(Q>E)return;Q>A&&(A=Q)}if(Q=d-l,!(!F&&Q<0)){if(Q/=F,F<0){if(Q>E)return;Q>A&&(A=Q)}else if(F>0){if(Q<A)return;Q<E&&(E=Q)}return A>0&&(e[0]=y+A*L,e[1]=l+A*F),E<1&&(t[0]=y+E*L,t[1]=l+E*F),!0}}}}}var Rf=1e9,Rp=-Rf;function Lg(e,t,i,a){function c(w,A){return e<=w&&w<=i&&t<=A&&A<=a}function d(w,A,E,L){var F=0,Q=0;if(w==null||(F=y(w,E))!==(Q=y(A,E))||b(w,A)<0^E>0)do L.point(F===0||F===3?e:i,F>1?a:t);while((F=(F+E+4)%4)!==Q);else L.point(A[0],A[1])}function y(w,A){return Bn(w[0]-e)<dn?A>0?0:3:Bn(w[0]-i)<dn?A>0?2:1:Bn(w[1]-t)<dn?A>0?1:0:A>0?3:2}function l(w,A){return b(w.x,A.x)}function b(w,A){var E=y(w,1),L=y(A,1);return E!==L?E-L:E===0?A[1]-w[1]:E===1?w[0]-A[0]:E===2?w[1]-A[1]:A[0]-w[0]}return function(w){var A=w,E=iA(),L,F,Q,K,pe,G,V,U,oe,W,N,S={point:M,lineStart:ye,lineEnd:xe,polygonStart:q,polygonEnd:J};function M(te,le){c(te,le)&&A.point(te,le)}function Z(){for(var te=0,le=0,ie=F.length;le<ie;++le)for(var ne=F[le],me=1,Ee=ne.length,we=ne[0],Ue,Le,Me=we[0],He=we[1];me<Ee;++me)Ue=Me,Le=He,we=ne[me],Me=we[0],He=we[1],Le<=a?He>a&&(Me-Ue)*(a-Le)>(He-Le)*(e-Ue)&&++te:He<=a&&(Me-Ue)*(a-Le)<(He-Le)*(e-Ue)&&--te;return te}function q(){A=E,L=[],F=[],N=!0}function J(){var te=Z(),le=N&&te,ie=(L=VC(L)).length;(le||ie)&&(w.polygonStart(),le&&(w.lineStart(),d(null,null,1,w),w.lineEnd()),ie&&oA(L,l,te,d,w),w.polygonEnd()),A=w,L=F=Q=null}function ye(){S.point=be,F&&F.push(Q=[]),W=!0,oe=!1,V=U=NaN}function xe(){L&&(be(K,pe),G&&oe&&E.rejoin(),L.push(E.result())),S.point=M,oe&&A.lineEnd()}function be(te,le){var ie=c(te,le);if(F&&Q.push([te,le]),W)K=te,pe=le,G=ie,W=!1,ie&&(A.lineStart(),A.point(te,le));else if(ie&&oe)A.point(te,le);else{var ne=[V=Math.max(Rp,Math.min(Rf,V)),U=Math.max(Rp,Math.min(Rf,U))],me=[te=Math.max(Rp,Math.min(Rf,te)),le=Math.max(Rp,Math.min(Rf,le))];tz(ne,me,e,t,i,a)?(oe||(A.lineStart(),A.point(ne[0],ne[1])),A.point(me[0],me[1]),ie||A.lineEnd(),N=!1):ie&&(A.lineStart(),A.point(te,le),N=!1)}V=te,U=le,oe=ie}return S}}function nz(){var e=0,t=0,i=960,a=500,c,d,y;return y={stream:function(l){return c&&d===l?c:c=Lg(e,t,i,a)(d=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],a=+l[1][1],c=d=null,y):[[e,t],[i,a]]}}}var i_,o_,nm,rm,xh={sphere:Lr,point:Lr,lineStart:rz,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr};function rz(){xh.point=oz,xh.lineEnd=iz}function iz(){xh.point=xh.lineEnd=Lr}function oz(e,t){e*=pn,t*=pn,o_=e,nm=Jt(t),rm=sn(t),xh.point=sz}function sz(e,t){e*=pn,t*=pn;var i=Jt(t),a=sn(t),c=Bn(e-o_),d=sn(c),y=Jt(c),l=a*y,b=rm*i-nm*a*d,w=nm*i+rm*a*d;i_.add(ao(di(l*l+b*b),w)),o_=e,nm=i,rm=a}function uA(e){return i_=new Zi,Os(e,xh),+i_}var s_=[null,null],az={type:"LineString",coordinates:s_};function Jm(e,t){return s_[0]=e,s_[1]=t,uA(az)}var $2={Feature:function(e,t){return Qm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(Qm(i[a].geometry,t))return!0;return!1}},V2={Sphere:function(){return!0},Point:function(e,t){return G2(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(G2(i[a],t))return!0;return!1},LineString:function(e,t){return Z2(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(Z2(i[a],t))return!0;return!1},Polygon:function(e,t){return W2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(W2(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(Qm(i[a],t))return!0;return!1}};function Qm(e,t){return e&&V2.hasOwnProperty(e.type)?V2[e.type](e,t):!1}function G2(e,t){return Jm(e,t)===0}function Z2(e,t){for(var i,a,c,d=0,y=e.length;d<y;d++){if(a=Jm(e[d],t),a===0||d>0&&(c=Jm(e[d],e[d-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<xd*c))return!0;i=a}return!1}function W2(e,t){return!!sA(e.map(lz),cA(t))}function lz(e){return e=e.map(cA),e.pop(),e}function cA(e){return[e[0]*pn,e[1]*pn]}function uz(e,t){return(e&&$2.hasOwnProperty(e.type)?$2[e.type]:Qm)(e,t)}function H2(e,t,i){var a=eh(e,t-dn,i).concat(t);return function(c){return a.map(function(d){return[c,d]})}}function X2(e,t,i){var a=eh(e,t-dn,i).concat(t);return function(c){return a.map(function(d){return[d,c]})}}function hA(){var e,t,i,a,c,d,y,l,b=10,w=b,A=90,E=360,L,F,Q,K,pe=2.5;function G(){return{type:"MultiLineString",coordinates:V()}}function V(){return eh(kp(a/A)*A,i,A).map(Q).concat(eh(kp(l/E)*E,y,E).map(K)).concat(eh(kp(t/b)*b,e,b).filter(function(U){return Bn(U%A)>dn}).map(L)).concat(eh(kp(d/w)*w,c,w).filter(function(U){return Bn(U%E)>dn}).map(F))}return G.lines=function(){return V().map(function(U){return{type:"LineString",coordinates:U}})},G.outline=function(){return{type:"Polygon",coordinates:[Q(a).concat(K(y).slice(1),Q(i).reverse().slice(1),K(l).reverse().slice(1))]}},G.extent=function(U){return arguments.length?G.extentMajor(U).extentMinor(U):G.extentMinor()},G.extentMajor=function(U){return arguments.length?(a=+U[0][0],i=+U[1][0],l=+U[0][1],y=+U[1][1],a>i&&(U=a,a=i,i=U),l>y&&(U=l,l=y,y=U),G.precision(pe)):[[a,l],[i,y]]},G.extentMinor=function(U){return arguments.length?(t=+U[0][0],e=+U[1][0],d=+U[0][1],c=+U[1][1],t>e&&(U=t,t=e,e=U),d>c&&(U=d,d=c,c=U),G.precision(pe)):[[t,d],[e,c]]},G.step=function(U){return arguments.length?G.stepMajor(U).stepMinor(U):G.stepMinor()},G.stepMajor=function(U){return arguments.length?(A=+U[0],E=+U[1],G):[A,E]},G.stepMinor=function(U){return arguments.length?(b=+U[0],w=+U[1],G):[b,w]},G.precision=function(U){return arguments.length?(pe=+U,L=H2(d,c,90),F=X2(t,e,pe),Q=H2(l,y,90),K=X2(a,i,pe),G):pe},G.extentMajor([[-180,-90+dn],[180,90-dn]]).extentMinor([[-180,-80-dn],[180,80+dn]])}function cz(){return hA()()}function hz(e,t){var i=e[0]*pn,a=e[1]*pn,c=t[0]*pn,d=t[1]*pn,y=sn(a),l=Jt(a),b=sn(d),w=Jt(d),A=y*sn(i),E=y*Jt(i),L=b*sn(c),F=b*Jt(c),Q=2*lo(di(I2(d-a)+y*b*I2(c-i))),K=Jt(Q),pe=Q?function(G){var V=Jt(G*=Q)/K,U=Jt(Q-G)/K,oe=U*A+V*L,W=U*E+V*F,N=U*l+V*w;return[ao(W,oe)*sr,ao(N,di(oe*oe+W*W))*sr]}:function(){return[i*sr,a*sr]};return pe.distance=Q,pe}const wd=e=>e;var g0=new Zi,a_=new Zi,fA,dA,l_,u_,Dl={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){Dl.lineStart=fz,Dl.lineEnd=pz},polygonEnd:function(){Dl.lineStart=Dl.lineEnd=Dl.point=Lr,g0.add(Bn(a_)),a_=new Zi},result:function(){var e=g0/2;return g0=new Zi,e}};function fz(){Dl.point=dz}function dz(e,t){Dl.point=pA,fA=l_=e,dA=u_=t}function pA(e,t){a_.add(u_*e-l_*t),l_=e,u_=t}function pz(){pA(fA,dA)}const q2=Dl;var wh=1/0,eg=wh,bd=-wh,tg=bd,mz={point:gz,lineStart:Lr,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr,result:function(){var e=[[wh,eg],[bd,tg]];return bd=tg=-(eg=wh=1/0),e}};function gz(e,t){e<wh&&(wh=e),e>bd&&(bd=e),t<eg&&(eg=t),t>tg&&(tg=t)}const ng=mz;var c_=0,h_=0,Ff=0,rg=0,ig=0,th=0,f_=0,d_=0,jf=0,mA,gA,sa,aa,Rs={point:Hu,lineStart:K2,lineEnd:Y2,polygonStart:function(){Rs.lineStart=_z,Rs.lineEnd=xz},polygonEnd:function(){Rs.point=Hu,Rs.lineStart=K2,Rs.lineEnd=Y2},result:function(){var e=jf?[f_/jf,d_/jf]:th?[rg/th,ig/th]:Ff?[c_/Ff,h_/Ff]:[NaN,NaN];return c_=h_=Ff=rg=ig=th=f_=d_=jf=0,e}};function Hu(e,t){c_+=e,h_+=t,++Ff}function K2(){Rs.point=yz}function yz(e,t){Rs.point=vz,Hu(sa=e,aa=t)}function vz(e,t){var i=e-sa,a=t-aa,c=di(i*i+a*a);rg+=c*(sa+e)/2,ig+=c*(aa+t)/2,th+=c,Hu(sa=e,aa=t)}function Y2(){Rs.point=Hu}function _z(){Rs.point=wz}function xz(){yA(mA,gA)}function wz(e,t){Rs.point=yA,Hu(mA=sa=e,gA=aa=t)}function yA(e,t){var i=e-sa,a=t-aa,c=di(i*i+a*a);rg+=c*(sa+e)/2,ig+=c*(aa+t)/2,th+=c,c=aa*e-sa*t,f_+=c*(sa+e),d_+=c*(aa+t),jf+=c*3,Hu(sa=e,aa=t)}const J2=Rs;function vA(e){this._context=e}vA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,so);break}}},result:Lr};var p_=new Zi,y0,_A,xA,Df,Bf,og={point:Lr,lineStart:function(){og.point=bz},lineEnd:function(){y0&&wA(_A,xA),og.point=Lr},polygonStart:function(){y0=!0},polygonEnd:function(){y0=null},result:function(){var e=+p_;return p_=new Zi,e}};function bz(e,t){og.point=wA,_A=Df=e,xA=Bf=t}function wA(e,t){Df-=e,Bf-=t,p_.add(di(Df*Df+Bf*Bf)),Df=e,Bf=t}const Q2=og;function bA(){this._string=[]}bA.prototype={_radius:4.5,_circle:eE(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=eE(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function eE(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Ez(e,t){var i=4.5,a,c;function d(y){return y&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Os(y,a(c))),c.result()}return d.area=function(y){return Os(y,a(q2)),q2.result()},d.measure=function(y){return Os(y,a(Q2)),Q2.result()},d.bounds=function(y){return Os(y,a(ng)),ng.result()},d.centroid=function(y){return Os(y,a(J2)),J2.result()},d.projection=function(y){return arguments.length?(a=y==null?(e=null,wd):(e=y).stream,d):e},d.context=function(y){return arguments.length?(c=y==null?(t=null,new bA):new vA(t=y),typeof i!="function"&&c.pointRadius(i),d):t},d.pointRadius=function(y){return arguments.length?(i=typeof y=="function"?y:(c.pointRadius(+y),+y),d):i},d.projection(e).context(t)}function Sz(e){return{stream:zd(e)}}function zd(e){return function(t){var i=new m_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function m_(){}m_.prototype={constructor:m_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function R1(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Os(i,e.stream(ng)),t(ng.result()),a!=null&&e.clipExtent(a),e}function zg(e,t,i){return R1(e,function(a){var c=t[1][0]-t[0][0],d=t[1][1]-t[0][1],y=Math.min(c/(a[1][0]-a[0][0]),d/(a[1][1]-a[0][1])),l=+t[0][0]+(c-y*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(d-y*(a[1][1]+a[0][1]))/2;e.scale(150*y).translate([l,b])},i)}function F1(e,t,i){return zg(e,[[0,0],t],i)}function j1(e,t,i){return R1(e,function(a){var c=+t,d=c/(a[1][0]-a[0][0]),y=(c-d*(a[1][0]+a[0][0]))/2,l=-d*a[0][1];e.scale(150*d).translate([y,l])},i)}function D1(e,t,i){return R1(e,function(a){var c=+t,d=c/(a[1][1]-a[0][1]),y=-d*a[0][0],l=(c-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([y,l])},i)}var tE=16,Tz=sn(30*pn);function nE(e,t){return+t?Az(e,t):Cz(e)}function Cz(e){return zd({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function Az(e,t){function i(a,c,d,y,l,b,w,A,E,L,F,Q,K,pe){var G=w-a,V=A-c,U=G*G+V*V;if(U>4*t&&K--){var oe=y+L,W=l+F,N=b+Q,S=di(oe*oe+W*W+N*N),M=lo(N/=S),Z=Bn(Bn(N)-1)<dn||Bn(d-E)<dn?(d+E)/2:ao(W,oe),q=e(Z,M),J=q[0],ye=q[1],xe=J-a,be=ye-c,te=V*xe-G*be;(te*te/U>t||Bn((G*xe+V*be)/U-.5)>.3||y*L+l*F+b*Q<Tz)&&(i(a,c,d,y,l,b,J,ye,Z,oe/=S,W/=S,N,K,pe),pe.point(J,ye),i(J,ye,Z,oe,W,N,w,A,E,L,F,Q,K,pe))}}return function(a){var c,d,y,l,b,w,A,E,L,F,Q,K,pe={point:G,lineStart:V,lineEnd:oe,polygonStart:function(){a.polygonStart(),pe.lineStart=W},polygonEnd:function(){a.polygonEnd(),pe.lineStart=V}};function G(M,Z){M=e(M,Z),a.point(M[0],M[1])}function V(){E=NaN,pe.point=U,a.lineStart()}function U(M,Z){var q=Wu([M,Z]),J=e(M,Z);i(E,L,A,F,Q,K,E=J[0],L=J[1],A=M,F=q[0],Q=q[1],K=q[2],tE,a),a.point(E,L)}function oe(){pe.point=G,a.lineEnd()}function W(){V(),pe.point=N,pe.lineEnd=S}function N(M,Z){U(c=M,Z),d=E,y=L,l=F,b=Q,w=K,pe.point=U}function S(){i(E,L,A,F,Q,K,d,y,c,l,b,w,tE,a),pe.lineEnd=oe,oe()}return pe}}var Iz=zd({point:function(e,t){this.stream.point(e*pn,t*pn)}});function Pz(e){return zd({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function Mz(e,t,i,a,c){function d(y,l){return y*=a,l*=c,[t+e*y,i-e*l]}return d.invert=function(y,l){return[(y-t)/e*a,(i-l)/e*c]},d}function rE(e,t,i,a,c,d){if(!d)return Mz(e,t,i,a,c);var y=sn(d),l=Jt(d),b=y*e,w=l*e,A=y/e,E=l/e,L=(l*i-y*t)/e,F=(l*t+y*i)/e;function Q(K,pe){return K*=a,pe*=c,[b*K-w*pe+t,i-w*K-b*pe]}return Q.invert=function(K,pe){return[a*(A*K-E*pe+L),c*(F-E*K-A*pe)]},Q}function pa(e){return B1(function(){return e})()}function B1(e){var t,i=150,a=480,c=250,d=0,y=0,l=0,b=0,w=0,A,E=0,L=1,F=1,Q=null,K=r_,pe=null,G,V,U,oe=wd,W=.5,N,S,M,Z,q;function J(te){return M(te[0]*pn,te[1]*pn)}function ye(te){return te=M.invert(te[0],te[1]),te&&[te[0]*sr,te[1]*sr]}J.stream=function(te){return Z&&q===te?Z:Z=Iz(Pz(A)(K(N(oe(q=te)))))},J.preclip=function(te){return arguments.length?(K=te,Q=void 0,be()):K},J.postclip=function(te){return arguments.length?(oe=te,pe=G=V=U=null,be()):oe},J.clipAngle=function(te){return arguments.length?(K=+te?lA(Q=te*pn):(Q=null,r_),be()):Q*sr},J.clipExtent=function(te){return arguments.length?(oe=te==null?(pe=G=V=U=null,wd):Lg(pe=+te[0][0],G=+te[0][1],V=+te[1][0],U=+te[1][1]),be()):pe==null?null:[[pe,G],[V,U]]},J.scale=function(te){return arguments.length?(i=+te,xe()):i},J.translate=function(te){return arguments.length?(a=+te[0],c=+te[1],xe()):[a,c]},J.center=function(te){return arguments.length?(d=te[0]%360*pn,y=te[1]%360*pn,xe()):[d*sr,y*sr]},J.rotate=function(te){return arguments.length?(l=te[0]%360*pn,b=te[1]%360*pn,w=te.length>2?te[2]%360*pn:0,xe()):[l*sr,b*sr,w*sr]},J.angle=function(te){return arguments.length?(E=te%360*pn,xe()):E*sr},J.reflectX=function(te){return arguments.length?(L=te?-1:1,xe()):L<0},J.reflectY=function(te){return arguments.length?(F=te?-1:1,xe()):F<0},J.precision=function(te){return arguments.length?(N=nE(S,W=te*te),be()):di(W)},J.fitExtent=function(te,le){return zg(J,te,le)},J.fitSize=function(te,le){return F1(J,te,le)},J.fitWidth=function(te,le){return j1(J,te,le)},J.fitHeight=function(te,le){return D1(J,te,le)};function xe(){var te=rE(i,0,0,L,F,E).apply(null,t(d,y)),le=rE(i,a-te[0],c-te[1],L,F,E);return A=O1(l,b,w),S=t_(t,le),M=t_(A,S),N=nE(S,W),be()}function be(){return Z=q=null,J}return function(){return t=e.apply(this,arguments),J.invert=t.invert&&ye,xe()}}function N1(e){var t=0,i=Ln/3,a=B1(e),c=a(t,i);return c.parallels=function(d){return arguments.length?a(t=d[0]*pn,i=d[1]*pn):[t*sr,i*sr]},c}function kz(e){var t=sn(e);function i(a,c){return[a*t,Jt(c)/t]}return i.invert=function(a,c){return[a/t,lo(c*t)]},i}function EA(e,t){var i=Jt(e),a=(i+Jt(t))/2;if(Bn(a)<dn)return kz(e);var c=1+i*(2*a-i),d=di(c)/a;function y(l,b){var w=di(c-2*a*Jt(b))/a;return[w*Jt(l*=a),d-w*sn(l)]}return y.invert=function(l,b){var w=d-b,A=ao(l,Bn(w))*fs(w);return w*a<0&&(A-=Ln*fs(l)*fs(w)),[A/a,lo((c-(l*l+w*w)*a*a)/(2*a))]},y}function sg(){return N1(EA).scale(155.424).center([0,33.6442])}function SA(){return sg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Lz(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function zz(){var e,t,i=SA(),a,c=sg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d,y=sg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,b,w={point:function(L,F){b=[L,F]}};function A(L){var F=L[0],Q=L[1];return b=null,a.point(F,Q),b||(d.point(F,Q),b)||(l.point(F,Q),b)}A.invert=function(L){var F=i.scale(),Q=i.translate(),K=(L[0]-Q[0])/F,pe=(L[1]-Q[1])/F;return(pe>=.12&&pe<.234&&K>=-.425&&K<-.214?c:pe>=.166&&pe<.234&&K>=-.214&&K<-.115?y:i).invert(L)},A.stream=function(L){return e&&t===L?e:e=Lz([i.stream(t=L),c.stream(L),y.stream(L)])},A.precision=function(L){return arguments.length?(i.precision(L),c.precision(L),y.precision(L),E()):i.precision()},A.scale=function(L){return arguments.length?(i.scale(L),c.scale(L*.35),y.scale(L),A.translate(i.translate())):i.scale()},A.translate=function(L){if(!arguments.length)return i.translate();var F=i.scale(),Q=+L[0],K=+L[1];return a=i.translate(L).clipExtent([[Q-.455*F,K-.238*F],[Q+.455*F,K+.238*F]]).stream(w),d=c.translate([Q-.307*F,K+.201*F]).clipExtent([[Q-.425*F+dn,K+.12*F+dn],[Q-.214*F-dn,K+.234*F-dn]]).stream(w),l=y.translate([Q-.205*F,K+.212*F]).clipExtent([[Q-.214*F+dn,K+.166*F+dn],[Q-.115*F-dn,K+.234*F-dn]]).stream(w),E()},A.fitExtent=function(L,F){return zg(A,L,F)},A.fitSize=function(L,F){return F1(A,L,F)},A.fitWidth=function(L,F){return j1(A,L,F)},A.fitHeight=function(L,F){return D1(A,L,F)};function E(){return e=t=null,A}return A.scale(1070)}function TA(e){return function(t,i){var a=sn(t),c=sn(i),d=e(a*c);return d===1/0?[2,0]:[d*c*Jt(t),d*Jt(i)]}}function Od(e){return function(t,i){var a=di(t*t+i*i),c=e(a),d=Jt(c),y=sn(c);return[ao(t*d,a*y),lo(a&&i*d/a)]}}var U1=TA(function(e){return di(2/(1+e))});U1.invert=Od(function(e){return 2*lo(e/2)});function Oz(){return pa(U1).scale(124.75).clipAngle(180-.001)}var $1=TA(function(e){return(e=ZC(e))&&e/Jt(e)});$1.invert=Od(function(e){return e});function Rz(){return pa($1).scale(79.4188).clipAngle(180-.001)}function Rd(e,t){return[e,Bm(L1((Ur+t)/2))]}Rd.invert=function(e,t){return[e,2*Ih(GC(t))-Ur]};function Fz(){return CA(Rd).scale(961/so)}function CA(e){var t=pa(e),i=t.center,a=t.scale,c=t.translate,d=t.clipExtent,y=null,l,b,w;t.scale=function(E){return arguments.length?(a(E),A()):a()},t.translate=function(E){return arguments.length?(c(E),A()):c()},t.center=function(E){return arguments.length?(i(E),A()):i()},t.clipExtent=function(E){return arguments.length?(E==null?y=l=b=w=null:(y=+E[0][0],l=+E[0][1],b=+E[1][0],w=+E[1][1]),A()):y==null?null:[[y,l],[b,w]]};function A(){var E=Ln*a(),L=t(nA(t.rotate()).invert([0,0]));return d(y==null?[[L[0]-E,L[1]-E],[L[0]+E,L[1]+E]]:e===Rd?[[Math.max(L[0]-E,y),l],[Math.min(L[0]+E,b),w]]:[[y,Math.max(L[1]-E,l)],[b,Math.min(L[1]+E,w)]])}return A()}function Fp(e){return L1((Ur+e)/2)}function AA(e,t){var i=sn(e),a=e===t?Jt(e):Bm(i/sn(t))/Bm(Fp(t)/Fp(e)),c=i*d0(Fp(e),a)/a;if(!a)return Rd;function d(y,l){c>0?l<-Ur+dn&&(l=-Ur+dn):l>Ur-dn&&(l=Ur-dn);var b=c/d0(Fp(l),a);return[b*Jt(a*y),c-b*sn(a*y)]}return d.invert=function(y,l){var b=c-l,w=fs(a)*di(y*y+b*b),A=ao(y,Bn(b))*fs(b);return b*a<0&&(A-=Ln*fs(y)*fs(b)),[A/a,2*Ih(d0(c/w,1/a))-Ur]},d}function jz(){return N1(AA).scale(109.5).parallels([30,30])}function Ed(e,t){return[e,t]}Ed.invert=Ed;function Dz(){return pa(Ed).scale(152.63)}function IA(e,t){var i=sn(e),a=e===t?Jt(e):(i-sn(t))/(t-e),c=i/a+e;if(Bn(a)<dn)return Ed;function d(y,l){var b=c-l,w=a*y;return[b*Jt(w),c-b*sn(w)]}return d.invert=function(y,l){var b=c-l,w=ao(y,Bn(b))*fs(b);return b*a<0&&(w-=Ln*fs(y)*fs(b)),[w/a,c-fs(a)*di(y*y+b*b)]},d}function Bz(){return N1(IA).scale(131.154).center([0,13.9389])}var Jf=1.340264,Qf=-.081106,ed=893e-6,td=.003796,ag=di(3)/2,Nz=12;function V1(e,t){var i=lo(ag*Jt(t)),a=i*i,c=a*a*a;return[e*sn(i)/(ag*(Jf+3*Qf*a+c*(7*ed+9*td*a))),i*(Jf+Qf*a+c*(ed+td*a))]}V1.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,d=0,y,l,b;d<Nz&&(l=i*(Jf+Qf*a+c*(ed+td*a))-t,b=Jf+3*Qf*a+c*(7*ed+9*td*a),i-=y=l/b,a=i*i,c=a*a*a,!(Bn(y)<xd));++d);return[ag*e*(Jf+3*Qf*a+c*(7*ed+9*td*a))/sn(i),lo(Jt(i)/ag)]};function Uz(){return pa(V1).scale(177.158)}function G1(e,t){var i=sn(t),a=sn(e)*i;return[i*Jt(e)/a,Jt(t)/a]}G1.invert=Od(Ih);function $z(){return pa(G1).scale(144.049).clipAngle(60)}function Vz(){var e=1,t=0,i=0,a=1,c=1,d=0,y,l,b=null,w,A,E,L=1,F=1,Q=zd({point:function(oe,W){var N=U([oe,W]);this.stream.point(N[0],N[1])}}),K=wd,pe,G;function V(){return L=e*a,F=e*c,pe=G=null,U}function U(oe){var W=oe[0]*L,N=oe[1]*F;if(d){var S=N*y-W*l;W=W*y+N*l,N=S}return[W+t,N+i]}return U.invert=function(oe){var W=oe[0]-t,N=oe[1]-i;if(d){var S=N*y+W*l;W=W*y-N*l,N=S}return[W/L,N/F]},U.stream=function(oe){return pe&&G===oe?pe:pe=Q(K(G=oe))},U.postclip=function(oe){return arguments.length?(K=oe,b=w=A=E=null,V()):K},U.clipExtent=function(oe){return arguments.length?(K=oe==null?(b=w=A=E=null,wd):Lg(b=+oe[0][0],w=+oe[0][1],A=+oe[1][0],E=+oe[1][1]),V()):b==null?null:[[b,w],[A,E]]},U.scale=function(oe){return arguments.length?(e=+oe,V()):e},U.translate=function(oe){return arguments.length?(t=+oe[0],i=+oe[1],V()):[t,i]},U.angle=function(oe){return arguments.length?(d=oe%360*pn,l=Jt(d),y=sn(d),V()):d*sr},U.reflectX=function(oe){return arguments.length?(a=oe?-1:1,V()):a<0},U.reflectY=function(oe){return arguments.length?(c=oe?-1:1,V()):c<0},U.fitExtent=function(oe,W){return zg(U,oe,W)},U.fitSize=function(oe,W){return F1(U,oe,W)},U.fitWidth=function(oe,W){return j1(U,oe,W)},U.fitHeight=function(oe,W){return D1(U,oe,W)},U}function Z1(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}Z1.invert=function(e,t){var i=t,a=25,c;do{var d=i*i,y=d*d;i-=c=(i*(1.007226+d*(.015085+y*(-.044475+.028874*d-.005916*y)))-t)/(1.007226+d*(.015085*3+y*(-.044475*7+.028874*9*d-.005916*11*y)))}while(Bn(c)>dn&&--a>0);return[e/(.8707+(d=i*i)*(-.131979+d*(-.013791+d*d*d*(.003971-.001529*d)))),i]};function Gz(){return pa(Z1).scale(175.295)}function W1(e,t){return[sn(t)*Jt(e),Jt(t)]}W1.invert=Od(lo);function Zz(){return pa(W1).scale(249.5).clipAngle(90+dn)}function H1(e,t){var i=sn(t),a=1+sn(e)*i;return[i*Jt(e)/a,Jt(t)/a]}H1.invert=Od(function(e){return 2*Ih(e)});function Wz(){return pa(H1).scale(250).clipAngle(142)}function X1(e,t){return[Bm(L1((Ur+t)/2)),-e]}X1.invert=function(e,t){return[-t,2*Ih(GC(e))-Ur]};function Hz(){var e=CA(X1),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const Xz=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:SA,geoAlbersUsa:zz,geoArea:D5,geoAzimuthalEqualArea:Oz,geoAzimuthalEqualAreaRaw:U1,geoAzimuthalEquidistant:Rz,geoAzimuthalEquidistantRaw:$1,geoBounds:$5,geoCentroid:X5,geoCircle:q5,geoClipAntimeridian:r_,geoClipCircle:lA,geoClipExtent:nz,geoClipRectangle:Lg,geoConicConformal:jz,geoConicConformalRaw:AA,geoConicEqualArea:sg,geoConicEqualAreaRaw:EA,geoConicEquidistant:Bz,geoConicEquidistantRaw:IA,geoContains:uz,geoDistance:Jm,geoEqualEarth:Uz,geoEqualEarthRaw:V1,geoEquirectangular:Dz,geoEquirectangularRaw:Ed,geoGnomonic:$z,geoGnomonicRaw:G1,geoGraticule:hA,geoGraticule10:cz,geoIdentity:Vz,geoInterpolate:hz,geoLength:uA,geoMercator:Fz,geoMercatorRaw:Rd,geoNaturalEarth1:Gz,geoNaturalEarth1Raw:Z1,geoOrthographic:Zz,geoOrthographicRaw:W1,geoPath:Ez,geoProjection:pa,geoProjectionMutator:B1,geoRotation:nA,geoStereographic:Wz,geoStereographicRaw:H1,geoStream:Os,geoTransform:Sz,geoTransverseMercator:Hz,geoTransverseMercatorRaw:X1},Symbol.toStringTag,{value:"Module"})),qz=b_(Xz);var eu=2*Math.PI*6378137/2,Kz=Math.PI/180;function PA(e){return e=e||256,2*Math.PI*6378137/e}function Yz(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function g_(e,t,i){var a=MA(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function MA(e,t,i){var a=t,c=nx(e[0]),d=tx(e[1]),y=Math.sin(d*Kz),l=Math.pow(2,a),b=l*(c/360+.5),w=l*(.5-.25*Math.log((1+y)/(1-y))/Math.PI);return Yu([b,w,a],i)}function Jz(e,t=6){var i=e[0],a=e[1],c=e[2],d=e[3],y=(i-c)/2+c,l=(a-d)/2+d;return t!=null&&(y=Number(y.toFixed(t)),l=Number(l.toFixed(t))),[y,l]}function lg(e,t,i={enable:!0,decimal:1}){e=Og(e,t);var a=e[0],c=e[1],d=a*eu/180,y=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return y=y*eu/180,i.enable&&(d=Number(d.toFixed(i.decimal)),y=Number(y.toFixed(i.decimal))),[d,y]}function y_(e,t=6){var i=e[0],a=e[1],c=i/eu*180,d=a/eu*180;return d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),d=Number(d.toFixed(t))),[c,d]}function q1(e,t,i){var a=e[0],c=e[1],d=Q1(t,i),y=(a+eu)/d,l=(c+eu)/d;return[y,l,t]}function kA(e,t,i){e=Og(e,i);var a=lg(e),c=q1(a,t);return K1(c)}function Qz(e,t,i){if(e=Og(e,i),t===0)return[0,0,0];var a=kA(e,t);return zA(a)}function eO(e,t){if(t===0)return[0,0,0];var i=q1(e,t);return K1(i)}function v_(e,t,i=1){var a=e[0],c=e[1],d=e[2],y=Q1(d,t),l=a*y-eu,b=c*y-eu;return i!=null&&(l=Number(l.toFixed(i)),b=Number(b.toFixed(i))),[l,b]}function K1(e,t,i){t=t||256;var a=e[0],c=e[1],d=e[2];if(d===0)return[0,0,0];J1(d);var y=Math.ceil(a/t)-1,l=Math.ceil(c/t)-1;return y<0&&(y=0),l<0&&(l=0),[y,l,d]}function Y1(e,t,i){Yu(e,i),t=t||256;var a=e[0],c=e[1],d=e[2],y=v_([a*t,c*t,d]),l=v_([(a+1)*t,(c+1)*t,d]);return[y[0],y[1],l[0],l[1]]}function LA(e,t){Yu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var d=Y1([i,a,c]),y=d[0],l=d[1],b=d[2],w=d[3],A=y_([y,l,c]),E=y_([b,w,c]);return[A[0],A[1],E[0],E[1]]}function tO(e){var t=Fd(e);return Y1(t)}function nO(e){var t=Fd(e);return LA(t)}function zA(e,t){Yu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var d=i,y=Math.pow(2,c)-1-a;return[d,y,c]}function Fd(e){var t=e[0],i=e[1],a=e[2],c=t,d=Math.pow(2,a)-i-1;return[c,d,a]}function rO(e){var t=Fd(e);return OA(t)}function OA(e,t){Yu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var d="";return a=Math.pow(2,c)-1-a,ex(c,0,-1).map(function(y){var l=0,b=1<<y-1;i&b&&(l+=1),a&b&&(l+=2),d=d.concat(l)}),d}function iO(e){var t=RA(e);return Fd(t)}function RA(e){var t=0,i=0,a=e.length;return ex(a,0,-1).map(function(c){var d=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=d;break;case 2:i+=d;break;case 3:t+=d,i+=d;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function oO(e){var t=lg([e[0],e[1]]),i=lg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function Yu(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=J1(c),e=FA(e),e}function FA(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function J1(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Og(e,t){if(t===!1)return e;var i=nx(e[0]),a=tx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function Q1(e,t){return PA(t)/Math.pow(2,e)}function ex(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),d=0;d<a;d++,e+=i)c[d]=e;return c}function sO(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(d){d[0]<t&&(t=d[0]),d[1]<i&&(i=d[1]),d[2]>a&&(a=d[2]),d[3]>c&&(c=d[3])}),[t,i,a,c]}}function aO(e){try{return Yu(e),!0}catch{return!1}}function tx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function nx(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function lO(e){var t=g_([e[0],e[1]],32),i=g_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=uO(a);if(c===0)return[0,0,0];var d=a[0]>>>32-c,y=a[1]>>>32-c;return[d,y,c]}function uO(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const cO=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:Jz,bboxToMeters:oO,bboxToTile:lO,googleToBBox:nO,googleToBBoxMeters:tO,googleToQuadkey:rO,googleToTile:Fd,hash:Yz,initialResolution:PA,latitude:tx,lngLatToGoogle:Qz,lngLatToMeters:lg,lngLatToTile:kA,longitude:nx,maxBBox:sO,metersToLngLat:y_,metersToPixels:q1,metersToTile:eO,pixelsToMeters:v_,pixelsToTile:K1,pointToTile:g_,pointToTileFraction:MA,quadkeyToGoogle:RA,quadkeyToTile:iO,range:ex,resolution:Q1,tileToBBox:LA,tileToBBoxMeters:Y1,tileToGoogle:zA,tileToQuadkey:OA,validTile:aO,validateLngLat:Og,validateTile:Yu,validateZoom:J1,wrapTile:FA},Symbol.toStringTag,{value:"Module"})),hO=b_(cO);var Rg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Rg.read=function(e,t,i,a,c){var d,y,l=c*8-a-1,b=(1<<l)-1,w=b>>1,A=-7,E=i?c-1:0,L=i?-1:1,F=e[t+E];for(E+=L,d=F&(1<<-A)-1,F>>=-A,A+=l;A>0;d=d*256+e[t+E],E+=L,A-=8);for(y=d&(1<<-A)-1,d>>=-A,A+=a;A>0;y=y*256+e[t+E],E+=L,A-=8);if(d===0)d=1-w;else{if(d===b)return y?NaN:(F?-1:1)*(1/0);y=y+Math.pow(2,a),d=d-w}return(F?-1:1)*y*Math.pow(2,d-a)};Rg.write=function(e,t,i,a,c,d){var y,l,b,w=d*8-c-1,A=(1<<w)-1,E=A>>1,L=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=a?0:d-1,Q=a?1:-1,K=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,y=A):(y=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-y))<1&&(y--,b*=2),y+E>=1?t+=L/b:t+=L*Math.pow(2,1-E),t*b>=2&&(y++,b/=2),y+E>=A?(l=0,y=A):y+E>=1?(l=(t*b-1)*Math.pow(2,c),y=y+E):(l=t*Math.pow(2,E-1)*Math.pow(2,c),y=0));c>=8;e[i+F]=l&255,F+=Q,l/=256,c-=8);for(y=y<<c|l,w+=c;w>0;e[i+F]=y&255,F+=Q,y/=256,w-=8);e[i+F-Q]|=K*128};var fO=qn,jp=Rg;function qn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0;qn.Fixed64=1;qn.Bytes=2;qn.Fixed32=5;var __=65536*65536,iE=1/__,dO=12,jA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");qn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,d=this.pos;this.type=a&7,e(c,t,this),this.pos===d&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Dp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=sE(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Dp(this.buf,this.pos)+Dp(this.buf,this.pos+4)*__;return this.pos+=8,e},readSFixed64:function(){var e=Dp(this.buf,this.pos)+sE(this.buf,this.pos+4)*__;return this.pos+=8,e},readFloat:function(){var e=jp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=jp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,pO(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=dO&&jA?IO(this.buf,t,e):AO(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qn.Bytes)return e.push(this.readVarint(t));var i=Fa(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qn.Bytes)return e.push(this.readSVarint());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qn.Bytes)return e.push(this.readBoolean());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qn.Bytes)return e.push(this.readFloat());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qn.Bytes)return e.push(this.readDouble());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed32());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed32());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed64());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed64());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===qn.Varint)for(;this.buf[this.pos++]>127;);else if(t===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qn.Fixed32)this.pos+=4;else if(t===qn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Rc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Rc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Rc(this.buf,e&-1,this.pos),Rc(this.buf,Math.floor(e*iE),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Rc(this.buf,e&-1,this.pos),Rc(this.buf,Math.floor(e*iE),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){mO(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=PO(this.buf,e,this.pos);var i=this.pos-t;i>=128&&oE(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),jp.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),jp.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&oE(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,qn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,vO,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,_O,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,bO,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,xO,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,wO,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,EO,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,SO,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,TO,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,CO,t)},writeBytesField:function(e,t){this.writeTag(e,qn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function pO(e,t,i){var a=i.buf,c,d;if(d=a[i.pos++],c=(d&112)>>4,d<128||(d=a[i.pos++],c|=(d&127)<<3,d<128)||(d=a[i.pos++],c|=(d&127)<<10,d<128)||(d=a[i.pos++],c|=(d&127)<<17,d<128)||(d=a[i.pos++],c|=(d&127)<<24,d<128)||(d=a[i.pos++],c|=(d&1)<<31,d<128))return Oc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Fa(e){return e.type===qn.Bytes?e.readVarint()+e.pos:e.pos+1}function Oc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function mO(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),gO(i,a,t),yO(a,t)}function gO(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function yO(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function oE(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function vO(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function _O(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function xO(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function wO(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function bO(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function EO(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function SO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function TO(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function CO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Dp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Rc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function sE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function AO(e,t,i){for(var a="",c=t;c<i;){var d=e[c],y=null,l=d>239?4:d>223?3:d>191?2:1;if(c+l>i)break;var b,w,A;l===1?d<128&&(y=d):l===2?(b=e[c+1],(b&192)===128&&(y=(d&31)<<6|b&63,y<=127&&(y=null))):l===3?(b=e[c+1],w=e[c+2],(b&192)===128&&(w&192)===128&&(y=(d&15)<<12|(b&63)<<6|w&63,(y<=2047||y>=55296&&y<=57343)&&(y=null))):l===4&&(b=e[c+1],w=e[c+2],A=e[c+3],(b&192)===128&&(w&192)===128&&(A&192)===128&&(y=(d&15)<<18|(b&63)<<12|(w&63)<<6|A&63,(y<=65535||y>=1114112)&&(y=null))),y===null?(y=65533,l=1):y>65535&&(y-=65536,a+=String.fromCharCode(y>>>10&1023|55296),y=56320|y&1023),a+=String.fromCharCode(y),c+=l}return a}function IO(e,t,i){return jA.decode(e.subarray(t,i))}function PO(e,t,i){for(var a=0,c,d;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(d)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,d=c;continue}else c=d-55296<<10|c-56320|65536,d=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):d=c;continue}else d&&(e[i++]=239,e[i++]=191,e[i++]=189,d=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var rx={exports:{}},DA=function(t,i){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(i,c)}},MO=DA,Ju=Object.prototype.toString;function ix(e){return Ju.call(e)==="[object Array]"}function x_(e){return typeof e>"u"}function kO(e){return e!==null&&!x_(e)&&e.constructor!==null&&!x_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function LO(e){return Ju.call(e)==="[object ArrayBuffer]"}function zO(e){return typeof FormData<"u"&&e instanceof FormData}function OO(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function RO(e){return typeof e=="string"}function FO(e){return typeof e=="number"}function BA(e){return e!==null&&typeof e=="object"}function im(e){if(Ju.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function jO(e){return Ju.call(e)==="[object Date]"}function DO(e){return Ju.call(e)==="[object File]"}function BO(e){return Ju.call(e)==="[object Blob]"}function NA(e){return Ju.call(e)==="[object Function]"}function NO(e){return BA(e)&&NA(e.pipe)}function UO(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function $O(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function VO(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ox(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),ix(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function w_(){var e={};function t(c,d){im(e[d])&&im(c)?e[d]=w_(e[d],c):im(c)?e[d]=w_({},c):ix(c)?e[d]=c.slice():e[d]=c}for(var i=0,a=arguments.length;i<a;i++)ox(arguments[i],t);return e}function GO(e,t,i){return ox(t,function(c,d){i&&typeof c=="function"?e[d]=MO(c,i):e[d]=c}),e}function ZO(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Wo={isArray:ix,isArrayBuffer:LO,isBuffer:kO,isFormData:zO,isArrayBufferView:OO,isString:RO,isNumber:FO,isObject:BA,isPlainObject:im,isUndefined:x_,isDate:jO,isFile:DO,isBlob:BO,isFunction:NA,isStream:NO,isURLSearchParams:UO,isStandardBrowserEnv:VO,forEach:ox,merge:w_,extend:GO,trim:$O,stripBOM:ZO},Fc=Wo;function aE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var UA=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Fc.isURLSearchParams(i))c=i.toString();else{var d=[];Fc.forEach(i,function(b,w){b===null||typeof b>"u"||(Fc.isArray(b)?w=w+"[]":b=[b],Fc.forEach(b,function(E){Fc.isDate(E)?E=E.toISOString():Fc.isObject(E)&&(E=JSON.stringify(E)),d.push(aE(w)+"="+aE(E))}))}),c=d.join("&")}if(c){var y=t.indexOf("#");y!==-1&&(t=t.slice(0,y)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},WO=Wo;function Fg(){this.handlers=[]}Fg.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Fg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Fg.prototype.forEach=function(t){WO.forEach(this.handlers,function(a){a!==null&&t(a)})};var HO=Fg,XO=Wo,qO=function(t,i){XO.forEach(t,function(c,d){d!==i&&d.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[d])})},$A=function(t,i,a,c,d){return t.config=i,a&&(t.code=a),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},v0,lE;function VA(){if(lE)return v0;lE=1;var e=$A;return v0=function(i,a,c,d,y){var l=new Error(i);return e(l,a,c,d,y)},v0}var _0,uE;function KO(){if(uE)return _0;uE=1;var e=VA();return _0=function(i,a,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},_0}var x0,cE;function YO(){if(cE)return x0;cE=1;var e=Wo;return x0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,d,y,l,b){var w=[];w.push(a+"="+encodeURIComponent(c)),e.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),e.isString(y)&&w.push("path="+y),e.isString(l)&&w.push("domain="+l),b===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),x0}var w0,hE;function JO(){return hE||(hE=1,w0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),w0}var b0,fE;function QO(){return fE||(fE=1,b0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),b0}var E0,dE;function eR(){if(dE)return E0;dE=1;var e=JO(),t=QO();return E0=function(a,c){return a&&!e(c)?t(a,c):c},E0}var S0,pE;function tR(){if(pE)return S0;pE=1;var e=Wo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return S0=function(a){var c={},d,y,l;return a&&e.forEach(a.split(`
`),function(w){if(l=w.indexOf(":"),d=e.trim(w.substr(0,l)).toLowerCase(),y=e.trim(w.substr(l+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([y]):c[d]=c[d]?c[d]+", "+y:y}}),c},S0}var T0,mE;function nR(){if(mE)return T0;mE=1;var e=Wo;return T0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function d(y){var l=y;return i&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=d(window.location.href),function(l){var b=e.isString(l)?d(l):l;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),T0}var C0,gE;function yE(){if(gE)return C0;gE=1;var e=Wo,t=KO(),i=YO(),a=UA,c=eR(),d=tR(),y=nR(),l=VA();return C0=function(w){return new Promise(function(E,L){var F=w.data,Q=w.headers,K=w.responseType;e.isFormData(F)&&delete Q["Content-Type"];var pe=new XMLHttpRequest;if(w.auth){var G=w.auth.username||"",V=w.auth.password?unescape(encodeURIComponent(w.auth.password)):"";Q.Authorization="Basic "+btoa(G+":"+V)}var U=c(w.baseURL,w.url);pe.open(w.method.toUpperCase(),a(U,w.params,w.paramsSerializer),!0),pe.timeout=w.timeout;function oe(){if(pe){var N="getAllResponseHeaders"in pe?d(pe.getAllResponseHeaders()):null,S=!K||K==="text"||K==="json"?pe.responseText:pe.response,M={data:S,status:pe.status,statusText:pe.statusText,headers:N,config:w,request:pe};t(E,L,M),pe=null}}if("onloadend"in pe?pe.onloadend=oe:pe.onreadystatechange=function(){!pe||pe.readyState!==4||pe.status===0&&!(pe.responseURL&&pe.responseURL.indexOf("file:")===0)||setTimeout(oe)},pe.onabort=function(){pe&&(L(l("Request aborted",w,"ECONNABORTED",pe)),pe=null)},pe.onerror=function(){L(l("Network Error",w,null,pe)),pe=null},pe.ontimeout=function(){var S="timeout of "+w.timeout+"ms exceeded";w.timeoutErrorMessage&&(S=w.timeoutErrorMessage),L(l(S,w,w.transitional&&w.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",pe)),pe=null},e.isStandardBrowserEnv()){var W=(w.withCredentials||y(U))&&w.xsrfCookieName?i.read(w.xsrfCookieName):void 0;W&&(Q[w.xsrfHeaderName]=W)}"setRequestHeader"in pe&&e.forEach(Q,function(S,M){typeof F>"u"&&M.toLowerCase()==="content-type"?delete Q[M]:pe.setRequestHeader(M,S)}),e.isUndefined(w.withCredentials)||(pe.withCredentials=!!w.withCredentials),K&&K!=="json"&&(pe.responseType=w.responseType),typeof w.onDownloadProgress=="function"&&pe.addEventListener("progress",w.onDownloadProgress),typeof w.onUploadProgress=="function"&&pe.upload&&pe.upload.addEventListener("progress",w.onUploadProgress),w.cancelToken&&w.cancelToken.promise.then(function(S){pe&&(pe.abort(),L(S),pe=null)}),F||(F=null),pe.send(F)})},C0}var Ai=Wo,vE=qO,rR=$A,iR={"Content-Type":"application/x-www-form-urlencoded"};function _E(e,t){!Ai.isUndefined(e)&&Ai.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function oR(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=yE()),e}function sR(e,t,i){if(Ai.isString(e))try{return(t||JSON.parse)(e),Ai.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var jg={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:oR(),transformRequest:[function(t,i){return vE(i,"Accept"),vE(i,"Content-Type"),Ai.isFormData(t)||Ai.isArrayBuffer(t)||Ai.isBuffer(t)||Ai.isStream(t)||Ai.isFile(t)||Ai.isBlob(t)?t:Ai.isArrayBufferView(t)?t.buffer:Ai.isURLSearchParams(t)?(_E(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ai.isObject(t)||i&&i["Content-Type"]==="application/json"?(_E(i,"application/json"),sR(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,d=!a&&this.responseType==="json";if(d||c&&Ai.isString(t)&&t.length)try{return JSON.parse(t)}catch(y){if(d)throw y.name==="SyntaxError"?rR(y,this,"E_JSON_PARSE"):y}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};jg.headers={common:{Accept:"application/json, text/plain, */*"}};Ai.forEach(["delete","get","head"],function(t){jg.headers[t]={}});Ai.forEach(["post","put","patch"],function(t){jg.headers[t]=Ai.merge(iR)});var sx=jg,aR=Wo,lR=sx,uR=function(t,i,a){var c=this||lR;return aR.forEach(a,function(y){t=y.call(c,t,i)}),t},A0,xE;function GA(){return xE||(xE=1,A0=function(t){return!!(t&&t.__CANCEL__)}),A0}var wE=Wo,I0=uR,cR=GA(),hR=sx;function P0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var fR=function(t){P0(t),t.headers=t.headers||{},t.data=I0.call(t,t.data,t.headers,t.transformRequest),t.headers=wE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),wE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||hR.adapter;return i(t).then(function(c){return P0(t),c.data=I0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return cR(c)||(P0(t),c&&c.response&&(c.response.data=I0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Vi=Wo,ZA=function(t,i){i=i||{};var a={},c=["url","method","data"],d=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function b(L,F){return Vi.isPlainObject(L)&&Vi.isPlainObject(F)?Vi.merge(L,F):Vi.isPlainObject(F)?Vi.merge({},F):Vi.isArray(F)?F.slice():F}function w(L){Vi.isUndefined(i[L])?Vi.isUndefined(t[L])||(a[L]=b(void 0,t[L])):a[L]=b(t[L],i[L])}Vi.forEach(c,function(F){Vi.isUndefined(i[F])||(a[F]=b(void 0,i[F]))}),Vi.forEach(d,w),Vi.forEach(y,function(F){Vi.isUndefined(i[F])?Vi.isUndefined(t[F])||(a[F]=b(void 0,t[F])):a[F]=b(void 0,i[F])}),Vi.forEach(l,function(F){F in i?a[F]=b(t[F],i[F]):F in t&&(a[F]=b(void 0,t[F]))});var A=c.concat(d).concat(y).concat(l),E=Object.keys(t).concat(Object.keys(i)).filter(function(F){return A.indexOf(F)===-1});return Vi.forEach(E,w),a};const dR="axios",pR="0.21.4",mR="Promise based HTTP client for the browser and node.js",gR="index.js",yR={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},vR={type:"git",url:"https://github.com/axios/axios.git"},_R=["xhr","http","ajax","promise","node"],xR="Matt Zabriskie",wR="MIT",bR={url:"https://github.com/axios/axios/issues"},ER="https://axios-http.com",SR={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},TR={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},CR="dist/axios.min.js",AR="dist/axios.min.js",IR="./index.d.ts",PR={"follow-redirects":"^1.14.0"},MR=[{path:"./dist/axios.min.js",threshold:"5kB"}],kR={name:dR,version:pR,description:mR,main:gR,scripts:yR,repository:vR,keywords:_R,author:xR,license:wR,bugs:bR,homepage:ER,devDependencies:SR,browser:TR,jsdelivr:CR,unpkg:AR,typings:IR,dependencies:PR,bundlesize:MR};var WA=kR,ax={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){ax[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var bE={},LR=WA.version.split(".");function HA(e,t){for(var i=t?t.split("."):LR,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}ax.transitional=function(t,i,a){var c=i&&HA(i);function d(y,l){return"[Axios v"+WA.version+"] Transitional option '"+y+"'"+l+(a?". "+a:"")}return function(y,l,b){if(t===!1)throw new Error(d(l," has been removed in "+i));return c&&!bE[l]&&(bE[l]=!0,console.warn(d(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(y,l,b):!0}};function zR(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var d=a[c],y=t[d];if(y){var l=e[d],b=l===void 0||y(l,d,e);if(b!==!0)throw new TypeError("option "+d+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+d)}}var OR={isOlderVersion:HA,assertOptions:zR,validators:ax},XA=Wo,RR=UA,EE=HO,SE=fR,Dg=ZA,qA=OR,jc=qA.validators;function jd(e){this.defaults=e,this.interceptors={request:new EE,response:new EE}}jd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Dg(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&qA.assertOptions(i,{silentJSONParsing:jc.transitional(jc.boolean,"1.0.0"),forcedJSONParsing:jc.transitional(jc.boolean,"1.0.0"),clarifyTimeoutError:jc.transitional(jc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(t)===!1||(c=c&&L.synchronous,a.unshift(L.fulfilled,L.rejected))});var d=[];this.interceptors.response.forEach(function(L){d.push(L.fulfilled,L.rejected)});var y;if(!c){var l=[SE,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(d),y=Promise.resolve(t);l.length;)y=y.then(l.shift(),l.shift());return y}for(var b=t;a.length;){var w=a.shift(),A=a.shift();try{b=w(b)}catch(E){A(E);break}}try{y=SE(b)}catch(E){return Promise.reject(E)}for(;d.length;)y=y.then(d.shift(),d.shift());return y};jd.prototype.getUri=function(t){return t=Dg(this.defaults,t),RR(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};XA.forEach(["delete","get","head","options"],function(t){jd.prototype[t]=function(i,a){return this.request(Dg(a||{},{method:t,url:i,data:(a||{}).data}))}});XA.forEach(["post","put","patch"],function(t){jd.prototype[t]=function(i,a,c){return this.request(Dg(c||{},{method:t,url:i,data:a}))}});var FR=jd,M0,TE;function KA(){if(TE)return M0;TE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,M0=e,M0}var k0,CE;function jR(){if(CE)return k0;CE=1;var e=KA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(y){a=y});var c=this;i(function(y){c.reason||(c.reason=new e(y),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(y){a=y});return{token:c,cancel:a}},k0=t,k0}var L0,AE;function DR(){return AE||(AE=1,L0=function(t){return function(a){return t.apply(null,a)}}),L0}var z0,IE;function BR(){return IE||(IE=1,z0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),z0}var PE=Wo,NR=DA,om=FR,UR=ZA,$R=sx;function YA(e){var t=new om(e),i=NR(om.prototype.request,t);return PE.extend(i,om.prototype,t),PE.extend(i,t),i}var $s=YA($R);$s.Axios=om;$s.create=function(t){return YA(UR($s.defaults,t))};$s.Cancel=KA();$s.CancelToken=jR();$s.isCancel=GA();$s.all=function(t){return Promise.all(t)};$s.spread=DR();$s.isAxiosError=BR();rx.exports=$s;rx.exports.default=$s;var VR=rx.exports,GR=VR;const ZR={},WR=Object.freeze(Object.defineProperty({__proto__:null,default:ZR},Symbol.toStringTag,{value:"Module"})),HR=b_(WR);var Bg={},XR=ch;function ch(e,t){this.x=e,this.y=t}ch.prototype={clone:function(){return new ch(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),d=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};ch.convert=function(e){return e instanceof ch?e:Array.isArray(e)?new ch(e[0],e[1]):e};var qR=XR,JA=bh;function bh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(KR,this,t)}function KR(e,t,i){e==1?t.id=i.readVarint():e==2?YR(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function YR(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}bh.types=["Unknown","Point","LineString","Polygon"];bh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,y=[],l;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),i===1&&(l&&y.push(l),l=[]),l.push(new qR(c,d));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&y.push(l),y};bh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,y=1/0,l=-1/0,b=1/0,w=-1/0;e.pos<t;){if(a<=0){var A=e.readVarint();i=A&7,a=A>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),c<y&&(y=c),c>l&&(l=c),d<b&&(b=d),d>w&&(w=d);else if(i!==7)throw new Error("unknown command "+i)}return[y,b,l,w]};bh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,d=this.extent*t,y=this.loadGeometry(),l=bh.types[this.type],b,w;function A(F){for(var Q=0;Q<F.length;Q++){var K=F[Q],pe=180-(K.y+d)*360/a;F[Q]=[(K.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(pe*Math.PI/180))-90]}}switch(this.type){case 1:var E=[];for(b=0;b<y.length;b++)E[b]=y[b][0];y=E,A(y);break;case 2:for(b=0;b<y.length;b++)A(y[b]);break;case 3:for(y=JR(y),b=0;b<y.length;b++)for(w=0;w<y[b].length;w++)A(y[b][w]);break}y.length===1?y=y[0]:l="Multi"+l;var L={type:"Feature",geometry:{type:l,coordinates:y},properties:this.properties};return"id"in this&&(L.id=this.id),L};function JR(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,d=0;d<t;d++){var y=QR(e[d]);y!==0&&(c===void 0&&(c=y<0),c===y<0?(a&&i.push(a),a=[e[d]]):a.push(e[d]))}return a&&i.push(a),i}function QR(e){for(var t=0,i=0,a=e.length,c=a-1,d,y;i<a;c=i++)d=e[i],y=e[c],t+=(y.x-d.x)*(d.y+y.y);return t}var eF=JA,QA=eI;function eI(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(tF,this,t),this.length=this._features.length}function tF(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(nF(i))}function nF(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}eI.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new eF(this._pbf,t,this.extent,this._keys,this._values)};var rF=QA,iF=oF;function oF(e,t){this.layers=e.readFields(sF,{},t)}function sF(e,t,i){if(e===3){var a=new rF(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}Bg.VectorTile=iF;Bg.VectorTileFeature=JA;Bg.VectorTileLayer=QA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=qz,i=hO,a=fO,c=GR,d=HR,y=Bg;function l(V){return V&&typeof V=="object"&&"default"in V?V:{default:V}}var b=l(a),w=l(c),A=l(d),E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Rl<"u"?Rl:typeof self<"u"?self:{};function L(V){var U={exports:{}};return V(U,U.exports),U.exports}var F=L(function(V,U){(function(W,N){V.exports=N(w.default)})(E,function(oe){return function(W){var N={};function S(M){if(N[M])return N[M].exports;var Z=N[M]={i:M,l:!1,exports:{}};return W[M].call(Z.exports,Z,Z.exports,S),Z.l=!0,Z.exports}return S.m=W,S.c=N,S.d=function(M,Z,q){S.o(M,Z)||Object.defineProperty(M,Z,{enumerable:!0,get:q})},S.r=function(M){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},S.t=function(M,Z){if(Z&1&&(M=S(M)),Z&8||Z&4&&typeof M=="object"&&M&&M.__esModule)return M;var q=Object.create(null);if(S.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:M}),Z&2&&typeof M!="string")for(var J in M)S.d(q,J,(function(ye){return M[ye]}).bind(null,J));return q},S.n=function(M){var Z=M&&M.__esModule?function(){return M.default}:function(){return M};return S.d(Z,"a",Z),Z},S.o=function(M,Z){return Object.prototype.hasOwnProperty.call(M,Z)},S.p="",S(S.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(W,N,S){S.r(N),S.d(N,"CacheControl",function(){return we}),S.d(N,"parse",function(){return Ue}),S.d(N,"format",function(){return Le}),S("./node_modules/core-js/modules/es6.array.from.js"),S("./node_modules/core-js/modules/es6.function.name.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/web.dom.iterable.js"),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.regexp.split.js"),S("./node_modules/core-js/modules/es6.number.is-finite.js");function M(Me,He){return xe(Me)||ye(Me,He)||q(Me,He)||Z()}function Z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(Me,He){if(Me){if(typeof Me=="string")return J(Me,He);var Ge=Object.prototype.toString.call(Me).slice(8,-1);if(Ge==="Object"&&Me.constructor&&(Ge=Me.constructor.name),Ge==="Map"||Ge==="Set")return Array.from(Me);if(Ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ge))return J(Me,He)}}function J(Me,He){(He==null||He>Me.length)&&(He=Me.length);for(var Ge=0,rt=new Array(He);Ge<He;Ge++)rt[Ge]=Me[Ge];return rt}function ye(Me,He){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Me)))){var Ge=[],rt=!0,ct=!1,vt=void 0;try{for(var Pt=Me[Symbol.iterator](),ht;!(rt=(ht=Pt.next()).done)&&(Ge.push(ht.value),!(He&&Ge.length===He));rt=!0);}catch(Et){ct=!0,vt=Et}finally{try{!rt&&Pt.return!=null&&Pt.return()}finally{if(ct)throw vt}}return Ge}}function xe(Me){if(Array.isArray(Me))return Me}function be(Me,He){if(!(Me instanceof He))throw new TypeError("Cannot call a class as a function")}function te(Me,He){for(var Ge=0;Ge<He.length;Ge++){var rt=He[Ge];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(Me,rt.key,rt)}}function le(Me,He,Ge){return He&&te(Me.prototype,He),Ge&&te(Me,Ge),Me}var ie=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ne={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function me(Me){return Me===null}function Ee(Me){if(!Me)return null;var He=parseInt(Me,10);return!Number.isFinite(He)||He<0?null:He}var we=function(){function Me(){be(this,Me),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return le(Me,[{key:"parse",value:function(Ge){if(!Ge||Ge.length===0)return this;var rt={},ct=Ge.match(ie)||[];return Array.prototype.forEach.call(ct,function(vt){var Pt=vt.split("=",2),ht=M(Pt,1),Et=ht[0],Je=null;Pt.length>1&&(Je=Pt[1].trim()),rt[Et.toLowerCase()]=Je}),this.maxAge=Ee(rt[ne.maxAge]),this.sharedMaxAge=Ee(rt[ne.sharedMaxAge]),this.maxStale=me(rt[ne.maxStale]),this.maxStaleDuration=Ee(rt[ne.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Ee(rt[ne.minFresh]),this.immutable=me(rt[ne.immutable]),this.mustRevalidate=me(rt[ne.mustRevalidate]),this.noCache=me(rt[ne.noCache]),this.noStore=me(rt[ne.noStore]),this.noTransform=me(rt[ne.noTransform]),this.onlyIfCached=me(rt[ne.onlyIfCached]),this.private=me(rt[ne.private]),this.proxyRevalidate=me(rt[ne.proxyRevalidate]),this.public=me(rt[ne.public]),this}},{key:"format",value:function(){var Ge=[];return this.maxAge&&Ge.push("".concat(ne.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ge.push("".concat(ne.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ge.push("".concat(ne.maxStale,"=").concat(this.maxStaleDuration)):Ge.push(ne.maxStale)),this.minFresh&&Ge.push("".concat(ne.minFresh,"=").concat(this.minFresh)),this.immutable&&Ge.push(ne.immutable),this.mustRevalidate&&Ge.push(ne.mustRevalidate),this.noCache&&Ge.push(ne.noCache),this.noStore&&Ge.push(ne.noStore),this.noTransform&&Ge.push(ne.noTransform),this.onlyIfCached&&Ge.push(ne.onlyIfCached),this.private&&Ge.push(ne.private),this.proxyRevalidate&&Ge.push(ne.proxyRevalidate),this.public&&Ge.push(ne.public),Ge.join(", ")}}]),Me}();function Ue(Me){var He=new we;return He.parse(Me)}function Le(Me){return Me instanceof we?Me.format():we.prototype.format.call(Me)}N.default={CacheControl:we,parse:Ue,format:Le}},"./node_modules/charenc/charenc.js":function(W,N){var S={utf8:{stringToBytes:function(M){return S.bin.stringToBytes(unescape(encodeURIComponent(M)))},bytesToString:function(M){return decodeURIComponent(escape(S.bin.bytesToString(M)))}},bin:{stringToBytes:function(M){for(var Z=[],q=0;q<M.length;q++)Z.push(M.charCodeAt(q)&255);return Z},bytesToString:function(M){for(var Z=[],q=0;q<M.length;q++)Z.push(String.fromCharCode(M[q]));return Z.join("")}}};W.exports=S},"./node_modules/core-js/modules/_a-function.js":function(W,N){W.exports=function(S){if(typeof S!="function")throw TypeError(S+" is not a function!");return S}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_wks.js")("unscopables"),Z=Array.prototype;Z[M]==null&&S("./node_modules/core-js/modules/_hide.js")(Z,M,{}),W.exports=function(q){Z[M][q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_string-at.js")(!0);W.exports=function(Z,q,J){return q+(J?M(Z,q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_is-object.js");W.exports=function(Z){if(!M(Z))throw TypeError(Z+" is not an object!");return Z}},"./node_modules/core-js/modules/_array-includes.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_to-iobject.js"),Z=S("./node_modules/core-js/modules/_to-length.js"),q=S("./node_modules/core-js/modules/_to-absolute-index.js");W.exports=function(J){return function(ye,xe,be){var te=M(ye),le=Z(te.length),ie=q(be,le),ne;if(J&&xe!=xe){for(;le>ie;)if(ne=te[ie++],ne!=ne)return!0}else for(;le>ie;ie++)if((J||ie in te)&&te[ie]===xe)return J||ie||0;return!J&&-1}}},"./node_modules/core-js/modules/_bind.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_a-function.js"),Z=S("./node_modules/core-js/modules/_is-object.js"),q=S("./node_modules/core-js/modules/_invoke.js"),J=[].slice,ye={},xe=function(be,te,le){if(!(te in ye)){for(var ie=[],ne=0;ne<te;ne++)ie[ne]="a["+ne+"]";ye[te]=Function("F,a","return new F("+ie.join(",")+")")}return ye[te](be,le)};W.exports=Function.bind||function(te){var le=M(this),ie=J.call(arguments,1),ne=function(){var me=ie.concat(J.call(arguments));return this instanceof ne?xe(le,me.length,me):q(le,me,te)};return Z(le.prototype)&&(ne.prototype=le.prototype),ne}},"./node_modules/core-js/modules/_classof.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_cof.js"),Z=S("./node_modules/core-js/modules/_wks.js")("toStringTag"),q=M(function(){return arguments}())=="Arguments",J=function(ye,xe){try{return ye[xe]}catch{}};W.exports=function(ye){var xe,be,te;return ye===void 0?"Undefined":ye===null?"Null":typeof(be=J(xe=Object(ye),Z))=="string"?be:q?M(xe):(te=M(xe))=="Object"&&typeof xe.callee=="function"?"Arguments":te}},"./node_modules/core-js/modules/_cof.js":function(W,N){var S={}.toString;W.exports=function(M){return S.call(M).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(W,N){var S=W.exports={version:"2.6.12"};typeof __e=="number"&&(__e=S)},"./node_modules/core-js/modules/_create-property.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_property-desc.js");W.exports=function(q,J,ye){J in q?M.f(q,J,Z(0,ye)):q[J]=ye}},"./node_modules/core-js/modules/_ctx.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_a-function.js");W.exports=function(Z,q,J){if(M(Z),q===void 0)return Z;switch(J){case 1:return function(ye){return Z.call(q,ye)};case 2:return function(ye,xe){return Z.call(q,ye,xe)};case 3:return function(ye,xe,be){return Z.call(q,ye,xe,be)}}return function(){return Z.apply(q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(W,N){W.exports=function(S){if(S==null)throw TypeError("Can't call method on  "+S);return S}},"./node_modules/core-js/modules/_descriptors.js":function(W,N,S){W.exports=!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_is-object.js"),Z=S("./node_modules/core-js/modules/_global.js").document,q=M(Z)&&M(Z.createElement);W.exports=function(J){return q?Z.createElement(J):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(W,N){W.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-keys.js"),Z=S("./node_modules/core-js/modules/_object-gops.js"),q=S("./node_modules/core-js/modules/_object-pie.js");W.exports=function(J){var ye=M(J),xe=Z.f;if(xe)for(var be=xe(J),te=q.f,le=0,ie;be.length>le;)te.call(J,ie=be[le++])&&ye.push(ie);return ye}},"./node_modules/core-js/modules/_export.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_core.js"),q=S("./node_modules/core-js/modules/_hide.js"),J=S("./node_modules/core-js/modules/_redefine.js"),ye=S("./node_modules/core-js/modules/_ctx.js"),xe="prototype",be=function(te,le,ie){var ne=te&be.F,me=te&be.G,Ee=te&be.S,we=te&be.P,Ue=te&be.B,Le=me?M:Ee?M[le]||(M[le]={}):(M[le]||{})[xe],Me=me?Z:Z[le]||(Z[le]={}),He=Me[xe]||(Me[xe]={}),Ge,rt,ct,vt;me&&(ie=le);for(Ge in ie)rt=!ne&&Le&&Le[Ge]!==void 0,ct=(rt?Le:ie)[Ge],vt=Ue&&rt?ye(ct,M):we&&typeof ct=="function"?ye(Function.call,ct):ct,Le&&J(Le,Ge,ct,te&be.U),Me[Ge]!=ct&&q(Me,Ge,vt),we&&He[Ge]!=ct&&(He[Ge]=ct)};M.core=Z,be.F=1,be.G=2,be.S=4,be.P=8,be.B=16,be.W=32,be.U=64,be.R=128,W.exports=be},"./node_modules/core-js/modules/_fails-is-regexp.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(Z){var q=/./;try{"/./"[Z](q)}catch{try{return q[M]=!1,!"/./"[Z](q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(W,N){W.exports=function(S){try{return!!S()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(W,N,S){S("./node_modules/core-js/modules/es6.regexp.exec.js");var M=S("./node_modules/core-js/modules/_redefine.js"),Z=S("./node_modules/core-js/modules/_hide.js"),q=S("./node_modules/core-js/modules/_fails.js"),J=S("./node_modules/core-js/modules/_defined.js"),ye=S("./node_modules/core-js/modules/_wks.js"),xe=S("./node_modules/core-js/modules/_regexp-exec.js"),be=ye("species"),te=!q(function(){var ie=/./;return ie.exec=function(){var ne=[];return ne.groups={a:"7"},ne},"".replace(ie,"$<a>")!=="7"}),le=function(){var ie=/(?:)/,ne=ie.exec;ie.exec=function(){return ne.apply(this,arguments)};var me="ab".split(ie);return me.length===2&&me[0]==="a"&&me[1]==="b"}();W.exports=function(ie,ne,me){var Ee=ye(ie),we=!q(function(){var rt={};return rt[Ee]=function(){return 7},""[ie](rt)!=7}),Ue=we?!q(function(){var rt=!1,ct=/a/;return ct.exec=function(){return rt=!0,null},ie==="split"&&(ct.constructor={},ct.constructor[be]=function(){return ct}),ct[Ee](""),!rt}):void 0;if(!we||!Ue||ie==="replace"&&!te||ie==="split"&&!le){var Le=/./[Ee],Me=me(J,Ee,""[ie],function(ct,vt,Pt,ht,Et){return vt.exec===xe?we&&!Et?{done:!0,value:Le.call(vt,Pt,ht)}:{done:!0,value:ct.call(Pt,vt,ht)}:{done:!1}}),He=Me[0],Ge=Me[1];M(String.prototype,ie,He),Z(RegExp.prototype,Ee,ne==2?function(rt,ct){return Ge.call(rt,this,ct)}:function(rt){return Ge.call(rt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_an-object.js");W.exports=function(){var Z=M(this),q="";return Z.global&&(q+="g"),Z.ignoreCase&&(q+="i"),Z.multiline&&(q+="m"),Z.unicode&&(q+="u"),Z.sticky&&(q+="y"),q}},"./node_modules/core-js/modules/_function-to-string.js":function(W,N,S){W.exports=S("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(W,N){var S=W.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=S)},"./node_modules/core-js/modules/_has.js":function(W,N){var S={}.hasOwnProperty;W.exports=function(M,Z){return S.call(M,Z)}},"./node_modules/core-js/modules/_hide.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_property-desc.js");W.exports=S("./node_modules/core-js/modules/_descriptors.js")?function(q,J,ye){return M.f(q,J,Z(1,ye))}:function(q,J,ye){return q[J]=ye,q}},"./node_modules/core-js/modules/_html.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_global.js").document;W.exports=M&&M.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(W,N,S){W.exports=!S("./node_modules/core-js/modules/_descriptors.js")&&!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(S("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(W,N){W.exports=function(S,M,Z){var q=Z===void 0;switch(M.length){case 0:return q?S():S.call(Z);case 1:return q?S(M[0]):S.call(Z,M[0]);case 2:return q?S(M[0],M[1]):S.call(Z,M[0],M[1]);case 3:return q?S(M[0],M[1],M[2]):S.call(Z,M[0],M[1],M[2]);case 4:return q?S(M[0],M[1],M[2],M[3]):S.call(Z,M[0],M[1],M[2],M[3])}return S.apply(Z,M)}},"./node_modules/core-js/modules/_iobject.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_cof.js");W.exports=Object("z").propertyIsEnumerable(0)?Object:function(Z){return M(Z)=="String"?Z.split(""):Object(Z)}},"./node_modules/core-js/modules/_is-array-iter.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_iterators.js"),Z=S("./node_modules/core-js/modules/_wks.js")("iterator"),q=Array.prototype;W.exports=function(J){return J!==void 0&&(M.Array===J||q[Z]===J)}},"./node_modules/core-js/modules/_is-array.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_cof.js");W.exports=Array.isArray||function(q){return M(q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(W,N){W.exports=function(S){return typeof S=="object"?S!==null:typeof S=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_is-object.js"),Z=S("./node_modules/core-js/modules/_cof.js"),q=S("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(J){var ye;return M(J)&&((ye=J[q])!==void 0?!!ye:Z(J)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_an-object.js");W.exports=function(Z,q,J,ye){try{return ye?q(M(J)[0],J[1]):q(J)}catch(be){var xe=Z.return;throw xe!==void 0&&M(xe.call(Z)),be}}},"./node_modules/core-js/modules/_iter-create.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-create.js"),Z=S("./node_modules/core-js/modules/_property-desc.js"),q=S("./node_modules/core-js/modules/_set-to-string-tag.js"),J={};S("./node_modules/core-js/modules/_hide.js")(J,S("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),W.exports=function(ye,xe,be){ye.prototype=M(J,{next:Z(1,be)}),q(ye,xe+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_library.js"),Z=S("./node_modules/core-js/modules/_export.js"),q=S("./node_modules/core-js/modules/_redefine.js"),J=S("./node_modules/core-js/modules/_hide.js"),ye=S("./node_modules/core-js/modules/_iterators.js"),xe=S("./node_modules/core-js/modules/_iter-create.js"),be=S("./node_modules/core-js/modules/_set-to-string-tag.js"),te=S("./node_modules/core-js/modules/_object-gpo.js"),le=S("./node_modules/core-js/modules/_wks.js")("iterator"),ie=!([].keys&&"next"in[].keys()),ne="@@iterator",me="keys",Ee="values",we=function(){return this};W.exports=function(Ue,Le,Me,He,Ge,rt,ct){xe(Me,Le,He);var vt=function(j){if(!ie&&j in Je)return Je[j];switch(j){case me:return function(){return new Me(this,j)};case Ee:return function(){return new Me(this,j)}}return function(){return new Me(this,j)}},Pt=Le+" Iterator",ht=Ge==Ee,Et=!1,Je=Ue.prototype,Ut=Je[le]||Je[ne]||Ge&&Je[Ge],fn=Ut||vt(Ge),qt=Ge?ht?vt("entries"):fn:void 0,Vt=Le=="Array"&&Je.entries||Ut,un,gn,Se;if(Vt&&(Se=te(Vt.call(new Ue)),Se!==Object.prototype&&Se.next&&(be(Se,Pt,!0),!M&&typeof Se[le]!="function"&&J(Se,le,we))),ht&&Ut&&Ut.name!==Ee&&(Et=!0,fn=function(){return Ut.call(this)}),(!M||ct)&&(ie||Et||!Je[le])&&J(Je,le,fn),ye[Le]=fn,ye[Pt]=we,Ge)if(un={values:ht?fn:vt(Ee),keys:rt?fn:vt(me),entries:qt},ct)for(gn in un)gn in Je||q(Je,gn,un[gn]);else Z(Z.P+Z.F*(ie||Et),Le,un);return un}},"./node_modules/core-js/modules/_iter-detect.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_wks.js")("iterator"),Z=!1;try{var q=[7][M]();q.return=function(){Z=!0},Array.from(q,function(){throw 2})}catch{}W.exports=function(J,ye){if(!ye&&!Z)return!1;var xe=!1;try{var be=[7],te=be[M]();te.next=function(){return{done:xe=!0}},be[M]=function(){return te},J(be)}catch{}return xe}},"./node_modules/core-js/modules/_iter-step.js":function(W,N){W.exports=function(S,M){return{value:M,done:!!S}}},"./node_modules/core-js/modules/_iterators.js":function(W,N){W.exports={}},"./node_modules/core-js/modules/_library.js":function(W,N){W.exports=!1},"./node_modules/core-js/modules/_meta.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_uid.js")("meta"),Z=S("./node_modules/core-js/modules/_is-object.js"),q=S("./node_modules/core-js/modules/_has.js"),J=S("./node_modules/core-js/modules/_object-dp.js").f,ye=0,xe=Object.isExtensible||function(){return!0},be=!S("./node_modules/core-js/modules/_fails.js")(function(){return xe(Object.preventExtensions({}))}),te=function(Ee){J(Ee,M,{value:{i:"O"+ ++ye,w:{}}})},le=function(Ee,we){if(!Z(Ee))return typeof Ee=="symbol"?Ee:(typeof Ee=="string"?"S":"P")+Ee;if(!q(Ee,M)){if(!xe(Ee))return"F";if(!we)return"E";te(Ee)}return Ee[M].i},ie=function(Ee,we){if(!q(Ee,M)){if(!xe(Ee))return!0;if(!we)return!1;te(Ee)}return Ee[M].w},ne=function(Ee){return be&&me.NEED&&xe(Ee)&&!q(Ee,M)&&te(Ee),Ee},me=W.exports={KEY:M,NEED:!1,fastKey:le,getWeak:ie,onFreeze:ne}},"./node_modules/core-js/modules/_object-create.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_object-dps.js"),q=S("./node_modules/core-js/modules/_enum-bug-keys.js"),J=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ye=function(){},xe="prototype",be=function(){var te=S("./node_modules/core-js/modules/_dom-create.js")("iframe"),le=q.length,ie="<",ne=">",me;for(te.style.display="none",S("./node_modules/core-js/modules/_html.js").appendChild(te),te.src="javascript:",me=te.contentWindow.document,me.open(),me.write(ie+"script"+ne+"document.F=Object"+ie+"/script"+ne),me.close(),be=me.F;le--;)delete be[xe][q[le]];return be()};W.exports=Object.create||function(le,ie){var ne;return le!==null?(ye[xe]=M(le),ne=new ye,ye[xe]=null,ne[J]=le):ne=be(),ie===void 0?ne:Z(ne,ie)}},"./node_modules/core-js/modules/_object-dp.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_ie8-dom-define.js"),q=S("./node_modules/core-js/modules/_to-primitive.js"),J=Object.defineProperty;N.f=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(xe,be,te){if(M(xe),be=q(be,!0),M(te),Z)try{return J(xe,be,te)}catch{}if("get"in te||"set"in te)throw TypeError("Accessors not supported!");return"value"in te&&(xe[be]=te.value),xe}},"./node_modules/core-js/modules/_object-dps.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_an-object.js"),q=S("./node_modules/core-js/modules/_object-keys.js");W.exports=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ye,xe){Z(ye);for(var be=q(xe),te=be.length,le=0,ie;te>le;)M.f(ye,ie=be[le++],xe[ie]);return ye}},"./node_modules/core-js/modules/_object-gopd.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-pie.js"),Z=S("./node_modules/core-js/modules/_property-desc.js"),q=S("./node_modules/core-js/modules/_to-iobject.js"),J=S("./node_modules/core-js/modules/_to-primitive.js"),ye=S("./node_modules/core-js/modules/_has.js"),xe=S("./node_modules/core-js/modules/_ie8-dom-define.js"),be=Object.getOwnPropertyDescriptor;N.f=S("./node_modules/core-js/modules/_descriptors.js")?be:function(le,ie){if(le=q(le),ie=J(ie,!0),xe)try{return be(le,ie)}catch{}if(ye(le,ie))return Z(!M.f.call(le,ie),le[ie])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_to-iobject.js"),Z=S("./node_modules/core-js/modules/_object-gopn.js").f,q={}.toString,J=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ye=function(xe){try{return Z(xe)}catch{return J.slice()}};W.exports.f=function(be){return J&&q.call(be)=="[object Window]"?ye(be):Z(M(be))}},"./node_modules/core-js/modules/_object-gopn.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-keys-internal.js"),Z=S("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");N.f=Object.getOwnPropertyNames||function(J){return M(J,Z)}},"./node_modules/core-js/modules/_object-gops.js":function(W,N){N.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_has.js"),Z=S("./node_modules/core-js/modules/_to-object.js"),q=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),J=Object.prototype;W.exports=Object.getPrototypeOf||function(ye){return ye=Z(ye),M(ye,q)?ye[q]:typeof ye.constructor=="function"&&ye instanceof ye.constructor?ye.constructor.prototype:ye instanceof Object?J:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_has.js"),Z=S("./node_modules/core-js/modules/_to-iobject.js"),q=S("./node_modules/core-js/modules/_array-includes.js")(!1),J=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");W.exports=function(ye,xe){var be=Z(ye),te=0,le=[],ie;for(ie in be)ie!=J&&M(be,ie)&&le.push(ie);for(;xe.length>te;)M(be,ie=xe[te++])&&(~q(le,ie)||le.push(ie));return le}},"./node_modules/core-js/modules/_object-keys.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-keys-internal.js"),Z=S("./node_modules/core-js/modules/_enum-bug-keys.js");W.exports=Object.keys||function(J){return M(J,Z)}},"./node_modules/core-js/modules/_object-pie.js":function(W,N){N.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-gopn.js"),Z=S("./node_modules/core-js/modules/_object-gops.js"),q=S("./node_modules/core-js/modules/_an-object.js"),J=S("./node_modules/core-js/modules/_global.js").Reflect;W.exports=J&&J.ownKeys||function(xe){var be=M.f(q(xe)),te=Z.f;return te?be.concat(te(xe)):be}},"./node_modules/core-js/modules/_property-desc.js":function(W,N){W.exports=function(S,M){return{enumerable:!(S&1),configurable:!(S&2),writable:!(S&4),value:M}}},"./node_modules/core-js/modules/_redefine.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_hide.js"),q=S("./node_modules/core-js/modules/_has.js"),J=S("./node_modules/core-js/modules/_uid.js")("src"),ye=S("./node_modules/core-js/modules/_function-to-string.js"),xe="toString",be=(""+ye).split(xe);S("./node_modules/core-js/modules/_core.js").inspectSource=function(te){return ye.call(te)},(W.exports=function(te,le,ie,ne){var me=typeof ie=="function";me&&(q(ie,"name")||Z(ie,"name",le)),te[le]!==ie&&(me&&(q(ie,J)||Z(ie,J,te[le]?""+te[le]:be.join(String(le)))),te===M?te[le]=ie:ne?te[le]?te[le]=ie:Z(te,le,ie):(delete te[le],Z(te,le,ie)))})(Function.prototype,xe,function(){return typeof this=="function"&&this[J]||ye.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_classof.js"),Z=RegExp.prototype.exec;W.exports=function(q,J){var ye=q.exec;if(typeof ye=="function"){var xe=ye.call(q,J);if(typeof xe!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return xe}if(M(q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return Z.call(q,J)}},"./node_modules/core-js/modules/_regexp-exec.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_flags.js"),Z=RegExp.prototype.exec,q=String.prototype.replace,J=Z,ye="lastIndex",xe=function(){var le=/a/,ie=/b*/g;return Z.call(le,"a"),Z.call(ie,"a"),le[ye]!==0||ie[ye]!==0}(),be=/()??/.exec("")[1]!==void 0,te=xe||be;te&&(J=function(ie){var ne=this,me,Ee,we,Ue;return be&&(Ee=new RegExp("^"+ne.source+"$(?!\\s)",M.call(ne))),xe&&(me=ne[ye]),we=Z.call(ne,ie),xe&&we&&(ne[ye]=ne.global?we.index+we[0].length:me),be&&we&&we.length>1&&q.call(we[0],Ee,function(){for(Ue=1;Ue<arguments.length-2;Ue++)arguments[Ue]===void 0&&(we[Ue]=void 0)}),we}),W.exports=J},"./node_modules/core-js/modules/_set-to-string-tag.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-dp.js").f,Z=S("./node_modules/core-js/modules/_has.js"),q=S("./node_modules/core-js/modules/_wks.js")("toStringTag");W.exports=function(J,ye,xe){J&&!Z(J=xe?J:J.prototype,q)&&M(J,q,{configurable:!0,value:ye})}},"./node_modules/core-js/modules/_shared-key.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_shared.js")("keys"),Z=S("./node_modules/core-js/modules/_uid.js");W.exports=function(q){return M[q]||(M[q]=Z(q))}},"./node_modules/core-js/modules/_shared.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_core.js"),Z=S("./node_modules/core-js/modules/_global.js"),q="__core-js_shared__",J=Z[q]||(Z[q]={});(W.exports=function(ye,xe){return J[ye]||(J[ye]=xe!==void 0?xe:{})})("versions",[]).push({version:M.version,mode:S("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_a-function.js"),q=S("./node_modules/core-js/modules/_wks.js")("species");W.exports=function(J,ye){var xe=M(J).constructor,be;return xe===void 0||(be=M(xe)[q])==null?ye:Z(be)}},"./node_modules/core-js/modules/_string-at.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_to-integer.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(q){return function(J,ye){var xe=String(Z(J)),be=M(ye),te=xe.length,le,ie;return be<0||be>=te?q?"":void 0:(le=xe.charCodeAt(be),le<55296||le>56319||be+1===te||(ie=xe.charCodeAt(be+1))<56320||ie>57343?q?xe.charAt(be):le:q?xe.slice(be,be+2):(le-55296<<10)+(ie-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_is-regexp.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(q,J,ye){if(M(J))throw TypeError("String#"+ye+" doesn't accept regex!");return String(Z(q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_to-integer.js"),Z=Math.max,q=Math.min;W.exports=function(J,ye){return J=M(J),J<0?Z(J+ye,0):q(J,ye)}},"./node_modules/core-js/modules/_to-integer.js":function(W,N){var S=Math.ceil,M=Math.floor;W.exports=function(Z){return isNaN(Z=+Z)?0:(Z>0?M:S)(Z)}},"./node_modules/core-js/modules/_to-iobject.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_iobject.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(q){return M(Z(q))}},"./node_modules/core-js/modules/_to-length.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_to-integer.js"),Z=Math.min;W.exports=function(q){return q>0?Z(M(q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_defined.js");W.exports=function(Z){return Object(M(Z))}},"./node_modules/core-js/modules/_to-primitive.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_is-object.js");W.exports=function(Z,q){if(!M(Z))return Z;var J,ye;if(q&&typeof(J=Z.toString)=="function"&&!M(ye=J.call(Z))||typeof(J=Z.valueOf)=="function"&&!M(ye=J.call(Z))||!q&&typeof(J=Z.toString)=="function"&&!M(ye=J.call(Z)))return ye;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(W,N){var S=0,M=Math.random();W.exports=function(Z){return"Symbol(".concat(Z===void 0?"":Z,")_",(++S+M).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_core.js"),q=S("./node_modules/core-js/modules/_library.js"),J=S("./node_modules/core-js/modules/_wks-ext.js"),ye=S("./node_modules/core-js/modules/_object-dp.js").f;W.exports=function(xe){var be=Z.Symbol||(Z.Symbol=q?{}:M.Symbol||{});xe.charAt(0)!="_"&&!(xe in be)&&ye(be,xe,{value:J.f(xe)})}},"./node_modules/core-js/modules/_wks-ext.js":function(W,N,S){N.f=S("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_shared.js")("wks"),Z=S("./node_modules/core-js/modules/_uid.js"),q=S("./node_modules/core-js/modules/_global.js").Symbol,J=typeof q=="function",ye=W.exports=function(xe){return M[xe]||(M[xe]=J&&q[xe]||(J?q:Z)("Symbol."+xe))};ye.store=M},"./node_modules/core-js/modules/core.get-iterator-method.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_classof.js"),Z=S("./node_modules/core-js/modules/_wks.js")("iterator"),q=S("./node_modules/core-js/modules/_iterators.js");W.exports=S("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(J){if(J!=null)return J[Z]||J["@@iterator"]||q[M(J)]}},"./node_modules/core-js/modules/es6.array.from.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_ctx.js"),Z=S("./node_modules/core-js/modules/_export.js"),q=S("./node_modules/core-js/modules/_to-object.js"),J=S("./node_modules/core-js/modules/_iter-call.js"),ye=S("./node_modules/core-js/modules/_is-array-iter.js"),xe=S("./node_modules/core-js/modules/_to-length.js"),be=S("./node_modules/core-js/modules/_create-property.js"),te=S("./node_modules/core-js/modules/core.get-iterator-method.js");Z(Z.S+Z.F*!S("./node_modules/core-js/modules/_iter-detect.js")(function(le){Array.from(le)}),"Array",{from:function(ie){var ne=q(ie),me=typeof this=="function"?this:Array,Ee=arguments.length,we=Ee>1?arguments[1]:void 0,Ue=we!==void 0,Le=0,Me=te(ne),He,Ge,rt,ct;if(Ue&&(we=M(we,Ee>2?arguments[2]:void 0,2)),Me!=null&&!(me==Array&&ye(Me)))for(ct=Me.call(ne),Ge=new me;!(rt=ct.next()).done;Le++)be(Ge,Le,Ue?J(ct,we,[rt.value,Le],!0):rt.value);else for(He=xe(ne.length),Ge=new me(He);He>Le;Le++)be(Ge,Le,Ue?we(ne[Le],Le):ne[Le]);return Ge.length=Le,Ge}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_add-to-unscopables.js"),Z=S("./node_modules/core-js/modules/_iter-step.js"),q=S("./node_modules/core-js/modules/_iterators.js"),J=S("./node_modules/core-js/modules/_to-iobject.js");W.exports=S("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ye,xe){this._t=J(ye),this._i=0,this._k=xe},function(){var ye=this._t,xe=this._k,be=this._i++;return!ye||be>=ye.length?(this._t=void 0,Z(1)):xe=="keys"?Z(0,be):xe=="values"?Z(0,ye[be]):Z(0,[be,ye[be]])},"values"),q.Arguments=q.Array,M("keys"),M("values"),M("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_export.js");M(M.P,"Function",{bind:S("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_object-dp.js").f,Z=Function.prototype,q=/^\s*function ([^ (]*)/,J="name";J in Z||S("./node_modules/core-js/modules/_descriptors.js")&&M(Z,J,{configurable:!0,get:function(){try{return(""+this).match(q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_global.js").isFinite;M(M.S,"Number",{isFinite:function(J){return typeof J=="number"&&Z(J)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_classof.js"),Z={};Z[S("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",Z+""!="[object z]"&&S("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+M(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_regexp-exec.js");S("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:M!==/./.exec},{exec:M})},"./node_modules/core-js/modules/es6.regexp.split.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_is-regexp.js"),Z=S("./node_modules/core-js/modules/_an-object.js"),q=S("./node_modules/core-js/modules/_species-constructor.js"),J=S("./node_modules/core-js/modules/_advance-string-index.js"),ye=S("./node_modules/core-js/modules/_to-length.js"),xe=S("./node_modules/core-js/modules/_regexp-exec-abstract.js"),be=S("./node_modules/core-js/modules/_regexp-exec.js"),te=S("./node_modules/core-js/modules/_fails.js"),le=Math.min,ie=[].push,ne="split",me="length",Ee="lastIndex",we=4294967295,Ue=!te(function(){});S("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Le,Me,He,Ge){var rt;return"abbc"[ne](/(b)*/)[1]=="c"||"test"[ne](/(?:)/,-1)[me]!=4||"ab"[ne](/(?:ab)*/)[me]!=2||"."[ne](/(.?)(.?)/)[me]!=4||"."[ne](/()()/)[me]>1||""[ne](/.?/)[me]?rt=function(ct,vt){var Pt=String(this);if(ct===void 0&&vt===0)return[];if(!M(ct))return He.call(Pt,ct,vt);for(var ht=[],Et=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Je=0,Ut=vt===void 0?we:vt>>>0,fn=new RegExp(ct.source,Et+"g"),qt,Vt,un;(qt=be.call(fn,Pt))&&(Vt=fn[Ee],!(Vt>Je&&(ht.push(Pt.slice(Je,qt.index)),qt[me]>1&&qt.index<Pt[me]&&ie.apply(ht,qt.slice(1)),un=qt[0][me],Je=Vt,ht[me]>=Ut)));)fn[Ee]===qt.index&&fn[Ee]++;return Je===Pt[me]?(un||!fn.test(""))&&ht.push(""):ht.push(Pt.slice(Je)),ht[me]>Ut?ht.slice(0,Ut):ht}:"0"[ne](void 0,0)[me]?rt=function(ct,vt){return ct===void 0&&vt===0?[]:He.call(this,ct,vt)}:rt=He,[function(vt,Pt){var ht=Le(this),Et=vt==null?void 0:vt[Me];return Et!==void 0?Et.call(vt,ht,Pt):rt.call(String(ht),vt,Pt)},function(ct,vt){var Pt=Ge(rt,ct,this,vt,rt!==He);if(Pt.done)return Pt.value;var ht=Z(ct),Et=String(this),Je=q(ht,RegExp),Ut=ht.unicode,fn=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(Ue?"y":"g"),qt=new Je(Ue?ht:"^(?:"+ht.source+")",fn),Vt=vt===void 0?we:vt>>>0;if(Vt===0)return[];if(Et.length===0)return xe(qt,Et)===null?[Et]:[];for(var un=0,gn=0,Se=[];gn<Et.length;){qt.lastIndex=Ue?gn:0;var j=xe(qt,Ue?Et:Et.slice(gn)),O;if(j===null||(O=le(ye(qt.lastIndex+(Ue?0:gn)),Et.length))===un)gn=J(Et,gn,Ut);else{if(Se.push(Et.slice(un,gn)),Se.length===Vt)return Se;for(var _e=1;_e<=j.length-1;_e++)if(Se.push(j[_e]),Se.length===Vt)return Se;gn=un=O}}return Se.push(Et.slice(un)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_string-context.js"),q="includes";M(M.P+M.F*S("./node_modules/core-js/modules/_fails-is-regexp.js")(q),"String",{includes:function(ye){return!!~Z(this,ye,q).indexOf(ye,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_has.js"),q=S("./node_modules/core-js/modules/_descriptors.js"),J=S("./node_modules/core-js/modules/_export.js"),ye=S("./node_modules/core-js/modules/_redefine.js"),xe=S("./node_modules/core-js/modules/_meta.js").KEY,be=S("./node_modules/core-js/modules/_fails.js"),te=S("./node_modules/core-js/modules/_shared.js"),le=S("./node_modules/core-js/modules/_set-to-string-tag.js"),ie=S("./node_modules/core-js/modules/_uid.js"),ne=S("./node_modules/core-js/modules/_wks.js"),me=S("./node_modules/core-js/modules/_wks-ext.js"),Ee=S("./node_modules/core-js/modules/_wks-define.js"),we=S("./node_modules/core-js/modules/_enum-keys.js"),Ue=S("./node_modules/core-js/modules/_is-array.js"),Le=S("./node_modules/core-js/modules/_an-object.js"),Me=S("./node_modules/core-js/modules/_is-object.js"),He=S("./node_modules/core-js/modules/_to-object.js"),Ge=S("./node_modules/core-js/modules/_to-iobject.js"),rt=S("./node_modules/core-js/modules/_to-primitive.js"),ct=S("./node_modules/core-js/modules/_property-desc.js"),vt=S("./node_modules/core-js/modules/_object-create.js"),Pt=S("./node_modules/core-js/modules/_object-gopn-ext.js"),ht=S("./node_modules/core-js/modules/_object-gopd.js"),Et=S("./node_modules/core-js/modules/_object-gops.js"),Je=S("./node_modules/core-js/modules/_object-dp.js"),Ut=S("./node_modules/core-js/modules/_object-keys.js"),fn=ht.f,qt=Je.f,Vt=Pt.f,un=M.Symbol,gn=M.JSON,Se=gn&&gn.stringify,j="prototype",O=ne("_hidden"),_e=ne("toPrimitive"),Ze={}.propertyIsEnumerable,Fe=te("symbol-registry"),ut=te("symbols"),ae=te("op-symbols"),z=Object[j],D=typeof un=="function"&&!!Et.f,ce=M.QObject,Re=!ce||!ce[j]||!ce[j].findChild,Xe=q&&be(function(){return vt(qt({},"a",{get:function(){return qt(this,"a",{value:7}).a}})).a!=7})?function(se,fe,Te){var ze=fn(z,fe);ze&&delete z[fe],qt(se,fe,Te),ze&&se!==z&&qt(z,fe,ze)}:qt,st=function(se){var fe=ut[se]=vt(un[j]);return fe._k=se,fe},en=D&&typeof un.iterator=="symbol"?function(se){return typeof se=="symbol"}:function(se){return se instanceof un},kt=function(fe,Te,ze){return fe===z&&kt(ae,Te,ze),Le(fe),Te=rt(Te,!0),Le(ze),Z(ut,Te)?(ze.enumerable?(Z(fe,O)&&fe[O][Te]&&(fe[O][Te]=!1),ze=vt(ze,{enumerable:ct(0,!1)})):(Z(fe,O)||qt(fe,O,ct(1,{})),fe[O][Te]=!0),Xe(fe,Te,ze)):qt(fe,Te,ze)},yn=function(fe,Te){Le(fe);for(var ze=we(Te=Ge(Te)),qe=0,Ve=ze.length,$e;Ve>qe;)kt(fe,$e=ze[qe++],Te[$e]);return fe},An=function(fe,Te){return Te===void 0?vt(fe):yn(vt(fe),Te)},_n=function(fe){var Te=Ze.call(this,fe=rt(fe,!0));return this===z&&Z(ut,fe)&&!Z(ae,fe)?!1:Te||!Z(this,fe)||!Z(ut,fe)||Z(this,O)&&this[O][fe]?Te:!0},wr=function(fe,Te){if(fe=Ge(fe),Te=rt(Te,!0),!(fe===z&&Z(ut,Te)&&!Z(ae,Te))){var ze=fn(fe,Te);return ze&&Z(ut,Te)&&!(Z(fe,O)&&fe[O][Te])&&(ze.enumerable=!0),ze}},pi=function(fe){for(var Te=Vt(Ge(fe)),ze=[],qe=0,Ve;Te.length>qe;)!Z(ut,Ve=Te[qe++])&&Ve!=O&&Ve!=xe&&ze.push(Ve);return ze},fr=function(fe){for(var Te=fe===z,ze=Vt(Te?ae:Ge(fe)),qe=[],Ve=0,$e;ze.length>Ve;)Z(ut,$e=ze[Ve++])&&(!Te||Z(z,$e))&&qe.push(ut[$e]);return qe};D||(un=function(){if(this instanceof un)throw TypeError("Symbol is not a constructor!");var fe=ie(arguments.length>0?arguments[0]:void 0),Te=function(ze){this===z&&Te.call(ae,ze),Z(this,O)&&Z(this[O],fe)&&(this[O][fe]=!1),Xe(this,fe,ct(1,ze))};return q&&Re&&Xe(z,fe,{configurable:!0,set:Te}),st(fe)},ye(un[j],"toString",function(){return this._k}),ht.f=wr,Je.f=kt,S("./node_modules/core-js/modules/_object-gopn.js").f=Pt.f=pi,S("./node_modules/core-js/modules/_object-pie.js").f=_n,Et.f=fr,q&&!S("./node_modules/core-js/modules/_library.js")&&ye(z,"propertyIsEnumerable",_n,!0),me.f=function(se){return st(ne(se))}),J(J.G+J.W+J.F*!D,{Symbol:un});for(var On="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),dr=0;On.length>dr;)ne(On[dr++]);for(var mi=Ut(ne.store),ke=0;mi.length>ke;)Ee(mi[ke++]);J(J.S+J.F*!D,"Symbol",{for:function(se){return Z(Fe,se+="")?Fe[se]:Fe[se]=un(se)},keyFor:function(fe){if(!en(fe))throw TypeError(fe+" is not a symbol!");for(var Te in Fe)if(Fe[Te]===fe)return Te},useSetter:function(){Re=!0},useSimple:function(){Re=!1}}),J(J.S+J.F*!D,"Object",{create:An,defineProperty:kt,defineProperties:yn,getOwnPropertyDescriptor:wr,getOwnPropertyNames:pi,getOwnPropertySymbols:fr});var re=be(function(){Et.f(1)});J(J.S+J.F*re,"Object",{getOwnPropertySymbols:function(fe){return Et.f(He(fe))}}),gn&&J(J.S+J.F*(!D||be(function(){var se=un();return Se([se])!="[null]"||Se({a:se})!="{}"||Se(Object(se))!="{}"})),"JSON",{stringify:function(fe){for(var Te=[fe],ze=1,qe,Ve;arguments.length>ze;)Te.push(arguments[ze++]);if(Ve=qe=Te[1],!(!Me(qe)&&fe===void 0||en(fe)))return Ue(qe)||(qe=function($e,Qe){if(typeof Ve=="function"&&(Qe=Ve.call(this,$e,Qe)),!en(Qe))return Qe}),Te[1]=qe,Se.apply(gn,Te)}}),un[j][_e]||S("./node_modules/core-js/modules/_hide.js")(un[j],_e,un[j].valueOf),le(un,"Symbol"),le(Math,"Math",!0),le(M.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_array-includes.js")(!0);M(M.P,"Array",{includes:function(J){return Z(this,J,arguments.length>1?arguments[1]:void 0)}}),S("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(W,N,S){var M=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_own-keys.js"),q=S("./node_modules/core-js/modules/_to-iobject.js"),J=S("./node_modules/core-js/modules/_object-gopd.js"),ye=S("./node_modules/core-js/modules/_create-property.js");M(M.S,"Object",{getOwnPropertyDescriptors:function(be){for(var te=q(be),le=J.f,ie=Z(te),ne={},me=0,Ee,we;ie.length>me;)we=le(te,Ee=ie[me++]),we!==void 0&&ye(ne,Ee,we);return ne}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(W,N,S){S("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(W,N,S){for(var M=S("./node_modules/core-js/modules/es6.array.iterator.js"),Z=S("./node_modules/core-js/modules/_object-keys.js"),q=S("./node_modules/core-js/modules/_redefine.js"),J=S("./node_modules/core-js/modules/_global.js"),ye=S("./node_modules/core-js/modules/_hide.js"),xe=S("./node_modules/core-js/modules/_iterators.js"),be=S("./node_modules/core-js/modules/_wks.js"),te=be("iterator"),le=be("toStringTag"),ie=xe.Array,ne={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},me=Z(ne),Ee=0;Ee<me.length;Ee++){var we=me[Ee],Ue=ne[we],Le=J[we],Me=Le&&Le.prototype,He;if(Me&&(Me[te]||ye(Me,te,ie),Me[le]||ye(Me,le,we),xe[we]=ie,Ue))for(He in M)Me[He]||q(Me,He,M[He],!0)}},"./node_modules/crypt/crypt.js":function(W,N){(function(){var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M={rotl:function(Z,q){return Z<<q|Z>>>32-q},rotr:function(Z,q){return Z<<32-q|Z>>>q},endian:function(Z){if(Z.constructor==Number)return M.rotl(Z,8)&16711935|M.rotl(Z,24)&4278255360;for(var q=0;q<Z.length;q++)Z[q]=M.endian(Z[q]);return Z},randomBytes:function(Z){for(var q=[];Z>0;Z--)q.push(Math.floor(Math.random()*256));return q},bytesToWords:function(Z){for(var q=[],J=0,ye=0;J<Z.length;J++,ye+=8)q[ye>>>5]|=Z[J]<<24-ye%32;return q},wordsToBytes:function(Z){for(var q=[],J=0;J<Z.length*32;J+=8)q.push(Z[J>>>5]>>>24-J%32&255);return q},bytesToHex:function(Z){for(var q=[],J=0;J<Z.length;J++)q.push((Z[J]>>>4).toString(16)),q.push((Z[J]&15).toString(16));return q.join("")},hexToBytes:function(Z){for(var q=[],J=0;J<Z.length;J+=2)q.push(parseInt(Z.substr(J,2),16));return q},bytesToBase64:function(Z){for(var q=[],J=0;J<Z.length;J+=3)for(var ye=Z[J]<<16|Z[J+1]<<8|Z[J+2],xe=0;xe<4;xe++)J*8+xe*6<=Z.length*8?q.push(S.charAt(ye>>>6*(3-xe)&63)):q.push("=");return q.join("")},base64ToBytes:function(Z){Z=Z.replace(/[^A-Z0-9+\/]/ig,"");for(var q=[],J=0,ye=0;J<Z.length;ye=++J%4)ye!=0&&q.push((S.indexOf(Z.charAt(J-1))&Math.pow(2,-2*ye+8)-1)<<ye*2|S.indexOf(Z.charAt(J))>>>6-ye*2);return q}};W.exports=M})()},"./node_modules/is-buffer/index.js":function(W,N){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */W.exports=function(Z){return Z!=null&&(S(Z)||M(Z)||!!Z._isBuffer)};function S(Z){return!!Z.constructor&&typeof Z.constructor.isBuffer=="function"&&Z.constructor.isBuffer(Z)}function M(Z){return typeof Z.readFloatLE=="function"&&typeof Z.slice=="function"&&S(Z.slice(0,0))}},"./node_modules/md5/md5.js":function(W,N,S){(function(){var M=S("./node_modules/crypt/crypt.js"),Z=S("./node_modules/charenc/charenc.js").utf8,q=S("./node_modules/is-buffer/index.js"),J=S("./node_modules/charenc/charenc.js").bin,ye=function(xe,be){xe.constructor==String?be&&be.encoding==="binary"?xe=J.stringToBytes(xe):xe=Z.stringToBytes(xe):q(xe)?xe=Array.prototype.slice.call(xe,0):!Array.isArray(xe)&&xe.constructor!==Uint8Array&&(xe=xe.toString());for(var te=M.bytesToWords(xe),le=xe.length*8,ie=1732584193,ne=-271733879,me=-1732584194,Ee=271733878,we=0;we<te.length;we++)te[we]=(te[we]<<8|te[we]>>>24)&16711935|(te[we]<<24|te[we]>>>8)&4278255360;te[le>>>5]|=128<<le%32,te[(le+64>>>9<<4)+14]=le;for(var Ue=ye._ff,Le=ye._gg,Me=ye._hh,He=ye._ii,we=0;we<te.length;we+=16){var Ge=ie,rt=ne,ct=me,vt=Ee;ie=Ue(ie,ne,me,Ee,te[we+0],7,-680876936),Ee=Ue(Ee,ie,ne,me,te[we+1],12,-389564586),me=Ue(me,Ee,ie,ne,te[we+2],17,606105819),ne=Ue(ne,me,Ee,ie,te[we+3],22,-1044525330),ie=Ue(ie,ne,me,Ee,te[we+4],7,-176418897),Ee=Ue(Ee,ie,ne,me,te[we+5],12,1200080426),me=Ue(me,Ee,ie,ne,te[we+6],17,-1473231341),ne=Ue(ne,me,Ee,ie,te[we+7],22,-45705983),ie=Ue(ie,ne,me,Ee,te[we+8],7,1770035416),Ee=Ue(Ee,ie,ne,me,te[we+9],12,-1958414417),me=Ue(me,Ee,ie,ne,te[we+10],17,-42063),ne=Ue(ne,me,Ee,ie,te[we+11],22,-1990404162),ie=Ue(ie,ne,me,Ee,te[we+12],7,1804603682),Ee=Ue(Ee,ie,ne,me,te[we+13],12,-40341101),me=Ue(me,Ee,ie,ne,te[we+14],17,-1502002290),ne=Ue(ne,me,Ee,ie,te[we+15],22,1236535329),ie=Le(ie,ne,me,Ee,te[we+1],5,-165796510),Ee=Le(Ee,ie,ne,me,te[we+6],9,-1069501632),me=Le(me,Ee,ie,ne,te[we+11],14,643717713),ne=Le(ne,me,Ee,ie,te[we+0],20,-373897302),ie=Le(ie,ne,me,Ee,te[we+5],5,-701558691),Ee=Le(Ee,ie,ne,me,te[we+10],9,38016083),me=Le(me,Ee,ie,ne,te[we+15],14,-660478335),ne=Le(ne,me,Ee,ie,te[we+4],20,-405537848),ie=Le(ie,ne,me,Ee,te[we+9],5,568446438),Ee=Le(Ee,ie,ne,me,te[we+14],9,-1019803690),me=Le(me,Ee,ie,ne,te[we+3],14,-187363961),ne=Le(ne,me,Ee,ie,te[we+8],20,1163531501),ie=Le(ie,ne,me,Ee,te[we+13],5,-1444681467),Ee=Le(Ee,ie,ne,me,te[we+2],9,-51403784),me=Le(me,Ee,ie,ne,te[we+7],14,1735328473),ne=Le(ne,me,Ee,ie,te[we+12],20,-1926607734),ie=Me(ie,ne,me,Ee,te[we+5],4,-378558),Ee=Me(Ee,ie,ne,me,te[we+8],11,-2022574463),me=Me(me,Ee,ie,ne,te[we+11],16,1839030562),ne=Me(ne,me,Ee,ie,te[we+14],23,-35309556),ie=Me(ie,ne,me,Ee,te[we+1],4,-1530992060),Ee=Me(Ee,ie,ne,me,te[we+4],11,1272893353),me=Me(me,Ee,ie,ne,te[we+7],16,-155497632),ne=Me(ne,me,Ee,ie,te[we+10],23,-1094730640),ie=Me(ie,ne,me,Ee,te[we+13],4,681279174),Ee=Me(Ee,ie,ne,me,te[we+0],11,-358537222),me=Me(me,Ee,ie,ne,te[we+3],16,-722521979),ne=Me(ne,me,Ee,ie,te[we+6],23,76029189),ie=Me(ie,ne,me,Ee,te[we+9],4,-640364487),Ee=Me(Ee,ie,ne,me,te[we+12],11,-421815835),me=Me(me,Ee,ie,ne,te[we+15],16,530742520),ne=Me(ne,me,Ee,ie,te[we+2],23,-995338651),ie=He(ie,ne,me,Ee,te[we+0],6,-198630844),Ee=He(Ee,ie,ne,me,te[we+7],10,1126891415),me=He(me,Ee,ie,ne,te[we+14],15,-1416354905),ne=He(ne,me,Ee,ie,te[we+5],21,-57434055),ie=He(ie,ne,me,Ee,te[we+12],6,1700485571),Ee=He(Ee,ie,ne,me,te[we+3],10,-1894986606),me=He(me,Ee,ie,ne,te[we+10],15,-1051523),ne=He(ne,me,Ee,ie,te[we+1],21,-2054922799),ie=He(ie,ne,me,Ee,te[we+8],6,1873313359),Ee=He(Ee,ie,ne,me,te[we+15],10,-30611744),me=He(me,Ee,ie,ne,te[we+6],15,-1560198380),ne=He(ne,me,Ee,ie,te[we+13],21,1309151649),ie=He(ie,ne,me,Ee,te[we+4],6,-145523070),Ee=He(Ee,ie,ne,me,te[we+11],10,-1120210379),me=He(me,Ee,ie,ne,te[we+2],15,718787259),ne=He(ne,me,Ee,ie,te[we+9],21,-343485551),ie=ie+Ge>>>0,ne=ne+rt>>>0,me=me+ct>>>0,Ee=Ee+vt>>>0}return M.endian([ie,ne,me,Ee])};ye._ff=function(xe,be,te,le,ie,ne,me){var Ee=xe+(be&te|~be&le)+(ie>>>0)+me;return(Ee<<ne|Ee>>>32-ne)+be},ye._gg=function(xe,be,te,le,ie,ne,me){var Ee=xe+(be&le|te&~le)+(ie>>>0)+me;return(Ee<<ne|Ee>>>32-ne)+be},ye._hh=function(xe,be,te,le,ie,ne,me){var Ee=xe+(be^te^le)+(ie>>>0)+me;return(Ee<<ne|Ee>>>32-ne)+be},ye._ii=function(xe,be,te,le,ie,ne,me){var Ee=xe+(te^(be|~le))+(ie>>>0)+me;return(Ee<<ne|Ee>>>32-ne)+be},ye._blocksize=16,ye._digestsize=16,W.exports=function(xe,be){if(xe==null)throw new Error("Illegal argument "+xe);var te=M.wordsToBytes(ye(xe,be));return be&&be.asBytes?te:be&&be.asString?J.bytesToString(te):M.bytesToHex(te)}})()},"./node_modules/regenerator-runtime/runtime.js":function(W,N,S){var M=function(Z){var q=Object.prototype,J=q.hasOwnProperty,ye,xe=typeof Symbol=="function"?Symbol:{},be=xe.iterator||"@@iterator",te=xe.asyncIterator||"@@asyncIterator",le=xe.toStringTag||"@@toStringTag";function ie(j,O,_e){return Object.defineProperty(j,O,{value:_e,enumerable:!0,configurable:!0,writable:!0}),j[O]}try{ie({},"")}catch{ie=function(O,_e,Ze){return O[_e]=Ze}}function ne(j,O,_e,Ze){var Fe=O&&O.prototype instanceof He?O:He,ut=Object.create(Fe.prototype),ae=new un(Ze||[]);return ut._invoke=Ut(j,_e,ae),ut}Z.wrap=ne;function me(j,O,_e){try{return{type:"normal",arg:j.call(O,_e)}}catch(Ze){return{type:"throw",arg:Ze}}}var Ee="suspendedStart",we="suspendedYield",Ue="executing",Le="completed",Me={};function He(){}function Ge(){}function rt(){}var ct={};ct[be]=function(){return this};var vt=Object.getPrototypeOf,Pt=vt&&vt(vt(gn([])));Pt&&Pt!==q&&J.call(Pt,be)&&(ct=Pt);var ht=rt.prototype=He.prototype=Object.create(ct);Ge.prototype=ht.constructor=rt,rt.constructor=Ge,Ge.displayName=ie(rt,le,"GeneratorFunction");function Et(j){["next","throw","return"].forEach(function(O){ie(j,O,function(_e){return this._invoke(O,_e)})})}Z.isGeneratorFunction=function(j){var O=typeof j=="function"&&j.constructor;return O?O===Ge||(O.displayName||O.name)==="GeneratorFunction":!1},Z.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,rt):(j.__proto__=rt,ie(j,le,"GeneratorFunction")),j.prototype=Object.create(ht),j},Z.awrap=function(j){return{__await:j}};function Je(j,O){function _e(ut,ae,z,D){var ce=me(j[ut],j,ae);if(ce.type==="throw")D(ce.arg);else{var Re=ce.arg,Xe=Re.value;return Xe&&typeof Xe=="object"&&J.call(Xe,"__await")?O.resolve(Xe.__await).then(function(st){_e("next",st,z,D)},function(st){_e("throw",st,z,D)}):O.resolve(Xe).then(function(st){Re.value=st,z(Re)},function(st){return _e("throw",st,z,D)})}}var Ze;function Fe(ut,ae){function z(){return new O(function(D,ce){_e(ut,ae,D,ce)})}return Ze=Ze?Ze.then(z,z):z()}this._invoke=Fe}Et(Je.prototype),Je.prototype[te]=function(){return this},Z.AsyncIterator=Je,Z.async=function(j,O,_e,Ze,Fe){Fe===void 0&&(Fe=Promise);var ut=new Je(ne(j,O,_e,Ze),Fe);return Z.isGeneratorFunction(O)?ut:ut.next().then(function(ae){return ae.done?ae.value:ut.next()})};function Ut(j,O,_e){var Ze=Ee;return function(ut,ae){if(Ze===Ue)throw new Error("Generator is already running");if(Ze===Le){if(ut==="throw")throw ae;return Se()}for(_e.method=ut,_e.arg=ae;;){var z=_e.delegate;if(z){var D=fn(z,_e);if(D){if(D===Me)continue;return D}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if(Ze===Ee)throw Ze=Le,_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);Ze=Ue;var ce=me(j,O,_e);if(ce.type==="normal"){if(Ze=_e.done?Le:we,ce.arg===Me)continue;return{value:ce.arg,done:_e.done}}else ce.type==="throw"&&(Ze=Le,_e.method="throw",_e.arg=ce.arg)}}}function fn(j,O){var _e=j.iterator[O.method];if(_e===ye){if(O.delegate=null,O.method==="throw"){if(j.iterator.return&&(O.method="return",O.arg=ye,fn(j,O),O.method==="throw"))return Me;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return Me}var Ze=me(_e,j.iterator,O.arg);if(Ze.type==="throw")return O.method="throw",O.arg=Ze.arg,O.delegate=null,Me;var Fe=Ze.arg;if(!Fe)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,Me;if(Fe.done)O[j.resultName]=Fe.value,O.next=j.nextLoc,O.method!=="return"&&(O.method="next",O.arg=ye);else return Fe;return O.delegate=null,Me}Et(ht),ie(ht,le,"Generator"),ht[be]=function(){return this},ht.toString=function(){return"[object Generator]"};function qt(j){var O={tryLoc:j[0]};1 in j&&(O.catchLoc=j[1]),2 in j&&(O.finallyLoc=j[2],O.afterLoc=j[3]),this.tryEntries.push(O)}function Vt(j){var O=j.completion||{};O.type="normal",delete O.arg,j.completion=O}function un(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(qt,this),this.reset(!0)}Z.keys=function(j){var O=[];for(var _e in j)O.push(_e);return O.reverse(),function Ze(){for(;O.length;){var Fe=O.pop();if(Fe in j)return Ze.value=Fe,Ze.done=!1,Ze}return Ze.done=!0,Ze}};function gn(j){if(j){var O=j[be];if(O)return O.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var _e=-1,Ze=function Fe(){for(;++_e<j.length;)if(J.call(j,_e))return Fe.value=j[_e],Fe.done=!1,Fe;return Fe.value=ye,Fe.done=!0,Fe};return Ze.next=Ze}}return{next:Se}}Z.values=gn;function Se(){return{value:ye,done:!0}}return un.prototype={constructor:un,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=ye,this.done=!1,this.delegate=null,this.method="next",this.arg=ye,this.tryEntries.forEach(Vt),!j)for(var O in this)O.charAt(0)==="t"&&J.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=ye)},stop:function(){this.done=!0;var j=this.tryEntries[0],O=j.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var O=this;function _e(D,ce){return ut.type="throw",ut.arg=j,O.next=D,ce&&(O.method="next",O.arg=ye),!!ce}for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var Fe=this.tryEntries[Ze],ut=Fe.completion;if(Fe.tryLoc==="root")return _e("end");if(Fe.tryLoc<=this.prev){var ae=J.call(Fe,"catchLoc"),z=J.call(Fe,"finallyLoc");if(ae&&z){if(this.prev<Fe.catchLoc)return _e(Fe.catchLoc,!0);if(this.prev<Fe.finallyLoc)return _e(Fe.finallyLoc)}else if(ae){if(this.prev<Fe.catchLoc)return _e(Fe.catchLoc,!0)}else if(z){if(this.prev<Fe.finallyLoc)return _e(Fe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(j,O){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var Ze=this.tryEntries[_e];if(Ze.tryLoc<=this.prev&&J.call(Ze,"finallyLoc")&&this.prev<Ze.finallyLoc){var Fe=Ze;break}}Fe&&(j==="break"||j==="continue")&&Fe.tryLoc<=O&&O<=Fe.finallyLoc&&(Fe=null);var ut=Fe?Fe.completion:{};return ut.type=j,ut.arg=O,Fe?(this.method="next",this.next=Fe.finallyLoc,Me):this.complete(ut)},complete:function(j,O){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&O&&(this.next=O),Me},finish:function(j){for(var O=this.tryEntries.length-1;O>=0;--O){var _e=this.tryEntries[O];if(_e.finallyLoc===j)return this.complete(_e.completion,_e.afterLoc),Vt(_e),Me}},catch:function(j){for(var O=this.tryEntries.length-1;O>=0;--O){var _e=this.tryEntries[O];if(_e.tryLoc===j){var Ze=_e.completion;if(Ze.type==="throw"){var Fe=Ze.arg;Vt(_e)}return Fe}}throw new Error("illegal catch attempt")},delegateYield:function(j,O,_e){return this.delegate={iterator:gn(j),resultName:O,nextLoc:_e},this.method==="next"&&(this.arg=ye),Me}},Z}(W.exports);try{regeneratorRuntime=M}catch{Function("r","regeneratorRuntime = r")(M)}},"./src/api.js":function(W,N,S){S.r(N),S.d(N,"setup",function(){return Ue}),S.d(N,"setupCache",function(){return we}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var M=S("axios"),Z=S.n(M),q=S("./src/request.js"),J=S("./src/cache.js");S.d(N,"serializeQuery",function(){return J.serializeQuery});var ye=S("./src/config.js"),xe=S("./src/utilities.js");function be(Le,Me){if(Le==null)return{};var He=te(Le,Me),Ge,rt;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Le);for(rt=0;rt<ct.length;rt++)Ge=ct[rt],!(Me.indexOf(Ge)>=0)&&Object.prototype.propertyIsEnumerable.call(Le,Ge)&&(He[Ge]=Le[Ge])}return He}function te(Le,Me){if(Le==null)return{};var He={},Ge=Object.keys(Le),rt,ct;for(ct=0;ct<Ge.length;ct++)rt=Ge[ct],!(Me.indexOf(rt)>=0)&&(He[rt]=Le[rt]);return He}function le(Le,Me){var He=Object.keys(Le);if(Object.getOwnPropertySymbols){var Ge=Object.getOwnPropertySymbols(Le);Me&&(Ge=Ge.filter(function(rt){return Object.getOwnPropertyDescriptor(Le,rt).enumerable})),He.push.apply(He,Ge)}return He}function ie(Le){for(var Me=1;Me<arguments.length;Me++){var He=arguments[Me]!=null?arguments[Me]:{};Me%2?le(Object(He),!0).forEach(function(Ge){ne(Le,Ge,He[Ge])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Le,Object.getOwnPropertyDescriptors(He)):le(Object(He)).forEach(function(Ge){Object.defineProperty(Le,Ge,Object.getOwnPropertyDescriptor(He,Ge))})}return Le}function ne(Le,Me,He){return Me in Le?Object.defineProperty(Le,Me,{value:He,enumerable:!0,configurable:!0,writable:!0}):Le[Me]=He,Le}function me(Le,Me,He,Ge,rt,ct,vt){try{var Pt=Le[ct](vt),ht=Pt.value}catch(Et){He(Et);return}Pt.done?Me(ht):Promise.resolve(ht).then(Ge,rt)}function Ee(Le){return function(){var Me=this,He=arguments;return new Promise(function(Ge,rt){var ct=Le.apply(Me,He);function vt(ht){me(ct,Ge,rt,vt,Pt,"next",ht)}function Pt(ht){me(ct,Ge,rt,vt,Pt,"throw",ht)}vt(void 0)})}}function we(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Le=Object(ye.makeConfig)(Le);function Me(Ge){return He.apply(this,arguments)}function He(){return He=Ee(regeneratorRuntime.mark(function Ge(rt){var ct,vt,Pt,ht,Et;return regeneratorRuntime.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return ct=Object(ye.mergeRequestConfig)(Le,rt),Ut.next=3,Object(q.default)(ct,rt);case 3:if(vt=Ut.sent,Pt=vt.next,Object(xe.isFunction)(Pt)){Ut.next=7;break}return Ut.abrupt("return",Pt);case 7:return Ut.prev=7,Ut.next=10,ct.adapter(rt);case 10:vt=Ut.sent,Ut.next=16;break;case 13:Ut.prev=13,Ut.t0=Ut.catch(7),ht=Ut.t0;case 16:if(!ht){Ut.next=31;break}if(Et=Object(xe.isFunction)(ct.readOnError)?ct.readOnError(ht,rt):ct.readOnError,!Et){Ut.next=30;break}return Ut.prev=19,ct.acceptStale=!0,Ut.next=23,Object(q.default)(ct,rt);case 23:return vt=Ut.sent,vt.next.request.stale=!0,Ut.abrupt("return",vt.next);case 28:Ut.prev=28,Ut.t1=Ut.catch(19);case 30:throw ht;case 31:return Ut.abrupt("return",Pt(vt));case 32:case"end":return Ut.stop()}},Ge,null,[[7,13],[19,28]])})),He.apply(this,arguments)}return{adapter:Me,config:Le,store:Le.store}}function Ue(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Me=ie(ie(ie({},ye.defaults.axios),Le),{},{cache:ie(ie({},ye.defaults.axios.cache),Le.cache)}),He=we(Me.cache);Me.cache;var Ge=be(Me,["cache"]),rt=Z.a.create(ie(ie({},Ge),{},{adapter:He.adapter}));return rt.cache=He.store,rt}N.default={setup:Ue,setupCache:we,serializeQuery:J.serializeQuery}},"./src/cache.js":function(W,N,S){S.r(N),S.d(N,"read",function(){return le}),S.d(N,"write",function(){return be}),S.d(N,"key",function(){return ne}),S.d(N,"invalidate",function(){return we}),S.d(N,"serializeQuery",function(){return Ue}),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var M=S("./src/utilities.js"),Z=S("./node_modules/md5/md5.js"),q=S.n(Z),J=S("./src/serialize.js");function ye(Le,Me,He,Ge,rt,ct,vt){try{var Pt=Le[ct](vt),ht=Pt.value}catch(Et){He(Et);return}Pt.done?Me(ht):Promise.resolve(ht).then(Ge,rt)}function xe(Le){return function(){var Me=this,He=arguments;return new Promise(function(Ge,rt){var ct=Le.apply(Me,He);function vt(ht){ye(ct,Ge,rt,vt,Pt,"next",ht)}function Pt(ht){ye(ct,Ge,rt,vt,Pt,"throw",ht)}vt(void 0)})}}function be(Le,Me,He){return te.apply(this,arguments)}function te(){return te=xe(regeneratorRuntime.mark(function Le(Me,He,Ge){var rt;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,rt={expires:Me.expires,data:Object(J.default)(Me,He,Ge)},vt.next=4,Me.store.setItem(Me.uuid,rt);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),Me.debug("Could not store response",vt.t0),!Me.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,Me.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),Me.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Le,null,[[0,6],[10,15]])})),te.apply(this,arguments)}function le(Le,Me){return ie.apply(this,arguments)}function ie(){return ie=xe(regeneratorRuntime.mark(function Le(Me,He){var Ge,rt,ct,vt,Pt,ht,Et,Je;return regeneratorRuntime.wrap(function(fn){for(;;)switch(fn.prev=fn.next){case 0:return Ge=Me.uuid,rt=Me.ignoreCache,fn.next=3,Me.store.getItem(Ge);case 3:if(ct=fn.sent,!(rt||!ct||!ct.data)){fn.next=10;break}throw Me.debug("cache-miss",He.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(Pt=ct.expires,ht=ct.data,Et=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!Et&&!Me.acceptStale&&Pt!==0&&Pt<Date.now())){fn.next=18;break}throw Me.debug("cache-stale",He.url),Je=new Error,Je.reason="cache-stale",Je.message="Entry is stale",Je;case 18:return Me.debug(Me.acceptStale?"cache-hit-stale":"cache-hit",He.url),fn.abrupt("return",ht);case 20:case"end":return fn.stop()}},Le)})),ie.apply(this,arguments)}function ne(Le){if(Object(M.isFunction)(Le.key))return Le.key;var Me;return Object(M.isString)(Le.key)?Me=function(Ge){var rt="".concat(Ge.baseURL?Ge.baseURL:"").concat(Ge.url),ct="".concat(Le.key,"/").concat(rt).concat(Ue(Ge));return Ge.data?ct+q()(Ge.data):ct}:Me=function(Ge){var rt="".concat(Ge.baseURL?Ge.baseURL:"").concat(Ge.url),ct=rt+Ue(Ge);return Ge.data?ct+q()(Ge.data):ct},Me}function me(Le,Me){return Ee.apply(this,arguments)}function Ee(){return Ee=xe(regeneratorRuntime.mark(function Le(Me,He){var Ge;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(Ge=He.method.toLowerCase(),!Me.exclude.methods.includes(Ge)){ct.next=4;break}return ct.next=4,Me.store.removeItem(Me.uuid);case 4:case"end":return ct.stop()}},Le)})),Ee.apply(this,arguments)}function we(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(M.isFunction)(Le.invalidate)?Le.invalidate:me}function Ue(Le){if(!Le.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Le.params);var Me=Le.params,He=Le.params instanceof URLSearchParams;return He||(Me=new URLSearchParams,Object.keys(Le.params).forEach(function(Ge){return Me.append(Ge,Le.params[Ge])})),"?".concat(Me.toString())}N.default={read:le,write:be,key:ne,invalidate:we,serializeQuery:Ue}},"./src/config.js":function(W,N,S){S.r(N),S.d(N,"defaults",function(){return ie}),S.d(N,"makeConfig",function(){return me}),S.d(N,"mergeRequestConfig",function(){return Ee}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var M=S("axios"),Z=S.n(M),q=S("./src/memory.js"),J=S("./src/cache.js");function ye(we,Ue){var Le=Object.keys(we);if(Object.getOwnPropertySymbols){var Me=Object.getOwnPropertySymbols(we);Ue&&(Me=Me.filter(function(He){return Object.getOwnPropertyDescriptor(we,He).enumerable})),Le.push.apply(Le,Me)}return Le}function xe(we){for(var Ue=1;Ue<arguments.length;Ue++){var Le=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?ye(Object(Le),!0).forEach(function(Me){be(we,Me,Le[Me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(we,Object.getOwnPropertyDescriptors(Le)):ye(Object(Le)).forEach(function(Me){Object.defineProperty(we,Me,Object.getOwnPropertyDescriptor(Le,Me))})}return we}function be(we,Ue,Le){return Ue in we?Object.defineProperty(we,Ue,{value:Le,enumerable:!0,configurable:!0,writable:!0}):we[Ue]=Le,we}var te=function(){},le=function(){for(var Ue,Le=arguments.length,Me=new Array(Le),He=0;He<Le;He++)Me[He]=arguments[He];return(Ue=console).log.apply(Ue,["[axios-cache-adapter]"].concat(Me))},ie={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:Z.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ne=["limit","store","adapter","uuid","acceptStale"],me=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=xe(xe(xe({},ie.cache),Ue),{},{exclude:xe(xe({},ie.cache.exclude),Ue.exclude)});return Le.key=Object(J.key)(Le),Le.invalidate=Object(J.invalidate)(Le),Le.debug!==!1?Le.debug=typeof Le.debug=="function"?Le.debug:le:Le.debug=te,Le.store||(Le.store=new q.default),Le.debug("Global cache config",Le),Le},Ee=function(Ue,Le){var Me=Le.cache||{};Me&&ne.forEach(function(Ge){return Me[Ge]?delete Me[Ge]:void 0});var He=xe(xe(xe({},Ue),Me),{},{exclude:xe(xe({},Ue.exclude),Me.exclude)});return He.debug===!0&&(He.debug=le),Me.key&&(He.key=Object(J.key)(Me)),He.uuid=He.key(Le),Ue.debug("Request config for ".concat(Le.url),He),He};N.default={defaults:ie,makeConfig:me,mergeRequestConfig:Ee}},"./src/exclude.js":function(W,N,S){S.r(N),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js");var M=S("./src/utilities.js");function Z(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=arguments.length>1?arguments[1]:void 0,ye=q.exclude,xe=ye===void 0?{}:ye,be=q.debug,te=J.method.toLowerCase();if(te==="head"||xe.methods.includes(te))return be("Excluding request by HTTP method ".concat(J.url)),!0;if(typeof xe.filter=="function"&&xe.filter(J))return be("Excluding request by filter ".concat(J.url)),!0;var le=/\?.*$/.test(J.url)||Object(M.isObject)(J.params)&&Object.keys(J.params).length!==0||typeof URLSearchParams<"u"&&J.params instanceof URLSearchParams;if(xe.query&&le)return be("Excluding request by query ".concat(J.url)),!0;var ie=xe.paths||[],ne=ie.some(function(me){return J.url.match(me)});return ne?(be("Excluding request by url match ".concat(J.url)),!0):!1}N.default=Z},"./src/index.node.js":function(W,N,S){S.r(N);var M=S("./src/api.js");S.d(N,"setup",function(){return M.setup}),S.d(N,"setupCache",function(){return M.setupCache}),S.d(N,"serializeQuery",function(){return M.serializeQuery});var Z=S("./src/redis.js");S.d(N,"RedisStore",function(){return Z.default});var q=S("./src/redis-default.js");S.d(N,"RedisDefaultStore",function(){return q.default}),N.default={setup:M.setup,setupCache:M.setupCache,serializeQuery:M.serializeQuery,RedisStore:Z.default,RedisDefaultStore:q.default}},"./src/limit.js":function(W,N,S){S.r(N),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function M(ye,xe,be,te,le,ie,ne){try{var me=ye[ie](ne),Ee=me.value}catch(we){be(we);return}me.done?xe(Ee):Promise.resolve(Ee).then(te,le)}function Z(ye){return function(){var xe=this,be=arguments;return new Promise(function(te,le){var ie=ye.apply(xe,be);function ne(Ee){M(ie,te,le,ne,me,"next",Ee)}function me(Ee){M(ie,te,le,ne,me,"throw",Ee)}ne(void 0)})}}function q(ye){return J.apply(this,arguments)}function J(){return J=Z(regeneratorRuntime.mark(function ye(xe){var be,te;return regeneratorRuntime.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,xe.store.length();case 2:if(be=ie.sent,!(be<xe.limit)){ie.next=5;break}return ie.abrupt("return");case 5:return xe.debug("Current store size: ".concat(be)),ie.next=8,xe.store.iterate(function(ne,me){te||(te={value:ne,key:me}),ne.expires<te.value.expires&&(te={value:ne,key:me})});case 8:if(!te){ie.next=12;break}return xe.debug("Removing item: ".concat(te.key)),ie.next=12,xe.store.removeItem(te.key);case 12:case"end":return ie.stop()}},ye)})),J.apply(this,arguments)}N.default=q},"./src/memory.js":function(W,N,S){S.r(N),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var M=S("./src/utilities.js");function Z(te,le,ie,ne,me,Ee,we){try{var Ue=te[Ee](we),Le=Ue.value}catch(Me){ie(Me);return}Ue.done?le(Le):Promise.resolve(Le).then(ne,me)}function q(te){return function(){var le=this,ie=arguments;return new Promise(function(ne,me){var Ee=te.apply(le,ie);function we(Le){Z(Ee,ne,me,we,Ue,"next",Le)}function Ue(Le){Z(Ee,ne,me,we,Ue,"throw",Le)}we(void 0)})}}function J(te,le){if(!(te instanceof le))throw new TypeError("Cannot call a class as a function")}function ye(te,le){for(var ie=0;ie<le.length;ie++){var ne=le[ie];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(te,ne.key,ne)}}function xe(te,le,ie){return le&&ye(te.prototype,le),ie&&ye(te,ie),te}var be=function(){function te(){J(this,te),this.store={}}return xe(te,[{key:"getItem",value:function(){var le=q(regeneratorRuntime.mark(function ne(me){var Ee;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ee=this.store[me]||null,Ue.abrupt("return",JSON.parse(Ee));case 2:case"end":return Ue.stop()}},ne,this)}));function ie(ne){return le.apply(this,arguments)}return ie}()},{key:"setItem",value:function(){var le=q(regeneratorRuntime.mark(function ne(me,Ee){return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return this.store[me]=JSON.stringify(Ee),Ue.abrupt("return",Ee);case 2:case"end":return Ue.stop()}},ne,this)}));function ie(ne,me){return le.apply(this,arguments)}return ie}()},{key:"removeItem",value:function(){var le=q(regeneratorRuntime.mark(function ne(me){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:delete this.store[me];case 1:case"end":return we.stop()}},ne,this)}));function ie(ne){return le.apply(this,arguments)}return ie}()},{key:"clear",value:function(){var le=q(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:this.store={};case 1:case"end":return Ee.stop()}},ne,this)}));function ie(){return le.apply(this,arguments)}return ie}()},{key:"length",value:function(){var le=q(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Ee.stop()}},ne,this)}));function ie(){return le.apply(this,arguments)}return ie}()},{key:"iterate",value:function(ie){return Promise.all(Object(M.mapObject)(this.store,ie))}}]),te}();N.default=be},"./src/redis-default.js":function(W,N,S){S.r(N),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var M=S("util");function Z(te,le,ie,ne,me,Ee,we){try{var Ue=te[Ee](we),Le=Ue.value}catch(Me){ie(Me);return}Ue.done?le(Le):Promise.resolve(Le).then(ne,me)}function q(te){return function(){var le=this,ie=arguments;return new Promise(function(ne,me){var Ee=te.apply(le,ie);function we(Le){Z(Ee,ne,me,we,Ue,"next",Le)}function Ue(Le){Z(Ee,ne,me,we,Ue,"throw",Le)}we(void 0)})}}function J(te,le){if(!(te instanceof le))throw new TypeError("Cannot call a class as a function")}function ye(te,le){for(var ie=0;ie<le.length;ie++){var ne=le[ie];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(te,ne.key,ne)}}function xe(te,le,ie){return le&&ye(te.prototype,le),ie&&ye(te,ie),te}var be=function(){function te(le){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};J(this,te);var ne=new TypeError("First parameter must be a valid RedisClient instance.");try{if(le.constructor.name!=="RedisClient")throw ne}catch{throw ne}this.client=le,this.prefix=ie.prefix||"axios-cache",this.maxScanCount=ie.maxScanCount||1e3,this.getAsync=Object(M.promisify)(le.get).bind(le),this.psetexAsync=Object(M.promisify)(le.psetex).bind(le),this.delAsync=Object(M.promisify)(le.del).bind(le),this.scanAsync=Object(M.promisify)(le.scan).bind(le)}return xe(te,[{key:"calculateTTL",value:function(ie){var ne=Date.now();return ie.expires&&ie.expires>ne?ie.expires-ne:-1}},{key:"transformKey",value:function(ie){return this.prefix+"_"+ie}},{key:"getItem",value:function(){var le=q(regeneratorRuntime.mark(function ne(me){var Ee;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.getAsync(this.transformKey(me));case 2:if(Ue.t0=Ue.sent,Ue.t0){Ue.next=5;break}Ue.t0=null;case 5:return Ee=Ue.t0,Ue.abrupt("return",JSON.parse(Ee));case 7:case"end":return Ue.stop()}},ne,this)}));function ie(ne){return le.apply(this,arguments)}return ie}()},{key:"setItem",value:function(){var le=q(regeneratorRuntime.mark(function ne(me,Ee){var we,Ue;return regeneratorRuntime.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(we=this.transformKey(me),Ue=this.calculateTTL(Ee),!(Ue>0)){Me.next=5;break}return Me.next=5,this.psetexAsync(we,Ue,JSON.stringify(Ee));case 5:return Me.abrupt("return",Ee);case 6:case"end":return Me.stop()}},ne,this)}));function ie(ne,me){return le.apply(this,arguments)}return ie}()},{key:"removeItem",value:function(){var le=q(regeneratorRuntime.mark(function ne(me){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.delAsync(this.transformKey(me));case 2:case"end":return we.stop()}},ne,this)}));function ie(ne){return le.apply(this,arguments)}return ie}()},{key:"scan",value:function(){var le=q(regeneratorRuntime.mark(function ne(me){var Ee,we;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:Ee="0";case 1:return Le.next=3,this.scanAsync(Ee,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return we=Le.sent,Ee=we[0],Le.next=7,me(we[1]);case 7:if(Ee!=="0"){Le.next=1;break}case 8:case"end":return Le.stop()}},ne,this)}));function ie(ne){return le.apply(this,arguments)}return ie}()},{key:"clear",value:function(){var le=q(regeneratorRuntime.mark(function ne(){var me=this;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.scan(function(Ue){return me.delAsync(Ue)});case 2:case"end":return we.stop()}},ne,this)}));function ie(){return le.apply(this,arguments)}return ie}()},{key:"length",value:function(){var le=q(regeneratorRuntime.mark(function ne(){var me;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return me=0,we.next=3,this.scan(function(Ue){me+=Ue.length});case 3:return we.abrupt("return",me);case 4:case"end":return we.stop()}},ne,this)}));function ie(){return le.apply(this,arguments)}return ie}()},{key:"iterate",value:function(){var le=q(regeneratorRuntime.mark(function ne(me){var Ee=this,we,Ue;return regeneratorRuntime.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Ue=function(){return Ue=q(regeneratorRuntime.mark(function Ge(rt){var ct,vt;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.getAsync(rt);case 2:if(ht.t0=ht.sent,ht.t0){ht.next=5;break}ht.t0=null;case 5:return ct=ht.t0,vt=JSON.parse(ct),ht.next=9,me(vt,rt);case 9:return ht.abrupt("return",ht.sent);case 10:case"end":return ht.stop()}},Ge,this)})),Ue.apply(this,arguments)},we=function(Ge){return Ue.apply(this,arguments)},Me.next=4,this.scan(function(He){return Promise.all(He.map(we.bind(Ee)))});case 4:return Me.abrupt("return",Promise.resolve([]));case 5:case"end":return Me.stop()}},ne,this)}));function ie(ne){return le.apply(this,arguments)}return ie}()}]),te}();N.default=be},"./src/redis.js":function(W,N,S){S.r(N),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var M=S("util"),Z=S("./src/utilities.js");function q(le,ie,ne,me,Ee,we,Ue){try{var Le=le[we](Ue),Me=Le.value}catch(He){ne(He);return}Le.done?ie(Me):Promise.resolve(Me).then(me,Ee)}function J(le){return function(){var ie=this,ne=arguments;return new Promise(function(me,Ee){var we=le.apply(ie,ne);function Ue(Me){q(we,me,Ee,Ue,Le,"next",Me)}function Le(Me){q(we,me,Ee,Ue,Le,"throw",Me)}Ue(void 0)})}}function ye(le,ie){if(!(le instanceof ie))throw new TypeError("Cannot call a class as a function")}function xe(le,ie){for(var ne=0;ne<ie.length;ne++){var me=ie[ne];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(le,me.key,me)}}function be(le,ie,ne){return ie&&xe(le.prototype,ie),ne&&xe(le,ne),le}var te=function(){function le(ie){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ye(this,le);var me=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ie.constructor.name!=="RedisClient")throw me}catch{throw me}this.client=ie,this.HASH_KEY=ne,this.hgetAsync=Object(M.promisify)(ie.hget).bind(ie),this.hsetAsync=Object(M.promisify)(ie.hset).bind(ie),this.hdelAsync=Object(M.promisify)(ie.hdel).bind(ie),this.delAsync=Object(M.promisify)(ie.del).bind(ie),this.hlenAsync=Object(M.promisify)(ie.hlen).bind(ie),this.hgetallAsync=Object(M.promisify)(ie.hgetall).bind(ie)}return be(le,[{key:"getItem",value:function(){var ie=J(regeneratorRuntime.mark(function me(Ee){var we;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,this.hgetAsync(this.HASH_KEY,Ee);case 2:if(Le.t0=Le.sent,Le.t0){Le.next=5;break}Le.t0=null;case 5:return we=Le.t0,Le.abrupt("return",JSON.parse(we));case 7:case"end":return Le.stop()}},me,this)}));function ne(me){return ie.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ie=J(regeneratorRuntime.mark(function me(Ee,we){return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,this.hsetAsync(this.HASH_KEY,Ee,JSON.stringify(we));case 2:return Le.abrupt("return",we);case 3:case"end":return Le.stop()}},me,this)}));function ne(me,Ee){return ie.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ie=J(regeneratorRuntime.mark(function me(Ee){return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.hdelAsync(this.HASH_KEY,Ee);case 2:case"end":return Ue.stop()}},me,this)}));function ne(me){return ie.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ie=J(regeneratorRuntime.mark(function me(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return we.stop()}},me,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ie=J(regeneratorRuntime.mark(function me(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return we.stop()}},me,this)}));function ne(){return ie.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var ie=J(regeneratorRuntime.mark(function me(Ee){var we;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return we=Le.sent,Le.abrupt("return",Promise.all(Object(Z.mapObject)(we,Ee)));case 4:case"end":return Le.stop()}},me,this)}));function ne(me){return ie.apply(this,arguments)}return ne}()}]),le}();N.default=te},"./src/request.js":function(W,N,S){S.r(N),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var M=S("./src/response.js"),Z=S("./src/exclude.js"),q=S("./src/cache.js");function J(te,le,ie,ne,me,Ee,we){try{var Ue=te[Ee](we),Le=Ue.value}catch(Me){ie(Me);return}Ue.done?le(Le):Promise.resolve(Le).then(ne,me)}function ye(te){return function(){var le=this,ie=arguments;return new Promise(function(ne,me){var Ee=te.apply(le,ie);function we(Le){J(Ee,ne,me,we,Ue,"next",Le)}function Ue(Le){J(Ee,ne,me,we,Ue,"throw",Le)}we(void 0)})}}function xe(te,le){return be.apply(this,arguments)}function be(){return be=ye(regeneratorRuntime.mark(function te(le,ie){var ne,me,Ee;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ee=function(){return le.excludeFromCache=!0,{config:le,next:ne}},le.debug("uuid",le.uuid),ne=function(){for(var Me=arguments.length,He=new Array(Me),Ge=0;Ge<Me;Ge++)He[Ge]=arguments[Ge];return M.default.apply(void 0,[le,ie].concat(He))},Ue.next=5,le.invalidate(le,ie);case 5:if(!Object(Z.default)(le,ie)){Ue.next=7;break}return Ue.abrupt("return",Ee());case 7:return Ue.prev=7,Ue.next=10,Object(q.read)(le,ie);case 10:return me=Ue.sent,me.config=ie,me.request={fromCache:!0},Ue.abrupt("return",{config:le,next:me});case 16:if(Ue.prev=16,Ue.t0=Ue.catch(7),!(le.clearOnStale&&Ue.t0.reason==="cache-stale")){Ue.next=21;break}return Ue.next=21,le.store.removeItem(le.uuid);case 21:return Ue.abrupt("return",{config:le,next:ne});case 22:case"end":return Ue.stop()}},te,null,[[7,16]])})),be.apply(this,arguments)}N.default=xe},"./src/response.js":function(W,N,S){S.r(N),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var M=S("./src/limit.js"),Z=S("./src/cache.js"),q=S("./node_modules/cache-control-esm/index.js");function J(te,le,ie,ne,me,Ee,we){try{var Ue=te[Ee](we),Le=Ue.value}catch(Me){ie(Me);return}Ue.done?le(Le):Promise.resolve(Le).then(ne,me)}function ye(te){return function(){var le=this,ie=arguments;return new Promise(function(ne,me){var Ee=te.apply(le,ie);function we(Le){J(Ee,ne,me,we,Ue,"next",Le)}function Ue(Le){J(Ee,ne,me,we,Ue,"throw",Le)}we(void 0)})}}function xe(te,le,ie){return be.apply(this,arguments)}function be(){return be=ye(regeneratorRuntime.mark(function te(le,ie,ne){var me,Ee,we,Ue,Le;return regeneratorRuntime.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(me=ne.request,Ee=me===void 0?{}:me,we=ne.headers,Ue=we===void 0?{}:we,!(["arraybuffer","blob"].indexOf(Ee.responseType)>-1)){He.next=3;break}return He.abrupt("return",ne);case 3:if(Le={},le.readHeaders&&(Ue["cache-control"]?(Le=Object(q.parse)(Ue["cache-control"]),(Le.noCache||Le.noStore)&&(le.excludeFromCache=!0)):Ue.expires?le.expires=new Date(Ue.expires).getTime():le.expires=new Date().getTime()),le.excludeFromCache){He.next=15;break}if(Le.maxAge||Le.maxAge===0?le.expires=Date.now()+Le.maxAge*1e3:le.readHeaders||(le.expires=le.maxAge===0?Date.now():Date.now()+le.maxAge),!le.limit){He.next=11;break}return le.debug("Detected limit: ".concat(le.limit)),He.next=11,Object(M.default)(le);case 11:return He.next=13,Object(Z.write)(le,ie,ne);case 13:He.next=16;break;case 15:ne.request.excludedFromCache=!0;case 16:return He.abrupt("return",ne);case 17:case"end":return He.stop()}},te)})),be.apply(this,arguments)}N.default=xe},"./src/serialize.js":function(W,N,S){S.r(N),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function M(J,ye){if(J==null)return{};var xe=Z(J,ye),be,te;if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(J);for(te=0;te<le.length;te++)be=le[te],!(ye.indexOf(be)>=0)&&Object.prototype.propertyIsEnumerable.call(J,be)&&(xe[be]=J[be])}return xe}function Z(J,ye){if(J==null)return{};var xe={},be=Object.keys(J),te,le;for(le=0;le<be.length;le++)te=be[le],!(ye.indexOf(te)>=0)&&(xe[te]=J[te]);return xe}function q(J,ye,xe){if(xe.data)try{xe.data=JSON.parse(xe.data)}catch(te){J.debug("Could not parse data as JSON",te)}xe.request,xe.config;var be=M(xe,["request","config"]);return be}N.default=q},"./src/utilities.js":function(W,N,S){S.r(N),S.d(N,"isObject",function(){return Z}),S.d(N,"getTag",function(){return q}),S.d(N,"isFunction",function(){return J}),S.d(N,"isString",function(){return ye}),S.d(N,"mapObject",function(){return xe}),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function M(be){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(le){return typeof le}:M=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},M(be)}function Z(be){var te=M(be);return be!=null&&(te==="object"||te==="function")}function q(be){return be===null?be===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(be)}function J(be){if(!Z(be))return!1;var te=q(be);return te==="[object Function]"||te==="[object AsyncFunction]"||te==="[object GeneratorFunction]"||te==="[object Proxy]"}function ye(be){var te=M(be);return te==="string"||te==="object"&&be!=null&&!Array.isArray(be)&&q(be)==="[object String]"}function xe(be,te){return Z(be)?Object.keys(be).map(function(le){return te(be[le],le)}):[]}},axios:function(W,N){W.exports=oe},util:function(W,N){W.exports=A.default}})})});const Q={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},K=F.setupCache({maxAge:60*60*24*1e3}),pe=w.default.create({adapter:K.adapter}),G=async(V,U={})=>{const oe={...Q,...U},[W,N]=i.lngLatToGoogle(V,oe.zoomBase),S=oe.tileUrl.replace("{z}",String(oe.zoomBase)).replace("{x}",String(W)).replace("{y}",String(N)),M={code:"",prefecture:"",city:""};let Z;try{const ye=await pe.get(S,{responseType:"arraybuffer"});Z=Buffer.from(ye.data,"binary")}catch(ye){throw new Error(ye)}const q=new y.VectorTile(new b.default(Z));let J=Object.keys(q.layers);return Array.isArray(J)||(J=[J]),J.forEach(ye=>{const xe=q.layers[ye];if(xe&&oe.layer===xe.name)for(let be=0;be<xe.length;be++){const te=xe.feature(be).toGeoJSON(W,N,oe.zoomBase);J.length>1&&(te.properties.vt_layer=ye);const le={type:"FeatureCollection",features:[te]};t.geoContains(le,V)&&(M.code=String(te.id).length===5?String(te.id):`0${String(te.id)}`,M.prefecture=te.properties.prefecture,M.city=te.properties.city)}}),M};e.openReverseGeocoder=G})($C);const aF={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},lF={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},uF={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},cF={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},ME={JPN:uF,CHN:aF,DEU:lF,KOR:cF};function tI(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function hF(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kE(e[0])||!kE(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return tI(a,t,i)}function fF(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var d=c[a];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<d[d.length-1].length;y++)if(d[d.length-1][y]!==d[0][y])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return tI(l,t,i)}function kE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function nI(e,t,i){if(e!==null)for(var a,c,d,y,l,b,w,A=0,E=0,L,F=e.type,Q=F==="FeatureCollection",K=F==="Feature",pe=Q?e.features.length:1,G=0;G<pe;G++){w=Q?e.features[G].geometry:K?e.geometry:e,L=w?w.type==="GeometryCollection":!1,l=L?w.geometries.length:1;for(var V=0;V<l;V++){var U=0,oe=0;if(y=L?w.geometries[V]:w,y!==null){b=y.coordinates;var W=y.type;switch(A=i&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(t(b,E,G,U,oe)===!1)return!1;E++,U++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],E,G,U,oe)===!1)return!1;E++,W==="MultiPoint"&&U++}W==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-A;c++){if(t(b[a][c],E,G,U,oe)===!1)return!1;E++}W==="MultiLineString"&&U++,W==="Polygon"&&oe++}W==="Polygon"&&U++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(oe=0,c=0;c<b[a].length;c++){for(d=0;d<b[a][c].length-A;d++){if(t(b[a][c][d],E,G,U,oe)===!1)return!1;E++}oe++}U++}break;case"GeometryCollection":for(a=0;a<y.geometries.length;a++)if(nI(y.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function dF(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function pF(e){return e.type==="Feature"?e.geometry:e}function mF(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=dF(e),c=pF(t),d=c.type,y=t.bbox,l=c.coordinates;if(y&&gF(a,y)===!1)return!1;d==="Polygon"&&(l=[l]);for(var b=!1,w=0;w<l.length&&!b;w++)if(LE(a,l[w][0],i.ignoreBoundary)){for(var A=!1,E=1;E<l[w].length&&!A;)LE(a,l[w][E],!i.ignoreBoundary)&&(A=!0),E++;A||(b=!0)}return b}function LE(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,d=t.length-1;c<t.length;d=c++){var y=t[c][0],l=t[c][1],b=t[d][0],w=t[d][1],A=e[1]*(y-b)+l*(b-e[0])+w*(e[0]-y)===0&&(y-e[0])*(b-e[0])<=0&&(l-e[1])*(w-e[1])<=0;if(A)return!i;var E=l>e[1]!=w>e[1]&&e[0]<(b-y)*(e[1]-l)/(w-l)+y;E&&(a=!a)}return a}function gF(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function yF(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return nI(e,function(d){i+=d[0],a+=d[1],c++},!0),hF([i/c,a/c],t.properties)}const vF=()=>{const[e,t]=_t.useState(!1);return{detectCountry:_t.useCallback(async(a,c)=>{t(!0);const y=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of y.features)if(mF([a,c],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},O0=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var l;const[c,d]=_t.useState((l=e.properties)==null?void 0:l[t.key]);_t.useEffect(()=>{var b;d((b=e.properties)==null?void 0:b[t.key])},[e]);const y=_t.useCallback(b=>{d(b.currentTarget.value),a&&a(b)},[]);return dt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[dt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),dt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:y}),dt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return dt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return dt.jsx("option",{value:b.tags.name},b.id)})})]})},_F=({feature:e,fields:t})=>e.properties?dt.jsxs(dt.Fragment,{children:[t.postcodeField&&dt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return dt.jsxs(dt.Fragment,{children:[dt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return dt.jsxs(dt.Fragment,{children:[dt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,xF=({placeholder:e,defaultValue:t})=>{const[i,a]=_t.useState(t);_t.useEffect(()=>{a(t)},[t]);const c=_t.useCallback(d=>{a(d.currentTarget.value)},[]);return dt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[dt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),dt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var ug={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ug.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,d="Expected a function",y="__lodash_hash_undefined__",l=1,b=2,w=1/0,A=9007199254740991,E="[object Arguments]",L="[object Array]",F="[object Boolean]",Q="[object Date]",K="[object Error]",pe="[object Function]",G="[object GeneratorFunction]",V="[object Map]",U="[object Number]",oe="[object Object]",W="[object Promise]",N="[object RegExp]",S="[object Set]",M="[object String]",Z="[object Symbol]",q="[object WeakMap]",J="[object ArrayBuffer]",ye="[object DataView]",xe="[object Float32Array]",be="[object Float64Array]",te="[object Int8Array]",le="[object Int16Array]",ie="[object Int32Array]",ne="[object Uint8Array]",me="[object Uint8ClampedArray]",Ee="[object Uint16Array]",we="[object Uint32Array]",Ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Me=/^\./,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/[\\^$.*+?()[\]{}|]/g,rt=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,Pt=/^(?:0|[1-9]\d*)$/,ht={};ht[xe]=ht[be]=ht[te]=ht[le]=ht[ie]=ht[ne]=ht[me]=ht[Ee]=ht[we]=!0,ht[E]=ht[L]=ht[J]=ht[F]=ht[ye]=ht[Q]=ht[K]=ht[pe]=ht[V]=ht[U]=ht[oe]=ht[N]=ht[S]=ht[M]=ht[q]=!1;var Et={};Et[E]=Et[L]=Et[J]=Et[ye]=Et[F]=Et[Q]=Et[xe]=Et[be]=Et[te]=Et[le]=Et[ie]=Et[V]=Et[U]=Et[oe]=Et[N]=Et[S]=Et[M]=Et[Z]=Et[ne]=Et[me]=Et[Ee]=Et[we]=!0,Et[K]=Et[pe]=Et[q]=!1;var Je=typeof Rl=="object"&&Rl&&Rl.Object===Object&&Rl,Ut=typeof self=="object"&&self&&self.Object===Object&&self,fn=Je||Ut||Function("return this")(),qt=t&&!t.nodeType&&t,Vt=qt&&!0&&e&&!e.nodeType&&e,un=Vt&&Vt.exports===qt,gn=un&&Je.process,Se=function(){try{return gn&&gn.binding("util")}catch{}}(),j=Se&&Se.isTypedArray;function O($,ve){return $.set(ve[0],ve[1]),$}function _e($,ve){return $.add(ve),$}function Ze($,ve,Be){switch(Be.length){case 0:return $.call(ve);case 1:return $.call(ve,Be[0]);case 2:return $.call(ve,Be[0],Be[1]);case 3:return $.call(ve,Be[0],Be[1],Be[2])}return $.apply(ve,Be)}function Fe($,ve){for(var Be=-1,ot=$?$.length:0;++Be<ot&&ve($[Be],Be,$)!==!1;);return $}function ut($,ve){for(var Be=-1,ot=ve.length,St=$.length;++Be<ot;)$[St+Be]=ve[Be];return $}function ae($,ve,Be,ot){var St=-1,Tt=$?$.length:0;for(ot&&Tt&&(Be=$[++St]);++St<Tt;)Be=ve(Be,$[St],St,$);return Be}function z($,ve){for(var Be=-1,ot=$?$.length:0;++Be<ot;)if(ve($[Be],Be,$))return!0;return!1}function D($){return function(ve){return ve==null?i:ve[$]}}function ce($,ve){for(var Be=-1,ot=Array($);++Be<$;)ot[Be]=ve(Be);return ot}function Re($){return function(ve){return $(ve)}}function Xe($,ve){return $==null?i:$[ve]}function st($){var ve=!1;if($!=null&&typeof $.toString!="function")try{ve=!!($+"")}catch{}return ve}function en($){var ve=-1,Be=Array($.size);return $.forEach(function(ot,St){Be[++ve]=[St,ot]}),Be}function kt($,ve){return function(Be){return $(ve(Be))}}function yn($){var ve=-1,Be=Array($.size);return $.forEach(function(ot){Be[++ve]=ot}),Be}var An=Array.prototype,_n=Function.prototype,wr=Object.prototype,pi=fn["__core-js_shared__"],fr=function(){var $=/[^.]+$/.exec(pi&&pi.keys&&pi.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}(),On=_n.toString,dr=wr.hasOwnProperty,mi=On.call(Object),ke=wr.toString,re=RegExp("^"+On.call(dr).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=un?fn.Buffer:i,fe=fn.Symbol,Te=fn.Uint8Array,ze=kt(Object.getPrototypeOf,Object),qe=Object.create,Ve=wr.propertyIsEnumerable,$e=An.splice,Qe=Object.getOwnPropertySymbols,pt=se?se.isBuffer:i,gt=kt(Object.keys,Object),yt=Math.max,tn=To(fn,"DataView"),cn=To(fn,"Map"),Nt=To(fn,"Promise"),Xt=To(fn,"Set"),hn=To(fn,"WeakMap"),En=To(Object,"create"),$n=!Ve.call({valueOf:1},"valueOf"),xn=Co(tn),Mn=Co(cn),ni=Co(Nt),an=Co(Xt),br=Co(hn),Er=fe?fe.prototype:i,Yn=Er?Er.valueOf:i,ri=Er?Er.toString:i;function kn(){}function ar($){var ve=-1,Be=$?$.length:0;for(this.clear();++ve<Be;){var ot=$[ve];this.set(ot[0],ot[1])}}function Mi(){this.__data__=En?En(null):{}}function Qu($){return this.has($)&&delete this.__data__[$]}function Qa($){var ve=this.__data__;if(En){var Be=ve[$];return Be===y?i:Be}return dr.call(ve,$)?ve[$]:i}function pr($){var ve=this.__data__;return En?ve[$]!==i:dr.call(ve,$)}function Ho($,ve){var Be=this.__data__;return Be[$]=En&&ve===i?y:ve,this}ar.prototype.clear=Mi,ar.prototype.delete=Qu,ar.prototype.get=Qa,ar.prototype.has=pr,ar.prototype.set=Ho;function Yr($){var ve=-1,Be=$?$.length:0;for(this.clear();++ve<Be;){var ot=$[ve];this.set(ot[0],ot[1])}}function mr(){this.__data__=[]}function el($){var ve=this.__data__,Be=gs(ve,$);if(Be<0)return!1;var ot=ve.length-1;return Be==ot?ve.pop():$e.call(ve,Be,1),!0}function Xr($){var ve=this.__data__,Be=gs(ve,$);return Be<0?i:ve[Be][1]}function tl($){return gs(this.__data__,$)>-1}function ho($,ve){var Be=this.__data__,ot=gs(Be,$);return ot<0?Be.push([$,ve]):Be[ot][1]=ve,this}Yr.prototype.clear=mr,Yr.prototype.delete=el,Yr.prototype.get=Xr,Yr.prototype.has=tl,Yr.prototype.set=ho;function gi($){var ve=-1,Be=$?$.length:0;for(this.clear();++ve<Be;){var ot=$[ve];this.set(ot[0],ot[1])}}function Nn(){this.__data__={hash:new ar,map:new(cn||Yr),string:new ar}}function nl($){return qs(this,$).delete($)}function Vs($){return qs(this,$).get($)}function Xo($){return qs(this,$).has($)}function rl($,ve){return qs(this,$).set($,ve),this}gi.prototype.clear=Nn,gi.prototype.delete=nl,gi.prototype.get=Vs,gi.prototype.has=Xo,gi.prototype.set=rl;function qo($){var ve=-1,Be=$?$.length:0;for(this.__data__=new gi;++ve<Be;)this.add($[ve])}function Ph($){return this.__data__.set($,y),this}function ec($){return this.__data__.has($)}qo.prototype.add=qo.prototype.push=Ph,qo.prototype.has=ec;function ii($){this.__data__=new Yr($)}function Mh(){this.__data__=new Yr}function tc($){return this.__data__.delete($)}function kh($){return this.__data__.get($)}function nc($){return this.__data__.has($)}function rc($,ve){var Be=this.__data__;if(Be instanceof Yr){var ot=Be.__data__;if(!cn||ot.length<c-1)return ot.push([$,ve]),this;Be=this.__data__=new gi(ot)}return Be.set($,ve),this}ii.prototype.clear=Mh,ii.prototype.delete=tc,ii.prototype.get=kh,ii.prototype.has=nc,ii.prototype.set=rc;function ma($,ve){var Be=Rr($)||Ao($)?ce($.length,String):[],ot=Be.length,St=!!ot;for(var Tt in $)(ve||dr.call($,Tt))&&!(St&&(Tt=="length"||cu(Tt,ot)))&&Be.push(Tt);return Be}function il($,ve,Be){(Be!==i&&!Qo($[ve],Be)||typeof ve=="number"&&Be===i&&!(ve in $))&&($[ve]=Be)}function iu($,ve,Be){var ot=$[ve];(!(dr.call($,ve)&&Qo(ot,Be))||Be===i&&!(ve in $))&&($[ve]=Be)}function gs($,ve){for(var Be=$.length;Be--;)if(Qo($[Be][0],ve))return Be;return-1}function ic($,ve){return $&&wa(ve,Xi(ve),$)}function ki($,ve,Be,ot,St,Tt,Dt){var Wt;if(ot&&(Wt=Tt?ot($,St,Tt,Dt):ot($)),Wt!==i)return Wt;if(!xi($))return $;var vn=Rr($);if(vn){if(Wt=jh($),!ve)return fl($,Wt)}else{var Fn=Hi($),Un=Fn==pe||Fn==G;if(gl($))return Lh($,ve);if(Fn==oe||Fn==E||Un&&!Tt){if(st($))return Tt?$:{};if(Wt=Dh(Un?{}:$),!ve)return Ws($,ic(Wt,$))}else{if(!Et[Fn])return Tt?$:{};Wt=fc($,Fn,ki,ve)}}Dt||(Dt=new ii);var Kn=Dt.get($);if(Kn)return Kn;if(Dt.set($,Wt),!vn)var Jn=Be?Xs($):Xi($);return Fe(Jn||$,function(Qn,At){Jn&&(At=Qn,Qn=$[At]),iu(Wt,At,ki(Qn,ve,Be,ot,At,$,Dt))}),Wt}function ol($){return xi($)?qe($):{}}var yi=lc(sl),ga=uu();function sl($,ve){return $&&ga($,ve,Xi)}function Gs($,ve){ve=xs(ve,$)?[ve]:vs(ve);for(var Be=0,ot=ve.length;$!=null&&Be<ot;)$=$[dl(ve[Be++])];return Be&&Be==ot?$:i}function ya($,ve,Be){var ot=ve($);return Rr($)?ot:ut(ot,Be($))}function va($){return ke.call($)}function _a($,ve){return $!=null&&ve in Object($)}function So($,ve,Be,ot,St){return $===ve?!0:$==null||ve==null||!xi($)&&!Po(ve)?$!==$&&ve!==ve:al($,ve,So,Be,ot,St)}function al($,ve,Be,ot,St,Tt){var Dt=Rr($),Wt=Rr(ve),vn=L,Fn=L;Dt||(vn=Hi($),vn=vn==E?oe:vn),Wt||(Fn=Hi(ve),Fn=Fn==E?oe:Fn);var Un=vn==oe&&!st($),Kn=Fn==oe&&!st(ve),Jn=vn==Fn;if(Jn&&!Un)return Tt||(Tt=new ii),Dt||es($)?Ko($,ve,Be,ot,St,Tt):uc($,ve,vn,Be,ot,St,Tt);if(!(St&b)){var Qn=Un&&dr.call($,"__wrapped__"),At=Kn&&dr.call(ve,"__wrapped__");if(Qn||At){var wi=Qn?$.value():$,bi=At?ve.value():ve;return Tt||(Tt=new ii),Be(wi,bi,ot,St,Tt)}}return Jn?(Tt||(Tt=new ii),Hs($,ve,Be,ot,St,Tt)):!1}function vi($,ve,Be,ot){var St=Be.length,Tt=St,Dt=!ot;if($==null)return!Tt;for($=Object($);St--;){var Wt=Be[St];if(Dt&&Wt[2]?Wt[1]!==$[Wt[0]]:!(Wt[0]in $))return!1}for(;++St<Tt;){Wt=Be[St];var vn=Wt[0],Fn=$[vn],Un=Wt[1];if(Dt&&Wt[2]){if(Fn===i&&!(vn in $))return!1}else{var Kn=new ii;if(ot)var Jn=ot(Fn,Un,vn,$,ve,Kn);if(!(Jn===i?So(Un,Fn,ot,l|b,Kn):Jn))return!1}}return!0}function _i($){if(!xi($)||ba($))return!1;var ve=fo($)||st($)?re:vt;return ve.test(Co($))}function ou($){return Po($)&&Jr($.length)&&!!ht[ke.call($)]}function xa($){return typeof $=="function"?$:$==null?pu:typeof $=="object"?Rr($)?ll($[0],$[1]):zn($):mu($)}function Zs($){if(!Vn($))return gt($);var ve=[];for(var Be in Object($))dr.call($,Be)&&Be!="constructor"&&ve.push(Be);return ve}function ys($){if(!xi($))return Ea($);var ve=Vn($),Be=[];for(var ot in $)ot=="constructor"&&(ve||!dr.call($,ot))||Be.push(ot);return Be}function zn($){var ve=Rn($);return ve.length==1&&ve[0][2]?Yo(ve[0][0],ve[0][1]):function(Be){return Be===$||vi(Be,$,ve)}}function ll($,ve){return xs($)&&Hn(ve)?Yo(dl($),ve):function(Be){var ot=Ta(Be,$);return ot===i&&ot===ve?Ks(Be,$):So(ve,ot,i,l|b)}}function ul($,ve,Be,ot,St){if($!==ve){if(!(Rr(ve)||es(ve)))var Tt=ys(ve);Fe(Tt||ve,function(Dt,Wt){if(Tt&&(Wt=Dt,Dt=ve[Wt]),xi(Dt))St||(St=new ii),su($,ve,Wt,Be,ul,ot,St);else{var vn=ot?ot($[Wt],Dt,Wt+"",$,ve,St):i;vn===i&&(vn=Dt),il($,Wt,vn)}})}}function su($,ve,Be,ot,St,Tt,Dt){var Wt=$[Be],vn=ve[Be],Fn=Dt.get(vn);if(Fn){il($,Be,Fn);return}var Un=Tt?Tt(Wt,vn,Be+"",$,ve,Dt):i,Kn=Un===i;Kn&&(Un=vn,Rr(vn)||es(vn)?Rr(Wt)?Un=Wt:fu(Wt)?Un=fl(Wt):(Kn=!1,Un=ki(vn,!0)):yl(vn)||Ao(vn)?Ao(Wt)?Un=Sa(Wt):!xi(Wt)||ot&&fo(Wt)?(Kn=!1,Un=ki(vn,!0)):Un=Wt:Kn=!1),Kn&&(Dt.set(vn,Un),St(Un,vn,ot,Tt,Dt),Dt.delete(vn)),il($,Be,Un)}function cl($){return function(ve){return Gs(ve,$)}}function oc($,ve){return ve=yt(ve===i?$.length-1:ve,0),function(){for(var Be=arguments,ot=-1,St=yt(Be.length-ve,0),Tt=Array(St);++ot<St;)Tt[ot]=Be[ve+ot];ot=-1;for(var Dt=Array(ve+1);++ot<ve;)Dt[ot]=Be[ot];return Dt[ve]=Tt,Ze($,this,Dt)}}function sc($){if(typeof $=="string")return $;if(Li($))return ri?ri.call($):"";var ve=$+"";return ve=="0"&&1/$==-w?"-0":ve}function vs($){return Rr($)?$:hu($)}function Lh($,ve){if(ve)return $.slice();var Be=new $.constructor($.length);return $.copy(Be),Be}function au($){var ve=new $.constructor($.byteLength);return new Te(ve).set(new Te($)),ve}function zh($,ve){var Be=ve?au($.buffer):$.buffer;return new $.constructor(Be,$.byteOffset,$.byteLength)}function Oh($,ve,Be){var ot=ve?Be(en($),!0):en($);return ae(ot,O,new $.constructor)}function Rh($){var ve=new $.constructor($.source,ct.exec($));return ve.lastIndex=$.lastIndex,ve}function Fh($,ve,Be){var ot=ve?Be(yn($),!0):yn($);return ae(ot,_e,new $.constructor)}function lu($){return Yn?Object(Yn.call($)):{}}function hl($,ve){var Be=ve?au($.buffer):$.buffer;return new $.constructor(Be,$.byteOffset,$.length)}function fl($,ve){var Be=-1,ot=$.length;for(ve||(ve=Array(ot));++Be<ot;)ve[Be]=$[Be];return ve}function wa($,ve,Be,ot){Be||(Be={});for(var St=-1,Tt=ve.length;++St<Tt;){var Dt=ve[St],Wt=ot?ot(Be[Dt],$[Dt],Dt,Be,$):i;iu(Be,Dt,Wt===i?$[Dt]:Wt)}return Be}function Ws($,ve){return wa($,hc($),ve)}function ac($){return oc(function(ve,Be){var ot=-1,St=Be.length,Tt=St>1?Be[St-1]:i,Dt=St>2?Be[2]:i;for(Tt=$.length>3&&typeof Tt=="function"?(St--,Tt):i,Dt&&nr(Be[0],Be[1],Dt)&&(Tt=St<3?i:Tt,St=1),ve=Object(ve);++ot<St;){var Wt=Be[ot];Wt&&$(ve,Wt,ot,Tt)}return ve})}function lc($,ve){return function(Be,ot){if(Be==null)return Be;if(!Io(Be))return $(Be,ot);for(var St=Be.length,Tt=ve?St:-1,Dt=Object(Be);(ve?Tt--:++Tt<St)&&ot(Dt[Tt],Tt,Dt)!==!1;);return Be}}function uu($){return function(ve,Be,ot){for(var St=-1,Tt=Object(ve),Dt=ot(ve),Wt=Dt.length;Wt--;){var vn=Dt[$?Wt:++St];if(Be(Tt[vn],vn,Tt)===!1)break}return ve}}function Ko($,ve,Be,ot,St,Tt){var Dt=St&b,Wt=$.length,vn=ve.length;if(Wt!=vn&&!(Dt&&vn>Wt))return!1;var Fn=Tt.get($);if(Fn&&Tt.get(ve))return Fn==ve;var Un=-1,Kn=!0,Jn=St&l?new qo:i;for(Tt.set($,ve),Tt.set(ve,$);++Un<Wt;){var Qn=$[Un],At=ve[Un];if(ot)var wi=Dt?ot(At,Qn,Un,ve,$,Tt):ot(Qn,At,Un,$,ve,Tt);if(wi!==i){if(wi)continue;Kn=!1;break}if(Jn){if(!z(ve,function(bi,Ei){if(!Jn.has(Ei)&&(Qn===bi||Be(Qn,bi,ot,St,Tt)))return Jn.add(Ei)})){Kn=!1;break}}else if(!(Qn===At||Be(Qn,At,ot,St,Tt))){Kn=!1;break}}return Tt.delete($),Tt.delete(ve),Kn}function uc($,ve,Be,ot,St,Tt,Dt){switch(Be){case ye:if($.byteLength!=ve.byteLength||$.byteOffset!=ve.byteOffset)return!1;$=$.buffer,ve=ve.buffer;case J:return!($.byteLength!=ve.byteLength||!ot(new Te($),new Te(ve)));case F:case Q:case U:return Qo(+$,+ve);case K:return $.name==ve.name&&$.message==ve.message;case N:case M:return $==ve+"";case V:var Wt=en;case S:var vn=Tt&b;if(Wt||(Wt=yn),$.size!=ve.size&&!vn)return!1;var Fn=Dt.get($);if(Fn)return Fn==ve;Tt|=l,Dt.set($,ve);var Un=Ko(Wt($),Wt(ve),ot,St,Tt,Dt);return Dt.delete($),Un;case Z:if(Yn)return Yn.call($)==Yn.call(ve)}return!1}function Hs($,ve,Be,ot,St,Tt){var Dt=St&b,Wt=Xi($),vn=Wt.length,Fn=Xi(ve),Un=Fn.length;if(vn!=Un&&!Dt)return!1;for(var Kn=vn;Kn--;){var Jn=Wt[Kn];if(!(Dt?Jn in ve:dr.call(ve,Jn)))return!1}var Qn=Tt.get($);if(Qn&&Tt.get(ve))return Qn==ve;var At=!0;Tt.set($,ve),Tt.set(ve,$);for(var wi=Dt;++Kn<vn;){Jn=Wt[Kn];var bi=$[Jn],Ei=ve[Jn];if(ot)var vl=Dt?ot(Ei,bi,Jn,ve,$,Tt):ot(bi,Ei,Jn,$,ve,Tt);if(!(vl===i?bi===Ei||Be(bi,Ei,ot,St,Tt):vl)){At=!1;break}wi||(wi=Jn=="constructor")}if(At&&!wi){var zt=$.constructor,bs=ve.constructor;zt!=bs&&"constructor"in $&&"constructor"in ve&&!(typeof zt=="function"&&zt instanceof zt&&typeof bs=="function"&&bs instanceof bs)&&(At=!1)}return Tt.delete($),Tt.delete(ve),At}function Xs($){return ya($,Xi,hc)}function cc(){var $=kn.iteratee||ws;return $=$===ws?xa:$,arguments.length?$(arguments[0],arguments[1]):$}function qs($,ve){var Be=$.__data__;return wn(ve)?Be[typeof ve=="string"?"string":"hash"]:Be.map}function Rn($){for(var ve=Xi($),Be=ve.length;Be--;){var ot=ve[Be],St=$[ot];ve[Be]=[ot,St,Hn(St)]}return ve}function To($,ve){var Be=Xe($,ve);return _i(Be)?Be:i}var hc=Qe?kt(Qe,Object):gu,Hi=va;(tn&&Hi(new tn(new ArrayBuffer(1)))!=ye||cn&&Hi(new cn)!=V||Nt&&Hi(Nt.resolve())!=W||Xt&&Hi(new Xt)!=S||hn&&Hi(new hn)!=q)&&(Hi=function($){var ve=ke.call($),Be=ve==oe?$.constructor:i,ot=Be?Co(Be):i;if(ot)switch(ot){case xn:return ye;case Mn:return V;case ni:return W;case an:return S;case br:return q}return ve});function _s($,ve,Be){ve=xs(ve,$)?[ve]:vs(ve);for(var ot,St=-1,Dt=ve.length;++St<Dt;){var Tt=dl(ve[St]);if(!(ot=$!=null&&Be($,Tt)))break;$=$[Tt]}if(ot)return ot;var Dt=$?$.length:0;return!!Dt&&Jr(Dt)&&cu(Tt,Dt)&&(Rr($)||Ao($))}function jh($){var ve=$.length,Be=$.constructor(ve);return ve&&typeof $[0]=="string"&&dr.call($,"index")&&(Be.index=$.index,Be.input=$.input),Be}function Dh($){return typeof $.constructor=="function"&&!Vn($)?ol(ze($)):{}}function fc($,ve,Be,ot){var St=$.constructor;switch(ve){case J:return au($);case F:case Q:return new St(+$);case ye:return zh($,ot);case xe:case be:case te:case le:case ie:case ne:case me:case Ee:case we:return hl($,ot);case V:return Oh($,ot,Be);case U:case M:return new St($);case N:return Rh($);case S:return Fh($,ot,Be);case Z:return lu($)}}function cu($,ve){return ve=ve??A,!!ve&&(typeof $=="number"||Pt.test($))&&$>-1&&$%1==0&&$<ve}function nr($,ve,Be){if(!xi(Be))return!1;var ot=typeof ve;return(ot=="number"?Io(Be)&&cu(ve,Be.length):ot=="string"&&ve in Be)?Qo(Be[ve],$):!1}function xs($,ve){if(Rr($))return!1;var Be=typeof $;return Be=="number"||Be=="symbol"||Be=="boolean"||$==null||Li($)?!0:Le.test($)||!Ue.test($)||ve!=null&&$ in Object(ve)}function wn($){var ve=typeof $;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?$!=="__proto__":$===null}function ba($){return!!fr&&fr in $}function Vn($){var ve=$&&$.constructor,Be=typeof ve=="function"&&ve.prototype||wr;return $===Be}function Hn($){return $===$&&!xi($)}function Yo($,ve){return function(Be){return Be==null?!1:Be[$]===ve&&(ve!==i||$ in Object(Be))}}function Ea($){var ve=[];if($!=null)for(var Be in Object($))ve.push(Be);return ve}var hu=Jo(function($){$=du($);var ve=[];return Me.test($)&&ve.push(""),$.replace(He,function(Be,ot,St,Tt){ve.push(St?Tt.replace(rt,"$1"):ot||Be)}),ve});function dl($){if(typeof $=="string"||Li($))return $;var ve=$+"";return ve=="0"&&1/$==-w?"-0":ve}function Co($){if($!=null){try{return On.call($)}catch{}try{return $+""}catch{}}return""}function Bh($){for(var ve=-1,Be=$?$.length:0,ot=0,St=[];++ve<Be;){var Tt=$[ve];Tt&&(St[ot++]=Tt)}return St}function pl($,ve){var Be=Rr($)?Fe:yi;return Be($,cc(ve,3))}function Jo($,ve){if(typeof $!="function"||ve&&typeof ve!="function")throw new TypeError(d);var Be=function(){var ot=arguments,St=ve?ve.apply(this,ot):ot[0],Tt=Be.cache;if(Tt.has(St))return Tt.get(St);var Dt=$.apply(this,ot);return Be.cache=Tt.set(St,Dt),Dt};return Be.cache=new(Jo.Cache||gi),Be}Jo.Cache=gi;function ml($){return ki($,!1,!0)}function Qo($,ve){return $===ve||$!==$&&ve!==ve}function Ao($){return fu($)&&dr.call($,"callee")&&(!Ve.call($,"callee")||ke.call($)==E)}var Rr=Array.isArray;function Io($){return $!=null&&Jr($.length)&&!fo($)}function fu($){return Po($)&&Io($)}var gl=pt||yu;function gr($){if(Io($)&&(Rr($)||typeof $=="string"||typeof $.splice=="function"||gl($)||Ao($)))return!$.length;var ve=Hi($);if(ve==V||ve==S)return!$.size;if($n||Vn($))return!gt($).length;for(var Be in $)if(dr.call($,Be))return!1;return!0}function fo($){var ve=xi($)?ke.call($):"";return ve==pe||ve==G}function Jr($){return typeof $=="number"&&$>-1&&$%1==0&&$<=A}function xi($){var ve=typeof $;return!!$&&(ve=="object"||ve=="function")}function Po($){return!!$&&typeof $=="object"}function yl($){if(!Po($)||ke.call($)!=oe||st($))return!1;var ve=ze($);if(ve===null)return!0;var Be=dr.call(ve,"constructor")&&ve.constructor;return typeof Be=="function"&&Be instanceof Be&&On.call(Be)==mi}function Li($){return typeof $=="symbol"||Po($)&&ke.call($)==Z}var es=j?Re(j):ou;function Sa($){return wa($,Ca($))}function du($){return $==null?"":sc($)}function Ta($,ve,Be){var ot=$==null?i:Gs($,ve);return ot===i?Be:ot}function Ks($,ve){return $!=null&&_s($,ve,_a)}function Xi($){return Io($)?ma($):Zs($)}function Ca($){return Io($)?ma($,!0):ys($)}var ts=ac(function($,ve,Be){ul($,ve,Be)});function pu($){return $}function ws($){return xa(typeof $=="function"?$:ki($,!0))}function mu($){return xs($)?D(dl($)):cl($)}function gu(){return[]}function yu(){return!1}kn.compact=Bh,kn.iteratee=ws,kn.keys=Xi,kn.keysIn=Ca,kn.memoize=Jo,kn.merge=ts,kn.property=mu,kn.toPlainObject=Sa,kn.clone=ml,kn.eq=Qo,kn.forEach=pl,kn.get=Ta,kn.hasIn=Ks,kn.identity=pu,kn.isArguments=Ao,kn.isArray=Rr,kn.isArrayLike=Io,kn.isArrayLikeObject=fu,kn.isBuffer=gl,kn.isEmpty=gr,kn.isFunction=fo,kn.isLength=Jr,kn.isObject=xi,kn.isObjectLike=Po,kn.isPlainObject=yl,kn.isSymbol=Li,kn.isTypedArray=es,kn.stubArray=gu,kn.stubFalse=yu,kn.toString=du,kn.each=pl,kn.VERSION=a,Vt&&((Vt.exports=kn)._=kn,qt._=kn)}).call(Rl)})(ug,ug.exports);var wF=ug.exports,bF=sm;function sm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)sm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)sm(e.geometries[a],t);else if(i==="Feature")sm(e.geometry,t);else if(i==="Polygon")zE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)zE(e.coordinates[a],t);return e}function zE(e,t){if(e.length!==0){OE(e[0],t);for(var i=1;i<e.length;i++)OE(e[i],!t)}}function OE(e,t){for(var i=0,a=0,c=0,d=e.length,y=d-1;c<d;y=c++){var l=(e[c][0]-e[y][0])*(e[y][1]+e[c][1]),b=i+l;a+=Math.abs(i)>=Math.abs(l)?i-b+l:l-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const EF=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var SF=EF,Pn=wF,Bp=bF,am={};SF.forEach(function(e){if(e.polygon==="all")am[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),am[e.key]={},am[e.key][t]=i}});function TF(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Pn.merge(e,t)}var cg={};cg=function(e,t,i){t=Pn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:am,deduplicator:TF},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=d(e):a=c(e),a;function c(b){var w=new Array,A=new Array,E=new Array;function L(W){var N=Pn.clone(W);N.lat=W.center.lat,N.lon=W.center.lon,N.__is_center_placeholder=!0,w.push(N)}function F(W){var N=Pn.clone(W);N.nodes=[];function S(M,Z,q){var J={type:"node",id:"_"+N.type+"/"+N.id+"bounds"+q,lat:M,lon:Z};N.nodes.push(J.id),w.push(J)}S(N.bounds.minlat,N.bounds.minlon,1),S(N.bounds.maxlat,N.bounds.minlon,2),S(N.bounds.maxlat,N.bounds.maxlon,3),S(N.bounds.minlat,N.bounds.maxlon,4),N.nodes.push(N.nodes[0]),N.__is_bounds_placeholder=!0,A.push(N)}function Q(W){function N(S,M,Z){var q={type:"node",id:Z,lat:S,lon:M};w.push(q)}Pn.isArray(W.nodes)||(W.nodes=W.geometry.map(function(S){return S!==null?"_anonymous@"+S.lat+"/"+S.lon:"_anonymous@unknown_location"})),W.geometry.forEach(function(S,M){S&&N(S.lat,S.lon,W.nodes[M])})}function K(W){function N(M,Z,q){var J={type:"node",id:q,lat:M,lon:Z};w.push(J)}function S(M,Z){if(A.some(function(ye){return ye.type=="way"&&ye.id==Z}))return;var q={type:"way",id:Z,nodes:[]};function J(ye,xe){var be={type:"node",id:"_anonymous@"+ye+"/"+xe,lat:ye,lon:xe};q.nodes.push(be.id),w.push(be)}M.forEach(function(ye){ye?J(ye.lat,ye.lon):q.nodes.push(void 0)}),A.push(q)}W.members.forEach(function(M,Z){M.type=="node"?M.lat&&N(M.lat,M.lon,M.ref):M.type=="way"&&M.geometry&&(M.ref="_fullGeom"+M.ref,S(M.geometry,M.ref))})}for(var pe=0;pe<b.elements.length;pe++)switch(b.elements[pe].type){case"node":var G=b.elements[pe];w.push(G);break;case"way":var V=Pn.clone(b.elements[pe]);V.nodes=Pn.clone(V.nodes),A.push(V),V.center&&L(V),V.geometry?Q(V):V.bounds&&F(V);break;case"relation":var U=Pn.clone(b.elements[pe]);U.members=Pn.clone(U.members),E.push(U);var oe=U.members&&U.members.some(function(W){return W.type=="node"&&W.lat||W.type=="way"&&W.geometry&&W.geometry.length>0});U.center&&L(U),oe?K(U):U.bounds&&F(U);break}return y(w,A,E)}function d(b){var w=new Array,A=new Array,E=new Array;function L(U,oe,W){U.hasAttribute(W)&&(oe[W]=U.getAttribute(W))}function F(U,oe){var W=Pn.clone(U);L(oe,W,"lat"),L(oe,W,"lon"),W.__is_center_placeholder=!0,w.push(W)}function Q(U,oe){var W=Pn.clone(U);W.nodes=[];function N(S,M,Z){var q={type:"node",id:"_"+W.type+"/"+W.id+"bounds"+Z,lat:S,lon:M};W.nodes.push(q.id),w.push(q)}N(oe.getAttribute("minlat"),oe.getAttribute("minlon"),1),N(oe.getAttribute("maxlat"),oe.getAttribute("minlon"),2),N(oe.getAttribute("maxlat"),oe.getAttribute("maxlon"),3),N(oe.getAttribute("minlat"),oe.getAttribute("maxlon"),4),W.nodes.push(W.nodes[0]),W.__is_bounds_placeholder=!0,A.push(W)}function K(U,oe){function W(N,S,M){var Z={type:"node",id:M,lat:N,lon:S};return w.push(Z),Z.id}Pn.isArray(U.nodes)||(U.nodes=[],Pn.each(oe,function(N,S){U.nodes.push("_anonymous@"+N.getAttribute("lat")+"/"+N.getAttribute("lon"))})),Pn.each(oe,function(N,S){N.getAttribute("lat")&&W(N.getAttribute("lat"),N.getAttribute("lon"),U.nodes[S])})}function pe(U,oe){function W(S,M,Z){var q={type:"node",id:Z,lat:S,lon:M};w.push(q)}function N(S,M){if(A.some(function(J){return J.type=="way"&&J.id==M}))return;var Z={type:"way",id:M,nodes:[]};function q(J,ye){var xe={type:"node",id:"_anonymous@"+J+"/"+ye,lat:J,lon:ye};Z.nodes.push(xe.id),w.push(xe)}Pn.each(S,function(J){J.getAttribute("lat")?q(J.getAttribute("lat"),J.getAttribute("lon")):Z.nodes.push(void 0)}),A.push(Z)}Pn.each(oe,function(S,M){U.members[M].type=="node"?S.getAttribute("lat")&&W(S.getAttribute("lat"),S.getAttribute("lon"),U.members[M].ref):U.members[M].type=="way"&&S.getElementsByTagName("nd").length>0&&(U.members[M].ref="_fullGeom"+U.members[M].ref,N(S.getElementsByTagName("nd"),U.members[M].ref))})}Pn.each(b.getElementsByTagName("node"),function(U,oe){var W={};Pn.each(U.getElementsByTagName("tag"),function(S){W[S.getAttribute("k")]=S.getAttribute("v")});var N={type:"node"};L(U,N,"id"),L(U,N,"lat"),L(U,N,"lon"),L(U,N,"version"),L(U,N,"timestamp"),L(U,N,"changeset"),L(U,N,"uid"),L(U,N,"user"),Pn.isEmpty(W)||(N.tags=W),w.push(N)});var G,V;return Pn.each(b.getElementsByTagName("way"),function(U,oe){var W={},N=[];Pn.each(U.getElementsByTagName("tag"),function(Z){W[Z.getAttribute("k")]=Z.getAttribute("v")});var S=!1;Pn.each(U.getElementsByTagName("nd"),function(Z,q){var J;(J=Z.getAttribute("ref"))&&(N[q]=J),!S&&Z.getAttribute("lat")&&(S=!0)});var M={type:"way"};L(U,M,"id"),L(U,M,"version"),L(U,M,"timestamp"),L(U,M,"changeset"),L(U,M,"uid"),L(U,M,"user"),N.length>0&&(M.nodes=N),Pn.isEmpty(W)||(M.tags=W),(G=U.getElementsByTagName("center")[0])&&F(M,G),S?K(M,U.getElementsByTagName("nd")):(V=U.getElementsByTagName("bounds")[0])&&Q(M,V),A.push(M)}),Pn.each(b.getElementsByTagName("relation"),function(U,oe){var W={},N=[];Pn.each(U.getElementsByTagName("tag"),function(Z){W[Z.getAttribute("k")]=Z.getAttribute("v")});var S=!1;Pn.each(U.getElementsByTagName("member"),function(Z,q){N[q]={},L(Z,N[q],"ref"),L(Z,N[q],"role"),L(Z,N[q],"type"),(!S&&N[q].type=="node"&&Z.getAttribute("lat")||N[q].type=="way"&&Z.getElementsByTagName("nd").length>0)&&(S=!0)});var M={type:"relation"};L(U,M,"id"),L(U,M,"version"),L(U,M,"timestamp"),L(U,M,"changeset"),L(U,M,"uid"),L(U,M,"user"),N.length>0&&(M.members=N),Pn.isEmpty(W)||(M.tags=W),(G=U.getElementsByTagName("center")[0])&&F(M,G),S?pe(M,U.getElementsByTagName("member")):(V=U.getElementsByTagName("bounds")[0])&&Q(M,V),E.push(M)}),y(w,A,E)}function y(b,w,A){function E(Me,He){if(typeof He!="object"&&(He={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Me,He);for(var Ge in Me)if(t.uninterestingTags[Ge]!==!0&&!(He[Ge]===!0||He[Ge]===Me[Ge]))return!0;return!1}function L(Me){var He={timestamp:Me.timestamp,version:Me.version,changeset:Me.changeset,user:Me.user,uid:Me.uid};for(var Ge in He)He[Ge]===void 0&&delete He[Ge];return He}for(var F=new Object,Q=new Object,K=0;K<b.length;K++){var pe=b[K];F[pe.id]!==void 0&&(pe=t.deduplicator(pe,F[pe.id])),F[pe.id]=pe,typeof pe.tags<"u"&&E(pe.tags)&&(Q[pe.id]=!0)}for(var K=0;K<A.length;K++)if(Pn.isArray(A[K].members))for(var G=0;G<A[K].members.length;G++)A[K].members[G].type=="node"&&(Q[A[K].members[G].ref]=!0);for(var V=new Object,U=new Object,K=0;K<w.length;K++){var oe=w[K];if(V[oe.id]&&(oe=t.deduplicator(oe,V[oe.id])),V[oe.id]=oe,Pn.isArray(oe.nodes))for(var G=0;G<oe.nodes.length;G++)typeof oe.nodes[G]!="object"&&(U[oe.nodes[G]]=!0,oe.nodes[G]=F[oe.nodes[G]])}var W=new Array;for(var N in F){var pe=F[N];(!U[N]||Q[N])&&W.push(pe)}for(var S=new Array,K=0;K<A.length;K++){var M=A[K];S[M.id]&&(M=t.deduplicator(M,S[M.id])),S[M.id]=M}var Z={node:{},way:{},relation:{}};for(var N in S){var M=S[N];if(!Pn.isArray(M.members)){t.verbose&&console.warn("Relation",M.type+"/"+M.id,"ignored because it has no members");continue}for(var G=0;G<M.members.length;G++){var q=M.members[G].type,J=M.members[G].ref;if(typeof J!="number"&&(J=J.replace("_fullGeom","")),!Z[q]){t.verbose&&console.warn("Relation",M.type+"/"+M.id,"member",q+"/"+J,"ignored because it has an invalid type");continue}typeof Z[q][J]>"u"&&(Z[q][J]=[]),Z[q][J].push({role:M.members[G].role,rel:M.id,reltags:M.tags})}}var ye,xe=[];for(K=0;K<W.length;K++){if(typeof W[K].lon>"u"||typeof W[K].lat>"u"){t.verbose&&console.warn("POI",W[K].type+"/"+W[K].id,"ignored because it lacks coordinates");continue}var be={type:"Feature",id:W[K].type+"/"+W[K].id,properties:{type:W[K].type,id:W[K].id,tags:W[K].tags||{},relations:Z.node[W[K].id]||[],meta:L(W[K])},geometry:{type:"Point",coordinates:[+W[K].lon,+W[K].lat]}};W[K].__is_center_placeholder&&(be.properties.geometry="center"),i?i(be):xe.push(be)}for(var te=[],le=[],K=0;K<A.length;K++)if(S[A[K].id]===A[K]){if(typeof A[K].tags<"u"&&(A[K].tags.type=="route"||A[K].tags.type=="waterway")){let He=function(Ge){var rt=!1,ct;ct=Ge.members.filter(function(Et){return Et.type==="way"}),ct=ct.map(function(Et){var Je=V[Et.ref];if(Je===void 0||Je.nodes===void 0){t.verbose&&console.warn("Route "+Ge.type+"/"+Ge.id,"tainted by a missing or incomplete  way",Et.type+"/"+Et.ref),rt=!0;return}return{id:Et.ref,role:Et.role,way:Je,nodes:Je.nodes.filter(function(Ut){return Ut!==void 0?!0:(rt=!0,t.verbose&&console.warn("Route",Ge.type+"/"+Ge.id,"tainted by a way",Et.type+"/"+Et.ref,"with a missing node"),!1)})}}),ct=Pn.compact(ct);var vt;vt=R0(ct);var Pt=[];if(Pt=Pn.compact(vt.map(function(Et){return Pn.compact(Et.map(function(Je){return[+Je.lon,+Je.lat]}))})),Pt.length==0)return t.verbose&&console.warn("Route",Ge.type+"/"+Ge.id,"contains no coordinates"),!1;var ht={type:"Feature",id:Ge.type+"/"+Ge.id,properties:{type:Ge.type,id:Ge.id,tags:Ge.tags||{},relations:Z[Ge.type][Ge.id]||[],meta:L(Ge)},geometry:{type:Pt.length===1?"LineString":"MultiLineString",coordinates:Pt.length===1?Pt[0]:Pt}};return rt&&(t.verbose&&console.warn("Route",Ge.type+"/"+Ge.id,"is tainted"),ht.properties.tainted=!0),ht};var Ue=He;if(!Pn.isArray(A[K].members)){t.verbose&&console.warn("Route",A[K].type+"/"+A[K].id,"ignored because it has no members");continue}if(A[K].members.forEach(function(Ge){V[Ge.ref]&&!E(V[Ge.ref].tags)&&(V[Ge.ref].is_skippablerelationmember=!0)}),be=He(A[K]),be===!1){t.verbose&&console.warn("Route relation",A[K].type+"/"+A[K].id,"ignored because it has invalid geometry");continue}i?i(Bp(be)):le.push(be)}if(typeof A[K].tags<"u"&&(A[K].tags.type=="multipolygon"||A[K].tags.type=="boundary")){let Ge=function(rt,ct){var vt=!1,Pt=ne?"way":"relation",ht=typeof rt.id=="number"?rt.id:+rt.id.replace("_fullGeom",""),Et;Et=ct.members.filter(function(O){return O.type==="way"}),Et=Et.map(function(O){var _e=V[O.ref];if(_e===void 0||_e.nodes===void 0){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"tainted by a missing or incomplete way",O.type+"/"+O.ref),vt=!0;return}return{id:O.ref,role:O.role||"outer",way:_e,nodes:_e.nodes.filter(function(Ze){return Ze!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"tainted by a way",O.type+"/"+O.ref,"with a missing node"),!1)})}}),Et=Pn.compact(Et);var Je,Ut;Je=R0(Et.filter(function(O){return O.role==="outer"})),Ut=R0(Et.filter(function(O){return O.role==="inner"}));var fn;function qt(O){var _e=function(z,D){for(var ce=0;ce<D.length;ce++)if(Fe(D[ce],z))return!0;return!1},Ze=function(z){return z.map(function(D){return[+D.lat,+D.lon]})},Fe=function(z,D){for(var ce=z[0],Re=z[1],Xe=!1,st=0,en=D.length-1;st<D.length;en=st++){var kt=D[st][0],yn=D[st][1],An=D[en][0],_n=D[en][1],wr=yn>Re!=_n>Re&&ce<(An-kt)*(Re-yn)/(_n-yn)+kt;wr&&(Xe=!Xe)}return Xe},ut,ae;for(O=Ze(O),ut=0;ut<Je.length;ut++)if(ae=Ze(Je[ut]),_e(ae,O))return ut}fn=Je.map(function(O){return[O]});for(var Vt=0;Vt<Ut.length;Vt++){var un=qt(Ut[Vt]);un!==void 0?fn[un].push(Ut[Vt]):t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains an inner ring with no containing outer")}var gn=[];if(gn=Pn.compact(fn.map(function(O){var _e=Pn.compact(O.map(function(Ze){if(Ze.length<4){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains a ring with less than four nodes");return}return Pn.compact(Ze.map(function(Fe){return[+Fe.lon,+Fe.lat]}))}));if(_e.length==0){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains an empty ring cluster");return}return _e})),gn.length==0)return t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains no coordinates"),!1;var Se="MultiPolygon";gn.length===1&&(Se="Polygon",gn=gn[0]);var j={type:"Feature",id:rt.type+"/"+ht,properties:{type:rt.type,id:ht,tags:rt.tags||{},relations:Z[rt.type][rt.id]||[],meta:L(rt)},geometry:{type:Se,coordinates:gn}};return vt&&(t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"is tainted"),j.properties.tainted=!0),j};var Le=Ge;if(!Pn.isArray(A[K].members)){t.verbose&&console.warn("Multipolygon",A[K].type+"/"+A[K].id,"ignored because it has no members");continue}for(var ie=0,G=0;G<A[K].members.length;G++)A[K].members[G].role=="outer"?ie++:t.verbose&&A[K].members[G].role!="inner"&&console.warn("Multipolygon",A[K].type+"/"+A[K].id,"member",A[K].members[G].type+"/"+A[K].members[G].ref,'ignored because it has an invalid role: "'+A[K].members[G].role+'"');if(A[K].members.forEach(function(rt){V[rt.ref]&&(rt.role==="outer"&&!E(V[rt.ref].tags,A[K].tags)&&(V[rt.ref].is_skippablerelationmember=!0),rt.role==="inner"&&!E(V[rt.ref].tags)&&(V[rt.ref].is_skippablerelationmember=!0))}),ie==0){t.verbose&&console.warn("Multipolygon relation",A[K].type+"/"+A[K].id,"ignored because it has no outer ways");continue}var ne=!1;ie==1&&!E(A[K].tags,{type:!0})&&(ne=!0);var be=null;if(!ne)be=Ge(A[K],A[K]);else{var me=A[K].members.filter(function(rt){return rt.role==="outer"})[0];if(me=V[me.ref],me===void 0){t.verbose&&console.warn("Multipolygon relation",A[K].type+"/"+A[K].id,"ignored because outer way",me.type+"/"+me.ref,"is missing");continue}me.is_skippablerelationmember=!0,be=Ge(me,A[K])}if(be===!1){t.verbose&&console.warn("Multipolygon relation",A[K].type+"/"+A[K].id,"ignored because it has invalid geometry");continue}i?i(Bp(be)):le.push(be)}}for(var K=0;K<w.length;K++)if(V[w[K].id]===w[K]){if(!Pn.isArray(w[K].nodes)){t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"ignored because it has no nodes");continue}if(!w[K].is_skippablerelationmember){typeof w[K].id!="number"&&(w[K].id=+w[K].id.replace("_fullGeom","")),w[K].tainted=!1,w[K].hidden=!1;var Ee=new Array;for(G=0;G<w[K].nodes.length;G++)typeof w[K].nodes[G]=="object"?Ee.push([+w[K].nodes[G].lon,+w[K].nodes[G].lat]):(t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"is tainted by an invalid node"),w[K].tainted=!0);if(Ee.length<=1){t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"ignored because it contains too few nodes");continue}var we="LineString";typeof w[K].nodes[0]<"u"&&typeof w[K].nodes[w[K].nodes.length-1]<"u"&&w[K].nodes[0].id===w[K].nodes[w[K].nodes.length-1].id&&(typeof w[K].tags<"u"&&l(w[K].tags)||w[K].__is_bounds_placeholder)&&(we="Polygon",Ee=[Ee]);var be={type:"Feature",id:w[K].type+"/"+w[K].id,properties:{type:w[K].type,id:w[K].id,tags:w[K].tags||{},relations:Z.way[w[K].id]||[],meta:L(w[K])},geometry:{type:we,coordinates:Ee}};w[K].tainted&&(t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"is tainted"),be.properties.tainted=!0),w[K].__is_bounds_placeholder&&(be.properties.geometry="bounds"),i?i(Bp(be)):we=="LineString"?te.push(be):le.push(be)}}return i?!0:(ye={type:"FeatureCollection",features:[]},ye.features=ye.features.concat(le),ye.features=ye.features.concat(te),ye.features=ye.features.concat(xe),t.flatProperties&&ye.features.forEach(function(Me){Me.properties=Pn.merge(Me.properties.meta,Me.properties.tags,{id:Me.properties.type+"/"+Me.properties.id})}),ye=Bp(ye),ye)}function l(b){var w=t.polygonFeatures;if(typeof w=="function")return w(b);if(b.area==="no")return!1;for(var A in b){var E=b[A],L=w[A];if(!(typeof L>"u")&&E!=="no"&&(L===!0||L.included_values&&L.included_values[E]===!0||L.excluded_values&&L.excluded_values[E]!==!0))return!0}return!1}};function R0(e){for(var t=function(E){return E[0]},i=function(E){return E[E.length-1]},a=function(E,L){return E!==void 0&&L!==void 0&&E.id===L.id},c=[],d,y,l,b,w,A;e.length;)for(d=e.pop().nodes.slice(),c.push(d);e.length&&!a(t(d),i(d));){for(y=t(d),l=i(d),b=0;b<e.length;b++)if(A=e[b].nodes,a(l,t(A))){w=d.push,A=A.slice(1);break}else if(a(l,i(A))){w=d.push,A=A.slice(0,-1).reverse();break}else if(a(y,i(A))){w=d.unshift,A=A.slice(0,-1);break}else if(a(y,t(A))){w=d.unshift,A=A.slice(1).reverse();break}else A=w=null;if(!A)break;e.splice(b,1),w.apply(d,A)}return c}cg.toGeojson=cg;var CF=cg;const AF=Sd(CF),F0={type:"FeatureCollection",features:[]},rI=()=>{const[e,t]=_t.useState(!1),i=_t.useCallback(async(y,l,b)=>{var K,pe;if(e||(console.log(b),b<16))return F0;t(!0);let w=300;b>17&&(w=200),b>18&&(w=100),b>19&&(w=50),console.log("overpass: loading...");let A="[out:json]";A+=`[timeout:25];
`,A+='nwr["building"]',A+=`(around:${w},${y},${l});
`,A+="out meta geom;",console.log(A);const E=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(A)}`,{});if(E.status!==200)return t(!1),F0;const L=await E.json();console.log("overpass json elements: ",L.elements);const F=AF(L);console.log("overpass osmtogeojson raw: ",F);for await(const G of F.features){if(!G.properties)continue;G.id=G.properties.id.split("/")[1];const V=(K=L.elements.filter(oe=>G.id?typeof G.id=="number"?oe.id===G.id:oe.id===parseInt(G.id):!1))==null?void 0:K[0];if(V&&(G.properties.tags=V.tags,G.properties.nodes=V.nodes),G.geometry.type==="Polygon"){const oe=fF(G.geometry.coordinates);var Q=yF(oe);G.properties.center=Q.geometry.coordinates}G.geometry.type==="Point"&&(G.properties.center=G.geometry.coordinates);const U=G.properties.uid;if(U){let oe=localStorage.getItem(U+"-icon");if(oe===null){const W=await js.getUser(U);(pe=W.img)!=null&&pe.href?(oe=W.img.href,localStorage.setItem(U+"-icon",W.img.href)):localStorage.setItem(U+"-icon","")}G.properties.userIconHref=oe||""}}return console.log("overpass osmtogeojson converted: ",F),console.log("overpass: loaded."),t(!1),F},[]),[a,c]=_t.useState(!1),d=_t.useCallback(async y=>{console.log("overpass: loading...",y),c(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(b.status!==200){c(!1);return}const w=await b.json();console.log("overpass json parent elements: ",w.elements);const A=250,E=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${A});
      out;
      `;console.log(E);const L=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(E)}`,{});if(L.status!==200){c(!1);return}const F=await L.json();console.log("overpass json child elements: ",F.elements);const Q=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${A});
      out;
      `;console.log(Q);const K=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(Q)}`,{});if(K.status!==200){c(!1);return}const pe=await K.json();return console.log("overpass json neighbour elements: ",pe.elements),c(!1),[...w.elements,...F.elements,...pe.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:d,loadingOverpass:e,loadingOverpassAdmin:a}},IF=()=>dt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[dt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),dt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),dt.jsxs("datalist",{id:"source-list",children:[dt.jsx("option",{value:"survey"}),dt.jsx("option",{value:"local knowledge"}),dt.jsx("option",{value:"extrapolation"}),dt.jsx("option",{value:"estimation from existing data"})]})]}),j0={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},PF=({feature:e,onCancel:t,onSubmit:i})=>{var ye,xe,be,te;const{detectCountry:a,loadingCountry:c}=vF(),{fetchOverpassAdmin:d,loadingOverpassAdmin:y}=rI(),l=JSON.parse((ye=e.properties)==null?void 0:ye.center),[b,w]=_t.useState(void 0),[A,E]=_t.useState(),[L,F]=_t.useState(e),[Q,K]=_t.useState(!1),[pe,G]=_t.useState(!1),[V,U]=_t.useState(!1),[oe,W]=_t.useState(),[N,S]=_t.useState();_t.useEffect(()=>{K(js.isLoggedIn())},[]),_t.useEffect(()=>{(async()=>{var ie,ne;const le=await a(l[0],l[1]);if(w(le),(ie=le==null?void 0:le.properties)!=null&&ie.ISO_A3&&ME[le.properties.ISO_A3]){const me=ME[le.properties.ISO_A3];E(me);const Ee=me.defaultComment+" "+((ne=e.properties)==null?void 0:ne.id);S(Ee)}})()},[e]),_t.useEffect(()=>{console.log(L.properties)},[L]);const M=_t.useCallback(async()=>{const le=await $C.openReverseGeocoder([l[0],l[1]]);F(ie=>{const ne={properties:{"addr:province":le.prefecture,"addr:city":le.city,...ie.properties}};return{...ie,...ne}})},[]),Z=_t.useCallback(async()=>{if(!L.properties)return;L.properties.nodes;const le=await d(JSON.parse(L.properties.nodes));console.log("onOverpassReverseGeocode",le),W(le)},[L]),q=_t.useCallback(async le=>{var Le,Me,He;U(!0),le.preventDefault();const ie=new FormData(le.currentTarget),ne=JSON.parse((Le=e.properties)==null?void 0:Le.tags);ie.forEach((Ge,rt)=>{typeof Ge=="string"&&Ge.length>0&&rt!=="comment"&&rt!=="source"&&(ne[rt]=Ge)});const me={type:"way",id:e.id,version:(Me=e.properties)==null?void 0:Me.version,tags:ne,nodes:JSON.parse((He=e.properties)==null?void 0:He.nodes)};console.info(JSON.stringify(me,null,2));const Ee={create:[],modify:[me],delete:[]},we=ie.get("comment");we&&(j0.comment=we.toString());const Ue=ie.get("source");Ue&&(j0.source=Ue.toString()),await js.uploadChangeset(j0,Ee),U(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),J=_t.useCallback(()=>{G(!0)},[]);return L.properties?dt.jsxs("div",{children:[dt.jsxs("div",{children:["OSM:"," ",dt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+L.properties.id,target:"_blank",children:L.properties.id})," | ",dt.jsx(BC,{feature:L}),A&&dt.jsxs("span",{children:[" | ","Address:"," ",dt.jsx(_F,{feature:L,fields:A})]})]}),c?dt.jsx(fa,{icon:Zv,spin:!0}):dt.jsx(dt.Fragment,{children:A?dt.jsxs("form",{onSubmit:q,children:[dt.jsx("div",{className:"flex flex-wrap",children:dt.jsx(O0,{feature:L,fieldOption:A.postcodeField,onChange:J})}),dt.jsx("div",{className:"flex flex-wrap",children:A.mainFields.map(le=>dt.jsx(O0,{feature:L,fieldOption:le,onChange:J,suggestList:oe},le.key))}),dt.jsx("div",{className:"flex flex-wrap",children:A.detailFields.map(le=>dt.jsx(O0,{feature:L,fieldOption:le,onChange:J},le.key))}),dt.jsxs("div",{className:"flex flex-wrap",children:[dt.jsx(IF,{}),dt.jsx(xF,{defaultValue:N})]}),dt.jsx("div",{className:"flex flex-wrap",children:dt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[dt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((xe=b==null?void 0:b.properties)==null?void 0:xe.ISO_A3)==="JPN"&&dt.jsx("button",{type:"button",onClick:M,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),dt.jsxs("button",{type:"button",disabled:y,onClick:Z,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",y&&dt.jsx(fa,{icon:Zv,spin:!0})]}),dt.jsx("button",{disabled:!Q||V||!pe,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!Q&&dt.jsxs(dt.Fragment,{children:[dt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),dt.jsx(DC,{})]})]})})]}):dt.jsx("div",{className:"flex flex-wrap",children:dt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[dt.jsxs("div",{className:"py-2",children:[dt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(be=b==null?void 0:b.properties)==null?void 0:be.NAME," (ISO code:",(te=b==null?void 0:b.properties)==null?void 0:te.ISO_A3,") does not support yet."]}),dt.jsx("p",{children:dt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),dt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function MF(e,t){const[i,a]=_t.useState(e);return _t.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const kF={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},LF={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function zF(){const e=_t.useRef(null),[t,i]=_t.useState(),a=MF(t,2500),c=_t.useRef(null),[d,y]=_t.useState({type:"FeatureCollection",features:[]}),[l,b]=_t.useState("auto"),[w,A]=_t.useState(),[E,L]=_t.useState([]),{fetchOverpassBuildings:F,loadingOverpass:Q}=rI();_t.useEffect(()=>{setTimeout(()=>{var S;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(S=c.current)==null||S.trigger())},500)},[]);const K=_t.useCallback(S=>{const M=S.target.getCenter(),Z=S.target.getZoom();i({zoom:Z,latitude:M.lat,longitude:M.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),pe=_t.useCallback(S=>{i(S.viewState)},[]),G=_t.useCallback(S=>{i(S.viewState)},[]);_t.useEffect(()=>{(async()=>{if(!a)return;const S=a,M=await F(S.latitude,S.longitude,S.zoom);y(M)})()},[a]);const V=_t.useCallback(S=>{var ye;b("pointer");const{features:M,point:{x:Z,y:q}}=S,J=M&&M[0];J?((ye=e.current)==null||ye.setFeatureState({source:"buildings-source",id:J.id},{hover:!0}),A({feature:J,x:Z,y:q})):A(void 0)},[]),U=_t.useCallback(S=>{var M;b("auto"),(M=e.current)==null||M.querySourceFeatures("buildings-source").map(Z=>{var q;(q=e.current)==null||q.setFeatureState({source:"buildings-source",id:Z.id},{hover:!1})}),A(void 0)},[]),oe=_t.useCallback(S=>{var Z;W();const M=S.features&&S.features[0];M&&((Z=e.current)==null||Z.setFeatureState({source:"buildings-source",id:M.id},{select:!0}),L([M]))},[]),W=_t.useCallback(()=>{var S;(S=e.current)==null||S.querySourceFeatures("buildings-source").map(M=>{var Z;(Z=e.current)==null||Z.setFeatureState({source:"buildings-source",id:M.id},{select:!1})}),L([])},[]),N=_t.useMemo(()=>{let S=25;return t&&(S=t.zoom<18?20:t.zoom<19?25:35),d.features.map((M,Z)=>!M.properties||!M.properties.center?null:dt.jsx(Z3,{style:{cursor:"pointer"},longitude:M.properties.center[0],latitude:M.properties.center[1],anchor:"center",children:dt.jsx(M5,{feature:M,size:S})},`marker-${Z}`))},[d,t]);return dt.jsxs("div",{children:[dt.jsx(c5,{}),dt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:dt.jsx(z5,{viewState:t})}),dt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[E.length>0&&dt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:dt.jsx("div",{style:{padding:"10px"},children:E.map(S=>dt.jsx(PF,{feature:S,onCancel:W,onSubmit:W},S.id))})}),dt.jsxs(v1,{ref:e,...t,onMove:pe,onMoveEnd:G,onLoad:K,interactiveLayerIds:["buildings-layer-fill"],onClick:oe,onMouseEnter:V,onMouseLeave:U,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:JT,style:{width:"100%",height:"100%"},mapStyle:kF,children:[dt.jsx(n4,{id:"buildings-source",type:"geojson",data:d,children:dt.jsx(s4,{...LF})}),dt.jsx(Y3,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),dt.jsx(q3,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),dt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?dt.jsx(fa,{size:"2x",icon:a5}):Q?dt.jsx(fa,{size:"2x",icon:Zv,spin:!0}):dt.jsx(fa,{size:"2x",icon:l5})}),N,w&&dt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:w.x+5,top:w.y+5},children:[dt.jsx(BC,{feature:w.feature}),dt.jsx("br",{}),dt.jsx(k5,{feature:w.feature}),dt.jsx(h5,{feature:w.feature})]})]})]})]})}var iI={},Ng={};Ng.byteLength=FF;Ng.toByteArray=DF;Ng.fromByteArray=UF;var la=[],as=[],OF=typeof Uint8Array<"u"?Uint8Array:Array,D0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dc=0,RF=D0.length;Dc<RF;++Dc)la[Dc]=D0[Dc],as[D0.charCodeAt(Dc)]=Dc;as["-".charCodeAt(0)]=62;as["_".charCodeAt(0)]=63;function oI(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function FF(e){var t=oI(e),i=t[0],a=t[1];return(i+a)*3/4-a}function jF(e,t,i){return(t+i)*3/4-i}function DF(e){var t,i=oI(e),a=i[0],c=i[1],d=new OF(jF(e,a,c)),y=0,l=c>0?a-4:a,b;for(b=0;b<l;b+=4)t=as[e.charCodeAt(b)]<<18|as[e.charCodeAt(b+1)]<<12|as[e.charCodeAt(b+2)]<<6|as[e.charCodeAt(b+3)],d[y++]=t>>16&255,d[y++]=t>>8&255,d[y++]=t&255;return c===2&&(t=as[e.charCodeAt(b)]<<2|as[e.charCodeAt(b+1)]>>4,d[y++]=t&255),c===1&&(t=as[e.charCodeAt(b)]<<10|as[e.charCodeAt(b+1)]<<4|as[e.charCodeAt(b+2)]>>2,d[y++]=t>>8&255,d[y++]=t&255),d}function BF(e){return la[e>>18&63]+la[e>>12&63]+la[e>>6&63]+la[e&63]}function NF(e,t,i){for(var a,c=[],d=t;d<i;d+=3)a=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(BF(a));return c.join("")}function UF(e){for(var t,i=e.length,a=i%3,c=[],d=16383,y=0,l=i-a;y<l;y+=d)c.push(NF(e,y,y+d>l?l:y+d));return a===1?(t=e[i-1],c.push(la[t>>2]+la[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(la[t>>10]+la[t>>4&63]+la[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Ng,i=Rg,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=V,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,l.TYPED_ARRAY_SUPPORT=d(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const ae=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(ae,z),ae.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function y(ae){if(ae>c)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const z=new Uint8Array(ae);return Object.setPrototypeOf(z,l.prototype),z}function l(ae,z,D){if(typeof ae=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(ae)}return b(ae,z,D)}l.poolSize=8192;function b(ae,z,D){if(typeof ae=="string")return L(ae,z);if(ArrayBuffer.isView(ae))return Q(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(O(ae,ArrayBuffer)||ae&&O(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(ae,SharedArrayBuffer)||ae&&O(ae.buffer,SharedArrayBuffer)))return K(ae,z,D);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ce=ae.valueOf&&ae.valueOf();if(ce!=null&&ce!==ae)return l.from(ce,z,D);const Re=pe(ae);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return l.from(ae[Symbol.toPrimitive]("string"),z,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}l.from=function(ae,z,D){return b(ae,z,D)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function w(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function A(ae,z,D){return w(ae),ae<=0?y(ae):z!==void 0?typeof D=="string"?y(ae).fill(z,D):y(ae).fill(z):y(ae)}l.alloc=function(ae,z,D){return A(ae,z,D)};function E(ae){return w(ae),y(ae<0?0:G(ae)|0)}l.allocUnsafe=function(ae){return E(ae)},l.allocUnsafeSlow=function(ae){return E(ae)};function L(ae,z){if((typeof z!="string"||z==="")&&(z="utf8"),!l.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const D=U(ae,z)|0;let ce=y(D);const Re=ce.write(ae,z);return Re!==D&&(ce=ce.slice(0,Re)),ce}function F(ae){const z=ae.length<0?0:G(ae.length)|0,D=y(z);for(let ce=0;ce<z;ce+=1)D[ce]=ae[ce]&255;return D}function Q(ae){if(O(ae,Uint8Array)){const z=new Uint8Array(ae);return K(z.buffer,z.byteOffset,z.byteLength)}return F(ae)}function K(ae,z,D){if(z<0||ae.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<z+(D||0))throw new RangeError('"length" is outside of buffer bounds');let ce;return z===void 0&&D===void 0?ce=new Uint8Array(ae):D===void 0?ce=new Uint8Array(ae,z):ce=new Uint8Array(ae,z,D),Object.setPrototypeOf(ce,l.prototype),ce}function pe(ae){if(l.isBuffer(ae)){const z=G(ae.length)|0,D=y(z);return D.length===0||ae.copy(D,0,0,z),D}if(ae.length!==void 0)return typeof ae.length!="number"||_e(ae.length)?y(0):F(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return F(ae.data)}function G(ae){if(ae>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ae|0}function V(ae){return+ae!=ae&&(ae=0),l.alloc(+ae)}l.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==l.prototype},l.compare=function(z,D){if(O(z,Uint8Array)&&(z=l.from(z,z.offset,z.byteLength)),O(D,Uint8Array)&&(D=l.from(D,D.offset,D.byteLength)),!l.isBuffer(z)||!l.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===D)return 0;let ce=z.length,Re=D.length;for(let Xe=0,st=Math.min(ce,Re);Xe<st;++Xe)if(z[Xe]!==D[Xe]){ce=z[Xe],Re=D[Xe];break}return ce<Re?-1:Re<ce?1:0},l.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(z,D){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return l.alloc(0);let ce;if(D===void 0)for(D=0,ce=0;ce<z.length;++ce)D+=z[ce].length;const Re=l.allocUnsafe(D);let Xe=0;for(ce=0;ce<z.length;++ce){let st=z[ce];if(O(st,Uint8Array))Xe+st.length>Re.length?(l.isBuffer(st)||(st=l.from(st)),st.copy(Re,Xe)):Uint8Array.prototype.set.call(Re,st,Xe);else if(l.isBuffer(st))st.copy(Re,Xe);else throw new TypeError('"list" argument must be an Array of Buffers');Xe+=st.length}return Re};function U(ae,z){if(l.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||O(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const D=ae.length,ce=arguments.length>2&&arguments[2]===!0;if(!ce&&D===0)return 0;let Re=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Vt(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return Se(ae).length;default:if(Re)return ce?-1:Vt(ae).length;z=(""+z).toLowerCase(),Re=!0}}l.byteLength=U;function oe(ae,z,D){let ce=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,z>>>=0,D<=z))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return me(this,z,D);case"utf8":case"utf-8":return be(this,z,D);case"ascii":return ie(this,z,D);case"latin1":case"binary":return ne(this,z,D);case"base64":return xe(this,z,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,z,D);default:if(ce)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),ce=!0}}l.prototype._isBuffer=!0;function W(ae,z,D){const ce=ae[z];ae[z]=ae[D],ae[D]=ce}l.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<z;D+=2)W(this,D,D+1);return this},l.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<z;D+=4)W(this,D,D+3),W(this,D+1,D+2);return this},l.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<z;D+=8)W(this,D,D+7),W(this,D+1,D+6),W(this,D+2,D+5),W(this,D+3,D+4);return this},l.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?be(this,0,z):oe.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(z){if(!l.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:l.compare(this,z)===0},l.prototype.inspect=function(){let z="";const D=e.INSPECT_MAX_BYTES;return z=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(z+=" ... "),"<Buffer "+z+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(z,D,ce,Re,Xe){if(O(z,Uint8Array)&&(z=l.from(z,z.offset,z.byteLength)),!l.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(D===void 0&&(D=0),ce===void 0&&(ce=z?z.length:0),Re===void 0&&(Re=0),Xe===void 0&&(Xe=this.length),D<0||ce>z.length||Re<0||Xe>this.length)throw new RangeError("out of range index");if(Re>=Xe&&D>=ce)return 0;if(Re>=Xe)return-1;if(D>=ce)return 1;if(D>>>=0,ce>>>=0,Re>>>=0,Xe>>>=0,this===z)return 0;let st=Xe-Re,en=ce-D;const kt=Math.min(st,en),yn=this.slice(Re,Xe),An=z.slice(D,ce);for(let _n=0;_n<kt;++_n)if(yn[_n]!==An[_n]){st=yn[_n],en=An[_n];break}return st<en?-1:en<st?1:0};function N(ae,z,D,ce,Re){if(ae.length===0)return-1;if(typeof D=="string"?(ce=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,_e(D)&&(D=Re?0:ae.length-1),D<0&&(D=ae.length+D),D>=ae.length){if(Re)return-1;D=ae.length-1}else if(D<0)if(Re)D=0;else return-1;if(typeof z=="string"&&(z=l.from(z,ce)),l.isBuffer(z))return z.length===0?-1:S(ae,z,D,ce,Re);if(typeof z=="number")return z=z&255,typeof Uint8Array.prototype.indexOf=="function"?Re?Uint8Array.prototype.indexOf.call(ae,z,D):Uint8Array.prototype.lastIndexOf.call(ae,z,D):S(ae,[z],D,ce,Re);throw new TypeError("val must be string, number or Buffer")}function S(ae,z,D,ce,Re){let Xe=1,st=ae.length,en=z.length;if(ce!==void 0&&(ce=String(ce).toLowerCase(),ce==="ucs2"||ce==="ucs-2"||ce==="utf16le"||ce==="utf-16le")){if(ae.length<2||z.length<2)return-1;Xe=2,st/=2,en/=2,D/=2}function kt(An,_n){return Xe===1?An[_n]:An.readUInt16BE(_n*Xe)}let yn;if(Re){let An=-1;for(yn=D;yn<st;yn++)if(kt(ae,yn)===kt(z,An===-1?0:yn-An)){if(An===-1&&(An=yn),yn-An+1===en)return An*Xe}else An!==-1&&(yn-=yn-An),An=-1}else for(D+en>st&&(D=st-en),yn=D;yn>=0;yn--){let An=!0;for(let _n=0;_n<en;_n++)if(kt(ae,yn+_n)!==kt(z,_n)){An=!1;break}if(An)return yn}return-1}l.prototype.includes=function(z,D,ce){return this.indexOf(z,D,ce)!==-1},l.prototype.indexOf=function(z,D,ce){return N(this,z,D,ce,!0)},l.prototype.lastIndexOf=function(z,D,ce){return N(this,z,D,ce,!1)};function M(ae,z,D,ce){D=Number(D)||0;const Re=ae.length-D;ce?(ce=Number(ce),ce>Re&&(ce=Re)):ce=Re;const Xe=z.length;ce>Xe/2&&(ce=Xe/2);let st;for(st=0;st<ce;++st){const en=parseInt(z.substr(st*2,2),16);if(_e(en))return st;ae[D+st]=en}return st}function Z(ae,z,D,ce){return j(Vt(z,ae.length-D),ae,D,ce)}function q(ae,z,D,ce){return j(un(z),ae,D,ce)}function J(ae,z,D,ce){return j(Se(z),ae,D,ce)}function ye(ae,z,D,ce){return j(gn(z,ae.length-D),ae,D,ce)}l.prototype.write=function(z,D,ce,Re){if(D===void 0)Re="utf8",ce=this.length,D=0;else if(ce===void 0&&typeof D=="string")Re=D,ce=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(ce)?(ce=ce>>>0,Re===void 0&&(Re="utf8")):(Re=ce,ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Xe=this.length-D;if((ce===void 0||ce>Xe)&&(ce=Xe),z.length>0&&(ce<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let st=!1;for(;;)switch(Re){case"hex":return M(this,z,D,ce);case"utf8":case"utf-8":return Z(this,z,D,ce);case"ascii":case"latin1":case"binary":return q(this,z,D,ce);case"base64":return J(this,z,D,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,z,D,ce);default:if(st)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),st=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xe(ae,z,D){return z===0&&D===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(z,D))}function be(ae,z,D){D=Math.min(ae.length,D);const ce=[];let Re=z;for(;Re<D;){const Xe=ae[Re];let st=null,en=Xe>239?4:Xe>223?3:Xe>191?2:1;if(Re+en<=D){let kt,yn,An,_n;switch(en){case 1:Xe<128&&(st=Xe);break;case 2:kt=ae[Re+1],(kt&192)===128&&(_n=(Xe&31)<<6|kt&63,_n>127&&(st=_n));break;case 3:kt=ae[Re+1],yn=ae[Re+2],(kt&192)===128&&(yn&192)===128&&(_n=(Xe&15)<<12|(kt&63)<<6|yn&63,_n>2047&&(_n<55296||_n>57343)&&(st=_n));break;case 4:kt=ae[Re+1],yn=ae[Re+2],An=ae[Re+3],(kt&192)===128&&(yn&192)===128&&(An&192)===128&&(_n=(Xe&15)<<18|(kt&63)<<12|(yn&63)<<6|An&63,_n>65535&&_n<1114112&&(st=_n))}}st===null?(st=65533,en=1):st>65535&&(st-=65536,ce.push(st>>>10&1023|55296),st=56320|st&1023),ce.push(st),Re+=en}return le(ce)}const te=4096;function le(ae){const z=ae.length;if(z<=te)return String.fromCharCode.apply(String,ae);let D="",ce=0;for(;ce<z;)D+=String.fromCharCode.apply(String,ae.slice(ce,ce+=te));return D}function ie(ae,z,D){let ce="";D=Math.min(ae.length,D);for(let Re=z;Re<D;++Re)ce+=String.fromCharCode(ae[Re]&127);return ce}function ne(ae,z,D){let ce="";D=Math.min(ae.length,D);for(let Re=z;Re<D;++Re)ce+=String.fromCharCode(ae[Re]);return ce}function me(ae,z,D){const ce=ae.length;(!z||z<0)&&(z=0),(!D||D<0||D>ce)&&(D=ce);let Re="";for(let Xe=z;Xe<D;++Xe)Re+=Ze[ae[Xe]];return Re}function Ee(ae,z,D){const ce=ae.slice(z,D);let Re="";for(let Xe=0;Xe<ce.length-1;Xe+=2)Re+=String.fromCharCode(ce[Xe]+ce[Xe+1]*256);return Re}l.prototype.slice=function(z,D){const ce=this.length;z=~~z,D=D===void 0?ce:~~D,z<0?(z+=ce,z<0&&(z=0)):z>ce&&(z=ce),D<0?(D+=ce,D<0&&(D=0)):D>ce&&(D=ce),D<z&&(D=z);const Re=this.subarray(z,D);return Object.setPrototypeOf(Re,l.prototype),Re};function we(ae,z,D){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+z>D)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(z,D,ce){z=z>>>0,D=D>>>0,ce||we(z,D,this.length);let Re=this[z],Xe=1,st=0;for(;++st<D&&(Xe*=256);)Re+=this[z+st]*Xe;return Re},l.prototype.readUintBE=l.prototype.readUIntBE=function(z,D,ce){z=z>>>0,D=D>>>0,ce||we(z,D,this.length);let Re=this[z+--D],Xe=1;for(;D>0&&(Xe*=256);)Re+=this[z+--D]*Xe;return Re},l.prototype.readUint8=l.prototype.readUInt8=function(z,D){return z=z>>>0,D||we(z,1,this.length),this[z]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(z,D){return z=z>>>0,D||we(z,2,this.length),this[z]|this[z+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(z,D){return z=z>>>0,D||we(z,2,this.length),this[z]<<8|this[z+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(z,D){return z=z>>>0,D||we(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(z,D){return z=z>>>0,D||we(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},l.prototype.readBigUInt64LE=Fe(function(z){z=z>>>0,Je(z,"offset");const D=this[z],ce=this[z+7];(D===void 0||ce===void 0)&&Ut(z,this.length-8);const Re=D+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,Xe=this[++z]+this[++z]*2**8+this[++z]*2**16+ce*2**24;return BigInt(Re)+(BigInt(Xe)<<BigInt(32))}),l.prototype.readBigUInt64BE=Fe(function(z){z=z>>>0,Je(z,"offset");const D=this[z],ce=this[z+7];(D===void 0||ce===void 0)&&Ut(z,this.length-8);const Re=D*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],Xe=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+ce;return(BigInt(Re)<<BigInt(32))+BigInt(Xe)}),l.prototype.readIntLE=function(z,D,ce){z=z>>>0,D=D>>>0,ce||we(z,D,this.length);let Re=this[z],Xe=1,st=0;for(;++st<D&&(Xe*=256);)Re+=this[z+st]*Xe;return Xe*=128,Re>=Xe&&(Re-=Math.pow(2,8*D)),Re},l.prototype.readIntBE=function(z,D,ce){z=z>>>0,D=D>>>0,ce||we(z,D,this.length);let Re=D,Xe=1,st=this[z+--Re];for(;Re>0&&(Xe*=256);)st+=this[z+--Re]*Xe;return Xe*=128,st>=Xe&&(st-=Math.pow(2,8*D)),st},l.prototype.readInt8=function(z,D){return z=z>>>0,D||we(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},l.prototype.readInt16LE=function(z,D){z=z>>>0,D||we(z,2,this.length);const ce=this[z]|this[z+1]<<8;return ce&32768?ce|4294901760:ce},l.prototype.readInt16BE=function(z,D){z=z>>>0,D||we(z,2,this.length);const ce=this[z+1]|this[z]<<8;return ce&32768?ce|4294901760:ce},l.prototype.readInt32LE=function(z,D){return z=z>>>0,D||we(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},l.prototype.readInt32BE=function(z,D){return z=z>>>0,D||we(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},l.prototype.readBigInt64LE=Fe(function(z){z=z>>>0,Je(z,"offset");const D=this[z],ce=this[z+7];(D===void 0||ce===void 0)&&Ut(z,this.length-8);const Re=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(ce<<24);return(BigInt(Re)<<BigInt(32))+BigInt(D+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),l.prototype.readBigInt64BE=Fe(function(z){z=z>>>0,Je(z,"offset");const D=this[z],ce=this[z+7];(D===void 0||ce===void 0)&&Ut(z,this.length-8);const Re=(D<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(Re)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+ce)}),l.prototype.readFloatLE=function(z,D){return z=z>>>0,D||we(z,4,this.length),i.read(this,z,!0,23,4)},l.prototype.readFloatBE=function(z,D){return z=z>>>0,D||we(z,4,this.length),i.read(this,z,!1,23,4)},l.prototype.readDoubleLE=function(z,D){return z=z>>>0,D||we(z,8,this.length),i.read(this,z,!0,52,8)},l.prototype.readDoubleBE=function(z,D){return z=z>>>0,D||we(z,8,this.length),i.read(this,z,!1,52,8)};function Ue(ae,z,D,ce,Re,Xe){if(!l.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Re||z<Xe)throw new RangeError('"value" argument is out of bounds');if(D+ce>ae.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(z,D,ce,Re){if(z=+z,D=D>>>0,ce=ce>>>0,!Re){const en=Math.pow(2,8*ce)-1;Ue(this,z,D,ce,en,0)}let Xe=1,st=0;for(this[D]=z&255;++st<ce&&(Xe*=256);)this[D+st]=z/Xe&255;return D+ce},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(z,D,ce,Re){if(z=+z,D=D>>>0,ce=ce>>>0,!Re){const en=Math.pow(2,8*ce)-1;Ue(this,z,D,ce,en,0)}let Xe=ce-1,st=1;for(this[D+Xe]=z&255;--Xe>=0&&(st*=256);)this[D+Xe]=z/st&255;return D+ce},l.prototype.writeUint8=l.prototype.writeUInt8=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,1,255,0),this[D]=z&255,D+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,2,65535,0),this[D]=z&255,this[D+1]=z>>>8,D+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,2,65535,0),this[D]=z>>>8,this[D+1]=z&255,D+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,4,4294967295,0),this[D+3]=z>>>24,this[D+2]=z>>>16,this[D+1]=z>>>8,this[D]=z&255,D+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,4,4294967295,0),this[D]=z>>>24,this[D+1]=z>>>16,this[D+2]=z>>>8,this[D+3]=z&255,D+4};function Le(ae,z,D,ce,Re){Et(z,ce,Re,ae,D,7);let Xe=Number(z&BigInt(4294967295));ae[D++]=Xe,Xe=Xe>>8,ae[D++]=Xe,Xe=Xe>>8,ae[D++]=Xe,Xe=Xe>>8,ae[D++]=Xe;let st=Number(z>>BigInt(32)&BigInt(4294967295));return ae[D++]=st,st=st>>8,ae[D++]=st,st=st>>8,ae[D++]=st,st=st>>8,ae[D++]=st,D}function Me(ae,z,D,ce,Re){Et(z,ce,Re,ae,D,7);let Xe=Number(z&BigInt(4294967295));ae[D+7]=Xe,Xe=Xe>>8,ae[D+6]=Xe,Xe=Xe>>8,ae[D+5]=Xe,Xe=Xe>>8,ae[D+4]=Xe;let st=Number(z>>BigInt(32)&BigInt(4294967295));return ae[D+3]=st,st=st>>8,ae[D+2]=st,st=st>>8,ae[D+1]=st,st=st>>8,ae[D]=st,D+8}l.prototype.writeBigUInt64LE=Fe(function(z,D=0){return Le(this,z,D,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Fe(function(z,D=0){return Me(this,z,D,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(z,D,ce,Re){if(z=+z,D=D>>>0,!Re){const kt=Math.pow(2,8*ce-1);Ue(this,z,D,ce,kt-1,-kt)}let Xe=0,st=1,en=0;for(this[D]=z&255;++Xe<ce&&(st*=256);)z<0&&en===0&&this[D+Xe-1]!==0&&(en=1),this[D+Xe]=(z/st>>0)-en&255;return D+ce},l.prototype.writeIntBE=function(z,D,ce,Re){if(z=+z,D=D>>>0,!Re){const kt=Math.pow(2,8*ce-1);Ue(this,z,D,ce,kt-1,-kt)}let Xe=ce-1,st=1,en=0;for(this[D+Xe]=z&255;--Xe>=0&&(st*=256);)z<0&&en===0&&this[D+Xe+1]!==0&&(en=1),this[D+Xe]=(z/st>>0)-en&255;return D+ce},l.prototype.writeInt8=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,1,127,-128),z<0&&(z=255+z+1),this[D]=z&255,D+1},l.prototype.writeInt16LE=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,2,32767,-32768),this[D]=z&255,this[D+1]=z>>>8,D+2},l.prototype.writeInt16BE=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,2,32767,-32768),this[D]=z>>>8,this[D+1]=z&255,D+2},l.prototype.writeInt32LE=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,4,2147483647,-2147483648),this[D]=z&255,this[D+1]=z>>>8,this[D+2]=z>>>16,this[D+3]=z>>>24,D+4},l.prototype.writeInt32BE=function(z,D,ce){return z=+z,D=D>>>0,ce||Ue(this,z,D,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[D]=z>>>24,this[D+1]=z>>>16,this[D+2]=z>>>8,this[D+3]=z&255,D+4},l.prototype.writeBigInt64LE=Fe(function(z,D=0){return Le(this,z,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Fe(function(z,D=0){return Me(this,z,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(ae,z,D,ce,Re,Xe){if(D+ce>ae.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function Ge(ae,z,D,ce,Re){return z=+z,D=D>>>0,Re||He(ae,z,D,4),i.write(ae,z,D,ce,23,4),D+4}l.prototype.writeFloatLE=function(z,D,ce){return Ge(this,z,D,!0,ce)},l.prototype.writeFloatBE=function(z,D,ce){return Ge(this,z,D,!1,ce)};function rt(ae,z,D,ce,Re){return z=+z,D=D>>>0,Re||He(ae,z,D,8),i.write(ae,z,D,ce,52,8),D+8}l.prototype.writeDoubleLE=function(z,D,ce){return rt(this,z,D,!0,ce)},l.prototype.writeDoubleBE=function(z,D,ce){return rt(this,z,D,!1,ce)},l.prototype.copy=function(z,D,ce,Re){if(!l.isBuffer(z))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),!Re&&Re!==0&&(Re=this.length),D>=z.length&&(D=z.length),D||(D=0),Re>0&&Re<ce&&(Re=ce),Re===ce||z.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),z.length-D<Re-ce&&(Re=z.length-D+ce);const Xe=Re-ce;return this===z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,ce,Re):Uint8Array.prototype.set.call(z,this.subarray(ce,Re),D),Xe},l.prototype.fill=function(z,D,ce,Re){if(typeof z=="string"){if(typeof D=="string"?(Re=D,D=0,ce=this.length):typeof ce=="string"&&(Re=ce,ce=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!l.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(z.length===1){const st=z.charCodeAt(0);(Re==="utf8"&&st<128||Re==="latin1")&&(z=st)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(D<0||this.length<D||this.length<ce)throw new RangeError("Out of range index");if(ce<=D)return this;D=D>>>0,ce=ce===void 0?this.length:ce>>>0,z||(z=0);let Xe;if(typeof z=="number")for(Xe=D;Xe<ce;++Xe)this[Xe]=z;else{const st=l.isBuffer(z)?z:l.from(z,Re),en=st.length;if(en===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(Xe=0;Xe<ce-D;++Xe)this[Xe+D]=st[Xe%en]}return this};const ct={};function vt(ae,z,D){ct[ae]=class extends D{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(ae,z){return`The "${ae}" argument must be of type number. Received type ${typeof z}`},TypeError),vt("ERR_OUT_OF_RANGE",function(ae,z,D){let ce=`The value of "${ae}" is out of range.`,Re=D;return Number.isInteger(D)&&Math.abs(D)>2**32?Re=Pt(String(D)):typeof D=="bigint"&&(Re=String(D),(D>BigInt(2)**BigInt(32)||D<-(BigInt(2)**BigInt(32)))&&(Re=Pt(Re)),Re+="n"),ce+=` It must be ${z}. Received ${Re}`,ce},RangeError);function Pt(ae){let z="",D=ae.length;const ce=ae[0]==="-"?1:0;for(;D>=ce+4;D-=3)z=`_${ae.slice(D-3,D)}${z}`;return`${ae.slice(0,D)}${z}`}function ht(ae,z,D){Je(z,"offset"),(ae[z]===void 0||ae[z+D]===void 0)&&Ut(z,ae.length-(D+1))}function Et(ae,z,D,ce,Re,Xe){if(ae>D||ae<z){const st=typeof z=="bigint"?"n":"";let en;throw Xe>3?z===0||z===BigInt(0)?en=`>= 0${st} and < 2${st} ** ${(Xe+1)*8}${st}`:en=`>= -(2${st} ** ${(Xe+1)*8-1}${st}) and < 2 ** ${(Xe+1)*8-1}${st}`:en=`>= ${z}${st} and <= ${D}${st}`,new ct.ERR_OUT_OF_RANGE("value",en,ae)}ht(ce,Re,Xe)}function Je(ae,z){if(typeof ae!="number")throw new ct.ERR_INVALID_ARG_TYPE(z,"number",ae)}function Ut(ae,z,D){throw Math.floor(ae)!==ae?(Je(ae,D),new ct.ERR_OUT_OF_RANGE(D||"offset","an integer",ae)):z<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE(D||"offset",`>= ${D?1:0} and <= ${z}`,ae)}const fn=/[^+/0-9A-Za-z-_]/g;function qt(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(fn,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function Vt(ae,z){z=z||1/0;let D;const ce=ae.length;let Re=null;const Xe=[];for(let st=0;st<ce;++st){if(D=ae.charCodeAt(st),D>55295&&D<57344){if(!Re){if(D>56319){(z-=3)>-1&&Xe.push(239,191,189);continue}else if(st+1===ce){(z-=3)>-1&&Xe.push(239,191,189);continue}Re=D;continue}if(D<56320){(z-=3)>-1&&Xe.push(239,191,189),Re=D;continue}D=(Re-55296<<10|D-56320)+65536}else Re&&(z-=3)>-1&&Xe.push(239,191,189);if(Re=null,D<128){if((z-=1)<0)break;Xe.push(D)}else if(D<2048){if((z-=2)<0)break;Xe.push(D>>6|192,D&63|128)}else if(D<65536){if((z-=3)<0)break;Xe.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((z-=4)<0)break;Xe.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return Xe}function un(ae){const z=[];for(let D=0;D<ae.length;++D)z.push(ae.charCodeAt(D)&255);return z}function gn(ae,z){let D,ce,Re;const Xe=[];for(let st=0;st<ae.length&&!((z-=2)<0);++st)D=ae.charCodeAt(st),ce=D>>8,Re=D%256,Xe.push(Re),Xe.push(ce);return Xe}function Se(ae){return t.toByteArray(qt(ae))}function j(ae,z,D,ce){let Re;for(Re=0;Re<ce&&!(Re+D>=z.length||Re>=ae.length);++Re)z[Re+D]=ae[Re];return Re}function O(ae,z){return ae instanceof z||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===z.name}function _e(ae){return ae!==ae}const Ze=function(){const ae="0123456789abcdef",z=new Array(256);for(let D=0;D<16;++D){const ce=D*16;for(let Re=0;Re<16;++Re)z[ce+Re]=ae[D]+ae[Re]}return z}();function Fe(ae){return typeof BigInt>"u"?ut:ae}function ut(){throw new Error("BigInt not supported")}})(iI);window.Buffer=iI.Buffer;S3.render(dt.jsx(GE.StrictMode,{children:dt.jsx(zF,{})}),document.getElementById("root"));

function Gw(u,c){for(var p=0;p<c.length;p++){const v=c[p];if(typeof v!="string"&&!Array.isArray(v)){for(const x in v)if(x!=="default"&&!(x in u)){const T=Object.getOwnPropertyDescriptor(v,x);T&&Object.defineProperty(u,x,T.get?T:{enumerable:!0,get:()=>v[x]})}}}return Object.freeze(Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))v(x);new MutationObserver(x=>{for(const T of x)if(T.type==="childList")for(const w of T.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&v(w)}).observe(document,{childList:!0,subtree:!0});function p(x){const T={};return x.integrity&&(T.integrity=x.integrity),x.referrerPolicy&&(T.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?T.credentials="include":x.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function v(x){if(x.ep)return;x.ep=!0;const T=p(x);fetch(x.href,T)}})();var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bf(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function u0(u){if(u.__esModule)return u;var c=u.default;if(typeof c=="function"){var p=function v(){return this instanceof v?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};p.prototype=c.prototype}else p={};return Object.defineProperty(p,"__esModule",{value:!0}),Object.keys(u).forEach(function(v){var x=Object.getOwnPropertyDescriptor(u,v);Object.defineProperty(p,v,x.get?x:{enumerable:!0,get:function(){return u[v]}})}),p}var lg={exports:{}},df={},ug={exports:{}},lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function Hw(){if(hv)return lr;hv=1;var u=Symbol.for("react.element"),c=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),w=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),C=Symbol.iterator;function k(he){return he===null||typeof he!="object"?null:(he=C&&he[C]||he["@@iterator"],typeof he=="function"?he:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,Q={};function ce(he,Fe,Oe){this.props=he,this.context=Fe,this.refs=Q,this.updater=Oe||V}ce.prototype.isReactComponent={},ce.prototype.setState=function(he,Fe){if(typeof he!="object"&&typeof he!="function"&&he!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,he,Fe,"setState")},ce.prototype.forceUpdate=function(he){this.updater.enqueueForceUpdate(this,he,"forceUpdate")};function Te(){}Te.prototype=ce.prototype;function xe(he,Fe,Oe){this.props=he,this.context=Fe,this.refs=Q,this.updater=Oe||V}var ve=xe.prototype=new Te;ve.constructor=xe,N(ve,ce.prototype),ve.isPureReactComponent=!0;var Me=Array.isArray,ne=Object.prototype.hasOwnProperty,ue={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function $(he,Fe,Oe){var De,Ke={},tt=null,pt=null;if(Fe!=null)for(De in Fe.ref!==void 0&&(pt=Fe.ref),Fe.key!==void 0&&(tt=""+Fe.key),Fe)ne.call(Fe,De)&&!M.hasOwnProperty(De)&&(Ke[De]=Fe[De]);var _t=arguments.length-2;if(_t===1)Ke.children=Oe;else if(1<_t){for(var Tt=Array(_t),Lt=0;Lt<_t;Lt++)Tt[Lt]=arguments[Lt+2];Ke.children=Tt}if(he&&he.defaultProps)for(De in _t=he.defaultProps,_t)Ke[De]===void 0&&(Ke[De]=_t[De]);return{$$typeof:u,type:he,key:tt,ref:pt,props:Ke,_owner:ue.current}}function U(he,Fe){return{$$typeof:u,type:he.type,key:Fe,ref:he.ref,props:he.props,_owner:he._owner}}function de(he){return typeof he=="object"&&he!==null&&he.$$typeof===u}function K(he){var Fe={"=":"=0",":":"=2"};return"$"+he.replace(/[=:]/g,function(Oe){return Fe[Oe]})}var j=/\/+/g;function W(he,Fe){return typeof he=="object"&&he!==null&&he.key!=null?K(""+he.key):Fe.toString(36)}function J(he,Fe,Oe,De,Ke){var tt=typeof he;(tt==="undefined"||tt==="boolean")&&(he=null);var pt=!1;if(he===null)pt=!0;else switch(tt){case"string":case"number":pt=!0;break;case"object":switch(he.$$typeof){case u:case c:pt=!0}}if(pt)return pt=he,Ke=Ke(pt),he=De===""?"."+W(pt,0):De,Me(Ke)?(Oe="",he!=null&&(Oe=he.replace(j,"$&/")+"/"),J(Ke,Fe,Oe,"",function(Lt){return Lt})):Ke!=null&&(de(Ke)&&(Ke=U(Ke,Oe+(!Ke.key||pt&&pt.key===Ke.key?"":(""+Ke.key).replace(j,"$&/")+"/")+he)),Fe.push(Ke)),1;if(pt=0,De=De===""?".":De+":",Me(he))for(var _t=0;_t<he.length;_t++){tt=he[_t];var Tt=De+W(tt,_t);pt+=J(tt,Fe,Oe,Tt,Ke)}else if(Tt=k(he),typeof Tt=="function")for(he=Tt.call(he),_t=0;!(tt=he.next()).done;)tt=tt.value,Tt=De+W(tt,_t++),pt+=J(tt,Fe,Oe,Tt,Ke);else if(tt==="object")throw Fe=String(he),Error("Objects are not valid as a React child (found: "+(Fe==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":Fe)+"). If you meant to render a collection of children, use an array instead.");return pt}function re(he,Fe,Oe){if(he==null)return he;var De=[],Ke=0;return J(he,De,"","",function(tt){return Fe.call(Oe,tt,Ke++)}),De}function le(he){if(he._status===-1){var Fe=he._result;Fe=Fe(),Fe.then(function(Oe){(he._status===0||he._status===-1)&&(he._status=1,he._result=Oe)},function(Oe){(he._status===0||he._status===-1)&&(he._status=2,he._result=Oe)}),he._status===-1&&(he._status=0,he._result=Fe)}if(he._status===1)return he._result.default;throw he._result}var te={current:null},oe={transition:null},_e={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ue};function be(){throw Error("act(...) is not supported in production builds of React.")}return lr.Children={map:re,forEach:function(he,Fe,Oe){re(he,function(){Fe.apply(this,arguments)},Oe)},count:function(he){var Fe=0;return re(he,function(){Fe++}),Fe},toArray:function(he){return re(he,function(Fe){return Fe})||[]},only:function(he){if(!de(he))throw Error("React.Children.only expected to receive a single React element child.");return he}},lr.Component=ce,lr.Fragment=p,lr.Profiler=x,lr.PureComponent=xe,lr.StrictMode=v,lr.Suspense=L,lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,lr.act=be,lr.cloneElement=function(he,Fe,Oe){if(he==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+he+".");var De=N({},he.props),Ke=he.key,tt=he.ref,pt=he._owner;if(Fe!=null){if(Fe.ref!==void 0&&(tt=Fe.ref,pt=ue.current),Fe.key!==void 0&&(Ke=""+Fe.key),he.type&&he.type.defaultProps)var _t=he.type.defaultProps;for(Tt in Fe)ne.call(Fe,Tt)&&!M.hasOwnProperty(Tt)&&(De[Tt]=Fe[Tt]===void 0&&_t!==void 0?_t[Tt]:Fe[Tt])}var Tt=arguments.length-2;if(Tt===1)De.children=Oe;else if(1<Tt){_t=Array(Tt);for(var Lt=0;Lt<Tt;Lt++)_t[Lt]=arguments[Lt+2];De.children=_t}return{$$typeof:u,type:he.type,key:Ke,ref:tt,props:De,_owner:pt}},lr.createContext=function(he){return he={$$typeof:w,_currentValue:he,_currentValue2:he,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},he.Provider={$$typeof:T,_context:he},he.Consumer=he},lr.createElement=$,lr.createFactory=function(he){var Fe=$.bind(null,he);return Fe.type=he,Fe},lr.createRef=function(){return{current:null}},lr.forwardRef=function(he){return{$$typeof:a,render:he}},lr.isValidElement=de,lr.lazy=function(he){return{$$typeof:D,_payload:{_status:-1,_result:he},_init:le}},lr.memo=function(he,Fe){return{$$typeof:R,type:he,compare:Fe===void 0?null:Fe}},lr.startTransition=function(he){var Fe=oe.transition;oe.transition={};try{he()}finally{oe.transition=Fe}},lr.unstable_act=be,lr.useCallback=function(he,Fe){return te.current.useCallback(he,Fe)},lr.useContext=function(he){return te.current.useContext(he)},lr.useDebugValue=function(){},lr.useDeferredValue=function(he){return te.current.useDeferredValue(he)},lr.useEffect=function(he,Fe){return te.current.useEffect(he,Fe)},lr.useId=function(){return te.current.useId()},lr.useImperativeHandle=function(he,Fe,Oe){return te.current.useImperativeHandle(he,Fe,Oe)},lr.useInsertionEffect=function(he,Fe){return te.current.useInsertionEffect(he,Fe)},lr.useLayoutEffect=function(he,Fe){return te.current.useLayoutEffect(he,Fe)},lr.useMemo=function(he,Fe){return te.current.useMemo(he,Fe)},lr.useReducer=function(he,Fe,Oe){return te.current.useReducer(he,Fe,Oe)},lr.useRef=function(he){return te.current.useRef(he)},lr.useState=function(he){return te.current.useState(he)},lr.useSyncExternalStore=function(he,Fe,Oe){return te.current.useSyncExternalStore(he,Fe,Oe)},lr.useTransition=function(){return te.current.useTransition()},lr.version="18.3.1",lr}var dv;function c0(){return dv||(dv=1,ug.exports=Hw()),ug.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function Zw(){if(fv)return df;fv=1;var u=c0(),c=Symbol.for("react.element"),p=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,x=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T={key:!0,ref:!0,__self:!0,__source:!0};function w(a,L,R){var D,C={},k=null,V=null;R!==void 0&&(k=""+R),L.key!==void 0&&(k=""+L.key),L.ref!==void 0&&(V=L.ref);for(D in L)v.call(L,D)&&!T.hasOwnProperty(D)&&(C[D]=L[D]);if(a&&a.defaultProps)for(D in L=a.defaultProps,L)C[D]===void 0&&(C[D]=L[D]);return{$$typeof:c,type:a,key:k,ref:V,props:C,_owner:x.current}}return df.Fragment=p,df.jsx=w,df.jsxs=w,df}var pv;function Ww(){return pv||(pv=1,lg.exports=Zw()),lg.exports}var Mt=Ww(),zt=c0();const h0=Bf(zt);var cg={exports:{}},Js={},hg={exports:{}},dg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function qw(){return mv||(mv=1,function(u){function c(oe,_e){var be=oe.length;oe.push(_e);e:for(;0<be;){var he=be-1>>>1,Fe=oe[he];if(0<x(Fe,_e))oe[he]=_e,oe[be]=Fe,be=he;else break e}}function p(oe){return oe.length===0?null:oe[0]}function v(oe){if(oe.length===0)return null;var _e=oe[0],be=oe.pop();if(be!==_e){oe[0]=be;e:for(var he=0,Fe=oe.length,Oe=Fe>>>1;he<Oe;){var De=2*(he+1)-1,Ke=oe[De],tt=De+1,pt=oe[tt];if(0>x(Ke,be))tt<Fe&&0>x(pt,Ke)?(oe[he]=pt,oe[tt]=be,he=tt):(oe[he]=Ke,oe[De]=be,he=De);else if(tt<Fe&&0>x(pt,be))oe[he]=pt,oe[tt]=be,he=tt;else break e}}return _e}function x(oe,_e){var be=oe.sortIndex-_e.sortIndex;return be!==0?be:oe.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var T=performance;u.unstable_now=function(){return T.now()}}else{var w=Date,a=w.now();u.unstable_now=function(){return w.now()-a}}var L=[],R=[],D=1,C=null,k=3,V=!1,N=!1,Q=!1,ce=typeof setTimeout=="function"?setTimeout:null,Te=typeof clearTimeout=="function"?clearTimeout:null,xe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(oe){for(var _e=p(R);_e!==null;){if(_e.callback===null)v(R);else if(_e.startTime<=oe)v(R),_e.sortIndex=_e.expirationTime,c(L,_e);else break;_e=p(R)}}function Me(oe){if(Q=!1,ve(oe),!N)if(p(L)!==null)N=!0,le(ne);else{var _e=p(R);_e!==null&&te(Me,_e.startTime-oe)}}function ne(oe,_e){N=!1,Q&&(Q=!1,Te($),$=-1),V=!0;var be=k;try{for(ve(_e),C=p(L);C!==null&&(!(C.expirationTime>_e)||oe&&!K());){var he=C.callback;if(typeof he=="function"){C.callback=null,k=C.priorityLevel;var Fe=he(C.expirationTime<=_e);_e=u.unstable_now(),typeof Fe=="function"?C.callback=Fe:C===p(L)&&v(L),ve(_e)}else v(L);C=p(L)}if(C!==null)var Oe=!0;else{var De=p(R);De!==null&&te(Me,De.startTime-_e),Oe=!1}return Oe}finally{C=null,k=be,V=!1}}var ue=!1,M=null,$=-1,U=5,de=-1;function K(){return!(u.unstable_now()-de<U)}function j(){if(M!==null){var oe=u.unstable_now();de=oe;var _e=!0;try{_e=M(!0,oe)}finally{_e?W():(ue=!1,M=null)}}else ue=!1}var W;if(typeof xe=="function")W=function(){xe(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,re=J.port2;J.port1.onmessage=j,W=function(){re.postMessage(null)}}else W=function(){ce(j,0)};function le(oe){M=oe,ue||(ue=!0,W())}function te(oe,_e){$=ce(function(){oe(u.unstable_now())},_e)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(oe){oe.callback=null},u.unstable_continueExecution=function(){N||V||(N=!0,le(ne))},u.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<oe?Math.floor(1e3/oe):5},u.unstable_getCurrentPriorityLevel=function(){return k},u.unstable_getFirstCallbackNode=function(){return p(L)},u.unstable_next=function(oe){switch(k){case 1:case 2:case 3:var _e=3;break;default:_e=k}var be=k;k=_e;try{return oe()}finally{k=be}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(oe,_e){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var be=k;k=oe;try{return _e()}finally{k=be}},u.unstable_scheduleCallback=function(oe,_e,be){var he=u.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?he+be:he):be=he,oe){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=be+Fe,oe={id:D++,callback:_e,priorityLevel:oe,startTime:be,expirationTime:Fe,sortIndex:-1},be>he?(oe.sortIndex=be,c(R,oe),p(L)===null&&oe===p(R)&&(Q?(Te($),$=-1):Q=!0,te(Me,be-he))):(oe.sortIndex=Fe,c(L,oe),N||V||(N=!0,le(ne))),oe},u.unstable_shouldYield=K,u.unstable_wrapCallback=function(oe){var _e=k;return function(){var be=k;k=_e;try{return oe.apply(this,arguments)}finally{k=be}}}}(dg)),dg}var gv;function Xw(){return gv||(gv=1,hg.exports=qw()),hg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function Kw(){if(yv)return Js;yv=1;var u=c0(),c=Xw();function p(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,m=1;m<arguments.length;m++)s+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,x={};function T(i,s){w(i,s),w(i+"Capture",s)}function w(i,s){for(x[i]=s,i=0;i<s.length;i++)v.add(s[i])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L=Object.prototype.hasOwnProperty,R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D={},C={};function k(i){return L.call(C,i)?!0:L.call(D,i)?!1:R.test(i)?C[i]=!0:(D[i]=!0,!1)}function V(i,s,m,S){if(m!==null&&m.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return S?!1:m!==null?!m.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,s,m,S){if(s===null||typeof s>"u"||V(i,s,m,S))return!0;if(S)return!1;if(m!==null)switch(m.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Q(i,s,m,S,F,Z,Se){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=S,this.attributeNamespace=F,this.mustUseProperty=m,this.propertyName=i,this.type=s,this.sanitizeURL=Z,this.removeEmptyString=Se}var ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){ce[i]=new Q(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];ce[s]=new Q(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){ce[i]=new Q(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){ce[i]=new Q(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){ce[i]=new Q(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){ce[i]=new Q(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){ce[i]=new Q(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){ce[i]=new Q(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){ce[i]=new Q(i,5,!1,i.toLowerCase(),null,!1,!1)});var Te=/[\-:]([a-z])/g;function xe(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(Te,xe);ce[s]=new Q(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(Te,xe);ce[s]=new Q(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(Te,xe);ce[s]=new Q(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){ce[i]=new Q(i,1,!1,i.toLowerCase(),null,!1,!1)}),ce.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){ce[i]=new Q(i,1,!1,i.toLowerCase(),null,!0,!0)});function ve(i,s,m,S){var F=ce.hasOwnProperty(s)?ce[s]:null;(F!==null?F.type!==0:S||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,m,F,S)&&(m=null),S||F===null?k(s)&&(m===null?i.removeAttribute(s):i.setAttribute(s,""+m)):F.mustUseProperty?i[F.propertyName]=m===null?F.type===3?!1:"":m:(s=F.attributeName,S=F.attributeNamespace,m===null?i.removeAttribute(s):(F=F.type,m=F===3||F===4&&m===!0?"":""+m,S?i.setAttributeNS(S,s,m):i.setAttribute(s,m))))}var Me=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),ue=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),K=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),oe=Symbol.iterator;function _e(i){return i===null||typeof i!="object"?null:(i=oe&&i[oe]||i["@@iterator"],typeof i=="function"?i:null)}var be=Object.assign,he;function Fe(i){if(he===void 0)try{throw Error()}catch(m){var s=m.stack.trim().match(/\n( *(at )?)/);he=s&&s[1]||""}return`
`+he+i}var Oe=!1;function De(i,s){if(!i||Oe)return"";Oe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(bt){var S=bt}Reflect.construct(i,[],s)}else{try{s.call()}catch(bt){S=bt}i.call(s.prototype)}else{try{throw Error()}catch(bt){S=bt}i()}}catch(bt){if(bt&&S&&typeof bt.stack=="string"){for(var F=bt.stack.split(`
`),Z=S.stack.split(`
`),Se=F.length-1,Xe=Z.length-1;1<=Se&&0<=Xe&&F[Se]!==Z[Xe];)Xe--;for(;1<=Se&&0<=Xe;Se--,Xe--)if(F[Se]!==Z[Xe]){if(Se!==1||Xe!==1)do if(Se--,Xe--,0>Xe||F[Se]!==Z[Xe]){var ot=`
`+F[Se].replace(" at new "," at ");return i.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",i.displayName)),ot}while(1<=Se&&0<=Xe);break}}}finally{Oe=!1,Error.prepareStackTrace=m}return(i=i?i.displayName||i.name:"")?Fe(i):""}function Ke(i){switch(i.tag){case 5:return Fe(i.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return i=De(i.type,!1),i;case 11:return i=De(i.type.render,!1),i;case 1:return i=De(i.type,!0),i;default:return""}}function tt(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case ue:return"Portal";case U:return"Profiler";case $:return"StrictMode";case W:return"Suspense";case J:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case K:return(i.displayName||"Context")+".Consumer";case de:return(i._context.displayName||"Context")+".Provider";case j:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case re:return s=i.displayName||null,s!==null?s:tt(i.type)||"Memo";case le:s=i._payload,i=i._init;try{return tt(i(s))}catch{}}return null}function pt(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tt(s);case 8:return s===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function _t(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Tt(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Lt(i){var s=Tt(i)?"checked":"value",m=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),S=""+i[s];if(!i.hasOwnProperty(s)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var F=m.get,Z=m.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return F.call(this)},set:function(Se){S=""+Se,Z.call(this,Se)}}),Object.defineProperty(i,s,{enumerable:m.enumerable}),{getValue:function(){return S},setValue:function(Se){S=""+Se},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function It(i){i._valueTracker||(i._valueTracker=Lt(i))}function kt(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var m=s.getValue(),S="";return i&&(S=Tt(i)?i.checked?"true":"false":i.value),i=S,i!==m?(s.setValue(i),!0):!1}function Jt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function cn(i,s){var m=s.checked;return be({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??i._wrapperState.initialChecked})}function Tn(i,s){var m=s.defaultValue==null?"":s.defaultValue,S=s.checked!=null?s.checked:s.defaultChecked;m=_t(s.value!=null?s.value:m),i._wrapperState={initialChecked:S,initialValue:m,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function at(i,s){s=s.checked,s!=null&&ve(i,"checked",s,!1)}function kn(i,s){at(i,s);var m=_t(s.value),S=s.type;if(m!=null)S==="number"?(m===0&&i.value===""||i.value!=m)&&(i.value=""+m):i.value!==""+m&&(i.value=""+m);else if(S==="submit"||S==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?en(i,s.type,m):s.hasOwnProperty("defaultValue")&&en(i,s.type,_t(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function hn(i,s,m){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var S=s.type;if(!(S!=="submit"&&S!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,m||s===i.value||(i.value=s),i.defaultValue=s}m=i.name,m!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,m!==""&&(i.name=m)}function en(i,s,m){(s!=="number"||Jt(i.ownerDocument)!==i)&&(m==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+m&&(i.defaultValue=""+m))}var ze=Array.isArray;function G(i,s,m,S){if(i=i.options,s){s={};for(var F=0;F<m.length;F++)s["$"+m[F]]=!0;for(m=0;m<i.length;m++)F=s.hasOwnProperty("$"+i[m].value),i[m].selected!==F&&(i[m].selected=F),F&&S&&(i[m].defaultSelected=!0)}else{for(m=""+_t(m),s=null,F=0;F<i.length;F++){if(i[F].value===m){i[F].selected=!0,S&&(i[F].defaultSelected=!0);return}s!==null||i[F].disabled||(s=i[F])}s!==null&&(s.selected=!0)}}function H(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return be({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ce(i,s){var m=s.value;if(m==null){if(m=s.children,s=s.defaultValue,m!=null){if(s!=null)throw Error(p(92));if(ze(m)){if(1<m.length)throw Error(p(93));m=m[0]}s=m}s==null&&(s=""),m=s}i._wrapperState={initialValue:_t(m)}}function rt(i,s){var m=_t(s.value),S=_t(s.defaultValue);m!=null&&(m=""+m,m!==i.value&&(i.value=m),s.defaultValue==null&&i.defaultValue!==m&&(i.defaultValue=m)),S!=null&&(i.defaultValue=""+S)}function ct(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function Et(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ye(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?Et(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var z,q=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,m,S,F){MSApp.execUnsafeLocalFunction(function(){return i(s,m,S,F)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(z=z||document.createElement("div"),z.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=z.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function Re(i,s){if(s){var m=i.firstChild;if(m&&m===i.lastChild&&m.nodeType===3){m.nodeValue=s;return}}i.textContent=s}var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function(i){ft.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),Je[s]=Je[i]})});function Qe(i,s,m){return s==null||typeof s=="boolean"||s===""?"":m||typeof s!="number"||s===0||Je.hasOwnProperty(i)&&Je[i]?(""+s).trim():s+"px"}function Ot(i,s){i=i.style;for(var m in s)if(s.hasOwnProperty(m)){var S=m.indexOf("--")===0,F=Qe(m,s[m],S);m==="float"&&(m="cssFloat"),S?i.setProperty(m,F):i[m]=F}}var Bt=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zn(i,s){if(s){if(Bt[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function Zn(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=null;function Fr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Kr=null,Yr=null,Cr=null;function Ue(i){if(i=ku(i)){if(typeof Kr!="function")throw Error(p(280));var s=i.stateNode;s&&(s=zu(s),Kr(i.stateNode,i.type,s))}}function me(i){Yr?Cr?Cr.push(i):Cr=[i]:Yr=i}function pe(){if(Yr){var i=Yr,s=Cr;if(Cr=Yr=null,Ue(i),s)for(i=0;i<s.length;i++)Ue(s[i])}}function Pe(i,s){return i(s)}function Le(){}var Be=!1;function He(i,s,m){if(Be)return i(s,m);Be=!0;try{return Pe(i,s,m)}finally{Be=!1,(Yr!==null||Cr!==null)&&(Le(),pe())}}function nt(i,s){var m=i.stateNode;if(m===null)return null;var S=zu(m);if(S===null)return null;m=S[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(i=i.type,S=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!S;break e;default:i=!1}if(i)return null;if(m&&typeof m!="function")throw Error(p(231,s,typeof m));return m}var Ze=!1;if(a)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{Ze=!1}function Ct(i,s,m,S,F,Z,Se,Xe,ot){var bt=Array.prototype.slice.call(arguments,3);try{s.apply(m,bt)}catch(jt){this.onError(jt)}}var gt=!1,Vt=null,pn=!1,vn=null,Jn={onError:function(i){gt=!0,Vt=i}};function Fn(i,s,m,S,F,Z,Se,Xe,ot){gt=!1,Vt=null,Ct.apply(Jn,arguments)}function Qn(i,s,m,S,F,Z,Se,Xe,ot){if(Fn.apply(this,arguments),gt){if(gt){var bt=Vt;gt=!1,Vt=null}else throw Error(p(198));pn||(pn=!0,vn=bt)}}function Un(i){var s=i,m=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,s.flags&4098&&(m=s.return),i=s.return;while(i)}return s.tag===3?m:null}function Or(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function _r(i){if(Un(i)!==i)throw Error(p(188))}function Wn(i){var s=i.alternate;if(!s){if(s=Un(i),s===null)throw Error(p(188));return s!==i?null:i}for(var m=i,S=s;;){var F=m.return;if(F===null)break;var Z=F.alternate;if(Z===null){if(S=F.return,S!==null){m=S;continue}break}if(F.child===Z.child){for(Z=F.child;Z;){if(Z===m)return _r(F),i;if(Z===S)return _r(F),s;Z=Z.sibling}throw Error(p(188))}if(m.return!==S.return)m=F,S=Z;else{for(var Se=!1,Xe=F.child;Xe;){if(Xe===m){Se=!0,m=F,S=Z;break}if(Xe===S){Se=!0,S=F,m=Z;break}Xe=Xe.sibling}if(!Se){for(Xe=Z.child;Xe;){if(Xe===m){Se=!0,m=Z,S=F;break}if(Xe===S){Se=!0,S=Z,m=F;break}Xe=Xe.sibling}if(!Se)throw Error(p(189))}}if(m.alternate!==S)throw Error(p(190))}if(m.tag!==3)throw Error(p(188));return m.stateNode.current===m?i:s}function ur(i){return i=Wn(i),i!==null?br(i):null}function br(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=br(i);if(s!==null)return s;i=i.sibling}return null}var ii=c.unstable_scheduleCallback,ci=c.unstable_cancelCallback,zi=c.unstable_shouldYield,as=c.unstable_requestPaint,Pn=c.unstable_now,Sl=c.unstable_getCurrentPriorityLevel,Xn=c.unstable_ImmediatePriority,Jr=c.unstable_UserBlockingPriority,Si=c.unstable_NormalPriority,Rc=c.unstable_LowPriority,qi=c.unstable_IdlePriority,Ei=null,Ri=null;function Fi(i){if(Ri&&typeof Ri.onCommitFiberRoot=="function")try{Ri.onCommitFiberRoot(Ei,i,void 0,(i.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:Gr,Qa=Math.log,Eo=Math.LN2;function Gr(i){return i>>>=0,i===0?32:31-(Qa(i)/Eo|0)|0}var ea=64,Dr=4194304;function ta(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ui(i,s){var m=i.pendingLanes;if(m===0)return 0;var S=0,F=i.suspendedLanes,Z=i.pingedLanes,Se=m&268435455;if(Se!==0){var Xe=Se&~F;Xe!==0?S=ta(Xe):(Z&=Se,Z!==0&&(S=ta(Z)))}else Se=m&~F,Se!==0?S=ta(Se):Z!==0&&(S=ta(Z));if(S===0)return 0;if(s!==0&&s!==S&&!(s&F)&&(F=S&-S,Z=s&-s,F>=Z||F===16&&(Z&4194240)!==0))return s;if(S&4&&(S|=m&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=S;0<s;)m=31-fr(s),F=1<<m,S|=i[m],s&=~F;return S}function Fc(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function El(i,s){for(var m=i.suspendedLanes,S=i.pingedLanes,F=i.expirationTimes,Z=i.pendingLanes;0<Z;){var Se=31-fr(Z),Xe=1<<Se,ot=F[Se];ot===-1?(!(Xe&m)||Xe&S)&&(F[Se]=Fc(Xe,s)):ot<=s&&(i.expiredLanes|=Xe),Z&=~Xe}}function ls(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function io(){var i=ea;return ea<<=1,!(ea&4194240)&&(ea=64),i}function nr(i){for(var s=[],m=0;31>m;m++)s.push(i);return s}function na(i,s,m){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-fr(s),i[s]=m}function Xi(i,s){var m=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var S=i.eventTimes;for(i=i.expirationTimes;0<m;){var F=31-fr(m),Z=1<<F;s[F]=0,S[F]=-1,i[F]=-1,m&=~Z}}function Ls(i,s){var m=i.entangledLanes|=s;for(i=i.entanglements;m;){var S=31-fr(m),F=1<<S;F&s|i[S]&s&&(i[S]|=s),m&=~F}}var cr=0;function el(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var za,Ra,Ds,tl,vu,ra=!1,Tl=[],oi=null,oo=null,Hr=null,hi=new Map,Bs=new Map,so=[],Il="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _u(i,s){switch(i){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bs.delete(s.pointerId)}}function Uo(i,s,m,S,F,Z){return i===null||i.nativeEvent!==Z?(i={blockedOn:s,domEventName:m,eventSystemFlags:S,nativeEvent:Z,targetContainers:[F]},s!==null&&(s=ku(s),s!==null&&Ra(s)),i):(i.eventSystemFlags|=S,s=i.targetContainers,F!==null&&s.indexOf(F)===-1&&s.push(F),i)}function xu(i,s,m,S,F){switch(s){case"focusin":return oi=Uo(oi,i,s,m,S,F),!0;case"dragenter":return oo=Uo(oo,i,s,m,S,F),!0;case"mouseover":return Hr=Uo(Hr,i,s,m,S,F),!0;case"pointerover":var Z=F.pointerId;return hi.set(Z,Uo(hi.get(Z)||null,i,s,m,S,F)),!0;case"gotpointercapture":return Z=F.pointerId,Bs.set(Z,Uo(Bs.get(Z)||null,i,s,m,S,F)),!0}return!1}function wu(i){var s=ma(i.target);if(s!==null){var m=Un(s);if(m!==null){if(s=m.tag,s===13){if(s=Or(m),s!==null){i.blockedOn=s,vu(i.priority,function(){Ds(m)});return}}else if(s===3&&m.stateNode.current.memoizedState.isDehydrated){i.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nl(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var m=rl(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(m===null){m=i.nativeEvent;var S=new m.constructor(m.type,m);Xt=S,m.target.dispatchEvent(S),Xt=null}else return s=ku(m),s!==null&&Ra(s),i.blockedOn=m,!1;s.shift()}return!0}function ec(i,s,m){nl(i)&&m.delete(s)}function Oc(){ra=!1,oi!==null&&nl(oi)&&(oi=null),oo!==null&&nl(oo)&&(oo=null),Hr!==null&&nl(Hr)&&(Hr=null),hi.forEach(ec),Bs.forEach(ec)}function ia(i,s){i.blockedOn===s&&(i.blockedOn=null,ra||(ra=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Oc)))}function us(i){function s(F){return ia(F,i)}if(0<Tl.length){ia(Tl[0],i);for(var m=1;m<Tl.length;m++){var S=Tl[m];S.blockedOn===i&&(S.blockedOn=null)}}for(oi!==null&&ia(oi,i),oo!==null&&ia(oo,i),Hr!==null&&ia(Hr,i),hi.forEach(s),Bs.forEach(s),m=0;m<so.length;m++)S=so[m],S.blockedOn===i&&(S.blockedOn=null);for(;0<so.length&&(m=so[0],m.blockedOn===null);)wu(m),m.blockedOn===null&&so.shift()}var cs=Me.ReactCurrentBatchConfig,oa=!0;function bu(i,s,m,S){var F=cr,Z=cs.transition;cs.transition=null;try{cr=1,ao(i,s,m,S)}finally{cr=F,cs.transition=Z}}function Cl(i,s,m,S){var F=cr,Z=cs.transition;cs.transition=null;try{cr=4,ao(i,s,m,S)}finally{cr=F,cs.transition=Z}}function ao(i,s,m,S){if(oa){var F=rl(i,s,m,S);if(F===null)Mu(i,s,S,Pl,m),_u(i,S);else if(xu(F,i,s,m,S))S.stopPropagation();else if(_u(i,S),s&4&&-1<Il.indexOf(i)){for(;F!==null;){var Z=ku(F);if(Z!==null&&za(Z),Z=rl(i,s,m,S),Z===null&&Mu(i,s,S,Pl,m),Z===F)break;F=Z}F!==null&&S.stopPropagation()}else Mu(i,s,S,null,m)}}var Pl=null;function rl(i,s,m,S){if(Pl=null,i=Fr(S),i=ma(i),i!==null)if(s=Un(i),s===null)i=null;else if(m=s.tag,m===13){if(i=Or(s),i!==null)return i;i=null}else if(m===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return Pl=i,null}function Ns(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sl()){case Xn:return 1;case Jr:return 4;case Si:case Rc:return 16;case qi:return 536870912;default:return 16}default:return 16}}var Ti=null,rr=null,hs=null;function tc(){if(hs)return hs;var i,s=rr,m=s.length,S,F="value"in Ti?Ti.value:Ti.textContent,Z=F.length;for(i=0;i<m&&s[i]===F[i];i++);var Se=m-i;for(S=1;S<=Se&&s[m-S]===F[Z-S];S++);return hs=F.slice(i,1<S?1-S:void 0)}function ds(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Al(){return!0}function Su(){return!1}function Ki(i){function s(m,S,F,Z,Se){this._reactName=m,this._targetInst=F,this.type=S,this.nativeEvent=Z,this.target=Se,this.currentTarget=null;for(var Xe in i)i.hasOwnProperty(Xe)&&(m=i[Xe],this[Xe]=m?m(Z):Z[Xe]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Al:Su,this.isPropagationStopped=Su,this}return be(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),s}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fa=Ki(sa),Us=be({},sa,{view:0,detail:0}),nc=Ki(Us),Ml,kl,To,Oa=be({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==To&&(To&&i.type==="mousemove"?(Ml=i.screenX-To.screenX,kl=i.screenY-To.screenY):kl=Ml=0,To=i),Ml)},movementY:function(i){return"movementY"in i?i.movementY:kl}}),rc=Ki(Oa),ic=be({},Oa,{dataTransfer:0}),il=Ki(ic),jc=be({},Us,{relatedTarget:0}),fs=Ki(jc),Lc=be({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=Ki(Lc),Eu=be({},sa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Io=Ki(Eu),oc=be({},sa,{data:0}),zl=Ki(oc),sc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Co={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Co[i])?!!s[i]:!1}function Vs(){return Tu}var Iu=be({},Us,{key:function(i){if(i.key){var s=sc[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ds(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Rl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(i){return i.type==="keypress"?ds(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ds(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Fl=Ki(Iu),La=be({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ps=Ki(La),Ol=be({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),Dc=Ki(Ol),Br=be({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),jl=Ki(Br),Vn=be({},Oa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ll=Ki(Vn),xr=[9,13,27,32],ir=a&&"CompositionEvent"in window,Po=null;a&&"documentMode"in document&&(Po=document.documentMode);var Vo=a&&"TextEvent"in window&&!Po,Ao=a&&(!ir||Po&&8<Po&&11>=Po),di=" ",Vi=!1;function ms(i,s){switch(i){case"keyup":return xr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oi(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $s=!1;function Da(i,s){switch(i){case"compositionend":return Oi(s);case"keypress":return s.which!==32?null:(Vi=!0,di);case"textInput":return i=s.data,i===di&&Vi?null:i;default:return null}}function Ba(i,s){if($s)return i==="compositionend"||!ir&&ms(i,s)?(i=tc(),hs=rr=Ti=null,$s=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ao&&s.locale!=="ko"?null:s.data;default:return null}}var mi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mo(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!mi[i.type]:s==="textarea"}function aa(i,s,m,S){me(S),s=Ul(s,"onChange"),0<s.length&&(m=new Fa("onChange","change",null,m,S),i.push({event:m,listeners:s}))}var Yi=null,lo=null;function ol(i){ac(i,0)}function $o(i){var s=_s(i);if(kt(s))return i}function la(i,s){if(i==="change")return s}var Dl=!1;if(a){var uo;if(a){var er="oninput"in document;if(!er){var sl=document.createElement("div");sl.setAttribute("oninput","return;"),er=typeof sl.oninput=="function"}uo=er}else uo=!1;Dl=uo&&(!document.documentMode||9<document.documentMode)}function Cu(){Yi&&(Yi.detachEvent("onpropertychange",al),lo=Yi=null)}function al(i){if(i.propertyName==="value"&&$o(lo)){var s=[];aa(s,lo,i,Fr(i)),He(ol,s)}}function ua(i,s,m){i==="focusin"?(Cu(),Yi=s,lo=m,Yi.attachEvent("onpropertychange",al)):i==="focusout"&&Cu()}function Pu(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return $o(lo)}function ll(i,s){if(i==="click")return $o(s)}function ee(i,s){if(i==="input"||i==="change")return $o(s)}function Ie(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var We=typeof Object.is=="function"?Object.is:Ie;function wt(i,s){if(We(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var m=Object.keys(i),S=Object.keys(s);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var F=m[S];if(!L.call(s,F)||!We(i[F],s[F]))return!1}return!0}function Kt(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Nt(i,s){var m=Kt(i);i=0;for(var S;m;){if(m.nodeType===3){if(S=i+m.textContent.length,i<=s&&S>=s)return{node:m,offset:s-i};i=S}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Kt(m)}}function ln(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?ln(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Sn(){for(var i=window,s=Jt();s instanceof i.HTMLIFrameElement;){try{var m=typeof s.contentWindow.location.href=="string"}catch{m=!1}if(m)i=s.contentWindow;else break;s=Jt(i.document)}return s}function Ln(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function pr(i){var s=Sn(),m=i.focusedElem,S=i.selectionRange;if(s!==m&&m&&m.ownerDocument&&ln(m.ownerDocument.documentElement,m)){if(S!==null&&Ln(m)){if(s=S.start,i=S.end,i===void 0&&(i=s),"selectionStart"in m)m.selectionStart=s,m.selectionEnd=Math.min(i,m.value.length);else if(i=(s=m.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var F=m.textContent.length,Z=Math.min(S.start,F);S=S.end===void 0?Z:Math.min(S.end,F),!i.extend&&Z>S&&(F=S,S=Z,Z=F),F=Nt(m,Z);var Se=Nt(m,S);F&&Se&&(i.rangeCount!==1||i.anchorNode!==F.node||i.anchorOffset!==F.offset||i.focusNode!==Se.node||i.focusOffset!==Se.offset)&&(s=s.createRange(),s.setStart(F.node,F.offset),i.removeAllRanges(),Z>S?(i.addRange(s),i.extend(Se.node,Se.offset)):(s.setEnd(Se.node,Se.offset),i.addRange(s)))}}for(s=[],i=m;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<s.length;m++)i=s[m],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ar=a&&"documentMode"in document&&11>=document.documentMode,hr=null,Nr=null,Qr=null,ei=!1;function co(i,s,m){var S=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;ei||hr==null||hr!==Jt(S)||(S=hr,"selectionStart"in S&&Ln(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Qr&&wt(Qr,S)||(Qr=S,S=Ul(Nr,"onSelect"),0<S.length&&(s=new Fa("onSelect","select",null,s,m),i.push({event:s,listeners:S}),s.target=hr)))}function $i(i,s){var m={};return m[i.toLowerCase()]=s.toLowerCase(),m["Webkit"+i]="webkit"+s,m["Moz"+i]="moz"+s,m}var Ii={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionend:$i("Transition","TransitionEnd")},Gs={},ti={};a&&(ti=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function Ji(i){if(Gs[i])return Gs[i];if(!Ii[i])return i;var s=Ii[i],m;for(m in s)if(s.hasOwnProperty(m)&&m in ti)return Gs[i]=s[m];return i}var Bc=Ji("animationend"),Nc=Ji("animationiteration"),Zr=Ji("animationstart"),Go=Ji("transitionend"),ho=new Map,Bl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(i,s){ho.set(i,s),T(s,[i])}for(var Nl=0;Nl<Bl.length;Nl++){var Na=Bl[Nl],ca=Na.toLowerCase(),Uc=Na[0].toUpperCase()+Na.slice(1);Hs(ca,"on"+Uc)}Hs(Bc,"onAnimationEnd"),Hs(Nc,"onAnimationIteration"),Hs(Zr,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(Go,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),T("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),T("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),T("onBeforeInput",["compositionend","keypress","textInput","paste"]),T("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),T("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),T("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ua));function Au(i,s,m){var S=i.type||"unknown-event";i.currentTarget=m,Qn(S,s,void 0,i),i.currentTarget=null}function ac(i,s){s=(s&4)!==0;for(var m=0;m<i.length;m++){var S=i[m],F=S.event;S=S.listeners;e:{var Z=void 0;if(s)for(var Se=S.length-1;0<=Se;Se--){var Xe=S[Se],ot=Xe.instance,bt=Xe.currentTarget;if(Xe=Xe.listener,ot!==Z&&F.isPropagationStopped())break e;Au(F,Xe,bt),Z=ot}else for(Se=0;Se<S.length;Se++){if(Xe=S[Se],ot=Xe.instance,bt=Xe.currentTarget,Xe=Xe.listener,ot!==Z&&F.isPropagationStopped())break e;Au(F,Xe,bt),Z=ot}}}if(pn)throw i=vn,pn=!1,vn=null,i}function Pr(i,s){var m=s[Yn];m===void 0&&(m=s[Yn]=new Set);var S=i+"__bubble";m.has(S)||(lc(s,i,2,!1),m.add(S))}function ha(i,s,m){var S=0;s&&(S|=4),lc(m,i,S,s)}var ul="_reactListening"+Math.random().toString(36).slice(2);function da(i){if(!i[ul]){i[ul]=!0,v.forEach(function(m){m!=="selectionchange"&&(Vc.has(m)||ha(m,!1,i),ha(m,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[ul]||(s[ul]=!0,ha("selectionchange",!1,s))}}function lc(i,s,m,S){switch(Ns(s)){case 1:var F=bu;break;case 4:F=Cl;break;default:F=ao}m=F.bind(null,s,m,i),F=void 0,!Ze||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(F=!0),S?F!==void 0?i.addEventListener(s,m,{capture:!0,passive:F}):i.addEventListener(s,m,!0):F!==void 0?i.addEventListener(s,m,{passive:F}):i.addEventListener(s,m,!1)}function Mu(i,s,m,S,F){var Z=S;if(!(s&1)&&!(s&2)&&S!==null)e:for(;;){if(S===null)return;var Se=S.tag;if(Se===3||Se===4){var Xe=S.stateNode.containerInfo;if(Xe===F||Xe.nodeType===8&&Xe.parentNode===F)break;if(Se===4)for(Se=S.return;Se!==null;){var ot=Se.tag;if((ot===3||ot===4)&&(ot=Se.stateNode.containerInfo,ot===F||ot.nodeType===8&&ot.parentNode===F))return;Se=Se.return}for(;Xe!==null;){if(Se=ma(Xe),Se===null)return;if(ot=Se.tag,ot===5||ot===6){S=Z=Se;continue e}Xe=Xe.parentNode}}S=S.return}He(function(){var bt=Z,jt=Fr(m),Ut=[];e:{var Ft=ho.get(i);if(Ft!==void 0){var nn=Fa,mn=i;switch(i){case"keypress":if(ds(m)===0)break e;case"keydown":case"keyup":nn=Fl;break;case"focusin":mn="focus",nn=fs;break;case"focusout":mn="blur",nn=fs;break;case"beforeblur":case"afterblur":nn=fs;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nn=rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nn=il;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nn=Dc;break;case Bc:case Nc:case Zr:nn=ja;break;case Go:nn=jl;break;case"scroll":nn=nc;break;case"wheel":nn=Ll;break;case"copy":case"cut":case"paste":nn=Io;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nn=ps}var bn=(s&4)!==0,fi=!bn&&i==="scroll",vt=bn?Ft!==null?Ft+"Capture":null:Ft;bn=[];for(var lt=bt,xt;lt!==null;){xt=lt;var qt=xt.stateNode;if(xt.tag===5&&qt!==null&&(xt=qt,vt!==null&&(qt=nt(lt,vt),qt!=null&&bn.push(cl(lt,qt,xt)))),fi)break;lt=lt.return}0<bn.length&&(Ft=new nn(Ft,mn,null,m,jt),Ut.push({event:Ft,listeners:bn}))}}if(!(s&7)){e:{if(Ft=i==="mouseover"||i==="pointerover",nn=i==="mouseout"||i==="pointerout",Ft&&m!==Xt&&(mn=m.relatedTarget||m.fromElement)&&(ma(mn)||mn[vs]))break e;if((nn||Ft)&&(Ft=jt.window===jt?jt:(Ft=jt.ownerDocument)?Ft.defaultView||Ft.parentWindow:window,nn?(mn=m.relatedTarget||m.toElement,nn=bt,mn=mn?ma(mn):null,mn!==null&&(fi=Un(mn),mn!==fi||mn.tag!==5&&mn.tag!==6)&&(mn=null)):(nn=null,mn=bt),nn!==mn)){if(bn=rc,qt="onMouseLeave",vt="onMouseEnter",lt="mouse",(i==="pointerout"||i==="pointerover")&&(bn=ps,qt="onPointerLeave",vt="onPointerEnter",lt="pointer"),fi=nn==null?Ft:_s(nn),xt=mn==null?Ft:_s(mn),Ft=new bn(qt,lt+"leave",nn,m,jt),Ft.target=fi,Ft.relatedTarget=xt,qt=null,ma(jt)===bt&&(bn=new bn(vt,lt+"enter",mn,m,jt),bn.target=xt,bn.relatedTarget=fi,qt=bn),fi=qt,nn&&mn)t:{for(bn=nn,vt=mn,lt=0,xt=bn;xt;xt=fa(xt))lt++;for(xt=0,qt=vt;qt;qt=fa(qt))xt++;for(;0<lt-xt;)bn=fa(bn),lt--;for(;0<xt-lt;)vt=fa(vt),xt--;for(;lt--;){if(bn===vt||vt!==null&&bn===vt.alternate)break t;bn=fa(bn),vt=fa(vt)}bn=null}else bn=null;nn!==null&&hl(Ut,Ft,nn,bn,!1),mn!==null&&fi!==null&&hl(Ut,fi,mn,bn,!0)}}e:{if(Ft=bt?_s(bt):window,nn=Ft.nodeName&&Ft.nodeName.toLowerCase(),nn==="select"||nn==="input"&&Ft.type==="file")var In=la;else if(Mo(Ft))if(Dl)In=ee;else{In=Pu;var Dn=ua}else(nn=Ft.nodeName)&&nn.toLowerCase()==="input"&&(Ft.type==="checkbox"||Ft.type==="radio")&&(In=ll);if(In&&(In=In(i,bt))){aa(Ut,In,m,jt);break e}Dn&&Dn(i,Ft,bt),i==="focusout"&&(Dn=Ft._wrapperState)&&Dn.controlled&&Ft.type==="number"&&en(Ft,"number",Ft.value)}switch(Dn=bt?_s(bt):window,i){case"focusin":(Mo(Dn)||Dn.contentEditable==="true")&&(hr=Dn,Nr=bt,Qr=null);break;case"focusout":Qr=Nr=hr=null;break;case"mousedown":ei=!0;break;case"contextmenu":case"mouseup":case"dragend":ei=!1,co(Ut,m,jt);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":co(Ut,m,jt)}var Cn;if(ir)e:{switch(i){case"compositionstart":var Hn="onCompositionStart";break e;case"compositionend":Hn="onCompositionEnd";break e;case"compositionupdate":Hn="onCompositionUpdate";break e}Hn=void 0}else $s?ms(i,m)&&(Hn="onCompositionEnd"):i==="keydown"&&m.keyCode===229&&(Hn="onCompositionStart");Hn&&(Ao&&m.locale!=="ko"&&($s||Hn!=="onCompositionStart"?Hn==="onCompositionEnd"&&$s&&(Cn=tc()):(Ti=jt,rr="value"in Ti?Ti.value:Ti.textContent,$s=!0)),Dn=Ul(bt,Hn),0<Dn.length&&(Hn=new zl(Hn,i,null,m,jt),Ut.push({event:Hn,listeners:Dn}),Cn?Hn.data=Cn:(Cn=Oi(m),Cn!==null&&(Hn.data=Cn)))),(Cn=Vo?Da(i,m):Ba(i,m))&&(bt=Ul(bt,"onBeforeInput"),0<bt.length&&(jt=new zl("onBeforeInput","beforeinput",null,m,jt),Ut.push({event:jt,listeners:bt}),jt.data=Cn))}ac(Ut,s)})}function cl(i,s,m){return{instance:i,listener:s,currentTarget:m}}function Ul(i,s){for(var m=s+"Capture",S=[];i!==null;){var F=i,Z=F.stateNode;F.tag===5&&Z!==null&&(F=Z,Z=nt(i,m),Z!=null&&S.unshift(cl(i,Z,F)),Z=nt(i,s),Z!=null&&S.push(cl(i,Z,F))),i=i.return}return S}function fa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function hl(i,s,m,S,F){for(var Z=s._reactName,Se=[];m!==null&&m!==S;){var Xe=m,ot=Xe.alternate,bt=Xe.stateNode;if(ot!==null&&ot===S)break;Xe.tag===5&&bt!==null&&(Xe=bt,F?(ot=nt(m,Z),ot!=null&&Se.unshift(cl(m,ot,Xe))):F||(ot=nt(m,Z),ot!=null&&Se.push(cl(m,ot,Xe)))),m=m.return}Se.length!==0&&i.push({event:s,listeners:Se})}var Oh=/\r\n?/g,Ho=/\u0000|\uFFFD/g;function gs(i){return(typeof i=="string"?i:""+i).replace(Oh,`
`).replace(Ho,"")}function Vl(i,s,m){if(s=gs(s),gs(i)!==s&&m)throw Error(p(425))}function fo(){}var pa=null,$c=null;function Gc(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var uc=typeof setTimeout=="function"?setTimeout:void 0,jh=typeof clearTimeout=="function"?clearTimeout:void 0,cc=typeof Promise=="function"?Promise:void 0,$l=typeof queueMicrotask=="function"?queueMicrotask:typeof cc<"u"?function(i){return cc.resolve(null).then(i).catch(Zo)}:uc;function Zo(i){setTimeout(function(){throw i})}function sn(i,s){var m=s,S=0;do{var F=m.nextSibling;if(i.removeChild(m),F&&F.nodeType===8)if(m=F.data,m==="/$"){if(S===0){i.removeChild(F),us(s);return}S--}else m!=="$"&&m!=="$?"&&m!=="$!"||S++;m=F}while(m);us(s)}function ys(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function hc(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var m=i.data;if(m==="$"||m==="$!"||m==="$?"){if(s===0)return i;s--}else m==="/$"&&s++}i=i.previousSibling}return null}var dl=Math.random().toString(36).slice(2),Qi="__reactFiber$"+dl,Zs="__reactProps$"+dl,vs="__reactContainer$"+dl,Yn="__reactEvents$"+dl,Hc="__reactListeners$"+dl,Od="__reactHandles$"+dl;function ma(i){var s=i[Qi];if(s)return s;for(var m=i.parentNode;m;){if(s=m[vs]||m[Qi]){if(m=s.alternate,s.child!==null||m!==null&&m.child!==null)for(i=hc(i);i!==null;){if(m=i[Qi])return m;i=hc(i)}return s}i=m,m=i.parentNode}return null}function ku(i){return i=i[Qi]||i[vs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _s(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function zu(i){return i[Zs]||null}var Ru=[],fl=-1;function Va(i){return{current:i}}function Ar(i){0>fl||(i.current=Ru[fl],Ru[fl]=null,fl--)}function kr(i,s){fl++,Ru[fl]=i.current,i.current=s}var $a={},Sr=Va($a),tr=Va(!1),Wo=$a;function ga(i,s){var m=i.type.contextTypes;if(!m)return $a;var S=i.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===s)return S.__reactInternalMemoizedMaskedChildContext;var F={},Z;for(Z in m)F[Z]=s[Z];return S&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=F),F}function ji(i){return i=i.childContextTypes,i!=null}function Fu(){Ar(tr),Ar(Sr)}function Gl(i,s,m){if(Sr.current!==$a)throw Error(p(168));kr(Sr,s),kr(tr,m)}function Hl(i,s,m){var S=i.stateNode;if(s=s.childContextTypes,typeof S.getChildContext!="function")return m;S=S.getChildContext();for(var F in S)if(!(F in s))throw Error(p(108,pt(i)||"Unknown",F));return be({},m,S)}function ko(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||$a,Wo=Sr.current,kr(Sr,i),kr(tr,tr.current),!0}function Zl(i,s,m){var S=i.stateNode;if(!S)throw Error(p(169));m?(i=Hl(i,s,Wo),S.__reactInternalMemoizedMergedChildContext=i,Ar(tr),Ar(Sr),kr(Sr,i)):Ar(tr),kr(tr,m)}var an=null,En=!1,Wl=!1;function Ou(i){an===null?an=[i]:an.push(i)}function Zc(i){En=!0,Ou(i)}function y(){if(!Wl&&an!==null){Wl=!0;var i=0,s=cr;try{var m=an;for(cr=1;i<m.length;i++){var S=m[i];do S=S(!0);while(S!==null)}an=null,En=!1}catch(F){throw an!==null&&(an=an.slice(i+1)),ii(Xn,y),F}finally{cr=s,Wl=!1}}return null}var e=[],o=0,h=null,d=0,g=[],I=0,A=null,O=1,X="";function se(i,s){e[o++]=d,e[o++]=h,h=i,d=s}function ae(i,s,m){g[I++]=O,g[I++]=X,g[I++]=A,A=i;var S=O;i=X;var F=32-fr(S)-1;S&=~(1<<F),m+=1;var Z=32-fr(s)+F;if(30<Z){var Se=F-F%5;Z=(S&(1<<Se)-1).toString(32),S>>=Se,F-=Se,O=1<<32-fr(s)+F|m<<F|S,X=Z+i}else O=1<<Z|m<<F|S,X=i}function we(i){i.return!==null&&(se(i,1),ae(i,1,0))}function Ae(i){for(;i===h;)h=e[--o],e[o]=null,d=e[--o],e[o]=null;for(;i===A;)A=g[--I],g[I]=null,X=g[--I],g[I]=null,O=g[--I],g[I]=null}var je=null,Ne=null,$e=!1,qe=null;function et(i,s){var m=es(5,null,null,0);m.elementType="DELETED",m.stateNode=s,m.return=i,s=i.deletions,s===null?(i.deletions=[m],i.flags|=16):s.push(m)}function Ve(i,s){switch(i.tag){case 5:var m=i.type;return s=s.nodeType!==1||m.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,je=i,Ne=ys(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,je=i,Ne=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(m=A!==null?{id:O,overflow:X}:null,i.memoizedState={dehydrated:s,treeContext:m,retryLane:1073741824},m=es(18,null,null,0),m.stateNode=s,m.return=i,i.child=m,je=i,Ne=null,!0):!1;default:return!1}}function st(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ut(i){if($e){var s=Ne;if(s){var m=s;if(!Ve(i,s)){if(st(i))throw Error(p(418));s=ys(m.nextSibling);var S=je;s&&Ve(i,s)?et(S,m):(i.flags=i.flags&-4097|2,$e=!1,je=i)}}else{if(st(i))throw Error(p(418));i.flags=i.flags&-4097|2,$e=!1,je=i}}}function mt(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;je=i}function At(i){if(i!==je)return!1;if(!$e)return mt(i),$e=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Gc(i.type,i.memoizedProps)),s&&(s=Ne)){if(st(i))throw Dt(),Error(p(418));for(;s;)et(i,s),s=ys(s.nextSibling)}if(mt(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var m=i.data;if(m==="/$"){if(s===0){Ne=ys(i.nextSibling);break e}s--}else m!=="$"&&m!=="$!"&&m!=="$?"||s++}i=i.nextSibling}Ne=null}}else Ne=je?ys(i.stateNode.nextSibling):null;return!0}function Dt(){for(var i=Ne;i;)i=ys(i.nextSibling)}function Gt(){Ne=je=null,$e=!1}function tn(i){qe===null?qe=[i]:qe.push(i)}var Ht=Me.ReactCurrentBatchConfig;function $t(i,s,m){if(i=m.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(p(309));var S=m.stateNode}if(!S)throw Error(p(147,i));var F=S,Z=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===Z?s.ref:(s=function(Se){var Xe=F.refs;Se===null?delete Xe[Z]:Xe[Z]=Se},s._stringRef=Z,s)}if(typeof i!="string")throw Error(p(284));if(!m._owner)throw Error(p(290,i))}return i}function dn(i,s){throw i=Object.prototype.toString.call(s),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function jn(i){var s=i._init;return s(i._payload)}function Wt(i){function s(vt,lt){if(i){var xt=vt.deletions;xt===null?(vt.deletions=[lt],vt.flags|=16):xt.push(lt)}}function m(vt,lt){if(!i)return null;for(;lt!==null;)s(vt,lt),lt=lt.sibling;return null}function S(vt,lt){for(vt=new Map;lt!==null;)lt.key!==null?vt.set(lt.key,lt):vt.set(lt.index,lt),lt=lt.sibling;return vt}function F(vt,lt){return vt=ou(vt,lt),vt.index=0,vt.sibling=null,vt}function Z(vt,lt,xt){return vt.index=xt,i?(xt=vt.alternate,xt!==null?(xt=xt.index,xt<lt?(vt.flags|=2,lt):xt):(vt.flags|=2,lt)):(vt.flags|=1048576,lt)}function Se(vt){return i&&vt.alternate===null&&(vt.flags|=2),vt}function Xe(vt,lt,xt,qt){return lt===null||lt.tag!==6?(lt=Ks(xt,vt.mode,qt),lt.return=vt,lt):(lt=F(lt,xt),lt.return=vt,lt)}function ot(vt,lt,xt,qt){var In=xt.type;return In===M?jt(vt,lt,xt.props.children,qt,xt.key):lt!==null&&(lt.elementType===In||typeof In=="object"&&In!==null&&In.$$typeof===le&&jn(In)===lt.type)?(qt=F(lt,xt.props),qt.ref=$t(vt,lt,xt),qt.return=vt,qt):(qt=xh(xt.type,xt.key,xt.props,null,vt.mode,qt),qt.ref=$t(vt,lt,xt),qt.return=vt,qt)}function bt(vt,lt,xt,qt){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==xt.containerInfo||lt.stateNode.implementation!==xt.implementation?(lt=qa(xt,vt.mode,qt),lt.return=vt,lt):(lt=F(lt,xt.children||[]),lt.return=vt,lt)}function jt(vt,lt,xt,qt,In){return lt===null||lt.tag!==7?(lt=su(xt,vt.mode,qt,In),lt.return=vt,lt):(lt=F(lt,xt),lt.return=vt,lt)}function Ut(vt,lt,xt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return lt=Ks(""+lt,vt.mode,xt),lt.return=vt,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case ne:return xt=xh(lt.type,lt.key,lt.props,null,vt.mode,xt),xt.ref=$t(vt,null,lt),xt.return=vt,xt;case ue:return lt=qa(lt,vt.mode,xt),lt.return=vt,lt;case le:var qt=lt._init;return Ut(vt,qt(lt._payload),xt)}if(ze(lt)||_e(lt))return lt=su(lt,vt.mode,xt,null),lt.return=vt,lt;dn(vt,lt)}return null}function Ft(vt,lt,xt,qt){var In=lt!==null?lt.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return In!==null?null:Xe(vt,lt,""+xt,qt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case ne:return xt.key===In?ot(vt,lt,xt,qt):null;case ue:return xt.key===In?bt(vt,lt,xt,qt):null;case le:return In=xt._init,Ft(vt,lt,In(xt._payload),qt)}if(ze(xt)||_e(xt))return In!==null?null:jt(vt,lt,xt,qt,null);dn(vt,xt)}return null}function nn(vt,lt,xt,qt,In){if(typeof qt=="string"&&qt!==""||typeof qt=="number")return vt=vt.get(xt)||null,Xe(lt,vt,""+qt,In);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case ne:return vt=vt.get(qt.key===null?xt:qt.key)||null,ot(lt,vt,qt,In);case ue:return vt=vt.get(qt.key===null?xt:qt.key)||null,bt(lt,vt,qt,In);case le:var Dn=qt._init;return nn(vt,lt,xt,Dn(qt._payload),In)}if(ze(qt)||_e(qt))return vt=vt.get(xt)||null,jt(lt,vt,qt,In,null);dn(lt,qt)}return null}function mn(vt,lt,xt,qt){for(var In=null,Dn=null,Cn=lt,Hn=lt=0,Ni=null;Cn!==null&&Hn<xt.length;Hn++){Cn.index>Hn?(Ni=Cn,Cn=null):Ni=Cn.sibling;var yr=Ft(vt,Cn,xt[Hn],qt);if(yr===null){Cn===null&&(Cn=Ni);break}i&&Cn&&yr.alternate===null&&s(vt,Cn),lt=Z(yr,lt,Hn),Dn===null?In=yr:Dn.sibling=yr,Dn=yr,Cn=Ni}if(Hn===xt.length)return m(vt,Cn),$e&&se(vt,Hn),In;if(Cn===null){for(;Hn<xt.length;Hn++)Cn=Ut(vt,xt[Hn],qt),Cn!==null&&(lt=Z(Cn,lt,Hn),Dn===null?In=Cn:Dn.sibling=Cn,Dn=Cn);return $e&&se(vt,Hn),In}for(Cn=S(vt,Cn);Hn<xt.length;Hn++)Ni=nn(Cn,vt,Hn,xt[Hn],qt),Ni!==null&&(i&&Ni.alternate!==null&&Cn.delete(Ni.key===null?Hn:Ni.key),lt=Z(Ni,lt,Hn),Dn===null?In=Ni:Dn.sibling=Ni,Dn=Ni);return i&&Cn.forEach(function(yl){return s(vt,yl)}),$e&&se(vt,Hn),In}function bn(vt,lt,xt,qt){var In=_e(xt);if(typeof In!="function")throw Error(p(150));if(xt=In.call(xt),xt==null)throw Error(p(151));for(var Dn=In=null,Cn=lt,Hn=lt=0,Ni=null,yr=xt.next();Cn!==null&&!yr.done;Hn++,yr=xt.next()){Cn.index>Hn?(Ni=Cn,Cn=null):Ni=Cn.sibling;var yl=Ft(vt,Cn,yr.value,qt);if(yl===null){Cn===null&&(Cn=Ni);break}i&&Cn&&yl.alternate===null&&s(vt,Cn),lt=Z(yl,lt,Hn),Dn===null?In=yl:Dn.sibling=yl,Dn=yl,Cn=Ni}if(yr.done)return m(vt,Cn),$e&&se(vt,Hn),In;if(Cn===null){for(;!yr.done;Hn++,yr=xt.next())yr=Ut(vt,yr.value,qt),yr!==null&&(lt=Z(yr,lt,Hn),Dn===null?In=yr:Dn.sibling=yr,Dn=yr);return $e&&se(vt,Hn),In}for(Cn=S(vt,Cn);!yr.done;Hn++,yr=xt.next())yr=nn(Cn,vt,Hn,yr.value,qt),yr!==null&&(i&&yr.alternate!==null&&Cn.delete(yr.key===null?Hn:yr.key),lt=Z(yr,lt,Hn),Dn===null?In=yr:Dn.sibling=yr,Dn=yr);return i&&Cn.forEach(function(Km){return s(vt,Km)}),$e&&se(vt,Hn),In}function fi(vt,lt,xt,qt){if(typeof xt=="object"&&xt!==null&&xt.type===M&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case ne:e:{for(var In=xt.key,Dn=lt;Dn!==null;){if(Dn.key===In){if(In=xt.type,In===M){if(Dn.tag===7){m(vt,Dn.sibling),lt=F(Dn,xt.props.children),lt.return=vt,vt=lt;break e}}else if(Dn.elementType===In||typeof In=="object"&&In!==null&&In.$$typeof===le&&jn(In)===Dn.type){m(vt,Dn.sibling),lt=F(Dn,xt.props),lt.ref=$t(vt,Dn,xt),lt.return=vt,vt=lt;break e}m(vt,Dn);break}else s(vt,Dn);Dn=Dn.sibling}xt.type===M?(lt=su(xt.props.children,vt.mode,qt,xt.key),lt.return=vt,vt=lt):(qt=xh(xt.type,xt.key,xt.props,null,vt.mode,qt),qt.ref=$t(vt,lt,xt),qt.return=vt,vt=qt)}return Se(vt);case ue:e:{for(Dn=xt.key;lt!==null;){if(lt.key===Dn)if(lt.tag===4&&lt.stateNode.containerInfo===xt.containerInfo&&lt.stateNode.implementation===xt.implementation){m(vt,lt.sibling),lt=F(lt,xt.children||[]),lt.return=vt,vt=lt;break e}else{m(vt,lt);break}else s(vt,lt);lt=lt.sibling}lt=qa(xt,vt.mode,qt),lt.return=vt,vt=lt}return Se(vt);case le:return Dn=xt._init,fi(vt,lt,Dn(xt._payload),qt)}if(ze(xt))return mn(vt,lt,xt,qt);if(_e(xt))return bn(vt,lt,xt,qt);dn(vt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,lt!==null&&lt.tag===6?(m(vt,lt.sibling),lt=F(lt,xt),lt.return=vt,vt=lt):(m(vt,lt),lt=Ks(xt,vt.mode,qt),lt.return=vt,vt=lt),Se(vt)):m(vt,lt)}return fi}var Yt=Wt(!0),On=Wt(!1),wr=Va(null),Gn=null,qn=null,Er=null;function Ci(){Er=qn=Gn=null}function zo(i){var s=wr.current;Ar(wr),i._currentValue=s}function Tr(i,s,m){for(;i!==null;){var S=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,S!==null&&(S.childLanes|=s)):S!==null&&(S.childLanes&s)!==s&&(S.childLanes|=s),i===m)break;i=i.return}}function gi(i,s){Gn=i,Er=qn=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&s&&(jo=!0),i.firstContext=null)}function zr(i){var s=i._currentValue;if(Er!==i)if(i={context:i,memoizedValue:s,next:null},qn===null){if(Gn===null)throw Error(p(308));qn=i,Gn.dependencies={lanes:0,firstContext:i}}else qn=qn.next=i;return s}var ni=null;function Li(i){ni===null?ni=[i]:ni.push(i)}function xs(i,s,m,S){var F=s.interleaved;return F===null?(m.next=m,Li(s)):(m.next=F.next,F.next=m),s.interleaved=m,po(i,S)}function po(i,s){i.lanes|=s;var m=i.alternate;for(m!==null&&(m.lanes|=s),m=i,i=i.return;i!==null;)i.childLanes|=s,m=i.alternate,m!==null&&(m.childLanes|=s),m=i,i=i.return;return m.tag===3?m.stateNode:null}var ws=!1;function Ga(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ro(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function qo(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Ws(i,s,m){var S=i.updateQueue;if(S===null)return null;if(S=S.shared,mr&2){var F=S.pending;return F===null?s.next=s:(s.next=F.next,F.next=s),S.pending=s,po(i,m)}return F=S.interleaved,F===null?(s.next=s,Li(S)):(s.next=F.next,F.next=s),S.interleaved=s,po(i,m)}function eo(i,s,m){if(s=s.updateQueue,s!==null&&(s=s.shared,(m&4194240)!==0)){var S=s.lanes;S&=i.pendingLanes,m|=S,s.lanes=m,Ls(i,m)}}function Fo(i,s){var m=i.updateQueue,S=i.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var F=null,Z=null;if(m=m.firstBaseUpdate,m!==null){do{var Se={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};Z===null?F=Z=Se:Z=Z.next=Se,m=m.next}while(m!==null);Z===null?F=Z=s:Z=Z.next=s}else F=Z=s;m={baseState:S.baseState,firstBaseUpdate:F,lastBaseUpdate:Z,shared:S.shared,effects:S.effects},i.updateQueue=m;return}i=m.lastBaseUpdate,i===null?m.firstBaseUpdate=s:i.next=s,m.lastBaseUpdate=s}function bs(i,s,m,S){var F=i.updateQueue;ws=!1;var Z=F.firstBaseUpdate,Se=F.lastBaseUpdate,Xe=F.shared.pending;if(Xe!==null){F.shared.pending=null;var ot=Xe,bt=ot.next;ot.next=null,Se===null?Z=bt:Se.next=bt,Se=ot;var jt=i.alternate;jt!==null&&(jt=jt.updateQueue,Xe=jt.lastBaseUpdate,Xe!==Se&&(Xe===null?jt.firstBaseUpdate=bt:Xe.next=bt,jt.lastBaseUpdate=ot))}if(Z!==null){var Ut=F.baseState;Se=0,jt=bt=ot=null,Xe=Z;do{var Ft=Xe.lane,nn=Xe.eventTime;if((S&Ft)===Ft){jt!==null&&(jt=jt.next={eventTime:nn,lane:0,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null});e:{var mn=i,bn=Xe;switch(Ft=s,nn=m,bn.tag){case 1:if(mn=bn.payload,typeof mn=="function"){Ut=mn.call(nn,Ut,Ft);break e}Ut=mn;break e;case 3:mn.flags=mn.flags&-65537|128;case 0:if(mn=bn.payload,Ft=typeof mn=="function"?mn.call(nn,Ut,Ft):mn,Ft==null)break e;Ut=be({},Ut,Ft);break e;case 2:ws=!0}}Xe.callback!==null&&Xe.lane!==0&&(i.flags|=64,Ft=F.effects,Ft===null?F.effects=[Xe]:Ft.push(Xe))}else nn={eventTime:nn,lane:Ft,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null},jt===null?(bt=jt=nn,ot=Ut):jt=jt.next=nn,Se|=Ft;if(Xe=Xe.next,Xe===null){if(Xe=F.shared.pending,Xe===null)break;Ft=Xe,Xe=Ft.next,Ft.next=null,F.lastBaseUpdate=Ft,F.shared.pending=null}}while(!0);if(jt===null&&(ot=Ut),F.baseState=ot,F.firstBaseUpdate=bt,F.lastBaseUpdate=jt,s=F.shared.interleaved,s!==null){F=s;do Se|=F.lane,F=F.next;while(F!==s)}else Z===null&&(F.shared.lanes=0);Uu|=Se,i.lanes=Se,i.memoizedState=Ut}}function Xo(i,s,m){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var S=i[s],F=S.callback;if(F!==null){if(S.callback=null,S=m,typeof F!="function")throw Error(p(191,F));F.call(S)}}}var si={},jr=Va(si),Di=Va(si),Kn=Va(si);function Oo(i){if(i===si)throw Error(p(174));return i}function Ha(i,s){switch(kr(Kn,s),kr(Di,i),kr(jr,si),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ye(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=ye(s,i)}Ar(jr),kr(jr,s)}function Ss(){Ar(jr),Ar(Di),Ar(Kn)}function Wc(i){Oo(Kn.current);var s=Oo(jr.current),m=ye(s,i.type);s!==m&&(kr(Di,i),kr(jr,m))}function qc(i){Di.current===i&&(Ar(jr),Ar(Di))}var Ur=Va(0);function Es(i){for(var s=i;s!==null;){if(s.tag===13){var m=s.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var dc=[];function ql(){for(var i=0;i<dc.length;i++)dc[i]._workInProgressVersionPrimary=null;dc.length=0}var Za=Me.ReactCurrentDispatcher,Xl=Me.ReactCurrentBatchConfig,qs=0,Ir=null,Wr=null,yi=null,Xc=!1,fc=!1,Kc=0,jd=0;function Pi(){throw Error(p(321))}function Kl(i,s){if(s===null)return!1;for(var m=0;m<s.length&&m<i.length;m++)if(!We(i[m],s[m]))return!1;return!0}function ya(i,s,m,S,F,Z){if(qs=Z,Ir=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Za.current=i===null||i.memoizedState===null?$h:Dm,i=m(S,F),fc){Z=0;do{if(fc=!1,Kc=0,25<=Z)throw Error(p(301));Z+=1,yi=Wr=null,s.updateQueue=null,Za.current=Jf,i=m(S,F)}while(fc)}if(Za.current=Vh,s=Wr!==null&&Wr.next!==null,qs=0,yi=Wr=Ir=null,Xc=!1,s)throw Error(p(300));return i}function Ts(){var i=Kc!==0;return Kc=0,i}function to(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?Ir.memoizedState=yi=i:yi=yi.next=i,yi}function Is(){if(Wr===null){var i=Ir.alternate;i=i!==null?i.memoizedState:null}else i=Wr.next;var s=yi===null?Ir.memoizedState:yi.next;if(s!==null)yi=s,Wr=i;else{if(i===null)throw Error(p(310));Wr=i,i={memoizedState:Wr.memoizedState,baseState:Wr.baseState,baseQueue:Wr.baseQueue,queue:Wr.queue,next:null},yi===null?Ir.memoizedState=yi=i:yi=yi.next=i}return yi}function va(i,s){return typeof s=="function"?s(i):s}function Ld(i){var s=Is(),m=s.queue;if(m===null)throw Error(p(311));m.lastRenderedReducer=i;var S=Wr,F=S.baseQueue,Z=m.pending;if(Z!==null){if(F!==null){var Se=F.next;F.next=Z.next,Z.next=Se}S.baseQueue=F=Z,m.pending=null}if(F!==null){Z=F.next,S=S.baseState;var Xe=Se=null,ot=null,bt=Z;do{var jt=bt.lane;if((qs&jt)===jt)ot!==null&&(ot=ot.next={lane:0,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),S=bt.hasEagerState?bt.eagerState:i(S,bt.action);else{var Ut={lane:jt,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null};ot===null?(Xe=ot=Ut,Se=S):ot=ot.next=Ut,Ir.lanes|=jt,Uu|=jt}bt=bt.next}while(bt!==null&&bt!==Z);ot===null?Se=S:ot.next=Xe,We(S,s.memoizedState)||(jo=!0),s.memoizedState=S,s.baseState=Se,s.baseQueue=ot,m.lastRenderedState=S}if(i=m.interleaved,i!==null){F=i;do Z=F.lane,Ir.lanes|=Z,Uu|=Z,F=F.next;while(F!==i)}else F===null&&(m.lanes=0);return[s.memoizedState,m.dispatch]}function Lh(i){var s=Is(),m=s.queue;if(m===null)throw Error(p(311));m.lastRenderedReducer=i;var S=m.dispatch,F=m.pending,Z=s.memoizedState;if(F!==null){m.pending=null;var Se=F=F.next;do Z=i(Z,Se.action),Se=Se.next;while(Se!==F);We(Z,s.memoizedState)||(jo=!0),s.memoizedState=Z,s.baseQueue===null&&(s.baseState=Z),m.lastRenderedState=Z}return[Z,S]}function ai(){}function Dh(i,s){var m=Ir,S=Is(),F=s(),Z=!We(S.memoizedState,F);if(Z&&(S.memoizedState=F,jo=!0),S=S.queue,Qc(Jl.bind(null,m,S,i),[i]),S.getSnapshot!==s||Z||yi!==null&&yi.memoizedState.tag&1){if(m.flags|=2048,Jc(9,Yl.bind(null,m,S,F,s),void 0,null),Bi===null)throw Error(p(349));qs&30||Dd(m,s,F)}return F}function Dd(i,s,m){i.flags|=16384,i={getSnapshot:s,value:m},s=Ir.updateQueue,s===null?(s={lastEffect:null,stores:null},Ir.updateQueue=s,s.stores=[i]):(m=s.stores,m===null?s.stores=[i]:m.push(i))}function Yl(i,s,m,S){s.value=m,s.getSnapshot=S,Yc(s)&&Bh(i)}function Jl(i,s,m){return m(function(){Yc(s)&&Bh(i)})}function Yc(i){var s=i.getSnapshot;i=i.value;try{var m=s();return!We(i,m)}catch{return!0}}function Bh(i){var s=po(i,1);s!==null&&xa(s,i,1,-1)}function Bd(i){var s=to();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:i},s.queue=i,i=i.dispatch=mc.bind(null,Ir,i),[s.memoizedState,i]}function Jc(i,s,m,S){return i={tag:i,create:s,destroy:m,deps:S,next:null},s=Ir.updateQueue,s===null?(s={lastEffect:null,stores:null},Ir.updateQueue=s,s.lastEffect=i.next=i):(m=s.lastEffect,m===null?s.lastEffect=i.next=i:(S=m.next,m.next=i,i.next=S,s.lastEffect=i)),i}function Nd(){return Is().memoizedState}function Nh(i,s,m,S){var F=to();Ir.flags|=i,F.memoizedState=Jc(1|s,m,void 0,S===void 0?null:S)}function pc(i,s,m,S){var F=Is();S=S===void 0?null:S;var Z=void 0;if(Wr!==null){var Se=Wr.memoizedState;if(Z=Se.destroy,S!==null&&Kl(S,Se.deps)){F.memoizedState=Jc(s,m,Z,S);return}}Ir.flags|=i,F.memoizedState=Jc(1|s,m,Z,S)}function qf(i,s){return Nh(8390656,8,i,s)}function Qc(i,s){return pc(2048,8,i,s)}function Ud(i,s){return pc(4,2,i,s)}function Vd(i,s){return pc(4,4,i,s)}function ju(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Xf(i,s,m){return m=m!=null?m.concat([i]):null,pc(4,4,ju.bind(null,s,i),m)}function Lu(){}function eh(i,s){var m=Is();s=s===void 0?null:s;var S=m.memoizedState;return S!==null&&s!==null&&Kl(s,S[1])?S[0]:(m.memoizedState=[i,s],i)}function th(i,s){var m=Is();s=s===void 0?null:s;var S=m.memoizedState;return S!==null&&s!==null&&Kl(s,S[1])?S[0]:(i=i(),m.memoizedState=[i,s],i)}function $d(i,s,m){return qs&21?(We(m,s)||(m=io(),Ir.lanes|=m,Uu|=m,i.baseState=!0),s):(i.baseState&&(i.baseState=!1,jo=!0),i.memoizedState=m)}function Kf(i,s){var m=cr;cr=m!==0&&4>m?m:4,i(!0);var S=Xl.transition;Xl.transition={};try{i(!1),s()}finally{cr=m,Xl.transition=S}}function Yf(){return Is().memoizedState}function mo(i,s,m){var S=iu(i);if(m={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null},Uh(i))Gd(s,m);else if(m=xs(i,s,m,S),m!==null){var F=Lo();xa(m,i,S,F),gc(m,s,S)}}function mc(i,s,m){var S=iu(i),F={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null};if(Uh(i))Gd(s,F);else{var Z=i.alternate;if(i.lanes===0&&(Z===null||Z.lanes===0)&&(Z=s.lastRenderedReducer,Z!==null))try{var Se=s.lastRenderedState,Xe=Z(Se,m);if(F.hasEagerState=!0,F.eagerState=Xe,We(Xe,Se)){var ot=s.interleaved;ot===null?(F.next=F,Li(s)):(F.next=ot.next,ot.next=F),s.interleaved=F;return}}catch{}finally{}m=xs(i,s,F,S),m!==null&&(F=Lo(),xa(m,i,S,F),gc(m,s,S))}}function Uh(i){var s=i.alternate;return i===Ir||s!==null&&s===Ir}function Gd(i,s){fc=Xc=!0;var m=i.pending;m===null?s.next=s:(s.next=m.next,m.next=s),i.pending=s}function gc(i,s,m){if(m&4194240){var S=s.lanes;S&=i.pendingLanes,m|=S,s.lanes=m,Ls(i,m)}}var Vh={readContext:zr,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},$h={readContext:zr,useCallback:function(i,s){return to().memoizedState=[i,s===void 0?null:s],i},useContext:zr,useEffect:qf,useImperativeHandle:function(i,s,m){return m=m!=null?m.concat([i]):null,Nh(4194308,4,ju.bind(null,s,i),m)},useLayoutEffect:function(i,s){return Nh(4194308,4,i,s)},useInsertionEffect:function(i,s){return Nh(4,2,i,s)},useMemo:function(i,s){var m=to();return s=s===void 0?null:s,i=i(),m.memoizedState=[i,s],i},useReducer:function(i,s,m){var S=to();return s=m!==void 0?m(s):s,S.memoizedState=S.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},S.queue=i,i=i.dispatch=mo.bind(null,Ir,i),[S.memoizedState,i]},useRef:function(i){var s=to();return i={current:i},s.memoizedState=i},useState:Bd,useDebugValue:Lu,useDeferredValue:function(i){return to().memoizedState=i},useTransition:function(){var i=Bd(!1),s=i[0];return i=Kf.bind(null,i[1]),to().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,m){var S=Ir,F=to();if($e){if(m===void 0)throw Error(p(407));m=m()}else{if(m=s(),Bi===null)throw Error(p(349));qs&30||Dd(S,s,m)}F.memoizedState=m;var Z={value:m,getSnapshot:s};return F.queue=Z,qf(Jl.bind(null,S,Z,i),[i]),S.flags|=2048,Jc(9,Yl.bind(null,S,Z,m,s),void 0,null),m},useId:function(){var i=to(),s=Bi.identifierPrefix;if($e){var m=X,S=O;m=(S&~(1<<32-fr(S)-1)).toString(32)+m,s=":"+s+"R"+m,m=Kc++,0<m&&(s+="H"+m.toString(32)),s+=":"}else m=jd++,s=":"+s+"r"+m.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},Dm={readContext:zr,useCallback:eh,useContext:zr,useEffect:Qc,useImperativeHandle:Xf,useInsertionEffect:Ud,useLayoutEffect:Vd,useMemo:th,useReducer:Ld,useRef:Nd,useState:function(){return Ld(va)},useDebugValue:Lu,useDeferredValue:function(i){var s=Is();return $d(s,Wr.memoizedState,i)},useTransition:function(){var i=Ld(va)[0],s=Is().memoizedState;return[i,s]},useMutableSource:ai,useSyncExternalStore:Dh,useId:Yf,unstable_isNewReconciler:!1},Jf={readContext:zr,useCallback:eh,useContext:zr,useEffect:Qc,useImperativeHandle:Xf,useInsertionEffect:Ud,useLayoutEffect:Vd,useMemo:th,useReducer:Lh,useRef:Nd,useState:function(){return Lh(va)},useDebugValue:Lu,useDeferredValue:function(i){var s=Is();return Wr===null?s.memoizedState=i:$d(s,Wr.memoizedState,i)},useTransition:function(){var i=Lh(va)[0],s=Is().memoizedState;return[i,s]},useMutableSource:ai,useSyncExternalStore:Dh,useId:Yf,unstable_isNewReconciler:!1};function Xs(i,s){if(i&&i.defaultProps){s=be({},s),i=i.defaultProps;for(var m in i)s[m]===void 0&&(s[m]=i[m]);return s}return s}function Gh(i,s,m,S){s=i.memoizedState,m=m(S,s),m=m==null?s:be({},s,m),i.memoizedState=m,i.lanes===0&&(i.updateQueue.baseState=m)}var Hh={isMounted:function(i){return(i=i._reactInternals)?Un(i)===i:!1},enqueueSetState:function(i,s,m){i=i._reactInternals;var S=Lo(),F=iu(i),Z=qo(S,F);Z.payload=s,m!=null&&(Z.callback=m),s=Ws(i,Z,F),s!==null&&(xa(s,i,F,S),eo(s,i,F))},enqueueReplaceState:function(i,s,m){i=i._reactInternals;var S=Lo(),F=iu(i),Z=qo(S,F);Z.tag=1,Z.payload=s,m!=null&&(Z.callback=m),s=Ws(i,Z,F),s!==null&&(xa(s,i,F,S),eo(s,i,F))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var m=Lo(),S=iu(i),F=qo(m,S);F.tag=2,s!=null&&(F.callback=s),s=Ws(i,F,S),s!==null&&(xa(s,i,S,m),eo(s,i,S))}};function Zh(i,s,m,S,F,Z,Se){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(S,Z,Se):s.prototype&&s.prototype.isPureReactComponent?!wt(m,S)||!wt(F,Z):!0}function Hd(i,s,m){var S=!1,F=$a,Z=s.contextType;return typeof Z=="object"&&Z!==null?Z=zr(Z):(F=ji(s)?Wo:Sr.current,S=s.contextTypes,Z=(S=S!=null)?ga(i,F):$a),s=new s(m,Z),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Hh,i.stateNode=s,s._reactInternals=i,S&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=F,i.__reactInternalMemoizedMaskedChildContext=Z),s}function Wh(i,s,m,S){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(m,S),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(m,S),s.state!==i&&Hh.enqueueReplaceState(s,s.state,null)}function Du(i,s,m,S){var F=i.stateNode;F.props=m,F.state=i.memoizedState,F.refs={},Ga(i);var Z=s.contextType;typeof Z=="object"&&Z!==null?F.context=zr(Z):(Z=ji(s)?Wo:Sr.current,F.context=ga(i,Z)),F.state=i.memoizedState,Z=s.getDerivedStateFromProps,typeof Z=="function"&&(Gh(i,s,Z,m),F.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(s=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),s!==F.state&&Hh.enqueueReplaceState(F,F.state,null),bs(i,m,F,S),F.state=i.memoizedState),typeof F.componentDidMount=="function"&&(i.flags|=4194308)}function Gi(i,s){try{var m="",S=s;do m+=Ke(S),S=S.return;while(S);var F=m}catch(Z){F=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:i,source:s,stack:F,digest:null}}function qh(i,s,m){return{value:i,source:null,stack:m??null,digest:s??null}}function nh(i,s){try{console.error(s.value)}catch(m){setTimeout(function(){throw m})}}var Bm=typeof WeakMap=="function"?WeakMap:Map;function Zd(i,s,m){m=qo(-1,m),m.tag=3,m.payload={element:null};var S=s.value;return m.callback=function(){dh||(dh=!0,od=S),nh(i,s)},m}function Qf(i,s,m){m=qo(-1,m),m.tag=3;var S=i.type.getDerivedStateFromError;if(typeof S=="function"){var F=s.value;m.payload=function(){return S(F)},m.callback=function(){nh(i,s)}}var Z=i.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(m.callback=function(){nh(i,s),typeof S!="function"&&(or===null?or=new Set([this]):or.add(this));var Se=s.stack;this.componentDidCatch(s.value,{componentStack:Se!==null?Se:""})}),m}function ep(i,s,m){var S=i.pingCache;if(S===null){S=i.pingCache=new Bm;var F=new Set;S.set(s,F)}else F=S.get(s),F===void 0&&(F=new Set,S.set(s,F));F.has(m)||(F.add(m),i=Hm.bind(null,i,s,m),s.then(i,i))}function tp(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function np(i,s,m,S,F){return i.mode&1?(i.flags|=65536,i.lanes=F,i):(i===s?i.flags|=65536:(i.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(s=qo(-1,1),s.tag=2,Ws(m,s,1))),m.lanes|=1),i)}var rp=Me.ReactCurrentOwner,jo=!1;function vi(i,s,m,S){s.child=i===null?On(s,null,m,S):Yt(s,i.child,m,S)}function yc(i,s,m,S,F){m=m.render;var Z=s.ref;return gi(s,F),S=ya(i,s,m,S,Z,F),m=Ts(),i!==null&&!jo?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~F,Cs(i,s,F)):($e&&m&&we(s),s.flags|=1,vi(i,s,S,F),s.child)}function ip(i,s,m,S,F){if(i===null){var Z=m.type;return typeof Z=="function"&&!_h(Z)&&Z.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(s.tag=15,s.type=Z,op(i,s,Z,S,F)):(i=xh(m.type,null,S,s,s.mode,F),i.ref=s.ref,i.return=s,s.child=i)}if(Z=i.child,!(i.lanes&F)){var Se=Z.memoizedProps;if(m=m.compare,m=m!==null?m:wt,m(Se,S)&&i.ref===s.ref)return Cs(i,s,F)}return s.flags|=1,i=ou(Z,S),i.ref=s.ref,i.return=s,s.child=i}function op(i,s,m,S,F){if(i!==null){var Z=i.memoizedProps;if(wt(Z,S)&&i.ref===s.ref)if(jo=!1,s.pendingProps=S=Z,(i.lanes&F)!==0)i.flags&131072&&(jo=!0);else return s.lanes=i.lanes,Cs(i,s,F)}return Wd(i,s,m,S,F)}function sp(i,s,m){var S=s.pendingProps,F=S.children,Z=i!==null?i.memoizedState:null;if(S.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(xc,vo),vo|=m;else{if(!(m&1073741824))return i=Z!==null?Z.baseLanes|m:m,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,kr(xc,vo),vo|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=Z!==null?Z.baseLanes:m,kr(xc,vo),vo|=S}else Z!==null?(S=Z.baseLanes|m,s.memoizedState=null):S=m,kr(xc,vo),vo|=S;return vi(i,s,F,m),s.child}function ap(i,s){var m=s.ref;(i===null&&m!==null||i!==null&&i.ref!==m)&&(s.flags|=512,s.flags|=2097152)}function Wd(i,s,m,S,F){var Z=ji(m)?Wo:Sr.current;return Z=ga(s,Z),gi(s,F),m=ya(i,s,m,S,Z,F),S=Ts(),i!==null&&!jo?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~F,Cs(i,s,F)):($e&&S&&we(s),s.flags|=1,vi(i,s,m,F),s.child)}function lp(i,s,m,S,F){if(ji(m)){var Z=!0;ko(s)}else Z=!1;if(gi(s,F),s.stateNode===null)oh(i,s),Hd(s,m,S),Du(s,m,S,F),S=!0;else if(i===null){var Se=s.stateNode,Xe=s.memoizedProps;Se.props=Xe;var ot=Se.context,bt=m.contextType;typeof bt=="object"&&bt!==null?bt=zr(bt):(bt=ji(m)?Wo:Sr.current,bt=ga(s,bt));var jt=m.getDerivedStateFromProps,Ut=typeof jt=="function"||typeof Se.getSnapshotBeforeUpdate=="function";Ut||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Xe!==S||ot!==bt)&&Wh(s,Se,S,bt),ws=!1;var Ft=s.memoizedState;Se.state=Ft,bs(s,S,Se,F),ot=s.memoizedState,Xe!==S||Ft!==ot||tr.current||ws?(typeof jt=="function"&&(Gh(s,m,jt,S),ot=s.memoizedState),(Xe=ws||Zh(s,m,Xe,S,Ft,ot,bt))?(Ut||typeof Se.UNSAFE_componentWillMount!="function"&&typeof Se.componentWillMount!="function"||(typeof Se.componentWillMount=="function"&&Se.componentWillMount(),typeof Se.UNSAFE_componentWillMount=="function"&&Se.UNSAFE_componentWillMount()),typeof Se.componentDidMount=="function"&&(s.flags|=4194308)):(typeof Se.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=S,s.memoizedState=ot),Se.props=S,Se.state=ot,Se.context=bt,S=Xe):(typeof Se.componentDidMount=="function"&&(s.flags|=4194308),S=!1)}else{Se=s.stateNode,Ro(i,s),Xe=s.memoizedProps,bt=s.type===s.elementType?Xe:Xs(s.type,Xe),Se.props=bt,Ut=s.pendingProps,Ft=Se.context,ot=m.contextType,typeof ot=="object"&&ot!==null?ot=zr(ot):(ot=ji(m)?Wo:Sr.current,ot=ga(s,ot));var nn=m.getDerivedStateFromProps;(jt=typeof nn=="function"||typeof Se.getSnapshotBeforeUpdate=="function")||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Xe!==Ut||Ft!==ot)&&Wh(s,Se,S,ot),ws=!1,Ft=s.memoizedState,Se.state=Ft,bs(s,S,Se,F);var mn=s.memoizedState;Xe!==Ut||Ft!==mn||tr.current||ws?(typeof nn=="function"&&(Gh(s,m,nn,S),mn=s.memoizedState),(bt=ws||Zh(s,m,bt,S,Ft,mn,ot)||!1)?(jt||typeof Se.UNSAFE_componentWillUpdate!="function"&&typeof Se.componentWillUpdate!="function"||(typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate(S,mn,ot),typeof Se.UNSAFE_componentWillUpdate=="function"&&Se.UNSAFE_componentWillUpdate(S,mn,ot)),typeof Se.componentDidUpdate=="function"&&(s.flags|=4),typeof Se.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof Se.componentDidUpdate!="function"||Xe===i.memoizedProps&&Ft===i.memoizedState||(s.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Xe===i.memoizedProps&&Ft===i.memoizedState||(s.flags|=1024),s.memoizedProps=S,s.memoizedState=mn),Se.props=S,Se.state=mn,Se.context=ot,S=bt):(typeof Se.componentDidUpdate!="function"||Xe===i.memoizedProps&&Ft===i.memoizedState||(s.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Xe===i.memoizedProps&&Ft===i.memoizedState||(s.flags|=1024),S=!1)}return qd(i,s,m,S,Z,F)}function qd(i,s,m,S,F,Z){ap(i,s);var Se=(s.flags&128)!==0;if(!S&&!Se)return F&&Zl(s,m,!1),Cs(i,s,Z);S=s.stateNode,rp.current=s;var Xe=Se&&typeof m.getDerivedStateFromError!="function"?null:S.render();return s.flags|=1,i!==null&&Se?(s.child=Yt(s,i.child,null,Z),s.child=Yt(s,null,Xe,Z)):vi(i,s,Xe,Z),s.memoizedState=S.state,F&&Zl(s,m,!0),s.child}function Xh(i){var s=i.stateNode;s.pendingContext?Gl(i,s.pendingContext,s.pendingContext!==s.context):s.context&&Gl(i,s.context,!1),Ha(i,s.containerInfo)}function up(i,s,m,S,F){return Gt(),tn(F),s.flags|=256,vi(i,s,m,S),s.child}var Ql={dehydrated:null,treeContext:null,retryLane:0};function Xd(i){return{baseLanes:i,cachePool:null,transitions:null}}function ri(i,s,m){var S=s.pendingProps,F=Ur.current,Z=!1,Se=(s.flags&128)!==0,Xe;if((Xe=Se)||(Xe=i!==null&&i.memoizedState===null?!1:(F&2)!==0),Xe?(Z=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(F|=1),kr(Ur,F&1),i===null)return ut(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(s.mode&1?i.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(Se=S.children,i=S.fallback,Z?(S=s.mode,Z=s.child,Se={mode:"hidden",children:Se},!(S&1)&&Z!==null?(Z.childLanes=0,Z.pendingProps=Se):Z=au(Se,S,0,null),i=su(i,S,m,null),Z.return=s,i.return=s,Z.sibling=i,s.child=Z,s.child.memoizedState=Xd(m),s.memoizedState=Ql,i):vc(s,Se));if(F=i.memoizedState,F!==null&&(Xe=F.dehydrated,Xe!==null))return Kh(i,s,Se,S,Xe,F,m);if(Z){Z=S.fallback,Se=s.mode,F=i.child,Xe=F.sibling;var ot={mode:"hidden",children:S.children};return!(Se&1)&&s.child!==F?(S=s.child,S.childLanes=0,S.pendingProps=ot,s.deletions=null):(S=ou(F,ot),S.subtreeFlags=F.subtreeFlags&14680064),Xe!==null?Z=ou(Xe,Z):(Z=su(Z,Se,m,null),Z.flags|=2),Z.return=s,S.return=s,S.sibling=Z,s.child=S,S=Z,Z=s.child,Se=i.child.memoizedState,Se=Se===null?Xd(m):{baseLanes:Se.baseLanes|m,cachePool:null,transitions:Se.transitions},Z.memoizedState=Se,Z.childLanes=i.childLanes&~m,s.memoizedState=Ql,S}return Z=i.child,i=Z.sibling,S=ou(Z,{mode:"visible",children:S.children}),!(s.mode&1)&&(S.lanes=m),S.return=s,S.sibling=null,i!==null&&(m=s.deletions,m===null?(s.deletions=[i],s.flags|=16):m.push(i)),s.child=S,s.memoizedState=null,S}function vc(i,s){return s=au({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function rh(i,s,m,S){return S!==null&&tn(S),Yt(s,i.child,null,m),i=vc(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Kh(i,s,m,S,F,Z,Se){if(m)return s.flags&256?(s.flags&=-257,S=qh(Error(p(422))),rh(i,s,Se,S)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(Z=S.fallback,F=s.mode,S=au({mode:"visible",children:S.children},F,0,null),Z=su(Z,F,Se,null),Z.flags|=2,S.return=s,Z.return=s,S.sibling=Z,s.child=S,s.mode&1&&Yt(s,i.child,null,Se),s.child.memoizedState=Xd(Se),s.memoizedState=Ql,Z);if(!(s.mode&1))return rh(i,s,Se,null);if(F.data==="$!"){if(S=F.nextSibling&&F.nextSibling.dataset,S)var Xe=S.dgst;return S=Xe,Z=Error(p(419)),S=qh(Z,S,void 0),rh(i,s,Se,S)}if(Xe=(Se&i.childLanes)!==0,jo||Xe){if(S=Bi,S!==null){switch(Se&-Se){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=F&(S.suspendedLanes|Se)?0:F,F!==0&&F!==Z.retryLane&&(Z.retryLane=F,po(i,F),xa(S,i,F,-1))}return ld(),S=qh(Error(p(421))),rh(i,s,Se,S)}return F.data==="$?"?(s.flags|=128,s.child=i.child,s=Tp.bind(null,i),F._reactRetry=s,null):(i=Z.treeContext,Ne=ys(F.nextSibling),je=s,$e=!0,qe=null,i!==null&&(g[I++]=O,g[I++]=X,g[I++]=A,O=i.id,X=i.overflow,A=s),s=vc(s,S.children),s.flags|=4096,s)}function ih(i,s,m){i.lanes|=s;var S=i.alternate;S!==null&&(S.lanes|=s),Tr(i.return,s,m)}function Bu(i,s,m,S,F){var Z=i.memoizedState;Z===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:F}:(Z.isBackwards=s,Z.rendering=null,Z.renderingStartTime=0,Z.last=S,Z.tail=m,Z.tailMode=F)}function Kd(i,s,m){var S=s.pendingProps,F=S.revealOrder,Z=S.tail;if(vi(i,s,S.children,m),S=Ur.current,S&2)S=S&1|2,s.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ih(i,m,s);else if(i.tag===19)ih(i,m,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}S&=1}if(kr(Ur,S),!(s.mode&1))s.memoizedState=null;else switch(F){case"forwards":for(m=s.child,F=null;m!==null;)i=m.alternate,i!==null&&Es(i)===null&&(F=m),m=m.sibling;m=F,m===null?(F=s.child,s.child=null):(F=m.sibling,m.sibling=null),Bu(s,!1,F,m,Z);break;case"backwards":for(m=null,F=s.child,s.child=null;F!==null;){if(i=F.alternate,i!==null&&Es(i)===null){s.child=F;break}i=F.sibling,F.sibling=m,m=F,F=i}Bu(s,!0,m,null,Z);break;case"together":Bu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function oh(i,s){!(s.mode&1)&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Cs(i,s,m){if(i!==null&&(s.dependencies=i.dependencies),Uu|=s.lanes,!(m&s.childLanes))return null;if(i!==null&&s.child!==i.child)throw Error(p(153));if(s.child!==null){for(i=s.child,m=ou(i,i.pendingProps),s.child=m,m.return=s;i.sibling!==null;)i=i.sibling,m=m.sibling=ou(i,i.pendingProps),m.return=s;m.sibling=null}return s.child}function Yd(i,s,m){switch(s.tag){case 3:Xh(s),Gt();break;case 5:Wc(s);break;case 1:ji(s.type)&&ko(s);break;case 4:Ha(s,s.stateNode.containerInfo);break;case 10:var S=s.type._context,F=s.memoizedProps.value;kr(wr,S._currentValue),S._currentValue=F;break;case 13:if(S=s.memoizedState,S!==null)return S.dehydrated!==null?(kr(Ur,Ur.current&1),s.flags|=128,null):m&s.child.childLanes?ri(i,s,m):(kr(Ur,Ur.current&1),i=Cs(i,s,m),i!==null?i.sibling:null);kr(Ur,Ur.current&1);break;case 19:if(S=(m&s.childLanes)!==0,i.flags&128){if(S)return Kd(i,s,m);s.flags|=128}if(F=s.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),kr(Ur,Ur.current),S)break;return null;case 22:case 23:return s.lanes=0,sp(i,s,m)}return Cs(i,s,m)}var Yh,sh,Jh,Jd;Yh=function(i,s){for(var m=s.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break;for(;m.sibling===null;){if(m.return===null||m.return===s)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},sh=function(){},Jh=function(i,s,m,S){var F=i.memoizedProps;if(F!==S){i=s.stateNode,Oo(jr.current);var Z=null;switch(m){case"input":F=cn(i,F),S=cn(i,S),Z=[];break;case"select":F=be({},F,{value:void 0}),S=be({},S,{value:void 0}),Z=[];break;case"textarea":F=H(i,F),S=H(i,S),Z=[];break;default:typeof F.onClick!="function"&&typeof S.onClick=="function"&&(i.onclick=fo)}zn(m,S);var Se;m=null;for(bt in F)if(!S.hasOwnProperty(bt)&&F.hasOwnProperty(bt)&&F[bt]!=null)if(bt==="style"){var Xe=F[bt];for(Se in Xe)Xe.hasOwnProperty(Se)&&(m||(m={}),m[Se]="")}else bt!=="dangerouslySetInnerHTML"&&bt!=="children"&&bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&bt!=="autoFocus"&&(x.hasOwnProperty(bt)?Z||(Z=[]):(Z=Z||[]).push(bt,null));for(bt in S){var ot=S[bt];if(Xe=F!=null?F[bt]:void 0,S.hasOwnProperty(bt)&&ot!==Xe&&(ot!=null||Xe!=null))if(bt==="style")if(Xe){for(Se in Xe)!Xe.hasOwnProperty(Se)||ot&&ot.hasOwnProperty(Se)||(m||(m={}),m[Se]="");for(Se in ot)ot.hasOwnProperty(Se)&&Xe[Se]!==ot[Se]&&(m||(m={}),m[Se]=ot[Se])}else m||(Z||(Z=[]),Z.push(bt,m)),m=ot;else bt==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,Xe=Xe?Xe.__html:void 0,ot!=null&&Xe!==ot&&(Z=Z||[]).push(bt,ot)):bt==="children"?typeof ot!="string"&&typeof ot!="number"||(Z=Z||[]).push(bt,""+ot):bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&(x.hasOwnProperty(bt)?(ot!=null&&bt==="onScroll"&&Pr("scroll",i),Z||Xe===ot||(Z=[])):(Z=Z||[]).push(bt,ot))}m&&(Z=Z||[]).push("style",m);var bt=Z;(s.updateQueue=bt)&&(s.flags|=4)}},Jd=function(i,s,m,S){m!==S&&(s.flags|=4)};function _c(i,s){if(!$e)switch(i.tailMode){case"hidden":s=i.tail;for(var m=null;s!==null;)s.alternate!==null&&(m=s),s=s.sibling;m===null?i.tail=null:m.sibling=null;break;case"collapsed":m=i.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:S.sibling=null}}function go(i){var s=i.alternate!==null&&i.alternate.child===i.child,m=0,S=0;if(s)for(var F=i.child;F!==null;)m|=F.lanes|F.childLanes,S|=F.subtreeFlags&14680064,S|=F.flags&14680064,F.return=i,F=F.sibling;else for(F=i.child;F!==null;)m|=F.lanes|F.childLanes,S|=F.subtreeFlags,S|=F.flags,F.return=i,F=F.sibling;return i.subtreeFlags|=S,i.childLanes=m,s}function Nm(i,s,m){var S=s.pendingProps;switch(Ae(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return go(s),null;case 1:return ji(s.type)&&Fu(),go(s),null;case 3:return S=s.stateNode,Ss(),Ar(tr),Ar(Sr),ql(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(i===null||i.child===null)&&(At(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,qe!==null&&(nf(qe),qe=null))),sh(i,s),go(s),null;case 5:qc(s);var F=Oo(Kn.current);if(m=s.type,i!==null&&s.stateNode!=null)Jh(i,s,m,S,F),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!S){if(s.stateNode===null)throw Error(p(166));return go(s),null}if(i=Oo(jr.current),At(s)){S=s.stateNode,m=s.type;var Z=s.memoizedProps;switch(S[Qi]=s,S[Zs]=Z,i=(s.mode&1)!==0,m){case"dialog":Pr("cancel",S),Pr("close",S);break;case"iframe":case"object":case"embed":Pr("load",S);break;case"video":case"audio":for(F=0;F<Ua.length;F++)Pr(Ua[F],S);break;case"source":Pr("error",S);break;case"img":case"image":case"link":Pr("error",S),Pr("load",S);break;case"details":Pr("toggle",S);break;case"input":Tn(S,Z),Pr("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!Z.multiple},Pr("invalid",S);break;case"textarea":Ce(S,Z),Pr("invalid",S)}zn(m,Z),F=null;for(var Se in Z)if(Z.hasOwnProperty(Se)){var Xe=Z[Se];Se==="children"?typeof Xe=="string"?S.textContent!==Xe&&(Z.suppressHydrationWarning!==!0&&Vl(S.textContent,Xe,i),F=["children",Xe]):typeof Xe=="number"&&S.textContent!==""+Xe&&(Z.suppressHydrationWarning!==!0&&Vl(S.textContent,Xe,i),F=["children",""+Xe]):x.hasOwnProperty(Se)&&Xe!=null&&Se==="onScroll"&&Pr("scroll",S)}switch(m){case"input":It(S),hn(S,Z,!0);break;case"textarea":It(S),ct(S);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(S.onclick=fo)}S=F,s.updateQueue=S,S!==null&&(s.flags|=4)}else{Se=F.nodeType===9?F:F.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Et(m)),i==="http://www.w3.org/1999/xhtml"?m==="script"?(i=Se.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof S.is=="string"?i=Se.createElement(m,{is:S.is}):(i=Se.createElement(m),m==="select"&&(Se=i,S.multiple?Se.multiple=!0:S.size&&(Se.size=S.size))):i=Se.createElementNS(i,m),i[Qi]=s,i[Zs]=S,Yh(i,s,!1,!1),s.stateNode=i;e:{switch(Se=Zn(m,S),m){case"dialog":Pr("cancel",i),Pr("close",i),F=S;break;case"iframe":case"object":case"embed":Pr("load",i),F=S;break;case"video":case"audio":for(F=0;F<Ua.length;F++)Pr(Ua[F],i);F=S;break;case"source":Pr("error",i),F=S;break;case"img":case"image":case"link":Pr("error",i),Pr("load",i),F=S;break;case"details":Pr("toggle",i),F=S;break;case"input":Tn(i,S),F=cn(i,S),Pr("invalid",i);break;case"option":F=S;break;case"select":i._wrapperState={wasMultiple:!!S.multiple},F=be({},S,{value:void 0}),Pr("invalid",i);break;case"textarea":Ce(i,S),F=H(i,S),Pr("invalid",i);break;default:F=S}zn(m,F),Xe=F;for(Z in Xe)if(Xe.hasOwnProperty(Z)){var ot=Xe[Z];Z==="style"?Ot(i,ot):Z==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&q(i,ot)):Z==="children"?typeof ot=="string"?(m!=="textarea"||ot!=="")&&Re(i,ot):typeof ot=="number"&&Re(i,""+ot):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(x.hasOwnProperty(Z)?ot!=null&&Z==="onScroll"&&Pr("scroll",i):ot!=null&&ve(i,Z,ot,Se))}switch(m){case"input":It(i),hn(i,S,!1);break;case"textarea":It(i),ct(i);break;case"option":S.value!=null&&i.setAttribute("value",""+_t(S.value));break;case"select":i.multiple=!!S.multiple,Z=S.value,Z!=null?G(i,!!S.multiple,Z,!1):S.defaultValue!=null&&G(i,!!S.multiple,S.defaultValue,!0);break;default:typeof F.onClick=="function"&&(i.onclick=fo)}switch(m){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return go(s),null;case 6:if(i&&s.stateNode!=null)Jd(i,s,i.memoizedProps,S);else{if(typeof S!="string"&&s.stateNode===null)throw Error(p(166));if(m=Oo(Kn.current),Oo(jr.current),At(s)){if(S=s.stateNode,m=s.memoizedProps,S[Qi]=s,(Z=S.nodeValue!==m)&&(i=je,i!==null))switch(i.tag){case 3:Vl(S.nodeValue,m,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Vl(S.nodeValue,m,(i.mode&1)!==0)}Z&&(s.flags|=4)}else S=(m.nodeType===9?m:m.ownerDocument).createTextNode(S),S[Qi]=s,s.stateNode=S}return go(s),null;case 13:if(Ar(Ur),S=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if($e&&Ne!==null&&s.mode&1&&!(s.flags&128))Dt(),Gt(),s.flags|=98560,Z=!1;else if(Z=At(s),S!==null&&S.dehydrated!==null){if(i===null){if(!Z)throw Error(p(318));if(Z=s.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(p(317));Z[Qi]=s}else Gt(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;go(s),Z=!1}else qe!==null&&(nf(qe),qe=null),Z=!0;if(!Z)return s.flags&65536?s:null}return s.flags&128?(s.lanes=m,s):(S=S!==null,S!==(i!==null&&i.memoizedState!==null)&&S&&(s.child.flags|=8192,s.mode&1&&(i===null||Ur.current&1?Ai===0&&(Ai=3):ld())),s.updateQueue!==null&&(s.flags|=4),go(s),null);case 4:return Ss(),sh(i,s),i===null&&da(s.stateNode.containerInfo),go(s),null;case 10:return zo(s.type._context),go(s),null;case 17:return ji(s.type)&&Fu(),go(s),null;case 19:if(Ar(Ur),Z=s.memoizedState,Z===null)return go(s),null;if(S=(s.flags&128)!==0,Se=Z.rendering,Se===null)if(S)_c(Z,!1);else{if(Ai!==0||i!==null&&i.flags&128)for(i=s.child;i!==null;){if(Se=Es(i),Se!==null){for(s.flags|=128,_c(Z,!1),S=Se.updateQueue,S!==null&&(s.updateQueue=S,s.flags|=4),s.subtreeFlags=0,S=m,m=s.child;m!==null;)Z=m,i=S,Z.flags&=14680066,Se=Z.alternate,Se===null?(Z.childLanes=0,Z.lanes=i,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=Se.childLanes,Z.lanes=Se.lanes,Z.child=Se.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=Se.memoizedProps,Z.memoizedState=Se.memoizedState,Z.updateQueue=Se.updateQueue,Z.type=Se.type,i=Se.dependencies,Z.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),m=m.sibling;return kr(Ur,Ur.current&1|2),s.child}i=i.sibling}Z.tail!==null&&Pn()>Vr&&(s.flags|=128,S=!0,_c(Z,!1),s.lanes=4194304)}else{if(!S)if(i=Es(Se),i!==null){if(s.flags|=128,S=!0,m=i.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),_c(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!Se.alternate&&!$e)return go(s),null}else 2*Pn()-Z.renderingStartTime>Vr&&m!==1073741824&&(s.flags|=128,S=!0,_c(Z,!1),s.lanes=4194304);Z.isBackwards?(Se.sibling=s.child,s.child=Se):(m=Z.last,m!==null?m.sibling=Se:s.child=Se,Z.last=Se)}return Z.tail!==null?(s=Z.tail,Z.rendering=s,Z.tail=s.sibling,Z.renderingStartTime=Pn(),s.sibling=null,m=Ur.current,kr(Ur,S?m&1|2:m&1),s):(go(s),null);case 22:case 23:return mh(),S=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==S&&(s.flags|=8192),S&&s.mode&1?vo&1073741824&&(go(s),s.subtreeFlags&6&&(s.flags|=8192)):go(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Um(i,s){switch(Ae(s),s.tag){case 1:return ji(s.type)&&Fu(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ss(),Ar(tr),Ar(Sr),ql(),i=s.flags,i&65536&&!(i&128)?(s.flags=i&-65537|128,s):null;case 5:return qc(s),null;case 13:if(Ar(Ur),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Gt()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Ar(Ur),null;case 4:return Ss(),null;case 10:return zo(s.type._context),null;case 22:case 23:return mh(),null;case 24:return null;default:return null}}var Qh=!1,yo=!1,eu=typeof WeakSet=="function"?WeakSet:Set,_n=null;function Nu(i,s){var m=i.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(S){qr(i,s,S)}else m.current=null}function tu(i,s,m){try{m()}catch(S){qr(i,s,S)}}var cp=!1;function Vm(i,s){if(pa=oa,i=Sn(),Ln(i)){if("selectionStart"in i)var m={start:i.selectionStart,end:i.selectionEnd};else e:{m=(m=i.ownerDocument)&&m.defaultView||window;var S=m.getSelection&&m.getSelection();if(S&&S.rangeCount!==0){m=S.anchorNode;var F=S.anchorOffset,Z=S.focusNode;S=S.focusOffset;try{m.nodeType,Z.nodeType}catch{m=null;break e}var Se=0,Xe=-1,ot=-1,bt=0,jt=0,Ut=i,Ft=null;t:for(;;){for(var nn;Ut!==m||F!==0&&Ut.nodeType!==3||(Xe=Se+F),Ut!==Z||S!==0&&Ut.nodeType!==3||(ot=Se+S),Ut.nodeType===3&&(Se+=Ut.nodeValue.length),(nn=Ut.firstChild)!==null;)Ft=Ut,Ut=nn;for(;;){if(Ut===i)break t;if(Ft===m&&++bt===F&&(Xe=Se),Ft===Z&&++jt===S&&(ot=Se),(nn=Ut.nextSibling)!==null)break;Ut=Ft,Ft=Ut.parentNode}Ut=nn}m=Xe===-1||ot===-1?null:{start:Xe,end:ot}}else m=null}m=m||{start:0,end:0}}else m=null;for($c={focusedElem:i,selectionRange:m},oa=!1,_n=s;_n!==null;)if(s=_n,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,_n=i;else for(;_n!==null;){s=_n;try{var mn=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(mn!==null){var bn=mn.memoizedProps,fi=mn.memoizedState,vt=s.stateNode,lt=vt.getSnapshotBeforeUpdate(s.elementType===s.type?bn:Xs(s.type,bn),fi);vt.__reactInternalSnapshotBeforeUpdate=lt}break;case 3:var xt=s.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(qt){qr(s,s.return,qt)}if(i=s.sibling,i!==null){i.return=s.return,_n=i;break}_n=s.return}return mn=cp,cp=!1,mn}function ah(i,s,m){var S=s.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var F=S=S.next;do{if((F.tag&i)===i){var Z=F.destroy;F.destroy=void 0,Z!==void 0&&tu(s,m,Z)}F=F.next}while(F!==S)}}function lh(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var m=s=s.next;do{if((m.tag&i)===i){var S=m.create;m.destroy=S()}m=m.next}while(m!==s)}}function ed(i){var s=i.ref;if(s!==null){var m=i.stateNode;switch(i.tag){case 5:i=m;break;default:i=m}typeof s=="function"?s(i):s.current=i}}function hp(i){var s=i.alternate;s!==null&&(i.alternate=null,hp(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[Qi],delete s[Zs],delete s[Yn],delete s[Hc],delete s[Od])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function dp(i){return i.tag===5||i.tag===3||i.tag===4}function fp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||dp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Qd(i,s,m){var S=i.tag;if(S===5||S===6)i=i.stateNode,s?m.nodeType===8?m.parentNode.insertBefore(i,s):m.insertBefore(i,s):(m.nodeType===8?(s=m.parentNode,s.insertBefore(i,m)):(s=m,s.appendChild(i)),m=m._reactRootContainer,m!=null||s.onclick!==null||(s.onclick=fo));else if(S!==4&&(i=i.child,i!==null))for(Qd(i,s,m),i=i.sibling;i!==null;)Qd(i,s,m),i=i.sibling}function uh(i,s,m){var S=i.tag;if(S===5||S===6)i=i.stateNode,s?m.insertBefore(i,s):m.appendChild(i);else if(S!==4&&(i=i.child,i!==null))for(uh(i,s,m),i=i.sibling;i!==null;)uh(i,s,m),i=i.sibling}var _i=null,Ps=!1;function nu(i,s,m){for(m=m.child;m!==null;)pp(i,s,m),m=m.sibling}function pp(i,s,m){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(Ei,m)}catch{}switch(m.tag){case 5:yo||Nu(m,s);case 6:var S=_i,F=Ps;_i=null,nu(i,s,m),_i=S,Ps=F,_i!==null&&(Ps?(i=_i,m=m.stateNode,i.nodeType===8?i.parentNode.removeChild(m):i.removeChild(m)):_i.removeChild(m.stateNode));break;case 18:_i!==null&&(Ps?(i=_i,m=m.stateNode,i.nodeType===8?sn(i.parentNode,m):i.nodeType===1&&sn(i,m),us(i)):sn(_i,m.stateNode));break;case 4:S=_i,F=Ps,_i=m.stateNode.containerInfo,Ps=!0,nu(i,s,m),_i=S,Ps=F;break;case 0:case 11:case 14:case 15:if(!yo&&(S=m.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){F=S=S.next;do{var Z=F,Se=Z.destroy;Z=Z.tag,Se!==void 0&&(Z&2||Z&4)&&tu(m,s,Se),F=F.next}while(F!==S)}nu(i,s,m);break;case 1:if(!yo&&(Nu(m,s),S=m.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=m.memoizedProps,S.state=m.memoizedState,S.componentWillUnmount()}catch(Xe){qr(m,s,Xe)}nu(i,s,m);break;case 21:nu(i,s,m);break;case 22:m.mode&1?(yo=(S=yo)||m.memoizedState!==null,nu(i,s,m),yo=S):nu(i,s,m);break;default:nu(i,s,m)}}function ef(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var m=i.stateNode;m===null&&(m=i.stateNode=new eu),s.forEach(function(S){var F=Ip.bind(null,i,S);m.has(S)||(m.add(S),S.then(F,F))})}}function _a(i,s){var m=s.deletions;if(m!==null)for(var S=0;S<m.length;S++){var F=m[S];try{var Z=i,Se=s,Xe=Se;e:for(;Xe!==null;){switch(Xe.tag){case 5:_i=Xe.stateNode,Ps=!1;break e;case 3:_i=Xe.stateNode.containerInfo,Ps=!0;break e;case 4:_i=Xe.stateNode.containerInfo,Ps=!0;break e}Xe=Xe.return}if(_i===null)throw Error(p(160));pp(Z,Se,F),_i=null,Ps=!1;var ot=F.alternate;ot!==null&&(ot.return=null),F.return=null}catch(bt){qr(F,s,bt)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)mp(s,i),s=s.sibling}function mp(i,s){var m=i.alternate,S=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(_a(s,i),Ko(i),S&4){try{ah(3,i,i.return),lh(3,i)}catch(bn){qr(i,i.return,bn)}try{ah(5,i,i.return)}catch(bn){qr(i,i.return,bn)}}break;case 1:_a(s,i),Ko(i),S&512&&m!==null&&Nu(m,m.return);break;case 5:if(_a(s,i),Ko(i),S&512&&m!==null&&Nu(m,m.return),i.flags&32){var F=i.stateNode;try{Re(F,"")}catch(bn){qr(i,i.return,bn)}}if(S&4&&(F=i.stateNode,F!=null)){var Z=i.memoizedProps,Se=m!==null?m.memoizedProps:Z,Xe=i.type,ot=i.updateQueue;if(i.updateQueue=null,ot!==null)try{Xe==="input"&&Z.type==="radio"&&Z.name!=null&&at(F,Z),Zn(Xe,Se);var bt=Zn(Xe,Z);for(Se=0;Se<ot.length;Se+=2){var jt=ot[Se],Ut=ot[Se+1];jt==="style"?Ot(F,Ut):jt==="dangerouslySetInnerHTML"?q(F,Ut):jt==="children"?Re(F,Ut):ve(F,jt,Ut,bt)}switch(Xe){case"input":kn(F,Z);break;case"textarea":rt(F,Z);break;case"select":var Ft=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!Z.multiple;var nn=Z.value;nn!=null?G(F,!!Z.multiple,nn,!1):Ft!==!!Z.multiple&&(Z.defaultValue!=null?G(F,!!Z.multiple,Z.defaultValue,!0):G(F,!!Z.multiple,Z.multiple?[]:"",!1))}F[Zs]=Z}catch(bn){qr(i,i.return,bn)}}break;case 6:if(_a(s,i),Ko(i),S&4){if(i.stateNode===null)throw Error(p(162));F=i.stateNode,Z=i.memoizedProps;try{F.nodeValue=Z}catch(bn){qr(i,i.return,bn)}}break;case 3:if(_a(s,i),Ko(i),S&4&&m!==null&&m.memoizedState.isDehydrated)try{us(s.containerInfo)}catch(bn){qr(i,i.return,bn)}break;case 4:_a(s,i),Ko(i);break;case 13:_a(s,i),Ko(i),F=i.child,F.flags&8192&&(Z=F.memoizedState!==null,F.stateNode.isHidden=Z,!Z||F.alternate!==null&&F.alternate.memoizedState!==null||(Vu=Pn())),S&4&&ef(i);break;case 22:if(jt=m!==null&&m.memoizedState!==null,i.mode&1?(yo=(bt=yo)||jt,_a(s,i),yo=bt):_a(s,i),Ko(i),S&8192){if(bt=i.memoizedState!==null,(i.stateNode.isHidden=bt)&&!jt&&i.mode&1)for(_n=i,jt=i.child;jt!==null;){for(Ut=_n=jt;_n!==null;){switch(Ft=_n,nn=Ft.child,Ft.tag){case 0:case 11:case 14:case 15:ah(4,Ft,Ft.return);break;case 1:Nu(Ft,Ft.return);var mn=Ft.stateNode;if(typeof mn.componentWillUnmount=="function"){S=Ft,m=Ft.return;try{s=S,mn.props=s.memoizedProps,mn.state=s.memoizedState,mn.componentWillUnmount()}catch(bn){qr(S,m,bn)}}break;case 5:Nu(Ft,Ft.return);break;case 22:if(Ft.memoizedState!==null){_p(Ut);continue}}nn!==null?(nn.return=Ft,_n=nn):_p(Ut)}jt=jt.sibling}e:for(jt=null,Ut=i;;){if(Ut.tag===5){if(jt===null){jt=Ut;try{F=Ut.stateNode,bt?(Z=F.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Xe=Ut.stateNode,ot=Ut.memoizedProps.style,Se=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,Xe.style.display=Qe("display",Se))}catch(bn){qr(i,i.return,bn)}}}else if(Ut.tag===6){if(jt===null)try{Ut.stateNode.nodeValue=bt?"":Ut.memoizedProps}catch(bn){qr(i,i.return,bn)}}else if((Ut.tag!==22&&Ut.tag!==23||Ut.memoizedState===null||Ut===i)&&Ut.child!==null){Ut.child.return=Ut,Ut=Ut.child;continue}if(Ut===i)break e;for(;Ut.sibling===null;){if(Ut.return===null||Ut.return===i)break e;jt===Ut&&(jt=null),Ut=Ut.return}jt===Ut&&(jt=null),Ut.sibling.return=Ut.return,Ut=Ut.sibling}}break;case 19:_a(s,i),Ko(i),S&4&&ef(i);break;case 21:break;default:_a(s,i),Ko(i)}}function Ko(i){var s=i.flags;if(s&2){try{e:{for(var m=i.return;m!==null;){if(dp(m)){var S=m;break e}m=m.return}throw Error(p(160))}switch(S.tag){case 5:var F=S.stateNode;S.flags&32&&(Re(F,""),S.flags&=-33);var Z=fp(i);uh(i,Z,F);break;case 3:case 4:var Se=S.stateNode.containerInfo,Xe=fp(i);Qd(i,Xe,Se);break;default:throw Error(p(161))}}catch(ot){qr(i,i.return,ot)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function gp(i,s,m){_n=i,yp(i)}function yp(i,s,m){for(var S=(i.mode&1)!==0;_n!==null;){var F=_n,Z=F.child;if(F.tag===22&&S){var Se=F.memoizedState!==null||Qh;if(!Se){var Xe=F.alternate,ot=Xe!==null&&Xe.memoizedState!==null||yo;Xe=Qh;var bt=yo;if(Qh=Se,(yo=ot)&&!bt)for(_n=F;_n!==null;)Se=_n,ot=Se.child,Se.tag===22&&Se.memoizedState!==null?xp(F):ot!==null?(ot.return=Se,_n=ot):xp(F);for(;Z!==null;)_n=Z,yp(Z),Z=Z.sibling;_n=F,Qh=Xe,yo=bt}vp(i)}else F.subtreeFlags&8772&&Z!==null?(Z.return=F,_n=Z):vp(i)}}function vp(i){for(;_n!==null;){var s=_n;if(s.flags&8772){var m=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:yo||lh(5,s);break;case 1:var S=s.stateNode;if(s.flags&4&&!yo)if(m===null)S.componentDidMount();else{var F=s.elementType===s.type?m.memoizedProps:Xs(s.type,m.memoizedProps);S.componentDidUpdate(F,m.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var Z=s.updateQueue;Z!==null&&Xo(s,Z,S);break;case 3:var Se=s.updateQueue;if(Se!==null){if(m=null,s.child!==null)switch(s.child.tag){case 5:m=s.child.stateNode;break;case 1:m=s.child.stateNode}Xo(s,Se,m)}break;case 5:var Xe=s.stateNode;if(m===null&&s.flags&4){m=Xe;var ot=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&m.focus();break;case"img":ot.src&&(m.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var bt=s.alternate;if(bt!==null){var jt=bt.memoizedState;if(jt!==null){var Ut=jt.dehydrated;Ut!==null&&us(Ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}yo||s.flags&512&&ed(s)}catch(Ft){qr(s,s.return,Ft)}}if(s===i){_n=null;break}if(m=s.sibling,m!==null){m.return=s.return,_n=m;break}_n=s.return}}function _p(i){for(;_n!==null;){var s=_n;if(s===i){_n=null;break}var m=s.sibling;if(m!==null){m.return=s.return,_n=m;break}_n=s.return}}function xp(i){for(;_n!==null;){var s=_n;try{switch(s.tag){case 0:case 11:case 15:var m=s.return;try{lh(4,s)}catch(ot){qr(s,m,ot)}break;case 1:var S=s.stateNode;if(typeof S.componentDidMount=="function"){var F=s.return;try{S.componentDidMount()}catch(ot){qr(s,F,ot)}}var Z=s.return;try{ed(s)}catch(ot){qr(s,Z,ot)}break;case 5:var Se=s.return;try{ed(s)}catch(ot){qr(s,Se,ot)}}}catch(ot){qr(s,s.return,ot)}if(s===i){_n=null;break}var Xe=s.sibling;if(Xe!==null){Xe.return=s.return,_n=Xe;break}_n=s.return}}var $m=Math.ceil,td=Me.ReactCurrentDispatcher,nd=Me.ReactCurrentOwner,Yo=Me.ReactCurrentBatchConfig,mr=0,Bi=null,xi=null,no=0,vo=0,xc=Va(0),Ai=0,ch=null,Uu=0,rd=0,id=0,hh=null,Jo=null,Vu=0,Vr=1/0,Wa=null,dh=!1,od=null,or=null,wc=!1,pl=null,fh=0,As=0,ru=null,ph=-1,sd=0;function Lo(){return mr&6?Pn():ph!==-1?ph:ph=Pn()}function iu(i){return i.mode&1?mr&2&&no!==0?no&-no:Ht.transition!==null?(sd===0&&(sd=io()),sd):(i=cr,i!==0||(i=window.event,i=i===void 0?16:Ns(i.type)),i):1}function xa(i,s,m,S){if(50<As)throw As=0,ru=null,Error(p(185));na(i,m,S),(!(mr&2)||i!==Bi)&&(i===Bi&&(!(mr&2)&&(rd|=m),Ai===4&&wa(i,no)),Qo(i,S),m===1&&mr===0&&!(s.mode&1)&&(Vr=Pn()+500,En&&y()))}function Qo(i,s){var m=i.callbackNode;El(i,s);var S=Ui(i,i===Bi?no:0);if(S===0)m!==null&&ci(m),i.callbackNode=null,i.callbackPriority=0;else if(s=S&-S,i.callbackPriority!==s){if(m!=null&&ci(m),s===1)i.tag===0?Zc($u.bind(null,i)):Ou($u.bind(null,i)),$l(function(){!(mr&6)&&y()}),m=null;else{switch(el(S)){case 1:m=Xn;break;case 4:m=Jr;break;case 16:m=Si;break;case 536870912:m=qi;break;default:m=Si}m=sf(m,wp.bind(null,i))}i.callbackPriority=s,i.callbackNode=m}}function wp(i,s){if(ph=-1,sd=0,mr&6)throw Error(p(327));var m=i.callbackNode;if(Sa()&&i.callbackNode!==m)return null;var S=Ui(i,i===Bi?no:0);if(S===0)return null;if(S&30||S&i.expiredLanes||s)s=gh(i,S);else{s=S;var F=mr;mr|=2;var Z=Sp();(Bi!==i||no!==s)&&(Wa=null,Vr=Pn()+500,Gu(i,s));do try{rf();break}catch(Xe){bp(i,Xe)}while(!0);Ci(),td.current=Z,mr=F,xi!==null?s=0:(Bi=null,no=0,s=Ai)}if(s!==0){if(s===2&&(F=ls(i),F!==0&&(S=F,s=tf(i,F))),s===1)throw m=ch,Gu(i,0),wa(i,S),Qo(i,Pn()),m;if(s===6)wa(i,S);else{if(F=i.current.alternate,!(S&30)&&!Gm(F)&&(s=gh(i,S),s===2&&(Z=ls(i),Z!==0&&(S=Z,s=tf(i,Z))),s===1))throw m=ch,Gu(i,0),wa(i,S),Qo(i,Pn()),m;switch(i.finishedWork=F,i.finishedLanes=S,s){case 0:case 1:throw Error(p(345));case 2:ba(i,Jo,Wa);break;case 3:if(wa(i,S),(S&130023424)===S&&(s=Vu+500-Pn(),10<s)){if(Ui(i,0)!==0)break;if(F=i.suspendedLanes,(F&S)!==S){Lo(),i.pingedLanes|=i.suspendedLanes&F;break}i.timeoutHandle=uc(ba.bind(null,i,Jo,Wa),s);break}ba(i,Jo,Wa);break;case 4:if(wa(i,S),(S&4194240)===S)break;for(s=i.eventTimes,F=-1;0<S;){var Se=31-fr(S);Z=1<<Se,Se=s[Se],Se>F&&(F=Se),S&=~Z}if(S=F,S=Pn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*$m(S/1960))-S,10<S){i.timeoutHandle=uc(ba.bind(null,i,Jo,Wa),S);break}ba(i,Jo,Wa);break;case 5:ba(i,Jo,Wa);break;default:throw Error(p(329))}}}return Qo(i,Pn()),i.callbackNode===m?wp.bind(null,i):null}function tf(i,s){var m=hh;return i.current.memoizedState.isDehydrated&&(Gu(i,s).flags|=256),i=gh(i,s),i!==2&&(s=Jo,Jo=m,s!==null&&nf(s)),i}function nf(i){Jo===null?Jo=i:Jo.push.apply(Jo,i)}function Gm(i){for(var s=i;;){if(s.flags&16384){var m=s.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var S=0;S<m.length;S++){var F=m[S],Z=F.getSnapshot;F=F.value;try{if(!We(Z(),F))return!1}catch{return!1}}}if(m=s.child,s.subtreeFlags&16384&&m!==null)m.return=s,s=m;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function wa(i,s){for(s&=~id,s&=~rd,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var m=31-fr(s),S=1<<m;i[m]=-1,s&=~S}}function $u(i){if(mr&6)throw Error(p(327));Sa();var s=Ui(i,0);if(!(s&1))return Qo(i,Pn()),null;var m=gh(i,s);if(i.tag!==0&&m===2){var S=ls(i);S!==0&&(s=S,m=tf(i,S))}if(m===1)throw m=ch,Gu(i,0),wa(i,s),Qo(i,Pn()),m;if(m===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,ba(i,Jo,Wa),Qo(i,Pn()),null}function ad(i,s){var m=mr;mr|=1;try{return i(s)}finally{mr=m,mr===0&&(Vr=Pn()+500,En&&y())}}function ml(i){pl!==null&&pl.tag===0&&!(mr&6)&&Sa();var s=mr;mr|=1;var m=Yo.transition,S=cr;try{if(Yo.transition=null,cr=1,i)return i()}finally{cr=S,Yo.transition=m,mr=s,!(mr&6)&&y()}}function mh(){vo=xc.current,Ar(xc)}function Gu(i,s){i.finishedWork=null,i.finishedLanes=0;var m=i.timeoutHandle;if(m!==-1&&(i.timeoutHandle=-1,jh(m)),xi!==null)for(m=xi.return;m!==null;){var S=m;switch(Ae(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Fu();break;case 3:Ss(),Ar(tr),Ar(Sr),ql();break;case 5:qc(S);break;case 4:Ss();break;case 13:Ar(Ur);break;case 19:Ar(Ur);break;case 10:zo(S.type._context);break;case 22:case 23:mh()}m=m.return}if(Bi=i,xi=i=ou(i.current,null),no=vo=s,Ai=0,ch=null,id=rd=Uu=0,Jo=hh=null,ni!==null){for(s=0;s<ni.length;s++)if(m=ni[s],S=m.interleaved,S!==null){m.interleaved=null;var F=S.next,Z=m.pending;if(Z!==null){var Se=Z.next;Z.next=F,S.next=Se}m.pending=S}ni=null}return i}function bp(i,s){do{var m=xi;try{if(Ci(),Za.current=Vh,Xc){for(var S=Ir.memoizedState;S!==null;){var F=S.queue;F!==null&&(F.pending=null),S=S.next}Xc=!1}if(qs=0,yi=Wr=Ir=null,fc=!1,Kc=0,nd.current=null,m===null||m.return===null){Ai=1,ch=s,xi=null;break}e:{var Z=i,Se=m.return,Xe=m,ot=s;if(s=no,Xe.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var bt=ot,jt=Xe,Ut=jt.tag;if(!(jt.mode&1)&&(Ut===0||Ut===11||Ut===15)){var Ft=jt.alternate;Ft?(jt.updateQueue=Ft.updateQueue,jt.memoizedState=Ft.memoizedState,jt.lanes=Ft.lanes):(jt.updateQueue=null,jt.memoizedState=null)}var nn=tp(Se);if(nn!==null){nn.flags&=-257,np(nn,Se,Xe,Z,s),nn.mode&1&&ep(Z,bt,s),s=nn,ot=bt;var mn=s.updateQueue;if(mn===null){var bn=new Set;bn.add(ot),s.updateQueue=bn}else mn.add(ot);break e}else{if(!(s&1)){ep(Z,bt,s),ld();break e}ot=Error(p(426))}}else if($e&&Xe.mode&1){var fi=tp(Se);if(fi!==null){!(fi.flags&65536)&&(fi.flags|=256),np(fi,Se,Xe,Z,s),tn(Gi(ot,Xe));break e}}Z=ot=Gi(ot,Xe),Ai!==4&&(Ai=2),hh===null?hh=[Z]:hh.push(Z),Z=Se;do{switch(Z.tag){case 3:Z.flags|=65536,s&=-s,Z.lanes|=s;var vt=Zd(Z,ot,s);Fo(Z,vt);break e;case 1:Xe=ot;var lt=Z.type,xt=Z.stateNode;if(!(Z.flags&128)&&(typeof lt.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(or===null||!or.has(xt)))){Z.flags|=65536,s&=-s,Z.lanes|=s;var qt=Qf(Z,Xe,s);Fo(Z,qt);break e}}Z=Z.return}while(Z!==null)}gl(m)}catch(In){s=In,xi===m&&m!==null&&(xi=m=m.return);continue}break}while(!0)}function Sp(){var i=td.current;return td.current=Vh,i===null?Vh:i}function ld(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),Bi===null||!(Uu&268435455)&&!(rd&268435455)||wa(Bi,no)}function gh(i,s){var m=mr;mr|=2;var S=Sp();(Bi!==i||no!==s)&&(Wa=null,Gu(i,s));do try{Do();break}catch(F){bp(i,F)}while(!0);if(Ci(),mr=m,td.current=S,xi!==null)throw Error(p(261));return Bi=null,no=0,Ai}function Do(){for(;xi!==null;)of(xi)}function rf(){for(;xi!==null&&!zi();)of(xi)}function of(i){var s=Cp(i.alternate,i,vo);i.memoizedProps=i.pendingProps,s===null?gl(i):xi=s,nd.current=null}function gl(i){var s=i;do{var m=s.alternate;if(i=s.return,s.flags&32768){if(m=Um(m,s),m!==null){m.flags&=32767,xi=m;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ai=6,xi=null;return}}else if(m=Nm(m,s,vo),m!==null){xi=m;return}if(s=s.sibling,s!==null){xi=s;return}xi=s=i}while(s!==null);Ai===0&&(Ai=5)}function ba(i,s,m){var S=cr,F=Yo.transition;try{Yo.transition=null,cr=1,yh(i,s,m,S)}finally{Yo.transition=F,cr=S}return null}function yh(i,s,m,S){do Sa();while(pl!==null);if(mr&6)throw Error(p(327));m=i.finishedWork;var F=i.finishedLanes;if(m===null)return null;if(i.finishedWork=null,i.finishedLanes=0,m===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var Z=m.lanes|m.childLanes;if(Xi(i,Z),i===Bi&&(xi=Bi=null,no=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||wc||(wc=!0,sf(Si,function(){return Sa(),null})),Z=(m.flags&15990)!==0,m.subtreeFlags&15990||Z){Z=Yo.transition,Yo.transition=null;var Se=cr;cr=1;var Xe=mr;mr|=4,nd.current=null,Vm(i,m),mp(m,i),pr($c),oa=!!pa,$c=pa=null,i.current=m,gp(m),as(),mr=Xe,cr=Se,Yo.transition=Z}else i.current=m;if(wc&&(wc=!1,pl=i,fh=F),Z=i.pendingLanes,Z===0&&(or=null),Fi(m.stateNode),Qo(i,Pn()),s!==null)for(S=i.onRecoverableError,m=0;m<s.length;m++)F=s[m],S(F.value,{componentStack:F.stack,digest:F.digest});if(dh)throw dh=!1,i=od,od=null,i;return fh&1&&i.tag!==0&&Sa(),Z=i.pendingLanes,Z&1?i===ru?As++:(As=0,ru=i):As=0,y(),null}function Sa(){if(pl!==null){var i=el(fh),s=Yo.transition,m=cr;try{if(Yo.transition=null,cr=16>i?16:i,pl===null)var S=!1;else{if(i=pl,pl=null,fh=0,mr&6)throw Error(p(331));var F=mr;for(mr|=4,_n=i.current;_n!==null;){var Z=_n,Se=Z.child;if(_n.flags&16){var Xe=Z.deletions;if(Xe!==null){for(var ot=0;ot<Xe.length;ot++){var bt=Xe[ot];for(_n=bt;_n!==null;){var jt=_n;switch(jt.tag){case 0:case 11:case 15:ah(8,jt,Z)}var Ut=jt.child;if(Ut!==null)Ut.return=jt,_n=Ut;else for(;_n!==null;){jt=_n;var Ft=jt.sibling,nn=jt.return;if(hp(jt),jt===bt){_n=null;break}if(Ft!==null){Ft.return=nn,_n=Ft;break}_n=nn}}}var mn=Z.alternate;if(mn!==null){var bn=mn.child;if(bn!==null){mn.child=null;do{var fi=bn.sibling;bn.sibling=null,bn=fi}while(bn!==null)}}_n=Z}}if(Z.subtreeFlags&2064&&Se!==null)Se.return=Z,_n=Se;else e:for(;_n!==null;){if(Z=_n,Z.flags&2048)switch(Z.tag){case 0:case 11:case 15:ah(9,Z,Z.return)}var vt=Z.sibling;if(vt!==null){vt.return=Z.return,_n=vt;break e}_n=Z.return}}var lt=i.current;for(_n=lt;_n!==null;){Se=_n;var xt=Se.child;if(Se.subtreeFlags&2064&&xt!==null)xt.return=Se,_n=xt;else e:for(Se=lt;_n!==null;){if(Xe=_n,Xe.flags&2048)try{switch(Xe.tag){case 0:case 11:case 15:lh(9,Xe)}}catch(In){qr(Xe,Xe.return,In)}if(Xe===Se){_n=null;break e}var qt=Xe.sibling;if(qt!==null){qt.return=Xe.return,_n=qt;break e}_n=Xe.return}}if(mr=F,y(),Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(Ei,i)}catch{}S=!0}return S}finally{cr=m,Yo.transition=s}}return!1}function vh(i,s,m){s=Gi(m,s),s=Zd(i,s,1),i=Ws(i,s,1),s=Lo(),i!==null&&(na(i,1,s),Qo(i,s))}function qr(i,s,m){if(i.tag===3)vh(i,i,m);else for(;s!==null;){if(s.tag===3){vh(s,i,m);break}else if(s.tag===1){var S=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(or===null||!or.has(S))){i=Gi(m,i),i=Qf(s,i,1),s=Ws(s,i,1),i=Lo(),s!==null&&(na(s,1,i),Qo(s,i));break}}s=s.return}}function Hm(i,s,m){var S=i.pingCache;S!==null&&S.delete(s),s=Lo(),i.pingedLanes|=i.suspendedLanes&m,Bi===i&&(no&m)===m&&(Ai===4||Ai===3&&(no&130023424)===no&&500>Pn()-Vu?Gu(i,0):id|=m),Qo(i,s)}function Ep(i,s){s===0&&(i.mode&1?(s=Dr,Dr<<=1,!(Dr&130023424)&&(Dr=4194304)):s=1);var m=Lo();i=po(i,s),i!==null&&(na(i,s,m),Qo(i,m))}function Tp(i){var s=i.memoizedState,m=0;s!==null&&(m=s.retryLane),Ep(i,m)}function Ip(i,s){var m=0;switch(i.tag){case 13:var S=i.stateNode,F=i.memoizedState;F!==null&&(m=F.retryLane);break;case 19:S=i.stateNode;break;default:throw Error(p(314))}S!==null&&S.delete(s),Ep(i,m)}var Cp;Cp=function(i,s,m){if(i!==null)if(i.memoizedProps!==s.pendingProps||tr.current)jo=!0;else{if(!(i.lanes&m)&&!(s.flags&128))return jo=!1,Yd(i,s,m);jo=!!(i.flags&131072)}else jo=!1,$e&&s.flags&1048576&&ae(s,d,s.index);switch(s.lanes=0,s.tag){case 2:var S=s.type;oh(i,s),i=s.pendingProps;var F=ga(s,Sr.current);gi(s,m),F=ya(null,s,S,i,F,m);var Z=Ts();return s.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ji(S)?(Z=!0,ko(s)):Z=!1,s.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,Ga(s),F.updater=Hh,s.stateNode=F,F._reactInternals=s,Du(s,S,i,m),s=qd(null,s,S,!0,Z,m)):(s.tag=0,$e&&Z&&we(s),vi(null,s,F,m),s=s.child),s;case 16:S=s.elementType;e:{switch(oh(i,s),i=s.pendingProps,F=S._init,S=F(S._payload),s.type=S,F=s.tag=Zm(S),i=Xs(S,i),F){case 0:s=Wd(null,s,S,i,m);break e;case 1:s=lp(null,s,S,i,m);break e;case 11:s=yc(null,s,S,i,m);break e;case 14:s=ip(null,s,S,Xs(S.type,i),m);break e}throw Error(p(306,S,""))}return s;case 0:return S=s.type,F=s.pendingProps,F=s.elementType===S?F:Xs(S,F),Wd(i,s,S,F,m);case 1:return S=s.type,F=s.pendingProps,F=s.elementType===S?F:Xs(S,F),lp(i,s,S,F,m);case 3:e:{if(Xh(s),i===null)throw Error(p(387));S=s.pendingProps,Z=s.memoizedState,F=Z.element,Ro(i,s),bs(s,S,null,m);var Se=s.memoizedState;if(S=Se.element,Z.isDehydrated)if(Z={element:S,isDehydrated:!1,cache:Se.cache,pendingSuspenseBoundaries:Se.pendingSuspenseBoundaries,transitions:Se.transitions},s.updateQueue.baseState=Z,s.memoizedState=Z,s.flags&256){F=Gi(Error(p(423)),s),s=up(i,s,S,m,F);break e}else if(S!==F){F=Gi(Error(p(424)),s),s=up(i,s,S,m,F);break e}else for(Ne=ys(s.stateNode.containerInfo.firstChild),je=s,$e=!0,qe=null,m=On(s,null,S,m),s.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Gt(),S===F){s=Cs(i,s,m);break e}vi(i,s,S,m)}s=s.child}return s;case 5:return Wc(s),i===null&&ut(s),S=s.type,F=s.pendingProps,Z=i!==null?i.memoizedProps:null,Se=F.children,Gc(S,F)?Se=null:Z!==null&&Gc(S,Z)&&(s.flags|=32),ap(i,s),vi(i,s,Se,m),s.child;case 6:return i===null&&ut(s),null;case 13:return ri(i,s,m);case 4:return Ha(s,s.stateNode.containerInfo),S=s.pendingProps,i===null?s.child=Yt(s,null,S,m):vi(i,s,S,m),s.child;case 11:return S=s.type,F=s.pendingProps,F=s.elementType===S?F:Xs(S,F),yc(i,s,S,F,m);case 7:return vi(i,s,s.pendingProps,m),s.child;case 8:return vi(i,s,s.pendingProps.children,m),s.child;case 12:return vi(i,s,s.pendingProps.children,m),s.child;case 10:e:{if(S=s.type._context,F=s.pendingProps,Z=s.memoizedProps,Se=F.value,kr(wr,S._currentValue),S._currentValue=Se,Z!==null)if(We(Z.value,Se)){if(Z.children===F.children&&!tr.current){s=Cs(i,s,m);break e}}else for(Z=s.child,Z!==null&&(Z.return=s);Z!==null;){var Xe=Z.dependencies;if(Xe!==null){Se=Z.child;for(var ot=Xe.firstContext;ot!==null;){if(ot.context===S){if(Z.tag===1){ot=qo(-1,m&-m),ot.tag=2;var bt=Z.updateQueue;if(bt!==null){bt=bt.shared;var jt=bt.pending;jt===null?ot.next=ot:(ot.next=jt.next,jt.next=ot),bt.pending=ot}}Z.lanes|=m,ot=Z.alternate,ot!==null&&(ot.lanes|=m),Tr(Z.return,m,s),Xe.lanes|=m;break}ot=ot.next}}else if(Z.tag===10)Se=Z.type===s.type?null:Z.child;else if(Z.tag===18){if(Se=Z.return,Se===null)throw Error(p(341));Se.lanes|=m,Xe=Se.alternate,Xe!==null&&(Xe.lanes|=m),Tr(Se,m,s),Se=Z.sibling}else Se=Z.child;if(Se!==null)Se.return=Z;else for(Se=Z;Se!==null;){if(Se===s){Se=null;break}if(Z=Se.sibling,Z!==null){Z.return=Se.return,Se=Z;break}Se=Se.return}Z=Se}vi(i,s,F.children,m),s=s.child}return s;case 9:return F=s.type,S=s.pendingProps.children,gi(s,m),F=zr(F),S=S(F),s.flags|=1,vi(i,s,S,m),s.child;case 14:return S=s.type,F=Xs(S,s.pendingProps),F=Xs(S.type,F),ip(i,s,S,F,m);case 15:return op(i,s,s.type,s.pendingProps,m);case 17:return S=s.type,F=s.pendingProps,F=s.elementType===S?F:Xs(S,F),oh(i,s),s.tag=1,ji(S)?(i=!0,ko(s)):i=!1,gi(s,m),Hd(s,S,F),Du(s,S,F,m),qd(null,s,S,!0,i,m);case 19:return Kd(i,s,m);case 22:return sp(i,s,m)}throw Error(p(156,s.tag))};function sf(i,s){return ii(i,s)}function Pp(i,s,m,S){this.tag=i,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(i,s,m,S){return new Pp(i,s,m,S)}function _h(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zm(i){if(typeof i=="function")return _h(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===re)return 14}return 2}function ou(i,s){var m=i.alternate;return m===null?(m=es(i.tag,s,i.key,i.mode),m.elementType=i.elementType,m.type=i.type,m.stateNode=i.stateNode,m.alternate=i,i.alternate=m):(m.pendingProps=s,m.type=i.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=i.flags&14680064,m.childLanes=i.childLanes,m.lanes=i.lanes,m.child=i.child,m.memoizedProps=i.memoizedProps,m.memoizedState=i.memoizedState,m.updateQueue=i.updateQueue,s=i.dependencies,m.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},m.sibling=i.sibling,m.index=i.index,m.ref=i.ref,m}function xh(i,s,m,S,F,Z){var Se=2;if(S=i,typeof i=="function")_h(i)&&(Se=1);else if(typeof i=="string")Se=5;else e:switch(i){case M:return su(m.children,F,Z,s);case $:Se=8,F|=8;break;case U:return i=es(12,m,s,F|2),i.elementType=U,i.lanes=Z,i;case W:return i=es(13,m,s,F),i.elementType=W,i.lanes=Z,i;case J:return i=es(19,m,s,F),i.elementType=J,i.lanes=Z,i;case te:return au(m,F,Z,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case de:Se=10;break e;case K:Se=9;break e;case j:Se=11;break e;case re:Se=14;break e;case le:Se=16,S=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return s=es(Se,m,s,F),s.elementType=i,s.type=S,s.lanes=Z,s}function su(i,s,m,S){return i=es(7,i,S,s),i.lanes=m,i}function au(i,s,m,S){return i=es(22,i,S,s),i.elementType=te,i.lanes=m,i.stateNode={isHidden:!1},i}function Ks(i,s,m){return i=es(6,i,null,s),i.lanes=m,i}function qa(i,s,m){return s=es(4,i.children!==null?i.children:[],i.key,s),s.lanes=m,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function Ap(i,s,m,S,F){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nr(0),this.expirationTimes=nr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.identifierPrefix=S,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function wh(i,s,m,S,F,Z,Se,Xe,ot){return i=new Ap(i,s,m,Xe,ot),s===1?(s=1,Z===!0&&(s|=8)):s=0,Z=es(3,null,null,s),i.current=Z,Z.stateNode=i,Z.memoizedState={element:S,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ga(Z),i}function Wm(i,s,m){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:S==null?null:""+S,children:i,containerInfo:s,implementation:m}}function Mp(i){if(!i)return $a;i=i._reactInternals;e:{if(Un(i)!==i||i.tag!==1)throw Error(p(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ji(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(i.tag===1){var m=i.type;if(ji(m))return Hl(i,m,s)}return s}function bh(i,s,m,S,F,Z,Se,Xe,ot){return i=wh(m,S,!0,i,F,Z,Se,Xe,ot),i.context=Mp(null),m=i.current,S=Lo(),F=iu(m),Z=qo(S,F),Z.callback=s??null,Ws(m,Z,F),i.current.lanes=F,na(i,F,S),Qo(i,S),i}function bc(i,s,m,S){var F=s.current,Z=Lo(),Se=iu(F);return m=Mp(m),s.context===null?s.context=m:s.pendingContext=m,s=qo(Z,Se),s.payload={element:i},S=S===void 0?null:S,S!==null&&(s.callback=S),i=Ws(F,s,Se),i!==null&&(xa(i,F,Se,Z),eo(i,F,Se)),Se}function ud(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function cd(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var m=i.retryLane;i.retryLane=m!==0&&m<s?m:s}}function Sh(i,s){cd(i,s),(i=i.alternate)&&cd(i,s)}function Sc(){return null}var af=typeof reportError=="function"?reportError:function(i){console.error(i)};function hd(i){this._internalRoot=i}Ec.prototype.render=hd.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(p(409));bc(i,s,null,null)},Ec.prototype.unmount=hd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;ml(function(){bc(null,i,null,null)}),s[vs]=null}};function Ec(i){this._internalRoot=i}Ec.prototype.unstable_scheduleHydration=function(i){if(i){var s=tl();i={blockedOn:null,target:i,priority:s};for(var m=0;m<so.length&&s!==0&&s<so[m].priority;m++);so.splice(m,0,i),m===0&&wu(i)}};function dd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Hu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function lf(){}function qm(i,s,m,S,F){if(F){if(typeof S=="function"){var Z=S;S=function(){var bt=ud(Se);Z.call(bt)}}var Se=bh(s,S,i,0,null,!1,!1,"",lf);return i._reactRootContainer=Se,i[vs]=Se.current,da(i.nodeType===8?i.parentNode:i),ml(),Se}for(;F=i.lastChild;)i.removeChild(F);if(typeof S=="function"){var Xe=S;S=function(){var bt=ud(ot);Xe.call(bt)}}var ot=wh(i,0,!1,null,null,!1,!1,"",lf);return i._reactRootContainer=ot,i[vs]=ot.current,da(i.nodeType===8?i.parentNode:i),ml(function(){bc(s,ot,m,S)}),ot}function fd(i,s,m,S,F){var Z=m._reactRootContainer;if(Z){var Se=Z;if(typeof F=="function"){var Xe=F;F=function(){var ot=ud(Se);Xe.call(ot)}}bc(s,Se,i,F)}else Se=qm(m,s,i,F,S);return ud(Se)}za=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var m=ta(s.pendingLanes);m!==0&&(Ls(s,m|1),Qo(s,Pn()),!(mr&6)&&(Vr=Pn()+500,y()))}break;case 13:ml(function(){var S=po(i,1);if(S!==null){var F=Lo();xa(S,i,1,F)}}),Sh(i,1)}},Ra=function(i){if(i.tag===13){var s=po(i,134217728);if(s!==null){var m=Lo();xa(s,i,134217728,m)}Sh(i,134217728)}},Ds=function(i){if(i.tag===13){var s=iu(i),m=po(i,s);if(m!==null){var S=Lo();xa(m,i,s,S)}Sh(i,s)}},tl=function(){return cr},vu=function(i,s){var m=cr;try{return cr=i,s()}finally{cr=m}},Kr=function(i,s,m){switch(s){case"input":if(kn(i,m),s=m.name,m.type==="radio"&&s!=null){for(m=i;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<m.length;s++){var S=m[s];if(S!==i&&S.form===i.form){var F=zu(S);if(!F)throw Error(p(90));kt(S),kn(S,F)}}}break;case"textarea":rt(i,m);break;case"select":s=m.value,s!=null&&G(i,!!m.multiple,s,!1)}},Pe=ad,Le=ml;var kp={usingClientEntryPoint:!1,Events:[ku,_s,zu,me,pe,ad]},Eh={findFiberByHostInstance:ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xm={bundleType:Eh.bundleType,version:Eh.version,rendererPackageName:Eh.rendererPackageName,rendererConfig:Eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Me.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ur(i),i===null?null:i.stateNode},findFiberByHostInstance:Eh.findFiberByHostInstance||Sc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{Ei=pd.inject(Xm),Ri=pd}catch{}}return Js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kp,Js.createPortal=function(i,s){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dd(s))throw Error(p(200));return Wm(i,s,null,m)},Js.createRoot=function(i,s){if(!dd(i))throw Error(p(299));var m=!1,S="",F=af;return s!=null&&(s.unstable_strictMode===!0&&(m=!0),s.identifierPrefix!==void 0&&(S=s.identifierPrefix),s.onRecoverableError!==void 0&&(F=s.onRecoverableError)),s=wh(i,1,!1,null,null,m,!1,S,F),i[vs]=s.current,da(i.nodeType===8?i.parentNode:i),new hd(s)},Js.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=ur(s),i=i===null?null:i.stateNode,i},Js.flushSync=function(i){return ml(i)},Js.hydrate=function(i,s,m){if(!Hu(s))throw Error(p(200));return fd(null,i,s,!0,m)},Js.hydrateRoot=function(i,s,m){if(!dd(i))throw Error(p(405));var S=m!=null&&m.hydratedSources||null,F=!1,Z="",Se=af;if(m!=null&&(m.unstable_strictMode===!0&&(F=!0),m.identifierPrefix!==void 0&&(Z=m.identifierPrefix),m.onRecoverableError!==void 0&&(Se=m.onRecoverableError)),s=bh(s,null,i,1,m??null,F,!1,Z,Se),i[vs]=s.current,da(i),S)for(i=0;i<S.length;i++)m=S[i],F=m._getVersion,F=F(m._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[m,F]:s.mutableSourceEagerHydrationData.push(m,F);return new Ec(s)},Js.render=function(i,s,m){if(!Hu(s))throw Error(p(200));return fd(null,i,s,!1,m)},Js.unmountComponentAtNode=function(i){if(!Hu(i))throw Error(p(40));return i._reactRootContainer?(ml(function(){fd(null,null,i,!1,function(){i._reactRootContainer=null,i[vs]=null})}),!0):!1},Js.unstable_batchedUpdates=ad,Js.unstable_renderSubtreeIntoContainer=function(i,s,m,S){if(!Hu(m))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return fd(i,s,m,!1,S)},Js.version="18.3.1-next-f1338f8080-20240426",Js}var vv;function Yw(){if(vv)return cg.exports;vv=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(c){console.error(c)}}return u(),cg.exports=Kw(),cg.exports}var d0=Yw();const Jw=Bf(d0);var Kp={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var Qw=Kp.exports,_v;function eb(){return _v||(_v=1,function(u,c){(function(p,v){u.exports=v()})(Qw,function(){var p={},v={};function x(w,a,L){if(v[w]=L,w==="index"){var R="var sharedModule = {}; ("+v.shared+")(sharedModule); ("+v.worker+")(sharedModule);",D={};return v.shared(D),v.index(p,D),typeof window<"u"&&p.setWorkerUrl(window.URL.createObjectURL(new Blob([R],{type:"text/javascript"}))),p}}x("shared",["exports"],function(w){function a(n,t,r,l){return new(r||(r=Promise))(function(f,_){function b(B){try{P(l.next(B))}catch(Y){_(Y)}}function E(B){try{P(l.throw(B))}catch(Y){_(Y)}}function P(B){var Y;B.done?f(B.value):(Y=B.value,Y instanceof r?Y:new r(function(ie){ie(Y)})).then(b,E)}P((l=l.apply(n,t||[])).next())})}function L(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}typeof SuppressedError=="function"&&SuppressedError;var R=D;function D(n,t){this.x=n,this.y=t}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,t){return this.clone()._rotateAround(n,t)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var t=n.x-this.x,r=n.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,t){return Math.atan2(this.x*t-this.y*n,this.x*n+this.y*t)},_matMult:function(n){var t=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=t,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var t=Math.cos(n),r=Math.sin(n),l=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=l,this},_rotateAround:function(n,t){var r=Math.cos(n),l=Math.sin(n),f=t.y+l*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-l*(this.y-t.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},D.convert=function(n){return n instanceof D?n:Array.isArray(n)?new D(n[0],n[1]):n};var C=L(R),k=V;function V(n,t,r,l){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=r,this.p2y=l}V.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,l=0;l<8;l++){var f=this.sampleCurveX(r)-n;if(Math.abs(f)<t)return r;var _=this.sampleCurveDerivativeX(r);if(Math.abs(_)<1e-6)break;r-=f/_}var b=0,E=1;for(r=n,l=0;l<20&&(f=this.sampleCurveX(r),!(Math.abs(f-n)<t));l++)n>f?b=r:E=r,r=.5*(E-b)+b;return r},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var N=L(k);let Q,ce;function Te(){return Q==null&&(Q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q}function xe(){if(ce==null&&(ce=!1,Te())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let l=0;l<5*5;l++){const f=4*l;t.fillStyle=`rgb(${f},${f+1},${f+2})`,t.fillRect(l%5,Math.floor(l/5),1,1)}const r=t.getImageData(0,0,5,5).data;for(let l=0;l<5*5*4;l++)if(l%4!=3&&r[l]!==l){ce=!0;break}}}return ce||!1}function ve(n,t,r,l){const f=new N(n,t,r,l);return _=>f.solve(_)}const Me=ve(.25,.1,.25,1);function ne(n,t,r){return Math.min(r,Math.max(t,n))}function ue(n,t,r){const l=r-t,f=((n-t)%l+l)%l+t;return f===t?r:f}function M(n,...t){for(const r of t)for(const l in r)n[l]=r[l];return n}let $=1;function U(n,t,r){const l={};for(const f in n)l[f]=t.call(this,n[f],f,n);return l}function de(n,t,r){const l={};for(const f in n)t.call(this,n[f],f,n)&&(l[f]=n[f]);return l}function K(n){return Array.isArray(n)?n.map(K):typeof n=="object"&&n?U(n,K):n}const j={};function W(n){j[n]||(typeof console<"u"&&console.warn(n),j[n]=!0)}function J(n,t,r){return(r.y-n.y)*(t.x-n.x)>(t.y-n.y)*(r.x-n.x)}function re(n){return typeof WorkerGlobalScope<"u"&&n!==void 0&&n instanceof WorkerGlobalScope}let le=null;function te(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap}const oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function _e(n,t,r,l,f){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(n,{timestamp:0});try{const b=_==null?void 0:_.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const E=b.startsWith("BGR"),P=new Uint8ClampedArray(l*f*4);if(yield _.copyTo(P,function(B,Y,ie,fe,ge){const Ee=4*Math.max(-Y,0),ke=(Math.max(0,ie)-ie)*fe*4+Ee,Ge=4*fe,Ye=Math.max(0,Y),dt=Math.max(0,ie);return{rect:{x:Ye,y:dt,width:Math.min(B.width,Y+fe)-Ye,height:Math.min(B.height,ie+ge)-dt},layout:[{offset:ke,stride:Ge}]}}(n,t,r,l,f)),E)for(let B=0;B<P.length;B+=4){const Y=P[B];P[B]=P[B+2],P[B+2]=Y}return P}finally{_.close()}})}let be,he;const Fe="AbortError";function Oe(){return new Error(Fe)}const De={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ke(n){return De.REGISTERED_PROTOCOLS[n.substring(0,n.indexOf("://"))]}const tt="global-dispatcher";class pt extends Error{constructor(t,r,l,f){super(`AJAXError: ${r} (${t}): ${l}`),this.status=t,this.statusText=r,this.url=l,this.body=f}}const _t=()=>re(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Tt=function(n,t){if(/:\/\//.test(n.url)&&!/^https?:|^file:/.test(n.url)){const l=Ke(n.url);if(l)return l(n,t);if(re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:n,targetMapId:tt},t)}if(!(/^file:/.test(r=n.url)||/^file:/.test(_t())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(l,f){return a(this,void 0,void 0,function*(){const _=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:_t(),signal:f.signal});l.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const b=yield fetch(_);if(!b.ok){const B=yield b.blob();throw new pt(b.status,b.statusText,l.url,B)}let E;E=l.type==="arrayBuffer"||l.type==="image"?b.arrayBuffer():l.type==="json"?b.json():b.text();const P=yield E;if(f.signal.aborted)throw Oe();return{data:P,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(n,t);if(re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:n,mustQueue:!0,targetMapId:tt},t)}var r;return function(l,f){return new Promise((_,b)=>{var E;const P=new XMLHttpRequest;P.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(P.responseType="arraybuffer");for(const B in l.headers)P.setRequestHeader(B,l.headers[B]);l.type==="json"&&(P.responseType="text",!((E=l.headers)===null||E===void 0)&&E.Accept||P.setRequestHeader("Accept","application/json")),P.withCredentials=l.credentials==="include",P.onerror=()=>{b(new Error(P.statusText))},P.onload=()=>{if(!f.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let B=P.response;if(l.type==="json")try{B=JSON.parse(P.response)}catch(Y){return void b(Y)}_({data:B,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{const B=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});b(new pt(P.status,P.statusText,l.url,B))}},f.signal.addEventListener("abort",()=>{P.abort(),b(Oe())}),P.send(l.body)})}(n,t)};function Lt(n){if(!n||n.indexOf("://")<=0||n.indexOf("data:image/")===0||n.indexOf("blob:")===0)return!0;const t=new URL(n),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function It(n,t,r){r[n]&&r[n].indexOf(t)!==-1||(r[n]=r[n]||[],r[n].push(t))}function kt(n,t,r){if(r&&r[n]){const l=r[n].indexOf(t);l!==-1&&r[n].splice(l,1)}}class Jt{constructor(t,r={}){M(this,r),this.type=t}}class cn extends Jt{constructor(t,r={}){super("error",M({error:t},r))}}class Tn{on(t,r){return this._listeners=this._listeners||{},It(t,r,this._listeners),this}off(t,r){return kt(t,r,this._listeners),kt(t,r,this._oneTimeListeners),this}once(t,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},It(t,r,this._oneTimeListeners),this):new Promise(l=>this.once(t,l))}fire(t,r){typeof t=="string"&&(t=new Jt(t,r||{}));const l=t.type;if(this.listens(l)){t.target=this;const f=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const E of f)E.call(this,t);const _=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const E of _)kt(l,E,this._oneTimeListeners),E.call(this,t);const b=this._eventedParent;b&&(M(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(t))}else t instanceof cn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,r){return this._eventedParent=t,this._eventedParentData=r,this}}var at={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const kn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hn(n,t){const r={};for(const l in n)l!=="ref"&&(r[l]=n[l]);return kn.forEach(l=>{l in t&&(r[l]=t[l])}),r}function en(n,t){if(Array.isArray(n)){if(!Array.isArray(t)||n.length!==t.length)return!1;for(let r=0;r<n.length;r++)if(!en(n[r],t[r]))return!1;return!0}if(typeof n=="object"&&n!==null&&t!==null){if(typeof t!="object"||Object.keys(n).length!==Object.keys(t).length)return!1;for(const r in n)if(!en(n[r],t[r]))return!1;return!0}return n===t}function ze(n,t){n.push(t)}function G(n,t,r){ze(r,{command:"addSource",args:[n,t[n]]})}function H(n,t,r){ze(t,{command:"removeSource",args:[n]}),r[n]=!0}function Ce(n,t,r,l){H(n,r,l),G(n,t,r)}function rt(n,t,r){let l;for(l in n[r])if(Object.prototype.hasOwnProperty.call(n[r],l)&&l!=="data"&&!en(n[r][l],t[r][l]))return!1;for(l in t[r])if(Object.prototype.hasOwnProperty.call(t[r],l)&&l!=="data"&&!en(n[r][l],t[r][l]))return!1;return!0}function ct(n,t,r,l,f,_){n=n||{},t=t||{};for(const b in n)Object.prototype.hasOwnProperty.call(n,b)&&(en(n[b],t[b])||r.push({command:_,args:[l,b,t[b],f]}));for(const b in t)Object.prototype.hasOwnProperty.call(t,b)&&!Object.prototype.hasOwnProperty.call(n,b)&&(en(n[b],t[b])||r.push({command:_,args:[l,b,t[b],f]}))}function Et(n){return n.id}function ye(n,t){return n[t.id]=t,n}class z{constructor(t,r,l,f){this.message=(t?`${t}: `:"")+l,f&&(this.identifier=f),r!=null&&r.__line__&&(this.line=r.__line__)}}function q(n,...t){for(const r of t)for(const l in r)n[l]=r[l];return n}class Re extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}class Je{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[l,f]of r)this.bindings[l]=f}concat(t){return new Je(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ft={kind:"null"},Qe={kind:"number"},Ot={kind:"string"},Bt={kind:"boolean"},zn={kind:"color"},Zn={kind:"object"},Xt={kind:"value"},Fr={kind:"collator"},Kr={kind:"formatted"},Yr={kind:"padding"},Cr={kind:"resolvedImage"},Ue={kind:"variableAnchorOffsetCollection"};function me(n,t){return{kind:"array",itemType:n,N:t}}function pe(n){if(n.kind==="array"){const t=pe(n.itemType);return typeof n.N=="number"?`array<${t}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${t}>`}return n.kind}const Pe=[ft,Qe,Ot,Bt,zn,Kr,Zn,me(Xt),Yr,Cr,Ue];function Le(n,t){if(t.kind==="error")return null;if(n.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Le(n.itemType,t.itemType))&&(typeof n.N!="number"||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if(n.kind==="value"){for(const r of Pe)if(!Le(r,t))return null}}return`Expected ${pe(n)} but found ${pe(t)} instead.`}function Be(n,t){return t.some(r=>r.kind===n.kind)}function He(n,t){return t.some(r=>r==="null"?n===null:r==="array"?Array.isArray(n):r==="object"?n&&!Array.isArray(n)&&typeof n=="object":r===typeof n)}function nt(n,t){return n.kind==="array"&&t.kind==="array"?n.itemType.kind===t.itemType.kind&&typeof n.N=="number":n.kind===t.kind}const Ze=.96422,yt=.82521,Ct=4/29,gt=6/29,Vt=3*gt*gt,pn=gt*gt*gt,vn=Math.PI/180,Jn=180/Math.PI;function Fn(n){return(n%=360)<0&&(n+=360),n}function Qn([n,t,r,l]){let f,_;const b=Or((.2225045*(n=Un(n))+.7168786*(t=Un(t))+.0606169*(r=Un(r)))/1);n===t&&t===r?f=_=b:(f=Or((.4360747*n+.3850649*t+.1430804*r)/Ze),_=Or((.0139322*n+.0971045*t+.7141733*r)/yt));const E=116*b-16;return[E<0?0:E,500*(f-b),200*(b-_),l]}function Un(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Or(n){return n>pn?Math.pow(n,1/3):n/Vt+Ct}function _r([n,t,r,l]){let f=(n+16)/116,_=isNaN(t)?f:f+t/500,b=isNaN(r)?f:f-r/200;return f=1*ur(f),_=Ze*ur(_),b=yt*ur(b),[Wn(3.1338561*_-1.6168667*f-.4906146*b),Wn(-.9787684*_+1.9161415*f+.033454*b),Wn(.0719453*_-.2289914*f+1.4052427*b),l]}function Wn(n){return(n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055)<0?0:n>1?1:n}function ur(n){return n>gt?n*n*n:Vt*(n-Ct)}function br(n){return parseInt(n.padEnd(2,n),16)/255}function ii(n,t){return ci(t?n/100:n,0,1)}function ci(n,t,r){return Math.min(Math.max(t,n),r)}function zi(n){return!n.some(Number.isNaN)}const as={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Pn{constructor(t,r,l,f=1,_=!0){this.r=t,this.g=r,this.b=l,this.a=f,_||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[t,r,l,f]))}static parse(t){if(t instanceof Pn)return t;if(typeof t!="string")return;const r=function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=as[l];if(f){const[b,E,P]=f;return[b/255,E/255,P/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){const b=l.length<6?1:2;let E=1;return[br(l.slice(E,E+=b)),br(l.slice(E,E+=b)),br(l.slice(E,E+=b)),br(l.slice(E,E+b)||"ff")]}if(l.startsWith("rgb")){const b=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[E,P,B,Y,ie,fe,ge,Ee,ke,Ge,Ye,dt]=b,it=[Y||" ",ge||" ",Ge].join("");if(it==="  "||it==="  /"||it===",,"||it===",,,"){const ht=[B,fe,ke].join(""),St=ht==="%%%"?100:ht===""?255:0;if(St){const Rt=[ci(+P/St,0,1),ci(+ie/St,0,1),ci(+Ee/St,0,1),Ye?ii(+Ye,dt):1];if(zi(Rt))return Rt}}return}}const _=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[b,E,P,B,Y,ie,fe,ge,Ee]=_,ke=[P||" ",Y||" ",fe].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const Ge=[+E,ci(+B,0,100),ci(+ie,0,100),ge?ii(+ge,Ee):1];if(zi(Ge))return function([Ye,dt,it,ht]){function St(Rt){const on=(Rt+Ye/30)%12,An=dt*Math.min(it,1-it);return it-An*Math.max(-1,Math.min(on-3,9-on,1))}return Ye=Fn(Ye),dt/=100,it/=100,[St(0),St(8),St(4),ht]}(Ge)}}}(t);return r?new Pn(...r,!1):void 0}get rgb(){const{r:t,g:r,b:l,a:f}=this,_=f||1/0;return this.overwriteGetter("rgb",[t/_,r/_,l/_,f])}get hcl(){return this.overwriteGetter("hcl",function(t){const[r,l,f,_]=Qn(t),b=Math.sqrt(l*l+f*f);return[Math.round(1e4*b)?Fn(Math.atan2(f,l)*Jn):NaN,b,r,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Qn(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){const[t,r,l,f]=this.rgb;return`rgba(${[t,r,l].map(_=>Math.round(255*_)).join(",")},${f})`}}Pn.black=new Pn(0,0,0,1),Pn.white=new Pn(1,1,1,1),Pn.transparent=new Pn(0,0,0,0),Pn.red=new Pn(1,0,0,1);class Sl{constructor(t,r,l){this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Xn{constructor(t,r,l,f,_){this.text=t,this.image=r,this.scale=l,this.fontStack=f,this.textColor=_}}class Jr{constructor(t){this.sections=t}static fromString(t){return new Jr([new Xn(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Jr?t:Jr.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Si{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Si)return t;if(typeof t=="number")return new Si([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Si(t)}}toString(){return JSON.stringify(this.values)}}const Rc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class qi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof qi)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let r=0;r<t.length;r+=2){const l=t[r],f=t[r+1];if(typeof l!="string"||!Rc.has(l)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new qi(t)}}toString(){return JSON.stringify(this.values)}}class Ei{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Ei({name:t,available:!1}):null}}function Ri(n,t,r,l){return typeof n=="number"&&n>=0&&n<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[n,t,r,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[n,t,r,l]:[n,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fi(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Pn||n instanceof Sl||n instanceof Jr||n instanceof Si||n instanceof qi||n instanceof Ei)return!0;if(Array.isArray(n)){for(const t of n)if(!Fi(t))return!1;return!0}if(typeof n=="object"){for(const t in n)if(!Fi(n[t]))return!1;return!0}return!1}function fr(n){if(n===null)return ft;if(typeof n=="string")return Ot;if(typeof n=="boolean")return Bt;if(typeof n=="number")return Qe;if(n instanceof Pn)return zn;if(n instanceof Sl)return Fr;if(n instanceof Jr)return Kr;if(n instanceof Si)return Yr;if(n instanceof qi)return Ue;if(n instanceof Ei)return Cr;if(Array.isArray(n)){const t=n.length;let r;for(const l of n){const f=fr(l);if(r){if(r===f)continue;r=Xt;break}r=f}return me(r||Xt,t)}return Zn}function Qa(n){const t=typeof n;return n===null?"":t==="string"||t==="number"||t==="boolean"?String(n):n instanceof Pn||n instanceof Jr||n instanceof Si||n instanceof qi||n instanceof Ei?n.toString():JSON.stringify(n)}class Eo{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Fi(t[1]))return r.error("invalid value");const l=t[1];let f=fr(l);const _=r.expectedType;return f.kind!=="array"||f.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(f=_),new Eo(f,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Gr{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const ea={string:Ot,number:Qe,boolean:Bt,object:Zn};class Dr{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let l,f=1;const _=t[0];if(_==="array"){let E,P;if(t.length>2){const B=t[1];if(typeof B!="string"||!(B in ea)||B==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);E=ea[B],f++}else E=Xt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);P=t[2],f++}l=me(E,P)}else{if(!ea[_])throw new Error(`Types doesn't contain name = ${_}`);l=ea[_]}const b=[];for(;f<t.length;f++){const E=r.parse(t[f],f,Xt);if(!E)return null;b.push(E)}return new Dr(l,b)}evaluate(t){for(let r=0;r<this.args.length;r++){const l=this.args[r].evaluate(t);if(!Le(this.type,fr(l)))return l;if(r===this.args.length-1)throw new Gr(`Expected value to be of type ${pe(this.type)}, but found ${pe(fr(l))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const ta={"to-boolean":Bt,"to-color":zn,"to-number":Qe,"to-string":Ot};class Ui{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const l=t[0];if(!ta[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&t.length!==2)return r.error("Expected one argument.");const f=ta[l],_=[];for(let b=1;b<t.length;b++){const E=r.parse(t[b],b,Xt);if(!E)return null;_.push(E)}return new Ui(f,_)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,l;for(const f of this.args){if(r=f.evaluate(t),l=null,r instanceof Pn)return r;if(typeof r=="string"){const _=t.parseColor(r);if(_)return _}else if(Array.isArray(r)&&(l=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:Ri(r[0],r[1],r[2],r[3]),!l))return new Pn(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Gr(l||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const l of this.args){r=l.evaluate(t);const f=Si.parse(r);if(f)return f}throw new Gr(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const l of this.args){r=l.evaluate(t);const f=qi.parse(r);if(f)return f}throw new Gr(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const l of this.args){if(r=l.evaluate(t),r===null)return 0;const f=Number(r);if(!isNaN(f))return f}throw new Gr(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Jr.fromString(Qa(this.args[0].evaluate(t)));case"resolvedImage":return Ei.fromString(Qa(this.args[0].evaluate(t)));default:return Qa(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Fc=["Unknown","Point","LineString","Polygon"];class El{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Fc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache[t];return r||(r=this._parseColorCache[t]=Pn.parse(t)),r}}class ls{constructor(t,r,l=[],f,_=new Je,b=[]){this.registry=t,this.path=l,this.key=l.map(E=>`[${E}]`).join(""),this.scope=_,this.errors=b,this.expectedType=f,this._isConstant=r}parse(t,r,l,f,_={}){return r?this.concat(r,l,f)._parse(t,_):this._parse(t,_)}_parse(t,r){function l(f,_,b){return b==="assert"?new Dr(_,[f]):b==="coerce"?new Ui(_,[f]):f}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=t[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[f];if(_){let b=_.parse(t,this);if(!b)return null;if(this.expectedType){const E=this.expectedType,P=b.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||P.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(E.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(E.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(E,P))return null}else b=l(b,E,r.typeAnnotation||"coerce");else b=l(b,E,r.typeAnnotation||"coerce");else b=l(b,E,r.typeAnnotation||"coerce");else b=l(b,E,r.typeAnnotation||"assert")}if(!(b instanceof Eo)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const E=new El;try{b=new Eo(b.type,b.evaluate(E))}catch(P){return this.error(P.message),null}}return b}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,r,l){const f=typeof t=="number"?this.path.concat(t):this.path,_=l?this.scope.concat(l):this.scope;return new ls(this.registry,this._isConstant,f,r||null,_,this.errors)}error(t,...r){const l=`${this.key}${r.map(f=>`[${f}]`).join("")}`;this.errors.push(new Re(l,t))}checkSubtype(t,r){const l=Le(t,r);return l&&this.error(l),l}}class io{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const l=[];for(let _=1;_<t.length-1;_+=2){const b=t[_];if(typeof b!="string")return r.error(`Expected string, but found ${typeof b} instead.`,_);if(/[^a-zA-Z0-9_]/.test(b))return r.error("Variable names must contain only alphanumeric characters or '_'.",_);const E=r.parse(t[_+1],_+1);if(!E)return null;l.push([b,E])}const f=r.parse(t[t.length-1],t.length-1,r.expectedType,l);return f?new io(l,f):null}outputDefined(){return this.result.outputDefined()}}class nr{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const l=t[1];return r.scope.has(l)?new nr(l,r.scope.get(l)):r.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class na{constructor(t,r,l){this.type=t,this.index=r,this.input=l}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=r.parse(t[1],1,Qe),f=r.parse(t[2],2,me(r.expectedType||Xt));return l&&f?new na(f.type.itemType,l,f):null}evaluate(t){const r=this.index.evaluate(t),l=this.input.evaluate(t);if(r<0)throw new Gr(`Array index out of bounds: ${r} < 0.`);if(r>=l.length)throw new Gr(`Array index out of bounds: ${r} > ${l.length-1}.`);if(r!==Math.floor(r))throw new Gr(`Array index must be an integer, but found ${r} instead.`);return l[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Xi{constructor(t,r){this.type=Bt,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=r.parse(t[1],1,Xt),f=r.parse(t[2],2,Xt);return l&&f?Be(l.type,[Bt,Ot,Qe,ft,Xt])?new Xi(l,f):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(l.type)} instead`):null}evaluate(t){const r=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!l)return!1;if(!He(r,["boolean","string","number","null"]))throw new Gr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(fr(r))} instead.`);if(!He(l,["string","array"]))throw new Gr(`Expected second argument to be of type array or string, but found ${pe(fr(l))} instead.`);return l.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ls{constructor(t,r,l){this.type=Qe,this.needle=t,this.haystack=r,this.fromIndex=l}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=r.parse(t[1],1,Xt),f=r.parse(t[2],2,Xt);if(!l||!f)return null;if(!Be(l.type,[Bt,Ot,Qe,ft,Xt]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(l.type)} instead`);if(t.length===4){const _=r.parse(t[3],3,Qe);return _?new Ls(l,f,_):null}return new Ls(l,f)}evaluate(t){const r=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!He(r,["boolean","string","number","null"]))throw new Gr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(fr(r))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(t)),He(l,["string"])){const _=l.indexOf(r,f);return _===-1?-1:[...l.slice(0,_)].length}if(He(l,["array"]))return l.indexOf(r,f);throw new Gr(`Expected second argument to be of type array or string, but found ${pe(fr(l))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class cr{constructor(t,r,l,f,_,b){this.inputType=t,this.type=r,this.input=l,this.cases=f,this.outputs=_,this.otherwise=b}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return r.error("Expected an even number of arguments.");let l,f;r.expectedType&&r.expectedType.kind!=="value"&&(f=r.expectedType);const _={},b=[];for(let B=2;B<t.length-1;B+=2){let Y=t[B];const ie=t[B+1];Array.isArray(Y)||(Y=[Y]);const fe=r.concat(B);if(Y.length===0)return fe.error("Expected at least one branch label.");for(const Ee of Y){if(typeof Ee!="number"&&typeof Ee!="string")return fe.error("Branch labels must be numbers or strings.");if(typeof Ee=="number"&&Math.abs(Ee)>Number.MAX_SAFE_INTEGER)return fe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ee=="number"&&Math.floor(Ee)!==Ee)return fe.error("Numeric branch labels must be integer values.");if(l){if(fe.checkSubtype(l,fr(Ee)))return null}else l=fr(Ee);if(_[String(Ee)]!==void 0)return fe.error("Branch labels must be unique.");_[String(Ee)]=b.length}const ge=r.parse(ie,B,f);if(!ge)return null;f=f||ge.type,b.push(ge)}const E=r.parse(t[1],1,Xt);if(!E)return null;const P=r.parse(t[t.length-1],t.length-1,f);return P?E.type.kind!=="value"&&r.concat(1).checkSubtype(l,E.type)?null:new cr(l,f,E,_,b,P):null}evaluate(t){const r=this.input.evaluate(t);return(fr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class el{constructor(t,r,l){this.type=t,this.branches=r,this.otherwise=l}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return r.error("Expected an odd number of arguments.");let l;r.expectedType&&r.expectedType.kind!=="value"&&(l=r.expectedType);const f=[];for(let b=1;b<t.length-1;b+=2){const E=r.parse(t[b],b,Bt);if(!E)return null;const P=r.parse(t[b+1],b+1,l);if(!P)return null;f.push([E,P]),l=l||P.type}const _=r.parse(t[t.length-1],t.length-1,l);if(!_)return null;if(!l)throw new Error("Can't infer output type");return new el(l,f,_)}evaluate(t){for(const[r,l]of this.branches)if(r.evaluate(t))return l.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,l]of this.branches)t(r),t(l);t(this.otherwise)}outputDefined(){return this.branches.every(([t,r])=>r.outputDefined())&&this.otherwise.outputDefined()}}class za{constructor(t,r,l,f){this.type=t,this.input=r,this.beginIndex=l,this.endIndex=f}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=r.parse(t[1],1,Xt),f=r.parse(t[2],2,Qe);if(!l||!f)return null;if(!Be(l.type,[me(Xt),Ot,Xt]))return r.error(`Expected first argument to be of type array or string, but found ${pe(l.type)} instead`);if(t.length===4){const _=r.parse(t[3],3,Qe);return _?new za(l.type,l,f,_):null}return new za(l.type,l,f)}evaluate(t){const r=this.input.evaluate(t),l=this.beginIndex.evaluate(t);let f;if(this.endIndex&&(f=this.endIndex.evaluate(t)),He(r,["string"]))return[...r].slice(l,f).join("");if(He(r,["array"]))return r.slice(l,f);throw new Gr(`Expected first argument to be of type array or string, but found ${pe(fr(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Ra(n,t){const r=n.length-1;let l,f,_=0,b=r,E=0;for(;_<=b;)if(E=Math.floor((_+b)/2),l=n[E],f=n[E+1],l<=t){if(E===r||t<f)return E;_=E+1}else{if(!(l>t))throw new Gr("Input is not a number.");b=E-1}return 0}class Ds{constructor(t,r,l){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[f,_]of l)this.labels.push(f),this.outputs.push(_)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");const l=r.parse(t[1],1,Qe);if(!l)return null;const f=[];let _=null;r.expectedType&&r.expectedType.kind!=="value"&&(_=r.expectedType);for(let b=1;b<t.length;b+=2){const E=b===1?-1/0:t[b],P=t[b+1],B=b,Y=b+1;if(typeof E!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(f.length&&f[f.length-1][0]>=E)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const ie=r.parse(P,Y,_);if(!ie)return null;_=_||ie.type,f.push([E,ie])}return new Ds(_,l,f)}evaluate(t){const r=this.labels,l=this.outputs;if(r.length===1)return l[0].evaluate(t);const f=this.input.evaluate(t);if(f<=r[0])return l[0].evaluate(t);const _=r.length;return f>=r[_-1]?l[_-1].evaluate(t):l[Ra(r,f)].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function tl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vu=ra;function ra(n,t,r,l){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=r,this.p2y=l}ra.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,l=0;l<8;l++){var f=this.sampleCurveX(r)-n;if(Math.abs(f)<t)return r;var _=this.sampleCurveDerivativeX(r);if(Math.abs(_)<1e-6)break;r-=f/_}var b=0,E=1;for(r=n,l=0;l<20&&(f=this.sampleCurveX(r),!(Math.abs(f-n)<t));l++)n>f?b=r:E=r,r=.5*(E-b)+b;return r},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var Tl=tl(vu);function oi(n,t,r){return n+r*(t-n)}function oo(n,t,r){return n.map((l,f)=>oi(l,t[f],r))}const Hr={number:oi,color:function(n,t,r,l="rgb"){switch(l){case"rgb":{const[f,_,b,E]=oo(n.rgb,t.rgb,r);return new Pn(f,_,b,E,!1)}case"hcl":{const[f,_,b,E]=n.hcl,[P,B,Y,ie]=t.hcl;let fe,ge;if(isNaN(f)||isNaN(P))isNaN(f)?isNaN(P)?fe=NaN:(fe=P,b!==1&&b!==0||(ge=B)):(fe=f,Y!==1&&Y!==0||(ge=_));else{let dt=P-f;P>f&&dt>180?dt-=360:P<f&&f-P>180&&(dt+=360),fe=f+r*dt}const[Ee,ke,Ge,Ye]=function([dt,it,ht,St]){return dt=isNaN(dt)?0:dt*vn,_r([ht,Math.cos(dt)*it,Math.sin(dt)*it,St])}([fe,ge??oi(_,B,r),oi(b,Y,r),oi(E,ie,r)]);return new Pn(Ee,ke,Ge,Ye,!1)}case"lab":{const[f,_,b,E]=_r(oo(n.lab,t.lab,r));return new Pn(f,_,b,E,!1)}}},array:oo,padding:function(n,t,r){return new Si(oo(n.values,t.values,r))},variableAnchorOffsetCollection:function(n,t,r){const l=n.values,f=t.values;if(l.length!==f.length)throw new Gr(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${t.toString()}`);const _=[];for(let b=0;b<l.length;b+=2){if(l[b]!==f[b])throw new Gr(`Cannot interpolate values containing mismatched anchors. from[${b}]: ${l[b]}, to[${b}]: ${f[b]}`);_.push(l[b]);const[E,P]=l[b+1],[B,Y]=f[b+1];_.push([oi(E,B,r),oi(P,Y,r)])}return new qi(_)}};class hi{constructor(t,r,l,f,_){this.type=t,this.operator=r,this.interpolation=l,this.input=f,this.labels=[],this.outputs=[];for(const[b,E]of _)this.labels.push(b),this.outputs.push(E)}static interpolationFactor(t,r,l,f){let _=0;if(t.name==="exponential")_=Bs(r,t.base,l,f);else if(t.name==="linear")_=Bs(r,1,l,f);else if(t.name==="cubic-bezier"){const b=t.controlPoints;_=new Tl(b[0],b[1],b[2],b[3]).solve(Bs(r,1,l,f))}return _}static parse(t,r){let[l,f,_,...b]=t;if(!Array.isArray(f)||f.length===0)return r.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const B=f[1];if(typeof B!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:B}}else{if(f[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const B=f.slice(1);if(B.length!==4||B.some(Y=>typeof Y!="number"||Y<0||Y>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:B}}}if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(_=r.parse(_,2,Qe),!_)return null;const E=[];let P=null;l==="interpolate-hcl"||l==="interpolate-lab"?P=zn:r.expectedType&&r.expectedType.kind!=="value"&&(P=r.expectedType);for(let B=0;B<b.length;B+=2){const Y=b[B],ie=b[B+1],fe=B+3,ge=B+4;if(typeof Y!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fe);if(E.length&&E[E.length-1][0]>=Y)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',fe);const Ee=r.parse(ie,ge,P);if(!Ee)return null;P=P||Ee.type,E.push([Y,Ee])}return nt(P,Qe)||nt(P,zn)||nt(P,Yr)||nt(P,Ue)||nt(P,me(Qe))?new hi(P,l,f,_,E):r.error(`Type ${pe(P)} is not interpolatable.`)}evaluate(t){const r=this.labels,l=this.outputs;if(r.length===1)return l[0].evaluate(t);const f=this.input.evaluate(t);if(f<=r[0])return l[0].evaluate(t);const _=r.length;if(f>=r[_-1])return l[_-1].evaluate(t);const b=Ra(r,f),E=hi.interpolationFactor(this.interpolation,f,r[b],r[b+1]),P=l[b].evaluate(t),B=l[b+1].evaluate(t);switch(this.operator){case"interpolate":return Hr[this.type.kind](P,B,E);case"interpolate-hcl":return Hr.color(P,B,E,"hcl");case"interpolate-lab":return Hr.color(P,B,E,"lab")}}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Bs(n,t,r,l){const f=l-r,_=n-r;return f===0?0:t===1?_/f:(Math.pow(t,_)-1)/(Math.pow(t,f)-1)}class so{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expectected at least one argument.");let l=null;const f=r.expectedType;f&&f.kind!=="value"&&(l=f);const _=[];for(const E of t.slice(1)){const P=r.parse(E,1+_.length,l,void 0,{typeAnnotation:"omit"});if(!P)return null;l=l||P.type,_.push(P)}if(!l)throw new Error("No output type");const b=f&&_.some(E=>Le(f,E.type));return new so(b?Xt:l,_)}evaluate(t){let r,l=null,f=0;for(const _ of this.args)if(f++,l=_.evaluate(t),l&&l instanceof Ei&&!l.available&&(r||(r=l.name),l=null,f===this.args.length&&(l=r)),l!==null)break;return l}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function Il(n,t){return n==="=="||n==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function _u(n,t,r,l){return l.compare(t,r)===0}function Uo(n,t,r){const l=n!=="=="&&n!=="!=";return class M1{constructor(_,b,E){this.type=Bt,this.lhs=_,this.rhs=b,this.collator=E,this.hasUntypedArgument=_.type.kind==="value"||b.type.kind==="value"}static parse(_,b){if(_.length!==3&&_.length!==4)return b.error("Expected two or three arguments.");const E=_[0];let P=b.parse(_[1],1,Xt);if(!P)return null;if(!Il(E,P.type))return b.concat(1).error(`"${E}" comparisons are not supported for type '${pe(P.type)}'.`);let B=b.parse(_[2],2,Xt);if(!B)return null;if(!Il(E,B.type))return b.concat(2).error(`"${E}" comparisons are not supported for type '${pe(B.type)}'.`);if(P.type.kind!==B.type.kind&&P.type.kind!=="value"&&B.type.kind!=="value")return b.error(`Cannot compare types '${pe(P.type)}' and '${pe(B.type)}'.`);l&&(P.type.kind==="value"&&B.type.kind!=="value"?P=new Dr(B.type,[P]):P.type.kind!=="value"&&B.type.kind==="value"&&(B=new Dr(P.type,[B])));let Y=null;if(_.length===4){if(P.type.kind!=="string"&&B.type.kind!=="string"&&P.type.kind!=="value"&&B.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(Y=b.parse(_[3],3,Fr),!Y)return null}return new M1(P,B,Y)}evaluate(_){const b=this.lhs.evaluate(_),E=this.rhs.evaluate(_);if(l&&this.hasUntypedArgument){const P=fr(b),B=fr(E);if(P.kind!==B.kind||P.kind!=="string"&&P.kind!=="number")throw new Gr(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${P.kind}, ${B.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const P=fr(b),B=fr(E);if(P.kind!=="string"||B.kind!=="string")return t(_,b,E)}return this.collator?r(_,b,E,this.collator.evaluate(_)):t(_,b,E)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const xu=Uo("==",function(n,t,r){return t===r},_u),wu=Uo("!=",function(n,t,r){return t!==r},function(n,t,r,l){return!_u(0,t,r,l)}),nl=Uo("<",function(n,t,r){return t<r},function(n,t,r,l){return l.compare(t,r)<0}),ec=Uo(">",function(n,t,r){return t>r},function(n,t,r,l){return l.compare(t,r)>0}),Oc=Uo("<=",function(n,t,r){return t<=r},function(n,t,r,l){return l.compare(t,r)<=0}),ia=Uo(">=",function(n,t,r){return t>=r},function(n,t,r,l){return l.compare(t,r)>=0});class us{constructor(t,r,l){this.type=Fr,this.locale=l,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const l=t[1];if(typeof l!="object"||Array.isArray(l))return r.error("Collator options argument must be an object.");const f=r.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Bt);if(!f)return null;const _=r.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Bt);if(!_)return null;let b=null;return l.locale&&(b=r.parse(l.locale,1,Ot),!b)?null:new us(f,_,b)}evaluate(t){return new Sl(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class cs{constructor(t,r,l,f,_){this.type=Ot,this.number=t,this.locale=r,this.currency=l,this.minFractionDigits=f,this.maxFractionDigits=_}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const l=r.parse(t[1],1,Qe);if(!l)return null;const f=t[2];if(typeof f!="object"||Array.isArray(f))return r.error("NumberFormat options argument must be an object.");let _=null;if(f.locale&&(_=r.parse(f.locale,1,Ot),!_))return null;let b=null;if(f.currency&&(b=r.parse(f.currency,1,Ot),!b))return null;let E=null;if(f["min-fraction-digits"]&&(E=r.parse(f["min-fraction-digits"],1,Qe),!E))return null;let P=null;return f["max-fraction-digits"]&&(P=r.parse(f["max-fraction-digits"],1,Qe),!P)?null:new cs(l,_,b,E,P)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class oa{constructor(t){this.type=Kr,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const l=t[1];if(!Array.isArray(l)&&typeof l=="object")return r.error("First argument must be an image or text section.");const f=[];let _=!1;for(let b=1;b<=t.length-1;++b){const E=t[b];if(_&&typeof E=="object"&&!Array.isArray(E)){_=!1;let P=null;if(E["font-scale"]&&(P=r.parse(E["font-scale"],1,Qe),!P))return null;let B=null;if(E["text-font"]&&(B=r.parse(E["text-font"],1,me(Ot)),!B))return null;let Y=null;if(E["text-color"]&&(Y=r.parse(E["text-color"],1,zn),!Y))return null;const ie=f[f.length-1];ie.scale=P,ie.font=B,ie.textColor=Y}else{const P=r.parse(t[b],1,Xt);if(!P)return null;const B=P.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,f.push({content:P,scale:null,font:null,textColor:null})}}return new oa(f)}evaluate(t){return new Jr(this.sections.map(r=>{const l=r.content.evaluate(t);return fr(l)===Cr?new Xn("",l,null,null,null):new Xn(Qa(l),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)}))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}outputDefined(){return!1}}class bu{constructor(t){this.type=Cr,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const l=r.parse(t[1],1,Ot);return l?new bu(l):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),l=Ei.fromString(r);return l&&t.availableImages&&(l.available=t.availableImages.indexOf(r)>-1),l}eachChild(t){t(this.input)}outputDefined(){return!1}}class Cl{constructor(t){this.type=Qe,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const l=r.parse(t[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${pe(l.type)} instead.`):new Cl(l):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new Gr(`Expected value to be of type string or array, but found ${pe(fr(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const ao=8192;function Pl(n,t){const r=(180+n[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(r*f*ao),Math.round(l*f*ao)]}function rl(n,t){const r=Math.pow(2,t.z);return[(f=(n[0]/ao+t.x)/r,360*f-180),(l=(n[1]/ao+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,f}function Ns(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function Ti(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function rr(n,t,r){const l=n[0]-t[0],f=n[1]-t[1],_=n[0]-r[0],b=n[1]-r[1];return l*b-_*f==0&&l*_<=0&&f*b<=0}function hs(n,t,r,l){return(f=[l[0]-r[0],l[1]-r[1]])[0]*(_=[t[0]-n[0],t[1]-n[1]])[1]-f[1]*_[0]!=0&&!(!sa(n,t,r,l)||!sa(r,l,n,t));var f,_}function tc(n,t,r){for(const l of r)for(let f=0;f<l.length-1;++f)if(hs(n,t,l[f],l[f+1]))return!0;return!1}function ds(n,t,r=!1){let l=!1;for(const E of t)for(let P=0;P<E.length-1;P++){if(rr(n,E[P],E[P+1]))return r;(_=E[P])[1]>(f=n)[1]!=(b=E[P+1])[1]>f[1]&&f[0]<(b[0]-_[0])*(f[1]-_[1])/(b[1]-_[1])+_[0]&&(l=!l)}var f,_,b;return l}function Al(n,t){for(const r of t)if(ds(n,r))return!0;return!1}function Su(n,t){for(const r of n)if(!ds(r,t))return!1;for(let r=0;r<n.length-1;++r)if(tc(n[r],n[r+1],t))return!1;return!0}function Ki(n,t){for(const r of t)if(Su(n,r))return!0;return!1}function sa(n,t,r,l){const f=l[0]-r[0],_=l[1]-r[1],b=(n[0]-r[0])*_-f*(n[1]-r[1]),E=(t[0]-r[0])*_-f*(t[1]-r[1]);return b>0&&E<0||b<0&&E>0}function Fa(n,t,r){const l=[];for(let f=0;f<n.length;f++){const _=[];for(let b=0;b<n[f].length;b++){const E=Pl(n[f][b],r);Ns(t,E),_.push(E)}l.push(_)}return l}function Us(n,t,r){const l=[];for(let f=0;f<n.length;f++){const _=Fa(n[f],t,r);l.push(_)}return l}function nc(n,t,r,l){if(n[0]<r[0]||n[0]>r[2]){const f=.5*l;let _=n[0]-r[0]>f?-l:r[0]-n[0]>f?l:0;_===0&&(_=n[0]-r[2]>f?-l:r[2]-n[0]>f?l:0),n[0]+=_}Ns(t,n)}function Ml(n,t,r,l){const f=Math.pow(2,l.z)*ao,_=[l.x*ao,l.y*ao],b=[];for(const E of n)for(const P of E){const B=[P.x+_[0],P.y+_[1]];nc(B,t,r,f),b.push(B)}return b}function kl(n,t,r,l){const f=Math.pow(2,l.z)*ao,_=[l.x*ao,l.y*ao],b=[];for(const P of n){const B=[];for(const Y of P){const ie=[Y.x+_[0],Y.y+_[1]];Ns(t,ie),B.push(ie)}b.push(B)}if(t[2]-t[0]<=f/2){(E=t)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const P of b)for(const B of P)nc(B,t,r,f)}var E;return b}class To{constructor(t,r){this.type=Bt,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fi(t[1])){const l=t[1];if(l.type==="FeatureCollection"){const f=[];for(const _ of l.features){const{type:b,coordinates:E}=_.geometry;b==="Polygon"&&f.push(E),b==="MultiPolygon"&&f.push(...E)}if(f.length)return new To(l,{type:"MultiPolygon",coordinates:f})}else if(l.type==="Feature"){const f=l.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new To(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new To(l,l)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(r,l){const f=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=r.canonicalID();if(l.type==="Polygon"){const E=Fa(l.coordinates,_,b),P=Ml(r.geometry(),f,_,b);if(!Ti(f,_))return!1;for(const B of P)if(!ds(B,E))return!1}if(l.type==="MultiPolygon"){const E=Us(l.coordinates,_,b),P=Ml(r.geometry(),f,_,b);if(!Ti(f,_))return!1;for(const B of P)if(!Al(B,E))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(r,l){const f=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=r.canonicalID();if(l.type==="Polygon"){const E=Fa(l.coordinates,_,b),P=kl(r.geometry(),f,_,b);if(!Ti(f,_))return!1;for(const B of P)if(!Su(B,E))return!1}if(l.type==="MultiPolygon"){const E=Us(l.coordinates,_,b),P=kl(r.geometry(),f,_,b);if(!Ti(f,_))return!1;for(const B of P)if(!Ki(B,E))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Oa=class{constructor(n=[],t=(r,l)=>r<l?-1:r>l?1:0){if(this.data=n,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:t,compare:r}=this,l=t[n];for(;n>0;){const f=n-1>>1,_=t[f];if(r(l,_)>=0)break;t[n]=_,n=f}t[n]=l}_down(n){const{data:t,compare:r}=this,l=this.length>>1,f=t[n];for(;n<l;){let _=1+(n<<1);const b=_+1;if(b<this.length&&r(t[b],t[_])<0&&(_=b),r(t[_],f)>=0)break;t[n]=t[_],n=_}t[n]=f}};function rc(n,t,r,l,f){ic(n,t,r,l||n.length-1,f||jc)}function ic(n,t,r,l,f){for(;l>r;){if(l-r>600){var _=l-r+1,b=t-r+1,E=Math.log(_),P=.5*Math.exp(2*E/3),B=.5*Math.sqrt(E*P*(_-P)/_)*(b-_/2<0?-1:1);ic(n,t,Math.max(r,Math.floor(t-b*P/_+B)),Math.min(l,Math.floor(t+(_-b)*P/_+B)),f)}var Y=n[t],ie=r,fe=l;for(il(n,r,t),f(n[l],Y)>0&&il(n,r,l);ie<fe;){for(il(n,ie,fe),ie++,fe--;f(n[ie],Y)<0;)ie++;for(;f(n[fe],Y)>0;)fe--}f(n[r],Y)===0?il(n,r,fe):il(n,++fe,l),fe<=t&&(r=fe+1),t<=fe&&(l=fe-1)}}function il(n,t,r){var l=n[t];n[t]=n[r],n[r]=l}function jc(n,t){return n<t?-1:n>t?1:0}function fs(n,t){if(n.length<=1)return[n];const r=[];let l,f;for(const _ of n){const b=ja(_);b!==0&&(_.area=Math.abs(b),f===void 0&&(f=b<0),f===b<0?(l&&r.push(l),l=[_]):l.push(_))}if(l&&r.push(l),t>1)for(let _=0;_<r.length;_++)r[_].length<=t||(rc(r[_],t,1,r[_].length-1,Lc),r[_]=r[_].slice(0,t));return r}function Lc(n,t){return t.area-n.area}function ja(n){let t=0;for(let r,l,f=0,_=n.length,b=_-1;f<_;b=f++)r=n[f],l=n[b],t+=(l.x-r.x)*(r.y+l.y);return t}const Eu=1/298.257223563,Io=Eu*(2-Eu),oc=Math.PI/180;class zl{constructor(t){const r=6378.137*oc*1e3,l=Math.cos(t*oc),f=1/(1-Io*(1-l*l)),_=Math.sqrt(f);this.kx=r*_*l,this.ky=r*_*f*(1-Io)}distance(t,r){const l=this.wrap(t[0]-r[0])*this.kx,f=(t[1]-r[1])*this.ky;return Math.sqrt(l*l+f*f)}pointOnLine(t,r){let l,f,_,b,E=1/0;for(let P=0;P<t.length-1;P++){let B=t[P][0],Y=t[P][1],ie=this.wrap(t[P+1][0]-B)*this.kx,fe=(t[P+1][1]-Y)*this.ky,ge=0;ie===0&&fe===0||(ge=(this.wrap(r[0]-B)*this.kx*ie+(r[1]-Y)*this.ky*fe)/(ie*ie+fe*fe),ge>1?(B=t[P+1][0],Y=t[P+1][1]):ge>0&&(B+=ie/this.kx*ge,Y+=fe/this.ky*ge)),ie=this.wrap(r[0]-B)*this.kx,fe=(r[1]-Y)*this.ky;const Ee=ie*ie+fe*fe;Ee<E&&(E=Ee,l=B,f=Y,_=P,b=ge)}return{point:[l,f],index:_,t:Math.max(0,Math.min(1,b))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function sc(n,t){return t[0]-n[0]}function Rl(n){return n[1]-n[0]+1}function Co(n,t){return n[1]>=n[0]&&n[1]<t}function Tu(n,t){if(n[0]>n[1])return[null,null];const r=Rl(n);if(t){if(r===2)return[n,null];const f=Math.floor(r/2);return[[n[0],n[0]+f],[n[0]+f,n[1]]]}if(r===1)return[n,null];const l=Math.floor(r/2)-1;return[[n[0],n[0]+l],[n[0]+l+1,n[1]]]}function Vs(n,t){if(!Co(t,n.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let l=t[0];l<=t[1];++l)Ns(r,n[l]);return r}function Iu(n){const t=[1/0,1/0,-1/0,-1/0];for(const r of n)for(const l of r)Ns(t,l);return t}function Fl(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function La(n,t,r){if(!Fl(n)||!Fl(t))return NaN;let l=0,f=0;return n[2]<t[0]&&(l=t[0]-n[2]),n[0]>t[2]&&(l=n[0]-t[2]),n[1]>t[3]&&(f=n[1]-t[3]),n[3]<t[1]&&(f=t[1]-n[3]),r.distance([0,0],[l,f])}function ps(n,t,r){const l=r.pointOnLine(t,n);return r.distance(n,l.point)}function Ol(n,t,r,l,f){const _=Math.min(ps(n,[r,l],f),ps(t,[r,l],f)),b=Math.min(ps(r,[n,t],f),ps(l,[n,t],f));return Math.min(_,b)}function Dc(n,t,r,l,f){if(!Co(t,n.length)||!Co(l,r.length))return 1/0;let _=1/0;for(let b=t[0];b<t[1];++b){const E=n[b],P=n[b+1];for(let B=l[0];B<l[1];++B){const Y=r[B],ie=r[B+1];if(hs(E,P,Y,ie))return 0;_=Math.min(_,Ol(E,P,Y,ie,f))}}return _}function Br(n,t,r,l,f){if(!Co(t,n.length)||!Co(l,r.length))return NaN;let _=1/0;for(let b=t[0];b<=t[1];++b)for(let E=l[0];E<=l[1];++E)if(_=Math.min(_,f.distance(n[b],r[E])),_===0)return _;return _}function jl(n,t,r){if(ds(n,t,!0))return 0;let l=1/0;for(const f of t){const _=f[0],b=f[f.length-1];if(_!==b&&(l=Math.min(l,ps(n,[b,_],r)),l===0))return l;const E=r.pointOnLine(f,n);if(l=Math.min(l,r.distance(n,E.point)),l===0)return l}return l}function Vn(n,t,r,l){if(!Co(t,n.length))return NaN;for(let _=t[0];_<=t[1];++_)if(ds(n[_],r,!0))return 0;let f=1/0;for(let _=t[0];_<t[1];++_){const b=n[_],E=n[_+1];for(const P of r)for(let B=0,Y=P.length,ie=Y-1;B<Y;ie=B++){const fe=P[ie],ge=P[B];if(hs(b,E,fe,ge))return 0;f=Math.min(f,Ol(b,E,fe,ge,l))}}return f}function Ll(n,t){for(const r of n)for(const l of r)if(ds(l,t,!0))return!0;return!1}function xr(n,t,r,l=1/0){const f=Iu(n),_=Iu(t);if(l!==1/0&&La(f,_,r)>=l)return l;if(Ti(f,_)){if(Ll(n,t))return 0}else if(Ll(t,n))return 0;let b=1/0;for(const E of n)for(let P=0,B=E.length,Y=B-1;P<B;Y=P++){const ie=E[Y],fe=E[P];for(const ge of t)for(let Ee=0,ke=ge.length,Ge=ke-1;Ee<ke;Ge=Ee++){const Ye=ge[Ge],dt=ge[Ee];if(hs(ie,fe,Ye,dt))return 0;b=Math.min(b,Ol(ie,fe,Ye,dt,r))}}return b}function ir(n,t,r,l,f,_){if(!_)return;const b=La(Vs(l,_),f,r);b<t&&n.push([b,_,[0,0]])}function Po(n,t,r,l,f,_,b){if(!_||!b)return;const E=La(Vs(l,_),Vs(f,b),r);E<t&&n.push([E,_,b])}function Vo(n,t,r,l,f=1/0){let _=Math.min(l.distance(n[0],r[0][0]),f);if(_===0)return _;const b=new Oa([[0,[0,n.length-1],[0,0]]],sc),E=Iu(r);for(;b.length>0;){const P=b.pop();if(P[0]>=_)continue;const B=P[1],Y=t?50:100;if(Rl(B)<=Y){if(!Co(B,n.length))return NaN;if(t){const ie=Vn(n,B,r,l);if(isNaN(ie)||ie===0)return ie;_=Math.min(_,ie)}else for(let ie=B[0];ie<=B[1];++ie){const fe=jl(n[ie],r,l);if(_=Math.min(_,fe),_===0)return 0}}else{const ie=Tu(B,t);ir(b,_,l,n,E,ie[0]),ir(b,_,l,n,E,ie[1])}}return _}function Ao(n,t,r,l,f,_=1/0){let b=Math.min(_,f.distance(n[0],r[0]));if(b===0)return b;const E=new Oa([[0,[0,n.length-1],[0,r.length-1]]],sc);for(;E.length>0;){const P=E.pop();if(P[0]>=b)continue;const B=P[1],Y=P[2],ie=t?50:100,fe=l?50:100;if(Rl(B)<=ie&&Rl(Y)<=fe){if(!Co(B,n.length)&&Co(Y,r.length))return NaN;let ge;if(t&&l)ge=Dc(n,B,r,Y,f),b=Math.min(b,ge);else if(t&&!l){const Ee=n.slice(B[0],B[1]+1);for(let ke=Y[0];ke<=Y[1];++ke)if(ge=ps(r[ke],Ee,f),b=Math.min(b,ge),b===0)return b}else if(!t&&l){const Ee=r.slice(Y[0],Y[1]+1);for(let ke=B[0];ke<=B[1];++ke)if(ge=ps(n[ke],Ee,f),b=Math.min(b,ge),b===0)return b}else ge=Br(n,B,r,Y,f),b=Math.min(b,ge)}else{const ge=Tu(B,t),Ee=Tu(Y,l);Po(E,b,f,n,r,ge[0],Ee[0]),Po(E,b,f,n,r,ge[0],Ee[1]),Po(E,b,f,n,r,ge[1],Ee[0]),Po(E,b,f,n,r,ge[1],Ee[1])}}return b}function di(n){return n.type==="MultiPolygon"?n.coordinates.map(t=>({type:"Polygon",coordinates:t})):n.type==="MultiLineString"?n.coordinates.map(t=>({type:"LineString",coordinates:t})):n.type==="MultiPoint"?n.coordinates.map(t=>({type:"Point",coordinates:t})):[n]}class Vi{constructor(t,r){this.type=Qe,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fi(t[1])){const l=t[1];if(l.type==="FeatureCollection")return new Vi(l,l.features.map(f=>di(f.geometry)).flat());if(l.type==="Feature")return new Vi(l,di(l.geometry));if("type"in l&&"coordinates"in l)return new Vi(l,di(l))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(r,l){const f=r.geometry(),_=f.flat().map(P=>rl([P.x,P.y],r.canonical));if(f.length===0)return NaN;const b=new zl(_[0][1]);let E=1/0;for(const P of l){switch(P.type){case"Point":E=Math.min(E,Ao(_,!1,[P.coordinates],!1,b,E));break;case"LineString":E=Math.min(E,Ao(_,!1,P.coordinates,!0,b,E));break;case"Polygon":E=Math.min(E,Vo(_,!1,P.coordinates,b,E))}if(E===0)return E}return E}(t,this.geometries);if(t.geometryType()==="LineString")return function(r,l){const f=r.geometry(),_=f.flat().map(P=>rl([P.x,P.y],r.canonical));if(f.length===0)return NaN;const b=new zl(_[0][1]);let E=1/0;for(const P of l){switch(P.type){case"Point":E=Math.min(E,Ao(_,!0,[P.coordinates],!1,b,E));break;case"LineString":E=Math.min(E,Ao(_,!0,P.coordinates,!0,b,E));break;case"Polygon":E=Math.min(E,Vo(_,!0,P.coordinates,b,E))}if(E===0)return E}return E}(t,this.geometries);if(t.geometryType()==="Polygon")return function(r,l){const f=r.geometry();if(f.length===0||f[0].length===0)return NaN;const _=fs(f,0).map(P=>P.map(B=>B.map(Y=>rl([Y.x,Y.y],r.canonical)))),b=new zl(_[0][0][0][1]);let E=1/0;for(const P of l)for(const B of _){switch(P.type){case"Point":E=Math.min(E,Vo([P.coordinates],!1,B,b,E));break;case"LineString":E=Math.min(E,Vo(P.coordinates,!0,B,b,E));break;case"Polygon":E=Math.min(E,xr(B,P.coordinates,b,E))}if(E===0)return E}return E}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ms={"==":xu,"!=":wu,">":ec,"<":nl,">=":ia,"<=":Oc,array:Dr,at:na,boolean:Dr,case:el,coalesce:so,collator:us,format:oa,image:bu,in:Xi,"index-of":Ls,interpolate:hi,"interpolate-hcl":hi,"interpolate-lab":hi,length:Cl,let:io,literal:Eo,match:cr,number:Dr,"number-format":cs,object:Dr,slice:za,step:Ds,string:Dr,"to-boolean":Ui,"to-color":Ui,"to-number":Ui,"to-string":Ui,var:nr,within:To,distance:Vi};class Oi{constructor(t,r,l,f){this.name=t,this.type=r,this._evaluate=l,this.args=f}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){const l=t[0],f=Oi.definitions[l];if(!f)return r.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(f)?f[0]:f.type,b=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,E=b.filter(([B])=>!Array.isArray(B)||B.length===t.length-1);let P=null;for(const[B,Y]of E){P=new ls(r.registry,Mo,r.path,null,r.scope);const ie=[];let fe=!1;for(let ge=1;ge<t.length;ge++){const Ee=t[ge],ke=Array.isArray(B)?B[ge-1]:B.type,Ge=P.parse(Ee,1+ie.length,ke);if(!Ge){fe=!0;break}ie.push(Ge)}if(!fe)if(Array.isArray(B)&&B.length!==ie.length)P.error(`Expected ${B.length} arguments, but found ${ie.length} instead.`);else{for(let ge=0;ge<ie.length;ge++){const Ee=Array.isArray(B)?B[ge]:B.type,ke=ie[ge];P.concat(ge+1).checkSubtype(Ee,ke.type)}if(P.errors.length===0)return new Oi(l,_,Y,ie)}}if(E.length===1)r.errors.push(...P.errors);else{const B=(E.length?E:b).map(([ie])=>{return fe=ie,Array.isArray(fe)?`(${fe.map(pe).join(", ")})`:`(${pe(fe.type)}...)`;var fe}).join(" | "),Y=[];for(let ie=1;ie<t.length;ie++){const fe=r.parse(t[ie],1+Y.length);if(!fe)return null;Y.push(pe(fe.type))}r.error(`Expected arguments of type ${B}, but found (${Y.join(", ")}) instead.`)}return null}static register(t,r){Oi.definitions=r;for(const l in r)t[l]=Oi}}function $s(n,[t,r,l,f]){t=t.evaluate(n),r=r.evaluate(n),l=l.evaluate(n);const _=f?f.evaluate(n):1,b=Ri(t,r,l,_);if(b)throw new Gr(b);return new Pn(t/255,r/255,l/255,_,!1)}function Da(n,t){return n in t}function Ba(n,t){const r=t[n];return r===void 0?null:r}function mi(n){return{type:n}}function Mo(n){if(n instanceof nr)return Mo(n.boundExpression);if(n instanceof Oi&&n.name==="error"||n instanceof us||n instanceof To||n instanceof Vi)return!1;const t=n instanceof Ui||n instanceof Dr;let r=!0;return n.eachChild(l=>{r=t?r&&Mo(l):r&&l instanceof Eo}),!!r&&aa(n)&&lo(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function aa(n){if(n instanceof Oi&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof To||n instanceof Vi)return!1;let t=!0;return n.eachChild(r=>{t&&!aa(r)&&(t=!1)}),t}function Yi(n){if(n instanceof Oi&&n.name==="feature-state")return!1;let t=!0;return n.eachChild(r=>{t&&!Yi(r)&&(t=!1)}),t}function lo(n,t){if(n instanceof Oi&&t.indexOf(n.name)>=0)return!1;let r=!0;return n.eachChild(l=>{r&&!lo(l,t)&&(r=!1)}),r}function ol(n){return{result:"success",value:n}}function $o(n){return{result:"error",value:n}}function la(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function Dl(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function uo(n){return!!n.expression&&n.expression.interpolated}function er(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function sl(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Cu(n){return n}function al(n,t){const r=t.type==="color",l=n.stops&&typeof n.stops[0][0]=="object",f=l||!(l||n.property!==void 0),_=n.type||(uo(t)?"exponential":"interval");if(r||t.type==="padding"){const Y=r?Pn.parse:Si.parse;(n=q({},n)).stops&&(n.stops=n.stops.map(ie=>[ie[0],Y(ie[1])])),n.default=Y(n.default?n.default:t.default)}if(n.colorSpace&&(b=n.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${n.colorSpace}"`);var b;let E,P,B;if(_==="exponential")E=ee;else if(_==="interval")E=ll;else if(_==="categorical"){E=Pu,P=Object.create(null);for(const Y of n.stops)P[Y[0]]=Y[1];B=typeof n.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);E=Ie}if(l){const Y={},ie=[];for(let Ee=0;Ee<n.stops.length;Ee++){const ke=n.stops[Ee],Ge=ke[0].zoom;Y[Ge]===void 0&&(Y[Ge]={zoom:Ge,type:n.type,property:n.property,default:n.default,stops:[]},ie.push(Ge)),Y[Ge].stops.push([ke[0].value,ke[1]])}const fe=[];for(const Ee of ie)fe.push([Y[Ee].zoom,al(Y[Ee],t)]);const ge={name:"linear"};return{kind:"composite",interpolationType:ge,interpolationFactor:hi.interpolationFactor.bind(void 0,ge),zoomStops:fe.map(Ee=>Ee[0]),evaluate:({zoom:Ee},ke)=>ee({stops:fe,base:n.base},t,Ee).evaluate(Ee,ke)}}if(f){const Y=_==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:Y,interpolationFactor:hi.interpolationFactor.bind(void 0,Y),zoomStops:n.stops.map(ie=>ie[0]),evaluate:({zoom:ie})=>E(n,t,ie,P,B)}}return{kind:"source",evaluate(Y,ie){const fe=ie&&ie.properties?ie.properties[n.property]:void 0;return fe===void 0?ua(n.default,t.default):E(n,t,fe,P,B)}}}function ua(n,t,r){return n!==void 0?n:t!==void 0?t:r!==void 0?r:void 0}function Pu(n,t,r,l,f){return ua(typeof r===f?l[r]:void 0,n.default,t.default)}function ll(n,t,r){if(er(r)!=="number")return ua(n.default,t.default);const l=n.stops.length;if(l===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[l-1][0])return n.stops[l-1][1];const f=Ra(n.stops.map(_=>_[0]),r);return n.stops[f][1]}function ee(n,t,r){const l=n.base!==void 0?n.base:1;if(er(r)!=="number")return ua(n.default,t.default);const f=n.stops.length;if(f===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[f-1][0])return n.stops[f-1][1];const _=Ra(n.stops.map(Y=>Y[0]),r),b=function(Y,ie,fe,ge){const Ee=ge-fe,ke=Y-fe;return Ee===0?0:ie===1?ke/Ee:(Math.pow(ie,ke)-1)/(Math.pow(ie,Ee)-1)}(r,l,n.stops[_][0],n.stops[_+1][0]),E=n.stops[_][1],P=n.stops[_+1][1],B=Hr[t.type]||Cu;return typeof E.evaluate=="function"?{evaluate(...Y){const ie=E.evaluate.apply(void 0,Y),fe=P.evaluate.apply(void 0,Y);if(ie!==void 0&&fe!==void 0)return B(ie,fe,b,n.colorSpace)}}:B(E,P,b,n.colorSpace)}function Ie(n,t,r){switch(t.type){case"color":r=Pn.parse(r);break;case"formatted":r=Jr.fromString(r.toString());break;case"resolvedImage":r=Ei.fromString(r.toString());break;case"padding":r=Si.parse(r);break;default:er(r)===t.type||t.type==="enum"&&t.values[r]||(r=void 0)}return ua(r,n.default,t.default)}Oi.register(ms,{error:[{kind:"error"},[Ot],(n,[t])=>{throw new Gr(t.evaluate(n))}],typeof:[Ot,[Xt],(n,[t])=>pe(fr(t.evaluate(n)))],"to-rgba":[me(Qe,4),[zn],(n,[t])=>{const[r,l,f,_]=t.evaluate(n).rgb;return[255*r,255*l,255*f,_]}],rgb:[zn,[Qe,Qe,Qe],$s],rgba:[zn,[Qe,Qe,Qe,Qe],$s],has:{type:Bt,overloads:[[[Ot],(n,[t])=>Da(t.evaluate(n),n.properties())],[[Ot,Zn],(n,[t,r])=>Da(t.evaluate(n),r.evaluate(n))]]},get:{type:Xt,overloads:[[[Ot],(n,[t])=>Ba(t.evaluate(n),n.properties())],[[Ot,Zn],(n,[t,r])=>Ba(t.evaluate(n),r.evaluate(n))]]},"feature-state":[Xt,[Ot],(n,[t])=>Ba(t.evaluate(n),n.featureState||{})],properties:[Zn,[],n=>n.properties()],"geometry-type":[Ot,[],n=>n.geometryType()],id:[Xt,[],n=>n.id()],zoom:[Qe,[],n=>n.globals.zoom],"heatmap-density":[Qe,[],n=>n.globals.heatmapDensity||0],"line-progress":[Qe,[],n=>n.globals.lineProgress||0],accumulated:[Xt,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Qe,mi(Qe),(n,t)=>{let r=0;for(const l of t)r+=l.evaluate(n);return r}],"*":[Qe,mi(Qe),(n,t)=>{let r=1;for(const l of t)r*=l.evaluate(n);return r}],"-":{type:Qe,overloads:[[[Qe,Qe],(n,[t,r])=>t.evaluate(n)-r.evaluate(n)],[[Qe],(n,[t])=>-t.evaluate(n)]]},"/":[Qe,[Qe,Qe],(n,[t,r])=>t.evaluate(n)/r.evaluate(n)],"%":[Qe,[Qe,Qe],(n,[t,r])=>t.evaluate(n)%r.evaluate(n)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(n,[t,r])=>Math.pow(t.evaluate(n),r.evaluate(n))],sqrt:[Qe,[Qe],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[Qe,[Qe],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[Qe,[Qe],(n,[t])=>Math.log(t.evaluate(n))],log2:[Qe,[Qe],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[Qe,[Qe],(n,[t])=>Math.sin(t.evaluate(n))],cos:[Qe,[Qe],(n,[t])=>Math.cos(t.evaluate(n))],tan:[Qe,[Qe],(n,[t])=>Math.tan(t.evaluate(n))],asin:[Qe,[Qe],(n,[t])=>Math.asin(t.evaluate(n))],acos:[Qe,[Qe],(n,[t])=>Math.acos(t.evaluate(n))],atan:[Qe,[Qe],(n,[t])=>Math.atan(t.evaluate(n))],min:[Qe,mi(Qe),(n,t)=>Math.min(...t.map(r=>r.evaluate(n)))],max:[Qe,mi(Qe),(n,t)=>Math.max(...t.map(r=>r.evaluate(n)))],abs:[Qe,[Qe],(n,[t])=>Math.abs(t.evaluate(n))],round:[Qe,[Qe],(n,[t])=>{const r=t.evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[Qe,[Qe],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[Qe,[Qe],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[Bt,[Ot,Xt],(n,[t,r])=>n.properties()[t.value]===r.value],"filter-id-==":[Bt,[Xt],(n,[t])=>n.id()===t.value],"filter-type-==":[Bt,[Ot],(n,[t])=>n.geometryType()===t.value],"filter-<":[Bt,[Ot,Xt],(n,[t,r])=>{const l=n.properties()[t.value],f=r.value;return typeof l==typeof f&&l<f}],"filter-id-<":[Bt,[Xt],(n,[t])=>{const r=n.id(),l=t.value;return typeof r==typeof l&&r<l}],"filter->":[Bt,[Ot,Xt],(n,[t,r])=>{const l=n.properties()[t.value],f=r.value;return typeof l==typeof f&&l>f}],"filter-id->":[Bt,[Xt],(n,[t])=>{const r=n.id(),l=t.value;return typeof r==typeof l&&r>l}],"filter-<=":[Bt,[Ot,Xt],(n,[t,r])=>{const l=n.properties()[t.value],f=r.value;return typeof l==typeof f&&l<=f}],"filter-id-<=":[Bt,[Xt],(n,[t])=>{const r=n.id(),l=t.value;return typeof r==typeof l&&r<=l}],"filter->=":[Bt,[Ot,Xt],(n,[t,r])=>{const l=n.properties()[t.value],f=r.value;return typeof l==typeof f&&l>=f}],"filter-id->=":[Bt,[Xt],(n,[t])=>{const r=n.id(),l=t.value;return typeof r==typeof l&&r>=l}],"filter-has":[Bt,[Xt],(n,[t])=>t.value in n.properties()],"filter-has-id":[Bt,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Bt,[me(Ot)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[Bt,[me(Xt)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[Bt,[Ot,me(Xt)],(n,[t,r])=>r.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[Bt,[Ot,me(Xt)],(n,[t,r])=>function(l,f,_,b){for(;_<=b;){const E=_+b>>1;if(f[E]===l)return!0;f[E]>l?b=E-1:_=E+1}return!1}(n.properties()[t.value],r.value,0,r.value.length-1)],all:{type:Bt,overloads:[[[Bt,Bt],(n,[t,r])=>t.evaluate(n)&&r.evaluate(n)],[mi(Bt),(n,t)=>{for(const r of t)if(!r.evaluate(n))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],(n,[t,r])=>t.evaluate(n)||r.evaluate(n)],[mi(Bt),(n,t)=>{for(const r of t)if(r.evaluate(n))return!0;return!1}]]},"!":[Bt,[Bt],(n,[t])=>!t.evaluate(n)],"is-supported-script":[Bt,[Ot],(n,[t])=>{const r=n.globals&&n.globals.isSupportedScript;return!r||r(t.evaluate(n))}],upcase:[Ot,[Ot],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[Ot,[Ot],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[Ot,mi(Xt),(n,t)=>t.map(r=>Qa(r.evaluate(n))).join("")],"resolved-locale":[Ot,[Fr],(n,[t])=>t.evaluate(n).resolvedLocale()]});class We{constructor(t,r){var l;this.expression=t,this._warningHistory={},this._evaluator=new El,this._defaultValue=r?(l=r).type==="color"&&sl(l.default)?new Pn(0,0,0,0):l.type==="color"?Pn.parse(l.default)||null:l.type==="padding"?Si.parse(l.default)||null:l.type==="variableAnchorOffsetCollection"?qi.parse(l.default)||null:l.default===void 0?null:l.default:null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,l,f,_,b){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=l,this._evaluator.canonical=f,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(t,r,l,f,_,b){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=l||null,this._evaluator.canonical=f,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Gr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function wt(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in ms}function Kt(n,t){const r=new ls(ms,Mo,[],t?function(f){const _={color:zn,string:Ot,number:Qe,enum:Ot,boolean:Bt,formatted:Kr,padding:Yr,resolvedImage:Cr,variableAnchorOffsetCollection:Ue};return f.type==="array"?me(_[f.value]||Xt,f.length):_[f.type]}(t):void 0),l=r.parse(n,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?ol(new We(l,t)):$o(r.errors)}class Nt{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!Yi(r.expression)}evaluateWithoutErrorHandling(t,r,l,f,_,b){return this._styleExpression.evaluateWithoutErrorHandling(t,r,l,f,_,b)}evaluate(t,r,l,f,_,b){return this._styleExpression.evaluate(t,r,l,f,_,b)}}class ln{constructor(t,r,l,f){this.kind=t,this.zoomStops=l,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!Yi(r.expression),this.interpolationType=f}evaluateWithoutErrorHandling(t,r,l,f,_,b){return this._styleExpression.evaluateWithoutErrorHandling(t,r,l,f,_,b)}evaluate(t,r,l,f,_,b){return this._styleExpression.evaluate(t,r,l,f,_,b)}interpolationFactor(t,r,l){return this.interpolationType?hi.interpolationFactor(this.interpolationType,t,r,l):0}}function Sn(n,t){const r=Kt(n,t);if(r.result==="error")return r;const l=r.value.expression,f=aa(l);if(!f&&!la(t))return $o([new Re("","data expressions not supported")]);const _=lo(l,["zoom"]);if(!_&&!Dl(t))return $o([new Re("","zoom expressions not supported")]);const b=pr(l);return b||_?b instanceof Re?$o([b]):b instanceof hi&&!uo(t)?$o([new Re("",'"interpolate" expressions cannot be used with this property')]):ol(b?new ln(f?"camera":"composite",r.value,b.labels,b instanceof hi?b.interpolation:void 0):new Nt(f?"constant":"source",r.value)):$o([new Re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ln{constructor(t,r){this._parameters=t,this._specification=r,q(this,al(this._parameters,this._specification))}static deserialize(t){return new Ln(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function pr(n){let t=null;if(n instanceof io)t=pr(n.result);else if(n instanceof so){for(const r of n.args)if(t=pr(r),t)break}else(n instanceof Ds||n instanceof hi)&&n.input instanceof Oi&&n.input.name==="zoom"&&(t=n);return t instanceof Re||n.eachChild(r=>{const l=pr(r);l instanceof Re?t=l:!t&&l?t=new Re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&l&&t!==l&&(t=new Re("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ar(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!ar(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const hr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nr(n){if(n==null)return{filter:()=>!0,needGeometry:!1};ar(n)||(n=co(n));const t=Kt(n,hr);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return{filter:(r,l,f)=>t.value.evaluate(r,l,{},f),needGeometry:ei(n)}}function Qr(n,t){return n<t?-1:n>t?1:0}function ei(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let t=1;t<n.length;t++)if(ei(n[t]))return!0;return!1}function co(n){if(!n)return!0;const t=n[0];return n.length<=1?t!=="any":t==="=="?$i(n[1],n[2],"=="):t==="!="?ti($i(n[1],n[2],"==")):t==="<"||t===">"||t==="<="||t===">="?$i(n[1],n[2],t):t==="any"?(r=n.slice(1),["any"].concat(r.map(co))):t==="all"?["all"].concat(n.slice(1).map(co)):t==="none"?["all"].concat(n.slice(1).map(co).map(ti)):t==="in"?Ii(n[1],n.slice(2)):t==="!in"?ti(Ii(n[1],n.slice(2))):t==="has"?Gs(n[1]):t!=="!has"||ti(Gs(n[1]));var r}function $i(n,t,r){switch(n){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,n,t]}}function Ii(n,t){if(t.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(r=>typeof r!=typeof t[0])?["filter-in-large",n,["literal",t.sort(Qr)]]:["filter-in-small",n,["literal",t]]}}function Gs(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function ti(n){return["!",n]}function Ji(n){const t=typeof n;if(t==="number"||t==="boolean"||t==="string"||n==null)return JSON.stringify(n);if(Array.isArray(n)){let f="[";for(const _ of n)f+=`${Ji(_)},`;return`${f}]`}const r=Object.keys(n).sort();let l="{";for(let f=0;f<r.length;f++)l+=`${JSON.stringify(r[f])}:${Ji(n[r[f]])},`;return`${l}}`}function Bc(n){let t="";for(const r of kn)t+=`/${Ji(n[r])}`;return t}function Nc(n){const t=n.value;return t?[new z(n.key,t,"constants have been deprecated as of v8")]:[]}function Zr(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Go(n){if(Array.isArray(n))return n.map(Go);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const r in n)t[r]=Go(n[r]);return t}return Zr(n)}function ho(n){const t=n.key,r=n.value,l=n.valueSpec||{},f=n.objectElementValidators||{},_=n.style,b=n.styleSpec,E=n.validateSpec;let P=[];const B=er(r);if(B!=="object")return[new z(t,r,`object expected, ${B} found`)];for(const Y in r){const ie=Y.split(".")[0],fe=l[ie]||l["*"];let ge;if(f[ie])ge=f[ie];else if(l[ie])ge=E;else if(f["*"])ge=f["*"];else{if(!l["*"]){P.push(new z(t,r[Y],`unknown property "${Y}"`));continue}ge=E}P=P.concat(ge({key:(t&&`${t}.`)+Y,value:r[Y],valueSpec:fe,style:_,styleSpec:b,object:r,objectKey:Y,validateSpec:E},r))}for(const Y in l)f[Y]||l[Y].required&&l[Y].default===void 0&&r[Y]===void 0&&P.push(new z(t,r,`missing required property "${Y}"`));return P}function Bl(n){const t=n.value,r=n.valueSpec,l=n.style,f=n.styleSpec,_=n.key,b=n.arrayElementValidator||n.validateSpec;if(er(t)!=="array")return[new z(_,t,`array expected, ${er(t)} found`)];if(r.length&&t.length!==r.length)return[new z(_,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new z(_,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let E={type:r.value,values:r.values};f.$version<7&&(E.function=r.function),er(r.value)==="object"&&(E=r.value);let P=[];for(let B=0;B<t.length;B++)P=P.concat(b({array:t,arrayIndex:B,value:t[B],valueSpec:E,validateSpec:n.validateSpec,style:l,styleSpec:f,key:`${_}[${B}]`}));return P}function Hs(n){const t=n.key,r=n.value,l=n.valueSpec;let f=er(r);return f==="number"&&r!=r&&(f="NaN"),f!=="number"?[new z(t,r,`number expected, ${f} found`)]:"minimum"in l&&r<l.minimum?[new z(t,r,`${r} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&r>l.maximum?[new z(t,r,`${r} is greater than the maximum value ${l.maximum}`)]:[]}function Nl(n){const t=n.valueSpec,r=Zr(n.value.type);let l,f,_,b={};const E=r!=="categorical"&&n.value.property===void 0,P=!E,B=er(n.value.stops)==="array"&&er(n.value.stops[0])==="array"&&er(n.value.stops[0][0])==="object",Y=ho({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(ge){if(r==="identity")return[new z(ge.key,ge.value,'identity function may not have a "stops" property')];let Ee=[];const ke=ge.value;return Ee=Ee.concat(Bl({key:ge.key,value:ke,valueSpec:ge.valueSpec,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec,arrayElementValidator:ie})),er(ke)==="array"&&ke.length===0&&Ee.push(new z(ge.key,ke,"array must have at least one stop")),Ee},default:function(ge){return ge.validateSpec({key:ge.key,value:ge.value,valueSpec:t,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec})}}});return r==="identity"&&E&&Y.push(new z(n.key,n.value,'missing required property "property"')),r==="identity"||n.value.stops||Y.push(new z(n.key,n.value,'missing required property "stops"')),r==="exponential"&&n.valueSpec.expression&&!uo(n.valueSpec)&&Y.push(new z(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(P&&!la(n.valueSpec)?Y.push(new z(n.key,n.value,"property functions not supported")):E&&!Dl(n.valueSpec)&&Y.push(new z(n.key,n.value,"zoom functions not supported"))),r!=="categorical"&&!B||n.value.property!==void 0||Y.push(new z(n.key,n.value,'"property" property is required')),Y;function ie(ge){let Ee=[];const ke=ge.value,Ge=ge.key;if(er(ke)!=="array")return[new z(Ge,ke,`array expected, ${er(ke)} found`)];if(ke.length!==2)return[new z(Ge,ke,`array length 2 expected, length ${ke.length} found`)];if(B){if(er(ke[0])!=="object")return[new z(Ge,ke,`object expected, ${er(ke[0])} found`)];if(ke[0].zoom===void 0)return[new z(Ge,ke,"object stop key must have zoom")];if(ke[0].value===void 0)return[new z(Ge,ke,"object stop key must have value")];if(_&&_>Zr(ke[0].zoom))return[new z(Ge,ke[0].zoom,"stop zoom values must appear in ascending order")];Zr(ke[0].zoom)!==_&&(_=Zr(ke[0].zoom),f=void 0,b={}),Ee=Ee.concat(ho({key:`${Ge}[0]`,value:ke[0],valueSpec:{zoom:{}},validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec,objectElementValidators:{zoom:Hs,value:fe}}))}else Ee=Ee.concat(fe({key:`${Ge}[0]`,value:ke[0],valueSpec:{},validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec},ke));return wt(Go(ke[1]))?Ee.concat([new z(`${Ge}[1]`,ke[1],"expressions are not allowed in function stops.")]):Ee.concat(ge.validateSpec({key:`${Ge}[1]`,value:ke[1],valueSpec:t,validateSpec:ge.validateSpec,style:ge.style,styleSpec:ge.styleSpec}))}function fe(ge,Ee){const ke=er(ge.value),Ge=Zr(ge.value),Ye=ge.value!==null?ge.value:Ee;if(l){if(ke!==l)return[new z(ge.key,Ye,`${ke} stop domain type must match previous stop domain type ${l}`)]}else l=ke;if(ke!=="number"&&ke!=="string"&&ke!=="boolean")return[new z(ge.key,Ye,"stop domain value must be a number, string, or boolean")];if(ke!=="number"&&r!=="categorical"){let dt=`number expected, ${ke} found`;return la(t)&&r===void 0&&(dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(ge.key,Ye,dt)]}return r!=="categorical"||ke!=="number"||isFinite(Ge)&&Math.floor(Ge)===Ge?r!=="categorical"&&ke==="number"&&f!==void 0&&Ge<f?[new z(ge.key,Ye,"stop domain values must appear in ascending order")]:(f=Ge,r==="categorical"&&Ge in b?[new z(ge.key,Ye,"stop domain values must be unique")]:(b[Ge]=!0,[])):[new z(ge.key,Ye,`integer expected, found ${Ge}`)]}}function Na(n){const t=(n.expressionContext==="property"?Sn:Kt)(Go(n.value),n.valueSpec);if(t.result==="error")return t.value.map(l=>new z(`${n.key}${l.key}`,n.value,l.message));const r=t.value.expression||t.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!r.outputDefined())return[new z(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Yi(r))return[new z(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!Yi(r))return[new z(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!lo(r,["zoom","feature-state"]))return[new z(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!aa(r))return[new z(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ca(n){const t=n.key,r=n.value,l=n.valueSpec,f=[];return Array.isArray(l.values)?l.values.indexOf(Zr(r))===-1&&f.push(new z(t,r,`expected one of [${l.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(l.values).indexOf(Zr(r))===-1&&f.push(new z(t,r,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(r)} found`)),f}function Uc(n){return ar(Go(n.value))?Na(q({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ua(n)}function Ua(n){const t=n.value,r=n.key;if(er(t)!=="array")return[new z(r,t,`array expected, ${er(t)} found`)];const l=n.styleSpec;let f,_=[];if(t.length<1)return[new z(r,t,"filter array must have at least 1 element")];switch(_=_.concat(ca({key:`${r}[0]`,value:t[0],valueSpec:l.filter_operator,style:n.style,styleSpec:n.styleSpec})),Zr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Zr(t[1])==="$type"&&_.push(new z(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&_.push(new z(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(f=er(t[1]),f!=="string"&&_.push(new z(`${r}[1]`,t[1],`string expected, ${f} found`)));for(let b=2;b<t.length;b++)f=er(t[b]),Zr(t[1])==="$type"?_=_.concat(ca({key:`${r}[${b}]`,value:t[b],valueSpec:l.geometry_type,style:n.style,styleSpec:n.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&_.push(new z(`${r}[${b}]`,t[b],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let b=1;b<t.length;b++)_=_.concat(Ua({key:`${r}[${b}]`,value:t[b],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":f=er(t[1]),t.length!==2?_.push(new z(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="string"&&_.push(new z(`${r}[1]`,t[1],`string expected, ${f} found`))}return _}function Vc(n,t){const r=n.key,l=n.validateSpec,f=n.style,_=n.styleSpec,b=n.value,E=n.objectKey,P=_[`${t}_${n.layerType}`];if(!P)return[];const B=E.match(/^(.*)-transition$/);if(t==="paint"&&B&&P[B[1]]&&P[B[1]].transition)return l({key:r,value:b,valueSpec:_.transition,style:f,styleSpec:_});const Y=n.valueSpec||P[E];if(!Y)return[new z(r,b,`unknown property "${E}"`)];let ie;if(er(b)==="string"&&la(Y)&&!Y.tokens&&(ie=/^{([^}]+)}$/.exec(b)))return[new z(r,b,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ie[1])} }\`.`)];const fe=[];return n.layerType==="symbol"&&(E==="text-field"&&f&&!f.glyphs&&fe.push(new z(r,b,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&sl(Go(b))&&Zr(b.type)==="identity"&&fe.push(new z(r,b,'"text-font" does not support identity functions'))),fe.concat(l({key:n.key,value:b,valueSpec:Y,style:f,styleSpec:_,expressionContext:"property",propertyType:t,propertyKey:E}))}function Au(n){return Vc(n,"paint")}function ac(n){return Vc(n,"layout")}function Pr(n){let t=[];const r=n.value,l=n.key,f=n.style,_=n.styleSpec;r.type||r.ref||t.push(new z(l,r,'either "type" or "ref" is required'));let b=Zr(r.type);const E=Zr(r.ref);if(r.id){const P=Zr(r.id);for(let B=0;B<n.arrayIndex;B++){const Y=f.layers[B];Zr(Y.id)===P&&t.push(new z(l,r.id,`duplicate layer id "${r.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in r){let P;["type","source","source-layer","filter","layout"].forEach(B=>{B in r&&t.push(new z(l,r[B],`"${B}" is prohibited for ref layers`))}),f.layers.forEach(B=>{Zr(B.id)===E&&(P=B)}),P?P.ref?t.push(new z(l,r.ref,"ref cannot reference another ref layer")):b=Zr(P.type):t.push(new z(l,r.ref,`ref layer "${E}" not found`))}else if(b!=="background")if(r.source){const P=f.sources&&f.sources[r.source],B=P&&Zr(P.type);P?B==="vector"&&b==="raster"?t.push(new z(l,r.source,`layer "${r.id}" requires a raster source`)):B!=="raster-dem"&&b==="hillshade"?t.push(new z(l,r.source,`layer "${r.id}" requires a raster-dem source`)):B==="raster"&&b!=="raster"?t.push(new z(l,r.source,`layer "${r.id}" requires a vector source`)):B!=="vector"||r["source-layer"]?B==="raster-dem"&&b!=="hillshade"?t.push(new z(l,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!r.paint||!r.paint["line-gradient"]||B==="geojson"&&P.lineMetrics||t.push(new z(l,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new z(l,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new z(l,r.source,`source "${r.source}" not found`))}else t.push(new z(l,r,'missing required property "source"'));return t=t.concat(ho({key:l,value:r,valueSpec:_.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*":()=>[],type:()=>n.validateSpec({key:`${l}.type`,value:r.type,valueSpec:_.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:r,objectKey:"type"}),filter:Uc,layout:P=>ho({layer:r,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":B=>ac(q({layerType:b},B))}}),paint:P=>ho({layer:r,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":B=>Au(q({layerType:b},B))}})}})),t}function ha(n){const t=n.value,r=n.key,l=er(t);return l!=="string"?[new z(r,t,`string expected, ${l} found`)]:[]}const ul={promoteId:function({key:n,value:t}){if(er(t)==="string")return ha({key:n,value:t});{const r=[];for(const l in t)r.push(...ha({key:`${n}.${l}`,value:t[l]}));return r}}};function da(n){const t=n.value,r=n.key,l=n.styleSpec,f=n.style,_=n.validateSpec;if(!t.type)return[new z(r,t,'"type" is required')];const b=Zr(t.type);let E;switch(b){case"vector":case"raster":return E=ho({key:r,value:t,valueSpec:l[`source_${b.replace("-","_")}`],style:n.style,styleSpec:l,objectElementValidators:ul,validateSpec:_}),E;case"raster-dem":return E=function(P){var B;const Y=(B=P.sourceName)!==null&&B!==void 0?B:"",ie=P.value,fe=P.styleSpec,ge=fe.source_raster_dem,Ee=P.style;let ke=[];const Ge=er(ie);if(ie===void 0)return ke;if(Ge!=="object")return ke.push(new z("source_raster_dem",ie,`object expected, ${Ge} found`)),ke;const Ye=Zr(ie.encoding)==="custom",dt=["redFactor","greenFactor","blueFactor","baseShift"],it=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const ht in ie)!Ye&&dt.includes(ht)?ke.push(new z(ht,ie[ht],`In "${Y}": "${ht}" is only valid when "encoding" is set to "custom". ${it} encoding found`)):ge[ht]?ke=ke.concat(P.validateSpec({key:ht,value:ie[ht],valueSpec:ge[ht],validateSpec:P.validateSpec,style:Ee,styleSpec:fe})):ke.push(new z(ht,ie[ht],`unknown property "${ht}"`));return ke}({sourceName:r,value:t,style:n.style,styleSpec:l,validateSpec:_}),E;case"geojson":if(E=ho({key:r,value:t,valueSpec:l.source_geojson,style:f,styleSpec:l,validateSpec:_,objectElementValidators:ul}),t.cluster)for(const P in t.clusterProperties){const[B,Y]=t.clusterProperties[P],ie=typeof B=="string"?[B,["accumulated"],["get",P]]:B;E.push(...Na({key:`${r}.${P}.map`,value:Y,validateSpec:_,expressionContext:"cluster-map"})),E.push(...Na({key:`${r}.${P}.reduce`,value:ie,validateSpec:_,expressionContext:"cluster-reduce"}))}return E;case"video":return ho({key:r,value:t,valueSpec:l.source_video,style:f,validateSpec:_,styleSpec:l});case"image":return ho({key:r,value:t,valueSpec:l.source_image,style:f,validateSpec:_,styleSpec:l});case"canvas":return[new z(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ca({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:_,styleSpec:l})}}function lc(n){const t=n.value,r=n.styleSpec,l=r.light,f=n.style;let _=[];const b=er(t);if(t===void 0)return _;if(b!=="object")return _=_.concat([new z("light",t,`object expected, ${b} found`)]),_;for(const E in t){const P=E.match(/^(.*)-transition$/);_=_.concat(P&&l[P[1]]&&l[P[1]].transition?n.validateSpec({key:E,value:t[E],valueSpec:r.transition,validateSpec:n.validateSpec,style:f,styleSpec:r}):l[E]?n.validateSpec({key:E,value:t[E],valueSpec:l[E],validateSpec:n.validateSpec,style:f,styleSpec:r}):[new z(E,t[E],`unknown property "${E}"`)])}return _}function Mu(n){const t=n.value,r=n.styleSpec,l=r.sky,f=n.style,_=er(t);if(t===void 0)return[];if(_!=="object")return[new z("sky",t,`object expected, ${_} found`)];let b=[];for(const E in t)b=b.concat(l[E]?n.validateSpec({key:E,value:t[E],valueSpec:l[E],style:f,styleSpec:r}):[new z(E,t[E],`unknown property "${E}"`)]);return b}function cl(n){const t=n.value,r=n.styleSpec,l=r.terrain,f=n.style;let _=[];const b=er(t);if(t===void 0)return _;if(b!=="object")return _=_.concat([new z("terrain",t,`object expected, ${b} found`)]),_;for(const E in t)_=_.concat(l[E]?n.validateSpec({key:E,value:t[E],valueSpec:l[E],validateSpec:n.validateSpec,style:f,styleSpec:r}):[new z(E,t[E],`unknown property "${E}"`)]);return _}function Ul(n){let t=[];const r=n.value,l=n.key;if(Array.isArray(r)){const f=[],_=[];for(const b in r)r[b].id&&f.includes(r[b].id)&&t.push(new z(l,r,`all the sprites' ids must be unique, but ${r[b].id} is duplicated`)),f.push(r[b].id),r[b].url&&_.includes(r[b].url)&&t.push(new z(l,r,`all the sprites' URLs must be unique, but ${r[b].url} is duplicated`)),_.push(r[b].url),t=t.concat(ho({key:`${l}[${b}]`,value:r[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:n.validateSpec}));return t}return ha({key:l,value:r})}const fa={"*":()=>[],array:Bl,boolean:function(n){const t=n.value,r=n.key,l=er(t);return l!=="boolean"?[new z(r,t,`boolean expected, ${l} found`)]:[]},number:Hs,color:function(n){const t=n.key,r=n.value,l=er(r);return l!=="string"?[new z(t,r,`color expected, ${l} found`)]:Pn.parse(String(r))?[]:[new z(t,r,`color expected, "${r}" found`)]},constants:Nc,enum:ca,filter:Uc,function:Nl,layer:Pr,object:ho,source:da,light:lc,sky:Mu,terrain:cl,projection:function(n){const t=n.value,r=n.styleSpec,l=r.projection,f=n.style,_=er(t);if(t===void 0)return[];if(_!=="object")return[new z("projection",t,`object expected, ${_} found`)];let b=[];for(const E in t)b=b.concat(l[E]?n.validateSpec({key:E,value:t[E],valueSpec:l[E],style:f,styleSpec:r}):[new z(E,t[E],`unknown property "${E}"`)]);return b},string:ha,formatted:function(n){return ha(n).length===0?[]:Na(n)},resolvedImage:function(n){return ha(n).length===0?[]:Na(n)},padding:function(n){const t=n.key,r=n.value;if(er(r)==="array"){if(r.length<1||r.length>4)return[new z(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const l={type:"number"};let f=[];for(let _=0;_<r.length;_++)f=f.concat(n.validateSpec({key:`${t}[${_}]`,value:r[_],validateSpec:n.validateSpec,valueSpec:l}));return f}return Hs({key:t,value:r,valueSpec:{}})},variableAnchorOffsetCollection:function(n){const t=n.key,r=n.value,l=er(r),f=n.styleSpec;if(l!=="array"||r.length<1||r.length%2!=0)return[new z(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let b=0;b<r.length;b+=2)_=_.concat(ca({key:`${t}[${b}]`,value:r[b],valueSpec:f.layout_symbol["text-anchor"]})),_=_.concat(Bl({key:`${t}[${b+1}]`,value:r[b+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:f}));return _},sprite:Ul};function hl(n){const t=n.value,r=n.valueSpec,l=n.styleSpec;return n.validateSpec=hl,r.expression&&sl(Zr(t))?Nl(n):r.expression&&wt(Go(t))?Na(n):r.type&&fa[r.type]?fa[r.type](n):ho(q({},n,{valueSpec:r.type?l[r.type]:r}))}function Oh(n){const t=n.value,r=n.key,l=ha(n);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new z(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new z(r,t,'"glyphs" url must include a "{range}" token'))),l}function Ho(n,t=at){let r=[];return r=r.concat(hl({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,validateSpec:hl,objectElementValidators:{glyphs:Oh,"*":()=>[]}})),n.constants&&(r=r.concat(Nc({key:"constants",value:n.constants,style:n,styleSpec:t,validateSpec:hl}))),Vl(r)}function gs(n){return function(t){return n({...t,validateSpec:hl})}}function Vl(n){return[].concat(n).sort((t,r)=>t.line-r.line)}function fo(n){return function(...t){return Vl(n.apply(this,t))}}Ho.source=fo(gs(da)),Ho.sprite=fo(gs(Ul)),Ho.glyphs=fo(gs(Oh)),Ho.light=fo(gs(lc)),Ho.sky=fo(gs(Mu)),Ho.terrain=fo(gs(cl)),Ho.layer=fo(gs(Pr)),Ho.filter=fo(gs(Uc)),Ho.paintProperty=fo(gs(Au)),Ho.layoutProperty=fo(gs(ac));const pa=Ho,$c=pa.light,Gc=pa.sky,uc=pa.paintProperty,jh=pa.layoutProperty;function cc(n,t){let r=!1;if(t&&t.length)for(const l of t)n.fire(new cn(new Error(l.message))),r=!0;return r}class $l{constructor(t,r,l){const f=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const b=new Int32Array(this.arrayBuffer);t=b[0],this.d=(r=b[1])+2*(l=b[2]);for(let P=0;P<this.d*this.d;P++){const B=b[3+P],Y=b[3+P+1];f.push(B===Y?null:b.subarray(B,Y))}const E=b[3+f.length+1];this.keys=b.subarray(b[3+f.length],E),this.bboxes=b.subarray(E),this.insert=this._insertReadonly}else{this.d=r+2*l;for(let b=0;b<this.d*this.d;b++)f.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=t,this.padding=l,this.scale=r/t,this.uid=0;const _=l/r*t;this.min=-_,this.max=t+_}insert(t,r,l,f,_){this._forEachCell(r,l,f,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(r),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,r,l,f,_,b){this.cells[_].push(b)}query(t,r,l,f,_){const b=this.min,E=this.max;if(t<=b&&r<=b&&E<=l&&E<=f&&!_)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(t,r,l,f,this._queryCell,P,{},_),P}}_queryCell(t,r,l,f,_,b,E,P){const B=this.cells[_];if(B!==null){const Y=this.keys,ie=this.bboxes;for(let fe=0;fe<B.length;fe++){const ge=B[fe];if(E[ge]===void 0){const Ee=4*ge;(P?P(ie[Ee+0],ie[Ee+1],ie[Ee+2],ie[Ee+3]):t<=ie[Ee+2]&&r<=ie[Ee+3]&&l>=ie[Ee+0]&&f>=ie[Ee+1])?(E[ge]=!0,b.push(Y[ge])):E[ge]=!1}}}}_forEachCell(t,r,l,f,_,b,E,P){const B=this._convertToCellCoord(t),Y=this._convertToCellCoord(r),ie=this._convertToCellCoord(l),fe=this._convertToCellCoord(f);for(let ge=B;ge<=ie;ge++)for(let Ee=Y;Ee<=fe;Ee++){const ke=this.d*Ee+ge;if((!P||P(this._convertFromCellCoord(ge),this._convertFromCellCoord(Ee),this._convertFromCellCoord(ge+1),this._convertFromCellCoord(Ee+1)))&&_.call(this,t,r,l,f,ke,b,E,P))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,r=3+this.cells.length+1+1;let l=0;for(let b=0;b<this.cells.length;b++)l+=this.cells[b].length;const f=new Int32Array(r+l+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let _=r;for(let b=0;b<t.length;b++){const E=t[b];f[3+b]=_,f.set(E,_),_+=E.length}return f[3+t.length]=_,f.set(this.keys,_),_+=this.keys.length,f[3+t.length+1]=_,f.set(this.bboxes,_),_+=this.bboxes.length,f.buffer}static serialize(t,r){const l=t.toArrayBuffer();return r&&r.push(l),{buffer:l}}static deserialize(t){return new $l(t.buffer)}}const Zo={};function sn(n,t,r={}){if(Zo[n])throw new Error(`${n} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:n,writeable:!1}),Zo[n]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}sn("Object",Object),sn("TransferableGridIndex",$l),sn("Color",Pn),sn("Error",Error),sn("AJAXError",pt),sn("ResolvedImage",Ei),sn("StylePropertyFunction",Ln),sn("StyleExpression",We,{omit:["_evaluator"]}),sn("ZoomDependentExpression",ln),sn("ZoomConstantExpression",Nt),sn("CompoundExpression",Oi,{omit:["_evaluate"]});for(const n in ms)ms[n]._classRegistryKey||sn(`Expression_${n}`,ms[n]);function ys(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function hc(n){return n.$name||n.constructor._classRegistryKey}function dl(n){return!function(t){if(t===null||typeof t!="object")return!1;const r=hc(t);return!(!r||r==="Object")}(n)&&(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n instanceof Blob||n instanceof Error||ys(n)||te(n)||ArrayBuffer.isView(n)||n instanceof ImageData)}function Qi(n,t){if(dl(n))return(ys(n)||te(n))&&t&&t.push(n),ArrayBuffer.isView(n)&&t&&t.push(n.buffer),n instanceof ImageData&&t&&t.push(n.data.buffer),n;if(Array.isArray(n)){const _=[];for(const b of n)_.push(Qi(b,t));return _}if(typeof n!="object")throw new Error("can't serialize object of type "+typeof n);const r=hc(n);if(!r)throw new Error(`can't serialize object of unregistered class ${n.constructor.name}`);if(!Zo[r])throw new Error(`${r} is not registered.`);const{klass:l}=Zo[r],f=l.serialize?l.serialize(n,t):{};if(l.serialize){if(t&&f===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in n){if(!n.hasOwnProperty(_)||Zo[r].omit.indexOf(_)>=0)continue;const b=n[_];f[_]=Zo[r].shallow.indexOf(_)>=0?b:Qi(b,t)}n instanceof Error&&(f.message=n.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(f.$name=r),f}function Zs(n){if(dl(n))return n;if(Array.isArray(n))return n.map(Zs);if(typeof n!="object")throw new Error("can't deserialize object of type "+typeof n);const t=hc(n)||"Object";if(!Zo[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=Zo[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(n);const l=Object.create(r.prototype);for(const f of Object.keys(n)){if(f==="$name")continue;const _=n[f];l[f]=Zo[t].shallow.indexOf(f)>=0?_:Zs(_)}return l}class vs{constructor(){this.first=!0}update(t,r){const l=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=r),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=l,!0))}}const Yn={"Latin-1 Supplement":n=>n>=128&&n<=255,"Hangul Jamo":n=>n>=4352&&n<=4607,Khmer:n=>n>=6016&&n<=6143,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Katakana:n=>n>=12448&&n<=12543,Kanbun:n=>n>=12688&&n<=12703,"CJK Strokes":n=>n>=12736&&n<=12783,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"Private Use Area":n=>n>=57344&&n<=63743,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function Hc(n){for(const t of n)if(Ru(t.charCodeAt(0)))return!0;return!1}function Od(n){for(const t of n)if(!_s(t.charCodeAt(0)))return!1;return!0}function ma(n){const t=n.map(r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}}).filter(r=>r);return new RegExp(t.join("|"),"u")}const ku=ma(["Arab","Dupl","Mong","Ougr","Syrc"]);function _s(n){return!ku.test(String.fromCodePoint(n))}const zu=ma(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ru(n){return!(n!==746&&n!==747&&(n<4352||!(Yn["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||Yn["CJK Compatibility"](n)||Yn["CJK Strokes"](n)||!(!Yn["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||Yn["Enclosed CJK Letters and Months"](n)||Yn["Ideographic Description Characters"](n)||Yn.Kanbun(n)||Yn.Katakana(n)&&n!==12540||!(!Yn["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!Yn["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||Yn["Vertical Forms"](n)||Yn["Yijing Hexagram Symbols"](n)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(n))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(n))||zu.test(String.fromCodePoint(n)))))}function fl(n){return!(Ru(n)||function(t){return!!(Yn["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Yn["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Yn["Letterlike Symbols"](t)||Yn["Number Forms"](t)||Yn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Yn["Control Pictures"](t)&&t!==9251||Yn["Optical Character Recognition"](t)||Yn["Enclosed Alphanumerics"](t)||Yn["Geometric Shapes"](t)||Yn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Yn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Yn["CJK Symbols and Punctuation"](t)||Yn.Katakana(t)||Yn["Private Use Area"](t)||Yn["CJK Compatibility Forms"](t)||Yn["Small Form Variants"](t)||Yn["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(n))}const Va=ma(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ar(n){return Va.test(String.fromCodePoint(n))}function kr(n,t){return!(!t&&Ar(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||Yn.Khmer(n))}function $a(n){for(const t of n)if(Ar(t.charCodeAt(0)))return!0;return!1}const Sr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(n){this.pluginStatus=n.pluginStatus,this.pluginURL=n.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(n){this.applyArabicShaping=n.applyArabicShaping,this.processBidirectionalText=n.processBidirectionalText,this.processStyledBidirectionalText=n.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class tr{constructor(t,r){this.zoom=t,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new vs,this.transition={})}isSupportedScript(t){return function(r,l){for(const f of r)if(!kr(f.charCodeAt(0),l))return!1;return!0}(t,Sr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,r=t-Math.floor(t),l=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*r}}}class Wo{constructor(t,r){this.property=t,this.value=r,this.expression=function(l,f){if(sl(l))return new Ln(l,f);if(wt(l)){const _=Sn(l,f);if(_.result==="error")throw new Error(_.value.map(b=>`${b.key}: ${b.message}`).join(", "));return _.value}{let _=l;return f.type==="color"&&typeof l=="string"?_=Pn.parse(l):f.type!=="padding"||typeof l!="number"&&!Array.isArray(l)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(l)&&(_=qi.parse(l)):_=Si.parse(l),{kind:"constant",evaluate:()=>_}}}(r===void 0?t.specification.default:r,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,r,l){return this.property.possiblyEvaluate(this,t,r,l)}}class ga{constructor(t){this.property=t,this.value=new Wo(t,void 0)}transitioned(t,r){return new Fu(this.property,this.value,r,M({},t.transition,this.transition),t.now)}untransitioned(){return new Fu(this.property,this.value,null,{},0)}}class ji{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return K(this._values[t].value.value)}setValue(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ga(this._values[t].property)),this._values[t].value=new Wo(this._values[t].property,r===null?void 0:K(r))}getTransition(t){return K(this._values[t].transition)}setTransition(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ga(this._values[t].property)),this._values[t].transition=K(r)||void 0}serialize(){const t={};for(const r of Object.keys(this._values)){const l=this.getValue(r);l!==void 0&&(t[r]=l);const f=this.getTransition(r);f!==void 0&&(t[`${r}-transition`]=f)}return t}transitioned(t,r){const l=new Gl(this._properties);for(const f of Object.keys(this._values))l._values[f]=this._values[f].transitioned(t,r._values[f]);return l}untransitioned(){const t=new Gl(this._properties);for(const r of Object.keys(this._values))t._values[r]=this._values[r].untransitioned();return t}}class Fu{constructor(t,r,l,f,_){this.property=t,this.value=r,this.begin=_+f.delay||0,this.end=this.begin+f.duration||0,t.specification.transition&&(f.delay||f.duration)&&(this.prior=l)}possiblyEvaluate(t,r,l){const f=t.now||0,_=this.value.possiblyEvaluate(t,r,l),b=this.prior;if(b){if(f>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(f<this.begin)return b.possiblyEvaluate(t,r,l);{const E=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(t,r,l),_,function(P){if(P<=0)return 0;if(P>=1)return 1;const B=P*P,Y=B*P;return 4*(P<.5?Y:3*(P-B)+Y-.75)}(E))}}return _}}class Gl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,r,l){const f=new Zl(this._properties);for(const _ of Object.keys(this._values))f._values[_]=this._values[_].possiblyEvaluate(t,r,l);return f}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Hl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return K(this._values[t].value)}setValue(t,r){this._values[t]=new Wo(this._values[t].property,r===null?void 0:K(r))}serialize(){const t={};for(const r of Object.keys(this._values)){const l=this.getValue(r);l!==void 0&&(t[r]=l)}return t}possiblyEvaluate(t,r,l){const f=new Zl(this._properties);for(const _ of Object.keys(this._values))f._values[_]=this._values[_].possiblyEvaluate(t,r,l);return f}}class ko{constructor(t,r,l){this.property=t,this.value=r,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,r,l,f){return this.property.evaluate(this.value,this.parameters,t,r,l,f)}}class Zl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class an{constructor(t){this.specification=t}possiblyEvaluate(t,r){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(r)}interpolate(t,r,l){const f=Hr[this.specification.type];return f?f(t,r,l):t}}class En{constructor(t,r){this.specification=t,this.overrides=r}possiblyEvaluate(t,r,l,f){return new ko(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(r,null,{},l,f)}:t.expression,r)}interpolate(t,r,l){if(t.value.kind!=="constant"||r.value.kind!=="constant")return t;if(t.value.value===void 0||r.value.value===void 0)return new ko(this,{kind:"constant",value:void 0},t.parameters);const f=Hr[this.specification.type];if(f){const _=f(t.value.value,r.value.value,l);return new ko(this,{kind:"constant",value:_},t.parameters)}return t}evaluate(t,r,l,f,_,b){return t.kind==="constant"?t.value:t.evaluate(r,l,f,_,b)}}class Wl extends En{possiblyEvaluate(t,r,l,f){if(t.value===void 0)return new ko(this,{kind:"constant",value:void 0},r);if(t.expression.kind==="constant"){const _=t.expression.evaluate(r,null,{},l,f),b=t.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,E=this._calculate(b,b,b,r);return new ko(this,{kind:"constant",value:E},r)}if(t.expression.kind==="camera"){const _=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new ko(this,{kind:"constant",value:_},r)}return new ko(this,t.expression,r)}evaluate(t,r,l,f,_,b){if(t.kind==="source"){const E=t.evaluate(r,l,f,_,b);return this._calculate(E,E,E,r)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},l,f),t.evaluate({zoom:Math.floor(r.zoom)},l,f),t.evaluate({zoom:Math.floor(r.zoom)+1},l,f),r):t.value}_calculate(t,r,l,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:l,to:r}}interpolate(t){return t}}class Ou{constructor(t){this.specification=t}possiblyEvaluate(t,r,l,f){if(t.value!==void 0){if(t.expression.kind==="constant"){const _=t.expression.evaluate(r,null,{},l,f);return this._calculate(_,_,_,r)}return this._calculate(t.expression.evaluate(new tr(Math.floor(r.zoom-1),r)),t.expression.evaluate(new tr(Math.floor(r.zoom),r)),t.expression.evaluate(new tr(Math.floor(r.zoom+1),r)),r)}}_calculate(t,r,l,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:l,to:r}}interpolate(t){return t}}class Zc{constructor(t){this.specification=t}possiblyEvaluate(t,r,l,f){return!!t.expression.evaluate(r,null,{},l,f)}interpolate(){return!1}}class y{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in t){const l=t[r];l.specification.overridable&&this.overridableProperties.push(r);const f=this.defaultPropertyValues[r]=new Wo(l,void 0),_=this.defaultTransitionablePropertyValues[r]=new ga(l);this.defaultTransitioningPropertyValues[r]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=f.possiblyEvaluate({})}}}sn("DataDrivenProperty",En),sn("DataConstantProperty",an),sn("CrossFadedDataDrivenProperty",Wl),sn("CrossFadedProperty",Ou),sn("ColorRampProperty",Zc);const e="-transition";class o extends Tn{constructor(t,r){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),r.layout&&(this._unevaluatedLayout=new Hl(r.layout)),r.paint)){this._transitionablePaint=new ji(r.paint);for(const l in t.paint)this.setPaintProperty(l,t.paint[l],{validate:!1});for(const l in t.layout)this.setLayoutProperty(l,t.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Zl(r.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,r,l={}){r!=null&&this._validate(jh,`layers.${this.id}.layout.${t}`,t,r,l)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,r):this.visibility=r)}getPaintProperty(t){return t.endsWith(e)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,r,l={}){if(r!=null&&this._validate(uc,`layers.${this.id}.paint.${t}`,t,r,l))return!1;if(t.endsWith(e))return this._transitionablePaint.setTransition(t.slice(0,-11),r||void 0),!1;{const f=this._transitionablePaint._values[t],_=f.property.specification["property-type"]==="cross-faded-data-driven",b=f.value.isDataDriven(),E=f.value;this._transitionablePaint.setValue(t,r),this._handleSpecialPaintPropertyUpdate(t);const P=this._transitionablePaint._values[t].value;return P.isDataDriven()||b||_||this._handleOverridablePaintPropertyUpdate(t,E,P)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,r,l){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,r){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,r)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),de(t,(r,l)=>!(r===void 0||l==="layout"&&!Object.keys(r).length||l==="paint"&&!Object.keys(r).length))}_validate(t,r,l,f,_={}){return(!_||_.validate!==!1)&&cc(this,t.call(pa,{key:r,layerType:this.type,objectKey:l,value:f,styleSpec:at,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const r=this.paint.get(t);if(r instanceof ko&&la(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}const h={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class d{constructor(t,r){this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class g{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,r){return t._trim(),r&&(t.isTransferred=!0,r.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const r=Object.create(this.prototype);return r.arrayBuffer=t.arrayBuffer,r.length=t.length,r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function I(n,t=1){let r=0,l=0;return{members:n.map(f=>{const _=h[f.type].BYTES_PER_ELEMENT,b=r=A(r,Math.max(t,_)),E=f.components||1;return l=Math.max(l,_),r+=_*E,{name:f.name,type:f.type,components:E,offset:b}}),size:A(r,Math.max(l,t)),alignment:t}}function A(n,t){return Math.ceil(n/t)*t}class O extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r){const l=this.length;return this.resize(l+1),this.emplace(l,t,r)}emplace(t,r,l){const f=2*t;return this.int16[f+0]=r,this.int16[f+1]=l,t}}O.prototype.bytesPerElement=4,sn("StructArrayLayout2i4",O);class X extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=3*t;return this.int16[_+0]=r,this.int16[_+1]=l,this.int16[_+2]=f,t}}X.prototype.bytesPerElement=6,sn("StructArrayLayout3i6",X);class se extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f){const _=this.length;return this.resize(_+1),this.emplace(_,t,r,l,f)}emplace(t,r,l,f,_){const b=4*t;return this.int16[b+0]=r,this.int16[b+1]=l,this.int16[b+2]=f,this.int16[b+3]=_,t}}se.prototype.bytesPerElement=8,sn("StructArrayLayout4i8",se);class ae extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,l,f,_,b)}emplace(t,r,l,f,_,b,E){const P=6*t;return this.int16[P+0]=r,this.int16[P+1]=l,this.int16[P+2]=f,this.int16[P+3]=_,this.int16[P+4]=b,this.int16[P+5]=E,t}}ae.prototype.bytesPerElement=12,sn("StructArrayLayout2i4i12",ae);class we extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,l,f,_,b)}emplace(t,r,l,f,_,b,E){const P=4*t,B=8*t;return this.int16[P+0]=r,this.int16[P+1]=l,this.uint8[B+4]=f,this.uint8[B+5]=_,this.uint8[B+6]=b,this.uint8[B+7]=E,t}}we.prototype.bytesPerElement=8,sn("StructArrayLayout2i4ub8",we);class Ae extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r){const l=this.length;return this.resize(l+1),this.emplace(l,t,r)}emplace(t,r,l){const f=2*t;return this.float32[f+0]=r,this.float32[f+1]=l,t}}Ae.prototype.bytesPerElement=8,sn("StructArrayLayout2f8",Ae);class je extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B,Y){const ie=this.length;return this.resize(ie+1),this.emplace(ie,t,r,l,f,_,b,E,P,B,Y)}emplace(t,r,l,f,_,b,E,P,B,Y,ie){const fe=10*t;return this.uint16[fe+0]=r,this.uint16[fe+1]=l,this.uint16[fe+2]=f,this.uint16[fe+3]=_,this.uint16[fe+4]=b,this.uint16[fe+5]=E,this.uint16[fe+6]=P,this.uint16[fe+7]=B,this.uint16[fe+8]=Y,this.uint16[fe+9]=ie,t}}je.prototype.bytesPerElement=20,sn("StructArrayLayout10ui20",je);class Ne extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B,Y,ie,fe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,t,r,l,f,_,b,E,P,B,Y,ie,fe)}emplace(t,r,l,f,_,b,E,P,B,Y,ie,fe,ge){const Ee=12*t;return this.int16[Ee+0]=r,this.int16[Ee+1]=l,this.int16[Ee+2]=f,this.int16[Ee+3]=_,this.uint16[Ee+4]=b,this.uint16[Ee+5]=E,this.uint16[Ee+6]=P,this.uint16[Ee+7]=B,this.int16[Ee+8]=Y,this.int16[Ee+9]=ie,this.int16[Ee+10]=fe,this.int16[Ee+11]=ge,t}}Ne.prototype.bytesPerElement=24,sn("StructArrayLayout4i4ui4i24",Ne);class $e extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=3*t;return this.float32[_+0]=r,this.float32[_+1]=l,this.float32[_+2]=f,t}}$e.prototype.bytesPerElement=12,sn("StructArrayLayout3f12",$e);class qe extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint32[1*t+0]=r,t}}qe.prototype.bytesPerElement=4,sn("StructArrayLayout1ul4",qe);class et extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B){const Y=this.length;return this.resize(Y+1),this.emplace(Y,t,r,l,f,_,b,E,P,B)}emplace(t,r,l,f,_,b,E,P,B,Y){const ie=10*t,fe=5*t;return this.int16[ie+0]=r,this.int16[ie+1]=l,this.int16[ie+2]=f,this.int16[ie+3]=_,this.int16[ie+4]=b,this.int16[ie+5]=E,this.uint32[fe+3]=P,this.uint16[ie+8]=B,this.uint16[ie+9]=Y,t}}et.prototype.bytesPerElement=20,sn("StructArrayLayout6i1ul2ui20",et);class Ve extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,l,f,_,b)}emplace(t,r,l,f,_,b,E){const P=6*t;return this.int16[P+0]=r,this.int16[P+1]=l,this.int16[P+2]=f,this.int16[P+3]=_,this.int16[P+4]=b,this.int16[P+5]=E,t}}Ve.prototype.bytesPerElement=12,sn("StructArrayLayout2i2i2i12",Ve);class st extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,r,l,f,_)}emplace(t,r,l,f,_,b){const E=4*t,P=8*t;return this.float32[E+0]=r,this.float32[E+1]=l,this.float32[E+2]=f,this.int16[P+6]=_,this.int16[P+7]=b,t}}st.prototype.bytesPerElement=16,sn("StructArrayLayout2f1f2i16",st);class ut extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,l,f,_,b)}emplace(t,r,l,f,_,b,E){const P=16*t,B=4*t,Y=8*t;return this.uint8[P+0]=r,this.uint8[P+1]=l,this.float32[B+1]=f,this.float32[B+2]=_,this.int16[Y+6]=b,this.int16[Y+7]=E,t}}ut.prototype.bytesPerElement=16,sn("StructArrayLayout2ub2f2i16",ut);class mt extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=3*t;return this.uint16[_+0]=r,this.uint16[_+1]=l,this.uint16[_+2]=f,t}}mt.prototype.bytesPerElement=6,sn("StructArrayLayout3ui6",mt);class At extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B,Y,ie,fe,ge,Ee,ke,Ge,Ye){const dt=this.length;return this.resize(dt+1),this.emplace(dt,t,r,l,f,_,b,E,P,B,Y,ie,fe,ge,Ee,ke,Ge,Ye)}emplace(t,r,l,f,_,b,E,P,B,Y,ie,fe,ge,Ee,ke,Ge,Ye,dt){const it=24*t,ht=12*t,St=48*t;return this.int16[it+0]=r,this.int16[it+1]=l,this.uint16[it+2]=f,this.uint16[it+3]=_,this.uint32[ht+2]=b,this.uint32[ht+3]=E,this.uint32[ht+4]=P,this.uint16[it+10]=B,this.uint16[it+11]=Y,this.uint16[it+12]=ie,this.float32[ht+7]=fe,this.float32[ht+8]=ge,this.uint8[St+36]=Ee,this.uint8[St+37]=ke,this.uint8[St+38]=Ge,this.uint32[ht+10]=Ye,this.int16[it+22]=dt,t}}At.prototype.bytesPerElement=48,sn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",At);class Dt extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l,f,_,b,E,P,B,Y,ie,fe,ge,Ee,ke,Ge,Ye,dt,it,ht,St,Rt,on,An,rn,Qt,yn,fn){const un=this.length;return this.resize(un+1),this.emplace(un,t,r,l,f,_,b,E,P,B,Y,ie,fe,ge,Ee,ke,Ge,Ye,dt,it,ht,St,Rt,on,An,rn,Qt,yn,fn)}emplace(t,r,l,f,_,b,E,P,B,Y,ie,fe,ge,Ee,ke,Ge,Ye,dt,it,ht,St,Rt,on,An,rn,Qt,yn,fn,un){const Pt=32*t,xn=16*t;return this.int16[Pt+0]=r,this.int16[Pt+1]=l,this.int16[Pt+2]=f,this.int16[Pt+3]=_,this.int16[Pt+4]=b,this.int16[Pt+5]=E,this.int16[Pt+6]=P,this.int16[Pt+7]=B,this.uint16[Pt+8]=Y,this.uint16[Pt+9]=ie,this.uint16[Pt+10]=fe,this.uint16[Pt+11]=ge,this.uint16[Pt+12]=Ee,this.uint16[Pt+13]=ke,this.uint16[Pt+14]=Ge,this.uint16[Pt+15]=Ye,this.uint16[Pt+16]=dt,this.uint16[Pt+17]=it,this.uint16[Pt+18]=ht,this.uint16[Pt+19]=St,this.uint16[Pt+20]=Rt,this.uint16[Pt+21]=on,this.uint16[Pt+22]=An,this.uint32[xn+12]=rn,this.float32[xn+13]=Qt,this.float32[xn+14]=yn,this.uint16[Pt+30]=fn,this.uint16[Pt+31]=un,t}}Dt.prototype.bytesPerElement=64,sn("StructArrayLayout8i15ui1ul2f2ui64",Dt);class Gt extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.float32[1*t+0]=r,t}}Gt.prototype.bytesPerElement=4,sn("StructArrayLayout1f4",Gt);class tn extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=3*t;return this.uint16[6*t+0]=r,this.float32[_+1]=l,this.float32[_+2]=f,t}}tn.prototype.bytesPerElement=12,sn("StructArrayLayout1ui2f12",tn);class Ht extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,l)}emplace(t,r,l,f){const _=4*t;return this.uint32[2*t+0]=r,this.uint16[_+2]=l,this.uint16[_+3]=f,t}}Ht.prototype.bytesPerElement=8,sn("StructArrayLayout1ul2ui8",Ht);class $t extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r){const l=this.length;return this.resize(l+1),this.emplace(l,t,r)}emplace(t,r,l){const f=2*t;return this.uint16[f+0]=r,this.uint16[f+1]=l,t}}$t.prototype.bytesPerElement=4,sn("StructArrayLayout2ui4",$t);class dn extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint16[1*t+0]=r,t}}dn.prototype.bytesPerElement=2,sn("StructArrayLayout1ui2",dn);class jn extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,l,f){const _=this.length;return this.resize(_+1),this.emplace(_,t,r,l,f)}emplace(t,r,l,f,_){const b=4*t;return this.float32[b+0]=r,this.float32[b+1]=l,this.float32[b+2]=f,this.float32[b+3]=_,t}}jn.prototype.bytesPerElement=16,sn("StructArrayLayout4f16",jn);class Wt extends d{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}Wt.prototype.size=20;class Yt extends et{get(t){return new Wt(this,t)}}sn("CollisionBoxArray",Yt);class On extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}On.prototype.size=48;class wr extends At{get(t){return new On(this,t)}}sn("PlacedSymbolArray",wr);class Gn extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Gn.prototype.size=64;class qn extends Dt{get(t){return new Gn(this,t)}}sn("SymbolInstanceArray",qn);class Er extends Gt{getoffsetX(t){return this.float32[1*t+0]}}sn("GlyphOffsetArray",Er);class Ci extends X{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}sn("SymbolLineVertexArray",Ci);class zo extends d{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}zo.prototype.size=12;class Tr extends tn{get(t){return new zo(this,t)}}sn("TextAnchorOffsetArray",Tr);class gi extends d{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}gi.prototype.size=8;class zr extends Ht{get(t){return new gi(this,t)}}sn("FeatureIndexArray",zr);class ni extends O{}class Li extends O{}class xs extends O{}class po extends ae{}class ws extends we{}class Ga extends Ae{}class Ro extends je{}class qo extends Ne{}class Ws extends $e{}class eo extends qe{}class Fo extends Ve{}class bs extends ut{}class Xo extends mt{}class si extends $t{}const jr=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:Di}=jr;class Kn{constructor(t=[]){this.segments=t}prepareSegment(t,r,l,f){let _=this.segments[this.segments.length-1];return t>Kn.MAX_VERTEX_ARRAY_LENGTH&&W(`Max vertices per segment is ${Kn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!_||_.vertexLength+t>Kn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==f)&&(_={vertexOffset:r.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},f!==void 0&&(_.sortKey=f),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const t of this.segments)for(const r in t.vaos)t.vaos[r].destroy()}static simpleSegment(t,r,l,f){return new Kn([{vertexOffset:t,primitiveOffset:r,vertexLength:l,primitiveLength:f,vaos:{},sortKey:0}])}}function Oo(n,t){return 256*(n=ne(Math.floor(n),0,255))+ne(Math.floor(t),0,255)}Kn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sn("SegmentVector",Kn);const Ha=I([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ss={exports:{}},Wc={exports:{}};Wc.exports=function(n,t){var r,l,f,_,b,E,P,B;for(l=n.length-(r=3&n.length),f=t,b=3432918353,E=461845907,B=0;B<l;)P=255&n.charCodeAt(B)|(255&n.charCodeAt(++B))<<8|(255&n.charCodeAt(++B))<<16|(255&n.charCodeAt(++B))<<24,++B,f=27492+(65535&(_=5*(65535&(f=(f^=P=(65535&(P=(P=(65535&P)*b+(((P>>>16)*b&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(P=0,r){case 3:P^=(255&n.charCodeAt(B+2))<<16;case 2:P^=(255&n.charCodeAt(B+1))<<8;case 1:f^=P=(65535&(P=(P=(65535&(P^=255&n.charCodeAt(B)))*b+(((P>>>16)*b&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295}return f^=n.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var qc=Wc.exports,Ur={exports:{}};Ur.exports=function(n,t){for(var r,l=n.length,f=t^l,_=0;l>=4;)r=1540483477*(65535&(r=255&n.charCodeAt(_)|(255&n.charCodeAt(++_))<<8|(255&n.charCodeAt(++_))<<16|(255&n.charCodeAt(++_))<<24))+((1540483477*(r>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),l-=4,++_;switch(l){case 3:f^=(255&n.charCodeAt(_+2))<<16;case 2:f^=(255&n.charCodeAt(_+1))<<8;case 1:f=1540483477*(65535&(f^=255&n.charCodeAt(_)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var Es=qc,dc=Ur.exports;Ss.exports=Es,Ss.exports.murmur3=Es,Ss.exports.murmur2=dc;var ql=L(Ss.exports);class Za{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,r,l,f){this.ids.push(Xl(t)),this.positions.push(r,l,f)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=Xl(t);let l=0,f=this.ids.length-1;for(;l<f;){const b=l+f>>1;this.ids[b]>=r?f=b:l=b+1}const _=[];for(;this.ids[l]===r;)_.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return _}static serialize(t,r){const l=new Float64Array(t.ids),f=new Uint32Array(t.positions);return qs(l,f,0,l.length-1),r&&r.push(l.buffer,f.buffer),{ids:l,positions:f}}static deserialize(t){const r=new Za;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}}function Xl(n){const t=+n;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ql(String(n))}function qs(n,t,r,l){for(;r<l;){const f=n[r+l>>1];let _=r-1,b=l+1;for(;;){do _++;while(n[_]<f);do b--;while(n[b]>f);if(_>=b)break;Ir(n,_,b),Ir(t,3*_,3*b),Ir(t,3*_+1,3*b+1),Ir(t,3*_+2,3*b+2)}b-r<l-b?(qs(n,t,r,b),r=b+1):(qs(n,t,b+1,l),l=b)}}function Ir(n,t,r){const l=n[t];n[t]=n[r],n[r]=l}sn("FeaturePositionMap",Za);class Wr{constructor(t,r){this.gl=t.gl,this.location=r}}class yi extends Wr{constructor(t,r){super(t,r),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Xc extends Wr{constructor(t,r){super(t,r),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class fc extends Wr{constructor(t,r){super(t,r),this.current=Pn.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Kc=new Float32Array(16);function jd(n){return[Oo(255*n.r,255*n.g),Oo(255*n.b,255*n.a)]}class Pi{constructor(t,r,l){this.value=t,this.uniformNames=r.map(f=>`u_${f}`),this.type=l}setUniform(t,r,l){t.set(l.constantOr(this.value))}getBinding(t,r,l){return this.type==="color"?new fc(t,r):new yi(t,r)}}class Kl{constructor(t,r){this.uniformNames=r.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=t.tlbr}setUniform(t,r,l,f){const _=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&t.set(_)}getBinding(t,r,l){return l.substr(0,9)==="u_pattern"?new Xc(t,r):new yi(t,r)}}class ya{constructor(t,r,l,f){this.expression=t,this.type=l,this.maxValue=0,this.paintVertexAttributes=r.map(_=>({name:`a_${_}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(t,r,l,f,_){const b=this.paintVertexArray.length,E=this.expression.evaluate(new tr(0),r,{},f,[],_);this.paintVertexArray.resize(t),this._setPaintValue(b,t,E)}updatePaintArray(t,r,l,f){const _=this.expression.evaluate({zoom:0},l,f);this._setPaintValue(t,r,_)}_setPaintValue(t,r,l){if(this.type==="color"){const f=jd(l);for(let _=t;_<r;_++)this.paintVertexArray.emplace(_,f[0],f[1])}else{for(let f=t;f<r;f++)this.paintVertexArray.emplace(f,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ts{constructor(t,r,l,f,_,b){this.expression=t,this.uniformNames=r.map(E=>`u_${E}_t`),this.type=l,this.useIntegerZoom=f,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=r.map(E=>({name:`a_${E}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(t,r,l,f,_){const b=this.expression.evaluate(new tr(this.zoom),r,{},f,[],_),E=this.expression.evaluate(new tr(this.zoom+1),r,{},f,[],_),P=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(P,t,b,E)}updatePaintArray(t,r,l,f){const _=this.expression.evaluate({zoom:this.zoom},l,f),b=this.expression.evaluate({zoom:this.zoom+1},l,f);this._setPaintValue(t,r,_,b)}_setPaintValue(t,r,l,f){if(this.type==="color"){const _=jd(l),b=jd(f);for(let E=t;E<r;E++)this.paintVertexArray.emplace(E,_[0],_[1],b[0],b[1])}else{for(let _=t;_<r;_++)this.paintVertexArray.emplace(_,l,f);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,r){const l=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,f=ne(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);t.set(f)}getBinding(t,r,l){return new yi(t,r)}}class to{constructor(t,r,l,f,_,b){this.expression=t,this.type=r,this.useIntegerZoom=l,this.zoom=f,this.layerId=b,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(t,r,l){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(f,t,r.patterns&&r.patterns[this.layerId],l)}updatePaintArray(t,r,l,f,_){this._setPaintValues(t,r,l.patterns&&l.patterns[this.layerId],_)}_setPaintValues(t,r,l,f){if(!f||!l)return;const{min:_,mid:b,max:E}=l,P=f[_],B=f[b],Y=f[E];if(P&&B&&Y)for(let ie=t;ie<r;ie++)this.zoomInPaintVertexArray.emplace(ie,B.tl[0],B.tl[1],B.br[0],B.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],B.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,B.tl[0],B.tl[1],B.br[0],B.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],B.pixelRatio,Y.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ha.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ha.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Is{constructor(t,r,l){this.binders={},this._buffers=[];const f=[];for(const _ in t.paint._values){if(!l(_))continue;const b=t.paint.get(_);if(!(b instanceof ko&&la(b.property.specification)))continue;const E=Ld(_,t.type),P=b.value,B=b.property.specification.type,Y=b.property.useIntegerZoom,ie=b.property.specification["property-type"],fe=ie==="cross-faded"||ie==="cross-faded-data-driven";if(P.kind==="constant")this.binders[_]=fe?new Kl(P.value,E):new Pi(P.value,E,B),f.push(`/u_${_}`);else if(P.kind==="source"||fe){const ge=Lh(_,B,"source");this.binders[_]=fe?new to(P,B,Y,r,ge,t.id):new ya(P,E,B,ge),f.push(`/a_${_}`)}else{const ge=Lh(_,B,"composite");this.binders[_]=new Ts(P,E,B,Y,r,ge),f.push(`/z_${_}`)}}this.cacheKey=f.sort().join("")}getMaxValue(t){const r=this.binders[t];return r instanceof ya||r instanceof Ts?r.maxValue:0}populatePaintArrays(t,r,l,f,_){for(const b in this.binders){const E=this.binders[b];(E instanceof ya||E instanceof Ts||E instanceof to)&&E.populatePaintArray(t,r,l,f,_)}}setConstantPatternPositions(t,r){for(const l in this.binders){const f=this.binders[l];f instanceof Kl&&f.setConstantPatternPositions(t,r)}}updatePaintArrays(t,r,l,f,_){let b=!1;for(const E in t){const P=r.getPositions(E);for(const B of P){const Y=l.feature(B.index);for(const ie in this.binders){const fe=this.binders[ie];if((fe instanceof ya||fe instanceof Ts||fe instanceof to)&&fe.expression.isStateDependent===!0){const ge=f.paint.get(ie);fe.expression=ge.value,fe.updatePaintArray(B.start,B.end,Y,t[E],_),b=!0}}}}return b}defines(){const t=[];for(const r in this.binders){const l=this.binders[r];(l instanceof Pi||l instanceof Kl)&&t.push(...l.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return t}getBinderAttributes(){const t=[];for(const r in this.binders){const l=this.binders[r];if(l instanceof ya||l instanceof Ts)for(let f=0;f<l.paintVertexAttributes.length;f++)t.push(l.paintVertexAttributes[f].name);else if(l instanceof to)for(let f=0;f<Ha.members.length;f++)t.push(Ha.members[f].name)}return t}getBinderUniforms(){const t=[];for(const r in this.binders){const l=this.binders[r];if(l instanceof Pi||l instanceof Kl||l instanceof Ts)for(const f of l.uniformNames)t.push(f)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,r){const l=[];for(const f in this.binders){const _=this.binders[f];if(_ instanceof Pi||_ instanceof Kl||_ instanceof Ts){for(const b of _.uniformNames)if(r[b]){const E=_.getBinding(t,r[b],b);l.push({name:b,property:f,binding:E})}}}return l}setUniforms(t,r,l,f){for(const{name:_,property:b,binding:E}of r)this.binders[b].setUniform(E,f,l.get(b),_)}updatePaintBuffers(t){this._buffers=[];for(const r in this.binders){const l=this.binders[r];if(t&&l instanceof to){const f=t.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(l instanceof ya||l instanceof Ts)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(t){for(const r in this.binders){const l=this.binders[r];(l instanceof ya||l instanceof Ts||l instanceof to)&&l.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const r=this.binders[t];(r instanceof ya||r instanceof Ts||r instanceof to)&&r.destroy()}}}class va{constructor(t,r,l=()=>!0){this.programConfigurations={};for(const f of t)this.programConfigurations[f.id]=new Is(f,r,l);this.needsUpload=!1,this._featureMap=new Za,this._bufferOffset=0}populatePaintArrays(t,r,l,f,_,b){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(t,r,f,_,b);r.id!==void 0&&this._featureMap.add(r.id,l,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,r,l,f){for(const _ of l)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(t,this._featureMap,r,_,f)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Ld(n,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(`${t}-`,"").replace(/-/g,"_")]}function Lh(n,t,r){const l={color:{source:Ae,composite:jn},number:{source:Gt,composite:Ae}},f=function(_){return{"line-pattern":{source:Ro,composite:Ro},"fill-pattern":{source:Ro,composite:Ro},"fill-extrusion-pattern":{source:Ro,composite:Ro}}[_]}(n);return f&&f[r]||l[t][r]}sn("ConstantBinder",Pi),sn("CrossFadedConstantBinder",Kl),sn("SourceExpressionBinder",ya),sn("CrossFadedCompositeBinder",to),sn("CompositeExpressionBinder",Ts),sn("ProgramConfiguration",Is,{omit:["_buffers"]}),sn("ProgramConfigurationSet",va);const ai=8192,Dh=Math.pow(2,14)-1,Dd=-Dh-1;function Yl(n){const t=ai/n.extent,r=n.loadGeometry();for(let l=0;l<r.length;l++){const f=r[l];for(let _=0;_<f.length;_++){const b=f[_],E=Math.round(b.x*t),P=Math.round(b.y*t);b.x=ne(E,Dd,Dh),b.y=ne(P,Dd,Dh),(E<b.x||E>b.x+1||P<b.y||P>b.y+1)&&W("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Jl(n,t){return{type:n.type,id:n.id,properties:n.properties,geometry:t?Yl(n):[]}}function Yc(n,t,r,l,f){n.emplaceBack(2*t+(l+1)/2,2*r+(f+1)/2)}class Bh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Li,this.indexArray=new Xo,this.segments=new Kn,this.programConfigurations=new va(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,l){const f=this.layers[0],_=[];let b=null,E=!1;f.type==="circle"&&(b=f.layout.get("circle-sort-key"),E=!b.isConstant());for(const{feature:P,id:B,index:Y,sourceLayerIndex:ie}of t){const fe=this.layers[0]._featureFilter.needGeometry,ge=Jl(P,fe);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),ge,l))continue;const Ee=E?b.evaluate(ge,{},l):void 0,ke={id:B,properties:P.properties,type:P.type,sourceLayerIndex:ie,index:Y,geometry:fe?ge.geometry:Yl(P),patterns:{},sortKey:Ee};_.push(ke)}E&&_.sort((P,B)=>P.sortKey-B.sortKey);for(const P of _){const{geometry:B,index:Y,sourceLayerIndex:ie}=P,fe=t[Y].feature;this.addFeature(P,B,Y,l),r.featureIndex.insert(fe,B,Y,ie,this.index)}}update(t,r,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Di),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,r,l,f){for(const _ of r)for(const b of _){const E=b.x,P=b.y;if(E<0||E>=ai||P<0||P>=ai)continue;const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),Y=B.vertexLength;Yc(this.layoutVertexArray,E,P,-1,-1),Yc(this.layoutVertexArray,E,P,1,-1),Yc(this.layoutVertexArray,E,P,1,1),Yc(this.layoutVertexArray,E,P,-1,1),this.indexArray.emplaceBack(Y,Y+1,Y+2),this.indexArray.emplaceBack(Y,Y+3,Y+2),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{},f)}}function Bd(n,t){for(let r=0;r<n.length;r++)if(ju(t,n[r]))return!0;for(let r=0;r<t.length;r++)if(ju(n,t[r]))return!0;return!!pc(n,t)}function Jc(n,t,r){return!!ju(n,t)||!!Qc(t,n,r)}function Nd(n,t){if(n.length===1)return Vd(t,n[0]);for(let r=0;r<t.length;r++){const l=t[r];for(let f=0;f<l.length;f++)if(ju(n,l[f]))return!0}for(let r=0;r<n.length;r++)if(Vd(t,n[r]))return!0;for(let r=0;r<t.length;r++)if(pc(n,t[r]))return!0;return!1}function Nh(n,t,r){if(n.length>1){if(pc(n,t))return!0;for(let l=0;l<t.length;l++)if(Qc(t[l],n,r))return!0}for(let l=0;l<n.length;l++)if(Qc(n[l],t,r))return!0;return!1}function pc(n,t){if(n.length===0||t.length===0)return!1;for(let r=0;r<n.length-1;r++){const l=n[r],f=n[r+1];for(let _=0;_<t.length-1;_++)if(qf(l,f,t[_],t[_+1]))return!0}return!1}function qf(n,t,r,l){return J(n,r,l)!==J(t,r,l)&&J(n,t,r)!==J(n,t,l)}function Qc(n,t,r){const l=r*r;if(t.length===1)return n.distSqr(t[0])<l;for(let f=1;f<t.length;f++)if(Ud(n,t[f-1],t[f])<l)return!0;return!1}function Ud(n,t,r){const l=t.distSqr(r);if(l===0)return n.distSqr(t);const f=((n.x-t.x)*(r.x-t.x)+(n.y-t.y)*(r.y-t.y))/l;return n.distSqr(f<0?t:f>1?r:r.sub(t)._mult(f)._add(t))}function Vd(n,t){let r,l,f,_=!1;for(let b=0;b<n.length;b++){r=n[b];for(let E=0,P=r.length-1;E<r.length;P=E++)l=r[E],f=r[P],l.y>t.y!=f.y>t.y&&t.x<(f.x-l.x)*(t.y-l.y)/(f.y-l.y)+l.x&&(_=!_)}return _}function ju(n,t){let r=!1;for(let l=0,f=n.length-1;l<n.length;f=l++){const _=n[l],b=n[f];_.y>t.y!=b.y>t.y&&t.x<(b.x-_.x)*(t.y-_.y)/(b.y-_.y)+_.x&&(r=!r)}return r}function Xf(n,t,r){const l=r[0],f=r[2];if(n.x<l.x&&t.x<l.x||n.x>f.x&&t.x>f.x||n.y<l.y&&t.y<l.y||n.y>f.y&&t.y>f.y)return!1;const _=J(n,t,r[0]);return _!==J(n,t,r[1])||_!==J(n,t,r[2])||_!==J(n,t,r[3])}function Lu(n,t,r){const l=t.paint.get(n).value;return l.kind==="constant"?l.value:r.programConfigurations.get(t.id).getMaxValue(n)}function eh(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function th(n,t,r,l,f){if(!t[0]&&!t[1])return n;const _=C.convert(t)._mult(f);r==="viewport"&&_._rotate(-l);const b=[];for(let E=0;E<n.length;E++)b.push(n[E].sub(_));return b}let $d,Kf;sn("CircleBucket",Bh,{omit:["layers"]});var Yf={get paint(){return Kf=Kf||new y({"circle-radius":new En(at.paint_circle["circle-radius"]),"circle-color":new En(at.paint_circle["circle-color"]),"circle-blur":new En(at.paint_circle["circle-blur"]),"circle-opacity":new En(at.paint_circle["circle-opacity"]),"circle-translate":new an(at.paint_circle["circle-translate"]),"circle-translate-anchor":new an(at.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new an(at.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new an(at.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new En(at.paint_circle["circle-stroke-width"]),"circle-stroke-color":new En(at.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new En(at.paint_circle["circle-stroke-opacity"])})},get layout(){return $d=$d||new y({"circle-sort-key":new En(at.layout_circle["circle-sort-key"])})}},mo=1e-6,mc=typeof Float32Array<"u"?Float32Array:Array;function Uh(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Gd(n,t,r){var l=t[0],f=t[1],_=t[2],b=t[3],E=t[4],P=t[5],B=t[6],Y=t[7],ie=t[8],fe=t[9],ge=t[10],Ee=t[11],ke=t[12],Ge=t[13],Ye=t[14],dt=t[15],it=r[0],ht=r[1],St=r[2],Rt=r[3];return n[0]=it*l+ht*E+St*ie+Rt*ke,n[1]=it*f+ht*P+St*fe+Rt*Ge,n[2]=it*_+ht*B+St*ge+Rt*Ye,n[3]=it*b+ht*Y+St*Ee+Rt*dt,n[4]=(it=r[4])*l+(ht=r[5])*E+(St=r[6])*ie+(Rt=r[7])*ke,n[5]=it*f+ht*P+St*fe+Rt*Ge,n[6]=it*_+ht*B+St*ge+Rt*Ye,n[7]=it*b+ht*Y+St*Ee+Rt*dt,n[8]=(it=r[8])*l+(ht=r[9])*E+(St=r[10])*ie+(Rt=r[11])*ke,n[9]=it*f+ht*P+St*fe+Rt*Ge,n[10]=it*_+ht*B+St*ge+Rt*Ye,n[11]=it*b+ht*Y+St*Ee+Rt*dt,n[12]=(it=r[12])*l+(ht=r[13])*E+(St=r[14])*ie+(Rt=r[15])*ke,n[13]=it*f+ht*P+St*fe+Rt*Ge,n[14]=it*_+ht*B+St*ge+Rt*Ye,n[15]=it*b+ht*Y+St*Ee+Rt*dt,n}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var gc,Vh=Gd;function $h(n,t,r){var l=t[0],f=t[1],_=t[2],b=t[3];return n[0]=r[0]*l+r[4]*f+r[8]*_+r[12]*b,n[1]=r[1]*l+r[5]*f+r[9]*_+r[13]*b,n[2]=r[2]*l+r[6]*f+r[10]*_+r[14]*b,n[3]=r[3]*l+r[7]*f+r[11]*_+r[15]*b,n}gc=new mc(4),mc!=Float32Array&&(gc[0]=0,gc[1]=0,gc[2]=0,gc[3]=0);class Dm extends o{constructor(t){super(t,Yf)}createBucket(t){return new Bh(t)}queryRadius(t){const r=t;return Lu("circle-radius",this,r)+Lu("circle-stroke-width",this,r)+eh(this.paint.get("circle-translate"))}queryIntersectsFeature(t,r,l,f,_,b,E,P){const B=th(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,E),Y=this.paint.get("circle-radius").evaluate(r,l)+this.paint.get("circle-stroke-width").evaluate(r,l),ie=this.paint.get("circle-pitch-alignment")==="map",fe=ie?B:function(Ee,ke){return Ee.map(Ge=>Jf(Ge,ke))}(B,P),ge=ie?Y*E:Y;for(const Ee of f)for(const ke of Ee){const Ge=ie?ke:Jf(ke,P);let Ye=ge;const dt=$h([],[ke.x,ke.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ye*=dt[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ye*=b.cameraToCenterDistance/dt[3]),Jc(fe,Ge,Ye))return!0}return!1}}function Jf(n,t){const r=$h([],[n.x,n.y,0,1],t);return new C(r[0]/r[3],r[1]/r[3])}class Xs extends Bh{}let Gh;sn("HeatmapBucket",Xs,{omit:["layers"]});var Hh={get paint(){return Gh=Gh||new y({"heatmap-radius":new En(at.paint_heatmap["heatmap-radius"]),"heatmap-weight":new En(at.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new an(at.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Zc(at.paint_heatmap["heatmap-color"]),"heatmap-opacity":new an(at.paint_heatmap["heatmap-opacity"])})}};function Zh(n,{width:t,height:r},l,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==t*r*l)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${t*r*l}`)}else f=new Uint8Array(t*r*l);return n.width=t,n.height=r,n.data=f,n}function Hd(n,{width:t,height:r},l){if(t===n.width&&r===n.height)return;const f=Zh({},{width:t,height:r},l);Wh(n,f,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,t),height:Math.min(n.height,r)},l),n.width=t,n.height=r,n.data=f.data}function Wh(n,t,r,l,f,_){if(f.width===0||f.height===0)return t;if(f.width>n.width||f.height>n.height||r.x>n.width-f.width||r.y>n.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||l.x>t.width-f.width||l.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const b=n.data,E=t.data;if(b===E)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<f.height;P++){const B=((r.y+P)*n.width+r.x)*_,Y=((l.y+P)*t.width+l.x)*_;for(let ie=0;ie<f.width*_;ie++)E[Y+ie]=b[B+ie]}return t}class Du{constructor(t,r){Zh(this,t,1,r)}resize(t){Hd(this,t,1)}clone(){return new Du({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,l,f,_){Wh(t,r,l,f,_,1)}}class Gi{constructor(t,r){Zh(this,t,4,r)}resize(t){Hd(this,t,4)}replace(t,r){r?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Gi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,l,f,_){Wh(t,r,l,f,_,4)}}function qh(n){const t={},r=n.resolution||256,l=n.clips?n.clips.length:1,f=n.image||new Gi({width:r,height:l});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const _=(b,E,P)=>{t[n.evaluationKey]=P;const B=n.expression.evaluate(t);f.data[b+E+0]=Math.floor(255*B.r/B.a),f.data[b+E+1]=Math.floor(255*B.g/B.a),f.data[b+E+2]=Math.floor(255*B.b/B.a),f.data[b+E+3]=Math.floor(255*B.a)};if(n.clips)for(let b=0,E=0;b<l;++b,E+=4*r)for(let P=0,B=0;P<r;P++,B+=4){const Y=P/(r-1),{start:ie,end:fe}=n.clips[b];_(E,B,ie*(1-Y)+fe*Y)}else for(let b=0,E=0;b<r;b++,E+=4)_(0,E,b/(r-1));return f}sn("AlphaImage",Du),sn("RGBAImage",Gi);const nh="big-fb";class Bm extends o{createBucket(t){return new Xs(t)}constructor(t){super(t,Hh),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(nh)&&this.heatmapFbos.delete(nh)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Zd;var Qf={get paint(){return Zd=Zd||new y({"hillshade-illumination-direction":new an(at.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new an(at.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new an(at.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new an(at.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new an(at.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new an(at.paint_hillshade["hillshade-accent-color"])})}};class ep extends o{constructor(t){super(t,Qf)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const tp=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:np}=tp;function rp(n,t,r=2){const l=t&&t.length,f=l?t[0]*r:n.length;let _=jo(n,0,f,r,!0);const b=[];if(!_||_.next===_.prev)return b;let E,P,B;if(l&&(_=function(Y,ie,fe,ge){const Ee=[];for(let ke=0,Ge=ie.length;ke<Ge;ke++){const Ye=jo(Y,ie[ke]*ge,ke<Ge-1?ie[ke+1]*ge:Y.length,ge,!1);Ye===Ye.next&&(Ye.steiner=!0),Ee.push(up(Ye))}Ee.sort(Wd);for(let ke=0;ke<Ee.length;ke++)fe=lp(Ee[ke],fe);return fe}(n,t,_,r)),n.length>80*r){E=1/0,P=1/0;let Y=-1/0,ie=-1/0;for(let fe=r;fe<f;fe+=r){const ge=n[fe],Ee=n[fe+1];ge<E&&(E=ge),Ee<P&&(P=Ee),ge>Y&&(Y=ge),Ee>ie&&(ie=Ee)}B=Math.max(Y-E,ie-P),B=B!==0?32767/B:0}return yc(_,b,r,E,P,B,0),b}function jo(n,t,r,l,f){let _;if(f===function(b,E,P,B){let Y=0;for(let ie=E,fe=P-B;ie<P;ie+=B)Y+=(b[fe]-b[ie])*(b[ie+1]+b[fe+1]),fe=ie;return Y}(n,t,r,l)>0)for(let b=t;b<r;b+=l)_=oh(b/l|0,n[b],n[b+1],_);else for(let b=r-l;b>=t;b-=l)_=oh(b/l|0,n[b],n[b+1],_);return _&&vc(_,_.next)&&(Cs(_),_=_.next),_}function vi(n,t){if(!n)return n;t||(t=n);let r,l=n;do if(r=!1,l.steiner||!vc(l,l.next)&&ri(l.prev,l,l.next)!==0)l=l.next;else{if(Cs(l),l=t=l.prev,l===l.next)break;r=!0}while(r||l!==t);return t}function yc(n,t,r,l,f,_,b){if(!n)return;!b&&_&&function(P,B,Y,ie){let fe=P;do fe.z===0&&(fe.z=Xh(fe.x,fe.y,B,Y,ie)),fe.prevZ=fe.prev,fe.nextZ=fe.next,fe=fe.next;while(fe!==P);fe.prevZ.nextZ=null,fe.prevZ=null,function(ge){let Ee,ke=1;do{let Ge,Ye=ge;ge=null;let dt=null;for(Ee=0;Ye;){Ee++;let it=Ye,ht=0;for(let Rt=0;Rt<ke&&(ht++,it=it.nextZ,it);Rt++);let St=ke;for(;ht>0||St>0&&it;)ht!==0&&(St===0||!it||Ye.z<=it.z)?(Ge=Ye,Ye=Ye.nextZ,ht--):(Ge=it,it=it.nextZ,St--),dt?dt.nextZ=Ge:ge=Ge,Ge.prevZ=dt,dt=Ge;Ye=it}dt.nextZ=null,ke*=2}while(Ee>1)}(fe)}(n,l,f,_);let E=n;for(;n.prev!==n.next;){const P=n.prev,B=n.next;if(_?op(n,l,f,_):ip(n))t.push(P.i,n.i,B.i),Cs(n),n=B.next,E=B.next;else if((n=B)===E){b?b===1?yc(n=sp(vi(n),t),t,r,l,f,_,2):b===2&&ap(n,t,r,l,f,_):yc(vi(n),t,r,l,f,_,1);break}}}function ip(n){const t=n.prev,r=n,l=n.next;if(ri(t,r,l)>=0)return!1;const f=t.x,_=r.x,b=l.x,E=t.y,P=r.y,B=l.y,Y=f<_?f<b?f:b:_<b?_:b,ie=E<P?E<B?E:B:P<B?P:B,fe=f>_?f>b?f:b:_>b?_:b,ge=E>P?E>B?E:B:P>B?P:B;let Ee=l.next;for(;Ee!==t;){if(Ee.x>=Y&&Ee.x<=fe&&Ee.y>=ie&&Ee.y<=ge&&Ql(f,E,_,P,b,B,Ee.x,Ee.y)&&ri(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function op(n,t,r,l){const f=n.prev,_=n,b=n.next;if(ri(f,_,b)>=0)return!1;const E=f.x,P=_.x,B=b.x,Y=f.y,ie=_.y,fe=b.y,ge=E<P?E<B?E:B:P<B?P:B,Ee=Y<ie?Y<fe?Y:fe:ie<fe?ie:fe,ke=E>P?E>B?E:B:P>B?P:B,Ge=Y>ie?Y>fe?Y:fe:ie>fe?ie:fe,Ye=Xh(ge,Ee,t,r,l),dt=Xh(ke,Ge,t,r,l);let it=n.prevZ,ht=n.nextZ;for(;it&&it.z>=Ye&&ht&&ht.z<=dt;){if(it.x>=ge&&it.x<=ke&&it.y>=Ee&&it.y<=Ge&&it!==f&&it!==b&&Ql(E,Y,P,ie,B,fe,it.x,it.y)&&ri(it.prev,it,it.next)>=0||(it=it.prevZ,ht.x>=ge&&ht.x<=ke&&ht.y>=Ee&&ht.y<=Ge&&ht!==f&&ht!==b&&Ql(E,Y,P,ie,B,fe,ht.x,ht.y)&&ri(ht.prev,ht,ht.next)>=0))return!1;ht=ht.nextZ}for(;it&&it.z>=Ye;){if(it.x>=ge&&it.x<=ke&&it.y>=Ee&&it.y<=Ge&&it!==f&&it!==b&&Ql(E,Y,P,ie,B,fe,it.x,it.y)&&ri(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;ht&&ht.z<=dt;){if(ht.x>=ge&&ht.x<=ke&&ht.y>=Ee&&ht.y<=Ge&&ht!==f&&ht!==b&&Ql(E,Y,P,ie,B,fe,ht.x,ht.y)&&ri(ht.prev,ht,ht.next)>=0)return!1;ht=ht.nextZ}return!0}function sp(n,t){let r=n;do{const l=r.prev,f=r.next.next;!vc(l,f)&&rh(l,r,r.next,f)&&Bu(l,f)&&Bu(f,l)&&(t.push(l.i,r.i,f.i),Cs(r),Cs(r.next),r=n=f),r=r.next}while(r!==n);return vi(r)}function ap(n,t,r,l,f,_){let b=n;do{let E=b.next.next;for(;E!==b.prev;){if(b.i!==E.i&&Xd(b,E)){let P=Kd(b,E);return b=vi(b,b.next),P=vi(P,P.next),yc(b,t,r,l,f,_,0),void yc(P,t,r,l,f,_,0)}E=E.next}b=b.next}while(b!==n)}function Wd(n,t){return n.x-t.x}function lp(n,t){const r=function(f,_){let b=_;const E=f.x,P=f.y;let B,Y=-1/0;do{if(P<=b.y&&P>=b.next.y&&b.next.y!==b.y){const ke=b.x+(P-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(ke<=E&&ke>Y&&(Y=ke,B=b.x<b.next.x?b:b.next,ke===E))return B}b=b.next}while(b!==_);if(!B)return null;const ie=B,fe=B.x,ge=B.y;let Ee=1/0;b=B;do{if(E>=b.x&&b.x>=fe&&E!==b.x&&Ql(P<ge?E:Y,P,fe,ge,P<ge?Y:E,P,b.x,b.y)){const ke=Math.abs(P-b.y)/(E-b.x);Bu(b,f)&&(ke<Ee||ke===Ee&&(b.x>B.x||b.x===B.x&&qd(B,b)))&&(B=b,Ee=ke)}b=b.next}while(b!==ie);return B}(n,t);if(!r)return t;const l=Kd(r,n);return vi(l,l.next),vi(r,r.next)}function qd(n,t){return ri(n.prev,n,t.prev)<0&&ri(t.next,n,n.next)<0}function Xh(n,t,r,l,f){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-l)*f|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function up(n){let t=n,r=n;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==n);return r}function Ql(n,t,r,l,f,_,b,E){return(f-b)*(t-E)>=(n-b)*(_-E)&&(n-b)*(l-E)>=(r-b)*(t-E)&&(r-b)*(_-E)>=(f-b)*(l-E)}function Xd(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function(r,l){let f=r;do{if(f.i!==r.i&&f.next.i!==r.i&&f.i!==l.i&&f.next.i!==l.i&&rh(f,f.next,r,l))return!0;f=f.next}while(f!==r);return!1}(n,t)&&(Bu(n,t)&&Bu(t,n)&&function(r,l){let f=r,_=!1;const b=(r.x+l.x)/2,E=(r.y+l.y)/2;do f.y>E!=f.next.y>E&&f.next.y!==f.y&&b<(f.next.x-f.x)*(E-f.y)/(f.next.y-f.y)+f.x&&(_=!_),f=f.next;while(f!==r);return _}(n,t)&&(ri(n.prev,n,t.prev)||ri(n,t.prev,t))||vc(n,t)&&ri(n.prev,n,n.next)>0&&ri(t.prev,t,t.next)>0)}function ri(n,t,r){return(t.y-n.y)*(r.x-t.x)-(t.x-n.x)*(r.y-t.y)}function vc(n,t){return n.x===t.x&&n.y===t.y}function rh(n,t,r,l){const f=ih(ri(n,t,r)),_=ih(ri(n,t,l)),b=ih(ri(r,l,n)),E=ih(ri(r,l,t));return f!==_&&b!==E||!(f!==0||!Kh(n,r,t))||!(_!==0||!Kh(n,l,t))||!(b!==0||!Kh(r,n,l))||!(E!==0||!Kh(r,t,l))}function Kh(n,t,r){return t.x<=Math.max(n.x,r.x)&&t.x>=Math.min(n.x,r.x)&&t.y<=Math.max(n.y,r.y)&&t.y>=Math.min(n.y,r.y)}function ih(n){return n>0?1:n<0?-1:0}function Bu(n,t){return ri(n.prev,n,n.next)<0?ri(n,t,n.next)>=0&&ri(n,n.prev,t)>=0:ri(n,t,n.prev)<0||ri(n,n.next,t)<0}function Kd(n,t){const r=Yd(n.i,n.x,n.y),l=Yd(t.i,t.x,t.y),f=n.next,_=t.prev;return n.next=t,t.prev=n,r.next=f,f.prev=r,l.next=r,r.prev=l,_.next=l,l.prev=_,l}function oh(n,t,r,l){const f=Yd(n,t,r);return l?(f.next=l.next,f.prev=l,l.next.prev=f,l.next=f):(f.prev=f,f.next=f),f}function Cs(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Yd(n,t,r){return{i:n,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Yh(n,t,r){const l=r.patternDependencies;let f=!1;for(const _ of t){const b=_.paint.get(`${n}-pattern`);b.isConstant()||(f=!0);const E=b.constantOr(null);E&&(f=!0,l[E.to]=!0,l[E.from]=!0)}return f}function sh(n,t,r,l,f){const _=f.patternDependencies;for(const b of t){const E=b.paint.get(`${n}-pattern`).value;if(E.kind!=="constant"){let P=E.evaluate({zoom:l-1},r,{},f.availableImages),B=E.evaluate({zoom:l},r,{},f.availableImages),Y=E.evaluate({zoom:l+1},r,{},f.availableImages);P=P&&P.name?P.name:P,B=B&&B.name?B.name:B,Y=Y&&Y.name?Y.name:Y,_[P]=!0,_[B]=!0,_[Y]=!0,r.patterns[b.id]={min:P,mid:B,max:Y}}}return r}class Jh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xs,this.indexArray=new Xo,this.indexArray2=new si,this.programConfigurations=new va(t.layers,t.zoom),this.segments=new Kn,this.segments2=new Kn,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,l){this.hasPattern=Yh("fill",this.layers,r);const f=this.layers[0].layout.get("fill-sort-key"),_=!f.isConstant(),b=[];for(const{feature:E,id:P,index:B,sourceLayerIndex:Y}of t){const ie=this.layers[0]._featureFilter.needGeometry,fe=Jl(E,ie);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),fe,l))continue;const ge=_?f.evaluate(fe,{},l,r.availableImages):void 0,Ee={id:P,properties:E.properties,type:E.type,sourceLayerIndex:Y,index:B,geometry:ie?fe.geometry:Yl(E),patterns:{},sortKey:ge};b.push(Ee)}_&&b.sort((E,P)=>E.sortKey-P.sortKey);for(const E of b){const{geometry:P,index:B,sourceLayerIndex:Y}=E;if(this.hasPattern){const ie=sh("fill",this.layers,E,this.zoom,r);this.patternFeatures.push(ie)}else this.addFeature(E,P,B,l,{});r.featureIndex.insert(t[B].feature,P,B,Y,this.index)}}update(t,r,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,l)}addFeatures(t,r,l){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,r,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,np),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,r,l,f,_){for(const b of fs(r,500)){let E=0;for(const ge of b)E+=ge.length;const P=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),B=P.vertexLength,Y=[],ie=[];for(const ge of b){if(ge.length===0)continue;ge!==b[0]&&ie.push(Y.length/2);const Ee=this.segments2.prepareSegment(ge.length,this.layoutVertexArray,this.indexArray2),ke=Ee.vertexLength;this.layoutVertexArray.emplaceBack(ge[0].x,ge[0].y),this.indexArray2.emplaceBack(ke+ge.length-1,ke),Y.push(ge[0].x),Y.push(ge[0].y);for(let Ge=1;Ge<ge.length;Ge++)this.layoutVertexArray.emplaceBack(ge[Ge].x,ge[Ge].y),this.indexArray2.emplaceBack(ke+Ge-1,ke+Ge),Y.push(ge[Ge].x),Y.push(ge[Ge].y);Ee.vertexLength+=ge.length,Ee.primitiveLength+=ge.length}const fe=rp(Y,ie);for(let ge=0;ge<fe.length;ge+=3)this.indexArray.emplaceBack(B+fe[ge],B+fe[ge+1],B+fe[ge+2]);P.vertexLength+=E,P.primitiveLength+=fe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,_,f)}}let Jd,_c;sn("FillBucket",Jh,{omit:["layers","patternFeatures"]});var go={get paint(){return _c=_c||new y({"fill-antialias":new an(at.paint_fill["fill-antialias"]),"fill-opacity":new En(at.paint_fill["fill-opacity"]),"fill-color":new En(at.paint_fill["fill-color"]),"fill-outline-color":new En(at.paint_fill["fill-outline-color"]),"fill-translate":new an(at.paint_fill["fill-translate"]),"fill-translate-anchor":new an(at.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wl(at.paint_fill["fill-pattern"])})},get layout(){return Jd=Jd||new y({"fill-sort-key":new En(at.layout_fill["fill-sort-key"])})}};class Nm extends o{constructor(t){super(t,go)}recalculate(t,r){super.recalculate(t,r);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Jh(t)}queryRadius(){return eh(this.paint.get("fill-translate"))}queryIntersectsFeature(t,r,l,f,_,b,E){return Nd(th(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,E),f)}isTileClipped(){return!0}}const Um=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Qh=I([{name:"a_centroid",components:2,type:"Int16"}],4),{members:yo}=Um;var eu={},_n=R,Nu=tu;function tu(n,t,r,l,f){this.properties={},this.extent=r,this.type=0,this._pbf=n,this._geometry=-1,this._keys=l,this._values=f,n.readFields(cp,this,t)}function cp(n,t,r){n==1?t.id=r.readVarint():n==2?function(l,f){for(var _=l.readVarint()+l.pos;l.pos<_;){var b=f._keys[l.readVarint()],E=f._values[l.readVarint()];f.properties[b]=E}}(r,t):n==3?t.type=r.readVarint():n==4&&(t._geometry=r.pos)}function Vm(n){for(var t,r,l=0,f=0,_=n.length,b=_-1;f<_;b=f++)l+=((r=n[b]).x-(t=n[f]).x)*(t.y+r.y);return l}tu.types=["Unknown","Point","LineString","Polygon"],tu.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var t,r=n.readVarint()+n.pos,l=1,f=0,_=0,b=0,E=[];n.pos<r;){if(f<=0){var P=n.readVarint();l=7&P,f=P>>3}if(f--,l===1||l===2)_+=n.readSVarint(),b+=n.readSVarint(),l===1&&(t&&E.push(t),t=[]),t.push(new _n(_,b));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&E.push(t),E},tu.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var t=n.readVarint()+n.pos,r=1,l=0,f=0,_=0,b=1/0,E=-1/0,P=1/0,B=-1/0;n.pos<t;){if(l<=0){var Y=n.readVarint();r=7&Y,l=Y>>3}if(l--,r===1||r===2)(f+=n.readSVarint())<b&&(b=f),f>E&&(E=f),(_+=n.readSVarint())<P&&(P=_),_>B&&(B=_);else if(r!==7)throw new Error("unknown command "+r)}return[b,P,E,B]},tu.prototype.toGeoJSON=function(n,t,r){var l,f,_=this.extent*Math.pow(2,r),b=this.extent*n,E=this.extent*t,P=this.loadGeometry(),B=tu.types[this.type];function Y(ge){for(var Ee=0;Ee<ge.length;Ee++){var ke=ge[Ee];ge[Ee]=[360*(ke.x+b)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ke.y+E)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(l=0;l<P.length;l++)ie[l]=P[l][0];Y(P=ie);break;case 2:for(l=0;l<P.length;l++)Y(P[l]);break;case 3:for(P=function(ge){var Ee=ge.length;if(Ee<=1)return[ge];for(var ke,Ge,Ye=[],dt=0;dt<Ee;dt++){var it=Vm(ge[dt]);it!==0&&(Ge===void 0&&(Ge=it<0),Ge===it<0?(ke&&Ye.push(ke),ke=[ge[dt]]):ke.push(ge[dt]))}return ke&&Ye.push(ke),Ye}(P),l=0;l<P.length;l++)for(f=0;f<P[l].length;f++)Y(P[l][f])}P.length===1?P=P[0]:B="Multi"+B;var fe={type:"Feature",geometry:{type:B,coordinates:P},properties:this.properties};return"id"in this&&(fe.id=this.id),fe};var ah=Nu,lh=ed;function ed(n,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(hp,this,t),this.length=this._features.length}function hp(n,t,r){n===15?t.version=r.readVarint():n===1?t.name=r.readString():n===5?t.extent=r.readVarint():n===2?t._features.push(r.pos):n===3?t._keys.push(r.readString()):n===4&&t._values.push(function(l){for(var f=null,_=l.readVarint()+l.pos;l.pos<_;){var b=l.readVarint()>>3;f=b===1?l.readString():b===2?l.readFloat():b===3?l.readDouble():b===4?l.readVarint64():b===5?l.readVarint():b===6?l.readSVarint():b===7?l.readBoolean():null}return f}(r))}ed.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var t=this._pbf.readVarint()+this._pbf.pos;return new ah(this._pbf,t,this.extent,this._keys,this._values)};var dp=lh;function fp(n,t,r){if(n===3){var l=new dp(r,r.readVarint()+r.pos);l.length&&(t[l.name]=l)}}eu.VectorTile=function(n,t){this.layers=n.readFields(fp,{},t)},eu.VectorTileFeature=Nu,eu.VectorTileLayer=lh;const Qd=eu.VectorTileFeature.types,uh=Math.pow(2,13);function _i(n,t,r,l,f,_,b,E){n.emplaceBack(t,r,2*Math.floor(l*uh)+b,f*uh*2,_*uh*2,Math.round(E))}class Ps{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new po,this.centroidVertexArray=new ni,this.indexArray=new Xo,this.programConfigurations=new va(t.layers,t.zoom),this.segments=new Kn,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,l){this.features=[],this.hasPattern=Yh("fill-extrusion",this.layers,r);for(const{feature:f,id:_,index:b,sourceLayerIndex:E}of t){const P=this.layers[0]._featureFilter.needGeometry,B=Jl(f,P);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),B,l))continue;const Y={id:_,sourceLayerIndex:E,index:b,geometry:P?B.geometry:Yl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(sh("fill-extrusion",this.layers,Y,this.zoom,r)):this.addFeature(Y,Y.geometry,b,l,{}),r.featureIndex.insert(f,Y.geometry,b,E,this.index,!0)}}addFeatures(t,r,l){for(const f of this.features){const{geometry:_}=f;this.addFeature(f,_,f.index,r,l)}}update(t,r,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,yo),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Qh.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,r,l,f,_){for(const b of fs(r,500)){const E={x:0,y:0,vertexCount:0};let P=0;for(const Ee of b)P+=Ee.length;let B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ee of b){if(Ee.length===0||pp(Ee))continue;let ke=0;for(let Ge=0;Ge<Ee.length;Ge++){const Ye=Ee[Ge];if(Ge>=1){const dt=Ee[Ge-1];if(!nu(Ye,dt)){B.vertexLength+4>Kn.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const it=Ye.sub(dt)._perp()._unit(),ht=dt.dist(Ye);ke+ht>32768&&(ke=0),_i(this.layoutVertexArray,Ye.x,Ye.y,it.x,it.y,0,0,ke),_i(this.layoutVertexArray,Ye.x,Ye.y,it.x,it.y,0,1,ke),E.x+=2*Ye.x,E.y+=2*Ye.y,E.vertexCount+=2,ke+=ht,_i(this.layoutVertexArray,dt.x,dt.y,it.x,it.y,0,0,ke),_i(this.layoutVertexArray,dt.x,dt.y,it.x,it.y,0,1,ke),E.x+=2*dt.x,E.y+=2*dt.y,E.vertexCount+=2;const St=B.vertexLength;this.indexArray.emplaceBack(St,St+2,St+1),this.indexArray.emplaceBack(St+1,St+2,St+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+P>Kn.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),Qd[t.type]!=="Polygon")continue;const Y=[],ie=[],fe=B.vertexLength;for(const Ee of b)if(Ee.length!==0){Ee!==b[0]&&ie.push(Y.length/2);for(let ke=0;ke<Ee.length;ke++){const Ge=Ee[ke];_i(this.layoutVertexArray,Ge.x,Ge.y,0,0,1,1,0),E.x+=Ge.x,E.y+=Ge.y,E.vertexCount+=1,Y.push(Ge.x),Y.push(Ge.y)}}const ge=rp(Y,ie);for(let Ee=0;Ee<ge.length;Ee+=3)this.indexArray.emplaceBack(fe+ge[Ee],fe+ge[Ee+2],fe+ge[Ee+1]);B.primitiveLength+=ge.length/3,B.vertexLength+=P;for(let Ee=0;Ee<E.vertexCount;Ee++){const ke=Math.floor(E.x/E.vertexCount),Ge=Math.floor(E.y/E.vertexCount);this.centroidVertexArray.emplaceBack(ke,Ge)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,_,f)}}function nu(n,t){return n.x===t.x&&(n.x<0||n.x>ai)||n.y===t.y&&(n.y<0||n.y>ai)}function pp(n){return n.every(t=>t.x<0)||n.every(t=>t.x>ai)||n.every(t=>t.y<0)||n.every(t=>t.y>ai)}let ef;sn("FillExtrusionBucket",Ps,{omit:["layers","features"]});var _a={get paint(){return ef=ef||new y({"fill-extrusion-opacity":new an(at["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new En(at["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new an(at["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new an(at["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wl(at["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new En(at["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new En(at["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new an(at["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class mp extends o{constructor(t){super(t,_a)}createBucket(t){return new Ps(t)}queryRadius(){return eh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,r,l,f,_,b,E,P){const B=th(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,E),Y=this.paint.get("fill-extrusion-height").evaluate(r,l),ie=this.paint.get("fill-extrusion-base").evaluate(r,l),fe=function(Ee,ke,Ge,Ye){const dt=[];for(const it of Ee){const ht=[it.x,it.y,0,1];$h(ht,ht,ke),dt.push(new C(ht[0]/ht[3],ht[1]/ht[3]))}return dt}(B,P),ge=function(Ee,ke,Ge,Ye){const dt=[],it=[],ht=Ye[8]*ke,St=Ye[9]*ke,Rt=Ye[10]*ke,on=Ye[11]*ke,An=Ye[8]*Ge,rn=Ye[9]*Ge,Qt=Ye[10]*Ge,yn=Ye[11]*Ge;for(const fn of Ee){const un=[],Pt=[];for(const xn of fn){const gn=xn.x,Bn=xn.y,Rr=Ye[0]*gn+Ye[4]*Bn+Ye[12],Mr=Ye[1]*gn+Ye[5]*Bn+Ye[13],Hi=Ye[2]*gn+Ye[6]*Bn+Ye[14],Xa=Ye[3]*gn+Ye[7]*Bn+Ye[15],xo=Hi+Rt,Zi=Xa+on,ts=Rr+An,ns=Mr+rn,rs=Hi+Qt,pi=Xa+yn,Wi=new C((Rr+ht)/Zi,(Mr+St)/Zi);Wi.z=xo/Zi,un.push(Wi);const Bo=new C(ts/pi,ns/pi);Bo.z=rs/pi,Pt.push(Bo)}dt.push(un),it.push(Pt)}return[dt,it]}(f,ie,Y,P);return function(Ee,ke,Ge){let Ye=1/0;Nd(Ge,ke)&&(Ye=gp(Ge,ke[0]));for(let dt=0;dt<ke.length;dt++){const it=ke[dt],ht=Ee[dt];for(let St=0;St<it.length-1;St++){const Rt=it[St],on=[Rt,it[St+1],ht[St+1],ht[St],Rt];Bd(Ge,on)&&(Ye=Math.min(Ye,gp(Ge,on)))}}return Ye!==1/0&&Ye}(ge[0],ge[1],fe)}}function Ko(n,t){return n.x*t.x+n.y*t.y}function gp(n,t){if(n.length===1){let r=0;const l=t[r++];let f;for(;!f||l.equals(f);)if(f=t[r++],!f)return 1/0;for(;r<t.length;r++){const _=t[r],b=n[0],E=f.sub(l),P=_.sub(l),B=b.sub(l),Y=Ko(E,E),ie=Ko(E,P),fe=Ko(P,P),ge=Ko(B,E),Ee=Ko(B,P),ke=Y*fe-ie*ie,Ge=(fe*ge-ie*Ee)/ke,Ye=(Y*Ee-ie*ge)/ke,dt=l.z*(1-Ge-Ye)+f.z*Ge+_.z*Ye;if(isFinite(dt))return dt}return 1/0}{let r=1/0;for(const l of t)r=Math.min(r,l.z);return r}}const yp=I([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:vp}=yp,_p=I([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:xp}=_p,$m=eu.VectorTileFeature.types,td=Math.cos(Math.PI/180*37.5),nd=Math.pow(2,14)/.5;class Yo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new ws,this.layoutVertexArray2=new Ga,this.indexArray=new Xo,this.programConfigurations=new va(t.layers,t.zoom),this.segments=new Kn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,l){this.hasPattern=Yh("line",this.layers,r);const f=this.layers[0].layout.get("line-sort-key"),_=!f.isConstant(),b=[];for(const{feature:E,id:P,index:B,sourceLayerIndex:Y}of t){const ie=this.layers[0]._featureFilter.needGeometry,fe=Jl(E,ie);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),fe,l))continue;const ge=_?f.evaluate(fe,{},l):void 0,Ee={id:P,properties:E.properties,type:E.type,sourceLayerIndex:Y,index:B,geometry:ie?fe.geometry:Yl(E),patterns:{},sortKey:ge};b.push(Ee)}_&&b.sort((E,P)=>E.sortKey-P.sortKey);for(const E of b){const{geometry:P,index:B,sourceLayerIndex:Y}=E;if(this.hasPattern){const ie=sh("line",this.layers,E,this.zoom,r);this.patternFeatures.push(ie)}else this.addFeature(E,P,B,l,{});r.featureIndex.insert(t[B].feature,P,B,Y,this.index)}}update(t,r,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,l)}addFeatures(t,r,l){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,r,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,xp)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,vp),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,r,l,f,_){const b=this.layers[0].layout,E=b.get("line-join").evaluate(t,{}),P=b.get("line-cap"),B=b.get("line-miter-limit"),Y=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const ie of r)this.addLine(ie,t,E,P,B,Y);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,_,f)}addLine(t,r,l,f,_,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ye=0;Ye<t.length-1;Ye++)this.totalDistance+=t[Ye].dist(t[Ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=$m[r.type]==="Polygon";let P=t.length;for(;P>=2&&t[P-1].equals(t[P-2]);)P--;let B=0;for(;B<P-1&&t[B].equals(t[B+1]);)B++;if(P<(E?3:2))return;l==="bevel"&&(_=1.05);const Y=this.overscaling<=16?15*ai/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let fe,ge,Ee,ke,Ge;this.e1=this.e2=-1,E&&(fe=t[P-2],Ge=t[B].sub(fe)._unit()._perp());for(let Ye=B;Ye<P;Ye++){if(Ee=Ye===P-1?E?t[B+1]:void 0:t[Ye+1],Ee&&t[Ye].equals(Ee))continue;Ge&&(ke=Ge),fe&&(ge=fe),fe=t[Ye],Ge=Ee?Ee.sub(fe)._unit()._perp():ke,ke=ke||Ge;let dt=ke.add(Ge);dt.x===0&&dt.y===0||dt._unit();const it=ke.x*Ge.x+ke.y*Ge.y,ht=dt.x*Ge.x+dt.y*Ge.y,St=ht!==0?1/ht:1/0,Rt=2*Math.sqrt(2-2*ht),on=ht<td&&ge&&Ee,An=ke.x*Ge.y-ke.y*Ge.x>0;if(on&&Ye>B){const yn=fe.dist(ge);if(yn>2*Y){const fn=fe.sub(fe.sub(ge)._mult(Y/yn)._round());this.updateDistance(ge,fn),this.addCurrentVertex(fn,ke,0,0,ie),ge=fn}}const rn=ge&&Ee;let Qt=rn?l:E?"butt":f;if(rn&&Qt==="round"&&(St<b?Qt="miter":St<=2&&(Qt="fakeround")),Qt==="miter"&&St>_&&(Qt="bevel"),Qt==="bevel"&&(St>2&&(Qt="flipbevel"),St<_&&(Qt="miter")),ge&&this.updateDistance(ge,fe),Qt==="miter")dt._mult(St),this.addCurrentVertex(fe,dt,0,0,ie);else if(Qt==="flipbevel"){if(St>100)dt=Ge.mult(-1);else{const yn=St*ke.add(Ge).mag()/ke.sub(Ge).mag();dt._perp()._mult(yn*(An?-1:1))}this.addCurrentVertex(fe,dt,0,0,ie),this.addCurrentVertex(fe,dt.mult(-1),0,0,ie)}else if(Qt==="bevel"||Qt==="fakeround"){const yn=-Math.sqrt(St*St-1),fn=An?yn:0,un=An?0:yn;if(ge&&this.addCurrentVertex(fe,ke,fn,un,ie),Qt==="fakeround"){const Pt=Math.round(180*Rt/Math.PI/20);for(let xn=1;xn<Pt;xn++){let gn=xn/Pt;if(gn!==.5){const Rr=gn-.5;gn+=gn*Rr*(gn-1)*((1.0904+it*(it*(3.55645-1.43519*it)-3.2452))*Rr*Rr+(.848013+it*(.215638*it-1.06021)))}const Bn=Ge.sub(ke)._mult(gn)._add(ke)._unit()._mult(An?-1:1);this.addHalfVertex(fe,Bn.x,Bn.y,!1,An,0,ie)}}Ee&&this.addCurrentVertex(fe,Ge,-fn,-un,ie)}else if(Qt==="butt")this.addCurrentVertex(fe,dt,0,0,ie);else if(Qt==="square"){const yn=ge?1:-1;this.addCurrentVertex(fe,dt,yn,yn,ie)}else Qt==="round"&&(ge&&(this.addCurrentVertex(fe,ke,0,0,ie),this.addCurrentVertex(fe,ke,1,1,ie,!0)),Ee&&(this.addCurrentVertex(fe,Ge,-1,-1,ie,!0),this.addCurrentVertex(fe,Ge,0,0,ie)));if(on&&Ye<P-1){const yn=fe.dist(Ee);if(yn>2*Y){const fn=fe.add(Ee.sub(fe)._mult(Y/yn)._round());this.updateDistance(fe,fn),this.addCurrentVertex(fn,Ge,0,0,ie),fe=fn}}}}addCurrentVertex(t,r,l,f,_,b=!1){const E=r.y*f-r.x,P=-r.y-r.x*f;this.addHalfVertex(t,r.x+r.y*l,r.y-r.x*l,b,!1,l,_),this.addHalfVertex(t,E,P,b,!0,-f,_),this.distance>nd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,r,l,f,_,b))}addHalfVertex({x:t,y:r},l,f,_,b,E,P){const B=.5*(this.lineClips?this.scaledDistance*(nd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(_?1:0),(r<<1)+(b?1:0),Math.round(63*l)+128,Math.round(63*f)+128,1+(E===0?0:E<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Y=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Y),P.primitiveLength++),b?this.e2=Y:this.e1=Y}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,r){this.distance+=t.dist(r),this.updateScaledDistance()}}let mr,Bi;sn("LineBucket",Yo,{omit:["layers","patternFeatures"]});var xi={get paint(){return Bi=Bi||new y({"line-opacity":new En(at.paint_line["line-opacity"]),"line-color":new En(at.paint_line["line-color"]),"line-translate":new an(at.paint_line["line-translate"]),"line-translate-anchor":new an(at.paint_line["line-translate-anchor"]),"line-width":new En(at.paint_line["line-width"]),"line-gap-width":new En(at.paint_line["line-gap-width"]),"line-offset":new En(at.paint_line["line-offset"]),"line-blur":new En(at.paint_line["line-blur"]),"line-dasharray":new Ou(at.paint_line["line-dasharray"]),"line-pattern":new Wl(at.paint_line["line-pattern"]),"line-gradient":new Zc(at.paint_line["line-gradient"])})},get layout(){return mr=mr||new y({"line-cap":new an(at.layout_line["line-cap"]),"line-join":new En(at.layout_line["line-join"]),"line-miter-limit":new an(at.layout_line["line-miter-limit"]),"line-round-limit":new an(at.layout_line["line-round-limit"]),"line-sort-key":new En(at.layout_line["line-sort-key"])})}};class no extends En{possiblyEvaluate(t,r){return r=new tr(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(t,r)}evaluate(t,r,l,f){return r=M({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(t,r,l,f)}}let vo;class xc extends o{constructor(t){super(t,xi),this.gradientVersion=0,vo||(vo=new no(xi.paint.properties["line-width"].specification),vo.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!function(l){return l._styleExpression!==void 0}(r)&&r._styleExpression.expression instanceof Ds,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,r){super.recalculate(t,r),this.paint._values["line-floorwidth"]=vo.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Yo(t)}queryRadius(t){const r=t,l=Ai(Lu("line-width",this,r),Lu("line-gap-width",this,r)),f=Lu("line-offset",this,r);return l/2+Math.abs(f)+eh(this.paint.get("line-translate"))}queryIntersectsFeature(t,r,l,f,_,b,E){const P=th(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,E),B=E/2*Ai(this.paint.get("line-width").evaluate(r,l),this.paint.get("line-gap-width").evaluate(r,l)),Y=this.paint.get("line-offset").evaluate(r,l);return Y&&(f=function(ie,fe){const ge=[];for(let Ee=0;Ee<ie.length;Ee++){const ke=ie[Ee],Ge=[];for(let Ye=0;Ye<ke.length;Ye++){const dt=ke[Ye-1],it=ke[Ye],ht=ke[Ye+1],St=Ye===0?new C(0,0):it.sub(dt)._unit()._perp(),Rt=Ye===ke.length-1?new C(0,0):ht.sub(it)._unit()._perp(),on=St._add(Rt)._unit(),An=on.x*Rt.x+on.y*Rt.y;An!==0&&on._mult(1/An),Ge.push(on._mult(fe)._add(it))}ge.push(Ge)}return ge}(f,Y*E)),function(ie,fe,ge){for(let Ee=0;Ee<fe.length;Ee++){const ke=fe[Ee];if(ie.length>=3){for(let Ge=0;Ge<ke.length;Ge++)if(ju(ie,ke[Ge]))return!0}if(Nh(ie,ke,ge))return!0}return!1}(P,f,B)}isTileClipped(){return!0}}function Ai(n,t){return t>0?t+2*n:n}const ch=I([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Uu=I([{name:"a_projected_pos",components:3,type:"Float32"}],4);I([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rd=I([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);I([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const id=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),hh=I([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Jo(n,t,r){return n.sections.forEach(l=>{l.text=function(f,_,b){const E=_.layout.get("text-transform").evaluate(b,{});return E==="uppercase"?f=f.toLocaleUpperCase():E==="lowercase"&&(f=f.toLocaleLowerCase()),Sr.applyArabicShaping&&(f=Sr.applyArabicShaping(f)),f}(l.text,t,r)}),n}I([{name:"triangle",components:3,type:"Uint16"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),I([{type:"Float32",name:"offsetX"}]),I([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),I([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Vu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Vr=24,Wa=or,dh=function(n,t,r,l,f){var _,b,E=8*f-l-1,P=(1<<E)-1,B=P>>1,Y=-7,ie=f-1,fe=-1,ge=n[t+ie];for(ie+=fe,_=ge&(1<<-Y)-1,ge>>=-Y,Y+=E;Y>0;_=256*_+n[t+ie],ie+=fe,Y-=8);for(b=_&(1<<-Y)-1,_>>=-Y,Y+=l;Y>0;b=256*b+n[t+ie],ie+=fe,Y-=8);if(_===0)_=1-B;else{if(_===P)return b?NaN:1/0*(ge?-1:1);b+=Math.pow(2,l),_-=B}return(ge?-1:1)*b*Math.pow(2,_-l)},od=function(n,t,r,l,f,_){var b,E,P,B=8*_-f-1,Y=(1<<B)-1,ie=Y>>1,fe=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,ge=0,Ee=1,ke=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(E=isNaN(t)?1:0,b=Y):(b=Math.floor(Math.log(t)/Math.LN2),t*(P=Math.pow(2,-b))<1&&(b--,P*=2),(t+=b+ie>=1?fe/P:fe*Math.pow(2,1-ie))*P>=2&&(b++,P/=2),b+ie>=Y?(E=0,b=Y):b+ie>=1?(E=(t*P-1)*Math.pow(2,f),b+=ie):(E=t*Math.pow(2,ie-1)*Math.pow(2,f),b=0));f>=8;n[r+ge]=255&E,ge+=Ee,E/=256,f-=8);for(b=b<<f|E,B+=f;B>0;n[r+ge]=255&b,ge+=Ee,b/=256,B-=8);n[r+ge-Ee]|=128*ke};function or(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}or.Varint=0,or.Fixed64=1,or.Bytes=2,or.Fixed32=5;var wc=4294967296,pl=1/wc,fh=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function As(n){return n.type===or.Bytes?n.readVarint()+n.pos:n.pos+1}function ru(n,t,r){return r?4294967296*t+(n>>>0):4294967296*(t>>>0)+(n>>>0)}function ph(n,t,r){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(l);for(var f=r.pos-1;f>=n;f--)r.buf[f+l]=r.buf[f]}function sd(n,t){for(var r=0;r<n.length;r++)t.writeVarint(n[r])}function Lo(n,t){for(var r=0;r<n.length;r++)t.writeSVarint(n[r])}function iu(n,t){for(var r=0;r<n.length;r++)t.writeFloat(n[r])}function xa(n,t){for(var r=0;r<n.length;r++)t.writeDouble(n[r])}function Qo(n,t){for(var r=0;r<n.length;r++)t.writeBoolean(n[r])}function wp(n,t){for(var r=0;r<n.length;r++)t.writeFixed32(n[r])}function tf(n,t){for(var r=0;r<n.length;r++)t.writeSFixed32(n[r])}function nf(n,t){for(var r=0;r<n.length;r++)t.writeFixed64(n[r])}function Gm(n,t){for(var r=0;r<n.length;r++)t.writeSFixed64(n[r])}function wa(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+16777216*n[t+3]}function $u(n,t,r){n[r]=t,n[r+1]=t>>>8,n[r+2]=t>>>16,n[r+3]=t>>>24}function ad(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+(n[t+3]<<24)}or.prototype={destroy:function(){this.buf=null},readFields:function(n,t,r){for(r=r||this.length;this.pos<r;){var l=this.readVarint(),f=l>>3,_=this.pos;this.type=7&l,n(f,t,this),this.pos===_&&this.skip(l)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=wa(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=ad(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=wa(this.buf,this.pos)+wa(this.buf,this.pos+4)*wc;return this.pos+=8,n},readSFixed64:function(){var n=wa(this.buf,this.pos)+ad(this.buf,this.pos+4)*wc;return this.pos+=8,n},readFloat:function(){var n=dh(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=dh(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var t,r,l=this.buf;return t=127&(r=l[this.pos++]),r<128?t:(t|=(127&(r=l[this.pos++]))<<7,r<128?t:(t|=(127&(r=l[this.pos++]))<<14,r<128?t:(t|=(127&(r=l[this.pos++]))<<21,r<128?t:function(f,_,b){var E,P,B=b.buf;if(E=(112&(P=B[b.pos++]))>>4,P<128||(E|=(127&(P=B[b.pos++]))<<3,P<128)||(E|=(127&(P=B[b.pos++]))<<10,P<128)||(E|=(127&(P=B[b.pos++]))<<17,P<128)||(E|=(127&(P=B[b.pos++]))<<24,P<128)||(E|=(1&(P=B[b.pos++]))<<31,P<128))return ru(f,E,_);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=l[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,t=this.pos;return this.pos=n,n-t>=12&&fh?function(r,l,f){return fh.decode(r.subarray(l,f))}(this.buf,t,n):function(r,l,f){for(var _="",b=l;b<f;){var E,P,B,Y=r[b],ie=null,fe=Y>239?4:Y>223?3:Y>191?2:1;if(b+fe>f)break;fe===1?Y<128&&(ie=Y):fe===2?(192&(E=r[b+1]))==128&&(ie=(31&Y)<<6|63&E)<=127&&(ie=null):fe===3?(P=r[b+2],(192&(E=r[b+1]))==128&&(192&P)==128&&((ie=(15&Y)<<12|(63&E)<<6|63&P)<=2047||ie>=55296&&ie<=57343)&&(ie=null)):fe===4&&(P=r[b+2],B=r[b+3],(192&(E=r[b+1]))==128&&(192&P)==128&&(192&B)==128&&((ie=(15&Y)<<18|(63&E)<<12|(63&P)<<6|63&B)<=65535||ie>=1114112)&&(ie=null)),ie===null?(ie=65533,fe=1):ie>65535&&(ie-=65536,_+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),_+=String.fromCharCode(ie),b+=fe}return _}(this.buf,t,n)},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,n);return this.pos=n,t},readPackedVarint:function(n,t){if(this.type!==or.Bytes)return n.push(this.readVarint(t));var r=As(this);for(n=n||[];this.pos<r;)n.push(this.readVarint(t));return n},readPackedSVarint:function(n){if(this.type!==or.Bytes)return n.push(this.readSVarint());var t=As(this);for(n=n||[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==or.Bytes)return n.push(this.readBoolean());var t=As(this);for(n=n||[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==or.Bytes)return n.push(this.readFloat());var t=As(this);for(n=n||[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==or.Bytes)return n.push(this.readDouble());var t=As(this);for(n=n||[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==or.Bytes)return n.push(this.readFixed32());var t=As(this);for(n=n||[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==or.Bytes)return n.push(this.readSFixed32());var t=As(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==or.Bytes)return n.push(this.readFixed64());var t=As(this);for(n=n||[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==or.Bytes)return n.push(this.readSFixed64());var t=As(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=7&n;if(t===or.Varint)for(;this.buf[this.pos++]>127;);else if(t===or.Bytes)this.pos=this.readVarint()+this.pos;else if(t===or.Fixed32)this.pos+=4;else{if(t!==or.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var t=this.length||16;t<this.pos+n;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),$u(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),$u(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),$u(this.buf,-1&n,this.pos),$u(this.buf,Math.floor(n*pl),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),$u(this.buf,-1&n,this.pos),$u(this.buf,Math.floor(n*pl),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(t,r){var l,f;if(t>=0?(l=t%4294967296|0,f=t/4294967296|0):(f=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,f=f+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(_,b,E){E.buf[E.pos++]=127&_|128,_>>>=7,E.buf[E.pos++]=127&_|128,_>>>=7,E.buf[E.pos++]=127&_|128,_>>>=7,E.buf[E.pos++]=127&_|128,E.buf[E.pos]=127&(_>>>=7)}(l,0,r),function(_,b){var E=(7&_)<<4;b.buf[b.pos++]|=E|((_>>>=3)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_)))))}(f,r)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var t=this.pos;this.pos=function(l,f,_){for(var b,E,P=0;P<f.length;P++){if((b=f.charCodeAt(P))>55295&&b<57344){if(!E){b>56319||P+1===f.length?(l[_++]=239,l[_++]=191,l[_++]=189):E=b;continue}if(b<56320){l[_++]=239,l[_++]=191,l[_++]=189,E=b;continue}b=E-55296<<10|b-56320|65536,E=null}else E&&(l[_++]=239,l[_++]=191,l[_++]=189,E=null);b<128?l[_++]=b:(b<2048?l[_++]=b>>6|192:(b<65536?l[_++]=b>>12|224:(l[_++]=b>>18|240,l[_++]=b>>12&63|128),l[_++]=b>>6&63|128),l[_++]=63&b|128)}return _}(this.buf,n,this.pos);var r=this.pos-t;r>=128&&ph(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(n){this.realloc(4),od(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),od(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var t=n.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=n[r]},writeRawMessage:function(n,t){this.pos++;var r=this.pos;n(t,this);var l=this.pos-r;l>=128&&ph(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeMessage:function(n,t,r){this.writeTag(n,or.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(n,t){t.length&&this.writeMessage(n,sd,t)},writePackedSVarint:function(n,t){t.length&&this.writeMessage(n,Lo,t)},writePackedBoolean:function(n,t){t.length&&this.writeMessage(n,Qo,t)},writePackedFloat:function(n,t){t.length&&this.writeMessage(n,iu,t)},writePackedDouble:function(n,t){t.length&&this.writeMessage(n,xa,t)},writePackedFixed32:function(n,t){t.length&&this.writeMessage(n,wp,t)},writePackedSFixed32:function(n,t){t.length&&this.writeMessage(n,tf,t)},writePackedFixed64:function(n,t){t.length&&this.writeMessage(n,nf,t)},writePackedSFixed64:function(n,t){t.length&&this.writeMessage(n,Gm,t)},writeBytesField:function(n,t){this.writeTag(n,or.Bytes),this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,or.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,or.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,or.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,or.Fixed64),this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,or.Varint),this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,or.Varint),this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,or.Bytes),this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,or.Fixed32),this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,or.Fixed64),this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,!!t)}};var ml=L(Wa);const mh=3;function Gu(n,t,r){n===1&&r.readMessage(bp,t)}function bp(n,t,r){if(n===3){const{id:l,bitmap:f,width:_,height:b,left:E,top:P,advance:B}=r.readMessage(Sp,{});t.push({id:l,bitmap:new Du({width:_+2*mh,height:b+2*mh},f),metrics:{width:_,height:b,left:E,top:P,advance:B}})}}function Sp(n,t,r){n===1?t.id=r.readVarint():n===2?t.bitmap=r.readBytes():n===3?t.width=r.readVarint():n===4?t.height=r.readVarint():n===5?t.left=r.readSVarint():n===6?t.top=r.readSVarint():n===7&&(t.advance=r.readVarint())}const ld=mh;function gh(n){let t=0,r=0;for(const b of n)t+=b.w*b.h,r=Math.max(r,b.w);n.sort((b,E)=>E.h-b.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let f=0,_=0;for(const b of n)for(let E=l.length-1;E>=0;E--){const P=l[E];if(!(b.w>P.w||b.h>P.h)){if(b.x=P.x,b.y=P.y,_=Math.max(_,b.y+b.h),f=Math.max(f,b.x+b.w),b.w===P.w&&b.h===P.h){const B=l.pop();E<l.length&&(l[E]=B)}else b.h===P.h?(P.x+=b.w,P.w-=b.w):b.w===P.w?(P.y+=b.h,P.h-=b.h):(l.push({x:P.x+b.w,y:P.y,w:P.w-b.w,h:b.h}),P.y+=b.h,P.h-=b.h);break}}return{w:f,h:_,fill:t/(f*_)||0}}const Do=1;class rf{constructor(t,{pixelRatio:r,version:l,stretchX:f,stretchY:_,content:b,textFitWidth:E,textFitHeight:P}){this.paddedRect=t,this.pixelRatio=r,this.stretchX=f,this.stretchY=_,this.content=b,this.version=l,this.textFitWidth=E,this.textFitHeight=P}get tl(){return[this.paddedRect.x+Do,this.paddedRect.y+Do]}get br(){return[this.paddedRect.x+this.paddedRect.w-Do,this.paddedRect.y+this.paddedRect.h-Do]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Do)/this.pixelRatio,(this.paddedRect.h-2*Do)/this.pixelRatio]}}class of{constructor(t,r){const l={},f={};this.haveRenderCallbacks=[];const _=[];this.addImages(t,l,_),this.addImages(r,f,_);const{w:b,h:E}=gh(_),P=new Gi({width:b||1,height:E||1});for(const B in t){const Y=t[B],ie=l[B].paddedRect;Gi.copy(Y.data,P,{x:0,y:0},{x:ie.x+Do,y:ie.y+Do},Y.data)}for(const B in r){const Y=r[B],ie=f[B].paddedRect,fe=ie.x+Do,ge=ie.y+Do,Ee=Y.data.width,ke=Y.data.height;Gi.copy(Y.data,P,{x:0,y:0},{x:fe,y:ge},Y.data),Gi.copy(Y.data,P,{x:0,y:ke-1},{x:fe,y:ge-1},{width:Ee,height:1}),Gi.copy(Y.data,P,{x:0,y:0},{x:fe,y:ge+ke},{width:Ee,height:1}),Gi.copy(Y.data,P,{x:Ee-1,y:0},{x:fe-1,y:ge},{width:1,height:ke}),Gi.copy(Y.data,P,{x:0,y:0},{x:fe+Ee,y:ge},{width:1,height:ke})}this.image=P,this.iconPositions=l,this.patternPositions=f}addImages(t,r,l){for(const f in t){const _=t[f],b={x:0,y:0,w:_.data.width+2*Do,h:_.data.height+2*Do};l.push(b),r[f]=new rf(b,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in t.updatedImages)this.patchUpdatedImage(this.iconPositions[l],t.getImage(l),r),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l),r)}patchUpdatedImage(t,r,l){if(!t||!r||t.version===r.version)return;t.version=r.version;const[f,_]=t.tl;l.update(r.data,void 0,{x:f,y:_})}}var gl;sn("ImagePosition",rf),sn("ImageAtlas",of),w.ah=void 0,(gl=w.ah||(w.ah={}))[gl.none=0]="none",gl[gl.horizontal=1]="horizontal",gl[gl.vertical=2]="vertical",gl[gl.horizontalOnly=3]="horizontalOnly";const ba=-17;class yh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,r){const l=new yh;return l.scale=t||1,l.fontStack=r,l}static forImage(t){const r=new yh;return r.imageName=t,r}}class Sa{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,r){const l=new Sa;for(let f=0;f<t.sections.length;f++){const _=t.sections[f];_.image?l.addImageSection(_):l.addTextSection(_,r)}return l}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let r="";for(let l=0;l<t.length;l++){const f=t.charCodeAt(l+1)||null,_=t.charCodeAt(l-1)||null;r+=f&&fl(f)&&!Vu[t[l+1]]||_&&fl(_)&&!Vu[t[l-1]]||!Vu[t[l]]?t[l]:Vu[t[l]]}return r}(this.text)}trim(){let t=0;for(let l=0;l<this.text.length&&qr[this.text.charCodeAt(l)];l++)t++;let r=this.text.length;for(let l=this.text.length-1;l>=0&&l>=t&&qr[this.text.charCodeAt(l)];l--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)}substring(t,r){const l=new Sa;return l.text=this.text.substring(t,r),l.sectionIndex=this.sectionIndex.slice(t,r),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,r)=>Math.max(t,this.sections[r].scale),0)}addTextSection(t,r){this.text+=t.text,this.sections.push(yh.forText(t.scale,t.fontStack||r));const l=this.sections.length-1;for(let f=0;f<t.text.length;++f)this.sectionIndex.push(l)}addImageSection(t){const r=t.image?t.image.name:"";if(r.length===0)return void W("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(yh.forImage(r)),this.sectionIndex.push(this.sections.length-1)):W("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function vh(n,t,r,l,f,_,b,E,P,B,Y,ie,fe,ge,Ee){const ke=Sa.fromFeature(n,f);let Ge;ie===w.ah.vertical&&ke.verticalizePunctuation();const{processBidirectionalText:Ye,processStyledBidirectionalText:dt}=Sr;if(Ye&&ke.sections.length===1){Ge=[];const St=Ye(ke.toString(),es(ke,B,_,t,l,ge));for(const Rt of St){const on=new Sa;on.text=Rt,on.sections=ke.sections;for(let An=0;An<Rt.length;An++)on.sectionIndex.push(0);Ge.push(on)}}else if(dt){Ge=[];const St=dt(ke.text,ke.sectionIndex,es(ke,B,_,t,l,ge));for(const Rt of St){const on=new Sa;on.text=Rt[0],on.sectionIndex=Rt[1],on.sections=ke.sections,Ge.push(on)}}else Ge=function(St,Rt){const on=[],An=St.text;let rn=0;for(const Qt of Rt)on.push(St.substring(rn,Qt)),rn=Qt;return rn<An.length&&on.push(St.substring(rn,An.length)),on}(ke,es(ke,B,_,t,l,ge));const it=[],ht={positionedLines:it,text:ke.toString(),top:Y[1],bottom:Y[1],left:Y[0],right:Y[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return function(St,Rt,on,An,rn,Qt,yn,fn,un,Pt,xn,gn){let Bn=0,Rr=ba,Mr=0,Hi=0;const Xa=fn==="right"?1:fn==="left"?0:.5;let xo=0;for(const pi of rn){pi.trim();const Wi=pi.getMaxScale(),Bo=(Wi-1)*Vr,wo={positionedGlyphs:[],lineOffset:0};St.positionedLines[xo]=wo;const is=wo.positionedGlyphs;let bo=0;if(!pi.length()){Rr+=Qt,++xo;continue}for(let Ms=0;Ms<pi.length();Ms++){const gr=pi.getSection(Ms),Lr=pi.getSectionIndex(Ms),$r=pi.getCharCode(Ms);let Ys=0,li=null,yd=null,lu=null,uu=Vr;const Ka=!(un===w.ah.horizontal||!xn&&!Ru($r)||xn&&(qr[$r]||(Zi=$r,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Zi)))));if(gr.imageName){const Ta=An[gr.imageName];if(!Ta)continue;lu=gr.imageName,St.iconsInText=St.iconsInText||!0,yd=Ta.paddedRect;const ro=Ta.displaySize;gr.scale=gr.scale*Vr/gn,li={width:ro[0],height:ro[1],left:Do,top:-ld,advance:Ka?ro[1]:ro[0]},Ys=Bo+(Vr-ro[1]*gr.scale),uu=li.advance;const Zu=Ka?ro[0]*gr.scale-Vr*Wi:ro[1]*gr.scale-Vr*Wi;Zu>0&&Zu>bo&&(bo=Zu)}else{const Ta=on[gr.fontStack],ro=Ta&&Ta[$r];if(ro&&ro.rect)yd=ro.rect,li=ro.metrics;else{const Zu=Rt[gr.fontStack],hf=Zu&&Zu[$r];if(!hf)continue;li=hf.metrics}Ys=(Wi-gr.scale)*Vr}Ka?(St.verticalizable=!0,is.push({glyph:$r,imageName:lu,x:Bn,y:Rr+Ys,vertical:Ka,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:Lr,metrics:li,rect:yd}),Bn+=uu*gr.scale+Pt):(is.push({glyph:$r,imageName:lu,x:Bn,y:Rr+Ys,vertical:Ka,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:Lr,metrics:li,rect:yd}),Bn+=li.advance*gr.scale+Pt)}is.length!==0&&(Mr=Math.max(Bn-Pt,Mr),Zm(is,0,is.length-1,Xa,bo)),Bn=0;const Ea=Qt*Wi+bo;wo.lineOffset=Math.max(bo,Bo),Rr+=Ea,Hi=Math.max(Ea,Hi),++xo}var Zi;const ts=Rr-ba,{horizontalAlign:ns,verticalAlign:rs}=_h(yn);(function(pi,Wi,Bo,wo,is,bo,Ea,Ms,gr){const Lr=(Wi-Bo)*is;let $r=0;$r=bo!==Ea?-Ms*wo-ba:(-wo*gr+.5)*Ea;for(const Ys of pi)for(const li of Ys.positionedGlyphs)li.x+=Lr,li.y+=$r})(St.positionedLines,Xa,ns,rs,Mr,Hi,Qt,ts,rn.length),St.top+=-rs*ts,St.bottom=St.top+ts,St.left+=-ns*Mr,St.right=St.left+Mr}(ht,t,r,l,Ge,b,E,P,ie,B,fe,Ee),!function(St){for(const Rt of St)if(Rt.positionedGlyphs.length!==0)return!1;return!0}(it)&&ht}const qr={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hm={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Ep={40:!0};function Tp(n,t,r,l,f,_){if(t.imageName){const b=l[t.imageName];return b?b.displaySize[0]*t.scale*Vr/_+f:0}{const b=r[t.fontStack],E=b&&b[n];return E?E.metrics.advance*t.scale+f:0}}function Ip(n,t,r,l){const f=Math.pow(n-t,2);return l?n<t?f/2:2*f:f+Math.abs(r)*r}function Cp(n,t,r){let l=0;return n===10&&(l-=1e4),r&&(l+=150),n!==40&&n!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function sf(n,t,r,l,f,_){let b=null,E=Ip(t,r,f,_);for(const P of l){const B=Ip(t-P.x,r,f,_)+P.badness;B<=E&&(b=P,E=B)}return{index:n,x:t,priorBreak:b,badness:E}}function Pp(n){return n?Pp(n.priorBreak).concat(n.index):[]}function es(n,t,r,l,f,_){if(!n)return[];const b=[],E=function(ie,fe,ge,Ee,ke,Ge){let Ye=0;for(let dt=0;dt<ie.length();dt++){const it=ie.getSection(dt);Ye+=Tp(ie.getCharCode(dt),it,Ee,ke,fe,Ge)}return Ye/Math.max(1,Math.ceil(Ye/ge))}(n,t,r,l,f,_),P=n.text.indexOf("​")>=0;let B=0;for(let ie=0;ie<n.length();ie++){const fe=n.getSection(ie),ge=n.getCharCode(ie);if(qr[ge]||(B+=Tp(ge,fe,l,f,t,_)),ie<n.length()-1){const Ee=!((Y=ge)<11904)&&(!!Yn["CJK Compatibility Forms"](Y)||!!Yn["CJK Compatibility"](Y)||!!Yn["CJK Strokes"](Y)||!!Yn["CJK Symbols and Punctuation"](Y)||!!Yn["Enclosed CJK Letters and Months"](Y)||!!Yn["Halfwidth and Fullwidth Forms"](Y)||!!Yn["Ideographic Description Characters"](Y)||!!Yn["Vertical Forms"](Y)||zu.test(String.fromCodePoint(Y)));(Hm[ge]||Ee||fe.imageName||ie!==n.length()-2&&Ep[n.getCharCode(ie+1)])&&b.push(sf(ie+1,B,E,b,Cp(ge,n.getCharCode(ie+1),Ee&&P),!1))}}var Y;return Pp(sf(n.length(),B,E,b,0,!0))}function _h(n){let t=.5,r=.5;switch(n){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Zm(n,t,r,l,f){if(!l&&!f)return;const _=n[r],b=(n[r].x+_.metrics.advance*_.scale)*l;for(let E=t;E<=r;E++)n[E].x-=b,n[E].y+=f}function ou(n,t,r){const{horizontalAlign:l,verticalAlign:f}=_h(r),_=t[0]-n.displaySize[0]*l,b=t[1]-n.displaySize[1]*f;return{image:n,top:b,bottom:b+n.displaySize[1],left:_,right:_+n.displaySize[0]}}function xh(n){var t,r;let l=n.left,f=n.top,_=n.right-l,b=n.bottom-f;const E=(t=n.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",P=(r=n.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",B=(n.image.content[2]-n.image.content[0])/(n.image.content[3]-n.image.content[1]);if(P==="proportional"){if(E==="stretchOnly"&&_/b<B||E==="proportional"){const Y=Math.ceil(b*B);l*=Y/_,_=Y}}else if(E==="proportional"&&P==="stretchOnly"&&B!==0&&_/b>B){const Y=Math.ceil(_/B);f*=Y/b,b=Y}return{x1:l,y1:f,x2:l+_,y2:f+b}}function su(n,t,r,l,f,_){const b=n.image;let E;if(b.content){const Ge=b.content,Ye=b.pixelRatio||1;E=[Ge[0]/Ye,Ge[1]/Ye,b.displaySize[0]-Ge[2]/Ye,b.displaySize[1]-Ge[3]/Ye]}const P=t.left*_,B=t.right*_;let Y,ie,fe,ge;r==="width"||r==="both"?(ge=f[0]+P-l[3],ie=f[0]+B+l[1]):(ge=f[0]+(P+B-b.displaySize[0])/2,ie=ge+b.displaySize[0]);const Ee=t.top*_,ke=t.bottom*_;return r==="height"||r==="both"?(Y=f[1]+Ee-l[0],fe=f[1]+ke+l[2]):(Y=f[1]+(Ee+ke-b.displaySize[1])/2,fe=Y+b.displaySize[1]),{image:b,top:Y,right:ie,bottom:fe,left:ge,collisionPadding:E}}const au=255,Ks=128,qa=au*Ks;function Ap(n,t){const{expression:r}=t;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new tr(n+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:f}=r;let _=0;for(;_<l.length&&l[_]<=n;)_++;_=Math.max(0,_-1);let b=_;for(;b<l.length&&l[b]<n+1;)b++;b=Math.min(l.length-1,b);const E=l[_],P=l[b];return r.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:P,interpolationType:f}:{kind:"camera",minZoom:E,maxZoom:P,minSize:r.evaluate(new tr(E)),maxSize:r.evaluate(new tr(P)),interpolationType:f}}}function wh(n,t,r){let l="never";const f=n.get(t);return f?l=f:n.get(r)&&(l="always"),l}const Wm=eu.VectorTileFeature.types,Mp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bh(n,t,r,l,f,_,b,E,P,B,Y,ie,fe){const ge=E?Math.min(qa,Math.round(E[0])):0,Ee=E?Math.min(qa,Math.round(E[1])):0;n.emplaceBack(t,r,Math.round(32*l),Math.round(32*f),_,b,(ge<<1)+(P?1:0),Ee,16*B,16*Y,256*ie,256*fe)}function bc(n,t,r){n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r)}function ud(n){for(const t of n.sections)if($a(t.text))return!0;return!1}class cd{constructor(t){this.layoutVertexArray=new qo,this.indexArray=new Xo,this.programConfigurations=t,this.segments=new Kn,this.dynamicLayoutVertexArray=new Ws,this.opacityVertexArray=new eo,this.hasVisibleVertices=!1,this.placedSymbolArray=new wr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,r,l,f){this.isEmpty()||(l&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ch.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Uu.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Mp,!0),this.opacityVertexBuffer.itemSize=1),(l||f)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}sn("SymbolBuffers",cd);class Sh{constructor(t,r,l){this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new l,this.segments=new Kn,this.collisionVertexArray=new bs}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,rd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}sn("CollisionBuffers",Sh);class Sc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(b=>b.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Uh([]),this.placementViewportMatrix=Uh([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ap(this.zoom,r["text-size"]),this.iconSizeData=Ap(this.zoom,r["icon-size"]);const l=this.layers[0].layout,f=l.get("symbol-sort-key"),_=l.get("symbol-z-order");this.canOverlap=wh(l,"text-overlap","text-allow-overlap")!=="never"||wh(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(b=>w.ah[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=t.sourceID}createArrays(){this.text=new cd(new va(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new cd(new va(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Er,this.lineVertexArray=new Ci,this.symbolInstances=new qn,this.textAnchorOffsets=new Tr}calculateGlyphDependencies(t,r,l,f,_){for(let b=0;b<t.length;b++)if(r[t.charCodeAt(b)]=!0,(l||f)&&_){const E=Vu[t.charAt(b)];E&&(r[E.charCodeAt(0)]=!0)}}populate(t,r,l){const f=this.layers[0],_=f.layout,b=_.get("text-font"),E=_.get("text-field"),P=_.get("icon-image"),B=(E.value.kind!=="constant"||E.value.value instanceof Jr&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),Y=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,ie=_.get("symbol-sort-key");if(this.features=[],!B&&!Y)return;const fe=r.iconDependencies,ge=r.glyphDependencies,Ee=r.availableImages,ke=new tr(this.zoom);for(const{feature:Ge,id:Ye,index:dt,sourceLayerIndex:it}of t){const ht=f._featureFilter.needGeometry,St=Jl(Ge,ht);if(!f._featureFilter.filter(ke,St,l))continue;let Rt,on;if(ht||(St.geometry=Yl(Ge)),B){const rn=f.getValueAndResolveTokens("text-field",St,l,Ee),Qt=Jr.factory(rn),yn=this.hasRTLText=this.hasRTLText||ud(Qt);(!yn||Sr.getRTLTextPluginStatus()==="unavailable"||yn&&Sr.isParsed())&&(Rt=Jo(Qt,f,St))}if(Y){const rn=f.getValueAndResolveTokens("icon-image",St,l,Ee);on=rn instanceof Ei?rn:Ei.fromString(rn)}if(!Rt&&!on)continue;const An=this.sortFeaturesByKey?ie.evaluate(St,{},l):void 0;if(this.features.push({id:Ye,text:Rt,icon:on,index:dt,sourceLayerIndex:it,geometry:St.geometry,properties:Ge.properties,type:Wm[Ge.type],sortKey:An}),on&&(fe[on.name]=!0),Rt){const rn=b.evaluate(St,{},l).join(","),Qt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(w.ah.vertical)>=0;for(const yn of Rt.sections)if(yn.image)fe[yn.image.name]=!0;else{const fn=Hc(Rt.toString()),un=yn.fontStack||rn,Pt=ge[un]=ge[un]||{};this.calculateGlyphDependencies(yn.text,Pt,Qt,this.allowVerticalPlacement,fn)}}}_.get("symbol-placement")==="line"&&(this.features=function(Ge){const Ye={},dt={},it=[];let ht=0;function St(rn){it.push(Ge[rn]),ht++}function Rt(rn,Qt,yn){const fn=dt[rn];return delete dt[rn],dt[Qt]=fn,it[fn].geometry[0].pop(),it[fn].geometry[0]=it[fn].geometry[0].concat(yn[0]),fn}function on(rn,Qt,yn){const fn=Ye[Qt];return delete Ye[Qt],Ye[rn]=fn,it[fn].geometry[0].shift(),it[fn].geometry[0]=yn[0].concat(it[fn].geometry[0]),fn}function An(rn,Qt,yn){const fn=yn?Qt[0][Qt[0].length-1]:Qt[0][0];return`${rn}:${fn.x}:${fn.y}`}for(let rn=0;rn<Ge.length;rn++){const Qt=Ge[rn],yn=Qt.geometry,fn=Qt.text?Qt.text.toString():null;if(!fn){St(rn);continue}const un=An(fn,yn),Pt=An(fn,yn,!0);if(un in dt&&Pt in Ye&&dt[un]!==Ye[Pt]){const xn=on(un,Pt,yn),gn=Rt(un,Pt,it[xn].geometry);delete Ye[un],delete dt[Pt],dt[An(fn,it[gn].geometry,!0)]=gn,it[xn].geometry=null}else un in dt?Rt(un,Pt,yn):Pt in Ye?on(un,Pt,yn):(St(rn),Ye[un]=ht-1,dt[Pt]=ht-1)}return it.filter(rn=>rn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ge,Ye)=>Ge.sortKey-Ye.sortKey)}update(t,r,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,r,this.layers,l),this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,r){const l=this.lineVertexArray.length;if(t.segment!==void 0){let f=t.dist(r[t.segment+1]),_=t.dist(r[t.segment]);const b={};for(let E=t.segment+1;E<r.length;E++)b[E]={x:r[E].x,y:r[E].y,tileUnitDistanceFromAnchor:f},E<r.length-1&&(f+=r[E+1].dist(r[E]));for(let E=t.segment||0;E>=0;E--)b[E]={x:r[E].x,y:r[E].y,tileUnitDistanceFromAnchor:_},E>0&&(_+=r[E-1].dist(r[E]));for(let E=0;E<r.length;E++){const P=b[E];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(t,r,l,f,_,b,E,P,B,Y,ie,fe){const ge=t.indexArray,Ee=t.layoutVertexArray,ke=t.segments.prepareSegment(4*r.length,Ee,ge,this.canOverlap?b.sortKey:void 0),Ge=this.glyphOffsetArray.length,Ye=ke.vertexLength,dt=this.allowVerticalPlacement&&E===w.ah.vertical?Math.PI/2:0,it=b.text&&b.text.sections;for(let ht=0;ht<r.length;ht++){const{tl:St,tr:Rt,bl:on,br:An,tex:rn,pixelOffsetTL:Qt,pixelOffsetBR:yn,minFontScaleX:fn,minFontScaleY:un,glyphOffset:Pt,isSDF:xn,sectionIndex:gn}=r[ht],Bn=ke.vertexLength,Rr=Pt[1];bh(Ee,P.x,P.y,St.x,Rr+St.y,rn.x,rn.y,l,xn,Qt.x,Qt.y,fn,un),bh(Ee,P.x,P.y,Rt.x,Rr+Rt.y,rn.x+rn.w,rn.y,l,xn,yn.x,Qt.y,fn,un),bh(Ee,P.x,P.y,on.x,Rr+on.y,rn.x,rn.y+rn.h,l,xn,Qt.x,yn.y,fn,un),bh(Ee,P.x,P.y,An.x,Rr+An.y,rn.x+rn.w,rn.y+rn.h,l,xn,yn.x,yn.y,fn,un),bc(t.dynamicLayoutVertexArray,P,dt),ge.emplaceBack(Bn,Bn+1,Bn+2),ge.emplaceBack(Bn+1,Bn+2,Bn+3),ke.vertexLength+=4,ke.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),ht!==r.length-1&&gn===r[ht+1].sectionIndex||t.programConfigurations.populatePaintArrays(Ee.length,b,b.index,{},fe,it&&it[gn])}t.placedSymbolArray.emplaceBack(P.x,P.y,Ge,this.glyphOffsetArray.length-Ge,Ye,B,Y,P.segment,l?l[0]:0,l?l[1]:0,f[0],f[1],E,0,!1,0,ie)}_addCollisionDebugVertex(t,r,l,f,_,b){return r.emplaceBack(0,0),t.emplaceBack(l.x,l.y,f,_,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(t,r,l,f,_,b,E){const P=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),B=P.vertexLength,Y=_.layoutVertexArray,ie=_.collisionVertexArray,fe=E.anchorX,ge=E.anchorY;this._addCollisionDebugVertex(Y,ie,b,fe,ge,new C(t,r)),this._addCollisionDebugVertex(Y,ie,b,fe,ge,new C(l,r)),this._addCollisionDebugVertex(Y,ie,b,fe,ge,new C(l,f)),this._addCollisionDebugVertex(Y,ie,b,fe,ge,new C(t,f)),P.vertexLength+=4;const Ee=_.indexArray;Ee.emplaceBack(B,B+1),Ee.emplaceBack(B+1,B+2),Ee.emplaceBack(B+2,B+3),Ee.emplaceBack(B+3,B),P.primitiveLength+=4}addDebugCollisionBoxes(t,r,l,f){for(let _=t;_<r;_++){const b=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,f?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Sh(Fo,id.members,si),this.iconCollisionBox=new Sh(Fo,id.members,si);for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(t,r,l,f,_,b,E,P,B){const Y={};for(let ie=r;ie<l;ie++){const fe=t.get(ie);Y.textBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},Y.textFeatureIndex=fe.featureIndex;break}for(let ie=f;ie<_;ie++){const fe=t.get(ie);Y.verticalTextBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},Y.verticalTextFeatureIndex=fe.featureIndex;break}for(let ie=b;ie<E;ie++){const fe=t.get(ie);Y.iconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},Y.iconFeatureIndex=fe.featureIndex;break}for(let ie=P;ie<B;ie++){const fe=t.get(ie);Y.verticalIconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},Y.verticalIconFeatureIndex=fe.featureIndex;break}return Y}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,r){const l=t.placedSymbolArray.get(r),f=l.vertexStartIndex+4*l.numGlyphs;for(let _=l.vertexStartIndex;_<f;_+=4)t.indexArray.emplaceBack(_,_+1,_+2),t.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(t),l=Math.cos(t),f=[],_=[],b=[];for(let E=0;E<this.symbolInstances.length;++E){b.push(E);const P=this.symbolInstances.get(E);f.push(0|Math.round(r*P.anchorX+l*P.anchorY)),_.push(P.featureIndex)}return b.sort((E,P)=>f[E]-f[P]||_[P]-_[E]),b}addToSortKeyRanges(t,r){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===r?l.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const l=this.symbolInstances.get(r);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((f,_,b)=>{f>=0&&b.indexOf(f)===_&&this.addIndicesForPlacedSymbol(this.text,f)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let af,hd;sn("SymbolBucket",Sc,{omit:["layers","collisionBoxArray","features","compareText"]}),Sc.MAX_GLYPHS=65535,Sc.addDynamicAttributes=bc;var Ec={get paint(){return hd=hd||new y({"icon-opacity":new En(at.paint_symbol["icon-opacity"]),"icon-color":new En(at.paint_symbol["icon-color"]),"icon-halo-color":new En(at.paint_symbol["icon-halo-color"]),"icon-halo-width":new En(at.paint_symbol["icon-halo-width"]),"icon-halo-blur":new En(at.paint_symbol["icon-halo-blur"]),"icon-translate":new an(at.paint_symbol["icon-translate"]),"icon-translate-anchor":new an(at.paint_symbol["icon-translate-anchor"]),"text-opacity":new En(at.paint_symbol["text-opacity"]),"text-color":new En(at.paint_symbol["text-color"],{runtimeType:zn,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new En(at.paint_symbol["text-halo-color"]),"text-halo-width":new En(at.paint_symbol["text-halo-width"]),"text-halo-blur":new En(at.paint_symbol["text-halo-blur"]),"text-translate":new an(at.paint_symbol["text-translate"]),"text-translate-anchor":new an(at.paint_symbol["text-translate-anchor"])})},get layout(){return af=af||new y({"symbol-placement":new an(at.layout_symbol["symbol-placement"]),"symbol-spacing":new an(at.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new an(at.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new En(at.layout_symbol["symbol-sort-key"]),"symbol-z-order":new an(at.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new an(at.layout_symbol["icon-allow-overlap"]),"icon-overlap":new an(at.layout_symbol["icon-overlap"]),"icon-ignore-placement":new an(at.layout_symbol["icon-ignore-placement"]),"icon-optional":new an(at.layout_symbol["icon-optional"]),"icon-rotation-alignment":new an(at.layout_symbol["icon-rotation-alignment"]),"icon-size":new En(at.layout_symbol["icon-size"]),"icon-text-fit":new an(at.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new an(at.layout_symbol["icon-text-fit-padding"]),"icon-image":new En(at.layout_symbol["icon-image"]),"icon-rotate":new En(at.layout_symbol["icon-rotate"]),"icon-padding":new En(at.layout_symbol["icon-padding"]),"icon-keep-upright":new an(at.layout_symbol["icon-keep-upright"]),"icon-offset":new En(at.layout_symbol["icon-offset"]),"icon-anchor":new En(at.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new an(at.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new an(at.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new an(at.layout_symbol["text-rotation-alignment"]),"text-field":new En(at.layout_symbol["text-field"]),"text-font":new En(at.layout_symbol["text-font"]),"text-size":new En(at.layout_symbol["text-size"]),"text-max-width":new En(at.layout_symbol["text-max-width"]),"text-line-height":new an(at.layout_symbol["text-line-height"]),"text-letter-spacing":new En(at.layout_symbol["text-letter-spacing"]),"text-justify":new En(at.layout_symbol["text-justify"]),"text-radial-offset":new En(at.layout_symbol["text-radial-offset"]),"text-variable-anchor":new an(at.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new En(at.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new En(at.layout_symbol["text-anchor"]),"text-max-angle":new an(at.layout_symbol["text-max-angle"]),"text-writing-mode":new an(at.layout_symbol["text-writing-mode"]),"text-rotate":new En(at.layout_symbol["text-rotate"]),"text-padding":new an(at.layout_symbol["text-padding"]),"text-keep-upright":new an(at.layout_symbol["text-keep-upright"]),"text-transform":new En(at.layout_symbol["text-transform"]),"text-offset":new En(at.layout_symbol["text-offset"]),"text-allow-overlap":new an(at.layout_symbol["text-allow-overlap"]),"text-overlap":new an(at.layout_symbol["text-overlap"]),"text-ignore-placement":new an(at.layout_symbol["text-ignore-placement"]),"text-optional":new an(at.layout_symbol["text-optional"])})}};class dd{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ft,this.defaultValue=t}evaluate(t){if(t.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection))return r.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}sn("FormatSectionOverride",dd,{omit:["defaultValue"]});class Hu extends o{constructor(t){super(t,Ec)}recalculate(t,r){if(super.recalculate(t,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const f=[];for(const _ of l)f.indexOf(_)<0&&f.push(_);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,r,l,f){const _=this.layout.get(t).evaluate(r,{},l,f),b=this._unevaluatedLayout._values[t];return b.isDataDriven()||wt(b.value)||!_?_:function(E,P){return P.replace(/{([^{}]+)}/g,(B,Y)=>E&&Y in E?String(E[Y]):"")}(r.properties,_)}createBucket(t){return new Sc(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Ec.paint.overridableProperties){if(!Hu.hasPaintOverride(this.layout,t))continue;const r=this.paint.get(t),l=new dd(r),f=new We(l,r.property.specification);let _=null;_=r.value.kind==="constant"||r.value.kind==="source"?new Nt("source",f):new ln("composite",f,r.value.zoomStops),this.paint._values[t]=new ko(r.property,_,r.parameters)}}_handleOverridablePaintPropertyUpdate(t,r,l){return!(!this.layout||r.isDataDriven()||l.isDataDriven())&&Hu.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,r){const l=t.get("text-field"),f=Ec.paint.properties[r];let _=!1;const b=E=>{for(const P of E)if(f.overrides&&f.overrides.hasOverride(P))return void(_=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Jr)b(l.value.value.sections);else if(l.value.kind==="source"){const E=B=>{_||(B instanceof Eo&&fr(B.value)===Kr?b(B.value.sections):B instanceof oa?b(B.sections):B.eachChild(E))},P=l.value;P._styleExpression&&E(P._styleExpression.expression)}return _}}let lf;var qm={get paint(){return lf=lf||new y({"background-color":new an(at.paint_background["background-color"]),"background-pattern":new Ou(at.paint_background["background-pattern"]),"background-opacity":new an(at.paint_background["background-opacity"])})}};class fd extends o{constructor(t){super(t,qm)}}let kp;var Eh={get paint(){return kp=kp||new y({"raster-opacity":new an(at.paint_raster["raster-opacity"]),"raster-hue-rotate":new an(at.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new an(at.paint_raster["raster-brightness-min"]),"raster-brightness-max":new an(at.paint_raster["raster-brightness-max"]),"raster-saturation":new an(at.paint_raster["raster-saturation"]),"raster-contrast":new an(at.paint_raster["raster-contrast"]),"raster-resampling":new an(at.paint_raster["raster-resampling"]),"raster-fade-duration":new an(at.paint_raster["raster-fade-duration"])})}};class Xm extends o{constructor(t){super(t,Eh)}}class pd extends o{constructor(t){super(t,{}),this.onAdd=r=>{this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},this.onRemove=r=>{this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class i{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const s=63710088e-1;class m{constructor(t,r){if(isNaN(t)||isNaN(r))throw new Error(`Invalid LngLat object: (${t}, ${r})`);if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new m(ue(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const r=Math.PI/180,l=this.lat*r,f=t.lat*r,_=Math.sin(l)*Math.sin(f)+Math.cos(l)*Math.cos(f)*Math.cos((t.lng-this.lng)*r);return s*Math.acos(Math.min(_,1))}static convert(t){if(t instanceof m)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new m(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new m(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const S=2*Math.PI*s;function F(n){return S*Math.cos(n*Math.PI/180)}function Z(n){return(180+n)/360}function Se(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Xe(n,t){return n/F(t)}function ot(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}class bt{constructor(t,r,l=0){this.x=+t,this.y=+r,this.z=+l}static fromLngLat(t,r=0){const l=m.convert(t);return new bt(Z(l.lng),Se(l.lat),Xe(r,l.lat))}toLngLat(){return new m(360*this.x-180,ot(this.y))}toAltitude(){return this.z*F(ot(this.y))}meterInMercatorCoordinateUnits(){return 1/S*(t=ot(this.y),1/Math.cos(t*Math.PI/180));var t}}function jt(n,t,r){var l=2*Math.PI*6378137/256/Math.pow(2,r);return[n*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}class Ut{constructor(t,r,l){if(!function(f,_,b){return!(f<0||f>25||b<0||b>=Math.pow(2,f)||_<0||_>=Math.pow(2,f))}(t,r,l))throw new Error(`x=${r}, y=${l}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=r,this.y=l,this.key=mn(0,t,t,r,l)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,r,l){const f=(b=this.y,E=this.z,P=jt(256*(_=this.x),256*(b=Math.pow(2,E)-b-1),E),B=jt(256*(_+1),256*(b+1),E),P[0]+","+P[1]+","+B[0]+","+B[1]);var _,b,E,P,B;const Y=function(ie,fe,ge){let Ee,ke="";for(let Ge=ie;Ge>0;Ge--)Ee=1<<Ge-1,ke+=(fe&Ee?1:0)+(ge&Ee?2:0);return ke}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,Y).replace(/{bbox-epsg-3857}/g,f)}isChildOf(t){const r=this.z-t.z;return r>0&&t.x===this.x>>r&&t.y===this.y>>r}getTilePoint(t){const r=Math.pow(2,this.z);return new C((t.x*r-this.x)*ai,(t.y*r-this.y)*ai)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ft{constructor(t,r){this.wrap=t,this.canonical=r,this.key=mn(t,r.z,r.z,r.x,r.y)}}class nn{constructor(t,r,l,f,_){if(t<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${l}`);this.overscaledZ=t,this.wrap=r,this.canonical=new Ut(l,+f,+_),this.key=mn(r,t,l,f,_)}clone(){return new nn(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-t;return t>this.canonical.z?new nn(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new nn(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(t,r){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-t;return t>this.canonical.z?mn(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y):mn(this.wrap*+r,t,t,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const r=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r}children(t){if(this.overscaledZ>=t)return[new nn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,l=2*this.canonical.x,f=2*this.canonical.y;return[new nn(r,this.wrap,r,l,f),new nn(r,this.wrap,r,l+1,f),new nn(r,this.wrap,r,l,f+1),new nn(r,this.wrap,r,l+1,f+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new nn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new nn(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ft(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new bt(t.x-this.wrap,t.y))}}function mn(n,t,r,l,f){(n*=2)<0&&(n=-1*n-1);const _=1<<r;return(_*_*n+_*f+l).toString(36)+r.toString(36)+t.toString(36)}sn("CanonicalTileID",Ut),sn("OverscaledTileID",nn,{omit:["posMatrix"]});class bn{constructor(t,r,l,f=1,_=1,b=1,E=0){if(this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void W(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const P=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=_,this.blueFactor=b,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let B=0;B<P;B++)this.data[this._idx(-1,B)]=this.data[this._idx(0,B)],this.data[this._idx(P,B)]=this.data[this._idx(P-1,B)],this.data[this._idx(B,-1)]=this.data[this._idx(B,0)],this.data[this._idx(B,P)]=this.data[this._idx(B,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let B=0;B<P;B++)for(let Y=0;Y<P;Y++){const ie=this.get(B,Y);ie>this.max&&(this.max=ie),ie<this.min&&(this.min=ie)}}get(t,r){const l=new Uint8Array(this.data.buffer),f=4*this._idx(t,r);return this.unpack(l[f],l[f+1],l[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(t+1)}unpack(t,r,l){return t*this.redFactor+r*this.greenFactor+l*this.blueFactor-this.baseShift}getPixels(){return new Gi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,r,l){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let f=r*this.dim,_=r*this.dim+this.dim,b=l*this.dim,E=l*this.dim+this.dim;switch(r){case-1:f=_-1;break;case 1:_=f+1}switch(l){case-1:b=E-1;break;case 1:E=b+1}const P=-r*this.dim,B=-l*this.dim;for(let Y=b;Y<E;Y++)for(let ie=f;ie<_;ie++)this.data[this._idx(ie,Y)]=t.data[this._idx(ie+P,Y+B)]}}sn("DEMData",bn);class fi{constructor(t){this._stringToNumber={},this._numberToString=[];for(let r=0;r<t.length;r++){const l=t[r];this._stringToNumber[l]=r,this._numberToString[r]=l}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class vt{constructor(t,r,l,f,_){this.type="Feature",this._vectorTileFeature=t,t._z=r,t._x=l,t._y=f,this.properties=t.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(t[r]=this[r]);return t}}class lt{constructor(t,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new $l(ai,16,0),this.grid3D=new $l(ai,16,0),this.featureIndexArray=new zr,this.promoteId=r}insert(t,r,l,f,_,b){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,f,_);const P=b?this.grid3D:this.grid;for(let B=0;B<r.length;B++){const Y=r[B],ie=[1/0,1/0,-1/0,-1/0];for(let fe=0;fe<Y.length;fe++){const ge=Y[fe];ie[0]=Math.min(ie[0],ge.x),ie[1]=Math.min(ie[1],ge.y),ie[2]=Math.max(ie[2],ge.x),ie[3]=Math.max(ie[3],ge.y)}ie[0]<ai&&ie[1]<ai&&ie[2]>=0&&ie[3]>=0&&P.insert(E,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new eu.VectorTile(new ml(this.rawTileData)).layers,this.sourceLayerCoder=new fi(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,r,l,f){this.loadVTLayers();const _=t.params||{},b=ai/t.tileSize/t.scale,E=Nr(_.filter),P=t.queryGeometry,B=t.queryPadding*b,Y=qt(P),ie=this.grid.query(Y.minX-B,Y.minY-B,Y.maxX+B,Y.maxY+B),fe=qt(t.cameraQueryGeometry),ge=this.grid3D.query(fe.minX-B,fe.minY-B,fe.maxX+B,fe.maxY+B,(Ge,Ye,dt,it)=>function(ht,St,Rt,on,An){for(const Qt of ht)if(St<=Qt.x&&Rt<=Qt.y&&on>=Qt.x&&An>=Qt.y)return!0;const rn=[new C(St,Rt),new C(St,An),new C(on,An),new C(on,Rt)];if(ht.length>2){for(const Qt of rn)if(ju(ht,Qt))return!0}for(let Qt=0;Qt<ht.length-1;Qt++)if(Xf(ht[Qt],ht[Qt+1],rn))return!0;return!1}(t.cameraQueryGeometry,Ge-B,Ye-B,dt+B,it+B));for(const Ge of ge)ie.push(Ge);ie.sort(In);const Ee={};let ke;for(let Ge=0;Ge<ie.length;Ge++){const Ye=ie[Ge];if(Ye===ke)continue;ke=Ye;const dt=this.featureIndexArray.get(Ye);let it=null;this.loadMatchingFeature(Ee,dt.bucketIndex,dt.sourceLayerIndex,dt.featureIndex,E,_.layers,_.availableImages,r,l,f,(ht,St,Rt)=>(it||(it=Yl(ht)),St.queryIntersectsFeature(P,ht,Rt,it,this.z,t.transform,b,t.pixelPosMatrix)))}return Ee}loadMatchingFeature(t,r,l,f,_,b,E,P,B,Y,ie){const fe=this.bucketLayerIDs[r];if(b&&!function(Ge,Ye){for(let dt=0;dt<Ge.length;dt++)if(Ye.indexOf(Ge[dt])>=0)return!0;return!1}(b,fe))return;const ge=this.sourceLayerCoder.decode(l),Ee=this.vtLayers[ge].feature(f);if(_.needGeometry){const Ge=Jl(Ee,!0);if(!_.filter(new tr(this.tileID.overscaledZ),Ge,this.tileID.canonical))return}else if(!_.filter(new tr(this.tileID.overscaledZ),Ee))return;const ke=this.getId(Ee,ge);for(let Ge=0;Ge<fe.length;Ge++){const Ye=fe[Ge];if(b&&b.indexOf(Ye)<0)continue;const dt=P[Ye];if(!dt)continue;let it={};ke&&Y&&(it=Y.getState(dt.sourceLayer||"_geojsonTileLayer",ke));const ht=M({},B[Ye]);ht.paint=xt(ht.paint,dt.paint,Ee,it,E),ht.layout=xt(ht.layout,dt.layout,Ee,it,E);const St=!ie||ie(Ee,dt,it);if(!St)continue;const Rt=new vt(Ee,this.z,this.x,this.y,ke);Rt.layer=ht;let on=t[Ye];on===void 0&&(on=t[Ye]=[]),on.push({featureIndex:f,feature:Rt,intersectionZ:St})}}lookupSymbolFeatures(t,r,l,f,_,b,E,P){const B={};this.loadVTLayers();const Y=Nr(_);for(const ie of t)this.loadMatchingFeature(B,l,f,ie,Y,b,E,P,r);return B}hasLayer(t){for(const r of this.bucketLayerIDs)for(const l of r)if(t===l)return!0;return!1}getId(t,r){let l=t.id;return this.promoteId&&(l=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof l=="boolean"&&(l=Number(l))),l}}function xt(n,t,r,l,f){return U(n,(_,b)=>{const E=t instanceof Zl?t.get(b):null;return E&&E.evaluate?E.evaluate(r,l,f):E})}function qt(n){let t=1/0,r=1/0,l=-1/0,f=-1/0;for(const _ of n)t=Math.min(t,_.x),r=Math.min(r,_.y),l=Math.max(l,_.x),f=Math.max(f,_.y);return{minX:t,minY:r,maxX:l,maxY:f}}function In(n,t){return t-n}function Dn(n,t,r,l,f){const _=[];for(let b=0;b<n.length;b++){const E=n[b];let P;for(let B=0;B<E.length-1;B++){let Y=E[B],ie=E[B+1];Y.x<t&&ie.x<t||(Y.x<t?Y=new C(t,Y.y+(t-Y.x)/(ie.x-Y.x)*(ie.y-Y.y))._round():ie.x<t&&(ie=new C(t,Y.y+(t-Y.x)/(ie.x-Y.x)*(ie.y-Y.y))._round()),Y.y<r&&ie.y<r||(Y.y<r?Y=new C(Y.x+(r-Y.y)/(ie.y-Y.y)*(ie.x-Y.x),r)._round():ie.y<r&&(ie=new C(Y.x+(r-Y.y)/(ie.y-Y.y)*(ie.x-Y.x),r)._round()),Y.x>=l&&ie.x>=l||(Y.x>=l?Y=new C(l,Y.y+(l-Y.x)/(ie.x-Y.x)*(ie.y-Y.y))._round():ie.x>=l&&(ie=new C(l,Y.y+(l-Y.x)/(ie.x-Y.x)*(ie.y-Y.y))._round()),Y.y>=f&&ie.y>=f||(Y.y>=f?Y=new C(Y.x+(f-Y.y)/(ie.y-Y.y)*(ie.x-Y.x),f)._round():ie.y>=f&&(ie=new C(Y.x+(f-Y.y)/(ie.y-Y.y)*(ie.x-Y.x),f)._round()),P&&Y.equals(P[P.length-1])||(P=[Y],_.push(P)),P.push(ie)))))}}return _}sn("FeatureIndex",lt,{omit:["rawTileData","sourceLayerCoder"]});class Cn extends C{constructor(t,r,l,f){super(t,r),this.angle=l,f!==void 0&&(this.segment=f)}clone(){return new Cn(this.x,this.y,this.angle,this.segment)}}function Hn(n,t,r,l,f){if(t.segment===void 0||r===0)return!0;let _=t,b=t.segment+1,E=0;for(;E>-r/2;){if(b--,b<0)return!1;E-=n[b].dist(_),_=n[b]}E+=n[b].dist(n[b+1]),b++;const P=[];let B=0;for(;E<r/2;){const Y=n[b],ie=n[b+1];if(!ie)return!1;let fe=n[b-1].angleTo(Y)-Y.angleTo(ie);for(fe=Math.abs((fe+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:E,angleDelta:fe}),B+=fe;E-P[0].distance>l;)B-=P.shift().angleDelta;if(B>f)return!1;b++,E+=Y.dist(ie)}return!0}function Ni(n){let t=0;for(let r=0;r<n.length-1;r++)t+=n[r].dist(n[r+1]);return t}function yr(n,t,r){return n?.6*t*r:0}function yl(n,t){return Math.max(n?n.right-n.left:0,t?t.right-t.left:0)}function Km(n,t,r,l,f,_){const b=yr(r,f,_),E=yl(r,l)*_;let P=0;const B=Ni(n)/2;for(let Y=0;Y<n.length-1;Y++){const ie=n[Y],fe=n[Y+1],ge=ie.dist(fe);if(P+ge>B){const Ee=(B-P)/ge,ke=Hr.number(ie.x,fe.x,Ee),Ge=Hr.number(ie.y,fe.y,Ee),Ye=new Cn(ke,Ge,fe.angleTo(ie),Y);return Ye._round(),!b||Hn(n,Ye,E,b,t)?Ye:void 0}P+=ge}}function Iw(n,t,r,l,f,_,b,E,P){const B=yr(l,_,b),Y=yl(l,f),ie=Y*b,fe=n[0].x===0||n[0].x===P||n[0].y===0||n[0].y===P;return t-ie<t/4&&(t=ie+t/4),K0(n,fe?t/2*E%t:(Y/2+2*_)*b*E%t,t,B,r,ie,fe,!1,P)}function K0(n,t,r,l,f,_,b,E,P){const B=_/2,Y=Ni(n);let ie=0,fe=t-r,ge=[];for(let Ee=0;Ee<n.length-1;Ee++){const ke=n[Ee],Ge=n[Ee+1],Ye=ke.dist(Ge),dt=Ge.angleTo(ke);for(;fe+r<ie+Ye;){fe+=r;const it=(fe-ie)/Ye,ht=Hr.number(ke.x,Ge.x,it),St=Hr.number(ke.y,Ge.y,it);if(ht>=0&&ht<P&&St>=0&&St<P&&fe-B>=0&&fe+B<=Y){const Rt=new Cn(ht,St,dt,Ee);Rt._round(),l&&!Hn(n,Rt,_,l,f)||ge.push(Rt)}}ie+=Ye}return E||ge.length||b||(ge=K0(n,ie/2,r,l,f,_,b,!0,P)),ge}sn("Anchor",Cn);const md=Do;function Y0(n,t,r,l){const f=[],_=n.image,b=_.pixelRatio,E=_.paddedRect.w-2*md,P=_.paddedRect.h-2*md;let B={x1:n.left,y1:n.top,x2:n.right,y2:n.bottom};const Y=_.stretchX||[[0,E]],ie=_.stretchY||[[0,P]],fe=(Pt,xn)=>Pt+xn[1]-xn[0],ge=Y.reduce(fe,0),Ee=ie.reduce(fe,0),ke=E-ge,Ge=P-Ee;let Ye=0,dt=ge,it=0,ht=Ee,St=0,Rt=ke,on=0,An=Ge;if(_.content&&l){const Pt=_.content,xn=Pt[2]-Pt[0],gn=Pt[3]-Pt[1];(_.textFitWidth||_.textFitHeight)&&(B=xh(n)),Ye=zp(Y,0,Pt[0]),it=zp(ie,0,Pt[1]),dt=zp(Y,Pt[0],Pt[2]),ht=zp(ie,Pt[1],Pt[3]),St=Pt[0]-Ye,on=Pt[1]-it,Rt=xn-dt,An=gn-ht}const rn=B.x1,Qt=B.y1,yn=B.x2-rn,fn=B.y2-Qt,un=(Pt,xn,gn,Bn)=>{const Rr=Rp(Pt.stretch-Ye,dt,yn,rn),Mr=Fp(Pt.fixed-St,Rt,Pt.stretch,ge),Hi=Rp(xn.stretch-it,ht,fn,Qt),Xa=Fp(xn.fixed-on,An,xn.stretch,Ee),xo=Rp(gn.stretch-Ye,dt,yn,rn),Zi=Fp(gn.fixed-St,Rt,gn.stretch,ge),ts=Rp(Bn.stretch-it,ht,fn,Qt),ns=Fp(Bn.fixed-on,An,Bn.stretch,Ee),rs=new C(Rr,Hi),pi=new C(xo,Hi),Wi=new C(xo,ts),Bo=new C(Rr,ts),wo=new C(Mr/b,Xa/b),is=new C(Zi/b,ns/b),bo=t*Math.PI/180;if(bo){const gr=Math.sin(bo),Lr=Math.cos(bo),$r=[Lr,-gr,gr,Lr];rs._matMult($r),pi._matMult($r),Bo._matMult($r),Wi._matMult($r)}const Ea=Pt.stretch+Pt.fixed,Ms=xn.stretch+xn.fixed;return{tl:rs,tr:pi,bl:Bo,br:Wi,tex:{x:_.paddedRect.x+md+Ea,y:_.paddedRect.y+md+Ms,w:gn.stretch+gn.fixed-Ea,h:Bn.stretch+Bn.fixed-Ms},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:wo,pixelOffsetBR:is,minFontScaleX:Rt/b/yn,minFontScaleY:An/b/fn,isSDF:r}};if(l&&(_.stretchX||_.stretchY)){const Pt=J0(Y,ke,ge),xn=J0(ie,Ge,Ee);for(let gn=0;gn<Pt.length-1;gn++){const Bn=Pt[gn],Rr=Pt[gn+1];for(let Mr=0;Mr<xn.length-1;Mr++)f.push(un(Bn,xn[Mr],Rr,xn[Mr+1]))}}else f.push(un({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:P+1}));return f}function zp(n,t,r){let l=0;for(const f of n)l+=Math.max(t,Math.min(r,f[1]))-Math.max(t,Math.min(r,f[0]));return l}function J0(n,t,r){const l=[{fixed:-md,stretch:0}];for(const[f,_]of n){const b=l[l.length-1];l.push({fixed:f-b.stretch,stretch:b.stretch}),l.push({fixed:f-b.stretch,stretch:b.stretch+(_-f)})}return l.push({fixed:t+md,stretch:r}),l}function Rp(n,t,r,l){return n/t*r+l}function Fp(n,t,r,l){return n-t*r/l}class Op{constructor(t,r,l,f,_,b,E,P,B,Y){var ie;if(this.boxStartIndex=t.length,B){let fe=b.top,ge=b.bottom;const Ee=b.collisionPadding;Ee&&(fe-=Ee[1],ge+=Ee[3]);let ke=ge-fe;ke>0&&(ke=Math.max(10,ke),this.circleDiameter=ke)}else{const fe=!((ie=b.image)===null||ie===void 0)&&ie.content&&(b.image.textFitWidth||b.image.textFitHeight)?xh(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};fe.y1=fe.y1*E-P[0],fe.y2=fe.y2*E+P[2],fe.x1=fe.x1*E-P[3],fe.x2=fe.x2*E+P[1];const ge=b.collisionPadding;if(ge&&(fe.x1-=ge[0]*E,fe.y1-=ge[1]*E,fe.x2+=ge[2]*E,fe.y2+=ge[3]*E),Y){const Ee=new C(fe.x1,fe.y1),ke=new C(fe.x2,fe.y1),Ge=new C(fe.x1,fe.y2),Ye=new C(fe.x2,fe.y2),dt=Y*Math.PI/180;Ee._rotate(dt),ke._rotate(dt),Ge._rotate(dt),Ye._rotate(dt),fe.x1=Math.min(Ee.x,ke.x,Ge.x,Ye.x),fe.x2=Math.max(Ee.x,ke.x,Ge.x,Ye.x),fe.y1=Math.min(Ee.y,ke.y,Ge.y,Ye.y),fe.y2=Math.max(Ee.y,ke.y,Ge.y,Ye.y)}t.emplaceBack(r.x,r.y,fe.x1,fe.y1,fe.x2,fe.y2,l,f,_)}this.boxEndIndex=t.length}}class Cw{constructor(t=[],r=(l,f)=>l<f?-1:l>f?1:0){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:l}=this,f=r[t];for(;t>0;){const _=t-1>>1,b=r[_];if(l(f,b)>=0)break;r[t]=b,t=_}r[t]=f}_down(t){const{data:r,compare:l}=this,f=this.length>>1,_=r[t];for(;t<f;){let b=1+(t<<1);const E=b+1;if(E<this.length&&l(r[E],r[b])<0&&(b=E),l(r[b],_)>=0)break;r[t]=r[b],t=b}r[t]=_}}function Pw(n,t=1,r=!1){let l=1/0,f=1/0,_=-1/0,b=-1/0;const E=n[0];for(let ge=0;ge<E.length;ge++){const Ee=E[ge];(!ge||Ee.x<l)&&(l=Ee.x),(!ge||Ee.y<f)&&(f=Ee.y),(!ge||Ee.x>_)&&(_=Ee.x),(!ge||Ee.y>b)&&(b=Ee.y)}const P=Math.min(_-l,b-f);let B=P/2;const Y=new Cw([],Aw);if(P===0)return new C(l,f);for(let ge=l;ge<_;ge+=P)for(let Ee=f;Ee<b;Ee+=P)Y.push(new gd(ge+B,Ee+B,B,n));let ie=function(ge){let Ee=0,ke=0,Ge=0;const Ye=ge[0];for(let dt=0,it=Ye.length,ht=it-1;dt<it;ht=dt++){const St=Ye[dt],Rt=Ye[ht],on=St.x*Rt.y-Rt.x*St.y;ke+=(St.x+Rt.x)*on,Ge+=(St.y+Rt.y)*on,Ee+=3*on}return new gd(ke/Ee,Ge/Ee,0,ge)}(n),fe=Y.length;for(;Y.length;){const ge=Y.pop();(ge.d>ie.d||!ie.d)&&(ie=ge,r&&console.log("found best %d after %d probes",Math.round(1e4*ge.d)/1e4,fe)),ge.max-ie.d<=t||(B=ge.h/2,Y.push(new gd(ge.p.x-B,ge.p.y-B,B,n)),Y.push(new gd(ge.p.x+B,ge.p.y-B,B,n)),Y.push(new gd(ge.p.x-B,ge.p.y+B,B,n)),Y.push(new gd(ge.p.x+B,ge.p.y+B,B,n)),fe+=4)}return r&&(console.log(`num probes: ${fe}`),console.log(`best distance: ${ie.d}`)),ie.p}function Aw(n,t){return t.max-n.max}function gd(n,t,r,l){this.p=new C(n,t),this.h=r,this.d=function(f,_){let b=!1,E=1/0;for(let P=0;P<_.length;P++){const B=_[P];for(let Y=0,ie=B.length,fe=ie-1;Y<ie;fe=Y++){const ge=B[Y],Ee=B[fe];ge.y>f.y!=Ee.y>f.y&&f.x<(Ee.x-ge.x)*(f.y-ge.y)/(Ee.y-ge.y)+ge.x&&(b=!b),E=Math.min(E,Ud(f,ge,Ee))}}return(b?1:-1)*Math.sqrt(E)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}var _o;w.aq=void 0,(_o=w.aq||(w.aq={}))[_o.center=1]="center",_o[_o.left=2]="left",_o[_o.right=3]="right",_o[_o.top=4]="top",_o[_o.bottom=5]="bottom",_o[_o["top-left"]=6]="top-left",_o[_o["top-right"]=7]="top-right",_o[_o["bottom-left"]=8]="bottom-left",_o[_o["bottom-right"]=9]="bottom-right";const Tc=7,Ym=Number.POSITIVE_INFINITY;function Q0(n,t){return t[1]!==Ym?function(r,l,f){let _=0,b=0;switch(l=Math.abs(l),f=Math.abs(f),r){case"top-right":case"top-left":case"top":b=f-Tc;break;case"bottom-right":case"bottom-left":case"bottom":b=-f+Tc}switch(r){case"top-right":case"bottom-right":case"right":_=-l;break;case"top-left":case"bottom-left":case"left":_=l}return[_,b]}(n,t[0],t[1]):function(r,l){let f=0,_=0;l<0&&(l=0);const b=l/Math.SQRT2;switch(r){case"top-right":case"top-left":_=b-Tc;break;case"bottom-right":case"bottom-left":_=-b+Tc;break;case"bottom":_=-l+Tc;break;case"top":_=l-Tc}switch(r){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=l;break;case"right":f=-l}return[f,_]}(n,t[0])}function ev(n,t,r){var l;const f=n.layout,_=(l=f.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(t,{},r);if(_){const E=_.values,P=[];for(let B=0;B<E.length;B+=2){const Y=P[B]=E[B],ie=E[B+1].map(fe=>fe*Vr);Y.startsWith("top")?ie[1]-=Tc:Y.startsWith("bottom")&&(ie[1]+=Tc),P[B+1]=ie}return new qi(P)}const b=f.get("text-variable-anchor");if(b){let E;E=n._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(t,{},r)*Vr,Ym]:f.get("text-offset").evaluate(t,{},r).map(B=>B*Vr);const P=[];for(const B of b)P.push(B,Q0(B,E));return new qi(P)}return null}function Jm(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Mw(n,t,r,l,f,_,b,E,P,B,Y){let ie=_.textMaxSize.evaluate(t,{});ie===void 0&&(ie=b);const fe=n.layers[0].layout,ge=fe.get("icon-offset").evaluate(t,{},Y),Ee=nv(r.horizontal),ke=b/24,Ge=n.tilePixelRatio*ke,Ye=n.tilePixelRatio*ie/24,dt=n.tilePixelRatio*E,it=n.tilePixelRatio*fe.get("symbol-spacing"),ht=fe.get("text-padding")*n.tilePixelRatio,St=function(Pt,xn,gn,Bn=1){const Rr=Pt.get("icon-padding").evaluate(xn,{},gn),Mr=Rr&&Rr.values;return[Mr[0]*Bn,Mr[1]*Bn,Mr[2]*Bn,Mr[3]*Bn]}(fe,t,Y,n.tilePixelRatio),Rt=fe.get("text-max-angle")/180*Math.PI,on=fe.get("text-rotation-alignment")!=="viewport"&&fe.get("symbol-placement")!=="point",An=fe.get("icon-rotation-alignment")==="map"&&fe.get("symbol-placement")!=="point",rn=fe.get("symbol-placement"),Qt=it/2,yn=fe.get("icon-text-fit");let fn;l&&yn!=="none"&&(n.allowVerticalPlacement&&r.vertical&&(fn=su(l,r.vertical,yn,fe.get("icon-text-fit-padding"),ge,ke)),Ee&&(l=su(l,Ee,yn,fe.get("icon-text-fit-padding"),ge,ke)));const un=(Pt,xn)=>{xn.x<0||xn.x>=ai||xn.y<0||xn.y>=ai||function(gn,Bn,Rr,Mr,Hi,Xa,xo,Zi,ts,ns,rs,pi,Wi,Bo,wo,is,bo,Ea,Ms,gr,Lr,$r,Ys,li,yd){const lu=gn.addToLineVertexArray(Bn,Rr);let uu,Ka,Ta,ro,Zu=0,hf=0,sv=0,av=0,sg=-1,ag=-1;const Wu={};let lv=ql("");if(gn.allowVerticalPlacement&&Mr.vertical){const No=Zi.layout.get("text-rotate").evaluate(Lr,{},li)+90;Ta=new Op(ts,Bn,ns,rs,pi,Mr.vertical,Wi,Bo,wo,No),xo&&(ro=new Op(ts,Bn,ns,rs,pi,xo,bo,Ea,wo,No))}if(Hi){const No=Zi.layout.get("icon-rotate").evaluate(Lr,{}),Ia=Zi.layout.get("icon-text-fit")!=="none",Th=Y0(Hi,No,Ys,Ia),_l=xo?Y0(xo,No,Ys,Ia):void 0;Ka=new Op(ts,Bn,ns,rs,pi,Hi,bo,Ea,!1,No),Zu=4*Th.length;const Ih=gn.iconSizeData;let cu=null;Ih.kind==="source"?(cu=[Ks*Zi.layout.get("icon-size").evaluate(Lr,{})],cu[0]>qa&&W(`${gn.layerIds[0]}: Value for "icon-size" is >= ${au}. Reduce your "icon-size".`)):Ih.kind==="composite"&&(cu=[Ks*$r.compositeIconSizes[0].evaluate(Lr,{},li),Ks*$r.compositeIconSizes[1].evaluate(Lr,{},li)],(cu[0]>qa||cu[1]>qa)&&W(`${gn.layerIds[0]}: Value for "icon-size" is >= ${au}. Reduce your "icon-size".`)),gn.addSymbols(gn.icon,Th,cu,gr,Ms,Lr,w.ah.none,Bn,lu.lineStartIndex,lu.lineLength,-1,li),sg=gn.icon.placedSymbolArray.length-1,_l&&(hf=4*_l.length,gn.addSymbols(gn.icon,_l,cu,gr,Ms,Lr,w.ah.vertical,Bn,lu.lineStartIndex,lu.lineLength,-1,li),ag=gn.icon.placedSymbolArray.length-1)}const uv=Object.keys(Mr.horizontal);for(const No of uv){const Ia=Mr.horizontal[No];if(!uu){lv=ql(Ia.text);const _l=Zi.layout.get("text-rotate").evaluate(Lr,{},li);uu=new Op(ts,Bn,ns,rs,pi,Ia,Wi,Bo,wo,_l)}const Th=Ia.positionedLines.length===1;if(sv+=tv(gn,Bn,Ia,Xa,Zi,wo,Lr,is,lu,Mr.vertical?w.ah.horizontal:w.ah.horizontalOnly,Th?uv:[No],Wu,sg,$r,li),Th)break}Mr.vertical&&(av+=tv(gn,Bn,Mr.vertical,Xa,Zi,wo,Lr,is,lu,w.ah.vertical,["vertical"],Wu,ag,$r,li));const Rw=uu?uu.boxStartIndex:gn.collisionBoxArray.length,Fw=uu?uu.boxEndIndex:gn.collisionBoxArray.length,Ow=Ta?Ta.boxStartIndex:gn.collisionBoxArray.length,jw=Ta?Ta.boxEndIndex:gn.collisionBoxArray.length,Lw=Ka?Ka.boxStartIndex:gn.collisionBoxArray.length,Dw=Ka?Ka.boxEndIndex:gn.collisionBoxArray.length,Bw=ro?ro.boxStartIndex:gn.collisionBoxArray.length,Nw=ro?ro.boxEndIndex:gn.collisionBoxArray.length;let vl=-1;const Lp=(No,Ia)=>No&&No.circleDiameter?Math.max(No.circleDiameter,Ia):Ia;vl=Lp(uu,vl),vl=Lp(Ta,vl),vl=Lp(Ka,vl),vl=Lp(ro,vl);const cv=vl>-1?1:0;cv&&(vl*=yd/Vr),gn.glyphOffsetArray.length>=Sc.MAX_GLYPHS&&W("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Lr.sortKey!==void 0&&gn.addToSortKeyRanges(gn.symbolInstances.length,Lr.sortKey);const Uw=ev(Zi,Lr,li),[Vw,$w]=function(No,Ia){const Th=No.length,_l=Ia==null?void 0:Ia.values;if((_l==null?void 0:_l.length)>0)for(let Ih=0;Ih<_l.length;Ih+=2){const cu=_l[Ih+1];No.emplaceBack(w.aq[_l[Ih]],cu[0],cu[1])}return[Th,No.length]}(gn.textAnchorOffsets,Uw);gn.symbolInstances.emplaceBack(Bn.x,Bn.y,Wu.right>=0?Wu.right:-1,Wu.center>=0?Wu.center:-1,Wu.left>=0?Wu.left:-1,Wu.vertical||-1,sg,ag,lv,Rw,Fw,Ow,jw,Lw,Dw,Bw,Nw,ns,sv,av,Zu,hf,cv,0,Wi,vl,Vw,$w)}(n,xn,Pt,r,l,f,fn,n.layers[0],n.collisionBoxArray,t.index,t.sourceLayerIndex,n.index,Ge,[ht,ht,ht,ht],on,P,dt,St,An,ge,t,_,B,Y,b)};if(rn==="line")for(const Pt of Dn(t.geometry,0,0,ai,ai)){const xn=Iw(Pt,it,Rt,r.vertical||Ee,l,24,Ye,n.overscaling,ai);for(const gn of xn)Ee&&kw(n,Ee.text,Qt,gn)||un(Pt,gn)}else if(rn==="line-center"){for(const Pt of t.geometry)if(Pt.length>1){const xn=Km(Pt,Rt,r.vertical||Ee,l,24,Ye);xn&&un(Pt,xn)}}else if(t.type==="Polygon")for(const Pt of fs(t.geometry,0)){const xn=Pw(Pt,16);un(Pt[0],new Cn(xn.x,xn.y,0))}else if(t.type==="LineString")for(const Pt of t.geometry)un(Pt,new Cn(Pt[0].x,Pt[0].y,0));else if(t.type==="Point")for(const Pt of t.geometry)for(const xn of Pt)un([xn],new Cn(xn.x,xn.y,0))}function tv(n,t,r,l,f,_,b,E,P,B,Y,ie,fe,ge,Ee){const ke=function(dt,it,ht,St,Rt,on,An,rn){const Qt=St.layout.get("text-rotate").evaluate(on,{})*Math.PI/180,yn=[];for(const fn of it.positionedLines)for(const un of fn.positionedGlyphs){if(!un.rect)continue;const Pt=un.rect||{};let xn=ld+1,gn=!0,Bn=1,Rr=0;const Mr=(Rt||rn)&&un.vertical,Hi=un.metrics.advance*un.scale/2;if(rn&&it.verticalizable&&(Rr=fn.lineOffset/2-(un.imageName?-(Vr-un.metrics.width*un.scale)/2:(un.scale-1)*Vr)),un.imageName){const gr=An[un.imageName];gn=gr.sdf,Bn=gr.pixelRatio,xn=Do/Bn}const Xa=Rt?[un.x+Hi,un.y]:[0,0];let xo=Rt?[0,0]:[un.x+Hi+ht[0],un.y+ht[1]-Rr],Zi=[0,0];Mr&&(Zi=xo,xo=[0,0]);const ts=un.metrics.isDoubleResolution?2:1,ns=(un.metrics.left-xn)*un.scale-Hi+xo[0],rs=(-un.metrics.top-xn)*un.scale+xo[1],pi=ns+Pt.w/ts*un.scale/Bn,Wi=rs+Pt.h/ts*un.scale/Bn,Bo=new C(ns,rs),wo=new C(pi,rs),is=new C(ns,Wi),bo=new C(pi,Wi);if(Mr){const gr=new C(-Hi,Hi-ba),Lr=-Math.PI/2,$r=Vr/2-Hi,Ys=new C(5-ba-$r,-(un.imageName?$r:0)),li=new C(...Zi);Bo._rotateAround(Lr,gr)._add(Ys)._add(li),wo._rotateAround(Lr,gr)._add(Ys)._add(li),is._rotateAround(Lr,gr)._add(Ys)._add(li),bo._rotateAround(Lr,gr)._add(Ys)._add(li)}if(Qt){const gr=Math.sin(Qt),Lr=Math.cos(Qt),$r=[Lr,-gr,gr,Lr];Bo._matMult($r),wo._matMult($r),is._matMult($r),bo._matMult($r)}const Ea=new C(0,0),Ms=new C(0,0);yn.push({tl:Bo,tr:wo,bl:is,br:bo,tex:Pt,writingMode:it.writingMode,glyphOffset:Xa,sectionIndex:un.sectionIndex,isSDF:gn,pixelOffsetTL:Ea,pixelOffsetBR:Ms,minFontScaleX:0,minFontScaleY:0})}return yn}(0,r,E,f,_,b,l,n.allowVerticalPlacement),Ge=n.textSizeData;let Ye=null;Ge.kind==="source"?(Ye=[Ks*f.layout.get("text-size").evaluate(b,{})],Ye[0]>qa&&W(`${n.layerIds[0]}: Value for "text-size" is >= ${au}. Reduce your "text-size".`)):Ge.kind==="composite"&&(Ye=[Ks*ge.compositeTextSizes[0].evaluate(b,{},Ee),Ks*ge.compositeTextSizes[1].evaluate(b,{},Ee)],(Ye[0]>qa||Ye[1]>qa)&&W(`${n.layerIds[0]}: Value for "text-size" is >= ${au}. Reduce your "text-size".`)),n.addSymbols(n.text,ke,Ye,E,_,b,B,t,P.lineStartIndex,P.lineLength,fe,Ee);for(const dt of Y)ie[dt]=n.text.placedSymbolArray.length-1;return 4*ke.length}function nv(n){for(const t in n)return n[t];return null}function kw(n,t,r,l){const f=n.compareText;if(t in f){const _=f[t];for(let b=_.length-1;b>=0;b--)if(l.dist(_[b])<r)return!0}else f[t]=[];return f[t].push(l),!1}const rv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Qm{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,l]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=l>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const _=rv[15&l];if(!_)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(t,2,1),[E]=new Uint32Array(t,4,1);return new Qm(E,b,_,t)}constructor(t,r=64,l=Float64Array,f){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=l,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const _=rv.indexOf(this.ArrayType),b=2*t*this.ArrayType.BYTES_PER_ELEMENT,E=t*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-E%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${l}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+E+P,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+b+E+P),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+E+P,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=t,this.coords[this._pos++]=r,l}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return eg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:b,nodeSize:E}=this,P=[0,_.length-1,0],B=[];for(;P.length;){const Y=P.pop()||0,ie=P.pop()||0,fe=P.pop()||0;if(ie-fe<=E){for(let Ge=fe;Ge<=ie;Ge++){const Ye=b[2*Ge],dt=b[2*Ge+1];Ye>=t&&Ye<=l&&dt>=r&&dt<=f&&B.push(_[Ge])}continue}const ge=fe+ie>>1,Ee=b[2*ge],ke=b[2*ge+1];Ee>=t&&Ee<=l&&ke>=r&&ke<=f&&B.push(_[ge]),(Y===0?t<=Ee:r<=ke)&&(P.push(fe),P.push(ge-1),P.push(1-Y)),(Y===0?l>=Ee:f>=ke)&&(P.push(ge+1),P.push(ie),P.push(1-Y))}return B}within(t,r,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:_,nodeSize:b}=this,E=[0,f.length-1,0],P=[],B=l*l;for(;E.length;){const Y=E.pop()||0,ie=E.pop()||0,fe=E.pop()||0;if(ie-fe<=b){for(let Ge=fe;Ge<=ie;Ge++)ov(_[2*Ge],_[2*Ge+1],t,r)<=B&&P.push(f[Ge]);continue}const ge=fe+ie>>1,Ee=_[2*ge],ke=_[2*ge+1];ov(Ee,ke,t,r)<=B&&P.push(f[ge]),(Y===0?t-l<=Ee:r-l<=ke)&&(E.push(fe),E.push(ge-1),E.push(1-Y)),(Y===0?t+l>=Ee:r+l>=ke)&&(E.push(ge+1),E.push(ie),E.push(1-Y))}return P}}function eg(n,t,r,l,f,_){if(f-l<=r)return;const b=l+f>>1;iv(n,t,b,l,f,_),eg(n,t,r,l,b-1,1-_),eg(n,t,r,b+1,f,1-_)}function iv(n,t,r,l,f,_){for(;f>l;){if(f-l>600){const B=f-l+1,Y=r-l+1,ie=Math.log(B),fe=.5*Math.exp(2*ie/3),ge=.5*Math.sqrt(ie*fe*(B-fe)/B)*(Y-B/2<0?-1:1);iv(n,t,r,Math.max(l,Math.floor(r-Y*fe/B+ge)),Math.min(f,Math.floor(r+(B-Y)*fe/B+ge)),_)}const b=t[2*r+_];let E=l,P=f;for(uf(n,t,l,r),t[2*f+_]>b&&uf(n,t,l,f);E<P;){for(uf(n,t,E,P),E++,P--;t[2*E+_]<b;)E++;for(;t[2*P+_]>b;)P--}t[2*l+_]===b?uf(n,t,l,P):(P++,uf(n,t,P,f)),P<=r&&(l=P+1),r<=P&&(f=P-1)}}function uf(n,t,r,l){tg(n,r,l),tg(t,2*r,2*l),tg(t,2*r+1,2*l+1)}function tg(n,t,r){const l=n[t];n[t]=n[r],n[r]=l}function ov(n,t,r,l){const f=n-r,_=t-l;return f*f+_*_}var ng;w.bg=void 0,(ng=w.bg||(w.bg={})).create="create",ng.load="load",ng.fullLoad="fullLoad";let jp=null,cf=[];const rg=1e3/60,ig="loadTime",og="fullLoadTime",zw={mark(n){performance.mark(n)},frame(n){const t=n;jp!=null&&cf.push(t-jp),jp=t},clearMetrics(){jp=null,cf=[],performance.clearMeasures(ig),performance.clearMeasures(og);for(const n in w.bg)performance.clearMarks(w.bg[n])},getPerformanceMetrics(){performance.measure(ig,w.bg.create,w.bg.load),performance.measure(og,w.bg.create,w.bg.fullLoad);const n=performance.getEntriesByName(ig)[0].duration,t=performance.getEntriesByName(og)[0].duration,r=cf.length,l=1/(cf.reduce((_,b)=>_+b,0)/r/1e3),f=cf.filter(_=>_>rg).reduce((_,b)=>_+(b-rg)/rg,0);return{loadTime:n,fullLoadTime:t,fps:l,percentDroppedFrames:f/(r+f)*100,totalFrames:r}}};w.$=class extends se{},w.A=mc,w.B=Gc,w.C=function(n){if(le==null){const t=n.navigator?n.navigator.userAgent:null;le=!!n.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return le},w.D=an,w.E=Tn,w.F=class{constructor(n,t){this.target=n,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new i(()=>this.process()),this.subscription=function(r,l,f,_){return r.addEventListener(l,f,!1),{unsubscribe:()=>{r.removeEventListener(l,f,!1)}}}(this.target,"message",r=>this.receive(r)),this.globalScope=re(self)?n:window}registerMessageHandler(n,t){this.messageHandlers[n]=t}sendAsync(n,t){return new Promise((r,l)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:r,reject:l},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const E={id:f,type:"<cancel>",origin:location.origin,targetMapId:n.targetMapId,sourceMapId:this.mapId};this.target.postMessage(E)},{once:!0});const _=[],b=Object.assign(Object.assign({},n),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Qi(n.data,_)});this.target.postMessage(b,{transfer:_})})}receive(n){const t=n.data,r=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[r];const l=this.abortControllers[r];return delete this.abortControllers[r],void(l&&l.abort())}if(re(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(this.taskQueue.length===0)return;const n=this.taskQueue.shift(),t=this.tasks[n];delete this.tasks[n],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(n,t)}processTask(n,t){return a(this,void 0,void 0,function*(){if(t.type==="<response>"){const f=this.resolveRejects[n];return delete this.resolveRejects[n],f?void(t.error?f.reject(Zs(t.error)):f.resolve(Zs(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(n,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=Zs(t.data),l=new AbortController;this.abortControllers[n]=l;try{const f=yield this.messageHandlers[t.type](t.sourceMapId,r,l);this.completeTask(n,null,f)}catch(f){this.completeTask(n,f)}})}completeTask(n,t,r){const l=[];delete this.abortControllers[n];const f={id:n,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Qi(t):null,data:Qi(r,l)};this.target.postMessage(f,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},w.G=tt,w.H=function(){var n=new mc(16);return mc!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},w.I=rf,w.J=function(n,t,r){var l,f,_,b,E,P,B,Y,ie,fe,ge,Ee,ke=r[0],Ge=r[1],Ye=r[2];return t===n?(n[12]=t[0]*ke+t[4]*Ge+t[8]*Ye+t[12],n[13]=t[1]*ke+t[5]*Ge+t[9]*Ye+t[13],n[14]=t[2]*ke+t[6]*Ge+t[10]*Ye+t[14],n[15]=t[3]*ke+t[7]*Ge+t[11]*Ye+t[15]):(f=t[1],_=t[2],b=t[3],E=t[4],P=t[5],B=t[6],Y=t[7],ie=t[8],fe=t[9],ge=t[10],Ee=t[11],n[0]=l=t[0],n[1]=f,n[2]=_,n[3]=b,n[4]=E,n[5]=P,n[6]=B,n[7]=Y,n[8]=ie,n[9]=fe,n[10]=ge,n[11]=Ee,n[12]=l*ke+E*Ge+ie*Ye+t[12],n[13]=f*ke+P*Ge+fe*Ye+t[13],n[14]=_*ke+B*Ge+ge*Ye+t[14],n[15]=b*ke+Y*Ge+Ee*Ye+t[15]),n},w.K=function(n,t,r){var l=r[0],f=r[1],_=r[2];return n[0]=t[0]*l,n[1]=t[1]*l,n[2]=t[2]*l,n[3]=t[3]*l,n[4]=t[4]*f,n[5]=t[5]*f,n[6]=t[6]*f,n[7]=t[7]*f,n[8]=t[8]*_,n[9]=t[9]*_,n[10]=t[10]*_,n[11]=t[11]*_,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},w.L=Gd,w.M=function(n,t){const r={};for(let l=0;l<t.length;l++){const f=t[l];f in n&&(r[f]=n[f])}return r},w.N=m,w.O=Z,w.P=C,w.Q=Se,w.R=Gi,w.S=nn,w.T=ji,w.U=Te,w.V=xe,w.W=_e,w.X=ai,w.Y=I,w.Z=bt,w._=a,w.a=De,w.a$=function(n,t){var r=n[0],l=n[1],f=n[2],_=n[3],b=n[4],E=n[5],P=n[6],B=n[7],Y=n[8],ie=n[9],fe=n[10],ge=n[11],Ee=n[12],ke=n[13],Ge=n[14],Ye=n[15],dt=t[0],it=t[1],ht=t[2],St=t[3],Rt=t[4],on=t[5],An=t[6],rn=t[7],Qt=t[8],yn=t[9],fn=t[10],un=t[11],Pt=t[12],xn=t[13],gn=t[14],Bn=t[15];return Math.abs(r-dt)<=mo*Math.max(1,Math.abs(r),Math.abs(dt))&&Math.abs(l-it)<=mo*Math.max(1,Math.abs(l),Math.abs(it))&&Math.abs(f-ht)<=mo*Math.max(1,Math.abs(f),Math.abs(ht))&&Math.abs(_-St)<=mo*Math.max(1,Math.abs(_),Math.abs(St))&&Math.abs(b-Rt)<=mo*Math.max(1,Math.abs(b),Math.abs(Rt))&&Math.abs(E-on)<=mo*Math.max(1,Math.abs(E),Math.abs(on))&&Math.abs(P-An)<=mo*Math.max(1,Math.abs(P),Math.abs(An))&&Math.abs(B-rn)<=mo*Math.max(1,Math.abs(B),Math.abs(rn))&&Math.abs(Y-Qt)<=mo*Math.max(1,Math.abs(Y),Math.abs(Qt))&&Math.abs(ie-yn)<=mo*Math.max(1,Math.abs(ie),Math.abs(yn))&&Math.abs(fe-fn)<=mo*Math.max(1,Math.abs(fe),Math.abs(fn))&&Math.abs(ge-un)<=mo*Math.max(1,Math.abs(ge),Math.abs(un))&&Math.abs(Ee-Pt)<=mo*Math.max(1,Math.abs(Ee),Math.abs(Pt))&&Math.abs(ke-xn)<=mo*Math.max(1,Math.abs(ke),Math.abs(xn))&&Math.abs(Ge-gn)<=mo*Math.max(1,Math.abs(Ge),Math.abs(gn))&&Math.abs(Ye-Bn)<=mo*Math.max(1,Math.abs(Ye),Math.abs(Bn))},w.a0=Kn,w.a1=Ut,w.a2=z,w.a3=n=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(r=>{t.onloadstart=()=>{r(t)};for(const l of n){const f=window.document.createElement("source");Lt(l)||(t.crossOrigin="Anonymous"),f.src=l,t.appendChild(f)}})},w.a4=function(){return $++},w.a5=Yt,w.a6=Sc,w.a7=Nr,w.a8=Jl,w.a9=vt,w.aA=function(n){if(n.type==="custom")return new pd(n);switch(n.type){case"background":return new fd(n);case"circle":return new Dm(n);case"fill":return new Nm(n);case"fill-extrusion":return new mp(n);case"heatmap":return new Bm(n);case"hillshade":return new ep(n);case"line":return new xc(n);case"raster":return new Xm(n);case"symbol":return new Hu(n)}},w.aB=K,w.aC=function(n,t){if(!n)return[{command:"setStyle",args:[t]}];let r=[];try{if(!en(n.version,t.version))return[{command:"setStyle",args:[t]}];en(n.center,t.center)||r.push({command:"setCenter",args:[t.center]}),en(n.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),en(n.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),en(n.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),en(n.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),en(n.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),en(n.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),en(n.light,t.light)||r.push({command:"setLight",args:[t.light]}),en(n.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),en(n.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),en(n.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const l={},f=[];(function(b,E,P,B){let Y;for(Y in E=E||{},b=b||{})Object.prototype.hasOwnProperty.call(b,Y)&&(Object.prototype.hasOwnProperty.call(E,Y)||H(Y,P,B));for(Y in E)Object.prototype.hasOwnProperty.call(E,Y)&&(Object.prototype.hasOwnProperty.call(b,Y)?en(b[Y],E[Y])||(b[Y].type==="geojson"&&E[Y].type==="geojson"&&rt(b,E,Y)?ze(P,{command:"setGeoJSONSourceData",args:[Y,E[Y].data]}):Ce(Y,E,P,B)):G(Y,E,P))})(n.sources,t.sources,f,l);const _=[];n.layers&&n.layers.forEach(b=>{"source"in b&&l[b.source]?r.push({command:"removeLayer",args:[b.id]}):_.push(b)}),r=r.concat(f),function(b,E,P){E=E||[];const B=(b=b||[]).map(Et),Y=E.map(Et),ie=b.reduce(ye,{}),fe=E.reduce(ye,{}),ge=B.slice(),Ee=Object.create(null);let ke,Ge,Ye,dt,it;for(let ht=0,St=0;ht<B.length;ht++)ke=B[ht],Object.prototype.hasOwnProperty.call(fe,ke)?St++:(ze(P,{command:"removeLayer",args:[ke]}),ge.splice(ge.indexOf(ke,St),1));for(let ht=0,St=0;ht<Y.length;ht++)ke=Y[Y.length-1-ht],ge[ge.length-1-ht]!==ke&&(Object.prototype.hasOwnProperty.call(ie,ke)?(ze(P,{command:"removeLayer",args:[ke]}),ge.splice(ge.lastIndexOf(ke,ge.length-St),1)):St++,dt=ge[ge.length-ht],ze(P,{command:"addLayer",args:[fe[ke],dt]}),ge.splice(ge.length-ht,0,ke),Ee[ke]=!0);for(let ht=0;ht<Y.length;ht++)if(ke=Y[ht],Ge=ie[ke],Ye=fe[ke],!Ee[ke]&&!en(Ge,Ye))if(en(Ge.source,Ye.source)&&en(Ge["source-layer"],Ye["source-layer"])&&en(Ge.type,Ye.type)){for(it in ct(Ge.layout,Ye.layout,P,ke,null,"setLayoutProperty"),ct(Ge.paint,Ye.paint,P,ke,null,"setPaintProperty"),en(Ge.filter,Ye.filter)||ze(P,{command:"setFilter",args:[ke,Ye.filter]}),en(Ge.minzoom,Ye.minzoom)&&en(Ge.maxzoom,Ye.maxzoom)||ze(P,{command:"setLayerZoomRange",args:[ke,Ye.minzoom,Ye.maxzoom]}),Ge)Object.prototype.hasOwnProperty.call(Ge,it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?ct(Ge[it],Ye[it],P,ke,it.slice(6),"setPaintProperty"):en(Ge[it],Ye[it])||ze(P,{command:"setLayerProperty",args:[ke,it,Ye[it]]}));for(it in Ye)Object.prototype.hasOwnProperty.call(Ye,it)&&!Object.prototype.hasOwnProperty.call(Ge,it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?ct(Ge[it],Ye[it],P,ke,it.slice(6),"setPaintProperty"):en(Ge[it],Ye[it])||ze(P,{command:"setLayerProperty",args:[ke,it,Ye[it]]}))}else ze(P,{command:"removeLayer",args:[ke]}),dt=ge[ge.lastIndexOf(ke)+1],ze(P,{command:"addLayer",args:[Ye,dt]})}(_,t.layers,r)}catch(l){console.warn("Unable to compute style diff:",l),r=[{command:"setStyle",args:[t]}]}return r},w.aD=function(n){const t=[],r=n.id;return r===void 0&&t.push({message:`layers.${r}: missing required property "id"`}),n.render===void 0&&t.push({message:`layers.${r}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},w.aE=function n(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let l=0;l<t.length;l++)if(!n(t[l],r[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&r!==null){if(typeof r!="object"||Object.keys(t).length!==Object.keys(r).length)return!1;for(const l in t)if(!n(t[l],r[l]))return!1;return!0}return t===r},w.aF=U,w.aG=de,w.aH=class extends Wr{constructor(n,t){super(n,t),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},w.aI=yi,w.aJ=class extends Wr{constructor(n,t){super(n,t),this.current=Kc}set(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}},w.aK=Xc,w.aL=fc,w.aM=Pn,w.aN=class extends Wr{constructor(n,t){super(n,t),this.current=[0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))}},w.aO=class extends Wr{constructor(n,t){super(n,t),this.current=[0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))}},w.aP=function(n,t,r,l,f,_,b){var E=1/(t-r),P=1/(l-f),B=1/(_-b);return n[0]=-2*E,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*P,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*B,n[11]=0,n[12]=(t+r)*E,n[13]=(f+l)*P,n[14]=(b+_)*B,n[15]=1,n},w.aQ=Vh,w.aR=class extends st{},w.aS=hh,w.aT=class extends mt{},w.aU=nh,w.aV=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},w.aW=qh,w.aX=ni,w.aY=Xo,w.aZ=class extends dn{},w.a_=function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]},w.aa=function(n){const t={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,l,f,_)=>{const b=f||_;return t[l]=!b||b.toLowerCase(),""}),t["max-age"]){const r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t},w.ab=function(n,t){const r=[];for(const l in n)l in t||r.push(l);return r},w.ac=ne,w.ad=function(n,t,r){var l=Math.sin(r),f=Math.cos(r),_=t[0],b=t[1],E=t[2],P=t[3],B=t[4],Y=t[5],ie=t[6],fe=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=_*f+B*l,n[1]=b*f+Y*l,n[2]=E*f+ie*l,n[3]=P*f+fe*l,n[4]=B*f-_*l,n[5]=Y*f-b*l,n[6]=ie*f-E*l,n[7]=fe*f-P*l,n},w.ae=function(n){var t=new mc(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},w.af=$h,w.ag=function(n,t){let r=0,l=0;if(n.kind==="constant")l=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:f,minZoom:_,maxZoom:b}=n,E=f?ne(hi.interpolationFactor(f,t,_,b),0,1):0;n.kind==="camera"?l=Hr.number(n.minSize,n.maxSize,E):r=E}return{uSizeT:r,uSize:l}},w.ai=function(n,{uSize:t,uSizeT:r},{lowerSize:l,upperSize:f}){return n.kind==="source"?l/Ks:n.kind==="composite"?Hr.number(l/Ks,f/Ks,r):t},w.aj=bc,w.ak=function(n,t,r,l){const f=t.y-n.y,_=t.x-n.x,b=l.y-r.y,E=l.x-r.x,P=b*_-E*f;if(P===0)return null;const B=(E*(n.y-r.y)-b*(n.x-r.x))/P;return new C(n.x+B*_,n.y+B*f)},w.al=Dn,w.am=Bd,w.an=Uh,w.ao=function(n){let t=1/0,r=1/0,l=-1/0,f=-1/0;for(const _ of n)t=Math.min(t,_.x),r=Math.min(r,_.y),l=Math.max(l,_.x),f=Math.max(f,_.y);return[t,r,l,f]},w.ap=Vr,w.ar=wh,w.as=function(n,t){var r=t[0],l=t[1],f=t[2],_=t[3],b=t[4],E=t[5],P=t[6],B=t[7],Y=t[8],ie=t[9],fe=t[10],ge=t[11],Ee=t[12],ke=t[13],Ge=t[14],Ye=t[15],dt=r*E-l*b,it=r*P-f*b,ht=r*B-_*b,St=l*P-f*E,Rt=l*B-_*E,on=f*B-_*P,An=Y*ke-ie*Ee,rn=Y*Ge-fe*Ee,Qt=Y*Ye-ge*Ee,yn=ie*Ge-fe*ke,fn=ie*Ye-ge*ke,un=fe*Ye-ge*Ge,Pt=dt*un-it*fn+ht*yn+St*Qt-Rt*rn+on*An;return Pt?(n[0]=(E*un-P*fn+B*yn)*(Pt=1/Pt),n[1]=(f*fn-l*un-_*yn)*Pt,n[2]=(ke*on-Ge*Rt+Ye*St)*Pt,n[3]=(fe*Rt-ie*on-ge*St)*Pt,n[4]=(P*Qt-b*un-B*rn)*Pt,n[5]=(r*un-f*Qt+_*rn)*Pt,n[6]=(Ge*ht-Ee*on-Ye*it)*Pt,n[7]=(Y*on-fe*ht+ge*it)*Pt,n[8]=(b*fn-E*Qt+B*An)*Pt,n[9]=(l*Qt-r*fn-_*An)*Pt,n[10]=(Ee*Rt-ke*ht+Ye*dt)*Pt,n[11]=(ie*ht-Y*Rt-ge*dt)*Pt,n[12]=(E*rn-b*yn-P*An)*Pt,n[13]=(r*yn-l*rn+f*An)*Pt,n[14]=(ke*it-Ee*St-Ge*dt)*Pt,n[15]=(Y*St-ie*it+fe*dt)*Pt,n):null},w.at=Jm,w.au=_h,w.av=Qm,w.aw=function(){const n={},t=at.$version;for(const r in at.$root){const l=at.$root[r];if(l.required){let f=null;f=r==="version"?t:l.type==="array"?[]:{},f!=null&&(n[r]=f)}}return n},w.ax=vs,w.ay=_t,w.az=function(n){n=n.slice();const t=Object.create(null);for(let r=0;r<n.length;r++)t[n[r].id]=n[r];for(let r=0;r<n.length;r++)"ref"in n[r]&&(n[r]=hn(n[r],t[n[r].ref]));return n},w.b=te,w.b0=function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},w.b1=function(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n},w.b2=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},w.b3=ue,w.b4=Ft,w.b5=Xe,w.b6=function(n,t,r,l,f){var _,b=1/Math.tan(t/2);return n[0]=b/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=b,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,f!=null&&f!==1/0?(n[10]=(f+l)*(_=1/(l-f)),n[14]=2*f*l*_):(n[10]=-1,n[14]=-2*l),n},w.b7=function(n,t,r){var l=Math.sin(r),f=Math.cos(r),_=t[4],b=t[5],E=t[6],P=t[7],B=t[8],Y=t[9],ie=t[10],fe=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=_*f+B*l,n[5]=b*f+Y*l,n[6]=E*f+ie*l,n[7]=P*f+fe*l,n[8]=B*f-_*l,n[9]=Y*f-b*l,n[10]=ie*f-E*l,n[11]=fe*f-P*l,n},w.b8=ve,w.b9=Me,w.bA=Wa,w.bB=function(n){return n.message===Fe},w.bC=Kt,w.bD=Sr,w.ba=function(n){return n*Math.PI/180},w.bb=function(n,t){const{x:r,y:l}=bt.fromLngLat(t);return!(n<0||n>25||l<0||l>=1||r<0||r>=1)},w.bc=function(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},w.bd=class extends X{},w.be=s,w.bf=zw,w.bh=pt,w.bi=function(n,t){De.REGISTERED_PROTOCOLS[n]=t},w.bj=function(n){delete De.REGISTERED_PROTOCOLS[n]},w.bk=function(n,t){const r={};for(let f=0;f<n.length;f++){const _=t&&t[n[f].id]||Bc(n[f]);t&&(t[n[f].id]=_);let b=r[_];b||(b=r[_]=[]),b.push(n[f])}const l=[];for(const f in r)l.push(r[f]);return l},w.bl=sn,w.bm=fi,w.bn=lt,w.bo=of,w.bp=function(n){n.bucket.createArrays(),n.bucket.tilePixelRatio=ai/(512*n.bucket.overscaling),n.bucket.compareText={},n.bucket.iconsNeedLinear=!1;const t=n.bucket.layers[0],r=t.layout,l=t._unevaluatedLayout._values,f={layoutIconSize:l["icon-size"].possiblyEvaluate(new tr(n.bucket.zoom+1),n.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new tr(n.bucket.zoom+1),n.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new tr(18))};if(n.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:Y}=n.bucket.textSizeData;f.compositeTextSizes=[l["text-size"].possiblyEvaluate(new tr(B),n.canonical),l["text-size"].possiblyEvaluate(new tr(Y),n.canonical)]}if(n.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:Y}=n.bucket.iconSizeData;f.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new tr(B),n.canonical),l["icon-size"].possiblyEvaluate(new tr(Y),n.canonical)]}const _=r.get("text-line-height")*Vr,b=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",E=r.get("text-keep-upright"),P=r.get("text-size");for(const B of n.bucket.features){const Y=r.get("text-font").evaluate(B,{},n.canonical).join(","),ie=P.evaluate(B,{},n.canonical),fe=f.layoutTextSize.evaluate(B,{},n.canonical),ge=f.layoutIconSize.evaluate(B,{},n.canonical),Ee={horizontal:{},vertical:void 0},ke=B.text;let Ge,Ye=[0,0];if(ke){const ht=ke.toString(),St=r.get("text-letter-spacing").evaluate(B,{},n.canonical)*Vr,Rt=Od(ht)?St:0,on=r.get("text-anchor").evaluate(B,{},n.canonical),An=ev(t,B,n.canonical);if(!An){const fn=r.get("text-radial-offset").evaluate(B,{},n.canonical);Ye=fn?Q0(on,[fn*Vr,Ym]):r.get("text-offset").evaluate(B,{},n.canonical).map(un=>un*Vr)}let rn=b?"center":r.get("text-justify").evaluate(B,{},n.canonical);const Qt=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(B,{},n.canonical)*Vr:1/0,yn=()=>{n.bucket.allowVerticalPlacement&&Hc(ht)&&(Ee.vertical=vh(ke,n.glyphMap,n.glyphPositions,n.imagePositions,Y,Qt,_,on,"left",Rt,Ye,w.ah.vertical,!0,fe,ie))};if(!b&&An){const fn=new Set;if(rn==="auto")for(let Pt=0;Pt<An.values.length;Pt+=2)fn.add(Jm(An.values[Pt]));else fn.add(rn);let un=!1;for(const Pt of fn)if(!Ee.horizontal[Pt])if(un)Ee.horizontal[Pt]=Ee.horizontal[0];else{const xn=vh(ke,n.glyphMap,n.glyphPositions,n.imagePositions,Y,Qt,_,"center",Pt,Rt,Ye,w.ah.horizontal,!1,fe,ie);xn&&(Ee.horizontal[Pt]=xn,un=xn.positionedLines.length===1)}yn()}else{rn==="auto"&&(rn=Jm(on));const fn=vh(ke,n.glyphMap,n.glyphPositions,n.imagePositions,Y,Qt,_,on,rn,Rt,Ye,w.ah.horizontal,!1,fe,ie);fn&&(Ee.horizontal[rn]=fn),yn(),Hc(ht)&&b&&E&&(Ee.vertical=vh(ke,n.glyphMap,n.glyphPositions,n.imagePositions,Y,Qt,_,on,rn,Rt,Ye,w.ah.vertical,!1,fe,ie))}}let dt=!1;if(B.icon&&B.icon.name){const ht=n.imageMap[B.icon.name];ht&&(Ge=ou(n.imagePositions[B.icon.name],r.get("icon-offset").evaluate(B,{},n.canonical),r.get("icon-anchor").evaluate(B,{},n.canonical)),dt=!!ht.sdf,n.bucket.sdfIcons===void 0?n.bucket.sdfIcons=dt:n.bucket.sdfIcons!==dt&&W("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ht.pixelRatio!==n.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(n.bucket.iconsNeedLinear=!0))}const it=nv(Ee.horizontal)||Ee.vertical;n.bucket.iconsInText=!!it&&it.iconsInText,(it||Ge)&&Mw(n.bucket,B,Ee,Ge,n.imageMap,f,fe,ge,Ye,dt,n.canonical)}n.showCollisionBoxes&&n.bucket.generateCollisionDebugBuffers()},w.bq=Yo,w.br=Jh,w.bs=Ps,w.bt=eu,w.bu=ml,w.bv=class{constructor(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let n=performance.getEntriesByName(this._marks.measure);return n.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),n=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),n}},w.bw=function(n,t,r,l,f){return a(this,void 0,void 0,function*(){if(xe())try{return yield _e(n,t,r,l,f)}catch{}return function(_,b,E,P,B){const Y=_.width,ie=_.height;be&&he||(be=new OffscreenCanvas(Y,ie),he=be.getContext("2d",{willReadFrequently:!0})),be.width=Y,be.height=ie,he.drawImage(_,0,0,Y,ie);const fe=he.getImageData(b,E,P,B);return he.clearRect(0,0,Y,ie),fe.data}(n,t,r,l,f)})},w.bx=bn,w.by=L,w.bz=R,w.c=Oe,w.d=n=>a(void 0,void 0,void 0,function*(){if(n.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(n)],{type:"image/png"});try{return createImageBitmap(t)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),w.e=M,w.f=n=>new Promise((t,r)=>{const l=new Image;l.onload=()=>{t(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=oe})},l.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(n)],{type:"image/png"});l.src=n.byteLength?URL.createObjectURL(f):oe}),w.g=Ke,w.h=(n,t)=>Tt(M(n,{type:"json"}),t),w.i=re,w.j=cn,w.k=Jt,w.l=(n,t)=>Tt(M(n,{type:"arrayBuffer"}),t),w.m=Tt,w.n=function(n){return new ml(n).readFields(Gu,[])},w.o=Du,w.p=gh,w.q=y,w.r=$c,w.s=Lt,w.t=cc,w.u=pa,w.v=at,w.w=W,w.x=function([n,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:n*Math.cos(t)*Math.sin(r),y:n*Math.sin(t)*Math.sin(r),z:n*Math.cos(r)}},w.y=Hr,w.z=tr}),x("worker",["./shared"],function(w){class a{constructor(me){this.keyCache={},me&&this.replace(me)}replace(me){this._layerConfigs={},this._layers={},this.update(me,[])}update(me,pe){for(const Le of me){this._layerConfigs[Le.id]=Le;const Be=this._layers[Le.id]=w.aA(Le);Be._featureFilter=w.a7(Be.filter),this.keyCache[Le.id]&&delete this.keyCache[Le.id]}for(const Le of pe)delete this.keyCache[Le],delete this._layerConfigs[Le],delete this._layers[Le];this.familiesBySource={};const Pe=w.bk(Object.values(this._layerConfigs),this.keyCache);for(const Le of Pe){const Be=Le.map(gt=>this._layers[gt.id]),He=Be[0];if(He.visibility==="none")continue;const nt=He.source||"";let Ze=this.familiesBySource[nt];Ze||(Ze=this.familiesBySource[nt]={});const yt=He.sourceLayer||"_geojsonTileLayer";let Ct=Ze[yt];Ct||(Ct=Ze[yt]=[]),Ct.push(Be)}}}class L{constructor(me){const pe={},Pe=[];for(const nt in me){const Ze=me[nt],yt=pe[nt]={};for(const Ct in Ze){const gt=Ze[+Ct];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const Vt={x:0,y:0,w:gt.bitmap.width+2,h:gt.bitmap.height+2};Pe.push(Vt),yt[Ct]={rect:Vt,metrics:gt.metrics}}}const{w:Le,h:Be}=w.p(Pe),He=new w.o({width:Le||1,height:Be||1});for(const nt in me){const Ze=me[nt];for(const yt in Ze){const Ct=Ze[+yt];if(!Ct||Ct.bitmap.width===0||Ct.bitmap.height===0)continue;const gt=pe[nt][yt].rect;w.o.copy(Ct.bitmap,He,{x:0,y:0},{x:gt.x+1,y:gt.y+1},Ct.bitmap)}}this.image=He,this.positions=pe}}w.bl("GlyphAtlas",L);class R{constructor(me){this.tileID=new w.S(me.tileID.overscaledZ,me.tileID.wrap,me.tileID.canonical.z,me.tileID.canonical.x,me.tileID.canonical.y),this.uid=me.uid,this.zoom=me.zoom,this.pixelRatio=me.pixelRatio,this.tileSize=me.tileSize,this.source=me.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=me.showCollisionBoxes,this.collectResourceTiming=!!me.collectResourceTiming,this.returnDependencies=!!me.returnDependencies,this.promoteId=me.promoteId,this.inFlightDependencies=[]}parse(me,pe,Pe,Le){return w._(this,void 0,void 0,function*(){this.status="parsing",this.data=me,this.collisionBoxArray=new w.a5;const Be=new w.bm(Object.keys(me.layers).sort()),He=new w.bn(this.tileID,this.promoteId);He.bucketLayerIDs=[];const nt={},Ze={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Pe},yt=pe.familiesBySource[this.source];for(const Wn in yt){const ur=me.layers[Wn];if(!ur)continue;ur.version===1&&w.w(`Vector tile source "${this.source}" layer "${Wn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const br=Be.encode(Wn),ii=[];for(let ci=0;ci<ur.length;ci++){const zi=ur.feature(ci),as=He.getId(zi,Wn);ii.push({feature:zi,id:as,index:ci,sourceLayerIndex:br})}for(const ci of yt[Wn]){const zi=ci[0];zi.source!==this.source&&w.w(`layer.source = ${zi.source} does not equal this.source = ${this.source}`),zi.minzoom&&this.zoom<Math.floor(zi.minzoom)||zi.maxzoom&&this.zoom>=zi.maxzoom||zi.visibility!=="none"&&(D(ci,this.zoom,Pe),(nt[zi.id]=zi.createBucket({index:He.bucketLayerIDs.length,layers:ci,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:br,sourceID:this.source})).populate(ii,Ze,this.tileID.canonical),He.bucketLayerIDs.push(ci.map(as=>as.id)))}}const Ct=w.aF(Ze.glyphDependencies,Wn=>Object.keys(Wn).map(Number));this.inFlightDependencies.forEach(Wn=>Wn==null?void 0:Wn.abort()),this.inFlightDependencies=[];let gt=Promise.resolve({});if(Object.keys(Ct).length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),gt=Le.sendAsync({type:"GG",data:{stacks:Ct,source:this.source,tileID:this.tileID,type:"glyphs"}},Wn)}const Vt=Object.keys(Ze.iconDependencies);let pn=Promise.resolve({});if(Vt.length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),pn=Le.sendAsync({type:"GI",data:{icons:Vt,source:this.source,tileID:this.tileID,type:"icons"}},Wn)}const vn=Object.keys(Ze.patternDependencies);let Jn=Promise.resolve({});if(vn.length){const Wn=new AbortController;this.inFlightDependencies.push(Wn),Jn=Le.sendAsync({type:"GI",data:{icons:vn,source:this.source,tileID:this.tileID,type:"patterns"}},Wn)}const[Fn,Qn,Un]=yield Promise.all([gt,pn,Jn]),Or=new L(Fn),_r=new w.bo(Qn,Un);for(const Wn in nt){const ur=nt[Wn];ur instanceof w.a6?(D(ur.layers,this.zoom,Pe),w.bp({bucket:ur,glyphMap:Fn,glyphPositions:Or.positions,imageMap:Qn,imagePositions:_r.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ur.hasPattern&&(ur instanceof w.bq||ur instanceof w.br||ur instanceof w.bs)&&(D(ur.layers,this.zoom,Pe),ur.addFeatures(Ze,this.tileID.canonical,_r.patternPositions))}return this.status="done",{buckets:Object.values(nt).filter(Wn=>!Wn.isEmpty()),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Or.image,imageAtlas:_r,glyphMap:this.returnDependencies?Fn:null,iconMap:this.returnDependencies?Qn:null,glyphPositions:this.returnDependencies?Or.positions:null}})}}function D(Ue,me,pe){const Pe=new w.z(me);for(const Le of Ue)Le.recalculate(Pe,pe)}class C{constructor(me,pe,Pe){this.actor=me,this.layerIndex=pe,this.availableImages=Pe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(me,pe){return w._(this,void 0,void 0,function*(){const Pe=yield w.l(me.request,pe);try{return{vectorTile:new w.bt.VectorTile(new w.bu(Pe.data)),rawData:Pe.data,cacheControl:Pe.cacheControl,expires:Pe.expires}}catch(Le){const Be=new Uint8Array(Pe.data);let He=`Unable to parse the tile at ${me.request.url}, `;throw He+=Be[0]===31&&Be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Le.message}`,new Error(He)}})}loadTile(me){return w._(this,void 0,void 0,function*(){const pe=me.uid,Pe=!!(me&&me.request&&me.request.collectResourceTiming)&&new w.bv(me.request),Le=new R(me);this.loading[pe]=Le;const Be=new AbortController;Le.abort=Be;try{const He=yield this.loadVectorTile(me,Be);if(delete this.loading[pe],!He)return null;const nt=He.rawData,Ze={};He.expires&&(Ze.expires=He.expires),He.cacheControl&&(Ze.cacheControl=He.cacheControl);const yt={};if(Pe){const gt=Pe.finish();gt&&(yt.resourceTiming=JSON.parse(JSON.stringify(gt)))}Le.vectorTile=He.vectorTile;const Ct=Le.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[pe]=Le,this.fetching[pe]={rawTileData:nt,cacheControl:Ze,resourceTiming:yt};try{const gt=yield Ct;return w.e({rawTileData:nt.slice(0)},gt,Ze,yt)}finally{delete this.fetching[pe]}}catch(He){throw delete this.loading[pe],Le.status="done",this.loaded[pe]=Le,He}})}reloadTile(me){return w._(this,void 0,void 0,function*(){const pe=me.uid;if(!this.loaded||!this.loaded[pe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Pe=this.loaded[pe];if(Pe.showCollisionBoxes=me.showCollisionBoxes,Pe.status==="parsing"){const Le=yield Pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor);let Be;if(this.fetching[pe]){const{rawTileData:He,cacheControl:nt,resourceTiming:Ze}=this.fetching[pe];delete this.fetching[pe],Be=w.e({rawTileData:He.slice(0)},Le,nt,Ze)}else Be=Le;return Be}if(Pe.status==="done"&&Pe.vectorTile)return Pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(me){return w._(this,void 0,void 0,function*(){const pe=this.loading,Pe=me.uid;pe&&pe[Pe]&&pe[Pe].abort&&(pe[Pe].abort.abort(),delete pe[Pe])})}removeTile(me){return w._(this,void 0,void 0,function*(){this.loaded&&this.loaded[me.uid]&&delete this.loaded[me.uid]})}}class k{constructor(){this.loaded={}}loadTile(me){return w._(this,void 0,void 0,function*(){const{uid:pe,encoding:Pe,rawImageData:Le,redFactor:Be,greenFactor:He,blueFactor:nt,baseShift:Ze}=me,yt=Le.width+2,Ct=Le.height+2,gt=w.b(Le)?new w.R({width:yt,height:Ct},yield w.bw(Le,-1,-1,yt,Ct)):Le,Vt=new w.bx(pe,gt,Pe,Be,He,nt,Ze);return this.loaded=this.loaded||{},this.loaded[pe]=Vt,Vt})}removeTile(me){const pe=this.loaded,Pe=me.uid;pe&&pe[Pe]&&delete pe[Pe]}}function V(Ue,me){if(Ue.length!==0){N(Ue[0],me);for(var pe=1;pe<Ue.length;pe++)N(Ue[pe],!me)}}function N(Ue,me){for(var pe=0,Pe=0,Le=0,Be=Ue.length,He=Be-1;Le<Be;He=Le++){var nt=(Ue[Le][0]-Ue[He][0])*(Ue[He][1]+Ue[Le][1]),Ze=pe+nt;Pe+=Math.abs(pe)>=Math.abs(nt)?pe-Ze+nt:nt-Ze+pe,pe=Ze}pe+Pe>=0!=!!me&&Ue.reverse()}var Q=w.by(function Ue(me,pe){var Pe,Le=me&&me.type;if(Le==="FeatureCollection")for(Pe=0;Pe<me.features.length;Pe++)Ue(me.features[Pe],pe);else if(Le==="GeometryCollection")for(Pe=0;Pe<me.geometries.length;Pe++)Ue(me.geometries[Pe],pe);else if(Le==="Feature")Ue(me.geometry,pe);else if(Le==="Polygon")V(me.coordinates,pe);else if(Le==="MultiPolygon")for(Pe=0;Pe<me.coordinates.length;Pe++)V(me.coordinates[Pe],pe);return me});const ce=w.bt.VectorTileFeature.prototype.toGeoJSON;var Te={exports:{}},xe=w.bz,ve=w.bt.VectorTileFeature,Me=ne;function ne(Ue,me){this.options=me||{},this.features=Ue,this.length=Ue.length}function ue(Ue,me){this.id=typeof Ue.id=="number"?Ue.id:void 0,this.type=Ue.type,this.rawGeometry=Ue.type===1?[Ue.geometry]:Ue.geometry,this.properties=Ue.tags,this.extent=me||4096}ne.prototype.feature=function(Ue){return new ue(this.features[Ue],this.options.extent)},ue.prototype.loadGeometry=function(){var Ue=this.rawGeometry;this.geometry=[];for(var me=0;me<Ue.length;me++){for(var pe=Ue[me],Pe=[],Le=0;Le<pe.length;Le++)Pe.push(new xe(pe[Le][0],pe[Le][1]));this.geometry.push(Pe)}return this.geometry},ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ue=this.geometry,me=1/0,pe=-1/0,Pe=1/0,Le=-1/0,Be=0;Be<Ue.length;Be++)for(var He=Ue[Be],nt=0;nt<He.length;nt++){var Ze=He[nt];me=Math.min(me,Ze.x),pe=Math.max(pe,Ze.x),Pe=Math.min(Pe,Ze.y),Le=Math.max(Le,Ze.y)}return[me,Pe,pe,Le]},ue.prototype.toGeoJSON=ve.prototype.toGeoJSON;var M=w.bA,$=Me;function U(Ue){var me=new M;return function(pe,Pe){for(var Le in pe.layers)Pe.writeMessage(3,de,pe.layers[Le])}(Ue,me),me.finish()}function de(Ue,me){var pe;me.writeVarintField(15,Ue.version||1),me.writeStringField(1,Ue.name||""),me.writeVarintField(5,Ue.extent||4096);var Pe={keys:[],values:[],keycache:{},valuecache:{}};for(pe=0;pe<Ue.length;pe++)Pe.feature=Ue.feature(pe),me.writeMessage(2,K,Pe);var Le=Pe.keys;for(pe=0;pe<Le.length;pe++)me.writeStringField(3,Le[pe]);var Be=Pe.values;for(pe=0;pe<Be.length;pe++)me.writeMessage(4,le,Be[pe])}function K(Ue,me){var pe=Ue.feature;pe.id!==void 0&&me.writeVarintField(1,pe.id),me.writeMessage(2,j,Ue),me.writeVarintField(3,pe.type),me.writeMessage(4,re,pe)}function j(Ue,me){var pe=Ue.feature,Pe=Ue.keys,Le=Ue.values,Be=Ue.keycache,He=Ue.valuecache;for(var nt in pe.properties){var Ze=pe.properties[nt],yt=Be[nt];if(Ze!==null){yt===void 0&&(Pe.push(nt),Be[nt]=yt=Pe.length-1),me.writeVarint(yt);var Ct=typeof Ze;Ct!=="string"&&Ct!=="boolean"&&Ct!=="number"&&(Ze=JSON.stringify(Ze));var gt=Ct+":"+Ze,Vt=He[gt];Vt===void 0&&(Le.push(Ze),He[gt]=Vt=Le.length-1),me.writeVarint(Vt)}}}function W(Ue,me){return(me<<3)+(7&Ue)}function J(Ue){return Ue<<1^Ue>>31}function re(Ue,me){for(var pe=Ue.loadGeometry(),Pe=Ue.type,Le=0,Be=0,He=pe.length,nt=0;nt<He;nt++){var Ze=pe[nt],yt=1;Pe===1&&(yt=Ze.length),me.writeVarint(W(1,yt));for(var Ct=Pe===3?Ze.length-1:Ze.length,gt=0;gt<Ct;gt++){gt===1&&Pe!==1&&me.writeVarint(W(2,Ct-1));var Vt=Ze[gt].x-Le,pn=Ze[gt].y-Be;me.writeVarint(J(Vt)),me.writeVarint(J(pn)),Le+=Vt,Be+=pn}Pe===3&&me.writeVarint(W(7,1))}}function le(Ue,me){var pe=typeof Ue;pe==="string"?me.writeStringField(1,Ue):pe==="boolean"?me.writeBooleanField(7,Ue):pe==="number"&&(Ue%1!=0?me.writeDoubleField(3,Ue):Ue<0?me.writeSVarintField(6,Ue):me.writeVarintField(5,Ue))}Te.exports=U,Te.exports.fromVectorTileJs=U,Te.exports.fromGeojsonVt=function(Ue,me){me=me||{};var pe={};for(var Pe in Ue)pe[Pe]=new $(Ue[Pe].features,me),pe[Pe].name=Pe,pe[Pe].version=me.version,pe[Pe].extent=me.extent;return U({layers:pe})},Te.exports.GeoJSONWrapper=$;var te=w.by(Te.exports);const oe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ue=>Ue},_e=Math.fround||(be=new Float32Array(1),Ue=>(be[0]=+Ue,be[0]));var be;const he=3,Fe=5,Oe=6;class De{constructor(me){this.options=Object.assign(Object.create(oe),me),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(me){const{log:pe,minZoom:Pe,maxZoom:Le}=this.options;pe&&console.time("total time");const Be=`prepare ${me.length} points`;pe&&console.time(Be),this.points=me;const He=[];for(let Ze=0;Ze<me.length;Ze++){const yt=me[Ze];if(!yt.geometry)continue;const[Ct,gt]=yt.geometry.coordinates,Vt=_e(pt(Ct)),pn=_e(_t(gt));He.push(Vt,pn,1/0,Ze,-1,1),this.options.reduce&&He.push(0)}let nt=this.trees[Le+1]=this._createTree(He);pe&&console.timeEnd(Be);for(let Ze=Le;Ze>=Pe;Ze--){const yt=+Date.now();nt=this.trees[Ze]=this._createTree(this._cluster(nt,Ze)),pe&&console.log("z%d: %d clusters in %dms",Ze,nt.numItems,+Date.now()-yt)}return pe&&console.timeEnd("total time"),this}getClusters(me,pe){let Pe=((me[0]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,me[1]));let Be=me[2]===180?180:((me[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,me[3]));if(me[2]-me[0]>=360)Pe=-180,Be=180;else if(Pe>Be){const gt=this.getClusters([Pe,Le,180,He],pe),Vt=this.getClusters([-180,Le,Be,He],pe);return gt.concat(Vt)}const nt=this.trees[this._limitZoom(pe)],Ze=nt.range(pt(Pe),_t(He),pt(Be),_t(Le)),yt=nt.data,Ct=[];for(const gt of Ze){const Vt=this.stride*gt;Ct.push(yt[Vt+Fe]>1?Ke(yt,Vt,this.clusterProps):this.points[yt[Vt+he]])}return Ct}getChildren(me){const pe=this._getOriginId(me),Pe=this._getOriginZoom(me),Le="No cluster with the specified id.",Be=this.trees[Pe];if(!Be)throw new Error(Le);const He=Be.data;if(pe*this.stride>=He.length)throw new Error(Le);const nt=this.options.radius/(this.options.extent*Math.pow(2,Pe-1)),Ze=Be.within(He[pe*this.stride],He[pe*this.stride+1],nt),yt=[];for(const Ct of Ze){const gt=Ct*this.stride;He[gt+4]===me&&yt.push(He[gt+Fe]>1?Ke(He,gt,this.clusterProps):this.points[He[gt+he]])}if(yt.length===0)throw new Error(Le);return yt}getLeaves(me,pe,Pe){const Le=[];return this._appendLeaves(Le,me,pe=pe||10,Pe=Pe||0,0),Le}getTile(me,pe,Pe){const Le=this.trees[this._limitZoom(me)],Be=Math.pow(2,me),{extent:He,radius:nt}=this.options,Ze=nt/He,yt=(Pe-Ze)/Be,Ct=(Pe+1+Ze)/Be,gt={features:[]};return this._addTileFeatures(Le.range((pe-Ze)/Be,yt,(pe+1+Ze)/Be,Ct),Le.data,pe,Pe,Be,gt),pe===0&&this._addTileFeatures(Le.range(1-Ze/Be,yt,1,Ct),Le.data,Be,Pe,Be,gt),pe===Be-1&&this._addTileFeatures(Le.range(0,yt,Ze/Be,Ct),Le.data,-1,Pe,Be,gt),gt.features.length?gt:null}getClusterExpansionZoom(me){let pe=this._getOriginZoom(me)-1;for(;pe<=this.options.maxZoom;){const Pe=this.getChildren(me);if(pe++,Pe.length!==1)break;me=Pe[0].properties.cluster_id}return pe}_appendLeaves(me,pe,Pe,Le,Be){const He=this.getChildren(pe);for(const nt of He){const Ze=nt.properties;if(Ze&&Ze.cluster?Be+Ze.point_count<=Le?Be+=Ze.point_count:Be=this._appendLeaves(me,Ze.cluster_id,Pe,Le,Be):Be<Le?Be++:me.push(nt),me.length===Pe)break}return Be}_createTree(me){const pe=new w.av(me.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Pe=0;Pe<me.length;Pe+=this.stride)pe.add(me[Pe],me[Pe+1]);return pe.finish(),pe.data=me,pe}_addTileFeatures(me,pe,Pe,Le,Be,He){for(const nt of me){const Ze=nt*this.stride,yt=pe[Ze+Fe]>1;let Ct,gt,Vt;if(yt)Ct=tt(pe,Ze,this.clusterProps),gt=pe[Ze],Vt=pe[Ze+1];else{const Jn=this.points[pe[Ze+he]];Ct=Jn.properties;const[Fn,Qn]=Jn.geometry.coordinates;gt=pt(Fn),Vt=_t(Qn)}const pn={type:1,geometry:[[Math.round(this.options.extent*(gt*Be-Pe)),Math.round(this.options.extent*(Vt*Be-Le))]],tags:Ct};let vn;vn=yt||this.options.generateId?pe[Ze+he]:this.points[pe[Ze+he]].id,vn!==void 0&&(pn.id=vn),He.features.push(pn)}}_limitZoom(me){return Math.max(this.options.minZoom,Math.min(Math.floor(+me),this.options.maxZoom+1))}_cluster(me,pe){const{radius:Pe,extent:Le,reduce:Be,minPoints:He}=this.options,nt=Pe/(Le*Math.pow(2,pe)),Ze=me.data,yt=[],Ct=this.stride;for(let gt=0;gt<Ze.length;gt+=Ct){if(Ze[gt+2]<=pe)continue;Ze[gt+2]=pe;const Vt=Ze[gt],pn=Ze[gt+1],vn=me.within(Ze[gt],Ze[gt+1],nt),Jn=Ze[gt+Fe];let Fn=Jn;for(const Qn of vn){const Un=Qn*Ct;Ze[Un+2]>pe&&(Fn+=Ze[Un+Fe])}if(Fn>Jn&&Fn>=He){let Qn,Un=Vt*Jn,Or=pn*Jn,_r=-1;const Wn=((gt/Ct|0)<<5)+(pe+1)+this.points.length;for(const ur of vn){const br=ur*Ct;if(Ze[br+2]<=pe)continue;Ze[br+2]=pe;const ii=Ze[br+Fe];Un+=Ze[br]*ii,Or+=Ze[br+1]*ii,Ze[br+4]=Wn,Be&&(Qn||(Qn=this._map(Ze,gt,!0),_r=this.clusterProps.length,this.clusterProps.push(Qn)),Be(Qn,this._map(Ze,br)))}Ze[gt+4]=Wn,yt.push(Un/Fn,Or/Fn,1/0,Wn,-1,Fn),Be&&yt.push(_r)}else{for(let Qn=0;Qn<Ct;Qn++)yt.push(Ze[gt+Qn]);if(Fn>1)for(const Qn of vn){const Un=Qn*Ct;if(!(Ze[Un+2]<=pe)){Ze[Un+2]=pe;for(let Or=0;Or<Ct;Or++)yt.push(Ze[Un+Or])}}}}return yt}_getOriginId(me){return me-this.points.length>>5}_getOriginZoom(me){return(me-this.points.length)%32}_map(me,pe,Pe){if(me[pe+Fe]>1){const He=this.clusterProps[me[pe+Oe]];return Pe?Object.assign({},He):He}const Le=this.points[me[pe+he]].properties,Be=this.options.map(Le);return Pe&&Be===Le?Object.assign({},Be):Be}}function Ke(Ue,me,pe){return{type:"Feature",id:Ue[me+he],properties:tt(Ue,me,pe),geometry:{type:"Point",coordinates:[(Pe=Ue[me],360*(Pe-.5)),Tt(Ue[me+1])]}};var Pe}function tt(Ue,me,pe){const Pe=Ue[me+Fe],Le=Pe>=1e4?`${Math.round(Pe/1e3)}k`:Pe>=1e3?Math.round(Pe/100)/10+"k":Pe,Be=Ue[me+Oe],He=Be===-1?{}:Object.assign({},pe[Be]);return Object.assign(He,{cluster:!0,cluster_id:Ue[me+he],point_count:Pe,point_count_abbreviated:Le})}function pt(Ue){return Ue/360+.5}function _t(Ue){const me=Math.sin(Ue*Math.PI/180),pe=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return pe<0?0:pe>1?1:pe}function Tt(Ue){const me=(180-360*Ue)*Math.PI/180;return 360*Math.atan(Math.exp(me))/Math.PI-90}function Lt(Ue,me,pe,Pe){let Le=Pe;const Be=me+(pe-me>>1);let He,nt=pe-me;const Ze=Ue[me],yt=Ue[me+1],Ct=Ue[pe],gt=Ue[pe+1];for(let Vt=me+3;Vt<pe;Vt+=3){const pn=It(Ue[Vt],Ue[Vt+1],Ze,yt,Ct,gt);if(pn>Le)He=Vt,Le=pn;else if(pn===Le){const vn=Math.abs(Vt-Be);vn<nt&&(He=Vt,nt=vn)}}Le>Pe&&(He-me>3&&Lt(Ue,me,He,Pe),Ue[He+2]=Le,pe-He>3&&Lt(Ue,He,pe,Pe))}function It(Ue,me,pe,Pe,Le,Be){let He=Le-pe,nt=Be-Pe;if(He!==0||nt!==0){const Ze=((Ue-pe)*He+(me-Pe)*nt)/(He*He+nt*nt);Ze>1?(pe=Le,Pe=Be):Ze>0&&(pe+=He*Ze,Pe+=nt*Ze)}return He=Ue-pe,nt=me-Pe,He*He+nt*nt}function kt(Ue,me,pe,Pe){const Le={id:Ue??null,type:me,geometry:pe,tags:Pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(me==="Point"||me==="MultiPoint"||me==="LineString")Jt(Le,pe);else if(me==="Polygon")Jt(Le,pe[0]);else if(me==="MultiLineString")for(const Be of pe)Jt(Le,Be);else if(me==="MultiPolygon")for(const Be of pe)Jt(Le,Be[0]);return Le}function Jt(Ue,me){for(let pe=0;pe<me.length;pe+=3)Ue.minX=Math.min(Ue.minX,me[pe]),Ue.minY=Math.min(Ue.minY,me[pe+1]),Ue.maxX=Math.max(Ue.maxX,me[pe]),Ue.maxY=Math.max(Ue.maxY,me[pe+1])}function cn(Ue,me,pe,Pe){if(!me.geometry)return;const Le=me.geometry.coordinates;if(Le&&Le.length===0)return;const Be=me.geometry.type,He=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2);let nt=[],Ze=me.id;if(pe.promoteId?Ze=me.properties[pe.promoteId]:pe.generateId&&(Ze=Pe||0),Be==="Point")Tn(Le,nt);else if(Be==="MultiPoint")for(const yt of Le)Tn(yt,nt);else if(Be==="LineString")at(Le,nt,He,!1);else if(Be==="MultiLineString"){if(pe.lineMetrics){for(const yt of Le)nt=[],at(yt,nt,He,!1),Ue.push(kt(Ze,"LineString",nt,me.properties));return}kn(Le,nt,He,!1)}else if(Be==="Polygon")kn(Le,nt,He,!0);else{if(Be!=="MultiPolygon"){if(Be==="GeometryCollection"){for(const yt of me.geometry.geometries)cn(Ue,{id:Ze,geometry:yt,properties:me.properties},pe,Pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const yt of Le){const Ct=[];kn(yt,Ct,He,!0),nt.push(Ct)}}Ue.push(kt(Ze,Be,nt,me.properties))}function Tn(Ue,me){me.push(hn(Ue[0]),en(Ue[1]),0)}function at(Ue,me,pe,Pe){let Le,Be,He=0;for(let Ze=0;Ze<Ue.length;Ze++){const yt=hn(Ue[Ze][0]),Ct=en(Ue[Ze][1]);me.push(yt,Ct,0),Ze>0&&(He+=Pe?(Le*Ct-yt*Be)/2:Math.sqrt(Math.pow(yt-Le,2)+Math.pow(Ct-Be,2))),Le=yt,Be=Ct}const nt=me.length-3;me[2]=1,Lt(me,0,nt,pe),me[nt+2]=1,me.size=Math.abs(He),me.start=0,me.end=me.size}function kn(Ue,me,pe,Pe){for(let Le=0;Le<Ue.length;Le++){const Be=[];at(Ue[Le],Be,pe,Pe),me.push(Be)}}function hn(Ue){return Ue/360+.5}function en(Ue){const me=Math.sin(Ue*Math.PI/180),pe=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return pe<0?0:pe>1?1:pe}function ze(Ue,me,pe,Pe,Le,Be,He,nt){if(Pe/=me,Be>=(pe/=me)&&He<Pe)return Ue;if(He<pe||Be>=Pe)return null;const Ze=[];for(const yt of Ue){const Ct=yt.geometry;let gt=yt.type;const Vt=Le===0?yt.minX:yt.minY,pn=Le===0?yt.maxX:yt.maxY;if(Vt>=pe&&pn<Pe){Ze.push(yt);continue}if(pn<pe||Vt>=Pe)continue;let vn=[];if(gt==="Point"||gt==="MultiPoint")G(Ct,vn,pe,Pe,Le);else if(gt==="LineString")H(Ct,vn,pe,Pe,Le,!1,nt.lineMetrics);else if(gt==="MultiLineString")rt(Ct,vn,pe,Pe,Le,!1);else if(gt==="Polygon")rt(Ct,vn,pe,Pe,Le,!0);else if(gt==="MultiPolygon")for(const Jn of Ct){const Fn=[];rt(Jn,Fn,pe,Pe,Le,!0),Fn.length&&vn.push(Fn)}if(vn.length){if(nt.lineMetrics&&gt==="LineString"){for(const Jn of vn)Ze.push(kt(yt.id,gt,Jn,yt.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(vn.length===1?(gt="LineString",vn=vn[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=vn.length===3?"Point":"MultiPoint"),Ze.push(kt(yt.id,gt,vn,yt.tags))}}return Ze.length?Ze:null}function G(Ue,me,pe,Pe,Le){for(let Be=0;Be<Ue.length;Be+=3){const He=Ue[Be+Le];He>=pe&&He<=Pe&&ct(me,Ue[Be],Ue[Be+1],Ue[Be+2])}}function H(Ue,me,pe,Pe,Le,Be,He){let nt=Ce(Ue);const Ze=Le===0?Et:ye;let yt,Ct,gt=Ue.start;for(let Fn=0;Fn<Ue.length-3;Fn+=3){const Qn=Ue[Fn],Un=Ue[Fn+1],Or=Ue[Fn+2],_r=Ue[Fn+3],Wn=Ue[Fn+4],ur=Le===0?Qn:Un,br=Le===0?_r:Wn;let ii=!1;He&&(yt=Math.sqrt(Math.pow(Qn-_r,2)+Math.pow(Un-Wn,2))),ur<pe?br>pe&&(Ct=Ze(nt,Qn,Un,_r,Wn,pe),He&&(nt.start=gt+yt*Ct)):ur>Pe?br<Pe&&(Ct=Ze(nt,Qn,Un,_r,Wn,Pe),He&&(nt.start=gt+yt*Ct)):ct(nt,Qn,Un,Or),br<pe&&ur>=pe&&(Ct=Ze(nt,Qn,Un,_r,Wn,pe),ii=!0),br>Pe&&ur<=Pe&&(Ct=Ze(nt,Qn,Un,_r,Wn,Pe),ii=!0),!Be&&ii&&(He&&(nt.end=gt+yt*Ct),me.push(nt),nt=Ce(Ue)),He&&(gt+=yt)}let Vt=Ue.length-3;const pn=Ue[Vt],vn=Ue[Vt+1],Jn=Le===0?pn:vn;Jn>=pe&&Jn<=Pe&&ct(nt,pn,vn,Ue[Vt+2]),Vt=nt.length-3,Be&&Vt>=3&&(nt[Vt]!==nt[0]||nt[Vt+1]!==nt[1])&&ct(nt,nt[0],nt[1],nt[2]),nt.length&&me.push(nt)}function Ce(Ue){const me=[];return me.size=Ue.size,me.start=Ue.start,me.end=Ue.end,me}function rt(Ue,me,pe,Pe,Le,Be){for(const He of Ue)H(He,me,pe,Pe,Le,Be,!1)}function ct(Ue,me,pe,Pe){Ue.push(me,pe,Pe)}function Et(Ue,me,pe,Pe,Le,Be){const He=(Be-me)/(Pe-me);return ct(Ue,Be,pe+(Le-pe)*He,1),He}function ye(Ue,me,pe,Pe,Le,Be){const He=(Be-pe)/(Le-pe);return ct(Ue,me+(Pe-me)*He,Be,1),He}function z(Ue,me){const pe=[];for(let Pe=0;Pe<Ue.length;Pe++){const Le=Ue[Pe],Be=Le.type;let He;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")He=q(Le.geometry,me);else if(Be==="MultiLineString"||Be==="Polygon"){He=[];for(const nt of Le.geometry)He.push(q(nt,me))}else if(Be==="MultiPolygon"){He=[];for(const nt of Le.geometry){const Ze=[];for(const yt of nt)Ze.push(q(yt,me));He.push(Ze)}}pe.push(kt(Le.id,Be,He,Le.tags))}return pe}function q(Ue,me){const pe=[];pe.size=Ue.size,Ue.start!==void 0&&(pe.start=Ue.start,pe.end=Ue.end);for(let Pe=0;Pe<Ue.length;Pe+=3)pe.push(Ue[Pe]+me,Ue[Pe+1],Ue[Pe+2]);return pe}function Re(Ue,me){if(Ue.transformed)return Ue;const pe=1<<Ue.z,Pe=Ue.x,Le=Ue.y;for(const Be of Ue.features){const He=Be.geometry,nt=Be.type;if(Be.geometry=[],nt===1)for(let Ze=0;Ze<He.length;Ze+=2)Be.geometry.push(Je(He[Ze],He[Ze+1],me,pe,Pe,Le));else for(let Ze=0;Ze<He.length;Ze++){const yt=[];for(let Ct=0;Ct<He[Ze].length;Ct+=2)yt.push(Je(He[Ze][Ct],He[Ze][Ct+1],me,pe,Pe,Le));Be.geometry.push(yt)}}return Ue.transformed=!0,Ue}function Je(Ue,me,pe,Pe,Le,Be){return[Math.round(pe*(Ue*Pe-Le)),Math.round(pe*(me*Pe-Be))]}function ft(Ue,me,pe,Pe,Le){const Be=me===Le.maxZoom?0:Le.tolerance/((1<<me)*Le.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:Ue.length,source:null,x:pe,y:Pe,z:me,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const nt of Ue)Qe(He,nt,Be,Le);return He}function Qe(Ue,me,pe,Pe){const Le=me.geometry,Be=me.type,He=[];if(Ue.minX=Math.min(Ue.minX,me.minX),Ue.minY=Math.min(Ue.minY,me.minY),Ue.maxX=Math.max(Ue.maxX,me.maxX),Ue.maxY=Math.max(Ue.maxY,me.maxY),Be==="Point"||Be==="MultiPoint")for(let nt=0;nt<Le.length;nt+=3)He.push(Le[nt],Le[nt+1]),Ue.numPoints++,Ue.numSimplified++;else if(Be==="LineString")Ot(He,Le,Ue,pe,!1,!1);else if(Be==="MultiLineString"||Be==="Polygon")for(let nt=0;nt<Le.length;nt++)Ot(He,Le[nt],Ue,pe,Be==="Polygon",nt===0);else if(Be==="MultiPolygon")for(let nt=0;nt<Le.length;nt++){const Ze=Le[nt];for(let yt=0;yt<Ze.length;yt++)Ot(He,Ze[yt],Ue,pe,!0,yt===0)}if(He.length){let nt=me.tags||null;if(Be==="LineString"&&Pe.lineMetrics){nt={};for(const yt in me.tags)nt[yt]=me.tags[yt];nt.mapbox_clip_start=Le.start/Le.size,nt.mapbox_clip_end=Le.end/Le.size}const Ze={geometry:He,type:Be==="Polygon"||Be==="MultiPolygon"?3:Be==="LineString"||Be==="MultiLineString"?2:1,tags:nt};me.id!==null&&(Ze.id=me.id),Ue.features.push(Ze)}}function Ot(Ue,me,pe,Pe,Le,Be){const He=Pe*Pe;if(Pe>0&&me.size<(Le?He:Pe))return void(pe.numPoints+=me.length/3);const nt=[];for(let Ze=0;Ze<me.length;Ze+=3)(Pe===0||me[Ze+2]>He)&&(pe.numSimplified++,nt.push(me[Ze],me[Ze+1])),pe.numPoints++;Le&&function(Ze,yt){let Ct=0;for(let gt=0,Vt=Ze.length,pn=Vt-2;gt<Vt;pn=gt,gt+=2)Ct+=(Ze[gt]-Ze[pn])*(Ze[gt+1]+Ze[pn+1]);if(Ct>0===yt)for(let gt=0,Vt=Ze.length;gt<Vt/2;gt+=2){const pn=Ze[gt],vn=Ze[gt+1];Ze[gt]=Ze[Vt-2-gt],Ze[gt+1]=Ze[Vt-1-gt],Ze[Vt-2-gt]=pn,Ze[Vt-1-gt]=vn}}(nt,Be),Ue.push(nt)}const Bt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class zn{constructor(me,pe){const Pe=(pe=this.options=function(Be,He){for(const nt in He)Be[nt]=He[nt];return Be}(Object.create(Bt),pe)).debug;if(Pe&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Le=function(Be,He){const nt=[];if(Be.type==="FeatureCollection")for(let Ze=0;Ze<Be.features.length;Ze++)cn(nt,Be.features[Ze],He,Ze);else cn(nt,Be.type==="Feature"?Be:{geometry:Be},He);return nt}(me,pe);this.tiles={},this.tileCoords=[],Pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Le=function(Be,He){const nt=He.buffer/He.extent;let Ze=Be;const yt=ze(Be,1,-1-nt,nt,0,-1,2,He),Ct=ze(Be,1,1-nt,2+nt,0,-1,2,He);return(yt||Ct)&&(Ze=ze(Be,1,-nt,1+nt,0,-1,2,He)||[],yt&&(Ze=z(yt,1).concat(Ze)),Ct&&(Ze=Ze.concat(z(Ct,-1)))),Ze}(Le,pe),Le.length&&this.splitTile(Le,0,0,0),Pe&&(Le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(me,pe,Pe,Le,Be,He,nt){const Ze=[me,pe,Pe,Le],yt=this.options,Ct=yt.debug;for(;Ze.length;){Le=Ze.pop(),Pe=Ze.pop(),pe=Ze.pop(),me=Ze.pop();const gt=1<<pe,Vt=Zn(pe,Pe,Le);let pn=this.tiles[Vt];if(!pn&&(Ct>1&&console.time("creation"),pn=this.tiles[Vt]=ft(me,pe,Pe,Le,yt),this.tileCoords.push({z:pe,x:Pe,y:Le}),Ct)){Ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,Pe,Le,pn.numFeatures,pn.numPoints,pn.numSimplified),console.timeEnd("creation"));const ii=`z${pe}`;this.stats[ii]=(this.stats[ii]||0)+1,this.total++}if(pn.source=me,Be==null){if(pe===yt.indexMaxZoom||pn.numPoints<=yt.indexMaxPoints)continue}else{if(pe===yt.maxZoom||pe===Be)continue;if(Be!=null){const ii=Be-pe;if(Pe!==He>>ii||Le!==nt>>ii)continue}}if(pn.source=null,me.length===0)continue;Ct>1&&console.time("clipping");const vn=.5*yt.buffer/yt.extent,Jn=.5-vn,Fn=.5+vn,Qn=1+vn;let Un=null,Or=null,_r=null,Wn=null,ur=ze(me,gt,Pe-vn,Pe+Fn,0,pn.minX,pn.maxX,yt),br=ze(me,gt,Pe+Jn,Pe+Qn,0,pn.minX,pn.maxX,yt);me=null,ur&&(Un=ze(ur,gt,Le-vn,Le+Fn,1,pn.minY,pn.maxY,yt),Or=ze(ur,gt,Le+Jn,Le+Qn,1,pn.minY,pn.maxY,yt),ur=null),br&&(_r=ze(br,gt,Le-vn,Le+Fn,1,pn.minY,pn.maxY,yt),Wn=ze(br,gt,Le+Jn,Le+Qn,1,pn.minY,pn.maxY,yt),br=null),Ct>1&&console.timeEnd("clipping"),Ze.push(Un||[],pe+1,2*Pe,2*Le),Ze.push(Or||[],pe+1,2*Pe,2*Le+1),Ze.push(_r||[],pe+1,2*Pe+1,2*Le),Ze.push(Wn||[],pe+1,2*Pe+1,2*Le+1)}}getTile(me,pe,Pe){me=+me,pe=+pe,Pe=+Pe;const Le=this.options,{extent:Be,debug:He}=Le;if(me<0||me>24)return null;const nt=1<<me,Ze=Zn(me,pe=pe+nt&nt-1,Pe);if(this.tiles[Ze])return Re(this.tiles[Ze],Be);He>1&&console.log("drilling down to z%d-%d-%d",me,pe,Pe);let yt,Ct=me,gt=pe,Vt=Pe;for(;!yt&&Ct>0;)Ct--,gt>>=1,Vt>>=1,yt=this.tiles[Zn(Ct,gt,Vt)];return yt&&yt.source?(He>1&&(console.log("found parent tile z%d-%d-%d",Ct,gt,Vt),console.time("drilling down")),this.splitTile(yt.source,Ct,gt,Vt,me,pe,Pe),He>1&&console.timeEnd("drilling down"),this.tiles[Ze]?Re(this.tiles[Ze],Be):null):null}}function Zn(Ue,me,pe){return 32*((1<<Ue)*pe+me)+Ue}function Xt(Ue,me){return me?Ue.properties[me]:Ue.id}function Fr(Ue,me){if(Ue==null)return!0;if(Ue.type==="Feature")return Xt(Ue,me)!=null;if(Ue.type==="FeatureCollection"){const pe=new Set;for(const Pe of Ue.features){const Le=Xt(Pe,me);if(Le==null||pe.has(Le))return!1;pe.add(Le)}return!0}return!1}function Kr(Ue,me){const pe=new Map;if(Ue!=null)if(Ue.type==="Feature")pe.set(Xt(Ue,me),Ue);else for(const Pe of Ue.features)pe.set(Xt(Pe,me),Pe);return pe}class Yr extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(me,pe){return w._(this,void 0,void 0,function*(){const Pe=me.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Le=this._geoJSONIndex.getTile(Pe.z,Pe.x,Pe.y);if(!Le)return null;const Be=new class{constructor(nt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=w.X,this.length=nt.length,this._features=nt}feature(nt){return new class{constructor(Ze){this._feature=Ze,this.extent=w.X,this.type=Ze.type,this.properties=Ze.tags,"id"in Ze&&!isNaN(Ze.id)&&(this.id=parseInt(Ze.id,10))}loadGeometry(){if(this._feature.type===1){const Ze=[];for(const yt of this._feature.geometry)Ze.push([new w.P(yt[0],yt[1])]);return Ze}{const Ze=[];for(const yt of this._feature.geometry){const Ct=[];for(const gt of yt)Ct.push(new w.P(gt[0],gt[1]));Ze.push(Ct)}return Ze}}toGeoJSON(Ze,yt,Ct){return ce.call(this,Ze,yt,Ct)}}(this._features[nt])}}(Le.features);let He=te(Be);return He.byteOffset===0&&He.byteLength===He.buffer.byteLength||(He=new Uint8Array(He)),{vectorTile:Be,rawData:He.buffer}})}loadData(me){return w._(this,void 0,void 0,function*(){var pe;(pe=this._pendingRequest)===null||pe===void 0||pe.abort();const Pe=!!(me&&me.request&&me.request.collectResourceTiming)&&new w.bv(me.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(me,this._pendingRequest),this._geoJSONIndex=me.cluster?new De(function({superclusterOptions:He,clusterProperties:nt}){if(!nt||!He)return He;const Ze={},yt={},Ct={accumulated:null,zoom:0},gt={properties:null},Vt=Object.keys(nt);for(const pn of Vt){const[vn,Jn]=nt[pn],Fn=w.bC(Jn),Qn=w.bC(typeof vn=="string"?[vn,["accumulated"],["get",pn]]:vn);Ze[pn]=Fn.value,yt[pn]=Qn.value}return He.map=pn=>{gt.properties=pn;const vn={};for(const Jn of Vt)vn[Jn]=Ze[Jn].evaluate(Ct,gt);return vn},He.reduce=(pn,vn)=>{gt.properties=vn;for(const Jn of Vt)Ct.accumulated=pn[Jn],pn[Jn]=yt[Jn].evaluate(Ct,gt)},He}(me)).load((yield this._pendingData).features):(Le=yield this._pendingData,new zn(Le,me.geojsonVtOptions)),this.loaded={};const Be={};if(Pe){const He=Pe.finish();He&&(Be.resourceTiming={},Be.resourceTiming[me.source]=JSON.parse(JSON.stringify(He)))}return Be}catch(Be){if(delete this._pendingRequest,w.bB(Be))return{abandoned:!0};throw Be}var Le})}getData(){return w._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(me){const pe=this.loaded;return pe&&pe[me.uid]?super.reloadTile(me):this.loadTile(me)}loadAndProcessGeoJSON(me,pe){return w._(this,void 0,void 0,function*(){let Pe=yield this.loadGeoJSON(me,pe);if(delete this._pendingRequest,typeof Pe!="object")throw new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`);if(Q(Pe,!0),me.filter){const Le=w.bC(me.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Le.result==="error")throw new Error(Le.value.map(He=>`${He.key}: ${He.message}`).join(", "));Pe={type:"FeatureCollection",features:Pe.features.filter(He=>Le.value.evaluate({zoom:0},He))}}return Pe})}loadGeoJSON(me,pe){return w._(this,void 0,void 0,function*(){const{promoteId:Pe}=me;if(me.request){const Le=yield w.h(me.request,pe);return this._dataUpdateable=Fr(Le.data,Pe)?Kr(Le.data,Pe):void 0,Le.data}if(typeof me.data=="string")try{const Le=JSON.parse(me.data);return this._dataUpdateable=Fr(Le,Pe)?Kr(Le,Pe):void 0,Le}catch{throw new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`)}if(!me.dataDiff)throw new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${me.source}`);return function(Le,Be,He){var nt,Ze,yt,Ct;if(Be.removeAll&&Le.clear(),Be.remove)for(const gt of Be.remove)Le.delete(gt);if(Be.add)for(const gt of Be.add){const Vt=Xt(gt,He);Vt!=null&&Le.set(Vt,gt)}if(Be.update)for(const gt of Be.update){let Vt=Le.get(gt.id);if(Vt==null)continue;const pn=!gt.removeAllProperties&&(((nt=gt.removeProperties)===null||nt===void 0?void 0:nt.length)>0||((Ze=gt.addOrUpdateProperties)===null||Ze===void 0?void 0:Ze.length)>0);if((gt.newGeometry||gt.removeAllProperties||pn)&&(Vt=Object.assign({},Vt),Le.set(gt.id,Vt),pn&&(Vt.properties=Object.assign({},Vt.properties))),gt.newGeometry&&(Vt.geometry=gt.newGeometry),gt.removeAllProperties)Vt.properties={};else if(((yt=gt.removeProperties)===null||yt===void 0?void 0:yt.length)>0)for(const vn of gt.removeProperties)Object.prototype.hasOwnProperty.call(Vt.properties,vn)&&delete Vt.properties[vn];if(((Ct=gt.addOrUpdateProperties)===null||Ct===void 0?void 0:Ct.length)>0)for(const{key:vn,value:Jn}of gt.addOrUpdateProperties)Vt.properties[vn]=Jn}}(this._dataUpdateable,me.dataDiff,Pe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(me){return w._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(me){return this._geoJSONIndex.getClusterExpansionZoom(me.clusterId)}getClusterChildren(me){return this._geoJSONIndex.getChildren(me.clusterId)}getClusterLeaves(me){return this._geoJSONIndex.getLeaves(me.clusterId,me.limit,me.offset)}}class Cr{constructor(me){this.self=me,this.actor=new w.F(me),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(pe,Pe)=>{if(this.externalWorkerSourceTypes[pe])throw new Error(`Worker source with name "${pe}" already registered.`);this.externalWorkerSourceTypes[pe]=Pe},this.self.addProtocol=w.bi,this.self.removeProtocol=w.bj,this.self.registerRTLTextPlugin=pe=>{if(w.bD.isParsed())throw new Error("RTL text plugin already registered.");w.bD.setMethods(pe)},this.actor.registerMessageHandler("LDT",(pe,Pe)=>this._getDEMWorkerSource(pe,Pe.source).loadTile(Pe)),this.actor.registerMessageHandler("RDT",(pe,Pe)=>w._(this,void 0,void 0,function*(){this._getDEMWorkerSource(pe,Pe.source).removeTile(Pe)})),this.actor.registerMessageHandler("GCEZ",(pe,Pe)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Pe.type,Pe.source).getClusterExpansionZoom(Pe)})),this.actor.registerMessageHandler("GCC",(pe,Pe)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Pe.type,Pe.source).getClusterChildren(Pe)})),this.actor.registerMessageHandler("GCL",(pe,Pe)=>w._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Pe.type,Pe.source).getClusterLeaves(Pe)})),this.actor.registerMessageHandler("LD",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).loadData(Pe)),this.actor.registerMessageHandler("GD",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).getData()),this.actor.registerMessageHandler("LT",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).loadTile(Pe)),this.actor.registerMessageHandler("RT",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).reloadTile(Pe)),this.actor.registerMessageHandler("AT",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).abortTile(Pe)),this.actor.registerMessageHandler("RMT",(pe,Pe)=>this._getWorkerSource(pe,Pe.type,Pe.source).removeTile(Pe)),this.actor.registerMessageHandler("RS",(pe,Pe)=>w._(this,void 0,void 0,function*(){if(!this.workerSources[pe]||!this.workerSources[pe][Pe.type]||!this.workerSources[pe][Pe.type][Pe.source])return;const Le=this.workerSources[pe][Pe.type][Pe.source];delete this.workerSources[pe][Pe.type][Pe.source],Le.removeSource!==void 0&&Le.removeSource(Pe)})),this.actor.registerMessageHandler("RM",pe=>w._(this,void 0,void 0,function*(){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe]})),this.actor.registerMessageHandler("SR",(pe,Pe)=>w._(this,void 0,void 0,function*(){this.referrer=Pe})),this.actor.registerMessageHandler("SRPS",(pe,Pe)=>this._syncRTLPluginState(pe,Pe)),this.actor.registerMessageHandler("IS",(pe,Pe)=>w._(this,void 0,void 0,function*(){this.self.importScripts(Pe)})),this.actor.registerMessageHandler("SI",(pe,Pe)=>this._setImages(pe,Pe)),this.actor.registerMessageHandler("UL",(pe,Pe)=>w._(this,void 0,void 0,function*(){this._getLayerIndex(pe).update(Pe.layers,Pe.removedIds)})),this.actor.registerMessageHandler("SL",(pe,Pe)=>w._(this,void 0,void 0,function*(){this._getLayerIndex(pe).replace(Pe)}))}_setImages(me,pe){return w._(this,void 0,void 0,function*(){this.availableImages[me]=pe;for(const Pe in this.workerSources[me]){const Le=this.workerSources[me][Pe];for(const Be in Le)Le[Be].availableImages=pe}})}_syncRTLPluginState(me,pe){return w._(this,void 0,void 0,function*(){if(w.bD.isParsed())return w.bD.getState();if(pe.pluginStatus!=="loading")return w.bD.setState(pe),pe;const Pe=pe.pluginURL;if(this.self.importScripts(Pe),w.bD.isParsed()){const Le={pluginStatus:"loaded",pluginURL:Pe};return w.bD.setState(Le),Le}throw w.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Pe}`)})}_getAvailableImages(me){let pe=this.availableImages[me];return pe||(pe=[]),pe}_getLayerIndex(me){let pe=this.layerIndexes[me];return pe||(pe=this.layerIndexes[me]=new a),pe}_getWorkerSource(me,pe,Pe){if(this.workerSources[me]||(this.workerSources[me]={}),this.workerSources[me][pe]||(this.workerSources[me][pe]={}),!this.workerSources[me][pe][Pe]){const Le={sendAsync:(Be,He)=>(Be.targetMapId=me,this.actor.sendAsync(Be,He))};switch(pe){case"vector":this.workerSources[me][pe][Pe]=new C(Le,this._getLayerIndex(me),this._getAvailableImages(me));break;case"geojson":this.workerSources[me][pe][Pe]=new Yr(Le,this._getLayerIndex(me),this._getAvailableImages(me));break;default:this.workerSources[me][pe][Pe]=new this.externalWorkerSourceTypes[pe](Le,this._getLayerIndex(me),this._getAvailableImages(me))}}return this.workerSources[me][pe][Pe]}_getDEMWorkerSource(me,pe){return this.demWorkerSources[me]||(this.demWorkerSources[me]={}),this.demWorkerSources[me][pe]||(this.demWorkerSources[me][pe]=new k),this.demWorkerSources[me][pe]}}return w.i(self)&&(self.worker=new Cr(self)),Cr}),x("index",["exports","./shared"],function(w,a){var L="4.7.1";let R,D;const C={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((e,o)=>{const h=requestAnimationFrame(e);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(h),o(a.c())})}),getImageData(y,e=0){return this.getImageCanvasContext(y).getImageData(-e,-e,y.width+2*e,y.height+2*e)},getImageCanvasContext(y){const e=window.document.createElement("canvas"),o=e.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return e.width=y.width,e.height=y.height,o.drawImage(y,0,0,y.width,y.height),o},resolveURL:y=>(R||(R=document.createElement("a")),R.href=y,R.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(D==null&&(D=matchMedia("(prefers-reduced-motion: reduce)")),D.matches)}};class k{static testProp(e){if(!k.docStyle)return e[0];for(let o=0;o<e.length;o++)if(e[o]in k.docStyle)return e[o];return e[0]}static create(e,o,h){const d=window.document.createElement(e);return o!==void 0&&(d.className=o),h&&h.appendChild(d),d}static createNS(e,o){return window.document.createElementNS(e,o)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(e,o){e.style[k.transformProp]=o}static addEventListener(e,o,h,d={}){e.addEventListener(o,h,"passive"in d?d:d.capture)}static removeEventListener(e,o,h,d={}){e.removeEventListener(o,h,"passive"in d?d:d.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static getScale(e){const o=e.getBoundingClientRect();return{x:o.width/e.offsetWidth||1,y:o.height/e.offsetHeight||1,boundingClientRect:o}}static getPoint(e,o,h){const d=o.boundingClientRect;return new a.P((h.clientX-d.left)/o.x-e.clientLeft,(h.clientY-d.top)/o.y-e.clientTop)}static mousePos(e,o){const h=k.getScale(e);return k.getPoint(e,h,o)}static touchPos(e,o){const h=[],d=k.getScale(e);for(let g=0;g<o.length;g++)h.push(k.getPoint(e,d,o[g]));return h}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}k.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);const V={supported:!1,testSupport:function(y){!ce&&Q&&(Te?xe(y):N=y)}};let N,Q,ce=!1,Te=!1;function xe(y){const e=y.createTexture();y.bindTexture(y.TEXTURE_2D,e);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,Q),y.isContextLost())return;V.supported=!0}catch{}y.deleteTexture(e),ce=!0}var ve;typeof document<"u"&&(Q=document.createElement("img"),Q.onload=()=>{N&&xe(N),N=null,Te=!0},Q.onerror=()=>{ce=!0,N=null},Q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let e,o,h,d;y.resetRequestQueue=()=>{e=[],o=0,h=0,d={}},y.addThrottleControl=O=>{const X=h++;return d[X]=O,X},y.removeThrottleControl=O=>{delete d[O],I()},y.getImage=(O,X,se=!0)=>new Promise((ae,we)=>{V.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),a.e(O,{type:"image"}),e.push({abortController:X,requestParameters:O,supportImageRefresh:se,state:"queued",onError:Ae=>{we(Ae)},onSuccess:Ae=>{ae(Ae)}}),I()});const g=O=>a._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:X,supportImageRefresh:se,onError:ae,onSuccess:we,abortController:Ae}=O,je=se===!1&&!a.i(self)&&!a.g(X.url)&&(!X.headers||Object.keys(X.headers).reduce((qe,et)=>qe&&et==="accept",!0));o++;const Ne=je?A(X,Ae):a.m(X,Ae);try{const qe=yield Ne;delete O.abortController,O.state="completed",qe.data instanceof HTMLImageElement||a.b(qe.data)?we(qe):qe.data&&we({data:yield($e=qe.data,typeof createImageBitmap=="function"?a.d($e):a.f($e)),cacheControl:qe.cacheControl,expires:qe.expires})}catch(qe){delete O.abortController,ae(qe)}finally{o--,I()}var $e}),I=()=>{const O=(()=>{for(const X of Object.keys(d))if(d[X]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let X=o;X<O&&e.length>0;X++){const se=e.shift();se.abortController.signal.aborted?X--:g(se)}},A=(O,X)=>new Promise((se,ae)=>{const we=new Image,Ae=O.url,je=O.credentials;je&&je==="include"?we.crossOrigin="use-credentials":(je&&je==="same-origin"||!a.s(Ae))&&(we.crossOrigin="anonymous"),X.signal.addEventListener("abort",()=>{we.src="",ae(a.c())}),we.fetchPriority="high",we.onload=()=>{we.onerror=we.onload=null,se({data:we})},we.onerror=()=>{we.onerror=we.onload=null,X.signal.aborted||ae(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},we.src=Ae})}(ve||(ve={})),ve.resetRequestQueue();class Me{constructor(e){this._transformRequestFn=e}transformRequest(e,o){return this._transformRequestFn&&this._transformRequestFn(e,o)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function ne(y){var e=new a.A(3);return e[0]=y[0],e[1]=y[1],e[2]=y[2],e}var ue,M=function(y,e,o){return y[0]=e[0]-o[0],y[1]=e[1]-o[1],y[2]=e[2]-o[2],y};ue=new a.A(3),a.A!=Float32Array&&(ue[0]=0,ue[1]=0,ue[2]=0);var $=function(y){var e=y[0],o=y[1];return e*e+o*o};function U(y){const e=[];if(typeof y=="string")e.push({id:"default",url:y});else if(y&&y.length>0){const o=[];for(const{id:h,url:d}of y){const g=`${h}${d}`;o.indexOf(g)===-1&&(o.push(g),e.push({id:h,url:d}))}}return e}function de(y,e,o){const h=y.split("?");return h[0]+=`${e}${o}`,h.join("?")}(function(){var y=new a.A(2);a.A!=Float32Array&&(y[0]=0,y[1]=0)})();class K{constructor(e,o,h,d){this.context=e,this.format=h,this.texture=e.gl.createTexture(),this.update(o,d)}update(e,o,h){const{width:d,height:g}=e,I=!(this.size&&this.size[0]===d&&this.size[1]===g||h),{context:A}=this,{gl:O}=A;if(this.useMipmap=!!(o&&o.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!o||o.premultiply!==!1)),I)this.size=[d,g],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||a.b(e)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,e):O.texImage2D(O.TEXTURE_2D,0,this.format,d,g,0,this.format,O.UNSIGNED_BYTE,e.data);else{const{x:X,y:se}=h||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||a.b(e)?O.texSubImage2D(O.TEXTURE_2D,0,X,se,O.RGBA,O.UNSIGNED_BYTE,e):O.texSubImage2D(O.TEXTURE_2D,0,X,se,d,g,O.RGBA,O.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(e,o,h){const{context:d}=this,{gl:g}=d;g.bindTexture(g.TEXTURE_2D,this.texture),h!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=g.LINEAR),e!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,e),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,h||e),this.filter=e),o!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function j(y){const{userImage:e}=y;return!!(e&&e.render&&e.render())&&(y.data.replace(new Uint8Array(e.data.buffer)),!0)}class W extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:o,promiseResolve:h}of this.requestors)h(this._getImagesForIds(o));this.requestors=[]}}getImage(e){const o=this.images[e];if(o&&!o.data&&o.spriteData){const h=o.spriteData;o.data=new a.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),o.spriteData=null}return o}addImage(e,o){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,o)&&(this.images[e]=o)}_validate(e,o){let h=!0;const d=o.data||o.spriteData;return this._validateStretch(o.stretchX,d&&d.width)||(this.fire(new a.j(new Error(`Image "${e}" has invalid "stretchX" value`))),h=!1),this._validateStretch(o.stretchY,d&&d.height)||(this.fire(new a.j(new Error(`Image "${e}" has invalid "stretchY" value`))),h=!1),this._validateContent(o.content,o)||(this.fire(new a.j(new Error(`Image "${e}" has invalid "content" value`))),h=!1),h}_validateStretch(e,o){if(!e)return!0;let h=0;for(const d of e){if(d[0]<h||d[1]<d[0]||o<d[1])return!1;h=d[1]}return!0}_validateContent(e,o){if(!e)return!0;if(e.length!==4)return!1;const h=o.spriteData,d=h&&h.width||o.data.width,g=h&&h.height||o.data.height;return!(e[0]<0||d<e[0]||e[1]<0||g<e[1]||e[2]<0||d<e[2]||e[3]<0||g<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,o,h=!0){const d=this.getImage(e);if(h&&(d.data.width!==o.data.width||d.data.height!==o.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=d.version+1,this.images[e]=o,this.updatedImages[e]=!0}removeImage(e){const o=this.images[e];delete this.images[e],delete this.patterns[e],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((o,h)=>{let d=!0;if(!this.isLoaded())for(const g of e)this.images[g]||(d=!1);this.isLoaded()||d?o(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:o})})}_getImagesForIds(e){const o={};for(const h of e){let d=this.getImage(h);d||(this.fire(new a.k("styleimagemissing",{id:h})),d=this.getImage(h)),d?o[h]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:a.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:e,height:o}=this.atlasImage;return{width:e,height:o}}getPattern(e){const o=this.patterns[e],h=this.getImage(e);if(!h)return null;if(o&&o.position.version===h.version)return o.position;if(o)o.position.version=h.version;else{const d={w:h.data.width+2,h:h.data.height+2,x:0,y:0},g=new a.I(d,h);this.patterns[e]={bin:d,position:g}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const o=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new K(e,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const g in this.patterns)e.push(this.patterns[g].bin);const{w:o,h}=a.p(e),d=this.atlasImage;d.resize({width:o||1,height:h||1});for(const g in this.patterns){const{bin:I}=this.patterns[g],A=I.x+1,O=I.y+1,X=this.getImage(g).data,se=X.width,ae=X.height;a.R.copy(X,d,{x:0,y:0},{x:A,y:O},{width:se,height:ae}),a.R.copy(X,d,{x:0,y:ae-1},{x:A,y:O-1},{width:se,height:1}),a.R.copy(X,d,{x:0,y:0},{x:A,y:O+ae},{width:se,height:1}),a.R.copy(X,d,{x:se-1,y:0},{x:A-1,y:O},{width:1,height:ae}),a.R.copy(X,d,{x:0,y:0},{x:A+se,y:O},{width:1,height:ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const o of e){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const h=this.getImage(o);h||a.w(`Image with ID: "${o}" was not found`),j(h)&&this.updateImage(o,h)}}}const J=1e20;function re(y,e,o,h,d,g,I,A,O){for(let X=e;X<e+h;X++)le(y,o*g+X,g,d,I,A,O);for(let X=o;X<o+d;X++)le(y,X*g+e,1,h,I,A,O)}function le(y,e,o,h,d,g,I){g[0]=0,I[0]=-J,I[1]=J,d[0]=y[e];for(let A=1,O=0,X=0;A<h;A++){d[A]=y[e+A*o];const se=A*A;do{const ae=g[O];X=(d[A]-d[ae]+se-ae*ae)/(A-ae)/2}while(X<=I[O]&&--O>-1);O++,g[O]=A,I[O]=X,I[O+1]=J}for(let A=0,O=0;A<h;A++){for(;I[O+1]<A;)O++;const X=g[O],se=A-X;y[e+A*o]=d[X]+se*se}}class te{constructor(e,o){this.requestManager=e,this.localIdeographFontFamily=o,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return a._(this,void 0,void 0,function*(){const o=[];for(const g in e)for(const I of e[g])o.push(this._getAndCacheGlyphsPromise(g,I));const h=yield Promise.all(o),d={};for(const{stack:g,id:I,glyph:A}of h)d[g]||(d[g]={}),d[g][I]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return d})}_getAndCacheGlyphsPromise(e,o){return a._(this,void 0,void 0,function*(){let h=this.entries[e];h||(h=this.entries[e]={glyphs:{},requests:{},ranges:{}});let d=h.glyphs[o];if(d!==void 0)return{stack:e,id:o,glyph:d};if(d=this._tinySDF(h,e,o),d)return h.glyphs[o]=d,{stack:e,id:o,glyph:d};const g=Math.floor(o/256);if(256*g>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[g])return{stack:e,id:o,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[g]){const A=te.loadGlyphRange(e,g,this.url,this.requestManager);h.requests[g]=A}const I=yield h.requests[g];for(const A in I)this._doesCharSupportLocalGlyph(+A)||(h.glyphs[+A]=I[+A]);return h.ranges[g]=!0,{stack:e,id:o,glyph:I[o]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,o,h){const d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(h))return;let g=e.tinySDF;if(!g){let A="400";/bold/i.test(o)?A="900":/medium/i.test(o)?A="500":/light/i.test(o)&&(A="200"),g=e.tinySDF=new te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:A})}const I=g.draw(String.fromCharCode(h));return{id:h,bitmap:new a.o({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}te.loadGlyphRange=function(y,e,o,h){return a._(this,void 0,void 0,function*(){const d=256*e,g=d+255,I=h.transformRequest(o.replace("{fontstack}",y).replace("{range}",`${d}-${g}`),"Glyphs"),A=yield a.l(I,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${e}, ${d}-${g}`);const O={};for(const X of a.n(A.data))O[X.id]=X;return O})},te.TinySDF=class{constructor({fontSize:y=24,buffer:e=3,radius:o=8,cutoff:h=.25,fontFamily:d="sans-serif",fontWeight:g="normal",fontStyle:I="normal"}={}){this.buffer=e,this.cutoff=h,this.radius=o;const A=this.size=y+4*e,O=this._createCanvas(A),X=this.ctx=O.getContext("2d",{willReadFrequently:!0});X.font=`${I} ${g} ${y}px ${d}`,X.textBaseline="alphabetic",X.textAlign="left",X.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(y){const e=document.createElement("canvas");return e.width=e.height=y,e}draw(y){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:h,actualBoundingBoxLeft:d,actualBoundingBoxRight:g}=this.ctx.measureText(y),I=Math.ceil(o),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-d))),O=Math.min(this.size-this.buffer,I+Math.ceil(h)),X=A+2*this.buffer,se=O+2*this.buffer,ae=Math.max(X*se,0),we=new Uint8ClampedArray(ae),Ae={data:we,width:X,height:se,glyphWidth:A,glyphHeight:O,glyphTop:I,glyphLeft:0,glyphAdvance:e};if(A===0||O===0)return Ae;const{ctx:je,buffer:Ne,gridInner:$e,gridOuter:qe}=this;je.clearRect(Ne,Ne,A,O),je.fillText(y,Ne,Ne+I);const et=je.getImageData(Ne,Ne,A,O);qe.fill(J,0,ae),$e.fill(0,0,ae);for(let Ve=0;Ve<O;Ve++)for(let st=0;st<A;st++){const ut=et.data[4*(Ve*A+st)+3]/255;if(ut===0)continue;const mt=(Ve+Ne)*X+st+Ne;if(ut===1)qe[mt]=0,$e[mt]=J;else{const At=.5-ut;qe[mt]=At>0?At*At:0,$e[mt]=At<0?At*At:0}}re(qe,0,0,X,se,X,this.f,this.v,this.z),re($e,Ne,Ne,A,O,X,this.f,this.v,this.z);for(let Ve=0;Ve<ae;Ve++){const st=Math.sqrt(qe[Ve])-Math.sqrt($e[Ve]);we[Ve]=Math.round(255-255*(st/this.radius+this.cutoff))}return Ae}};class oe{constructor(){this.specification=a.v.light.position}possiblyEvaluate(e,o){return a.x(e.expression.evaluate(o))}interpolate(e,o,h){return{x:a.y.number(e.x,o.x,h),y:a.y.number(e.y,o.y,h),z:a.y.number(e.z,o.z,h)}}}let _e;class be extends a.E{constructor(e){super(),_e=_e||new a.q({anchor:new a.D(a.v.light.anchor),position:new oe,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(_e),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,o={}){if(!this._validate(a.r,e,o))for(const h in e){const d=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),d):this._transitionable.setValue(h,d)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,h){return(!h||h.validate!==!1)&&a.t(this,e.call(a.u,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const he=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Fe extends a.E{constructor(e){super(),this._transitionable=new a.T(he),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(e,o={}){if(!this._validate(a.B,e,o)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const h in e){const d=e[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),d):this._transitionable.setValue(h,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,h={}){return(h==null?void 0:h.validate)!==!1&&a.t(this,e.call(a.u,a.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class Oe{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,o){const h=e.join(",")+String(o);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(e,o)),this.dashEntry[h]}getDashRanges(e,o,h){const d=[];let g=e.length%2==1?-e[e.length-1]*h:0,I=e[0]*h,A=!0;d.push({left:g,right:I,isDash:A,zeroLength:e[0]===0});let O=e[0];for(let X=1;X<e.length;X++){A=!A;const se=e[X];g=O*h,O+=se,I=O*h,d.push({left:g,right:I,isDash:A,zeroLength:se===0})}return d}addRoundDash(e,o,h){const d=o/2;for(let g=-h;g<=h;g++){const I=this.width*(this.nextRow+h+g);let A=0,O=e[A];for(let X=0;X<this.width;X++){X/O.right>1&&(O=e[++A]);const se=Math.abs(X-O.left),ae=Math.abs(X-O.right),we=Math.min(se,ae);let Ae;const je=g/h*(d+1);if(O.isDash){const Ne=d-Math.abs(je);Ae=Math.sqrt(we*we+Ne*Ne)}else Ae=d-Math.sqrt(we*we+je*je);this.data[I+X]=Math.max(0,Math.min(255,Ae+128))}}}addRegularDash(e){for(let A=e.length-1;A>=0;--A){const O=e[A],X=e[A+1];O.zeroLength?e.splice(A,1):X&&X.isDash===O.isDash&&(X.left=O.left,e.splice(A,1))}const o=e[0],h=e[e.length-1];o.isDash===h.isDash&&(o.left=h.left-this.width,h.right=o.right+this.width);const d=this.width*this.nextRow;let g=0,I=e[g];for(let A=0;A<this.width;A++){A/I.right>1&&(I=e[++g]);const O=Math.abs(A-I.left),X=Math.abs(A-I.right),se=Math.min(O,X);this.data[d+A]=Math.max(0,Math.min(255,(I.isDash?se:-se)+128))}}addDash(e,o){const h=o?7:0,d=2*h+1;if(this.nextRow+d>this.height)return a.w("LineAtlas out of space"),null;let g=0;for(let A=0;A<e.length;A++)g+=e[A];if(g!==0){const A=this.width/g,O=this.getDashRanges(e,this.width,A);o?this.addRoundDash(O,A,h):this.addRegularDash(O)}const I={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:g};return this.nextRow+=d,this.dirty=!0,I}bind(e){const o=e.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const De="maplibre_preloaded_worker_pool";class Ke{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Ke.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[De]}numActive(){return Object.keys(this.active).length}}const tt=Math.floor(C.hardwareConcurrency/2);let pt,_t;function Tt(){return pt||(pt=new Ke),pt}Ke.workerCount=a.C(globalThis)?Math.max(Math.min(tt,3),1):1;class Lt{constructor(e,o){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=o;const h=this.workerPool.acquire(o);for(let d=0;d<h.length;d++){const g=new a.F(h[d],o);g.name=`Worker ${d}`,this.actors.push(g)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,o){const h=[];for(const d of this.actors)h.push(d.sendAsync({type:e,data:o}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,o){for(const h of this.actors)h.registerMessageHandler(e,o)}}function It(){return _t||(_t=new Lt(Tt(),a.G),_t.registerMessageHandler("GR",(y,e,o)=>a.m(e,o))),_t}function kt(y,e){const o=a.H();return a.J(o,o,[1,1,0]),a.K(o,o,[.5*y.width,.5*y.height,1]),a.L(o,o,y.calculatePosMatrix(e.toUnwrapped()))}function Jt(y,e,o,h,d,g){const I=function(ae,we,Ae){if(ae)for(const je of ae){const Ne=we[je];if(Ne&&Ne.source===Ae&&Ne.type==="fill-extrusion")return!0}else for(const je in we){const Ne=we[je];if(Ne.source===Ae&&Ne.type==="fill-extrusion")return!0}return!1}(d&&d.layers,e,y.id),A=g.maxPitchScaleFactor(),O=y.tilesIn(h,A,I);O.sort(cn);const X=[];for(const ae of O)X.push({wrappedTileID:ae.tileID.wrapped().key,queryResults:ae.tile.queryRenderedFeatures(e,o,y._state,ae.queryGeometry,ae.cameraQueryGeometry,ae.scale,d,g,A,kt(y.transform,ae.tileID))});const se=function(ae){const we={},Ae={};for(const je of ae){const Ne=je.queryResults,$e=je.wrappedTileID,qe=Ae[$e]=Ae[$e]||{};for(const et in Ne){const Ve=Ne[et],st=qe[et]=qe[et]||{},ut=we[et]=we[et]||[];for(const mt of Ve)st[mt.featureIndex]||(st[mt.featureIndex]=!0,ut.push(mt))}}return we}(X);for(const ae in se)se[ae].forEach(we=>{const Ae=we.feature,je=y.getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=je});return se}function cn(y,e){const o=y.tileID,h=e.tileID;return o.overscaledZ-h.overscaledZ||o.canonical.y-h.canonical.y||o.wrap-h.wrap||o.canonical.x-h.canonical.x}function Tn(y,e,o){return a._(this,void 0,void 0,function*(){let h=y;if(y.url?h=(yield a.h(e.transformRequest(y.url,"Source"),o)).data:yield C.frameAsync(o),!h)return null;const d=a.M(a.e(h,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(d.vectorLayerIds=h.vector_layers.map(g=>g.id)),d})}class at{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof a.N?new a.N(e.lng,e.lat):a.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof a.N?new a.N(e.lng,e.lat):a.N.convert(e),this}extend(e){const o=this._sw,h=this._ne;let d,g;if(e instanceof a.N)d=e,g=e;else{if(!(e instanceof at))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(at.convert(e)):this.extend(a.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(a.N.convert(e)):this;if(d=e._sw,g=e._ne,!d||!g)return this}return o||h?(o.lng=Math.min(d.lng,o.lng),o.lat=Math.min(d.lat,o.lat),h.lng=Math.max(g.lng,h.lng),h.lat=Math.max(g.lat,h.lat)):(this._sw=new a.N(d.lng,d.lat),this._ne=new a.N(g.lng,g.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:h}=a.N.convert(e);let d=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&d}static convert(e){return e instanceof at?e:e&&new at(e)}static fromLngLat(e,o=0){const h=360*o/40075017,d=h/Math.cos(Math.PI/180*e.lat);return new at(new a.N(e.lng-d,e.lat-h),new a.N(e.lng+d,e.lat+h))}adjustAntiMeridian(){const e=new a.N(this._sw.lng,this._sw.lat),o=new a.N(this._ne.lng,this._ne.lat);return new at(e,e.lng>o.lng?new a.N(o.lng+360,o.lat):o)}}class kn{constructor(e,o,h){this.bounds=at.convert(this.validateBounds(e)),this.minzoom=o||0,this.maxzoom=h||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const o=Math.pow(2,e.z),h=Math.floor(a.O(this.bounds.getWest())*o),d=Math.floor(a.Q(this.bounds.getNorth())*o),g=Math.ceil(a.O(this.bounds.getEast())*o),I=Math.ceil(a.Q(this.bounds.getSouth())*o);return e.x>=h&&e.x<g&&e.y>=d&&e.y<I}}class hn extends a.E{constructor(e,o,h,d){if(super(),this.id=e,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(o,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Tn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(a.e(this,e),e.bounds&&(this.tileBounds=new kn(e.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new a.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(e){return a._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(o,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};h.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((g,I)=>{e.reloadPromise={resolve:g,reject:I}})}else e.actor=this.dispatcher.getActor(),d="LT";e.abortController=new AbortController;try{const g=yield e.actor.sendAsync({type:d,data:h},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,g)}catch(g){if(delete e.abortController,e.aborted)return;if(g&&g.status!==404)throw g;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,o){if(o&&o.resourceTiming&&(e.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&e.setExpiryData(o),e.loadVectorData(o,this.map.painter),e.reloadPromise){const h=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(h.resolve).catch(h.reject)}}abortTile(e){return a._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return a._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class en extends a.E{constructor(e,o,h,d){super(),this.id=e,this.dispatcher=h,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},o),a.e(this,a.M(o,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Tn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(a.e(this,e),e.bounds&&(this.tileBounds=new kn(e.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new a.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return a.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return a._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const h=yield ve.getImage(this.map._requestManager.transformRequest(o,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&e.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const d=this.map.painter.context,g=d.gl,I=h.data;e.texture=this.map.painter.getTileTexture(I.width),e.texture?e.texture.update(I,{useMipmap:!0}):(e.texture=new K(d,I,g.RGBA,{useMipmap:!0}),e.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(h){if(delete e.abortController,e.aborted)e.state="unloaded";else if(h)throw e.state="errored",h}})}abortTile(e){return a._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return a._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class ze extends en{constructor(e,o,h,d){super(e,o,h,d),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(e){return a._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(o,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const d=yield ve.getImage(h,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(d&&d.data){const g=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&e.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const I=a.b(g)&&a.U()?g:yield this.readImageNow(g),A={type:this.type,uid:e.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const O=yield e.actor.sendAsync({type:"LDT",data:A});e.dem=O,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(d){if(delete e.abortController,e.aborted)e.state="unloaded";else if(d)throw e.state="errored",d}})}readImageNow(e){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.V()){const o=e.width+2,h=e.height+2;try{return new a.R({width:o,height:h},yield a.W(e,-1,-1,o,h))}catch{}}return C.getImageData(e,1)})}_getNeighboringTiles(e){const o=e.canonical,h=Math.pow(2,o.z),d=(o.x-1+h)%h,g=o.x===0?e.wrap-1:e.wrap,I=(o.x+1+h)%h,A=o.x+1===h?e.wrap+1:e.wrap,O={};return O[new a.S(e.overscaledZ,g,o.z,d,o.y).key]={backfilled:!1},O[new a.S(e.overscaledZ,A,o.z,I,o.y).key]={backfilled:!1},o.y>0&&(O[new a.S(e.overscaledZ,g,o.z,d,o.y-1).key]={backfilled:!1},O[new a.S(e.overscaledZ,e.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},O[new a.S(e.overscaledZ,A,o.z,I,o.y-1).key]={backfilled:!1}),o.y+1<h&&(O[new a.S(e.overscaledZ,g,o.z,d,o.y+1).key]={backfilled:!1},O[new a.S(e.overscaledZ,e.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},O[new a.S(e.overscaledZ,A,o.z,I,o.y+1).key]={backfilled:!1}),O}unloadTile(e){return a._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class G extends a.E{constructor(e,o,h,d){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(d),this._data=o.data,this._options=a.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const g=a.X/this.tileSize;o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*g,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*g,extent:a.X,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:a.X,radius:(o.clusterRadius||50)*g,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return a._(this,void 0,void 0,function*(){const e=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,o,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:o,offset:h}})}_updateWorkerData(e){return a._(this,void 0,void 0,function*(){const o=a.e({type:this.type},this.workerOptions);e?o.dataDiff=e:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(C.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let d=null;h.resourceTiming&&h.resourceTiming[this.id]&&(d=h.resourceTiming[this.id].slice(0));const g={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&a.e(g,{resourceTiming:d}),this.fire(new a.k("data",Object.assign(Object.assign({},g),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},g),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(h))}})}loaded(){return this._pendingLoads===0}loadTile(e){return a._(this,void 0,void 0,function*(){const o=e.actor?"RT":"LT";e.actor=this.actor;const h={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const d=yield this.actor.sendAsync({type:o,data:h},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(d,this.map.painter,o==="RT")})}abortTile(e){return a._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return a._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var H=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ce extends a.E{constructor(e,o,h,d){super(),this.id=e,this.dispatcher=h,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=o}load(e){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield ve.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,e&&(this.coordinates=e),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new a.j(o))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const o=e.map(a.Z.fromLngLat);this.tileID=function(d){let g=1/0,I=1/0,A=-1/0,O=-1/0;for(const we of d)g=Math.min(g,we.x),I=Math.min(I,we.y),A=Math.max(A,we.x),O=Math.max(O,we.y);const X=Math.max(A-g,O-I),se=Math.max(0,Math.floor(-Math.log(X)/Math.LN2)),ae=Math.pow(2,se);return new a.a1(se,Math.floor((g+A)/2*ae),Math.floor((I+O)/2*ae))}(o),this.minzoom=this.maxzoom=this.tileID.z;const h=o.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new a.$,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,a.X,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,a.X),this._boundsArray.emplaceBack(h[2].x,h[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new K(e,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let h=!1;for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,h=!0)}h&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class rt extends Ce{constructor(e,o,h,d){super(e,o,h,d),this.roundZoom=!0,this.type="video",this.options=o}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const o of e.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield a.a3(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new a.j(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const o=this.video.seekable;e<o.start(0)||e>o.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new K(e,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let h=!1;for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,h=!0)}h&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ct extends Ce{constructor(e,o,h,d){super(e,o,h,d),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(I=>typeof I!="number"))||this.fire(new a.j(new a.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a2(`sources.${e}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new K(o,this.canvas,h.RGBA,{premultiply:!0});let d=!1;for(const g in this.tiles){const I=this.tiles[g];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,d=!0)}d&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Et={},ye=y=>{switch(y){case"geojson":return G;case"image":return Ce;case"raster":return en;case"raster-dem":return ze;case"vector":return hn;case"video":return rt;case"canvas":return ct}return Et[y]},z="RTLPluginLoaded";class q extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=It()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return a._(this,arguments,void 0,function*(o,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=C.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(z))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Re=null;function Je(){return Re||(Re=new q),Re}class ft{constructor(e,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=a.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const o=e+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,o,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(d,g){const I={};if(!g)return I;for(const A of d){const O=A.layerIds.map(X=>g.getLayer(X)).filter(Boolean);if(O.length!==0){A.layers=O,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(X=>O.filter(se=>se.id===X)[0]));for(const X of O)I[X.id]=A}}return I}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const g=this.buckets[d];if(g instanceof a.a6){if(this.hasSymbolBuckets=!0,!h)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const g=this.buckets[d];if(g instanceof a.a6&&g.hasRTLText){this.hasRTLText=!0,Je().lazyLoad();break}}this.queryPadding=0;for(const d in this.buckets){const g=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(d).queryRadius(g))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const h in this.buckets){const d=this.buckets[h];d.uploadPending()&&d.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new K(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new K(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,h,d,g,I,A,O,X,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:g,scale:I,tileSize:this.tileSize,pixelPosMatrix:se,transform:O,params:A,queryPadding:this.queryPadding*X},e,o,h):{}}querySourceFeatures(e,o){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const d=h.loadVTLayers(),g=o&&o.sourceLayer?o.sourceLayer:"",I=d._geojsonTileLayer||d[g];if(!I)return;const A=a.a7(o&&o.filter),{z:O,x:X,y:se}=this.tileID.canonical,ae={z:O,x:X,y:se};for(let we=0;we<I.length;we++){const Ae=I.feature(we);if(A.needGeometry){const $e=a.a8(Ae,!0);if(!A.filter(new a.z(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!A.filter(new a.z(this.tileID.overscaledZ),Ae))continue;const je=h.getId(Ae,g),Ne=new a.a9(Ae,O,X,se,je);Ne.tile=ae,e.push(Ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const h=a.aa(e.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const h=Date.now();let d=!1;if(this.expirationTime>h)d=!1;else if(o)if(this.expirationTime<o)d=!0;else{const g=this.expirationTime-o;g?this.expirationTime=h+Math.max(g,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const d in this.buckets){if(!o.style.hasLayer(d))continue;const g=this.buckets[d],I=g.layers[0].sourceLayer||"_geojsonTileLayer",A=h[I],O=e[I];if(!A||!O||Object.keys(O).length===0)continue;g.update(O,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const X=o&&o.style&&o.style.getLayer(d);X&&(this.queryPadding=Math.max(this.queryPadding,X.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<C.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=C.now()+e}setDependencies(e,o){const h={};for(const d of o)h[d]=!0;this.dependencies[e]=h}hasDependency(e,o){for(const h of e){const d=this.dependencies[h];if(d){for(const g of o)if(d[g])return!0}}return!1}}class Qe{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,h){const d=e.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const g={value:o,timeout:void 0};if(h!==void 0&&(g.timeout=setTimeout(()=>{this.remove(e,g)},h)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const h=e.wrapped().key,d=o===void 0?0:this.data[h].indexOf(o),g=this.data[h][d];return this.data[h].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(g.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const h in this.data)for(const d of this.data[h])e(d.value)||o.push(d);for(const h of o)this.remove(h.value.tileID,h)}}class Ot{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,h){const d=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][d]=this.stateChanges[e][d]||{},a.e(this.stateChanges[e][d],h),this.deletedStates[e]===null){this.deletedStates[e]={};for(const g in this.state[e])g!==d&&(this.deletedStates[e][g]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][d]===null){this.deletedStates[e][d]={};for(const g in this.state[e][d])h[g]||(this.deletedStates[e][d][g]=null)}else for(const g in h)this.deletedStates[e]&&this.deletedStates[e][d]&&this.deletedStates[e][d][g]===null&&delete this.deletedStates[e][d][g]}removeFeatureState(e,o,h){if(this.deletedStates[e]===null)return;const d=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},h&&o!==void 0)this.deletedStates[e][d]!==null&&(this.deletedStates[e][d]=this.deletedStates[e][d]||{},this.deletedStates[e][d][h]=null);else if(o!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][d])for(h in this.deletedStates[e][d]={},this.stateChanges[e][d])this.deletedStates[e][d][h]=null;else this.deletedStates[e][d]=null;else this.deletedStates[e]=null}getState(e,o){const h=String(o),d=a.e({},(this.state[e]||{})[h],(this.stateChanges[e]||{})[h]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const g=this.deletedStates[e][o];if(g===null)return{};for(const I in g)delete d[I]}return d}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const h={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const g={};for(const I in this.stateChanges[d])this.state[d][I]||(this.state[d][I]={}),a.e(this.state[d][I],this.stateChanges[d][I]),g[I]=this.state[d][I];h[d]=g}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const g={};if(this.deletedStates[d]===null)for(const I in this.state[d])g[I]={},this.state[d][I]={};else for(const I in this.deletedStates[d]){if(this.deletedStates[d][I]===null)this.state[d][I]={};else for(const A of Object.keys(this.deletedStates[d][I]))delete this.state[d][I][A];g[I]=this.state[d][I]}h[d]=h[d]||{},a.e(h[d],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const d in e)e[d].setFeatureState(h,o)}}class Bt extends a.E{constructor(e,o,h){super(),this.id=e,this.dispatcher=h,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,g,I,A)=>{const O=new(ye(g.type))(d,g,I,A);if(O.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${O.id}`);return O})(e,o,h,this),this._tiles={},this._cache=new Qe(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ot,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const o=this._tiles[e];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,o,h){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,o,h)}catch(d){e.state="errored",d.status!==404?this._source.fire(new a.j(d,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new a.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const h=this._tiles[o];h.upload(e),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(zn).map(e=>e.key)}getRenderableIds(e){const o=[];for(const h in this._tiles)this._isIdRenderable(h,e)&&o.push(this._tiles[h]);return e?o.sort((h,d)=>{const g=h.tileID,I=d.tileID,A=new a.P(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),O=new a.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-I.overscaledZ||O.y-A.y||O.x-A.x}).map(h=>h.tileID.key):o.map(h=>h.tileID).sort(zn).map(h=>h.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,o){return a._(this,void 0,void 0,function*(){const h=this._tiles[e];h&&(h.state!=="loading"&&(h.state=o),yield this._loadTile(h,e,o))})}_tileLoaded(e,o,h){e.timeAdded=C.now(),h==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const o=this.getRenderableIds();for(let d=0;d<o.length;d++){const g=o[d];if(e.neighboringTiles&&e.neighboringTiles[g]){const I=this.getTileByID(g);h(e,I),h(I,e)}}function h(d,g){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let I=g.tileID.canonical.x-d.tileID.canonical.x;const A=g.tileID.canonical.y-d.tileID.canonical.y,O=Math.pow(2,d.tileID.canonical.z),X=g.tileID.key;I===0&&A===0||Math.abs(A)>1||(Math.abs(I)>1&&(Math.abs(I+O)===1?I+=O:Math.abs(I-O)===1&&(I-=O)),g.dem&&d.dem&&(d.dem.backfillBorder(g.dem,I,A),d.neighboringTiles&&d.neighboringTiles[X]&&(d.neighboringTiles[X].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,h,d){for(const g in this._tiles){let I=this._tiles[g];if(d[g]||!I.hasData()||I.tileID.overscaledZ<=o||I.tileID.overscaledZ>h)continue;let A=I.tileID;for(;I&&I.tileID.overscaledZ>o+1;){const X=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[X.key],I&&I.hasData()&&(A=X)}let O=A;for(;O.overscaledZ>o;)if(O=O.scaledTo(O.overscaledZ-1),e[O.key]){d[A.key]=A;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const h=this._loadedParentTiles[e.key];return h&&h.tileID.overscaledZ>=o?h:null}for(let h=e.overscaledZ-1;h>=o;h--){const d=e.scaledTo(h),g=this._getLoadedTile(d);if(g)return g}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const o=Math.ceil(e.width/this._source.tileSize)+1,h=Math.ceil(e.height/this._source.tileSize)+1,d=Math.floor(o*h*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(g)}handleWrapJump(e){const o=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,o){const h={};for(const d in this._tiles){const g=this._tiles[d];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+o),h[g.tileID.key]=g}this._tiles=h;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(e,o,h,d,g,I){const A={},O={},X=Object.keys(e),se=C.now();for(const ae of X){const we=e[ae],Ae=this._tiles[ae];if(!Ae||Ae.fadeEndTime!==0&&Ae.fadeEndTime<=se)continue;const je=this.findLoadedParent(we,o),Ne=this.findLoadedSibling(we),$e=je||Ne||null;$e&&(this._addTile($e.tileID),A[$e.tileID.key]=$e.tileID),O[ae]=we}this._retainLoadedChildren(O,d,h,e);for(const ae in A)e[ae]||(this._coveredTiles[ae]=!0,e[ae]=A[ae]);if(I){const ae={},we={};for(const Ae of g)this._tiles[Ae.key].hasData()?ae[Ae.key]=Ae:we[Ae.key]=Ae;for(const Ae in we){const je=we[Ae].children(this._source.maxzoom);this._tiles[je[0].key]&&this._tiles[je[1].key]&&this._tiles[je[2].key]&&this._tiles[je[3].key]&&(ae[je[0].key]=e[je[0].key]=je[0],ae[je[1].key]=e[je[1].key]=je[1],ae[je[2].key]=e[je[2].key]=je[2],ae[je[3].key]=e[je[3].key]=je[3],delete we[Ae])}for(const Ae in we){const je=we[Ae],Ne=this.findLoadedParent(je,this._source.minzoom),$e=this.findLoadedSibling(je),qe=Ne||$e||null;if(qe){ae[qe.tileID.key]=e[qe.tileID.key]=qe.tileID;for(const et in ae)ae[et].isChildOf(qe.tileID)&&delete ae[et]}}for(const Ae in this._tiles)ae[Ae]||(this._coveredTiles[Ae]=!0)}}update(e,o){if(!this._sourceLoaded||this._paused)return;let h;this.transform=e,this.terrain=o,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(se=>new a.S(se.canonical.z,se.wrap,se.canonical.z,se.canonical.x,se.canonical.y)):(h=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o}),this._source.hasTile&&(h=h.filter(se=>this._source.hasTile(se)))):h=[];const d=e.coveringZoomLevel(this._source),g=Math.max(d-Bt.maxOverzooming,this._source.minzoom),I=Math.max(d+Bt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const se={};for(const ae of h)if(ae.canonical.z>this._source.minzoom){const we=ae.scaledTo(ae.canonical.z-1);se[we.key]=we;const Ae=ae.scaledTo(Math.max(this._source.minzoom,Math.min(ae.canonical.z,5)));se[Ae.key]=Ae}h=h.concat(Object.values(se))}const A=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(h,d);Zn(this._source.type)&&this._updateCoveredAndRetainedTiles(O,g,I,d,h,o);for(const se in O)this._tiles[se].clearFadeHold();const X=a.ab(this._tiles,O);for(const se of X){const ae=this._tiles[se];ae.hasSymbolBuckets&&!ae.holdingForFade()?ae.setHoldDuration(this.map._fadeDuration):ae.hasSymbolBuckets&&!ae.symbolFadeFinished()||this._removeTile(se)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,o){var h;const d={},g={},I=Math.max(o-Bt.maxOverzooming,this._source.minzoom),A=Math.max(o+Bt.maxUnderzooming,this._source.minzoom),O={};for(const X of e){const se=this._addTile(X);d[X.key]=X,se.hasData()||o<this._source.maxzoom&&(O[X.key]=X)}this._retainLoadedChildren(O,o,A,d);for(const X of e){let se=this._tiles[X.key];if(se.hasData())continue;if(o+1>this._source.maxzoom){const we=X.children(this._source.maxzoom)[0],Ae=this.getTile(we);if(Ae&&Ae.hasData()){d[we.key]=we;continue}}else{const we=X.children(this._source.maxzoom);if(d[we[0].key]&&d[we[1].key]&&d[we[2].key]&&d[we[3].key])continue}let ae=se.wasRequested();for(let we=X.overscaledZ-1;we>=I;--we){const Ae=X.scaledTo(we);if(g[Ae.key])break;if(g[Ae.key]=!0,se=this.getTile(Ae),!se&&ae&&(se=this._addTile(Ae)),se){const je=se.hasData();if((je||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||ae)&&(d[Ae.key]=Ae),ae=se.wasRequested(),je)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let h,d=this._tiles[e].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){h=this._loadedParentTiles[d.key];break}o.push(d.key);const g=d.scaledTo(d.overscaledZ-1);if(h=this._getLoadedTile(g),h)break;d=g}for(const g of o)this._loadedParentTiles[g]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const o=this._tiles[e].tileID,h=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=h}}_addTile(e){let o=this._tiles[e.key];if(o)return o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const h=o;return o||(o=new ft(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(o,e.key,o.state)),o.uses++,this._tiles[e.key]=o,h||this._source.fire(new a.k("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const h=o.getExpiryTimeout();h&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},h))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(e){const o=e.sourceDataType;e.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&o==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,o,h){const d=[],g=this.transform;if(!g)return d;const I=h?g.getCameraQueryGeometry(e):e,A=e.map(je=>g.pointCoordinate(je,this.terrain)),O=I.map(je=>g.pointCoordinate(je,this.terrain)),X=this.getIds();let se=1/0,ae=1/0,we=-1/0,Ae=-1/0;for(const je of O)se=Math.min(se,je.x),ae=Math.min(ae,je.y),we=Math.max(we,je.x),Ae=Math.max(Ae,je.y);for(let je=0;je<X.length;je++){const Ne=this._tiles[X[je]];if(Ne.holdingForFade())continue;const $e=Ne.tileID,qe=Math.pow(2,g.zoom-Ne.tileID.overscaledZ),et=o*Ne.queryPadding*a.X/Ne.tileSize/qe,Ve=[$e.getTilePoint(new a.Z(se,ae)),$e.getTilePoint(new a.Z(we,Ae))];if(Ve[0].x-et<a.X&&Ve[0].y-et<a.X&&Ve[1].x+et>=0&&Ve[1].y+et>=0){const st=A.map(mt=>$e.getTilePoint(mt)),ut=O.map(mt=>$e.getTilePoint(mt));d.push({tile:Ne,tileID:$e,queryGeometry:st,cameraQueryGeometry:ut,scale:qe})}}return d}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(h=>this._tiles[h].tileID);for(const h of o)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Zn(this._source.type)){const e=C.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=e)return!0}return!1}setFeatureState(e,o,h){this._state.updateState(e=e||"_geojsonTileLayer",o,h)}removeFeatureState(e,o,h){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,h)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,h){const d=this._tiles[e];d&&d.setDependencies(o,h)}reloadTilesForDependencies(e,o){for(const h in this._tiles)this._tiles[h].hasDependency(e,o)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(e,o))}}function zn(y,e){const o=Math.abs(2*y.wrap)-+(y.wrap<0),h=Math.abs(2*e.wrap)-+(e.wrap<0);return y.overscaledZ-e.overscaledZ||h-o||e.canonical.y-y.canonical.y||e.canonical.x-y.canonical.x}function Zn(y){return y==="raster"||y==="image"||y==="video"}Bt.maxOverzooming=10,Bt.maxUnderzooming=3;class Xt{constructor(e,o){this.reset(e,o)}reset(e,o){this.points=e||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=a.ac(e,0,1);let o=1,h=this._distances[o];const d=e*this.paddedLength+this.padding;for(;h<d&&o<this._distances.length;)h=this._distances[++o];const g=o-1,I=this._distances[g],A=h-I,O=A>0?(d-I)/A:0;return this.points[g].mult(1-O).add(this.points[o].mult(O))}}function Fr(y,e){let o=!0;return y==="always"||y!=="never"&&e!=="never"||(o=!1),o}class Kr{constructor(e,o,h){const d=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(e/h),this.yCellCount=Math.ceil(o/h);for(let I=0;I<this.xCellCount*this.yCellCount;I++)d.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=o,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,o,h,d,g){this._forEachCell(o,h,d,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(d),this.bboxes.push(g)}insertCircle(e,o,h,d){this._forEachCell(o-d,h-d,o+d,h+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(o),this.circles.push(h),this.circles.push(d)}_insertBoxCell(e,o,h,d,g,I){this.boxCells[g].push(I)}_insertCircleCell(e,o,h,d,g,I){this.circleCells[g].push(I)}_query(e,o,h,d,g,I,A){if(h<0||e>this.width||d<0||o>this.height)return[];const O=[];if(e<=0&&o<=0&&this.width<=h&&this.height<=d){if(g)return[{key:null,x1:e,y1:o,x2:h,y2:d}];for(let X=0;X<this.boxKeys.length;X++)O.push({key:this.boxKeys[X],x1:this.bboxes[4*X],y1:this.bboxes[4*X+1],x2:this.bboxes[4*X+2],y2:this.bboxes[4*X+3]});for(let X=0;X<this.circleKeys.length;X++){const se=this.circles[3*X],ae=this.circles[3*X+1],we=this.circles[3*X+2];O.push({key:this.circleKeys[X],x1:se-we,y1:ae-we,x2:se+we,y2:ae+we})}}else this._forEachCell(e,o,h,d,this._queryCell,O,{hitTest:g,overlapMode:I,seenUids:{box:{},circle:{}}},A);return O}query(e,o,h,d){return this._query(e,o,h,d,!1,null)}hitTest(e,o,h,d,g,I){return this._query(e,o,h,d,!0,g,I).length>0}hitTestCircle(e,o,h,d,g){const I=e-h,A=e+h,O=o-h,X=o+h;if(A<0||I>this.width||X<0||O>this.height)return!1;const se=[];return this._forEachCell(I,O,A,X,this._queryCellCircle,se,{hitTest:!0,overlapMode:d,circle:{x:e,y:o,radius:h},seenUids:{box:{},circle:{}}},g),se.length>0}_queryCell(e,o,h,d,g,I,A,O){const{seenUids:X,hitTest:se,overlapMode:ae}=A,we=this.boxCells[g];if(we!==null){const je=this.bboxes;for(const Ne of we)if(!X.box[Ne]){X.box[Ne]=!0;const $e=4*Ne,qe=this.boxKeys[Ne];if(e<=je[$e+2]&&o<=je[$e+3]&&h>=je[$e+0]&&d>=je[$e+1]&&(!O||O(qe))&&(!se||!Fr(ae,qe.overlapMode))&&(I.push({key:qe,x1:je[$e],y1:je[$e+1],x2:je[$e+2],y2:je[$e+3]}),se))return!0}}const Ae=this.circleCells[g];if(Ae!==null){const je=this.circles;for(const Ne of Ae)if(!X.circle[Ne]){X.circle[Ne]=!0;const $e=3*Ne,qe=this.circleKeys[Ne];if(this._circleAndRectCollide(je[$e],je[$e+1],je[$e+2],e,o,h,d)&&(!O||O(qe))&&(!se||!Fr(ae,qe.overlapMode))){const et=je[$e],Ve=je[$e+1],st=je[$e+2];if(I.push({key:qe,x1:et-st,y1:Ve-st,x2:et+st,y2:Ve+st}),se)return!0}}}return!1}_queryCellCircle(e,o,h,d,g,I,A,O){const{circle:X,seenUids:se,overlapMode:ae}=A,we=this.boxCells[g];if(we!==null){const je=this.bboxes;for(const Ne of we)if(!se.box[Ne]){se.box[Ne]=!0;const $e=4*Ne,qe=this.boxKeys[Ne];if(this._circleAndRectCollide(X.x,X.y,X.radius,je[$e+0],je[$e+1],je[$e+2],je[$e+3])&&(!O||O(qe))&&!Fr(ae,qe.overlapMode))return I.push(!0),!0}}const Ae=this.circleCells[g];if(Ae!==null){const je=this.circles;for(const Ne of Ae)if(!se.circle[Ne]){se.circle[Ne]=!0;const $e=3*Ne,qe=this.circleKeys[Ne];if(this._circlesCollide(je[$e],je[$e+1],je[$e+2],X.x,X.y,X.radius)&&(!O||O(qe))&&!Fr(ae,qe.overlapMode))return I.push(!0),!0}}}_forEachCell(e,o,h,d,g,I,A,O){const X=this._convertToXCellCoord(e),se=this._convertToYCellCoord(o),ae=this._convertToXCellCoord(h),we=this._convertToYCellCoord(d);for(let Ae=X;Ae<=ae;Ae++)for(let je=se;je<=we;je++)if(g.call(this,e,o,h,d,this.xCellCount*je+Ae,I,A,O))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,o,h,d,g,I){const A=d-e,O=g-o,X=h+I;return X*X>A*A+O*O}_circleAndRectCollide(e,o,h,d,g,I,A){const O=(I-d)/2,X=Math.abs(e-(d+O));if(X>O+h)return!1;const se=(A-g)/2,ae=Math.abs(o-(g+se));if(ae>se+h)return!1;if(X<=O||ae<=se)return!0;const we=X-O,Ae=ae-se;return we*we+Ae*Ae<=h*h}}function Yr(y,e,o,h,d){const g=a.H();return e?(a.K(g,g,[1/d,1/d,1]),o||a.ad(g,g,h.angle)):a.L(g,h.labelPlaneMatrix,y),g}function Cr(y,e,o,h,d){if(e){const g=a.ae(y);return a.K(g,g,[d,d,1]),o||a.ad(g,g,-h.angle),g}return h.glCoordMatrix}function Ue(y,e,o,h){let d;h?(d=[y,e,h(y,e),1],a.af(d,d,o)):(d=[y,e,0,1],Jn(d,d,o));const g=d[3];return{point:new a.P(d[0]/g,d[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function me(y,e){return .5+y/e*.5}function pe(y,e){return y.x>=-e[0]&&y.x<=e[0]&&y.y>=-e[1]&&y.y<=e[1]}function Pe(y,e,o,h,d,g,I,A,O,X,se,ae,we,Ae,je){const Ne=h?y.textSizeData:y.iconSizeData,$e=a.ag(Ne,o.transform.zoom),qe=[256/o.width*2+1,256/o.height*2+1],et=h?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;et.clear();const Ve=y.lineVertexArray,st=h?y.text.placedSymbolArray:y.icon.placedSymbolArray,ut=o.transform.width/o.transform.height;let mt=!1;for(let At=0;At<st.length;At++){const Dt=st.get(At);if(Dt.hidden||Dt.writingMode===a.ah.vertical&&!mt){vn(Dt.numGlyphs,et);continue}mt=!1;const Gt=Ue(Dt.anchorX,Dt.anchorY,e,je);if(!pe(Gt.point,qe)){vn(Dt.numGlyphs,et);continue}const tn=me(o.transform.cameraToCenterDistance,Gt.signedDistanceFromCamera),Ht=a.ai(Ne,$e,Dt),$t=I?Ht/tn:Ht*tn,dn={getElevation:je,labelPlaneMatrix:d,lineVertexArray:Ve,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:X,tileAnchorPoint:new a.P(Dt.anchorX,Dt.anchorY),unwrappedTileID:se,width:ae,height:we,translation:Ae},jn=He(dn,Dt,$t,!1,A,e,g,y.glyphOffsetArray,et,ut,O);mt=jn.useVertical,(jn.notEnoughRoom||mt||jn.needsFlipping&&He(dn,Dt,$t,!0,A,e,g,y.glyphOffsetArray,et,ut,O).notEnoughRoom)&&vn(Dt.numGlyphs,et)}h?y.text.dynamicLayoutVertexBuffer.updateData(et):y.icon.dynamicLayoutVertexBuffer.updateData(et)}function Le(y,e,o,h,d,g,I,A){const O=g.glyphStartIndex+g.numGlyphs,X=g.lineStartIndex,se=g.lineStartIndex+g.lineLength,ae=e.getoffsetX(g.glyphStartIndex),we=e.getoffsetX(O-1),Ae=Vt(y*ae,o,h,d,g.segment,X,se,A,I);if(!Ae)return null;const je=Vt(y*we,o,h,d,g.segment,X,se,A,I);return je?A.projectionCache.anyProjectionOccluded?null:{first:Ae,last:je}:null}function Be(y,e,o,h){return y===a.ah.horizontal&&Math.abs(o.y-e.y)>Math.abs(o.x-e.x)*h?{useVertical:!0}:(y===a.ah.vertical?e.y<o.y:e.x>o.x)?{needsFlipping:!0}:null}function He(y,e,o,h,d,g,I,A,O,X,se){const ae=o/24,we=e.lineOffsetX*ae,Ae=e.lineOffsetY*ae;let je;if(e.numGlyphs>1){const Ne=e.glyphStartIndex+e.numGlyphs,$e=e.lineStartIndex,qe=e.lineStartIndex+e.lineLength,et=Le(ae,A,we,Ae,h,e,se,y);if(!et)return{notEnoughRoom:!0};const Ve=Ue(et.first.point.x,et.first.point.y,I,y.getElevation).point,st=Ue(et.last.point.x,et.last.point.y,I,y.getElevation).point;if(d&&!h){const ut=Be(e.writingMode,Ve,st,X);if(ut)return ut}je=[et.first];for(let ut=e.glyphStartIndex+1;ut<Ne-1;ut++)je.push(Vt(ae*A.getoffsetX(ut),we,Ae,h,e.segment,$e,qe,y,se));je.push(et.last)}else{if(d&&!h){const $e=Ue(y.tileAnchorPoint.x,y.tileAnchorPoint.y,g,y.getElevation).point,qe=e.lineStartIndex+e.segment+1,et=new a.P(y.lineVertexArray.getx(qe),y.lineVertexArray.gety(qe)),Ve=Ue(et.x,et.y,g,y.getElevation),st=Ve.signedDistanceFromCamera>0?Ve.point:function(mt,At,Dt,Gt,tn,Ht){return nt(mt,At,Dt,1,tn,Ht)}(y.tileAnchorPoint,et,$e,0,g,y),ut=Be(e.writingMode,$e,st,X);if(ut)return ut}const Ne=Vt(ae*A.getoffsetX(e.glyphStartIndex),we,Ae,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,y,se);if(!Ne||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};je=[Ne]}for(const Ne of je)a.aj(O,Ne.point,Ne.angle);return{}}function nt(y,e,o,h,d,g){const I=y.add(y.sub(e)._unit()),A=d!==void 0?Ue(I.x,I.y,d,g.getElevation).point:yt(I.x,I.y,g).point,O=o.sub(A);return o.add(O._mult(h/O.mag()))}function Ze(y,e,o){const h=e.projectionCache;if(h.projections[y])return h.projections[y];const d=new a.P(e.lineVertexArray.getx(y),e.lineVertexArray.gety(y)),g=yt(d.x,d.y,e);if(g.signedDistanceFromCamera>0)return h.projections[y]=g.point,h.anyProjectionOccluded=h.anyProjectionOccluded||g.isOccluded,g.point;const I=y-o.direction;return function(A,O,X,se,ae){return nt(A,O,X,se,void 0,ae)}(o.distanceFromAnchor===0?e.tileAnchorPoint:new a.P(e.lineVertexArray.getx(I),e.lineVertexArray.gety(I)),d,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,e)}function yt(y,e,o){const h=y+o.translation[0],d=e+o.translation[1];let g;return!o.pitchWithMap&&o.projection.useSpecialProjectionForSymbols?(g=o.projection.projectTileCoordinates(h,d,o.unwrappedTileID,o.getElevation),g.point.x=(.5*g.point.x+.5)*o.width,g.point.y=(.5*-g.point.y+.5)*o.height):(g=Ue(h,d,o.labelPlaneMatrix,o.getElevation),g.isOccluded=!1),g}function Ct(y,e,o){return y._unit()._perp()._mult(e*o)}function gt(y,e,o,h,d,g,I,A,O){if(A.projectionCache.offsets[y])return A.projectionCache.offsets[y];const X=o.add(e);if(y+O.direction<h||y+O.direction>=d)return A.projectionCache.offsets[y]=X,X;const se=Ze(y+O.direction,A,O),ae=Ct(se.sub(o),I,O.direction),we=o.add(ae),Ae=se.add(ae);return A.projectionCache.offsets[y]=a.ak(g,X,we,Ae)||X,A.projectionCache.offsets[y]}function Vt(y,e,o,h,d,g,I,A,O){const X=h?y-e:y+e;let se=X>0?1:-1,ae=0;h&&(se*=-1,ae=Math.PI),se<0&&(ae+=Math.PI);let we,Ae=se>0?g+d:g+d+1;A.projectionCache.cachedAnchorPoint?we=A.projectionCache.cachedAnchorPoint:(we=yt(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=we);let je,Ne,$e=we,qe=we,et=0,Ve=0;const st=Math.abs(X),ut=[];let mt;for(;et+Ve<=st;){if(Ae+=se,Ae<g||Ae>=I)return null;et+=Ve,qe=$e,Ne=je;const Gt={absOffsetX:st,direction:se,distanceFromAnchor:et,previousVertex:qe};if($e=Ze(Ae,A,Gt),o===0)ut.push(qe),mt=$e.sub(qe);else{let tn;const Ht=$e.sub(qe);tn=Ht.mag()===0?Ct(Ze(Ae+se,A,Gt).sub($e),o,se):Ct(Ht,o,se),Ne||(Ne=qe.add(tn)),je=gt(Ae,tn,$e,g,I,Ne,o,A,Gt),ut.push(Ne),mt=je.sub(Ne)}Ve=mt.mag()}const At=mt._mult((st-et)/Ve)._add(Ne||qe),Dt=ae+Math.atan2($e.y-qe.y,$e.x-qe.x);return ut.push(At),{point:At,angle:O?Dt:0,path:ut}}const pn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function vn(y,e){for(let o=0;o<y;o++){const h=e.length;e.resize(h+4),e.float32.set(pn,3*h)}}function Jn(y,e,o){const h=e[0],d=e[1];return y[0]=o[0]*h+o[4]*d+o[12],y[1]=o[1]*h+o[5]*d+o[13],y[3]=o[3]*h+o[7]*d+o[15],y}const Fn=100;class Qn{constructor(e,o,h=new Kr(e.width+200,e.height+200,25),d=new Kr(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=o,this.grid=h,this.ignoredGrid=d,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Fn,this.screenBottomBoundary=e.height+Fn,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,o,h,d,g,I,A,O,X,se,ae){const we=e.anchorPointX+O[0],Ae=e.anchorPointY+O[1],je=this.projectAndGetPerspectiveRatio(d,we,Ae,g,se),Ne=h*je.perspectiveRatio;let $e;if(I||A)$e=this._projectCollisionBox(e,Ne,d,g,I,A,O,je,se,ae);else{const ut=je.point.x+(ae?ae.x*Ne:0),mt=je.point.y+(ae?ae.y*Ne:0);$e={allPointsOccluded:!1,box:[ut+e.x1*Ne,mt+e.y1*Ne,ut+e.x2*Ne,mt+e.y2*Ne]}}const[qe,et,Ve,st]=$e.box;return this.mapProjection.useSpecialProjectionForSymbols&&(I?$e.allPointsOccluded:this.mapProjection.isOccluded(we,Ae,g))||je.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(qe,et,Ve,st)||o!=="always"&&this.grid.hitTest(qe,et,Ve,st,o,X)?{box:[qe,et,Ve,st],placeable:!1,offscreen:!1}:{box:[qe,et,Ve,st],placeable:!0,offscreen:this.isOffscreen(qe,et,Ve,st)}}placeCollisionCircles(e,o,h,d,g,I,A,O,X,se,ae,we,Ae,je,Ne,$e){const qe=[],et=new a.P(o.anchorX,o.anchorY),Ve=this.getPerspectiveRatio(I,et.x,et.y,A,$e),st=(ae?g/Ve:g*Ve)/a.ap,ut={getElevation:$e,labelPlaneMatrix:O,lineVertexArray:h,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:et,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Ne},mt=Le(st,d,o.lineOffsetX*st,o.lineOffsetY*st,!1,o,!1,ut);let At=!1,Dt=!1,Gt=!0;if(mt){const tn=.5*Ae*Ve+je,Ht=new a.P(-100,-100),$t=new a.P(this.screenRightBoundary,this.screenBottomBoundary),dn=new Xt,jn=mt.first,Wt=mt.last;let Yt=[];for(let Gn=jn.path.length-1;Gn>=1;Gn--)Yt.push(jn.path[Gn]);for(let Gn=1;Gn<Wt.path.length;Gn++)Yt.push(Wt.path[Gn]);const On=2.5*tn;if(X){const Gn=this.projectPathToScreenSpace(Yt,ut,X);Yt=Gn.some(qn=>qn.signedDistanceFromCamera<=0)?[]:Gn.map(qn=>qn.point)}let wr=[];if(Yt.length>0){const Gn=Yt[0].clone(),qn=Yt[0].clone();for(let Er=1;Er<Yt.length;Er++)Gn.x=Math.min(Gn.x,Yt[Er].x),Gn.y=Math.min(Gn.y,Yt[Er].y),qn.x=Math.max(qn.x,Yt[Er].x),qn.y=Math.max(qn.y,Yt[Er].y);wr=Gn.x>=Ht.x&&qn.x<=$t.x&&Gn.y>=Ht.y&&qn.y<=$t.y?[Yt]:qn.x<Ht.x||Gn.x>$t.x||qn.y<Ht.y||Gn.y>$t.y?[]:a.al([Yt],Ht.x,Ht.y,$t.x,$t.y)}for(const Gn of wr){dn.reset(Gn,.25*tn);let qn=0;qn=dn.length<=.5*tn?1:Math.ceil(dn.paddedLength/On)+1;for(let Er=0;Er<qn;Er++){const Ci=Er/Math.max(qn-1,1),zo=dn.lerp(Ci),Tr=zo.x+Fn,gi=zo.y+Fn;qe.push(Tr,gi,tn,0);const zr=Tr-tn,ni=gi-tn,Li=Tr+tn,xs=gi+tn;if(Gt=Gt&&this.isOffscreen(zr,ni,Li,xs),Dt=Dt||this.isInsideGrid(zr,ni,Li,xs),e!=="always"&&this.grid.hitTestCircle(Tr,gi,tn,e,we)&&(At=!0,!se))return{circles:[],offscreen:!1,collisionDetected:At}}}}return{circles:!se&&At||!Dt||Ve<this.perspectiveRatioCutoff?[]:qe,offscreen:Gt,collisionDetected:At}}projectPathToScreenSpace(e,o,h){return e.map(d=>Ue(d.x,d.y,h,o.getElevation))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let h=1/0,d=1/0,g=-1/0,I=-1/0;for(const se of e){const ae=new a.P(se.x+Fn,se.y+Fn);h=Math.min(h,ae.x),d=Math.min(d,ae.y),g=Math.max(g,ae.x),I=Math.max(I,ae.y),o.push(ae)}const A=this.grid.query(h,d,g,I).concat(this.ignoredGrid.query(h,d,g,I)),O={},X={};for(const se of A){const ae=se.key;if(O[ae.bucketInstanceId]===void 0&&(O[ae.bucketInstanceId]={}),O[ae.bucketInstanceId][ae.featureIndex])continue;const we=[new a.P(se.x1,se.y1),new a.P(se.x2,se.y1),new a.P(se.x2,se.y2),new a.P(se.x1,se.y2)];a.am(o,we)&&(O[ae.bucketInstanceId][ae.featureIndex]=!0,X[ae.bucketInstanceId]===void 0&&(X[ae.bucketInstanceId]=[]),X[ae.bucketInstanceId].push(ae.featureIndex))}return X}insertCollisionBox(e,o,h,d,g,I){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:g,collisionGroupID:I,overlapMode:o},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,o,h,d,g,I){const A=h?this.ignoredGrid:this.grid,O={bucketInstanceId:d,featureIndex:g,collisionGroupID:I,overlapMode:o};for(let X=0;X<e.length;X+=4)A.insertCircle(O,e[X],e[X+1],e[X+2])}projectAndGetPerspectiveRatio(e,o,h,d,g){let I;g?(I=[o,h,g(o,h),1],a.af(I,I,e)):(I=[o,h,0,1],Jn(I,I,e));const A=I[3];return{point:new a.P((I[0]/A+1)/2*this.transform.width+Fn,(-I[1]/A+1)/2*this.transform.height+Fn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A*.5,isOccluded:!1,signedDistanceFromCamera:A}}getPerspectiveRatio(e,o,h,d,g){const I=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(o,h,d,g):Ue(o,h,e,g);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(e,o,h,d){return h<Fn||e>=this.screenRightBoundary||d<Fn||o>this.screenBottomBoundary}isInsideGrid(e,o,h,d){return h>=0&&e<this.gridRightBoundary&&d>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const e=a.an([]);return a.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,o,h,d,g,I,A,O,X,se){let ae=new a.P(1,0),we=new a.P(0,1);const Ae=new a.P(e.anchorPointX+A[0],e.anchorPointY+A[1]);if(I&&!g){const Gt=this.projectAndGetPerspectiveRatio(h,Ae.x+1,Ae.y,d,X).point.sub(O.point).unit(),tn=Math.atan(Gt.y/Gt.x)+(Gt.x<0?Math.PI:0),Ht=Math.sin(tn),$t=Math.cos(tn);ae=new a.P($t,Ht),we=new a.P(-Ht,$t)}else if(!I&&g){const Gt=-this.transform.angle,tn=Math.sin(Gt),Ht=Math.cos(Gt);ae=new a.P(Ht,tn),we=new a.P(-tn,Ht)}let je=O.point,Ne=o;if(g){je=Ae;const Gt=this.transform.zoom-Math.floor(this.transform.zoom);Ne=Math.pow(2,-Gt),Ne*=this.mapProjection.getPitchedTextCorrection(this.transform,Ae,d),se||(Ne*=a.ac(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}se&&(je=je.add(ae.mult(se.x*Ne)).add(we.mult(se.y*Ne)));const $e=e.x1*Ne,qe=e.x2*Ne,et=($e+qe)/2,Ve=e.y1*Ne,st=e.y2*Ne,ut=(Ve+st)/2,mt=[{offsetX:$e,offsetY:Ve},{offsetX:et,offsetY:Ve},{offsetX:qe,offsetY:Ve},{offsetX:qe,offsetY:ut},{offsetX:qe,offsetY:st},{offsetX:et,offsetY:st},{offsetX:$e,offsetY:st},{offsetX:$e,offsetY:ut}];let At=[];for(const{offsetX:Gt,offsetY:tn}of mt)At.push(new a.P(je.x+ae.x*Gt+we.x*tn,je.y+ae.y*Gt+we.y*tn));let Dt=!1;if(g){const Gt=At.map(tn=>this.projectAndGetPerspectiveRatio(h,tn.x,tn.y,d,X));Dt=Gt.some(tn=>!tn.isOccluded),At=Gt.map(tn=>tn.point)}else Dt=!0;return{box:a.ao(At),allPointsOccluded:!Dt}}}function Un(y,e,o){return e*(a.X/(y.tileSize*Math.pow(2,o-y.tileID.overscaledZ)))}class Or{constructor(e,o,h,d){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?o:-o))):d&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class _r{constructor(e,o,h,d,g){this.text=new Or(e?e.text:null,o,h,g),this.icon=new Or(e?e.icon:null,o,d,g)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Wn{constructor(e,o,h){this.text=e,this.icon=o,this.skipFade=h}}class ur{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class br{constructor(e,o,h,d,g){this.bucketInstanceId=e,this.featureIndex=o,this.sourceLayerIndex=h,this.bucketIndex=d,this.tileID=g}}class ii{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const o=++this.maxGroupID;this.collisionGroups[e]={ID:o,predicate:h=>h.collisionGroupID===o}}return this.collisionGroups[e]}}function ci(y,e,o,h,d){const{horizontalAlign:g,verticalAlign:I}=a.au(y);return new a.P(-(g-.5)*e+h[0]*d,-(I-.5)*o+h[1]*d)}class zi{constructor(e,o,h,d,g,I){this.transform=e.clone(),this.terrain=h,this.collisionIndex=new Qn(this.transform,o),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ii(g),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const o=this.terrain;return o?(h,d)=>o.getElevation(e,h,d):null}getBucketParts(e,o,h,d){const g=h.getBucket(o),I=h.latestFeatureIndex;if(!g||!I||o.id!==g.layerIds[0])return;const A=h.collisionBoxArray,O=g.layers[0].layout,X=g.layers[0].paint,se=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),ae=h.tileSize/a.X,we=h.tileID.toUnwrapped(),Ae=this.transform.calculatePosMatrix(we),je=O.get("text-pitch-alignment")==="map",Ne=O.get("text-rotation-alignment")==="map",$e=Un(h,1,this.transform.zoom),qe=this.collisionIndex.mapProjection.translatePosition(this.transform,h,X.get("text-translate"),X.get("text-translate-anchor")),et=this.collisionIndex.mapProjection.translatePosition(this.transform,h,X.get("icon-translate"),X.get("icon-translate-anchor")),Ve=Yr(Ae,je,Ne,this.transform,$e);let st=null;if(je){const mt=Cr(Ae,je,Ne,this.transform,$e);st=a.L([],this.transform.labelPlaneMatrix,mt)}this.retainedQueryData[g.bucketInstanceId]=new br(g.bucketInstanceId,I,g.sourceLayerIndex,g.index,h.tileID);const ut={bucket:g,layout:O,translationText:qe,translationIcon:et,posMatrix:Ae,unwrappedTileID:we,textLabelPlaneMatrix:Ve,labelToScreenMatrix:st,scale:se,textPixelRatio:ae,holdingForFade:h.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:a.ag(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(d)for(const mt of g.sortKeyRanges){const{sortKey:At,symbolInstanceStart:Dt,symbolInstanceEnd:Gt}=mt;e.push({sortKey:At,symbolInstanceStart:Dt,symbolInstanceEnd:Gt,parameters:ut})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:ut})}attemptAnchorPlacement(e,o,h,d,g,I,A,O,X,se,ae,we,Ae,je,Ne,$e,qe,et,Ve){const st=a.aq[e.textAnchor],ut=[e.textOffset0,e.textOffset1],mt=ci(st,h,d,ut,g),At=this.collisionIndex.placeCollisionBox(o,we,O,X,se,A,I,$e,ae.predicate,Ve,mt);if((!et||this.collisionIndex.placeCollisionBox(et,we,O,X,se,A,I,qe,ae.predicate,Ve,mt).placeable)&&At.placeable){let Dt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID].text&&(Dt=this.prevPlacement.variableOffsets[Ae.crossTileID].anchor),Ae.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ae.crossTileID]={textOffset:ut,width:h,height:d,anchor:st,textBoxScale:g,prevAnchor:Dt},this.markUsedJustification(je,st,Ae,Ne),je.allowVerticalPlacement&&(this.markUsedOrientation(je,Ne,Ae),this.placedOrientations[Ae.crossTileID]=Ne),{shift:mt,placedGlyphBoxes:At}}}placeLayerBucketPart(e,o,h){const{bucket:d,layout:g,translationText:I,translationIcon:A,posMatrix:O,unwrappedTileID:X,textLabelPlaneMatrix:se,labelToScreenMatrix:ae,textPixelRatio:we,holdingForFade:Ae,collisionBoxArray:je,partiallyEvaluatedTextSize:Ne,collisionGroup:$e}=e.parameters,qe=g.get("text-optional"),et=g.get("icon-optional"),Ve=a.ar(g,"text-overlap","text-allow-overlap"),st=Ve==="always",ut=a.ar(g,"icon-overlap","icon-allow-overlap"),mt=ut==="always",At=g.get("text-rotation-alignment")==="map",Dt=g.get("text-pitch-alignment")==="map",Gt=g.get("icon-text-fit")!=="none",tn=g.get("symbol-z-order")==="viewport-y",Ht=st&&(mt||!d.hasIconData()||et),$t=mt&&(st||!d.hasTextData()||qe);!d.collisionArrays&&je&&d.deserializeCollisionBoxes(je);const dn=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),jn=(Wt,Yt,On)=>{var wr,Gn;if(o[Wt.crossTileID])return;if(Ae)return void(this.placements[Wt.crossTileID]=new Wn(!1,!1,!1));let qn=!1,Er=!1,Ci=!0,zo=null,Tr={box:null,placeable:!1,offscreen:null},gi={box:null,placeable:!1,offscreen:null},zr=null,ni=null,Li=null,xs=0,po=0,ws=0;Yt.textFeatureIndex?xs=Yt.textFeatureIndex:Wt.useRuntimeCollisionCircles&&(xs=Wt.featureIndex),Yt.verticalTextFeatureIndex&&(po=Yt.verticalTextFeatureIndex);const Ga=Yt.textBox;if(Ga){const eo=si=>{let jr=a.ah.horizontal;if(d.allowVerticalPlacement&&!si&&this.prevPlacement){const Di=this.prevPlacement.placedOrientations[Wt.crossTileID];Di&&(this.placedOrientations[Wt.crossTileID]=Di,jr=Di,this.markUsedOrientation(d,jr,Wt))}return jr},Fo=(si,jr)=>{if(d.allowVerticalPlacement&&Wt.numVerticalGlyphVertices>0&&Yt.verticalTextBox){for(const Di of d.writingModes)if(Di===a.ah.vertical?(Tr=jr(),gi=Tr):Tr=si(),Tr&&Tr.placeable)break}else Tr=si()},bs=Wt.textAnchorOffsetStartIndex,Xo=Wt.textAnchorOffsetEndIndex;if(Xo===bs){const si=(jr,Di)=>{const Kn=this.collisionIndex.placeCollisionBox(jr,Ve,we,O,X,Dt,At,I,$e.predicate,dn);return Kn&&Kn.placeable&&(this.markUsedOrientation(d,Di,Wt),this.placedOrientations[Wt.crossTileID]=Di),Kn};Fo(()=>si(Ga,a.ah.horizontal),()=>{const jr=Yt.verticalTextBox;return d.allowVerticalPlacement&&Wt.numVerticalGlyphVertices>0&&jr?si(jr,a.ah.vertical):{box:null,offscreen:null}}),eo(Tr&&Tr.placeable)}else{let si=a.aq[(Gn=(wr=this.prevPlacement)===null||wr===void 0?void 0:wr.variableOffsets[Wt.crossTileID])===null||Gn===void 0?void 0:Gn.anchor];const jr=(Kn,Oo,Ha)=>{const Ss=Kn.x2-Kn.x1,Wc=Kn.y2-Kn.y1,qc=Wt.textBoxScale,Ur=Gt&&ut==="never"?Oo:null;let Es=null,dc=Ve==="never"?1:2,ql="never";si&&dc++;for(let Za=0;Za<dc;Za++){for(let Xl=bs;Xl<Xo;Xl++){const qs=d.textAnchorOffsets.get(Xl);if(si&&qs.textAnchor!==si)continue;const Ir=this.attemptAnchorPlacement(qs,Kn,Ss,Wc,qc,At,Dt,we,O,X,$e,ql,Wt,d,Ha,I,A,Ur,dn);if(Ir&&(Es=Ir.placedGlyphBoxes,Es&&Es.placeable))return qn=!0,zo=Ir.shift,Es}si?si=null:ql=Ve}return h&&!Es&&(Es={box:this.collisionIndex.placeCollisionBox(Ga,"always",we,O,X,Dt,At,I,$e.predicate,dn,new a.P(0,0)).box,offscreen:!1,placeable:!1}),Es};Fo(()=>jr(Ga,Yt.iconBox,a.ah.horizontal),()=>{const Kn=Yt.verticalTextBox;return d.allowVerticalPlacement&&(!Tr||!Tr.placeable)&&Wt.numVerticalGlyphVertices>0&&Kn?jr(Kn,Yt.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Tr&&(qn=Tr.placeable,Ci=Tr.offscreen);const Di=eo(Tr&&Tr.placeable);if(!qn&&this.prevPlacement){const Kn=this.prevPlacement.variableOffsets[Wt.crossTileID];Kn&&(this.variableOffsets[Wt.crossTileID]=Kn,this.markUsedJustification(d,Kn.anchor,Wt,Di))}}}if(zr=Tr,qn=zr&&zr.placeable,Ci=zr&&zr.offscreen,Wt.useRuntimeCollisionCircles){const eo=d.text.placedSymbolArray.get(Wt.centerJustifiedTextSymbolIndex),Fo=a.ai(d.textSizeData,Ne,eo),bs=g.get("text-padding");ni=this.collisionIndex.placeCollisionCircles(Ve,eo,d.lineVertexArray,d.glyphOffsetArray,Fo,O,X,se,ae,h,Dt,$e.predicate,Wt.collisionCircleDiameter,bs,I,dn),ni.circles.length&&ni.collisionDetected&&!h&&a.w("Collisions detected, but collision boxes are not shown"),qn=st||ni.circles.length>0&&!ni.collisionDetected,Ci=Ci&&ni.offscreen}if(Yt.iconFeatureIndex&&(ws=Yt.iconFeatureIndex),Yt.iconBox){const eo=Fo=>this.collisionIndex.placeCollisionBox(Fo,ut,we,O,X,Dt,At,A,$e.predicate,dn,Gt&&zo?zo:void 0);gi&&gi.placeable&&Yt.verticalIconBox?(Li=eo(Yt.verticalIconBox),Er=Li.placeable):(Li=eo(Yt.iconBox),Er=Li.placeable),Ci=Ci&&Li.offscreen}const Ro=qe||Wt.numHorizontalGlyphVertices===0&&Wt.numVerticalGlyphVertices===0,qo=et||Wt.numIconVertices===0;Ro||qo?qo?Ro||(Er=Er&&qn):qn=Er&&qn:Er=qn=Er&&qn;const Ws=Er&&Li.placeable;if(qn&&zr.placeable&&this.collisionIndex.insertCollisionBox(zr.box,Ve,g.get("text-ignore-placement"),d.bucketInstanceId,gi&&gi.placeable&&po?po:xs,$e.ID),Ws&&this.collisionIndex.insertCollisionBox(Li.box,ut,g.get("icon-ignore-placement"),d.bucketInstanceId,ws,$e.ID),ni&&qn&&this.collisionIndex.insertCollisionCircles(ni.circles,Ve,g.get("text-ignore-placement"),d.bucketInstanceId,xs,$e.ID),h&&this.storeCollisionData(d.bucketInstanceId,On,Yt,zr,Li,ni),Wt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Wt.crossTileID]=new Wn(qn||Ht,Er||$t,Ci||d.justReloaded),o[Wt.crossTileID]=!0};if(tn){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Wt=d.getSortedSymbolIndexes(this.transform.angle);for(let Yt=Wt.length-1;Yt>=0;--Yt){const On=Wt[Yt];jn(d.symbolInstances.get(On),d.collisionArrays[On],On)}}else for(let Wt=e.symbolInstanceStart;Wt<e.symbolInstanceEnd;Wt++)jn(d.symbolInstances.get(Wt),d.collisionArrays[Wt],Wt);if(h&&d.bucketInstanceId in this.collisionCircleArrays){const Wt=this.collisionCircleArrays[d.bucketInstanceId];a.as(Wt.invProjMatrix,O),Wt.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(e,o,h,d,g,I){if(h.textBox||h.iconBox){let A,O;this.collisionBoxArrays.has(e)?A=this.collisionBoxArrays.get(e):(A=new Map,this.collisionBoxArrays.set(e,A)),A.has(o)?O=A.get(o):(O={text:null,icon:null},A.set(o,O)),h.textBox&&(O.text=d.box),h.iconBox&&(O.icon=g.box)}if(I){let A=this.collisionCircleArrays[e];A===void 0&&(A=this.collisionCircleArrays[e]=new ur);for(let O=0;O<I.circles.length;O+=4)A.circles.push(I.circles[O+0]),A.circles.push(I.circles[O+1]),A.circles.push(I.circles[O+2]),A.circles.push(I.collisionDetected?1:0)}}markUsedJustification(e,o,h,d){let g;g=d===a.ah.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[a.at(o)];const I=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const A of I)A>=0&&(e.text.placedSymbolArray.get(A).crossTileID=g>=0&&A!==g?0:h.crossTileID)}markUsedOrientation(e,o,h){const d=o===a.ah.horizontal||o===a.ah.horizontalOnly?o:0,g=o===a.ah.vertical?o:0,I=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const A of I)e.text.placedSymbolArray.get(A).placedOrientation=d;h.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=g)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let h=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const d=o?o.symbolFadeChange(e):1,g=o?o.opacities:{},I=o?o.variableOffsets:{},A=o?o.placedOrientations:{};for(const O in this.placements){const X=this.placements[O],se=g[O];se?(this.opacities[O]=new _r(se,d,X.text,X.icon),h=h||X.text!==se.text.placed||X.icon!==se.icon.placed):(this.opacities[O]=new _r(null,d,X.text,X.icon,X.skipFade),h=h||X.text||X.icon)}for(const O in g){const X=g[O];if(!this.opacities[O]){const se=new _r(X,d,!1,!1);se.isHidden()||(this.opacities[O]=se,h=h||X.text.placed||X.icon.placed)}}for(const O in I)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=I[O]);for(const O in A)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=A[O]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:e)}updateLayerOpacities(e,o){const h={};for(const d of o){const g=d.getBucket(e);g&&d.latestFeatureIndex&&e.id===g.layerIds[0]&&this.updateBucketOpacities(g,d.tileID,h,d.collisionBoxArray)}}updateBucketOpacities(e,o,h,d){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const g=e.layers[0],I=g.layout,A=new _r(null,0,!1,!1,!0),O=I.get("text-allow-overlap"),X=I.get("icon-allow-overlap"),se=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ae=I.get("text-rotation-alignment")==="map",we=I.get("text-pitch-alignment")==="map",Ae=I.get("icon-text-fit")!=="none",je=new _r(null,0,O&&(X||!e.hasIconData()||I.get("icon-optional")),X&&(O||!e.hasTextData()||I.get("text-optional")),!0);!e.collisionArrays&&d&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(d);const Ne=(qe,et,Ve)=>{for(let st=0;st<et/4;st++)qe.opacityVertexArray.emplaceBack(Ve);qe.hasVisibleVertices=qe.hasVisibleVertices||Ve!==Ri},$e=this.collisionBoxArrays.get(e.bucketInstanceId);for(let qe=0;qe<e.symbolInstances.length;qe++){const et=e.symbolInstances.get(qe),{numHorizontalGlyphVertices:Ve,numVerticalGlyphVertices:st,crossTileID:ut}=et;let mt=this.opacities[ut];h[ut]?mt=A:mt||(mt=je,this.opacities[ut]=mt),h[ut]=!0;const At=et.numIconVertices>0,Dt=this.placedOrientations[et.crossTileID],Gt=Dt===a.ah.vertical,tn=Dt===a.ah.horizontal||Dt===a.ah.horizontalOnly;if(Ve>0||st>0){const $t=Ei(mt.text);Ne(e.text,Ve,Gt?Ri:$t),Ne(e.text,st,tn?Ri:$t);const dn=mt.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(Yt=>{Yt>=0&&(e.text.placedSymbolArray.get(Yt).hidden=dn||Gt?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=dn||tn?1:0);const jn=this.variableOffsets[et.crossTileID];jn&&this.markUsedJustification(e,jn.anchor,et,Dt);const Wt=this.placedOrientations[et.crossTileID];Wt&&(this.markUsedJustification(e,"left",et,Wt),this.markUsedOrientation(e,Wt,et))}if(At){const $t=Ei(mt.icon),dn=!(Ae&&et.verticalPlacedIconSymbolIndex&&Gt);et.placedIconSymbolIndex>=0&&(Ne(e.icon,et.numIconVertices,dn?$t:Ri),e.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=mt.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(Ne(e.icon,et.numVerticalIconVertices,dn?Ri:$t),e.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=mt.icon.isHidden())}const Ht=$e&&$e.has(qe)?$e.get(qe):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const $t=e.collisionArrays[qe];if($t){let dn=new a.P(0,0);if($t.textBox||$t.verticalTextBox){let jn=!0;if(se){const Wt=this.variableOffsets[ut];Wt?(dn=ci(Wt.anchor,Wt.width,Wt.height,Wt.textOffset,Wt.textBoxScale),ae&&dn._rotate(we?this.transform.angle:-this.transform.angle)):jn=!1}if($t.textBox||$t.verticalTextBox){let Wt;$t.textBox&&(Wt=Gt),$t.verticalTextBox&&(Wt=tn),as(e.textCollisionBox.collisionVertexArray,mt.text.placed,!jn||Wt,Ht.text,dn.x,dn.y)}}if($t.iconBox||$t.verticalIconBox){const jn=!!(!tn&&$t.verticalIconBox);let Wt;$t.iconBox&&(Wt=jn),$t.verticalIconBox&&(Wt=!jn),as(e.iconCollisionBox.collisionVertexArray,mt.icon.placed,Wt,Ht.icon,Ae?dn.x:0,Ae?dn.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const qe=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=qe.invProjMatrix,e.placementViewportMatrix=qe.viewportMatrix,e.collisionCircleArray=qe.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,o){const h=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*h>e}setStale(){this.stale=!0}}function as(y,e,o,h,d,g){h&&h.length!==0||(h=[0,0,0,0]);const I=h[0]-Fn,A=h[1]-Fn,O=h[2]-Fn,X=h[3]-Fn;y.emplaceBack(e?1:0,o?1:0,d||0,g||0,I,A),y.emplaceBack(e?1:0,o?1:0,d||0,g||0,O,A),y.emplaceBack(e?1:0,o?1:0,d||0,g||0,O,X),y.emplaceBack(e?1:0,o?1:0,d||0,g||0,I,X)}const Pn=Math.pow(2,25),Sl=Math.pow(2,24),Xn=Math.pow(2,17),Jr=Math.pow(2,16),Si=Math.pow(2,9),Rc=Math.pow(2,8),qi=Math.pow(2,1);function Ei(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const e=y.placed?1:0,o=Math.floor(127*y.opacity);return o*Pn+e*Sl+o*Xn+e*Jr+o*Si+e*Rc+o*qi+e}const Ri=0;function Fi(){return{isOccluded:(y,e,o)=>!1,getPitchedTextCorrection:(y,e,o)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,e,o,h){throw new Error("Not implemented.")},translatePosition:(y,e,o,h)=>function(d,g,I,A,O=!1){if(!I[0]&&!I[1])return[0,0];const X=O?A==="map"?d.angle:0:A==="viewport"?-d.angle:0;if(X){const se=Math.sin(X),ae=Math.cos(X);I=[I[0]*ae-I[1]*se,I[0]*se+I[1]*ae]}return[O?I[0]:Un(g,I[0],d.zoom),O?I[1]:Un(g,I[1],d.zoom)]}(y,e,o,h),getCircleRadiusCorrection:y=>1}}class fr{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,o,h,d,g){const I=this._bucketParts;for(;this._currentTileIndex<e.length;)if(o.getBucketParts(I,d,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((A,O)=>A.sortKey-O.sortKey));this._currentPartIndex<I.length;)if(o.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,g())return!0;return!1}}class Qa{constructor(e,o,h,d,g,I,A,O){this.placement=new zi(e,Fi(),o,I,A,O),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(e,o,h){const d=C.now(),g=()=>!this._forceFullPlacement&&C.now()-d>2;for(;this._currentPlacementIndex>=0;){const I=o[e[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=A)&&(!I.maxzoom||I.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new fr(I)),this._inProgressLayer.continuePlacement(h[I.source],this.placement,this._showCollisionBoxes,I,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Eo=512/a.X/2;class Gr{constructor(e,o,h){this.tileID=e,this.bucketInstanceId=h,this._symbolsByKey={};const d=new Map;for(let g=0;g<o.length;g++){const I=o.get(g),A=I.key,O=d.get(A);O?O.push(I):d.set(A,[I])}for(const[g,I]of d){const A={positions:I.map(O=>({x:Math.floor(O.anchorX*Eo),y:Math.floor(O.anchorY*Eo)})),crossTileIDs:I.map(O=>O.crossTileID)};if(A.positions.length>128){const O=new a.av(A.positions.length,16,Uint16Array);for(const{x:X,y:se}of A.positions)O.add(X,se);O.finish(),delete A.positions,A.index=O}this._symbolsByKey[g]=A}}getScaledCoordinates(e,o){const{x:h,y:d,z:g}=this.tileID.canonical,{x:I,y:A,z:O}=o.canonical,X=Eo/Math.pow(2,O-g),se=(A*a.X+e.anchorY)*X,ae=d*a.X*Eo;return{x:Math.floor((I*a.X+e.anchorX)*X-h*a.X*Eo),y:Math.floor(se-ae)}}findMatches(e,o,h){const d=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let g=0;g<e.length;g++){const I=e.get(g);if(I.crossTileID)continue;const A=this._symbolsByKey[I.key];if(!A)continue;const O=this.getScaledCoordinates(I,o);if(A.index){const X=A.index.range(O.x-d,O.y-d,O.x+d,O.y+d).sort();for(const se of X){const ae=A.crossTileIDs[se];if(!h[ae]){h[ae]=!0,I.crossTileID=ae;break}}}else if(A.positions)for(let X=0;X<A.positions.length;X++){const se=A.positions[X],ae=A.crossTileIDs[X];if(Math.abs(se.x-O.x)<=d&&Math.abs(se.y-O.y)<=d&&!h[ae]){h[ae]=!0,I.crossTileID=ae;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class ea{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Dr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const o=Math.round((e-this.lng)/360);if(o!==0)for(const h in this.indexes){const d=this.indexes[h],g={};for(const I in d){const A=d[I];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+o),g[A.tileID.key]=A}this.indexes[h]=g}this.lng=e}addBucket(e,o,h){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let g=0;g<o.symbolInstances.length;g++)o.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const d=this.usedCrossTileIDs[e.overscaledZ];for(const g in this.indexes){const I=this.indexes[g];if(Number(g)>e.overscaledZ)for(const A in I){const O=I[A];O.tileID.isChildOf(e)&&O.findMatches(o.symbolInstances,e,d)}else{const A=I[e.scaledTo(Number(g)).key];A&&A.findMatches(o.symbolInstances,e,d)}}for(let g=0;g<o.symbolInstances.length;g++){const I=o.symbolInstances.get(g);I.crossTileID||(I.crossTileID=h.generate(),d[I.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Gr(e,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(e,o){for(const h of o.getCrossTileIDsLists())for(const d of h)delete this.usedCrossTileIDs[e][d]}removeStaleBuckets(e){let o=!1;for(const h in this.indexes){const d=this.indexes[h];for(const g in d)e[d[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,d[g]),delete d[g],o=!0)}return o}}class ta{constructor(){this.layerIndexes={},this.crossTileIDs=new ea,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,o,h){let d=this.layerIndexes[e.id];d===void 0&&(d=this.layerIndexes[e.id]=new Dr);let g=!1;const I={};d.handleWrapJump(h);for(const A of o){const O=A.getBucket(e);O&&e.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(A.tileID,O,this.crossTileIDs)&&(g=!0),I[O.bucketInstanceId]=!0)}return d.removeStaleBuckets(I)&&(g=!0),g}pruneUnusedLayers(e){const o={};e.forEach(h=>{o[h]=!0});for(const h in this.layerIndexes)o[h]||delete this.layerIndexes[h]}}const Ui=(y,e)=>a.t(y,e&&e.filter(o=>o.identifier!=="source.canvas")),Fc=a.aw();class El extends a.E{constructor(e,o={}){super(),this._rtlPluginLoaded=()=>{for(const h in this.sourceCaches){const d=this.sourceCaches[h].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[h].reload()}},this.map=e,this.dispatcher=new Lt(Tt(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,d)=>this.getGlyphs(h,d)),this.dispatcher.registerMessageHandler("GI",(h,d)=>this.getImages(h,d)),this.imageManager=new W,this.imageManager.setEventedParent(this),this.glyphManager=new te(e._requestManager,o.localIdeographFontFamily),this.lineAtlas=new Oe(256,512),this.crossTileSymbolIndex=new ta,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),Je().on(z,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const d=this.sourceCaches[h.sourceId];if(!d)return;const g=d.getSource();if(g&&g.vectorLayerIds)for(const I in this._layers){const A=this._layers[I];A.source===g.id&&this._validateLayer(A)}})}loadURL(e,o={},h){this.fire(new a.k("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const d=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const g=this._loadStyleRequest;a.h(d,this._loadStyleRequest).then(I=>{this._loadStyleRequest=null,this._load(I.data,o,h)}).catch(I=>{this._loadStyleRequest=null,I&&!g.signal.aborted&&this.fire(new a.j(I))})}loadJSON(e,o={},h){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(e,o,h)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(Fc,{validate:!1})}_load(e,o,h){var d;const g=o.transformStyle?o.transformStyle(h,e):e;if(!o.validate||!Ui(this,a.u(g))){this._loaded=!0,this.stylesheet=g;for(const I in g.sources)this.addSource(I,g.sources[I],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new be(this.stylesheet.light),this.sky=new Fe(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const e=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of e){const h=a.aA(o);h.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=h}}_loadSprite(e,o=!1,h=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(g,I,A,O){return a._(this,void 0,void 0,function*(){const X=U(g),se=A>1?"@2x":"",ae={},we={};for(const{id:Ae,url:je}of X){const Ne=I.transformRequest(de(je,se,".json"),"SpriteJSON");ae[Ae]=a.h(Ne,O);const $e=I.transformRequest(de(je,se,".png"),"SpriteImage");we[Ae]=ve.getImage($e,O)}return yield Promise.all([...Object.values(ae),...Object.values(we)]),function(Ae,je){return a._(this,void 0,void 0,function*(){const Ne={};for(const $e in Ae){Ne[$e]={};const qe=C.getImageCanvasContext((yield je[$e]).data),et=(yield Ae[$e]).data;for(const Ve in et){const{width:st,height:ut,x:mt,y:At,sdf:Dt,pixelRatio:Gt,stretchX:tn,stretchY:Ht,content:$t,textFitWidth:dn,textFitHeight:jn}=et[Ve];Ne[$e][Ve]={data:null,pixelRatio:Gt,sdf:Dt,stretchX:tn,stretchY:Ht,content:$t,textFitWidth:dn,textFitHeight:jn,spriteData:{width:st,height:ut,x:mt,y:At,context:qe}}}}return Ne})}(ae,we)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(g=>{if(this._spriteRequest=null,g)for(const I in g){this._spritesImagesIds[I]=[];const A=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(O=>!(O in g)):[];for(const O of A)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in g[I]){const X=I==="default"?O:`${I}:${O}`;this._spritesImagesIds[I].push(X),X in this.imageManager.images?this.imageManager.updateImage(X,g[I][O],!1):this.imageManager.addImage(X,g[I][O]),o&&(this._changedImages[X]=!0)}}}).catch(g=>{this._spriteRequest=null,d=g,this.fire(new a.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),h&&h(d)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(e){const o=this.sourceCaches[e.source];if(!o)return;const h=e.sourceLayer;if(!h)return;const d=o.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(h)===-1)&&this.fire(new a.j(new Error(`Source layer "${h}" does not exist on source "${d.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,o=!1){const h=this._serializedAllLayers();if(!e||e.length===0)return Object.values(o?a.aB(h):h);const d=[];for(const g of e)if(h[g]){const I=o?a.aB(h[g]):h[g];d.push(I)}return d}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const o=Object.keys(this._layers);for(const h of o){const d=this._layers[h];d.type!=="custom"&&(e[h]=d.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const o=this._changed;if(o){const d=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);(d.length||g.length)&&this._updateWorkerLayers(d,g);for(const I in this._updatedSources){const A=this._updatedSources[I];if(A==="reload")this._reloadSource(I);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const h={};for(const d in this.sourceCaches){const g=this.sourceCaches[d];h[d]=g.used,g.used=!1}for(const d of this._order){const g=this._layers[d];g.recalculate(e,this._availableImages),!g.isHidden(e.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(const d in h){const g=this.sourceCaches[d];!!h[d]!=!!g.used&&g.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,o&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,o={}){var h;this._checkLoaded();const d=this.serialize();if(e=o.transformStyle?o.transformStyle(d,e):e,((h=o.validate)===null||h===void 0||h)&&Ui(this,a.u(e)))return!1;(e=a.aB(e)).layers=a.az(e.layers);const g=a.aC(d,e),I=this._getOperationsToPerform(g);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const A of I.operations)A();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const o=[],h=[];for(const d of e)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":o.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":o.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":o.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":o.push(()=>{});break;default:h.push(d.command)}return{operations:o,unimplemented:h}}addImage(e,o){if(this.getImage(e))return this.fire(new a.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,o),this._afterImageUpdated(e)}updateImage(e,o){this.imageManager.updateImage(e,o)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new a.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,o,h={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(a.u.source,`sources.${e}`,o,null,h))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const d=this.sourceCaches[e]=new Bt(e,o,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:e})),d.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===e)return this.fire(new a.j(new Error(`Source "${e}" cannot be removed while layer "${h}" is using it.`)));const o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,o){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const h=this.sourceCaches[e].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(o),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,o,h={}){this._checkLoaded();const d=e.id;if(this.getLayer(d))return void this.fire(new a.j(new Error(`Layer "${d}" already exists on this map.`)));let g;if(e.type==="custom"){if(Ui(this,a.aD(e)))return;g=a.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(d,e.source),e=a.aB(e),e=a.e(e,{source:d})),this._validate(a.u.layer,`layers.${d}`,e,{arrayIndex:-1},h))return;g=a.aA(e),this._validateLayer(g),g.setEventedParent(this,{layer:{id:d}})}const I=o?this._order.indexOf(o):this._order.length;if(o&&I===-1)this.fire(new a.j(new Error(`Cannot add layer "${d}" before non-existing layer "${o}".`)));else{if(this._order.splice(I,0,d),this._layerOrderChanged=!0,this._layers[d]=g,this._removedLayers[d]&&g.source&&g.type!=="custom"){const A=this._removedLayers[d];delete this._removedLayers[d],A.type!==g.type?this._updatedSources[g.source]="clear":(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause())}this._updateLayer(g),g.onAdd&&g.onAdd(this.map)}}moveLayer(e,o){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new a.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===o)return;const h=this._order.indexOf(e);this._order.splice(h,1);const d=o?this._order.indexOf(o):this._order.length;o&&d===-1?this.fire(new a.j(new Error(`Cannot move layer "${e}" before non-existing layer "${o}".`))):(this._order.splice(d,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const o=this._layers[e];if(!o)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${e}".`)));o.setEventedParent(null);const h=this._order.indexOf(e);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=o,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],o.onRemove&&o.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,o,h){this._checkLoaded();const d=this.getLayer(e);d?d.minzoom===o&&d.maxzoom===h||(o!=null&&(d.minzoom=o),h!=null&&(d.maxzoom=h),this._updateLayer(d)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,o,h={}){this._checkLoaded();const d=this.getLayer(e);if(d){if(!a.aE(d.filter,o))return o==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(a.u.filter,`layers.${d.id}.filter`,o,null,h)||(d.filter=a.aB(o),this._updateLayer(d)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return a.aB(this.getLayer(e).filter)}setLayoutProperty(e,o,h,d={}){this._checkLoaded();const g=this.getLayer(e);g?a.aE(g.getLayoutProperty(o),h)||(g.setLayoutProperty(o,h,d),this._updateLayer(g)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,o){const h=this.getLayer(e);if(h)return h.getLayoutProperty(o);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,o,h,d={}){this._checkLoaded();const g=this.getLayer(e);g?a.aE(g.getPaintProperty(o),h)||(g.setPaintProperty(o,h,d)&&this._updateLayer(g),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,o){return this.getLayer(e).getPaintProperty(o)}setFeatureState(e,o){this._checkLoaded();const h=e.source,d=e.sourceLayer,g=this.sourceCaches[h];if(g===void 0)return void this.fire(new a.j(new Error(`The source '${h}' does not exist in the map's style.`)));const I=g.getSource().type;I==="geojson"&&d?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||d?(e.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),g.setFeatureState(d,e.id,o)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,o){this._checkLoaded();const h=e.source,d=this.sourceCaches[h];if(d===void 0)return void this.fire(new a.j(new Error(`The source '${h}' does not exist in the map's style.`)));const g=d.getSource().type,I=g==="vector"?e.sourceLayer:void 0;g!=="vector"||I?o&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(I,e.id,o):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const o=e.source,h=e.sourceLayer,d=this.sourceCaches[o];if(d!==void 0)return d.getSource().type!=="vector"||h?(e.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(h,e.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=a.aF(this.sourceCaches,g=>g.serialize()),o=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,d=this.stylesheet;return a.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:e,layers:o,terrain:h},g=>g!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const o=I=>this._layers[I].type==="fill-extrusion",h={},d=[];for(let I=this._order.length-1;I>=0;I--){const A=this._order[I];if(o(A)){h[A]=I;for(const O of e){const X=O[A];if(X)for(const se of X)d.push(se)}}}d.sort((I,A)=>A.intersectionZ-I.intersectionZ);const g=[];for(let I=this._order.length-1;I>=0;I--){const A=this._order[I];if(o(A))for(let O=d.length-1;O>=0;O--){const X=d[O].feature;if(h[X.layer.id]<I)break;g.push(X),d.pop()}else for(const O of e){const X=O[A];if(X)for(const se of X)g.push(se.feature)}}return g}queryRenderedFeatures(e,o,h){o&&o.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",o.filter,null,o);const d={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const A of o.layers){const O=this._layers[A];if(!O)return this.fire(new a.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];d[O.source]=!0}}const g=[];o.availableImages=this._availableImages;const I=this._serializedAllLayers();for(const A in this.sourceCaches)o.layers&&!d[A]||g.push(Jt(this.sourceCaches[A],this._layers,I,e,o,h));return this.placement&&g.push(function(A,O,X,se,ae,we,Ae){const je={},Ne=we.queryRenderedSymbols(se),$e=[];for(const qe of Object.keys(Ne).map(Number))$e.push(Ae[qe]);$e.sort(cn);for(const qe of $e){const et=qe.featureIndex.lookupSymbolFeatures(Ne[qe.bucketInstanceId],O,qe.bucketIndex,qe.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,A);for(const Ve in et){const st=je[Ve]=je[Ve]||[],ut=et[Ve];ut.sort((mt,At)=>{const Dt=qe.featureSortOrder;if(Dt){const Gt=Dt.indexOf(mt.featureIndex);return Dt.indexOf(At.featureIndex)-Gt}return At.featureIndex-mt.featureIndex});for(const mt of ut)st.push(mt)}}for(const qe in je)je[qe].forEach(et=>{const Ve=et.feature,st=X[A[qe].source].getFeatureState(Ve.layer["source-layer"],Ve.id);Ve.source=Ve.layer.source,Ve.layer["source-layer"]&&(Ve.sourceLayer=Ve.layer["source-layer"]),Ve.state=st});return je}(this._layers,I,this.sourceCaches,e,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)}querySourceFeatures(e,o){o&&o.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",o.filter,null,o);const h=this.sourceCaches[e];return h?function(d,g){const I=d.getRenderableIds().map(X=>d.getTileByID(X)),A=[],O={};for(let X=0;X<I.length;X++){const se=I[X],ae=se.tileID.canonical.key;O[ae]||(O[ae]=!0,se.querySourceFeatures(A,g))}return A}(h,o):[]}getLight(){return this.light.getLight()}setLight(e,o={}){this._checkLoaded();const h=this.light.getLight();let d=!1;for(const I in e)if(!a.aE(e[I],h[I])){d=!0;break}if(!d)return;const g={now:C.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,o),this.light.updateTransitions(g)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,o={}){const h=this.getSky();let d=!1;if(!e&&!h)return;if(e&&!h)d=!0;else if(!e&&h)d=!0;else for(const I in e)if(!a.aE(e[I],h[I])){d=!0;break}if(!d)return;const g={now:C.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,o),this.sky.updateTransitions(g)}_validate(e,o,h,d,g={}){return(!g||g.validate!==!1)&&Ui(this,e.call(a.u,a.e({key:o,style:this.serialize(),value:h,styleSpec:a.v},d)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Je().off(z,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const h=this.sourceCaches[o];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const o in this.sourceCaches)this.sourceCaches[o].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,o,h,d,g=!1){let I=!1,A=!1;const O={};for(const X of this._order){const se=this._layers[X];if(se.type!=="symbol")continue;if(!O[se.source]){const we=this.sourceCaches[se.source];O[se.source]=we.getRenderableIds(!0).map(Ae=>we.getTileByID(Ae)).sort((Ae,je)=>je.tileID.overscaledZ-Ae.tileID.overscaledZ||(Ae.tileID.isLessThan(je.tileID)?-1:1))}const ae=this.crossTileSymbolIndex.addLayer(se,O[se.source],e.center.lng);I=I||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((g=g||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(C.now(),e.zoom))&&(this.pauseablePlacement=new Qa(e,this.map.terrain,this._order,g,o,h,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(C.now()),A=!0),I&&this.pauseablePlacement.placement.setStale()),A||I)for(const X of this._order){const se=this._layers[X];se.type==="symbol"&&this.placement.updateLayerOpacities(se,O[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(C.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,o){return a._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,o.icons),h})}getGlyphs(e,o){return a._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(o.stacks),d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,o={}){this._checkLoaded(),e&&this._validate(a.u.glyphs,"glyphs",e,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,o,h={},d){this._checkLoaded();const g=[{id:e,url:o}],I=[...U(this.stylesheet.sprite),...g];this._validate(a.u.sprite,"sprite",I,null,h)||(this.stylesheet.sprite=I,this._loadSprite(g,!0,d))}removeSprite(e){this._checkLoaded();const o=U(this.stylesheet.sprite);if(o.find(h=>h.id===e)){if(this._spritesImagesIds[e])for(const h of this._spritesImagesIds[e])this.imageManager.removeImage(h),this._changedImages[h]=!0;o.splice(o.findIndex(h=>h.id===e),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return U(this.stylesheet.sprite)}setSprite(e,o={},h){this._checkLoaded(),e&&this._validate(a.u.sprite,"sprite",e,null,o)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,h):(this._unloadSprite(),h&&h(null)))}}var ls=a.Y([{name:"a_pos",type:"Int16",components:2}]);const io={prelude:nr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:nr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:nr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:nr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:nr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:nr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:nr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:nr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:nr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:nr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:nr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:nr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:nr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:nr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:nr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:nr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:nr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:nr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:nr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:nr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:nr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:nr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:nr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:nr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:nr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:nr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:nr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:nr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:nr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function nr(y,e){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=e.match(/attribute ([\w]+) ([\w]+)/g),d=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=g?g.concat(d):d,A={};return{fragmentSource:y=y.replace(o,(O,X,se,ae,we)=>(A[we]=!0,X==="define"?`
#ifndef HAS_UNIFORM_u_${we}
varying ${se} ${ae} ${we};
#else
uniform ${se} ${ae} u_${we};
#endif
`:`
#ifdef HAS_UNIFORM_u_${we}
    ${se} ${ae} ${we} = u_${we};
#endif
`)),vertexSource:e=e.replace(o,(O,X,se,ae,we)=>{const Ae=ae==="float"?"vec2":"vec4",je=we.match(/color/)?"color":Ae;return A[we]?X==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
attribute ${se} ${Ae} a_${we};
varying ${se} ${ae} ${we};
#else
uniform ${se} ${ae} u_${we};
#endif
`:je==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = a_${we};
#else
    ${se} ${ae} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = unpack_mix_${je}(a_${we}, u_${we}_t);
#else
    ${se} ${ae} ${we} = u_${we};
#endif
`:X==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
attribute ${se} ${Ae} a_${we};
#else
uniform ${se} ${ae} u_${we};
#endif
`:je==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${se} ${ae} ${we} = a_${we};
#else
    ${se} ${ae} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${se} ${ae} ${we} = unpack_mix_${je}(a_${we}, u_${we}_t);
#else
    ${se} ${ae} ${we} = u_${we};
#endif
`}),staticAttributes:h,staticUniforms:I}}class na{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,o,h,d,g,I,A,O,X){this.context=e;let se=this.boundPaintVertexBuffers.length!==d.length;for(let ae=0;!se&&ae<d.length;ae++)this.boundPaintVertexBuffers[ae]!==d[ae]&&(se=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==h||se||this.boundIndexBuffer!==g||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==X?this.freshBind(o,h,d,g,I,A,O,X):(e.bindVertexArray.set(this.vao),A&&A.bind(),g&&g.dynamicDraw&&g.bind(),O&&O.bind(),X&&X.bind())}freshBind(e,o,h,d,g,I,A,O){const X=e.numAttributes,se=this.context,ae=se.gl;this.vao&&this.destroy(),this.vao=se.createVertexArray(),se.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=d,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=O,o.enableAttributes(ae,e);for(const we of h)we.enableAttributes(ae,e);I&&I.enableAttributes(ae,e),A&&A.enableAttributes(ae,e),O&&O.enableAttributes(ae,e),o.bind(),o.setVertexAttribPointers(ae,e,g);for(const we of h)we.bind(),we.setVertexAttribPointers(ae,e,g);I&&(I.bind(),I.setVertexAttribPointers(ae,e,g)),d&&d.bind(),A&&(A.bind(),A.setVertexAttribPointers(ae,e,g)),O&&(O.bind(),O.setVertexAttribPointers(ae,e,g)),se.currentNumAttributes=X}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Xi=(y,e,o,h,d)=>({u_matrix:y,u_texture:0,u_ele_delta:e,u_fog_matrix:o,u_fog_color:h?h.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:h?h.calculateFogBlendOpacity(d):0,u_horizon_color:h?h.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1});function Ls(y){const e=[];for(let o=0;o<y.length;o++){if(y[o]===null)continue;const h=y[o].split(" ");e.push(h.pop())}return e}class cr{constructor(e,o,h,d,g,I){const A=e.gl;this.program=A.createProgram();const O=Ls(o.staticAttributes),X=h?h.getBinderAttributes():[],se=O.concat(X),ae=io.prelude.staticUniforms?Ls(io.prelude.staticUniforms):[],we=o.staticUniforms?Ls(o.staticUniforms):[],Ae=h?h.getBinderUniforms():[],je=ae.concat(we).concat(Ae),Ne=[];for(const mt of je)Ne.indexOf(mt)<0&&Ne.push(mt);const $e=h?h.defines():[];g&&$e.push("#define OVERDRAW_INSPECTOR;"),I&&$e.push("#define TERRAIN3D;");const qe=$e.concat(io.prelude.fragmentSource,o.fragmentSource).join(`
`),et=$e.concat(io.prelude.vertexSource,o.vertexSource).join(`
`),Ve=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ve,qe),A.compileShader(Ve),!A.getShaderParameter(Ve,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Ve)}`);A.attachShader(this.program,Ve);const st=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(st,et),A.compileShader(st),!A.getShaderParameter(st,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(st)}`);A.attachShader(this.program,st),this.attributes={};const ut={};this.numAttributes=se.length;for(let mt=0;mt<this.numAttributes;mt++)se[mt]&&(A.bindAttribLocation(this.program,mt,se[mt]),this.attributes[se[mt]]=mt);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(st),A.deleteShader(Ve);for(let mt=0;mt<Ne.length;mt++){const At=Ne[mt];if(At&&!ut[At]){const Dt=A.getUniformLocation(this.program,At);Dt&&(ut[At]=Dt)}}this.fixedUniforms=d(e,ut),this.terrainUniforms=((mt,At)=>({u_depth:new a.aH(mt,At.u_depth),u_terrain:new a.aH(mt,At.u_terrain),u_terrain_dim:new a.aI(mt,At.u_terrain_dim),u_terrain_matrix:new a.aJ(mt,At.u_terrain_matrix),u_terrain_unpack:new a.aK(mt,At.u_terrain_unpack),u_terrain_exaggeration:new a.aI(mt,At.u_terrain_exaggeration)}))(e,ut),this.binderUniforms=h?h.getUniforms(e,ut):[]}draw(e,o,h,d,g,I,A,O,X,se,ae,we,Ae,je,Ne,$e,qe,et){const Ve=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(h),e.setStencilMode(d),e.setColorMode(g),e.setCullFace(I),O){e.activeTexture.set(Ve.TEXTURE2),Ve.bindTexture(Ve.TEXTURE_2D,O.depthTexture),e.activeTexture.set(Ve.TEXTURE3),Ve.bindTexture(Ve.TEXTURE_2D,O.texture);for(const ut in this.terrainUniforms)this.terrainUniforms[ut].set(O[ut])}for(const ut in this.fixedUniforms)this.fixedUniforms[ut].set(A[ut]);Ne&&Ne.setUniforms(e,this.binderUniforms,Ae,{zoom:je});let st=0;switch(o){case Ve.LINES:st=2;break;case Ve.TRIANGLES:st=3;break;case Ve.LINE_STRIP:st=1}for(const ut of we.get()){const mt=ut.vaos||(ut.vaos={});(mt[X]||(mt[X]=new na)).bind(e,this,se,Ne?Ne.getPaintVertexBuffers():[],ae,ut.vertexOffset,$e,qe,et),Ve.drawElements(o,ut.primitiveLength*st,Ve.UNSIGNED_SHORT,ut.primitiveOffset*st*2)}}}function el(y,e,o){const h=1/Un(o,1,e.transform.tileZoom),d=Math.pow(2,o.tileID.overscaledZ),g=o.tileSize*Math.pow(2,e.transform.tileZoom)/d,I=g*(o.tileID.canonical.x+o.tileID.wrap*d),A=g*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[h,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[I>>16,A>>16],u_pixel_coord_lower:[65535&I,65535&A]}}const za=(y,e,o,h)=>{const d=e.style.light,g=d.properties.get("position"),I=[g.x,g.y,g.z],A=function(){var X=new a.A(9);return a.A!=Float32Array&&(X[1]=0,X[2]=0,X[3]=0,X[5]=0,X[6]=0,X[7]=0),X[0]=1,X[4]=1,X[8]=1,X}();d.properties.get("anchor")==="viewport"&&function(X,se){var ae=Math.sin(se),we=Math.cos(se);X[0]=we,X[1]=ae,X[2]=0,X[3]=-ae,X[4]=we,X[5]=0,X[6]=0,X[7]=0,X[8]=1}(A,-e.transform.angle),function(X,se,ae){var we=se[0],Ae=se[1],je=se[2];X[0]=we*ae[0]+Ae*ae[3]+je*ae[6],X[1]=we*ae[1]+Ae*ae[4]+je*ae[7],X[2]=we*ae[2]+Ae*ae[5]+je*ae[8]}(I,I,A);const O=d.properties.get("color");return{u_matrix:y,u_lightpos:I,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+o,u_opacity:h}},Ra=(y,e,o,h,d,g,I)=>a.e(za(y,e,o,h),el(g,e,I),{u_height_factor:-Math.pow(2,d.overscaledZ)/I.tileSize/8}),Ds=y=>({u_matrix:y}),tl=(y,e,o,h)=>a.e(Ds(y),el(o,e,h)),vu=(y,e)=>({u_matrix:y,u_world:e}),ra=(y,e,o,h,d)=>a.e(tl(y,e,o,h),{u_world:d}),Tl=(y,e,o,h)=>{const d=y.transform;let g,I;if(h.paint.get("circle-pitch-alignment")==="map"){const A=Un(o,1,d.zoom);g=!0,I=[A,A]}else g=!1,I=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(e.posMatrix,o,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:I}},oi=(y,e,o)=>({u_matrix:y,u_inv_matrix:e,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}),oo=(y,e,o=1)=>({u_matrix:y,u_color:e,u_overlay:0,u_overlay_scale:o}),Hr=y=>({u_matrix:y}),hi=(y,e,o,h)=>({u_matrix:y,u_extrude_scale:Un(e,1,o),u_intensity:h}),Bs=(y,e,o,h)=>{const d=a.H();a.aP(d,0,y.width,y.height,0,0,1);const g=y.context.gl;return{u_matrix:d,u_world:[g.drawingBufferWidth,g.drawingBufferHeight],u_image:o,u_color_ramp:h,u_opacity:e.paint.get("heatmap-opacity")}};function so(y,e){const o=Math.pow(2,e.canonical.z),h=e.canonical.y;return[new a.Z(0,h/o).toLngLat().lat,new a.Z(0,(h+1)/o).toLngLat().lat]}const Il=(y,e,o,h)=>{const d=y.transform;return{u_matrix:nl(y,e,o,h),u_ratio:1/Un(e,1,d.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},_u=(y,e,o,h,d)=>a.e(Il(y,e,o,d),{u_image:0,u_image_height:h}),Uo=(y,e,o,h,d)=>{const g=y.transform,I=wu(e,g);return{u_matrix:nl(y,e,o,d),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Un(e,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[I,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},xu=(y,e,o,h,d,g)=>{const I=y.lineAtlas,A=wu(e,y.transform),O=o.layout.get("line-cap")==="round",X=I.getDash(h.from,O),se=I.getDash(h.to,O),ae=X.width*d.fromScale,we=se.width*d.toScale;return a.e(Il(y,e,o,g),{u_patternscale_a:[A/ae,-X.height/2],u_patternscale_b:[A/we,-se.height/2],u_sdfgamma:I.width/(256*Math.min(ae,we)*y.pixelRatio)/2,u_image:0,u_tex_y_a:X.y,u_tex_y_b:se.y,u_mix:d.t})};function wu(y,e){return 1/Un(y,1,e.tileZoom)}function nl(y,e,o,h){return y.translatePosMatrix(h?h.posMatrix:e.tileID.posMatrix,e,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const ec=(y,e,o,h,d)=>{return{u_matrix:y,u_tl_parent:e,u_scale_parent:o,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(I=d.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(g=d.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:Oc(d.paint.get("raster-hue-rotate"))};var g,I};function Oc(y){y*=Math.PI/180;const e=Math.sin(y),o=Math.cos(y);return[(2*o+1)/3,(-Math.sqrt(3)*e-o+1)/3,(Math.sqrt(3)*e-o+1)/3]}const ia=(y,e,o,h,d,g,I,A,O,X,se,ae,we,Ae)=>{const je=I.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:je.cameraToCenterDistance,u_pitch:je.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:je.width/je.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:O,u_coord_matrix:X,u_is_text:+ae,u_pitch_with_map:+h,u_is_along_line:d,u_is_variable_anchor:g,u_texsize:we,u_texture:0,u_translation:se,u_pitched_scale:Ae}},us=(y,e,o,h,d,g,I,A,O,X,se,ae,we,Ae,je)=>{const Ne=I.transform;return a.e(ia(y,e,o,h,d,g,I,A,O,X,se,ae,we,je),{u_gamma_scale:h?Math.cos(Ne._pitch)*Ne.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:+Ae})},cs=(y,e,o,h,d,g,I,A,O,X,se,ae,we,Ae)=>a.e(us(y,e,o,h,d,g,I,A,O,X,se,!0,ae,!0,Ae),{u_texsize_icon:we,u_texture_icon:1}),oa=(y,e,o)=>({u_matrix:y,u_opacity:e,u_color:o}),bu=(y,e,o,h,d,g)=>a.e(function(I,A,O,X){const se=O.imageManager.getPattern(I.from.toString()),ae=O.imageManager.getPattern(I.to.toString()),{width:we,height:Ae}=O.imageManager.getPixelSize(),je=Math.pow(2,X.tileID.overscaledZ),Ne=X.tileSize*Math.pow(2,O.transform.tileZoom)/je,$e=Ne*(X.tileID.canonical.x+X.tileID.wrap*je),qe=Ne*X.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:ae.tl,u_pattern_br_b:ae.br,u_texsize:[we,Ae],u_mix:A.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:ae.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Un(X,1,O.transform.tileZoom),u_pixel_coord_upper:[$e>>16,qe>>16],u_pixel_coord_lower:[65535&$e,65535&qe]}}(h,g,o,d),{u_matrix:y,u_opacity:e}),Cl={fillExtrusion:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_lightpos:new a.aN(y,e.u_lightpos),u_lightintensity:new a.aI(y,e.u_lightintensity),u_lightcolor:new a.aN(y,e.u_lightcolor),u_vertical_gradient:new a.aI(y,e.u_vertical_gradient),u_opacity:new a.aI(y,e.u_opacity)}),fillExtrusionPattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_lightpos:new a.aN(y,e.u_lightpos),u_lightintensity:new a.aI(y,e.u_lightintensity),u_lightcolor:new a.aN(y,e.u_lightcolor),u_vertical_gradient:new a.aI(y,e.u_vertical_gradient),u_height_factor:new a.aI(y,e.u_height_factor),u_image:new a.aH(y,e.u_image),u_texsize:new a.aO(y,e.u_texsize),u_pixel_coord_upper:new a.aO(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(y,e.u_pixel_coord_lower),u_scale:new a.aN(y,e.u_scale),u_fade:new a.aI(y,e.u_fade),u_opacity:new a.aI(y,e.u_opacity)}),fill:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix)}),fillPattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_image:new a.aH(y,e.u_image),u_texsize:new a.aO(y,e.u_texsize),u_pixel_coord_upper:new a.aO(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(y,e.u_pixel_coord_lower),u_scale:new a.aN(y,e.u_scale),u_fade:new a.aI(y,e.u_fade)}),fillOutline:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_world:new a.aO(y,e.u_world)}),fillOutlinePattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_world:new a.aO(y,e.u_world),u_image:new a.aH(y,e.u_image),u_texsize:new a.aO(y,e.u_texsize),u_pixel_coord_upper:new a.aO(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(y,e.u_pixel_coord_lower),u_scale:new a.aN(y,e.u_scale),u_fade:new a.aI(y,e.u_fade)}),circle:(y,e)=>({u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_scale_with_map:new a.aH(y,e.u_scale_with_map),u_pitch_with_map:new a.aH(y,e.u_pitch_with_map),u_extrude_scale:new a.aO(y,e.u_extrude_scale),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_matrix:new a.aJ(y,e.u_matrix)}),collisionBox:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_pixel_extrude_scale:new a.aO(y,e.u_pixel_extrude_scale)}),collisionCircle:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_inv_matrix:new a.aJ(y,e.u_inv_matrix),u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_viewport_size:new a.aO(y,e.u_viewport_size)}),debug:(y,e)=>({u_color:new a.aL(y,e.u_color),u_matrix:new a.aJ(y,e.u_matrix),u_overlay:new a.aH(y,e.u_overlay),u_overlay_scale:new a.aI(y,e.u_overlay_scale)}),clippingMask:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix)}),heatmap:(y,e)=>({u_extrude_scale:new a.aI(y,e.u_extrude_scale),u_intensity:new a.aI(y,e.u_intensity),u_matrix:new a.aJ(y,e.u_matrix)}),heatmapTexture:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_world:new a.aO(y,e.u_world),u_image:new a.aH(y,e.u_image),u_color_ramp:new a.aH(y,e.u_color_ramp),u_opacity:new a.aI(y,e.u_opacity)}),hillshade:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_image:new a.aH(y,e.u_image),u_latrange:new a.aO(y,e.u_latrange),u_light:new a.aO(y,e.u_light),u_shadow:new a.aL(y,e.u_shadow),u_highlight:new a.aL(y,e.u_highlight),u_accent:new a.aL(y,e.u_accent)}),hillshadePrepare:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_image:new a.aH(y,e.u_image),u_dimension:new a.aO(y,e.u_dimension),u_zoom:new a.aI(y,e.u_zoom),u_unpack:new a.aK(y,e.u_unpack)}),line:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_ratio:new a.aI(y,e.u_ratio),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_units_to_pixels:new a.aO(y,e.u_units_to_pixels)}),lineGradient:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_ratio:new a.aI(y,e.u_ratio),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_units_to_pixels:new a.aO(y,e.u_units_to_pixels),u_image:new a.aH(y,e.u_image),u_image_height:new a.aI(y,e.u_image_height)}),linePattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_texsize:new a.aO(y,e.u_texsize),u_ratio:new a.aI(y,e.u_ratio),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_image:new a.aH(y,e.u_image),u_units_to_pixels:new a.aO(y,e.u_units_to_pixels),u_scale:new a.aN(y,e.u_scale),u_fade:new a.aI(y,e.u_fade)}),lineSDF:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_ratio:new a.aI(y,e.u_ratio),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_units_to_pixels:new a.aO(y,e.u_units_to_pixels),u_patternscale_a:new a.aO(y,e.u_patternscale_a),u_patternscale_b:new a.aO(y,e.u_patternscale_b),u_sdfgamma:new a.aI(y,e.u_sdfgamma),u_image:new a.aH(y,e.u_image),u_tex_y_a:new a.aI(y,e.u_tex_y_a),u_tex_y_b:new a.aI(y,e.u_tex_y_b),u_mix:new a.aI(y,e.u_mix)}),raster:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_tl_parent:new a.aO(y,e.u_tl_parent),u_scale_parent:new a.aI(y,e.u_scale_parent),u_buffer_scale:new a.aI(y,e.u_buffer_scale),u_fade_t:new a.aI(y,e.u_fade_t),u_opacity:new a.aI(y,e.u_opacity),u_image0:new a.aH(y,e.u_image0),u_image1:new a.aH(y,e.u_image1),u_brightness_low:new a.aI(y,e.u_brightness_low),u_brightness_high:new a.aI(y,e.u_brightness_high),u_saturation_factor:new a.aI(y,e.u_saturation_factor),u_contrast_factor:new a.aI(y,e.u_contrast_factor),u_spin_weights:new a.aN(y,e.u_spin_weights)}),symbolIcon:(y,e)=>({u_is_size_zoom_constant:new a.aH(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(y,e.u_is_size_feature_constant),u_size_t:new a.aI(y,e.u_size_t),u_size:new a.aI(y,e.u_size),u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_pitch:new a.aI(y,e.u_pitch),u_rotate_symbol:new a.aH(y,e.u_rotate_symbol),u_aspect_ratio:new a.aI(y,e.u_aspect_ratio),u_fade_change:new a.aI(y,e.u_fade_change),u_matrix:new a.aJ(y,e.u_matrix),u_label_plane_matrix:new a.aJ(y,e.u_label_plane_matrix),u_coord_matrix:new a.aJ(y,e.u_coord_matrix),u_is_text:new a.aH(y,e.u_is_text),u_pitch_with_map:new a.aH(y,e.u_pitch_with_map),u_is_along_line:new a.aH(y,e.u_is_along_line),u_is_variable_anchor:new a.aH(y,e.u_is_variable_anchor),u_texsize:new a.aO(y,e.u_texsize),u_texture:new a.aH(y,e.u_texture),u_translation:new a.aO(y,e.u_translation),u_pitched_scale:new a.aI(y,e.u_pitched_scale)}),symbolSDF:(y,e)=>({u_is_size_zoom_constant:new a.aH(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(y,e.u_is_size_feature_constant),u_size_t:new a.aI(y,e.u_size_t),u_size:new a.aI(y,e.u_size),u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_pitch:new a.aI(y,e.u_pitch),u_rotate_symbol:new a.aH(y,e.u_rotate_symbol),u_aspect_ratio:new a.aI(y,e.u_aspect_ratio),u_fade_change:new a.aI(y,e.u_fade_change),u_matrix:new a.aJ(y,e.u_matrix),u_label_plane_matrix:new a.aJ(y,e.u_label_plane_matrix),u_coord_matrix:new a.aJ(y,e.u_coord_matrix),u_is_text:new a.aH(y,e.u_is_text),u_pitch_with_map:new a.aH(y,e.u_pitch_with_map),u_is_along_line:new a.aH(y,e.u_is_along_line),u_is_variable_anchor:new a.aH(y,e.u_is_variable_anchor),u_texsize:new a.aO(y,e.u_texsize),u_texture:new a.aH(y,e.u_texture),u_gamma_scale:new a.aI(y,e.u_gamma_scale),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_is_halo:new a.aH(y,e.u_is_halo),u_translation:new a.aO(y,e.u_translation),u_pitched_scale:new a.aI(y,e.u_pitched_scale)}),symbolTextAndIcon:(y,e)=>({u_is_size_zoom_constant:new a.aH(y,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(y,e.u_is_size_feature_constant),u_size_t:new a.aI(y,e.u_size_t),u_size:new a.aI(y,e.u_size),u_camera_to_center_distance:new a.aI(y,e.u_camera_to_center_distance),u_pitch:new a.aI(y,e.u_pitch),u_rotate_symbol:new a.aH(y,e.u_rotate_symbol),u_aspect_ratio:new a.aI(y,e.u_aspect_ratio),u_fade_change:new a.aI(y,e.u_fade_change),u_matrix:new a.aJ(y,e.u_matrix),u_label_plane_matrix:new a.aJ(y,e.u_label_plane_matrix),u_coord_matrix:new a.aJ(y,e.u_coord_matrix),u_is_text:new a.aH(y,e.u_is_text),u_pitch_with_map:new a.aH(y,e.u_pitch_with_map),u_is_along_line:new a.aH(y,e.u_is_along_line),u_is_variable_anchor:new a.aH(y,e.u_is_variable_anchor),u_texsize:new a.aO(y,e.u_texsize),u_texsize_icon:new a.aO(y,e.u_texsize_icon),u_texture:new a.aH(y,e.u_texture),u_texture_icon:new a.aH(y,e.u_texture_icon),u_gamma_scale:new a.aI(y,e.u_gamma_scale),u_device_pixel_ratio:new a.aI(y,e.u_device_pixel_ratio),u_is_halo:new a.aH(y,e.u_is_halo),u_translation:new a.aO(y,e.u_translation),u_pitched_scale:new a.aI(y,e.u_pitched_scale)}),background:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_opacity:new a.aI(y,e.u_opacity),u_color:new a.aL(y,e.u_color)}),backgroundPattern:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_opacity:new a.aI(y,e.u_opacity),u_image:new a.aH(y,e.u_image),u_pattern_tl_a:new a.aO(y,e.u_pattern_tl_a),u_pattern_br_a:new a.aO(y,e.u_pattern_br_a),u_pattern_tl_b:new a.aO(y,e.u_pattern_tl_b),u_pattern_br_b:new a.aO(y,e.u_pattern_br_b),u_texsize:new a.aO(y,e.u_texsize),u_mix:new a.aI(y,e.u_mix),u_pattern_size_a:new a.aO(y,e.u_pattern_size_a),u_pattern_size_b:new a.aO(y,e.u_pattern_size_b),u_scale_a:new a.aI(y,e.u_scale_a),u_scale_b:new a.aI(y,e.u_scale_b),u_pixel_coord_upper:new a.aO(y,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(y,e.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(y,e.u_tile_units_to_pixels)}),terrain:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_texture:new a.aH(y,e.u_texture),u_ele_delta:new a.aI(y,e.u_ele_delta),u_fog_matrix:new a.aJ(y,e.u_fog_matrix),u_fog_color:new a.aL(y,e.u_fog_color),u_fog_ground_blend:new a.aI(y,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(y,e.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(y,e.u_horizon_color),u_horizon_fog_blend:new a.aI(y,e.u_horizon_fog_blend)}),terrainDepth:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_ele_delta:new a.aI(y,e.u_ele_delta)}),terrainCoords:(y,e)=>({u_matrix:new a.aJ(y,e.u_matrix),u_texture:new a.aH(y,e.u_texture),u_terrain_coords_id:new a.aI(y,e.u_terrain_coords_id),u_ele_delta:new a.aI(y,e.u_ele_delta)}),sky:(y,e)=>({u_sky_color:new a.aL(y,e.u_sky_color),u_horizon_color:new a.aL(y,e.u_horizon_color),u_horizon:new a.aI(y,e.u_horizon),u_sky_horizon_blend:new a.aI(y,e.u_sky_horizon_blend)})};class ao{constructor(e,o,h){this.context=e;const d=e.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rl{constructor(e,o,h,d){this.length=o.length,this.attributes=h,this.itemSize=o.bytesPerElement,this.dynamicDraw=d,this.context=e;const g=e.gl;this.buffer=g.createBuffer(),e.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,o){for(let h=0;h<this.attributes.length;h++){const d=o.attributes[this.attributes[h].name];d!==void 0&&e.enableVertexAttribArray(d)}}setVertexAttribPointers(e,o,h){for(let d=0;d<this.attributes.length;d++){const g=this.attributes[d],I=o.attributes[g.name];I!==void 0&&e.vertexAttribPointer(I,g.components,e[Pl[g.type]],!1,this.itemSize,g.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ns=new WeakMap;function Ti(y){var e;if(Ns.has(y))return Ns.get(y);{const o=(e=y.getParameter(y.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Ns.set(y,o),o}}class rr{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class hs extends rr{getDefault(){return a.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class tc extends rr{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class ds extends rr{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Al extends rr{getDefault(){return[!0,!0,!0,!0]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Su extends rr{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Ki extends rr{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class sa extends rr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const o=this.current;(e.func!==o.func||e.ref!==o.ref||e.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Fa extends rr{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Us extends rr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=e,this.dirty=!1}}class nc extends rr{getDefault(){return[0,1]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ml extends rr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=e,this.dirty=!1}}class kl extends rr{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class To extends rr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.BLEND):o.disable(o.BLEND),this.current=e,this.dirty=!1}}class Oa extends rr{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class rc extends rr{getDefault(){return a.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ic extends rr{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class il extends rr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=e,this.dirty=!1}}class jc extends rr{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class fs extends rr{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Lc extends rr{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class ja extends rr{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Eu extends rr{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Io extends rr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class oc extends rr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class zl extends rr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class sc extends rr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Rl extends rr{getDefault(){return null}set(e){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Co extends rr{getDefault(){return null}set(e){var o;if(e===this.current&&!this.dirty)return;const h=this.gl;Ti(h)?h.bindVertexArray(e):(o=h.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Tu extends rr{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Vs extends rr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Iu extends rr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Fl extends rr{constructor(e,o){super(e),this.context=e,this.parent=o}getDefault(){return null}}class La extends Fl{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class ps extends Fl{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ol extends Fl{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Dc{constructor(e,o,h,d,g){this.context=e,this.width=o,this.height=h;const I=e.gl,A=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new La(e,A),d)this.depthAttachment=g?new Ol(e,A):new ps(e,A);else if(g)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,o=this.colorAttachment.get();if(o&&e.deleteTexture(o),this.depthAttachment){const h=this.depthAttachment.get();h&&e.deleteRenderbuffer(h)}e.deleteFramebuffer(this.framebuffer)}}class Br{constructor(e,o,h){this.blendFunction=e,this.blendColor=o,this.mask=h}}Br.Replace=[1,0],Br.disabled=new Br(Br.Replace,a.aM.transparent,[!1,!1,!1,!1]),Br.unblended=new Br(Br.Replace,a.aM.transparent,[!0,!0,!0,!0]),Br.alphaBlended=new Br([1,771],a.aM.transparent,[!0,!0,!0,!0]);class jl{constructor(e){var o,h;if(this.gl=e,this.clearColor=new hs(this),this.clearDepth=new tc(this),this.clearStencil=new ds(this),this.colorMask=new Al(this),this.depthMask=new Su(this),this.stencilMask=new Ki(this),this.stencilFunc=new sa(this),this.stencilOp=new Fa(this),this.stencilTest=new Us(this),this.depthRange=new nc(this),this.depthTest=new Ml(this),this.depthFunc=new kl(this),this.blend=new To(this),this.blendFunc=new Oa(this),this.blendColor=new rc(this),this.blendEquation=new ic(this),this.cullFace=new il(this),this.cullFaceSide=new jc(this),this.frontFace=new fs(this),this.program=new Lc(this),this.activeTexture=new ja(this),this.viewport=new Eu(this),this.bindFramebuffer=new Io(this),this.bindRenderbuffer=new oc(this),this.bindTexture=new zl(this),this.bindVertexBuffer=new sc(this),this.bindElementBuffer=new Rl(this),this.bindVertexArray=new Co(this),this.pixelStoreUnpack=new Tu(this),this.pixelStoreUnpackPremultiplyAlpha=new Vs(this),this.pixelStoreUnpackFlipY=new Iu(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Ti(e)){this.HALF_FLOAT=e.HALF_FLOAT;const d=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=e.RGBA16F)!==null&&o!==void 0?o:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(h=e.RGB16F)!==null&&h!==void 0?h:d==null?void 0:d.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const d=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,o){return new ao(this,e,o)}createVertexBuffer(e,o,h){return new rl(this,e,o,h)}createRenderbuffer(e,o,h){const d=this.gl,g=d.createRenderbuffer();return this.bindRenderbuffer.set(g),d.renderbufferStorage(d.RENDERBUFFER,e,o,h),this.bindRenderbuffer.set(null),g}createFramebuffer(e,o,h,d){return new Dc(this,e,o,h,d)}clear({color:e,depth:o,stencil:h}){const d=this.gl;let g=0;e&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),h!==void 0&&(g|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),d.clear(g)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){a.aE(e.blendFunction,Br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Ti(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var o;return Ti(this.gl)?this.gl.deleteVertexArray(e):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Vn{constructor(e,o,h){this.func=e,this.mask=o,this.range=h}}Vn.ReadOnly=!1,Vn.ReadWrite=!0,Vn.disabled=new Vn(519,Vn.ReadOnly,[0,1]);const Ll=7680;class xr{constructor(e,o,h,d,g,I){this.test=e,this.ref=o,this.mask=h,this.fail=d,this.depthFail=g,this.pass=I}}xr.disabled=new xr({func:519,mask:0},0,0,Ll,Ll,Ll);class ir{constructor(e,o,h){this.enable=e,this.mode=o,this.frontFace=h}}let Po;function Vo(y,e,o,h,d){const g=y.context,I=g.gl,A=y.useProgram("collisionBox"),O=[];let X=0,se=0;for(let qe=0;qe<h.length;qe++){const et=h[qe],Ve=e.getTile(et).getBucket(o);if(!Ve)continue;const st=d?Ve.textCollisionBox:Ve.iconCollisionBox,ut=Ve.collisionCircleArray;if(ut.length>0){const mt=a.H();a.aQ(mt,Ve.placementInvProjMatrix,y.transform.glCoordMatrix),a.aQ(mt,mt,Ve.placementViewportMatrix),O.push({circleArray:ut,circleOffset:se,transform:et.posMatrix,invTransform:mt,coord:et}),X+=ut.length/4,se=X}st&&A.draw(g,I.LINES,Vn.disabled,xr.disabled,y.colorModeForRenderPass(),ir.disabled,{u_matrix:et.posMatrix,u_pixel_extrude_scale:[1/(ae=y.transform).width,1/ae.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(et),o.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,null,y.transform.zoom,null,null,st.collisionVertexBuffer)}var ae;if(!d||!O.length)return;const we=y.useProgram("collisionCircle"),Ae=new a.aR;Ae.resize(4*X),Ae._trim();let je=0;for(const qe of O)for(let et=0;et<qe.circleArray.length/4;et++){const Ve=4*et,st=qe.circleArray[Ve+0],ut=qe.circleArray[Ve+1],mt=qe.circleArray[Ve+2],At=qe.circleArray[Ve+3];Ae.emplace(je++,st,ut,mt,At,0),Ae.emplace(je++,st,ut,mt,At,1),Ae.emplace(je++,st,ut,mt,At,2),Ae.emplace(je++,st,ut,mt,At,3)}(!Po||Po.length<2*X)&&(Po=function(qe){const et=2*qe,Ve=new a.aT;Ve.resize(et),Ve._trim();for(let st=0;st<et;st++){const ut=6*st;Ve.uint16[ut+0]=4*st+0,Ve.uint16[ut+1]=4*st+1,Ve.uint16[ut+2]=4*st+2,Ve.uint16[ut+3]=4*st+2,Ve.uint16[ut+4]=4*st+3,Ve.uint16[ut+5]=4*st+0}return Ve}(X));const Ne=g.createIndexBuffer(Po,!0),$e=g.createVertexBuffer(Ae,a.aS.members,!0);for(const qe of O){const et=oi(qe.transform,qe.invTransform,y.transform);we.draw(g,I.TRIANGLES,Vn.disabled,xr.disabled,y.colorModeForRenderPass(),ir.disabled,et,y.style.map.terrain&&y.style.map.terrain.getTerrainData(qe.coord),o.id,$e,Ne,a.a0.simpleSegment(0,2*qe.circleOffset,qe.circleArray.length,qe.circleArray.length/2),null,y.transform.zoom,null,null,null)}$e.destroy(),Ne.destroy()}ir.disabled=new ir(!1,1029,2305),ir.backCCW=new ir(!0,1029,2305);const Ao=a.an(new Float32Array(16));function di(y,e,o,h,d,g){const{horizontalAlign:I,verticalAlign:A}=a.au(y);return new a.P((-(I-.5)*e/d+h[0])*g,(-(A-.5)*o/d+h[1])*g)}function Vi(y,e,o,h,d,g){const I=e.tileAnchorPoint.add(new a.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let A=h.mult(g);o||(A=A.rotate(-d));const O=I.add(A);return Ue(O.x,O.y,e.labelPlaneMatrix,e.getElevation).point}if(o){const A=yt(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(y),O=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return y.add(h.rotate(O))}return y.add(h)}function ms(y,e,o,h,d,g,I,A,O,X,se,ae,we,Ae){const je=y.text.placedSymbolArray,Ne=y.text.dynamicLayoutVertexArray,$e=y.icon.dynamicLayoutVertexArray,qe={};Ne.clear();for(let et=0;et<je.length;et++){const Ve=je.get(et),st=Ve.hidden||!Ve.crossTileID||y.allowVerticalPlacement&&!Ve.placedOrientation?null:h[Ve.crossTileID];if(st){const ut=new a.P(Ve.anchorX,Ve.anchorY),mt={getElevation:Ae,width:d.width,height:d.height,labelPlaneMatrix:g,lineVertexArray:null,pitchWithMap:o,projection:se,projectionCache:null,tileAnchorPoint:ut,translation:ae,unwrappedTileID:we},At=o?Ue(ut.x,ut.y,I,Ae):yt(ut.x,ut.y,mt),Dt=me(d.cameraToCenterDistance,At.signedDistanceFromCamera);let Gt=a.ai(y.textSizeData,O,Ve)*Dt/a.ap;o&&(Gt*=y.tilePixelRatio/A);const{width:tn,height:Ht,anchor:$t,textOffset:dn,textBoxScale:jn}=st,Wt=di($t,tn,Ht,dn,jn,Gt),Yt=se.getPitchedTextCorrection(d,ut.add(new a.P(ae[0],ae[1])),we),On=Vi(At.point,mt,e,Wt,d.angle,Yt),wr=y.allowVerticalPlacement&&Ve.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Gn=0;Gn<Ve.numGlyphs;Gn++)a.aj(Ne,On,wr);X&&Ve.associatedIconIndex>=0&&(qe[Ve.associatedIconIndex]={shiftedAnchor:On,angle:wr})}else vn(Ve.numGlyphs,Ne)}if(X){$e.clear();const et=y.icon.placedSymbolArray;for(let Ve=0;Ve<et.length;Ve++){const st=et.get(Ve);if(st.hidden)vn(st.numGlyphs,$e);else{const ut=qe[Ve];if(ut)for(let mt=0;mt<st.numGlyphs;mt++)a.aj($e,ut.shiftedAnchor,ut.angle);else vn(st.numGlyphs,$e)}}y.icon.dynamicLayoutVertexBuffer.updateData($e)}y.text.dynamicLayoutVertexBuffer.updateData(Ne)}function Oi(y,e,o){return o.iconsInText&&e?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function $s(y,e,o,h,d,g,I,A,O,X,se,ae){const we=y.context,Ae=we.gl,je=y.transform,Ne=Fi(),$e=A==="map",qe=O==="map",et=A!=="viewport"&&o.layout.get("symbol-placement")!=="point",Ve=$e&&!qe&&!et,st=!qe&&et,ut=!o.layout.get("symbol-sort-key").isConstant();let mt=!1;const At=y.depthModeForSublayer(0,Vn.ReadOnly),Dt=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Gt=[],tn=Ne.getCircleRadiusCorrection(je);for(const Ht of h){const $t=e.getTile(Ht),dn=$t.getBucket(o);if(!dn)continue;const jn=d?dn.text:dn.icon;if(!jn||!jn.segments.get().length||!jn.hasVisibleVertices)continue;const Wt=jn.programConfigurations.get(o.id),Yt=d||dn.sdfIcons,On=d?dn.textSizeData:dn.iconSizeData,wr=qe||je.pitch!==0,Gn=y.useProgram(Oi(Yt,d,dn),Wt),qn=a.ag(On,je.zoom),Er=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ht);let Ci,zo,Tr,gi,zr=[0,0],ni=null;if(d)zo=$t.glyphAtlasTexture,Tr=Ae.LINEAR,Ci=$t.glyphAtlasTexture.size,dn.iconsInText&&(zr=$t.imageAtlasTexture.size,ni=$t.imageAtlasTexture,gi=wr||y.options.rotating||y.options.zooming||On.kind==="composite"||On.kind==="camera"?Ae.LINEAR:Ae.NEAREST);else{const Kn=o.layout.get("icon-size").constantOr(0)!==1||dn.iconsNeedLinear;zo=$t.imageAtlasTexture,Tr=Yt||y.options.rotating||y.options.zooming||Kn||wr?Ae.LINEAR:Ae.NEAREST,Ci=$t.imageAtlasTexture.size}const Li=Un($t,1,y.transform.zoom),xs=st?Ht.posMatrix:Ao,po=Yr(xs,qe,$e,y.transform,Li),ws=Cr(xs,qe,$e,y.transform,Li),Ga=Cr(Ht.posMatrix,qe,$e,y.transform,Li),Ro=Ne.translatePosition(y.transform,$t,g,I),qo=Dt&&dn.hasTextData(),Ws=o.layout.get("icon-text-fit")!=="none"&&qo&&dn.hasIconData();if(et){const Kn=y.style.map.terrain?(Ha,Ss)=>y.style.map.terrain.getElevation(Ht,Ha,Ss):null,Oo=o.layout.get("text-rotation-alignment")==="map";Pe(dn,Ht.posMatrix,y,d,po,Ga,qe,X,Oo,Ne,Ht.toUnwrapped(),je.width,je.height,Ro,Kn)}const eo=Ht.posMatrix,Fo=d&&Dt||Ws,bs=et||Fo?Ao:po,Xo=ws,si=Yt&&o.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let jr;jr=Yt?dn.iconsInText?cs(On.kind,qn,Ve,qe,et,Fo,y,eo,bs,Xo,Ro,Ci,zr,tn):us(On.kind,qn,Ve,qe,et,Fo,y,eo,bs,Xo,Ro,d,Ci,!0,tn):ia(On.kind,qn,Ve,qe,et,Fo,y,eo,bs,Xo,Ro,d,Ci,tn);const Di={program:Gn,buffers:jn,uniformValues:jr,atlasTexture:zo,atlasTextureIcon:ni,atlasInterpolation:Tr,atlasInterpolationIcon:gi,isSDF:Yt,hasHalo:si};if(ut&&dn.canOverlap){mt=!0;const Kn=jn.segments.get();for(const Oo of Kn)Gt.push({segments:new a.a0([Oo]),sortKey:Oo.sortKey,state:Di,terrainData:Er})}else Gt.push({segments:jn.segments,sortKey:0,state:Di,terrainData:Er})}mt&&Gt.sort((Ht,$t)=>Ht.sortKey-$t.sortKey);for(const Ht of Gt){const $t=Ht.state;if(we.activeTexture.set(Ae.TEXTURE0),$t.atlasTexture.bind($t.atlasInterpolation,Ae.CLAMP_TO_EDGE),$t.atlasTextureIcon&&(we.activeTexture.set(Ae.TEXTURE1),$t.atlasTextureIcon&&$t.atlasTextureIcon.bind($t.atlasInterpolationIcon,Ae.CLAMP_TO_EDGE)),$t.isSDF){const dn=$t.uniformValues;$t.hasHalo&&(dn.u_is_halo=1,Da($t.buffers,Ht.segments,o,y,$t.program,At,se,ae,dn,Ht.terrainData)),dn.u_is_halo=0}Da($t.buffers,Ht.segments,o,y,$t.program,At,se,ae,$t.uniformValues,Ht.terrainData)}}function Da(y,e,o,h,d,g,I,A,O,X){const se=h.context;d.draw(se,se.gl.TRIANGLES,g,I,A,ir.disabled,O,X,o.id,y.layoutVertexBuffer,y.indexBuffer,e,o.paint,h.transform.zoom,y.programConfigurations.get(o.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Ba(y,e,o,h){const d=y.context,g=d.gl,I=xr.disabled,A=new Br([g.ONE,g.ONE],a.aM.transparent,[!0,!0,!0,!0]),O=e.getBucket(o);if(!O)return;const X=h.key;let se=o.heatmapFbos.get(X);se||(se=Mo(d,e.tileSize,e.tileSize),o.heatmapFbos.set(X,se)),d.bindFramebuffer.set(se.framebuffer),d.viewport.set([0,0,e.tileSize,e.tileSize]),d.clear({color:a.aM.transparent});const ae=O.programConfigurations.get(o.id),we=y.useProgram("heatmap",ae),Ae=y.style.map.terrain.getTerrainData(h);we.draw(d,g.TRIANGLES,Vn.disabled,I,A,ir.disabled,hi(h.posMatrix,e,y.transform.zoom,o.paint.get("heatmap-intensity")),Ae,o.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,o.paint,y.transform.zoom,ae)}function mi(y,e,o){const h=y.context,d=h.gl;h.setColorMode(y.colorModeForRenderPass());const g=aa(h,e),I=o.key,A=e.heatmapFbos.get(I);A&&(h.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,A.colorAttachment.get()),h.activeTexture.set(d.TEXTURE1),g.bind(d.LINEAR,d.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(h,d.TRIANGLES,Vn.disabled,xr.disabled,y.colorModeForRenderPass(),ir.disabled,Bs(y,e,0,1),null,e.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,e.paint,y.transform.zoom),A.destroy(),e.heatmapFbos.delete(I))}function Mo(y,e,o){var h,d;const g=y.gl,I=g.createTexture();g.bindTexture(g.TEXTURE_2D,I),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);const A=(h=y.HALF_FLOAT)!==null&&h!==void 0?h:g.UNSIGNED_BYTE,O=(d=y.RGBA16F)!==null&&d!==void 0?d:g.RGBA;g.texImage2D(g.TEXTURE_2D,0,O,e,o,0,g.RGBA,A,null);const X=y.createFramebuffer(e,o,!1,!1);return X.colorAttachment.set(I),X}function aa(y,e){return e.colorRampTexture||(e.colorRampTexture=new K(y,e.colorRamp,y.gl.RGBA)),e.colorRampTexture}function Yi(y,e,o,h,d){if(!o||!h||!h.imageAtlas)return;const g=h.imageAtlas.patternPositions;let I=g[o.to.toString()],A=g[o.from.toString()];if(!I&&A&&(I=A),!A&&I&&(A=I),!I||!A){const O=d.getPaintProperty(e);I=g[O],A=g[O]}I&&A&&y.setConstantPatternPositions(I,A)}function lo(y,e,o,h,d,g,I){const A=y.context.gl,O="fill-pattern",X=o.paint.get(O),se=X&&X.constantOr(1),ae=o.getCrossfadeParameters();let we,Ae,je,Ne,$e;I?(Ae=se&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=A.LINES):(Ae=se?"fillPattern":"fill",we=A.TRIANGLES);const qe=X.constantOr(null);for(const et of h){const Ve=e.getTile(et);if(se&&!Ve.patternsLoaded())continue;const st=Ve.getBucket(o);if(!st)continue;const ut=st.programConfigurations.get(o.id),mt=y.useProgram(Ae,ut),At=y.style.map.terrain&&y.style.map.terrain.getTerrainData(et);se&&(y.context.activeTexture.set(A.TEXTURE0),Ve.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ut.updatePaintBuffers(ae)),Yi(ut,O,qe,Ve,o);const Dt=At?et:null,Gt=y.translatePosMatrix(Dt?Dt.posMatrix:et.posMatrix,Ve,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(I){Ne=st.indexBuffer2,$e=st.segments2;const tn=[A.drawingBufferWidth,A.drawingBufferHeight];je=Ae==="fillOutlinePattern"&&se?ra(Gt,y,ae,Ve,tn):vu(Gt,tn)}else Ne=st.indexBuffer,$e=st.segments,je=se?tl(Gt,y,ae,Ve):Ds(Gt);mt.draw(y.context,we,d,y.stencilModeForClipping(et),g,ir.disabled,je,At,o.id,st.layoutVertexBuffer,Ne,$e,o.paint,y.transform.zoom,ut)}}function ol(y,e,o,h,d,g,I){const A=y.context,O=A.gl,X="fill-extrusion-pattern",se=o.paint.get(X),ae=se.constantOr(1),we=o.getCrossfadeParameters(),Ae=o.paint.get("fill-extrusion-opacity"),je=se.constantOr(null);for(const Ne of h){const $e=e.getTile(Ne),qe=$e.getBucket(o);if(!qe)continue;const et=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne),Ve=qe.programConfigurations.get(o.id),st=y.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",Ve);ae&&(y.context.activeTexture.set(O.TEXTURE0),$e.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ve.updatePaintBuffers(we)),Yi(Ve,X,je,$e,o);const ut=y.translatePosMatrix(Ne.posMatrix,$e,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),mt=o.paint.get("fill-extrusion-vertical-gradient"),At=ae?Ra(ut,y,mt,Ae,Ne,we,$e):za(ut,y,mt,Ae);st.draw(A,A.gl.TRIANGLES,d,g,I,ir.backCCW,At,et,o.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,o.paint,y.transform.zoom,Ve,y.style.map.terrain&&qe.centroidVertexBuffer)}}function $o(y,e,o,h,d,g,I){const A=y.context,O=A.gl,X=o.fbo;if(!X)return;const se=y.useProgram("hillshade"),ae=y.style.map.terrain&&y.style.map.terrain.getTerrainData(e);A.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,X.colorAttachment.get()),se.draw(A,O.TRIANGLES,d,g,I,ir.disabled,((we,Ae,je,Ne)=>{const $e=je.paint.get("hillshade-shadow-color"),qe=je.paint.get("hillshade-highlight-color"),et=je.paint.get("hillshade-accent-color");let Ve=je.paint.get("hillshade-illumination-direction")*(Math.PI/180);je.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ve-=we.transform.angle);const st=!we.options.moving;return{u_matrix:Ne?Ne.posMatrix:we.transform.calculatePosMatrix(Ae.tileID.toUnwrapped(),st),u_image:0,u_latrange:so(0,Ae.tileID),u_light:[je.paint.get("hillshade-exaggeration"),Ve],u_shadow:$e,u_highlight:qe,u_accent:et}})(y,o,h,ae?e:null),ae,h.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function la(y,e,o,h,d,g){const I=y.context,A=I.gl,O=e.dem;if(O&&O.data){const X=O.dim,se=O.stride,ae=O.getPixels();if(I.activeTexture.set(A.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||y.getTileTexture(se),e.demTexture){const Ae=e.demTexture;Ae.update(ae,{premultiply:!1}),Ae.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else e.demTexture=new K(I,ae,A.RGBA,{premultiply:!1}),e.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);I.activeTexture.set(A.TEXTURE0);let we=e.fbo;if(!we){const Ae=new K(I,{width:X,height:X,data:null},A.RGBA);Ae.bind(A.LINEAR,A.CLAMP_TO_EDGE),we=e.fbo=I.createFramebuffer(X,X,!0,!1),we.colorAttachment.set(Ae.texture)}I.bindFramebuffer.set(we.framebuffer),I.viewport.set([0,0,X,X]),y.useProgram("hillshadePrepare").draw(I,A.TRIANGLES,h,d,g,ir.disabled,((Ae,je)=>{const Ne=je.stride,$e=a.H();return a.aP($e,0,a.X,-a.X,0,0,1),a.J($e,$e,[0,-a.X,0]),{u_matrix:$e,u_image:1,u_dimension:[Ne,Ne],u_zoom:Ae.overscaledZ,u_unpack:je.getUnpackVector()}})(e.tileID,O),null,o.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function Dl(y,e,o,h,d,g){const I=h.paint.get("raster-fade-duration");if(!g&&I>0){const A=C.now(),O=(A-y.timeAdded)/I,X=e?(A-e.timeAdded)/I:-1,se=o.getSource(),ae=d.coveringZoomLevel({tileSize:se.tileSize,roundZoom:se.roundZoom}),we=!e||Math.abs(e.tileID.overscaledZ-ae)>Math.abs(y.tileID.overscaledZ-ae),Ae=we&&y.refreshedUponExpiration?1:a.ac(we?O:1-X,0,1);return y.refreshedUponExpiration&&O>=1&&(y.refreshedUponExpiration=!1),e?{opacity:1,mix:1-Ae}:{opacity:Ae,mix:0}}return{opacity:1,mix:0}}const uo=new a.aM(1,0,0,1),er=new a.aM(0,1,0,1),sl=new a.aM(0,0,1,1),Cu=new a.aM(1,0,1,1),al=new a.aM(0,1,1,1);function ua(y,e,o,h){ll(y,0,e+o/2,y.transform.width,o,h)}function Pu(y,e,o,h){ll(y,e-o/2,0,o,y.transform.height,h)}function ll(y,e,o,h,d,g){const I=y.context,A=I.gl;A.enable(A.SCISSOR_TEST),A.scissor(e*y.pixelRatio,o*y.pixelRatio,h*y.pixelRatio,d*y.pixelRatio),I.clear({color:g}),A.disable(A.SCISSOR_TEST)}function ee(y,e,o){const h=y.context,d=h.gl,g=o.posMatrix,I=y.useProgram("debug"),A=Vn.disabled,O=xr.disabled,X=y.colorModeForRenderPass(),se="$debug",ae=y.style.map.terrain&&y.style.map.terrain.getTerrainData(o);h.activeTexture.set(d.TEXTURE0);const we=e.getTileByID(o.key).latestRawTileData,Ae=Math.floor((we&&we.byteLength||0)/1024),je=e.getTile(o).tileSize,Ne=512/Math.min(je,512)*(o.overscaledZ/y.transform.zoom)*.5;let $e=o.canonical.toString();o.overscaledZ!==o.canonical.z&&($e+=` => ${o.overscaledZ}`),function(qe,et){qe.initDebugOverlayCanvas();const Ve=qe.debugOverlayCanvas,st=qe.context.gl,ut=qe.debugOverlayCanvas.getContext("2d");ut.clearRect(0,0,Ve.width,Ve.height),ut.shadowColor="white",ut.shadowBlur=2,ut.lineWidth=1.5,ut.strokeStyle="white",ut.textBaseline="top",ut.font="bold 36px Open Sans, sans-serif",ut.fillText(et,5,5),ut.strokeText(et,5,5),qe.debugOverlayTexture.update(Ve),qe.debugOverlayTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE)}(y,`${$e} ${Ae}kB`),I.draw(h,d.TRIANGLES,A,O,Br.alphaBlended,ir.disabled,oo(g,a.aM.transparent,Ne),null,se,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),I.draw(h,d.LINE_STRIP,A,O,X,ir.disabled,oo(g,a.aM.red),ae,se,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Ie(y,e,o){const h=y.context,d=h.gl,g=y.colorModeForRenderPass(),I=new Vn(d.LEQUAL,Vn.ReadWrite,y.depthRangeFor3D),A=y.useProgram("terrain"),O=e.getTerrainMesh();h.bindFramebuffer.set(null),h.viewport.set([0,0,y.width,y.height]);for(const X of o){const se=y.renderToTexture.getTexture(X),ae=e.getTerrainData(X.tileID);h.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,se.texture);const we=y.transform.calculatePosMatrix(X.tileID.toUnwrapped()),Ae=e.getMeshFrameDelta(y.transform.zoom),je=y.transform.calculateFogMatrix(X.tileID.toUnwrapped()),Ne=Xi(we,Ae,je,y.style.sky,y.transform.pitch);A.draw(h,d.TRIANGLES,I,xr.disabled,g,ir.backCCW,Ne,ae,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class We{constructor(e,o,h){this.vertexBuffer=e,this.indexBuffer=o,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class wt{constructor(e,o){this.context=new jl(e),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Bt.maxUnderzooming+Bt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ta}resize(e,o,h){if(this.width=Math.floor(e*h),this.height=Math.floor(o*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style._order)this.style._layers[d].resize()}setup(){const e=this.context,o=new a.aX;o.emplaceBack(0,0),o.emplaceBack(a.X,0),o.emplaceBack(0,a.X),o.emplaceBack(a.X,a.X),this.tileExtentBuffer=e.createVertexBuffer(o,ls.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);const h=new a.aX;h.emplaceBack(0,0),h.emplaceBack(a.X,0),h.emplaceBack(0,a.X),h.emplaceBack(a.X,a.X),this.debugBuffer=e.createVertexBuffer(h,ls.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);const d=new a.$;d.emplaceBack(0,0,0,0),d.emplaceBack(a.X,0,a.X,0),d.emplaceBack(0,a.X,0,a.X),d.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=e.createVertexBuffer(d,H.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);const g=new a.aX;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(g,ls.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);const I=new a.aZ;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(I);const A=new a.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(A);const O=this.context.gl;this.stencilClearMode=new xr({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const e=this.context,o=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=a.H();a.aP(h,0,this.width,this.height,0,0,1),a.K(h,h,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,o.TRIANGLES,Vn.disabled,this.stencilClearMode,Br.disabled,ir.disabled,Hr(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,o){if(this.currentStencilSource===e.source||!e.isTileClipped()||!o||!o.length)return;this.currentStencilSource=e.source;const h=this.context,d=h.gl;this.nextStencilID+o.length>256&&this.clearStencil(),h.setColorMode(Br.disabled),h.setDepthMode(Vn.disabled);const g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of o){const A=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);g.draw(h,d.TRIANGLES,Vn.disabled,new xr({func:d.ALWAYS,mask:0},A,255,d.KEEP,d.KEEP,d.REPLACE),Br.disabled,ir.disabled,Hr(I.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,o=this.context.gl;return new xr({func:o.NOTEQUAL,mask:255},e,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(e){const o=this.context.gl;return new xr({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(e){const o=this.context.gl,h=e.sort((I,A)=>A.overscaledZ-I.overscaledZ),d=h[h.length-1].overscaledZ,g=h[0].overscaledZ-d+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();const I={};for(let A=0;A<g;A++)I[A+d]=new xr({func:o.GEQUAL,mask:255},A+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=g,[I,h]}return[{[d]:xr.disabled},h]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Br([e.CONSTANT_COLOR,e.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Br.unblended:Br.alphaBlended}depthModeForSublayer(e,o,h){if(!this.opaquePassEnabledForLayer())return Vn.disabled;const d=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Vn(h||this.context.gl.LEQUAL,o,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,o){this.style=e,this.options=o,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(C.now()),this.imageManager.beginFrame();const h=this.style._order,d=this.style.sourceCaches,g={},I={},A={};for(const O in d){const X=d[O];X.used&&X.prepare(this.context),g[O]=X.getVisibleCoordinates(),I[O]=g[O].slice().reverse(),A[O]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<h.length;O++)if(this.style._layers[h[O]].is3D()){this.opaquePassCutoff=O;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const O of h){const X=this.style._layers[O];if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const se=I[X.source];(X.type==="custom"||se.length)&&this.renderLayer(this,d[X.source],X,se)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(O,X){const se=O.context,ae=se.gl,we=((qe,et,Ve)=>({u_sky_color:qe.properties.get("sky-color"),u_horizon_color:qe.properties.get("horizon-color"),u_horizon:(et.height/2+et.getHorizon())*Ve,u_sky_horizon_blend:qe.properties.get("sky-horizon-blend")*et.height/2*Ve}))(X,O.style.map.transform,O.pixelRatio),Ae=new Vn(ae.LEQUAL,Vn.ReadWrite,[0,1]),je=xr.disabled,Ne=O.colorModeForRenderPass(),$e=O.useProgram("sky");if(!X.mesh){const qe=new a.aX;qe.emplaceBack(-1,-1),qe.emplaceBack(1,-1),qe.emplaceBack(1,1),qe.emplaceBack(-1,1);const et=new a.aY;et.emplaceBack(0,1,2),et.emplaceBack(0,2,3),X.mesh=new We(se.createVertexBuffer(qe,ls.members),se.createIndexBuffer(et),a.a0.simpleSegment(0,0,qe.length,et.length))}$e.draw(se,ae.TRIANGLES,Ae,je,Ne,ir.disabled,we,void 0,"sky",X.mesh.vertexBuffer,X.mesh.indexBuffer,X.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[h[this.currentLayer]],X=d[O.source],se=g[O.source];this._renderTileClippingMasks(O,se),this.renderLayer(this,X,O,se)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const O=this.style._layers[h[this.currentLayer]],X=d[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const se=(O.type==="symbol"?A:I)[O.source];this._renderTileClippingMasks(O,g[O.source]),this.renderLayer(this,X,O,se)}if(this.options.showTileBoundaries){const O=function(X,se){let ae=null;const we=Object.values(X._layers).flatMap($e=>$e.source&&!$e.isHidden(se)?[X.sourceCaches[$e.source]]:[]),Ae=we.filter($e=>$e.getSource().type==="vector"),je=we.filter($e=>$e.getSource().type!=="vector"),Ne=$e=>{(!ae||ae.getSource().maxzoom<$e.getSource().maxzoom)&&(ae=$e)};return Ae.forEach($e=>Ne($e)),ae||je.forEach($e=>Ne($e)),ae}(this.style,this.transform.zoom);O&&function(X,se,ae){for(let we=0;we<ae.length;we++)ee(X,se,ae[we])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const X=O.transform.padding;ua(O,O.transform.height-(X.top||0),3,uo),ua(O,X.bottom||0,3,er),Pu(O,X.left||0,3,sl),Pu(O,O.transform.width-(X.right||0),3,Cu);const se=O.transform.centerPoint;(function(ae,we,Ae,je){ll(ae,we-1,Ae-10,2,20,je),ll(ae,we-10,Ae-1,20,2,je)})(O,se.x,O.transform.height-se.y,al)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix;let d=this.terrainFacilitator.dirty;d||(d=e?!a.a_(o,h):!a.a$(o,h)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(a.b0(o,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(g,I){const A=g.context,O=A.gl,X=Br.unblended,se=new Vn(O.LEQUAL,Vn.ReadWrite,[0,1]),ae=I.getTerrainMesh(),we=I.sourceCache.getRenderableTiles(),Ae=g.useProgram("terrainDepth");A.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),A.clear({color:a.aM.transparent,depth:1});for(const je of we){const Ne=I.getTerrainData(je.tileID),$e={u_matrix:g.transform.calculatePosMatrix(je.tileID.toUnwrapped()),u_ele_delta:I.getMeshFrameDelta(g.transform.zoom)};Ae.draw(A,O.TRIANGLES,se,xr.disabled,X,ir.backCCW,$e,Ne,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain),function(g,I){const A=g.context,O=A.gl,X=Br.unblended,se=new Vn(O.LEQUAL,Vn.ReadWrite,[0,1]),ae=I.getTerrainMesh(),we=I.getCoordsTexture(),Ae=I.sourceCache.getRenderableTiles(),je=g.useProgram("terrainCoords");A.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),A.clear({color:a.aM.transparent,depth:1}),I.coordsIndex=[];for(const Ne of Ae){const $e=I.getTerrainData(Ne.tileID);A.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,we.texture);const qe={u_matrix:g.transform.calculatePosMatrix(Ne.tileID.toUnwrapped()),u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(g.transform.zoom)};je.draw(A,O.TRIANGLES,se,xr.disabled,X,ir.backCCW,qe,$e,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments),I.coordsIndex.push(Ne.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain))}renderLayer(e,o,h,d){if(!h.isHidden(this.transform.zoom)&&(h.type==="background"||h.type==="custom"||(d||[]).length))switch(this.id=h.id,h.type){case"symbol":(function(g,I,A,O,X){if(g.renderPass!=="translucent")return;const se=xr.disabled,ae=g.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(we,Ae,je,Ne,$e,qe,et,Ve,st){const ut=Ae.transform,mt=Fi(),At=$e==="map",Dt=qe==="map";for(const Gt of we){const tn=Ne.getTile(Gt),Ht=tn.getBucket(je);if(!Ht||!Ht.text||!Ht.text.segments.get().length)continue;const $t=a.ag(Ht.textSizeData,ut.zoom),dn=Un(tn,1,Ae.transform.zoom),jn=Yr(Gt.posMatrix,Dt,At,Ae.transform,dn),Wt=je.layout.get("icon-text-fit")!=="none"&&Ht.hasIconData();if($t){const Yt=Math.pow(2,ut.zoom-tn.tileID.overscaledZ),On=Ae.style.map.terrain?(Gn,qn)=>Ae.style.map.terrain.getElevation(Gt,Gn,qn):null,wr=mt.translatePosition(ut,tn,et,Ve);ms(Ht,At,Dt,st,ut,jn,Gt.posMatrix,Yt,$t,Wt,mt,wr,Gt.toUnwrapped(),On)}}}(O,g,A,I,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),X),A.paint.get("icon-opacity").constantOr(1)!==0&&$s(g,I,A,O,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),se,ae),A.paint.get("text-opacity").constantOr(1)!==0&&$s(g,I,A,O,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),se,ae),I.map.showCollisionBoxes&&(Vo(g,I,A,O,!0),Vo(g,I,A,O,!1))})(e,o,h,d,this.style.placement.variableOffsets);break;case"circle":(function(g,I,A,O){if(g.renderPass!=="translucent")return;const X=A.paint.get("circle-opacity"),se=A.paint.get("circle-stroke-width"),ae=A.paint.get("circle-stroke-opacity"),we=!A.layout.get("circle-sort-key").isConstant();if(X.constantOr(1)===0&&(se.constantOr(1)===0||ae.constantOr(1)===0))return;const Ae=g.context,je=Ae.gl,Ne=g.depthModeForSublayer(0,Vn.ReadOnly),$e=xr.disabled,qe=g.colorModeForRenderPass(),et=[];for(let Ve=0;Ve<O.length;Ve++){const st=O[Ve],ut=I.getTile(st),mt=ut.getBucket(A);if(!mt)continue;const At=mt.programConfigurations.get(A.id),Dt=g.useProgram("circle",At),Gt=mt.layoutVertexBuffer,tn=mt.indexBuffer,Ht=g.style.map.terrain&&g.style.map.terrain.getTerrainData(st),$t={programConfiguration:At,program:Dt,layoutVertexBuffer:Gt,indexBuffer:tn,uniformValues:Tl(g,st,ut,A),terrainData:Ht};if(we){const dn=mt.segments.get();for(const jn of dn)et.push({segments:new a.a0([jn]),sortKey:jn.sortKey,state:$t})}else et.push({segments:mt.segments,sortKey:0,state:$t})}we&&et.sort((Ve,st)=>Ve.sortKey-st.sortKey);for(const Ve of et){const{programConfiguration:st,program:ut,layoutVertexBuffer:mt,indexBuffer:At,uniformValues:Dt,terrainData:Gt}=Ve.state;ut.draw(Ae,je.TRIANGLES,Ne,$e,qe,ir.disabled,Dt,Gt,A.id,mt,At,Ve.segments,A.paint,g.transform.zoom,st)}})(e,o,h,d);break;case"heatmap":(function(g,I,A,O){if(A.paint.get("heatmap-opacity")===0)return;const X=g.context;if(g.style.map.terrain){for(const se of O){const ae=I.getTile(se);I.hasRenderableParent(se)||(g.renderPass==="offscreen"?Ba(g,ae,A,se):g.renderPass==="translucent"&&mi(g,A,se))}X.viewport.set([0,0,g.width,g.height])}else g.renderPass==="offscreen"?function(se,ae,we,Ae){const je=se.context,Ne=je.gl,$e=xr.disabled,qe=new Br([Ne.ONE,Ne.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(et,Ve,st){const ut=et.gl;et.activeTexture.set(ut.TEXTURE1),et.viewport.set([0,0,Ve.width/4,Ve.height/4]);let mt=st.heatmapFbos.get(a.aU);mt?(ut.bindTexture(ut.TEXTURE_2D,mt.colorAttachment.get()),et.bindFramebuffer.set(mt.framebuffer)):(mt=Mo(et,Ve.width/4,Ve.height/4),st.heatmapFbos.set(a.aU,mt))})(je,se,we),je.clear({color:a.aM.transparent});for(let et=0;et<Ae.length;et++){const Ve=Ae[et];if(ae.hasRenderableParent(Ve))continue;const st=ae.getTile(Ve),ut=st.getBucket(we);if(!ut)continue;const mt=ut.programConfigurations.get(we.id),At=se.useProgram("heatmap",mt),{zoom:Dt}=se.transform;At.draw(je,Ne.TRIANGLES,Vn.disabled,$e,qe,ir.disabled,hi(Ve.posMatrix,st,Dt,we.paint.get("heatmap-intensity")),null,we.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,we.paint,se.transform.zoom,mt)}je.viewport.set([0,0,se.width,se.height])}(g,I,A,O):g.renderPass==="translucent"&&function(se,ae){const we=se.context,Ae=we.gl;we.setColorMode(se.colorModeForRenderPass());const je=ae.heatmapFbos.get(a.aU);je&&(we.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,je.colorAttachment.get()),we.activeTexture.set(Ae.TEXTURE1),aa(we,ae).bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),se.useProgram("heatmapTexture").draw(we,Ae.TRIANGLES,Vn.disabled,xr.disabled,se.colorModeForRenderPass(),ir.disabled,Bs(se,ae,0,1),null,ae.id,se.viewportBuffer,se.quadTriangleIndexBuffer,se.viewportSegments,ae.paint,se.transform.zoom))}(g,A)})(e,o,h,d);break;case"line":(function(g,I,A,O){if(g.renderPass!=="translucent")return;const X=A.paint.get("line-opacity"),se=A.paint.get("line-width");if(X.constantOr(1)===0||se.constantOr(1)===0)return;const ae=g.depthModeForSublayer(0,Vn.ReadOnly),we=g.colorModeForRenderPass(),Ae=A.paint.get("line-dasharray"),je=A.paint.get("line-pattern"),Ne=je.constantOr(1),$e=A.paint.get("line-gradient"),qe=A.getCrossfadeParameters(),et=Ne?"linePattern":Ae?"lineSDF":$e?"lineGradient":"line",Ve=g.context,st=Ve.gl;let ut=!0;for(const mt of O){const At=I.getTile(mt);if(Ne&&!At.patternsLoaded())continue;const Dt=At.getBucket(A);if(!Dt)continue;const Gt=Dt.programConfigurations.get(A.id),tn=g.context.program.get(),Ht=g.useProgram(et,Gt),$t=ut||Ht.program!==tn,dn=g.style.map.terrain&&g.style.map.terrain.getTerrainData(mt),jn=je.constantOr(null);if(jn&&At.imageAtlas){const On=At.imageAtlas,wr=On.patternPositions[jn.to.toString()],Gn=On.patternPositions[jn.from.toString()];wr&&Gn&&Gt.setConstantPatternPositions(wr,Gn)}const Wt=dn?mt:null,Yt=Ne?Uo(g,At,A,qe,Wt):Ae?xu(g,At,A,Ae,qe,Wt):$e?_u(g,At,A,Dt.lineClipsArray.length,Wt):Il(g,At,A,Wt);if(Ne)Ve.activeTexture.set(st.TEXTURE0),At.imageAtlasTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE),Gt.updatePaintBuffers(qe);else if(Ae&&($t||g.lineAtlas.dirty))Ve.activeTexture.set(st.TEXTURE0),g.lineAtlas.bind(Ve);else if($e){const On=Dt.gradients[A.id];let wr=On.texture;if(A.gradientVersion!==On.version){let Gn=256;if(A.stepInterpolant){const qn=I.getSource().maxzoom,Er=mt.canonical.z===qn?Math.ceil(1<<g.transform.maxZoom-mt.canonical.z):1;Gn=a.ac(a.aV(Dt.maxLineLength/a.X*1024*Er),256,Ve.maxTextureSize)}On.gradient=a.aW({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Gn,image:On.gradient||void 0,clips:Dt.lineClipsArray}),On.texture?On.texture.update(On.gradient):On.texture=new K(Ve,On.gradient,st.RGBA),On.version=A.gradientVersion,wr=On.texture}Ve.activeTexture.set(st.TEXTURE0),wr.bind(A.stepInterpolant?st.NEAREST:st.LINEAR,st.CLAMP_TO_EDGE)}Ht.draw(Ve,st.TRIANGLES,ae,g.stencilModeForClipping(mt),we,ir.disabled,Yt,dn,A.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,A.paint,g.transform.zoom,Gt,Dt.layoutVertexBuffer2),ut=!1}})(e,o,h,d);break;case"fill":(function(g,I,A,O){const X=A.paint.get("fill-color"),se=A.paint.get("fill-opacity");if(se.constantOr(1)===0)return;const ae=g.colorModeForRenderPass(),we=A.paint.get("fill-pattern"),Ae=g.opaquePassEnabledForLayer()&&!we.constantOr(1)&&X.constantOr(a.aM.transparent).a===1&&se.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===Ae){const je=g.depthModeForSublayer(1,g.renderPass==="opaque"?Vn.ReadWrite:Vn.ReadOnly);lo(g,I,A,O,je,ae,!1)}if(g.renderPass==="translucent"&&A.paint.get("fill-antialias")){const je=g.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Vn.ReadOnly);lo(g,I,A,O,je,ae,!0)}})(e,o,h,d);break;case"fill-extrusion":(function(g,I,A,O){const X=A.paint.get("fill-extrusion-opacity");if(X!==0&&g.renderPass==="translucent"){const se=new Vn(g.context.gl.LEQUAL,Vn.ReadWrite,g.depthRangeFor3D);if(X!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))ol(g,I,A,O,se,xr.disabled,Br.disabled),ol(g,I,A,O,se,g.stencilModeFor3D(),g.colorModeForRenderPass());else{const ae=g.colorModeForRenderPass();ol(g,I,A,O,se,xr.disabled,ae)}}})(e,o,h,d);break;case"hillshade":(function(g,I,A,O){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const X=g.context,se=g.depthModeForSublayer(0,Vn.ReadOnly),ae=g.colorModeForRenderPass(),[we,Ae]=g.renderPass==="translucent"?g.stencilConfigForOverlap(O):[{},O];for(const je of Ae){const Ne=I.getTile(je);Ne.needsHillshadePrepare!==void 0&&Ne.needsHillshadePrepare&&g.renderPass==="offscreen"?la(g,Ne,A,se,xr.disabled,ae):g.renderPass==="translucent"&&$o(g,je,Ne,A,se,we[je.overscaledZ],ae)}X.viewport.set([0,0,g.width,g.height])})(e,o,h,d);break;case"raster":(function(g,I,A,O){if(g.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!O.length)return;const X=g.context,se=X.gl,ae=I.getSource(),we=g.useProgram("raster"),Ae=g.colorModeForRenderPass(),[je,Ne]=ae instanceof Ce?[{},O]:g.stencilConfigForOverlap(O),$e=Ne[Ne.length-1].overscaledZ,qe=!g.options.moving;for(const et of Ne){const Ve=g.depthModeForSublayer(et.overscaledZ-$e,A.paint.get("raster-opacity")===1?Vn.ReadWrite:Vn.ReadOnly,se.LESS),st=I.getTile(et);st.registerFadeDuration(A.paint.get("raster-fade-duration"));const ut=I.findLoadedParent(et,0),mt=I.findLoadedSibling(et),At=Dl(st,ut||mt||null,I,A,g.transform,g.style.map.terrain);let Dt,Gt;const tn=A.paint.get("raster-resampling")==="nearest"?se.NEAREST:se.LINEAR;X.activeTexture.set(se.TEXTURE0),st.texture.bind(tn,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),X.activeTexture.set(se.TEXTURE1),ut?(ut.texture.bind(tn,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),Dt=Math.pow(2,ut.tileID.overscaledZ-st.tileID.overscaledZ),Gt=[st.tileID.canonical.x*Dt%1,st.tileID.canonical.y*Dt%1]):st.texture.bind(tn,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),st.texture.useMipmap&&X.extTextureFilterAnisotropic&&g.transform.pitch>20&&se.texParameterf(se.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax);const Ht=g.style.map.terrain&&g.style.map.terrain.getTerrainData(et),$t=Ht?et:null,dn=$t?$t.posMatrix:g.transform.calculatePosMatrix(et.toUnwrapped(),qe),jn=ec(dn,Gt||[0,0],Dt||1,At,A);ae instanceof Ce?we.draw(X,se.TRIANGLES,Ve,xr.disabled,Ae,ir.disabled,jn,Ht,A.id,ae.boundsBuffer,g.quadTriangleIndexBuffer,ae.boundsSegments):we.draw(X,se.TRIANGLES,Ve,je[et.overscaledZ],Ae,ir.disabled,jn,Ht,A.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}})(e,o,h,d);break;case"background":(function(g,I,A,O){const X=A.paint.get("background-color"),se=A.paint.get("background-opacity");if(se===0)return;const ae=g.context,we=ae.gl,Ae=g.transform,je=Ae.tileSize,Ne=A.paint.get("background-pattern");if(g.isPatternMissing(Ne))return;const $e=!Ne&&X.a===1&&se===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==$e)return;const qe=xr.disabled,et=g.depthModeForSublayer(0,$e==="opaque"?Vn.ReadWrite:Vn.ReadOnly),Ve=g.colorModeForRenderPass(),st=g.useProgram(Ne?"backgroundPattern":"background"),ut=O||Ae.coveringTiles({tileSize:je,terrain:g.style.map.terrain});Ne&&(ae.activeTexture.set(we.TEXTURE0),g.imageManager.bind(g.context));const mt=A.getCrossfadeParameters();for(const At of ut){const Dt=O?At.posMatrix:g.transform.calculatePosMatrix(At.toUnwrapped()),Gt=Ne?bu(Dt,se,g,Ne,{tileID:At,tileSize:je},mt):oa(Dt,se,X),tn=g.style.map.terrain&&g.style.map.terrain.getTerrainData(At);st.draw(ae,we.TRIANGLES,et,qe,Ve,ir.disabled,Gt,tn,A.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}})(e,0,h,d);break;case"custom":(function(g,I,A){const O=g.context,X=A.implementation;if(g.renderPass==="offscreen"){const se=X.prerender;se&&(g.setCustomLayerDefaults(),O.setColorMode(g.colorModeForRenderPass()),se.call(X,O.gl,g.transform.customLayerMatrix()),O.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),O.setColorMode(g.colorModeForRenderPass()),O.setStencilMode(xr.disabled);const se=X.renderingMode==="3d"?new Vn(g.context.gl.LEQUAL,Vn.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,Vn.ReadOnly);O.setDepthMode(se),X.render(O.gl,g.transform.customLayerMatrix(),{farZ:g.transform.farZ,nearZ:g.transform.nearZ,fov:g.transform._fov,modelViewProjectionMatrix:g.transform.modelViewProjectionMatrix,projectionMatrix:g.transform.projectionMatrix}),O.setDirty(),g.setBaseState(),O.bindFramebuffer.set(null)}})(e,0,h)}}translatePosMatrix(e,o,h,d,g){if(!h[0]&&!h[1])return e;const I=g?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(I){const X=Math.sin(I),se=Math.cos(I);h=[h[0]*se-h[1]*X,h[0]*X+h[1]*se]}const A=[g?h[0]:Un(o,h[0],this.transform.zoom),g?h[1]:Un(o,h[1],this.transform.zoom),0],O=new Float32Array(16);return a.J(O,e,A),O}saveTileTexture(e){const o=this._tileTextures[e.size[0]];o?o.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const o=this._tileTextures[e];return o&&o.length>0?o.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const o=this.imageManager.getPattern(e.from.toString()),h=this.imageManager.getPattern(e.to.toString());return!o||!h}useProgram(e,o){this.cache=this.cache||{};const h=e+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new cr(this.context,io[e],o,Cl[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new K(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:o}=this.context.gl;return this.width!==e||this.height!==o}}class Kt{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,h){const d=Math.pow(2,h),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const O=1/(A=a.af([],A,e))[3]/o*d;return a.b1(A,A,[O,O,1/A[3],O])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const O=function(we,Ae){var je=Ae[0],Ne=Ae[1],$e=Ae[2],qe=je*je+Ne*Ne+$e*$e;return qe>0&&(qe=1/Math.sqrt(qe)),we[0]=Ae[0]*qe,we[1]=Ae[1]*qe,we[2]=Ae[2]*qe,we}([],function(we,Ae,je){var Ne=Ae[0],$e=Ae[1],qe=Ae[2],et=je[0],Ve=je[1],st=je[2];return we[0]=$e*st-qe*Ve,we[1]=qe*et-Ne*st,we[2]=Ne*Ve-$e*et,we}([],M([],g[A[0]],g[A[1]]),M([],g[A[2]],g[A[1]]))),X=-((se=O)[0]*(ae=g[A[1]])[0]+se[1]*ae[1]+se[2]*ae[2]);var se,ae;return O.concat(X)});return new Kt(g,I)}}class Nt{constructor(e,o){this.min=e,this.max=o,this.center=function(h,d,g){return h[0]=.5*d[0],h[1]=.5*d[1],h[2]=.5*d[2],h}([],function(h,d,g){return h[0]=d[0]+g[0],h[1]=d[1]+g[1],h[2]=d[2]+g[2],h}([],this.min,this.max))}quadrant(e){const o=[e%2==0,e<2],h=ne(this.min),d=ne(this.max);for(let g=0;g<o.length;g++)h[g]=o[g]?this.min[g]:this.center[g],d[g]=o[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new Nt(h,d)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const o=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let h=!0;for(let d=0;d<e.planes.length;d++){const g=e.planes[d];let I=0;for(let A=0;A<o.length;A++)a.b2(g,o[A])>=0&&I++;if(I===0)return 0;I!==o.length&&(h=!1)}if(h)return 2;for(let d=0;d<3;d++){let g=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let A=0;A<e.points.length;A++){const O=e.points[A][d]-this.min[d];g=Math.min(g,O),I=Math.max(I,O)}if(I<0||g>this.max[d]-this.min[d])return 0}return 1}}class ln{constructor(e=0,o=0,h=0,d=0){if(isNaN(e)||e<0||isNaN(o)||o<0||isNaN(h)||h<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=o,this.left=h,this.right=d}interpolate(e,o,h){return o.top!=null&&e.top!=null&&(this.top=a.y.number(e.top,o.top,h)),o.bottom!=null&&e.bottom!=null&&(this.bottom=a.y.number(e.bottom,o.bottom,h)),o.left!=null&&e.left!=null&&(this.left=a.y.number(e.left,o.left,h)),o.right!=null&&e.right!=null&&(this.right=a.y.number(e.right,o.right,h)),this}getCenter(e,o){const h=a.ac((this.left+e-this.right)/2,0,e),d=a.ac((this.top+o-this.bottom)/2,0,o);return new a.P(h,d)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new ln(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Sn=85.051129;class Ln{constructor(e,o,h,d,g){this.tileSize=512,this._renderWorldCopies=g===void 0||!!g,this._minZoom=e||0,this._maxZoom=o||22,this._minPitch=h??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ln,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new Ln(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const o=-a.b3(e,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=function(){var h=new a.A(4);return a.A!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}(),function(h,d,g){var I=d[0],A=d[1],O=d[2],X=d[3],se=Math.sin(g),ae=Math.cos(g);h[0]=I*ae+O*se,h[1]=A*ae+X*se,h[2]=I*-se+O*ae,h[3]=A*-se+X*ae}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const o=a.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const o=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.tileZoom=Math.max(0,Math.floor(o)),this.scale=this.zoomScale(o),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,o,h){this._unmodified=!1,this._edgeInsets.interpolate(e,o,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const o=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(e){const o=[new a.b4(0,e)];if(this._renderWorldCopies){const h=this.pointCoordinate(new a.P(0,0)),d=this.pointCoordinate(new a.P(this.width,0)),g=this.pointCoordinate(new a.P(this.width,this.height)),I=this.pointCoordinate(new a.P(0,this.height)),A=Math.floor(Math.min(h.x,d.x,g.x,I.x)),O=Math.floor(Math.max(h.x,d.x,g.x,I.x)),X=1;for(let se=A-X;se<=O+X;se++)se!==0&&o.push(new a.b4(se,e))}return o}coveringTiles(e){var o,h;let d=this.coveringZoomLevel(e);const g=d;if(e.minzoom!==void 0&&d<e.minzoom)return[];e.maxzoom!==void 0&&d>e.maxzoom&&(d=e.maxzoom);const I=this.pointCoordinate(this.getCameraPoint()),A=a.Z.fromLngLat(this.center),O=Math.pow(2,d),X=[O*I.x,O*I.y,0],se=[O*A.x,O*A.y,0],ae=Kt.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d);let we=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(we=d);const Ae=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,je=Ve=>({aabb:new Nt([Ve*O,0,0],[(Ve+1)*O,O,0]),zoom:0,x:0,y:0,wrap:Ve,fullyVisible:!1}),Ne=[],$e=[],qe=d,et=e.reparseOverscaled?g:d;if(this._renderWorldCopies)for(let Ve=1;Ve<=3;Ve++)Ne.push(je(-Ve)),Ne.push(je(Ve));for(Ne.push(je(0));Ne.length>0;){const Ve=Ne.pop(),st=Ve.x,ut=Ve.y;let mt=Ve.fullyVisible;if(!mt){const Ht=Ve.aabb.intersects(ae);if(Ht===0)continue;mt=Ht===2}const At=e.terrain?X:se,Dt=Ve.aabb.distanceX(At),Gt=Ve.aabb.distanceY(At),tn=Math.max(Math.abs(Dt),Math.abs(Gt));if(Ve.zoom===qe||tn>Ae+(1<<qe-Ve.zoom)-2&&Ve.zoom>=we){const Ht=qe-Ve.zoom,$t=X[0]-.5-(st<<Ht),dn=X[1]-.5-(ut<<Ht);$e.push({tileID:new a.S(Ve.zoom===qe?et:Ve.zoom,Ve.wrap,Ve.zoom,st,ut),distanceSq:$([se[0]-.5-st,se[1]-.5-ut]),tileDistanceToCamera:Math.sqrt($t*$t+dn*dn)})}else for(let Ht=0;Ht<4;Ht++){const $t=(st<<1)+Ht%2,dn=(ut<<1)+(Ht>>1),jn=Ve.zoom+1;let Wt=Ve.aabb.quadrant(Ht);if(e.terrain){const Yt=new a.S(jn,Ve.wrap,jn,$t,dn),On=e.terrain.getMinMaxElevation(Yt),wr=(o=On.minElevation)!==null&&o!==void 0?o:this.elevation,Gn=(h=On.maxElevation)!==null&&h!==void 0?h:this.elevation;Wt=new Nt([Wt.min[0],Wt.min[1],wr],[Wt.max[0],Wt.max[1],Gn])}Ne.push({aabb:Wt,zoom:jn,x:$t,y:dn,wrap:Ve.wrap,fullyVisible:mt})}}return $e.sort((Ve,st)=>Ve.distanceSq-st.distanceSq).map(Ve=>Ve.tileID)}resize(e,o){this.width=e,this.height=o,this.pixelsToGLUnits=[2/e,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const o=a.ac(e.lat,-85.051129,Sn);return new a.P(a.O(e.lng)*this.worldSize,a.Q(o)*this.worldSize)}unproject(e){return new a.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const o=this.elevation,h=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,e),g=e.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-g))return;const I=h+o-g,A=Math.cos(this._pitch)*this.cameraToCenterDistance/I/a.b5(1,d.lat),O=this.scaleZoom(A/this.tileSize);this._elevation=g,this._center=d,this.zoom=O}setLocationAtPoint(e,o){const h=this.pointCoordinate(o),d=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(e),I=new a.Z(g.x-(h.x-d.x),g.y-(h.y-d.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,o){return o?this.coordinatePoint(this.locationCoordinate(e),o.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,o){return this.coordinateLocation(this.pointCoordinate(e,o))}locationCoordinate(e){return a.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,o){if(o){const we=o.pointCoordinate(e);if(we!=null)return we}const h=[e.x,e.y,0,1],d=[e.x,e.y,1,1];a.af(h,h,this.pixelMatrixInverse),a.af(d,d,this.pixelMatrixInverse);const g=h[3],I=d[3],A=h[1]/g,O=d[1]/I,X=h[2]/g,se=d[2]/I,ae=X===se?0:(0-X)/(se-X);return new a.Z(a.y.number(h[0]/g,d[0]/I,ae)/this.worldSize,a.y.number(A,O,ae)/this.worldSize)}coordinatePoint(e,o=0,h=this.pixelMatrix){const d=[e.x*this.worldSize,e.y*this.worldSize,o,1];return a.af(d,d,h),new a.P(d[0]/d[3],d[1]/d[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new at().extend(this.pointLocation(new a.P(0,e))).extend(this.pointLocation(new a.P(this.width,e))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new at([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Sn])}calculateTileMatrix(e){const o=e.canonical,h=this.worldSize/this.zoomScale(o.z),d=o.x+Math.pow(2,o.z)*e.wrap,g=a.an(new Float64Array(16));return a.J(g,g,[d*h,o.y*h,0]),a.K(g,g,[h/a.X,h/a.X,1]),g}calculatePosMatrix(e,o=!1){const h=e.key,d=o?this._alignedPosMatrixCache:this._posMatrixCache;if(d[h])return d[h];const g=this.calculateTileMatrix(e);return a.L(g,o?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,g),d[h]=new Float32Array(g),d[h]}calculateFogMatrix(e){const o=e.key,h=this._fogMatrixCache;if(h[o])return h[o];const d=this.calculateTileMatrix(e);return a.L(d,this.fogMatrix,d),h[o]=new Float32Array(d),h[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,o){o=a.ac(+o,this.minZoom,this.maxZoom);const h={center:new a.N(e.lng,e.lat),zoom:o};let d=this.lngRange;if(!this._renderWorldCopies&&d===null){const Ve=179.9999999999;d=[-Ve,Ve]}const g=this.tileSize*this.zoomScale(h.zoom);let I=0,A=g,O=0,X=g,se=0,ae=0;const{x:we,y:Ae}=this.size;if(this.latRange){const Ve=this.latRange;I=a.Q(Ve[1])*g,A=a.Q(Ve[0])*g,A-I<Ae&&(se=Ae/(A-I))}d&&(O=a.b3(a.O(d[0])*g,0,g),X=a.b3(a.O(d[1])*g,0,g),X<O&&(X+=g),X-O<we&&(ae=we/(X-O)));const{x:je,y:Ne}=this.project.call({worldSize:g},e);let $e,qe;const et=Math.max(ae||0,se||0);if(et){const Ve=new a.P(ae?(X+O)/2:je,se?(A+I)/2:Ne);return h.center=this.unproject.call({worldSize:g},Ve).wrap(),h.zoom+=this.scaleZoom(et),h}if(this.latRange){const Ve=Ae/2;Ne-Ve<I&&(qe=I+Ve),Ne+Ve>A&&(qe=A-Ve)}if(d){const Ve=(O+X)/2;let st=je;this._renderWorldCopies&&(st=a.b3(je,Ve-g/2,Ve+g/2));const ut=we/2;st-ut<O&&($e=O+ut),st+ut>X&&($e=X-ut)}if($e!==void 0||qe!==void 0){const Ve=new a.P($e??je,qe??Ne);h.center=this.unproject.call({worldSize:g},Ve).wrap()}return h}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:o,zoom:h}=this.getConstrained(this.center,this.zoom);this.center=o,this.zoom=h,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,o=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let d=a.an(new Float64Array(16));a.K(d,d,[this.width/2,-this.height/2,1]),a.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=a.an(new Float64Array(16)),a.K(d,d,[1,-1,1]),a.J(d,d,[-1,-1,0]),a.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;const g=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this.minElevationForCurrentTile),A=g-I*this._pixelPerMeter/Math.cos(this._pitch),O=I<0?A:g,X=Math.PI/2+this._pitch,se=this._fov*(.5+e.y/this.height),ae=Math.sin(se)*O/Math.sin(a.ac(Math.PI-X-se,.01,Math.PI-.01)),we=this.getHorizon(),Ae=2*Math.atan(we/this.cameraToCenterDistance)*(.5+e.y/(2*we)),je=Math.sin(Ae)*O/Math.sin(a.ac(Math.PI-X-Ae,.01,Math.PI-.01)),Ne=Math.min(ae,je);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Ne+O),this.nearZ=this.height/50,d=new Float64Array(16),a.b6(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-e.x/this.width,d[9]=2*e.y/this.height,this.projectionMatrix=a.ae(d),a.K(d,d,[1,-1,1]),a.J(d,d,[0,0,-this.cameraToCenterDistance]),a.b7(d,d,this._pitch),a.ad(d,d,this.angle),a.J(d,d,[-o,-h,0]),this.mercatorMatrix=a.K([],d,[this.worldSize,this.worldSize,this.worldSize]),a.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,d),a.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=a.as([],d),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,g,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-o,-h,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,d);const $e=this.width%2/2,qe=this.height%2/2,et=Math.cos(this.angle),Ve=Math.sin(this.angle),st=o-Math.round(o)+et*$e+Ve*qe,ut=h-Math.round(h)+et*qe+Ve*$e,mt=new Float64Array(d);if(a.J(mt,mt,[st>.5?st-1:st,ut>.5?ut-1:ut,0]),this.alignedModelViewProjectionMatrix=mt,d=a.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new a.P(0,0)),o=[e.x*this.worldSize,e.y*this.worldSize,0,1];return a.af(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,e))}getCameraQueryGeometry(e){const o=this.getCameraPoint();if(e.length===1)return[e[0],o];{let h=o.x,d=o.y,g=o.x,I=o.y;for(const A of e)h=Math.min(h,A.x),d=Math.min(d,A.y),g=Math.max(g,A.x),I=Math.max(I,A.y);return[new a.P(h,d),new a.P(g,d),new a.P(g,I),new a.P(h,I),new a.P(h,d)]}}lngLatToCameraDepth(e,o){const h=this.locationCoordinate(e),d=[h.x*this.worldSize,h.y*this.worldSize,o,1];return a.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function pr(y,e){let o,h=!1,d=null,g=null;const I=()=>{d=null,h&&(y.apply(g,o),d=setTimeout(I,e),h=!1)};return(...A)=>(h=!0,g=this,o=A,d||I(),d)}class ar{constructor(e){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let h;return o.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(h=d)}),(h&&h[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(o.length>=3&&!o.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:h,pitch:+(o[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const h=o.join("/");let d=h;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${h}`);let g=window.location.hash.replace(d,"");g.startsWith("#&")?g=g.slice(0,1)+g.slice(2):g==="#"&&(g="");let I=window.location.href.replace(/(#.+)?$/,g);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=pr(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const o=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,d=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,d),I=Math.round(o.lng*g)/g,A=Math.round(o.lat*g)/g,O=this._map.getBearing(),X=this._map.getPitch();let se="";if(se+=e?`/${I}/${A}/${h}`:`${h}/${A}/${I}`,(O||X)&&(se+="/"+Math.round(10*O)/10),X&&(se+=`/${Math.round(X)}`),this._hashName){const ae=this._hashName;let we=!1;const Ae=window.location.hash.slice(1).split("&").map(je=>{const Ne=je.split("=")[0];return Ne===ae?(we=!0,`${Ne}=${se}`):je}).filter(je=>je);return we||Ae.push(`${ae}=${se}`),`#${Ae.join("&")}`}return`#${se}`}}const hr={linearity:.3,easing:a.b8(0,0,.3,1)},Nr=a.e({deceleration:2500,maxSpeed:1400},hr),Qr=a.e({deceleration:20,maxSpeed:1400},hr),ei=a.e({deceleration:1e3,maxSpeed:360},hr),co=a.e({deceleration:1e3,maxSpeed:90},hr);class $i{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:C.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,o=C.now();for(;e.length>0&&o-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:g}of this._inertiaBuffer)o.zoom+=g.zoomDelta||0,o.bearing+=g.bearingDelta||0,o.pitch+=g.pitchDelta||0,g.panDelta&&o.pan._add(g.panDelta),g.around&&(o.around=g.around),g.pinchAround&&(o.pinchAround=g.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(o.pan.mag()){const g=Gs(o.pan.mag(),h,a.e({},Nr,e||{}));d.offset=o.pan.mult(g.amount/o.pan.mag()),d.center=this._map.transform.center,Ii(d,g)}if(o.zoom){const g=Gs(o.zoom,h,Qr);d.zoom=this._map.transform.zoom+g.amount,Ii(d,g)}if(o.bearing){const g=Gs(o.bearing,h,ei);d.bearing=this._map.transform.bearing+a.ac(g.amount,-179,179),Ii(d,g)}if(o.pitch){const g=Gs(o.pitch,h,co);d.pitch=this._map.transform.pitch+g.amount,Ii(d,g)}if(d.zoom||d.bearing){const g=o.pinchAround===void 0?o.around:o.pinchAround;d.around=g?this._map.unproject(g):this._map.getCenter()}return this.clear(),a.e(d,{noMoveStart:!0})}}function Ii(y,e){(!y.duration||y.duration<e.duration)&&(y.duration=e.duration,y.easing=e.easing)}function Gs(y,e,o){const{maxSpeed:h,linearity:d,deceleration:g}=o,I=a.ac(y*d/(e/1e3),-h,h),A=Math.abs(I)/(g*d);return{easing:o.easing,duration:1e3*A,amount:I*(A/2)}}class ti extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,h,d={}){const g=k.mousePos(o.getCanvas(),h),I=o.unproject(g);super(e,a.e({point:g,lngLat:I,originalEvent:h},d)),this._defaultPrevented=!1,this.target=o}}class Ji extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,h){const d=e==="touchend"?h.changedTouches:h.touches,g=k.touchPos(o.getCanvasContainer(),d),I=g.map(O=>o.unproject(O)),A=g.reduce((O,X,se,ae)=>O.add(X.div(ae.length)),new a.P(0,0));super(e,{points:g,point:A,lngLats:I,lngLat:o.unproject(A),originalEvent:h}),this._defaultPrevented=!1}}class Bc extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,h){super(e,{originalEvent:h}),this._defaultPrevented=!1}}class Nc{constructor(e,o){this._map=e,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Bc(e.type,this._map,e))}mousedown(e,o){return this._mousedownPos=o,this._firePreventable(new ti(e.type,this._map,e))}mouseup(e){this._map.fire(new ti(e.type,this._map,e))}click(e,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new ti(e.type,this._map,e))}dblclick(e){return this._firePreventable(new ti(e.type,this._map,e))}mouseover(e){this._map.fire(new ti(e.type,this._map,e))}mouseout(e){this._map.fire(new ti(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Ji(e.type,this._map,e))}touchmove(e){this._map.fire(new Ji(e.type,this._map,e))}touchend(e){this._map.fire(new Ji(e.type,this._map,e))}touchcancel(e){this._map.fire(new Ji(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zr{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new ti(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ti("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new ti(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Go{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(a.P.convert(e),this._map.terrain)}}class ho{constructor(e,o){this._map=e,this._tr=new Go(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,o){this.isEnabled()&&e.shiftKey&&e.button===0&&(k.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(e,o){if(!this._active)return;const h=o;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const d=this._startPos;this._lastPos=h,this._box||(this._box=k.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const g=Math.min(d.x,h.x),I=Math.max(d.x,h.x),A=Math.min(d.y,h.y),O=Math.max(d.y,h.y);k.setTransform(this._box,`translate(${g}px,${A}px)`),this._box.style.width=I-g+"px",this._box.style.height=O-A+"px"}mouseupWindow(e,o){if(!this._active||e.button!==0)return;const h=this._startPos,d=o;if(this.reset(),k.suppressClick(),h.x!==d.x||h.y!==d.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:e})),{cameraAnimation:g=>g.fitScreenCoordinates(h,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,o){return this._map.fire(new a.k(e,{originalEvent:o}))}}function Bl(y,e){if(y.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${e.length}`);const o={};for(let h=0;h<y.length;h++)o[y[h].identifier]=e[h];return o}class Hs{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,o,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),h.length===this.numTouches&&(this.centroid=function(d){const g=new a.P(0,0);for(const I of d)g._add(I);return g.div(d.length)}(o),this.touches=Bl(h,o)))}touchmove(e,o,h){if(this.aborted||!this.centroid)return;const d=Bl(h,o);for(const g in this.touches){const I=d[g];(!I||I.dist(this.touches[g])>30)&&(this.aborted=!0)}}touchend(e,o,h){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Nl{constructor(e){this.singleTap=new Hs(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,o,h){this.singleTap.touchstart(e,o,h)}touchmove(e,o,h){this.singleTap.touchmove(e,o,h)}touchend(e,o,h){const d=this.singleTap.touchend(e,o,h);if(d){const g=e.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(d)<30;if(g&&I||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class Na{constructor(e){this._tr=new Go(e),this._zoomIn=new Nl({numTouches:1,numTaps:2}),this._zoomOut=new Nl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,o,h){this._zoomIn.touchstart(e,o,h),this._zoomOut.touchstart(e,o,h)}touchmove(e,o,h){this._zoomIn.touchmove(e,o,h),this._zoomOut.touchmove(e,o,h)}touchend(e,o,h){const d=this._zoomIn.touchend(e,o,h),g=this._zoomOut.touchend(e,o,h),I=this._tr;return d?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(d)},{originalEvent:e})}):g?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(g)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ca{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const o=this._moveFunction(...e);if(o.bearingDelta||o.pitchDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(e,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=o.length?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,o){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const d=o.length?o[0]:o;return!this._moved&&d.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(h,d))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&k.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Uc={0:1,2:2};class Ua{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const o=k.mouseButton(e);this._eventButton=o}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(o,h){const d=Uc[h];return o.buttons===void 0||(o.buttons&d)!==d}(e,this._eventButton)}isValidEndEvent(e){return k.mouseButton(e)===this._eventButton}}class Vc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Au=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=e=>{e.preventDefault()}},ac=({enable:y,clickTolerance:e,bearingDegreesPerPixelMoved:o=.8})=>{const h=new Ua({checkCorrectEvent:d=>k.mouseButton(d)===0&&d.ctrlKey||k.mouseButton(d)===2});return new ca({clickTolerance:e,move:(d,g)=>({bearingDelta:(g.x-d.x)*o}),moveStateManager:h,enable:y,assignEvents:Au})},Pr=({enable:y,clickTolerance:e,pitchDegreesPerPixelMoved:o=-.5})=>{const h=new Ua({checkCorrectEvent:d=>k.mouseButton(d)===0&&d.ctrlKey||k.mouseButton(d)===2});return new ca({clickTolerance:e,move:(d,g)=>({pitchDelta:(g.y-d.y)*o}),moveStateManager:h,enable:y,assignEvents:Au})};class ha{constructor(e,o){this._clickTolerance=e.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,o,h){return this._calculateTransform(e,o,h)}touchmove(e,o,h){if(this._active){if(!this._shouldBePrevented(h.length))return e.preventDefault(),this._calculateTransform(e,o,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,o,h){this._calculateTransform(e,o,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,o,h){h.length>0&&(this._active=!0);const d=Bl(h,o),g=new a.P(0,0),I=new a.P(0,0);let A=0;for(const X in d){const se=d[X],ae=this._touches[X];ae&&(g._add(se),I._add(se.sub(ae)),A++,d[X]=se)}if(this._touches=d,this._shouldBePrevented(A)||!I.mag())return;const O=I.div(A);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:g.div(A),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ul{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,o,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([o[0],o[1]]))}touchmove(e,o,h){if(!this._firstTwoTouches)return;e.preventDefault();const[d,g]=this._firstTwoTouches,I=da(h,o,d),A=da(h,o,g);if(!I||!A)return;const O=this._aroundCenter?null:I.add(A).div(2);return this._move([I,A],O,e)}touchend(e,o,h){if(!this._firstTwoTouches)return;const[d,g]=this._firstTwoTouches,I=da(h,o,d),A=da(h,o,g);I&&A||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function da(y,e,o){for(let h=0;h<y.length;h++)if(y[h].identifier===o)return e[h]}function lc(y,e){return Math.log(y/e)/Math.LN2}class Mu extends ul{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,o){const h=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(lc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:lc(this._distance,h),pinchAround:o}}}function cl(y,e){return 180*y.angleWith(e)/Math.PI}class Ul extends ul{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,o,h){const d=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:cl(this._vector,d),pinchAround:o}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const o=25/(Math.PI*this._minDiameter)*360,h=cl(e,this._startVector);return Math.abs(h)<o}}function fa(y){return Math.abs(y.y)>Math.abs(y.x)}class hl extends ul{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,o,h){super.touchstart(e,o,h),this._currentTouchCount=h.length}_start(e){this._lastPoints=e,fa(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,o,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const d=e[0].sub(this._lastPoints[0]),g=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,g,h.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(d.y+g.y)/2*-.5}):void 0}gestureBeginsVertically(e,o,h){if(this._valid!==void 0)return this._valid;const d=e.mag()>=2,g=o.mag()>=2;if(!d&&!g)return;if(!d||!g)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const I=e.y>0==o.y>0;return fa(e)&&fa(o)&&I}}const Oh={panStep:100,bearingStep:15,pitchStep:10};class Ho{constructor(e){this._tr=new Go(e);const o=Oh;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let o=0,h=0,d=0,g=0,I=0;switch(e.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:e.shiftKey?h=-1:(e.preventDefault(),g=-1);break;case 39:e.shiftKey?h=1:(e.preventDefault(),g=1);break;case 38:e.shiftKey?d=1:(e.preventDefault(),I=-1);break;case 40:e.shiftKey?d=-1:(e.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(h=0,d=0),{cameraAnimation:A=>{const O=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:gs,zoom:o?Math.round(O.zoom)+o*(e.shiftKey?2:1):O.zoom,bearing:O.bearing+h*this._bearingStep,pitch:O.pitch+d*this._pitchStep,offset:[-g*this._panStep,-I*this._panStep],center:O.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gs(y){return y*(2-y)}const Vl=4.000244140625;class fo{constructor(e,o){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=e,this._tr=new Go(e),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let o=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const h=C.now(),d=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,o!==0&&o%Vl==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(d*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),e.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=e,this._delta-=o,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=k.mousePos(this._map.getCanvas(),e),h=this._tr;this._around=o.y>h.transform.height/2-h.transform.getHorizon()?a.N.convert(this._aroundCenter?h.center:h.unproject(o)):a.N.convert(h.center),this._aroundPoint=h.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>Vl?this._wheelZoomRate:this._defaultZoomRate;let X=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&X!==0&&(X=1/X);const se=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(se*X))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,h=this._startZoom,d=this._easing;let g,I=!1;const A=C.now()-this._lastWheelEventTime;if(this._type==="wheel"&&h&&d&&A){const O=Math.min(A/200,1),X=d(O);g=a.y.number(h,o,X),O<1?this._frameId||(this._frameId=!0):I=!0}else g=o,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:g-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let o=a.b9;if(this._prevEase){const h=this._prevEase,d=(C.now()-h.start)/h.duration,g=h.easing(d+.01)-h.easing(d),I=.27/Math.sqrt(g*g+1e-4)*.01,A=Math.sqrt(.0729-I*I);o=a.b8(I,A,.25,1)}return this._prevEase={start:C.now(),duration:e,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class pa{constructor(e,o){this._clickZoom=e,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $c{constructor(e){this._tr=new Go(e),this.reset()}reset(){this._active=!1}dblclick(e,o){return e.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gc{constructor(){this._tap=new Nl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,o,h){if(!this._swipePoint)if(this._tapTime){const d=o[0],g=e.timeStamp-this._tapTime<500,I=this._tapPoint.dist(d)<30;g&&I?h.length>0&&(this._swipePoint=d,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(e,o,h)}touchmove(e,o,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const d=o[0],g=d.y-this._swipePoint.y;return this._swipePoint=d,e.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(e,o,h)}touchend(e,o,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const d=this._tap.touchend(e,o,h);d&&(this._tapTime=e.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uc{constructor(e,o,h){this._el=e,this._mousePan=o,this._touchPan=h}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class jh{constructor(e,o,h){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=o,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class cc{constructor(e,o,h,d){this._el=e,this._touchZoom=o,this._touchRotate=h,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class $l{constructor(e,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=k.create("div","maplibregl-cooperative-gesture-screen",e);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=o,this._container.appendChild(d);const g=document.createElement("div");g.className="maplibregl-mobile-message",g.textContent=h,this._container.appendChild(g),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(k.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,o){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:e,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Zo=y=>y.zoom||y.drag||y.pitch||y.rotate;class sn extends a.k{}function ys(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class hc{constructor(e,o){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,g)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=d.type==="renderFrame"?void 0:d,A={needsRenderFrame:!1},O={},X={},se=d.touches,ae=se?this._getMapTouches(se):void 0,we=ae?k.touchPos(this._map.getCanvas(),ae):k.mousePos(this._map.getCanvas(),d);for(const{handlerName:Ne,handler:$e,allowed:qe}of this._handlers){if(!$e.isEnabled())continue;let et;this._blockedByActive(X,qe,Ne)?$e.reset():$e[g||d.type]&&(et=$e[g||d.type](d,we,ae),this.mergeHandlerResult(A,O,et,Ne,I),et&&et.needsRenderFrame&&this._triggerRenderFrame()),(et||$e.isActive())&&(X[Ne]=$e)}const Ae={};for(const Ne in this._previousActiveHandlers)X[Ne]||(Ae[Ne]=I);this._previousActiveHandlers=X,(Object.keys(Ae).length||ys(A))&&(this._changes.push([A,O,Ae]),this._triggerRenderFrame()),(Object.keys(X).length||ys(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:je}=A;je&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],je(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $i(e),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[d,g,I]of this._listeners)k.addEventListener(d,g,d===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[e,o,h]of this._listeners)k.removeEventListener(e,o,e===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(e){const o=this._map,h=o.getCanvasContainer();this._add("mapEvent",new Nc(o,e));const d=o.boxZoom=new ho(o,e);this._add("boxZoom",d),e.interactive&&e.boxZoom&&d.enable();const g=o.cooperativeGestures=new $l(o,e.cooperativeGestures);this._add("cooperativeGestures",g),e.cooperativeGestures&&g.enable();const I=new Na(o),A=new $c(o);o.doubleClickZoom=new pa(A,I),this._add("tapZoom",I),this._add("clickZoom",A),e.interactive&&e.doubleClickZoom&&o.doubleClickZoom.enable();const O=new Gc;this._add("tapDragZoom",O);const X=o.touchPitch=new hl(o);this._add("touchPitch",X),e.interactive&&e.touchPitch&&o.touchPitch.enable(e.touchPitch);const se=ac(e),ae=Pr(e);o.dragRotate=new jh(e,se,ae),this._add("mouseRotate",se,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]),e.interactive&&e.dragRotate&&o.dragRotate.enable();const we=(({enable:et,clickTolerance:Ve})=>{const st=new Ua({checkCorrectEvent:ut=>k.mouseButton(ut)===0&&!ut.ctrlKey});return new ca({clickTolerance:Ve,move:(ut,mt)=>({around:mt,panDelta:mt.sub(ut)}),activateOnStart:!0,moveStateManager:st,enable:et,assignEvents:Au})})(e),Ae=new ha(e,o);o.dragPan=new uc(h,we,Ae),this._add("mousePan",we),this._add("touchPan",Ae,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&o.dragPan.enable(e.dragPan);const je=new Ul,Ne=new Mu;o.touchZoomRotate=new cc(h,Ne,je,O),this._add("touchRotate",je,["touchPan","touchZoom"]),this._add("touchZoom",Ne,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&o.touchZoomRotate.enable(e.touchZoomRotate);const $e=o.scrollZoom=new fo(o,()=>this._triggerRenderFrame());this._add("scrollZoom",$e,["mousePan"]),e.interactive&&e.scrollZoom&&o.scrollZoom.enable(e.scrollZoom);const qe=o.keyboard=new Ho(o);this._add("keyboard",qe),e.interactive&&e.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new Zr(o))}_add(e,o,h){this._handlers.push({handlerName:e,handler:o,allowed:h}),this._handlersById[e]=o}stop(e){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Zo(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,o,h){for(const d in e)if(d!==h&&(!o||o.indexOf(d)<0))return!0;return!1}_getMapTouches(e){const o=[];for(const h of e)this._el.contains(h.target)&&o.push(h);return o}mergeHandlerResult(e,o,h,d,g){if(!h)return;a.e(e,h);const I={handlerName:d,originalEvent:h.originalEvent||g};h.zoomDelta!==void 0&&(o.zoom=I),h.panDelta!==void 0&&(o.drag=I),h.pitchDelta!==void 0&&(o.pitch=I),h.bearingDelta!==void 0&&(o.rotate=I)}_applyChanges(){const e={},o={},h={};for(const[d,g,I]of this._changes)d.panDelta&&(e.panDelta=(e.panDelta||new a.P(0,0))._add(d.panDelta)),d.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(e.around=d.around),d.pinchAround!==void 0&&(e.pinchAround=d.pinchAround),d.noInertia&&(e.noInertia=d.noInertia),a.e(o,g),a.e(h,I);this._updateMapTransform(e,o,h),this._changes=[]}_updateMapTransform(e,o,h){const d=this._map,g=d._getTransformForUpdate(),I=d.terrain;if(!(ys(e)||I&&this._terrainMovement))return this._fireEvents(o,h,!0);let{panDelta:A,zoomDelta:O,bearingDelta:X,pitchDelta:se,around:ae,pinchAround:we}=e;we!==void 0&&(ae=we),d._stop(!0),ae=ae||d.transform.centerPoint;const Ae=g.pointLocation(A?ae.sub(A):ae);X&&(g.bearing+=X),se&&(g.pitch+=se),O&&(g.zoom+=O),I?this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?g.center=g.pointLocation(g.centerPoint.sub(A)):g.setLocationAtPoint(Ae,ae):(this._terrainMovement=!0,this._map._elevationFreeze=!0,g.setLocationAtPoint(Ae,ae)):g.setLocationAtPoint(Ae,ae),d._applyUpdatedTransform(g),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(o,h,!0)}_fireEvents(e,o,h){const d=Zo(this._eventsInProgress),g=Zo(e),I={};for(const ae in e){const{originalEvent:we}=e[ae];this._eventsInProgress[ae]||(I[`${ae}start`]=we),this._eventsInProgress[ae]=e[ae]}!d&&g&&this._fireEvent("movestart",g.originalEvent);for(const ae in I)this._fireEvent(ae,I[ae]);g&&this._fireEvent("move",g.originalEvent);for(const ae in e){const{originalEvent:we}=e[ae];this._fireEvent(ae,we)}const A={};let O;for(const ae in this._eventsInProgress){const{handlerName:we,originalEvent:Ae}=this._eventsInProgress[ae];this._handlersById[we].isActive()||(delete this._eventsInProgress[ae],O=o[we]||Ae,A[`${ae}end`]=O)}for(const ae in A)this._fireEvent(ae,A[ae]);const X=Zo(this._eventsInProgress),se=(d||g)&&!X;if(se&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ae=this._map._getTransformForUpdate();ae.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(ae)}if(h&&se){this._updatingCamera=!0;const ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),we=Ae=>Ae!==0&&-this._bearingSnap<Ae&&Ae<this._bearingSnap;!ae||!ae.essential&&C.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:O})),we(this._map.getBearing())&&this._map.resetNorth()):(we(ae.bearing||this._map.getBearing())&&(ae.bearing=0),ae.freezeElevation=!0,this._map.easeTo(ae,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(e,o){this._map.fire(new a.k(e,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new sn("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class dl extends a.E{constructor(e,o){super(),this._renderFrameCallback=()=>{const h=Math.min((C.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=o.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,o){return this.jumpTo({center:e},o)}panBy(e,o,h){return e=a.P.convert(e).mult(-1),this.panTo(this.transform.center,a.e({offset:e},o),h)}panTo(e,o,h){return this.easeTo(a.e({center:e},o),h)}getZoom(){return this.transform.zoom}setZoom(e,o){return this.jumpTo({zoom:e},o),this}zoomTo(e,o,h){return this.easeTo(a.e({zoom:e},o),h)}zoomIn(e,o){return this.zoomTo(this.getZoom()+1,e,o),this}zoomOut(e,o){return this.zoomTo(this.getZoom()-1,e,o),this}getBearing(){return this.transform.bearing}setBearing(e,o){return this.jumpTo({bearing:e},o),this}getPadding(){return this.transform.padding}setPadding(e,o){return this.jumpTo({padding:e},o),this}rotateTo(e,o,h){return this.easeTo(a.e({bearing:e},o),h)}resetNorth(e,o){return this.rotateTo(0,a.e({duration:1e3},e),o),this}resetNorthPitch(e,o){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},e),o),this}snapToNorth(e,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,o):this}getPitch(){return this.transform.pitch}setPitch(e,o){return this.jumpTo({pitch:e},o),this}cameraForBounds(e,o){e=at.convert(e).adjustAntiMeridian();const h=o&&o.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),h,o)}_cameraForBoxAndBearing(e,o,h,d){const g={top:0,bottom:0,right:0,left:0};if(typeof(d=a.e({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const Ht=d.padding;d.padding={top:Ht,bottom:Ht,right:Ht,left:Ht}}d.padding=a.e(g,d.padding);const I=this.transform,A=I.padding,O=new at(e,o),X=I.project(O.getNorthWest()),se=I.project(O.getNorthEast()),ae=I.project(O.getSouthEast()),we=I.project(O.getSouthWest()),Ae=a.ba(-h),je=X.rotate(Ae),Ne=se.rotate(Ae),$e=ae.rotate(Ae),qe=we.rotate(Ae),et=new a.P(Math.max(je.x,Ne.x,qe.x,$e.x),Math.max(je.y,Ne.y,qe.y,$e.y)),Ve=new a.P(Math.min(je.x,Ne.x,qe.x,$e.x),Math.min(je.y,Ne.y,qe.y,$e.y)),st=et.sub(Ve),ut=(I.width-(A.left+A.right+d.padding.left+d.padding.right))/st.x,mt=(I.height-(A.top+A.bottom+d.padding.top+d.padding.bottom))/st.y;if(mt<0||ut<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const At=Math.min(I.scaleZoom(I.scale*Math.min(ut,mt)),d.maxZoom),Dt=a.P.convert(d.offset),Gt=new a.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(a.ba(h)),tn=Dt.add(Gt).mult(I.scale/I.zoomScale(At));return{center:I.unproject(X.add(ae).div(2).sub(tn)),zoom:At,bearing:h}}fitBounds(e,o,h){return this._fitInternal(this.cameraForBounds(e,o),o,h)}fitScreenCoordinates(e,o,h,d,g){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(e)),this.transform.pointLocation(a.P.convert(o)),h,d),d,g)}_fitInternal(e,o,h){return e?(delete(o=a.e(e,o)).padding,o.linear?this.easeTo(o,h):this.flyTo(o,h)):this}jumpTo(e,o){this.stop();const h=this._getTransformForUpdate();let d=!1,g=!1,I=!1;return"zoom"in e&&h.zoom!==+e.zoom&&(d=!0,h.zoom=+e.zoom),e.center!==void 0&&(h.center=a.N.convert(e.center)),"bearing"in e&&h.bearing!==+e.bearing&&(g=!0,h.bearing=+e.bearing),"pitch"in e&&h.pitch!==+e.pitch&&(I=!0,h.pitch=+e.pitch),e.padding==null||h.isPaddingEqual(e.padding)||(h.padding=e.padding),this._applyUpdatedTransform(h),this.fire(new a.k("movestart",o)).fire(new a.k("move",o)),d&&this.fire(new a.k("zoomstart",o)).fire(new a.k("zoom",o)).fire(new a.k("zoomend",o)),g&&this.fire(new a.k("rotatestart",o)).fire(new a.k("rotate",o)).fire(new a.k("rotateend",o)),I&&this.fire(new a.k("pitchstart",o)).fire(new a.k("pitch",o)).fire(new a.k("pitchend",o)),this.fire(new a.k("moveend",o))}calculateCameraOptionsFromTo(e,o,h,d=0){const g=a.Z.fromLngLat(e,o),I=a.Z.fromLngLat(h,d),A=I.x-g.x,O=I.y-g.y,X=I.z-g.z,se=Math.hypot(A,O,X);if(se===0)throw new Error("Can't calculate camera options with same From and To");const ae=Math.hypot(A,O),we=this.transform.scaleZoom(this.transform.cameraToCenterDistance/se/this.transform.tileSize),Ae=180*Math.atan2(A,-O)/Math.PI;let je=180*Math.acos(ae/se)/Math.PI;return je=X<0?90-je:90+je,{center:I.toLngLat(),zoom:we,pitch:je,bearing:Ae}}easeTo(e,o){var h;this._stop(!1,e.easeId),((e=a.e({offset:[0,0],duration:500,easing:a.b9},e)).animate===!1||!e.essential&&C.prefersReducedMotion)&&(e.duration=0);const d=this._getTransformForUpdate(),g=d.zoom,I=d.bearing,A=d.pitch,O=d.padding,X="bearing"in e?this._normalizeBearing(e.bearing,I):I,se="pitch"in e?+e.pitch:A,ae="padding"in e?e.padding:d.padding,we=a.P.convert(e.offset);let Ae=d.centerPoint.add(we);const je=d.pointLocation(Ae),{center:Ne,zoom:$e}=d.getConstrained(a.N.convert(e.center||je),(h=e.zoom)!==null&&h!==void 0?h:g);this._normalizeCenter(Ne,d);const qe=d.project(je),et=d.project(Ne).sub(qe),Ve=d.zoomScale($e-g);let st,ut;e.around&&(st=a.N.convert(e.around),ut=d.locationPoint(st));const mt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$e!==g,this._rotating=this._rotating||I!==X,this._pitching=this._pitching||se!==A,this._padding=!d.isPaddingEqual(ae),this._easeId=e.easeId,this._prepareEase(o,e.noMoveStart,mt),this.terrain&&this._prepareElevation(Ne),this._ease(At=>{if(this._zooming&&(d.zoom=a.y.number(g,$e,At)),this._rotating&&(d.bearing=a.y.number(I,X,At)),this._pitching&&(d.pitch=a.y.number(A,se,At)),this._padding&&(d.interpolatePadding(O,ae,At),Ae=d.centerPoint.add(we)),this.terrain&&!e.freezeElevation&&this._updateElevation(At),st)d.setLocationAtPoint(st,ut);else{const Dt=d.zoomScale(d.zoom-g),Gt=$e>g?Math.min(2,Ve):Math.max(.5,Ve),tn=Math.pow(Gt,1-At),Ht=d.unproject(qe.add(et.mult(At*tn)).mult(Dt));d.setLocationAtPoint(d.renderWorldCopies?Ht.wrap():Ht,Ae)}this._applyUpdatedTransform(d),this._fireMoveEvents(o)},At=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o,At)},e),this}_prepareEase(e,o,h={}){this._moving=!0,o||h.moving||this.fire(new a.k("movestart",e)),this._zooming&&!h.zooming&&this.fire(new a.k("zoomstart",e)),this._rotating&&!h.rotating&&this.fire(new a.k("rotatestart",e)),this._pitching&&!h.pitching&&this.fire(new a.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&o!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(h-(o-(h*e+this._elevationStart))/(1-e)),this._elevationTarget=o}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const o=e.getCameraPosition(),h=this.terrain.getElevationForLngLatZoom(o.lngLat,e.zoom);if(o.altitude<h){const d=this.calculateCameraOptionsFromTo(o.lngLat,h,e.center,e.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(e){const o=[];if(this.terrain&&o.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&o.push(d=>this.transformCameraUpdate(d)),!o.length)return;const h=e.clone();for(const d of o){const g=h.clone(),{center:I,zoom:A,pitch:O,bearing:X,elevation:se}=d(g);I&&(g.center=I),A!==void 0&&(g.zoom=A),O!==void 0&&(g.pitch=O),X!==void 0&&(g.bearing=X),se!==void 0&&(g.elevation=se),h.apply(g)}this.transform.apply(h)}_fireMoveEvents(e){this.fire(new a.k("move",e)),this._zooming&&this.fire(new a.k("zoom",e)),this._rotating&&this.fire(new a.k("rotate",e)),this._pitching&&this.fire(new a.k("pitch",e))}_afterEase(e,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const h=this._zooming,d=this._rotating,g=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new a.k("zoomend",e)),d&&this.fire(new a.k("rotateend",e)),g&&this.fire(new a.k("pitchend",e)),this.fire(new a.k("moveend",e))}flyTo(e,o){var h;if(!e.essential&&C.prefersReducedMotion){const Yt=a.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Yt,o)}this.stop(),e=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},e);const d=this._getTransformForUpdate(),g=d.zoom,I=d.bearing,A=d.pitch,O=d.padding,X="bearing"in e?this._normalizeBearing(e.bearing,I):I,se="pitch"in e?+e.pitch:A,ae="padding"in e?e.padding:d.padding,we=a.P.convert(e.offset);let Ae=d.centerPoint.add(we);const je=d.pointLocation(Ae),{center:Ne,zoom:$e}=d.getConstrained(a.N.convert(e.center||je),(h=e.zoom)!==null&&h!==void 0?h:g);this._normalizeCenter(Ne,d);const qe=d.zoomScale($e-g),et=d.project(je),Ve=d.project(Ne).sub(et);let st=e.curve;const ut=Math.max(d.width,d.height),mt=ut/qe,At=Ve.mag();if("minZoom"in e){const Yt=a.ac(Math.min(e.minZoom,g,$e),d.minZoom,d.maxZoom),On=ut/d.zoomScale(Yt-g);st=Math.sqrt(On/At*2)}const Dt=st*st;function Gt(Yt){const On=(mt*mt-ut*ut+(Yt?-1:1)*Dt*Dt*At*At)/(2*(Yt?mt:ut)*Dt*At);return Math.log(Math.sqrt(On*On+1)-On)}function tn(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function Ht(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}const $t=Gt(!1);let dn=function(Yt){return Ht($t)/Ht($t+st*Yt)},jn=function(Yt){return ut*((Ht($t)*(tn(On=$t+st*Yt)/Ht(On))-tn($t))/Dt)/At;var On},Wt=(Gt(!0)-$t)/st;if(Math.abs(At)<1e-6||!isFinite(Wt)){if(Math.abs(ut-mt)<1e-6)return this.easeTo(e,o);const Yt=mt<ut?-1:1;Wt=Math.abs(Math.log(mt/ut))/st,jn=()=>0,dn=On=>Math.exp(Yt*st*On)}return e.duration="duration"in e?+e.duration:1e3*Wt/("screenSpeed"in e?+e.screenSpeed/st:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=I!==X,this._pitching=se!==A,this._padding=!d.isPaddingEqual(ae),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(Ne),this._ease(Yt=>{const On=Yt*Wt,wr=1/dn(On);d.zoom=Yt===1?$e:g+d.scaleZoom(wr),this._rotating&&(d.bearing=a.y.number(I,X,Yt)),this._pitching&&(d.pitch=a.y.number(A,se,Yt)),this._padding&&(d.interpolatePadding(O,ae,Yt),Ae=d.centerPoint.add(we)),this.terrain&&!e.freezeElevation&&this._updateElevation(Yt);const Gn=Yt===1?Ne:d.unproject(et.add(Ve.mult(jn(On))).mult(wr));d.setLocationAtPoint(d.renderWorldCopies?Gn.wrap():Gn,Ae),this._applyUpdatedTransform(d),this._fireMoveEvents(o)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,o){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,o)}return e||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(e,o,h){h.animate===!1||h.duration===0?(e(1),o()):(this._easeStart=C.now(),this._easeOptions=h,this._onEaseFrame=e,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,o){e=a.b3(e,-180,180);const h=Math.abs(e-o);return Math.abs(e-360-o)<h&&(e-=360),Math.abs(e+360-o)<h&&(e+=360),e}_normalizeCenter(e,o){if(!o.renderWorldCopies||o.lngRange)return;const h=e.lng-o.center.lng;e.lng+=h>180?-360:h<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const Qi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Zs{constructor(e=Qi){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,o){const h=this._map._getUIString(`AttributionControl.${o}`);e.title=h,e.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}const o=this._map.style.sourceCaches;for(const d in o){const g=o[d];if(g.used||g.usedForTerrain){const I=g.getSource();I.attribution&&e.indexOf(I.attribution)<0&&e.push(I.attribution)}}e=e.filter(d=>String(d).trim()),e.sort((d,g)=>d.length-g.length),e=e.filter((d,g)=>{for(let I=g+1;I<e.length;I++)if(e[I].indexOf(d)>=0)return!1;return!0});const h=e.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,e.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class vs{constructor(e={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const h=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl");const o=k.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Yn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const o=++this._id;return this._queue.push({callback:e,id:o,cancelled:!1}),o}remove(e){const o=this._currentlyRunning,h=o?this._queue.concat(o):this._queue;for(const d of h)if(d.id===e)return void(d.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const h of o)if(!h.cancelled&&(h.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Hc=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Od extends a.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,o){this.sourceCache.update(e,o),this._renderableTilesKeys=[];const h={};for(const d of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o}))h[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),a.aP(d.posMatrix,0,a.X,0,a.X,0,1),this._tiles[d.key]=new ft(d,this.tileSize));for(const d in this._tiles)h[d]||delete this._tiles[d]}freeRtt(e){for(const o in this._tiles){const h=this._tiles[o];(!e||h.tileID.equals(e)||h.tileID.isChildOf(e)||e.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const o={};for(const h of this._renderableTilesKeys){const d=this._tiles[h].tileID;if(d.canonical.equals(e.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16),a.aP(g.posMatrix,0,a.X,0,a.X,0,1),o[h]=g}else if(d.canonical.isChildOf(e.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16);const I=d.canonical.z-e.canonical.z,A=d.canonical.x-(d.canonical.x>>I<<I),O=d.canonical.y-(d.canonical.y>>I<<I),X=a.X>>I;a.aP(g.posMatrix,0,X,0,X,0,1),a.J(g.posMatrix,g.posMatrix,[-A*X,-O*X,0]),o[h]=g}else if(e.canonical.isChildOf(d.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16);const I=e.canonical.z-d.canonical.z,A=e.canonical.x-(e.canonical.x>>I<<I),O=e.canonical.y-(e.canonical.y>>I<<I),X=a.X>>I;a.aP(g.posMatrix,0,a.X,0,a.X,0,1),a.J(g.posMatrix,g.posMatrix,[A*X,O*X,0]),a.K(g.posMatrix,g.posMatrix,[1/2**I,1/2**I,0]),o[h]=g}}return o}getSourceTile(e,o){const h=this.sourceCache._source;let d=e.overscaledZ-this.deltaZoom;if(d>h.maxzoom&&(d=h.maxzoom),d<h.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(d).key);let g=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!g||!g.dem)&&o)for(;d>=h.minzoom&&(!g||!g.dem);)g=this.sourceCache.getTileByID(e.scaledTo(d--).key);return g}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter(o=>o.timeAdded>=e)}}class ma{constructor(e,o,h){this.painter=e,this.sourceCache=new Od(o),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,o,h,d=a.X){var g;if(!(o>=0&&o<d&&h>=0&&h<d))return 0;const I=this.getTerrainData(e),A=(g=I.tile)===null||g===void 0?void 0:g.dem;if(!A)return 0;const O=function(je,Ne,$e){var qe=Ne[0],et=Ne[1];return je[0]=$e[0]*qe+$e[4]*et+$e[12],je[1]=$e[1]*qe+$e[5]*et+$e[13],je}([],[o/d*a.X,h/d*a.X],I.u_terrain_matrix),X=[O[0]*A.dim,O[1]*A.dim],se=Math.floor(X[0]),ae=Math.floor(X[1]),we=X[0]-se,Ae=X[1]-ae;return A.get(se,ae)*(1-we)*(1-Ae)+A.get(se+1,ae)*we*(1-Ae)+A.get(se,ae+1)*(1-we)*Ae+A.get(se+1,ae+1)*we*Ae}getElevationForLngLatZoom(e,o){if(!a.bb(o,e.wrap()))return 0;const{tileID:h,mercatorX:d,mercatorY:g}=this._getOverscaledTileIDFromLngLatZoom(e,o);return this.getElevation(h,d%a.X,g%a.X,a.X)}getElevation(e,o,h,d=a.X){return this.getDEMElevation(e,o,h,d)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const d=this.painter.context,g=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new K(d,g,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new K(d,new a.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const o=this.sourceCache.getSourceTile(e,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const d=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new K(d,o.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),o.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const h=o&&o+o.tileID.key+e.key;if(h&&!this._demMatrixCache[h]){const d=this.sourceCache.sourceCache._source.maxzoom;let g=e.canonical.z-o.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=d?g=e.canonical.z-d:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=e.canonical.x-(e.canonical.x>>g<<g),A=e.canonical.y-(e.canonical.y>>g<<g),O=a.bc(new Float64Array(16),[1/(a.X<<g),1/(a.X<<g),0]);a.J(O,O,[I*a.X,A*a.X,0]),this._demMatrixCache[e.key]={matrix:O,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(e){const o=this.painter,h=o.width/devicePixelRatio,d=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new K(o.context,{width:h,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new K(o.context,{width:h,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(h,d,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,h,d))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let g=0,I=0;g<this._coordsTextureSize;g++)for(let A=0;A<this._coordsTextureSize;A++,I+=4)o[I+0]=255&A,o[I+1]=255&g,o[I+2]=A>>8<<4|g>>8,o[I+3]=0;const h=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),d=new K(e,h,e.gl.RGBA,{premultiply:!1});return d.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),h=this.painter.context,d=h.gl,g=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(g,A-I-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),h.bindFramebuffer.set(null);const O=o[0]+(o[2]>>4<<8),X=o[1]+((15&o[2])<<8),se=this.coordsIndex[255-o[3]],ae=se&&this.sourceCache.getTileByID(se);if(!ae)return null;const we=this._coordsTextureSize,Ae=(1<<ae.tileID.canonical.z)*we;return new a.Z((ae.tileID.canonical.x*we+O)/Ae+ae.tileID.wrap,(ae.tileID.canonical.y*we+X)/Ae,this.getElevation(ae.tileID,O,X,we))}depthAtPoint(e){const o=new Uint8Array(4),h=this.painter.context,d=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),h.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,o=new a.bd,h=new a.aY,d=this.meshSize,g=a.X/d,I=d*d;for(let ae=0;ae<=d;ae++)for(let we=0;we<=d;we++)o.emplaceBack(we*g,ae*g,0);for(let ae=0;ae<I;ae+=d+1)for(let we=0;we<d;we++)h.emplaceBack(we+ae,d+we+ae+1,d+we+ae+2),h.emplaceBack(we+ae,d+we+ae+2,we+ae+1);const A=o.length,O=A+2*(d+1);for(const ae of[0,1])for(let we=0;we<=d;we++)for(const Ae of[0,1])o.emplaceBack(we*g,ae*a.X,Ae);for(let ae=0;ae<2*d;ae+=2)h.emplaceBack(O+ae,O+ae+1,O+ae+3),h.emplaceBack(O+ae,O+ae+3,O+ae+2),h.emplaceBack(A+ae,A+ae+3,A+ae+1),h.emplaceBack(A+ae,A+ae+2,A+ae+3);const X=o.length,se=X+2*(d+1);for(const ae of[0,1])for(let we=0;we<=d;we++)for(const Ae of[0,1])o.emplaceBack(ae*a.X,we*g,Ae);for(let ae=0;ae<2*d;ae+=2)h.emplaceBack(X+ae,X+ae+1,X+ae+3),h.emplaceBack(X+ae,X+ae+3,X+ae+2),h.emplaceBack(se+ae,se+ae+3,se+ae+1),h.emplaceBack(se+ae,se+ae+2,se+ae+3);return this._mesh=new We(e.createVertexBuffer(o,Hc.members),e.createIndexBuffer(h),a.a0.simpleSegment(0,0,o.length,h.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*a.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,o){var h;const{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(e,o);return(h=this.getMinMaxElevation(d).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(e){const o=this.getTerrainData(e).tile,h={minElevation:null,maxElevation:null};return o&&o.dem&&(h.minElevation=o.dem.min*this.exaggeration,h.maxElevation=o.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(e,o){const h=a.Z.fromLngLat(e.wrap()),d=(1<<o)*a.X,g=h.x*d,I=h.y*d,A=Math.floor(g/a.X),O=Math.floor(I/a.X);return{tileID:new a.S(o,0,o,A,O),mercatorX:g,mercatorY:I}}}class ku{constructor(e,o,h){this._context=e,this._size=o,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new K(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(h.texture),{id:e,fbo:o,texture:h,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>e.id!==o),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const _s={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class zu{constructor(e,o){this.painter=e,this.terrain=o,this.pool=new ku(e.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(h=>!e._layers[h].isHidden(o)),this._coordsDescendingInv={};for(const h in e.sourceCaches){this._coordsDescendingInv[h]={};const d=e.sourceCaches[h].getVisibleCoordinates();for(const g of d){const I=this.terrain.sourceCache.getTerrainCoords(g);for(const A in I)this._coordsDescendingInv[h][A]||(this._coordsDescendingInv[h][A]=[]),this._coordsDescendingInv[h][A].push(I[A])}}this._coordsDescendingInvStr={};for(const h of e._order){const d=e._layers[h],g=d.source;if(_s[d.type]&&!this._coordsDescendingInvStr[g]){this._coordsDescendingInvStr[g]={};for(const I in this._coordsDescendingInv[g])this._coordsDescendingInvStr[g][I]=this._coordsDescendingInv[g][I].map(A=>A.key).sort().join()}}for(const h of this._renderableTiles)for(const d in this._coordsDescendingInvStr){const g=this._coordsDescendingInvStr[d][h.tileID.key];g&&g!==h.rttCoords[d]&&(h.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const o=e.type,h=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(_s[o]&&(this._prevType&&_s[this._prevType]||this._stacks.push([]),this._prevType=o,this._stacks[this._stacks.length-1].push(e.id),!d))return!0;if(_s[this._prevType]||_s[o]&&d){this._prevType=o;const g=this._stacks.length-1,I=this._stacks[g]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Ie(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[g]){const X=this.pool.getObjectForId(A.rtt[g].id);if(X.stamp===A.rtt[g].stamp){this.pool.useObject(X);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),A.rtt[g]={id:O.id,stamp:O.stamp},h.context.bindFramebuffer.set(O.fbo.framebuffer),h.context.clear({color:a.aM.transparent,stencil:0}),h.currentStencilSource=void 0;for(let X=0;X<I.length;X++){const se=h.style._layers[I[X]],ae=se.source?this._coordsDescendingInv[se.source][A.tileID.key]:[A.tileID];h.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),h._renderTileClippingMasks(se,ae),h.renderLayer(h,h.style.sourceCaches[se.source],se,ae),se.source&&(A.rttCoords[se.source]=this._coordsDescendingInvStr[se.source][A.tileID.key])}}return Ie(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),_s[o]}return!1}}const Ru={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},fl=L,Va={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Qi,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Ar=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},kr={showCompass:!0,showZoom:!0,visualizePitch:!1};class $a{constructor(e,o,h=!1){this.mousedown=I=>{this.startMouse(a.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),k.mousePos(this.element,I)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,k.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),k.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const d=e.dragRotate._mouseRotate.getClickTolerance(),g=e.dragRotate._mousePitch.getClickTolerance();this.element=o,this.mouseRotate=ac({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:A,bearingDegreesPerPixelMoved:O=.8})=>{const X=new Vc;return new ca({clickTolerance:A,move:(se,ae)=>({bearingDelta:(ae.x-se.x)*O}),moveStateManager:X,enable:I,assignEvents:Ar})})({clickTolerance:d,enable:!0}),this.map=e,h&&(this.mousePitch=Pr({clickTolerance:g,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:A,pitchDegreesPerPixelMoved:O=-.5})=>{const X=new Vc;return new ca({clickTolerance:A,move:(se,ae)=>({pitchDelta:(ae.y-se.y)*O}),moveStateManager:X,enable:I,assignEvents:Ar})})({clickTolerance:g,enable:!0})),k.addEventListener(o,"mousedown",this.mousedown),k.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(o,"touchcancel",this.reset)}startMouse(e,o){this.mouseRotate.dragStart(e,o),this.mousePitch&&this.mousePitch.dragStart(e,o),k.disableDrag()}startTouch(e,o){this.touchRotate.dragStart(e,o),this.touchPitch&&this.touchPitch.dragStart(e,o),k.disableDrag()}moveMouse(e,o){const h=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(e,o)||{};if(d&&h.setBearing(h.getBearing()+d),this.mousePitch){const{pitchDelta:g}=this.mousePitch.dragMove(e,o)||{};g&&h.setPitch(h.getPitch()+g)}}moveTouch(e,o){const h=this.map,{bearingDelta:d}=this.touchRotate.dragMove(e,o)||{};if(d&&h.setBearing(h.getBearing()+d),this.touchPitch){const{pitchDelta:g}=this.touchPitch.dragMove(e,o)||{};g&&h.setPitch(h.getPitch()+g)}}off(){const e=this.element;k.removeEventListener(e,"mousedown",this.mousedown),k.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend),k.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend)}}let Sr;function tr(y,e,o){const h=new a.N(y.lng,y.lat);if(y=new a.N(y.lng,y.lat),e){const d=new a.N(y.lng-360,y.lat),g=new a.N(y.lng+360,y.lat),I=o.locationPoint(y).distSqr(e);o.locationPoint(d).distSqr(e)<I?y=d:o.locationPoint(g).distSqr(e)<I&&(y=g)}for(;Math.abs(y.lng-o.center.lng)>180;){const d=o.locationPoint(y);if(d.x>=0&&d.y>=0&&d.x<=o.width&&d.y<=o.height)break;y.lng>o.center.lng?y.lng-=360:y.lng+=360}return y.lng!==h.lng&&o.locationPoint(y).y>o.height/2-o.getHorizon()?y:h}const Wo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ga(y,e,o){const h=y.classList;for(const d in Wo)h.remove(`maplibregl-${o}-anchor-${d}`);h.add(`maplibregl-${o}-anchor-${e}`)}class ji extends a.E{constructor(e){if(super(),this._onKeyPress=o=>{const h=o.code,d=o.charCode||o.keyCode;h!=="Space"&&h!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=o=>{const h=o.originalEvent.target,d=this._element;this._popup&&(h===d||d.contains(h))&&this.togglePopup()},this._update=o=>{var h;if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?tr(this._lngLat,this._flatPos,this._map.transform):(h=this._lngLat)===null||h===void 0?void 0:h.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${Wo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${g}`),C.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=a.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div");const o=k.createNS("http://www.w3.org/2000/svg","svg"),h=41,d=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${h}px`),o.setAttributeNS(null,"width",`${d}px`),o.setAttributeNS(null,"viewBox",`0 0 ${d} ${h}`);const g=k.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");const I=k.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const A=k.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const qe of O){const et=k.createNS("http://www.w3.org/2000/svg","ellipse");et.setAttributeNS(null,"opacity","0.04"),et.setAttributeNS(null,"cx","10.5"),et.setAttributeNS(null,"cy","5.80029008"),et.setAttributeNS(null,"rx",qe.rx),et.setAttributeNS(null,"ry",qe.ry),A.appendChild(et)}const X=k.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"fill",this._color);const se=k.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),X.appendChild(se);const ae=k.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"fill","#000000");const we=k.createNS("http://www.w3.org/2000/svg","path");we.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ae.appendChild(we);const Ae=k.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");const je=k.createNS("http://www.w3.org/2000/svg","g");je.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ne=k.createNS("http://www.w3.org/2000/svg","circle");Ne.setAttributeNS(null,"fill","#000000"),Ne.setAttributeNS(null,"opacity","0.25"),Ne.setAttributeNS(null,"cx","5.5"),Ne.setAttributeNS(null,"cy","5.5"),Ne.setAttributeNS(null,"r","5.4999962");const $e=k.createNS("http://www.w3.org/2000/svg","circle");$e.setAttributeNS(null,"fill","#FFFFFF"),$e.setAttributeNS(null,"cx","5.5"),$e.setAttributeNS(null,"cy","5.5"),$e.setAttributeNS(null,"r","5.4999962"),je.appendChild(Ne),je.appendChild($e),I.appendChild(A),I.appendChild(X),I.appendChild(ae),I.appendChild(Ae),I.appendChild(je),o.appendChild(I),o.setAttributeNS(null,"height",h*this._scale+"px"),o.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(o),this._offset=a.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),ga(this._element,this._anchor,"marker"),e&&e.className)for(const o of e.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=a.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const d=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var o,h;if(!(!((o=this._map)===null||o===void 0)&&o.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const d=this._map,g=d.terrain.depthAtPoint(this._pos),I=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,I)-g<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/d.transform._pixelPerMeter,O=Math.sin(d.getPitch()*Math.PI/180)*A,X=d.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),se=d.transform.lngLatToCameraDepth(this._lngLat,I+O)-X>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&se&&this._popup.remove(),this._element.style.opacity=se?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=a.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,o){return e===void 0&&o===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const Fu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Gl=0,Hl=!1;const ko={maxWidth:100,unit:"metric"};function Zl(y,e,o){const h=o&&o.maxWidth||100,d=y._container.clientHeight/2,g=y.unproject([0,d]),I=y.unproject([h,d]),A=g.distanceTo(I);if(o&&o.unit==="imperial"){const O=3.2808*A;O>5280?an(e,h,O/5280,y._getUIString("ScaleControl.Miles")):an(e,h,O,y._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?an(e,h,A/1852,y._getUIString("ScaleControl.NauticalMiles")):A>=1e3?an(e,h,A/1e3,y._getUIString("ScaleControl.Kilometers")):an(e,h,A,y._getUIString("ScaleControl.Meters"))}function an(y,e,o,h){const d=function(g){const I=Math.pow(10,`${Math.floor(g)}`.length-1);let A=g/I;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(O){const X=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*X)/X}(A),I*A}(o);y.style.width=e*(d/o)+"px",y.innerHTML=`${d}&nbsp;${h}`}const En={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Wl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ou(y){if(y){if(typeof y=="number"){const e=Math.round(Math.abs(y)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,y),"top-left":new a.P(e,e),"top-right":new a.P(-e,e),bottom:new a.P(0,-y),"bottom-left":new a.P(e,-e),"bottom-right":new a.P(-e,-e),left:new a.P(y,0),right:new a.P(-y,0)}}if(y instanceof a.P||Array.isArray(y)){const e=a.P.convert(y);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:a.P.convert(y.center||[0,0]),top:a.P.convert(y.top||[0,0]),"top-left":a.P.convert(y["top-left"]||[0,0]),"top-right":a.P.convert(y["top-right"]||[0,0]),bottom:a.P.convert(y.bottom||[0,0]),"bottom-left":a.P.convert(y["bottom-left"]||[0,0]),"bottom-right":a.P.convert(y["bottom-right"]||[0,0]),left:a.P.convert(y.left||[0,0]),right:a.P.convert(y.right||[0,0])}}return Ou(new a.P(0,0))}const Zc=L;w.AJAXError=a.bh,w.Evented=a.E,w.LngLat=a.N,w.MercatorCoordinate=a.Z,w.Point=a.P,w.addProtocol=a.bi,w.config=a.a,w.removeProtocol=a.bj,w.AttributionControl=Zs,w.BoxZoomHandler=ho,w.CanvasSource=ct,w.CooperativeGesturesHandler=$l,w.DoubleClickZoomHandler=pa,w.DragPanHandler=uc,w.DragRotateHandler=jh,w.EdgeInsets=ln,w.FullscreenControl=class extends a.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var e;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=o==null?void 0:o.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},w.GeoJSONSource=G,w.GeolocateControl=class extends a.E{constructor(y){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const o=new a.N(e.coords.longitude,e.coords.latitude),h=e.coords.accuracy,d=this._map.getBearing(),g=a.e({bearing:d},this.options.fitBoundsOptions),I=at.fromLngLat(o,h);this._map.fitBounds(I,g,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const o=new a.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&Hl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ji({element:this._dotElement}),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ji({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))})}},this.options=a.e({},Fu,y)}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(e=!1){if(Sr!==void 0&&!e)return Sr;if(window.navigator.permissions===void 0)return Sr=!!window.navigator.geolocation,Sr;try{Sr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Sr=!!window.navigator.geolocation}return Sr})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gl=0,Hl=!1}_isOutOfMapMaxBounds(y){const e=this._map.getMaxBounds(),o=y.coords;return e&&(o.longitude<e.getWest()||o.longitude>e.getEast()||o.latitude<e.getSouth()||o.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),e=y.getSouthEast(),o=y.getNorthEast(),h=e.distanceTo(o),d=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gl--,Hl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Gl++,Gl>1?(y={maximumAge:6e5,timeout:0},Hl=!0):(y=this.options.positionOptions,Hl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},w.Hash=ar,w.ImageSource=Ce,w.KeyboardHandler=Ho,w.LngLatBounds=at,w.LogoControl=vs,w.Map=class extends dl{constructor(y){a.bf.mark(a.bg.create);const e=Object.assign(Object.assign({},Va),y);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ln(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Yn,this._controls=[],this._mapId=a.a4(),this._contextLost=o=>{o.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ru),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ve.addThrottleControl(()=>this.isMoving()),this._requestManager=new Me(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;const h=pr(d=>{this._trackResize&&!this._removed&&(this.resize(d),this.redraw())},50);this._resizeObserver=new ResizeObserver(d=>{o?h(d):o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new hc(this,e),this._hash=e.hash&&new ar(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,a.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Zs(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new vs,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new a.k(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new a.k(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new a.k("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(y,e){if(e===void 0&&(e=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=y.onAdd(this);this._controls.push(y);const h=this._controlPositions[e];return e.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(y);return e>-1&&this._controls.splice(e,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,e,o,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,e,o,h)}resize(y){var e;const o=this._containerDimensions(),h=o[0],d=o[1],g=this._getClampedPixelRatio(h,d);if(this._resizeCanvas(h,d,g),this.painter.resize(h,d,g),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const O=this._getClampedPixelRatio(h,d);this._resizeCanvas(h,d,O),this.painter.resize(h,d,O)}this.transform.resize(h,d),(e=this._requestedCameraState)===null||e===void 0||e.resize(h,d);const I=!this._moving;return I&&(this.stop(),this.fire(new a.k("movestart",y)).fire(new a.k("move",y))),this.fire(new a.k("resize",y)),I&&this.fire(new a.k("moveend",y)),this}_getClampedPixelRatio(y,e){const{0:o,1:h}=this._maxCanvasSize,d=this.getPixelRatio(),g=y*d,I=e*d;return Math.min(g>o?o/g:1,I>h?h/I:1)*d}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(at.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(a.N.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(a.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,e,o){if(y==="mouseenter"||y==="mouseover"){let h=!1;return{layers:e,listener:o,delegates:{mousemove:g=>{const I=e.filter(O=>this.getLayer(O)),A=I.length!==0?this.queryRenderedFeatures(g.point,{layers:I}):[];A.length?h||(h=!0,o.call(this,new ti(y,this,g.originalEvent,{features:A}))):h=!1},mouseout:()=>{h=!1}}}}if(y==="mouseleave"||y==="mouseout"){let h=!1;return{layers:e,listener:o,delegates:{mousemove:I=>{const A=e.filter(O=>this.getLayer(O));(A.length!==0?this.queryRenderedFeatures(I.point,{layers:A}):[]).length?h=!0:h&&(h=!1,o.call(this,new ti(y,this,I.originalEvent)))},mouseout:I=>{h&&(h=!1,o.call(this,new ti(y,this,I.originalEvent)))}}}}{const h=d=>{const g=e.filter(A=>this.getLayer(A)),I=g.length!==0?this.queryRenderedFeatures(d.point,{layers:g}):[];I.length&&(d.features=I,o.call(this,d),delete d.features)};return{layers:e,listener:o,delegates:{[y]:h}}}}_saveDelegatedListener(y,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(e)}_removeDelegatedListener(y,e,o){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const h=this._delegatedListeners[y];for(let d=0;d<h.length;d++){const g=h[d];if(g.listener===o&&g.layers.length===e.length&&g.layers.every(I=>e.includes(I))){for(const I in g.delegates)this.off(I,g.delegates[I]);return void h.splice(d,1)}}}on(y,e,o){if(o===void 0)return super.on(y,e);const h=this._createDelegatedListener(y,typeof e=="string"?[e]:e,o);this._saveDelegatedListener(y,h);for(const d in h.delegates)this.on(d,h.delegates[d]);return this}once(y,e,o){if(o===void 0)return super.once(y,e);const h=typeof e=="string"?[e]:e,d=this._createDelegatedListener(y,h,o);for(const g in d.delegates){const I=d.delegates[g];d.delegates[g]=(...A)=>{this._removeDelegatedListener(y,h,o),I(...A)}}this._saveDelegatedListener(y,d);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(y,e,o){return o===void 0?super.off(y,e):(this._removeDelegatedListener(y,typeof e=="string"?[e]:e,o),this)}queryRenderedFeatures(y,e){if(!this.style)return[];let o;const h=y instanceof a.P||Array.isArray(y),d=h?y:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(h?{}:y)||{},d instanceof a.P||typeof d[0]=="number")o=[a.P.convert(d)];else{const g=a.P.convert(d[0]),I=a.P.convert(d[1]);o=[g,new a.P(I.x,g.y),I,new a.P(g.x,I.y),g]}return this.style.queryRenderedFeatures(o,e,this.transform)}querySourceFeatures(y,e){return this.style.querySourceFeatures(y,e)}setStyle(y,e){return(e=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(y,e))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const e=this._locale[y];if(e==null)throw new Error(`Missing UI string '${y}'`);return e}_updateStyle(y,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,e));const o=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new El(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,e,o):this.style.loadJSON(y,e,o),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new El(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,e){if(typeof y=="string"){const o=this._requestManager.transformRequest(y,"Style");a.h(o,new AbortController).then(h=>{this._updateDiff(h.data,e)}).catch(h=>{h&&this.fire(new a.j(h))})}else typeof y=="object"&&this._updateDiff(y,e)}_updateDiff(y,e){try{this.style.setState(y,e)&&this._update(!0)}catch(o){a.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(y,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(y,e){return this._lazyInitEmptyStyle(),this.style.addSource(y,e),this._update(!0)}isSourceLoaded(y){const e=this.style&&this.style.sourceCaches[y];if(e!==void 0)return e.loaded();this.fire(new a.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const e=this.style.sourceCaches[y.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&e.reload();for(const o in this.style._layers){const h=this.style._layers[o];h.type==="hillshade"&&h.source===y.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ma(this.painter,e,y),this.painter.renderToTexture=new zu(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:y})),this}getTerrain(){var y,e;return(e=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const e in y){const o=y[e]._tiles;for(const h in o){const d=o[h];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,e,o={}){const{pixelRatio:h=1,sdf:d=!1,stretchX:g,stretchY:I,content:A,textFitWidth:O,textFitHeight:X}=o;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||a.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:se,height:ae,data:we}=e,Ae=e;return this.style.addImage(y,{data:new a.R({width:se,height:ae},new Uint8Array(we)),pixelRatio:h,stretchX:g,stretchY:I,content:A,textFitWidth:O,textFitHeight:X,sdf:d,version:0,userImage:Ae}),Ae.onAdd&&Ae.onAdd(this,y),this}}{const{width:se,height:ae,data:we}=C.getImageData(e);this.style.addImage(y,{data:new a.R({width:se,height:ae},we),pixelRatio:h,stretchX:g,stretchY:I,content:A,textFitWidth:O,textFitHeight:X,sdf:d,version:0})}}updateImage(y,e){const o=this.style.getImage(y);if(!o)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=e instanceof HTMLImageElement||a.b(e)?C.getImageData(e):e,{width:d,height:g,data:I}=h;if(d===void 0||g===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==o.data.width||g!==o.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(e instanceof HTMLImageElement||a.b(e));return o.data.replace(I,A),this.style.updateImage(y,o),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return ve.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,e){return this._lazyInitEmptyStyle(),this.style.addLayer(y,e),this._update(!0)}moveLayer(y,e){return this.style.moveLayer(y,e),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,e,o){return this.style.setLayerZoomRange(y,e,o),this._update(!0)}setFilter(y,e,o={}){return this.style.setFilter(y,e,o),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,e,o,h={}){return this.style.setPaintProperty(y,e,o,h),this._update(!0)}getPaintProperty(y,e){return this.style.getPaintProperty(y,e)}setLayoutProperty(y,e,o,h={}){return this.style.setLayoutProperty(y,e,o,h),this._update(!0)}getLayoutProperty(y,e){return this.style.getLayoutProperty(y,e)}setGlyphs(y,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,e,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,e,o,h=>{h||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,e,o=>{o||this._update(!0)}),this}setLight(y,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(y){return this._lazyInitEmptyStyle(),this.style.setSky(y),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,e){return this.style.setFeatureState(y,e),this._update()}removeFeatureState(y,e){return this.style.removeFeatureState(y,e),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,e=0;return this._container&&(y=this._container.clientWidth||400,e=this._container.clientHeight||300),[y,e]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const e=this._canvasContainer=k.create("div","maplibregl-canvas-container",y);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),h=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],h);const d=this._controlContainer=k.create("div","maplibregl-control-container",y),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{g[I]=k.create("div",`maplibregl-ctrl-${I} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,e,o){this._canvas.width=Math.floor(o*y),this._canvas.height=Math.floor(o*e),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{e={requestedAttributes:y},h&&(e.statusMessage=h.statusMessage,e.type=h.type)},{once:!0});const o=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!o){const h="Failed to initialize WebGL";throw e?(e.message=h,new Error(JSON.stringify(e))):new Error(h)}this.painter=new wt(o,this.transform),V.testSupport(o)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const d=this.transform.zoom,g=C.now();this.style.zoomHistory.update(d,g);const I=new a.z(d,{now:g,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=I.crossFadingFactor();A===1&&A===this._crossFadingFactor||(o=!0,this._crossFadingFactor=A),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ve.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(y=>{a.bf.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return fl}getCameraTargetElevation(){return this.transform.elevation}},w.MapMouseEvent=ti,w.MapTouchEvent=Ji,w.MapWheelEvent=Bc,w.Marker=ji,w.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const e=this._map.getZoom(),o=e===this._map.getMaxZoom(),h=e===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,o)=>{const h=this._map._getUIString(`NavigationControl.${o}`);e.title=h,e.setAttribute("aria-label",h)},this.options=a.e({},kr,y),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),k.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),k.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new $a(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,e){const o=k.create("button",y,this._container);return o.type="button",o.addEventListener("click",e),o}},w.Popup=class extends a.E{constructor(y){super(),this.remove=()=>(this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var o;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=k.create("div","maplibregl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?tr(this._lngLat,this._flatPos,this._map.transform):(o=this._lngLat)===null||o===void 0?void 0:o.wrap(),this._trackPointer&&!e)return;const h=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor;const g=Ou(this.options.offset);if(!d){const A=this._container.offsetWidth,O=this._container.offsetHeight;let X;X=h.y+g.bottom.y<O?["top"]:h.y>this._map.transform.height-O?["bottom"]:[],h.x<A/2?X.push("left"):h.x>this._map.transform.width-A/2&&X.push("right"),d=X.length===0?"bottom":X.join("-")}let I=h.add(g[d]);this.options.subpixelPositioning||(I=I.round()),k.setTransform(this._container,`${Wo[d]} translate(${I.x}px,${I.y}px)`),ga(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(En),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=a.N.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const e=document.createDocumentFragment(),o=document.createElement("body");let h;for(o.innerHTML=y;h=o.firstChild,h;)e.appendChild(h);return this.setDOMContent(e)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Wl);y&&y.focus()}},w.RasterDEMTileSource=ze,w.RasterTileSource=en,w.ScaleControl=class{constructor(y){this._onMove=()=>{Zl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Zl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ko),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},w.ScrollZoomHandler=fo,w.Style=El,w.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},w.TwoFingersTouchPitchHandler=hl,w.TwoFingersTouchRotateHandler=Ul,w.TwoFingersTouchZoomHandler=Mu,w.TwoFingersTouchZoomRotateHandler=cc,w.VectorTileSource=hn,w.VideoSource=rt,w.addSourceType=(y,e)=>a._(void 0,void 0,void 0,function*(){if(ye(y))throw new Error(`A source type called "${y}" already exists.`);((o,h)=>{Et[o]=h})(y,e)}),w.clearPrewarmedResources=function(){const y=pt;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(De),pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},w.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},w.getRTLTextPluginStatus=function(){return Je().getRTLTextPluginStatus()},w.getVersion=function(){return Zc},w.getWorkerCount=function(){return Ke.workerCount},w.getWorkerUrl=function(){return a.a.WORKER_URL},w.importScriptInWorkers=function(y){return It().broadcast("IS",y)},w.prewarm=function(){Tt().acquire(De)},w.setMaxParallelImageRequests=function(y){a.a.MAX_PARALLEL_IMAGE_REQUESTS=y},w.setRTLTextPlugin=function(y,e){return Je().setRTLTextPlugin(y,e)},w.setWorkerCount=function(y){Ke.workerCount=y},w.setWorkerUrl=function(y){a.a.WORKER_URL=y}});var T=p;return T})}(Kp)),Kp.exports}var k1=eb();const z1=Bf(k1),tb=Gw({__proto__:null,default:z1},[k1]),nb="modulepreload",rb=function(u){return"/osm-address-editor-vite/"+u},xv={},ib=function(c,p,v){let x=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),a=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));x=Promise.allSettled(p.map(L=>{if(L=rb(L),L in xv)return;xv[L]=!0;const R=L.endsWith(".css"),D=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${L}"]${D}`))return;const C=document.createElement("link");if(C.rel=R?"stylesheet":nb,R||(C.as="script"),C.crossOrigin="",C.href=L,a&&C.setAttribute("nonce",a),document.head.appendChild(C),R)return new Promise((k,V)=>{C.addEventListener("load",k),C.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${L}`)))})}))}function T(w){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=w,window.dispatchEvent(a),!a.defaultPrevented)throw w}return x.then(w=>{for(const a of w||[])a.status==="rejected"&&T(a.reason);return c().catch(T)})},ob=zt.createContext(null);function sb(u,c){const p=Array.isArray(u)?u[0]:u?u.x:0,v=Array.isArray(u)?u[1]:u?u.y:0,x=Array.isArray(c)?c[0]:c?c.x:0,T=Array.isArray(c)?c[1]:c?c.y:0;return p===x&&v===T}function Aa(u,c){if(u===c)return!0;if(!u||!c)return!1;if(Array.isArray(u)){if(!Array.isArray(c)||u.length!==c.length)return!1;for(let p=0;p<u.length;p++)if(!Aa(u[p],c[p]))return!1;return!0}else if(Array.isArray(c))return!1;if(typeof u=="object"&&typeof c=="object"){const p=Object.keys(u),v=Object.keys(c);if(p.length!==v.length)return!1;for(const x of p)if(!c.hasOwnProperty(x)||!Aa(u[x],c[x]))return!1;return!0}return!1}function ab(u){const c=u.clone();return c.pixelsToGLUnits=u.pixelsToGLUnits,c}function wv(u,c){if(!u.getProjection)return;const p=u.getProjection(),v=c.getProjection();Aa(p,v)||c.setProjection(p)}function bv(u){return{longitude:u.center.lng,latitude:u.center.lat,zoom:u.zoom,pitch:u.pitch,bearing:u.bearing,padding:u.padding}}function Sv(u,c){const p=c.viewState||c;let v=!1;if("zoom"in p){const x=u.zoom;u.zoom=p.zoom,v=v||x!==u.zoom}if("bearing"in p){const x=u.bearing;u.bearing=p.bearing,v=v||x!==u.bearing}if("pitch"in p){const x=u.pitch;u.pitch=p.pitch,v=v||x!==u.pitch}if(p.padding&&!u.isPaddingEqual(p.padding)&&(v=!0,u.padding=p.padding),"longitude"in p&&"latitude"in p){const x=u.center;u.center=new x.constructor(p.longitude,p.latitude),v=v||x!==u.center}return v}const lb=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ev(u){if(!u)return null;if(typeof u=="string"||("toJS"in u&&(u=u.toJS()),!u.layers))return u;const c={};for(const v of u.layers)c[v.id]=v;const p=u.layers.map(v=>{let x=null;"interactive"in v&&(x=Object.assign({},v),delete x.interactive);const T=c[v.ref];if(T){x=x||Object.assign({},v),delete x.ref;for(const w of lb)w in T&&(x[w]=T[w])}return x||v});return{...u,layers:p}}var Tv={};const Iv={version:8,sources:{},layers:[]},Cv={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},fg={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Pv={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ub=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],cb=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Cd{constructor(c,p,v){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=x=>{const T=this.props[Pv[x.type]];T?T(x):x.type==="error"&&console.error(x.error)},this._onPointerEvent=x=>{(x.type==="mousemove"||x.type==="mouseout")&&this._updateHover(x);const T=this.props[Cv[x.type]];T&&(this.props.interactiveLayerIds&&x.type!=="mouseover"&&x.type!=="mouseout"&&(x.features=this._hoveredFeatures||this._queryRenderedFeatures(x.point)),T(x),delete x.features)},this._onCameraEvent=x=>{if(!this._internalUpdate){const T=this.props[fg[x.type]];T&&T(x)}x.type in this._deferredEvents&&(this._deferredEvents[x.type]=!1)},this._MapClass=c,this.props=p,this._initialize(v)}get map(){return this._map}get transform(){return this._renderTransform}setProps(c){const p=this.props;this.props=c;const v=this._updateSettings(c,p);v&&this._createShadowTransform(this._map);const x=this._updateSize(c),T=this._updateViewState(c,!0);this._updateStyle(c,p),this._updateStyleComponents(c,p),this._updateHandlers(c,p),(v||x||T&&!this._map.isMoving())&&this.redraw()}static reuse(c,p){const v=Cd.savedMaps.pop();if(!v)return null;const x=v.map,T=x.getContainer();for(p.className=T.className;T.childNodes.length>0;)p.appendChild(T.childNodes[0]);x._container=p;const w=x._resizeObserver;w&&(w.disconnect(),w.observe(p)),v.setProps({...c,styleDiffing:!1}),x.resize();const{initialViewState:a}=c;return a&&(a.bounds?x.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):v._updateViewState(a,!1)),x.isStyleLoaded()?x.fire("load"):x.once("styledata",()=>x.fire("load")),x._update(),v}_initialize(c){const{props:p}=this,{mapStyle:v=Iv}=p,x={...p,...p.initialViewState,accessToken:p.mapboxAccessToken||hb()||null,container:c,style:Ev(v)},T=x.initialViewState||x.viewState||x;if(Object.assign(x,{center:[T.longitude||0,T.latitude||0],zoom:T.zoom||0,pitch:T.pitch||0,bearing:T.bearing||0}),p.gl){const D=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=D,p.gl)}const w=new this._MapClass(x);T.padding&&w.setPadding(T.padding),p.cursor&&(w.getCanvas().style.cursor=p.cursor),this._createShadowTransform(w);const a=w._render;w._render=D=>{this._inRender=!0,a.call(w,D),this._inRender=!1};const L=w._renderTaskQueue.run;w._renderTaskQueue.run=D=>{L.call(w._renderTaskQueue,D),this._onBeforeRepaint()},w.on("render",()=>this._onAfterRepaint());const R=w.fire;w.fire=this._fireEvent.bind(this,R),w.on("resize",()=>{this._renderTransform.resize(w.transform.width,w.transform.height)}),w.on("styledata",()=>{this._updateStyleComponents(this.props,{}),wv(w.transform,this._renderTransform)}),w.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const D in Cv)w.on(D,this._onPointerEvent);for(const D in fg)w.on(D,this._onCameraEvent);for(const D in Pv)w.on(D,this._onEvent);this._map=w}recycle(){const p=this.map.getContainer().querySelector("[mapboxgl-children]");p==null||p.remove(),Cd.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const c=this._map;!this._inRender&&c.style&&(c._frame&&(c._frame.cancel(),c._frame=null),c._render())}_createShadowTransform(c){const p=ab(c.transform);c.painter.transform=p,this._renderTransform=p}_updateSize(c){const{viewState:p}=c;if(p){const v=this._map;if(p.width!==v.transform.width||p.height!==v.transform.height)return v.resize(),!0}return!1}_updateViewState(c,p){if(this._internalUpdate)return!1;const v=this._map,x=this._renderTransform,{zoom:T,pitch:w,bearing:a}=x,L=v.isMoving();L&&(x.cameraElevationReference="sea");const R=Sv(x,{...bv(v.transform),...c});if(L&&(x.cameraElevationReference="ground"),R&&p){const D=this._deferredEvents;D.move=!0,D.zoom||(D.zoom=T!==x.zoom),D.rotate||(D.rotate=a!==x.bearing),D.pitch||(D.pitch=w!==x.pitch)}return L||Sv(v.transform,c),R}_updateSettings(c,p){const v=this._map;let x=!1;for(const T of ub)if(T in c&&!Aa(c[T],p[T])){x=!0;const w=v[`set${T[0].toUpperCase()}${T.slice(1)}`];w==null||w.call(v,c[T])}return x}_updateStyle(c,p){if(c.cursor!==p.cursor&&(this._map.getCanvas().style.cursor=c.cursor||""),c.mapStyle!==p.mapStyle){const{mapStyle:v=Iv,styleDiffing:x=!0}=c,T={diff:x};return"localIdeographFontFamily"in c&&(T.localIdeographFontFamily=c.localIdeographFontFamily),this._map.setStyle(Ev(v),T),!0}return!1}_updateStyleComponents(c,p){const v=this._map;let x=!1;return v.isStyleLoaded()&&("light"in c&&v.setLight&&!Aa(c.light,p.light)&&(x=!0,v.setLight(c.light)),"fog"in c&&v.setFog&&!Aa(c.fog,p.fog)&&(x=!0,v.setFog(c.fog)),"terrain"in c&&v.setTerrain&&!Aa(c.terrain,p.terrain)&&(!c.terrain||v.getSource(c.terrain.source))&&(x=!0,v.setTerrain(c.terrain))),x}_updateHandlers(c,p){var v,x;const T=this._map;let w=!1;for(const a of cb){const L=(v=c[a])!==null&&v!==void 0?v:!0,R=(x=p[a])!==null&&x!==void 0?x:!0;Aa(L,R)||(w=!0,L?T[a].enable(L):T[a].disable())}return w}_queryRenderedFeatures(c){const p=this._map,v=p.transform,{interactiveLayerIds:x=[]}=this.props;try{return p.transform=this._renderTransform,p.queryRenderedFeatures(c,{layers:x.filter(p.getLayer.bind(p))})}catch{return[]}finally{p.transform=v}}_updateHover(c){var p;const{props:v}=this;if(v.interactiveLayerIds&&(v.onMouseMove||v.onMouseEnter||v.onMouseLeave)){const T=c.type,w=((p=this._hoveredFeatures)===null||p===void 0?void 0:p.length)>0,a=this._queryRenderedFeatures(c.point),L=a.length>0;!L&&w&&(c.type="mouseleave",this._onPointerEvent(c)),this._hoveredFeatures=a,L&&!w&&(c.type="mouseenter",this._onPointerEvent(c)),c.type=T}else this._hoveredFeatures=null}_fireEvent(c,p,v){const x=this._map,T=x.transform,w=typeof p=="string"?p:p.type;return w==="move"&&this._updateViewState(this.props,!1),w in fg&&(typeof p=="object"&&(p.viewState=bv(T)),this._map.isMoving())?(x.transform=this._renderTransform,c.call(x,p,v),x.transform=T,x):(c.call(x,p,v),x)}_onBeforeRepaint(){const c=this._map;this._internalUpdate=!0;for(const v in this._deferredEvents)this._deferredEvents[v]&&c.fire(v);this._internalUpdate=!1;const p=this._map.transform;c.transform=this._renderTransform,this._onAfterRepaint=()=>{wv(this._renderTransform,p),c.transform=p}}}Cd.savedMaps=[];function hb(){let u=null;if(typeof location<"u"){const c=/access_token=([^&\/]*)/.exec(location.search);u=c&&c[1]}try{u=u||Tv.MapboxAccessToken}catch{}try{u=u||Tv.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return u}const db=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function fb(u){if(!u)return null;const c=u.map,p={getMap:()=>c,getCenter:()=>u.transform.center,getZoom:()=>u.transform.zoom,getBearing:()=>u.transform.bearing,getPitch:()=>u.transform.pitch,getPadding:()=>u.transform.padding,getBounds:()=>u.transform.getBounds(),project:v=>{const x=c.transform;c.transform=u.transform;const T=c.project(v);return c.transform=x,T},unproject:v=>{const x=c.transform;c.transform=u.transform;const T=c.unproject(v);return c.transform=x,T},queryTerrainElevation:(v,x)=>{const T=c.transform;c.transform=u.transform;const w=c.queryTerrainElevation(v,x);return c.transform=T,w},queryRenderedFeatures:(v,x)=>{const T=c.transform;c.transform=u.transform;const w=c.queryRenderedFeatures(v,x);return c.transform=T,w}};for(const v of pb(c))!(v in p)&&!db.includes(v)&&(p[v]=c[v].bind(c));return p}function pb(u){const c=new Set;let p=u;for(;p;){for(const v of Object.getOwnPropertyNames(p))v[0]!=="_"&&typeof u[v]=="function"&&v!=="fire"&&v!=="setEventedParent"&&c.add(v);p=Object.getPrototypeOf(p)}return Array.from(c)}const mb=typeof document<"u"?zt.useLayoutEffect:zt.useEffect,gb=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function yb(u,c){for(const v of gb)v in c&&(u[v]=c[v]);const{RTLTextPlugin:p="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=c;p&&u.getRTLTextPluginStatus&&u.getRTLTextPluginStatus()==="unavailable"&&u.setRTLTextPlugin(p,v=>{v&&console.error(v)},!0)}const zd=zt.createContext(null);function vb(u,c,p){const v=zt.useContext(ob),[x,T]=zt.useState(null),w=zt.useRef(),{current:a}=zt.useRef({mapLib:null,map:null});zt.useEffect(()=>{const D=u.mapLib;let C=!0,k;return Promise.resolve(D||p).then(V=>{if(!C)return;if(!V)throw new Error("Invalid mapLib");const N="Map"in V?V:V.default;if(!N.Map)throw new Error("Invalid mapLib");if(yb(N,u),!N.supported||N.supported(u))u.reuseMaps&&(k=Cd.reuse(u,w.current)),k||(k=new Cd(N.Map,u,w.current)),a.map=fb(k),a.mapLib=N,T(k),v==null||v.onMapMount(a.map,u.id);else throw new Error("Map is not supported by this browser")}).catch(V=>{const{onError:N}=u;N?N({type:"error",target:null,originalEvent:null,error:V}):console.error(V)}),()=>{C=!1,k&&(v==null||v.onMapUnmount(u.id),u.reuseMaps?k.recycle():k.destroy())}},[]),mb(()=>{x&&x.setProps(u)}),zt.useImperativeHandle(c,()=>a.map,[x]);const L=zt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...u.style}),[u.style]),R={height:"100%"};return zt.createElement("div",{id:u.id,ref:w,style:L},x&&zt.createElement(zd.Provider,{value:a},zt.createElement("div",{"mapboxgl-children":"",style:R},u.children)))}const _b=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Rh(u,c){if(!u||!c)return;const p=u.style;for(const v in c){const x=c[v];Number.isFinite(x)&&!_b.test(v)?p[v]=`${x}px`:p[v]=x}}function xb(u,c){const{map:p,mapLib:v}=zt.useContext(zd),x=zt.useRef({props:u});x.current.props=u;const T=zt.useMemo(()=>{let Q=!1;zt.Children.forEach(u.children,xe=>{xe&&(Q=!0)});const ce={...u,element:Q?document.createElement("div"):null},Te=new v.Marker(ce);return Te.setLngLat([u.longitude,u.latitude]),Te.getElement().addEventListener("click",xe=>{var ve,Me;(Me=(ve=x.current.props).onClick)===null||Me===void 0||Me.call(ve,{type:"click",target:Te,originalEvent:xe})}),Te.on("dragstart",xe=>{var ve,Me;const ne=xe;ne.lngLat=T.getLngLat(),(Me=(ve=x.current.props).onDragStart)===null||Me===void 0||Me.call(ve,ne)}),Te.on("drag",xe=>{var ve,Me;const ne=xe;ne.lngLat=T.getLngLat(),(Me=(ve=x.current.props).onDrag)===null||Me===void 0||Me.call(ve,ne)}),Te.on("dragend",xe=>{var ve,Me;const ne=xe;ne.lngLat=T.getLngLat(),(Me=(ve=x.current.props).onDragEnd)===null||Me===void 0||Me.call(ve,ne)}),Te},[]);zt.useEffect(()=>(T.addTo(p.getMap()),()=>{T.remove()}),[]);const{longitude:w,latitude:a,offset:L,style:R,draggable:D=!1,popup:C=null,rotation:k=0,rotationAlignment:V="auto",pitchAlignment:N="auto"}=u;return zt.useEffect(()=>{Rh(T.getElement(),R)},[R]),zt.useImperativeHandle(c,()=>T,[]),(T.getLngLat().lng!==w||T.getLngLat().lat!==a)&&T.setLngLat([w,a]),L&&!sb(T.getOffset(),L)&&T.setOffset(L),T.isDraggable()!==D&&T.setDraggable(D),T.getRotation()!==k&&T.setRotation(k),T.getRotationAlignment()!==V&&T.setRotationAlignment(V),T.getPitchAlignment()!==N&&T.setPitchAlignment(N),T.getPopup()!==C&&T.setPopup(C),d0.createPortal(u.children,T.getElement())}const wb=zt.memo(zt.forwardRef(xb));function Av(u){return new Set(u?u.trim().split(/\s+/):[])}function bb(u,c){const{map:p,mapLib:v}=zt.useContext(zd),x=zt.useMemo(()=>document.createElement("div"),[]),T=zt.useRef({props:u});T.current.props=u;const w=zt.useMemo(()=>{const a={...u},L=new v.Popup(a);return L.setLngLat([u.longitude,u.latitude]),L.once("open",R=>{var D,C;(C=(D=T.current.props).onOpen)===null||C===void 0||C.call(D,R)}),L},[]);if(zt.useEffect(()=>{const a=L=>{var R,D;(D=(R=T.current.props).onClose)===null||D===void 0||D.call(R,L)};return w.on("close",a),w.setDOMContent(x).addTo(p.getMap()),()=>{w.off("close",a),w.isOpen()&&w.remove()}},[]),zt.useEffect(()=>{Rh(w.getElement(),u.style)},[u.style]),zt.useImperativeHandle(c,()=>w,[]),w.isOpen()&&((w.getLngLat().lng!==u.longitude||w.getLngLat().lat!==u.latitude)&&w.setLngLat([u.longitude,u.latitude]),u.offset&&!Aa(w.options.offset,u.offset)&&w.setOffset(u.offset),(w.options.anchor!==u.anchor||w.options.maxWidth!==u.maxWidth)&&(w.options.anchor=u.anchor,w.setMaxWidth(u.maxWidth)),w.options.className!==u.className)){const a=Av(w.options.className),L=Av(u.className);for(const R of a)L.has(R)||w.removeClassName(R);for(const R of L)a.has(R)||w.addClassName(R);w.options.className=u.className}return d0.createPortal(u.children,x)}zt.memo(zt.forwardRef(bb));function Nf(u,c,p,v){const x=zt.useContext(zd),T=zt.useMemo(()=>u(x),[]);return zt.useEffect(()=>{const w=c,a=typeof c=="function"&&typeof p=="function"?c:null,L=typeof c=="function"?c:null,{map:R}=x;return R.hasControl(T)||(R.addControl(T,w==null?void 0:w.position),a&&a(x)),()=>{L&&L(x),R.hasControl(T)&&R.removeControl(T)}},[]),T}function Sb(u){const c=Nf(({mapLib:p})=>new p.AttributionControl(u),{position:u.position});return zt.useEffect(()=>{Rh(c._container,u.style)},[u.style]),null}zt.memo(Sb);function Eb(u){const c=Nf(({mapLib:p})=>new p.FullscreenControl({container:u.containerId&&document.getElementById(u.containerId)}),{position:u.position});return zt.useEffect(()=>{Rh(c._controlContainer,u.style)},[u.style]),null}zt.memo(Eb);function Tb(u,c){const p=zt.useRef({props:u}),v=Nf(({mapLib:x})=>{const T=new x.GeolocateControl(u),w=T._setupUI;return T._setupUI=a=>{T._container.hasChildNodes()||w(a)},T.on("geolocate",a=>{var L,R;(R=(L=p.current.props).onGeolocate)===null||R===void 0||R.call(L,a)}),T.on("error",a=>{var L,R;(R=(L=p.current.props).onError)===null||R===void 0||R.call(L,a)}),T.on("outofmaxbounds",a=>{var L,R;(R=(L=p.current.props).onOutOfMaxBounds)===null||R===void 0||R.call(L,a)}),T.on("trackuserlocationstart",a=>{var L,R;(R=(L=p.current.props).onTrackUserLocationStart)===null||R===void 0||R.call(L,a)}),T.on("trackuserlocationend",a=>{var L,R;(R=(L=p.current.props).onTrackUserLocationEnd)===null||R===void 0||R.call(L,a)}),T},{position:u.position});return p.current.props=u,zt.useImperativeHandle(c,()=>v,[]),zt.useEffect(()=>{Rh(v._container,u.style)},[u.style]),null}const Ib=zt.memo(zt.forwardRef(Tb));function Cb(u){const c=Nf(({mapLib:p})=>new p.NavigationControl(u),{position:u.position});return zt.useEffect(()=>{Rh(c._container,u.style)},[u.style]),null}const Pb=zt.memo(Cb);function Ab(u){const c=Nf(({mapLib:T})=>new T.ScaleControl(u),{position:u.position}),p=zt.useRef(u),v=p.current;p.current=u;const{style:x}=u;return u.maxWidth!==void 0&&u.maxWidth!==v.maxWidth&&(c.options.maxWidth=u.maxWidth),u.unit!==void 0&&u.unit!==v.unit&&c.setUnit(u.unit),zt.useEffect(()=>{Rh(c._container,x)},[x]),null}zt.memo(Ab);function nm(u,c){if(!u)throw new Error(c)}function Mb(u,c,p,v){if(nm(p.id===v.id,"layer id changed"),nm(p.type===v.type,"layer type changed"),p.type==="custom"||v.type==="custom")return;const{layout:x={},paint:T={},filter:w,minzoom:a,maxzoom:L,beforeId:R}=p;if(R!==v.beforeId&&u.moveLayer(c,R),x!==v.layout){const D=v.layout||{};for(const C in x)Aa(x[C],D[C])||u.setLayoutProperty(c,C,x[C]);for(const C in D)x.hasOwnProperty(C)||u.setLayoutProperty(c,C,void 0)}if(T!==v.paint){const D=v.paint||{};for(const C in T)Aa(T[C],D[C])||u.setPaintProperty(c,C,T[C]);for(const C in D)T.hasOwnProperty(C)||u.setPaintProperty(c,C,void 0)}Aa(w,v.filter)||u.setFilter(c,w),(a!==v.minzoom||L!==v.maxzoom)&&u.setLayerZoomRange(c,a,L)}function kb(u,c,p){if(u.style&&u.style._loaded&&(!("source"in p)||u.getSource(p.source))){const v={...p,id:c};delete v.beforeId,u.addLayer(v,p.beforeId)}}let zb=0;function Rb(u){const c=zt.useContext(zd).map.getMap(),p=zt.useRef(u),[,v]=zt.useState(0),x=zt.useMemo(()=>u.id||`jsx-layer-${zb++}`,[]);if(zt.useEffect(()=>{if(c){const w=()=>v(a=>a+1);return c.on("styledata",w),w(),()=>{c.off("styledata",w),c.style&&c.style._loaded&&c.getLayer(x)&&c.removeLayer(x)}}},[c]),c&&c.style&&c.getLayer(x))try{Mb(c,x,u,p.current)}catch(w){console.warn(w)}else kb(c,x,u);return p.current=u,null}let Fb=0;function Ob(u,c,p){if(u.style&&u.style._loaded){const v={...p};return delete v.id,delete v.children,u.addSource(c,v),u.getSource(c)}return null}function jb(u,c,p){nm(c.id===p.id,"source id changed"),nm(c.type===p.type,"source type changed");let v="",x=0;for(const w in c)w!=="children"&&w!=="id"&&!Aa(p[w],c[w])&&(v=w,x++);if(!x)return;const T=c.type;T==="geojson"?u.setData(c.data):T==="image"?u.updateImage({url:c.url,coordinates:c.coordinates}):"setCoordinates"in u&&x===1&&v==="coordinates"?u.setCoordinates(c.coordinates):"setUrl"in u&&v==="url"?u.setUrl(c.url):"setTiles"in u&&v==="tiles"?u.setTiles(c.tiles):console.warn(`Unable to update <Source> prop: ${v}`)}function Lb(u){const c=zt.useContext(zd).map.getMap(),p=zt.useRef(u),[,v]=zt.useState(0),x=zt.useMemo(()=>u.id||`jsx-source-${Fb++}`,[]);zt.useEffect(()=>{if(c){const w=()=>setTimeout(()=>v(a=>a+1),0);return c.on("styledata",w),w(),()=>{var a;if(c.off("styledata",w),c.style&&c.style._loaded&&c.getSource(x)){const L=(a=c.getStyle())===null||a===void 0?void 0:a.layers;if(L)for(const R of L)R.source===x&&c.removeLayer(R.id);c.removeSource(x)}}}},[c]);let T=c&&c.style&&c.getSource(x);return T?jb(T,u,p.current):T=Ob(c,x,u),p.current=u,T&&zt.Children.map(u.children,w=>w&&zt.cloneElement(w,{source:x}))||null}const Db=ib(()=>Promise.resolve().then(()=>tb),void 0),Bb=zt.forwardRef(function(c,p){return vb(c,p,Db)}),Nb=wb,Ub=Pb,Vb=Ib,$b=Rb,Gb=Lb;/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function Hb(u,c,p){return(c=Wb(c))in u?Object.defineProperty(u,c,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[c]=p,u}function Mv(u,c){var p=Object.keys(u);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(u);c&&(v=v.filter(function(x){return Object.getOwnPropertyDescriptor(u,x).enumerable})),p.push.apply(p,v)}return p}function Zt(u){for(var c=1;c<arguments.length;c++){var p=arguments[c]!=null?arguments[c]:{};c%2?Mv(Object(p),!0).forEach(function(v){Hb(u,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):Mv(Object(p)).forEach(function(v){Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(p,v))})}return u}function Zb(u,c){if(typeof u!="object"||!u)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var v=p.call(u,c||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(u)}function Wb(u){var c=Zb(u,"string");return typeof c=="symbol"?c:c+""}const kv=()=>{};let f0={},R1={},F1=null,O1={mark:kv,measure:kv};try{typeof window<"u"&&(f0=window),typeof document<"u"&&(R1=document),typeof MutationObserver<"u"&&(F1=MutationObserver),typeof performance<"u"&&(O1=performance)}catch{}const{userAgent:zv=""}=f0.navigator||{},Ac=f0,ui=R1,Rv=F1,Dp=O1;Ac.document;const Qu=!!ui.documentElement&&!!ui.head&&typeof ui.addEventListener=="function"&&typeof ui.createElement=="function",j1=~zv.indexOf("MSIE")||~zv.indexOf("Trident/");var qb=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Xb=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,L1={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},Kb={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},D1=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],ss="classic",Mm="duotone",Yb="sharp",Jb="sharp-duotone",B1=[ss,Mm,Yb,Jb],Qb={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},e2={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},t2=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),n2={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},r2=["fak","fa-kit","fakd","fa-kit-duotone"],Fv={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},i2=["kit"],o2={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},s2=["fak","fakd"],a2={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},Ov={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Bp={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},l2=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],u2=["fak","fa-kit","fakd","fa-kit-duotone"],c2={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},h2={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},d2={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},gy={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},f2=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],yy=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...l2,...f2],p2=["solid","regular","light","thin","duotone","brands"],N1=[1,2,3,4,5,6,7,8,9,10],m2=N1.concat([11,12,13,14,15,16,17,18,19,20]),g2=[...Object.keys(d2),...p2,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Bp.GROUP,Bp.SWAP_OPACITY,Bp.PRIMARY,Bp.SECONDARY].concat(N1.map(u=>"".concat(u,"x"))).concat(m2.map(u=>"w-".concat(u))),y2={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Ku="___FONT_AWESOME___",vy=16,U1="fa",V1="svg-inline--fa",Ah="data-fa-i2svg",_y="data-fa-pseudo-element",v2="data-fa-pseudo-element-pending",p0="data-prefix",m0="data-icon",jv="fontawesome-i2svg",_2="async",x2=["HTML","HEAD","STYLE","SCRIPT"],$1=(()=>{try{return!0}catch{return!1}})();function Uf(u){return new Proxy(u,{get(c,p){return p in c?c[p]:c[ss]}})}const G1=Zt({},L1);G1[ss]=Zt(Zt(Zt(Zt({},{"fa-duotone":"duotone"}),L1[ss]),Fv.kit),Fv["kit-duotone"]);const w2=Uf(G1),xy=Zt({},n2);xy[ss]=Zt(Zt(Zt(Zt({},{duotone:"fad"}),xy[ss]),Ov.kit),Ov["kit-duotone"]);const Lv=Uf(xy),wy=Zt({},gy);wy[ss]=Zt(Zt({},wy[ss]),a2.kit);const g0=Uf(wy),by=Zt({},h2);by[ss]=Zt(Zt({},by[ss]),o2.kit);Uf(by);const b2=qb,H1="fa-layers-text",S2=Xb,E2=Zt({},Qb);Uf(E2);const T2=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],pg=Kb,I2=[...i2,...g2],Tf=Ac.FontAwesomeConfig||{};function C2(u){var c=ui.querySelector("script["+u+"]");if(c)return c.getAttribute(u)}function P2(u){return u===""?!0:u==="false"?!1:u==="true"?!0:u}ui&&typeof ui.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(c=>{let[p,v]=c;const x=P2(C2(p));x!=null&&(Tf[v]=x)});const Z1={styleDefault:"solid",familyDefault:ss,cssPrefix:U1,replacementClass:V1,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Tf.familyPrefix&&(Tf.cssPrefix=Tf.familyPrefix);const Pd=Zt(Zt({},Z1),Tf);Pd.autoReplaceSvg||(Pd.observeMutations=!1);const Rn={};Object.keys(Z1).forEach(u=>{Object.defineProperty(Rn,u,{enumerable:!0,set:function(c){Pd[u]=c,If.forEach(p=>p(Rn))},get:function(){return Pd[u]}})});Object.defineProperty(Rn,"familyPrefix",{enumerable:!0,set:function(u){Pd.cssPrefix=u,If.forEach(c=>c(Rn))},get:function(){return Pd.cssPrefix}});Ac.FontAwesomeConfig=Rn;const If=[];function A2(u){return If.push(u),()=>{If.splice(If.indexOf(u),1)}}const Ic=vy,pu={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function M2(u){if(!u||!Qu)return;const c=ui.createElement("style");c.setAttribute("type","text/css"),c.innerHTML=u;const p=ui.head.childNodes;let v=null;for(let x=p.length-1;x>-1;x--){const T=p[x],w=(T.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(w)>-1&&(v=T)}return ui.head.insertBefore(c,v),u}const k2="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function zf(){let u=12,c="";for(;u-- >0;)c+=k2[Math.random()*62|0];return c}function Rd(u){const c=[];for(let p=(u||[]).length>>>0;p--;)c[p]=u[p];return c}function y0(u){return u.classList?Rd(u.classList):(u.getAttribute("class")||"").split(" ").filter(c=>c)}function W1(u){return"".concat(u).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function z2(u){return Object.keys(u||{}).reduce((c,p)=>c+"".concat(p,'="').concat(W1(u[p]),'" '),"").trim()}function km(u){return Object.keys(u||{}).reduce((c,p)=>c+"".concat(p,": ").concat(u[p].trim(),";"),"")}function v0(u){return u.size!==pu.size||u.x!==pu.x||u.y!==pu.y||u.rotate!==pu.rotate||u.flipX||u.flipY}function R2(u){let{transform:c,containerWidth:p,iconWidth:v}=u;const x={transform:"translate(".concat(p/2," 256)")},T="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),a="rotate(".concat(c.rotate," 0 0)"),L={transform:"".concat(T," ").concat(w," ").concat(a)},R={transform:"translate(".concat(v/2*-1," -256)")};return{outer:x,inner:L,path:R}}function F2(u){let{transform:c,width:p=vy,height:v=vy,startCentered:x=!1}=u,T="";return x&&j1?T+="translate(".concat(c.x/Ic-p/2,"em, ").concat(c.y/Ic-v/2,"em) "):x?T+="translate(calc(-50% + ".concat(c.x/Ic,"em), calc(-50% + ").concat(c.y/Ic,"em)) "):T+="translate(".concat(c.x/Ic,"em, ").concat(c.y/Ic,"em) "),T+="scale(".concat(c.size/Ic*(c.flipX?-1:1),", ").concat(c.size/Ic*(c.flipY?-1:1),") "),T+="rotate(".concat(c.rotate,"deg) "),T}var O2=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function q1(){const u=U1,c=V1,p=Rn.cssPrefix,v=Rn.replacementClass;let x=O2;if(p!==u||v!==c){const T=new RegExp("\\.".concat(u,"\\-"),"g"),w=new RegExp("\\--".concat(u,"\\-"),"g"),a=new RegExp("\\.".concat(c),"g");x=x.replace(T,".".concat(p,"-")).replace(w,"--".concat(p,"-")).replace(a,".".concat(v))}return x}let Dv=!1;function mg(){Rn.autoAddCss&&!Dv&&(M2(q1()),Dv=!0)}var j2={mixout(){return{dom:{css:q1,insertCss:mg}}},hooks(){return{beforeDOMElementCreation(){mg()},beforeI2svg(){mg()}}}};const Yu=Ac||{};Yu[Ku]||(Yu[Ku]={});Yu[Ku].styles||(Yu[Ku].styles={});Yu[Ku].hooks||(Yu[Ku].hooks={});Yu[Ku].shims||(Yu[Ku].shims=[]);var mu=Yu[Ku];const X1=[],K1=function(){ui.removeEventListener("DOMContentLoaded",K1),rm=1,X1.map(u=>u())};let rm=!1;Qu&&(rm=(ui.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ui.readyState),rm||ui.addEventListener("DOMContentLoaded",K1));function L2(u){Qu&&(rm?setTimeout(u,0):X1.push(u))}function Vf(u){const{tag:c,attributes:p={},children:v=[]}=u;return typeof u=="string"?W1(u):"<".concat(c," ").concat(z2(p),">").concat(v.map(Vf).join(""),"</").concat(c,">")}function Bv(u,c,p){if(u&&u[c]&&u[c][p])return{prefix:c,iconName:p,icon:u[c][p]}}var gg=function(c,p,v,x){var T=Object.keys(c),w=T.length,a=p,L,R,D;for(v===void 0?(L=1,D=c[T[0]]):(L=0,D=v);L<w;L++)R=T[L],D=a(D,c[R],R,c);return D};function D2(u){const c=[];let p=0;const v=u.length;for(;p<v;){const x=u.charCodeAt(p++);if(x>=55296&&x<=56319&&p<v){const T=u.charCodeAt(p++);(T&64512)==56320?c.push(((x&1023)<<10)+(T&1023)+65536):(c.push(x),p--)}else c.push(x)}return c}function Sy(u){const c=D2(u);return c.length===1?c[0].toString(16):null}function B2(u,c){const p=u.length;let v=u.charCodeAt(c),x;return v>=55296&&v<=56319&&p>c+1&&(x=u.charCodeAt(c+1),x>=56320&&x<=57343)?(v-55296)*1024+x-56320+65536:v}function Nv(u){return Object.keys(u).reduce((c,p)=>{const v=u[p];return!!v.icon?c[v.iconName]=v.icon:c[p]=v,c},{})}function Ey(u,c){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:v=!1}=p,x=Nv(c);typeof mu.hooks.addPack=="function"&&!v?mu.hooks.addPack(u,Nv(c)):mu.styles[u]=Zt(Zt({},mu.styles[u]||{}),x),u==="fas"&&Ey("fa",c)}const{styles:Rf,shims:N2}=mu,Y1=Object.keys(g0),U2=Y1.reduce((u,c)=>(u[c]=Object.keys(g0[c]),u),{});let _0=null,J1={},Q1={},ex={},tx={},nx={};function V2(u){return~I2.indexOf(u)}function $2(u,c){const p=c.split("-"),v=p[0],x=p.slice(1).join("-");return v===u&&x!==""&&!V2(x)?x:null}const rx=()=>{const u=v=>gg(Rf,(x,T,w)=>(x[w]=gg(T,v,{}),x),{});J1=u((v,x,T)=>(x[3]&&(v[x[3]]=T),x[2]&&x[2].filter(a=>typeof a=="number").forEach(a=>{v[a.toString(16)]=T}),v)),Q1=u((v,x,T)=>(v[T]=T,x[2]&&x[2].filter(a=>typeof a=="string").forEach(a=>{v[a]=T}),v)),nx=u((v,x,T)=>{const w=x[2];return v[T]=T,w.forEach(a=>{v[a]=T}),v});const c="far"in Rf||Rn.autoFetchSvg,p=gg(N2,(v,x)=>{const T=x[0];let w=x[1];const a=x[2];return w==="far"&&!c&&(w="fas"),typeof T=="string"&&(v.names[T]={prefix:w,iconName:a}),typeof T=="number"&&(v.unicodes[T.toString(16)]={prefix:w,iconName:a}),v},{names:{},unicodes:{}});ex=p.names,tx=p.unicodes,_0=zm(Rn.styleDefault,{family:Rn.familyDefault})};A2(u=>{_0=zm(u.styleDefault,{family:Rn.familyDefault})});rx();function x0(u,c){return(J1[u]||{})[c]}function G2(u,c){return(Q1[u]||{})[c]}function Ph(u,c){return(nx[u]||{})[c]}function ix(u){return ex[u]||{prefix:null,iconName:null}}function H2(u){const c=tx[u],p=x0("fas",u);return c||(p?{prefix:"fas",iconName:p}:null)||{prefix:null,iconName:null}}function Mc(){return _0}const ox=()=>({prefix:null,iconName:null,rest:[]});function Z2(u){let c=ss;const p=Y1.reduce((v,x)=>(v[x]="".concat(Rn.cssPrefix,"-").concat(x),v),{});return B1.forEach(v=>{(u.includes(p[v])||u.some(x=>U2[v].includes(x)))&&(c=v)}),c}function zm(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:p=ss}=c,v=w2[p][u];if(p===Mm&&!u)return"fad";const x=Lv[p][u]||Lv[p][v],T=u in mu.styles?u:null;return x||T||null}function W2(u){let c=[],p=null;return u.forEach(v=>{const x=$2(Rn.cssPrefix,v);x?p=x:v&&c.push(v)}),{iconName:p,rest:c}}function Uv(u){return u.sort().filter((c,p,v)=>v.indexOf(c)===p)}function Rm(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:p=!1}=c;let v=null;const x=yy.concat(u2),T=Uv(u.filter(C=>x.includes(C))),w=Uv(u.filter(C=>!yy.includes(C))),a=T.filter(C=>(v=C,!D1.includes(C))),[L=null]=a,R=Z2(T),D=Zt(Zt({},W2(w)),{},{prefix:zm(L,{family:R})});return Zt(Zt(Zt({},D),Y2({values:u,family:R,styles:Rf,config:Rn,canonical:D,givenPrefix:v})),q2(p,v,D))}function q2(u,c,p){let{prefix:v,iconName:x}=p;if(u||!v||!x)return{prefix:v,iconName:x};const T=c==="fa"?ix(x):{},w=Ph(v,x);return x=T.iconName||w||x,v=T.prefix||v,v==="far"&&!Rf.far&&Rf.fas&&!Rn.autoFetchSvg&&(v="fas"),{prefix:v,iconName:x}}const X2=B1.filter(u=>u!==ss||u!==Mm),K2=Object.keys(gy).filter(u=>u!==ss).map(u=>Object.keys(gy[u])).flat();function Y2(u){const{values:c,family:p,canonical:v,givenPrefix:x="",styles:T={},config:w={}}=u,a=p===Mm,L=c.includes("fa-duotone")||c.includes("fad"),R=w.familyDefault==="duotone",D=v.prefix==="fad"||v.prefix==="fa-duotone";if(!a&&(L||R||D)&&(v.prefix="fad"),(c.includes("fa-brands")||c.includes("fab"))&&(v.prefix="fab"),!v.prefix&&X2.includes(p)&&(Object.keys(T).find(k=>K2.includes(k))||w.autoFetchSvg)){const k=t2.get(p).defaultShortPrefixId;v.prefix=k,v.iconName=Ph(v.prefix,v.iconName)||v.iconName}return(v.prefix==="fa"||x==="fa")&&(v.prefix=Mc()||"fas"),v}class J2{constructor(){this.definitions={}}add(){for(var c=arguments.length,p=new Array(c),v=0;v<c;v++)p[v]=arguments[v];const x=p.reduce(this._pullDefinitions,{});Object.keys(x).forEach(T=>{this.definitions[T]=Zt(Zt({},this.definitions[T]||{}),x[T]),Ey(T,x[T]);const w=g0[ss][T];w&&Ey(w,x[T]),rx()})}reset(){this.definitions={}}_pullDefinitions(c,p){const v=p.prefix&&p.iconName&&p.icon?{0:p}:p;return Object.keys(v).map(x=>{const{prefix:T,iconName:w,icon:a}=v[x],L=a[2];c[T]||(c[T]={}),L.length>0&&L.forEach(R=>{typeof R=="string"&&(c[T][R]=a)}),c[T][w]=a}),c}}let Vv=[],wd={};const Td={},Q2=Object.keys(Td);function eS(u,c){let{mixoutsTo:p}=c;return Vv=u,wd={},Object.keys(Td).forEach(v=>{Q2.indexOf(v)===-1&&delete Td[v]}),Vv.forEach(v=>{const x=v.mixout?v.mixout():{};if(Object.keys(x).forEach(T=>{typeof x[T]=="function"&&(p[T]=x[T]),typeof x[T]=="object"&&Object.keys(x[T]).forEach(w=>{p[T]||(p[T]={}),p[T][w]=x[T][w]})}),v.hooks){const T=v.hooks();Object.keys(T).forEach(w=>{wd[w]||(wd[w]=[]),wd[w].push(T[w])})}v.provides&&v.provides(Td)}),p}function Ty(u,c){for(var p=arguments.length,v=new Array(p>2?p-2:0),x=2;x<p;x++)v[x-2]=arguments[x];return(wd[u]||[]).forEach(w=>{c=w.apply(null,[c,...v])}),c}function Mh(u){for(var c=arguments.length,p=new Array(c>1?c-1:0),v=1;v<c;v++)p[v-1]=arguments[v];(wd[u]||[]).forEach(T=>{T.apply(null,p)})}function kc(){const u=arguments[0],c=Array.prototype.slice.call(arguments,1);return Td[u]?Td[u].apply(null,c):void 0}function Iy(u){u.prefix==="fa"&&(u.prefix="fas");let{iconName:c}=u;const p=u.prefix||Mc();if(c)return c=Ph(p,c)||c,Bv(sx.definitions,p,c)||Bv(mu.styles,p,c)}const sx=new J2,tS=()=>{Rn.autoReplaceSvg=!1,Rn.observeMutations=!1,Mh("noAuto")},nS={i2svg:function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qu?(Mh("beforeI2svg",u),kc("pseudoElements2svg",u),kc("i2svg",u)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:c}=u;Rn.autoReplaceSvg===!1&&(Rn.autoReplaceSvg=!0),Rn.observeMutations=!0,L2(()=>{iS({autoReplaceSvgRoot:c}),Mh("watch",u)})}},rS={icon:u=>{if(u===null)return null;if(typeof u=="object"&&u.prefix&&u.iconName)return{prefix:u.prefix,iconName:Ph(u.prefix,u.iconName)||u.iconName};if(Array.isArray(u)&&u.length===2){const c=u[1].indexOf("fa-")===0?u[1].slice(3):u[1],p=zm(u[0]);return{prefix:p,iconName:Ph(p,c)||c}}if(typeof u=="string"&&(u.indexOf("".concat(Rn.cssPrefix,"-"))>-1||u.match(b2))){const c=Rm(u.split(" "),{skipLookups:!0});return{prefix:c.prefix||Mc(),iconName:Ph(c.prefix,c.iconName)||c.iconName}}if(typeof u=="string"){const c=Mc();return{prefix:c,iconName:Ph(c,u)||u}}}},Ma={noAuto:tS,config:Rn,dom:nS,parse:rS,library:sx,findIconDefinition:Iy,toHtml:Vf},iS=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:c=ui}=u;(Object.keys(mu.styles).length>0||Rn.autoFetchSvg)&&Qu&&Rn.autoReplaceSvg&&Ma.dom.i2svg({node:c})};function Fm(u,c){return Object.defineProperty(u,"abstract",{get:c}),Object.defineProperty(u,"html",{get:function(){return u.abstract.map(p=>Vf(p))}}),Object.defineProperty(u,"node",{get:function(){if(!Qu)return;const p=ui.createElement("div");return p.innerHTML=u.html,p.children}}),u}function oS(u){let{children:c,main:p,mask:v,attributes:x,styles:T,transform:w}=u;if(v0(w)&&p.found&&!v.found){const{width:a,height:L}=p,R={x:a/L/2,y:.5};x.style=km(Zt(Zt({},T),{},{"transform-origin":"".concat(R.x+w.x/16,"em ").concat(R.y+w.y/16,"em")}))}return[{tag:"svg",attributes:x,children:c}]}function sS(u){let{prefix:c,iconName:p,children:v,attributes:x,symbol:T}=u;const w=T===!0?"".concat(c,"-").concat(Rn.cssPrefix,"-").concat(p):T;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Zt(Zt({},x),{},{id:w}),children:v}]}]}function w0(u){const{icons:{main:c,mask:p},prefix:v,iconName:x,transform:T,symbol:w,title:a,maskId:L,titleId:R,extra:D,watchable:C=!1}=u,{width:k,height:V}=p.found?p:c,N=s2.includes(v),Q=[Rn.replacementClass,x?"".concat(Rn.cssPrefix,"-").concat(x):""].filter(ne=>D.classes.indexOf(ne)===-1).filter(ne=>ne!==""||!!ne).concat(D.classes).join(" ");let ce={children:[],attributes:Zt(Zt({},D.attributes),{},{"data-prefix":v,"data-icon":x,class:Q,role:D.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(k," ").concat(V)})};const Te=N&&!~D.classes.indexOf("fa-fw")?{width:"".concat(k/V*16*.0625,"em")}:{};C&&(ce.attributes[Ah]=""),a&&(ce.children.push({tag:"title",attributes:{id:ce.attributes["aria-labelledby"]||"title-".concat(R||zf())},children:[a]}),delete ce.attributes.title);const xe=Zt(Zt({},ce),{},{prefix:v,iconName:x,main:c,mask:p,maskId:L,transform:T,symbol:w,styles:Zt(Zt({},Te),D.styles)}),{children:ve,attributes:Me}=p.found&&c.found?kc("generateAbstractMask",xe)||{children:[],attributes:{}}:kc("generateAbstractIcon",xe)||{children:[],attributes:{}};return xe.children=ve,xe.attributes=Me,w?sS(xe):oS(xe)}function $v(u){const{content:c,width:p,height:v,transform:x,title:T,extra:w,watchable:a=!1}=u,L=Zt(Zt(Zt({},w.attributes),T?{title:T}:{}),{},{class:w.classes.join(" ")});a&&(L[Ah]="");const R=Zt({},w.styles);v0(x)&&(R.transform=F2({transform:x,startCentered:!0,width:p,height:v}),R["-webkit-transform"]=R.transform);const D=km(R);D.length>0&&(L.style=D);const C=[];return C.push({tag:"span",attributes:L,children:[c]}),T&&C.push({tag:"span",attributes:{class:"sr-only"},children:[T]}),C}function aS(u){const{content:c,title:p,extra:v}=u,x=Zt(Zt(Zt({},v.attributes),p?{title:p}:{}),{},{class:v.classes.join(" ")}),T=km(v.styles);T.length>0&&(x.style=T);const w=[];return w.push({tag:"span",attributes:x,children:[c]}),p&&w.push({tag:"span",attributes:{class:"sr-only"},children:[p]}),w}const{styles:yg}=mu;function Cy(u){const c=u[0],p=u[1],[v]=u.slice(4);let x=null;return Array.isArray(v)?x={tag:"g",attributes:{class:"".concat(Rn.cssPrefix,"-").concat(pg.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Rn.cssPrefix,"-").concat(pg.SECONDARY),fill:"currentColor",d:v[0]}},{tag:"path",attributes:{class:"".concat(Rn.cssPrefix,"-").concat(pg.PRIMARY),fill:"currentColor",d:v[1]}}]}:x={tag:"path",attributes:{fill:"currentColor",d:v}},{found:!0,width:c,height:p,icon:x}}const lS={found:!1,width:512,height:512};function uS(u,c){!$1&&!Rn.showMissingIcons&&u&&console.error('Icon with name "'.concat(u,'" and prefix "').concat(c,'" is missing.'))}function Py(u,c){let p=c;return c==="fa"&&Rn.styleDefault!==null&&(c=Mc()),new Promise((v,x)=>{if(p==="fa"){const T=ix(u)||{};u=T.iconName||u,c=T.prefix||c}if(u&&c&&yg[c]&&yg[c][u]){const T=yg[c][u];return v(Cy(T))}uS(u,c),v(Zt(Zt({},lS),{},{icon:Rn.showMissingIcons&&u?kc("missingIconAbstract")||{}:{}}))})}const Gv=()=>{},Ay=Rn.measurePerformance&&Dp&&Dp.mark&&Dp.measure?Dp:{mark:Gv,measure:Gv},gf='FA "6.7.2"',cS=u=>(Ay.mark("".concat(gf," ").concat(u," begins")),()=>ax(u)),ax=u=>{Ay.mark("".concat(gf," ").concat(u," ends")),Ay.measure("".concat(gf," ").concat(u),"".concat(gf," ").concat(u," begins"),"".concat(gf," ").concat(u," ends"))};var b0={begin:cS,end:ax};const Yp=()=>{};function Hv(u){return typeof(u.getAttribute?u.getAttribute(Ah):null)=="string"}function hS(u){const c=u.getAttribute?u.getAttribute(p0):null,p=u.getAttribute?u.getAttribute(m0):null;return c&&p}function dS(u){return u&&u.classList&&u.classList.contains&&u.classList.contains(Rn.replacementClass)}function fS(){return Rn.autoReplaceSvg===!0?Jp.replace:Jp[Rn.autoReplaceSvg]||Jp.replace}function pS(u){return ui.createElementNS("http://www.w3.org/2000/svg",u)}function mS(u){return ui.createElement(u)}function lx(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:p=u.tag==="svg"?pS:mS}=c;if(typeof u=="string")return ui.createTextNode(u);const v=p(u.tag);return Object.keys(u.attributes||[]).forEach(function(T){v.setAttribute(T,u.attributes[T])}),(u.children||[]).forEach(function(T){v.appendChild(lx(T,{ceFn:p}))}),v}function gS(u){let c=" ".concat(u.outerHTML," ");return c="".concat(c,"Font Awesome fontawesome.com "),c}const Jp={replace:function(u){const c=u[0];if(c.parentNode)if(u[1].forEach(p=>{c.parentNode.insertBefore(lx(p),c)}),c.getAttribute(Ah)===null&&Rn.keepOriginalSource){let p=ui.createComment(gS(c));c.parentNode.replaceChild(p,c)}else c.remove()},nest:function(u){const c=u[0],p=u[1];if(~y0(c).indexOf(Rn.replacementClass))return Jp.replace(u);const v=new RegExp("".concat(Rn.cssPrefix,"-.*"));if(delete p[0].attributes.id,p[0].attributes.class){const T=p[0].attributes.class.split(" ").reduce((w,a)=>(a===Rn.replacementClass||a.match(v)?w.toSvg.push(a):w.toNode.push(a),w),{toNode:[],toSvg:[]});p[0].attributes.class=T.toSvg.join(" "),T.toNode.length===0?c.removeAttribute("class"):c.setAttribute("class",T.toNode.join(" "))}const x=p.map(T=>Vf(T)).join(`
`);c.setAttribute(Ah,""),c.innerHTML=x}};function Zv(u){u()}function ux(u,c){const p=typeof c=="function"?c:Yp;if(u.length===0)p();else{let v=Zv;Rn.mutateApproach===_2&&(v=Ac.requestAnimationFrame||Zv),v(()=>{const x=fS(),T=b0.begin("mutate");u.map(x),T(),p()})}}let S0=!1;function cx(){S0=!0}function My(){S0=!1}let im=null;function Wv(u){if(!Rv||!Rn.observeMutations)return;const{treeCallback:c=Yp,nodeCallback:p=Yp,pseudoElementsCallback:v=Yp,observeMutationsRoot:x=ui}=u;im=new Rv(T=>{if(S0)return;const w=Mc();Rd(T).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!Hv(a.addedNodes[0])&&(Rn.searchPseudoElements&&v(a.target),c(a.target)),a.type==="attributes"&&a.target.parentNode&&Rn.searchPseudoElements&&v(a.target.parentNode),a.type==="attributes"&&Hv(a.target)&&~T2.indexOf(a.attributeName))if(a.attributeName==="class"&&hS(a.target)){const{prefix:L,iconName:R}=Rm(y0(a.target));a.target.setAttribute(p0,L||w),R&&a.target.setAttribute(m0,R)}else dS(a.target)&&p(a.target)})}),Qu&&im.observe(x,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function yS(){im&&im.disconnect()}function vS(u){const c=u.getAttribute("style");let p=[];return c&&(p=c.split(";").reduce((v,x)=>{const T=x.split(":"),w=T[0],a=T.slice(1);return w&&a.length>0&&(v[w]=a.join(":").trim()),v},{})),p}function _S(u){const c=u.getAttribute("data-prefix"),p=u.getAttribute("data-icon"),v=u.innerText!==void 0?u.innerText.trim():"";let x=Rm(y0(u));return x.prefix||(x.prefix=Mc()),c&&p&&(x.prefix=c,x.iconName=p),x.iconName&&x.prefix||(x.prefix&&v.length>0&&(x.iconName=G2(x.prefix,u.innerText)||x0(x.prefix,Sy(u.innerText))),!x.iconName&&Rn.autoFetchSvg&&u.firstChild&&u.firstChild.nodeType===Node.TEXT_NODE&&(x.iconName=u.firstChild.data)),x}function xS(u){const c=Rd(u.attributes).reduce((x,T)=>(x.name!=="class"&&x.name!=="style"&&(x[T.name]=T.value),x),{}),p=u.getAttribute("title"),v=u.getAttribute("data-fa-title-id");return Rn.autoA11y&&(p?c["aria-labelledby"]="".concat(Rn.replacementClass,"-title-").concat(v||zf()):(c["aria-hidden"]="true",c.focusable="false")),c}function wS(){return{iconName:null,title:null,titleId:null,prefix:null,transform:pu,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function qv(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:p,prefix:v,rest:x}=_S(u),T=xS(u),w=Ty("parseNodeAttributes",{},u);let a=c.styleParser?vS(u):[];return Zt({iconName:p,title:u.getAttribute("title"),titleId:u.getAttribute("data-fa-title-id"),prefix:v,transform:pu,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:x,styles:a,attributes:T}},w)}const{styles:bS}=mu;function hx(u){const c=Rn.autoReplaceSvg==="nest"?qv(u,{styleParser:!1}):qv(u);return~c.extra.classes.indexOf(H1)?kc("generateLayersText",u,c):kc("generateSvgReplacementMutation",u,c)}function SS(){return[...r2,...yy]}function Xv(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Qu)return Promise.resolve();const p=ui.documentElement.classList,v=D=>p.add("".concat(jv,"-").concat(D)),x=D=>p.remove("".concat(jv,"-").concat(D)),T=Rn.autoFetchSvg?SS():D1.concat(Object.keys(bS));T.includes("fa")||T.push("fa");const w=[".".concat(H1,":not([").concat(Ah,"])")].concat(T.map(D=>".".concat(D,":not([").concat(Ah,"])"))).join(", ");if(w.length===0)return Promise.resolve();let a=[];try{a=Rd(u.querySelectorAll(w))}catch{}if(a.length>0)v("pending"),x("complete");else return Promise.resolve();const L=b0.begin("onTree"),R=a.reduce((D,C)=>{try{const k=hx(C);k&&D.push(k)}catch(k){$1||k.name==="MissingIcon"&&console.error(k)}return D},[]);return new Promise((D,C)=>{Promise.all(R).then(k=>{ux(k,()=>{v("active"),v("complete"),x("pending"),typeof c=="function"&&c(),L(),D()})}).catch(k=>{L(),C(k)})})}function ES(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;hx(u).then(p=>{p&&ux([p],c)})}function TS(u){return function(c){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v=(c||{}).icon?c:Iy(c||{});let{mask:x}=p;return x&&(x=(x||{}).icon?x:Iy(x||{})),u(v,Zt(Zt({},p),{},{mask:x}))}}const IS=function(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:p=pu,symbol:v=!1,mask:x=null,maskId:T=null,title:w=null,titleId:a=null,classes:L=[],attributes:R={},styles:D={}}=c;if(!u)return;const{prefix:C,iconName:k,icon:V}=u;return Fm(Zt({type:"icon"},u),()=>(Mh("beforeDOMElementCreation",{iconDefinition:u,params:c}),Rn.autoA11y&&(w?R["aria-labelledby"]="".concat(Rn.replacementClass,"-title-").concat(a||zf()):(R["aria-hidden"]="true",R.focusable="false")),w0({icons:{main:Cy(V),mask:x?Cy(x.icon):{found:!1,width:null,height:null,icon:{}}},prefix:C,iconName:k,transform:Zt(Zt({},pu),p),symbol:v,title:w,maskId:T,titleId:a,extra:{attributes:R,styles:D,classes:L}})))};var CS={mixout(){return{icon:TS(IS)}},hooks(){return{mutationObserverCallbacks(u){return u.treeCallback=Xv,u.nodeCallback=ES,u}}},provides(u){u.i2svg=function(c){const{node:p=ui,callback:v=()=>{}}=c;return Xv(p,v)},u.generateSvgReplacementMutation=function(c,p){const{iconName:v,title:x,titleId:T,prefix:w,transform:a,symbol:L,mask:R,maskId:D,extra:C}=p;return new Promise((k,V)=>{Promise.all([Py(v,w),R.iconName?Py(R.iconName,R.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(N=>{let[Q,ce]=N;k([c,w0({icons:{main:Q,mask:ce},prefix:w,iconName:v,transform:a,symbol:L,maskId:D,title:x,titleId:T,extra:C,watchable:!0})])}).catch(V)})},u.generateAbstractIcon=function(c){let{children:p,attributes:v,main:x,transform:T,styles:w}=c;const a=km(w);a.length>0&&(v.style=a);let L;return v0(T)&&(L=kc("generateAbstractTransformGrouping",{main:x,transform:T,containerWidth:x.width,iconWidth:x.width})),p.push(L||x.icon),{children:p,attributes:v}}}},PS={mixout(){return{layer(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:p=[]}=c;return Fm({type:"layer"},()=>{Mh("beforeDOMElementCreation",{assembler:u,params:c});let v=[];return u(x=>{Array.isArray(x)?x.map(T=>{v=v.concat(T.abstract)}):v=v.concat(x.abstract)}),[{tag:"span",attributes:{class:["".concat(Rn.cssPrefix,"-layers"),...p].join(" ")},children:v}]})}}}},AS={mixout(){return{counter(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:p=null,classes:v=[],attributes:x={},styles:T={}}=c;return Fm({type:"counter",content:u},()=>(Mh("beforeDOMElementCreation",{content:u,params:c}),aS({content:u.toString(),title:p,extra:{attributes:x,styles:T,classes:["".concat(Rn.cssPrefix,"-layers-counter"),...v]}})))}}}},MS={mixout(){return{text(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:p=pu,title:v=null,classes:x=[],attributes:T={},styles:w={}}=c;return Fm({type:"text",content:u},()=>(Mh("beforeDOMElementCreation",{content:u,params:c}),$v({content:u,transform:Zt(Zt({},pu),p),title:v,extra:{attributes:T,styles:w,classes:["".concat(Rn.cssPrefix,"-layers-text"),...x]}})))}}},provides(u){u.generateLayersText=function(c,p){const{title:v,transform:x,extra:T}=p;let w=null,a=null;if(j1){const L=parseInt(getComputedStyle(c).fontSize,10),R=c.getBoundingClientRect();w=R.width/L,a=R.height/L}return Rn.autoA11y&&!v&&(T.attributes["aria-hidden"]="true"),Promise.resolve([c,$v({content:c.innerHTML,width:w,height:a,transform:x,title:v,extra:T,watchable:!0})])}}};const kS=new RegExp('"',"ug"),Kv=[1105920,1112319],Yv=Zt(Zt(Zt(Zt({},{FontAwesome:{normal:"fas",400:"fas"}}),e2),y2),c2),ky=Object.keys(Yv).reduce((u,c)=>(u[c.toLowerCase()]=Yv[c],u),{}),zS=Object.keys(ky).reduce((u,c)=>{const p=ky[c];return u[c]=p[900]||[...Object.entries(p)][0][1],u},{});function RS(u){const c=u.replace(kS,""),p=B2(c,0),v=p>=Kv[0]&&p<=Kv[1],x=c.length===2?c[0]===c[1]:!1;return{value:Sy(x?c[0]:c),isSecondary:v||x}}function FS(u,c){const p=u.replace(/^['"]|['"]$/g,"").toLowerCase(),v=parseInt(c),x=isNaN(v)?"normal":v;return(ky[p]||{})[x]||zS[p]}function Jv(u,c){const p="".concat(v2).concat(c.replace(":","-"));return new Promise((v,x)=>{if(u.getAttribute(p)!==null)return v();const w=Rd(u.children).filter(k=>k.getAttribute(_y)===c)[0],a=Ac.getComputedStyle(u,c),L=a.getPropertyValue("font-family"),R=L.match(S2),D=a.getPropertyValue("font-weight"),C=a.getPropertyValue("content");if(w&&!R)return u.removeChild(w),v();if(R&&C!=="none"&&C!==""){const k=a.getPropertyValue("content");let V=FS(L,D);const{value:N,isSecondary:Q}=RS(k),ce=R[0].startsWith("FontAwesome");let Te=x0(V,N),xe=Te;if(ce){const ve=H2(N);ve.iconName&&ve.prefix&&(Te=ve.iconName,V=ve.prefix)}if(Te&&!Q&&(!w||w.getAttribute(p0)!==V||w.getAttribute(m0)!==xe)){u.setAttribute(p,xe),w&&u.removeChild(w);const ve=wS(),{extra:Me}=ve;Me.attributes[_y]=c,Py(Te,V).then(ne=>{const ue=w0(Zt(Zt({},ve),{},{icons:{main:ne,mask:ox()},prefix:V,iconName:xe,extra:Me,watchable:!0})),M=ui.createElementNS("http://www.w3.org/2000/svg","svg");c==="::before"?u.insertBefore(M,u.firstChild):u.appendChild(M),M.outerHTML=ue.map($=>Vf($)).join(`
`),u.removeAttribute(p),v()}).catch(x)}else v()}else v()})}function OS(u){return Promise.all([Jv(u,"::before"),Jv(u,"::after")])}function jS(u){return u.parentNode!==document.head&&!~x2.indexOf(u.tagName.toUpperCase())&&!u.getAttribute(_y)&&(!u.parentNode||u.parentNode.tagName!=="svg")}function Qv(u){if(Qu)return new Promise((c,p)=>{const v=Rd(u.querySelectorAll("*")).filter(jS).map(OS),x=b0.begin("searchPseudoElements");cx(),Promise.all(v).then(()=>{x(),My(),c()}).catch(()=>{x(),My(),p()})})}var LS={hooks(){return{mutationObserverCallbacks(u){return u.pseudoElementsCallback=Qv,u}}},provides(u){u.pseudoElements2svg=function(c){const{node:p=ui}=c;Rn.searchPseudoElements&&Qv(p)}}};let e_=!1;var DS={mixout(){return{dom:{unwatch(){cx(),e_=!0}}}},hooks(){return{bootstrap(){Wv(Ty("mutationObserverCallbacks",{}))},noAuto(){yS()},watch(u){const{observeMutationsRoot:c}=u;e_?My():Wv(Ty("mutationObserverCallbacks",{observeMutationsRoot:c}))}}}};const t_=u=>{let c={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return u.toLowerCase().split(" ").reduce((p,v)=>{const x=v.toLowerCase().split("-"),T=x[0];let w=x.slice(1).join("-");if(T&&w==="h")return p.flipX=!0,p;if(T&&w==="v")return p.flipY=!0,p;if(w=parseFloat(w),isNaN(w))return p;switch(T){case"grow":p.size=p.size+w;break;case"shrink":p.size=p.size-w;break;case"left":p.x=p.x-w;break;case"right":p.x=p.x+w;break;case"up":p.y=p.y-w;break;case"down":p.y=p.y+w;break;case"rotate":p.rotate=p.rotate+w;break}return p},c)};var BS={mixout(){return{parse:{transform:u=>t_(u)}}},hooks(){return{parseNodeAttributes(u,c){const p=c.getAttribute("data-fa-transform");return p&&(u.transform=t_(p)),u}}},provides(u){u.generateAbstractTransformGrouping=function(c){let{main:p,transform:v,containerWidth:x,iconWidth:T}=c;const w={transform:"translate(".concat(x/2," 256)")},a="translate(".concat(v.x*32,", ").concat(v.y*32,") "),L="scale(".concat(v.size/16*(v.flipX?-1:1),", ").concat(v.size/16*(v.flipY?-1:1),") "),R="rotate(".concat(v.rotate," 0 0)"),D={transform:"".concat(a," ").concat(L," ").concat(R)},C={transform:"translate(".concat(T/2*-1," -256)")},k={outer:w,inner:D,path:C};return{tag:"g",attributes:Zt({},k.outer),children:[{tag:"g",attributes:Zt({},k.inner),children:[{tag:p.icon.tag,children:p.icon.children,attributes:Zt(Zt({},p.icon.attributes),k.path)}]}]}}}};const vg={x:0,y:0,width:"100%",height:"100%"};function n_(u){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u.attributes&&(u.attributes.fill||c)&&(u.attributes.fill="black"),u}function NS(u){return u.tag==="g"?u.children:[u]}var US={hooks(){return{parseNodeAttributes(u,c){const p=c.getAttribute("data-fa-mask"),v=p?Rm(p.split(" ").map(x=>x.trim())):ox();return v.prefix||(v.prefix=Mc()),u.mask=v,u.maskId=c.getAttribute("data-fa-mask-id"),u}}},provides(u){u.generateAbstractMask=function(c){let{children:p,attributes:v,main:x,mask:T,maskId:w,transform:a}=c;const{width:L,icon:R}=x,{width:D,icon:C}=T,k=R2({transform:a,containerWidth:D,iconWidth:L}),V={tag:"rect",attributes:Zt(Zt({},vg),{},{fill:"white"})},N=R.children?{children:R.children.map(n_)}:{},Q={tag:"g",attributes:Zt({},k.inner),children:[n_(Zt({tag:R.tag,attributes:Zt(Zt({},R.attributes),k.path)},N))]},ce={tag:"g",attributes:Zt({},k.outer),children:[Q]},Te="mask-".concat(w||zf()),xe="clip-".concat(w||zf()),ve={tag:"mask",attributes:Zt(Zt({},vg),{},{id:Te,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[V,ce]},Me={tag:"defs",children:[{tag:"clipPath",attributes:{id:xe},children:NS(C)},ve]};return p.push(Me,{tag:"rect",attributes:Zt({fill:"currentColor","clip-path":"url(#".concat(xe,")"),mask:"url(#".concat(Te,")")},vg)}),{children:p,attributes:v}}}},VS={provides(u){let c=!1;Ac.matchMedia&&(c=Ac.matchMedia("(prefers-reduced-motion: reduce)").matches),u.missingIconAbstract=function(){const p=[],v={fill:"currentColor"},x={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};p.push({tag:"path",attributes:Zt(Zt({},v),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const T=Zt(Zt({},x),{},{attributeName:"opacity"}),w={tag:"circle",attributes:Zt(Zt({},v),{},{cx:"256",cy:"364",r:"28"}),children:[]};return c||w.children.push({tag:"animate",attributes:Zt(Zt({},x),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Zt(Zt({},T),{},{values:"1;0;1;1;0;1;"})}),p.push(w),p.push({tag:"path",attributes:Zt(Zt({},v),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:c?[]:[{tag:"animate",attributes:Zt(Zt({},T),{},{values:"1;0;0;0;0;1;"})}]}),c||p.push({tag:"path",attributes:Zt(Zt({},v),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Zt(Zt({},T),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:p}}}},$S={hooks(){return{parseNodeAttributes(u,c){const p=c.getAttribute("data-fa-symbol"),v=p===null?!1:p===""?!0:p;return u.symbol=v,u}}}},GS=[j2,CS,PS,AS,MS,LS,DS,BS,US,VS,$S];eS(GS,{mixoutsTo:Ma});Ma.noAuto;Ma.config;Ma.library;Ma.dom;const zy=Ma.parse;Ma.findIconDefinition;Ma.toHtml;const HS=Ma.icon;Ma.layer;Ma.text;Ma.counter;var _g={exports:{}},xg,r_;function ZS(){if(r_)return xg;r_=1;var u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return xg=u,xg}var wg,i_;function WS(){if(i_)return wg;i_=1;var u=ZS();function c(){}function p(){}return p.resetWarningCache=c,wg=function(){function v(w,a,L,R,D,C){if(C!==u){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}v.isRequired=v;function x(){return v}var T={array:v,bigint:v,bool:v,func:v,number:v,object:v,string:v,symbol:v,any:v,arrayOf:x,element:v,elementType:v,instanceOf:x,node:v,objectOf:x,oneOf:x,oneOfType:x,shape:x,exact:x,checkPropTypes:p,resetWarningCache:c};return T.PropTypes=T,T},wg}var o_;function qS(){return o_||(o_=1,_g.exports=WS()()),_g.exports}var XS=qS();const dr=Bf(XS);function s_(u,c){var p=Object.keys(u);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(u);c&&(v=v.filter(function(x){return Object.getOwnPropertyDescriptor(u,x).enumerable})),p.push.apply(p,v)}return p}function hu(u){for(var c=1;c<arguments.length;c++){var p=arguments[c]!=null?arguments[c]:{};c%2?s_(Object(p),!0).forEach(function(v){bd(u,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):s_(Object(p)).forEach(function(v){Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(p,v))})}return u}function om(u){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},om(u)}function bd(u,c,p){return c in u?Object.defineProperty(u,c,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[c]=p,u}function KS(u,c){if(u==null)return{};var p={},v=Object.keys(u),x,T;for(T=0;T<v.length;T++)x=v[T],!(c.indexOf(x)>=0)&&(p[x]=u[x]);return p}function YS(u,c){if(u==null)return{};var p=KS(u,c),v,x;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(u);for(x=0;x<T.length;x++)v=T[x],!(c.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(u,v)&&(p[v]=u[v])}return p}function Ry(u){return JS(u)||QS(u)||eE(u)||tE()}function JS(u){if(Array.isArray(u))return Fy(u)}function QS(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function eE(u,c){if(u){if(typeof u=="string")return Fy(u,c);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Fy(u,c)}}function Fy(u,c){(c==null||c>u.length)&&(c=u.length);for(var p=0,v=new Array(c);p<c;p++)v[p]=u[p];return v}function tE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nE(u){var c,p=u.beat,v=u.fade,x=u.beatFade,T=u.bounce,w=u.shake,a=u.flash,L=u.spin,R=u.spinPulse,D=u.spinReverse,C=u.pulse,k=u.fixedWidth,V=u.inverse,N=u.border,Q=u.listItem,ce=u.flip,Te=u.size,xe=u.rotation,ve=u.pull,Me=(c={"fa-beat":p,"fa-fade":v,"fa-beat-fade":x,"fa-bounce":T,"fa-shake":w,"fa-flash":a,"fa-spin":L,"fa-spin-reverse":D,"fa-spin-pulse":R,"fa-pulse":C,"fa-fw":k,"fa-inverse":V,"fa-border":N,"fa-li":Q,"fa-flip":ce===!0,"fa-flip-horizontal":ce==="horizontal"||ce==="both","fa-flip-vertical":ce==="vertical"||ce==="both"},bd(c,"fa-".concat(Te),typeof Te<"u"&&Te!==null),bd(c,"fa-rotate-".concat(xe),typeof xe<"u"&&xe!==null&&xe!==0),bd(c,"fa-pull-".concat(ve),typeof ve<"u"&&ve!==null),bd(c,"fa-swap-opacity",u.swapOpacity),c);return Object.keys(Me).map(function(ne){return Me[ne]?ne:null}).filter(function(ne){return ne})}function rE(u){return u=u-0,u===u}function dx(u){return rE(u)?u:(u=u.replace(/[\-_\s]+(.)?/g,function(c,p){return p?p.toUpperCase():""}),u.substr(0,1).toLowerCase()+u.substr(1))}var iE=["style"];function oE(u){return u.charAt(0).toUpperCase()+u.slice(1)}function sE(u){return u.split(";").map(function(c){return c.trim()}).filter(function(c){return c}).reduce(function(c,p){var v=p.indexOf(":"),x=dx(p.slice(0,v)),T=p.slice(v+1).trim();return x.startsWith("webkit")?c[oE(x)]=T:c[x]=T,c},{})}function fx(u,c){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof c=="string")return c;var v=(c.children||[]).map(function(L){return fx(u,L)}),x=Object.keys(c.attributes||{}).reduce(function(L,R){var D=c.attributes[R];switch(R){case"class":L.attrs.className=D,delete c.attributes.class;break;case"style":L.attrs.style=sE(D);break;default:R.indexOf("aria-")===0||R.indexOf("data-")===0?L.attrs[R.toLowerCase()]=D:L.attrs[dx(R)]=D}return L},{attrs:{}}),T=p.style,w=T===void 0?{}:T,a=YS(p,iE);return x.attrs.style=hu(hu({},x.attrs.style),w),u.apply(void 0,[c.tag,hu(hu({},x.attrs),a)].concat(Ry(v)))}var px=!1;try{px=!0}catch{}function aE(){if(!px&&console&&typeof console.error=="function"){var u;(u=console).error.apply(u,arguments)}}function a_(u){if(u&&om(u)==="object"&&u.prefix&&u.iconName&&u.icon)return u;if(zy.icon)return zy.icon(u);if(u===null)return null;if(u&&om(u)==="object"&&u.prefix&&u.iconName)return u;if(Array.isArray(u)&&u.length===2)return{prefix:u[0],iconName:u[1]};if(typeof u=="string")return{prefix:"fas",iconName:u}}function bg(u,c){return Array.isArray(c)&&c.length>0||!Array.isArray(c)&&c?bd({},u,c):{}}var l_={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Pc=h0.forwardRef(function(u,c){var p=hu(hu({},l_),u),v=p.icon,x=p.mask,T=p.symbol,w=p.className,a=p.title,L=p.titleId,R=p.maskId,D=a_(v),C=bg("classes",[].concat(Ry(nE(p)),Ry((w||"").split(" ")))),k=bg("transform",typeof p.transform=="string"?zy.transform(p.transform):p.transform),V=bg("mask",a_(x)),N=HS(D,hu(hu(hu(hu({},C),k),V),{},{symbol:T,title:a,titleId:L,maskId:R}));if(!N)return aE("Could not find icon",D),null;var Q=N.abstract,ce={ref:c};return Object.keys(p).forEach(function(Te){l_.hasOwnProperty(Te)||(ce[Te]=p[Te])}),lE(Q[0],ce)});Pc.displayName="FontAwesomeIcon";Pc.propTypes={beat:dr.bool,border:dr.bool,beatFade:dr.bool,bounce:dr.bool,className:dr.string,fade:dr.bool,flash:dr.bool,mask:dr.oneOfType([dr.object,dr.array,dr.string]),maskId:dr.string,fixedWidth:dr.bool,inverse:dr.bool,flip:dr.oneOf([!0,!1,"horizontal","vertical","both"]),icon:dr.oneOfType([dr.object,dr.array,dr.string]),listItem:dr.bool,pull:dr.oneOf(["right","left"]),pulse:dr.bool,rotation:dr.oneOf([0,90,180,270]),shake:dr.bool,size:dr.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:dr.bool,spinPulse:dr.bool,spinReverse:dr.bool,symbol:dr.oneOfType([dr.bool,dr.string]),title:dr.string,titleId:dr.string,transform:dr.oneOfType([dr.string,dr.object]),swapOpacity:dr.bool};var lE=fx.bind(null,h0.createElement);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const uE={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Oy={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},cE={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},hE=cE;function Np(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sg={exports:{}},u_;function dE(){return u_||(u_=1,function(u,c){(function(p){u.exports=p()})(function(){return function(){function p(v,x,T){function w(R,D){if(!x[R]){if(!v[R]){var C=typeof Np=="function"&&Np;if(!D&&C)return C(R,!0);if(a)return a(R,!0);var k=new Error("Cannot find module '"+R+"'");throw k.code="MODULE_NOT_FOUND",k}var V=x[R]={exports:{}};v[R][0].call(V.exports,function(N){var Q=v[R][1][N];return w(Q||N)},V,V.exports,p,v,x,T)}return x[R].exports}for(var a=typeof Np=="function"&&Np,L=0;L<T.length;L++)w(T[L]);return w}return p}()({1:[function(p,v,x){x.byteLength=k,x.toByteArray=N,x.fromByteArray=Te;for(var T=[],w=[],a=typeof Uint8Array<"u"?Uint8Array:Array,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0,D=L.length;R<D;++R)T[R]=L[R],w[L.charCodeAt(R)]=R;w[45]=62,w[95]=63;function C(xe){var ve=xe.length;if(ve%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Me=xe.indexOf("=");Me===-1&&(Me=ve);var ne=Me===ve?0:4-Me%4;return[Me,ne]}function k(xe){var ve=C(xe),Me=ve[0],ne=ve[1];return(Me+ne)*3/4-ne}function V(xe,ve,Me){return(ve+Me)*3/4-Me}function N(xe){var ve,Me=C(xe),ne=Me[0],ue=Me[1],M=new a(V(xe,ne,ue)),$=0,U=ue>0?ne-4:ne,de;for(de=0;de<U;de+=4)ve=w[xe.charCodeAt(de)]<<18|w[xe.charCodeAt(de+1)]<<12|w[xe.charCodeAt(de+2)]<<6|w[xe.charCodeAt(de+3)],M[$++]=ve>>16&255,M[$++]=ve>>8&255,M[$++]=ve&255;return ue===2&&(ve=w[xe.charCodeAt(de)]<<2|w[xe.charCodeAt(de+1)]>>4,M[$++]=ve&255),ue===1&&(ve=w[xe.charCodeAt(de)]<<10|w[xe.charCodeAt(de+1)]<<4|w[xe.charCodeAt(de+2)]>>2,M[$++]=ve>>8&255,M[$++]=ve&255),M}function Q(xe){return T[xe>>18&63]+T[xe>>12&63]+T[xe>>6&63]+T[xe&63]}function ce(xe,ve,Me){for(var ne,ue=[],M=ve;M<Me;M+=3)ne=(xe[M]<<16&16711680)+(xe[M+1]<<8&65280)+(xe[M+2]&255),ue.push(Q(ne));return ue.join("")}function Te(xe){for(var ve,Me=xe.length,ne=Me%3,ue=[],M=16383,$=0,U=Me-ne;$<U;$+=M)ue.push(ce(xe,$,$+M>U?U:$+M));return ne===1?(ve=xe[Me-1],ue.push(T[ve>>2]+T[ve<<4&63]+"==")):ne===2&&(ve=(xe[Me-2]<<8)+xe[Me-1],ue.push(T[ve>>10]+T[ve>>4&63]+T[ve<<2&63]+"=")),ue.join("")}},{}],2:[function(p,v,x){(function(T){(function(){var w=p("base64-js"),a=p("ieee754");x.Buffer=C,x.SlowBuffer=ne,x.INSPECT_MAX_BYTES=50;var L=2147483647;x.kMaxLength=L,C.TYPED_ARRAY_SUPPORT=R(),!C.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function R(){try{var ze=new Uint8Array(1);return ze.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ze.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}});function D(ze){if(ze>L)throw new RangeError('The value "'+ze+'" is invalid for option "size"');var G=new Uint8Array(ze);return G.__proto__=C.prototype,G}function C(ze,G,H){if(typeof ze=="number"){if(typeof G=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Q(ze)}return k(ze,G,H)}typeof Symbol<"u"&&Symbol.species!=null&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),C.poolSize=8192;function k(ze,G,H){if(typeof ze=="string")return ce(ze,G);if(ArrayBuffer.isView(ze))return Te(ze);if(ze==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ze);if(hn(ze,ArrayBuffer)||ze&&hn(ze.buffer,ArrayBuffer))return xe(ze,G,H);if(typeof ze=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ce=ze.valueOf&&ze.valueOf();if(Ce!=null&&Ce!==ze)return C.from(Ce,G,H);var rt=ve(ze);if(rt)return rt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ze[Symbol.toPrimitive]=="function")return C.from(ze[Symbol.toPrimitive]("string"),G,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ze)}C.from=function(ze,G,H){return k(ze,G,H)},C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array;function V(ze){if(typeof ze!="number")throw new TypeError('"size" argument must be of type number');if(ze<0)throw new RangeError('The value "'+ze+'" is invalid for option "size"')}function N(ze,G,H){return V(ze),ze<=0?D(ze):G!==void 0?typeof H=="string"?D(ze).fill(G,H):D(ze).fill(G):D(ze)}C.alloc=function(ze,G,H){return N(ze,G,H)};function Q(ze){return V(ze),D(ze<0?0:Me(ze)|0)}C.allocUnsafe=function(ze){return Q(ze)},C.allocUnsafeSlow=function(ze){return Q(ze)};function ce(ze,G){if((typeof G!="string"||G==="")&&(G="utf8"),!C.isEncoding(G))throw new TypeError("Unknown encoding: "+G);var H=ue(ze,G)|0,Ce=D(H),rt=Ce.write(ze,G);return rt!==H&&(Ce=Ce.slice(0,rt)),Ce}function Te(ze){for(var G=ze.length<0?0:Me(ze.length)|0,H=D(G),Ce=0;Ce<G;Ce+=1)H[Ce]=ze[Ce]&255;return H}function xe(ze,G,H){if(G<0||ze.byteLength<G)throw new RangeError('"offset" is outside of buffer bounds');if(ze.byteLength<G+(H||0))throw new RangeError('"length" is outside of buffer bounds');var Ce;return G===void 0&&H===void 0?Ce=new Uint8Array(ze):H===void 0?Ce=new Uint8Array(ze,G):Ce=new Uint8Array(ze,G,H),Ce.__proto__=C.prototype,Ce}function ve(ze){if(C.isBuffer(ze)){var G=Me(ze.length)|0,H=D(G);return H.length===0||ze.copy(H,0,0,G),H}if(ze.length!==void 0)return typeof ze.length!="number"||en(ze.length)?D(0):Te(ze);if(ze.type==="Buffer"&&Array.isArray(ze.data))return Te(ze.data)}function Me(ze){if(ze>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return ze|0}function ne(ze){return+ze!=ze&&(ze=0),C.alloc(+ze)}C.isBuffer=function(G){return G!=null&&G._isBuffer===!0&&G!==C.prototype},C.compare=function(G,H){if(hn(G,Uint8Array)&&(G=C.from(G,G.offset,G.byteLength)),hn(H,Uint8Array)&&(H=C.from(H,H.offset,H.byteLength)),!C.isBuffer(G)||!C.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(G===H)return 0;for(var Ce=G.length,rt=H.length,ct=0,Et=Math.min(Ce,rt);ct<Et;++ct)if(G[ct]!==H[ct]){Ce=G[ct],rt=H[ct];break}return Ce<rt?-1:rt<Ce?1:0},C.isEncoding=function(G){switch(String(G).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(G,H){if(!Array.isArray(G))throw new TypeError('"list" argument must be an Array of Buffers');if(G.length===0)return C.alloc(0);var Ce;if(H===void 0)for(H=0,Ce=0;Ce<G.length;++Ce)H+=G[Ce].length;var rt=C.allocUnsafe(H),ct=0;for(Ce=0;Ce<G.length;++Ce){var Et=G[Ce];if(hn(Et,Uint8Array)&&(Et=C.from(Et)),!C.isBuffer(Et))throw new TypeError('"list" argument must be an Array of Buffers');Et.copy(rt,ct),ct+=Et.length}return rt};function ue(ze,G){if(C.isBuffer(ze))return ze.length;if(ArrayBuffer.isView(ze)||hn(ze,ArrayBuffer))return ze.byteLength;if(typeof ze!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ze);var H=ze.length,Ce=arguments.length>2&&arguments[2]===!0;if(!Ce&&H===0)return 0;for(var rt=!1;;)switch(G){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return Jt(ze).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return at(ze).length;default:if(rt)return Ce?-1:Jt(ze).length;G=(""+G).toLowerCase(),rt=!0}}C.byteLength=ue;function M(ze,G,H){var Ce=!1;if((G===void 0||G<0)&&(G=0),G>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,G>>>=0,H<=G))return"";for(ze||(ze="utf8");;)switch(ze){case"hex":return Oe(this,G,H);case"utf8":case"utf-8":return oe(this,G,H);case"ascii":return he(this,G,H);case"latin1":case"binary":return Fe(this,G,H);case"base64":return te(this,G,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,G,H);default:if(Ce)throw new TypeError("Unknown encoding: "+ze);ze=(ze+"").toLowerCase(),Ce=!0}}C.prototype._isBuffer=!0;function $(ze,G,H){var Ce=ze[G];ze[G]=ze[H],ze[H]=Ce}C.prototype.swap16=function(){var G=this.length;if(G%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<G;H+=2)$(this,H,H+1);return this},C.prototype.swap32=function(){var G=this.length;if(G%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<G;H+=4)$(this,H,H+3),$(this,H+1,H+2);return this},C.prototype.swap64=function(){var G=this.length;if(G%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<G;H+=8)$(this,H,H+7),$(this,H+1,H+6),$(this,H+2,H+5),$(this,H+3,H+4);return this},C.prototype.toString=function(){var G=this.length;return G===0?"":arguments.length===0?oe(this,0,G):M.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(G){if(!C.isBuffer(G))throw new TypeError("Argument must be a Buffer");return this===G?!0:C.compare(this,G)===0},C.prototype.inspect=function(){var G="",H=x.INSPECT_MAX_BYTES;return G=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(G+=" ... "),"<Buffer "+G+">"},C.prototype.compare=function(G,H,Ce,rt,ct){if(hn(G,Uint8Array)&&(G=C.from(G,G.offset,G.byteLength)),!C.isBuffer(G))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof G);if(H===void 0&&(H=0),Ce===void 0&&(Ce=G?G.length:0),rt===void 0&&(rt=0),ct===void 0&&(ct=this.length),H<0||Ce>G.length||rt<0||ct>this.length)throw new RangeError("out of range index");if(rt>=ct&&H>=Ce)return 0;if(rt>=ct)return-1;if(H>=Ce)return 1;if(H>>>=0,Ce>>>=0,rt>>>=0,ct>>>=0,this===G)return 0;for(var Et=ct-rt,ye=Ce-H,z=Math.min(Et,ye),q=this.slice(rt,ct),Re=G.slice(H,Ce),Je=0;Je<z;++Je)if(q[Je]!==Re[Je]){Et=q[Je],ye=Re[Je];break}return Et<ye?-1:ye<Et?1:0};function U(ze,G,H,Ce,rt){if(ze.length===0)return-1;if(typeof H=="string"?(Ce=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,en(H)&&(H=rt?0:ze.length-1),H<0&&(H=ze.length+H),H>=ze.length){if(rt)return-1;H=ze.length-1}else if(H<0)if(rt)H=0;else return-1;if(typeof G=="string"&&(G=C.from(G,Ce)),C.isBuffer(G))return G.length===0?-1:de(ze,G,H,Ce,rt);if(typeof G=="number")return G=G&255,typeof Uint8Array.prototype.indexOf=="function"?rt?Uint8Array.prototype.indexOf.call(ze,G,H):Uint8Array.prototype.lastIndexOf.call(ze,G,H):de(ze,[G],H,Ce,rt);throw new TypeError("val must be string, number or Buffer")}function de(ze,G,H,Ce,rt){var ct=1,Et=ze.length,ye=G.length;if(Ce!==void 0&&(Ce=String(Ce).toLowerCase(),Ce==="ucs2"||Ce==="ucs-2"||Ce==="utf16le"||Ce==="utf-16le")){if(ze.length<2||G.length<2)return-1;ct=2,Et/=2,ye/=2,H/=2}function z(Qe,Ot){return ct===1?Qe[Ot]:Qe.readUInt16BE(Ot*ct)}var q;if(rt){var Re=-1;for(q=H;q<Et;q++)if(z(ze,q)===z(G,Re===-1?0:q-Re)){if(Re===-1&&(Re=q),q-Re+1===ye)return Re*ct}else Re!==-1&&(q-=q-Re),Re=-1}else for(H+ye>Et&&(H=Et-ye),q=H;q>=0;q--){for(var Je=!0,ft=0;ft<ye;ft++)if(z(ze,q+ft)!==z(G,ft)){Je=!1;break}if(Je)return q}return-1}C.prototype.includes=function(G,H,Ce){return this.indexOf(G,H,Ce)!==-1},C.prototype.indexOf=function(G,H,Ce){return U(this,G,H,Ce,!0)},C.prototype.lastIndexOf=function(G,H,Ce){return U(this,G,H,Ce,!1)};function K(ze,G,H,Ce){H=Number(H)||0;var rt=ze.length-H;Ce?(Ce=Number(Ce),Ce>rt&&(Ce=rt)):Ce=rt;var ct=G.length;Ce>ct/2&&(Ce=ct/2);for(var Et=0;Et<Ce;++Et){var ye=parseInt(G.substr(Et*2,2),16);if(en(ye))return Et;ze[H+Et]=ye}return Et}function j(ze,G,H,Ce){return kn(Jt(G,ze.length-H),ze,H,Ce)}function W(ze,G,H,Ce){return kn(cn(G),ze,H,Ce)}function J(ze,G,H,Ce){return W(ze,G,H,Ce)}function re(ze,G,H,Ce){return kn(at(G),ze,H,Ce)}function le(ze,G,H,Ce){return kn(Tn(G,ze.length-H),ze,H,Ce)}C.prototype.write=function(G,H,Ce,rt){if(H===void 0)rt="utf8",Ce=this.length,H=0;else if(Ce===void 0&&typeof H=="string")rt=H,Ce=this.length,H=0;else if(isFinite(H))H=H>>>0,isFinite(Ce)?(Ce=Ce>>>0,rt===void 0&&(rt="utf8")):(rt=Ce,Ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ct=this.length-H;if((Ce===void 0||Ce>ct)&&(Ce=ct),G.length>0&&(Ce<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");rt||(rt="utf8");for(var Et=!1;;)switch(rt){case"hex":return K(this,G,H,Ce);case"utf8":case"utf-8":return j(this,G,H,Ce);case"ascii":return W(this,G,H,Ce);case"latin1":case"binary":return J(this,G,H,Ce);case"base64":return re(this,G,H,Ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,G,H,Ce);default:if(Et)throw new TypeError("Unknown encoding: "+rt);rt=(""+rt).toLowerCase(),Et=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function te(ze,G,H){return G===0&&H===ze.length?w.fromByteArray(ze):w.fromByteArray(ze.slice(G,H))}function oe(ze,G,H){H=Math.min(ze.length,H);for(var Ce=[],rt=G;rt<H;){var ct=ze[rt],Et=null,ye=ct>239?4:ct>223?3:ct>191?2:1;if(rt+ye<=H){var z,q,Re,Je;switch(ye){case 1:ct<128&&(Et=ct);break;case 2:z=ze[rt+1],(z&192)===128&&(Je=(ct&31)<<6|z&63,Je>127&&(Et=Je));break;case 3:z=ze[rt+1],q=ze[rt+2],(z&192)===128&&(q&192)===128&&(Je=(ct&15)<<12|(z&63)<<6|q&63,Je>2047&&(Je<55296||Je>57343)&&(Et=Je));break;case 4:z=ze[rt+1],q=ze[rt+2],Re=ze[rt+3],(z&192)===128&&(q&192)===128&&(Re&192)===128&&(Je=(ct&15)<<18|(z&63)<<12|(q&63)<<6|Re&63,Je>65535&&Je<1114112&&(Et=Je))}}Et===null?(Et=65533,ye=1):Et>65535&&(Et-=65536,Ce.push(Et>>>10&1023|55296),Et=56320|Et&1023),Ce.push(Et),rt+=ye}return be(Ce)}var _e=4096;function be(ze){var G=ze.length;if(G<=_e)return String.fromCharCode.apply(String,ze);for(var H="",Ce=0;Ce<G;)H+=String.fromCharCode.apply(String,ze.slice(Ce,Ce+=_e));return H}function he(ze,G,H){var Ce="";H=Math.min(ze.length,H);for(var rt=G;rt<H;++rt)Ce+=String.fromCharCode(ze[rt]&127);return Ce}function Fe(ze,G,H){var Ce="";H=Math.min(ze.length,H);for(var rt=G;rt<H;++rt)Ce+=String.fromCharCode(ze[rt]);return Ce}function Oe(ze,G,H){var Ce=ze.length;(!G||G<0)&&(G=0),(!H||H<0||H>Ce)&&(H=Ce);for(var rt="",ct=G;ct<H;++ct)rt+=kt(ze[ct]);return rt}function De(ze,G,H){for(var Ce=ze.slice(G,H),rt="",ct=0;ct<Ce.length;ct+=2)rt+=String.fromCharCode(Ce[ct]+Ce[ct+1]*256);return rt}C.prototype.slice=function(G,H){var Ce=this.length;G=~~G,H=H===void 0?Ce:~~H,G<0?(G+=Ce,G<0&&(G=0)):G>Ce&&(G=Ce),H<0?(H+=Ce,H<0&&(H=0)):H>Ce&&(H=Ce),H<G&&(H=G);var rt=this.subarray(G,H);return rt.__proto__=C.prototype,rt};function Ke(ze,G,H){if(ze%1!==0||ze<0)throw new RangeError("offset is not uint");if(ze+G>H)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUIntLE=function(G,H,Ce){G=G>>>0,H=H>>>0,Ce||Ke(G,H,this.length);for(var rt=this[G],ct=1,Et=0;++Et<H&&(ct*=256);)rt+=this[G+Et]*ct;return rt},C.prototype.readUIntBE=function(G,H,Ce){G=G>>>0,H=H>>>0,Ce||Ke(G,H,this.length);for(var rt=this[G+--H],ct=1;H>0&&(ct*=256);)rt+=this[G+--H]*ct;return rt},C.prototype.readUInt8=function(G,H){return G=G>>>0,H||Ke(G,1,this.length),this[G]},C.prototype.readUInt16LE=function(G,H){return G=G>>>0,H||Ke(G,2,this.length),this[G]|this[G+1]<<8},C.prototype.readUInt16BE=function(G,H){return G=G>>>0,H||Ke(G,2,this.length),this[G]<<8|this[G+1]},C.prototype.readUInt32LE=function(G,H){return G=G>>>0,H||Ke(G,4,this.length),(this[G]|this[G+1]<<8|this[G+2]<<16)+this[G+3]*16777216},C.prototype.readUInt32BE=function(G,H){return G=G>>>0,H||Ke(G,4,this.length),this[G]*16777216+(this[G+1]<<16|this[G+2]<<8|this[G+3])},C.prototype.readIntLE=function(G,H,Ce){G=G>>>0,H=H>>>0,Ce||Ke(G,H,this.length);for(var rt=this[G],ct=1,Et=0;++Et<H&&(ct*=256);)rt+=this[G+Et]*ct;return ct*=128,rt>=ct&&(rt-=Math.pow(2,8*H)),rt},C.prototype.readIntBE=function(G,H,Ce){G=G>>>0,H=H>>>0,Ce||Ke(G,H,this.length);for(var rt=H,ct=1,Et=this[G+--rt];rt>0&&(ct*=256);)Et+=this[G+--rt]*ct;return ct*=128,Et>=ct&&(Et-=Math.pow(2,8*H)),Et},C.prototype.readInt8=function(G,H){return G=G>>>0,H||Ke(G,1,this.length),this[G]&128?(255-this[G]+1)*-1:this[G]},C.prototype.readInt16LE=function(G,H){G=G>>>0,H||Ke(G,2,this.length);var Ce=this[G]|this[G+1]<<8;return Ce&32768?Ce|4294901760:Ce},C.prototype.readInt16BE=function(G,H){G=G>>>0,H||Ke(G,2,this.length);var Ce=this[G+1]|this[G]<<8;return Ce&32768?Ce|4294901760:Ce},C.prototype.readInt32LE=function(G,H){return G=G>>>0,H||Ke(G,4,this.length),this[G]|this[G+1]<<8|this[G+2]<<16|this[G+3]<<24},C.prototype.readInt32BE=function(G,H){return G=G>>>0,H||Ke(G,4,this.length),this[G]<<24|this[G+1]<<16|this[G+2]<<8|this[G+3]},C.prototype.readFloatLE=function(G,H){return G=G>>>0,H||Ke(G,4,this.length),a.read(this,G,!0,23,4)},C.prototype.readFloatBE=function(G,H){return G=G>>>0,H||Ke(G,4,this.length),a.read(this,G,!1,23,4)},C.prototype.readDoubleLE=function(G,H){return G=G>>>0,H||Ke(G,8,this.length),a.read(this,G,!0,52,8)},C.prototype.readDoubleBE=function(G,H){return G=G>>>0,H||Ke(G,8,this.length),a.read(this,G,!1,52,8)};function tt(ze,G,H,Ce,rt,ct){if(!C.isBuffer(ze))throw new TypeError('"buffer" argument must be a Buffer instance');if(G>rt||G<ct)throw new RangeError('"value" argument is out of bounds');if(H+Ce>ze.length)throw new RangeError("Index out of range")}C.prototype.writeUIntLE=function(G,H,Ce,rt){if(G=+G,H=H>>>0,Ce=Ce>>>0,!rt){var ct=Math.pow(2,8*Ce)-1;tt(this,G,H,Ce,ct,0)}var Et=1,ye=0;for(this[H]=G&255;++ye<Ce&&(Et*=256);)this[H+ye]=G/Et&255;return H+Ce},C.prototype.writeUIntBE=function(G,H,Ce,rt){if(G=+G,H=H>>>0,Ce=Ce>>>0,!rt){var ct=Math.pow(2,8*Ce)-1;tt(this,G,H,Ce,ct,0)}var Et=Ce-1,ye=1;for(this[H+Et]=G&255;--Et>=0&&(ye*=256);)this[H+Et]=G/ye&255;return H+Ce},C.prototype.writeUInt8=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,1,255,0),this[H]=G&255,H+1},C.prototype.writeUInt16LE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,2,65535,0),this[H]=G&255,this[H+1]=G>>>8,H+2},C.prototype.writeUInt16BE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,2,65535,0),this[H]=G>>>8,this[H+1]=G&255,H+2},C.prototype.writeUInt32LE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,4,4294967295,0),this[H+3]=G>>>24,this[H+2]=G>>>16,this[H+1]=G>>>8,this[H]=G&255,H+4},C.prototype.writeUInt32BE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,4,4294967295,0),this[H]=G>>>24,this[H+1]=G>>>16,this[H+2]=G>>>8,this[H+3]=G&255,H+4},C.prototype.writeIntLE=function(G,H,Ce,rt){if(G=+G,H=H>>>0,!rt){var ct=Math.pow(2,8*Ce-1);tt(this,G,H,Ce,ct-1,-ct)}var Et=0,ye=1,z=0;for(this[H]=G&255;++Et<Ce&&(ye*=256);)G<0&&z===0&&this[H+Et-1]!==0&&(z=1),this[H+Et]=(G/ye>>0)-z&255;return H+Ce},C.prototype.writeIntBE=function(G,H,Ce,rt){if(G=+G,H=H>>>0,!rt){var ct=Math.pow(2,8*Ce-1);tt(this,G,H,Ce,ct-1,-ct)}var Et=Ce-1,ye=1,z=0;for(this[H+Et]=G&255;--Et>=0&&(ye*=256);)G<0&&z===0&&this[H+Et+1]!==0&&(z=1),this[H+Et]=(G/ye>>0)-z&255;return H+Ce},C.prototype.writeInt8=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,1,127,-128),G<0&&(G=255+G+1),this[H]=G&255,H+1},C.prototype.writeInt16LE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,2,32767,-32768),this[H]=G&255,this[H+1]=G>>>8,H+2},C.prototype.writeInt16BE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,2,32767,-32768),this[H]=G>>>8,this[H+1]=G&255,H+2},C.prototype.writeInt32LE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,4,2147483647,-2147483648),this[H]=G&255,this[H+1]=G>>>8,this[H+2]=G>>>16,this[H+3]=G>>>24,H+4},C.prototype.writeInt32BE=function(G,H,Ce){return G=+G,H=H>>>0,Ce||tt(this,G,H,4,2147483647,-2147483648),G<0&&(G=4294967295+G+1),this[H]=G>>>24,this[H+1]=G>>>16,this[H+2]=G>>>8,this[H+3]=G&255,H+4};function pt(ze,G,H,Ce,rt,ct){if(H+Ce>ze.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function _t(ze,G,H,Ce,rt){return G=+G,H=H>>>0,rt||pt(ze,G,H,4),a.write(ze,G,H,Ce,23,4),H+4}C.prototype.writeFloatLE=function(G,H,Ce){return _t(this,G,H,!0,Ce)},C.prototype.writeFloatBE=function(G,H,Ce){return _t(this,G,H,!1,Ce)};function Tt(ze,G,H,Ce,rt){return G=+G,H=H>>>0,rt||pt(ze,G,H,8),a.write(ze,G,H,Ce,52,8),H+8}C.prototype.writeDoubleLE=function(G,H,Ce){return Tt(this,G,H,!0,Ce)},C.prototype.writeDoubleBE=function(G,H,Ce){return Tt(this,G,H,!1,Ce)},C.prototype.copy=function(G,H,Ce,rt){if(!C.isBuffer(G))throw new TypeError("argument should be a Buffer");if(Ce||(Ce=0),!rt&&rt!==0&&(rt=this.length),H>=G.length&&(H=G.length),H||(H=0),rt>0&&rt<Ce&&(rt=Ce),rt===Ce||G.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(Ce<0||Ce>=this.length)throw new RangeError("Index out of range");if(rt<0)throw new RangeError("sourceEnd out of bounds");rt>this.length&&(rt=this.length),G.length-H<rt-Ce&&(rt=G.length-H+Ce);var ct=rt-Ce;if(this===G&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(H,Ce,rt);else if(this===G&&Ce<H&&H<rt)for(var Et=ct-1;Et>=0;--Et)G[Et+H]=this[Et+Ce];else Uint8Array.prototype.set.call(G,this.subarray(Ce,rt),H);return ct},C.prototype.fill=function(G,H,Ce,rt){if(typeof G=="string"){if(typeof H=="string"?(rt=H,H=0,Ce=this.length):typeof Ce=="string"&&(rt=Ce,Ce=this.length),rt!==void 0&&typeof rt!="string")throw new TypeError("encoding must be a string");if(typeof rt=="string"&&!C.isEncoding(rt))throw new TypeError("Unknown encoding: "+rt);if(G.length===1){var ct=G.charCodeAt(0);(rt==="utf8"&&ct<128||rt==="latin1")&&(G=ct)}}else typeof G=="number"&&(G=G&255);if(H<0||this.length<H||this.length<Ce)throw new RangeError("Out of range index");if(Ce<=H)return this;H=H>>>0,Ce=Ce===void 0?this.length:Ce>>>0,G||(G=0);var Et;if(typeof G=="number")for(Et=H;Et<Ce;++Et)this[Et]=G;else{var ye=C.isBuffer(G)?G:C.from(G,rt),z=ye.length;if(z===0)throw new TypeError('The value "'+G+'" is invalid for argument "value"');for(Et=0;Et<Ce-H;++Et)this[Et+H]=ye[Et%z]}return this};var Lt=/[^+/0-9A-Za-z-_]/g;function It(ze){if(ze=ze.split("=")[0],ze=ze.trim().replace(Lt,""),ze.length<2)return"";for(;ze.length%4!==0;)ze=ze+"=";return ze}function kt(ze){return ze<16?"0"+ze.toString(16):ze.toString(16)}function Jt(ze,G){G=G||1/0;for(var H,Ce=ze.length,rt=null,ct=[],Et=0;Et<Ce;++Et){if(H=ze.charCodeAt(Et),H>55295&&H<57344){if(!rt){if(H>56319){(G-=3)>-1&&ct.push(239,191,189);continue}else if(Et+1===Ce){(G-=3)>-1&&ct.push(239,191,189);continue}rt=H;continue}if(H<56320){(G-=3)>-1&&ct.push(239,191,189),rt=H;continue}H=(rt-55296<<10|H-56320)+65536}else rt&&(G-=3)>-1&&ct.push(239,191,189);if(rt=null,H<128){if((G-=1)<0)break;ct.push(H)}else if(H<2048){if((G-=2)<0)break;ct.push(H>>6|192,H&63|128)}else if(H<65536){if((G-=3)<0)break;ct.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if((G-=4)<0)break;ct.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return ct}function cn(ze){for(var G=[],H=0;H<ze.length;++H)G.push(ze.charCodeAt(H)&255);return G}function Tn(ze,G){for(var H,Ce,rt,ct=[],Et=0;Et<ze.length&&!((G-=2)<0);++Et)H=ze.charCodeAt(Et),Ce=H>>8,rt=H%256,ct.push(rt),ct.push(Ce);return ct}function at(ze){return w.toByteArray(It(ze))}function kn(ze,G,H,Ce){for(var rt=0;rt<Ce&&!(rt+H>=G.length||rt>=ze.length);++rt)G[rt+H]=ze[rt];return rt}function hn(ze,G){return ze instanceof G||ze!=null&&ze.constructor!=null&&ze.constructor.name!=null&&ze.constructor.name===G.name}function en(ze){return ze!==ze}}).call(this)}).call(this,p("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(p,v,x){const T=p("./validator"),w=p("./xmlparser/XMLParser"),a=p("./xmlbuilder/json2xml");v.exports={XMLParser:w,XMLValidator:T,XMLBuilder:a}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(p,v,x){const T=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",w=T+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",a="["+T+"]["+w+"]*",L=new RegExp("^"+a+"$"),R=function(C,k){const V=[];let N=k.exec(C);for(;N;){const Q=[];Q.startIndex=k.lastIndex-N[0].length;const ce=N.length;for(let Te=0;Te<ce;Te++)Q.push(N[Te]);V.push(Q),N=k.exec(C)}return V},D=function(C){const k=L.exec(C);return!(k===null||typeof k>"u")};x.isExist=function(C){return typeof C<"u"},x.isEmptyObject=function(C){return Object.keys(C).length===0},x.merge=function(C,k,V){if(k){const N=Object.keys(k),Q=N.length;for(let ce=0;ce<Q;ce++)V==="strict"?C[N[ce]]=[k[N[ce]]]:C[N[ce]]=k[N[ce]]}},x.getValue=function(C){return x.isExist(C)?C:""},x.isName=D,x.getAllMatches=R,x.nameRegexp=a},{}],5:[function(p,v,x){const T=p("./util"),w={allowBooleanAttributes:!1,unpairedTags:[]};x.validate=function(ue,M){M=Object.assign({},w,M);const $=[];let U=!1,de=!1;ue[0]==="\uFEFF"&&(ue=ue.substr(1));for(let K=0;K<ue.length;K++)if(ue[K]==="<"&&ue[K+1]==="?"){if(K+=2,K=L(ue,K),K.err)return K}else if(ue[K]==="<"){let j=K;if(K++,ue[K]==="!"){K=R(ue,K);continue}else{let W=!1;ue[K]==="/"&&(W=!0,K++);let J="";for(;K<ue.length&&ue[K]!==">"&&ue[K]!==" "&&ue[K]!=="	"&&ue[K]!==`
`&&ue[K]!=="\r";K++)J+=ue[K];if(J=J.trim(),J[J.length-1]==="/"&&(J=J.substring(0,J.length-1),K--),!ve(J)){let te;return J.trim().length===0?te="Invalid space after '<'.":te="Tag '"+J+"' is an invalid name.",Te("InvalidTag",te,Me(ue,K))}const re=k(ue,K);if(re===!1)return Te("InvalidAttr","Attributes for '"+J+"' have open quote.",Me(ue,K));let le=re.value;if(K=re.index,le[le.length-1]==="/"){const te=K-le.length;le=le.substring(0,le.length-1);const oe=N(le,M);if(oe===!0)U=!0;else return Te(oe.err.code,oe.err.msg,Me(ue,te+oe.err.line))}else if(W)if(re.tagClosed){if(le.trim().length>0)return Te("InvalidTag","Closing tag '"+J+"' can't have attributes or invalid starting.",Me(ue,j));{const te=$.pop();if(J!==te.tagName){let oe=Me(ue,te.tagStartPos);return Te("InvalidTag","Expected closing tag '"+te.tagName+"' (opened in line "+oe.line+", col "+oe.col+") instead of closing tag '"+J+"'.",Me(ue,j))}$.length==0&&(de=!0)}}else return Te("InvalidTag","Closing tag '"+J+"' doesn't have proper closing.",Me(ue,K));else{const te=N(le,M);if(te!==!0)return Te(te.err.code,te.err.msg,Me(ue,K-le.length+te.err.line));if(de===!0)return Te("InvalidXml","Multiple possible root nodes found.",Me(ue,K));M.unpairedTags.indexOf(J)!==-1||$.push({tagName:J,tagStartPos:j}),U=!0}for(K++;K<ue.length;K++)if(ue[K]==="<")if(ue[K+1]==="!"){K++,K=R(ue,K);continue}else if(ue[K+1]==="?"){if(K=L(ue,++K),K.err)return K}else break;else if(ue[K]==="&"){const te=ce(ue,K);if(te==-1)return Te("InvalidChar","char '&' is not expected.",Me(ue,K));K=te}else if(de===!0&&!a(ue[K]))return Te("InvalidXml","Extra text at the end",Me(ue,K));ue[K]==="<"&&K--}}else{if(a(ue[K]))continue;return Te("InvalidChar","char '"+ue[K]+"' is not expected.",Me(ue,K))}if(U){if($.length==1)return Te("InvalidTag","Unclosed tag '"+$[0].tagName+"'.",Me(ue,$[0].tagStartPos));if($.length>0)return Te("InvalidXml","Invalid '"+JSON.stringify($.map(K=>K.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Te("InvalidXml","Start tag expected.",1);return!0};function a(ue){return ue===" "||ue==="	"||ue===`
`||ue==="\r"}function L(ue,M){const $=M;for(;M<ue.length;M++)if(ue[M]=="?"||ue[M]==" "){const U=ue.substr($,M-$);if(M>5&&U==="xml")return Te("InvalidXml","XML declaration allowed only at the start of the document.",Me(ue,M));if(ue[M]=="?"&&ue[M+1]==">"){M++;break}else continue}return M}function R(ue,M){if(ue.length>M+5&&ue[M+1]==="-"&&ue[M+2]==="-"){for(M+=3;M<ue.length;M++)if(ue[M]==="-"&&ue[M+1]==="-"&&ue[M+2]===">"){M+=2;break}}else if(ue.length>M+8&&ue[M+1]==="D"&&ue[M+2]==="O"&&ue[M+3]==="C"&&ue[M+4]==="T"&&ue[M+5]==="Y"&&ue[M+6]==="P"&&ue[M+7]==="E"){let $=1;for(M+=8;M<ue.length;M++)if(ue[M]==="<")$++;else if(ue[M]===">"&&($--,$===0))break}else if(ue.length>M+9&&ue[M+1]==="["&&ue[M+2]==="C"&&ue[M+3]==="D"&&ue[M+4]==="A"&&ue[M+5]==="T"&&ue[M+6]==="A"&&ue[M+7]==="["){for(M+=8;M<ue.length;M++)if(ue[M]==="]"&&ue[M+1]==="]"&&ue[M+2]===">"){M+=2;break}}return M}const D='"',C="'";function k(ue,M){let $="",U="",de=!1;for(;M<ue.length;M++){if(ue[M]===D||ue[M]===C)U===""?U=ue[M]:U!==ue[M]||(U="");else if(ue[M]===">"&&U===""){de=!0;break}$+=ue[M]}return U!==""?!1:{value:$,index:M,tagClosed:de}}const V=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function N(ue,M){const $=T.getAllMatches(ue,V),U={};for(let de=0;de<$.length;de++){if($[de][1].length===0)return Te("InvalidAttr","Attribute '"+$[de][2]+"' has no space in starting.",ne($[de]));if($[de][3]!==void 0&&$[de][4]===void 0)return Te("InvalidAttr","Attribute '"+$[de][2]+"' is without value.",ne($[de]));if($[de][3]===void 0&&!M.allowBooleanAttributes)return Te("InvalidAttr","boolean attribute '"+$[de][2]+"' is not allowed.",ne($[de]));const K=$[de][2];if(!xe(K))return Te("InvalidAttr","Attribute '"+K+"' is an invalid name.",ne($[de]));if(!U.hasOwnProperty(K))U[K]=1;else return Te("InvalidAttr","Attribute '"+K+"' is repeated.",ne($[de]))}return!0}function Q(ue,M){let $=/\d/;for(ue[M]==="x"&&(M++,$=/[\da-fA-F]/);M<ue.length;M++){if(ue[M]===";")return M;if(!ue[M].match($))break}return-1}function ce(ue,M){if(M++,ue[M]===";")return-1;if(ue[M]==="#")return M++,Q(ue,M);let $=0;for(;M<ue.length;M++,$++)if(!(ue[M].match(/\w/)&&$<20)){if(ue[M]===";")break;return-1}return M}function Te(ue,M,$){return{err:{code:ue,msg:M,line:$.line||$,col:$.col}}}function xe(ue){return T.isName(ue)}function ve(ue){return T.isName(ue)}function Me(ue,M){const $=ue.substring(0,M).split(/\r?\n/);return{line:$.length,col:$[$.length-1].length+1}}function ne(ue){return ue.startIndex+ue[1].length}},{"./util":4}],6:[function(p,v,x){const T=p("./orderedJs2Xml"),w={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(C,k){return k},attributeValueProcessor:function(C,k){return k},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function a(C){this.options=Object.assign({},w,C),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=D),this.processTextOrObjNode=L,this.options.format?(this.indentate=R,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}a.prototype.build=function(C){return this.options.preserveOrder?T(C,this.options):(Array.isArray(C)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(C={[this.options.arrayNodeName]:C}),this.j2x(C,0).val)},a.prototype.j2x=function(C,k){let V="",N="";for(let Q in C)if(Object.prototype.hasOwnProperty.call(C,Q))if(typeof C[Q]>"u")this.isAttribute(Q)&&(N+="");else if(C[Q]===null)this.isAttribute(Q)?N+="":Q[0]==="?"?N+=this.indentate(k)+"<"+Q+"?"+this.tagEndChar:N+=this.indentate(k)+"<"+Q+"/"+this.tagEndChar;else if(C[Q]instanceof Date)N+=this.buildTextValNode(C[Q],Q,"",k);else if(typeof C[Q]!="object"){const ce=this.isAttribute(Q);if(ce)V+=this.buildAttrPairStr(ce,""+C[Q]);else if(Q===this.options.textNodeName){let Te=this.options.tagValueProcessor(Q,""+C[Q]);N+=this.replaceEntitiesValue(Te)}else N+=this.buildTextValNode(C[Q],Q,"",k)}else if(Array.isArray(C[Q])){const ce=C[Q].length;let Te="";for(let xe=0;xe<ce;xe++){const ve=C[Q][xe];typeof ve>"u"||(ve===null?Q[0]==="?"?N+=this.indentate(k)+"<"+Q+"?"+this.tagEndChar:N+=this.indentate(k)+"<"+Q+"/"+this.tagEndChar:typeof ve=="object"?this.options.oneListGroup?Te+=this.j2x(ve,k+1).val:Te+=this.processTextOrObjNode(ve,Q,k):Te+=this.buildTextValNode(ve,Q,"",k))}this.options.oneListGroup&&(Te=this.buildObjectNode(Te,Q,"",k)),N+=Te}else if(this.options.attributesGroupName&&Q===this.options.attributesGroupName){const ce=Object.keys(C[Q]),Te=ce.length;for(let xe=0;xe<Te;xe++)V+=this.buildAttrPairStr(ce[xe],""+C[Q][ce[xe]])}else N+=this.processTextOrObjNode(C[Q],Q,k);return{attrStr:V,val:N}},a.prototype.buildAttrPairStr=function(C,k){return k=this.options.attributeValueProcessor(C,""+k),k=this.replaceEntitiesValue(k),this.options.suppressBooleanAttributes&&k==="true"?" "+C:" "+C+'="'+k+'"'};function L(C,k,V){const N=this.j2x(C,V+1);return C[this.options.textNodeName]!==void 0&&Object.keys(C).length===1?this.buildTextValNode(C[this.options.textNodeName],k,N.attrStr,V):this.buildObjectNode(N.val,k,N.attrStr,V)}a.prototype.buildObjectNode=function(C,k,V,N){if(C==="")return k[0]==="?"?this.indentate(N)+"<"+k+V+"?"+this.tagEndChar:this.indentate(N)+"<"+k+V+this.closeTag(k)+this.tagEndChar;{let Q="</"+k+this.tagEndChar,ce="";return k[0]==="?"&&(ce="?",Q=""),(V||V==="")&&C.indexOf("<")===-1?this.indentate(N)+"<"+k+V+ce+">"+C+Q:this.options.commentPropName!==!1&&k===this.options.commentPropName&&ce.length===0?this.indentate(N)+`<!--${C}-->`+this.newLine:this.indentate(N)+"<"+k+V+ce+this.tagEndChar+C+this.indentate(N)+Q}},a.prototype.closeTag=function(C){let k="";return this.options.unpairedTags.indexOf(C)!==-1?this.options.suppressUnpairedNode||(k="/"):this.options.suppressEmptyNode?k="/":k=`></${C}`,k},a.prototype.buildTextValNode=function(C,k,V,N){if(this.options.cdataPropName!==!1&&k===this.options.cdataPropName)return this.indentate(N)+`<![CDATA[${C}]]>`+this.newLine;if(this.options.commentPropName!==!1&&k===this.options.commentPropName)return this.indentate(N)+`<!--${C}-->`+this.newLine;if(k[0]==="?")return this.indentate(N)+"<"+k+V+"?"+this.tagEndChar;{let Q=this.options.tagValueProcessor(k,C);return Q=this.replaceEntitiesValue(Q),Q===""?this.indentate(N)+"<"+k+V+this.closeTag(k)+this.tagEndChar:this.indentate(N)+"<"+k+V+">"+Q+"</"+k+this.tagEndChar}},a.prototype.replaceEntitiesValue=function(C){if(C&&C.length>0&&this.options.processEntities)for(let k=0;k<this.options.entities.length;k++){const V=this.options.entities[k];C=C.replace(V.regex,V.val)}return C};function R(C){return this.options.indentBy.repeat(C)}function D(C){return C.startsWith(this.options.attributeNamePrefix)&&C!==this.options.textNodeName?C.substr(this.attrPrefixLen):!1}v.exports=a},{"./orderedJs2Xml":7}],7:[function(p,v,x){const T=`
`;function w(k,V){let N="";return V.format&&V.indentBy.length>0&&(N=T),a(k,V,"",N)}function a(k,V,N,Q){let ce="",Te=!1;for(let xe=0;xe<k.length;xe++){const ve=k[xe],Me=L(ve);if(Me===void 0)continue;let ne="";if(N.length===0?ne=Me:ne=`${N}.${Me}`,Me===V.textNodeName){let de=ve[Me];D(ne,V)||(de=V.tagValueProcessor(Me,de),de=C(de,V)),Te&&(ce+=Q),ce+=de,Te=!1;continue}else if(Me===V.cdataPropName){Te&&(ce+=Q),ce+=`<![CDATA[${ve[Me][0][V.textNodeName]}]]>`,Te=!1;continue}else if(Me===V.commentPropName){ce+=Q+`<!--${ve[Me][0][V.textNodeName]}-->`,Te=!0;continue}else if(Me[0]==="?"){const de=R(ve[":@"],V),K=Me==="?xml"?"":Q;let j=ve[Me][0][V.textNodeName];j=j.length!==0?" "+j:"",ce+=K+`<${Me}${j}${de}?>`,Te=!0;continue}let ue=Q;ue!==""&&(ue+=V.indentBy);const M=R(ve[":@"],V),$=Q+`<${Me}${M}`,U=a(ve[Me],V,ne,ue);V.unpairedTags.indexOf(Me)!==-1?V.suppressUnpairedNode?ce+=$+">":ce+=$+"/>":(!U||U.length===0)&&V.suppressEmptyNode?ce+=$+"/>":U&&U.endsWith(">")?ce+=$+`>${U}${Q}</${Me}>`:(ce+=$+">",U&&Q!==""&&(U.includes("/>")||U.includes("</"))?ce+=Q+V.indentBy+U+Q:ce+=U,ce+=`</${Me}>`),Te=!0}return ce}function L(k){const V=Object.keys(k);for(let N=0;N<V.length;N++){const Q=V[N];if(k.hasOwnProperty(Q)&&Q!==":@")return Q}}function R(k,V){let N="";if(k&&!V.ignoreAttributes)for(let Q in k){if(!k.hasOwnProperty(Q))continue;let ce=V.attributeValueProcessor(Q,k[Q]);ce=C(ce,V),ce===!0&&V.suppressBooleanAttributes?N+=` ${Q.substr(V.attributeNamePrefix.length)}`:N+=` ${Q.substr(V.attributeNamePrefix.length)}="${ce}"`}return N}function D(k,V){k=k.substr(0,k.length-V.textNodeName.length-1);let N=k.substr(k.lastIndexOf(".")+1);for(let Q in V.stopNodes)if(V.stopNodes[Q]===k||V.stopNodes[Q]==="*."+N)return!0;return!1}function C(k,V){if(k&&k.length>0&&V.processEntities)for(let N=0;N<V.entities.length;N++){const Q=V.entities[N];k=k.replace(Q.regex,Q.val)}return k}v.exports=w},{}],8:[function(p,v,x){const T=p("../util");function w(N,Q){const ce={};if(N[Q+3]==="O"&&N[Q+4]==="C"&&N[Q+5]==="T"&&N[Q+6]==="Y"&&N[Q+7]==="P"&&N[Q+8]==="E"){Q=Q+9;let Te=1,xe=!1,ve=!1,Me="";for(;Q<N.length;Q++)if(N[Q]==="<"&&!ve){if(xe&&R(N,Q))Q+=7,[entityName,val,Q]=a(N,Q+1),val.indexOf("&")===-1&&(ce[V(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(xe&&D(N,Q))Q+=8;else if(xe&&C(N,Q))Q+=8;else if(xe&&k(N,Q))Q+=9;else if(L)ve=!0;else throw new Error("Invalid DOCTYPE");Te++,Me=""}else if(N[Q]===">"){if(ve?N[Q-1]==="-"&&N[Q-2]==="-"&&(ve=!1,Te--):Te--,Te===0)break}else N[Q]==="["?xe=!0:Me+=N[Q];if(Te!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:ce,i:Q}}function a(N,Q){let ce="";for(;Q<N.length&&N[Q]!=="'"&&N[Q]!=='"';Q++)ce+=N[Q];if(ce=ce.trim(),ce.indexOf(" ")!==-1)throw new Error("External entites are not supported");const Te=N[Q++];let xe="";for(;Q<N.length&&N[Q]!==Te;Q++)xe+=N[Q];return[ce,xe,Q]}function L(N,Q){return N[Q+1]==="!"&&N[Q+2]==="-"&&N[Q+3]==="-"}function R(N,Q){return N[Q+1]==="!"&&N[Q+2]==="E"&&N[Q+3]==="N"&&N[Q+4]==="T"&&N[Q+5]==="I"&&N[Q+6]==="T"&&N[Q+7]==="Y"}function D(N,Q){return N[Q+1]==="!"&&N[Q+2]==="E"&&N[Q+3]==="L"&&N[Q+4]==="E"&&N[Q+5]==="M"&&N[Q+6]==="E"&&N[Q+7]==="N"&&N[Q+8]==="T"}function C(N,Q){return N[Q+1]==="!"&&N[Q+2]==="A"&&N[Q+3]==="T"&&N[Q+4]==="T"&&N[Q+5]==="L"&&N[Q+6]==="I"&&N[Q+7]==="S"&&N[Q+8]==="T"}function k(N,Q){return N[Q+1]==="!"&&N[Q+2]==="N"&&N[Q+3]==="O"&&N[Q+4]==="T"&&N[Q+5]==="A"&&N[Q+6]==="T"&&N[Q+7]==="I"&&N[Q+8]==="O"&&N[Q+9]==="N"}function V(N){if(T.isName(N))return N;throw new Error(`Invalid entity name ${N}`)}v.exports=w},{"../util":4}],9:[function(p,v,x){const T={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(a,L){return L},attributeValueProcessor:function(a,L){return L},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(a,L,R){return a}},w=function(a){return Object.assign({},T,a)};x.buildOptions=w,x.defaultOptions=T},{}],10:[function(p,v,x){const T=p("../util"),w=p("./xmlNode"),a=p("./DocTypeReader"),L=p("strnum");class R{constructor(de){this.options=de,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=D,this.parseXml=Q,this.parseTextData=C,this.resolveNameSpace=k,this.buildAttributesMap=N,this.isItStopNode=ve,this.replaceEntitiesValue=Te,this.readStopNodeData=M,this.saveTextToParentTag=xe,this.addChild=ce}}function D(U){const de=Object.keys(U);for(let K=0;K<de.length;K++){const j=de[K];this.lastEntities[j]={regex:new RegExp("&"+j+";","g"),val:U[j]}}}function C(U,de,K,j,W,J,re){if(U!==void 0&&(this.options.trimValues&&!j&&(U=U.trim()),U.length>0)){re||(U=this.replaceEntitiesValue(U));const le=this.options.tagValueProcessor(de,U,K,W,J);return le==null?U:typeof le!=typeof U||le!==U?le:this.options.trimValues?$(U,this.options.parseTagValue,this.options.numberParseOptions):U.trim()===U?$(U,this.options.parseTagValue,this.options.numberParseOptions):U}}function k(U){if(this.options.removeNSPrefix){const de=U.split(":"),K=U.charAt(0)==="/"?"/":"";if(de[0]==="xmlns")return"";de.length===2&&(U=K+de[1])}return U}const V=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function N(U,de,K){if(!this.options.ignoreAttributes&&typeof U=="string"){const j=T.getAllMatches(U,V),W=j.length,J={};for(let re=0;re<W;re++){const le=this.resolveNameSpace(j[re][1]);let te=j[re][4],oe=this.options.attributeNamePrefix+le;if(le.length)if(this.options.transformAttributeName&&(oe=this.options.transformAttributeName(oe)),oe==="__proto__"&&(oe="#__proto__"),te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const _e=this.options.attributeValueProcessor(le,te,de);_e==null?J[oe]=te:typeof _e!=typeof te||_e!==te?J[oe]=_e:J[oe]=$(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(J[oe]=!0)}if(!Object.keys(J).length)return;if(this.options.attributesGroupName){const re={};return re[this.options.attributesGroupName]=J,re}return J}}const Q=function(U){U=U.replace(/\r\n?/g,`
`);const de=new w("!xml");let K=de,j="",W="";for(let J=0;J<U.length;J++)if(U[J]==="<")if(U[J+1]==="/"){const le=ne(U,">",J,"Closing Tag is not closed.");let te=U.substring(J+2,le).trim();if(this.options.removeNSPrefix){const be=te.indexOf(":");be!==-1&&(te=te.substr(be+1))}this.options.transformTagName&&(te=this.options.transformTagName(te)),K&&(j=this.saveTextToParentTag(j,K,W));const oe=W.substring(W.lastIndexOf(".")+1);if(te&&this.options.unpairedTags.indexOf(te)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${te}>`);let _e=0;oe&&this.options.unpairedTags.indexOf(oe)!==-1?(_e=W.lastIndexOf(".",W.lastIndexOf(".")-1),this.tagsNodeStack.pop()):_e=W.lastIndexOf("."),W=W.substring(0,_e),K=this.tagsNodeStack.pop(),j="",J=le}else if(U[J+1]==="?"){let le=ue(U,J,!1,"?>");if(!le)throw new Error("Pi Tag is not closed.");if(j=this.saveTextToParentTag(j,K,W),!(this.options.ignoreDeclaration&&le.tagName==="?xml"||this.options.ignorePiTags)){const te=new w(le.tagName);te.add(this.options.textNodeName,""),le.tagName!==le.tagExp&&le.attrExpPresent&&(te[":@"]=this.buildAttributesMap(le.tagExp,W,le.tagName)),this.addChild(K,te,W)}J=le.closeIndex+1}else if(U.substr(J+1,3)==="!--"){const le=ne(U,"-->",J+4,"Comment is not closed.");if(this.options.commentPropName){const te=U.substring(J+4,le-2);j=this.saveTextToParentTag(j,K,W),K.add(this.options.commentPropName,[{[this.options.textNodeName]:te}])}J=le}else if(U.substr(J+1,2)==="!D"){const le=a(U,J);this.docTypeEntities=le.entities,J=le.i}else if(U.substr(J+1,2)==="!["){const le=ne(U,"]]>",J,"CDATA is not closed.")-2,te=U.substring(J+9,le);if(j=this.saveTextToParentTag(j,K,W),this.options.cdataPropName)K.add(this.options.cdataPropName,[{[this.options.textNodeName]:te}]);else{let oe=this.parseTextData(te,K.tagname,W,!0,!1,!0);oe==null&&(oe=""),K.add(this.options.textNodeName,oe)}J=le+2}else{let le=ue(U,J,this.options.removeNSPrefix),te=le.tagName;const oe=le.rawTagName;let _e=le.tagExp,be=le.attrExpPresent,he=le.closeIndex;this.options.transformTagName&&(te=this.options.transformTagName(te)),K&&j&&K.tagname!=="!xml"&&(j=this.saveTextToParentTag(j,K,W,!1));const Fe=K;if(Fe&&this.options.unpairedTags.indexOf(Fe.tagname)!==-1&&(K=this.tagsNodeStack.pop(),W=W.substring(0,W.lastIndexOf("."))),te!==de.tagname&&(W+=W?"."+te:te),this.isItStopNode(this.options.stopNodes,W,te)){let Oe="";if(_e.length>0&&_e.lastIndexOf("/")===_e.length-1)J=le.closeIndex;else if(this.options.unpairedTags.indexOf(te)!==-1)J=le.closeIndex;else{const Ke=this.readStopNodeData(U,oe,he+1);if(!Ke)throw new Error(`Unexpected end of ${oe}`);J=Ke.i,Oe=Ke.tagContent}const De=new w(te);te!==_e&&be&&(De[":@"]=this.buildAttributesMap(_e,W,te)),Oe&&(Oe=this.parseTextData(Oe,te,W,!0,be,!0,!0)),W=W.substr(0,W.lastIndexOf(".")),De.add(this.options.textNodeName,Oe),this.addChild(K,De,W)}else{if(_e.length>0&&_e.lastIndexOf("/")===_e.length-1){te[te.length-1]==="/"?(te=te.substr(0,te.length-1),W=W.substr(0,W.length-1),_e=te):_e=_e.substr(0,_e.length-1),this.options.transformTagName&&(te=this.options.transformTagName(te));const Oe=new w(te);te!==_e&&be&&(Oe[":@"]=this.buildAttributesMap(_e,W,te)),this.addChild(K,Oe,W),W=W.substr(0,W.lastIndexOf("."))}else{const Oe=new w(te);this.tagsNodeStack.push(K),te!==_e&&be&&(Oe[":@"]=this.buildAttributesMap(_e,W,te)),this.addChild(K,Oe,W),K=Oe}j="",J=he}}else j+=U[J];return de.child};function ce(U,de,K){const j=this.options.updateTag(de.tagname,K,de[":@"]);j===!1||(typeof j=="string"&&(de.tagname=j),U.addChild(de))}const Te=function(U){if(this.options.processEntities){for(let de in this.docTypeEntities){const K=this.docTypeEntities[de];U=U.replace(K.regx,K.val)}for(let de in this.lastEntities){const K=this.lastEntities[de];U=U.replace(K.regex,K.val)}if(this.options.htmlEntities)for(let de in this.htmlEntities){const K=this.htmlEntities[de];U=U.replace(K.regex,K.val)}U=U.replace(this.ampEntity.regex,this.ampEntity.val)}return U};function xe(U,de,K,j){return U&&(j===void 0&&(j=Object.keys(de.child).length===0),U=this.parseTextData(U,de.tagname,K,!1,de[":@"]?Object.keys(de[":@"]).length!==0:!1,j),U!==void 0&&U!==""&&de.add(this.options.textNodeName,U),U=""),U}function ve(U,de,K){const j="*."+K;for(const W in U){const J=U[W];if(j===J||de===J)return!0}return!1}function Me(U,de,K=">"){let j,W="";for(let J=de;J<U.length;J++){let re=U[J];if(j)re===j&&(j="");else if(re==='"'||re==="'")j=re;else if(re===K[0])if(K[1]){if(U[J+1]===K[1])return{data:W,index:J}}else return{data:W,index:J};else re==="	"&&(re=" ");W+=re}}function ne(U,de,K,j){const W=U.indexOf(de,K);if(W===-1)throw new Error(j);return W+de.length-1}function ue(U,de,K,j=">"){const W=Me(U,de+1,j);if(!W)return;let J=W.data;const re=W.index,le=J.search(/\s/);let te=J,oe=!0;le!==-1&&(te=J.substring(0,le),J=J.substring(le+1).trimStart());const _e=te;if(K){const be=te.indexOf(":");be!==-1&&(te=te.substr(be+1),oe=te!==W.data.substr(be+1))}return{tagName:te,tagExp:J,closeIndex:re,attrExpPresent:oe,rawTagName:_e}}function M(U,de,K){const j=K;let W=1;for(;K<U.length;K++)if(U[K]==="<")if(U[K+1]==="/"){const J=ne(U,">",K,`${de} is not closed`);if(U.substring(K+2,J).trim()===de&&(W--,W===0))return{tagContent:U.substring(j,K),i:J};K=J}else if(U[K+1]==="?")K=ne(U,"?>",K+1,"StopNode is not closed.");else if(U.substr(K+1,3)==="!--")K=ne(U,"-->",K+3,"StopNode is not closed.");else if(U.substr(K+1,2)==="![")K=ne(U,"]]>",K,"StopNode is not closed.")-2;else{const J=ue(U,K,">");J&&((J&&J.tagName)===de&&J.tagExp[J.tagExp.length-1]!=="/"&&W++,K=J.closeIndex)}}function $(U,de,K){if(de&&typeof U=="string"){const j=U.trim();return j==="true"?!0:j==="false"?!1:L(U,K)}else return T.isExist(U)?U:""}v.exports=R},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(p,v,x){const{buildOptions:T}=p("./OptionsBuilder"),w=p("./OrderedObjParser"),{prettify:a}=p("./node2json"),L=p("../validator");class R{constructor(C){this.externalEntities={},this.options=T(C)}parse(C,k){if(typeof C!="string")if(C.toString)C=C.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(k){k===!0&&(k={});const Q=L.validate(C,k);if(Q!==!0)throw Error(`${Q.err.msg}:${Q.err.line}:${Q.err.col}`)}const V=new w(this.options);V.addExternalEntities(this.externalEntities);const N=V.parseXml(C);return this.options.preserveOrder||N===void 0?N:a(N,this.options)}addEntity(C,k){if(k.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(C.indexOf("&")!==-1||C.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(k==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[C]=k}}v.exports=R},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(p,v,x){function T(D,C){return w(D,C)}function w(D,C,k){let V;const N={};for(let Q=0;Q<D.length;Q++){const ce=D[Q],Te=a(ce);let xe="";if(k===void 0?xe=Te:xe=k+"."+Te,Te===C.textNodeName)V===void 0?V=ce[Te]:V+=""+ce[Te];else{if(Te===void 0)continue;if(ce[Te]){let ve=w(ce[Te],C,xe);const Me=R(ve,C);ce[":@"]?L(ve,ce[":@"],xe,C):Object.keys(ve).length===1&&ve[C.textNodeName]!==void 0&&!C.alwaysCreateTextNode?ve=ve[C.textNodeName]:Object.keys(ve).length===0&&(C.alwaysCreateTextNode?ve[C.textNodeName]="":ve=""),N[Te]!==void 0&&N.hasOwnProperty(Te)?(Array.isArray(N[Te])||(N[Te]=[N[Te]]),N[Te].push(ve)):C.isArray(Te,xe,Me)?N[Te]=[ve]:N[Te]=ve}}}return typeof V=="string"?V.length>0&&(N[C.textNodeName]=V):V!==void 0&&(N[C.textNodeName]=V),N}function a(D){const C=Object.keys(D);for(let k=0;k<C.length;k++){const V=C[k];if(V!==":@")return V}}function L(D,C,k,V){if(C){const N=Object.keys(C),Q=N.length;for(let ce=0;ce<Q;ce++){const Te=N[ce];V.isArray(Te,k+"."+Te,!0,!0)?D[Te]=[C[Te]]:D[Te]=C[Te]}}}function R(D,C){const{textNodeName:k}=C,V=Object.keys(D).length;return!!(V===0||V===1&&(D[k]||typeof D[k]=="boolean"||D[k]===0))}x.prettify=T},{}],13:[function(p,v,x){class T{constructor(a){this.tagname=a,this.child=[],this[":@"]={}}add(a,L){a==="__proto__"&&(a="#__proto__"),this.child.push({[a]:L})}addChild(a){a.tagname==="__proto__"&&(a.tagname="#__proto__"),a[":@"]&&Object.keys(a[":@"]).length>0?this.child.push({[a.tagname]:a.child,":@":a[":@"]}):this.child.push({[a.tagname]:a.child})}}v.exports=T},{}],14:[function(p,v,x){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */x.read=function(T,w,a,L,R){var D,C,k=R*8-L-1,V=(1<<k)-1,N=V>>1,Q=-7,ce=a?R-1:0,Te=a?-1:1,xe=T[w+ce];for(ce+=Te,D=xe&(1<<-Q)-1,xe>>=-Q,Q+=k;Q>0;D=D*256+T[w+ce],ce+=Te,Q-=8);for(C=D&(1<<-Q)-1,D>>=-Q,Q+=L;Q>0;C=C*256+T[w+ce],ce+=Te,Q-=8);if(D===0)D=1-N;else{if(D===V)return C?NaN:(xe?-1:1)*(1/0);C=C+Math.pow(2,L),D=D-N}return(xe?-1:1)*C*Math.pow(2,D-L)},x.write=function(T,w,a,L,R,D){var C,k,V,N=D*8-R-1,Q=(1<<N)-1,ce=Q>>1,Te=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,xe=L?0:D-1,ve=L?1:-1,Me=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(k=isNaN(w)?1:0,C=Q):(C=Math.floor(Math.log(w)/Math.LN2),w*(V=Math.pow(2,-C))<1&&(C--,V*=2),C+ce>=1?w+=Te/V:w+=Te*Math.pow(2,1-ce),w*V>=2&&(C++,V/=2),C+ce>=Q?(k=0,C=Q):C+ce>=1?(k=(w*V-1)*Math.pow(2,R),C=C+ce):(k=w*Math.pow(2,ce-1)*Math.pow(2,R),C=0));R>=8;T[a+xe]=k&255,xe+=ve,k/=256,R-=8);for(C=C<<R|k,N+=R;N>0;T[a+xe]=C&255,xe+=ve,C/=256,N-=8);T[a+xe-ve]|=Me*128}},{}],15:[function(p,v,x){const T=/^[-+]?0x[a-fA-F0-9]+$/,w=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const a={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function L(D,C={}){if(C=Object.assign({},a,C),!D||typeof D!="string")return D;let k=D.trim();if(C.skipLike!==void 0&&C.skipLike.test(k))return D;if(C.hex&&T.test(k))return Number.parseInt(k,16);{const V=w.exec(k);if(V){const N=V[1],Q=V[2];let ce=R(V[3]);const Te=V[4]||V[6];if(!C.leadingZeros&&Q.length>0&&N&&k[2]!==".")return D;if(!C.leadingZeros&&Q.length>0&&!N&&k[1]!==".")return D;{const xe=Number(k),ve=""+xe;return ve.search(/[eE]/)!==-1||Te?C.eNotation?xe:D:k.indexOf(".")!==-1?ve==="0"&&ce===""||ve===ce||N&&ve==="-"+ce?xe:D:Q?ce===ve||N+ce===ve?xe:D:k===ve||k===N+ve?xe:D}}else return D}}function R(D){return D&&D.indexOf(".")!==-1&&(D=D.replace(/0+$/,""),D==="."?D="0":D[0]==="."?D="0"+D:D[D.length-1]==="."&&(D=D.substr(0,D.length-1))),D}v.exports=L},{}],16:[function(p,v,x){(function(T){(function(){var w=this&&this.__awaiter||function(k,V,N,Q){function ce(Te){return Te instanceof N?Te:new N(function(xe){xe(Te)})}return new(N||(N=Promise))(function(Te,xe){function ve(ue){try{ne(Q.next(ue))}catch(M){xe(M)}}function Me(ue){try{ne(Q.throw(ue))}catch(M){xe(M)}}function ne(ue){ue.done?Te(ue.value):ce(ue.value).then(ve,Me)}ne((Q=Q.apply(k,V||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.osmFetch=void 0;const a=p("../auth"),L=p("../config"),R=p("./_xml"),D=k=>typeof btoa>"u"?T.from(k,"binary").toString("base64"):btoa(k);function C(k,V,N){return w(this,void 0,void 0,function*(){const{apiUrl:Q,authHeader:ce,basicAuth:Te,userAgent:xe}=(0,L.getConfig)(),ve=Te&&`Basic ${D(`${Te.username}:${Te.password}`)}`,Me=(0,a.getAuthToken)()&&`Bearer ${(0,a.getAuthToken)()}`;let ne=new URLSearchParams(V).toString();ne&&(ne=`?${ne}`);const ue=yield fetch(`${Q}/api${k}${ne}`,Object.assign(Object.assign({},N),{headers:Object.assign({Authorization:ce||ve||Me||"","User-Agent":xe},N==null?void 0:N.headers)})),M=ue.headers.get("Content-Type");if(M!=null&&M.startsWith("application/xml")){const $=yield ue.text();return yield R.xmlParser.parse($)}if(M!=null&&M.startsWith("application/json"))return ue.json();if(ue.ok)return yield ue.text();throw new Error(`OSM API: ${yield ue.text()}`)})}x.osmFetch=C}).call(this)}).call(this,p("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.xmlParser=void 0;const T=p("fast-xml-parser");x.xmlParser=new T.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:w=>w!=="$"})},{"fast-xml-parser":3}],18:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.createOsmChangeXml=x.createChangesetMetaXml=void 0;const T=p("fast-xml-parser"),w=new T.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function a(D){return w.build({osm:{changeset:{tag:Object.entries(D).map(([C,k])=>({$k:C,$v:k}))}}})}x.createChangesetMetaXml=a;const L=(D,C,k)=>C.reduce((V,N)=>{const Q={$id:N.id,$version:k?0:N.version,$changeset:D,tag:Object.entries(N.tags||{}).map(([ce,Te])=>({$k:ce,$v:Te}))};switch(N.type){case"node":{const ce=Object.assign(Object.assign({},Q),{$lat:N.lat,$lon:N.lon});return Object.assign(Object.assign({},V),{node:[...V.node,ce]})}case"way":{if(!N.nodes)throw new Error("Way has no nodes");const ce=Object.assign(Object.assign({},Q),{nd:N.nodes.map(Te=>({$ref:Te}))});return Object.assign(Object.assign({},V),{way:[...V.way,ce]})}case"relation":{if(!N.members)throw new Error("Relation has no members");const ce=Object.assign(Object.assign({},Q),{member:N.members.map(Te=>({$type:Te.type,$ref:Te.ref,$role:Te.role}))});return Object.assign(Object.assign({},V),{relation:[...V.relation,ce]})}default:return V}},{node:[],way:[],relation:[]});function R(D,C,k){return w.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},k),{create:[L(D,C.create,!0)],modify:[L(D,C.modify)],delete:[Object.assign({"$if-unused":!0},L(D,C.delete))]})})}x.createOsmChangeXml=R},{"fast-xml-parser":3}],19:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.parseOsmChangeXml=x.parseOsmChangeJson=void 0;const T=p("../_xml");function w(D){return{changeset:+D.$.changeset,id:+D.$.id,timestamp:D.$.timestamp,uid:+D.$.uid,user:D.$.user,version:+D.$.version,tags:D.tag?Object.fromEntries(D.tag.map(C=>[C.$.k,C.$.v])):void 0}}const a=D=>{const C=[];if(D.node){const k=D.node.map(V=>Object.assign(Object.assign({type:"node"},w(V)),{lat:+V.$.lat,lon:+V.$.lon}));C.push(...k)}if(D.way){const k=D.way.map(V=>{var N;return Object.assign(Object.assign({type:"way"},w(V)),{nodes:((N=V.nd)===null||N===void 0?void 0:N.map(Q=>+Q.$.ref))||[]})});C.push(...k)}if(D.relation){const k=D.relation.map(V=>{var N;return Object.assign(Object.assign({type:"relation"},w(V)),{members:((N=V.member)===null||N===void 0?void 0:N.map(Q=>({ref:+Q.$.ref,role:Q.$.role,type:Q.$.type})))||[]})});C.push(...k)}return C};function L(D){var C,k,V;return{create:((C=D.osmChange[0].create)===null||C===void 0?void 0:C.flatMap(a))||[],modify:((k=D.osmChange[0].modify)===null||k===void 0?void 0:k.flatMap(a))||[],delete:((V=D.osmChange[0].delete)===null||V===void 0?void 0:V.flatMap(a))||[]}}x.parseOsmChangeJson=L;function R(D){const C=T.xmlParser.parse(D);return L(C)}x.parseOsmChangeXml=R},{"../_xml":17}],20:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(xe){try{Te(C.next(xe))}catch(ve){N(ve)}}function ce(xe){try{Te(C.throw(xe))}catch(ve){N(ve)}}function Te(xe){xe.done?V(xe.value):k(xe.value).then(Q,ce)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.createChangesetComment=void 0;const w=p("../_osmFetch");function a(L,R){return T(this,void 0,void 0,function*(){yield(0,w.osmFetch)(`/0.6/changeset/${L}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(R)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}x.createChangesetComment=a},{"../_osmFetch":16}],21:[function(p,v,x){var T=this&&this.__awaiter||function(R,D,C,k){function V(N){return N instanceof C?N:new C(function(Q){Q(N)})}return new(C||(C=Promise))(function(N,Q){function ce(ve){try{xe(k.next(ve))}catch(Me){Q(Me)}}function Te(ve){try{xe(k.throw(ve))}catch(Me){Q(Me)}}function xe(ve){ve.done?N(ve.value):V(ve.value).then(ce,Te)}xe((k=k.apply(R,D||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getChangesetDiff=void 0;const w=p("../_osmFetch"),a=p("./_parseOsmChangeXml");function L(R){return T(this,void 0,void 0,function*(){const D=yield(0,w.osmFetch)(`/0.6/changeset/${R}/download`);return(0,a.parseOsmChangeJson)(D)})}x.getChangesetDiff=L},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(p,v,x){var T=this&&this.__awaiter||function(C,k,V,N){function Q(ce){return ce instanceof V?ce:new V(function(Te){Te(ce)})}return new(V||(V=Promise))(function(ce,Te){function xe(ne){try{Me(N.next(ne))}catch(ue){Te(ue)}}function ve(ne){try{Me(N.throw(ne))}catch(ue){Te(ue)}}function Me(ne){ne.done?ce(ne.value):Q(ne.value).then(xe,ve)}Me((N=N.apply(C,k||[])).next())})},w=this&&this.__rest||function(C,k){var V={};for(var N in C)Object.prototype.hasOwnProperty.call(C,N)&&k.indexOf(N)<0&&(V[N]=C[N]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Q=0,N=Object.getOwnPropertySymbols(C);Q<N.length;Q++)k.indexOf(N[Q])<0&&Object.prototype.propertyIsEnumerable.call(C,N[Q])&&(V[N[Q]]=C[N[Q]]);return V};Object.defineProperty(x,"__esModule",{value:!0}),x.getChangeset=x.listChangesets=void 0;const a=p("../_osmFetch"),L=C=>{var k;return{id:+C.$.id,created_at:new Date(C.$.created_at),closed_at:new Date(C.$.closed_at),open:C.$.open==="true",comments_count:+C.$.comments_count,changes_count:+C.$.changes_count,min_lat:+C.$.min_lat,min_lon:+C.$.min_lon,max_lat:+C.$.max_lat,max_lon:+C.$.max_lon,uid:+C.$.uid,user:C.$.user,tags:Object.fromEntries(C.tag.map(V=>[V.$.k,V.$.v])),discussion:(k=C.discussion)===null||k===void 0?void 0:k[0].comment.map(V=>({date:new Date(V.$.date),user:V.$.user,uid:V.$.uid,text:V.text[0]}))}};function R(C){var k;return T(this,void 0,void 0,function*(){const{only:V}=C,N=w(C,["only"]);return((k=(yield(0,a.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},V&&{[V]:!0}),N))).osm[0].changeset)===null||k===void 0?void 0:k.map(L))||[]})}x.listChangesets=R;function D(C,k=!0){return T(this,void 0,void 0,function*(){return(yield(0,a.osmFetch)(`/0.6/changeset/${C}`,{include_discussion:k})).osm[0].changeset.map(L)[0]})}x.getChangeset=D},{"../_osmFetch":16}],23:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(R,D,C,k){k===void 0&&(k=C);var V=Object.getOwnPropertyDescriptor(D,C);(!V||("get"in V?!D.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return D[C]}}),Object.defineProperty(R,k,V)}:function(R,D,C,k){k===void 0&&(k=C),R[k]=D[C]}),w=this&&this.__exportStar||function(R,D){for(var C in R)C!=="default"&&!Object.prototype.hasOwnProperty.call(D,C)&&T(D,R,C)};Object.defineProperty(x,"__esModule",{value:!0}),x.createOsmChangeXml=x.parseOsmChangeXml=void 0,w(p("./createChangesetComment"),x),w(p("./getChangesetDiff"),x),w(p("./getChangesets"),x),w(p("./uploadChangeset"),x);var a=p("./_parseOsmChangeXml");Object.defineProperty(x,"parseOsmChangeXml",{enumerable:!0,get:function(){return a.parseOsmChangeXml}});var L=p("./_createOsmChangeXml");Object.defineProperty(x,"createOsmChangeXml",{enumerable:!0,get:function(){return L.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(p,v,x){var T=this&&this.__awaiter||function(R,D,C,k){function V(N){return N instanceof C?N:new C(function(Q){Q(N)})}return new(C||(C=Promise))(function(N,Q){function ce(ve){try{xe(k.next(ve))}catch(Me){Q(Me)}}function Te(ve){try{xe(k.throw(ve))}catch(Me){Q(Me)}}function xe(ve){ve.done?N(ve.value):V(ve.value).then(ce,Te)}xe((k=k.apply(R,D||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.uploadChangeset=void 0;const w=p("../_osmFetch"),a=p("./_createOsmChangeXml");function L(R,D){return T(this,void 0,void 0,function*(){const C=(0,a.createChangesetMetaXml)(R),k=+(yield(0,w.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:C,headers:{"content-type":"application/xml; charset=utf-8"}})),V=(0,a.createOsmChangeXml)(k,D);return yield(0,w.osmFetch)(`/0.6/changeset/${k}/upload`,void 0,{method:"POST",body:V,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,w.osmFetch)(`/0.6/changeset/${k}/close`,void 0,{method:"PUT"}),+k})}x.uploadChangeset=L},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(xe){try{Te(C.next(xe))}catch(ve){N(ve)}}function ce(xe){try{Te(C.throw(xe))}catch(ve){N(ve)}}function Te(xe){xe.done?V(xe.value):k(xe.value).then(Q,ce)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getCapabilities=void 0;const w=p("./_osmFetch");function a(){var L;return T(this,void 0,void 0,function*(){const R=yield(0,w.osmFetch)("/capabilities");return{limits:{maxArea:+R.osm[0].api[0].area[0].$.maximum,maxNoteArea:+R.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+R.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+R.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+R.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+R.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((L=R.osm[0].policy[0].imagery[0].blacklist)===null||L===void 0?void 0:L.map(C=>C.$.regex))||[]}}})}x.getCapabilities=a},{"./_osmFetch":16}],26:[function(p,v,x){var T=this&&this.__awaiter||function(V,N,Q,ce){function Te(xe){return xe instanceof Q?xe:new Q(function(ve){ve(xe)})}return new(Q||(Q=Promise))(function(xe,ve){function Me(M){try{ue(ce.next(M))}catch($){ve($)}}function ne(M){try{ue(ce.throw(M))}catch($){ve($)}}function ue(M){M.done?xe(M.value):Te(M.value).then(Me,ne)}ue((ce=ce.apply(V,N||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getRelationsForElement=x.getWaysForNode=x.getFeatureHistory=x.getFeatureAtVersion=x.getFeatures=x.getFeature=void 0;const w=p("./_osmFetch");function a(V,N,Q){return T(this,void 0,void 0,function*(){const ce=Q&&V!=="node"?"/full":"";return(yield(0,w.osmFetch)(`/0.6/${V}/${N}${ce}.json`)).elements})}x.getFeature=a;function L(V,N){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/${V}s.json?${V}s=${N.join(",")}`)).elements})}x.getFeatures=L;function R(V,N,Q){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/${V}/${N}/${Q}.json`)).elements[0]})}x.getFeatureAtVersion=R;function D(V,N){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/${V}/${N}/history.json`)).elements})}x.getFeatureHistory=D;function C(V){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/node/${V}/ways.json`)).elements})}x.getWaysForNode=C;function k(V,N){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/${V}/${N}/relations.json`)).elements})}x.getRelationsForElement=k},{"./_osmFetch":16}],27:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(xe){try{Te(C.next(xe))}catch(ve){N(ve)}}function ce(xe){try{Te(C.throw(xe))}catch(ve){N(ve)}}function Te(xe){xe.done?V(xe.value):k(xe.value).then(Q,ce)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getMapData=void 0;const w=p("./_osmFetch");function a(L){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)("/0.6/map.json",{bbox:L})).elements})}x.getMapData=a},{"./_osmFetch":16}],28:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(xe){try{Te(C.next(xe))}catch(ve){N(ve)}}function ce(xe){try{Te(C.throw(xe))}catch(ve){N(ve)}}function Te(xe){xe.done?V(xe.value):k(xe.value).then(Q,ce)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getUIdFromDisplayName=void 0;const w=p("./changesets");function a(L){return T(this,void 0,void 0,function*(){const R=yield(0,w.listChangesets)({display_name:L});if(!R.length)throw new Error("Could not get uid because the user has never edited the map");return R[0].uid})}x.getUIdFromDisplayName=a},{"./changesets":23}],29:[function(p,v,x){var T=this&&this.__awaiter||function(R,D,C,k){function V(N){return N instanceof C?N:new C(function(Q){Q(N)})}return new(C||(C=Promise))(function(N,Q){function ce(ve){try{xe(k.next(ve))}catch(Me){Q(Me)}}function Te(ve){try{xe(k.throw(ve))}catch(Me){Q(Me)}}function xe(ve){ve.done?N(ve.value):V(ve.value).then(ce,Te)}xe((k=k.apply(R,D||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getUsers=x.getUser=void 0;const w=p("./_osmFetch");function a(R){return T(this,void 0,void 0,function*(){const D=yield(0,w.osmFetch)(`/0.6/user/${R==="me"?"details":R}.json`);return Object.assign(Object.assign({},D.user),{account_created:new Date(D.user.account_created)})})}x.getUser=a;function L(R){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)("/0.6/users",{users:R})).users.map(C=>Object.assign(Object.assign({},C),{account_created:new Date(C.account_created)}))})}x.getUsers=L},{"./_osmFetch":16}],30:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./changesets"),x),w(p("./notes"),x),w(p("./getCapabilities"),x),w(p("./getFeature"),x),w(p("./getMapData"),x),w(p("./getUIdFromDisplayName"),x),w(p("./getUser"),x)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(p,v,x){var T=this&&this.__awaiter||function(k,V,N,Q){function ce(Te){return Te instanceof N?Te:new N(function(xe){xe(Te)})}return new(N||(N=Promise))(function(Te,xe){function ve(ue){try{ne(Q.next(ue))}catch(M){xe(M)}}function Me(ue){try{ne(Q.throw(ue))}catch(M){xe(M)}}function ne(ue){ue.done?Te(ue.value):ce(ue.value).then(ve,Me)}ne((Q=Q.apply(k,V||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getNote=x.getNotesForArea=x.getNotesForQuery=void 0;const w=p("../_osmFetch"),a=k=>{const[V,N]=k.geometry.coordinates;return Object.assign(Object.assign({},k.properties),{location:{lat:N,lng:V}})};function L(k,V){return T(this,void 0,void 0,function*(){return(yield(0,w.osmFetch)(`/0.6/notes${V?"/search":""}.json`,k)).features.map(a)})}function R(k){return L(k,!0)}x.getNotesForQuery=R;function D(k){return L({bbox:k},!1)}x.getNotesForArea=D;function C(k){return T(this,void 0,void 0,function*(){const V=yield(0,w.osmFetch)(`/0.6/notes/${k}.json`);return a(V)})}x.getNote=C},{"../_osmFetch":16}],32:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./getNotes"),x),w(p("./noteActions"),x)},{"./getNotes":31,"./noteActions":33}],33:[function(p,v,x){var T=this&&this.__awaiter||function(D,C,k,V){function N(Q){return Q instanceof k?Q:new k(function(ce){ce(Q)})}return new(k||(k=Promise))(function(Q,ce){function Te(Me){try{ve(V.next(Me))}catch(ne){ce(ne)}}function xe(Me){try{ve(V.throw(Me))}catch(ne){ce(ne)}}function ve(Me){Me.done?Q(Me.value):N(Me.value).then(Te,xe)}ve((V=V.apply(D,C||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.reopenNote=x.commentOnNote=x.createNote=void 0;const w=p("../_osmFetch");function a(D,C,k){return T(this,void 0,void 0,function*(){yield(0,w.osmFetch)("/0.6/notes",{lat:D,lon:C,text:k})})}x.createNote=a;function L(D,C){return T(this,void 0,void 0,function*(){yield(0,w.osmFetch)(`/0.6/notes/${D}/comment`,{text:C})})}x.commentOnNote=L;function R(D,C){return T(this,void 0,void 0,function*(){yield(0,w.osmFetch)(`/0.6/notes/${D}/reopen`,{text:C})})}x.reopenNote=R},{"../_osmFetch":16}],34:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.createPopup=void 0;function T(w){let a=!1;return new Promise((L,R)=>{const[D,C]=[600,550],k=Object.entries({width:D,height:C,left:window.screen.width/2-D/2,top:window.screen.height/2-C/2}).map(([Q,ce])=>`${Q}=${ce}`).join(","),V=window.open("about:blank","oauth_window",k);if(!V)throw new Error("Popup was blocked");V.location=w,window.authComplete=Q=>{L(Q),a=!0};const N=setInterval(()=>{V.closed&&(a||R(new Error("Cancelled")),clearInterval(N))},500)})}x.createPopup=T},{}],35:[function(p,v,x){var T=this&&this.__awaiter||function(L,R,D,C){function k(V){return V instanceof D?V:new D(function(N){N(V)})}return new(D||(D=Promise))(function(V,N){function Q(xe){try{Te(C.next(xe))}catch(ve){N(ve)}}function ce(xe){try{Te(C.throw(xe))}catch(ve){N(ve)}}function Te(xe){xe.done?V(xe.value):k(xe.value).then(Q,ce)}Te((C=C.apply(L,R||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.exchangeCode=void 0;const w=p("./helpers");function a(L,{options:R,pkceVerifier:D,state:C}){return T(this,void 0,void 0,function*(){const k=new URL(L).searchParams,V=k.get("error_description"),N=k.get("code"),Q=k.get("state");if(V)throw new Error(V);if(!N)throw new Error("No code in OAuth response");if(!D||!C)throw new Error("No login in progress");if(C!==Q)throw new Error("State Mismatch");const ce={grant_type:"authorization_code",code:N,redirect_uri:R.redirectUrl,client_id:R.clientId,code_verifier:D},Te=`${(0,w.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(ce).toString()}`,ve=yield(yield fetch(Te,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in ve)throw new Error(ve.error_description);const Me={issuedAt:new Date(ve.created_at*1e3).toISOString(),accessToken:ve.access_token,scopes:ve.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(Me)),delete window.authComplete,Me})}x.exchangeCode=a},{"./helpers":36}],36:[function(p,v,x){var T=this&&this.__awaiter||function(D,C,k,V){function N(Q){return Q instanceof k?Q:new k(function(ce){ce(Q)})}return new(k||(k=Promise))(function(Q,ce){function Te(Me){try{ve(V.next(Me))}catch(ne){ce(ne)}}function xe(Me){try{ve(V.throw(Me))}catch(ne){ce(ne)}}function ve(Me){Me.done?Q(Me.value):N(Me.value).then(Te,xe)}ve((V=V.apply(D,C||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.getOAuthBaseUrl=x.getRandomString=x.sha256=void 0;const w=p("../config");function a(D){return T(this,void 0,void 0,function*(){const C=new TextEncoder().encode(D),k=yield window.crypto.subtle.digest("SHA-256",C);return btoa(String.fromCharCode(...new Uint8Array(k))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}x.sha256=a;function L(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(D=>`0${D.toString(16)}`.slice(-2)).join("")}x.getRandomString=L;function R(){let D=(0,w.getConfig)().apiUrl;return D==="https://api.openstreetmap.org"&&(D="https://www.openstreetmap.org"),D}x.getOAuthBaseUrl=R},{"../config":39}],37:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./oauth2"),x)},{"./oauth2":38}],38:[function(p,v,x){var T=this&&this.__awaiter||function(V,N,Q,ce){function Te(xe){return xe instanceof Q?xe:new Q(function(ve){ve(xe)})}return new(Q||(Q=Promise))(function(xe,ve){function Me(M){try{ue(ce.next(M))}catch($){ve($)}}function ne(M){try{ue(ce.throw(M))}catch($){ve($)}}function ue(M){M.done?xe(M.value):Te(M.value).then(Me,ne)}ue((ce=ce.apply(V,N||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0}),x.logout=x.isLoggedIn=x.getAuthToken=x.authReady=x.login=void 0;const w=p("./createPopup"),a=p("./exchangeCode"),L=p("./helpers");function R(V){return T(this,void 0,void 0,function*(){if(!V.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!V.clientId)throw new Error("You must include the 'clientId' option");if(!V.scopes)throw new Error("You must include the 'scopes' option");const N=(0,L.getRandomString)(),Q=(0,L.getRandomString)(),ce=yield(0,L.sha256)(Q),Te={scope:V.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:N,redirect_uri:V.redirectUrl,client_id:V.clientId,code_challenge_method:"S256",code_challenge:ce},xe=`${(0,L.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(Te).toString()}`,ve={state:N,pkceVerifier:Q,options:V};if(V.mode==="popup"){const Me=yield(0,w.createPopup)(xe);return(0,a.exchangeCode)(Me,ve)}if(V.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(ve)),window.location.replace(xe);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}x.login=R,x.authReady=T(void 0,void 0,void 0,function*(){var V;if(typeof window>"u")return;const N=window.location.href,Q=localStorage.getItem("__osmAuthTemp");if(new URL(N).searchParams.get("code")){if(!((V=window.opener)===null||V===void 0)&&V.authComplete)window.opener.authComplete(N),window.close();else if(Q)try{const ce=JSON.parse(Q);yield(0,a.exchangeCode)(N,ce),localStorage.removeItem("__osmAuthTemp")}catch(ce){console.error("OSM Auth Error",ce)}}});const D=()=>{try{const V=localStorage.getItem("__osmAuth");return V?JSON.parse(V).accessToken:void 0}catch{return}};x.getAuthToken=D;const C=()=>!!(0,x.getAuthToken)();x.isLoggedIn=C;function k(){localStorage.removeItem("__osmAuth")}x.logout=k},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0}),x.configure=x.getConfig=void 0;const T={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},w=()=>T;x.getConfig=w;function a(L){Object.assign(T,L)}x.configure=a},{}],40:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./api"),x),w(p("./auth"),x),w(p("./config"),x),w(p("./types"),x)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(p,v,x){Object.defineProperty(x,"__esModule",{value:!0})},{}],42:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}],43:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}],44:[function(p,v,x){var T=this&&this.__createBinding||(Object.create?function(a,L,R,D){D===void 0&&(D=R);var C=Object.getOwnPropertyDescriptor(L,R);(!C||("get"in C?!L.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return L[R]}}),Object.defineProperty(a,D,C)}:function(a,L,R,D){D===void 0&&(D=R),a[D]=L[R]}),w=this&&this.__exportStar||function(a,L){for(var R in a)R!=="default"&&!Object.prototype.hasOwnProperty.call(L,R)&&T(L,a,R)};Object.defineProperty(x,"__esModule",{value:!0}),w(p("./changesets"),x),w(p("./features"),x),w(p("./general"),x),w(p("./notes"),x),w(p("./osmPatch"),x),w(p("./user"),x)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}],46:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}],47:[function(p,v,x){arguments[4][41][0].apply(x,arguments)},{dup:41}]},{},[40])(40)})}(Sg)),Sg.exports}var wl=dE();const mx=()=>{const[u,c]=zt.useState(!1);zt.useEffect(()=>{c(wl.isLoggedIn())},[]);const p=zt.useCallback(()=>{(async()=>(await wl.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),c(wl.isLoggedIn()),window.location.reload()))()},[]),v=zt.useCallback(()=>{(async()=>(wl.logout(),c(!1)))()},[]);return Mt.jsx(Mt.Fragment,{children:u?Mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:v,children:"logout"}):Mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:p,children:"login"})})},fE=()=>{const[u,c]=zt.useState(!1),[p,v]=zt.useState(void 0);return zt.useEffect(()=>{c(wl.isLoggedIn())},[]),zt.useEffect(()=>{u&&(async()=>{const x=await wl.getUser("me");v(x)})()},[u]),Mt.jsx(Mt.Fragment,{children:p?Mt.jsx("img",{style:{width:"44px",height:"44px"},src:p.img.href,alt:p.display_name,title:p.display_name}):Mt.jsx("img",{})})},pE=()=>{const[u,c]=zt.useState(!1),[p,v]=zt.useState(void 0);return zt.useEffect(()=>{c(wl.isLoggedIn())},[]),zt.useEffect(()=>{u&&(async()=>{const x=await wl.getUser("me");v(x)})()},[u]),Mt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[Mt.jsxs("div",{children:[Mt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),p?Mt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",p==null?void 0:p.display_name,", You have"," ",p==null?void 0:p.changesets.count," changesets."]}):Mt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),Mt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[Mt.jsx("div",{children:Mt.jsx(fE,{})}),Mt.jsx("div",{children:Mt.jsx(mx,{})})]})]})},gx=({feature:u})=>{var p;const c=JSON.parse((p=u.properties)==null?void 0:p.center);return Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(c[0]*1e4)/1e4]}),", ",Mt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(c[1]*1e4)/1e4," "]})]})},mE=({feature:u})=>Mt.jsx(Mt.Fragment,{children:u.properties&&Object.keys(u.properties).map(c=>{var p;if(c.startsWith("addr"))return Mt.jsxs("div",{className:c,children:[Mt.jsx("span",{className:"underline",children:c})," = ",Mt.jsx("span",{children:(p=u.properties)==null?void 0:p[c]})]})})});function yf(u,c,p){return parseInt(u.substr(c,p),16)}function yx(u){return u|=0,u<0?"00":u<16?"0"+u.toString(16):u<256?u.toString(16):"ff"}function Eg(u,c,p){return p=p<0?p+6:p>6?p-6:p,yx(255*(p<1?u+(c-u)*p:p<3?c:p<4?u+(c-u)*(4-p):u))}function gE(u){if(/^#[0-9a-f]{3,8}$/i.test(u)){let c;const p=u.length;if(p<6){const v=u[1],x=u[2],T=u[3],w=u[4]||"";c="#"+v+v+x+x+T+T+w+w}return(p==7||p>8)&&(c=u),c}}function yE(u,c,p){let v;if(c==0){const x=yx(p*255);v=x+x+x}else{const x=p<=.5?p*(c+1):p+c-p*c,T=p*2-x;v=Eg(T,x,u*6+2)+Eg(T,x,u*6)+Eg(T,x,u*6-2)}return"#"+v}function ff(u,c,p){const v=[.55,.5,.5,.46,.6,.55,.55],x=v[u*6+.5|0];return p=p<.5?p*x*2:x+(p-.5)*(1-x)*2,yE(u,c,p)}const vE=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},c_={V:"jdenticon_config",n:"config"};var _E={};function xE(u,c){const p=_E[c_.n]||vE[c_.V]||{},v=p.lightness||{},x=p.saturation||{},T="color"in x?x.color:x,w=x.grayscale,a=p.backColor,L=p.padding;function R(C,k){let V=v[C];return V&&V.length>1||(V=k),function(N){return N=V[0]+N*(V[1]-V[0]),N<0?0:N>1?1:N}}function D(C){const k=p.hues;let V;return k&&k.length>0&&(V=k[0|.999*C*k.length]),typeof V=="number"?(V/360%1+1)%1:C}return{W:D,o:typeof T=="number"?T:.5,D:typeof w=="number"?w:0,p:R("color",[.4,.8]),F:R("grayscale",[.3,.9]),G:gE(a),X:typeof L=="number"?L:c}}class Up{constructor(c,p){this.x=c,this.y=p}}class vx{constructor(c,p,v,x){this.q=c,this.t=p,this.H=v,this.Y=x}I(c,p,v,x){const T=this.q+this.H,w=this.t+this.H,a=this.Y;return a===1?new Up(T-p-(x||0),this.t+c):a===2?new Up(T-c-(v||0),w-p-(x||0)):a===3?new Up(this.q+p,w-c-(v||0)):new Up(this.q+c,this.t+p)}}const wE=new vx(0,0,0,0);class bE{constructor(c){this.J=c,this.u=wE}g(c,p){const v=p?-2:2,x=[];for(let T=p?c.length-2:0;T<c.length&&T>=0;T+=v)x.push(this.u.I(c[T],c[T+1]));this.J.g(x)}h(c,p,v,x){const T=this.u.I(c,p,v,v);this.J.h(T,v,x)}i(c,p,v,x,T){this.g([c,p,c+v,p,c+v,p+x,c,p+x],T)}j(c,p,v,x,T,w){const a=[c+v,p,c+v,p+x,c,p+x,c,p];a.splice((T||0)%4*2,2),this.g(a,w)}K(c,p,v,x,T){this.g([c+v/2,p,c+v,p+x/2,c+v/2,p+x,c,p+x/2],T)}}function SE(u,c,p,v){u=u%14;let x,T,w,a,L,R;u?u==1?(w=0|p*.5,a=0|p*.8,c.j(p-w,0,w,a,2)):u==2?(w=0|p/3,c.i(w,w,p-w,p-w)):u==3?(L=p*.1,R=p<6?1:p<8?2:0|p*.25,L=L>1?0|L:L>.5?1:L,c.i(R,R,p-L-R,p-L-R)):u==4?(T=0|p*.15,w=0|p*.5,c.h(p-w-T,p-w-T,w)):u==5?(L=p*.1,R=L*4,R>3&&(R=0|R),c.i(0,0,p,p),c.g([R,R,p-L,R,R+(p-R-L)/2,p-L],!0)):u==6?c.g([0,0,p,0,p,p*.7,p*.4,p*.4,p*.7,p,0,p]):u==7?c.j(p/2,p/2,p/2,p/2,3):u==8?(c.i(0,0,p,p/2),c.i(0,p/2,p/2,p/2),c.j(p/2,p/2,p/2,p/2,1)):u==9?(L=p*.14,R=p<4?1:p<6?2:0|p*.35,L=p<8?L:0|L,c.i(0,0,p,p),c.i(R,R,p-R-L,p-R-L,!0)):u==10?(L=p*.12,R=L*3,c.i(0,0,p,p),c.h(R,R,p-L-R,!0)):u==11?c.j(p/2,p/2,p/2,p/2,3):u==12?(T=p*.25,c.i(0,0,p,p),c.K(T,T,p-T,p-T,!0)):!v&&(T=p*.4,w=p*1.2,c.h(T,T,w)):(x=p*.42,c.g([0,0,p,0,p,p-x*2,p-x,p,0,p]))}function h_(u,c,p){u=u%4;let v;u?u==1?c.j(0,p/2,p,p/2,0):u==2?c.K(0,0,p,p):(v=p/6,c.h(v,v,p-2*v)):c.j(0,0,p,p,0)}function EE(u,c){return u=c.W(u),[ff(u,c.D,c.F(0)),ff(u,c.o,c.p(.5)),ff(u,c.D,c.F(1)),ff(u,c.o,c.p(1)),ff(u,c.o,c.p(0))]}function TE(u,c,p){const v=xE(p,.08);v.G&&u.m(v.G);let x=u.k;const T=.5+x*v.X|0;x-=T*2;const w=new bE(u),a=0|x/4,L=0|T+x/2-a*2,R=0|T+x/2-a*2;function D(ce,Te,xe,ve,Me){const ne=yf(c,xe,1);let ue=ve?yf(c,ve,1):0;u.L(k[V[ce]]);for(let M=0;M<Me.length;M++)w.u=new vx(L+Me[M][0]*a,R+Me[M][1]*a,a,ue++%4),Te(ne,w,a,M);u.M()}const C=yf(c,-7)/268435455,k=EE(C,v),V=[];let N;function Q(ce){if(ce.indexOf(N)>=0){for(let Te=0;Te<ce.length;Te++)if(V.indexOf(ce[Te])>=0)return!0}}for(let ce=0;ce<3;ce++)N=yf(c,8+ce,1)%k.length,(Q([0,4])||Q([2,3]))&&(N=1),V.push(N);D(0,h_,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),D(1,h_,4,5,[[0,0],[3,0],[3,3],[0,3]]),D(2,SE,1,null,[[1,1],[2,1],[2,2],[1,2]]),u.finish()}function IE(u){var v=0,x=0,T=encodeURI(u)+"%80",w=[],a,L=[],R=1732584193,D=4023233417,C=~R,k=~D,V=3285377520,N=[R,D,C,k,V],Q=0,ce="";function Te(xe,ve){return xe<<ve|xe>>>32-ve}for(;v<T.length;x++)w[x>>2]=w[x>>2]|(T[v]=="%"?parseInt(T.substring(v+1,v+=3),16):T.charCodeAt(v++))<<(3-(x&3))*8;for(a=((x+7>>6)+1)*16,w[a-1]=x*8-8;Q<a;Q+=16){for(v=0;v<80;v++)x=Te(R,5)+V+(v<20?(D&C^~D&k)+1518500249:v<40?(D^C^k)+1859775393:v<60?(D&C^D&k^C&k)+2400959708:(D^C^k)+3395469782)+(L[v]=v<16?w[Q+v]|0:Te(L[v-3]^L[v-8]^L[v-14]^L[v-16],1)),V=k,k=C,C=Te(D,30),D=R,R=x;N[0]=R=N[0]+R|0,N[1]=D=N[1]+D|0,N[2]=C=N[2]+C|0,N[3]=k=N[3]+k|0,N[4]=V=N[4]+V|0}for(v=0;v<40;v++)ce+=(N[v>>3]>>>(7-(v&7))*4&15).toString(16);return ce}function CE(u){return/^[0-9a-f]{11,}$/i.test(u)&&u}function PE(u){return IE(u==null?"":""+u)}typeof document<"u"&&document.querySelectorAll.bind(document);function vd(u){return(u*10+.5|0)/10}class AE{constructor(){this.v=""}g(c){let p="";for(let v=0;v<c.length;v++)p+=(v?"L":"M")+vd(c[v].x)+" "+vd(c[v].y);this.v+=p+"Z"}h(c,p,v){const x=v?0:1,T=vd(p/2),w=vd(p),a="a"+T+","+T+" 0 1,"+x+" ";this.v+="M"+vd(c.x)+" "+vd(c.y+p/2)+a+w+",0"+a+-w+",0"}}class ME{constructor(c){this.A,this.B={},this.O=c,this.k=c.k}m(c){const p=/^(#......)(..)?/.exec(c),v=p[2]?yf(p[2],0)/255:1;this.O.m(p[1],v)}L(c){this.A=this.B[c]||(this.B[c]=new AE)}M(){}g(c){this.A.g(c)}h(c,p,v){this.A.h(c,p,v)}finish(){const c=this.B;for(let p in c)c.hasOwnProperty(p)&&this.O.P(p,c[p].v)}}const kE={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class zE{constructor(c){this.k=c,this.C='<svg xmlns="'+kE.R+'" width="'+c+'" height="'+c+'" viewBox="0 0 '+c+" "+c+'">'}m(c,p){p&&(this.C+='<rect width="100%" height="100%" fill="'+c+'" opacity="'+p.toFixed(2)+'"/>')}P(c,p){this.C+='<path fill="'+c+'" d="'+p+'"/>'}toString(){return this.C+"</svg>"}}function RE(u,c,p){const v=new zE(c);return TE(new ME(v),CE(u)||PE(u),p),v.toString()}const FE=({feature:u,size:c})=>u.properties===null?null:Mt.jsx(Mt.Fragment,{children:u.properties.userIconHref.length>0?Mt.jsx("img",{src:u.properties.userIconHref,style:{width:c+"px",height:c+"px"}}):Mt.jsx("span",{dangerouslySetInnerHTML:{__html:RE(u.properties.user||"noname",c)}})}),OE=({feature:u})=>{var c;return(c=u.properties)!=null&&c.uid?Mt.jsxs("span",{children:["Last edited by: ",u.properties.user]}):null};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const jE={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},LE=({viewState:u})=>{const[c,p]=zt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return zt.useEffect(()=>{p(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[u]),Mt.jsx(Mt.Fragment,{children:u&&c&&Mt.jsxs("a",{href:c,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[Mt.jsx(Pc,{icon:jE,style:{padding:"0px 3px"}}),Mt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var Tg={};class os{constructor(){this._partials=new Float64Array(32),this._n=0}add(c){const p=this._partials;let v=0;for(let x=0;x<this._n&&x<32;x++){const T=p[x],w=c+T,a=Math.abs(c)<Math.abs(T)?c-(w-T):T-(w-c);a&&(p[v++]=a),c=w}return p[v]=c,this._n=v+1,this}valueOf(){const c=this._partials;let p=this._n,v,x,T,w=0;if(p>0){for(w=c[--p];p>0&&(v=w,x=c[--p],w=v+x,T=x-(w-v),!T););p>0&&(T<0&&c[p-1]<0||T>0&&c[p-1]>0)&&(x=T*2,v=w+x,x==v-w&&(w=v))}return w}}function*DE(u){for(const c of u)yield*c}function _x(u){return Array.from(DE(u))}function Sd(u,c,p){u=+u,c=+c,p=(x=arguments.length)<2?(c=u,u=0,1):x<3?1:+p;for(var v=-1,x=Math.max(0,Math.ceil((c-u)/p))|0,T=new Array(x);++v<x;)T[v]=u+v*p;return T}var Nn=1e-6,Ff=1e-12,sr=Math.PI,ki=sr/2,sm=sr/4,Fs=sr*2,Xr=180/sr,$n=sr/180,vr=Math.abs,Fd=Math.atan,Os=Math.atan2,Mn=Math.cos,Vp=Math.ceil,xx=Math.exp,jy=Math.hypot,am=Math.log,Ig=Math.pow,wn=Math.sin,Ja=Math.sign||function(u){return u>0?1:u<0?-1:0},So=Math.sqrt,E0=Math.tan;function wx(u){return u>1?0:u<-1?sr:Math.acos(u)}function js(u){return u>1?ki:u<-1?-ki:Math.asin(u)}function d_(u){return(u=wn(u/2))*u}function bi(){}function lm(u,c){u&&p_.hasOwnProperty(u.type)&&p_[u.type](u,c)}var f_={Feature:function(u,c){lm(u.geometry,c)},FeatureCollection:function(u,c){for(var p=u.features,v=-1,x=p.length;++v<x;)lm(p[v].geometry,c)}},p_={Sphere:function(u,c){c.sphere()},Point:function(u,c){u=u.coordinates,c.point(u[0],u[1],u[2])},MultiPoint:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)u=p[v],c.point(u[0],u[1],u[2])},LineString:function(u,c){Ly(u.coordinates,c,0)},MultiLineString:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)Ly(p[v],c,0)},Polygon:function(u,c){m_(u.coordinates,c)},MultiPolygon:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)m_(p[v],c)},GeometryCollection:function(u,c){for(var p=u.geometries,v=-1,x=p.length;++v<x;)lm(p[v],c)}};function Ly(u,c,p){var v=-1,x=u.length-p,T;for(c.lineStart();++v<x;)T=u[v],c.point(T[0],T[1],T[2]);c.lineEnd()}function m_(u,c){var p=-1,v=u.length;for(c.polygonStart();++p<v;)Ly(u[p],c,1);c.polygonEnd()}function xl(u,c){u&&f_.hasOwnProperty(u.type)?f_[u.type](u,c):lm(u,c)}var um=new os,cm=new os,bx,Sx,Dy,By,Ny,gu={point:bi,lineStart:bi,lineEnd:bi,polygonStart:function(){um=new os,gu.lineStart=BE,gu.lineEnd=NE},polygonEnd:function(){var u=+um;cm.add(u<0?Fs+u:u),this.lineStart=this.lineEnd=this.point=bi},sphere:function(){cm.add(Fs)}};function BE(){gu.point=UE}function NE(){Ex(bx,Sx)}function UE(u,c){gu.point=Ex,bx=u,Sx=c,u*=$n,c*=$n,Dy=u,By=Mn(c=c/2+sm),Ny=wn(c)}function Ex(u,c){u*=$n,c*=$n,c=c/2+sm;var p=u-Dy,v=p>=0?1:-1,x=v*p,T=Mn(c),w=wn(c),a=Ny*w,L=By*T+a*Mn(x),R=a*v*wn(x);um.add(Os(R,L)),Dy=u,By=T,Ny=w}function VE(u){return cm=new os,xl(u,gu),cm*2}function hm(u){return[Os(u[1],u[0]),js(u[2])]}function kh(u){var c=u[0],p=u[1],v=Mn(p);return[v*Mn(c),v*wn(c),wn(p)]}function $p(u,c){return u[0]*c[0]+u[1]*c[1]+u[2]*c[2]}function Ad(u,c){return[u[1]*c[2]-u[2]*c[1],u[2]*c[0]-u[0]*c[2],u[0]*c[1]-u[1]*c[0]]}function Cg(u,c){u[0]+=c[0],u[1]+=c[1],u[2]+=c[2]}function Gp(u,c){return[u[0]*c,u[1]*c,u[2]*c]}function dm(u){var c=So(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]);u[0]/=c,u[1]/=c,u[2]/=c}var wi,Qs,Mi,Pa,Ch,Tx,Ix,Id,Cf,Cc,Ju,qu={point:Uy,lineStart:g_,lineEnd:y_,polygonStart:function(){qu.point=Px,qu.lineStart=$E,qu.lineEnd=GE,Cf=new os,gu.polygonStart()},polygonEnd:function(){gu.polygonEnd(),qu.point=Uy,qu.lineStart=g_,qu.lineEnd=y_,um<0?(wi=-(Mi=180),Qs=-(Pa=90)):Cf>Nn?Pa=90:Cf<-Nn&&(Qs=-90),Ju[0]=wi,Ju[1]=Mi},sphere:function(){wi=-(Mi=180),Qs=-(Pa=90)}};function Uy(u,c){Cc.push(Ju=[wi=u,Mi=u]),c<Qs&&(Qs=c),c>Pa&&(Pa=c)}function Cx(u,c){var p=kh([u*$n,c*$n]);if(Id){var v=Ad(Id,p),x=[v[1],-v[0],0],T=Ad(x,v);dm(T),T=hm(T);var w=u-Ch,a=w>0?1:-1,L=T[0]*Xr*a,R,D=vr(w)>180;D^(a*Ch<L&&L<a*u)?(R=T[1]*Xr,R>Pa&&(Pa=R)):(L=(L+360)%360-180,D^(a*Ch<L&&L<a*u)?(R=-T[1]*Xr,R<Qs&&(Qs=R)):(c<Qs&&(Qs=c),c>Pa&&(Pa=c))),D?u<Ch?Ca(wi,u)>Ca(wi,Mi)&&(Mi=u):Ca(u,Mi)>Ca(wi,Mi)&&(wi=u):Mi>=wi?(u<wi&&(wi=u),u>Mi&&(Mi=u)):u>Ch?Ca(wi,u)>Ca(wi,Mi)&&(Mi=u):Ca(u,Mi)>Ca(wi,Mi)&&(wi=u)}else Cc.push(Ju=[wi=u,Mi=u]);c<Qs&&(Qs=c),c>Pa&&(Pa=c),Id=p,Ch=u}function g_(){qu.point=Cx}function y_(){Ju[0]=wi,Ju[1]=Mi,qu.point=Uy,Id=null}function Px(u,c){if(Id){var p=u-Ch;Cf.add(vr(p)>180?p+(p>0?360:-360):p)}else Tx=u,Ix=c;gu.point(u,c),Cx(u,c)}function $E(){gu.lineStart()}function GE(){Px(Tx,Ix),gu.lineEnd(),vr(Cf)>Nn&&(wi=-(Mi=180)),Ju[0]=wi,Ju[1]=Mi,Id=null}function Ca(u,c){return(c-=u)<0?c+360:c}function HE(u,c){return u[0]-c[0]}function v_(u,c){return u[0]<=u[1]?u[0]<=c&&c<=u[1]:c<u[0]||u[1]<c}function ZE(u){var c,p,v,x,T,w,a;if(Pa=Mi=-(wi=Qs=1/0),Cc=[],xl(u,qu),p=Cc.length){for(Cc.sort(HE),c=1,v=Cc[0],T=[v];c<p;++c)x=Cc[c],v_(v,x[0])||v_(v,x[1])?(Ca(v[0],x[1])>Ca(v[0],v[1])&&(v[1]=x[1]),Ca(x[0],v[1])>Ca(v[0],v[1])&&(v[0]=x[0])):T.push(v=x);for(w=-1/0,p=T.length-1,c=0,v=T[p];c<=p;v=x,++c)x=T[c],(a=Ca(v[1],x[0]))>w&&(w=a,wi=x[0],Mi=v[1])}return Cc=Ju=null,wi===1/0||Qs===1/0?[[NaN,NaN],[NaN,NaN]]:[[wi,Qs],[Mi,Pa]]}var vf,fm,pm,mm,gm,ym,vm,_m,Vy,$y,Gy,Ax,Mx,ks,zs,Rs,bl={sphere:bi,point:T0,lineStart:__,lineEnd:x_,polygonStart:function(){bl.lineStart=XE,bl.lineEnd=KE},polygonEnd:function(){bl.lineStart=__,bl.lineEnd=x_}};function T0(u,c){u*=$n,c*=$n;var p=Mn(c);$f(p*Mn(u),p*wn(u),wn(c))}function $f(u,c,p){++vf,pm+=(u-pm)/vf,mm+=(c-mm)/vf,gm+=(p-gm)/vf}function __(){bl.point=WE}function WE(u,c){u*=$n,c*=$n;var p=Mn(c);ks=p*Mn(u),zs=p*wn(u),Rs=wn(c),bl.point=qE,$f(ks,zs,Rs)}function qE(u,c){u*=$n,c*=$n;var p=Mn(c),v=p*Mn(u),x=p*wn(u),T=wn(c),w=Os(So((w=zs*T-Rs*x)*w+(w=Rs*v-ks*T)*w+(w=ks*x-zs*v)*w),ks*v+zs*x+Rs*T);fm+=w,ym+=w*(ks+(ks=v)),vm+=w*(zs+(zs=x)),_m+=w*(Rs+(Rs=T)),$f(ks,zs,Rs)}function x_(){bl.point=T0}function XE(){bl.point=YE}function KE(){kx(Ax,Mx),bl.point=T0}function YE(u,c){Ax=u,Mx=c,u*=$n,c*=$n,bl.point=kx;var p=Mn(c);ks=p*Mn(u),zs=p*wn(u),Rs=wn(c),$f(ks,zs,Rs)}function kx(u,c){u*=$n,c*=$n;var p=Mn(c),v=p*Mn(u),x=p*wn(u),T=wn(c),w=zs*T-Rs*x,a=Rs*v-ks*T,L=ks*x-zs*v,R=jy(w,a,L),D=js(R),C=R&&-D/R;Vy.add(C*w),$y.add(C*a),Gy.add(C*L),fm+=D,ym+=D*(ks+(ks=v)),vm+=D*(zs+(zs=x)),_m+=D*(Rs+(Rs=T)),$f(ks,zs,Rs)}function JE(u){vf=fm=pm=mm=gm=ym=vm=_m=0,Vy=new os,$y=new os,Gy=new os,xl(u,bl);var c=+Vy,p=+$y,v=+Gy,x=jy(c,p,v);return x<Ff&&(c=ym,p=vm,v=_m,fm<Nn&&(c=pm,p=mm,v=gm),x=jy(c,p,v),x<Ff)?[NaN,NaN]:[Os(p,c)*Xr,js(v/x)*Xr]}function _d(u){return function(){return u}}function Hy(u,c){function p(v,x){return v=u(v,x),c(v[0],v[1])}return u.invert&&c.invert&&(p.invert=function(v,x){return v=c.invert(v,x),v&&u.invert(v[0],v[1])}),p}function Zy(u,c){return[vr(u)>sr?u+Math.round(-u/Fs)*Fs:u,c]}Zy.invert=Zy;function I0(u,c,p){return(u%=Fs)?c||p?Hy(b_(u),S_(c,p)):b_(u):c||p?S_(c,p):Zy}function w_(u){return function(c,p){return c+=u,[c>sr?c-Fs:c<-sr?c+Fs:c,p]}}function b_(u){var c=w_(u);return c.invert=w_(-u),c}function S_(u,c){var p=Mn(u),v=wn(u),x=Mn(c),T=wn(c);function w(a,L){var R=Mn(L),D=Mn(a)*R,C=wn(a)*R,k=wn(L),V=k*p+D*v;return[Os(C*x-V*T,D*p-k*v),js(V*x+C*T)]}return w.invert=function(a,L){var R=Mn(L),D=Mn(a)*R,C=wn(a)*R,k=wn(L),V=k*x-C*T;return[Os(C*x+k*T,D*p+V*v),js(V*p-D*v)]},w}function zx(u){u=I0(u[0]*$n,u[1]*$n,u.length>2?u[2]*$n:0);function c(p){return p=u(p[0]*$n,p[1]*$n),p[0]*=Xr,p[1]*=Xr,p}return c.invert=function(p){return p=u.invert(p[0]*$n,p[1]*$n),p[0]*=Xr,p[1]*=Xr,p},c}function Rx(u,c,p,v,x,T){if(p){var w=Mn(c),a=wn(c),L=v*p;x==null?(x=c+v*Fs,T=c-L/2):(x=E_(w,x),T=E_(w,T),(v>0?x<T:x>T)&&(x+=v*Fs));for(var R,D=x;v>0?D>T:D<T;D-=L)R=hm([w,-a*Mn(D),-a*wn(D)]),u.point(R[0],R[1])}}function E_(u,c){c=kh(c),c[0]-=u,dm(c);var p=wx(-c[1]);return((-c[2]<0?-p:p)+Fs-Nn)%Fs}function QE(){var u=_d([0,0]),c=_d(90),p=_d(6),v,x,T={point:w};function w(L,R){v.push(L=x(L,R)),L[0]*=Xr,L[1]*=Xr}function a(){var L=u.apply(this,arguments),R=c.apply(this,arguments)*$n,D=p.apply(this,arguments)*$n;return v=[],x=I0(-L[0]*$n,-L[1]*$n,0).invert,Rx(T,R,D,1),L={type:"Polygon",coordinates:[v]},v=x=null,L}return a.center=function(L){return arguments.length?(u=typeof L=="function"?L:_d([+L[0],+L[1]]),a):u},a.radius=function(L){return arguments.length?(c=typeof L=="function"?L:_d(+L),a):c},a.precision=function(L){return arguments.length?(p=typeof L=="function"?L:_d(+L),a):p},a}function Fx(){var u=[],c;return{point:function(p,v,x){c.push([p,v,x])},lineStart:function(){u.push(c=[])},lineEnd:bi,rejoin:function(){u.length>1&&u.push(u.pop().concat(u.shift()))},result:function(){var p=u;return u=[],c=null,p}}}function Qp(u,c){return vr(u[0]-c[0])<Nn&&vr(u[1]-c[1])<Nn}function Hp(u,c,p,v){this.x=u,this.z=c,this.o=p,this.e=v,this.v=!1,this.n=this.p=null}function Ox(u,c,p,v,x){var T=[],w=[],a,L;if(u.forEach(function(N){if(!((Q=N.length-1)<=0)){var Q,ce=N[0],Te=N[Q],xe;if(Qp(ce,Te)){if(!ce[2]&&!Te[2]){for(x.lineStart(),a=0;a<Q;++a)x.point((ce=N[a])[0],ce[1]);x.lineEnd();return}Te[0]+=2*Nn}T.push(xe=new Hp(ce,N,null,!0)),w.push(xe.o=new Hp(ce,null,xe,!1)),T.push(xe=new Hp(Te,N,null,!1)),w.push(xe.o=new Hp(Te,null,xe,!0))}}),!!T.length){for(w.sort(c),T_(T),T_(w),a=0,L=w.length;a<L;++a)w[a].e=p=!p;for(var R=T[0],D,C;;){for(var k=R,V=!0;k.v;)if((k=k.n)===R)return;D=k.z,x.lineStart();do{if(k.v=k.o.v=!0,k.e){if(V)for(a=0,L=D.length;a<L;++a)x.point((C=D[a])[0],C[1]);else v(k.x,k.n.x,1,x);k=k.n}else{if(V)for(D=k.p.z,a=D.length-1;a>=0;--a)x.point((C=D[a])[0],C[1]);else v(k.x,k.p.x,-1,x);k=k.p}k=k.o,D=k.z,V=!V}while(!k.v);x.lineEnd()}}}function T_(u){if(c=u.length){for(var c,p=0,v=u[0],x;++p<c;)v.n=x=u[p],x.p=v,v=x;v.n=x=u[0],x.p=v}}function Pg(u){return vr(u[0])<=sr?u[0]:Ja(u[0])*((vr(u[0])+sr)%Fs-sr)}function jx(u,c){var p=Pg(c),v=c[1],x=wn(v),T=[wn(p),-Mn(p),0],w=0,a=0,L=new os;x===1?v=ki+Nn:x===-1&&(v=-ki-Nn);for(var R=0,D=u.length;R<D;++R)if(k=(C=u[R]).length)for(var C,k,V=C[k-1],N=Pg(V),Q=V[1]/2+sm,ce=wn(Q),Te=Mn(Q),xe=0;xe<k;++xe,N=Me,ce=ue,Te=M,V=ve){var ve=C[xe],Me=Pg(ve),ne=ve[1]/2+sm,ue=wn(ne),M=Mn(ne),$=Me-N,U=$>=0?1:-1,de=U*$,K=de>sr,j=ce*ue;if(L.add(Os(j*U*wn(de),Te*M+j*Mn(de))),w+=K?$+U*Fs:$,K^N>=p^Me>=p){var W=Ad(kh(V),kh(ve));dm(W);var J=Ad(T,W);dm(J);var re=(K^$>=0?-1:1)*js(J[2]);(v>re||v===re&&(W[0]||W[1]))&&(a+=K^$>=0?1:-1)}}return(w<-Nn||w<Nn&&L<-Ff)^a&1}function Lx(u,c,p,v){return function(x){var T=c(x),w=Fx(),a=c(w),L=!1,R,D,C,k={point:V,lineStart:Q,lineEnd:ce,polygonStart:function(){k.point=Te,k.lineStart=xe,k.lineEnd=ve,D=[],R=[]},polygonEnd:function(){k.point=V,k.lineStart=Q,k.lineEnd=ce,D=_x(D);var Me=jx(R,v);D.length?(L||(x.polygonStart(),L=!0),Ox(D,tT,Me,p,x)):Me&&(L||(x.polygonStart(),L=!0),x.lineStart(),p(null,null,1,x),x.lineEnd()),L&&(x.polygonEnd(),L=!1),D=R=null},sphere:function(){x.polygonStart(),x.lineStart(),p(null,null,1,x),x.lineEnd(),x.polygonEnd()}};function V(Me,ne){u(Me,ne)&&x.point(Me,ne)}function N(Me,ne){T.point(Me,ne)}function Q(){k.point=N,T.lineStart()}function ce(){k.point=V,T.lineEnd()}function Te(Me,ne){C.push([Me,ne]),a.point(Me,ne)}function xe(){a.lineStart(),C=[]}function ve(){Te(C[0][0],C[0][1]),a.lineEnd();var Me=a.clean(),ne=w.result(),ue,M=ne.length,$,U,de;if(C.pop(),R.push(C),C=null,!!M){if(Me&1){if(U=ne[0],($=U.length-1)>0){for(L||(x.polygonStart(),L=!0),x.lineStart(),ue=0;ue<$;++ue)x.point((de=U[ue])[0],de[1]);x.lineEnd()}return}M>1&&Me&2&&ne.push(ne.pop().concat(ne.shift())),D.push(ne.filter(eT))}}return k}}function eT(u){return u.length>1}function tT(u,c){return((u=u.x)[0]<0?u[1]-ki-Nn:ki-u[1])-((c=c.x)[0]<0?c[1]-ki-Nn:ki-c[1])}const Wy=Lx(function(){return!0},nT,iT,[-sr,-ki]);function nT(u){var c=NaN,p=NaN,v=NaN,x;return{lineStart:function(){u.lineStart(),x=1},point:function(T,w){var a=T>0?sr:-sr,L=vr(T-c);vr(L-sr)<Nn?(u.point(c,p=(p+w)/2>0?ki:-ki),u.point(v,p),u.lineEnd(),u.lineStart(),u.point(a,p),u.point(T,p),x=0):v!==a&&L>=sr&&(vr(c-v)<Nn&&(c-=v*Nn),vr(T-a)<Nn&&(T-=a*Nn),p=rT(c,p,T,w),u.point(v,p),u.lineEnd(),u.lineStart(),u.point(a,p),x=0),u.point(c=T,p=w),v=a},lineEnd:function(){u.lineEnd(),c=p=NaN},clean:function(){return 2-x}}}function rT(u,c,p,v){var x,T,w=wn(u-p);return vr(w)>Nn?Fd((wn(c)*(T=Mn(v))*wn(p)-wn(v)*(x=Mn(c))*wn(u))/(x*T*w)):(c+v)/2}function iT(u,c,p,v){var x;if(u==null)x=p*ki,v.point(-sr,x),v.point(0,x),v.point(sr,x),v.point(sr,0),v.point(sr,-x),v.point(0,-x),v.point(-sr,-x),v.point(-sr,0),v.point(-sr,x);else if(vr(u[0]-c[0])>Nn){var T=u[0]<c[0]?sr:-sr;x=p*T/2,v.point(-T,x),v.point(0,x),v.point(T,x)}else v.point(c[0],c[1])}function Dx(u){var c=Mn(u),p=6*$n,v=c>0,x=vr(c)>Nn;function T(D,C,k,V){Rx(V,u,p,k,D,C)}function w(D,C){return Mn(D)*Mn(C)>c}function a(D){var C,k,V,N,Q;return{lineStart:function(){N=V=!1,Q=1},point:function(ce,Te){var xe=[ce,Te],ve,Me=w(ce,Te),ne=v?Me?0:R(ce,Te):Me?R(ce+(ce<0?sr:-sr),Te):0;if(!C&&(N=V=Me)&&D.lineStart(),Me!==V&&(ve=L(C,xe),(!ve||Qp(C,ve)||Qp(xe,ve))&&(xe[2]=1)),Me!==V)Q=0,Me?(D.lineStart(),ve=L(xe,C),D.point(ve[0],ve[1])):(ve=L(C,xe),D.point(ve[0],ve[1],2),D.lineEnd()),C=ve;else if(x&&C&&v^Me){var ue;!(ne&k)&&(ue=L(xe,C,!0))&&(Q=0,v?(D.lineStart(),D.point(ue[0][0],ue[0][1]),D.point(ue[1][0],ue[1][1]),D.lineEnd()):(D.point(ue[1][0],ue[1][1]),D.lineEnd(),D.lineStart(),D.point(ue[0][0],ue[0][1],3)))}Me&&(!C||!Qp(C,xe))&&D.point(xe[0],xe[1]),C=xe,V=Me,k=ne},lineEnd:function(){V&&D.lineEnd(),C=null},clean:function(){return Q|(N&&V)<<1}}}function L(D,C,k){var V=kh(D),N=kh(C),Q=[1,0,0],ce=Ad(V,N),Te=$p(ce,ce),xe=ce[0],ve=Te-xe*xe;if(!ve)return!k&&D;var Me=c*Te/ve,ne=-c*xe/ve,ue=Ad(Q,ce),M=Gp(Q,Me),$=Gp(ce,ne);Cg(M,$);var U=ue,de=$p(M,U),K=$p(U,U),j=de*de-K*($p(M,M)-1);if(!(j<0)){var W=So(j),J=Gp(U,(-de-W)/K);if(Cg(J,M),J=hm(J),!k)return J;var re=D[0],le=C[0],te=D[1],oe=C[1],_e;le<re&&(_e=re,re=le,le=_e);var be=le-re,he=vr(be-sr)<Nn,Fe=he||be<Nn;if(!he&&oe<te&&(_e=te,te=oe,oe=_e),Fe?he?te+oe>0^J[1]<(vr(J[0]-re)<Nn?te:oe):te<=J[1]&&J[1]<=oe:be>sr^(re<=J[0]&&J[0]<=le)){var Oe=Gp(U,(-de+W)/K);return Cg(Oe,M),[J,hm(Oe)]}}}function R(D,C){var k=v?u:sr-u,V=0;return D<-k?V|=1:D>k&&(V|=2),C<-k?V|=4:C>k&&(V|=8),V}return Lx(w,a,T,v?[0,-u]:[-sr,u-sr])}function oT(u,c,p,v,x,T){var w=u[0],a=u[1],L=c[0],R=c[1],D=0,C=1,k=L-w,V=R-a,N;if(N=p-w,!(!k&&N>0)){if(N/=k,k<0){if(N<D)return;N<C&&(C=N)}else if(k>0){if(N>C)return;N>D&&(D=N)}if(N=x-w,!(!k&&N<0)){if(N/=k,k<0){if(N>C)return;N>D&&(D=N)}else if(k>0){if(N<D)return;N<C&&(C=N)}if(N=v-a,!(!V&&N>0)){if(N/=V,V<0){if(N<D)return;N<C&&(C=N)}else if(V>0){if(N>C)return;N>D&&(D=N)}if(N=T-a,!(!V&&N<0)){if(N/=V,V<0){if(N>C)return;N>D&&(D=N)}else if(V>0){if(N<D)return;N<C&&(C=N)}return D>0&&(u[0]=w+D*k,u[1]=a+D*V),C<1&&(c[0]=w+C*k,c[1]=a+C*V),!0}}}}}var _f=1e9,Zp=-_f;function Om(u,c,p,v){function x(R,D){return u<=R&&R<=p&&c<=D&&D<=v}function T(R,D,C,k){var V=0,N=0;if(R==null||(V=w(R,C))!==(N=w(D,C))||L(R,D)<0^C>0)do k.point(V===0||V===3?u:p,V>1?v:c);while((V=(V+C+4)%4)!==N);else k.point(D[0],D[1])}function w(R,D){return vr(R[0]-u)<Nn?D>0?0:3:vr(R[0]-p)<Nn?D>0?2:1:vr(R[1]-c)<Nn?D>0?1:0:D>0?3:2}function a(R,D){return L(R.x,D.x)}function L(R,D){var C=w(R,1),k=w(D,1);return C!==k?C-k:C===0?D[1]-R[1]:C===1?R[0]-D[0]:C===2?R[1]-D[1]:D[0]-R[0]}return function(R){var D=R,C=Fx(),k,V,N,Q,ce,Te,xe,ve,Me,ne,ue,M={point:$,lineStart:j,lineEnd:W,polygonStart:de,polygonEnd:K};function $(re,le){x(re,le)&&D.point(re,le)}function U(){for(var re=0,le=0,te=V.length;le<te;++le)for(var oe=V[le],_e=1,be=oe.length,he=oe[0],Fe,Oe,De=he[0],Ke=he[1];_e<be;++_e)Fe=De,Oe=Ke,he=oe[_e],De=he[0],Ke=he[1],Oe<=v?Ke>v&&(De-Fe)*(v-Oe)>(Ke-Oe)*(u-Fe)&&++re:Ke<=v&&(De-Fe)*(v-Oe)<(Ke-Oe)*(u-Fe)&&--re;return re}function de(){D=C,k=[],V=[],ue=!0}function K(){var re=U(),le=ue&&re,te=(k=_x(k)).length;(le||te)&&(R.polygonStart(),le&&(R.lineStart(),T(null,null,1,R),R.lineEnd()),te&&Ox(k,a,re,T,R),R.polygonEnd()),D=R,k=V=N=null}function j(){M.point=J,V&&V.push(N=[]),ne=!0,Me=!1,xe=ve=NaN}function W(){k&&(J(Q,ce),Te&&Me&&C.rejoin(),k.push(C.result())),M.point=$,Me&&D.lineEnd()}function J(re,le){var te=x(re,le);if(V&&N.push([re,le]),ne)Q=re,ce=le,Te=te,ne=!1,te&&(D.lineStart(),D.point(re,le));else if(te&&Me)D.point(re,le);else{var oe=[xe=Math.max(Zp,Math.min(_f,xe)),ve=Math.max(Zp,Math.min(_f,ve))],_e=[re=Math.max(Zp,Math.min(_f,re)),le=Math.max(Zp,Math.min(_f,le))];oT(oe,_e,u,c,p,v)?(Me||(D.lineStart(),D.point(oe[0],oe[1])),D.point(_e[0],_e[1]),te||D.lineEnd(),ue=!1):te&&(D.lineStart(),D.point(re,le),ue=!1)}xe=re,ve=le,Me=te}return M}}function sT(){var u=0,c=0,p=960,v=500,x,T,w;return w={stream:function(a){return x&&T===a?x:x=Om(u,c,p,v)(T=a)},extent:function(a){return arguments.length?(u=+a[0][0],c=+a[0][1],p=+a[1][0],v=+a[1][1],x=T=null,w):[[u,c],[p,v]]}}}var qy,Xy,em,tm,Md={sphere:bi,point:bi,lineStart:aT,lineEnd:bi,polygonStart:bi,polygonEnd:bi};function aT(){Md.point=uT,Md.lineEnd=lT}function lT(){Md.point=Md.lineEnd=bi}function uT(u,c){u*=$n,c*=$n,Xy=u,em=wn(c),tm=Mn(c),Md.point=cT}function cT(u,c){u*=$n,c*=$n;var p=wn(c),v=Mn(c),x=vr(u-Xy),T=Mn(x),w=wn(x),a=v*w,L=tm*p-em*v*T,R=em*p+tm*v*T;qy.add(Os(So(a*a+L*L),R)),Xy=u,em=p,tm=v}function Bx(u){return qy=new os,xl(u,Md),+qy}var Ky=[null,null],hT={type:"LineString",coordinates:Ky};function xm(u,c){return Ky[0]=u,Ky[1]=c,Bx(hT)}var I_={Feature:function(u,c){return wm(u.geometry,c)},FeatureCollection:function(u,c){for(var p=u.features,v=-1,x=p.length;++v<x;)if(wm(p[v].geometry,c))return!0;return!1}},C_={Sphere:function(){return!0},Point:function(u,c){return P_(u.coordinates,c)},MultiPoint:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)if(P_(p[v],c))return!0;return!1},LineString:function(u,c){return A_(u.coordinates,c)},MultiLineString:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)if(A_(p[v],c))return!0;return!1},Polygon:function(u,c){return M_(u.coordinates,c)},MultiPolygon:function(u,c){for(var p=u.coordinates,v=-1,x=p.length;++v<x;)if(M_(p[v],c))return!0;return!1},GeometryCollection:function(u,c){for(var p=u.geometries,v=-1,x=p.length;++v<x;)if(wm(p[v],c))return!0;return!1}};function wm(u,c){return u&&C_.hasOwnProperty(u.type)?C_[u.type](u,c):!1}function P_(u,c){return xm(u,c)===0}function A_(u,c){for(var p,v,x,T=0,w=u.length;T<w;T++){if(v=xm(u[T],c),v===0||T>0&&(x=xm(u[T],u[T-1]),x>0&&p<=x&&v<=x&&(p+v-x)*(1-Math.pow((p-v)/x,2))<Ff*x))return!0;p=v}return!1}function M_(u,c){return!!jx(u.map(dT),Nx(c))}function dT(u){return u=u.map(Nx),u.pop(),u}function Nx(u){return[u[0]*$n,u[1]*$n]}function fT(u,c){return(u&&I_.hasOwnProperty(u.type)?I_[u.type]:wm)(u,c)}function k_(u,c,p){var v=Sd(u,c-Nn,p).concat(c);return function(x){return v.map(function(T){return[x,T]})}}function z_(u,c,p){var v=Sd(u,c-Nn,p).concat(c);return function(x){return v.map(function(T){return[T,x]})}}function Ux(){var u,c,p,v,x,T,w,a,L=10,R=L,D=90,C=360,k,V,N,Q,ce=2.5;function Te(){return{type:"MultiLineString",coordinates:xe()}}function xe(){return Sd(Vp(v/D)*D,p,D).map(N).concat(Sd(Vp(a/C)*C,w,C).map(Q)).concat(Sd(Vp(c/L)*L,u,L).filter(function(ve){return vr(ve%D)>Nn}).map(k)).concat(Sd(Vp(T/R)*R,x,R).filter(function(ve){return vr(ve%C)>Nn}).map(V))}return Te.lines=function(){return xe().map(function(ve){return{type:"LineString",coordinates:ve}})},Te.outline=function(){return{type:"Polygon",coordinates:[N(v).concat(Q(w).slice(1),N(p).reverse().slice(1),Q(a).reverse().slice(1))]}},Te.extent=function(ve){return arguments.length?Te.extentMajor(ve).extentMinor(ve):Te.extentMinor()},Te.extentMajor=function(ve){return arguments.length?(v=+ve[0][0],p=+ve[1][0],a=+ve[0][1],w=+ve[1][1],v>p&&(ve=v,v=p,p=ve),a>w&&(ve=a,a=w,w=ve),Te.precision(ce)):[[v,a],[p,w]]},Te.extentMinor=function(ve){return arguments.length?(c=+ve[0][0],u=+ve[1][0],T=+ve[0][1],x=+ve[1][1],c>u&&(ve=c,c=u,u=ve),T>x&&(ve=T,T=x,x=ve),Te.precision(ce)):[[c,T],[u,x]]},Te.step=function(ve){return arguments.length?Te.stepMajor(ve).stepMinor(ve):Te.stepMinor()},Te.stepMajor=function(ve){return arguments.length?(D=+ve[0],C=+ve[1],Te):[D,C]},Te.stepMinor=function(ve){return arguments.length?(L=+ve[0],R=+ve[1],Te):[L,R]},Te.precision=function(ve){return arguments.length?(ce=+ve,k=k_(T,x,90),V=z_(c,u,ce),N=k_(a,w,90),Q=z_(v,p,ce),Te):ce},Te.extentMajor([[-180,-90+Nn],[180,90-Nn]]).extentMinor([[-180,-80-Nn],[180,80+Nn]])}function pT(){return Ux()()}function mT(u,c){var p=u[0]*$n,v=u[1]*$n,x=c[0]*$n,T=c[1]*$n,w=Mn(v),a=wn(v),L=Mn(T),R=wn(T),D=w*Mn(p),C=w*wn(p),k=L*Mn(x),V=L*wn(x),N=2*js(So(d_(T-v)+w*L*d_(x-p))),Q=wn(N),ce=N?function(Te){var xe=wn(Te*=N)/Q,ve=wn(N-Te)/Q,Me=ve*D+xe*k,ne=ve*C+xe*V,ue=ve*a+xe*R;return[Os(ne,Me)*Xr,Os(ue,So(Me*Me+ne*ne))*Xr]}:function(){return[p*Xr,v*Xr]};return ce.distance=N,ce}const Of=u=>u;var Ag=new os,Yy=new os,Vx,$x,Jy,Qy,Xu={point:bi,lineStart:bi,lineEnd:bi,polygonStart:function(){Xu.lineStart=gT,Xu.lineEnd=vT},polygonEnd:function(){Xu.lineStart=Xu.lineEnd=Xu.point=bi,Ag.add(vr(Yy)),Yy=new os},result:function(){var u=Ag/2;return Ag=new os,u}};function gT(){Xu.point=yT}function yT(u,c){Xu.point=Gx,Vx=Jy=u,$x=Qy=c}function Gx(u,c){Yy.add(Qy*u-Jy*c),Jy=u,Qy=c}function vT(){Gx(Vx,$x)}var kd=1/0,bm=kd,jf=-kd,Sm=jf,Em={point:_T,lineStart:bi,lineEnd:bi,polygonStart:bi,polygonEnd:bi,result:function(){var u=[[kd,bm],[jf,Sm]];return jf=Sm=-(bm=kd=1/0),u}};function _T(u,c){u<kd&&(kd=u),u>jf&&(jf=u),c<bm&&(bm=c),c>Sm&&(Sm=c)}var e0=0,t0=0,xf=0,Tm=0,Im=0,Ed=0,n0=0,r0=0,wf=0,Hx,Zx,du,fu,Ya={point:zh,lineStart:R_,lineEnd:F_,polygonStart:function(){Ya.lineStart=bT,Ya.lineEnd=ST},polygonEnd:function(){Ya.point=zh,Ya.lineStart=R_,Ya.lineEnd=F_},result:function(){var u=wf?[n0/wf,r0/wf]:Ed?[Tm/Ed,Im/Ed]:xf?[e0/xf,t0/xf]:[NaN,NaN];return e0=t0=xf=Tm=Im=Ed=n0=r0=wf=0,u}};function zh(u,c){e0+=u,t0+=c,++xf}function R_(){Ya.point=xT}function xT(u,c){Ya.point=wT,zh(du=u,fu=c)}function wT(u,c){var p=u-du,v=c-fu,x=So(p*p+v*v);Tm+=x*(du+u)/2,Im+=x*(fu+c)/2,Ed+=x,zh(du=u,fu=c)}function F_(){Ya.point=zh}function bT(){Ya.point=ET}function ST(){Wx(Hx,Zx)}function ET(u,c){Ya.point=Wx,zh(Hx=du=u,Zx=fu=c)}function Wx(u,c){var p=u-du,v=c-fu,x=So(p*p+v*v);Tm+=x*(du+u)/2,Im+=x*(fu+c)/2,Ed+=x,x=fu*u-du*c,n0+=x*(du+u),r0+=x*(fu+c),wf+=x*3,zh(du=u,fu=c)}function qx(u){this._context=u}qx.prototype={_radius:4.5,pointRadius:function(u){return this._radius=u,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(u,c){switch(this._point){case 0:{this._context.moveTo(u,c),this._point=1;break}case 1:{this._context.lineTo(u,c);break}default:{this._context.moveTo(u+this._radius,c),this._context.arc(u,c,this._radius,0,Fs);break}}},result:bi};var i0=new os,Mg,Xx,Kx,bf,Sf,Lf={point:bi,lineStart:function(){Lf.point=TT},lineEnd:function(){Mg&&Yx(Xx,Kx),Lf.point=bi},polygonStart:function(){Mg=!0},polygonEnd:function(){Mg=null},result:function(){var u=+i0;return i0=new os,u}};function TT(u,c){Lf.point=Yx,Xx=bf=u,Kx=Sf=c}function Yx(u,c){bf-=u,Sf-=c,i0.add(So(bf*bf+Sf*Sf)),bf=u,Sf=c}function Jx(){this._string=[]}Jx.prototype={_radius:4.5,_circle:O_(4.5),pointRadius:function(u){return(u=+u)!==this._radius&&(this._radius=u,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(u,c){switch(this._point){case 0:{this._string.push("M",u,",",c),this._point=1;break}case 1:{this._string.push("L",u,",",c);break}default:{this._circle==null&&(this._circle=O_(this._radius)),this._string.push("M",u,",",c,this._circle);break}}},result:function(){if(this._string.length){var u=this._string.join("");return this._string=[],u}else return null}};function O_(u){return"m0,"+u+"a"+u+","+u+" 0 1,1 0,"+-2*u+"a"+u+","+u+" 0 1,1 0,"+2*u+"z"}function IT(u,c){var p=4.5,v,x;function T(w){return w&&(typeof p=="function"&&x.pointRadius(+p.apply(this,arguments)),xl(w,v(x))),x.result()}return T.area=function(w){return xl(w,v(Xu)),Xu.result()},T.measure=function(w){return xl(w,v(Lf)),Lf.result()},T.bounds=function(w){return xl(w,v(Em)),Em.result()},T.centroid=function(w){return xl(w,v(Ya)),Ya.result()},T.projection=function(w){return arguments.length?(v=w==null?(u=null,Of):(u=w).stream,T):u},T.context=function(w){return arguments.length?(x=w==null?(c=null,new Jx):new qx(c=w),typeof p!="function"&&x.pointRadius(p),T):c},T.pointRadius=function(w){return arguments.length?(p=typeof w=="function"?w:(x.pointRadius(+w),+w),T):p},T.projection(u).context(c)}function CT(u){return{stream:Gf(u)}}function Gf(u){return function(c){var p=new o0;for(var v in u)p[v]=u[v];return p.stream=c,p}}function o0(){}o0.prototype={constructor:o0,point:function(u,c){this.stream.point(u,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function C0(u,c,p){var v=u.clipExtent&&u.clipExtent();return u.scale(150).translate([0,0]),v!=null&&u.clipExtent(null),xl(p,u.stream(Em)),c(Em.result()),v!=null&&u.clipExtent(v),u}function jm(u,c,p){return C0(u,function(v){var x=c[1][0]-c[0][0],T=c[1][1]-c[0][1],w=Math.min(x/(v[1][0]-v[0][0]),T/(v[1][1]-v[0][1])),a=+c[0][0]+(x-w*(v[1][0]+v[0][0]))/2,L=+c[0][1]+(T-w*(v[1][1]+v[0][1]))/2;u.scale(150*w).translate([a,L])},p)}function P0(u,c,p){return jm(u,[[0,0],c],p)}function A0(u,c,p){return C0(u,function(v){var x=+c,T=x/(v[1][0]-v[0][0]),w=(x-T*(v[1][0]+v[0][0]))/2,a=-T*v[0][1];u.scale(150*T).translate([w,a])},p)}function M0(u,c,p){return C0(u,function(v){var x=+c,T=x/(v[1][1]-v[0][1]),w=-T*v[0][0],a=(x-T*(v[1][1]+v[0][1]))/2;u.scale(150*T).translate([w,a])},p)}var j_=16,PT=Mn(30*$n);function L_(u,c){return+c?MT(u,c):AT(u)}function AT(u){return Gf({point:function(c,p){c=u(c,p),this.stream.point(c[0],c[1])}})}function MT(u,c){function p(v,x,T,w,a,L,R,D,C,k,V,N,Q,ce){var Te=R-v,xe=D-x,ve=Te*Te+xe*xe;if(ve>4*c&&Q--){var Me=w+k,ne=a+V,ue=L+N,M=So(Me*Me+ne*ne+ue*ue),$=js(ue/=M),U=vr(vr(ue)-1)<Nn||vr(T-C)<Nn?(T+C)/2:Os(ne,Me),de=u(U,$),K=de[0],j=de[1],W=K-v,J=j-x,re=xe*W-Te*J;(re*re/ve>c||vr((Te*W+xe*J)/ve-.5)>.3||w*k+a*V+L*N<PT)&&(p(v,x,T,w,a,L,K,j,U,Me/=M,ne/=M,ue,Q,ce),ce.point(K,j),p(K,j,U,Me,ne,ue,R,D,C,k,V,N,Q,ce))}}return function(v){var x,T,w,a,L,R,D,C,k,V,N,Q,ce={point:Te,lineStart:xe,lineEnd:Me,polygonStart:function(){v.polygonStart(),ce.lineStart=ne},polygonEnd:function(){v.polygonEnd(),ce.lineStart=xe}};function Te($,U){$=u($,U),v.point($[0],$[1])}function xe(){C=NaN,ce.point=ve,v.lineStart()}function ve($,U){var de=kh([$,U]),K=u($,U);p(C,k,D,V,N,Q,C=K[0],k=K[1],D=$,V=de[0],N=de[1],Q=de[2],j_,v),v.point(C,k)}function Me(){ce.point=Te,v.lineEnd()}function ne(){xe(),ce.point=ue,ce.lineEnd=M}function ue($,U){ve(x=$,U),T=C,w=k,a=V,L=N,R=Q,ce.point=ve}function M(){p(C,k,D,V,N,Q,T,w,x,a,L,R,j_,v),ce.lineEnd=Me,Me()}return ce}}var kT=Gf({point:function(u,c){this.stream.point(u*$n,c*$n)}});function zT(u){return Gf({point:function(c,p){var v=u(c,p);return this.stream.point(v[0],v[1])}})}function RT(u,c,p,v,x){function T(w,a){return w*=v,a*=x,[c+u*w,p-u*a]}return T.invert=function(w,a){return[(w-c)/u*v,(p-a)/u*x]},T}function D_(u,c,p,v,x,T){if(!T)return RT(u,c,p,v,x);var w=Mn(T),a=wn(T),L=w*u,R=a*u,D=w/u,C=a/u,k=(a*p-w*c)/u,V=(a*c+w*p)/u;function N(Q,ce){return Q*=v,ce*=x,[L*Q-R*ce+c,p-R*Q-L*ce]}return N.invert=function(Q,ce){return[v*(D*Q-C*ce+k),x*(V-C*Q-D*ce)]},N}function yu(u){return k0(function(){return u})()}function k0(u){var c,p=150,v=480,x=250,T=0,w=0,a=0,L=0,R=0,D,C=0,k=1,V=1,N=null,Q=Wy,ce=null,Te,xe,ve,Me=Of,ne=.5,ue,M,$,U,de;function K(re){return $(re[0]*$n,re[1]*$n)}function j(re){return re=$.invert(re[0],re[1]),re&&[re[0]*Xr,re[1]*Xr]}K.stream=function(re){return U&&de===re?U:U=kT(zT(D)(Q(ue(Me(de=re)))))},K.preclip=function(re){return arguments.length?(Q=re,N=void 0,J()):Q},K.postclip=function(re){return arguments.length?(Me=re,ce=Te=xe=ve=null,J()):Me},K.clipAngle=function(re){return arguments.length?(Q=+re?Dx(N=re*$n):(N=null,Wy),J()):N*Xr},K.clipExtent=function(re){return arguments.length?(Me=re==null?(ce=Te=xe=ve=null,Of):Om(ce=+re[0][0],Te=+re[0][1],xe=+re[1][0],ve=+re[1][1]),J()):ce==null?null:[[ce,Te],[xe,ve]]},K.scale=function(re){return arguments.length?(p=+re,W()):p},K.translate=function(re){return arguments.length?(v=+re[0],x=+re[1],W()):[v,x]},K.center=function(re){return arguments.length?(T=re[0]%360*$n,w=re[1]%360*$n,W()):[T*Xr,w*Xr]},K.rotate=function(re){return arguments.length?(a=re[0]%360*$n,L=re[1]%360*$n,R=re.length>2?re[2]%360*$n:0,W()):[a*Xr,L*Xr,R*Xr]},K.angle=function(re){return arguments.length?(C=re%360*$n,W()):C*Xr},K.reflectX=function(re){return arguments.length?(k=re?-1:1,W()):k<0},K.reflectY=function(re){return arguments.length?(V=re?-1:1,W()):V<0},K.precision=function(re){return arguments.length?(ue=L_(M,ne=re*re),J()):So(ne)},K.fitExtent=function(re,le){return jm(K,re,le)},K.fitSize=function(re,le){return P0(K,re,le)},K.fitWidth=function(re,le){return A0(K,re,le)},K.fitHeight=function(re,le){return M0(K,re,le)};function W(){var re=D_(p,0,0,k,V,C).apply(null,c(T,w)),le=D_(p,v-re[0],x-re[1],k,V,C);return D=I0(a,L,R),M=Hy(c,le),$=Hy(D,M),ue=L_(M,ne),J()}function J(){return U=de=null,K}return function(){return c=u.apply(this,arguments),K.invert=c.invert&&j,W()}}function z0(u){var c=0,p=sr/3,v=k0(u),x=v(c,p);return x.parallels=function(T){return arguments.length?v(c=T[0]*$n,p=T[1]*$n):[c*Xr,p*Xr]},x}function FT(u){var c=Mn(u);function p(v,x){return[v*c,wn(x)/c]}return p.invert=function(v,x){return[v/c,js(x*c)]},p}function Qx(u,c){var p=wn(u),v=(p+wn(c))/2;if(vr(v)<Nn)return FT(u);var x=1+p*(2*v-p),T=So(x)/v;function w(a,L){var R=So(x-2*v*wn(L))/v;return[R*wn(a*=v),T-R*Mn(a)]}return w.invert=function(a,L){var R=T-L,D=Os(a,vr(R))*Ja(R);return R*v<0&&(D-=sr*Ja(a)*Ja(R)),[D/v,js((x-(a*a+R*R)*v*v)/(2*v))]},w}function Cm(){return z0(Qx).scale(155.424).center([0,33.6442])}function ew(){return Cm().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function OT(u){var c=u.length;return{point:function(p,v){for(var x=-1;++x<c;)u[x].point(p,v)},sphere:function(){for(var p=-1;++p<c;)u[p].sphere()},lineStart:function(){for(var p=-1;++p<c;)u[p].lineStart()},lineEnd:function(){for(var p=-1;++p<c;)u[p].lineEnd()},polygonStart:function(){for(var p=-1;++p<c;)u[p].polygonStart()},polygonEnd:function(){for(var p=-1;++p<c;)u[p].polygonEnd()}}}function jT(){var u,c,p=ew(),v,x=Cm().rotate([154,0]).center([-2,58.5]).parallels([55,65]),T,w=Cm().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,L,R={point:function(k,V){L=[k,V]}};function D(k){var V=k[0],N=k[1];return L=null,v.point(V,N),L||(T.point(V,N),L)||(a.point(V,N),L)}D.invert=function(k){var V=p.scale(),N=p.translate(),Q=(k[0]-N[0])/V,ce=(k[1]-N[1])/V;return(ce>=.12&&ce<.234&&Q>=-.425&&Q<-.214?x:ce>=.166&&ce<.234&&Q>=-.214&&Q<-.115?w:p).invert(k)},D.stream=function(k){return u&&c===k?u:u=OT([p.stream(c=k),x.stream(k),w.stream(k)])},D.precision=function(k){return arguments.length?(p.precision(k),x.precision(k),w.precision(k),C()):p.precision()},D.scale=function(k){return arguments.length?(p.scale(k),x.scale(k*.35),w.scale(k),D.translate(p.translate())):p.scale()},D.translate=function(k){if(!arguments.length)return p.translate();var V=p.scale(),N=+k[0],Q=+k[1];return v=p.translate(k).clipExtent([[N-.455*V,Q-.238*V],[N+.455*V,Q+.238*V]]).stream(R),T=x.translate([N-.307*V,Q+.201*V]).clipExtent([[N-.425*V+Nn,Q+.12*V+Nn],[N-.214*V-Nn,Q+.234*V-Nn]]).stream(R),a=w.translate([N-.205*V,Q+.212*V]).clipExtent([[N-.214*V+Nn,Q+.166*V+Nn],[N-.115*V-Nn,Q+.234*V-Nn]]).stream(R),C()},D.fitExtent=function(k,V){return jm(D,k,V)},D.fitSize=function(k,V){return P0(D,k,V)},D.fitWidth=function(k,V){return A0(D,k,V)},D.fitHeight=function(k,V){return M0(D,k,V)};function C(){return u=c=null,D}return D.scale(1070)}function tw(u){return function(c,p){var v=Mn(c),x=Mn(p),T=u(v*x);return T===1/0?[2,0]:[T*x*wn(c),T*wn(p)]}}function Hf(u){return function(c,p){var v=So(c*c+p*p),x=u(v),T=wn(x),w=Mn(x);return[Os(c*T,v*w),js(v&&p*T/v)]}}var R0=tw(function(u){return So(2/(1+u))});R0.invert=Hf(function(u){return 2*js(u/2)});function LT(){return yu(R0).scale(124.75).clipAngle(180-.001)}var F0=tw(function(u){return(u=wx(u))&&u/wn(u)});F0.invert=Hf(function(u){return u});function DT(){return yu(F0).scale(79.4188).clipAngle(180-.001)}function Zf(u,c){return[u,am(E0((ki+c)/2))]}Zf.invert=function(u,c){return[u,2*Fd(xx(c))-ki]};function BT(){return nw(Zf).scale(961/Fs)}function nw(u){var c=yu(u),p=c.center,v=c.scale,x=c.translate,T=c.clipExtent,w=null,a,L,R;c.scale=function(C){return arguments.length?(v(C),D()):v()},c.translate=function(C){return arguments.length?(x(C),D()):x()},c.center=function(C){return arguments.length?(p(C),D()):p()},c.clipExtent=function(C){return arguments.length?(C==null?w=a=L=R=null:(w=+C[0][0],a=+C[0][1],L=+C[1][0],R=+C[1][1]),D()):w==null?null:[[w,a],[L,R]]};function D(){var C=sr*v(),k=c(zx(c.rotate()).invert([0,0]));return T(w==null?[[k[0]-C,k[1]-C],[k[0]+C,k[1]+C]]:u===Zf?[[Math.max(k[0]-C,w),a],[Math.min(k[0]+C,L),R]]:[[w,Math.max(k[1]-C,a)],[L,Math.min(k[1]+C,R)]])}return D()}function Wp(u){return E0((ki+u)/2)}function rw(u,c){var p=Mn(u),v=u===c?wn(u):am(p/Mn(c))/am(Wp(c)/Wp(u)),x=p*Ig(Wp(u),v)/v;if(!v)return Zf;function T(w,a){x>0?a<-ki+Nn&&(a=-ki+Nn):a>ki-Nn&&(a=ki-Nn);var L=x/Ig(Wp(a),v);return[L*wn(v*w),x-L*Mn(v*w)]}return T.invert=function(w,a){var L=x-a,R=Ja(v)*So(w*w+L*L),D=Os(w,vr(L))*Ja(L);return L*v<0&&(D-=sr*Ja(w)*Ja(L)),[D/v,2*Fd(Ig(x/R,1/v))-ki]},T}function NT(){return z0(rw).scale(109.5).parallels([30,30])}function Df(u,c){return[u,c]}Df.invert=Df;function UT(){return yu(Df).scale(152.63)}function iw(u,c){var p=Mn(u),v=u===c?wn(u):(p-Mn(c))/(c-u),x=p/v+u;if(vr(v)<Nn)return Df;function T(w,a){var L=x-a,R=v*w;return[L*wn(R),x-L*Mn(R)]}return T.invert=function(w,a){var L=x-a,R=Os(w,vr(L))*Ja(L);return L*v<0&&(R-=sr*Ja(w)*Ja(L)),[R/v,x-Ja(v)*So(w*w+L*L)]},T}function VT(){return z0(iw).scale(131.154).center([0,13.9389])}var Pf=1.340264,Af=-.081106,Mf=893e-6,kf=.003796,Pm=So(3)/2,$T=12;function O0(u,c){var p=js(Pm*wn(c)),v=p*p,x=v*v*v;return[u*Mn(p)/(Pm*(Pf+3*Af*v+x*(7*Mf+9*kf*v))),p*(Pf+Af*v+x*(Mf+kf*v))]}O0.invert=function(u,c){for(var p=c,v=p*p,x=v*v*v,T=0,w,a,L;T<$T&&(a=p*(Pf+Af*v+x*(Mf+kf*v))-c,L=Pf+3*Af*v+x*(7*Mf+9*kf*v),p-=w=a/L,v=p*p,x=v*v*v,!(vr(w)<Ff));++T);return[Pm*u*(Pf+3*Af*v+x*(7*Mf+9*kf*v))/Mn(p),js(wn(p)/Pm)]};function GT(){return yu(O0).scale(177.158)}function j0(u,c){var p=Mn(c),v=Mn(u)*p;return[p*wn(u)/v,wn(c)/v]}j0.invert=Hf(Fd);function HT(){return yu(j0).scale(144.049).clipAngle(60)}function ZT(){var u=1,c=0,p=0,v=1,x=1,T=0,w,a,L=null,R,D,C,k=1,V=1,N=Gf({point:function(Me,ne){var ue=ve([Me,ne]);this.stream.point(ue[0],ue[1])}}),Q=Of,ce,Te;function xe(){return k=u*v,V=u*x,ce=Te=null,ve}function ve(Me){var ne=Me[0]*k,ue=Me[1]*V;if(T){var M=ue*w-ne*a;ne=ne*w+ue*a,ue=M}return[ne+c,ue+p]}return ve.invert=function(Me){var ne=Me[0]-c,ue=Me[1]-p;if(T){var M=ue*w+ne*a;ne=ne*w-ue*a,ue=M}return[ne/k,ue/V]},ve.stream=function(Me){return ce&&Te===Me?ce:ce=N(Q(Te=Me))},ve.postclip=function(Me){return arguments.length?(Q=Me,L=R=D=C=null,xe()):Q},ve.clipExtent=function(Me){return arguments.length?(Q=Me==null?(L=R=D=C=null,Of):Om(L=+Me[0][0],R=+Me[0][1],D=+Me[1][0],C=+Me[1][1]),xe()):L==null?null:[[L,R],[D,C]]},ve.scale=function(Me){return arguments.length?(u=+Me,xe()):u},ve.translate=function(Me){return arguments.length?(c=+Me[0],p=+Me[1],xe()):[c,p]},ve.angle=function(Me){return arguments.length?(T=Me%360*$n,a=wn(T),w=Mn(T),xe()):T*Xr},ve.reflectX=function(Me){return arguments.length?(v=Me?-1:1,xe()):v<0},ve.reflectY=function(Me){return arguments.length?(x=Me?-1:1,xe()):x<0},ve.fitExtent=function(Me,ne){return jm(ve,Me,ne)},ve.fitSize=function(Me,ne){return P0(ve,Me,ne)},ve.fitWidth=function(Me,ne){return A0(ve,Me,ne)},ve.fitHeight=function(Me,ne){return M0(ve,Me,ne)},ve}function L0(u,c){var p=c*c,v=p*p;return[u*(.8707-.131979*p+v*(-.013791+v*(.003971*p-.001529*v))),c*(1.007226+p*(.015085+v*(-.044475+.028874*p-.005916*v)))]}L0.invert=function(u,c){var p=c,v=25,x;do{var T=p*p,w=T*T;p-=x=(p*(1.007226+T*(.015085+w*(-.044475+.028874*T-.005916*w)))-c)/(1.007226+T*(.015085*3+w*(-.044475*7+.028874*9*T-.005916*11*w)))}while(vr(x)>Nn&&--v>0);return[u/(.8707+(T=p*p)*(-.131979+T*(-.013791+T*T*T*(.003971-.001529*T)))),p]};function WT(){return yu(L0).scale(175.295)}function D0(u,c){return[Mn(c)*wn(u),wn(c)]}D0.invert=Hf(js);function qT(){return yu(D0).scale(249.5).clipAngle(90+Nn)}function B0(u,c){var p=Mn(c),v=1+Mn(u)*p;return[p*wn(u)/v,wn(c)/v]}B0.invert=Hf(function(u){return 2*Fd(u)});function XT(){return yu(B0).scale(250).clipAngle(142)}function N0(u,c){return[am(E0((ki+c)/2)),-u]}N0.invert=function(u,c){return[-c,2*Fd(xx(u))-ki]};function KT(){var u=nw(N0),c=u.center,p=u.rotate;return u.center=function(v){return arguments.length?c([-v[1],v[0]]):(v=c(),[v[1],-v[0]])},u.rotate=function(v){return arguments.length?p([v[0],v[1],v.length>2?v[2]+90:90]):(v=p(),[v[0],v[1],v[2]-90])},p([0,0,90]).scale(159.155)}const YT=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:ew,geoAlbersUsa:jT,geoArea:VE,geoAzimuthalEqualArea:LT,geoAzimuthalEqualAreaRaw:R0,geoAzimuthalEquidistant:DT,geoAzimuthalEquidistantRaw:F0,geoBounds:ZE,geoCentroid:JE,geoCircle:QE,geoClipAntimeridian:Wy,geoClipCircle:Dx,geoClipExtent:sT,geoClipRectangle:Om,geoConicConformal:NT,geoConicConformalRaw:rw,geoConicEqualArea:Cm,geoConicEqualAreaRaw:Qx,geoConicEquidistant:VT,geoConicEquidistantRaw:iw,geoContains:fT,geoDistance:xm,geoEqualEarth:GT,geoEqualEarthRaw:O0,geoEquirectangular:UT,geoEquirectangularRaw:Df,geoGnomonic:HT,geoGnomonicRaw:j0,geoGraticule:Ux,geoGraticule10:pT,geoIdentity:ZT,geoInterpolate:mT,geoLength:Bx,geoMercator:BT,geoMercatorRaw:Zf,geoNaturalEarth1:WT,geoNaturalEarth1Raw:L0,geoOrthographic:qT,geoOrthographicRaw:D0,geoPath:IT,geoProjection:yu,geoProjectionMutator:k0,geoRotation:zx,geoStereographic:XT,geoStereographicRaw:B0,geoStream:xl,geoTransform:CT,geoTransverseMercator:KT,geoTransverseMercatorRaw:N0},Symbol.toStringTag,{value:"Module"})),JT=u0(YT);var zc=2*Math.PI*6378137/2,QT=Math.PI/180;function ow(u){return u=u||256,2*Math.PI*6378137/u}function eI(u){var c=u[0],p=u[1],v=u[2];return(1<<v)*((1<<v)+c)+p}function s0(u,c,p){var v=sw(u,c,p);return v[0]=Math.floor(v[0]),v[1]=Math.floor(v[1]),v}function sw(u,c,p){var v=c,x=q0(u[0]),T=W0(u[1]),w=Math.sin(T*QT),a=Math.pow(2,v),L=a*(x/360+.5),R=a*(.5-.25*Math.log((1+w)/(1-w))/Math.PI);return Fh([L,R,v],p)}function tI(u,c=6){var p=u[0],v=u[1],x=u[2],T=u[3],w=(p-x)/2+x,a=(v-T)/2+T;return c!=null&&(w=Number(w.toFixed(c)),a=Number(a.toFixed(c))),[w,a]}function Am(u,c,p={enable:!0,decimal:1}){u=Lm(u,c);var v=u[0],x=u[1],T=v*zc/180,w=Math.log(Math.tan((90+x)*Math.PI/360))/(Math.PI/180);return w=w*zc/180,p.enable&&(T=Number(T.toFixed(p.decimal)),w=Number(w.toFixed(p.decimal))),[T,w]}function a0(u,c=6){var p=u[0],v=u[1],x=p/zc*180,T=v/zc*180;return T=180/Math.PI*(2*Math.atan(Math.exp(T*Math.PI/180))-Math.PI/2),c!=null&&(x=Number(x.toFixed(c)),T=Number(T.toFixed(c))),[x,T]}function U0(u,c,p){var v=u[0],x=u[1],T=H0(c,p),w=(v+zc)/T,a=(x+zc)/T;return[w,a,c]}function aw(u,c,p){u=Lm(u,p);var v=Am(u),x=U0(v,c);return V0(x)}function nI(u,c,p){if(u=Lm(u,p),c===0)return[0,0,0];var v=aw(u,c);return uw(v)}function rI(u,c){if(c===0)return[0,0,0];var p=U0(u,c);return V0(p)}function l0(u,c,p=1){var v=u[0],x=u[1],T=u[2],w=H0(T,c),a=v*w-zc,L=x*w-zc;return p!=null&&(a=Number(a.toFixed(p)),L=Number(L.toFixed(p))),[a,L]}function V0(u,c,p){c=c||256;var v=u[0],x=u[1],T=u[2];if(T===0)return[0,0,0];G0(T);var w=Math.ceil(v/c)-1,a=Math.ceil(x/c)-1;return w<0&&(w=0),a<0&&(a=0),[w,a,T]}function $0(u,c,p){Fh(u,p),c=c||256;var v=u[0],x=u[1],T=u[2],w=l0([v*c,x*c,T]),a=l0([(v+1)*c,(x+1)*c,T]);return[w[0],w[1],a[0],a[1]]}function lw(u,c){Fh(u,c);var p=u[0],v=u[1],x=u[2];if(x===0)return[-180,-85.051129,180,85.051129];var T=$0([p,v,x]),w=T[0],a=T[1],L=T[2],R=T[3],D=a0([w,a,x]),C=a0([L,R,x]);return[D[0],D[1],C[0],C[1]]}function iI(u){var c=Wf(u);return $0(c)}function oI(u){var c=Wf(u);return lw(c)}function uw(u,c){Fh(u,c);var p=u[0],v=u[1],x=u[2];if(x===0)return[0,0,0];var T=p,w=Math.pow(2,x)-1-v;return[T,w,x]}function Wf(u){var c=u[0],p=u[1],v=u[2],x=c,T=Math.pow(2,v)-p-1;return[x,T,v]}function sI(u){var c=Wf(u);return cw(c)}function cw(u,c){Fh(u,c);var p=u[0],v=u[1],x=u[2];if(x===0)return"";var T="";return v=Math.pow(2,x)-1-v,Z0(x,0,-1).map(function(w){var a=0,L=1<<w-1;p&L&&(a+=1),v&L&&(a+=2),T=T.concat(a)}),T}function aI(u){var c=hw(u);return Wf(c)}function hw(u){var c=0,p=0,v=u.length;return Z0(v,0,-1).map(function(x){var T=1<<x-1;switch(parseInt(u[v-x],0)){case 0:break;case 1:c+=T;break;case 2:p+=T;break;case 3:c+=T,p+=T;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[c,p,v]}function lI(u){var c=Am([u[0],u[1]]),p=Am([u[2],u[3]]);return[c[0],c[1],p[0],p[1]]}function Fh(u,c){var p=u[0],v=u[1],x=u[2];if(c===!1)return u;if(x==null)throw new Error("<zoom> is required");if(p==null)throw new Error("<x> is required");if(v==null)throw new Error("<y> is required");return x=G0(x),u=dw(u),u}function dw(u){var c=u[0],p=u[1],v=u[2],x=Math.pow(2,v);return c=c%x,c<0&&(c=c+x),[c,p,v]}function G0(u){if(u===!1)return u;if(u==null)throw new Error("<zoom> is required");if(u<0)throw new Error("<zoom> cannot be less than 0");if(u>32)throw new Error("<zoom> cannot be greater than 32");return u}function Lm(u,c){if(c===!1)return u;var p=q0(u[0]),v=W0(u[1]);return v>85&&(v=85),v<-85&&(v=-85),[p,v]}function H0(u,c){return ow(c)/Math.pow(2,u)}function Z0(u,c,p){c==null&&(c=u||0,u=0),p||(p=c<u?-1:1);for(var v=Math.max(Math.ceil((c-u)/p),0),x=Array(v),T=0;T<v;T++,u+=p)x[T]=u;return x}function uI(u){if(!u)throw new Error("array is required");if(u&&u[0]&&u.length===4&&u[0][0]===void 0)return u;if(u&&u[0]&&u[0][0]!==void 0){var c=u[0][0],p=u[0][1],v=u[0][2],x=u[0][3];return u.map(function(T){T[0]<c&&(c=T[0]),T[1]<p&&(p=T[1]),T[2]>v&&(v=T[2]),T[3]>x&&(x=T[3])}),[c,p,v,x]}}function cI(u){try{return Fh(u),!0}catch{return!1}}function W0(u){if(u==null)throw new Error("lat is required");return(u>90||u<-90)&&(u=u%180,u>90&&(u=-180+u),u<-90&&(u=180+u),u===0&&(u=0)),u}function q0(u){if(u==null)throw new Error("lng is required");return(u>180||u<-180)&&(u=u%360,u>180&&(u=-360+u),u<-180&&(u=360+u),u===0&&(u=0)),u}function hI(u){var c=s0([u[0],u[1]],32),p=s0([u[2],u[3]],32),v=[c[0],c[1],p[0],p[1]],x=dI(v);if(x===0)return[0,0,0];var T=v[0]>>>32-x,w=v[1]>>>32-x;return[T,w,x]}function dI(u){for(var c=28,p=0;p<c;p++){var v=1<<32-(p+1);if((u[0]&v)!==(u[2]&v)||(u[1]&v)!==(u[3]&v))return p}return c}const fI=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:tI,bboxToMeters:lI,bboxToTile:hI,googleToBBox:oI,googleToBBoxMeters:iI,googleToQuadkey:sI,googleToTile:Wf,hash:eI,initialResolution:ow,latitude:W0,lngLatToGoogle:nI,lngLatToMeters:Am,lngLatToTile:aw,longitude:q0,maxBBox:uI,metersToLngLat:a0,metersToPixels:U0,metersToTile:rI,pixelsToMeters:l0,pixelsToTile:V0,pointToTile:s0,pointToTileFraction:sw,quadkeyToGoogle:hw,quadkeyToTile:aI,range:Z0,resolution:H0,tileToBBox:lw,tileToBBoxMeters:$0,tileToGoogle:uw,tileToQuadkey:cw,validTile:cI,validateLngLat:Lm,validateTile:Fh,validateZoom:G0,wrapTile:dw},Symbol.toStringTag,{value:"Module"})),pI=u0(fI);var qp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var B_;function fw(){return B_||(B_=1,qp.read=function(u,c,p,v,x){var T,w,a=x*8-v-1,L=(1<<a)-1,R=L>>1,D=-7,C=p?x-1:0,k=p?-1:1,V=u[c+C];for(C+=k,T=V&(1<<-D)-1,V>>=-D,D+=a;D>0;T=T*256+u[c+C],C+=k,D-=8);for(w=T&(1<<-D)-1,T>>=-D,D+=v;D>0;w=w*256+u[c+C],C+=k,D-=8);if(T===0)T=1-R;else{if(T===L)return w?NaN:(V?-1:1)*(1/0);w=w+Math.pow(2,v),T=T-R}return(V?-1:1)*w*Math.pow(2,T-v)},qp.write=function(u,c,p,v,x,T){var w,a,L,R=T*8-x-1,D=(1<<R)-1,C=D>>1,k=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=v?0:T-1,N=v?1:-1,Q=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(a=isNaN(c)?1:0,w=D):(w=Math.floor(Math.log(c)/Math.LN2),c*(L=Math.pow(2,-w))<1&&(w--,L*=2),w+C>=1?c+=k/L:c+=k*Math.pow(2,1-C),c*L>=2&&(w++,L/=2),w+C>=D?(a=0,w=D):w+C>=1?(a=(c*L-1)*Math.pow(2,x),w=w+C):(a=c*Math.pow(2,C-1)*Math.pow(2,x),w=0));x>=8;u[p+V]=a&255,V+=N,a/=256,x-=8);for(w=w<<x|a,R+=x;R>0;u[p+V]=w&255,V+=N,w/=256,R-=8);u[p+V-N]|=Q*128}),qp}var kg,N_;function mI(){if(N_)return kg;N_=1,kg=c;var u=fw();function c(j){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(j)?j:new Uint8Array(j||0),this.pos=0,this.type=0,this.length=this.buf.length}c.Varint=0,c.Fixed64=1,c.Bytes=2,c.Fixed32=5;var p=65536*65536,v=1/p,x=12,T=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");c.prototype={destroy:function(){this.buf=null},readFields:function(j,W,J){for(J=J||this.length;this.pos<J;){var re=this.readVarint(),le=re>>3,te=this.pos;this.type=re&7,j(le,W,this),this.pos===te&&this.skip(re)}return W},readMessage:function(j,W){return this.readFields(j,W,this.readVarint()+this.pos)},readFixed32:function(){var j=ue(this.buf,this.pos);return this.pos+=4,j},readSFixed32:function(){var j=$(this.buf,this.pos);return this.pos+=4,j},readFixed64:function(){var j=ue(this.buf,this.pos)+ue(this.buf,this.pos+4)*p;return this.pos+=8,j},readSFixed64:function(){var j=ue(this.buf,this.pos)+$(this.buf,this.pos+4)*p;return this.pos+=8,j},readFloat:function(){var j=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,j},readDouble:function(){var j=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,j},readVarint:function(j){var W=this.buf,J,re;return re=W[this.pos++],J=re&127,re<128||(re=W[this.pos++],J|=(re&127)<<7,re<128)||(re=W[this.pos++],J|=(re&127)<<14,re<128)||(re=W[this.pos++],J|=(re&127)<<21,re<128)?J:(re=W[this.pos],J|=(re&15)<<28,w(J,j,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var j=this.readVarint();return j%2===1?(j+1)/-2:j/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var j=this.readVarint()+this.pos,W=this.pos;return this.pos=j,j-W>=x&&T?de(this.buf,W,j):U(this.buf,W,j)},readBytes:function(){var j=this.readVarint()+this.pos,W=this.buf.subarray(this.pos,j);return this.pos=j,W},readPackedVarint:function(j,W){if(this.type!==c.Bytes)return j.push(this.readVarint(W));var J=a(this);for(j=j||[];this.pos<J;)j.push(this.readVarint(W));return j},readPackedSVarint:function(j){if(this.type!==c.Bytes)return j.push(this.readSVarint());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readSVarint());return j},readPackedBoolean:function(j){if(this.type!==c.Bytes)return j.push(this.readBoolean());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readBoolean());return j},readPackedFloat:function(j){if(this.type!==c.Bytes)return j.push(this.readFloat());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readFloat());return j},readPackedDouble:function(j){if(this.type!==c.Bytes)return j.push(this.readDouble());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readDouble());return j},readPackedFixed32:function(j){if(this.type!==c.Bytes)return j.push(this.readFixed32());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readFixed32());return j},readPackedSFixed32:function(j){if(this.type!==c.Bytes)return j.push(this.readSFixed32());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readSFixed32());return j},readPackedFixed64:function(j){if(this.type!==c.Bytes)return j.push(this.readFixed64());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readFixed64());return j},readPackedSFixed64:function(j){if(this.type!==c.Bytes)return j.push(this.readSFixed64());var W=a(this);for(j=j||[];this.pos<W;)j.push(this.readSFixed64());return j},skip:function(j){var W=j&7;if(W===c.Varint)for(;this.buf[this.pos++]>127;);else if(W===c.Bytes)this.pos=this.readVarint()+this.pos;else if(W===c.Fixed32)this.pos+=4;else if(W===c.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+W)},writeTag:function(j,W){this.writeVarint(j<<3|W)},realloc:function(j){for(var W=this.length||16;W<this.pos+j;)W*=2;if(W!==this.length){var J=new Uint8Array(W);J.set(this.buf),this.buf=J,this.length=W}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(j){this.realloc(4),M(this.buf,j,this.pos),this.pos+=4},writeSFixed32:function(j){this.realloc(4),M(this.buf,j,this.pos),this.pos+=4},writeFixed64:function(j){this.realloc(8),M(this.buf,j&-1,this.pos),M(this.buf,Math.floor(j*v),this.pos+4),this.pos+=8},writeSFixed64:function(j){this.realloc(8),M(this.buf,j&-1,this.pos),M(this.buf,Math.floor(j*v),this.pos+4),this.pos+=8},writeVarint:function(j){if(j=+j||0,j>268435455||j<0){R(j,this);return}this.realloc(4),this.buf[this.pos++]=j&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=(j>>>=7)&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=(j>>>=7)&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=j>>>7&127)))},writeSVarint:function(j){this.writeVarint(j<0?-j*2-1:j*2)},writeBoolean:function(j){this.writeVarint(!!j)},writeString:function(j){j=String(j),this.realloc(j.length*4),this.pos++;var W=this.pos;this.pos=K(this.buf,j,this.pos);var J=this.pos-W;J>=128&&k(W,J,this),this.pos=W-1,this.writeVarint(J),this.pos+=J},writeFloat:function(j){this.realloc(4),u.write(this.buf,j,this.pos,!0,23,4),this.pos+=4},writeDouble:function(j){this.realloc(8),u.write(this.buf,j,this.pos,!0,52,8),this.pos+=8},writeBytes:function(j){var W=j.length;this.writeVarint(W),this.realloc(W);for(var J=0;J<W;J++)this.buf[this.pos++]=j[J]},writeRawMessage:function(j,W){this.pos++;var J=this.pos;j(W,this);var re=this.pos-J;re>=128&&k(J,re,this),this.pos=J-1,this.writeVarint(re),this.pos+=re},writeMessage:function(j,W,J){this.writeTag(j,c.Bytes),this.writeRawMessage(W,J)},writePackedVarint:function(j,W){W.length&&this.writeMessage(j,V,W)},writePackedSVarint:function(j,W){W.length&&this.writeMessage(j,N,W)},writePackedBoolean:function(j,W){W.length&&this.writeMessage(j,Te,W)},writePackedFloat:function(j,W){W.length&&this.writeMessage(j,Q,W)},writePackedDouble:function(j,W){W.length&&this.writeMessage(j,ce,W)},writePackedFixed32:function(j,W){W.length&&this.writeMessage(j,xe,W)},writePackedSFixed32:function(j,W){W.length&&this.writeMessage(j,ve,W)},writePackedFixed64:function(j,W){W.length&&this.writeMessage(j,Me,W)},writePackedSFixed64:function(j,W){W.length&&this.writeMessage(j,ne,W)},writeBytesField:function(j,W){this.writeTag(j,c.Bytes),this.writeBytes(W)},writeFixed32Field:function(j,W){this.writeTag(j,c.Fixed32),this.writeFixed32(W)},writeSFixed32Field:function(j,W){this.writeTag(j,c.Fixed32),this.writeSFixed32(W)},writeFixed64Field:function(j,W){this.writeTag(j,c.Fixed64),this.writeFixed64(W)},writeSFixed64Field:function(j,W){this.writeTag(j,c.Fixed64),this.writeSFixed64(W)},writeVarintField:function(j,W){this.writeTag(j,c.Varint),this.writeVarint(W)},writeSVarintField:function(j,W){this.writeTag(j,c.Varint),this.writeSVarint(W)},writeStringField:function(j,W){this.writeTag(j,c.Bytes),this.writeString(W)},writeFloatField:function(j,W){this.writeTag(j,c.Fixed32),this.writeFloat(W)},writeDoubleField:function(j,W){this.writeTag(j,c.Fixed64),this.writeDouble(W)},writeBooleanField:function(j,W){this.writeVarintField(j,!!W)}};function w(j,W,J){var re=J.buf,le,te;if(te=re[J.pos++],le=(te&112)>>4,te<128||(te=re[J.pos++],le|=(te&127)<<3,te<128)||(te=re[J.pos++],le|=(te&127)<<10,te<128)||(te=re[J.pos++],le|=(te&127)<<17,te<128)||(te=re[J.pos++],le|=(te&127)<<24,te<128)||(te=re[J.pos++],le|=(te&1)<<31,te<128))return L(j,le,W);throw new Error("Expected varint not more than 10 bytes")}function a(j){return j.type===c.Bytes?j.readVarint()+j.pos:j.pos+1}function L(j,W,J){return J?W*4294967296+(j>>>0):(W>>>0)*4294967296+(j>>>0)}function R(j,W){var J,re;if(j>=0?(J=j%4294967296|0,re=j/4294967296|0):(J=~(-j%4294967296),re=~(-j/4294967296),J^4294967295?J=J+1|0:(J=0,re=re+1|0)),j>=18446744073709552e3||j<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");W.realloc(10),D(J,re,W),C(re,W)}function D(j,W,J){J.buf[J.pos++]=j&127|128,j>>>=7,J.buf[J.pos++]=j&127|128,j>>>=7,J.buf[J.pos++]=j&127|128,j>>>=7,J.buf[J.pos++]=j&127|128,j>>>=7,J.buf[J.pos]=j&127}function C(j,W){var J=(j&7)<<4;W.buf[W.pos++]|=J|((j>>>=3)?128:0),j&&(W.buf[W.pos++]=j&127|((j>>>=7)?128:0),j&&(W.buf[W.pos++]=j&127|((j>>>=7)?128:0),j&&(W.buf[W.pos++]=j&127|((j>>>=7)?128:0),j&&(W.buf[W.pos++]=j&127|((j>>>=7)?128:0),j&&(W.buf[W.pos++]=j&127)))))}function k(j,W,J){var re=W<=16383?1:W<=2097151?2:W<=268435455?3:Math.floor(Math.log(W)/(Math.LN2*7));J.realloc(re);for(var le=J.pos-1;le>=j;le--)J.buf[le+re]=J.buf[le]}function V(j,W){for(var J=0;J<j.length;J++)W.writeVarint(j[J])}function N(j,W){for(var J=0;J<j.length;J++)W.writeSVarint(j[J])}function Q(j,W){for(var J=0;J<j.length;J++)W.writeFloat(j[J])}function ce(j,W){for(var J=0;J<j.length;J++)W.writeDouble(j[J])}function Te(j,W){for(var J=0;J<j.length;J++)W.writeBoolean(j[J])}function xe(j,W){for(var J=0;J<j.length;J++)W.writeFixed32(j[J])}function ve(j,W){for(var J=0;J<j.length;J++)W.writeSFixed32(j[J])}function Me(j,W){for(var J=0;J<j.length;J++)W.writeFixed64(j[J])}function ne(j,W){for(var J=0;J<j.length;J++)W.writeSFixed64(j[J])}function ue(j,W){return(j[W]|j[W+1]<<8|j[W+2]<<16)+j[W+3]*16777216}function M(j,W,J){j[J]=W,j[J+1]=W>>>8,j[J+2]=W>>>16,j[J+3]=W>>>24}function $(j,W){return(j[W]|j[W+1]<<8|j[W+2]<<16)+(j[W+3]<<24)}function U(j,W,J){for(var re="",le=W;le<J;){var te=j[le],oe=null,_e=te>239?4:te>223?3:te>191?2:1;if(le+_e>J)break;var be,he,Fe;_e===1?te<128&&(oe=te):_e===2?(be=j[le+1],(be&192)===128&&(oe=(te&31)<<6|be&63,oe<=127&&(oe=null))):_e===3?(be=j[le+1],he=j[le+2],(be&192)===128&&(he&192)===128&&(oe=(te&15)<<12|(be&63)<<6|he&63,(oe<=2047||oe>=55296&&oe<=57343)&&(oe=null))):_e===4&&(be=j[le+1],he=j[le+2],Fe=j[le+3],(be&192)===128&&(he&192)===128&&(Fe&192)===128&&(oe=(te&15)<<18|(be&63)<<12|(he&63)<<6|Fe&63,(oe<=65535||oe>=1114112)&&(oe=null))),oe===null?(oe=65533,_e=1):oe>65535&&(oe-=65536,re+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|oe&1023),re+=String.fromCharCode(oe),le+=_e}return re}function de(j,W,J){return T.decode(j.subarray(W,J))}function K(j,W,J){for(var re=0,le,te;re<W.length;re++){if(le=W.charCodeAt(re),le>55295&&le<57344)if(te)if(le<56320){j[J++]=239,j[J++]=191,j[J++]=189,te=le;continue}else le=te-55296<<10|le-56320|65536,te=null;else{le>56319||re+1===W.length?(j[J++]=239,j[J++]=191,j[J++]=189):te=le;continue}else te&&(j[J++]=239,j[J++]=191,j[J++]=189,te=null);le<128?j[J++]=le:(le<2048?j[J++]=le>>6|192:(le<65536?j[J++]=le>>12|224:(j[J++]=le>>18|240,j[J++]=le>>12&63|128),j[J++]=le>>6&63|128),j[J++]=le&63|128)}return J}return kg}var Xp={exports:{}},zg,U_;function pw(){return U_||(U_=1,zg=function(c,p){return function(){for(var x=new Array(arguments.length),T=0;T<x.length;T++)x[T]=arguments[T];return c.apply(p,x)}}),zg}var Rg,V_;function ka(){if(V_)return Rg;V_=1;var u=pw(),c=Object.prototype.toString;function p($){return c.call($)==="[object Array]"}function v($){return typeof $>"u"}function x($){return $!==null&&!v($)&&$.constructor!==null&&!v($.constructor)&&typeof $.constructor.isBuffer=="function"&&$.constructor.isBuffer($)}function T($){return c.call($)==="[object ArrayBuffer]"}function w($){return typeof FormData<"u"&&$ instanceof FormData}function a($){var U;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?U=ArrayBuffer.isView($):U=$&&$.buffer&&$.buffer instanceof ArrayBuffer,U}function L($){return typeof $=="string"}function R($){return typeof $=="number"}function D($){return $!==null&&typeof $=="object"}function C($){if(c.call($)!=="[object Object]")return!1;var U=Object.getPrototypeOf($);return U===null||U===Object.prototype}function k($){return c.call($)==="[object Date]"}function V($){return c.call($)==="[object File]"}function N($){return c.call($)==="[object Blob]"}function Q($){return c.call($)==="[object Function]"}function ce($){return D($)&&Q($.pipe)}function Te($){return typeof URLSearchParams<"u"&&$ instanceof URLSearchParams}function xe($){return $.trim?$.trim():$.replace(/^\s+|\s+$/g,"")}function ve(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Me($,U){if(!($===null||typeof $>"u"))if(typeof $!="object"&&($=[$]),p($))for(var de=0,K=$.length;de<K;de++)U.call(null,$[de],de,$);else for(var j in $)Object.prototype.hasOwnProperty.call($,j)&&U.call(null,$[j],j,$)}function ne(){var $={};function U(j,W){C($[W])&&C(j)?$[W]=ne($[W],j):C(j)?$[W]=ne({},j):p(j)?$[W]=j.slice():$[W]=j}for(var de=0,K=arguments.length;de<K;de++)Me(arguments[de],U);return $}function ue($,U,de){return Me(U,function(j,W){de&&typeof j=="function"?$[W]=u(j,de):$[W]=j}),$}function M($){return $.charCodeAt(0)===65279&&($=$.slice(1)),$}return Rg={isArray:p,isArrayBuffer:T,isBuffer:x,isFormData:w,isArrayBufferView:a,isString:L,isNumber:R,isObject:D,isPlainObject:C,isUndefined:v,isDate:k,isFile:V,isBlob:N,isFunction:Q,isStream:ce,isURLSearchParams:Te,isStandardBrowserEnv:ve,forEach:Me,merge:ne,extend:ue,trim:xe,stripBOM:M},Rg}var Fg,$_;function mw(){if($_)return Fg;$_=1;var u=ka();function c(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return Fg=function(v,x,T){if(!x)return v;var w;if(T)w=T(x);else if(u.isURLSearchParams(x))w=x.toString();else{var a=[];u.forEach(x,function(D,C){D===null||typeof D>"u"||(u.isArray(D)?C=C+"[]":D=[D],u.forEach(D,function(V){u.isDate(V)?V=V.toISOString():u.isObject(V)&&(V=JSON.stringify(V)),a.push(c(C)+"="+c(V))}))}),w=a.join("&")}if(w){var L=v.indexOf("#");L!==-1&&(v=v.slice(0,L)),v+=(v.indexOf("?")===-1?"?":"&")+w}return v},Fg}var Og,G_;function gI(){if(G_)return Og;G_=1;var u=ka();function c(){this.handlers=[]}return c.prototype.use=function(v,x,T){return this.handlers.push({fulfilled:v,rejected:x,synchronous:T?T.synchronous:!1,runWhen:T?T.runWhen:null}),this.handlers.length-1},c.prototype.eject=function(v){this.handlers[v]&&(this.handlers[v]=null)},c.prototype.forEach=function(v){u.forEach(this.handlers,function(T){T!==null&&v(T)})},Og=c,Og}var jg,H_;function yI(){if(H_)return jg;H_=1;var u=ka();return jg=function(p,v){u.forEach(p,function(T,w){w!==v&&w.toUpperCase()===v.toUpperCase()&&(p[v]=T,delete p[w])})},jg}var Lg,Z_;function gw(){return Z_||(Z_=1,Lg=function(c,p,v,x,T){return c.config=p,v&&(c.code=v),c.request=x,c.response=T,c.isAxiosError=!0,c.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},c}),Lg}var Dg,W_;function yw(){if(W_)return Dg;W_=1;var u=gw();return Dg=function(p,v,x,T,w){var a=new Error(p);return u(a,v,x,T,w)},Dg}var Bg,q_;function vI(){if(q_)return Bg;q_=1;var u=yw();return Bg=function(p,v,x){var T=x.config.validateStatus;!x.status||!T||T(x.status)?p(x):v(u("Request failed with status code "+x.status,x.config,null,x.request,x))},Bg}var Ng,X_;function _I(){if(X_)return Ng;X_=1;var u=ka();return Ng=u.isStandardBrowserEnv()?function(){return{write:function(v,x,T,w,a,L){var R=[];R.push(v+"="+encodeURIComponent(x)),u.isNumber(T)&&R.push("expires="+new Date(T).toGMTString()),u.isString(w)&&R.push("path="+w),u.isString(a)&&R.push("domain="+a),L===!0&&R.push("secure"),document.cookie=R.join("; ")},read:function(v){var x=document.cookie.match(new RegExp("(^|;\\s*)("+v+")=([^;]*)"));return x?decodeURIComponent(x[3]):null},remove:function(v){this.write(v,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ng}var Ug,K_;function xI(){return K_||(K_=1,Ug=function(c){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)}),Ug}var Vg,Y_;function wI(){return Y_||(Y_=1,Vg=function(c,p){return p?c.replace(/\/+$/,"")+"/"+p.replace(/^\/+/,""):c}),Vg}var $g,J_;function bI(){if(J_)return $g;J_=1;var u=xI(),c=wI();return $g=function(v,x){return v&&!u(x)?c(v,x):x},$g}var Gg,Q_;function SI(){if(Q_)return Gg;Q_=1;var u=ka(),c=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Gg=function(v){var x={},T,w,a;return v&&u.forEach(v.split(`
`),function(R){if(a=R.indexOf(":"),T=u.trim(R.substr(0,a)).toLowerCase(),w=u.trim(R.substr(a+1)),T){if(x[T]&&c.indexOf(T)>=0)return;T==="set-cookie"?x[T]=(x[T]?x[T]:[]).concat([w]):x[T]=x[T]?x[T]+", "+w:w}}),x},Gg}var Hg,e1;function EI(){if(e1)return Hg;e1=1;var u=ka();return Hg=u.isStandardBrowserEnv()?function(){var p=/(msie|trident)/i.test(navigator.userAgent),v=document.createElement("a"),x;function T(w){var a=w;return p&&(v.setAttribute("href",a),a=v.href),v.setAttribute("href",a),{href:v.href,protocol:v.protocol?v.protocol.replace(/:$/,""):"",host:v.host,search:v.search?v.search.replace(/^\?/,""):"",hash:v.hash?v.hash.replace(/^#/,""):"",hostname:v.hostname,port:v.port,pathname:v.pathname.charAt(0)==="/"?v.pathname:"/"+v.pathname}}return x=T(window.location.href),function(a){var L=u.isString(a)?T(a):a;return L.protocol===x.protocol&&L.host===x.host}}():function(){return function(){return!0}}(),Hg}var Zg,t1;function n1(){if(t1)return Zg;t1=1;var u=ka(),c=vI(),p=_I(),v=mw(),x=bI(),T=SI(),w=EI(),a=yw();return Zg=function(R){return new Promise(function(C,k){var V=R.data,N=R.headers,Q=R.responseType;u.isFormData(V)&&delete N["Content-Type"];var ce=new XMLHttpRequest;if(R.auth){var Te=R.auth.username||"",xe=R.auth.password?unescape(encodeURIComponent(R.auth.password)):"";N.Authorization="Basic "+btoa(Te+":"+xe)}var ve=x(R.baseURL,R.url);ce.open(R.method.toUpperCase(),v(ve,R.params,R.paramsSerializer),!0),ce.timeout=R.timeout;function Me(){if(ce){var ue="getAllResponseHeaders"in ce?T(ce.getAllResponseHeaders()):null,M=!Q||Q==="text"||Q==="json"?ce.responseText:ce.response,$={data:M,status:ce.status,statusText:ce.statusText,headers:ue,config:R,request:ce};c(C,k,$),ce=null}}if("onloadend"in ce?ce.onloadend=Me:ce.onreadystatechange=function(){!ce||ce.readyState!==4||ce.status===0&&!(ce.responseURL&&ce.responseURL.indexOf("file:")===0)||setTimeout(Me)},ce.onabort=function(){ce&&(k(a("Request aborted",R,"ECONNABORTED",ce)),ce=null)},ce.onerror=function(){k(a("Network Error",R,null,ce)),ce=null},ce.ontimeout=function(){var M="timeout of "+R.timeout+"ms exceeded";R.timeoutErrorMessage&&(M=R.timeoutErrorMessage),k(a(M,R,R.transitional&&R.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ce)),ce=null},u.isStandardBrowserEnv()){var ne=(R.withCredentials||w(ve))&&R.xsrfCookieName?p.read(R.xsrfCookieName):void 0;ne&&(N[R.xsrfHeaderName]=ne)}"setRequestHeader"in ce&&u.forEach(N,function(M,$){typeof V>"u"&&$.toLowerCase()==="content-type"?delete N[$]:ce.setRequestHeader($,M)}),u.isUndefined(R.withCredentials)||(ce.withCredentials=!!R.withCredentials),Q&&Q!=="json"&&(ce.responseType=R.responseType),typeof R.onDownloadProgress=="function"&&ce.addEventListener("progress",R.onDownloadProgress),typeof R.onUploadProgress=="function"&&ce.upload&&ce.upload.addEventListener("progress",R.onUploadProgress),R.cancelToken&&R.cancelToken.promise.then(function(M){ce&&(ce.abort(),k(M),ce=null)}),V||(V=null),ce.send(V)})},Zg}var Wg,r1;function X0(){if(r1)return Wg;r1=1;var u=ka(),c=yI(),p=gw(),v={"Content-Type":"application/x-www-form-urlencoded"};function x(L,R){!u.isUndefined(L)&&u.isUndefined(L["Content-Type"])&&(L["Content-Type"]=R)}function T(){var L;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(L=n1()),L}function w(L,R,D){if(u.isString(L))try{return(R||JSON.parse)(L),u.trim(L)}catch(C){if(C.name!=="SyntaxError")throw C}return(0,JSON.stringify)(L)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:T(),transformRequest:[function(R,D){return c(D,"Accept"),c(D,"Content-Type"),u.isFormData(R)||u.isArrayBuffer(R)||u.isBuffer(R)||u.isStream(R)||u.isFile(R)||u.isBlob(R)?R:u.isArrayBufferView(R)?R.buffer:u.isURLSearchParams(R)?(x(D,"application/x-www-form-urlencoded;charset=utf-8"),R.toString()):u.isObject(R)||D&&D["Content-Type"]==="application/json"?(x(D,"application/json"),w(R)):R}],transformResponse:[function(R){var D=this.transitional,C=D&&D.silentJSONParsing,k=D&&D.forcedJSONParsing,V=!C&&this.responseType==="json";if(V||k&&u.isString(R)&&R.length)try{return JSON.parse(R)}catch(N){if(V)throw N.name==="SyntaxError"?p(N,this,"E_JSON_PARSE"):N}return R}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(R){return R>=200&&R<300}};return a.headers={common:{Accept:"application/json, text/plain, */*"}},u.forEach(["delete","get","head"],function(R){a.headers[R]={}}),u.forEach(["post","put","patch"],function(R){a.headers[R]=u.merge(v)}),Wg=a,Wg}var qg,i1;function TI(){if(i1)return qg;i1=1;var u=ka(),c=X0();return qg=function(v,x,T){var w=this||c;return u.forEach(T,function(L){v=L.call(w,v,x)}),v},qg}var Xg,o1;function vw(){return o1||(o1=1,Xg=function(c){return!!(c&&c.__CANCEL__)}),Xg}var Kg,s1;function II(){if(s1)return Kg;s1=1;var u=ka(),c=TI(),p=vw(),v=X0();function x(T){T.cancelToken&&T.cancelToken.throwIfRequested()}return Kg=function(w){x(w),w.headers=w.headers||{},w.data=c.call(w,w.data,w.headers,w.transformRequest),w.headers=u.merge(w.headers.common||{},w.headers[w.method]||{},w.headers),u.forEach(["delete","get","head","post","put","patch","common"],function(R){delete w.headers[R]});var a=w.adapter||v.adapter;return a(w).then(function(R){return x(w),R.data=c.call(w,R.data,R.headers,w.transformResponse),R},function(R){return p(R)||(x(w),R&&R.response&&(R.response.data=c.call(w,R.response.data,R.response.headers,w.transformResponse))),Promise.reject(R)})},Kg}var Yg,a1;function _w(){if(a1)return Yg;a1=1;var u=ka();return Yg=function(p,v){v=v||{};var x={},T=["url","method","data"],w=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],L=["validateStatus"];function R(V,N){return u.isPlainObject(V)&&u.isPlainObject(N)?u.merge(V,N):u.isPlainObject(N)?u.merge({},N):u.isArray(N)?N.slice():N}function D(V){u.isUndefined(v[V])?u.isUndefined(p[V])||(x[V]=R(void 0,p[V])):x[V]=R(p[V],v[V])}u.forEach(T,function(N){u.isUndefined(v[N])||(x[N]=R(void 0,v[N]))}),u.forEach(w,D),u.forEach(a,function(N){u.isUndefined(v[N])?u.isUndefined(p[N])||(x[N]=R(void 0,p[N])):x[N]=R(void 0,v[N])}),u.forEach(L,function(N){N in v?x[N]=R(p[N],v[N]):N in p&&(x[N]=R(void 0,p[N]))});var C=T.concat(w).concat(a).concat(L),k=Object.keys(p).concat(Object.keys(v)).filter(function(N){return C.indexOf(N)===-1});return u.forEach(k,D),x},Yg}const CI="axios",PI="0.21.4",AI="Promise based HTTP client for the browser and node.js",MI="index.js",kI={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},zI={type:"git",url:"https://github.com/axios/axios.git"},RI=["xhr","http","ajax","promise","node"],FI="Matt Zabriskie",OI="MIT",jI={url:"https://github.com/axios/axios/issues"},LI="https://axios-http.com",DI={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},BI={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},NI="dist/axios.min.js",UI="dist/axios.min.js",VI="./index.d.ts",$I={"follow-redirects":"^1.14.0"},GI=[{path:"./dist/axios.min.js",threshold:"5kB"}],HI={name:CI,version:PI,description:AI,main:MI,scripts:kI,repository:zI,keywords:RI,author:FI,license:OI,bugs:jI,homepage:LI,devDependencies:DI,browser:BI,jsdelivr:NI,unpkg:UI,typings:VI,dependencies:$I,bundlesize:GI};var Jg,l1;function ZI(){if(l1)return Jg;l1=1;var u=HI,c={};["object","boolean","number","function","string","symbol"].forEach(function(w,a){c[w]=function(R){return typeof R===w||"a"+(a<1?"n ":" ")+w}});var p={},v=u.version.split(".");function x(w,a){for(var L=a?a.split("."):v,R=w.split("."),D=0;D<3;D++){if(L[D]>R[D])return!0;if(L[D]<R[D])return!1}return!1}c.transitional=function(a,L,R){var D=L&&x(L);function C(k,V){return"[Axios v"+u.version+"] Transitional option '"+k+"'"+V+(R?". "+R:"")}return function(k,V,N){if(a===!1)throw new Error(C(V," has been removed in "+L));return D&&!p[V]&&(p[V]=!0,console.warn(C(V," has been deprecated since v"+L+" and will be removed in the near future"))),a?a(k,V,N):!0}};function T(w,a,L){if(typeof w!="object")throw new TypeError("options must be an object");for(var R=Object.keys(w),D=R.length;D-- >0;){var C=R[D],k=a[C];if(k){var V=w[C],N=V===void 0||k(V,C,w);if(N!==!0)throw new TypeError("option "+C+" must be "+N);continue}if(L!==!0)throw Error("Unknown option "+C)}}return Jg={isOlderVersion:x,assertOptions:T,validators:c},Jg}var Qg,u1;function WI(){if(u1)return Qg;u1=1;var u=ka(),c=mw(),p=gI(),v=II(),x=_w(),T=ZI(),w=T.validators;function a(L){this.defaults=L,this.interceptors={request:new p,response:new p}}return a.prototype.request=function(R){typeof R=="string"?(R=arguments[1]||{},R.url=arguments[0]):R=R||{},R=x(this.defaults,R),R.method?R.method=R.method.toLowerCase():this.defaults.method?R.method=this.defaults.method.toLowerCase():R.method="get";var D=R.transitional;D!==void 0&&T.assertOptions(D,{silentJSONParsing:w.transitional(w.boolean,"1.0.0"),forcedJSONParsing:w.transitional(w.boolean,"1.0.0"),clarifyTimeoutError:w.transitional(w.boolean,"1.0.0")},!1);var C=[],k=!0;this.interceptors.request.forEach(function(Me){typeof Me.runWhen=="function"&&Me.runWhen(R)===!1||(k=k&&Me.synchronous,C.unshift(Me.fulfilled,Me.rejected))});var V=[];this.interceptors.response.forEach(function(Me){V.push(Me.fulfilled,Me.rejected)});var N;if(!k){var Q=[v,void 0];for(Array.prototype.unshift.apply(Q,C),Q=Q.concat(V),N=Promise.resolve(R);Q.length;)N=N.then(Q.shift(),Q.shift());return N}for(var ce=R;C.length;){var Te=C.shift(),xe=C.shift();try{ce=Te(ce)}catch(ve){xe(ve);break}}try{N=v(ce)}catch(ve){return Promise.reject(ve)}for(;V.length;)N=N.then(V.shift(),V.shift());return N},a.prototype.getUri=function(R){return R=x(this.defaults,R),c(R.url,R.params,R.paramsSerializer).replace(/^\?/,"")},u.forEach(["delete","get","head","options"],function(R){a.prototype[R]=function(D,C){return this.request(x(C||{},{method:R,url:D,data:(C||{}).data}))}}),u.forEach(["post","put","patch"],function(R){a.prototype[R]=function(D,C,k){return this.request(x(k||{},{method:R,url:D,data:C}))}}),Qg=a,Qg}var ey,c1;function xw(){if(c1)return ey;c1=1;function u(c){this.message=c}return u.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},u.prototype.__CANCEL__=!0,ey=u,ey}var ty,h1;function qI(){if(h1)return ty;h1=1;var u=xw();function c(p){if(typeof p!="function")throw new TypeError("executor must be a function.");var v;this.promise=new Promise(function(w){v=w});var x=this;p(function(w){x.reason||(x.reason=new u(w),v(x.reason))})}return c.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},c.source=function(){var v,x=new c(function(w){v=w});return{token:x,cancel:v}},ty=c,ty}var ny,d1;function XI(){return d1||(d1=1,ny=function(c){return function(v){return c.apply(null,v)}}),ny}var ry,f1;function KI(){return f1||(f1=1,ry=function(c){return typeof c=="object"&&c.isAxiosError===!0}),ry}var p1;function YI(){if(p1)return Xp.exports;p1=1;var u=ka(),c=pw(),p=WI(),v=_w(),x=X0();function T(a){var L=new p(a),R=c(p.prototype.request,L);return u.extend(R,p.prototype,L),u.extend(R,L),R}var w=T(x);return w.Axios=p,w.create=function(L){return T(v(w.defaults,L))},w.Cancel=xw(),w.CancelToken=qI(),w.isCancel=vw(),w.all=function(L){return Promise.all(L)},w.spread=XI(),w.isAxiosError=KI(),Xp.exports=w,Xp.exports.default=w,Xp.exports}var iy,m1;function JI(){return m1||(m1=1,iy=YI()),iy}const QI={},eC=Object.freeze(Object.defineProperty({__proto__:null,default:QI},Symbol.toStringTag,{value:"Module"})),tC=u0(eC);var pf={},oy,g1;function nC(){if(g1)return oy;g1=1,oy=u;function u(c,p){this.x=c,this.y=p}return u.prototype={clone:function(){return new u(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,p){return this.clone()._rotateAround(c,p)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var p=c.x-this.x,v=c.y-this.y;return p*p+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,p){return Math.atan2(this.x*p-this.y*c,this.x*c+this.y*p)},_matMult:function(c){var p=c[0]*this.x+c[1]*this.y,v=c[2]*this.x+c[3]*this.y;return this.x=p,this.y=v,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var p=Math.cos(c),v=Math.sin(c),x=p*this.x-v*this.y,T=v*this.x+p*this.y;return this.x=x,this.y=T,this},_rotateAround:function(c,p){var v=Math.cos(c),x=Math.sin(c),T=p.x+v*(this.x-p.x)-x*(this.y-p.y),w=p.y+x*(this.x-p.x)+v*(this.y-p.y);return this.x=T,this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(c){return c instanceof u?c:Array.isArray(c)?new u(c[0],c[1]):c},oy}var sy,y1;function ww(){if(y1)return sy;y1=1;var u=nC();sy=c;function c(w,a,L,R,D){this.properties={},this.extent=L,this.type=0,this._pbf=w,this._geometry=-1,this._keys=R,this._values=D,w.readFields(p,this,a)}function p(w,a,L){w==1?a.id=L.readVarint():w==2?v(L,a):w==3?a.type=L.readVarint():w==4&&(a._geometry=L.pos)}function v(w,a){for(var L=w.readVarint()+w.pos;w.pos<L;){var R=a._keys[w.readVarint()],D=a._values[w.readVarint()];a.properties[R]=D}}c.types=["Unknown","Point","LineString","Polygon"],c.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var a=w.readVarint()+w.pos,L=1,R=0,D=0,C=0,k=[],V;w.pos<a;){if(R<=0){var N=w.readVarint();L=N&7,R=N>>3}if(R--,L===1||L===2)D+=w.readSVarint(),C+=w.readSVarint(),L===1&&(V&&k.push(V),V=[]),V.push(new u(D,C));else if(L===7)V&&V.push(V[0].clone());else throw new Error("unknown command "+L)}return V&&k.push(V),k},c.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var a=w.readVarint()+w.pos,L=1,R=0,D=0,C=0,k=1/0,V=-1/0,N=1/0,Q=-1/0;w.pos<a;){if(R<=0){var ce=w.readVarint();L=ce&7,R=ce>>3}if(R--,L===1||L===2)D+=w.readSVarint(),C+=w.readSVarint(),D<k&&(k=D),D>V&&(V=D),C<N&&(N=C),C>Q&&(Q=C);else if(L!==7)throw new Error("unknown command "+L)}return[k,N,V,Q]},c.prototype.toGeoJSON=function(w,a,L){var R=this.extent*Math.pow(2,L),D=this.extent*w,C=this.extent*a,k=this.loadGeometry(),V=c.types[this.type],N,Q;function ce(ve){for(var Me=0;Me<ve.length;Me++){var ne=ve[Me],ue=180-(ne.y+C)*360/R;ve[Me]=[(ne.x+D)*360/R-180,360/Math.PI*Math.atan(Math.exp(ue*Math.PI/180))-90]}}switch(this.type){case 1:var Te=[];for(N=0;N<k.length;N++)Te[N]=k[N][0];k=Te,ce(k);break;case 2:for(N=0;N<k.length;N++)ce(k[N]);break;case 3:for(k=x(k),N=0;N<k.length;N++)for(Q=0;Q<k[N].length;Q++)ce(k[N][Q]);break}k.length===1?k=k[0]:V="Multi"+V;var xe={type:"Feature",geometry:{type:V,coordinates:k},properties:this.properties};return"id"in this&&(xe.id=this.id),xe};function x(w){var a=w.length;if(a<=1)return[w];for(var L=[],R,D,C=0;C<a;C++){var k=T(w[C]);k!==0&&(D===void 0&&(D=k<0),D===k<0?(R&&L.push(R),R=[w[C]]):R.push(w[C]))}return R&&L.push(R),L}function T(w){for(var a=0,L=0,R=w.length,D=R-1,C,k;L<R;D=L++)C=w[L],k=w[D],a+=(k.x-C.x)*(C.y+k.y);return a}return sy}var ay,v1;function bw(){if(v1)return ay;v1=1;var u=ww();ay=c;function c(x,T){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=x,this._keys=[],this._values=[],this._features=[],x.readFields(p,this,T),this.length=this._features.length}function p(x,T,w){x===15?T.version=w.readVarint():x===1?T.name=w.readString():x===5?T.extent=w.readVarint():x===2?T._features.push(w.pos):x===3?T._keys.push(w.readString()):x===4&&T._values.push(v(w))}function v(x){for(var T=null,w=x.readVarint()+x.pos;x.pos<w;){var a=x.readVarint()>>3;T=a===1?x.readString():a===2?x.readFloat():a===3?x.readDouble():a===4?x.readVarint64():a===5?x.readVarint():a===6?x.readSVarint():a===7?x.readBoolean():null}return T}return c.prototype.feature=function(x){if(x<0||x>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[x];var T=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,T,this.extent,this._keys,this._values)},ay}var ly,_1;function rC(){if(_1)return ly;_1=1;var u=bw();ly=c;function c(v,x){this.layers=v.readFields(p,{},x)}function p(v,x,T){if(v===3){var w=new u(T,T.readVarint()+T.pos);w.length&&(x[w.name]=w)}}return ly}var x1;function iC(){return x1||(x1=1,pf.VectorTile=rC(),pf.VectorTileFeature=ww(),pf.VectorTileLayer=bw()),pf}var w1;function oC(){return w1||(w1=1,function(u){Object.defineProperty(u,"__esModule",{value:!0});var c=JT,p=pI,v=mI(),x=JI(),T=tC,w=iC();function a(xe){return xe&&typeof xe=="object"&&"default"in xe?xe:{default:xe}}var L=a(v),R=a(x),D=a(T),C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof xd<"u"?xd:typeof self<"u"?self:{};function k(xe){var ve={exports:{}};return xe(ve,ve.exports),ve.exports}var V=k(function(xe,ve){(function(ne,ue){xe.exports=ue(R.default)})(C,function(Me){return function(ne){var ue={};function M($){if(ue[$])return ue[$].exports;var U=ue[$]={i:$,l:!1,exports:{}};return ne[$].call(U.exports,U,U.exports,M),U.l=!0,U.exports}return M.m=ne,M.c=ue,M.d=function($,U,de){M.o($,U)||Object.defineProperty($,U,{enumerable:!0,get:de})},M.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},M.t=function($,U){if(U&1&&($=M($)),U&8||U&4&&typeof $=="object"&&$&&$.__esModule)return $;var de=Object.create(null);if(M.r(de),Object.defineProperty(de,"default",{enumerable:!0,value:$}),U&2&&typeof $!="string")for(var K in $)M.d(de,K,(function(j){return $[j]}).bind(null,K));return de},M.n=function($){var U=$&&$.__esModule?function(){return $.default}:function(){return $};return M.d(U,"a",U),U},M.o=function($,U){return Object.prototype.hasOwnProperty.call($,U)},M.p="",M(M.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(ne,ue,M){M.r(ue),M.d(ue,"CacheControl",function(){return he}),M.d(ue,"parse",function(){return Fe}),M.d(ue,"format",function(){return Oe}),M("./node_modules/core-js/modules/es6.array.from.js"),M("./node_modules/core-js/modules/es6.function.name.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/core-js/modules/web.dom.iterable.js"),M("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.regexp.split.js"),M("./node_modules/core-js/modules/es6.number.is-finite.js");function $(De,Ke){return W(De)||j(De,Ke)||de(De,Ke)||U()}function U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(De,Ke){if(De){if(typeof De=="string")return K(De,Ke);var tt=Object.prototype.toString.call(De).slice(8,-1);if(tt==="Object"&&De.constructor&&(tt=De.constructor.name),tt==="Map"||tt==="Set")return Array.from(De);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return K(De,Ke)}}function K(De,Ke){(Ke==null||Ke>De.length)&&(Ke=De.length);for(var tt=0,pt=new Array(Ke);tt<Ke;tt++)pt[tt]=De[tt];return pt}function j(De,Ke){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(De)))){var tt=[],pt=!0,_t=!1,Tt=void 0;try{for(var Lt=De[Symbol.iterator](),It;!(pt=(It=Lt.next()).done)&&(tt.push(It.value),!(Ke&&tt.length===Ke));pt=!0);}catch(kt){_t=!0,Tt=kt}finally{try{!pt&&Lt.return!=null&&Lt.return()}finally{if(_t)throw Tt}}return tt}}function W(De){if(Array.isArray(De))return De}function J(De,Ke){if(!(De instanceof Ke))throw new TypeError("Cannot call a class as a function")}function re(De,Ke){for(var tt=0;tt<Ke.length;tt++){var pt=Ke[tt];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(De,pt.key,pt)}}function le(De,Ke,tt){return Ke&&re(De.prototype,Ke),De}var te=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,oe={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function _e(De){return De===null}function be(De){if(!De)return null;var Ke=parseInt(De,10);return!Number.isFinite(Ke)||Ke<0?null:Ke}var he=function(){function De(){J(this,De),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return le(De,[{key:"parse",value:function(tt){if(!tt||tt.length===0)return this;var pt={},_t=tt.match(te)||[];return Array.prototype.forEach.call(_t,function(Tt){var Lt=Tt.split("=",2),It=$(Lt,1),kt=It[0],Jt=null;Lt.length>1&&(Jt=Lt[1].trim()),pt[kt.toLowerCase()]=Jt}),this.maxAge=be(pt[oe.maxAge]),this.sharedMaxAge=be(pt[oe.sharedMaxAge]),this.maxStale=_e(pt[oe.maxStale]),this.maxStaleDuration=be(pt[oe.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=be(pt[oe.minFresh]),this.immutable=_e(pt[oe.immutable]),this.mustRevalidate=_e(pt[oe.mustRevalidate]),this.noCache=_e(pt[oe.noCache]),this.noStore=_e(pt[oe.noStore]),this.noTransform=_e(pt[oe.noTransform]),this.onlyIfCached=_e(pt[oe.onlyIfCached]),this.private=_e(pt[oe.private]),this.proxyRevalidate=_e(pt[oe.proxyRevalidate]),this.public=_e(pt[oe.public]),this}},{key:"format",value:function(){var tt=[];return this.maxAge&&tt.push("".concat(oe.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&tt.push("".concat(oe.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?tt.push("".concat(oe.maxStale,"=").concat(this.maxStaleDuration)):tt.push(oe.maxStale)),this.minFresh&&tt.push("".concat(oe.minFresh,"=").concat(this.minFresh)),this.immutable&&tt.push(oe.immutable),this.mustRevalidate&&tt.push(oe.mustRevalidate),this.noCache&&tt.push(oe.noCache),this.noStore&&tt.push(oe.noStore),this.noTransform&&tt.push(oe.noTransform),this.onlyIfCached&&tt.push(oe.onlyIfCached),this.private&&tt.push(oe.private),this.proxyRevalidate&&tt.push(oe.proxyRevalidate),this.public&&tt.push(oe.public),tt.join(", ")}}]),De}();function Fe(De){var Ke=new he;return Ke.parse(De)}function Oe(De){return De instanceof he?De.format():he.prototype.format.call(De)}ue.default={CacheControl:he,parse:Fe,format:Oe}},"./node_modules/charenc/charenc.js":function(ne,ue){var M={utf8:{stringToBytes:function($){return M.bin.stringToBytes(unescape(encodeURIComponent($)))},bytesToString:function($){return decodeURIComponent(escape(M.bin.bytesToString($)))}},bin:{stringToBytes:function($){for(var U=[],de=0;de<$.length;de++)U.push($.charCodeAt(de)&255);return U},bytesToString:function($){for(var U=[],de=0;de<$.length;de++)U.push(String.fromCharCode($[de]));return U.join("")}}};ne.exports=M},"./node_modules/core-js/modules/_a-function.js":function(ne,ue){ne.exports=function(M){if(typeof M!="function")throw TypeError(M+" is not a function!");return M}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_wks.js")("unscopables"),U=Array.prototype;U[$]==null&&M("./node_modules/core-js/modules/_hide.js")(U,$,{}),ne.exports=function(de){U[$][de]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_string-at.js")(!0);ne.exports=function(U,de,K){return de+(K?$(U,de).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_is-object.js");ne.exports=function(U){if(!$(U))throw TypeError(U+" is not an object!");return U}},"./node_modules/core-js/modules/_array-includes.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_to-iobject.js"),U=M("./node_modules/core-js/modules/_to-length.js"),de=M("./node_modules/core-js/modules/_to-absolute-index.js");ne.exports=function(K){return function(j,W,J){var re=$(j),le=U(re.length),te=de(J,le),oe;if(K&&W!=W){for(;le>te;)if(oe=re[te++],oe!=oe)return!0}else for(;le>te;te++)if((K||te in re)&&re[te]===W)return K||te||0;return!K&&-1}}},"./node_modules/core-js/modules/_bind.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_a-function.js"),U=M("./node_modules/core-js/modules/_is-object.js"),de=M("./node_modules/core-js/modules/_invoke.js"),K=[].slice,j={},W=function(J,re,le){if(!(re in j)){for(var te=[],oe=0;oe<re;oe++)te[oe]="a["+oe+"]";j[re]=Function("F,a","return new F("+te.join(",")+")")}return j[re](J,le)};ne.exports=Function.bind||function(re){var le=$(this),te=K.call(arguments,1),oe=function(){var _e=te.concat(K.call(arguments));return this instanceof oe?W(le,_e.length,_e):de(le,_e,re)};return U(le.prototype)&&(oe.prototype=le.prototype),oe}},"./node_modules/core-js/modules/_classof.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_cof.js"),U=M("./node_modules/core-js/modules/_wks.js")("toStringTag"),de=$(function(){return arguments}())=="Arguments",K=function(j,W){try{return j[W]}catch{}};ne.exports=function(j){var W,J,re;return j===void 0?"Undefined":j===null?"Null":typeof(J=K(W=Object(j),U))=="string"?J:de?$(W):(re=$(W))=="Object"&&typeof W.callee=="function"?"Arguments":re}},"./node_modules/core-js/modules/_cof.js":function(ne,ue){var M={}.toString;ne.exports=function($){return M.call($).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(ne,ue){var M=ne.exports={version:"2.6.12"};typeof __e=="number"&&(__e=M)},"./node_modules/core-js/modules/_create-property.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-dp.js"),U=M("./node_modules/core-js/modules/_property-desc.js");ne.exports=function(de,K,j){K in de?$.f(de,K,U(0,j)):de[K]=j}},"./node_modules/core-js/modules/_ctx.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_a-function.js");ne.exports=function(U,de,K){if($(U),de===void 0)return U;switch(K){case 1:return function(j){return U.call(de,j)};case 2:return function(j,W){return U.call(de,j,W)};case 3:return function(j,W,J){return U.call(de,j,W,J)}}return function(){return U.apply(de,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(ne,ue){ne.exports=function(M){if(M==null)throw TypeError("Can't call method on  "+M);return M}},"./node_modules/core-js/modules/_descriptors.js":function(ne,ue,M){ne.exports=!M("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_is-object.js"),U=M("./node_modules/core-js/modules/_global.js").document,de=$(U)&&$(U.createElement);ne.exports=function(K){return de?U.createElement(K):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(ne,ue){ne.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-keys.js"),U=M("./node_modules/core-js/modules/_object-gops.js"),de=M("./node_modules/core-js/modules/_object-pie.js");ne.exports=function(K){var j=$(K),W=U.f;if(W)for(var J=W(K),re=de.f,le=0,te;J.length>le;)re.call(K,te=J[le++])&&j.push(te);return j}},"./node_modules/core-js/modules/_export.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_global.js"),U=M("./node_modules/core-js/modules/_core.js"),de=M("./node_modules/core-js/modules/_hide.js"),K=M("./node_modules/core-js/modules/_redefine.js"),j=M("./node_modules/core-js/modules/_ctx.js"),W="prototype",J=function(re,le,te){var oe=re&J.F,_e=re&J.G,be=re&J.S,he=re&J.P,Fe=re&J.B,Oe=_e?$:be?$[le]||($[le]={}):($[le]||{})[W],De=_e?U:U[le]||(U[le]={}),Ke=De[W]||(De[W]={}),tt,pt,_t,Tt;_e&&(te=le);for(tt in te)pt=!oe&&Oe&&Oe[tt]!==void 0,_t=(pt?Oe:te)[tt],Tt=Fe&&pt?j(_t,$):he&&typeof _t=="function"?j(Function.call,_t):_t,Oe&&K(Oe,tt,_t,re&J.U),De[tt]!=_t&&de(De,tt,Tt),he&&Ke[tt]!=_t&&(Ke[tt]=_t)};$.core=U,J.F=1,J.G=2,J.S=4,J.P=8,J.B=16,J.W=32,J.U=64,J.R=128,ne.exports=J},"./node_modules/core-js/modules/_fails-is-regexp.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_wks.js")("match");ne.exports=function(U){var de=/./;try{"/./"[U](de)}catch{try{return de[$]=!1,!"/./"[U](de)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(ne,ue){ne.exports=function(M){try{return!!M()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(ne,ue,M){M("./node_modules/core-js/modules/es6.regexp.exec.js");var $=M("./node_modules/core-js/modules/_redefine.js"),U=M("./node_modules/core-js/modules/_hide.js"),de=M("./node_modules/core-js/modules/_fails.js"),K=M("./node_modules/core-js/modules/_defined.js"),j=M("./node_modules/core-js/modules/_wks.js"),W=M("./node_modules/core-js/modules/_regexp-exec.js"),J=j("species"),re=!de(function(){var te=/./;return te.exec=function(){var oe=[];return oe.groups={a:"7"},oe},"".replace(te,"$<a>")!=="7"}),le=function(){var te=/(?:)/,oe=te.exec;te.exec=function(){return oe.apply(this,arguments)};var _e="ab".split(te);return _e.length===2&&_e[0]==="a"&&_e[1]==="b"}();ne.exports=function(te,oe,_e){var be=j(te),he=!de(function(){var pt={};return pt[be]=function(){return 7},""[te](pt)!=7}),Fe=he?!de(function(){var pt=!1,_t=/a/;return _t.exec=function(){return pt=!0,null},te==="split"&&(_t.constructor={},_t.constructor[J]=function(){return _t}),_t[be](""),!pt}):void 0;if(!he||!Fe||te==="replace"&&!re||te==="split"&&!le){var Oe=/./[be],De=_e(K,be,""[te],function(_t,Tt,Lt,It,kt){return Tt.exec===W?he&&!kt?{done:!0,value:Oe.call(Tt,Lt,It)}:{done:!0,value:_t.call(Lt,Tt,It)}:{done:!1}}),Ke=De[0],tt=De[1];$(String.prototype,te,Ke),U(RegExp.prototype,be,oe==2?function(pt,_t){return tt.call(pt,this,_t)}:function(pt){return tt.call(pt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_an-object.js");ne.exports=function(){var U=$(this),de="";return U.global&&(de+="g"),U.ignoreCase&&(de+="i"),U.multiline&&(de+="m"),U.unicode&&(de+="u"),U.sticky&&(de+="y"),de}},"./node_modules/core-js/modules/_function-to-string.js":function(ne,ue,M){ne.exports=M("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(ne,ue){var M=ne.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=M)},"./node_modules/core-js/modules/_has.js":function(ne,ue){var M={}.hasOwnProperty;ne.exports=function($,U){return M.call($,U)}},"./node_modules/core-js/modules/_hide.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-dp.js"),U=M("./node_modules/core-js/modules/_property-desc.js");ne.exports=M("./node_modules/core-js/modules/_descriptors.js")?function(de,K,j){return $.f(de,K,U(1,j))}:function(de,K,j){return de[K]=j,de}},"./node_modules/core-js/modules/_html.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_global.js").document;ne.exports=$&&$.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(ne,ue,M){ne.exports=!M("./node_modules/core-js/modules/_descriptors.js")&&!M("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(M("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(ne,ue){ne.exports=function(M,$,U){var de=U===void 0;switch($.length){case 0:return de?M():M.call(U);case 1:return de?M($[0]):M.call(U,$[0]);case 2:return de?M($[0],$[1]):M.call(U,$[0],$[1]);case 3:return de?M($[0],$[1],$[2]):M.call(U,$[0],$[1],$[2]);case 4:return de?M($[0],$[1],$[2],$[3]):M.call(U,$[0],$[1],$[2],$[3])}return M.apply(U,$)}},"./node_modules/core-js/modules/_iobject.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_cof.js");ne.exports=Object("z").propertyIsEnumerable(0)?Object:function(U){return $(U)=="String"?U.split(""):Object(U)}},"./node_modules/core-js/modules/_is-array-iter.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_iterators.js"),U=M("./node_modules/core-js/modules/_wks.js")("iterator"),de=Array.prototype;ne.exports=function(K){return K!==void 0&&($.Array===K||de[U]===K)}},"./node_modules/core-js/modules/_is-array.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_cof.js");ne.exports=Array.isArray||function(de){return $(de)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(ne,ue){ne.exports=function(M){return typeof M=="object"?M!==null:typeof M=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_is-object.js"),U=M("./node_modules/core-js/modules/_cof.js"),de=M("./node_modules/core-js/modules/_wks.js")("match");ne.exports=function(K){var j;return $(K)&&((j=K[de])!==void 0?!!j:U(K)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_an-object.js");ne.exports=function(U,de,K,j){try{return j?de($(K)[0],K[1]):de(K)}catch(J){var W=U.return;throw W!==void 0&&$(W.call(U)),J}}},"./node_modules/core-js/modules/_iter-create.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-create.js"),U=M("./node_modules/core-js/modules/_property-desc.js"),de=M("./node_modules/core-js/modules/_set-to-string-tag.js"),K={};M("./node_modules/core-js/modules/_hide.js")(K,M("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),ne.exports=function(j,W,J){j.prototype=$(K,{next:U(1,J)}),de(j,W+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_library.js"),U=M("./node_modules/core-js/modules/_export.js"),de=M("./node_modules/core-js/modules/_redefine.js"),K=M("./node_modules/core-js/modules/_hide.js"),j=M("./node_modules/core-js/modules/_iterators.js"),W=M("./node_modules/core-js/modules/_iter-create.js"),J=M("./node_modules/core-js/modules/_set-to-string-tag.js"),re=M("./node_modules/core-js/modules/_object-gpo.js"),le=M("./node_modules/core-js/modules/_wks.js")("iterator"),te=!([].keys&&"next"in[].keys()),oe="@@iterator",_e="keys",be="values",he=function(){return this};ne.exports=function(Fe,Oe,De,Ke,tt,pt,_t){W(De,Oe,Ke);var Tt=function(G){if(!te&&G in Jt)return Jt[G];switch(G){case _e:return function(){return new De(this,G)};case be:return function(){return new De(this,G)}}return function(){return new De(this,G)}},Lt=Oe+" Iterator",It=tt==be,kt=!1,Jt=Fe.prototype,cn=Jt[le]||Jt[oe]||tt&&Jt[tt],Tn=cn||Tt(tt),at=tt?It?Tt("entries"):Tn:void 0,kn=Oe=="Array"&&Jt.entries||cn,hn,en,ze;if(kn&&(ze=re(kn.call(new Fe)),ze!==Object.prototype&&ze.next&&(J(ze,Lt,!0),!$&&typeof ze[le]!="function"&&K(ze,le,he))),It&&cn&&cn.name!==be&&(kt=!0,Tn=function(){return cn.call(this)}),(!$||_t)&&(te||kt||!Jt[le])&&K(Jt,le,Tn),j[Oe]=Tn,j[Lt]=he,tt)if(hn={values:It?Tn:Tt(be),keys:pt?Tn:Tt(_e),entries:at},_t)for(en in hn)en in Jt||de(Jt,en,hn[en]);else U(U.P+U.F*(te||kt),Oe,hn);return hn}},"./node_modules/core-js/modules/_iter-detect.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_wks.js")("iterator"),U=!1;try{var de=[7][$]();de.return=function(){U=!0},Array.from(de,function(){throw 2})}catch{}ne.exports=function(K,j){if(!j&&!U)return!1;var W=!1;try{var J=[7],re=J[$]();re.next=function(){return{done:W=!0}},J[$]=function(){return re},K(J)}catch{}return W}},"./node_modules/core-js/modules/_iter-step.js":function(ne,ue){ne.exports=function(M,$){return{value:$,done:!!M}}},"./node_modules/core-js/modules/_iterators.js":function(ne,ue){ne.exports={}},"./node_modules/core-js/modules/_library.js":function(ne,ue){ne.exports=!1},"./node_modules/core-js/modules/_meta.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_uid.js")("meta"),U=M("./node_modules/core-js/modules/_is-object.js"),de=M("./node_modules/core-js/modules/_has.js"),K=M("./node_modules/core-js/modules/_object-dp.js").f,j=0,W=Object.isExtensible||function(){return!0},J=!M("./node_modules/core-js/modules/_fails.js")(function(){return W(Object.preventExtensions({}))}),re=function(be){K(be,$,{value:{i:"O"+ ++j,w:{}}})},le=function(be,he){if(!U(be))return typeof be=="symbol"?be:(typeof be=="string"?"S":"P")+be;if(!de(be,$)){if(!W(be))return"F";if(!he)return"E";re(be)}return be[$].i},te=function(be,he){if(!de(be,$)){if(!W(be))return!0;if(!he)return!1;re(be)}return be[$].w},oe=function(be){return J&&_e.NEED&&W(be)&&!de(be,$)&&re(be),be},_e=ne.exports={KEY:$,NEED:!1,fastKey:le,getWeak:te,onFreeze:oe}},"./node_modules/core-js/modules/_object-create.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_an-object.js"),U=M("./node_modules/core-js/modules/_object-dps.js"),de=M("./node_modules/core-js/modules/_enum-bug-keys.js"),K=M("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),j=function(){},W="prototype",J=function(){var re=M("./node_modules/core-js/modules/_dom-create.js")("iframe"),le=de.length,te="<",oe=">",_e;for(re.style.display="none",M("./node_modules/core-js/modules/_html.js").appendChild(re),re.src="javascript:",_e=re.contentWindow.document,_e.open(),_e.write(te+"script"+oe+"document.F=Object"+te+"/script"+oe),_e.close(),J=_e.F;le--;)delete J[W][de[le]];return J()};ne.exports=Object.create||function(le,te){var oe;return le!==null?(j[W]=$(le),oe=new j,j[W]=null,oe[K]=le):oe=J(),te===void 0?oe:U(oe,te)}},"./node_modules/core-js/modules/_object-dp.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_an-object.js"),U=M("./node_modules/core-js/modules/_ie8-dom-define.js"),de=M("./node_modules/core-js/modules/_to-primitive.js"),K=Object.defineProperty;ue.f=M("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(W,J,re){if($(W),J=de(J,!0),$(re),U)try{return K(W,J,re)}catch{}if("get"in re||"set"in re)throw TypeError("Accessors not supported!");return"value"in re&&(W[J]=re.value),W}},"./node_modules/core-js/modules/_object-dps.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-dp.js"),U=M("./node_modules/core-js/modules/_an-object.js"),de=M("./node_modules/core-js/modules/_object-keys.js");ne.exports=M("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(j,W){U(j);for(var J=de(W),re=J.length,le=0,te;re>le;)$.f(j,te=J[le++],W[te]);return j}},"./node_modules/core-js/modules/_object-gopd.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-pie.js"),U=M("./node_modules/core-js/modules/_property-desc.js"),de=M("./node_modules/core-js/modules/_to-iobject.js"),K=M("./node_modules/core-js/modules/_to-primitive.js"),j=M("./node_modules/core-js/modules/_has.js"),W=M("./node_modules/core-js/modules/_ie8-dom-define.js"),J=Object.getOwnPropertyDescriptor;ue.f=M("./node_modules/core-js/modules/_descriptors.js")?J:function(le,te){if(le=de(le),te=K(te,!0),W)try{return J(le,te)}catch{}if(j(le,te))return U(!$.f.call(le,te),le[te])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_to-iobject.js"),U=M("./node_modules/core-js/modules/_object-gopn.js").f,de={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],j=function(W){try{return U(W)}catch{return K.slice()}};ne.exports.f=function(J){return K&&de.call(J)=="[object Window]"?j(J):U($(J))}},"./node_modules/core-js/modules/_object-gopn.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-keys-internal.js"),U=M("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");ue.f=Object.getOwnPropertyNames||function(K){return $(K,U)}},"./node_modules/core-js/modules/_object-gops.js":function(ne,ue){ue.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_has.js"),U=M("./node_modules/core-js/modules/_to-object.js"),de=M("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),K=Object.prototype;ne.exports=Object.getPrototypeOf||function(j){return j=U(j),$(j,de)?j[de]:typeof j.constructor=="function"&&j instanceof j.constructor?j.constructor.prototype:j instanceof Object?K:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_has.js"),U=M("./node_modules/core-js/modules/_to-iobject.js"),de=M("./node_modules/core-js/modules/_array-includes.js")(!1),K=M("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");ne.exports=function(j,W){var J=U(j),re=0,le=[],te;for(te in J)te!=K&&$(J,te)&&le.push(te);for(;W.length>re;)$(J,te=W[re++])&&(~de(le,te)||le.push(te));return le}},"./node_modules/core-js/modules/_object-keys.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-keys-internal.js"),U=M("./node_modules/core-js/modules/_enum-bug-keys.js");ne.exports=Object.keys||function(K){return $(K,U)}},"./node_modules/core-js/modules/_object-pie.js":function(ne,ue){ue.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-gopn.js"),U=M("./node_modules/core-js/modules/_object-gops.js"),de=M("./node_modules/core-js/modules/_an-object.js"),K=M("./node_modules/core-js/modules/_global.js").Reflect;ne.exports=K&&K.ownKeys||function(W){var J=$.f(de(W)),re=U.f;return re?J.concat(re(W)):J}},"./node_modules/core-js/modules/_property-desc.js":function(ne,ue){ne.exports=function(M,$){return{enumerable:!(M&1),configurable:!(M&2),writable:!(M&4),value:$}}},"./node_modules/core-js/modules/_redefine.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_global.js"),U=M("./node_modules/core-js/modules/_hide.js"),de=M("./node_modules/core-js/modules/_has.js"),K=M("./node_modules/core-js/modules/_uid.js")("src"),j=M("./node_modules/core-js/modules/_function-to-string.js"),W="toString",J=(""+j).split(W);M("./node_modules/core-js/modules/_core.js").inspectSource=function(re){return j.call(re)},(ne.exports=function(re,le,te,oe){var _e=typeof te=="function";_e&&(de(te,"name")||U(te,"name",le)),re[le]!==te&&(_e&&(de(te,K)||U(te,K,re[le]?""+re[le]:J.join(String(le)))),re===$?re[le]=te:oe?re[le]?re[le]=te:U(re,le,te):(delete re[le],U(re,le,te)))})(Function.prototype,W,function(){return typeof this=="function"&&this[K]||j.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_classof.js"),U=RegExp.prototype.exec;ne.exports=function(de,K){var j=de.exec;if(typeof j=="function"){var W=j.call(de,K);if(typeof W!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return W}if($(de)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return U.call(de,K)}},"./node_modules/core-js/modules/_regexp-exec.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_flags.js"),U=RegExp.prototype.exec,de=String.prototype.replace,K=U,j="lastIndex",W=function(){var le=/a/,te=/b*/g;return U.call(le,"a"),U.call(te,"a"),le[j]!==0||te[j]!==0}(),J=/()??/.exec("")[1]!==void 0,re=W||J;re&&(K=function(te){var oe=this,_e,be,he,Fe;return J&&(be=new RegExp("^"+oe.source+"$(?!\\s)",$.call(oe))),W&&(_e=oe[j]),he=U.call(oe,te),W&&he&&(oe[j]=oe.global?he.index+he[0].length:_e),J&&he&&he.length>1&&de.call(he[0],be,function(){for(Fe=1;Fe<arguments.length-2;Fe++)arguments[Fe]===void 0&&(he[Fe]=void 0)}),he}),ne.exports=K},"./node_modules/core-js/modules/_set-to-string-tag.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-dp.js").f,U=M("./node_modules/core-js/modules/_has.js"),de=M("./node_modules/core-js/modules/_wks.js")("toStringTag");ne.exports=function(K,j,W){K&&!U(K=W?K:K.prototype,de)&&$(K,de,{configurable:!0,value:j})}},"./node_modules/core-js/modules/_shared-key.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_shared.js")("keys"),U=M("./node_modules/core-js/modules/_uid.js");ne.exports=function(de){return $[de]||($[de]=U(de))}},"./node_modules/core-js/modules/_shared.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_core.js"),U=M("./node_modules/core-js/modules/_global.js"),de="__core-js_shared__",K=U[de]||(U[de]={});(ne.exports=function(j,W){return K[j]||(K[j]=W!==void 0?W:{})})("versions",[]).push({version:$.version,mode:M("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_an-object.js"),U=M("./node_modules/core-js/modules/_a-function.js"),de=M("./node_modules/core-js/modules/_wks.js")("species");ne.exports=function(K,j){var W=$(K).constructor,J;return W===void 0||(J=$(W)[de])==null?j:U(J)}},"./node_modules/core-js/modules/_string-at.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_to-integer.js"),U=M("./node_modules/core-js/modules/_defined.js");ne.exports=function(de){return function(K,j){var W=String(U(K)),J=$(j),re=W.length,le,te;return J<0||J>=re?de?"":void 0:(le=W.charCodeAt(J),le<55296||le>56319||J+1===re||(te=W.charCodeAt(J+1))<56320||te>57343?de?W.charAt(J):le:de?W.slice(J,J+2):(le-55296<<10)+(te-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_is-regexp.js"),U=M("./node_modules/core-js/modules/_defined.js");ne.exports=function(de,K,j){if($(K))throw TypeError("String#"+j+" doesn't accept regex!");return String(U(de))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_to-integer.js"),U=Math.max,de=Math.min;ne.exports=function(K,j){return K=$(K),K<0?U(K+j,0):de(K,j)}},"./node_modules/core-js/modules/_to-integer.js":function(ne,ue){var M=Math.ceil,$=Math.floor;ne.exports=function(U){return isNaN(U=+U)?0:(U>0?$:M)(U)}},"./node_modules/core-js/modules/_to-iobject.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_iobject.js"),U=M("./node_modules/core-js/modules/_defined.js");ne.exports=function(de){return $(U(de))}},"./node_modules/core-js/modules/_to-length.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_to-integer.js"),U=Math.min;ne.exports=function(de){return de>0?U($(de),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_defined.js");ne.exports=function(U){return Object($(U))}},"./node_modules/core-js/modules/_to-primitive.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_is-object.js");ne.exports=function(U,de){if(!$(U))return U;var K,j;if(de&&typeof(K=U.toString)=="function"&&!$(j=K.call(U))||typeof(K=U.valueOf)=="function"&&!$(j=K.call(U))||!de&&typeof(K=U.toString)=="function"&&!$(j=K.call(U)))return j;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(ne,ue){var M=0,$=Math.random();ne.exports=function(U){return"Symbol(".concat(U===void 0?"":U,")_",(++M+$).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_global.js"),U=M("./node_modules/core-js/modules/_core.js"),de=M("./node_modules/core-js/modules/_library.js"),K=M("./node_modules/core-js/modules/_wks-ext.js"),j=M("./node_modules/core-js/modules/_object-dp.js").f;ne.exports=function(W){var J=U.Symbol||(U.Symbol=de?{}:$.Symbol||{});W.charAt(0)!="_"&&!(W in J)&&j(J,W,{value:K.f(W)})}},"./node_modules/core-js/modules/_wks-ext.js":function(ne,ue,M){ue.f=M("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_shared.js")("wks"),U=M("./node_modules/core-js/modules/_uid.js"),de=M("./node_modules/core-js/modules/_global.js").Symbol,K=typeof de=="function",j=ne.exports=function(W){return $[W]||($[W]=K&&de[W]||(K?de:U)("Symbol."+W))};j.store=$},"./node_modules/core-js/modules/core.get-iterator-method.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_classof.js"),U=M("./node_modules/core-js/modules/_wks.js")("iterator"),de=M("./node_modules/core-js/modules/_iterators.js");ne.exports=M("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(K){if(K!=null)return K[U]||K["@@iterator"]||de[$(K)]}},"./node_modules/core-js/modules/es6.array.from.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_ctx.js"),U=M("./node_modules/core-js/modules/_export.js"),de=M("./node_modules/core-js/modules/_to-object.js"),K=M("./node_modules/core-js/modules/_iter-call.js"),j=M("./node_modules/core-js/modules/_is-array-iter.js"),W=M("./node_modules/core-js/modules/_to-length.js"),J=M("./node_modules/core-js/modules/_create-property.js"),re=M("./node_modules/core-js/modules/core.get-iterator-method.js");U(U.S+U.F*!M("./node_modules/core-js/modules/_iter-detect.js")(function(le){Array.from(le)}),"Array",{from:function(te){var oe=de(te),_e=typeof this=="function"?this:Array,be=arguments.length,he=be>1?arguments[1]:void 0,Fe=he!==void 0,Oe=0,De=re(oe),Ke,tt,pt,_t;if(Fe&&(he=$(he,be>2?arguments[2]:void 0,2)),De!=null&&!(_e==Array&&j(De)))for(_t=De.call(oe),tt=new _e;!(pt=_t.next()).done;Oe++)J(tt,Oe,Fe?K(_t,he,[pt.value,Oe],!0):pt.value);else for(Ke=W(oe.length),tt=new _e(Ke);Ke>Oe;Oe++)J(tt,Oe,Fe?he(oe[Oe],Oe):oe[Oe]);return tt.length=Oe,tt}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_add-to-unscopables.js"),U=M("./node_modules/core-js/modules/_iter-step.js"),de=M("./node_modules/core-js/modules/_iterators.js"),K=M("./node_modules/core-js/modules/_to-iobject.js");ne.exports=M("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(j,W){this._t=K(j),this._i=0,this._k=W},function(){var j=this._t,W=this._k,J=this._i++;return!j||J>=j.length?(this._t=void 0,U(1)):W=="keys"?U(0,J):W=="values"?U(0,j[J]):U(0,[J,j[J]])},"values"),de.Arguments=de.Array,$("keys"),$("values"),$("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_export.js");$($.P,"Function",{bind:M("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_object-dp.js").f,U=Function.prototype,de=/^\s*function ([^ (]*)/,K="name";K in U||M("./node_modules/core-js/modules/_descriptors.js")&&$(U,K,{configurable:!0,get:function(){try{return(""+this).match(de)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_export.js"),U=M("./node_modules/core-js/modules/_global.js").isFinite;$($.S,"Number",{isFinite:function(K){return typeof K=="number"&&U(K)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_classof.js"),U={};U[M("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",U+""!="[object z]"&&M("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+$(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_regexp-exec.js");M("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:$!==/./.exec},{exec:$})},"./node_modules/core-js/modules/es6.regexp.split.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_is-regexp.js"),U=M("./node_modules/core-js/modules/_an-object.js"),de=M("./node_modules/core-js/modules/_species-constructor.js"),K=M("./node_modules/core-js/modules/_advance-string-index.js"),j=M("./node_modules/core-js/modules/_to-length.js"),W=M("./node_modules/core-js/modules/_regexp-exec-abstract.js"),J=M("./node_modules/core-js/modules/_regexp-exec.js"),re=M("./node_modules/core-js/modules/_fails.js"),le=Math.min,te=[].push,oe="split",_e="length",be="lastIndex",he=4294967295,Fe=!re(function(){});M("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Oe,De,Ke,tt){var pt;return"abbc"[oe](/(b)*/)[1]=="c"||"test"[oe](/(?:)/,-1)[_e]!=4||"ab"[oe](/(?:ab)*/)[_e]!=2||"."[oe](/(.?)(.?)/)[_e]!=4||"."[oe](/()()/)[_e]>1||""[oe](/.?/)[_e]?pt=function(_t,Tt){var Lt=String(this);if(_t===void 0&&Tt===0)return[];if(!$(_t))return Ke.call(Lt,_t,Tt);for(var It=[],kt=(_t.ignoreCase?"i":"")+(_t.multiline?"m":"")+(_t.unicode?"u":"")+(_t.sticky?"y":""),Jt=0,cn=Tt===void 0?he:Tt>>>0,Tn=new RegExp(_t.source,kt+"g"),at,kn,hn;(at=J.call(Tn,Lt))&&(kn=Tn[be],!(kn>Jt&&(It.push(Lt.slice(Jt,at.index)),at[_e]>1&&at.index<Lt[_e]&&te.apply(It,at.slice(1)),hn=at[0][_e],Jt=kn,It[_e]>=cn)));)Tn[be]===at.index&&Tn[be]++;return Jt===Lt[_e]?(hn||!Tn.test(""))&&It.push(""):It.push(Lt.slice(Jt)),It[_e]>cn?It.slice(0,cn):It}:"0"[oe](void 0,0)[_e]?pt=function(_t,Tt){return _t===void 0&&Tt===0?[]:Ke.call(this,_t,Tt)}:pt=Ke,[function(Tt,Lt){var It=Oe(this),kt=Tt==null?void 0:Tt[De];return kt!==void 0?kt.call(Tt,It,Lt):pt.call(String(It),Tt,Lt)},function(_t,Tt){var Lt=tt(pt,_t,this,Tt,pt!==Ke);if(Lt.done)return Lt.value;var It=U(_t),kt=String(this),Jt=de(It,RegExp),cn=It.unicode,Tn=(It.ignoreCase?"i":"")+(It.multiline?"m":"")+(It.unicode?"u":"")+(Fe?"y":"g"),at=new Jt(Fe?It:"^(?:"+It.source+")",Tn),kn=Tt===void 0?he:Tt>>>0;if(kn===0)return[];if(kt.length===0)return W(at,kt)===null?[kt]:[];for(var hn=0,en=0,ze=[];en<kt.length;){at.lastIndex=Fe?en:0;var G=W(at,Fe?kt:kt.slice(en)),H;if(G===null||(H=le(j(at.lastIndex+(Fe?0:en)),kt.length))===hn)en=K(kt,en,cn);else{if(ze.push(kt.slice(hn,en)),ze.length===kn)return ze;for(var Ce=1;Ce<=G.length-1;Ce++)if(ze.push(G[Ce]),ze.length===kn)return ze;en=hn=H}}return ze.push(kt.slice(hn)),ze}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_export.js"),U=M("./node_modules/core-js/modules/_string-context.js"),de="includes";$($.P+$.F*M("./node_modules/core-js/modules/_fails-is-regexp.js")(de),"String",{includes:function(j){return!!~U(this,j,de).indexOf(j,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_global.js"),U=M("./node_modules/core-js/modules/_has.js"),de=M("./node_modules/core-js/modules/_descriptors.js"),K=M("./node_modules/core-js/modules/_export.js"),j=M("./node_modules/core-js/modules/_redefine.js"),W=M("./node_modules/core-js/modules/_meta.js").KEY,J=M("./node_modules/core-js/modules/_fails.js"),re=M("./node_modules/core-js/modules/_shared.js"),le=M("./node_modules/core-js/modules/_set-to-string-tag.js"),te=M("./node_modules/core-js/modules/_uid.js"),oe=M("./node_modules/core-js/modules/_wks.js"),_e=M("./node_modules/core-js/modules/_wks-ext.js"),be=M("./node_modules/core-js/modules/_wks-define.js"),he=M("./node_modules/core-js/modules/_enum-keys.js"),Fe=M("./node_modules/core-js/modules/_is-array.js"),Oe=M("./node_modules/core-js/modules/_an-object.js"),De=M("./node_modules/core-js/modules/_is-object.js"),Ke=M("./node_modules/core-js/modules/_to-object.js"),tt=M("./node_modules/core-js/modules/_to-iobject.js"),pt=M("./node_modules/core-js/modules/_to-primitive.js"),_t=M("./node_modules/core-js/modules/_property-desc.js"),Tt=M("./node_modules/core-js/modules/_object-create.js"),Lt=M("./node_modules/core-js/modules/_object-gopn-ext.js"),It=M("./node_modules/core-js/modules/_object-gopd.js"),kt=M("./node_modules/core-js/modules/_object-gops.js"),Jt=M("./node_modules/core-js/modules/_object-dp.js"),cn=M("./node_modules/core-js/modules/_object-keys.js"),Tn=It.f,at=Jt.f,kn=Lt.f,hn=$.Symbol,en=$.JSON,ze=en&&en.stringify,G="prototype",H=oe("_hidden"),Ce=oe("toPrimitive"),rt={}.propertyIsEnumerable,ct=re("symbol-registry"),Et=re("symbols"),ye=re("op-symbols"),z=Object[G],q=typeof hn=="function"&&!!kt.f,Re=$.QObject,Je=!Re||!Re[G]||!Re[G].findChild,ft=de&&J(function(){return Tt(at({},"a",{get:function(){return at(this,"a",{value:7}).a}})).a!=7})?function(Le,Be,He){var nt=Tn(z,Be);nt&&delete z[Be],at(Le,Be,He),nt&&Le!==z&&at(z,Be,nt)}:at,Qe=function(Le){var Be=Et[Le]=Tt(hn[G]);return Be._k=Le,Be},Ot=q&&typeof hn.iterator=="symbol"?function(Le){return typeof Le=="symbol"}:function(Le){return Le instanceof hn},Bt=function(Be,He,nt){return Be===z&&Bt(ye,He,nt),Oe(Be),He=pt(He,!0),Oe(nt),U(Et,He)?(nt.enumerable?(U(Be,H)&&Be[H][He]&&(Be[H][He]=!1),nt=Tt(nt,{enumerable:_t(0,!1)})):(U(Be,H)||at(Be,H,_t(1,{})),Be[H][He]=!0),ft(Be,He,nt)):at(Be,He,nt)},zn=function(Be,He){Oe(Be);for(var nt=he(He=tt(He)),Ze=0,yt=nt.length,Ct;yt>Ze;)Bt(Be,Ct=nt[Ze++],He[Ct]);return Be},Zn=function(Be,He){return He===void 0?Tt(Be):zn(Tt(Be),He)},Xt=function(Be){var He=rt.call(this,Be=pt(Be,!0));return this===z&&U(Et,Be)&&!U(ye,Be)?!1:He||!U(this,Be)||!U(Et,Be)||U(this,H)&&this[H][Be]?He:!0},Fr=function(Be,He){if(Be=tt(Be),He=pt(He,!0),!(Be===z&&U(Et,He)&&!U(ye,He))){var nt=Tn(Be,He);return nt&&U(Et,He)&&!(U(Be,H)&&Be[H][He])&&(nt.enumerable=!0),nt}},Kr=function(Be){for(var He=kn(tt(Be)),nt=[],Ze=0,yt;He.length>Ze;)!U(Et,yt=He[Ze++])&&yt!=H&&yt!=W&&nt.push(yt);return nt},Yr=function(Be){for(var He=Be===z,nt=kn(He?ye:tt(Be)),Ze=[],yt=0,Ct;nt.length>yt;)U(Et,Ct=nt[yt++])&&(!He||U(z,Ct))&&Ze.push(Et[Ct]);return Ze};q||(hn=function(){if(this instanceof hn)throw TypeError("Symbol is not a constructor!");var Be=te(arguments.length>0?arguments[0]:void 0),He=function(nt){this===z&&He.call(ye,nt),U(this,H)&&U(this[H],Be)&&(this[H][Be]=!1),ft(this,Be,_t(1,nt))};return de&&Je&&ft(z,Be,{configurable:!0,set:He}),Qe(Be)},j(hn[G],"toString",function(){return this._k}),It.f=Fr,Jt.f=Bt,M("./node_modules/core-js/modules/_object-gopn.js").f=Lt.f=Kr,M("./node_modules/core-js/modules/_object-pie.js").f=Xt,kt.f=Yr,de&&!M("./node_modules/core-js/modules/_library.js")&&j(z,"propertyIsEnumerable",Xt,!0),_e.f=function(Le){return Qe(oe(Le))}),K(K.G+K.W+K.F*!q,{Symbol:hn});for(var Cr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ue=0;Cr.length>Ue;)oe(Cr[Ue++]);for(var me=cn(oe.store),pe=0;me.length>pe;)be(me[pe++]);K(K.S+K.F*!q,"Symbol",{for:function(Le){return U(ct,Le+="")?ct[Le]:ct[Le]=hn(Le)},keyFor:function(Be){if(!Ot(Be))throw TypeError(Be+" is not a symbol!");for(var He in ct)if(ct[He]===Be)return He},useSetter:function(){Je=!0},useSimple:function(){Je=!1}}),K(K.S+K.F*!q,"Object",{create:Zn,defineProperty:Bt,defineProperties:zn,getOwnPropertyDescriptor:Fr,getOwnPropertyNames:Kr,getOwnPropertySymbols:Yr});var Pe=J(function(){kt.f(1)});K(K.S+K.F*Pe,"Object",{getOwnPropertySymbols:function(Be){return kt.f(Ke(Be))}}),en&&K(K.S+K.F*(!q||J(function(){var Le=hn();return ze([Le])!="[null]"||ze({a:Le})!="{}"||ze(Object(Le))!="{}"})),"JSON",{stringify:function(Be){for(var He=[Be],nt=1,Ze,yt;arguments.length>nt;)He.push(arguments[nt++]);if(yt=Ze=He[1],!(!De(Ze)&&Be===void 0||Ot(Be)))return Fe(Ze)||(Ze=function(Ct,gt){if(typeof yt=="function"&&(gt=yt.call(this,Ct,gt)),!Ot(gt))return gt}),He[1]=Ze,ze.apply(en,He)}}),hn[G][Ce]||M("./node_modules/core-js/modules/_hide.js")(hn[G],Ce,hn[G].valueOf),le(hn,"Symbol"),le(Math,"Math",!0),le($.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_export.js"),U=M("./node_modules/core-js/modules/_array-includes.js")(!0);$($.P,"Array",{includes:function(K){return U(this,K,arguments.length>1?arguments[1]:void 0)}}),M("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(ne,ue,M){var $=M("./node_modules/core-js/modules/_export.js"),U=M("./node_modules/core-js/modules/_own-keys.js"),de=M("./node_modules/core-js/modules/_to-iobject.js"),K=M("./node_modules/core-js/modules/_object-gopd.js"),j=M("./node_modules/core-js/modules/_create-property.js");$($.S,"Object",{getOwnPropertyDescriptors:function(J){for(var re=de(J),le=K.f,te=U(re),oe={},_e=0,be,he;te.length>_e;)he=le(re,be=te[_e++]),he!==void 0&&j(oe,be,he);return oe}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(ne,ue,M){M("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(ne,ue,M){for(var $=M("./node_modules/core-js/modules/es6.array.iterator.js"),U=M("./node_modules/core-js/modules/_object-keys.js"),de=M("./node_modules/core-js/modules/_redefine.js"),K=M("./node_modules/core-js/modules/_global.js"),j=M("./node_modules/core-js/modules/_hide.js"),W=M("./node_modules/core-js/modules/_iterators.js"),J=M("./node_modules/core-js/modules/_wks.js"),re=J("iterator"),le=J("toStringTag"),te=W.Array,oe={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},_e=U(oe),be=0;be<_e.length;be++){var he=_e[be],Fe=oe[he],Oe=K[he],De=Oe&&Oe.prototype,Ke;if(De&&(De[re]||j(De,re,te),De[le]||j(De,le,he),W[he]=te,Fe))for(Ke in $)De[Ke]||de(De,Ke,$[Ke],!0)}},"./node_modules/crypt/crypt.js":function(ne,ue){(function(){var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$={rotl:function(U,de){return U<<de|U>>>32-de},rotr:function(U,de){return U<<32-de|U>>>de},endian:function(U){if(U.constructor==Number)return $.rotl(U,8)&16711935|$.rotl(U,24)&4278255360;for(var de=0;de<U.length;de++)U[de]=$.endian(U[de]);return U},randomBytes:function(U){for(var de=[];U>0;U--)de.push(Math.floor(Math.random()*256));return de},bytesToWords:function(U){for(var de=[],K=0,j=0;K<U.length;K++,j+=8)de[j>>>5]|=U[K]<<24-j%32;return de},wordsToBytes:function(U){for(var de=[],K=0;K<U.length*32;K+=8)de.push(U[K>>>5]>>>24-K%32&255);return de},bytesToHex:function(U){for(var de=[],K=0;K<U.length;K++)de.push((U[K]>>>4).toString(16)),de.push((U[K]&15).toString(16));return de.join("")},hexToBytes:function(U){for(var de=[],K=0;K<U.length;K+=2)de.push(parseInt(U.substr(K,2),16));return de},bytesToBase64:function(U){for(var de=[],K=0;K<U.length;K+=3)for(var j=U[K]<<16|U[K+1]<<8|U[K+2],W=0;W<4;W++)K*8+W*6<=U.length*8?de.push(M.charAt(j>>>6*(3-W)&63)):de.push("=");return de.join("")},base64ToBytes:function(U){U=U.replace(/[^A-Z0-9+\/]/ig,"");for(var de=[],K=0,j=0;K<U.length;j=++K%4)j!=0&&de.push((M.indexOf(U.charAt(K-1))&Math.pow(2,-2*j+8)-1)<<j*2|M.indexOf(U.charAt(K))>>>6-j*2);return de}};ne.exports=$})()},"./node_modules/is-buffer/index.js":function(ne,ue){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ne.exports=function(U){return U!=null&&(M(U)||$(U)||!!U._isBuffer)};function M(U){return!!U.constructor&&typeof U.constructor.isBuffer=="function"&&U.constructor.isBuffer(U)}function $(U){return typeof U.readFloatLE=="function"&&typeof U.slice=="function"&&M(U.slice(0,0))}},"./node_modules/md5/md5.js":function(ne,ue,M){(function(){var $=M("./node_modules/crypt/crypt.js"),U=M("./node_modules/charenc/charenc.js").utf8,de=M("./node_modules/is-buffer/index.js"),K=M("./node_modules/charenc/charenc.js").bin,j=function(W,J){W.constructor==String?J&&J.encoding==="binary"?W=K.stringToBytes(W):W=U.stringToBytes(W):de(W)?W=Array.prototype.slice.call(W,0):!Array.isArray(W)&&W.constructor!==Uint8Array&&(W=W.toString());for(var re=$.bytesToWords(W),le=W.length*8,te=1732584193,oe=-271733879,_e=-1732584194,be=271733878,he=0;he<re.length;he++)re[he]=(re[he]<<8|re[he]>>>24)&16711935|(re[he]<<24|re[he]>>>8)&4278255360;re[le>>>5]|=128<<le%32,re[(le+64>>>9<<4)+14]=le;for(var Fe=j._ff,Oe=j._gg,De=j._hh,Ke=j._ii,he=0;he<re.length;he+=16){var tt=te,pt=oe,_t=_e,Tt=be;te=Fe(te,oe,_e,be,re[he+0],7,-680876936),be=Fe(be,te,oe,_e,re[he+1],12,-389564586),_e=Fe(_e,be,te,oe,re[he+2],17,606105819),oe=Fe(oe,_e,be,te,re[he+3],22,-1044525330),te=Fe(te,oe,_e,be,re[he+4],7,-176418897),be=Fe(be,te,oe,_e,re[he+5],12,1200080426),_e=Fe(_e,be,te,oe,re[he+6],17,-1473231341),oe=Fe(oe,_e,be,te,re[he+7],22,-45705983),te=Fe(te,oe,_e,be,re[he+8],7,1770035416),be=Fe(be,te,oe,_e,re[he+9],12,-1958414417),_e=Fe(_e,be,te,oe,re[he+10],17,-42063),oe=Fe(oe,_e,be,te,re[he+11],22,-1990404162),te=Fe(te,oe,_e,be,re[he+12],7,1804603682),be=Fe(be,te,oe,_e,re[he+13],12,-40341101),_e=Fe(_e,be,te,oe,re[he+14],17,-1502002290),oe=Fe(oe,_e,be,te,re[he+15],22,1236535329),te=Oe(te,oe,_e,be,re[he+1],5,-165796510),be=Oe(be,te,oe,_e,re[he+6],9,-1069501632),_e=Oe(_e,be,te,oe,re[he+11],14,643717713),oe=Oe(oe,_e,be,te,re[he+0],20,-373897302),te=Oe(te,oe,_e,be,re[he+5],5,-701558691),be=Oe(be,te,oe,_e,re[he+10],9,38016083),_e=Oe(_e,be,te,oe,re[he+15],14,-660478335),oe=Oe(oe,_e,be,te,re[he+4],20,-405537848),te=Oe(te,oe,_e,be,re[he+9],5,568446438),be=Oe(be,te,oe,_e,re[he+14],9,-1019803690),_e=Oe(_e,be,te,oe,re[he+3],14,-187363961),oe=Oe(oe,_e,be,te,re[he+8],20,1163531501),te=Oe(te,oe,_e,be,re[he+13],5,-1444681467),be=Oe(be,te,oe,_e,re[he+2],9,-51403784),_e=Oe(_e,be,te,oe,re[he+7],14,1735328473),oe=Oe(oe,_e,be,te,re[he+12],20,-1926607734),te=De(te,oe,_e,be,re[he+5],4,-378558),be=De(be,te,oe,_e,re[he+8],11,-2022574463),_e=De(_e,be,te,oe,re[he+11],16,1839030562),oe=De(oe,_e,be,te,re[he+14],23,-35309556),te=De(te,oe,_e,be,re[he+1],4,-1530992060),be=De(be,te,oe,_e,re[he+4],11,1272893353),_e=De(_e,be,te,oe,re[he+7],16,-155497632),oe=De(oe,_e,be,te,re[he+10],23,-1094730640),te=De(te,oe,_e,be,re[he+13],4,681279174),be=De(be,te,oe,_e,re[he+0],11,-358537222),_e=De(_e,be,te,oe,re[he+3],16,-722521979),oe=De(oe,_e,be,te,re[he+6],23,76029189),te=De(te,oe,_e,be,re[he+9],4,-640364487),be=De(be,te,oe,_e,re[he+12],11,-421815835),_e=De(_e,be,te,oe,re[he+15],16,530742520),oe=De(oe,_e,be,te,re[he+2],23,-995338651),te=Ke(te,oe,_e,be,re[he+0],6,-198630844),be=Ke(be,te,oe,_e,re[he+7],10,1126891415),_e=Ke(_e,be,te,oe,re[he+14],15,-1416354905),oe=Ke(oe,_e,be,te,re[he+5],21,-57434055),te=Ke(te,oe,_e,be,re[he+12],6,1700485571),be=Ke(be,te,oe,_e,re[he+3],10,-1894986606),_e=Ke(_e,be,te,oe,re[he+10],15,-1051523),oe=Ke(oe,_e,be,te,re[he+1],21,-2054922799),te=Ke(te,oe,_e,be,re[he+8],6,1873313359),be=Ke(be,te,oe,_e,re[he+15],10,-30611744),_e=Ke(_e,be,te,oe,re[he+6],15,-1560198380),oe=Ke(oe,_e,be,te,re[he+13],21,1309151649),te=Ke(te,oe,_e,be,re[he+4],6,-145523070),be=Ke(be,te,oe,_e,re[he+11],10,-1120210379),_e=Ke(_e,be,te,oe,re[he+2],15,718787259),oe=Ke(oe,_e,be,te,re[he+9],21,-343485551),te=te+tt>>>0,oe=oe+pt>>>0,_e=_e+_t>>>0,be=be+Tt>>>0}return $.endian([te,oe,_e,be])};j._ff=function(W,J,re,le,te,oe,_e){var be=W+(J&re|~J&le)+(te>>>0)+_e;return(be<<oe|be>>>32-oe)+J},j._gg=function(W,J,re,le,te,oe,_e){var be=W+(J&le|re&~le)+(te>>>0)+_e;return(be<<oe|be>>>32-oe)+J},j._hh=function(W,J,re,le,te,oe,_e){var be=W+(J^re^le)+(te>>>0)+_e;return(be<<oe|be>>>32-oe)+J},j._ii=function(W,J,re,le,te,oe,_e){var be=W+(re^(J|~le))+(te>>>0)+_e;return(be<<oe|be>>>32-oe)+J},j._blocksize=16,j._digestsize=16,ne.exports=function(W,J){if(W==null)throw new Error("Illegal argument "+W);var re=$.wordsToBytes(j(W,J));return J&&J.asBytes?re:J&&J.asString?K.bytesToString(re):$.bytesToHex(re)}})()},"./node_modules/regenerator-runtime/runtime.js":function(ne,ue,M){var $=function(U){var de=Object.prototype,K=de.hasOwnProperty,j,W=typeof Symbol=="function"?Symbol:{},J=W.iterator||"@@iterator",re=W.asyncIterator||"@@asyncIterator",le=W.toStringTag||"@@toStringTag";function te(G,H,Ce){return Object.defineProperty(G,H,{value:Ce,enumerable:!0,configurable:!0,writable:!0}),G[H]}try{te({},"")}catch{te=function(H,Ce,rt){return H[Ce]=rt}}function oe(G,H,Ce,rt){var ct=H&&H.prototype instanceof Ke?H:Ke,Et=Object.create(ct.prototype),ye=new hn(rt||[]);return Et._invoke=cn(G,Ce,ye),Et}U.wrap=oe;function _e(G,H,Ce){try{return{type:"normal",arg:G.call(H,Ce)}}catch(rt){return{type:"throw",arg:rt}}}var be="suspendedStart",he="suspendedYield",Fe="executing",Oe="completed",De={};function Ke(){}function tt(){}function pt(){}var _t={};_t[J]=function(){return this};var Tt=Object.getPrototypeOf,Lt=Tt&&Tt(Tt(en([])));Lt&&Lt!==de&&K.call(Lt,J)&&(_t=Lt);var It=pt.prototype=Ke.prototype=Object.create(_t);tt.prototype=It.constructor=pt,pt.constructor=tt,tt.displayName=te(pt,le,"GeneratorFunction");function kt(G){["next","throw","return"].forEach(function(H){te(G,H,function(Ce){return this._invoke(H,Ce)})})}U.isGeneratorFunction=function(G){var H=typeof G=="function"&&G.constructor;return H?H===tt||(H.displayName||H.name)==="GeneratorFunction":!1},U.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,pt):(G.__proto__=pt,te(G,le,"GeneratorFunction")),G.prototype=Object.create(It),G},U.awrap=function(G){return{__await:G}};function Jt(G,H){function Ce(Et,ye,z,q){var Re=_e(G[Et],G,ye);if(Re.type==="throw")q(Re.arg);else{var Je=Re.arg,ft=Je.value;return ft&&typeof ft=="object"&&K.call(ft,"__await")?H.resolve(ft.__await).then(function(Qe){Ce("next",Qe,z,q)},function(Qe){Ce("throw",Qe,z,q)}):H.resolve(ft).then(function(Qe){Je.value=Qe,z(Je)},function(Qe){return Ce("throw",Qe,z,q)})}}var rt;function ct(Et,ye){function z(){return new H(function(q,Re){Ce(Et,ye,q,Re)})}return rt=rt?rt.then(z,z):z()}this._invoke=ct}kt(Jt.prototype),Jt.prototype[re]=function(){return this},U.AsyncIterator=Jt,U.async=function(G,H,Ce,rt,ct){ct===void 0&&(ct=Promise);var Et=new Jt(oe(G,H,Ce,rt),ct);return U.isGeneratorFunction(H)?Et:Et.next().then(function(ye){return ye.done?ye.value:Et.next()})};function cn(G,H,Ce){var rt=be;return function(Et,ye){if(rt===Fe)throw new Error("Generator is already running");if(rt===Oe){if(Et==="throw")throw ye;return ze()}for(Ce.method=Et,Ce.arg=ye;;){var z=Ce.delegate;if(z){var q=Tn(z,Ce);if(q){if(q===De)continue;return q}}if(Ce.method==="next")Ce.sent=Ce._sent=Ce.arg;else if(Ce.method==="throw"){if(rt===be)throw rt=Oe,Ce.arg;Ce.dispatchException(Ce.arg)}else Ce.method==="return"&&Ce.abrupt("return",Ce.arg);rt=Fe;var Re=_e(G,H,Ce);if(Re.type==="normal"){if(rt=Ce.done?Oe:he,Re.arg===De)continue;return{value:Re.arg,done:Ce.done}}else Re.type==="throw"&&(rt=Oe,Ce.method="throw",Ce.arg=Re.arg)}}}function Tn(G,H){var Ce=G.iterator[H.method];if(Ce===j){if(H.delegate=null,H.method==="throw"){if(G.iterator.return&&(H.method="return",H.arg=j,Tn(G,H),H.method==="throw"))return De;H.method="throw",H.arg=new TypeError("The iterator does not provide a 'throw' method")}return De}var rt=_e(Ce,G.iterator,H.arg);if(rt.type==="throw")return H.method="throw",H.arg=rt.arg,H.delegate=null,De;var ct=rt.arg;if(!ct)return H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,De;if(ct.done)H[G.resultName]=ct.value,H.next=G.nextLoc,H.method!=="return"&&(H.method="next",H.arg=j);else return ct;return H.delegate=null,De}kt(It),te(It,le,"Generator"),It[J]=function(){return this},It.toString=function(){return"[object Generator]"};function at(G){var H={tryLoc:G[0]};1 in G&&(H.catchLoc=G[1]),2 in G&&(H.finallyLoc=G[2],H.afterLoc=G[3]),this.tryEntries.push(H)}function kn(G){var H=G.completion||{};H.type="normal",delete H.arg,G.completion=H}function hn(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(at,this),this.reset(!0)}U.keys=function(G){var H=[];for(var Ce in G)H.push(Ce);return H.reverse(),function rt(){for(;H.length;){var ct=H.pop();if(ct in G)return rt.value=ct,rt.done=!1,rt}return rt.done=!0,rt}};function en(G){if(G){var H=G[J];if(H)return H.call(G);if(typeof G.next=="function")return G;if(!isNaN(G.length)){var Ce=-1,rt=function ct(){for(;++Ce<G.length;)if(K.call(G,Ce))return ct.value=G[Ce],ct.done=!1,ct;return ct.value=j,ct.done=!0,ct};return rt.next=rt}}return{next:ze}}U.values=en;function ze(){return{value:j,done:!0}}return hn.prototype={constructor:hn,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=j,this.done=!1,this.delegate=null,this.method="next",this.arg=j,this.tryEntries.forEach(kn),!G)for(var H in this)H.charAt(0)==="t"&&K.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=j)},stop:function(){this.done=!0;var G=this.tryEntries[0],H=G.completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var H=this;function Ce(q,Re){return Et.type="throw",Et.arg=G,H.next=q,Re&&(H.method="next",H.arg=j),!!Re}for(var rt=this.tryEntries.length-1;rt>=0;--rt){var ct=this.tryEntries[rt],Et=ct.completion;if(ct.tryLoc==="root")return Ce("end");if(ct.tryLoc<=this.prev){var ye=K.call(ct,"catchLoc"),z=K.call(ct,"finallyLoc");if(ye&&z){if(this.prev<ct.catchLoc)return Ce(ct.catchLoc,!0);if(this.prev<ct.finallyLoc)return Ce(ct.finallyLoc)}else if(ye){if(this.prev<ct.catchLoc)return Ce(ct.catchLoc,!0)}else if(z){if(this.prev<ct.finallyLoc)return Ce(ct.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(G,H){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var rt=this.tryEntries[Ce];if(rt.tryLoc<=this.prev&&K.call(rt,"finallyLoc")&&this.prev<rt.finallyLoc){var ct=rt;break}}ct&&(G==="break"||G==="continue")&&ct.tryLoc<=H&&H<=ct.finallyLoc&&(ct=null);var Et=ct?ct.completion:{};return Et.type=G,Et.arg=H,ct?(this.method="next",this.next=ct.finallyLoc,De):this.complete(Et)},complete:function(G,H){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&H&&(this.next=H),De},finish:function(G){for(var H=this.tryEntries.length-1;H>=0;--H){var Ce=this.tryEntries[H];if(Ce.finallyLoc===G)return this.complete(Ce.completion,Ce.afterLoc),kn(Ce),De}},catch:function(G){for(var H=this.tryEntries.length-1;H>=0;--H){var Ce=this.tryEntries[H];if(Ce.tryLoc===G){var rt=Ce.completion;if(rt.type==="throw"){var ct=rt.arg;kn(Ce)}return ct}}throw new Error("illegal catch attempt")},delegateYield:function(G,H,Ce){return this.delegate={iterator:en(G),resultName:H,nextLoc:Ce},this.method==="next"&&(this.arg=j),De}},U}(ne.exports);try{regeneratorRuntime=$}catch{Function("r","regeneratorRuntime = r")($)}},"./src/api.js":function(ne,ue,M){M.r(ue),M.d(ue,"setup",function(){return Fe}),M.d(ue,"setupCache",function(){return he}),M("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/regenerator-runtime/runtime.js");var $=M("axios"),U=M.n($),de=M("./src/request.js"),K=M("./src/cache.js");M.d(ue,"serializeQuery",function(){return K.serializeQuery});var j=M("./src/config.js"),W=M("./src/utilities.js");function J(Oe,De){if(Oe==null)return{};var Ke=re(Oe,De),tt,pt;if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(Oe);for(pt=0;pt<_t.length;pt++)tt=_t[pt],!(De.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(Oe,tt)&&(Ke[tt]=Oe[tt])}return Ke}function re(Oe,De){if(Oe==null)return{};var Ke={},tt=Object.keys(Oe),pt,_t;for(_t=0;_t<tt.length;_t++)pt=tt[_t],!(De.indexOf(pt)>=0)&&(Ke[pt]=Oe[pt]);return Ke}function le(Oe,De){var Ke=Object.keys(Oe);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(Oe);De&&(tt=tt.filter(function(pt){return Object.getOwnPropertyDescriptor(Oe,pt).enumerable})),Ke.push.apply(Ke,tt)}return Ke}function te(Oe){for(var De=1;De<arguments.length;De++){var Ke=arguments[De]!=null?arguments[De]:{};De%2?le(Object(Ke),!0).forEach(function(tt){oe(Oe,tt,Ke[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(Ke)):le(Object(Ke)).forEach(function(tt){Object.defineProperty(Oe,tt,Object.getOwnPropertyDescriptor(Ke,tt))})}return Oe}function oe(Oe,De,Ke){return De in Oe?Object.defineProperty(Oe,De,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):Oe[De]=Ke,Oe}function _e(Oe,De,Ke,tt,pt,_t,Tt){try{var Lt=Oe[_t](Tt),It=Lt.value}catch(kt){Ke(kt);return}Lt.done?De(It):Promise.resolve(It).then(tt,pt)}function be(Oe){return function(){var De=this,Ke=arguments;return new Promise(function(tt,pt){var _t=Oe.apply(De,Ke);function Tt(It){_e(_t,tt,pt,Tt,Lt,"next",It)}function Lt(It){_e(_t,tt,pt,Tt,Lt,"throw",It)}Tt(void 0)})}}function he(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Oe=Object(j.makeConfig)(Oe);function De(tt){return Ke.apply(this,arguments)}function Ke(){return Ke=be(regeneratorRuntime.mark(function tt(pt){var _t,Tt,Lt,It,kt;return regeneratorRuntime.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return _t=Object(j.mergeRequestConfig)(Oe,pt),cn.next=3,Object(de.default)(_t,pt);case 3:if(Tt=cn.sent,Lt=Tt.next,Object(W.isFunction)(Lt)){cn.next=7;break}return cn.abrupt("return",Lt);case 7:return cn.prev=7,cn.next=10,_t.adapter(pt);case 10:Tt=cn.sent,cn.next=16;break;case 13:cn.prev=13,cn.t0=cn.catch(7),It=cn.t0;case 16:if(!It){cn.next=31;break}if(kt=Object(W.isFunction)(_t.readOnError)?_t.readOnError(It,pt):_t.readOnError,!kt){cn.next=30;break}return cn.prev=19,_t.acceptStale=!0,cn.next=23,Object(de.default)(_t,pt);case 23:return Tt=cn.sent,Tt.next.request.stale=!0,cn.abrupt("return",Tt.next);case 28:cn.prev=28,cn.t1=cn.catch(19);case 30:throw It;case 31:return cn.abrupt("return",Lt(Tt));case 32:case"end":return cn.stop()}},tt,null,[[7,13],[19,28]])})),Ke.apply(this,arguments)}return{adapter:De,config:Oe,store:Oe.store}}function Fe(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},De=te(te(te({},j.defaults.axios),Oe),{},{cache:te(te({},j.defaults.axios.cache),Oe.cache)}),Ke=he(De.cache);De.cache;var tt=J(De,["cache"]),pt=U.a.create(te(te({},tt),{},{adapter:Ke.adapter}));return pt.cache=Ke.store,pt}ue.default={setup:Fe,setupCache:he,serializeQuery:K.serializeQuery}},"./src/cache.js":function(ne,ue,M){M.r(ue),M.d(ue,"read",function(){return le}),M.d(ue,"write",function(){return J}),M.d(ue,"key",function(){return oe}),M.d(ue,"invalidate",function(){return he}),M.d(ue,"serializeQuery",function(){return Fe}),M("./node_modules/core-js/modules/es7.array.includes.js"),M("./node_modules/core-js/modules/es6.string.includes.js"),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");var $=M("./src/utilities.js"),U=M("./node_modules/md5/md5.js"),de=M.n(U),K=M("./src/serialize.js");function j(Oe,De,Ke,tt,pt,_t,Tt){try{var Lt=Oe[_t](Tt),It=Lt.value}catch(kt){Ke(kt);return}Lt.done?De(It):Promise.resolve(It).then(tt,pt)}function W(Oe){return function(){var De=this,Ke=arguments;return new Promise(function(tt,pt){var _t=Oe.apply(De,Ke);function Tt(It){j(_t,tt,pt,Tt,Lt,"next",It)}function Lt(It){j(_t,tt,pt,Tt,Lt,"throw",It)}Tt(void 0)})}}function J(Oe,De,Ke){return re.apply(this,arguments)}function re(){return re=W(regeneratorRuntime.mark(function Oe(De,Ke,tt){var pt;return regeneratorRuntime.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return Tt.prev=0,pt={expires:De.expires,data:Object(K.default)(De,Ke,tt)},Tt.next=4,De.store.setItem(De.uuid,pt);case 4:Tt.next=19;break;case 6:if(Tt.prev=6,Tt.t0=Tt.catch(0),De.debug("Could not store response",Tt.t0),!De.clearOnError){Tt.next=18;break}return Tt.prev=10,Tt.next=13,De.store.clear();case 13:Tt.next=18;break;case 15:Tt.prev=15,Tt.t1=Tt.catch(10),De.debug("Could not clear store",Tt.t1);case 18:return Tt.abrupt("return",!1);case 19:return Tt.abrupt("return",!0);case 20:case"end":return Tt.stop()}},Oe,null,[[0,6],[10,15]])})),re.apply(this,arguments)}function le(Oe,De){return te.apply(this,arguments)}function te(){return te=W(regeneratorRuntime.mark(function Oe(De,Ke){var tt,pt,_t,Tt,Lt,It,kt,Jt;return regeneratorRuntime.wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return tt=De.uuid,pt=De.ignoreCache,Tn.next=3,De.store.getItem(tt);case 3:if(_t=Tn.sent,!(pt||!_t||!_t.data)){Tn.next=10;break}throw De.debug("cache-miss",Ke.url),Tt=new Error,Tt.reason="cache-miss",Tt.message="Entry not found from cache",Tt;case 10:if(Lt=_t.expires,It=_t.data,kt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!kt&&!De.acceptStale&&Lt!==0&&Lt<Date.now())){Tn.next=18;break}throw De.debug("cache-stale",Ke.url),Jt=new Error,Jt.reason="cache-stale",Jt.message="Entry is stale",Jt;case 18:return De.debug(De.acceptStale?"cache-hit-stale":"cache-hit",Ke.url),Tn.abrupt("return",It);case 20:case"end":return Tn.stop()}},Oe)})),te.apply(this,arguments)}function oe(Oe){if(Object($.isFunction)(Oe.key))return Oe.key;var De;return Object($.isString)(Oe.key)?De=function(tt){var pt="".concat(tt.baseURL?tt.baseURL:"").concat(tt.url),_t="".concat(Oe.key,"/").concat(pt).concat(Fe(tt));return tt.data?_t+de()(tt.data):_t}:De=function(tt){var pt="".concat(tt.baseURL?tt.baseURL:"").concat(tt.url),_t=pt+Fe(tt);return tt.data?_t+de()(tt.data):_t},De}function _e(Oe,De){return be.apply(this,arguments)}function be(){return be=W(regeneratorRuntime.mark(function Oe(De,Ke){var tt;return regeneratorRuntime.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(tt=Ke.method.toLowerCase(),!De.exclude.methods.includes(tt)){_t.next=4;break}return _t.next=4,De.store.removeItem(De.uuid);case 4:case"end":return _t.stop()}},Oe)})),be.apply(this,arguments)}function he(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object($.isFunction)(Oe.invalidate)?Oe.invalidate:_e}function Fe(Oe){if(!Oe.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Oe.params);var De=Oe.params,Ke=Oe.params instanceof URLSearchParams;return Ke||(De=new URLSearchParams,Object.keys(Oe.params).forEach(function(tt){return De.append(tt,Oe.params[tt])})),"?".concat(De.toString())}ue.default={read:le,write:J,key:oe,invalidate:he,serializeQuery:Fe}},"./src/config.js":function(ne,ue,M){M.r(ue),M.d(ue,"defaults",function(){return te}),M.d(ue,"makeConfig",function(){return _e}),M.d(ue,"mergeRequestConfig",function(){return be}),M("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");var $=M("axios"),U=M.n($),de=M("./src/memory.js"),K=M("./src/cache.js");function j(he,Fe){var Oe=Object.keys(he);if(Object.getOwnPropertySymbols){var De=Object.getOwnPropertySymbols(he);Fe&&(De=De.filter(function(Ke){return Object.getOwnPropertyDescriptor(he,Ke).enumerable})),Oe.push.apply(Oe,De)}return Oe}function W(he){for(var Fe=1;Fe<arguments.length;Fe++){var Oe=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?j(Object(Oe),!0).forEach(function(De){J(he,De,Oe[De])}):Object.getOwnPropertyDescriptors?Object.defineProperties(he,Object.getOwnPropertyDescriptors(Oe)):j(Object(Oe)).forEach(function(De){Object.defineProperty(he,De,Object.getOwnPropertyDescriptor(Oe,De))})}return he}function J(he,Fe,Oe){return Fe in he?Object.defineProperty(he,Fe,{value:Oe,enumerable:!0,configurable:!0,writable:!0}):he[Fe]=Oe,he}var re=function(){},le=function(){for(var Fe,Oe=arguments.length,De=new Array(Oe),Ke=0;Ke<Oe;Ke++)De[Ke]=arguments[Ke];return(Fe=console).log.apply(Fe,["[axios-cache-adapter]"].concat(De))},te={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:U.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},oe=["limit","store","adapter","uuid","acceptStale"],_e=function(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Oe=W(W(W({},te.cache),Fe),{},{exclude:W(W({},te.cache.exclude),Fe.exclude)});return Oe.key=Object(K.key)(Oe),Oe.invalidate=Object(K.invalidate)(Oe),Oe.debug!==!1?Oe.debug=typeof Oe.debug=="function"?Oe.debug:le:Oe.debug=re,Oe.store||(Oe.store=new de.default),Oe.debug("Global cache config",Oe),Oe},be=function(Fe,Oe){var De=Oe.cache||{};De&&oe.forEach(function(tt){return De[tt]?delete De[tt]:void 0});var Ke=W(W(W({},Fe),De),{},{exclude:W(W({},Fe.exclude),De.exclude)});return Ke.debug===!0&&(Ke.debug=le),De.key&&(Ke.key=Object(K.key)(De)),Ke.uuid=Ke.key(Oe),Fe.debug("Request config for ".concat(Oe.url),Ke),Ke};ue.default={defaults:te,makeConfig:_e,mergeRequestConfig:be}},"./src/exclude.js":function(ne,ue,M){M.r(ue),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/core-js/modules/es7.array.includes.js"),M("./node_modules/core-js/modules/es6.string.includes.js");var $=M("./src/utilities.js");function U(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1?arguments[1]:void 0,j=de.exclude,W=j===void 0?{}:j,J=de.debug,re=K.method.toLowerCase();if(re==="head"||W.methods.includes(re))return J("Excluding request by HTTP method ".concat(K.url)),!0;if(typeof W.filter=="function"&&W.filter(K))return J("Excluding request by filter ".concat(K.url)),!0;var le=/\?.*$/.test(K.url)||Object($.isObject)(K.params)&&Object.keys(K.params).length!==0||typeof URLSearchParams<"u"&&K.params instanceof URLSearchParams;if(W.query&&le)return J("Excluding request by query ".concat(K.url)),!0;var te=W.paths||[],oe=te.some(function(_e){return K.url.match(_e)});return oe?(J("Excluding request by url match ".concat(K.url)),!0):!1}ue.default=U},"./src/index.node.js":function(ne,ue,M){M.r(ue);var $=M("./src/api.js");M.d(ue,"setup",function(){return $.setup}),M.d(ue,"setupCache",function(){return $.setupCache}),M.d(ue,"serializeQuery",function(){return $.serializeQuery});var U=M("./src/redis.js");M.d(ue,"RedisStore",function(){return U.default});var de=M("./src/redis-default.js");M.d(ue,"RedisDefaultStore",function(){return de.default}),ue.default={setup:$.setup,setupCache:$.setupCache,serializeQuery:$.serializeQuery,RedisStore:U.default,RedisDefaultStore:de.default}},"./src/limit.js":function(ne,ue,M){M.r(ue),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");function $(j,W,J,re,le,te,oe){try{var _e=j[te](oe),be=_e.value}catch(he){J(he);return}_e.done?W(be):Promise.resolve(be).then(re,le)}function U(j){return function(){var W=this,J=arguments;return new Promise(function(re,le){var te=j.apply(W,J);function oe(be){$(te,re,le,oe,_e,"next",be)}function _e(be){$(te,re,le,oe,_e,"throw",be)}oe(void 0)})}}function de(j){return K.apply(this,arguments)}function K(){return K=U(regeneratorRuntime.mark(function j(W){var J,re;return regeneratorRuntime.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,W.store.length();case 2:if(J=te.sent,!(J<W.limit)){te.next=5;break}return te.abrupt("return");case 5:return W.debug("Current store size: ".concat(J)),te.next=8,W.store.iterate(function(oe,_e){re||(re={value:oe,key:_e}),oe.expires<re.value.expires&&(re={value:oe,key:_e})});case 8:if(!re){te.next=12;break}return W.debug("Removing item: ".concat(re.key)),te.next=12,W.store.removeItem(re.key);case 12:case"end":return te.stop()}},j)})),K.apply(this,arguments)}ue.default=de},"./src/memory.js":function(ne,ue,M){M.r(ue),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/regenerator-runtime/runtime.js");var $=M("./src/utilities.js");function U(re,le,te,oe,_e,be,he){try{var Fe=re[be](he),Oe=Fe.value}catch(De){te(De);return}Fe.done?le(Oe):Promise.resolve(Oe).then(oe,_e)}function de(re){return function(){var le=this,te=arguments;return new Promise(function(oe,_e){var be=re.apply(le,te);function he(Oe){U(be,oe,_e,he,Fe,"next",Oe)}function Fe(Oe){U(be,oe,_e,he,Fe,"throw",Oe)}he(void 0)})}}function K(re,le){if(!(re instanceof le))throw new TypeError("Cannot call a class as a function")}function j(re,le){for(var te=0;te<le.length;te++){var oe=le[te];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(re,oe.key,oe)}}function W(re,le,te){return le&&j(re.prototype,le),re}var J=function(){function re(){K(this,re),this.store={}}return W(re,[{key:"getItem",value:function(){var le=de(regeneratorRuntime.mark(function oe(_e){var be;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return be=this.store[_e]||null,Fe.abrupt("return",JSON.parse(be));case 2:case"end":return Fe.stop()}},oe,this)}));function te(oe){return le.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var le=de(regeneratorRuntime.mark(function oe(_e,be){return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return this.store[_e]=JSON.stringify(be),Fe.abrupt("return",be);case 2:case"end":return Fe.stop()}},oe,this)}));function te(oe,_e){return le.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var le=de(regeneratorRuntime.mark(function oe(_e){return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:delete this.store[_e];case 1:case"end":return he.stop()}},oe,this)}));function te(oe){return le.apply(this,arguments)}return te}()},{key:"clear",value:function(){var le=de(regeneratorRuntime.mark(function oe(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:this.store={};case 1:case"end":return be.stop()}},oe,this)}));function te(){return le.apply(this,arguments)}return te}()},{key:"length",value:function(){var le=de(regeneratorRuntime.mark(function oe(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Object.keys(this.store).length);case 1:case"end":return be.stop()}},oe,this)}));function te(){return le.apply(this,arguments)}return te}()},{key:"iterate",value:function(te){return Promise.all(Object($.mapObject)(this.store,te))}}]),re}();ue.default=J},"./src/redis-default.js":function(ne,ue,M){M.r(ue),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.function.bind.js"),M("./node_modules/core-js/modules/es6.function.name.js");var $=M("util");function U(re,le,te,oe,_e,be,he){try{var Fe=re[be](he),Oe=Fe.value}catch(De){te(De);return}Fe.done?le(Oe):Promise.resolve(Oe).then(oe,_e)}function de(re){return function(){var le=this,te=arguments;return new Promise(function(oe,_e){var be=re.apply(le,te);function he(Oe){U(be,oe,_e,he,Fe,"next",Oe)}function Fe(Oe){U(be,oe,_e,he,Fe,"throw",Oe)}he(void 0)})}}function K(re,le){if(!(re instanceof le))throw new TypeError("Cannot call a class as a function")}function j(re,le){for(var te=0;te<le.length;te++){var oe=le[te];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(re,oe.key,oe)}}function W(re,le,te){return le&&j(re.prototype,le),re}var J=function(){function re(le){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K(this,re);var oe=new TypeError("First parameter must be a valid RedisClient instance.");try{if(le.constructor.name!=="RedisClient")throw oe}catch{throw oe}this.client=le,this.prefix=te.prefix||"axios-cache",this.maxScanCount=te.maxScanCount||1e3,this.getAsync=Object($.promisify)(le.get).bind(le),this.psetexAsync=Object($.promisify)(le.psetex).bind(le),this.delAsync=Object($.promisify)(le.del).bind(le),this.scanAsync=Object($.promisify)(le.scan).bind(le)}return W(re,[{key:"calculateTTL",value:function(te){var oe=Date.now();return te.expires&&te.expires>oe?te.expires-oe:-1}},{key:"transformKey",value:function(te){return this.prefix+"_"+te}},{key:"getItem",value:function(){var le=de(regeneratorRuntime.mark(function oe(_e){var be;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,this.getAsync(this.transformKey(_e));case 2:if(Fe.t0=Fe.sent,Fe.t0){Fe.next=5;break}Fe.t0=null;case 5:return be=Fe.t0,Fe.abrupt("return",JSON.parse(be));case 7:case"end":return Fe.stop()}},oe,this)}));function te(oe){return le.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var le=de(regeneratorRuntime.mark(function oe(_e,be){var he,Fe;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(he=this.transformKey(_e),Fe=this.calculateTTL(be),!(Fe>0)){De.next=5;break}return De.next=5,this.psetexAsync(he,Fe,JSON.stringify(be));case 5:return De.abrupt("return",be);case 6:case"end":return De.stop()}},oe,this)}));function te(oe,_e){return le.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var le=de(regeneratorRuntime.mark(function oe(_e){return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,this.delAsync(this.transformKey(_e));case 2:case"end":return he.stop()}},oe,this)}));function te(oe){return le.apply(this,arguments)}return te}()},{key:"scan",value:function(){var le=de(regeneratorRuntime.mark(function oe(_e){var be,he;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:be="0";case 1:return Oe.next=3,this.scanAsync(be,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return he=Oe.sent,be=he[0],Oe.next=7,_e(he[1]);case 7:if(be!=="0"){Oe.next=1;break}case 8:case"end":return Oe.stop()}},oe,this)}));function te(oe){return le.apply(this,arguments)}return te}()},{key:"clear",value:function(){var le=de(regeneratorRuntime.mark(function oe(){var _e=this;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,this.scan(function(Fe){return _e.delAsync(Fe)});case 2:case"end":return he.stop()}},oe,this)}));function te(){return le.apply(this,arguments)}return te}()},{key:"length",value:function(){var le=de(regeneratorRuntime.mark(function oe(){var _e;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return _e=0,he.next=3,this.scan(function(Fe){_e+=Fe.length});case 3:return he.abrupt("return",_e);case 4:case"end":return he.stop()}},oe,this)}));function te(){return le.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var le=de(regeneratorRuntime.mark(function oe(_e){var be=this,he,Fe;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return Fe=function(){return Fe=de(regeneratorRuntime.mark(function tt(pt){var _t,Tt;return regeneratorRuntime.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return It.next=2,this.getAsync(pt);case 2:if(It.t0=It.sent,It.t0){It.next=5;break}It.t0=null;case 5:return _t=It.t0,Tt=JSON.parse(_t),It.next=9,_e(Tt,pt);case 9:return It.abrupt("return",It.sent);case 10:case"end":return It.stop()}},tt,this)})),Fe.apply(this,arguments)},he=function(tt){return Fe.apply(this,arguments)},De.next=4,this.scan(function(Ke){return Promise.all(Ke.map(he.bind(be)))});case 4:return De.abrupt("return",Promise.resolve([]));case 5:case"end":return De.stop()}},oe,this)}));function te(oe){return le.apply(this,arguments)}return te}()}]),re}();ue.default=J},"./src/redis.js":function(ne,ue,M){M.r(ue),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js"),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.function.bind.js"),M("./node_modules/core-js/modules/es6.function.name.js");var $=M("util"),U=M("./src/utilities.js");function de(le,te,oe,_e,be,he,Fe){try{var Oe=le[he](Fe),De=Oe.value}catch(Ke){oe(Ke);return}Oe.done?te(De):Promise.resolve(De).then(_e,be)}function K(le){return function(){var te=this,oe=arguments;return new Promise(function(_e,be){var he=le.apply(te,oe);function Fe(De){de(he,_e,be,Fe,Oe,"next",De)}function Oe(De){de(he,_e,be,Fe,Oe,"throw",De)}Fe(void 0)})}}function j(le,te){if(!(le instanceof te))throw new TypeError("Cannot call a class as a function")}function W(le,te){for(var oe=0;oe<te.length;oe++){var _e=te[oe];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(le,_e.key,_e)}}function J(le,te,oe){return te&&W(le.prototype,te),le}var re=function(){function le(te){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";j(this,le);var _e=new TypeError("First parameter must be a valid RedisClient instance.");try{if(te.constructor.name!=="RedisClient")throw _e}catch{throw _e}this.client=te,this.HASH_KEY=oe,this.hgetAsync=Object($.promisify)(te.hget).bind(te),this.hsetAsync=Object($.promisify)(te.hset).bind(te),this.hdelAsync=Object($.promisify)(te.hdel).bind(te),this.delAsync=Object($.promisify)(te.del).bind(te),this.hlenAsync=Object($.promisify)(te.hlen).bind(te),this.hgetallAsync=Object($.promisify)(te.hgetall).bind(te)}return J(le,[{key:"getItem",value:function(){var te=K(regeneratorRuntime.mark(function _e(be){var he;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.hgetAsync(this.HASH_KEY,be);case 2:if(Oe.t0=Oe.sent,Oe.t0){Oe.next=5;break}Oe.t0=null;case 5:return he=Oe.t0,Oe.abrupt("return",JSON.parse(he));case 7:case"end":return Oe.stop()}},_e,this)}));function oe(_e){return te.apply(this,arguments)}return oe}()},{key:"setItem",value:function(){var te=K(regeneratorRuntime.mark(function _e(be,he){return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.hsetAsync(this.HASH_KEY,be,JSON.stringify(he));case 2:return Oe.abrupt("return",he);case 3:case"end":return Oe.stop()}},_e,this)}));function oe(_e,be){return te.apply(this,arguments)}return oe}()},{key:"removeItem",value:function(){var te=K(regeneratorRuntime.mark(function _e(be){return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,this.hdelAsync(this.HASH_KEY,be);case 2:case"end":return Fe.stop()}},_e,this)}));function oe(_e){return te.apply(this,arguments)}return oe}()},{key:"clear",value:function(){var te=K(regeneratorRuntime.mark(function _e(){return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return he.stop()}},_e,this)}));function oe(){return te.apply(this,arguments)}return oe}()},{key:"length",value:function(){var te=K(regeneratorRuntime.mark(function _e(){return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return he.stop()}},_e,this)}));function oe(){return te.apply(this,arguments)}return oe}()},{key:"iterate",value:function(){var te=K(regeneratorRuntime.mark(function _e(be){var he;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return he=Oe.sent,Oe.abrupt("return",Promise.all(Object(U.mapObject)(he,be)));case 4:case"end":return Oe.stop()}},_e,this)}));function oe(_e){return te.apply(this,arguments)}return oe}()}]),le}();ue.default=re},"./src/request.js":function(ne,ue,M){M.r(ue),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");var $=M("./src/response.js"),U=M("./src/exclude.js"),de=M("./src/cache.js");function K(re,le,te,oe,_e,be,he){try{var Fe=re[be](he),Oe=Fe.value}catch(De){te(De);return}Fe.done?le(Oe):Promise.resolve(Oe).then(oe,_e)}function j(re){return function(){var le=this,te=arguments;return new Promise(function(oe,_e){var be=re.apply(le,te);function he(Oe){K(be,oe,_e,he,Fe,"next",Oe)}function Fe(Oe){K(be,oe,_e,he,Fe,"throw",Oe)}he(void 0)})}}function W(re,le){return J.apply(this,arguments)}function J(){return J=j(regeneratorRuntime.mark(function re(le,te){var oe,_e,be;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return be=function(){return le.excludeFromCache=!0,{config:le,next:oe}},le.debug("uuid",le.uuid),oe=function(){for(var De=arguments.length,Ke=new Array(De),tt=0;tt<De;tt++)Ke[tt]=arguments[tt];return $.default.apply(void 0,[le,te].concat(Ke))},Fe.next=5,le.invalidate(le,te);case 5:if(!Object(U.default)(le,te)){Fe.next=7;break}return Fe.abrupt("return",be());case 7:return Fe.prev=7,Fe.next=10,Object(de.read)(le,te);case 10:return _e=Fe.sent,_e.config=te,_e.request={fromCache:!0},Fe.abrupt("return",{config:le,next:_e});case 16:if(Fe.prev=16,Fe.t0=Fe.catch(7),!(le.clearOnStale&&Fe.t0.reason==="cache-stale")){Fe.next=21;break}return Fe.next=21,le.store.removeItem(le.uuid);case 21:return Fe.abrupt("return",{config:le,next:oe});case 22:case"end":return Fe.stop()}},re,null,[[7,16]])})),J.apply(this,arguments)}ue.default=W},"./src/response.js":function(ne,ue,M){M.r(ue),M("./node_modules/regenerator-runtime/runtime.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");var $=M("./src/limit.js"),U=M("./src/cache.js"),de=M("./node_modules/cache-control-esm/index.js");function K(re,le,te,oe,_e,be,he){try{var Fe=re[be](he),Oe=Fe.value}catch(De){te(De);return}Fe.done?le(Oe):Promise.resolve(Oe).then(oe,_e)}function j(re){return function(){var le=this,te=arguments;return new Promise(function(oe,_e){var be=re.apply(le,te);function he(Oe){K(be,oe,_e,he,Fe,"next",Oe)}function Fe(Oe){K(be,oe,_e,he,Fe,"throw",Oe)}he(void 0)})}}function W(re,le,te){return J.apply(this,arguments)}function J(){return J=j(regeneratorRuntime.mark(function re(le,te,oe){var _e,be,he,Fe,Oe;return regeneratorRuntime.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(_e=oe.request,be=_e===void 0?{}:_e,he=oe.headers,Fe=he===void 0?{}:he,!(["arraybuffer","blob"].indexOf(be.responseType)>-1)){Ke.next=3;break}return Ke.abrupt("return",oe);case 3:if(Oe={},le.readHeaders&&(Fe["cache-control"]?(Oe=Object(de.parse)(Fe["cache-control"]),(Oe.noCache||Oe.noStore)&&(le.excludeFromCache=!0)):Fe.expires?le.expires=new Date(Fe.expires).getTime():le.expires=new Date().getTime()),le.excludeFromCache){Ke.next=15;break}if(Oe.maxAge||Oe.maxAge===0?le.expires=Date.now()+Oe.maxAge*1e3:le.readHeaders||(le.expires=le.maxAge===0?Date.now():Date.now()+le.maxAge),!le.limit){Ke.next=11;break}return le.debug("Detected limit: ".concat(le.limit)),Ke.next=11,Object($.default)(le);case 11:return Ke.next=13,Object(U.write)(le,te,oe);case 13:Ke.next=16;break;case 15:oe.request.excludedFromCache=!0;case 16:return Ke.abrupt("return",oe);case 17:case"end":return Ke.stop()}},re)})),J.apply(this,arguments)}ue.default=W},"./src/serialize.js":function(ne,ue,M){M.r(ue),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");function $(K,j){if(K==null)return{};var W=U(K,j),J,re;if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(K);for(re=0;re<le.length;re++)J=le[re],!(j.indexOf(J)>=0)&&Object.prototype.propertyIsEnumerable.call(K,J)&&(W[J]=K[J])}return W}function U(K,j){if(K==null)return{};var W={},J=Object.keys(K),re,le;for(le=0;le<J.length;le++)re=J[le],!(j.indexOf(re)>=0)&&(W[re]=K[re]);return W}function de(K,j,W){if(W.data)try{W.data=JSON.parse(W.data)}catch(re){K.debug("Could not parse data as JSON",re)}W.request,W.config;var J=$(W,["request","config"]);return J}ue.default=de},"./src/utilities.js":function(ne,ue,M){M.r(ue),M.d(ue,"isObject",function(){return U}),M.d(ue,"getTag",function(){return de}),M.d(ue,"isFunction",function(){return K}),M.d(ue,"isString",function(){return j}),M.d(ue,"mapObject",function(){return W}),M("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),M("./node_modules/core-js/modules/es6.symbol.js"),M("./node_modules/core-js/modules/es6.array.iterator.js"),M("./node_modules/core-js/modules/es6.object.to-string.js");function $(J){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$=function(le){return typeof le}:$=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},$(J)}function U(J){var re=$(J);return J!=null&&(re==="object"||re==="function")}function de(J){return J===null?J===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(J)}function K(J){if(!U(J))return!1;var re=de(J);return re==="[object Function]"||re==="[object AsyncFunction]"||re==="[object GeneratorFunction]"||re==="[object Proxy]"}function j(J){var re=$(J);return re==="string"||re==="object"&&J!=null&&!Array.isArray(J)&&de(J)==="[object String]"}function W(J,re){return U(J)?Object.keys(J).map(function(le){return re(J[le],le)}):[]}},axios:function(ne,ue){ne.exports=Me},util:function(ne,ue){ne.exports=D.default}})})});const N={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},Q=V.setupCache({maxAge:60*60*24*1e3}),ce=R.default.create({adapter:Q.adapter}),Te=async(xe,ve={})=>{const Me={...N,...ve},[ne,ue]=p.lngLatToGoogle(xe,Me.zoomBase),M=Me.tileUrl.replace("{z}",String(Me.zoomBase)).replace("{x}",String(ne)).replace("{y}",String(ue)),$={code:"",prefecture:"",city:""};let U;try{const j=await ce.get(M,{responseType:"arraybuffer"});U=Buffer.from(j.data,"binary")}catch(j){throw new Error(j)}const de=new w.VectorTile(new L.default(U));let K=Object.keys(de.layers);return Array.isArray(K)||(K=[K]),K.forEach(j=>{const W=de.layers[j];if(W&&Me.layer===W.name)for(let J=0;J<W.length;J++){const re=W.feature(J).toGeoJSON(ne,ue,Me.zoomBase);K.length>1&&(re.properties.vt_layer=j);const le={type:"FeatureCollection",features:[re]};c.geoContains(le,xe)&&($.code=String(re.id).length===5?String(re.id):`0${String(re.id)}`,$.prefecture=re.properties.prefecture,$.city=re.properties.city)}}),$};u.openReverseGeocoder=Te}(Tg)),Tg}var sC=oC();const aC={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},lC={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},uC={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},cC={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},b1={JPN:uC,CHN:aC,DEU:lC,KOR:cC};function Sw(u,c,p={}){const v={type:"Feature"};return(p.id===0||p.id)&&(v.id=p.id),p.bbox&&(v.bbox=p.bbox),v.properties=c||{},v.geometry=u,v}function hC(u,c,p={}){if(!u)throw new Error("coordinates is required");if(!Array.isArray(u))throw new Error("coordinates must be an Array");if(u.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!S1(u[0])||!S1(u[1]))throw new Error("coordinates must contain numbers");return Sw({type:"Point",coordinates:u},c,p)}function dC(u,c,p={}){for(const x of u){if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(x[x.length-1].length!==x[0].length)throw new Error("First and last Position are not equivalent.");for(let T=0;T<x[x.length-1].length;T++)if(x[x.length-1][T]!==x[0][T])throw new Error("First and last Position are not equivalent.")}return Sw({type:"Polygon",coordinates:u},c,p)}function S1(u){return!isNaN(u)&&u!==null&&!Array.isArray(u)}function fC(u){if(!u)throw new Error("coord is required");if(!Array.isArray(u)){if(u.type==="Feature"&&u.geometry!==null&&u.geometry.type==="Point")return[...u.geometry.coordinates];if(u.type==="Point")return[...u.coordinates]}if(Array.isArray(u)&&u.length>=2&&!Array.isArray(u[0])&&!Array.isArray(u[1]))return[...u];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function pC(u){return u.type==="Feature"?u.geometry:u}function Ew(u,c,p){if(u!==null)for(var v,x,T,w,a,L,R,D=0,C=0,k,V=u.type,N=V==="FeatureCollection",Q=V==="Feature",ce=N?u.features.length:1,Te=0;Te<ce;Te++){R=N?u.features[Te].geometry:Q?u.geometry:u,k=R?R.type==="GeometryCollection":!1,a=k?R.geometries.length:1;for(var xe=0;xe<a;xe++){var ve=0,Me=0;if(w=k?R.geometries[xe]:R,w!==null){L=w.coordinates;var ne=w.type;switch(D=ne==="Polygon"||ne==="MultiPolygon"?1:0,ne){case null:break;case"Point":if(c(L,C,Te,ve,Me)===!1)return!1;C++,ve++;break;case"LineString":case"MultiPoint":for(v=0;v<L.length;v++){if(c(L[v],C,Te,ve,Me)===!1)return!1;C++,ne==="MultiPoint"&&ve++}ne==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(v=0;v<L.length;v++){for(x=0;x<L[v].length-D;x++){if(c(L[v][x],C,Te,ve,Me)===!1)return!1;C++}ne==="MultiLineString"&&ve++,ne==="Polygon"&&Me++}ne==="Polygon"&&ve++;break;case"MultiPolygon":for(v=0;v<L.length;v++){for(Me=0,x=0;x<L[v].length;x++){for(T=0;T<L[v][x].length-D;T++){if(c(L[v][x][T],C,Te,ve,Me)===!1)return!1;C++}Me++}ve++}break;case"GeometryCollection":for(v=0;v<w.geometries.length;v++)if(Ew(w.geometries[v],c)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mC(u,c){var p=0,v=0,x=0,T=0,w=0,a=0,L=0,R=0,D=null,C=null,k=u[0],V=u[1],N=c.length;for(p;p<N;p++){v=0;var Q=c[p].length-1,ce=c[p];if(D=ce[0],D[0]!==ce[Q][0]&&D[1]!==ce[Q][1])throw new Error("First and last coordinates in a ring must be the same");for(w=D[0]-k,a=D[1]-V,v;v<Q;v++){if(C=ce[v+1],R=C[1]-V,a<0&&R<0||a>0&&R>0){D=C,a=R,w=D[0]-k;continue}if(L=C[0]-u[0],R>0&&a<=0){if(T=w*R-L*a,T>0)x=x+1;else if(T===0)return 0}else if(a>0&&R<=0){if(T=w*R-L*a,T<0)x=x+1;else if(T===0)return 0}else if(R===0&&a<0){if(T=w*R-L*a,T===0)return 0}else if(a===0&&R<0){if(T=w*R-L*a,T===0)return 0}else if(a===0&&R===0){if(L<=0&&w>=0)return 0;if(w<=0&&L>=0)return 0}D=C,a=R,w=L}}return x%2!==0}function gC(u,c,p={}){if(!u)throw new Error("point is required");if(!c)throw new Error("polygon is required");const v=fC(u),x=pC(c),T=x.type,w=c.bbox;let a=x.coordinates;if(w&&yC(v,w)===!1)return!1;T==="Polygon"&&(a=[a]);let L=!1;for(var R=0;R<a.length;++R){const D=mC(v,a[R]);if(D===0)return!p.ignoreBoundary;D&&(L=!0)}return L}function yC(u,c){return c[0]<=u[0]&&c[1]<=u[1]&&c[2]>=u[0]&&c[3]>=u[1]}function vC(u,c={}){let p=0,v=0,x=0;return Ew(u,function(T){p+=T[0],v+=T[1],x++}),hC([p/x,v/x],c.properties)}const _C=()=>{const[u,c]=zt.useState(!1);return{detectCountry:zt.useCallback(async(v,x)=>{c(!0);const w=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const a of w.features)if(gC([v,x],a.geometry))return console.log("country: ",a.properties),c(!1),a;c(!1)},[]),loadingCountry:u}},uy=({feature:u,fieldOption:c,suggestList:p,onChange:v})=>{var a;const[x,T]=zt.useState((a=u.properties)==null?void 0:a[c.key]);zt.useEffect(()=>{var L;T((L=u.properties)==null?void 0:L[c.key])},[u]);const w=zt.useCallback(L=>{T(L.currentTarget.value),v&&v(L)},[]);return Mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Mt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:c.key,children:[c.displayName," (",c.key,")"]}),Mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:c.key,name:c.key,type:"text",autoComplete:"on",list:c.key+"-list",placeholder:c.placeholder,value:x,onChange:w}),Mt.jsx("datalist",{id:c.key+"-list",children:p&&p.map(L=>{if(parseInt(L.tags.admin_level)===c.adminLevel)return Mt.jsx("option",{value:L.tags.name},L.id);if(L.type==="node"&&c.adminLevel===9)return Mt.jsx("option",{value:L.tags.name},L.id)})})]})},xC=({feature:u,fields:c})=>u.properties?Mt.jsxs(Mt.Fragment,{children:[c.postcodeField&&Mt.jsx("span",{children:u.properties[c.postcodeField.key]})," ",c.mainFields&&c.mainFields.map(p=>{var v;return Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("span",{children:(v=u.properties)==null?void 0:v[p.key]})," "]})}),c.detailFields&&c.detailFields.map(p=>{var v;return Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("span",{children:(v=u.properties)==null?void 0:v[p.key]})," "]})})]}):null,wC=({placeholder:u,defaultValue:c})=>{const[p,v]=zt.useState(c);zt.useEffect(()=>{v(c)},[c]);const x=zt.useCallback(T=>{v(T.currentTarget.value)},[]);return Mt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[Mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),Mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:u,value:p,required:!0,onChange:x})]})};var Ef={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var bC=Ef.exports,E1;function SC(){return E1||(E1=1,function(u,c){(function(){var p,v="4.15.0",x=200,T="Expected a function",w="__lodash_hash_undefined__",a=1,L=2,R=1/0,D=9007199254740991,C="[object Arguments]",k="[object Array]",V="[object Boolean]",N="[object Date]",Q="[object Error]",ce="[object Function]",Te="[object GeneratorFunction]",xe="[object Map]",ve="[object Number]",Me="[object Object]",ne="[object Promise]",ue="[object RegExp]",M="[object Set]",$="[object String]",U="[object Symbol]",de="[object WeakMap]",K="[object ArrayBuffer]",j="[object DataView]",W="[object Float32Array]",J="[object Float64Array]",re="[object Int8Array]",le="[object Int16Array]",te="[object Int32Array]",oe="[object Uint8Array]",_e="[object Uint8ClampedArray]",be="[object Uint16Array]",he="[object Uint32Array]",Fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,De=/^\./,Ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt=/[\\^$.*+?()[\]{}|]/g,pt=/\\(\\)?/g,_t=/\w*$/,Tt=/^\[object .+?Constructor\]$/,Lt=/^(?:0|[1-9]\d*)$/,It={};It[W]=It[J]=It[re]=It[le]=It[te]=It[oe]=It[_e]=It[be]=It[he]=!0,It[C]=It[k]=It[K]=It[V]=It[j]=It[N]=It[Q]=It[ce]=It[xe]=It[ve]=It[Me]=It[ue]=It[M]=It[$]=It[de]=!1;var kt={};kt[C]=kt[k]=kt[K]=kt[j]=kt[V]=kt[N]=kt[W]=kt[J]=kt[re]=kt[le]=kt[te]=kt[xe]=kt[ve]=kt[Me]=kt[ue]=kt[M]=kt[$]=kt[U]=kt[oe]=kt[_e]=kt[be]=kt[he]=!0,kt[Q]=kt[ce]=kt[de]=!1;var Jt=typeof xd=="object"&&xd&&xd.Object===Object&&xd,cn=typeof self=="object"&&self&&self.Object===Object&&self,Tn=Jt||cn||Function("return this")(),at=c&&!c.nodeType&&c,kn=at&&!0&&u&&!u.nodeType&&u,hn=kn&&kn.exports===at,en=hn&&Jt.process,ze=function(){try{return en&&en.binding("util")}catch{}}(),G=ze&&ze.isTypedArray;function H(ee,Ie){return ee.set(Ie[0],Ie[1]),ee}function Ce(ee,Ie){return ee.add(Ie),ee}function rt(ee,Ie,We){switch(We.length){case 0:return ee.call(Ie);case 1:return ee.call(Ie,We[0]);case 2:return ee.call(Ie,We[0],We[1]);case 3:return ee.call(Ie,We[0],We[1],We[2])}return ee.apply(Ie,We)}function ct(ee,Ie){for(var We=-1,wt=ee?ee.length:0;++We<wt&&Ie(ee[We],We,ee)!==!1;);return ee}function Et(ee,Ie){for(var We=-1,wt=Ie.length,Kt=ee.length;++We<wt;)ee[Kt+We]=Ie[We];return ee}function ye(ee,Ie,We,wt){for(var Kt=-1,Nt=ee?ee.length:0;++Kt<Nt;)We=Ie(We,ee[Kt],Kt,ee);return We}function z(ee,Ie){for(var We=-1,wt=ee?ee.length:0;++We<wt;)if(Ie(ee[We],We,ee))return!0;return!1}function q(ee){return function(Ie){return Ie==null?p:Ie[ee]}}function Re(ee,Ie){for(var We=-1,wt=Array(ee);++We<ee;)wt[We]=Ie(We);return wt}function Je(ee){return function(Ie){return ee(Ie)}}function ft(ee,Ie){return ee==null?p:ee[Ie]}function Qe(ee){var Ie=!1;if(ee!=null&&typeof ee.toString!="function")try{Ie=!!(ee+"")}catch{}return Ie}function Ot(ee){var Ie=-1,We=Array(ee.size);return ee.forEach(function(wt,Kt){We[++Ie]=[Kt,wt]}),We}function Bt(ee,Ie){return function(We){return ee(Ie(We))}}function zn(ee){var Ie=-1,We=Array(ee.size);return ee.forEach(function(wt){We[++Ie]=wt}),We}var Zn=Array.prototype,Xt=Function.prototype,Fr=Object.prototype,Kr=Tn["__core-js_shared__"],Yr=function(){var ee=/[^.]+$/.exec(Kr&&Kr.keys&&Kr.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Cr=Xt.toString,Ue=Fr.hasOwnProperty,me=Cr.call(Object),pe=Fr.toString,Pe=RegExp("^"+Cr.call(Ue).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=hn?Tn.Buffer:p,Be=Tn.Symbol,He=Tn.Uint8Array,nt=Bt(Object.getPrototypeOf,Object),Ze=Object.create,yt=Fr.propertyIsEnumerable,Ct=Zn.splice,gt=Object.getOwnPropertySymbols,Vt=Le?Le.isBuffer:p,pn=Bt(Object.keys,Object),vn=Math.max,Jn=ja(Tn,"DataView"),Fn=ja(Tn,"Map"),Qn=ja(Tn,"Promise"),Un=ja(Tn,"Set"),Or=ja(Tn,"WeakMap"),_r=ja(Object,"create"),Wn=!yt.call({valueOf:1},"valueOf"),ur=Vn(Jn),br=Vn(Fn),ii=Vn(Qn),ci=Vn(Un),zi=Vn(Or),as=Be?Be.prototype:p,Pn=as?as.valueOf:p,Sl=as?as.toString:p;function Xn(){}function Jr(ee){var Ie=-1,We=ee?ee.length:0;for(this.clear();++Ie<We;){var wt=ee[Ie];this.set(wt[0],wt[1])}}function Si(){this.__data__=_r?_r(null):{}}function Rc(ee){return this.has(ee)&&delete this.__data__[ee]}function qi(ee){var Ie=this.__data__;if(_r){var We=Ie[ee];return We===w?p:We}return Ue.call(Ie,ee)?Ie[ee]:p}function Ei(ee){var Ie=this.__data__;return _r?Ie[ee]!==p:Ue.call(Ie,ee)}function Ri(ee,Ie){var We=this.__data__;return We[ee]=_r&&Ie===p?w:Ie,this}Jr.prototype.clear=Si,Jr.prototype.delete=Rc,Jr.prototype.get=qi,Jr.prototype.has=Ei,Jr.prototype.set=Ri;function Fi(ee){var Ie=-1,We=ee?ee.length:0;for(this.clear();++Ie<We;){var wt=ee[Ie];this.set(wt[0],wt[1])}}function fr(){this.__data__=[]}function Qa(ee){var Ie=this.__data__,We=ra(Ie,ee);if(We<0)return!1;var wt=Ie.length-1;return We==wt?Ie.pop():Ct.call(Ie,We,1),!0}function Eo(ee){var Ie=this.__data__,We=ra(Ie,ee);return We<0?p:Ie[We][1]}function Gr(ee){return ra(this.__data__,ee)>-1}function ea(ee,Ie){var We=this.__data__,wt=ra(We,ee);return wt<0?We.push([ee,Ie]):We[wt][1]=Ie,this}Fi.prototype.clear=fr,Fi.prototype.delete=Qa,Fi.prototype.get=Eo,Fi.prototype.has=Gr,Fi.prototype.set=ea;function Dr(ee){var Ie=-1,We=ee?ee.length:0;for(this.clear();++Ie<We;){var wt=ee[Ie];this.set(wt[0],wt[1])}}function ta(){this.__data__={hash:new Jr,map:new(Fn||Fi),string:new Jr}}function Ui(ee){return fs(this,ee).delete(ee)}function Fc(ee){return fs(this,ee).get(ee)}function El(ee){return fs(this,ee).has(ee)}function ls(ee,Ie){return fs(this,ee).set(ee,Ie),this}Dr.prototype.clear=ta,Dr.prototype.delete=Ui,Dr.prototype.get=Fc,Dr.prototype.has=El,Dr.prototype.set=ls;function io(ee){var Ie=-1,We=ee?ee.length:0;for(this.__data__=new Dr;++Ie<We;)this.add(ee[Ie])}function nr(ee){return this.__data__.set(ee,w),this}function na(ee){return this.__data__.has(ee)}io.prototype.add=io.prototype.push=nr,io.prototype.has=na;function Xi(ee){this.__data__=new Fi(ee)}function Ls(){this.__data__=new Fi}function cr(ee){return this.__data__.delete(ee)}function el(ee){return this.__data__.get(ee)}function za(ee){return this.__data__.has(ee)}function Ra(ee,Ie){var We=this.__data__;if(We instanceof Fi){var wt=We.__data__;if(!Fn||wt.length<x-1)return wt.push([ee,Ie]),this;We=this.__data__=new Dr(wt)}return We.set(ee,Ie),this}Xi.prototype.clear=Ls,Xi.prototype.delete=cr,Xi.prototype.get=el,Xi.prototype.has=za,Xi.prototype.set=Ra;function Ds(ee,Ie){var We=di(ee)||Ao(ee)?Re(ee.length,String):[],wt=We.length,Kt=!!wt;for(var Nt in ee)(Ie||Ue.call(ee,Nt))&&!(Kt&&(Nt=="length"||Co(Nt,wt)))&&We.push(Nt);return We}function tl(ee,Ie,We){(We!==p&&!Vo(ee[Ie],We)||typeof Ie=="number"&&We===p&&!(Ie in ee))&&(ee[Ie]=We)}function vu(ee,Ie,We){var wt=ee[Ie];(!(Ue.call(ee,Ie)&&Vo(wt,We))||We===p&&!(Ie in ee))&&(ee[Ie]=We)}function ra(ee,Ie){for(var We=ee.length;We--;)if(Vo(ee[We][0],Ie))return We;return-1}function Tl(ee,Ie){return ee&&Us(Ie,uo(Ie),ee)}function oi(ee,Ie,We,wt,Kt,Nt,ln){var Sn;if(wt&&(Sn=Nt?wt(ee,Kt,Nt,ln):wt(ee)),Sn!==p)return Sn;if(!mi(ee))return ee;var Ln=di(ee);if(Ln){if(Sn=zl(ee),!Ie)return Fa(ee,Sn)}else{var pr=Io(ee),ar=pr==ce||pr==Te;if(Oi(ee))return rr(ee,Ie);if(pr==Me||pr==C||ar&&!Nt){if(Qe(ee))return Nt?ee:{};if(Sn=sc(ar?{}:ee),!Ie)return nc(ee,Tl(Sn,ee))}else{if(!kt[pr])return Nt?ee:{};Sn=Rl(ee,pr,oi,Ie)}}ln||(ln=new Xi);var hr=ln.get(ee);if(hr)return hr;if(ln.set(ee,Sn),!Ln)var Nr=We?il(ee):uo(ee);return ct(Nr||ee,function(Qr,ei){Nr&&(ei=Qr,Qr=ee[ei]),vu(Sn,ei,oi(Qr,Ie,We,wt,ei,ee,ln))}),Sn}function oo(ee){return mi(ee)?Ze(ee):{}}var Hr=kl(Bs),hi=To();function Bs(ee,Ie){return ee&&hi(ee,Ie,uo)}function so(ee,Ie){Ie=Vs(Ie,ee)?[Ie]:Ti(Ie);for(var We=0,wt=Ie.length;ee!=null&&We<wt;)ee=ee[jl(Ie[We++])];return We&&We==wt?ee:p}function Il(ee,Ie,We){var wt=Ie(ee);return di(ee)?wt:Et(wt,We(ee))}function _u(ee){return pe.call(ee)}function Uo(ee,Ie){return ee!=null&&Ie in Object(ee)}function xu(ee,Ie,We,wt,Kt){return ee===Ie?!0:ee==null||Ie==null||!mi(ee)&&!Mo(Ie)?ee!==ee&&Ie!==Ie:wu(ee,Ie,xu,We,wt,Kt)}function wu(ee,Ie,We,wt,Kt,Nt){var ln=di(ee),Sn=di(Ie),Ln=k,pr=k;ln||(Ln=Io(ee),Ln=Ln==C?Me:Ln),Sn||(pr=Io(Ie),pr=pr==C?Me:pr);var ar=Ln==Me&&!Qe(ee),hr=pr==Me&&!Qe(Ie),Nr=Ln==pr;if(Nr&&!ar)return Nt||(Nt=new Xi),ln||lo(ee)?Oa(ee,Ie,We,wt,Kt,Nt):rc(ee,Ie,Ln,We,wt,Kt,Nt);if(!(Kt&L)){var Qr=ar&&Ue.call(ee,"__wrapped__"),ei=hr&&Ue.call(Ie,"__wrapped__");if(Qr||ei){var co=Qr?ee.value():ee,$i=ei?Ie.value():Ie;return Nt||(Nt=new Xi),We(co,$i,wt,Kt,Nt)}}return Nr?(Nt||(Nt=new Xi),ic(ee,Ie,We,wt,Kt,Nt)):!1}function nl(ee,Ie,We,wt){var Kt=We.length,Nt=Kt;if(ee==null)return!Nt;for(ee=Object(ee);Kt--;){var ln=We[Kt];if(ln[2]?ln[1]!==ee[ln[0]]:!(ln[0]in ee))return!1}for(;++Kt<Nt;){ln=We[Kt];var Sn=ln[0],Ln=ee[Sn],pr=ln[1];if(ln[2]){if(Ln===p&&!(Sn in ee))return!1}else{var ar=new Xi,hr;if(!(hr===p?xu(pr,Ln,wt,a|L,ar):hr))return!1}}return!0}function ec(ee){if(!mi(ee)||Fl(ee))return!1;var Ie=Da(ee)||Qe(ee)?Pe:Tt;return Ie.test(Vn(ee))}function Oc(ee){return Mo(ee)&&Ba(ee.length)&&!!It[pe.call(ee)]}function ia(ee){return typeof ee=="function"?ee:ee==null?Cu:typeof ee=="object"?di(ee)?bu(ee[0],ee[1]):oa(ee):ua(ee)}function us(ee){if(!La(ee))return pn(ee);var Ie=[];for(var We in Object(ee))Ue.call(ee,We)&&We!="constructor"&&Ie.push(We);return Ie}function cs(ee){if(!mi(ee))return Dc(ee);var Ie=La(ee),We=[];for(var wt in ee)wt=="constructor"&&(Ie||!Ue.call(ee,wt))||We.push(wt);return We}function oa(ee){var Ie=Lc(ee);return Ie.length==1&&Ie[0][2]?Ol(Ie[0][0],Ie[0][1]):function(We){return We===ee||nl(We,ee,Ie)}}function bu(ee,Ie){return Vs(ee)&&ps(Ie)?Ol(jl(ee),Ie):function(We){var wt=la(We,ee);return wt===p&&wt===Ie?Dl(We,ee):xu(Ie,wt,p,a|L)}}function Cl(ee,Ie,We,wt,Kt){if(ee!==Ie){if(!(di(Ie)||lo(Ie)))var Nt=cs(Ie);ct(Nt||Ie,function(ln,Sn){if(Nt&&(Sn=ln,ln=Ie[Sn]),mi(ln))Kt||(Kt=new Xi),ao(ee,Ie,Sn,We,Cl,wt,Kt);else{var Ln=wt?wt(ee[Sn],ln,Sn+"",ee,Ie,Kt):p;Ln===p&&(Ln=ln),tl(ee,Sn,Ln)}})}}function ao(ee,Ie,We,wt,Kt,Nt,ln){var Sn=ee[We],Ln=Ie[We],pr=ln.get(Ln);if(pr){tl(ee,We,pr);return}var ar=Nt?Nt(Sn,Ln,We+"",ee,Ie,ln):p,hr=ar===p;hr&&(ar=Ln,di(Ln)||lo(Ln)?di(Sn)?ar=Sn:ms(Sn)?ar=Fa(Sn):(hr=!1,ar=oi(Ln,!0)):aa(Ln)||Ao(Ln)?Ao(Sn)?ar=ol(Sn):!mi(Sn)||wt&&Da(Sn)?(hr=!1,ar=oi(Ln,!0)):ar=Sn:hr=!1),hr&&(ln.set(Ln,ar),Kt(ar,Ln,wt,Nt,ln),ln.delete(Ln)),tl(ee,We,ar)}function Pl(ee){return function(Ie){return so(Ie,ee)}}function rl(ee,Ie){return Ie=vn(Ie===p?ee.length-1:Ie,0),function(){for(var We=arguments,wt=-1,Kt=vn(We.length-Ie,0),Nt=Array(Kt);++wt<Kt;)Nt[wt]=We[Ie+wt];wt=-1;for(var ln=Array(Ie+1);++wt<Ie;)ln[wt]=We[wt];return ln[Ie]=Nt,rt(ee,this,ln)}}function Ns(ee){if(typeof ee=="string")return ee;if(Yi(ee))return Sl?Sl.call(ee):"";var Ie=ee+"";return Ie=="0"&&1/ee==-R?"-0":Ie}function Ti(ee){return di(ee)?ee:Br(ee)}function rr(ee,Ie){if(Ie)return ee.slice();var We=new ee.constructor(ee.length);return ee.copy(We),We}function hs(ee){var Ie=new ee.constructor(ee.byteLength);return new He(Ie).set(new He(ee)),Ie}function tc(ee,Ie){var We=Ie?hs(ee.buffer):ee.buffer;return new ee.constructor(We,ee.byteOffset,ee.byteLength)}function ds(ee,Ie,We){var wt=Ie?We(Ot(ee),!0):Ot(ee);return ye(wt,H,new ee.constructor)}function Al(ee){var Ie=new ee.constructor(ee.source,_t.exec(ee));return Ie.lastIndex=ee.lastIndex,Ie}function Su(ee,Ie,We){var wt=Ie?We(zn(ee),!0):zn(ee);return ye(wt,Ce,new ee.constructor)}function Ki(ee){return Pn?Object(Pn.call(ee)):{}}function sa(ee,Ie){var We=Ie?hs(ee.buffer):ee.buffer;return new ee.constructor(We,ee.byteOffset,ee.length)}function Fa(ee,Ie){var We=-1,wt=ee.length;for(Ie||(Ie=Array(wt));++We<wt;)Ie[We]=ee[We];return Ie}function Us(ee,Ie,We,wt){We||(We={});for(var Kt=-1,Nt=Ie.length;++Kt<Nt;){var ln=Ie[Kt],Sn=p;vu(We,ln,Sn===p?ee[ln]:Sn)}return We}function nc(ee,Ie){return Us(ee,Eu(ee),Ie)}function Ml(ee){return rl(function(Ie,We){var wt=-1,Kt=We.length,Nt=Kt>1?We[Kt-1]:p,ln=Kt>2?We[2]:p;for(Nt=ee.length>3&&typeof Nt=="function"?(Kt--,Nt):p,ln&&Tu(We[0],We[1],ln)&&(Nt=Kt<3?p:Nt,Kt=1),Ie=Object(Ie);++wt<Kt;){var Sn=We[wt];Sn&&ee(Ie,Sn,wt,Nt)}return Ie})}function kl(ee,Ie){return function(We,wt){if(We==null)return We;if(!Vi(We))return ee(We,wt);for(var Kt=We.length,Nt=-1,ln=Object(We);++Nt<Kt&&wt(ln[Nt],Nt,ln)!==!1;);return We}}function To(ee){return function(Ie,We,wt){for(var Kt=-1,Nt=Object(Ie),ln=wt(Ie),Sn=ln.length;Sn--;){var Ln=ln[++Kt];if(We(Nt[Ln],Ln,Nt)===!1)break}return Ie}}function Oa(ee,Ie,We,wt,Kt,Nt){var ln=Kt&L,Sn=ee.length,Ln=Ie.length;if(Sn!=Ln&&!(ln&&Ln>Sn))return!1;var pr=Nt.get(ee);if(pr&&Nt.get(Ie))return pr==Ie;var ar=-1,hr=!0,Nr=Kt&a?new io:p;for(Nt.set(ee,Ie),Nt.set(Ie,ee);++ar<Sn;){var Qr=ee[ar],ei=Ie[ar];if(wt)var co=ln?wt(ei,Qr,ar,Ie,ee,Nt):wt(Qr,ei,ar,ee,Ie,Nt);if(co!==p){if(co)continue;hr=!1;break}if(Nr){if(!z(Ie,function($i,Ii){if(!Nr.has(Ii)&&(Qr===$i||We(Qr,$i,wt,Kt,Nt)))return Nr.add(Ii)})){hr=!1;break}}else if(!(Qr===ei||We(Qr,ei,wt,Kt,Nt))){hr=!1;break}}return Nt.delete(ee),Nt.delete(Ie),hr}function rc(ee,Ie,We,wt,Kt,Nt,ln){switch(We){case j:if(ee.byteLength!=Ie.byteLength||ee.byteOffset!=Ie.byteOffset)return!1;ee=ee.buffer,Ie=Ie.buffer;case K:return!(ee.byteLength!=Ie.byteLength||!wt(new He(ee),new He(Ie)));case V:case N:case ve:return Vo(+ee,+Ie);case Q:return ee.name==Ie.name&&ee.message==Ie.message;case ue:case $:return ee==Ie+"";case xe:var Sn=Ot;case M:var Ln=Nt&L;if(Sn||(Sn=zn),ee.size!=Ie.size&&!Ln)return!1;var pr=ln.get(ee);if(pr)return pr==Ie;Nt|=a,ln.set(ee,Ie);var ar=Oa(Sn(ee),Sn(Ie),wt,Kt,Nt,ln);return ln.delete(ee),ar;case U:if(Pn)return Pn.call(ee)==Pn.call(Ie)}return!1}function ic(ee,Ie,We,wt,Kt,Nt){var ln=Kt&L,Sn=uo(ee),Ln=Sn.length,pr=uo(Ie),ar=pr.length;if(Ln!=ar&&!ln)return!1;for(var hr=Ln;hr--;){var Nr=Sn[hr];if(!(ln?Nr in Ie:Ue.call(Ie,Nr)))return!1}var Qr=Nt.get(ee);if(Qr&&Nt.get(Ie))return Qr==Ie;var ei=!0;Nt.set(ee,Ie),Nt.set(Ie,ee);for(var co=ln;++hr<Ln;){Nr=Sn[hr];var $i=ee[Nr],Ii=Ie[Nr];if(wt)var Gs=ln?wt(Ii,$i,Nr,Ie,ee,Nt):wt($i,Ii,Nr,ee,Ie,Nt);if(!(Gs===p?$i===Ii||We($i,Ii,wt,Kt,Nt):Gs)){ei=!1;break}co||(co=Nr=="constructor")}if(ei&&!co){var ti=ee.constructor,Ji=Ie.constructor;ti!=Ji&&"constructor"in ee&&"constructor"in Ie&&!(typeof ti=="function"&&ti instanceof ti&&typeof Ji=="function"&&Ji instanceof Ji)&&(ei=!1)}return Nt.delete(ee),Nt.delete(Ie),ei}function il(ee){return Il(ee,uo,Eu)}function jc(){var ee=Xn.iteratee||al;return ee=ee===al?ia:ee,arguments.length?ee(arguments[0],arguments[1]):ee}function fs(ee,Ie){var We=ee.__data__;return Iu(Ie)?We[typeof Ie=="string"?"string":"hash"]:We.map}function Lc(ee){for(var Ie=uo(ee),We=Ie.length;We--;){var wt=Ie[We],Kt=ee[wt];Ie[We]=[wt,Kt,ps(Kt)]}return Ie}function ja(ee,Ie){var We=ft(ee,Ie);return ec(We)?We:p}var Eu=gt?Bt(gt,Object):Pu,Io=_u;(Jn&&Io(new Jn(new ArrayBuffer(1)))!=j||Fn&&Io(new Fn)!=xe||Qn&&Io(Qn.resolve())!=ne||Un&&Io(new Un)!=M||Or&&Io(new Or)!=de)&&(Io=function(ee){var Ie=pe.call(ee),We=Ie==Me?ee.constructor:p,wt=We?Vn(We):p;if(wt)switch(wt){case ur:return j;case br:return xe;case ii:return ne;case ci:return M;case zi:return de}return Ie});function oc(ee,Ie,We){Ie=Vs(Ie,ee)?[Ie]:Ti(Ie);for(var wt,Kt=-1,ln=Ie.length;++Kt<ln;){var Nt=jl(Ie[Kt]);if(!(wt=ee!=null&&We(ee,Nt)))break;ee=ee[Nt]}if(wt)return wt;var ln=ee?ee.length:0;return!!ln&&Ba(ln)&&Co(Nt,ln)&&(di(ee)||Ao(ee))}function zl(ee){var Ie=ee.length,We=ee.constructor(Ie);return Ie&&typeof ee[0]=="string"&&Ue.call(ee,"index")&&(We.index=ee.index,We.input=ee.input),We}function sc(ee){return typeof ee.constructor=="function"&&!La(ee)?oo(nt(ee)):{}}function Rl(ee,Ie,We,wt){var Kt=ee.constructor;switch(Ie){case K:return hs(ee);case V:case N:return new Kt(+ee);case j:return tc(ee,wt);case W:case J:case re:case le:case te:case oe:case _e:case be:case he:return sa(ee,wt);case xe:return ds(ee,wt,We);case ve:case $:return new Kt(ee);case ue:return Al(ee);case M:return Su(ee,wt,We);case U:return Ki(ee)}}function Co(ee,Ie){return Ie=Ie??D,!!Ie&&(typeof ee=="number"||Lt.test(ee))&&ee>-1&&ee%1==0&&ee<Ie}function Tu(ee,Ie,We){if(!mi(We))return!1;var wt=typeof Ie;return(wt=="number"?Vi(We)&&Co(Ie,We.length):wt=="string"&&Ie in We)?Vo(We[Ie],ee):!1}function Vs(ee,Ie){if(di(ee))return!1;var We=typeof ee;return We=="number"||We=="symbol"||We=="boolean"||ee==null||Yi(ee)?!0:Oe.test(ee)||!Fe.test(ee)||Ie!=null&&ee in Object(Ie)}function Iu(ee){var Ie=typeof ee;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ee!=="__proto__":ee===null}function Fl(ee){return!!Yr&&Yr in ee}function La(ee){var Ie=ee&&ee.constructor,We=typeof Ie=="function"&&Ie.prototype||Fr;return ee===We}function ps(ee){return ee===ee&&!mi(ee)}function Ol(ee,Ie){return function(We){return We==null?!1:We[ee]===Ie&&(Ie!==p||ee in Object(We))}}function Dc(ee){var Ie=[];if(ee!=null)for(var We in Object(ee))Ie.push(We);return Ie}var Br=ir(function(ee){ee=$o(ee);var Ie=[];return De.test(ee)&&Ie.push(""),ee.replace(Ke,function(We,wt,Kt,Nt){Ie.push(Kt?Nt.replace(pt,"$1"):wt||We)}),Ie});function jl(ee){if(typeof ee=="string"||Yi(ee))return ee;var Ie=ee+"";return Ie=="0"&&1/ee==-R?"-0":Ie}function Vn(ee){if(ee!=null){try{return Cr.call(ee)}catch{}try{return ee+""}catch{}}return""}function Ll(ee){for(var Ie=-1,We=ee?ee.length:0,wt=0,Kt=[];++Ie<We;){var Nt=ee[Ie];Nt&&(Kt[wt++]=Nt)}return Kt}function xr(ee,Ie){var We=di(ee)?ct:Hr;return We(ee,jc(Ie,3))}function ir(ee,Ie){if(typeof ee!="function"||Ie&&typeof Ie!="function")throw new TypeError(T);var We=function(){var wt=arguments,Kt=Ie?Ie.apply(this,wt):wt[0],Nt=We.cache;if(Nt.has(Kt))return Nt.get(Kt);var ln=ee.apply(this,wt);return We.cache=Nt.set(Kt,ln),ln};return We.cache=new(ir.Cache||Dr),We}ir.Cache=Dr;function Po(ee){return oi(ee,!1,!0)}function Vo(ee,Ie){return ee===Ie||ee!==ee&&Ie!==Ie}function Ao(ee){return ms(ee)&&Ue.call(ee,"callee")&&(!yt.call(ee,"callee")||pe.call(ee)==C)}var di=Array.isArray;function Vi(ee){return ee!=null&&Ba(ee.length)&&!Da(ee)}function ms(ee){return Mo(ee)&&Vi(ee)}var Oi=Vt||ll;function $s(ee){if(Vi(ee)&&(di(ee)||typeof ee=="string"||typeof ee.splice=="function"||Oi(ee)||Ao(ee)))return!ee.length;var Ie=Io(ee);if(Ie==xe||Ie==M)return!ee.size;if(Wn||La(ee))return!pn(ee).length;for(var We in ee)if(Ue.call(ee,We))return!1;return!0}function Da(ee){var Ie=mi(ee)?pe.call(ee):"";return Ie==ce||Ie==Te}function Ba(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=D}function mi(ee){var Ie=typeof ee;return!!ee&&(Ie=="object"||Ie=="function")}function Mo(ee){return!!ee&&typeof ee=="object"}function aa(ee){if(!Mo(ee)||pe.call(ee)!=Me||Qe(ee))return!1;var Ie=nt(ee);if(Ie===null)return!0;var We=Ue.call(Ie,"constructor")&&Ie.constructor;return typeof We=="function"&&We instanceof We&&Cr.call(We)==me}function Yi(ee){return typeof ee=="symbol"||Mo(ee)&&pe.call(ee)==U}var lo=G?Je(G):Oc;function ol(ee){return Us(ee,er(ee))}function $o(ee){return ee==null?"":Ns(ee)}function la(ee,Ie,We){var wt=ee==null?p:so(ee,Ie);return wt===p?We:wt}function Dl(ee,Ie){return ee!=null&&oc(ee,Ie,Uo)}function uo(ee){return Vi(ee)?Ds(ee):us(ee)}function er(ee){return Vi(ee)?Ds(ee,!0):cs(ee)}var sl=Ml(function(ee,Ie,We){Cl(ee,Ie,We)});function Cu(ee){return ee}function al(ee){return ia(typeof ee=="function"?ee:oi(ee,!0))}function ua(ee){return Vs(ee)?q(jl(ee)):Pl(ee)}function Pu(){return[]}function ll(){return!1}Xn.compact=Ll,Xn.iteratee=al,Xn.keys=uo,Xn.keysIn=er,Xn.memoize=ir,Xn.merge=sl,Xn.property=ua,Xn.toPlainObject=ol,Xn.clone=Po,Xn.eq=Vo,Xn.forEach=xr,Xn.get=la,Xn.hasIn=Dl,Xn.identity=Cu,Xn.isArguments=Ao,Xn.isArray=di,Xn.isArrayLike=Vi,Xn.isArrayLikeObject=ms,Xn.isBuffer=Oi,Xn.isEmpty=$s,Xn.isFunction=Da,Xn.isLength=Ba,Xn.isObject=mi,Xn.isObjectLike=Mo,Xn.isPlainObject=aa,Xn.isSymbol=Yi,Xn.isTypedArray=lo,Xn.stubArray=Pu,Xn.stubFalse=ll,Xn.toString=$o,Xn.each=xr,Xn.VERSION=v,kn&&((kn.exports=Xn)._=Xn,at._=Xn)}).call(bC)}(Ef,Ef.exports)),Ef.exports}var cy,T1;function EC(){if(T1)return cy;T1=1,cy=u;function u(v,x){var T=v&&v.type,w;if(T==="FeatureCollection")for(w=0;w<v.features.length;w++)u(v.features[w],x);else if(T==="GeometryCollection")for(w=0;w<v.geometries.length;w++)u(v.geometries[w],x);else if(T==="Feature")u(v.geometry,x);else if(T==="Polygon")c(v.coordinates,x);else if(T==="MultiPolygon")for(w=0;w<v.coordinates.length;w++)c(v.coordinates[w],x);return v}function c(v,x){if(v.length!==0){p(v[0],x);for(var T=1;T<v.length;T++)p(v[T],!x)}}function p(v,x){for(var T=0,w=0,a=0,L=v.length,R=L-1;a<L;R=a++){var D=(v[a][0]-v[R][0])*(v[R][1]+v[a][1]),C=T+D;w+=Math.abs(T)>=Math.abs(D)?T-C+D:D-C+T,T=C}T+w>=0!=!!x&&v.reverse()}return cy}const TC=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var hy,I1;function IC(){return I1||(I1=1,hy=TC),hy}var dy,C1;function CC(){if(C1)return dy;C1=1;var u=SC(),c=EC(),p={};IC().forEach(function(w){if(w.polygon==="all")p[w.key]=!0;else{var a=w.polygon==="whitelist"?"included_values":"excluded_values",L={};w.values.forEach(function(R){L[R]=!0}),p[w.key]={},p[w.key][a]=L}});function v(w,a){return(w.version||a.version)&&w.version!==a.version?(+w.version||0)>(+a.version||0)?w:a:u.merge(w,a)}var x={};x=function(w,a,L){a=u.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:p,deduplicator:v},a);var R;return typeof XMLDocument<"u"&&w instanceof XMLDocument||typeof XMLDocument>"u"&&w.childNodes?R=C(w):R=D(w),R;function D(N){var Q=new Array,ce=new Array,Te=new Array;function xe(K){var j=u.clone(K);j.lat=K.center.lat,j.lon=K.center.lon,j.__is_center_placeholder=!0,Q.push(j)}function ve(K){var j=u.clone(K);j.nodes=[];function W(J,re,le){var te={type:"node",id:"_"+j.type+"/"+j.id+"bounds"+le,lat:J,lon:re};j.nodes.push(te.id),Q.push(te)}W(j.bounds.minlat,j.bounds.minlon,1),W(j.bounds.maxlat,j.bounds.minlon,2),W(j.bounds.maxlat,j.bounds.maxlon,3),W(j.bounds.minlat,j.bounds.maxlon,4),j.nodes.push(j.nodes[0]),j.__is_bounds_placeholder=!0,ce.push(j)}function Me(K){function j(W,J,re){var le={type:"node",id:re,lat:W,lon:J};Q.push(le)}u.isArray(K.nodes)||(K.nodes=K.geometry.map(function(W){return W!==null?"_anonymous@"+W.lat+"/"+W.lon:"_anonymous@unknown_location"})),K.geometry.forEach(function(W,J){W&&j(W.lat,W.lon,K.nodes[J])})}function ne(K){function j(J,re,le){var te={type:"node",id:le,lat:J,lon:re};Q.push(te)}function W(J,re){if(ce.some(function(oe){return oe.type=="way"&&oe.id==re}))return;var le={type:"way",id:re,nodes:[]};function te(oe,_e){var be={type:"node",id:"_anonymous@"+oe+"/"+_e,lat:oe,lon:_e};le.nodes.push(be.id),Q.push(be)}J.forEach(function(oe){oe?te(oe.lat,oe.lon):le.nodes.push(void 0)}),ce.push(le)}K.members.forEach(function(J,re){J.type=="node"?J.lat&&j(J.lat,J.lon,J.ref):J.type=="way"&&J.geometry&&(J.ref="_fullGeom"+J.ref,W(J.geometry,J.ref))})}for(var ue=0;ue<N.elements.length;ue++)switch(N.elements[ue].type){case"node":var M=N.elements[ue];Q.push(M);break;case"way":var $=u.clone(N.elements[ue]);$.nodes=u.clone($.nodes),ce.push($),$.center&&xe($),$.geometry?Me($):$.bounds&&ve($);break;case"relation":var U=u.clone(N.elements[ue]);U.members=u.clone(U.members),Te.push(U);var de=U.members&&U.members.some(function(K){return K.type=="node"&&K.lat||K.type=="way"&&K.geometry&&K.geometry.length>0});U.center&&xe(U),de?ne(U):U.bounds&&ve(U);break}return k(Q,ce,Te)}function C(N){var Q=new Array,ce=new Array,Te=new Array;function xe(U,de,K){U.hasAttribute(K)&&(de[K]=U.getAttribute(K))}function ve(U,de){var K=u.clone(U);xe(de,K,"lat"),xe(de,K,"lon"),K.__is_center_placeholder=!0,Q.push(K)}function Me(U,de){var K=u.clone(U);K.nodes=[];function j(W,J,re){var le={type:"node",id:"_"+K.type+"/"+K.id+"bounds"+re,lat:W,lon:J};K.nodes.push(le.id),Q.push(le)}j(de.getAttribute("minlat"),de.getAttribute("minlon"),1),j(de.getAttribute("maxlat"),de.getAttribute("minlon"),2),j(de.getAttribute("maxlat"),de.getAttribute("maxlon"),3),j(de.getAttribute("minlat"),de.getAttribute("maxlon"),4),K.nodes.push(K.nodes[0]),K.__is_bounds_placeholder=!0,ce.push(K)}function ne(U,de){function K(j,W,J){var re={type:"node",id:J,lat:j,lon:W};return Q.push(re),re.id}u.isArray(U.nodes)||(U.nodes=[],u.each(de,function(j,W){U.nodes.push("_anonymous@"+j.getAttribute("lat")+"/"+j.getAttribute("lon"))})),u.each(de,function(j,W){j.getAttribute("lat")&&K(j.getAttribute("lat"),j.getAttribute("lon"),U.nodes[W])})}function ue(U,de){function K(W,J,re){var le={type:"node",id:re,lat:W,lon:J};Q.push(le)}function j(W,J){if(ce.some(function(te){return te.type=="way"&&te.id==J}))return;var re={type:"way",id:J,nodes:[]};function le(te,oe){var _e={type:"node",id:"_anonymous@"+te+"/"+oe,lat:te,lon:oe};re.nodes.push(_e.id),Q.push(_e)}u.each(W,function(te){te.getAttribute("lat")?le(te.getAttribute("lat"),te.getAttribute("lon")):re.nodes.push(void 0)}),ce.push(re)}u.each(de,function(W,J){U.members[J].type=="node"?W.getAttribute("lat")&&K(W.getAttribute("lat"),W.getAttribute("lon"),U.members[J].ref):U.members[J].type=="way"&&W.getElementsByTagName("nd").length>0&&(U.members[J].ref="_fullGeom"+U.members[J].ref,j(W.getElementsByTagName("nd"),U.members[J].ref))})}u.each(N.getElementsByTagName("node"),function(U,de){var K={};u.each(U.getElementsByTagName("tag"),function(W){K[W.getAttribute("k")]=W.getAttribute("v")});var j={type:"node"};xe(U,j,"id"),xe(U,j,"lat"),xe(U,j,"lon"),xe(U,j,"version"),xe(U,j,"timestamp"),xe(U,j,"changeset"),xe(U,j,"uid"),xe(U,j,"user"),u.isEmpty(K)||(j.tags=K),Q.push(j)});var M,$;return u.each(N.getElementsByTagName("way"),function(U,de){var K={},j=[];u.each(U.getElementsByTagName("tag"),function(re){K[re.getAttribute("k")]=re.getAttribute("v")});var W=!1;u.each(U.getElementsByTagName("nd"),function(re,le){var te;(te=re.getAttribute("ref"))&&(j[le]=te),!W&&re.getAttribute("lat")&&(W=!0)});var J={type:"way"};xe(U,J,"id"),xe(U,J,"version"),xe(U,J,"timestamp"),xe(U,J,"changeset"),xe(U,J,"uid"),xe(U,J,"user"),j.length>0&&(J.nodes=j),u.isEmpty(K)||(J.tags=K),(M=U.getElementsByTagName("center")[0])&&ve(J,M),W?ne(J,U.getElementsByTagName("nd")):($=U.getElementsByTagName("bounds")[0])&&Me(J,$),ce.push(J)}),u.each(N.getElementsByTagName("relation"),function(U,de){var K={},j=[];u.each(U.getElementsByTagName("tag"),function(re){K[re.getAttribute("k")]=re.getAttribute("v")});var W=!1;u.each(U.getElementsByTagName("member"),function(re,le){j[le]={},xe(re,j[le],"ref"),xe(re,j[le],"role"),xe(re,j[le],"type"),(!W&&j[le].type=="node"&&re.getAttribute("lat")||j[le].type=="way"&&re.getElementsByTagName("nd").length>0)&&(W=!0)});var J={type:"relation"};xe(U,J,"id"),xe(U,J,"version"),xe(U,J,"timestamp"),xe(U,J,"changeset"),xe(U,J,"uid"),xe(U,J,"user"),j.length>0&&(J.members=j),u.isEmpty(K)||(J.tags=K),(M=U.getElementsByTagName("center")[0])&&ve(J,M),W?ue(J,U.getElementsByTagName("member")):($=U.getElementsByTagName("bounds")[0])&&Me(J,$),Te.push(J)}),k(Q,ce,Te)}function k(N,Q,ce){function Te(Lt,It){if(typeof It!="object"&&(It={}),typeof a.uninterestingTags=="function")return!a.uninterestingTags(Lt,It);for(var kt in Lt)if(a.uninterestingTags[kt]!==!0&&!(It[kt]===!0||It[kt]===Lt[kt]))return!0;return!1}function xe(Lt){var It={timestamp:Lt.timestamp,version:Lt.version,changeset:Lt.changeset,user:Lt.user,uid:Lt.uid};for(var kt in It)It[kt]===void 0&&delete It[kt];return It}for(var ve=new Object,Me=new Object,ne=0;ne<N.length;ne++){var ue=N[ne];ve[ue.id]!==void 0&&(ue=a.deduplicator(ue,ve[ue.id])),ve[ue.id]=ue,typeof ue.tags<"u"&&Te(ue.tags)&&(Me[ue.id]=!0)}for(var ne=0;ne<ce.length;ne++)if(u.isArray(ce[ne].members))for(var M=0;M<ce[ne].members.length;M++)ce[ne].members[M].type=="node"&&(Me[ce[ne].members[M].ref]=!0);for(var $=new Object,U=new Object,ne=0;ne<Q.length;ne++){var de=Q[ne];if($[de.id]&&(de=a.deduplicator(de,$[de.id])),$[de.id]=de,u.isArray(de.nodes))for(var M=0;M<de.nodes.length;M++)typeof de.nodes[M]!="object"&&(U[de.nodes[M]]=!0,de.nodes[M]=ve[de.nodes[M]])}var K=new Array;for(var j in ve){var ue=ve[j];(!U[j]||Me[j])&&K.push(ue)}for(var W=new Array,ne=0;ne<ce.length;ne++){var J=ce[ne];W[J.id]&&(J=a.deduplicator(J,W[J.id])),W[J.id]=J}var re={node:{},way:{},relation:{}};for(var j in W){var J=W[j];if(!u.isArray(J.members)){a.verbose&&console.warn("Relation",J.type+"/"+J.id,"ignored because it has no members");continue}for(var M=0;M<J.members.length;M++){var le=J.members[M].type,te=J.members[M].ref;if(typeof te!="number"&&(te=te.replace("_fullGeom","")),!re[le]){a.verbose&&console.warn("Relation",J.type+"/"+J.id,"member",le+"/"+te,"ignored because it has an invalid type");continue}typeof re[le][te]>"u"&&(re[le][te]=[]),re[le][te].push({role:J.members[M].role,rel:J.id,reltags:J.tags})}}var oe,_e=[];for(ne=0;ne<K.length;ne++){if(typeof K[ne].lon>"u"||typeof K[ne].lat>"u"){a.verbose&&console.warn("POI",K[ne].type+"/"+K[ne].id,"ignored because it lacks coordinates");continue}var be={type:"Feature",id:K[ne].type+"/"+K[ne].id,properties:{type:K[ne].type,id:K[ne].id,tags:K[ne].tags||{},relations:re.node[K[ne].id]||[],meta:xe(K[ne])},geometry:{type:"Point",coordinates:[+K[ne].lon,+K[ne].lat]}};K[ne].__is_center_placeholder&&(be.properties.geometry="center"),L?L(be):_e.push(be)}for(var he=[],Fe=[],ne=0;ne<ce.length;ne++)if(W[ce[ne].id]===ce[ne]){if(typeof ce[ne].tags<"u"&&(ce[ne].tags.type=="route"||ce[ne].tags.type=="waterway")){let It=function(kt){var Jt=!1,cn;cn=kt.members.filter(function(hn){return hn.type==="way"}),cn=cn.map(function(hn){var en=$[hn.ref];if(en===void 0||en.nodes===void 0){a.verbose&&console.warn("Route "+kt.type+"/"+kt.id,"tainted by a missing or incomplete  way",hn.type+"/"+hn.ref),Jt=!0;return}return{id:hn.ref,role:hn.role,way:en,nodes:en.nodes.filter(function(ze){return ze!==void 0?!0:(Jt=!0,a.verbose&&console.warn("Route",kt.type+"/"+kt.id,"tainted by a way",hn.type+"/"+hn.ref,"with a missing node"),!1)})}}),cn=u.compact(cn);var Tn;Tn=T(cn);var at=[];if(at=u.compact(Tn.map(function(hn){return u.compact(hn.map(function(en){return[+en.lon,+en.lat]}))})),at.length==0)return a.verbose&&console.warn("Route",kt.type+"/"+kt.id,"contains no coordinates"),!1;var kn={type:"Feature",id:kt.type+"/"+kt.id,properties:{type:kt.type,id:kt.id,tags:kt.tags||{},relations:re[kt.type][kt.id]||[],meta:xe(kt)},geometry:{type:at.length===1?"LineString":"MultiLineString",coordinates:at.length===1?at[0]:at}};return Jt&&(a.verbose&&console.warn("Route",kt.type+"/"+kt.id,"is tainted"),kn.properties.tainted=!0),kn};var _t=It;if(!u.isArray(ce[ne].members)){a.verbose&&console.warn("Route",ce[ne].type+"/"+ce[ne].id,"ignored because it has no members");continue}if(ce[ne].members.forEach(function(kt){$[kt.ref]&&!Te($[kt.ref].tags)&&($[kt.ref].is_skippablerelationmember=!0)}),be=It(ce[ne]),be===!1){a.verbose&&console.warn("Route relation",ce[ne].type+"/"+ce[ne].id,"ignored because it has invalid geometry");continue}L?L(c(be)):Fe.push(be)}if(typeof ce[ne].tags<"u"&&(ce[ne].tags.type=="multipolygon"||ce[ne].tags.type=="boundary")){let kt=function(Jt,cn){var Tn=!1,at=De?"way":"relation",kn=typeof Jt.id=="number"?Jt.id:+Jt.id.replace("_fullGeom",""),hn;hn=cn.members.filter(function(z){return z.type==="way"}),hn=hn.map(function(z){var q=$[z.ref];if(q===void 0||q.nodes===void 0){a.verbose&&console.warn("Multipolygon",at+"/"+kn,"tainted by a missing or incomplete way",z.type+"/"+z.ref),Tn=!0;return}return{id:z.ref,role:z.role||"outer",way:q,nodes:q.nodes.filter(function(Re){return Re!==void 0?!0:(Tn=!0,a.verbose&&console.warn("Multipolygon",at+"/"+kn,"tainted by a way",z.type+"/"+z.ref,"with a missing node"),!1)})}}),hn=u.compact(hn);var en,ze;en=T(hn.filter(function(z){return z.role==="outer"})),ze=T(hn.filter(function(z){return z.role==="inner"}));var G;function H(z){var q=function(Ot,Bt){for(var zn=0;zn<Bt.length;zn++)if(Je(Bt[zn],Ot))return!0;return!1},Re=function(Ot){return Ot.map(function(Bt){return[+Bt.lat,+Bt.lon]})},Je=function(Ot,Bt){for(var zn=Ot[0],Zn=Ot[1],Xt=!1,Fr=0,Kr=Bt.length-1;Fr<Bt.length;Kr=Fr++){var Yr=Bt[Fr][0],Cr=Bt[Fr][1],Ue=Bt[Kr][0],me=Bt[Kr][1],pe=Cr>Zn!=me>Zn&&zn<(Ue-Yr)*(Zn-Cr)/(me-Cr)+Yr;pe&&(Xt=!Xt)}return Xt},ft,Qe;for(z=Re(z),ft=0;ft<en.length;ft++)if(Qe=Re(en[ft]),q(Qe,z))return ft}G=en.map(function(z){return[z]});for(var Ce=0;Ce<ze.length;Ce++){var rt=H(ze[Ce]);rt!==void 0?G[rt].push(ze[Ce]):a.verbose&&console.warn("Multipolygon",at+"/"+kn,"contains an inner ring with no containing outer")}var ct=[];if(ct=u.compact(G.map(function(z){var q=u.compact(z.map(function(Re){if(Re.length<4){a.verbose&&console.warn("Multipolygon",at+"/"+kn,"contains a ring with less than four nodes");return}return u.compact(Re.map(function(Je){return[+Je.lon,+Je.lat]}))}));if(q.length==0){a.verbose&&console.warn("Multipolygon",at+"/"+kn,"contains an empty ring cluster");return}return q})),ct.length==0)return a.verbose&&console.warn("Multipolygon",at+"/"+kn,"contains no coordinates"),!1;var Et="MultiPolygon";ct.length===1&&(Et="Polygon",ct=ct[0]);var ye={type:"Feature",id:Jt.type+"/"+kn,properties:{type:Jt.type,id:kn,tags:Jt.tags||{},relations:re[Jt.type][Jt.id]||[],meta:xe(Jt)},geometry:{type:Et,coordinates:ct}};return Tn&&(a.verbose&&console.warn("Multipolygon",at+"/"+kn,"is tainted"),ye.properties.tainted=!0),ye};var Tt=kt;if(!u.isArray(ce[ne].members)){a.verbose&&console.warn("Multipolygon",ce[ne].type+"/"+ce[ne].id,"ignored because it has no members");continue}for(var Oe=0,M=0;M<ce[ne].members.length;M++)ce[ne].members[M].role=="outer"?Oe++:a.verbose&&ce[ne].members[M].role!="inner"&&console.warn("Multipolygon",ce[ne].type+"/"+ce[ne].id,"member",ce[ne].members[M].type+"/"+ce[ne].members[M].ref,'ignored because it has an invalid role: "'+ce[ne].members[M].role+'"');if(ce[ne].members.forEach(function(Jt){$[Jt.ref]&&(Jt.role==="outer"&&!Te($[Jt.ref].tags,ce[ne].tags)&&($[Jt.ref].is_skippablerelationmember=!0),Jt.role==="inner"&&!Te($[Jt.ref].tags)&&($[Jt.ref].is_skippablerelationmember=!0))}),Oe==0){a.verbose&&console.warn("Multipolygon relation",ce[ne].type+"/"+ce[ne].id,"ignored because it has no outer ways");continue}var De=!1;Oe==1&&!Te(ce[ne].tags,{type:!0})&&(De=!0);var be=null;if(!De)be=kt(ce[ne],ce[ne]);else{var Ke=ce[ne].members.filter(function(Jt){return Jt.role==="outer"})[0];if(Ke=$[Ke.ref],Ke===void 0){a.verbose&&console.warn("Multipolygon relation",ce[ne].type+"/"+ce[ne].id,"ignored because outer way",Ke.type+"/"+Ke.ref,"is missing");continue}Ke.is_skippablerelationmember=!0,be=kt(Ke,ce[ne])}if(be===!1){a.verbose&&console.warn("Multipolygon relation",ce[ne].type+"/"+ce[ne].id,"ignored because it has invalid geometry");continue}L?L(c(be)):Fe.push(be)}}for(var ne=0;ne<Q.length;ne++)if($[Q[ne].id]===Q[ne]){if(!u.isArray(Q[ne].nodes)){a.verbose&&console.warn("Way",Q[ne].type+"/"+Q[ne].id,"ignored because it has no nodes");continue}if(!Q[ne].is_skippablerelationmember){typeof Q[ne].id!="number"&&(Q[ne].id=+Q[ne].id.replace("_fullGeom","")),Q[ne].tainted=!1,Q[ne].hidden=!1;var tt=new Array;for(M=0;M<Q[ne].nodes.length;M++)typeof Q[ne].nodes[M]=="object"?tt.push([+Q[ne].nodes[M].lon,+Q[ne].nodes[M].lat]):(a.verbose&&console.warn("Way",Q[ne].type+"/"+Q[ne].id,"is tainted by an invalid node"),Q[ne].tainted=!0);if(tt.length<=1){a.verbose&&console.warn("Way",Q[ne].type+"/"+Q[ne].id,"ignored because it contains too few nodes");continue}var pt="LineString";typeof Q[ne].nodes[0]<"u"&&typeof Q[ne].nodes[Q[ne].nodes.length-1]<"u"&&Q[ne].nodes[0].id===Q[ne].nodes[Q[ne].nodes.length-1].id&&(typeof Q[ne].tags<"u"&&V(Q[ne].tags)||Q[ne].__is_bounds_placeholder)&&(pt="Polygon",tt=[tt]);var be={type:"Feature",id:Q[ne].type+"/"+Q[ne].id,properties:{type:Q[ne].type,id:Q[ne].id,tags:Q[ne].tags||{},relations:re.way[Q[ne].id]||[],meta:xe(Q[ne])},geometry:{type:pt,coordinates:tt}};Q[ne].tainted&&(a.verbose&&console.warn("Way",Q[ne].type+"/"+Q[ne].id,"is tainted"),be.properties.tainted=!0),Q[ne].__is_bounds_placeholder&&(be.properties.geometry="bounds"),L?L(c(be)):pt=="LineString"?he.push(be):Fe.push(be)}}return L?!0:(oe={type:"FeatureCollection",features:[]},oe.features=oe.features.concat(Fe),oe.features=oe.features.concat(he),oe.features=oe.features.concat(_e),a.flatProperties&&oe.features.forEach(function(Lt){Lt.properties=u.merge(Lt.properties.meta,Lt.properties.tags,{id:Lt.properties.type+"/"+Lt.properties.id})}),oe=c(oe),oe)}function V(N){var Q=a.polygonFeatures;if(typeof Q=="function")return Q(N);if(N.area==="no")return!1;for(var ce in N){var Te=N[ce],xe=Q[ce];if(!(typeof xe>"u")&&Te!=="no"&&(xe===!0||xe.included_values&&xe.included_values[Te]===!0||xe.excluded_values&&xe.excluded_values[Te]!==!0))return!0}return!1}};function T(w){for(var a=function(Te){return Te[0]},L=function(Te){return Te[Te.length-1]},R=function(Te,xe){return Te!==void 0&&xe!==void 0&&Te.id===xe.id},D=[],C,k,V,N,Q,ce;w.length;)for(C=w.pop().nodes.slice(),D.push(C);w.length&&!R(a(C),L(C));){for(k=a(C),V=L(C),N=0;N<w.length;N++)if(ce=w[N].nodes,R(V,a(ce))){Q=C.push,ce=ce.slice(1);break}else if(R(V,L(ce))){Q=C.push,ce=ce.slice(0,-1).reverse();break}else if(R(k,L(ce))){Q=C.unshift,ce=ce.slice(0,-1);break}else if(R(k,a(ce))){Q=C.unshift,ce=ce.slice(1).reverse();break}else ce=Q=null;if(!ce)break;w.splice(N,1),Q.apply(C,ce)}return D}return x.toGeojson=x,dy=x,dy}var PC=CC();const AC=Bf(PC),fy={type:"FeatureCollection",features:[]},Tw=()=>{const[u,c]=zt.useState(!1),p=zt.useCallback(async(w,a,L)=>{var Q,ce;if(u||(console.log(L),L<16))return fy;c(!0);let R=300;L>17&&(R=200),L>18&&(R=100),L>19&&(R=50),console.log("overpass: loading...");let D="[out:json]";D+=`[timeout:25];
`,D+='nwr["building"]',D+=`(around:${R},${w},${a});
`,D+="out meta geom;",console.log(D);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(D)}`,{});if(C.status!==200)return c(!1),fy;const k=await C.json();console.log("overpass json elements: ",k.elements);const V=AC(k);console.log("overpass osmtogeojson raw: ",V);for await(const Te of V.features){if(!Te.properties)continue;Te.id=Te.properties.id.split("/")[1];const xe=(Q=k.elements.filter(Me=>Te.id?typeof Te.id=="number"?Me.id===Te.id:Me.id===parseInt(Te.id):!1))==null?void 0:Q[0];if(xe&&(Te.properties.tags=xe.tags,Te.properties.nodes=xe.nodes),Te.geometry.type==="Polygon"){const Me=dC(Te.geometry.coordinates);var N=vC(Me);Te.properties.center=N.geometry.coordinates}Te.geometry.type==="Point"&&(Te.properties.center=Te.geometry.coordinates);const ve=Te.properties.uid;if(ve){let Me=localStorage.getItem(ve+"-icon");if(Me===null){const ne=await wl.getUser(ve);(ce=ne.img)!=null&&ce.href?(Me=ne.img.href,localStorage.setItem(ve+"-icon",ne.img.href)):localStorage.setItem(ve+"-icon","")}Te.properties.userIconHref=Me||""}}return console.log("overpass osmtogeojson converted: ",V),console.log("overpass: loaded."),c(!1),V},[]),[v,x]=zt.useState(!1),T=zt.useCallback(async w=>{console.log("overpass: loading...",w),x(!0);const a=`
      [out:json]
      [timeout:25];
      node(id:${w.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(a);const L=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(a)}`,{});if(L.status!==200){x(!1);return}const R=await L.json();console.log("overpass json parent elements: ",R.elements);const D=250,C=`
      [out:json]
      [timeout:25];
      node(id:${w.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${D});
      out;
      `;console.log(C);const k=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(k.status!==200){x(!1);return}const V=await k.json();console.log("overpass json child elements: ",V.elements);const N=`
      [out:json]
      [timeout:25];
      node(id:${w.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${D});
      out;
      `;console.log(N);const Q=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(N)}`,{});if(Q.status!==200){x(!1);return}const ce=await Q.json();return console.log("overpass json neighbour elements: ",ce.elements),x(!1),[...R.elements,...V.elements,...ce.elements]},[]);return{fetchOverpassBuildings:p,fetchOverpassAdmin:T,loadingOverpass:u,loadingOverpassAdmin:v}},MC=()=>Mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),Mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),Mt.jsxs("datalist",{id:"source-list",children:[Mt.jsx("option",{value:"survey"}),Mt.jsx("option",{value:"local knowledge"}),Mt.jsx("option",{value:"extrapolation"}),Mt.jsx("option",{value:"estimation from existing data"})]})]}),py={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},kC=({feature:u,onCancel:c,onSubmit:p})=>{var j,W,J,re;const{detectCountry:v,loadingCountry:x}=_C(),{fetchOverpassAdmin:T,loadingOverpassAdmin:w}=Tw(),a=JSON.parse((j=u.properties)==null?void 0:j.center),[L,R]=zt.useState(void 0),[D,C]=zt.useState(),[k,V]=zt.useState(u),[N,Q]=zt.useState(!1),[ce,Te]=zt.useState(!1),[xe,ve]=zt.useState(!1),[Me,ne]=zt.useState(),[ue,M]=zt.useState();zt.useEffect(()=>{Q(wl.isLoggedIn())},[]),zt.useEffect(()=>{(async()=>{var te,oe;const le=await v(a[0],a[1]);if(R(le),(te=le==null?void 0:le.properties)!=null&&te.ISO_A3&&b1[le.properties.ISO_A3]){const _e=b1[le.properties.ISO_A3];C(_e);const be=_e.defaultComment+" "+((oe=u.properties)==null?void 0:oe.id);M(be)}})()},[u]),zt.useEffect(()=>{console.log(k.properties)},[k]);const $=zt.useCallback(async()=>{const le=await sC.openReverseGeocoder([a[0],a[1]]);V(te=>{const oe={properties:{"addr:province":le.prefecture,"addr:city":le.city,...te.properties}};return te.properties=oe.properties,te})},[]),U=zt.useCallback(async()=>{if(!k.properties)return;k.properties.nodes;const le=await T(JSON.parse(k.properties.nodes));console.log("onOverpassReverseGeocode",le),ne(le)},[k]),de=zt.useCallback(async le=>{var Oe,De,Ke;ve(!0),le.preventDefault();const te=new FormData(le.currentTarget),oe=JSON.parse((Oe=u.properties)==null?void 0:Oe.tags);te.forEach((tt,pt)=>{typeof tt=="string"&&tt.length>0&&pt!=="comment"&&pt!=="source"&&(oe[pt]=tt)});const _e={type:"way",id:u.id,version:(De=u.properties)==null?void 0:De.version,tags:oe,nodes:JSON.parse((Ke=u.properties)==null?void 0:Ke.nodes)};console.info(JSON.stringify(_e,null,2));const be={create:[],modify:[_e],delete:[]},he=te.get("comment");he&&(py.comment=he.toString());const Fe=te.get("source");Fe&&(py.source=Fe.toString()),await wl.uploadChangeset(py,be),ve(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),p()},[u]),K=zt.useCallback(()=>{Te(!0)},[]);return k.properties?Mt.jsxs("div",{children:[Mt.jsxs("div",{children:["OSM:"," ",Mt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+k.properties.id,target:"_blank",children:k.properties.id})," | ",Mt.jsx(gx,{feature:k}),D&&Mt.jsxs("span",{children:[" | ","Address:"," ",Mt.jsx(xC,{feature:k,fields:D})]})]}),x?Mt.jsx(Pc,{icon:Oy,spin:!0}):Mt.jsx(Mt.Fragment,{children:D?Mt.jsxs("form",{onSubmit:de,children:[Mt.jsx("div",{className:"flex flex-wrap",children:Mt.jsx(uy,{feature:k,fieldOption:D.postcodeField,onChange:K})}),Mt.jsx("div",{className:"flex flex-wrap",children:D.mainFields.map(le=>Mt.jsx(uy,{feature:k,fieldOption:le,onChange:K,suggestList:Me},le.key))}),Mt.jsx("div",{className:"flex flex-wrap",children:D.detailFields.map(le=>Mt.jsx(uy,{feature:k,fieldOption:le,onChange:K},le.key))}),Mt.jsxs("div",{className:"flex flex-wrap",children:[Mt.jsx(MC,{}),Mt.jsx(wC,{defaultValue:ue})]}),Mt.jsx("div",{className:"flex flex-wrap",children:Mt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[Mt.jsx("button",{type:"button",onClick:c,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((W=L==null?void 0:L.properties)==null?void 0:W.ISO_A3)==="JPN"&&Mt.jsx("button",{type:"button",onClick:$,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),Mt.jsxs("button",{type:"button",disabled:w,onClick:U,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",w&&Mt.jsx(Pc,{icon:Oy,spin:!0})]}),Mt.jsx("button",{disabled:!N||xe||!ce,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!N&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),Mt.jsx(mx,{})]})]})})]}):Mt.jsx("div",{className:"flex flex-wrap",children:Mt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[Mt.jsxs("div",{className:"py-2",children:[Mt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(J=L==null?void 0:L.properties)==null?void 0:J.NAME," (ISO code:",(re=L==null?void 0:L.properties)==null?void 0:re.ISO_A3,") does not support yet."]}),Mt.jsx("p",{children:Mt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),Mt.jsx("button",{type:"button",onClick:c,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function zC(u,c){const[p,v]=zt.useState(u);return zt.useEffect(()=>{const x=setTimeout(()=>{v(u)},c);return()=>{clearTimeout(x)}},[u,c]),p}const RC={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},FC={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function OC(){const u=zt.useRef(null),[c,p]=zt.useState(),v=zC(c,2500),x=zt.useRef(null),[T,w]=zt.useState({type:"FeatureCollection",features:[]}),[a,L]=zt.useState("auto"),[R,D]=zt.useState(),[C,k]=zt.useState([]),{fetchOverpassBuildings:V,loadingOverpass:N}=Tw();zt.useEffect(()=>{setTimeout(()=>{var M;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(M=x.current)==null||M.trigger())},500)},[]);const Q=zt.useCallback(M=>{const $=M.target.getCenter(),U=M.target.getZoom();p({zoom:U,latitude:$.lat,longitude:$.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),ce=zt.useCallback(M=>{p(M.viewState)},[]),Te=zt.useCallback(M=>{p(M.viewState)},[]);zt.useEffect(()=>{(async()=>{if(!v)return;const M=v,$=await V(M.latitude,M.longitude,M.zoom);w($)})()},[v]);const xe=zt.useCallback(M=>{var j;L("pointer");const{features:$,point:{x:U,y:de}}=M,K=$&&$[0];K?((j=u.current)==null||j.setFeatureState({source:"buildings-source",id:K.id},{hover:!0}),D({feature:K,x:U,y:de})):D(void 0)},[]),ve=zt.useCallback(M=>{var $;L("auto"),($=u.current)==null||$.querySourceFeatures("buildings-source").map(U=>{var de;(de=u.current)==null||de.setFeatureState({source:"buildings-source",id:U.id},{hover:!1})}),D(void 0)},[]),Me=zt.useCallback(M=>{var U;ne();const $=M.features&&M.features[0];$&&((U=u.current)==null||U.setFeatureState({source:"buildings-source",id:$.id},{select:!0}),k([$]))},[]),ne=zt.useCallback(()=>{var M;(M=u.current)==null||M.querySourceFeatures("buildings-source").map($=>{var U;(U=u.current)==null||U.setFeatureState({source:"buildings-source",id:$.id},{select:!1})}),k([])},[]),ue=zt.useMemo(()=>{let M=25;return c&&(M=c.zoom<18?20:c.zoom<19?25:35),T.features.map(($,U)=>!$.properties||!$.properties.center?null:Mt.jsx(Nb,{style:{cursor:"pointer"},longitude:$.properties.center[0],latitude:$.properties.center[1],anchor:"center",children:Mt.jsx(FE,{feature:$,size:M})},`marker-${U}`))},[T,c]);return Mt.jsxs("div",{children:[Mt.jsx(pE,{}),Mt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:Mt.jsx(LE,{viewState:c})}),Mt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[C.length>0&&Mt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:Mt.jsx("div",{style:{padding:"10px"},children:C.map(M=>Mt.jsx(kC,{feature:M,onCancel:ne,onSubmit:ne},M.id))})}),Mt.jsxs(Bb,{ref:u,...c,onMove:ce,onMoveEnd:Te,onLoad:Q,interactiveLayerIds:["buildings-layer-fill"],onClick:Me,onMouseEnter:xe,onMouseLeave:ve,dragRotate:!1,boxZoom:!1,hash:!0,cursor:a,mapLib:z1,style:{width:"100%",height:"100%"},mapStyle:RC,children:[Mt.jsx(Gb,{id:"buildings-source",type:"geojson",data:T,children:Mt.jsx($b,{...FC})}),Mt.jsx(Ub,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),Mt.jsx(Vb,{ref:x,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),Mt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!c||c!=null&&c.zoom&&c.zoom<16?Mt.jsx(Pc,{size:"2x",icon:hE}):N?Mt.jsx(Pc,{size:"2x",icon:Oy,spin:!0}):Mt.jsx(Pc,{size:"2x",icon:uE})}),ue,R&&Mt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:R.x+5,top:R.y+5},children:[Mt.jsx(gx,{feature:R.feature}),Mt.jsx("br",{}),Mt.jsx(OE,{feature:R.feature}),Mt.jsx(mE,{feature:R.feature})]})]})]})]})}var my={},mf={},P1;function jC(){if(P1)return mf;P1=1,mf.byteLength=a,mf.toByteArray=R,mf.fromByteArray=k;for(var u=[],c=[],p=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,T=v.length;x<T;++x)u[x]=v[x],c[v.charCodeAt(x)]=x;c[45]=62,c[95]=63;function w(V){var N=V.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Q=V.indexOf("=");Q===-1&&(Q=N);var ce=Q===N?0:4-Q%4;return[Q,ce]}function a(V){var N=w(V),Q=N[0],ce=N[1];return(Q+ce)*3/4-ce}function L(V,N,Q){return(N+Q)*3/4-Q}function R(V){var N,Q=w(V),ce=Q[0],Te=Q[1],xe=new p(L(V,ce,Te)),ve=0,Me=Te>0?ce-4:ce,ne;for(ne=0;ne<Me;ne+=4)N=c[V.charCodeAt(ne)]<<18|c[V.charCodeAt(ne+1)]<<12|c[V.charCodeAt(ne+2)]<<6|c[V.charCodeAt(ne+3)],xe[ve++]=N>>16&255,xe[ve++]=N>>8&255,xe[ve++]=N&255;return Te===2&&(N=c[V.charCodeAt(ne)]<<2|c[V.charCodeAt(ne+1)]>>4,xe[ve++]=N&255),Te===1&&(N=c[V.charCodeAt(ne)]<<10|c[V.charCodeAt(ne+1)]<<4|c[V.charCodeAt(ne+2)]>>2,xe[ve++]=N>>8&255,xe[ve++]=N&255),xe}function D(V){return u[V>>18&63]+u[V>>12&63]+u[V>>6&63]+u[V&63]}function C(V,N,Q){for(var ce,Te=[],xe=N;xe<Q;xe+=3)ce=(V[xe]<<16&16711680)+(V[xe+1]<<8&65280)+(V[xe+2]&255),Te.push(D(ce));return Te.join("")}function k(V){for(var N,Q=V.length,ce=Q%3,Te=[],xe=16383,ve=0,Me=Q-ce;ve<Me;ve+=xe)Te.push(C(V,ve,ve+xe>Me?Me:ve+xe));return ce===1?(N=V[Q-1],Te.push(u[N>>2]+u[N<<4&63]+"==")):ce===2&&(N=(V[Q-2]<<8)+V[Q-1],Te.push(u[N>>10]+u[N>>4&63]+u[N<<2&63]+"=")),Te.join("")}return mf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var A1;function LC(){return A1||(A1=1,function(u){const c=jC(),p=fw(),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;u.Buffer=a,u.SlowBuffer=xe,u.INSPECT_MAX_BYTES=50;const x=2147483647;u.kMaxLength=x,a.TYPED_ARRAY_SUPPORT=T(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function T(){try{const ye=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(ye,z),ye.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function w(ye){if(ye>x)throw new RangeError('The value "'+ye+'" is invalid for option "size"');const z=new Uint8Array(ye);return Object.setPrototypeOf(z,a.prototype),z}function a(ye,z,q){if(typeof ye=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(ye)}return L(ye,z,q)}a.poolSize=8192;function L(ye,z,q){if(typeof ye=="string")return k(ye,z);if(ArrayBuffer.isView(ye))return N(ye);if(ye==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye);if(H(ye,ArrayBuffer)||ye&&H(ye.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(ye,SharedArrayBuffer)||ye&&H(ye.buffer,SharedArrayBuffer)))return Q(ye,z,q);if(typeof ye=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Re=ye.valueOf&&ye.valueOf();if(Re!=null&&Re!==ye)return a.from(Re,z,q);const Je=ce(ye);if(Je)return Je;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ye[Symbol.toPrimitive]=="function")return a.from(ye[Symbol.toPrimitive]("string"),z,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye)}a.from=function(ye,z,q){return L(ye,z,q)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function R(ye){if(typeof ye!="number")throw new TypeError('"size" argument must be of type number');if(ye<0)throw new RangeError('The value "'+ye+'" is invalid for option "size"')}function D(ye,z,q){return R(ye),ye<=0?w(ye):z!==void 0?typeof q=="string"?w(ye).fill(z,q):w(ye).fill(z):w(ye)}a.alloc=function(ye,z,q){return D(ye,z,q)};function C(ye){return R(ye),w(ye<0?0:Te(ye)|0)}a.allocUnsafe=function(ye){return C(ye)},a.allocUnsafeSlow=function(ye){return C(ye)};function k(ye,z){if((typeof z!="string"||z==="")&&(z="utf8"),!a.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const q=ve(ye,z)|0;let Re=w(q);const Je=Re.write(ye,z);return Je!==q&&(Re=Re.slice(0,Je)),Re}function V(ye){const z=ye.length<0?0:Te(ye.length)|0,q=w(z);for(let Re=0;Re<z;Re+=1)q[Re]=ye[Re]&255;return q}function N(ye){if(H(ye,Uint8Array)){const z=new Uint8Array(ye);return Q(z.buffer,z.byteOffset,z.byteLength)}return V(ye)}function Q(ye,z,q){if(z<0||ye.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<z+(q||0))throw new RangeError('"length" is outside of buffer bounds');let Re;return z===void 0&&q===void 0?Re=new Uint8Array(ye):q===void 0?Re=new Uint8Array(ye,z):Re=new Uint8Array(ye,z,q),Object.setPrototypeOf(Re,a.prototype),Re}function ce(ye){if(a.isBuffer(ye)){const z=Te(ye.length)|0,q=w(z);return q.length===0||ye.copy(q,0,0,z),q}if(ye.length!==void 0)return typeof ye.length!="number"||Ce(ye.length)?w(0):V(ye);if(ye.type==="Buffer"&&Array.isArray(ye.data))return V(ye.data)}function Te(ye){if(ye>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return ye|0}function xe(ye){return+ye!=ye&&(ye=0),a.alloc(+ye)}a.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==a.prototype},a.compare=function(z,q){if(H(z,Uint8Array)&&(z=a.from(z,z.offset,z.byteLength)),H(q,Uint8Array)&&(q=a.from(q,q.offset,q.byteLength)),!a.isBuffer(z)||!a.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===q)return 0;let Re=z.length,Je=q.length;for(let ft=0,Qe=Math.min(Re,Je);ft<Qe;++ft)if(z[ft]!==q[ft]){Re=z[ft],Je=q[ft];break}return Re<Je?-1:Je<Re?1:0},a.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(z,q){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return a.alloc(0);let Re;if(q===void 0)for(q=0,Re=0;Re<z.length;++Re)q+=z[Re].length;const Je=a.allocUnsafe(q);let ft=0;for(Re=0;Re<z.length;++Re){let Qe=z[Re];if(H(Qe,Uint8Array))ft+Qe.length>Je.length?(a.isBuffer(Qe)||(Qe=a.from(Qe)),Qe.copy(Je,ft)):Uint8Array.prototype.set.call(Je,Qe,ft);else if(a.isBuffer(Qe))Qe.copy(Je,ft);else throw new TypeError('"list" argument must be an Array of Buffers');ft+=Qe.length}return Je};function ve(ye,z){if(a.isBuffer(ye))return ye.length;if(ArrayBuffer.isView(ye)||H(ye,ArrayBuffer))return ye.byteLength;if(typeof ye!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ye);const q=ye.length,Re=arguments.length>2&&arguments[2]===!0;if(!Re&&q===0)return 0;let Je=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return kn(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return ze(ye).length;default:if(Je)return Re?-1:kn(ye).length;z=(""+z).toLowerCase(),Je=!0}}a.byteLength=ve;function Me(ye,z,q){let Re=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,z>>>=0,q<=z))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return _e(this,z,q);case"utf8":case"utf-8":return J(this,z,q);case"ascii":return te(this,z,q);case"latin1":case"binary":return oe(this,z,q);case"base64":return W(this,z,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,z,q);default:if(Re)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),Re=!0}}a.prototype._isBuffer=!0;function ne(ye,z,q){const Re=ye[z];ye[z]=ye[q],ye[q]=Re}a.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<z;q+=2)ne(this,q,q+1);return this},a.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<z;q+=4)ne(this,q,q+3),ne(this,q+1,q+2);return this},a.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<z;q+=8)ne(this,q,q+7),ne(this,q+1,q+6),ne(this,q+2,q+5),ne(this,q+3,q+4);return this},a.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?J(this,0,z):Me.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(z){if(!a.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:a.compare(this,z)===0},a.prototype.inspect=function(){let z="";const q=u.INSPECT_MAX_BYTES;return z=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(z+=" ... "),"<Buffer "+z+">"},v&&(a.prototype[v]=a.prototype.inspect),a.prototype.compare=function(z,q,Re,Je,ft){if(H(z,Uint8Array)&&(z=a.from(z,z.offset,z.byteLength)),!a.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(q===void 0&&(q=0),Re===void 0&&(Re=z?z.length:0),Je===void 0&&(Je=0),ft===void 0&&(ft=this.length),q<0||Re>z.length||Je<0||ft>this.length)throw new RangeError("out of range index");if(Je>=ft&&q>=Re)return 0;if(Je>=ft)return-1;if(q>=Re)return 1;if(q>>>=0,Re>>>=0,Je>>>=0,ft>>>=0,this===z)return 0;let Qe=ft-Je,Ot=Re-q;const Bt=Math.min(Qe,Ot),zn=this.slice(Je,ft),Zn=z.slice(q,Re);for(let Xt=0;Xt<Bt;++Xt)if(zn[Xt]!==Zn[Xt]){Qe=zn[Xt],Ot=Zn[Xt];break}return Qe<Ot?-1:Ot<Qe?1:0};function ue(ye,z,q,Re,Je){if(ye.length===0)return-1;if(typeof q=="string"?(Re=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,Ce(q)&&(q=Je?0:ye.length-1),q<0&&(q=ye.length+q),q>=ye.length){if(Je)return-1;q=ye.length-1}else if(q<0)if(Je)q=0;else return-1;if(typeof z=="string"&&(z=a.from(z,Re)),a.isBuffer(z))return z.length===0?-1:M(ye,z,q,Re,Je);if(typeof z=="number")return z=z&255,typeof Uint8Array.prototype.indexOf=="function"?Je?Uint8Array.prototype.indexOf.call(ye,z,q):Uint8Array.prototype.lastIndexOf.call(ye,z,q):M(ye,[z],q,Re,Je);throw new TypeError("val must be string, number or Buffer")}function M(ye,z,q,Re,Je){let ft=1,Qe=ye.length,Ot=z.length;if(Re!==void 0&&(Re=String(Re).toLowerCase(),Re==="ucs2"||Re==="ucs-2"||Re==="utf16le"||Re==="utf-16le")){if(ye.length<2||z.length<2)return-1;ft=2,Qe/=2,Ot/=2,q/=2}function Bt(Zn,Xt){return ft===1?Zn[Xt]:Zn.readUInt16BE(Xt*ft)}let zn;if(Je){let Zn=-1;for(zn=q;zn<Qe;zn++)if(Bt(ye,zn)===Bt(z,Zn===-1?0:zn-Zn)){if(Zn===-1&&(Zn=zn),zn-Zn+1===Ot)return Zn*ft}else Zn!==-1&&(zn-=zn-Zn),Zn=-1}else for(q+Ot>Qe&&(q=Qe-Ot),zn=q;zn>=0;zn--){let Zn=!0;for(let Xt=0;Xt<Ot;Xt++)if(Bt(ye,zn+Xt)!==Bt(z,Xt)){Zn=!1;break}if(Zn)return zn}return-1}a.prototype.includes=function(z,q,Re){return this.indexOf(z,q,Re)!==-1},a.prototype.indexOf=function(z,q,Re){return ue(this,z,q,Re,!0)},a.prototype.lastIndexOf=function(z,q,Re){return ue(this,z,q,Re,!1)};function $(ye,z,q,Re){q=Number(q)||0;const Je=ye.length-q;Re?(Re=Number(Re),Re>Je&&(Re=Je)):Re=Je;const ft=z.length;Re>ft/2&&(Re=ft/2);let Qe;for(Qe=0;Qe<Re;++Qe){const Ot=parseInt(z.substr(Qe*2,2),16);if(Ce(Ot))return Qe;ye[q+Qe]=Ot}return Qe}function U(ye,z,q,Re){return G(kn(z,ye.length-q),ye,q,Re)}function de(ye,z,q,Re){return G(hn(z),ye,q,Re)}function K(ye,z,q,Re){return G(ze(z),ye,q,Re)}function j(ye,z,q,Re){return G(en(z,ye.length-q),ye,q,Re)}a.prototype.write=function(z,q,Re,Je){if(q===void 0)Je="utf8",Re=this.length,q=0;else if(Re===void 0&&typeof q=="string")Je=q,Re=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(Re)?(Re=Re>>>0,Je===void 0&&(Je="utf8")):(Je=Re,Re=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ft=this.length-q;if((Re===void 0||Re>ft)&&(Re=ft),z.length>0&&(Re<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");Je||(Je="utf8");let Qe=!1;for(;;)switch(Je){case"hex":return $(this,z,q,Re);case"utf8":case"utf-8":return U(this,z,q,Re);case"ascii":case"latin1":case"binary":return de(this,z,q,Re);case"base64":return K(this,z,q,Re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,z,q,Re);default:if(Qe)throw new TypeError("Unknown encoding: "+Je);Je=(""+Je).toLowerCase(),Qe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(ye,z,q){return z===0&&q===ye.length?c.fromByteArray(ye):c.fromByteArray(ye.slice(z,q))}function J(ye,z,q){q=Math.min(ye.length,q);const Re=[];let Je=z;for(;Je<q;){const ft=ye[Je];let Qe=null,Ot=ft>239?4:ft>223?3:ft>191?2:1;if(Je+Ot<=q){let Bt,zn,Zn,Xt;switch(Ot){case 1:ft<128&&(Qe=ft);break;case 2:Bt=ye[Je+1],(Bt&192)===128&&(Xt=(ft&31)<<6|Bt&63,Xt>127&&(Qe=Xt));break;case 3:Bt=ye[Je+1],zn=ye[Je+2],(Bt&192)===128&&(zn&192)===128&&(Xt=(ft&15)<<12|(Bt&63)<<6|zn&63,Xt>2047&&(Xt<55296||Xt>57343)&&(Qe=Xt));break;case 4:Bt=ye[Je+1],zn=ye[Je+2],Zn=ye[Je+3],(Bt&192)===128&&(zn&192)===128&&(Zn&192)===128&&(Xt=(ft&15)<<18|(Bt&63)<<12|(zn&63)<<6|Zn&63,Xt>65535&&Xt<1114112&&(Qe=Xt))}}Qe===null?(Qe=65533,Ot=1):Qe>65535&&(Qe-=65536,Re.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),Re.push(Qe),Je+=Ot}return le(Re)}const re=4096;function le(ye){const z=ye.length;if(z<=re)return String.fromCharCode.apply(String,ye);let q="",Re=0;for(;Re<z;)q+=String.fromCharCode.apply(String,ye.slice(Re,Re+=re));return q}function te(ye,z,q){let Re="";q=Math.min(ye.length,q);for(let Je=z;Je<q;++Je)Re+=String.fromCharCode(ye[Je]&127);return Re}function oe(ye,z,q){let Re="";q=Math.min(ye.length,q);for(let Je=z;Je<q;++Je)Re+=String.fromCharCode(ye[Je]);return Re}function _e(ye,z,q){const Re=ye.length;(!z||z<0)&&(z=0),(!q||q<0||q>Re)&&(q=Re);let Je="";for(let ft=z;ft<q;++ft)Je+=rt[ye[ft]];return Je}function be(ye,z,q){const Re=ye.slice(z,q);let Je="";for(let ft=0;ft<Re.length-1;ft+=2)Je+=String.fromCharCode(Re[ft]+Re[ft+1]*256);return Je}a.prototype.slice=function(z,q){const Re=this.length;z=~~z,q=q===void 0?Re:~~q,z<0?(z+=Re,z<0&&(z=0)):z>Re&&(z=Re),q<0?(q+=Re,q<0&&(q=0)):q>Re&&(q=Re),q<z&&(q=z);const Je=this.subarray(z,q);return Object.setPrototypeOf(Je,a.prototype),Je};function he(ye,z,q){if(ye%1!==0||ye<0)throw new RangeError("offset is not uint");if(ye+z>q)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(z,q,Re){z=z>>>0,q=q>>>0,Re||he(z,q,this.length);let Je=this[z],ft=1,Qe=0;for(;++Qe<q&&(ft*=256);)Je+=this[z+Qe]*ft;return Je},a.prototype.readUintBE=a.prototype.readUIntBE=function(z,q,Re){z=z>>>0,q=q>>>0,Re||he(z,q,this.length);let Je=this[z+--q],ft=1;for(;q>0&&(ft*=256);)Je+=this[z+--q]*ft;return Je},a.prototype.readUint8=a.prototype.readUInt8=function(z,q){return z=z>>>0,q||he(z,1,this.length),this[z]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(z,q){return z=z>>>0,q||he(z,2,this.length),this[z]|this[z+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(z,q){return z=z>>>0,q||he(z,2,this.length),this[z]<<8|this[z+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(z,q){return z=z>>>0,q||he(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(z,q){return z=z>>>0,q||he(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},a.prototype.readBigUInt64LE=ct(function(z){z=z>>>0,Jt(z,"offset");const q=this[z],Re=this[z+7];(q===void 0||Re===void 0)&&cn(z,this.length-8);const Je=q+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,ft=this[++z]+this[++z]*2**8+this[++z]*2**16+Re*2**24;return BigInt(Je)+(BigInt(ft)<<BigInt(32))}),a.prototype.readBigUInt64BE=ct(function(z){z=z>>>0,Jt(z,"offset");const q=this[z],Re=this[z+7];(q===void 0||Re===void 0)&&cn(z,this.length-8);const Je=q*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],ft=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+Re;return(BigInt(Je)<<BigInt(32))+BigInt(ft)}),a.prototype.readIntLE=function(z,q,Re){z=z>>>0,q=q>>>0,Re||he(z,q,this.length);let Je=this[z],ft=1,Qe=0;for(;++Qe<q&&(ft*=256);)Je+=this[z+Qe]*ft;return ft*=128,Je>=ft&&(Je-=Math.pow(2,8*q)),Je},a.prototype.readIntBE=function(z,q,Re){z=z>>>0,q=q>>>0,Re||he(z,q,this.length);let Je=q,ft=1,Qe=this[z+--Je];for(;Je>0&&(ft*=256);)Qe+=this[z+--Je]*ft;return ft*=128,Qe>=ft&&(Qe-=Math.pow(2,8*q)),Qe},a.prototype.readInt8=function(z,q){return z=z>>>0,q||he(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},a.prototype.readInt16LE=function(z,q){z=z>>>0,q||he(z,2,this.length);const Re=this[z]|this[z+1]<<8;return Re&32768?Re|4294901760:Re},a.prototype.readInt16BE=function(z,q){z=z>>>0,q||he(z,2,this.length);const Re=this[z+1]|this[z]<<8;return Re&32768?Re|4294901760:Re},a.prototype.readInt32LE=function(z,q){return z=z>>>0,q||he(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},a.prototype.readInt32BE=function(z,q){return z=z>>>0,q||he(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},a.prototype.readBigInt64LE=ct(function(z){z=z>>>0,Jt(z,"offset");const q=this[z],Re=this[z+7];(q===void 0||Re===void 0)&&cn(z,this.length-8);const Je=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(Re<<24);return(BigInt(Je)<<BigInt(32))+BigInt(q+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),a.prototype.readBigInt64BE=ct(function(z){z=z>>>0,Jt(z,"offset");const q=this[z],Re=this[z+7];(q===void 0||Re===void 0)&&cn(z,this.length-8);const Je=(q<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(Je)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+Re)}),a.prototype.readFloatLE=function(z,q){return z=z>>>0,q||he(z,4,this.length),p.read(this,z,!0,23,4)},a.prototype.readFloatBE=function(z,q){return z=z>>>0,q||he(z,4,this.length),p.read(this,z,!1,23,4)},a.prototype.readDoubleLE=function(z,q){return z=z>>>0,q||he(z,8,this.length),p.read(this,z,!0,52,8)},a.prototype.readDoubleBE=function(z,q){return z=z>>>0,q||he(z,8,this.length),p.read(this,z,!1,52,8)};function Fe(ye,z,q,Re,Je,ft){if(!a.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Je||z<ft)throw new RangeError('"value" argument is out of bounds');if(q+Re>ye.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(z,q,Re,Je){if(z=+z,q=q>>>0,Re=Re>>>0,!Je){const Ot=Math.pow(2,8*Re)-1;Fe(this,z,q,Re,Ot,0)}let ft=1,Qe=0;for(this[q]=z&255;++Qe<Re&&(ft*=256);)this[q+Qe]=z/ft&255;return q+Re},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(z,q,Re,Je){if(z=+z,q=q>>>0,Re=Re>>>0,!Je){const Ot=Math.pow(2,8*Re)-1;Fe(this,z,q,Re,Ot,0)}let ft=Re-1,Qe=1;for(this[q+ft]=z&255;--ft>=0&&(Qe*=256);)this[q+ft]=z/Qe&255;return q+Re},a.prototype.writeUint8=a.prototype.writeUInt8=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,1,255,0),this[q]=z&255,q+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,2,65535,0),this[q]=z&255,this[q+1]=z>>>8,q+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,2,65535,0),this[q]=z>>>8,this[q+1]=z&255,q+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,4,4294967295,0),this[q+3]=z>>>24,this[q+2]=z>>>16,this[q+1]=z>>>8,this[q]=z&255,q+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,4,4294967295,0),this[q]=z>>>24,this[q+1]=z>>>16,this[q+2]=z>>>8,this[q+3]=z&255,q+4};function Oe(ye,z,q,Re,Je){kt(z,Re,Je,ye,q,7);let ft=Number(z&BigInt(4294967295));ye[q++]=ft,ft=ft>>8,ye[q++]=ft,ft=ft>>8,ye[q++]=ft,ft=ft>>8,ye[q++]=ft;let Qe=Number(z>>BigInt(32)&BigInt(4294967295));return ye[q++]=Qe,Qe=Qe>>8,ye[q++]=Qe,Qe=Qe>>8,ye[q++]=Qe,Qe=Qe>>8,ye[q++]=Qe,q}function De(ye,z,q,Re,Je){kt(z,Re,Je,ye,q,7);let ft=Number(z&BigInt(4294967295));ye[q+7]=ft,ft=ft>>8,ye[q+6]=ft,ft=ft>>8,ye[q+5]=ft,ft=ft>>8,ye[q+4]=ft;let Qe=Number(z>>BigInt(32)&BigInt(4294967295));return ye[q+3]=Qe,Qe=Qe>>8,ye[q+2]=Qe,Qe=Qe>>8,ye[q+1]=Qe,Qe=Qe>>8,ye[q]=Qe,q+8}a.prototype.writeBigUInt64LE=ct(function(z,q=0){return Oe(this,z,q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ct(function(z,q=0){return De(this,z,q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(z,q,Re,Je){if(z=+z,q=q>>>0,!Je){const Bt=Math.pow(2,8*Re-1);Fe(this,z,q,Re,Bt-1,-Bt)}let ft=0,Qe=1,Ot=0;for(this[q]=z&255;++ft<Re&&(Qe*=256);)z<0&&Ot===0&&this[q+ft-1]!==0&&(Ot=1),this[q+ft]=(z/Qe>>0)-Ot&255;return q+Re},a.prototype.writeIntBE=function(z,q,Re,Je){if(z=+z,q=q>>>0,!Je){const Bt=Math.pow(2,8*Re-1);Fe(this,z,q,Re,Bt-1,-Bt)}let ft=Re-1,Qe=1,Ot=0;for(this[q+ft]=z&255;--ft>=0&&(Qe*=256);)z<0&&Ot===0&&this[q+ft+1]!==0&&(Ot=1),this[q+ft]=(z/Qe>>0)-Ot&255;return q+Re},a.prototype.writeInt8=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,1,127,-128),z<0&&(z=255+z+1),this[q]=z&255,q+1},a.prototype.writeInt16LE=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,2,32767,-32768),this[q]=z&255,this[q+1]=z>>>8,q+2},a.prototype.writeInt16BE=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,2,32767,-32768),this[q]=z>>>8,this[q+1]=z&255,q+2},a.prototype.writeInt32LE=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,4,2147483647,-2147483648),this[q]=z&255,this[q+1]=z>>>8,this[q+2]=z>>>16,this[q+3]=z>>>24,q+4},a.prototype.writeInt32BE=function(z,q,Re){return z=+z,q=q>>>0,Re||Fe(this,z,q,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[q]=z>>>24,this[q+1]=z>>>16,this[q+2]=z>>>8,this[q+3]=z&255,q+4},a.prototype.writeBigInt64LE=ct(function(z,q=0){return Oe(this,z,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ct(function(z,q=0){return De(this,z,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ke(ye,z,q,Re,Je,ft){if(q+Re>ye.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function tt(ye,z,q,Re,Je){return z=+z,q=q>>>0,Je||Ke(ye,z,q,4),p.write(ye,z,q,Re,23,4),q+4}a.prototype.writeFloatLE=function(z,q,Re){return tt(this,z,q,!0,Re)},a.prototype.writeFloatBE=function(z,q,Re){return tt(this,z,q,!1,Re)};function pt(ye,z,q,Re,Je){return z=+z,q=q>>>0,Je||Ke(ye,z,q,8),p.write(ye,z,q,Re,52,8),q+8}a.prototype.writeDoubleLE=function(z,q,Re){return pt(this,z,q,!0,Re)},a.prototype.writeDoubleBE=function(z,q,Re){return pt(this,z,q,!1,Re)},a.prototype.copy=function(z,q,Re,Je){if(!a.isBuffer(z))throw new TypeError("argument should be a Buffer");if(Re||(Re=0),!Je&&Je!==0&&(Je=this.length),q>=z.length&&(q=z.length),q||(q=0),Je>0&&Je<Re&&(Je=Re),Je===Re||z.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(Re<0||Re>=this.length)throw new RangeError("Index out of range");if(Je<0)throw new RangeError("sourceEnd out of bounds");Je>this.length&&(Je=this.length),z.length-q<Je-Re&&(Je=z.length-q+Re);const ft=Je-Re;return this===z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(q,Re,Je):Uint8Array.prototype.set.call(z,this.subarray(Re,Je),q),ft},a.prototype.fill=function(z,q,Re,Je){if(typeof z=="string"){if(typeof q=="string"?(Je=q,q=0,Re=this.length):typeof Re=="string"&&(Je=Re,Re=this.length),Je!==void 0&&typeof Je!="string")throw new TypeError("encoding must be a string");if(typeof Je=="string"&&!a.isEncoding(Je))throw new TypeError("Unknown encoding: "+Je);if(z.length===1){const Qe=z.charCodeAt(0);(Je==="utf8"&&Qe<128||Je==="latin1")&&(z=Qe)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(q<0||this.length<q||this.length<Re)throw new RangeError("Out of range index");if(Re<=q)return this;q=q>>>0,Re=Re===void 0?this.length:Re>>>0,z||(z=0);let ft;if(typeof z=="number")for(ft=q;ft<Re;++ft)this[ft]=z;else{const Qe=a.isBuffer(z)?z:a.from(z,Je),Ot=Qe.length;if(Ot===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(ft=0;ft<Re-q;++ft)this[ft+q]=Qe[ft%Ot]}return this};const _t={};function Tt(ye,z,q){_t[ye]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ye}]`,this.stack,delete this.name}get code(){return ye}set code(Je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Je,writable:!0})}toString(){return`${this.name} [${ye}]: ${this.message}`}}}Tt("ERR_BUFFER_OUT_OF_BOUNDS",function(ye){return ye?`${ye} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Tt("ERR_INVALID_ARG_TYPE",function(ye,z){return`The "${ye}" argument must be of type number. Received type ${typeof z}`},TypeError),Tt("ERR_OUT_OF_RANGE",function(ye,z,q){let Re=`The value of "${ye}" is out of range.`,Je=q;return Number.isInteger(q)&&Math.abs(q)>2**32?Je=Lt(String(q)):typeof q=="bigint"&&(Je=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(Je=Lt(Je)),Je+="n"),Re+=` It must be ${z}. Received ${Je}`,Re},RangeError);function Lt(ye){let z="",q=ye.length;const Re=ye[0]==="-"?1:0;for(;q>=Re+4;q-=3)z=`_${ye.slice(q-3,q)}${z}`;return`${ye.slice(0,q)}${z}`}function It(ye,z,q){Jt(z,"offset"),(ye[z]===void 0||ye[z+q]===void 0)&&cn(z,ye.length-(q+1))}function kt(ye,z,q,Re,Je,ft){if(ye>q||ye<z){const Qe=typeof z=="bigint"?"n":"";let Ot;throw z===0||z===BigInt(0)?Ot=`>= 0${Qe} and < 2${Qe} ** ${(ft+1)*8}${Qe}`:Ot=`>= -(2${Qe} ** ${(ft+1)*8-1}${Qe}) and < 2 ** ${(ft+1)*8-1}${Qe}`,new _t.ERR_OUT_OF_RANGE("value",Ot,ye)}It(Re,Je,ft)}function Jt(ye,z){if(typeof ye!="number")throw new _t.ERR_INVALID_ARG_TYPE(z,"number",ye)}function cn(ye,z,q){throw Math.floor(ye)!==ye?(Jt(ye,q),new _t.ERR_OUT_OF_RANGE("offset","an integer",ye)):z<0?new _t.ERR_BUFFER_OUT_OF_BOUNDS:new _t.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${z}`,ye)}const Tn=/[^+/0-9A-Za-z-_]/g;function at(ye){if(ye=ye.split("=")[0],ye=ye.trim().replace(Tn,""),ye.length<2)return"";for(;ye.length%4!==0;)ye=ye+"=";return ye}function kn(ye,z){z=z||1/0;let q;const Re=ye.length;let Je=null;const ft=[];for(let Qe=0;Qe<Re;++Qe){if(q=ye.charCodeAt(Qe),q>55295&&q<57344){if(!Je){if(q>56319){(z-=3)>-1&&ft.push(239,191,189);continue}else if(Qe+1===Re){(z-=3)>-1&&ft.push(239,191,189);continue}Je=q;continue}if(q<56320){(z-=3)>-1&&ft.push(239,191,189),Je=q;continue}q=(Je-55296<<10|q-56320)+65536}else Je&&(z-=3)>-1&&ft.push(239,191,189);if(Je=null,q<128){if((z-=1)<0)break;ft.push(q)}else if(q<2048){if((z-=2)<0)break;ft.push(q>>6|192,q&63|128)}else if(q<65536){if((z-=3)<0)break;ft.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((z-=4)<0)break;ft.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return ft}function hn(ye){const z=[];for(let q=0;q<ye.length;++q)z.push(ye.charCodeAt(q)&255);return z}function en(ye,z){let q,Re,Je;const ft=[];for(let Qe=0;Qe<ye.length&&!((z-=2)<0);++Qe)q=ye.charCodeAt(Qe),Re=q>>8,Je=q%256,ft.push(Je),ft.push(Re);return ft}function ze(ye){return c.toByteArray(at(ye))}function G(ye,z,q,Re){let Je;for(Je=0;Je<Re&&!(Je+q>=z.length||Je>=ye.length);++Je)z[Je+q]=ye[Je];return Je}function H(ye,z){return ye instanceof z||ye!=null&&ye.constructor!=null&&ye.constructor.name!=null&&ye.constructor.name===z.name}function Ce(ye){return ye!==ye}const rt=function(){const ye="0123456789abcdef",z=new Array(256);for(let q=0;q<16;++q){const Re=q*16;for(let Je=0;Je<16;++Je)z[Re+Je]=ye[q]+ye[Je]}return z}();function ct(ye){return typeof BigInt>"u"?Et:ye}function Et(){throw new Error("BigInt not supported")}}(my)),my}var DC=LC();window.Buffer=DC.Buffer;Jw.render(Mt.jsx(h0.StrictMode,{children:Mt.jsx(OC,{})}),document.getElementById("root"));
